!function(){var e=["spanId","traceId","traceFlags"],l=["inputs"],_=["inputId"],S=["inputs"],E=["inputId"],k=["type"],T=["type"],M=["motionValue","onUpdate","onComplete","element"],R=["autoplay","delay","type","repeat","repeatDelay","repeatType","keyframes","name","motionValue","element"],I=["class","className"];function _superPropSet(e,l,_,S,E,k){return function(e,l,_,S,E){if(!set(e,l,_,S||e)&&E)throw new TypeError("failed to set property");return _}(_getPrototypeOf(k?e.prototype:e),l,_,S,E)}function set(e,l,_,S){return set="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(e,l,_,S){var E,k=_superPropBase(e,l);if(k){if((E=Object.getOwnPropertyDescriptor(k,l)).set)return E.set.call(S,_),!0;if(!E.writable)return!1}if(E=Object.getOwnPropertyDescriptor(S,l)){if(!E.writable)return!1;E.value=_,Object.defineProperty(S,l,E)}else _defineProperty3(S,l,_);return!0},set(e,l,_,S)}function _regeneratorValues(e){if(null!=e){var l=e["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],_=0;if(l)return l.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return{next:function(){return e&&_>=e.length&&(e=void 0),{value:e&&e[_++],done:!e}}}}throw new TypeError(_typeof3(e)+" is not iterable")}function _wrapNativeSuper(e){var l="function"==typeof Map?new Map:void 0;return _wrapNativeSuper=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(l){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==l){if(l.has(e))return l.get(e);l.set(e,Wrapper)}function Wrapper(){return function(e,l,_){if(_isNativeReflectConstruct())return Reflect.construct.apply(null,arguments);var S=[null];S.push.apply(S,l);var E=new(e.bind.apply(e,S));return _&&_setPrototypeOf(E,_.prototype),E}(e,arguments,_getPrototypeOf(this).constructor)}return Wrapper.prototype=Object.create(e.prototype,{constructor:{value:Wrapper,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(Wrapper,e)},_wrapNativeSuper(e)}function _callSuper(e,l,_){return l=_getPrototypeOf(l),_possibleConstructorReturn(e,_isNativeReflectConstruct()?Reflect.construct(l,_||[],_getPrototypeOf(e).constructor):l.apply(e,_))}function _possibleConstructorReturn(e,l){if(l&&("object"==_typeof3(l)||"function"==typeof l))return l;if(void 0!==l)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(_isNativeReflectConstruct=function(){return!!e})()}function _superPropGet(e,l,_,S){var E=_get2(_getPrototypeOf(1&S?e.prototype:e),l,_);return 2&S&&"function"==typeof E?function(e){return E.apply(_,e)}:E}function _get2(){return _get2="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,l,_){var S=_superPropBase(e,l);if(S){var E=Object.getOwnPropertyDescriptor(S,l);return E.get?E.get.call(arguments.length<3?e:_):E.value}},_get2.apply(null,arguments)}function _superPropBase(e,l){for(;!{}.hasOwnProperty.call(e,l)&&null!==(e=_getPrototypeOf(e)););return e}function _getPrototypeOf(e){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_getPrototypeOf(e)}function _inherits(e,l){if("function"!=typeof l&&null!==l)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(l&&l.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),l&&_setPrototypeOf(e,l)}function _setPrototypeOf(e,l){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,l){return e.__proto__=l,e},_setPrototypeOf(e,l)}function _regenerator(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,l,_="function"==typeof Symbol?Symbol:{},S=_.iterator||"@@iterator",E=_.toStringTag||"@@toStringTag";function i(_,S,E,T){var M=S&&S.prototype instanceof Generator?S:Generator,R=Object.create(M.prototype);return _regeneratorDefine2(R,"_invoke",function(_,S,E){var T,M,R,I=0,O=E||[],D=!1,L={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function(l,_){return T=l,M=0,R=e,L.n=_,k}};function d(_,S){for(M=_,R=S,l=0;!D&&I&&!E&&l<O.length;l++){var E,T=O[l],U=L.p,B=T[2];_>3?(E=B===S)&&(R=T[(M=T[4])?5:(M=3,3)],T[4]=T[5]=e):T[0]<=U&&((E=_<2&&U<T[1])?(M=0,L.v=S,L.n=T[1]):U<B&&(E=_<3||T[0]>S||S>B)&&(T[4]=_,T[5]=S,L.n=B,M=0))}if(E||_>1)return k;throw D=!0,S}return function(E,O,U){if(I>1)throw TypeError("Generator is already running");for(D&&1===O&&d(O,U),M=O,R=U;(l=M<2?e:R)||!D;){T||(M?M<3?(M>1&&(L.n=-1),d(M,R)):L.n=R:L.v=R);try{if(I=2,T){if(M||(E="next"),l=T[E]){if(!(l=l.call(T,R)))throw TypeError("iterator result is not an object");if(!l.done)return l;R=l.value,M<2&&(M=0)}else 1===M&&(l=T.return)&&l.call(T),M<2&&(R=TypeError("The iterator does not provide a '"+E+"' method"),M=1);T=e}else if((l=(D=L.n<0)?R:_.call(S,L))!==k)break}catch(l){T=e,M=1,R=l}finally{I=1}}return{value:l,done:D}}}(_,E,T),!0),R}var k={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}l=Object.getPrototypeOf;var T=[][S]?l(l([][S]())):(_regeneratorDefine2(l={},S,function(){return this}),l),M=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(T);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,GeneratorFunctionPrototype):(e.__proto__=GeneratorFunctionPrototype,_regeneratorDefine2(e,E,"GeneratorFunction")),e.prototype=Object.create(M),e}return GeneratorFunction.prototype=GeneratorFunctionPrototype,_regeneratorDefine2(M,"constructor",GeneratorFunctionPrototype),_regeneratorDefine2(GeneratorFunctionPrototype,"constructor",GeneratorFunction),GeneratorFunction.displayName="GeneratorFunction",_regeneratorDefine2(GeneratorFunctionPrototype,E,"GeneratorFunction"),_regeneratorDefine2(M),_regeneratorDefine2(M,E,"Generator"),_regeneratorDefine2(M,S,function(){return this}),_regeneratorDefine2(M,"toString",function(){return"[object Generator]"}),(_regenerator=function(){return{w:i,m:f}})()}function _regeneratorDefine2(e,l,_,S){var E=Object.defineProperty;try{E({},"",{})}catch(e){E=0}_regeneratorDefine2=function(e,l,_,S){function o(l,_){_regeneratorDefine2(e,l,function(e){return this._invoke(l,_,e)})}l?E?E(e,l,{value:_,enumerable:!S,configurable:!S,writable:!S}):e[l]=_:(o("next",0),o("throw",1),o("return",2))},_regeneratorDefine2(e,l,_,S)}function asyncGeneratorStep(e,l,_,S,E,k,T){try{var M=e[k](T),R=M.value}catch(e){return void _(e)}M.done?l(R):Promise.resolve(R).then(S,E)}function _asyncToGenerator(e){return function(){var l=this,_=arguments;return new Promise(function(S,E){var k=e.apply(l,_);function _next(e){asyncGeneratorStep(k,S,E,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(k,S,E,_next,_throw,"throw",e)}_next(void 0)})}}function _objectWithoutProperties3(e,l){if(null==e)return{};var _,S,E=function(e,l){if(null==e)return{};var _={};for(var S in e)if({}.hasOwnProperty.call(e,S)){if(-1!==l.indexOf(S))continue;_[S]=e[S]}return _}(e,l);if(Object.getOwnPropertySymbols){var k=Object.getOwnPropertySymbols(e);for(S=0;S<k.length;S++)_=k[S],-1===l.indexOf(_)&&{}.propertyIsEnumerable.call(e,_)&&(E[_]=e[_])}return E}function _slicedToArray(e,l){return function(e){if(Array.isArray(e))return e}(e)||function(e,l){var _=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=_){var S,E,k,T,M=[],R=!0,I=!1;try{if(k=(_=_.call(e)).next,0===l){if(Object(_)!==_)return;R=!1}else for(;!(R=(S=k.call(_)).done)&&(M.push(S.value),M.length!==l);R=!0);}catch(e){I=!0,E=e}finally{try{if(!R&&null!=_.return&&(T=_.return(),Object(T)!==T))return}finally{if(I)throw E}}return M}}(e,l)||_unsupportedIterableToArray2(e,l)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _classCallCheck3(e,l){if(!(e instanceof l))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,l){for(var _=0;_<l.length;_++){var S=l[_];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(e,_toPropertyKey2(S.key),S)}}function _createClass3(e,l,_){return l&&_defineProperties(e.prototype,l),_&&_defineProperties(e,_),Object.defineProperty(e,"prototype",{writable:!1}),e}function ownKeys(e,l){var _=Object.keys(e);if(Object.getOwnPropertySymbols){var S=Object.getOwnPropertySymbols(e);l&&(S=S.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),_.push.apply(_,S)}return _}function _objectSpread2(e){for(var l=1;l<arguments.length;l++){var _=null!=arguments[l]?arguments[l]:{};l%2?ownKeys(Object(_),!0).forEach(function(l){_defineProperty3(e,l,_[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(_)):ownKeys(Object(_)).forEach(function(l){Object.defineProperty(e,l,Object.getOwnPropertyDescriptor(_,l))})}return e}function _defineProperty3(e,l,_){return(l=_toPropertyKey2(l))in e?Object.defineProperty(e,l,{value:_,enumerable:!0,configurable:!0,writable:!0}):e[l]=_,e}function _toPropertyKey2(e){var l=function(e,l){if("object"!=_typeof3(e)||!e)return e;var _=e[Symbol.toPrimitive];if(void 0!==_){var S=_.call(e,l||"default");if("object"!=_typeof3(S))return S;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===l?String:Number)(e)}(e,"string");return"symbol"==_typeof3(l)?l:l+""}function _toConsumableArray3(e){return function(e){if(Array.isArray(e))return _arrayLikeToArray2(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||_unsupportedIterableToArray2(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _createForOfIteratorHelper2(e,l){var _="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!_){if(Array.isArray(e)||(_=_unsupportedIterableToArray2(e))||l&&e&&"number"==typeof e.length){_&&(e=_);var S=0,F=function(){};return{s:F,n:function(){return S>=e.length?{done:!0}:{done:!1,value:e[S++]}},e:function(e){throw e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var E,k=!0,T=!1;return{s:function(){_=_.call(e)},n:function(){var e=_.next();return k=e.done,e},e:function(e){T=!0,E=e},f:function(){try{k||null==_.return||_.return()}finally{if(T)throw E}}}}function _unsupportedIterableToArray2(e,l){if(e){if("string"==typeof e)return _arrayLikeToArray2(e,l);var _={}.toString.call(e).slice(8,-1);return"Object"===_&&e.constructor&&(_=e.constructor.name),"Map"===_||"Set"===_?Array.from(e):"Arguments"===_||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(_)?_arrayLikeToArray2(e,l):void 0}}function _arrayLikeToArray2(e,l){(null==l||l>e.length)&&(l=e.length);for(var _=0,S=Array(l);_<l;_++)S[_]=e[_];return S}function _typeof3(e){return _typeof3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof3(e)}function _wrapAsyncGenerator(e){return function(){return new AsyncGenerator(e.apply(this,arguments))}}function AsyncGenerator(e){var l,_;function resume(l,_){try{var S=e[l](_),E=S.value,k=E instanceof _OverloadYield;Promise.resolve(k?E.v:E).then(function(_){if(k){var T="return"===l?"return":"next";if(!E.k||_.done)return resume(T,_);_=e[T](_).value}settle(S.done?"return":"normal",_)},function(e){resume("throw",e)})}catch(e){settle("throw",e)}}function settle(e,S){switch(e){case"return":l.resolve({value:S,done:!0});break;case"throw":l.reject(S);break;default:l.resolve({value:S,done:!1})}(l=l.next)?resume(l.key,l.arg):_=null}this._invoke=function(e,S){return new Promise(function(E,k){var T={key:e,arg:S,resolve:E,reject:k,next:null};_?_=_.next=T:(l=_=T,resume(e,S))})},"function"!=typeof e.return&&(this.return=void 0)}function _awaitAsyncGenerator(e){return new _OverloadYield(e,0)}function _asyncGeneratorDelegate(e){var l={},_=!1;function pump(l,S){return _=!0,S=new Promise(function(_){_(e[l](S))}),{done:!1,value:new _OverloadYield(S,1)}}return l["undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},l.next=function(e){return _?(_=!1,e):pump("next",e)},"function"==typeof e.throw&&(l.throw=function(e){if(_)throw _=!1,e;return pump("throw",e)}),"function"==typeof e.return&&(l.return=function(e){return _?(_=!1,e):pump("return",e)}),l}function _OverloadYield(e,l){this.v=e,this.k=l}function _asyncIterator(e){var l,_,S,E=2;for("undefined"!=typeof Symbol&&(_=Symbol.asyncIterator,S=Symbol.iterator);E--;){if(_&&null!=(l=e[_]))return l.call(e);if(S&&null!=(l=e[S]))return new AsyncFromSyncIterator(l.call(e));_="@@asyncIterator",S="@@iterator"}throw new TypeError("Object is not async iterable")}function AsyncFromSyncIterator(e){function AsyncFromSyncIteratorContinuation(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var l=e.done;return Promise.resolve(e.value).then(function(e){return{value:e,done:l}})}return AsyncFromSyncIterator=function(e){this.s=e,this.n=e.next},AsyncFromSyncIterator.prototype={s:null,n:null,next:function(){return AsyncFromSyncIteratorContinuation(this.n.apply(this.s,arguments))},return:function(e){var l=this.s.return;return void 0===l?Promise.resolve({value:e,done:!0}):AsyncFromSyncIteratorContinuation(l.apply(this.s,arguments))},throw:function(e){var l=this.s.return;return void 0===l?Promise.reject(e):AsyncFromSyncIteratorContinuation(l.apply(this.s,arguments))}},new AsyncFromSyncIterator(e)}AsyncGenerator.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},AsyncGenerator.prototype.next=function(e){return this._invoke("next",e)},AsyncGenerator.prototype.throw=function(e){return this._invoke("throw",e)},AsyncGenerator.prototype.return=function(e){return this._invoke("return",e)},System.register([],function(O,D){"use strict";return{execute:function(){O({I:function(e){return"x"===e||"y"===e?Cc[e]?null:(Cc[e]=!0,function(){Cc[e]=!1}):Cc.x||Cc.y?null:(Cc.x=Cc.y=!0,function(){Cc.x=Cc.y=!1})},O:addUniqueItem,P:removeItem,R:isSVGElement,T:function(e){return isSVGElement(e)&&"svg"===e.tagName},V:function(e,l){var _=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},S=_slicedToArray(setupGesture(e,_),3),E=S[0],k=S[1],T=S[2],onPointerEnter=function(e){if(isValidHover(e)){var _=e.target,S=l(_,e);if("function"==typeof S&&_){var _onPointerLeave=function(e){isValidHover(e)&&(S(e),_.removeEventListener("pointerleave",_onPointerLeave))};_.addEventListener("pointerleave",_onPointerLeave,k)}}};return E.forEach(function(e){e.addEventListener("pointerenter",onPointerEnter,k)}),T},W:function(e,l){var _=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},S=_slicedToArray(setupGesture(e,_),3),E=S[0],k=S[1],T=S[2],startPress=function(e){var S=e.currentTarget;if(isValidPressEvent(e)){Rc.add(S);var E=l(S,e),onPointerEnd=function(e,l){window.removeEventListener("pointerup",onPointerUp),window.removeEventListener("pointercancel",onPointerCancel),Rc.has(S)&&Rc.delete(S),isValidPressEvent(e)&&"function"==typeof E&&E(e,{success:l})},onPointerUp=function(e){onPointerEnd(e,S===window||S===document||_.useGlobalTarget||_isNodeOrChild(S,e.target))},onPointerCancel=function(e){onPointerEnd(e,!1)};window.addEventListener("pointerup",onPointerUp,k),window.addEventListener("pointercancel",onPointerCancel,k)}};return E.forEach(function(e){var l;(_.useGlobalTarget?window:e).addEventListener("pointerdown",startPress,k),isHTMLElement(e)&&(e.addEventListener("focus",function(e){return enableKeyboardPress(e,k)}),l=e,Mc.has(l.tagName)||-1!==l.tabIndex||e.hasAttribute("tabindex")||(e.tabIndex=0))}),T},X:velocityPerSecond,Y:interpolate,Z:defaultOffset,_:function(e,l){return"function"==typeof e?function(e){Uc.add(e),Lc||(Lc=function(){var e={get width(){return window.innerWidth},get height(){return window.innerHeight}};Uc.forEach(function(l){return l(e)})},window.addEventListener("resize",Lc));return function(){Uc.delete(e),Uc.size||"function"!=typeof Lc||(window.removeEventListener("resize",Lc),Lc=void 0)}}(e):function(e,l){Ic||function(){if("undefined"==typeof ResizeObserver)return;Ic=new ResizeObserver(notifyAll)}();var _=resolveElements(e);return _.forEach(function(e){var _,S=Pc.get(e);S||(S=new Set,Pc.set(e,S)),S.add(l),null===(_=Ic)||void 0===_||_.observe(e)}),function(){_.forEach(function(e){var _,S=Pc.get(e);(null==S||S.delete(l),null!=S&&S.size)||(null===(_=Ic)||void 0===_||_.unobserve(e))})}}(e,l)},a0:function(e,l){var _,onFrame=function(){var S=l.currentTime,E=(null===S?0:S.value)/100;_!==E&&e(E),_=E};return qu.preUpdate(onFrame,!0),function(){return Xu(onFrame)}},a3:function(){var e=!Array.isArray(arguments.length<=0?void 0:arguments[0]),l=e?0:-1,_=0+l<0||arguments.length<=0+l?void 0:arguments[0+l],S=1+l<0||arguments.length<=1+l?void 0:arguments[1+l],E=2+l<0||arguments.length<=2+l?void 0:arguments[2+l],k=3+l<0||arguments.length<=3+l?void 0:arguments[3+l],T=interpolate(S,E,k);return e?T(_):T},a4:function(e,l,_){var S,E=e.get(),k=null,T=E,M="string"==typeof E?E.replace(/[\d.-]/g,""):void 0,stopAnimation=function(){k&&(k.stop(),k=null)},startAnimation=function(){stopAnimation(),k=new Hl(_objectSpread2(_objectSpread2({keyframes:[asNumber(e.get()),asNumber(T)],velocity:e.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01},_),{},{onUpdate:S}))};if(e.attach(function(l,_){return T=l,S=function(e){return _(parseValue(e,M))},qu.postRender(startAnimation),e.get()},stopAnimation),Fc(l)){var R=l.on("change",function(l){return e.set(parseValue(l,M))}),I=e.on("destroy",R);return function(){R(),I()}}return stopAnimation},a5:getDefaultExportFromCjs,a6:applySdkMetadata,a7:function(e,l){getIsolationScope().setContext(e,l)},a8:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=!e.skipBrowserExtensionCheck&&function(){if(function(){var e;if(void 0===Ue.window)return!1;var l=Ue;if(l.nw)return!1;var _=l.chrome||l.browser;if(null==_||null===(e=_.runtime)||void 0===e||!e.id)return!1;var S=getLocationHref(),E=["chrome-extension","moz-extension","ms-browser-extension","safari-web-extension"];return!(Ue===Ue.top&&E.some(function(e){return S.startsWith("".concat(e,"://"))}))}())return nt&&consoleSandbox(function(){}),!0;return!1}(),_=_objectSpread2(_objectSpread2({},e),{},{enabled:!l&&e.enabled,stackParser:stackParserFromStackParserOptions(e.stackParser||tt),integrations:getIntegrationsToSetup({integrations:e.integrations,defaultIntegrations:null==e.defaultIntegrations?[inboundFiltersIntegration(),functionToStringIntegration(),browserApiErrorsIntegration(),breadcrumbsIntegration(),globalHandlersIntegration(),linkedErrorsIntegration(),dedupeIntegration(),httpContextIntegration(),browserSessionIntegration()]:e.defaultIntegrations}),transport:e.transport||makeFetchTransport});return function(e,l){!0===l.debug&&(G?X.enable():consoleSandbox(function(){}));getCurrentScope().update(l.initialScope);var _=new e(l);return function(e){getCurrentScope().setClient(e)}(_),_.init(),_}(Be,_)},a9:isError,aA:function(e,l){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=l[0],e[13]=l[1],e[14]=l[2],e[15]=1,e},aB:function(e,l){return e[0]=-l[0],e[1]=-l[1],e[2]=-l[2],e},aC:function(e,l,_,S){var E=l[0],k=l[1],T=l[2],M=S[0],R=S[1],I=S[2],O=E-_[0],D=k-_[1],L=T-_[2],U=O*O+D*D+L*L;U>0&&(O*=U=1/Math.sqrt(U),D*=U,L*=U);var B=R*L-I*D,z=I*O-M*L,j=M*D-R*O;U=B*B+z*z+j*j,U>0&&(B*=U=1/Math.sqrt(U),z*=U,j*=U);return e[0]=B,e[1]=z,e[2]=j,e[3]=0,e[4]=D*j-L*z,e[5]=L*B-O*j,e[6]=O*z-D*B,e[7]=0,e[8]=O,e[9]=D,e[10]=L,e[11]=0,e[12]=E,e[13]=k,e[14]=T,e[15]=1,e},aD:function(e,l){return e[0]=l[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=l[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=l[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},aE:function(e,l){return e[0]=l[0],e[1]=l[1],e[2]=l[2],e[3]=l[3],e[4]=l[4],e[5]=l[5],e[6]=l[6],e[7]=l[7],e[8]=l[8],e[9]=l[9],e[10]=l[10],e[11]=l[11],e[12]=l[12],e[13]=l[13],e[14]=l[14],e[15]=l[15],e},aF:function(e,l){var _=l[0],S=l[1],E=l[2],k=l[3],T=l[4],M=l[5],R=l[6],I=l[7],O=l[8],D=l[9],L=l[10],U=l[11],B=l[12],z=l[13],j=l[14],G=l[15],H=_*M-S*T,V=_*R-E*T,W=_*I-k*T,q=S*R-E*M,X=S*I-k*M,K=E*I-k*R,Y=O*z-D*B,J=O*j-L*B,Q=O*G-U*B,Z=D*j-L*z,$=D*G-U*z,ee=L*G-U*j,te=H*ee-V*$+W*Z+q*Q-X*J+K*Y;if(!te)return null;return te=1/te,e[0]=(M*ee-R*$+I*Z)*te,e[1]=(E*$-S*ee-k*Z)*te,e[2]=(z*K-j*X+G*q)*te,e[3]=(L*X-D*K-U*q)*te,e[4]=(R*Q-T*ee-I*J)*te,e[5]=(_*ee-E*Q+k*J)*te,e[6]=(j*W-B*K-G*V)*te,e[7]=(O*K-L*W+U*V)*te,e[8]=(T*$-M*Q+I*Y)*te,e[9]=(S*Q-_*$-k*Y)*te,e[10]=(B*X-z*W+G*H)*te,e[11]=(D*W-O*X-U*H)*te,e[12]=(M*J-T*Z-R*Y)*te,e[13]=(_*Z-S*J+E*Y)*te,e[14]=(z*V-B*q-j*H)*te,e[15]=(O*q-D*V+L*H)*te,e},aH:normalize$6,aI:function(e,l){return e[0]=-l[0],e[1]=-l[1],e[2]=-l[2],e[3]=l[3],e},aJ:create$1,aK:dot$3,aL:function(e,l){return e[0]=l[0],e[1]=l[1],e},aN:function(e,l,_){return e[0]=l[0]*_,e[1]=l[1]*_,e},aP:function(e,l,_){return e[0]=l[0]+_[0],e[1]=l[1]+_[1],e},aQ:slerp$1,aR:function(e,l){var _=l[0]-e[0],S=l[1]-e[1],E=l[2]-e[2];return _*_+S*S+E*E},aS:function(e,l,_){var S=l[0],E=l[1],k=l[2],T=l[3],M=_[0],R=_[1],I=_[2],O=_[3];return e[0]=S*O+T*M+E*I-k*R,e[1]=E*O+T*R+k*M-S*I,e[2]=k*O+T*I+S*R-E*M,e[3]=T*O-S*M-E*R-k*I,e},aU:cross$1,aV:setAxisAngle$1,aW:function(e,l,_){return e[0]=l[0]*_,e[1]=l[1]*_,e[2]=l[2]*_,e},aa:withScope,ab:captureException,ac:getClient,ad:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=Ue.document,_=(null==l?void 0:l.head)||(null==l?void 0:l.body);if(!_)return void(nt&&X.error("[showReportDialog] Global document not defined"));var S=getCurrentScope(),E=getClient(),k=null==E?void 0:E.getDsn();if(!k)return void(nt&&X.error("[showReportDialog] DSN not configured"));var T=_objectSpread2(_objectSpread2({},e),{},{user:_objectSpread2(_objectSpread2({},S.getUser()),e.user),eventId:e.eventId||getIsolationScope().lastEventId()}),M=Ue.document.createElement("script");M.async=!0,M.crossOrigin="anonymous",M.src=function(e,l){var _=makeDsn(e);if(!_)return"";var S="".concat(getBaseApiEndpoint(_),"embed/error-page/"),E="dsn=".concat(dsnToString(_));for(var k in l)if("dsn"!==k&&"onClose"!==k)if("user"===k){var T=l.user;if(!T)continue;T.name&&(E+="&name=".concat(encodeURIComponent(T.name))),T.email&&(E+="&email=".concat(encodeURIComponent(T.email)))}else E+="&".concat(encodeURIComponent(k),"=").concat(encodeURIComponent(l[k]));return"".concat(S,"?").concat(E)}(k,T);var R=T.onLoad,I=T.onClose;R&&(M.onload=R);if(I){var _reportDialogClosedMessageHandler=function(e){if("__sentry_reportdialog_closed__"===e.data)try{I()}finally{Ue.removeEventListener("message",_reportDialogClosedMessageHandler)}};Ue.addEventListener("message",_reportDialogClosedMessageHandler)}_.appendChild(M)},ag:requireSrc$3,ah:requireSrc$2,ai:function(){return U||(U=1,B.exports=requireScheduler_production()),B.exports},ap:function(e,l,_){if(wu.randomUUID&&!e)return wu.randomUUID();return function(e){var l,_,S,E;e=e||{};var k=null!==(l=null!==(_=e.random)&&void 0!==_?_:null===(S=(E=e).rng)||void 0===S?void 0:S.call(E))&&void 0!==l?l:function(){if(!yu){if("undefined"==typeof crypto||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");yu=crypto.getRandomValues.bind(crypto)}return yu(Su)}();if(k.length<16)throw new Error("Random bytes length must be >= 16");return k[6]=15&k[6]|64,k[8]=63&k[8]|128,function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(_u[e[l+0]]+_u[e[l+1]]+_u[e[l+2]]+_u[e[l+3]]+"-"+_u[e[l+4]]+_u[e[l+5]]+"-"+_u[e[l+6]]+_u[e[l+7]]+"-"+_u[e[l+8]]+_u[e[l+9]]+"-"+_u[e[l+10]]+_u[e[l+11]]+_u[e[l+12]]+_u[e[l+13]]+_u[e[l+14]]+_u[e[l+15]]).toLowerCase()}(k)}(e)},ar:function(){var e=new zc(16);zc!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0);return e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},as:fromValues$1,at:function(e,l,_){return e[0]=l,e[1]=_,e},au:create,av:function(e,l){var _=new zc(2);return _[0]=e,_[1]=l,_},aw:function(e){var l=new zc(2);return l[0]=e[0],l[1]=e[1],l},ax:function(e,l,_){var S=_[0],E=_[1],k=_[2],T=_[3],M=l[0],R=l[1],I=l[2],O=E*I-k*R,D=k*M-S*I,L=S*R-E*M;return O+=O,D+=D,L+=L,e[0]=M+T*O+E*L-k*D,e[1]=R+T*D+k*O-S*L,e[2]=I+T*L+S*D-E*O,e},ay:create$3,az:function(e,l,_){var S=l[0],E=l[1],k=l[2],T=l[3],M=l[4],R=l[5],I=l[6],O=l[7],D=l[8],L=l[9],U=l[10],B=l[11],z=l[12],j=l[13],G=l[14],H=l[15],V=_[0],W=_[1],q=_[2],X=_[3];return e[0]=V*S+W*M+q*D+X*z,e[1]=V*E+W*R+q*L+X*j,e[2]=V*k+W*I+q*U+X*G,e[3]=V*T+W*O+q*B+X*H,V=_[4],W=_[5],q=_[6],X=_[7],e[4]=V*S+W*M+q*D+X*z,e[5]=V*E+W*R+q*L+X*j,e[6]=V*k+W*I+q*U+X*G,e[7]=V*T+W*O+q*B+X*H,V=_[8],W=_[9],q=_[10],X=_[11],e[8]=V*S+W*M+q*D+X*z,e[9]=V*E+W*R+q*L+X*j,e[10]=V*k+W*I+q*U+X*G,e[11]=V*T+W*O+q*B+X*H,V=_[12],W=_[13],q=_[14],X=_[15],e[12]=V*S+W*M+q*D+X*z,e[13]=V*E+W*R+q*L+X*j,e[14]=V*k+W*I+q*U+X*G,e[15]=V*T+W*O+q*B+X*H,e},b4:clsx,d:function(e,l){return new kc(e,l)},i:isHTMLElement,q:getAnimatableNone,s:defaultTransformValue,w:function(e,l){var _,S;return null!==(_=null!==(S=null==e?void 0:e[l])&&void 0!==S?S:null==e?void 0:e.default)&&void 0!==_?_:e},y:makeAnimationInstant});var D="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function getAugmentedNamespace(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var l=e.default;if("function"==typeof l){var _=function a(){var e=!1;try{e=this instanceof a}catch(_){}return e?Reflect.construct(l,arguments,this.constructor):l.apply(this,arguments)};_.prototype=l.prototype}else _={};return Object.defineProperty(_,"__esModule",{value:!0}),Object.keys(e).forEach(function(l){var S=Object.getOwnPropertyDescriptor(e,l);Object.defineProperty(_,l,S.get?S:{enumerable:!0,get:function(){return e[l]}})}),_}var L,U,B={exports:{}},z={};function requireScheduler_production(){return L||(L=1,function(e){function push(e,l){var _=e.length;e.push(l);e:for(;0<_;){var S=_-1>>>1,E=e[S];if(!(0<compare(E,l)))break e;e[S]=l,e[_]=E,_=S}}function peek(e){return 0===e.length?null:e[0]}function pop(e){if(0===e.length)return null;var l=e[0],_=e.pop();if(_!==l){e[0]=_;e:for(var S=0,E=e.length,k=E>>>1;S<k;){var T=2*(S+1)-1,M=e[T],R=T+1,I=e[R];if(0>compare(M,_))R<E&&0>compare(I,M)?(e[S]=I,e[R]=_,S=R):(e[S]=M,e[T]=_,S=T);else{if(!(R<E&&0>compare(I,_)))break e;e[S]=I,e[R]=_,S=R}}}return l}function compare(e,l){var _=e.sortIndex-l.sortIndex;return 0!==_?_:e.id-l.id}if(e.unstable_now=void 0,"object"===("undefined"==typeof performance?"undefined":_typeof3(performance))&&"function"==typeof performance.now){var l=performance;e.unstable_now=function(){return l.now()}}else{var _=Date,S=_.now();e.unstable_now=function(){return _.now()-S}}var E=[],k=[],T=1,M=null,R=3,I=!1,O=!1,D=!1,L=!1,U="function"==typeof setTimeout?setTimeout:null,B="function"==typeof clearTimeout?clearTimeout:null,z="undefined"!=typeof setImmediate?setImmediate:null;function advanceTimers(e){for(var l=peek(k);null!==l;){if(null===l.callback)pop(k);else{if(!(l.startTime<=e))break;pop(k),l.sortIndex=l.expirationTime,push(E,l)}l=peek(k)}}function handleTimeout(e){if(D=!1,advanceTimers(e),!O)if(null!==peek(E))O=!0,G||(G=!0,j());else{var l=peek(k);null!==l&&requestHostTimeout(handleTimeout,l.startTime-e)}}var j,G=!1,H=-1,V=5,W=-1;function shouldYieldToHost(){return!!L||!(e.unstable_now()-W<V)}function performWorkUntilDeadline(){if(L=!1,G){var l=e.unstable_now();W=l;var _=!0;try{e:{O=!1,D&&(D=!1,B(H),H=-1),I=!0;var S=R;try{t:{for(advanceTimers(l),M=peek(E);null!==M&&!(M.expirationTime>l&&shouldYieldToHost());){var T=M.callback;if("function"==typeof T){M.callback=null,R=M.priorityLevel;var U=T(M.expirationTime<=l);if(l=e.unstable_now(),"function"==typeof U){M.callback=U,advanceTimers(l),_=!0;break t}M===peek(E)&&pop(E),advanceTimers(l)}else pop(E);M=peek(E)}if(null!==M)_=!0;else{var z=peek(k);null!==z&&requestHostTimeout(handleTimeout,z.startTime-l),_=!1}}break e}finally{M=null,R=S,I=!1}_=void 0}}finally{_?j():G=!1}}}if("function"==typeof z)j=function(){z(performWorkUntilDeadline)};else if("undefined"!=typeof MessageChannel){var q=new MessageChannel,X=q.port2;q.port1.onmessage=performWorkUntilDeadline,j=function(){X.postMessage(null)}}else j=function(){U(performWorkUntilDeadline,0)};function requestHostTimeout(l,_){H=U(function(){l(e.unstable_now())},_)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_forceFrameRate=function(e){0>e||125<e||(V=0<e?Math.floor(1e3/e):5)},e.unstable_getCurrentPriorityLevel=function(){return R},e.unstable_next=function(e){switch(R){case 1:case 2:case 3:var l=3;break;default:l=R}var _=R;R=l;try{return e()}finally{R=_}},e.unstable_requestPaint=function(){L=!0},e.unstable_runWithPriority=function(e,l){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var _=R;R=e;try{return l()}finally{R=_}},e.unstable_scheduleCallback=function(l,_,S){var M=e.unstable_now();switch("object"===_typeof3(S)&&null!==S?S="number"==typeof(S=S.delay)&&0<S?M+S:M:S=M,l){case 1:var R=-1;break;case 2:R=250;break;case 5:R=1073741823;break;case 4:R=1e4;break;default:R=5e3}return l={id:T++,callback:_,priorityLevel:l,startTime:S,expirationTime:R=S+R,sortIndex:-1},S>M?(l.sortIndex=S,push(k,l),null===peek(E)&&l===peek(k)&&(D?(B(H),H=-1):D=!0,requestHostTimeout(handleTimeout,S-M))):(l.sortIndex=R,push(E,l),O||I||(O=!0,G||(G=!0,j()))),l},e.unstable_shouldYield=shouldYieldToHost,e.unstable_wrapCallback=function(e){var l=R;return function(){var _=R;R=l;try{return e.apply(this,arguments)}finally{R=_}}}}(z)),z}var j=O("aj",function(e,l,_){var S=Promise.resolve();function handlePreloadError(e){var l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=e,window.dispatchEvent(l),!l.defaultPrevented)throw e}return S.then(function(l){var _,S=_createForOfIteratorHelper2(l||[]);try{for(S.s();!(_=S.n()).done;){var E=_.value;"rejected"===E.status&&handlePreloadError(E.reason)}}catch(k){S.e(k)}finally{S.f()}return e().catch(handlePreloadError)})}),G="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,H=globalThis,V="10.18.0";function getMainCarrier(){return getSentryCarrier(H),H}function getSentryCarrier(e){var l=e.__SENTRY__=e.__SENTRY__||{};return l.version=l.version||V,l[V]=l[V]||{}}function getGlobalSingleton(e,l){var _=arguments.length>2&&void 0!==arguments[2]?arguments[2]:H,S=_.__SENTRY__=_.__SENTRY__||{},E=S[V]=S[V]||{};return E[e]||(E[e]=l())}var W=["debug","info","warn","error","log","assert","trace"],q={};function consoleSandbox(e){if(!("console"in H))return e();var l=H.console,_={},S=Object.keys(q);S.forEach(function(e){var S=q[e];_[e]=l[e],l[e]=S});try{return e()}finally{S.forEach(function(e){l[e]=_[e]})}}function isEnabled(){return _getLoggerSettings().enabled}function _maybeLog(e){for(var l=arguments.length,_=new Array(l>1?l-1:0),S=1;S<l;S++)_[S-1]=arguments[S];G&&isEnabled()&&consoleSandbox(function(){var l;(l=H.console)[e].apply(l,["".concat("Sentry Logger ","[").concat(e,"]:")].concat(_))})}function _getLoggerSettings(){return G?getGlobalSingleton("loggerSettings",function(){return{enabled:!1}}):{enabled:!1}}var X=O("ae",{enable:function(){_getLoggerSettings().enabled=!0},disable:function(){_getLoggerSettings().enabled=!1},isEnabled:isEnabled,log:function(){for(var e=arguments.length,l=new Array(e),_=0;_<e;_++)l[_]=arguments[_];_maybeLog.apply(void 0,["log"].concat(l))},warn:function(){for(var e=arguments.length,l=new Array(e),_=0;_<e;_++)l[_]=arguments[_];_maybeLog.apply(void 0,["warn"].concat(l))},error:function(){for(var e=arguments.length,l=new Array(e),_=0;_<e;_++)l[_]=arguments[_];_maybeLog.apply(void 0,["error"].concat(l))}}),K=50,Y="?",J=/\(error: (.*)\)/,Q=/captureMessage|captureException/;function createStackParser(){for(var e=arguments.length,l=new Array(e),_=0;_<e;_++)l[_]=arguments[_];var S=l.sort(function(e,l){return e[0]-l[0]}).map(function(e){return e[1]});return function(e){for(var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,_=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,E=[],k=e.split("\n"),T=l;T<k.length;T++){var M=k[T];M.length>1024&&(M=M.slice(0,1024));var R=J.test(M)?M.replace(J,"$1"):M;if(!R.match(/\S*Error: /)){var I,O=_createForOfIteratorHelper2(S);try{for(O.s();!(I=O.n()).done;){var D=(0,I.value)(R);if(D){E.push(D);break}}}catch(L){O.e(L)}finally{O.f()}if(E.length>=K+_)break}}return function(e){if(!e.length)return[];var l=Array.from(e);/sentryWrapped/.test(getLastStackFrame(l).function||"")&&l.pop();l.reverse(),Q.test(getLastStackFrame(l).function||"")&&(l.pop(),Q.test(getLastStackFrame(l).function||"")&&l.pop());return l.slice(0,K).map(function(e){return _objectSpread2(_objectSpread2({},e),{},{filename:e.filename||getLastStackFrame(l).filename,function:e.function||Y})})}(E.slice(_))}}function stackParserFromStackParserOptions(e){return Array.isArray(e)?createStackParser.apply(void 0,_toConsumableArray3(e)):e}function getLastStackFrame(e){return e[e.length-1]||{}}var Z="<anonymous>";function getFunctionName(e){try{return e&&"function"==typeof e&&e.name||Z}catch(l){return Z}}function getFramesFromEvent(e){var l=e.exception;if(l){var _=[];try{return l.values.forEach(function(e){e.stacktrace.frames&&_.push.apply(_,_toConsumableArray3(e.stacktrace.frames))}),_}catch(S){return}}}var $={},ee={};function addHandler(e,l){$[e]=$[e]||[],$[e].push(l)}function maybeInstrument(e,l){if(!ee[e]){ee[e]=!0;try{l()}catch(oo){G&&X.error("Error while instrumenting ".concat(e),oo)}}}function triggerHandlers(e,l){var _=e&&$[e];if(_){var S,E=_createForOfIteratorHelper2(_);try{for(E.s();!(S=E.n()).done;){var k=S.value;try{k(l)}catch(oo){G&&X.error("Error while triggering instrumentation handler.\nType: ".concat(e,"\nName: ").concat(getFunctionName(k),"\nError:"),oo)}}}catch(T){E.e(T)}finally{E.f()}}}var te=null;function instrumentError(){te=H.onerror,H.onerror=function(e,l,_,S,E){return triggerHandlers("error",{column:S,error:E,line:_,msg:e,url:l}),!!te&&te.apply(this,arguments)},H.onerror.__SENTRY_INSTRUMENTED__=!0}var ne=null;function instrumentUnhandledRejection(){ne=H.onunhandledrejection,H.onunhandledrejection=function(e){return triggerHandlers("unhandledrejection",e),!ne||ne.apply(this,arguments)},H.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}var re=Object.prototype.toString;function isError(e){switch(re.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object WebAssembly.Exception]":return!0;default:return isInstanceOf(e,Error)}}function isBuiltin(e,l){return re.call(e)==="[object ".concat(l,"]")}function isErrorEvent$1(e){return isBuiltin(e,"ErrorEvent")}function isDOMError(e){return isBuiltin(e,"DOMError")}function isString$1(e){return isBuiltin(e,"String")}function isParameterizedString(e){return"object"===_typeof3(e)&&null!==e&&"__sentry_template_string__"in e&&"__sentry_template_values__"in e}function isPrimitive(e){return null===e||isParameterizedString(e)||"object"!==_typeof3(e)&&"function"!=typeof e}function isPlainObject$2(e){return isBuiltin(e,"Object")}function isEvent(e){return"undefined"!=typeof Event&&isInstanceOf(e,Event)}function isThenable$1(e){return Boolean((null==e?void 0:e.then)&&"function"==typeof e.then)}function isInstanceOf(e,l){try{return e instanceof l}catch(_){return!1}}function isVueViewModel(e){return!("object"!==_typeof3(e)||null===e||!e.__isVue&&!e._isVue)}var ie=H,ae=80;function htmlTreeAsString(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)return"<unknown>";try{for(var _,S=e,E=[],k=0,T=0,M=Array.isArray(l)?l:l.keyAttrs,R=!Array.isArray(l)&&l.maxStringLength||ae;S&&k++<5&&!("html"===(_=_htmlElementAsString(S,M))||k>1&&T+3*E.length+_.length>=R);)E.push(_),T+=_.length,S=S.parentNode;return E.reverse().join(" > ")}catch(I){return"<unknown>"}}function _htmlElementAsString(e,l){var _=e,S=[];if(null==_||!_.tagName)return"";if(ie.HTMLElement&&_ instanceof HTMLElement&&_.dataset){if(_.dataset.sentryComponent)return _.dataset.sentryComponent;if(_.dataset.sentryElement)return _.dataset.sentryElement}S.push(_.tagName.toLowerCase());var E=null!=l&&l.length?l.filter(function(e){return _.getAttribute(e)}).map(function(e){return[e,_.getAttribute(e)]}):null;if(null!=E&&E.length)E.forEach(function(e){S.push("[".concat(e[0],'="').concat(e[1],'"]'))});else{_.id&&S.push("#".concat(_.id));var k=_.className;if(k&&isString$1(k)){var T,M=_createForOfIteratorHelper2(k.split(/\s+/));try{for(M.s();!(T=M.n()).done;){var R=T.value;S.push(".".concat(R))}}catch(U){M.e(U)}finally{M.f()}}}for(var I=0,O=["aria-label","type","name","title","alt"];I<O.length;I++){var D=O[I],L=_.getAttribute(D);L&&S.push("[".concat(D,'="').concat(L,'"]'))}return S.join("")}function getLocationHref(){try{return ie.document.location.href}catch(e){return""}}function truncate(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return"string"!=typeof e||0===l||e.length<=l?e:"".concat(e.slice(0,l),"...")}function safeJoin(e,l){if(!Array.isArray(e))return"";for(var _=[],S=0;S<e.length;S++){var E=e[S];try{isVueViewModel(E)?_.push("[VueViewModel]"):_.push(String(E))}catch(k){_.push("[value cannot be serialized]")}}return _.join(l)}function isMatchingPattern(e,l){var _=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return!!isString$1(e)&&(isBuiltin(l,"RegExp")?l.test(e):!!isString$1(l)&&(_?e===l:e.includes(l)))}function stringMatchesSomePattern(e){var l=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).some(function(_){return isMatchingPattern(e,_,l)})}function fill(e,l,_){if(l in e){var S=e[l];if("function"==typeof S){var E=_(S);"function"==typeof E&&markFunctionWrapped(E,S);try{e[l]=E}catch(k){G&&X.log('Failed to replace method "'.concat(l,'" in object'),e)}}}}function addNonEnumerableProperty(e,l,_){try{Object.defineProperty(e,l,{value:_,writable:!0,configurable:!0})}catch(S){G&&X.log('Failed to add non-enumerable property "'.concat(l,'" to object'),e)}}function markFunctionWrapped(e,l){try{var _=l.prototype||{};e.prototype=l.prototype=_,addNonEnumerableProperty(e,"__sentry_original__",l)}catch(S){}}function getOriginalFunction(e){return e.__sentry_original__}function convertToPlainObject(e){if(isError(e))return _objectSpread2({message:e.message,name:e.name,stack:e.stack},getOwnProperties(e));if(isEvent(e)){var l=_objectSpread2({type:e.type,target:serializeEventTarget(e.target),currentTarget:serializeEventTarget(e.currentTarget)},getOwnProperties(e));return"undefined"!=typeof CustomEvent&&isInstanceOf(e,CustomEvent)&&(l.detail=e.detail),l}return e}function serializeEventTarget(e){try{return l=e,"undefined"!=typeof Element&&isInstanceOf(l,Element)?htmlTreeAsString(e):Object.prototype.toString.call(e)}catch(_){return"<unknown>"}var l}function getOwnProperties(e){if("object"===_typeof3(e)&&null!==e){var l={};for(var _ in e)Object.prototype.hasOwnProperty.call(e,_)&&(l[_]=e[_]);return l}return{}}function uuid4(){var e,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(e=H).crypto||e.msCrypto,getRandomByte=function(){return 16*Math.random()};try{if(null!=l&&l.randomUUID)return l.randomUUID().replace(/-/g,"");null!=l&&l.getRandomValues&&(getRandomByte=function(){var e=new Uint8Array(1);return l.getRandomValues(e),e[0]})}catch(_){}return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,function(e){return(e^(15&getRandomByte())>>e/4).toString(16)})}function getFirstException(e){var l;return null===(l=e.exception)||void 0===l||null===(l=l.values)||void 0===l?void 0:l[0]}function getEventDescription(e){var l=e.message,_=e.event_id;if(l)return l;var S=getFirstException(e);return S?S.type&&S.value?"".concat(S.type,": ").concat(S.value):S.type||S.value||_||"<unknown>":_||"<unknown>"}function addExceptionTypeValue(e,l,_){var S=e.exception=e.exception||{},E=S.values=S.values||[],k=E[0]=E[0]||{};k.value||(k.value=l||""),k.type||(k.type="Error")}function addExceptionMechanism(e,l){var _=getFirstException(e);if(_){var S=_.mechanism;if(_.mechanism=_objectSpread2(_objectSpread2(_objectSpread2({},{type:"generic",handled:!0}),S),l),l&&"data"in l){var E=_objectSpread2(_objectSpread2({},null==S?void 0:S.data),l.data);_.mechanism.data=E}}}function checkOrSetAlreadyCaught(e){if(function(e){try{return e.__sentry_captured__}catch(l){}}(e))return!0;try{addNonEnumerableProperty(e,"__sentry_captured__",!0)}catch(l){}return!1}var oe;function dateTimestampInSeconds(){return Date.now()/1e3}function timestampInSeconds(){return(null!=oe?oe:oe=function(){var e=H.performance;if(null==e||!e.now||!e.timeOrigin)return dateTimestampInSeconds;var l=e.timeOrigin;return function(){return(l+e.now())/1e3}}())()}function makeSession(e){var l=timestampInSeconds(),_={sid:uuid4(),init:!0,timestamp:l,started:l,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:function(){return function(e){return{sid:"".concat(e.sid),init:e.init,started:new Date(1e3*e.started).toISOString(),timestamp:new Date(1e3*e.timestamp).toISOString(),status:e.status,errors:e.errors,did:"number"==typeof e.did||"string"==typeof e.did?"".concat(e.did):void 0,duration:e.duration,abnormal_mechanism:e.abnormal_mechanism,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}}}(_)}};return e&&updateSession(_,e),_}function updateSession(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(l.user&&(!e.ipAddress&&l.user.ip_address&&(e.ipAddress=l.user.ip_address),e.did||l.did||(e.did=l.user.id||l.user.email||l.user.username)),e.timestamp=l.timestamp||timestampInSeconds(),l.abnormal_mechanism&&(e.abnormal_mechanism=l.abnormal_mechanism),l.ignoreDuration&&(e.ignoreDuration=l.ignoreDuration),l.sid&&(e.sid=32===l.sid.length?l.sid:uuid4()),void 0!==l.init&&(e.init=l.init),!e.did&&l.did&&(e.did="".concat(l.did)),"number"==typeof l.started&&(e.started=l.started),e.ignoreDuration)e.duration=void 0;else if("number"==typeof l.duration)e.duration=l.duration;else{var _=e.timestamp-e.started;e.duration=_>=0?_:0}l.release&&(e.release=l.release),l.environment&&(e.environment=l.environment),!e.ipAddress&&l.ipAddress&&(e.ipAddress=l.ipAddress),!e.userAgent&&l.userAgent&&(e.userAgent=l.userAgent),"number"==typeof l.errors&&(e.errors=l.errors),l.status&&(e.status=l.status)}function merge$1(e,l){var _=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;if(!l||"object"!==_typeof3(l)||_<=0)return l;if(e&&0===Object.keys(l).length)return e;var S=_objectSpread2({},e);for(var E in l)Object.prototype.hasOwnProperty.call(l,E)&&(S[E]=merge$1(S[E],l[E],_-1));return S}function generateTraceId(){return uuid4()}function generateSpanId(){return uuid4().substring(16)}var se="_sentrySpan";function _setSpanForScope(e,l){l?addNonEnumerableProperty(e,se,l):delete e[se]}function _getSpanForScope(e){return e[se]}var ue=function(){function Scope(){_classCallCheck3(this,Scope),this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:generateTraceId(),sampleRand:Math.random()}}return _createClass3(Scope,[{key:"clone",value:function(){var e=new Scope;return e._breadcrumbs=_toConsumableArray3(this._breadcrumbs),e._tags=_objectSpread2({},this._tags),e._extra=_objectSpread2({},this._extra),e._contexts=_objectSpread2({},this._contexts),this._contexts.flags&&(e._contexts.flags={values:_toConsumableArray3(this._contexts.flags.values)}),e._user=this._user,e._level=this._level,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=_toConsumableArray3(this._eventProcessors),e._attachments=_toConsumableArray3(this._attachments),e._sdkProcessingMetadata=_objectSpread2({},this._sdkProcessingMetadata),e._propagationContext=_objectSpread2({},this._propagationContext),e._client=this._client,e._lastEventId=this._lastEventId,_setSpanForScope(e,_getSpanForScope(this)),e}},{key:"setClient",value:function(e){this._client=e}},{key:"setLastEventId",value:function(e){this._lastEventId=e}},{key:"getClient",value:function(){return this._client}},{key:"lastEventId",value:function(){return this._lastEventId}},{key:"addScopeListener",value:function(e){this._scopeListeners.push(e)}},{key:"addEventProcessor",value:function(e){return this._eventProcessors.push(e),this}},{key:"setUser",value:function(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&updateSession(this._session,{user:e}),this._notifyScopeListeners(),this}},{key:"getUser",value:function(){return this._user}},{key:"setTags",value:function(e){return this._tags=_objectSpread2(_objectSpread2({},this._tags),e),this._notifyScopeListeners(),this}},{key:"setTag",value:function(e,l){return this._tags=_objectSpread2(_objectSpread2({},this._tags),{},_defineProperty3({},e,l)),this._notifyScopeListeners(),this}},{key:"setExtras",value:function(e){return this._extra=_objectSpread2(_objectSpread2({},this._extra),e),this._notifyScopeListeners(),this}},{key:"setExtra",value:function(e,l){return this._extra=_objectSpread2(_objectSpread2({},this._extra),{},_defineProperty3({},e,l)),this._notifyScopeListeners(),this}},{key:"setFingerprint",value:function(e){return this._fingerprint=e,this._notifyScopeListeners(),this}},{key:"setLevel",value:function(e){return this._level=e,this._notifyScopeListeners(),this}},{key:"setTransactionName",value:function(e){return this._transactionName=e,this._notifyScopeListeners(),this}},{key:"setContext",value:function(e,l){return null===l?delete this._contexts[e]:this._contexts[e]=l,this._notifyScopeListeners(),this}},{key:"setSession",value:function(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}},{key:"getSession",value:function(){return this._session}},{key:"update",value:function(e){if(!e)return this;var l="function"==typeof e?e(this):e,_=(l instanceof Scope?l.getScopeData():isPlainObject$2(l)?e:void 0)||{},S=_.tags,E=_.extra,k=_.user,T=_.contexts,M=_.level,R=_.fingerprint,I=void 0===R?[]:R,O=_.propagationContext;return this._tags=_objectSpread2(_objectSpread2({},this._tags),S),this._extra=_objectSpread2(_objectSpread2({},this._extra),E),this._contexts=_objectSpread2(_objectSpread2({},this._contexts),T),k&&Object.keys(k).length&&(this._user=k),M&&(this._level=M),I.length&&(this._fingerprint=I),O&&(this._propagationContext=O),this}},{key:"clear",value:function(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._session=void 0,_setSpanForScope(this,void 0),this._attachments=[],this.setPropagationContext({traceId:generateTraceId(),sampleRand:Math.random()}),this._notifyScopeListeners(),this}},{key:"addBreadcrumb",value:function(e,l){var _="number"==typeof l?l:100;if(_<=0)return this;var S,E=_objectSpread2(_objectSpread2({timestamp:dateTimestampInSeconds()},e),{},{message:e.message?truncate(e.message,2048):e.message});(this._breadcrumbs.push(E),this._breadcrumbs.length>_)&&(this._breadcrumbs=this._breadcrumbs.slice(-_),null===(S=this._client)||void 0===S||S.recordDroppedEvent("buffer_overflow","log_item"));return this._notifyScopeListeners(),this}},{key:"getLastBreadcrumb",value:function(){return this._breadcrumbs[this._breadcrumbs.length-1]}},{key:"clearBreadcrumbs",value:function(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}},{key:"addAttachment",value:function(e){return this._attachments.push(e),this}},{key:"clearAttachments",value:function(){return this._attachments=[],this}},{key:"getScopeData",value:function(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:_getSpanForScope(this)}}},{key:"setSDKProcessingMetadata",value:function(e){return this._sdkProcessingMetadata=merge$1(this._sdkProcessingMetadata,e,2),this}},{key:"setPropagationContext",value:function(e){return this._propagationContext=e,this}},{key:"getPropagationContext",value:function(){return this._propagationContext}},{key:"captureException",value:function(e,l){var _=(null==l?void 0:l.event_id)||uuid4();if(!this._client)return G&&X.warn("No client configured on scope - will not capture exception!"),_;var S=new Error("Sentry syntheticException");return this._client.captureException(e,_objectSpread2(_objectSpread2({originalException:e,syntheticException:S},l),{},{event_id:_}),this),_}},{key:"captureMessage",value:function(e,l,_){var S=(null==_?void 0:_.event_id)||uuid4();if(!this._client)return G&&X.warn("No client configured on scope - will not capture message!"),S;var E=new Error(e);return this._client.captureMessage(e,l,_objectSpread2(_objectSpread2({originalException:e,syntheticException:E},_),{},{event_id:S}),this),S}},{key:"captureEvent",value:function(e,l){var _=(null==l?void 0:l.event_id)||uuid4();return this._client?(this._client.captureEvent(e,_objectSpread2(_objectSpread2({},l),{},{event_id:_}),this),_):(G&&X.warn("No client configured on scope - will not capture event!"),_)}},{key:"_notifyScopeListeners",value:function(){var e=this;this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(function(l){l(e)}),this._notifyingListeners=!1)}}])}();var le=function(){return _createClass3(function AsyncContextStack(e,l){var _,S;_classCallCheck3(this,AsyncContextStack),_=e||new ue,S=l||new ue,this._stack=[{scope:_}],this._isolationScope=S},[{key:"withScope",value:function(e){var l,_=this,S=this._pushScope();try{l=e(S)}catch(oo){throw this._popScope(),oo}return isThenable$1(l)?l.then(function(e){return _._popScope(),e},function(e){throw _._popScope(),e}):(this._popScope(),l)}},{key:"getClient",value:function(){return this.getStackTop().client}},{key:"getScope",value:function(){return this.getStackTop().scope}},{key:"getIsolationScope",value:function(){return this._isolationScope}},{key:"getStackTop",value:function(){return this._stack[this._stack.length-1]}},{key:"_pushScope",value:function(){var e=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:e}),e}},{key:"_popScope",value:function(){return!(this._stack.length<=1)&&!!this._stack.pop()}}])}();function getAsyncContextStack(){var e=getSentryCarrier(getMainCarrier());return e.stack=e.stack||new le(getGlobalSingleton("defaultCurrentScope",function(){return new ue}),getGlobalSingleton("defaultIsolationScope",function(){return new ue}))}function withScope$1(e){return getAsyncContextStack().withScope(e)}function withSetScope(e,l){var _=getAsyncContextStack();return _.withScope(function(){return _.getStackTop().scope=e,l(e)})}function withIsolationScope(e){return getAsyncContextStack().withScope(function(){return e(getAsyncContextStack().getIsolationScope())})}function getAsyncContextStrategy(e){var l=getSentryCarrier(e);return l.acs?l.acs:{withIsolationScope:withIsolationScope,withScope:withScope$1,withSetScope:withSetScope,withSetIsolationScope:function(e,l){return withIsolationScope(l)},getCurrentScope:function(){return getAsyncContextStack().getScope()},getIsolationScope:function(){return getAsyncContextStack().getIsolationScope()}}}function getCurrentScope(){return getAsyncContextStrategy(getMainCarrier()).getCurrentScope()}function getIsolationScope(){return getAsyncContextStrategy(getMainCarrier()).getIsolationScope()}function withScope(){for(var e=getAsyncContextStrategy(getMainCarrier()),l=arguments.length,_=new Array(l),S=0;S<l;S++)_[S]=arguments[S];if(2===_.length){var E=_[0],k=_[1];return E?e.withSetScope(E,k):e.withScope(k)}return e.withScope(_[0])}function getClient(){return getCurrentScope().getClient()}var ce="sentry.profile_id",he="sentry.exclusive_time";function unwrapScopeFromWeakRef(e){if(e){if("object"===_typeof3(e)&&"deref"in e&&"function"==typeof e.deref)try{return e.deref()}catch(l){return}return e}}function getCapturedScopesOnSpan(e){var l=e;return{scope:l._sentryScope,isolationScope:unwrapScopeFromWeakRef(l._sentryIsolationScope)}}var de=/^sentry-/;function baggageHeaderToDynamicSamplingContext(e){var l=function(e){if(!e||!isString$1(e)&&!Array.isArray(e))return;if(Array.isArray(e))return e.reduce(function(e,l){var _=baggageHeaderToObject(l);return Object.entries(_).forEach(function(l){var _=_slicedToArray(l,2),S=_[0],E=_[1];e[S]=E}),e},{});return baggageHeaderToObject(e)}(e);if(l){var _=Object.entries(l).reduce(function(e,l){var _=_slicedToArray(l,2),S=_[0],E=_[1];S.match(de)&&(e[S.slice(7)]=E);return e},{});return Object.keys(_).length>0?_:void 0}}function baggageHeaderToObject(e){return e.split(",").map(function(e){var l=e.indexOf("=");return-1===l?[]:[e.slice(0,l),e.slice(l+1)].map(function(e){try{return decodeURIComponent(e.trim())}catch(l){return}})}).reduce(function(e,l){var _=_slicedToArray(l,2),S=_[0],E=_[1];return S&&E&&(e[S]=E),e},{})}var fe=/^o(\d+)\./,pe=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function dsnToString(e){var l=arguments.length>1&&void 0!==arguments[1]&&arguments[1],_=e.host,S=e.path,E=e.pass,k=e.port,T=e.projectId,M=e.protocol,R=e.publicKey;return"".concat(M,"://").concat(R).concat(l&&E?":".concat(E):"")+"@".concat(_).concat(k?":".concat(k):"","/").concat(S?"".concat(S,"/"):S).concat(T)}function dsnFromComponents(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function extractOrgIdFromClient(e){var l,_=e.getOptions(),S=(e.getDsn()||{}).host;return _.orgId?l=String(_.orgId):S&&(l=function(e){var l=e.match(fe);return null==l?void 0:l[1]}(S)),l}function makeDsn(e){var l="string"==typeof e?function(e){var l=pe.exec(e);if(l){var _=_slicedToArray(l.slice(1),6),S=_[0],E=_[1],k=_[2],T=void 0===k?"":k,M=_[3],R=void 0===M?"":M,I=_[4],O=void 0===I?"":I,D=_[5],L="",U=void 0===D?"":D,B=U.split("/");if(B.length>1&&(L=B.slice(0,-1).join("/"),U=B.pop()),U){var z=U.match(/^\d+/);z&&(U=z[0])}return dsnFromComponents({host:R,pass:T,path:L,projectId:U,port:O,protocol:S,publicKey:E})}consoleSandbox(function(){})}(e):dsnFromComponents(e);if(l&&function(e){if(!G)return!0;var l=e.port,_=e.projectId,S=e.protocol;return!(["protocol","publicKey","host","projectId"].find(function(l){return!e[l]&&(X.error("Invalid Sentry Dsn: ".concat(l," missing")),!0)})||(_.match(/^\d+$/)?function(e){return"http"===e||"https"===e}(S)?l&&isNaN(parseInt(l,10))&&(X.error("Invalid Sentry Dsn: Invalid port ".concat(l)),1):(X.error("Invalid Sentry Dsn: Invalid protocol ".concat(S)),1):(X.error("Invalid Sentry Dsn: Invalid projectId ".concat(_)),1)))}(l))return l}var ve=!1;function spanToTraceContext(e){var l=e.spanContext(),_=l.spanId,S=l.traceId,E=l.isRemote,k=E?_:spanToJSON(e).parent_span_id,T=getCapturedScopesOnSpan(e).scope;return{parent_span_id:k,span_id:E?(null==T?void 0:T.getPropagationContext().propagationSpanId)||generateSpanId():_,trace_id:S}}function convertSpanLinksForEnvelope(l){return l&&l.length>0?l.map(function(l){var _=l.context,S=_.spanId,E=_.traceId,k=_.traceFlags,T=_objectWithoutProperties3(_,e);return _objectSpread2({span_id:S,trace_id:E,sampled:1===k,attributes:l.attributes},T)}):void 0}function spanTimeInputToSeconds(e){return"number"==typeof e?ensureTimestampInSeconds(e):Array.isArray(e)?e[0]+e[1]/1e9:e instanceof Date?ensureTimestampInSeconds(e.getTime()):timestampInSeconds()}function ensureTimestampInSeconds(e){return e>9999999999?e/1e3:e}function spanToJSON(e){if(function(e){return"function"==typeof e.getSpanJSON}(e))return e.getSpanJSON();var l=e.spanContext(),_=l.spanId,S=l.traceId;if(function(e){var l=e;return!!(l.attributes&&l.startTime&&l.name&&l.endTime&&l.status)}(e)){var E,k=e.attributes,T=e.startTime,M=e.name,R=e.endTime,I=e.status,O=e.links;return{span_id:_,trace_id:S,data:k,description:M,parent_span_id:"parentSpanId"in e?e.parentSpanId:"parentSpanContext"in e?null===(E=e.parentSpanContext)||void 0===E?void 0:E.spanId:void 0,start_timestamp:spanTimeInputToSeconds(T),timestamp:spanTimeInputToSeconds(R)||void 0,status:getStatusMessage(I),op:k["sentry.op"],origin:k["sentry.origin"],links:convertSpanLinksForEnvelope(O)}}return{span_id:_,trace_id:S,start_timestamp:0,data:{}}}function getStatusMessage(e){if(e&&0!==e.code)return 1===e.code?"ok":e.message||"unknown_error"}function getRootSpan(e){return e._sentryRootSpan||e}function showSpanDropWarning(){ve||(consoleSandbox(function(){}),ve=!0)}function logIgnoredSpan(e){X.log("Ignoring span ".concat(e.op," - ").concat(e.description," because it matches `ignoreSpans`."))}function shouldIgnoreSpan(e,l){if(null==l||!l.length||!e.description)return!1;var _,S=_createForOfIteratorHelper2(l);try{for(S.s();!(_=S.n()).done;){var E=_.value;if(isStringOrRegExp(E)){if(isMatchingPattern(e.description,E))return G&&logIgnoredSpan(e),!0}else if(E.name||E.op){var k=!E.name||isMatchingPattern(e.description,E.name),T=!E.op||e.op&&isMatchingPattern(e.op,E.op);if(k&&T)return G&&logIgnoredSpan(e),!0}}}catch(M){S.e(M)}finally{S.f()}return!1}function reparentChildSpans(e,l){var _=l.parent_span_id,S=l.span_id;if(_){var E,k=_createForOfIteratorHelper2(e);try{for(k.s();!(E=k.n()).done;){var T=E.value;T.parent_span_id===S&&(T.parent_span_id=_)}}catch(M){k.e(M)}finally{k.f()}}}function isStringOrRegExp(e){return"string"==typeof e||e instanceof RegExp}var ge="production";function getDynamicSamplingContextFromClient(e,l){var _=l.getOptions(),S=(l.getDsn()||{}).publicKey,E={environment:_.environment||ge,release:_.release,public_key:S,trace_id:e,org_id:extractOrgIdFromClient(l)};return l.emit("createDsc",E),E}function getDynamicSamplingContextFromSpan(e){var l,_,S=getClient();if(!S)return{};var E=getRootSpan(e),k=spanToJSON(E),T=k.data,M=E.spanContext().traceState,R=null!==(l=null!==(_=null==M?void 0:M.get("sentry.sample_rate"))&&void 0!==_?_:T["sentry.sample_rate"])&&void 0!==l?l:T["sentry.previous_trace_sample_rate"];function applyLocalSampleRateToDsc(e){return"number"!=typeof R&&"string"!=typeof R||(e.sample_rate="".concat(R)),e}var I=E._frozenDsc;if(I)return applyLocalSampleRateToDsc(I);var O=null==M?void 0:M.get("sentry.dsc"),D=O&&baggageHeaderToDynamicSamplingContext(O);if(D)return applyLocalSampleRateToDsc(D);var L,U,B=getDynamicSamplingContextFromClient(e.spanContext().traceId,S),z=T["sentry.source"],j=k.description;("url"!==z&&j&&(B.transaction=j),function(){var e;if("boolean"==typeof __SENTRY_TRACING__&&!__SENTRY_TRACING__)return!1;var l=null===(e=getClient())||void 0===e?void 0:e.getOptions();return!(!l||null==l.tracesSampleRate&&!l.tracesSampler)}())&&(B.sampled=String(function(e){return 1===e.spanContext().traceFlags}(E)),B.sample_rand=null!==(L=null==M?void 0:M.get("sentry.sample_rand"))&&void 0!==L?L:null===(U=getCapturedScopesOnSpan(E).scope)||void 0===U?void 0:U.getPropagationContext().sampleRand.toString());return applyLocalSampleRateToDsc(B),S.emit("createDsc",B,E),B}function normalize$8(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,_=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0;try{return visit("",e,l,_)}catch(S){return{ERROR:"**non-serializable** (".concat(S,")")}}}function normalizeToSize(e){var l,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:102400,E=normalize$8(e,_);return l=E,function(e){return~-encodeURI(e).split(/%..|./).length}(JSON.stringify(l))>S?normalizeToSize(e,_-1,S):E}function visit(e,l){var _=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0,S=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0,E=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){var e=new WeakSet;function memoize(l){return!!e.has(l)||(e.add(l),!1)}function unmemoize(l){e.delete(l)}return[memoize,unmemoize]}(),k=_slicedToArray(E,2),T=k[0],M=k[1];if(null==l||["boolean","string"].includes(_typeof3(l))||"number"==typeof l&&Number.isFinite(l))return l;var R=function(e,l){try{if("domain"===e&&l&&"object"===_typeof3(l)&&l._events)return"[Domain]";if("domainEmitter"===e)return"[DomainEmitter]";if("undefined"!=typeof global&&l===global)return"[Global]";if("undefined"!=typeof window&&l===window)return"[Window]";if("undefined"!=typeof document&&l===document)return"[Document]";if(isVueViewModel(l))return"[VueViewModel]";if(isPlainObject$2(S=l)&&"nativeEvent"in S&&"preventDefault"in S&&"stopPropagation"in S)return"[SyntheticEvent]";if("number"==typeof l&&!Number.isFinite(l))return"[".concat(l,"]");if("function"==typeof l)return"[Function: ".concat(getFunctionName(l),"]");if("symbol"===_typeof3(l))return"[".concat(String(l),"]");if("bigint"==typeof l)return"[BigInt: ".concat(String(l),"]");var _=function(e){var l=Object.getPrototypeOf(e);return null!=l&&l.constructor?l.constructor.name:"null prototype"}(l);return/^HTML(\w*)Element$/.test(_)?"[HTMLElement: ".concat(_,"]"):"[object ".concat(_,"]")}catch(E){return"**non-serializable** (".concat(E,")")}var S}(e,l);if(!R.startsWith("[object "))return R;if(l.__sentry_skip_normalization__)return l;var I="number"==typeof l.__sentry_override_normalization_depth__?l.__sentry_override_normalization_depth__:_;if(0===I)return R.replace("object ","");if(T(l))return"[Circular ~]";var O=l;if(O&&"function"==typeof O.toJSON)try{return visit("",O.toJSON(),I-1,S,E)}catch(j){}var D=Array.isArray(l)?[]:{},L=0,U=convertToPlainObject(l);for(var B in U)if(Object.prototype.hasOwnProperty.call(U,B)){if(L>=S){D[B]="[MaxProperties ~]";break}var z=U[B];D[B]=visit(B,z,I-1,S,E),L++}return M(l),D}function createEnvelope(e){return[e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]]}function addItemToEnvelope(e,l){var _=_slicedToArray(e,2),S=_[0],E=_[1];return[S,[].concat(_toConsumableArray3(E),[l])]}function forEachEnvelopeItem(e,l){var _,S=_createForOfIteratorHelper2(e[1]);try{for(S.s();!(_=S.n()).done;){var E=_.value;if(l(E,E[0].type))return!0}}catch(k){S.e(k)}finally{S.f()}return!1}function encodeUTF8(e){var l=getSentryCarrier(H);return l.encodePolyfill?l.encodePolyfill(e):(new TextEncoder).encode(e)}function serializeEnvelope(e){var l=_slicedToArray(e,2),_=l[0],S=l[1],E=JSON.stringify(_);function append(e){"string"==typeof E?E="string"==typeof e?E+e:[encodeUTF8(E),e]:E.push("string"==typeof e?encodeUTF8(e):e)}var k,T=_createForOfIteratorHelper2(S);try{for(T.s();!(k=T.n()).done;){var M=_slicedToArray(k.value,2),R=M[0],I=M[1];if(append("\n".concat(JSON.stringify(R),"\n")),"string"==typeof I||I instanceof Uint8Array)append(I);else{var O=void 0;try{O=JSON.stringify(I)}catch(D){O=JSON.stringify(normalize$8(I))}append(O)}}}catch(L){T.e(L)}finally{T.f()}return"string"==typeof E?E:function(e){var l,_=e.reduce(function(e,l){return e+l.length},0),S=new Uint8Array(_),E=0,k=_createForOfIteratorHelper2(e);try{for(k.s();!(l=k.n()).done;){var T=l.value;S.set(T,E),E+=T.length}}catch(L){k.e(L)}finally{k.f()}return S}(E)}function createAttachmentEnvelopeItem(e){var l="string"==typeof e.data?encodeUTF8(e.data):e.data;return[{type:"attachment",length:l.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType},l]}var me={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",raw_security:"security",log:"log_item"};function envelopeItemTypeToDataCategory(e){return me[e]}function getSdkMetadataForEnvelopeHeader(e){if(null!=e&&e.sdk){var l=e.sdk;return{name:l.name,version:l.version}}}function createEventEnvelope(e,l,_,S){var E=getSdkMetadataForEnvelopeHeader(_),k=e.type&&"replay_event"!==e.type?e.type:"event";!function(e,l){var _,S,E,k;if(!l)return e;var T=e.sdk||{};e.sdk=_objectSpread2(_objectSpread2({},T),{},{name:T.name||l.name,version:T.version||l.version,integrations:[].concat(_toConsumableArray3((null===(_=e.sdk)||void 0===_?void 0:_.integrations)||[]),_toConsumableArray3(l.integrations||[])),packages:[].concat(_toConsumableArray3((null===(S=e.sdk)||void 0===S?void 0:S.packages)||[]),_toConsumableArray3(l.packages||[])),settings:null!==(E=e.sdk)&&void 0!==E&&E.settings||l.settings?_objectSpread2(_objectSpread2({},null===(k=e.sdk)||void 0===k?void 0:k.settings),l.settings):void 0})}(e,null==_?void 0:_.sdk);var T=function(e,l,_,S){var E,k=null===(E=e.sdkProcessingMetadata)||void 0===E?void 0:E.dynamicSamplingContext;return _objectSpread2(_objectSpread2(_objectSpread2({event_id:e.event_id,sent_at:(new Date).toISOString()},l&&{sdk:l}),!!_&&S&&{dsn:dsnToString(S)}),k&&{trace:k})}(e,E,S,l);return delete e.sdkProcessingMetadata,createEnvelope(T,[[{type:k},e]])}function resolvedSyncPromise(e){return new Se(function(l){l(e)})}function rejectedSyncPromise(e){return new Se(function(l,_){_(e)})}var ye,_e,be,Se=function(){function SyncPromise(e){_classCallCheck3(this,SyncPromise),this._state=0,this._handlers=[],this._runExecutor(e)}return _createClass3(SyncPromise,[{key:"then",value:function(e,l){var _=this;return new SyncPromise(function(S,E){_._handlers.push([!1,function(l){if(e)try{S(e(l))}catch(oo){E(oo)}else S(l)},function(e){if(l)try{S(l(e))}catch(oo){E(oo)}else E(e)}]),_._executeHandlers()})}},{key:"catch",value:function(e){return this.then(function(e){return e},e)}},{key:"finally",value:function(e){var l=this;return new SyncPromise(function(_,S){var E,k;return l.then(function(l){k=!1,E=l,e&&e()},function(l){k=!0,E=l,e&&e()}).then(function(){k?S(E):_(E)})})}},{key:"_executeHandlers",value:function(){var e=this;if(0!==this._state){var l=this._handlers.slice();this._handlers=[],l.forEach(function(l){l[0]||(1===e._state&&l[1](e._value),2===e._state&&l[2](e._value),l[0]=!0)})}}},{key:"_runExecutor",value:function(e){var l=this,setResult=function(e,_){0===l._state&&(isThenable$1(_)?_.then(resolve,reject):(l._state=e,l._value=_,l._executeHandlers()))},resolve=function(e){setResult(1,e)},reject=function(e){setResult(2,e)};try{e(resolve,reject)}catch(oo){reject(oo)}}}])}();function notifyEventProcessors(e,l,_){var S=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;try{var E=_notifyEventProcessors(l,_,e,S);return isThenable$1(E)?E:resolvedSyncPromise(E)}catch(k){return rejectedSyncPromise(k)}}function _notifyEventProcessors(e,l,_,S){var E=_[S];if(!e||!E)return e;var k=E(_objectSpread2({},e),l);return G&&null===k&&X.log('Event processor "'.concat(E.id||"?",'" dropped event')),isThenable$1(k)?k.then(function(e){return _notifyEventProcessors(e,l,_,S+1)}):_notifyEventProcessors(k,l,_,S+1)}function applyScopeDataToEvent(e,l){var _=l.fingerprint,S=l.span,E=l.breadcrumbs,k=l.sdkProcessingMetadata;!function(e,l){var _=l.extra,S=l.tags,E=l.user,k=l.contexts,T=l.level,M=l.transactionName;Object.keys(_).length&&(e.extra=_objectSpread2(_objectSpread2({},_),e.extra));Object.keys(S).length&&(e.tags=_objectSpread2(_objectSpread2({},S),e.tags));Object.keys(E).length&&(e.user=_objectSpread2(_objectSpread2({},E),e.user));Object.keys(k).length&&(e.contexts=_objectSpread2(_objectSpread2({},k),e.contexts));T&&(e.level=T);M&&"transaction"!==e.type&&(e.transaction=M)}(e,l),S&&function(e,l){e.contexts=_objectSpread2({trace:spanToTraceContext(l)},e.contexts),e.sdkProcessingMetadata=_objectSpread2({dynamicSamplingContext:getDynamicSamplingContextFromSpan(l)},e.sdkProcessingMetadata);var _=getRootSpan(l),S=spanToJSON(_).description;S&&!e.transaction&&"transaction"===e.type&&(e.transaction=S)}(e,S),function(e,l){e.fingerprint=e.fingerprint?Array.isArray(e.fingerprint)?e.fingerprint:[e.fingerprint]:[],l&&(e.fingerprint=e.fingerprint.concat(l));e.fingerprint.length||delete e.fingerprint}(e,_),function(e,l){var _=[].concat(_toConsumableArray3(e.breadcrumbs||[]),_toConsumableArray3(l));e.breadcrumbs=_.length?_:void 0}(e,E),function(e,l){e.sdkProcessingMetadata=_objectSpread2(_objectSpread2({},e.sdkProcessingMetadata),l)}(e,k)}function mergeScopeData(e,l){var _=l.extra,S=l.tags,E=l.user,k=l.contexts,T=l.level,M=l.sdkProcessingMetadata,R=l.breadcrumbs,I=l.fingerprint,O=l.eventProcessors,D=l.attachments,L=l.propagationContext,U=l.transactionName,B=l.span;mergeAndOverwriteScopeData(e,"extra",_),mergeAndOverwriteScopeData(e,"tags",S),mergeAndOverwriteScopeData(e,"user",E),mergeAndOverwriteScopeData(e,"contexts",k),e.sdkProcessingMetadata=merge$1(e.sdkProcessingMetadata,M,2),T&&(e.level=T),U&&(e.transactionName=U),B&&(e.span=B),R.length&&(e.breadcrumbs=[].concat(_toConsumableArray3(e.breadcrumbs),_toConsumableArray3(R))),I.length&&(e.fingerprint=[].concat(_toConsumableArray3(e.fingerprint),_toConsumableArray3(I))),O.length&&(e.eventProcessors=[].concat(_toConsumableArray3(e.eventProcessors),_toConsumableArray3(O))),D.length&&(e.attachments=[].concat(_toConsumableArray3(e.attachments),_toConsumableArray3(D))),e.propagationContext=_objectSpread2(_objectSpread2({},e.propagationContext),L)}function mergeAndOverwriteScopeData(e,l,_){e[l]=merge$1(e[l],_,1)}function prepareEvent(e,l,_,S,E,k){var T=e.normalizeDepth,M=void 0===T?3:T,R=e.normalizeMaxBreadth,I=void 0===R?1e3:R,O=_objectSpread2(_objectSpread2({},l),{},{event_id:l.event_id||_.event_id||uuid4(),timestamp:l.timestamp||dateTimestampInSeconds()}),D=_.integrations||e.integrations.map(function(e){return e.name});!function(e,l){var _=l.environment,S=l.release,E=l.dist,k=l.maxValueLength,T=void 0===k?250:k;e.environment=e.environment||_||ge,!e.release&&S&&(e.release=S);!e.dist&&E&&(e.dist=E);var M=e.request;null!=M&&M.url&&(M.url=truncate(M.url,T))}(O,e),function(e,l){l.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[].concat(_toConsumableArray3(e.sdk.integrations||[]),_toConsumableArray3(l)))}(O,D),E&&E.emit("applyFrameMetadata",l),void 0===l.type&&function(e,l){var _,S=function(e){var l=H._sentryDebugIds;if(!l)return{};var _=Object.keys(l);return be&&_.length===_e||(_e=_.length,be=_.reduce(function(_,S){ye||(ye={});var E=ye[S];if(E)_[E[0]]=E[1];else for(var k=e(S),T=k.length-1;T>=0;T--){var M=k[T],R=null==M?void 0:M.filename,I=l[S];if(R&&I){_[R]=I,ye[S]=[R,I];break}}return _},{})),be}(l);null===(_=e.exception)||void 0===_||null===(_=_.values)||void 0===_||_.forEach(function(e){var l;null===(l=e.stacktrace)||void 0===l||null===(l=l.frames)||void 0===l||l.forEach(function(e){e.filename&&(e.debug_id=S[e.filename])})})}(O,e.stackParser);var L=function(e,l){if(!l)return e;var _=e?e.clone():new ue;return _.update(l),_}(S,_.captureContext);_.mechanism&&addExceptionMechanism(O,_.mechanism);var U=E?E.getEventProcessors():[],B=getGlobalSingleton("globalScope",function(){return new ue}).getScopeData();k&&mergeScopeData(B,k.getScopeData());L&&mergeScopeData(B,L.getScopeData());var z=[].concat(_toConsumableArray3(_.attachments||[]),_toConsumableArray3(B.attachments));return z.length&&(_.attachments=z),applyScopeDataToEvent(O,B),notifyEventProcessors([].concat(_toConsumableArray3(U),_toConsumableArray3(B.eventProcessors)),O,_).then(function(e){return e&&function(e){var l,_={};if(null===(l=e.exception)||void 0===l||null===(l=l.values)||void 0===l||l.forEach(function(e){var l;null===(l=e.stacktrace)||void 0===l||null===(l=l.frames)||void 0===l||l.forEach(function(e){e.debug_id&&(e.abs_path?_[e.abs_path]=e.debug_id:e.filename&&(_[e.filename]=e.debug_id),delete e.debug_id)})}),0===Object.keys(_).length)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];var S=e.debug_meta.images;Object.entries(_).forEach(function(e){var l=_slicedToArray(e,2),_=l[0],E=l[1];S.push({type:"sourcemap",code_file:_,debug_id:E})})}(e),"number"==typeof M&&M>0?function(e,l,_){var S,E;if(!e)return null;var k=_objectSpread2(_objectSpread2(_objectSpread2(_objectSpread2(_objectSpread2({},e),e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map(function(e){return _objectSpread2(_objectSpread2({},e),e.data&&{data:normalize$8(e.data,l,_)})})}),e.user&&{user:normalize$8(e.user,l,_)}),e.contexts&&{contexts:normalize$8(e.contexts,l,_)}),e.extra&&{extra:normalize$8(e.extra,l,_)});null!==(S=e.contexts)&&void 0!==S&&S.trace&&k.contexts&&(k.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(k.contexts.trace.data=normalize$8(e.contexts.trace.data,l,_)));e.spans&&(k.spans=e.spans.map(function(e){return _objectSpread2(_objectSpread2({},e),e.data&&{data:normalize$8(e.data,l,_)})}));null!==(E=e.contexts)&&void 0!==E&&E.flags&&k.contexts&&(k.contexts.flags=normalize$8(e.contexts.flags,3,_));return k}(e,M,I):e})}function parseEventHintOrCaptureContext(e){if(e)return function(e){return e instanceof ue||"function"==typeof e}(e)||function(e){return Object.keys(e).some(function(e){return we.includes(e)})}(e)?{captureContext:e}:e}var we=["user","level","extra","contexts","tags","fingerprint","propagationContext"];function captureException(e,l){return getCurrentScope().captureException(e,parseEventHintOrCaptureContext(l))}function captureEvent(e,l){return getCurrentScope().captureEvent(e,l)}function startSession(e){var l=getIsolationScope(),_=getCurrentScope(),S=(H.navigator||{}).userAgent,E=makeSession(_objectSpread2(_objectSpread2({user:_.getUser()||l.getUser()},S&&{userAgent:S}),e)),k=l.getSession();return"ok"===(null==k?void 0:k.status)&&updateSession(k,{status:"exited"}),endSession(),l.setSession(E),E}function endSession(){var e=getIsolationScope(),l=getCurrentScope().getSession()||e.getSession();l&&function(e){var l={};"ok"===e.status&&(l={status:"exited"}),updateSession(e,l)}(l),_sendSessionUpdate(),e.setSession()}function _sendSessionUpdate(){var e=getIsolationScope(),l=getClient(),_=e.getSession();_&&l&&l.captureSession(_)}function captureSession(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]?endSession():_sendSessionUpdate()}function getBaseApiEndpoint(e){var l=e.protocol?"".concat(e.protocol,":"):"",_=e.port?":".concat(e.port):"";return"".concat(l,"//").concat(e.host).concat(_).concat(e.path?"/".concat(e.path):"","/api/")}function getEnvelopeEndpointWithUrlEncodedAuth(e,l,_){return l||"".concat(function(e){return"".concat(getBaseApiEndpoint(e)).concat(e.projectId,"/envelope/")}(e),"?").concat(function(e,l){var _={sentry_version:"7"};return e.publicKey&&(_.sentry_key=e.publicKey),l&&(_.sentry_client="".concat(l.name,"/").concat(l.version)),new URLSearchParams(_).toString()}(e,_))}var xe=[];function getIntegrationsToSetup(e){var l,_=e.defaultIntegrations||[],S=e.integrations;if(_.forEach(function(e){e.isDefaultInstance=!0}),Array.isArray(S))l=[].concat(_toConsumableArray3(_),_toConsumableArray3(S));else if("function"==typeof S){var E=S(_);l=Array.isArray(E)?E:[E]}else l=_;return function(e){var l={};return e.forEach(function(e){var _=e.name,S=l[_];S&&!S.isDefaultInstance&&e.isDefaultInstance||(l[_]=e)}),Object.values(l)}(l)}function afterSetupIntegrations(e,l){var _,S=_createForOfIteratorHelper2(l);try{for(S.s();!(_=S.n()).done;){var E=_.value;null!=E&&E.afterAllSetup&&E.afterAllSetup(e)}}catch(k){S.e(k)}finally{S.f()}}function setupIntegration(e,l,_){if(_[l.name])G&&X.log("Integration skipped because it was already installed: ".concat(l.name));else{if(_[l.name]=l,-1===xe.indexOf(l.name)&&"function"==typeof l.setupOnce&&(l.setupOnce(),xe.push(l.name)),l.setup&&"function"==typeof l.setup&&l.setup(e),"function"==typeof l.preprocessEvent){var S=l.preprocessEvent.bind(l);e.on("preprocessEvent",function(l,_){return S(l,_,e)})}if("function"==typeof l.processEvent){var E=l.processEvent.bind(l),k=Object.assign(function(l,_){return E(l,_,e)},{id:l.name});e.addEventProcessor(k)}G&&X.log("Integration installed: ".concat(l.name))}}function getPossibleEventMessages(e){var l=[];e.message&&l.push(e.message);try{var _=e.exception.values[e.exception.values.length-1];null!=_&&_.value&&(l.push(_.value),_.type&&l.push("".concat(_.type,": ").concat(_.value)))}catch(S){}return l}var Ee="Not capturing exception because it's already been captured.",ke="Discarded session because of missing or non-string release",Ae=Symbol.for("SentryInternalError"),Ce=Symbol.for("SentryDoNotSendEventError");function _makeInternalError(e){return _defineProperty3({message:e},Ae,!0)}function _makeDoNotSendEventError(e){return _defineProperty3({message:e},Ce,!0)}function _isInternalError(e){return!!e&&"object"===_typeof3(e)&&Ae in e}function _isDoNotSendEventError(e){return!!e&&"object"===_typeof3(e)&&Ce in e}var Te=function(){return _createClass3(function Client(e){if(_classCallCheck3(this,Client),this._options=e,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],e.dsn?this._dsn=makeDsn(e.dsn):G&&X.warn("No DSN provided, client will not send events."),this._dsn){var l=getEnvelopeEndpointWithUrlEncodedAuth(this._dsn,e.tunnel,e._metadata?e._metadata.sdk:void 0);this._transport=e.transport(_objectSpread2(_objectSpread2({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this)},e.transportOptions),{},{url:l}))}},[{key:"captureException",value:function(e,l,_){var S=this,E=uuid4();if(checkOrSetAlreadyCaught(e))return G&&X.log(Ee),E;var k=_objectSpread2({event_id:E},l);return this._process(this.eventFromException(e,k).then(function(e){return S._captureEvent(e,k,_)})),k.event_id}},{key:"captureMessage",value:function(e,l,_,S){var E=this,k=_objectSpread2({event_id:uuid4()},_),T=isParameterizedString(e)?e:String(e),M=isPrimitive(e)?this.eventFromMessage(T,l,k):this.eventFromException(e,k);return this._process(M.then(function(e){return E._captureEvent(e,k,S)})),k.event_id}},{key:"captureEvent",value:function(e,l,_){var S=uuid4();if(null!=l&&l.originalException&&checkOrSetAlreadyCaught(l.originalException))return G&&X.log(Ee),S;var E=_objectSpread2({event_id:S},l),k=e.sdkProcessingMetadata||{},T=k.capturedSpanScope,M=k.capturedSpanIsolationScope;return this._process(this._captureEvent(e,E,T||_,M)),E.event_id}},{key:"captureSession",value:function(e){this.sendSession(e),updateSession(e,{init:!1})}},{key:"getDsn",value:function(){return this._dsn}},{key:"getOptions",value:function(){return this._options}},{key:"getSdkMetadata",value:function(){return this._options._metadata}},{key:"getTransport",value:function(){return this._transport}},{key:"flush",value:(S=_asyncToGenerator(_regenerator().m(function _callee(e){var l,_,S;return _regenerator().w(function(E){for(;;)switch(E.n){case 0:if(l=this._transport){E.n=1;break}return E.a(2,!0);case 1:return this.emit("flush"),E.n=2,this._isClientDoneProcessing(e);case 2:return _=E.v,E.n=3,l.flush(e);case 3:return S=E.v,E.a(2,_&&S)}},_callee,this)})),function(e){return S.apply(this,arguments)})},{key:"close",value:(_=_asyncToGenerator(_regenerator().m(function _callee2(e){var l;return _regenerator().w(function(_){for(;;)switch(_.n){case 0:return _.n=1,this.flush(e);case 1:return l=_.v,this.getOptions().enabled=!1,this.emit("close"),_.a(2,l)}},_callee2,this)})),function(e){return _.apply(this,arguments)})},{key:"getEventProcessors",value:function(){return this._eventProcessors}},{key:"addEventProcessor",value:function(e){this._eventProcessors.push(e)}},{key:"init",value:function(){(this._isEnabled()||this._options.integrations.some(function(e){return e.name.startsWith("Spotlight")}))&&this._setupIntegrations()}},{key:"getIntegrationByName",value:function(e){return this._integrations[e]}},{key:"addIntegration",value:function(e){var l=this._integrations[e.name];setupIntegration(this,e,this._integrations),l||afterSetupIntegrations(this,[e])}},{key:"sendEvent",value:function(e){var l=this,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.emit("beforeSendEvent",e,_);var S,E=createEventEnvelope(e,this._dsn,this._options._metadata,this._options.tunnel),k=_createForOfIteratorHelper2(_.attachments||[]);try{for(k.s();!(S=k.n()).done;){E=addItemToEnvelope(E,createAttachmentEnvelopeItem(S.value))}}catch(T){k.e(T)}finally{k.f()}this.sendEnvelope(E).then(function(_){return l.emit("afterSendEvent",e,_)})}},{key:"sendSession",value:function(e){var l=this._options,_=l.release,S=l.environment,E=void 0===S?ge:S;if("aggregates"in e){var k=e.attrs||{};if(!k.release&&!_)return void(G&&X.warn(ke));k.release=k.release||_,k.environment=k.environment||E,e.attrs=k}else{if(!e.release&&!_)return void(G&&X.warn(ke));e.release=e.release||_,e.environment=e.environment||E}this.emit("beforeSendSession",e);var T=function(e,l,_,S){var E=getSdkMetadataForEnvelopeHeader(_);return createEnvelope(_objectSpread2(_objectSpread2({sent_at:(new Date).toISOString()},E&&{sdk:E}),!!S&&l&&{dsn:dsnToString(l)}),["aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()]])}(e,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(T)}},{key:"recordDroppedEvent",value:function(e,l){var _=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(this._options.sendClientReports){var S="".concat(e,":").concat(l);G&&X.log('Recording outcome: "'.concat(S,'"').concat(_>1?" (".concat(_," times)"):"")),this._outcomes[S]=(this._outcomes[S]||0)+_}}},{key:"on",value:function(e,l){var _=this._hooks[e]=this._hooks[e]||new Set,uniqueCallback=function(){return l.apply(void 0,arguments)};return _.add(uniqueCallback),function(){_.delete(uniqueCallback)}}},{key:"emit",value:function(e){for(var l=arguments.length,_=new Array(l>1?l-1:0),S=1;S<l;S++)_[S-1]=arguments[S];var E=this._hooks[e];E&&E.forEach(function(e){return e.apply(void 0,_)})}},{key:"sendEnvelope",value:(l=_asyncToGenerator(_regenerator().m(function _callee3(e){var l;return _regenerator().w(function(_){for(;;)switch(_.p=_.n){case 0:if(this.emit("beforeEnvelope",e),!this._isEnabled()||!this._transport){_.n=4;break}return _.p=1,_.n=2,this._transport.send(e);case 2:return _.a(2,_.v);case 3:return _.p=3,l=_.v,G&&X.error("Error while sending envelope:",l),_.a(2,{});case 4:return G&&X.error("Transport disabled"),_.a(2,{})}},_callee3,this,[[1,3]])})),function(e){return l.apply(this,arguments)})},{key:"_setupIntegrations",value:function(){var e=this._options.integrations;this._integrations=function(e,l){var _={};return l.forEach(function(l){l&&setupIntegration(e,l,_)}),_}(this,e),afterSetupIntegrations(this,e)}},{key:"_updateSessionFromEvent",value:function(e,l){var _,S="fatal"===l.level,E=!1,k=null===(_=l.exception)||void 0===_?void 0:_.values;if(k){E=!0;var T,M=_createForOfIteratorHelper2(k);try{for(M.s();!(T=M.n()).done;){var R=T.value.mechanism;if(!1===(null==R?void 0:R.handled)){S=!0;break}}}catch(O){M.e(O)}finally{M.f()}}var I="ok"===e.status;(I&&0===e.errors||I&&S)&&(updateSession(e,_objectSpread2(_objectSpread2({},S&&{status:"crashed"}),{},{errors:e.errors||Number(E||S)})),this.captureSession(e))}},{key:"_isClientDoneProcessing",value:(e=_asyncToGenerator(_regenerator().m(function _callee4(e){var l;return _regenerator().w(function(_){for(;;)switch(_.n){case 0:l=0;case 1:if(e&&!(l<e)){_.n=4;break}return _.n=2,new Promise(function(e){return setTimeout(e,1)});case 2:if(this._numProcessing){_.n=3;break}return _.a(2,!0);case 3:l++,_.n=1;break;case 4:return _.a(2,!1)}},_callee4,this)})),function(l){return e.apply(this,arguments)})},{key:"_isEnabled",value:function(){return!1!==this.getOptions().enabled&&void 0!==this._transport}},{key:"_prepareEvent",value:function(e,l,_,S){var E=this,k=this.getOptions(),T=Object.keys(this._integrations);return!l.integrations&&null!=T&&T.length&&(l.integrations=T),this.emit("preprocessEvent",e,l),e.type||S.setLastEventId(e.event_id||l.event_id),prepareEvent(k,e,l,_,this,S).then(function(e){if(null===e)return e;var S,k,T,M,R;E.emit("postprocessEvent",e,l),e.contexts=_objectSpread2({trace:(S=_,k=S.getPropagationContext(),T=k.traceId,M=k.parentSpanId,R={trace_id:T,span_id:k.propagationSpanId||generateSpanId()},M&&(R.parent_span_id=M),R)},e.contexts);var I=function(e,l){var _=l.getPropagationContext();return _.dsc||getDynamicSamplingContextFromClient(_.traceId,e)}(E,_);return e.sdkProcessingMetadata=_objectSpread2({dynamicSamplingContext:I},e.sdkProcessingMetadata),e})}},{key:"_captureEvent",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_=arguments.length>2&&void 0!==arguments[2]?arguments[2]:getCurrentScope(),S=arguments.length>3&&void 0!==arguments[3]?arguments[3]:getIsolationScope();return G&&isErrorEvent(e)&&X.log("Captured error event `".concat(getPossibleEventMessages(e)[0]||"<unknown>","`")),this._processEvent(e,l,_,S).then(function(e){return e.event_id},function(e){G&&(_isDoNotSendEventError(e)?X.log(e.message):_isInternalError(e)?X.warn(e.message):X.warn(e))})}},{key:"_processEvent",value:function(e,l,_,S){var E=this,k=this.getOptions(),T=k.sampleRate,M=isTransactionEvent(e),R=isErrorEvent(e),I=e.type||"error",O="before send for type `".concat(I,"`"),D=void 0===T?void 0:function(e){if("boolean"==typeof e)return Number(e);var l="string"==typeof e?parseFloat(e):e;return"number"!=typeof l||isNaN(l)||l<0||l>1?void 0:l}(T);if(R&&"number"==typeof D&&Math.random()>D)return this.recordDroppedEvent("sample_rate","error"),rejectedSyncPromise(_makeDoNotSendEventError("Discarding event because it's not included in the random sample (sampling rate = ".concat(T,")")));var L="replay_event"===I?"replay":I;return this._prepareEvent(e,l,_,S).then(function(e){if(null===e)throw E.recordDroppedEvent("event_processor",L),_makeDoNotSendEventError("An event processor returned `null`, will not send event.");if(l.data&&!0===l.data.__sentry__)return e;var _=function(e,l,_,S){var E=l.beforeSend,k=l.beforeSendTransaction,T=l.beforeSendSpan,M=l.ignoreSpans,R=_;if(isErrorEvent(R)&&E)return E(R,S);if(isTransactionEvent(R)){if(T||M){var I=function(e){var l,_,S,E=null!==(l=null===(_=e.contexts)||void 0===_?void 0:_.trace)&&void 0!==l?l:{},k=E.trace_id,T=E.parent_span_id,M=E.span_id,R=E.status,I=E.origin,O=E.data,D=E.op;return{data:null!=O?O:{},description:e.transaction,op:D,parent_span_id:T,span_id:null!=M?M:"",start_timestamp:null!==(S=e.start_timestamp)&&void 0!==S?S:0,status:R,timestamp:e.timestamp,trace_id:null!=k?k:"",origin:I,profile_id:null==O?void 0:O[ce],exclusive_time:null==O?void 0:O[he],measurements:e.measurements,is_segment:!0}}(R);if(null!=M&&M.length&&shouldIgnoreSpan(I,M))return null;if(T){var O=T(I);O?R=merge$1(_,function(e){return{type:"transaction",timestamp:e.timestamp,start_timestamp:e.start_timestamp,transaction:e.description,contexts:{trace:{trace_id:e.trace_id,span_id:e.span_id,parent_span_id:e.parent_span_id,op:e.op,status:e.status,origin:e.origin,data:_objectSpread2(_objectSpread2(_objectSpread2({},e.data),e.profile_id&&_defineProperty3({},ce,e.profile_id)),e.exclusive_time&&_defineProperty3({},he,e.exclusive_time))}},measurements:e.measurements}}(O)):showSpanDropWarning()}if(R.spans){var D,L=[],U=R.spans,B=_createForOfIteratorHelper2(U);try{for(B.s();!(D=B.n()).done;){var z=D.value;if(null!=M&&M.length&&shouldIgnoreSpan(z,M))reparentChildSpans(U,z);else if(T){var j=T(z);j?L.push(j):(showSpanDropWarning(),L.push(z))}else L.push(z)}}catch(V){B.e(V)}finally{B.f()}var G=R.spans.length-L.length;G&&e.recordDroppedEvent("before_send","span",G),R.spans=L}}if(k){if(R.spans){var H=R.spans.length;R.sdkProcessingMetadata=_objectSpread2(_objectSpread2({},_.sdkProcessingMetadata),{},{spanCountBeforeProcessing:H})}return k(R,S)}}return R}(E,k,e,l);return function(e,l){var _="".concat(l," must return `null` or a valid event.");if(isThenable$1(e))return e.then(function(e){if(!isPlainObject$2(e)&&null!==e)throw _makeInternalError(_);return e},function(e){throw _makeInternalError("".concat(l," rejected with ").concat(e))});if(!isPlainObject$2(e)&&null!==e)throw _makeInternalError(_);return e}(_,O)}).then(function(k){if(null===k){if(E.recordDroppedEvent("before_send",L),M){var T=1+(e.spans||[]).length;E.recordDroppedEvent("before_send","span",T)}throw _makeDoNotSendEventError("".concat(O," returned `null`, will not send event."))}var I=_.getSession()||S.getSession();if(R&&I&&E._updateSessionFromEvent(I,k),M){var D,U=((null===(D=k.sdkProcessingMetadata)||void 0===D?void 0:D.spanCountBeforeProcessing)||0)-(k.spans?k.spans.length:0);U>0&&E.recordDroppedEvent("before_send","span",U)}var B=k.transaction_info;if(M&&B&&k.transaction!==e.transaction){k.transaction_info=_objectSpread2(_objectSpread2({},B),{},{source:"custom"})}return E.sendEvent(k,l),k}).then(null,function(e){if(_isDoNotSendEventError(e)||_isInternalError(e))throw e;throw E.captureException(e,{mechanism:{handled:!1,type:"internal"},data:{__sentry__:!0},originalException:e}),_makeInternalError("Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: ".concat(e))})}},{key:"_process",value:function(e){var l=this;this._numProcessing++,e.then(function(e){return l._numProcessing--,e},function(e){return l._numProcessing--,e})}},{key:"_clearOutcomes",value:function(){var e=this._outcomes;return this._outcomes={},Object.entries(e).map(function(e){var l=_slicedToArray(e,2),_=l[0],S=l[1],E=_slicedToArray(_.split(":"),2);return{reason:E[0],category:E[1],quantity:S}})}},{key:"_flushOutcomes",value:function(){G&&X.log("Flushing outcomes...");var e=this._clearOutcomes();if(0!==e.length)if(this._dsn){G&&X.log("Sending outcomes:",e);var l,_,S=(l=e,createEnvelope((_=this._options.tunnel&&dsnToString(this._dsn))?{dsn:_}:{},[[{type:"client_report"},{timestamp:dateTimestampInSeconds(),discarded_events:l}]]));this.sendEnvelope(S)}else G&&X.log("No dsn provided, will not send outcomes");else G&&X.log("No outcomes to send")}}]);var e,l,_,S}();function isErrorEvent(e){return void 0===e.type}function isTransactionEvent(e){return"transaction"===e.type}function _INTERNAL_flushLogsBuffer(e,l){var _,S=null!==(_=function(e){return _getBufferMap().get(e)}(e))&&void 0!==_?_:[];if(0!==S.length){var E,k,T,M,R,I,O=e.getOptions(),D=(E=S,k=O._metadata,T=O.tunnel,M=e.getDsn(),I={},null!=k&&k.sdk&&(I.sdk={name:k.sdk.name,version:k.sdk.version}),T&&M&&(I.dsn=dsnToString(M)),createEnvelope(I,[(R=E,[{type:"log",item_count:R.length,content_type:"application/vnd.sentry.items.log+json"},{items:R}])]));_getBufferMap().set(e,[]),e.emit("flushLogs"),e.sendEnvelope(D)}}function _getBufferMap(){return getGlobalSingleton("clientToLogBufferMap",function(){return new WeakMap})}var Me=Symbol.for("SentryBufferFullError");function makePromiseBuffer(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,l=new Set;function remove(e){l.delete(e)}return{get $(){return Array.from(l)},add:function(_){if(!(l.size<e))return rejectedSyncPromise(Me);var S=_();return l.add(S),S.then(function(){return remove(S)},function(){return remove(S)}),S},drain:function(e){if(!l.size)return resolvedSyncPromise(!0);var _=Promise.allSettled(Array.from(l)).then(function(){return!0});if(!e)return _;var S=[_,new Promise(function(l){return setTimeout(function(){return l(!1)},e)})];return Promise.race(S)}}}var Re=6e4;function updateRateLimits(e,l){var _=l.statusCode,S=l.headers,E=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Date.now(),k=_objectSpread2({},e),T=null==S?void 0:S["x-sentry-rate-limits"],M=null==S?void 0:S["retry-after"];if(T){var R,I=_createForOfIteratorHelper2(T.trim().split(","));try{for(I.s();!(R=I.n()).done;){var O=_slicedToArray(R.value.split(":",5),5),D=O[0],L=O[1],U=O[4],B=parseInt(D,10),z=1e3*(isNaN(B)?60:B);if(L){var j,G=_createForOfIteratorHelper2(L.split(";"));try{for(G.s();!(j=G.n()).done;){var H=j.value;"metric_bucket"===H&&U&&!U.split(";").includes("custom")||(k[H]=E+z)}}catch(V){G.e(V)}finally{G.f()}}else k.all=E+z}}catch(V){I.e(V)}finally{I.f()}}else M?k.all=E+function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now(),_=parseInt("".concat(e),10);if(!isNaN(_))return 1e3*_;var S=Date.parse("".concat(e));return isNaN(S)?Re:S-l}(M,E):429===_&&(k.all=E+6e4);return k}var Ie=64;function createTransport(e,l){var _=arguments.length>2&&void 0!==arguments[2]?arguments[2]:makePromiseBuffer(e.bufferSize||Ie),S={};return{send:function(E){var k=[];if(forEachEnvelopeItem(E,function(l,_){var E=envelopeItemTypeToDataCategory(_);!function(e,l){var _=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Date.now();return function(e,l){return e[l]||e.all||0}(e,l)>_}(S,E)?k.push(l):e.recordDroppedEvent("ratelimit_backoff",E)}),0===k.length)return Promise.resolve({});var T=createEnvelope(E[0],k),recordEnvelopeLoss=function(l){forEachEnvelopeItem(T,function(_,S){e.recordDroppedEvent(l,envelopeItemTypeToDataCategory(S))})};return _.add(function(){return l({body:serializeEnvelope(T)}).then(function(e){return void 0!==e.statusCode&&(e.statusCode<200||e.statusCode>=300)&&G&&X.warn("Sentry responded with status code ".concat(e.statusCode," to sent event.")),S=updateRateLimits(S,e),e},function(e){throw recordEnvelopeLoss("network_error"),G&&X.error("Encountered error running transport request:",e),e})}).then(function(e){return e},function(e){if(e===Me)return G&&X.error("Skipped sending event because buffer is full."),recordEnvelopeLoss("queue_overflow"),Promise.resolve({});throw e})},flush:function(e){return _.drain(e)}}}function parseUrl(e){if(!e)return{};var l=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!l)return{};var _=l[6]||"",S=l[8]||"";return{host:l[4],path:l[5],protocol:l[2],search:_,hash:S,relative:l[5]+_+S}}function addAutoIpAddressToSession(e){var l;"aggregates"in e?void 0===(null===(l=e.attrs)||void 0===l?void 0:l.ip_address)&&(e.attrs=_objectSpread2(_objectSpread2({},e.attrs),{},{ip_address:"{{auto}}"})):void 0===e.ipAddress&&(e.ipAddress="{{auto}}")}function applySdkMetadata(e,l){var _=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[l],S=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"npm",E=e._metadata||{};E.sdk||(E.sdk={name:"sentry.javascript.".concat(l),packages:_.map(function(e){return{name:"".concat(S,":@sentry/").concat(e),version:V}}),version:V}),e._metadata=E}var Pe;function addBreadcrumb(e,l){var _=getClient(),S=getIsolationScope();if(_){var E=_.getOptions(),k=E.beforeBreadcrumb,T=void 0===k?null:k,M=E.maxBreadcrumbs,R=void 0===M?100:M;if(!(R<=0)){var I=_objectSpread2({timestamp:dateTimestampInSeconds()},e),O=T?consoleSandbox(function(){return T(I,l)}):I;null!==O&&(_.emit&&_.emit("beforeAddBreadcrumb",O,l),S.addBreadcrumb(O,R))}}}var Oe=new WeakMap,functionToStringIntegration=function(){return{name:"FunctionToString",setupOnce:function(){Pe=Function.prototype.toString;try{Function.prototype.toString=function(){for(var e=getOriginalFunction(this),l=Oe.has(getClient())&&void 0!==e?e:this,_=arguments.length,S=new Array(_),E=0;E<_;E++)S[E]=arguments[E];return Pe.apply(l,S)}}catch(e){}},setup:function(e){Oe.set(e,!0)}}},De=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,/^Can't find variable: gmo$/,/^undefined is not an object \(evaluating 'a\.[A-Z]'\)$/,'can\'t redefine non-configurable property "solana"',"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)","Can't find variable: _AutofillCallbackHandler",/^Non-Error promise rejection captured with value: Object Not Found Matching Id:\d+, MethodName:simulateEvent, ParamCount:\d+$/,/^Java exception was raised during method invocation$/],eventFiltersIntegration=function(){var e,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{name:"EventFilters",setup:function(_){var S=_.getOptions();e=_mergeOptions(l,S)},processEvent:function(_,S,E){if(!e){var k=E.getOptions();e=_mergeOptions(l,k)}return function(e,l){if(e.type){if("transaction"===e.type&&function(e,l){if(null==l||!l.length)return!1;var _=e.transaction;return!!_&&stringMatchesSomePattern(_,l)}(e,l.ignoreTransactions))return G&&X.warn("Event dropped due to being matched by `ignoreTransactions` option.\nEvent: ".concat(getEventDescription(e))),!0}else{if(function(e,l){if(null==l||!l.length)return!1;return getPossibleEventMessages(e).some(function(e){return stringMatchesSomePattern(e,l)})}(e,l.ignoreErrors))return G&&X.warn("Event dropped due to being matched by `ignoreErrors` option.\nEvent: ".concat(getEventDescription(e))),!0;if(function(e){var l;if(null===(l=e.exception)||void 0===l||null===(l=l.values)||void 0===l||!l.length)return!1;return!e.message&&!e.exception.values.some(function(e){return e.stacktrace||e.type&&"Error"!==e.type||e.value})}(e))return G&&X.warn("Event dropped due to not having an error message, error type or stacktrace.\nEvent: ".concat(getEventDescription(e))),!0;if(function(e,l){if(null==l||!l.length)return!1;var _=_getEventFilterUrl(e);return!!_&&stringMatchesSomePattern(_,l)}(e,l.denyUrls))return G&&X.warn("Event dropped due to being matched by `denyUrls` option.\nEvent: ".concat(getEventDescription(e),".\nUrl: ").concat(_getEventFilterUrl(e))),!0;if(!function(e,l){if(null==l||!l.length)return!0;var _=_getEventFilterUrl(e);return!_||stringMatchesSomePattern(_,l)}(e,l.allowUrls))return G&&X.warn("Event dropped due to not being matched by `allowUrls` option.\nEvent: ".concat(getEventDescription(e),".\nUrl: ").concat(_getEventFilterUrl(e))),!0}return!1}(_,e)?null:_}}},inboundFiltersIntegration=function(){return _objectSpread2(_objectSpread2({},eventFiltersIntegration(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})),{},{name:"InboundFilters"})};function _mergeOptions(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{allowUrls:[].concat(_toConsumableArray3(e.allowUrls||[]),_toConsumableArray3(l.allowUrls||[])),denyUrls:[].concat(_toConsumableArray3(e.denyUrls||[]),_toConsumableArray3(l.denyUrls||[])),ignoreErrors:[].concat(_toConsumableArray3(e.ignoreErrors||[]),_toConsumableArray3(l.ignoreErrors||[]),_toConsumableArray3(e.disableErrorDefaults?[]:De)),ignoreTransactions:[].concat(_toConsumableArray3(e.ignoreTransactions||[]),_toConsumableArray3(l.ignoreTransactions||[]))}}function _getEventFilterUrl(e){try{var l,_,S,E=_toConsumableArray3(null!==(l=null===(_=e.exception)||void 0===_?void 0:_.values)&&void 0!==l?l:[]).reverse().find(function(e){var l,_;return void 0===(null===(l=e.mechanism)||void 0===l?void 0:l.parent_id)&&(null===(_=e.stacktrace)||void 0===_||null===(_=_.frames)||void 0===_?void 0:_.length)}),k=null==E||null===(S=E.stacktrace)||void 0===S?void 0:S.frames;return k?function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],l=e.length-1;l>=0;l--){var _=e[l];if(_&&"<anonymous>"!==_.filename&&"[native code]"!==_.filename)return _.filename||null}return null}(k):null}catch(T){return G&&X.error("Cannot extract url for event ".concat(getEventDescription(e))),null}}function applyAggregateErrorsToEvent(e,l,_,S,E,k){var T;if(null!==(T=E.exception)&&void 0!==T&&T.values&&k&&isInstanceOf(k.originalException,Error)){var M=E.exception.values.length>0?E.exception.values[E.exception.values.length-1]:void 0;M&&(E.exception.values=aggregateExceptionsFromError(e,l,S,k.originalException,_,E.exception.values,M,0))}}function aggregateExceptionsFromError(e,l,_,S,E,k,T,M){if(k.length>=_+1)return k;var R=_toConsumableArray3(k);if(isInstanceOf(S[E],Error)){applyExceptionGroupFieldsForParentException(T,M);var I=e(l,S[E]),O=R.length;applyExceptionGroupFieldsForChildException(I,E,O,M),R=aggregateExceptionsFromError(e,l,_,S[E],E,[I].concat(_toConsumableArray3(R)),I,O)}return Array.isArray(S.errors)&&S.errors.forEach(function(S,k){if(isInstanceOf(S,Error)){applyExceptionGroupFieldsForParentException(T,M);var I=e(l,S),O=R.length;applyExceptionGroupFieldsForChildException(I,"errors[".concat(k,"]"),O,M),R=aggregateExceptionsFromError(e,l,_,S,E,[I].concat(_toConsumableArray3(R)),I,O)}}),R}function applyExceptionGroupFieldsForParentException(e,l){e.mechanism=_objectSpread2(_objectSpread2(_objectSpread2({handled:!0,type:"auto.core.linked_errors"},e.mechanism),"AggregateError"===e.type&&{is_exception_group:!0}),{},{exception_id:l})}function applyExceptionGroupFieldsForChildException(e,l,_,S){e.mechanism=_objectSpread2(_objectSpread2({handled:!0},e.mechanism),{},{type:"chained",source:l,exception_id:_,parent_id:S})}function instrumentConsole(){"console"in H&&W.forEach(function(e){e in H.console&&fill(H.console,e,function(l){return q[e]=l,function(){for(var l=arguments.length,_=new Array(l),S=0;S<l;S++)_[S]=arguments[S];triggerHandlers("console",{args:_,level:e});var E=q[e];null==E||E.apply(H.console,_)}})})}function severityLevelFromString(e){return"warn"===e?"warning":["fatal","error","warning","log","info","debug"].includes(e)?e:"log"}var dedupeIntegration=function(){var e;return{name:"Dedupe",processEvent:function(l){if(l.type)return l;try{if(function(e,l){if(!l)return!1;if(function(e,l){var _=e.message,S=l.message;if(!_&&!S)return!1;if(_&&!S||!_&&S)return!1;if(_!==S)return!1;if(!_isSameFingerprint(e,l))return!1;if(!_isSameStacktrace(e,l))return!1;return!0}(e,l))return!0;if(function(e,l){var _=_getExceptionFromEvent(l),S=_getExceptionFromEvent(e);if(!_||!S)return!1;if(_.type!==S.type||_.value!==S.value)return!1;if(!_isSameFingerprint(e,l))return!1;if(!_isSameStacktrace(e,l))return!1;return!0}(e,l))return!0;return!1}(l,e))return G&&X.warn("Event dropped due to being a duplicate of previously captured event."),null}catch(_){}return e=l}}};function _isSameStacktrace(e,l){var _=getFramesFromEvent(e),S=getFramesFromEvent(l);if(!_&&!S)return!0;if(_&&!S||!_&&S)return!1;if(S.length!==_.length)return!1;for(var E=0;E<S.length;E++){var k=S[E],T=_[E];if(k.filename!==T.filename||k.lineno!==T.lineno||k.colno!==T.colno||k.function!==T.function)return!1}return!0}function _isSameFingerprint(e,l){var _=e.fingerprint,S=l.fingerprint;if(!_&&!S)return!0;if(_&&!S||!_&&S)return!1;try{return!(_.join("")!==S.join(""))}catch(E){return!1}}function _getExceptionFromEvent(e){var l;return null===(l=e.exception)||void 0===l||null===(l=l.values)||void 0===l?void 0:l[0]}function getBreadcrumbLogLevelFromHttpStatusCode(e){return void 0===e?void 0:e>=400&&e<500?"warning":e>=500?"error":void 0}var Le=H;function isNativeFunction(e){return e&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function supportsNativeFetch(){if("string"==typeof EdgeRuntime)return!0;if(!function(){if(!("fetch"in Le))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch(e){return!1}}())return!1;if(isNativeFunction(Le.fetch))return!0;var e=!1,l=Le.document;if(l&&"function"==typeof l.createElement)try{var _,S=l.createElement("iframe");S.hidden=!0,l.head.appendChild(S),null!==(_=S.contentWindow)&&void 0!==_&&_.fetch&&(e=isNativeFunction(S.contentWindow.fetch)),l.head.removeChild(S)}catch(E){G&&X.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",E)}return e}function addFetchInstrumentationHandler(e,l){var _="fetch";addHandler(_,e),maybeInstrument(_,function(){return function(e){var l=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(l&&!supportsNativeFetch())return;fill(H,"fetch",function(e){return function(){for(var l=new Error,_=arguments.length,S=new Array(_),E=0;E<_;E++)S[E]=arguments[E];var k=function(e){if(0===e.length)return{method:"GET",url:""};if(2===e.length){var l=_slicedToArray(e,2),_=l[0],S=l[1];return{url:getUrlFromResource(_),method:hasProp(S,"method")?String(S.method).toUpperCase():"GET"}}var E=e[0];return{url:getUrlFromResource(E),method:hasProp(E,"method")?String(E.method).toUpperCase():"GET"}}(S),T={args:S,fetchData:{method:k.method,url:k.url},startTimestamp:1e3*timestampInSeconds(),virtualError:l,headers:getHeadersFromFetchArgs(S)};return triggerHandlers("fetch",_objectSpread2({},T)),e.apply(H,S).then(function(){var e=_asyncToGenerator(_regenerator().m(function _callee5(e){return _regenerator().w(function(l){for(;;)if(0===l.n)return triggerHandlers("fetch",_objectSpread2(_objectSpread2({},T),{},{endTimestamp:1e3*timestampInSeconds(),response:e})),l.a(2,e)},_callee5)}));return function(l){return e.apply(this,arguments)}}(),function(e){if(triggerHandlers("fetch",_objectSpread2(_objectSpread2({},T),{},{endTimestamp:1e3*timestampInSeconds(),error:e})),isError(e)&&void 0===e.stack&&(e.stack=l.stack,addNonEnumerableProperty(e,"framesToPop",1)),e instanceof TypeError&&("Failed to fetch"===e.message||"Load failed"===e.message||"NetworkError when attempting to fetch resource."===e.message))try{var _=new URL(T.fetchData.url);e.message="".concat(e.message," (").concat(_.host,")")}catch(S){}throw e})}})}(void 0,l)})}function hasProp(e,l){return!!e&&"object"===_typeof3(e)&&!!e[l]}function getUrlFromResource(e){return"string"==typeof e?e:e?hasProp(e,"url")?e.url:e.toString?e.toString():"":""}function getHeadersFromFetchArgs(e){var l,_=_slicedToArray(e,2),S=_[0],E=_[1];try{if("object"===_typeof3(E)&&null!==E&&"headers"in E&&E.headers)return new Headers(E.headers);if(l=S,"undefined"!=typeof Request&&isInstanceOf(l,Request))return new Headers(S.headers)}catch(k){}}var Ue=H,Fe=0;function shouldIgnoreOnError(){return Fe>0}function wrap$1(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!function(e){return"function"==typeof e}(e))return e;try{var _=e.__sentry_wrapped__;if(_)return"function"==typeof _?_:e;if(getOriginalFunction(e))return e}catch(E){return e}var sentryWrapped=function(){for(var _=arguments.length,S=new Array(_),E=0;E<_;E++)S[E]=arguments[E];try{var k=S.map(function(e){return wrap$1(e,l)});return e.apply(this,k)}catch(T){throw Fe++,setTimeout(function(){Fe--}),withScope(function(e){e.addEventProcessor(function(e){return l.mechanism&&(addExceptionTypeValue(e,void 0),addExceptionMechanism(e,l.mechanism)),e.extra=_objectSpread2(_objectSpread2({},e.extra),{},{arguments:S}),e}),captureException(T)}),T}};try{for(var S in e)Object.prototype.hasOwnProperty.call(e,S)&&(sentryWrapped[S]=e[S])}catch(k){}markFunctionWrapped(sentryWrapped,e),addNonEnumerableProperty(e,"__sentry_wrapped__",sentryWrapped);try{Object.getOwnPropertyDescriptor(sentryWrapped,"name").configurable&&Object.defineProperty(sentryWrapped,"name",{get:function(){return e.name}})}catch(T){}return sentryWrapped}function exceptionFromError(e,l){var _=parseStackFrames(e,l),S={type:extractType(l),value:extractMessage(l)};return _.length&&(S.stacktrace={frames:_}),void 0===S.type&&""===S.value&&(S.value="Unrecoverable error caught"),S}function eventFromPlainObject(e,l,_,S){var E=getClient(),k=null==E?void 0:E.getOptions().normalizeDepth,T=function(e){for(var l in e)if(Object.prototype.hasOwnProperty.call(e,l)){var _=e[l];if(_ instanceof Error)return _}return}(l),M={__serialized__:normalizeToSize(l,k)};if(T)return{exception:{values:[exceptionFromError(e,T)]},extra:M};var R={exception:{values:[{type:isEvent(l)?l.constructor.name:S?"UnhandledRejection":"Error",value:getNonErrorObjectExceptionValue(l,{isUnhandledRejection:S})}]},extra:M};if(_){var I=parseStackFrames(e,_);I.length&&(R.exception.values[0].stacktrace={frames:I})}return R}function eventFromError(e,l){return{exception:{values:[exceptionFromError(e,l)]}}}function parseStackFrames(e,l){var _=l.stacktrace||l.stack||"",S=function(e){if(e&&Ne.test(e.message))return 1;return 0}(l),E=function(e){if("number"==typeof e.framesToPop)return e.framesToPop;return 0}(l);try{return e(_,S,E)}catch(k){}return[]}var Ne=/Minified React error #\d+;/i;function isWebAssemblyException(e){return"undefined"!=typeof WebAssembly&&void 0!==WebAssembly.Exception&&e instanceof WebAssembly.Exception}function extractType(e){var l=null==e?void 0:e.name;return!l&&isWebAssemblyException(e)?e.message&&Array.isArray(e.message)&&2==e.message.length?e.message[0]:"WebAssembly.Exception":l}function extractMessage(e){var l=null==e?void 0:e.message;return isWebAssemblyException(e)?Array.isArray(e.message)&&2==e.message.length?e.message[1]:"wasm exception":l?l.error&&"string"==typeof l.error.message?l.error.message:l:"No error message"}function eventFromUnknownInput(e,l,_,S,E){var k;if(isErrorEvent$1(l)&&l.error)return eventFromError(e,l.error);if(isDOMError(l)||isBuiltin(l,"DOMException")){var T=l;if("stack"in l)k=eventFromError(e,l);else{var M=T.name||(isDOMError(T)?"DOMError":"DOMException"),R=T.message?"".concat(M,": ").concat(T.message):M;addExceptionTypeValue(k=eventFromString(e,R,_,S),R)}return"code"in T&&(k.tags=_objectSpread2(_objectSpread2({},k.tags),{},{"DOMException.code":"".concat(T.code)})),k}return isError(l)?eventFromError(e,l):isPlainObject$2(l)||isEvent(l)?(addExceptionMechanism(k=eventFromPlainObject(e,l,_,E),{synthetic:!0}),k):(addExceptionTypeValue(k=eventFromString(e,l,_,S),"".concat(l)),addExceptionMechanism(k,{synthetic:!0}),k)}function eventFromString(e,l,_,S){var E={};if(S&&_){var k=parseStackFrames(e,_);k.length&&(E.exception={values:[{value:l,stacktrace:{frames:k}}]}),addExceptionMechanism(E,{synthetic:!0})}if(isParameterizedString(l)){var T=l.__sentry_template_string__,M=l.__sentry_template_values__;return E.logentry={message:T,params:M},E}return E.message=l,E}function getNonErrorObjectExceptionValue(e,l){var _=l.isUnhandledRejection,S=function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:40,_=Object.keys(convertToPlainObject(e));_.sort();var S=_[0];if(!S)return"[object has no keys]";if(S.length>=l)return truncate(S,l);for(var E=_.length;E>0;E--){var k=_.slice(0,E).join(", ");if(!(k.length>l))return E===_.length?k:truncate(k,l)}return""}(e),E=_?"promise rejection":"exception";if(isErrorEvent$1(e))return"Event `ErrorEvent` captured as ".concat(E," with message `").concat(e.message,"`");if(isEvent(e)){var k=function(e){try{var l=Object.getPrototypeOf(e);return l?l.constructor.name:void 0}catch(_){}}(e);return"Event `".concat(k,"` (type=").concat(e.type,") captured as ").concat(E)}return"Object captured as ".concat(E," with keys: ").concat(S)}var Be=function(e){function BrowserClient(e){var l,_;_classCallCheck3(this,BrowserClient);var S,E,k=(S=e,_objectSpread2({release:"string"==typeof __SENTRY_RELEASE__?__SENTRY_RELEASE__:null===(E=Ue.SENTRY_RELEASE)||void 0===E?void 0:E.id,sendClientReports:!0,parentSpanIsAlwaysRootSpan:!0},S));applySdkMetadata(k,"browser",["browser"],Ue.SENTRY_SDK_SOURCE||"npm"),null!==(l=k._metadata)&&void 0!==l&&l.sdk&&(k._metadata.sdk.settings=_objectSpread2({infer_ip:k.sendDefaultPii?"auto":"never"},k._metadata.sdk.settings));var T=(_=_callSuper(this,BrowserClient,[k]))._options,M=T.sendDefaultPii,R=T.sendClientReports,I=T.enableLogs;return Ue.document&&(R||I)&&Ue.document.addEventListener("visibilitychange",function(){"hidden"===Ue.document.visibilityState&&(R&&_._flushOutcomes(),I&&_INTERNAL_flushLogsBuffer(_))}),I&&(_.on("flush",function(){_INTERNAL_flushLogsBuffer(_)}),_.on("afterCaptureLog",function(){_._logFlushIdleTimeout&&clearTimeout(_._logFlushIdleTimeout),_._logFlushIdleTimeout=setTimeout(function(){_INTERNAL_flushLogsBuffer(_)},5e3)})),M&&_.on("beforeSendSession",addAutoIpAddressToSession),_}return _inherits(BrowserClient,e),_createClass3(BrowserClient,[{key:"eventFromException",value:function(e,l){return function(e,l,_,S){var E=eventFromUnknownInput(e,l,(null==_?void 0:_.syntheticException)||void 0,S);return addExceptionMechanism(E),E.level="error",null!=_&&_.event_id&&(E.event_id=_.event_id),resolvedSyncPromise(E)}(this._options.stackParser,e,l,this._options.attachStacktrace)}},{key:"eventFromMessage",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",_=arguments.length>2?arguments[2]:void 0;return function(e,l){var _=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"info",S=arguments.length>3?arguments[3]:void 0,E=arguments.length>4?arguments[4]:void 0,k=eventFromString(e,l,(null==S?void 0:S.syntheticException)||void 0,E);return k.level=_,null!=S&&S.event_id&&(k.event_id=S.event_id),resolvedSyncPromise(k)}(this._options.stackParser,e,l,_,this._options.attachStacktrace)}},{key:"_prepareEvent",value:function(e,l,_,S){return e.platform=e.platform||"javascript",_superPropGet(BrowserClient,"_prepareEvent",this,3)([e,l,_,S])}}])}(Te);var ze,je,Ge,He,Ve="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,We=H;function instrumentDOM(){if(We.document){var e=triggerHandlers.bind(null,"dom"),l=makeDOMEventHandler(e,!0);We.document.addEventListener("click",l,!1),We.document.addEventListener("keypress",l,!1),["EventTarget","Node"].forEach(function(l){var _,S,E=null===(_=We[l])||void 0===_?void 0:_.prototype;null!=E&&null!==(S=E.hasOwnProperty)&&void 0!==S&&S.call(E,"addEventListener")&&(fill(E,"addEventListener",function(l){return function(_,S,E){if("click"===_||"keypress"==_)try{var k=this.__sentry_instrumentation_handlers__=this.__sentry_instrumentation_handlers__||{},T=k[_]=k[_]||{refCount:0};if(!T.handler){var M=makeDOMEventHandler(e);T.handler=M,l.call(this,_,M,E)}T.refCount++}catch(R){}return l.call(this,_,S,E)}}),fill(E,"removeEventListener",function(e){return function(l,_,S){if("click"===l||"keypress"==l)try{var E=this.__sentry_instrumentation_handlers__||{},k=E[l];k&&(k.refCount--,k.refCount<=0&&(e.call(this,l,k.handler,S),k.handler=void 0,delete E[l]),0===Object.keys(E).length&&delete this.__sentry_instrumentation_handlers__)}catch(T){}return e.call(this,l,_,S)}}))})}}function makeDOMEventHandler(e){var l=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(_){if(_&&!_._sentryCaptured){var S=function(e){try{return e.target}catch(l){return null}}(_);if(!function(e,l){return"keypress"===e&&(null==l||!l.tagName||"INPUT"!==l.tagName&&"TEXTAREA"!==l.tagName&&!l.isContentEditable)}(_.type,S)){addNonEnumerableProperty(_,"_sentryCaptured",!0),S&&!S._sentryId&&addNonEnumerableProperty(S,"_sentryId",uuid4());var E="keypress"===_.type?"input":_.type;if(!function(e){if(e.type!==je)return!1;try{if(!e.target||e.target._sentryId!==Ge)return!1}catch(l){}return!0}(_))e({event:_,name:E,global:l}),je=_.type,Ge=S?S._sentryId:void 0;clearTimeout(ze),ze=We.setTimeout(function(){Ge=void 0,je=void 0},1e3)}}}}function addHistoryInstrumentationHandler(e){var l="history";addHandler(l,e),maybeInstrument(l,instrumentHistory)}function instrumentHistory(){function historyReplacementFunction(e){return function(){for(var l=arguments.length,_=new Array(l),S=0;S<l;S++)_[S]=arguments[S];var E=_.length>2?_[2]:void 0;if(E){var k=He,T=function(e){try{return new URL(e,We.location.origin).toString()}catch(l){return e}}(String(E));if(He=T,k===T)return e.apply(this,_);triggerHandlers("history",{from:k,to:T})}return e.apply(this,_)}}We.addEventListener("popstate",function(){var e=We.location.href,l=He;(He=e,l!==e)&&triggerHandlers("history",{from:l,to:e})}),"history"in Le&&Le.history&&(fill(We.history,"pushState",historyReplacementFunction),fill(We.history,"replaceState",historyReplacementFunction))}var qe={};function clearCachedImplementation(e){qe[e]=void 0}var Xe="__sentry_xhr_v3__";function instrumentXHR(){if(We.XMLHttpRequest){var e=XMLHttpRequest.prototype;e.open=new Proxy(e.open,{apply:function(e,l,_){var S=new Error,E=1e3*timestampInSeconds(),k=isString$1(_[0])?_[0].toUpperCase():void 0,T=function(e){if(isString$1(e))return e;try{return e.toString()}catch(l){}return}(_[1]);if(!k||!T)return e.apply(l,_);l[Xe]={method:k,url:T,request_headers:{}},"POST"===k&&T.match(/sentry_key/)&&(l.__sentry_own_request__=!0);var onreadystatechangeHandler=function(){var e=l[Xe];if(e&&4===l.readyState){try{e.status_code=l.status}catch(_){}triggerHandlers("xhr",{endTimestamp:1e3*timestampInSeconds(),startTimestamp:E,xhr:l,virtualError:S})}};return"onreadystatechange"in l&&"function"==typeof l.onreadystatechange?l.onreadystatechange=new Proxy(l.onreadystatechange,{apply:function(e,l,_){return onreadystatechangeHandler(),e.apply(l,_)}}):l.addEventListener("readystatechange",onreadystatechangeHandler),l.setRequestHeader=new Proxy(l.setRequestHeader,{apply:function(e,l,_){var S=_slicedToArray(_,2),E=S[0],k=S[1],T=l[Xe];return T&&isString$1(E)&&isString$1(k)&&(T.request_headers[E.toLowerCase()]=k),e.apply(l,_)}}),e.apply(l,_)}}),e.send=new Proxy(e.send,{apply:function(e,l,_){var S=l[Xe];return S?(void 0!==_[0]&&(S.body=_[0]),triggerHandlers("xhr",{startTimestamp:1e3*timestampInSeconds(),xhr:l}),e.apply(l,_)):e.apply(l,_)}})}}function makeFetchTransport(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){var l=qe[e];if(l)return l;var _=We[e];if(isNativeFunction(_))return qe[e]=_.bind(We);var S=We.document;if(S&&"function"==typeof S.createElement)try{var E=S.createElement("iframe");E.hidden=!0,S.head.appendChild(E);var k=E.contentWindow;null!=k&&k[e]&&(_=k[e]),S.head.removeChild(E)}catch(oo){Ve&&X.warn("Could not create sandbox iframe for ".concat(e," check, bailing to window.").concat(e,": "),oo)}return _?qe[e]=_.bind(We):_}("fetch"),_=0,S=0;function _makeRequest(){return(_makeRequest=_asyncToGenerator(_regenerator().m(function _callee6(E){var k,T,M,R;return _regenerator().w(function(I){for(;;)switch(I.p=I.n){case 0:return k=E.body.length,_+=k,S++,T=_objectSpread2({body:E.body,method:"POST",referrerPolicy:"strict-origin",headers:e.headers,keepalive:_<=6e4&&S<15},e.fetchOptions),I.p=1,I.n=2,l(e.url,T);case 2:return M=I.v,I.a(2,{statusCode:M.status,headers:{"x-sentry-rate-limits":M.headers.get("X-Sentry-Rate-Limits"),"retry-after":M.headers.get("Retry-After")}});case 3:throw I.p=3,R=I.v,clearCachedImplementation("fetch"),R;case 4:return I.p=4,_-=k,S--,I.f(4);case 5:return I.a(2)}},_callee6,null,[[1,3,4,5]])}))).apply(this,arguments)}return createTransport(e,function(e){return _makeRequest.apply(this,arguments)})}function createFrame(e,l,_,S){var E={filename:e,function:"<anonymous>"===l?Y:l,in_app:!0};return void 0!==_&&(E.lineno=_),void 0!==S&&(E.colno=S),E}var Ke=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,Ye=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,Je=/\((\S*)(?::(\d+))(?::(\d+))\)/,Qe=/at (.+?) ?\(data:(.+?),/,Ze=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,$e=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,et=[[30,function(e){var l=e.match(Qe);if(l)return{filename:"<data:".concat(l[2],">"),function:l[1]};var _=Ke.exec(e);if(_){var S=_slicedToArray(_,4),E=S[1],k=S[2],T=S[3];return createFrame(E,Y,+k,+T)}var M=Ye.exec(e);if(M){if(M[2]&&0===M[2].indexOf("eval")){var R=Je.exec(M[2]);R&&(M[2]=R[1],M[3]=R[2],M[4]=R[3])}var I=_slicedToArray(extractSafariExtensionDetails(M[1]||Y,M[2]),2),O=I[0];return createFrame(I[1],O,M[3]?+M[3]:void 0,M[4]?+M[4]:void 0)}}],[50,function(e){var l=Ze.exec(e);if(l){if(l[3]&&l[3].indexOf(" > eval")>-1){var _=$e.exec(l[3]);_&&(l[1]=l[1]||"eval",l[3]=_[1],l[4]=_[2],l[5]="")}var S=l[3],E=l[1]||Y,k=_slicedToArray(extractSafariExtensionDetails(E,S),2);return E=k[0],createFrame(S=k[1],E,l[4]?+l[4]:void 0,l[5]?+l[5]:void 0)}}]],tt=createStackParser.apply(void 0,et),extractSafariExtensionDetails=function(e,l){var _=-1!==e.indexOf("safari-extension"),S=-1!==e.indexOf("safari-web-extension");return _||S?[-1!==e.indexOf("@")?e.split("@")[0]:Y,_?"safari-extension:".concat(l):"safari-web-extension:".concat(l)]:[e,l]},nt="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,rt=1024,breadcrumbsIntegration=function(){var e=_objectSpread2({console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0},arguments.length>0&&void 0!==arguments[0]?arguments[0]:{});return{name:"Breadcrumbs",setup:function(l){var _,S;e.console&&(_=function(e){return function(l){if(getClient()===e){var _={category:"console",data:{arguments:l.args,logger:"console"},level:severityLevelFromString(l.level),message:safeJoin(l.args," ")};if("assert"===l.level){if(!1!==l.args[0])return;_.message="Assertion failed: ".concat(safeJoin(l.args.slice(1)," ")||"console.assert"),_.data.arguments=l.args.slice(1)}addBreadcrumb(_,{input:l.args,level:l.level})}}}(l),addHandler(S="console",_),maybeInstrument(S,instrumentConsole)),e.dom&&function(e){addHandler("dom",e),maybeInstrument("dom",instrumentDOM)}(function(e,l){return function(_){if(getClient()===e){var S,E,k="object"===_typeof3(l)?l.serializeAttribute:void 0,T="object"===_typeof3(l)&&"number"==typeof l.maxStringLength?l.maxStringLength:void 0;T&&T>rt&&(nt&&X.warn("`dom.maxStringLength` cannot exceed ".concat(rt,", but a value of ").concat(T," was configured. Sentry will use ").concat(rt," instead.")),T=rt),"string"==typeof k&&(k=[k]);try{var M=_.event,R=function(e){return!!e&&!!e.target}(M)?M.target:M;S=htmlTreeAsString(R,{keyAttrs:k,maxStringLength:T}),E=function(e){if(!ie.HTMLElement)return null;for(var l=e,_=0;_<5;_++){if(!l)return null;if(l instanceof HTMLElement){if(l.dataset.sentryComponent)return l.dataset.sentryComponent;if(l.dataset.sentryElement)return l.dataset.sentryElement}l=l.parentNode}return null}(R)}catch(O){S="<unknown>"}if(0!==S.length){var I={category:"ui.".concat(_.name),message:S};E&&(I.data={"ui.component_name":E}),addBreadcrumb(I,{event:_.event,name:_.name,global:_.global})}}}}(l,e.dom)),e.xhr&&function(e){addHandler("xhr",e),maybeInstrument("xhr",instrumentXHR)}(function(e){return function(l){if(getClient()===e){var _=l.startTimestamp,S=l.endTimestamp,E=l.xhr[Xe];if(_&&S&&E){var k=E.method,T=E.url,M=E.status_code,R=E.body,I={method:k,url:T,status_code:M},O={xhr:l.xhr,input:R,startTimestamp:_,endTimestamp:S},D={category:"xhr",data:I,type:"http",level:getBreadcrumbLogLevelFromHttpStatusCode(M)};e.emit("beforeOutgoingRequestBreadcrumb",D,O),addBreadcrumb(D,O)}}}}(l)),e.fetch&&addFetchInstrumentationHandler(function(e){return function(l){if(getClient()===e){var _=l.startTimestamp,S=l.endTimestamp;if(S&&(!l.fetchData.url.match(/sentry_key/)||"POST"!==l.fetchData.method))if(l.fetchData.method,l.fetchData.url,l.error){var E=l.fetchData,k={data:l.error,input:l.args,startTimestamp:_,endTimestamp:S},T={category:"fetch",data:E,level:"error",type:"http"};e.emit("beforeOutgoingRequestBreadcrumb",T,k),addBreadcrumb(T,k)}else{var M=l.response,R=_objectSpread2(_objectSpread2({},l.fetchData),{},{status_code:null==M?void 0:M.status});l.fetchData.request_body_size,l.fetchData.response_body_size,null==M||M.status;var I={input:l.args,response:M,startTimestamp:_,endTimestamp:S},O={category:"fetch",data:R,type:"http",level:getBreadcrumbLogLevelFromHttpStatusCode(R.status_code)};e.emit("beforeOutgoingRequestBreadcrumb",O,I),addBreadcrumb(O,I)}}}}(l)),e.history&&addHistoryInstrumentationHandler(function(e){return function(l){var _;if(getClient()===e){var S=l.from,E=l.to,k=parseUrl(Ue.location.href),T=S?parseUrl(S):void 0,M=parseUrl(E);null!==(_=T)&&void 0!==_&&_.path||(T=k),k.protocol===M.protocol&&k.host===M.host&&(E=M.relative),k.protocol===T.protocol&&k.host===T.host&&(S=T.relative),addBreadcrumb({category:"navigation",data:{from:S,to:E}})}}}(l)),e.sentry&&l.on("beforeSendEvent",function(e){return function(l){getClient()===e&&addBreadcrumb({category:"sentry.".concat("transaction"===l.type?"transaction":"event"),event_id:l.event_id,level:l.level,message:getEventDescription(l)},{event:l})}}(l))}}};var it=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],browserApiErrorsIntegration=function(){var e=_objectSpread2({XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,unregisterOriginalCallbacks:!1},arguments.length>0&&void 0!==arguments[0]?arguments[0]:{});return{name:"BrowserApiErrors",setupOnce:function(){e.setTimeout&&fill(Ue,"setTimeout",_wrapTimeFunction),e.setInterval&&fill(Ue,"setInterval",_wrapTimeFunction),e.requestAnimationFrame&&fill(Ue,"requestAnimationFrame",_wrapRAF),e.XMLHttpRequest&&"XMLHttpRequest"in Ue&&fill(XMLHttpRequest.prototype,"send",_wrapXHR);var l=e.eventTarget;l&&(Array.isArray(l)?l:it).forEach(function(l){return function(e,l){var _,S,E=Ue,k=null===(_=E[e])||void 0===_?void 0:_.prototype;if(null==k||null===(S=k.hasOwnProperty)||void 0===S||!S.call(k,"addEventListener"))return;fill(k,"addEventListener",function(_){return function(S,E,k){try{"function"==typeof E.handleEvent&&(E.handleEvent=wrap$1(E.handleEvent,{mechanism:{data:{handler:getFunctionName(E),target:e},handled:!1,type:"auto.browser.browserapierrors.handleEvent"}}))}catch(T){}return l.unregisterOriginalCallbacks&&function(e,l,_){e&&"object"===_typeof3(e)&&"removeEventListener"in e&&"function"==typeof e.removeEventListener&&e.removeEventListener(l,_)}(this,S,E),_.apply(this,[S,wrap$1(E,{mechanism:{data:{handler:getFunctionName(E),target:e},handled:!1,type:"auto.browser.browserapierrors.addEventListener"}}),k])}}),fill(k,"removeEventListener",function(e){return function(l,_,S){try{var E=_.__sentry_wrapped__;E&&e.call(this,l,E,S)}catch(k){}return e.call(this,l,_,S)}})}(l,e)})}}};function _wrapTimeFunction(e){return function(){for(var l=arguments.length,_=new Array(l),S=0;S<l;S++)_[S]=arguments[S];var E=_[0];return _[0]=wrap$1(E,{mechanism:{handled:!1,type:"auto.browser.browserapierrors.".concat(getFunctionName(e))}}),e.apply(this,_)}}function _wrapRAF(e){return function(l){return e.apply(this,[wrap$1(l,{mechanism:{data:{handler:getFunctionName(e)},handled:!1,type:"auto.browser.browserapierrors.requestAnimationFrame"}})])}}function _wrapXHR(e){return function(){var l=this;["onload","onerror","onprogress","onreadystatechange"].forEach(function(e){e in l&&"function"==typeof l[e]&&fill(l,e,function(l){var _={mechanism:{data:{handler:getFunctionName(l)},handled:!1,type:"auto.browser.browserapierrors.xhr.".concat(e)}},S=getOriginalFunction(l);return S&&(_.mechanism.data.handler=getFunctionName(S)),wrap$1(l,_)})});for(var _=arguments.length,S=new Array(_),E=0;E<_;E++)S[E]=arguments[E];return e.apply(this,S)}}var browserSessionIntegration=function(){return{name:"BrowserSession",setupOnce:function(){void 0!==Ue.document?(startSession({ignoreDuration:!0}),captureSession(),addHistoryInstrumentationHandler(function(e){var l=e.from,_=e.to;void 0!==l&&l!==_&&(startSession({ignoreDuration:!0}),captureSession())})):nt&&X.warn("Using the `browserSessionIntegration` in non-browser environments is not supported.")}}},globalHandlersIntegration=function(){var e=_objectSpread2({onerror:!0,onunhandledrejection:!0},arguments.length>0&&void 0!==arguments[0]?arguments[0]:{});return{name:"GlobalHandlers",setupOnce:function(){Error.stackTraceLimit=50},setup:function(l){e.onerror&&(!function(e){l=function(l){var _=getOptions(),S=_.stackParser,E=_.attachStacktrace;if(getClient()===e&&!shouldIgnoreOnError()){var k=l.msg,T=l.url,M=l.line,R=l.column,I=l.error,O=function(e,l,_,S){var E,k=e.exception=e.exception||{},T=k.values=k.values||[],M=T[0]=T[0]||{},R=M.stacktrace=M.stacktrace||{},I=R.frames=R.frames||[],O=S,D=_,L=null!==(E=function(e){if(isString$1(e)&&0!==e.length){if(e.startsWith("data:")){var l=e.match(/^data:([^;]+)/),_=l?l[1]:"text/javascript",S=e.includes("base64,");return"<data:".concat(_).concat(S?",base64":"",">")}return e.slice(0,1024)}}(l))&&void 0!==E?E:getLocationHref();return 0===I.length&&I.push({colno:O,filename:L,function:Y,in_app:!0,lineno:D}),e}(eventFromUnknownInput(S,I||k,void 0,E,!1),T,M,R);O.level="error",captureEvent(O,{originalException:I,mechanism:{handled:!1,type:"auto.browser.global_handlers.onerror"}})}},_="error",addHandler(_,l),maybeInstrument(_,instrumentError);var l,_}(l),globalHandlerLog("onerror")),e.onunhandledrejection&&(!function(e){l=function(l){var _=getOptions(),S=_.stackParser,E=_.attachStacktrace;if(getClient()===e&&!shouldIgnoreOnError()){var k=function(e){if(isPrimitive(e))return e;try{if("reason"in e)return e.reason;if("detail"in e&&"reason"in e.detail)return e.detail.reason}catch(l){}return e}(l),T=isPrimitive(k)?{exception:{values:[{type:"UnhandledRejection",value:"Non-Error promise rejection captured with value: ".concat(String(k))}]}}:eventFromUnknownInput(S,k,void 0,E,!0);T.level="error",captureEvent(T,{originalException:k,mechanism:{handled:!1,type:"auto.browser.global_handlers.onunhandledrejection"}})}},_="unhandledrejection",addHandler(_,l),maybeInstrument(_,instrumentUnhandledRejection);var l,_}(l),globalHandlerLog("onunhandledrejection"))}}};function globalHandlerLog(e){nt&&X.log("Global Handler attached: ".concat(e))}function getOptions(){var e=getClient();return(null==e?void 0:e.getOptions())||{stackParser:function(){return[]},attachStacktrace:!1}}var httpContextIntegration=function(){return{name:"HttpContext",preprocessEvent:function(e){var l;if(Ue.navigator||Ue.location||Ue.document){var _,S,E,k=(_=getLocationHref(),S=(Ue.document||{}).referrer,E=(Ue.navigator||{}).userAgent,{url:_,headers:_objectSpread2(_objectSpread2({},S&&{Referer:S}),E&&{"User-Agent":E})}),T=_objectSpread2(_objectSpread2({},k.headers),null===(l=e.request)||void 0===l?void 0:l.headers);e.request=_objectSpread2(_objectSpread2(_objectSpread2({},k),e.request),{},{headers:T})}}}},linkedErrorsIntegration=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=e.limit||5,_=e.key||"cause";return{name:"LinkedErrors",preprocessEvent:function(e,S,E){applyAggregateErrorsToEvent(exceptionFromError,E.getOptions().stackParser,_,l,e,S)}}};var at,ot={exports:{}};var st=(at||(at=1,function(e){!function(l,_){e.exports=_()}(0,function(){return function(){var e={"./packages/@logrocket/console/src/index.js":
/*!**************************************************!*\
					  !*** ./packages/@logrocket/console/src/index.js ***!
					  \**************************************************/function(e,l,_){var S=_(/*! @babel/runtime/helpers/interopRequireDefault */"./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var E=S(_(/*! ./registerConsole */"./packages/@logrocket/console/src/registerConsole.js")).default;l.default=E},"./packages/@logrocket/console/src/registerConsole.js":
/*!************************************************************!*\
					  !*** ./packages/@logrocket/console/src/registerConsole.js ***!
					  \************************************************************/function(e,l,_){var S=_(/*! @babel/runtime/helpers/interopRequireDefault */"./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(l,"__esModule",{value:!0}),l.default=function(e){var l=[];return["log","warn","info","error","debug"].forEach(function(_){l.push((0,k.default)(console,_,function(){for(var l=arguments.length,S=new Array(l),k=0;k<l;k++)S[k]=arguments[k];e.addEvent("lr.core.LogEvent",function(){var l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},k=l.isEnabled;if("object"===(0,E.default)(k)&&!1===k[_]||!1===k)return null;if("error"===_&&l.shouldAggregateConsoleErrors)if(S&&S.length>=2&&"ERROR"===S[0]){var M="";try{M=" ".concat(S[1])}catch(R){}T.Capture.captureMessage(e,"".concat(S[0]).concat(M),S,{},!0)}else T.Capture.captureMessage(e,S[0],S,{},!0);return{logLevel:_.toUpperCase(),args:S}})}))}),function(){l.forEach(function(e){return e()})}};var E=S(_(/*! @babel/runtime/helpers/typeof */"./node_modules/@babel/runtime/helpers/typeof.js")),k=S(_(/*! @logrocket/utils/src/enhanceFunc */"./packages/@logrocket/utils/src/enhanceFunc.ts")),T=_(/*! @logrocket/exceptions */"./packages/@logrocket/exceptions/src/index.js")},"./packages/@logrocket/exceptions/src/Capture.js":
/*!*******************************************************!*\
					  !*** ./packages/@logrocket/exceptions/src/Capture.js ***!
					  \*******************************************************/function(e,l,_){var S=_(/*! @babel/runtime/helpers/interopRequireDefault */"./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(l,"__esModule",{value:!0}),l.captureMessage=function(e,l,_){var S=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},k=arguments.length>4&&void 0!==arguments[4]&&arguments[4],T={exceptionType:k?"CONSOLE":"MESSAGE",message:l,messageArgs:_,browserHref:window.location?window.location.href:""};(0,E.scrubException)(T,S),e.addEvent("lr.core.Exception",function(){return T})},l.captureException=function(e,l){var _=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},S=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,M=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"WINDOW",R=S||k.default.computeStackTrace(l),I={exceptionType:M,errorType:R.name,message:R.message,browserHref:window.location?window.location.href:""};(0,E.scrubException)(I,_);var O={_stackTrace:(0,T.default)(R)};e.addEvent("lr.core.Exception",function(){return I},O)};var E=_(/*! @logrocket/utils/src/scrubException */"./packages/@logrocket/utils/src/scrubException.ts"),k=S(_(/*! @logrocket/utils/src/TraceKit */"./packages/@logrocket/utils/src/TraceKit.js")),T=S(_(/*! ./stackTraceFromError */"./packages/@logrocket/exceptions/src/stackTraceFromError.js"))},"./packages/@logrocket/exceptions/src/index.js":
/*!*****************************************************!*\
					  !*** ./packages/@logrocket/exceptions/src/index.js ***!
					  \*****************************************************/function(e,l,_){var S=_(/*! @babel/runtime/helpers/interopRequireDefault */"./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),E=_(/*! @babel/runtime/helpers/typeof */"./node_modules/@babel/runtime/helpers/typeof.js");Object.defineProperty(l,"__esModule",{value:!0}),Object.defineProperty(l,"registerExceptions",{enumerable:!0,get:function(){return k.default}}),l.Capture=void 0;var k=S(_(/*! ./registerExceptions */"./packages/@logrocket/exceptions/src/registerExceptions.js")),T=function(e,l){if(e&&e.__esModule)return e;if(null===e||"object"!==E(e)&&"function"!=typeof e)return{default:e};var _=_getRequireWildcardCache(l);if(_&&_.has(e))return _.get(e);var S={},k=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var T in e)if("default"!==T&&Object.prototype.hasOwnProperty.call(e,T)){var M=k?Object.getOwnPropertyDescriptor(e,T):null;M&&(M.get||M.set)?Object.defineProperty(S,T,M):S[T]=e[T]}return S.default=e,_&&_.set(e,S),S}(_(/*! ./Capture */"./packages/@logrocket/exceptions/src/Capture.js"));function _getRequireWildcardCache(e){if("function"!=typeof WeakMap)return null;var l=new WeakMap,_=new WeakMap;return(_getRequireWildcardCache=function(e){return e?_:l})(e)}l.Capture=T},"./packages/@logrocket/exceptions/src/raven/raven.js":
/*!***********************************************************!*\
					  !*** ./packages/@logrocket/exceptions/src/raven/raven.js ***!
					  \***********************************************************/function(e,l,_){var S=_(/*! @babel/runtime/helpers/interopRequireDefault */"./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var E=S(_(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js")),k=S(_(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js")),T=S(_(/*! @logrocket/utils/src/TraceKit */"./packages/@logrocket/utils/src/TraceKit.js")),M=Object.prototype;function isFunction(e){return"function"==typeof e}function hasKey(e,l){return M.hasOwnProperty.call(e,l)}function fill(e,l,_,S){var E=e[l];e[l]=_(E),S&&S.push([e,l,E])}var R="undefined"!=typeof window?window:void 0!==_.g?_.g:"undefined"!=typeof self?self:{};R.document;var I=function(){function Handler(e){var l=e.captureException;(0,E.default)(this,Handler),this._errorHandler=this._errorHandler.bind(this),this._ignoreOnError=0,this._wrappedBuiltIns=[],this.captureException=l,T.default.report.subscribe(this._errorHandler),this._instrumentTryCatch()}return(0,k.default)(Handler,[{key:"uninstall",value:function(){var e;for(T.default.report.unsubscribe(this._errorHandler);this._wrappedBuiltIns.length;){var l=(e=this._wrappedBuiltIns.shift())[0],_=e[1],S=e[2];l[_]=S}}},{key:"_errorHandler",value:function(e){this._ignoreOnError||this.captureException(e)}},{key:"_ignoreNextOnError",value:function(){var e=this;this._ignoreOnError+=1,setTimeout(function(){e._ignoreOnError-=1})}},{key:"context",value:function(e,l,_){return isFunction(e)&&(_=l||[],l=e,e=void 0),this.wrap(e,l).apply(this,_)}},{key:"wrap",value:function(e,l,_){var S=this;if(void 0===l&&!isFunction(e))return e;if(isFunction(e)&&(l=e,e=void 0),!isFunction(l))return l;try{if(l.__lr__)return l;if(l.__lr_wrapper__)return l.__lr_wrapper__;if(!Object.isExtensible(l))return l}catch(oo){return l}function wrapped(){var E=[],k=arguments.length,M=!e||e&&!1!==e.deep;for(_&&isFunction(_)&&_.apply(this,arguments);k--;)E[k]=M?S.wrap(e,arguments[k]):arguments[k];try{return l.apply(this,E)}catch(oo){throw S._ignoreNextOnError(),S.captureException(T.default.computeStackTrace(oo),e),oo}}for(var E in l)hasKey(l,E)&&(wrapped[E]=l[E]);return wrapped.prototype=l.prototype,l.__lr_wrapper__=wrapped,wrapped.__lr__=!0,wrapped.__inner__=l,wrapped}},{key:"_instrumentTryCatch",value:function(){var e=this,l=e._wrappedBuiltIns;function wrapTimeFn(l){return function(_,S){for(var E=new Array(arguments.length),k=0;k<E.length;++k)E[k]=arguments[k];var T=E[0];return isFunction(T)&&(E[0]=e.wrap(T)),l.apply?l.apply(this,E):l(E[0],E[1])}}function wrapEventTarget(_){var S=R[_]&&R[_].prototype;S&&S.hasOwnProperty&&S.hasOwnProperty("addEventListener")&&(fill(S,"addEventListener",function(l){return function(_,S,E,k){try{S&&S.handleEvent&&(S.handleEvent=e.wrap(S.handleEvent))}catch(T){}return l.call(this,_,e.wrap(S,void 0,void 0),E,k)}},l),fill(S,"removeEventListener",function(e){return function(l,_,S,E){try{var k=null==_?void 0:_.__lr_wrapper__;k&&e.call(this,l,k,S,E)}catch(oo){}return e.call(this,l,_,S,E)}},void 0))}fill(R,"setTimeout",wrapTimeFn,l),fill(R,"setInterval",wrapTimeFn,l),R.requestAnimationFrame&&fill(R,"requestAnimationFrame",function(l){return function(_){return l(e.wrap(_))}},l);for(var _=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],S=0;S<_.length;S++)wrapEventTarget(_[S]);var E=R.jQuery||R.$;E&&E.fn&&E.fn.ready&&fill(E.fn,"ready",function(l){return function(_){return l.call(this,e.wrap(_))}},l)}}]),Handler}();l.default=I},"./packages/@logrocket/exceptions/src/registerExceptions.js":
/*!******************************************************************!*\
					  !*** ./packages/@logrocket/exceptions/src/registerExceptions.js ***!
					  \******************************************************************/function(e,l,_){var S=_(/*! @babel/runtime/helpers/interopRequireDefault */"./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),E=_(/*! @babel/runtime/helpers/typeof */"./node_modules/@babel/runtime/helpers/typeof.js");Object.defineProperty(l,"__esModule",{value:!0}),l.default=function(e){var l=new k.default({captureException:function(l){T.captureException(e,null,null,l)}}),rejectionHandler=function(l){l.reason instanceof Error?T.captureException(e,l.reason,null,null,"UNHANDLED_REJECTION"):e.addEvent("lr.core.Exception",function(){return{exceptionType:"UNHANDLED_REJECTION",message:l.reason||"Unhandled Promise rejection"}})};return window.addEventListener("unhandledrejection",rejectionHandler),function(){window.removeEventListener("unhandledrejection",rejectionHandler),l.uninstall()}};var k=S(_(/*! ./raven/raven */"./packages/@logrocket/exceptions/src/raven/raven.js")),T=function(e,l){if(e&&e.__esModule)return e;if(null===e||"object"!==E(e)&&"function"!=typeof e)return{default:e};var _=_getRequireWildcardCache(l);if(_&&_.has(e))return _.get(e);var S={},k=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var T in e)if("default"!==T&&Object.prototype.hasOwnProperty.call(e,T)){var M=k?Object.getOwnPropertyDescriptor(e,T):null;M&&(M.get||M.set)?Object.defineProperty(S,T,M):S[T]=e[T]}return S.default=e,_&&_.set(e,S),S}(_(/*! ./Capture */"./packages/@logrocket/exceptions/src/Capture.js"));function _getRequireWildcardCache(e){if("function"!=typeof WeakMap)return null;var l=new WeakMap,_=new WeakMap;return(_getRequireWildcardCache=function(e){return e?_:l})(e)}},"./packages/@logrocket/exceptions/src/stackTraceFromError.js":
/*!*******************************************************************!*\
					  !*** ./packages/@logrocket/exceptions/src/stackTraceFromError.js ***!
					  \*******************************************************************/function(e,l){Object.defineProperty(l,"__esModule",{value:!0}),l.default=function(e){function makeNotNull(e){return null===e?void 0:e}return e.stack?e.stack.map(function(e){return{lineNumber:makeNotNull(e.line),columnNumber:makeNotNull(e.column),fileName:makeNotNull(e.url),functionName:makeNotNull(e.func)}}):void 0}},"./packages/@logrocket/network/src/fetchIntercept.js":
/*!***********************************************************!*\
					  !*** ./packages/@logrocket/network/src/fetchIntercept.js ***!
					  \***********************************************************/function(e,l,_){var S=_(/*! @babel/runtime/helpers/interopRequireDefault */"./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var E=S(_(/*! @babel/runtime/helpers/toConsumableArray */"./node_modules/@babel/runtime/helpers/toConsumableArray.js")),k=_(/*! ./registerXHR */"./packages/@logrocket/network/src/registerXHR.js"),T=[];function makeInterceptor(e,l){for(var _=T.reduce(function(e,l){return[l].concat(e)},[]),S=arguments.length,M=new Array(S>2?S-2:0),R=2;R<S;R++)M[R-2]=arguments[R];var I=Promise.resolve(M);return _.forEach(function(e){var _=e.request,S=e.requestError;(_||S)&&(I=I.then(function(e){return _.apply(void 0,[l].concat((0,E.default)(e)))},function(e){return S.apply(void 0,[l].concat((0,E.default)(e)))}))}),I=I.then(function(l){var _,S;(0,k.setActive)(!1);try{_=e.apply(void 0,(0,E.default)(l))}catch(T){S=T}if((0,k.setActive)(!0),S)throw S;return _}),_.forEach(function(e){var _=e.response,S=e.responseError;(_||S)&&(I=I.then(function(e){return _(l,e)},function(e){return S&&S(l,e)}))}),I}function attach(e){if(e.fetch&&e.Promise){var l=e.fetch.polyfill;e.fetch=function(e){var l=0;return function(){for(var _=arguments.length,S=new Array(_),E=0;E<_;E++)S[E]=arguments[E];return makeInterceptor.apply(void 0,[e,l++].concat(S))}}(e.fetch),l&&(e.fetch.polyfill=l)}}var M=!1,R={register:function(e){return M||(M=!0,attach(window)),T.push(e),function(){var l=T.indexOf(e);l>=0&&T.splice(l,1)}},clear:function(){T=[]}};l.default=R},"./packages/@logrocket/network/src/index.js":
/*!**************************************************!*\
					  !*** ./packages/@logrocket/network/src/index.js ***!
					  \**************************************************/function(e,l,_){var S=_(/*! @babel/runtime/helpers/interopRequireDefault */"./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(l,"__esModule",{value:!0}),l.default=function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{isReactNative:!1,isDisabled:!1};if(!0===(null==l?void 0:l.isDisabled))return function(){};var _=l.isReactNative,S=l.shouldAugmentNPS,E=l.shouldParseXHRBlob,D={},truncate=function(e){var l=e;if("object"===(0,k.default)(e)&&null!=e){var _=Object.getPrototypeOf(e);_!==Object.prototype&&null!==_||(l=JSON.stringify(e))}if(l&&l.length&&l.length>4096e3&&"string"==typeof l){var S=l.substring(0,1e3);return"".concat(S," ... LogRocket truncating to first 1000 characters.\n      Keep data under 4MB to prevent truncation. https://docs.logrocket.com/reference/network")}return e},addRequest=function(l,_){var S=_.method;e.addEvent("lr.network.RequestEvent",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},E=e.isEnabled,k=void 0===E||E,T=e.requestSanitizer,M=void 0===T?function(e){return e}:T;if(!k)return null;var R=null;try{R=M(_objectSpread(_objectSpread({},_),{},{reqId:l}))}catch(U){}if(R){var I=R.url;if("undefined"!=typeof document&&"function"==typeof document.createElement){var L=document.createElement("a");L.href=R.url,I=L.href}return{reqId:l,url:I,headers:(0,O.default)(R.headers,function(e){return"".concat(e)}),body:truncate(R.body),method:S,referrer:R.referrer||void 0,mode:R.mode||void 0,credentials:R.credentials||void 0}}return D[l]=!0,null})},addResponse=function(l,_){var S=_.method,E=_.status,k=_.responseType;e.addEvent("lr.network.ResponseEvent",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},T=e.isEnabled,M=void 0===T||T,R=e.responseSanitizer,I=void 0===R?function(e){return e}:R;if(!M)return null;if(D[l])return delete D[l],null;var L=null;try{L=I(_objectSpread(_objectSpread({},_),{},{reqId:l}))}catch(U){}return L?{reqId:l,responseType:k,status:L.status,headers:(0,O.default)(L.headers,function(e){return"".concat(e)}),body:truncate(L.body),method:S}:{reqId:l,responseType:k,status:E,headers:{},body:null,method:S}})},isIgnored=function(l){return e.isDisabled||!0===D[l]},L=(0,T.default)({addRequest:addRequest,addResponse:addResponse,isIgnored:isIgnored}),U=(0,I.default)({addRequest:addRequest,addResponse:addResponse,isIgnored:isIgnored,logger:e,shouldAugmentNPS:S,shouldParseXHRBlob:E}),B=(0,M.registerIonic)({addRequest:addRequest,addResponse:addResponse,isIgnored:isIgnored}),z=_?function(){}:(0,R.default)(e);return function(){z(),L(),U(),B()}};var E=S(_(/*! @babel/runtime/helpers/defineProperty */"./node_modules/@babel/runtime/helpers/defineProperty.js")),k=S(_(/*! @babel/runtime/helpers/typeof */"./node_modules/@babel/runtime/helpers/typeof.js")),T=S(_(/*! ./registerFetch */"./packages/@logrocket/network/src/registerFetch.js")),M=_(/*! ./registerIonic */"./packages/@logrocket/network/src/registerIonic.ts"),R=S(_(/*! ./registerNetworkInformation */"./packages/@logrocket/network/src/registerNetworkInformation.js")),I=S(_(/*! ./registerXHR */"./packages/@logrocket/network/src/registerXHR.js")),O=S(_(/*! @logrocket/utils/src/mapValues */"./packages/@logrocket/utils/src/mapValues.ts"));function ownKeys(e,l){var _=Object.keys(e);if(Object.getOwnPropertySymbols){var S=Object.getOwnPropertySymbols(e);l&&(S=S.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),_.push.apply(_,S)}return _}function _objectSpread(e){for(var l=1;l<arguments.length;l++){var _=null!=arguments[l]?arguments[l]:{};l%2?ownKeys(Object(_),!0).forEach(function(l){(0,E.default)(e,l,_[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(_)):ownKeys(Object(_)).forEach(function(l){Object.defineProperty(e,l,Object.getOwnPropertyDescriptor(_,l))})}return e}},"./packages/@logrocket/network/src/registerFetch.js":
/*!**********************************************************!*\
					  !*** ./packages/@logrocket/network/src/registerFetch.js ***!
					  \**********************************************************/function(e,l,_){var S=_(/*! @babel/runtime/helpers/interopRequireDefault */"./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(l,"__esModule",{value:!0}),l.default=function(e){var l=e.addRequest,_=e.addResponse,S=e.isIgnored,E="fetch-",k={},M=T.default.register({request:function(e){for(var _=arguments.length,S=new Array(_>1?_-1:0),T=1;T<_;T++)S[T-1]=arguments[T];var M;if("undefined"!=typeof Request&&S[0]instanceof Request){var R;try{R=S[0].clone().text()}catch(I){R=Promise.resolve("LogRocket fetch error: ".concat(I.message))}M=R.then(function(e){return _objectSpread(_objectSpread({},pluckFetchFields(S[0])),{},{body:e})},function(e){return _objectSpread(_objectSpread({},pluckFetchFields(S[0])),{},{body:"LogRocket fetch error: ".concat(e.message)})})}else M=Promise.resolve(_objectSpread(_objectSpread({},pluckFetchFields(S[1])),{},{url:"".concat(S[0]),body:(S[1]||{}).body}));return M.then(function(_){return k[e]=_.method,l("".concat(E).concat(e),_),S})},requestError:function(e,l){return Promise.reject(l)},response:function(e,l){var T,M;if(S("".concat(E).concat(e)))return l;if("text/event-stream"===l.headers.get("content-type"))M=Promise.resolve("LogRocket skipped consuming an event-stream body.");else{try{T=l.clone()}catch(L){var R={url:l.url,responseType:l.type.toUpperCase(),status:l.status,headers:stringifyHeaders(l.headers),body:"LogRocket fetch error: ".concat(L.message),method:k[e]};return delete k[e],_("".concat(E).concat(e),R),l}try{if(window.TextDecoder&&T.body){var I=T.body.getReader(),O=new window.TextDecoder("utf-8"),D="";M=I.read().then(function readResponseBody(e){var l=e.done,_=e.value;if(l)return D;var S=_?O.decode(_,{stream:!0}):"";return D+=S,I.read().then(readResponseBody)})}else M=T.text()}catch(U){M=Promise.resolve("LogRocket error reading body: ".concat(U.message))}}return M.catch(function(e){if(!("AbortError"===e.name&&e instanceof DOMException))return"LogRocket error reading body: ".concat(e.message)}).then(function(S){var T={url:l.url,responseType:l.type.toUpperCase(),status:l.status,headers:stringifyHeaders(l.headers),body:S,method:k[e]};delete k[e],_("".concat(E).concat(e),T)}),l},responseError:function(e,l){var S={url:void 0,status:0,headers:{},body:"".concat(l)};return _("".concat(E).concat(e),S),Promise.reject(l)}});return M};var E=S(_(/*! @babel/runtime/helpers/defineProperty */"./node_modules/@babel/runtime/helpers/defineProperty.js")),k=S(_(/*! @logrocket/utils/src/mapValues */"./packages/@logrocket/utils/src/mapValues.ts")),T=S(_(/*! ./fetchIntercept */"./packages/@logrocket/network/src/fetchIntercept.js"));function ownKeys(e,l){var _=Object.keys(e);if(Object.getOwnPropertySymbols){var S=Object.getOwnPropertySymbols(e);l&&(S=S.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),_.push.apply(_,S)}return _}function _objectSpread(e){for(var l=1;l<arguments.length;l++){var _=null!=arguments[l]?arguments[l]:{};l%2?ownKeys(Object(_),!0).forEach(function(l){(0,E.default)(e,l,_[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(_)):ownKeys(Object(_)).forEach(function(l){Object.defineProperty(e,l,Object.getOwnPropertyDescriptor(_,l))})}return e}var stringifyHeaders=function(e){return(0,k.default)(function(e){if(null==e||"function"!=typeof e.forEach)return e;var l={};return e.forEach(function(e,_){l[_]?l[_]="".concat(l[_],",").concat(e):l[_]="".concat(e)}),l}(e),function(e){return"".concat(e)})};function pluckFetchFields(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{url:e.url,headers:stringifyHeaders(e.headers),method:e.method&&e.method.toUpperCase(),referrer:e.referrer||void 0,mode:e.mode||void 0,credentials:e.credentials||void 0}}},"./packages/@logrocket/network/src/registerIonic.ts":
/*!**********************************************************!*\
					  !*** ./packages/@logrocket/network/src/registerIonic.ts ***!
					  \**********************************************************/function(e,l,_){var S=_(/*! @babel/runtime/helpers/interopRequireDefault */"./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(l,"__esModule",{value:!0}),l.mergeHeaders=mergeHeaders,l.serializeQueryParams=function(e,l){return serializeObject("",e,l)},l.appendQueryParamsString=appendQueryParamsString,l.processData=processData,l.registerIonic=function(e){var l,_,S,E=e.addRequest,k=e.addResponse,T=e.isIgnored,U=null===(l=window.cordova)||void 0===l||null===(_=l.plugin)||void 0===_?void 0:_.http,B={},G=!1;if(void 0===U)return function(){};var V=null===(S=window.ionic)||void 0===S?void 0:S.platforms;if(void 0!==V&&"function"==typeof V.some&&V.some(function(e){return L.has(e)}))return function(){};var W=U.sendRequest,q=(0,M.default)(function(e,l,_){if(!T("".concat(D).concat(_)))try{var S={url:e.url||"",status:e.status<600&&e.status>=100?e.status:0,headers:e.headers||{},body:l?e.data:e.error,method:B[_].toUpperCase()};k("".concat(D).concat(_),S)}catch(M){var E={url:e.url||"",status:e.status<600&&e.status>=100?e.status:0,headers:e.headers||{},body:"LogRocket fetch error: ".concat(M.message),method:B[_].toUpperCase()};k("".concat(D).concat(_),E)}});return U.sendRequest=function(e,l,_,S){var k=++H;if(!G)try{var T=function(e,l){var _,S=(e=e||{}).data;try{_=checkForValidStringValue(I,e.serializer||l.getDataSerializer(),"serializer / data payload type")}catch(E){_=checkForValidStringValue(O,e.serializer||l.getDataSerializer(),"serializer / data payload type"),S={}}return{data:S,filePath:e.filePath,followRedirect:e.followRedirect,headers:checkKeyValuePairObject(e.headers||{},z,"Invalid header type, must be string"),method:checkForValidStringValue(R,e.method||R[0],"method"),name:e.name,params:checkKeyValuePairObject(e.params||{},j,"Invalid param, must be of type string or array"),responseType:e.responseType,serializer:_,connectTimeout:e.connectTimeout,readTimeout:e.readTimeout,timeout:e.timeout}}(l,U),M=appendQueryParamsString(e,serializeObject("",T.params,!0)),L=function(e,l,_){var S=_.getHeaders("*")||{},E=function(e,l){var _=new URL(e),S=_.host;return l.getHeaders(S)||null}(e,_)||{};return mergeHeaders(mergeHeaders(S,E),l)}(e,T.headers,U),V=T.method||"get";B[k]=V;var X={url:M,method:V.toUpperCase(),headers:L||{},body:processData(T.data||{},T.serializer)};E("".concat(D).concat(k),X)}catch(Y){var K={url:e,method:(l.method||"get").toUpperCase(),headers:{},body:"LogRocket fetch error: ".concat(Y.message)};E("".concat(D).concat(k),K)}return W(e,l,function(e){G||(q(e,!0,k),delete B[k]),_(e)},function(e){G||(q(e,!1,k),delete B[k]),S(e)})},function(){G=!0,U.sendRequest=W,B={}}};var E=S(_(/*! @babel/runtime/helpers/defineProperty */"./node_modules/@babel/runtime/helpers/defineProperty.js")),k=S(_(/*! @babel/runtime/helpers/typeof */"./node_modules/@babel/runtime/helpers/typeof.js")),T=S(_(/*! @babel/runtime/helpers/toConsumableArray */"./node_modules/@babel/runtime/helpers/toConsumableArray.js")),M=S(_(/*! @logrocket/utils/src/protectFunc */"./packages/@logrocket/utils/src/protectFunc.ts"));function _createForOfIteratorHelper(e,l){var _="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!_){if(Array.isArray(e)||(_=function(e,l){if(e){if("string"==typeof e)return _arrayLikeToArray(e,l);var _=Object.prototype.toString.call(e).slice(8,-1);return"Object"===_&&e.constructor&&(_=e.constructor.name),"Map"===_||"Set"===_?Array.from(e):"Arguments"===_||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(_)?_arrayLikeToArray(e,l):void 0}}(e))||l){_&&(e=_);var S=0,F=function(){};return{s:F,n:function(){return S>=e.length?{done:!0}:{done:!1,value:e[S++]}},e:function(e){throw e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var E,k=!0,T=!1;return{s:function(){_=_.call(e)},n:function(){var e=_.next();return k=e.done,e},e:function(e){T=!0,E=e},f:function(){try{k||null==_.return||_.return()}finally{if(T)throw E}}}}function _arrayLikeToArray(e,l){(null==l||l>e.length)&&(l=e.length);for(var _=0,S=new Array(l);_<l;_++)S[_]=e[_];return S}function ownKeys(e,l){var _=Object.keys(e);if(Object.getOwnPropertySymbols){var S=Object.getOwnPropertySymbols(e);l&&(S=S.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),_.push.apply(_,S)}return _}function _objectSpread(e){for(var l=1;l<arguments.length;l++){var _=null!=arguments[l]?arguments[l]:{};l%2?ownKeys(Object(_),!0).forEach(function(l){(0,E.default)(e,l,_[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(_)):ownKeys(Object(_)).forEach(function(l){Object.defineProperty(e,l,Object.getOwnPropertyDescriptor(_,l))})}return e}var R=new Set(["get","put","post","patch","head","delete","options","upload","download"]),I=new Set(["urlencoded","json","utf8"]),O=new Set(["raw","multipart"]),D="ionic-",L=new Set(["desktop","mobileweb","pwa"]),U=new Set(["FormData"]),B=new Set,z=new Set(["string"]),j=new Set(["string","array"]),G={utf8:z,urlencoded:new Set(["object"]),json:new Set(["array","object"]),raw:new Set(["Uint8Array","ArrayBuffer"]),default:B};function checkForValidStringValue(e,l,_){if("string"!=typeof l)throw new Error("".concat(_," must be one of: ").concat((0,T.default)(e).join(", ")));if(l=l.trim().toLowerCase(),!e.has(l))throw new Error("".concat(_," must be one of: ").concat((0,T.default)(e).join(", ")));return l}function checkKeyValuePairObject(e,l,_){if("object"!==(0,k.default)(e))throw new Error(_);for(var S=0,E=Object.keys(e);S<E.length;S++){var T=E[S];if(!l.has((0,k.default)(e[T])))throw new Error(_)}return e}function mergeHeaders(e,l){return _objectSpread(_objectSpread({},e),l)}function serializeValue(e,l){return l?encodeURIComponent(e):e}function serializeIdentifier(e,l,_){return e.length?_?"".concat(encodeURIComponent(e),"[").concat(encodeURIComponent(l),"]"):"".concat(e,"[").concat(l,"]"):_?encodeURIComponent(l):l}function serializeArray(e,l,_){var S,E=[],T=_createForOfIteratorHelper(l);try{for(T.s();!(S=T.n()).done;){var M=S.value;Array.isArray(M)?E.push(serializeArray("".concat(e,"[]"),M,_)):"object"!==(0,k.default)(M)?E.push("".concat(serializeIdentifier(e,"",_),"=").concat(serializeValue(M,_))):E.push(serializeObject("".concat(e,"[]").concat(M),_,void 0))}}catch(R){T.e(R)}finally{T.f()}return E.join("&")}function serializeObject(e,l,_){var S=[];for(var E in l)if(l.hasOwnProperty(E)){var T=e.length?"".concat(e,"[").concat(E,"]"):E;Array.isArray(l[E])?S.push(serializeArray(T,l[E],_)):"object"!==(0,k.default)(l[E])||null===l[E]?S.push("".concat(serializeIdentifier(e,E,_),"=").concat(serializeValue(l[E],_))):S.push(serializeObject(T,l[E],_))}return S.join("&")}function appendQueryParamsString(e,l){if(!e.length||!l.length)return e;var _=new URL(e),S=_.host,E=_.pathname,k=_.search,T=_.hash,M=_.protocol;return"".concat(M,"//").concat(S).concat(E).concat(k.length?"".concat(k,"&").concat(l):"?".concat(l)).concat(T)}function processData(e,l){var S=(0,k.default)(e),E=function(e){return G[e]||G.default}(l),M=function(e){return"multipart"===e?U:B}(l);if(M.size>0){var R=!1;if(M.forEach(function(l){_.g[l]&&e instanceof _.g[l]&&(R=!0)}),!R)throw new Error("INSTANCE_TYPE_MISMATCH_DATA ".concat((0,T.default)(M).join(", ")))}if(0===M.size&&!E.has(S))throw new Error("TYPE_MISMATCH_DATA ".concat((0,T.default)(E).join(", ")));return"utf8"===l?e:JSON.stringify(e,void 0,2)}var H=0},"./packages/@logrocket/network/src/registerNetworkInformation.js":
/*!***********************************************************************!*\
					  !*** ./packages/@logrocket/network/src/registerNetworkInformation.js ***!
					  \***********************************************************************/function(e,l){Object.defineProperty(l,"__esModule",{value:!0}),l.default=function(e){var l=void 0;function sendNetworkInformation(){var S={online:window.navigator.onLine,effectiveType:"UNKOWN"};window.navigator.onLine?window.navigator.connection&&window.navigator.connection.effectiveType&&(S.effectiveType=_[window.navigator.connection.effectiveType]||"UNKNOWN"):S.effectiveType="NONE",l&&S.online===l.online&&S.effectiveType===l.effectiveType||(l=S,e.addEvent("lr.network.NetworkStatusEvent",function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).isEnabled;return void 0===e||e?S:null}))}return setTimeout(sendNetworkInformation),window.navigator.connection&&"function"==typeof window.navigator.connection.addEventListener&&window.navigator.connection.addEventListener("change",sendNetworkInformation),window.addEventListener("online",sendNetworkInformation),window.addEventListener("offline",sendNetworkInformation),function(){window.removeEventListener("offline",sendNetworkInformation),window.removeEventListener("online",sendNetworkInformation),window.navigator.connection&&"function"==typeof window.navigator.connection.removeEventListener&&window.navigator.connection.removeEventListener("change",sendNetworkInformation)}};var _={"slow-2g":"SLOW2G","2g":"TWOG","3g":"THREEG","4g":"FOURG"}},"./packages/@logrocket/network/src/registerXHR.js":
/*!********************************************************!*\
					  !*** ./packages/@logrocket/network/src/registerXHR.js ***!
					  \********************************************************/function(e,l,_){var S=_(/*! @babel/runtime/helpers/interopRequireDefault */"./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(l,"__esModule",{value:!0}),l.setActive=function(e){O=e},l.default=function(e){var l=e.addRequest,_=e.addResponse,S=e.isIgnored,L=e.logger,U=e.shouldAugmentNPS,B=void 0===U||U,z=e.shouldParseXHRBlob,j=void 0!==z&&z,G=XMLHttpRequest,H=new WeakMap,V=!1,W="xhr-";return window._lrXMLHttpRequest=XMLHttpRequest,XMLHttpRequest=function(e,U){var z=new G(e,U);if(!O)return z;H.set(z,{xhrId:++D,requestHeaders:{},sent:!1,done:!1});var q=z.open,X=z.send;B&&(z.open=function(){for(var e=arguments.length,l=new Array(e),_=0;_<e;_++)l[_]=arguments[_];try{var S=l[1];if(window.URL&&"function"==typeof window.URL&&0===S.search(R.WOOTRIC_RESPONSES_REGEX)){var E=new window.URL(L.recordingURL);E.searchParams.set("nps","wootric");var k=new window.URL(S),T=k.searchParams.get("response[text]"),M=T?"".concat(T,"\n\n"):"";k.searchParams.set("response[text]","".concat(M,"<").concat(E.href,"|View LogRocket session>")),l[1]=k.href}}catch(oo){}return q.apply(this,l)},z.send=function(){for(var e=arguments.length,l=new Array(e),_=0;_<e;_++)l[_]=arguments[_];try{var S=H.get(z);if(window.URL&&"function"==typeof window.URL&&S&&S.url&&0===S.url.search(R.DELIGHTED_RESPONSES_REGEX)&&l.length&&-1!==l[0].indexOf(R.DELIGHTED_FEEDBACK_PREFIX)){var E=new window.URL(L.recordingURL);E.searchParams.set("nps","delighted");var k=encodeURIComponent(E.href),T=l[0].split("&").map(function(e){if((0,M.default)(e,R.DELIGHTED_FEEDBACK_PREFIX)){var l=e===R.DELIGHTED_FEEDBACK_PREFIX;return"".concat(e).concat(l?"":"\n\n","<").concat(k,"|View LogRocket session>")}return e}).join("&");l[0]=T}}catch(oo){}return X.apply(this,l)});var captureResponse=function(){var e;if(!V){var l=H.get(z);if(l&&!S("".concat(W).concat(l.xhrId))&&l.sent&&l.done){var E=l.status||I.XHR_CUSTOM_STATUS_CODES.error;E===I.XHR_CUSTOM_STATUS_CODES.error&&!1===(null===(e=window.navigator)||void 0===e?void 0:e.onLine)&&(E=I.XHR_CUSTOM_STATUS_CODES.offline);var k={url:l.url,status:E,headers:l.responseHeaders,body:l.responseBody,method:(l.method||"").toUpperCase()};if(j&&k.body instanceof Blob){var T=new FileReader;T.readAsText(k.body),T.onload=function(){try{k.body=JSON.parse(T.result)}catch(e){}_("".concat(W).concat(l.xhrId),k)}}else _("".concat(W).concat(l.xhrId),k)}}};(0,k.default)(z,"open",(0,T.default)(function(e,l){if(!V){var _=H.get(z);_.method=e,_.url=l}})),(0,k.default)(z,"send",(0,T.default)(function(e){if(!V){var _=H.get(z);if(_){var S={url:_.url,method:_.method&&_.method.toUpperCase(),headers:(0,E.default)(_.requestHeaders||{},function(e){return e.join(", ")}),body:e};l("".concat(W).concat(_.xhrId),S),_.sent=!0,captureResponse()}}})),(0,k.default)(z,"setRequestHeader",(0,T.default)(function(e,l){if(!V){var _=H.get(z);_&&(_.requestHeaders=_.requestHeaders||{},_.requestHeaders[e]=_.requestHeaders[e]||[],_.requestHeaders[e].push(l))}}));var K={readystatechange:(0,T.default)(function(){if(!V&&4===z.readyState){var e=H.get(z);if(!e)return;if(S("".concat(W).concat(e.xhrId)))return;var l,_=z.getAllResponseHeaders()||"";e.responseHeaders=_.split(/[\r\n]+/).reduce(function(e,l){var _=e,S=l.split(": ");if(S.length>0){var E=S.shift(),k=S.join(": ");e[E]?_[E]+=", ".concat(k):_[E]=k}return _},{});try{switch(z.responseType){case"json":l=L._shouldCloneResponse?JSON.parse(JSON.stringify(z.response)):z.response;break;case"arraybuffer":case"blob":l=z.response;break;case"document":l=z.responseXML;break;case"text":case"":l=z.responseText;break;default:l=""}}catch(E){l="LogRocket: Error accessing response."}e.responseBody=l,e.status=z.status,e.done=!0}}),abort:(0,T.default)(function(){var e=H.get(z);e&&(e.status=I.XHR_CUSTOM_STATUS_CODES.aborted)}),timeout:(0,T.default)(function(){var e=H.get(z);e&&(e.status=I.XHR_CUSTOM_STATUS_CODES.timeout)}),loadend:(0,T.default)(function(){captureResponse()})};return Object.keys(K).forEach(function(e){z.addEventListener(e,K[e])}),z},XMLHttpRequest.prototype=G.prototype,["UNSENT","OPENED","HEADERS_RECEIVED","LOADING","DONE"].forEach(function(e){XMLHttpRequest[e]=G[e]}),function(){V=!0,XMLHttpRequest=G}};var E=S(_(/*! @logrocket/utils/src/mapValues */"./packages/@logrocket/utils/src/mapValues.ts")),k=S(_(/*! @logrocket/utils/src/enhanceFunc */"./packages/@logrocket/utils/src/enhanceFunc.ts")),T=S(_(/*! @logrocket/utils/src/protectFunc */"./packages/@logrocket/utils/src/protectFunc.ts")),M=S(_(/*! @logrocket/utils/src/startsWith */"./packages/@logrocket/utils/src/startsWith.js")),R=_(/*! @logrocket/utils/src/constants/nps */"./packages/@logrocket/utils/src/constants/nps.js"),I=_(/*! @logrocket/utils/src/constants/statusCodes */"./packages/@logrocket/utils/src/constants/statusCodes.ts"),O=!0,D=0},"./packages/@logrocket/now/src/index.js":
/*!**********************************************!*\
					  !*** ./packages/@logrocket/now/src/index.js ***!
					  \**********************************************/function(e,l){Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var _=Date.now.bind(Date),S=_(),E="undefined"!=typeof performance&&performance.now?performance.now.bind(performance):function(){return _()-S};l.default=E},"./packages/@logrocket/redux/src/createEnhancer.js":
/*!*********************************************************!*\
					  !*** ./packages/@logrocket/redux/src/createEnhancer.js ***!
					  \*********************************************************/function(e,l,_){var S=_(/*! @babel/runtime/helpers/interopRequireDefault */"./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(l,"__esModule",{value:!0}),l.default=function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_=l.stateSanitizer,S=void 0===_?function(e){return e}:_,E=l.actionSanitizer,M=void 0===E?function(e){return e}:E;return function(l){return function(_,E,R){var I=l(_,E,R),O=I.dispatch,D=T++;return e.addEvent("lr.redux.InitialState",function(){var e;try{e=S(I.getState())}catch(l){}return{state:e,storeId:D}}),_objectSpread(_objectSpread({},I),{},{dispatch:function(l){var _,E,T=(0,k.default)();try{E=O(l)}catch(L){_=L}finally{var R=(0,k.default)()-T;e.addEvent("lr.redux.ReduxAction",function(){var e=null,E=null;try{e=S(I.getState()),E=M(l)}catch(_){}return e&&E?{storeId:D,action:E,duration:R,stateDelta:e}:null})}if(_)throw _;return E}})}}};var E=S(_(/*! @babel/runtime/helpers/defineProperty */"./node_modules/@babel/runtime/helpers/defineProperty.js")),k=S(_(/*! @logrocket/now */"./packages/@logrocket/now/src/index.js"));function ownKeys(e,l){var _=Object.keys(e);if(Object.getOwnPropertySymbols){var S=Object.getOwnPropertySymbols(e);l&&(S=S.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),_.push.apply(_,S)}return _}function _objectSpread(e){for(var l=1;l<arguments.length;l++){var _=null!=arguments[l]?arguments[l]:{};l%2?ownKeys(Object(_),!0).forEach(function(l){(0,E.default)(e,l,_[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(_)):ownKeys(Object(_)).forEach(function(l){Object.defineProperty(e,l,Object.getOwnPropertyDescriptor(_,l))})}return e}var T=0},"./packages/@logrocket/redux/src/createMiddleware.js":
/*!***********************************************************!*\
					  !*** ./packages/@logrocket/redux/src/createMiddleware.js ***!
					  \***********************************************************/function(e,l,_){var S=_(/*! @babel/runtime/helpers/interopRequireDefault */"./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(l,"__esModule",{value:!0}),l.default=function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_=l.stateSanitizer,S=void 0===_?function(e){return e}:_,T=l.actionSanitizer,M=void 0===T?function(e){return e}:T;return function(l){var _=k++;return e.addEvent("lr.redux.InitialState",function(){var e;try{e=S(l.getState())}catch(E){}return{state:e,storeId:_}}),function(k){return function(T){var R,I,O=(0,E.default)();try{I=k(T)}catch(L){R=L}finally{var D=(0,E.default)()-O;e.addEvent("lr.redux.ReduxAction",function(){var e=null,E=null;try{e=S(l.getState()),E=M(T)}catch(R){}return e&&E?{storeId:_,action:E,duration:D,stateDelta:e}:null})}if(R)throw R;return I}}}};var E=S(_(/*! @logrocket/now */"./packages/@logrocket/now/src/index.js")),k=0},"./packages/@logrocket/redux/src/index.js":
/*!************************************************!*\
					  !*** ./packages/@logrocket/redux/src/index.js ***!
					  \************************************************/function(e,l,_){var S=_(/*! @babel/runtime/helpers/interopRequireDefault */"./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(l,"__esModule",{value:!0}),Object.defineProperty(l,"createEnhancer",{enumerable:!0,get:function(){return E.default}}),Object.defineProperty(l,"createMiddleware",{enumerable:!0,get:function(){return k.default}});var E=S(_(/*! ./createEnhancer */"./packages/@logrocket/redux/src/createEnhancer.js")),k=S(_(/*! ./createMiddleware */"./packages/@logrocket/redux/src/createMiddleware.js"))},"./packages/@logrocket/utils/src/TraceKit.js":
/*!***************************************************!*\
					  !*** ./packages/@logrocket/utils/src/TraceKit.js ***!
					  \***************************************************/function(e,l,_){Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var S={collectWindowErrors:!0,debug:!1},E="undefined"!=typeof window?window:void 0!==_.g?_.g:"undefined"!=typeof self?self:{},k=[].slice,T="?",M=/^(?:Uncaught (?:exception: )?)?((?:Eval|Internal|Range|Reference|Syntax|Type|URI)Error): ?(.*)$/;function getLocationHref(){return"undefined"==typeof document||void 0===document.location?"":document.location.href}S.report=function(){var e,l,_=[],R=null,I=null,O=null;function notifyHandlers(e,l){var E=null;if(!l||S.collectWindowErrors){for(var T in _)if(_.hasOwnProperty(T))try{_[T].apply(null,[e].concat(k.call(arguments,2)))}catch(M){E=M}if(E)throw E}}function traceKitWindowOnError(l,_,E,k,R){if(O)S.computeStackTrace.augmentStackTraceWithInitialElement(O,_,E,l),processLastException();else if(R)notifyHandlers(S.computeStackTrace(R),!0);else{var I,D={url:_,line:E,column:k},L=void 0,U=l;"[object String]"==={}.toString.call(l)&&(I=l.match(M))&&(L=I[1],U=I[2]),D.func=T,notifyHandlers({name:L,message:U,url:getLocationHref(),stack:[D]},!0)}return!!e&&e.apply(this,arguments)}function processLastException(){var e=O,l=R;R=null,O=null,I=null,notifyHandlers.apply(null,[e,!1].concat(l))}function report(e,l){var _=k.call(arguments,1);if(O){if(I===e)return;processLastException()}var E=S.computeStackTrace(e);if(O=E,I=e,R=_,setTimeout(function(){I===e&&processLastException()},E.incomplete?2e3:0),!1!==l)throw e}return report.subscribe=function(S){l||(e=E.onerror,E.onerror=traceKitWindowOnError,l=!0),_.push(S)},report.unsubscribe=function(e){for(var l=_.length-1;l>=0;--l)_[l]===e&&_.splice(l,1)},report.uninstall=function(){l&&(E.onerror=e,l=!1,e=void 0),_=[]},report}(),S.computeStackTrace=function(){function computeStackTraceFromStackProp(e){if(void 0!==e.stack&&e.stack){var l,_,S=/^\s*at (.*?) ?\(((?:file|https?|blob|chrome-extension|native|eval|<anonymous>).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,E=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|resource|\[native).*?)(?::(\d+))?(?::(\d+))?\s*$/i,k=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,M=e.stack.split("\n"),R=[];/^(.*) is undefined$/.exec(e.message);for(var I=0,O=M.length;I<O;++I){if(l=S.exec(M[I])){var D=l[2]&&-1!==l[2].indexOf("native");_={url:D?null:l[2],func:l[1]||T,args:D?[l[2]]:[],line:l[3]?+l[3]:null,column:l[4]?+l[4]:null}}else if(l=k.exec(M[I]))_={url:l[2],func:l[1]||T,args:[],line:+l[3],column:l[4]?+l[4]:null};else{if(!(l=E.exec(M[I])))continue;_={url:l[3],func:l[1]||T,args:l[2]?l[2].split(","):[],line:l[4]?+l[4]:null,column:l[5]?+l[5]:null}}!_.func&&_.line&&(_.func=T),R.push(_)}return R.length?(R[0].column||void 0===e.columnNumber||(R[0].column=e.columnNumber+1),{name:e.name,message:e.message,url:getLocationHref(),stack:R}):null}}function augmentStackTraceWithInitialElement(e,l,_,S){var E={url:l,line:_};if(E.url&&E.line){if(e.incomplete=!1,E.func||(E.func=T),e.stack.length>0&&e.stack[0].url===E.url){if(e.stack[0].line===E.line)return!1;if(!e.stack[0].line&&e.stack[0].func===E.func)return e.stack[0].line=E.line,!1}return e.stack.unshift(E),e.partial=!0,!0}return e.incomplete=!0,!1}function computeStackTraceByWalkingCallerChain(e,l){for(var _,E,k=/function\s+([_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*)?\s*\(/i,M=[],R={},I=!1,O=computeStackTraceByWalkingCallerChain.caller;O&&!I;O=O.caller)if(O!==computeStackTrace&&O!==S.report){if(E={url:null,func:T,line:null,column:null},O.name?E.func=O.name:(_=k.exec(O.toString()))&&(E.func=_[1]),void 0===E.func)try{E.func=_.input.substring(0,_.input.indexOf("{"))}catch(oo){}R[""+O]?I=!0:R[""+O]=!0,M.push(E)}l&&M.splice(0,l);var D={name:e.name,message:e.message,url:getLocationHref(),stack:M};return augmentStackTraceWithInitialElement(D,e.sourceURL||e.fileName,e.line||e.lineNumber,e.message||e.description),D}function computeStackTrace(e,l){var _=null;l=null==l?0:+l;try{if(_=computeStackTraceFromStackProp(e))return _}catch(oo){if(S.debug)throw oo}try{if(_=computeStackTraceByWalkingCallerChain(e,l+1))return _}catch(oo){if(S.debug)throw oo}return{name:e.name,message:e.message,url:getLocationHref()}}return computeStackTrace.augmentStackTraceWithInitialElement=augmentStackTraceWithInitialElement,computeStackTrace.computeStackTraceFromStackProp=computeStackTraceFromStackProp,computeStackTrace}();var R=S;l.default=R},"./packages/@logrocket/utils/src/constants/nps.js":
/*!********************************************************!*\
					  !*** ./packages/@logrocket/utils/src/constants/nps.js ***!
					  \********************************************************/function(e,l){Object.defineProperty(l,"__esModule",{value:!0}),l.DELIGHTED_FEEDBACK_PREFIX=l.DELIGHTED_RESPONSES_REGEX=l.WOOTRIC_RESPONSES_REGEX=void 0,l.WOOTRIC_RESPONSES_REGEX=/^https:\/\/production.wootric.com\/responses/,l.DELIGHTED_RESPONSES_REGEX=/^https:\/\/web.delighted.com\/e\/[a-zA-Z-]*\/c/,l.DELIGHTED_FEEDBACK_PREFIX="comment="},"./packages/@logrocket/utils/src/constants/statusCodes.ts":
/*!****************************************************************!*\
					  !*** ./packages/@logrocket/utils/src/constants/statusCodes.ts ***!
					  \****************************************************************/function(e,l,_){var S=_(/*! @babel/runtime/helpers/interopRequireDefault */"./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(l,"__esModule",{value:!0}),l.getStatusText=function(e){return T[String(e)]},l.XHR_CUSTOM_FAILURE_STATUSES=l.XHR_CUSTOM_STATUS_CODES=l.STATUS_CODES=void 0;var E,k=S(_(/*! @babel/runtime/helpers/defineProperty */"./node_modules/@babel/runtime/helpers/defineProperty.js")),T={0:"",100:"Continue",101:"Switching Protocol",102:"Processing",103:"Early Hints",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",306:"unused",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Too Early",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",510:"Not Extended",511:"Network Authentication Required"};l.STATUS_CODES=T;var M={error:0,timeout:444,aborted:499,offline:1001};l.XHR_CUSTOM_STATUS_CODES=M;var R=(E={},(0,k.default)(E,M.error,"Error"),(0,k.default)(E,M.timeout,"Timeout"),(0,k.default)(E,M.aborted,"Aborted"),(0,k.default)(E,M.offline,"Offline"),E);l.XHR_CUSTOM_FAILURE_STATUSES=R},"./packages/@logrocket/utils/src/createUnsubListener.ts":
/*!**************************************************************!*\
					  !*** ./packages/@logrocket/utils/src/createUnsubListener.ts ***!
					  \**************************************************************/function(e,l,_){var S=_(/*! @babel/runtime/helpers/interopRequireDefault */"./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(l,"__esModule",{value:!0}),l.createUnsubListener=function(e){return function(){e.clear()}},l.Handler=void 0;var E=S(_(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js")),k=S(_(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js")),T=function(){function Handler(e){(0,E.default)(this,Handler),this._value=void 0,this._value=e}return(0,k.default)(Handler,[{key:"get",value:function(){return this._value}},{key:"clear",value:function(){this._value=void 0}}]),Handler}();l.Handler=T},"./packages/@logrocket/utils/src/enhanceFunc.ts":
/*!******************************************************!*\
					  !*** ./packages/@logrocket/utils/src/enhanceFunc.ts ***!
					  \******************************************************/function(e,l,_){Object.defineProperty(l,"__esModule",{value:!0}),l.default=function(e,l,_){if("function"!=typeof e[l])return NO_OP_UNREGISTER;try{var shim=function(){for(var e,l=arguments.length,_=new Array(l),S=0;S<l;S++)_[S]=arguments[S];var T=E.apply(this,_);return null===(e=k.get())||void 0===e||e.apply(this,_),T},E=e[l],k=new S.Handler(_);return e[l]=shim,function(){k.clear(),e[l]===shim&&(e[l]=E)}}catch(T){return NO_OP_UNREGISTER}};var S=_(/*! ./createUnsubListener */"./packages/@logrocket/utils/src/createUnsubListener.ts"),NO_OP_UNREGISTER=function(){}},"./packages/@logrocket/utils/src/logError.js":
/*!***************************************************!*\
					  !*** ./packages/@logrocket/utils/src/logError.js ***!
					  \***************************************************/function(e,l){Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var _="undefined"!=typeof console&&console.error&&console.error.bind?function(){}.bind():function(){};l.default=_},"./packages/@logrocket/utils/src/mapValues.ts":
/*!****************************************************!*\
					  !*** ./packages/@logrocket/utils/src/mapValues.ts ***!
					  \****************************************************/function(e,l){Object.defineProperty(l,"__esModule",{value:!0}),l.default=function(e,l){if(null==e)return{};var _={};return Object.keys(e).forEach(function(S){_[S]=l(e[S])}),_}},"./packages/@logrocket/utils/src/protectFunc.ts":
/*!******************************************************!*\
					  !*** ./packages/@logrocket/utils/src/protectFunc.ts ***!
					  \******************************************************/function(e,l,_){var S=_(/*! @babel/runtime/helpers/interopRequireDefault */"./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(l,"__esModule",{value:!0}),l.default=function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};return function(){var _;try{_=e.apply(void 0,arguments)}catch(T){if("undefined"!=typeof window&&window._lrdebug)throw T;var S=l(T);(0,k.default)("LogRocket",T),(0,E.default)(T,S)}return _}};var E=S(_(/*! ./sendTelemetryData */"./packages/@logrocket/utils/src/sendTelemetryData.js")),k=S(_(/*! ./logError */"./packages/@logrocket/utils/src/logError.js"))},"./packages/@logrocket/utils/src/scrubException.ts":
/*!*********************************************************!*\
					  !*** ./packages/@logrocket/utils/src/scrubException.ts ***!
					  \*********************************************************/function(e,l,_){var S=_(/*! @babel/runtime/helpers/interopRequireDefault */"./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(l,"__esModule",{value:!0}),l.scrubException=function(e,l){if(l){var _,S=_createForOfIteratorHelper(k);try{for(S.s();!(_=S.n()).done;){var E=_.value,M=l[E];isScalar(M)&&(e[E]=M.toString())}}catch(G){S.e(G)}finally{S.f()}var R,I=_createForOfIteratorHelper(T);try{for(I.s();!(R=I.n()).done;){for(var O=R.value,D=l[O]||{},L={},U=0,B=Object.keys(D);U<B.length;U++){var z=B[U],j=D[z];isScalar(j)&&(L[z.toString()]=j.toString())}e[O]=L}}catch(G){I.e(G)}finally{I.f()}}};var E=S(_(/*! @babel/runtime/helpers/typeof */"./node_modules/@babel/runtime/helpers/typeof.js"));function _createForOfIteratorHelper(e,l){var _="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!_){if(Array.isArray(e)||(_=function(e,l){if(e){if("string"==typeof e)return _arrayLikeToArray(e,l);var _=Object.prototype.toString.call(e).slice(8,-1);return"Object"===_&&e.constructor&&(_=e.constructor.name),"Map"===_||"Set"===_?Array.from(e):"Arguments"===_||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(_)?_arrayLikeToArray(e,l):void 0}}(e))||l){_&&(e=_);var S=0,F=function(){};return{s:F,n:function(){return S>=e.length?{done:!0}:{done:!1,value:e[S++]}},e:function(e){throw e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var E,k=!0,T=!1;return{s:function(){_=_.call(e)},n:function(){var e=_.next();return k=e.done,e},e:function(e){T=!0,E=e},f:function(){try{k||null==_.return||_.return()}finally{if(T)throw E}}}}function _arrayLikeToArray(e,l){(null==l||l>e.length)&&(l=e.length);for(var _=0,S=new Array(l);_<l;_++)S[_]=e[_];return S}function isScalar(e){return/boolean|number|string/.test((0,E.default)(e))}var k=["level","logger"],T=["tags","extra"]},"./packages/@logrocket/utils/src/sendTelemetryData.js":
/*!************************************************************!*\
					  !*** ./packages/@logrocket/utils/src/sendTelemetryData.js ***!
					  \************************************************************/function(e,l,_){var S=_(/*! @babel/runtime/helpers/interopRequireDefault */"./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(l,"__esModule",{value:!0}),l.sendTelemetry=function(e,l){"undefined"!=typeof window&&window._lrdebug?(0,k.default)(e):l&&l.extra&&l.extra.appID&&"function"==typeof l.extra.appID.indexOf&&0===l.extra.appID.indexOf("au2drp/")&&Math.random()>=.25||_sendToSentry(_objectSpread({message:e},l))},l.default=function(e,l){try{var _,S,E=e.message;try{_=JSON.stringify(l).slice(0,1e3)}catch(e){try{_="Could not stringify payload: ".concat(Object.prototype.toString.call(l))}catch(e){}}try{S=T.default.computeStackTrace(e).stack.map(function(e){return{filename:e.url,lineno:e.line,colno:e.column,function:e.func||"?"}})}catch(e){}_sendToSentry({message:E,extra:{stringPayload:_},exception:{values:[{type:e.type,value:E,stacktrace:{frames:S}}]}})}catch(e){(0,k.default)("Failed to send",e)}};var E=S(_(/*! @babel/runtime/helpers/defineProperty */"./node_modules/@babel/runtime/helpers/defineProperty.js")),k=S(_(/*! ./logError */"./packages/@logrocket/utils/src/logError.js")),T=S(_(/*! ./TraceKit */"./packages/@logrocket/utils/src/TraceKit.js"));function ownKeys(e,l){var _=Object.keys(e);if(Object.getOwnPropertySymbols){var S=Object.getOwnPropertySymbols(e);l&&(S=S.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),_.push.apply(_,S)}return _}function _objectSpread(e){for(var l=1;l<arguments.length;l++){var _=null!=arguments[l]?arguments[l]:{};l%2?ownKeys(Object(_),!0).forEach(function(l){(0,E.default)(e,l,_[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(_)):ownKeys(Object(_)).forEach(function(l){Object.defineProperty(e,l,Object.getOwnPropertyDescriptor(_,l))})}return e}var M="8304d923ee86bbba88df4d491ccbc1c75ecfbe70";function _sendToSentry(e){try{var l,_,S=e.message,E="https://e.logrocket.com/api/3/store/?sentry_version=7&sentry_client=http%2F3.8.0&sentry_key=b64162b4187a4c5caae8a68a7e291793",T=JSON.stringify(_objectSpread({message:S,logger:"javascript",platform:"javascript",request:{headers:{"User-Agent":"undefined"!=typeof navigator&&navigator.userAgent},url:"undefined"!=typeof location&&location.href},release:M,environment:(null===(l=window)||void 0===l||null===(_=l.__SDKCONFIG__)||void 0===_?void 0:_.scriptEnv)||"prod"},e));if("undefined"!=typeof window){var R=new(window._lrXMLHttpRequest||XMLHttpRequest);R.open("POST",E),R.send(T)}else"undefined"!=typeof fetch&&fetch(E,{method:"POST",body:T}).catch(function(e){(0,k.default)("Failed to send via fetch",e)})}catch(I){(0,k.default)("Failed to send",I)}}},"./packages/@logrocket/utils/src/startsWith.js":
/*!*****************************************************!*\
					  !*** ./packages/@logrocket/utils/src/startsWith.js ***!
					  \*****************************************************/function(e,l){Object.defineProperty(l,"__esModule",{value:!0}),l.default=function(e,l){var _=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return e&&l&&e.substring(_,_+l.length)===l}},"./packages/logrocket/src/LogRocket.js":
/*!*********************************************!*\
					  !*** ./packages/logrocket/src/LogRocket.js ***!
					  \*********************************************/function(e,l,_){var S=_(/*! @babel/runtime/helpers/interopRequireDefault */"./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(l,"__esModule",{value:!0}),l.default=l.MAX_QUEUE_SIZE=void 0;var E=S(_(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js")),k=S(_(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js")),T=S(_(/*! @babel/runtime/helpers/defineProperty */"./node_modules/@babel/runtime/helpers/defineProperty.js")),M=S(_(/*! @babel/runtime/helpers/objectWithoutProperties */"./node_modules/@babel/runtime/helpers/objectWithoutProperties.js")),R=S(_(/*! @logrocket/network */"./packages/@logrocket/network/src/index.js")),I=_(/*! @logrocket/exceptions */"./packages/@logrocket/exceptions/src/index.js"),O=S(_(/*! @logrocket/console */"./packages/@logrocket/console/src/index.js")),D=_(/*! @logrocket/redux */"./packages/@logrocket/redux/src/index.js");function ownKeys(e,l){var _=Object.keys(e);if(Object.getOwnPropertySymbols){var S=Object.getOwnPropertySymbols(e);l&&(S=S.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),_.push.apply(_,S)}return _}function _objectSpread(e){for(var l=1;l<arguments.length;l++){var _=null!=arguments[l]?arguments[l]:{};l%2?ownKeys(Object(_),!0).forEach(function(l){(0,T.default)(e,l,_[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(_)):ownKeys(Object(_)).forEach(function(l){Object.defineProperty(e,l,Object.getOwnPropertyDescriptor(_,l))})}return e}l.MAX_QUEUE_SIZE=1e3;var L=function(){function LogRocket(){var e=this;(0,E.default)(this,LogRocket),this._buffer=[],["log","info","warn","error","debug"].forEach(function(l){e[l]=function(){for(var _=arguments.length,S=new Array(_),E=0;E<_;E++)S[E]=arguments[E];e.addEvent("lr.core.LogEvent",function(){return"error"===l&&(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).shouldAggregateConsoleErrors&&I.Capture.captureMessage(e,S[0],S,{},!0),{logLevel:l.toUpperCase(),args:S}},{shouldCaptureStackTrace:!0})}}),this._isInitialized=!1,this._installed=[],window._lr_surl_cb=this.getSessionURL.bind(this)}return(0,k.default)(LogRocket,[{key:"addEvent",value:function(e,l){var _=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},S=Date.now();this._run(function(E){E.addEvent(e,l,_objectSpread(_objectSpread({},_),{},{timeOverride:S}))})}},{key:"onLogger",value:function(e){for(this._logger=e;this._buffer.length>0;)this._buffer.shift()(this._logger)}},{key:"_run",value:function(e){if(!this._isDisabled)if(this._logger)e(this._logger);else{if(this._buffer.length>=1e3)return this._isDisabled=!0,void this.uninstall();this._buffer.push(e.bind(this))}}},{key:"init",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this._isInitialized){var _,S=l.shouldAugmentNPS,E=void 0===S||S,k=l.shouldParseXHRBlob,T=void 0!==k&&k,D=l.shouldDetectExceptions;(void 0===D||D)&&this._installed.push((0,I.registerExceptions)(this)),this._installed.push((0,R.default)(this,{shouldAugmentNPS:!!E,shouldParseXHRBlob:!!T,isDisabled:!1===(null==l||null===(_=l.network)||void 0===_?void 0:_.isEnabled)})),this._installed.push((0,O.default)(this)),this._isInitialized=!0,this._run(function(_){_.init(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=e.ingestServer,_=(0,M.default)(e,["ingestServer"]);return l?_objectSpread({serverURL:"".concat(l,"/i"),statsURL:"".concat(l,"/s")},_):_}(l))})}}},{key:"start",value:function(){this._run(function(e){e.start()})}},{key:"uninstall",value:function(){this._installed.forEach(function(e){return e()}),this._buffer=[],this._run(function(e){e.uninstall()})}},{key:"identify",value:function(e,l){this._run(function(_){_.identify(e,l)})}},{key:"startNewSession",value:function(){this._run(function(e){e.startNewSession()})}},{key:"track",value:function(e,l){this._run(function(_){_.track(e,l)})}},{key:"getSessionURL",value:function(e){if("function"!=typeof e)throw new Error("LogRocket: must pass callback to getSessionURL()");this._run(function(l){l.getSessionURL?l.getSessionURL(e):e(l.recordingURL)})}},{key:"trackScrollEvent",value:function(e){this._logger&&this._logger.trackScrollEvent(e)}},{key:"getVersion",value:function(e){this._run(function(l){e(l.version)})}},{key:"captureMessage",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};I.Capture.captureMessage(this,e,[e],l)}},{key:"captureException",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};I.Capture.captureException(this,e,l)}},{key:"version",get:function(){return this._logger&&this._logger.version}},{key:"sessionURL",get:function(){return this._logger&&this._logger.recordingURL}},{key:"recordingURL",get:function(){return this._logger&&this._logger.recordingURL}},{key:"recordingID",get:function(){return this._logger&&this._logger.recordingID}},{key:"threadID",get:function(){return this._logger&&this._logger.threadID}},{key:"tabID",get:function(){return this._logger&&this._logger.tabID}},{key:"reduxEnhancer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,D.createEnhancer)(this,e)}},{key:"reduxMiddleware",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,D.createMiddleware)(this,e)}},{key:"isDisabled",get:function(){return!!(this._isDisabled||this._logger&&this._logger._isDisabled)}}]),LogRocket}();l.default=L},"./packages/logrocket/src/makeLogRocket.js":
/*!*************************************************!*\
					  !*** ./packages/logrocket/src/makeLogRocket.js ***!
					  \*************************************************/function(e,l,_){var S=_(/*! @babel/runtime/helpers/interopRequireDefault */"./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(l,"__esModule",{value:!0}),l.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:makeNoopPolyfill,_=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return new E.default};if("undefined"!=typeof navigator&&"ReactNative"===navigator.product)throw new Error(k);if("undefined"!=typeof window){if(window._disableLogRocket)return l();if(window.MutationObserver&&window.WeakMap){window._lrMutationObserver=window.MutationObserver;var S=_();return e(S),S}}return makeNoopPolyfill()};var E=S(_(/*! ./LogRocket */"./packages/logrocket/src/LogRocket.js")),k="LogRocket on React Native requires the LogRocket React Native specific SDK. See setup guide here https://docs.logrocket.com/reference/react-native.",makeNoopPolyfill=function(){return{init:function(){},uninstall:function(){},log:function(){},info:function(){},warn:function(){},error:function(){},debug:function(){},addEvent:function(){},identify:function(){},start:function(){},get threadID(){return null},get recordingID(){return null},get recordingURL(){return null},reduxEnhancer:function(){return function(e){return function(){return e.apply(void 0,arguments)}}},reduxMiddleware:function(){return function(){return function(e){return function(l){return e(l)}}}},track:function(){},getSessionURL:function(){},getVersion:function(){},startNewSession:function(){},onLogger:function(){},setClock:function(){},captureMessage:function(){},captureException:function(){}}}},"./packages/logrocket/src/setup.js":
/*!*****************************************!*\
					  !*** ./packages/logrocket/src/setup.js ***!
					  \*****************************************/function(e,l,_){var S=_(/*! @babel/runtime/helpers/interopRequireDefault */"./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(l,"__esModule",{value:!0}),l.getDomainsAndEnv=getDomainsAndEnv,l.setupBaseSDKCONFIG=setupBaseSDKCONFIG,l.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=e.enterpriseServer,_=e.sdkVersion,S=void 0===_?"10.1.0":_,T=(0,E.default)(e,["enterpriseServer","sdkVersion"]),M=getDomainsAndEnv(S),R=M.scriptEnv,I=M.scriptOrigin,O=M.scriptIngest,D=T.sdkServer||l,L=T.ingestServer||l||O,U=(0,k.default)(function(){var e=document.createElement("script");L&&(setupBaseSDKCONFIG(L),window.__SDKCONFIG__.scriptEnv=R),D?e.src="".concat(D,"/logger.min.js"):window.__SDKCONFIG__&&window.__SDKCONFIG__.loggerURL?e.src=window.__SDKCONFIG__.loggerURL:window._lrAsyncScript?e.src=window._lrAsyncScript:e.src="".concat(I,"/logger-1.min.js"),e.async=!0,document.head.appendChild(e),e.onload=function(){"function"==typeof window._LRLogger?setTimeout(function(){U.onLogger(new window._LRLogger({sdkVersion:S}))}):U.uninstall()},e.onerror=function(){U.uninstall()}});return U};var E=S(_(/*! @babel/runtime/helpers/objectWithoutProperties */"./node_modules/@babel/runtime/helpers/objectWithoutProperties.js")),k=S(_(/*! ./makeLogRocket */"./packages/logrocket/src/makeLogRocket.js")),T={"cdn.logrocket.com":"https://r.logrocket.io","cdn.logrocket.io":"https://r.logrocket.io","cdn.lr-ingest.io":"https://r.lr-ingest.io","cdn.lr-in.com":"https://r.lr-in.com","cdn.lr-in-prod.com":"https://r.lr-in-prod.com","cdn.lr-ingest.com":"https://r.lr-ingest.com","cdn.ingest-lr.com":"https://r.ingest-lr.com","cdn.lr-intake.com":"https://r.lr-intake.com","cdn.intake-lr.com":"https://r.intake-lr.com","cdn.logr-ingest.com":"https://r.logr-ingest.com","cdn.lrkt-in.com":"https://r.lrkt-in.com","cdn.lgrckt-in.com":"https://r.lgrckt-in.com","cdn-staging.logrocket.io":"https://staging-i.logrocket.io","cdn-staging.lr-ingest.io":"https://staging-i.lr-ingest.io","cdn-staging.lr-in.com":"https://staging-i.lr-in.com","cdn-staging.lr-in-prod.com":"https://staging-i.lr-in-prod.com","cdn-staging.lr-ingest.com":"https://staging-i.lr-ingest.com","cdn-staging.ingest-lr.com":"https://staging-i.ingest-lr.com","cdn-staging.lr-intake.com":"https://staging-i.lr-intake.com","cdn-staging.intake-lr.com":"https://staging-i.intake-lr.com","cdn-staging.logr-ingest.com":"https://staging-i.logr-ingest.com","cdn-staging.lrkt-in.com":"https://staging-i.lrkt-in.com","cdn-staging.lgrckt-in.com":"https://staging-i.lgrckt-in.com"};function getDomainsAndEnv(e){if("script"===e||"shopify-pixel"===e){try{var l=document.currentScript.src.match(/^(https?:\/\/([^\\]+))\/.+$/),_=l&&l[2];if(_&&T[_])return{scriptEnv:(S=_,S.startsWith("cdn-staging")?"staging":S.startsWith("localhost")?"development":"prod"),scriptOrigin:l&&l[1],scriptIngest:T[_]}}catch(E){}return{scriptEnv:"prod",scriptOrigin:"https://cdn.logrocket.io"}}return{scriptEnv:void 0,scriptOrigin:"https://cdn.lgrckt-in.com",scriptIngest:"https://r.lgrckt-in.com"};var S}function setupBaseSDKCONFIG(e){void 0===window.__SDKCONFIG__&&(window.__SDKCONFIG__={}),window.__SDKCONFIG__.serverURL="".concat(e,"/i"),window.__SDKCONFIG__.statsURL="".concat(e,"/s")}},"./node_modules/@babel/runtime/helpers/arrayLikeToArray.js":
/*!*****************************************************************!*\
					  !*** ./node_modules/@babel/runtime/helpers/arrayLikeToArray.js ***!
					  \*****************************************************************/function(e){e.exports=function(e,l){(null==l||l>e.length)&&(l=e.length);for(var _=0,S=new Array(l);_<l;_++)S[_]=e[_];return S},e.exports.__esModule=!0,e.exports.default=e.exports},"./node_modules/@babel/runtime/helpers/arrayWithoutHoles.js":
/*!******************************************************************!*\
					  !*** ./node_modules/@babel/runtime/helpers/arrayWithoutHoles.js ***!
					  \******************************************************************/function(e,l,_){var S=_(/*! ./arrayLikeToArray.js */"./node_modules/@babel/runtime/helpers/arrayLikeToArray.js");e.exports=function(e){if(Array.isArray(e))return S(e)},e.exports.__esModule=!0,e.exports.default=e.exports},"./node_modules/@babel/runtime/helpers/classCallCheck.js":
/*!***************************************************************!*\
					  !*** ./node_modules/@babel/runtime/helpers/classCallCheck.js ***!
					  \***************************************************************/function(e){e.exports=function(e,l){if(!(e instanceof l))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},"./node_modules/@babel/runtime/helpers/createClass.js":
/*!************************************************************!*\
					  !*** ./node_modules/@babel/runtime/helpers/createClass.js ***!
					  \************************************************************/function(e,l,_){var S=_(/*! ./toPropertyKey.js */"./node_modules/@babel/runtime/helpers/toPropertyKey.js");function _defineProperties(e,l){for(var _=0;_<l.length;_++){var E=l[_];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(e,S(E.key),E)}}e.exports=function(e,l,_){return l&&_defineProperties(e.prototype,l),_&&_defineProperties(e,_),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},"./node_modules/@babel/runtime/helpers/defineProperty.js":
/*!***************************************************************!*\
					  !*** ./node_modules/@babel/runtime/helpers/defineProperty.js ***!
					  \***************************************************************/function(e,l,_){var S=_(/*! ./toPropertyKey.js */"./node_modules/@babel/runtime/helpers/toPropertyKey.js");e.exports=function(e,l,_){return(l=S(l))in e?Object.defineProperty(e,l,{value:_,enumerable:!0,configurable:!0,writable:!0}):e[l]=_,e},e.exports.__esModule=!0,e.exports.default=e.exports},"./node_modules/@babel/runtime/helpers/interopRequireDefault.js":
/*!**********************************************************************!*\
					  !*** ./node_modules/@babel/runtime/helpers/interopRequireDefault.js ***!
					  \**********************************************************************/function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},"./node_modules/@babel/runtime/helpers/iterableToArray.js":
/*!****************************************************************!*\
					  !*** ./node_modules/@babel/runtime/helpers/iterableToArray.js ***!
					  \****************************************************************/function(e){e.exports=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.__esModule=!0,e.exports.default=e.exports},"./node_modules/@babel/runtime/helpers/nonIterableSpread.js":
/*!******************************************************************!*\
					  !*** ./node_modules/@babel/runtime/helpers/nonIterableSpread.js ***!
					  \******************************************************************/function(e){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},"./node_modules/@babel/runtime/helpers/objectWithoutProperties.js":
/*!************************************************************************!*\
					  !*** ./node_modules/@babel/runtime/helpers/objectWithoutProperties.js ***!
					  \************************************************************************/function(e,l,_){var S=_(/*! ./objectWithoutPropertiesLoose.js */"./node_modules/@babel/runtime/helpers/objectWithoutPropertiesLoose.js");e.exports=function(e,l){if(null==e)return{};var _,E,k=S(e,l);if(Object.getOwnPropertySymbols){var T=Object.getOwnPropertySymbols(e);for(E=0;E<T.length;E++)_=T[E],l.indexOf(_)>=0||Object.prototype.propertyIsEnumerable.call(e,_)&&(k[_]=e[_])}return k},e.exports.__esModule=!0,e.exports.default=e.exports},"./node_modules/@babel/runtime/helpers/objectWithoutPropertiesLoose.js":
/*!*****************************************************************************!*\
					  !*** ./node_modules/@babel/runtime/helpers/objectWithoutPropertiesLoose.js ***!
					  \*****************************************************************************/function(e){e.exports=function(e,l){if(null==e)return{};var _,S,E={},k=Object.keys(e);for(S=0;S<k.length;S++)_=k[S],l.indexOf(_)>=0||(E[_]=e[_]);return E},e.exports.__esModule=!0,e.exports.default=e.exports},"./node_modules/@babel/runtime/helpers/toConsumableArray.js":
/*!******************************************************************!*\
					  !*** ./node_modules/@babel/runtime/helpers/toConsumableArray.js ***!
					  \******************************************************************/function(e,l,_){var S=_(/*! ./arrayWithoutHoles.js */"./node_modules/@babel/runtime/helpers/arrayWithoutHoles.js"),E=_(/*! ./iterableToArray.js */"./node_modules/@babel/runtime/helpers/iterableToArray.js"),k=_(/*! ./unsupportedIterableToArray.js */"./node_modules/@babel/runtime/helpers/unsupportedIterableToArray.js"),T=_(/*! ./nonIterableSpread.js */"./node_modules/@babel/runtime/helpers/nonIterableSpread.js");e.exports=function(e){return S(e)||E(e)||k(e)||T()},e.exports.__esModule=!0,e.exports.default=e.exports},"./node_modules/@babel/runtime/helpers/toPrimitive.js":
/*!************************************************************!*\
					  !*** ./node_modules/@babel/runtime/helpers/toPrimitive.js ***!
					  \************************************************************/function(e,l,_){var S=_(/*! ./typeof.js */"./node_modules/@babel/runtime/helpers/typeof.js").default;e.exports=function(e,l){if("object"!==S(e)||null===e)return e;var _=e[Symbol.toPrimitive];if(void 0!==_){var E=_.call(e,l||"default");if("object"!==S(E))return E;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===l?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},"./node_modules/@babel/runtime/helpers/toPropertyKey.js":
/*!**************************************************************!*\
					  !*** ./node_modules/@babel/runtime/helpers/toPropertyKey.js ***!
					  \**************************************************************/function(e,l,_){var S=_(/*! ./typeof.js */"./node_modules/@babel/runtime/helpers/typeof.js").default,E=_(/*! ./toPrimitive.js */"./node_modules/@babel/runtime/helpers/toPrimitive.js");e.exports=function(e){var l=E(e,"string");return"symbol"===S(l)?l:String(l)},e.exports.__esModule=!0,e.exports.default=e.exports},"./node_modules/@babel/runtime/helpers/typeof.js":
/*!*******************************************************!*\
					  !*** ./node_modules/@babel/runtime/helpers/typeof.js ***!
					  \*******************************************************/function(e){function _typeof(l){return e.exports=_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,_typeof(l)}e.exports=_typeof,e.exports.__esModule=!0,e.exports.default=e.exports},"./node_modules/@babel/runtime/helpers/unsupportedIterableToArray.js":
/*!***************************************************************************!*\
					  !*** ./node_modules/@babel/runtime/helpers/unsupportedIterableToArray.js ***!
					  \***************************************************************************/function(e,l,_){var S=_(/*! ./arrayLikeToArray.js */"./node_modules/@babel/runtime/helpers/arrayLikeToArray.js");e.exports=function(e,l){if(e){if("string"==typeof e)return S(e,l);var _=Object.prototype.toString.call(e).slice(8,-1);return"Object"===_&&e.constructor&&(_=e.constructor.name),"Map"===_||"Set"===_?Array.from(e):"Arguments"===_||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(_)?S(e,l):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports}},l={};function __webpack_require__(_){var S=l[_];if(void 0!==S)return S.exports;var E=l[_]={exports:{}};return e[_](E,E.exports,__webpack_require__),E.exports}__webpack_require__.g=function(){if("object"===("undefined"==typeof globalThis?"undefined":_typeof3(globalThis)))return globalThis;try{return this||new Function("return this")()}catch(oo){if("object"===("undefined"==typeof window?"undefined":_typeof3(window)))return window}}();var _={};return function(){var e=_,l=__webpack_require__(/*! @babel/runtime/helpers/interopRequireDefault */"./node_modules/@babel/runtime/helpers/interopRequireDefault.js");
/*!**********************************************!*\
					  !*** ./packages/logrocket/src/module-npm.js ***!
					  \**********************************************/Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var S=(0,l(__webpack_require__(/*! ./setup */"./packages/logrocket/src/setup.js")).default)();e.default=S}(),_=_.default}()})}(ot)),ot.exports);O("aq",getDefaultExportFromCjs(st));function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _inheritsLoose(e,l){e.prototype=Object.create(l.prototype),e.prototype.constructor=e,e.__proto__=l}
/*!
			 * GSAP 3.13.0
			 * https://gsap.com
			 *
			 * @license Copyright 2008-2025, GreenSock. All rights reserved.
			 * Subject to the terms at https://gsap.com/standard-license
			 * @author: Jack Doyle, jack@greensock.com
			*/var ut,lt,ct,ht,dt,ft,pt,vt,gt,mt,yt,_t={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},bt={duration:.5,overwrite:!1,delay:0},St=1e8,wt=1e-8,xt=2*Math.PI,Et=xt/4,kt=0,At=Math.sqrt,Ct=Math.cos,Tt=Math.sin,_isString=function(e){return"string"==typeof e},_isFunction=function(e){return"function"==typeof e},_isNumber=function(e){return"number"==typeof e},_isUndefined=function(e){return void 0===e},_isObject=function(e){return"object"===_typeof3(e)},_isNotFalse=function(e){return!1!==e},_windowExists$1=function(){return"undefined"!=typeof window},_isFuncOrString=function(e){return _isFunction(e)||_isString(e)},Mt="function"==typeof ArrayBuffer&&ArrayBuffer.isView||function(){},Rt=Array.isArray,It=/(?:-?\.?\d|\.)+/gi,Pt=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,Ot=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,Dt=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,Lt=/[+-]=-?[.\d]+/,Ut=/[^,'"\[\]\s]+/gi,Ft=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,Nt={},Bt={},_install=function(e){return(Bt=_merge(e,Nt))&&Dn},_missingPlugin=function(e,l){},_warn=function(e,l){return!l&&void 0},_addGlobal=function(e,l){return e&&(Nt[e]=l)&&Bt&&(Bt[e]=l)||Nt},_emptyFunc=function(){return 0},zt={suppressEvents:!0,isStart:!0,kill:!1},jt={suppressEvents:!0,kill:!1},Gt={suppressEvents:!0},Ht={},Vt=[],Wt={},qt={},Xt={},Kt=30,Yt=[],Jt="",_harness=function(e){var l,_,S=e[0];if(_isObject(S)||_isFunction(S)||(e=[e]),!(l=(S._gsap||{}).harness)){for(_=Yt.length;_--&&!Yt[_].targetTest(S););l=Yt[_]}for(_=e.length;_--;)e[_]&&(e[_]._gsap||(e[_]._gsap=new GSCache(e[_],l)))||e.splice(_,1);return e},_getCache=function(e){return e._gsap||_harness(toArray$2(e))[0]._gsap},_getProperty=function(e,l,_){return(_=e[l])&&_isFunction(_)?e[l]():_isUndefined(_)&&e.getAttribute&&e.getAttribute(l)||_},_forEachName=function(e,l){return(e=e.split(",")).forEach(l)||e},_round=function(e){return Math.round(1e5*e)/1e5||0},_roundPrecise=function(e){return Math.round(1e7*e)/1e7||0},_parseRelative=function(e,l){var _=l.charAt(0),S=parseFloat(l.substr(2));return e=parseFloat(e),"+"===_?e+S:"-"===_?e-S:"*"===_?e*S:e/S},_arrayContainsAny=function(e,l){for(var _=l.length,S=0;e.indexOf(l[S])<0&&++S<_;);return S<_},_lazyRender=function(){var e,l,_=Vt.length,S=Vt.slice(0);for(Wt={},Vt.length=0,e=0;e<_;e++)(l=S[e])&&l._lazy&&(l.render(l._lazy[0],l._lazy[1],!0)._lazy=0)},_isRevertWorthy=function(e){return!!(e._initted||e._startAt||e.add)},_lazySafeRender=function(e,l,_,S){Vt.length&&!lt&&_lazyRender(),e.render(l,_,!!(lt&&l<0&&_isRevertWorthy(e))),Vt.length&&!lt&&_lazyRender()},_numericIfPossible=function(e){var l=parseFloat(e);return(l||0===l)&&(e+"").match(Ut).length<2?l:_isString(e)?e.trim():e},_passThrough=function(e){return e},_setDefaults=function(e,l){for(var _ in l)_ in e||(e[_]=l[_]);return e},_merge=function(e,l){for(var _ in l)e[_]=l[_];return e},Qt=function _mergeDeep(e,l){for(var _ in l)"__proto__"!==_&&"constructor"!==_&&"prototype"!==_&&(e[_]=_isObject(l[_])?_mergeDeep(e[_]||(e[_]={}),l[_]):l[_]);return e},_copyExcluding=function(e,l){var _,S={};for(_ in e)_ in l||(S[_]=e[_]);return S},_inheritDefaults=function(e){var l,_=e.parent||ht,S=e.keyframes?(l=Rt(e.keyframes),function(e,_){for(var S in _)S in e||"duration"===S&&l||"ease"===S||(e[S]=_[S])}):_setDefaults;if(_isNotFalse(e.inherit))for(;_;)S(e,_.vars.defaults),_=_.parent||_._dp;return e},_addLinkedListItem=function(e,l,_,S,E){var k,T=e[S];if(E)for(k=l[E];T&&T[E]>k;)T=T._prev;return T?(l._next=T._next,T._next=l):(l._next=e[_],e[_]=l),l._next?l._next._prev=l:e[S]=l,l._prev=T,l.parent=l._dp=e,l},_removeLinkedListItem=function(e,l,_,S){void 0===_&&(_="_first"),void 0===S&&(S="_last");var E=l._prev,k=l._next;E?E._next=k:e[_]===l&&(e[_]=k),k?k._prev=E:e[S]===l&&(e[S]=E),l._next=l._prev=l.parent=null},_removeFromParent=function(e,l){e.parent&&(!l||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},_uncache=function(e,l){if(e&&(!l||l._end>e._dur||l._start<0))for(var _=e;_;)_._dirty=1,_=_.parent;return e},_rewindStartAt=function(e,l,_,S){return e._startAt&&(lt?e._startAt.revert(jt):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(l,!0,S))},Zt=function _hasNoPausedAncestors(e){return!e||e._ts&&_hasNoPausedAncestors(e.parent)},_elapsedCycleDuration=function(e){return e._repeat?_animationCycle(e._tTime,e=e.duration()+e._rDelay)*e:0},_animationCycle=function(e,l){var _=Math.floor(e=_roundPrecise(e/l));return e&&_===e?_-1:_},_parentToChildTotalTime=function(e,l){return(e-l._start)*l._ts+(l._ts>=0?0:l._dirty?l.totalDuration():l._tDur)},_setEnd=function(e){return e._end=_roundPrecise(e._start+(e._tDur/Math.abs(e._ts||e._rts||wt)||0))},_alignPlayhead=function(e,l){var _=e._dp;return _&&_.smoothChildTiming&&e._ts&&(e._start=_roundPrecise(_._time-(e._ts>0?l/e._ts:((e._dirty?e.totalDuration():e._tDur)-l)/-e._ts)),_setEnd(e),_._dirty||_uncache(_,e)),e},_postAddChecks=function(e,l){var _;if((l._time||!l._dur&&l._initted||l._start<e._time&&(l._dur||!l.add))&&(_=_parentToChildTotalTime(e.rawTime(),l),(!l._dur||_clamp(0,l.totalDuration(),_)-l._tTime>wt)&&l.render(_,!0)),_uncache(e,l)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(_=e;_._dp;)_.rawTime()>=0&&_.totalTime(_._tTime),_=_._dp;e._zTime=-1e-8}},_addToTimeline=function(e,l,_,S){return l.parent&&_removeFromParent(l),l._start=_roundPrecise((_isNumber(_)?_:_||e!==ht?tn(e,_,l):e._time)+l._delay),l._end=_roundPrecise(l._start+(l.totalDuration()/Math.abs(l.timeScale())||0)),_addLinkedListItem(e,l,"_first","_last",e._sort?"_start":0),_isFromOrFromStart(l)||(e._recent=l),S||_postAddChecks(e,l),e._ts<0&&_alignPlayhead(e,e._tTime),e},_scrollTrigger=function(e,l){return Nt.ScrollTrigger?Nt.ScrollTrigger.create(l,e):void 0},_attemptInitTween=function(e,l,_,S,E){return Sn(e,l,E),e._initted?!_&&e._pt&&!lt&&(e._dur&&!1!==e.vars.lazy||!e._dur&&e.vars.lazy)&&gt!==cn.frame?(Vt.push(e),e._lazy=[E,S],1):void 0:1},$t=function _parentPlayheadIsBeforeStart(e){var l=e.parent;return l&&l._ts&&l._initted&&!l._lock&&(l.rawTime()<0||_parentPlayheadIsBeforeStart(l))},_isFromOrFromStart=function(e){var l=e.data;return"isFromStart"===l||"isStart"===l},_setDuration=function(e,l,_,S){var E=e._repeat,k=_roundPrecise(l)||0,T=e._tTime/e._tDur;return T&&!S&&(e._time*=k/e._dur),e._dur=k,e._tDur=E?E<0?1e10:_roundPrecise(k*(E+1)+e._rDelay*E):k,T>0&&!S&&_alignPlayhead(e,e._tTime=e._tDur*T),e.parent&&_setEnd(e),_||_uncache(e.parent,e),e},_onUpdateTotalDuration=function(e){return e instanceof yn?_uncache(e):_setDuration(e,e._dur)},en={_start:0,endTime:_emptyFunc,totalDuration:_emptyFunc},tn=function _parsePosition(e,l,_){var S,E,k,T=e.labels,M=e._recent||en,R=e.duration()>=St?M.endTime(!1):e._dur;return _isString(l)&&(isNaN(l)||l in T)?(E=l.charAt(0),k="%"===l.substr(-1),S=l.indexOf("="),"<"===E||">"===E?(S>=0&&(l=l.replace(/=/,"")),("<"===E?M._start:M.endTime(M._repeat>=0))+(parseFloat(l.substr(1))||0)*(k?(S<0?M:_).totalDuration()/100:1)):S<0?(l in T||(T[l]=R),T[l]):(E=parseFloat(l.charAt(S-1)+l.substr(S+1)),k&&_&&(E=E/100*(Rt(_)?_[0]:_).totalDuration()),S>1?_parsePosition(e,l.substr(0,S-1),_)+E:R+E)):null==l?R:+l},_createTweenType=function(e,l,_){var S,E,k=_isNumber(l[1]),T=(k?2:1)+(e<2?0:1),M=l[T];if(k&&(M.duration=l[1]),M.parent=_,e){for(S=M,E=_;E&&!("immediateRender"in S);)S=E.vars.defaults||{},E=_isNotFalse(E.vars.inherit)&&E.parent;M.immediateRender=_isNotFalse(S.immediateRender),e<2?M.runBackwards=1:M.startAt=l[T-1]}return new En(l[0],M,l[T+1])},_conditionalReturn=function(e,l){return e||0===e?l(e):l},_clamp=function(e,l,_){return _<e?e:_>l?l:_},getUnit=function(e,l){return _isString(e)&&(l=Ft.exec(e))?l[1]:""},nn=[].slice,_isArrayLike=function(e,l){return e&&_isObject(e)&&"length"in e&&(!l&&!e.length||e.length-1 in e&&_isObject(e[0]))&&!e.nodeType&&e!==dt},toArray$2=function(e,l,_){return ct&&!l&&ct.selector?ct.selector(e):!_isString(e)||_||!ft&&_wake()?Rt(e)?function(e,l,_){return void 0===_&&(_=[]),e.forEach(function(e){var S;return _isString(e)&&!l||_isArrayLike(e,1)?(S=_).push.apply(S,toArray$2(e)):_.push(e)})||_}(e,_):_isArrayLike(e)?nn.call(e,0):e?[e]:[]:nn.call((l||pt).querySelectorAll(e),0)},selector=function(e){return e=toArray$2(e)[0]||_warn()||{},function(l){var _=e.current||e.nativeElement||e;return toArray$2(l,_.querySelectorAll?_:_===e?_warn()||pt.createElement("div"):e)}},shuffle=function(e){return e.sort(function(){return.5-Math.random()})},distribute=function(e){if(_isFunction(e))return e;var l=_isObject(e)?e:{each:e},_=_parseEase(l.ease),S=l.from||0,E=parseFloat(l.base)||0,k={},T=S>0&&S<1,M=isNaN(S)||T,R=l.axis,I=S,O=S;return _isString(S)?I=O={center:.5,edges:.5,end:1}[S]||0:!T&&M&&(I=S[0],O=S[1]),function(e,T,D){var L,U,B,z,j,G,H,V,W,q=(D||l).length,X=k[q];if(!X){if(!(W="auto"===l.grid?0:(l.grid||[1,St])[1])){for(H=-1e8;H<(H=D[W++].getBoundingClientRect().left)&&W<q;);W<q&&W--}for(X=k[q]=[],L=M?Math.min(W,q)*I-.5:S%W,U=W===St?0:M?q*O/W-.5:S/W|0,H=0,V=St,G=0;G<q;G++)B=G%W-L,z=U-(G/W|0),X[G]=j=R?Math.abs("y"===R?z:B):At(B*B+z*z),j>H&&(H=j),j<V&&(V=j);"random"===S&&shuffle(X),X.max=H-V,X.min=V,X.v=q=(parseFloat(l.amount)||parseFloat(l.each)*(W>q?q-1:R?"y"===R?q/W:W:Math.max(W,q/W))||0)*("edges"===S?-1:1),X.b=q<0?E-q:E,X.u=getUnit(l.amount||l.each)||0,_=_&&q<0?_invertEase(_):_}return q=(X[e]-X.min)/X.max||0,_roundPrecise(X.b+(_?_(q):q)*X.v)+X.u}},_roundModifier=function(e){var l=Math.pow(10,((e+"").split(".")[1]||"").length);return function(_){var S=_roundPrecise(Math.round(parseFloat(_)/e)*e*l);return(S-S%1)/l+(_isNumber(_)?0:getUnit(_))}},snap=function(e,l){var _,S,E=Rt(e);return!E&&_isObject(e)&&(_=E=e.radius||St,e.values?(e=toArray$2(e.values),(S=!_isNumber(e[0]))&&(_*=_)):e=_roundModifier(e.increment)),_conditionalReturn(l,E?_isFunction(e)?function(l){return S=e(l),Math.abs(S-l)<=_?S:l}:function(l){for(var E,k,T=parseFloat(S?l.x:l),M=parseFloat(S?l.y:0),R=St,I=0,O=e.length;O--;)(E=S?(E=e[O].x-T)*E+(k=e[O].y-M)*k:Math.abs(e[O]-T))<R&&(R=E,I=O);return I=!_||R<=_?e[I]:l,S||I===l||_isNumber(l)?I:I+getUnit(l)}:_roundModifier(e))},random=function(e,l,_,S){return _conditionalReturn(Rt(e)?!l:!0===_?!!(_=0):!S,function(){return Rt(e)?e[~~(Math.random()*e.length)]:(_=_||1e-5)&&(S=_<1?Math.pow(10,(_+"").length-2):1)&&Math.floor(Math.round((e-_/2+Math.random()*(l-e+.99*_))/_)*_*S)/S})},_wrapArray=function(e,l,_){return _conditionalReturn(_,function(_){return e[~~l(_)]})},_replaceRandom=function(e){for(var l,_,S,E,k=0,T="";~(l=e.indexOf("random(",k));)S=e.indexOf(")",l),E="["===e.charAt(l+7),_=e.substr(l+7,S-l-7).match(E?Ut:It),T+=e.substr(k,l-k)+random(E?_:+_[0],E?0:+_[1],+_[2]||1e-5),k=S+1;return T+e.substr(k,e.length-k)},mapRange=function(e,l,_,S,E){var k=l-e,T=S-_;return _conditionalReturn(E,function(l){return _+((l-e)/k*T||0)})},_getLabelInDirection=function(e,l,_){var S,E,k,T=e.labels,M=St;for(S in T)(E=T[S]-l)<0==!!_&&E&&M>(E=Math.abs(E))&&(k=S,M=E);return k},_callback=function(e,l,_){var S,E,k,T=e.vars,M=T[l],R=ct,I=e._ctx;if(M)return S=T[l+"Params"],E=T.callbackScope||e,_&&Vt.length&&_lazyRender(),I&&(ct=I),k=S?M.apply(E,S):M.call(E),ct=R,k},_interrupt=function(e){return _removeFromParent(e),e.scrollTrigger&&e.scrollTrigger.kill(!!lt),e.progress()<1&&_callback(e,"onInterrupt"),e},rn=[],_createPlugin=function(e){if(e)if(e=!e.name&&e.default||e,_windowExists$1()||e.headless){var l=e.name,_=_isFunction(e),S=l&&!_&&e.init?function(){this._props=[]}:e,E={init:_emptyFunc,render:_renderPropTweens,add:_addPropTween,kill:_killPropTweensOf,modifier:_addPluginModifier,rawVars:0},k={targetTest:0,get:0,getSetter:_getSetter,aliases:{},register:0};if(_wake(),e!==S){if(qt[l])return;_setDefaults(S,_setDefaults(_copyExcluding(e,E),k)),_merge(S.prototype,_merge(E,_copyExcluding(e,k))),qt[S.prop=l]=S,e.targetTest&&(Yt.push(S),Ht[l]=1),l=("css"===l?"CSS":l.charAt(0).toUpperCase()+l.substr(1))+"Plugin"}_addGlobal(l,S),e.register&&e.register(Dn,S,kn)}else rn.push(e)},an=255,sn={aqua:[0,an,an],lime:[0,an,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,an],navy:[0,0,128],white:[an,an,an],olive:[128,128,0],yellow:[an,an,0],orange:[an,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[an,0,0],pink:[an,192,203],cyan:[0,an,an],transparent:[an,an,an,0]},_hue=function(e,l,_){return(6*(e+=e<0?1:e>1?-1:0)<1?l+(_-l)*e*6:e<.5?_:3*e<2?l+(_-l)*(2/3-e)*6:l)*an+.5|0},splitColor$1=function(e,l,_){var S,E,k,T,M,R,I,O,D,L,U=e?_isNumber(e)?[e>>16,e>>8&an,e&an]:0:sn.black;if(!U){if(","===e.substr(-1)&&(e=e.substr(0,e.length-1)),sn[e])U=sn[e];else if("#"===e.charAt(0)){if(e.length<6&&(S=e.charAt(1),E=e.charAt(2),k=e.charAt(3),e="#"+S+S+E+E+k+k+(5===e.length?e.charAt(4)+e.charAt(4):"")),9===e.length)return[(U=parseInt(e.substr(1,6),16))>>16,U>>8&an,U&an,parseInt(e.substr(7),16)/255];U=[(e=parseInt(e.substr(1),16))>>16,e>>8&an,e&an]}else if("hsl"===e.substr(0,3))if(U=L=e.match(It),l){if(~e.indexOf("="))return U=e.match(Pt),_&&U.length<4&&(U[3]=1),U}else T=+U[0]%360/360,M=+U[1]/100,S=2*(R=+U[2]/100)-(E=R<=.5?R*(M+1):R+M-R*M),U.length>3&&(U[3]*=1),U[0]=_hue(T+1/3,S,E),U[1]=_hue(T,S,E),U[2]=_hue(T-1/3,S,E);else U=e.match(It)||sn.transparent;U=U.map(Number)}return l&&!L&&(S=U[0]/an,E=U[1]/an,k=U[2]/an,R=((I=Math.max(S,E,k))+(O=Math.min(S,E,k)))/2,I===O?T=M=0:(D=I-O,M=R>.5?D/(2-I-O):D/(I+O),T=I===S?(E-k)/D+(E<k?6:0):I===E?(k-S)/D+2:(S-E)/D+4,T*=60),U[0]=~~(T+.5),U[1]=~~(100*M+.5),U[2]=~~(100*R+.5)),_&&U.length<4&&(U[3]=1),U},_colorOrderData=function(e){var l=[],_=[],S=-1;return e.split(un).forEach(function(e){var E=e.match(Ot)||[];l.push.apply(l,E),_.push(S+=E.length+1)}),l.c=_,l},_formatColors=function(e,l,_){var S,E,k,T,M="",R=(e+M).match(un),I=l?"hsla(":"rgba(",O=0;if(!R)return e;if(R=R.map(function(e){return(e=splitColor$1(e,l,1))&&I+(l?e[0]+","+e[1]+"%,"+e[2]+"%,"+e[3]:e.join(","))+")"}),_&&(k=_colorOrderData(e),(S=_.c).join(M)!==k.c.join(M)))for(T=(E=e.replace(un,"1").split(Ot)).length-1;O<T;O++)M+=E[O]+(~S.indexOf(O)?R.shift()||I+"0,0,0,0)":(k.length?k:R.length?R:_).shift());if(!E)for(T=(E=e.split(un)).length-1;O<T;O++)M+=E[O]+R[O];return M+E[T]},un=function(){var e,l="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b";for(e in sn)l+="|"+e+"\\b";return new RegExp(l+")","gi")}(),ln=/hsl[a]?\(/,_colorStringFilter=function(e){var l,_=e.join(" ");if(un.lastIndex=0,un.test(_))return l=ln.test(_),e[1]=_formatColors(e[1],l),e[0]=_formatColors(e[0],l,_colorOrderData(e[1])),!0},cn=function(){var e,l,_,S,E,k,T=Date.now,M=500,R=33,I=T(),O=I,D=1e3/240,L=D,U=[],B=function _tick(_){var B,z,j,G,H=T()-O,V=!0===_;if((H>M||H<0)&&(I+=H-R),((B=(j=(O+=H)-I)-L)>0||V)&&(G=++S.frame,E=j-1e3*S.time,S.time=j/=1e3,L+=B+(B>=D?4:D-B),z=1),V||(e=l(_tick)),z)for(k=0;k<U.length;k++)U[k](j,E,G,_)};return S={time:0,frame:0,tick:function(){B(!0)},deltaRatio:function(e){return E/(1e3/(e||60))},wake:function(){vt&&(!ft&&_windowExists$1()&&(dt=ft=window,pt=dt.document||{},Nt.gsap=Dn,(dt.gsapVersions||(dt.gsapVersions=[])).push(Dn.version),_install(Bt||dt.GreenSockGlobals||!dt.gsap&&dt||{}),rn.forEach(_createPlugin)),_="undefined"!=typeof requestAnimationFrame&&requestAnimationFrame,e&&S.sleep(),l=_||function(e){return setTimeout(e,L-1e3*S.time+1|0)},yt=1,B(2))},sleep:function(){(_?cancelAnimationFrame:clearTimeout)(e),yt=0,l=_emptyFunc},lagSmoothing:function(e,l){M=e||1/0,R=Math.min(l||33,M)},fps:function(e){D=1e3/(e||240),L=1e3*S.time+D},add:function(e,l,_){var E=l?function(l,_,k,T){e(l,_,k,T),S.remove(E)}:e;return S.remove(e),U[_?"unshift":"push"](E),_wake(),E},remove:function(e,l){~(l=U.indexOf(e))&&U.splice(l,1)&&k>=l&&k--},_listeners:U},S}(),_wake=function(){return!yt&&cn.wake()},hn={},dn=/^[\d.\-M][\d.\-,\s]/,fn=/["']/g,_parseObjectInString=function(e){for(var l,_,S,E={},k=e.substr(1,e.length-3).split(":"),T=k[0],M=1,R=k.length;M<R;M++)_=k[M],l=M!==R-1?_.lastIndexOf(","):_.length,S=_.substr(0,l),E[T]=isNaN(S)?S.replace(fn,"").trim():+S,T=_.substr(l+1).trim();return E},_invertEase=function(e){return function(l){return 1-e(1-l)}},pn=function _propagateYoyoEase(e,l){for(var _,S=e._first;S;)S instanceof yn?_propagateYoyoEase(S,l):!S.vars.yoyoEase||S._yoyo&&S._repeat||S._yoyo===l||(S.timeline?_propagateYoyoEase(S.timeline,l):(_=S._ease,S._ease=S._yEase,S._yEase=_,S._yoyo=l)),S=S._next},_parseEase=function(e,l){return e&&(_isFunction(e)?e:hn[e]||function(e){var l,_,S,E,k=(e+"").split("("),T=hn[k[0]];return T&&k.length>1&&T.config?T.config.apply(null,~e.indexOf("{")?[_parseObjectInString(k[1])]:(l=e,_=l.indexOf("(")+1,S=l.indexOf(")"),E=l.indexOf("(",_),l.substring(_,~E&&E<S?l.indexOf(")",S+1):S)).split(",").map(_numericIfPossible)):hn._CE&&dn.test(e)?hn._CE("",e):T}(e))||l},_insertEase=function(e,l,_,S){void 0===_&&(_=function(e){return 1-l(1-e)}),void 0===S&&(S=function(e){return e<.5?l(2*e)/2:1-l(2*(1-e))/2});var E,k={easeIn:l,easeOut:_,easeInOut:S};return _forEachName(e,function(e){for(var l in hn[e]=Nt[e]=k,hn[E=e.toLowerCase()]=_,k)hn[E+("easeIn"===l?".in":"easeOut"===l?".out":".inOut")]=hn[e+"."+l]=k[l]}),k},_easeInOutFromOut=function(e){return function(l){return l<.5?(1-e(1-2*l))/2:.5+e(2*(l-.5))/2}},vn=function _configElastic(e,l,_){var S=l>=1?l:1,E=(_||(e?.3:.45))/(l<1?l:1),k=E/xt*(Math.asin(1/S)||0),easeOut=function(e){return 1===e?1:S*Math.pow(2,-10*e)*Tt((e-k)*E)+1},T="out"===e?easeOut:"in"===e?function(e){return 1-easeOut(1-e)}:_easeInOutFromOut(easeOut);return E=xt/E,T.config=function(l,_){return _configElastic(e,l,_)},T},gn=function _configBack(e,l){void 0===l&&(l=1.70158);var easeOut=function(e){return e?--e*e*((l+1)*e+l)+1:0},_="out"===e?easeOut:"in"===e?function(e){return 1-easeOut(1-e)}:_easeInOutFromOut(easeOut);return _.config=function(l){return _configBack(e,l)},_};_forEachName("Linear,Quad,Cubic,Quart,Quint,Strong",function(e,l){var _=l<5?l+1:l;_insertEase(e+",Power"+(_-1),l?function(e){return Math.pow(e,_)}:function(e){return e},function(e){return 1-Math.pow(1-e,_)},function(e){return e<.5?Math.pow(2*e,_)/2:1-Math.pow(2*(1-e),_)/2})}),hn.Linear.easeNone=hn.none=hn.Linear.easeIn,_insertEase("Elastic",vn("in"),vn("out"),vn()),function(e,l){var _=1/l,S=2*_,E=2.5*_,easeOut=function(k){return k<_?e*k*k:k<S?e*Math.pow(k-1.5/l,2)+.75:k<E?e*(k-=2.25/l)*k+.9375:e*Math.pow(k-2.625/l,2)+.984375};_insertEase("Bounce",function(e){return 1-easeOut(1-e)},easeOut)}(7.5625,2.75),_insertEase("Expo",function(e){return Math.pow(2,10*(e-1))*e+e*e*e*e*e*e*(1-e)}),_insertEase("Circ",function(e){return-(At(1-e*e)-1)}),_insertEase("Sine",function(e){return 1===e?1:1-Ct(e*Et)}),_insertEase("Back",gn("in"),gn("out"),gn()),hn.SteppedEase=hn.steps=Nt.SteppedEase={config:function(e,l){void 0===e&&(e=1);var _=1/e,S=e+(l?0:1),E=l?1:0;return function(e){return((S*_clamp(0,.99999999,e)|0)+E)*_}}},bt.ease=hn["quad.out"],_forEachName("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(e){return Jt+=e+","+e+"Params,"});var GSCache=function(e,l){this.id=kt++,e._gsap=this,this.target=e,this.harness=l,this.get=l?l.get:_getProperty,this.set=l?l.getSetter:_getSetter},mn=function(){function Animation(e){this.vars=e,this._delay=+e.delay||0,(this._repeat=e.repeat===1/0?-2:e.repeat||0)&&(this._rDelay=e.repeatDelay||0,this._yoyo=!!e.yoyo||!!e.yoyoEase),this._ts=1,_setDuration(this,+e.duration,1,1),this.data=e.data,ct&&(this._ctx=ct,ct.data.push(this)),yt||cn.wake()}var e=Animation.prototype;return e.delay=function(e){return e||0===e?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+e-this._delay),this._delay=e,this):this._delay},e.duration=function(e){return arguments.length?this.totalDuration(this._repeat>0?e+(e+this._rDelay)*this._repeat:e):this.totalDuration()&&this._dur},e.totalDuration=function(e){return arguments.length?(this._dirty=0,_setDuration(this,this._repeat<0?e:(e-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(e,l){if(_wake(),!arguments.length)return this._tTime;var _=this._dp;if(_&&_.smoothChildTiming&&this._ts){for(_alignPlayhead(this,e),!_._dp||_.parent||_postAddChecks(_,this);_&&_.parent;)_.parent._time!==_._start+(_._ts>=0?_._tTime/_._ts:(_.totalDuration()-_._tTime)/-_._ts)&&_.totalTime(_._tTime,!0),_=_.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&e<this._tDur||this._ts<0&&e>0||!this._tDur&&!e)&&_addToTimeline(this._dp,this,this._start-this._delay)}return(this._tTime!==e||!this._dur&&!l||this._initted&&Math.abs(this._zTime)===wt||!e&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=e),_lazySafeRender(this,e,l)),this},e.time=function(e,l){return arguments.length?this.totalTime(Math.min(this.totalDuration(),e+_elapsedCycleDuration(this))%(this._dur+this._rDelay)||(e?this._dur:0),l):this._time},e.totalProgress=function(e,l){return arguments.length?this.totalTime(this.totalDuration()*e,l):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},e.progress=function(e,l){return arguments.length?this.totalTime(this.duration()*(!this._yoyo||1&this.iteration()?e:1-e)+_elapsedCycleDuration(this),l):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},e.iteration=function(e,l){var _=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(e-1)*_,l):this._repeat?_animationCycle(this._tTime,_)+1:1},e.timeScale=function(e,l){if(!arguments.length)return-1e-8===this._rts?0:this._rts;if(this._rts===e)return this;var _=this.parent&&this._ts?_parentToChildTotalTime(this.parent._time,this):this._tTime;return this._rts=+e||0,this._ts=this._ps||-1e-8===e?0:this._rts,this.totalTime(_clamp(-Math.abs(this._delay),this.totalDuration(),_),!1!==l),_setEnd(this),function(e){for(var l=e.parent;l&&l.parent;)l._dirty=1,l.totalDuration(),l=l.parent;return e}(this)},e.paused=function(e){return arguments.length?(this._ps!==e&&(this._ps=e,e?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(_wake(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,1===this.progress()&&Math.abs(this._zTime)!==wt&&(this._tTime-=wt)))),this):this._ps},e.startTime=function(e){if(arguments.length){this._start=e;var l=this.parent||this._dp;return l&&(l._sort||!this.parent)&&_addToTimeline(l,this,e-this._delay),this}return this._start},e.endTime=function(e){return this._start+(_isNotFalse(e)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(e){var l=this.parent||this._dp;return l?e&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?_parentToChildTotalTime(l.rawTime(e),this):this._tTime:this._tTime},e.revert=function(e){void 0===e&&(e=Gt);var l=lt;return lt=e,_isRevertWorthy(this)&&(this.timeline&&this.timeline.revert(e),this.totalTime(-.01,e.suppressEvents)),"nested"!==this.data&&!1!==e.kill&&this.kill(),lt=l,this},e.globalTime=function(e){for(var l=this,_=arguments.length?e:l.rawTime();l;)_=l._start+_/(Math.abs(l._ts)||1),l=l._dp;return!this.parent&&this._sat?this._sat.globalTime(e):_},e.repeat=function(e){return arguments.length?(this._repeat=e===1/0?-2:e,_onUpdateTotalDuration(this)):-2===this._repeat?1/0:this._repeat},e.repeatDelay=function(e){if(arguments.length){var l=this._time;return this._rDelay=e,_onUpdateTotalDuration(this),l?this.time(l):this}return this._rDelay},e.yoyo=function(e){return arguments.length?(this._yoyo=e,this):this._yoyo},e.seek=function(e,l){return this.totalTime(tn(this,e),_isNotFalse(l))},e.restart=function(e,l){return this.play().totalTime(e?-this._delay:0,_isNotFalse(l)),this._dur||(this._zTime=-1e-8),this},e.play=function(e,l){return null!=e&&this.seek(e,l),this.reversed(!1).paused(!1)},e.reverse=function(e,l){return null!=e&&this.seek(e||this.totalDuration(),l),this.reversed(!0).paused(!1)},e.pause=function(e,l){return null!=e&&this.seek(e,l),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(e){return arguments.length?(!!e!==this.reversed()&&this.timeScale(-this._rts||(e?-1e-8:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-1e-8,this},e.isActive=function(){var e,l=this.parent||this._dp,_=this._start;return!(l&&!(this._ts&&this._initted&&l.isActive()&&(e=l.rawTime(!0))>=_&&e<this.endTime(!0)-wt))},e.eventCallback=function(e,l,_){var S=this.vars;return arguments.length>1?(l?(S[e]=l,_&&(S[e+"Params"]=_),"onUpdate"===e&&(this._onUpdate=l)):delete S[e],this):S[e]},e.then=function(e){var l=this;return new Promise(function(_){var S=_isFunction(e)?e:_passThrough,_resolve=function(){var e=l.then;l.then=null,_isFunction(S)&&(S=S(l))&&(S.then||S===l)&&(l.then=e),_(S),l.then=e};l._initted&&1===l.totalProgress()&&l._ts>=0||!l._tTime&&l._ts<0?_resolve():l._prom=_resolve})},e.kill=function(){_interrupt(this)},Animation}();_setDefaults(mn.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-1e-8,_prom:0,_ps:!1,_rts:1});var yn=function(e){function Timeline(l,_){var S;return void 0===l&&(l={}),(S=e.call(this,l)||this).labels={},S.smoothChildTiming=!!l.smoothChildTiming,S.autoRemoveChildren=!!l.autoRemoveChildren,S._sort=_isNotFalse(l.sortChildren),ht&&_addToTimeline(l.parent||ht,_assertThisInitialized(S),_),l.reversed&&S.reverse(),l.paused&&S.paused(!0),l.scrollTrigger&&_scrollTrigger(_assertThisInitialized(S),l.scrollTrigger),S}_inheritsLoose(Timeline,e);var l=Timeline.prototype;return l.to=function(e,l,_){return _createTweenType(0,arguments,this),this},l.from=function(e,l,_){return _createTweenType(1,arguments,this),this},l.fromTo=function(e,l,_,S){return _createTweenType(2,arguments,this),this},l.set=function(e,l,_){return l.duration=0,l.parent=this,_inheritDefaults(l).repeatDelay||(l.repeat=0),l.immediateRender=!!l.immediateRender,new En(e,l,tn(this,_),1),this},l.call=function(e,l,_){return _addToTimeline(this,En.delayedCall(0,e,l),_)},l.staggerTo=function(e,l,_,S,E,k,T){return _.duration=l,_.stagger=_.stagger||S,_.onComplete=k,_.onCompleteParams=T,_.parent=this,new En(e,_,tn(this,E)),this},l.staggerFrom=function(e,l,_,S,E,k,T){return _.runBackwards=1,_inheritDefaults(_).immediateRender=_isNotFalse(_.immediateRender),this.staggerTo(e,l,_,S,E,k,T)},l.staggerFromTo=function(e,l,_,S,E,k,T,M){return S.startAt=_,_inheritDefaults(S).immediateRender=_isNotFalse(S.immediateRender),this.staggerTo(e,l,S,E,k,T,M)},l.render=function(e,l,_){var S,E,k,T,M,R,I,O,D,L,U,B,z=this._time,j=this._dirty?this.totalDuration():this._tDur,G=this._dur,H=e<=0?0:_roundPrecise(e),V=this._zTime<0!=e<0&&(this._initted||!G);if(this!==ht&&H>j&&e>=0&&(H=j),H!==this._tTime||_||V){if(z!==this._time&&G&&(H+=this._time-z,e+=this._time-z),S=H,D=this._start,R=!(O=this._ts),V&&(G||(z=this._zTime),(e||!l)&&(this._zTime=e)),this._repeat){if(U=this._yoyo,M=G+this._rDelay,this._repeat<-1&&e<0)return this.totalTime(100*M+e,l,_);if(S=_roundPrecise(H%M),H===j?(T=this._repeat,S=G):((T=~~(L=_roundPrecise(H/M)))&&T===L&&(S=G,T--),S>G&&(S=G)),L=_animationCycle(this._tTime,M),!z&&this._tTime&&L!==T&&this._tTime-L*M-this._dur<=0&&(L=T),U&&1&T&&(S=G-S,B=1),T!==L&&!this._lock){var W=U&&1&L,q=W===(U&&1&T);if(T<L&&(W=!W),z=W?0:H%G?G:H,this._lock=1,this.render(z||(B?0:_roundPrecise(T*M)),l,!G)._lock=0,this._tTime=H,!l&&this.parent&&_callback(this,"onRepeat"),this.vars.repeatRefresh&&!B&&(this.invalidate()._lock=1),z&&z!==this._time||R!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(G=this._dur,j=this._tDur,q&&(this._lock=2,z=W?G:-1e-4,this.render(z,!0),this.vars.repeatRefresh&&!B&&this.invalidate()),this._lock=0,!this._ts&&!R)return this;pn(this,B)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(I=function(e,l,_){var S;if(_>l)for(S=e._first;S&&S._start<=_;){if("isPause"===S.data&&S._start>l)return S;S=S._next}else for(S=e._last;S&&S._start>=_;){if("isPause"===S.data&&S._start<l)return S;S=S._prev}}(this,_roundPrecise(z),_roundPrecise(S)),I&&(H-=S-(S=I._start))),this._tTime=H,this._time=S,this._act=!O,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=e,z=0),!z&&H&&!l&&!L&&(_callback(this,"onStart"),this._tTime!==H))return this;if(S>=z&&e>=0)for(E=this._first;E;){if(k=E._next,(E._act||S>=E._start)&&E._ts&&I!==E){if(E.parent!==this)return this.render(e,l,_);if(E.render(E._ts>0?(S-E._start)*E._ts:(E._dirty?E.totalDuration():E._tDur)+(S-E._start)*E._ts,l,_),S!==this._time||!this._ts&&!R){I=0,k&&(H+=this._zTime=-1e-8);break}}E=k}else{E=this._last;for(var X=e<0?e:S;E;){if(k=E._prev,(E._act||X<=E._end)&&E._ts&&I!==E){if(E.parent!==this)return this.render(e,l,_);if(E.render(E._ts>0?(X-E._start)*E._ts:(E._dirty?E.totalDuration():E._tDur)+(X-E._start)*E._ts,l,_||lt&&_isRevertWorthy(E)),S!==this._time||!this._ts&&!R){I=0,k&&(H+=this._zTime=X?-1e-8:wt);break}}E=k}}if(I&&!l&&(this.pause(),I.render(S>=z?0:-1e-8)._zTime=S>=z?1:-1,this._ts))return this._start=D,_setEnd(this),this.render(e,l,_);this._onUpdate&&!l&&_callback(this,"onUpdate",!0),(H===j&&this._tTime>=this.totalDuration()||!H&&z)&&(D!==this._start&&Math.abs(O)===Math.abs(this._ts)||this._lock||((e||!G)&&(H===j&&this._ts>0||!H&&this._ts<0)&&_removeFromParent(this,1),l||e<0&&!z||!H&&!z&&j||(_callback(this,H===j&&e>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(H<j&&this.timeScale()>0)&&this._prom())))}return this},l.add=function(e,l){var _=this;if(_isNumber(l)||(l=tn(this,l,e)),!(e instanceof mn)){if(Rt(e))return e.forEach(function(e){return _.add(e,l)}),this;if(_isString(e))return this.addLabel(e,l);if(!_isFunction(e))return this;e=En.delayedCall(0,e)}return this!==e?_addToTimeline(this,e,l):this},l.getChildren=function(e,l,_,S){void 0===e&&(e=!0),void 0===l&&(l=!0),void 0===_&&(_=!0),void 0===S&&(S=-1e8);for(var E=[],k=this._first;k;)k._start>=S&&(k instanceof En?l&&E.push(k):(_&&E.push(k),e&&E.push.apply(E,k.getChildren(!0,l,_)))),k=k._next;return E},l.getById=function(e){for(var l=this.getChildren(1,1,1),_=l.length;_--;)if(l[_].vars.id===e)return l[_]},l.remove=function(e){return _isString(e)?this.removeLabel(e):_isFunction(e)?this.killTweensOf(e):(e.parent===this&&_removeLinkedListItem(this,e),e===this._recent&&(this._recent=this._last),_uncache(this))},l.totalTime=function(l,_){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=_roundPrecise(cn.time-(this._ts>0?l/this._ts:(this.totalDuration()-l)/-this._ts))),e.prototype.totalTime.call(this,l,_),this._forcing=0,this):this._tTime},l.addLabel=function(e,l){return this.labels[e]=tn(this,l),this},l.removeLabel=function(e){return delete this.labels[e],this},l.addPause=function(e,l,_){var S=En.delayedCall(0,l||_emptyFunc,_);return S.data="isPause",this._hasPause=1,_addToTimeline(this,S,tn(this,e))},l.removePause=function(e){var l=this._first;for(e=tn(this,e);l;)l._start===e&&"isPause"===l.data&&_removeFromParent(l),l=l._next},l.killTweensOf=function(e,l,_){for(var S=this.getTweensOf(e,_),E=S.length;E--;)_n!==S[E]&&S[E].kill(e,l);return this},l.getTweensOf=function(e,l){for(var _,S=[],E=toArray$2(e),k=this._first,T=_isNumber(l);k;)k instanceof En?_arrayContainsAny(k._targets,E)&&(T?(!_n||k._initted&&k._ts)&&k.globalTime(0)<=l&&k.globalTime(k.totalDuration())>l:!l||k.isActive())&&S.push(k):(_=k.getTweensOf(E,l)).length&&S.push.apply(S,_),k=k._next;return S},l.tweenTo=function(e,l){l=l||{};var _,S=this,E=tn(S,e),k=l,T=k.startAt,M=k.onStart,R=k.onStartParams,I=k.immediateRender,O=En.to(S,_setDefaults({ease:l.ease||"none",lazy:!1,immediateRender:!1,time:E,overwrite:"auto",duration:l.duration||Math.abs((E-(T&&"time"in T?T.time:S._time))/S.timeScale())||wt,onStart:function(){if(S.pause(),!_){var e=l.duration||Math.abs((E-(T&&"time"in T?T.time:S._time))/S.timeScale());O._dur!==e&&_setDuration(O,e,0,1).render(O._time,!0,!0),_=1}M&&M.apply(O,R||[])}},l));return I?O.render(0):O},l.tweenFromTo=function(e,l,_){return this.tweenTo(l,_setDefaults({startAt:{time:tn(this,e)}},_))},l.recent=function(){return this._recent},l.nextLabel=function(e){return void 0===e&&(e=this._time),_getLabelInDirection(this,tn(this,e))},l.previousLabel=function(e){return void 0===e&&(e=this._time),_getLabelInDirection(this,tn(this,e),1)},l.currentLabel=function(e){return arguments.length?this.seek(e,!0):this.previousLabel(this._time+wt)},l.shiftChildren=function(e,l,_){void 0===_&&(_=0);for(var S,E=this._first,k=this.labels;E;)E._start>=_&&(E._start+=e,E._end+=e),E=E._next;if(l)for(S in k)k[S]>=_&&(k[S]+=e);return _uncache(this)},l.invalidate=function(l){var _=this._first;for(this._lock=0;_;)_.invalidate(l),_=_._next;return e.prototype.invalidate.call(this,l)},l.clear=function(e){void 0===e&&(e=!0);for(var l,_=this._first;_;)l=_._next,this.remove(_),_=l;return this._dp&&(this._time=this._tTime=this._pTime=0),e&&(this.labels={}),_uncache(this)},l.totalDuration=function(e){var l,_,S,E=0,k=this,T=k._last,M=St;if(arguments.length)return k.timeScale((k._repeat<0?k.duration():k.totalDuration())/(k.reversed()?-e:e));if(k._dirty){for(S=k.parent;T;)l=T._prev,T._dirty&&T.totalDuration(),(_=T._start)>M&&k._sort&&T._ts&&!k._lock?(k._lock=1,_addToTimeline(k,T,_-T._delay,1)._lock=0):M=_,_<0&&T._ts&&(E-=_,(!S&&!k._dp||S&&S.smoothChildTiming)&&(k._start+=_/k._ts,k._time-=_,k._tTime-=_),k.shiftChildren(-_,!1,-1/0),M=0),T._end>E&&T._ts&&(E=T._end),T=l;_setDuration(k,k===ht&&k._time>E?k._time:E,1,1),k._dirty=0}return k._tDur},Timeline.updateRoot=function(e){if(ht._ts&&(_lazySafeRender(ht,_parentToChildTotalTime(e,ht)),gt=cn.frame),cn.frame>=Kt){Kt+=_t.autoSleep||120;var l=ht._first;if((!l||!l._ts)&&_t.autoSleep&&cn._listeners.length<2){for(;l&&!l._ts;)l=l._next;l||cn.sleep()}}},Timeline}(mn);_setDefaults(yn.prototype,{_lock:0,_hasPause:0,_forcing:0});var _n,bn,_addComplexStringPropTween=function(e,l,_,S,E,k,T){var M,R,I,O,D,L,U,B,z=new kn(this._pt,e,l,0,1,_renderComplexString,null,E),j=0,G=0;for(z.b=_,z.e=S,_+="",(U=~(S+="").indexOf("random("))&&(S=_replaceRandom(S)),k&&(k(B=[_,S],e,l),_=B[0],S=B[1]),R=_.match(Dt)||[];M=Dt.exec(S);)O=M[0],D=S.substring(j,M.index),I?I=(I+1)%5:"rgba("===D.substr(-5)&&(I=1),O!==R[G++]&&(L=parseFloat(R[G-1])||0,z._pt={_next:z._pt,p:D||1===G?D:",",s:L,c:"="===O.charAt(1)?_parseRelative(L,O)-L:parseFloat(O)-L,m:I&&I<4?Math.round:0},j=Dt.lastIndex);return z.c=j<S.length?S.substring(j,S.length):"",z.fp=T,(Lt.test(S)||U)&&(z.e=0),this._pt=z,z},_addPropTween=function(e,l,_,S,E,k,T,M,R,I){_isFunction(S)&&(S=S(E||0,e,k));var O,D=e[l],L="get"!==_?_:_isFunction(D)?R?e[l.indexOf("set")||!_isFunction(e["get"+l.substr(3)])?l:"get"+l.substr(3)](R):e[l]():D,U=_isFunction(D)?R?_setterFuncWithParam:_setterFunc:_setterPlain;if(_isString(S)&&(~S.indexOf("random(")&&(S=_replaceRandom(S)),"="===S.charAt(1)&&((O=_parseRelative(L,S)+(getUnit(L)||0))||0===O)&&(S=O)),!I||L!==S||bn)return isNaN(L*S)||""===S?_addComplexStringPropTween.call(this,e,l,L,S,U,M||_t.stringFilter,R):(O=new kn(this._pt,e,l,+L||0,S-(L||0),"boolean"==typeof D?_renderBoolean:_renderPlain,0,U),R&&(O.fp=R),T&&O.modifier(T,this,e),this._pt=O)},_checkPlugin=function(e,l,_,S,E,k){var T,M,R,I;if(qt[e]&&!1!==(T=new qt[e]).init(E,T.rawVars?l[e]:function(e,l,_,S,E){if(_isFunction(e)&&(e=_parseFuncOrString(e,E,l,_,S)),!_isObject(e)||e.style&&e.nodeType||Rt(e)||Mt(e))return _isString(e)?_parseFuncOrString(e,E,l,_,S):e;var k,T={};for(k in e)T[k]=_parseFuncOrString(e[k],E,l,_,S);return T}(l[e],S,E,k,_),_,S,k)&&(_._pt=M=new kn(_._pt,E,e,0,1,T.render,T,0,T.priority),_!==mt))for(R=_._ptLookup[_._targets.indexOf(E)],I=T._props.length;I--;)R[T._props[I]]=M;return T},Sn=function _initTween(e,l,_){var S,E,k,T,M,R,I,O,D,L,U,B,z,j=e.vars,G=j.ease,H=j.startAt,V=j.immediateRender,W=j.lazy,q=j.onUpdate,X=j.runBackwards,K=j.yoyoEase,Y=j.keyframes,J=j.autoRevert,Q=e._dur,Z=e._startAt,$=e._targets,ee=e.parent,te=ee&&"nested"===ee.data?ee.vars.targets:$,ne="auto"===e._overwrite&&!ut,re=e.timeline;if(re&&(!Y||!G)&&(G="none"),e._ease=_parseEase(G,bt.ease),e._yEase=K?_invertEase(_parseEase(!0===K?G:K,bt.ease)):0,K&&e._yoyo&&!e._repeat&&(K=e._yEase,e._yEase=e._ease,e._ease=K),e._from=!re&&!!j.runBackwards,!re||Y&&!j.stagger){if(B=(O=$[0]?_getCache($[0]).harness:0)&&j[O.prop],S=_copyExcluding(j,Ht),Z&&(Z._zTime<0&&Z.progress(1),l<0&&X&&V&&!J?Z.render(-1,!0):Z.revert(X&&Q?jt:zt),Z._lazy=0),H){if(_removeFromParent(e._startAt=En.set($,_setDefaults({data:"isStart",overwrite:!1,parent:ee,immediateRender:!0,lazy:!Z&&_isNotFalse(W),startAt:null,delay:0,onUpdate:q&&function(){return _callback(e,"onUpdate")},stagger:0},H))),e._startAt._dp=0,e._startAt._sat=e,l<0&&(lt||!V&&!J)&&e._startAt.revert(jt),V&&Q&&l<=0&&_<=0)return void(l&&(e._zTime=l))}else if(X&&Q&&!Z)if(l&&(V=!1),k=_setDefaults({overwrite:!1,data:"isFromStart",lazy:V&&!Z&&_isNotFalse(W),immediateRender:V,stagger:0,parent:ee},S),B&&(k[O.prop]=B),_removeFromParent(e._startAt=En.set($,k)),e._startAt._dp=0,e._startAt._sat=e,l<0&&(lt?e._startAt.revert(jt):e._startAt.render(-1,!0)),e._zTime=l,V){if(!l)return}else _initTween(e._startAt,wt,wt);for(e._pt=e._ptCache=0,W=Q&&_isNotFalse(W)||W&&!Q,E=0;E<$.length;E++){if(I=(M=$[E])._gsap||_harness($)[E]._gsap,e._ptLookup[E]=L={},Wt[I.id]&&Vt.length&&_lazyRender(),U=te===$?E:te.indexOf(M),O&&!1!==(D=new O).init(M,B||S,e,U,te)&&(e._pt=T=new kn(e._pt,M,D.name,0,1,D.render,D,0,D.priority),D._props.forEach(function(e){L[e]=T}),D.priority&&(R=1)),!O||B)for(k in S)qt[k]&&(D=_checkPlugin(k,S,e,U,M,te))?D.priority&&(R=1):L[k]=T=_addPropTween.call(e,M,k,"get",S[k],U,te,0,j.stringFilter);e._op&&e._op[E]&&e.kill(M,e._op[E]),ne&&e._pt&&(_n=e,ht.killTweensOf(M,L,e.globalTime(l)),z=!e.parent,_n=0),e._pt&&W&&(Wt[I.id]=1)}R&&_sortPropTweensByPriority(e),e._onInit&&e._onInit(e)}e._onUpdate=q,e._initted=(!e._op||e._pt)&&!z,Y&&l<=0&&re.render(St,!0,!0)},_parseKeyframe=function(e,l,_,S){var E,k,T=l.ease||S||"power1.inOut";if(Rt(l))k=_[e]||(_[e]=[]),l.forEach(function(e,_){return k.push({t:_/(l.length-1)*100,v:e,e:T})});else for(E in l)k=_[E]||(_[E]=[]),"ease"===E||k.push({t:parseFloat(e),v:l[E],e:T})},_parseFuncOrString=function(e,l,_,S,E){return _isFunction(e)?e.call(l,_,S,E):_isString(e)&&~e.indexOf("random(")?_replaceRandom(e):e},wn=Jt+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",xn={};_forEachName(wn+",id,stagger,delay,duration,paused,scrollTrigger",function(e){return xn[e]=1});var En=function(e){function Tween(l,_,S,E){var k;"number"==typeof _&&(S.duration=_,_=S,S=null);var T,M,R,I,O,D,L,U,B=(k=e.call(this,E?_:_inheritDefaults(_))||this).vars,z=B.duration,j=B.delay,G=B.immediateRender,H=B.stagger,V=B.overwrite,W=B.keyframes,q=B.defaults,X=B.scrollTrigger,K=B.yoyoEase,Y=_.parent||ht,J=(Rt(l)||Mt(l)?_isNumber(l[0]):"length"in _)?[l]:toArray$2(l);if(k._targets=J.length?_harness(J):_warn(0,!_t.nullTargetWarn)||[],k._ptLookup=[],k._overwrite=V,W||H||_isFuncOrString(z)||_isFuncOrString(j)){if(_=k.vars,(T=k.timeline=new yn({data:"nested",defaults:q||{},targets:Y&&"nested"===Y.data?Y.vars.targets:J})).kill(),T.parent=T._dp=_assertThisInitialized(k),T._start=0,H||_isFuncOrString(z)||_isFuncOrString(j)){if(I=J.length,L=H&&distribute(H),_isObject(H))for(O in H)~wn.indexOf(O)&&(U||(U={}),U[O]=H[O]);for(M=0;M<I;M++)(R=_copyExcluding(_,xn)).stagger=0,K&&(R.yoyoEase=K),U&&_merge(R,U),D=J[M],R.duration=+_parseFuncOrString(z,_assertThisInitialized(k),M,D,J),R.delay=(+_parseFuncOrString(j,_assertThisInitialized(k),M,D,J)||0)-k._delay,!H&&1===I&&R.delay&&(k._delay=j=R.delay,k._start+=j,R.delay=0),T.to(D,R,L?L(M,D,J):0),T._ease=hn.none;T.duration()?z=j=0:k.timeline=0}else if(W){_inheritDefaults(_setDefaults(T.vars.defaults,{ease:"none"})),T._ease=_parseEase(W.ease||_.ease||"none");var Q,Z,$,ee=0;if(Rt(W))W.forEach(function(e){return T.to(J,e,">")}),T.duration();else{for(O in R={},W)"ease"===O||"easeEach"===O||_parseKeyframe(O,W[O],R,W.easeEach);for(O in R)for(Q=R[O].sort(function(e,l){return e.t-l.t}),ee=0,M=0;M<Q.length;M++)($={ease:(Z=Q[M]).e,duration:(Z.t-(M?Q[M-1].t:0))/100*z})[O]=Z.v,T.to(J,$,ee),ee+=$.duration;T.duration()<z&&T.to({},{duration:z-T.duration()})}}z||k.duration(z=T.duration())}else k.timeline=0;return!0!==V||ut||(_n=_assertThisInitialized(k),ht.killTweensOf(J),_n=0),_addToTimeline(Y,_assertThisInitialized(k),S),_.reversed&&k.reverse(),_.paused&&k.paused(!0),(G||!z&&!W&&k._start===_roundPrecise(Y._time)&&_isNotFalse(G)&&Zt(_assertThisInitialized(k))&&"nested"!==Y.data)&&(k._tTime=-1e-8,k.render(Math.max(0,-j)||0)),X&&_scrollTrigger(_assertThisInitialized(k),X),k}_inheritsLoose(Tween,e);var l=Tween.prototype;return l.render=function(e,l,_){var S,E,k,T,M,R,I,O,D,L=this._time,U=this._tDur,B=this._dur,z=e<0,j=e>U-wt&&!z?U:e<wt?0:e;if(B){if(j!==this._tTime||!e||_||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==z||this._lazy){if(S=j,O=this.timeline,this._repeat){if(T=B+this._rDelay,this._repeat<-1&&z)return this.totalTime(100*T+e,l,_);if(S=_roundPrecise(j%T),j===U?(k=this._repeat,S=B):(k=~~(M=_roundPrecise(j/T)))&&k===M?(S=B,k--):S>B&&(S=B),(R=this._yoyo&&1&k)&&(D=this._yEase,S=B-S),M=_animationCycle(this._tTime,T),S===L&&!_&&this._initted&&k===M)return this._tTime=j,this;k!==M&&(O&&this._yEase&&pn(O,R),this.vars.repeatRefresh&&!R&&!this._lock&&S!==T&&this._initted&&(this._lock=_=1,this.render(_roundPrecise(T*k),!0).invalidate()._lock=0))}if(!this._initted){if(_attemptInitTween(this,z?e:S,_,l,j))return this._tTime=0,this;if(!(L===this._time||_&&this.vars.repeatRefresh&&k!==M))return this;if(B!==this._dur)return this.render(e,l,_)}if(this._tTime=j,this._time=S,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=I=(D||this._ease)(S/B),this._from&&(this.ratio=I=1-I),!L&&j&&!l&&!M&&(_callback(this,"onStart"),this._tTime!==j))return this;for(E=this._pt;E;)E.r(I,E.d),E=E._next;O&&O.render(e<0?e:O._dur*O._ease(S/this._dur),l,_)||this._startAt&&(this._zTime=e),this._onUpdate&&!l&&(z&&_rewindStartAt(this,e,0,_),_callback(this,"onUpdate")),this._repeat&&k!==M&&this.vars.onRepeat&&!l&&this.parent&&_callback(this,"onRepeat"),j!==this._tDur&&j||this._tTime!==j||(z&&!this._onUpdate&&_rewindStartAt(this,e,0,!0),(e||!B)&&(j===this._tDur&&this._ts>0||!j&&this._ts<0)&&_removeFromParent(this,1),l||z&&!L||!(j||L||R)||(_callback(this,j===U?"onComplete":"onReverseComplete",!0),this._prom&&!(j<U&&this.timeScale()>0)&&this._prom()))}}else!function(e,l,_,S){var E,k,T,M=e.ratio,R=l<0||!l&&(!e._start&&$t(e)&&(e._initted||!_isFromOrFromStart(e))||(e._ts<0||e._dp._ts<0)&&!_isFromOrFromStart(e))?0:1,I=e._rDelay,O=0;if(I&&e._repeat&&(O=_clamp(0,e._tDur,l),k=_animationCycle(O,I),e._yoyo&&1&k&&(R=1-R),k!==_animationCycle(e._tTime,I)&&(M=1-R,e.vars.repeatRefresh&&e._initted&&e.invalidate())),R!==M||lt||S||e._zTime===wt||!l&&e._zTime){if(!e._initted&&_attemptInitTween(e,l,S,_,O))return;for(T=e._zTime,e._zTime=l||(_?wt:0),_||(_=l&&!T),e.ratio=R,e._from&&(R=1-R),e._time=0,e._tTime=O,E=e._pt;E;)E.r(R,E.d),E=E._next;l<0&&_rewindStartAt(e,l,0,!0),e._onUpdate&&!_&&_callback(e,"onUpdate"),O&&e._repeat&&!_&&e.parent&&_callback(e,"onRepeat"),(l>=e._tDur||l<0)&&e.ratio===R&&(R&&_removeFromParent(e,1),_||lt||(_callback(e,R?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=l)}(this,e,l,_);return this},l.targets=function(){return this._targets},l.invalidate=function(l){return(!l||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(l),e.prototype.invalidate.call(this,l)},l.resetTo=function(e,l,_,S,E){yt||cn.wake(),this._ts||this.play();var k=Math.min(this._dur,(this._dp._time-this._start)*this._ts);return this._initted||Sn(this,k),function(e,l,_,S,E,k,T,M){var R,I,O,D,L=(e._pt&&e._ptCache||(e._ptCache={}))[l];if(!L)for(L=e._ptCache[l]=[],O=e._ptLookup,D=e._targets.length;D--;){if((R=O[D][l])&&R.d&&R.d._pt)for(R=R.d._pt;R&&R.p!==l&&R.fp!==l;)R=R._next;if(!R)return bn=1,e.vars[l]="+=0",Sn(e,T),bn=0,M?_warn():1;L.push(R)}for(D=L.length;D--;)(R=(I=L[D])._pt||I).s=!S&&0!==S||E?R.s+(S||0)+k*R.c:S,R.c=_-R.s,I.e&&(I.e=_round(_)+getUnit(I.e)),I.b&&(I.b=R.s+getUnit(I.b))}(this,e,l,_,S,this._ease(k/this._dur),k,E)?this.resetTo(e,l,_,S,1):(_alignPlayhead(this,0),this.parent||_addLinkedListItem(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},l.kill=function(e,l){if(void 0===l&&(l="all"),!(e||l&&"all"!==l))return this._lazy=this._pt=0,this.parent?_interrupt(this):this.scrollTrigger&&this.scrollTrigger.kill(!!lt),this;if(this.timeline){var _=this.timeline.totalDuration();return this.timeline.killTweensOf(e,l,_n&&!0!==_n.vars.overwrite)._first||_interrupt(this),this.parent&&_!==this.timeline.totalDuration()&&_setDuration(this,this._dur*this.timeline._tDur/_,0,1),this}var S,E,k,T,M,R,I,O=this._targets,D=e?toArray$2(e):O,L=this._ptLookup,U=this._pt;if((!l||"all"===l)&&function(e,l){for(var _=e.length,S=_===l.length;S&&_--&&e[_]===l[_];);return _<0}(O,D))return"all"===l&&(this._pt=0),_interrupt(this);for(S=this._op=this._op||[],"all"!==l&&(_isString(l)&&(M={},_forEachName(l,function(e){return M[e]=1}),l=M),l=function(e,l){var _,S,E,k,T=e[0]?_getCache(e[0]).harness:0,M=T&&T.aliases;if(!M)return l;for(S in _=_merge({},l),M)if(S in _)for(E=(k=M[S].split(",")).length;E--;)_[k[E]]=_[S];return _}(O,l)),I=O.length;I--;)if(~D.indexOf(O[I]))for(M in E=L[I],"all"===l?(S[I]=l,T=E,k={}):(k=S[I]=S[I]||{},T=l),T)(R=E&&E[M])&&("kill"in R.d&&!0!==R.d.kill(M)||_removeLinkedListItem(this,R,"_pt"),delete E[M]),"all"!==k&&(k[M]=1);return this._initted&&!this._pt&&U&&_interrupt(this),this},Tween.to=function(e,l){return new Tween(e,l,arguments[2])},Tween.from=function(e,l){return _createTweenType(1,arguments)},Tween.delayedCall=function(e,l,_,S){return new Tween(l,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:e,onComplete:l,onReverseComplete:l,onCompleteParams:_,onReverseCompleteParams:_,callbackScope:S})},Tween.fromTo=function(e,l,_){return _createTweenType(2,arguments)},Tween.set=function(e,l){return l.duration=0,l.repeatDelay||(l.repeat=0),new Tween(e,l)},Tween.killTweensOf=function(e,l,_){return ht.killTweensOf(e,l,_)},Tween}(mn);_setDefaults(En.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),_forEachName("staggerTo,staggerFrom,staggerFromTo",function(e){En[e]=function(){var l=new yn,_=nn.call(arguments,0);return _.splice("staggerFromTo"===e?5:4,0,0),l[e].apply(l,_)}});var _setterPlain=function(e,l,_){return e[l]=_},_setterFunc=function(e,l,_){return e[l](_)},_setterFuncWithParam=function(e,l,_,S){return e[l](S.fp,_)},_setterAttribute=function(e,l,_){return e.setAttribute(l,_)},_getSetter=function(e,l){return _isFunction(e[l])?_setterFunc:_isUndefined(e[l])&&e.setAttribute?_setterAttribute:_setterPlain},_renderPlain=function(e,l){return l.set(l.t,l.p,Math.round(1e6*(l.s+l.c*e))/1e6,l)},_renderBoolean=function(e,l){return l.set(l.t,l.p,!!(l.s+l.c*e),l)},_renderComplexString=function(e,l){var _=l._pt,S="";if(!e&&l.b)S=l.b;else if(1===e&&l.e)S=l.e;else{for(;_;)S=_.p+(_.m?_.m(_.s+_.c*e):Math.round(1e4*(_.s+_.c*e))/1e4)+S,_=_._next;S+=l.c}l.set(l.t,l.p,S,l)},_renderPropTweens=function(e,l){for(var _=l._pt;_;)_.r(e,_.d),_=_._next},_addPluginModifier=function(e,l,_,S){for(var E,k=this._pt;k;)E=k._next,k.p===S&&k.modifier(e,l,_),k=E},_killPropTweensOf=function(e){for(var l,_,S=this._pt;S;)_=S._next,S.p===e&&!S.op||S.op===e?_removeLinkedListItem(this,S,"_pt"):S.dep||(l=1),S=_;return!l},_setterWithModifier=function(e,l,_,S){S.mSet(e,l,S.m.call(S.tween,_,S.mt),S)},_sortPropTweensByPriority=function(e){for(var l,_,S,E,k=e._pt;k;){for(l=k._next,_=S;_&&_.pr>k.pr;)_=_._next;(k._prev=_?_._prev:E)?k._prev._next=k:S=k,(k._next=_)?_._prev=k:E=k,k=l}e._pt=S},kn=function(){function PropTween(e,l,_,S,E,k,T,M,R){this.t=l,this.s=S,this.c=E,this.p=_,this.r=k||_renderPlain,this.d=T||this,this.set=M||_setterPlain,this.pr=R||0,this._next=e,e&&(e._prev=this)}return PropTween.prototype.modifier=function(e,l,_){this.mSet=this.mSet||this.set,this.set=_setterWithModifier,this.m=e,this.mt=_,this.tween=l},PropTween}();_forEachName(Jt+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(e){return Ht[e]=1}),Nt.TweenMax=Nt.TweenLite=En,Nt.TimelineLite=Nt.TimelineMax=yn,ht=new yn({sortChildren:!1,defaults:bt,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),_t.stringFilter=_colorStringFilter;var An=[],Cn={},Tn=[],Mn=0,Rn=0,_dispatch=function(e){return(Cn[e]||Tn).map(function(e){return e()})},_onMediaChange=function(){var e=Date.now(),l=[];e-Mn>2&&(_dispatch("matchMediaInit"),An.forEach(function(e){var _,S,E,k,T=e.queries,M=e.conditions;for(S in T)(_=dt.matchMedia(T[S]).matches)&&(E=1),_!==M[S]&&(M[S]=_,k=1);k&&(e.revert(),E&&l.push(e))}),_dispatch("matchMediaRevert"),l.forEach(function(e){return e.onMatch(e,function(l){return e.add(null,l)})}),Mn=e,_dispatch("matchMedia"))},In=function(){function Context(e,l){this.selector=l&&selector(l),this.data=[],this._r=[],this.isReverted=!1,this.id=Rn++,e&&this.add(e)}var e=Context.prototype;return e.add=function(e,l,_){_isFunction(e)&&(_=l,l=e,e=_isFunction);var S=this,f=function(){var e,E=ct,k=S.selector;return E&&E!==S&&E.data.push(S),_&&(S.selector=selector(_)),ct=S,e=l.apply(S,arguments),_isFunction(e)&&S._r.push(e),ct=E,S.selector=k,S.isReverted=!1,e};return S.last=f,e===_isFunction?f(S,function(e){return S.add(null,e)}):e?S[e]=f:f},e.ignore=function(e){var l=ct;ct=null,e(this),ct=l},e.getTweens=function(){var e=[];return this.data.forEach(function(l){return l instanceof Context?e.push.apply(e,l.getTweens()):l instanceof En&&!(l.parent&&"nested"===l.parent.data)&&e.push(l)}),e},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(e,l){var _=this;if(e?function(){for(var l,S=_.getTweens(),E=_.data.length;E--;)"isFlip"===(l=_.data[E]).data&&(l.revert(),l.getChildren(!0,!0,!1).forEach(function(e){return S.splice(S.indexOf(e),1)}));for(S.map(function(e){return{g:e._dur||e._delay||e._sat&&!e._sat.vars.immediateRender?e.globalTime(0):-1/0,t:e}}).sort(function(e,l){return l.g-e.g||-1/0}).forEach(function(l){return l.t.revert(e)}),E=_.data.length;E--;)(l=_.data[E])instanceof yn?"nested"!==l.data&&(l.scrollTrigger&&l.scrollTrigger.revert(),l.kill()):!(l instanceof En)&&l.revert&&l.revert(e);_._r.forEach(function(l){return l(e,_)}),_.isReverted=!0}():this.data.forEach(function(e){return e.kill&&e.kill()}),this.clear(),l)for(var S=An.length;S--;)An[S].id===this.id&&An.splice(S,1)},e.revert=function(e){this.kill(e||{})},Context}(),Pn=function(){function MatchMedia(e){this.contexts=[],this.scope=e,ct&&ct.data.push(this)}var e=MatchMedia.prototype;return e.add=function(e,l,_){_isObject(e)||(e={matches:e});var S,E,k,T=new In(0,_||this.scope),M=T.conditions={};for(E in ct&&!T.selector&&(T.selector=ct.selector),this.contexts.push(T),l=T.add("onMatch",l),T.queries=e,e)"all"===E?k=1:(S=dt.matchMedia(e[E]))&&(An.indexOf(T)<0&&An.push(T),(M[E]=S.matches)&&(k=1),S.addListener?S.addListener(_onMediaChange):S.addEventListener("change",_onMediaChange));return k&&l(T,function(e){return T.add(null,e)}),this},e.revert=function(e){this.kill(e||{})},e.kill=function(e){this.contexts.forEach(function(l){return l.kill(e,!0)})},MatchMedia}(),On={registerPlugin:function(){for(var e=arguments.length,l=new Array(e),_=0;_<e;_++)l[_]=arguments[_];l.forEach(function(e){return _createPlugin(e)})},timeline:function(e){return new yn(e)},getTweensOf:function(e,l){return ht.getTweensOf(e,l)},getProperty:function(e,l,_,S){_isString(e)&&(e=toArray$2(e)[0]);var E=_getCache(e||{}).get,k=_?_passThrough:_numericIfPossible;return"native"===_&&(_=""),e?l?k((qt[l]&&qt[l].get||E)(e,l,_,S)):function(l,_,S){return k((qt[l]&&qt[l].get||E)(e,l,_,S))}:e},quickSetter:function(e,l,_){if((e=toArray$2(e)).length>1){var S=e.map(function(e){return Dn.quickSetter(e,l,_)}),E=S.length;return function(e){for(var l=E;l--;)S[l](e)}}e=e[0]||{};var k=qt[l],T=_getCache(e),M=T.harness&&(T.harness.aliases||{})[l]||l,R=k?function(l){var S=new k;mt._pt=0,S.init(e,_?l+_:l,mt,0,[e]),S.render(1,S),mt._pt&&_renderPropTweens(1,mt)}:T.set(e,M);return k?R:function(l){return R(e,M,_?l+_:l,T,1)}},quickTo:function(e,l,_){var S,E=Dn.to(e,_setDefaults(((S={})[l]="+=0.1",S.paused=!0,S.stagger=0,S),_||{})),func=function(e,_,S){return E.resetTo(l,e,_,S)};return func.tween=E,func},isTweening:function(e){return ht.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=_parseEase(e.ease,bt.ease)),Qt(bt,e||{})},config:function(e){return Qt(_t,e||{})},registerEffect:function(e){var l=e.name,_=e.effect,S=e.plugins,E=e.defaults,k=e.extendTimeline;(S||"").split(",").forEach(function(e){return e&&!qt[e]&&!Nt[e]&&_warn()}),Xt[l]=function(e,l,S){return _(toArray$2(e),_setDefaults(l||{},E),S)},k&&(yn.prototype[l]=function(e,_,S){return this.add(Xt[l](e,_isObject(_)?_:(S=_)&&{},this),S)})},registerEase:function(e,l){hn[e]=_parseEase(l)},parseEase:function(e,l){return arguments.length?_parseEase(e,l):hn},getById:function(e){return ht.getById(e)},exportRoot:function(e,l){void 0===e&&(e={});var _,S,E=new yn(e);for(E.smoothChildTiming=_isNotFalse(e.smoothChildTiming),ht.remove(E),E._dp=0,E._time=E._tTime=ht._time,_=ht._first;_;)S=_._next,!l&&!_._dur&&_ instanceof En&&_.vars.onComplete===_._targets[0]||_addToTimeline(E,_,_._start-_._delay),_=S;return _addToTimeline(ht,E,0),E},context:function(e,l){return e?new In(e,l):ct},matchMedia:function(e){return new Pn(e)},matchMediaRefresh:function(){return An.forEach(function(e){var l,_,S=e.conditions;for(_ in S)S[_]&&(S[_]=!1,l=1);l&&e.revert()})||_onMediaChange()},addEventListener:function(e,l){var _=Cn[e]||(Cn[e]=[]);~_.indexOf(l)||_.push(l)},removeEventListener:function(e,l){var _=Cn[e],S=_&&_.indexOf(l);S>=0&&_.splice(S,1)},utils:{wrap:function wrap(e,l,_){var S=l-e;return Rt(e)?_wrapArray(e,wrap(0,e.length),l):_conditionalReturn(_,function(l){return(S+(l-e)%S)%S+e})},wrapYoyo:function wrapYoyo(e,l,_){var S=l-e,E=2*S;return Rt(e)?_wrapArray(e,wrapYoyo(0,e.length-1),l):_conditionalReturn(_,function(l){return e+((l=(E+(l-e)%E)%E||0)>S?E-l:l)})},distribute:distribute,random:random,snap:snap,normalize:function(e,l,_){return mapRange(e,l,0,1,_)},getUnit:getUnit,clamp:function(e,l,_){return _conditionalReturn(_,function(_){return _clamp(e,l,_)})},splitColor:splitColor$1,toArray:toArray$2,selector:selector,mapRange:mapRange,pipe:function(){for(var e=arguments.length,l=new Array(e),_=0;_<e;_++)l[_]=arguments[_];return function(e){return l.reduce(function(e,l){return l(e)},e)}},unitize:function(e,l){return function(_){return e(parseFloat(_))+(l||getUnit(_))}},interpolate:function interpolate(e,l,_,S){var E=isNaN(e+l)?0:function(_){return(1-_)*e+_*l};if(!E){var k,T,M,R,I,O=_isString(e),D={};if(!0===_&&(S=1)&&(_=null),O)e={p:e},l={p:l};else if(Rt(e)&&!Rt(l)){for(M=[],R=e.length,I=R-2,T=1;T<R;T++)M.push(interpolate(e[T-1],e[T]));R--,E=function(e){e*=R;var l=Math.min(I,~~e);return M[l](e-l)},_=l}else S||(e=_merge(Rt(e)?[]:{},e));if(!M){for(k in l)_addPropTween.call(D,e,k,"get",l[k]);E=function(l){return _renderPropTweens(l,D)||(O?e.p:e)}}}return _conditionalReturn(_,E)},shuffle:shuffle},install:_install,effects:Xt,ticker:cn,updateRoot:yn.updateRoot,plugins:qt,globalTimeline:ht,core:{PropTween:kn,globals:_addGlobal,Tween:En,Timeline:yn,Animation:mn,getCache:_getCache,_removeLinkedListItem:_removeLinkedListItem,reverting:function(){return lt},context:function(e){return e&&ct&&(ct.data.push(e),e._ctx=ct),ct},suppressOverwrites:function(e){return ut=e}}};_forEachName("to,from,fromTo,delayedCall,set,killTweensOf",function(e){return On[e]=En[e]}),cn.add(yn.updateRoot),mt=On.to({},{duration:0});var _getPluginPropTween=function(e,l){for(var _=e._pt;_&&_.p!==l&&_.op!==l&&_.fp!==l;)_=_._next;return _},_buildModifierPlugin=function(e,l){return{name:e,headless:1,rawVars:1,init:function(e,_,S){S._onInit=function(e){var S,E;if(_isString(_)&&(S={},_forEachName(_,function(e){return S[e]=1}),_=S),l){for(E in S={},_)S[E]=l(_[E]);_=S}!function(e,l){var _,S,E,k=e._targets;for(_ in l)for(S=k.length;S--;)(E=e._ptLookup[S][_])&&(E=E.d)&&(E._pt&&(E=_getPluginPropTween(E,_)),E&&E.modifier&&E.modifier(l[_],e,k[S],_))}(e,_)}}}},Dn=On.registerPlugin({name:"attr",init:function(e,l,_,S,E){var k,T,M;for(k in this.tween=_,l)M=e.getAttribute(k)||"",(T=this.add(e,"setAttribute",(M||0)+"",l[k],S,E,0,0,k)).op=k,T.b=M,this._props.push(k)},render:function(e,l){for(var _=l._pt;_;)lt?_.set(_.t,_.p,_.b,_):_.r(e,_.d),_=_._next}},{name:"endArray",headless:1,init:function(e,l){for(var _=l.length;_--;)this.add(e,_,e[_]||0,l[_],0,0,0,0,0,1)}},_buildModifierPlugin("roundProps",_roundModifier),_buildModifierPlugin("modifiers"),_buildModifierPlugin("snap",snap))||On;En.version=yn.version=Dn.version="3.13.0",vt=1,_windowExists$1()&&_wake(),hn.Power0,hn.Power1,hn.Power2,hn.Power3,hn.Power4,hn.Linear,hn.Quad,hn.Cubic,hn.Quart,hn.Quint,hn.Strong,hn.Elastic,hn.Back,hn.SteppedEase,hn.Bounce,hn.Sine,hn.Expo,hn.Circ;
/*!
			 * CSSPlugin 3.13.0
			 * https://gsap.com
			 *
			 * Copyright 2008-2025, GreenSock. All rights reserved.
			 * Subject to the terms at https://gsap.com/standard-license
			 * @author: Jack Doyle, jack@greensock.com
			*/
var Ln,Un,Fn,Nn,Bn,zn,jn,Gn,Hn={},Vn=180/Math.PI,Wn=Math.PI/180,qn=Math.atan2,Xn=/([A-Z])/g,Kn=/(left|right|width|margin|padding|x)/i,Yn=/[\s,\(]\S/,Jn={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},_renderCSSProp=function(e,l){return l.set(l.t,l.p,Math.round(1e4*(l.s+l.c*e))/1e4+l.u,l)},_renderPropWithEnd=function(e,l){return l.set(l.t,l.p,1===e?l.e:Math.round(1e4*(l.s+l.c*e))/1e4+l.u,l)},_renderCSSPropWithBeginning=function(e,l){return l.set(l.t,l.p,e?Math.round(1e4*(l.s+l.c*e))/1e4+l.u:l.b,l)},_renderRoundedCSSProp=function(e,l){var _=l.s+l.c*e;l.set(l.t,l.p,~~(_+(_<0?-.5:.5))+l.u,l)},_renderNonTweeningValue=function(e,l){return l.set(l.t,l.p,e?l.e:l.b,l)},_renderNonTweeningValueOnlyAtEnd=function(e,l){return l.set(l.t,l.p,1!==e?l.b:l.e,l)},_setterCSSStyle=function(e,l,_){return e.style[l]=_},_setterCSSProp=function(e,l,_){return e.style.setProperty(l,_)},_setterTransform=function(e,l,_){return e._gsap[l]=_},_setterScale=function(e,l,_){return e._gsap.scaleX=e._gsap.scaleY=_},_setterScaleWithRender=function(e,l,_,S,E){var k=e._gsap;k.scaleX=k.scaleY=_,k.renderTransform(E,k)},_setterTransformWithRender=function(e,l,_,S,E){var k=e._gsap;k[l]=_,k.renderTransform(E,k)},Qn="transform",Zn=Qn+"Origin",$n=function _saveStyle(e,l){var _=this,S=this.target,E=S.style,k=S._gsap;if(e in Hn&&E){if(this.tfm=this.tfm||{},"transform"===e)return Jn.transform.split(",").forEach(function(e){return _saveStyle.call(_,e,l)});if(~(e=Jn[e]||e).indexOf(",")?e.split(",").forEach(function(e){return _.tfm[e]=_get(S,e)}):this.tfm[e]=k.x?k[e]:_get(S,e),e===Zn&&(this.tfm.zOrigin=k.zOrigin),this.props.indexOf(Qn)>=0)return;k.svg&&(this.svgo=S.getAttribute("data-svg-origin"),this.props.push(Zn,l,"")),e=Qn}(E||l)&&this.props.push(e,l,E[e])},_removeIndependentTransforms=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},_revertStyle=function(){var e,l,_=this.props,S=this.target,E=S.style,k=S._gsap;for(e=0;e<_.length;e+=3)_[e+1]?2===_[e+1]?S[_[e]](_[e+2]):S[_[e]]=_[e+2]:_[e+2]?E[_[e]]=_[e+2]:E.removeProperty("--"===_[e].substr(0,2)?_[e]:_[e].replace(Xn,"-$1").toLowerCase());if(this.tfm){for(l in this.tfm)k[l]=this.tfm[l];k.svg&&(k.renderTransform(),S.setAttribute("data-svg-origin",this.svgo||"")),(e=jn())&&e.isStart||E[Qn]||(_removeIndependentTransforms(E),k.zOrigin&&E[Zn]&&(E[Zn]+=" "+k.zOrigin+"px",k.zOrigin=0,k.renderTransform()),k.uncache=1)}},_getStyleSaver=function(e,l){var _={target:e,props:[],revert:_revertStyle,save:$n};return e._gsap||Dn.core.getCache(e),l&&e.style&&e.nodeType&&l.split(",").forEach(function(e){return _.save(e)}),_},_createElement=function(e,l){var _=Un.createElementNS?Un.createElementNS((l||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):Un.createElement(e);return _&&_.style?_:Un.createElement(e)},er=function _getComputedProperty(e,l,_){var S=getComputedStyle(e);return S[l]||S.getPropertyValue(l.replace(Xn,"-$1").toLowerCase())||S.getPropertyValue(l)||!_&&_getComputedProperty(e,_checkPropPrefix(l)||l,1)||""},tr="O,Moz,ms,Ms,Webkit".split(","),_checkPropPrefix=function(e,l,_){var S=(l||Bn).style,E=5;if(e in S&&!_)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);E--&&!(tr[E]+e in S););return E<0?null:(3===E?"ms":E>=0?tr[E]:"")+e},_initCore=function(){"undefined"!=typeof window&&window.document&&(Ln=window,Un=Ln.document,Fn=Un.documentElement,Bn=_createElement("div")||{style:{}},_createElement("div"),Qn=_checkPropPrefix(Qn),Zn=Qn+"Origin",Bn.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",Gn=!!_checkPropPrefix("perspective"),jn=Dn.core.reverting,Nn=1)},_getReparentedCloneBBox=function(e){var l,_=e.ownerSVGElement,S=_createElement("svg",_&&_.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),E=e.cloneNode(!0);E.style.display="block",S.appendChild(E),Fn.appendChild(S);try{l=E.getBBox()}catch(oo){}return S.removeChild(E),Fn.removeChild(S),l},_getAttributeFallbacks=function(e,l){for(var _=l.length;_--;)if(e.hasAttribute(l[_]))return e.getAttribute(l[_])},_getBBox=function(e){var l,_;try{l=e.getBBox()}catch(S){l=_getReparentedCloneBBox(e),_=1}return l&&(l.width||l.height)||_||(l=_getReparentedCloneBBox(e)),!l||l.width||l.x||l.y?l:{x:+_getAttributeFallbacks(e,["x","cx","x1"])||0,y:+_getAttributeFallbacks(e,["y","cy","y1"])||0,width:0,height:0}},_isSVG=function(e){return!(!e.getCTM||e.parentNode&&!e.ownerSVGElement||!_getBBox(e))},_removeProperty=function(e,l){if(l){var _,S=e.style;l in Hn&&l!==Zn&&(l=Qn),S.removeProperty?("ms"!==(_=l.substr(0,2))&&"webkit"!==l.substr(0,6)||(l="-"+l),S.removeProperty("--"===_?l:l.replace(Xn,"-$1").toLowerCase())):S.removeAttribute(l)}},_addNonTweeningPT=function(e,l,_,S,E,k){var T=new kn(e._pt,l,_,0,1,k?_renderNonTweeningValueOnlyAtEnd:_renderNonTweeningValue);return e._pt=T,T.b=S,T.e=E,e._props.push(_),T},nr={deg:1,rad:1,turn:1},rr={grid:1,flex:1},ir=function _convertToUnit(e,l,_,S){var E,k,T,M,R=parseFloat(_)||0,I=(_+"").trim().substr((R+"").length)||"px",O=Bn.style,D=Kn.test(l),L="svg"===e.tagName.toLowerCase(),U=(L?"client":"offset")+(D?"Width":"Height"),B=100,z="px"===S,j="%"===S;if(S===I||!R||nr[S]||nr[I])return R;if("px"!==I&&!z&&(R=_convertToUnit(e,l,_,"px")),M=e.getCTM&&_isSVG(e),(j||"%"===I)&&(Hn[l]||~l.indexOf("adius")))return E=M?e.getBBox()[D?"width":"height"]:e[U],_round(j?R/E*B:R/100*E);if(O[D?"width":"height"]=B+(z?I:S),k="rem"!==S&&~l.indexOf("adius")||"em"===S&&e.appendChild&&!L?e:e.parentNode,M&&(k=(e.ownerSVGElement||{}).parentNode),k&&k!==Un&&k.appendChild||(k=Un.body),(T=k._gsap)&&j&&T.width&&D&&T.time===cn.time&&!T.uncache)return _round(R/T.width*B);if(!j||"height"!==l&&"width"!==l)(j||"%"===I)&&!rr[er(k,"display")]&&(O.position=er(e,"position")),k===e&&(O.position="static"),k.appendChild(Bn),E=Bn[U],k.removeChild(Bn),O.position="absolute";else{var G=e.style[l];e.style[l]=B+S,E=e[U],G?e.style[l]=G:_removeProperty(e,l)}return D&&j&&((T=_getCache(k)).time=cn.time,T.width=k[U]),_round(z?E*R/B:E&&R?B/E*R:0)},_get=function(e,l,_,S){var E;return Nn||_initCore(),l in Jn&&"transform"!==l&&~(l=Jn[l]).indexOf(",")&&(l=l.split(",")[0]),Hn[l]&&"transform"!==l?(E=_parseTransform(e,S),E="transformOrigin"!==l?E[l]:E.svg?E.origin:_firstTwoOnly(er(e,Zn))+" "+E.zOrigin+"px"):(!(E=e.style[l])||"auto"===E||S||~(E+"").indexOf("calc("))&&(E=or[l]&&or[l](e,l,_)||er(e,l)||_getProperty(e,l)||("opacity"===l?1:0)),_&&!~(E+"").trim().indexOf(" ")?ir(e,l,E,_)+_:E},_tweenComplexCSSString=function(e,l,_,S){if(!_||"none"===_){var E=_checkPropPrefix(l,e,1),k=E&&er(e,E,1);k&&k!==_?(l=E,_=k):"borderColor"===l&&(_=er(e,"borderTopColor"))}var T,M,R,I,O,D,L,U,B,z,j,G=new kn(this._pt,e.style,l,0,1,_renderComplexString),H=0,V=0;if(G.b=_,G.e=S,_+="","var(--"===(S+="").substring(0,6)&&(S=er(e,S.substring(4,S.indexOf(")")))),"auto"===S&&(D=e.style[l],e.style[l]=S,S=er(e,l)||S,D?e.style[l]=D:_removeProperty(e,l)),_colorStringFilter(T=[_,S]),S=T[1],R=(_=T[0]).match(Ot)||[],(S.match(Ot)||[]).length){for(;M=Ot.exec(S);)L=M[0],B=S.substring(H,M.index),O?O=(O+1)%5:"rgba("!==B.substr(-5)&&"hsla("!==B.substr(-5)||(O=1),L!==(D=R[V++]||"")&&(I=parseFloat(D)||0,j=D.substr((I+"").length),"="===L.charAt(1)&&(L=_parseRelative(I,L)+j),U=parseFloat(L),z=L.substr((U+"").length),H=Ot.lastIndex-z.length,z||(z=z||_t.units[l]||j,H===S.length&&(S+=z,G.e+=z)),j!==z&&(I=ir(e,l,D,z)||0),G._pt={_next:G._pt,p:B||1===V?B:",",s:I,c:U-I,m:O&&O<4||"zIndex"===l?Math.round:0});G.c=H<S.length?S.substring(H,S.length):""}else G.r="display"===l&&"none"===S?_renderNonTweeningValueOnlyAtEnd:_renderNonTweeningValue;return Lt.test(S)&&(G.e=0),this._pt=G,G},ar={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},_convertKeywordsToPercentages=function(e){var l=e.split(" "),_=l[0],S=l[1]||"50%";return"top"!==_&&"bottom"!==_&&"left"!==S&&"right"!==S||(e=_,_=S,S=e),l[0]=ar[_]||_,l[1]=ar[S]||S,l.join(" ")},_renderClearProps=function(e,l){if(l.tween&&l.tween._time===l.tween._dur){var _,S,E,k=l.t,T=k.style,M=l.u,R=k._gsap;if("all"===M||!0===M)T.cssText="",S=1;else for(E=(M=M.split(",")).length;--E>-1;)_=M[E],Hn[_]&&(S=1,_="transformOrigin"===_?Zn:Qn),_removeProperty(k,_);S&&(_removeProperty(k,Qn),R&&(R.svg&&k.removeAttribute("transform"),T.scale=T.rotate=T.translate="none",_parseTransform(k,1),R.uncache=1,_removeIndependentTransforms(T)))}},or={clearProps:function(e,l,_,S,E){if("isFromStart"!==E.data){var k=e._pt=new kn(e._pt,l,_,0,0,_renderClearProps);return k.u=S,k.pr=-10,k.tween=E,e._props.push(_),1}}},sr=[1,0,0,1,0,0],ur={},_isNullTransform=function(e){return"matrix(1, 0, 0, 1, 0, 0)"===e||"none"===e||!e},_getComputedTransformMatrixAsArray=function(e){var l=er(e,Qn);return _isNullTransform(l)?sr:l.substr(7).match(Pt).map(_round)},_getMatrix=function(e,l){var _,S,E,k,T=e._gsap||_getCache(e),M=e.style,R=_getComputedTransformMatrixAsArray(e);return T.svg&&e.getAttribute("transform")?"1,0,0,1,0,0"===(R=[(E=e.transform.baseVal.consolidate().matrix).a,E.b,E.c,E.d,E.e,E.f]).join(",")?sr:R:(R!==sr||e.offsetParent||e===Fn||T.svg||(E=M.display,M.display="block",(_=e.parentNode)&&(e.offsetParent||e.getBoundingClientRect().width)||(k=1,S=e.nextElementSibling,Fn.appendChild(e)),R=_getComputedTransformMatrixAsArray(e),E?M.display=E:_removeProperty(e,"display"),k&&(S?_.insertBefore(e,S):_?_.appendChild(e):Fn.removeChild(e))),l&&R.length>6?[R[0],R[1],R[4],R[5],R[12],R[13]]:R)},_applySVGOrigin=function(e,l,_,S,E,k){var T,M,R,I=e._gsap,O=E||_getMatrix(e,!0),D=I.xOrigin||0,L=I.yOrigin||0,U=I.xOffset||0,B=I.yOffset||0,z=O[0],j=O[1],G=O[2],H=O[3],V=O[4],W=O[5],q=l.split(" "),X=parseFloat(q[0])||0,K=parseFloat(q[1])||0;_?O!==sr&&(M=z*H-j*G)&&(R=X*(-j/M)+K*(z/M)-(z*W-j*V)/M,X=X*(H/M)+K*(-G/M)+(G*W-H*V)/M,K=R):(X=(T=_getBBox(e)).x+(~q[0].indexOf("%")?X/100*T.width:X),K=T.y+(~(q[1]||q[0]).indexOf("%")?K/100*T.height:K)),S||!1!==S&&I.smooth?(V=X-D,W=K-L,I.xOffset=U+(V*z+W*G)-V,I.yOffset=B+(V*j+W*H)-W):I.xOffset=I.yOffset=0,I.xOrigin=X,I.yOrigin=K,I.smooth=!!S,I.origin=l,I.originIsAbsolute=!!_,e.style[Zn]="0px 0px",k&&(_addNonTweeningPT(k,I,"xOrigin",D,X),_addNonTweeningPT(k,I,"yOrigin",L,K),_addNonTweeningPT(k,I,"xOffset",U,I.xOffset),_addNonTweeningPT(k,I,"yOffset",B,I.yOffset)),e.setAttribute("data-svg-origin",X+" "+K)},_parseTransform=function(e,l){var _=e._gsap||new GSCache(e);if("x"in _&&!l&&!_.uncache)return _;var S,E,k,T,M,R,I,O,D,L,U,B,z,j,G,H,V,W,q,X,K,Y,J,Q,Z,$,ee,te,ne,re,ie,ae,oe=e.style,se=_.scaleX<0,ue="px",le="deg",ce=getComputedStyle(e),he=er(e,Zn)||"0";return S=E=k=R=I=O=D=L=U=0,T=M=1,_.svg=!(!e.getCTM||!_isSVG(e)),ce.translate&&("none"===ce.translate&&"none"===ce.scale&&"none"===ce.rotate||(oe[Qn]=("none"!==ce.translate?"translate3d("+(ce.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+("none"!==ce.rotate?"rotate("+ce.rotate+") ":"")+("none"!==ce.scale?"scale("+ce.scale.split(" ").join(",")+") ":"")+("none"!==ce[Qn]?ce[Qn]:"")),oe.scale=oe.rotate=oe.translate="none"),j=_getMatrix(e,_.svg),_.svg&&(_.uncache?(Z=e.getBBox(),he=_.xOrigin-Z.x+"px "+(_.yOrigin-Z.y)+"px",Q=""):Q=!l&&e.getAttribute("data-svg-origin"),_applySVGOrigin(e,Q||he,!!Q||_.originIsAbsolute,!1!==_.smooth,j)),B=_.xOrigin||0,z=_.yOrigin||0,j!==sr&&(W=j[0],q=j[1],X=j[2],K=j[3],S=Y=j[4],E=J=j[5],6===j.length?(T=Math.sqrt(W*W+q*q),M=Math.sqrt(K*K+X*X),R=W||q?qn(q,W)*Vn:0,(D=X||K?qn(X,K)*Vn+R:0)&&(M*=Math.abs(Math.cos(D*Wn))),_.svg&&(S-=B-(B*W+z*X),E-=z-(B*q+z*K))):(ae=j[6],re=j[7],ee=j[8],te=j[9],ne=j[10],ie=j[11],S=j[12],E=j[13],k=j[14],I=(G=qn(ae,ne))*Vn,G&&(Q=Y*(H=Math.cos(-G))+ee*(V=Math.sin(-G)),Z=J*H+te*V,$=ae*H+ne*V,ee=Y*-V+ee*H,te=J*-V+te*H,ne=ae*-V+ne*H,ie=re*-V+ie*H,Y=Q,J=Z,ae=$),O=(G=qn(-X,ne))*Vn,G&&(H=Math.cos(-G),ie=K*(V=Math.sin(-G))+ie*H,W=Q=W*H-ee*V,q=Z=q*H-te*V,X=$=X*H-ne*V),R=(G=qn(q,W))*Vn,G&&(Q=W*(H=Math.cos(G))+q*(V=Math.sin(G)),Z=Y*H+J*V,q=q*H-W*V,J=J*H-Y*V,W=Q,Y=Z),I&&Math.abs(I)+Math.abs(R)>359.9&&(I=R=0,O=180-O),T=_round(Math.sqrt(W*W+q*q+X*X)),M=_round(Math.sqrt(J*J+ae*ae)),G=qn(Y,J),D=Math.abs(G)>2e-4?G*Vn:0,U=ie?1/(ie<0?-ie:ie):0),_.svg&&(Q=e.getAttribute("transform"),_.forceCSS=e.setAttribute("transform","")||!_isNullTransform(er(e,Qn)),Q&&e.setAttribute("transform",Q))),Math.abs(D)>90&&Math.abs(D)<270&&(se?(T*=-1,D+=R<=0?180:-180,R+=R<=0?180:-180):(M*=-1,D+=D<=0?180:-180)),l=l||_.uncache,_.x=S-((_.xPercent=S&&(!l&&_.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-S)?-50:0)))?e.offsetWidth*_.xPercent/100:0)+ue,_.y=E-((_.yPercent=E&&(!l&&_.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-E)?-50:0)))?e.offsetHeight*_.yPercent/100:0)+ue,_.z=k+ue,_.scaleX=_round(T),_.scaleY=_round(M),_.rotation=_round(R)+le,_.rotationX=_round(I)+le,_.rotationY=_round(O)+le,_.skewX=D+le,_.skewY=L+le,_.transformPerspective=U+ue,(_.zOrigin=parseFloat(he.split(" ")[2])||!l&&_.zOrigin||0)&&(oe[Zn]=_firstTwoOnly(he)),_.xOffset=_.yOffset=0,_.force3D=_t.force3D,_.renderTransform=_.svg?_renderSVGTransforms:Gn?_renderCSSTransforms:_renderNon3DTransforms,_.uncache=0,_},_firstTwoOnly=function(e){return(e=e.split(" "))[0]+" "+e[1]},_addPxTranslate=function(e,l,_){var S=getUnit(l);return _round(parseFloat(l)+parseFloat(ir(e,"x",_+"px",S)))+S},_renderNon3DTransforms=function(e,l){l.z="0px",l.rotationY=l.rotationX="0deg",l.force3D=0,_renderCSSTransforms(e,l)},lr="0deg",cr="0px",hr=") ",_renderCSSTransforms=function(e,l){var _=l||this,S=_.xPercent,E=_.yPercent,k=_.x,T=_.y,M=_.z,R=_.rotation,I=_.rotationY,O=_.rotationX,D=_.skewX,L=_.skewY,U=_.scaleX,B=_.scaleY,z=_.transformPerspective,j=_.force3D,G=_.target,H=_.zOrigin,V="",W="auto"===j&&e&&1!==e||!0===j;if(H&&(O!==lr||I!==lr)){var q,X=parseFloat(I)*Wn,K=Math.sin(X),Y=Math.cos(X);X=parseFloat(O)*Wn,q=Math.cos(X),k=_addPxTranslate(G,k,K*q*-H),T=_addPxTranslate(G,T,-Math.sin(X)*-H),M=_addPxTranslate(G,M,Y*q*-H+H)}z!==cr&&(V+="perspective("+z+hr),(S||E)&&(V+="translate("+S+"%, "+E+"%) "),(W||k!==cr||T!==cr||M!==cr)&&(V+=M!==cr||W?"translate3d("+k+", "+T+", "+M+") ":"translate("+k+", "+T+hr),R!==lr&&(V+="rotate("+R+hr),I!==lr&&(V+="rotateY("+I+hr),O!==lr&&(V+="rotateX("+O+hr),D===lr&&L===lr||(V+="skew("+D+", "+L+hr),1===U&&1===B||(V+="scale("+U+", "+B+hr),G.style[Qn]=V||"translate(0, 0)"},_renderSVGTransforms=function(e,l){var _,S,E,k,T,M=l||this,R=M.xPercent,I=M.yPercent,O=M.x,D=M.y,L=M.rotation,U=M.skewX,B=M.skewY,z=M.scaleX,j=M.scaleY,G=M.target,H=M.xOrigin,V=M.yOrigin,W=M.xOffset,q=M.yOffset,X=M.forceCSS,K=parseFloat(O),Y=parseFloat(D);L=parseFloat(L),U=parseFloat(U),(B=parseFloat(B))&&(U+=B=parseFloat(B),L+=B),L||U?(L*=Wn,U*=Wn,_=Math.cos(L)*z,S=Math.sin(L)*z,E=Math.sin(L-U)*-j,k=Math.cos(L-U)*j,U&&(B*=Wn,T=Math.tan(U-B),E*=T=Math.sqrt(1+T*T),k*=T,B&&(T=Math.tan(B),_*=T=Math.sqrt(1+T*T),S*=T)),_=_round(_),S=_round(S),E=_round(E),k=_round(k)):(_=z,k=j,S=E=0),(K&&!~(O+"").indexOf("px")||Y&&!~(D+"").indexOf("px"))&&(K=ir(G,"x",O,"px"),Y=ir(G,"y",D,"px")),(H||V||W||q)&&(K=_round(K+H-(H*_+V*E)+W),Y=_round(Y+V-(H*S+V*k)+q)),(R||I)&&(T=G.getBBox(),K=_round(K+R/100*T.width),Y=_round(Y+I/100*T.height)),T="matrix("+_+","+S+","+E+","+k+","+K+","+Y+")",G.setAttribute("transform",T),X&&(G.style[Qn]=T)},_addRotationalPropTween=function(e,l,_,S,E){var k,T,M=360,R=_isString(E),I=parseFloat(E)*(R&&~E.indexOf("rad")?Vn:1)-S,O=S+I+"deg";return R&&("short"===(k=E.split("_")[1])&&(I%=M)!==I%180&&(I+=I<0?M:-360),"cw"===k&&I<0?I=(I+36e9)%M-~~(I/M)*M:"ccw"===k&&I>0&&(I=(I-36e9)%M-~~(I/M)*M)),e._pt=T=new kn(e._pt,l,_,S,I,_renderPropWithEnd),T.e=O,T.u="deg",e._props.push(_),T},_assign=function(e,l){for(var _ in l)e[_]=l[_];return e},_addRawTransformPTs=function(e,l,_){var S,E,k,T,M,R,I,O=_assign({},_._gsap),D=_.style;for(E in O.svg?(k=_.getAttribute("transform"),_.setAttribute("transform",""),D[Qn]=l,S=_parseTransform(_,1),_removeProperty(_,Qn),_.setAttribute("transform",k)):(k=getComputedStyle(_)[Qn],D[Qn]=l,S=_parseTransform(_,1),D[Qn]=k),Hn)(k=O[E])!==(T=S[E])&&"perspective,force3D,transformOrigin,svgOrigin".indexOf(E)<0&&(M=getUnit(k)!==(I=getUnit(T))?ir(_,E,k,I):parseFloat(k),R=parseFloat(T),e._pt=new kn(e._pt,S,E,M,R-M,_renderCSSProp),e._pt.u=I||0,e._props.push(E));_assign(S,O)};_forEachName("padding,margin,Width,Radius",function(e,l){var _="Top",S="Right",E="Bottom",k="Left",T=(l<3?[_,S,E,k]:[_+k,_+S,E+S,E+k]).map(function(_){return l<2?e+_:"border"+_+e});or[l>1?"border"+e:e]=function(e,l,_,S,E){var k,M;if(arguments.length<4)return k=T.map(function(l){return _get(e,l,_)}),5===(M=k.join(" ")).split(k[0]).length?k[0]:M;k=(S+"").split(" "),M={},T.forEach(function(e,l){return M[e]=k[l]=k[l]||k[(l-1)/2|0]}),e.init(l,M,E)}});var dr={name:"css",register:_initCore,targetTest:function(e){return e.style&&e.nodeType},init:function(e,l,_,S,E){var k,T,M,R,I,O,D,L,U,B,z,j,G,H,V,W,q=this._props,X=e.style,K=_.vars.startAt;for(D in Nn||_initCore(),this.styles=this.styles||_getStyleSaver(e),W=this.styles.props,this.tween=_,l)if("autoRound"!==D&&(T=l[D],!qt[D]||!_checkPlugin(D,l,_,S,e,E)))if(I=_typeof3(T),O=or[D],"function"===I&&(I=_typeof3(T=T.call(_,S,e,E))),"string"===I&&~T.indexOf("random(")&&(T=_replaceRandom(T)),O)O(this,e,D,T,_)&&(V=1);else if("--"===D.substr(0,2))k=(getComputedStyle(e).getPropertyValue(D)+"").trim(),T+="",un.lastIndex=0,un.test(k)||(L=getUnit(k),U=getUnit(T)),U?L!==U&&(k=ir(e,D,k,U)+U):L&&(T+=L),this.add(X,"setProperty",k,T,S,E,0,0,D),q.push(D),W.push(D,0,X[D]);else if("undefined"!==I){if(K&&D in K?(k="function"==typeof K[D]?K[D].call(_,S,e,E):K[D],_isString(k)&&~k.indexOf("random(")&&(k=_replaceRandom(k)),getUnit(k+"")||"auto"===k||(k+=_t.units[D]||getUnit(_get(e,D))||""),"="===(k+"").charAt(1)&&(k=_get(e,D))):k=_get(e,D),R=parseFloat(k),(B="string"===I&&"="===T.charAt(1)&&T.substr(0,2))&&(T=T.substr(2)),M=parseFloat(T),D in Jn&&("autoAlpha"===D&&(1===R&&"hidden"===_get(e,"visibility")&&M&&(R=0),W.push("visibility",0,X.visibility),_addNonTweeningPT(this,X,"visibility",R?"inherit":"hidden",M?"inherit":"hidden",!M)),"scale"!==D&&"transform"!==D&&~(D=Jn[D]).indexOf(",")&&(D=D.split(",")[0])),z=D in Hn)if(this.styles.save(D),"string"===I&&"var(--"===T.substring(0,6)&&(T=er(e,T.substring(4,T.indexOf(")"))),M=parseFloat(T)),j||((G=e._gsap).renderTransform&&!l.parseTransform||_parseTransform(e,l.parseTransform),H=!1!==l.smoothOrigin&&G.smooth,(j=this._pt=new kn(this._pt,X,Qn,0,1,G.renderTransform,G,0,-1)).dep=1),"scale"===D)this._pt=new kn(this._pt,G,"scaleY",G.scaleY,(B?_parseRelative(G.scaleY,B+M):M)-G.scaleY||0,_renderCSSProp),this._pt.u=0,q.push("scaleY",D),D+="X";else{if("transformOrigin"===D){W.push(Zn,0,X[Zn]),T=_convertKeywordsToPercentages(T),G.svg?_applySVGOrigin(e,T,0,H,0,this):((U=parseFloat(T.split(" ")[2])||0)!==G.zOrigin&&_addNonTweeningPT(this,G,"zOrigin",G.zOrigin,U),_addNonTweeningPT(this,X,D,_firstTwoOnly(k),_firstTwoOnly(T)));continue}if("svgOrigin"===D){_applySVGOrigin(e,T,1,H,0,this);continue}if(D in ur){_addRotationalPropTween(this,G,D,R,B?_parseRelative(R,B+T):T);continue}if("smoothOrigin"===D){_addNonTweeningPT(this,G,"smooth",G.smooth,T);continue}if("force3D"===D){G[D]=T;continue}if("transform"===D){_addRawTransformPTs(this,T,e);continue}}else D in X||(D=_checkPropPrefix(D)||D);if(z||(M||0===M)&&(R||0===R)&&!Yn.test(T)&&D in X)M||(M=0),(L=(k+"").substr((R+"").length))!==(U=getUnit(T)||(D in _t.units?_t.units[D]:L))&&(R=ir(e,D,k,U)),this._pt=new kn(this._pt,z?G:X,D,R,(B?_parseRelative(R,B+M):M)-R,z||"px"!==U&&"zIndex"!==D||!1===l.autoRound?_renderCSSProp:_renderRoundedCSSProp),this._pt.u=U||0,L!==U&&"%"!==U&&(this._pt.b=k,this._pt.r=_renderCSSPropWithBeginning);else if(D in X)_tweenComplexCSSString.call(this,e,D,k,B?B+T:T);else if(D in e)this.add(e,D,k||e[D],B?B+T:T,S,E);else if("parseTransform"!==D){_missingPlugin();continue}z||(D in X?W.push(D,0,X[D]):"function"==typeof e[D]?W.push(D,2,e[D]()):W.push(D,1,k||e[D])),q.push(D)}V&&_sortPropTweensByPriority(this)},render:function(e,l){if(l.tween._time||!jn())for(var _=l._pt;_;)_.r(e,_.d),_=_._next;else l.styles.revert()},get:_get,aliases:Jn,getSetter:function(e,l,_){var S=Jn[l];return S&&S.indexOf(",")<0&&(l=S),l in Hn&&l!==Zn&&(e._gsap.x||_get(e,"x"))?_&&zn===_?"scale"===l?_setterScale:_setterTransform:(zn=_||{})&&("scale"===l?_setterScaleWithRender:_setterTransformWithRender):e.style&&!_isUndefined(e.style[l])?_setterCSSStyle:~l.indexOf("-")?_setterCSSProp:_getSetter(e,l)},core:{_removeProperty:_removeProperty,_getMatrix:_getMatrix}};function r(e){var l,_,S="";if("string"==typeof e||"number"==typeof e)S+=e;else if("object"==_typeof3(e))if(Array.isArray(e)){var E=e.length;for(l=0;l<E;l++)e[l]&&(_=r(e[l]))&&(S&&(S+=" "),S+=_)}else for(_ in e)e[_]&&(S&&(S+=" "),S+=_);return S}function clsx(){for(var e,l,_=0,S="",E=arguments.length;_<E;_++)(e=arguments[_])&&(l=r(e))&&(S&&(S+=" "),S+=l);return S}Dn.utils.checkPrefix=_checkPropPrefix,Dn.core.getStyleSaver=_getStyleSaver,function(e,l){var _=_forEachName(e+","+l+",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective",function(e){Hn[e]=1});_forEachName(l,function(e){_t.units[e]="deg",ur[e]=1}),Jn[_[13]]=e+","+l,_forEachName("0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY",function(e){var l=e.split(":");Jn[l[1]]=_[l[0]]})}("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY"),_forEachName("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(e){_t.units[e]="px"}),Dn.registerPlugin(dr),O("af",Dn.registerPlugin(dr)||Dn).core.Tween;var _getGroupRecursive=function(e,l){var _;if(0===e.length)return l.classGroupId;var S=e[0],E=l.nextPart.get(S),k=E?_getGroupRecursive(e.slice(1),E):void 0;if(k)return k;if(0!==l.validators.length){var T=e.join("-");return null===(_=l.validators.find(function(e){return(0,e.validator)(T)}))||void 0===_?void 0:_.classGroupId}},fr=/^\[(.+)\]$/,getGroupIdForArbitraryProperty=function(e){if(fr.test(e)){var l=fr.exec(e)[1],_=null==l?void 0:l.substring(0,l.indexOf(":"));if(_)return"arbitrary.."+_}},createClassMap=function(e){var l=e.theme,_=e.classGroups,S={nextPart:new Map,validators:[]};for(var E in _)_processClassesRecursively(_[E],S,E,l);return S},_processClassesRecursively=function(e,l,_,S){e.forEach(function(e){if("string"!=typeof e){if("function"==typeof e)return isThemeGetter(e)?void _processClassesRecursively(e(S),l,_,S):void l.validators.push({validator:e,classGroupId:_});Object.entries(e).forEach(function(e){var E=_slicedToArray(e,2),k=E[0],T=E[1];_processClassesRecursively(T,getPart(l,k),_,S)})}else{(""===e?l:getPart(l,e)).classGroupId=_}})},getPart=function(e,l){var _=e;return l.split("-").forEach(function(e){_.nextPart.has(e)||_.nextPart.set(e,{nextPart:new Map,validators:[]}),_=_.nextPart.get(e)}),_},isThemeGetter=function(e){return e.isThemeGetter},createLruCache=function(e){if(e<1)return{get:function(){},set:function(){}};var l=0,_=new Map,S=new Map,update=function(E,k){_.set(E,k),++l>e&&(l=0,S=_,_=new Map)};return{get:function(e){var l=_.get(e);return void 0!==l?l:void 0!==(l=S.get(e))?(update(e,l),l):void 0},set:function(e,l){_.has(e)?_.set(e,l):update(e,l)}}},createParseClassName=function(e){var l=e.prefix,_=e.experimentalParseClassName,parseClassName=function(e){for(var l,_=[],S=0,E=0,k=0,T=0;T<e.length;T++){var M=e[T];if(0===S&&0===E){if(":"===M){_.push(e.slice(k,T)),k=T+1;continue}if("/"===M){l=T;continue}}"["===M?S++:"]"===M?S--:"("===M?E++:")"===M&&E--}var R=0===_.length?e:e.substring(k),I=stripImportantModifier(R);return{modifiers:_,hasImportantModifier:I!==R,baseClassName:I,maybePostfixModifierPosition:l&&l>k?l-k:void 0}};if(l){var S=l+":",E=parseClassName;parseClassName=function(e){return e.startsWith(S)?E(e.substring(S.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:e,maybePostfixModifierPosition:void 0}}}if(_){var k=parseClassName;parseClassName=function(e){return _({className:e,parseClassName:k})}}return parseClassName},stripImportantModifier=function(e){return e.endsWith("!")?e.substring(0,e.length-1):e.startsWith("!")?e.substring(1):e},createSortModifiers=function(e){var l=Object.fromEntries(e.orderSensitiveModifiers.map(function(e){return[e,!0]}));return function(e){if(e.length<=1)return e;var _=[],S=[];return e.forEach(function(e){"["===e[0]||l[e]?(_.push.apply(_,_toConsumableArray3(S.sort()).concat([e])),S=[]):S.push(e)}),_.push.apply(_,_toConsumableArray3(S.sort())),_}},createConfigUtils=function(e){return _objectSpread2({cache:createLruCache(e.cacheSize),parseClassName:createParseClassName(e),sortModifiers:createSortModifiers(e)},function(e){var l=createClassMap(e),_=e.conflictingClassGroups,S=e.conflictingClassGroupModifiers;return{getClassGroupId:function(e){var _=e.split("-");return""===_[0]&&1!==_.length&&_.shift(),_getGroupRecursive(_,l)||getGroupIdForArbitraryProperty(e)},getConflictingClassGroupIds:function(e,l){var E=_[e]||[];return l&&S[e]?[].concat(_toConsumableArray3(E),_toConsumableArray3(S[e])):E}}}(e))},pr=/\s+/;function twJoin(){for(var e,l,_=0,S="";_<arguments.length;)(e=arguments[_++])&&(l=_toValue(e))&&(S&&(S+=" "),S+=l);return S}var _toValue=function(e){if("string"==typeof e)return e;for(var l,_="",S=0;S<e.length;S++)e[S]&&(l=_toValue(e[S]))&&(_&&(_+=" "),_+=l);return _};function createTailwindMerge(e){for(var l=arguments.length,_=new Array(l>1?l-1:0),S=1;S<l;S++)_[S-1]=arguments[S];var E,k,T,functionToCall=function(l){var S=_.reduce(function(e,l){return l(e)},e());return E=createConfigUtils(S),k=E.cache.get,T=E.cache.set,functionToCall=tailwindMerge,tailwindMerge(l)};function tailwindMerge(e){var l=k(e);if(l)return l;var _=function(e,l){for(var _=l.parseClassName,S=l.getClassGroupId,E=l.getConflictingClassGroupIds,k=l.sortModifiers,T=[],M=e.trim().split(pr),R="",I=M.length-1;I>=0;I-=1){var O=M[I],D=_(O),L=D.isExternal,U=D.modifiers,B=D.hasImportantModifier,z=D.baseClassName,j=D.maybePostfixModifierPosition;if(L)R=O+(R.length>0?" "+R:R);else{var G=!!j,H=S(G?z.substring(0,j):z);if(!H){if(!G){R=O+(R.length>0?" "+R:R);continue}if(!(H=S(z))){R=O+(R.length>0?" "+R:R);continue}G=!1}var V=k(U).join(":"),W=B?V+"!":V,q=W+H;if(!T.includes(q)){T.push(q);for(var X=E(H,G),K=0;K<X.length;++K){var Y=X[K];T.push(W+Y)}R=O+(R.length>0?" "+R:R)}}}return R}(e,E);return T(e,_),_}return function(){return functionToCall(twJoin.apply(null,arguments))}}var vr,gr,fromTheme=function(e){var themeGetter=function(l){return l[e]||[]};return themeGetter.isThemeGetter=!0,themeGetter},mr=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,yr=/^\((?:(\w[\w-]*):)?(.+)\)$/i,_r=/^\d+\/\d+$/,br=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Sr=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,wr=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,xr=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Er=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,isFraction=function(e){return _r.test(e)},isNumber$1=function(e){return!!e&&!Number.isNaN(Number(e))},isInteger=function(e){return!!e&&Number.isInteger(Number(e))},isPercent=function(e){return e.endsWith("%")&&isNumber$1(e.slice(0,-1))},isTshirtSize=function(e){return br.test(e)},isAny=function(){return!0},isLengthOnly=function(e){return Sr.test(e)&&!wr.test(e)},isNever=function(){return!1},isShadow=function(e){return xr.test(e)},isImage=function(e){return Er.test(e)},isAnyNonArbitrary=function(e){return!isArbitraryValue(e)&&!isArbitraryVariable(e)},isArbitrarySize=function(e){return getIsArbitraryValue(e,isLabelSize,isNever)},isArbitraryValue=function(e){return mr.test(e)},isArbitraryLength=function(e){return getIsArbitraryValue(e,isLabelLength,isLengthOnly)},isArbitraryNumber=function(e){return getIsArbitraryValue(e,isLabelNumber,isNumber$1)},isArbitraryPosition=function(e){return getIsArbitraryValue(e,isLabelPosition,isNever)},isArbitraryImage=function(e){return getIsArbitraryValue(e,isLabelImage,isImage)},isArbitraryShadow=function(e){return getIsArbitraryValue(e,isLabelShadow,isShadow)},isArbitraryVariable=function(e){return yr.test(e)},isArbitraryVariableLength=function(e){return getIsArbitraryVariable(e,isLabelLength)},isArbitraryVariableFamilyName=function(e){return getIsArbitraryVariable(e,isLabelFamilyName)},isArbitraryVariablePosition=function(e){return getIsArbitraryVariable(e,isLabelPosition)},isArbitraryVariableSize=function(e){return getIsArbitraryVariable(e,isLabelSize)},isArbitraryVariableImage=function(e){return getIsArbitraryVariable(e,isLabelImage)},isArbitraryVariableShadow=function(e){return getIsArbitraryVariable(e,isLabelShadow,!0)},getIsArbitraryValue=function(e,l,_){var S=mr.exec(e);return!!S&&(S[1]?l(S[1]):_(S[2]))},getIsArbitraryVariable=function(e,l){var _=arguments.length>2&&void 0!==arguments[2]&&arguments[2],S=yr.exec(e);return!!S&&(S[1]?l(S[1]):_)},isLabelPosition=function(e){return"position"===e||"percentage"===e},isLabelImage=function(e){return"image"===e||"url"===e},isLabelSize=function(e){return"length"===e||"size"===e||"bg-size"===e},isLabelLength=function(e){return"length"===e},isLabelNumber=function(e){return"number"===e},isLabelFamilyName=function(e){return"family-name"===e},isLabelShadow=function(e){return"shadow"===e},kr=(O("b3",createTailwindMerge(function(){var e=fromTheme("color"),l=fromTheme("font"),_=fromTheme("text"),S=fromTheme("font-weight"),E=fromTheme("tracking"),k=fromTheme("leading"),T=fromTheme("breakpoint"),M=fromTheme("container"),R=fromTheme("spacing"),I=fromTheme("radius"),O=fromTheme("shadow"),D=fromTheme("inset-shadow"),L=fromTheme("text-shadow"),U=fromTheme("drop-shadow"),B=fromTheme("blur"),z=fromTheme("perspective"),j=fromTheme("aspect"),G=fromTheme("ease"),H=fromTheme("animate"),scalePositionWithArbitrary=function(){return[].concat(_toConsumableArray3(["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"]),[isArbitraryVariable,isArbitraryValue])},scaleUnambiguousSpacing=function(){return[isArbitraryVariable,isArbitraryValue,R]},scaleInset=function(){return[isFraction,"full","auto"].concat(_toConsumableArray3(scaleUnambiguousSpacing()))},scaleGridTemplateColsRows=function(){return[isInteger,"none","subgrid",isArbitraryVariable,isArbitraryValue]},scaleGridColRowStartAndEnd=function(){return["auto",{span:["full",isInteger,isArbitraryVariable,isArbitraryValue]},isInteger,isArbitraryVariable,isArbitraryValue]},scaleGridColRowStartOrEnd=function(){return[isInteger,"auto",isArbitraryVariable,isArbitraryValue]},scaleGridAutoColsRows=function(){return["auto","min","max","fr",isArbitraryVariable,isArbitraryValue]},scaleMargin=function(){return["auto"].concat(_toConsumableArray3(scaleUnambiguousSpacing()))},scaleSizing=function(){return[isFraction,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit"].concat(_toConsumableArray3(scaleUnambiguousSpacing()))},scaleColor=function(){return[e,isArbitraryVariable,isArbitraryValue]},scaleBgPosition=function(){return[].concat(_toConsumableArray3(["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"]),[isArbitraryVariablePosition,isArbitraryPosition,{position:[isArbitraryVariable,isArbitraryValue]}])},scaleBgSize=function(){return["auto","cover","contain",isArbitraryVariableSize,isArbitrarySize,{size:[isArbitraryVariable,isArbitraryValue]}]},scaleGradientStopPosition=function(){return[isPercent,isArbitraryVariableLength,isArbitraryLength]},scaleRadius=function(){return["","none","full",I,isArbitraryVariable,isArbitraryValue]},scaleBorderWidth=function(){return["",isNumber$1,isArbitraryVariableLength,isArbitraryLength]},scaleMaskImagePosition=function(){return[isNumber$1,isPercent,isArbitraryVariablePosition,isArbitraryPosition]},scaleBlur=function(){return["","none",B,isArbitraryVariable,isArbitraryValue]},scaleRotate=function(){return["none",isNumber$1,isArbitraryVariable,isArbitraryValue]},scaleScale=function(){return["none",isNumber$1,isArbitraryVariable,isArbitraryValue]},scaleSkew=function(){return[isNumber$1,isArbitraryVariable,isArbitraryValue]},scaleTranslate=function(){return[isFraction,"full"].concat(_toConsumableArray3(scaleUnambiguousSpacing()))};return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[isTshirtSize],breakpoint:[isTshirtSize],color:[isAny],container:[isTshirtSize],"drop-shadow":[isTshirtSize],ease:["in","out","in-out"],font:[isAnyNonArbitrary],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[isTshirtSize],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[isTshirtSize],shadow:[isTshirtSize],spacing:["px",isNumber$1],text:[isTshirtSize],"text-shadow":[isTshirtSize],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",isFraction,isArbitraryValue,isArbitraryVariable,j]}],container:["container"],columns:[{columns:[isNumber$1,isArbitraryValue,isArbitraryVariable,M]}],"break-after":[{"break-after":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-before":[{"break-before":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:scalePositionWithArbitrary()}],overflow:[{overflow:["auto","hidden","clip","visible","scroll"]}],"overflow-x":[{"overflow-x":["auto","hidden","clip","visible","scroll"]}],"overflow-y":[{"overflow-y":["auto","hidden","clip","visible","scroll"]}],overscroll:[{overscroll:["auto","contain","none"]}],"overscroll-x":[{"overscroll-x":["auto","contain","none"]}],"overscroll-y":[{"overscroll-y":["auto","contain","none"]}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:scaleInset()}],"inset-x":[{"inset-x":scaleInset()}],"inset-y":[{"inset-y":scaleInset()}],start:[{start:scaleInset()}],end:[{end:scaleInset()}],top:[{top:scaleInset()}],right:[{right:scaleInset()}],bottom:[{bottom:scaleInset()}],left:[{left:scaleInset()}],visibility:["visible","invisible","collapse"],z:[{z:[isInteger,"auto",isArbitraryVariable,isArbitraryValue]}],basis:[{basis:[isFraction,"full","auto",M].concat(_toConsumableArray3(scaleUnambiguousSpacing()))}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[isNumber$1,isFraction,"auto","initial","none",isArbitraryValue]}],grow:[{grow:["",isNumber$1,isArbitraryVariable,isArbitraryValue]}],shrink:[{shrink:["",isNumber$1,isArbitraryVariable,isArbitraryValue]}],order:[{order:[isInteger,"first","last","none",isArbitraryVariable,isArbitraryValue]}],"grid-cols":[{"grid-cols":scaleGridTemplateColsRows()}],"col-start-end":[{col:scaleGridColRowStartAndEnd()}],"col-start":[{"col-start":scaleGridColRowStartOrEnd()}],"col-end":[{"col-end":scaleGridColRowStartOrEnd()}],"grid-rows":[{"grid-rows":scaleGridTemplateColsRows()}],"row-start-end":[{row:scaleGridColRowStartAndEnd()}],"row-start":[{"row-start":scaleGridColRowStartOrEnd()}],"row-end":[{"row-end":scaleGridColRowStartOrEnd()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":scaleGridAutoColsRows()}],"auto-rows":[{"auto-rows":scaleGridAutoColsRows()}],gap:[{gap:scaleUnambiguousSpacing()}],"gap-x":[{"gap-x":scaleUnambiguousSpacing()}],"gap-y":[{"gap-y":scaleUnambiguousSpacing()}],"justify-content":[{justify:[].concat(_toConsumableArray3(["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"]),["normal"])}],"justify-items":[{"justify-items":[].concat(_toConsumableArray3(["start","end","center","stretch","center-safe","end-safe"]),["normal"])}],"justify-self":[{"justify-self":["auto"].concat(_toConsumableArray3(["start","end","center","stretch","center-safe","end-safe"]))}],"align-content":[{content:["normal"].concat(_toConsumableArray3(["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"]))}],"align-items":[{items:[].concat(_toConsumableArray3(["start","end","center","stretch","center-safe","end-safe"]),[{baseline:["","last"]}])}],"align-self":[{self:["auto"].concat(_toConsumableArray3(["start","end","center","stretch","center-safe","end-safe"]),[{baseline:["","last"]}])}],"place-content":[{"place-content":["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"]}],"place-items":[{"place-items":[].concat(_toConsumableArray3(["start","end","center","stretch","center-safe","end-safe"]),["baseline"])}],"place-self":[{"place-self":["auto"].concat(_toConsumableArray3(["start","end","center","stretch","center-safe","end-safe"]))}],p:[{p:scaleUnambiguousSpacing()}],px:[{px:scaleUnambiguousSpacing()}],py:[{py:scaleUnambiguousSpacing()}],ps:[{ps:scaleUnambiguousSpacing()}],pe:[{pe:scaleUnambiguousSpacing()}],pt:[{pt:scaleUnambiguousSpacing()}],pr:[{pr:scaleUnambiguousSpacing()}],pb:[{pb:scaleUnambiguousSpacing()}],pl:[{pl:scaleUnambiguousSpacing()}],m:[{m:scaleMargin()}],mx:[{mx:scaleMargin()}],my:[{my:scaleMargin()}],ms:[{ms:scaleMargin()}],me:[{me:scaleMargin()}],mt:[{mt:scaleMargin()}],mr:[{mr:scaleMargin()}],mb:[{mb:scaleMargin()}],ml:[{ml:scaleMargin()}],"space-x":[{"space-x":scaleUnambiguousSpacing()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":scaleUnambiguousSpacing()}],"space-y-reverse":["space-y-reverse"],size:[{size:scaleSizing()}],w:[{w:[M,"screen"].concat(_toConsumableArray3(scaleSizing()))}],"min-w":[{"min-w":[M,"screen","none"].concat(_toConsumableArray3(scaleSizing()))}],"max-w":[{"max-w":[M,"screen","none","prose",{screen:[T]}].concat(_toConsumableArray3(scaleSizing()))}],h:[{h:["screen","lh"].concat(_toConsumableArray3(scaleSizing()))}],"min-h":[{"min-h":["screen","lh","none"].concat(_toConsumableArray3(scaleSizing()))}],"max-h":[{"max-h":["screen","lh"].concat(_toConsumableArray3(scaleSizing()))}],"font-size":[{text:["base",_,isArbitraryVariableLength,isArbitraryLength]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[S,isArbitraryVariable,isArbitraryNumber]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",isPercent,isArbitraryValue]}],"font-family":[{font:[isArbitraryVariableFamilyName,isArbitraryValue,l]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[E,isArbitraryVariable,isArbitraryValue]}],"line-clamp":[{"line-clamp":[isNumber$1,"none",isArbitraryVariable,isArbitraryNumber]}],leading:[{leading:[k].concat(_toConsumableArray3(scaleUnambiguousSpacing()))}],"list-image":[{"list-image":["none",isArbitraryVariable,isArbitraryValue]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",isArbitraryVariable,isArbitraryValue]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:scaleColor()}],"text-color":[{text:scaleColor()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[].concat(_toConsumableArray3(["solid","dashed","dotted","double"]),["wavy"])}],"text-decoration-thickness":[{decoration:[isNumber$1,"from-font","auto",isArbitraryVariable,isArbitraryLength]}],"text-decoration-color":[{decoration:scaleColor()}],"underline-offset":[{"underline-offset":[isNumber$1,"auto",isArbitraryVariable,isArbitraryValue]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:scaleUnambiguousSpacing()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",isArbitraryVariable,isArbitraryValue]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",isArbitraryVariable,isArbitraryValue]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:scaleBgPosition()}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","space","round"]}]}],"bg-size":[{bg:scaleBgSize()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},isInteger,isArbitraryVariable,isArbitraryValue],radial:["",isArbitraryVariable,isArbitraryValue],conic:[isInteger,isArbitraryVariable,isArbitraryValue]},isArbitraryVariableImage,isArbitraryImage]}],"bg-color":[{bg:scaleColor()}],"gradient-from-pos":[{from:scaleGradientStopPosition()}],"gradient-via-pos":[{via:scaleGradientStopPosition()}],"gradient-to-pos":[{to:scaleGradientStopPosition()}],"gradient-from":[{from:scaleColor()}],"gradient-via":[{via:scaleColor()}],"gradient-to":[{to:scaleColor()}],rounded:[{rounded:scaleRadius()}],"rounded-s":[{"rounded-s":scaleRadius()}],"rounded-e":[{"rounded-e":scaleRadius()}],"rounded-t":[{"rounded-t":scaleRadius()}],"rounded-r":[{"rounded-r":scaleRadius()}],"rounded-b":[{"rounded-b":scaleRadius()}],"rounded-l":[{"rounded-l":scaleRadius()}],"rounded-ss":[{"rounded-ss":scaleRadius()}],"rounded-se":[{"rounded-se":scaleRadius()}],"rounded-ee":[{"rounded-ee":scaleRadius()}],"rounded-es":[{"rounded-es":scaleRadius()}],"rounded-tl":[{"rounded-tl":scaleRadius()}],"rounded-tr":[{"rounded-tr":scaleRadius()}],"rounded-br":[{"rounded-br":scaleRadius()}],"rounded-bl":[{"rounded-bl":scaleRadius()}],"border-w":[{border:scaleBorderWidth()}],"border-w-x":[{"border-x":scaleBorderWidth()}],"border-w-y":[{"border-y":scaleBorderWidth()}],"border-w-s":[{"border-s":scaleBorderWidth()}],"border-w-e":[{"border-e":scaleBorderWidth()}],"border-w-t":[{"border-t":scaleBorderWidth()}],"border-w-r":[{"border-r":scaleBorderWidth()}],"border-w-b":[{"border-b":scaleBorderWidth()}],"border-w-l":[{"border-l":scaleBorderWidth()}],"divide-x":[{"divide-x":scaleBorderWidth()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":scaleBorderWidth()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[].concat(_toConsumableArray3(["solid","dashed","dotted","double"]),["hidden","none"])}],"divide-style":[{divide:[].concat(_toConsumableArray3(["solid","dashed","dotted","double"]),["hidden","none"])}],"border-color":[{border:scaleColor()}],"border-color-x":[{"border-x":scaleColor()}],"border-color-y":[{"border-y":scaleColor()}],"border-color-s":[{"border-s":scaleColor()}],"border-color-e":[{"border-e":scaleColor()}],"border-color-t":[{"border-t":scaleColor()}],"border-color-r":[{"border-r":scaleColor()}],"border-color-b":[{"border-b":scaleColor()}],"border-color-l":[{"border-l":scaleColor()}],"divide-color":[{divide:scaleColor()}],"outline-style":[{outline:[].concat(_toConsumableArray3(["solid","dashed","dotted","double"]),["none","hidden"])}],"outline-offset":[{"outline-offset":[isNumber$1,isArbitraryVariable,isArbitraryValue]}],"outline-w":[{outline:["",isNumber$1,isArbitraryVariableLength,isArbitraryLength]}],"outline-color":[{outline:scaleColor()}],shadow:[{shadow:["","none",O,isArbitraryVariableShadow,isArbitraryShadow]}],"shadow-color":[{shadow:scaleColor()}],"inset-shadow":[{"inset-shadow":["none",D,isArbitraryVariableShadow,isArbitraryShadow]}],"inset-shadow-color":[{"inset-shadow":scaleColor()}],"ring-w":[{ring:scaleBorderWidth()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:scaleColor()}],"ring-offset-w":[{"ring-offset":[isNumber$1,isArbitraryLength]}],"ring-offset-color":[{"ring-offset":scaleColor()}],"inset-ring-w":[{"inset-ring":scaleBorderWidth()}],"inset-ring-color":[{"inset-ring":scaleColor()}],"text-shadow":[{"text-shadow":["none",L,isArbitraryVariableShadow,isArbitraryShadow]}],"text-shadow-color":[{"text-shadow":scaleColor()}],opacity:[{opacity:[isNumber$1,isArbitraryVariable,isArbitraryValue]}],"mix-blend":[{"mix-blend":[].concat(_toConsumableArray3(["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]),["plus-darker","plus-lighter"])}],"bg-blend":[{"bg-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[isNumber$1]}],"mask-image-linear-from-pos":[{"mask-linear-from":scaleMaskImagePosition()}],"mask-image-linear-to-pos":[{"mask-linear-to":scaleMaskImagePosition()}],"mask-image-linear-from-color":[{"mask-linear-from":scaleColor()}],"mask-image-linear-to-color":[{"mask-linear-to":scaleColor()}],"mask-image-t-from-pos":[{"mask-t-from":scaleMaskImagePosition()}],"mask-image-t-to-pos":[{"mask-t-to":scaleMaskImagePosition()}],"mask-image-t-from-color":[{"mask-t-from":scaleColor()}],"mask-image-t-to-color":[{"mask-t-to":scaleColor()}],"mask-image-r-from-pos":[{"mask-r-from":scaleMaskImagePosition()}],"mask-image-r-to-pos":[{"mask-r-to":scaleMaskImagePosition()}],"mask-image-r-from-color":[{"mask-r-from":scaleColor()}],"mask-image-r-to-color":[{"mask-r-to":scaleColor()}],"mask-image-b-from-pos":[{"mask-b-from":scaleMaskImagePosition()}],"mask-image-b-to-pos":[{"mask-b-to":scaleMaskImagePosition()}],"mask-image-b-from-color":[{"mask-b-from":scaleColor()}],"mask-image-b-to-color":[{"mask-b-to":scaleColor()}],"mask-image-l-from-pos":[{"mask-l-from":scaleMaskImagePosition()}],"mask-image-l-to-pos":[{"mask-l-to":scaleMaskImagePosition()}],"mask-image-l-from-color":[{"mask-l-from":scaleColor()}],"mask-image-l-to-color":[{"mask-l-to":scaleColor()}],"mask-image-x-from-pos":[{"mask-x-from":scaleMaskImagePosition()}],"mask-image-x-to-pos":[{"mask-x-to":scaleMaskImagePosition()}],"mask-image-x-from-color":[{"mask-x-from":scaleColor()}],"mask-image-x-to-color":[{"mask-x-to":scaleColor()}],"mask-image-y-from-pos":[{"mask-y-from":scaleMaskImagePosition()}],"mask-image-y-to-pos":[{"mask-y-to":scaleMaskImagePosition()}],"mask-image-y-from-color":[{"mask-y-from":scaleColor()}],"mask-image-y-to-color":[{"mask-y-to":scaleColor()}],"mask-image-radial":[{"mask-radial":[isArbitraryVariable,isArbitraryValue]}],"mask-image-radial-from-pos":[{"mask-radial-from":scaleMaskImagePosition()}],"mask-image-radial-to-pos":[{"mask-radial-to":scaleMaskImagePosition()}],"mask-image-radial-from-color":[{"mask-radial-from":scaleColor()}],"mask-image-radial-to-color":[{"mask-radial-to":scaleColor()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"]}],"mask-image-conic-pos":[{"mask-conic":[isNumber$1]}],"mask-image-conic-from-pos":[{"mask-conic-from":scaleMaskImagePosition()}],"mask-image-conic-to-pos":[{"mask-conic-to":scaleMaskImagePosition()}],"mask-image-conic-from-color":[{"mask-conic-from":scaleColor()}],"mask-image-conic-to-color":[{"mask-conic-to":scaleColor()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:scaleBgPosition()}],"mask-repeat":[{mask:["no-repeat",{repeat:["","x","y","space","round"]}]}],"mask-size":[{mask:scaleBgSize()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",isArbitraryVariable,isArbitraryValue]}],filter:[{filter:["","none",isArbitraryVariable,isArbitraryValue]}],blur:[{blur:scaleBlur()}],brightness:[{brightness:[isNumber$1,isArbitraryVariable,isArbitraryValue]}],contrast:[{contrast:[isNumber$1,isArbitraryVariable,isArbitraryValue]}],"drop-shadow":[{"drop-shadow":["","none",U,isArbitraryVariableShadow,isArbitraryShadow]}],"drop-shadow-color":[{"drop-shadow":scaleColor()}],grayscale:[{grayscale:["",isNumber$1,isArbitraryVariable,isArbitraryValue]}],"hue-rotate":[{"hue-rotate":[isNumber$1,isArbitraryVariable,isArbitraryValue]}],invert:[{invert:["",isNumber$1,isArbitraryVariable,isArbitraryValue]}],saturate:[{saturate:[isNumber$1,isArbitraryVariable,isArbitraryValue]}],sepia:[{sepia:["",isNumber$1,isArbitraryVariable,isArbitraryValue]}],"backdrop-filter":[{"backdrop-filter":["","none",isArbitraryVariable,isArbitraryValue]}],"backdrop-blur":[{"backdrop-blur":scaleBlur()}],"backdrop-brightness":[{"backdrop-brightness":[isNumber$1,isArbitraryVariable,isArbitraryValue]}],"backdrop-contrast":[{"backdrop-contrast":[isNumber$1,isArbitraryVariable,isArbitraryValue]}],"backdrop-grayscale":[{"backdrop-grayscale":["",isNumber$1,isArbitraryVariable,isArbitraryValue]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[isNumber$1,isArbitraryVariable,isArbitraryValue]}],"backdrop-invert":[{"backdrop-invert":["",isNumber$1,isArbitraryVariable,isArbitraryValue]}],"backdrop-opacity":[{"backdrop-opacity":[isNumber$1,isArbitraryVariable,isArbitraryValue]}],"backdrop-saturate":[{"backdrop-saturate":[isNumber$1,isArbitraryVariable,isArbitraryValue]}],"backdrop-sepia":[{"backdrop-sepia":["",isNumber$1,isArbitraryVariable,isArbitraryValue]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":scaleUnambiguousSpacing()}],"border-spacing-x":[{"border-spacing-x":scaleUnambiguousSpacing()}],"border-spacing-y":[{"border-spacing-y":scaleUnambiguousSpacing()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",isArbitraryVariable,isArbitraryValue]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[isNumber$1,"initial",isArbitraryVariable,isArbitraryValue]}],ease:[{ease:["linear","initial",G,isArbitraryVariable,isArbitraryValue]}],delay:[{delay:[isNumber$1,isArbitraryVariable,isArbitraryValue]}],animate:[{animate:["none",H,isArbitraryVariable,isArbitraryValue]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[z,isArbitraryVariable,isArbitraryValue]}],"perspective-origin":[{"perspective-origin":scalePositionWithArbitrary()}],rotate:[{rotate:scaleRotate()}],"rotate-x":[{"rotate-x":scaleRotate()}],"rotate-y":[{"rotate-y":scaleRotate()}],"rotate-z":[{"rotate-z":scaleRotate()}],scale:[{scale:scaleScale()}],"scale-x":[{"scale-x":scaleScale()}],"scale-y":[{"scale-y":scaleScale()}],"scale-z":[{"scale-z":scaleScale()}],"scale-3d":["scale-3d"],skew:[{skew:scaleSkew()}],"skew-x":[{"skew-x":scaleSkew()}],"skew-y":[{"skew-y":scaleSkew()}],transform:[{transform:[isArbitraryVariable,isArbitraryValue,"","none","gpu","cpu"]}],"transform-origin":[{origin:scalePositionWithArbitrary()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:scaleTranslate()}],"translate-x":[{"translate-x":scaleTranslate()}],"translate-y":[{"translate-y":scaleTranslate()}],"translate-z":[{"translate-z":scaleTranslate()}],"translate-none":["translate-none"],accent:[{accent:scaleColor()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:scaleColor()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",isArbitraryVariable,isArbitraryValue]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":scaleUnambiguousSpacing()}],"scroll-mx":[{"scroll-mx":scaleUnambiguousSpacing()}],"scroll-my":[{"scroll-my":scaleUnambiguousSpacing()}],"scroll-ms":[{"scroll-ms":scaleUnambiguousSpacing()}],"scroll-me":[{"scroll-me":scaleUnambiguousSpacing()}],"scroll-mt":[{"scroll-mt":scaleUnambiguousSpacing()}],"scroll-mr":[{"scroll-mr":scaleUnambiguousSpacing()}],"scroll-mb":[{"scroll-mb":scaleUnambiguousSpacing()}],"scroll-ml":[{"scroll-ml":scaleUnambiguousSpacing()}],"scroll-p":[{"scroll-p":scaleUnambiguousSpacing()}],"scroll-px":[{"scroll-px":scaleUnambiguousSpacing()}],"scroll-py":[{"scroll-py":scaleUnambiguousSpacing()}],"scroll-ps":[{"scroll-ps":scaleUnambiguousSpacing()}],"scroll-pe":[{"scroll-pe":scaleUnambiguousSpacing()}],"scroll-pt":[{"scroll-pt":scaleUnambiguousSpacing()}],"scroll-pr":[{"scroll-pr":scaleUnambiguousSpacing()}],"scroll-pb":[{"scroll-pb":scaleUnambiguousSpacing()}],"scroll-pl":[{"scroll-pl":scaleUnambiguousSpacing()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",isArbitraryVariable,isArbitraryValue]}],fill:[{fill:["none"].concat(_toConsumableArray3(scaleColor()))}],"stroke-w":[{stroke:[isNumber$1,isArbitraryVariableLength,isArbitraryLength,isArbitraryNumber]}],stroke:[{stroke:["none"].concat(_toConsumableArray3(scaleColor()))}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}})),{}),Ar={},Cr={};function requireLog(){return vr||(vr=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Log=e.LogLevel=void 0;var l=" DEBUG ",_="  INFO ",S="  WARN ",E=" ERROR ";function addTag(e){return e.unshift("[Statsig]"),e}e.LogLevel={None:0,Error:1,Warn:2,Info:3,Debug:4};var k=function(){function Log(){_classCallCheck3(this,Log)}return _createClass3(Log,null,[{key:"info",value:function(){if(Log.level>=e.LogLevel.Info){for(var l,S=arguments.length,E=new Array(S),k=0;k<S;k++)E[k]=arguments[k];(l=console).info.apply(l,[_].concat(_toConsumableArray3(addTag(E))))}}},{key:"debug",value:function(){if(Log.level>=e.LogLevel.Debug){for(var _,S=arguments.length,E=new Array(S),k=0;k<S;k++)E[k]=arguments[k];(_=console).debug.apply(_,[l].concat(_toConsumableArray3(addTag(E))))}}},{key:"warn",value:function(){if(Log.level>=e.LogLevel.Warn){for(var l,_=arguments.length,E=new Array(_),k=0;k<_;k++)E[k]=arguments[k];(l=console).warn.apply(l,[S].concat(_toConsumableArray3(addTag(E))))}}},{key:"error",value:function(){if(Log.level>=e.LogLevel.Error){for(var l,_=arguments.length,S=new Array(_),k=0;k<_;k++)S[k]=arguments[k];(l=console).error.apply(l,[E].concat(_toConsumableArray3(addTag(S))))}}}])}();e.Log=k,k.level=e.LogLevel.Warn}(Cr)),Cr}function require$_StatsigGlobal(){return gr||(gr=1,function(e){var l,_,S;Object.defineProperty(e,"__esModule",{value:!0}),e._getInstance=e._getStatsigGlobalFlag=e._getStatsigGlobal=void 0;var E=requireLog();e._getStatsigGlobal=function(){try{return"undefined"!=typeof __STATSIG__?__STATSIG__:I}catch(oo){return I}};e._getStatsigGlobalFlag=function(l){return(0,e._getStatsigGlobal)()[l]};e._getInstance=function(l){var _=(0,e._getStatsigGlobal)();return l?_.instances&&_.instances[l]:(_.instances&&Object.keys(_.instances).length>1&&E.Log.warn("Call made to Statsig global instance without an SDK key but there is more than one client instance. If you are using mulitple clients, please specify the SDK key."),_.firstInstance)};var k="__STATSIG__",T="undefined"!=typeof window?window:{},M=void 0!==D?D:{},R="undefined"!=typeof globalThis?globalThis:{},I=null!==(S=null!==(_=null!==(l=T[k])&&void 0!==l?l:M[k])&&void 0!==_?_:R[k])&&void 0!==S?S:{instance:e._getInstance};T[k]=I,M[k]=I,R[k]=I}(Ar)),Ar}var Tr,Mr={};function requireDiagnostics(){return Tr||(Tr=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Diagnostics=void 0;var l=new Map,_="start",S="end",E="statsig::diagnostics";function _createMarker(e,l,_,S){return Object.assign({key:_,action:l,step:S,timestamp:Date.now()},e)}function _addMarker(e,_){var S,E=null!==(S=l.get(e))&&void 0!==S?S:[];E.push(_),l.set(e,E)}function _safeGetField(e,l){if(l in e)return e[l]}e.Diagnostics={_getMarkers:function(e){return l.get(e)},_markInitOverallStart:function(e){_addMarker(e,_createMarker({},_,"overall"))},_markInitOverallEnd:function(e,l,_){_addMarker(e,_createMarker({success:l,error:l?void 0:{name:"InitializeError",message:"Failed to initialize"},evaluationDetails:_},S,"overall"))},_markInitNetworkReqStart:function(e,l){_addMarker(e,_createMarker(l,_,"initialize","network_request"))},_markInitNetworkReqEnd:function(e,l){_addMarker(e,_createMarker(l,S,"initialize","network_request"))},_markInitProcessStart:function(e){_addMarker(e,_createMarker({},_,"initialize","process"))},_markInitProcessEnd:function(e,l){_addMarker(e,_createMarker(l,S,"initialize","process"))},_clearMarkers:function(e){l.delete(e)},_formatError:function(e){if(e&&"object"===_typeof3(e))return{code:_safeGetField(e,"code"),name:_safeGetField(e,"name"),message:_safeGetField(e,"message")}},_getDiagnosticsData:function(l,_,S,E){var k;return{success:!0===(null==l?void 0:l.ok),statusCode:null==l?void 0:l.status,sdkRegion:null===(k=null==l?void 0:l.headers)||void 0===k?void 0:k.get("x-statsig-region"),isDelta:!0===S.includes('"is_delta":true')||void 0,attempt:_,error:e.Diagnostics._formatError(E)}},_enqueueDiagnosticsEvent:function(l,_,S,k){var T=e.Diagnostics._getMarkers(S);if(null==T||T.length<=0)return-1;var M=T[T.length-1].timestamp-T[0].timestamp;e.Diagnostics._clearMarkers(S);var R=function(e,l){var _={eventName:E,user:e,value:null,metadata:l,time:Date.now()};return _}(l,{context:"initialize",markers:T.slice(),statsigOptions:k});return _.enqueue(R),M}}}(Mr)),Mr}var Rr,Ir,Pr,Or={},Dr={},Lr={},Ur={};function requireTypingUtils(){if(Rr)return Ur;return Rr=1,Object.defineProperty(Ur,"__esModule",{value:!0}),Ur._isTypeMatch=Ur._typeOf=void 0,Ur._typeOf=function(e){return Array.isArray(e)?"array":_typeof3(e)},Ur._isTypeMatch=function(e,l){var typeOf=function(e){return Array.isArray(e)?"array":null===e?"null":_typeof3(e)};return typeOf(e)===typeOf(l)},Ur}function requireHashing(){return Ir||(Ir=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e._getSortedObject=e._DJB2Object=e._DJB2=void 0;var l=requireTypingUtils();e._DJB2=function(e){for(var l=0,_=0;_<e.length;_++){l=(l<<5)-l+e.charCodeAt(_),l&=l}return String(l>>>0)};e._DJB2Object=function(l,_){return(0,e._DJB2)(JSON.stringify((0,e._getSortedObject)(l,_)))};e._getSortedObject=function(_,S){if(null==_)return null;var E=Object.keys(_).sort(),k={};return E.forEach(function(E){var T=_[E];0!==S&&"object"===(0,l._typeOf)(T)?k[E]=(0,e._getSortedObject)(T,null!=S?S-1:S):k[E]=T}),k}}(Lr)),Lr}function requireCacheKey(){if(Pr)return Dr;Pr=1,Object.defineProperty(Dr,"__esModule",{value:!0}),Dr._getStorageKey=Dr._getUserStorageKey=void 0;var e=requireHashing();function _getUserStorageKey(l,_,S){var E;if(S)return S(l,_);var k=_&&_.customIDs?_.customIDs:{},T=["uid:".concat(null!==(E=null==_?void 0:_.userID)&&void 0!==E?E:""),"cids:".concat(Object.keys(k).sort(function(e,l){return e.localeCompare(l)}).map(function(e){return"".concat(e,"-").concat(k[e])}).join(",")),"k:".concat(l)];return(0,e._DJB2)(T.join("|"))}return Dr._getUserStorageKey=_getUserStorageKey,Dr._getStorageKey=function(l,_,S){return _?_getUserStorageKey(l,_,S):(0,e._DJB2)("k:".concat(l))},Dr}var Fr,Nr={};function requireNetworkConfig(){return Fr||(Fr=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.NetworkParam=e.NetworkDefault=e.Endpoint=void 0,e.Endpoint={_initialize:"initialize",_rgstr:"rgstr",_download_config_specs:"download_config_specs"},e.NetworkDefault=_defineProperty3(_defineProperty3(_defineProperty3({},e.Endpoint._rgstr,"https://prodregistryv2.org/v1"),e.Endpoint._initialize,"https://featureassets.org/v1"),e.Endpoint._download_config_specs,"https://api.statsigcdn.com/v1"),e.NetworkParam={EventCount:"ec",SdkKey:"k",SdkType:"st",SdkVersion:"sv",Time:"t",SessionID:"sid",StatsigEncoded:"se",IsGzipped:"gz"}}(Nr)),Nr}var Br,zr={};function requireSafeJs(){return Br||(Br=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e._getUnloadEvent=e._getCurrentPageUrlSafe=e._addDocumentEventListenerSafe=e._addWindowEventListenerSafe=e._isServerEnv=e._getDocumentSafe=e._getWindowSafe=void 0;e._getWindowSafe=function(){return"undefined"!=typeof window?window:null};e._getDocumentSafe=function(){var l,_=(0,e._getWindowSafe)();return null!==(l=null==_?void 0:_.document)&&void 0!==l?l:null};e._isServerEnv=function(){if(null!==(0,e._getDocumentSafe)())return!1;var l="undefined"!=typeof process&&null!=process.versions&&null!=process.versions.node;return"string"==typeof EdgeRuntime||l};e._addWindowEventListenerSafe=function(l,_){var S=(0,e._getWindowSafe)();"function"==typeof(null==S?void 0:S.addEventListener)&&S.addEventListener(l,_)};e._addDocumentEventListenerSafe=function(l,_){var S=(0,e._getDocumentSafe)();"function"==typeof(null==S?void 0:S.addEventListener)&&S.addEventListener(l,_)};e._getCurrentPageUrlSafe=function(){var l;try{return null===(l=(0,e._getWindowSafe)())||void 0===l?void 0:l.location.href.split(/[?#]/)[0]}catch(_){return}};e._getUnloadEvent=function(){var l=(0,e._getWindowSafe)();return l&&"onpagehide"in l?"pagehide":"beforeunload"}}(zr)),zr}var jr,Gr={};function requireStatsigEvent(){if(jr)return Gr;jr=1,Object.defineProperty(Gr,"__esModule",{value:!0}),Gr._createLayerParameterExposure=Gr._createConfigExposure=Gr._mapExposures=Gr._createGateExposure=Gr._isExposureEvent=void 0;var e="statsig::config_exposure",l="statsig::gate_exposure",_="statsig::layer_exposure",_createExposure=function(e,l,_,S,E){return _.bootstrapMetadata&&(S.bootstrapMetadata=_.bootstrapMetadata),{eventName:e,user:l,value:null,metadata:_addEvaluationDetailsToMetadata(_,S),secondaryExposures:E,time:Date.now()}};Gr._isExposureEvent=function(S){var E=S.eventName;return E===l||E===e||E===_};function _mapExposures(e,l){return e.map(function(e){return"string"==typeof e?(null!=l?l:{})[e]:e}).filter(function(e){return null!=e})}Gr._createGateExposure=function(e,_,S){var E,k,T,M={gate:_.name,gateValue:String(_.value),ruleID:_.ruleID};return null!=(null===(E=_.__evaluation)||void 0===E?void 0:E.version)&&(M.configVersion=_.__evaluation.version),_createExposure(l,e,_.details,M,_mapExposures(null!==(T=null===(k=_.__evaluation)||void 0===k?void 0:k.secondary_exposures)&&void 0!==T?T:[],S))},Gr._mapExposures=_mapExposures;Gr._createConfigExposure=function(l,_,S){var E,k,T,M,R={config:_.name,ruleID:_.ruleID};return null!=(null===(E=_.__evaluation)||void 0===E?void 0:E.version)&&(R.configVersion=_.__evaluation.version),null!=(null===(k=_.__evaluation)||void 0===k?void 0:k.passed)&&(R.rulePassed=String(_.__evaluation.passed)),_createExposure(e,l,_.details,R,_mapExposures(null!==(M=null===(T=_.__evaluation)||void 0===T?void 0:T.secondary_exposures)&&void 0!==M?M:[],S))};Gr._createLayerParameterExposure=function(e,l,S,E){var k,T,M,R,I,O,D,L=l.__evaluation,U=!0===(null===(k=null==L?void 0:L.explicit_parameters)||void 0===k?void 0:k.includes(S)),B="",z=null!==(T=null==L?void 0:L.undelegated_secondary_exposures)&&void 0!==T?T:[];U&&(B=null!==(M=L.allocated_experiment_name)&&void 0!==M?M:"",z=null!==(R=L.secondary_exposures)&&void 0!==R?R:[]);var j=null===(I=l.__evaluation)||void 0===I?void 0:I.parameter_rule_ids,G={config:l.name,parameterName:S,ruleID:null!==(O=null==j?void 0:j[S])&&void 0!==O?O:l.ruleID,allocatedExperiment:B,isExplicitParameter:String(U)};return null!=(null===(D=l.__evaluation)||void 0===D?void 0:D.version)&&(G.configVersion=l.__evaluation.version),_createExposure(_,e,l.details,G,_mapExposures(z,E))};var _addEvaluationDetailsToMetadata=function(e,l){return l.reason=e.reason,e.lcut&&(l.lcut=String(e.lcut)),e.receivedAt&&(l.receivedAt=String(e.receivedAt)),l};return Gr}var Hr,Vr={};function requireStatsigOptionsCommon(){return Hr||(Hr=1,Object.defineProperty(Vr,"__esModule",{value:!0}),Vr.LoggingEnabledOption=Vr.LogEventCompressionMode=void 0,Vr.LogEventCompressionMode={Disabled:"d",Enabled:"e",Forced:"f"},Vr.LoggingEnabledOption={disabled:"disabled",browserOnly:"browser-only",always:"always"}),Vr}var Wr,qr={};function requireStorageProvider(){return Wr||(Wr=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e._setObjectInStorage=e._getObjectFromStorage=e.Storage=void 0;var l=requireLog(),_=requireSafeJs(),S={},E={isReady:function(){return!0},isReadyResolver:function(){return null},getProviderName:function(){return"InMemory"},getItem:function(e){return S[e]?S[e]:null},setItem:function(e,l){S[e]=l},removeItem:function(e){delete S[e]},getAllKeys:function(){return Object.keys(S)}},k=null;try{var T=(0,_._getWindowSafe)();T&&T.localStorage&&"function"==typeof T.localStorage.getItem&&(k={isReady:function(){return!0},isReadyResolver:function(){return null},getProviderName:function(){return"LocalStorage"},getItem:function(e){return T.localStorage.getItem(e)},setItem:function(e,l){return T.localStorage.setItem(e,l)},removeItem:function(e){return T.localStorage.removeItem(e)},getAllKeys:function(){return Object.keys(T.localStorage)}})}catch(I){l.Log.warn("Failed to setup localStorageProvider.")}var M=null!=k?k:E,R=M;function _inMemoryBreaker(l){try{return l()}catch(I){if(I instanceof Error&&"SecurityError"===I.name)return e.Storage._setProvider(E),null;if(I instanceof Error&&"QuotaExceededError"===I.name){var _=e.Storage.getAllKeys().filter(function(e){return e.startsWith("statsig.")});I.message="".concat(I.message,". Statsig Keys: ").concat(_.length)}throw I}}e.Storage={isReady:function(){return R.isReady()},isReadyResolver:function(){return R.isReadyResolver()},getProviderName:function(){return R.getProviderName()},getItem:function(e){return _inMemoryBreaker(function(){return R.getItem(e)})},setItem:function(e,l){return _inMemoryBreaker(function(){return R.setItem(e,l)})},removeItem:function(e){return R.removeItem(e)},getAllKeys:function(){return R.getAllKeys()},_setProvider:function(e){M=e,R=e},_setDisabled:function(e){R=e?E:M}},e._getObjectFromStorage=function(l){var _=e.Storage.getItem(l);return JSON.parse(null!=_?_:"null")},e._setObjectInStorage=function(l,_){e.Storage.setItem(l,JSON.stringify(_))}}(qr)),qr}var Xr,Kr={};function requireUrlConfiguration(){if(Xr)return Kr;Xr=1,Object.defineProperty(Kr,"__esModule",{value:!0}),Kr.UrlConfiguration=void 0;var e=requireHashing(),l=requireNetworkConfig(),_=_defineProperty3(_defineProperty3(_defineProperty3({},l.Endpoint._initialize,"i"),l.Endpoint._rgstr,"e"),l.Endpoint._download_config_specs,"d"),S=function(){return _createClass3(function UrlConfiguration(e,S,E,k){_classCallCheck3(this,UrlConfiguration),this.customUrl=null,this.fallbackUrls=null,this.endpoint=e,this.endpointDnsKey=_[e],S&&(this.customUrl=S),!S&&E&&(this.customUrl=E.endsWith("/")?"".concat(E).concat(e):"".concat(E,"/").concat(e)),k&&(this.fallbackUrls=k);var T=l.NetworkDefault[e];this.defaultUrl="".concat(T,"/").concat(e)},[{key:"getUrl",value:function(){var e;return null!==(e=this.customUrl)&&void 0!==e?e:this.defaultUrl}},{key:"getChecksum",value:function(){var l,_=(null!==(l=this.fallbackUrls)&&void 0!==l?l:[]).sort().join(",");return(0,e._DJB2)(this.customUrl+_)}}])}();return Kr.UrlConfiguration=S,Kr}var Yr,Jr,Qr={};function requireVisibilityObserving(){return Yr||(Yr=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e._notifyVisibilityChanged=e._subscribeToVisiblityChanged=e._isUnloading=e._isCurrentlyVisible=void 0;var l=requireSafeJs(),_="foreground",S="background",E=[],k=_,T=!1;e._isCurrentlyVisible=function(){return k===_};e._isUnloading=function(){return T};e._subscribeToVisiblityChanged=function(e){E.unshift(e)};e._notifyVisibilityChanged=function(e){e!==k&&(k=e,E.forEach(function(l){return l(e)}))},(0,l._addWindowEventListenerSafe)("focus",function(){T=!1,(0,e._notifyVisibilityChanged)(_)}),(0,l._addWindowEventListenerSafe)("blur",function(){return(0,e._notifyVisibilityChanged)(S)}),(0,l._addDocumentEventListenerSafe)("visibilitychange",function(){(0,e._notifyVisibilityChanged)("visible"===document.visibilityState?_:S)}),(0,l._addWindowEventListenerSafe)((0,l._getUnloadEvent)(),function(){T=!0,(0,e._notifyVisibilityChanged)(S)})}(Qr)),Qr}function requireEventLogger(){if(Jr)return Or;Jr=1;var e=Or&&Or.__awaiter||function(e,l,_,S){return new(_||(_=Promise))(function(E,k){function fulfilled(e){try{step(S.next(e))}catch(oo){k(oo)}}function rejected(e){try{step(S.throw(e))}catch(oo){k(oo)}}function step(e){var l;e.done?E(e.value):(l=e.value,l instanceof _?l:new _(function(e){e(l)})).then(fulfilled,rejected)}step((S=S.apply(e,l||[])).next())})};Object.defineProperty(Or,"__esModule",{value:!0}),Or.EventLogger=void 0;var l=requireCacheKey(),_=requireHashing(),S=requireLog(),E=requireNetworkConfig(),k=requireSafeJs(),T=requireStatsigEvent(),M=requireStatsigOptionsCommon(),R=requireStorageProvider(),I=requireUrlConfiguration(),O=requireVisibilityObserving(),D={},L="startup",U="gained_focus",B=function(){function EventLogger(e,l,_,k){var T,R;_classCallCheck3(this,EventLogger),this._sdkKey=e,this._emitter=l,this._network=_,this._options=k,this._queue=[],this._lastExposureTimeMap={},this._nonExposedChecks={},this._hasRunQuickFlush=!1,this._creationTime=Date.now(),this._loggingEnabled=null!==(T=null==k?void 0:k.loggingEnabled)&&void 0!==T?T:!0===(null==k?void 0:k.disableLogging)?M.LoggingEnabledOption.disabled:M.LoggingEnabledOption.browserOnly,(null==k?void 0:k.loggingEnabled)&&void 0!==k.disableLogging&&S.Log.warn("Detected both loggingEnabled and disableLogging options. loggingEnabled takes precedence - please remove disableLogging."),this._maxQueueSize=null!==(R=null==k?void 0:k.loggingBufferMaxSize)&&void 0!==R?R:100;var O=null==k?void 0:k.networkConfig;this._logEventUrlConfig=new I.UrlConfiguration(E.Endpoint._rgstr,null==O?void 0:O.logEventUrl,null==O?void 0:O.api,null==O?void 0:O.logEventFallbackUrls)}return _createClass3(EventLogger,[{key:"setLogEventCompressionMode",value:function(e){this._network.setLogEventCompressionMode(e)}},{key:"setLoggingEnabled",value:function(e){if("disabled"===this._loggingEnabled&&"disabled"!==e){var l,_=this._getStorageKey(),S=(0,R._getObjectFromStorage)(_);if(S)(l=this._queue).push.apply(l,_toConsumableArray3(S));R.Storage.removeItem(_)}this._loggingEnabled=e}},{key:"enqueue",value:function(e){this._shouldLogEvent(e)&&(this._normalizeAndAppendEvent(e),this._quickFlushIfNeeded(),this._queue.length>this._maxQueueSize&&EventLogger._safeFlushAndForget(this._sdkKey))}},{key:"incrementNonExposureCount",value:function(e){var l,_=null!==(l=this._nonExposedChecks[e])&&void 0!==l?l:0;this._nonExposedChecks[e]=_+1}},{key:"reset",value:function(){this.flush().catch(function(){}),this._lastExposureTimeMap={}}},{key:"start",value:function(){var e,l=this,_=(0,k._isServerEnv)();_&&"always"!==(null===(e=this._options)||void 0===e?void 0:e.loggingEnabled)||(D[this._sdkKey]=this,_||(0,O._subscribeToVisiblityChanged)(function(e){"background"===e?EventLogger._safeFlushAndForget(l._sdkKey):"foreground"===e&&EventLogger._safeRetryFailedLogs(l._sdkKey)}),this._retryFailedLogs(L),this._startBackgroundFlushInterval())}},{key:"stop",value:function(){return e(this,void 0,void 0,_regenerator().m(function _callee7(){return _regenerator().w(function(e){for(;;)switch(e.n){case 0:return this._flushIntervalId&&(clearInterval(this._flushIntervalId),this._flushIntervalId=null),delete D[this._sdkKey],e.n=1,this.flush();case 1:return e.a(2)}},_callee7,this)}))}},{key:"flush",value:function(){return e(this,void 0,void 0,_regenerator().m(function _callee8(){var e;return _regenerator().w(function(l){for(;;)switch(l.n){case 0:if(this._appendAndResetNonExposedChecks(),0!==this._queue.length){l.n=1;break}return l.a(2);case 1:return e=this._queue,this._queue=[],l.n=2,this._sendEvents(e);case 2:return l.a(2)}},_callee8,this)}))}},{key:"_quickFlushIfNeeded",value:function(){var e=this;this._hasRunQuickFlush||(this._hasRunQuickFlush=!0,Date.now()-this._creationTime>200||setTimeout(function(){return EventLogger._safeFlushAndForget(e._sdkKey)},200))}},{key:"_shouldLogEvent",value:function(e){var _;if("always"!==(null===(_=this._options)||void 0===_?void 0:_.loggingEnabled)&&(0,k._isServerEnv)())return!1;if(!(0,T._isExposureEvent)(e))return!0;var S=e.user?e.user:{statsigEnvironment:void 0},E=(0,l._getUserStorageKey)(this._sdkKey,S),M=e.metadata?e.metadata:{},R=[e.eventName,E,M.gate,M.config,M.ruleID,M.allocatedExperiment,M.parameterName,String(M.isExplicitParameter),M.reason].join("|"),I=this._lastExposureTimeMap[R],O=Date.now();return!(I&&O-I<6e5)&&(Object.keys(this._lastExposureTimeMap).length>1e3&&(this._lastExposureTimeMap={}),this._lastExposureTimeMap[R]=O,!0)}},{key:"_sendEvents",value:function(l){return e(this,void 0,void 0,_regenerator().m(function _callee9(){var e,_,E,k,T;return _regenerator().w(function(M){for(;;)switch(M.p=M.n){case 0:if("disabled"!==this._loggingEnabled){M.n=1;break}return this._saveFailedLogsToStorage(l),M.a(2,!1);case 1:if(M.p=1,E=(0,O._isUnloading)(),k=E&&this._network.isBeaconSupported()&&null==(null===(_=null===(e=this._options)||void 0===e?void 0:e.networkConfig)||void 0===_?void 0:_.networkOverrideFunc),this._emitter({name:"pre_logs_flushed",events:l}),!k){M.n=2;break}T=this._sendEventsViaBeacon(l),M.n=4;break;case 2:return M.n=3,this._sendEventsViaPost(l);case 3:T=M.v;case 4:if(!T.success){M.n=5;break}return this._emitter({name:"logs_flushed",events:l}),M.a(2,!0);case 5:return S.Log.warn("Failed to flush events."),this._saveFailedLogsToStorage(l),M.a(2,!1);case 6:M.n=8;break;case 7:return M.p=7,M.v,S.Log.warn("Failed to flush events."),M.a(2,!1);case 8:return M.a(2)}},_callee9,this,[[1,7]])}))}},{key:"_sendEventsViaPost",value:function(l){return e(this,void 0,void 0,_regenerator().m(function _callee0(){var e,_,S;return _regenerator().w(function(E){for(;;)switch(E.n){case 0:return E.n=1,this._network.post(this._getRequestData(l));case 1:return _=E.v,S=null!==(e=null==_?void 0:_.code)&&void 0!==e?e:-1,E.a(2,{success:S>=200&&S<300})}},_callee0,this)}))}},{key:"_sendEventsViaBeacon",value:function(e){return{success:this._network.beacon(this._getRequestData(e))}}},{key:"_getRequestData",value:function(e){return{sdkKey:this._sdkKey,data:{events:e},urlConfig:this._logEventUrlConfig,retries:3,isCompressable:!0,params:_defineProperty3({},E.NetworkParam.EventCount,String(e.length)),credentials:"same-origin"}}},{key:"_saveFailedLogsToStorage",value:function(e){for(;e.length>500;)e.shift();var l=this._getStorageKey();try{var _=this._getFailedLogsFromStorage(l);(0,R._setObjectInStorage)(l,[].concat(_toConsumableArray3(_),_toConsumableArray3(e)))}catch(E){S.Log.warn("Unable to save failed logs to storage")}}},{key:"_getFailedLogsFromStorage",value:function(e){var l=[];try{var _=(0,R._getObjectFromStorage)(e);return Array.isArray(_)&&(l=_),l}catch(S){return[]}}},{key:"_retryFailedLogs",value:function(l){var _=this,E=this._getStorageKey();e(_,void 0,void 0,_regenerator().m(function _callee1(){var e;return _regenerator().w(function(_){for(;;)switch(_.n){case 0:if(R.Storage.isReady()){_.n=1;break}return _.n=1,R.Storage.isReadyResolver();case 1:if(e=(0,R._getObjectFromStorage)(E)){_.n=2;break}return _.a(2);case 2:return l===L&&R.Storage.removeItem(E),_.n=3,this._sendEvents(e);case 3:_.v&&l===U&&R.Storage.removeItem(E);case 4:return _.a(2)}},_callee1,this)})).catch(function(){S.Log.warn("Failed to flush stored logs")})}},{key:"_getStorageKey",value:function(){return"statsig.failed_logs.".concat((0,_._DJB2)(this._sdkKey))}},{key:"_normalizeAndAppendEvent",value:function(e){e.user&&(e.user=Object.assign({},e.user),delete e.user.privateAttributes);var l={},_=this._getCurrentPageUrl();_&&(l.statsigMetadata={currentPage:_});var E=Object.assign(Object.assign({},e),l);S.Log.debug("Enqueued Event:",E),this._queue.push(E)}},{key:"_appendAndResetNonExposedChecks",value:function(){0!==Object.keys(this._nonExposedChecks).length&&(this._normalizeAndAppendEvent({eventName:"statsig::non_exposed_checks",user:null,time:Date.now(),metadata:{checks:Object.assign({},this._nonExposedChecks)}}),this._nonExposedChecks={})}},{key:"_getCurrentPageUrl",value:function(){var e;if(!1!==(null===(e=this._options)||void 0===e?void 0:e.includeCurrentPageUrlWithEvents))return(0,k._getCurrentPageUrlSafe)()}},{key:"_startBackgroundFlushInterval",value:function(){var e,l,_=this,S=null!==(l=null===(e=this._options)||void 0===e?void 0:e.loggingIntervalMs)&&void 0!==l?l:1e4,E=setInterval(function(){var e=D[_._sdkKey];e&&e._flushIntervalId===E?EventLogger._safeFlushAndForget(_._sdkKey):clearInterval(E)},S);this._flushIntervalId=E}}],[{key:"_safeFlushAndForget",value:function(e){var l;null===(l=D[e])||void 0===l||l.flush().catch(function(){})}},{key:"_safeRetryFailedLogs",value:function(e){var l;null===(l=D[e])||void 0===l||l._retryFailedLogs(U)}}])}();return Or.EventLogger=B,Or}var Zr,$r={};function requireStatsigMetadata(){return Zr||(Zr=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.StatsigMetadataProvider=e.SDK_VERSION=void 0,e.SDK_VERSION="3.26.0";var l={sdkVersion:e.SDK_VERSION,sdkType:"js-mono"};e.StatsigMetadataProvider={get:function(){return l},add:function(e){l=Object.assign(Object.assign({},l),e)}}}($r)),$r}var ei,ti={};var ni,ri,ii={},ai={},oi={};function requireUUID(){if(ni)return oi;return ni=1,Object.defineProperty(oi,"__esModule",{value:!0}),oi.getUUID=void 0,oi.getUUID=function(){if("undefined"!=typeof crypto&&"function"==typeof crypto.randomUUID)return crypto.randomUUID();var e=(new Date).getTime(),l="undefined"!=typeof performance&&performance.now&&1e3*performance.now()||0,_="89ab"[Math.floor(4*Math.random())];return"xxxxxxxx-xxxx-4xxx-".concat(_,"xxx-xxxxxxxxxxxx").replace(/[xy]/g,function(_){var S=16*Math.random();return e>0?(S=(e+S)%16|0,e=Math.floor(e/16)):(S=(l+S)%16|0,l=Math.floor(l/16)),("x"===_?S:7&S|8).toString(16)})},oi}function requireStableID(){if(ri)return ai;ri=1,Object.defineProperty(ai,"__esModule",{value:!0}),ai.getCookieName=ai.StableID=void 0;var e=requireCacheKey(),l=requireLog(),_=requireSafeJs(),S=requireStorageProvider(),E=requireUUID(),k={},T={},M={};function _getStableIDStorageKey(l){return"statsig.stable_id.".concat((0,e._getStorageKey)(l))}function _persistToStorage(e,_){var E=_getStableIDStorageKey(_);try{(0,S._setObjectInStorage)(E,e)}catch(oo){l.Log.warn("Failed to save StableID to storage")}}function _persistToCookie(e,l){if(T[l]&&null!=(0,_._getDocumentSafe)()){var S=new Date;S.setFullYear(S.getFullYear()+1),document.cookie="".concat(getCookieName(l),"=").concat(encodeURIComponent(e),"; expires=").concat(S.toUTCString(),"; path=/")}}function getCookieName(l){return"statsig.stable_id.".concat((0,e._getStorageKey)(l))}return ai.StableID={cookiesEnabled:!1,randomID:Math.random().toString(36),get:function(e){if(M[e])return null;if(null!=k[e])return k[e];var l=null;return l=function(e){if(!T[e]||null==(0,_._getDocumentSafe)())return null;var l,S=document.cookie.split(";"),E=_createForOfIteratorHelper2(S);try{for(E.s();!(l=E.n()).done;){var k=_slicedToArray(l.value.trim().split("="),2),M=k[0],R=k[1];if(M===getCookieName(e))return decodeURIComponent(R)}}catch(I){E.e(I)}finally{E.f()}return null}(e),null!=l?(k[e]=l,_persistToStorage(l,e),l):(l=function(e){var l=_getStableIDStorageKey(e);return(0,S._getObjectFromStorage)(l)}(e),null==l&&(l=(0,E.getUUID)()),_persistToStorage(l,e),_persistToCookie(l,e),k[e]=l,l)},setOverride:function(e,l){k[l]=e,_persistToStorage(e,l),_persistToCookie(e,l)},_setCookiesEnabled:function(e,l){T[e]=l},_setDisabled:function(e,l){M[e]=l}},ai.getCookieName=getCookieName,ai}var si,ui={};function requireStatsigUser(){if(si)return ui;si=1,Object.defineProperty(ui,"__esModule",{value:!0}),ui._getFullUserHash=ui._normalizeUser=void 0;var e=requireHashing(),l=requireLog();return ui._normalizeUser=function(e,_,S){try{var E=JSON.parse(JSON.stringify(e));return null!=_&&null!=_.environment?E.statsigEnvironment=_.environment:null!=S&&(E.statsigEnvironment={tier:S}),E}catch(k){return l.Log.error("Failed to JSON.stringify user"),{statsigEnvironment:void 0}}},ui._getFullUserHash=function(l){return l?(0,e._DJB2Object)(l):null},ui}var li,ci,hi={};function requireTypedJsonParse(){if(li)return hi;li=1,Object.defineProperty(hi,"__esModule",{value:!0}),hi._typedJsonParse=void 0;var e=requireLog();return hi._typedJsonParse=function(l,_,S){try{var E=JSON.parse(l);if(E&&"object"===_typeof3(E)&&_ in E)return E}catch(k){}return e.Log.error("Failed to parse ".concat(S)),null},hi}function requireDataAdapterCore(){if(ci)return ii;ci=1;var e=ii&&ii.__awaiter||function(e,l,_,S){return new(_||(_=Promise))(function(E,k){function fulfilled(e){try{step(S.next(e))}catch(oo){k(oo)}}function rejected(e){try{step(S.throw(e))}catch(oo){k(oo)}}function step(e){var l;e.done?E(e.value):(l=e.value,l instanceof _?l:new _(function(e){e(l)})).then(fulfilled,rejected)}step((S=S.apply(e,l||[])).next())})};Object.defineProperty(ii,"__esModule",{value:!0}),ii._makeDataAdapterResult=ii.DataAdapterCore=void 0;var l=requireLog(),_=requireStableID(),S=requireStatsigUser(),E=requireStorageProvider(),k=requireTypedJsonParse(),T=function(){return _createClass3(function DataAdapterCore(e,l){_classCallCheck3(this,DataAdapterCore),this._adapterName=e,this._cacheSuffix=l,this._options=null,this._sdkKey=null,this._cacheLimit=10,this._lastModifiedStoreKey="statsig.last_modified_time.".concat(l),this._inMemoryCache=new M},[{key:"attach",value:function(e,l,_){this._sdkKey=e,this._options=l}},{key:"getDataSync",value:function(e){var l=e&&(0,S._normalizeUser)(e,this._options),_=this._getCacheKey(l),E=this._inMemoryCache.get(_,l);if(E&&this._getIsCacheValueValid(E))return E;var k=this._loadFromCache(_);return k&&this._getIsCacheValueValid(k)?(this._inMemoryCache.add(_,k,this._cacheLimit),this._inMemoryCache.get(_,l)):null}},{key:"setData",value:function(e,l){var _=l&&(0,S._normalizeUser)(l,this._options),E=this._getCacheKey(_);this._inMemoryCache.add(E,_makeDataAdapterResult("Bootstrap",e,null,_),this._cacheLimit)}},{key:"_getIsCacheValueValid",value:function(e){return null==e.stableID||e.stableID===_.StableID.get(this._getSdkKey())}},{key:"_getDataAsyncImpl",value:function(_,S,k){return e(this,void 0,void 0,_regenerator().m(function _callee10(){var e,T;return _regenerator().w(function(M){for(;;)switch(M.n){case 0:if(E.Storage.isReady()){M.n=1;break}return M.n=1,E.Storage.isReadyResolver();case 1:return e=null!=_?_:this.getDataSync(S),T=[this._fetchAndPrepFromNetwork(e,S,k)],(null==k?void 0:k.timeoutMs)&&T.push(new Promise(function(e){return setTimeout(e,k.timeoutMs)}).then(function(){return l.Log.debug("Fetching latest value timed out"),null})),M.n=2,Promise.race(T);case 2:return M.a(2,M.v)}},_callee10,this)}))}},{key:"_prefetchDataImpl",value:function(l,_){return e(this,void 0,void 0,_regenerator().m(function _callee11(){var e,E,k;return _regenerator().w(function(T){for(;;)switch(T.n){case 0:return e=l&&(0,S._normalizeUser)(l,this._options),E=this._getCacheKey(e),T.n=1,this._getDataAsyncImpl(null,e,_);case 1:(k=T.v)&&this._inMemoryCache.add(E,Object.assign(Object.assign({},k),{source:"Prefetch"}),this._cacheLimit);case 2:return T.a(2)}},_callee11,this)}))}},{key:"_fetchAndPrepFromNetwork",value:function(S,E,T){return e(this,void 0,void 0,_regenerator().m(function _callee12(){var e,M,R,I,O,D,L,U,B;return _regenerator().w(function(z){for(;;)switch(z.n){case 0:return M=null!==(e=null==S?void 0:S.data)&&void 0!==e?e:null,R=null!=S&&this._isCachedResultValidFor204(S,E),z.n=1,this._fetchFromNetwork(M,E,T,R);case 1:if(I=z.v){z.n=2;break}return l.Log.debug("No response returned for latest value"),z.a(2,null);case 2:if(O=(0,k._typedJsonParse)(I,"has_updates","Response"),D=this._getSdkKey(),L=_.StableID.get(D),U=null,!0!==(null==O?void 0:O.has_updates)){z.n=3;break}U=_makeDataAdapterResult("Network",I,L,E),z.n=5;break;case 3:if(!M||!1!==(null==O?void 0:O.has_updates)){z.n=4;break}U=_makeDataAdapterResult("NetworkNotModified",M,L,E),z.n=5;break;case 4:return z.a(2,null);case 5:return B=this._getCacheKey(E),this._inMemoryCache.add(B,U,this._cacheLimit),this._writeToCache(B,U),z.a(2,U)}},_callee12,this)}))}},{key:"_getSdkKey",value:function(){return null!=this._sdkKey?this._sdkKey:(l.Log.error("".concat(this._adapterName," is not attached to a Client")),"")}},{key:"_loadFromCache",value:function(e){var l,_=null===(l=E.Storage.getItem)||void 0===l?void 0:l.call(E.Storage,e);if(null==_)return null;var S=(0,k._typedJsonParse)(_,"source","Cached Result");return S?Object.assign(Object.assign({},S),{source:"Cache"}):null}},{key:"_writeToCache",value:function(e,l){for(var _=JSON.stringify(l),S=0;S<8;S++)try{E.Storage.setItem(e,_);break}catch(k){if(!(k instanceof Error)||"QuotaExceededError"!==k.name||this._cacheLimit<=1)throw k;this._cacheLimit=Math.ceil(this._cacheLimit/2),this._runLocalStorageCacheEviction(e,this._cacheLimit-1)}this._runLocalStorageCacheEviction(e)}},{key:"_runLocalStorageCacheEviction",value:function(e){var l,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._cacheLimit,S=null!==(l=(0,E._getObjectFromStorage)(this._lastModifiedStoreKey))&&void 0!==l?l:{};S[e]=Date.now();var k,T=_createForOfIteratorHelper2(_getEvictableKeys(S,_));try{for(T.s();!(k=T.n()).done;){var M=k.value;delete S[M],E.Storage.removeItem(M)}}catch(R){T.e(R)}finally{T.f()}(0,E._setObjectInStorage)(this._lastModifiedStoreKey,S)}}])}();function _makeDataAdapterResult(e,l,_,E){return{source:e,data:l,receivedAt:Date.now(),stableID:_,fullUserHash:(0,S._getFullUserHash)(E)}}ii.DataAdapterCore=T,ii._makeDataAdapterResult=_makeDataAdapterResult;var M=function(){return _createClass3(function InMemoryCache(){_classCallCheck3(this,InMemoryCache),this._data={}},[{key:"get",value:function(e,_){var S,E=this._data[e],k=null==E?void 0:E.stableID,T=null===(S=null==_?void 0:_.customIDs)||void 0===S?void 0:S.stableID;return T&&k&&T!==k?(l.Log.warn("'StatsigUser.customIDs.stableID' mismatch"),null):E}},{key:"add",value:function(e,l,_){var S,E=_createForOfIteratorHelper2(_getEvictableKeys(this._data,_-1));try{for(E.s();!(S=E.n()).done;){var k=S.value;delete this._data[k]}}catch(T){E.e(T)}finally{E.f()}this._data[e]=l}},{key:"merge",value:function(e){this._data=Object.assign(Object.assign({},this._data),e)}}])}();function _getEvictableKeys(e,l){var _=Object.keys(e);return _.length<=l?[]:0===l?_:_.sort(function(l,_){var S=e[l],E=e[_];return"object"===_typeof3(S)&&"object"===_typeof3(E)?S.receivedAt-E.receivedAt:S-E}).slice(0,_.length-l)}return ii}var di,fi={};var pi,vi,gi={},mi={};function requireSDKType(){if(pi)return mi;pi=1,Object.defineProperty(mi,"__esModule",{value:!0}),mi.SDKType=void 0;var e,l={};return mi.SDKType={_get:function(_){var S;return(null!==(S=l[_])&&void 0!==S?S:"js-mono")+(null!=e?e:"")},_setClientType:function(e,_){l[e]=_},_setBindingType:function(l){e&&"-react"!==e||(e="-"+l)}},mi}function requireErrorBoundary(){return vi||(vi=1,function(e){var l=gi&&gi.__awaiter||function(e,l,_,S){return new(_||(_=Promise))(function(E,k){function fulfilled(e){try{step(S.next(e))}catch(oo){k(oo)}}function rejected(e){try{step(S.throw(e))}catch(oo){k(oo)}}function step(e){var l;e.done?E(e.value):(l=e.value,l instanceof _?l:new _(function(e){e(l)})).then(fulfilled,rejected)}step((S=S.apply(e,l||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0}),e.ErrorBoundary=e.EXCEPTION_ENDPOINT=void 0;var _=requireLog(),S=requireSDKType(),E=requireStatsigMetadata();e.EXCEPTION_ENDPOINT="https://statsigapi.net/v1/sdk_exception";var k="[Statsig] UnknownError",T=function(){return _createClass3(function ErrorBoundary(e,l,_,S){_classCallCheck3(this,ErrorBoundary),this._sdkKey=e,this._options=l,this._emitter=_,this._lastSeenError=S,this._seen=new Set},[{key:"wrap",value:function(e,l){var _=this;try{var S=e;(function(e){var l=new Set,_=Object.getPrototypeOf(e);for(;_&&_!==Object.prototype;)Object.getOwnPropertyNames(_).filter(function(e){return"function"==typeof(null==_?void 0:_[e])}).forEach(function(e){return l.add(e)}),_=Object.getPrototypeOf(_);return Array.from(l)})(S).forEach(function(E){var k=S[E];"$EB"in k||(S[E]=function(){for(var S=arguments.length,T=new Array(S),M=0;M<S;M++)T[M]=arguments[M];return _._capture(l?"".concat(l,":").concat(E):E,function(){return k.apply(e,T)})},S[E].$EB=!0)})}catch(E){this._onError("eb:wrap",E)}}},{key:"logError",value:function(e,l){this._onError(e,l)}},{key:"getLastSeenErrorAndReset",value:function(){var e=this._lastSeenError;return this._lastSeenError=void 0,null!=e?e:null}},{key:"attachErrorIfNoneExists",value:function(e){this._lastSeenError||(this._lastSeenError=_resolveError(e))}},{key:"_capture",value:function(e,l){var _=this;try{var S=l();return S&&S instanceof Promise?S.catch(function(l){return _._onError(e,l)}):S}catch(E){return this._onError(e,E),null}}},{key:"_onError",value:function(T,M){var R=this;try{_.Log.warn("Caught error in ".concat(T),{error:M});l(R,void 0,void 0,_regenerator().m(function _callee13(){var l,_,R,I,O,D,L,U,B,z,j,G,H,V,W,q;return _regenerator().w(function(X){for(;;)switch(X.n){case 0:if(U=M||Error(k),B=U instanceof Error,z=B?U.name:"No Name",j=_resolveError(U),this._lastSeenError=j,!this._seen.has(z)){X.n=1;break}return X.a(2);case 1:if(this._seen.add(z),!(null===(_=null===(l=this._options)||void 0===l?void 0:l.networkConfig)||void 0===_?void 0:_.preventAllNetworkTraffic)){X.n=2;break}return null===(R=this._emitter)||void 0===R||R.call(this,{name:"error",error:M,tag:T}),X.a(2);case 2:return G=S.SDKType._get(this._sdkKey),H=E.StatsigMetadataProvider.get(),V=B?U.stack:_getDescription(U),W=Object.assign({tag:T,exception:z,info:V,statsigOptions:_getStatsigOptionLoggingCopy(this._options)},Object.assign(Object.assign({},H),{sdkType:G})),q=null!==(D=null===(O=null===(I=this._options)||void 0===I?void 0:I.networkConfig)||void 0===O?void 0:O.networkOverrideFunc)&&void 0!==D?D:fetch,X.n=3,q(e.EXCEPTION_ENDPOINT,{method:"POST",headers:{"STATSIG-API-KEY":this._sdkKey,"STATSIG-SDK-TYPE":String(G),"STATSIG-SDK-VERSION":String(H.sdkVersion),"Content-Type":"application/json"},body:JSON.stringify(W)});case 3:null===(L=this._emitter)||void 0===L||L.call(this,{name:"error",error:M,tag:T});case 4:return X.a(2)}},_callee13,this)})).then(function(){}).catch(function(){})}catch(I){}}}])}();function _resolveError(e){return e instanceof Error?e:"string"==typeof e?new Error(e):new Error("An unknown error occurred.")}function _getDescription(e){try{return JSON.stringify(e)}catch(l){return k}}function _getStatsigOptionLoggingCopy(e){if(!e)return{};var l={};return Object.keys(e).forEach(function(_){var S=_,E=e[S];switch(_typeof3(E)){case"number":case"bigint":case"boolean":l[String(S)]=E;break;case"string":E.length<50?l[String(S)]=E:l[String(S)]="set";break;case"object":"environment"===S?l.environment=E:"networkConfig"===S?l.networkConfig=E:l[String(S)]=null!=E?"set":"unset"}}),l}e.ErrorBoundary=T}(gi)),gi}var yi,_i={};var bi,Si={};var wi,xi={};var Ei,ki={};function requireMemoKey(){if(Ei)return ki;Ei=1,Object.defineProperty(ki,"__esModule",{value:!0}),ki.createMemoKey=ki.MemoPrefix=void 0,ki.MemoPrefix={_gate:"g",_dynamicConfig:"c",_experiment:"e",_configList:"cl",_layer:"l",_paramStore:"p"};var e=new Set([]),l=new Set(["userPersistedValues"]);return ki.createMemoKey=function(_,S,E){var k="".concat(_,"|").concat(S);if(!E)return k;for(var T=0,M=Object.keys(E);T<M.length;T++){var R=M[T];if(l.has(R))return;e.has(R)?k+="|".concat(R,"=true"):k+="|".concat(R,"=").concat(E[R])}return k},ki}var Ai,Ci,Ti={},Mi={},Ri={};function requireDnsTxtQuery(){if(Ai)return Ri;Ai=1;var e=Ri&&Ri.__awaiter||function(e,l,_,S){return new(_||(_=Promise))(function(E,k){function fulfilled(e){try{step(S.next(e))}catch(oo){k(oo)}}function rejected(e){try{step(S.throw(e))}catch(oo){k(oo)}}function step(e){var l;e.done?E(e.value):(l=e.value,l instanceof _?l:new _(function(e){e(l)})).then(fulfilled,rejected)}step((S=S.apply(e,l||[])).next())})};Object.defineProperty(Ri,"__esModule",{value:!0}),Ri._fetchTxtRecords=void 0;var l=new Uint8Array([0,0,1,0,0,1,0,0,0,0,0,0,13,102,101,97,116,117,114,101,97,115,115,101,116,115,3,111,114,103,0,0,16,0,1]),_=["i","e","d"];function _parseDnsResponse(e){var l=e.findIndex(function(l,S){return S<200&&"="===String.fromCharCode(l)&&_.includes(String.fromCharCode(e[S-1]))});if(-1===l){var S=new Error("Failed to parse TXT records from DNS");throw S.name="DnsTxtParseError",S}for(var E="",k=l-1;k<e.length;k++)E+=String.fromCharCode(e[k]);return E.split(",")}return Ri._fetchTxtRecords=function(_){return e(this,void 0,void 0,_regenerator().m(function _callee14(){var e,S,E,k;return _regenerator().w(function(T){for(;;)switch(T.n){case 0:return T.n=1,_("https://cloudflare-dns.com/dns-query",{method:"POST",headers:{"Content-Type":"application/dns-message",Accept:"application/dns-message"},body:l});case 1:if((e=T.v).ok){T.n=2;break}throw(S=new Error("Failed to fetch TXT records from DNS")).name="DnsTxtFetchError",S;case 2:return T.n=3,e.arrayBuffer();case 3:return E=T.v,k=new Uint8Array(E),T.a(2,_parseDnsResponse(k))}},_callee14)}))},Ri}function requireNetworkFallbackResolver(){if(Ci)return Mi;Ci=1;var e=Mi&&Mi.__awaiter||function(e,l,_,S){return new(_||(_=Promise))(function(E,k){function fulfilled(e){try{step(S.next(e))}catch(oo){k(oo)}}function rejected(e){try{step(S.throw(e))}catch(oo){k(oo)}}function step(e){var l;e.done?E(e.value):(l=e.value,l instanceof _?l:new _(function(e){e(l)})).then(fulfilled,rejected)}step((S=S.apply(e,l||[])).next())})};Object.defineProperty(Mi,"__esModule",{value:!0}),Mi._isDomainFailure=Mi.NetworkFallbackResolver=void 0;var l=requireDnsTxtQuery(),_=requireHashing(),S=requireLog(),E=requireStorageProvider(),k=6048e5,T=function(){return _createClass3(function NetworkFallbackResolver(e){var l;_classCallCheck3(this,NetworkFallbackResolver),this._fallbackInfo=null,this._errorBoundary=null,this._dnsQueryCooldowns={},this._networkOverrideFunc=null===(l=e.networkConfig)||void 0===l?void 0:l.networkOverrideFunc},[{key:"setErrorBoundary",value:function(e){this._errorBoundary=e}},{key:"tryBumpExpiryTime",value:function(e,l){var _,S=null===(_=this._fallbackInfo)||void 0===_?void 0:_[l.endpoint];S&&(S.expiryTime=Date.now()+k,_tryWriteFallbackInfoToCache(e,Object.assign(Object.assign({},this._fallbackInfo),_defineProperty3({},l.endpoint,S))))}},{key:"getActiveFallbackUrl",value:function(e,l){var _,k;if(null!=l.customUrl&&null!=l.fallbackUrls)return null;var T=this._fallbackInfo;null==T&&(T=null!==(_=function(e){var l=_getFallbackInfoStorageKey(e),k=E.Storage.getItem(l);if(!k)return null;try{return JSON.parse(k)}catch(_){return S.Log.error("Failed to parse FallbackInfo"),null}}(e))&&void 0!==_?_:{},this._fallbackInfo=T);var M=T[l.endpoint];return!M||Date.now()>(null!==(k=M.expiryTime)&&void 0!==k?k:0)||l.getChecksum()!==M.urlConfigChecksum?(delete T[l.endpoint],this._fallbackInfo=T,_tryWriteFallbackInfoToCache(e,this._fallbackInfo),null):M.url?M.url:null}},{key:"tryFetchUpdatedFallbackInfo",value:function(l,_,S,E){return e(this,void 0,void 0,_regenerator().m(function _callee15(){var e,k,T,M,R,I;return _regenerator().w(function(O){for(;;)switch(O.p=O.n){case 0:if(O.p=0,_isDomainFailure(S,E)){O.n=1;break}return O.a(2,!1);case 1:if(!(null==_.customUrl&&null==_.fallbackUrls)){O.n=3;break}return O.n=2,this._tryFetchFallbackUrlsFromNetwork(_);case 2:R=O.v,O.n=4;break;case 3:R=_.fallbackUrls;case 4:if(T=R,M=this._pickNewFallbackUrl(null===(e=this._fallbackInfo)||void 0===e?void 0:e[_.endpoint],T)){O.n=5;break}return O.a(2,!1);case 5:return this._updateFallbackInfoWithNewUrl(l,_,M),O.a(2,!0);case 6:return O.p=6,I=O.v,null===(k=this._errorBoundary)||void 0===k||k.logError("tryFetchUpdatedFallbackInfo",I),O.a(2,!1)}},_callee15,this,[[0,6]])}))}},{key:"_updateFallbackInfoWithNewUrl",value:function(e,l,_){var S,E,T,M,R={urlConfigChecksum:l.getChecksum(),url:_,expiryTime:Date.now()+k,previous:[]},I=l.endpoint,O=null===(S=this._fallbackInfo)||void 0===S?void 0:S[I];O&&(M=R.previous).push.apply(M,_toConsumableArray3(O.previous));R.previous.length>10&&(R.previous=[]);var D=null===(T=null===(E=this._fallbackInfo)||void 0===E?void 0:E[I])||void 0===T?void 0:T.url;null!=D&&R.previous.push(D),this._fallbackInfo=Object.assign(Object.assign({},this._fallbackInfo),_defineProperty3({},I,R)),_tryWriteFallbackInfoToCache(e,this._fallbackInfo)}},{key:"_tryFetchFallbackUrlsFromNetwork",value:function(_){return e(this,void 0,void 0,_regenerator().m(function _callee16(){var e,S,E,k,T,M,R,I,O,D,L;return _regenerator().w(function(U){for(;;)switch(U.p=U.n){case 0:if(!((S=this._dnsQueryCooldowns[_.endpoint])&&Date.now()<S)){U.n=1;break}return U.a(2,null);case 1:return this._dnsQueryCooldowns[_.endpoint]=Date.now()+144e5,E=[],U.n=2,(0,l._fetchTxtRecords)(null!==(e=this._networkOverrideFunc)&&void 0!==e?e:fetch);case 2:k=U.v,T=_extractPathFromUrl(_.defaultUrl),M=_createForOfIteratorHelper2(k),U.p=3,M.s();case 4:if((R=M.n()).done){U.n=7;break}if((I=R.value).startsWith(_.endpointDnsKey+"=")){U.n=5;break}return U.a(3,6);case 5:(O=I.split("=")).length>1&&((D=O[1]).endsWith("/")&&(D=D.slice(0,-1)),E.push("https://".concat(D).concat(T)));case 6:U.n=4;break;case 7:U.n=9;break;case 8:U.p=8,L=U.v,M.e(L);case 9:return U.p=9,M.f(),U.f(9);case 10:return U.a(2,E)}},_callee16,this,[[3,8,9,10]])}))}},{key:"_pickNewFallbackUrl",value:function(e,l){var _;if(null==l)return null;var S,E=new Set(null!==(_=null==e?void 0:e.previous)&&void 0!==_?_:[]),k=null==e?void 0:e.url,T=null,M=_createForOfIteratorHelper2(l);try{for(M.s();!(S=M.n()).done;){var R=S.value,I=R.endsWith("/")?R.slice(0,-1):R;if(!E.has(R)&&I!==k){T=I;break}}}catch(O){M.e(O)}finally{M.f()}return T}}])}();function _isDomainFailure(e,l){var _,S=null!==(_=null==e?void 0:e.toLowerCase())&&void 0!==_?_:"";return l||S.includes("uncaught exception")||S.includes("failed to fetch")||S.includes("networkerror when attempting to fetch resource")}function _getFallbackInfoStorageKey(e){return"statsig.network_fallback.".concat((0,_._DJB2)(e))}function _tryWriteFallbackInfoToCache(e,l){var _=_getFallbackInfoStorageKey(e);l&&0!==Object.keys(l).length?E.Storage.setItem(_,JSON.stringify(l)):E.Storage.removeItem(_)}function _extractPathFromUrl(e){try{return new URL(e).pathname}catch(l){return null}}return Mi.NetworkFallbackResolver=T,Mi._isDomainFailure=_isDomainFailure,Mi}var Ii,Pi={};function requireSDKFlags(){if(Ii)return Pi;Ii=1,Object.defineProperty(Pi,"__esModule",{value:!0}),Pi.SDKFlags=void 0;var e={};return Pi.SDKFlags={setFlags:function(l,_){e[l]=_},get:function(l,_){var S,E;return null!==(E=null===(S=e[l])||void 0===S?void 0:S[_])&&void 0!==E&&E}},Pi}var Oi,Di={};function requireSessionID(){return Oi||(Oi=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.StatsigSession=e.SessionID=void 0;var l=require$_StatsigGlobal(),_=requireCacheKey(),S=requireLog(),E=requireStorageProvider(),k=requireUUID(),T=18e5,M=144e5,R={};function _createSessionTimeout(e,_){return setTimeout(function(){var _,S=null===(_=(0,l._getStatsigGlobal)())||void 0===_?void 0:_.instance(e);S&&S.$emt({name:"session_expired"})},_)}function _getSessionIDStorageKey(e){return"statsig.session_id.".concat((0,_._getStorageKey)(e))}e.SessionID={get:function(l){return e.StatsigSession.get(l).data.sessionID}},e.StatsigSession={get:function(e){return null==R[e]&&(R[e]=function(e){var l=function(e){var l=_getSessionIDStorageKey(e);return(0,E._getObjectFromStorage)(l)}(e),_=Date.now();l||(l={sessionID:(0,k.getUUID)(),startTime:_,lastUpdate:_});return{data:l,sdkKey:e}}(e)),function(e){var l=Date.now(),_=e.data,R=e.sdkKey;if(L=_,U=L.lastUpdate,Date.now()-U>T||(O=_,D=O.startTime,Date.now()-D>M)){_.sessionID=(0,k.getUUID)(),_.startTime=l;var I=null===__STATSIG__||void 0===__STATSIG__?void 0:__STATSIG__.instance(R);I&&I.$emt({name:"session_expired"})}var O,D;var L,U;_.lastUpdate=l,function(e,l){var _=_getSessionIDStorageKey(l);try{(0,E._setObjectInStorage)(_,e)}catch(oo){S.Log.warn("Failed to save SessionID")}}(_,e.sdkKey),clearTimeout(e.idleTimeoutID),clearTimeout(e.ageTimeoutID);var B=l-_.startTime;return e.idleTimeoutID=_createSessionTimeout(R,T),e.ageTimeoutID=_createSessionTimeout(R,M-B),e}(R[e])},overrideInitialSessionID:function(e,l){R[l]=function(e,l){var _=Date.now();return{data:{sessionID:e,startTime:_,lastUpdate:_},sdkKey:l}}(e,l)}}}(Di)),Di}var Li,Ui,Fi={};function requireStatsigClientEventEmitter(){return Li||(Li=1,Object.defineProperty(Fi,"__esModule",{value:!0}),Fi.ErrorTag=void 0,Fi.ErrorTag={NetworkError:"NetworkError"}),Fi}function requireNetworkCore(){if(Ui)return Ti;Ui=1;var e=Ti&&Ti.__awaiter||function(e,l,_,S){return new(_||(_=Promise))(function(E,k){function fulfilled(e){try{step(S.next(e))}catch(oo){k(oo)}}function rejected(e){try{step(S.throw(e))}catch(oo){k(oo)}}function step(e){var l;e.done?E(e.value):(l=e.value,l instanceof _?l:new _(function(e){e(l)})).then(fulfilled,rejected)}step((S=S.apply(e,l||[])).next())})};Object.defineProperty(Ti,"__esModule",{value:!0}),Ti.NetworkCore=void 0,require$_StatsigGlobal();var l=require$_StatsigGlobal(),_=requireDiagnostics(),S=requireLog(),E=requireNetworkConfig(),k=requireNetworkFallbackResolver(),T=requireSDKFlags(),M=requireSDKType(),R=requireSafeJs(),I=requireSessionID(),O=requireStableID(),D=requireStatsigClientEventEmitter(),L=requireStatsigMetadata(),U=requireStatsigOptionsCommon(),B=requireVisibilityObserving(),z=new Set([408,500,502,503,504,522,524,599]),j=function(){return _createClass3(function NetworkCore(e,l){_classCallCheck3(this,NetworkCore),this._emitter=l,this._errorBoundary=null,this._timeout=1e4,this._netConfig={},this._options={},this._leakyBucket={},this._lastUsedInitUrl=null,e&&(this._options=e),this._options.networkConfig&&(this._netConfig=this._options.networkConfig),this._netConfig.networkTimeoutMs&&(this._timeout=this._netConfig.networkTimeoutMs),this._fallbackResolver=new k.NetworkFallbackResolver(this._options),this.setLogEventCompressionMode(this._getLogEventCompressionMode(e))},[{key:"setLogEventCompressionMode",value:function(e){this._options.logEventCompressionMode=e}},{key:"setErrorBoundary",value:function(e){this._errorBoundary=e,this._errorBoundary.wrap(this),this._errorBoundary.wrap(this._fallbackResolver),this._fallbackResolver.setErrorBoundary(e)}},{key:"isBeaconSupported",value:function(){return"undefined"!=typeof navigator&&"function"==typeof navigator.sendBeacon}},{key:"getLastUsedInitUrlAndReset",value:function(){var e=this._lastUsedInitUrl;return this._lastUsedInitUrl=null,e}},{key:"beacon",value:function(e){if(!_ensureValidSdkKey(e))return!1;var l=this._getInternalRequestArgs("POST",e),_=this._getPopulatedURL(l),S=navigator;return S.sendBeacon.bind(S)(_,l.body)}},{key:"post",value:function(l){return e(this,void 0,void 0,_regenerator().m(function _callee17(){var e;return _regenerator().w(function(_){for(;;)switch(_.n){case 0:return e=this._getInternalRequestArgs("POST",l),this._tryEncodeBody(e),_.n=1,this._tryToCompressBody(e);case 1:return _.a(2,this._sendRequest(e))}},_callee17,this)}))}},{key:"get",value:function(e){var l=this._getInternalRequestArgs("GET",e);return this._sendRequest(l)}},{key:"_sendRequest",value:function(l){return e(this,void 0,void 0,_regenerator().m(function _callee18(){var e,_,E,k,T,M,R,I,O,L,U,j,G,H,V,W,q,X,K,Y,J,Q,Z,$,ee,te=this;return _regenerator().w(function(ne){for(;;)switch(ne.p=ne.n){case 0:if(_ensureValidSdkKey(l)){ne.n=1;break}return ne.a(2,null);case 1:if(!this._netConfig.preventAllNetworkTraffic){ne.n=2;break}return ne.a(2,null);case 2:if(T=l.method,M=l.body,R=l.retries,I=l.attempt,O=l.urlConfig.endpoint,!this._isRateLimited(O)){ne.n=3;break}return S.Log.warn("Request to ".concat(O," was blocked because you are making requests too frequently.")),ne.a(2,null);case 3:return L=null!=I?I:1,U=!1,j=this._getPopulatedURL(l),G=null,H=(0,B._isUnloading)(),ne.p=4,V={method:T,body:M,headers:Object.assign({},l.headers),priority:l.priority,keepalive:H},_tryMarkInitStart(l,L),(W=this._leakyBucket[O])&&(W.lastRequestTime=Date.now(),this._leakyBucket[O]=W),q=null!==(e=this._netConfig.networkOverrideFunc)&&void 0!==e?e:fetch,ne.n=5,Promise.race([q(j,V).finally(function(){return clearTimeout(X)}),new Promise(function(e,l){X=setTimeout(function(){U=!0,l(new Error("Timeout of ".concat(te._timeout,"ms expired.")))},te._timeout)})]);case 5:if((G=ne.v).ok){ne.n=7;break}return ne.n=6,G.text().catch(function(){return"No Text"});case 6:throw K=ne.v,(Y=new Error("NetworkError: ".concat(j," ").concat(K))).name="NetworkError",Y;case 7:return ne.n=8,G.text();case 8:return J=ne.v,_tryMarkInitEnd(l,G,L,J),this._fallbackResolver.tryBumpExpiryTime(l.sdkKey,l.urlConfig),ne.a(2,{body:J,code:G.status});case 9:return ne.p=9,ee=ne.v,Q=_getErrorMessage(ee),Z=_didTimeout(null!=Q?Q:"",U),_tryMarkInitEnd(l,G,L,"",ee),ne.n=10,this._fallbackResolver.tryFetchUpdatedFallbackInfo(l.sdkKey,l.urlConfig,Q,Z);case 10:if(ne.v&&(l.fallbackUrl=this._fallbackResolver.getActiveFallbackUrl(l.sdkKey,l.urlConfig)),R&&!(L>R)&&z.has(null!==(_=null==G?void 0:G.status)&&void 0!==_?_:500)){ne.n=11;break}return null===(E=this._emitter)||void 0===E||E.call(this,{name:"error",error:ee,tag:D.ErrorTag.NetworkError,requestArgs:l}),$="A networking error occurred during ".concat(T," request to ").concat(j,"."),S.Log.error($,Q,ee),null===(k=this._errorBoundary)||void 0===k||k.attachErrorIfNoneExists($),ne.a(2,null);case 11:return ne.n=12,_exponentialBackoff(L);case 12:return ne.a(2,this._sendRequest(Object.assign(Object.assign({},l),{retries:R,attempt:L+1})))}},_callee18,this,[[4,9]])}))}},{key:"_getLogEventCompressionMode",value:function(e){var l=null==e?void 0:e.logEventCompressionMode;return l||!0!==(null==e?void 0:e.disableCompression)||(l=U.LogEventCompressionMode.Disabled),l||(l=U.LogEventCompressionMode.Enabled),l}},{key:"_isRateLimited",value:function(e){var l,_=Date.now(),S=null!==(l=this._leakyBucket[e])&&void 0!==l?l:{count:0,lastRequestTime:_},E=_-S.lastRequestTime,k=Math.floor(.05*E);return S.count=Math.max(0,S.count-k),S.count>=50||(S.count+=1,S.lastRequestTime=_,this._leakyBucket[e]=S,!1)}},{key:"_getPopulatedURL",value:function(e){var l,_=null!==(l=e.fallbackUrl)&&void 0!==l?l:e.urlConfig.getUrl();e.urlConfig.endpoint!==E.Endpoint._initialize&&e.urlConfig.endpoint!==E.Endpoint._download_config_specs||(this._lastUsedInitUrl=_);var S=Object.assign(_defineProperty3(_defineProperty3(_defineProperty3(_defineProperty3(_defineProperty3({},E.NetworkParam.SdkKey,e.sdkKey),E.NetworkParam.SdkType,M.SDKType._get(e.sdkKey)),E.NetworkParam.SdkVersion,L.SDK_VERSION),E.NetworkParam.Time,String(Date.now())),E.NetworkParam.SessionID,I.SessionID.get(e.sdkKey)),e.params),k=Object.keys(S).map(function(e){return"".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(S[e]))}).join("&");return"".concat(_).concat(k?"?".concat(k):"")}},{key:"_tryEncodeBody",value:function(e){var _,k=(0,R._getWindowSafe)(),T=e.body;if(e.isStatsigEncodable&&!this._options.disableStatsigEncoding&&"string"==typeof T&&null==(0,l._getStatsigGlobalFlag)("no-encode")&&(null==k?void 0:k.btoa))try{e.body=k.btoa(T).split("").reverse().join(""),e.params=Object.assign(Object.assign({},null!==(_=e.params)&&void 0!==_?_:{}),_defineProperty3({},E.NetworkParam.StatsigEncoded,"1"))}catch(oo){S.Log.warn("Request encoding failed for ".concat(e.urlConfig.getUrl()),oo)}}},{key:"_tryToCompressBody",value:function(l){return e(this,void 0,void 0,_regenerator().m(function _callee19(){var e,_,k,T,M,R,I,O,D,L,U,B,z,j,G;return _regenerator().w(function(H){for(;;)switch(H.p=H.n){case 0:if("string"==typeof(_=l.body)&&_allowCompression(l,this._options)){H.n=1;break}return H.a(2);case 1:H.p=1,k=(new TextEncoder).encode(_),T=new CompressionStream("gzip"),(M=T.writable.getWriter()).write(k).catch(S.Log.error),M.close().catch(S.Log.error),R=T.readable.getReader(),I=[];case 2:return H.n=3,R.read();case 3:if((O=H.v).done){H.n=4;break}I.push(O.value),H.n=2;break;case 4:for(D=I.reduce(function(e,l){return e+l.length},0),L=new Uint8Array(D),U=0,B=0,z=I;B<z.length;B++)j=z[B],L.set(j,U),U+=j.length;l.body=L,l.params=Object.assign(Object.assign({},null!==(e=l.params)&&void 0!==e?e:{}),_defineProperty3({},E.NetworkParam.IsGzipped,"1")),H.n=6;break;case 5:H.p=5,G=H.v,S.Log.warn("Request compression failed for ".concat(l.urlConfig.getUrl()),G);case 6:return H.a(2)}},_callee19,this,[[1,5]])}))}},{key:"_getInternalRequestArgs",value:function(e,l){var _=this._fallbackResolver.getActiveFallbackUrl(l.sdkKey,l.urlConfig),S=Object.assign(Object.assign({},l),{method:e,fallbackUrl:_});return"data"in l&&_populateRequestBody(S,l.data),S}}])}();Ti.NetworkCore=j;var _ensureValidSdkKey=function(e){return!!e.sdkKey||(S.Log.warn("Unable to make request without an SDK key"),!1)},_populateRequestBody=function(e,l){var _=e.sdkKey,S=e.fallbackUrl,E=O.StableID.get(_),k=I.SessionID.get(_),T=M.SDKType._get(_);e.body=JSON.stringify(Object.assign(Object.assign({},l),{statsigMetadata:Object.assign(Object.assign({},L.StatsigMetadataProvider.get()),{stableID:E,sessionID:k,sdkType:T,fallbackUrl:S})}))};function _allowCompression(e,_){if(!e.isCompressable)return!1;if(null!=(0,l._getStatsigGlobalFlag)("no-compress")||"undefined"==typeof CompressionStream||"undefined"==typeof TextEncoder)return!1;var S=null!=e.urlConfig.customUrl||null!=e.urlConfig.fallbackUrls,E=!0===T.SDKFlags.get(e.sdkKey,"enable_log_event_compression");switch(_.logEventCompressionMode){case U.LogEventCompressionMode.Disabled:return!1;case U.LogEventCompressionMode.Enabled:return!(S&&!E);case U.LogEventCompressionMode.Forced:return!0;default:return!1}}function _getErrorMessage(e){return"string"==typeof e?e:e instanceof Error?"".concat(e.name,": ").concat(e.message):"Unknown Error"}function _didTimeout(e,l){return e.includes("Timeout")||l}function _tryMarkInitStart(e,l){e.urlConfig.endpoint===E.Endpoint._initialize&&_.Diagnostics._markInitNetworkReqStart(e.sdkKey,{attempt:l})}function _tryMarkInitEnd(e,l,S,k,T){e.urlConfig.endpoint===E.Endpoint._initialize&&_.Diagnostics._markInitNetworkReqEnd(e.sdkKey,_.Diagnostics._getDiagnosticsData(l,S,k,T))}function _exponentialBackoff(l){return e(this,void 0,void 0,_regenerator().m(function _callee20(){return _regenerator().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,new Promise(function(e){return setTimeout(e,Math.min(l*l*500,3e4))});case 1:return e.a(2)}},_callee20)}))}return Ti}var Ni,Bi={};var zi,ji={};var Gi,Hi={};var Vi,Wi={};function requireStatsigClientBase(){if(Vi)return Wi;Vi=1;var e=Wi&&Wi.__awaiter||function(e,l,_,S){return new(_||(_=Promise))(function(E,k){function fulfilled(e){try{step(S.next(e))}catch(oo){k(oo)}}function rejected(e){try{step(S.throw(e))}catch(oo){k(oo)}}function step(e){var l;e.done?E(e.value):(l=e.value,l instanceof _?l:new _(function(e){e(l)})).then(fulfilled,rejected)}step((S=S.apply(e,l||[])).next())})};Object.defineProperty(Wi,"__esModule",{value:!0}),Wi.StatsigClientBase=void 0,require$_StatsigGlobal();var l=require$_StatsigGlobal(),_=requireErrorBoundary(),S=requireEventLogger(),E=requireLog(),k=requireMemoKey(),T=requireSafeJs(),M=requireSessionID(),R=requireStableID(),I=requireStatsigOptionsCommon(),O=requireStorageProvider(),D=function(){return _createClass3(function StatsigClientBase(e,k,I,D){var L,U,B,z,j=this;_classCallCheck3(this,StatsigClientBase),this.loadingStatus="Uninitialized",this._initializePromise=null,this._listeners={};var G=this.$emt.bind(this);null!=(null==D?void 0:D.logLevel)&&(E.Log.level=D.logLevel),(null==D?void 0:D.disableStorage)&&O.Storage._setDisabled(!0),(null==D?void 0:D.initialSessionID)&&M.StatsigSession.overrideInitialSessionID(D.initialSessionID,e),(null==D?void 0:D.storageProvider)&&O.Storage._setProvider(D.storageProvider),(null==D?void 0:D.enableCookies)&&R.StableID._setCookiesEnabled(e,D.enableCookies),(null==D?void 0:D.disableStableID)&&R.StableID._setDisabled(e,!0),this._sdkKey=e,this._options=null!=D?D:{},this._memoCache={},this.overrideAdapter=null!==(L=null==D?void 0:D.overrideAdapter)&&void 0!==L?L:null,this._logger=new S.EventLogger(e,G,I,D),this._errorBoundary=new _.ErrorBoundary(e,D,G),this._errorBoundary.wrap(this),this._errorBoundary.wrap(k),this._errorBoundary.wrap(this._logger),I.setErrorBoundary(this._errorBoundary),this.dataAdapter=k,this.dataAdapter.attach(e,D,I),this.storageProvider=O.Storage,null===(z=null===(B=null===(U=this.overrideAdapter)||void 0===U?void 0:U.loadFromStorage)||void 0===B?void 0:B.call(U))||void 0===z||z.catch(function(e){return j._errorBoundary.logError("OA::loadFromStorage",e)}),this._primeReadyRipcord(),function(e,_){var S;if((0,T._isServerEnv)())return;var k=(0,l._getStatsigGlobal)(),M=null!==(S=k.instances)&&void 0!==S?S:{},R=_;null!=M[e]&&E.Log.warn("Creating multiple Statsig clients with the same SDK key can lead to unexpected behavior. Multi-instance support requires different SDK keys.");M[e]=R,k.firstInstance||(k.firstInstance=R);k.instances=M,__STATSIG__=k}(e,this)},[{key:"updateRuntimeOptions",value:function(e){e.loggingEnabled?(this._options.loggingEnabled=e.loggingEnabled,this._logger.setLoggingEnabled(e.loggingEnabled)):null!=e.disableLogging&&(this._options.disableLogging=e.disableLogging,this._logger.setLoggingEnabled(e.disableLogging?"disabled":"browser-only")),null!=e.disableStorage&&(this._options.disableStorage=e.disableStorage,O.Storage._setDisabled(e.disableStorage)),null!=e.enableCookies&&(this._options.enableCookies=e.enableCookies,R.StableID._setCookiesEnabled(this._sdkKey,e.enableCookies)),e.logEventCompressionMode?this._logger.setLogEventCompressionMode(e.logEventCompressionMode):e.disableCompression&&this._logger.setLogEventCompressionMode(I.LogEventCompressionMode.Disabled)}},{key:"flush",value:function(){return this._logger.flush()}},{key:"shutdown",value:function(){return e(this,void 0,void 0,_regenerator().m(function _callee21(){return _regenerator().w(function(e){for(;;)switch(e.n){case 0:return this.$emt({name:"pre_shutdown"}),this._setStatus("Uninitialized",null),this._initializePromise=null,e.n=1,this._logger.stop();case 1:return e.a(2)}},_callee21,this)}))}},{key:"on",value:function(e,l){this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].push(l)}},{key:"off",value:function(e,l){if(this._listeners[e]){var _=this._listeners[e].indexOf(l);-1!==_&&this._listeners[e].splice(_,1)}}},{key:"$on",value:function(e,l){l.__isInternal=!0,this.on(e,l)}},{key:"$emt",value:function(e){var l,_=this,barrier=function(l){try{l(e)}catch(S){if(!0===l.__isInternal)return void _._errorBoundary.logError("__emit:".concat(e.name),S);E.Log.error("An error occurred in a StatsigClientEvent listener. This is not an issue with Statsig.",e)}};this._listeners[e.name]&&this._listeners[e.name].forEach(function(e){return barrier(e)}),null===(l=this._listeners["*"])||void 0===l||l.forEach(barrier)}},{key:"_setStatus",value:function(e,l){this.loadingStatus=e,this._memoCache={},this.$emt({name:"values_updated",status:e,values:l})}},{key:"_enqueueExposure",value:function(e,l,_){!0!==(null==_?void 0:_.disableExposureLog)?this._logger.enqueue(l):this._logger.incrementNonExposureCount(e)}},{key:"_memoize",value:function(e,l){var _=this;return function(S,E){if(_._options.disableEvaluationMemoization)return l(S,E);var T=(0,k.createMemoKey)(e,S,E);return T?(T in _._memoCache||(Object.keys(_._memoCache).length>=3e3&&(_._memoCache={}),_._memoCache[T]=l(S,E)),_._memoCache[T]):l(S,E)}}}])}();return Wi.StatsigClientBase=D,Wi}var qi,Xi={};var Ki,Yi={};var Ji,Qi={};var Zi,$i={};var ea,ta,na={};function requireSrc$3(){return ta||(ta=1,function(e){var l=kr&&kr.__createBinding||(Object.create?function(e,l,_,S){void 0===S&&(S=_);var E=Object.getOwnPropertyDescriptor(l,_);E&&!("get"in E?!l.__esModule:E.writable||E.configurable)||(E={enumerable:!0,get:function(){return l[_]}}),Object.defineProperty(e,S,E)}:function(e,l,_,S){void 0===S&&(S=_),e[S]=l[_]}),_=kr&&kr.__exportStar||function(e,_){for(var S in e)"default"===S||Object.prototype.hasOwnProperty.call(_,S)||l(_,e,S)};Object.defineProperty(e,"__esModule",{value:!0}),e.Storage=e.Log=e.EventLogger=e.Diagnostics=void 0,require$_StatsigGlobal();var S=require$_StatsigGlobal(),E=requireDiagnostics();Object.defineProperty(e,"Diagnostics",{enumerable:!0,get:function(){return E.Diagnostics}});var k=requireEventLogger();Object.defineProperty(e,"EventLogger",{enumerable:!0,get:function(){return k.EventLogger}});var T=requireLog();Object.defineProperty(e,"Log",{enumerable:!0,get:function(){return T.Log}});var M=requireStatsigMetadata(),R=requireStorageProvider();Object.defineProperty(e,"Storage",{enumerable:!0,get:function(){return R.Storage}}),_(require$_StatsigGlobal(),e),_(requireCacheKey(),e),_((ei||(ei=1,Object.defineProperty(ti,"__esModule",{value:!0})),ti),e),_(requireDataAdapterCore(),e),_(requireDiagnostics(),e),_((di||(di=1,Object.defineProperty(fi,"__esModule",{value:!0})),fi),e),_(requireErrorBoundary(),e),_((yi||(yi=1,Object.defineProperty(_i,"__esModule",{value:!0})),_i),e),_((bi||(bi=1,Object.defineProperty(Si,"__esModule",{value:!0})),Si),e),_(requireHashing(),e),_((wi||(wi=1,Object.defineProperty(xi,"__esModule",{value:!0})),xi),e),_(requireLog(),e),_(requireMemoKey(),e),_(requireNetworkConfig(),e),_(requireNetworkCore(),e),_((Ni||(Ni=1,Object.defineProperty(Bi,"__esModule",{value:!0})),Bi),e),_((zi||(zi=1,Object.defineProperty(ji,"__esModule",{value:!0})),ji),e),_(requireSafeJs(),e),_(requireSDKType(),e),_(requireSessionID(),e),_((Gi||(Gi=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e._fastApproxSizeOf=void 0,e._fastApproxSizeOf=function(l,_){for(var S=0,E=Object.keys(l),k=0;k<E.length;k++){var T=E[k],M=l[T];if(S+=T.length,"object"===_typeof3(M)&&null!==M?S+=(0,e._fastApproxSizeOf)(M,_)+2:S+=String(M).length+1,S>=_)return S}return S}}(Hi)),Hi),e),_(requireStableID(),e),_(requireStatsigClientBase(),e),_(requireStatsigClientEventEmitter(),e),_((qi||(qi=1,Object.defineProperty(Xi,"__esModule",{value:!0}),Xi.DataAdapterCachePrefix=void 0,Xi.DataAdapterCachePrefix="statsig.cached"),Xi),e),_(requireStatsigEvent(),e),_(requireStatsigMetadata(),e),_(requireStatsigOptionsCommon(),e),_((Ki||(Ki=1,Object.defineProperty(Yi,"__esModule",{value:!0})),Yi),e),_(function(){if(Ji)return Qi;Ji=1,Object.defineProperty(Qi,"__esModule",{value:!0}),Qi._makeTypedGet=Qi._mergeOverride=Qi._makeLayer=Qi._makeExperiment=Qi._makeDynamicConfig=Qi._makeFeatureGate=void 0;var e=requireLog(),l=requireTypingUtils();function _makeEvaluation(e,l,_,S){var E;return{name:e,details:l,ruleID:null!==(E=null==_?void 0:_.rule_id)&&void 0!==E?E:"",__evaluation:_,value:S}}function _makeDynamicConfig(e,l,_){var S,E=null!==(S=null==_?void 0:_.value)&&void 0!==S?S:{};return Object.assign(Object.assign({},_makeEvaluation(e,l,_,E)),{get:_makeTypedGet(e,null==_?void 0:_.value)})}function _makeTypedGet(_,S,E){return function(k,T){var M,R=null!==(M=null==S?void 0:S[k])&&void 0!==M?M:null;return null==R?null!=T?T:null:null==T||(0,l._isTypeMatch)(R,T)?(null==E||E(k),R):(e.Log.warn("Parameter type mismatch. '".concat(_,".").concat(k,"' was found to be type '").concat(_typeof3(R),"' but fallback/return type is '").concat(_typeof3(T),"'. See https://docs.statsig.com/client/javascript-sdk/#typed-getters")),null!=T?T:null)}}return Qi._makeFeatureGate=function(e,l,_){var S;return Object.assign(Object.assign({},_makeEvaluation(e,l,_,!0===(null==_?void 0:_.value))),{idType:null!==(S=null==_?void 0:_.id_type)&&void 0!==S?S:null})},Qi._makeDynamicConfig=_makeDynamicConfig,Qi._makeExperiment=function(e,l,_){var S,E=_makeDynamicConfig(e,l,_);return Object.assign(Object.assign({},E),{groupName:null!==(S=null==_?void 0:_.group_name)&&void 0!==S?S:null})},Qi._makeLayer=function(e,l,_,S){var E,k;return Object.assign(Object.assign({},_makeEvaluation(e,l,_,void 0)),{get:_makeTypedGet(e,null==_?void 0:_.value,S),groupName:null!==(E=null==_?void 0:_.group_name)&&void 0!==E?E:null,__value:null!==(k=null==_?void 0:_.value)&&void 0!==k?k:{}})},Qi._mergeOverride=function(e,l,_,S){return Object.assign(Object.assign(Object.assign({},e),l),{get:_makeTypedGet(e.name,_,S)})},Qi._makeTypedGet=_makeTypedGet,Qi}(),e),_((Zi||(Zi=1,Object.defineProperty($i,"__esModule",{value:!0})),$i),e),_(requireStatsigUser(),e),_(requireStorageProvider(),e),_(requireTypedJsonParse(),e),_(requireTypingUtils(),e),_(requireUrlConfiguration(),e),_(requireUUID(),e),_(requireVisibilityObserving(),e),_((ea||(ea=1,Object.defineProperty(na,"__esModule",{value:!0}),na.UPDATE_DETAIL_ERROR_MESSAGES=na.createUpdateDetails=void 0,na.createUpdateDetails=function(e,l,_,S,E,k){return{duration:_,source:l,success:e,error:S,sourceUrl:E,warnings:k}},na.UPDATE_DETAIL_ERROR_MESSAGES={NO_NETWORK_DATA:"No data was returned from the network. This may be due to a network timeout if a timeout value was specified in the options or ad blocker error."}),na),e),_(requireSDKFlags(),e),Object.assign((0,S._getStatsigGlobal)(),{Log:T.Log,SDK_VERSION:M.SDK_VERSION})}(kr)),kr}var ra,ia={},aa={},oa={};var sa,ua,la={},ca={};function requireEvaluationResponseDeltas(){if(sa)return ca;sa=1,Object.defineProperty(ca,"__esModule",{value:!0}),ca._resolveDeltasResponse=void 0;var e=requireSrc$3();function _deleteEntriesInRecord(e,l){null==e||e.forEach(function(e){delete l[e]})}return ca._resolveDeltasResponse=function(l,_){var S=(0,e._typedJsonParse)(_,"checksum","DeltasEvaluationResponse");if(!S)return{hadBadDeltaChecksum:!0};var E=function(e){var l=e;return _deleteEntriesInRecord(e.deleted_gates,l.feature_gates),delete l.deleted_gates,_deleteEntriesInRecord(e.deleted_configs,l.dynamic_configs),delete l.deleted_configs,_deleteEntriesInRecord(e.deleted_layers,l.layer_configs),delete l.deleted_layers,l}(function(e,l){return Object.assign(Object.assign(Object.assign({},e),l),{feature_gates:Object.assign(Object.assign({},e.feature_gates),l.feature_gates),layer_configs:Object.assign(Object.assign({},e.layer_configs),l.layer_configs),dynamic_configs:Object.assign(Object.assign({},e.dynamic_configs),l.dynamic_configs)})}(l,S)),k=(0,e._DJB2Object)({feature_gates:E.feature_gates,dynamic_configs:E.dynamic_configs,layer_configs:E.layer_configs},2);return k===S.checksumV2?JSON.stringify(E):{hadBadDeltaChecksum:!0,badChecksum:k,badMergedConfigs:E,badFullResponse:S.deltas_full_response}},ca}function requireNetwork(){if(ua)return la;ua=1;var e=la&&la.__awaiter||function(e,l,_,S){return new(_||(_=Promise))(function(E,k){function fulfilled(e){try{step(S.next(e))}catch(oo){k(oo)}}function rejected(e){try{step(S.throw(e))}catch(oo){k(oo)}}function step(e){var l;e.done?E(e.value):(l=e.value,l instanceof _?l:new _(function(e){e(l)})).then(fulfilled,rejected)}step((S=S.apply(e,l||[])).next())})};Object.defineProperty(la,"__esModule",{value:!0});var l=requireSrc$3(),_=requireEvaluationResponseDeltas(),S=function(S){function StatsigNetwork(e,_){var S;_classCallCheck3(this,StatsigNetwork),S=_callSuper(this,StatsigNetwork,[e,_]);var E=null==e?void 0:e.networkConfig;return S._option=e,S._initializeUrlConfig=new l.UrlConfiguration(l.Endpoint._initialize,null==E?void 0:E.initializeUrl,null==E?void 0:E.api,null==E?void 0:E.initializeFallbackUrls),S}return _inherits(StatsigNetwork,S),_createClass3(StatsigNetwork,[{key:"fetchEvaluations",value:function(_,S,E,k,T){return e(this,void 0,void 0,_regenerator().m(function _callee22(){var e,M,R,I,O,D,L,U,B;return _regenerator().w(function(z){for(;;)if(0===z.n)return L=S?(0,l._typedJsonParse)(S,"has_updates","InitializeResponse"):null,U={user:k,hash:null!==(R=null===(M=null===(e=this._option)||void 0===e?void 0:e.networkConfig)||void 0===M?void 0:M.initializeHashAlgorithm)&&void 0!==R?R:"djb2",deltasResponseRequested:!1,full_checksum:null},(null==L?void 0:L.has_updates)&&(B=(null==L?void 0:L.hash_used)!==(null!==(D=null===(O=null===(I=this._option)||void 0===I?void 0:I.networkConfig)||void 0===O?void 0:O.initializeHashAlgorithm)&&void 0!==D?D:"djb2"),U=Object.assign(Object.assign({},U),{sinceTime:T&&!B?L.time:0,previousDerivedFields:"derived_fields"in L&&T?L.derived_fields:{},deltasResponseRequested:!0,full_checksum:L.full_checksum,partialUserMatchSinceTime:B?0:L.time})),z.a(2,this._fetchEvaluations(_,L,U,E))},_callee22,this)}))}},{key:"_fetchEvaluations",value:function(l,S,E,k){return e(this,void 0,void 0,_regenerator().m(function _callee23(){var e,T,M,R;return _regenerator().w(function(I){for(;;)switch(I.n){case 0:return I.n=1,this.post({sdkKey:l,urlConfig:this._initializeUrlConfig,data:E,retries:2,isStatsigEncodable:!0,priority:k});case 1:if(204!==(null==(M=I.v)?void 0:M.code)){I.n=2;break}return I.a(2,'{"has_updates": false}');case 2:if(200===(null==M?void 0:M.code)){I.n=3;break}return I.a(2,null!==(e=null==M?void 0:M.body)&&void 0!==e?e:null);case 3:if(!0===(null==S?void 0:S.has_updates)&&!0===(null===(T=M.body)||void 0===T?void 0:T.includes('"is_delta":true'))&&!0===E.deltasResponseRequested){I.n=4;break}return I.a(2,M.body);case 4:if("string"!=typeof(R=(0,_._resolveDeltasResponse)(S,M.body))){I.n=5;break}return I.a(2,R);case 5:return I.a(2,this._fetchEvaluations(l,S,Object.assign(Object.assign(Object.assign({},E),R),{deltasResponseRequested:!1}),k))}},_callee23,this)}))}}])}(l.NetworkCore);return la.default=S,la}var ha,da={};function requireParamStoreGetterFactory(){if(ha)return da;ha=1,Object.defineProperty(da,"__esModule",{value:!0}),da._makeParamStoreGetter=void 0;var e=requireSrc$3(),l={disableExposureLog:!0};function _shouldLogExposure(e){return null==e||!1===e.disableExposureLog}function _shouldReturnFallback(l,_){return null!=_&&!(0,e._isTypeMatch)(l,_)}return da._makeParamStoreGetter=function(_,S,E){return function(k,T){if(null==S)return T;var M=S[k];if(null==M||null!=T&&(0,e._typeOf)(T)!==M.param_type)return T;switch(M.ref_type){case"static":return function(e){return e.value}(M);case"gate":return function(e,_,S){return e.getFeatureGate(_.gate_name,_shouldLogExposure(S)?void 0:l).value?_.pass_value:_.fail_value}(_,M,E);case"dynamic_config":return function(e,_,S,E){var k=e.getDynamicConfig(_.config_name,_shouldLogExposure(E)?void 0:l).get(_.param_name);return _shouldReturnFallback(k,S)?S:k}(_,M,T,E);case"experiment":return function(e,_,S,E){var k=e.getExperiment(_.experiment_name,_shouldLogExposure(E)?void 0:l).get(_.param_name);return _shouldReturnFallback(k,S)?S:k}(_,M,T,E);case"layer":return function(e,_,S,E){var k=e.getLayer(_.layer_name,_shouldLogExposure(E)?void 0:l).get(_.param_name);return _shouldReturnFallback(k,S)?S:k}(_,M,T,E);default:return T}}},da}var fa,pa,va,ga={};function requireStatsigEvaluationsDataAdapter(){if(fa)return ga;fa=1;var e=ga&&ga.__awaiter||function(e,l,_,S){return new(_||(_=Promise))(function(E,k){function fulfilled(e){try{step(S.next(e))}catch(oo){k(oo)}}function rejected(e){try{step(S.throw(e))}catch(oo){k(oo)}}function step(e){var l;e.done?E(e.value):(l=e.value,l instanceof _?l:new _(function(e){e(l)})).then(fulfilled,rejected)}step((S=S.apply(e,l||[])).next())})};Object.defineProperty(ga,"__esModule",{value:!0}),ga.StatsigEvaluationsDataAdapter=void 0;var l=requireSrc$3(),_=requireNetwork(),S=function(S){function StatsigEvaluationsDataAdapter(){var e;return _classCallCheck3(this,StatsigEvaluationsDataAdapter),(e=_callSuper(this,StatsigEvaluationsDataAdapter,["EvaluationsDataAdapter","evaluations"]))._network=null,e._options=null,e}return _inherits(StatsigEvaluationsDataAdapter,S),_createClass3(StatsigEvaluationsDataAdapter,[{key:"attach",value:function(e,l,S){_superPropGet(StatsigEvaluationsDataAdapter,"attach",this,3)([e,l,S]),null!==S&&S instanceof _.default?this._network=S:this._network=new _.default(null!=l?l:{})}},{key:"getDataAsync",value:function(e,_,S){return this._getDataAsyncImpl(e,(0,l._normalizeUser)(_,this._options),S)}},{key:"prefetchData",value:function(e,l){return this._prefetchDataImpl(e,l)}},{key:"setData",value:function(e){var _=(0,l._typedJsonParse)(e,"has_updates","data");_&&"user"in _?_superPropGet(StatsigEvaluationsDataAdapter,"setData",this,3)([e,_.user]):l.Log.error("StatsigUser not found. You may be using an older server SDK version. Please upgrade your SDK or use setDataLegacy.")}},{key:"setDataLegacy",value:function(e,l){_superPropGet(StatsigEvaluationsDataAdapter,"setData",this,3)([e,l])}},{key:"_fetchFromNetwork",value:function(l,_,S,E){return e(this,void 0,void 0,_regenerator().m(function _callee24(){var e,k;return _regenerator().w(function(T){for(;;)switch(T.n){case 0:return T.n=1,null===(e=this._network)||void 0===e?void 0:e.fetchEvaluations(this._getSdkKey(),l,null==S?void 0:S.priority,_,E);case 1:return k=T.v,T.a(2,null!=k?k:null)}},_callee24,this)}))}},{key:"_getCacheKey",value:function(e){var _,S=(0,l._getStorageKey)(this._getSdkKey(),e,null===(_=this._options)||void 0===_?void 0:_.customUserCacheKeyFunc);return"".concat(l.DataAdapterCachePrefix,".").concat(this._cacheSuffix,".").concat(S)}},{key:"_isCachedResultValidFor204",value:function(e,_){return null!=e.fullUserHash&&e.fullUserHash===(0,l._getFullUserHash)(_)}}])}(l.DataAdapterCore);return ga.StatsigEvaluationsDataAdapter=S,ga}function requireStatsigClient(){if(pa)return aa;pa=1;var e=aa&&aa.__awaiter||function(e,l,_,S){return new(_||(_=Promise))(function(E,k){function fulfilled(e){try{step(S.next(e))}catch(oo){k(oo)}}function rejected(e){try{step(S.throw(e))}catch(oo){k(oo)}}function step(e){var l;e.done?E(e.value):(l=e.value,l instanceof _?l:new _(function(e){e(l)})).then(fulfilled,rejected)}step((S=S.apply(e,l||[])).next())})};Object.defineProperty(aa,"__esModule",{value:!0});var l=requireSrc$3(),_=function(){if(ra)return oa;ra=1,Object.defineProperty(oa,"__esModule",{value:!0});var e=requireSrc$3(),l=function(){return _createClass3(function EvaluationStore(e){_classCallCheck3(this,EvaluationStore),this._sdkKey=e,this._rawValues=null,this._values=null,this._source="Uninitialized",this._lcut=0,this._receivedAt=0,this._bootstrapMetadata=null,this._warnings=new Set},[{key:"reset",value:function(){this._values=null,this._rawValues=null,this._source="Loading",this._lcut=0,this._receivedAt=0,this._bootstrapMetadata=null,this._warnings.clear()}},{key:"finalize",value:function(){this._values||(this._source="NoValues")}},{key:"getValues",value:function(){return this._rawValues?(0,e._typedJsonParse)(this._rawValues,"has_updates","EvaluationStoreValues"):null}},{key:"setValues",value:function(l,_){var S,E;if(!l)return!1;var k=(0,e._typedJsonParse)(l.data,"has_updates","EvaluationResponse");return null!=k&&(this._source=l.source,!0!==(null==k?void 0:k.has_updates)||(null!==(S=k.time)&&void 0!==S?S:0)<this._lcut||(this._rawValues=l.data,this._lcut=k.time,this._receivedAt=l.receivedAt,this._values=k,this._bootstrapMetadata=this._extractBootstrapMetadata(l.source,k),l.source&&k.user&&this._setWarningState(_,k),e.SDKFlags.setFlags(this._sdkKey,null!==(E=k.sdk_flags)&&void 0!==E?E:{})),!0)}},{key:"getWarnings",value:function(){if(0!==this._warnings.size)return Array.from(this._warnings)}},{key:"getGate",value:function(e){var l;return this._getDetailedStoreResult(null===(l=this._values)||void 0===l?void 0:l.feature_gates,e)}},{key:"getConfig",value:function(e){var l;return this._getDetailedStoreResult(null===(l=this._values)||void 0===l?void 0:l.dynamic_configs,e)}},{key:"getConfigList",value:function(){var e;return(null===(e=this._values)||void 0===e?void 0:e.dynamic_configs)?Object.values(this._values.dynamic_configs).map(function(e){return e.name}):[]}},{key:"getLayer",value:function(e){var l;return this._getDetailedStoreResult(null===(l=this._values)||void 0===l?void 0:l.layer_configs,e)}},{key:"getParamStore",value:function(e){var l;return this._getDetailedStoreResult(null===(l=this._values)||void 0===l?void 0:l.param_stores,e)}},{key:"getSource",value:function(){return this._source}},{key:"getExposureMapping",value:function(){var e;return null===(e=this._values)||void 0===e?void 0:e.exposures}},{key:"_extractBootstrapMetadata",value:function(e,l){if("Bootstrap"!==e)return null;var _={};return l.user&&(_.user=l.user),l.sdkInfo&&(_.generatorSDKInfo=l.sdkInfo),_.lcut=l.time,_}},{key:"_getDetailedStoreResult",value:function(l,_){var S=null;return l&&(S=l[_]?l[_]:l[(0,e._DJB2)(_)]),{result:S,details:this._getDetails(null==S)}}},{key:"_setWarningState",value:function(l,_){var S,E,k=e.StableID.get(this._sdkKey);if((null===(S=l.customIDs)||void 0===S?void 0:S.stableID)===k||!(null===(E=l.customIDs)||void 0===E?void 0:E.stableID)&&!k){if("user"in _){var T=_.user,M=Object.assign(Object.assign({},l),{analyticsOnlyMetadata:void 0,privateAttributes:void 0});(0,e._getFullUserHash)(M)!==(0,e._getFullUserHash)(T)&&this._warnings.add("PartialUserMatch")}}else this._warnings.add("StableIDMismatch")}},{key:"getCurrentSourceDetails",value:function(){if("Uninitialized"===this._source||"NoValues"===this._source)return{reason:this._source};var e={reason:this._source,lcut:this._lcut,receivedAt:this._receivedAt};return this._warnings.size>0&&(e.warnings=Array.from(this._warnings)),e}},{key:"_getDetails",value:function(e){var l,_,S=this.getCurrentSourceDetails(),E=S.reason,k=null!==(l=S.warnings)&&void 0!==l?l:[];if("Bootstrap"===this._source&&k.length>0&&(E+=k[0]),"Uninitialized"!==E&&"NoValues"!==E){var T=e?"Unrecognized":"Recognized";E="".concat(E,":").concat(T)}var M="Bootstrap"===this._source&&null!==(_=this._bootstrapMetadata)&&void 0!==_?_:void 0;return M&&(S.bootstrapMetadata=M),Object.assign(Object.assign({},S),{reason:E})}}])}();return oa.default=l,oa}(),S=requireNetwork(),E=requireParamStoreGetterFactory(),k=requireStatsigEvaluationsDataAdapter(),T=function(T){function StatsigClient(e,E){var T,M,R,I=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;_classCallCheck3(this,StatsigClient),l.SDKType._setClientType(e,"javascript-client");var O=new S.default(I,function(e){T.$emt(e)});(T=_callSuper(this,StatsigClient,[e,null!==(M=null==I?void 0:I.dataAdapter)&&void 0!==M?M:new k.StatsigEvaluationsDataAdapter,O,I]))._possibleFirstTouchMetadata={},T.getFeatureGate=T._memoize(l.MemoPrefix._gate,T._getFeatureGateImpl.bind(T)),T.getDynamicConfig=T._memoize(l.MemoPrefix._dynamicConfig,T._getDynamicConfigImpl.bind(T)),T.getExperiment=T._memoize(l.MemoPrefix._experiment,T._getExperimentImpl.bind(T)),T.getConfigList=T._memoize(l.MemoPrefix._configList,T._getConfigListImpl.bind(T)),T.getLayer=T._memoize(l.MemoPrefix._layer,T._getLayerImpl.bind(T)),T.getParameterStore=T._memoize(l.MemoPrefix._paramStore,T._getParameterStoreImpl.bind(T)),T._store=new _.default(e),T._network=O,T._user=T._configureUser(E,I),T._sdkInstanceID=(0,l.getUUID)();var D,L=_createForOfIteratorHelper2(null!==(R=null==I?void 0:I.plugins)&&void 0!==R?R:[]);try{for(L.s();!(D=L.n()).done;){D.value.bind(T)}}catch(U){L.e(U)}finally{L.f()}return T}return _inherits(StatsigClient,T),_createClass3(StatsigClient,[{key:"initializeSync",value:function(e){var _;return"Uninitialized"!==this.loadingStatus?(0,l.createUpdateDetails)(!0,this._store.getSource(),-1,null,null,["MultipleInitializations"].concat(_toConsumableArray3(null!==(_=this._store.getWarnings())&&void 0!==_?_:[]))):(this._logger.start(),this.updateUserSync(this._user,e))}},{key:"initializeAsync",value:function(l){return e(this,void 0,void 0,_regenerator().m(function _callee25(){return _regenerator().w(function(e){for(;;)switch(e.n){case 0:if(!this._initializePromise){e.n=1;break}return e.a(2,this._initializePromise);case 1:return this._initializePromise=this._initializeAsyncImpl(l),e.a(2,this._initializePromise)}},_callee25,this)}))}},{key:"updateUserSync",value:function(e,l){var _=performance.now();try{return this._updateUserSyncImpl(e,l,_)}catch(oo){var S=oo instanceof Error?oo:new Error(String(oo));return this._createErrorUpdateDetails(S,_)}}},{key:"_updateUserSyncImpl",value:function(e,_,S){var E,k=_toConsumableArray3(null!==(E=this._store.getWarnings())&&void 0!==E?E:[]);this._resetForUser(e);var T=this.dataAdapter.getDataSync(this._user);null==T&&k.push("NoCachedValues"),this._store.setValues(T,this._user),this._finalizeUpdate(T);var M=null==_?void 0:_.disableBackgroundCacheRefresh;return!0===M||null==M&&"Bootstrap"===(null==T?void 0:T.source)||this._runPostUpdate(null!=T?T:null,this._user),(0,l.createUpdateDetails)(!0,this._store.getSource(),performance.now()-S,this._errorBoundary.getLastSeenErrorAndReset(),this._network.getLastUsedInitUrlAndReset(),k)}},{key:"updateUserAsync",value:function(l,_){return e(this,void 0,void 0,_regenerator().m(function _callee26(){var e,S,E;return _regenerator().w(function(k){for(;;)switch(k.p=k.n){case 0:return e=performance.now(),k.p=1,k.n=2,this._updateUserAsyncImpl(l,_);case 2:return k.a(2,k.v);case 3:return k.p=3,E=k.v,S=E instanceof Error?E:new Error(String(E)),k.a(2,this._createErrorUpdateDetails(S,e))}},_callee26,this,[[1,3]])}))}},{key:"_updateUserAsyncImpl",value:function(_,S){return e(this,void 0,void 0,_regenerator().m(function _callee27(){var e,E,k,T;return _regenerator().w(function(M){for(;;)switch(M.n){case 0:return this._resetForUser(_),e=this._user,l.Diagnostics._markInitOverallStart(this._sdkKey),E=this.dataAdapter.getDataSync(e),this._store.setValues(E,this._user),this._setStatus("Loading",E),M.n=1,this.dataAdapter.getDataAsync(E,e,S);case 1:if(E=M.v,e===this._user){M.n=2;break}return M.a(2,(0,l.createUpdateDetails)(!1,this._store.getSource(),-1,new Error("User changed during update"),this._network.getLastUsedInitUrlAndReset()));case 2:return k=!1,null!=E&&(l.Diagnostics._markInitProcessStart(this._sdkKey),k=this._store.setValues(E,this._user),l.Diagnostics._markInitProcessEnd(this._sdkKey,{success:k})),this._finalizeUpdate(E),k||(this._errorBoundary.attachErrorIfNoneExists(l.UPDATE_DETAIL_ERROR_MESSAGES.NO_NETWORK_DATA),this.$emt({name:"initialization_failure"})),l.Diagnostics._markInitOverallEnd(this._sdkKey,k,this._store.getCurrentSourceDetails()),T=l.Diagnostics._enqueueDiagnosticsEvent(this._user,this._logger,this._sdkKey,this._options),M.a(2,(0,l.createUpdateDetails)(k,this._store.getSource(),T,this._errorBoundary.getLastSeenErrorAndReset(),this._network.getLastUsedInitUrlAndReset(),this._store.getWarnings()))}},_callee27,this)}))}},{key:"getContext",value:function(){return{sdkKey:this._sdkKey,options:this._options,values:this._store.getValues(),user:JSON.parse(JSON.stringify(this._user)),errorBoundary:this._errorBoundary,session:l.StatsigSession.get(this._sdkKey),stableID:l.StableID.get(this._sdkKey),sdkInstanceID:this._sdkInstanceID}}},{key:"checkGate",value:function(e,l){return this.getFeatureGate(e,l).value}},{key:"logEvent",value:function(e,l,_){var S="string"==typeof e?{eventName:e,value:l,metadata:_}:e;this.$emt({name:"log_event_called",event:S}),this._logger.enqueue(Object.assign(Object.assign({},S),{user:this._user,time:Date.now()}))}},{key:"updateUserWithAnalyticsOnlyMetadata",value:function(e){this._user=this._configureUser(Object.assign(Object.assign({},this._user),{analyticsOnlyMetadata:e}),this._options)}},{key:"_primeReadyRipcord",value:function(){var e=this;this.$on("error",function(){"Loading"===e.loadingStatus&&e._finalizeUpdate(null)})}},{key:"_initializeAsyncImpl",value:function(_){return e(this,void 0,void 0,_regenerator().m(function _callee28(){return _regenerator().w(function(e){for(;;)switch(e.n){case 0:if(l.Storage.isReady()){e.n=1;break}return e.n=1,l.Storage.isReadyResolver();case 1:return this._logger.start(),e.a(2,this.updateUserAsync(this._user,_))}},_callee28,this)}))}},{key:"_createErrorUpdateDetails",value:function(e,_){var S;return(0,l.createUpdateDetails)(!1,this._store.getSource(),performance.now()-_,e,null,_toConsumableArray3(null!==(S=this._store.getWarnings())&&void 0!==S?S:[]))}},{key:"_finalizeUpdate",value:function(e){this._store.finalize(),this._setStatus("Ready",e)}},{key:"_runPostUpdate",value:function(e,_){this.dataAdapter.getDataAsync(e,_,{priority:"low"}).catch(function(e){l.Log.error("An error occurred after update.",e)})}},{key:"_resetForUser",value:function(e){this._logger.reset(),this._store.reset(),this._user=this._configureUser(e,this._options)}},{key:"_configureUser",value:function(e,_){var S,E,k,T=this,M=(0,l._normalizeUser)(e,_),R=null===(S=M.customIDs)||void 0===S?void 0:S.stableID;if(R){var I=null===(k=(E=this.storageProvider).isReadyResolver)||void 0===k?void 0:k.call(E);I?I.then(function(){return l.StableID.setOverride(R,T._sdkKey)},function(){return l.StableID.setOverride(R,T._sdkKey)}):l.StableID.setOverride(R,this._sdkKey)}return Object.keys(this._possibleFirstTouchMetadata).length>0&&(M.analyticsOnlyMetadata=Object.assign(Object.assign({},M.analyticsOnlyMetadata),this._possibleFirstTouchMetadata)),M}},{key:"_getFeatureGateImpl",value:function(e,_){var S,E,k=this._store.getGate(e),T=k.result,M=k.details,R=(0,l._makeFeatureGate)(e,M,T),I=null===(E=null===(S=this.overrideAdapter)||void 0===S?void 0:S.getGateOverride)||void 0===E?void 0:E.call(S,R,this._user,_),O=null!=I?I:R;return this._enqueueExposure(e,(0,l._createGateExposure)(this._user,O,this._store.getExposureMapping()),_),this.$emt({name:"gate_evaluation",gate:O}),O}},{key:"_getDynamicConfigImpl",value:function(e,_){var S,E,k=this._store.getConfig(e),T=k.result,M=k.details,R=(0,l._makeDynamicConfig)(e,M,T),I=null===(E=null===(S=this.overrideAdapter)||void 0===S?void 0:S.getDynamicConfigOverride)||void 0===E?void 0:E.call(S,R,this._user,_),O=null!=I?I:R;return this._enqueueExposure(e,(0,l._createConfigExposure)(this._user,O,this._store.getExposureMapping()),_),this.$emt({name:"dynamic_config_evaluation",dynamicConfig:O}),O}},{key:"_getExperimentImpl",value:function(e,_){var S,E,k,T,M=this._store.getConfig(e),R=M.result,I=M.details,O=(0,l._makeExperiment)(e,I,R);null!=O.__evaluation&&(O.__evaluation.secondary_exposures=(0,l._mapExposures)(null!==(E=null===(S=O.__evaluation)||void 0===S?void 0:S.secondary_exposures)&&void 0!==E?E:[],this._store.getExposureMapping()));var D=null===(T=null===(k=this.overrideAdapter)||void 0===k?void 0:k.getExperimentOverride)||void 0===T?void 0:T.call(k,O,this._user,_),L=null!=D?D:O;return this._enqueueExposure(e,(0,l._createConfigExposure)(this._user,L,this._store.getExposureMapping()),_),this.$emt({name:"experiment_evaluation",experiment:L}),L}},{key:"_getConfigListImpl",value:function(){return this._store.getConfigList()}},{key:"_getLayerImpl",value:function(e,_){var S,E,k,T=this,M=this._store.getLayer(e),R=M.result,I=M.details,O=(0,l._makeLayer)(e,I,R),D=null===(E=null===(S=this.overrideAdapter)||void 0===S?void 0:S.getLayerOverride)||void 0===E?void 0:E.call(S,O,this._user,_);(null==_?void 0:_.disableExposureLog)&&this._logger.incrementNonExposureCount(e);var L=(0,l._mergeOverride)(O,D,null!==(k=null==D?void 0:D.__value)&&void 0!==k?k:O.__value,function(S){(null==_?void 0:_.disableExposureLog)||T._enqueueExposure(e,(0,l._createLayerParameterExposure)(T._user,L,S,T._store.getExposureMapping()),_)});return this.$emt({name:"layer_evaluation",layer:L}),L}},{key:"_getParameterStoreImpl",value:function(e,l){var _,S,k=this._store.getParamStore(e),T=k.result,M=k.details;this._logger.incrementNonExposureCount(e);var R={name:e,details:M,__configuration:T,get:(0,E._makeParamStoreGetter)(this,T,l)},I=null===(S=null===(_=this.overrideAdapter)||void 0===_?void 0:_.getParamStoreOverride)||void 0===S?void 0:S.call(_,R,l);return null!=I&&(R.__configuration=I.config,R.details=I.details,R.get=(0,E._makeParamStoreGetter)(this,I.config,l)),R}}],[{key:"instance",value:function(e){var _=(0,l._getStatsigGlobal)().instance(e);return _ instanceof StatsigClient?_:(l.Log.warn((0,l._isServerEnv)()?"StatsigClient.instance is not supported in server environments":"Unable to find StatsigClient instance"),new StatsigClient(null!=e?e:"",{}))}}])}(l.StatsigClientBase);return aa.default=T,aa}function requireSrc$2(){return va||(va=1,function(e){var l=ia&&ia.__createBinding||(Object.create?function(e,l,_,S){void 0===S&&(S=_);var E=Object.getOwnPropertyDescriptor(l,_);E&&!("get"in E?!l.__esModule:E.writable||E.configurable)||(E={enumerable:!0,get:function(){return l[_]}}),Object.defineProperty(e,S,E)}:function(e,l,_,S){void 0===S&&(S=_),e[S]=l[_]}),_=ia&&ia.__exportStar||function(e,_){for(var S in e)"default"===S||Object.prototype.hasOwnProperty.call(_,S)||l(_,e,S)};Object.defineProperty(e,"__esModule",{value:!0}),e.StatsigClient=void 0;var S=requireSrc$3(),E=requireStatsigClient();e.StatsigClient=E.default,_(requireSrc$3(),e);var k=Object.assign((0,S._getStatsigGlobal)(),{StatsigClient:E.default});e.default=k}(ia)),ia}O("ak",requireSrc$2());var ma,ya,_a={},ba={},Sa={},wa={},xa={};function requireRecord(){return ma||(ma=1,function(e){var T={};Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});var M,R=Object.defineProperty,__publicField=function(e,l,_){return function(e,l,_){return l in e?R(e,l,{enumerable:!0,configurable:!0,writable:!0,value:_}):e[l]=_}(e,"symbol"!==_typeof3(l)?l+"":l,_)},I=Object.defineProperty,__publicField$1=function(e,l,_){return function(e,l,_){return l in e?I(e,l,{enumerable:!0,configurable:!0,writable:!0,value:_}):e[l]=_}(e,"symbol"!==_typeof3(l)?l+"":l,_)},O=function(e){return e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment",e}(O||{}),D={Node:["childNodes","parentNode","parentElement","textContent"],ShadowRoot:["host","styleSheets"],Element:["shadowRoot","querySelector","querySelectorAll"],MutationObserver:[]},L={Node:["contains","getRootNode"],ShadowRoot:["getSelection"],Element:[],MutationObserver:["constructor"]},U={};function getUntaintedPrototype$1(e){if(U[e])return U[e];var l=globalThis[e],_=l.prototype,S=e in D?D[e]:void 0,E=Boolean(S&&S.every(function(e){var l,S;return Boolean(null==(S=null==(l=Object.getOwnPropertyDescriptor(_,e))?void 0:l.get)?void 0:S.toString().includes("[native code]"))})),k=e in L?L[e]:void 0,T=Boolean(k&&k.every(function(e){var l;return"function"==typeof _[e]&&(null==(l=_[e])?void 0:l.toString().includes("[native code]"))}));if(E&&T)return U[e]=l.prototype,l.prototype;try{var M=document.createElement("iframe");document.body.appendChild(M);var R=M.contentWindow;if(!R)return l.prototype;var I=R[e].prototype;return document.body.removeChild(M),I?U[e]=I:_}catch(O){return _}}var B={};function getUntaintedAccessor$1(e,l,_){var S,E="".concat(e,".").concat(String(_));if(B[E])return B[E].call(l);var k=getUntaintedPrototype$1(e),T=null==(S=Object.getOwnPropertyDescriptor(k,_))?void 0:S.get;return T?(B[E]=T,T.call(l)):l[_]}var z={};function getUntaintedMethod$1(e,l,_){var S="".concat(e,".").concat(String(_));if(z[S])return z[S].bind(l);var E=getUntaintedPrototype$1(e)[_];return"function"!=typeof E?l[_]:(z[S]=E,E.bind(l))}var j={childNodes:function(e){return getUntaintedAccessor$1("Node",e,"childNodes")},parentNode:function(e){return getUntaintedAccessor$1("Node",e,"parentNode")},parentElement:function(e){return getUntaintedAccessor$1("Node",e,"parentElement")},textContent:function(e){return getUntaintedAccessor$1("Node",e,"textContent")},contains:function(e,l){return getUntaintedMethod$1("Node",e,"contains")(l)},getRootNode:function(e){return getUntaintedMethod$1("Node",e,"getRootNode")()},host:function(e){return e&&"host"in e?getUntaintedAccessor$1("ShadowRoot",e,"host"):null},styleSheets:function(e){return e.styleSheets},shadowRoot:function(e){return e&&"shadowRoot"in e?getUntaintedAccessor$1("Element",e,"shadowRoot"):null},querySelector:function(e,l){return getUntaintedAccessor$1("Element",e,"querySelector")(l)},querySelectorAll:function(e,l){return getUntaintedAccessor$1("Element",e,"querySelectorAll")(l)},mutationObserver:function(){return getUntaintedPrototype$1("MutationObserver").constructor}};function isElement(e){return e.nodeType===e.ELEMENT_NODE}function isShadowRoot(e){var l=e&&"host"in e&&"mode"in e&&j.host(e)||null;return Boolean(l&&"shadowRoot"in l&&j.shadowRoot(l)===e)}function isNativeShadowDom(e){return"[object ShadowRoot]"===Object.prototype.toString.call(e)}function stringifyStylesheet(e){try{var l=e.rules||e.cssRules;if(!l)return null;var _=Array.from(l,function(l){return stringifyRule(l,e.href)}).join("");return(S=_).includes(" background-clip: text;")&&!S.includes(" -webkit-background-clip: text;")&&(S=S.replace(/\sbackground-clip:\s*text;/g," -webkit-background-clip: text; background-clip: text;")),S}catch(E){return null}var S}function stringifyRule(e,l){if(function(e){return"styleSheet"in e}(e)){var _;try{_=stringifyStylesheet(e.styleSheet)||function(e){var l=e.cssText;if(l.split('"').length<3)return l;var _=["@import","url(".concat(JSON.stringify(e.href),")")];return""===e.layerName?_.push("layer"):e.layerName&&_.push("layer(".concat(e.layerName,")")),e.supportsText&&_.push("supports(".concat(e.supportsText,")")),e.media.length&&_.push(e.media.mediaText),_.join(" ")+";"}(e)}catch(k){_=e.cssText}return e.styleSheet.href?absolutifyURLs(_,e.styleSheet.href):_}var S,E=e.cssText;return function(e){return"selectorText"in e}(e)&&e.selectorText.includes(":")&&(S=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm,E=E.replace(S,"$1\\$2")),l?absolutifyURLs(E,l):E}var G=function(){return _createClass3(function Mirror(){_classCallCheck3(this,Mirror),__publicField$1(this,"idNodeMap",new Map),__publicField$1(this,"nodeMetaMap",new WeakMap)},[{key:"getId",value:function(e){var l;if(!e)return-1;var _=null==(l=this.getMeta(e))?void 0:l.id;return null!=_?_:-1}},{key:"getNode",value:function(e){return this.idNodeMap.get(e)||null}},{key:"getIds",value:function(){return Array.from(this.idNodeMap.keys())}},{key:"getMeta",value:function(e){return this.nodeMetaMap.get(e)||null}},{key:"removeNodeFromMap",value:function(e){var l=this,_=this.getId(e);this.idNodeMap.delete(_),e.childNodes&&e.childNodes.forEach(function(e){return l.removeNodeFromMap(e)})}},{key:"has",value:function(e){return this.idNodeMap.has(e)}},{key:"hasNode",value:function(e){return this.nodeMetaMap.has(e)}},{key:"add",value:function(e,l){var _=l.id;this.idNodeMap.set(_,e),this.nodeMetaMap.set(e,l)}},{key:"replace",value:function(e,l){var _=this.getNode(e);if(_){var S=this.nodeMetaMap.get(_);S&&this.nodeMetaMap.set(l,S)}this.idNodeMap.set(e,l)}},{key:"reset",value:function(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}])}();function maskInputValue(e){var l=e.element,_=e.maskInputOptions,S=e.tagName,E=e.type,k=e.value,T=e.maskInputFn,M=k||"",R=E&&toLowerCase(E);return(_[S.toLowerCase()]||R&&_[R])&&(M=T?T(M,l):"*".repeat(M.length)),M}function toLowerCase(e){return e.toLowerCase()}var H="__rrweb_original__";function getInputType(e){var l=e.type;return e.hasAttribute("data-rr-is-password")?"password":l?toLowerCase(l):null}function extractFileExtension(e,l){var _,S;try{S=new URL(e,null!=l?l:window.location.href)}catch(k){return null}var E=S.pathname.match(/\.([0-9a-z]+)(?:$)/i);return null!==(_=null==E?void 0:E[1])&&void 0!==_?_:null}var V=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,W=/^(?:[a-z+]+:)?\/\//i,q=/^www\..*/i,X=/^(data:)([^,]*),(.*)/i;function absolutifyURLs(e,l){return(e||"").replace(V,function(e,_,S,E,k,T){var M,R=S||k||T,I=_||E||"";if(!R)return e;if(W.test(R)||q.test(R))return"url(".concat(I).concat(R).concat(I,")");if(X.test(R))return"url(".concat(I).concat(R).concat(I,")");if("/"===R[0])return"url(".concat(I).concat((M=l,(M.indexOf("//")>-1?M.split("/").slice(0,3).join("/"):M.split("/")[0]).split("?")[0]+R)).concat(I,")");var O=l.split("/"),D=R.split("/");O.pop();var L,U=_createForOfIteratorHelper2(D);try{for(U.s();!(L=U.n()).done;){var B=L.value;"."!==B&&(".."===B?O.pop():O.push(B))}}catch(z){U.e(z)}finally{U.f()}return"url(".concat(I).concat(O.join("/")).concat(I,")")})}var K,Y,J=1,Q=new RegExp("[^a-z0-9-_:]");function genId(){return J++}var Z=/^[^ \t\n\r\u000c]+/,$=/^[, \t\n\r\u000c]+/;var ee=new WeakMap;function absoluteToDoc(e,l){return l&&""!==l.trim()?getHref(e,l):l}function isSVGElement(e){return Boolean("svg"===e.tagName||e.ownerSVGElement)}function getHref(e,l){var _=ee.get(e);if(_||(_=e.createElement("a"),ee.set(e,_)),l){if(l.startsWith("blob:")||l.startsWith("data:"))return l}else l="";return _.setAttribute("href",l),_.href}function transformAttribute(e,l,_,S){return S?"src"===_||"href"===_&&("use"!==l||"#"!==S[0])||"xlink:href"===_&&"#"!==S[0]?absoluteToDoc(e,S):"background"!==_||"table"!==l&&"td"!==l&&"th"!==l?"srcset"===_?function(e,l){if(""===l.trim())return l;var _=0;function collectCharacters(e){var S,E=e.exec(l.substring(_));return E?(S=E[0],_+=S.length,S):""}for(var S=[];collectCharacters($),!(_>=l.length);){var E=collectCharacters(Z);if(","===E.slice(-1))E=absoluteToDoc(e,E.substring(0,E.length-1)),S.push(E);else{var k="";E=absoluteToDoc(e,E);for(var T=!1;;){var M=l.charAt(_);if(""===M){S.push((E+k).trim());break}if(T)")"===M&&(T=!1);else{if(","===M){_+=1,S.push((E+k).trim());break}"("===M&&(T=!0)}k+=M,_+=1}}}return S.join(", ")}(e,S):"style"===_?absolutifyURLs(S,getHref(e)):"object"===l&&"data"===_?absoluteToDoc(e,S):S:absoluteToDoc(e,S):S}function ignoreAttribute(e,l,_){return("video"===e||"audio"===e)&&"autoplay"===l}function classMatchesRegex(e,l,_){if(!e)return!1;if(e.nodeType!==e.ELEMENT_NODE)return!!_&&classMatchesRegex(j.parentNode(e),l,_);for(var S=e.classList.length;S--;){var E=e.classList[S];if(l.test(E))return!0}return!!_&&classMatchesRegex(j.parentNode(e),l,_)}function needMaskingText(e,l,_,S){var E;if(isElement(e)){if(E=e,!j.childNodes(E).length)return!1}else{if(null===j.parentElement(e))return!1;E=j.parentElement(e)}try{if("string"==typeof l){if(S){if(E.closest(".".concat(l)))return!0}else if(E.classList.contains(l))return!0}else if(classMatchesRegex(E,l,S))return!0;if(_)if(S){if(E.closest(_))return!0}else if(E.matches(_))return!0}catch(k){}return!1}function serializeNode(e,l){var _=l.doc,S=l.mirror,E=l.blockClass,k=l.blockSelector,T=l.needsMask,M=l.inlineStylesheet,R=l.maskInputOptions,I=void 0===R?{}:R,D=l.maskTextFn,L=l.maskInputFn,U=l.dataURLOptions,B=void 0===U?{}:U,z=l.inlineImages,G=l.recordCanvas,V=l.keepIframeSrcFn,W=l.newlyAddedElement,q=void 0!==W&&W,X=function(e,l){if(!l.hasNode(e))return;var _=l.getId(e);return 1===_?void 0:_}(_,S);switch(e.nodeType){case e.DOCUMENT_NODE:return"CSS1Compat"!==e.compatMode?{type:O.Document,childNodes:[],compatMode:e.compatMode}:{type:O.Document,childNodes:[]};case e.DOCUMENT_TYPE_NODE:return{type:O.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:X};case e.ELEMENT_NODE:return function(e,l){for(var _,S=l.doc,E=l.blockClass,k=l.blockSelector,T=l.inlineStylesheet,M=l.maskInputOptions,R=void 0===M?{}:M,I=l.maskInputFn,D=l.dataURLOptions,L=void 0===D?{}:D,U=l.inlineImages,B=l.recordCanvas,z=l.keepIframeSrcFn,G=l.newlyAddedElement,V=void 0!==G&&G,W=l.rootId,q=function(e,l,_){try{if("string"==typeof l){if(e.classList.contains(l))return!0}else for(var S=e.classList.length;S--;){var E=e.classList[S];if(l.test(E))return!0}if(_)return e.matches(_)}catch(k){}return!1}(e,E,k),X=function(e){if(e instanceof HTMLFormElement)return"form";var l=toLowerCase(e.tagName);return Q.test(l)?"div":l}(e),J={},Z=e.attributes.length,$=0;$<Z;$++){var ee=e.attributes[$];ignoreAttribute(X,ee.name,ee.value)||(J[ee.name]=transformAttribute(S,X,toLowerCase(ee.name),ee.value))}if("link"===X&&T){var te=Array.from(S.styleSheets).find(function(l){return l.href===e.href}),ne=null;te&&(ne=stringifyStylesheet(te)),ne&&(delete J.rel,delete J.href,J._cssText=ne)}if("style"===X&&e.sheet&&!(e.innerText||j.textContent(e)||"").trim().length){var re=stringifyStylesheet(e.sheet);re&&(J._cssText=re)}if("input"===X||"textarea"===X||"select"===X){var ie=e.value,ae=e.checked;"radio"!==J.type&&"checkbox"!==J.type&&"submit"!==J.type&&"button"!==J.type&&ie?J.value=maskInputValue({element:e,type:getInputType(e),tagName:X,value:ie,maskInputOptions:R,maskInputFn:I}):ae&&(J.checked=ae)}"option"===X&&(e.selected&&!R.select?J.selected=!0:delete J.selected);"dialog"===X&&e.open&&(J.rr_open_mode=e.matches("dialog:modal")?"modal":"non-modal");if("canvas"===X&&B)if("2d"===e.__context)(function(e){var l=e.getContext("2d");if(!l)return!0;for(var _=0;_<e.width;_+=50)for(var S=0;S<e.height;S+=50){var E=l.getImageData,k=H in E?E[H]:E;if(new Uint32Array(k.call(l,_,S,Math.min(50,e.width-_),Math.min(50,e.height-S)).data.buffer).some(function(e){return 0!==e}))return!1}return!0})(e)||(J.rr_dataURL=e.toDataURL(L.type,L.quality));else if(!("__context"in e)){var oe=e.toDataURL(L.type,L.quality),se=S.createElement("canvas");se.width=e.width,se.height=e.height,oe!==se.toDataURL(L.type,L.quality)&&(J.rr_dataURL=oe)}if("img"===X&&U){K||(K=S.createElement("canvas"),Y=K.getContext("2d"));var ue=e,le=(ue.currentSrc||ue.getAttribute("src"),ue.crossOrigin),_recordInlineImage=function(){ue.removeEventListener("load",_recordInlineImage);try{K.width=ue.naturalWidth,K.height=ue.naturalHeight,Y.drawImage(ue,0,0),J.rr_dataURL=K.toDataURL(L.type,L.quality)}catch(e){if("anonymous"!==ue.crossOrigin)return ue.crossOrigin="anonymous",void(ue.complete&&0!==ue.naturalWidth?_recordInlineImage():ue.addEventListener("load",_recordInlineImage))}"anonymous"===ue.crossOrigin&&(le?J.crossOrigin=le:ue.removeAttribute("crossorigin"))};ue.complete&&0!==ue.naturalWidth?_recordInlineImage():ue.addEventListener("load",_recordInlineImage)}if("audio"===X||"video"===X){var ce=J;ce.rr_mediaState=e.paused?"paused":"played",ce.rr_mediaCurrentTime=e.currentTime,ce.rr_mediaPlaybackRate=e.playbackRate,ce.rr_mediaMuted=e.muted,ce.rr_mediaLoop=e.loop,ce.rr_mediaVolume=e.volume}V||(e.scrollLeft&&(J.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(J.rr_scrollTop=e.scrollTop));if(q){var he=e.getBoundingClientRect(),de=he.width,fe=he.height;J={class:J.class,rr_width:"".concat(de,"px"),rr_height:"".concat(fe,"px")}}"iframe"!==X||z(J.src)||(e.contentDocument||(J.rr_src=J.src),delete J.src);try{customElements.get(X)&&(_=!0)}catch(pe){}return{type:O.Element,tagName:X,attributes:J,childNodes:[],isSVG:isSVGElement(e)||void 0,needBlock:q,rootId:W,isCustom:_}}(e,{doc:_,blockClass:E,blockSelector:k,inlineStylesheet:M,maskInputOptions:I,maskInputFn:L,dataURLOptions:B,inlineImages:z,recordCanvas:G,keepIframeSrcFn:V,newlyAddedElement:q,rootId:X});case e.TEXT_NODE:return function(e,l){var _,S=l.needsMask,E=l.maskTextFn,k=l.rootId,T=j.parentNode(e),M=T&&T.tagName,R=j.textContent(e),I="STYLE"===M||void 0,D="SCRIPT"===M||void 0;if(I&&R){try{e.nextSibling||e.previousSibling||(null==(_=T.sheet)?void 0:_.cssRules)&&(R=stringifyStylesheet(T.sheet))}catch(L){}R=absolutifyURLs(R,getHref(l.doc))}D&&(R="SCRIPT_PLACEHOLDER");!I&&!D&&R&&S&&(R=E?E(R,j.parentElement(e)):R.replace(/[\S]/g,"*"));return{type:O.Text,textContent:R||"",isStyle:I,rootId:k}}(e,{doc:_,needsMask:T,maskTextFn:D,rootId:X});case e.CDATA_SECTION_NODE:return{type:O.CDATA,textContent:"",rootId:X};case e.COMMENT_NODE:return{type:O.Comment,textContent:j.textContent(e)||"",rootId:X};default:return!1}}function lowerIfExists(e){return null==e?"":e.toLowerCase()}function serializeNodeWithId(e,l){var _=l.doc,S=l.mirror,E=l.blockClass,k=l.blockSelector,T=l.maskTextClass,M=l.maskTextSelector,R=l.skipChild,I=void 0!==R&&R,D=l.inlineStylesheet,L=void 0===D||D,U=l.maskInputOptions,B=void 0===U?{}:U,z=l.maskTextFn,G=l.maskInputFn,H=l.slimDOMOptions,V=l.dataURLOptions,W=void 0===V?{}:V,q=l.inlineImages,X=void 0!==q&&q,K=l.recordCanvas,Y=void 0!==K&&K,J=l.onSerialize,Q=l.onIframeLoad,Z=l.iframeLoadTimeout,$=void 0===Z?5e3:Z,ee=l.onStylesheetLoad,te=l.stylesheetLoadTimeout,ne=void 0===te?5e3:te,re=l.keepIframeSrcFn,ie=void 0===re?function(){return!1}:re,ae=l.newlyAddedElement,oe=void 0!==ae&&ae,se=l.needsMask,ue=l.preserveWhiteSpace,le=void 0===ue||ue;se||(se=needMaskingText(e,T,M,void 0===se));var ce,he=serializeNode(e,{doc:_,mirror:S,blockClass:E,blockSelector:k,needsMask:se,inlineStylesheet:L,maskInputOptions:B,maskTextFn:z,maskInputFn:G,dataURLOptions:W,inlineImages:X,recordCanvas:Y,keepIframeSrcFn:ie,newlyAddedElement:oe});if(!he)return null;ce=S.hasNode(e)?S.getId(e):!function(e,l){if(l.comment&&e.type===O.Comment)return!0;if(e.type===O.Element){if(l.script&&("script"===e.tagName||"link"===e.tagName&&("preload"===e.attributes.rel||"modulepreload"===e.attributes.rel)&&"script"===e.attributes.as||"link"===e.tagName&&"prefetch"===e.attributes.rel&&"string"==typeof e.attributes.href&&"js"===extractFileExtension(e.attributes.href)))return!0;if(l.headFavicon&&("link"===e.tagName&&"shortcut icon"===e.attributes.rel||"meta"===e.tagName&&(lowerIfExists(e.attributes.name).match(/^msapplication-tile(image|color)$/)||"application-name"===lowerIfExists(e.attributes.name)||"icon"===lowerIfExists(e.attributes.rel)||"apple-touch-icon"===lowerIfExists(e.attributes.rel)||"shortcut icon"===lowerIfExists(e.attributes.rel))))return!0;if("meta"===e.tagName){if(l.headMetaDescKeywords&&lowerIfExists(e.attributes.name).match(/^description|keywords$/))return!0;if(l.headMetaSocial&&(lowerIfExists(e.attributes.property).match(/^(og|twitter|fb):/)||lowerIfExists(e.attributes.name).match(/^(og|twitter):/)||"pinterest"===lowerIfExists(e.attributes.name)))return!0;if(l.headMetaRobots&&("robots"===lowerIfExists(e.attributes.name)||"googlebot"===lowerIfExists(e.attributes.name)||"bingbot"===lowerIfExists(e.attributes.name)))return!0;if(l.headMetaHttpEquiv&&void 0!==e.attributes["http-equiv"])return!0;if(l.headMetaAuthorship&&("author"===lowerIfExists(e.attributes.name)||"generator"===lowerIfExists(e.attributes.name)||"framework"===lowerIfExists(e.attributes.name)||"publisher"===lowerIfExists(e.attributes.name)||"progid"===lowerIfExists(e.attributes.name)||lowerIfExists(e.attributes.property).match(/^article:/)||lowerIfExists(e.attributes.property).match(/^product:/)))return!0;if(l.headMetaVerification&&("google-site-verification"===lowerIfExists(e.attributes.name)||"yandex-verification"===lowerIfExists(e.attributes.name)||"csrf-token"===lowerIfExists(e.attributes.name)||"p:domain_verify"===lowerIfExists(e.attributes.name)||"verify-v1"===lowerIfExists(e.attributes.name)||"verification"===lowerIfExists(e.attributes.name)||"shopify-checkout-api-token"===lowerIfExists(e.attributes.name)))return!0}}return!1}(he,H)&&(le||he.type!==O.Text||he.isStyle||he.textContent.replace(/^\s+|\s+$/gm,"").length)?genId():-2;var de=Object.assign(he,{id:ce});if(S.add(e,de),-2===ce)return null;J&&J(e);var fe=!I;if(de.type===O.Element){fe=fe&&!de.needBlock,delete de.needBlock;var pe=j.shadowRoot(e);pe&&isNativeShadowDom(pe)&&(de.isShadowHost=!0)}if((de.type===O.Document||de.type===O.Element)&&fe){H.headWhitespace&&de.type===O.Element&&"head"===de.tagName&&(le=!1);var ve={doc:_,mirror:S,blockClass:E,blockSelector:k,needsMask:se,maskTextClass:T,maskTextSelector:M,skipChild:I,inlineStylesheet:L,maskInputOptions:B,maskTextFn:z,maskInputFn:G,slimDOMOptions:H,dataURLOptions:W,inlineImages:X,recordCanvas:Y,preserveWhiteSpace:le,onSerialize:J,onIframeLoad:Q,iframeLoadTimeout:$,onStylesheetLoad:ee,stylesheetLoadTimeout:ne,keepIframeSrcFn:ie};if(de.type===O.Element&&"textarea"===de.tagName&&void 0!==de.attributes.value);else for(var ge=0,me=Array.from(j.childNodes(e));ge<me.length;ge++){var ye=serializeNodeWithId(me[ge],ve);ye&&de.childNodes.push(ye)}var _e=null;if(isElement(e)&&(_e=j.shadowRoot(e)))for(var be=0,Se=Array.from(j.childNodes(_e));be<Se.length;be++){var we=serializeNodeWithId(Se[be],ve);we&&(isNativeShadowDom(_e)&&(we.isShadow=!0),de.childNodes.push(we))}}var xe=j.parentNode(e);return xe&&isShadowRoot(xe)&&isNativeShadowDom(xe)&&(de.isShadow=!0),de.type===O.Element&&"iframe"===de.tagName&&function(e,l,_){var S=e.contentWindow;if(S){var E,k=!1;try{E=S.document.readyState}catch(R){return}if("complete"===E){var T="about:blank";if(S.location.href!==T||e.src===T||""===e.src)return setTimeout(l,0),e.addEventListener("load",l);e.addEventListener("load",l)}else{var M=setTimeout(function(){k||(l(),k=!0)},_);e.addEventListener("load",function(){clearTimeout(M),k=!0,l()})}}}(e,function(){var l=e.contentDocument;if(l&&Q){var _=serializeNodeWithId(l,{doc:l,mirror:S,blockClass:E,blockSelector:k,needsMask:se,maskTextClass:T,maskTextSelector:M,skipChild:!1,inlineStylesheet:L,maskInputOptions:B,maskTextFn:z,maskInputFn:G,slimDOMOptions:H,dataURLOptions:W,inlineImages:X,recordCanvas:Y,preserveWhiteSpace:le,onSerialize:J,onIframeLoad:Q,iframeLoadTimeout:$,onStylesheetLoad:ee,stylesheetLoadTimeout:ne,keepIframeSrcFn:ie});_&&Q(e,_)}},$),de.type===O.Element&&"link"===de.tagName&&"string"==typeof de.attributes.rel&&("stylesheet"===de.attributes.rel||"preload"===de.attributes.rel&&"string"==typeof de.attributes.href&&"css"===extractFileExtension(de.attributes.href))&&function(e,l,_){var S,E=!1;try{S=e.sheet}catch(T){return}if(!S){var k=setTimeout(function(){E||(l(),E=!0)},_);e.addEventListener("load",function(){clearTimeout(k),E=!0,l()})}}(e,function(){if(ee){var l=serializeNodeWithId(e,{doc:_,mirror:S,blockClass:E,blockSelector:k,needsMask:se,maskTextClass:T,maskTextSelector:M,skipChild:!1,inlineStylesheet:L,maskInputOptions:B,maskTextFn:z,maskInputFn:G,slimDOMOptions:H,dataURLOptions:W,inlineImages:X,recordCanvas:Y,preserveWhiteSpace:le,onSerialize:J,onIframeLoad:Q,iframeLoadTimeout:$,onStylesheetLoad:ee,stylesheetLoadTimeout:ne,keepIframeSrcFn:ie});l&&ee(e,l)}},ne),de}function getDefaultExportFromCjs$1(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function getAugmentedNamespace$1(e){if(e.__esModule)return e;var l=e.default;if("function"==typeof l){var _=function a22(){return this instanceof a22?Reflect.construct(l,arguments,this.constructor):l.apply(this,arguments)};_.prototype=l.prototype}else _={};return Object.defineProperty(_,"__esModule",{value:!0}),Object.keys(e).forEach(function(l){var S=Object.getOwnPropertyDescriptor(e,l);Object.defineProperty(_,l,S.get?S:{enumerable:!0,get:function(){return e[l]}})}),_}var te={exports:{}},ne=String,create$1=function(){return{isColorSupported:!1,reset:ne,bold:ne,dim:ne,italic:ne,underline:ne,inverse:ne,hidden:ne,strikethrough:ne,black:ne,red:ne,green:ne,yellow:ne,blue:ne,magenta:ne,cyan:ne,white:ne,gray:ne,bgBlack:ne,bgRed:ne,bgGreen:ne,bgYellow:ne,bgBlue:ne,bgMagenta:ne,bgCyan:ne,bgWhite:ne}};te.exports=create$1(),te.exports.createColors=create$1;var re=te.exports,ie=getAugmentedNamespace$1(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"}))),ae=re,oe=ie,se=function(e){function CssSyntaxError(e,l,_,S,E,k){var T;return _classCallCheck3(this,CssSyntaxError),(T=_callSuper(this,CssSyntaxError,[e])).name="CssSyntaxError",T.reason=e,E&&(T.file=E),S&&(T.source=S),k&&(T.plugin=k),void 0!==l&&void 0!==_&&("number"==typeof l?(T.line=l,T.column=_):(T.line=l.line,T.column=l.column,T.endLine=_.line,T.endColumn=_.column)),T.setMessage(),Error.captureStackTrace&&Error.captureStackTrace(T,CssSyntaxError),T}return _inherits(CssSyntaxError,e),_createClass3(CssSyntaxError,[{key:"setMessage",value:function(){this.message=this.plugin?this.plugin+": ":"",this.message+=this.file?this.file:"<css input>",void 0!==this.line&&(this.message+=":"+this.line+":"+this.column),this.message+=": "+this.reason}},{key:"showSourceCode",value:function(e){var l=this;if(!this.source)return"";var _=this.source;null==e&&(e=ae.isColorSupported),oe&&e&&(_=oe(_));var S,E,k=_.split(/\r?\n/),T=Math.max(this.line-3,0),M=Math.min(this.line+2,k.length),R=String(M).length;if(e){var I=ae.createColors(!0),O=I.bold,D=I.gray,L=I.red;S=function(e){return O(L(e))},E=function(e){return D(e)}}else S=E=function(e){return e};return k.slice(T,M).map(function(e,_){var k=T+1+_,M=" "+(" "+k).slice(-R)+" | ";if(k===l.line){var I=E(M.replace(/\d/g," "))+e.slice(0,l.column-1).replace(/[^\t]/g," ");return S(">")+E(M)+e+"\n "+I+S("^")}return" "+E(M)+e}).join("\n")}},{key:"toString",value:function(){var e=this.showSourceCode();return e&&(e="\n\n"+e+"\n"),this.name+": "+this.message+e}}])}(_wrapNativeSuper(Error)),ue=se;se.default=se;var le={};le.isClean=Symbol("isClean"),le.my=Symbol("my");var ce={after:"\n",beforeClose:"\n",beforeComment:"\n",beforeDecl:"\n",beforeOpen:" ",beforeRule:"\n",colon:": ",commentLeft:" ",commentRight:" ",emptyBody:"",indent:"    ",semicolon:!1};var he=function(){return _createClass3(function Stringifier(e){_classCallCheck3(this,Stringifier),this.builder=e},[{key:"atrule",value:function(e,l){var _="@"+e.name,S=e.params?this.rawValue(e,"params"):"";if(void 0!==e.raws.afterName?_+=e.raws.afterName:S&&(_+=" "),e.nodes)this.block(e,_+S);else{var E=(e.raws.between||"")+(l?";":"");this.builder(_+S+E,e)}}},{key:"beforeAfter",value:function(e,l){var _;_="decl"===e.type?this.raw(e,null,"beforeDecl"):"comment"===e.type?this.raw(e,null,"beforeComment"):"before"===l?this.raw(e,null,"beforeRule"):this.raw(e,null,"beforeClose");for(var S=e.parent,E=0;S&&"root"!==S.type;)E+=1,S=S.parent;if(_.includes("\n")){var k=this.raw(e,null,"indent");if(k.length)for(var T=0;T<E;T++)_+=k}return _}},{key:"block",value:function(e,l){var _,S=this.raw(e,"between","beforeOpen");this.builder(l+S+"{",e,"start"),e.nodes&&e.nodes.length?(this.body(e),_=this.raw(e,"after")):_=this.raw(e,"after","emptyBody"),_&&this.builder(_),this.builder("}",e,"end")}},{key:"body",value:function(e){for(var l=e.nodes.length-1;l>0&&"comment"===e.nodes[l].type;)l-=1;for(var _=this.raw(e,"semicolon"),S=0;S<e.nodes.length;S++){var E=e.nodes[S],k=this.raw(E,"before");k&&this.builder(k),this.stringify(E,l!==S||_)}}},{key:"comment",value:function(e){var l=this.raw(e,"left","commentLeft"),_=this.raw(e,"right","commentRight");this.builder("/*"+l+e.text+_+"*/",e)}},{key:"decl",value:function(e,l){var _=this.raw(e,"between","colon"),S=e.prop+_+this.rawValue(e,"value");e.important&&(S+=e.raws.important||" !important"),l&&(S+=";"),this.builder(S,e)}},{key:"document",value:function(e){this.body(e)}},{key:"raw",value:function(e,l,_){var S;if(_||(_=l),l&&void 0!==(S=e.raws[l]))return S;var E=e.parent;if("before"===_){if(!E||"root"===E.type&&E.first===e)return"";if(E&&"document"===E.type)return""}if(!E)return ce[_];var k=e.root();if(k.rawCache||(k.rawCache={}),void 0!==k.rawCache[_])return k.rawCache[_];if("before"===_||"after"===_)return this.beforeAfter(e,_);var T,M="raw"+((T=_)[0].toUpperCase()+T.slice(1));return this[M]?S=this[M](k,e):k.walk(function(e){if(void 0!==(S=e.raws[l]))return!1}),void 0===S&&(S=ce[_]),k.rawCache[_]=S,S}},{key:"rawBeforeClose",value:function(e){var l;return e.walk(function(e){if(e.nodes&&e.nodes.length>0&&void 0!==e.raws.after)return(l=e.raws.after).includes("\n")&&(l=l.replace(/[^\n]+$/,"")),!1}),l&&(l=l.replace(/\S/g,"")),l}},{key:"rawBeforeComment",value:function(e,l){var _;return e.walkComments(function(e){if(void 0!==e.raws.before)return(_=e.raws.before).includes("\n")&&(_=_.replace(/[^\n]+$/,"")),!1}),void 0===_?_=this.raw(l,null,"beforeDecl"):_&&(_=_.replace(/\S/g,"")),_}},{key:"rawBeforeDecl",value:function(e,l){var _;return e.walkDecls(function(e){if(void 0!==e.raws.before)return(_=e.raws.before).includes("\n")&&(_=_.replace(/[^\n]+$/,"")),!1}),void 0===_?_=this.raw(l,null,"beforeRule"):_&&(_=_.replace(/\S/g,"")),_}},{key:"rawBeforeOpen",value:function(e){var l;return e.walk(function(e){if("decl"!==e.type&&void 0!==(l=e.raws.between))return!1}),l}},{key:"rawBeforeRule",value:function(e){var l;return e.walk(function(_){if(_.nodes&&(_.parent!==e||e.first!==_)&&void 0!==_.raws.before)return(l=_.raws.before).includes("\n")&&(l=l.replace(/[^\n]+$/,"")),!1}),l&&(l=l.replace(/\S/g,"")),l}},{key:"rawColon",value:function(e){var l;return e.walkDecls(function(e){if(void 0!==e.raws.between)return l=e.raws.between.replace(/[^\s:]/g,""),!1}),l}},{key:"rawEmptyBody",value:function(e){var l;return e.walk(function(e){if(e.nodes&&0===e.nodes.length&&void 0!==(l=e.raws.after))return!1}),l}},{key:"rawIndent",value:function(e){return e.raws.indent?e.raws.indent:(e.walk(function(_){var S=_.parent;if(S&&S!==e&&S.parent&&S.parent===e&&void 0!==_.raws.before){var E=_.raws.before.split("\n");return l=(l=E[E.length-1]).replace(/\S/g,""),!1}}),l);var l}},{key:"rawSemicolon",value:function(e){var l;return e.walk(function(e){if(e.nodes&&e.nodes.length&&"decl"===e.last.type&&void 0!==(l=e.raws.semicolon))return!1}),l}},{key:"rawValue",value:function(e,l){var _=e[l],S=e.raws[l];return S&&S.value===_?S.raw:_}},{key:"root",value:function(e){this.body(e),e.raws.after&&this.builder(e.raws.after)}},{key:"rule",value:function(e){this.block(e,this.rawValue(e,"selector")),e.raws.ownSemicolon&&this.builder(e.raws.ownSemicolon,e,"end")}},{key:"stringify",value:function(e,l){if(!this[e.type])throw new Error("Unknown AST node type "+e.type+". Maybe you need to change PostCSS stringifier.");this[e.type](e,l)}}])}(),de=he;he.default=he;var fe=de;function stringify$4$1(e,l){new fe(l).stringify(e)}var pe=stringify$4$1;stringify$4$1.default=stringify$4$1;var ve=le.isClean,ge=le.my,me=ue,ye=de,_e=pe;function cloneNode$1(e,l){var _=new e.constructor;for(var S in e)if(Object.prototype.hasOwnProperty.call(e,S)&&"proxyCache"!==S){var E=e[S],k=_typeof3(E);"parent"===S&&"object"===k?l&&(_[S]=l):"source"===S?_[S]=E:Array.isArray(E)?_[S]=E.map(function(e){return cloneNode$1(e,_)}):("object"===k&&null!==E&&(E=cloneNode$1(E)),_[S]=E)}return _}var be=function(){return _createClass3(function Node2(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(var l in _classCallCheck3(this,Node2),this.raws={},this[ve]=!1,this[ge]=!0,e)if("nodes"===l){this.nodes=[];var _,S=_createForOfIteratorHelper2(e[l]);try{for(S.s();!(_=S.n()).done;){var E=_.value;"function"==typeof E.clone?this.append(E.clone()):this.append(E)}}catch(k){S.e(k)}finally{S.f()}}else this[l]=e[l]},[{key:"addToError",value:function(e){if(e.postcssNode=this,e.stack&&this.source&&/\n\s{4}at /.test(e.stack)){var l=this.source;e.stack=e.stack.replace(/\n\s{4}at /,"$&".concat(l.input.from,":").concat(l.start.line,":").concat(l.start.column,"$&"))}return e}},{key:"after",value:function(e){return this.parent.insertAfter(this,e),this}},{key:"assign",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(var l in e)this[l]=e[l];return this}},{key:"before",value:function(e){return this.parent.insertBefore(this,e),this}},{key:"cleanRaws",value:function(e){delete this.raws.before,delete this.raws.after,e||delete this.raws.between}},{key:"clone",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=cloneNode$1(this);for(var _ in e)l[_]=e[_];return l}},{key:"cloneAfter",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=this.clone(e);return this.parent.insertAfter(this,l),l}},{key:"cloneBefore",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=this.clone(e);return this.parent.insertBefore(this,l),l}},{key:"error",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.source){var _=this.rangeBy(l),S=_.end,E=_.start;return this.source.input.error(e,{column:E.column,line:E.line},{column:S.column,line:S.line},l)}return new me(e)}},{key:"getProxyProcessor",value:function(){return{get:function(e,l){return"proxyOf"===l?e:"root"===l?function(){return e.root().toProxy()}:e[l]},set:function(e,l,_){return e[l]===_||(e[l]=_,"prop"!==l&&"value"!==l&&"name"!==l&&"params"!==l&&"important"!==l&&"text"!==l||e.markDirty()),!0}}}},{key:"markDirty",value:function(){if(this[ve]){this[ve]=!1;for(var e=this;e=e.parent;)e[ve]=!1}}},{key:"next",value:function(){if(this.parent){var e=this.parent.index(this);return this.parent.nodes[e+1]}}},{key:"positionBy",value:function(e,l){var _=this.source.start;if(e.index)_=this.positionInside(e.index,l);else if(e.word){var S=(l=this.toString()).indexOf(e.word);-1!==S&&(_=this.positionInside(S,l))}return _}},{key:"positionInside",value:function(e,l){for(var _=l||this.toString(),S=this.source.start.column,E=this.source.start.line,k=0;k<e;k++)"\n"===_[k]?(S=1,E+=1):S+=1;return{column:S,line:E}}},{key:"prev",value:function(){if(this.parent){var e=this.parent.index(this);return this.parent.nodes[e-1]}}},{key:"rangeBy",value:function(e){var l={column:this.source.start.column,line:this.source.start.line},_=this.source.end?{column:this.source.end.column+1,line:this.source.end.line}:{column:l.column+1,line:l.line};if(e.word){var S=this.toString(),E=S.indexOf(e.word);-1!==E&&(l=this.positionInside(E,S),_=this.positionInside(E+e.word.length,S))}else e.start?l={column:e.start.column,line:e.start.line}:e.index&&(l=this.positionInside(e.index)),e.end?_={column:e.end.column,line:e.end.line}:"number"==typeof e.endIndex?_=this.positionInside(e.endIndex):e.index&&(_=this.positionInside(e.index+1));return(_.line<l.line||_.line===l.line&&_.column<=l.column)&&(_={column:l.column+1,line:l.line}),{end:_,start:l}}},{key:"raw",value:function(e,l){return(new ye).raw(this,e,l)}},{key:"remove",value:function(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this}},{key:"replaceWith",value:function(){if(this.parent){for(var e=this,l=!1,_=arguments.length,S=new Array(_),E=0;E<_;E++)S[E]=arguments[E];for(var k=0,T=S;k<T.length;k++){var M=T[k];M===this?l=!0:l?(this.parent.insertAfter(e,M),e=M):this.parent.insertBefore(e,M)}l||this.remove()}return this}},{key:"root",value:function(){for(var e=this;e.parent&&"document"!==e.parent.type;)e=e.parent;return e}},{key:"toJSON",value:function(e,l){var _={},S=null==l;l=l||new Map;var E=0;for(var k in this)if(Object.prototype.hasOwnProperty.call(this,k)&&"parent"!==k&&"proxyCache"!==k){var T=this[k];if(Array.isArray(T))_[k]=T.map(function(e){return"object"===_typeof3(e)&&e.toJSON?e.toJSON(null,l):e});else if("object"===_typeof3(T)&&T.toJSON)_[k]=T.toJSON(null,l);else if("source"===k){var M=l.get(T.input);null==M&&(M=E,l.set(T.input,E),E++),_[k]={end:T.end,inputId:M,start:T.start}}else _[k]=T}return S&&(_.inputs=_toConsumableArray3(l.keys()).map(function(e){return e.toJSON()})),_}},{key:"toProxy",value:function(){return this.proxyCache||(this.proxyCache=new Proxy(this,this.getProxyProcessor())),this.proxyCache}},{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_e;e.stringify&&(e=e.stringify);var l="";return e(this,function(e){l+=e}),l}},{key:"warn",value:function(e,l,_){var S={node:this};for(var E in _)S[E]=_[E];return e.warn(l,S)}},{key:"proxyOf",get:function(){return this}}])}(),Se=be;be.default=be;var we=function(e){function Declaration(e){var l;return _classCallCheck3(this,Declaration),e&&void 0!==e.value&&"string"!=typeof e.value&&(e=_objectSpread2(_objectSpread2({},e),{},{value:String(e.value)})),(l=_callSuper(this,Declaration,[e])).type="decl",l}return _inherits(Declaration,e),_createClass3(Declaration,[{key:"variable",get:function(){return this.prop.startsWith("--")||"$"===this.prop[0]}}])}(Se),xe=we;we.default=we;var nonSecure$1_nanoid=function(){for(var e="",l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:21;l--;)e+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[64*Math.random()|0];return e},Ee=ie.SourceMapConsumer,ke=ie.SourceMapGenerator,Ae=ie.existsSync,Ce=ie.readFileSync,Te=ie.dirname,Me=ie.join;var Re=function(){return _createClass3(function PreviousMap(e,l){if(_classCallCheck3(this,PreviousMap),!1!==l.map){this.loadAnnotation(e),this.inline=this.startWith(this.annotation,"data:");var _=l.map?l.map.prev:void 0,S=this.loadMap(l.from,_);!this.mapFile&&l.from&&(this.mapFile=l.from),this.mapFile&&(this.root=Te(this.mapFile)),S&&(this.text=S)}},[{key:"consumer",value:function(){return this.consumerCache||(this.consumerCache=new Ee(this.text)),this.consumerCache}},{key:"decodeInline",value:function(e){var l;if(/^data:application\/json;charset=utf-?8,/.test(e)||/^data:application\/json,/.test(e))return decodeURIComponent(e.substr(RegExp.lastMatch.length));if(/^data:application\/json;charset=utf-?8;base64,/.test(e)||/^data:application\/json;base64,/.test(e))return l=e.substr(RegExp.lastMatch.length),Buffer?Buffer.from(l,"base64").toString():window.atob(l);var _=e.match(/data:application\/json;([^,]+),/)[1];throw new Error("Unsupported source map encoding "+_)}},{key:"getAnnotationURL",value:function(e){return e.replace(/^\/\*\s*# sourceMappingURL=/,"").trim()}},{key:"isMap",value:function(e){return"object"===_typeof3(e)&&("string"==typeof e.mappings||"string"==typeof e._mappings||Array.isArray(e.sections))}},{key:"loadAnnotation",value:function(e){var l=e.match(/\/\*\s*# sourceMappingURL=/gm);if(l){var _=e.lastIndexOf(l.pop()),S=e.indexOf("*/",_);_>-1&&S>-1&&(this.annotation=this.getAnnotationURL(e.substring(_,S)))}}},{key:"loadFile",value:function(e){if(this.root=Te(e),Ae(e))return this.mapFile=e,Ce(e,"utf-8").toString().trim()}},{key:"loadMap",value:function(e,l){if(!1===l)return!1;if(l){if("string"==typeof l)return l;if("function"!=typeof l){if(l instanceof Ee)return ke.fromSourceMap(l).toString();if(l instanceof ke)return l.toString();if(this.isMap(l))return JSON.stringify(l);throw new Error("Unsupported previous source map format: "+l.toString())}var _=l(e);if(_){var S=this.loadFile(_);if(!S)throw new Error("Unable to load previous source map: "+_.toString());return S}}else{if(this.inline)return this.decodeInline(this.annotation);if(this.annotation){var E=this.annotation;return e&&(E=Me(Te(e),E)),this.loadFile(E)}}}},{key:"startWith",value:function(e,l){return!!e&&e.substr(0,l.length)===l}},{key:"withContent",value:function(){return!!(this.consumer().sourcesContent&&this.consumer().sourcesContent.length>0)}}])}(),Ie=Re;Re.default=Re;var Pe=ie.SourceMapConsumer,Oe=ie.SourceMapGenerator,De=ie.fileURLToPath,Le=ie.pathToFileURL,Ue=ie.isAbsolute,Fe=ie.resolve,Ne=nonSecure$1_nanoid,Be=ie,ze=ue,je=Ie,Ge=Symbol("fromOffsetCache"),He=Boolean(Pe&&Oe),Ve=Boolean(Fe&&Ue),We=function(){return _createClass3(function Input(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(_classCallCheck3(this,Input),null==e||"object"===_typeof3(e)&&!e.toString)throw new Error("PostCSS received ".concat(e," instead of CSS string"));if(this.css=e.toString(),"\ufeff"===this.css[0]||""===this.css[0]?(this.hasBOM=!0,this.css=this.css.slice(1)):this.hasBOM=!1,l.from&&(!Ve||/^\w+:\/\//.test(l.from)||Ue(l.from)?this.file=l.from:this.file=Fe(l.from)),Ve&&He){var _=new je(this.css,l);if(_.text){this.map=_;var S=_.consumer().file;!this.file&&S&&(this.file=this.mapResolve(S))}}this.file||(this.id="<input css "+Ne(6)+">"),this.map&&(this.map.file=this.from)},[{key:"error",value:function(e,l,_){var S,E,k,T=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(l&&"object"===_typeof3(l)){var M=l,R=_;if("number"==typeof M.offset){var I=this.fromOffset(M.offset);l=I.line,_=I.col}else l=M.line,_=M.column;if("number"==typeof R.offset){var O=this.fromOffset(R.offset);E=O.line,k=O.col}else E=R.line,k=R.column}else if(!_){var D=this.fromOffset(l);l=D.line,_=D.col}var L=this.origin(l,_,E,k);return(S=L?new ze(e,void 0===L.endLine?L.line:{column:L.column,line:L.line},void 0===L.endLine?L.column:{column:L.endColumn,line:L.endLine},L.source,L.file,T.plugin):new ze(e,void 0===E?l:{column:_,line:l},void 0===E?_:{column:k,line:E},this.css,this.file,T.plugin)).input={column:_,endColumn:k,endLine:E,line:l,source:this.css},this.file&&(Le&&(S.input.url=Le(this.file).toString()),S.input.file=this.file),S}},{key:"fromOffset",value:function(e){var l;if(this[Ge])l=this[Ge];else{var _=this.css.split("\n");l=new Array(_.length);for(var S=0,E=0,k=_.length;E<k;E++)l[E]=S,S+=_[E].length+1;this[Ge]=l}var T=0;if(e>=l[l.length-1])T=l.length-1;else for(var M,R=l.length-2;T<R;)if(e<l[M=T+(R-T>>1)])R=M-1;else{if(!(e>=l[M+1])){T=M;break}T=M+1}return{col:e-l[T]+1,line:T+1}}},{key:"mapResolve",value:function(e){return/^\w+:\/\//.test(e)?e:Fe(this.map.consumer().sourceRoot||this.map.root||".",e)}},{key:"origin",value:function(e,l,_,S){if(!this.map)return!1;var E,k,T=this.map.consumer(),M=T.originalPositionFor({column:l,line:e});if(!M.source)return!1;"number"==typeof _&&(E=T.originalPositionFor({column:S,line:_})),k=Ue(M.source)?Le(M.source):new URL(M.source,this.map.consumer().sourceRoot||Le(this.map.mapFile));var R={column:M.column,endColumn:E&&E.column,endLine:E&&E.line,line:M.line,url:k.toString()};if("file:"===k.protocol){if(!De)throw new Error("file: protocol is not available in this PostCSS build");R.file=De(k)}var I=T.sourceContentFor(M.source);return I&&(R.source=I),R}},{key:"toJSON",value:function(){for(var e={},l=0,_=["hasBOM","css","file","id"];l<_.length;l++){var S=_[l];null!=this[S]&&(e[S]=this[S])}return this.map&&(e.map=_objectSpread2({},this.map),e.map.consumerCache&&(e.map.consumerCache=void 0)),e}},{key:"from",get:function(){return this.file||this.id}}])}(),qe=We;We.default=We,Be&&Be.registerInput&&Be.registerInput(We);var Xe=ie.SourceMapConsumer,Ke=ie.SourceMapGenerator,Ye=ie.dirname,Je=ie.relative,Qe=ie.resolve,Ze=ie.sep,$e=ie.pathToFileURL,et=qe,tt=Boolean(Xe&&Ke),nt=Boolean(Ye&&Qe&&Je&&Ze),rt=function(){return _createClass3(function MapGenerator(e,l,_,S){_classCallCheck3(this,MapGenerator),this.stringify=e,this.mapOpts=_.map||{},this.root=l,this.opts=_,this.css=S,this.originalCSS=S,this.usesFileUrls=!this.mapOpts.from&&this.mapOpts.absolute,this.memoizedFileURLs=new Map,this.memoizedPaths=new Map,this.memoizedURLs=new Map},[{key:"addAnnotation",value:function(){var e;e=this.isInline()?"data:application/json;base64,"+this.toBase64(this.map.toString()):"string"==typeof this.mapOpts.annotation?this.mapOpts.annotation:"function"==typeof this.mapOpts.annotation?this.mapOpts.annotation(this.opts.to,this.root):this.outputFile()+".map";var l="\n";this.css.includes("\r\n")&&(l="\r\n"),this.css+=l+"/*# sourceMappingURL="+e+" */"}},{key:"applyPrevMaps",value:function(){var e,l=_createForOfIteratorHelper2(this.previous());try{for(l.s();!(e=l.n()).done;){var _=e.value,S=this.toUrl(this.path(_.file)),E=_.root||Ye(_.file),k=void 0;!1===this.mapOpts.sourcesContent?(k=new Xe(_.text)).sourcesContent&&(k.sourcesContent=null):k=_.consumer(),this.map.applySourceMap(k,S,this.toUrl(this.path(E)))}}catch(T){l.e(T)}finally{l.f()}}},{key:"clearAnnotation",value:function(){if(!1!==this.mapOpts.annotation)if(this.root)for(var e,l=this.root.nodes.length-1;l>=0;l--)"comment"===(e=this.root.nodes[l]).type&&0===e.text.indexOf("# sourceMappingURL=")&&this.root.removeChild(l);else this.css&&(this.css=this.css.replace(/\n*?\/\*#[\S\s]*?\*\/$/gm,""))}},{key:"generate",value:function(){if(this.clearAnnotation(),nt&&tt&&this.isMap())return this.generateMap();var e="";return this.stringify(this.root,function(l){e+=l}),[e]}},{key:"generateMap",value:function(){if(this.root)this.generateString();else if(1===this.previous().length){var e=this.previous()[0].consumer();e.file=this.outputFile(),this.map=Ke.fromSourceMap(e,{ignoreInvalidMapping:!0})}else this.map=new Ke({file:this.outputFile(),ignoreInvalidMapping:!0}),this.map.addMapping({generated:{column:0,line:1},original:{column:0,line:1},source:this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>"});return this.isSourcesContent()&&this.setSourcesContent(),this.root&&this.previous().length>0&&this.applyPrevMaps(),this.isAnnotation()&&this.addAnnotation(),this.isInline()?[this.css]:[this.css,this.map]}},{key:"generateString",value:function(){var e=this;this.css="",this.map=new Ke({file:this.outputFile(),ignoreInvalidMapping:!0});var l,_,S=1,E=1,k="<no source>",T={generated:{column:0,line:0},original:{column:0,line:0},source:""};this.stringify(this.root,function(M,R,I){if(e.css+=M,R&&"end"!==I&&(T.generated.line=S,T.generated.column=E-1,R.source&&R.source.start?(T.source=e.sourcePath(R),T.original.line=R.source.start.line,T.original.column=R.source.start.column-1,e.map.addMapping(T)):(T.source=k,T.original.line=1,T.original.column=0,e.map.addMapping(T))),(l=M.match(/\n/g))?(S+=l.length,_=M.lastIndexOf("\n"),E=M.length-_):E+=M.length,R&&"start"!==I){var O=R.parent||{raws:{}};("decl"===R.type||"atrule"===R.type&&!R.nodes)&&R===O.last&&!O.raws.semicolon||(R.source&&R.source.end?(T.source=e.sourcePath(R),T.original.line=R.source.end.line,T.original.column=R.source.end.column-1,T.generated.line=S,T.generated.column=E-2,e.map.addMapping(T)):(T.source=k,T.original.line=1,T.original.column=0,T.generated.line=S,T.generated.column=E-1,e.map.addMapping(T)))}})}},{key:"isAnnotation",value:function(){return!!this.isInline()||(void 0!==this.mapOpts.annotation?this.mapOpts.annotation:!this.previous().length||this.previous().some(function(e){return e.annotation}))}},{key:"isInline",value:function(){if(void 0!==this.mapOpts.inline)return this.mapOpts.inline;var e=this.mapOpts.annotation;return(void 0===e||!0===e)&&(!this.previous().length||this.previous().some(function(e){return e.inline}))}},{key:"isMap",value:function(){return void 0!==this.opts.map?!!this.opts.map:this.previous().length>0}},{key:"isSourcesContent",value:function(){return void 0!==this.mapOpts.sourcesContent?this.mapOpts.sourcesContent:!this.previous().length||this.previous().some(function(e){return e.withContent()})}},{key:"outputFile",value:function(){return this.opts.to?this.path(this.opts.to):this.opts.from?this.path(this.opts.from):"to.css"}},{key:"path",value:function(e){if(this.mapOpts.absolute)return e;if(60===e.charCodeAt(0))return e;if(/^\w+:\/\//.test(e))return e;var l=this.memoizedPaths.get(e);if(l)return l;var _=this.opts.to?Ye(this.opts.to):".";"string"==typeof this.mapOpts.annotation&&(_=Ye(Qe(_,this.mapOpts.annotation)));var S=Je(_,e);return this.memoizedPaths.set(e,S),S}},{key:"previous",value:function(){var e=this;if(!this.previousMaps)if(this.previousMaps=[],this.root)this.root.walk(function(l){if(l.source&&l.source.input.map){var _=l.source.input.map;e.previousMaps.includes(_)||e.previousMaps.push(_)}});else{var l=new et(this.originalCSS,this.opts);l.map&&this.previousMaps.push(l.map)}return this.previousMaps}},{key:"setSourcesContent",value:function(){var e=this,l={};if(this.root)this.root.walk(function(_){if(_.source){var S=_.source.input.from;if(S&&!l[S]){l[S]=!0;var E=e.usesFileUrls?e.toFileUrl(S):e.toUrl(e.path(S));e.map.setSourceContent(E,_.source.input.css)}}});else if(this.css){var _=this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>";this.map.setSourceContent(_,this.css)}}},{key:"sourcePath",value:function(e){return this.mapOpts.from?this.toUrl(this.mapOpts.from):this.usesFileUrls?this.toFileUrl(e.source.input.from):this.toUrl(this.path(e.source.input.from))}},{key:"toBase64",value:function(e){return Buffer?Buffer.from(e).toString("base64"):window.btoa(unescape(encodeURIComponent(e)))}},{key:"toFileUrl",value:function(e){var l=this.memoizedFileURLs.get(e);if(l)return l;if($e){var _=$e(e).toString();return this.memoizedFileURLs.set(e,_),_}throw new Error("`map.absolute` option is not available in this PostCSS build")}},{key:"toUrl",value:function(e){var l=this.memoizedURLs.get(e);if(l)return l;"\\"===Ze&&(e=e.replace(/\\/g,"/"));var _=encodeURI(e).replace(/[#?]/g,encodeURIComponent);return this.memoizedURLs.set(e,_),_}}])}(),it=function(e){function Comment(e){var l;return _classCallCheck3(this,Comment),(l=_callSuper(this,Comment,[e])).type="comment",l}return _inherits(Comment,e),_createClass3(Comment)}(Se),at=it;it.default=it;var ot,st,ut,lt,ct=le.isClean,ht=le.my,dt=xe,ft=at;function cleanSource$1(e){return e.map(function(e){return e.nodes&&(e.nodes=cleanSource$1(e.nodes)),delete e.source,e})}function markDirtyUp$1(e){if(e[ct]=!1,e.proxyOf.nodes){var l,_=_createForOfIteratorHelper2(e.proxyOf.nodes);try{for(_.s();!(l=_.n()).done;){markDirtyUp$1(l.value)}}catch(S){_.e(S)}finally{_.f()}}}var pt=function(e){function Container(){return _classCallCheck3(this,Container),_callSuper(this,Container,arguments)}return _inherits(Container,e),_createClass3(Container,[{key:"append",value:function(){for(var e=arguments.length,l=new Array(e),_=0;_<e;_++)l[_]=arguments[_];for(var S=0,E=l;S<E.length;S++){var k,T=E[S],M=_createForOfIteratorHelper2(this.normalize(T,this.last));try{for(M.s();!(k=M.n()).done;){var R=k.value;this.proxyOf.nodes.push(R)}}catch(I){M.e(I)}finally{M.f()}}return this.markDirty(),this}},{key:"cleanRaws",value:function(e){if(_superPropGet(Container,"cleanRaws",this,3)([e]),this.nodes){var l,_=_createForOfIteratorHelper2(this.nodes);try{for(_.s();!(l=_.n()).done;){l.value.cleanRaws(e)}}catch(S){_.e(S)}finally{_.f()}}}},{key:"each",value:function(e){if(this.proxyOf.nodes){for(var l,_,S=this.getIterator();this.indexes[S]<this.proxyOf.nodes.length&&(l=this.indexes[S],!1!==(_=e(this.proxyOf.nodes[l],l)));)this.indexes[S]+=1;return delete this.indexes[S],_}}},{key:"every",value:function(e){return this.nodes.every(e)}},{key:"getIterator",value:function(){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={}),this.lastEach+=1;var e=this.lastEach;return this.indexes[e]=0,e}},{key:"getProxyProcessor",value:function(){return{get:function(e,l){return"proxyOf"===l?e:e[l]?"each"===l||"string"==typeof l&&l.startsWith("walk")?function(){for(var _=arguments.length,S=new Array(_),E=0;E<_;E++)S[E]=arguments[E];return e[l].apply(e,_toConsumableArray3(S.map(function(e){return"function"==typeof e?function(l,_){return e(l.toProxy(),_)}:e})))}:"every"===l||"some"===l?function(_){return e[l](function(e){for(var l=arguments.length,S=new Array(l>1?l-1:0),E=1;E<l;E++)S[E-1]=arguments[E];return _.apply(void 0,[e.toProxy()].concat(S))})}:"root"===l?function(){return e.root().toProxy()}:"nodes"===l?e.nodes.map(function(e){return e.toProxy()}):"first"===l||"last"===l?e[l].toProxy():e[l]:e[l]},set:function(e,l,_){return e[l]===_||(e[l]=_,"name"!==l&&"params"!==l&&"selector"!==l||e.markDirty()),!0}}}},{key:"index",value:function(e){return"number"==typeof e?e:(e.proxyOf&&(e=e.proxyOf),this.proxyOf.nodes.indexOf(e))}},{key:"insertAfter",value:function(e,l){var _=this.index(e),S=this.normalize(l,this.proxyOf.nodes[_]).reverse();_=this.index(e);var E,k,T=_createForOfIteratorHelper2(S);try{for(T.s();!(E=T.n()).done;){var M=E.value;this.proxyOf.nodes.splice(_+1,0,M)}}catch(I){T.e(I)}finally{T.f()}for(var R in this.indexes)_<(k=this.indexes[R])&&(this.indexes[R]=k+S.length);return this.markDirty(),this}},{key:"insertBefore",value:function(e,l){var _=this.index(e),S=0===_&&"prepend",E=this.normalize(l,this.proxyOf.nodes[_],S).reverse();_=this.index(e);var k,T,M=_createForOfIteratorHelper2(E);try{for(M.s();!(k=M.n()).done;){var R=k.value;this.proxyOf.nodes.splice(_,0,R)}}catch(O){M.e(O)}finally{M.f()}for(var I in this.indexes)_<=(T=this.indexes[I])&&(this.indexes[I]=T+E.length);return this.markDirty(),this}},{key:"normalize",value:function(e,l){var _=this;if("string"==typeof e)e=cleanSource$1(ot(e).nodes);else if(void 0===e)e=[];else if(Array.isArray(e)){var S,E=_createForOfIteratorHelper2(e=e.slice(0));try{for(E.s();!(S=E.n()).done;){var k=S.value;k.parent&&k.parent.removeChild(k,"ignore")}}catch(O){E.e(O)}finally{E.f()}}else if("root"===e.type&&"document"!==this.type){var T,M=_createForOfIteratorHelper2(e=e.nodes.slice(0));try{for(M.s();!(T=M.n()).done;){var R=T.value;R.parent&&R.parent.removeChild(R,"ignore")}}catch(O){M.e(O)}finally{M.f()}}else if(e.type)e=[e];else if(e.prop){if(void 0===e.value)throw new Error("Value field is missed in node creation");"string"!=typeof e.value&&(e.value=String(e.value)),e=[new dt(e)]}else if(e.selector)e=[new st(e)];else if(e.name)e=[new ut(e)];else{if(!e.text)throw new Error("Unknown node type in node creation");e=[new ft(e)]}var I=e.map(function(e){return e[ht]||Container.rebuild(e),(e=e.proxyOf).parent&&e.parent.removeChild(e),e[ct]&&markDirtyUp$1(e),void 0===e.raws.before&&l&&void 0!==l.raws.before&&(e.raws.before=l.raws.before.replace(/\S/g,"")),e.parent=_.proxyOf,e});return I}},{key:"prepend",value:function(){for(var e=arguments.length,l=new Array(e),_=0;_<e;_++)l[_]=arguments[_];var S,E=_createForOfIteratorHelper2(l=l.reverse());try{for(E.s();!(S=E.n()).done;){var k,T=S.value,M=this.normalize(T,this.first,"prepend").reverse(),R=_createForOfIteratorHelper2(M);try{for(R.s();!(k=R.n()).done;){var I=k.value;this.proxyOf.nodes.unshift(I)}}catch(D){R.e(D)}finally{R.f()}for(var O in this.indexes)this.indexes[O]=this.indexes[O]+M.length}}catch(D){E.e(D)}finally{E.f()}return this.markDirty(),this}},{key:"push",value:function(e){return e.parent=this,this.proxyOf.nodes.push(e),this}},{key:"removeAll",value:function(){var e,l=_createForOfIteratorHelper2(this.proxyOf.nodes);try{for(l.s();!(e=l.n()).done;){e.value.parent=void 0}}catch(_){l.e(_)}finally{l.f()}return this.proxyOf.nodes=[],this.markDirty(),this}},{key:"removeChild",value:function(e){var l;for(var _ in e=this.index(e),this.proxyOf.nodes[e].parent=void 0,this.proxyOf.nodes.splice(e,1),this.indexes)(l=this.indexes[_])>=e&&(this.indexes[_]=l-1);return this.markDirty(),this}},{key:"replaceValues",value:function(e,l,_){return _||(_=l,l={}),this.walkDecls(function(S){l.props&&!l.props.includes(S.prop)||l.fast&&!S.value.includes(l.fast)||(S.value=S.value.replace(e,_))}),this.markDirty(),this}},{key:"some",value:function(e){return this.nodes.some(e)}},{key:"walk",value:function(e){return this.each(function(l,_){var S;try{S=e(l,_)}catch(E){throw l.addToError(E)}return!1!==S&&l.walk&&(S=l.walk(e)),S})}},{key:"walkAtRules",value:function(e,l){return l?e instanceof RegExp?this.walk(function(_,S){if("atrule"===_.type&&e.test(_.name))return l(_,S)}):this.walk(function(_,S){if("atrule"===_.type&&_.name===e)return l(_,S)}):(l=e,this.walk(function(e,_){if("atrule"===e.type)return l(e,_)}))}},{key:"walkComments",value:function(e){return this.walk(function(l,_){if("comment"===l.type)return e(l,_)})}},{key:"walkDecls",value:function(e,l){return l?e instanceof RegExp?this.walk(function(_,S){if("decl"===_.type&&e.test(_.prop))return l(_,S)}):this.walk(function(_,S){if("decl"===_.type&&_.prop===e)return l(_,S)}):(l=e,this.walk(function(e,_){if("decl"===e.type)return l(e,_)}))}},{key:"walkRules",value:function(e,l){return l?e instanceof RegExp?this.walk(function(_,S){if("rule"===_.type&&e.test(_.selector))return l(_,S)}):this.walk(function(_,S){if("rule"===_.type&&_.selector===e)return l(_,S)}):(l=e,this.walk(function(e,_){if("rule"===e.type)return l(e,_)}))}},{key:"first",get:function(){if(this.proxyOf.nodes)return this.proxyOf.nodes[0]}},{key:"last",get:function(){if(this.proxyOf.nodes)return this.proxyOf.nodes[this.proxyOf.nodes.length-1]}}])}(Se);pt.registerParse=function(e){ot=e},pt.registerRule=function(e){st=e},pt.registerAtRule=function(e){ut=e},pt.registerRoot=function(e){lt=e};var vt=pt;pt.default=pt,pt.rebuild=function(e){"atrule"===e.type?Object.setPrototypeOf(e,ut.prototype):"rule"===e.type?Object.setPrototypeOf(e,st.prototype):"decl"===e.type?Object.setPrototypeOf(e,dt.prototype):"comment"===e.type?Object.setPrototypeOf(e,ft.prototype):"root"===e.type&&Object.setPrototypeOf(e,lt.prototype),e[ht]=!0,e.nodes&&e.nodes.forEach(function(e){pt.rebuild(e)})};var gt,mt,yt=function(e){function Document2(e){var l;return _classCallCheck3(this,Document2),(l=_callSuper(this,Document2,[_objectSpread2({type:"document"},e)])).nodes||(l.nodes=[]),l}return _inherits(Document2,e),_createClass3(Document2,[{key:"toResult",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new gt(new mt,this,e).stringify()}}])}(vt);yt.registerLazyResult=function(e){gt=e},yt.registerProcessor=function(e){mt=e};var _t=yt;yt.default=yt;var bt=function(){return _createClass3(function Warning(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(_classCallCheck3(this,Warning),this.type="warning",this.text=e,l.node&&l.node.source){var _=l.node.rangeBy(l);this.line=_.start.line,this.column=_.start.column,this.endLine=_.end.line,this.endColumn=_.end.column}for(var S in l)this[S]=l[S]},[{key:"toString",value:function(){return this.node?this.node.error(this.text,{index:this.index,plugin:this.plugin,word:this.word}).message:this.plugin?this.plugin+": "+this.text:this.text}}])}(),St=bt;bt.default=bt;var wt=St,xt=function(){return _createClass3(function Result(e,l,_){_classCallCheck3(this,Result),this.processor=e,this.messages=[],this.root=l,this.opts=_,this.css=void 0,this.map=void 0},[{key:"toString",value:function(){return this.css}},{key:"warn",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};l.plugin||this.lastPlugin&&this.lastPlugin.postcssPlugin&&(l.plugin=this.lastPlugin.postcssPlugin);var _=new wt(e,l);return this.messages.push(_),_}},{key:"warnings",value:function(){return this.messages.filter(function(e){return"warning"===e.type})}},{key:"content",get:function(){return this.css}}])}(),Et=xt;xt.default=xt;var kt="'".charCodeAt(0),At='"'.charCodeAt(0),Ct="\\".charCodeAt(0),Tt="/".charCodeAt(0),Mt="\n".charCodeAt(0),Rt=" ".charCodeAt(0),It="\f".charCodeAt(0),Pt="\t".charCodeAt(0),Ot="\r".charCodeAt(0),Dt="[".charCodeAt(0),Lt="]".charCodeAt(0),Ut="(".charCodeAt(0),Ft=")".charCodeAt(0),Nt="{".charCodeAt(0),Bt="}".charCodeAt(0),zt=";".charCodeAt(0),jt="*".charCodeAt(0),Gt=":".charCodeAt(0),Ht="@".charCodeAt(0),Vt=/[\t\n\f\r "#'()/;[\\\]{}]/g,Wt=/[\t\n\f\r !"#'():;@[\\\]{}]|\/(?=\*)/g,qt=/.[\r\n"'(/\\]/,Xt=/[\da-f]/i,Kt=vt,Yt=function(e){function AtRule(e){var l;return _classCallCheck3(this,AtRule),(l=_callSuper(this,AtRule,[e])).type="atrule",l}return _inherits(AtRule,e),_createClass3(AtRule,[{key:"append",value:function(){this.proxyOf.nodes||(this.nodes=[]);for(var e=arguments.length,l=new Array(e),_=0;_<e;_++)l[_]=arguments[_];return _superPropGet(AtRule,"append",this,3)(l)}},{key:"prepend",value:function(){this.proxyOf.nodes||(this.nodes=[]);for(var e=arguments.length,l=new Array(e),_=0;_<e;_++)l[_]=arguments[_];return _superPropGet(AtRule,"prepend",this,3)(l)}}])}(Kt),Jt=Yt;Yt.default=Yt,Kt.registerAtRule(Yt);var Qt,Zt,$t=vt,en=function(e){function Root(e){var l;return _classCallCheck3(this,Root),(l=_callSuper(this,Root,[e])).type="root",l.nodes||(l.nodes=[]),l}return _inherits(Root,e),_createClass3(Root,[{key:"normalize",value:function(e,l,_){var S=_superPropGet(Root,"normalize",this,3)([e]);if(l)if("prepend"===_)this.nodes.length>1?l.raws.before=this.nodes[1].raws.before:delete l.raws.before;else if(this.first!==l){var E,k=_createForOfIteratorHelper2(S);try{for(k.s();!(E=k.n()).done;){E.value.raws.before=l.raws.before}}catch(T){k.e(T)}finally{k.f()}}return S}},{key:"removeChild",value:function(e,l){var _=this.index(e);return!l&&0===_&&this.nodes.length>1&&(this.nodes[1].raws.before=this.nodes[_].raws.before),_superPropGet(Root,"removeChild",this,3)([e])}},{key:"toResult",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Qt(new Zt,this,e).stringify()}}])}($t);en.registerLazyResult=function(e){Qt=e},en.registerProcessor=function(e){Zt=e};var tn=en;en.default=en,$t.registerRoot(en);var nn={comma:function(e){return nn.split(e,[","],!0)},space:function(e){return nn.split(e,[" ","\n","\t"])},split:function(e,l,_){var S,E=[],k="",T=!1,M=0,R=!1,I="",O=!1,D=_createForOfIteratorHelper2(e);try{for(D.s();!(S=D.n()).done;){var L=S.value;O?O=!1:"\\"===L?O=!0:R?L===I&&(R=!1):'"'===L||"'"===L?(R=!0,I=L):"("===L?M+=1:")"===L?M>0&&(M-=1):0===M&&l.includes(L)&&(T=!0),T?(""!==k&&E.push(k.trim()),k="",T=!1):k+=L}}catch(U){D.e(U)}finally{D.f()}return(_||""!==k)&&E.push(k.trim()),E}},rn=nn;nn.default=nn;var an=vt,sn=rn,un=function(e){function Rule(e){var l;return _classCallCheck3(this,Rule),(l=_callSuper(this,Rule,[e])).type="rule",l.nodes||(l.nodes=[]),l}return _inherits(Rule,e),_createClass3(Rule,[{key:"selectors",get:function(){return sn.comma(this.selector)},set:function(e){var l=this.selector?this.selector.match(/,\s*/):null,_=l?l[0]:","+this.raw("between","beforeOpen");this.selector=e.join(_)}}])}(an),ln=un;un.default=un,an.registerRule(un);var cn=xe,tokenizer2$1=function(e){var l,_,S,E,k,T,M,R,I,O,D=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},L=e.css.valueOf(),U=D.ignoreErrors,B=L.length,z=0,j=[],G=[];function unclosed(l){throw e.error("Unclosed "+l,z)}return{back:function(e){G.push(e)},endOfFile:function(){return 0===G.length&&z>=B},nextToken:function(e){if(G.length)return G.pop();if(!(z>=B)){var D=!!e&&e.ignoreUnclosed;switch(l=L.charCodeAt(z)){case Mt:case Rt:case Pt:case Ot:case It:_=z;do{_+=1,l=L.charCodeAt(_)}while(l===Rt||l===Mt||l===Pt||l===Ot||l===It);O=["space",L.slice(z,_)],z=_-1;break;case Dt:case Lt:case Nt:case Bt:case Gt:case zt:case Ft:var H=String.fromCharCode(l);O=[H,H,z];break;case Ut:if(R=j.length?j.pop()[1]:"",I=L.charCodeAt(z+1),"url"===R&&I!==kt&&I!==At&&I!==Rt&&I!==Mt&&I!==Pt&&I!==It&&I!==Ot){_=z;do{if(T=!1,-1===(_=L.indexOf(")",_+1))){if(U||D){_=z;break}unclosed("bracket")}for(M=_;L.charCodeAt(M-1)===Ct;)M-=1,T=!T}while(T);O=["brackets",L.slice(z,_+1),z,_],z=_}else _=L.indexOf(")",z+1),E=L.slice(z,_+1),-1===_||qt.test(E)?O=["(","(",z]:(O=["brackets",E,z,_],z=_);break;case kt:case At:S=l===kt?"'":'"',_=z;do{if(T=!1,-1===(_=L.indexOf(S,_+1))){if(U||D){_=z+1;break}unclosed("string")}for(M=_;L.charCodeAt(M-1)===Ct;)M-=1,T=!T}while(T);O=["string",L.slice(z,_+1),z,_],z=_;break;case Ht:Vt.lastIndex=z+1,Vt.test(L),_=0===Vt.lastIndex?L.length-1:Vt.lastIndex-2,O=["at-word",L.slice(z,_+1),z,_],z=_;break;case Ct:for(_=z,k=!0;L.charCodeAt(_+1)===Ct;)_+=1,k=!k;if(l=L.charCodeAt(_+1),k&&l!==Tt&&l!==Rt&&l!==Mt&&l!==Pt&&l!==Ot&&l!==It&&(_+=1,Xt.test(L.charAt(_)))){for(;Xt.test(L.charAt(_+1));)_+=1;L.charCodeAt(_+1)===Rt&&(_+=1)}O=["word",L.slice(z,_+1),z,_],z=_;break;default:l===Tt&&L.charCodeAt(z+1)===jt?(0===(_=L.indexOf("*/",z+2)+1)&&(U||D?_=L.length:unclosed("comment")),O=["comment",L.slice(z,_+1),z,_],z=_):(Wt.lastIndex=z+1,Wt.test(L),_=0===Wt.lastIndex?L.length-1:Wt.lastIndex-2,O=["word",L.slice(z,_+1),z,_],j.push(O),z=_)}return z++,O}},position:function(){return z}}},hn=at,dn=Jt,fn=tn,pn=ln,vn={empty:!0,space:!0};var gn=function(){return _createClass3(function Parser(e){_classCallCheck3(this,Parser),this.input=e,this.root=new fn,this.current=this.root,this.spaces="",this.semicolon=!1,this.createTokenizer(),this.root.source={input:e,start:{column:1,line:1,offset:0}}},[{key:"atrule",value:function(e){var l,_,S,E=new dn;E.name=e[1].slice(1),""===E.name&&this.unnamedAtrule(E,e),this.init(E,e[2]);for(var k=!1,T=!1,M=[],R=[];!this.tokenizer.endOfFile();){if("("===(l=(e=this.tokenizer.nextToken())[0])||"["===l?R.push("("===l?")":"]"):"{"===l&&R.length>0?R.push("}"):l===R[R.length-1]&&R.pop(),0===R.length){if(";"===l){E.source.end=this.getPosition(e[2]),E.source.end.offset++,this.semicolon=!0;break}if("{"===l){T=!0;break}if("}"===l){if(M.length>0){for(_=M[S=M.length-1];_&&"space"===_[0];)_=M[--S];_&&(E.source.end=this.getPosition(_[3]||_[2]),E.source.end.offset++)}this.end(e);break}M.push(e)}else M.push(e);if(this.tokenizer.endOfFile()){k=!0;break}}E.raws.between=this.spacesAndCommentsFromEnd(M),M.length?(E.raws.afterName=this.spacesAndCommentsFromStart(M),this.raw(E,"params",M),k&&(e=M[M.length-1],E.source.end=this.getPosition(e[3]||e[2]),E.source.end.offset++,this.spaces=E.raws.between,E.raws.between="")):(E.raws.afterName="",E.params=""),T&&(E.nodes=[],this.current=E)}},{key:"checkMissedSemicolon",value:function(e){var l=this.colon(e);if(!1!==l){for(var _,S=0,E=l-1;E>=0&&("space"===(_=e[E])[0]||2!==(S+=1));E--);throw this.input.error("Missed semicolon","word"===_[0]?_[3]+1:_[2])}}},{key:"colon",value:function(e){var l,_,S,E,k=0,T=_createForOfIteratorHelper2(e.entries());try{for(T.s();!(E=T.n()).done;){var M=_slicedToArray(E.value,2),R=M[0];if("("===(_=(l=M[1])[0])&&(k+=1),")"===_&&(k-=1),0===k&&":"===_){if(S){if("word"===S[0]&&"progid"===S[1])continue;return R}this.doubleColon(l)}S=l}}catch(I){T.e(I)}finally{T.f()}return!1}},{key:"comment",value:function(e){var l=new hn;this.init(l,e[2]),l.source.end=this.getPosition(e[3]||e[2]),l.source.end.offset++;var _=e[1].slice(2,-2);if(/^\s*$/.test(_))l.text="",l.raws.left=_,l.raws.right="";else{var S=_.match(/^(\s*)([^]*\S)(\s*)$/);l.text=S[2],l.raws.left=S[1],l.raws.right=S[3]}}},{key:"createTokenizer",value:function(){this.tokenizer=tokenizer2$1(this.input)}},{key:"decl",value:function(e,l){var _=new cn;this.init(_,e[0][2]);var S,E=e[e.length-1];for(";"===E[0]&&(this.semicolon=!0,e.pop()),_.source.end=this.getPosition(E[3]||E[2]||function(e){for(var l=e.length-1;l>=0;l--){var _=e[l],S=_[3]||_[2];if(S)return S}}(e)),_.source.end.offset++;"word"!==e[0][0];)1===e.length&&this.unknownWord(e),_.raws.before+=e.shift()[1];for(_.source.start=this.getPosition(e[0][2]),_.prop="";e.length;){var k=e[0][0];if(":"===k||"space"===k||"comment"===k)break;_.prop+=e.shift()[1]}for(_.raws.between="";e.length;){if(":"===(S=e.shift())[0]){_.raws.between+=S[1];break}"word"===S[0]&&/\w/.test(S[1])&&this.unknownWord([S]),_.raws.between+=S[1]}"_"!==_.prop[0]&&"*"!==_.prop[0]||(_.raws.before+=_.prop[0],_.prop=_.prop.slice(1));for(var T,M=[];e.length&&("space"===(T=e[0][0])||"comment"===T);)M.push(e.shift());this.precheckMissedSemicolon(e);for(var R=e.length-1;R>=0;R--){if("!important"===(S=e[R])[1].toLowerCase()){_.important=!0;var I=this.stringFrom(e,R);" !important"!==(I=this.spacesFromEnd(e)+I)&&(_.raws.important=I);break}if("important"===S[1].toLowerCase()){for(var O=e.slice(0),D="",L=R;L>0;L--){var U=O[L][0];if(0===D.trim().indexOf("!")&&"space"!==U)break;D=O.pop()[1]+D}0===D.trim().indexOf("!")&&(_.important=!0,_.raws.important=D,e=O)}if("space"!==S[0]&&"comment"!==S[0])break}var B=e.some(function(e){return"space"!==e[0]&&"comment"!==e[0]});B&&(_.raws.between+=M.map(function(e){return e[1]}).join(""),M=[]),this.raw(_,"value",M.concat(e),l),_.value.includes(":")&&!l&&this.checkMissedSemicolon(e)}},{key:"doubleColon",value:function(e){throw this.input.error("Double colon",{offset:e[2]},{offset:e[2]+e[1].length})}},{key:"emptyRule",value:function(e){var l=new pn;this.init(l,e[2]),l.selector="",l.raws.between="",this.current=l}},{key:"end",value:function(e){this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.semicolon=!1,this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.spaces="",this.current.parent?(this.current.source.end=this.getPosition(e[2]),this.current.source.end.offset++,this.current=this.current.parent):this.unexpectedClose(e)}},{key:"endFile",value:function(){this.current.parent&&this.unclosedBlock(),this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.root.source.end=this.getPosition(this.tokenizer.position())}},{key:"freeSemicolon",value:function(e){if(this.spaces+=e[1],this.current.nodes){var l=this.current.nodes[this.current.nodes.length-1];l&&"rule"===l.type&&!l.raws.ownSemicolon&&(l.raws.ownSemicolon=this.spaces,this.spaces="")}}},{key:"getPosition",value:function(e){var l=this.input.fromOffset(e);return{column:l.col,line:l.line,offset:e}}},{key:"init",value:function(e,l){this.current.push(e),e.source={input:this.input,start:this.getPosition(l)},e.raws.before=this.spaces,this.spaces="","comment"!==e.type&&(this.semicolon=!1)}},{key:"other",value:function(e){for(var l=!1,_=null,S=!1,E=null,k=[],T=e[1].startsWith("--"),M=[],R=e;R;){if(_=R[0],M.push(R),"("===_||"["===_)E||(E=R),k.push("("===_?")":"]");else if(T&&S&&"{"===_)E||(E=R),k.push("}");else if(0===k.length){if(";"===_){if(S)return void this.decl(M,T);break}if("{"===_)return void this.rule(M);if("}"===_){this.tokenizer.back(M.pop()),l=!0;break}":"===_&&(S=!0)}else _===k[k.length-1]&&(k.pop(),0===k.length&&(E=null));R=this.tokenizer.nextToken()}if(this.tokenizer.endOfFile()&&(l=!0),k.length>0&&this.unclosedBracket(E),l&&S){if(!T)for(;M.length&&("space"===(R=M[M.length-1][0])||"comment"===R);)this.tokenizer.back(M.pop());this.decl(M,T)}else this.unknownWord(M)}},{key:"parse",value:function(){for(var e;!this.tokenizer.endOfFile();)switch((e=this.tokenizer.nextToken())[0]){case"space":this.spaces+=e[1];break;case";":this.freeSemicolon(e);break;case"}":this.end(e);break;case"comment":this.comment(e);break;case"at-word":this.atrule(e);break;case"{":this.emptyRule(e);break;default:this.other(e)}this.endFile()}},{key:"precheckMissedSemicolon",value:function(){}},{key:"raw",value:function(e,l,_,S){for(var E,k,T,M,R=_.length,I="",O=!0,D=0;D<R;D+=1)"space"!==(k=(E=_[D])[0])||D!==R-1||S?"comment"===k?(M=_[D-1]?_[D-1][0]:"empty",T=_[D+1]?_[D+1][0]:"empty",vn[M]||vn[T]||","===I.slice(-1)?O=!1:I+=E[1]):I+=E[1]:O=!1;if(!O){var L=_.reduce(function(e,l){return e+l[1]},"");e.raws[l]={raw:L,value:I}}e[l]=I}},{key:"rule",value:function(e){e.pop();var l=new pn;this.init(l,e[0][2]),l.raws.between=this.spacesAndCommentsFromEnd(e),this.raw(l,"selector",e),this.current=l}},{key:"spacesAndCommentsFromEnd",value:function(e){for(var l,_="";e.length&&("space"===(l=e[e.length-1][0])||"comment"===l);)_=e.pop()[1]+_;return _}},{key:"spacesAndCommentsFromStart",value:function(e){for(var l,_="";e.length&&("space"===(l=e[0][0])||"comment"===l);)_+=e.shift()[1];return _}},{key:"spacesFromEnd",value:function(e){for(var l="";e.length&&"space"===e[e.length-1][0];)l=e.pop()[1]+l;return l}},{key:"stringFrom",value:function(e,l){for(var _="",S=l;S<e.length;S++)_+=e[S][1];return e.splice(l,e.length-l),_}},{key:"unclosedBlock",value:function(){var e=this.current.source.start;throw this.input.error("Unclosed block",e.line,e.column)}},{key:"unclosedBracket",value:function(e){throw this.input.error("Unclosed bracket",{offset:e[2]},{offset:e[2]+1})}},{key:"unexpectedClose",value:function(e){throw this.input.error("Unexpected }",{offset:e[2]},{offset:e[2]+1})}},{key:"unknownWord",value:function(e){throw this.input.error("Unknown word",{offset:e[0][2]},{offset:e[0][2]+e[0][1].length})}},{key:"unnamedAtrule",value:function(e,l){throw this.input.error("At-rule without name",{offset:l[2]},{offset:l[2]+l[1].length})}}])}(),mn=vt,yn=gn,_n=qe;function parse$3$1(e,l){var _=new _n(e,l),S=new yn(_);try{S.parse()}catch(E){throw E}return S.root}var bn=parse$3$1;parse$3$1.default=parse$3$1,mn.registerParse(parse$3$1);var Sn=le.isClean,wn=le.my,xn=rt,En=pe,kn=vt,An=_t,Cn=Et,Tn=bn,Mn=tn,Rn={atrule:"AtRule",comment:"Comment",decl:"Declaration",document:"Document",root:"Root",rule:"Rule"},In={AtRule:!0,AtRuleExit:!0,Comment:!0,CommentExit:!0,Declaration:!0,DeclarationExit:!0,Document:!0,DocumentExit:!0,Once:!0,OnceExit:!0,postcssPlugin:!0,prepare:!0,Root:!0,RootExit:!0,Rule:!0,RuleExit:!0},Pn={Once:!0,postcssPlugin:!0,prepare:!0};function isPromise$1(e){return"object"===_typeof3(e)&&"function"==typeof e.then}function getEvents$1(e){var l=!1,_=Rn[e.type];return"decl"===e.type?l=e.prop.toLowerCase():"atrule"===e.type&&(l=e.name.toLowerCase()),l&&e.append?[_,_+"-"+l,0,_+"Exit",_+"Exit-"+l]:l?[_,_+"-"+l,_+"Exit",_+"Exit-"+l]:e.append?[_,0,_+"Exit"]:[_,_+"Exit"]}function toStack$1(e){return{eventIndex:0,events:"document"===e.type?["Document",0,"DocumentExit"]:"root"===e.type?["Root",0,"RootExit"]:getEvents$1(e),iterator:0,node:e,visitorIndex:0,visitors:[]}}function cleanMarks$1(e){return e[Sn]=!1,e.nodes&&e.nodes.forEach(function(e){return cleanMarks$1(e)}),e}var On={},Dn=function(){return _createClass3(function LazyResult(e,l,_){var S,E=this;if(_classCallCheck3(this,LazyResult),this.stringified=!1,this.processed=!1,"object"!==_typeof3(l)||null===l||"root"!==l.type&&"document"!==l.type)if(l instanceof LazyResult||l instanceof Cn)S=cleanMarks$1(l.root),l.map&&(void 0===_.map&&(_.map={}),_.map.inline||(_.map.inline=!1),_.map.prev=l.map);else{var k=Tn;_.syntax&&(k=_.syntax.parse),_.parser&&(k=_.parser),k.parse&&(k=k.parse);try{S=k(l,_)}catch(T){this.processed=!0,this.error=T}S&&!S[wn]&&kn.rebuild(S)}else S=cleanMarks$1(l);this.result=new Cn(e,S,_),this.helpers=_objectSpread2(_objectSpread2({},On),{},{postcss:On,result:this.result}),this.plugins=this.processor.plugins.map(function(e){return"object"===_typeof3(e)&&e.prepare?_objectSpread2(_objectSpread2({},e),e.prepare(E.result)):e})},[{key:"async",value:function(){return this.error?Promise.reject(this.error):this.processed?Promise.resolve(this.result):(this.processing||(this.processing=this.runAsync()),this.processing)}},{key:"catch",value:function(e){return this.async().catch(e)}},{key:"finally",value:function(e){return this.async().then(e,e)}},{key:"getAsyncError",value:function(){throw new Error("Use process(css).then(cb) to work with async plugins")}},{key:"handleError",value:function(e,l){var _=this.result.lastPlugin;try{l&&l.addToError(e),this.error=e,"CssSyntaxError"!==e.name||e.plugin?_.postcssVersion:(e.plugin=_.postcssPlugin,e.setMessage())}catch(S){console&&console.error}return e}},{key:"prepareVisitors",value:function(){var e=this;this.listeners={};var l,add=function(l,_,S){e.listeners[_]||(e.listeners[_]=[]),e.listeners[_].push([l,S])},_=_createForOfIteratorHelper2(this.plugins);try{for(_.s();!(l=_.n()).done;){var S=l.value;if("object"===_typeof3(S))for(var E in S){if(!In[E]&&/^[A-Z]/.test(E))throw new Error("Unknown event ".concat(E," in ").concat(S.postcssPlugin,". Try to update PostCSS (").concat(this.processor.version," now)."));if(!Pn[E])if("object"===_typeof3(S[E]))for(var k in S[E])add(S,"*"===k?E:E+"-"+k.toLowerCase(),S[E][k]);else"function"==typeof S[E]&&add(S,E,S[E])}}}catch(T){_.e(T)}finally{_.f()}this.hasListener=Object.keys(this.listeners).length>0}},{key:"runAsync",value:(e=_asyncToGenerator(_regenerator().m(function _callee29(){var e,l,_,S,E,k,T,M,R,I,O,D,L,U=this;return _regenerator().w(function(B){for(;;)switch(B.p=B.n){case 0:this.plugin=0,e=0;case 1:if(!(e<this.plugins.length)){B.n=6;break}if(l=this.plugins[e],!isPromise$1(_=this.runOnRoot(l))){B.n=5;break}return B.p=2,B.n=3,_;case 3:B.n=5;break;case 4:throw B.p=4,O=B.v,this.handleError(O);case 5:e++,B.n=1;break;case 6:if(this.prepareVisitors(),!this.hasListener){B.n=21;break}S=this.result.root;case 7:if(S[Sn]){B.n=14;break}S[Sn]=!0,E=[toStack$1(S)];case 8:if(!(E.length>0)){B.n=13;break}if(!isPromise$1(k=this.visitTick(E))){B.n=12;break}return B.p=9,B.n=10,k;case 10:B.n=12;break;case 11:throw B.p=11,D=B.v,T=E[E.length-1].node,this.handleError(D,T);case 12:B.n=8;break;case 13:B.n=7;break;case 14:if(!this.listeners.OnceExit){B.n=21;break}M=_createForOfIteratorHelper2(this.listeners.OnceExit),B.p=15,I=_regenerator().m(function _loop(){var e,l,_,E,k;return _regenerator().w(function(T){for(;;)switch(T.p=T.n){case 0:if(e=_slicedToArray(R.value,2),l=e[0],_=e[1],U.result.lastPlugin=l,T.p=1,"document"!==S.type){T.n=3;break}return E=S.nodes.map(function(e){return _(e,U.helpers)}),T.n=2,Promise.all(E);case 2:T.n=4;break;case 3:return T.n=4,_(S,U.helpers);case 4:T.n=6;break;case 5:throw T.p=5,k=T.v,U.handleError(k);case 6:return T.a(2)}},_loop,null,[[1,5]])}),M.s();case 16:if((R=M.n()).done){B.n=18;break}return B.d(_regeneratorValues(I()),17);case 17:B.n=16;break;case 18:B.n=20;break;case 19:B.p=19,L=B.v,M.e(L);case 20:return B.p=20,M.f(),B.f(20);case 21:return this.processed=!0,B.a(2,this.stringify())}},_callee29,this,[[15,19,20,21],[9,11],[2,4]])})),function(){return e.apply(this,arguments)})},{key:"runOnRoot",value:function(e){var l=this;this.result.lastPlugin=e;try{if("object"===_typeof3(e)&&e.Once){if("document"===this.result.root.type){var _=this.result.root.nodes.map(function(_){return e.Once(_,l.helpers)});return isPromise$1(_[0])?Promise.all(_):_}return e.Once(this.result.root,this.helpers)}if("function"==typeof e)return e(this.result.root,this.result)}catch(S){throw this.handleError(S)}}},{key:"stringify",value:function(){if(this.error)throw this.error;if(this.stringified)return this.result;this.stringified=!0,this.sync();var e=this.result.opts,l=En;e.syntax&&(l=e.syntax.stringify),e.stringifier&&(l=e.stringifier),l.stringify&&(l=l.stringify);var _=new xn(l,this.result.root,this.result.opts).generate();return this.result.css=_[0],this.result.map=_[1],this.result}},{key:"sync",value:function(){if(this.error)throw this.error;if(this.processed)return this.result;if(this.processed=!0,this.processing)throw this.getAsyncError();var e,l=_createForOfIteratorHelper2(this.plugins);try{for(l.s();!(e=l.n()).done;){var _=e.value;if(isPromise$1(this.runOnRoot(_)))throw this.getAsyncError()}}catch(M){l.e(M)}finally{l.f()}if(this.prepareVisitors(),this.hasListener){for(var S=this.result.root;!S[Sn];)S[Sn]=!0,this.walkSync(S);if(this.listeners.OnceExit)if("document"===S.type){var E,k=_createForOfIteratorHelper2(S.nodes);try{for(k.s();!(E=k.n()).done;){var T=E.value;this.visitSync(this.listeners.OnceExit,T)}}catch(M){k.e(M)}finally{k.f()}}else this.visitSync(this.listeners.OnceExit,S)}return this.result}},{key:"then",value:function(e,l){return this.async().then(e,l)}},{key:"toString",value:function(){return this.css}},{key:"visitSync",value:function(e,l){var _,S=_createForOfIteratorHelper2(e);try{for(S.s();!(_=S.n()).done;){var E=_slicedToArray(_.value,2),k=E[0],T=E[1];this.result.lastPlugin=k;var M=void 0;try{M=T(l,this.helpers)}catch(R){throw this.handleError(R,l.proxyOf)}if("root"!==l.type&&"document"!==l.type&&!l.parent)return!0;if(isPromise$1(M))throw this.getAsyncError()}}catch(I){S.e(I)}finally{S.f()}}},{key:"visitTick",value:function(e){var l=e[e.length-1],_=l.node,S=l.visitors;if("root"===_.type||"document"===_.type||_.parent){if(S.length>0&&l.visitorIndex<S.length){var E=_slicedToArray(S[l.visitorIndex],2),k=E[0],T=E[1];l.visitorIndex+=1,l.visitorIndex===S.length&&(l.visitors=[],l.visitorIndex=0),this.result.lastPlugin=k;try{return T(_.toProxy(),this.helpers)}catch(D){throw this.handleError(D,_)}}if(0!==l.iterator){for(var M,R=l.iterator;M=_.nodes[_.indexes[R]];)if(_.indexes[R]+=1,!M[Sn])return M[Sn]=!0,void e.push(toStack$1(M));l.iterator=0,delete _.indexes[R]}for(var I=l.events;l.eventIndex<I.length;){var O=I[l.eventIndex];if(l.eventIndex+=1,0===O)return void(_.nodes&&_.nodes.length&&(_[Sn]=!0,l.iterator=_.getIterator()));if(this.listeners[O])return void(l.visitors=this.listeners[O])}e.pop()}else e.pop()}},{key:"walkSync",value:function(e){var l=this;e[Sn]=!0;var _,S=_createForOfIteratorHelper2(getEvents$1(e));try{for(S.s();!(_=S.n()).done;){var E=_.value;if(0===E)e.nodes&&e.each(function(e){e[Sn]||l.walkSync(e)});else{var k=this.listeners[E];if(k&&this.visitSync(k,e.toProxy()))return}}}catch(T){S.e(T)}finally{S.f()}}},{key:"warnings",value:function(){return this.sync().warnings()}},{key:"content",get:function(){return this.stringify().content}},{key:"css",get:function(){return this.stringify().css}},{key:"map",get:function(){return this.stringify().map}},{key:"messages",get:function(){return this.sync().messages}},{key:"opts",get:function(){return this.result.opts}},{key:"processor",get:function(){return this.result.processor}},{key:"root",get:function(){return this.sync().root}},{key:Symbol.toStringTag,get:function(){return"LazyResult"}}]);var e}();Dn.registerPostcss=function(e){On=e};var Ln=Dn;Dn.default=Dn,Mn.registerLazyResult(Dn),An.registerLazyResult(Dn);var Un=rt,Fn=pe,Nn=bn,Bn=Et,zn=function(){return _createClass3(function NoWorkResult(e,l,_){var S;_classCallCheck3(this,NoWorkResult),l=l.toString(),this.stringified=!1,this._processor=e,this._css=l,this._opts=_,this._map=void 0;var E=Fn;this.result=new Bn(this._processor,S,this._opts),this.result.css=l;var k=this;Object.defineProperty(this.result,"root",{get:function(){return k.root}});var T=new Un(E,S,this._opts,l);if(T.isMap()){var M=_slicedToArray(T.generate(),2),R=M[0],I=M[1];R&&(this.result.css=R),I&&(this.result.map=I)}else T.clearAnnotation(),this.result.css=T.css},[{key:"async",value:function(){return this.error?Promise.reject(this.error):Promise.resolve(this.result)}},{key:"catch",value:function(e){return this.async().catch(e)}},{key:"finally",value:function(e){return this.async().then(e,e)}},{key:"sync",value:function(){if(this.error)throw this.error;return this.result}},{key:"then",value:function(e,l){return this.async().then(e,l)}},{key:"toString",value:function(){return this._css}},{key:"warnings",value:function(){return[]}},{key:"content",get:function(){return this.result.css}},{key:"css",get:function(){return this.result.css}},{key:"map",get:function(){return this.result.map}},{key:"messages",get:function(){return[]}},{key:"opts",get:function(){return this.result.opts}},{key:"processor",get:function(){return this.result.processor}},{key:"root",get:function(){if(this._root)return this._root;var e,l=Nn;try{e=l(this._css,this._opts)}catch(_){this.error=_}if(this.error)throw this.error;return this._root=e,e}},{key:Symbol.toStringTag,get:function(){return"NoWorkResult"}}])}(),jn=zn;zn.default=zn;var Gn=jn,Hn=Ln,Vn=_t,Wn=tn,qn=function(){return _createClass3(function Processor(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];_classCallCheck3(this,Processor),this.version="8.4.38",this.plugins=this.normalize(e)},[{key:"normalize",value:function(e){var l,_=[],S=_createForOfIteratorHelper2(e);try{for(S.s();!(l=S.n()).done;){var E=l.value;if(!0===E.postcss?E=E():E.postcss&&(E=E.postcss),"object"===_typeof3(E)&&Array.isArray(E.plugins))_=_.concat(E.plugins);else if("object"===_typeof3(E)&&E.postcssPlugin)_.push(E);else if("function"==typeof E)_.push(E);else if("object"!==_typeof3(E)||!E.parse&&!E.stringify)throw new Error(E+" is not a PostCSS plugin")}}catch(k){S.e(k)}finally{S.f()}return _}},{key:"process",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.plugins.length||l.parser||l.stringifier||l.syntax?new Hn(this,e,l):new Gn(this,e,l)}},{key:"use",value:function(e){return this.plugins=this.plugins.concat(this.normalize([e])),this}}])}(),Xn=qn;qn.default=qn,Wn.registerProcessor(qn),Vn.registerProcessor(qn);var Kn=xe,Yn=Ie,Jn=at,Qn=Jt,Zn=qe,$n=tn,er=ln;function fromJSON$1$1(e,S){if(Array.isArray(e))return e.map(function(e){return fromJSON$1$1(e)});var E=e.inputs,k=_objectWithoutProperties3(e,l);if(E){S=[];var T,M=_createForOfIteratorHelper2(E);try{for(M.s();!(T=M.n()).done;){var R=_objectSpread2(_objectSpread2({},T.value),{},{__proto__:Zn.prototype});R.map&&(R.map=_objectSpread2(_objectSpread2({},R.map),{},{__proto__:Yn.prototype})),S.push(R)}}catch(L){M.e(L)}finally{M.f()}}if(k.nodes&&(k.nodes=e.nodes.map(function(e){return fromJSON$1$1(e,S)})),k.source){var I=k.source,O=I.inputId,D=_objectWithoutProperties3(I,_);k.source=D,null!=O&&(k.source.input=S[O])}if("root"===k.type)return new $n(k);if("decl"===k.type)return new Kn(k);if("rule"===k.type)return new er(k);if("comment"===k.type)return new Jn(k);if("atrule"===k.type)return new Qn(k);throw new Error("Unknown node type: "+e.type)}var tr=fromJSON$1$1;fromJSON$1$1.default=fromJSON$1$1;var nr=ue,rr=xe,ir=Ln,ar=vt,or=Xn,sr=pe,ur=tr,lr=_t,cr=St,hr=at,dr=Jt,fr=Et,pr=qe,vr=bn,gr=rn,mr=ln,yr=tn,_r=Se;function postcss$3(){for(var e=arguments.length,l=new Array(e),_=0;_<e;_++)l[_]=arguments[_];return 1===l.length&&Array.isArray(l[0])&&(l=l[0]),new or(l)}postcss$3.plugin=function(e,l){var _,S=!1;function creator(){console&&console.warn&&!S&&(S=!0,T.LANG&&T.LANG.startsWith("cn"));var _=l.apply(void 0,arguments);return _.postcssPlugin=e,_.postcssVersion=(new or).version,_}return Object.defineProperty(creator,"postcss",{get:function(){return _||(_=creator()),_}}),creator.process=function(e,l,_){return postcss$3([creator(_)]).process(e,l)},creator},postcss$3.stringify=sr,postcss$3.parse=vr,postcss$3.fromJSON=ur,postcss$3.list=gr,postcss$3.comment=function(e){return new hr(e)},postcss$3.atRule=function(e){return new dr(e)},postcss$3.decl=function(e){return new rr(e)},postcss$3.rule=function(e){return new mr(e)},postcss$3.root=function(e){return new yr(e)},postcss$3.document=function(e){return new lr(e)},postcss$3.CssSyntaxError=nr,postcss$3.Declaration=rr,postcss$3.Container=ar,postcss$3.Processor=or,postcss$3.Document=lr,postcss$3.Comment=hr,postcss$3.Warning=cr,postcss$3.AtRule=dr,postcss$3.Result=fr,postcss$3.Input=pr,postcss$3.Rule=mr,postcss$3.Root=yr,postcss$3.Node=_r,ir.registerPostcss(postcss$3);var br=postcss$3;postcss$3.default=postcss$3;var Sr=getDefaultExportFromCjs$1(br);Sr.stringify,Sr.fromJSON,Sr.plugin,Sr.parse,Sr.list,Sr.document,Sr.comment,Sr.atRule,Sr.rule,Sr.decl,Sr.root,Sr.CssSyntaxError,Sr.Declaration,Sr.Container,Sr.Processor,Sr.Document,Sr.Comment,Sr.Warning,Sr.AtRule,Sr.Result,Sr.Input,Sr.Rule,Sr.Root,Sr.Node;var wr=Object.defineProperty,__publicField2=function(e,l,_){return function(e,l,_){return l in e?wr(e,l,{enumerable:!0,configurable:!0,writable:!0,value:_}):e[l]=_}(e,"symbol"!==_typeof3(l)?l+"":l,_)};function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function getAugmentedNamespace(e){if(e.__esModule)return e;var l=e.default;if("function"==typeof l){var _=function a22(){return this instanceof a22?Reflect.construct(l,arguments,this.constructor):l.apply(this,arguments)};_.prototype=l.prototype}else _={};return Object.defineProperty(_,"__esModule",{value:!0}),Object.keys(e).forEach(function(l){var S=Object.getOwnPropertyDescriptor(e,l);Object.defineProperty(_,l,S.get?S:{enumerable:!0,get:function(){return e[l]}})}),_}var xr={exports:{}},Er=String,create=function(){return{isColorSupported:!1,reset:Er,bold:Er,dim:Er,italic:Er,underline:Er,inverse:Er,hidden:Er,strikethrough:Er,black:Er,red:Er,green:Er,yellow:Er,blue:Er,magenta:Er,cyan:Er,white:Er,gray:Er,bgBlack:Er,bgRed:Er,bgGreen:Er,bgYellow:Er,bgBlue:Er,bgMagenta:Er,bgCyan:Er,bgWhite:Er}};xr.exports=create(),xr.exports.createColors=create;var kr=xr.exports,Ar=getAugmentedNamespace(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"}))),Cr=kr,Tr=Ar,Mr=function(e){function CssSyntaxError2(e,l,_,S,E,k){var T;return _classCallCheck3(this,CssSyntaxError2),(T=_callSuper(this,CssSyntaxError2,[e])).name="CssSyntaxError",T.reason=e,E&&(T.file=E),S&&(T.source=S),k&&(T.plugin=k),void 0!==l&&void 0!==_&&("number"==typeof l?(T.line=l,T.column=_):(T.line=l.line,T.column=l.column,T.endLine=_.line,T.endColumn=_.column)),T.setMessage(),Error.captureStackTrace&&Error.captureStackTrace(T,CssSyntaxError2),T}return _inherits(CssSyntaxError2,e),_createClass3(CssSyntaxError2,[{key:"setMessage",value:function(){this.message=this.plugin?this.plugin+": ":"",this.message+=this.file?this.file:"<css input>",void 0!==this.line&&(this.message+=":"+this.line+":"+this.column),this.message+=": "+this.reason}},{key:"showSourceCode",value:function(e){var l=this;if(!this.source)return"";var _=this.source;null==e&&(e=Cr.isColorSupported),Tr&&e&&(_=Tr(_));var S,E,k=_.split(/\r?\n/),T=Math.max(this.line-3,0),M=Math.min(this.line+2,k.length),R=String(M).length;if(e){var I=Cr.createColors(!0),O=I.bold,D=I.gray,L=I.red;S=function(e){return O(L(e))},E=function(e){return D(e)}}else S=E=function(e){return e};return k.slice(T,M).map(function(e,_){var k=T+1+_,M=" "+(" "+k).slice(-R)+" | ";if(k===l.line){var I=E(M.replace(/\d/g," "))+e.slice(0,l.column-1).replace(/[^\t]/g," ");return S(">")+E(M)+e+"\n "+I+S("^")}return" "+E(M)+e}).join("\n")}},{key:"toString",value:function(){var e=this.showSourceCode();return e&&(e="\n\n"+e+"\n"),this.name+": "+this.message+e}}])}(_wrapNativeSuper(Error)),Rr=Mr;Mr.default=Mr;var Ir={};Ir.isClean=Symbol("isClean"),Ir.my=Symbol("my");var Pr={after:"\n",beforeClose:"\n",beforeComment:"\n",beforeDecl:"\n",beforeOpen:" ",beforeRule:"\n",colon:": ",commentLeft:" ",commentRight:" ",emptyBody:"",indent:"    ",semicolon:!1};var Or=function(){return _createClass3(function Stringifier2(e){_classCallCheck3(this,Stringifier2),this.builder=e},[{key:"atrule",value:function(e,l){var _="@"+e.name,S=e.params?this.rawValue(e,"params"):"";if(void 0!==e.raws.afterName?_+=e.raws.afterName:S&&(_+=" "),e.nodes)this.block(e,_+S);else{var E=(e.raws.between||"")+(l?";":"");this.builder(_+S+E,e)}}},{key:"beforeAfter",value:function(e,l){var _;_="decl"===e.type?this.raw(e,null,"beforeDecl"):"comment"===e.type?this.raw(e,null,"beforeComment"):"before"===l?this.raw(e,null,"beforeRule"):this.raw(e,null,"beforeClose");for(var S=e.parent,E=0;S&&"root"!==S.type;)E+=1,S=S.parent;if(_.includes("\n")){var k=this.raw(e,null,"indent");if(k.length)for(var T=0;T<E;T++)_+=k}return _}},{key:"block",value:function(e,l){var _,S=this.raw(e,"between","beforeOpen");this.builder(l+S+"{",e,"start"),e.nodes&&e.nodes.length?(this.body(e),_=this.raw(e,"after")):_=this.raw(e,"after","emptyBody"),_&&this.builder(_),this.builder("}",e,"end")}},{key:"body",value:function(e){for(var l=e.nodes.length-1;l>0&&"comment"===e.nodes[l].type;)l-=1;for(var _=this.raw(e,"semicolon"),S=0;S<e.nodes.length;S++){var E=e.nodes[S],k=this.raw(E,"before");k&&this.builder(k),this.stringify(E,l!==S||_)}}},{key:"comment",value:function(e){var l=this.raw(e,"left","commentLeft"),_=this.raw(e,"right","commentRight");this.builder("/*"+l+e.text+_+"*/",e)}},{key:"decl",value:function(e,l){var _=this.raw(e,"between","colon"),S=e.prop+_+this.rawValue(e,"value");e.important&&(S+=e.raws.important||" !important"),l&&(S+=";"),this.builder(S,e)}},{key:"document",value:function(e){this.body(e)}},{key:"raw",value:function(e,l,_){var S;if(_||(_=l),l&&void 0!==(S=e.raws[l]))return S;var E=e.parent;if("before"===_){if(!E||"root"===E.type&&E.first===e)return"";if(E&&"document"===E.type)return""}if(!E)return Pr[_];var k=e.root();if(k.rawCache||(k.rawCache={}),void 0!==k.rawCache[_])return k.rawCache[_];if("before"===_||"after"===_)return this.beforeAfter(e,_);var T,M="raw"+((T=_)[0].toUpperCase()+T.slice(1));return this[M]?S=this[M](k,e):k.walk(function(e){if(void 0!==(S=e.raws[l]))return!1}),void 0===S&&(S=Pr[_]),k.rawCache[_]=S,S}},{key:"rawBeforeClose",value:function(e){var l;return e.walk(function(e){if(e.nodes&&e.nodes.length>0&&void 0!==e.raws.after)return(l=e.raws.after).includes("\n")&&(l=l.replace(/[^\n]+$/,"")),!1}),l&&(l=l.replace(/\S/g,"")),l}},{key:"rawBeforeComment",value:function(e,l){var _;return e.walkComments(function(e){if(void 0!==e.raws.before)return(_=e.raws.before).includes("\n")&&(_=_.replace(/[^\n]+$/,"")),!1}),void 0===_?_=this.raw(l,null,"beforeDecl"):_&&(_=_.replace(/\S/g,"")),_}},{key:"rawBeforeDecl",value:function(e,l){var _;return e.walkDecls(function(e){if(void 0!==e.raws.before)return(_=e.raws.before).includes("\n")&&(_=_.replace(/[^\n]+$/,"")),!1}),void 0===_?_=this.raw(l,null,"beforeRule"):_&&(_=_.replace(/\S/g,"")),_}},{key:"rawBeforeOpen",value:function(e){var l;return e.walk(function(e){if("decl"!==e.type&&void 0!==(l=e.raws.between))return!1}),l}},{key:"rawBeforeRule",value:function(e){var l;return e.walk(function(_){if(_.nodes&&(_.parent!==e||e.first!==_)&&void 0!==_.raws.before)return(l=_.raws.before).includes("\n")&&(l=l.replace(/[^\n]+$/,"")),!1}),l&&(l=l.replace(/\S/g,"")),l}},{key:"rawColon",value:function(e){var l;return e.walkDecls(function(e){if(void 0!==e.raws.between)return l=e.raws.between.replace(/[^\s:]/g,""),!1}),l}},{key:"rawEmptyBody",value:function(e){var l;return e.walk(function(e){if(e.nodes&&0===e.nodes.length&&void 0!==(l=e.raws.after))return!1}),l}},{key:"rawIndent",value:function(e){return e.raws.indent?e.raws.indent:(e.walk(function(_){var S=_.parent;if(S&&S!==e&&S.parent&&S.parent===e&&void 0!==_.raws.before){var E=_.raws.before.split("\n");return l=(l=E[E.length-1]).replace(/\S/g,""),!1}}),l);var l}},{key:"rawSemicolon",value:function(e){var l;return e.walk(function(e){if(e.nodes&&e.nodes.length&&"decl"===e.last.type&&void 0!==(l=e.raws.semicolon))return!1}),l}},{key:"rawValue",value:function(e,l){var _=e[l],S=e.raws[l];return S&&S.value===_?S.raw:_}},{key:"root",value:function(e){this.body(e),e.raws.after&&this.builder(e.raws.after)}},{key:"rule",value:function(e){this.block(e,this.rawValue(e,"selector")),e.raws.ownSemicolon&&this.builder(e.raws.ownSemicolon,e,"end")}},{key:"stringify",value:function(e,l){if(!this[e.type])throw new Error("Unknown AST node type "+e.type+". Maybe you need to change PostCSS stringifier.");this[e.type](e,l)}}])}(),Dr=Or;Or.default=Or;var Lr=Dr;function stringify$4(e,l){new Lr(l).stringify(e)}var Ur=stringify$4;stringify$4.default=stringify$4;var Fr=Ir.isClean,Nr=Ir.my,Br=Rr,zr=Dr,jr=Ur;function cloneNode(e,l){var _=new e.constructor;for(var S in e)if(Object.prototype.hasOwnProperty.call(e,S)&&"proxyCache"!==S){var E=e[S],k=_typeof3(E);"parent"===S&&"object"===k?l&&(_[S]=l):"source"===S?_[S]=E:Array.isArray(E)?_[S]=E.map(function(e){return cloneNode(e,_)}):("object"===k&&null!==E&&(E=cloneNode(E)),_[S]=E)}return _}var Gr=function(){return _createClass3(function Node3(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(var l in _classCallCheck3(this,Node3),this.raws={},this[Fr]=!1,this[Nr]=!0,e)if("nodes"===l){this.nodes=[];var _,S=_createForOfIteratorHelper2(e[l]);try{for(S.s();!(_=S.n()).done;){var E=_.value;"function"==typeof E.clone?this.append(E.clone()):this.append(E)}}catch(k){S.e(k)}finally{S.f()}}else this[l]=e[l]},[{key:"addToError",value:function(e){if(e.postcssNode=this,e.stack&&this.source&&/\n\s{4}at /.test(e.stack)){var l=this.source;e.stack=e.stack.replace(/\n\s{4}at /,"$&".concat(l.input.from,":").concat(l.start.line,":").concat(l.start.column,"$&"))}return e}},{key:"after",value:function(e){return this.parent.insertAfter(this,e),this}},{key:"assign",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(var l in e)this[l]=e[l];return this}},{key:"before",value:function(e){return this.parent.insertBefore(this,e),this}},{key:"cleanRaws",value:function(e){delete this.raws.before,delete this.raws.after,e||delete this.raws.between}},{key:"clone",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=cloneNode(this);for(var _ in e)l[_]=e[_];return l}},{key:"cloneAfter",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=this.clone(e);return this.parent.insertAfter(this,l),l}},{key:"cloneBefore",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=this.clone(e);return this.parent.insertBefore(this,l),l}},{key:"error",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.source){var _=this.rangeBy(l),S=_.end,E=_.start;return this.source.input.error(e,{column:E.column,line:E.line},{column:S.column,line:S.line},l)}return new Br(e)}},{key:"getProxyProcessor",value:function(){return{get:function(e,l){return"proxyOf"===l?e:"root"===l?function(){return e.root().toProxy()}:e[l]},set:function(e,l,_){return e[l]===_||(e[l]=_,"prop"!==l&&"value"!==l&&"name"!==l&&"params"!==l&&"important"!==l&&"text"!==l||e.markDirty()),!0}}}},{key:"markDirty",value:function(){if(this[Fr]){this[Fr]=!1;for(var e=this;e=e.parent;)e[Fr]=!1}}},{key:"next",value:function(){if(this.parent){var e=this.parent.index(this);return this.parent.nodes[e+1]}}},{key:"positionBy",value:function(e,l){var _=this.source.start;if(e.index)_=this.positionInside(e.index,l);else if(e.word){var S=(l=this.toString()).indexOf(e.word);-1!==S&&(_=this.positionInside(S,l))}return _}},{key:"positionInside",value:function(e,l){for(var _=l||this.toString(),S=this.source.start.column,E=this.source.start.line,k=0;k<e;k++)"\n"===_[k]?(S=1,E+=1):S+=1;return{column:S,line:E}}},{key:"prev",value:function(){if(this.parent){var e=this.parent.index(this);return this.parent.nodes[e-1]}}},{key:"rangeBy",value:function(e){var l={column:this.source.start.column,line:this.source.start.line},_=this.source.end?{column:this.source.end.column+1,line:this.source.end.line}:{column:l.column+1,line:l.line};if(e.word){var S=this.toString(),E=S.indexOf(e.word);-1!==E&&(l=this.positionInside(E,S),_=this.positionInside(E+e.word.length,S))}else e.start?l={column:e.start.column,line:e.start.line}:e.index&&(l=this.positionInside(e.index)),e.end?_={column:e.end.column,line:e.end.line}:"number"==typeof e.endIndex?_=this.positionInside(e.endIndex):e.index&&(_=this.positionInside(e.index+1));return(_.line<l.line||_.line===l.line&&_.column<=l.column)&&(_={column:l.column+1,line:l.line}),{end:_,start:l}}},{key:"raw",value:function(e,l){return(new zr).raw(this,e,l)}},{key:"remove",value:function(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this}},{key:"replaceWith",value:function(){if(this.parent){for(var e=this,l=!1,_=arguments.length,S=new Array(_),E=0;E<_;E++)S[E]=arguments[E];for(var k=0,T=S;k<T.length;k++){var M=T[k];M===this?l=!0:l?(this.parent.insertAfter(e,M),e=M):this.parent.insertBefore(e,M)}l||this.remove()}return this}},{key:"root",value:function(){for(var e=this;e.parent&&"document"!==e.parent.type;)e=e.parent;return e}},{key:"toJSON",value:function(e,l){var _={},S=null==l;l=l||new Map;var E=0;for(var k in this)if(Object.prototype.hasOwnProperty.call(this,k)&&"parent"!==k&&"proxyCache"!==k){var T=this[k];if(Array.isArray(T))_[k]=T.map(function(e){return"object"===_typeof3(e)&&e.toJSON?e.toJSON(null,l):e});else if("object"===_typeof3(T)&&T.toJSON)_[k]=T.toJSON(null,l);else if("source"===k){var M=l.get(T.input);null==M&&(M=E,l.set(T.input,E),E++),_[k]={end:T.end,inputId:M,start:T.start}}else _[k]=T}return S&&(_.inputs=_toConsumableArray3(l.keys()).map(function(e){return e.toJSON()})),_}},{key:"toProxy",value:function(){return this.proxyCache||(this.proxyCache=new Proxy(this,this.getProxyProcessor())),this.proxyCache}},{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jr;e.stringify&&(e=e.stringify);var l="";return e(this,function(e){l+=e}),l}},{key:"warn",value:function(e,l,_){var S={node:this};for(var E in _)S[E]=_[E];return e.warn(l,S)}},{key:"proxyOf",get:function(){return this}}])}(),Hr=Gr;Gr.default=Gr;var Vr=function(e){function Declaration2(e){var l;return _classCallCheck3(this,Declaration2),e&&void 0!==e.value&&"string"!=typeof e.value&&(e=_objectSpread2(_objectSpread2({},e),{},{value:String(e.value)})),(l=_callSuper(this,Declaration2,[e])).type="decl",l}return _inherits(Declaration2,e),_createClass3(Declaration2,[{key:"variable",get:function(){return this.prop.startsWith("--")||"$"===this.prop[0]}}])}(Hr),Wr=Vr;Vr.default=Vr;var nonSecure_nanoid=function(){for(var e="",l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:21;l--;)e+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[64*Math.random()|0];return e},qr=Ar.SourceMapConsumer,Xr=Ar.SourceMapGenerator,Kr=Ar.existsSync,Yr=Ar.readFileSync,Jr=Ar.dirname,Qr=Ar.join;var Zr=function(){return _createClass3(function PreviousMap2(e,l){if(_classCallCheck3(this,PreviousMap2),!1!==l.map){this.loadAnnotation(e),this.inline=this.startWith(this.annotation,"data:");var _=l.map?l.map.prev:void 0,S=this.loadMap(l.from,_);!this.mapFile&&l.from&&(this.mapFile=l.from),this.mapFile&&(this.root=Jr(this.mapFile)),S&&(this.text=S)}},[{key:"consumer",value:function(){return this.consumerCache||(this.consumerCache=new qr(this.text)),this.consumerCache}},{key:"decodeInline",value:function(e){var l;if(/^data:application\/json;charset=utf-?8,/.test(e)||/^data:application\/json,/.test(e))return decodeURIComponent(e.substr(RegExp.lastMatch.length));if(/^data:application\/json;charset=utf-?8;base64,/.test(e)||/^data:application\/json;base64,/.test(e))return l=e.substr(RegExp.lastMatch.length),Buffer?Buffer.from(l,"base64").toString():window.atob(l);var _=e.match(/data:application\/json;([^,]+),/)[1];throw new Error("Unsupported source map encoding "+_)}},{key:"getAnnotationURL",value:function(e){return e.replace(/^\/\*\s*# sourceMappingURL=/,"").trim()}},{key:"isMap",value:function(e){return"object"===_typeof3(e)&&("string"==typeof e.mappings||"string"==typeof e._mappings||Array.isArray(e.sections))}},{key:"loadAnnotation",value:function(e){var l=e.match(/\/\*\s*# sourceMappingURL=/gm);if(l){var _=e.lastIndexOf(l.pop()),S=e.indexOf("*/",_);_>-1&&S>-1&&(this.annotation=this.getAnnotationURL(e.substring(_,S)))}}},{key:"loadFile",value:function(e){if(this.root=Jr(e),Kr(e))return this.mapFile=e,Yr(e,"utf-8").toString().trim()}},{key:"loadMap",value:function(e,l){if(!1===l)return!1;if(l){if("string"==typeof l)return l;if("function"!=typeof l){if(l instanceof qr)return Xr.fromSourceMap(l).toString();if(l instanceof Xr)return l.toString();if(this.isMap(l))return JSON.stringify(l);throw new Error("Unsupported previous source map format: "+l.toString())}var _=l(e);if(_){var S=this.loadFile(_);if(!S)throw new Error("Unable to load previous source map: "+_.toString());return S}}else{if(this.inline)return this.decodeInline(this.annotation);if(this.annotation){var E=this.annotation;return e&&(E=Qr(Jr(e),E)),this.loadFile(E)}}}},{key:"startWith",value:function(e,l){return!!e&&e.substr(0,l.length)===l}},{key:"withContent",value:function(){return!!(this.consumer().sourcesContent&&this.consumer().sourcesContent.length>0)}}])}(),$r=Zr;Zr.default=Zr;var ei=Ar.SourceMapConsumer,ti=Ar.SourceMapGenerator,ni=Ar.fileURLToPath,ri=Ar.pathToFileURL,ii=Ar.isAbsolute,ai=Ar.resolve,oi=nonSecure_nanoid,si=Ar,ui=Rr,li=$r,ci=Symbol("fromOffsetCache"),hi=Boolean(ei&&ti),di=Boolean(ai&&ii),fi=function(){return _createClass3(function Input2(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(_classCallCheck3(this,Input2),null==e||"object"===_typeof3(e)&&!e.toString)throw new Error("PostCSS received ".concat(e," instead of CSS string"));if(this.css=e.toString(),"\ufeff"===this.css[0]||""===this.css[0]?(this.hasBOM=!0,this.css=this.css.slice(1)):this.hasBOM=!1,l.from&&(!di||/^\w+:\/\//.test(l.from)||ii(l.from)?this.file=l.from:this.file=ai(l.from)),di&&hi){var _=new li(this.css,l);if(_.text){this.map=_;var S=_.consumer().file;!this.file&&S&&(this.file=this.mapResolve(S))}}this.file||(this.id="<input css "+oi(6)+">"),this.map&&(this.map.file=this.from)},[{key:"error",value:function(e,l,_){var S,E,k,T=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(l&&"object"===_typeof3(l)){var M=l,R=_;if("number"==typeof M.offset){var I=this.fromOffset(M.offset);l=I.line,_=I.col}else l=M.line,_=M.column;if("number"==typeof R.offset){var O=this.fromOffset(R.offset);E=O.line,k=O.col}else E=R.line,k=R.column}else if(!_){var D=this.fromOffset(l);l=D.line,_=D.col}var L=this.origin(l,_,E,k);return(S=L?new ui(e,void 0===L.endLine?L.line:{column:L.column,line:L.line},void 0===L.endLine?L.column:{column:L.endColumn,line:L.endLine},L.source,L.file,T.plugin):new ui(e,void 0===E?l:{column:_,line:l},void 0===E?_:{column:k,line:E},this.css,this.file,T.plugin)).input={column:_,endColumn:k,endLine:E,line:l,source:this.css},this.file&&(ri&&(S.input.url=ri(this.file).toString()),S.input.file=this.file),S}},{key:"fromOffset",value:function(e){var l;if(this[ci])l=this[ci];else{var _=this.css.split("\n");l=new Array(_.length);for(var S=0,E=0,k=_.length;E<k;E++)l[E]=S,S+=_[E].length+1;this[ci]=l}var T=0;if(e>=l[l.length-1])T=l.length-1;else for(var M,R=l.length-2;T<R;)if(e<l[M=T+(R-T>>1)])R=M-1;else{if(!(e>=l[M+1])){T=M;break}T=M+1}return{col:e-l[T]+1,line:T+1}}},{key:"mapResolve",value:function(e){return/^\w+:\/\//.test(e)?e:ai(this.map.consumer().sourceRoot||this.map.root||".",e)}},{key:"origin",value:function(e,l,_,S){if(!this.map)return!1;var E,k,T=this.map.consumer(),M=T.originalPositionFor({column:l,line:e});if(!M.source)return!1;"number"==typeof _&&(E=T.originalPositionFor({column:S,line:_})),k=ii(M.source)?ri(M.source):new URL(M.source,this.map.consumer().sourceRoot||ri(this.map.mapFile));var R={column:M.column,endColumn:E&&E.column,endLine:E&&E.line,line:M.line,url:k.toString()};if("file:"===k.protocol){if(!ni)throw new Error("file: protocol is not available in this PostCSS build");R.file=ni(k)}var I=T.sourceContentFor(M.source);return I&&(R.source=I),R}},{key:"toJSON",value:function(){for(var e={},l=0,_=["hasBOM","css","file","id"];l<_.length;l++){var S=_[l];null!=this[S]&&(e[S]=this[S])}return this.map&&(e.map=_objectSpread2({},this.map),e.map.consumerCache&&(e.map.consumerCache=void 0)),e}},{key:"from",get:function(){return this.file||this.id}}])}(),pi=fi;fi.default=fi,si&&si.registerInput&&si.registerInput(fi);var vi=Ar.SourceMapConsumer,gi=Ar.SourceMapGenerator,mi=Ar.dirname,yi=Ar.relative,_i=Ar.resolve,bi=Ar.sep,Si=Ar.pathToFileURL,wi=pi,xi=Boolean(vi&&gi),Ei=Boolean(mi&&_i&&yi&&bi),ki=function(){return _createClass3(function MapGenerator2(e,l,_,S){_classCallCheck3(this,MapGenerator2),this.stringify=e,this.mapOpts=_.map||{},this.root=l,this.opts=_,this.css=S,this.originalCSS=S,this.usesFileUrls=!this.mapOpts.from&&this.mapOpts.absolute,this.memoizedFileURLs=new Map,this.memoizedPaths=new Map,this.memoizedURLs=new Map},[{key:"addAnnotation",value:function(){var e;e=this.isInline()?"data:application/json;base64,"+this.toBase64(this.map.toString()):"string"==typeof this.mapOpts.annotation?this.mapOpts.annotation:"function"==typeof this.mapOpts.annotation?this.mapOpts.annotation(this.opts.to,this.root):this.outputFile()+".map";var l="\n";this.css.includes("\r\n")&&(l="\r\n"),this.css+=l+"/*# sourceMappingURL="+e+" */"}},{key:"applyPrevMaps",value:function(){var e,l=_createForOfIteratorHelper2(this.previous());try{for(l.s();!(e=l.n()).done;){var _=e.value,S=this.toUrl(this.path(_.file)),E=_.root||mi(_.file),k=void 0;!1===this.mapOpts.sourcesContent?(k=new vi(_.text)).sourcesContent&&(k.sourcesContent=null):k=_.consumer(),this.map.applySourceMap(k,S,this.toUrl(this.path(E)))}}catch(T){l.e(T)}finally{l.f()}}},{key:"clearAnnotation",value:function(){if(!1!==this.mapOpts.annotation)if(this.root)for(var e,l=this.root.nodes.length-1;l>=0;l--)"comment"===(e=this.root.nodes[l]).type&&0===e.text.indexOf("# sourceMappingURL=")&&this.root.removeChild(l);else this.css&&(this.css=this.css.replace(/\n*?\/\*#[\S\s]*?\*\/$/gm,""))}},{key:"generate",value:function(){if(this.clearAnnotation(),Ei&&xi&&this.isMap())return this.generateMap();var e="";return this.stringify(this.root,function(l){e+=l}),[e]}},{key:"generateMap",value:function(){if(this.root)this.generateString();else if(1===this.previous().length){var e=this.previous()[0].consumer();e.file=this.outputFile(),this.map=gi.fromSourceMap(e,{ignoreInvalidMapping:!0})}else this.map=new gi({file:this.outputFile(),ignoreInvalidMapping:!0}),this.map.addMapping({generated:{column:0,line:1},original:{column:0,line:1},source:this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>"});return this.isSourcesContent()&&this.setSourcesContent(),this.root&&this.previous().length>0&&this.applyPrevMaps(),this.isAnnotation()&&this.addAnnotation(),this.isInline()?[this.css]:[this.css,this.map]}},{key:"generateString",value:function(){var e=this;this.css="",this.map=new gi({file:this.outputFile(),ignoreInvalidMapping:!0});var l,_,S=1,E=1,k="<no source>",T={generated:{column:0,line:0},original:{column:0,line:0},source:""};this.stringify(this.root,function(M,R,I){if(e.css+=M,R&&"end"!==I&&(T.generated.line=S,T.generated.column=E-1,R.source&&R.source.start?(T.source=e.sourcePath(R),T.original.line=R.source.start.line,T.original.column=R.source.start.column-1,e.map.addMapping(T)):(T.source=k,T.original.line=1,T.original.column=0,e.map.addMapping(T))),(l=M.match(/\n/g))?(S+=l.length,_=M.lastIndexOf("\n"),E=M.length-_):E+=M.length,R&&"start"!==I){var O=R.parent||{raws:{}};("decl"===R.type||"atrule"===R.type&&!R.nodes)&&R===O.last&&!O.raws.semicolon||(R.source&&R.source.end?(T.source=e.sourcePath(R),T.original.line=R.source.end.line,T.original.column=R.source.end.column-1,T.generated.line=S,T.generated.column=E-2,e.map.addMapping(T)):(T.source=k,T.original.line=1,T.original.column=0,T.generated.line=S,T.generated.column=E-1,e.map.addMapping(T)))}})}},{key:"isAnnotation",value:function(){return!!this.isInline()||(void 0!==this.mapOpts.annotation?this.mapOpts.annotation:!this.previous().length||this.previous().some(function(e){return e.annotation}))}},{key:"isInline",value:function(){if(void 0!==this.mapOpts.inline)return this.mapOpts.inline;var e=this.mapOpts.annotation;return(void 0===e||!0===e)&&(!this.previous().length||this.previous().some(function(e){return e.inline}))}},{key:"isMap",value:function(){return void 0!==this.opts.map?!!this.opts.map:this.previous().length>0}},{key:"isSourcesContent",value:function(){return void 0!==this.mapOpts.sourcesContent?this.mapOpts.sourcesContent:!this.previous().length||this.previous().some(function(e){return e.withContent()})}},{key:"outputFile",value:function(){return this.opts.to?this.path(this.opts.to):this.opts.from?this.path(this.opts.from):"to.css"}},{key:"path",value:function(e){if(this.mapOpts.absolute)return e;if(60===e.charCodeAt(0))return e;if(/^\w+:\/\//.test(e))return e;var l=this.memoizedPaths.get(e);if(l)return l;var _=this.opts.to?mi(this.opts.to):".";"string"==typeof this.mapOpts.annotation&&(_=mi(_i(_,this.mapOpts.annotation)));var S=yi(_,e);return this.memoizedPaths.set(e,S),S}},{key:"previous",value:function(){var e=this;if(!this.previousMaps)if(this.previousMaps=[],this.root)this.root.walk(function(l){if(l.source&&l.source.input.map){var _=l.source.input.map;e.previousMaps.includes(_)||e.previousMaps.push(_)}});else{var l=new wi(this.originalCSS,this.opts);l.map&&this.previousMaps.push(l.map)}return this.previousMaps}},{key:"setSourcesContent",value:function(){var e=this,l={};if(this.root)this.root.walk(function(_){if(_.source){var S=_.source.input.from;if(S&&!l[S]){l[S]=!0;var E=e.usesFileUrls?e.toFileUrl(S):e.toUrl(e.path(S));e.map.setSourceContent(E,_.source.input.css)}}});else if(this.css){var _=this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>";this.map.setSourceContent(_,this.css)}}},{key:"sourcePath",value:function(e){return this.mapOpts.from?this.toUrl(this.mapOpts.from):this.usesFileUrls?this.toFileUrl(e.source.input.from):this.toUrl(this.path(e.source.input.from))}},{key:"toBase64",value:function(e){return Buffer?Buffer.from(e).toString("base64"):window.btoa(unescape(encodeURIComponent(e)))}},{key:"toFileUrl",value:function(e){var l=this.memoizedFileURLs.get(e);if(l)return l;if(Si){var _=Si(e).toString();return this.memoizedFileURLs.set(e,_),_}throw new Error("`map.absolute` option is not available in this PostCSS build")}},{key:"toUrl",value:function(e){var l=this.memoizedURLs.get(e);if(l)return l;"\\"===bi&&(e=e.replace(/\\/g,"/"));var _=encodeURI(e).replace(/[#?]/g,encodeURIComponent);return this.memoizedURLs.set(e,_),_}}])}(),Ai=function(e){function Comment2(e){var l;return _classCallCheck3(this,Comment2),(l=_callSuper(this,Comment2,[e])).type="comment",l}return _inherits(Comment2,e),_createClass3(Comment2)}(Hr),Ci=Ai;Ai.default=Ai;var Ti,Mi,Ri,Ii,Pi=Ir.isClean,Oi=Ir.my,Di=Wr,Li=Ci;function cleanSource(e){return e.map(function(e){return e.nodes&&(e.nodes=cleanSource(e.nodes)),delete e.source,e})}function markDirtyUp(e){if(e[Pi]=!1,e.proxyOf.nodes){var l,_=_createForOfIteratorHelper2(e.proxyOf.nodes);try{for(_.s();!(l=_.n()).done;){markDirtyUp(l.value)}}catch(S){_.e(S)}finally{_.f()}}}var Ui=function(e){function Container2(){return _classCallCheck3(this,Container2),_callSuper(this,Container2,arguments)}return _inherits(Container2,e),_createClass3(Container2,[{key:"append",value:function(){for(var e=arguments.length,l=new Array(e),_=0;_<e;_++)l[_]=arguments[_];for(var S=0,E=l;S<E.length;S++){var k,T=E[S],M=_createForOfIteratorHelper2(this.normalize(T,this.last));try{for(M.s();!(k=M.n()).done;){var R=k.value;this.proxyOf.nodes.push(R)}}catch(I){M.e(I)}finally{M.f()}}return this.markDirty(),this}},{key:"cleanRaws",value:function(e){if(_superPropGet(Container2,"cleanRaws",this,3)([e]),this.nodes){var l,_=_createForOfIteratorHelper2(this.nodes);try{for(_.s();!(l=_.n()).done;){l.value.cleanRaws(e)}}catch(S){_.e(S)}finally{_.f()}}}},{key:"each",value:function(e){if(this.proxyOf.nodes){for(var l,_,S=this.getIterator();this.indexes[S]<this.proxyOf.nodes.length&&(l=this.indexes[S],!1!==(_=e(this.proxyOf.nodes[l],l)));)this.indexes[S]+=1;return delete this.indexes[S],_}}},{key:"every",value:function(e){return this.nodes.every(e)}},{key:"getIterator",value:function(){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={}),this.lastEach+=1;var e=this.lastEach;return this.indexes[e]=0,e}},{key:"getProxyProcessor",value:function(){return{get:function(e,l){return"proxyOf"===l?e:e[l]?"each"===l||"string"==typeof l&&l.startsWith("walk")?function(){for(var _=arguments.length,S=new Array(_),E=0;E<_;E++)S[E]=arguments[E];return e[l].apply(e,_toConsumableArray3(S.map(function(e){return"function"==typeof e?function(l,_){return e(l.toProxy(),_)}:e})))}:"every"===l||"some"===l?function(_){return e[l](function(e){for(var l=arguments.length,S=new Array(l>1?l-1:0),E=1;E<l;E++)S[E-1]=arguments[E];return _.apply(void 0,[e.toProxy()].concat(S))})}:"root"===l?function(){return e.root().toProxy()}:"nodes"===l?e.nodes.map(function(e){return e.toProxy()}):"first"===l||"last"===l?e[l].toProxy():e[l]:e[l]},set:function(e,l,_){return e[l]===_||(e[l]=_,"name"!==l&&"params"!==l&&"selector"!==l||e.markDirty()),!0}}}},{key:"index",value:function(e){return"number"==typeof e?e:(e.proxyOf&&(e=e.proxyOf),this.proxyOf.nodes.indexOf(e))}},{key:"insertAfter",value:function(e,l){var _=this.index(e),S=this.normalize(l,this.proxyOf.nodes[_]).reverse();_=this.index(e);var E,k,T=_createForOfIteratorHelper2(S);try{for(T.s();!(E=T.n()).done;){var M=E.value;this.proxyOf.nodes.splice(_+1,0,M)}}catch(I){T.e(I)}finally{T.f()}for(var R in this.indexes)_<(k=this.indexes[R])&&(this.indexes[R]=k+S.length);return this.markDirty(),this}},{key:"insertBefore",value:function(e,l){var _=this.index(e),S=0===_&&"prepend",E=this.normalize(l,this.proxyOf.nodes[_],S).reverse();_=this.index(e);var k,T,M=_createForOfIteratorHelper2(E);try{for(M.s();!(k=M.n()).done;){var R=k.value;this.proxyOf.nodes.splice(_,0,R)}}catch(O){M.e(O)}finally{M.f()}for(var I in this.indexes)_<=(T=this.indexes[I])&&(this.indexes[I]=T+E.length);return this.markDirty(),this}},{key:"normalize",value:function(e,l){var _=this;if("string"==typeof e)e=cleanSource(Ti(e).nodes);else if(void 0===e)e=[];else if(Array.isArray(e)){var S,E=_createForOfIteratorHelper2(e=e.slice(0));try{for(E.s();!(S=E.n()).done;){var k=S.value;k.parent&&k.parent.removeChild(k,"ignore")}}catch(O){E.e(O)}finally{E.f()}}else if("root"===e.type&&"document"!==this.type){var T,M=_createForOfIteratorHelper2(e=e.nodes.slice(0));try{for(M.s();!(T=M.n()).done;){var R=T.value;R.parent&&R.parent.removeChild(R,"ignore")}}catch(O){M.e(O)}finally{M.f()}}else if(e.type)e=[e];else if(e.prop){if(void 0===e.value)throw new Error("Value field is missed in node creation");"string"!=typeof e.value&&(e.value=String(e.value)),e=[new Di(e)]}else if(e.selector)e=[new Mi(e)];else if(e.name)e=[new Ri(e)];else{if(!e.text)throw new Error("Unknown node type in node creation");e=[new Li(e)]}var I=e.map(function(e){return e[Oi]||Container2.rebuild(e),(e=e.proxyOf).parent&&e.parent.removeChild(e),e[Pi]&&markDirtyUp(e),void 0===e.raws.before&&l&&void 0!==l.raws.before&&(e.raws.before=l.raws.before.replace(/\S/g,"")),e.parent=_.proxyOf,e});return I}},{key:"prepend",value:function(){for(var e=arguments.length,l=new Array(e),_=0;_<e;_++)l[_]=arguments[_];var S,E=_createForOfIteratorHelper2(l=l.reverse());try{for(E.s();!(S=E.n()).done;){var k,T=S.value,M=this.normalize(T,this.first,"prepend").reverse(),R=_createForOfIteratorHelper2(M);try{for(R.s();!(k=R.n()).done;){var I=k.value;this.proxyOf.nodes.unshift(I)}}catch(D){R.e(D)}finally{R.f()}for(var O in this.indexes)this.indexes[O]=this.indexes[O]+M.length}}catch(D){E.e(D)}finally{E.f()}return this.markDirty(),this}},{key:"push",value:function(e){return e.parent=this,this.proxyOf.nodes.push(e),this}},{key:"removeAll",value:function(){var e,l=_createForOfIteratorHelper2(this.proxyOf.nodes);try{for(l.s();!(e=l.n()).done;){e.value.parent=void 0}}catch(_){l.e(_)}finally{l.f()}return this.proxyOf.nodes=[],this.markDirty(),this}},{key:"removeChild",value:function(e){var l;for(var _ in e=this.index(e),this.proxyOf.nodes[e].parent=void 0,this.proxyOf.nodes.splice(e,1),this.indexes)(l=this.indexes[_])>=e&&(this.indexes[_]=l-1);return this.markDirty(),this}},{key:"replaceValues",value:function(e,l,_){return _||(_=l,l={}),this.walkDecls(function(S){l.props&&!l.props.includes(S.prop)||l.fast&&!S.value.includes(l.fast)||(S.value=S.value.replace(e,_))}),this.markDirty(),this}},{key:"some",value:function(e){return this.nodes.some(e)}},{key:"walk",value:function(e){return this.each(function(l,_){var S;try{S=e(l,_)}catch(E){throw l.addToError(E)}return!1!==S&&l.walk&&(S=l.walk(e)),S})}},{key:"walkAtRules",value:function(e,l){return l?e instanceof RegExp?this.walk(function(_,S){if("atrule"===_.type&&e.test(_.name))return l(_,S)}):this.walk(function(_,S){if("atrule"===_.type&&_.name===e)return l(_,S)}):(l=e,this.walk(function(e,_){if("atrule"===e.type)return l(e,_)}))}},{key:"walkComments",value:function(e){return this.walk(function(l,_){if("comment"===l.type)return e(l,_)})}},{key:"walkDecls",value:function(e,l){return l?e instanceof RegExp?this.walk(function(_,S){if("decl"===_.type&&e.test(_.prop))return l(_,S)}):this.walk(function(_,S){if("decl"===_.type&&_.prop===e)return l(_,S)}):(l=e,this.walk(function(e,_){if("decl"===e.type)return l(e,_)}))}},{key:"walkRules",value:function(e,l){return l?e instanceof RegExp?this.walk(function(_,S){if("rule"===_.type&&e.test(_.selector))return l(_,S)}):this.walk(function(_,S){if("rule"===_.type&&_.selector===e)return l(_,S)}):(l=e,this.walk(function(e,_){if("rule"===e.type)return l(e,_)}))}},{key:"first",get:function(){if(this.proxyOf.nodes)return this.proxyOf.nodes[0]}},{key:"last",get:function(){if(this.proxyOf.nodes)return this.proxyOf.nodes[this.proxyOf.nodes.length-1]}}])}(Hr);Ui.registerParse=function(e){Ti=e},Ui.registerRule=function(e){Mi=e},Ui.registerAtRule=function(e){Ri=e},Ui.registerRoot=function(e){Ii=e};var Fi=Ui;Ui.default=Ui,Ui.rebuild=function(e){"atrule"===e.type?Object.setPrototypeOf(e,Ri.prototype):"rule"===e.type?Object.setPrototypeOf(e,Mi.prototype):"decl"===e.type?Object.setPrototypeOf(e,Di.prototype):"comment"===e.type?Object.setPrototypeOf(e,Li.prototype):"root"===e.type&&Object.setPrototypeOf(e,Ii.prototype),e[Oi]=!0,e.nodes&&e.nodes.forEach(function(e){Ui.rebuild(e)})};var Ni,Bi,zi=function(e){function Document23(e){var l;return _classCallCheck3(this,Document23),(l=_callSuper(this,Document23,[_objectSpread2({type:"document"},e)])).nodes||(l.nodes=[]),l}return _inherits(Document23,e),_createClass3(Document23,[{key:"toResult",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Ni(new Bi,this,e).stringify()}}])}(Fi);zi.registerLazyResult=function(e){Ni=e},zi.registerProcessor=function(e){Bi=e};var ji=zi;zi.default=zi;var Gi=function(){return _createClass3(function Warning2(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(_classCallCheck3(this,Warning2),this.type="warning",this.text=e,l.node&&l.node.source){var _=l.node.rangeBy(l);this.line=_.start.line,this.column=_.start.column,this.endLine=_.end.line,this.endColumn=_.end.column}for(var S in l)this[S]=l[S]},[{key:"toString",value:function(){return this.node?this.node.error(this.text,{index:this.index,plugin:this.plugin,word:this.word}).message:this.plugin?this.plugin+": "+this.text:this.text}}])}(),Hi=Gi;Gi.default=Gi;var Vi=Hi,Wi=function(){return _createClass3(function Result2(e,l,_){_classCallCheck3(this,Result2),this.processor=e,this.messages=[],this.root=l,this.opts=_,this.css=void 0,this.map=void 0},[{key:"toString",value:function(){return this.css}},{key:"warn",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};l.plugin||this.lastPlugin&&this.lastPlugin.postcssPlugin&&(l.plugin=this.lastPlugin.postcssPlugin);var _=new Vi(e,l);return this.messages.push(_),_}},{key:"warnings",value:function(){return this.messages.filter(function(e){return"warning"===e.type})}},{key:"content",get:function(){return this.css}}])}(),qi=Wi;Wi.default=Wi;var Xi="'".charCodeAt(0),Ki='"'.charCodeAt(0),Yi="\\".charCodeAt(0),Ji="/".charCodeAt(0),Qi="\n".charCodeAt(0),Zi=" ".charCodeAt(0),$i="\f".charCodeAt(0),ea="\t".charCodeAt(0),ta="\r".charCodeAt(0),na="[".charCodeAt(0),ra="]".charCodeAt(0),ia="(".charCodeAt(0),aa=")".charCodeAt(0),oa="{".charCodeAt(0),sa="}".charCodeAt(0),ua=";".charCodeAt(0),la="*".charCodeAt(0),ca=":".charCodeAt(0),ha="@".charCodeAt(0),da=/[\t\n\f\r "#'()/;[\\\]{}]/g,fa=/[\t\n\f\r !"#'():;@[\\\]{}]|\/(?=\*)/g,pa=/.[\r\n"'(/\\]/,va=/[\da-f]/i,ga=Fi,ma=function(e){function AtRule2(e){var l;return _classCallCheck3(this,AtRule2),(l=_callSuper(this,AtRule2,[e])).type="atrule",l}return _inherits(AtRule2,e),_createClass3(AtRule2,[{key:"append",value:function(){this.proxyOf.nodes||(this.nodes=[]);for(var e=arguments.length,l=new Array(e),_=0;_<e;_++)l[_]=arguments[_];return _superPropGet(AtRule2,"append",this,3)(l)}},{key:"prepend",value:function(){this.proxyOf.nodes||(this.nodes=[]);for(var e=arguments.length,l=new Array(e),_=0;_<e;_++)l[_]=arguments[_];return _superPropGet(AtRule2,"prepend",this,3)(l)}}])}(ga),ya=ma;ma.default=ma,ga.registerAtRule(ma);var _a,ba,Sa=Fi,wa=function(e){function Root2(e){var l;return _classCallCheck3(this,Root2),(l=_callSuper(this,Root2,[e])).type="root",l.nodes||(l.nodes=[]),l}return _inherits(Root2,e),_createClass3(Root2,[{key:"normalize",value:function(e,l,_){var S=_superPropGet(Root2,"normalize",this,3)([e]);if(l)if("prepend"===_)this.nodes.length>1?l.raws.before=this.nodes[1].raws.before:delete l.raws.before;else if(this.first!==l){var E,k=_createForOfIteratorHelper2(S);try{for(k.s();!(E=k.n()).done;){E.value.raws.before=l.raws.before}}catch(T){k.e(T)}finally{k.f()}}return S}},{key:"removeChild",value:function(e,l){var _=this.index(e);return!l&&0===_&&this.nodes.length>1&&(this.nodes[1].raws.before=this.nodes[_].raws.before),_superPropGet(Root2,"removeChild",this,3)([e])}},{key:"toResult",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new _a(new ba,this,e).stringify()}}])}(Sa);wa.registerLazyResult=function(e){_a=e},wa.registerProcessor=function(e){ba=e};var xa=wa;wa.default=wa,Sa.registerRoot(wa);var Ea={comma:function(e){return Ea.split(e,[","],!0)},space:function(e){return Ea.split(e,[" ","\n","\t"])},split:function(e,l,_){var S,E=[],k="",T=!1,M=0,R=!1,I="",O=!1,D=_createForOfIteratorHelper2(e);try{for(D.s();!(S=D.n()).done;){var L=S.value;O?O=!1:"\\"===L?O=!0:R?L===I&&(R=!1):'"'===L||"'"===L?(R=!0,I=L):"("===L?M+=1:")"===L?M>0&&(M-=1):0===M&&l.includes(L)&&(T=!0),T?(""!==k&&E.push(k.trim()),k="",T=!1):k+=L}}catch(U){D.e(U)}finally{D.f()}return(_||""!==k)&&E.push(k.trim()),E}},ka=Ea;Ea.default=Ea;var Aa=Fi,Ca=ka,Ta=function(e){function Rule2(e){var l;return _classCallCheck3(this,Rule2),(l=_callSuper(this,Rule2,[e])).type="rule",l.nodes||(l.nodes=[]),l}return _inherits(Rule2,e),_createClass3(Rule2,[{key:"selectors",get:function(){return Ca.comma(this.selector)},set:function(e){var l=this.selector?this.selector.match(/,\s*/):null,_=l?l[0]:","+this.raw("between","beforeOpen");this.selector=e.join(_)}}])}(Aa),Ma=Ta;Ta.default=Ta,Aa.registerRule(Ta);var Ra=Wr,tokenizer22=function(e){var l,_,S,E,k,T,M,R,I,O,D=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},L=e.css.valueOf(),U=D.ignoreErrors,B=L.length,z=0,j=[],G=[];function unclosed(l){throw e.error("Unclosed "+l,z)}return{back:function(e){G.push(e)},endOfFile:function(){return 0===G.length&&z>=B},nextToken:function(e){if(G.length)return G.pop();if(!(z>=B)){var D=!!e&&e.ignoreUnclosed;switch(l=L.charCodeAt(z)){case Qi:case Zi:case ea:case ta:case $i:_=z;do{_+=1,l=L.charCodeAt(_)}while(l===Zi||l===Qi||l===ea||l===ta||l===$i);O=["space",L.slice(z,_)],z=_-1;break;case na:case ra:case oa:case sa:case ca:case ua:case aa:var H=String.fromCharCode(l);O=[H,H,z];break;case ia:if(R=j.length?j.pop()[1]:"",I=L.charCodeAt(z+1),"url"===R&&I!==Xi&&I!==Ki&&I!==Zi&&I!==Qi&&I!==ea&&I!==$i&&I!==ta){_=z;do{if(T=!1,-1===(_=L.indexOf(")",_+1))){if(U||D){_=z;break}unclosed("bracket")}for(M=_;L.charCodeAt(M-1)===Yi;)M-=1,T=!T}while(T);O=["brackets",L.slice(z,_+1),z,_],z=_}else _=L.indexOf(")",z+1),E=L.slice(z,_+1),-1===_||pa.test(E)?O=["(","(",z]:(O=["brackets",E,z,_],z=_);break;case Xi:case Ki:S=l===Xi?"'":'"',_=z;do{if(T=!1,-1===(_=L.indexOf(S,_+1))){if(U||D){_=z+1;break}unclosed("string")}for(M=_;L.charCodeAt(M-1)===Yi;)M-=1,T=!T}while(T);O=["string",L.slice(z,_+1),z,_],z=_;break;case ha:da.lastIndex=z+1,da.test(L),_=0===da.lastIndex?L.length-1:da.lastIndex-2,O=["at-word",L.slice(z,_+1),z,_],z=_;break;case Yi:for(_=z,k=!0;L.charCodeAt(_+1)===Yi;)_+=1,k=!k;if(l=L.charCodeAt(_+1),k&&l!==Ji&&l!==Zi&&l!==Qi&&l!==ea&&l!==ta&&l!==$i&&(_+=1,va.test(L.charAt(_)))){for(;va.test(L.charAt(_+1));)_+=1;L.charCodeAt(_+1)===Zi&&(_+=1)}O=["word",L.slice(z,_+1),z,_],z=_;break;default:l===Ji&&L.charCodeAt(z+1)===la?(0===(_=L.indexOf("*/",z+2)+1)&&(U||D?_=L.length:unclosed("comment")),O=["comment",L.slice(z,_+1),z,_],z=_):(fa.lastIndex=z+1,fa.test(L),_=0===fa.lastIndex?L.length-1:fa.lastIndex-2,O=["word",L.slice(z,_+1),z,_],j.push(O),z=_)}return z++,O}},position:function(){return z}}},Ia=Ci,Pa=ya,Oa=xa,Da=Ma,La={empty:!0,space:!0};var Ua=function(){return _createClass3(function Parser2(e){_classCallCheck3(this,Parser2),this.input=e,this.root=new Oa,this.current=this.root,this.spaces="",this.semicolon=!1,this.createTokenizer(),this.root.source={input:e,start:{column:1,line:1,offset:0}}},[{key:"atrule",value:function(e){var l,_,S,E=new Pa;E.name=e[1].slice(1),""===E.name&&this.unnamedAtrule(E,e),this.init(E,e[2]);for(var k=!1,T=!1,M=[],R=[];!this.tokenizer.endOfFile();){if("("===(l=(e=this.tokenizer.nextToken())[0])||"["===l?R.push("("===l?")":"]"):"{"===l&&R.length>0?R.push("}"):l===R[R.length-1]&&R.pop(),0===R.length){if(";"===l){E.source.end=this.getPosition(e[2]),E.source.end.offset++,this.semicolon=!0;break}if("{"===l){T=!0;break}if("}"===l){if(M.length>0){for(_=M[S=M.length-1];_&&"space"===_[0];)_=M[--S];_&&(E.source.end=this.getPosition(_[3]||_[2]),E.source.end.offset++)}this.end(e);break}M.push(e)}else M.push(e);if(this.tokenizer.endOfFile()){k=!0;break}}E.raws.between=this.spacesAndCommentsFromEnd(M),M.length?(E.raws.afterName=this.spacesAndCommentsFromStart(M),this.raw(E,"params",M),k&&(e=M[M.length-1],E.source.end=this.getPosition(e[3]||e[2]),E.source.end.offset++,this.spaces=E.raws.between,E.raws.between="")):(E.raws.afterName="",E.params=""),T&&(E.nodes=[],this.current=E)}},{key:"checkMissedSemicolon",value:function(e){var l=this.colon(e);if(!1!==l){for(var _,S=0,E=l-1;E>=0&&("space"===(_=e[E])[0]||2!==(S+=1));E--);throw this.input.error("Missed semicolon","word"===_[0]?_[3]+1:_[2])}}},{key:"colon",value:function(e){var l,_,S,E,k=0,T=_createForOfIteratorHelper2(e.entries());try{for(T.s();!(E=T.n()).done;){var M=_slicedToArray(E.value,2),R=M[0];if("("===(_=(l=M[1])[0])&&(k+=1),")"===_&&(k-=1),0===k&&":"===_){if(S){if("word"===S[0]&&"progid"===S[1])continue;return R}this.doubleColon(l)}S=l}}catch(I){T.e(I)}finally{T.f()}return!1}},{key:"comment",value:function(e){var l=new Ia;this.init(l,e[2]),l.source.end=this.getPosition(e[3]||e[2]),l.source.end.offset++;var _=e[1].slice(2,-2);if(/^\s*$/.test(_))l.text="",l.raws.left=_,l.raws.right="";else{var S=_.match(/^(\s*)([^]*\S)(\s*)$/);l.text=S[2],l.raws.left=S[1],l.raws.right=S[3]}}},{key:"createTokenizer",value:function(){this.tokenizer=tokenizer22(this.input)}},{key:"decl",value:function(e,l){var _=new Ra;this.init(_,e[0][2]);var S,E=e[e.length-1];for(";"===E[0]&&(this.semicolon=!0,e.pop()),_.source.end=this.getPosition(E[3]||E[2]||function(e){for(var l=e.length-1;l>=0;l--){var _=e[l],S=_[3]||_[2];if(S)return S}}(e)),_.source.end.offset++;"word"!==e[0][0];)1===e.length&&this.unknownWord(e),_.raws.before+=e.shift()[1];for(_.source.start=this.getPosition(e[0][2]),_.prop="";e.length;){var k=e[0][0];if(":"===k||"space"===k||"comment"===k)break;_.prop+=e.shift()[1]}for(_.raws.between="";e.length;){if(":"===(S=e.shift())[0]){_.raws.between+=S[1];break}"word"===S[0]&&/\w/.test(S[1])&&this.unknownWord([S]),_.raws.between+=S[1]}"_"!==_.prop[0]&&"*"!==_.prop[0]||(_.raws.before+=_.prop[0],_.prop=_.prop.slice(1));for(var T,M=[];e.length&&("space"===(T=e[0][0])||"comment"===T);)M.push(e.shift());this.precheckMissedSemicolon(e);for(var R=e.length-1;R>=0;R--){if("!important"===(S=e[R])[1].toLowerCase()){_.important=!0;var I=this.stringFrom(e,R);" !important"!==(I=this.spacesFromEnd(e)+I)&&(_.raws.important=I);break}if("important"===S[1].toLowerCase()){for(var O=e.slice(0),D="",L=R;L>0;L--){var U=O[L][0];if(0===D.trim().indexOf("!")&&"space"!==U)break;D=O.pop()[1]+D}0===D.trim().indexOf("!")&&(_.important=!0,_.raws.important=D,e=O)}if("space"!==S[0]&&"comment"!==S[0])break}var B=e.some(function(e){return"space"!==e[0]&&"comment"!==e[0]});B&&(_.raws.between+=M.map(function(e){return e[1]}).join(""),M=[]),this.raw(_,"value",M.concat(e),l),_.value.includes(":")&&!l&&this.checkMissedSemicolon(e)}},{key:"doubleColon",value:function(e){throw this.input.error("Double colon",{offset:e[2]},{offset:e[2]+e[1].length})}},{key:"emptyRule",value:function(e){var l=new Da;this.init(l,e[2]),l.selector="",l.raws.between="",this.current=l}},{key:"end",value:function(e){this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.semicolon=!1,this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.spaces="",this.current.parent?(this.current.source.end=this.getPosition(e[2]),this.current.source.end.offset++,this.current=this.current.parent):this.unexpectedClose(e)}},{key:"endFile",value:function(){this.current.parent&&this.unclosedBlock(),this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.root.source.end=this.getPosition(this.tokenizer.position())}},{key:"freeSemicolon",value:function(e){if(this.spaces+=e[1],this.current.nodes){var l=this.current.nodes[this.current.nodes.length-1];l&&"rule"===l.type&&!l.raws.ownSemicolon&&(l.raws.ownSemicolon=this.spaces,this.spaces="")}}},{key:"getPosition",value:function(e){var l=this.input.fromOffset(e);return{column:l.col,line:l.line,offset:e}}},{key:"init",value:function(e,l){this.current.push(e),e.source={input:this.input,start:this.getPosition(l)},e.raws.before=this.spaces,this.spaces="","comment"!==e.type&&(this.semicolon=!1)}},{key:"other",value:function(e){for(var l=!1,_=null,S=!1,E=null,k=[],T=e[1].startsWith("--"),M=[],R=e;R;){if(_=R[0],M.push(R),"("===_||"["===_)E||(E=R),k.push("("===_?")":"]");else if(T&&S&&"{"===_)E||(E=R),k.push("}");else if(0===k.length){if(";"===_){if(S)return void this.decl(M,T);break}if("{"===_)return void this.rule(M);if("}"===_){this.tokenizer.back(M.pop()),l=!0;break}":"===_&&(S=!0)}else _===k[k.length-1]&&(k.pop(),0===k.length&&(E=null));R=this.tokenizer.nextToken()}if(this.tokenizer.endOfFile()&&(l=!0),k.length>0&&this.unclosedBracket(E),l&&S){if(!T)for(;M.length&&("space"===(R=M[M.length-1][0])||"comment"===R);)this.tokenizer.back(M.pop());this.decl(M,T)}else this.unknownWord(M)}},{key:"parse",value:function(){for(var e;!this.tokenizer.endOfFile();)switch((e=this.tokenizer.nextToken())[0]){case"space":this.spaces+=e[1];break;case";":this.freeSemicolon(e);break;case"}":this.end(e);break;case"comment":this.comment(e);break;case"at-word":this.atrule(e);break;case"{":this.emptyRule(e);break;default:this.other(e)}this.endFile()}},{key:"precheckMissedSemicolon",value:function(){}},{key:"raw",value:function(e,l,_,S){for(var E,k,T,M,R=_.length,I="",O=!0,D=0;D<R;D+=1)"space"!==(k=(E=_[D])[0])||D!==R-1||S?"comment"===k?(M=_[D-1]?_[D-1][0]:"empty",T=_[D+1]?_[D+1][0]:"empty",La[M]||La[T]||","===I.slice(-1)?O=!1:I+=E[1]):I+=E[1]:O=!1;if(!O){var L=_.reduce(function(e,l){return e+l[1]},"");e.raws[l]={raw:L,value:I}}e[l]=I}},{key:"rule",value:function(e){e.pop();var l=new Da;this.init(l,e[0][2]),l.raws.between=this.spacesAndCommentsFromEnd(e),this.raw(l,"selector",e),this.current=l}},{key:"spacesAndCommentsFromEnd",value:function(e){for(var l,_="";e.length&&("space"===(l=e[e.length-1][0])||"comment"===l);)_=e.pop()[1]+_;return _}},{key:"spacesAndCommentsFromStart",value:function(e){for(var l,_="";e.length&&("space"===(l=e[0][0])||"comment"===l);)_+=e.shift()[1];return _}},{key:"spacesFromEnd",value:function(e){for(var l="";e.length&&"space"===e[e.length-1][0];)l=e.pop()[1]+l;return l}},{key:"stringFrom",value:function(e,l){for(var _="",S=l;S<e.length;S++)_+=e[S][1];return e.splice(l,e.length-l),_}},{key:"unclosedBlock",value:function(){var e=this.current.source.start;throw this.input.error("Unclosed block",e.line,e.column)}},{key:"unclosedBracket",value:function(e){throw this.input.error("Unclosed bracket",{offset:e[2]},{offset:e[2]+1})}},{key:"unexpectedClose",value:function(e){throw this.input.error("Unexpected }",{offset:e[2]},{offset:e[2]+1})}},{key:"unknownWord",value:function(e){throw this.input.error("Unknown word",{offset:e[0][2]},{offset:e[0][2]+e[0][1].length})}},{key:"unnamedAtrule",value:function(e,l){throw this.input.error("At-rule without name",{offset:l[2]},{offset:l[2]+l[1].length})}}])}(),Fa=Fi,Na=Ua,Ba=pi;function parse$3(e,l){var _=new Ba(e,l),S=new Na(_);try{S.parse()}catch(E){throw E}return S.root}var za=parse$3;parse$3.default=parse$3,Fa.registerParse(parse$3);var ja=Ir.isClean,Ga=Ir.my,Ha=ki,Va=Ur,Wa=Fi,qa=ji,Xa=qi,Ka=za,Ya=xa,Ja={atrule:"AtRule",comment:"Comment",decl:"Declaration",document:"Document",root:"Root",rule:"Rule"},Qa={AtRule:!0,AtRuleExit:!0,Comment:!0,CommentExit:!0,Declaration:!0,DeclarationExit:!0,Document:!0,DocumentExit:!0,Once:!0,OnceExit:!0,postcssPlugin:!0,prepare:!0,Root:!0,RootExit:!0,Rule:!0,RuleExit:!0},Za={Once:!0,postcssPlugin:!0,prepare:!0};function isPromise(e){return"object"===_typeof3(e)&&"function"==typeof e.then}function getEvents(e){var l=!1,_=Ja[e.type];return"decl"===e.type?l=e.prop.toLowerCase():"atrule"===e.type&&(l=e.name.toLowerCase()),l&&e.append?[_,_+"-"+l,0,_+"Exit",_+"Exit-"+l]:l?[_,_+"-"+l,_+"Exit",_+"Exit-"+l]:e.append?[_,0,_+"Exit"]:[_,_+"Exit"]}function toStack(e){return{eventIndex:0,events:"document"===e.type?["Document",0,"DocumentExit"]:"root"===e.type?["Root",0,"RootExit"]:getEvents(e),iterator:0,node:e,visitorIndex:0,visitors:[]}}function cleanMarks(e){return e[ja]=!1,e.nodes&&e.nodes.forEach(function(e){return cleanMarks(e)}),e}var $a={},eo=function(){return _createClass3(function LazyResult2(e,l,_){var S,E=this;if(_classCallCheck3(this,LazyResult2),this.stringified=!1,this.processed=!1,"object"!==_typeof3(l)||null===l||"root"!==l.type&&"document"!==l.type)if(l instanceof LazyResult2||l instanceof Xa)S=cleanMarks(l.root),l.map&&(void 0===_.map&&(_.map={}),_.map.inline||(_.map.inline=!1),_.map.prev=l.map);else{var k=Ka;_.syntax&&(k=_.syntax.parse),_.parser&&(k=_.parser),k.parse&&(k=k.parse);try{S=k(l,_)}catch(T){this.processed=!0,this.error=T}S&&!S[Ga]&&Wa.rebuild(S)}else S=cleanMarks(l);this.result=new Xa(e,S,_),this.helpers=_objectSpread2(_objectSpread2({},$a),{},{postcss:$a,result:this.result}),this.plugins=this.processor.plugins.map(function(e){return"object"===_typeof3(e)&&e.prepare?_objectSpread2(_objectSpread2({},e),e.prepare(E.result)):e})},[{key:"async",value:function(){return this.error?Promise.reject(this.error):this.processed?Promise.resolve(this.result):(this.processing||(this.processing=this.runAsync()),this.processing)}},{key:"catch",value:function(e){return this.async().catch(e)}},{key:"finally",value:function(e){return this.async().then(e,e)}},{key:"getAsyncError",value:function(){throw new Error("Use process(css).then(cb) to work with async plugins")}},{key:"handleError",value:function(e,l){var _=this.result.lastPlugin;try{l&&l.addToError(e),this.error=e,"CssSyntaxError"!==e.name||e.plugin?_.postcssVersion:(e.plugin=_.postcssPlugin,e.setMessage())}catch(S){console&&console.error}return e}},{key:"prepareVisitors",value:function(){var e=this;this.listeners={};var l,add=function(l,_,S){e.listeners[_]||(e.listeners[_]=[]),e.listeners[_].push([l,S])},_=_createForOfIteratorHelper2(this.plugins);try{for(_.s();!(l=_.n()).done;){var S=l.value;if("object"===_typeof3(S))for(var E in S){if(!Qa[E]&&/^[A-Z]/.test(E))throw new Error("Unknown event ".concat(E," in ").concat(S.postcssPlugin,". Try to update PostCSS (").concat(this.processor.version," now)."));if(!Za[E])if("object"===_typeof3(S[E]))for(var k in S[E])add(S,"*"===k?E:E+"-"+k.toLowerCase(),S[E][k]);else"function"==typeof S[E]&&add(S,E,S[E])}}}catch(T){_.e(T)}finally{_.f()}this.hasListener=Object.keys(this.listeners).length>0}},{key:"runAsync",value:(e=_asyncToGenerator(_regenerator().m(function _callee30(){var e,l,_,S,E,k,T,M,R,I,O,D,L,U=this;return _regenerator().w(function(B){for(;;)switch(B.p=B.n){case 0:this.plugin=0,e=0;case 1:if(!(e<this.plugins.length)){B.n=6;break}if(l=this.plugins[e],!isPromise(_=this.runOnRoot(l))){B.n=5;break}return B.p=2,B.n=3,_;case 3:B.n=5;break;case 4:throw B.p=4,O=B.v,this.handleError(O);case 5:e++,B.n=1;break;case 6:if(this.prepareVisitors(),!this.hasListener){B.n=21;break}S=this.result.root;case 7:if(S[ja]){B.n=14;break}S[ja]=!0,E=[toStack(S)];case 8:if(!(E.length>0)){B.n=13;break}if(!isPromise(k=this.visitTick(E))){B.n=12;break}return B.p=9,B.n=10,k;case 10:B.n=12;break;case 11:throw B.p=11,D=B.v,T=E[E.length-1].node,this.handleError(D,T);case 12:B.n=8;break;case 13:B.n=7;break;case 14:if(!this.listeners.OnceExit){B.n=21;break}M=_createForOfIteratorHelper2(this.listeners.OnceExit),B.p=15,I=_regenerator().m(function _loop2(){var e,l,_,E,k;return _regenerator().w(function(T){for(;;)switch(T.p=T.n){case 0:if(e=_slicedToArray(R.value,2),l=e[0],_=e[1],U.result.lastPlugin=l,T.p=1,"document"!==S.type){T.n=3;break}return E=S.nodes.map(function(e){return _(e,U.helpers)}),T.n=2,Promise.all(E);case 2:T.n=4;break;case 3:return T.n=4,_(S,U.helpers);case 4:T.n=6;break;case 5:throw T.p=5,k=T.v,U.handleError(k);case 6:return T.a(2)}},_loop2,null,[[1,5]])}),M.s();case 16:if((R=M.n()).done){B.n=18;break}return B.d(_regeneratorValues(I()),17);case 17:B.n=16;break;case 18:B.n=20;break;case 19:B.p=19,L=B.v,M.e(L);case 20:return B.p=20,M.f(),B.f(20);case 21:return this.processed=!0,B.a(2,this.stringify())}},_callee30,this,[[15,19,20,21],[9,11],[2,4]])})),function(){return e.apply(this,arguments)})},{key:"runOnRoot",value:function(e){var l=this;this.result.lastPlugin=e;try{if("object"===_typeof3(e)&&e.Once){if("document"===this.result.root.type){var _=this.result.root.nodes.map(function(_){return e.Once(_,l.helpers)});return isPromise(_[0])?Promise.all(_):_}return e.Once(this.result.root,this.helpers)}if("function"==typeof e)return e(this.result.root,this.result)}catch(S){throw this.handleError(S)}}},{key:"stringify",value:function(){if(this.error)throw this.error;if(this.stringified)return this.result;this.stringified=!0,this.sync();var e=this.result.opts,l=Va;e.syntax&&(l=e.syntax.stringify),e.stringifier&&(l=e.stringifier),l.stringify&&(l=l.stringify);var _=new Ha(l,this.result.root,this.result.opts).generate();return this.result.css=_[0],this.result.map=_[1],this.result}},{key:"sync",value:function(){if(this.error)throw this.error;if(this.processed)return this.result;if(this.processed=!0,this.processing)throw this.getAsyncError();var e,l=_createForOfIteratorHelper2(this.plugins);try{for(l.s();!(e=l.n()).done;){var _=e.value;if(isPromise(this.runOnRoot(_)))throw this.getAsyncError()}}catch(M){l.e(M)}finally{l.f()}if(this.prepareVisitors(),this.hasListener){for(var S=this.result.root;!S[ja];)S[ja]=!0,this.walkSync(S);if(this.listeners.OnceExit)if("document"===S.type){var E,k=_createForOfIteratorHelper2(S.nodes);try{for(k.s();!(E=k.n()).done;){var T=E.value;this.visitSync(this.listeners.OnceExit,T)}}catch(M){k.e(M)}finally{k.f()}}else this.visitSync(this.listeners.OnceExit,S)}return this.result}},{key:"then",value:function(e,l){return this.async().then(e,l)}},{key:"toString",value:function(){return this.css}},{key:"visitSync",value:function(e,l){var _,S=_createForOfIteratorHelper2(e);try{for(S.s();!(_=S.n()).done;){var E=_slicedToArray(_.value,2),k=E[0],T=E[1];this.result.lastPlugin=k;var M=void 0;try{M=T(l,this.helpers)}catch(R){throw this.handleError(R,l.proxyOf)}if("root"!==l.type&&"document"!==l.type&&!l.parent)return!0;if(isPromise(M))throw this.getAsyncError()}}catch(I){S.e(I)}finally{S.f()}}},{key:"visitTick",value:function(e){var l=e[e.length-1],_=l.node,S=l.visitors;if("root"===_.type||"document"===_.type||_.parent){if(S.length>0&&l.visitorIndex<S.length){var E=_slicedToArray(S[l.visitorIndex],2),k=E[0],T=E[1];l.visitorIndex+=1,l.visitorIndex===S.length&&(l.visitors=[],l.visitorIndex=0),this.result.lastPlugin=k;try{return T(_.toProxy(),this.helpers)}catch(D){throw this.handleError(D,_)}}if(0!==l.iterator){for(var M,R=l.iterator;M=_.nodes[_.indexes[R]];)if(_.indexes[R]+=1,!M[ja])return M[ja]=!0,void e.push(toStack(M));l.iterator=0,delete _.indexes[R]}for(var I=l.events;l.eventIndex<I.length;){var O=I[l.eventIndex];if(l.eventIndex+=1,0===O)return void(_.nodes&&_.nodes.length&&(_[ja]=!0,l.iterator=_.getIterator()));if(this.listeners[O])return void(l.visitors=this.listeners[O])}e.pop()}else e.pop()}},{key:"walkSync",value:function(e){var l=this;e[ja]=!0;var _,S=_createForOfIteratorHelper2(getEvents(e));try{for(S.s();!(_=S.n()).done;){var E=_.value;if(0===E)e.nodes&&e.each(function(e){e[ja]||l.walkSync(e)});else{var k=this.listeners[E];if(k&&this.visitSync(k,e.toProxy()))return}}}catch(T){S.e(T)}finally{S.f()}}},{key:"warnings",value:function(){return this.sync().warnings()}},{key:"content",get:function(){return this.stringify().content}},{key:"css",get:function(){return this.stringify().css}},{key:"map",get:function(){return this.stringify().map}},{key:"messages",get:function(){return this.sync().messages}},{key:"opts",get:function(){return this.result.opts}},{key:"processor",get:function(){return this.result.processor}},{key:"root",get:function(){return this.sync().root}},{key:Symbol.toStringTag,get:function(){return"LazyResult"}}]);var e}();eo.registerPostcss=function(e){$a=e};var to=eo;eo.default=eo,Ya.registerLazyResult(eo),qa.registerLazyResult(eo);var no=ki,ro=Ur,io=za,ao=qi,oo=function(){return _createClass3(function NoWorkResult2(e,l,_){var S;_classCallCheck3(this,NoWorkResult2),l=l.toString(),this.stringified=!1,this._processor=e,this._css=l,this._opts=_,this._map=void 0;var E=ro;this.result=new ao(this._processor,S,this._opts),this.result.css=l;var k=this;Object.defineProperty(this.result,"root",{get:function(){return k.root}});var T=new no(E,S,this._opts,l);if(T.isMap()){var M=_slicedToArray(T.generate(),2),R=M[0],I=M[1];R&&(this.result.css=R),I&&(this.result.map=I)}else T.clearAnnotation(),this.result.css=T.css},[{key:"async",value:function(){return this.error?Promise.reject(this.error):Promise.resolve(this.result)}},{key:"catch",value:function(e){return this.async().catch(e)}},{key:"finally",value:function(e){return this.async().then(e,e)}},{key:"sync",value:function(){if(this.error)throw this.error;return this.result}},{key:"then",value:function(e,l){return this.async().then(e,l)}},{key:"toString",value:function(){return this._css}},{key:"warnings",value:function(){return[]}},{key:"content",get:function(){return this.result.css}},{key:"css",get:function(){return this.result.css}},{key:"map",get:function(){return this.result.map}},{key:"messages",get:function(){return[]}},{key:"opts",get:function(){return this.result.opts}},{key:"processor",get:function(){return this.result.processor}},{key:"root",get:function(){if(this._root)return this._root;var e,l=io;try{e=l(this._css,this._opts)}catch(_){this.error=_}if(this.error)throw this.error;return this._root=e,e}},{key:Symbol.toStringTag,get:function(){return"NoWorkResult"}}])}(),so=oo;oo.default=oo;var uo=so,lo=to,co=ji,ho=xa,fo=function(){return _createClass3(function Processor2(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];_classCallCheck3(this,Processor2),this.version="8.4.38",this.plugins=this.normalize(e)},[{key:"normalize",value:function(e){var l,_=[],S=_createForOfIteratorHelper2(e);try{for(S.s();!(l=S.n()).done;){var E=l.value;if(!0===E.postcss?E=E():E.postcss&&(E=E.postcss),"object"===_typeof3(E)&&Array.isArray(E.plugins))_=_.concat(E.plugins);else if("object"===_typeof3(E)&&E.postcssPlugin)_.push(E);else if("function"==typeof E)_.push(E);else if("object"!==_typeof3(E)||!E.parse&&!E.stringify)throw new Error(E+" is not a PostCSS plugin")}}catch(k){S.e(k)}finally{S.f()}return _}},{key:"process",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.plugins.length||l.parser||l.stringifier||l.syntax?new lo(this,e,l):new uo(this,e,l)}},{key:"use",value:function(e){return this.plugins=this.plugins.concat(this.normalize([e])),this}}])}(),po=fo;fo.default=fo,ho.registerProcessor(fo),co.registerProcessor(fo);var vo=Wr,go=$r,mo=Ci,yo=ya,_o=pi,bo=xa,So=Ma;function fromJSON$1(e,l){if(Array.isArray(e))return e.map(function(e){return fromJSON$1(e)});var _=e.inputs,k=_objectWithoutProperties3(e,S);if(_){l=[];var T,M=_createForOfIteratorHelper2(_);try{for(M.s();!(T=M.n()).done;){var R=_objectSpread2(_objectSpread2({},T.value),{},{__proto__:_o.prototype});R.map&&(R.map=_objectSpread2(_objectSpread2({},R.map),{},{__proto__:go.prototype})),l.push(R)}}catch(L){M.e(L)}finally{M.f()}}if(k.nodes&&(k.nodes=e.nodes.map(function(e){return fromJSON$1(e,l)})),k.source){var I=k.source,O=I.inputId,D=_objectWithoutProperties3(I,E);k.source=D,null!=O&&(k.source.input=l[O])}if("root"===k.type)return new bo(k);if("decl"===k.type)return new vo(k);if("rule"===k.type)return new So(k);if("comment"===k.type)return new mo(k);if("atrule"===k.type)return new yo(k);throw new Error("Unknown node type: "+e.type)}var wo=fromJSON$1;fromJSON$1.default=fromJSON$1;var xo=Rr,Eo=Wr,ko=to,Ao=Fi,Co=po,To=Ur,Mo=wo,Ro=ji,Io=Hi,Po=Ci,Oo=ya,Do=qi,Lo=pi,Uo=za,Fo=ka,No=Ma,Bo=xa,zo=Hr;function postcss(){for(var e=arguments.length,l=new Array(e),_=0;_<e;_++)l[_]=arguments[_];return 1===l.length&&Array.isArray(l[0])&&(l=l[0]),new Co(l)}postcss.plugin=function(e,l){var _,S=!1;function creator(){console&&console.warn&&!S&&(S=!0,T.LANG&&T.LANG.startsWith("cn"));var _=l.apply(void 0,arguments);return _.postcssPlugin=e,_.postcssVersion=(new Co).version,_}return Object.defineProperty(creator,"postcss",{get:function(){return _||(_=creator()),_}}),creator.process=function(e,l,_){return postcss([creator(_)]).process(e,l)},creator},postcss.stringify=To,postcss.parse=Uo,postcss.fromJSON=Mo,postcss.list=Fo,postcss.comment=function(e){return new Po(e)},postcss.atRule=function(e){return new Oo(e)},postcss.decl=function(e){return new Eo(e)},postcss.rule=function(e){return new No(e)},postcss.root=function(e){return new Bo(e)},postcss.document=function(e){return new Ro(e)},postcss.CssSyntaxError=xo,postcss.Declaration=Eo,postcss.Container=Ao,postcss.Processor=Co,postcss.Document=Ro,postcss.Comment=Po,postcss.Warning=Io,postcss.AtRule=Oo,postcss.Result=Do,postcss.Input=Lo,postcss.Rule=No,postcss.Root=Bo,postcss.Node=zo,ko.registerPostcss(postcss);var jo=postcss;postcss.default=postcss;var Go=getDefaultExportFromCjs(jo);Go.stringify,Go.fromJSON,Go.plugin,Go.parse,Go.list,Go.document,Go.comment,Go.atRule,Go.rule,Go.decl,Go.root,Go.CssSyntaxError,Go.Declaration,Go.Container,Go.Processor,Go.Document,Go.Comment,Go.Warning,Go.AtRule,Go.Result,Go.Input,Go.Rule,Go.Root,Go.Node;var Ho=function(){function BaseRRNode(){_classCallCheck3(this,BaseRRNode),__publicField2(this,"parentElement",null),__publicField2(this,"parentNode",null),__publicField2(this,"ownerDocument"),__publicField2(this,"firstChild",null),__publicField2(this,"lastChild",null),__publicField2(this,"previousSibling",null),__publicField2(this,"nextSibling",null),__publicField2(this,"ELEMENT_NODE",1),__publicField2(this,"TEXT_NODE",3),__publicField2(this,"nodeType"),__publicField2(this,"nodeName"),__publicField2(this,"RRNodeType")}return _createClass3(BaseRRNode,[{key:"childNodes",get:function(){for(var e=[],l=this.firstChild;l;)e.push(l),l=l.nextSibling;return e}},{key:"contains",value:function(e){if(!(e instanceof BaseRRNode))return!1;if(e.ownerDocument!==this.ownerDocument)return!1;if(e===this)return!0;for(;e.parentNode;){if(e.parentNode===this)return!0;e=e.parentNode}return!1}},{key:"appendChild",value:function(e){throw new Error("RRDomException: Failed to execute 'appendChild' on 'RRNode': This RRNode type does not support this method.")}},{key:"insertBefore",value:function(e,l){throw new Error("RRDomException: Failed to execute 'insertBefore' on 'RRNode': This RRNode type does not support this method.")}},{key:"removeChild",value:function(e){throw new Error("RRDomException: Failed to execute 'removeChild' on 'RRNode': This RRNode type does not support this method.")}},{key:"toString",value:function(){return"RRNode"}}])}(),Vo={Node:["childNodes","parentNode","parentElement","textContent"],ShadowRoot:["host","styleSheets"],Element:["shadowRoot","querySelector","querySelectorAll"],MutationObserver:[]},Wo={Node:["contains","getRootNode"],ShadowRoot:["getSelection"],Element:[],MutationObserver:["constructor"]},qo={};function getUntaintedPrototype(e){if(qo[e])return qo[e];var l=globalThis[e],_=l.prototype,S=e in Vo?Vo[e]:void 0,E=Boolean(S&&S.every(function(e){var l,S;return Boolean(null==(S=null==(l=Object.getOwnPropertyDescriptor(_,e))?void 0:l.get)?void 0:S.toString().includes("[native code]"))})),k=e in Wo?Wo[e]:void 0,T=Boolean(k&&k.every(function(e){var l;return"function"==typeof _[e]&&(null==(l=_[e])?void 0:l.toString().includes("[native code]"))}));if(E&&T)return qo[e]=l.prototype,l.prototype;try{var M=document.createElement("iframe");document.body.appendChild(M);var R=M.contentWindow;if(!R)return l.prototype;var I=R[e].prototype;return document.body.removeChild(M),I?qo[e]=I:_}catch(O){return _}}var Xo={};function getUntaintedAccessor(e,l,_){var S,E="".concat(e,".").concat(String(_));if(Xo[E])return Xo[E].call(l);var k=getUntaintedPrototype(e),T=null==(S=Object.getOwnPropertyDescriptor(k,_))?void 0:S.get;return T?(Xo[E]=T,T.call(l)):l[_]}var Ko={};function getUntaintedMethod(e,l,_){var S="".concat(e,".").concat(String(_));if(Ko[S])return Ko[S].bind(l);var E=getUntaintedPrototype(e)[_];return"function"!=typeof E?l[_]:(Ko[S]=E,E.bind(l))}function mutationObserverCtor(){return getUntaintedPrototype("MutationObserver").constructor}var Yo={childNodes:function(e){return getUntaintedAccessor("Node",e,"childNodes")},parentNode:function(e){return getUntaintedAccessor("Node",e,"parentNode")},parentElement:function(e){return getUntaintedAccessor("Node",e,"parentElement")},textContent:function(e){return getUntaintedAccessor("Node",e,"textContent")},contains:function(e,l){return getUntaintedMethod("Node",e,"contains")(l)},getRootNode:function(e){return getUntaintedMethod("Node",e,"getRootNode")()},host:function(e){return e&&"host"in e?getUntaintedAccessor("ShadowRoot",e,"host"):null},styleSheets:function(e){return e.styleSheets},shadowRoot:function(e){return e&&"shadowRoot"in e?getUntaintedAccessor("Element",e,"shadowRoot"):null},querySelector:function(e,l){return getUntaintedAccessor("Element",e,"querySelector")(l)},querySelectorAll:function(e,l){return getUntaintedAccessor("Element",e,"querySelectorAll")(l)},mutationObserver:mutationObserverCtor};function on(e,l){var _=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document,S={capture:!0,passive:!0};return _.addEventListener(e,l,S),function(){return _.removeEventListener(e,l,S)}}var Jo={map:{},getId:function(){return-1},getNode:function(){return null},removeNodeFromMap:function(){},has:function(){return!1},reset:function(){}};function throttle(e,l){var _=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},S=null,E=0;return function(){for(var k=arguments.length,T=new Array(k),M=0;M<k;M++)T[M]=arguments[M];var R=Date.now();E||!1!==_.leading||(E=R);var I=l-(R-E),O=this;I<=0||I>l?(S&&(clearTimeout(S),S=null),E=R,e.apply(O,T)):S||!1===_.trailing||(S=setTimeout(function(){E=!1===_.leading?0:Date.now(),S=null,e.apply(O,T)},I))}}function hookSetter(e,l,_,S){var E=arguments.length>4&&void 0!==arguments[4]?arguments[4]:window,k=E.Object.getOwnPropertyDescriptor(e,l);return E.Object.defineProperty(e,l,S?_:{set:function(e){var l=this;setTimeout(function(){_.set.call(l,e)},0),k&&k.set&&k.set.call(this,e)}}),function(){return hookSetter(e,l,k||{},!0)}}function patch(e,l,_){try{if(!(l in e))return function(){};var S=e[l],E=_(S);return"function"==typeof E&&(E.prototype=E.prototype||{},Object.defineProperties(E,{__rrweb_original__:{enumerable:!1,value:S}})),e[l]=E,function(){e[l]=S}}catch(k){return function(){}}}"undefined"!=typeof window&&window.Proxy&&window.Reflect&&(Jo=new Proxy(Jo,{get:function(e,l,_){return Reflect.get(e,l,_)}}));var Qo=Date.now;function getWindowScroll(e){var l,_,S,E,k=e.document;return{left:k.scrollingElement?k.scrollingElement.scrollLeft:void 0!==e.pageXOffset?e.pageXOffset:k.documentElement.scrollLeft||(null==k?void 0:k.body)&&(null==(l=Yo.parentElement(k.body))?void 0:l.scrollLeft)||(null==(_=null==k?void 0:k.body)?void 0:_.scrollLeft)||0,top:k.scrollingElement?k.scrollingElement.scrollTop:void 0!==e.pageYOffset?e.pageYOffset:(null==k?void 0:k.documentElement.scrollTop)||(null==k?void 0:k.body)&&(null==(S=Yo.parentElement(k.body))?void 0:S.scrollTop)||(null==(E=null==k?void 0:k.body)?void 0:E.scrollTop)||0}}function getWindowHeight(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function getWindowWidth(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function closestElementOfNode(e){return e?e.nodeType===e.ELEMENT_NODE?e:Yo.parentElement(e):null}function isBlocked(e,l,_,S){if(!e)return!1;var E=closestElementOfNode(e);if(!E)return!1;try{if("string"==typeof l){if(E.classList.contains(l))return!0;if(S&&null!==E.closest("."+l))return!0}else if(classMatchesRegex(E,l,S))return!0}catch(k){}if(_){if(E.matches(_))return!0;if(S&&null!==E.closest(_))return!0}return!1}function isIgnored(e,l,_){return!("TITLE"!==e.tagName||!_.headTitleMutations)||-2===l.getId(e)}function isAncestorRemoved(e,l){if(isShadowRoot(e))return!1;var _=l.getId(e);if(!l.has(_))return!0;var S=Yo.parentNode(e);return(!S||S.nodeType!==e.DOCUMENT_NODE)&&(!S||isAncestorRemoved(S,l))}function legacy_isTouchEvent(e){return Boolean(e.changedTouches)}function isSerializedIframe(e,l){return Boolean("IFRAME"===e.nodeName&&l.getMeta(e))}function isSerializedStylesheet(e,l){return Boolean("LINK"===e.nodeName&&e.nodeType===e.ELEMENT_NODE&&e.getAttribute&&"stylesheet"===e.getAttribute("rel")&&l.getMeta(e))}function hasShadowRoot(e){return!!e&&(e instanceof Ho&&"shadowRoot"in e?Boolean(e.shadowRoot):Boolean(Yo.shadowRoot(e)))}/[1-9][0-9]{12}/.test(Date.now().toString())||(Qo=function(){return(new Date).getTime()});var Zo=function(){return _createClass3(function StyleSheetMirror(){_classCallCheck3(this,StyleSheetMirror),__publicField(this,"id",1),__publicField(this,"styleIDMap",new WeakMap),__publicField(this,"idStyleMap",new Map)},[{key:"getId",value:function(e){var l;return null!==(l=this.styleIDMap.get(e))&&void 0!==l?l:-1}},{key:"has",value:function(e){return this.styleIDMap.has(e)}},{key:"add",value:function(e,l){return this.has(e)?this.getId(e):(_=void 0===l?this.id++:l,this.styleIDMap.set(e,_),this.idStyleMap.set(_,e),_);var _}},{key:"getStyle",value:function(e){return this.idStyleMap.get(e)||null}},{key:"reset",value:function(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}},{key:"generateId",value:function(){return this.id++}}])}();function getShadowHost(e){var l,_=null;return"getRootNode"in e&&(null==(l=Yo.getRootNode(e))?void 0:l.nodeType)===Node.DOCUMENT_FRAGMENT_NODE&&Yo.host(Yo.getRootNode(e))&&(_=Yo.host(Yo.getRootNode(e))),_}function shadowHostInDom(e){var l=e.ownerDocument;if(!l)return!1;var _=function(e){for(var l,_=e;l=getShadowHost(_);)_=l;return _}(e);return Yo.contains(l,_)}function inDom(e){var l=e.ownerDocument;return!!l&&(Yo.contains(l,e)||shadowHostInDom(e))}var $o=function(e){return e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e}($o||{}),es=function(e){return e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e[e.CustomElement=16]="CustomElement",e}(es||{}),ts=function(e){return e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel",e}(ts||{}),ns=function(e){return e[e.Mouse=0]="Mouse",e[e.Pen=1]="Pen",e[e.Touch=2]="Touch",e}(ns||{}),rs=function(e){return e[e["2D"]=0]="2D",e[e.WebGL=1]="WebGL",e[e.WebGL2=2]="WebGL2",e}(rs||{}),is=function(e){return e[e.Play=0]="Play",e[e.Pause=1]="Pause",e[e.Seeked=2]="Seeked",e[e.VolumeChange=3]="VolumeChange",e[e.RateChange=4]="RateChange",e}(is||{});function isNodeInLinkedList(e){return"__ln"in e}var as,os=function(){return _createClass3(function DoubleLinkedList(){_classCallCheck3(this,DoubleLinkedList),__publicField(this,"length",0),__publicField(this,"head",null),__publicField(this,"tail",null)},[{key:"get",value:function(e){if(e>=this.length)throw new Error("Position outside of list range");for(var l=this.head,_=0;_<e;_++)l=(null==l?void 0:l.next)||null;return l}},{key:"addNode",value:function(e){var l={value:e,previous:null,next:null};if(e.__ln=l,e.previousSibling&&isNodeInLinkedList(e.previousSibling)){var _=e.previousSibling.__ln.next;l.next=_,l.previous=e.previousSibling.__ln,e.previousSibling.__ln.next=l,_&&(_.previous=l)}else if(e.nextSibling&&isNodeInLinkedList(e.nextSibling)&&e.nextSibling.__ln.previous){var S=e.nextSibling.__ln.previous;l.previous=S,l.next=e.nextSibling.__ln,e.nextSibling.__ln.previous=l,S&&(S.next=l)}else this.head&&(this.head.previous=l),l.next=this.head,this.head=l;null===l.next&&(this.tail=l),this.length++}},{key:"removeNode",value:function(e){var l=e.__ln;this.head&&(l.previous?(l.previous.next=l.next,l.next?l.next.previous=l.previous:this.tail=l.previous):(this.head=l.next,this.head?this.head.previous=null:this.tail=null),e.__ln&&delete e.__ln,this.length--)}}])}(),moveKey=function(e,l){return"".concat(e,"@").concat(l)},ss=function(){return _createClass3(function MutationBuffer(){var e=this;_classCallCheck3(this,MutationBuffer),__publicField(this,"frozen",!1),__publicField(this,"locked",!1),__publicField(this,"texts",[]),__publicField(this,"attributes",[]),__publicField(this,"attributeMap",new WeakMap),__publicField(this,"removes",[]),__publicField(this,"mapRemoves",[]),__publicField(this,"movedMap",{}),__publicField(this,"addedSet",new Set),__publicField(this,"movedSet",new Set),__publicField(this,"droppedSet",new Set),__publicField(this,"mutationCb"),__publicField(this,"blockClass"),__publicField(this,"blockSelector"),__publicField(this,"maskTextClass"),__publicField(this,"maskTextSelector"),__publicField(this,"inlineStylesheet"),__publicField(this,"maskInputOptions"),__publicField(this,"maskTextFn"),__publicField(this,"maskInputFn"),__publicField(this,"keepIframeSrcFn"),__publicField(this,"recordCanvas"),__publicField(this,"inlineImages"),__publicField(this,"slimDOMOptions"),__publicField(this,"dataURLOptions"),__publicField(this,"doc"),__publicField(this,"mirror"),__publicField(this,"iframeManager"),__publicField(this,"stylesheetManager"),__publicField(this,"shadowDomManager"),__publicField(this,"canvasManager"),__publicField(this,"processedNodeManager"),__publicField(this,"unattachedDoc"),__publicField(this,"processMutations",function(l){l.forEach(e.processMutation),e.emit()}),__publicField(this,"emit",function(){if(!e.frozen&&!e.locked){for(var l=[],_=new Set,S=new os,getNextId=function(l){for(var _=l,S=-2;-2===S;)S=(_=_&&_.nextSibling)&&e.mirror.getId(_);return S},pushAdd=function(E){var k=Yo.parentNode(E);if(k&&inDom(E)&&"TEXTAREA"!==k.tagName){var T=isShadowRoot(k)?e.mirror.getId(getShadowHost(E)):e.mirror.getId(k),M=getNextId(E);if(-1===T||-1===M)return S.addNode(E);var R=serializeNodeWithId(E,{doc:e.doc,mirror:e.mirror,blockClass:e.blockClass,blockSelector:e.blockSelector,maskTextClass:e.maskTextClass,maskTextSelector:e.maskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:e.inlineStylesheet,maskInputOptions:e.maskInputOptions,maskTextFn:e.maskTextFn,maskInputFn:e.maskInputFn,slimDOMOptions:e.slimDOMOptions,dataURLOptions:e.dataURLOptions,recordCanvas:e.recordCanvas,inlineImages:e.inlineImages,onSerialize:function(l){isSerializedIframe(l,e.mirror)&&e.iframeManager.addIframe(l),isSerializedStylesheet(l,e.mirror)&&e.stylesheetManager.trackLinkElement(l),hasShadowRoot(E)&&e.shadowDomManager.addShadowRoot(Yo.shadowRoot(E),e.doc)},onIframeLoad:function(l,_){e.iframeManager.attachIframe(l,_),e.shadowDomManager.observeAttachShadow(l)},onStylesheetLoad:function(l,_){e.stylesheetManager.attachLinkElement(l,_)}});R&&(l.push({parentId:T,nextId:M,node:R}),_.add(R.id))}};e.mapRemoves.length;)e.mirror.removeNodeFromMap(e.mapRemoves.shift());var E,k=_createForOfIteratorHelper2(e.movedSet);try{for(k.s();!(E=k.n()).done;){var T=E.value;isParentRemoved(e.removes,T,e.mirror)&&!e.movedSet.has(Yo.parentNode(T))||pushAdd(T)}}catch(q){k.e(q)}finally{k.f()}var M,R=_createForOfIteratorHelper2(e.addedSet);try{for(R.s();!(M=R.n()).done;){var I=M.value;isAncestorInSet(e.droppedSet,I)||isParentRemoved(e.removes,I,e.mirror)?isAncestorInSet(e.movedSet,I)?pushAdd(I):e.droppedSet.add(I):pushAdd(I)}}catch(q){R.e(q)}finally{R.f()}for(var O=null;S.length;){var D=null;if(O){var L=e.mirror.getId(Yo.parentNode(O.value)),U=getNextId(O.value);-1!==L&&-1!==U&&(D=O)}if(!D)for(var B=S.tail;B;){var z=B;if(B=B.previous,z){var j=e.mirror.getId(Yo.parentNode(z.value));if(-1===getNextId(z.value))continue;if(-1!==j){D=z;break}var G=z.value,H=Yo.parentNode(G);if(H&&H.nodeType===Node.DOCUMENT_FRAGMENT_NODE){var V=Yo.host(H);if(-1!==e.mirror.getId(V)){D=z;break}}}}if(!D){for(;S.head;)S.removeNode(S.head.value);break}O=D.previous,S.removeNode(D.value),pushAdd(D.value)}var W={texts:e.texts.map(function(l){var _=l.node,S=Yo.parentNode(_);return S&&"TEXTAREA"===S.tagName&&e.genTextAreaValueMutation(S),{id:e.mirror.getId(_),value:l.value}}).filter(function(e){return!_.has(e.id)}).filter(function(l){return e.mirror.has(l.id)}),attributes:e.attributes.map(function(l){var _=l.attributes;if("string"==typeof _.style){var S=JSON.stringify(l.styleDiff),E=JSON.stringify(l._unchangedStyles);S.length<_.style.length&&(S+E).split("var(").length===_.style.split("var(").length&&(_.style=l.styleDiff)}return{id:e.mirror.getId(l.node),attributes:_}}).filter(function(e){return!_.has(e.id)}).filter(function(l){return e.mirror.has(l.id)}),removes:e.removes,adds:l};(W.texts.length||W.attributes.length||W.removes.length||W.adds.length)&&(e.texts=[],e.attributes=[],e.attributeMap=new WeakMap,e.removes=[],e.addedSet=new Set,e.movedSet=new Set,e.droppedSet=new Set,e.movedMap={},e.mutationCb(W))}}),__publicField(this,"genTextAreaValueMutation",function(l){var _=e.attributeMap.get(l);_||(_={node:l,attributes:{},styleDiff:{},_unchangedStyles:{}},e.attributes.push(_),e.attributeMap.set(l,_)),_.attributes.value=Array.from(Yo.childNodes(l),function(e){return Yo.textContent(e)||""}).join("")}),__publicField(this,"processMutation",function(l){if(!isIgnored(l.target,e.mirror,e.slimDOMOptions))switch(l.type){case"characterData":var _=Yo.textContent(l.target);isBlocked(l.target,e.blockClass,e.blockSelector,!1)||_===l.oldValue||e.texts.push({value:needMaskingText(l.target,e.maskTextClass,e.maskTextSelector,!0)&&_?e.maskTextFn?e.maskTextFn(_,closestElementOfNode(l.target)):_.replace(/[\S]/g,"*"):_,node:l.target});break;case"attributes":var S=l.target,E=l.attributeName,k=l.target.getAttribute(E);if("value"===E){var T=getInputType(S);k=maskInputValue({element:S,maskInputOptions:e.maskInputOptions,tagName:S.tagName,type:T,value:k,maskInputFn:e.maskInputFn})}if(isBlocked(l.target,e.blockClass,e.blockSelector,!1)||k===l.oldValue)return;var M=e.attributeMap.get(l.target);if("IFRAME"===S.tagName&&"src"===E&&!e.keepIframeSrcFn(k)){if(S.contentDocument)return;E="rr_src"}if(M||(M={node:l.target,attributes:{},styleDiff:{},_unchangedStyles:{}},e.attributes.push(M),e.attributeMap.set(l.target,M)),"type"===E&&"INPUT"===S.tagName&&"password"===(l.oldValue||"").toLowerCase()&&S.setAttribute("data-rr-is-password","true"),!ignoreAttribute(S.tagName,E))if(M.attributes[E]=transformAttribute(e.doc,toLowerCase(S.tagName),toLowerCase(E),k),"style"===E){if(!e.unattachedDoc)try{e.unattachedDoc=document.implementation.createHTMLDocument()}catch(G){e.unattachedDoc=e.doc}var R=e.unattachedDoc.createElement("span");l.oldValue&&R.setAttribute("style",l.oldValue);for(var I=0,O=Array.from(S.style);I<O.length;I++){var D=O[I],L=S.style.getPropertyValue(D),U=S.style.getPropertyPriority(D);L!==R.style.getPropertyValue(D)||U!==R.style.getPropertyPriority(D)?M.styleDiff[D]=""===U?L:[L,U]:M._unchangedStyles[D]=[L,U]}for(var B=0,z=Array.from(R.style);B<z.length;B++){var j=z[B];""===S.style.getPropertyValue(j)&&(M.styleDiff[j]=!1)}}else"open"===E&&"DIALOG"===S.tagName&&(S.matches("dialog:modal")?M.attributes.rr_open_mode="modal":M.attributes.rr_open_mode="non-modal");break;case"childList":if(isBlocked(l.target,e.blockClass,e.blockSelector,!0))return;if("TEXTAREA"===l.target.tagName)return void e.genTextAreaValueMutation(l.target);l.addedNodes.forEach(function(_){return e.genAdds(_,l.target)}),l.removedNodes.forEach(function(_){var S=e.mirror.getId(_),E=isShadowRoot(l.target)?e.mirror.getId(Yo.host(l.target)):e.mirror.getId(l.target);isBlocked(l.target,e.blockClass,e.blockSelector,!1)||isIgnored(_,e.mirror,e.slimDOMOptions)||!function(e,l){return-1!==l.getId(e)}(_,e.mirror)||(e.addedSet.has(_)?(deepDelete(e.addedSet,_),e.droppedSet.add(_)):e.addedSet.has(l.target)&&-1===S||isAncestorRemoved(l.target,e.mirror)||(e.movedSet.has(_)&&e.movedMap[moveKey(S,E)]?deepDelete(e.movedSet,_):e.removes.push({parentId:E,id:S,isShadow:!(!isShadowRoot(l.target)||!isNativeShadowDom(l.target))||void 0})),e.mapRemoves.push(_))})}}),__publicField(this,"genAdds",function(l,_){if(!e.processedNodeManager.inOtherBuffer(l,e)&&!e.addedSet.has(l)&&!e.movedSet.has(l)){if(e.mirror.hasNode(l)){if(isIgnored(l,e.mirror,e.slimDOMOptions))return;e.movedSet.add(l);var S=null;_&&e.mirror.hasNode(_)&&(S=e.mirror.getId(_)),S&&-1!==S&&(e.movedMap[moveKey(e.mirror.getId(l),S)]=!0)}else e.addedSet.add(l),e.droppedSet.delete(l);isBlocked(l,e.blockClass,e.blockSelector,!1)||(Yo.childNodes(l).forEach(function(l){return e.genAdds(l)}),hasShadowRoot(l)&&Yo.childNodes(Yo.shadowRoot(l)).forEach(function(_){e.processedNodeManager.add(_,e),e.genAdds(_,l)}))}})},[{key:"init",value:function(e){var l=this;["mutationCb","blockClass","blockSelector","maskTextClass","maskTextSelector","inlineStylesheet","maskInputOptions","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach(function(_){l[_]=e[_]})}},{key:"freeze",value:function(){this.frozen=!0,this.canvasManager.freeze()}},{key:"unfreeze",value:function(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}},{key:"isFrozen",value:function(){return this.frozen}},{key:"lock",value:function(){this.locked=!0,this.canvasManager.lock()}},{key:"unlock",value:function(){this.locked=!1,this.canvasManager.unlock(),this.emit()}},{key:"reset",value:function(){this.shadowDomManager.reset(),this.canvasManager.reset()}}])}();function deepDelete(e,l){e.delete(l),Yo.childNodes(l).forEach(function(l){return deepDelete(e,l)})}function isParentRemoved(e,l,_){return 0!==e.length&&function(e,l,_){var S,E=Yo.parentNode(l),_loop3=function(){var l=_.getId(E);if(e.some(function(e){return e.id===l}))return{v:!0};E=Yo.parentNode(E)};for(;E;)if(S=_loop3())return S.v;return!1}(e,l,_)}function isAncestorInSet(e,l){return 0!==e.size&&_isAncestorInSet(e,l)}function _isAncestorInSet(e,l){var _=Yo.parentNode(l);return!!_&&(!!e.has(_)||_isAncestorInSet(e,_))}var callbackWrapper=function(e){if(!as)return e;return function(){try{return e.apply(void 0,arguments)}catch(l){if(as&&!0===as(l))return;throw l}}},us=[];function getEventTarget(e){try{if("composedPath"in e){var l=e.composedPath();if(l.length)return l[0]}else if("path"in e&&e.path.length)return e.path[0]}catch(_){}return e&&e.target}function initMutationObserver(e,l){var _=new ss;us.push(_),_.init(e);var S=new(mutationObserverCtor())(callbackWrapper(_.processMutations.bind(_)));return S.observe(l,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),S}function initMouseInteractionObserver(e){var l=e.mouseInteractionCb,_=e.doc,S=e.mirror,E=e.blockClass,k=e.blockSelector,T=e.sampling;if(!1===T.mouseInteraction)return function(){};var M=!0===T.mouseInteraction||void 0===T.mouseInteraction?{}:T.mouseInteraction,R=[],I=null;return Object.keys(ts).filter(function(e){return Number.isNaN(Number(e))&&!e.endsWith("_Departed")&&!1!==M[e]}).forEach(function(e){var T=toLowerCase(e),M=function(e){return function(_){var T=getEventTarget(_);if(!isBlocked(T,E,k,!0)){var M=null,R=e;if("pointerType"in _){switch(_.pointerType){case"mouse":M=ns.Mouse;break;case"touch":M=ns.Touch;break;case"pen":M=ns.Pen}M===ns.Touch?ts[e]===ts.MouseDown?R="TouchStart":ts[e]===ts.MouseUp&&(R="TouchEnd"):ns.Pen}else legacy_isTouchEvent(_)&&(M=ns.Touch);null!==M?(I=M,(R.startsWith("Touch")&&M===ns.Touch||R.startsWith("Mouse")&&M===ns.Mouse)&&(M=null)):ts[e]===ts.Click&&(M=I,I=null);var O=legacy_isTouchEvent(_)?_.changedTouches[0]:_;if(O){var D=S.getId(T),L=O.clientX,U=O.clientY;callbackWrapper(l)(_objectSpread2({type:ts[R],id:D,x:L,y:U},null!==M&&{pointerType:M}))}}}}(e);if(window.PointerEvent)switch(ts[e]){case ts.MouseDown:case ts.MouseUp:T=T.replace("mouse","pointer");break;case ts.TouchStart:case ts.TouchEnd:return}R.push(on(T,M,_))}),callbackWrapper(function(){R.forEach(function(e){return e()})})}function initScrollObserver(e){var l=e.scrollCb,_=e.doc,S=e.mirror,E=e.blockClass,k=e.blockSelector,T=e.sampling;return on("scroll",callbackWrapper(throttle(callbackWrapper(function(e){var T=getEventTarget(e);if(T&&!isBlocked(T,E,k,!0)){var M=S.getId(T);if(T===_&&_.defaultView){var R=getWindowScroll(_.defaultView);l({id:M,x:R.left,y:R.top})}else l({id:M,x:T.scrollLeft,y:T.scrollTop})}}),T.scroll||100)),_)}var ls=["INPUT","TEXTAREA","SELECT"],cs=new WeakMap;function getNestedCSSRulePositions(e){return function(e,l){if(hasNestedCSSRule("CSSGroupingRule")&&e.parentRule instanceof CSSGroupingRule||hasNestedCSSRule("CSSMediaRule")&&e.parentRule instanceof CSSMediaRule||hasNestedCSSRule("CSSSupportsRule")&&e.parentRule instanceof CSSSupportsRule||hasNestedCSSRule("CSSConditionRule")&&e.parentRule instanceof CSSConditionRule){var _=Array.from(e.parentRule.cssRules).indexOf(e);l.unshift(_)}else if(e.parentStyleSheet){var S=Array.from(e.parentStyleSheet.cssRules).indexOf(e);l.unshift(S)}return l}(e,[])}function getIdAndStyleId(e,l,_){var S,E;return e?(e.ownerNode?S=l.getId(e.ownerNode):E=_.getId(e),{styleId:E,id:S}):{}}function initAdoptedStyleSheetObserver(e,l){var _,S,E,k=e.mirror,T=e.stylesheetManager,M=null;M="#document"===l.nodeName?k.getId(l):k.getId(Yo.host(l));var R="#document"===l.nodeName?null==(_=l.defaultView)?void 0:_.Document:null==(E=null==(S=l.ownerDocument)?void 0:S.defaultView)?void 0:E.ShadowRoot,I=(null==R?void 0:R.prototype)?Object.getOwnPropertyDescriptor(null==R?void 0:R.prototype,"adoptedStyleSheets"):void 0;return null!==M&&-1!==M&&R&&I?(Object.defineProperty(l,"adoptedStyleSheets",{configurable:I.configurable,enumerable:I.enumerable,get:function(){var e;return null==(e=I.get)?void 0:e.call(this)},set:function(e){var l,_=null==(l=I.set)?void 0:l.call(this,e);if(null!==M&&-1!==M)try{T.adoptStyleSheets(e,M)}catch(S){}return _}}),callbackWrapper(function(){Object.defineProperty(l,"adoptedStyleSheets",{configurable:I.configurable,enumerable:I.enumerable,get:I.get,set:I.set})})):function(){}}function initObservers(e){var l,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},S=e.doc.defaultView;if(!S)return function(){};!function(e,l){var _=e.mutationCb,S=e.mousemoveCb,E=e.mouseInteractionCb,k=e.scrollCb,T=e.viewportResizeCb,M=e.inputCb,R=e.mediaInteractionCb,I=e.styleSheetRuleCb,O=e.styleDeclarationCb,D=e.canvasMutationCb,L=e.fontCb,U=e.selectionCb,B=e.customElementCb;e.mutationCb=function(){l.mutation&&l.mutation.apply(l,arguments),_.apply(void 0,arguments)},e.mousemoveCb=function(){l.mousemove&&l.mousemove.apply(l,arguments),S.apply(void 0,arguments)},e.mouseInteractionCb=function(){l.mouseInteraction&&l.mouseInteraction.apply(l,arguments),E.apply(void 0,arguments)},e.scrollCb=function(){l.scroll&&l.scroll.apply(l,arguments),k.apply(void 0,arguments)},e.viewportResizeCb=function(){l.viewportResize&&l.viewportResize.apply(l,arguments),T.apply(void 0,arguments)},e.inputCb=function(){l.input&&l.input.apply(l,arguments),M.apply(void 0,arguments)},e.mediaInteractionCb=function(){l.mediaInteaction&&l.mediaInteaction.apply(l,arguments),R.apply(void 0,arguments)},e.styleSheetRuleCb=function(){l.styleSheetRule&&l.styleSheetRule.apply(l,arguments),I.apply(void 0,arguments)},e.styleDeclarationCb=function(){l.styleDeclaration&&l.styleDeclaration.apply(l,arguments),O.apply(void 0,arguments)},e.canvasMutationCb=function(){l.canvasMutation&&l.canvasMutation.apply(l,arguments),D.apply(void 0,arguments)},e.fontCb=function(){l.font&&l.font.apply(l,arguments),L.apply(void 0,arguments)},e.selectionCb=function(){l.selection&&l.selection.apply(l,arguments),U.apply(void 0,arguments)},e.customElementCb=function(){l.customElement&&l.customElement.apply(l,arguments),B.apply(void 0,arguments)}}(e,_),e.recordDOM&&(l=initMutationObserver(e,e.doc));var E,k,T,M,R,I=function(e){var l=e.mousemoveCb,_=e.sampling,S=e.doc,E=e.mirror;if(!1===_.mousemove)return function(){};var k,T="number"==typeof _.mousemove?_.mousemove:50,M="number"==typeof _.mousemoveCallback?_.mousemoveCallback:500,R=[],I=throttle(callbackWrapper(function(e){var _=Date.now()-k;l(R.map(function(e){return e.timeOffset-=_,e}),e),R=[],k=null}),M),O=callbackWrapper(throttle(callbackWrapper(function(e){var l=getEventTarget(e),_=legacy_isTouchEvent(e)?e.changedTouches[0]:e,S=_.clientX,T=_.clientY;k||(k=Qo()),R.push({x:S,y:T,id:E.getId(l),timeOffset:Qo()-k}),I("undefined"!=typeof DragEvent&&e instanceof DragEvent?es.Drag:e instanceof MouseEvent?es.MouseMove:es.TouchMove)}),T,{trailing:!1})),D=[on("mousemove",O,S),on("touchmove",O,S),on("drag",O,S)];return callbackWrapper(function(){D.forEach(function(e){return e()})})}(e),O=initMouseInteractionObserver(e),D=initScrollObserver(e),L=(E={win:S},k=e.viewportResizeCb,T=E.win,M=-1,R=-1,on("resize",callbackWrapper(throttle(callbackWrapper(function(){var e=getWindowHeight(),l=getWindowWidth();M===e&&R===l||(k({width:Number(l),height:Number(e)}),M=e,R=l)}),200)),T)),U=function(e){var l=e.inputCb,_=e.doc,S=e.mirror,E=e.blockClass,k=e.blockSelector,T=e.ignoreClass,M=e.ignoreSelector,R=e.maskInputOptions,I=e.maskInputFn,O=e.sampling,D=e.userTriggeredOnInput;function eventHandler(e){var l=getEventTarget(e),S=e.isTrusted,O=l&&l.tagName;if(l&&"OPTION"===O&&(l=Yo.parentElement(l)),l&&O&&!(ls.indexOf(O)<0)&&!isBlocked(l,E,k,!0)&&!(l.classList.contains(T)||M&&l.matches(M))){var L=l.value,U=!1,B=getInputType(l)||"";"radio"===B||"checkbox"===B?U=l.checked:(R[O.toLowerCase()]||R[B])&&(L=maskInputValue({element:l,maskInputOptions:R,tagName:O,type:B,value:L,maskInputFn:I})),cbWithDedup(l,D?{text:L,isChecked:U,userTriggered:S}:{text:L,isChecked:U});var z=l.name;"radio"===B&&z&&U&&_.querySelectorAll('input[type="radio"][name="'.concat(z,'"]')).forEach(function(e){if(e!==l){var _=e.value;cbWithDedup(e,D?{text:_,isChecked:!U,userTriggered:!1}:{text:_,isChecked:!U})}})}}function cbWithDedup(e,_){var E=cs.get(e);if(!E||E.text!==_.text||E.isChecked!==_.isChecked){cs.set(e,_);var k=S.getId(e);callbackWrapper(l)(_objectSpread2(_objectSpread2({},_),{},{id:k}))}}var L=("last"===O.input?["change"]:["input","change"]).map(function(e){return on(e,callbackWrapper(eventHandler),_)}),U=_.defaultView;if(!U)return function(){L.forEach(function(e){return e()})};var B=U.Object.getOwnPropertyDescriptor(U.HTMLInputElement.prototype,"value"),z=[[U.HTMLInputElement.prototype,"value"],[U.HTMLInputElement.prototype,"checked"],[U.HTMLSelectElement.prototype,"value"],[U.HTMLTextAreaElement.prototype,"value"],[U.HTMLSelectElement.prototype,"selectedIndex"],[U.HTMLOptionElement.prototype,"selected"]];return B&&B.set&&L.push.apply(L,_toConsumableArray3(z.map(function(e){return hookSetter(e[0],e[1],{set:function(){callbackWrapper(eventHandler)({target:this,isTrusted:!1})}},!1,U)}))),callbackWrapper(function(){L.forEach(function(e){return e()})})}(e),B=function(e){var l=e.mediaInteractionCb,_=e.blockClass,S=e.blockSelector,E=e.mirror,k=e.sampling,T=e.doc,M=callbackWrapper(function(e){return throttle(callbackWrapper(function(k){var T=getEventTarget(k);if(T&&!isBlocked(T,_,S,!0)){var M=T.currentTime,R=T.volume,I=T.muted,O=T.playbackRate,D=T.loop;l({type:e,id:E.getId(T),currentTime:M,volume:R,muted:I,playbackRate:O,loop:D})}}),k.media||500)}),R=[on("play",M(is.Play),T),on("pause",M(is.Pause),T),on("seeked",M(is.Seeked),T),on("volumechange",M(is.VolumeChange),T),on("ratechange",M(is.RateChange),T)];return callbackWrapper(function(){R.forEach(function(e){return e()})})}(e),styleSheetObserver=function(){},adoptedStyleSheetObserver=function(){},styleDeclarationObserver=function(){},fontObserver=function(){};e.recordDOM&&(styleSheetObserver=function(e,l){var _=e.styleSheetRuleCb,S=e.mirror,E=e.stylesheetManager,k=l.win;if(!k.CSSStyleSheet||!k.CSSStyleSheet.prototype)return function(){};var T=k.CSSStyleSheet.prototype.insertRule;k.CSSStyleSheet.prototype.insertRule=new Proxy(T,{apply:callbackWrapper(function(e,l,k){var T=_slicedToArray(k,2),M=T[0],R=T[1],I=getIdAndStyleId(l,S,E.styleMirror),O=I.id,D=I.styleId;return(O&&-1!==O||D&&-1!==D)&&_({id:O,styleId:D,adds:[{rule:M,index:R}]}),e.apply(l,k)})}),k.CSSStyleSheet.prototype.addRule=function(e,l){var _=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.cssRules.length,S="".concat(e," { ").concat(l," }");return k.CSSStyleSheet.prototype.insertRule.apply(this,[S,_])};var M,R,I=k.CSSStyleSheet.prototype.deleteRule;k.CSSStyleSheet.prototype.deleteRule=new Proxy(I,{apply:callbackWrapper(function(e,l,k){var T=_slicedToArray(k,1)[0],M=getIdAndStyleId(l,S,E.styleMirror),R=M.id,I=M.styleId;return(R&&-1!==R||I&&-1!==I)&&_({id:R,styleId:I,removes:[{index:T}]}),e.apply(l,k)})}),k.CSSStyleSheet.prototype.removeRule=function(e){return k.CSSStyleSheet.prototype.deleteRule.apply(this,[e])},k.CSSStyleSheet.prototype.replace&&(M=k.CSSStyleSheet.prototype.replace,k.CSSStyleSheet.prototype.replace=new Proxy(M,{apply:callbackWrapper(function(e,l,k){var T=_slicedToArray(k,1)[0],M=getIdAndStyleId(l,S,E.styleMirror),R=M.id,I=M.styleId;return(R&&-1!==R||I&&-1!==I)&&_({id:R,styleId:I,replace:T}),e.apply(l,k)})})),k.CSSStyleSheet.prototype.replaceSync&&(R=k.CSSStyleSheet.prototype.replaceSync,k.CSSStyleSheet.prototype.replaceSync=new Proxy(R,{apply:callbackWrapper(function(e,l,k){var T=_slicedToArray(k,1)[0],M=getIdAndStyleId(l,S,E.styleMirror),R=M.id,I=M.styleId;return(R&&-1!==R||I&&-1!==I)&&_({id:R,styleId:I,replaceSync:T}),e.apply(l,k)})}));var O={};canMonkeyPatchNestedCSSRule("CSSGroupingRule")?O.CSSGroupingRule=k.CSSGroupingRule:(canMonkeyPatchNestedCSSRule("CSSMediaRule")&&(O.CSSMediaRule=k.CSSMediaRule),canMonkeyPatchNestedCSSRule("CSSConditionRule")&&(O.CSSConditionRule=k.CSSConditionRule),canMonkeyPatchNestedCSSRule("CSSSupportsRule")&&(O.CSSSupportsRule=k.CSSSupportsRule));var D={};return Object.entries(O).forEach(function(e){var l=_slicedToArray(e,2),k=l[0],T=l[1];D[k]={insertRule:T.prototype.insertRule,deleteRule:T.prototype.deleteRule},T.prototype.insertRule=new Proxy(D[k].insertRule,{apply:callbackWrapper(function(e,l,k){var T=_slicedToArray(k,2),M=T[0],R=T[1],I=getIdAndStyleId(l.parentStyleSheet,S,E.styleMirror),O=I.id,D=I.styleId;return(O&&-1!==O||D&&-1!==D)&&_({id:O,styleId:D,adds:[{rule:M,index:[].concat(_toConsumableArray3(getNestedCSSRulePositions(l)),[R||0])}]}),e.apply(l,k)})}),T.prototype.deleteRule=new Proxy(D[k].deleteRule,{apply:callbackWrapper(function(e,l,k){var T=_slicedToArray(k,1)[0],M=getIdAndStyleId(l.parentStyleSheet,S,E.styleMirror),R=M.id,I=M.styleId;return(R&&-1!==R||I&&-1!==I)&&_({id:R,styleId:I,removes:[{index:[].concat(_toConsumableArray3(getNestedCSSRulePositions(l)),[T])}]}),e.apply(l,k)})})}),callbackWrapper(function(){k.CSSStyleSheet.prototype.insertRule=T,k.CSSStyleSheet.prototype.deleteRule=I,M&&(k.CSSStyleSheet.prototype.replace=M),R&&(k.CSSStyleSheet.prototype.replaceSync=R),Object.entries(O).forEach(function(e){var l=_slicedToArray(e,2),_=l[0],S=l[1];S.prototype.insertRule=D[_].insertRule,S.prototype.deleteRule=D[_].deleteRule})})}(e,{win:S}),adoptedStyleSheetObserver=initAdoptedStyleSheetObserver(e,e.doc),styleDeclarationObserver=function(e,l){var _=e.styleDeclarationCb,S=e.mirror,E=e.ignoreCSSAttributes,k=e.stylesheetManager,T=l.win,M=T.CSSStyleDeclaration.prototype.setProperty;T.CSSStyleDeclaration.prototype.setProperty=new Proxy(M,{apply:callbackWrapper(function(e,l,T){var R,I=_slicedToArray(T,3),O=I[0],D=I[1],L=I[2];if(E.has(O))return M.apply(l,[O,D,L]);var U=getIdAndStyleId(null==(R=l.parentRule)?void 0:R.parentStyleSheet,S,k.styleMirror),B=U.id,z=U.styleId;return(B&&-1!==B||z&&-1!==z)&&_({id:B,styleId:z,set:{property:O,value:D,priority:L},index:getNestedCSSRulePositions(l.parentRule)}),e.apply(l,T)})});var R=T.CSSStyleDeclaration.prototype.removeProperty;return T.CSSStyleDeclaration.prototype.removeProperty=new Proxy(R,{apply:callbackWrapper(function(e,l,T){var M,I=_slicedToArray(T,1)[0];if(E.has(I))return R.apply(l,[I]);var O=getIdAndStyleId(null==(M=l.parentRule)?void 0:M.parentStyleSheet,S,k.styleMirror),D=O.id,L=O.styleId;return(D&&-1!==D||L&&-1!==L)&&_({id:D,styleId:L,remove:{property:I},index:getNestedCSSRulePositions(l.parentRule)}),e.apply(l,T)})}),callbackWrapper(function(){T.CSSStyleDeclaration.prototype.setProperty=M,T.CSSStyleDeclaration.prototype.removeProperty=R})}(e,{win:S}),e.collectFonts&&(fontObserver=function(e){var l=e.fontCb,_=e.doc,S=_.defaultView;if(!S)return function(){};var E=[],k=new WeakMap,T=S.FontFace;S.FontFace=function(e,l,_){var S=new T(e,l,_);return k.set(S,{family:e,buffer:"string"!=typeof l,descriptors:_,fontSource:"string"==typeof l?l:JSON.stringify(Array.from(new Uint8Array(l)))}),S};var M=patch(_.fonts,"add",function(e){return function(_){return setTimeout(callbackWrapper(function(){var e=k.get(_);e&&(l(e),k.delete(_))}),0),e.apply(this,[_])}});return E.push(function(){S.FontFace=T}),E.push(M),callbackWrapper(function(){E.forEach(function(e){return e()})})}(e)));var z,j,G,H,V,W,q,X,K,Y=(j=(z=e).doc,G=z.mirror,H=z.blockClass,V=z.blockSelector,W=z.selectionCb,q=!0,(X=callbackWrapper(function(){var e=j.getSelection();if(!(!e||q&&(null==e?void 0:e.isCollapsed))){q=e.isCollapsed||!1;for(var l=[],_=e.rangeCount||0,S=0;S<_;S++){var E=e.getRangeAt(S),k=E.startContainer,T=E.startOffset,M=E.endContainer,R=E.endOffset;isBlocked(k,H,V,!0)||isBlocked(M,H,V,!0)||l.push({start:G.getId(k),startOffset:T,end:G.getId(M),endOffset:R})}W({ranges:l})}}))(),on("selectionchange",X)),J=function(e){var l=e.doc,_=e.customElementCb,S=l.defaultView;return S&&S.customElements?patch(S.customElements,"define",function(e){return function(l,S,E){try{_({define:{name:l}})}catch(k){}return e.apply(this,[l,S,E])}}):function(){}}(e),Q=[],Z=_createForOfIteratorHelper2(e.plugins);try{for(Z.s();!(K=Z.n()).done;){var $=K.value;Q.push($.observer($.callback,S,$.options))}}catch(ee){Z.e(ee)}finally{Z.f()}return callbackWrapper(function(){us.forEach(function(e){return e.reset()}),null==l||l.disconnect(),I(),O(),D(),L(),U(),B(),styleSheetObserver(),adoptedStyleSheetObserver(),styleDeclarationObserver(),fontObserver(),Y(),J(),Q.forEach(function(e){return e()})})}function hasNestedCSSRule(e){return void 0!==window[e]}function canMonkeyPatchNestedCSSRule(e){return Boolean(void 0!==window[e]&&window[e].prototype&&"insertRule"in window[e].prototype&&"deleteRule"in window[e].prototype)}for(var hs=function(){return _createClass3(function CrossOriginIframeMirror(e){_classCallCheck3(this,CrossOriginIframeMirror),__publicField(this,"iframeIdToRemoteIdMap",new WeakMap),__publicField(this,"iframeRemoteIdToIdMap",new WeakMap),this.generateIdFn=e},[{key:"getId",value:function(e,l,_,S){var E=_||this.getIdToRemoteIdMap(e),k=S||this.getRemoteIdToIdMap(e),T=E.get(l);return T||(T=this.generateIdFn(),E.set(l,T),k.set(T,l)),T}},{key:"getIds",value:function(e,l){var _=this,S=this.getIdToRemoteIdMap(e),E=this.getRemoteIdToIdMap(e);return l.map(function(l){return _.getId(e,l,S,E)})}},{key:"getRemoteId",value:function(e,l,_){var S=_||this.getRemoteIdToIdMap(e);if("number"!=typeof l)return l;var E=S.get(l);return E||-1}},{key:"getRemoteIds",value:function(e,l){var _=this,S=this.getRemoteIdToIdMap(e);return l.map(function(l){return _.getRemoteId(e,l,S)})}},{key:"reset",value:function(e){if(!e)return this.iframeIdToRemoteIdMap=new WeakMap,void(this.iframeRemoteIdToIdMap=new WeakMap);this.iframeIdToRemoteIdMap.delete(e),this.iframeRemoteIdToIdMap.delete(e)}},{key:"getIdToRemoteIdMap",value:function(e){var l=this.iframeIdToRemoteIdMap.get(e);return l||(l=new Map,this.iframeIdToRemoteIdMap.set(e,l)),l}},{key:"getRemoteIdToIdMap",value:function(e){var l=this.iframeRemoteIdToIdMap.get(e);return l||(l=new Map,this.iframeRemoteIdToIdMap.set(e,l)),l}}])}(),ds=function(){return _createClass3(function IframeManager(e){_classCallCheck3(this,IframeManager),__publicField(this,"iframes",new WeakMap),__publicField(this,"crossOriginIframeMap",new WeakMap),__publicField(this,"crossOriginIframeMirror",new hs(genId)),__publicField(this,"crossOriginIframeStyleMirror"),__publicField(this,"crossOriginIframeRootIdMap",new WeakMap),__publicField(this,"mirror"),__publicField(this,"mutationCb"),__publicField(this,"wrappedEmit"),__publicField(this,"loadListener"),__publicField(this,"stylesheetManager"),__publicField(this,"recordCrossOriginIframes"),this.mutationCb=e.mutationCb,this.wrappedEmit=e.wrappedEmit,this.stylesheetManager=e.stylesheetManager,this.recordCrossOriginIframes=e.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new hs(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=e.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))},[{key:"addIframe",value:function(e){this.iframes.set(e,!0),e.contentWindow&&this.crossOriginIframeMap.set(e.contentWindow,e)}},{key:"addLoadListener",value:function(e){this.loadListener=e}},{key:"attachIframe",value:function(e,l){var _,S;this.mutationCb({adds:[{parentId:this.mirror.getId(e),nextId:null,node:l}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),this.recordCrossOriginIframes&&(null==(_=e.contentWindow)||_.addEventListener("message",this.handleMessage.bind(this))),null==(S=this.loadListener)||S.call(this,e),e.contentDocument&&e.contentDocument.adoptedStyleSheets&&e.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(e.contentDocument.adoptedStyleSheets,this.mirror.getId(e.contentDocument))}},{key:"handleMessage",value:function(e){var l=e;if("rrweb"===l.data.type&&l.origin===l.data.origin&&e.source){var _=this.crossOriginIframeMap.get(e.source);if(_){var S=this.transformCrossOriginEvent(_,l.data.event);S&&this.wrappedEmit(S,l.data.isCheckout)}}}},{key:"transformCrossOriginEvent",value:function(e,l){var _,S=this;switch(l.type){case $o.FullSnapshot:this.crossOriginIframeMirror.reset(e),this.crossOriginIframeStyleMirror.reset(e),this.replaceIdOnNode(l.data.node,e);var E=l.data.node.id;return this.crossOriginIframeRootIdMap.set(e,E),this.patchRootIdOnNode(l.data.node,E),{timestamp:l.timestamp,type:$o.IncrementalSnapshot,data:{source:es.Mutation,adds:[{parentId:this.mirror.getId(e),nextId:null,node:l.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}};case $o.Meta:case $o.Load:case $o.DomContentLoaded:return!1;case $o.Plugin:return l;case $o.Custom:return this.replaceIds(l.data.payload,e,["id","parentId","previousId","nextId"]),l;case $o.IncrementalSnapshot:switch(l.data.source){case es.Mutation:return l.data.adds.forEach(function(l){S.replaceIds(l,e,["parentId","nextId","previousId"]),S.replaceIdOnNode(l.node,e);var _=S.crossOriginIframeRootIdMap.get(e);_&&S.patchRootIdOnNode(l.node,_)}),l.data.removes.forEach(function(l){S.replaceIds(l,e,["parentId","id"])}),l.data.attributes.forEach(function(l){S.replaceIds(l,e,["id"])}),l.data.texts.forEach(function(l){S.replaceIds(l,e,["id"])}),l;case es.Drag:case es.TouchMove:case es.MouseMove:return l.data.positions.forEach(function(l){S.replaceIds(l,e,["id"])}),l;case es.ViewportResize:return!1;case es.MediaInteraction:case es.MouseInteraction:case es.Scroll:case es.CanvasMutation:case es.Input:return this.replaceIds(l.data,e,["id"]),l;case es.StyleSheetRule:case es.StyleDeclaration:return this.replaceIds(l.data,e,["id"]),this.replaceStyleIds(l.data,e,["styleId"]),l;case es.Font:return l;case es.Selection:return l.data.ranges.forEach(function(l){S.replaceIds(l,e,["start","end"])}),l;case es.AdoptedStyleSheet:return this.replaceIds(l.data,e,["id"]),this.replaceStyleIds(l.data,e,["styleIds"]),null==(_=l.data.styles)||_.forEach(function(l){S.replaceStyleIds(l,e,["styleId"])}),l}}return!1}},{key:"replace",value:function(e,l,_,S){var E,k=_createForOfIteratorHelper2(S);try{for(k.s();!(E=k.n()).done;){var T=E.value;(Array.isArray(l[T])||"number"==typeof l[T])&&(Array.isArray(l[T])?l[T]=e.getIds(_,l[T]):l[T]=e.getId(_,l[T]))}}catch(M){k.e(M)}finally{k.f()}return l}},{key:"replaceIds",value:function(e,l,_){return this.replace(this.crossOriginIframeMirror,e,l,_)}},{key:"replaceStyleIds",value:function(e,l,_){return this.replace(this.crossOriginIframeStyleMirror,e,l,_)}},{key:"replaceIdOnNode",value:function(e,l){var _=this;this.replaceIds(e,l,["id","rootId"]),"childNodes"in e&&e.childNodes.forEach(function(e){_.replaceIdOnNode(e,l)})}},{key:"patchRootIdOnNode",value:function(e,l){var _=this;e.type===O.Document||e.rootId||(e.rootId=l),"childNodes"in e&&e.childNodes.forEach(function(e){_.patchRootIdOnNode(e,l)})}}])}(),fs=function(){return _createClass3(function ShadowDomManager(e){_classCallCheck3(this,ShadowDomManager),__publicField(this,"shadowDoms",new WeakSet),__publicField(this,"mutationCb"),__publicField(this,"scrollCb"),__publicField(this,"bypassOptions"),__publicField(this,"mirror"),__publicField(this,"restoreHandlers",[]),this.mutationCb=e.mutationCb,this.scrollCb=e.scrollCb,this.bypassOptions=e.bypassOptions,this.mirror=e.mirror,this.init()},[{key:"init",value:function(){this.reset(),this.patchAttachShadow(Element,document)}},{key:"addShadowRoot",value:function(e,l){var _=this;if(isNativeShadowDom(e)&&!this.shadowDoms.has(e)){this.shadowDoms.add(e);var S=initMutationObserver(_objectSpread2(_objectSpread2({},this.bypassOptions),{},{doc:l,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this}),e);this.restoreHandlers.push(function(){return S.disconnect()}),this.restoreHandlers.push(initScrollObserver(_objectSpread2(_objectSpread2({},this.bypassOptions),{},{scrollCb:this.scrollCb,doc:e,mirror:this.mirror}))),setTimeout(function(){e.adoptedStyleSheets&&e.adoptedStyleSheets.length>0&&_.bypassOptions.stylesheetManager.adoptStyleSheets(e.adoptedStyleSheets,_.mirror.getId(Yo.host(e))),_.restoreHandlers.push(initAdoptedStyleSheetObserver({mirror:_.mirror,stylesheetManager:_.bypassOptions.stylesheetManager},e))},0)}}},{key:"observeAttachShadow",value:function(e){e.contentWindow&&e.contentDocument&&this.patchAttachShadow(e.contentWindow.Element,e.contentDocument)}},{key:"patchAttachShadow",value:function(e,l){var _=this;this.restoreHandlers.push(patch(e.prototype,"attachShadow",function(e){return function(S){var E=e.call(this,S),k=Yo.shadowRoot(this);return k&&inDom(this)&&_.addShadowRoot(k,l),E}}))}},{key:"reset",value:function(){this.restoreHandlers.forEach(function(e){try{e()}catch(l){}}),this.restoreHandlers=[],this.shadowDoms=new WeakSet}}])}(),ps="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",vs="undefined"==typeof Uint8Array?[]:new Uint8Array(256),gs=0;gs<64;gs++)vs[ps.charCodeAt(gs)]=gs;var ms=new Map;var saveWebGLVar=function(e,l,_){if(e&&(isInstanceOfWebGLObject(e,l)||"object"===_typeof3(e))){var S=function(e,l){var _=ms.get(e);return _||(_=new Map,ms.set(e,_)),_.has(l)||_.set(l,[]),_.get(l)}(_,e.constructor.name),E=S.indexOf(e);return-1===E&&(E=S.length,S.push(e)),E}};function serializeArg(e,l,_){if(e instanceof Array)return e.map(function(e){return serializeArg(e,l,_)});if(null===e)return e;if(e instanceof Float32Array||e instanceof Float64Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Int16Array||e instanceof Int8Array||e instanceof Uint8ClampedArray)return{rr_type:e.constructor.name,args:[Object.values(e)]};if(e instanceof ArrayBuffer){var S=e.constructor.name,E=function(e){var l,_=new Uint8Array(e),S=_.length,E="";for(l=0;l<S;l+=3)E+=ps[_[l]>>2],E+=ps[(3&_[l])<<4|_[l+1]>>4],E+=ps[(15&_[l+1])<<2|_[l+2]>>6],E+=ps[63&_[l+2]];return S%3==2?E=E.substring(0,E.length-1)+"=":S%3==1&&(E=E.substring(0,E.length-2)+"=="),E}(e);return{rr_type:S,base64:E}}if(e instanceof DataView)return{rr_type:e.constructor.name,args:[serializeArg(e.buffer,l,_),e.byteOffset,e.byteLength]};if(e instanceof HTMLImageElement)return{rr_type:e.constructor.name,src:e.src};if(e instanceof HTMLCanvasElement){return{rr_type:"HTMLImageElement",src:e.toDataURL()}}return e instanceof ImageData?{rr_type:e.constructor.name,args:[serializeArg(e.data,l,_),e.width,e.height]}:isInstanceOfWebGLObject(e,l)||"object"===_typeof3(e)?{rr_type:e.constructor.name,index:saveWebGLVar(e,l,_)}:e}var serializeArgs=function(e,l,_){return e.map(function(e){return serializeArg(e,l,_)})},isInstanceOfWebGLObject=function(e,l){var _=["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter(function(e){return"function"==typeof l[e]});return Boolean(_.find(function(_){return e instanceof l[_]}))};function initCanvasContextObserver(e,l,_,S){var E=[];try{var k=patch(e.HTMLCanvasElement.prototype,"getContext",function(e){return function(E){for(var k=arguments.length,T=new Array(k>1?k-1:0),M=1;M<k;M++)T[M-1]=arguments[M];if(!isBlocked(this,l,_,!0)){var R=function(e){return"experimental-webgl"===e?"webgl":e}(E);if("__context"in this||(this.__context=R),S&&["webgl","webgl2"].includes(R))if(T[0]&&"object"===_typeof3(T[0])){var I=T[0];I.preserveDrawingBuffer||(I.preserveDrawingBuffer=!0)}else T.splice(0,1,{preserveDrawingBuffer:!0})}return e.apply(this,[E].concat(T))}});E.push(k)}catch(T){}return function(){E.forEach(function(e){return e()})}}function patchGLPrototype(e,l,_,S,E,k){var T,M=[],R=_createForOfIteratorHelper2(Object.getOwnPropertyNames(e));try{var _loop5=function(){var R=T.value;if(["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(R))return 0;try{if("function"!=typeof e[R])return 0;var I=patch(e,R,function(e){return function(){for(var T=arguments.length,M=new Array(T),I=0;I<T;I++)M[I]=arguments[I];var O=e.apply(this,M);if(saveWebGLVar(O,k,this),"tagName"in this.canvas&&!isBlocked(this.canvas,S,E,!0)){var D=serializeArgs(M,k,this),L={type:l,property:R,args:D};_(this.canvas,L)}return O}});M.push(I)}catch(D){var O=hookSetter(e,R,{set:function(e){_(this.canvas,{type:l,property:R,args:[e],setter:!0})}});M.push(O)}};for(R.s();!(T=R.n()).done;)_loop5()}catch(I){R.e(I)}finally{R.f()}return M}var ys,_s="KGZ1bmN0aW9uKCkgewogICJ1c2Ugc3RyaWN0IjsKICB2YXIgY2hhcnMgPSAiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyI7CiAgdmFyIGxvb2t1cCA9IHR5cGVvZiBVaW50OEFycmF5ID09PSAidW5kZWZpbmVkIiA/IFtdIDogbmV3IFVpbnQ4QXJyYXkoMjU2KTsKICBmb3IgKHZhciBpID0gMDsgaSA8IGNoYXJzLmxlbmd0aDsgaSsrKSB7CiAgICBsb29rdXBbY2hhcnMuY2hhckNvZGVBdChpKV0gPSBpOwogIH0KICB2YXIgZW5jb2RlID0gZnVuY3Rpb24oYXJyYXlidWZmZXIpIHsKICAgIHZhciBieXRlcyA9IG5ldyBVaW50OEFycmF5KGFycmF5YnVmZmVyKSwgaTIsIGxlbiA9IGJ5dGVzLmxlbmd0aCwgYmFzZTY0ID0gIiI7CiAgICBmb3IgKGkyID0gMDsgaTIgPCBsZW47IGkyICs9IDMpIHsKICAgICAgYmFzZTY0ICs9IGNoYXJzW2J5dGVzW2kyXSA+PiAyXTsKICAgICAgYmFzZTY0ICs9IGNoYXJzWyhieXRlc1tpMl0gJiAzKSA8PCA0IHwgYnl0ZXNbaTIgKyAxXSA+PiA0XTsKICAgICAgYmFzZTY0ICs9IGNoYXJzWyhieXRlc1tpMiArIDFdICYgMTUpIDw8IDIgfCBieXRlc1tpMiArIDJdID4+IDZdOwogICAgICBiYXNlNjQgKz0gY2hhcnNbYnl0ZXNbaTIgKyAyXSAmIDYzXTsKICAgIH0KICAgIGlmIChsZW4gJSAzID09PSAyKSB7CiAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDEpICsgIj0iOwogICAgfSBlbHNlIGlmIChsZW4gJSAzID09PSAxKSB7CiAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDIpICsgIj09IjsKICAgIH0KICAgIHJldHVybiBiYXNlNjQ7CiAgfTsKICBjb25zdCBsYXN0QmxvYk1hcCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7CiAgY29uc3QgdHJhbnNwYXJlbnRCbG9iTWFwID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTsKICBhc3luYyBmdW5jdGlvbiBnZXRUcmFuc3BhcmVudEJsb2JGb3Iod2lkdGgsIGhlaWdodCwgZGF0YVVSTE9wdGlvbnMpIHsKICAgIGNvbnN0IGlkID0gYCR7d2lkdGh9LSR7aGVpZ2h0fWA7CiAgICBpZiAoIk9mZnNjcmVlbkNhbnZhcyIgaW4gZ2xvYmFsVGhpcykgewogICAgICBpZiAodHJhbnNwYXJlbnRCbG9iTWFwLmhhcyhpZCkpIHJldHVybiB0cmFuc3BhcmVudEJsb2JNYXAuZ2V0KGlkKTsKICAgICAgY29uc3Qgb2Zmc2NyZWVuID0gbmV3IE9mZnNjcmVlbkNhbnZhcyh3aWR0aCwgaGVpZ2h0KTsKICAgICAgb2Zmc2NyZWVuLmdldENvbnRleHQoIjJkIik7CiAgICAgIGNvbnN0IGJsb2IgPSBhd2FpdCBvZmZzY3JlZW4uY29udmVydFRvQmxvYihkYXRhVVJMT3B0aW9ucyk7CiAgICAgIGNvbnN0IGFycmF5QnVmZmVyID0gYXdhaXQgYmxvYi5hcnJheUJ1ZmZlcigpOwogICAgICBjb25zdCBiYXNlNjQgPSBlbmNvZGUoYXJyYXlCdWZmZXIpOwogICAgICB0cmFuc3BhcmVudEJsb2JNYXAuc2V0KGlkLCBiYXNlNjQpOwogICAgICByZXR1cm4gYmFzZTY0OwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuICIiOwogICAgfQogIH0KICBjb25zdCB3b3JrZXIgPSBzZWxmOwogIHdvcmtlci5vbm1lc3NhZ2UgPSBhc3luYyBmdW5jdGlvbihlKSB7CiAgICBpZiAoIk9mZnNjcmVlbkNhbnZhcyIgaW4gZ2xvYmFsVGhpcykgewogICAgICBjb25zdCB7IGlkLCBiaXRtYXAsIHdpZHRoLCBoZWlnaHQsIGRhdGFVUkxPcHRpb25zIH0gPSBlLmRhdGE7CiAgICAgIGNvbnN0IHRyYW5zcGFyZW50QmFzZTY0ID0gZ2V0VHJhbnNwYXJlbnRCbG9iRm9yKAogICAgICAgIHdpZHRoLAogICAgICAgIGhlaWdodCwKICAgICAgICBkYXRhVVJMT3B0aW9ucwogICAgICApOwogICAgICBjb25zdCBvZmZzY3JlZW4gPSBuZXcgT2Zmc2NyZWVuQ2FudmFzKHdpZHRoLCBoZWlnaHQpOwogICAgICBjb25zdCBjdHggPSBvZmZzY3JlZW4uZ2V0Q29udGV4dCgiMmQiKTsKICAgICAgY3R4LmRyYXdJbWFnZShiaXRtYXAsIDAsIDApOwogICAgICBiaXRtYXAuY2xvc2UoKTsKICAgICAgY29uc3QgYmxvYiA9IGF3YWl0IG9mZnNjcmVlbi5jb252ZXJ0VG9CbG9iKGRhdGFVUkxPcHRpb25zKTsKICAgICAgY29uc3QgdHlwZSA9IGJsb2IudHlwZTsKICAgICAgY29uc3QgYXJyYXlCdWZmZXIgPSBhd2FpdCBibG9iLmFycmF5QnVmZmVyKCk7CiAgICAgIGNvbnN0IGJhc2U2NCA9IGVuY29kZShhcnJheUJ1ZmZlcik7CiAgICAgIGlmICghbGFzdEJsb2JNYXAuaGFzKGlkKSAmJiBhd2FpdCB0cmFuc3BhcmVudEJhc2U2NCA9PT0gYmFzZTY0KSB7CiAgICAgICAgbGFzdEJsb2JNYXAuc2V0KGlkLCBiYXNlNjQpOwogICAgICAgIHJldHVybiB3b3JrZXIucG9zdE1lc3NhZ2UoeyBpZCB9KTsKICAgICAgfQogICAgICBpZiAobGFzdEJsb2JNYXAuZ2V0KGlkKSA9PT0gYmFzZTY0KSByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQgfSk7CiAgICAgIHdvcmtlci5wb3N0TWVzc2FnZSh7CiAgICAgICAgaWQsCiAgICAgICAgdHlwZSwKICAgICAgICBiYXNlNjQsCiAgICAgICAgd2lkdGgsCiAgICAgICAgaGVpZ2h0CiAgICAgIH0pOwogICAgICBsYXN0QmxvYk1hcC5zZXQoaWQsIGJhc2U2NCk7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQ6IGUuZGF0YS5pZCB9KTsKICAgIH0KICB9Owp9KSgpOwovLyMgc291cmNlTWFwcGluZ1VSTD1pbWFnZS1iaXRtYXAtZGF0YS11cmwtd29ya2VyLUlKcEM3Z19iLmpzLm1hcAo=",bs="undefined"!=typeof window&&window.Blob&&new Blob([(ys=_s,Uint8Array.from(atob(ys),function(e){return e.charCodeAt(0)}))],{type:"text/javascript;charset=utf-8"});function WorkerWrapper(e){var l;try{if(!(l=bs&&(window.URL||window.webkitURL).createObjectURL(bs)))throw"";var _=new Worker(l,{name:null==e?void 0:e.name});return _.addEventListener("error",function(){(window.URL||window.webkitURL).revokeObjectURL(l)}),_}catch(S){return new Worker("data:text/javascript;base64,"+_s,{name:null==e?void 0:e.name})}finally{l&&(window.URL||window.webkitURL).revokeObjectURL(l)}}var Ss,ws,xs,Es=function(){return _createClass3(function CanvasManager(e){var l=this;_classCallCheck3(this,CanvasManager),__publicField(this,"pendingCanvasMutations",new Map),__publicField(this,"rafStamps",{latestId:0,invokeId:null}),__publicField(this,"mirror"),__publicField(this,"mutationCb"),__publicField(this,"resetObservers"),__publicField(this,"frozen",!1),__publicField(this,"locked",!1),__publicField(this,"processMutation",function(e,_){!(l.rafStamps.invokeId&&l.rafStamps.latestId!==l.rafStamps.invokeId)&&l.rafStamps.invokeId||(l.rafStamps.invokeId=l.rafStamps.latestId),l.pendingCanvasMutations.has(e)||l.pendingCanvasMutations.set(e,[]),l.pendingCanvasMutations.get(e).push(_)});var _=e.sampling,S=void 0===_?"all":_,E=e.win,k=e.blockClass,T=e.blockSelector,M=e.recordCanvas,R=e.dataURLOptions;this.mutationCb=e.mutationCb,this.mirror=e.mirror,M&&"all"===S&&this.initCanvasMutationObserver(E,k,T),M&&"number"==typeof S&&this.initCanvasFPSObserver(S,E,k,T,{dataURLOptions:R})},[{key:"reset",value:function(){this.pendingCanvasMutations.clear(),this.resetObservers&&this.resetObservers()}},{key:"freeze",value:function(){this.frozen=!0}},{key:"unfreeze",value:function(){this.frozen=!1}},{key:"lock",value:function(){this.locked=!0}},{key:"unlock",value:function(){this.locked=!1}},{key:"initCanvasFPSObserver",value:function(e,l,_,S,E){var k=this,T=initCanvasContextObserver(l,_,S,!0),M=new Map,R=new WorkerWrapper;R.onmessage=function(e){var l=e.data.id;if(M.set(l,!1),"base64"in e.data){var _=e.data,S=_.base64,E=_.type,T=_.width,R=_.height;k.mutationCb({id:l,type:rs["2D"],commands:[{property:"clearRect",args:[0,0,T,R]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:S}],type:E}]},0,0]}]})}};var I,O=1e3/e,D=0,_takeCanvasSnapshots=function(e){var T;D&&e-D<O?I=requestAnimationFrame(_takeCanvasSnapshots):(D=e,(T=[],l.document.querySelectorAll("canvas").forEach(function(e){isBlocked(e,_,S,!0)||T.push(e)}),T).forEach(function(){var e=_asyncToGenerator(_regenerator().m(function _callee31(e){var l,_,S,T;return _regenerator().w(function(I){for(;;)switch(I.n){case 0:if(_=k.mirror.getId(e),!M.get(_)){I.n=1;break}return I.a(2);case 1:if(0!==e.width&&0!==e.height){I.n=2;break}return I.a(2);case 2:return M.set(_,!0),["webgl","webgl2"].includes(e.__context)&&(S=e.getContext(e.__context),!1===(null==(l=null==S?void 0:S.getContextAttributes())?void 0:l.preserveDrawingBuffer)&&S.clear(S.COLOR_BUFFER_BIT)),I.n=3,createImageBitmap(e);case 3:T=I.v,R.postMessage({id:_,bitmap:T,width:e.width,height:e.height,dataURLOptions:E.dataURLOptions},[T]);case 4:return I.a(2)}},_callee31)}));return function(l){return e.apply(this,arguments)}}()),I=requestAnimationFrame(_takeCanvasSnapshots))};I=requestAnimationFrame(_takeCanvasSnapshots),this.resetObservers=function(){T(),cancelAnimationFrame(I)}}},{key:"initCanvasMutationObserver",value:function(e,l,_){this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher();var S=initCanvasContextObserver(e,l,_,!1),E=function(e,l,_,S){var E,k=[],T=_createForOfIteratorHelper2(Object.getOwnPropertyNames(l.CanvasRenderingContext2D.prototype));try{var _loop4=function(){var T=E.value;try{if("function"!=typeof l.CanvasRenderingContext2D.prototype[T])return 1;var M=patch(l.CanvasRenderingContext2D.prototype,T,function(E){return function(){for(var k=this,M=arguments.length,R=new Array(M),I=0;I<M;I++)R[I]=arguments[I];return isBlocked(this.canvas,_,S,!0)||setTimeout(function(){var _=serializeArgs(R,l,k);e(k.canvas,{type:rs["2D"],property:T,args:_})},0),E.apply(this,R)}});k.push(M)}catch(I){var R=hookSetter(l.CanvasRenderingContext2D.prototype,T,{set:function(l){e(this.canvas,{type:rs["2D"],property:T,args:[l],setter:!0})}});k.push(R)}};for(T.s();!(E=T.n()).done;)_loop4()}catch(M){T.e(M)}finally{T.f()}return function(){k.forEach(function(e){return e()})}}(this.processMutation.bind(this),e,l,_),k=function(e,l,_,S){var E=[];return E.push.apply(E,_toConsumableArray3(patchGLPrototype(l.WebGLRenderingContext.prototype,rs.WebGL,e,_,S,l))),void 0!==l.WebGL2RenderingContext&&E.push.apply(E,_toConsumableArray3(patchGLPrototype(l.WebGL2RenderingContext.prototype,rs.WebGL2,e,_,S,l))),function(){E.forEach(function(e){return e()})}}(this.processMutation.bind(this),e,l,_);this.resetObservers=function(){S(),E(),k()}}},{key:"startPendingCanvasMutationFlusher",value:function(){var e=this;requestAnimationFrame(function(){return e.flushPendingCanvasMutations()})}},{key:"startRAFTimestamping",value:function(){var e=this,_setLatestRAFTimestamp=function(l){e.rafStamps.latestId=l,requestAnimationFrame(_setLatestRAFTimestamp)};requestAnimationFrame(_setLatestRAFTimestamp)}},{key:"flushPendingCanvasMutations",value:function(){var e=this;this.pendingCanvasMutations.forEach(function(l,_){var S=e.mirror.getId(_);e.flushPendingCanvasMutationFor(_,S)}),requestAnimationFrame(function(){return e.flushPendingCanvasMutations()})}},{key:"flushPendingCanvasMutationFor",value:function(e,l){if(!this.frozen&&!this.locked){var _=this.pendingCanvasMutations.get(e);if(_&&-1!==l){var S=_.map(function(e){e.type;return _objectWithoutProperties3(e,k)}),E=_[0].type;this.mutationCb({id:l,type:E,commands:S}),this.pendingCanvasMutations.delete(e)}}}}])}(),ks=function(){return _createClass3(function StylesheetManager(e){_classCallCheck3(this,StylesheetManager),__publicField(this,"trackedLinkElements",new WeakSet),__publicField(this,"mutationCb"),__publicField(this,"adoptedStyleSheetCb"),__publicField(this,"styleMirror",new Zo),this.mutationCb=e.mutationCb,this.adoptedStyleSheetCb=e.adoptedStyleSheetCb},[{key:"attachLinkElement",value:function(e,l){"_cssText"in l.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:l.id,attributes:l.attributes}]}),this.trackLinkElement(e)}},{key:"trackLinkElement",value:function(e){this.trackedLinkElements.has(e)||(this.trackedLinkElements.add(e),this.trackStylesheetInLinkElement(e))}},{key:"adoptStyleSheets",value:function(e,l){var _=this;if(0!==e.length){var S,E={id:l,styleIds:[]},k=[],T=_createForOfIteratorHelper2(e);try{var _loop6=function(){var e,l=S.value;_.styleMirror.has(l)?e=_.styleMirror.getId(l):(e=_.styleMirror.add(l),k.push({styleId:e,rules:Array.from(l.rules||CSSRule,function(e,_){return{rule:stringifyRule(e,l.href),index:_}})})),E.styleIds.push(e)};for(T.s();!(S=T.n()).done;)_loop6()}catch(M){T.e(M)}finally{T.f()}k.length>0&&(E.styles=k),this.adoptedStyleSheetCb(E)}}},{key:"reset",value:function(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}},{key:"trackStylesheetInLinkElement",value:function(e){}}])}(),As=function(){return _createClass3(function ProcessedNodeManager(){_classCallCheck3(this,ProcessedNodeManager),__publicField(this,"nodeMap",new WeakMap),__publicField(this,"active",!1)},[{key:"inOtherBuffer",value:function(e,l){var _=this.nodeMap.get(e);return _&&Array.from(_).some(function(e){return e!==l})}},{key:"add",value:function(e,l){var _=this;this.active||(this.active=!0,requestAnimationFrame(function(){_.nodeMap=new WeakMap,_.active=!1})),this.nodeMap.set(e,(this.nodeMap.get(e)||new Set).add(l))}},{key:"destroy",value:function(){}}])}(),Cs=!1;try{if(2!==Array.from([1],function(e){return 2*e})[0]){var Ts=document.createElement("iframe");document.body.appendChild(Ts),Array.from=(null==(M=Ts.contentWindow)?void 0:M.Array.from)||Array.from,document.body.removeChild(Ts)}}catch(Ps){}var Ms,Rs,Is=new G;function record(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=e.emit,_=e.checkoutEveryNms,S=e.checkoutEveryNth,E=e.blockClass,k=void 0===E?"rr-block":E,T=e.blockSelector,M=void 0===T?null:T,R=e.ignoreClass,I=void 0===R?"rr-ignore":R,O=e.ignoreSelector,D=void 0===O?null:O,L=e.maskTextClass,U=void 0===L?"rr-mask":L,B=e.maskTextSelector,z=void 0===B?null:B,j=e.inlineStylesheet,H=void 0===j||j,V=e.maskAllInputs,W=e.maskInputOptions,q=e.slimDOMOptions,X=e.maskInputFn,K=e.maskTextFn,Y=e.hooks,J=e.packFn,Q=e.sampling,Z=void 0===Q?{}:Q,$=e.dataURLOptions,ee=void 0===$?{}:$,te=e.mousemoveWait,ne=e.recordDOM,re=void 0===ne||ne,ie=e.recordCanvas,ae=void 0!==ie&&ie,oe=e.recordCrossOriginIframes,se=void 0!==oe&&oe,ue=e.recordAfter,le=void 0===ue?"DOMContentLoaded"===e.recordAfter?e.recordAfter:"load":ue,ce=e.userTriggeredOnInput,he=void 0!==ce&&ce,de=e.collectFonts,fe=void 0!==de&&de,pe=e.inlineImages,ve=void 0!==pe&&pe,ge=e.plugins,me=e.keepIframeSrcFn,ye=void 0===me?function(){return!1}:me,_e=e.ignoreCSSAttributes,be=void 0===_e?new Set([]):_e,Se=e.errorHandler;as=Se;var we=!se||window.parent===window,xe=!1;if(!we)try{window.parent.document&&(xe=!1)}catch(Ue){xe=!0}if(we&&!l)throw new Error("emit function is required");if(!we&&!xe)return function(){};void 0!==te&&void 0===Z.mousemove&&(Z.mousemove=te),Is.reset();var Ee,ke=!0===V?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:void 0!==W?W:{password:!0},Ae=!0===q||"all"===q?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:"all"===q,headMetaDescKeywords:"all"===q,headTitleMutations:"all"===q}:q||{};!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;"NodeList"in e&&!e.NodeList.prototype.forEach&&(e.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in e&&!e.DOMTokenList.prototype.forEach&&(e.DOMTokenList.prototype.forEach=Array.prototype.forEach)}();var Ce=0,eventProcessor=function(e){var l,_=_createForOfIteratorHelper2(ge||[]);try{for(_.s();!(l=_.n()).done;){var S=l.value;S.eventProcessor&&(e=S.eventProcessor(e))}}catch(Ps){_.e(Ps)}finally{_.f()}return J&&!xe&&(e=J(e)),e};Ss=function(e,E){var k,T=e;if(T.timestamp=Qo(),!(null==(k=us[0])?void 0:k.isFrozen())||T.type===$o.FullSnapshot||T.type===$o.IncrementalSnapshot&&T.data.source===es.Mutation||us.forEach(function(e){return e.unfreeze()}),we)null==l||l(eventProcessor(T),E);else if(xe){var M={type:"rrweb",event:eventProcessor(T),origin:window.location.origin,isCheckout:E};window.parent.postMessage(M,"*")}if(T.type===$o.FullSnapshot)Ee=T,Ce=0;else if(T.type===$o.IncrementalSnapshot){if(T.data.source===es.Mutation&&T.data.isAttachIframe)return;Ce++;var R=S&&Ce>=S,I=_&&T.timestamp-Ee.timestamp>_;(R||I)&&ws(!0)}};var Te,wrappedMutationEmit=function(e){Ss({type:$o.IncrementalSnapshot,data:_objectSpread2({source:es.Mutation},e)})},wrappedScrollEmit=function(e){return Ss({type:$o.IncrementalSnapshot,data:_objectSpread2({source:es.Scroll},e)})},wrappedCanvasMutationEmit=function(e){return Ss({type:$o.IncrementalSnapshot,data:_objectSpread2({source:es.CanvasMutation},e)})},Me=new ks({mutationCb:wrappedMutationEmit,adoptedStyleSheetCb:function(e){return Ss({type:$o.IncrementalSnapshot,data:_objectSpread2({source:es.AdoptedStyleSheet},e)})}}),Re=new ds({mirror:Is,mutationCb:wrappedMutationEmit,stylesheetManager:Me,recordCrossOriginIframes:se,wrappedEmit:Ss}),Ie=_createForOfIteratorHelper2(ge||[]);try{for(Ie.s();!(Te=Ie.n()).done;){var Pe=Te.value;Pe.getMirror&&Pe.getMirror({nodeMirror:Is,crossOriginIframeMirror:Re.crossOriginIframeMirror,crossOriginIframeStyleMirror:Re.crossOriginIframeStyleMirror})}}catch(Ps){Ie.e(Ps)}finally{Ie.f()}var Oe=new As;xs=new Es({recordCanvas:ae,mutationCb:wrappedCanvasMutationEmit,win:window,blockClass:k,blockSelector:M,mirror:Is,sampling:Z.canvas,dataURLOptions:ee});var De=new fs({mutationCb:wrappedMutationEmit,scrollCb:wrappedScrollEmit,bypassOptions:{blockClass:k,blockSelector:M,maskTextClass:U,maskTextSelector:z,inlineStylesheet:H,maskInputOptions:ke,dataURLOptions:ee,maskTextFn:K,maskInputFn:X,recordCanvas:ae,inlineImages:ve,sampling:Z,slimDOMOptions:Ae,iframeManager:Re,stylesheetManager:Me,canvasManager:xs,keepIframeSrcFn:ye,processedNodeManager:Oe},mirror:Is});ws=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(re){Ss({type:$o.Meta,data:{href:window.location.href,width:getWindowWidth(),height:getWindowHeight()}},e),Me.reset(),De.init(),us.forEach(function(e){return e.lock()});var l=function(e,l){var _=l||{},S=_.mirror,E=void 0===S?new G:S,k=_.blockClass,T=void 0===k?"rr-block":k,M=_.blockSelector,R=void 0===M?null:M,I=_.maskTextClass,O=void 0===I?"rr-mask":I,D=_.maskTextSelector,L=void 0===D?null:D,U=_.inlineStylesheet,B=void 0===U||U,z=_.inlineImages,j=void 0!==z&&z,H=_.recordCanvas,V=void 0!==H&&H,W=_.maskAllInputs,q=void 0!==W&&W,X=_.maskTextFn,K=_.maskInputFn,Y=_.slimDOM,J=void 0!==Y&&Y,Q=_.dataURLOptions,Z=_.preserveWhiteSpace,$=_.onSerialize,ee=_.onIframeLoad,te=_.iframeLoadTimeout,ne=_.onStylesheetLoad,re=_.stylesheetLoadTimeout,ie=_.keepIframeSrcFn;return serializeNodeWithId(e,{doc:e,mirror:E,blockClass:T,blockSelector:R,maskTextClass:O,maskTextSelector:L,skipChild:!1,inlineStylesheet:B,maskInputOptions:!0===q?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:!1===q?{password:!0}:q,maskTextFn:X,maskInputFn:K,slimDOMOptions:!0===J||"all"===J?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:"all"===J,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:!1===J?{}:J,dataURLOptions:Q,inlineImages:j,recordCanvas:V,preserveWhiteSpace:Z,onSerialize:$,onIframeLoad:ee,iframeLoadTimeout:te,onStylesheetLoad:ne,stylesheetLoadTimeout:re,keepIframeSrcFn:void 0===ie?function(){return!1}:ie,newlyAddedElement:!1})}(document,{mirror:Is,blockClass:k,blockSelector:M,maskTextClass:U,maskTextSelector:z,inlineStylesheet:H,maskAllInputs:ke,maskTextFn:K,maskInputFn:X,slimDOM:Ae,dataURLOptions:ee,recordCanvas:ae,inlineImages:ve,onSerialize:function(e){isSerializedIframe(e,Is)&&Re.addIframe(e),isSerializedStylesheet(e,Is)&&Me.trackLinkElement(e),hasShadowRoot(e)&&De.addShadowRoot(Yo.shadowRoot(e),document)},onIframeLoad:function(e,l){Re.attachIframe(e,l),De.observeAttachShadow(e)},onStylesheetLoad:function(e,l){Me.attachLinkElement(e,l)},keepIframeSrcFn:ye});l&&(Ss({type:$o.FullSnapshot,data:{node:l,initialOffset:getWindowScroll(window)}},e),us.forEach(function(e){return e.unlock()}),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&Me.adoptStyleSheets(document.adoptedStyleSheets,Is.getId(document)))}};try{var Le=[],observe=function(e){var l;return callbackWrapper(initObservers)({mutationCb:wrappedMutationEmit,mousemoveCb:function(e,l){return Ss({type:$o.IncrementalSnapshot,data:{source:l,positions:e}})},mouseInteractionCb:function(e){return Ss({type:$o.IncrementalSnapshot,data:_objectSpread2({source:es.MouseInteraction},e)})},scrollCb:wrappedScrollEmit,viewportResizeCb:function(e){return Ss({type:$o.IncrementalSnapshot,data:_objectSpread2({source:es.ViewportResize},e)})},inputCb:function(e){return Ss({type:$o.IncrementalSnapshot,data:_objectSpread2({source:es.Input},e)})},mediaInteractionCb:function(e){return Ss({type:$o.IncrementalSnapshot,data:_objectSpread2({source:es.MediaInteraction},e)})},styleSheetRuleCb:function(e){return Ss({type:$o.IncrementalSnapshot,data:_objectSpread2({source:es.StyleSheetRule},e)})},styleDeclarationCb:function(e){return Ss({type:$o.IncrementalSnapshot,data:_objectSpread2({source:es.StyleDeclaration},e)})},canvasMutationCb:wrappedCanvasMutationEmit,fontCb:function(e){return Ss({type:$o.IncrementalSnapshot,data:_objectSpread2({source:es.Font},e)})},selectionCb:function(e){Ss({type:$o.IncrementalSnapshot,data:_objectSpread2({source:es.Selection},e)})},customElementCb:function(e){Ss({type:$o.IncrementalSnapshot,data:_objectSpread2({source:es.CustomElement},e)})},blockClass:k,ignoreClass:I,ignoreSelector:D,maskTextClass:U,maskTextSelector:z,maskInputOptions:ke,inlineStylesheet:H,sampling:Z,recordDOM:re,recordCanvas:ae,inlineImages:ve,userTriggeredOnInput:he,collectFonts:fe,doc:e,maskInputFn:X,maskTextFn:K,keepIframeSrcFn:ye,blockSelector:M,slimDOMOptions:Ae,dataURLOptions:ee,mirror:Is,iframeManager:Re,stylesheetManager:Me,shadowDomManager:De,processedNodeManager:Oe,canvasManager:xs,ignoreCSSAttributes:be,plugins:(null==(l=null==ge?void 0:ge.filter(function(e){return e.observer}))?void 0:l.map(function(e){return{observer:e.observer,options:e.options,callback:function(l){return Ss({type:$o.Plugin,data:{plugin:e.name,payload:l}})}}}))||[]},Y)};Re.addLoadListener(function(e){try{Le.push(observe(e.contentDocument))}catch(l){}});var _init=function(){ws(),Le.push(observe(document)),Cs=!0};return"interactive"===document.readyState||"complete"===document.readyState?_init():(Le.push(on("DOMContentLoaded",function(){Ss({type:$o.DomContentLoaded,data:{}}),"DOMContentLoaded"===le&&_init()})),Le.push(on("load",function(){Ss({type:$o.Load,data:{}}),"load"===le&&_init()},window))),function(){Le.forEach(function(e){return e()}),Oe.destroy(),Cs=!1,as=void 0}}catch(Fe){}}record.addCustomEvent=function(e,l){if(!Cs)throw new Error("please add custom event after start recording");Ss({type:$o.Custom,data:{tag:e,payload:l}})},record.freezePage=function(){us.forEach(function(e){return e.freeze()})},record.takeFullSnapshot=function(e){if(!Cs)throw new Error("please take full snapshot after start recording");ws(e)},record.mirror=Is,(Rs=Ms||(Ms={}))[Rs.NotStarted=0]="NotStarted",Rs[Rs.Running=1]="Running",Rs[Rs.Stopped=2]="Stopped",e.record=record}(xa)),xa}function requireSessionReplayClient(){if(ya)return wa;ya=1,Object.defineProperty(wa,"__esModule",{value:!0}),wa.SessionReplayClient=void 0;var e=requireRecord(),l=requireSrc$3(),_=function(){return _createClass3(function SessionReplayClient(){_classCallCheck3(this,SessionReplayClient),this._startTimestamp=null,this._endTimestamp=null},[{key:"record",value:function(_,S,E){var k=this,T=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(null!=(0,l._getDocumentSafe)()&&(this._startTimestamp=null,this._endTimestamp=null,this._stopCallback=E,!this._stopFn)){this._stopFn=function(l,_,S){return S?(0,e.record)(Object.assign(Object.assign({},_),{emit:l,checkoutEveryNms:3e4})):(0,e.record)(Object.assign(Object.assign({},_),{emit:l}))}(function(e,l){var S,E,M;T?k._startTimestamp=l?e.timestamp:null!==(S=k._startTimestamp)&&void 0!==S?S:e.timestamp:null!==(E=k._startTimestamp)&&void 0!==E||(k._startTimestamp=e.timestamp),k._endTimestamp=e.timestamp;var R=0;(function(e){return 3===e.type&&2===e.data.source&&(2===e.data.type||4===e.data.type)})(e)&&R++,_(Object.assign(Object.assign({},e),{eventIndex:0}),{startTime:k._startTimestamp,endTime:k._endTimestamp,clickCount:R},null!=l&&l),k._endTimestamp-k._startTimestamp>144e5&&(null===(M=k._stopFn)||void 0===M||M.call(k),k._stopCallback&&k._stopCallback())},S,T)}}},{key:"stop",value:function(){this._stopFn&&(this._stopFn(),this._stopFn=void 0)}},{key:"isRecording",value:function(){return null!=this._stopFn}}])}();return wa.SessionReplayClient=_,wa}var Ea,ka,Aa,Ca={};function requireSessionReplayUtils(){if(Ea)return Ca;Ea=1,Object.defineProperty(Ca,"__esModule",{value:!0}),Ca._appendSlicedMetadata=Ca._slicePayload=Ca._makeLoggableRrwebEvent=Ca.MAX_LOGS=Ca.MAX_INDIVIDUAL_EVENT_BYTES=Ca.REPLAY_ENQUEUE_TRIGGER_BYTES=void 0;var e=requireSrc$3(),l=1048576;return Ca.REPLAY_ENQUEUE_TRIGGER_BYTES=10240,Ca.MAX_INDIVIDUAL_EVENT_BYTES=10485760,Ca.MAX_LOGS=1e4,Ca._makeLoggableRrwebEvent=function(l,_,S,E,k){return{eventName:"statsig::session_recording",value:S,metadata:{session_start_ts:String(E.startTime),session_end_ts:String(E.endTime),clicks_captured_cumulative:String(E.clickCount),rrweb_events:l,rrweb_payload_size:String(_.length),session_replay_sdk_version:e.SDK_VERSION,sdk_instance_id:k}}},Ca._slicePayload=function(e){for(var _=[],S=0;S<e.length;S+=l)_.push(e.slice(S,S+l));return _},Ca._appendSlicedMetadata=function(e,l,_,S,E){e.sliced_id=l,e.slice_index=String(_),e.slice_count=String(S),e.slice_byte_size=String(E)},Ca}function requireSessionReplayBase(){if(ka)return Sa;ka=1,Object.defineProperty(Sa,"__esModule",{value:!0}),Sa.SessionReplayBase=Sa.forceStartRecording=Sa.startRecording=Sa.stopRecording=void 0;var e=requireSrc$3(),l=requireSessionReplayClient(),_=requireSessionReplayUtils();function _getInstanceFromSdkKey(l){var _,E,k=null==l?(0,e._getStatsigGlobal)().firstSRInstance:null===(E=null===(_=(0,e._getStatsigGlobal)())||void 0===_?void 0:_.srInstances)||void 0===E?void 0:E[l];return k instanceof S?k:null}Sa.stopRecording=function(e){var l;null===(l=_getInstanceFromSdkKey(e))||void 0===l||l.stopRecording()},Sa.startRecording=function(e){var l;null===(l=_getInstanceFromSdkKey(e))||void 0===l||l.startRecording()},Sa.forceStartRecording=function(e){var l;null===(l=_getInstanceFromSdkKey(e))||void 0===l||l.forceStartRecording()};var S=function(){function SessionReplayBase(_,S){var E=this;_classCallCheck3(this,SessionReplayBase),this._sessionData={startTime:-1,endTime:0,clickCount:0},this._events=[],this._wasStopped=!1,this._currentEventIndex=0,this._totalLogs=0,this._client=_,this._options=S;var k=this._client.getContext(),T=k.sdkKey,M=k.errorBoundary;if(this._errorBoundary=M,this._errorBoundary.wrap(this),this._replayer=new l.SessionReplayClient,this._client.$on("pre_shutdown",function(){return E._shutdown()}),this._client.on("session_expired",function(){E._shutdown("session_expired")}),!(0,e._isServerEnv)()){var R=(0,e._getStatsigGlobal)();R.srInstances=Object.assign(Object.assign({},R.srInstances),_defineProperty3({},T,this)),R.firstSRInstance||(R.firstSRInstance=this)}this._currentSessionID=this._getSessionIdFromClient(),this._subscribeToVisibilityChanged()}return _createClass3(SessionReplayBase,[{key:"forceStartRecording",value:function(){this._wasStopped=!1,this._attemptToStartRecording(!0)}},{key:"stopRecording",value:function(){this._wasStopped=!0,this._shutdown()}},{key:"startRecording",value:function(){var e;this._wasStopped=!1,this._attemptToStartRecording(null===(e=this._options)||void 0===e?void 0:e.forceRecording)}},{key:"isRecording",value:function(){return this._replayer.isRecording()}},{key:"_logRecording",value:function(l){0!==this._events.length&&(l=(0,e._isUnloading)()?"is_leaving_page":l,this._logRecordingWithSessionID(this._currentSessionID,l))}},{key:"_onVisibilityChanged",value:function(e){var l=this;"background"===e&&(this._logRecording(),this._client.flush().catch(function(e){l._errorBoundary.logError("SR::visibility",e)}))}},{key:"_subscribeToVisibilityChanged",value:function(){var l=this._client.getContext().sdkKey;(0,e._subscribeToVisiblityChanged)(function(_){var S,E,k=null===(E=null===(S=(0,e._getStatsigGlobal)())||void 0===S?void 0:S.srInstances)||void 0===E?void 0:E[l];k instanceof SessionReplayBase&&k._onVisibilityChanged(_)})}},{key:"_logRecordingWithSessionID",value:function(l,S){var E=this._sessionData;if(0!==this._events.length){for(var k=JSON.stringify(this._events),T=(0,_._slicePayload)(k),M=T.length>1?(0,e.getUUID)():null,R=0;R<T.length;R++){var I=T[R],O=(0,_._makeLoggableRrwebEvent)(I,k,l,E,this._client.getContext().sdkInstanceID);null!=M&&(0,_._appendSlicedMetadata)(O.metadata,M,R,T.length,I.length),S&&(O.metadata[S]="true"),this._totalLogs++,this._client.logEvent(O),null!=M&&this._client.flush().catch(function(l){e.Log.error(l)})}this._events=[],this._totalLogs>_.MAX_LOGS&&this._shutdown()}}},{key:"_bumpSessionIdleTimerAndLogRecording",value:function(){this._getSessionIdFromClient(),this._logRecording()}},{key:"_getSessionIdFromClient",value:function(){return this._client.getContext().session.data.sessionID}},{key:"_shutdownImpl",value:function(l){var _=this;if(this._replayer.isRecording()){this._replayer.stop();var _handler=function(){e.StatsigMetadataProvider.add({isRecordingSession:"false"}),_._client.off("logs_flushed",_handler)};this._client.$on("logs_flushed",_handler)}0!==this._events.length?(this._logRecording(l),"session_expired"===l&&(this._currentEventIndex=0,this._sessionData=this._makeEmptySessionData())):"session_expired"===l&&(this._currentEventIndex=0,this._sessionData=this._makeEmptySessionData())}},{key:"_makeEmptySessionData",value:function(){return{startTime:-1,endTime:0,clickCount:0}}},{key:"_onRecordingEvent",value:function(l,S){if(this._currentSessionID===this._getSessionIdFromClient())if(this._totalLogs>=_.MAX_LOGS)this._shutdown();else{l.eventIndex=this._currentEventIndex++,this._sessionData.clickCount+=S.clickCount,this._sessionData.startTime=-1===this._sessionData.startTime?S.startTime:Math.min(this._sessionData.startTime,S.startTime),this._sessionData.endTime=Math.max(this._sessionData.endTime,S.endTime);var E=(0,e._fastApproxSizeOf)(l,_.MAX_INDIVIDUAL_EVENT_BYTES);if(E>_.MAX_INDIVIDUAL_EVENT_BYTES)e.Log.warn("SessionReplay event is too large (~".concat(E," bytes) and will not be logged"),l);else{var k=(0,e._fastApproxSizeOf)(this._events,_.REPLAY_ENQUEUE_TRIGGER_BYTES);this._events.push(l),k+E<_.REPLAY_ENQUEUE_TRIGGER_BYTES||((0,e._isCurrentlyVisible)()?this._bumpSessionIdleTimerAndLogRecording():this._logRecording())}}else this._shutdown("session_expired")}}])}();return Sa.SessionReplayBase=S,Sa}var Ta,Ma,Ra={};O("al",(Ma||(Ma=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.forceStartRecording=e.stopRecording=e.startRecording=e.StatsigTriggeredSessionReplayPlugin=e.StatsigSessionReplayPlugin=e.runStatsigTriggeredSessionReplay=e.runStatsigSessionReplay=e.SessionReplay=e.SessionReplayClient=void 0;var l=requireSrc$3(),_=function(){if(Aa)return ba;Aa=1,Object.defineProperty(ba,"__esModule",{value:!0}),ba.SessionReplay=ba.runStatsigSessionReplay=ba.StatsigSessionReplayPlugin=void 0;var e=requireSrc$3(),l=requireSessionReplayBase(),_=requireSessionReplayUtils(),S=function(){return _createClass3(function StatsigSessionReplayPlugin(e){_classCallCheck3(this,StatsigSessionReplayPlugin),this.options=e,this.__plugin="session-replay"},[{key:"bind",value:function(e){runStatsigSessionReplay(e,this.options)}}])}();function runStatsigSessionReplay(e,l){new E(e,l)}ba.StatsigSessionReplayPlugin=S,ba.runStatsigSessionReplay=runStatsigSessionReplay;var E=function(l){function SessionReplay(e,l){var _,S;return _classCallCheck3(this,SessionReplay),(_=_callSuper(this,SessionReplay,[e,l]))._client.$on("values_updated",function(){var e;_._wasStopped||_._attemptToStartRecording(null===(e=_._options)||void 0===e?void 0:e.forceRecording)}),_._attemptToStartRecording(null===(S=_._options)||void 0===S?void 0:S.forceRecording),_}return _inherits(SessionReplay,l),_createClass3(SessionReplay,[{key:"_shutdown",value:function(e){_superPropGet(SessionReplay,"_shutdownImpl",this,3)([e])}},{key:"_attemptToStartRecording",value:function(){var l,S,E=this,k=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!(this._totalLogs>=_.MAX_LOGS)){var T=this._client.getContext().values;!0===(null==T?void 0:T.recording_blocked)||!k&&!0!==(null==T?void 0:T.can_record_session)||!1===(null==T?void 0:T.passes_session_recording_targeting)?this._shutdown():this._replayer.isRecording()||(this._wasStopped=!1,e.StatsigMetadataProvider.add({isRecordingSession:"true"}),this._replayer.record(function(e,l){return E._onRecordingEvent(e,l)},null!==(S=null===(l=this._options)||void 0===l?void 0:l.rrwebConfig)&&void 0!==S?S:{},function(){E._shutdown()}))}}}])}(l.SessionReplayBase);return ba.SessionReplay=E,ba}();Object.defineProperty(e,"SessionReplay",{enumerable:!0,get:function(){return _.SessionReplay}}),Object.defineProperty(e,"StatsigSessionReplayPlugin",{enumerable:!0,get:function(){return _.StatsigSessionReplayPlugin}}),Object.defineProperty(e,"runStatsigSessionReplay",{enumerable:!0,get:function(){return _.runStatsigSessionReplay}});var S=requireSessionReplayBase();Object.defineProperty(e,"forceStartRecording",{enumerable:!0,get:function(){return S.forceStartRecording}}),Object.defineProperty(e,"startRecording",{enumerable:!0,get:function(){return S.startRecording}}),Object.defineProperty(e,"stopRecording",{enumerable:!0,get:function(){return S.stopRecording}});var E=requireSessionReplayClient();Object.defineProperty(e,"SessionReplayClient",{enumerable:!0,get:function(){return E.SessionReplayClient}});var k=function(){if(Ta)return Ra;Ta=1,Object.defineProperty(Ra,"__esModule",{value:!0}),Ra.TriggeredSessionReplay=Ra.runStatsigTriggeredSessionReplay=Ra.StatsigTriggeredSessionReplayPlugin=void 0;var e=requireSrc$3(),l=requireSessionReplayBase(),_=requireSessionReplayUtils(),S=function(){return _createClass3(function StatsigTriggeredSessionReplayPlugin(e){_classCallCheck3(this,StatsigTriggeredSessionReplayPlugin),this.options=e,this.__plugin="triggered-session-replay"},[{key:"bind",value:function(e){runStatsigTriggeredSessionReplay(e,this.options)}}])}();function runStatsigTriggeredSessionReplay(e,l){new E(e,l)}Ra.StatsigTriggeredSessionReplayPlugin=S,Ra.runStatsigTriggeredSessionReplay=runStatsigTriggeredSessionReplay;var E=function(l){function TriggeredSessionReplay(e,l){var _,S;return _classCallCheck3(this,TriggeredSessionReplay),(_=_callSuper(this,TriggeredSessionReplay,[e,l]))._runningEventData=[],_._isActiveRecording=!1,_._subscribeToClientEvents(l),(null==l?void 0:l.autoStartRecording)?_._attemptToStartRecording(null===(S=_._options)||void 0===S?void 0:S.forceRecording):(null==l?void 0:l.keepRollingWindow)&&_._attemptToStartRollingWindow(),_}return _inherits(TriggeredSessionReplay,l),_createClass3(TriggeredSessionReplay,[{key:"_subscribeToClientEvents",value:function(e){this._subscribeToValuesUpdated(e),this._subscribeToLogEventCalled(),this._subscribeToGateEvaluation(),this._subscribeToExperimentEvaluation()}},{key:"_subscribeToValuesUpdated",value:function(e){var l=this;this._client.$on("values_updated",function(){var _;l._wasStopped||((null==e?void 0:e.autoStartRecording)?l._attemptToStartRecording(null===(_=l._options)||void 0===_?void 0:_.forceRecording):(null==e?void 0:e.keepRollingWindow)&&l._attemptToStartRollingWindow())})}},{key:"_subscribeToLogEventCalled",value:function(){var e=this;this._client.$on("log_event_called",function(l){var _;if(!e._wasStopped){var S=e._client.getContext().values;if(!1!==(null==S?void 0:S.passes_session_recording_targeting)&&null!=(null==S?void 0:S.session_recording_event_triggers)){var E=S.session_recording_event_triggers[l.event.eventName];if(null!=E&&!1!==E.passes_sampling){var k=E.values;null!=k?k.includes(String(null!==(_=l.event.value)&&void 0!==_?_:""))&&e._attemptToStartRecording(!0):e._attemptToStartRecording(!0)}}}})}},{key:"_subscribeToGateEvaluation",value:function(){var e=this;this._client.$on("gate_evaluation",function(l){e._tryStartExposureRecording(l.gate.name,String(l.gate.value))})}},{key:"_subscribeToExperimentEvaluation",value:function(){var e=this;this._client.$on("experiment_evaluation",function(l){var _;e._tryStartExposureRecording(l.experiment.name,null!==(_=l.experiment.groupName)&&void 0!==_?_:"")})}},{key:"_tryStartExposureRecording",value:function(l,_){var S;if(!this._wasStopped){var E=this._client.getContext().values;if(!1!==(null==E?void 0:E.passes_session_recording_targeting)&&null!=(null==E?void 0:E.session_recording_exposure_triggers)){var k=null!==(S=E.session_recording_exposure_triggers[l])&&void 0!==S?S:E.session_recording_exposure_triggers[(0,e._DJB2)(l)];if(null!=k&&!1!==k.passes_sampling){var T=k.values;null!=T?T.includes(_)&&this._attemptToStartRecording(!0):this._attemptToStartRecording(!0)}}}}},{key:"forceStartRecording",value:function(){_superPropGet(TriggeredSessionReplay,"forceStartRecording",this,3)([])}},{key:"stopRecording",value:function(){this._isActiveRecording=!1,this._runningEventData=[],_superPropGet(TriggeredSessionReplay,"stopRecording",this,3)([])}},{key:"_handleStartActiveRecording",value:function(){if(this._isActiveRecording=!0,0!==this._runningEventData.length){for(var l=this._runningEventData.map(function(e){return e.events}).flat(),_=0;_<l.length;_++)l[_].event.eventIndex=_,this._sessionData.clickCount+=l[_].data.clickCount,this._sessionData.startTime=-1===this._sessionData.startTime?l[_].data.startTime:Math.min(this._sessionData.startTime,l[_].data.startTime),this._sessionData.endTime=Math.max(this._sessionData.endTime,l[_].data.endTime);this._events=l.map(function(e){return e.event}),this._currentEventIndex=l.length,(0,e._isCurrentlyVisible)()?this._bumpSessionIdleTimerAndLogRecording():this._logRecording(),this._replayer.stop()}}},{key:"_shutdown",value:function(e){this._isActiveRecording=!1,this._runningEventData=[],_superPropGet(TriggeredSessionReplay,"_shutdownImpl",this,3)([e])}},{key:"_onRecordingEvent",value:function(e,l,_){if(!this._isActiveRecording)return this._currentSessionID!==this._getSessionIdFromClient()?void this._shutdown("session_expired"):void(_&&4===e.type||0===this._runningEventData.length?(this._runningEventData.length>1&&this._runningEventData.shift(),this._runningEventData.push({events:[{event:e,data:l}]})):this._runningEventData[this._runningEventData.length-1].events.push({event:e,data:l}));_superPropGet(TriggeredSessionReplay,"_onRecordingEvent",this,3)([e,l])}},{key:"_attemptToStartRollingWindow",value:function(){var e,l,_=this,S=this._client.getContext().values;!1!==(null==S?void 0:S.passes_session_recording_targeting)?this._replayer.isRecording()||this._replayer.record(function(e,l,S){return _._onRecordingEvent(e,l,S)},null!==(l=null===(e=this._options)||void 0===e?void 0:e.rrwebConfig)&&void 0!==l?l:{},function(){_._shutdown()},!0):this._shutdown()}},{key:"_attemptToStartRecording",value:function(){var l,S,E=this,k=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!(this._totalLogs>=_.MAX_LOGS)){var T=this._client.getContext().values;!0===(null==T?void 0:T.recording_blocked)||!k&&!0!==(null==T?void 0:T.can_record_session)||!1===(null==T?void 0:T.passes_session_recording_targeting)?this._shutdown():(this._handleStartActiveRecording(),this._wasStopped=!1,e.StatsigMetadataProvider.add({isRecordingSession:"true"}),this._replayer.isRecording()||this._replayer.record(function(e,l,_){return E._onRecordingEvent(e,l,_)},null!==(S=null===(l=this._options)||void 0===l?void 0:l.rrwebConfig)&&void 0!==S?S:{},function(){E._shutdown()}))}}}])}(l.SessionReplayBase);return Ra.TriggeredSessionReplay=E,Ra}();Object.defineProperty(e,"StatsigTriggeredSessionReplayPlugin",{enumerable:!0,get:function(){return k.StatsigTriggeredSessionReplayPlugin}}),Object.defineProperty(e,"runStatsigTriggeredSessionReplay",{enumerable:!0,get:function(){return k.runStatsigTriggeredSessionReplay}}),Object.assign((0,l._getStatsigGlobal)(),{SessionReplayClient:E.SessionReplayClient,SessionReplay:_.SessionReplay,runStatsigSessionReplay:_.runStatsigSessionReplay,runStatsigTriggeredSessionReplay:k.runStatsigTriggeredSessionReplay,StatsigSessionReplayPlugin:_.StatsigSessionReplayPlugin,StatsigTriggeredSessionReplayPlugin:k.StatsigTriggeredSessionReplayPlugin,startRecording:S.startRecording,stopRecording:S.stopRecording,forceStartRecording:S.forceStartRecording})}(_a)),_a));var Ia,Pa={},Oa={},Da={};function requireAutoCaptureEvent(){return Ia||(Ia=1,Object.defineProperty(Da,"__esModule",{value:!0}),Da.AutoCaptureEventName=void 0,Da.AutoCaptureEventName={PAGE_VIEW:"auto_capture::page_view",PAGE_VIEW_END:"auto_capture::page_view_end",ERROR:"auto_capture::error",SESSION_START:"auto_capture::session_start",PERFORMANCE:"auto_capture::performance",FORM_SUBMIT:"auto_capture::form_submit",CLICK:"auto_capture::click",RAGE_CLICK:"auto_capture::rage_click",WEB_VITALS:"auto_capture::web_vitals",DEAD_CLICK:"auto_capture::dead_click",COPY:"auto_capture::copy",CONSOLE_LOG:"statsig::log_line"}),Da}var La,Ua={},Fa={};function requireCommonUtils(){return La||(La=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.wrapFunctionWithRestore=e.throttle=e._sanitizeString=e._getAnchorNodeInHierarchy=e._getSafeTimezoneOffset=e._getSafeTimezone=e._getSafeNetworkInformation=e._registerEventHandler=e._getSanitizedPageUrl=e._getSafeUrlString=e._getSafeUrl=e._shouldLogEvent=e._getTargetNode=e._stripEmptyValues=e.interactiveElements=void 0;var l=requireSrc$3(),_=new RegExp("^(?:".concat("(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11})",")$")),S=new RegExp("^(".concat("\\d{3}-?\\d{2}-?\\d{4}",")$"));function _getSafeUrl(){var e,_,S,E,k=null!==(S=null===(_=null===(e=(0,l._getWindowSafe)())||void 0===e?void 0:e.location)||void 0===_?void 0:_.href)&&void 0!==S?S:"";try{E=new URL(k)}catch(oo){E=new URL("error:")}return E}function _getAnchorNodeInHierarchy(e){if(!e)return null;for(var l=e;l;){var _=l.tagName.toLowerCase();if(["body","document"].includes(_))return null;if("a"===l.tagName.toLowerCase())return l;l=l.parentElement}return null}e.interactiveElements=["button","a","input","select","textarea","form","select","label"],e._stripEmptyValues=function(e){return Object.fromEntries(Object.entries(e).filter(function(e){var l=_slicedToArray(e,2),_=(l[0],l[1]);return null!=_&&""!==_&&void 0!==_}))},e._getTargetNode=function(e){if(!e)return null;var l=e.target||e.srcElement;return l&&l instanceof Element?(3===l.nodeType&&(l=l.parentNode||null),l):null},e._shouldLogEvent=function(l,_){var S=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!l||!_||1!==_.nodeType)return!1;var E=_.tagName.toLowerCase(),k=l.type.toLowerCase();if(_.classList.contains("statsig-no-capture"))return!1;if(S)return!0;switch(E){case"html":return!1;case"form":return["submit"].indexOf(k)>=0;case"input":case"select":case"textarea":return["change","click"].indexOf(k)>=0;default:if("click"===k){var T=window.getComputedStyle(_);if(T&&"pointer"===T.getPropertyValue("cursor"))return!0;if(e.interactiveElements.includes(E))return!0;if("true"===_.getAttribute("contenteditable"))return!0;if(_getAnchorNodeInHierarchy(_))return!0}return!1}},e._getSafeUrl=_getSafeUrl,e._getSafeUrlString=function(){var e=_getSafeUrl().toString();return e.startsWith("error:")?"":e},e._getSanitizedPageUrl=function(){return(0,l._getCurrentPageUrlSafe)()||""},e._registerEventHandler=function(e,l,_){e&&e.addEventListener&&e.addEventListener(l,_,!0)},e._getSafeNetworkInformation=function(){var e=(0,l._getWindowSafe)();if(!e||!e.navigator)return null;var _=e.navigator.connection;return _||null},e._getSafeTimezone=function(){try{return Intl.DateTimeFormat().resolvedOptions().timeZone}catch(oo){return null}},e._getSafeTimezoneOffset=function(){try{return(new Date).getTimezoneOffset()}catch(oo){return null}},e._getAnchorNodeInHierarchy=_getAnchorNodeInHierarchy,e._sanitizeString=function(e){return e?e.replace(/<[^>]*>/g,"").trim().split(/(\s+)/).filter(function(e){return function(e){if(_.test((e||"").replace(/[- ]/g,"")))return!1;if(S.test((e||"").replace(/[- ]/g,"")))return!1;return!0}(e)}).join("").replace(/[\r\n]/g," ").replace(/[ ]+/g," ").substring(0,255):null},e.throttle=function(e,l){var _=0;return function(){var S=Date.now();S-_>=l&&(_=S,e.apply(void 0,arguments))}},e.wrapFunctionWithRestore=function(e,l,_){var S=e[l];if("function"!=typeof S)return function(){};try{var E=_(S);return Object.defineProperty(E,"__statsig_original__",{enumerable:!1,value:S}),e[l]=E,function(){e[l]=S}}catch(k){return function(){}}}}(Fa)),Fa}var Na,Ba={};function requireConsoleLogsUtils(){if(Na)return Ba;function _truncateString(e,l){return e.length<=l?e:e.slice(0,l)+"..."}function _isObjectTooDeep(e,l){return l<=0||"object"===_typeof3(e)&&null!==e&&Object.keys(e).some(function(_){return _isObjectTooDeep(e[_],l-1)})}return Na=1,Object.defineProperty(Ba,"__esModule",{value:!0}),Ba._getStackTrace=Ba._safeStringify=void 0,Ba._safeStringify=function(e,l,_,S){try{return function(e,l,_){if(S=e,"[object Object]"===Object.prototype.toString.call(S)){if(Object.keys(e).length>l)return!0;if(_isObjectTooDeep(e,_))return!0}var S;if("function"==typeof e)return!0;return!1}(e,l,_)?function(e,l){return _truncateString(e.toString(),l)}(e,S):"string"==typeof e?_truncateString(e,S):"object"===_typeof3(e)&&null!==e?_truncateString(JSON.stringify(e),S):_truncateString(String(e),S)}catch(E){return _truncateString("[Unserializable]",S)}},Ba._getStackTrace=function(){var e,l;try{return null!==(l=null===(e=(new Error).stack)||void 0===e?void 0:e.split("\n").slice(2))&&void 0!==l?l:[]}catch(_){return[]}},Ba}var za,ja,Ga={};function requireMetadataUtils(){if(za)return Ga;za=1,Object.defineProperty(Ga,"__esModule",{value:!0}),Ga._getPossibleFirstTouchMetadata=Ga._getNetworkInfo=Ga._gatherAllMetadata=Ga._gatherCommonMetadata=void 0;var e=requireSrc$3(),l=requireCommonUtils();function _gatherCommonMetadata(_){var S,E,k,T,M,R,I,O,D=(0,e._getDocumentSafe)(),L=(0,e._getWindowSafe)();return(0,l._stripEmptyValues)(Object.assign({title:null==D?void 0:D.title,current_url:null===(S=null==L?void 0:L.location)||void 0===S?void 0:S.href,user_agent:(null===(E=null==L?void 0:L.navigator)||void 0===E?void 0:E.userAgent)&&(null===(T=null===(k=null==L?void 0:L.navigator)||void 0===k?void 0:k.userAgent)||void 0===T?void 0:T.length)>200?L.navigator.userAgent.substring(0,200):null===(M=null==L?void 0:L.navigator)||void 0===M?void 0:M.userAgent,locale:null===(R=null==L?void 0:L.navigator)||void 0===R?void 0:R.language,hostname:_.hostname,pathname:_.pathname,screen_width:null===(I=null==L?void 0:L.screen)||void 0===I?void 0:I.width,screen_height:null===(O=null==L?void 0:L.screen)||void 0===O?void 0:O.height,viewport_width:null==L?void 0:L.innerWidth,viewport_height:null==L?void 0:L.innerHeight,viewport:"".concat(null==L?void 0:L.innerWidth,"x").concat(null==L?void 0:L.innerHeight),timestamp:Date.now(),timezone:(0,l._getSafeTimezone)(),timezone_offset:(0,l._getSafeTimezoneOffset)()},_getNetworkInfo()))}function _getNetworkInfo(){var e=(0,l._getSafeNetworkInformation)(),_={};return void 0!==(null==e?void 0:e.effectiveType)&&(_.effective_connection_type=e.effectiveType),void 0!==(null==e?void 0:e.rtt)&&(_.rtt_ms=e.rtt),void 0!==(null==e?void 0:e.downlink)&&(_.downlink_mbps=e.downlink,_.downlink_kbps=1e3*e.downlink),void 0!==(null==e?void 0:e.saveData)&&(_.save_data=e.saveData),_}function getReferrerInfo(e){var l=(null==e?void 0:e.referrer)||"";if(!l)return{referrer:null,referrer_domain:null,referrer_path:null,searchEngine:"",searchQuery:""};try{var _=new URL(l),S=_.hostname,E=["google","bing","yahoo","duckduckgo","baidu"].find(function(e){return S.includes(e+".")})||"",k=_.searchParams.get("yahoo"===E?"p":"q")||"";return{referrer:l,referrer_domain:_.hostname,referrer_path:_.pathname,searchEngine:E,searchQuery:k}}catch(oo){return{referrer:null,referrer_domain:null,referrer_path:null,searchEngine:"",searchQuery:""}}}function getCampaignParams(e){var l=e.searchParams,_={};return["utm_source","utm_medium","utm_campaign","utm_term","utm_content","msclkid","dclid","fbclid","gad_source","gclid","gclsrc","wbraid","utm_id","irclid","igshid","_kx","li_fat_id","mc_cid","mc_eid","epik","qclid","rdt_cid","sccid","ttc","ttclid","ttc_id","twclid"].forEach(function(e){var S=l.get(e);S&&(_[e]=S)}),_}return Ga._gatherCommonMetadata=_gatherCommonMetadata,Ga._gatherAllMetadata=function(_){var S=(0,e._getDocumentSafe)(),E=(0,e._getWindowSafe)();if(!S||!E)return{};var k=getReferrerInfo(S),T=_gatherCommonMetadata(_),M=getCampaignParams(_),R={};return _.searchParams.forEach(function(e,l){R[l]=e}),Object.assign(Object.assign({},T),(0,l._stripEmptyValues)(Object.assign(Object.assign(Object.assign({},k),M),R)))},Ga._getNetworkInfo=_getNetworkInfo,Ga._getPossibleFirstTouchMetadata=function(_){var S=(0,e._getDocumentSafe)(),E=(0,e._getWindowSafe)();if(!S||!E)return{};for(var k=getReferrerInfo(S),T=getCampaignParams(_),M=(0,l._stripEmptyValues)(Object.assign(Object.assign({},k),T)),R={},I=0,O=Object.entries(M);I<O.length;I++){var D=_slicedToArray(O[I],2),L=D[0],U=D[1];R["$s_".concat(L)]=U}return R},Ga}var Ha,Va,Wa={},qa={};function requireEventUtils(){if(Ha)return qa;Ha=1,Object.defineProperty(qa,"__esModule",{value:!0}),qa._getMetadataFromElement=qa._gatherCopyEventData=qa._gatherEventData=void 0;var e=requireSrc$3(),l=requireCommonUtils(),_=1e3;function _truncateString(e,l){return e?e.length>l?e.substring(0,l)+"...":e:null}function _getSafeMetadataAttributes(e){var l={};return l.class=(_truncateString(e.getAttribute("class"),_)||"").replace(/\s+/g," ").trim(),l.id=_truncateString(e.getAttribute("id"),_),l.ariaLabel=_truncateString(e.getAttribute("aria-label"),_),l.name=_truncateString(e.getAttribute("name"),_),l}function _getMetadataFromElement(e){var l={},_=_getSafeMetadataAttributes(e);Object.assign(l,_);var S=Array.from(e.classList);return l.classList=S.length>0?S.slice(0,100):null,l.selector=function(e){if(!e)return"";if(!e.parentNode){var l=e.tagName.toLowerCase();if(e.id)return"#".concat(e.id);var _=l;if(e.className&&"string"==typeof e.className){var S=e.className.trim().split(/\s+/);S.length>0&&""!==S[0]&&(_+="."+S.join("."))}return _}var E=[],k=e,T=0;for(;k&&k.nodeType===Node.ELEMENT_NODE&&T<50;){var M=getElementSelector(k);if(E.unshift(M),k.id)break;if((k=k.parentElement)&&"body"===k.tagName.toLowerCase())break;T++}return E.join(" > ")}(e),l}function getElementSelector(e){var l=e.tagName.toLowerCase();if(e.id)return"#".concat(e.id);var _=l;if(e.className&&"string"==typeof e.className){var S=e.className.trim().split(/\s+/);S.length>0&&""!==S[0]&&(_+="."+S.join("."))}var E=e.parentElement;if(E&&E.children.length>1){for(var k=1,T=1,M=e.previousElementSibling;M;)k++,M.tagName===e.tagName&&T++,M=M.previousElementSibling;_+=":nth-child(".concat(k,")"),(T>1||function(e){for(var l=e.nextElementSibling;l;){if(l.tagName===e.tagName)return!0;l=l.nextElementSibling}return!1}(e))&&(_+=":nth-of-type(".concat(T,")"))}return _}return qa._gatherEventData=function(e){var _=(0,l._getSanitizedPageUrl)()||"",S=e.tagName.toLowerCase();if(function(e){return"input"===e.tagName.toLowerCase()&&["button","checkbox","submit","reset"].includes(e.getAttribute("type")||"")||"textarea"===e.tagName.toLowerCase()||"select"===e.tagName.toLowerCase()||"true"===e.getAttribute("contenteditable")}(e))return{value:_,metadata:_getSafeMetadataAttributes(e)};var E={};E.tagName=S;var k=_getMetadataFromElement(e);Object.assign(E,k),"form"===S&&Object.assign(E,function(e){var l,_={};return _.action=e.getAttribute("action"),_.method=null!==(l=e.getAttribute("method"))&&void 0!==l?l:"GET",_.formName=e.getAttribute("name"),_.formId=e.getAttribute("id"),_}(e)),"input"===S&&Object.assign(E,function(e){var l={};return l.content=e.value,l.inputName=e.getAttribute("name"),l}(e));var T=(0,l._getAnchorNodeInHierarchy)(e);return T&&Object.assign(E,function(e){var l={};return l.href=e.getAttribute("href"),l}(T)),("button"===S||T)&&Object.assign(E,function(e){var l={};l.content=(e.textContent||"").trim();var _=function(e){var l={};if(!e)return l;var _=null==e?void 0:e.dataset;if(!_)return l;for(var S in _)l["data-".concat(S)]=_[S]||"";return l}(e);return Object.assign(l,_),l}(T||e)),function(e){var _;if(Array.isArray(e.classList)&&(null===(_=e.classList)||void 0===_?void 0:_.includes("statsig-ctr-capture")))return!0;var S=e.href;if(S)try{var E=(0,l._getSafeUrl)(),k=new URL(S);return E.host!==k.host}catch(T){return!1}return!1}(E)&&(E.isOutbound="true"),{value:_,metadata:E}},qa._gatherCopyEventData=function(_){var S,E,k=null===(E=null===(S=(0,e._getWindowSafe)())||void 0===S?void 0:S.getSelection())||void 0===E?void 0:E.toString(),T={};T.selectedText=(0,l._sanitizeString)(k);var M=_.type||"clipboard";return T.clipType=M,T},qa._getMetadataFromElement=_getMetadataFromElement,qa}var Xa,Ka={};var Ya,Ja={};var Qa,Za,$a,eo,to={},no={exports:{}};function requireWebVitals_umd(){return Qa||(Qa=1,function(e,l){!function(e){var l=-1,n=function(e){addEventListener("pageshow",function(_){_.persisted&&(l=_.timeStamp,e(_))},!0)},i=function(e,l,_,S){var E,k;return function(T){l.value>=0&&(T||S)&&((k=l.value-(null!=E?E:0))||void 0===E)&&(E=l.value,l.delta=k,l.rating=function(e,l){return e>l[1]?"poor":e>l[0]?"needs-improvement":"good"}(l.value,_),e(l))}},o=function(e){requestAnimationFrame(function(){return requestAnimationFrame(function(){return e()})})},s=function(){var e=performance.getEntriesByType("navigation")[0];if(e&&e.responseStart>0&&e.responseStart<performance.now())return e},r=function(){var e,l=s();return null!==(e=null==l?void 0:l.activationStart)&&void 0!==e?e:0},c=function(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,S=s(),E="navigate";return l>=0?E="back-forward-cache":S&&(document.prerendering||r()>0?E="prerender":document.wasDiscarded?E="restore":S.type&&(E=S.type.replace(/_/g,"-"))),{name:e,value:_,rating:"good",delta:0,entries:[],id:"v5-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:E}},_=new WeakMap;function d(e,l){return _.get(e)||_.set(e,new l),_.get(e)}var S,E=function(){function h(){_classCallCheck3(this,h),_defineProperty3(this,"t",void 0),_defineProperty3(this,"i",0),_defineProperty3(this,"o",[])}return _createClass3(h,[{key:"h",value:function(e){var l;if(!e.hadRecentInput){var _=this.o[0],S=this.o.at(-1);this.i&&_&&S&&e.startTime-S.startTime<1e3&&e.startTime-_.startTime<5e3?(this.i+=e.value,this.o.push(e)):(this.i=e.value,this.o=[e]),null===(l=this.t)||void 0===l||l.call(this,e)}}}])}(),f=function(e,l){var _=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var S=new PerformanceObserver(function(e){Promise.resolve().then(function(){l(e.getEntries())})});return S.observe(_objectSpread2({type:e,buffered:!0},_)),S}}catch(E){}},u=function(e){var l=!1;return function(){l||(e(),l=!0)}},k=-1,m=function(){return"hidden"!==document.visibilityState||document.prerendering?1/0:0},p=function(e){"hidden"===document.visibilityState&&k>-1&&(k="visibilitychange"===e.type?e.timeStamp:0,v())},g=function(){addEventListener("visibilitychange",p,!0),addEventListener("prerenderingchange",p,!0)},v=function(){removeEventListener("visibilitychange",p,!0),removeEventListener("prerenderingchange",p,!0)},y=function(){if(k<0){var e,l=r(),_=document.prerendering||null===(e=globalThis.performance.getEntriesByType("visibility-state").filter(function(e){return"hidden"===e.name&&e.startTime>l})[0])||void 0===e?void 0:e.startTime;k=null!=_?_:m(),g(),n(function(){setTimeout(function(){k=m(),g()})})}return{get firstHiddenTime(){return k}}},b=function(e){document.prerendering?addEventListener("prerenderingchange",function(){return e()},!0):e()},T=[1800,3e3],P=function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};b(function(){var _,S=y(),E=c("FCP"),k=f("paint",function(e){var l,T=_createForOfIteratorHelper2(e);try{for(T.s();!(l=T.n()).done;){var M=l.value;"first-contentful-paint"===M.name&&(k.disconnect(),M.startTime<S.firstHiddenTime&&(E.value=Math.max(M.startTime-r(),0),E.entries.push(M),_(!0)))}}catch(R){T.e(R)}finally{T.f()}});k&&(_=i(e,E,T,l.reportAllChanges),n(function(S){E=c("FCP"),_=i(e,E,T,l.reportAllChanges),o(function(){E.value=performance.now()-S.timeStamp,_(!0)})}))})},M=[.1,.25],R=0,I=1/0,O=0,C=function(e){var l,_=_createForOfIteratorHelper2(e);try{for(_.s();!(l=_.n()).done;){var S=l.value;S.interactionId&&(I=Math.min(I,S.interactionId),O=Math.max(O,S.interactionId),R=O?(O-I)/7+1:0)}}catch(E){_.e(E)}finally{_.f()}},w=function(){var e;return S?R:null!==(e=performance.interactionCount)&&void 0!==e?e:0},F=function(){"interactionCount"in performance||S||(S=f("event",C,{type:"event",buffered:!0,durationThreshold:0}))},D=0,L=function(){function x(){_classCallCheck3(this,x),_defineProperty3(this,"u",[]),_defineProperty3(this,"l",new Map),_defineProperty3(this,"m",void 0),_defineProperty3(this,"p",void 0)}return _createClass3(x,[{key:"v",value:function(){D=w(),this.u.length=0,this.l.clear()}},{key:"T",value:function(){var e=Math.min(this.u.length-1,Math.floor((w()-D)/50));return this.u[e]}},{key:"h",value:function(e){var l;if(null!==(l=this.m)&&void 0!==l&&l.call(this,e),e.interactionId||"first-input"===e.entryType){var _=this.u.at(-1),S=this.l.get(e.interactionId);if(S||this.u.length<10||e.duration>_.P){var E;if(S?e.duration>S.P?(S.entries=[e],S.P=e.duration):e.duration===S.P&&e.startTime===S.entries[0].startTime&&S.entries.push(e):(S={id:e.interactionId,entries:[e],P:e.duration},this.l.set(S.id,S),this.u.push(S)),this.u.sort(function(e,l){return l.P-e.P}),this.u.length>10){var k,T=_createForOfIteratorHelper2(this.u.splice(10));try{for(T.s();!(k=T.n()).done;){var M=k.value;this.l.delete(M.id)}}catch(R){T.e(R)}finally{T.f()}}null===(E=this.p)||void 0===E||E.call(this,S)}}}}])}(),A=function(e){var l=globalThis.requestIdleCallback||setTimeout;"hidden"===document.visibilityState?e():(e=u(e),document.addEventListener("visibilitychange",e,{once:!0}),l(function(){e(),document.removeEventListener("visibilitychange",e)}))},U=[200,500],B=function(){function N(){_classCallCheck3(this,N),_defineProperty3(this,"m",void 0)}return _createClass3(N,[{key:"h",value:function(e){var l;null===(l=this.m)||void 0===l||l.call(this,e)}}])}(),z=[2500,4e3],j=[800,1800],_O=function(e){document.prerendering?b(function(){return _O(e)}):"complete"!==document.readyState?addEventListener("load",function(){return _O(e)},!0):setTimeout(e)};e.CLSThresholds=M,e.FCPThresholds=T,e.INPThresholds=U,e.LCPThresholds=z,e.TTFBThresholds=j,e.onCLS=function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};P(u(function(){var _,S=c("CLS",0),k=d(l,E),u=function(e){var l,E=_createForOfIteratorHelper2(e);try{for(E.s();!(l=E.n()).done;){var T=l.value;k.h(T)}}catch(M){E.e(M)}finally{E.f()}k.i>S.value&&(S.value=k.i,S.entries=k.o,_())},T=f("layout-shift",u);T&&(_=i(e,S,M,l.reportAllChanges),document.addEventListener("visibilitychange",function(){"hidden"===document.visibilityState&&(u(T.takeRecords()),_(!0))}),n(function(){k.i=0,S=c("CLS",0),_=i(e,S,M,l.reportAllChanges),o(function(){return _()})}),setTimeout(_))}))},e.onFCP=P,e.onINP=function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};globalThis.PerformanceEventTiming&&"interactionId"in PerformanceEventTiming.prototype&&b(function(){var _;F();var S,E=c("INP"),k=d(l,L),a=function(e){A(function(){var l,_=_createForOfIteratorHelper2(e);try{for(_.s();!(l=_.n()).done;){var T=l.value;k.h(T)}}catch(R){_.e(R)}finally{_.f()}var M=k.T();M&&M.P!==E.value&&(E.value=M.P,E.entries=M.entries,S())})},T=f("event",a,{durationThreshold:null!==(_=l.durationThreshold)&&void 0!==_?_:40});S=i(e,E,U,l.reportAllChanges),T&&(T.observe({type:"first-input",buffered:!0}),document.addEventListener("visibilitychange",function(){"hidden"===document.visibilityState&&(a(T.takeRecords()),S(!0))}),n(function(){k.v(),E=c("INP"),S=i(e,E,U,l.reportAllChanges)}))})},e.onLCP=function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};b(function(){var _,S=y(),E=c("LCP"),k=d(l,B),m=function(e){l.reportAllChanges||(e=e.slice(-1));var T,M=_createForOfIteratorHelper2(e);try{for(M.s();!(T=M.n()).done;){var R=T.value;k.h(R),R.startTime<S.firstHiddenTime&&(E.value=Math.max(R.startTime-r(),0),E.entries=[R],_())}}catch(I){M.e(I)}finally{M.f()}},T=f("largest-contentful-paint",m);if(T){_=i(e,E,z,l.reportAllChanges);for(var M=u(function(){m(T.takeRecords()),T.disconnect(),_(!0)}),R=0,I=["keydown","click","visibilitychange"];R<I.length;R++){var O=I[R];addEventListener(O,function(){return A(M)},{capture:!0,once:!0})}n(function(S){E=c("LCP"),_=i(e,E,z,l.reportAllChanges),o(function(){E.value=performance.now()-S.timeStamp,_(!0)})})}})},e.onTTFB=function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_=c("TTFB"),S=i(e,_,j,l.reportAllChanges);_O(function(){var E=s();E&&(_.value=Math.max(E.responseStart-r(),0),_.entries=[E],S(!0),n(function(){_=c("TTFB",0),(S=i(e,_,j,l.reportAllChanges))(!0)}))})}}(l)}(0,no.exports)),no.exports}function requireAutoCapture(){if($a)return Oa;$a=1,Object.defineProperty(Oa,"__esModule",{value:!0}),Oa.AutoCapture=Oa.runStatsigAutoCapture=Oa.StatsigAutoCapturePlugin=void 0;var e=requireSrc$3(),l=requireAutoCaptureEvent(),_=function(){if(ja)return Ua;ja=1,Object.defineProperty(Ua,"__esModule",{value:!0}),Ua.ConsoleLogManager=void 0;var e=requireSrc$3(),l=requireAutoCaptureEvent(),_=requireCommonUtils(),S=requireConsoleLogsUtils(),E=requireMetadataUtils(),k={trace:10,debug:20,log:30,info:30,warn:40,error:50},T=function(){return _createClass3(function ConsoleLogManager(e,l,_){var S,E,k,T;_classCallCheck3(this,ConsoleLogManager),this._enqueueFn=e,this._errorBoundary=l,this._options=_,this._restoreFns=[],this._isTracking=!1,this._logLevel="info",this.__source="js-auto-capture",this._logLevel=null!==(S=this._options.logLevel)&&void 0!==S?S:"info",this._maxKeys=null!==(E=this._options.maxKeys)&&void 0!==E?E:10,this._maxDepth=null!==(k=this._options.maxDepth)&&void 0!==k?k:10,this._maxStringLength=null!==(T=this._options.maxStringLength)&&void 0!==T?T:500},[{key:"startTracking",value:function(){try{if(this._isTracking||!this._options.enabled)return;if(!(0,e._getWindowSafe)())return;this._patchConsole(),this._isTracking=!0}catch(l){e.Log.error("Error starting console log tracking",l),this._errorBoundary.logError("autoCapture:ConsoleLogManager",l)}}},{key:"stopTracking",value:function(){this._isTracking&&(this._restoreFns.forEach(function(e){return e()}),this._restoreFns=[],this._isTracking=!1)}},{key:"_patchConsole",value:function(){var e=this;Object.entries(k).forEach(function(l){var E=_slicedToArray(l,2),T=E[0];if(!(E[1]<k[e._logLevel])&&console[T]){var M=function(){}.bind(),R=!1,I=(0,_.wrapFunctionWithRestore)(console,T,function(l){return function(){for(var _=arguments.length,E=new Array(_),k=0;k<_;k++)E[k]=arguments[k];if(l.apply(void 0,E),!R){R=!0;try{var I=E.map(function(l){return(0,S._safeStringify)(l,e._maxKeys,e._maxDepth,e._maxStringLength)}),O=(0,S._getStackTrace)();e._enqueueConsoleLog(T,I,O)}catch(D){M.apply(void 0,["console observer error:",D].concat(E)),e._errorBoundary.logError("autoCapture:ConsoleLogManager",D)}finally{R=!1}}}});e._restoreFns.push(I)}})}},{key:"_enqueueConsoleLog",value:function(e,S,k){if(this._shouldLog()){var T=Object.assign({status:"log"===e?"info":e,log_level:e,payload:S,trace:k,timestamp:Date.now(),source:this.__source},(0,E._gatherAllMetadata)((0,_._getSafeUrl)()));this._enqueueFn(l.AutoCaptureEventName.CONSOLE_LOG,S.join(" "),T)}}},{key:"_shouldLog",value:function(){return!this._options.sampleRate||"number"!=typeof this._options.sampleRate||this._options.sampleRate<=0||this._options.sampleRate>=1||Math.random()<this._options.sampleRate}}])}();return Ua.ConsoleLogManager=T,Ua}(),S=(Va||(Va=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DeadClickConfig=void 0;var l=requireSrc$3(),_=requireAutoCaptureEvent(),S=requireCommonUtils(),E=requireEventUtils(),k=requireMetadataUtils();e.DeadClickConfig={CLICK_CHECK_TIMEOUT:1e3,SCROLL_DELAY_MS:100,SELECTION_CHANGE_DELAY_MS:100,MUTATION_DELAY_MS:2500,ABSOLUTE_DEAD_CLICK_TIMEOUT:2750};var T=function(){return _createClass3(function DeadClickManager(l,_){var E=this;_classCallCheck3(this,DeadClickManager),this._enqueueFn=l,this._errorBoundary=_,this._lastMutationTime=0,this._lastSelectionChangeTime=0,this._clicks=[],this._deadClickConfig=e.DeadClickConfig,this._handleScroll=(0,S.throttle)(function(){var e=Date.now();E._clicks.forEach(function(l){l.scrollDelayMs||(l.scrollDelayMs=e-l.timestamp)})},50)},[{key:"startTracking",value:function(){var e=this;try{var _=(0,l._getWindowSafe)();if(!_)return;_.addEventListener("click",function(l){return e._handleClick(l)},{capture:!0}),_.addEventListener("scroll",function(){return e._handleScroll()},{capture:!0,passive:!0}),_.addEventListener("selectionchange",function(){return e._handleSelectionChange()}),this._setupMutationObserver()}catch(S){l.Log.error("Error starting dead click tracking",S),this._errorBoundary.logError("autoCapture:DeadClickManager",S)}}},{key:"_handleClick",value:function(e){var _,E,k=this,T=e.target;if(T){var M={timestamp:Date.now(),eventTarget:T};S.interactiveElements.includes(null===(_=null==T?void 0:T.tagName)||void 0===_?void 0:_.toLowerCase())||this._clicks.push(M),this._clicks.length&&!this._clickCheckTimer&&(this._clickCheckTimer=null===(E=(0,l._getWindowSafe)())||void 0===E?void 0:E.setTimeout(function(){k._checkForDeadClick()},this._deadClickConfig.CLICK_CHECK_TIMEOUT))}}},{key:"_handleSelectionChange",value:function(){this._lastSelectionChangeTime=Date.now()}},{key:"_setupMutationObserver",value:function(){var e=this,_=(0,l._getDocumentSafe)();_&&(this._observer=new MutationObserver(function(){e._lastMutationTime=Date.now()}),this._observer.observe(_.body,{childList:!0,subtree:!0,attributes:!0,characterData:!0}))}},{key:"_checkForDeadClick",value:function(){var e,_=this;if(this._clicks.length){clearTimeout(this._clickCheckTimer),this._clickCheckTimer=void 0;var S=this._clicks;this._clicks=[];var E,k=_createForOfIteratorHelper2(S);try{for(k.s();!(E=k.n()).done;){var T=E.value;this._updateClickDelayMs(T);var M=null!=T.scrollDelayMs&&T.scrollDelayMs<this._deadClickConfig.SCROLL_DELAY_MS,R=null!=T.selectionChangeDelayMs&&T.selectionChangeDelayMs<this._deadClickConfig.SELECTION_CHANGE_DELAY_MS,I=null!=T.mutationDelayMs&&T.mutationDelayMs<this._deadClickConfig.MUTATION_DELAY_MS;if(!(M||R||I)){var O=null!=T.scrollDelayMs&&T.scrollDelayMs>this._deadClickConfig.SCROLL_DELAY_MS,D=null!=T.selectionChangeDelayMs&&T.selectionChangeDelayMs>this._deadClickConfig.SELECTION_CHANGE_DELAY_MS,L=null!=T.mutationDelayMs&&T.mutationDelayMs>this._deadClickConfig.MUTATION_DELAY_MS,U=null!=T.absoluteDelayMs&&T.absoluteDelayMs>this._deadClickConfig.ABSOLUTE_DEAD_CLICK_TIMEOUT;O||D||L||U?this._logDeadClick(T,{scrollTimeout:O,selectionChangeTimeout:D,mutationTimeout:L,absoluteTimeout:U}):null!=T.absoluteDelayMs&&T.absoluteDelayMs<this._deadClickConfig.ABSOLUTE_DEAD_CLICK_TIMEOUT&&this._clicks.push(T)}}}catch(B){k.e(B)}finally{k.f()}this._clicks.length&&!this._clickCheckTimer&&(this._clickCheckTimer=null===(e=(0,l._getWindowSafe)())||void 0===e?void 0:e.setTimeout(function(){_._checkForDeadClick()},this._deadClickConfig.CLICK_CHECK_TIMEOUT))}}},{key:"_logDeadClick",value:function(e,l){var T=(0,E._gatherEventData)(e.eventTarget),M=T.value,R=T.metadata;M&&this._enqueueFn(_.AutoCaptureEventName.DEAD_CLICK,M,Object.assign(Object.assign(Object.assign(Object.assign({},R),l),(0,k._gatherCommonMetadata)((0,S._getSafeUrl)())),{scrollDelayMs:e.scrollDelayMs,selectionChangeDelayMs:e.selectionChangeDelayMs,mutationDelayMs:e.mutationDelayMs,absoluteDelayMs:e.absoluteDelayMs}))}},{key:"_updateClickDelayMs",value:function(e){!e.mutationDelayMs&&this._lastMutationTime>0&&e.timestamp<=this._lastMutationTime&&(e.mutationDelayMs=Date.now()-this._lastMutationTime),!e.selectionChangeDelayMs&&this._lastSelectionChangeTime>0&&e.timestamp<=this._lastSelectionChangeTime&&(e.selectionChangeDelayMs=Date.now()-this._lastSelectionChangeTime),e.absoluteDelayMs=Date.now()-e.timestamp}}])}();e.default=T}(Wa)),Wa),E=function(){if(Xa)return Ka;Xa=1,Object.defineProperty(Ka,"__esModule",{value:!0}),Ka.EngagementManager=void 0;var e=requireSrc$3(),l=function(){return _createClass3(function EngagementManager(){_classCallCheck3(this,EngagementManager),this._lastScrollY=0,this._maxScrollY=0,this._lastScrollPercentage=0,this._maxScrollPercentage=0,this._lastPageViewTime=Date.now(),this._inactiveTimer=null,this._onInactivityCallback=null,this._meaningfulEngagementOccurred=!1,this._initializeScrollTracking()},[{key:"_initializeScrollTracking",value:function(){var l=this,_=(0,e._getWindowSafe)();_&&(_.addEventListener("scroll",function(){return l._handleScroll()}),_.addEventListener("scrollend",function(){return l._handleScroll()}),_.addEventListener("resize",function(){return l._handleScroll()}))}},{key:"_handleScroll",value:function(){var l=(0,e._getWindowSafe)(),_=(0,e._getDocumentSafe)();if(l&&_){var S=_.body.scrollHeight,E=l.scrollY||_.documentElement.scrollTop||0,k=l.innerHeight;this._lastScrollY=E,this._maxScrollY=Math.max(this._maxScrollY,E);var T=Math.min(100,Math.round((E+k)/S*100));this._lastScrollPercentage=T,this._maxScrollPercentage=Math.max(this._maxScrollPercentage,T),this.bumpInactiveTimer()}}},{key:"getScrollMetrics",value:function(){return{lastScrollY:this._lastScrollY,maxScrollY:this._maxScrollY,lastScrollPercentage:this._lastScrollPercentage,maxScrollPercentage:this._maxScrollPercentage,scrollDepth:this._maxScrollPercentage}}},{key:"getPageViewLength",value:function(){return Date.now()-this._lastPageViewTime}},{key:"setLastPageViewTime",value:function(e){this._lastPageViewTime=e}},{key:"startInactivityTracking",value:function(e){this._onInactivityCallback=e}},{key:"bumpInactiveTimer",value:function(){var l=this,_=(0,e._getWindowSafe)();_&&(this._inactiveTimer&&clearTimeout(this._inactiveTimer),this._inactiveTimer=_.setTimeout(function(){l._onInactivityCallback&&l._onInactivityCallback()},6e5))}},{key:"setMeaningfulEngagementOccurred",value:function(e){this._meaningfulEngagementOccurred=e}},{key:"getPageViewEndMetadata",value:function(){var e=Object.assign(Object.assign({},this.getScrollMetrics()),{pageViewLength:this.getPageViewLength(),meaningfulEngagementOccurred:this._meaningfulEngagementOccurred});return this.setMeaningfulEngagementOccurred(!1),e}}])}();return Ka.EngagementManager=l,Ka}(),k=function(){if(Ya)return Ja;Ya=1,Object.defineProperty(Ja,"__esModule",{value:!0});var e=function(){return _createClass3(function RageClickManager(){_classCallCheck3(this,RageClickManager),this._clicks=[]},[{key:"isRageClick",value:function(e,l,_){var S,E,k;return this._clicks=this._clicks.filter(function(e){return _-e.timestamp<1e3}),this._clicks.length>0&&(E=e-(S=this._clicks[this._clicks.length-1]).x,k=l-S.y,!(Math.abs(E)+Math.abs(k)<=30))&&(this._clicks=[]),this._clicks.push({x:e,y:l,timestamp:_}),this._clicks.length>=3}}])}();return Ja.default=e,Ja}(),T=function(){if(Za)return to;Za=1,Object.defineProperty(to,"__esModule",{value:!0}),to.WebVitalsManager=void 0;var e=requireWebVitals_umd(),l=requireSrc$3(),_=requireAutoCaptureEvent(),S=requireCommonUtils(),E=["CLS","FCP","INP","LCP","TTFB"],k=function(){return _createClass3(function WebVitalsManager(e,l){_classCallCheck3(this,WebVitalsManager),this._enqueueFn=e,this._errorBoundary=l,this._isInitialized=!1,this._metricEvent={url:(0,S._getSafeUrlString)(),sanitizedUrl:(0,S._getSanitizedPageUrl)(),metrics:[],firstMetricTimestamp:void 0}},[{key:"startTracking",value:function(){var _,S,E=this;try{if(this._isInitialized)return;var k=null===(S=null===(_=(0,l._getWindowSafe)())||void 0===_?void 0:_.location)||void 0===S?void 0:S.protocol;if("https:"!==k&&"http:"!==k)return;(0,e.onCLS)(function(e){return E._handleMetric(e)}),(0,e.onFCP)(function(e){return E._handleMetric(e)}),(0,e.onINP)(function(e){return E._handleMetric(e)}),(0,e.onLCP)(function(e){return E._handleMetric(e)}),(0,e.onTTFB)(function(e){return E._handleMetric(e)}),this._isInitialized=!0}catch(T){l.Log.error("Error starting web vitals tracking",T),this._errorBoundary.logError("autoCapture:WebVitalsManager",T)}}},{key:"_handleMetric",value:function(e){if(void 0===this._metricEvent.firstMetricTimestamp&&(this._metricEvent.firstMetricTimestamp=Date.now()),void 0!==e&&void 0!==(null==e?void 0:e.name)){var l=(0,S._getSafeUrlString)();if(""!==l&&E.includes(e.name)){l!==this._metricEvent.url&&(this._enqueueWebVitalsAutoCaptureEvent(),this._metricEvent.url=l);var _=e;this._metricEvent.metrics.push({name:_.name,value:_.value,delta:_.delta,id:_.id}),this._metricEvent.metrics.length===E.length&&this._enqueueWebVitalsAutoCaptureEvent()}}}},{key:"_enqueueWebVitalsAutoCaptureEvent",value:function(){if(""!==this._metricEvent.url&&0!==this._metricEvent.metrics.length){var e={};this._metricEvent.metrics.forEach(function(l){var _=l.name.toLowerCase();e["".concat(_,"_value")]=l.value,e["".concat(_,"_delta")]=l.delta,e["".concat(_,"_id")]=l.id}),this._enqueueFn(_.AutoCaptureEventName.WEB_VITALS,this._metricEvent.sanitizedUrl,Object.assign(Object.assign({},e),{first_metric_timestamp:this._metricEvent.firstMetricTimestamp})),this._metricEvent={url:(0,S._getSafeUrlString)(),sanitizedUrl:(0,S._getSanitizedPageUrl)(),metrics:[],firstMetricTimestamp:void 0}}}}])}();return to.WebVitalsManager=k,to}(),M=requireCommonUtils(),R=requireEventUtils(),I=requireMetadataUtils(),O={submit:l.AutoCaptureEventName.FORM_SUBMIT,click:l.AutoCaptureEventName.CLICK,copy:l.AutoCaptureEventName.COPY,cut:l.AutoCaptureEventName.COPY},D=function(){return _createClass3(function StatsigAutoCapturePlugin(e){_classCallCheck3(this,StatsigAutoCapturePlugin),this._options=e,this.__plugin="auto-capture"},[{key:"bind",value:function(e){runStatsigAutoCapture(e,this._options)}}])}();function runStatsigAutoCapture(l,_){var S,E=l.getContext().sdkKey;if(!(0,e._isServerEnv)()){var k=null!==(S=(0,e._getStatsigGlobal)().acInstances)&&void 0!==S?S:{};if(k[E])return k[E]}return new L(l,_)}Oa.StatsigAutoCapturePlugin=D,Oa.runStatsigAutoCapture=runStatsigAutoCapture;var L=function(){return _createClass3(function AutoCapture(l,M){var R,I,O,D,L=this;_classCallCheck3(this,AutoCapture),this._client=l,this._disabledEvents={},this._previousLoggedPageViewUrl=null,this._hasLoggedPageViewEnd=!1,this._pageViewLogged=!1;var U=l.getContext(),B=U.sdkKey,z=U.errorBoundary,j=U.values;this._options=M,this._disabledEvents=null!==(I=null===(R=null==j?void 0:j.auto_capture_settings)||void 0===R?void 0:R.disabled_events)&&void 0!==I?I:{},this._errorBoundary=z,this._errorBoundary.wrap(this,"autoCapture:"),this._client.$on("values_updated",function(){var e,l,_=L._client.getContext().values;L._disabledEvents=null!==(l=null===(e=null==_?void 0:_.auto_capture_settings)||void 0===e?void 0:e.disabled_events)&&void 0!==l?l:L._disabledEvents}),this._engagementManager=new E.EngagementManager,this._rageClickManager=new k.default,this._webVitalsManager=new T.WebVitalsManager(this._enqueueAutoCapture.bind(this),z),this._deadClickManager=new S.default(this._enqueueAutoCapture.bind(this),z),this._consoleLogManager=new _.ConsoleLogManager(this._enqueueAutoCapture.bind(this),z,null!==(O=null==M?void 0:M.consoleLogAutoCaptureSettings)&&void 0!==O?O:{enabled:!1}),this._eventFilterFunc=null==M?void 0:M.eventFilterFunc;var G=(0,e._getDocumentSafe)();if(!(0,e._isServerEnv)()){__STATSIG__=(0,e._getStatsigGlobal)();var H=null!==(D=__STATSIG__.acInstances)&&void 0!==D?D:{};H[B]=this,__STATSIG__.acInstances=H}"loading"!==(null==G?void 0:G.readyState)?this._initialize():G.addEventListener("DOMContentLoaded",function(){return L._initialize()})},[{key:"_addEventHandlers",value:function(){var l=this,_=(0,e._getWindowSafe)(),S=(0,e._getDocumentSafe)();if(_&&S){var eventHandler=function(_){var S,E=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],k=_||(null===(S=(0,e._getWindowSafe)())||void 0===S?void 0:S.event);(l._autoLogEvent(k),E&&l._engagementManager.bumpInactiveTimer(),"click"===k.type&&k instanceof MouseEvent)&&(l._rageClickManager.isRageClick(k.clientX,k.clientY,Date.now())&&l._logRageClick(k))};(0,M._registerEventHandler)(S,"click",function(e){return eventHandler(e)}),(0,M._registerEventHandler)(S,"submit",function(e){return eventHandler(e)}),(0,M._registerEventHandler)(S,"copy",function(e){return eventHandler(e)}),(0,M._registerEventHandler)(S,"cut",function(e){return eventHandler(e)}),(0,M._registerEventHandler)(_,"error",function(e){return eventHandler(e,!1)}),(0,M._registerEventHandler)(_,"pagehide",function(){return l._tryLogPageViewEnd()}),(0,M._registerEventHandler)(_,"beforeunload",function(){return l._tryLogPageViewEnd()})}}},{key:"_addPageViewTracking",value:function(){var l=this,_=(0,e._getWindowSafe)(),S=(0,e._getDocumentSafe)();_&&S&&((0,M._registerEventHandler)(_,"popstate",function(){return l._tryLogPageView("popstate")}),window.history.pushState=new Proxy(window.history.pushState,{apply:function(e,_,S){var E=_slicedToArray(S,3),k=E[0],T=E[1],M=E[2];e.apply(_,[k,T,M]),l._tryLogPageView("pushstate")}}),window.history.replaceState=new Proxy(window.history.replaceState,{apply:function(e,_,S){var E=_slicedToArray(S,3),k=E[0],T=E[1],M=E[2];e.apply(_,[k,T,M]),l._tryLogPageView("replacestate")}}),this._tryLogPageView())}},{key:"_autoLogEvent",value:function(_){var S,E,k,T,D=null===(S=_.type)||void 0===S?void 0:S.toLowerCase();if("error"===D&&_ instanceof ErrorEvent)this._logError(_);else{var L=(0,M._getTargetNode)(_);if(L){var U=O[D];if(U){var B=U===l.AutoCaptureEventName.COPY;if((0,M._shouldLogEvent)(_,L,B)){var z={};if(B){var j=null===(k=null===(E=(0,e._getWindowSafe)())||void 0===E?void 0:E.getSelection())||void 0===k?void 0:k.toString();if(!j)return;(null===(T=this._options)||void 0===T?void 0:T.captureCopyText)&&(z.selectedText=(0,M._sanitizeString)(j));var G=_.type||"clipboard";z.clipType=G}var H=(0,R._gatherEventData)(L),V=H.value,W=H.metadata;W.isOutbound&&this._engagementManager.setMeaningfulEngagementOccurred(!0),Object.assign(z,W);var q=(0,I._gatherAllMetadata)((0,M._getSafeUrl)());this._enqueueAutoCapture(U,V,Object.assign(Object.assign({},q),z))}}}}}},{key:"_initialize",value:function(){var e=this;this._webVitalsManager.startTracking(),this._deadClickManager.startTracking(),this._consoleLogManager.startTracking(),this._engagementManager.startInactivityTracking(function(){return e._tryLogPageViewEnd(!0)}),this._addEventHandlers(),this._addPageViewTracking(),this._logSessionStart(),this._logPerformance()}},{key:"_logError",value:function(e){var _=(null==e?void 0:e.error)||{},S=_;if("object"===_typeof3(_))try{S=JSON.stringify(_)}catch(oo){S="function"==typeof(null==_?void 0:_.toString)?_.toString():"Unknown Error"}this._enqueueAutoCapture(l.AutoCaptureEventName.ERROR,e.message,{message:e.message,filename:e.filename,lineno:e.lineno,colno:e.colno,error_str:S})}},{key:"_logSessionStart",value:function(){var e=this._getSessionFromClient();try{if(!this._isNewSession(e))return;this._enqueueAutoCapture(l.AutoCaptureEventName.SESSION_START,(0,M._getSanitizedPageUrl)(),Object.assign({sessionID:e.data.sessionID},(0,I._gatherAllMetadata)((0,M._getSafeUrl)())),{flushImmediately:!0})}catch(_){this._errorBoundary.logError("AC::logSession",_)}}},{key:"_tryLogPageView",value:function(e){var _=(0,M._getSafeUrl)(),S=this._previousLoggedPageViewUrl;if(!S||_.pathname!==S.pathname){this._engagementManager.setLastPageViewTime(Date.now()),this._hasLoggedPageViewEnd=!1;var E=(0,I._gatherAllMetadata)(_);e&&(E.navigation_type=e),this._previousLoggedPageViewUrl&&(E.last_page_view_url=this._previousLoggedPageViewUrl.href),this._pageViewLogged||(this._updateClientWithPossibleFirstTouchMetadata(),this._pageViewLogged=!0),this._enqueueAutoCapture(l.AutoCaptureEventName.PAGE_VIEW,(0,M._getSanitizedPageUrl)(),E,{flushImmediately:!0,addNewSessionMetadata:!0}),this._previousLoggedPageViewUrl=_,this._engagementManager.bumpInactiveTimer()}}},{key:"_tryLogPageViewEnd",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._hasLoggedPageViewEnd||(this._hasLoggedPageViewEnd=!0,this._enqueueAutoCapture(l.AutoCaptureEventName.PAGE_VIEW_END,(0,M._getSanitizedPageUrl)(),Object.assign(Object.assign({},this._engagementManager.getPageViewEndMetadata()),{dueToInactivity:e}),{flushImmediately:!0}))}},{key:"_logRageClick",value:function(e){if((0,M._shouldLogEvent)(e,e.target)){var _=(0,R._gatherEventData)(e.target),S=_.value,E=_.metadata;this._enqueueAutoCapture(l.AutoCaptureEventName.RAGE_CLICK,S,Object.assign(Object.assign({x:e.clientX,y:e.clientY,timestamp:Date.now()},(0,I._gatherAllMetadata)((0,M._getSafeUrl)())),E))}}},{key:"_logPerformance",value:function(){var _=this,S=(0,e._getWindowSafe)();S&&S.performance&&void 0!==(null==S?void 0:S.performance)&&"function"==typeof S.performance.getEntriesByType&&"function"==typeof S.performance.getEntriesByName&&setTimeout(function(){var e={},E=S.performance.getEntriesByType("navigation");if(E&&E.length>0&&E[0]instanceof PerformanceNavigationTiming){var k=E[0];e.load_time_ms=k.duration,e.dom_interactive_time_ms=k.domInteractive-k.startTime,e.redirect_count=k.redirectCount,e.transfer_bytes=k.transferSize}var T=S.performance.getEntriesByName("first-contentful-paint");T&&T.length>0&&T[0]instanceof PerformancePaintTiming&&(e.first_contentful_paint_time_ms=T[0].startTime),_._enqueueAutoCapture(l.AutoCaptureEventName.PERFORMANCE,(0,M._getSanitizedPageUrl)(),Object.assign(Object.assign({},e),(0,I._getNetworkInfo)()))},1)}},{key:"_enqueueAutoCapture",value:function(l,_,S,E){var k,T,M;if(_){var R=l.slice(14);if(!this._disabledEvents[l]&&!this._disabledEvents[R]){var I=this._getSessionFromClient();try{var O=Object.assign({sessionID:I.data.sessionID,page_url:null!==(M=null===(T=null===(k=(0,e._getWindowSafe)())||void 0===k?void 0:k.location)||void 0===T?void 0:T.href)&&void 0!==M?M:""},S);(null==E?void 0:E.addNewSessionMetadata)&&(O.isNewSession=String(this._isNewSession(I)));var D={eventName:l,value:_,metadata:O};if(this._eventFilterFunc&&!this._eventFilterFunc(D))return;this._client.logEvent(D),(null==E?void 0:E.flushImmediately)&&this._flushImmediately()}catch(L){this._errorBoundary.logError("AC::enqueue",L)}}}}},{key:"_updateClientWithPossibleFirstTouchMetadata",value:function(){var e=this._client;e._possibleFirstTouchMetadata=(0,I._getPossibleFirstTouchMetadata)((0,M._getSafeUrl)()),Object.keys(e._possibleFirstTouchMetadata).length>0&&(e._user=Object.assign(Object.assign({},e._user),{analyticsOnlyMetadata:Object.assign(Object.assign({},e._possibleFirstTouchMetadata),e._user.analyticsOnlyMetadata)}))}},{key:"_flushImmediately",value:function(){this._client.flush().catch(function(l){e.Log.error(l)})}},{key:"_isNewSession",value:function(e){return Math.abs(e.data.startTime-Date.now())<1e3}},{key:"_getSessionFromClient",value:function(){return this._client.getContext().session}}],[{key:"getAllMetadata",value:function(){return(0,I._gatherAllMetadata)((0,M._getSafeUrl)())}}])}();return Oa.AutoCapture=L,Oa}O("am",(eo||(eo=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.StatsigAutoCapturePlugin=e.runStatsigAutoCapture=e.AutoCapture=e.AutoCaptureEventName=void 0;var l=requireSrc$3(),_=requireAutoCapture();Object.defineProperty(e,"AutoCapture",{enumerable:!0,get:function(){return _.AutoCapture}}),Object.defineProperty(e,"StatsigAutoCapturePlugin",{enumerable:!0,get:function(){return _.StatsigAutoCapturePlugin}}),Object.defineProperty(e,"runStatsigAutoCapture",{enumerable:!0,get:function(){return _.runStatsigAutoCapture}});var S=requireAutoCaptureEvent();Object.defineProperty(e,"AutoCaptureEventName",{enumerable:!0,get:function(){return S.AutoCaptureEventName}});var E=Object.assign((0,l._getStatsigGlobal)(),{AutoCapture:_.AutoCapture,runStatsigAutoCapture:_.runStatsigAutoCapture,StatsigAutoCapturePlugin:_.StatsigAutoCapturePlugin});e.default=E}(Pa)),Pa));function t(e,l,_){return Math.max(e,Math.min(l,_))}var ro=function(){return _createClass3(function Animate(){_classCallCheck3(this,Animate)},[{key:"advance",value:function(e){var l;if(this.isRunning){var _,S,E,k,T=!1;if(this.lerp)this.value=(_=this.value,S=this.to,E=60*this.lerp,k=e,function(e,l,_){return(1-_)*e+_*l}(_,S,1-Math.exp(-E*k))),Math.round(this.value)===this.to&&(this.value=this.to,T=!0);else{this.currentTime+=e;var M=t(0,this.currentTime/this.duration,1),R=(T=M>=1)?1:this.easing(M);this.value=this.from+(this.to-this.from)*R}null!==(l=this.onUpdate)&&void 0!==l&&l.call(this,this.value,T),T&&this.stop()}}},{key:"stop",value:function(){this.isRunning=!1}},{key:"fromTo",value:function(e,l,_){var S=_.lerp,E=void 0===S?.1:S,k=_.duration,T=void 0===k?1:k,M=_.easing,R=void 0===M?function(e){return e}:M,I=_.onStart,O=_.onUpdate;this.from=this.value=e,this.to=l,this.lerp=E,this.duration=T,this.easing=R,this.currentTime=0,this.isRunning=!0,null!=I&&I(),this.onUpdate=O}}])}(),io=function(){return _createClass3(function Dimensions(){var e=this,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_=l.wrapper,S=l.content,E=l.autoResize,k=void 0===E||E,T=l.debounce,M=void 0===T?250:T;_classCallCheck3(this,Dimensions),_defineProperty3(this,"resize",function(){e.onWrapperResize(),e.onContentResize()}),_defineProperty3(this,"onWrapperResize",function(){e.wrapper===window?(e.width=window.innerWidth,e.height=window.innerHeight):(e.width=e.wrapper.clientWidth,e.height=e.wrapper.clientHeight)}),_defineProperty3(this,"onContentResize",function(){e.wrapper===window?(e.scrollHeight=e.content.scrollHeight,e.scrollWidth=e.content.scrollWidth):(e.scrollHeight=e.wrapper.scrollHeight,e.scrollWidth=e.wrapper.scrollWidth)}),this.wrapper=_,this.content=S,k&&(this.debouncedResize=function(e,l){var _;return function(){var S=arguments,E=this;clearTimeout(_),_=setTimeout(function(){e.apply(E,S)},l)}}(this.resize,M),this.wrapper===window?window.addEventListener("resize",this.debouncedResize,!1):(this.wrapperResizeObserver=new ResizeObserver(this.debouncedResize),this.wrapperResizeObserver.observe(this.wrapper)),this.contentResizeObserver=new ResizeObserver(this.debouncedResize),this.contentResizeObserver.observe(this.content)),this.resize()},[{key:"destroy",value:function(){var e,l;null!==(e=this.wrapperResizeObserver)&&void 0!==e&&e.disconnect(),null!==(l=this.contentResizeObserver)&&void 0!==l&&l.disconnect(),window.removeEventListener("resize",this.debouncedResize,!1)}},{key:"limit",get:function(){return{x:this.scrollWidth-this.width,y:this.scrollHeight-this.height}}}])}(),ao=function(){return _createClass3(function Emitter(){_classCallCheck3(this,Emitter),this.events={}},[{key:"emit",value:function(e){for(var l=this.events[e]||[],_=arguments.length,S=new Array(_>1?_-1:0),E=1;E<_;E++)S[E-1]=arguments[E];for(var k=0,T=l.length;k<T;k++)l[k].apply(l,S)}},{key:"on",value:function(e,l){var _,S=this;return null!==(_=this.events[e])&&void 0!==_&&_.push(l)||(this.events[e]=[l]),function(){var _;S.events[e]=null===(_=S.events[e])||void 0===_?void 0:_.filter(function(e){return l!==e})}}},{key:"off",value:function(e,l){var _;this.events[e]=null===(_=this.events[e])||void 0===_?void 0:_.filter(function(e){return l!==e})}},{key:"destroy",value:function(){this.events={}}}])}(),oo=100/6,so=function(){return _createClass3(function VirtualScroll(e,l){var _=this,S=l.wheelMultiplier,E=void 0===S?1:S,k=l.touchMultiplier,T=void 0===k?1:k;_classCallCheck3(this,VirtualScroll),_defineProperty3(this,"onTouchStart",function(e){var l=e.targetTouches?e.targetTouches[0]:e,S=l.clientX,E=l.clientY;_.touchStart.x=S,_.touchStart.y=E,_.lastDelta={x:0,y:0},_.emitter.emit("scroll",{deltaX:0,deltaY:0,event:e})}),_defineProperty3(this,"onTouchMove",function(e){var l=e.targetTouches?e.targetTouches[0]:e,S=l.clientX,E=l.clientY,k=-(S-_.touchStart.x)*_.touchMultiplier,T=-(E-_.touchStart.y)*_.touchMultiplier;_.touchStart.x=S,_.touchStart.y=E,_.lastDelta={x:k,y:T},_.emitter.emit("scroll",{deltaX:k,deltaY:T,event:e})}),_defineProperty3(this,"onTouchEnd",function(e){_.emitter.emit("scroll",{deltaX:_.lastDelta.x,deltaY:_.lastDelta.y,event:e})}),_defineProperty3(this,"onWheel",function(e){var l=e.deltaX,S=e.deltaY,E=e.deltaMode;l*=1===E?oo:2===E?_.windowWidth:1,S*=1===E?oo:2===E?_.windowHeight:1,l*=_.wheelMultiplier,S*=_.wheelMultiplier,_.emitter.emit("scroll",{deltaX:l,deltaY:S,event:e})}),_defineProperty3(this,"onWindowResize",function(){_.windowWidth=window.innerWidth,_.windowHeight=window.innerHeight}),this.element=e,this.wheelMultiplier=E,this.touchMultiplier=T,this.touchStart={x:null,y:null},this.emitter=new ao,window.addEventListener("resize",this.onWindowResize,!1),this.onWindowResize(),this.element.addEventListener("wheel",this.onWheel,{passive:!1}),this.element.addEventListener("touchstart",this.onTouchStart,{passive:!1}),this.element.addEventListener("touchmove",this.onTouchMove,{passive:!1}),this.element.addEventListener("touchend",this.onTouchEnd,{passive:!1})},[{key:"on",value:function(e,l){return this.emitter.on(e,l)}},{key:"destroy",value:function(){this.emitter.destroy(),window.removeEventListener("resize",this.onWindowResize,!1),this.element.removeEventListener("wheel",this.onWheel,{passive:!1}),this.element.removeEventListener("touchstart",this.onTouchStart,{passive:!1}),this.element.removeEventListener("touchmove",this.onTouchMove,{passive:!1}),this.element.removeEventListener("touchend",this.onTouchEnd,{passive:!1})}}])}(),uo=function(){return _createClass3(function Lenis(){var e=this,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_=l.wrapper,S=void 0===_?window:_,E=l.content,k=void 0===E?document.documentElement:E,T=l.wheelEventsTarget,M=void 0===T?S:T,R=l.eventsTarget,I=void 0===R?M:R,O=l.smoothWheel,D=void 0===O||O,L=l.syncTouch,U=void 0!==L&&L,B=l.syncTouchLerp,z=void 0===B?.075:B,j=l.touchInertiaMultiplier,G=void 0===j?35:j,H=l.duration,V=l.easing,W=void 0===V?function(e){return Math.min(1,1.001-Math.pow(2,-10*e))}:V,q=l.lerp,X=void 0===q?!H&&.1:q,K=l.infinite,Y=void 0!==K&&K,J=l.orientation,Q=void 0===J?"vertical":J,Z=l.gestureOrientation,$=void 0===Z?"vertical":Z,ee=l.touchMultiplier,te=void 0===ee?1:ee,ne=l.wheelMultiplier,re=void 0===ne?1:ne,ie=l.autoResize,ae=void 0===ie||ie,oe=l.__experimental__naiveDimensions,se=void 0!==oe&&oe;_classCallCheck3(this,Lenis),this.__isSmooth=!1,this.__isScrolling=!1,this.__isStopped=!1,this.__isLocked=!1,this.onVirtualScroll=function(l){var _=l.deltaX,S=l.deltaY,E=l.event;if(!E.ctrlKey){var k=E.type.includes("touch"),T=E.type.includes("wheel");if(!e.options.syncTouch||!k||"touchstart"!==E.type||e.isStopped||e.isLocked){var M=0===_&&0===S,R="vertical"===e.options.gestureOrientation&&0===S||"horizontal"===e.options.gestureOrientation&&0===_;if(!M&&!R){var I=E.composedPath();if(!(I=I.slice(0,I.indexOf(e.rootElement))).find(function(e){var l,_,S,E,M;return(null===(l=e.hasAttribute)||void 0===l?void 0:l.call(e,"data-lenis-prevent"))||k&&(null===(_=e.hasAttribute)||void 0===_?void 0:_.call(e,"data-lenis-prevent-touch"))||T&&(null===(S=e.hasAttribute)||void 0===S?void 0:S.call(e,"data-lenis-prevent-wheel"))||(null===(E=e.classList)||void 0===E?void 0:E.contains("lenis"))&&!(null===(M=e.classList)||void 0===M?void 0:M.contains("lenis-stopped"))}))if(e.isStopped||e.isLocked)E.preventDefault();else{if(e.isSmooth=e.options.syncTouch&&k||e.options.smoothWheel&&T,!e.isSmooth)return e.isScrolling=!1,void e.animate.stop();E.preventDefault();var O=S;"both"===e.options.gestureOrientation?O=Math.abs(S)>Math.abs(_)?S:_:"horizontal"===e.options.gestureOrientation&&(O=_);var D=k&&e.options.syncTouch,L=k&&"touchend"===E.type&&Math.abs(O)>5;L&&(O=e.velocity*e.options.touchInertiaMultiplier),e.scrollTo(e.targetScroll+O,Object.assign({programmatic:!1},D?{lerp:L?e.options.syncTouchLerp:1}:{lerp:e.options.lerp,duration:e.options.duration,easing:e.options.easing}))}}}else e.reset()}},this.onNativeScroll=function(){if(!e.__preventNextScrollEvent&&!e.isScrolling){var l=e.animatedScroll;e.animatedScroll=e.targetScroll=e.actualScroll,e.velocity=0,e.direction=Math.sign(e.animatedScroll-l),e.emit()}},window.lenisVersion="1.0.42",S!==document.documentElement&&S!==document.body||(S=window),this.options={wrapper:S,content:k,wheelEventsTarget:M,eventsTarget:I,smoothWheel:D,syncTouch:U,syncTouchLerp:z,touchInertiaMultiplier:G,duration:H,easing:W,lerp:X,infinite:Y,gestureOrientation:$,orientation:Q,touchMultiplier:te,wheelMultiplier:re,autoResize:ae,__experimental__naiveDimensions:se},this.animate=new ro,this.emitter=new ao,this.dimensions=new io({wrapper:S,content:k,autoResize:ae}),this.toggleClassName("lenis",!0),this.velocity=0,this.isLocked=!1,this.isStopped=!1,this.isSmooth=U||D,this.isScrolling=!1,this.targetScroll=this.animatedScroll=this.actualScroll,this.options.wrapper.addEventListener("scroll",this.onNativeScroll,!1),this.virtualScroll=new so(I,{touchMultiplier:te,wheelMultiplier:re}),this.virtualScroll.on("scroll",this.onVirtualScroll)},[{key:"destroy",value:function(){this.emitter.destroy(),this.options.wrapper.removeEventListener("scroll",this.onNativeScroll,!1),this.virtualScroll.destroy(),this.dimensions.destroy(),this.toggleClassName("lenis",!1),this.toggleClassName("lenis-smooth",!1),this.toggleClassName("lenis-scrolling",!1),this.toggleClassName("lenis-stopped",!1),this.toggleClassName("lenis-locked",!1)}},{key:"on",value:function(e,l){return this.emitter.on(e,l)}},{key:"off",value:function(e,l){return this.emitter.off(e,l)}},{key:"setScroll",value:function(e){this.isHorizontal?this.rootElement.scrollLeft=e:this.rootElement.scrollTop=e}},{key:"resize",value:function(){this.dimensions.resize()}},{key:"emit",value:function(){this.emitter.emit("scroll",this)}},{key:"reset",value:function(){this.isLocked=!1,this.isScrolling=!1,this.animatedScroll=this.targetScroll=this.actualScroll,this.velocity=0,this.animate.stop()}},{key:"start",value:function(){this.isStopped&&(this.isStopped=!1,this.reset())}},{key:"stop",value:function(){this.isStopped||(this.isStopped=!0,this.animate.stop(),this.reset())}},{key:"raf",value:function(e){var l=e-(this.time||e);this.time=e,this.animate.advance(.001*l)}},{key:"scrollTo",value:function(e){var l=this,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},S=_.offset,E=void 0===S?0:S,k=_.immediate,T=void 0!==k&&k,M=_.lock,R=void 0!==M&&M,I=_.duration,O=void 0===I?this.options.duration:I,D=_.easing,L=void 0===D?this.options.easing:D,U=_.lerp,B=void 0===U?!O&&this.options.lerp:U,z=_.onComplete,j=_.force,G=void 0!==j&&j,H=_.programmatic,V=void 0===H||H;if(!this.isStopped&&!this.isLocked||G){if(["top","left","start"].includes(e))e=0;else if(["bottom","right","end"].includes(e))e=this.limit;else{var W;if("string"==typeof e?W=document.querySelector(e):(null==e?void 0:e.nodeType)&&(W=e),W){if(this.options.wrapper!==window){var q=this.options.wrapper.getBoundingClientRect();E-=this.isHorizontal?q.left:q.top}var X=W.getBoundingClientRect();e=(this.isHorizontal?X.left:X.top)+this.animatedScroll}}if("number"==typeof e){if(e+=E,e=Math.round(e),this.options.infinite?V&&(this.targetScroll=this.animatedScroll=this.scroll):e=t(0,e,this.limit),T)return this.animatedScroll=this.targetScroll=e,this.setScroll(this.scroll),this.reset(),void(null==z||z(this));if(!V){if(e===this.targetScroll)return;this.targetScroll=e}this.animate.fromTo(this.animatedScroll,e,{duration:O,easing:L,lerp:B,onStart:function(){R&&(l.isLocked=!0),l.isScrolling=!0},onUpdate:function(e,_){l.isScrolling=!0,l.velocity=e-l.animatedScroll,l.direction=Math.sign(l.velocity),l.animatedScroll=e,l.setScroll(l.scroll),V&&(l.targetScroll=e),_||l.emit(),_&&(l.reset(),l.emit(),null==z||z(l),l.__preventNextScrollEvent=!0,requestAnimationFrame(function(){delete l.__preventNextScrollEvent}))}})}}}},{key:"rootElement",get:function(){return this.options.wrapper===window?document.documentElement:this.options.wrapper}},{key:"limit",get:function(){return this.options.__experimental__naiveDimensions?this.isHorizontal?this.rootElement.scrollWidth-this.rootElement.clientWidth:this.rootElement.scrollHeight-this.rootElement.clientHeight:this.dimensions.limit[this.isHorizontal?"x":"y"]}},{key:"isHorizontal",get:function(){return"horizontal"===this.options.orientation}},{key:"actualScroll",get:function(){return this.isHorizontal?this.rootElement.scrollLeft:this.rootElement.scrollTop}},{key:"scroll",get:function(){return this.options.infinite?(this.animatedScroll%(e=this.limit)+e)%e:this.animatedScroll;var e}},{key:"progress",get:function(){return 0===this.limit?1:this.scroll/this.limit}},{key:"isSmooth",get:function(){return this.__isSmooth},set:function(e){this.__isSmooth!==e&&(this.__isSmooth=e,this.toggleClassName("lenis-smooth",e))}},{key:"isScrolling",get:function(){return this.__isScrolling},set:function(e){this.__isScrolling!==e&&(this.__isScrolling=e,this.toggleClassName("lenis-scrolling",e))}},{key:"isStopped",get:function(){return this.__isStopped},set:function(e){this.__isStopped!==e&&(this.__isStopped=e,this.toggleClassName("lenis-stopped",e))}},{key:"isLocked",get:function(){return this.__isLocked},set:function(e){this.__isLocked!==e&&(this.__isLocked=e,this.toggleClassName("lenis-locked",e))}},{key:"className",get:function(){var e="lenis";return this.isStopped&&(e+=" lenis-stopped"),this.isLocked&&(e+=" lenis-locked"),this.isScrolling&&(e+=" lenis-scrolling"),this.isSmooth&&(e+=" lenis-smooth"),e}},{key:"toggleClassName",value:function(e,l){this.rootElement.classList.toggle(e,l),this.emitter.emit("className change",this)}}])}();O("an",uo);var lo,co=function(e){function FunctionsError(e){var l,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"FunctionsError",S=arguments.length>2?arguments[2]:void 0;return _classCallCheck3(this,FunctionsError),(l=_callSuper(this,FunctionsError,[e])).name=_,l.context=S,l}return _inherits(FunctionsError,e),_createClass3(FunctionsError)}(_wrapNativeSuper(Error)),ho=function(e){function FunctionsFetchError(e){return _classCallCheck3(this,FunctionsFetchError),_callSuper(this,FunctionsFetchError,["Failed to send a request to the Edge Function","FunctionsFetchError",e])}return _inherits(FunctionsFetchError,e),_createClass3(FunctionsFetchError)}(co),fo=function(e){function FunctionsRelayError(e){return _classCallCheck3(this,FunctionsRelayError),_callSuper(this,FunctionsRelayError,["Relay Error invoking the Edge Function","FunctionsRelayError",e])}return _inherits(FunctionsRelayError,e),_createClass3(FunctionsRelayError)}(co),po=function(e){function FunctionsHttpError(e){return _classCallCheck3(this,FunctionsHttpError),_callSuper(this,FunctionsHttpError,["Edge Function returned a non-2xx status code","FunctionsHttpError",e])}return _inherits(FunctionsHttpError,e),_createClass3(FunctionsHttpError)}(co);!function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"}(lo||(lo={}));var vo,go,mo,yo,_o,bo,So,__awaiter$9=function(e,l,_,S){return new(_||(_=Promise))(function(E,k){function fulfilled(e){try{step(S.next(e))}catch(oo){k(oo)}}function rejected(e){try{step(S.throw(e))}catch(oo){k(oo)}}function step(e){var l;e.done?E(e.value):(l=e.value,l instanceof _?l:new _(function(e){e(l)})).then(fulfilled,rejected)}step((S=S.apply(e,l||[])).next())})},wo=function(){return _createClass3(function FunctionsClient(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_=l.headers,S=void 0===_?{}:_,E=l.customFetch,k=l.region,T=void 0===k?lo.Any:k;_classCallCheck3(this,FunctionsClient),this.url=e,this.headers=S,this.region=T,this.fetch=function(e){var l;return l=e||("undefined"==typeof fetch?function(){for(var e=arguments.length,l=new Array(e),_=0;_<e;_++)l[_]=arguments[_];return j(_asyncToGenerator(_regenerator().m(function _callee32(){var e,l;return _regenerator().w(function(_){for(;;)switch(_.n){case 0:return _.n=1,Promise.resolve().then(function(){return Lo});case 1:return e=_.v,l=e.default,_.a(2,{default:l})}},_callee32)})),void 0).then(function(e){return e.default.apply(void 0,l)})}:fetch),function(){return l.apply(void 0,arguments)}}(E)},[{key:"setAuth",value:function(e){this.headers.Authorization="Bearer ".concat(e)}},{key:"invoke",value:function(e){return __awaiter$9(this,arguments,void 0,function(e){var l=this,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return _regenerator().m(function _callee33(){var S,E,k,T,M,R,I,O,D,L,U,B,z,j;return _regenerator().w(function(G){for(;;)switch(G.p=G.n){case 0:return G.p=0,E=_.headers,k=_.method,T=_.body,M=_.signal,R={},(I=_.region)||(I=l.region),O=new URL("".concat(l.url,"/").concat(e)),I&&"any"!==I&&(R["x-region"]=I,O.searchParams.set("forceFunctionRegion",I)),T&&(E&&!Object.prototype.hasOwnProperty.call(E,"Content-Type")||!E)&&("undefined"!=typeof Blob&&T instanceof Blob||T instanceof ArrayBuffer?(R["Content-Type"]="application/octet-stream",D=T):"string"==typeof T?(R["Content-Type"]="text/plain",D=T):"undefined"!=typeof FormData&&T instanceof FormData?D=T:(R["Content-Type"]="application/json",D=JSON.stringify(T))),G.n=1,l.fetch(O.toString(),{method:k||"POST",headers:Object.assign(Object.assign(Object.assign({},R),l.headers),E),body:D,signal:M}).catch(function(e){if("AbortError"===e.name)throw e;throw new ho(e)});case 1:if(L=G.v,!(U=L.headers.get("x-relay-error"))||"true"!==U){G.n=2;break}throw new fo(L);case 2:if(L.ok){G.n=3;break}throw new po(L);case 3:if("application/json"!==(B=(null!==(S=L.headers.get("Content-Type"))&&void 0!==S?S:"text/plain").split(";")[0].trim())){G.n=5;break}return G.n=4,L.json();case 4:z=G.v,G.n=12;break;case 5:if("application/octet-stream"!==B){G.n=7;break}return G.n=6,L.blob();case 6:z=G.v,G.n=12;break;case 7:if("text/event-stream"!==B){G.n=8;break}z=L,G.n=12;break;case 8:if("multipart/form-data"!==B){G.n=10;break}return G.n=9,L.formData();case 9:z=G.v,G.n=12;break;case 10:return G.n=11,L.text();case 11:z=G.v;case 12:return G.a(2,{data:z,error:null,response:L});case 13:if(G.p=13,!((j=G.v)instanceof Error&&"AbortError"===j.name)){G.n=14;break}return G.a(2,{data:null,error:new ho(j)});case 14:return G.a(2,{data:null,error:j,response:j instanceof po||j instanceof fo?j.context:void 0})}},_callee33,null,[[0,13]])})()})}}])}(),xo={},Eo={},ko={},Ao={},Co={},To={},Mo=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")}(),Ro=Mo.fetch,Io=Mo.fetch.bind(Mo),Po=Mo.Headers,Oo=Mo.Request,Do=Mo.Response,Lo=Object.freeze(Object.defineProperty({__proto__:null,Headers:Po,Request:Oo,Response:Do,default:Io,fetch:Ro},Symbol.toStringTag,{value:"Module"})),Uo=getAugmentedNamespace(Lo),Fo={};function requirePostgrestError(){if(vo)return Fo;vo=1,Object.defineProperty(Fo,"__esModule",{value:!0});var e=function(e){function PostgrestError(e){var l;return _classCallCheck3(this,PostgrestError),(l=_callSuper(this,PostgrestError,[e.message])).name="PostgrestError",l.details=e.details,l.hint=e.hint,l.code=e.code,l}return _inherits(PostgrestError,e),_createClass3(PostgrestError)}(_wrapNativeSuper(Error));return Fo.default=e,Fo}function requirePostgrestBuilder(){if(go)return To;go=1;var e=To&&To.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(To,"__esModule",{value:!0});var l=e(Uo),_=e(requirePostgrestError()),S=function(){return _createClass3(function PostgrestBuilder(e){var _,S;_classCallCheck3(this,PostgrestBuilder),this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=null!==(_=e.shouldThrowOnError)&&void 0!==_&&_,this.signal=e.signal,this.isMaybeSingle=null!==(S=e.isMaybeSingle)&&void 0!==S&&S,e.fetch?this.fetch=e.fetch:"undefined"==typeof fetch?this.fetch=l.default:this.fetch=fetch},[{key:"throwOnError",value:function(){return this.shouldThrowOnError=!0,this}},{key:"setHeader",value:function(e,l){return this.headers=new Headers(this.headers),this.headers.set(e,l),this}},{key:"then",value:function(e,l){var S=this;void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),"GET"!==this.method&&"HEAD"!==this.method&&this.headers.set("Content-Type","application/json");var E=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(function(){var e=_asyncToGenerator(_regenerator().m(function _callee34(e){var l,E,k,T,M,R,I,O,D,L,U,B,z,j;return _regenerator().w(function(G){for(;;)switch(G.n){case 0:if(M=null,R=null,I=null,O=e.status,D=e.statusText,!e.ok){G.n=3;break}if("HEAD"===S.method){G.n=2;break}return G.n=1,e.text();case 1:""===(L=G.v)||(R="text/csv"===S.headers.get("Accept")||S.headers.get("Accept")&&(null===(l=S.headers.get("Accept"))||void 0===l?void 0:l.includes("application/vnd.pgrst.plan+text"))?L:JSON.parse(L));case 2:U=null===(E=S.headers.get("Prefer"))||void 0===E?void 0:E.match(/count=(exact|planned|estimated)/),B=null===(k=e.headers.get("content-range"))||void 0===k?void 0:k.split("/"),U&&B&&B.length>1&&(I=parseInt(B[1])),S.isMaybeSingle&&"GET"===S.method&&Array.isArray(R)&&(R.length>1?(M={code:"PGRST116",details:"Results contain ".concat(R.length," rows, application/vnd.pgrst.object+json requires 1 row"),hint:null,message:"JSON object requested, multiple (or no) rows returned"},R=null,I=null,O=406,D="Not Acceptable"):R=1===R.length?R[0]:null),G.n=5;break;case 3:return G.n=4,e.text();case 4:z=G.v;try{M=JSON.parse(z),Array.isArray(M)&&404===e.status&&(R=[],M=null,O=200,D="OK")}catch(H){404===e.status&&""===z?(O=204,D="No Content"):M={message:z}}if(M&&S.isMaybeSingle&&(null===(T=null==M?void 0:M.details)||void 0===T?void 0:T.includes("0 rows"))&&(M=null,O=200,D="OK"),!M||!S.shouldThrowOnError){G.n=5;break}throw new _.default(M);case 5:return j={error:M,data:R,count:I,status:O,statusText:D},G.a(2,j)}},_callee34)}));return function(l){return e.apply(this,arguments)}}());return this.shouldThrowOnError||(E=E.catch(function(e){var l,_,S;return{error:{message:"".concat(null!==(l=null==e?void 0:e.name)&&void 0!==l?l:"FetchError",": ").concat(null==e?void 0:e.message),details:"".concat(null!==(_=null==e?void 0:e.stack)&&void 0!==_?_:""),hint:"",code:"".concat(null!==(S=null==e?void 0:e.code)&&void 0!==S?S:"")},data:null,count:null,status:0,statusText:""}})),E.then(e,l)}},{key:"returns",value:function(){return this}},{key:"overrideTypes",value:function(){return this}}])}();return To.default=S,To}function requirePostgrestTransformBuilder(){if(mo)return Co;mo=1;var e=Co&&Co.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Co,"__esModule",{value:!0});var l=function(e){function PostgrestTransformBuilder(){return _classCallCheck3(this,PostgrestTransformBuilder),_callSuper(this,PostgrestTransformBuilder,arguments)}return _inherits(PostgrestTransformBuilder,e),_createClass3(PostgrestTransformBuilder,[{key:"select",value:function(e){var l=!1,_=(null!=e?e:"*").split("").map(function(e){return/\s/.test(e)&&!l?"":('"'===e&&(l=!l),e)}).join("");return this.url.searchParams.set("select",_),this.headers.append("Prefer","return=representation"),this}},{key:"order",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_=l.ascending,S=void 0===_||_,E=l.nullsFirst,k=l.foreignTable,T=l.referencedTable,M=void 0===T?k:T,R=M?"".concat(M,".order"):"order",I=this.url.searchParams.get(R);return this.url.searchParams.set(R,"".concat(I?"".concat(I,","):"").concat(e,".").concat(S?"asc":"desc").concat(void 0===E?"":E?".nullsfirst":".nullslast")),this}},{key:"limit",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_=l.foreignTable,S=l.referencedTable,E=void 0===S?_:S,k=void 0===E?"limit":"".concat(E,".limit");return this.url.searchParams.set(k,"".concat(e)),this}},{key:"range",value:function(e,l){var _=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},S=_.foreignTable,E=_.referencedTable,k=void 0===E?S:E,T=void 0===k?"offset":"".concat(k,".offset"),M=void 0===k?"limit":"".concat(k,".limit");return this.url.searchParams.set(T,"".concat(e)),this.url.searchParams.set(M,"".concat(l-e+1)),this}},{key:"abortSignal",value:function(e){return this.signal=e,this}},{key:"single",value:function(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}},{key:"maybeSingle",value:function(){return"GET"===this.method?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}},{key:"csv",value:function(){return this.headers.set("Accept","text/csv"),this}},{key:"geojson",value:function(){return this.headers.set("Accept","application/geo+json"),this}},{key:"explain",value:function(){var e,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_=l.analyze,S=void 0!==_&&_,E=l.verbose,k=void 0!==E&&E,T=l.settings,M=void 0!==T&&T,R=l.buffers,I=void 0!==R&&R,O=l.wal,D=void 0!==O&&O,L=l.format,U=void 0===L?"text":L,B=[S?"analyze":null,k?"verbose":null,M?"settings":null,I?"buffers":null,D?"wal":null].filter(Boolean).join("|"),z=null!==(e=this.headers.get("Accept"))&&void 0!==e?e:"application/json";return this.headers.set("Accept","application/vnd.pgrst.plan+".concat(U,'; for="').concat(z,'"; options=').concat(B,";")),this}},{key:"rollback",value:function(){return this.headers.append("Prefer","tx=rollback"),this}},{key:"returns",value:function(){return this}},{key:"maxAffected",value:function(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer","max-affected=".concat(e)),this}}])}(e(requirePostgrestBuilder()).default);return Co.default=l,Co}function requirePostgrestFilterBuilder(){if(yo)return Ao;yo=1;var e=Ao&&Ao.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ao,"__esModule",{value:!0});var l=function(e){function PostgrestFilterBuilder(){return _classCallCheck3(this,PostgrestFilterBuilder),_callSuper(this,PostgrestFilterBuilder,arguments)}return _inherits(PostgrestFilterBuilder,e),_createClass3(PostgrestFilterBuilder,[{key:"eq",value:function(e,l){return this.url.searchParams.append(e,"eq.".concat(l)),this}},{key:"neq",value:function(e,l){return this.url.searchParams.append(e,"neq.".concat(l)),this}},{key:"gt",value:function(e,l){return this.url.searchParams.append(e,"gt.".concat(l)),this}},{key:"gte",value:function(e,l){return this.url.searchParams.append(e,"gte.".concat(l)),this}},{key:"lt",value:function(e,l){return this.url.searchParams.append(e,"lt.".concat(l)),this}},{key:"lte",value:function(e,l){return this.url.searchParams.append(e,"lte.".concat(l)),this}},{key:"like",value:function(e,l){return this.url.searchParams.append(e,"like.".concat(l)),this}},{key:"likeAllOf",value:function(e,l){return this.url.searchParams.append(e,"like(all).{".concat(l.join(","),"}")),this}},{key:"likeAnyOf",value:function(e,l){return this.url.searchParams.append(e,"like(any).{".concat(l.join(","),"}")),this}},{key:"ilike",value:function(e,l){return this.url.searchParams.append(e,"ilike.".concat(l)),this}},{key:"ilikeAllOf",value:function(e,l){return this.url.searchParams.append(e,"ilike(all).{".concat(l.join(","),"}")),this}},{key:"ilikeAnyOf",value:function(e,l){return this.url.searchParams.append(e,"ilike(any).{".concat(l.join(","),"}")),this}},{key:"is",value:function(e,l){return this.url.searchParams.append(e,"is.".concat(l)),this}},{key:"in",value:function(e,l){var _=Array.from(new Set(l)).map(function(e){return"string"==typeof e&&new RegExp("[,()]").test(e)?'"'.concat(e,'"'):"".concat(e)}).join(",");return this.url.searchParams.append(e,"in.(".concat(_,")")),this}},{key:"contains",value:function(e,l){return"string"==typeof l?this.url.searchParams.append(e,"cs.".concat(l)):Array.isArray(l)?this.url.searchParams.append(e,"cs.{".concat(l.join(","),"}")):this.url.searchParams.append(e,"cs.".concat(JSON.stringify(l))),this}},{key:"containedBy",value:function(e,l){return"string"==typeof l?this.url.searchParams.append(e,"cd.".concat(l)):Array.isArray(l)?this.url.searchParams.append(e,"cd.{".concat(l.join(","),"}")):this.url.searchParams.append(e,"cd.".concat(JSON.stringify(l))),this}},{key:"rangeGt",value:function(e,l){return this.url.searchParams.append(e,"sr.".concat(l)),this}},{key:"rangeGte",value:function(e,l){return this.url.searchParams.append(e,"nxl.".concat(l)),this}},{key:"rangeLt",value:function(e,l){return this.url.searchParams.append(e,"sl.".concat(l)),this}},{key:"rangeLte",value:function(e,l){return this.url.searchParams.append(e,"nxr.".concat(l)),this}},{key:"rangeAdjacent",value:function(e,l){return this.url.searchParams.append(e,"adj.".concat(l)),this}},{key:"overlaps",value:function(e,l){return"string"==typeof l?this.url.searchParams.append(e,"ov.".concat(l)):this.url.searchParams.append(e,"ov.{".concat(l.join(","),"}")),this}},{key:"textSearch",value:function(e,l){var _=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},S=_.config,E=_.type,k="";"plain"===E?k="pl":"phrase"===E?k="ph":"websearch"===E&&(k="w");var T=void 0===S?"":"(".concat(S,")");return this.url.searchParams.append(e,"".concat(k,"fts").concat(T,".").concat(l)),this}},{key:"match",value:function(e){var l=this;return Object.entries(e).forEach(function(e){var _=_slicedToArray(e,2),S=_[0],E=_[1];l.url.searchParams.append(S,"eq.".concat(E))}),this}},{key:"not",value:function(e,l,_){return this.url.searchParams.append(e,"not.".concat(l,".").concat(_)),this}},{key:"or",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_=l.foreignTable,S=l.referencedTable,E=void 0===S?_:S,k=E?"".concat(E,".or"):"or";return this.url.searchParams.append(k,"(".concat(e,")")),this}},{key:"filter",value:function(e,l,_){return this.url.searchParams.append(e,"".concat(l,".").concat(_)),this}}])}(e(requirePostgrestTransformBuilder()).default);return Ao.default=l,Ao}function requirePostgrestQueryBuilder(){if(_o)return ko;_o=1;var e=ko&&ko.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ko,"__esModule",{value:!0});var l=e(requirePostgrestFilterBuilder()),_=function(){return _createClass3(function PostgrestQueryBuilder(e,l){var _=l.headers,S=void 0===_?{}:_,E=l.schema,k=l.fetch;_classCallCheck3(this,PostgrestQueryBuilder),this.url=e,this.headers=new Headers(S),this.schema=E,this.fetch=k},[{key:"select",value:function(e,_){var S=null!=_?_:{},E=S.head,k=void 0!==E&&E,T=S.count,M=k?"HEAD":"GET",R=!1,I=(null!=e?e:"*").split("").map(function(e){return/\s/.test(e)&&!R?"":('"'===e&&(R=!R),e)}).join("");return this.url.searchParams.set("select",I),T&&this.headers.append("Prefer","count=".concat(T)),new l.default({method:M,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}},{key:"insert",value:function(e){var _,S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},E=S.count,k=S.defaultToNull,T=void 0===k||k;if(E&&this.headers.append("Prefer","count=".concat(E)),T||this.headers.append("Prefer","missing=default"),Array.isArray(e)){var M=e.reduce(function(e,l){return e.concat(Object.keys(l))},[]);if(M.length>0){var R=_toConsumableArray3(new Set(M)).map(function(e){return'"'.concat(e,'"')});this.url.searchParams.set("columns",R.join(","))}}return new l.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(_=this.fetch)&&void 0!==_?_:fetch})}},{key:"upsert",value:function(e){var _,S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},E=S.onConflict,k=S.ignoreDuplicates,T=void 0!==k&&k,M=S.count,R=S.defaultToNull,I=void 0===R||R;if(this.headers.append("Prefer","resolution=".concat(T?"ignore":"merge","-duplicates")),void 0!==E&&this.url.searchParams.set("on_conflict",E),M&&this.headers.append("Prefer","count=".concat(M)),I||this.headers.append("Prefer","missing=default"),Array.isArray(e)){var O=e.reduce(function(e,l){return e.concat(Object.keys(l))},[]);if(O.length>0){var D=_toConsumableArray3(new Set(O)).map(function(e){return'"'.concat(e,'"')});this.url.searchParams.set("columns",D.join(","))}}return new l.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(_=this.fetch)&&void 0!==_?_:fetch})}},{key:"update",value:function(e){var _,S=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).count;return S&&this.headers.append("Prefer","count=".concat(S)),new l.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(_=this.fetch)&&void 0!==_?_:fetch})}},{key:"delete",value:function(){var e,_=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).count;return _&&this.headers.append("Prefer","count=".concat(_)),new l.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:null!==(e=this.fetch)&&void 0!==e?e:fetch})}}])}();return ko.default=_,ko}var No,Bo,zo,jo,Go,Ho=function(){if(So)return xo;So=1;var e=xo&&xo.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(xo,"__esModule",{value:!0}),xo.PostgrestError=xo.PostgrestBuilder=xo.PostgrestTransformBuilder=xo.PostgrestFilterBuilder=xo.PostgrestQueryBuilder=xo.PostgrestClient=void 0;var l=e(function(){if(bo)return Eo;bo=1;var e=Eo&&Eo.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Eo,"__esModule",{value:!0});var l=e(requirePostgrestQueryBuilder()),_=e(requirePostgrestFilterBuilder()),S=function(){function PostgrestClient(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_=l.headers,S=void 0===_?{}:_,E=l.schema,k=l.fetch;_classCallCheck3(this,PostgrestClient),this.url=e,this.headers=new Headers(S),this.schemaName=E,this.fetch=k}return _createClass3(PostgrestClient,[{key:"from",value:function(e){var _=new URL("".concat(this.url,"/").concat(e));return new l.default(_,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}},{key:"schema",value:function(e){return new PostgrestClient(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}},{key:"rpc",value:function(e){var l,S,E,k=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},T=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},M=T.head,R=void 0!==M&&M,I=T.get,O=void 0!==I&&I,D=T.count,L=new URL("".concat(this.url,"/rpc/").concat(e));R||O?(S=R?"HEAD":"GET",Object.entries(k).filter(function(e){var l=_slicedToArray(e,2);return l[0],void 0!==l[1]}).map(function(e){var l=_slicedToArray(e,2),_=l[0],S=l[1];return[_,Array.isArray(S)?"{".concat(S.join(","),"}"):"".concat(S)]}).forEach(function(e){var l=_slicedToArray(e,2),_=l[0],S=l[1];L.searchParams.append(_,S)})):(S="POST",E=k);var U=new Headers(this.headers);return D&&U.set("Prefer","count=".concat(D)),new _.default({method:S,url:L,headers:U,schema:this.schemaName,body:E,fetch:null!==(l=this.fetch)&&void 0!==l?l:fetch})}}])}();return Eo.default=S,Eo}());xo.PostgrestClient=l.default;var _=e(requirePostgrestQueryBuilder());xo.PostgrestQueryBuilder=_.default;var S=e(requirePostgrestFilterBuilder());xo.PostgrestFilterBuilder=S.default;var E=e(requirePostgrestTransformBuilder());xo.PostgrestTransformBuilder=E.default;var k=e(requirePostgrestBuilder());xo.PostgrestBuilder=k.default;var T=e(requirePostgrestError());return xo.PostgrestError=T.default,xo.default={PostgrestClient:l.default,PostgrestQueryBuilder:_.default,PostgrestFilterBuilder:S.default,PostgrestTransformBuilder:E.default,PostgrestBuilder:k.default,PostgrestError:T.default},xo}(),Vo=getDefaultExportFromCjs(Ho),Wo=Vo.PostgrestClient,qo=(Vo.PostgrestQueryBuilder,Vo.PostgrestFilterBuilder,Vo.PostgrestTransformBuilder,Vo.PostgrestBuilder,Vo.PostgrestError,function(){return _createClass3(function WebSocketFactory(){_classCallCheck3(this,WebSocketFactory)},null,[{key:"detectEnvironment",value:function(){var e;if("undefined"!=typeof WebSocket)return{type:"native",constructor:WebSocket};if("undefined"!=typeof globalThis&&void 0!==globalThis.WebSocket)return{type:"native",constructor:globalThis.WebSocket};if("undefined"!=typeof global&&void 0!==global.WebSocket)return{type:"native",constructor:global.WebSocket};if("undefined"!=typeof globalThis&&void 0!==globalThis.WebSocketPair&&void 0===globalThis.WebSocket)return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if("undefined"!=typeof globalThis&&globalThis.EdgeRuntime||"undefined"!=typeof navigator&&(null===(e=navigator.userAgent)||void 0===e?void 0:e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if("undefined"!=typeof process){var l=process.versions;if(l&&l.node){var _=l.node,S=parseInt(_.replace(/^v/,"").split(".")[0]);return S>=22?void 0!==globalThis.WebSocket?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:"Node.js ".concat(S," detected but native WebSocket not found."),workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:"Node.js ".concat(S," detected without native WebSocket support."),workaround:'For Node.js < 22, install "ws" package and provide it via the transport option:\nimport ws from "ws"\nnew RealtimeClient(url, { transport: ws })'}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}},{key:"getWebSocketConstructor",value:function(){var e=this.detectEnvironment();if(e.constructor)return e.constructor;var l=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(l+="\n\nSuggested solution: ".concat(e.workaround)),new Error(l)}},{key:"createWebSocket",value:function(e,l){return new(this.getWebSocketConstructor())(e,l)}},{key:"isWebSocketSupported",value:function(){try{var e=this.detectEnvironment();return"native"===e.type||"ws"===e.type}catch(l){return!1}}}])}()),Xo="realtime-js/".concat("2.75.0"),Ko=1e4;!function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"}(No||(No={})),function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"}(Bo||(Bo={})),function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"}(zo||(zo={})),function(e){e.websocket="websocket"}(jo||(jo={})),function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"}(Go||(Go={}));var Yo,Jo=function(){return _createClass3(function Serializer(){_classCallCheck3(this,Serializer),this.HEADER_LENGTH=1},[{key:"decode",value:function(e,l){return e.constructor===ArrayBuffer?l(this._binaryDecode(e)):l("string"==typeof e?JSON.parse(e):{})}},{key:"_binaryDecode",value:function(e){var l=new DataView(e),_=new TextDecoder;return this._decodeBroadcast(e,l,_)}},{key:"_decodeBroadcast",value:function(e,l,_){var S=l.getUint8(1),E=l.getUint8(2),k=this.HEADER_LENGTH+2,T=_.decode(e.slice(k,k+S));k+=S;var M=_.decode(e.slice(k,k+E));return k+=E,{ref:null,topic:T,event:M,payload:JSON.parse(_.decode(e.slice(k,e.byteLength)))}}}])}(),Qo=function(){return _createClass3(function Timer(e,l){_classCallCheck3(this,Timer),this.callback=e,this.timerCalc=l,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=l},[{key:"reset",value:function(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}},{key:"scheduleTimeout",value:function(){var e=this;clearTimeout(this.timer),this.timer=setTimeout(function(){e.tries=e.tries+1,e.callback()},this.timerCalc(this.tries+1))}}])}();!function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"}(Yo||(Yo={}));var Zo,convertChangeData=function(e,l){var _,S=null!==(_=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).skipTypes)&&void 0!==_?_:[];return l?Object.keys(l).reduce(function(_,E){return _[E]=convertColumn(E,e,l,S),_},{}):{}},convertColumn=function(e,l,_,S){var E=l.find(function(l){return l.name===e}),k=null==E?void 0:E.type,T=_[e];return k&&!S.includes(k)?convertCell(k,T):noop$3(T)},convertCell=function(e,l){if("_"===e.charAt(0)){var _=e.slice(1,e.length);return toArray$1(l,_)}switch(e){case Yo.bool:return toBoolean(l);case Yo.float4:case Yo.float8:case Yo.int2:case Yo.int4:case Yo.int8:case Yo.numeric:case Yo.oid:return toNumber(l);case Yo.json:case Yo.jsonb:return toJson(l);case Yo.timestamp:return toTimestampString(l);case Yo.abstime:case Yo.date:case Yo.daterange:case Yo.int4range:case Yo.int8range:case Yo.money:case Yo.reltime:case Yo.text:case Yo.time:case Yo.timestamptz:case Yo.timetz:case Yo.tsrange:case Yo.tstzrange:default:return noop$3(l)}},noop$3=function(e){return e},toBoolean=function(e){switch(e){case"t":return!0;case"f":return!1;default:return e}},toNumber=function(e){if("string"==typeof e){var l=parseFloat(e);if(!Number.isNaN(l))return l}return e},toJson=function(e){if("string"==typeof e)try{return JSON.parse(e)}catch(l){return e}return e},toArray$1=function(e,l){if("string"!=typeof e)return e;var _=e.length-1,S=e[_];if("{"===e[0]&&"}"===S){var E,k=e.slice(1,_);try{E=JSON.parse("["+k+"]")}catch(T){E=k?k.split(","):[]}return E.map(function(e){return convertCell(l,e)})}return e},toTimestampString=function(e){return"string"==typeof e?e.replace(" ","T"):e},httpEndpointURL=function(e){var l=e;return(l=(l=l.replace(/^ws/i,"http")).replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,"")).replace(/\/+$/,"")+"/api/broadcast"},$o=function(){return _createClass3(function Push(e,l){var _=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},S=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Ko;_classCallCheck3(this,Push),this.channel=e,this.event=l,this.payload=_,this.timeout=S,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null},[{key:"resend",value:function(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}},{key:"send",value:function(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}},{key:"updatePayload",value:function(e){this.payload=Object.assign(Object.assign({},this.payload),e)}},{key:"receive",value:function(e,l){var _;return this._hasReceived(e)&&l(null===(_=this.receivedResp)||void 0===_?void 0:_.response),this.recHooks.push({status:e,callback:l}),this}},{key:"startTimeout",value:function(){var e=this;if(!this.timeoutTimer){this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);this.channel._on(this.refEvent,{},function(l){e._cancelRefEvent(),e._cancelTimeout(),e.receivedResp=l,e._matchReceive(l)}),this.timeoutTimer=setTimeout(function(){e.trigger("timeout",{})},this.timeout)}}},{key:"trigger",value:function(e,l){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:l})}},{key:"destroy",value:function(){this._cancelRefEvent(),this._cancelTimeout()}},{key:"_cancelRefEvent",value:function(){this.refEvent&&this.channel._off(this.refEvent,{})}},{key:"_cancelTimeout",value:function(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}},{key:"_matchReceive",value:function(e){var l=e.status,_=e.response;this.recHooks.filter(function(e){return e.status===l}).forEach(function(e){return e.callback(_)})}},{key:"_hasReceived",value:function(e){return this.receivedResp&&this.receivedResp.status===e}}])}();!function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"}(Zo||(Zo={}));var es,ts,ns,rs=function(){return _createClass3(function RealtimePresence(e,l){var _=this;_classCallCheck3(this,RealtimePresence),this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:function(){},onLeave:function(){},onSync:function(){}};var S=(null==l?void 0:l.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(S.state,{},function(e){var l=_.caller,S=l.onJoin,E=l.onLeave,k=l.onSync;_.joinRef=_.channel._joinRef(),_.state=RealtimePresence.syncState(_.state,e,S,E),_.pendingDiffs.forEach(function(e){_.state=RealtimePresence.syncDiff(_.state,e,S,E)}),_.pendingDiffs=[],k()}),this.channel._on(S.diff,{},function(e){var l=_.caller,S=l.onJoin,E=l.onLeave,k=l.onSync;_.inPendingSyncState()?_.pendingDiffs.push(e):(_.state=RealtimePresence.syncDiff(_.state,e,S,E),k())}),this.onJoin(function(e,l,S){_.channel._trigger("presence",{event:"join",key:e,currentPresences:l,newPresences:S})}),this.onLeave(function(e,l,S){_.channel._trigger("presence",{event:"leave",key:e,currentPresences:l,leftPresences:S})}),this.onSync(function(){_.channel._trigger("presence",{event:"sync"})})},[{key:"onJoin",value:function(e){this.caller.onJoin=e}},{key:"onLeave",value:function(e){this.caller.onLeave=e}},{key:"onSync",value:function(e){this.caller.onSync=e}},{key:"inPendingSyncState",value:function(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}],[{key:"syncState",value:function(e,l,_,S){var E=this.cloneDeep(e),k=this.transformState(l),T={},M={};return this.map(E,function(e,l){k[e]||(M[e]=l)}),this.map(k,function(e,l){var _=E[e];if(_){var S=l.map(function(e){return e.presence_ref}),k=_.map(function(e){return e.presence_ref}),R=l.filter(function(e){return k.indexOf(e.presence_ref)<0}),I=_.filter(function(e){return S.indexOf(e.presence_ref)<0});R.length>0&&(T[e]=R),I.length>0&&(M[e]=I)}else T[e]=l}),this.syncDiff(E,{joins:T,leaves:M},_,S)}},{key:"syncDiff",value:function(e,l,_,S){var E=this,k={joins:this.transformState(l.joins),leaves:this.transformState(l.leaves)},T=k.joins,M=k.leaves;return _||(_=function(){}),S||(S=function(){}),this.map(T,function(l,S){var k,T=null!==(k=e[l])&&void 0!==k?k:[];if(e[l]=E.cloneDeep(S),T.length>0){var M,R=e[l].map(function(e){return e.presence_ref}),I=T.filter(function(e){return R.indexOf(e.presence_ref)<0});(M=e[l]).unshift.apply(M,_toConsumableArray3(I))}_(l,T,S)}),this.map(M,function(l,_){var E=e[l];if(E){var k=_.map(function(e){return e.presence_ref});E=E.filter(function(e){return k.indexOf(e.presence_ref)<0}),e[l]=E,S(l,E,_),0===E.length&&delete e[l]}}),e}},{key:"map",value:function(e,l){return Object.getOwnPropertyNames(e).map(function(_){return l(_,e[_])})}},{key:"transformState",value:function(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce(function(l,_){var S=e[_];return l[_]="metas"in S?S.metas.map(function(e){return e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e}):S,l},{})}},{key:"cloneDeep",value:function(e){return JSON.parse(JSON.stringify(e))}}])}();!function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"}(es||(es={})),function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"}(ts||(ts={})),function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"}(ns||(ns={}));var is=function(){function RealtimeChannel(e){var l,_,S=this,E=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}},k=arguments.length>2?arguments[2]:void 0;if(_classCallCheck3(this,RealtimeChannel),this.topic=e,this.params=E,this.socket=k,this.bindings={},this.state=Bo.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},E.config),this.timeout=this.socket.timeout,this.joinPush=new $o(this,zo.join,this.params,this.timeout),this.rejoinTimer=new Qo(function(){return S._rejoinUntilConnected()},this.socket.reconnectAfterMs),this.joinPush.receive("ok",function(){S.state=Bo.joined,S.rejoinTimer.reset(),S.pushBuffer.forEach(function(e){return e.send()}),S.pushBuffer=[]}),this._onClose(function(){S.rejoinTimer.reset(),S.socket.log("channel","close ".concat(S.topic," ").concat(S._joinRef())),S.state=Bo.closed,S.socket._remove(S)}),this._onError(function(e){S._isLeaving()||S._isClosed()||(S.socket.log("channel","error ".concat(S.topic),e),S.state=Bo.errored,S.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",function(){S._isJoining()&&(S.socket.log("channel","timeout ".concat(S.topic),S.joinPush.timeout),S.state=Bo.errored,S.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",function(e){S._isLeaving()||S._isClosed()||(S.socket.log("channel","error ".concat(S.topic),e),S.state=Bo.errored,S.rejoinTimer.scheduleTimeout())}),this._on(zo.reply,{},function(e,l){S._trigger(S._replyEventName(l),e)}),this.presence=new rs(this),this.broadcastEndpointURL=httpEndpointURL(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(null===(_=null===(l=this.params.config)||void 0===l?void 0:l.broadcast)||void 0===_?void 0:_.replay))throw"tried to use replay on public channel '".concat(this.topic,"'. It must be a private channel.")}return _createClass3(RealtimeChannel,[{key:"subscribe",value:function(e){var l,_,S,E=this,k=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.timeout;if(this.socket.isConnected()||this.socket.connect(),this.state==Bo.closed){var T=this.params.config,M=T.broadcast,R=T.presence,I=T.private,O=null!==(_=null===(l=this.bindings.postgres_changes)||void 0===l?void 0:l.map(function(e){return e.filter}))&&void 0!==_?_:[],D=!!this.bindings[ts.PRESENCE]&&this.bindings[ts.PRESENCE].length>0||!0===(null===(S=this.params.config.presence)||void 0===S?void 0:S.enabled),L={},U={broadcast:M,presence:Object.assign(Object.assign({},R),{enabled:D}),postgres_changes:O,private:I};this.socket.accessTokenValue&&(L.access_token=this.socket.accessTokenValue),this._onError(function(l){return null==e?void 0:e(ns.CHANNEL_ERROR,l)}),this._onClose(function(){return null==e?void 0:e(ns.CLOSED)}),this.updateJoinPayload(Object.assign({config:U},L)),this.joinedOnce=!0,this._rejoin(k),this.joinPush.receive("ok",function(){var l=_asyncToGenerator(_regenerator().m(function _callee35(l){var _,S,k,T,M,R,I,O,D,L,U,B,z;return _regenerator().w(function(j){for(;;)switch(j.n){case 0:if(_=l.postgres_changes,E.socket.setAuth(),void 0!==_){j.n=1;break}return null==e||e(ns.SUBSCRIBED),j.a(2);case 1:k=E.bindings.postgres_changes,T=null!==(S=null==k?void 0:k.length)&&void 0!==S?S:0,M=[],R=0;case 2:if(!(R<T)){j.n=5;break}if(I=k[R],O=I.filter,D=O.event,L=O.schema,U=O.table,B=O.filter,!(z=_&&_[R])||z.event!==D||z.schema!==L||z.table!==U||z.filter!==B){j.n=3;break}M.push(Object.assign(Object.assign({},I),{id:z.id})),j.n=4;break;case 3:return E.unsubscribe(),E.state=Bo.errored,null==e||e(ns.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes")),j.a(2);case 4:R++,j.n=2;break;case 5:return E.bindings.postgres_changes=M,e&&e(ns.SUBSCRIBED),j.a(2);case 6:return j.a(2)}},_callee35)}));return function(e){return l.apply(this,arguments)}}()).receive("error",function(l){E.state=Bo.errored,null==e||e(ns.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(l).join(", ")||"error")))}).receive("timeout",function(){null==e||e(ns.TIMED_OUT)})}return this}},{key:"presenceState",value:function(){return this.presence.state}},{key:"track",value:(S=_asyncToGenerator(_regenerator().m(function _callee36(e){var l,_=arguments;return _regenerator().w(function(S){for(;;)switch(S.n){case 0:return l=_.length>1&&void 0!==_[1]?_[1]:{},S.n=1,this.send({type:"presence",event:"track",payload:e},l.timeout||this.timeout);case 1:return S.a(2,S.v)}},_callee36,this)})),function(e){return S.apply(this,arguments)})},{key:"untrack",value:(_=_asyncToGenerator(_regenerator().m(function _callee37(){var e,l=arguments;return _regenerator().w(function(_){for(;;)switch(_.n){case 0:return e=l.length>0&&void 0!==l[0]?l[0]:{},_.n=1,this.send({type:"presence",event:"untrack"},e);case 1:return _.a(2,_.v)}},_callee37,this)})),function(){return _.apply(this,arguments)})},{key:"on",value:function(e,l,_){var S=this;return this.state===Bo.joined&&e===ts.PRESENCE&&(this.socket.log("channel","resubscribe to ".concat(this.topic," due to change in presence callbacks on joined channel")),this.unsubscribe().then(function(){return S.subscribe()})),this._on(e,l,_)}},{key:"send",value:(l=_asyncToGenerator(_regenerator().m(function _callee38(e){var l,_,S,E,k,T,M,R,I=this,O=arguments;return _regenerator().w(function(D){for(;;)switch(D.p=D.n){case 0:if(l=O.length>1&&void 0!==O[1]?O[1]:{},this._canPush()||"broadcast"!==e.type){D.n=7;break}return E=e.event,k=e.payload,T=this.socket.accessTokenValue?"Bearer ".concat(this.socket.accessTokenValue):"",M={method:"POST",headers:{Authorization:T,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:E,payload:k,private:this.private}]})},D.p=1,D.n=2,this._fetchWithTimeout(this.broadcastEndpointURL,M,null!==(_=l.timeout)&&void 0!==_?_:this.timeout);case 2:return R=D.v,D.n=3,null===(S=R.body)||void 0===S?void 0:S.cancel();case 3:return D.a(2,R.ok?"ok":"error");case 4:if(D.p=4,"AbortError"!==D.v.name){D.n=5;break}return D.a(2,"timed out");case 5:return D.a(2,"error");case 6:D.n=8;break;case 7:return D.a(2,new Promise(function(_){var S,E,k,T=I._push(e.type,e,l.timeout||I.timeout);"broadcast"!==e.type||(null===(k=null===(E=null===(S=I.params)||void 0===S?void 0:S.config)||void 0===E?void 0:E.broadcast)||void 0===k?void 0:k.ack)||_("ok"),T.receive("ok",function(){return _("ok")}),T.receive("error",function(){return _("error")}),T.receive("timeout",function(){return _("timed out")})}));case 8:return D.a(2)}},_callee38,this,[[1,4]])})),function(e){return l.apply(this,arguments)})},{key:"updateJoinPayload",value:function(e){this.joinPush.updatePayload(e)}},{key:"unsubscribe",value:function(){var e=this,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this.state=Bo.leaving;var onClose=function(){e.socket.log("channel","leave ".concat(e.topic)),e._trigger(zo.close,"leave",e._joinRef())};this.joinPush.destroy();var _=null;return new Promise(function(S){(_=new $o(e,zo.leave,{},l)).receive("ok",function(){onClose(),S("ok")}).receive("timeout",function(){onClose(),S("timed out")}).receive("error",function(){S("error")}),_.send(),e._canPush()||_.trigger("ok",{})}).finally(function(){null==_||_.destroy()})}},{key:"teardown",value:function(){this.pushBuffer.forEach(function(e){return e.destroy()}),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Bo.closed,this.bindings={}}},{key:"_fetchWithTimeout",value:(e=_asyncToGenerator(_regenerator().m(function _callee39(e,l,_){var S,E,k;return _regenerator().w(function(T){for(;;)switch(T.n){case 0:return S=new AbortController,E=setTimeout(function(){return S.abort()},_),T.n=1,this.socket.fetch(e,Object.assign(Object.assign({},l),{signal:S.signal}));case 1:return k=T.v,clearTimeout(E),T.a(2,k)}},_callee39,this)})),function(l,_,S){return e.apply(this,arguments)})},{key:"_push",value:function(e,l){var _=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.timeout;if(!this.joinedOnce)throw"tried to push '".concat(e,"' to '").concat(this.topic,"' before joining. Use channel.subscribe() before pushing events");var S=new $o(this,e,l,_);return this._canPush()?S.send():this._addToPushBuffer(S),S}},{key:"_addToPushBuffer",value:function(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>100){var l=this.pushBuffer.shift();l&&(l.destroy(),this.socket.log("channel","discarded push due to buffer overflow: ".concat(l.event),l.payload))}}},{key:"_onMessage",value:function(e,l,_){return l}},{key:"_isMember",value:function(e){return this.topic===e}},{key:"_joinRef",value:function(){return this.joinPush.ref}},{key:"_trigger",value:function(e,l,_){var S,E,k=this,T=e.toLocaleLowerCase(),M=zo,R=M.close,I=M.error,O=M.leave,D=M.join;if(!(_&&[R,I,O,D].indexOf(T)>=0&&_!==this._joinRef())){var L=this._onMessage(T,l,_);if(l&&!L)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(T)?null===(S=this.bindings.postgres_changes)||void 0===S||S.filter(function(e){var l,_,S;return"*"===(null===(l=e.filter)||void 0===l?void 0:l.event)||(null===(S=null===(_=e.filter)||void 0===_?void 0:_.event)||void 0===S?void 0:S.toLocaleLowerCase())===T}).map(function(e){return e.callback(L,_)}):null===(E=this.bindings[T])||void 0===E||E.filter(function(e){var _,S,E,k,M,R;if(["broadcast","presence","postgres_changes"].includes(T)){if("id"in e){var I=e.id,O=null===(_=e.filter)||void 0===_?void 0:_.event;return I&&(null===(S=l.ids)||void 0===S?void 0:S.includes(I))&&("*"===O||(null==O?void 0:O.toLocaleLowerCase())===(null===(E=l.data)||void 0===E?void 0:E.type.toLocaleLowerCase()))}var D=null===(M=null===(k=null==e?void 0:e.filter)||void 0===k?void 0:k.event)||void 0===M?void 0:M.toLocaleLowerCase();return"*"===D||D===(null===(R=null==l?void 0:l.event)||void 0===R?void 0:R.toLocaleLowerCase())}return e.type.toLocaleLowerCase()===T}).map(function(e){if("object"===_typeof3(L)&&"ids"in L){var l=L.data,S={schema:l.schema,table:l.table,commit_timestamp:l.commit_timestamp,eventType:l.type,new:{},old:{},errors:l.errors};L=Object.assign(Object.assign({},S),k._getPayloadRecords(l))}e.callback(L,_)})}}},{key:"_isClosed",value:function(){return this.state===Bo.closed}},{key:"_isJoined",value:function(){return this.state===Bo.joined}},{key:"_isJoining",value:function(){return this.state===Bo.joining}},{key:"_isLeaving",value:function(){return this.state===Bo.leaving}},{key:"_replyEventName",value:function(e){return"chan_reply_".concat(e)}},{key:"_on",value:function(e,l,_){var S=e.toLocaleLowerCase(),E={type:S,filter:l,callback:_};return this.bindings[S]?this.bindings[S].push(E):this.bindings[S]=[E],this}},{key:"_off",value:function(e,l){var _=e.toLocaleLowerCase();return this.bindings[_]&&(this.bindings[_]=this.bindings[_].filter(function(e){var S;return!((null===(S=e.type)||void 0===S?void 0:S.toLocaleLowerCase())===_&&RealtimeChannel.isEqual(e.filter,l))})),this}},{key:"_rejoinUntilConnected",value:function(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}},{key:"_onClose",value:function(e){this._on(zo.close,{},e)}},{key:"_onError",value:function(e){this._on(zo.error,{},function(l){return e(l)})}},{key:"_canPush",value:function(){return this.socket.isConnected()&&this._isJoined()}},{key:"_rejoin",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Bo.joining,this.joinPush.resend(e))}},{key:"_getPayloadRecords",value:function(e){var l={new:{},old:{}};return"INSERT"!==e.type&&"UPDATE"!==e.type||(l.new=convertChangeData(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(l.old=convertChangeData(e.columns,e.old_record)),l}}],[{key:"isEqual",value:function(e,l){if(Object.keys(e).length!==Object.keys(l).length)return!1;for(var _ in e)if(e[_]!==l[_])return!1;return!0}}]);var e,l,_,S}(),noop$2=function(){},as=25e3,os=10,ss=100,us=[1e3,2e3,5e3,1e4],ls=function(){return _createClass3(function RealtimeClient(e,l){var _;if(_classCallCheck3(this,RealtimeClient),this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Ko,this.transport=null,this.heartbeatIntervalMs=as,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=noop$2,this.ref=0,this.reconnectTimer=null,this.logger=noop$2,this.conn=null,this.sendBuffer=[],this.serializer=new Jo,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=function(e){var l;return l=e||("undefined"==typeof fetch?function(){for(var e=arguments.length,l=new Array(e),_=0;_<e;_++)l[_]=arguments[_];return j(_asyncToGenerator(_regenerator().m(function _callee40(){var e,l;return _regenerator().w(function(_){for(;;)switch(_.n){case 0:return _.n=1,Promise.resolve().then(function(){return Lo});case 1:return e=_.v,l=e.default,_.a(2,{default:l})}},_callee40)})),void 0).then(function(e){return e.default.apply(void 0,l)}).catch(function(e){throw new Error("Failed to load @supabase/node-fetch: ".concat(e.message,". ")+"This is required for HTTP requests in Node.js environments without native fetch.")})}:fetch),function(){return l.apply(void 0,arguments)}},!(null===(_=null==l?void 0:l.params)||void 0===_?void 0:_.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=l.params.apikey,this.endPoint="".concat(e,"/").concat(jo.websocket),this.httpEndpoint=httpEndpointURL(e),this._initializeOptions(l),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(null==l?void 0:l.fetch)},[{key:"connect",value:function(){if(!(this.isConnecting()||this.isDisconnecting()||null!==this.conn&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=qo.createWebSocket(this.endpointURL())}catch(l){this._setConnectionState("disconnected");var e=l.message;if(e.includes("Node.js"))throw new Error("".concat(e,"\n\n")+'To use Realtime in Node.js, you need to provide a WebSocket implementation:\n\nOption 1: Use Node.js 22+ which has native WebSocket support\nOption 2: Install and provide the "ws" package:\n\n  npm install ws\n\n  import ws from "ws"\n  const client = new RealtimeClient(url, {\n    ...options,\n    transport: ws\n  })');throw new Error("WebSocket not available: ".concat(e))}this._setupConnectionHandlers()}}},{key:"endpointURL",value:function(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}},{key:"disconnect",value:function(e,l){var _=this;if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){var S=setTimeout(function(){_._setConnectionState("disconnected")},100);this.conn.onclose=function(){clearTimeout(S),_._setConnectionState("disconnected")},e?this.conn.close(e,null!=l?l:""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}},{key:"getChannels",value:function(){return this.channels}},{key:"removeChannel",value:(k=_asyncToGenerator(_regenerator().m(function _callee41(e){var l;return _regenerator().w(function(_){for(;;)switch(_.n){case 0:return _.n=1,e.unsubscribe();case 1:return l=_.v,0===this.channels.length&&this.disconnect(),_.a(2,l)}},_callee41,this)})),function(e){return k.apply(this,arguments)})},{key:"removeAllChannels",value:(E=_asyncToGenerator(_regenerator().m(function _callee42(){var e;return _regenerator().w(function(l){for(;;)switch(l.n){case 0:return l.n=1,Promise.all(this.channels.map(function(e){return e.unsubscribe()}));case 1:return e=l.v,this.channels=[],this.disconnect(),l.a(2,e)}},_callee42,this)})),function(){return E.apply(this,arguments)})},{key:"log",value:function(e,l,_){this.logger(e,l,_)}},{key:"connectionState",value:function(){switch(this.conn&&this.conn.readyState){case No.connecting:return Go.Connecting;case No.open:return Go.Open;case No.closing:return Go.Closing;default:return Go.Closed}}},{key:"isConnected",value:function(){return this.connectionState()===Go.Open}},{key:"isConnecting",value:function(){return"connecting"===this._connectionState}},{key:"isDisconnecting",value:function(){return"disconnecting"===this._connectionState}},{key:"channel",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}},_="realtime:".concat(e),S=this.getChannels().find(function(e){return e.topic===_});if(S)return S;var E=new is("realtime:".concat(e),l,this);return this.channels.push(E),E}},{key:"push",value:function(e){var l=this,_=e.topic,S=e.event,E=e.payload,k=e.ref,callback=function(){l.encode(e,function(e){var _;null===(_=l.conn)||void 0===_||_.send(e)})};this.log("push","".concat(_," ").concat(S," (").concat(k,")"),E),this.isConnected()?callback():this.sendBuffer.push(callback)}},{key:"setAuth",value:(S=_asyncToGenerator(_regenerator().m(function _callee43(){var e,l=arguments;return _regenerator().w(function(_){for(;;)switch(_.p=_.n){case 0:return e=l.length>0&&void 0!==l[0]?l[0]:null,this._authPromise=this._performAuth(e),_.p=1,_.n=2,this._authPromise;case 2:return _.p=2,this._authPromise=null,_.f(2);case 3:return _.a(2)}},_callee43,this,[[1,,2,3]])})),function(){return S.apply(this,arguments)})},{key:"sendHeartbeat",value:(_=_asyncToGenerator(_regenerator().m(function _callee44(){var e,l=this;return _regenerator().w(function(_){for(;;)switch(_.n){case 0:if(this.isConnected()){_.n=1;break}try{this.heartbeatCallback("disconnected")}catch(oo){this.log("error","error in heartbeat callback",oo)}return _.a(2);case 1:if(!this.pendingHeartbeatRef){_.n=2;break}this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(oo){this.log("error","error in heartbeat callback",oo)}return this._wasManualDisconnect=!1,null===(e=this.conn)||void 0===e||e.close(1e3,"heartbeat timeout"),setTimeout(function(){var e;l.isConnected()||null===(e=l.reconnectTimer)||void 0===e||e.scheduleTimeout()},ss),_.a(2);case 2:this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(oo){this.log("error","error in heartbeat callback",oo)}this._setAuthSafely("heartbeat");case 3:return _.a(2)}},_callee44,this)})),function(){return _.apply(this,arguments)})},{key:"onHeartbeat",value:function(e){this.heartbeatCallback=e}},{key:"flushSendBuffer",value:function(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(function(e){return e()}),this.sendBuffer=[])}},{key:"_makeRef",value:function(){var e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}},{key:"_leaveOpenTopic",value:function(e){var l=this.channels.find(function(l){return l.topic===e&&(l._isJoined()||l._isJoining())});l&&(this.log("transport",'leaving duplicate topic "'.concat(e,'"')),l.unsubscribe())}},{key:"_remove",value:function(e){this.channels=this.channels.filter(function(l){return l.topic!==e.topic})}},{key:"_onConnMessage",value:function(e){var l=this;this.decode(e.data,function(e){if("phoenix"===e.topic&&"phx_reply"===e.event)try{l.heartbeatCallback("ok"===e.payload.status?"ok":"error")}catch(oo){l.log("error","error in heartbeat callback",oo)}e.ref&&e.ref===l.pendingHeartbeatRef&&(l.pendingHeartbeatRef=null);var _=e.topic,S=e.event,E=e.payload,k=e.ref,T=k?"(".concat(k,")"):"",M=E.status||"";l.log("receive","".concat(M," ").concat(_," ").concat(S," ").concat(T).trim(),E),l.channels.filter(function(e){return e._isMember(_)}).forEach(function(e){return e._trigger(S,E,k)}),l._triggerStateCallbacks("message",e)})}},{key:"_clearTimer",value:function(e){var l;"heartbeat"===e&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):"reconnect"===e&&(null===(l=this.reconnectTimer)||void 0===l||l.reset())}},{key:"_clearAllTimers",value:function(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}},{key:"_setupConnectionHandlers",value:function(){var e=this;this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=function(){return e._onConnOpen()},this.conn.onerror=function(l){return e._onConnError(l)},this.conn.onmessage=function(l){return e._onConnMessage(l)},this.conn.onclose=function(l){return e._onConnClose(l)})}},{key:"_teardownConnection",value:function(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(function(e){return e.teardown()})}},{key:"_onConnOpen",value:function(){this._setConnectionState("connected"),this.log("transport","connected to ".concat(this.endpointURL())),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}},{key:"_startHeartbeat",value:function(){var e=this;this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(function(){return e.sendHeartbeat()},this.heartbeatIntervalMs)}},{key:"_startWorkerHeartbeat",value:function(){var e=this;this.workerUrl?this.log("worker","starting worker for from ".concat(this.workerUrl)):this.log("worker","starting default worker");var l=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(l),this.workerRef.onerror=function(l){e.log("worker","worker error",l.message),e.workerRef.terminate()},this.workerRef.onmessage=function(l){"keepAlive"===l.data.event&&e.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}},{key:"_onConnClose",value:function(e){var l;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||null===(l=this.reconnectTimer)||void 0===l||l.scheduleTimeout(),this._triggerStateCallbacks("close",e)}},{key:"_onConnError",value:function(e){this._setConnectionState("disconnected"),this.log("transport","".concat(e)),this._triggerChanError(),this._triggerStateCallbacks("error",e)}},{key:"_triggerChanError",value:function(){this.channels.forEach(function(e){return e._trigger(zo.error)})}},{key:"_appendParams",value:function(e,l){if(0===Object.keys(l).length)return e;var _=e.match(/\?/)?"&":"?",S=new URLSearchParams(l);return"".concat(e).concat(_).concat(S)}},{key:"_workerObjectUrl",value:function(e){var l;if(e)l=e;else{var _=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});l=URL.createObjectURL(_)}return l}},{key:"_setConnectionState",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._connectionState=e,"connecting"===e?this._wasManualDisconnect=!1:"disconnecting"===e&&(this._wasManualDisconnect=l)}},{key:"_performAuth",value:(l=_asyncToGenerator(_regenerator().m(function _callee45(){var e,l,_=arguments;return _regenerator().w(function(S){for(;;)switch(S.n){case 0:if(!(e=_.length>0&&void 0!==_[0]?_[0]:null)){S.n=1;break}l=e,S.n=4;break;case 1:if(!this.accessToken){S.n=3;break}return S.n=2,this.accessToken();case 2:l=S.v,S.n=4;break;case 3:l=this.accessTokenValue;case 4:this.accessTokenValue!=l&&(this.accessTokenValue=l,this.channels.forEach(function(e){var _={access_token:l,version:Xo};l&&e.updateJoinPayload(_),e.joinedOnce&&e._isJoined()&&e._push(zo.access_token,{access_token:l})}));case 5:return S.a(2)}},_callee45,this)})),function(){return l.apply(this,arguments)})},{key:"_waitForAuthIfNeeded",value:(e=_asyncToGenerator(_regenerator().m(function _callee46(){return _regenerator().w(function(e){for(;;)switch(e.n){case 0:if(!this._authPromise){e.n=1;break}return e.n=1,this._authPromise;case 1:return e.a(2)}},_callee46,this)})),function(){return e.apply(this,arguments)})},{key:"_setAuthSafely",value:function(){var e=this,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"general";this.setAuth().catch(function(_){e.log("error","error setting auth in ".concat(l),_)})}},{key:"_triggerStateCallbacks",value:function(e,l){var _=this;try{this.stateChangeCallbacks[e].forEach(function(S){try{S(l)}catch(oo){_.log("error","error in ".concat(e," callback"),oo)}})}catch(oo){this.log("error","error triggering ".concat(e," callbacks"),oo)}}},{key:"_setupReconnectionTimer",value:function(){var e=this;this.reconnectTimer=new Qo(_asyncToGenerator(_regenerator().m(function _callee48(){return _regenerator().w(function(l){for(;;)switch(l.n){case 0:setTimeout(_asyncToGenerator(_regenerator().m(function _callee47(){return _regenerator().w(function(l){for(;;)switch(l.n){case 0:return l.n=1,e._waitForAuthIfNeeded();case 1:e.isConnected()||e.connect();case 2:return l.a(2)}},_callee47)})),os);case 1:return l.a(2)}},_callee48)})),this.reconnectAfterMs)}},{key:"_initializeOptions",value:function(e){var l,_,S,E,k,T,M,R,I;if(this.transport=null!==(l=null==e?void 0:e.transport)&&void 0!==l?l:null,this.timeout=null!==(_=null==e?void 0:e.timeout)&&void 0!==_?_:Ko,this.heartbeatIntervalMs=null!==(S=null==e?void 0:e.heartbeatIntervalMs)&&void 0!==S?S:as,this.worker=null!==(E=null==e?void 0:e.worker)&&void 0!==E&&E,this.accessToken=null!==(k=null==e?void 0:e.accessToken)&&void 0!==k?k:null,this.heartbeatCallback=null!==(T=null==e?void 0:e.heartbeatCallback)&&void 0!==T?T:noop$2,(null==e?void 0:e.params)&&(this.params=e.params),(null==e?void 0:e.logger)&&(this.logger=e.logger),((null==e?void 0:e.logLevel)||(null==e?void 0:e.log_level))&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=null!==(M=null==e?void 0:e.reconnectAfterMs)&&void 0!==M?M:function(e){return us[e-1]||1e4},this.encode=null!==(R=null==e?void 0:e.encode)&&void 0!==R?R:function(e,l){return l(JSON.stringify(e))},this.decode=null!==(I=null==e?void 0:e.decode)&&void 0!==I?I:this.serializer.decode.bind(this.serializer),this.worker){if("undefined"!=typeof window&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=null==e?void 0:e.workerUrl}}}]);var e,l,_,S,E,k}(),cs=function(e){function StorageError(e){var l;return _classCallCheck3(this,StorageError),(l=_callSuper(this,StorageError,[e])).__isStorageError=!0,l.name="StorageError",l}return _inherits(StorageError,e),_createClass3(StorageError)}(_wrapNativeSuper(Error));function isStorageError(e){return"object"===_typeof3(e)&&null!==e&&"__isStorageError"in e}var hs=function(e){function StorageApiError(e,l,_){var S;return _classCallCheck3(this,StorageApiError),(S=_callSuper(this,StorageApiError,[e])).name="StorageApiError",S.status=l,S.statusCode=_,S}return _inherits(StorageApiError,e),_createClass3(StorageApiError,[{key:"toJSON",value:function(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}])}(cs),ds=function(e){function StorageUnknownError(e,l){var _;return _classCallCheck3(this,StorageUnknownError),(_=_callSuper(this,StorageUnknownError,[e])).name="StorageUnknownError",_.originalError=l,_}return _inherits(StorageUnknownError,e),_createClass3(StorageUnknownError)}(cs),__awaiter$8=function(e,l,_,S){return new(_||(_=Promise))(function(E,k){function fulfilled(e){try{step(S.next(e))}catch(oo){k(oo)}}function rejected(e){try{step(S.throw(e))}catch(oo){k(oo)}}function step(e){var l;e.done?E(e.value):(l=e.value,l instanceof _?l:new _(function(e){e(l)})).then(fulfilled,rejected)}step((S=S.apply(e,l||[])).next())})},resolveFetch$2=function(e){var l;return l=e||("undefined"==typeof fetch?function(){for(var e=arguments.length,l=new Array(e),_=0;_<e;_++)l[_]=arguments[_];return j(_asyncToGenerator(_regenerator().m(function _callee49(){var e,l;return _regenerator().w(function(_){for(;;)switch(_.n){case 0:return _.n=1,Promise.resolve().then(function(){return Lo});case 1:return e=_.v,l=e.default,_.a(2,{default:l})}},_callee49)})),void 0).then(function(e){return e.default.apply(void 0,l)})}:fetch),function(){return l.apply(void 0,arguments)}},resolveResponse=function(){return __awaiter$8(void 0,void 0,void 0,_regenerator().m(function _callee50(){return _regenerator().w(function(e){for(;;)switch(e.n){case 0:if("undefined"!=typeof Response){e.n=2;break}return e.n=1,j(function(){return Promise.resolve().then(function(){return Lo})},void 0);case 1:return e.a(2,e.v.Response);case 2:return e.a(2,Response)}},_callee50)}))},_recursiveToCamel=function(e){if(Array.isArray(e))return e.map(function(e){return _recursiveToCamel(e)});if("function"==typeof e||e!==Object(e))return e;var l={};return Object.entries(e).forEach(function(e){var _=_slicedToArray(e,2),S=_[0],E=_[1],k=S.replace(/([-_][a-z])/gi,function(e){return e.toUpperCase().replace(/[-_]/g,"")});l[k]=_recursiveToCamel(E)}),l},__awaiter$7=function(e,l,_,S){return new(_||(_=Promise))(function(E,k){function fulfilled(e){try{step(S.next(e))}catch(oo){k(oo)}}function rejected(e){try{step(S.throw(e))}catch(oo){k(oo)}}function step(e){var l;e.done?E(e.value):(l=e.value,l instanceof _?l:new _(function(e){e(l)})).then(fulfilled,rejected)}step((S=S.apply(e,l||[])).next())})},_getErrorMessage$1=function(e){return e.msg||e.message||e.error_description||e.error||JSON.stringify(e)},handleError$1=function(e,l,_){return __awaiter$7(void 0,void 0,void 0,_regenerator().m(function _callee51(){var S;return _regenerator().w(function(E){for(;;)switch(E.n){case 0:return E.n=1,resolveResponse();case 1:S=E.v,e instanceof S&&!(null==_?void 0:_.noResolveJson)?e.json().then(function(_){var S=e.status||500,E=(null==_?void 0:_.statusCode)||S+"";l(new hs(_getErrorMessage$1(_),S,E))}).catch(function(e){l(new ds(_getErrorMessage$1(e),e))}):l(new ds(_getErrorMessage$1(e),e));case 2:return E.a(2)}},_callee51)}))},_getRequestParams$1=function(e,l,_,S){var E={method:e,headers:(null==l?void 0:l.headers)||{}};return"GET"!==e&&S?(!function(e){if("object"!==_typeof3(e)||null===e)return!1;var l=Object.getPrototypeOf(e);return!(null!==l&&l!==Object.prototype&&null!==Object.getPrototypeOf(l)||Symbol.toStringTag in e||Symbol.iterator in e)}(S)?E.body=S:(E.headers=Object.assign({"Content-Type":"application/json"},null==l?void 0:l.headers),E.body=JSON.stringify(S)),(null==l?void 0:l.duplex)&&(E.duplex=l.duplex),Object.assign(Object.assign({},E),_)):E};function _handleRequest$1(e,l,_,S,E,k){return __awaiter$7(this,void 0,void 0,_regenerator().m(function _callee52(){return _regenerator().w(function(T){for(;;)if(0===T.n)return T.a(2,new Promise(function(T,M){e(_,_getRequestParams$1(l,S,E,k)).then(function(e){if(!e.ok)throw e;return(null==S?void 0:S.noResolveJson)?e:e.json()}).then(function(e){return T(e)}).catch(function(e){return handleError$1(e,M,S)})}))},_callee52)}))}function get(e,l,_,S){return __awaiter$7(this,void 0,void 0,_regenerator().m(function _callee53(){return _regenerator().w(function(E){for(;;)if(0===E.n)return E.a(2,_handleRequest$1(e,"GET",l,_,S))},_callee53)}))}function post(e,l,_,S,E){return __awaiter$7(this,void 0,void 0,_regenerator().m(function _callee54(){return _regenerator().w(function(k){for(;;)if(0===k.n)return k.a(2,_handleRequest$1(e,"POST",l,S,E,_))},_callee54)}))}function put(e,l,_,S,E){return __awaiter$7(this,void 0,void 0,_regenerator().m(function _callee55(){return _regenerator().w(function(k){for(;;)if(0===k.n)return k.a(2,_handleRequest$1(e,"PUT",l,S,E,_))},_callee55)}))}function head(e,l,_,S){return __awaiter$7(this,void 0,void 0,_regenerator().m(function _callee56(){return _regenerator().w(function(E){for(;;)if(0===E.n)return E.a(2,_handleRequest$1(e,"HEAD",l,Object.assign(Object.assign({},_),{noResolveJson:!0}),S))},_callee56)}))}function _remove2(e,l,_,S,E){return __awaiter$7(this,void 0,void 0,_regenerator().m(function _callee57(){return _regenerator().w(function(k){for(;;)if(0===k.n)return k.a(2,_handleRequest$1(e,"DELETE",l,S,E,_))},_callee57)}))}var __awaiter$6=function(e,l,_,S){return new(_||(_=Promise))(function(E,k){function fulfilled(e){try{step(S.next(e))}catch(oo){k(oo)}}function rejected(e){try{step(S.throw(e))}catch(oo){k(oo)}}function step(e){var l;e.done?E(e.value):(l=e.value,l instanceof _?l:new _(function(e){e(l)})).then(fulfilled,rejected)}step((S=S.apply(e,l||[])).next())})},fs=function(){return _createClass3(function StreamDownloadBuilder(e,l){_classCallCheck3(this,StreamDownloadBuilder),this.downloadFn=e,this.shouldThrowOnError=l},[{key:"then",value:function(e,l){return this.execute().then(e,l)}},{key:"execute",value:function(){return __awaiter$6(this,void 0,void 0,_regenerator().m(function _callee58(){var e,l;return _regenerator().w(function(_){for(;;)switch(_.p=_.n){case 0:return _.p=0,_.n=1,this.downloadFn();case 1:return e=_.v,_.a(2,{data:e.body,error:null});case 2:if(_.p=2,l=_.v,!this.shouldThrowOnError){_.n=3;break}throw l;case 3:if(!isStorageError(l)){_.n=4;break}return _.a(2,{data:null,error:l});case 4:throw l;case 5:return _.a(2)}},_callee58,this,[[0,2]])}))}}])}(),__awaiter$5=function(e,l,_,S){return new(_||(_=Promise))(function(E,k){function fulfilled(e){try{step(S.next(e))}catch(oo){k(oo)}}function rejected(e){try{step(S.throw(e))}catch(oo){k(oo)}}function step(e){var l;e.done?E(e.value):(l=e.value,l instanceof _?l:new _(function(e){e(l)})).then(fulfilled,rejected)}step((S=S.apply(e,l||[])).next())})},ps=function(){return _createClass3(function BlobDownloadBuilder(e,l){_classCallCheck3(this,BlobDownloadBuilder),this.downloadFn=e,this.shouldThrowOnError=l},[{key:"asStream",value:function(){return new fs(this.downloadFn,this.shouldThrowOnError)}},{key:"then",value:function(e,l){return this.execute().then(e,l)}},{key:"execute",value:function(){return __awaiter$5(this,void 0,void 0,_regenerator().m(function _callee59(){var e,l,_;return _regenerator().w(function(S){for(;;)switch(S.p=S.n){case 0:return S.p=0,S.n=1,this.downloadFn();case 1:return e=S.v,S.n=2,e.blob();case 2:return l=S.v,S.a(2,{data:l,error:null});case 3:if(S.p=3,_=S.v,!this.shouldThrowOnError){S.n=4;break}throw _;case 4:if(!isStorageError(_)){S.n=5;break}return S.a(2,{data:null,error:_});case 5:throw _;case 6:return S.a(2)}},_callee59,this,[[0,3]])}))}}])}(),__awaiter$4=function(e,l,_,S){return new(_||(_=Promise))(function(E,k){function fulfilled(e){try{step(S.next(e))}catch(oo){k(oo)}}function rejected(e){try{step(S.throw(e))}catch(oo){k(oo)}}function step(e){var l;e.done?E(e.value):(l=e.value,l instanceof _?l:new _(function(e){e(l)})).then(fulfilled,rejected)}step((S=S.apply(e,l||[])).next())})},vs={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},gs={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1},ms=function(){return _createClass3(function StorageFileApi(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_=arguments.length>2?arguments[2]:void 0,S=arguments.length>3?arguments[3]:void 0;_classCallCheck3(this,StorageFileApi),this.shouldThrowOnError=!1,this.url=e,this.headers=l,this.bucketId=_,this.fetch=resolveFetch$2(S)},[{key:"throwOnError",value:function(){return this.shouldThrowOnError=!0,this}},{key:"uploadOrUpdate",value:function(e,l,_,S){return __awaiter$4(this,void 0,void 0,_regenerator().m(function _callee60(){var E,k,T,M,R,I,O,D;return _regenerator().w(function(L){for(;;)switch(L.p=L.n){case 0:return L.p=0,k=Object.assign(Object.assign({},gs),S),T=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(k.upsert)}),M=k.metadata,"undefined"!=typeof Blob&&_ instanceof Blob?((E=new FormData).append("cacheControl",k.cacheControl),M&&E.append("metadata",this.encodeMetadata(M)),E.append("",_)):"undefined"!=typeof FormData&&_ instanceof FormData?((E=_).append("cacheControl",k.cacheControl),M&&E.append("metadata",this.encodeMetadata(M))):(E=_,T["cache-control"]="max-age=".concat(k.cacheControl),T["content-type"]=k.contentType,M&&(T["x-metadata"]=this.toBase64(this.encodeMetadata(M)))),(null==S?void 0:S.headers)&&(T=Object.assign(Object.assign({},T),S.headers)),R=this._removeEmptyFolders(l),I=this._getFinalPath(R),L.n=1,("PUT"==e?put:post)(this.fetch,"".concat(this.url,"/object/").concat(I),E,Object.assign({headers:T},(null==k?void 0:k.duplex)?{duplex:k.duplex}:{}));case 1:return O=L.v,L.a(2,{data:{path:R,id:O.Id,fullPath:O.Key},error:null});case 2:if(L.p=2,D=L.v,!this.shouldThrowOnError){L.n=3;break}throw D;case 3:if(!isStorageError(D)){L.n=4;break}return L.a(2,{data:null,error:D});case 4:throw D;case 5:return L.a(2)}},_callee60,this,[[0,2]])}))}},{key:"upload",value:function(e,l,_){return __awaiter$4(this,void 0,void 0,_regenerator().m(function _callee61(){return _regenerator().w(function(S){for(;;)if(0===S.n)return S.a(2,this.uploadOrUpdate("POST",e,l,_))},_callee61,this)}))}},{key:"uploadToSignedUrl",value:function(e,l,_,S){return __awaiter$4(this,void 0,void 0,_regenerator().m(function _callee62(){var E,k,T,M,R,I,O,D;return _regenerator().w(function(L){for(;;)switch(L.p=L.n){case 0:return E=this._removeEmptyFolders(e),k=this._getFinalPath(E),(T=new URL(this.url+"/object/upload/sign/".concat(k))).searchParams.set("token",l),L.p=1,R=Object.assign({upsert:gs.upsert},S),I=Object.assign(Object.assign({},this.headers),{"x-upsert":String(R.upsert)}),"undefined"!=typeof Blob&&_ instanceof Blob?((M=new FormData).append("cacheControl",R.cacheControl),M.append("",_)):"undefined"!=typeof FormData&&_ instanceof FormData?(M=_).append("cacheControl",R.cacheControl):(M=_,I["cache-control"]="max-age=".concat(R.cacheControl),I["content-type"]=R.contentType),L.n=2,put(this.fetch,T.toString(),M,{headers:I});case 2:return O=L.v,L.a(2,{data:{path:E,fullPath:O.Key},error:null});case 3:if(L.p=3,D=L.v,!this.shouldThrowOnError){L.n=4;break}throw D;case 4:if(!isStorageError(D)){L.n=5;break}return L.a(2,{data:null,error:D});case 5:throw D;case 6:return L.a(2)}},_callee62,this,[[1,3]])}))}},{key:"createSignedUploadUrl",value:function(e,l){return __awaiter$4(this,void 0,void 0,_regenerator().m(function _callee63(){var _,S,E,k,T,M;return _regenerator().w(function(R){for(;;)switch(R.p=R.n){case 0:return R.p=0,_=this._getFinalPath(e),S=Object.assign({},this.headers),(null==l?void 0:l.upsert)&&(S["x-upsert"]="true"),R.n=1,post(this.fetch,"".concat(this.url,"/object/upload/sign/").concat(_),{},{headers:S});case 1:if(E=R.v,k=new URL(this.url+E.url),T=k.searchParams.get("token")){R.n=2;break}throw new cs("No token returned by API");case 2:return R.a(2,{data:{signedUrl:k.toString(),path:e,token:T},error:null});case 3:if(R.p=3,M=R.v,!this.shouldThrowOnError){R.n=4;break}throw M;case 4:if(!isStorageError(M)){R.n=5;break}return R.a(2,{data:null,error:M});case 5:throw M;case 6:return R.a(2)}},_callee63,this,[[0,3]])}))}},{key:"update",value:function(e,l,_){return __awaiter$4(this,void 0,void 0,_regenerator().m(function _callee64(){return _regenerator().w(function(S){for(;;)if(0===S.n)return S.a(2,this.uploadOrUpdate("PUT",e,l,_))},_callee64,this)}))}},{key:"move",value:function(e,l,_){return __awaiter$4(this,void 0,void 0,_regenerator().m(function _callee65(){var S,E;return _regenerator().w(function(k){for(;;)switch(k.p=k.n){case 0:return k.p=0,k.n=1,post(this.fetch,"".concat(this.url,"/object/move"),{bucketId:this.bucketId,sourceKey:e,destinationKey:l,destinationBucket:null==_?void 0:_.destinationBucket},{headers:this.headers});case 1:return S=k.v,k.a(2,{data:S,error:null});case 2:if(k.p=2,E=k.v,!this.shouldThrowOnError){k.n=3;break}throw E;case 3:if(!isStorageError(E)){k.n=4;break}return k.a(2,{data:null,error:E});case 4:throw E;case 5:return k.a(2)}},_callee65,this,[[0,2]])}))}},{key:"copy",value:function(e,l,_){return __awaiter$4(this,void 0,void 0,_regenerator().m(function _callee66(){var S,E;return _regenerator().w(function(k){for(;;)switch(k.p=k.n){case 0:return k.p=0,k.n=1,post(this.fetch,"".concat(this.url,"/object/copy"),{bucketId:this.bucketId,sourceKey:e,destinationKey:l,destinationBucket:null==_?void 0:_.destinationBucket},{headers:this.headers});case 1:return S=k.v,k.a(2,{data:{path:S.Key},error:null});case 2:if(k.p=2,E=k.v,!this.shouldThrowOnError){k.n=3;break}throw E;case 3:if(!isStorageError(E)){k.n=4;break}return k.a(2,{data:null,error:E});case 4:throw E;case 5:return k.a(2)}},_callee66,this,[[0,2]])}))}},{key:"createSignedUrl",value:function(e,l,_){return __awaiter$4(this,void 0,void 0,_regenerator().m(function _callee67(){var S,E,k,T,M;return _regenerator().w(function(R){for(;;)switch(R.p=R.n){case 0:return R.p=0,S=this._getFinalPath(e),R.n=1,post(this.fetch,"".concat(this.url,"/object/sign/").concat(S),Object.assign({expiresIn:l},(null==_?void 0:_.transform)?{transform:_.transform}:{}),{headers:this.headers});case 1:return E=R.v,k=(null==_?void 0:_.download)?"&download=".concat(!0===_.download?"":_.download):"",T=encodeURI("".concat(this.url).concat(E.signedURL).concat(k)),E={signedUrl:T},R.a(2,{data:E,error:null});case 2:if(R.p=2,M=R.v,!this.shouldThrowOnError){R.n=3;break}throw M;case 3:if(!isStorageError(M)){R.n=4;break}return R.a(2,{data:null,error:M});case 4:throw M;case 5:return R.a(2)}},_callee67,this,[[0,2]])}))}},{key:"createSignedUrls",value:function(e,l,_){return __awaiter$4(this,void 0,void 0,_regenerator().m(function _callee68(){var S,E,k,T=this;return _regenerator().w(function(M){for(;;)switch(M.p=M.n){case 0:return M.p=0,M.n=1,post(this.fetch,"".concat(this.url,"/object/sign/").concat(this.bucketId),{expiresIn:l,paths:e},{headers:this.headers});case 1:return S=M.v,E=(null==_?void 0:_.download)?"&download=".concat(!0===_.download?"":_.download):"",M.a(2,{data:S.map(function(e){return Object.assign(Object.assign({},e),{signedUrl:e.signedURL?encodeURI("".concat(T.url).concat(e.signedURL).concat(E)):null})}),error:null});case 2:if(M.p=2,k=M.v,!this.shouldThrowOnError){M.n=3;break}throw k;case 3:if(!isStorageError(k)){M.n=4;break}return M.a(2,{data:null,error:k});case 4:throw k;case 5:return M.a(2)}},_callee68,this,[[0,2]])}))}},{key:"download",value:function(e,l){var _=this,S=void 0!==(null==l?void 0:l.transform)?"render/image/authenticated":"object",E=this.transformOptsToQueryString((null==l?void 0:l.transform)||{}),k=E?"?".concat(E):"",T=this._getFinalPath(e);return new ps(function(){return get(_.fetch,"".concat(_.url,"/").concat(S,"/").concat(T).concat(k),{headers:_.headers,noResolveJson:!0})},this.shouldThrowOnError)}},{key:"info",value:function(e){return __awaiter$4(this,void 0,void 0,_regenerator().m(function _callee69(){var l,_,S;return _regenerator().w(function(E){for(;;)switch(E.p=E.n){case 0:return l=this._getFinalPath(e),E.p=1,E.n=2,get(this.fetch,"".concat(this.url,"/object/info/").concat(l),{headers:this.headers});case 2:return _=E.v,E.a(2,{data:_recursiveToCamel(_),error:null});case 3:if(E.p=3,S=E.v,!this.shouldThrowOnError){E.n=4;break}throw S;case 4:if(!isStorageError(S)){E.n=5;break}return E.a(2,{data:null,error:S});case 5:throw S;case 6:return E.a(2)}},_callee69,this,[[1,3]])}))}},{key:"exists",value:function(e){return __awaiter$4(this,void 0,void 0,_regenerator().m(function _callee70(){var l,_,S;return _regenerator().w(function(E){for(;;)switch(E.p=E.n){case 0:return l=this._getFinalPath(e),E.p=1,E.n=2,head(this.fetch,"".concat(this.url,"/object/").concat(l),{headers:this.headers});case 2:return E.a(2,{data:!0,error:null});case 3:if(E.p=3,S=E.v,!this.shouldThrowOnError){E.n=4;break}throw S;case 4:if(!(isStorageError(S)&&S instanceof ds)){E.n=5;break}if(_=S.originalError,![400,404].includes(null==_?void 0:_.status)){E.n=5;break}return E.a(2,{data:!1,error:S});case 5:throw S;case 6:return E.a(2)}},_callee70,this,[[1,3]])}))}},{key:"getPublicUrl",value:function(e,l){var _=this._getFinalPath(e),S=[],E=(null==l?void 0:l.download)?"download=".concat(!0===l.download?"":l.download):"";""!==E&&S.push(E);var k=void 0!==(null==l?void 0:l.transform)?"render/image":"object",T=this.transformOptsToQueryString((null==l?void 0:l.transform)||{});""!==T&&S.push(T);var M=S.join("&");return""!==M&&(M="?".concat(M)),{data:{publicUrl:encodeURI("".concat(this.url,"/").concat(k,"/public/").concat(_).concat(M))}}}},{key:"remove",value:function(e){return __awaiter$4(this,void 0,void 0,_regenerator().m(function _callee71(){var l,_;return _regenerator().w(function(S){for(;;)switch(S.p=S.n){case 0:return S.p=0,S.n=1,_remove2(this.fetch,"".concat(this.url,"/object/").concat(this.bucketId),{prefixes:e},{headers:this.headers});case 1:return l=S.v,S.a(2,{data:l,error:null});case 2:if(S.p=2,_=S.v,!this.shouldThrowOnError){S.n=3;break}throw _;case 3:if(!isStorageError(_)){S.n=4;break}return S.a(2,{data:null,error:_});case 4:throw _;case 5:return S.a(2)}},_callee71,this,[[0,2]])}))}},{key:"list",value:function(e,l,_){return __awaiter$4(this,void 0,void 0,_regenerator().m(function _callee72(){var S,E,k;return _regenerator().w(function(T){for(;;)switch(T.p=T.n){case 0:return T.p=0,S=Object.assign(Object.assign(Object.assign({},vs),l),{prefix:e||""}),T.n=1,post(this.fetch,"".concat(this.url,"/object/list/").concat(this.bucketId),S,{headers:this.headers},_);case 1:return E=T.v,T.a(2,{data:E,error:null});case 2:if(T.p=2,k=T.v,!this.shouldThrowOnError){T.n=3;break}throw k;case 3:if(!isStorageError(k)){T.n=4;break}return T.a(2,{data:null,error:k});case 4:throw k;case 5:return T.a(2)}},_callee72,this,[[0,2]])}))}},{key:"listV2",value:function(e,l){return __awaiter$4(this,void 0,void 0,_regenerator().m(function _callee73(){var _,S,E;return _regenerator().w(function(k){for(;;)switch(k.p=k.n){case 0:return k.p=0,_=Object.assign({},e),k.n=1,post(this.fetch,"".concat(this.url,"/object/list-v2/").concat(this.bucketId),_,{headers:this.headers},l);case 1:return S=k.v,k.a(2,{data:S,error:null});case 2:if(k.p=2,E=k.v,!this.shouldThrowOnError){k.n=3;break}throw E;case 3:if(!isStorageError(E)){k.n=4;break}return k.a(2,{data:null,error:E});case 4:throw E;case 5:return k.a(2)}},_callee73,this,[[0,2]])}))}},{key:"encodeMetadata",value:function(e){return JSON.stringify(e)}},{key:"toBase64",value:function(e){return"undefined"!=typeof Buffer?Buffer.from(e).toString("base64"):btoa(e)}},{key:"_getFinalPath",value:function(e){return"".concat(this.bucketId,"/").concat(e.replace(/^\/+/,""))}},{key:"_removeEmptyFolders",value:function(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}},{key:"transformOptsToQueryString",value:function(e){var l=[];return e.width&&l.push("width=".concat(e.width)),e.height&&l.push("height=".concat(e.height)),e.resize&&l.push("resize=".concat(e.resize)),e.format&&l.push("format=".concat(e.format)),e.quality&&l.push("quality=".concat(e.quality)),l.join("&")}}])}(),ys={"X-Client-Info":"storage-js/".concat("2.75.0")},__awaiter$3=function(e,l,_,S){return new(_||(_=Promise))(function(E,k){function fulfilled(e){try{step(S.next(e))}catch(oo){k(oo)}}function rejected(e){try{step(S.throw(e))}catch(oo){k(oo)}}function step(e){var l;e.done?E(e.value):(l=e.value,l instanceof _?l:new _(function(e){e(l)})).then(fulfilled,rejected)}step((S=S.apply(e,l||[])).next())})},_s=function(){return _createClass3(function StorageBucketApi(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_=arguments.length>2?arguments[2]:void 0,S=arguments.length>3?arguments[3]:void 0;_classCallCheck3(this,StorageBucketApi),this.shouldThrowOnError=!1;var E=new URL(e);(null==S?void 0:S.useNewHostname)&&/supabase\.(co|in|red)$/.test(E.hostname)&&!E.hostname.includes("storage.supabase.")&&(E.hostname=E.hostname.replace("supabase.","storage.supabase.")),this.url=E.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},ys),l),this.fetch=resolveFetch$2(_)},[{key:"throwOnError",value:function(){return this.shouldThrowOnError=!0,this}},{key:"listBuckets",value:function(){return __awaiter$3(this,void 0,void 0,_regenerator().m(function _callee74(){var e,l;return _regenerator().w(function(_){for(;;)switch(_.p=_.n){case 0:return _.p=0,_.n=1,get(this.fetch,"".concat(this.url,"/bucket"),{headers:this.headers});case 1:return e=_.v,_.a(2,{data:e,error:null});case 2:if(_.p=2,l=_.v,!this.shouldThrowOnError){_.n=3;break}throw l;case 3:if(!isStorageError(l)){_.n=4;break}return _.a(2,{data:null,error:l});case 4:throw l;case 5:return _.a(2)}},_callee74,this,[[0,2]])}))}},{key:"getBucket",value:function(e){return __awaiter$3(this,void 0,void 0,_regenerator().m(function _callee75(){var l,_;return _regenerator().w(function(S){for(;;)switch(S.p=S.n){case 0:return S.p=0,S.n=1,get(this.fetch,"".concat(this.url,"/bucket/").concat(e),{headers:this.headers});case 1:return l=S.v,S.a(2,{data:l,error:null});case 2:if(S.p=2,_=S.v,!this.shouldThrowOnError){S.n=3;break}throw _;case 3:if(!isStorageError(_)){S.n=4;break}return S.a(2,{data:null,error:_});case 4:throw _;case 5:return S.a(2)}},_callee75,this,[[0,2]])}))}},{key:"createBucket",value:function(e){return __awaiter$3(this,arguments,void 0,function(e){var l=this,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{public:!1};return _regenerator().m(function _callee76(){var S,E;return _regenerator().w(function(k){for(;;)switch(k.p=k.n){case 0:return k.p=0,k.n=1,post(l.fetch,"".concat(l.url,"/bucket"),{id:e,name:e,type:_.type,public:_.public,file_size_limit:_.fileSizeLimit,allowed_mime_types:_.allowedMimeTypes},{headers:l.headers});case 1:return S=k.v,k.a(2,{data:S,error:null});case 2:if(k.p=2,E=k.v,!l.shouldThrowOnError){k.n=3;break}throw E;case 3:if(!isStorageError(E)){k.n=4;break}return k.a(2,{data:null,error:E});case 4:throw E;case 5:return k.a(2)}},_callee76,null,[[0,2]])})()})}},{key:"updateBucket",value:function(e,l){return __awaiter$3(this,void 0,void 0,_regenerator().m(function _callee77(){var _,S;return _regenerator().w(function(E){for(;;)switch(E.p=E.n){case 0:return E.p=0,E.n=1,put(this.fetch,"".concat(this.url,"/bucket/").concat(e),{id:e,name:e,public:l.public,file_size_limit:l.fileSizeLimit,allowed_mime_types:l.allowedMimeTypes},{headers:this.headers});case 1:return _=E.v,E.a(2,{data:_,error:null});case 2:if(E.p=2,S=E.v,!this.shouldThrowOnError){E.n=3;break}throw S;case 3:if(!isStorageError(S)){E.n=4;break}return E.a(2,{data:null,error:S});case 4:throw S;case 5:return E.a(2)}},_callee77,this,[[0,2]])}))}},{key:"emptyBucket",value:function(e){return __awaiter$3(this,void 0,void 0,_regenerator().m(function _callee78(){var l,_;return _regenerator().w(function(S){for(;;)switch(S.p=S.n){case 0:return S.p=0,S.n=1,post(this.fetch,"".concat(this.url,"/bucket/").concat(e,"/empty"),{},{headers:this.headers});case 1:return l=S.v,S.a(2,{data:l,error:null});case 2:if(S.p=2,_=S.v,!this.shouldThrowOnError){S.n=3;break}throw _;case 3:if(!isStorageError(_)){S.n=4;break}return S.a(2,{data:null,error:_});case 4:throw _;case 5:return S.a(2)}},_callee78,this,[[0,2]])}))}},{key:"deleteBucket",value:function(e){return __awaiter$3(this,void 0,void 0,_regenerator().m(function _callee79(){var l,_;return _regenerator().w(function(S){for(;;)switch(S.p=S.n){case 0:return S.p=0,S.n=1,_remove2(this.fetch,"".concat(this.url,"/bucket/").concat(e),{},{headers:this.headers});case 1:return l=S.v,S.a(2,{data:l,error:null});case 2:if(S.p=2,_=S.v,!this.shouldThrowOnError){S.n=3;break}throw _;case 3:if(!isStorageError(_)){S.n=4;break}return S.a(2,{data:null,error:_});case 4:throw _;case 5:return S.a(2)}},_callee79,this,[[0,2]])}))}}])}(),bs=function(e){function StorageClient(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_=arguments.length>2?arguments[2]:void 0,S=arguments.length>3?arguments[3]:void 0;return _classCallCheck3(this,StorageClient),_callSuper(this,StorageClient,[e,l,_,S])}return _inherits(StorageClient,e),_createClass3(StorageClient,[{key:"from",value:function(e){return new ms(this.url,this.headers,e,this.fetch)}}])}(_s),Ss="";Ss="undefined"!=typeof Deno?"deno":"undefined"!=typeof document?"web":"undefined"!=typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";var ws={headers:{"X-Client-Info":"supabase-js-".concat(Ss,"/").concat("2.75.0")}},xs={schema:"public"},Es={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},ks={},__awaiter$2=function(e,l,_,S){return new(_||(_=Promise))(function(E,k){function fulfilled(e){try{step(S.next(e))}catch(oo){k(oo)}}function rejected(e){try{step(S.throw(e))}catch(oo){k(oo)}}function step(e){var l;e.done?E(e.value):(l=e.value,l instanceof _?l:new _(function(e){e(l)})).then(fulfilled,rejected)}step((S=S.apply(e,l||[])).next())})},resolveFetch$1=function(e){var l;return l=e||("undefined"==typeof fetch?Io:fetch),function(){return l.apply(void 0,arguments)}},fetchWithAuth=function(e,l,_){var S=resolveFetch$1(_),E="undefined"==typeof Headers?Po:Headers;return function(_,k){return __awaiter$2(void 0,void 0,void 0,_regenerator().m(function _callee80(){var T,M,R,I,O,D;return _regenerator().w(function(L){for(;;)switch(L.n){case 0:return L.n=1,l();case 1:if(O=T=L.v,!(I=null!==O)){L.n=2;break}I=void 0!==T;case 2:if(!I){L.n=3;break}D=T,L.n=4;break;case 3:D=e;case 4:return M=D,(R=new E(null==k?void 0:k.headers)).has("apikey")||R.set("apikey",e),R.has("Authorization")||R.set("Authorization","Bearer ".concat(M)),L.a(2,S(_,Object.assign(Object.assign({},k),{headers:R})))}},_callee80)}))}},__awaiter$1=function(e,l,_,S){return new(_||(_=Promise))(function(E,k){function fulfilled(e){try{step(S.next(e))}catch(oo){k(oo)}}function rejected(e){try{step(S.throw(e))}catch(oo){k(oo)}}function step(e){var l;e.done?E(e.value):(l=e.value,l instanceof _?l:new _(function(e){e(l)})).then(fulfilled,rejected)}step((S=S.apply(e,l||[])).next())})};var As="2.75.0",Cs=3e4,Ts=9e4,Ms={"X-Client-Info":"gotrue-js/".concat(As)},Rs="X-Supabase-Api-Version",Is={timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"},Ps=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Os=function(e){function AuthError(e,l,_){var S;return _classCallCheck3(this,AuthError),(S=_callSuper(this,AuthError,[e])).__isAuthError=!0,S.name="AuthError",S.status=l,S.code=_,S}return _inherits(AuthError,e),_createClass3(AuthError)}(_wrapNativeSuper(Error));function isAuthError(e){return"object"===_typeof3(e)&&null!==e&&"__isAuthError"in e}var Ds=function(e){function AuthApiError(e,l,_){var S;return _classCallCheck3(this,AuthApiError),(S=_callSuper(this,AuthApiError,[e,l,_])).name="AuthApiError",S.status=l,S.code=_,S}return _inherits(AuthApiError,e),_createClass3(AuthApiError)}(Os);function isAuthApiError(e){return isAuthError(e)&&"AuthApiError"===e.name}var Ls=function(e){function AuthUnknownError(e,l){var _;return _classCallCheck3(this,AuthUnknownError),(_=_callSuper(this,AuthUnknownError,[e])).name="AuthUnknownError",_.originalError=l,_}return _inherits(AuthUnknownError,e),_createClass3(AuthUnknownError)}(Os),Us=function(e){function CustomAuthError(e,l,_,S){var E;return _classCallCheck3(this,CustomAuthError),(E=_callSuper(this,CustomAuthError,[e,_,S])).name=l,E.status=_,E}return _inherits(CustomAuthError,e),_createClass3(CustomAuthError)}(Os),Fs=function(e){function AuthSessionMissingError(){return _classCallCheck3(this,AuthSessionMissingError),_callSuper(this,AuthSessionMissingError,["Auth session missing!","AuthSessionMissingError",400,void 0])}return _inherits(AuthSessionMissingError,e),_createClass3(AuthSessionMissingError)}(Us);function isAuthSessionMissingError(e){return isAuthError(e)&&"AuthSessionMissingError"===e.name}var Ns=function(e){function AuthInvalidTokenResponseError(){return _classCallCheck3(this,AuthInvalidTokenResponseError),_callSuper(this,AuthInvalidTokenResponseError,["Auth session or user missing","AuthInvalidTokenResponseError",500,void 0])}return _inherits(AuthInvalidTokenResponseError,e),_createClass3(AuthInvalidTokenResponseError)}(Us),Bs=function(e){function AuthInvalidCredentialsError(e){return _classCallCheck3(this,AuthInvalidCredentialsError),_callSuper(this,AuthInvalidCredentialsError,[e,"AuthInvalidCredentialsError",400,void 0])}return _inherits(AuthInvalidCredentialsError,e),_createClass3(AuthInvalidCredentialsError)}(Us),zs=function(e){function AuthImplicitGrantRedirectError(e){var l,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return _classCallCheck3(this,AuthImplicitGrantRedirectError),(l=_callSuper(this,AuthImplicitGrantRedirectError,[e,"AuthImplicitGrantRedirectError",500,void 0])).details=null,l.details=_,l}return _inherits(AuthImplicitGrantRedirectError,e),_createClass3(AuthImplicitGrantRedirectError,[{key:"toJSON",value:function(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}])}(Us);function isAuthImplicitGrantRedirectError(e){return isAuthError(e)&&"AuthImplicitGrantRedirectError"===e.name}var js=function(e){function AuthPKCEGrantCodeExchangeError(e){var l,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return _classCallCheck3(this,AuthPKCEGrantCodeExchangeError),(l=_callSuper(this,AuthPKCEGrantCodeExchangeError,[e,"AuthPKCEGrantCodeExchangeError",500,void 0])).details=null,l.details=_,l}return _inherits(AuthPKCEGrantCodeExchangeError,e),_createClass3(AuthPKCEGrantCodeExchangeError,[{key:"toJSON",value:function(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}])}(Us),Gs=function(e){function AuthRetryableFetchError(e,l){return _classCallCheck3(this,AuthRetryableFetchError),_callSuper(this,AuthRetryableFetchError,[e,"AuthRetryableFetchError",l,void 0])}return _inherits(AuthRetryableFetchError,e),_createClass3(AuthRetryableFetchError)}(Us);function isAuthRetryableFetchError(e){return isAuthError(e)&&"AuthRetryableFetchError"===e.name}var Hs=function(e){function AuthWeakPasswordError(e,l,_){var S;return _classCallCheck3(this,AuthWeakPasswordError),(S=_callSuper(this,AuthWeakPasswordError,[e,"AuthWeakPasswordError",l,"weak_password"])).reasons=_,S}return _inherits(AuthWeakPasswordError,e),_createClass3(AuthWeakPasswordError)}(Us),Vs=function(e){function AuthInvalidJwtError(e){return _classCallCheck3(this,AuthInvalidJwtError),_callSuper(this,AuthInvalidJwtError,[e,"AuthInvalidJwtError",400,"invalid_jwt"])}return _inherits(AuthInvalidJwtError,e),_createClass3(AuthInvalidJwtError)}(Us),Ws="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),qs=" \t\n\r=".split(""),Xs=function(){for(var e=new Array(128),l=0;l<e.length;l+=1)e[l]=-1;for(var _=0;_<qs.length;_+=1)e[qs[_].charCodeAt(0)]=-2;for(var S=0;S<Ws.length;S+=1)e[Ws[S].charCodeAt(0)]=S;return e}();function byteToBase64URL(e,l,_){if(null!==e)for(l.queue=l.queue<<8|e,l.queuedBits+=8;l.queuedBits>=6;){var S=l.queue>>l.queuedBits-6&63;_(Ws[S]),l.queuedBits-=6}else if(l.queuedBits>0)for(l.queue=l.queue<<6-l.queuedBits,l.queuedBits=6;l.queuedBits>=6;){var E=l.queue>>l.queuedBits-6&63;_(Ws[E]),l.queuedBits-=6}}function byteFromBase64URL(e,l,_){var S=Xs[e];if(!(S>-1)){if(-2===S)return;throw new Error('Invalid Base64-URL character "'.concat(String.fromCharCode(e),'"'))}for(l.queue=l.queue<<6|S,l.queuedBits+=6;l.queuedBits>=8;)_(l.queue>>l.queuedBits-8&255),l.queuedBits-=8}function stringFromBase64URL(e){for(var l=[],utf8Emit=function(e){l.push(String.fromCodePoint(e))},_={utf8seq:0,codepoint:0},S={queue:0,queuedBits:0},byteEmit=function(e){!function(e,l,_){if(0===l.utf8seq){if(e<=127)return void _(e);for(var S=1;S<6;S+=1)if(!(e>>7-S&1)){l.utf8seq=S;break}if(2===l.utf8seq)l.codepoint=31&e;else if(3===l.utf8seq)l.codepoint=15&e;else{if(4!==l.utf8seq)throw new Error("Invalid UTF-8 sequence");l.codepoint=7&e}l.utf8seq-=1}else if(l.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");l.codepoint=l.codepoint<<6|63&e,l.utf8seq-=1,0===l.utf8seq&&_(l.codepoint)}}(e,_,utf8Emit)},E=0;E<e.length;E+=1)byteFromBase64URL(e.charCodeAt(E),S,byteEmit);return l.join("")}function codepointToUTF8(e,l){if(!(e<=127)){if(e<=2047)return l(192|e>>6),void l(128|63&e);if(e<=65535)return l(224|e>>12),l(128|e>>6&63),void l(128|63&e);if(e<=1114111)return l(240|e>>18),l(128|e>>12&63),l(128|e>>6&63),void l(128|63&e);throw new Error("Unrecognized Unicode codepoint: ".concat(e.toString(16)))}l(e)}function base64UrlToUint8Array(e){for(var l=[],_={queue:0,queuedBits:0},onByte=function(e){l.push(e)},S=0;S<e.length;S+=1)byteFromBase64URL(e.charCodeAt(S),_,onByte);return new Uint8Array(l)}function stringToUint8Array(e){var l=[];return function(e,l){for(var _=0;_<e.length;_+=1){var S=e.charCodeAt(_);if(S>55295&&S<=56319){var E=1024*(S-55296)&65535;S=65536+(e.charCodeAt(_+1)-56320&65535|E),_+=1}codepointToUTF8(S,l)}}(e,function(e){return l.push(e)}),new Uint8Array(l)}function bytesToBase64URL(e){var l=[],_={queue:0,queuedBits:0},onChar=function(e){l.push(e)};return e.forEach(function(e){return byteToBase64URL(e,_,onChar)}),byteToBase64URL(null,_,onChar),l.join("")}var isBrowser=function(){return"undefined"!=typeof window&&"undefined"!=typeof document},Ks={tested:!1,writable:!1},supportsLocalStorage=function(){if(!isBrowser())return!1;try{if("object"!==_typeof3(globalThis.localStorage))return!1}catch(oo){return!1}if(Ks.tested)return Ks.writable;var e="lswt-".concat(Math.random()).concat(Math.random());try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Ks.tested=!0,Ks.writable=!0}catch(oo){Ks.tested=!0,Ks.writable=!1}return Ks.writable};function parseParametersFromURL(e){var l={},_=new URL(e);if(_.hash&&"#"===_.hash[0])try{new URLSearchParams(_.hash.substring(1)).forEach(function(e,_){l[_]=e})}catch(oo){}return _.searchParams.forEach(function(e,_){l[_]=e}),l}var resolveFetch=function(e){var l;return l=e||("undefined"==typeof fetch?function(){for(var e=arguments.length,l=new Array(e),_=0;_<e;_++)l[_]=arguments[_];return j(_asyncToGenerator(_regenerator().m(function _callee82(){var e,l;return _regenerator().w(function(_){for(;;)switch(_.n){case 0:return _.n=1,Promise.resolve().then(function(){return Lo});case 1:return e=_.v,l=e.default,_.a(2,{default:l})}},_callee82)})),void 0).then(function(e){return e.default.apply(void 0,l)})}:fetch),function(){return l.apply(void 0,arguments)}},looksLikeFetchResponse=function(e){return"object"===_typeof3(e)&&null!==e&&"status"in e&&"ok"in e&&"json"in e&&"function"==typeof e.json},Ys=function(){var e=_asyncToGenerator(_regenerator().m(function _callee83(e,l,_){return _regenerator().w(function(S){for(;;)switch(S.n){case 0:return S.n=1,e.setItem(l,JSON.stringify(_));case 1:return S.a(2)}},_callee83)}));return function(l,_,S){return e.apply(this,arguments)}}(),Js=function(){var e=_asyncToGenerator(_regenerator().m(function _callee84(e,l){var _;return _regenerator().w(function(S){for(;;)switch(S.p=S.n){case 0:return S.n=1,e.getItem(l);case 1:if(_=S.v){S.n=2;break}return S.a(2,null);case 2:return S.p=2,S.a(2,JSON.parse(_));case 3:return S.p=3,S.v,S.a(2,_)}},_callee84,null,[[2,3]])}));return function(l,_){return e.apply(this,arguments)}}(),Qs=function(){var e=_asyncToGenerator(_regenerator().m(function _callee85(e,l){return _regenerator().w(function(_){for(;;)switch(_.n){case 0:return _.n=1,e.removeItem(l);case 1:return _.a(2)}},_callee85)}));return function(l,_){return e.apply(this,arguments)}}(),Zs=_createClass3(function Deferred(){var e=this;_classCallCheck3(this,Deferred),this.promise=new Deferred.promiseConstructor(function(l,_){e.resolve=l,e.reject=_})});function decodeJWT(e){var l=e.split(".");if(3!==l.length)throw new Vs("Invalid JWT structure");for(var _=0;_<l.length;_++)if(!Ps.test(l[_]))throw new Vs("JWT not in base64url format");return{header:JSON.parse(stringFromBase64URL(l[0])),payload:JSON.parse(stringFromBase64URL(l[1])),signature:base64UrlToUint8Array(l[2]),raw:{header:l[0],payload:l[1]}}}function sleep(e){return _sleep.apply(this,arguments)}function _sleep(){return _sleep=_asyncToGenerator(_regenerator().m(function _callee226(e){return _regenerator().w(function(l){for(;;)switch(l.n){case 0:return l.n=1,new Promise(function(l){setTimeout(function(){return l(null)},e)});case 1:return l.a(2,l.v)}},_callee226)})),_sleep.apply(this,arguments)}function retryable(e,l){return new Promise(function(_,S){_asyncToGenerator(_regenerator().m(function _callee86(){var E,k,T;return _regenerator().w(function(M){for(;;)switch(M.p=M.n){case 0:E=0;case 1:if(!(E<1/0)){M.n=7;break}return M.p=2,M.n=3,e(E);case 3:if(k=M.v,l(E,null,k)){M.n=4;break}return _(k),M.a(2);case 4:M.n=6;break;case 5:if(M.p=5,T=M.v,l(E,T)){M.n=6;break}return S(T),M.a(2);case 6:E++,M.n=1;break;case 7:return M.a(2)}},_callee86,null,[[2,5]])}))()})}function dec2hex(e){return("0"+e.toString(16)).substr(-2)}function generatePKCEVerifier(){var e=new Uint32Array(56);if("undefined"==typeof crypto){for(var l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",_="",S=0;S<56;S++)_+=l.charAt(Math.floor(66*Math.random()));return _}return crypto.getRandomValues(e),Array.from(e,dec2hex).join("")}function sha256(e){return _sha.apply(this,arguments)}function _sha(){return(_sha=_asyncToGenerator(_regenerator().m(function _callee227(e){var l,_,S,E;return _regenerator().w(function(k){for(;;)switch(k.n){case 0:return l=new TextEncoder,_=l.encode(e),k.n=1,crypto.subtle.digest("SHA-256",_);case 1:return S=k.v,E=new Uint8Array(S),k.a(2,Array.from(E).map(function(e){return String.fromCharCode(e)}).join(""))}},_callee227)}))).apply(this,arguments)}function generatePKCEChallenge(e){return _generatePKCEChallenge.apply(this,arguments)}function _generatePKCEChallenge(){return(_generatePKCEChallenge=_asyncToGenerator(_regenerator().m(function _callee228(e){var l;return _regenerator().w(function(_){for(;;)switch(_.n){case 0:if("undefined"!=typeof crypto&&void 0!==crypto.subtle&&"undefined"!=typeof TextEncoder){_.n=1;break}return _.a(2,e);case 1:return _.n=2,sha256(e);case 2:return l=_.v,_.a(2,btoa(l).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,""))}},_callee228)}))).apply(this,arguments)}function getCodeChallengeAndMethod(e,l){return _getCodeChallengeAndMethod.apply(this,arguments)}function _getCodeChallengeAndMethod(){return _getCodeChallengeAndMethod=_asyncToGenerator(_regenerator().m(function _callee229(e,l){var _,S,E,k,T,M=arguments;return _regenerator().w(function(R){for(;;)switch(R.n){case 0:return _=M.length>2&&void 0!==M[2]&&M[2],S=generatePKCEVerifier(),E=S,_&&(E+="/PASSWORD_RECOVERY"),R.n=1,Ys(e,"".concat(l,"-code-verifier"),E);case 1:return R.n=2,generatePKCEChallenge(S);case 2:return k=R.v,T=S===k?"plain":"s256",R.a(2,[k,T])}},_callee229)})),_getCodeChallengeAndMethod.apply(this,arguments)}Zs.promiseConstructor=Promise;var $s=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function parseResponseAPIVersion(e){var l=e.headers.get(Rs);if(!l)return null;if(!l.match($s))return null;try{return new Date("".concat(l,"T00:00:00.0Z"))}catch(oo){return null}}function validateExp(e){if(!e)throw new Error("Missing exp claim");if(e<=Math.floor(Date.now()/1e3))throw new Error("JWT has expired")}function getAlgorithm(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var eu=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function validateUUID(e){if(!eu.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function userNotAvailableProxy(){return new Proxy({},{get:function(e,l){if("__isUserNotAvailableProxy"===l)return!0;if("symbol"===_typeof3(l)){var _=l.toString();if("Symbol(Symbol.toPrimitive)"===_||"Symbol(Symbol.toStringTag)"===_||"Symbol(util.inspect.custom)"===_)return}throw new Error('@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "'.concat(l,'" property of the session object is not supported. Please use getUser() instead.'))},set:function(e,l){throw new Error('@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "'.concat(l,'" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.'))},deleteProperty:function(e,l){throw new Error('@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "'.concat(l,'" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.'))}})}function deepClone(e){return JSON.parse(JSON.stringify(e))}var __rest$2=function(e,l){var _={};for(var S in e)Object.prototype.hasOwnProperty.call(e,S)&&l.indexOf(S)<0&&(_[S]=e[S]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var E=0;for(S=Object.getOwnPropertySymbols(e);E<S.length;E++)l.indexOf(S[E])<0&&Object.prototype.propertyIsEnumerable.call(e,S[E])&&(_[S[E]]=e[S[E]])}return _},_getErrorMessage=function(e){return e.msg||e.message||e.error_description||e.error||JSON.stringify(e)},tu=[502,503,504];function handleError(e){return _handleError.apply(this,arguments)}function _handleError(){return _handleError=_asyncToGenerator(_regenerator().m(function _callee230(e){var l,_,S,E,k;return _regenerator().w(function(T){for(;;)switch(T.p=T.n){case 0:if(looksLikeFetchResponse(e)){T.n=1;break}throw new Gs(_getErrorMessage(e),0);case 1:if(!tu.includes(e.status)){T.n=2;break}throw new Gs(_getErrorMessage(e),e.status);case 2:return T.p=2,T.n=3,e.json();case 3:_=T.v,T.n=5;break;case 4:throw T.p=4,k=T.v,new Ls(_getErrorMessage(k),k);case 5:if(S=void 0,(E=parseResponseAPIVersion(e))&&E.getTime()>=Is.timestamp&&"object"===_typeof3(_)&&_&&"string"==typeof _.code?S=_.code:"object"===_typeof3(_)&&_&&"string"==typeof _.error_code&&(S=_.error_code),S){T.n=7;break}if(!("object"===_typeof3(_)&&_&&"object"===_typeof3(_.weak_password)&&_.weak_password&&Array.isArray(_.weak_password.reasons)&&_.weak_password.reasons.length&&_.weak_password.reasons.reduce(function(e,l){return e&&"string"==typeof l},!0))){T.n=6;break}throw new Hs(_getErrorMessage(_),e.status,_.weak_password.reasons);case 6:T.n=9;break;case 7:if("weak_password"!==S){T.n=8;break}throw new Hs(_getErrorMessage(_),e.status,(null===(l=_.weak_password)||void 0===l?void 0:l.reasons)||[]);case 8:if("session_not_found"!==S){T.n=9;break}throw new Fs;case 9:throw new Ds(_getErrorMessage(_),e.status||500,S);case 10:return T.a(2)}},_callee230,null,[[2,4]])})),_handleError.apply(this,arguments)}var _getRequestParams=function(e,l,_,S){var E={method:e,headers:(null==l?void 0:l.headers)||{}};return"GET"===e?E:(E.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null==l?void 0:l.headers),E.body=JSON.stringify(S),Object.assign(Object.assign({},E),_))};function _request(e,l,_,S){return _request2.apply(this,arguments)}function _request2(){return(_request2=_asyncToGenerator(_regenerator().m(function _callee231(e,l,_,S){var E,k,T,M,R;return _regenerator().w(function(I){for(;;)switch(I.n){case 0:return(k=Object.assign({},null==S?void 0:S.headers))[Rs]||(k[Rs]=Is.name),(null==S?void 0:S.jwt)&&(k.Authorization="Bearer ".concat(S.jwt)),T=null!==(E=null==S?void 0:S.query)&&void 0!==E?E:{},(null==S?void 0:S.redirectTo)&&(T.redirect_to=S.redirectTo),M=Object.keys(T).length?"?"+new URLSearchParams(T).toString():"",I.n=1,_handleRequest(e,l,_+M,{headers:k,noResolveJson:null==S?void 0:S.noResolveJson},{},null==S?void 0:S.body);case 1:return R=I.v,I.a(2,(null==S?void 0:S.xform)?null==S?void 0:S.xform(R):{data:Object.assign({},R),error:null})}},_callee231)}))).apply(this,arguments)}function _handleRequest(e,l,_,S,E,k){return _handleRequest2.apply(this,arguments)}function _handleRequest2(){return(_handleRequest2=_asyncToGenerator(_regenerator().m(function _callee232(e,l,_,S,E,k){var T,M,R,I;return _regenerator().w(function(O){for(;;)switch(O.p=O.n){case 0:return T=_getRequestParams(l,S,E,k),O.p=1,O.n=2,e(_,Object.assign({},T));case 2:M=O.v,O.n=4;break;case 3:throw O.p=3,R=O.v,new Gs(_getErrorMessage(R),0);case 4:if(M.ok){O.n=5;break}return O.n=5,handleError(M);case 5:if(!(null==S?void 0:S.noResolveJson)){O.n=6;break}return O.a(2,M);case 6:return O.p=6,O.n=7,M.json();case 7:return O.a(2,O.v);case 8:return O.p=8,I=O.v,O.n=9,handleError(I);case 9:return O.a(2)}},_callee232,null,[[6,8],[1,3]])}))).apply(this,arguments)}function _sessionResponse(e){var l,_,S=null;return function(e){return e.access_token&&e.refresh_token&&e.expires_in}(e)&&(S=Object.assign({},e),e.expires_at||(S.expires_at=(_=e.expires_in,Math.round(Date.now()/1e3)+_))),{data:{session:S,user:null!==(l=e.user)&&void 0!==l?l:e},error:null}}function _sessionResponsePassword(e){var l=_sessionResponse(e);return!l.error&&e.weak_password&&"object"===_typeof3(e.weak_password)&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&"string"==typeof e.weak_password.message&&e.weak_password.reasons.reduce(function(e,l){return e&&"string"==typeof l},!0)&&(l.data.weak_password=e.weak_password),l}function _userResponse(e){var l;return{data:{user:null!==(l=e.user)&&void 0!==l?l:e},error:null}}function _ssoResponse(e){return{data:e,error:null}}function _generateLinkResponse(e){var l=e.action_link,_=e.email_otp,S=e.hashed_token,E=e.redirect_to,k=e.verification_type,T=__rest$2(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:l,email_otp:_,hashed_token:S,redirect_to:E,verification_type:k},user:Object.assign({},T)},error:null}}function _noResolveJsonResponse(e){return e}var nu=["global","local","others"],__rest$1=function(e,l){var _={};for(var S in e)Object.prototype.hasOwnProperty.call(e,S)&&l.indexOf(S)<0&&(_[S]=e[S]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var E=0;for(S=Object.getOwnPropertySymbols(e);E<S.length;E++)l.indexOf(S[E])<0&&Object.prototype.propertyIsEnumerable.call(e,S[E])&&(_[S[E]]=e[S[E]])}return _},ru=function(){return _createClass3(function GoTrueAdminApi(e){var l=e.url,_=void 0===l?"":l,S=e.headers,E=void 0===S?{}:S,k=e.fetch;_classCallCheck3(this,GoTrueAdminApi),this.url=_,this.headers=E,this.fetch=resolveFetch(k),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}},[{key:"signOut",value:(B=_asyncToGenerator(_regenerator().m(function _callee87(e){var l,_,S=arguments;return _regenerator().w(function(E){for(;;)switch(E.p=E.n){case 0:if(l=S.length>1&&void 0!==S[1]?S[1]:nu[0],!(nu.indexOf(l)<0)){E.n=1;break}throw new Error("@supabase/auth-js: Parameter scope must be one of ".concat(nu.join(", ")));case 1:return E.p=1,E.n=2,_request(this.fetch,"POST","".concat(this.url,"/logout?scope=").concat(l),{headers:this.headers,jwt:e,noResolveJson:!0});case 2:return E.a(2,{data:null,error:null});case 3:if(E.p=3,!isAuthError(_=E.v)){E.n=4;break}return E.a(2,{data:null,error:_});case 4:throw _;case 5:return E.a(2)}},_callee87,this,[[1,3]])})),function(e){return B.apply(this,arguments)})},{key:"inviteUserByEmail",value:(U=_asyncToGenerator(_regenerator().m(function _callee88(e){var l,_,S=arguments;return _regenerator().w(function(E){for(;;)switch(E.p=E.n){case 0:return l=S.length>1&&void 0!==S[1]?S[1]:{},E.p=1,E.n=2,_request(this.fetch,"POST","".concat(this.url,"/invite"),{body:{email:e,data:l.data},headers:this.headers,redirectTo:l.redirectTo,xform:_userResponse});case 2:return E.a(2,E.v);case 3:if(E.p=3,!isAuthError(_=E.v)){E.n=4;break}return E.a(2,{data:{user:null},error:_});case 4:throw _;case 5:return E.a(2)}},_callee88,this,[[1,3]])})),function(e){return U.apply(this,arguments)})},{key:"generateLink",value:(L=_asyncToGenerator(_regenerator().m(function _callee89(e){var l,_,S,E;return _regenerator().w(function(k){for(;;)switch(k.p=k.n){case 0:return k.p=0,l=e.options,_=__rest$1(e,["options"]),S=Object.assign(Object.assign({},_),l),"newEmail"in _&&(S.new_email=null==_?void 0:_.newEmail,delete S.newEmail),k.n=1,_request(this.fetch,"POST","".concat(this.url,"/admin/generate_link"),{body:S,headers:this.headers,xform:_generateLinkResponse,redirectTo:null==l?void 0:l.redirectTo});case 1:return k.a(2,k.v);case 2:if(k.p=2,!isAuthError(E=k.v)){k.n=3;break}return k.a(2,{data:{properties:null,user:null},error:E});case 3:throw E;case 4:return k.a(2)}},_callee89,this,[[0,2]])})),function(e){return L.apply(this,arguments)})},{key:"createUser",value:(D=_asyncToGenerator(_regenerator().m(function _callee90(e){var l;return _regenerator().w(function(_){for(;;)switch(_.p=_.n){case 0:return _.p=0,_.n=1,_request(this.fetch,"POST","".concat(this.url,"/admin/users"),{body:e,headers:this.headers,xform:_userResponse});case 1:return _.a(2,_.v);case 2:if(_.p=2,!isAuthError(l=_.v)){_.n=3;break}return _.a(2,{data:{user:null},error:l});case 3:throw l;case 4:return _.a(2)}},_callee90,this,[[0,2]])})),function(e){return D.apply(this,arguments)})},{key:"listUsers",value:(O=_asyncToGenerator(_regenerator().m(function _callee91(e){var l,_,S,E,k,T,M,R,I,O,D,L,U;return _regenerator().w(function(B){for(;;)switch(B.p=B.n){case 0:return B.p=0,R={nextPage:null,lastPage:0,total:0},B.n=1,_request(this.fetch,"GET","".concat(this.url,"/admin/users"),{headers:this.headers,noResolveJson:!0,query:{page:null!==(_=null===(l=null==e?void 0:e.page)||void 0===l?void 0:l.toString())&&void 0!==_?_:"",per_page:null!==(E=null===(S=null==e?void 0:e.perPage)||void 0===S?void 0:S.toString())&&void 0!==E?E:""},xform:_noResolveJsonResponse});case 1:if(!(I=B.v).error){B.n=2;break}throw I.error;case 2:return B.n=3,I.json();case 3:return O=B.v,D=null!==(k=I.headers.get("x-total-count"))&&void 0!==k?k:0,(L=null!==(M=null===(T=I.headers.get("link"))||void 0===T?void 0:T.split(","))&&void 0!==M?M:[]).length>0&&(L.forEach(function(e){var l=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(e.split(";")[1].split("=")[1]);R["".concat(_,"Page")]=l}),R.total=parseInt(D)),B.a(2,{data:Object.assign(Object.assign({},O),R),error:null});case 4:if(B.p=4,!isAuthError(U=B.v)){B.n=5;break}return B.a(2,{data:{users:[]},error:U});case 5:throw U;case 6:return B.a(2)}},_callee91,this,[[0,4]])})),function(e){return O.apply(this,arguments)})},{key:"getUserById",value:(I=_asyncToGenerator(_regenerator().m(function _callee92(e){var l;return _regenerator().w(function(_){for(;;)switch(_.p=_.n){case 0:return validateUUID(e),_.p=1,_.n=2,_request(this.fetch,"GET","".concat(this.url,"/admin/users/").concat(e),{headers:this.headers,xform:_userResponse});case 2:return _.a(2,_.v);case 3:if(_.p=3,!isAuthError(l=_.v)){_.n=4;break}return _.a(2,{data:{user:null},error:l});case 4:throw l;case 5:return _.a(2)}},_callee92,this,[[1,3]])})),function(e){return I.apply(this,arguments)})},{key:"updateUserById",value:(R=_asyncToGenerator(_regenerator().m(function _callee93(e,l){var _;return _regenerator().w(function(S){for(;;)switch(S.p=S.n){case 0:return validateUUID(e),S.p=1,S.n=2,_request(this.fetch,"PUT","".concat(this.url,"/admin/users/").concat(e),{body:l,headers:this.headers,xform:_userResponse});case 2:return S.a(2,S.v);case 3:if(S.p=3,!isAuthError(_=S.v)){S.n=4;break}return S.a(2,{data:{user:null},error:_});case 4:throw _;case 5:return S.a(2)}},_callee93,this,[[1,3]])})),function(e,l){return R.apply(this,arguments)})},{key:"deleteUser",value:(M=_asyncToGenerator(_regenerator().m(function _callee94(e){var l,_,S=arguments;return _regenerator().w(function(E){for(;;)switch(E.p=E.n){case 0:return l=S.length>1&&void 0!==S[1]&&S[1],validateUUID(e),E.p=1,E.n=2,_request(this.fetch,"DELETE","".concat(this.url,"/admin/users/").concat(e),{headers:this.headers,body:{should_soft_delete:l},xform:_userResponse});case 2:return E.a(2,E.v);case 3:if(E.p=3,!isAuthError(_=E.v)){E.n=4;break}return E.a(2,{data:{user:null},error:_});case 4:throw _;case 5:return E.a(2)}},_callee94,this,[[1,3]])})),function(e){return M.apply(this,arguments)})},{key:"_listFactors",value:(T=_asyncToGenerator(_regenerator().m(function _callee95(e){var l,_,S,E;return _regenerator().w(function(k){for(;;)switch(k.p=k.n){case 0:return validateUUID(e.userId),k.p=1,k.n=2,_request(this.fetch,"GET","".concat(this.url,"/admin/users/").concat(e.userId,"/factors"),{headers:this.headers,xform:function(e){return{data:{factors:e},error:null}}});case 2:return l=k.v,_=l.data,S=l.error,k.a(2,{data:_,error:S});case 3:if(k.p=3,!isAuthError(E=k.v)){k.n=4;break}return k.a(2,{data:null,error:E});case 4:throw E;case 5:return k.a(2)}},_callee95,this,[[1,3]])})),function(e){return T.apply(this,arguments)})},{key:"_deleteFactor",value:(k=_asyncToGenerator(_regenerator().m(function _callee96(e){var l,_;return _regenerator().w(function(S){for(;;)switch(S.p=S.n){case 0:return validateUUID(e.userId),validateUUID(e.id),S.p=1,S.n=2,_request(this.fetch,"DELETE","".concat(this.url,"/admin/users/").concat(e.userId,"/factors/").concat(e.id),{headers:this.headers});case 2:return l=S.v,S.a(2,{data:l,error:null});case 3:if(S.p=3,!isAuthError(_=S.v)){S.n=4;break}return S.a(2,{data:null,error:_});case 4:throw _;case 5:return S.a(2)}},_callee96,this,[[1,3]])})),function(e){return k.apply(this,arguments)})},{key:"_listOAuthClients",value:(E=_asyncToGenerator(_regenerator().m(function _callee97(e){var l,_,S,E,k,T,M,R,I,O,D,L,U;return _regenerator().w(function(B){for(;;)switch(B.p=B.n){case 0:return B.p=0,R={nextPage:null,lastPage:0,total:0},B.n=1,_request(this.fetch,"GET","".concat(this.url,"/admin/oauth/clients"),{headers:this.headers,noResolveJson:!0,query:{page:null!==(_=null===(l=null==e?void 0:e.page)||void 0===l?void 0:l.toString())&&void 0!==_?_:"",per_page:null!==(E=null===(S=null==e?void 0:e.perPage)||void 0===S?void 0:S.toString())&&void 0!==E?E:""},xform:_noResolveJsonResponse});case 1:if(!(I=B.v).error){B.n=2;break}throw I.error;case 2:return B.n=3,I.json();case 3:return O=B.v,D=null!==(k=I.headers.get("x-total-count"))&&void 0!==k?k:0,(L=null!==(M=null===(T=I.headers.get("link"))||void 0===T?void 0:T.split(","))&&void 0!==M?M:[]).length>0&&(L.forEach(function(e){var l=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(e.split(";")[1].split("=")[1]);R["".concat(_,"Page")]=l}),R.total=parseInt(D)),B.a(2,{data:Object.assign(Object.assign({},O),R),error:null});case 4:if(B.p=4,!isAuthError(U=B.v)){B.n=5;break}return B.a(2,{data:{clients:[]},error:U});case 5:throw U;case 6:return B.a(2)}},_callee97,this,[[0,4]])})),function(e){return E.apply(this,arguments)})},{key:"_createOAuthClient",value:(S=_asyncToGenerator(_regenerator().m(function _callee98(e){var l;return _regenerator().w(function(_){for(;;)switch(_.p=_.n){case 0:return _.p=0,_.n=1,_request(this.fetch,"POST","".concat(this.url,"/admin/oauth/clients"),{body:e,headers:this.headers,xform:function(e){return{data:e,error:null}}});case 1:return _.a(2,_.v);case 2:if(_.p=2,!isAuthError(l=_.v)){_.n=3;break}return _.a(2,{data:null,error:l});case 3:throw l;case 4:return _.a(2)}},_callee98,this,[[0,2]])})),function(e){return S.apply(this,arguments)})},{key:"_getOAuthClient",value:(_=_asyncToGenerator(_regenerator().m(function _callee99(e){var l;return _regenerator().w(function(_){for(;;)switch(_.p=_.n){case 0:return _.p=0,_.n=1,_request(this.fetch,"GET","".concat(this.url,"/admin/oauth/clients/").concat(e),{headers:this.headers,xform:function(e){return{data:e,error:null}}});case 1:return _.a(2,_.v);case 2:if(_.p=2,!isAuthError(l=_.v)){_.n=3;break}return _.a(2,{data:null,error:l});case 3:throw l;case 4:return _.a(2)}},_callee99,this,[[0,2]])})),function(e){return _.apply(this,arguments)})},{key:"_deleteOAuthClient",value:(l=_asyncToGenerator(_regenerator().m(function _callee100(e){var l;return _regenerator().w(function(_){for(;;)switch(_.p=_.n){case 0:return _.p=0,_.n=1,_request(this.fetch,"DELETE","".concat(this.url,"/admin/oauth/clients/").concat(e),{headers:this.headers,xform:function(e){return{data:e,error:null}}});case 1:return _.a(2,_.v);case 2:if(_.p=2,!isAuthError(l=_.v)){_.n=3;break}return _.a(2,{data:null,error:l});case 3:throw l;case 4:return _.a(2)}},_callee100,this,[[0,2]])})),function(e){return l.apply(this,arguments)})},{key:"_regenerateOAuthClientSecret",value:(e=_asyncToGenerator(_regenerator().m(function _callee101(e){var l;return _regenerator().w(function(_){for(;;)switch(_.p=_.n){case 0:return _.p=0,_.n=1,_request(this.fetch,"POST","".concat(this.url,"/admin/oauth/clients/").concat(e,"/regenerate_secret"),{headers:this.headers,xform:function(e){return{data:e,error:null}}});case 1:return _.a(2,_.v);case 2:if(_.p=2,!isAuthError(l=_.v)){_.n=3;break}return _.a(2,{data:null,error:l});case 3:throw l;case 4:return _.a(2)}},_callee101,this,[[0,2]])})),function(l){return e.apply(this,arguments)})}]);var e,l,_,S,E,k,T,M,R,I,O,D,L,U,B}();function memoryLocalStorageAdapter(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{getItem:function(l){return e[l]||null},setItem:function(l,_){e[l]=_},removeItem:function(l){delete e[l]}}}var iu=!!(globalThis&&supportsLocalStorage()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")),au=function(e){function LockAcquireTimeoutError(e){var l;return _classCallCheck3(this,LockAcquireTimeoutError),(l=_callSuper(this,LockAcquireTimeoutError,[e])).isAcquireTimeout=!0,l}return _inherits(LockAcquireTimeoutError,e),_createClass3(LockAcquireTimeoutError)}(_wrapNativeSuper(Error)),ou=function(e){function NavigatorLockAcquireTimeoutError(){return _classCallCheck3(this,NavigatorLockAcquireTimeoutError),_callSuper(this,NavigatorLockAcquireTimeoutError,arguments)}return _inherits(NavigatorLockAcquireTimeoutError,e),_createClass3(NavigatorLockAcquireTimeoutError)}(au);function navigatorLock(e,l,_){return _navigatorLock.apply(this,arguments)}function _navigatorLock(){return _navigatorLock=_asyncToGenerator(_regenerator().m(function _callee234(e,l,_){var S;return _regenerator().w(function(E){for(;;)switch(E.n){case 0:return S=new globalThis.AbortController,l>0&&setTimeout(function(){S.abort()},l),E.n=1,Promise.resolve().then(function(){return globalThis.navigator.locks.request(e,0===l?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:S.signal},function(){var S=_asyncToGenerator(_regenerator().m(function _callee233(S){return _regenerator().w(function(E){for(;;)switch(E.p=E.n){case 0:if(!S){E.n=5;break}return E.p=1,E.n=2,_();case 2:return E.a(2,E.v);case 3:return E.p=3,E.f(3);case 4:E.n=12;break;case 5:if(0!==l){E.n=6;break}throw new ou('Acquiring an exclusive Navigator LockManager lock "'.concat(e,'" immediately failed'));case 6:if(!iu){E.n=10;break}return E.p=7,E.n=8,globalThis.navigator.locks.query();case 8:E.v,E.n=10;break;case 9:E.p=9,E.v;case 10:return E.n=11,_();case 11:return E.a(2,E.v);case 12:return E.a(2)}},_callee233,null,[[7,9],[1,,3,4]])}));return function(e){return S.apply(this,arguments)}}())});case 1:return E.a(2,E.v)}},_callee234)})),_navigatorLock.apply(this,arguments)}function getAddress(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error('@supabase/auth-js: Address "'.concat(e,'" is invalid.'));return e.toLowerCase()}function fromHex(e){return parseInt(e,16)}function toHex(e){var l=(new TextEncoder).encode(e);return"0x"+Array.from(l,function(e){return e.toString(16).padStart(2,"0")}).join("")}function createSiweMessage(e){var l,_=e.chainId,S=e.domain,E=e.expirationTime,k=e.issuedAt,T=void 0===k?new Date:k,M=e.nonce,R=e.notBefore,I=e.requestId,O=e.resources,D=e.scheme,L=e.uri,U=e.version;if(!Number.isInteger(_))throw new Error('@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: '.concat(_));if(!S)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(M&&M.length<8)throw new Error('@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: '.concat(M));if(!L)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if("1"!==U)throw new Error("@supabase/auth-js: Invalid SIWE message field \"version\". Version must be '1'. Provided value: ".concat(U));if(null===(l=e.statement)||void 0===l?void 0:l.includes("\n"))throw new Error("@supabase/auth-js: Invalid SIWE message field \"statement\". Statement must not include '\\n'. Provided value: ".concat(e.statement));var B=getAddress(e.address),z=D?"".concat(D,"://").concat(S):S,j=e.statement?"".concat(e.statement,"\n"):"",G="".concat(z," wants you to sign in with your Ethereum account:\n").concat(B,"\n\n").concat(j),H="URI: ".concat(L,"\nVersion: ").concat(U,"\nChain ID: ").concat(_).concat(M?"\nNonce: ".concat(M):"","\nIssued At: ").concat(T.toISOString());if(E&&(H+="\nExpiration Time: ".concat(E.toISOString())),R&&(H+="\nNot Before: ".concat(R.toISOString())),I&&(H+="\nRequest ID: ".concat(I)),O){var V,W="\nResources:",q=_createForOfIteratorHelper2(O);try{for(q.s();!(V=q.n()).done;){var X=V.value;if(!X||"string"!=typeof X)throw new Error('@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: '.concat(X));W+="\n- ".concat(X)}}catch(K){q.e(K)}finally{q.f()}H+=W}return"".concat(G,"\n").concat(H)}var su=function(e){function WebAuthnError(e){var l,_,S=e.message,E=e.code,k=e.cause,T=e.name;return _classCallCheck3(this,WebAuthnError),(l=_callSuper(this,WebAuthnError,[S,{cause:k}])).__isWebAuthnError=!0,l.name=null!==(_=null!=T?T:k instanceof Error?k.name:void 0)&&void 0!==_?_:"Unknown Error",l.code=E,l}return _inherits(WebAuthnError,e),_createClass3(WebAuthnError)}(_wrapNativeSuper(Error)),uu=function(e){function WebAuthnUnknownError(e,l){var _;return _classCallCheck3(this,WebAuthnUnknownError),(_=_callSuper(this,WebAuthnUnknownError,[{code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:l,message:e}])).name="WebAuthnUnknownError",_.originalError=l,_}return _inherits(WebAuthnUnknownError,e),_createClass3(WebAuthnUnknownError)}(su);function identifyRegistrationError(e){var l,_,S,E=e.error,k=e.options,T=k.publicKey;if(!T)throw Error("options was missing required publicKey property");if("AbortError"===E.name){if(k.signal instanceof AbortSignal)return new su({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:E})}else if("ConstraintError"===E.name){if(!0===(null===(l=T.authenticatorSelection)||void 0===l?void 0:l.requireResidentKey))return new su({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:E});if("conditional"===k.mediation&&"required"===(null===(_=T.authenticatorSelection)||void 0===_?void 0:_.userVerification))return new su({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:E});if("required"===(null===(S=T.authenticatorSelection)||void 0===S?void 0:S.userVerification))return new su({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:E})}else{if("InvalidStateError"===E.name)return new su({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:E});if("NotAllowedError"===E.name)return new su({message:E.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:E});if("NotSupportedError"===E.name)return 0===T.pubKeyCredParams.filter(function(e){return"public-key"===e.type}).length?new su({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:E}):new su({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:E});if("SecurityError"===E.name){var M=window.location.hostname;if(!isValidDomain(M))return new su({message:"".concat(window.location.hostname," is an invalid domain"),code:"ERROR_INVALID_DOMAIN",cause:E});if(T.rp.id!==M)return new su({message:'The RP ID "'.concat(T.rp.id,'" is invalid for this domain'),code:"ERROR_INVALID_RP_ID",cause:E})}else if("TypeError"===E.name){if(T.user.id.byteLength<1||T.user.id.byteLength>64)return new su({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:E})}else if("UnknownError"===E.name)return new su({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:E})}return new su({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:E})}function identifyAuthenticationError(e){var l=e.error,_=e.options,S=_.publicKey;if(!S)throw Error("options was missing required publicKey property");if("AbortError"===l.name){if(_.signal instanceof AbortSignal)return new su({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:l})}else{if("NotAllowedError"===l.name)return new su({message:l.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:l});if("SecurityError"===l.name){var E=window.location.hostname;if(!isValidDomain(E))return new su({message:"".concat(window.location.hostname," is an invalid domain"),code:"ERROR_INVALID_DOMAIN",cause:l});if(S.rpId!==E)return new su({message:'The RP ID "'.concat(S.rpId,'" is invalid for this domain'),code:"ERROR_INVALID_RP_ID",cause:l})}else if("UnknownError"===l.name)return new su({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:l})}return new su({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:l})}var __rest=function(e,l){var _={};for(var S in e)Object.prototype.hasOwnProperty.call(e,S)&&l.indexOf(S)<0&&(_[S]=e[S]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var E=0;for(S=Object.getOwnPropertySymbols(e);E<S.length;E++)l.indexOf(S[E])<0&&Object.prototype.propertyIsEnumerable.call(e,S[E])&&(_[S[E]]=e[S[E]])}return _},lu=new(function(){return _createClass3(function WebAuthnAbortService(){_classCallCheck3(this,WebAuthnAbortService)},[{key:"createNewAbortSignal",value:function(){if(this.controller){var e=new Error("Cancelling existing WebAuthn API call for new one");e.name="AbortError",this.controller.abort(e)}var l=new AbortController;return this.controller=l,l.signal}},{key:"cancelCeremony",value:function(){if(this.controller){var e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}])}());function deserializeCredentialCreationOptions(e){if(!e)throw new Error("Credential creation options are required");if("undefined"!=typeof PublicKeyCredential&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&"function"==typeof PublicKeyCredential.parseCreationOptionsFromJSON)return PublicKeyCredential.parseCreationOptionsFromJSON(e);var l=e.challenge,_=e.user,S=e.excludeCredentials,E=__rest(e,["challenge","user","excludeCredentials"]),k=base64UrlToUint8Array(l).buffer,T=Object.assign(Object.assign({},_),{id:base64UrlToUint8Array(_.id).buffer}),M=Object.assign(Object.assign({},E),{challenge:k,user:T});if(S&&S.length>0){M.excludeCredentials=new Array(S.length);for(var R=0;R<S.length;R++){var I=S[R];M.excludeCredentials[R]=Object.assign(Object.assign({},I),{id:base64UrlToUint8Array(I.id).buffer,type:I.type||"public-key",transports:I.transports})}}return M}function deserializeCredentialRequestOptions(e){if(!e)throw new Error("Credential request options are required");if("undefined"!=typeof PublicKeyCredential&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&"function"==typeof PublicKeyCredential.parseRequestOptionsFromJSON)return PublicKeyCredential.parseRequestOptionsFromJSON(e);var l=e.challenge,_=e.allowCredentials,S=__rest(e,["challenge","allowCredentials"]),E=base64UrlToUint8Array(l).buffer,k=Object.assign(Object.assign({},S),{challenge:E});if(_&&_.length>0){k.allowCredentials=new Array(_.length);for(var T=0;T<_.length;T++){var M=_[T];k.allowCredentials[T]=Object.assign(Object.assign({},M),{id:base64UrlToUint8Array(M.id).buffer,type:M.type||"public-key",transports:M.transports})}}return k}function serializeCredentialCreationResponse(e){var l;if("toJSON"in e&&"function"==typeof e.toJSON)return e.toJSON();var _=e;return{id:e.id,rawId:e.id,response:{attestationObject:bytesToBase64URL(new Uint8Array(e.response.attestationObject)),clientDataJSON:bytesToBase64URL(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:null!==(l=_.authenticatorAttachment)&&void 0!==l?l:void 0}}function serializeCredentialRequestResponse(e){var l;if("toJSON"in e&&"function"==typeof e.toJSON)return e.toJSON();var _=e,S=e.getClientExtensionResults(),E=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:bytesToBase64URL(new Uint8Array(E.authenticatorData)),clientDataJSON:bytesToBase64URL(new Uint8Array(E.clientDataJSON)),signature:bytesToBase64URL(new Uint8Array(E.signature)),userHandle:E.userHandle?bytesToBase64URL(new Uint8Array(E.userHandle)):void 0},type:"public-key",clientExtensionResults:S,authenticatorAttachment:null!==(l=_.authenticatorAttachment)&&void 0!==l?l:void 0}}function isValidDomain(e){return"localhost"===e||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function browserSupportsWebAuthn(){var e,l;return!!(isBrowser()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&"function"==typeof(null===(e=null===navigator||void 0===navigator?void 0:navigator.credentials)||void 0===e?void 0:e.create)&&"function"==typeof(null===(l=null===navigator||void 0===navigator?void 0:navigator.credentials)||void 0===l?void 0:l.get))}function createCredential(e){return _createCredential.apply(this,arguments)}function _createCredential(){return(_createCredential=_asyncToGenerator(_regenerator().m(function _callee235(e){var l,_;return _regenerator().w(function(S){for(;;)switch(S.p=S.n){case 0:return S.p=0,S.n=1,navigator.credentials.create(e);case 1:if(l=S.v){S.n=2;break}return S.a(2,{data:null,error:new uu("Empty credential response",l)});case 2:if(l instanceof PublicKeyCredential){S.n=3;break}return S.a(2,{data:null,error:new uu("Browser returned unexpected credential type",l)});case 3:return S.a(2,{data:l,error:null});case 4:return S.p=4,_=S.v,S.a(2,{data:null,error:identifyRegistrationError({error:_,options:e})})}},_callee235,null,[[0,4]])}))).apply(this,arguments)}function getCredential(e){return _getCredential.apply(this,arguments)}function _getCredential(){return(_getCredential=_asyncToGenerator(_regenerator().m(function _callee236(e){var l,_;return _regenerator().w(function(S){for(;;)switch(S.p=S.n){case 0:return S.p=0,S.n=1,navigator.credentials.get(e);case 1:if(l=S.v){S.n=2;break}return S.a(2,{data:null,error:new uu("Empty credential response",l)});case 2:if(l instanceof PublicKeyCredential){S.n=3;break}return S.a(2,{data:null,error:new uu("Browser returned unexpected credential type",l)});case 3:return S.a(2,{data:l,error:null});case 4:return S.p=4,_=S.v,S.a(2,{data:null,error:identifyAuthenticationError({error:_,options:e})})}},_callee236,null,[[0,4]])}))).apply(this,arguments)}var cu={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},hu={userVerification:"preferred",hints:["security-key"]};function deepMerge(){for(var isObject=function(e){return null!==e&&"object"===_typeof3(e)&&!Array.isArray(e)},isArrayBufferLike=function(e){return e instanceof ArrayBuffer||ArrayBuffer.isView(e)},e={},l=arguments.length,_=new Array(l),S=0;S<l;S++)_[S]=arguments[S];for(var E=0,k=_;E<k.length;E++){var T=k[E];if(T)for(var M in T){var R=T[M];if(void 0!==R)if(Array.isArray(R))e[M]=R;else if(isArrayBufferLike(R))e[M]=R;else if(isObject(R)){var I=e[M];isObject(I)?e[M]=deepMerge(I,R):e[M]=deepMerge(R)}else e[M]=R}}return e}function mergeCredentialCreationOptions(e,l){return deepMerge(cu,e,l||{})}function mergeCredentialRequestOptions(e,l){return deepMerge(hu,e,l||{})}var du=function(){return _createClass3(function WebAuthnApi(e){_classCallCheck3(this,WebAuthnApi),this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)},[{key:"_enroll",value:(E=_asyncToGenerator(_regenerator().m(function _callee102(e){return _regenerator().w(function(l){for(;;)if(0===l.n)return l.a(2,this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"})))},_callee102,this)})),function(e){return E.apply(this,arguments)})},{key:"_challenge",value:(S=_asyncToGenerator(_regenerator().m(function _callee103(e,l){var _,S,E,k,T,M,R,I,O,D,L,U,B,z,j,G,H,V,W;return _regenerator().w(function(q){for(;;)switch(q.p=q.n){case 0:return _=e.factorId,S=e.webauthn,E=e.friendlyName,k=e.signal,q.p=1,q.n=2,this.client.mfa.challenge({factorId:_,webauthn:S});case 2:if(T=q.v,M=T.data,R=T.error,M){q.n=3;break}return q.a(2,{data:null,error:R});case 3:I=null!=k?k:lu.createNewAbortSignal(),"create"===M.webauthn.type&&((O=M.webauthn.credential_options.publicKey.user).name||(O.name="".concat(O.id,":").concat(E)),O.displayName||(O.displayName=O.name)),V=M.webauthn.type,q.n="create"===V?4:"request"===V?7:10;break;case 4:return D=mergeCredentialCreationOptions(M.webauthn.credential_options.publicKey,null==l?void 0:l.create),q.n=5,createCredential({publicKey:D,signal:I});case 5:if(L=q.v,U=L.data,B=L.error,!U){q.n=6;break}return q.a(2,{data:{factorId:_,challengeId:M.id,webauthn:{type:M.webauthn.type,credential_response:U}},error:null});case 6:return q.a(2,{data:null,error:B});case 7:return z=mergeCredentialRequestOptions(M.webauthn.credential_options.publicKey,null==l?void 0:l.request),q.n=8,getCredential(Object.assign(Object.assign({},M.webauthn.credential_options),{publicKey:z,signal:I}));case 8:if(j=q.v,G=j.data,H=j.error,!G){q.n=9;break}return q.a(2,{data:{factorId:_,challengeId:M.id,webauthn:{type:M.webauthn.type,credential_response:G}},error:null});case 9:return q.a(2,{data:null,error:H});case 10:q.n=13;break;case 11:if(q.p=11,!isAuthError(W=q.v)){q.n=12;break}return q.a(2,{data:null,error:W});case 12:return q.a(2,{data:null,error:new Ls("Unexpected error in challenge",W)});case 13:return q.a(2)}},_callee103,this,[[1,11]])})),function(e,l){return S.apply(this,arguments)})},{key:"_verify",value:(_=_asyncToGenerator(_regenerator().m(function _callee104(e){var l,_,S;return _regenerator().w(function(E){for(;;)if(0===E.n)return l=e.challengeId,_=e.factorId,S=e.webauthn,E.a(2,this.client.mfa.verify({factorId:_,challengeId:l,webauthn:S}))},_callee104,this)})),function(e){return _.apply(this,arguments)})},{key:"_authenticate",value:(l=_asyncToGenerator(_regenerator().m(function _callee105(e,l){var _,S,E,k,T,M,R,I,O,D,L,U;return _regenerator().w(function(B){for(;;)switch(B.p=B.n){case 0:if(_=e.factorId,S=e.webauthn,E=S.rpId,k=void 0===E?"undefined"!=typeof window?window.location.hostname:void 0:E,T=S.rpOrigins,M=void 0===T?"undefined"!=typeof window?[window.location.origin]:void 0:T,R=S.signal,k){B.n=1;break}return B.a(2,{data:null,error:new Os("rpId is required for WebAuthn authentication")});case 1:if(B.p=1,browserSupportsWebAuthn()){B.n=2;break}return B.a(2,{data:null,error:new Ls("Browser does not support WebAuthn",null)});case 2:return B.n=3,this.challenge({factorId:_,webauthn:{rpId:k,rpOrigins:M},signal:R},{request:l});case 3:if(I=B.v,O=I.data,D=I.error,O){B.n=4;break}return B.a(2,{data:null,error:D});case 4:return L=O.webauthn,B.a(2,this._verify({factorId:_,challengeId:O.challengeId,webauthn:{type:L.type,rpId:k,rpOrigins:M,credential_response:L.credential_response}}));case 5:if(B.p=5,!isAuthError(U=B.v)){B.n=6;break}return B.a(2,{data:null,error:U});case 6:return B.a(2,{data:null,error:new Ls("Unexpected error in authenticate",U)})}},_callee105,this,[[1,5]])})),function(e,_){return l.apply(this,arguments)})},{key:"_register",value:(e=_asyncToGenerator(_regenerator().m(function _callee106(e,l){var _,S,E,k,T,M,R,I,O,D,L,U,B,z=this;return _regenerator().w(function(j){for(;;)switch(j.p=j.n){case 0:if(_=e.friendlyName,S=e.rpId,E=void 0===S?"undefined"!=typeof window?window.location.hostname:void 0:S,k=e.rpOrigins,T=void 0===k?"undefined"!=typeof window?[window.location.origin]:void 0:k,M=e.signal,E){j.n=1;break}return j.a(2,{data:null,error:new Os("rpId is required for WebAuthn registration")});case 1:if(j.p=1,browserSupportsWebAuthn()){j.n=2;break}return j.a(2,{data:null,error:new Ls("Browser does not support WebAuthn",null)});case 2:return j.n=3,this._enroll({friendlyName:_});case 3:if(R=j.v,I=R.data,O=R.error,I){j.n=5;break}return j.n=4,this.client.mfa.listFactors().then(function(e){var l;return null===(l=e.data)||void 0===l?void 0:l.all.find(function(e){return"webauthn"===e.factor_type&&e.friendly_name===_&&"unverified"!==e.status})}).then(function(e){return e?z.client.mfa.unenroll({factorId:null==e?void 0:e.id}):void 0});case 4:return j.a(2,{data:null,error:O});case 5:return j.n=6,this._challenge({factorId:I.id,friendlyName:I.friendly_name,webauthn:{rpId:E,rpOrigins:T},signal:M},{create:l});case 6:if(D=j.v,L=D.data,U=D.error,L){j.n=7;break}return j.a(2,{data:null,error:U});case 7:return j.a(2,this._verify({factorId:I.id,challengeId:L.challengeId,webauthn:{rpId:E,rpOrigins:T,type:L.webauthn.type,credential_response:L.webauthn.credential_response}}));case 8:if(j.p=8,!isAuthError(B=j.v)){j.n=9;break}return j.a(2,{data:null,error:B});case 9:return j.a(2,{data:null,error:new Ls("Unexpected error in register",B)})}},_callee106,this,[[1,8]])})),function(l,_){return e.apply(this,arguments)})}]);var e,l,_,S,E}();!function(){if("object"!==("undefined"==typeof globalThis?"undefined":_typeof3(globalThis)))try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(oo){"undefined"!=typeof self&&(self.globalThis=self)}}();var fu={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Ms,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};function lockNoOp(e,l,_){return _lockNoOp.apply(this,arguments)}function _lockNoOp(){return(_lockNoOp=_asyncToGenerator(_regenerator().m(function _callee237(e,l,_){return _regenerator().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,_();case 1:return e.a(2,e.v)}},_callee237)}))).apply(this,arguments)}var pu={},vu=function(){return _createClass3(function GoTrueClient(e){var l,_,S=this;_classCallCheck3(this,GoTrueClient),this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=GoTrueClient.nextInstanceID,GoTrueClient.nextInstanceID+=1,this.instanceID>0&&isBrowser();var E=Object.assign(Object.assign({},fu),e);if(this.logDebugMessages=!!E.debug,"function"==typeof E.debug&&(this.logger=E.debug),this.persistSession=E.persistSession,this.storageKey=E.storageKey,this.autoRefreshToken=E.autoRefreshToken,this.admin=new ru({url:E.url,headers:E.headers,fetch:E.fetch}),this.url=E.url,this.headers=E.headers,this.fetch=resolveFetch(E.fetch),this.lock=E.lock||lockNoOp,this.detectSessionInUrl=E.detectSessionInUrl,this.flowType=E.flowType,this.hasCustomAuthorizationHeader=E.hasCustomAuthorizationHeader,E.lock?this.lock=E.lock:isBrowser()&&(null===(l=null===globalThis||void 0===globalThis?void 0:globalThis.navigator)||void 0===l?void 0:l.locks)?this.lock=navigatorLock:this.lock=lockNoOp,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new du(this)},this.persistSession?(E.storage?this.storage=E.storage:supportsLocalStorage()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=memoryLocalStorageAdapter(this.memoryStorage)),E.userStorage&&(this.userStorage=E.userStorage)):(this.memoryStorage={},this.storage=memoryLocalStorageAdapter(this.memoryStorage)),isBrowser()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(oo){}null===(_=this.broadcastChannel)||void 0===_||_.addEventListener("message",function(){var e=_asyncToGenerator(_regenerator().m(function _callee107(e){return _regenerator().w(function(l){for(;;)switch(l.n){case 0:return S._debug("received broadcast notification from other tab or client",e),l.n=1,S._notifyAllSubscribers(e.data.event,e.data.session,!1);case 1:return l.a(2)}},_callee107)}));return function(l){return e.apply(this,arguments)}}())}this.initialize()},[{key:"jwks",get:function(){var e,l;return null!==(l=null===(e=pu[this.storageKey])||void 0===e?void 0:e.jwks)&&void 0!==l?l:{keys:[]}},set:function(e){pu[this.storageKey]=Object.assign(Object.assign({},pu[this.storageKey]),{jwks:e})}},{key:"jwks_cached_at",get:function(){var e,l;return null!==(l=null===(e=pu[this.storageKey])||void 0===e?void 0:e.cachedAt)&&void 0!==l?l:Number.MIN_SAFE_INTEGER},set:function(e){pu[this.storageKey]=Object.assign(Object.assign({},pu[this.storageKey]),{cachedAt:e})}},{key:"_debug",value:function(){if(this.logDebugMessages){for(var e=arguments.length,l=new Array(e),_=0;_<e;_++)l[_]=arguments[_];this.logger.apply(this,["GoTrueClient@".concat(this.instanceID," (").concat(As,") ").concat((new Date).toISOString())].concat(l))}return this}},{key:"initialize",value:(Le=_asyncToGenerator(_regenerator().m(function _callee110(){var e=this;return _regenerator().w(function(l){for(;;)switch(l.n){case 0:if(!this.initializePromise){l.n=2;break}return l.n=1,this.initializePromise;case 1:case 3:return l.a(2,l.v);case 2:return this.initializePromise=_asyncToGenerator(_regenerator().m(function _callee109(){return _regenerator().w(function(l){for(;;)switch(l.n){case 0:return l.n=1,e._acquireLock(-1,_asyncToGenerator(_regenerator().m(function _callee108(){return _regenerator().w(function(l){for(;;)switch(l.n){case 0:return l.n=1,e._initialize();case 1:return l.a(2,l.v)}},_callee108)})));case 1:return l.a(2,l.v)}},_callee109)}))(),l.n=3,this.initializePromise}},_callee110,this)})),function(){return Le.apply(this,arguments)})},{key:"_initialize",value:(De=_asyncToGenerator(_regenerator().m(function _callee112(){var e,l,_,S,E,k,T,M,R,I,O=this;return _regenerator().w(function(D){for(;;)switch(D.p=D.n){case 0:if(D.p=0,l=parseParametersFromURL(window.location.href),_="none",!this._isImplicitGrantCallback(l)){D.n=1;break}_="implicit",D.n=3;break;case 1:return D.n=2,this._isPKCECallback(l);case 2:if(!D.v){D.n=3;break}_="pkce";case 3:if(!isBrowser()||!this.detectSessionInUrl||"none"===_){D.n=9;break}return D.n=4,this._getSessionFromURL(l,_);case 4:if(S=D.v,E=S.data,!(k=S.error)){D.n=7;break}if(this._debug("#_initialize()","error detecting session from URL",k),!isAuthImplicitGrantRedirectError(k)){D.n=5;break}if("identity_already_exists"!==(T=null===(e=k.details)||void 0===e?void 0:e.code)&&"identity_not_found"!==T&&"single_identity_not_deletable"!==T){D.n=5;break}return D.a(2,{error:k});case 5:return D.n=6,this._removeSession();case 6:return D.a(2,{error:k});case 7:return M=E.session,R=E.redirectType,this._debug("#_initialize()","detected session in URL",M,"redirect type",R),D.n=8,this._saveSession(M);case 8:return setTimeout(_asyncToGenerator(_regenerator().m(function _callee111(){return _regenerator().w(function(e){for(;;)switch(e.n){case 0:if("recovery"!==R){e.n=2;break}return e.n=1,O._notifyAllSubscribers("PASSWORD_RECOVERY",M);case 1:e.n=3;break;case 2:return e.n=3,O._notifyAllSubscribers("SIGNED_IN",M);case 3:return e.a(2)}},_callee111)})),0),D.a(2,{error:null});case 9:return D.n=10,this._recoverAndRefresh();case 10:return D.a(2,{error:null});case 11:if(D.p=11,!isAuthError(I=D.v)){D.n=12;break}return D.a(2,{error:I});case 12:return D.a(2,{error:new Ls("Unexpected error during initialization",I)});case 13:return D.p=13,D.n=14,this._handleVisibilityChange();case 14:return this._debug("#_initialize()","end"),D.f(13);case 15:return D.a(2)}},_callee112,this,[[0,11,13,15]])})),function(){return De.apply(this,arguments)})},{key:"signInAnonymously",value:(Oe=_asyncToGenerator(_regenerator().m(function _callee113(e){var l,_,S,E,k,T,M,R,I;return _regenerator().w(function(O){for(;;)switch(O.p=O.n){case 0:return O.p=0,O.n=1,_request(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,body:{data:null!==(_=null===(l=null==e?void 0:e.options)||void 0===l?void 0:l.data)&&void 0!==_?_:{},gotrue_meta_security:{captcha_token:null===(S=null==e?void 0:e.options)||void 0===S?void 0:S.captchaToken}},xform:_sessionResponse});case 1:if(E=O.v,k=E.data,!(T=E.error)&&k){O.n=2;break}return O.a(2,{data:{user:null,session:null},error:T});case 2:if(M=k.session,R=k.user,!k.session){O.n=4;break}return O.n=3,this._saveSession(k.session);case 3:return O.n=4,this._notifyAllSubscribers("SIGNED_IN",M);case 4:return O.a(2,{data:{user:R,session:M},error:null});case 5:if(O.p=5,!isAuthError(I=O.v)){O.n=6;break}return O.a(2,{data:{user:null,session:null},error:I});case 6:throw I;case 7:return O.a(2)}},_callee113,this,[[0,5]])})),function(e){return Oe.apply(this,arguments)})},{key:"signUp",value:(Pe=_asyncToGenerator(_regenerator().m(function _callee114(e){var l,_,S,E,k,T,M,R,I,O,D,L,U,B,z,j,G,H,V,W;return _regenerator().w(function(q){for(;;)switch(q.p=q.n){case 0:if(q.p=0,!("email"in e)){q.n=4;break}if(k=e.email,T=e.password,M=e.options,R=null,I=null,"pkce"!==this.flowType){q.n=2;break}return q.n=1,getCodeChallengeAndMethod(this.storage,this.storageKey);case 1:O=q.v,D=_slicedToArray(O,2),R=D[0],I=D[1];case 2:return q.n=3,_request(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,redirectTo:null==M?void 0:M.emailRedirectTo,body:{email:k,password:T,data:null!==(l=null==M?void 0:M.data)&&void 0!==l?l:{},gotrue_meta_security:{captcha_token:null==M?void 0:M.captchaToken},code_challenge:R,code_challenge_method:I},xform:_sessionResponse});case 3:E=q.v,q.n=7;break;case 4:if(!("phone"in e)){q.n=6;break}return L=e.phone,U=e.password,B=e.options,q.n=5,_request(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,body:{phone:L,password:U,data:null!==(_=null==B?void 0:B.data)&&void 0!==_?_:{},channel:null!==(S=null==B?void 0:B.channel)&&void 0!==S?S:"sms",gotrue_meta_security:{captcha_token:null==B?void 0:B.captchaToken}},xform:_sessionResponse});case 5:E=q.v,q.n=7;break;case 6:throw new Bs("You must provide either an email or phone number and a password");case 7:if(j=(z=E).data,!(G=z.error)&&j){q.n=8;break}return q.a(2,{data:{user:null,session:null},error:G});case 8:if(H=j.session,V=j.user,!j.session){q.n=10;break}return q.n=9,this._saveSession(j.session);case 9:return q.n=10,this._notifyAllSubscribers("SIGNED_IN",H);case 10:return q.a(2,{data:{user:V,session:H},error:null});case 11:if(q.p=11,!isAuthError(W=q.v)){q.n=12;break}return q.a(2,{data:{user:null,session:null},error:W});case 12:throw W;case 13:return q.a(2)}},_callee114,this,[[0,11]])})),function(e){return Pe.apply(this,arguments)})},{key:"signInWithPassword",value:(Ie=_asyncToGenerator(_regenerator().m(function _callee115(e){var l,_,S,E,k,T,M,R,I,O,D;return _regenerator().w(function(L){for(;;)switch(L.p=L.n){case 0:if(L.p=0,!("email"in e)){L.n=2;break}return _=e.email,S=e.password,E=e.options,L.n=1,_request(this.fetch,"POST","".concat(this.url,"/token?grant_type=password"),{headers:this.headers,body:{email:_,password:S,gotrue_meta_security:{captcha_token:null==E?void 0:E.captchaToken}},xform:_sessionResponsePassword});case 1:case 3:l=L.v,L.n=5;break;case 2:if(!("phone"in e)){L.n=4;break}return k=e.phone,T=e.password,M=e.options,L.n=3,_request(this.fetch,"POST","".concat(this.url,"/token?grant_type=password"),{headers:this.headers,body:{phone:k,password:T,gotrue_meta_security:{captcha_token:null==M?void 0:M.captchaToken}},xform:_sessionResponsePassword});case 4:throw new Bs("You must provide either an email or phone number and a password");case 5:if(I=(R=l).data,!(O=R.error)){L.n=6;break}return L.a(2,{data:{user:null,session:null},error:O});case 6:if(I&&I.session&&I.user){L.n=7;break}return L.a(2,{data:{user:null,session:null},error:new Ns});case 7:if(!I.session){L.n=9;break}return L.n=8,this._saveSession(I.session);case 8:return L.n=9,this._notifyAllSubscribers("SIGNED_IN",I.session);case 9:return L.a(2,{data:Object.assign({user:I.user,session:I.session},I.weak_password?{weakPassword:I.weak_password}:null),error:O});case 10:if(L.p=10,!isAuthError(D=L.v)){L.n=11;break}return L.a(2,{data:{user:null,session:null},error:D});case 11:throw D;case 12:return L.a(2)}},_callee115,this,[[0,10]])})),function(e){return Ie.apply(this,arguments)})},{key:"signInWithOAuth",value:(Re=_asyncToGenerator(_regenerator().m(function _callee116(e){var l,_,S,E;return _regenerator().w(function(k){for(;;)switch(k.n){case 0:return k.n=1,this._handleProviderSignIn(e.provider,{redirectTo:null===(l=e.options)||void 0===l?void 0:l.redirectTo,scopes:null===(_=e.options)||void 0===_?void 0:_.scopes,queryParams:null===(S=e.options)||void 0===S?void 0:S.queryParams,skipBrowserRedirect:null===(E=e.options)||void 0===E?void 0:E.skipBrowserRedirect});case 1:return k.a(2,k.v)}},_callee116,this)})),function(e){return Re.apply(this,arguments)})},{key:"exchangeCodeForSession",value:(Me=_asyncToGenerator(_regenerator().m(function _callee118(e){var l=this;return _regenerator().w(function(_){for(;;)switch(_.n){case 0:return _.n=1,this.initializePromise;case 1:return _.a(2,this._acquireLock(-1,_asyncToGenerator(_regenerator().m(function _callee117(){return _regenerator().w(function(_){for(;;)if(0===_.n)return _.a(2,l._exchangeCodeForSession(e))},_callee117)}))))}},_callee118,this)})),function(e){return Me.apply(this,arguments)})},{key:"signInWithWeb3",value:(Te=_asyncToGenerator(_regenerator().m(function _callee119(e){var l,_;return _regenerator().w(function(S){for(;;)switch(S.n){case 0:l=e.chain,_=l,S.n="ethereum"===_?1:"solana"===_?3:5;break;case 1:return S.n=2,this.signInWithEthereum(e);case 2:case 4:return S.a(2,S.v);case 3:return S.n=4,this.signInWithSolana(e);case 5:throw new Error('@supabase/auth-js: Unsupported chain "'.concat(l,'"'));case 6:return S.a(2)}},_callee119,this)})),function(e){return Te.apply(this,arguments)})},{key:"signInWithEthereum",value:(Ce=_asyncToGenerator(_regenerator().m(function _callee120(e){var l,_,S,E,k,T,M,R,I,O,D,L,U,B,z,j,G,H,V,W,q,X,K,Y,J,Q,Z,$;return _regenerator().w(function(ee){for(;;)switch(ee.p=ee.n){case 0:if(!("message"in e)){ee.n=1;break}L=e.message,U=e.signature,ee.n=12;break;case 1:if(e.chain,B=e.wallet,z=e.statement,j=e.options,isBrowser()){ee.n=3;break}if("object"===_typeof3(B)&&(null==j?void 0:j.url)){ee.n=2;break}throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");case 2:G=B,ee.n=6;break;case 3:if("object"!==_typeof3(B)){ee.n=4;break}G=B,ee.n=6;break;case 4:if(!("ethereum"in(H=window))||"object"!==_typeof3(H.ethereum)||!("request"in H.ethereum)||"function"!=typeof H.ethereum.request){ee.n=5;break}G=H.ethereum,ee.n=6;break;case 5:throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.");case 6:return V=new URL(null!==(l=null==j?void 0:j.url)&&void 0!==l?l:window.location.href),ee.n=7,G.request({method:"eth_requestAccounts"}).then(function(e){return e}).catch(function(){throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});case 7:if((W=ee.v)&&0!==W.length){ee.n=8;break}throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");case 8:if(q=getAddress(W[0]),X=null===(_=null==j?void 0:j.signInWithEthereum)||void 0===_?void 0:_.chainId){ee.n=10;break}return ee.n=9,G.request({method:"eth_chainId"});case 9:K=ee.v,X=fromHex(K);case 10:return Y={domain:V.host,address:q,statement:z,uri:V.href,version:"1",chainId:X,nonce:null===(S=null==j?void 0:j.signInWithEthereum)||void 0===S?void 0:S.nonce,issuedAt:null!==(k=null===(E=null==j?void 0:j.signInWithEthereum)||void 0===E?void 0:E.issuedAt)&&void 0!==k?k:new Date,expirationTime:null===(T=null==j?void 0:j.signInWithEthereum)||void 0===T?void 0:T.expirationTime,notBefore:null===(M=null==j?void 0:j.signInWithEthereum)||void 0===M?void 0:M.notBefore,requestId:null===(R=null==j?void 0:j.signInWithEthereum)||void 0===R?void 0:R.requestId,resources:null===(I=null==j?void 0:j.signInWithEthereum)||void 0===I?void 0:I.resources},L=createSiweMessage(Y),ee.n=11,G.request({method:"personal_sign",params:[toHex(L),q]});case 11:U=ee.v;case 12:return ee.p=12,ee.n=13,_request(this.fetch,"POST","".concat(this.url,"/token?grant_type=web3"),{headers:this.headers,body:Object.assign({chain:"ethereum",message:L,signature:U},(null===(O=e.options)||void 0===O?void 0:O.captchaToken)?{gotrue_meta_security:{captcha_token:null===(D=e.options)||void 0===D?void 0:D.captchaToken}}:null),xform:_sessionResponse});case 13:if(J=ee.v,Q=J.data,!(Z=J.error)){ee.n=14;break}throw Z;case 14:if(Q&&Q.session&&Q.user){ee.n=15;break}return ee.a(2,{data:{user:null,session:null},error:new Ns});case 15:if(!Q.session){ee.n=17;break}return ee.n=16,this._saveSession(Q.session);case 16:return ee.n=17,this._notifyAllSubscribers("SIGNED_IN",Q.session);case 17:return ee.a(2,{data:Object.assign({},Q),error:Z});case 18:if(ee.p=18,!isAuthError($=ee.v)){ee.n=19;break}return ee.a(2,{data:{user:null,session:null},error:$});case 19:throw $;case 20:return ee.a(2)}},_callee120,this,[[12,18]])})),function(e){return Ce.apply(this,arguments)})},{key:"signInWithSolana",value:(Ae=_asyncToGenerator(_regenerator().m(function _callee121(e){var l,_,S,E,k,T,M,R,I,O,D,L,U,B,z,j,G,H,V,W,q,X,K,Y,J,Q,Z;return _regenerator().w(function($){for(;;)switch($.p=$.n){case 0:if(!("message"in e)){$.n=1;break}U=e.message,B=e.signature,$.n=17;break;case 1:if(e.chain,z=e.wallet,j=e.statement,G=e.options,isBrowser()){$.n=3;break}if("object"===_typeof3(z)&&(null==G?void 0:G.url)){$.n=2;break}throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");case 2:H=z,$.n=6;break;case 3:if("object"!==_typeof3(z)){$.n=4;break}H=z,$.n=6;break;case 4:if(!("solana"in(V=window))||"object"!==_typeof3(V.solana)||!("signIn"in V.solana&&"function"==typeof V.solana.signIn||"signMessage"in V.solana&&"function"==typeof V.solana.signMessage)){$.n=5;break}H=V.solana,$.n=6;break;case 5:throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.");case 6:if(W=new URL(null!==(l=null==G?void 0:G.url)&&void 0!==l?l:window.location.href),!("signIn"in H)||!H.signIn){$.n=13;break}return $.n=7,H.signIn(Object.assign(Object.assign(Object.assign({issuedAt:(new Date).toISOString()},null==G?void 0:G.signInWithSolana),{version:"1",domain:W.host,uri:W.href}),j?{statement:j}:null));case 7:if(q=$.v,!Array.isArray(q)||!q[0]||"object"!==_typeof3(q[0])){$.n=8;break}X=q[0],$.n=10;break;case 8:if(!(q&&"object"===_typeof3(q)&&"signedMessage"in q&&"signature"in q)){$.n=9;break}X=q,$.n=10;break;case 9:throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");case 10:if(!("signedMessage"in X&&"signature"in X&&("string"==typeof X.signedMessage||X.signedMessage instanceof Uint8Array)&&X.signature instanceof Uint8Array)){$.n=11;break}U="string"==typeof X.signedMessage?X.signedMessage:(new TextDecoder).decode(X.signedMessage),B=X.signature,$.n=12;break;case 11:throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields");case 12:$.n=17;break;case 13:if("signMessage"in H&&"function"==typeof H.signMessage&&"publicKey"in H&&"object"===_typeof3(H)&&H.publicKey&&"toBase58"in H.publicKey&&"function"==typeof H.publicKey.toBase58){$.n=14;break}throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");case 14:return U=["".concat(W.host," wants you to sign in with your Solana account:"),H.publicKey.toBase58()].concat(_toConsumableArray3(j?["",j,""]:[""]),["Version: 1","URI: ".concat(W.href),"Issued At: ".concat(null!==(S=null===(_=null==G?void 0:G.signInWithSolana)||void 0===_?void 0:_.issuedAt)&&void 0!==S?S:(new Date).toISOString())],_toConsumableArray3((null===(E=null==G?void 0:G.signInWithSolana)||void 0===E?void 0:E.notBefore)?["Not Before: ".concat(G.signInWithSolana.notBefore)]:[]),_toConsumableArray3((null===(k=null==G?void 0:G.signInWithSolana)||void 0===k?void 0:k.expirationTime)?["Expiration Time: ".concat(G.signInWithSolana.expirationTime)]:[]),_toConsumableArray3((null===(T=null==G?void 0:G.signInWithSolana)||void 0===T?void 0:T.chainId)?["Chain ID: ".concat(G.signInWithSolana.chainId)]:[]),_toConsumableArray3((null===(M=null==G?void 0:G.signInWithSolana)||void 0===M?void 0:M.nonce)?["Nonce: ".concat(G.signInWithSolana.nonce)]:[]),_toConsumableArray3((null===(R=null==G?void 0:G.signInWithSolana)||void 0===R?void 0:R.requestId)?["Request ID: ".concat(G.signInWithSolana.requestId)]:[]),_toConsumableArray3((null===(O=null===(I=null==G?void 0:G.signInWithSolana)||void 0===I?void 0:I.resources)||void 0===O?void 0:O.length)?["Resources"].concat(_toConsumableArray3(G.signInWithSolana.resources.map(function(e){return"- ".concat(e)}))):[])).join("\n"),$.n=15,H.signMessage((new TextEncoder).encode(U),"utf8");case 15:if((K=$.v)&&K instanceof Uint8Array){$.n=16;break}throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");case 16:B=K;case 17:return $.p=17,$.n=18,_request(this.fetch,"POST","".concat(this.url,"/token?grant_type=web3"),{headers:this.headers,body:Object.assign({chain:"solana",message:U,signature:bytesToBase64URL(B)},(null===(D=e.options)||void 0===D?void 0:D.captchaToken)?{gotrue_meta_security:{captcha_token:null===(L=e.options)||void 0===L?void 0:L.captchaToken}}:null),xform:_sessionResponse});case 18:if(Y=$.v,J=Y.data,!(Q=Y.error)){$.n=19;break}throw Q;case 19:if(J&&J.session&&J.user){$.n=20;break}return $.a(2,{data:{user:null,session:null},error:new Ns});case 20:if(!J.session){$.n=22;break}return $.n=21,this._saveSession(J.session);case 21:return $.n=22,this._notifyAllSubscribers("SIGNED_IN",J.session);case 22:return $.a(2,{data:Object.assign({},J),error:Q});case 23:if($.p=23,!isAuthError(Z=$.v)){$.n=24;break}return $.a(2,{data:{user:null,session:null},error:Z});case 24:throw Z;case 25:return $.a(2)}},_callee121,this,[[17,23]])})),function(e){return Ae.apply(this,arguments)})},{key:"_exchangeCodeForSession",value:(ke=_asyncToGenerator(_regenerator().m(function _callee122(e){var l,_,S,E,k,T,M,R,I;return _regenerator().w(function(O){for(;;)switch(O.p=O.n){case 0:return O.n=1,Js(this.storage,"".concat(this.storageKey,"-code-verifier"));case 1:return l=O.v,_=(null!=l?l:"").split("/"),S=_slicedToArray(_,2),E=S[0],k=S[1],O.p=2,O.n=3,_request(this.fetch,"POST","".concat(this.url,"/token?grant_type=pkce"),{headers:this.headers,body:{auth_code:e,code_verifier:E},xform:_sessionResponse});case 3:return T=O.v,M=T.data,R=T.error,O.n=4,Qs(this.storage,"".concat(this.storageKey,"-code-verifier"));case 4:if(!R){O.n=5;break}throw R;case 5:if(M&&M.session&&M.user){O.n=6;break}return O.a(2,{data:{user:null,session:null,redirectType:null},error:new Ns});case 6:if(!M.session){O.n=8;break}return O.n=7,this._saveSession(M.session);case 7:return O.n=8,this._notifyAllSubscribers("SIGNED_IN",M.session);case 8:return O.a(2,{data:Object.assign(Object.assign({},M),{redirectType:null!=k?k:null}),error:R});case 9:if(O.p=9,!isAuthError(I=O.v)){O.n=10;break}return O.a(2,{data:{user:null,session:null,redirectType:null},error:I});case 10:throw I;case 11:return O.a(2)}},_callee122,this,[[2,9]])})),function(e){return ke.apply(this,arguments)})},{key:"signInWithIdToken",value:(Ee=_asyncToGenerator(_regenerator().m(function _callee123(e){var l,_,S,E,k,T,M,R,I;return _regenerator().w(function(O){for(;;)switch(O.p=O.n){case 0:return O.p=0,l=e.options,_=e.provider,S=e.token,E=e.access_token,k=e.nonce,O.n=1,_request(this.fetch,"POST","".concat(this.url,"/token?grant_type=id_token"),{headers:this.headers,body:{provider:_,id_token:S,access_token:E,nonce:k,gotrue_meta_security:{captcha_token:null==l?void 0:l.captchaToken}},xform:_sessionResponse});case 1:if(T=O.v,M=T.data,!(R=T.error)){O.n=2;break}return O.a(2,{data:{user:null,session:null},error:R});case 2:if(M&&M.session&&M.user){O.n=3;break}return O.a(2,{data:{user:null,session:null},error:new Ns});case 3:if(!M.session){O.n=5;break}return O.n=4,this._saveSession(M.session);case 4:return O.n=5,this._notifyAllSubscribers("SIGNED_IN",M.session);case 5:return O.a(2,{data:M,error:R});case 6:if(O.p=6,!isAuthError(I=O.v)){O.n=7;break}return O.a(2,{data:{user:null,session:null},error:I});case 7:throw I;case 8:return O.a(2)}},_callee123,this,[[0,6]])})),function(e){return Ee.apply(this,arguments)})},{key:"signInWithOtp",value:(xe=_asyncToGenerator(_regenerator().m(function _callee124(e){var l,_,S,E,k,T,M,R,I,O,D,L,U,B,z,j,G,H,V;return _regenerator().w(function(W){for(;;)switch(W.p=W.n){case 0:if(W.p=0,!("email"in e)){W.n=4;break}if(T=e.email,M=e.options,R=null,I=null,"pkce"!==this.flowType){W.n=2;break}return W.n=1,getCodeChallengeAndMethod(this.storage,this.storageKey);case 1:O=W.v,D=_slicedToArray(O,2),R=D[0],I=D[1];case 2:return W.n=3,_request(this.fetch,"POST","".concat(this.url,"/otp"),{headers:this.headers,body:{email:T,data:null!==(l=null==M?void 0:M.data)&&void 0!==l?l:{},create_user:null===(_=null==M?void 0:M.shouldCreateUser)||void 0===_||_,gotrue_meta_security:{captcha_token:null==M?void 0:M.captchaToken},code_challenge:R,code_challenge_method:I},redirectTo:null==M?void 0:M.emailRedirectTo});case 3:return L=W.v,U=L.error,W.a(2,{data:{user:null,session:null},error:U});case 4:if(!("phone"in e)){W.n=6;break}return B=e.phone,z=e.options,W.n=5,_request(this.fetch,"POST","".concat(this.url,"/otp"),{headers:this.headers,body:{phone:B,data:null!==(S=null==z?void 0:z.data)&&void 0!==S?S:{},create_user:null===(E=null==z?void 0:z.shouldCreateUser)||void 0===E||E,gotrue_meta_security:{captcha_token:null==z?void 0:z.captchaToken},channel:null!==(k=null==z?void 0:z.channel)&&void 0!==k?k:"sms"}});case 5:return j=W.v,G=j.data,H=j.error,W.a(2,{data:{user:null,session:null,messageId:null==G?void 0:G.message_id},error:H});case 6:throw new Bs("You must provide either an email or phone number.");case 7:if(W.p=7,!isAuthError(V=W.v)){W.n=8;break}return W.a(2,{data:{user:null,session:null},error:V});case 8:throw V;case 9:return W.a(2)}},_callee124,this,[[0,7]])})),function(e){return xe.apply(this,arguments)})},{key:"verifyOtp",value:(we=_asyncToGenerator(_regenerator().m(function _callee125(e){var l,_,S,E,k,T,M,R,I,O;return _regenerator().w(function(D){for(;;)switch(D.p=D.n){case 0:return D.p=0,S=void 0,E=void 0,"options"in e&&(S=null===(l=e.options)||void 0===l?void 0:l.redirectTo,E=null===(_=e.options)||void 0===_?void 0:_.captchaToken),D.n=1,_request(this.fetch,"POST","".concat(this.url,"/verify"),{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:E}}),redirectTo:S,xform:_sessionResponse});case 1:if(k=D.v,T=k.data,!(M=k.error)){D.n=2;break}throw M;case 2:if(T){D.n=3;break}throw new Error("An error occurred on token verification.");case 3:if(R=T.session,I=T.user,!(null==R?void 0:R.access_token)){D.n=5;break}return D.n=4,this._saveSession(R);case 4:return D.n=5,this._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",R);case 5:return D.a(2,{data:{user:I,session:R},error:null});case 6:if(D.p=6,!isAuthError(O=D.v)){D.n=7;break}return D.a(2,{data:{user:null,session:null},error:O});case 7:throw O;case 8:return D.a(2)}},_callee125,this,[[0,6]])})),function(e){return we.apply(this,arguments)})},{key:"signInWithSSO",value:(Se=_asyncToGenerator(_regenerator().m(function _callee126(e){var l,_,S,E,k,T,M,R;return _regenerator().w(function(I){for(;;)switch(I.p=I.n){case 0:if(I.p=0,E=null,k=null,"pkce"!==this.flowType){I.n=2;break}return I.n=1,getCodeChallengeAndMethod(this.storage,this.storageKey);case 1:T=I.v,M=_slicedToArray(T,2),E=M[0],k=M[1];case 2:return I.n=3,_request(this.fetch,"POST","".concat(this.url,"/sso"),{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(_=null===(l=e.options)||void 0===l?void 0:l.redirectTo)&&void 0!==_?_:void 0}),(null===(S=null==e?void 0:e.options)||void 0===S?void 0:S.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:E,code_challenge_method:k}),headers:this.headers,xform:_ssoResponse});case 3:return I.a(2,I.v);case 4:if(I.p=4,!isAuthError(R=I.v)){I.n=5;break}return I.a(2,{data:null,error:R});case 5:throw R;case 6:return I.a(2)}},_callee126,this,[[0,4]])})),function(e){return Se.apply(this,arguments)})},{key:"reauthenticate",value:(be=_asyncToGenerator(_regenerator().m(function _callee128(){var e=this;return _regenerator().w(function(l){for(;;)switch(l.n){case 0:return l.n=1,this.initializePromise;case 1:return l.n=2,this._acquireLock(-1,_asyncToGenerator(_regenerator().m(function _callee127(){return _regenerator().w(function(l){for(;;)switch(l.n){case 0:return l.n=1,e._reauthenticate();case 1:return l.a(2,l.v)}},_callee127)})));case 2:return l.a(2,l.v)}},_callee128,this)})),function(){return be.apply(this,arguments)})},{key:"_reauthenticate",value:(_e=_asyncToGenerator(_regenerator().m(function _callee130(){var e,l=this;return _regenerator().w(function(_){for(;;)switch(_.p=_.n){case 0:return _.p=0,_.n=1,this._useSession(function(){var e=_asyncToGenerator(_regenerator().m(function _callee129(e){var _,S,E,k;return _regenerator().w(function(T){for(;;)switch(T.n){case 0:if(_=e.data.session,!(S=e.error)){T.n=1;break}throw S;case 1:if(_){T.n=2;break}throw new Fs;case 2:return T.n=3,_request(l.fetch,"GET","".concat(l.url,"/reauthenticate"),{headers:l.headers,jwt:_.access_token});case 3:return E=T.v,k=E.error,T.a(2,{data:{user:null,session:null},error:k})}},_callee129)}));return function(l){return e.apply(this,arguments)}}());case 1:return _.a(2,_.v);case 2:if(_.p=2,!isAuthError(e=_.v)){_.n=3;break}return _.a(2,{data:{user:null,session:null},error:e});case 3:throw e;case 4:return _.a(2)}},_callee130,this,[[0,2]])})),function(){return _e.apply(this,arguments)})},{key:"resend",value:(ye=_asyncToGenerator(_regenerator().m(function _callee131(e){var l,_,S,E,k,T,M,R,I,O,D,L,U;return _regenerator().w(function(B){for(;;)switch(B.p=B.n){case 0:if(B.p=0,l="".concat(this.url,"/resend"),!("email"in e)){B.n=2;break}return _=e.email,S=e.type,E=e.options,B.n=1,_request(this.fetch,"POST",l,{headers:this.headers,body:{email:_,type:S,gotrue_meta_security:{captcha_token:null==E?void 0:E.captchaToken}},redirectTo:null==E?void 0:E.emailRedirectTo});case 1:return k=B.v,T=k.error,B.a(2,{data:{user:null,session:null},error:T});case 2:if(!("phone"in e)){B.n=4;break}return M=e.phone,R=e.type,I=e.options,B.n=3,_request(this.fetch,"POST",l,{headers:this.headers,body:{phone:M,type:R,gotrue_meta_security:{captcha_token:null==I?void 0:I.captchaToken}}});case 3:return O=B.v,D=O.data,L=O.error,B.a(2,{data:{user:null,session:null,messageId:null==D?void 0:D.message_id},error:L});case 4:throw new Bs("You must provide either an email or phone number and a type");case 5:if(B.p=5,!isAuthError(U=B.v)){B.n=6;break}return B.a(2,{data:{user:null,session:null},error:U});case 6:throw U;case 7:return B.a(2)}},_callee131,this,[[0,5]])})),function(e){return ye.apply(this,arguments)})},{key:"getSession",value:(me=_asyncToGenerator(_regenerator().m(function _callee134(){var e,l=this;return _regenerator().w(function(_){for(;;)switch(_.n){case 0:return _.n=1,this.initializePromise;case 1:return _.n=2,this._acquireLock(-1,_asyncToGenerator(_regenerator().m(function _callee133(){return _regenerator().w(function(e){for(;;)if(0===e.n)return e.a(2,l._useSession(function(){var e=_asyncToGenerator(_regenerator().m(function _callee132(e){return _regenerator().w(function(l){for(;;)if(0===l.n)return l.a(2,e)},_callee132)}));return function(l){return e.apply(this,arguments)}}()))},_callee133)})));case 2:return e=_.v,_.a(2,e)}},_callee134,this)})),function(){return me.apply(this,arguments)})},{key:"_acquireLock",value:(ge=_asyncToGenerator(_regenerator().m(function _callee139(e,l){var _,S,E=this;return _regenerator().w(function(k){for(;;)switch(k.p=k.n){case 0:if(this._debug("#_acquireLock","begin",e),k.p=1,!this.lockAcquired){k.n=2;break}return _=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),S=_asyncToGenerator(_regenerator().m(function _callee135(){return _regenerator().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,_;case 1:return e.n=2,l();case 2:return e.a(2,e.v)}},_callee135)}))(),this.pendingInLock.push(_asyncToGenerator(_regenerator().m(function _callee136(){return _regenerator().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,S;case 1:e.n=3;break;case 2:e.p=2,e.v;case 3:return e.a(2)}},_callee136,null,[[0,2]])}))()),k.a(2,S);case 2:return k.n=3,this.lock("lock:".concat(this.storageKey),e,_asyncToGenerator(_regenerator().m(function _callee138(){var e,_;return _regenerator().w(function(S){for(;;)switch(S.p=S.n){case 0:return E._debug("#_acquireLock","lock acquired for storage key",E.storageKey),S.p=1,E.lockAcquired=!0,e=l(),E.pendingInLock.push(_asyncToGenerator(_regenerator().m(function _callee137(){return _regenerator().w(function(l){for(;;)switch(l.p=l.n){case 0:return l.p=0,l.n=1,e;case 1:l.n=3;break;case 2:l.p=2,l.v;case 3:return l.a(2)}},_callee137,null,[[0,2]])}))()),S.n=2,e;case 2:if(!E.pendingInLock.length){S.n=4;break}return _=_toConsumableArray3(E.pendingInLock),S.n=3,Promise.all(_);case 3:E.pendingInLock.splice(0,_.length),S.n=2;break;case 4:return S.n=5,e;case 5:return S.a(2,S.v);case 6:return S.p=6,E._debug("#_acquireLock","lock released for storage key",E.storageKey),E.lockAcquired=!1,S.f(6);case 7:return S.a(2)}},_callee138,null,[[1,,6,7]])})));case 3:return k.a(2,k.v);case 4:return k.p=4,this._debug("#_acquireLock","end"),k.f(4);case 5:return k.a(2)}},_callee139,this,[[1,,4,5]])})),function(e,l){return ge.apply(this,arguments)})},{key:"_useSession",value:(ve=_asyncToGenerator(_regenerator().m(function _callee140(e){var l;return _regenerator().w(function(_){for(;;)switch(_.p=_.n){case 0:return this._debug("#_useSession","begin"),_.p=1,_.n=2,this.__loadSession();case 2:return l=_.v,_.n=3,e(l);case 3:return _.a(2,_.v);case 4:return _.p=4,this._debug("#_useSession","end"),_.f(4);case 5:return _.a(2)}},_callee140,this,[[1,,4,5]])})),function(e){return ve.apply(this,arguments)})},{key:"__loadSession",value:(pe=_asyncToGenerator(_regenerator().m(function _callee141(){var e,l,_,S,E,k,T,M,R,I=this;return _regenerator().w(function(O){for(;;)switch(O.p=O.n){case 0:return this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack),O.p=1,e=null,O.n=2,Js(this.storage,this.storageKey);case 2:if(l=O.v,this._debug("#getSession()","session from storage",l),null===l){O.n=4;break}if(!this._isValidSession(l)){O.n=3;break}e=l,O.n=4;break;case 3:return this._debug("#getSession()","session from storage is not valid"),O.n=4,this._removeSession();case 4:if(e){O.n=5;break}return O.a(2,{data:{session:null},error:null});case 5:if(_=!!e.expires_at&&1e3*e.expires_at-Date.now()<Ts,this._debug("#__loadSession()","session has".concat(_?"":" not"," expired"),"expires_at",e.expires_at),_){O.n=8;break}if(!this.userStorage){O.n=7;break}return O.n=6,Js(this.userStorage,this.storageKey+"-user");case 6:(null==(S=O.v)?void 0:S.user)?e.user=S.user:e.user=userNotAvailableProxy();case 7:return this.storage.isServer&&e.user&&(E=this.suppressGetSessionWarning,k=new Proxy(e,{get:function(e,l,_){return E||"user"!==l||(E=!0,I.suppressGetSessionWarning=!0),Reflect.get(e,l,_)}}),e=k),O.a(2,{data:{session:e},error:null});case 8:return O.n=9,this._callRefreshToken(e.refresh_token);case 9:if(T=O.v,M=T.data,!(R=T.error)){O.n=10;break}return O.a(2,{data:{session:null},error:R});case 10:return O.a(2,{data:{session:M},error:null});case 11:return O.p=11,this._debug("#__loadSession()","end"),O.f(11);case 12:return O.a(2)}},_callee141,this,[[1,,11,12]])})),function(){return pe.apply(this,arguments)})},{key:"getUser",value:(fe=_asyncToGenerator(_regenerator().m(function _callee143(e){var l,_=this;return _regenerator().w(function(S){for(;;)switch(S.n){case 0:if(!e){S.n=2;break}return S.n=1,this._getUser(e);case 1:return S.a(2,S.v);case 2:return S.n=3,this.initializePromise;case 3:return S.n=4,this._acquireLock(-1,_asyncToGenerator(_regenerator().m(function _callee142(){return _regenerator().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,_._getUser();case 1:return e.a(2,e.v)}},_callee142)})));case 4:return l=S.v,S.a(2,l)}},_callee143,this)})),function(e){return fe.apply(this,arguments)})},{key:"_getUser",value:(de=_asyncToGenerator(_regenerator().m(function _callee145(e){var l,_=this;return _regenerator().w(function(S){for(;;)switch(S.p=S.n){case 0:if(S.p=0,!e){S.n=2;break}return S.n=1,_request(this.fetch,"GET","".concat(this.url,"/user"),{headers:this.headers,jwt:e,xform:_userResponse});case 1:case 3:return S.a(2,S.v);case 2:return S.n=3,this._useSession(function(){var e=_asyncToGenerator(_regenerator().m(function _callee144(e){var l,S,E,k,T;return _regenerator().w(function(M){for(;;)switch(M.n){case 0:if(k=e.data,!(T=e.error)){M.n=1;break}throw T;case 1:if((null===(l=k.session)||void 0===l?void 0:l.access_token)||_.hasCustomAuthorizationHeader){M.n=2;break}return M.a(2,{data:{user:null},error:new Fs});case 2:return M.n=3,_request(_.fetch,"GET","".concat(_.url,"/user"),{headers:_.headers,jwt:null!==(E=null===(S=k.session)||void 0===S?void 0:S.access_token)&&void 0!==E?E:void 0,xform:_userResponse});case 3:return M.a(2,M.v)}},_callee144)}));return function(l){return e.apply(this,arguments)}}());case 4:if(S.p=4,!isAuthError(l=S.v)){S.n=7;break}if(!isAuthSessionMissingError(l)){S.n=6;break}return S.n=5,this._removeSession();case 5:return S.n=6,Qs(this.storage,"".concat(this.storageKey,"-code-verifier"));case 6:return S.a(2,{data:{user:null},error:l});case 7:throw l;case 8:return S.a(2)}},_callee145,this,[[0,4]])})),function(e){return de.apply(this,arguments)})},{key:"updateUser",value:(he=_asyncToGenerator(_regenerator().m(function _callee147(e){var l,_=this,S=arguments;return _regenerator().w(function(E){for(;;)switch(E.n){case 0:return l=S.length>1&&void 0!==S[1]?S[1]:{},E.n=1,this.initializePromise;case 1:return E.n=2,this._acquireLock(-1,_asyncToGenerator(_regenerator().m(function _callee146(){return _regenerator().w(function(S){for(;;)switch(S.n){case 0:return S.n=1,_._updateUser(e,l);case 1:return S.a(2,S.v)}},_callee146)})));case 2:return E.a(2,E.v)}},_callee147,this)})),function(e){return he.apply(this,arguments)})},{key:"_updateUser",value:(ce=_asyncToGenerator(_regenerator().m(function _callee149(e){var l,_,S=this,E=arguments;return _regenerator().w(function(k){for(;;)switch(k.p=k.n){case 0:return l=E.length>1&&void 0!==E[1]?E[1]:{},k.p=1,k.n=2,this._useSession(function(){var _=_asyncToGenerator(_regenerator().m(function _callee148(_){var E,k,T,M,R,I,O,D,L,U;return _regenerator().w(function(B){for(;;)switch(B.n){case 0:if(E=_.data,!(k=_.error)){B.n=1;break}throw k;case 1:if(E.session){B.n=2;break}throw new Fs;case 2:if(T=E.session,M=null,R=null,"pkce"!==S.flowType||null==e.email){B.n=4;break}return B.n=3,getCodeChallengeAndMethod(S.storage,S.storageKey);case 3:I=B.v,O=_slicedToArray(I,2),M=O[0],R=O[1];case 4:return B.n=5,_request(S.fetch,"PUT","".concat(S.url,"/user"),{headers:S.headers,redirectTo:null==l?void 0:l.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:M,code_challenge_method:R}),jwt:T.access_token,xform:_userResponse});case 5:if(D=B.v,L=D.data,!(U=D.error)){B.n=6;break}throw U;case 6:return T.user=L.user,B.n=7,S._saveSession(T);case 7:return B.n=8,S._notifyAllSubscribers("USER_UPDATED",T);case 8:return B.a(2,{data:{user:T.user},error:null})}},_callee148)}));return function(e){return _.apply(this,arguments)}}());case 2:return k.a(2,k.v);case 3:if(k.p=3,!isAuthError(_=k.v)){k.n=4;break}return k.a(2,{data:{user:null},error:_});case 4:throw _;case 5:return k.a(2)}},_callee149,this,[[1,3]])})),function(e){return ce.apply(this,arguments)})},{key:"setSession",value:(le=_asyncToGenerator(_regenerator().m(function _callee151(e){var l=this;return _regenerator().w(function(_){for(;;)switch(_.n){case 0:return _.n=1,this.initializePromise;case 1:return _.n=2,this._acquireLock(-1,_asyncToGenerator(_regenerator().m(function _callee150(){return _regenerator().w(function(_){for(;;)switch(_.n){case 0:return _.n=1,l._setSession(e);case 1:return _.a(2,_.v)}},_callee150)})));case 2:return _.a(2,_.v)}},_callee151,this)})),function(e){return le.apply(this,arguments)})},{key:"_setSession",value:(ue=_asyncToGenerator(_regenerator().m(function _callee152(e){var l,_,S,E,k,T,M,R,I,O,D,L,U;return _regenerator().w(function(B){for(;;)switch(B.p=B.n){case 0:if(B.p=0,e.access_token&&e.refresh_token){B.n=1;break}throw new Fs;case 1:if(l=Date.now()/1e3,_=l,S=!0,E=null,k=decodeJWT(e.access_token),(T=k.payload).exp&&(_=T.exp,S=_<=l),!S){B.n=5;break}return B.n=2,this._callRefreshToken(e.refresh_token);case 2:if(M=B.v,R=M.data,!(I=M.error)){B.n=3;break}return B.a(2,{data:{user:null,session:null},error:I});case 3:if(R){B.n=4;break}return B.a(2,{data:{user:null,session:null},error:null});case 4:E=R,B.n=9;break;case 5:return B.n=6,this._getUser(e.access_token);case 6:if(O=B.v,D=O.data,!(L=O.error)){B.n=7;break}throw L;case 7:return E={access_token:e.access_token,refresh_token:e.refresh_token,user:D.user,token_type:"bearer",expires_in:_-l,expires_at:_},B.n=8,this._saveSession(E);case 8:return B.n=9,this._notifyAllSubscribers("SIGNED_IN",E);case 9:return B.a(2,{data:{user:E.user,session:E},error:null});case 10:if(B.p=10,!isAuthError(U=B.v)){B.n=11;break}return B.a(2,{data:{session:null,user:null},error:U});case 11:throw U;case 12:return B.a(2)}},_callee152,this,[[0,10]])})),function(e){return ue.apply(this,arguments)})},{key:"refreshSession",value:(se=_asyncToGenerator(_regenerator().m(function _callee154(e){var l=this;return _regenerator().w(function(_){for(;;)switch(_.n){case 0:return _.n=1,this.initializePromise;case 1:return _.n=2,this._acquireLock(-1,_asyncToGenerator(_regenerator().m(function _callee153(){return _regenerator().w(function(_){for(;;)switch(_.n){case 0:return _.n=1,l._refreshSession(e);case 1:return _.a(2,_.v)}},_callee153)})));case 2:return _.a(2,_.v)}},_callee154,this)})),function(e){return se.apply(this,arguments)})},{key:"_refreshSession",value:(oe=_asyncToGenerator(_regenerator().m(function _callee156(e){var l,_=this;return _regenerator().w(function(S){for(;;)switch(S.p=S.n){case 0:return S.p=0,S.n=1,this._useSession(function(){var l=_asyncToGenerator(_regenerator().m(function _callee155(l){var S,E,k,T,M,R;return _regenerator().w(function(I){for(;;)switch(I.n){case 0:if(e){I.n=2;break}if(E=l.data,!(k=l.error)){I.n=1;break}throw k;case 1:e=null!==(S=E.session)&&void 0!==S?S:void 0;case 2:if(null==e?void 0:e.refresh_token){I.n=3;break}throw new Fs;case 3:return I.n=4,_._callRefreshToken(e.refresh_token);case 4:if(T=I.v,M=T.data,!(R=T.error)){I.n=5;break}return I.a(2,{data:{user:null,session:null},error:R});case 5:if(M){I.n=6;break}return I.a(2,{data:{user:null,session:null},error:null});case 6:return I.a(2,{data:{user:M.user,session:M},error:null})}},_callee155)}));return function(e){return l.apply(this,arguments)}}());case 1:return S.a(2,S.v);case 2:if(S.p=2,!isAuthError(l=S.v)){S.n=3;break}return S.a(2,{data:{user:null,session:null},error:l});case 3:throw l;case 4:return S.a(2)}},_callee156,this,[[0,2]])})),function(e){return oe.apply(this,arguments)})},{key:"_getSessionFromURL",value:(ae=_asyncToGenerator(_regenerator().m(function _callee157(e,l){var _,S,E,k,T,M,R,I,O,D,L,U,B,z,j,G,H,V,W,q;return _regenerator().w(function(X){for(;;)switch(X.p=X.n){case 0:if(X.p=0,isBrowser()){X.n=1;break}throw new zs("No browser detected.");case 1:if(!(e.error||e.error_description||e.error_code)){X.n=2;break}throw new zs(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});case 2:W=l,X.n="implicit"===W?3:"pkce"===W?5:7;break;case 3:if("pkce"!==this.flowType){X.n=4;break}throw new js("Not a valid PKCE flow url.");case 4:case 6:return X.a(3,7);case 5:if("implicit"!==this.flowType){X.n=6;break}throw new zs("Not a valid implicit grant flow url.");case 7:if("pkce"!==l){X.n=11;break}if(this._debug("#_initialize()","begin","is PKCE flow",!0),e.code){X.n=8;break}throw new js("No code detected.");case 8:return X.n=9,this._exchangeCodeForSession(e.code);case 9:if(_=X.v,S=_.data,!(E=_.error)){X.n=10;break}throw E;case 10:return(k=new URL(window.location.href)).searchParams.delete("code"),window.history.replaceState(window.history.state,"",k.toString()),X.a(2,{data:{session:S.session,redirectType:null},error:null});case 11:if(T=e.provider_token,M=e.provider_refresh_token,R=e.access_token,I=e.refresh_token,O=e.expires_in,D=e.expires_at,L=e.token_type,R&&O&&I&&L){X.n=12;break}throw new zs("No session defined in URL");case 12:return U=Math.round(Date.now()/1e3),B=parseInt(O),z=U+B,D&&(z=parseInt(D)),X.n=13,this._getUser(R);case 13:if(j=X.v,G=j.data,!(H=j.error)){X.n=14;break}throw H;case 14:return V={provider_token:T,provider_refresh_token:M,access_token:R,expires_in:B,expires_at:z,refresh_token:I,token_type:L,user:G.user},window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),X.a(2,{data:{session:V,redirectType:e.type},error:null});case 15:if(X.p=15,!isAuthError(q=X.v)){X.n=16;break}return X.a(2,{data:{session:null,redirectType:null},error:q});case 16:throw q;case 17:return X.a(2)}},_callee157,this,[[0,15]])})),function(e,l){return ae.apply(this,arguments)})},{key:"_isImplicitGrantCallback",value:function(e){return Boolean(e.access_token||e.error_description)}},{key:"_isPKCECallback",value:(ie=_asyncToGenerator(_regenerator().m(function _callee158(e){var l;return _regenerator().w(function(_){for(;;)switch(_.n){case 0:return _.n=1,Js(this.storage,"".concat(this.storageKey,"-code-verifier"));case 1:return l=_.v,_.a(2,!(!e.code||!l))}},_callee158,this)})),function(e){return ie.apply(this,arguments)})},{key:"signOut",value:(re=_asyncToGenerator(_regenerator().m(function _callee160(){var e,l=this,_=arguments;return _regenerator().w(function(S){for(;;)switch(S.n){case 0:return e=_.length>0&&void 0!==_[0]?_[0]:{scope:"global"},S.n=1,this.initializePromise;case 1:return S.n=2,this._acquireLock(-1,_asyncToGenerator(_regenerator().m(function _callee159(){return _regenerator().w(function(_){for(;;)switch(_.n){case 0:return _.n=1,l._signOut(e);case 1:return _.a(2,_.v)}},_callee159)})));case 2:return S.a(2,S.v)}},_callee160,this)})),function(){return re.apply(this,arguments)})},{key:"_signOut",value:(ne=_asyncToGenerator(_regenerator().m(function _callee162(){var e,l=this,_=arguments;return _regenerator().w(function(S){for(;;)switch(S.n){case 0:return e=(_.length>0&&void 0!==_[0]?_[0]:{scope:"global"}).scope,S.n=1,this._useSession(function(){var _=_asyncToGenerator(_regenerator().m(function _callee161(_){var S,E,k,T,M,R;return _regenerator().w(function(I){for(;;)switch(I.n){case 0:if(E=_.data,!(k=_.error)){I.n=1;break}return I.a(2,{error:k});case 1:if(!(T=null===(S=E.session)||void 0===S?void 0:S.access_token)){I.n=3;break}return I.n=2,l.admin.signOut(T,e);case 2:if(M=I.v,!(R=M.error)){I.n=3;break}if(isAuthApiError(R)&&(404===R.status||401===R.status||403===R.status)){I.n=3;break}return I.a(2,{error:R});case 3:if("others"===e){I.n=5;break}return I.n=4,l._removeSession();case 4:return I.n=5,Qs(l.storage,"".concat(l.storageKey,"-code-verifier"));case 5:return I.a(2,{error:null})}},_callee161)}));return function(e){return _.apply(this,arguments)}}());case 1:return S.a(2,S.v)}},_callee162,this)})),function(){return ne.apply(this,arguments)})},{key:"onAuthStateChange",value:function(e){var l=this,_="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var l=16*Math.random()|0;return("x"==e?l:3&l|8).toString(16)}),S={id:_,callback:e,unsubscribe:function(){l._debug("#unsubscribe()","state change callback with id removed",_),l.stateChangeEmitters.delete(_)}};return this._debug("#onAuthStateChange()","registered callback with id",_),this.stateChangeEmitters.set(_,S),_asyncToGenerator(_regenerator().m(function _callee164(){return _regenerator().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,l.initializePromise;case 1:return e.n=2,l._acquireLock(-1,_asyncToGenerator(_regenerator().m(function _callee163(){return _regenerator().w(function(e){for(;;)switch(e.n){case 0:l._emitInitialSession(_);case 1:return e.a(2)}},_callee163)})));case 2:return e.a(2)}},_callee164)}))(),{data:{subscription:S}}}},{key:"_emitInitialSession",value:(te=_asyncToGenerator(_regenerator().m(function _callee166(e){var l=this;return _regenerator().w(function(_){for(;;)switch(_.n){case 0:return _.n=1,this._useSession(function(){var _=_asyncToGenerator(_regenerator().m(function _callee165(_){var S,E,k,T,M;return _regenerator().w(function(R){for(;;)switch(R.p=R.n){case 0:if(R.p=0,k=_.data.session,!(T=_.error)){R.n=1;break}throw T;case 1:return R.n=2,null===(S=l.stateChangeEmitters.get(e))||void 0===S?void 0:S.callback("INITIAL_SESSION",k);case 2:l._debug("INITIAL_SESSION","callback id",e,"session",k),R.n=5;break;case 3:return R.p=3,M=R.v,R.n=4,null===(E=l.stateChangeEmitters.get(e))||void 0===E?void 0:E.callback("INITIAL_SESSION",null);case 4:l._debug("INITIAL_SESSION","callback id",e,"error",M);case 5:return R.a(2)}},_callee165,null,[[0,3]])}));return function(e){return _.apply(this,arguments)}}());case 1:return _.a(2,_.v)}},_callee166,this)})),function(e){return te.apply(this,arguments)})},{key:"resetPasswordForEmail",value:(ee=_asyncToGenerator(_regenerator().m(function _callee167(e){var l,_,S,E,k,T,M=arguments;return _regenerator().w(function(R){for(;;)switch(R.p=R.n){case 0:if(l=M.length>1&&void 0!==M[1]?M[1]:{},_=null,S=null,"pkce"!==this.flowType){R.n=2;break}return R.n=1,getCodeChallengeAndMethod(this.storage,this.storageKey,!0);case 1:E=R.v,k=_slicedToArray(E,2),_=k[0],S=k[1];case 2:return R.p=2,R.n=3,_request(this.fetch,"POST","".concat(this.url,"/recover"),{body:{email:e,code_challenge:_,code_challenge_method:S,gotrue_meta_security:{captcha_token:l.captchaToken}},headers:this.headers,redirectTo:l.redirectTo});case 3:return R.a(2,R.v);case 4:if(R.p=4,!isAuthError(T=R.v)){R.n=5;break}return R.a(2,{data:null,error:T});case 5:throw T;case 6:return R.a(2)}},_callee167,this,[[2,4]])})),function(e){return ee.apply(this,arguments)})},{key:"getUserIdentities",value:($=_asyncToGenerator(_regenerator().m(function _callee168(){var e,l,_,S,E;return _regenerator().w(function(k){for(;;)switch(k.p=k.n){case 0:return k.p=0,k.n=1,this.getUser();case 1:if(l=k.v,_=l.data,!(S=l.error)){k.n=2;break}throw S;case 2:return k.a(2,{data:{identities:null!==(e=_.user.identities)&&void 0!==e?e:[]},error:null});case 3:if(k.p=3,!isAuthError(E=k.v)){k.n=4;break}return k.a(2,{data:null,error:E});case 4:throw E;case 5:return k.a(2)}},_callee168,this,[[0,3]])})),function(){return $.apply(this,arguments)})},{key:"linkIdentity",value:(Z=_asyncToGenerator(_regenerator().m(function _callee169(e){return _regenerator().w(function(l){for(;;)switch(l.n){case 0:if(!("token"in e)){l.n=1;break}return l.a(2,this.linkIdentityIdToken(e));case 1:return l.a(2,this.linkIdentityOAuth(e))}},_callee169,this)})),function(e){return Z.apply(this,arguments)})},{key:"linkIdentityOAuth",value:(Q=_asyncToGenerator(_regenerator().m(function _callee171(e){var l,_,S,E,k,T=this;return _regenerator().w(function(M){for(;;)switch(M.p=M.n){case 0:return M.p=0,M.n=1,this._useSession(function(){var l=_asyncToGenerator(_regenerator().m(function _callee170(l){var _,S,E,k,M,R,I,O;return _regenerator().w(function(D){for(;;)switch(D.n){case 0:if(R=l.data,!(I=l.error)){D.n=1;break}throw I;case 1:return D.n=2,T._getUrlForProvider("".concat(T.url,"/user/identities/authorize"),e.provider,{redirectTo:null===(_=e.options)||void 0===_?void 0:_.redirectTo,scopes:null===(S=e.options)||void 0===S?void 0:S.scopes,queryParams:null===(E=e.options)||void 0===E?void 0:E.queryParams,skipBrowserRedirect:!0});case 2:return O=D.v,D.n=3,_request(T.fetch,"GET",O,{headers:T.headers,jwt:null!==(M=null===(k=R.session)||void 0===k?void 0:k.access_token)&&void 0!==M?M:void 0});case 3:return D.a(2,D.v)}},_callee170)}));return function(e){return l.apply(this,arguments)}}());case 1:if(_=M.v,S=_.data,!(E=_.error)){M.n=2;break}throw E;case 2:return isBrowser()&&!(null===(l=e.options)||void 0===l?void 0:l.skipBrowserRedirect)&&window.location.assign(null==S?void 0:S.url),M.a(2,{data:{provider:e.provider,url:null==S?void 0:S.url},error:null});case 3:if(M.p=3,!isAuthError(k=M.v)){M.n=4;break}return M.a(2,{data:{provider:e.provider,url:null},error:k});case 4:throw k;case 5:return M.a(2)}},_callee171,this,[[0,3]])})),function(e){return Q.apply(this,arguments)})},{key:"linkIdentityIdToken",value:(J=_asyncToGenerator(_regenerator().m(function _callee173(e){var l=this;return _regenerator().w(function(_){for(;;)switch(_.n){case 0:return _.n=1,this._useSession(function(){var _=_asyncToGenerator(_regenerator().m(function _callee172(_){var S,E,k,T,M,R,I,O,D,L,U,B;return _regenerator().w(function(z){for(;;)switch(z.p=z.n){case 0:if(z.p=0,E=_.error,k=_.data.session,!E){z.n=1;break}throw E;case 1:return T=e.options,M=e.provider,R=e.token,I=e.access_token,O=e.nonce,z.n=2,_request(l.fetch,"POST","".concat(l.url,"/token?grant_type=id_token"),{headers:l.headers,jwt:null!==(S=null==k?void 0:k.access_token)&&void 0!==S?S:void 0,body:{provider:M,id_token:R,access_token:I,nonce:O,link_identity:!0,gotrue_meta_security:{captcha_token:null==T?void 0:T.captchaToken}},xform:_sessionResponse});case 2:if(D=z.v,L=D.data,!(U=D.error)){z.n=3;break}return z.a(2,{data:{user:null,session:null},error:U});case 3:if(L&&L.session&&L.user){z.n=4;break}return z.a(2,{data:{user:null,session:null},error:new Ns});case 4:if(!L.session){z.n=6;break}return z.n=5,l._saveSession(L.session);case 5:return z.n=6,l._notifyAllSubscribers("USER_UPDATED",L.session);case 6:return z.a(2,{data:L,error:U});case 7:if(z.p=7,!isAuthError(B=z.v)){z.n=8;break}return z.a(2,{data:{user:null,session:null},error:B});case 8:throw B;case 9:return z.a(2)}},_callee172,null,[[0,7]])}));return function(e){return _.apply(this,arguments)}}());case 1:return _.a(2,_.v)}},_callee173,this)})),function(e){return J.apply(this,arguments)})},{key:"unlinkIdentity",value:(Y=_asyncToGenerator(_regenerator().m(function _callee175(e){var l,_=this;return _regenerator().w(function(S){for(;;)switch(S.p=S.n){case 0:return S.p=0,S.n=1,this._useSession(function(){var l=_asyncToGenerator(_regenerator().m(function _callee174(l){var S,E,k,T;return _regenerator().w(function(M){for(;;)switch(M.n){case 0:if(k=l.data,!(T=l.error)){M.n=1;break}throw T;case 1:return M.n=2,_request(_.fetch,"DELETE","".concat(_.url,"/user/identities/").concat(e.identity_id),{headers:_.headers,jwt:null!==(E=null===(S=k.session)||void 0===S?void 0:S.access_token)&&void 0!==E?E:void 0});case 2:return M.a(2,M.v)}},_callee174)}));return function(e){return l.apply(this,arguments)}}());case 1:return S.a(2,S.v);case 2:if(S.p=2,!isAuthError(l=S.v)){S.n=3;break}return S.a(2,{data:null,error:l});case 3:throw l;case 4:return S.a(2)}},_callee175,this,[[0,2]])})),function(e){return Y.apply(this,arguments)})},{key:"_refreshAccessToken",value:(K=_asyncToGenerator(_regenerator().m(function _callee177(e){var l,_,S,E=this;return _regenerator().w(function(k){for(;;)switch(k.p=k.n){case 0:return l="#_refreshAccessToken(".concat(e.substring(0,5),"...)"),this._debug(l,"begin"),k.p=1,_=Date.now(),k.n=2,retryable(function(){var _=_asyncToGenerator(_regenerator().m(function _callee176(_){return _regenerator().w(function(S){for(;;)switch(S.n){case 0:if(!(_>0)){S.n=1;break}return S.n=1,sleep(200*Math.pow(2,_-1));case 1:return E._debug(l,"refreshing attempt",_),S.n=2,_request(E.fetch,"POST","".concat(E.url,"/token?grant_type=refresh_token"),{body:{refresh_token:e},headers:E.headers,xform:_sessionResponse});case 2:return S.a(2,S.v)}},_callee176)}));return function(e){return _.apply(this,arguments)}}(),function(e,l){var S=200*Math.pow(2,e);return l&&isAuthRetryableFetchError(l)&&Date.now()+S-_<Cs});case 2:return k.a(2,k.v);case 3:if(k.p=3,S=k.v,this._debug(l,"error",S),!isAuthError(S)){k.n=4;break}return k.a(2,{data:{session:null,user:null},error:S});case 4:throw S;case 5:return k.p=5,this._debug(l,"end"),k.f(5);case 6:return k.a(2)}},_callee177,this,[[1,3,5,6]])})),function(e){return K.apply(this,arguments)})},{key:"_isValidSession",value:function(e){return"object"===_typeof3(e)&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}},{key:"_handleProviderSignIn",value:(X=_asyncToGenerator(_regenerator().m(function _callee178(e,l){var _;return _regenerator().w(function(S){for(;;)switch(S.n){case 0:return S.n=1,this._getUrlForProvider("".concat(this.url,"/authorize"),e,{redirectTo:l.redirectTo,scopes:l.scopes,queryParams:l.queryParams});case 1:return _=S.v,this._debug("#_handleProviderSignIn()","provider",e,"options",l,"url",_),isBrowser()&&!l.skipBrowserRedirect&&window.location.assign(_),S.a(2,{data:{provider:e,url:_},error:null})}},_callee178,this)})),function(e,l){return X.apply(this,arguments)})},{key:"_recoverAndRefresh",value:(q=_asyncToGenerator(_regenerator().m(function _callee179(){var e,l,_,S,E,k,T,M,R,I,O,D,L;return _regenerator().w(function(U){for(;;)switch(U.p=U.n){case 0:return _="#_recoverAndRefresh()",this._debug(_,"begin"),U.p=1,U.n=2,Js(this.storage,this.storageKey);case 2:if(!(S=U.v)||!this.userStorage){U.n=5;break}return U.n=3,Js(this.userStorage,this.storageKey+"-user");case 3:if(E=U.v,this.storage.isServer||!Object.is(this.storage,this.userStorage)||E){U.n=4;break}return E={user:S.user},U.n=4,Ys(this.userStorage,this.storageKey+"-user",E);case 4:S.user=null!==(e=null==E?void 0:E.user)&&void 0!==e?e:userNotAvailableProxy(),U.n=10;break;case 5:if(!S||S.user){U.n=10;break}if(S.user){U.n=10;break}return U.n=6,Js(this.storage,this.storageKey+"-user");case 6:if(!(k=U.v)||!(null==k?void 0:k.user)){U.n=9;break}return S.user=k.user,U.n=7,Qs(this.storage,this.storageKey+"-user");case 7:return U.n=8,Ys(this.storage,this.storageKey,S);case 8:U.n=10;break;case 9:S.user=userNotAvailableProxy();case 10:if(this._debug(_,"session from storage",S),this._isValidSession(S)){U.n=12;break}if(this._debug(_,"session is not valid"),null===S){U.n=11;break}return U.n=11,this._removeSession();case 11:return U.a(2);case 12:if(T=1e3*(null!==(l=S.expires_at)&&void 0!==l?l:1/0)-Date.now()<Ts,this._debug(_,"session has".concat(T?"":" not"," expired with margin of ").concat(Ts,"s")),!T){U.n=15;break}if(!this.autoRefreshToken||!S.refresh_token){U.n=14;break}return U.n=13,this._callRefreshToken(S.refresh_token);case 13:if(M=U.v,!(R=M.error)){U.n=14;break}if(isAuthRetryableFetchError(R)){U.n=14;break}return this._debug(_,"refresh failed with a non-retryable error, removing the session",R),U.n=14,this._removeSession();case 14:U.n=25;break;case 15:if(!S.user||!0!==S.user.__isUserNotAvailableProxy){U.n=24;break}return U.p=16,U.n=17,this._getUser(S.access_token);case 17:if(I=U.v,O=I.data,I.error||!(null==O?void 0:O.user)){U.n=20;break}return S.user=O.user,U.n=18,this._saveSession(S);case 18:return U.n=19,this._notifyAllSubscribers("SIGNED_IN",S);case 19:U.n=21;break;case 20:this._debug(_,"could not get user data, skipping SIGNED_IN notification");case 21:U.n=23;break;case 22:U.p=22,D=U.v,this._debug(_,"error getting user data, skipping SIGNED_IN notification",D);case 23:U.n=25;break;case 24:return U.n=25,this._notifyAllSubscribers("SIGNED_IN",S);case 25:U.n=27;break;case 26:return U.p=26,L=U.v,this._debug(_,"error",L),U.a(2);case 27:return U.p=27,this._debug(_,"end"),U.f(27);case 28:return U.a(2)}},_callee179,this,[[16,22],[1,26,27,28]])})),function(){return q.apply(this,arguments)})},{key:"_callRefreshToken",value:(W=_asyncToGenerator(_regenerator().m(function _callee180(e){var l,_,S,E,k,T,M,R,I;return _regenerator().w(function(O){for(;;)switch(O.p=O.n){case 0:if(e){O.n=1;break}throw new Fs;case 1:if(!this.refreshingDeferred){O.n=2;break}return O.a(2,this.refreshingDeferred.promise);case 2:return S="#_callRefreshToken(".concat(e.substring(0,5),"...)"),this._debug(S,"begin"),O.p=3,this.refreshingDeferred=new Zs,O.n=4,this._refreshAccessToken(e);case 4:if(E=O.v,k=E.data,!(T=E.error)){O.n=5;break}throw T;case 5:if(k.session){O.n=6;break}throw new Fs;case 6:return O.n=7,this._saveSession(k.session);case 7:return O.n=8,this._notifyAllSubscribers("TOKEN_REFRESHED",k.session);case 8:return M={data:k.session,error:null},this.refreshingDeferred.resolve(M),O.a(2,M);case 9:if(O.p=9,I=O.v,this._debug(S,"error",I),!isAuthError(I)){O.n=11;break}if(R={data:null,error:I},isAuthRetryableFetchError(I)){O.n=10;break}return O.n=10,this._removeSession();case 10:return null===(l=this.refreshingDeferred)||void 0===l||l.resolve(R),O.a(2,R);case 11:throw null===(_=this.refreshingDeferred)||void 0===_||_.reject(I),I;case 12:return O.p=12,this.refreshingDeferred=null,this._debug(S,"end"),O.f(12);case 13:return O.a(2)}},_callee180,this,[[3,9,12,13]])})),function(e){return W.apply(this,arguments)})},{key:"_notifyAllSubscribers",value:(V=_asyncToGenerator(_regenerator().m(function _callee182(e,l){var _,S,E,k,T,M=arguments;return _regenerator().w(function(R){for(;;)switch(R.p=R.n){case 0:return _=!(M.length>2&&void 0!==M[2])||M[2],S="#_notifyAllSubscribers(".concat(e,")"),this._debug(S,"begin",l,"broadcast = ".concat(_)),R.p=1,this.broadcastChannel&&_&&this.broadcastChannel.postMessage({event:e,session:l}),E=[],k=Array.from(this.stateChangeEmitters.values()).map(function(){var _=_asyncToGenerator(_regenerator().m(function _callee181(_){var S;return _regenerator().w(function(k){for(;;)switch(k.p=k.n){case 0:return k.p=0,k.n=1,_.callback(e,l);case 1:k.n=3;break;case 2:k.p=2,S=k.v,E.push(S);case 3:return k.a(2)}},_callee181,null,[[0,2]])}));return function(e){return _.apply(this,arguments)}}()),R.n=2,Promise.all(k);case 2:if(!(E.length>0)){R.n=3;break}for(T=0;T<E.length;T+=1);throw E[0];case 3:return R.p=3,this._debug(S,"end"),R.f(3);case 4:return R.a(2)}},_callee182,this,[[1,,3,4]])})),function(e,l){return V.apply(this,arguments)})},{key:"_saveSession",value:(H=_asyncToGenerator(_regenerator().m(function _callee183(e){var l,_,S,E,k;return _regenerator().w(function(T){for(;;)switch(T.n){case 0:if(this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,l=Object.assign({},e),_=l.user&&!0===l.user.__isUserNotAvailableProxy,!this.userStorage){T.n=3;break}if(_||!l.user){T.n=1;break}return T.n=1,Ys(this.userStorage,this.storageKey+"-user",{user:l.user});case 1:return delete(S=Object.assign({},l)).user,E=deepClone(S),T.n=2,Ys(this.storage,this.storageKey,E);case 2:T.n=4;break;case 3:return k=deepClone(l),T.n=4,Ys(this.storage,this.storageKey,k);case 4:return T.a(2)}},_callee183,this)})),function(e){return H.apply(this,arguments)})},{key:"_removeSession",value:(G=_asyncToGenerator(_regenerator().m(function _callee184(){return _regenerator().w(function(e){for(;;)switch(e.n){case 0:return this._debug("#_removeSession()"),e.n=1,Qs(this.storage,this.storageKey);case 1:return e.n=2,Qs(this.storage,this.storageKey+"-code-verifier");case 2:return e.n=3,Qs(this.storage,this.storageKey+"-user");case 3:if(!this.userStorage){e.n=4;break}return e.n=4,Qs(this.userStorage,this.storageKey+"-user");case 4:return e.n=5,this._notifyAllSubscribers("SIGNED_OUT",null);case 5:return e.a(2)}},_callee184,this)})),function(){return G.apply(this,arguments)})},{key:"_removeVisibilityChangedCallback",value:function(){this._debug("#_removeVisibilityChangedCallback()");var e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&isBrowser()&&(null===window||void 0===window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(oo){}}},{key:"_startAutoRefresh",value:(j=_asyncToGenerator(_regenerator().m(function _callee186(){var e,l=this;return _regenerator().w(function(_){for(;;)switch(_.n){case 0:return _.n=1,this._stopAutoRefresh();case 1:this._debug("#_startAutoRefresh()"),e=setInterval(function(){return l._autoRefreshTokenTick()},Cs),this.autoRefreshTicker=e,e&&"object"===_typeof3(e)&&"function"==typeof e.unref?e.unref():"undefined"!=typeof Deno&&"function"==typeof Deno.unrefTimer&&Deno.unrefTimer(e),setTimeout(_asyncToGenerator(_regenerator().m(function _callee185(){return _regenerator().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,l.initializePromise;case 1:return e.n=2,l._autoRefreshTokenTick();case 2:return e.a(2)}},_callee185)})),0);case 2:return _.a(2)}},_callee186,this)})),function(){return j.apply(this,arguments)})},{key:"_stopAutoRefresh",value:(z=_asyncToGenerator(_regenerator().m(function _callee187(){var e;return _regenerator().w(function(l){for(;;)switch(l.n){case 0:this._debug("#_stopAutoRefresh()"),e=this.autoRefreshTicker,this.autoRefreshTicker=null,e&&clearInterval(e);case 1:return l.a(2)}},_callee187,this)})),function(){return z.apply(this,arguments)})},{key:"startAutoRefresh",value:(B=_asyncToGenerator(_regenerator().m(function _callee188(){return _regenerator().w(function(e){for(;;)switch(e.n){case 0:return this._removeVisibilityChangedCallback(),e.n=1,this._startAutoRefresh();case 1:return e.a(2)}},_callee188,this)})),function(){return B.apply(this,arguments)})},{key:"stopAutoRefresh",value:(U=_asyncToGenerator(_regenerator().m(function _callee189(){return _regenerator().w(function(e){for(;;)switch(e.n){case 0:return this._removeVisibilityChangedCallback(),e.n=1,this._stopAutoRefresh();case 1:return e.a(2)}},_callee189,this)})),function(){return U.apply(this,arguments)})},{key:"_autoRefreshTokenTick",value:(L=_asyncToGenerator(_regenerator().m(function _callee192(){var e,l=this;return _regenerator().w(function(_){for(;;)switch(_.p=_.n){case 0:return this._debug("#_autoRefreshTokenTick()","begin"),_.p=1,_.n=2,this._acquireLock(0,_asyncToGenerator(_regenerator().m(function _callee191(){var e;return _regenerator().w(function(_){for(;;)switch(_.p=_.n){case 0:return _.p=0,e=Date.now(),_.p=1,_.n=2,l._useSession(function(){var _=_asyncToGenerator(_regenerator().m(function _callee190(_){var S,E;return _regenerator().w(function(k){for(;;)switch(k.n){case 0:if((S=_.data.session)&&S.refresh_token&&S.expires_at){k.n=1;break}return l._debug("#_autoRefreshTokenTick()","no session"),k.a(2);case 1:if(E=Math.floor((1e3*S.expires_at-e)/Cs),l._debug("#_autoRefreshTokenTick()","access token expires in ".concat(E," ticks, a tick lasts ").concat(Cs,"ms, refresh threshold is ").concat(3," ticks")),!(E<=3)){k.n=2;break}return k.n=2,l._callRefreshToken(S.refresh_token);case 2:return k.a(2)}},_callee190)}));return function(e){return _.apply(this,arguments)}}());case 2:return _.a(2,_.v);case 3:_.p=3,_.v;case 4:return _.p=4,l._debug("#_autoRefreshTokenTick()","end"),_.f(4);case 5:return _.a(2)}},_callee191,null,[[1,3],[0,,4,5]])})));case 2:_.n=5;break;case 3:if(_.p=3,!((e=_.v).isAcquireTimeout||e instanceof au)){_.n=4;break}this._debug("auto refresh token tick lock not available"),_.n=5;break;case 4:throw e;case 5:return _.a(2)}},_callee192,this,[[1,3]])})),function(){return L.apply(this,arguments)})},{key:"_handleVisibilityChange",value:(D=_asyncToGenerator(_regenerator().m(function _callee194(){var e=this;return _regenerator().w(function(l){for(;;)switch(l.p=l.n){case 0:if(this._debug("#_handleVisibilityChange()"),isBrowser()&&(null===window||void 0===window?void 0:window.addEventListener)){l.n=1;break}return this.autoRefreshToken&&this.startAutoRefresh(),l.a(2,!1);case 1:return l.p=1,this.visibilityChangedCallback=_asyncToGenerator(_regenerator().m(function _callee193(){return _regenerator().w(function(l){for(;;)switch(l.n){case 0:return l.n=1,e._onVisibilityChanged(!1);case 1:return l.a(2,l.v)}},_callee193)})),null===window||void 0===window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),l.n=2,this._onVisibilityChanged(!0);case 2:l.n=4;break;case 3:l.p=3,l.v;case 4:return l.a(2)}},_callee194,this,[[1,3]])})),function(){return D.apply(this,arguments)})},{key:"_onVisibilityChanged",value:(O=_asyncToGenerator(_regenerator().m(function _callee196(e){var l,_=this;return _regenerator().w(function(S){for(;;)switch(S.n){case 0:if(l="#_onVisibilityChanged(".concat(e,")"),this._debug(l,"visibilityState",document.visibilityState),"visible"!==document.visibilityState){S.n=3;break}if(this.autoRefreshToken&&this._startAutoRefresh(),e){S.n=2;break}return S.n=1,this.initializePromise;case 1:return S.n=2,this._acquireLock(-1,_asyncToGenerator(_regenerator().m(function _callee195(){return _regenerator().w(function(e){for(;;)switch(e.n){case 0:if("visible"===document.visibilityState){e.n=1;break}return _._debug(l,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting"),e.a(2);case 1:return e.n=2,_._recoverAndRefresh();case 2:return e.a(2)}},_callee195)})));case 2:S.n=4;break;case 3:"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh();case 4:return S.a(2)}},_callee196,this)})),function(e){return O.apply(this,arguments)})},{key:"_getUrlForProvider",value:(I=_asyncToGenerator(_regenerator().m(function _callee197(e,l,_){var S,E,k,T,M,R,I;return _regenerator().w(function(O){for(;;)switch(O.n){case 0:if(S=["provider=".concat(encodeURIComponent(l))],(null==_?void 0:_.redirectTo)&&S.push("redirect_to=".concat(encodeURIComponent(_.redirectTo))),(null==_?void 0:_.scopes)&&S.push("scopes=".concat(encodeURIComponent(_.scopes))),"pkce"!==this.flowType){O.n=2;break}return O.n=1,getCodeChallengeAndMethod(this.storage,this.storageKey);case 1:E=O.v,k=_slicedToArray(E,2),T=k[0],M=k[1],R=new URLSearchParams({code_challenge:"".concat(encodeURIComponent(T)),code_challenge_method:"".concat(encodeURIComponent(M))}),S.push(R.toString());case 2:return(null==_?void 0:_.queryParams)&&(I=new URLSearchParams(_.queryParams),S.push(I.toString())),(null==_?void 0:_.skipBrowserRedirect)&&S.push("skip_http_redirect=".concat(_.skipBrowserRedirect)),O.a(2,"".concat(e,"?").concat(S.join("&")))}},_callee197,this)})),function(e,l,_){return I.apply(this,arguments)})},{key:"_unenroll",value:(R=_asyncToGenerator(_regenerator().m(function _callee199(e){var l,_=this;return _regenerator().w(function(S){for(;;)switch(S.p=S.n){case 0:return S.p=0,S.n=1,this._useSession(function(){var l=_asyncToGenerator(_regenerator().m(function _callee198(l){var S,E,k;return _regenerator().w(function(T){for(;;)switch(T.n){case 0:if(E=l.data,!(k=l.error)){T.n=1;break}return T.a(2,{data:null,error:k});case 1:return T.n=2,_request(_.fetch,"DELETE","".concat(_.url,"/factors/").concat(e.factorId),{headers:_.headers,jwt:null===(S=null==E?void 0:E.session)||void 0===S?void 0:S.access_token});case 2:return T.a(2,T.v)}},_callee198)}));return function(e){return l.apply(this,arguments)}}());case 1:return S.a(2,S.v);case 2:if(S.p=2,!isAuthError(l=S.v)){S.n=3;break}return S.a(2,{data:null,error:l});case 3:throw l;case 4:return S.a(2)}},_callee199,this,[[0,2]])})),function(e){return R.apply(this,arguments)})},{key:"_enroll",value:(M=_asyncToGenerator(_regenerator().m(function _callee201(e){var l,_=this;return _regenerator().w(function(S){for(;;)switch(S.p=S.n){case 0:return S.p=0,S.n=1,this._useSession(function(){var l=_asyncToGenerator(_regenerator().m(function _callee200(l){var S,E,k,T,M,R,I,O;return _regenerator().w(function(D){for(;;)switch(D.n){case 0:if(k=l.data,!(T=l.error)){D.n=1;break}return D.a(2,{data:null,error:T});case 1:return M=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},"phone"===e.factorType?{phone:e.phone}:"totp"===e.factorType?{issuer:e.issuer}:{}),D.n=2,_request(_.fetch,"POST","".concat(_.url,"/factors"),{body:M,headers:_.headers,jwt:null===(S=null==k?void 0:k.session)||void 0===S?void 0:S.access_token});case 2:if(R=D.v,I=R.data,!(O=R.error)){D.n=3;break}return D.a(2,{data:null,error:O});case 3:return"totp"===e.factorType&&"totp"===I.type&&(null===(E=null==I?void 0:I.totp)||void 0===E?void 0:E.qr_code)&&(I.totp.qr_code="data:image/svg+xml;utf-8,".concat(I.totp.qr_code)),D.a(2,{data:I,error:null})}},_callee200)}));return function(e){return l.apply(this,arguments)}}());case 1:return S.a(2,S.v);case 2:if(S.p=2,!isAuthError(l=S.v)){S.n=3;break}return S.a(2,{data:null,error:l});case 3:throw l;case 4:return S.a(2)}},_callee201,this,[[0,2]])})),function(e){return M.apply(this,arguments)})},{key:"_verify",value:(T=_asyncToGenerator(_regenerator().m(function _callee204(e){var l=this;return _regenerator().w(function(_){for(;;)if(0===_.n)return _.a(2,this._acquireLock(-1,_asyncToGenerator(_regenerator().m(function _callee203(){var _;return _regenerator().w(function(S){for(;;)switch(S.p=S.n){case 0:return S.p=0,S.n=1,l._useSession(function(){var _=_asyncToGenerator(_regenerator().m(function _callee202(_){var S,E,k,T,M,R,I;return _regenerator().w(function(O){for(;;)switch(O.n){case 0:if(E=_.data,!(k=_.error)){O.n=1;break}return O.a(2,{data:null,error:k});case 1:return T=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:"create"===e.webauthn.type?serializeCredentialCreationResponse(e.webauthn.credential_response):serializeCredentialRequestResponse(e.webauthn.credential_response)})}:{code:e.code}),O.n=2,_request(l.fetch,"POST","".concat(l.url,"/factors/").concat(e.factorId,"/verify"),{body:T,headers:l.headers,jwt:null===(S=null==E?void 0:E.session)||void 0===S?void 0:S.access_token});case 2:if(M=O.v,R=M.data,!(I=M.error)){O.n=3;break}return O.a(2,{data:null,error:I});case 3:return O.n=4,l._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+R.expires_in},R));case 4:return O.n=5,l._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",R);case 5:return O.a(2,{data:R,error:I})}},_callee202)}));return function(e){return _.apply(this,arguments)}}());case 1:return S.a(2,S.v);case 2:if(S.p=2,!isAuthError(_=S.v)){S.n=3;break}return S.a(2,{data:null,error:_});case 3:throw _;case 4:return S.a(2)}},_callee203,null,[[0,2]])}))))},_callee204,this)})),function(e){return T.apply(this,arguments)})},{key:"_challenge",value:(k=_asyncToGenerator(_regenerator().m(function _callee207(e){var l=this;return _regenerator().w(function(_){for(;;)if(0===_.n)return _.a(2,this._acquireLock(-1,_asyncToGenerator(_regenerator().m(function _callee206(){var _;return _regenerator().w(function(S){for(;;)switch(S.p=S.n){case 0:return S.p=0,S.n=1,l._useSession(function(){var _=_asyncToGenerator(_regenerator().m(function _callee205(_){var S,E,k,T,M,R;return _regenerator().w(function(I){for(;;)switch(I.n){case 0:if(E=_.data,!(k=_.error)){I.n=1;break}return I.a(2,{data:null,error:k});case 1:return I.n=2,_request(l.fetch,"POST","".concat(l.url,"/factors/").concat(e.factorId,"/challenge"),{body:e,headers:l.headers,jwt:null===(S=null==E?void 0:E.session)||void 0===S?void 0:S.access_token});case 2:if(!(T=I.v).error){I.n=3;break}return I.a(2,T);case 3:if("webauthn"===(M=T.data).type){I.n=4;break}return I.a(2,{data:M,error:null});case 4:R=M.webauthn.type,I.n="create"===R?5:"request"===R?6:7;break;case 5:return I.a(2,{data:Object.assign(Object.assign({},M),{webauthn:Object.assign(Object.assign({},M.webauthn),{credential_options:Object.assign(Object.assign({},M.webauthn.credential_options),{publicKey:deserializeCredentialCreationOptions(M.webauthn.credential_options.publicKey)})})}),error:null});case 6:return I.a(2,{data:Object.assign(Object.assign({},M),{webauthn:Object.assign(Object.assign({},M.webauthn),{credential_options:Object.assign(Object.assign({},M.webauthn.credential_options),{publicKey:deserializeCredentialRequestOptions(M.webauthn.credential_options.publicKey)})})}),error:null});case 7:return I.a(2)}},_callee205)}));return function(e){return _.apply(this,arguments)}}());case 1:return S.a(2,S.v);case 2:if(S.p=2,!isAuthError(_=S.v)){S.n=3;break}return S.a(2,{data:null,error:_});case 3:throw _;case 4:return S.a(2)}},_callee206,null,[[0,2]])}))))},_callee207,this)})),function(e){return k.apply(this,arguments)})},{key:"_challengeAndVerify",value:(E=_asyncToGenerator(_regenerator().m(function _callee208(e){var l,_,S;return _regenerator().w(function(E){for(;;)switch(E.n){case 0:return E.n=1,this._challenge({factorId:e.factorId});case 1:if(l=E.v,_=l.data,!(S=l.error)){E.n=2;break}return E.a(2,{data:null,error:S});case 2:return E.n=3,this._verify({factorId:e.factorId,challengeId:_.id,code:e.code});case 3:return E.a(2,E.v)}},_callee208,this)})),function(e){return E.apply(this,arguments)})},{key:"_listFactors",value:(S=_asyncToGenerator(_regenerator().m(function _callee209(){var e,l,_,S,E,k,T,M;return _regenerator().w(function(R){for(;;)switch(R.n){case 0:return R.n=1,this.getUser();case 1:if(l=R.v,_=l.data.user,!(S=l.error)){R.n=2;break}return R.a(2,{data:null,error:S});case 2:E={all:[],phone:[],totp:[],webauthn:[]},k=_createForOfIteratorHelper2(null!==(e=null==_?void 0:_.factors)&&void 0!==e?e:[]);try{for(k.s();!(T=k.n()).done;)M=T.value,E.all.push(M),"verified"===M.status&&E[M.factor_type].push(M)}catch(I){k.e(I)}finally{k.f()}return R.a(2,{data:E,error:null})}},_callee209,this)})),function(){return S.apply(this,arguments)})},{key:"_getAuthenticatorAssuranceLevel",value:(_=_asyncToGenerator(_regenerator().m(function _callee212(){var e=this;return _regenerator().w(function(l){for(;;)if(0===l.n)return l.a(2,this._acquireLock(-1,_asyncToGenerator(_regenerator().m(function _callee211(){return _regenerator().w(function(l){for(;;)switch(l.n){case 0:return l.n=1,e._useSession(function(){var e=_asyncToGenerator(_regenerator().m(function _callee210(e){var l,_,S,E,k,T,M,R,I;return _regenerator().w(function(O){for(;;)switch(O.n){case 0:if(S=e.data.session,!(E=e.error)){O.n=1;break}return O.a(2,{data:null,error:E});case 1:if(S){O.n=2;break}return O.a(2,{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null});case 2:return k=decodeJWT(S.access_token),T=k.payload,M=null,T.aal&&(M=T.aal),R=M,(null!==(_=null===(l=S.user.factors)||void 0===l?void 0:l.filter(function(e){return"verified"===e.status}))&&void 0!==_?_:[]).length>0&&(R="aal2"),I=T.amr||[],O.a(2,{data:{currentLevel:M,nextLevel:R,currentAuthenticationMethods:I},error:null})}},_callee210)}));return function(l){return e.apply(this,arguments)}}());case 1:return l.a(2,l.v)}},_callee211)}))))},_callee212,this)})),function(){return _.apply(this,arguments)})},{key:"fetchJwk",value:(l=_asyncToGenerator(_regenerator().m(function _callee213(e){var l,_,S,E,k,T=arguments;return _regenerator().w(function(M){for(;;)switch(M.n){case 0:if(!(l=(T.length>1&&void 0!==T[1]?T[1]:{keys:[]}).keys.find(function(l){return l.kid===e}))){M.n=1;break}return M.a(2,l);case 1:if(_=Date.now(),!((l=this.jwks.keys.find(function(l){return l.kid===e}))&&this.jwks_cached_at+6e5>_)){M.n=2;break}return M.a(2,l);case 2:return M.n=3,_request(this.fetch,"GET","".concat(this.url,"/.well-known/jwks.json"),{headers:this.headers});case 3:if(S=M.v,E=S.data,!(k=S.error)){M.n=4;break}throw k;case 4:if(E.keys&&0!==E.keys.length){M.n=5;break}return M.a(2,null);case 5:if(this.jwks=E,this.jwks_cached_at=_,l=E.keys.find(function(l){return l.kid===e})){M.n=6;break}return M.a(2,null);case 6:return M.a(2,l)}},_callee213,this)})),function(e){return l.apply(this,arguments)})},{key:"getClaims",value:(e=_asyncToGenerator(_regenerator().m(function _callee214(e){var l,_,S,E,k,T,M,R,I,O,D,L,U,B,z,j,G,H,V,W=arguments;return _regenerator().w(function(q){for(;;)switch(q.p=q.n){case 0:if(l=W.length>1&&void 0!==W[1]?W[1]:{},q.p=1,_=e){q.n=4;break}return q.n=2,this.getSession();case 2:if(S=q.v,E=S.data,!(k=S.error)&&E.session){q.n=3;break}return q.a(2,{data:null,error:k});case 3:_=E.session.access_token;case 4:if(T=decodeJWT(_),M=T.header,R=T.payload,I=T.signature,O=T.raw,D=O.header,L=O.payload,(null==l?void 0:l.allowExpired)||validateExp(R.exp),M.alg&&!M.alg.startsWith("HS")&&M.kid&&"crypto"in globalThis&&"subtle"in globalThis.crypto){q.n=5;break}H=null,q.n=7;break;case 5:return q.n=6,this.fetchJwk(M.kid,(null==l?void 0:l.keys)?{keys:l.keys}:null==l?void 0:l.jwks);case 6:H=q.v;case 7:if(U=H){q.n=10;break}return q.n=8,this.getUser(_);case 8:if(B=q.v,!(z=B.error)){q.n=9;break}throw z;case 9:return q.a(2,{data:{claims:R,header:M,signature:I},error:null});case 10:return j=getAlgorithm(M.alg),q.n=11,crypto.subtle.importKey("jwk",U,j,!0,["verify"]);case 11:return G=q.v,q.n=12,crypto.subtle.verify(j,G,I,stringToUint8Array("".concat(D,".").concat(L)));case 12:if(q.v){q.n=13;break}throw new Vs("Invalid JWT signature");case 13:return q.a(2,{data:{claims:R,header:M,signature:I},error:null});case 14:if(q.p=14,!isAuthError(V=q.v)){q.n=15;break}return q.a(2,{data:null,error:V});case 15:throw V;case 16:return q.a(2)}},_callee214,this,[[1,14]])})),function(l){return e.apply(this,arguments)})}]);var e,l,_,S,E,k,T,M,R,I,O,D,L,U,B,z,j,G,H,V,W,q,X,K,Y,J,Q,Z,$,ee,te,ne,re,ie,ae,oe,se,ue,le,ce,he,de,fe,pe,ve,ge,me,ye,_e,be,Se,we,xe,Ee,ke,Ae,Ce,Te,Me,Re,Ie,Pe,Oe,De,Le}();vu.nextInstanceID=0;var gu=function(e){function SupabaseAuthClient(e){return _classCallCheck3(this,SupabaseAuthClient),_callSuper(this,SupabaseAuthClient,[e])}return _inherits(SupabaseAuthClient,e),_createClass3(SupabaseAuthClient)}(vu),__awaiter=function(e,l,_,S){return new(_||(_=Promise))(function(E,k){function fulfilled(e){try{step(S.next(e))}catch(oo){k(oo)}}function rejected(e){try{step(S.throw(e))}catch(oo){k(oo)}}function step(e){var l;e.done?E(e.value):(l=e.value,l instanceof _?l:new _(function(e){e(l)})).then(fulfilled,rejected)}step((S=S.apply(e,l||[])).next())})},mu=function(){return _createClass3(function SupabaseClient(e,l,_){var S,E,k;_classCallCheck3(this,SupabaseClient),this.supabaseUrl=e,this.supabaseKey=l;var T=function(e){var l,_=null==e?void 0:e.trim();if(!_)throw new Error("supabaseUrl is required.");if(!_.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL((l=_).endsWith("/")?l:l+"/")}catch(S){throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}(e);if(!l)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",T),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",T),this.storageUrl=new URL("storage/v1",T),this.functionsUrl=new URL("functions/v1",T);var M="sb-".concat(T.hostname.split(".")[0],"-auth-token"),R=function(e,l){var _,S,E=this,k=e.db,T=e.auth,M=e.realtime,R=e.global,I=l.db,O=l.auth,D=l.realtime,L=l.global,U={db:Object.assign(Object.assign({},I),k),auth:Object.assign(Object.assign({},O),T),realtime:Object.assign(Object.assign({},D),M),storage:{},global:Object.assign(Object.assign(Object.assign({},L),R),{headers:Object.assign(Object.assign({},null!==(_=null==L?void 0:L.headers)&&void 0!==_?_:{}),null!==(S=null==R?void 0:R.headers)&&void 0!==S?S:{})}),accessToken:function(){return __awaiter$1(E,void 0,void 0,_regenerator().m(function _callee81(){return _regenerator().w(function(e){for(;;)if(0===e.n)return e.a(2,"")},_callee81)}))}};return e.accessToken?U.accessToken=e.accessToken:delete U.accessToken,U}(null!=_?_:{},{db:xs,realtime:ks,auth:Object.assign(Object.assign({},Es),{storageKey:M}),global:ws});this.storageKey=null!==(S=R.auth.storageKey)&&void 0!==S?S:"",this.headers=null!==(E=R.global.headers)&&void 0!==E?E:{},R.accessToken?(this.accessToken=R.accessToken,this.auth=new Proxy({},{get:function(e,l){throw new Error("@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.".concat(String(l)," is not possible"))}})):this.auth=this._initSupabaseAuthClient(null!==(k=R.auth)&&void 0!==k?k:{},this.headers,R.global.fetch),this.fetch=fetchWithAuth(l,this._getAccessToken.bind(this),R.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},R.realtime)),this.rest=new Wo(new URL("rest/v1",T).href,{headers:this.headers,schema:R.db.schema,fetch:this.fetch}),this.storage=new bs(this.storageUrl.href,this.headers,this.fetch,null==_?void 0:_.storage),R.accessToken||this._listenForAuthEvents()},[{key:"functions",get:function(){return new wo(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}},{key:"from",value:function(e){return this.rest.from(e)}},{key:"schema",value:function(e){return this.rest.schema(e)}},{key:"rpc",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{head:!1,get:!1,count:void 0};return this.rest.rpc(e,l,_)}},{key:"channel",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}};return this.realtime.channel(e,l)}},{key:"getChannels",value:function(){return this.realtime.getChannels()}},{key:"removeChannel",value:function(e){return this.realtime.removeChannel(e)}},{key:"removeAllChannels",value:function(){return this.realtime.removeAllChannels()}},{key:"_getAccessToken",value:function(){return __awaiter(this,void 0,void 0,_regenerator().m(function _callee215(){var e,l,_,S;return _regenerator().w(function(E){for(;;)switch(E.n){case 0:if(!this.accessToken){E.n=2;break}return E.n=1,this.accessToken();case 1:return E.a(2,E.v);case 2:return E.n=3,this.auth.getSession();case 3:return _=E.v,S=_.data,E.a(2,null!==(l=null===(e=S.session)||void 0===e?void 0:e.access_token)&&void 0!==l?l:this.supabaseKey)}},_callee215,this)}))}},{key:"_initSupabaseAuthClient",value:function(e,l,_){var S=e.autoRefreshToken,E=e.persistSession,k=e.detectSessionInUrl,T=e.storage,M=e.userStorage,R=e.storageKey,I=e.flowType,O=e.lock,D=e.debug,L={Authorization:"Bearer ".concat(this.supabaseKey),apikey:"".concat(this.supabaseKey)};return new gu({url:this.authUrl.href,headers:Object.assign(Object.assign({},L),l),storageKey:R,autoRefreshToken:S,persistSession:E,detectSessionInUrl:k,storage:T,userStorage:M,flowType:I,lock:O,debug:D,fetch:_,hasCustomAuthorizationHeader:Object.keys(this.headers).some(function(e){return"authorization"===e.toLowerCase()})})}},{key:"_initRealtimeClient",value:function(e){return new ls(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null==e?void 0:e.params)}))}},{key:"_listenForAuthEvents",value:function(){var e=this;return this.auth.onAuthStateChange(function(l,_){e._handleTokenChanged(l,"CLIENT",null==_?void 0:_.access_token)})}},{key:"_handleTokenChanged",value:function(e,l,_){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===_?"SIGNED_OUT"===e&&(this.realtime.setAuth(),"STORAGE"==l&&this.auth.signOut(),this.changedAccessToken=void 0):(this.changedAccessToken=_,this.realtime.setAuth(_))}}])}();O("ao",function(e,l,_){return new mu(e,l,_)});!function(){if("undefined"!=typeof window)return!1;if("undefined"==typeof process)return!1;var e=process.version;if(null==e)return!1;var l=e.match(/^v(\d+)\./);!!l&&parseInt(l[1],10)}();for(var yu,_u=[],bu=0;bu<256;++bu)_u.push((bu+256).toString(16).slice(1));var Su=new Uint8Array(16);var wu={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function addUniqueItem(e,l){-1===e.indexOf(l)&&e.push(l)}function removeItem(e,l){var _=e.indexOf(l);_>-1&&e.splice(_,1)}var xu=O("H",function(e,l,_){return _>l?l:_<e?e:_}),Eu=O("a1",function(){}),ku=O("M",{}),Au=O("j",function(e){return/^-?(?:[0-9]+(?:\.[0-9]+)?|\.[0-9]+)$/.test(e)});function isObject$1(e){return"object"===_typeof3(e)&&null!==e}var Cu=O("k",function(e){return/^0(?:[\0-\x08\x0E-\x1F!-\x2D\/-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+$/.test(e)});function memo(e){var l;return function(){return void 0===l&&(l=e()),l}}var Tu=O("N",function(e){return e}),combineFunctions=function(e,l){return function(_){return l(e(_))}},Mu=O("E",function(){for(var e=arguments.length,l=new Array(e),_=0;_<e;_++)l[_]=arguments[_];return l.reduce(combineFunctions)}),Ru=O("G",function(e,l,_){var S=l-e;return 0===S?1:(_-e)/S}),Iu=function(){return _createClass3(function SubscriptionManager(){_classCallCheck3(this,SubscriptionManager),this.subscriptions=[]},[{key:"add",value:function(e){var l=this;return addUniqueItem(this.subscriptions,e),function(){return removeItem(l.subscriptions,e)}}},{key:"notify",value:function(e,l,_){var S=this.subscriptions.length;if(S)if(1===S)this.subscriptions[0](e,l,_);else for(var E=0;E<S;E++){var k=this.subscriptions[E];k&&k(e,l,_)}}},{key:"getSize",value:function(){return this.subscriptions.length}},{key:"clear",value:function(){this.subscriptions.length=0}}])}();O("S",Iu);var Pu=O("x",function(e){return 1e3*e}),Ou=O("F",function(e){return e/1e3});function velocityPerSecond(e,l){return l?e*(1e3/l):0}var calcBezier=function(e,l,_){return(((1-3*_+3*l)*e+(3*_-6*l))*e+3*l)*e};function cubicBezier(e,l,_,S){if(e===l&&_===S)return Tu;var getTForX=function(l){return function(e,l,_,S,E){var k,T,M=0;do{(k=calcBezier(T=l+(_-l)/2,S,E)-e)>0?_=T:l=T}while(Math.abs(k)>1e-7&&++M<12);return T}(l,0,1,e,_)};return function(e){return 0===e||1===e?e:calcBezier(getTForX(e),l,S)}}var mirrorEasing=function(e){return function(l){return l<=.5?e(2*l)/2:(2-e(2*(1-l)))/2}},reverseEasing=function(e){return function(l){return 1-e(1-l)}},Du=cubicBezier(.33,1.53,.69,.99),Lu=reverseEasing(Du),Uu=mirrorEasing(Lu),anticipate=function(e){return(e*=2)<1?.5*Lu(e):.5*(2-Math.pow(2,-10*(e-1)))},circIn=function(e){return 1-Math.sin(Math.acos(e))},Fu=O("Q",reverseEasing(circIn)),Nu=mirrorEasing(circIn),Bu=cubicBezier(.42,0,1,1),zu=cubicBezier(0,0,.58,1),ju=cubicBezier(.42,0,.58,1),isBezierDefinition=function(e){return Array.isArray(e)&&"number"==typeof e[0]},Gu={linear:Tu,easeIn:Bu,easeInOut:ju,easeOut:zu,circIn:circIn,circInOut:Nu,circOut:Fu,backIn:Lu,backInOut:Uu,backOut:Du,anticipate:anticipate},easingDefinitionToFunction=function(e){if(isBezierDefinition(e)){Eu(4===e.length);var l=_slicedToArray(e,4);return cubicBezier(l[0],l[1],l[2],l[3])}return"string"==typeof e?Gu[e]:e},Hu=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function createRenderBatcher(e,l){var _=!1,S=!0,E={delta:0,timestamp:0,isProcessing:!1},flagRunNextFrame=function(){return _=!0},k=Hu.reduce(function(e,l){return e[l]=function(e){var l=new Set,_=new Set,S=!1,E=!1,k=new WeakSet,T={delta:0,timestamp:0,isProcessing:!1};function triggerCallback(l){k.has(l)&&(M.schedule(l),e()),l(T)}var M={schedule:function(e){var E=arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&S?l:_;return arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&k.add(e),E.has(e)||E.add(e),e},cancel:function(e){_.delete(e),k.delete(e)},process:function(e){if(T=e,S)E=!0;else{S=!0;var k=[_,l];_=k[1],(l=k[0]).forEach(triggerCallback),l.clear(),S=!1,E&&(E=!1,M.process(e))}}};return M}(flagRunNextFrame),e},{}),T=k.setup,M=k.read,R=k.resolveKeyframes,I=k.preUpdate,O=k.update,D=k.preRender,L=k.render,U=k.postRender,_processBatch=function(){var k=ku.useManualTiming?E.timestamp:performance.now();_=!1,ku.useManualTiming||(E.delta=S?1e3/60:Math.max(Math.min(k-E.timestamp,40),1)),E.timestamp=k,E.isProcessing=!0,T.process(E),M.process(E),R.process(E),I.process(E),O.process(E),D.process(E),L.process(E),U.process(E),E.isProcessing=!1,_&&l&&(S=!1,e(_processBatch))},B=Hu.reduce(function(l,T){var M=k[T];return l[T]=function(l){var k=arguments.length>1&&void 0!==arguments[1]&&arguments[1],T=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return _||(_=!0,S=!0,E.isProcessing||e(_processBatch)),M.schedule(l,k,T)},l},{});return{schedule:B,cancel:function(e){for(var l=0;l<Hu.length;l++)k[Hu[l]].cancel(e)},state:E,steps:k}}var Vu,Wu=createRenderBatcher("undefined"!=typeof requestAnimationFrame?requestAnimationFrame:Tu,!0),qu=Wu.schedule,Xu=Wu.cancel,Ku=Wu.state,Yu=Wu.steps;function clearTime(){Vu=void 0}O({f:qu,h:Xu,C:Ku,U:Yu});var Ju=O("e",{now:function(){return void 0===Vu&&Ju.set(Ku.isProcessing||ku.useManualTiming?Ku.timestamp:performance.now()),Vu},set:function(e){Vu=e,queueMicrotask(clearTime)}}),checkStringStartsWith=function(e){return function(l){return"string"==typeof l&&l.startsWith(e)}},Qu=(O("a",checkStringStartsWith("--")),checkStringStartsWith("var(--")),isCSSVariableToken=function(e){return!!Qu(e)&&Zu.test(e.split("/*")[0].trim())},Zu=/var\(--(?:[\x2D0-9A-Z_a-z\u017F\u212A]+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*|[\x2D0-9A-Z_a-z\u017F\u212A]+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*,(?:[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:(?![\t-\r \(\)\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uD800-\uDFFF\uFEFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])|[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*\((?:(?:(?![\(\)\uD800-\uDFFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])|\((?:(?![\(\)\uD800-\uDFFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])*\))*\))+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)\)$/i,$u={test:function(e){return"number"==typeof e},parse:parseFloat,transform:function(e){return e}},el=_objectSpread2(_objectSpread2({},$u),{},{transform:function(e){return xu(0,1,e)}}),tl=_objectSpread2(_objectSpread2({},$u),{},{default:1}),sanitize=function(e){return Math.round(1e5*e)/1e5},nl=/-?(?:[0-9]+(?:\.[0-9]+)?|\.[0-9]+)/g;var rl=/^(?:#[0-9a-f]{3,8}|(?:rgb|h[s\u017F]l)a?\((?:-?[\.0-9]+%?[\t-\r ,\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+){2}-?[\.0-9]+%?[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:[,\/][\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)?(?:\b[0-9]+(?:\.[0-9]+)?|\.[0-9]+)?%?\))$/i,isColorString=function(e,l){return function(_){return Boolean("string"==typeof _&&rl.test(_)&&_.startsWith(e)||l&&!function(e){return null==e}(_)&&Object.prototype.hasOwnProperty.call(_,l))}},splitColor=function(e,l,_){return function(S){if("string"!=typeof S)return S;var E=_slicedToArray(S.match(nl),4),k=E[0],T=E[1],M=E[2],R=E[3];return _defineProperty3(_defineProperty3(_defineProperty3(_defineProperty3({},e,parseFloat(k)),l,parseFloat(T)),_,parseFloat(M)),"alpha",void 0!==R?parseFloat(R):1)}},il=_objectSpread2(_objectSpread2({},$u),{},{transform:function(e){return Math.round(function(e){return xu(0,255,e)}(e))}}),al={test:isColorString("rgb","red"),parse:splitColor("red","green","blue"),transform:function(e){var l=e.red,_=e.green,S=e.blue,E=e.alpha,k=void 0===E?1:E;return"rgba("+il.transform(l)+", "+il.transform(_)+", "+il.transform(S)+", "+sanitize(el.transform(k))+")"}};var ol={test:isColorString("#"),parse:function(e){var l="",_="",S="",E="";return e.length>5?(l=e.substring(1,3),_=e.substring(3,5),S=e.substring(5,7),E=e.substring(7,9)):(l=e.substring(1,2),_=e.substring(2,3),S=e.substring(3,4),E=e.substring(4,5),l+=l,_+=_,S+=S,E+=E),{red:parseInt(l,16),green:parseInt(_,16),blue:parseInt(S,16),alpha:E?parseInt(E,16)/255:1}},transform:al.transform},createUnitType=function(e){return{test:function(l){return"string"==typeof l&&l.endsWith(e)&&1===l.split(" ").length},parse:parseFloat,transform:function(l){return"".concat(l).concat(e)}}},sl=createUnitType("deg"),ul=O("L",createUnitType("%")),ll=O("p",createUnitType("px")),cl=createUnitType("vh"),hl=createUnitType("vw"),dl=function(){return _objectSpread2(_objectSpread2({},ul),{},{parse:function(e){return ul.parse(e)/100},transform:function(e){return ul.transform(100*e)}})}(),fl={test:isColorString("hsl","hue"),parse:splitColor("hue","saturation","lightness"),transform:function(e){var l=e.hue,_=e.saturation,S=e.lightness,E=e.alpha,k=void 0===E?1:E;return"hsla("+Math.round(l)+", "+ul.transform(sanitize(_))+", "+ul.transform(sanitize(S))+", "+sanitize(el.transform(k))+")"}},pl={test:function(e){return al.test(e)||ol.test(e)||fl.test(e)},parse:function(e){return al.test(e)?al.parse(e):fl.test(e)?fl.parse(e):ol.parse(e)},transform:function(e){return"string"==typeof e?e:e.hasOwnProperty("red")?al.transform(e):fl.transform(e)},getAnimatableNone:function(e){var l=pl.parse(e);return l.alpha=0,pl.transform(l)}},vl=/(?:#[0-9a-f]{3,8}|(?:rgb|h[s\u017F]l)a?\((?:-?[\.0-9]+%?[\t-\r ,\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+){2}-?[\.0-9]+%?[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:[,\/][\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)?(?:\b[0-9]+(?:\.[0-9]+)?|\.[0-9]+)?%?\))/gi;var gl="number",ml="color",yl=/var[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*\([\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*--(?:[\x2D0-9A-Z_a-z\u017F\u212A]+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*|[\x2D0-9A-Z_a-z\u017F\u212A]+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*,(?:[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:(?![\t-\r \(\)\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uD800-\uDFFF\uFEFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])|[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*\((?:(?:(?![\(\)\uD800-\uDFFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])|\((?:(?![\(\)\uD800-\uDFFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])*\))*\))+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)\)|#[0-9a-f]{3,8}|(?:rgb|h[s\u017F]l)a?\((?:-?[\.0-9]+%?[\t-\r ,\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+){2}-?[\.0-9]+%?[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:[,\/][\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)?(?:\b[0-9]+(?:\.[0-9]+)?|\.[0-9]+)?%?\)|-?(?:[0-9]+(?:\.[0-9]+)?|\.[0-9]+)/gi;function analyseComplexValue(e){var l=e.toString(),_=[],S={color:[],number:[],var:[]},E=[],k=0,T=l.replace(yl,function(e){return pl.test(e)?(S.color.push(k),E.push(ml),_.push(pl.parse(e))):e.startsWith("var(")?(S.var.push(k),E.push("var"),_.push(e)):(S.number.push(k),E.push(gl),_.push(parseFloat(e))),++k,"${}"}).split("${}");return{values:_,split:T,indexes:S,types:E}}function parseComplexValue(e){return analyseComplexValue(e).values}function createTransformer(e){var l=analyseComplexValue(e),_=l.split,S=l.types,E=_.length;return function(e){for(var l="",k=0;k<E;k++)if(l+=_[k],void 0!==e[k]){var T=S[k];l+=T===gl?sanitize(e[k]):T===ml?pl.transform(e[k]):e[k]}return l}}var convertNumbersToZero=function(e){return"number"==typeof e?0:pl.test(e)?pl.getAnimatableNone(e):e};var _l=O("o",{test:function(e){var l,_;return isNaN(e)&&"string"==typeof e&&((null===(l=e.match(nl))||void 0===l?void 0:l.length)||0)+((null===(_=e.match(vl))||void 0===_?void 0:_.length)||0)>0},parse:parseComplexValue,createTransformer:createTransformer,getAnimatableNone:function(e){var l=parseComplexValue(e);return createTransformer(e)(l.map(convertNumbersToZero))}});function hueToRgb(e,l,_){return _<0&&(_+=1),_>1&&(_-=1),_<1/6?e+6*(l-e)*_:_<.5?l:_<2/3?e+(l-e)*(2/3-_)*6:e}function mixImmediate(e,l){return function(_){return _>0?l:e}}var bl=O("m",function(e,l,_){return e+(l-e)*_}),mixLinearColor=function(e,l,_){var S=e*e,E=_*(l*l-S)+S;return E<0?0:Math.sqrt(E)},Sl=[ol,al,fl];function asRGBA(e){var l,_=(l=e,Sl.find(function(e){return e.test(l)}));if(!Boolean(_))return!1;var S=_.parse(e);return _===fl&&(S=function(e){var l=e.hue,_=e.saturation,S=e.lightness,E=e.alpha;l/=360,S/=100;var k=0,T=0,M=0;if(_/=100){var R=S<.5?S*(1+_):S+_-S*_,I=2*S-R;k=hueToRgb(I,R,l+1/3),T=hueToRgb(I,R,l),M=hueToRgb(I,R,l-1/3)}else k=T=M=S;return{red:Math.round(255*k),green:Math.round(255*T),blue:Math.round(255*M),alpha:E}}(S)),S}var mixColor=function(e,l){var _=asRGBA(e),S=asRGBA(l);if(!_||!S)return mixImmediate(e,l);var E=_objectSpread2({},_);return function(e){return E.red=mixLinearColor(_.red,S.red,e),E.green=mixLinearColor(_.green,S.green,e),E.blue=mixLinearColor(_.blue,S.blue,e),E.alpha=bl(_.alpha,S.alpha,e),al.transform(E)}},wl=new Set(["none","hidden"]);function mixNumber(e,l){return function(_){return bl(e,l,_)}}function getMixer(e){return"number"==typeof e?mixNumber:"string"==typeof e?isCSSVariableToken(e)?mixImmediate:pl.test(e)?mixColor:mixComplex:Array.isArray(e)?mixArray:"object"===_typeof3(e)?pl.test(e)?mixColor:mixObject:mixImmediate}function mixArray(e,l){var _=_toConsumableArray3(e),S=_.length,E=e.map(function(e,_){return getMixer(e)(e,l[_])});return function(e){for(var l=0;l<S;l++)_[l]=E[l](e);return _}}function mixObject(e,l){var _=_objectSpread2(_objectSpread2({},e),l),S={};for(var E in _)void 0!==e[E]&&void 0!==l[E]&&(S[E]=getMixer(e[E])(e[E],l[E]));return function(e){for(var l in S)_[l]=S[l](e);return _}}var mixComplex=function(e,l){var _=_l.createTransformer(l),S=analyseComplexValue(e),E=analyseComplexValue(l);return S.indexes.var.length===E.indexes.var.length&&S.indexes.color.length===E.indexes.color.length&&S.indexes.number.length>=E.indexes.number.length?wl.has(e)&&!E.values.length||wl.has(l)&&!S.values.length?function(e,l){return wl.has(e)?function(_){return _<=0?e:l}:function(_){return _>=1?l:e}}(e,l):Mu(mixArray(function(e,l){for(var _=[],S={color:0,var:0,number:0},E=0;E<l.values.length;E++){var k,T=l.types[E],M=e.indexes[T][S[T]],R=null!==(k=e.values[M])&&void 0!==k?k:0;_[E]=R,S[T]++}return _}(S,E),E.values),_):mixImmediate(e,l)};function mix(e,l,_){return"number"==typeof e&&"number"==typeof l&&"number"==typeof _?bl(e,l,_):getMixer(e)(e,l)}var frameloopDriver=function(e){var passTimestamp=function(l){var _=l.timestamp;return e(_)};return{start:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return qu.update(passTimestamp,e)},stop:function(){return Xu(passTimestamp)},now:function(){return Ku.isProcessing?Ku.timestamp:Ju.now()}}},generateLinearEasing=function(e,l){for(var _=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,S="",E=Math.max(Math.round(l/_),2),k=0;k<E;k++)S+=Math.round(1e4*e(k/(E-1)))/1e4+", ";return"linear(".concat(S.substring(0,S.length-2),")")},xl=2e4;function calcGeneratorDuration(e){for(var l=0,_=e.next(l);!_.done&&l<xl;)l+=50,_=e.next(l);return l>=xl?1/0:l}function calcGeneratorVelocity(e,l,_){var S=Math.max(l-5,0);return velocityPerSecond(_-e(S),l-S)}var El=100,kl=10,Al=1,Cl=0,Tl=800,Ml=.3,Rl=.3,Il={granular:.01,default:2},Pl={granular:.005,default:.5},Ol=.01,Dl=10,Ll=.05,Ul=1,Fl=.001;function findSpring(e){var l,_,S=e.duration,E=void 0===S?Tl:S,k=e.bounce,T=void 0===k?Ml:k,M=e.velocity,R=void 0===M?Cl:M,I=e.mass,O=void 0===I?Al:I,D=1-T;D=xu(Ll,Ul,D),E=xu(Ol,Dl,Ou(E)),D<1?(l=function(e){var l=e*D,_=l*E,S=l-R,k=calcAngularFreq(e,D),T=Math.exp(-_);return Fl-S/k*T},_=function(e){var _=e*D*E,S=_*R+R,k=Math.pow(D,2)*Math.pow(e,2)*E,T=Math.exp(-_),M=calcAngularFreq(Math.pow(e,2),D);return(-l(e)+Fl>0?-1:1)*((S-k)*T)/M}):(l=function(e){return Math.exp(-e*E)*((e-R)*E+1)-.001},_=function(e){return Math.exp(-e*E)*(E*E*(R-e))});var L=function(e,l,_){for(var S=_,E=1;E<Nl;E++)S-=e(S)/l(S);return S}(l,_,5/E);if(E=Pu(E),isNaN(L))return{stiffness:El,damping:kl,duration:E};var U=Math.pow(L,2)*O;return{stiffness:U,damping:2*D*Math.sqrt(O*U),duration:E}}var Nl=12;function calcAngularFreq(e,l){return e*Math.sqrt(1-l*l)}var Bl=["duration","bounce"],zl=["stiffness","damping","mass"];function isSpringType(e,l){return l.some(function(l){return void 0!==e[l]})}function spring(){var e,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rl,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ml,S="object"!==_typeof3(l)?{visualDuration:l,keyframes:[0,1],bounce:_}:l,E=S.restSpeed,k=S.restDelta,T=S.keyframes[0],M=S.keyframes[S.keyframes.length-1],R={done:!1,value:T},I=function(e){var l=_objectSpread2({velocity:Cl,stiffness:El,damping:kl,mass:Al,isResolvedFromDuration:!1},e);if(!isSpringType(e,zl)&&isSpringType(e,Bl))if(e.visualDuration){var _=e.visualDuration,S=2*Math.PI/(1.2*_),E=S*S,k=2*xu(.05,1,1-(e.bounce||0))*Math.sqrt(E);l=_objectSpread2(_objectSpread2({},l),{},{mass:Al,stiffness:E,damping:k})}else{var T=findSpring(e);(l=_objectSpread2(_objectSpread2(_objectSpread2({},l),T),{},{mass:Al})).isResolvedFromDuration=!0}return l}(_objectSpread2(_objectSpread2({},S),{},{velocity:-Ou(S.velocity||0)})),O=I.stiffness,D=I.damping,L=I.mass,U=I.duration,B=I.velocity,z=I.isResolvedFromDuration,j=B||0,G=D/(2*Math.sqrt(O*L)),H=M-T,V=Ou(Math.sqrt(O/L)),W=Math.abs(H)<5;if(E||(E=W?Il.granular:Il.default),k||(k=W?Pl.granular:Pl.default),G<1){var q=calcAngularFreq(V,G);e=function(e){var l=Math.exp(-G*V*e);return M-l*((j+G*V*H)/q*Math.sin(q*e)+H*Math.cos(q*e))}}else if(1===G)e=function(e){return M-Math.exp(-V*e)*(H+(j+V*H)*e)};else{var X=V*Math.sqrt(G*G-1);e=function(e){var l=Math.exp(-G*V*e),_=Math.min(X*e,300);return M-l*((j+G*V*H)*Math.sinh(_)+X*H*Math.cosh(_))/X}}var K={calculatedDuration:z&&U||null,next:function(l){var _=e(l);if(z)R.done=l>=U;else{var S=0===l?j:0;G<1&&(S=0===l?Pu(j):calcGeneratorVelocity(e,l,_));var T=Math.abs(S)<=E,I=Math.abs(M-_)<=k;R.done=T&&I}return R.value=R.done?M:_,R},toString:function(){var e=Math.min(calcGeneratorDuration(K),xl),l=generateLinearEasing(function(l){return K.next(e*l).value},e,30);return e+"ms "+l},toTransition:function(){}};return K}function inertia(e){var l=e.keyframes,_=e.velocity,S=void 0===_?0:_,E=e.power,k=void 0===E?.8:E,T=e.timeConstant,M=void 0===T?325:T,R=e.bounceDamping,I=void 0===R?10:R,O=e.bounceStiffness,D=void 0===O?500:O,L=e.modifyTarget,U=e.min,B=e.max,z=e.restDelta,j=void 0===z?.5:z,G=e.restSpeed,H=l[0],V={done:!1,value:H},nearestBoundary=function(e){return void 0===U?B:void 0===B||Math.abs(U-e)<Math.abs(B-e)?U:B},W=k*S,q=H+W,X=void 0===L?q:L(q);X!==q&&(W=X-H);var K,Y,calcDelta=function(e){return-W*Math.exp(-e/M)},calcLatest=function(e){return X+calcDelta(e)},applyFriction=function(e){var l=calcDelta(e),_=calcLatest(e);V.done=Math.abs(l)<=j,V.value=V.done?X:_},checkCatchBoundary=function(e){var l;(l=V.value,void 0!==U&&l<U||void 0!==B&&l>B)&&(K=e,Y=spring({keyframes:[V.value,nearestBoundary(V.value)],velocity:calcGeneratorVelocity(calcLatest,e,V.value),damping:I,stiffness:D,restDelta:j,restSpeed:G}))};return checkCatchBoundary(0),{calculatedDuration:null,next:function(e){var l=!1;return Y||void 0!==K||(l=!0,applyFriction(e),checkCatchBoundary(e)),void 0!==K&&e>=K?Y.next(e-K):(!l&&applyFriction(e),V)}}}function interpolate(e,l){var _=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},S=_.clamp,E=void 0===S||S,k=_.ease,T=_.mixer,M=e.length;if(Eu(M===l.length),1===M)return function(){return l[0]};if(2===M&&l[0]===l[1])return function(){return l[1]};var R=e[0]===e[1];e[0]>e[M-1]&&(e=_toConsumableArray3(e).reverse(),l=_toConsumableArray3(l).reverse());var I=function(e,l,_){for(var S=[],E=_||ku.mix||mix,k=e.length-1,T=0;T<k;T++){var M=E(e[T],e[T+1]);if(l){var R=Array.isArray(l)?l[T]||Tu:l;M=Mu(R,M)}S.push(M)}return S}(l,k,T),O=I.length,interpolator=function(_){if(R&&_<e[0])return l[0];var S=0;if(O>1)for(;S<e.length-2&&!(_<e[S+1]);S++);var E=Ru(e[S],e[S+1],_);return I[S](E)};return E?function(l){return interpolator(xu(e[0],e[M-1],l))}:interpolator}function defaultOffset(e){var l=[0];return function(e,l){for(var _=e[e.length-1],S=1;S<=l;S++){var E=Ru(0,l,S);e.push(bl(_,1,E))}}(l,e.length-1),l}function keyframes(e){var l,_,S=e.duration,E=void 0===S?300:S,k=e.keyframes,T=e.times,M=e.ease,R=void 0===M?"easeInOut":M,I=function(e){return Array.isArray(e)&&"number"!=typeof e[0]}(R)?R.map(easingDefinitionToFunction):easingDefinitionToFunction(R),O={done:!1,value:k[0]},D=function(e,l){return e.map(function(e){return e*l})}(T&&T.length===k.length?T:defaultOffset(k),E),L=interpolate(D,k,{ease:Array.isArray(I)?I:(l=k,_=I,l.map(function(){return _||ju}).splice(0,l.length-1))});return{calculatedDuration:E,next:function(e){return O.value=L(e),O.done=e>=E,O}}}spring.applyToOptions=function(e){var l=function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,_=(arguments.length>2?arguments[2]:void 0)(_objectSpread2(_objectSpread2({},e),{},{keyframes:[0,l]})),S=Math.min(calcGeneratorDuration(_),xl);return{type:"keyframes",ease:function(e){return _.next(S*e).value/l},duration:Ou(S)}}(e,100,spring);return e.ease=l.ease,e.duration=Pu(l.duration),e.type="keyframes",e};var isNotNull=function(e){return null!==e};function getFinalKeyframe(e,l,_){var S=l.repeat,E=l.repeatType,k=void 0===E?"loop":E,T=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,M=e.filter(isNotNull),R=T<0||S&&"loop"!==k&&S%2==1?0:M.length-1;return R&&void 0!==_?_:M[R]}var jl={decay:inertia,inertia:inertia,tween:keyframes,keyframes:keyframes,spring:spring};function replaceTransitionType(e){"string"==typeof e.type&&(e.type=jl[e.type])}var Gl=function(){return _createClass3(function WithPromise(){_classCallCheck3(this,WithPromise),this.updateFinished()},[{key:"finished",get:function(){return this._finished}},{key:"updateFinished",value:function(){var e=this;this._finished=new Promise(function(l){e.resolve=l})}},{key:"notifyFinished",value:function(){this.resolve()}},{key:"then",value:function(e,l){return this.finished.then(e,l)}}])}(),percentToProgress=function(e){return e/100},Hl=function(e){function JSAnimation(e){var l;return _classCallCheck3(this,JSAnimation),(l=_callSuper(this,JSAnimation)).state="idle",l.startTime=null,l.isStopped=!1,l.currentTime=0,l.holdTime=null,l.playbackSpeed=1,l.stop=function(){var e,_,S=l.options.motionValue;S&&S.updatedAt!==Ju.now()&&l.tick(Ju.now()),l.isStopped=!0,"idle"!==l.state&&(l.teardown(),null===(e=(_=l.options).onStop)||void 0===e||e.call(_))},l.options=e,l.initAnimation(),l.play(),!1===e.autoplay&&l.pause(),l}return _inherits(JSAnimation,e),_createClass3(JSAnimation,[{key:"initAnimation",value:function(){var e=this.options;replaceTransitionType(e);var l=e.type,_=void 0===l?keyframes:l,S=e.repeat,E=void 0===S?0:S,k=e.repeatDelay,T=void 0===k?0:k,M=e.repeatType,R=e.velocity,I=void 0===R?0:R,O=e.keyframes,D=_||keyframes;D!==keyframes&&"number"!=typeof O[0]&&(this.mixKeyframes=Mu(percentToProgress,mix(O[0],O[1])),O=[0,100]);var L=D(_objectSpread2(_objectSpread2({},e),{},{keyframes:O}));"mirror"===M&&(this.mirroredGenerator=D(_objectSpread2(_objectSpread2({},e),{},{keyframes:_toConsumableArray3(O).reverse(),velocity:-I}))),null===L.calculatedDuration&&(L.calculatedDuration=calcGeneratorDuration(L));var U=L.calculatedDuration;this.calculatedDuration=U,this.resolvedDuration=U+T,this.totalDuration=this.resolvedDuration*(E+1)-T,this.generator=L}},{key:"updateTime",value:function(e){var l=Math.round(e-this.startTime)*this.playbackSpeed;null!==this.holdTime?this.currentTime=this.holdTime:this.currentTime=l}},{key:"tick",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]&&arguments[1],_=this.generator,S=this.totalDuration,E=this.mixKeyframes,k=this.mirroredGenerator,T=this.resolvedDuration,M=this.calculatedDuration;if(null===this.startTime)return _.next(0);var R=this.options,I=R.delay,O=void 0===I?0:I,D=R.keyframes,L=R.repeat,U=R.repeatType,B=R.repeatDelay,z=R.type,j=R.onUpdate,G=R.finalKeyframe;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-S/this.speed,this.startTime)),l?this.currentTime=e:this.updateTime(e);var H=this.currentTime-O*(this.playbackSpeed>=0?1:-1),V=this.playbackSpeed>=0?H<0:H>S;this.currentTime=Math.max(H,0),"finished"===this.state&&null===this.holdTime&&(this.currentTime=S);var W=this.currentTime,q=_;if(L){var X=Math.min(this.currentTime,S)/T,K=Math.floor(X),Y=X%1;!Y&&X>=1&&(Y=1),1===Y&&K--,K=Math.min(K,L+1),Boolean(K%2)&&("reverse"===U?(Y=1-Y,B&&(Y-=B/T)):"mirror"===U&&(q=k)),W=xu(0,1,Y)*T}var J=V?{done:!1,value:D[0]}:q.next(W);E&&(J.value=E(J.value));var Q=J.done;V||null===M||(Q=this.playbackSpeed>=0?this.currentTime>=S:this.currentTime<=0);var Z=null===this.holdTime&&("finished"===this.state||"running"===this.state&&Q);return Z&&z!==inertia&&(J.value=getFinalKeyframe(D,this.options,G,this.speed)),j&&j(J.value),Z&&this.finish(),J}},{key:"then",value:function(e,l){return this.finished.then(e,l)}},{key:"duration",get:function(){return Ou(this.calculatedDuration)}},{key:"iterationDuration",get:function(){var e=(this.options||{}).delay,l=void 0===e?0:e;return this.duration+Ou(l)}},{key:"time",get:function(){return Ou(this.currentTime)},set:function(e){var l;e=Pu(e),this.currentTime=e,null===this.startTime||null!==this.holdTime||0===this.playbackSpeed?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),null===(l=this.driver)||void 0===l||l.start(!1)}},{key:"speed",get:function(){return this.playbackSpeed},set:function(e){this.updateTime(Ju.now());var l=this.playbackSpeed!==e;this.playbackSpeed=e,l&&(this.time=Ou(this.currentTime))}},{key:"play",value:function(){var e,l,_=this;if(!this.isStopped){var S=this.options,E=S.driver,k=void 0===E?frameloopDriver:E,T=S.startTime;this.driver||(this.driver=k(function(e){return _.tick(e)})),null===(e=(l=this.options).onPlay)||void 0===e||e.call(l);var M=this.driver.now();"finished"===this.state?(this.updateFinished(),this.startTime=M):null!==this.holdTime?this.startTime=M-this.holdTime:this.startTime||(this.startTime=null!=T?T:M),"finished"===this.state&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}}},{key:"pause",value:function(){this.state="paused",this.updateTime(Ju.now()),this.holdTime=this.currentTime}},{key:"complete",value:function(){"running"!==this.state&&this.play(),this.state="finished",this.holdTime=null}},{key:"finish",value:function(){var e,l;this.notifyFinished(),this.teardown(),this.state="finished",null===(e=(l=this.options).onComplete)||void 0===e||e.call(l)}},{key:"cancel",value:function(){var e,l;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),null===(e=(l=this.options).onCancel)||void 0===e||e.call(l)}},{key:"teardown",value:function(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}},{key:"stopDriver",value:function(){this.driver&&(this.driver.stop(),this.driver=void 0)}},{key:"sample",value:function(e){return this.startTime=0,this.tick(e,!0)}},{key:"attachTimeline",value:function(e){var l;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),null===(l=this.driver)||void 0===l||l.stop(),e.observe(this)}}])}(Gl);O("J",Hl);var radToDeg=function(e){return 180*e/Math.PI},rotate$2=function(e){var l=radToDeg(Math.atan2(e[1],e[0]));return rebaseAngle(l)},Vl={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:function(e){return(Math.abs(e[0])+Math.abs(e[3]))/2},rotate:rotate$2,rotateZ:rotate$2,skewX:function(e){return radToDeg(Math.atan(e[1]))},skewY:function(e){return radToDeg(Math.atan(e[2]))},skew:function(e){return(Math.abs(e[1])+Math.abs(e[2]))/2}},rebaseAngle=function(e){return(e%=360)<0&&(e+=360),e},scaleX=function(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])},scaleY=function(e){return Math.sqrt(e[4]*e[4]+e[5]*e[5])},Wl={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:scaleX,scaleY:scaleY,scale:function(e){return(scaleX(e)+scaleY(e))/2},rotateX:function(e){return rebaseAngle(radToDeg(Math.atan2(e[6],e[5])))},rotateY:function(e){return rebaseAngle(radToDeg(Math.atan2(-e[2],e[0])))},rotateZ:rotate$2,rotate:rotate$2,skewX:function(e){return radToDeg(Math.atan(e[4]))},skewY:function(e){return radToDeg(Math.atan(e[1]))},skew:function(e){return(Math.abs(e[1])+Math.abs(e[4]))/2}};function defaultTransformValue(e){return e.includes("scale")?1:0}function parseValueFromTransform(e,l){if(!e||"none"===e)return defaultTransformValue(l);var _,S,E=e.match(/^matrix3d\(([\t-\r ,-\.0-9e\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+)\)$/);if(E)_=Wl,S=E;else{var k=e.match(/^matrix\(([\t-\r ,-\.0-9e\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+)\)$/);_=Vl,S=k}if(!S)return defaultTransformValue(l);var T=_[l],M=S[1].split(",").map(convertTransformToNumber);return"function"==typeof T?T(M):M[T]}O("u",function(e,l){var _=getComputedStyle(e).transform;return parseValueFromTransform(void 0===_?"none":_,l)});function convertTransformToNumber(e){return parseFloat(e.trim())}var ql=O("b",["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"]),Xl=(O("t",function(){return new Set(ql)}()),function(e){return e===$u||e===ll}),Kl=new Set(["x","y","z"]),Yl=ql.filter(function(e){return!Kl.has(e)});var Jl={width:function(e,l){var _=e.x,S=l.paddingLeft,E=void 0===S?"0":S,k=l.paddingRight,T=void 0===k?"0":k;return _.max-_.min-parseFloat(E)-parseFloat(T)},height:function(e,l){var _=e.y,S=l.paddingTop,E=void 0===S?"0":S,k=l.paddingBottom,T=void 0===k?"0":k;return _.max-_.min-parseFloat(E)-parseFloat(T)},top:function(e,l){var _=l.top;return parseFloat(_)},left:function(e,l){var _=l.left;return parseFloat(_)},bottom:function(e,l){var _=e.y,S=l.top;return parseFloat(S)+(_.max-_.min)},right:function(e,l){var _=e.x,S=l.left;return parseFloat(S)+(_.max-_.min)},x:function(e,l){return parseValueFromTransform(l.transform,"x")},y:function(e,l){return parseValueFromTransform(l.transform,"y")}};Jl.translateX=Jl.x,Jl.translateY=Jl.y;var Ql=new Set,Zl=!1,$l=!1,ec=!1;function measureAllKeyframes(){if($l){var e=Array.from(Ql).filter(function(e){return e.needsMeasurement}),l=new Set(e.map(function(e){return e.element})),_=new Map;l.forEach(function(e){var l=function(e){var l=[];return Yl.forEach(function(_){var S=e.getValue(_);void 0!==S&&(l.push([_,S.get()]),S.set(_.startsWith("scale")?1:0))}),l}(e);l.length&&(_.set(e,l),e.render())}),e.forEach(function(e){return e.measureInitialState()}),l.forEach(function(e){e.render();var l=_.get(e);l&&l.forEach(function(l){var _,S=_slicedToArray(l,2),E=S[0],k=S[1];null===(_=e.getValue(E))||void 0===_||_.set(k)})}),e.forEach(function(e){return e.measureEndState()}),e.forEach(function(e){void 0!==e.suspendedScrollY&&window.scrollTo(0,e.suspendedScrollY)})}$l=!1,Zl=!1,Ql.forEach(function(e){return e.complete(ec)}),Ql.clear()}function readAllKeyframes(){Ql.forEach(function(e){e.readKeyframes(),e.needsMeasurement&&($l=!0)})}var tc=function(){return _createClass3(function KeyframeResolver(e,l,_,S,E){var k=arguments.length>5&&void 0!==arguments[5]&&arguments[5];_classCallCheck3(this,KeyframeResolver),this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=_toConsumableArray3(e),this.onComplete=l,this.name=_,this.motionValue=S,this.element=E,this.isAsync=k},[{key:"scheduleResolve",value:function(){this.state="scheduled",this.isAsync?(Ql.add(this),Zl||(Zl=!0,qu.read(readAllKeyframes),qu.resolveKeyframes(measureAllKeyframes))):(this.readKeyframes(),this.complete())}},{key:"readKeyframes",value:function(){var e=this.unresolvedKeyframes,l=this.name,_=this.element,S=this.motionValue;if(null===e[0]){var E=null==S?void 0:S.get(),k=e[e.length-1];if(void 0!==E)e[0]=E;else if(_&&l){var T=_.readValue(l,k);null!=T&&(e[0]=T)}void 0===e[0]&&(e[0]=k),S&&void 0===E&&S.set(e[0])}!function(e){for(var l=1;l<e.length;l++){var _;null!==(_=e[l])&&void 0!==_||(e[l]=e[l-1])}}(e)}},{key:"setFinalKeyframe",value:function(){}},{key:"measureInitialState",value:function(){}},{key:"renderEndStyles",value:function(){}},{key:"measureEndState",value:function(){}},{key:"complete",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Ql.delete(this)}},{key:"cancel",value:function(){"scheduled"===this.state&&(Ql.delete(this),this.state="pending")}},{key:"resume",value:function(){"pending"===this.state&&this.scheduleResolve()}}])}();O("K",tc);var nc=O("$",memo(function(){return void 0!==window.ScrollTimeline})),rc={};function memoSupports(e,l){var _=memo(e);return function(){var e;return null!==(e=rc[l])&&void 0!==e?e:_()}}var ic=memoSupports(function(){try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch(oo){return!1}return!0},"linearEasing"),cubicBezierAsString=function(e){var l=_slicedToArray(e,4),_=l[0],S=l[1],E=l[2],k=l[3];return"cubic-bezier(".concat(_,", ").concat(S,", ").concat(E,", ").concat(k,")")},ac={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:cubicBezierAsString([0,.65,.55,1]),circOut:cubicBezierAsString([.55,0,1,.45]),backIn:cubicBezierAsString([.31,.01,.66,-.59]),backOut:cubicBezierAsString([.33,1.53,.69,.99])};function mapEasingToNativeEasing(e,l){return e?"function"==typeof e?ic()?generateLinearEasing(e,l):"ease-out":isBezierDefinition(e)?cubicBezierAsString(e):Array.isArray(e)?e.map(function(e){return mapEasingToNativeEasing(e,l)||ac.easeOut}):ac[e]:void 0}function startWaapiAnimation(e,l,_){var S=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},E=S.delay,k=void 0===E?0:E,T=S.duration,M=void 0===T?300:T,R=S.repeat,I=void 0===R?0:R,O=S.repeatType,D=void 0===O?"loop":O,L=S.ease,U=void 0===L?"easeOut":L,B=S.times,z=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,j=_defineProperty3({},l,_);B&&(j.offset=B);var G=mapEasingToNativeEasing(U,M);Array.isArray(G)&&(j.easing=G);var H={delay:k,duration:M,easing:Array.isArray(G)?"linear":G,fill:"both",iterations:I+1,direction:"reverse"===D?"alternate":"normal"};return z&&(H.pseudoElement=z),e.animate(j,H)}function isGenerator(e){return"function"==typeof e&&"applyToOptions"in e}var oc=function(e){function NativeAnimation(e){var l;if(_classCallCheck3(this,NativeAnimation),(l=_callSuper(this,NativeAnimation)).finishedTime=null,l.isStopped=!1,!e)return _possibleConstructorReturn(l);var _=e.element,S=e.name,E=e.keyframes,k=e.pseudoElement,M=e.allowFlatten,R=void 0!==M&&M,I=e.finalKeyframe,O=e.onComplete;l.isPseudoElement=Boolean(k),l.allowFlatten=R,l.options=e,Eu("string"!=typeof e.type);var D=function(e){var l,_,S=e.type,E=_objectWithoutProperties3(e,T);return isGenerator(S)&&ic()?S.applyToOptions(E):(null!==(l=E.duration)&&void 0!==l||(E.duration=300),null!==(_=E.ease)&&void 0!==_||(E.ease="easeOut"),E)}(e);return l.animation=startWaapiAnimation(_,S,E,D,k),!1===D.autoplay&&l.animation.pause(),l.animation.onfinish=function(){if(l.finishedTime=l.time,!k){var e=getFinalKeyframe(E,l.options,I,l.speed);l.updateMotionValue?l.updateMotionValue(e):function(e,l,_){!function(e){return e.startsWith("--")}(l)?e.style[l]=_:e.style.setProperty(l,_)}(_,S,e),l.animation.cancel()}null==O||O(),l.notifyFinished()},l}return _inherits(NativeAnimation,e),_createClass3(NativeAnimation,[{key:"play",value:function(){this.isStopped||(this.animation.play(),"finished"===this.state&&this.updateFinished())}},{key:"pause",value:function(){this.animation.pause()}},{key:"complete",value:function(){var e,l;null===(e=(l=this.animation).finish)||void 0===e||e.call(l)}},{key:"cancel",value:function(){try{this.animation.cancel()}catch(oo){}}},{key:"stop",value:function(){if(!this.isStopped){this.isStopped=!0;var e=this.state;"idle"!==e&&"finished"!==e&&(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}}},{key:"commitStyles",value:function(){var e,l;this.isPseudoElement||(null===(e=(l=this.animation).commitStyles)||void 0===e||e.call(l))}},{key:"duration",get:function(){var e,l,_=(null===(e=this.animation.effect)||void 0===e||null===(l=e.getComputedTiming)||void 0===l?void 0:l.call(e).duration)||0;return Ou(Number(_))}},{key:"iterationDuration",get:function(){var e=(this.options||{}).delay,l=void 0===e?0:e;return this.duration+Ou(l)}},{key:"time",get:function(){return Ou(Number(this.animation.currentTime)||0)},set:function(e){this.finishedTime=null,this.animation.currentTime=Pu(e)}},{key:"speed",get:function(){return this.animation.playbackRate},set:function(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}},{key:"state",get:function(){return null!==this.finishedTime?"finished":this.animation.playState}},{key:"startTime",get:function(){return Number(this.animation.startTime)},set:function(e){this.animation.startTime=e}},{key:"attachTimeline",value:function(e){var l,_=e.timeline,S=e.observe;this.allowFlatten&&(null===(l=this.animation.effect)||void 0===l||l.updateTiming({easing:"linear"}));return this.animation.onfinish=null,_&&nc()?(this.animation.timeline=_,Tu):S(this)}}])}(Gl),sc={anticipate:anticipate,backInOut:Uu,circInOut:Nu};function replaceStringEasing(e){"string"==typeof e.ease&&e.ease in sc&&(e.ease=sc[e.ease])}var uc=function(e){function NativeAnimationExtended(e){var l;return _classCallCheck3(this,NativeAnimationExtended),replaceStringEasing(e),replaceTransitionType(e),l=_callSuper(this,NativeAnimationExtended,[e]),e.startTime&&(l.startTime=e.startTime),l.options=e,l}return _inherits(NativeAnimationExtended,e),_createClass3(NativeAnimationExtended,[{key:"updateMotionValue",value:function(e){var l,_=this.options,S=_.motionValue,E=(_.onUpdate,_.onComplete,_.element,_objectWithoutProperties3(_,M));if(S)if(void 0===e){var k=new Hl(_objectSpread2(_objectSpread2({},E),{},{autoplay:!1})),T=Pu(null!==(l=this.finishedTime)&&void 0!==l?l:this.time);S.setWithVelocity(k.sample(T-10).value,k.sample(T).value,10),k.stop()}else S.set(e)}}])}(oc),isAnimatable=function(e,l){return"zIndex"!==l&&(!("number"!=typeof e&&!Array.isArray(e))||!("string"!=typeof e||!_l.test(e)&&"0"!==e||e.startsWith("url(")))};function makeAnimationInstant(e){e.duration=0,e.type="keyframes"}var lc=new Set(["opacity","clipPath","filter","transform"]),cc=memo(function(){return Object.hasOwnProperty.call(Element.prototype,"animate")});var hc=function(e){function AsyncMotionValueAnimation(e){var l,_,S=e.autoplay,E=void 0===S||S,k=e.delay,T=void 0===k?0:k,M=e.type,I=void 0===M?"keyframes":M,O=e.repeat,D=void 0===O?0:O,L=e.repeatDelay,U=void 0===L?0:L,B=e.repeatType,z=void 0===B?"loop":B,j=e.keyframes,G=e.name,H=e.motionValue,V=e.element,W=_objectWithoutProperties3(e,R);_classCallCheck3(this,AsyncMotionValueAnimation),(_=_callSuper(this,AsyncMotionValueAnimation)).stop=function(){var e,l,S;_._animation&&(_._animation.stop(),null===(l=(S=_).stopTimeline)||void 0===l||l.call(S));null===(e=_.keyframeResolver)||void 0===e||e.cancel()},_.createdAt=Ju.now();var q=_objectSpread2({autoplay:E,delay:T,type:I,repeat:D,repeatDelay:U,repeatType:z,name:G,motionValue:H,element:V},W),X=(null==V?void 0:V.KeyframeResolver)||tc;return _.keyframeResolver=new X(j,function(e,l,S){return _.onKeyframesResolved(e,l,q,!S)},G,H,V),null===(l=_.keyframeResolver)||void 0===l||l.scheduleResolve(),_}return _inherits(AsyncMotionValueAnimation,e),_createClass3(AsyncMotionValueAnimation,[{key:"onKeyframesResolved",value:function(e,l,_,S){var E=this;this.keyframeResolver=void 0;var k=_.name,T=_.type,M=_.velocity,R=_.delay,I=_.isHandoff,O=_.onUpdate;this.resolvedAt=Ju.now(),function(e,l,_,S){var E=e[0];if(null===E)return!1;if("display"===l||"visibility"===l)return!0;var k=e[e.length-1],T=isAnimatable(E,l),M=isAnimatable(k,l);return!(!T||!M)&&(function(e){var l=e[0];if(1===e.length)return!0;for(var _=0;_<e.length;_++)if(e[_]!==l)return!0}(e)||("spring"===_||isGenerator(_))&&S)}(e,k,T,M)||(!ku.instantAnimations&&R||null==O||O(getFinalKeyframe(e,_,l)),e[0]=e[e.length-1],makeAnimationInstant(_),_.repeat=0);var D=_objectSpread2(_objectSpread2({startTime:S?this.resolvedAt&&this.resolvedAt-this.createdAt>40?this.resolvedAt:this.createdAt:void 0,finalKeyframe:l},_),{},{keyframes:e}),L=!I&&function(e){var l,_=e.motionValue,S=e.name,E=e.repeatDelay,k=e.repeatType,T=e.damping,M=e.type;if(!((null==_||null===(l=_.owner)||void 0===l?void 0:l.current)instanceof HTMLElement))return!1;var R=_.owner.getProps(),I=R.onUpdate,O=R.transformTemplate;return cc()&&S&&lc.has(S)&&("transform"!==S||!O)&&!I&&!E&&"mirror"!==k&&0!==T&&"inertia"!==M}(D)?new uc(_objectSpread2(_objectSpread2({},D),{},{element:D.motionValue.owner.current})):new Hl(D);L.finished.then(function(){return E.notifyFinished()}).catch(Tu),this.pendingTimeline&&(this.stopTimeline=L.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=L}},{key:"finished",get:function(){return this._animation?this.animation.finished:this._finished}},{key:"then",value:function(e,l){return this.finished.finally(e).then(function(){})}},{key:"animation",get:function(){var e;this._animation||(null===(e=this.keyframeResolver)||void 0===e||e.resume(),ec=!0,readAllKeyframes(),measureAllKeyframes(),ec=!1);return this._animation}},{key:"duration",get:function(){return this.animation.duration}},{key:"iterationDuration",get:function(){return this.animation.iterationDuration}},{key:"time",get:function(){return this.animation.time},set:function(e){this.animation.time=e}},{key:"speed",get:function(){return this.animation.speed},set:function(e){this.animation.speed=e}},{key:"state",get:function(){return this.animation.state}},{key:"startTime",get:function(){return this.animation.startTime}},{key:"attachTimeline",value:function(e){var l=this;return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,function(){return l.stop()}}},{key:"play",value:function(){this.animation.play()}},{key:"pause",value:function(){this.animation.pause()}},{key:"complete",value:function(){this.animation.complete()}},{key:"cancel",value:function(){var e;this._animation&&this.animation.cancel(),null===(e=this.keyframeResolver)||void 0===e||e.cancel()}}])}(Gl);O("A",hc);var dc=/^var\(--(?:([\x2D0-9A-Z_a-z]+)|([\x2D0-9A-Z_a-z]+), ?([ #%\(\),-\.0-9A-Za-z]+))\)/;function getVariableValue(e,l){var _=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,S=function(e){var l=dc.exec(e);if(!l)return[,];var _=_slicedToArray(l,4),S=_[1],E=_[2],k=_[3];return["--".concat(null!=S?S:E),k]}(e),E=_slicedToArray(S,2),k=E[0],T=E[1];if(k){var M=window.getComputedStyle(l).getPropertyValue(k);if(M){var R=M.trim();return Au(R)?parseFloat(R):R}return isCSSVariableToken(T)?getVariableValue(T,l,_+1):T}}var fc=O("z",new Set(["width","height","top","left","right","bottom"].concat(_toConsumableArray3(ql)))),testValueType=function(e){return function(l){return l.test(e)}},pc=[$u,ll,ul,sl,hl,cl,{test:function(e){return"auto"===e},parse:function(e){return e}}],findDimensionValueType=function(e){return pc.find(testValueType(e))};function isNone(e){return"number"==typeof e?0===e:null===e||("none"===e||"0"===e||Cu(e))}var vc=new Set(["brightness","contrast","saturate","opacity"]);function applyDefaultFilter(e){var l=_slicedToArray(e.slice(0,-1).split("("),2),_=l[0],S=l[1];if("drop-shadow"===_)return e;var E=_slicedToArray(S.match(nl)||[],1)[0];if(!E)return e;var k=S.replace(E,""),T=vc.has(_)?1:0;return E!==S&&(T*=100),_+"("+T+k+")"}var gc=/\b([\x2Da-z]*)\((?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?\)/g,mc=_objectSpread2(_objectSpread2({},_l),{},{getAnimatableNone:function(e){var l=e.match(gc);return l?l.map(applyDefaultFilter).join(" "):e}}),yc=_objectSpread2(_objectSpread2({},$u),{},{transform:Math.round}),_c=O("n",_objectSpread2(_objectSpread2({borderWidth:ll,borderTopWidth:ll,borderRightWidth:ll,borderBottomWidth:ll,borderLeftWidth:ll,borderRadius:ll,radius:ll,borderTopLeftRadius:ll,borderTopRightRadius:ll,borderBottomRightRadius:ll,borderBottomLeftRadius:ll,width:ll,maxWidth:ll,height:ll,maxHeight:ll,top:ll,right:ll,bottom:ll,left:ll,padding:ll,paddingTop:ll,paddingRight:ll,paddingBottom:ll,paddingLeft:ll,margin:ll,marginTop:ll,marginRight:ll,marginBottom:ll,marginLeft:ll,backgroundPositionX:ll,backgroundPositionY:ll},{rotate:sl,rotateX:sl,rotateY:sl,rotateZ:sl,scale:tl,scaleX:tl,scaleY:tl,scaleZ:tl,skew:sl,skewX:sl,skewY:sl,distance:ll,translateX:ll,translateY:ll,translateZ:ll,x:ll,y:ll,z:ll,perspective:ll,transformPerspective:ll,opacity:el,originX:dl,originY:dl,originZ:ll}),{},{zIndex:yc,fillOpacity:el,strokeOpacity:el,numOctaves:yc})),bc=_objectSpread2(_objectSpread2({},_c),{},{color:pl,backgroundColor:pl,outlineColor:pl,fill:pl,stroke:pl,borderColor:pl,borderTopColor:pl,borderRightColor:pl,borderBottomColor:pl,borderLeftColor:pl,filter:mc,WebkitFilter:mc}),Sc=O("v",function(e){return bc[e]});function getAnimatableNone(e,l){var _=Sc(e);return _!==mc&&(_=_l),_.getAnimatableNone?_.getAnimatableNone(l):void 0}var wc=new Set(["auto","none","0"]);var xc=function(e){function DOMKeyframesResolver(e,l,_,S,E){return _classCallCheck3(this,DOMKeyframesResolver),_callSuper(this,DOMKeyframesResolver,[e,l,_,S,E,!0])}return _inherits(DOMKeyframesResolver,e),_createClass3(DOMKeyframesResolver,[{key:"readKeyframes",value:function(){var e=this.unresolvedKeyframes,l=this.element,_=this.name;if(l&&l.current){_superPropGet(DOMKeyframesResolver,"readKeyframes",this,3)([]);for(var S=0;S<e.length;S++){var E=e[S];if("string"==typeof E&&(E=E.trim(),isCSSVariableToken(E))){var k=getVariableValue(E,l.current);void 0!==k&&(e[S]=k),S===e.length-1&&(this.finalKeyframe=E)}}if(this.resolveNoneKeyframes(),fc.has(_)&&2===e.length){var T=_slicedToArray(e,2),M=T[0],R=T[1],I=findDimensionValueType(M),O=findDimensionValueType(R);if(I!==O)if(Xl(I)&&Xl(O))for(var D=0;D<e.length;D++){var L=e[D];"string"==typeof L&&(e[D]=parseFloat(L))}else Jl[_]&&(this.needsMeasurement=!0)}}}},{key:"resolveNoneKeyframes",value:function(){for(var e=this.unresolvedKeyframes,l=this.name,_=[],S=0;S<e.length;S++)(null===e[S]||isNone(e[S]))&&_.push(S);_.length&&function(e,l,_){for(var S=0,E=void 0;S<e.length&&!E;){var k=e[S];"string"==typeof k&&!wc.has(k)&&analyseComplexValue(k).values.length&&(E=e[S]),S++}if(E&&_){var T,M=_createForOfIteratorHelper2(l);try{for(M.s();!(T=M.n()).done;)e[T.value]=getAnimatableNone(_,E)}catch(R){M.e(R)}finally{M.f()}}}(e,_,l)}},{key:"measureInitialState",value:function(){var e=this.element,l=this.unresolvedKeyframes,_=this.name;if(e&&e.current){"height"===_&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Jl[_](e.measureViewportBox(),window.getComputedStyle(e.current)),l[0]=this.measuredOrigin;var S=l[l.length-1];void 0!==S&&e.getValue(_,S).jump(S,!1)}}},{key:"measureEndState",value:function(){var e,l=this.element,_=this.name,S=this.unresolvedKeyframes;if(l&&l.current){var E=l.getValue(_);E&&E.jump(this.measuredOrigin,!1);var k=S.length-1,T=S[k];S[k]=Jl[_](l.measureViewportBox(),window.getComputedStyle(l.current)),null!==T&&void 0===this.finalKeyframe&&(this.finalKeyframe=T),null!==(e=this.removedTransforms)&&void 0!==e&&e.length&&this.removedTransforms.forEach(function(e){var _=_slicedToArray(e,2),S=_[0],E=_[1];l.getValue(S).set(E)}),this.resolveNoneKeyframes()}}}])}(tc);function resolveElements(e,l,_){if(e instanceof EventTarget)return[e];if("string"==typeof e){var S=document.querySelectorAll(e);return S?Array.from(S):[]}return Array.from(e)}O("D",xc);O("g",function(e,l){return l&&"number"==typeof e?l.transform(e):e});function isHTMLElement(e){return isObject$1(e)&&"offsetHeight"in e}var Ec=O("a2",{current:void 0}),kc=function(){return _createClass3(function MotionValue(e){var l=this,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck3(this,MotionValue),this.canTrackVelocity=null,this.events={},this.updateAndNotify=function(e){var _,S=Ju.now();if((l.updatedAt!==S&&l.setPrevFrameValue(),l.prev=l.current,l.setCurrent(e),l.current!==l.prev)&&(null===(_=l.events.change)||void 0===_||_.notify(l.current),l.dependents)){var E,k=_createForOfIteratorHelper2(l.dependents);try{for(k.s();!(E=k.n()).done;){E.value.dirty()}}catch(T){k.e(T)}finally{k.f()}}},this.hasAnimated=!1,this.setCurrent(e),this.owner=_.owner},[{key:"setCurrent",value:function(e){var l;this.current=e,this.updatedAt=Ju.now(),null===this.canTrackVelocity&&void 0!==e&&(this.canTrackVelocity=(l=this.current,!isNaN(parseFloat(l))))}},{key:"setPrevFrameValue",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.current;this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}},{key:"onChange",value:function(e){return this.on("change",e)}},{key:"on",value:function(e,l){var _=this;this.events[e]||(this.events[e]=new Iu);var S=this.events[e].add(l);return"change"===e?function(){S(),qu.read(function(){_.events.change.getSize()||_.stop()})}:S}},{key:"clearListeners",value:function(){for(var e in this.events)this.events[e].clear()}},{key:"attach",value:function(e,l){this.passiveEffect=e,this.stopPassiveEffect=l}},{key:"set",value:function(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}},{key:"setWithVelocity",value:function(e,l,_){this.set(l),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-_}},{key:"jump",value:function(e){var l=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,l&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}},{key:"dirty",value:function(){var e;null===(e=this.events.change)||void 0===e||e.notify(this.current)}},{key:"addDependent",value:function(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}},{key:"removeDependent",value:function(e){this.dependents&&this.dependents.delete(e)}},{key:"get",value:function(){return Ec.current&&Ec.current.push(this),this.current}},{key:"getPrevious",value:function(){return this.prev}},{key:"getVelocity",value:function(){var e=Ju.now();if(!this.canTrackVelocity||void 0===this.prevFrameValue||e-this.updatedAt>30)return 0;var l=Math.min(this.updatedAt-this.prevUpdatedAt,30);return velocityPerSecond(parseFloat(this.current)-parseFloat(this.prevFrameValue),l)}},{key:"start",value:function(e){var l=this;return this.stop(),new Promise(function(_){l.hasAnimated=!0,l.animation=e(_),l.events.animationStart&&l.events.animationStart.notify()}).then(function(){l.events.animationComplete&&l.events.animationComplete.notify(),l.clearAnimation()})}},{key:"stop",value:function(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}},{key:"isAnimating",value:function(){return!!this.animation}},{key:"clearAnimation",value:function(){delete this.animation}},{key:"destroy",value:function(){var e,l;null===(e=this.dependents)||void 0===e||e.clear(),null===(l=this.events.destroy)||void 0===l||l.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}])}();var Ac=createRenderBatcher(queueMicrotask,!1).schedule;O("r",Ac);var Cc={x:!1,y:!1};function isDragActive(){return Cc.x||Cc.y}function setupGesture(e,l){var _=resolveElements(e),S=new AbortController;return[_,_objectSpread2(_objectSpread2({passive:!0},l),{},{signal:S.signal}),function(){return S.abort()}]}function isValidHover(e){return!("touch"===e.pointerType||isDragActive())}var _isNodeOrChild=function(e,l){return!!l&&(e===l||_isNodeOrChild(e,l.parentElement))},Tc=O("B",function(e){return"mouse"===e.pointerType?"number"!=typeof e.button||e.button<=0:!1!==e.isPrimary}),Mc=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);var Rc=new WeakSet;function filterEvents(e){return function(l){"Enter"===l.key&&e(l)}}function firePointerEvent(e,l){e.dispatchEvent(new PointerEvent("pointer"+l,{isPrimary:!0,bubbles:!0}))}var enableKeyboardPress=function(e,l){var _=e.currentTarget;if(_){var S=filterEvents(function(){if(!Rc.has(_)){firePointerEvent(_,"down");var e=filterEvents(function(){firePointerEvent(_,"up")});_.addEventListener("keyup",e,l),_.addEventListener("blur",function(){return firePointerEvent(_,"cancel")},l)}});_.addEventListener("keydown",S,l),_.addEventListener("blur",function(){return _.removeEventListener("keydown",S)},l)}};function isValidPressEvent(e){return Tc(e)&&!isDragActive()}function isSVGElement(e){return isObject$1(e)&&"ownerSVGElement"in e}var Ic,Pc=new WeakMap,getSize=function(e,l,_){return function(S,E){return E&&E[0]?E[0][e+"Size"]:isSVGElement(S)&&"getBBox"in S?S.getBBox()[l]:S[_]}},Oc=getSize("inline","width","offsetWidth"),Dc=getSize("block","height","offsetHeight");function notifyTarget(e){var l,_=e.target,S=e.borderBoxSize;null===(l=Pc.get(_))||void 0===l||l.forEach(function(e){e(_,{get width(){return Oc(_,S)},get height(){return Dc(_,S)}})})}function notifyAll(e){e.forEach(notifyTarget)}var Lc,Uc=new Set;var Fc=O("c",function(e){return Boolean(e&&e.getVelocity)});function parseValue(e,l){return l?e+l:e}function asNumber(e){return"number"==typeof e?e:parseFloat(e)}var Nc=[].concat(pc,[pl,_l]),Bc=(O("l",function(e){return Nc.find(testValueType(e))}),1e-6),zc="undefined"!=typeof Float32Array?Float32Array:Array;O("aG",function(e,l,_,S,E){var k=1/Math.tan(l/2);if(e[0]=k/_,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=k,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=E&&E!==1/0){var T=1/(S-E);e[10]=(E+S)*T,e[14]=2*E*S*T}else e[10]=-1,e[14]=-2*S;return e});function create$3(){var e=new zc(3);return zc!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function fromValues$1(e,l,_){var S=new zc(3);return S[0]=e,S[1]=l,S[2]=_,S}function normalize$6(e,l){var _=l[0],S=l[1],E=l[2],k=_*_+S*S+E*E;return k>0&&(k=1/Math.sqrt(k)),e[0]=l[0]*k,e[1]=l[1]*k,e[2]=l[2]*k,e}function dot$3(e,l){return e[0]*l[0]+e[1]*l[1]+e[2]*l[2]}function cross$1(e,l,_){var S=l[0],E=l[1],k=l[2],T=_[0],M=_[1],R=_[2];return e[0]=E*R-k*M,e[1]=k*T-S*R,e[2]=S*M-E*T,e}function create$1(){var e=new zc(4);return zc!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function setAxisAngle$1(e,l,_){_*=.5;var S=Math.sin(_);return e[0]=S*l[0],e[1]=S*l[1],e[2]=S*l[2],e[3]=Math.cos(_),e}function slerp$1(e,l,_,S){var E,k,T,M,R,I=l[0],O=l[1],D=l[2],L=l[3],U=_[0],B=_[1],z=_[2],j=_[3];return(k=I*U+O*B+D*z+L*j)<0&&(k=-k,U=-U,B=-B,z=-z,j=-j),1-k>Bc?(E=Math.acos(k),T=Math.sin(E),M=Math.sin((1-S)*E)/T,R=Math.sin(S*E)/T):(M=1-S,R=S),e[0]=M*I+R*U,e[1]=M*O+R*B,e[2]=M*D+R*z,e[3]=M*L+R*j,e}create$3(),function(){var e,l=(e=new zc(4),zc!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e)}();var jc;O("aT",function(e,l){var _=l[0],S=l[1],E=l[2],k=l[3],T=_*_+S*S+E*E+k*k;return T>0&&(T=1/Math.sqrt(T)),e[0]=_*T,e[1]=S*T,e[2]=E*T,e[3]=k*T,e});function create(){var e=new zc(2);return zc!=Float32Array&&(e[0]=0,e[1]=0),e}create$3(),fromValues$1(1,0,0),fromValues$1(0,1,0),create$1(),create$1(),jc=new zc(9),zc!=Float32Array&&(jc[1]=0,jc[2]=0,jc[3]=0,jc[5]=0,jc[6]=0,jc[7]=0),jc[0]=1,jc[4]=1,jc[8]=1;O("aM",function(e,l,_){return e[0]=l[0]-_[0],e[1]=l[1]-_[1],e}),O("aO",function(e){var l=e[0],_=e[1];return l*l+_*_});function bind(e,l){return function(){return e.apply(l,arguments)}}!function(){var e=create()}();var Gc,Hc=Object.prototype.toString,Vc=Object.getPrototypeOf,Wc=Symbol.iterator,qc=Symbol.toStringTag,Xc=(Gc=Object.create(null),function(e){var l=Hc.call(e);return Gc[l]||(Gc[l]=l.slice(8,-1).toLowerCase())}),kindOfTest=function(e){return e=e.toLowerCase(),function(l){return Xc(l)===e}},typeOfTest=function(e){return function(l){return _typeof3(l)===e}},Kc=Array.isArray,Yc=typeOfTest("undefined");function isBuffer(e){return null!==e&&!Yc(e)&&null!==e.constructor&&!Yc(e.constructor)&&Zc(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}var Jc=kindOfTest("ArrayBuffer");var Qc=typeOfTest("string"),Zc=typeOfTest("function"),$c=typeOfTest("number"),isObject=function(e){return null!==e&&"object"===_typeof3(e)},isPlainObject=function(e){if("object"!==Xc(e))return!1;var l=Vc(e);return!(null!==l&&l!==Object.prototype&&null!==Object.getPrototypeOf(l)||qc in e||Wc in e)},eh=kindOfTest("Date"),th=kindOfTest("File"),nh=kindOfTest("Blob"),rh=kindOfTest("FileList"),ih=kindOfTest("URLSearchParams"),ah=_slicedToArray(["ReadableStream","Request","Response","Headers"].map(kindOfTest),4),oh=ah[0],sh=ah[1],uh=ah[2],lh=ah[3];function forEach(e,l){var _,S,E=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).allOwnKeys,k=void 0!==E&&E;if(null!=e)if("object"!==_typeof3(e)&&(e=[e]),Kc(e))for(_=0,S=e.length;_<S;_++)l.call(null,e[_],_,e);else{if(isBuffer(e))return;var T,M=k?Object.getOwnPropertyNames(e):Object.keys(e),R=M.length;for(_=0;_<R;_++)T=M[_],l.call(null,e[T],T,e)}}function findKey(e,l){if(isBuffer(e))return null;l=l.toLowerCase();for(var _,S=Object.keys(e),E=S.length;E-- >0;)if(l===(_=S[E]).toLowerCase())return _;return null}var ch="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,isContextDefined=function(e){return!Yc(e)&&e!==ch};var hh,dh=(hh="undefined"!=typeof Uint8Array&&Vc(Uint8Array),function(e){return hh&&e instanceof hh}),fh=kindOfTest("HTMLFormElement"),ph=function(){var e=Object.prototype.hasOwnProperty;return function(l,_){return e.call(l,_)}}(),vh=kindOfTest("RegExp"),reduceDescriptors=function(e,l){var _=Object.getOwnPropertyDescriptors(e),S={};forEach(_,function(_,E){var k;!1!==(k=l(_,E,e))&&(S[E]=k||_)}),Object.defineProperties(e,S)};var gh,mh,yh,_h,bh=kindOfTest("AsyncFunction"),Sh=(gh="function"==typeof setImmediate,mh=Zc(ch.postMessage),gh?setImmediate:mh?(yh="axios@".concat(Math.random()),_h=[],ch.addEventListener("message",function(e){var l=e.source,_=e.data;l===ch&&_===yh&&_h.length&&_h.shift()()},!1),function(e){_h.push(e),ch.postMessage(yh,"*")}):function(e){return setTimeout(e)}),wh="undefined"!=typeof queueMicrotask?queueMicrotask.bind(ch):"undefined"!=typeof process&&process.nextTick||Sh,xh={isArray:Kc,isArrayBuffer:Jc,isBuffer:isBuffer,isFormData:function(e){var l;return e&&("function"==typeof FormData&&e instanceof FormData||Zc(e.append)&&("formdata"===(l=Xc(e))||"object"===l&&Zc(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&Jc(e.buffer)},isString:Qc,isNumber:$c,isBoolean:function(e){return!0===e||!1===e},isObject:isObject,isPlainObject:isPlainObject,isEmptyObject:function(e){if(!isObject(e)||isBuffer(e))return!1;try{return 0===Object.keys(e).length&&Object.getPrototypeOf(e)===Object.prototype}catch(oo){return!1}},isReadableStream:oh,isRequest:sh,isResponse:uh,isHeaders:lh,isUndefined:Yc,isDate:eh,isFile:th,isBlob:nh,isRegExp:vh,isFunction:Zc,isStream:function(e){return isObject(e)&&Zc(e.pipe)},isURLSearchParams:ih,isTypedArray:dh,isFileList:rh,forEach:forEach,merge:function merge(){for(var e=isContextDefined(this)&&this||{},l=e.caseless,_=e.skipUndefined,S={},assignValue=function(e,E){var k=l&&findKey(S,E)||E;isPlainObject(S[k])&&isPlainObject(e)?S[k]=merge(S[k],e):isPlainObject(e)?S[k]=merge({},e):Kc(e)?S[k]=e.slice():_&&Yc(e)||(S[k]=e)},E=0,k=arguments.length;E<k;E++)arguments[E]&&forEach(arguments[E],assignValue);return S},extend:function(e,l,_){return forEach(l,function(l,S){_&&Zc(l)?e[S]=bind(l,_):e[S]=l},{allOwnKeys:(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).allOwnKeys}),e},trim:function(e){return e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e},inherits:function(e,l,_,S){e.prototype=Object.create(l.prototype,S),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:l.prototype}),_&&Object.assign(e.prototype,_)},toFlatObject:function(e,l,_,S){var E,k,T,M={};if(l=l||{},null==e)return l;do{for(k=(E=Object.getOwnPropertyNames(e)).length;k-- >0;)T=E[k],S&&!S(T,e,l)||M[T]||(l[T]=e[T],M[T]=!0);e=!1!==_&&Vc(e)}while(e&&(!_||_(e,l))&&e!==Object.prototype);return l},kindOf:Xc,kindOfTest:kindOfTest,endsWith:function(e,l,_){e=String(e),(void 0===_||_>e.length)&&(_=e.length),_-=l.length;var S=e.indexOf(l,_);return-1!==S&&S===_},toArray:function(e){if(!e)return null;if(Kc(e))return e;var l=e.length;if(!$c(l))return null;for(var _=new Array(l);l-- >0;)_[l]=e[l];return _},forEachEntry:function(e,l){for(var _,S=(e&&e[Wc]).call(e);(_=S.next())&&!_.done;){var E=_.value;l.call(e,E[0],E[1])}},matchAll:function(e,l){for(var _,S=[];null!==(_=e.exec(l));)S.push(_);return S},isHTMLForm:fh,hasOwnProperty:ph,hasOwnProp:ph,reduceDescriptors:reduceDescriptors,freezeMethods:function(e){reduceDescriptors(e,function(l,_){if(Zc(e)&&-1!==["arguments","caller","callee"].indexOf(_))return!1;var S=e[_];Zc(S)&&(l.enumerable=!1,"writable"in l?l.writable=!1:l.set||(l.set=function(){throw Error("Can not rewrite read-only method '"+_+"'")}))})},toObjectSet:function(e,l){var _={},define=function(e){e.forEach(function(e){_[e]=!0})};return Kc(e)?define(e):define(String(e).split(l)),_},toCamelCase:function(e){return e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,l,_){return l.toUpperCase()+_})},noop:function(){},toFiniteNumber:function(e,l){return null!=e&&Number.isFinite(e=+e)?e:l},findKey:findKey,global:ch,isContextDefined:isContextDefined,isSpecCompliantForm:function(e){return!!(e&&Zc(e.append)&&"FormData"===e[qc]&&e[Wc])},toJSONObject:function(e){var l=new Array(10),_visit=function(e,_){if(isObject(e)){if(l.indexOf(e)>=0)return;if(isBuffer(e))return e;if(!("toJSON"in e)){l[_]=e;var S=Kc(e)?[]:{};return forEach(e,function(e,l){var E=_visit(e,_+1);!Yc(E)&&(S[l]=E)}),l[_]=void 0,S}}return e};return _visit(e,0)},isAsyncFn:bh,isThenable:function(e){return e&&(isObject(e)||Zc(e))&&Zc(e.then)&&Zc(e.catch)},setImmediate:Sh,asap:wh,isIterable:function(e){return null!=e&&Zc(e[Wc])}};function AxiosError$1(e,l,_,S,E){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",l&&(this.code=l),_&&(this.config=_),S&&(this.request=S),E&&(this.response=E,this.status=E.status?E.status:null)}xh.inherits(AxiosError$1,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:xh.toJSONObject(this.config),code:this.code,status:this.status}}});var Eh=AxiosError$1.prototype,kh={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(function(e){kh[e]={value:e}}),Object.defineProperties(AxiosError$1,kh),Object.defineProperty(Eh,"isAxiosError",{value:!0}),AxiosError$1.from=function(e,l,_,S,E,k){var T=Object.create(Eh);xh.toFlatObject(e,T,function(e){return e!==Error.prototype},function(e){return"isAxiosError"!==e});var M=e&&e.message?e.message:"Error",R=null==l&&e?e.code:l;return AxiosError$1.call(T,M,R,_,S,E),e&&null==T.cause&&Object.defineProperty(T,"cause",{value:e,configurable:!0}),T.name=e&&e.name||"Error",k&&Object.assign(T,k),T};function isVisitable(e){return xh.isPlainObject(e)||xh.isArray(e)}function removeBrackets(e){return xh.endsWith(e,"[]")?e.slice(0,-2):e}function renderKey(e,l,_){return e?e.concat(l).map(function(e,l){return e=removeBrackets(e),!_&&l?"["+e+"]":e}).join(_?".":""):l}var Ah=xh.toFlatObject(xh,{},null,function(e){return/^is[A-Z]/.test(e)});function toFormData$1(e,l,_){if(!xh.isObject(e))throw new TypeError("target must be an object");l=l||new FormData;var S=(_=xh.toFlatObject(_,{metaTokens:!0,dots:!1,indexes:!1},!1,function(e,l){return!xh.isUndefined(l[e])})).metaTokens,E=_.visitor||defaultVisitor,k=_.dots,T=_.indexes,M=(_.Blob||"undefined"!=typeof Blob&&Blob)&&xh.isSpecCompliantForm(l);if(!xh.isFunction(E))throw new TypeError("visitor must be a function");function convertValue(e){if(null===e)return"";if(xh.isDate(e))return e.toISOString();if(xh.isBoolean(e))return e.toString();if(!M&&xh.isBlob(e))throw new AxiosError$1("Blob is not supported. Use a Buffer instead.");return xh.isArrayBuffer(e)||xh.isTypedArray(e)?M&&"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}function defaultVisitor(e,_,E){var M=e;if(e&&!E&&"object"===_typeof3(e))if(xh.endsWith(_,"{}"))_=S?_:_.slice(0,-2),e=JSON.stringify(e);else if(xh.isArray(e)&&function(e){return xh.isArray(e)&&!e.some(isVisitable)}(e)||(xh.isFileList(e)||xh.endsWith(_,"[]"))&&(M=xh.toArray(e)))return _=removeBrackets(_),M.forEach(function(e,S){!xh.isUndefined(e)&&null!==e&&l.append(!0===T?renderKey([_],S,k):null===T?_:_+"[]",convertValue(e))}),!1;return!!isVisitable(e)||(l.append(renderKey(E,_,k),convertValue(e)),!1)}var R=[],I=Object.assign(Ah,{defaultVisitor:defaultVisitor,convertValue:convertValue,isVisitable:isVisitable});if(!xh.isObject(e))throw new TypeError("data must be an object");return function build(e,_){if(!xh.isUndefined(e)){if(-1!==R.indexOf(e))throw Error("Circular reference detected in "+_.join("."));R.push(e),xh.forEach(e,function(e,S){!0===(!(xh.isUndefined(e)||null===e)&&E.call(l,e,xh.isString(S)?S.trim():S,_,I))&&build(e,_?_.concat(S):[S])}),R.pop()}}(e),l}function encode$1(e){var l={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(e){return l[e]})}function AxiosURLSearchParams(e,l){this._pairs=[],e&&toFormData$1(e,this,l)}var Ch=AxiosURLSearchParams.prototype;function encode(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function buildURL(e,l,_){if(!l)return e;var S=_&&_.encode||encode;xh.isFunction(_)&&(_={serialize:_});var E,k=_&&_.serialize;if(E=k?k(l,_):xh.isURLSearchParams(l)?l.toString():new AxiosURLSearchParams(l,_).toString(S)){var T=e.indexOf("#");-1!==T&&(e=e.slice(0,T)),e+=(-1===e.indexOf("?")?"?":"&")+E}return e}Ch.append=function(e,l){this._pairs.push([e,l])},Ch.toString=function(e){var l=e?function(l){return e.call(this,l,encode$1)}:encode$1;return this._pairs.map(function(e){return l(e[0])+"="+l(e[1])},"").join("&")};var Th=function(){return _createClass3(function InterceptorManager(){_classCallCheck3(this,InterceptorManager),this.handlers=[]},[{key:"use",value:function(e,l,_){return this.handlers.push({fulfilled:e,rejected:l,synchronous:!!_&&_.synchronous,runWhen:_?_.runWhen:null}),this.handlers.length-1}},{key:"eject",value:function(e){this.handlers[e]&&(this.handlers[e]=null)}},{key:"clear",value:function(){this.handlers&&(this.handlers=[])}},{key:"forEach",value:function(e){xh.forEach(this.handlers,function(l){null!==l&&e(l)})}}])}(),Mh={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Rh={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:AxiosURLSearchParams,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},Ih="undefined"!=typeof window&&"undefined"!=typeof document,Ph="object"===("undefined"==typeof navigator?"undefined":_typeof3(navigator))&&navigator||void 0,Oh=Ih&&(!Ph||["ReactNative","NativeScript","NS"].indexOf(Ph.product)<0),Dh="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,Lh=Ih&&window.location.href||"http://localhost",Uh=_objectSpread2(_objectSpread2({},Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Ih,hasStandardBrowserEnv:Oh,hasStandardBrowserWebWorkerEnv:Dh,navigator:Ph,origin:Lh},Symbol.toStringTag,{value:"Module"}))),Rh);function formDataToJSON(e){function buildPath(e,l,_,S){var E=e[S++];if("__proto__"===E)return!0;var k=Number.isFinite(+E),T=S>=e.length;return E=!E&&xh.isArray(_)?_.length:E,T?(xh.hasOwnProp(_,E)?_[E]=[_[E],l]:_[E]=l,!k):(_[E]&&xh.isObject(_[E])||(_[E]=[]),buildPath(e,l,_[E],S)&&xh.isArray(_[E])&&(_[E]=function(e){var l,_,S={},E=Object.keys(e),k=E.length;for(l=0;l<k;l++)S[_=E[l]]=e[_];return S}(_[E])),!k)}if(xh.isFormData(e)&&xh.isFunction(e.entries)){var l={};return xh.forEachEntry(e,function(e,_){buildPath(function(e){return xh.matchAll(/\w+|\[(\w*)]/g,e).map(function(e){return"[]"===e[0]?"":e[1]||e[0]})}(e),_,l,0)}),l}return null}var Fh={transitional:Mh,adapter:["xhr","http","fetch"],transformRequest:[function(e,l){var _,S=l.getContentType()||"",E=S.indexOf("application/json")>-1,k=xh.isObject(e);if(k&&xh.isHTMLForm(e)&&(e=new FormData(e)),xh.isFormData(e))return E?JSON.stringify(formDataToJSON(e)):e;if(xh.isArrayBuffer(e)||xh.isBuffer(e)||xh.isStream(e)||xh.isFile(e)||xh.isBlob(e)||xh.isReadableStream(e))return e;if(xh.isArrayBufferView(e))return e.buffer;if(xh.isURLSearchParams(e))return l.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();if(k){if(S.indexOf("application/x-www-form-urlencoded")>-1)return function(e,l){return toFormData$1(e,new Uh.classes.URLSearchParams,_objectSpread2({visitor:function(e,l,_,S){return Uh.isNode&&xh.isBuffer(e)?(this.append(l,e.toString("base64")),!1):S.defaultVisitor.apply(this,arguments)}},l))}(e,this.formSerializer).toString();if((_=xh.isFileList(e))||S.indexOf("multipart/form-data")>-1){var T=this.env&&this.env.FormData;return toFormData$1(_?{"files[]":e}:e,T&&new T,this.formSerializer)}}return k||E?(l.setContentType("application/json",!1),function(e,l,_){if(xh.isString(e))try{return(l||JSON.parse)(e),xh.trim(e)}catch(oo){if("SyntaxError"!==oo.name)throw oo}return(_||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var l=this.transitional||Fh.transitional,_=l&&l.forcedJSONParsing,S="json"===this.responseType;if(xh.isResponse(e)||xh.isReadableStream(e))return e;if(e&&xh.isString(e)&&(_&&!this.responseType||S)){var E=!(l&&l.silentJSONParsing)&&S;try{return JSON.parse(e,this.parseReviver)}catch(oo){if(E){if("SyntaxError"===oo.name)throw AxiosError$1.from(oo,AxiosError$1.ERR_BAD_RESPONSE,this,null,this.response);throw oo}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Uh.classes.FormData,Blob:Uh.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};xh.forEach(["delete","get","head","post","put","patch"],function(e){Fh.headers[e]={}});var Nh=xh.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Bh=Symbol("internals");function normalizeHeader(e){return e&&String(e).trim().toLowerCase()}function normalizeValue(e){return!1===e||null==e?e:xh.isArray(e)?e.map(normalizeValue):String(e)}function matchHeaderValue(e,l,_,S,E){return xh.isFunction(S)?S.call(this,l,_):(E&&(l=_),xh.isString(l)?xh.isString(S)?-1!==l.indexOf(S):xh.isRegExp(S)?S.test(l):void 0:void 0)}var zh=function(){return _createClass3(function AxiosHeaders(e){_classCallCheck3(this,AxiosHeaders),e&&this.set(e)},[{key:"set",value:function(e,l,_){var S=this;function setHeader(e,l,_){var E=normalizeHeader(l);if(!E)throw new Error("header name must be a non-empty string");var k=xh.findKey(S,E);(!k||void 0===S[k]||!0===_||void 0===_&&!1!==S[k])&&(S[k||l]=normalizeValue(e))}var setHeaders=function(e,l){return xh.forEach(e,function(e,_){return setHeader(e,_,l)})};if(xh.isPlainObject(e)||e instanceof this.constructor)setHeaders(e,l);else if(xh.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))setHeaders(function(e){var l,_,S,E={};return e&&e.split("\n").forEach(function(e){S=e.indexOf(":"),l=e.substring(0,S).trim().toLowerCase(),_=e.substring(S+1).trim(),!l||E[l]&&Nh[l]||("set-cookie"===l?E[l]?E[l].push(_):E[l]=[_]:E[l]=E[l]?E[l]+", "+_:_)}),E}(e),l);else if(xh.isObject(e)&&xh.isIterable(e)){var E,k,T,M={},R=_createForOfIteratorHelper2(e);try{for(R.s();!(T=R.n()).done;){var I=T.value;if(!xh.isArray(I))throw TypeError("Object iterator must return a key-value pair");M[k=I[0]]=(E=M[k])?xh.isArray(E)?[].concat(_toConsumableArray3(E),[I[1]]):[E,I[1]]:I[1]}}catch(O){R.e(O)}finally{R.f()}setHeaders(M,l)}else null!=e&&setHeader(l,e,_);return this}},{key:"get",value:function(e,l){if(e=normalizeHeader(e)){var _=xh.findKey(this,e);if(_){var S=this[_];if(!l)return S;if(!0===l)return function(e){for(var l,_=Object.create(null),S=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;l=S.exec(e);)_[l[1]]=l[2];return _}(S);if(xh.isFunction(l))return l.call(this,S,_);if(xh.isRegExp(l))return l.exec(S);throw new TypeError("parser must be boolean|regexp|function")}}}},{key:"has",value:function(e,l){if(e=normalizeHeader(e)){var _=xh.findKey(this,e);return!(!_||void 0===this[_]||l&&!matchHeaderValue(0,this[_],_,l))}return!1}},{key:"delete",value:function(e,l){var _=this,S=!1;function deleteHeader(e){if(e=normalizeHeader(e)){var E=xh.findKey(_,e);!E||l&&!matchHeaderValue(0,_[E],E,l)||(delete _[E],S=!0)}}return xh.isArray(e)?e.forEach(deleteHeader):deleteHeader(e),S}},{key:"clear",value:function(e){for(var l=Object.keys(this),_=l.length,S=!1;_--;){var E=l[_];e&&!matchHeaderValue(0,this[E],E,e,!0)||(delete this[E],S=!0)}return S}},{key:"normalize",value:function(e){var l=this,_={};return xh.forEach(this,function(S,E){var k=xh.findKey(_,E);if(k)return l[k]=normalizeValue(S),void delete l[E];var T=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,function(e,l,_){return l.toUpperCase()+_})}(E):String(E).trim();T!==E&&delete l[E],l[T]=normalizeValue(S),_[T]=!0}),this}},{key:"concat",value:function(){for(var e,l=arguments.length,_=new Array(l),S=0;S<l;S++)_[S]=arguments[S];return(e=this.constructor).concat.apply(e,[this].concat(_))}},{key:"toJSON",value:function(e){var l=Object.create(null);return xh.forEach(this,function(_,S){null!=_&&!1!==_&&(l[S]=e&&xh.isArray(_)?_.join(", "):_)}),l}},{key:Symbol.iterator,value:function(){return Object.entries(this.toJSON())[Symbol.iterator]()}},{key:"toString",value:function(){return Object.entries(this.toJSON()).map(function(e){var l=_slicedToArray(e,2);return l[0]+": "+l[1]}).join("\n")}},{key:"getSetCookie",value:function(){return this.get("set-cookie")||[]}},{key:Symbol.toStringTag,get:function(){return"AxiosHeaders"}}],[{key:"from",value:function(e){return e instanceof this?e:new this(e)}},{key:"concat",value:function(e){for(var l=new this(e),_=arguments.length,S=new Array(_>1?_-1:0),E=1;E<_;E++)S[E-1]=arguments[E];return S.forEach(function(e){return l.set(e)}),l}},{key:"accessor",value:function(e){var l=(this[Bh]=this[Bh]={accessors:{}}).accessors,_=this.prototype;function defineAccessor(e){var S=normalizeHeader(e);l[S]||(!function(e,l){var _=xh.toCamelCase(" "+l);["get","set","has"].forEach(function(S){Object.defineProperty(e,S+_,{value:function(e,_,E){return this[S].call(this,l,e,_,E)},configurable:!0})})}(_,e),l[S]=!0)}return xh.isArray(e)?e.forEach(defineAccessor):defineAccessor(e),this}}])}();function transformData(e,l){var _=this||Fh,S=l||_,E=zh.from(S.headers),k=S.data;return xh.forEach(e,function(e){k=e.call(_,k,E.normalize(),l?l.status:void 0)}),E.normalize(),k}function isCancel$1(e){return!(!e||!e.__CANCEL__)}function CanceledError$1(e,l,_){AxiosError$1.call(this,null==e?"canceled":e,AxiosError$1.ERR_CANCELED,l,_),this.name="CanceledError"}function settle(e,l,_){var S=_.config.validateStatus;_.status&&S&&!S(_.status)?l(new AxiosError$1("Request failed with status code "+_.status,[AxiosError$1.ERR_BAD_REQUEST,AxiosError$1.ERR_BAD_RESPONSE][Math.floor(_.status/100)-4],_.config,_.request,_)):e(_)}zh.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),xh.reduceDescriptors(zh.prototype,function(e,l){var _=e.value,S=l[0].toUpperCase()+l.slice(1);return{get:function(){return _},set:function(e){this[S]=e}}}),xh.freezeMethods(zh),xh.inherits(CanceledError$1,AxiosError$1,{__CANCEL__:!0});var progressEventReducer=function(e,l){var _=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,S=0,E=function(e,l){e=e||10;var _,S=new Array(e),E=new Array(e),k=0,T=0;return l=void 0!==l?l:1e3,function(M){var R=Date.now(),I=E[T];_||(_=R),S[k]=M,E[k]=R;for(var O=T,D=0;O!==k;)D+=S[O++],O%=e;if((k=(k+1)%e)===T&&(T=(T+1)%e),!(R-_<l)){var L=I&&R-I;return L?Math.round(1e3*D/L):void 0}}}(50,250);return function(e,l){var _,S,E=0,k=1e3/l,invoke=function(l){var k=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();E=k,_=null,S&&(clearTimeout(S),S=null),e.apply(void 0,_toConsumableArray3(l))};return[function(){for(var e=Date.now(),l=e-E,T=arguments.length,M=new Array(T),R=0;R<T;R++)M[R]=arguments[R];l>=k?invoke(M,e):(_=M,S||(S=setTimeout(function(){S=null,invoke(_)},k-l)))},function(){return _&&invoke(_)}]}(function(_){var k=_.loaded,T=_.lengthComputable?_.total:void 0,M=k-S,R=E(M);S=k;var I=_defineProperty3({loaded:k,total:T,progress:T?k/T:void 0,bytes:M,rate:R||void 0,estimated:R&&T&&k<=T?(T-k)/R:void 0,event:_,lengthComputable:null!=T},l?"download":"upload",!0);e(I)},_)},progressEventDecorator=function(e,l){var _=null!=e;return[function(S){return l[0]({lengthComputable:_,total:e,loaded:S})},l[1]]},asyncDecorator=function(e){return function(){for(var l=arguments.length,_=new Array(l),S=0;S<l;S++)_[S]=arguments[S];return xh.asap(function(){return e.apply(void 0,_)})}},jh=Uh.hasStandardBrowserEnv?function(e,l){return function(_){return _=new URL(_,Uh.origin),e.protocol===_.protocol&&e.host===_.host&&(l||e.port===_.port)}}(new URL(Uh.origin),Uh.navigator&&/(msie|trident)/i.test(Uh.navigator.userAgent)):function(){return!0},Gh=Uh.hasStandardBrowserEnv?{write:function(e,l,_,S,E,k){var T=[e+"="+encodeURIComponent(l)];xh.isNumber(_)&&T.push("expires="+new Date(_).toGMTString()),xh.isString(S)&&T.push("path="+S),xh.isString(E)&&T.push("domain="+E),!0===k&&T.push("secure"),document.cookie=T.join("; ")},read:function(e){var l=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return l?decodeURIComponent(l[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}};function buildFullPath(e,l,_){var S=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(l);return e&&(S||0==_)?function(e,l){return l?e.replace(/\/?\/$/,"")+"/"+l.replace(/^\/+/,""):e}(e,l):l}var headersToObject=function(e){return e instanceof zh?_objectSpread2({},e):e};function mergeConfig$1(e,l){l=l||{};var _={};function getMergedValue(e,l,_,S){return xh.isPlainObject(e)&&xh.isPlainObject(l)?xh.merge.call({caseless:S},e,l):xh.isPlainObject(l)?xh.merge({},l):xh.isArray(l)?l.slice():l}function mergeDeepProperties(e,l,_,S){return xh.isUndefined(l)?xh.isUndefined(e)?void 0:getMergedValue(void 0,e,0,S):getMergedValue(e,l,0,S)}function valueFromConfig2(e,l){if(!xh.isUndefined(l))return getMergedValue(void 0,l)}function defaultToConfig2(e,l){return xh.isUndefined(l)?xh.isUndefined(e)?void 0:getMergedValue(void 0,e):getMergedValue(void 0,l)}function mergeDirectKeys(_,S,E){return E in l?getMergedValue(_,S):E in e?getMergedValue(void 0,_):void 0}var S={url:valueFromConfig2,method:valueFromConfig2,data:valueFromConfig2,baseURL:defaultToConfig2,transformRequest:defaultToConfig2,transformResponse:defaultToConfig2,paramsSerializer:defaultToConfig2,timeout:defaultToConfig2,timeoutMessage:defaultToConfig2,withCredentials:defaultToConfig2,withXSRFToken:defaultToConfig2,adapter:defaultToConfig2,responseType:defaultToConfig2,xsrfCookieName:defaultToConfig2,xsrfHeaderName:defaultToConfig2,onUploadProgress:defaultToConfig2,onDownloadProgress:defaultToConfig2,decompress:defaultToConfig2,maxContentLength:defaultToConfig2,maxBodyLength:defaultToConfig2,beforeRedirect:defaultToConfig2,transport:defaultToConfig2,httpAgent:defaultToConfig2,httpsAgent:defaultToConfig2,cancelToken:defaultToConfig2,socketPath:defaultToConfig2,responseEncoding:defaultToConfig2,validateStatus:mergeDirectKeys,headers:function(e,l,_){return mergeDeepProperties(headersToObject(e),headersToObject(l),0,!0)}};return xh.forEach(Object.keys(_objectSpread2(_objectSpread2({},e),l)),function(E){var k=S[E]||mergeDeepProperties,T=k(e[E],l[E],E);xh.isUndefined(T)&&k!==mergeDirectKeys||(_[E]=T)}),_}var Hh,resolveConfig=function(e){var l=mergeConfig$1({},e),_=l.data,S=l.withXSRFToken,E=l.xsrfHeaderName,k=l.xsrfCookieName,T=l.headers,M=l.auth;if(l.headers=T=zh.from(T),l.url=buildURL(buildFullPath(l.baseURL,l.url,l.allowAbsoluteUrls),e.params,e.paramsSerializer),M&&T.set("Authorization","Basic "+btoa((M.username||"")+":"+(M.password?unescape(encodeURIComponent(M.password)):""))),xh.isFormData(_))if(Uh.hasStandardBrowserEnv||Uh.hasStandardBrowserWebWorkerEnv)T.setContentType(void 0);else if(xh.isFunction(_.getHeaders)){var R=_.getHeaders(),I=["content-type","content-length"];Object.entries(R).forEach(function(e){var l=_slicedToArray(e,2),_=l[0],S=l[1];I.includes(_.toLowerCase())&&T.set(_,S)})}if(Uh.hasStandardBrowserEnv&&(S&&xh.isFunction(S)&&(S=S(l)),S||!1!==S&&jh(l.url))){var O=E&&k&&Gh.read(k);O&&T.set(E,O)}return l},Vh="undefined"!=typeof XMLHttpRequest&&function(e){return new Promise(function(l,_){var S,E,k,T,M,R=resolveConfig(e),I=R.data,O=zh.from(R.headers).normalize(),D=R.responseType,L=R.onUploadProgress,U=R.onDownloadProgress;function done(){T&&T(),M&&M(),R.cancelToken&&R.cancelToken.unsubscribe(S),R.signal&&R.signal.removeEventListener("abort",S)}var B=new XMLHttpRequest;function onloadend(){if(B){var S=zh.from("getAllResponseHeaders"in B&&B.getAllResponseHeaders());settle(function(e){l(e),done()},function(e){_(e),done()},{data:D&&"text"!==D&&"json"!==D?B.response:B.responseText,status:B.status,statusText:B.statusText,headers:S,config:e,request:B}),B=null}}if(B.open(R.method.toUpperCase(),R.url,!0),B.timeout=R.timeout,"onloadend"in B?B.onloadend=onloadend:B.onreadystatechange=function(){B&&4===B.readyState&&(0!==B.status||B.responseURL&&0===B.responseURL.indexOf("file:"))&&setTimeout(onloadend)},B.onabort=function(){B&&(_(new AxiosError$1("Request aborted",AxiosError$1.ECONNABORTED,e,B)),B=null)},B.onerror=function(l){var S=new AxiosError$1(l&&l.message?l.message:"Network Error",AxiosError$1.ERR_NETWORK,e,B);S.event=l||null,_(S),B=null},B.ontimeout=function(){var l=R.timeout?"timeout of "+R.timeout+"ms exceeded":"timeout exceeded",S=R.transitional||Mh;R.timeoutErrorMessage&&(l=R.timeoutErrorMessage),_(new AxiosError$1(l,S.clarifyTimeoutError?AxiosError$1.ETIMEDOUT:AxiosError$1.ECONNABORTED,e,B)),B=null},void 0===I&&O.setContentType(null),"setRequestHeader"in B&&xh.forEach(O.toJSON(),function(e,l){B.setRequestHeader(l,e)}),xh.isUndefined(R.withCredentials)||(B.withCredentials=!!R.withCredentials),D&&"json"!==D&&(B.responseType=R.responseType),U){var z=_slicedToArray(progressEventReducer(U,!0),2);k=z[0],M=z[1],B.addEventListener("progress",k)}if(L&&B.upload){var j=_slicedToArray(progressEventReducer(L),2);E=j[0],T=j[1],B.upload.addEventListener("progress",E),B.upload.addEventListener("loadend",T)}(R.cancelToken||R.signal)&&(S=function(l){B&&(_(!l||l.type?new CanceledError$1(null,e,B):l),B.abort(),B=null)},R.cancelToken&&R.cancelToken.subscribe(S),R.signal&&(R.signal.aborted?S():R.signal.addEventListener("abort",S)));var G,H,V=(G=R.url,(H=/^([-+\w]{1,25})(:?\/\/|:)/.exec(G))&&H[1]||"");V&&-1===Uh.protocols.indexOf(V)?_(new AxiosError$1("Unsupported protocol "+V+":",AxiosError$1.ERR_BAD_REQUEST,e)):B.send(I||null)})},composeSignals=function(e,l){var _=(e=e?e.filter(Boolean):[]).length;if(l||_){var S,E=new AbortController,onabort=function(e){if(!S){S=!0,unsubscribe();var l=e instanceof Error?e:this.reason;E.abort(l instanceof AxiosError$1?l:new CanceledError$1(l instanceof Error?l.message:l))}},k=l&&setTimeout(function(){k=null,onabort(new AxiosError$1("timeout ".concat(l," of ms exceeded"),AxiosError$1.ETIMEDOUT))},l),unsubscribe=function(){e&&(k&&clearTimeout(k),k=null,e.forEach(function(e){e.unsubscribe?e.unsubscribe(onabort):e.removeEventListener("abort",onabort)}),e=null)};e.forEach(function(e){return e.addEventListener("abort",onabort)});var T=E.signal;return T.unsubscribe=function(){return xh.asap(unsubscribe)},T}},Wh=_regenerator().m(function streamChunk(e,l){var _,S,E;return _regenerator().w(function(k){for(;;)switch(k.n){case 0:if(!((_=e.byteLength)<l)){k.n=2;break}return k.n=1,e;case 1:return k.a(2);case 2:S=0;case 3:if(!(S<_)){k.n=5;break}return E=S+l,k.n=4,e.slice(S,E);case 4:S=E,k.n=3;break;case 5:return k.a(2)}},streamChunk)}),qh=function(){var e=_wrapAsyncGenerator(_regenerator().m(function _callee216(e,l){var _,S,E,k,T,M,R;return _regenerator().w(function(I){for(;;)switch(I.p=I.n){case 0:_=!1,S=!1,I.p=1,k=_asyncIterator(Xh(e));case 2:return I.n=3,_awaitAsyncGenerator(k.next());case 3:if(!(_=!(T=I.v).done)){I.n=5;break}return M=T.value,I.d(_regeneratorValues(_asyncGeneratorDelegate(_asyncIterator(Wh(M,l)))),4);case 4:_=!1,I.n=2;break;case 5:I.n=7;break;case 6:I.p=6,R=I.v,S=!0,E=R;case 7:if(I.p=7,I.p=8,!_||null==k.return){I.n=9;break}return I.n=9,_awaitAsyncGenerator(k.return());case 9:if(I.p=9,!S){I.n=10;break}throw E;case 10:return I.f(9);case 11:return I.f(7);case 12:return I.a(2)}},_callee216,null,[[8,,9,11],[1,6,7,12]])}));return function(l,_){return e.apply(this,arguments)}}(),Xh=function(){var e=_wrapAsyncGenerator(_regenerator().m(function _callee217(e){var l,_,S,E;return _regenerator().w(function(k){for(;;)switch(k.p=k.n){case 0:if(!e[Symbol.asyncIterator]){k.n=2;break}return k.d(_regeneratorValues(_asyncGeneratorDelegate(_asyncIterator(e))),1);case 1:return k.a(2);case 2:l=e.getReader(),k.p=3;case 4:return k.n=5,_awaitAsyncGenerator(l.read());case 5:if(_=k.v,S=_.done,E=_.value,!S){k.n=6;break}return k.a(3,8);case 6:return k.n=7,E;case 7:k.n=4;break;case 8:return k.p=8,k.n=9,_awaitAsyncGenerator(l.cancel());case 9:return k.f(8);case 10:return k.a(2)}},_callee217,null,[[3,,8,10]])}));return function(l){return e.apply(this,arguments)}}(),trackStream=function(e,l,_,S){var E,k=qh(e,l),T=0,_onFinish=function(e){E||(E=!0,S&&S(e))};return new ReadableStream({pull:function(e){return _asyncToGenerator(_regenerator().m(function _callee218(){var l,S,E,M,R,I;return _regenerator().w(function(O){for(;;)switch(O.p=O.n){case 0:return O.p=0,O.n=1,k.next();case 1:if(l=O.v,S=l.done,E=l.value,!S){O.n=2;break}return _onFinish(),e.close(),O.a(2);case 2:M=E.byteLength,_&&(R=T+=M,_(R)),e.enqueue(new Uint8Array(E)),O.n=4;break;case 3:throw O.p=3,I=O.v,_onFinish(I),I;case 4:return O.a(2)}},_callee218,null,[[0,3]])}))()},cancel:function(e){return _onFinish(e),k.return()}},{highWaterMark:2})},Kh=xh.isFunction,Yh={Request:(Hh=xh.global).Request,Response:Hh.Response},Jh=xh.global,Qh=Jh.ReadableStream,Zh=Jh.TextEncoder,test=function(e){try{for(var l=arguments.length,_=new Array(l>1?l-1:0),S=1;S<l;S++)_[S-1]=arguments[S];return!!e.apply(void 0,_)}catch(oo){return!1}},factory=function(e){var l=e=xh.merge.call({skipUndefined:!0},Yh,e),_=l.fetch,S=l.Request,E=l.Response,k=_?Kh(_):"function"==typeof fetch,T=Kh(S),M=Kh(E);if(!k)return!1;var R,I=k&&Kh(Qh),O=k&&("function"==typeof Zh?(R=new Zh,function(e){return R.encode(e)}):function(){var e=_asyncToGenerator(_regenerator().m(function _callee219(e){var l,_;return _regenerator().w(function(E){for(;;)switch(E.n){case 0:return l=Uint8Array,E.n=1,new S(e).arrayBuffer();case 1:return _=E.v,E.a(2,new l(_))}},_callee219)}));return function(l){return e.apply(this,arguments)}}()),D=T&&I&&test(function(){var e=!1,l=new S(Uh.origin,{body:new Qh,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!l}),L=M&&I&&test(function(){return xh.isReadableStream(new E("").body)}),U={stream:L&&function(e){return e.body}};k&&["text","arrayBuffer","blob","formData","stream"].forEach(function(e){!U[e]&&(U[e]=function(l,_){var S=l&&l[e];if(S)return S.call(l);throw new AxiosError$1("Response type '".concat(e,"' is not supported"),AxiosError$1.ERR_NOT_SUPPORT,_)})});var B=function(){var e=_asyncToGenerator(_regenerator().m(function _callee220(e){var l;return _regenerator().w(function(_){for(;;)switch(_.n){case 0:if(null!=e){_.n=1;break}return _.a(2,0);case 1:if(!xh.isBlob(e)){_.n=2;break}return _.a(2,e.size);case 2:if(!xh.isSpecCompliantForm(e)){_.n=4;break}return l=new S(Uh.origin,{method:"POST",body:e}),_.n=3,l.arrayBuffer();case 3:case 6:return _.a(2,_.v.byteLength);case 4:if(!xh.isArrayBufferView(e)&&!xh.isArrayBuffer(e)){_.n=5;break}return _.a(2,e.byteLength);case 5:if(xh.isURLSearchParams(e)&&(e+=""),!xh.isString(e)){_.n=7;break}return _.n=6,O(e);case 7:return _.a(2)}},_callee220)}));return function(l){return e.apply(this,arguments)}}(),z=function(){var e=_asyncToGenerator(_regenerator().m(function _callee221(e,l){var _;return _regenerator().w(function(S){for(;;)if(0===S.n)return _=xh.toFiniteNumber(e.getContentLength()),S.a(2,null==_?B(l):_)},_callee221)}));return function(l,_){return e.apply(this,arguments)}}();return function(){var e=_asyncToGenerator(_regenerator().m(function _callee222(e){var l,k,M,R,I,O,B,j,G,H,V,W,q,X,K,Y,J,Q,Z,$,ee,te,ne,re,ie,ae,oe,se,ue,le,ce,he,de,fe,pe,ve,ge,me,ye;return _regenerator().w(function(_e){for(;;)switch(_e.p=_e.n){case 0:if(l=resolveConfig(e),k=l.url,M=l.method,R=l.data,I=l.signal,O=l.cancelToken,B=l.timeout,j=l.onDownloadProgress,G=l.onUploadProgress,H=l.responseType,V=l.headers,W=l.withCredentials,q=void 0===W?"same-origin":W,X=l.fetchOptions,K=_||fetch,H=H?(H+"").toLowerCase():"text",Y=composeSignals([I,O&&O.toAbortSignal()],B),J=null,Q=Y&&Y.unsubscribe&&function(){Y.unsubscribe()},_e.p=1,!(ge=G&&D&&"get"!==M&&"head"!==M)){_e.n=3;break}return _e.n=2,z(V,R);case 2:me=Z=_e.v,ge=0!==me;case 3:if(!ge){_e.n=4;break}$=new S(k,{method:"POST",body:R,duplex:"half"}),xh.isFormData(R)&&(ee=$.headers.get("content-type"))&&V.setContentType(ee),$.body&&(te=progressEventDecorator(Z,progressEventReducer(asyncDecorator(G))),ne=_slicedToArray(te,2),re=ne[0],ie=ne[1],R=trackStream($.body,65536,re,ie));case 4:return xh.isString(q)||(q=q?"include":"omit"),ae=T&&"credentials"in S.prototype,oe=_objectSpread2(_objectSpread2({},X),{},{signal:Y,method:M.toUpperCase(),headers:V.normalize().toJSON(),body:R,duplex:"half",credentials:ae?q:void 0}),J=T&&new S(k,oe),_e.n=5,T?K(J,X):K(k,oe);case 5:return se=_e.v,ue=L&&("stream"===H||"response"===H),L&&(j||ue&&Q)&&(le={},["status","statusText","headers"].forEach(function(e){le[e]=se[e]}),ce=xh.toFiniteNumber(se.headers.get("content-length")),he=j&&progressEventDecorator(ce,progressEventReducer(asyncDecorator(j),!0))||[],de=_slicedToArray(he,2),fe=de[0],pe=de[1],se=new E(trackStream(se.body,65536,fe,function(){pe&&pe(),Q&&Q()}),le)),H=H||"text",_e.n=6,U[xh.findKey(U,H)||"text"](se,e);case 6:return ve=_e.v,!ue&&Q&&Q(),_e.n=7,new Promise(function(l,_){settle(l,_,{data:ve,headers:zh.from(se.headers),status:se.status,statusText:se.statusText,config:e,request:J})});case 7:return _e.a(2,_e.v);case 8:if(_e.p=8,ye=_e.v,Q&&Q(),!ye||"TypeError"!==ye.name||!/Load failed|fetch/i.test(ye.message)){_e.n=9;break}throw Object.assign(new AxiosError$1("Network Error",AxiosError$1.ERR_NETWORK,e,J),{cause:ye.cause||ye});case 9:throw AxiosError$1.from(ye,ye&&ye.code,e,J);case 10:return _e.a(2)}},_callee222,null,[[1,8]])}));return function(l){return e.apply(this,arguments)}}()},$h=new Map,getFetch=function(e){for(var l,_,S=e?e.env:{},E=S.fetch,k=[S.Request,S.Response,E],T=k.length,M=$h;T--;)l=k[T],void 0===(_=M.get(l))&&M.set(l,_=T?new Map:factory(S)),M=_;return _};getFetch();var ed={http:null,xhr:Vh,fetch:{get:getFetch}};xh.forEach(ed,function(e,l){if(e){try{Object.defineProperty(e,"name",{value:l})}catch(oo){}Object.defineProperty(e,"adapterName",{value:l})}});var renderReason=function(e){return"- ".concat(e)},isResolvedHandle=function(e){return xh.isFunction(e)||null===e||!1===e},adapters_getAdapter=function(e,l){for(var _,S,E=(e=xh.isArray(e)?e:[e]).length,k={},T=0;T<E;T++){var M=void 0;if(S=_=e[T],!isResolvedHandle(_)&&void 0===(S=ed[(M=String(_)).toLowerCase()]))throw new AxiosError$1("Unknown adapter '".concat(M,"'"));if(S&&(xh.isFunction(S)||(S=S.get(l))))break;k[M||"#"+T]=S}if(!S){var R=Object.entries(k).map(function(e){var l=_slicedToArray(e,2),_=l[0],S=l[1];return"adapter ".concat(_," ")+(!1===S?"is not supported by the environment":"is not available in the build")});throw new AxiosError$1("There is no suitable adapter to dispatch the request "+(E?R.length>1?"since :\n"+R.map(renderReason).join("\n"):" "+renderReason(R[0]):"as no adapter specified"),"ERR_NOT_SUPPORT")}return S};function throwIfCancellationRequested(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new CanceledError$1(null,e)}function dispatchRequest(e){return throwIfCancellationRequested(e),e.headers=zh.from(e.headers),e.data=transformData.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1),adapters_getAdapter(e.adapter||Fh.adapter,e)(e).then(function(l){return throwIfCancellationRequested(e),l.data=transformData.call(e,e.transformResponse,l),l.headers=zh.from(l.headers),l},function(l){return isCancel$1(l)||(throwIfCancellationRequested(e),l&&l.response&&(l.response.data=transformData.call(e,e.transformResponse,l.response),l.response.headers=zh.from(l.response.headers))),Promise.reject(l)})}var td="1.12.2",nd={};["object","boolean","number","function","string","symbol"].forEach(function(e,l){nd[e]=function(_){return _typeof3(_)===e||"a"+(l<1?"n ":" ")+e}});var rd={};nd.transitional=function(e,l,_){return function(S,E,k){if(!1===e)throw new AxiosError$1(function(e,l){return"[Axios v"+td+"] Transitional option '"+e+"'"+l+(_?". "+_:"")}(E," has been removed"+(l?" in "+l:"")),AxiosError$1.ERR_DEPRECATED);return l&&!rd[E]&&(rd[E]=!0),!e||e(S,E,k)}},nd.spelling=function(e){return function(e,l){return!0}};var id={assertOptions:function(e,l,_){if("object"!==_typeof3(e))throw new AxiosError$1("options must be an object",AxiosError$1.ERR_BAD_OPTION_VALUE);for(var S=Object.keys(e),E=S.length;E-- >0;){var k=S[E],T=l[k];if(T){var M=e[k],R=void 0===M||T(M,k,e);if(!0!==R)throw new AxiosError$1("option "+k+" must be "+R,AxiosError$1.ERR_BAD_OPTION_VALUE)}else if(!0!==_)throw new AxiosError$1("Unknown option "+k,AxiosError$1.ERR_BAD_OPTION)}},validators:nd},ad=id.validators,od=function(){return _createClass3(function Axios(e){_classCallCheck3(this,Axios),this.defaults=e||{},this.interceptors={request:new Th,response:new Th}},[{key:"request",value:(e=_asyncToGenerator(_regenerator().m(function _callee223(e,l){var _,S,E;return _regenerator().w(function(k){for(;;)switch(k.p=k.n){case 0:return k.p=0,k.n=1,this._request(e,l);case 1:return k.a(2,k.v);case 2:if(k.p=2,(E=k.v)instanceof Error){_={},Error.captureStackTrace?Error.captureStackTrace(_):_=new Error,S=_.stack?_.stack.replace(/^.+\n/,""):"";try{E.stack?S&&!String(E.stack).endsWith(S.replace(/^.+\n.+\n/,""))&&(E.stack+="\n"+S):E.stack=S}catch(oo){}}throw E;case 3:return k.a(2)}},_callee223,this,[[0,2]])})),function(l,_){return e.apply(this,arguments)})},{key:"_request",value:function(e,l){"string"==typeof e?(l=l||{}).url=e:l=e||{};var _=l=mergeConfig$1(this.defaults,l),S=_.transitional,E=_.paramsSerializer,k=_.headers;void 0!==S&&id.assertOptions(S,{silentJSONParsing:ad.transitional(ad.boolean),forcedJSONParsing:ad.transitional(ad.boolean),clarifyTimeoutError:ad.transitional(ad.boolean)},!1),null!=E&&(xh.isFunction(E)?l.paramsSerializer={serialize:E}:id.assertOptions(E,{encode:ad.function,serialize:ad.function},!0)),void 0!==l.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?l.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:l.allowAbsoluteUrls=!0),id.assertOptions(l,{baseUrl:ad.spelling("baseURL"),withXsrfToken:ad.spelling("withXSRFToken")},!0),l.method=(l.method||this.defaults.method||"get").toLowerCase();var T=k&&xh.merge(k.common,k[l.method]);k&&xh.forEach(["delete","get","head","post","put","patch","common"],function(e){delete k[e]}),l.headers=zh.concat(T,k);var M=[],R=!0;this.interceptors.request.forEach(function(e){"function"==typeof e.runWhen&&!1===e.runWhen(l)||(R=R&&e.synchronous,M.unshift(e.fulfilled,e.rejected))});var I,O=[];this.interceptors.response.forEach(function(e){O.push(e.fulfilled,e.rejected)});var D,L=0;if(!R){var U=[dispatchRequest.bind(this),void 0];for(U.unshift.apply(U,M),U.push.apply(U,O),D=U.length,I=Promise.resolve(l);L<D;)I=I.then(U[L++],U[L++]);return I}D=M.length;for(var B=l;L<D;){var z=M[L++],j=M[L++];try{B=z(B)}catch(G){j.call(this,G);break}}try{I=dispatchRequest.call(this,B)}catch(G){return Promise.reject(G)}for(L=0,D=O.length;L<D;)I=I.then(O[L++],O[L++]);return I}},{key:"getUri",value:function(e){return buildURL(buildFullPath((e=mergeConfig$1(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}]);var e}();xh.forEach(["delete","get","head","options"],function(e){od.prototype[e]=function(l,_){return this.request(mergeConfig$1(_||{},{method:e,url:l,data:(_||{}).data}))}}),xh.forEach(["post","put","patch"],function(e){function generateHTTPMethod(l){return function(_,S,E){return this.request(mergeConfig$1(E||{},{method:e,headers:l?{"Content-Type":"multipart/form-data"}:{},url:_,data:S}))}}od.prototype[e]=generateHTTPMethod(),od.prototype[e+"Form"]=generateHTTPMethod(!0)});var sd=function(){function CancelToken(e){if(_classCallCheck3(this,CancelToken),"function"!=typeof e)throw new TypeError("executor must be a function.");var l;this.promise=new Promise(function(e){l=e});var _=this;this.promise.then(function(e){if(_._listeners){for(var l=_._listeners.length;l-- >0;)_._listeners[l](e);_._listeners=null}}),this.promise.then=function(e){var l,S=new Promise(function(e){_.subscribe(e),l=e}).then(e);return S.cancel=function(){_.unsubscribe(l)},S},e(function(e,S,E){_.reason||(_.reason=new CanceledError$1(e,S,E),l(_.reason))})}return _createClass3(CancelToken,[{key:"throwIfRequested",value:function(){if(this.reason)throw this.reason}},{key:"subscribe",value:function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}},{key:"unsubscribe",value:function(e){if(this._listeners){var l=this._listeners.indexOf(e);-1!==l&&this._listeners.splice(l,1)}}},{key:"toAbortSignal",value:function(){var e=this,l=new AbortController,abort=function(e){l.abort(e)};return this.subscribe(abort),l.signal.unsubscribe=function(){return e.unsubscribe(abort)},l.signal}}],[{key:"source",value:function(){var e;return{token:new CancelToken(function(l){e=l}),cancel:e}}}])}();var ud={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(ud).forEach(function(e){var l=_slicedToArray(e,2),_=l[0],S=l[1];ud[S]=_});var ld=O("aX",function createInstance(e){var l=new od(e),_=bind(od.prototype.request,l);return xh.extend(_,od.prototype,l,{allOwnKeys:!0}),xh.extend(_,l,null,{allOwnKeys:!0}),_.create=function(l){return createInstance(mergeConfig$1(e,l))},_}(Fh));ld.Axios=od,ld.CanceledError=CanceledError$1,ld.CancelToken=sd,ld.isCancel=isCancel$1,ld.VERSION=td,ld.toFormData=toFormData$1,ld.AxiosError=AxiosError$1,ld.Cancel=ld.CanceledError,ld.all=function(e){return Promise.all(e)},ld.spread=function(e){return function(l){return e.apply(null,l)}},ld.isAxiosError=function(e){return xh.isObject(e)&&!0===e.isAxiosError},ld.mergeConfig=mergeConfig$1,ld.AxiosHeaders=zh,ld.formToJSON=function(e){return formDataToJSON(xh.isHTMLForm(e)?new FormData(e):e)},ld.getAdapter=adapters_getAdapter,ld.HttpStatusCode=ud,ld.default=ld;ld.Axios,ld.AxiosError,ld.CanceledError,ld.isCancel,ld.CancelToken,ld.VERSION,ld.all,ld.Cancel,ld.isAxiosError,ld.spread,ld.toFormData,ld.AxiosHeaders,ld.HttpStatusCode,ld.formToJSON,ld.getAdapter,ld.mergeConfig;function length(e){var l=e[0],_=e[1],S=e[2];return Math.sqrt(l*l+_*_+S*S)}function copy$4(e,l){return e[0]=l[0],e[1]=l[1],e[2]=l[2],e}function add$1(e,l,_){return e[0]=l[0]+_[0],e[1]=l[1]+_[1],e[2]=l[2]+_[2],e}function subtract$1(e,l,_){return e[0]=l[0]-_[0],e[1]=l[1]-_[1],e[2]=l[2]-_[2],e}function scale$2(e,l,_){return e[0]=l[0]*_,e[1]=l[1]*_,e[2]=l[2]*_,e}function squaredLength(e){var l=e[0],_=e[1],S=e[2];return l*l+_*_+S*S}function normalize$3(e,l){var _=l[0],S=l[1],E=l[2],k=_*_+S*S+E*E;return k>0&&(k=1/Math.sqrt(k)),e[0]=l[0]*k,e[1]=l[1]*k,e[2]=l[2]*k,e}function dot$2(e,l){return e[0]*l[0]+e[1]*l[1]+e[2]*l[2]}function _cross(e,l,_){var S=l[0],E=l[1],k=l[2],T=_[0],M=_[1],R=_[2];return e[0]=E*R-k*M,e[1]=k*T-S*R,e[2]=S*M-E*T,e}var cd,hd,dd=(cd=[0,0,0],hd=[0,0,0],function(e,l){copy$4(cd,e),copy$4(hd,l),normalize$3(cd,cd),normalize$3(hd,hd);var _=dot$2(cd,hd);return _>1?0:_<-1?Math.PI:Math.acos(_)});var fd=function(e){function Vec3(){var e,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l,S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l;return _classCallCheck3(this,Vec3),_possibleConstructorReturn(e=_callSuper(this,Vec3,[l,_,S]),e)}return _inherits(Vec3,e),_createClass3(Vec3,[{key:"x",get:function(){return this[0]},set:function(e){this[0]=e}},{key:"y",get:function(){return this[1]},set:function(e){this[1]=e}},{key:"z",get:function(){return this[2]},set:function(e){this[2]=e}},{key:"set",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,_=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;return e.length?this.copy(e):(function(e,l,_,S){e[0]=l,e[1]=_,e[2]=S}(this,e,l,_),this)}},{key:"copy",value:function(e){return copy$4(this,e),this}},{key:"add",value:function(e,l){return l?add$1(this,e,l):add$1(this,this,e),this}},{key:"sub",value:function(e,l){return l?subtract$1(this,e,l):subtract$1(this,this,e),this}},{key:"multiply",value:function(e){return e.length?function(e,l,_){e[0]=l[0]*_[0],e[1]=l[1]*_[1],e[2]=l[2]*_[2]}(this,this,e):scale$2(this,this,e),this}},{key:"divide",value:function(e){return e.length?function(e,l,_){e[0]=l[0]/_[0],e[1]=l[1]/_[1],e[2]=l[2]/_[2]}(this,this,e):scale$2(this,this,1/e),this}},{key:"inverse",value:function(){return function(e,l){e[0]=1/l[0],e[1]=1/l[1],e[2]=1/l[2]}(this,arguments.length>0&&void 0!==arguments[0]?arguments[0]:this),this}},{key:"len",value:function(){return length(this)}},{key:"distance",value:function(e){return e?(l=this,S=(_=e)[0]-l[0],E=_[1]-l[1],k=_[2]-l[2],Math.sqrt(S*S+E*E+k*k)):length(this);var l,_,S,E,k}},{key:"squaredLen",value:function(){return squaredLength(this)}},{key:"squaredDistance",value:function(e){return e?(l=this,S=(_=e)[0]-l[0],E=_[1]-l[1],k=_[2]-l[2],S*S+E*E+k*k):squaredLength(this);var l,_,S,E,k}},{key:"negate",value:function(){return function(e,l){e[0]=-l[0],e[1]=-l[1],e[2]=-l[2]}(this,arguments.length>0&&void 0!==arguments[0]?arguments[0]:this),this}},{key:"cross",value:function(e,l){return l?_cross(this,e,l):_cross(this,this,e),this}},{key:"scale",value:function(e){return scale$2(this,this,e),this}},{key:"normalize",value:function(){return normalize$3(this,this),this}},{key:"dot",value:function(e){return dot$2(this,e)}},{key:"equals",value:function(e){return _=e,(l=this)[0]===_[0]&&l[1]===_[1]&&l[2]===_[2];var l,_}},{key:"applyMatrix3",value:function(e){return function(e,l,_){var S=l[0],E=l[1],k=l[2];e[0]=S*_[0]+E*_[3]+k*_[6],e[1]=S*_[1]+E*_[4]+k*_[7],e[2]=S*_[2]+E*_[5]+k*_[8]}(this,this,e),this}},{key:"applyMatrix4",value:function(e){return function(e,l,_){var S=l[0],E=l[1],k=l[2],T=_[3]*S+_[7]*E+_[11]*k+_[15];T=T||1,e[0]=(_[0]*S+_[4]*E+_[8]*k+_[12])/T,e[1]=(_[1]*S+_[5]*E+_[9]*k+_[13])/T,e[2]=(_[2]*S+_[6]*E+_[10]*k+_[14])/T}(this,this,e),this}},{key:"scaleRotateMatrix4",value:function(e){return function(e,l,_){var S=l[0],E=l[1],k=l[2],T=_[3]*S+_[7]*E+_[11]*k+_[15];T=T||1,e[0]=(_[0]*S+_[4]*E+_[8]*k)/T,e[1]=(_[1]*S+_[5]*E+_[9]*k)/T,e[2]=(_[2]*S+_[6]*E+_[10]*k)/T}(this,this,e),this}},{key:"applyQuaternion",value:function(e){return function(e,l,_){var S=l[0],E=l[1],k=l[2],T=_[0],M=_[1],R=_[2],I=M*k-R*E,O=R*S-T*k,D=T*E-M*S,L=M*D-R*O,U=R*I-T*D,B=T*O-M*I,z=2*_[3];I*=z,O*=z,D*=z,L*=2,U*=2,B*=2,e[0]=S+I+L,e[1]=E+O+U,e[2]=k+D+B}(this,this,e),this}},{key:"angle",value:function(e){return dd(this,e)}},{key:"lerp",value:function(e,l){return function(e,l,_,S){var E=l[0],k=l[1],T=l[2];e[0]=E+S*(_[0]-E),e[1]=k+S*(_[1]-k),e[2]=T+S*(_[2]-T)}(this,this,e,l),this}},{key:"smoothLerp",value:function(e,l,_){return function(e,l,_,S,E){var k=Math.exp(-S*E),T=l[0],M=l[1],R=l[2];e[0]=_[0]+(T-_[0])*k,e[1]=_[1]+(M-_[1])*k,e[2]=_[2]+(R-_[2])*k}(this,this,e,l,_),this}},{key:"clone",value:function(){return new Vec3(this[0],this[1],this[2])}},{key:"fromArray",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this[0]=e[l],this[1]=e[l+1],this[2]=e[l+2],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[l]=this[0],e[l+1]=this[1],e[l+2]=this[2],e}},{key:"transformDirection",value:function(e){var l=this[0],_=this[1],S=this[2];return this[0]=e[0]*l+e[4]*_+e[8]*S,this[1]=e[1]*l+e[5]*_+e[9]*S,this[2]=e[2]*l+e[6]*_+e[10]*S,this.normalize()}}])}(_wrapNativeSuper(Array)),pd=new fd,vd=1,gd=1,md=!1,yd=function(){return _createClass3(function Geometry(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(var _ in _classCallCheck3(this,Geometry),e.canvas,this.gl=e,this.attributes=l,this.id=vd++,this.VAOs={},this.drawRange={start:0,count:0},this.instancedCount=0,this.gl.renderer.bindVertexArray(null),this.gl.renderer.currentGeometry=null,this.glState=this.gl.renderer.state,l)this.addAttribute(_,l[_])},[{key:"addAttribute",value:function(e,l){if(this.attributes[e]=l,l.id=gd++,l.size=l.size||1,l.type=l.type||(l.data.constructor===Float32Array?this.gl.FLOAT:l.data.constructor===Uint16Array?this.gl.UNSIGNED_SHORT:this.gl.UNSIGNED_INT),l.target="index"===e?this.gl.ELEMENT_ARRAY_BUFFER:this.gl.ARRAY_BUFFER,l.normalized=l.normalized||!1,l.stride=l.stride||0,l.offset=l.offset||0,l.count=l.count||(l.stride?l.data.byteLength/l.stride:l.data.length/l.size),l.divisor=l.instanced||0,l.needsUpdate=!1,l.usage=l.usage||this.gl.STATIC_DRAW,l.buffer||this.updateAttribute(l),l.divisor){if(this.isInstanced=!0,this.instancedCount&&this.instancedCount!==l.count*l.divisor)return this.instancedCount=Math.min(this.instancedCount,l.count*l.divisor);this.instancedCount=l.count*l.divisor}else"index"===e?this.drawRange.count=l.count:this.attributes.index||(this.drawRange.count=Math.max(this.drawRange.count,l.count))}},{key:"updateAttribute",value:function(e){var l=!e.buffer;l&&(e.buffer=this.gl.createBuffer()),this.glState.boundBuffer!==e.buffer&&(this.gl.bindBuffer(e.target,e.buffer),this.glState.boundBuffer=e.buffer),l?this.gl.bufferData(e.target,e.data,e.usage):this.gl.bufferSubData(e.target,0,e.data),e.needsUpdate=!1}},{key:"setIndex",value:function(e){this.addAttribute("index",e)}},{key:"setDrawRange",value:function(e,l){this.drawRange.start=e,this.drawRange.count=l}},{key:"setInstancedCount",value:function(e){this.instancedCount=e}},{key:"createVAO",value:function(e){this.VAOs[e.attributeOrder]=this.gl.renderer.createVertexArray(),this.gl.renderer.bindVertexArray(this.VAOs[e.attributeOrder]),this.bindAttributes(e)}},{key:"bindAttributes",value:function(e){var l=this;e.attributeLocations.forEach(function(e,_){var S=_.name,E=_.type;if(l.attributes[S]){var k=l.attributes[S];l.gl.bindBuffer(k.target,k.buffer),l.glState.boundBuffer=k.buffer;var T=1;35674===E&&(T=2),35675===E&&(T=3),35676===E&&(T=4);for(var M=k.size/T,R=1===T?0:T*T*4,I=1===T?0:4*T,O=0;O<T;O++)l.gl.vertexAttribPointer(e+O,M,k.type,k.normalized,k.stride+R,k.offset+O*I),l.gl.enableVertexAttribArray(e+O),l.gl.renderer.vertexAttribDivisor(e+O,k.divisor)}}),this.attributes.index&&this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.attributes.index.buffer)}},{key:"draw",value:function(e){var l,_=this,S=e.program,E=e.mode,k=void 0===E?this.gl.TRIANGLES:E;this.gl.renderer.currentGeometry!=="".concat(this.id,"_").concat(S.attributeOrder)&&(this.VAOs[S.attributeOrder]||this.createVAO(S),this.gl.renderer.bindVertexArray(this.VAOs[S.attributeOrder]),this.gl.renderer.currentGeometry="".concat(this.id,"_").concat(S.attributeOrder)),S.attributeLocations.forEach(function(e,l){var S=l.name,E=_.attributes[S];E.needsUpdate&&_.updateAttribute(E)});var T=2;(null===(l=this.attributes.index)||void 0===l?void 0:l.type)===this.gl.UNSIGNED_INT&&(T=4),this.isInstanced?this.attributes.index?this.gl.renderer.drawElementsInstanced(k,this.drawRange.count,this.attributes.index.type,this.attributes.index.offset+this.drawRange.start*T,this.instancedCount):this.gl.renderer.drawArraysInstanced(k,this.drawRange.start,this.drawRange.count,this.instancedCount):this.attributes.index?this.gl.drawElements(k,this.drawRange.count,this.attributes.index.type,this.attributes.index.offset+this.drawRange.start*T):this.gl.drawArrays(k,this.drawRange.start,this.drawRange.count)}},{key:"getPosition",value:function(){var e=this.attributes.position;return e.data?e:md?void 0:md=!0}},{key:"computeBoundingBox",value:function(e){e||(e=this.getPosition());var l=e.data,_=e.size;this.bounds||(this.bounds={min:new fd,max:new fd,center:new fd,scale:new fd,radius:1/0});var S=this.bounds.min,E=this.bounds.max,k=this.bounds.center,T=this.bounds.scale;S.set(1/0),E.set(-1/0);for(var M=0,R=l.length;M<R;M+=_){var I=l[M],O=l[M+1],D=l[M+2];S.x=Math.min(I,S.x),S.y=Math.min(O,S.y),S.z=Math.min(D,S.z),E.x=Math.max(I,E.x),E.y=Math.max(O,E.y),E.z=Math.max(D,E.z)}T.sub(E,S),k.add(S,E).divide(2)}},{key:"computeBoundingSphere",value:function(e){e||(e=this.getPosition());var l=e.data,_=e.size;this.bounds||this.computeBoundingBox(e);for(var S=0,E=0,k=l.length;E<k;E+=_)pd.fromArray(l,E),S=Math.max(S,this.bounds.center.squaredDistance(pd));this.bounds.radius=Math.sqrt(S)}},{key:"remove",value:function(){for(var e in this.VAOs)this.gl.renderer.deleteVertexArray(this.VAOs[e]),delete this.VAOs[e];for(var l in this.attributes)this.gl.deleteBuffer(this.attributes[l].buffer),delete this.attributes[l]}}])}(),_d=1,bd={},Sd=function(){return _createClass3(function Program(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_=l.vertex,S=l.fragment,E=l.uniforms,k=void 0===E?{}:E,T=l.transparent,M=void 0!==T&&T,R=l.cullFace,I=void 0===R?e.BACK:R,O=l.frontFace,D=void 0===O?e.CCW:O,L=l.depthTest,U=void 0===L||L,B=l.depthWrite,z=void 0===B||B,j=l.depthFunc,G=void 0===j?e.LEQUAL:j;_classCallCheck3(this,Program),e.canvas,this.gl=e,this.uniforms=k,this.id=_d++,this.transparent=M,this.cullFace=I,this.frontFace=D,this.depthTest=U,this.depthWrite=z,this.depthFunc=G,this.blendFunc={},this.blendEquation={},this.stencilFunc={},this.stencilOp={},this.transparent&&!this.blendFunc.src&&(this.gl.renderer.premultipliedAlpha?this.setBlendFunc(this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA):this.setBlendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA)),this.vertexShader=e.createShader(e.VERTEX_SHADER),this.fragmentShader=e.createShader(e.FRAGMENT_SHADER),this.program=e.createProgram(),e.attachShader(this.program,this.vertexShader),e.attachShader(this.program,this.fragmentShader),this.setShaders({vertex:_,fragment:S})},[{key:"setShaders",value:function(e){var l=e.vertex,_=e.fragment;if(l&&(this.gl.shaderSource(this.vertexShader,l),this.gl.compileShader(this.vertexShader),this.gl.getShaderInfoLog(this.vertexShader)),_&&(this.gl.shaderSource(this.fragmentShader,_),this.gl.compileShader(this.fragmentShader),this.gl.getShaderInfoLog(this.fragmentShader)),this.gl.linkProgram(this.program),this.gl.getProgramParameter(this.program,this.gl.LINK_STATUS)){this.uniformLocations=new Map;for(var S=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_UNIFORMS),E=0;E<S;E++){var k=this.gl.getActiveUniform(this.program,E);this.uniformLocations.set(k,this.gl.getUniformLocation(this.program,k.name));var T=k.name.match(/(\w+)/g);k.uniformName=T[0],k.nameComponents=T.slice(1)}this.attributeLocations=new Map;for(var M=[],R=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),I=0;I<R;I++){var O=this.gl.getActiveAttrib(this.program,I),D=this.gl.getAttribLocation(this.program,O.name);-1!==D&&(M[D]=O.name,this.attributeLocations.set(O,D))}this.attributeOrder=M.join("")}}},{key:"setBlendFunc",value:function(e,l,_,S){this.blendFunc.src=e,this.blendFunc.dst=l,this.blendFunc.srcAlpha=_,this.blendFunc.dstAlpha=S,e&&(this.transparent=!0)}},{key:"setBlendEquation",value:function(e,l){this.blendEquation.modeRGB=e,this.blendEquation.modeAlpha=l}},{key:"setStencilFunc",value:function(e,l,_){this.stencilRef=l,this.stencilFunc.func=e,this.stencilFunc.ref=l,this.stencilFunc.mask=_}},{key:"setStencilOp",value:function(e,l,_){this.stencilOp.stencilFail=e,this.stencilOp.depthFail=l,this.stencilOp.depthPass=_}},{key:"applyState",value:function(){this.depthTest?this.gl.renderer.enable(this.gl.DEPTH_TEST):this.gl.renderer.disable(this.gl.DEPTH_TEST),this.cullFace?this.gl.renderer.enable(this.gl.CULL_FACE):this.gl.renderer.disable(this.gl.CULL_FACE),this.blendFunc.src?this.gl.renderer.enable(this.gl.BLEND):this.gl.renderer.disable(this.gl.BLEND),this.cullFace&&this.gl.renderer.setCullFace(this.cullFace),this.gl.renderer.setFrontFace(this.frontFace),this.gl.renderer.setDepthMask(this.depthWrite),this.gl.renderer.setDepthFunc(this.depthFunc),this.blendFunc.src&&this.gl.renderer.setBlendFunc(this.blendFunc.src,this.blendFunc.dst,this.blendFunc.srcAlpha,this.blendFunc.dstAlpha),this.gl.renderer.setBlendEquation(this.blendEquation.modeRGB,this.blendEquation.modeAlpha),this.stencilFunc.func||this.stencilOp.stencilFail?this.gl.renderer.enable(this.gl.STENCIL_TEST):this.gl.renderer.disable(this.gl.STENCIL_TEST),this.gl.renderer.setStencilFunc(this.stencilFunc.func,this.stencilFunc.ref,this.stencilFunc.mask),this.gl.renderer.setStencilOp(this.stencilOp.stencilFail,this.stencilOp.depthFail,this.stencilOp.depthPass)}},{key:"use",value:function(){var e=this,l=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).flipFaces,_=void 0!==l&&l,S=-1;this.gl.renderer.state.currentProgram===this.id||(this.gl.useProgram(this.program),this.gl.renderer.state.currentProgram=this.id),this.uniformLocations.forEach(function(l,_){var E,k=e.uniforms[_.uniformName],T=_createForOfIteratorHelper2(_.nameComponents);try{for(T.s();!(E=T.n()).done;){var M=E.value;if(!k)break;if(!(M in k)){if(Array.isArray(k.value))break;k=void 0;break}k=k[M]}}catch(I){T.e(I)}finally{T.f()}if(!k)return warn("Active uniform ".concat(_.name," has not been supplied"));if(k&&void 0===k.value)return warn("".concat(_.name," uniform is missing a value parameter"));if(k.value.texture)return S+=1,k.value.update(S),setUniform(e.gl,_.type,l,S);if(k.value.length&&k.value[0].texture){var R=[];return k.value.forEach(function(e){S+=1,e.update(S),R.push(S)}),setUniform(e.gl,_.type,l,R)}setUniform(e.gl,_.type,l,k.value)}),this.applyState(),_&&this.gl.renderer.setFrontFace(this.frontFace===this.gl.CCW?this.gl.CW:this.gl.CCW)}},{key:"remove",value:function(){this.gl.deleteProgram(this.program)}}])}();function setUniform(e,l,_,S){S=S.length?function(e){var l=e.length,_=e[0].length;if(void 0===_)return e;var S=l*_,E=bd[S];E||(bd[S]=E=new Float32Array(S));for(var k=0;k<l;k++)E.set(e[k],k*_);return E}(S):S;var E=e.renderer.state.uniformLocations.get(_);if(S.length)if(void 0===E||E.length!==S.length)e.renderer.state.uniformLocations.set(_,S.slice(0));else{if(function(e,l){if(e.length!==l.length)return!1;for(var _=0,S=e.length;_<S;_++)if(e[_]!==l[_])return!1;return!0}(E,S))return;E.set?E.set(S):function(e,l){for(var _=0,S=e.length;_<S;_++)e[_]=l[_]}(E,S),e.renderer.state.uniformLocations.set(_,E)}else{if(E===S)return;e.renderer.state.uniformLocations.set(_,S)}switch(l){case 5126:return S.length?e.uniform1fv(_,S):e.uniform1f(_,S);case 35664:return e.uniform2fv(_,S);case 35665:return e.uniform3fv(_,S);case 35666:return e.uniform4fv(_,S);case 35670:case 5124:case 35678:case 36306:case 35680:case 36289:return S.length?e.uniform1iv(_,S):e.uniform1i(_,S);case 35671:case 35667:return e.uniform2iv(_,S);case 35672:case 35668:return e.uniform3iv(_,S);case 35673:case 35669:return e.uniform4iv(_,S);case 35674:return e.uniformMatrix2fv(_,!1,S);case 35675:return e.uniformMatrix3fv(_,!1,S);case 35676:return e.uniformMatrix4fv(_,!1,S)}}O("b1",Sd);var wd=0;function warn(e){wd>100||wd++}var xd=new fd,Ed=1,kd=function(){return _createClass3(function Renderer(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=e.canvas,_=void 0===l?document.createElement("canvas"):l,S=e.width,E=void 0===S?300:S,k=e.height,T=void 0===k?150:k,M=e.dpr,R=void 0===M?1:M,I=e.alpha,O=void 0!==I&&I,D=e.depth,L=void 0===D||D,U=e.stencil,B=void 0!==U&&U,z=e.antialias,j=void 0!==z&&z,G=e.premultipliedAlpha,H=void 0!==G&&G,V=e.preserveDrawingBuffer,W=void 0!==V&&V,q=e.powerPreference,X=void 0===q?"default":q,K=e.autoClear,Y=void 0===K||K,J=e.webgl,Q=void 0===J?2:J;_classCallCheck3(this,Renderer);var Z={alpha:O,depth:L,stencil:B,antialias:j,premultipliedAlpha:H,preserveDrawingBuffer:W,powerPreference:X};this.dpr=R,this.alpha=O,this.color=!0,this.depth=L,this.stencil=B,this.premultipliedAlpha=H,this.autoClear=Y,this.id=Ed++,2===Q&&(this.gl=_.getContext("webgl2",Z)),this.isWebgl2=!!this.gl,this.gl||(this.gl=_.getContext("webgl",Z)),this.gl,this.gl.renderer=this,this.setSize(E,T),this.state={},this.state.blendFunc={src:this.gl.ONE,dst:this.gl.ZERO},this.state.blendEquation={modeRGB:this.gl.FUNC_ADD},this.state.cullFace=!1,this.state.frontFace=this.gl.CCW,this.state.depthMask=!0,this.state.depthFunc=this.gl.LEQUAL,this.state.premultiplyAlpha=!1,this.state.flipY=!1,this.state.unpackAlignment=4,this.state.framebuffer=null,this.state.viewport={x:0,y:0,width:null,height:null},this.state.textureUnits=[],this.state.activeTextureUnit=0,this.state.boundBuffer=null,this.state.uniformLocations=new Map,this.state.currentProgram=null,this.extensions={},this.isWebgl2?(this.getExtension("EXT_color_buffer_float"),this.getExtension("OES_texture_float_linear")):(this.getExtension("OES_texture_float"),this.getExtension("OES_texture_float_linear"),this.getExtension("OES_texture_half_float"),this.getExtension("OES_texture_half_float_linear"),this.getExtension("OES_element_index_uint"),this.getExtension("OES_standard_derivatives"),this.getExtension("EXT_sRGB"),this.getExtension("WEBGL_depth_texture"),this.getExtension("WEBGL_draw_buffers")),this.getExtension("WEBGL_compressed_texture_astc"),this.getExtension("EXT_texture_compression_bptc"),this.getExtension("WEBGL_compressed_texture_s3tc"),this.getExtension("WEBGL_compressed_texture_etc1"),this.getExtension("WEBGL_compressed_texture_pvrtc"),this.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),this.vertexAttribDivisor=this.getExtension("ANGLE_instanced_arrays","vertexAttribDivisor","vertexAttribDivisorANGLE"),this.drawArraysInstanced=this.getExtension("ANGLE_instanced_arrays","drawArraysInstanced","drawArraysInstancedANGLE"),this.drawElementsInstanced=this.getExtension("ANGLE_instanced_arrays","drawElementsInstanced","drawElementsInstancedANGLE"),this.createVertexArray=this.getExtension("OES_vertex_array_object","createVertexArray","createVertexArrayOES"),this.bindVertexArray=this.getExtension("OES_vertex_array_object","bindVertexArray","bindVertexArrayOES"),this.deleteVertexArray=this.getExtension("OES_vertex_array_object","deleteVertexArray","deleteVertexArrayOES"),this.drawBuffers=this.getExtension("WEBGL_draw_buffers","drawBuffers","drawBuffersWEBGL"),this.parameters={},this.parameters.maxTextureUnits=this.gl.getParameter(this.gl.MAX_COMBINED_TEXTURE_IMAGE_UNITS),this.parameters.maxAnisotropy=this.getExtension("EXT_texture_filter_anisotropic")?this.gl.getParameter(this.getExtension("EXT_texture_filter_anisotropic").MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},[{key:"setSize",value:function(e,l){this.width=e,this.height=l,this.gl.canvas.width=e*this.dpr,this.gl.canvas.height=l*this.dpr,this.gl.canvas.style&&Object.assign(this.gl.canvas.style,{width:e+"px",height:l+"px"})}},{key:"setViewport",value:function(e,l){var _=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,S=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.state.viewport.width===e&&this.state.viewport.height===l||(this.state.viewport.width=e,this.state.viewport.height=l,this.state.viewport.x=_,this.state.viewport.y=S,this.gl.viewport(_,S,e,l))}},{key:"setScissor",value:function(e,l){var _=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,S=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.gl.scissor(_,S,e,l)}},{key:"enable",value:function(e){!0!==this.state[e]&&(this.gl.enable(e),this.state[e]=!0)}},{key:"disable",value:function(e){!1!==this.state[e]&&(this.gl.disable(e),this.state[e]=!1)}},{key:"setBlendFunc",value:function(e,l,_,S){this.state.blendFunc.src===e&&this.state.blendFunc.dst===l&&this.state.blendFunc.srcAlpha===_&&this.state.blendFunc.dstAlpha===S||(this.state.blendFunc.src=e,this.state.blendFunc.dst=l,this.state.blendFunc.srcAlpha=_,this.state.blendFunc.dstAlpha=S,void 0!==_?this.gl.blendFuncSeparate(e,l,_,S):this.gl.blendFunc(e,l))}},{key:"setBlendEquation",value:function(e,l){e=e||this.gl.FUNC_ADD,this.state.blendEquation.modeRGB===e&&this.state.blendEquation.modeAlpha===l||(this.state.blendEquation.modeRGB=e,this.state.blendEquation.modeAlpha=l,void 0!==l?this.gl.blendEquationSeparate(e,l):this.gl.blendEquation(e))}},{key:"setCullFace",value:function(e){this.state.cullFace!==e&&(this.state.cullFace=e,this.gl.cullFace(e))}},{key:"setFrontFace",value:function(e){this.state.frontFace!==e&&(this.state.frontFace=e,this.gl.frontFace(e))}},{key:"setDepthMask",value:function(e){this.state.depthMask!==e&&(this.state.depthMask=e,this.gl.depthMask(e))}},{key:"setDepthFunc",value:function(e){this.state.depthFunc!==e&&(this.state.depthFunc=e,this.gl.depthFunc(e))}},{key:"setStencilMask",value:function(e){this.state.stencilMask!==e&&(this.state.stencilMask=e,this.gl.stencilMask(e))}},{key:"setStencilFunc",value:function(e,l,_){this.state.stencilFunc===e&&this.state.stencilRef===l&&this.state.stencilFuncMask===_||(this.state.stencilFunc=e||this.gl.ALWAYS,this.state.stencilRef=l||0,this.state.stencilFuncMask=_||0,this.gl.stencilFunc(e||this.gl.ALWAYS,l||0,_||0))}},{key:"setStencilOp",value:function(e,l,_){this.state.stencilFail===e&&this.state.stencilDepthFail===l&&this.state.stencilDepthPass===_||(this.state.stencilFail=e,this.state.stencilDepthFail=l,this.state.stencilDepthPass=_,this.gl.stencilOp(e,l,_))}},{key:"activeTexture",value:function(e){this.state.activeTextureUnit!==e&&(this.state.activeTextureUnit=e,this.gl.activeTexture(this.gl.TEXTURE0+e))}},{key:"bindFramebuffer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=e.target,_=void 0===l?this.gl.FRAMEBUFFER:l,S=e.buffer,E=void 0===S?null:S;this.state.framebuffer!==E&&(this.state.framebuffer=E,this.gl.bindFramebuffer(_,E))}},{key:"getExtension",value:function(e,l,_){return l&&this.gl[l]?this.gl[l].bind(this.gl):(this.extensions[e]||(this.extensions[e]=this.gl.getExtension(e)),l?this.extensions[e]?this.extensions[e][_].bind(this.extensions[e]):null:this.extensions[e])}},{key:"sortOpaque",value:function(e,l){return e.renderOrder!==l.renderOrder?e.renderOrder-l.renderOrder:e.program.id!==l.program.id?e.program.id-l.program.id:e.zDepth!==l.zDepth?e.zDepth-l.zDepth:l.id-e.id}},{key:"sortTransparent",value:function(e,l){return e.renderOrder!==l.renderOrder?e.renderOrder-l.renderOrder:e.zDepth!==l.zDepth?l.zDepth-e.zDepth:l.id-e.id}},{key:"sortUI",value:function(e,l){return e.renderOrder!==l.renderOrder?e.renderOrder-l.renderOrder:e.program.id!==l.program.id?e.program.id-l.program.id:l.id-e.id}},{key:"getRenderList",value:function(e){var l=e.scene,_=e.camera,S=e.frustumCull,E=e.sort,k=[];if(_&&S&&_.updateFrustum(),l.traverse(function(e){if(!e.visible)return!0;e.draw&&(S&&e.frustumCulled&&_&&!_.frustumIntersectsMesh(e)||k.push(e))}),E){var T=[],M=[],R=[];k.forEach(function(e){e.program.transparent?e.program.depthTest?M.push(e):R.push(e):T.push(e),e.zDepth=0,0===e.renderOrder&&e.program.depthTest&&_&&(e.worldMatrix.getTranslation(xd),xd.applyMatrix4(_.projectionViewMatrix),e.zDepth=xd.z)}),T.sort(this.sortOpaque),M.sort(this.sortTransparent),R.sort(this.sortUI),k=T.concat(M,R)}return k}},{key:"render",value:function(e){var l=e.scene,_=e.camera,S=e.target,E=void 0===S?null:S,k=e.update,T=void 0===k||k,M=e.sort,R=void 0===M||M,I=e.frustumCull,O=void 0===I||I,D=e.clear;null===E?(this.bindFramebuffer(),this.setViewport(this.width*this.dpr,this.height*this.dpr)):(this.bindFramebuffer(E),this.setViewport(E.width,E.height)),(D||this.autoClear&&!1!==D)&&(!this.depth||E&&!E.depth||(this.enable(this.gl.DEPTH_TEST),this.setDepthMask(!0)),(this.stencil||!E||E.stencil)&&(this.enable(this.gl.STENCIL_TEST),this.setStencilMask(255)),this.gl.clear((this.color?this.gl.COLOR_BUFFER_BIT:0)|(this.depth?this.gl.DEPTH_BUFFER_BIT:0)|(this.stencil?this.gl.STENCIL_BUFFER_BIT:0))),T&&l.updateMatrixWorld(),_&&_.updateMatrixWorld(),this.getRenderList({scene:l,camera:_,frustumCull:O,sort:R}).forEach(function(e){e.draw({camera:_})})}}])}();function multiply$2(e,l,_){var S=l[0],E=l[1],k=l[2],T=l[3],M=_[0],R=_[1],I=_[2],O=_[3];return e[0]=S*O+T*M+E*I-k*R,e[1]=E*O+T*R+k*M-S*I,e[2]=k*O+T*I+S*R-E*M,e[3]=T*O-S*M-E*R-k*I,e}O("aY",kd);var copy$2=function(e,l){return e[0]=l[0],e[1]=l[1],e[2]=l[2],e[3]=l[3],e},set$2=function(e,l,_,S,E){return e[0]=l,e[1]=_,e[2]=S,e[3]=E,e},_dot=function(e,l){return e[0]*l[0]+e[1]*l[1]+e[2]*l[2]+e[3]*l[3]},normalize$1=function(e,l){var _=l[0],S=l[1],E=l[2],k=l[3],T=_*_+S*S+E*E+k*k;return T>0&&(T=1/Math.sqrt(T)),e[0]=_*T,e[1]=S*T,e[2]=E*T,e[3]=k*T,e},Ad=function(e){function Quat(){var e,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,E=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;_classCallCheck3(this,Quat),(e=_callSuper(this,Quat,[l,_,S,E])).onChange=function(){},e._target=e;var k=["0","1","2","3"];return _possibleConstructorReturn(e,new Proxy(e,{set:function(e,l){var _=Reflect.set.apply(Reflect,arguments);return _&&k.includes(l)&&e.onChange(),_}}))}return _inherits(Quat,e),_createClass3(Quat,[{key:"x",get:function(){return this[0]},set:function(e){this._target[0]=e,this.onChange()}},{key:"y",get:function(){return this[1]},set:function(e){this._target[1]=e,this.onChange()}},{key:"z",get:function(){return this[2]},set:function(e){this._target[2]=e,this.onChange()}},{key:"w",get:function(){return this[3]},set:function(e){this._target[3]=e,this.onChange()}},{key:"identity",value:function(){return function(e){e[0]=0,e[1]=0,e[2]=0,e[3]=1}(this._target),this.onChange(),this}},{key:"set",value:function(e,l,_,S){return e.length?this.copy(e):(set$2(this._target,e,l,_,S),this.onChange(),this)}},{key:"rotateX",value:function(e){return function(e,l,_){_*=.5;var S=l[0],E=l[1],k=l[2],T=l[3],M=Math.sin(_),R=Math.cos(_);e[0]=S*R+T*M,e[1]=E*R+k*M,e[2]=k*R-E*M,e[3]=T*R-S*M}(this._target,this._target,e),this.onChange(),this}},{key:"rotateY",value:function(e){return function(e,l,_){_*=.5;var S=l[0],E=l[1],k=l[2],T=l[3],M=Math.sin(_),R=Math.cos(_);e[0]=S*R-k*M,e[1]=E*R+T*M,e[2]=k*R+S*M,e[3]=T*R-E*M}(this._target,this._target,e),this.onChange(),this}},{key:"rotateZ",value:function(e){return function(e,l,_){_*=.5;var S=l[0],E=l[1],k=l[2],T=l[3],M=Math.sin(_),R=Math.cos(_);e[0]=S*R+E*M,e[1]=E*R-S*M,e[2]=k*R+T*M,e[3]=T*R-k*M}(this._target,this._target,e),this.onChange(),this}},{key:"inverse",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._target;return function(e,l){var _=l[0],S=l[1],E=l[2],k=l[3],T=_*_+S*S+E*E+k*k,M=T?1/T:0;e[0]=-_*M,e[1]=-S*M,e[2]=-E*M,e[3]=k*M}(this._target,e),this.onChange(),this}},{key:"conjugate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._target;return function(e,l){e[0]=-l[0],e[1]=-l[1],e[2]=-l[2],e[3]=l[3]}(this._target,e),this.onChange(),this}},{key:"copy",value:function(e){return copy$2(this._target,e),this.onChange(),this}},{key:"normalize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._target;return normalize$1(this._target,e),this.onChange(),this}},{key:"multiply",value:function(e,l){return l?multiply$2(this._target,e,l):multiply$2(this._target,this._target,e),this.onChange(),this}},{key:"dot",value:function(e){return _dot(this._target,e)}},{key:"fromMatrix3",value:function(e){return function(e,l){var _,S=l[0]+l[4]+l[8];if(S>0)_=Math.sqrt(S+1),e[3]=.5*_,_=.5/_,e[0]=(l[5]-l[7])*_,e[1]=(l[6]-l[2])*_,e[2]=(l[1]-l[3])*_;else{var E=0;l[4]>l[0]&&(E=1),l[8]>l[3*E+E]&&(E=2);var k=(E+1)%3,T=(E+2)%3;_=Math.sqrt(l[3*E+E]-l[3*k+k]-l[3*T+T]+1),e[E]=.5*_,_=.5/_,e[3]=(l[3*k+T]-l[3*T+k])*_,e[k]=(l[3*k+E]+l[3*E+k])*_,e[T]=(l[3*T+E]+l[3*E+T])*_}}(this._target,e),this.onChange(),this}},{key:"fromEuler",value:function(e,l){return function(e,l){var _=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"YXZ",S=Math.sin(.5*l[0]),E=Math.cos(.5*l[0]),k=Math.sin(.5*l[1]),T=Math.cos(.5*l[1]),M=Math.sin(.5*l[2]),R=Math.cos(.5*l[2]);"XYZ"===_?(e[0]=S*T*R+E*k*M,e[1]=E*k*R-S*T*M,e[2]=E*T*M+S*k*R,e[3]=E*T*R-S*k*M):"YXZ"===_?(e[0]=S*T*R+E*k*M,e[1]=E*k*R-S*T*M,e[2]=E*T*M-S*k*R,e[3]=E*T*R+S*k*M):"ZXY"===_?(e[0]=S*T*R-E*k*M,e[1]=E*k*R+S*T*M,e[2]=E*T*M+S*k*R,e[3]=E*T*R-S*k*M):"ZYX"===_?(e[0]=S*T*R-E*k*M,e[1]=E*k*R+S*T*M,e[2]=E*T*M-S*k*R,e[3]=E*T*R+S*k*M):"YZX"===_?(e[0]=S*T*R+E*k*M,e[1]=E*k*R+S*T*M,e[2]=E*T*M-S*k*R,e[3]=E*T*R-S*k*M):"XZY"===_&&(e[0]=S*T*R-E*k*M,e[1]=E*k*R-S*T*M,e[2]=E*T*M+S*k*R,e[3]=E*T*R+S*k*M)}(this._target,e,e.order),l||this.onChange(),this}},{key:"fromAxisAngle",value:function(e,l){return function(e,l,_){_*=.5;var S=Math.sin(_);e[0]=S*l[0],e[1]=S*l[1],e[2]=S*l[2],e[3]=Math.cos(_)}(this._target,e,l),this.onChange(),this}},{key:"slerp",value:function(e,l){return function(e,l,_,S){var E,k,T,M,R,I=l[0],O=l[1],D=l[2],L=l[3],U=_[0],B=_[1],z=_[2],j=_[3];(k=I*U+O*B+D*z+L*j)<0&&(k=-k,U=-U,B=-B,z=-z,j=-j),1-k>1e-6?(E=Math.acos(k),T=Math.sin(E),M=Math.sin((1-S)*E)/T,R=Math.sin(S*E)/T):(M=1-S,R=S),e[0]=M*I+R*U,e[1]=M*O+R*B,e[2]=M*D+R*z,e[3]=M*L+R*j}(this._target,this._target,e,l),this.onChange(),this}},{key:"fromArray",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._target[0]=e[l],this._target[1]=e[l+1],this._target[2]=e[l+2],this._target[3]=e[l+3],this.onChange(),this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[l]=this[0],e[l+1]=this[1],e[l+2]=this[2],e[l+3]=this[3],e}}])}(_wrapNativeSuper(Array));function _determinant(e){var l=e[0],_=e[1],S=e[2],E=e[3],k=e[4],T=e[5],M=e[6],R=e[7],I=e[8],O=e[9],D=e[10],L=e[11],U=e[12],B=e[13],z=e[14],j=e[15];return(l*T-_*k)*(D*j-L*z)-(l*M-S*k)*(O*j-L*B)+(l*R-E*k)*(O*z-D*B)+(_*M-S*T)*(I*j-L*U)-(_*R-E*T)*(I*z-D*U)+(S*R-E*M)*(I*B-O*U)}function multiply$1(e,l,_){var S=l[0],E=l[1],k=l[2],T=l[3],M=l[4],R=l[5],I=l[6],O=l[7],D=l[8],L=l[9],U=l[10],B=l[11],z=l[12],j=l[13],G=l[14],H=l[15],V=_[0],W=_[1],q=_[2],X=_[3];return e[0]=V*S+W*M+q*D+X*z,e[1]=V*E+W*R+q*L+X*j,e[2]=V*k+W*I+q*U+X*G,e[3]=V*T+W*O+q*B+X*H,V=_[4],W=_[5],q=_[6],X=_[7],e[4]=V*S+W*M+q*D+X*z,e[5]=V*E+W*R+q*L+X*j,e[6]=V*k+W*I+q*U+X*G,e[7]=V*T+W*O+q*B+X*H,V=_[8],W=_[9],q=_[10],X=_[11],e[8]=V*S+W*M+q*D+X*z,e[9]=V*E+W*R+q*L+X*j,e[10]=V*k+W*I+q*U+X*G,e[11]=V*T+W*O+q*B+X*H,V=_[12],W=_[13],q=_[14],X=_[15],e[12]=V*S+W*M+q*D+X*z,e[13]=V*E+W*R+q*L+X*j,e[14]=V*k+W*I+q*U+X*G,e[15]=V*T+W*O+q*B+X*H,e}function _getScaling(e,l){var _=l[0],S=l[1],E=l[2],k=l[4],T=l[5],M=l[6],R=l[8],I=l[9],O=l[10];return e[0]=Math.hypot(_,S,E),e[1]=Math.hypot(k,T,M),e[2]=Math.hypot(R,I,O),e}var Cd,Td=(Cd=[1,1,1],function(e,l){var _=Cd;_getScaling(_,l);var S=1/_[0],E=1/_[1],k=1/_[2],T=l[0]*S,M=l[1]*E,R=l[2]*k,I=l[4]*S,O=l[5]*E,D=l[6]*k,L=l[8]*S,U=l[9]*E,B=l[10]*k,z=T+O+B,j=0;return z>0?(j=2*Math.sqrt(z+1),e[3]=.25*j,e[0]=(D-U)/j,e[1]=(L-R)/j,e[2]=(M-I)/j):T>O&&T>B?(j=2*Math.sqrt(1+T-O-B),e[3]=(D-U)/j,e[0]=.25*j,e[1]=(M+I)/j,e[2]=(L+R)/j):O>B?(j=2*Math.sqrt(1+O-T-B),e[3]=(L-R)/j,e[0]=(M+I)/j,e[1]=.25*j,e[2]=(D+U)/j):(j=2*Math.sqrt(1+B-T-O),e[3]=(M-I)/j,e[0]=(L+R)/j,e[1]=(D+U)/j,e[2]=.25*j),e});function _add(e,l,_){return e[0]=l[0]+_[0],e[1]=l[1]+_[1],e[2]=l[2]+_[2],e[3]=l[3]+_[3],e[4]=l[4]+_[4],e[5]=l[5]+_[5],e[6]=l[6]+_[6],e[7]=l[7]+_[7],e[8]=l[8]+_[8],e[9]=l[9]+_[9],e[10]=l[10]+_[10],e[11]=l[11]+_[11],e[12]=l[12]+_[12],e[13]=l[13]+_[13],e[14]=l[14]+_[14],e[15]=l[15]+_[15],e}function subtract(e,l,_){return e[0]=l[0]-_[0],e[1]=l[1]-_[1],e[2]=l[2]-_[2],e[3]=l[3]-_[3],e[4]=l[4]-_[4],e[5]=l[5]-_[5],e[6]=l[6]-_[6],e[7]=l[7]-_[7],e[8]=l[8]-_[8],e[9]=l[9]-_[9],e[10]=l[10]-_[10],e[11]=l[11]-_[11],e[12]=l[12]-_[12],e[13]=l[13]-_[13],e[14]=l[14]-_[14],e[15]=l[15]-_[15],e}var Md=function(e){function Mat4(){var e,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,E=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,k=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,T=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,M=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,R=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,I=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,O=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,D=arguments.length>10&&void 0!==arguments[10]?arguments[10]:1,L=arguments.length>11&&void 0!==arguments[11]?arguments[11]:0,U=arguments.length>12&&void 0!==arguments[12]?arguments[12]:0,B=arguments.length>13&&void 0!==arguments[13]?arguments[13]:0,z=arguments.length>14&&void 0!==arguments[14]?arguments[14]:0,j=arguments.length>15&&void 0!==arguments[15]?arguments[15]:1;return _classCallCheck3(this,Mat4),_possibleConstructorReturn(e=_callSuper(this,Mat4,[l,_,S,E,k,T,M,R,I,O,D,L,U,B,z,j]),e)}return _inherits(Mat4,e),_createClass3(Mat4,[{key:"x",get:function(){return this[12]},set:function(e){this[12]=e}},{key:"y",get:function(){return this[13]},set:function(e){this[13]=e}},{key:"z",get:function(){return this[14]},set:function(e){this[14]=e}},{key:"w",get:function(){return this[15]},set:function(e){this[15]=e}},{key:"set",value:function(e,l,_,S,E,k,T,M,R,I,O,D,L,U,B,z){return e.length?this.copy(e):(function(e,l,_,S,E,k,T,M,R,I,O,D,L,U,B,z,j){e[0]=l,e[1]=_,e[2]=S,e[3]=E,e[4]=k,e[5]=T,e[6]=M,e[7]=R,e[8]=I,e[9]=O,e[10]=D,e[11]=L,e[12]=U,e[13]=B,e[14]=z,e[15]=j}(this,e,l,_,S,E,k,T,M,R,I,O,D,L,U,B,z),this)}},{key:"translate",value:function(e){return function(e,l,_){var S,E,k,T,M,R,I,O,D,L,U,B,z=_[0],j=_[1],G=_[2];l===e?(e[12]=l[0]*z+l[4]*j+l[8]*G+l[12],e[13]=l[1]*z+l[5]*j+l[9]*G+l[13],e[14]=l[2]*z+l[6]*j+l[10]*G+l[14],e[15]=l[3]*z+l[7]*j+l[11]*G+l[15]):(S=l[0],E=l[1],k=l[2],T=l[3],M=l[4],R=l[5],I=l[6],O=l[7],D=l[8],L=l[9],U=l[10],B=l[11],e[0]=S,e[1]=E,e[2]=k,e[3]=T,e[4]=M,e[5]=R,e[6]=I,e[7]=O,e[8]=D,e[9]=L,e[10]=U,e[11]=B,e[12]=S*z+M*j+D*G+l[12],e[13]=E*z+R*j+L*G+l[13],e[14]=k*z+I*j+U*G+l[14],e[15]=T*z+O*j+B*G+l[15])}(this,arguments.length>1&&void 0!==arguments[1]?arguments[1]:this,e),this}},{key:"rotate",value:function(e,l){return function(e,l,_,S){var E,k,T,M,R,I,O,D,L,U,B,z,j,G,H,V,W,q,X,K,Y,J,Q,Z,$=S[0],ee=S[1],te=S[2],ne=Math.hypot($,ee,te);Math.abs(ne)<1e-6||($*=ne=1/ne,ee*=ne,te*=ne,E=Math.sin(_),T=1-(k=Math.cos(_)),M=l[0],R=l[1],I=l[2],O=l[3],D=l[4],L=l[5],U=l[6],B=l[7],z=l[8],j=l[9],G=l[10],H=l[11],V=$*$*T+k,W=ee*$*T+te*E,q=te*$*T-ee*E,X=$*ee*T-te*E,K=ee*ee*T+k,Y=te*ee*T+$*E,J=$*te*T+ee*E,Q=ee*te*T-$*E,Z=te*te*T+k,e[0]=M*V+D*W+z*q,e[1]=R*V+L*W+j*q,e[2]=I*V+U*W+G*q,e[3]=O*V+B*W+H*q,e[4]=M*X+D*K+z*Y,e[5]=R*X+L*K+j*Y,e[6]=I*X+U*K+G*Y,e[7]=O*X+B*K+H*Y,e[8]=M*J+D*Q+z*Z,e[9]=R*J+L*Q+j*Z,e[10]=I*J+U*Q+G*Z,e[11]=O*J+B*Q+H*Z,l!==e&&(e[12]=l[12],e[13]=l[13],e[14]=l[14],e[15]=l[15]))}(this,arguments.length>2&&void 0!==arguments[2]?arguments[2]:this,e,l),this}},{key:"scale",value:function(e){return function(e,l,_){var S=_[0],E=_[1],k=_[2];e[0]=l[0]*S,e[1]=l[1]*S,e[2]=l[2]*S,e[3]=l[3]*S,e[4]=l[4]*E,e[5]=l[5]*E,e[6]=l[6]*E,e[7]=l[7]*E,e[8]=l[8]*k,e[9]=l[9]*k,e[10]=l[10]*k,e[11]=l[11]*k,e[12]=l[12],e[13]=l[13],e[14]=l[14],e[15]=l[15]}(this,arguments.length>1&&void 0!==arguments[1]?arguments[1]:this,"number"==typeof e?[e,e,e]:e),this}},{key:"add",value:function(e,l){return l?_add(this,e,l):_add(this,this,e),this}},{key:"sub",value:function(e,l){return l?subtract(this,e,l):subtract(this,this,e),this}},{key:"multiply",value:function(e,l){return e.length?l?multiply$1(this,e,l):multiply$1(this,this,e):function(e,l,_){e[0]=l[0]*_,e[1]=l[1]*_,e[2]=l[2]*_,e[3]=l[3]*_,e[4]=l[4]*_,e[5]=l[5]*_,e[6]=l[6]*_,e[7]=l[7]*_,e[8]=l[8]*_,e[9]=l[9]*_,e[10]=l[10]*_,e[11]=l[11]*_,e[12]=l[12]*_,e[13]=l[13]*_,e[14]=l[14]*_,e[15]=l[15]*_}(this,this,e),this}},{key:"identity",value:function(){return function(e){e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1}(this),this}},{key:"copy",value:function(e){return function(e,l){e[0]=l[0],e[1]=l[1],e[2]=l[2],e[3]=l[3],e[4]=l[4],e[5]=l[5],e[6]=l[6],e[7]=l[7],e[8]=l[8],e[9]=l[9],e[10]=l[10],e[11]=l[11],e[12]=l[12],e[13]=l[13],e[14]=l[14],e[15]=l[15]}(this,e),this}},{key:"fromPerspective",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,l,_,S,E){var k=1/Math.tan(l/2),T=1/(S-E);e[0]=k/_,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=k,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(E+S)*T,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*E*S*T,e[15]=0}(this,e.fov,e.aspect,e.near,e.far),this}},{key:"fromOrthogonal",value:function(e){return function(e,l,_,S,E,k,T){var M=1/(l-_),R=1/(S-E),I=1/(k-T);e[0]=-2*M,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*R,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*I,e[11]=0,e[12]=(l+_)*M,e[13]=(E+S)*R,e[14]=(T+k)*I,e[15]=1}(this,e.left,e.right,e.bottom,e.top,e.near,e.far),this}},{key:"fromQuaternion",value:function(e){return function(e,l){var _=l[0],S=l[1],E=l[2],k=l[3],T=_+_,M=S+S,R=E+E,I=_*T,O=S*T,D=S*M,L=E*T,U=E*M,B=E*R,z=k*T,j=k*M,G=k*R;e[0]=1-D-B,e[1]=O+G,e[2]=L-j,e[3]=0,e[4]=O-G,e[5]=1-I-B,e[6]=U+z,e[7]=0,e[8]=L+j,e[9]=U-z,e[10]=1-I-D,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1}(this,e),this}},{key:"setPosition",value:function(e){return this.x=e[0],this.y=e[1],this.z=e[2],this}},{key:"inverse",value:function(){return function(e,l){var _=l[0],S=l[1],E=l[2],k=l[3],T=l[4],M=l[5],R=l[6],I=l[7],O=l[8],D=l[9],L=l[10],U=l[11],B=l[12],z=l[13],j=l[14],G=l[15],H=_*M-S*T,V=_*R-E*T,W=_*I-k*T,q=S*R-E*M,X=S*I-k*M,K=E*I-k*R,Y=O*z-D*B,J=O*j-L*B,Q=O*G-U*B,Z=D*j-L*z,$=D*G-U*z,ee=L*G-U*j,te=H*ee-V*$+W*Z+q*Q-X*J+K*Y;te&&(te=1/te,e[0]=(M*ee-R*$+I*Z)*te,e[1]=(E*$-S*ee-k*Z)*te,e[2]=(z*K-j*X+G*q)*te,e[3]=(L*X-D*K-U*q)*te,e[4]=(R*Q-T*ee-I*J)*te,e[5]=(_*ee-E*Q+k*J)*te,e[6]=(j*W-B*K-G*V)*te,e[7]=(O*K-L*W+U*V)*te,e[8]=(T*$-M*Q+I*Y)*te,e[9]=(S*Q-_*$-k*Y)*te,e[10]=(B*X-z*W+G*H)*te,e[11]=(D*W-O*X-U*H)*te,e[12]=(M*J-T*Z-R*Y)*te,e[13]=(_*Z-S*J+E*Y)*te,e[14]=(z*V-B*q-j*H)*te,e[15]=(O*q-D*V+L*H)*te)}(this,arguments.length>0&&void 0!==arguments[0]?arguments[0]:this),this}},{key:"compose",value:function(e,l,_){var S,E,k,T,M,R,I,O,D,L,U,B,z,j,G,H,V,W,q,X,K,Y,J;return E=l,k=_,T=this,M=(S=e)[0],R=S[1],I=S[2],O=S[3],B=M*(D=M+M),z=M*(L=R+R),j=M*(U=I+I),G=R*L,H=R*U,V=I*U,W=O*D,q=O*L,X=O*U,K=k[0],Y=k[1],J=k[2],T[0]=(1-(G+V))*K,T[1]=(z+X)*K,T[2]=(j-q)*K,T[3]=0,T[4]=(z-X)*Y,T[5]=(1-(B+V))*Y,T[6]=(H+W)*Y,T[7]=0,T[8]=(j+q)*J,T[9]=(H-W)*J,T[10]=(1-(B+G))*J,T[11]=0,T[12]=E[0],T[13]=E[1],T[14]=E[2],T[15]=1,this}},{key:"decompose",value:function(e,l,_){return function(e,l,_,S){var E=length([e[0],e[1],e[2]]),k=length([e[4],e[5],e[6]]),T=length([e[8],e[9],e[10]]);_determinant(e)<0&&(E=-E),_[0]=e[12],_[1]=e[13],_[2]=e[14];var M=e.slice(),R=1/E,I=1/k,O=1/T;M[0]*=R,M[1]*=R,M[2]*=R,M[4]*=I,M[5]*=I,M[6]*=I,M[8]*=O,M[9]*=O,M[10]*=O,Td(l,M),S[0]=E,S[1]=k,S[2]=T}(this,e,l,_),this}},{key:"getRotation",value:function(e){return Td(e,this),this}},{key:"getTranslation",value:function(e){return function(e,l){e[0]=l[12],e[1]=l[13],e[2]=l[14]}(e,this),this}},{key:"getScaling",value:function(e){return _getScaling(e,this),this}},{key:"getMaxScaleOnAxis",value:function(){return l=(e=this)[0],_=e[1],S=e[2],E=e[4],k=e[5],T=e[6],M=e[8],R=e[9],I=e[10],O=l*l+_*_+S*S,D=E*E+k*k+T*T,L=M*M+R*R+I*I,Math.sqrt(Math.max(O,D,L));var e,l,_,S,E,k,T,M,R,I,O,D,L}},{key:"lookAt",value:function(e,l,_){return function(e,l,_,S){var E=l[0],k=l[1],T=l[2],M=S[0],R=S[1],I=S[2],O=E-_[0],D=k-_[1],L=T-_[2],U=O*O+D*D+L*L;0===U?L=1:(O*=U=1/Math.sqrt(U),D*=U,L*=U);var B=R*L-I*D,z=I*O-M*L,j=M*D-R*O;0===(U=B*B+z*z+j*j)&&(I?M+=1e-6:R?I+=1e-6:R+=1e-6,U=(B=R*L-I*D)*B+(z=I*O-M*L)*z+(j=M*D-R*O)*j),B*=U=1/Math.sqrt(U),z*=U,j*=U,e[0]=B,e[1]=z,e[2]=j,e[3]=0,e[4]=D*j-L*z,e[5]=L*B-O*j,e[6]=O*z-D*B,e[7]=0,e[8]=O,e[9]=D,e[10]=L,e[11]=0,e[12]=E,e[13]=k,e[14]=T,e[15]=1}(this,e,l,_),this}},{key:"determinant",value:function(){return _determinant(this)}},{key:"fromArray",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this[0]=e[l],this[1]=e[l+1],this[2]=e[l+2],this[3]=e[l+3],this[4]=e[l+4],this[5]=e[l+5],this[6]=e[l+6],this[7]=e[l+7],this[8]=e[l+8],this[9]=e[l+9],this[10]=e[l+10],this[11]=e[l+11],this[12]=e[l+12],this[13]=e[l+13],this[14]=e[l+14],this[15]=e[l+15],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[l]=this[0],e[l+1]=this[1],e[l+2]=this[2],e[l+3]=this[3],e[l+4]=this[4],e[l+5]=this[5],e[l+6]=this[6],e[l+7]=this[7],e[l+8]=this[8],e[l+9]=this[9],e[l+10]=this[10],e[l+11]=this[11],e[l+12]=this[12],e[l+13]=this[13],e[l+14]=this[14],e[l+15]=this[15],e}}])}(_wrapNativeSuper(Array));var Rd=new Md,Id=function(e){function Euler(){var e,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l,S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l,E=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"YXZ";_classCallCheck3(this,Euler),(e=_callSuper(this,Euler,[l,_,S])).order=E,e.onChange=function(){},e._target=e;var k=["0","1","2"];return _possibleConstructorReturn(e,new Proxy(e,{set:function(e,l){var _=Reflect.set.apply(Reflect,arguments);return _&&k.includes(l)&&e.onChange(),_}}))}return _inherits(Euler,e),_createClass3(Euler,[{key:"x",get:function(){return this[0]},set:function(e){this._target[0]=e,this.onChange()}},{key:"y",get:function(){return this[1]},set:function(e){this._target[1]=e,this.onChange()}},{key:"z",get:function(){return this[2]},set:function(e){this._target[2]=e,this.onChange()}},{key:"set",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,_=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;return e.length?this.copy(e):(this._target[0]=e,this._target[1]=l,this._target[2]=_,this.onChange(),this)}},{key:"copy",value:function(e){return this._target[0]=e[0],this._target[1]=e[1],this._target[2]=e[2],this.onChange(),this}},{key:"reorder",value:function(e){return this._target.order=e,this.onChange(),this}},{key:"fromRotationMatrix",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.order;return function(e,l){var _=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"YXZ";"XYZ"===_?(e[1]=Math.asin(Math.min(Math.max(l[8],-1),1)),Math.abs(l[8])<.99999?(e[0]=Math.atan2(-l[9],l[10]),e[2]=Math.atan2(-l[4],l[0])):(e[0]=Math.atan2(l[6],l[5]),e[2]=0)):"YXZ"===_?(e[0]=Math.asin(-Math.min(Math.max(l[9],-1),1)),Math.abs(l[9])<.99999?(e[1]=Math.atan2(l[8],l[10]),e[2]=Math.atan2(l[1],l[5])):(e[1]=Math.atan2(-l[2],l[0]),e[2]=0)):"ZXY"===_?(e[0]=Math.asin(Math.min(Math.max(l[6],-1),1)),Math.abs(l[6])<.99999?(e[1]=Math.atan2(-l[2],l[10]),e[2]=Math.atan2(-l[4],l[5])):(e[1]=0,e[2]=Math.atan2(l[1],l[0]))):"ZYX"===_?(e[1]=Math.asin(-Math.min(Math.max(l[2],-1),1)),Math.abs(l[2])<.99999?(e[0]=Math.atan2(l[6],l[10]),e[2]=Math.atan2(l[1],l[0])):(e[0]=0,e[2]=Math.atan2(-l[4],l[5]))):"YZX"===_?(e[2]=Math.asin(Math.min(Math.max(l[1],-1),1)),Math.abs(l[1])<.99999?(e[0]=Math.atan2(-l[9],l[5]),e[1]=Math.atan2(-l[2],l[0])):(e[0]=0,e[1]=Math.atan2(l[8],l[10]))):"XZY"===_&&(e[2]=Math.asin(-Math.min(Math.max(l[4],-1),1)),Math.abs(l[4])<.99999?(e[0]=Math.atan2(l[6],l[5]),e[1]=Math.atan2(l[8],l[0])):(e[0]=Math.atan2(-l[9],l[10]),e[1]=0))}(this._target,e,l),this.onChange(),this}},{key:"fromQuaternion",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.order,_=arguments.length>2?arguments[2]:void 0;return Rd.fromQuaternion(e),this._target.fromRotationMatrix(Rd,l),_||this.onChange(),this}},{key:"fromArray",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._target[0]=e[l],this._target[1]=e[l+1],this._target[2]=e[l+2],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[l]=this[0],e[l+1]=this[1],e[l+2]=this[2],e}}])}(_wrapNativeSuper(Array)),Pd=function(){return _createClass3(function Transform(){var e=this;_classCallCheck3(this,Transform),this.parent=null,this.children=[],this.visible=!0,this.matrix=new Md,this.worldMatrix=new Md,this.matrixAutoUpdate=!0,this.worldMatrixNeedsUpdate=!1,this.position=new fd,this.quaternion=new Ad,this.scale=new fd(1),this.rotation=new Id,this.up=new fd(0,1,0),this.rotation._target.onChange=function(){return e.quaternion.fromEuler(e.rotation,!0)},this.quaternion._target.onChange=function(){return e.rotation.fromQuaternion(e.quaternion,void 0,!0)}},[{key:"setParent",value:function(e){var l=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.parent&&e!==this.parent&&this.parent.removeChild(this,!1),this.parent=e,l&&e&&e.addChild(this,!1)}},{key:"addChild",value:function(e){var l=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];~this.children.indexOf(e)||this.children.push(e),l&&e.setParent(this,!1)}},{key:"removeChild",value:function(e){var l=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];~this.children.indexOf(e)&&this.children.splice(this.children.indexOf(e),1),l&&e.setParent(null,!1)}},{key:"updateMatrixWorld",value:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.worldMatrixNeedsUpdate||e)&&(null===this.parent?this.worldMatrix.copy(this.matrix):this.worldMatrix.multiply(this.parent.worldMatrix,this.matrix),this.worldMatrixNeedsUpdate=!1,e=!0);for(var l=0,_=this.children.length;l<_;l++)this.children[l].updateMatrixWorld(e)}},{key:"updateMatrix",value:function(){this.matrix.compose(this.quaternion,this.position,this.scale),this.worldMatrixNeedsUpdate=!0}},{key:"traverse",value:function(e){if(!e(this))for(var l=0,_=this.children.length;l<_;l++)this.children[l].traverse(e)}},{key:"decompose",value:function(){this.matrix.decompose(this.quaternion._target,this.position,this.scale),this.rotation.fromQuaternion(this.quaternion)}},{key:"lookAt",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]?this.matrix.lookAt(this.position,e,this.up):this.matrix.lookAt(e,this.position,this.up),this.matrix.getRotation(this.quaternion._target),this.rotation.fromQuaternion(this.quaternion)}}])}();O("a_",Pd);var Od=new Md,Dd=new fd,Ld=new fd,Ud=function(e){function Camera(e){var l,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},S=_.near,E=void 0===S?.1:S,k=_.far,T=void 0===k?100:k,M=_.fov,R=void 0===M?45:M,I=_.aspect,O=void 0===I?1:I,D=_.left,L=_.right,U=_.bottom,B=_.top,z=_.zoom,j=void 0===z?1:z;return _classCallCheck3(this,Camera),l=_callSuper(this,Camera),Object.assign(l,{near:E,far:T,fov:R,aspect:O,left:D,right:L,bottom:U,top:B,zoom:j}),l.projectionMatrix=new Md,l.viewMatrix=new Md,l.projectionViewMatrix=new Md,l.worldPosition=new fd,l.type=D||L?"orthographic":"perspective","orthographic"===l.type?l.orthographic():l.perspective(),l}return _inherits(Camera,e),_createClass3(Camera,[{key:"perspective",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=e.near,_=void 0===l?this.near:l,S=e.far,E=void 0===S?this.far:S,k=e.fov,T=void 0===k?this.fov:k,M=e.aspect,R=void 0===M?this.aspect:M;return Object.assign(this,{near:_,far:E,fov:T,aspect:R}),this.projectionMatrix.fromPerspective({fov:T*(Math.PI/180),aspect:R,near:_,far:E}),this.type="perspective",this}},{key:"orthographic",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=e.near,_=void 0===l?this.near:l,S=e.far,E=void 0===S?this.far:S,k=e.left,T=void 0===k?this.left||-1:k,M=e.right,R=void 0===M?this.right||1:M,I=e.bottom,O=void 0===I?this.bottom||-1:I,D=e.top,L=void 0===D?this.top||1:D,U=e.zoom,B=void 0===U?this.zoom:U;return Object.assign(this,{near:_,far:E,left:T,right:R,bottom:O,top:L,zoom:B}),T/=B,R/=B,O/=B,L/=B,this.projectionMatrix.fromOrthogonal({left:T,right:R,bottom:O,top:L,near:_,far:E}),this.type="orthographic",this}},{key:"updateMatrixWorld",value:function(){return _superPropGet(Camera,"updateMatrixWorld",this,3)([]),this.viewMatrix.inverse(this.worldMatrix),this.worldMatrix.getTranslation(this.worldPosition),this.projectionViewMatrix.multiply(this.projectionMatrix,this.viewMatrix),this}},{key:"updateProjectionMatrix",value:function(){return"perspective"===this.type?this.perspective():this.orthographic()}},{key:"lookAt",value:function(e){return _superPropGet(Camera,"lookAt",this,3)([e,!0]),this}},{key:"project",value:function(e){return e.applyMatrix4(this.viewMatrix),e.applyMatrix4(this.projectionMatrix),this}},{key:"unproject",value:function(e){return e.applyMatrix4(Od.inverse(this.projectionMatrix)),e.applyMatrix4(this.worldMatrix),this}},{key:"updateFrustum",value:function(){this.frustum||(this.frustum=[new fd,new fd,new fd,new fd,new fd,new fd]);var e=this.projectionViewMatrix;this.frustum[0].set(e[3]-e[0],e[7]-e[4],e[11]-e[8]).constant=e[15]-e[12],this.frustum[1].set(e[3]+e[0],e[7]+e[4],e[11]+e[8]).constant=e[15]+e[12],this.frustum[2].set(e[3]+e[1],e[7]+e[5],e[11]+e[9]).constant=e[15]+e[13],this.frustum[3].set(e[3]-e[1],e[7]-e[5],e[11]-e[9]).constant=e[15]-e[13],this.frustum[4].set(e[3]-e[2],e[7]-e[6],e[11]-e[10]).constant=e[15]-e[14],this.frustum[5].set(e[3]+e[2],e[7]+e[6],e[11]+e[10]).constant=e[15]+e[14];for(var l=0;l<6;l++){var _=1/this.frustum[l].distance();this.frustum[l].multiply(_),this.frustum[l].constant*=_}}},{key:"frustumIntersectsMesh",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.worldMatrix;if(!e.geometry.attributes.position)return!0;if(e.geometry.bounds&&e.geometry.bounds.radius!==1/0||e.geometry.computeBoundingSphere(),!e.geometry.bounds)return!0;var _=Dd;_.copy(e.geometry.bounds.center),_.applyMatrix4(l);var S=e.geometry.bounds.radius*l.getMaxScaleOnAxis();return this.frustumIntersectsSphere(_,S)}},{key:"frustumIntersectsSphere",value:function(e,l){for(var _=Ld,S=0;S<6;S++){var E=this.frustum[S];if(_.copy(E).dot(e)+E.constant<-l)return!1}return!0}}])}(Pd);function _multiply(e,l,_){var S=l[0],E=l[1],k=l[2],T=l[3],M=l[4],R=l[5],I=l[6],O=l[7],D=l[8],L=_[0],U=_[1],B=_[2],z=_[3],j=_[4],G=_[5],H=_[6],V=_[7],W=_[8];return e[0]=L*S+U*T+B*I,e[1]=L*E+U*M+B*O,e[2]=L*k+U*R+B*D,e[3]=z*S+j*T+G*I,e[4]=z*E+j*M+G*O,e[5]=z*k+j*R+G*D,e[6]=H*S+V*T+W*I,e[7]=H*E+V*M+W*O,e[8]=H*k+V*R+W*D,e}O("aZ",Ud);var Fd=function(e){function Mat3(){var e,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,E=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,k=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,T=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,M=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,R=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,I=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1;return _classCallCheck3(this,Mat3),_possibleConstructorReturn(e=_callSuper(this,Mat3,[l,_,S,E,k,T,M,R,I]),e)}return _inherits(Mat3,e),_createClass3(Mat3,[{key:"set",value:function(e,l,_,S,E,k,T,M,R){return e.length?this.copy(e):(function(e,l,_,S,E,k,T,M,R,I){e[0]=l,e[1]=_,e[2]=S,e[3]=E,e[4]=k,e[5]=T,e[6]=M,e[7]=R,e[8]=I}(this,e,l,_,S,E,k,T,M,R),this)}},{key:"translate",value:function(e){return function(e,l,_){var S=l[0],E=l[1],k=l[2],T=l[3],M=l[4],R=l[5],I=l[6],O=l[7],D=l[8],L=_[0],U=_[1];e[0]=S,e[1]=E,e[2]=k,e[3]=T,e[4]=M,e[5]=R,e[6]=L*S+U*T+I,e[7]=L*E+U*M+O,e[8]=L*k+U*R+D}(this,arguments.length>1&&void 0!==arguments[1]?arguments[1]:this,e),this}},{key:"rotate",value:function(e){return function(e,l,_){var S=l[0],E=l[1],k=l[2],T=l[3],M=l[4],R=l[5],I=l[6],O=l[7],D=l[8],L=Math.sin(_),U=Math.cos(_);e[0]=U*S+L*T,e[1]=U*E+L*M,e[2]=U*k+L*R,e[3]=U*T-L*S,e[4]=U*M-L*E,e[5]=U*R-L*k,e[6]=I,e[7]=O,e[8]=D}(this,arguments.length>1&&void 0!==arguments[1]?arguments[1]:this,e),this}},{key:"scale",value:function(e){return function(e,l,_){var S=_[0],E=_[1];e[0]=S*l[0],e[1]=S*l[1],e[2]=S*l[2],e[3]=E*l[3],e[4]=E*l[4],e[5]=E*l[5],e[6]=l[6],e[7]=l[7],e[8]=l[8]}(this,arguments.length>1&&void 0!==arguments[1]?arguments[1]:this,e),this}},{key:"multiply",value:function(e,l){return l?_multiply(this,e,l):_multiply(this,this,e),this}},{key:"identity",value:function(){return function(e){e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1}(this),this}},{key:"copy",value:function(e){return function(e,l){e[0]=l[0],e[1]=l[1],e[2]=l[2],e[3]=l[3],e[4]=l[4],e[5]=l[5],e[6]=l[6],e[7]=l[7],e[8]=l[8]}(this,e),this}},{key:"fromMatrix4",value:function(e){return function(e,l){e[0]=l[0],e[1]=l[1],e[2]=l[2],e[3]=l[4],e[4]=l[5],e[5]=l[6],e[6]=l[8],e[7]=l[9],e[8]=l[10]}(this,e),this}},{key:"fromQuaternion",value:function(e){return function(e,l){var _=l[0],S=l[1],E=l[2],k=l[3],T=_+_,M=S+S,R=E+E,I=_*T,O=S*T,D=S*M,L=E*T,U=E*M,B=E*R,z=k*T,j=k*M,G=k*R;e[0]=1-D-B,e[3]=O-G,e[6]=L+j,e[1]=O+G,e[4]=1-I-B,e[7]=U-z,e[2]=L-j,e[5]=U+z,e[8]=1-I-D}(this,e),this}},{key:"fromBasis",value:function(e,l,_){return this.set(e[0],e[1],e[2],l[0],l[1],l[2],_[0],_[1],_[2]),this}},{key:"inverse",value:function(){return function(e,l){var _=l[0],S=l[1],E=l[2],k=l[3],T=l[4],M=l[5],R=l[6],I=l[7],O=l[8],D=O*T-M*I,L=-O*k+M*R,U=I*k-T*R,B=_*D+S*L+E*U;B&&(B=1/B,e[0]=D*B,e[1]=(-O*S+E*I)*B,e[2]=(M*S-E*T)*B,e[3]=L*B,e[4]=(O*_-E*R)*B,e[5]=(-M*_+E*k)*B,e[6]=U*B,e[7]=(-I*_+S*R)*B,e[8]=(T*_-S*k)*B)}(this,arguments.length>0&&void 0!==arguments[0]?arguments[0]:this),this}},{key:"getNormalMatrix",value:function(e){return function(e,l){var _=l[0],S=l[1],E=l[2],k=l[3],T=l[4],M=l[5],R=l[6],I=l[7],O=l[8],D=l[9],L=l[10],U=l[11],B=l[12],z=l[13],j=l[14],G=l[15],H=_*M-S*T,V=_*R-E*T,W=_*I-k*T,q=S*R-E*M,X=S*I-k*M,K=E*I-k*R,Y=O*z-D*B,J=O*j-L*B,Q=O*G-U*B,Z=D*j-L*z,$=D*G-U*z,ee=L*G-U*j,te=H*ee-V*$+W*Z+q*Q-X*J+K*Y;te&&(te=1/te,e[0]=(M*ee-R*$+I*Z)*te,e[1]=(R*Q-T*ee-I*J)*te,e[2]=(T*$-M*Q+I*Y)*te,e[3]=(E*$-S*ee-k*Z)*te,e[4]=(_*ee-E*Q+k*J)*te,e[5]=(S*Q-_*$-k*Y)*te,e[6]=(z*K-j*X+G*q)*te,e[7]=(j*W-B*K-G*V)*te,e[8]=(B*X-z*W+G*H)*te)}(this,e),this}}])}(_wrapNativeSuper(Array)),Nd=0,Bd=function(e){function Mesh(e){var l,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},S=_.geometry,E=_.program,k=_.mode,T=void 0===k?e.TRIANGLES:k,M=_.frustumCulled,R=void 0===M||M,I=_.renderOrder,O=void 0===I?0:I;return _classCallCheck3(this,Mesh),l=_callSuper(this,Mesh),e.canvas,l.gl=e,l.id=Nd++,l.geometry=S,l.program=E,l.mode=T,l.frustumCulled=R,l.renderOrder=O,l.modelViewMatrix=new Md,l.normalMatrix=new Fd,l.beforeRenderCallbacks=[],l.afterRenderCallbacks=[],l}return _inherits(Mesh,e),_createClass3(Mesh,[{key:"onBeforeRender",value:function(e){return this.beforeRenderCallbacks.push(e),this}},{key:"onAfterRender",value:function(e){return this.afterRenderCallbacks.push(e),this}},{key:"draw",value:function(){var e=this,l=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).camera;l&&(this.program.uniforms.modelMatrix||Object.assign(this.program.uniforms,{modelMatrix:{value:null},viewMatrix:{value:null},modelViewMatrix:{value:null},normalMatrix:{value:null},projectionMatrix:{value:null},cameraPosition:{value:null}}),this.program.uniforms.projectionMatrix.value=l.projectionMatrix,this.program.uniforms.cameraPosition.value=l.worldPosition,this.program.uniforms.viewMatrix.value=l.viewMatrix,this.modelViewMatrix.multiply(l.viewMatrix,this.worldMatrix),this.normalMatrix.getNormalMatrix(this.modelViewMatrix),this.program.uniforms.modelMatrix.value=this.worldMatrix,this.program.uniforms.modelViewMatrix.value=this.modelViewMatrix,this.program.uniforms.normalMatrix.value=this.normalMatrix),this.beforeRenderCallbacks.forEach(function(_){return _&&_({mesh:e,camera:l})});var _=this.program.cullFace&&this.worldMatrix.determinant()<0;this.program.use({flipFaces:_}),this.geometry.draw({mode:this.mode,program:this.program}),this.afterRenderCallbacks.forEach(function(_){return _&&_({mesh:e,camera:l})})}}])}(Pd);O("b2",Bd);var zd=new Uint8Array(4);function isPowerOf2(e){return!(e&e-1)}var jd=1,Gd=function(){return _createClass3(function Texture(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_=l.image,S=l.target,E=void 0===S?e.TEXTURE_2D:S,k=l.type,T=void 0===k?e.UNSIGNED_BYTE:k,M=l.format,R=void 0===M?e.RGBA:M,I=l.internalFormat,O=void 0===I?R:I,D=l.wrapS,L=void 0===D?e.CLAMP_TO_EDGE:D,U=l.wrapT,B=void 0===U?e.CLAMP_TO_EDGE:U,z=l.wrapR,j=void 0===z?e.CLAMP_TO_EDGE:z,G=l.generateMipmaps,H=void 0===G?E===(e.TEXTURE_2D||e.TEXTURE_CUBE_MAP):G,V=l.minFilter,W=void 0===V?H?e.NEAREST_MIPMAP_LINEAR:e.LINEAR:V,q=l.magFilter,X=void 0===q?e.LINEAR:q,K=l.premultiplyAlpha,Y=void 0!==K&&K,J=l.unpackAlignment,Q=void 0===J?4:J,Z=l.flipY,$=void 0===Z?E==(e.TEXTURE_2D||e.TEXTURE_3D):Z,ee=l.anisotropy,te=void 0===ee?0:ee,ne=l.level,re=void 0===ne?0:ne,ie=l.width,ae=l.height,oe=void 0===ae?ie:ae,se=l.length,ue=void 0===se?1:se;_classCallCheck3(this,Texture),this.gl=e,this.id=jd++,this.image=_,this.target=E,this.type=T,this.format=R,this.internalFormat=O,this.minFilter=W,this.magFilter=X,this.wrapS=L,this.wrapT=B,this.wrapR=j,this.generateMipmaps=H,this.premultiplyAlpha=Y,this.unpackAlignment=Q,this.flipY=$,this.anisotropy=Math.min(te,this.gl.renderer.parameters.maxAnisotropy),this.level=re,this.width=ie,this.height=oe,this.length=ue,this.texture=this.gl.createTexture(),this.store={image:null},this.glState=this.gl.renderer.state,this.state={},this.state.minFilter=this.gl.NEAREST_MIPMAP_LINEAR,this.state.magFilter=this.gl.LINEAR,this.state.wrapS=this.gl.REPEAT,this.state.wrapT=this.gl.REPEAT,this.state.anisotropy=0},[{key:"bind",value:function(){this.glState.textureUnits[this.glState.activeTextureUnit]!==this.id&&(this.gl.bindTexture(this.target,this.texture),this.glState.textureUnits[this.glState.activeTextureUnit]=this.id)}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,l=!(this.image===this.store.image&&!this.needsUpdate);if((l||this.glState.textureUnits[e]!==this.id)&&(this.gl.renderer.activeTexture(e),this.bind()),l){if(this.needsUpdate=!1,this.flipY!==this.glState.flipY&&(this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,this.flipY),this.glState.flipY=this.flipY),this.premultiplyAlpha!==this.glState.premultiplyAlpha&&(this.gl.pixelStorei(this.gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),this.glState.premultiplyAlpha=this.premultiplyAlpha),this.unpackAlignment!==this.glState.unpackAlignment&&(this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT,this.unpackAlignment),this.glState.unpackAlignment=this.unpackAlignment),this.minFilter!==this.state.minFilter&&(this.gl.texParameteri(this.target,this.gl.TEXTURE_MIN_FILTER,this.minFilter),this.state.minFilter=this.minFilter),this.magFilter!==this.state.magFilter&&(this.gl.texParameteri(this.target,this.gl.TEXTURE_MAG_FILTER,this.magFilter),this.state.magFilter=this.magFilter),this.wrapS!==this.state.wrapS&&(this.gl.texParameteri(this.target,this.gl.TEXTURE_WRAP_S,this.wrapS),this.state.wrapS=this.wrapS),this.wrapT!==this.state.wrapT&&(this.gl.texParameteri(this.target,this.gl.TEXTURE_WRAP_T,this.wrapT),this.state.wrapT=this.wrapT),this.wrapR!==this.state.wrapR&&(this.gl.texParameteri(this.target,this.gl.TEXTURE_WRAP_R,this.wrapR),this.state.wrapR=this.wrapR),this.anisotropy&&this.anisotropy!==this.state.anisotropy&&(this.gl.texParameterf(this.target,this.gl.renderer.getExtension("EXT_texture_filter_anisotropic").TEXTURE_MAX_ANISOTROPY_EXT,this.anisotropy),this.state.anisotropy=this.anisotropy),this.image){if(this.image.width&&(this.width=this.image.width,this.height=this.image.height),this.target===this.gl.TEXTURE_CUBE_MAP)for(var _=0;_<6;_++)this.gl.texImage2D(this.gl.TEXTURE_CUBE_MAP_POSITIVE_X+_,this.level,this.internalFormat,this.format,this.type,this.image[_]);else if(ArrayBuffer.isView(this.image))this.target===this.gl.TEXTURE_2D?this.gl.texImage2D(this.target,this.level,this.internalFormat,this.width,this.height,0,this.format,this.type,this.image):this.target!==this.gl.TEXTURE_2D_ARRAY&&this.target!==this.gl.TEXTURE_3D||this.gl.texImage3D(this.target,this.level,this.internalFormat,this.width,this.height,this.length,0,this.format,this.type,this.image);else if(this.image.isCompressedTexture)for(var S=0;S<this.image.length;S++)this.gl.compressedTexImage2D(this.target,S,this.internalFormat,this.image[S].width,this.image[S].height,0,this.image[S].data);else this.target===this.gl.TEXTURE_2D?this.gl.texImage2D(this.target,this.level,this.internalFormat,this.format,this.type,this.image):this.gl.texImage3D(this.target,this.level,this.internalFormat,this.width,this.height,this.length,0,this.format,this.type,this.image);this.generateMipmaps&&(this.gl.renderer.isWebgl2||isPowerOf2(this.image.width)&&isPowerOf2(this.image.height)?this.gl.generateMipmap(this.target):(this.generateMipmaps=!1,this.wrapS=this.wrapT=this.gl.CLAMP_TO_EDGE,this.minFilter=this.gl.LINEAR)),this.onUpdate&&this.onUpdate()}else if(this.target===this.gl.TEXTURE_CUBE_MAP)for(var E=0;E<6;E++)this.gl.texImage2D(this.gl.TEXTURE_CUBE_MAP_POSITIVE_X+E,0,this.gl.RGBA,1,1,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,zd);else this.width?this.target===this.gl.TEXTURE_2D?this.gl.texImage2D(this.target,this.level,this.internalFormat,this.width,this.height,0,this.format,this.type,null):this.gl.texImage3D(this.target,this.level,this.internalFormat,this.width,this.height,this.length,0,this.format,this.type,null):this.gl.texImage2D(this.target,0,this.gl.RGBA,1,1,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,zd);this.store.image=this.image}}}])}();O("b0",Gd);var Hd=function(e){function Plane(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_=l.width,S=void 0===_?1:_,E=l.height,k=void 0===E?1:E,T=l.widthSegments,M=void 0===T?1:T,R=l.heightSegments,I=void 0===R?1:R,O=l.attributes,D=void 0===O?{}:O;_classCallCheck3(this,Plane);var L=M,U=I,B=(L+1)*(U+1),z=L*U*6,j=new Float32Array(3*B),G=new Float32Array(3*B),H=new Float32Array(2*B),V=z>65536?new Uint32Array(z):new Uint16Array(z);return Plane.buildPlane(j,G,H,V,S,k,0,L,U),Object.assign(D,{position:{size:3,data:j},normal:{size:3,data:G},uv:{size:2,data:H},index:{data:V}}),_callSuper(this,Plane,[e,D])}return _inherits(Plane,e),_createClass3(Plane,null,[{key:"buildPlane",value:function(e,l,_,S,E,k,T,M,R){for(var I=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,O=arguments.length>10&&void 0!==arguments[10]?arguments[10]:1,D=arguments.length>11&&void 0!==arguments[11]?arguments[11]:2,L=arguments.length>12&&void 0!==arguments[12]?arguments[12]:1,U=arguments.length>13&&void 0!==arguments[13]?arguments[13]:-1,B=arguments.length>14&&void 0!==arguments[14]?arguments[14]:0,z=arguments.length>15&&void 0!==arguments[15]?arguments[15]:0,j=B,G=E/M,H=k/R,V=0;V<=R;V++)for(var W=V*H-k/2,q=0;q<=M;q++,B++){var X=q*G-E/2;if(e[3*B+I]=X*L,e[3*B+O]=W*U,e[3*B+D]=T/2,l[3*B+I]=0,l[3*B+O]=0,l[3*B+D]=T>=0?1:-1,_[2*B]=q/M,_[2*B+1]=1-V/R,V!==R&&q!==M){var K=j+q+V*(M+1),Y=j+q+(V+1)*(M+1),J=j+q+(V+1)*(M+1)+1,Q=j+q+V*(M+1)+1;S[6*z]=K,S[6*z+1]=Y,S[6*z+2]=Q,S[6*z+3]=Y,S[6*z+4]=J,S[6*z+5]=Q,z++}}}}])}(yd);O("a$",Hd);var falsyToString=function(e){return"boolean"==typeof e?"".concat(e):0===e?"0":e},Vd=clsx,Wd=(O("b5",function(e,l){return function(_){var S;if(null==(null==l?void 0:l.variants))return Vd(e,null==_?void 0:_.class,null==_?void 0:_.className);var E=l.variants,k=l.defaultVariants,T=Object.keys(E).map(function(e){var l=null==_?void 0:_[e],S=null==k?void 0:k[e];if(null===l)return null;var T=falsyToString(l)||falsyToString(S);return E[e][T]}),M=_&&Object.entries(_).reduce(function(e,l){var _=_slicedToArray(l,2),S=_[0],E=_[1];return void 0===E||(e[S]=E),e},{}),R=null==l||null===(S=l.compoundVariants)||void 0===S?void 0:S.reduce(function(e,l){var _=l.class,S=l.className,E=_objectWithoutProperties3(l,I);return Object.entries(E).every(function(e){var l=_slicedToArray(e,2),_=l[0],S=l[1];return Array.isArray(S)?S.includes(_objectSpread2(_objectSpread2({},k),M)[_]):_objectSpread2(_objectSpread2({},k),M)[_]===S})?[].concat(_toConsumableArray3(e),[_,S]):e},[]);return Vd(e,T,R,null==_?void 0:_.class,null==_?void 0:_.className)}}),"180"),qd=O("bn",2),Xd=100,Kd=301,Yd=302,Jd=306,Qd=1e3,Zd=1001,$d=1002,ef=1003,tf=1005,nf=1006,rf=1007,af=1008,of=1009,sf=1010,uf=1011,lf=1012,cf=1013,hf=1014,df=1015,ff=1016,pf=1017,vf=1018,gf=1020,mf=35902,yf=35899,_f=1023,bf=1026,Sf=1027,wf=1029,xf=1031,Ef=1033,kf=33776,Af=33777,Cf=33778,Tf=33779,Mf=35840,Rf=35841,If=35842,Pf=35843,Of=36196,Df=37492,Lf=37496,Uf=37808,Ff=37809,Nf=37810,Bf=37811,zf=37812,jf=37813,Gf=37814,Hf=37815,Vf=37816,Wf=37817,qf=37818,Xf=37819,Kf=37820,Yf=37821,Jf=36492,Qf=36494,Zf=36495,$f=36283,ep=36284,tp=36285,np=36286,rp=3200,ip="",ap="srgb",op="srgb-linear",sp="linear",up="srgb",lp=7680,cp="300 es",hp=2e3,dp=2001,fp=function(){return _createClass3(function EventDispatcher(){_classCallCheck3(this,EventDispatcher)},[{key:"addEventListener",value:function(e,l){void 0===this._listeners&&(this._listeners={});var _=this._listeners;void 0===_[e]&&(_[e]=[]),-1===_[e].indexOf(l)&&_[e].push(l)}},{key:"hasEventListener",value:function(e,l){var _=this._listeners;return void 0!==_&&(void 0!==_[e]&&-1!==_[e].indexOf(l))}},{key:"removeEventListener",value:function(e,l){var _=this._listeners;if(void 0!==_){var S=_[e];if(void 0!==S){var E=S.indexOf(l);-1!==E&&S.splice(E,1)}}}},{key:"dispatchEvent",value:function(e){var l=this._listeners;if(void 0!==l){var _=l[e.type];if(void 0!==_){e.target=this;for(var S=_.slice(0),E=0,k=S.length;E<k;E++)S[E].call(this,e);e.target=null}}}}])}(),pp=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],vp=Math.PI/180,gp=180/Math.PI;function generateUUID(){var e=4294967295*Math.random()|0,l=4294967295*Math.random()|0,_=4294967295*Math.random()|0,S=4294967295*Math.random()|0;return(pp[255&e]+pp[e>>8&255]+pp[e>>16&255]+pp[e>>24&255]+"-"+pp[255&l]+pp[l>>8&255]+"-"+pp[l>>16&15|64]+pp[l>>24&255]+"-"+pp[63&_|128]+pp[_>>8&255]+"-"+pp[_>>16&255]+pp[_>>24&255]+pp[255&S]+pp[S>>8&255]+pp[S>>16&255]+pp[S>>24&255]).toLowerCase()}function _clamp2(e,l,_){return Math.max(l,Math.min(_,e))}function lerp(e,l,_){return(1-_)*e+_*l}function denormalize(e,l){switch(l.constructor){case Float32Array:return e;case Uint32Array:return e/4294967295;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int32Array:return Math.max(e/2147483647,-1);case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}function normalize(e,l){switch(l.constructor){case Float32Array:return e;case Uint32Array:return Math.round(4294967295*e);case Uint16Array:return Math.round(65535*e);case Uint8Array:return Math.round(255*e);case Int32Array:return Math.round(2147483647*e);case Int16Array:return Math.round(32767*e);case Int8Array:return Math.round(127*e);default:throw new Error("Invalid component type.")}}var mp=function(){return _createClass3(function Vector2(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;_classCallCheck3(this,Vector2),Vector2.prototype.isVector2=!0,this.x=e,this.y=l},[{key:"width",get:function(){return this.x},set:function(e){this.x=e}},{key:"height",get:function(){return this.y},set:function(e){this.y=e}},{key:"set",value:function(e,l){return this.x=e,this.y=l,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setComponent",value:function(e,l){switch(e){case 0:this.x=l;break;case 1:this.y=l;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this}},{key:"add",value:function(e){return this.x+=e.x,this.y+=e.y,this}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this}},{key:"addVectors",value:function(e,l){return this.x=e.x+l.x,this.y=e.y+l.y,this}},{key:"addScaledVector",value:function(e,l){return this.x+=e.x*l,this.y+=e.y*l,this}},{key:"sub",value:function(e){return this.x-=e.x,this.y-=e.y,this}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this}},{key:"subVectors",value:function(e,l){return this.x=e.x-l.x,this.y=e.y-l.y,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this}},{key:"divide",value:function(e){return this.x/=e.x,this.y/=e.y,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"applyMatrix3",value:function(e){var l=this.x,_=this.y,S=e.elements;return this.x=S[0]*l+S[3]*_+S[6],this.y=S[1]*l+S[4]*_+S[7],this}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}},{key:"clamp",value:function(e,l){return this.x=_clamp2(this.x,e.x,l.x),this.y=_clamp2(this.y,e.y,l.y),this}},{key:"clampScalar",value:function(e,l){return this.x=_clamp2(this.x,e,l),this.y=_clamp2(this.y,e,l),this}},{key:"clampLength",value:function(e,l){var _=this.length();return this.divideScalar(_||1).multiplyScalar(_clamp2(_,e,l))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},{key:"roundToZero",value:function(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y}},{key:"cross",value:function(e){return this.x*e.y-this.y*e.x}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"angle",value:function(){var e=Math.atan2(-this.y,-this.x)+Math.PI;return e}},{key:"angleTo",value:function(e){var l=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===l)return Math.PI/2;var _=this.dot(e)/l;return Math.acos(_clamp2(_,-1,1))}},{key:"distanceTo",value:function(e){return Math.sqrt(this.distanceToSquared(e))}},{key:"distanceToSquared",value:function(e){var l=this.x-e.x,_=this.y-e.y;return l*l+_*_}},{key:"manhattanDistanceTo",value:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,l){return this.x+=(e.x-this.x)*l,this.y+=(e.y-this.y)*l,this}},{key:"lerpVectors",value:function(e,l,_){return this.x=e.x+(l.x-e.x)*_,this.y=e.y+(l.y-e.y)*_,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y}},{key:"fromArray",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[l],this.y=e[l+1],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[l]=this.x,e[l+1]=this.y,e}},{key:"fromBufferAttribute",value:function(e,l){return this.x=e.getX(l),this.y=e.getY(l),this}},{key:"rotateAround",value:function(e,l){var _=Math.cos(l),S=Math.sin(l),E=this.x-e.x,k=this.y-e.y;return this.x=E*_-k*S+e.x,this.y=E*S+k*_+e.y,this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this}},{key:Symbol.iterator,value:_regenerator().m(function value(){return _regenerator().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.x;case 1:return e.n=2,this.y;case 2:return e.a(2)}},value,this)})}])}();O("b6",mp);var yp=function(){return _createClass3(function Quaternion(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,_=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,S=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;_classCallCheck3(this,Quaternion),this.isQuaternion=!0,this._x=e,this._y=l,this._z=_,this._w=S},[{key:"x",get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},{key:"w",get:function(){return this._w},set:function(e){this._w=e,this._onChangeCallback()}},{key:"set",value:function(e,l,_,S){return this._x=e,this._y=l,this._z=_,this._w=S,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._w)}},{key:"copy",value:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}},{key:"setFromEuler",value:function(e){var l=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],_=e._x,S=e._y,E=e._z,k=e._order,T=Math.cos,M=Math.sin,R=T(_/2),I=T(S/2),O=T(E/2),D=M(_/2),L=M(S/2),U=M(E/2);switch(k){case"XYZ":this._x=D*I*O+R*L*U,this._y=R*L*O-D*I*U,this._z=R*I*U+D*L*O,this._w=R*I*O-D*L*U;break;case"YXZ":this._x=D*I*O+R*L*U,this._y=R*L*O-D*I*U,this._z=R*I*U-D*L*O,this._w=R*I*O+D*L*U;break;case"ZXY":this._x=D*I*O-R*L*U,this._y=R*L*O+D*I*U,this._z=R*I*U+D*L*O,this._w=R*I*O-D*L*U;break;case"ZYX":this._x=D*I*O-R*L*U,this._y=R*L*O+D*I*U,this._z=R*I*U-D*L*O,this._w=R*I*O+D*L*U;break;case"YZX":this._x=D*I*O+R*L*U,this._y=R*L*O+D*I*U,this._z=R*I*U-D*L*O,this._w=R*I*O-D*L*U;break;case"XZY":this._x=D*I*O-R*L*U,this._y=R*L*O-D*I*U,this._z=R*I*U+D*L*O,this._w=R*I*O+D*L*U}return!0===l&&this._onChangeCallback(),this}},{key:"setFromAxisAngle",value:function(e,l){var _=l/2,S=Math.sin(_);return this._x=e.x*S,this._y=e.y*S,this._z=e.z*S,this._w=Math.cos(_),this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(e){var l=e.elements,_=l[0],S=l[4],E=l[8],k=l[1],T=l[5],M=l[9],R=l[2],I=l[6],O=l[10],D=_+T+O;if(D>0){var L=.5/Math.sqrt(D+1);this._w=.25/L,this._x=(I-M)*L,this._y=(E-R)*L,this._z=(k-S)*L}else if(_>T&&_>O){var U=2*Math.sqrt(1+_-T-O);this._w=(I-M)/U,this._x=.25*U,this._y=(S+k)/U,this._z=(E+R)/U}else if(T>O){var B=2*Math.sqrt(1+T-_-O);this._w=(E-R)/B,this._x=(S+k)/B,this._y=.25*B,this._z=(M+I)/B}else{var z=2*Math.sqrt(1+O-_-T);this._w=(k-S)/z,this._x=(E+R)/z,this._y=(M+I)/z,this._z=.25*z}return this._onChangeCallback(),this}},{key:"setFromUnitVectors",value:function(e,l){var _=e.dot(l)+1;return _<1e-8?(_=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=_):(this._x=0,this._y=-e.z,this._z=e.y,this._w=_)):(this._x=e.y*l.z-e.z*l.y,this._y=e.z*l.x-e.x*l.z,this._z=e.x*l.y-e.y*l.x,this._w=_),this.normalize()}},{key:"angleTo",value:function(e){return 2*Math.acos(Math.abs(_clamp2(this.dot(e),-1,1)))}},{key:"rotateTowards",value:function(e,l){var _=this.angleTo(e);if(0===_)return this;var S=Math.min(1,l/_);return this.slerp(e,S),this}},{key:"identity",value:function(){return this.set(0,0,0,1)}},{key:"invert",value:function(){return this.conjugate()}},{key:"conjugate",value:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}},{key:"dot",value:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}},{key:"lengthSq",value:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}},{key:"length",value:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}},{key:"normalize",value:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}},{key:"multiply",value:function(e){return this.multiplyQuaternions(this,e)}},{key:"premultiply",value:function(e){return this.multiplyQuaternions(e,this)}},{key:"multiplyQuaternions",value:function(e,l){var _=e._x,S=e._y,E=e._z,k=e._w,T=l._x,M=l._y,R=l._z,I=l._w;return this._x=_*I+k*T+S*R-E*M,this._y=S*I+k*M+E*T-_*R,this._z=E*I+k*R+_*M-S*T,this._w=k*I-_*T-S*M-E*R,this._onChangeCallback(),this}},{key:"slerp",value:function(e,l){if(0===l)return this;if(1===l)return this.copy(e);var _=this._x,S=this._y,E=this._z,k=this._w,T=k*e._w+_*e._x+S*e._y+E*e._z;if(T<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,T=-T):this.copy(e),T>=1)return this._w=k,this._x=_,this._y=S,this._z=E,this;var M=1-T*T;if(M<=Number.EPSILON){var R=1-l;return this._w=R*k+l*this._w,this._x=R*_+l*this._x,this._y=R*S+l*this._y,this._z=R*E+l*this._z,this.normalize(),this}var I=Math.sqrt(M),O=Math.atan2(I,T),D=Math.sin((1-l)*O)/I,L=Math.sin(l*O)/I;return this._w=k*D+this._w*L,this._x=_*D+this._x*L,this._y=S*D+this._y*L,this._z=E*D+this._z*L,this._onChangeCallback(),this}},{key:"slerpQuaternions",value:function(e,l,_){return this.copy(e).slerp(l,_)}},{key:"random",value:function(){var e=2*Math.PI*Math.random(),l=2*Math.PI*Math.random(),_=Math.random(),S=Math.sqrt(1-_),E=Math.sqrt(_);return this.set(S*Math.sin(e),S*Math.cos(e),E*Math.sin(l),E*Math.cos(l))}},{key:"equals",value:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}},{key:"fromArray",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._x=e[l],this._y=e[l+1],this._z=e[l+2],this._w=e[l+3],this._onChangeCallback(),this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[l]=this._x,e[l+1]=this._y,e[l+2]=this._z,e[l+3]=this._w,e}},{key:"fromBufferAttribute",value:function(e,l){return this._x=e.getX(l),this._y=e.getY(l),this._z=e.getZ(l),this._w=e.getW(l),this._onChangeCallback(),this}},{key:"toJSON",value:function(){return this.toArray()}},{key:"_onChange",value:function(e){return this._onChangeCallback=e,this}},{key:"_onChangeCallback",value:function(){}},{key:Symbol.iterator,value:_regenerator().m(function value(){return _regenerator().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this._x;case 1:return e.n=2,this._y;case 2:return e.n=3,this._z;case 3:return e.n=4,this._w;case 4:return e.a(2)}},value,this)})}],[{key:"slerpFlat",value:function(e,l,_,S,E,k,T){var M=_[S+0],R=_[S+1],I=_[S+2],O=_[S+3],D=E[k+0],L=E[k+1],U=E[k+2],B=E[k+3];if(0===T)return e[l+0]=M,e[l+1]=R,e[l+2]=I,void(e[l+3]=O);if(1===T)return e[l+0]=D,e[l+1]=L,e[l+2]=U,void(e[l+3]=B);if(O!==B||M!==D||R!==L||I!==U){var z=1-T,j=M*D+R*L+I*U+O*B,G=j>=0?1:-1,H=1-j*j;if(H>Number.EPSILON){var V=Math.sqrt(H),W=Math.atan2(V,j*G);z=Math.sin(z*W)/V,T=Math.sin(T*W)/V}var q=T*G;if(M=M*z+D*q,R=R*z+L*q,I=I*z+U*q,O=O*z+B*q,z===1-T){var X=1/Math.sqrt(M*M+R*R+I*I+O*O);M*=X,R*=X,I*=X,O*=X}}e[l]=M,e[l+1]=R,e[l+2]=I,e[l+3]=O}},{key:"multiplyQuaternionsFlat",value:function(e,l,_,S,E,k){var T=_[S],M=_[S+1],R=_[S+2],I=_[S+3],O=E[k],D=E[k+1],L=E[k+2],U=E[k+3];return e[l]=T*U+I*O+M*L-R*D,e[l+1]=M*U+I*D+R*O-T*L,e[l+2]=R*U+I*L+T*D-M*O,e[l+3]=I*U-T*O-M*D-R*L,e}}])}(),_p=function(){return _createClass3(function Vector3(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,_=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;_classCallCheck3(this,Vector3),Vector3.prototype.isVector3=!0,this.x=e,this.y=l,this.z=_},[{key:"set",value:function(e,l,_){return void 0===_&&(_=this.z),this.x=e,this.y=l,this.z=_,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this.z=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setZ",value:function(e){return this.z=e,this}},{key:"setComponent",value:function(e,l){switch(e){case 0:this.x=l;break;case 1:this.y=l;break;case 2:this.z=l;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}},{key:"add",value:function(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this.z+=e,this}},{key:"addVectors",value:function(e,l){return this.x=e.x+l.x,this.y=e.y+l.y,this.z=e.z+l.z,this}},{key:"addScaledVector",value:function(e,l){return this.x+=e.x*l,this.y+=e.y*l,this.z+=e.z*l,this}},{key:"sub",value:function(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this.z-=e,this}},{key:"subVectors",value:function(e,l){return this.x=e.x-l.x,this.y=e.y-l.y,this.z=e.z-l.z,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this.z*=e,this}},{key:"multiplyVectors",value:function(e,l){return this.x=e.x*l.x,this.y=e.y*l.y,this.z=e.z*l.z,this}},{key:"applyEuler",value:function(e){return this.applyQuaternion(Sp.setFromEuler(e))}},{key:"applyAxisAngle",value:function(e,l){return this.applyQuaternion(Sp.setFromAxisAngle(e,l))}},{key:"applyMatrix3",value:function(e){var l=this.x,_=this.y,S=this.z,E=e.elements;return this.x=E[0]*l+E[3]*_+E[6]*S,this.y=E[1]*l+E[4]*_+E[7]*S,this.z=E[2]*l+E[5]*_+E[8]*S,this}},{key:"applyNormalMatrix",value:function(e){return this.applyMatrix3(e).normalize()}},{key:"applyMatrix4",value:function(e){var l=this.x,_=this.y,S=this.z,E=e.elements,k=1/(E[3]*l+E[7]*_+E[11]*S+E[15]);return this.x=(E[0]*l+E[4]*_+E[8]*S+E[12])*k,this.y=(E[1]*l+E[5]*_+E[9]*S+E[13])*k,this.z=(E[2]*l+E[6]*_+E[10]*S+E[14])*k,this}},{key:"applyQuaternion",value:function(e){var l=this.x,_=this.y,S=this.z,E=e.x,k=e.y,T=e.z,M=e.w,R=2*(k*S-T*_),I=2*(T*l-E*S),O=2*(E*_-k*l);return this.x=l+M*R+k*O-T*I,this.y=_+M*I+T*R-E*O,this.z=S+M*O+E*I-k*R,this}},{key:"project",value:function(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}},{key:"unproject",value:function(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}},{key:"transformDirection",value:function(e){var l=this.x,_=this.y,S=this.z,E=e.elements;return this.x=E[0]*l+E[4]*_+E[8]*S,this.y=E[1]*l+E[5]*_+E[9]*S,this.z=E[2]*l+E[6]*_+E[10]*S,this.normalize()}},{key:"divide",value:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}},{key:"clamp",value:function(e,l){return this.x=_clamp2(this.x,e.x,l.x),this.y=_clamp2(this.y,e.y,l.y),this.z=_clamp2(this.z,e.z,l.z),this}},{key:"clampScalar",value:function(e,l){return this.x=_clamp2(this.x,e,l),this.y=_clamp2(this.y,e,l),this.z=_clamp2(this.z,e,l),this}},{key:"clampLength",value:function(e,l){var _=this.length();return this.divideScalar(_||1).multiplyScalar(_clamp2(_,e,l))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}},{key:"roundToZero",value:function(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,l){return this.x+=(e.x-this.x)*l,this.y+=(e.y-this.y)*l,this.z+=(e.z-this.z)*l,this}},{key:"lerpVectors",value:function(e,l,_){return this.x=e.x+(l.x-e.x)*_,this.y=e.y+(l.y-e.y)*_,this.z=e.z+(l.z-e.z)*_,this}},{key:"cross",value:function(e){return this.crossVectors(this,e)}},{key:"crossVectors",value:function(e,l){var _=e.x,S=e.y,E=e.z,k=l.x,T=l.y,M=l.z;return this.x=S*M-E*T,this.y=E*k-_*M,this.z=_*T-S*k,this}},{key:"projectOnVector",value:function(e){var l=e.lengthSq();if(0===l)return this.set(0,0,0);var _=e.dot(this)/l;return this.copy(e).multiplyScalar(_)}},{key:"projectOnPlane",value:function(e){return bp.copy(this).projectOnVector(e),this.sub(bp)}},{key:"reflect",value:function(e){return this.sub(bp.copy(e).multiplyScalar(2*this.dot(e)))}},{key:"angleTo",value:function(e){var l=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===l)return Math.PI/2;var _=this.dot(e)/l;return Math.acos(_clamp2(_,-1,1))}},{key:"distanceTo",value:function(e){return Math.sqrt(this.distanceToSquared(e))}},{key:"distanceToSquared",value:function(e){var l=this.x-e.x,_=this.y-e.y,S=this.z-e.z;return l*l+_*_+S*S}},{key:"manhattanDistanceTo",value:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}},{key:"setFromSpherical",value:function(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}},{key:"setFromSphericalCoords",value:function(e,l,_){var S=Math.sin(l)*e;return this.x=S*Math.sin(_),this.y=Math.cos(l)*e,this.z=S*Math.cos(_),this}},{key:"setFromCylindrical",value:function(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}},{key:"setFromCylindricalCoords",value:function(e,l,_){return this.x=e*Math.sin(l),this.y=_,this.z=e*Math.cos(l),this}},{key:"setFromMatrixPosition",value:function(e){var l=e.elements;return this.x=l[12],this.y=l[13],this.z=l[14],this}},{key:"setFromMatrixScale",value:function(e){var l=this.setFromMatrixColumn(e,0).length(),_=this.setFromMatrixColumn(e,1).length(),S=this.setFromMatrixColumn(e,2).length();return this.x=l,this.y=_,this.z=S,this}},{key:"setFromMatrixColumn",value:function(e,l){return this.fromArray(e.elements,4*l)}},{key:"setFromMatrix3Column",value:function(e,l){return this.fromArray(e.elements,3*l)}},{key:"setFromEuler",value:function(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}},{key:"setFromColor",value:function(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}},{key:"fromArray",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[l],this.y=e[l+1],this.z=e[l+2],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[l]=this.x,e[l+1]=this.y,e[l+2]=this.z,e}},{key:"fromBufferAttribute",value:function(e,l){return this.x=e.getX(l),this.y=e.getY(l),this.z=e.getZ(l),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}},{key:"randomDirection",value:function(){var e=Math.random()*Math.PI*2,l=2*Math.random()-1,_=Math.sqrt(1-l*l);return this.x=_*Math.cos(e),this.y=l,this.z=_*Math.sin(e),this}},{key:Symbol.iterator,value:_regenerator().m(function value(){return _regenerator().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.x;case 1:return e.n=2,this.y;case 2:return e.n=3,this.z;case 3:return e.a(2)}},value,this)})}])}();O("bj",_p);var bp=new _p,Sp=new yp,wp=function(){return _createClass3(function Matrix3(e,l,_,S,E,k,T,M,R){_classCallCheck3(this,Matrix3),Matrix3.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==e&&this.set(e,l,_,S,E,k,T,M,R)},[{key:"set",value:function(e,l,_,S,E,k,T,M,R){var I=this.elements;return I[0]=e,I[1]=S,I[2]=T,I[3]=l,I[4]=E,I[5]=M,I[6]=_,I[7]=k,I[8]=R,this}},{key:"identity",value:function(){return this.set(1,0,0,0,1,0,0,0,1),this}},{key:"copy",value:function(e){var l=this.elements,_=e.elements;return l[0]=_[0],l[1]=_[1],l[2]=_[2],l[3]=_[3],l[4]=_[4],l[5]=_[5],l[6]=_[6],l[7]=_[7],l[8]=_[8],this}},{key:"extractBasis",value:function(e,l,_){return e.setFromMatrix3Column(this,0),l.setFromMatrix3Column(this,1),_.setFromMatrix3Column(this,2),this}},{key:"setFromMatrix4",value:function(e){var l=e.elements;return this.set(l[0],l[4],l[8],l[1],l[5],l[9],l[2],l[6],l[10]),this}},{key:"multiply",value:function(e){return this.multiplyMatrices(this,e)}},{key:"premultiply",value:function(e){return this.multiplyMatrices(e,this)}},{key:"multiplyMatrices",value:function(e,l){var _=e.elements,S=l.elements,E=this.elements,k=_[0],T=_[3],M=_[6],R=_[1],I=_[4],O=_[7],D=_[2],L=_[5],U=_[8],B=S[0],z=S[3],j=S[6],G=S[1],H=S[4],V=S[7],W=S[2],q=S[5],X=S[8];return E[0]=k*B+T*G+M*W,E[3]=k*z+T*H+M*q,E[6]=k*j+T*V+M*X,E[1]=R*B+I*G+O*W,E[4]=R*z+I*H+O*q,E[7]=R*j+I*V+O*X,E[2]=D*B+L*G+U*W,E[5]=D*z+L*H+U*q,E[8]=D*j+L*V+U*X,this}},{key:"multiplyScalar",value:function(e){var l=this.elements;return l[0]*=e,l[3]*=e,l[6]*=e,l[1]*=e,l[4]*=e,l[7]*=e,l[2]*=e,l[5]*=e,l[8]*=e,this}},{key:"determinant",value:function(){var e=this.elements,l=e[0],_=e[1],S=e[2],E=e[3],k=e[4],T=e[5],M=e[6],R=e[7],I=e[8];return l*k*I-l*T*R-_*E*I+_*T*M+S*E*R-S*k*M}},{key:"invert",value:function(){var e=this.elements,l=e[0],_=e[1],S=e[2],E=e[3],k=e[4],T=e[5],M=e[6],R=e[7],I=e[8],O=I*k-T*R,D=T*M-I*E,L=R*E-k*M,U=l*O+_*D+S*L;if(0===U)return this.set(0,0,0,0,0,0,0,0,0);var B=1/U;return e[0]=O*B,e[1]=(S*R-I*_)*B,e[2]=(T*_-S*k)*B,e[3]=D*B,e[4]=(I*l-S*M)*B,e[5]=(S*E-T*l)*B,e[6]=L*B,e[7]=(_*M-R*l)*B,e[8]=(k*l-_*E)*B,this}},{key:"transpose",value:function(){var e,l=this.elements;return e=l[1],l[1]=l[3],l[3]=e,e=l[2],l[2]=l[6],l[6]=e,e=l[5],l[5]=l[7],l[7]=e,this}},{key:"getNormalMatrix",value:function(e){return this.setFromMatrix4(e).invert().transpose()}},{key:"transposeIntoArray",value:function(e){var l=this.elements;return e[0]=l[0],e[1]=l[3],e[2]=l[6],e[3]=l[1],e[4]=l[4],e[5]=l[7],e[6]=l[2],e[7]=l[5],e[8]=l[8],this}},{key:"setUvTransform",value:function(e,l,_,S,E,k,T){var M=Math.cos(E),R=Math.sin(E);return this.set(_*M,_*R,-_*(M*k+R*T)+k+e,-S*R,S*M,-S*(-R*k+M*T)+T+l,0,0,1),this}},{key:"scale",value:function(e,l){return this.premultiply(xp.makeScale(e,l)),this}},{key:"rotate",value:function(e){return this.premultiply(xp.makeRotation(-e)),this}},{key:"translate",value:function(e,l){return this.premultiply(xp.makeTranslation(e,l)),this}},{key:"makeTranslation",value:function(e,l){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,l,0,0,1),this}},{key:"makeRotation",value:function(e){var l=Math.cos(e),_=Math.sin(e);return this.set(l,-_,0,_,l,0,0,0,1),this}},{key:"makeScale",value:function(e,l){return this.set(e,0,0,0,l,0,0,0,1),this}},{key:"equals",value:function(e){for(var l=this.elements,_=e.elements,S=0;S<9;S++)if(l[S]!==_[S])return!1;return!0}},{key:"fromArray",value:function(e){for(var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,_=0;_<9;_++)this.elements[_]=e[_+l];return this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,_=this.elements;return e[l]=_[0],e[l+1]=_[1],e[l+2]=_[2],e[l+3]=_[3],e[l+4]=_[4],e[l+5]=_[5],e[l+6]=_[6],e[l+7]=_[7],e[l+8]=_[8],e}},{key:"clone",value:function(){return(new this.constructor).fromArray(this.elements)}}])}(),xp=new wp;function arrayNeedsUint32(e){for(var l=e.length-1;l>=0;--l)if(e[l]>=65535)return!0;return!1}function createElementNS(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}var Ep={};function warnOnce(e){e in Ep||(Ep[e]=!0)}function probeAsync(e,l,_){return new Promise(function(S,E){setTimeout(function probe(){switch(e.clientWaitSync(l,e.SYNC_FLUSH_COMMANDS_BIT,0)){case e.WAIT_FAILED:E();break;case e.TIMEOUT_EXPIRED:setTimeout(probe,_);break;default:S()}},_)})}var kp=(new wp).set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),Ap=(new wp).set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function createColorManagement(){var e={enabled:!0,workingColorSpace:op,spaces:{},convert:function(e,l,_){return!1!==this.enabled&&l!==_&&l&&_?(this.spaces[l].transfer===up&&(e.r=SRGBToLinear(e.r),e.g=SRGBToLinear(e.g),e.b=SRGBToLinear(e.b)),this.spaces[l].primaries!==this.spaces[_].primaries&&(e.applyMatrix3(this.spaces[l].toXYZ),e.applyMatrix3(this.spaces[_].fromXYZ)),this.spaces[_].transfer===up&&(e.r=LinearToSRGB(e.r),e.g=LinearToSRGB(e.g),e.b=LinearToSRGB(e.b)),e):e},workingToColorSpace:function(e,l){return this.convert(e,this.workingColorSpace,l)},colorSpaceToWorking:function(e,l){return this.convert(e,l,this.workingColorSpace)},getPrimaries:function(e){return this.spaces[e].primaries},getTransfer:function(e){return e===ip?sp:this.spaces[e].transfer},getToneMappingMode:function(e){return this.spaces[e].outputColorSpaceConfig.toneMappingMode||"standard"},getLuminanceCoefficients:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.workingColorSpace;return e.fromArray(this.spaces[l].luminanceCoefficients)},define:function(e){Object.assign(this.spaces,e)},_getMatrix:function(e,l,_){return e.copy(this.spaces[l].toXYZ).multiply(this.spaces[_].fromXYZ)},_getDrawingBufferColorSpace:function(e){return this.spaces[e].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.workingColorSpace;return this.spaces[e].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(l,_){return warnOnce("THREE.ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),e.workingToColorSpace(l,_)},toWorkingColorSpace:function(l,_){return warnOnce("THREE.ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),e.colorSpaceToWorking(l,_)}},l=[.64,.33,.3,.6,.15,.06],_=[.2126,.7152,.0722],S=[.3127,.329];return e.define(_defineProperty3(_defineProperty3({},op,{primaries:l,whitePoint:S,transfer:sp,toXYZ:kp,fromXYZ:Ap,luminanceCoefficients:_,workingColorSpaceConfig:{unpackColorSpace:ap},outputColorSpaceConfig:{drawingBufferColorSpace:ap}}),ap,{primaries:l,whitePoint:S,transfer:up,toXYZ:kp,fromXYZ:Ap,luminanceCoefficients:_,outputColorSpaceConfig:{drawingBufferColorSpace:ap}})),e}var Cp,Tp=createColorManagement();function SRGBToLinear(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function LinearToSRGB(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}var Mp=function(){return _createClass3(function ImageUtils(){_classCallCheck3(this,ImageUtils)},null,[{key:"getDataURL",value:function(e){var l,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"image/png";if(/^data:/i.test(e.src))return e.src;if("undefined"==typeof HTMLCanvasElement)return e.src;if(e instanceof HTMLCanvasElement)l=e;else{void 0===Cp&&(Cp=createElementNS("canvas")),Cp.width=e.width,Cp.height=e.height;var S=Cp.getContext("2d");e instanceof ImageData?S.putImageData(e,0,0):S.drawImage(e,0,0,e.width,e.height),l=Cp}return l.toDataURL(_)}},{key:"sRGBToLinear",value:function(e){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){var l=createElementNS("canvas");l.width=e.width,l.height=e.height;var _=l.getContext("2d");_.drawImage(e,0,0,e.width,e.height);for(var S=_.getImageData(0,0,e.width,e.height),E=S.data,k=0;k<E.length;k++)E[k]=255*SRGBToLinear(E[k]/255);return _.putImageData(S,0,0),l}if(e.data){for(var T=e.data.slice(0),M=0;M<T.length;M++)T instanceof Uint8Array||T instanceof Uint8ClampedArray?T[M]=Math.floor(255*SRGBToLinear(T[M]/255)):T[M]=SRGBToLinear(T[M]);return{data:T,width:e.width,height:e.height}}return e}}])}(),Rp=0,Ip=function(){return _createClass3(function Source(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;_classCallCheck3(this,Source),this.isSource=!0,Object.defineProperty(this,"id",{value:Rp++}),this.uuid=generateUUID(),this.data=e,this.dataReady=!0,this.version=0},[{key:"getSize",value:function(e){var l=this.data;return"undefined"!=typeof HTMLVideoElement&&l instanceof HTMLVideoElement?e.set(l.videoWidth,l.videoHeight,0):l instanceof VideoFrame?e.set(l.displayHeight,l.displayWidth,0):null!==l?e.set(l.width,l.height,l.depth||0):e.set(0,0,0),e}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"toJSON",value:function(e){var l=void 0===e||"string"==typeof e;if(!l&&void 0!==e.images[this.uuid])return e.images[this.uuid];var _={uuid:this.uuid,url:""},S=this.data;if(null!==S){var E;if(Array.isArray(S)){E=[];for(var k=0,T=S.length;k<T;k++)S[k].isDataTexture?E.push(serializeImage(S[k].image)):E.push(serializeImage(S[k]))}else E=serializeImage(S);_.url=E}return l||(e.images[this.uuid]=_),_}}])}();function serializeImage(e){return"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap?Mp.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:{}}var Pp=0,Op=new _p,Dp=function(e){function Texture(){var e,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Texture.DEFAULT_IMAGE,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Texture.DEFAULT_MAPPING,S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Zd,E=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Zd,k=arguments.length>4&&void 0!==arguments[4]?arguments[4]:nf,T=arguments.length>5&&void 0!==arguments[5]?arguments[5]:af,M=arguments.length>6&&void 0!==arguments[6]?arguments[6]:_f,R=arguments.length>7&&void 0!==arguments[7]?arguments[7]:of,I=arguments.length>8&&void 0!==arguments[8]?arguments[8]:Texture.DEFAULT_ANISOTROPY,O=arguments.length>9&&void 0!==arguments[9]?arguments[9]:ip;return _classCallCheck3(this,Texture),(e=_callSuper(this,Texture)).isTexture=!0,Object.defineProperty(e,"id",{value:Pp++}),e.uuid=generateUUID(),e.name="",e.source=new Ip(l),e.mipmaps=[],e.mapping=_,e.channel=0,e.wrapS=S,e.wrapT=E,e.magFilter=k,e.minFilter=T,e.anisotropy=I,e.format=M,e.internalFormat=null,e.type=R,e.offset=new mp(0,0),e.repeat=new mp(1,1),e.center=new mp(0,0),e.rotation=0,e.matrixAutoUpdate=!0,e.matrix=new wp,e.generateMipmaps=!0,e.premultiplyAlpha=!1,e.flipY=!0,e.unpackAlignment=4,e.colorSpace=O,e.userData={},e.updateRanges=[],e.version=0,e.onUpdate=null,e.renderTarget=null,e.isRenderTargetTexture=!1,e.isArrayTexture=!!(l&&l.depth&&l.depth>1),e.pmremVersion=0,e}return _inherits(Texture,e),_createClass3(Texture,[{key:"width",get:function(){return this.source.getSize(Op).x}},{key:"height",get:function(){return this.source.getSize(Op).y}},{key:"depth",get:function(){return this.source.getSize(Op).z}},{key:"image",get:function(){return this.source.data},set:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.source.data=e}},{key:"updateMatrix",value:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}},{key:"addUpdateRange",value:function(e,l){this.updateRanges.push({start:e,count:l})}},{key:"clearUpdateRanges",value:function(){this.updateRanges.length=0}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.isArrayTexture=e.isArrayTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}},{key:"setValues",value:function(e){for(var l in e){var _=e[l];if(void 0!==_){var S=this[l];void 0!==S&&(S&&_&&S.isVector2&&_.isVector2||S&&_&&S.isVector3&&_.isVector3||S&&_&&S.isMatrix3&&_.isMatrix3?S.copy(_):this[l]=_)}}}},{key:"toJSON",value:function(e){var l=void 0===e||"string"==typeof e;if(!l&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];var _={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(_.userData=this.userData),l||(e.textures[this.uuid]=_),_}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}},{key:"transformUv",value:function(e){if(300!==this.mapping)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Qd:e.x=e.x-Math.floor(e.x);break;case Zd:e.x=e.x<0?0:1;break;case $d:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case Qd:e.y=e.y-Math.floor(e.y);break;case Zd:e.y=e.y<0?0:1;break;case $d:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}},{key:"needsUpdate",set:function(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}},{key:"needsPMREMUpdate",set:function(e){!0===e&&this.pmremVersion++}}])}(fp);Dp.DEFAULT_IMAGE=null,Dp.DEFAULT_MAPPING=300,Dp.DEFAULT_ANISOTROPY=1;var Lp=function(){return _createClass3(function Vector4(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,_=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,S=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;_classCallCheck3(this,Vector4),Vector4.prototype.isVector4=!0,this.x=e,this.y=l,this.z=_,this.w=S},[{key:"width",get:function(){return this.z},set:function(e){this.z=e}},{key:"height",get:function(){return this.w},set:function(e){this.w=e}},{key:"set",value:function(e,l,_,S){return this.x=e,this.y=l,this.z=_,this.w=S,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setZ",value:function(e){return this.z=e,this}},{key:"setW",value:function(e){return this.w=e,this}},{key:"setComponent",value:function(e,l){switch(e){case 0:this.x=l;break;case 1:this.y=l;break;case 2:this.z=l;break;case 3:this.w=l;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z,this.w)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}},{key:"add",value:function(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}},{key:"addVectors",value:function(e,l){return this.x=e.x+l.x,this.y=e.y+l.y,this.z=e.z+l.z,this.w=e.w+l.w,this}},{key:"addScaledVector",value:function(e,l){return this.x+=e.x*l,this.y+=e.y*l,this.z+=e.z*l,this.w+=e.w*l,this}},{key:"sub",value:function(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}},{key:"subVectors",value:function(e,l){return this.x=e.x-l.x,this.y=e.y-l.y,this.z=e.z-l.z,this.w=e.w-l.w,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}},{key:"applyMatrix4",value:function(e){var l=this.x,_=this.y,S=this.z,E=this.w,k=e.elements;return this.x=k[0]*l+k[4]*_+k[8]*S+k[12]*E,this.y=k[1]*l+k[5]*_+k[9]*S+k[13]*E,this.z=k[2]*l+k[6]*_+k[10]*S+k[14]*E,this.w=k[3]*l+k[7]*_+k[11]*S+k[15]*E,this}},{key:"divide",value:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"setAxisAngleFromQuaternion",value:function(e){this.w=2*Math.acos(e.w);var l=Math.sqrt(1-e.w*e.w);return l<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/l,this.y=e.y/l,this.z=e.z/l),this}},{key:"setAxisAngleFromRotationMatrix",value:function(e){var l,_,S,E,k=.01,T=.1,M=e.elements,R=M[0],I=M[4],O=M[8],D=M[1],L=M[5],U=M[9],B=M[2],z=M[6],j=M[10];if(Math.abs(I-D)<k&&Math.abs(O-B)<k&&Math.abs(U-z)<k){if(Math.abs(I+D)<T&&Math.abs(O+B)<T&&Math.abs(U+z)<T&&Math.abs(R+L+j-3)<T)return this.set(1,0,0,0),this;l=Math.PI;var G=(R+1)/2,H=(L+1)/2,V=(j+1)/2,W=(I+D)/4,q=(O+B)/4,X=(U+z)/4;return G>H&&G>V?G<k?(_=0,S=.707106781,E=.707106781):(S=W/(_=Math.sqrt(G)),E=q/_):H>V?H<k?(_=.707106781,S=0,E=.707106781):(_=W/(S=Math.sqrt(H)),E=X/S):V<k?(_=.707106781,S=.707106781,E=0):(_=q/(E=Math.sqrt(V)),S=X/E),this.set(_,S,E,l),this}var K=Math.sqrt((z-U)*(z-U)+(O-B)*(O-B)+(D-I)*(D-I));return Math.abs(K)<.001&&(K=1),this.x=(z-U)/K,this.y=(O-B)/K,this.z=(D-I)/K,this.w=Math.acos((R+L+j-1)/2),this}},{key:"setFromMatrixPosition",value:function(e){var l=e.elements;return this.x=l[12],this.y=l[13],this.z=l[14],this.w=l[15],this}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}},{key:"clamp",value:function(e,l){return this.x=_clamp2(this.x,e.x,l.x),this.y=_clamp2(this.y,e.y,l.y),this.z=_clamp2(this.z,e.z,l.z),this.w=_clamp2(this.w,e.w,l.w),this}},{key:"clampScalar",value:function(e,l){return this.x=_clamp2(this.x,e,l),this.y=_clamp2(this.y,e,l),this.z=_clamp2(this.z,e,l),this.w=_clamp2(this.w,e,l),this}},{key:"clampLength",value:function(e,l){var _=this.length();return this.divideScalar(_||1).multiplyScalar(_clamp2(_,e,l))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}},{key:"roundToZero",value:function(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,l){return this.x+=(e.x-this.x)*l,this.y+=(e.y-this.y)*l,this.z+=(e.z-this.z)*l,this.w+=(e.w-this.w)*l,this}},{key:"lerpVectors",value:function(e,l,_){return this.x=e.x+(l.x-e.x)*_,this.y=e.y+(l.y-e.y)*_,this.z=e.z+(l.z-e.z)*_,this.w=e.w+(l.w-e.w)*_,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}},{key:"fromArray",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[l],this.y=e[l+1],this.z=e[l+2],this.w=e[l+3],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[l]=this.x,e[l+1]=this.y,e[l+2]=this.z,e[l+3]=this.w,e}},{key:"fromBufferAttribute",value:function(e,l){return this.x=e.getX(l),this.y=e.getY(l),this.z=e.getZ(l),this.w=e.getW(l),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}},{key:Symbol.iterator,value:_regenerator().m(function value(){return _regenerator().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.x;case 1:return e.n=2,this.y;case 2:return e.n=3,this.z;case 3:return e.n=4,this.w;case 4:return e.a(2)}},value,this)})}])}();O("bu",Lp);var Up=function(e){function RenderTarget(){var e,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};_classCallCheck3(this,RenderTarget),e=_callSuper(this,RenderTarget),S=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:nf,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},S),e.isRenderTarget=!0,e.width=l,e.height=_,e.depth=S.depth,e.scissor=new Lp(0,0,l,_),e.scissorTest=!1,e.viewport=new Lp(0,0,l,_);var E={width:l,height:_,depth:S.depth},k=new Dp(E);e.textures=[];for(var T=S.count,M=0;M<T;M++)e.textures[M]=k.clone(),e.textures[M].isRenderTargetTexture=!0,e.textures[M].renderTarget=e;return e._setTextureOptions(S),e.depthBuffer=S.depthBuffer,e.stencilBuffer=S.stencilBuffer,e.resolveDepthBuffer=S.resolveDepthBuffer,e.resolveStencilBuffer=S.resolveStencilBuffer,e._depthTexture=null,e.depthTexture=S.depthTexture,e.samples=S.samples,e.multiview=S.multiview,e}return _inherits(RenderTarget,e),_createClass3(RenderTarget,[{key:"_setTextureOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l={minFilter:nf,generateMipmaps:!1,flipY:!1,internalFormat:null};void 0!==e.mapping&&(l.mapping=e.mapping),void 0!==e.wrapS&&(l.wrapS=e.wrapS),void 0!==e.wrapT&&(l.wrapT=e.wrapT),void 0!==e.wrapR&&(l.wrapR=e.wrapR),void 0!==e.magFilter&&(l.magFilter=e.magFilter),void 0!==e.minFilter&&(l.minFilter=e.minFilter),void 0!==e.format&&(l.format=e.format),void 0!==e.type&&(l.type=e.type),void 0!==e.anisotropy&&(l.anisotropy=e.anisotropy),void 0!==e.colorSpace&&(l.colorSpace=e.colorSpace),void 0!==e.flipY&&(l.flipY=e.flipY),void 0!==e.generateMipmaps&&(l.generateMipmaps=e.generateMipmaps),void 0!==e.internalFormat&&(l.internalFormat=e.internalFormat);for(var _=0;_<this.textures.length;_++){this.textures[_].setValues(l)}}},{key:"texture",get:function(){return this.textures[0]},set:function(e){this.textures[0]=e}},{key:"depthTexture",get:function(){return this._depthTexture},set:function(e){null!==this._depthTexture&&(this._depthTexture.renderTarget=null),null!==e&&(e.renderTarget=this),this._depthTexture=e}},{key:"setSize",value:function(e,l){var _=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(this.width!==e||this.height!==l||this.depth!==_){this.width=e,this.height=l,this.depth=_;for(var S=0,E=this.textures.length;S<E;S++)this.textures[S].image.width=e,this.textures[S].image.height=l,this.textures[S].image.depth=_,this.textures[S].isArrayTexture=this.textures[S].image.depth>1;this.dispose()}this.viewport.set(0,0,e,l),this.scissor.set(0,0,e,l)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(var l=0,_=e.textures.length;l<_;l++){this.textures[l]=e.textures[l].clone(),this.textures[l].isRenderTargetTexture=!0,this.textures[l].renderTarget=this;var S=Object.assign({},e.textures[l].image);this.textures[l].source=new Ip(S)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}])}(fp),Fp=function(e){function WebGLRenderTarget(){var e,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return _classCallCheck3(this,WebGLRenderTarget),(e=_callSuper(this,WebGLRenderTarget,[l,_,S])).isWebGLRenderTarget=!0,e}return _inherits(WebGLRenderTarget,e),_createClass3(WebGLRenderTarget)}(Up),Np=function(e){function DataArrayTexture(){var e,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,E=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return _classCallCheck3(this,DataArrayTexture),(e=_callSuper(this,DataArrayTexture,[null])).isDataArrayTexture=!0,e.image={data:l,width:_,height:S,depth:E},e.magFilter=ef,e.minFilter=ef,e.wrapR=Zd,e.generateMipmaps=!1,e.flipY=!1,e.unpackAlignment=1,e.layerUpdates=new Set,e}return _inherits(DataArrayTexture,e),_createClass3(DataArrayTexture,[{key:"addLayerUpdate",value:function(e){this.layerUpdates.add(e)}},{key:"clearLayerUpdates",value:function(){this.layerUpdates.clear()}}])}(Dp),Bp=function(e){function Data3DTexture(){var e,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,E=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return _classCallCheck3(this,Data3DTexture),(e=_callSuper(this,Data3DTexture,[null])).isData3DTexture=!0,e.image={data:l,width:_,height:S,depth:E},e.magFilter=ef,e.minFilter=ef,e.wrapR=Zd,e.generateMipmaps=!1,e.flipY=!1,e.unpackAlignment=1,e}return _inherits(Data3DTexture,e),_createClass3(Data3DTexture)}(Dp),zp=function(){return _createClass3(function Box3(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new _p(1/0,1/0,1/0),l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new _p(-1/0,-1/0,-1/0);_classCallCheck3(this,Box3),this.isBox3=!0,this.min=e,this.max=l},[{key:"set",value:function(e,l){return this.min.copy(e),this.max.copy(l),this}},{key:"setFromArray",value:function(e){this.makeEmpty();for(var l=0,_=e.length;l<_;l+=3)this.expandByPoint(Gp.fromArray(e,l));return this}},{key:"setFromBufferAttribute",value:function(e){this.makeEmpty();for(var l=0,_=e.count;l<_;l++)this.expandByPoint(Gp.fromBufferAttribute(e,l));return this}},{key:"setFromPoints",value:function(e){this.makeEmpty();for(var l=0,_=e.length;l<_;l++)this.expandByPoint(e[l]);return this}},{key:"setFromCenterAndSize",value:function(e,l){var _=Gp.copy(l).multiplyScalar(.5);return this.min.copy(e).sub(_),this.max.copy(e).add(_),this}},{key:"setFromObject",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.makeEmpty(),this.expandByObject(e,l)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.min.copy(e.min),this.max.copy(e.max),this}},{key:"makeEmpty",value:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}},{key:"isEmpty",value:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}},{key:"getCenter",value:function(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:"getSize",value:function(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}},{key:"expandByPoint",value:function(e){return this.min.min(e),this.max.max(e),this}},{key:"expandByVector",value:function(e){return this.min.sub(e),this.max.add(e),this}},{key:"expandByScalar",value:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this}},{key:"expandByObject",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.updateWorldMatrix(!1,!1);var _=e.geometry;if(void 0!==_){var S=_.getAttribute("position");if(!0===l&&void 0!==S&&!0!==e.isInstancedMesh)for(var E=0,k=S.count;E<k;E++)!0===e.isMesh?e.getVertexPosition(E,Gp):Gp.fromBufferAttribute(S,E),Gp.applyMatrix4(e.matrixWorld),this.expandByPoint(Gp);else void 0!==e.boundingBox?(null===e.boundingBox&&e.computeBoundingBox(),Hp.copy(e.boundingBox)):(null===_.boundingBox&&_.computeBoundingBox(),Hp.copy(_.boundingBox)),Hp.applyMatrix4(e.matrixWorld),this.union(Hp)}for(var T=e.children,M=0,R=T.length;M<R;M++)this.expandByObject(T[M],l);return this}},{key:"containsPoint",value:function(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}},{key:"containsBox",value:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}},{key:"getParameter",value:function(e,l){return l.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}},{key:"intersectsBox",value:function(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}},{key:"intersectsSphere",value:function(e){return this.clampPoint(e.center,Gp),Gp.distanceToSquared(e.center)<=e.radius*e.radius}},{key:"intersectsPlane",value:function(e){var l,_;return e.normal.x>0?(l=e.normal.x*this.min.x,_=e.normal.x*this.max.x):(l=e.normal.x*this.max.x,_=e.normal.x*this.min.x),e.normal.y>0?(l+=e.normal.y*this.min.y,_+=e.normal.y*this.max.y):(l+=e.normal.y*this.max.y,_+=e.normal.y*this.min.y),e.normal.z>0?(l+=e.normal.z*this.min.z,_+=e.normal.z*this.max.z):(l+=e.normal.z*this.max.z,_+=e.normal.z*this.min.z),l<=-e.constant&&_>=-e.constant}},{key:"intersectsTriangle",value:function(e){if(this.isEmpty())return!1;this.getCenter(Jp),Qp.subVectors(this.max,Jp),Vp.subVectors(e.a,Jp),Wp.subVectors(e.b,Jp),qp.subVectors(e.c,Jp),Xp.subVectors(Wp,Vp),Kp.subVectors(qp,Wp),Yp.subVectors(Vp,qp);var l=[0,-Xp.z,Xp.y,0,-Kp.z,Kp.y,0,-Yp.z,Yp.y,Xp.z,0,-Xp.x,Kp.z,0,-Kp.x,Yp.z,0,-Yp.x,-Xp.y,Xp.x,0,-Kp.y,Kp.x,0,-Yp.y,Yp.x,0];return!!satForAxes(l,Vp,Wp,qp,Qp)&&(!!satForAxes(l=[1,0,0,0,1,0,0,0,1],Vp,Wp,qp,Qp)&&(Zp.crossVectors(Xp,Kp),satForAxes(l=[Zp.x,Zp.y,Zp.z],Vp,Wp,qp,Qp)))}},{key:"clampPoint",value:function(e,l){return l.copy(e).clamp(this.min,this.max)}},{key:"distanceToPoint",value:function(e){return this.clampPoint(e,Gp).distanceTo(e)}},{key:"getBoundingSphere",value:function(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=.5*this.getSize(Gp).length()),e}},{key:"intersect",value:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}},{key:"union",value:function(e){return this.min.min(e.min),this.max.max(e.max),this}},{key:"applyMatrix4",value:function(e){return this.isEmpty()||(jp[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),jp[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),jp[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),jp[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),jp[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),jp[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),jp[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),jp[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(jp)),this}},{key:"translate",value:function(e){return this.min.add(e),this.max.add(e),this}},{key:"equals",value:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}},{key:"toJSON",value:function(){return{min:this.min.toArray(),max:this.max.toArray()}}},{key:"fromJSON",value:function(e){return this.min.fromArray(e.min),this.max.fromArray(e.max),this}}])}(),jp=[new _p,new _p,new _p,new _p,new _p,new _p,new _p,new _p],Gp=new _p,Hp=new zp,Vp=new _p,Wp=new _p,qp=new _p,Xp=new _p,Kp=new _p,Yp=new _p,Jp=new _p,Qp=new _p,Zp=new _p,$p=new _p;function satForAxes(e,l,_,S,E){for(var k=0,T=e.length-3;k<=T;k+=3){$p.fromArray(e,k);var M=E.x*Math.abs($p.x)+E.y*Math.abs($p.y)+E.z*Math.abs($p.z),R=l.dot($p),I=_.dot($p),O=S.dot($p);if(Math.max(-Math.max(R,I,O),Math.min(R,I,O))>M)return!1}return!0}var ev=new zp,tv=new _p,nv=new _p,rv=function(){return _createClass3(function Sphere(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new _p,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;_classCallCheck3(this,Sphere),this.isSphere=!0,this.center=e,this.radius=l},[{key:"set",value:function(e,l){return this.center.copy(e),this.radius=l,this}},{key:"setFromPoints",value:function(e,l){var _=this.center;void 0!==l?_.copy(l):ev.setFromPoints(e).getCenter(_);for(var S=0,E=0,k=e.length;E<k;E++)S=Math.max(S,_.distanceToSquared(e[E]));return this.radius=Math.sqrt(S),this}},{key:"copy",value:function(e){return this.center.copy(e.center),this.radius=e.radius,this}},{key:"isEmpty",value:function(){return this.radius<0}},{key:"makeEmpty",value:function(){return this.center.set(0,0,0),this.radius=-1,this}},{key:"containsPoint",value:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}},{key:"distanceToPoint",value:function(e){return e.distanceTo(this.center)-this.radius}},{key:"intersectsSphere",value:function(e){var l=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=l*l}},{key:"intersectsBox",value:function(e){return e.intersectsSphere(this)}},{key:"intersectsPlane",value:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}},{key:"clampPoint",value:function(e,l){var _=this.center.distanceToSquared(e);return l.copy(e),_>this.radius*this.radius&&(l.sub(this.center).normalize(),l.multiplyScalar(this.radius).add(this.center)),l}},{key:"getBoundingBox",value:function(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}},{key:"applyMatrix4",value:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}},{key:"translate",value:function(e){return this.center.add(e),this}},{key:"expandByPoint",value:function(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;tv.subVectors(e,this.center);var l=tv.lengthSq();if(l>this.radius*this.radius){var _=Math.sqrt(l),S=.5*(_-this.radius);this.center.addScaledVector(tv,S/_),this.radius+=S}return this}},{key:"union",value:function(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(nv.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(tv.copy(e.center).add(nv)),this.expandByPoint(tv.copy(e.center).sub(nv))),this)}},{key:"equals",value:function(e){return e.center.equals(this.center)&&e.radius===this.radius}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"toJSON",value:function(){return{radius:this.radius,center:this.center.toArray()}}},{key:"fromJSON",value:function(e){return this.radius=e.radius,this.center.fromArray(e.center),this}}])}(),iv=new _p,av=new _p,ov=new _p,sv=new _p,uv=new _p,lv=new _p,cv=new _p,hv=function(){return _createClass3(function Ray(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new _p,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new _p(0,0,-1);_classCallCheck3(this,Ray),this.origin=e,this.direction=l},[{key:"set",value:function(e,l){return this.origin.copy(e),this.direction.copy(l),this}},{key:"copy",value:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}},{key:"at",value:function(e,l){return l.copy(this.origin).addScaledVector(this.direction,e)}},{key:"lookAt",value:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this}},{key:"recast",value:function(e){return this.origin.copy(this.at(e,iv)),this}},{key:"closestPointToPoint",value:function(e,l){l.subVectors(e,this.origin);var _=l.dot(this.direction);return _<0?l.copy(this.origin):l.copy(this.origin).addScaledVector(this.direction,_)}},{key:"distanceToPoint",value:function(e){return Math.sqrt(this.distanceSqToPoint(e))}},{key:"distanceSqToPoint",value:function(e){var l=iv.subVectors(e,this.origin).dot(this.direction);return l<0?this.origin.distanceToSquared(e):(iv.copy(this.origin).addScaledVector(this.direction,l),iv.distanceToSquared(e))}},{key:"distanceSqToSegment",value:function(e,l,_,S){av.copy(e).add(l).multiplyScalar(.5),ov.copy(l).sub(e).normalize(),sv.copy(this.origin).sub(av);var E,k,T,M,R=.5*e.distanceTo(l),I=-this.direction.dot(ov),O=sv.dot(this.direction),D=-sv.dot(ov),L=sv.lengthSq(),U=Math.abs(1-I*I);if(U>0)if(k=I*O-D,M=R*U,(E=I*D-O)>=0)if(k>=-M)if(k<=M){var B=1/U;T=(E*=B)*(E+I*(k*=B)+2*O)+k*(I*E+k+2*D)+L}else k=R,T=-(E=Math.max(0,-(I*k+O)))*E+k*(k+2*D)+L;else k=-R,T=-(E=Math.max(0,-(I*k+O)))*E+k*(k+2*D)+L;else k<=-M?T=-(E=Math.max(0,-(-I*R+O)))*E+(k=E>0?-R:Math.min(Math.max(-R,-D),R))*(k+2*D)+L:k<=M?(E=0,T=(k=Math.min(Math.max(-R,-D),R))*(k+2*D)+L):T=-(E=Math.max(0,-(I*R+O)))*E+(k=E>0?R:Math.min(Math.max(-R,-D),R))*(k+2*D)+L;else k=I>0?-R:R,T=-(E=Math.max(0,-(I*k+O)))*E+k*(k+2*D)+L;return _&&_.copy(this.origin).addScaledVector(this.direction,E),S&&S.copy(av).addScaledVector(ov,k),T}},{key:"intersectSphere",value:function(e,l){iv.subVectors(e.center,this.origin);var _=iv.dot(this.direction),S=iv.dot(iv)-_*_,E=e.radius*e.radius;if(S>E)return null;var k=Math.sqrt(E-S),T=_-k,M=_+k;return M<0?null:T<0?this.at(M,l):this.at(T,l)}},{key:"intersectsSphere",value:function(e){return!(e.radius<0)&&this.distanceSqToPoint(e.center)<=e.radius*e.radius}},{key:"distanceToPlane",value:function(e){var l=e.normal.dot(this.direction);if(0===l)return 0===e.distanceToPoint(this.origin)?0:null;var _=-(this.origin.dot(e.normal)+e.constant)/l;return _>=0?_:null}},{key:"intersectPlane",value:function(e,l){var _=this.distanceToPlane(e);return null===_?null:this.at(_,l)}},{key:"intersectsPlane",value:function(e){var l=e.distanceToPoint(this.origin);return 0===l||e.normal.dot(this.direction)*l<0}},{key:"intersectBox",value:function(e,l){var _,S,E,k,T,M,R=1/this.direction.x,I=1/this.direction.y,O=1/this.direction.z,D=this.origin;return R>=0?(_=(e.min.x-D.x)*R,S=(e.max.x-D.x)*R):(_=(e.max.x-D.x)*R,S=(e.min.x-D.x)*R),I>=0?(E=(e.min.y-D.y)*I,k=(e.max.y-D.y)*I):(E=(e.max.y-D.y)*I,k=(e.min.y-D.y)*I),_>k||E>S?null:((E>_||isNaN(_))&&(_=E),(k<S||isNaN(S))&&(S=k),O>=0?(T=(e.min.z-D.z)*O,M=(e.max.z-D.z)*O):(T=(e.max.z-D.z)*O,M=(e.min.z-D.z)*O),_>M||T>S?null:((T>_||_!=_)&&(_=T),(M<S||S!=S)&&(S=M),S<0?null:this.at(_>=0?_:S,l)))}},{key:"intersectsBox",value:function(e){return null!==this.intersectBox(e,iv)}},{key:"intersectTriangle",value:function(e,l,_,S,E){uv.subVectors(l,e),lv.subVectors(_,e),cv.crossVectors(uv,lv);var k,T=this.direction.dot(cv);if(T>0){if(S)return null;k=1}else{if(!(T<0))return null;k=-1,T=-T}sv.subVectors(this.origin,e);var M=k*this.direction.dot(lv.crossVectors(sv,lv));if(M<0)return null;var R=k*this.direction.dot(uv.cross(sv));if(R<0)return null;if(M+R>T)return null;var I=-k*sv.dot(cv);return I<0?null:this.at(I/T,E)}},{key:"applyMatrix4",value:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}},{key:"equals",value:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}])}(),dv=function(){function Matrix4(e,l,_,S,E,k,T,M,R,I,O,D,L,U,B,z){_classCallCheck3(this,Matrix4),Matrix4.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==e&&this.set(e,l,_,S,E,k,T,M,R,I,O,D,L,U,B,z)}return _createClass3(Matrix4,[{key:"set",value:function(e,l,_,S,E,k,T,M,R,I,O,D,L,U,B,z){var j=this.elements;return j[0]=e,j[4]=l,j[8]=_,j[12]=S,j[1]=E,j[5]=k,j[9]=T,j[13]=M,j[2]=R,j[6]=I,j[10]=O,j[14]=D,j[3]=L,j[7]=U,j[11]=B,j[15]=z,this}},{key:"identity",value:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}},{key:"clone",value:function(){return(new Matrix4).fromArray(this.elements)}},{key:"copy",value:function(e){var l=this.elements,_=e.elements;return l[0]=_[0],l[1]=_[1],l[2]=_[2],l[3]=_[3],l[4]=_[4],l[5]=_[5],l[6]=_[6],l[7]=_[7],l[8]=_[8],l[9]=_[9],l[10]=_[10],l[11]=_[11],l[12]=_[12],l[13]=_[13],l[14]=_[14],l[15]=_[15],this}},{key:"copyPosition",value:function(e){var l=this.elements,_=e.elements;return l[12]=_[12],l[13]=_[13],l[14]=_[14],this}},{key:"setFromMatrix3",value:function(e){var l=e.elements;return this.set(l[0],l[3],l[6],0,l[1],l[4],l[7],0,l[2],l[5],l[8],0,0,0,0,1),this}},{key:"extractBasis",value:function(e,l,_){return e.setFromMatrixColumn(this,0),l.setFromMatrixColumn(this,1),_.setFromMatrixColumn(this,2),this}},{key:"makeBasis",value:function(e,l,_){return this.set(e.x,l.x,_.x,0,e.y,l.y,_.y,0,e.z,l.z,_.z,0,0,0,0,1),this}},{key:"extractRotation",value:function(e){var l=this.elements,_=e.elements,S=1/fv.setFromMatrixColumn(e,0).length(),E=1/fv.setFromMatrixColumn(e,1).length(),k=1/fv.setFromMatrixColumn(e,2).length();return l[0]=_[0]*S,l[1]=_[1]*S,l[2]=_[2]*S,l[3]=0,l[4]=_[4]*E,l[5]=_[5]*E,l[6]=_[6]*E,l[7]=0,l[8]=_[8]*k,l[9]=_[9]*k,l[10]=_[10]*k,l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,this}},{key:"makeRotationFromEuler",value:function(e){var l=this.elements,_=e.x,S=e.y,E=e.z,k=Math.cos(_),T=Math.sin(_),M=Math.cos(S),R=Math.sin(S),I=Math.cos(E),O=Math.sin(E);if("XYZ"===e.order){var D=k*I,L=k*O,U=T*I,B=T*O;l[0]=M*I,l[4]=-M*O,l[8]=R,l[1]=L+U*R,l[5]=D-B*R,l[9]=-T*M,l[2]=B-D*R,l[6]=U+L*R,l[10]=k*M}else if("YXZ"===e.order){var z=M*I,j=M*O,G=R*I,H=R*O;l[0]=z+H*T,l[4]=G*T-j,l[8]=k*R,l[1]=k*O,l[5]=k*I,l[9]=-T,l[2]=j*T-G,l[6]=H+z*T,l[10]=k*M}else if("ZXY"===e.order){var V=M*I,W=M*O,q=R*I,X=R*O;l[0]=V-X*T,l[4]=-k*O,l[8]=q+W*T,l[1]=W+q*T,l[5]=k*I,l[9]=X-V*T,l[2]=-k*R,l[6]=T,l[10]=k*M}else if("ZYX"===e.order){var K=k*I,Y=k*O,J=T*I,Q=T*O;l[0]=M*I,l[4]=J*R-Y,l[8]=K*R+Q,l[1]=M*O,l[5]=Q*R+K,l[9]=Y*R-J,l[2]=-R,l[6]=T*M,l[10]=k*M}else if("YZX"===e.order){var Z=k*M,$=k*R,ee=T*M,te=T*R;l[0]=M*I,l[4]=te-Z*O,l[8]=ee*O+$,l[1]=O,l[5]=k*I,l[9]=-T*I,l[2]=-R*I,l[6]=$*O+ee,l[10]=Z-te*O}else if("XZY"===e.order){var ne=k*M,re=k*R,ie=T*M,ae=T*R;l[0]=M*I,l[4]=-O,l[8]=R*I,l[1]=ne*O+ae,l[5]=k*I,l[9]=re*O-ie,l[2]=ie*O-re,l[6]=T*I,l[10]=ae*O+ne}return l[3]=0,l[7]=0,l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,this}},{key:"makeRotationFromQuaternion",value:function(e){return this.compose(vv,e,gv)}},{key:"lookAt",value:function(e,l,_){var S=this.elements;return _v.subVectors(e,l),0===_v.lengthSq()&&(_v.z=1),_v.normalize(),mv.crossVectors(_,_v),0===mv.lengthSq()&&(1===Math.abs(_.z)?_v.x+=1e-4:_v.z+=1e-4,_v.normalize(),mv.crossVectors(_,_v)),mv.normalize(),yv.crossVectors(_v,mv),S[0]=mv.x,S[4]=yv.x,S[8]=_v.x,S[1]=mv.y,S[5]=yv.y,S[9]=_v.y,S[2]=mv.z,S[6]=yv.z,S[10]=_v.z,this}},{key:"multiply",value:function(e){return this.multiplyMatrices(this,e)}},{key:"premultiply",value:function(e){return this.multiplyMatrices(e,this)}},{key:"multiplyMatrices",value:function(e,l){var _=e.elements,S=l.elements,E=this.elements,k=_[0],T=_[4],M=_[8],R=_[12],I=_[1],O=_[5],D=_[9],L=_[13],U=_[2],B=_[6],z=_[10],j=_[14],G=_[3],H=_[7],V=_[11],W=_[15],q=S[0],X=S[4],K=S[8],Y=S[12],J=S[1],Q=S[5],Z=S[9],$=S[13],ee=S[2],te=S[6],ne=S[10],re=S[14],ie=S[3],ae=S[7],oe=S[11],se=S[15];return E[0]=k*q+T*J+M*ee+R*ie,E[4]=k*X+T*Q+M*te+R*ae,E[8]=k*K+T*Z+M*ne+R*oe,E[12]=k*Y+T*$+M*re+R*se,E[1]=I*q+O*J+D*ee+L*ie,E[5]=I*X+O*Q+D*te+L*ae,E[9]=I*K+O*Z+D*ne+L*oe,E[13]=I*Y+O*$+D*re+L*se,E[2]=U*q+B*J+z*ee+j*ie,E[6]=U*X+B*Q+z*te+j*ae,E[10]=U*K+B*Z+z*ne+j*oe,E[14]=U*Y+B*$+z*re+j*se,E[3]=G*q+H*J+V*ee+W*ie,E[7]=G*X+H*Q+V*te+W*ae,E[11]=G*K+H*Z+V*ne+W*oe,E[15]=G*Y+H*$+V*re+W*se,this}},{key:"multiplyScalar",value:function(e){var l=this.elements;return l[0]*=e,l[4]*=e,l[8]*=e,l[12]*=e,l[1]*=e,l[5]*=e,l[9]*=e,l[13]*=e,l[2]*=e,l[6]*=e,l[10]*=e,l[14]*=e,l[3]*=e,l[7]*=e,l[11]*=e,l[15]*=e,this}},{key:"determinant",value:function(){var e=this.elements,l=e[0],_=e[4],S=e[8],E=e[12],k=e[1],T=e[5],M=e[9],R=e[13],I=e[2],O=e[6],D=e[10],L=e[14];return e[3]*(+E*M*O-S*R*O-E*T*D+_*R*D+S*T*L-_*M*L)+e[7]*(+l*M*L-l*R*D+E*k*D-S*k*L+S*R*I-E*M*I)+e[11]*(+l*R*O-l*T*L-E*k*O+_*k*L+E*T*I-_*R*I)+e[15]*(-S*T*I-l*M*O+l*T*D+S*k*O-_*k*D+_*M*I)}},{key:"transpose",value:function(){var e,l=this.elements;return e=l[1],l[1]=l[4],l[4]=e,e=l[2],l[2]=l[8],l[8]=e,e=l[6],l[6]=l[9],l[9]=e,e=l[3],l[3]=l[12],l[12]=e,e=l[7],l[7]=l[13],l[13]=e,e=l[11],l[11]=l[14],l[14]=e,this}},{key:"setPosition",value:function(e,l,_){var S=this.elements;return e.isVector3?(S[12]=e.x,S[13]=e.y,S[14]=e.z):(S[12]=e,S[13]=l,S[14]=_),this}},{key:"invert",value:function(){var e=this.elements,l=e[0],_=e[1],S=e[2],E=e[3],k=e[4],T=e[5],M=e[6],R=e[7],I=e[8],O=e[9],D=e[10],L=e[11],U=e[12],B=e[13],z=e[14],j=e[15],G=O*z*R-B*D*R+B*M*L-T*z*L-O*M*j+T*D*j,H=U*D*R-I*z*R-U*M*L+k*z*L+I*M*j-k*D*j,V=I*B*R-U*O*R+U*T*L-k*B*L-I*T*j+k*O*j,W=U*O*M-I*B*M-U*T*D+k*B*D+I*T*z-k*O*z,q=l*G+_*H+S*V+E*W;if(0===q)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);var X=1/q;return e[0]=G*X,e[1]=(B*D*E-O*z*E-B*S*L+_*z*L+O*S*j-_*D*j)*X,e[2]=(T*z*E-B*M*E+B*S*R-_*z*R-T*S*j+_*M*j)*X,e[3]=(O*M*E-T*D*E-O*S*R+_*D*R+T*S*L-_*M*L)*X,e[4]=H*X,e[5]=(I*z*E-U*D*E+U*S*L-l*z*L-I*S*j+l*D*j)*X,e[6]=(U*M*E-k*z*E-U*S*R+l*z*R+k*S*j-l*M*j)*X,e[7]=(k*D*E-I*M*E+I*S*R-l*D*R-k*S*L+l*M*L)*X,e[8]=V*X,e[9]=(U*O*E-I*B*E-U*_*L+l*B*L+I*_*j-l*O*j)*X,e[10]=(k*B*E-U*T*E+U*_*R-l*B*R-k*_*j+l*T*j)*X,e[11]=(I*T*E-k*O*E-I*_*R+l*O*R+k*_*L-l*T*L)*X,e[12]=W*X,e[13]=(I*B*S-U*O*S+U*_*D-l*B*D-I*_*z+l*O*z)*X,e[14]=(U*T*S-k*B*S-U*_*M+l*B*M+k*_*z-l*T*z)*X,e[15]=(k*O*S-I*T*S+I*_*M-l*O*M-k*_*D+l*T*D)*X,this}},{key:"scale",value:function(e){var l=this.elements,_=e.x,S=e.y,E=e.z;return l[0]*=_,l[4]*=S,l[8]*=E,l[1]*=_,l[5]*=S,l[9]*=E,l[2]*=_,l[6]*=S,l[10]*=E,l[3]*=_,l[7]*=S,l[11]*=E,this}},{key:"getMaxScaleOnAxis",value:function(){var e=this.elements,l=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],_=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],S=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(l,_,S))}},{key:"makeTranslation",value:function(e,l,_){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,l,0,0,1,_,0,0,0,1),this}},{key:"makeRotationX",value:function(e){var l=Math.cos(e),_=Math.sin(e);return this.set(1,0,0,0,0,l,-_,0,0,_,l,0,0,0,0,1),this}},{key:"makeRotationY",value:function(e){var l=Math.cos(e),_=Math.sin(e);return this.set(l,0,_,0,0,1,0,0,-_,0,l,0,0,0,0,1),this}},{key:"makeRotationZ",value:function(e){var l=Math.cos(e),_=Math.sin(e);return this.set(l,-_,0,0,_,l,0,0,0,0,1,0,0,0,0,1),this}},{key:"makeRotationAxis",value:function(e,l){var _=Math.cos(l),S=Math.sin(l),E=1-_,k=e.x,T=e.y,M=e.z,R=E*k,I=E*T;return this.set(R*k+_,R*T-S*M,R*M+S*T,0,R*T+S*M,I*T+_,I*M-S*k,0,R*M-S*T,I*M+S*k,E*M*M+_,0,0,0,0,1),this}},{key:"makeScale",value:function(e,l,_){return this.set(e,0,0,0,0,l,0,0,0,0,_,0,0,0,0,1),this}},{key:"makeShear",value:function(e,l,_,S,E,k){return this.set(1,_,E,0,e,1,k,0,l,S,1,0,0,0,0,1),this}},{key:"compose",value:function(e,l,_){var S=this.elements,E=l._x,k=l._y,T=l._z,M=l._w,R=E+E,I=k+k,O=T+T,D=E*R,L=E*I,U=E*O,B=k*I,z=k*O,j=T*O,G=M*R,H=M*I,V=M*O,W=_.x,q=_.y,X=_.z;return S[0]=(1-(B+j))*W,S[1]=(L+V)*W,S[2]=(U-H)*W,S[3]=0,S[4]=(L-V)*q,S[5]=(1-(D+j))*q,S[6]=(z+G)*q,S[7]=0,S[8]=(U+H)*X,S[9]=(z-G)*X,S[10]=(1-(D+B))*X,S[11]=0,S[12]=e.x,S[13]=e.y,S[14]=e.z,S[15]=1,this}},{key:"decompose",value:function(e,l,_){var S=this.elements,E=fv.set(S[0],S[1],S[2]).length(),k=fv.set(S[4],S[5],S[6]).length(),T=fv.set(S[8],S[9],S[10]).length();this.determinant()<0&&(E=-E),e.x=S[12],e.y=S[13],e.z=S[14],pv.copy(this);var M=1/E,R=1/k,I=1/T;return pv.elements[0]*=M,pv.elements[1]*=M,pv.elements[2]*=M,pv.elements[4]*=R,pv.elements[5]*=R,pv.elements[6]*=R,pv.elements[8]*=I,pv.elements[9]*=I,pv.elements[10]*=I,l.setFromRotationMatrix(pv),_.x=E,_.y=k,_.z=T,this}},{key:"makePerspective",value:function(e,l,_,S,E,k){var T,M,R=arguments.length>6&&void 0!==arguments[6]?arguments[6]:hp,I=arguments.length>7&&void 0!==arguments[7]&&arguments[7],O=this.elements,D=2*E/(l-e),L=2*E/(_-S),U=(l+e)/(l-e),B=(_+S)/(_-S);if(I)T=E/(k-E),M=k*E/(k-E);else if(R===hp)T=-(k+E)/(k-E),M=-2*k*E/(k-E);else{if(R!==dp)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+R);T=-k/(k-E),M=-k*E/(k-E)}return O[0]=D,O[4]=0,O[8]=U,O[12]=0,O[1]=0,O[5]=L,O[9]=B,O[13]=0,O[2]=0,O[6]=0,O[10]=T,O[14]=M,O[3]=0,O[7]=0,O[11]=-1,O[15]=0,this}},{key:"makeOrthographic",value:function(e,l,_,S,E,k){var T,M,R=arguments.length>6&&void 0!==arguments[6]?arguments[6]:hp,I=arguments.length>7&&void 0!==arguments[7]&&arguments[7],O=this.elements,D=2/(l-e),L=2/(_-S),U=-(l+e)/(l-e),B=-(_+S)/(_-S);if(I)T=1/(k-E),M=k/(k-E);else if(R===hp)T=-2/(k-E),M=-(k+E)/(k-E);else{if(R!==dp)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+R);T=-1/(k-E),M=-E/(k-E)}return O[0]=D,O[4]=0,O[8]=0,O[12]=U,O[1]=0,O[5]=L,O[9]=0,O[13]=B,O[2]=0,O[6]=0,O[10]=T,O[14]=M,O[3]=0,O[7]=0,O[11]=0,O[15]=1,this}},{key:"equals",value:function(e){for(var l=this.elements,_=e.elements,S=0;S<16;S++)if(l[S]!==_[S])return!1;return!0}},{key:"fromArray",value:function(e){for(var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,_=0;_<16;_++)this.elements[_]=e[_+l];return this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,_=this.elements;return e[l]=_[0],e[l+1]=_[1],e[l+2]=_[2],e[l+3]=_[3],e[l+4]=_[4],e[l+5]=_[5],e[l+6]=_[6],e[l+7]=_[7],e[l+8]=_[8],e[l+9]=_[9],e[l+10]=_[10],e[l+11]=_[11],e[l+12]=_[12],e[l+13]=_[13],e[l+14]=_[14],e[l+15]=_[15],e}}])}(),fv=new _p,pv=new dv,vv=new _p(0,0,0),gv=new _p(1,1,1),mv=new _p,yv=new _p,_v=new _p,bv=new dv,Sv=new yp,wv=function(){return _createClass3(function Euler(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,_=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,S=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Euler.DEFAULT_ORDER;_classCallCheck3(this,Euler),this.isEuler=!0,this._x=e,this._y=l,this._z=_,this._order=S},[{key:"x",get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},{key:"order",get:function(){return this._order},set:function(e){this._order=e,this._onChangeCallback()}},{key:"set",value:function(e,l,_){var S=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._order;return this._x=e,this._y=l,this._z=_,this._order=S,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._order)}},{key:"copy",value:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order,_=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],S=e.elements,E=S[0],k=S[4],T=S[8],M=S[1],R=S[5],I=S[9],O=S[2],D=S[6],L=S[10];switch(l){case"XYZ":this._y=Math.asin(_clamp2(T,-1,1)),Math.abs(T)<.9999999?(this._x=Math.atan2(-I,L),this._z=Math.atan2(-k,E)):(this._x=Math.atan2(D,R),this._z=0);break;case"YXZ":this._x=Math.asin(-_clamp2(I,-1,1)),Math.abs(I)<.9999999?(this._y=Math.atan2(T,L),this._z=Math.atan2(M,R)):(this._y=Math.atan2(-O,E),this._z=0);break;case"ZXY":this._x=Math.asin(_clamp2(D,-1,1)),Math.abs(D)<.9999999?(this._y=Math.atan2(-O,L),this._z=Math.atan2(-k,R)):(this._y=0,this._z=Math.atan2(M,E));break;case"ZYX":this._y=Math.asin(-_clamp2(O,-1,1)),Math.abs(O)<.9999999?(this._x=Math.atan2(D,L),this._z=Math.atan2(M,E)):(this._x=0,this._z=Math.atan2(-k,R));break;case"YZX":this._z=Math.asin(_clamp2(M,-1,1)),Math.abs(M)<.9999999?(this._x=Math.atan2(-I,R),this._y=Math.atan2(-O,E)):(this._x=0,this._y=Math.atan2(T,L));break;case"XZY":this._z=Math.asin(-_clamp2(k,-1,1)),Math.abs(k)<.9999999?(this._x=Math.atan2(D,R),this._y=Math.atan2(T,E)):(this._x=Math.atan2(-I,L),this._y=0)}return this._order=l,!0===_&&this._onChangeCallback(),this}},{key:"setFromQuaternion",value:function(e,l,_){return bv.makeRotationFromQuaternion(e),this.setFromRotationMatrix(bv,l,_)}},{key:"setFromVector3",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order;return this.set(e.x,e.y,e.z,l)}},{key:"reorder",value:function(e){return Sv.setFromEuler(this),this.setFromQuaternion(Sv,e)}},{key:"equals",value:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}},{key:"fromArray",value:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[l]=this._x,e[l+1]=this._y,e[l+2]=this._z,e[l+3]=this._order,e}},{key:"_onChange",value:function(e){return this._onChangeCallback=e,this}},{key:"_onChangeCallback",value:function(){}},{key:Symbol.iterator,value:_regenerator().m(function value(){return _regenerator().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this._x;case 1:return e.n=2,this._y;case 2:return e.n=3,this._z;case 3:return e.n=4,this._order;case 4:return e.a(2)}},value,this)})}])}();wv.DEFAULT_ORDER="XYZ";var xv=function(){return _createClass3(function Layers(){_classCallCheck3(this,Layers),this.mask=1},[{key:"set",value:function(e){this.mask=1<<e>>>0}},{key:"enable",value:function(e){this.mask|=1<<e}},{key:"enableAll",value:function(){this.mask=-1}},{key:"toggle",value:function(e){this.mask^=1<<e}},{key:"disable",value:function(e){this.mask&=~(1<<e)}},{key:"disableAll",value:function(){this.mask=0}},{key:"test",value:function(e){return 0!==(this.mask&e.mask)}},{key:"isEnabled",value:function(e){return!!(this.mask&1<<e)}}])}(),Ev=0,kv=new _p,Av=new yp,Cv=new dv,Tv=new _p,Mv=new _p,Rv=new _p,Iv=new yp,Pv=new _p(1,0,0),Ov=new _p(0,1,0),Dv=new _p(0,0,1),Lv={type:"added"},Uv={type:"removed"},Fv={type:"childadded",child:null},Nv={type:"childremoved",child:null},Bv=function(e){function Object3D(){var e;_classCallCheck3(this,Object3D),(e=_callSuper(this,Object3D)).isObject3D=!0,Object.defineProperty(e,"id",{value:Ev++}),e.uuid=generateUUID(),e.name="",e.type="Object3D",e.parent=null,e.children=[],e.up=Object3D.DEFAULT_UP.clone();var l=new _p,_=new wv,S=new yp,E=new _p(1,1,1);return _._onChange(function(){S.setFromEuler(_,!1)}),S._onChange(function(){_.setFromQuaternion(S,void 0,!1)}),Object.defineProperties(e,{position:{configurable:!0,enumerable:!0,value:l},rotation:{configurable:!0,enumerable:!0,value:_},quaternion:{configurable:!0,enumerable:!0,value:S},scale:{configurable:!0,enumerable:!0,value:E},modelViewMatrix:{value:new dv},normalMatrix:{value:new wp}}),e.matrix=new dv,e.matrixWorld=new dv,e.matrixAutoUpdate=Object3D.DEFAULT_MATRIX_AUTO_UPDATE,e.matrixWorldAutoUpdate=Object3D.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,e.matrixWorldNeedsUpdate=!1,e.layers=new xv,e.visible=!0,e.castShadow=!1,e.receiveShadow=!1,e.frustumCulled=!0,e.renderOrder=0,e.animations=[],e.customDepthMaterial=void 0,e.customDistanceMaterial=void 0,e.userData={},e}return _inherits(Object3D,e),_createClass3(Object3D,[{key:"onBeforeShadow",value:function(){}},{key:"onAfterShadow",value:function(){}},{key:"onBeforeRender",value:function(){}},{key:"onAfterRender",value:function(){}},{key:"applyMatrix4",value:function(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}},{key:"applyQuaternion",value:function(e){return this.quaternion.premultiply(e),this}},{key:"setRotationFromAxisAngle",value:function(e,l){this.quaternion.setFromAxisAngle(e,l)}},{key:"setRotationFromEuler",value:function(e){this.quaternion.setFromEuler(e,!0)}},{key:"setRotationFromMatrix",value:function(e){this.quaternion.setFromRotationMatrix(e)}},{key:"setRotationFromQuaternion",value:function(e){this.quaternion.copy(e)}},{key:"rotateOnAxis",value:function(e,l){return Av.setFromAxisAngle(e,l),this.quaternion.multiply(Av),this}},{key:"rotateOnWorldAxis",value:function(e,l){return Av.setFromAxisAngle(e,l),this.quaternion.premultiply(Av),this}},{key:"rotateX",value:function(e){return this.rotateOnAxis(Pv,e)}},{key:"rotateY",value:function(e){return this.rotateOnAxis(Ov,e)}},{key:"rotateZ",value:function(e){return this.rotateOnAxis(Dv,e)}},{key:"translateOnAxis",value:function(e,l){return kv.copy(e).applyQuaternion(this.quaternion),this.position.add(kv.multiplyScalar(l)),this}},{key:"translateX",value:function(e){return this.translateOnAxis(Pv,e)}},{key:"translateY",value:function(e){return this.translateOnAxis(Ov,e)}},{key:"translateZ",value:function(e){return this.translateOnAxis(Dv,e)}},{key:"localToWorld",value:function(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}},{key:"worldToLocal",value:function(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Cv.copy(this.matrixWorld).invert())}},{key:"lookAt",value:function(e,l,_){e.isVector3?Tv.copy(e):Tv.set(e,l,_);var S=this.parent;this.updateWorldMatrix(!0,!1),Mv.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Cv.lookAt(Mv,Tv,this.up):Cv.lookAt(Tv,Mv,this.up),this.quaternion.setFromRotationMatrix(Cv),S&&(Cv.extractRotation(S.matrixWorld),Av.setFromRotationMatrix(Cv),this.quaternion.premultiply(Av.invert()))}},{key:"add",value:function(e){if(arguments.length>1){for(var l=0;l<arguments.length;l++)this.add(arguments[l]);return this}return e===this||e&&e.isObject3D&&(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(Lv),Fv.child=e,this.dispatchEvent(Fv),Fv.child=null),this}},{key:"remove",value:function(e){if(arguments.length>1){for(var l=0;l<arguments.length;l++)this.remove(arguments[l]);return this}var _=this.children.indexOf(e);return-1!==_&&(e.parent=null,this.children.splice(_,1),e.dispatchEvent(Uv),Nv.child=e,this.dispatchEvent(Nv),Nv.child=null),this}},{key:"removeFromParent",value:function(){var e=this.parent;return null!==e&&e.remove(this),this}},{key:"clear",value:function(){return this.remove.apply(this,_toConsumableArray3(this.children))}},{key:"attach",value:function(e){return this.updateWorldMatrix(!0,!1),Cv.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),Cv.multiply(e.parent.matrixWorld)),e.applyMatrix4(Cv),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(Lv),Fv.child=e,this.dispatchEvent(Fv),Fv.child=null,this}},{key:"getObjectById",value:function(e){return this.getObjectByProperty("id",e)}},{key:"getObjectByName",value:function(e){return this.getObjectByProperty("name",e)}},{key:"getObjectByProperty",value:function(e,l){if(this[e]===l)return this;for(var _=0,S=this.children.length;_<S;_++){var E=this.children[_].getObjectByProperty(e,l);if(void 0!==E)return E}}},{key:"getObjectsByProperty",value:function(e,l){var _=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];this[e]===l&&_.push(this);for(var S=this.children,E=0,k=S.length;E<k;E++)S[E].getObjectsByProperty(e,l,_);return _}},{key:"getWorldPosition",value:function(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}},{key:"getWorldQuaternion",value:function(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Mv,e,Rv),e}},{key:"getWorldScale",value:function(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Mv,Iv,e),e}},{key:"getWorldDirection",value:function(e){this.updateWorldMatrix(!0,!1);var l=this.matrixWorld.elements;return e.set(l[8],l[9],l[10]).normalize()}},{key:"raycast",value:function(){}},{key:"traverse",value:function(e){e(this);for(var l=this.children,_=0,S=l.length;_<S;_++)l[_].traverse(e)}},{key:"traverseVisible",value:function(e){if(!1!==this.visible){e(this);for(var l=this.children,_=0,S=l.length;_<S;_++)l[_].traverseVisible(e)}}},{key:"traverseAncestors",value:function(e){var l=this.parent;null!==l&&(e(l),l.traverseAncestors(e))}},{key:"updateMatrix",value:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}},{key:"updateMatrixWorld",value:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);for(var l=this.children,_=0,S=l.length;_<S;_++){l[_].updateMatrixWorld(e)}}},{key:"updateWorldMatrix",value:function(e,l){var _=this.parent;if(!0===e&&null!==_&&_.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),!0===l)for(var S=this.children,E=0,k=S.length;E<k;E++){S[E].updateWorldMatrix(!1,!0)}}},{key:"toJSON",value:function(e){var l=void 0===e||"string"==typeof e,_={};l&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},_.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});var S={};function serialize(l,_){return void 0===l[_.uuid]&&(l[_.uuid]=_.toJSON(e)),_.uuid}if(S.uuid=this.uuid,S.type=this.type,""!==this.name&&(S.name=this.name),!0===this.castShadow&&(S.castShadow=!0),!0===this.receiveShadow&&(S.receiveShadow=!0),!1===this.visible&&(S.visible=!1),!1===this.frustumCulled&&(S.frustumCulled=!1),0!==this.renderOrder&&(S.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(S.userData=this.userData),S.layers=this.layers.mask,S.matrix=this.matrix.toArray(),S.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(S.matrixAutoUpdate=!1),this.isInstancedMesh&&(S.type="InstancedMesh",S.count=this.count,S.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(S.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(S.type="BatchedMesh",S.perObjectFrustumCulled=this.perObjectFrustumCulled,S.sortObjects=this.sortObjects,S.drawRanges=this._drawRanges,S.reservedRanges=this._reservedRanges,S.geometryInfo=this._geometryInfo.map(function(e){return _objectSpread2(_objectSpread2({},e),{},{boundingBox:e.boundingBox?e.boundingBox.toJSON():void 0,boundingSphere:e.boundingSphere?e.boundingSphere.toJSON():void 0})}),S.instanceInfo=this._instanceInfo.map(function(e){return _objectSpread2({},e)}),S.availableInstanceIds=this._availableInstanceIds.slice(),S.availableGeometryIds=this._availableGeometryIds.slice(),S.nextIndexStart=this._nextIndexStart,S.nextVertexStart=this._nextVertexStart,S.geometryCount=this._geometryCount,S.maxInstanceCount=this._maxInstanceCount,S.maxVertexCount=this._maxVertexCount,S.maxIndexCount=this._maxIndexCount,S.geometryInitialized=this._geometryInitialized,S.matricesTexture=this._matricesTexture.toJSON(e),S.indirectTexture=this._indirectTexture.toJSON(e),null!==this._colorsTexture&&(S.colorsTexture=this._colorsTexture.toJSON(e)),null!==this.boundingSphere&&(S.boundingSphere=this.boundingSphere.toJSON()),null!==this.boundingBox&&(S.boundingBox=this.boundingBox.toJSON())),this.isScene)this.background&&(this.background.isColor?S.background=this.background.toJSON():this.background.isTexture&&(S.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(S.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){S.geometry=serialize(e.geometries,this.geometry);var E=this.geometry.parameters;if(void 0!==E&&void 0!==E.shapes){var k=E.shapes;if(Array.isArray(k))for(var T=0,M=k.length;T<M;T++){var R=k[T];serialize(e.shapes,R)}else serialize(e.shapes,k)}}if(this.isSkinnedMesh&&(S.bindMode=this.bindMode,S.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(serialize(e.skeletons,this.skeleton),S.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){for(var I=[],O=0,D=this.material.length;O<D;O++)I.push(serialize(e.materials,this.material[O]));S.material=I}else S.material=serialize(e.materials,this.material);if(this.children.length>0){S.children=[];for(var L=0;L<this.children.length;L++)S.children.push(this.children[L].toJSON(e).object)}if(this.animations.length>0){S.animations=[];for(var U=0;U<this.animations.length;U++){var B=this.animations[U];S.animations.push(serialize(e.animations,B))}}if(l){var z=extractFromCache(e.geometries),j=extractFromCache(e.materials),G=extractFromCache(e.textures),H=extractFromCache(e.images),V=extractFromCache(e.shapes),W=extractFromCache(e.skeletons),q=extractFromCache(e.animations),X=extractFromCache(e.nodes);z.length>0&&(_.geometries=z),j.length>0&&(_.materials=j),G.length>0&&(_.textures=G),H.length>0&&(_.images=H),V.length>0&&(_.shapes=V),W.length>0&&(_.skeletons=W),q.length>0&&(_.animations=q),X.length>0&&(_.nodes=X)}return _.object=S,_;function extractFromCache(e){var l=[];for(var _ in e){var S=e[_];delete S.metadata,l.push(S)}return l}}},{key:"clone",value:function(e){return(new this.constructor).copy(this,e)}},{key:"copy",value:function(e){var l=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),!0===l)for(var _=0;_<e.children.length;_++){var S=e.children[_];this.add(S.clone())}return this}}])}(fp);Bv.DEFAULT_UP=new _p(0,1,0),Bv.DEFAULT_MATRIX_AUTO_UPDATE=!0,Bv.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;var zv=new _p,jv=new _p,Gv=new _p,Hv=new _p,Vv=new _p,Wv=new _p,qv=new _p,Xv=new _p,Kv=new _p,Yv=new _p,Jv=new Lp,Qv=new Lp,Zv=new Lp,$v=function(){function Triangle(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new _p,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new _p,_=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new _p;_classCallCheck3(this,Triangle),this.a=e,this.b=l,this.c=_}return _createClass3(Triangle,[{key:"set",value:function(e,l,_){return this.a.copy(e),this.b.copy(l),this.c.copy(_),this}},{key:"setFromPointsAndIndices",value:function(e,l,_,S){return this.a.copy(e[l]),this.b.copy(e[_]),this.c.copy(e[S]),this}},{key:"setFromAttributeAndIndices",value:function(e,l,_,S){return this.a.fromBufferAttribute(e,l),this.b.fromBufferAttribute(e,_),this.c.fromBufferAttribute(e,S),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}},{key:"getArea",value:function(){return zv.subVectors(this.c,this.b),jv.subVectors(this.a,this.b),.5*zv.cross(jv).length()}},{key:"getMidpoint",value:function(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}},{key:"getNormal",value:function(e){return Triangle.getNormal(this.a,this.b,this.c,e)}},{key:"getPlane",value:function(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}},{key:"getBarycoord",value:function(e,l){return Triangle.getBarycoord(e,this.a,this.b,this.c,l)}},{key:"getInterpolation",value:function(e,l,_,S,E){return Triangle.getInterpolation(e,this.a,this.b,this.c,l,_,S,E)}},{key:"containsPoint",value:function(e){return Triangle.containsPoint(e,this.a,this.b,this.c)}},{key:"isFrontFacing",value:function(e){return Triangle.isFrontFacing(this.a,this.b,this.c,e)}},{key:"intersectsBox",value:function(e){return e.intersectsTriangle(this)}},{key:"closestPointToPoint",value:function(e,l){var _,S,E=this.a,k=this.b,T=this.c;Vv.subVectors(k,E),Wv.subVectors(T,E),Xv.subVectors(e,E);var M=Vv.dot(Xv),R=Wv.dot(Xv);if(M<=0&&R<=0)return l.copy(E);Kv.subVectors(e,k);var I=Vv.dot(Kv),O=Wv.dot(Kv);if(I>=0&&O<=I)return l.copy(k);var D=M*O-I*R;if(D<=0&&M>=0&&I<=0)return _=M/(M-I),l.copy(E).addScaledVector(Vv,_);Yv.subVectors(e,T);var L=Vv.dot(Yv),U=Wv.dot(Yv);if(U>=0&&L<=U)return l.copy(T);var B=L*R-M*U;if(B<=0&&R>=0&&U<=0)return S=R/(R-U),l.copy(E).addScaledVector(Wv,S);var z=I*U-L*O;if(z<=0&&O-I>=0&&L-U>=0)return qv.subVectors(T,k),S=(O-I)/(O-I+(L-U)),l.copy(k).addScaledVector(qv,S);var j=1/(z+B+D);return _=B*j,S=D*j,l.copy(E).addScaledVector(Vv,_).addScaledVector(Wv,S)}},{key:"equals",value:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}],[{key:"getNormal",value:function(e,l,_,S){S.subVectors(_,l),zv.subVectors(e,l),S.cross(zv);var E=S.lengthSq();return E>0?S.multiplyScalar(1/Math.sqrt(E)):S.set(0,0,0)}},{key:"getBarycoord",value:function(e,l,_,S,E){zv.subVectors(S,l),jv.subVectors(_,l),Gv.subVectors(e,l);var k=zv.dot(zv),T=zv.dot(jv),M=zv.dot(Gv),R=jv.dot(jv),I=jv.dot(Gv),O=k*R-T*T;if(0===O)return E.set(0,0,0),null;var D=1/O,L=(R*M-T*I)*D,U=(k*I-T*M)*D;return E.set(1-L-U,U,L)}},{key:"containsPoint",value:function(e,l,_,S){return null!==this.getBarycoord(e,l,_,S,Hv)&&(Hv.x>=0&&Hv.y>=0&&Hv.x+Hv.y<=1)}},{key:"getInterpolation",value:function(e,l,_,S,E,k,T,M){return null===this.getBarycoord(e,l,_,S,Hv)?(M.x=0,M.y=0,"z"in M&&(M.z=0),"w"in M&&(M.w=0),null):(M.setScalar(0),M.addScaledVector(E,Hv.x),M.addScaledVector(k,Hv.y),M.addScaledVector(T,Hv.z),M)}},{key:"getInterpolatedAttribute",value:function(e,l,_,S,E,k){return Jv.setScalar(0),Qv.setScalar(0),Zv.setScalar(0),Jv.fromBufferAttribute(e,l),Qv.fromBufferAttribute(e,_),Zv.fromBufferAttribute(e,S),k.setScalar(0),k.addScaledVector(Jv,E.x),k.addScaledVector(Qv,E.y),k.addScaledVector(Zv,E.z),k}},{key:"isFrontFacing",value:function(e,l,_,S){return zv.subVectors(_,l),jv.subVectors(e,l),zv.cross(jv).dot(S)<0}}])}(),eg={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},tg={h:0,s:0,l:0},ng={h:0,s:0,l:0};function hue2rgb(e,l,_){return _<0&&(_+=1),_>1&&(_-=1),_<1/6?e+6*(l-e)*_:_<.5?l:_<2/3?e+6*(l-e)*(2/3-_):e}var rg=function(){return _createClass3(function Color(e,l,_){return _classCallCheck3(this,Color),this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,l,_)},[{key:"set",value:function(e,l,_){if(void 0===l&&void 0===_){var S=e;S&&S.isColor?this.copy(S):"number"==typeof S?this.setHex(S):"string"==typeof S&&this.setStyle(S)}else this.setRGB(e,l,_);return this}},{key:"setScalar",value:function(e){return this.r=e,this.g=e,this.b=e,this}},{key:"setHex",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ap;return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,Tp.colorSpaceToWorking(this,l),this}},{key:"setRGB",value:function(e,l,_){var S=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Tp.workingColorSpace;return this.r=e,this.g=l,this.b=_,Tp.colorSpaceToWorking(this,S),this}},{key:"setHSL",value:function(e,l,_){var S,E=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Tp.workingColorSpace;if(e=(e%(S=1)+S)%S,l=_clamp2(l,0,1),_=_clamp2(_,0,1),0===l)this.r=this.g=this.b=_;else{var k=_<=.5?_*(1+l):_+l-_*l,T=2*_-k;this.r=hue2rgb(T,k,e+1/3),this.g=hue2rgb(T,k,e),this.b=hue2rgb(T,k,e-1/3)}return Tp.colorSpaceToWorking(this,E),this}},{key:"setStyle",value:function(e){var l,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ap;function handleAlpha(e){void 0!==e&&parseFloat(e)}if(l=/^(\w+)\(([^\)]*)\)/.exec(e)){var S,E=l[1],k=l[2];switch(E){case"rgb":case"rgba":if(S=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(k))return handleAlpha(S[4]),this.setRGB(Math.min(255,parseInt(S[1],10))/255,Math.min(255,parseInt(S[2],10))/255,Math.min(255,parseInt(S[3],10))/255,_);if(S=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(k))return handleAlpha(S[4]),this.setRGB(Math.min(100,parseInt(S[1],10))/100,Math.min(100,parseInt(S[2],10))/100,Math.min(100,parseInt(S[3],10))/100,_);break;case"hsl":case"hsla":if(S=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(k))return handleAlpha(S[4]),this.setHSL(parseFloat(S[1])/360,parseFloat(S[2])/100,parseFloat(S[3])/100,_)}}else if(l=/^\#([A-Fa-f\d]+)$/.exec(e)){var T=l[1],M=T.length;if(3===M)return this.setRGB(parseInt(T.charAt(0),16)/15,parseInt(T.charAt(1),16)/15,parseInt(T.charAt(2),16)/15,_);if(6===M)return this.setHex(parseInt(T,16),_)}else if(e&&e.length>0)return this.setColorName(e,_);return this}},{key:"setColorName",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ap,_=eg[e.toLowerCase()];return void 0!==_&&this.setHex(_,l),this}},{key:"clone",value:function(){return new this.constructor(this.r,this.g,this.b)}},{key:"copy",value:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}},{key:"copySRGBToLinear",value:function(e){return this.r=SRGBToLinear(e.r),this.g=SRGBToLinear(e.g),this.b=SRGBToLinear(e.b),this}},{key:"copyLinearToSRGB",value:function(e){return this.r=LinearToSRGB(e.r),this.g=LinearToSRGB(e.g),this.b=LinearToSRGB(e.b),this}},{key:"convertSRGBToLinear",value:function(){return this.copySRGBToLinear(this),this}},{key:"convertLinearToSRGB",value:function(){return this.copyLinearToSRGB(this),this}},{key:"getHex",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ap;return Tp.workingToColorSpace(ig.copy(this),e),65536*Math.round(_clamp2(255*ig.r,0,255))+256*Math.round(_clamp2(255*ig.g,0,255))+Math.round(_clamp2(255*ig.b,0,255))}},{key:"getHexString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ap;return("000000"+this.getHex(e).toString(16)).slice(-6)}},{key:"getHSL",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Tp.workingColorSpace;Tp.workingToColorSpace(ig.copy(this),l);var _,S,E=ig.r,k=ig.g,T=ig.b,M=Math.max(E,k,T),R=Math.min(E,k,T),I=(R+M)/2;if(R===M)_=0,S=0;else{var O=M-R;switch(S=I<=.5?O/(M+R):O/(2-M-R),M){case E:_=(k-T)/O+(k<T?6:0);break;case k:_=(T-E)/O+2;break;case T:_=(E-k)/O+4}_/=6}return e.h=_,e.s=S,e.l=I,e}},{key:"getRGB",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Tp.workingColorSpace;return Tp.workingToColorSpace(ig.copy(this),l),e.r=ig.r,e.g=ig.g,e.b=ig.b,e}},{key:"getStyle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ap;Tp.workingToColorSpace(ig.copy(this),e);var l=ig.r,_=ig.g,S=ig.b;return e!==ap?"color(".concat(e," ").concat(l.toFixed(3)," ").concat(_.toFixed(3)," ").concat(S.toFixed(3),")"):"rgb(".concat(Math.round(255*l),",").concat(Math.round(255*_),",").concat(Math.round(255*S),")")}},{key:"offsetHSL",value:function(e,l,_){return this.getHSL(tg),this.setHSL(tg.h+e,tg.s+l,tg.l+_)}},{key:"add",value:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}},{key:"addColors",value:function(e,l){return this.r=e.r+l.r,this.g=e.g+l.g,this.b=e.b+l.b,this}},{key:"addScalar",value:function(e){return this.r+=e,this.g+=e,this.b+=e,this}},{key:"sub",value:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}},{key:"multiply",value:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}},{key:"multiplyScalar",value:function(e){return this.r*=e,this.g*=e,this.b*=e,this}},{key:"lerp",value:function(e,l){return this.r+=(e.r-this.r)*l,this.g+=(e.g-this.g)*l,this.b+=(e.b-this.b)*l,this}},{key:"lerpColors",value:function(e,l,_){return this.r=e.r+(l.r-e.r)*_,this.g=e.g+(l.g-e.g)*_,this.b=e.b+(l.b-e.b)*_,this}},{key:"lerpHSL",value:function(e,l){this.getHSL(tg),e.getHSL(ng);var _=lerp(tg.h,ng.h,l),S=lerp(tg.s,ng.s,l),E=lerp(tg.l,ng.l,l);return this.setHSL(_,S,E),this}},{key:"setFromVector3",value:function(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}},{key:"applyMatrix3",value:function(e){var l=this.r,_=this.g,S=this.b,E=e.elements;return this.r=E[0]*l+E[3]*_+E[6]*S,this.g=E[1]*l+E[4]*_+E[7]*S,this.b=E[2]*l+E[5]*_+E[8]*S,this}},{key:"equals",value:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}},{key:"fromArray",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.r=e[l],this.g=e[l+1],this.b=e[l+2],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[l]=this.r,e[l+1]=this.g,e[l+2]=this.b,e}},{key:"fromBufferAttribute",value:function(e,l){return this.r=e.getX(l),this.g=e.getY(l),this.b=e.getZ(l),this}},{key:"toJSON",value:function(){return this.getHex()}},{key:Symbol.iterator,value:_regenerator().m(function value(){return _regenerator().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.r;case 1:return e.n=2,this.g;case 2:return e.n=3,this.b;case 3:return e.a(2)}},value,this)})}])}();O("bl",rg);var ig=new rg;rg.NAMES=eg;var ag=0,og=function(e){function Material(){var e;return _classCallCheck3(this,Material),(e=_callSuper(this,Material)).isMaterial=!0,Object.defineProperty(e,"id",{value:ag++}),e.uuid=generateUUID(),e.name="",e.type="Material",e.blending=1,e.side=0,e.vertexColors=!1,e.opacity=1,e.transparent=!1,e.alphaHash=!1,e.blendSrc=204,e.blendDst=205,e.blendEquation=Xd,e.blendSrcAlpha=null,e.blendDstAlpha=null,e.blendEquationAlpha=null,e.blendColor=new rg(0,0,0),e.blendAlpha=0,e.depthFunc=3,e.depthTest=!0,e.depthWrite=!0,e.stencilWriteMask=255,e.stencilFunc=519,e.stencilRef=0,e.stencilFuncMask=255,e.stencilFail=lp,e.stencilZFail=lp,e.stencilZPass=lp,e.stencilWrite=!1,e.clippingPlanes=null,e.clipIntersection=!1,e.clipShadows=!1,e.shadowSide=null,e.colorWrite=!0,e.precision=null,e.polygonOffset=!1,e.polygonOffsetFactor=0,e.polygonOffsetUnits=0,e.dithering=!1,e.alphaToCoverage=!1,e.premultipliedAlpha=!1,e.forceSinglePass=!1,e.allowOverride=!0,e.visible=!0,e.toneMapped=!0,e.userData={},e.version=0,e._alphaTest=0,e}return _inherits(Material,e),_createClass3(Material,[{key:"alphaTest",get:function(){return this._alphaTest},set:function(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}},{key:"onBeforeRender",value:function(){}},{key:"onBeforeCompile",value:function(){}},{key:"customProgramCacheKey",value:function(){return this.onBeforeCompile.toString()}},{key:"setValues",value:function(e){if(void 0!==e)for(var l in e){var _=e[l];if(void 0!==_){var S=this[l];void 0!==S&&(S&&S.isColor?S.set(_):S&&S.isVector3&&_&&_.isVector3?S.copy(_):this[l]=_)}}}},{key:"toJSON",value:function(e){var l=void 0===e||"string"==typeof e;l&&(e={textures:{},images:{}});var _={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};function extractFromCache(e){var l=[];for(var _ in e){var S=e[_];delete S.metadata,l.push(S)}return l}if(_.uuid=this.uuid,_.type=this.type,""!==this.name&&(_.name=this.name),this.color&&this.color.isColor&&(_.color=this.color.getHex()),void 0!==this.roughness&&(_.roughness=this.roughness),void 0!==this.metalness&&(_.metalness=this.metalness),void 0!==this.sheen&&(_.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(_.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(_.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(_.emissive=this.emissive.getHex()),void 0!==this.emissiveIntensity&&1!==this.emissiveIntensity&&(_.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(_.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(_.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(_.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(_.shininess=this.shininess),void 0!==this.clearcoat&&(_.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(_.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(_.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(_.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(_.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,_.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.sheenColorMap&&this.sheenColorMap.isTexture&&(_.sheenColorMap=this.sheenColorMap.toJSON(e).uuid),this.sheenRoughnessMap&&this.sheenRoughnessMap.isTexture&&(_.sheenRoughnessMap=this.sheenRoughnessMap.toJSON(e).uuid),void 0!==this.dispersion&&(_.dispersion=this.dispersion),void 0!==this.iridescence&&(_.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(_.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(_.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(_.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(_.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),void 0!==this.anisotropy&&(_.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(_.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(_.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(_.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(_.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(_.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(_.lightMap=this.lightMap.toJSON(e).uuid,_.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(_.aoMap=this.aoMap.toJSON(e).uuid,_.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(_.bumpMap=this.bumpMap.toJSON(e).uuid,_.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(_.normalMap=this.normalMap.toJSON(e).uuid,_.normalMapType=this.normalMapType,_.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(_.displacementMap=this.displacementMap.toJSON(e).uuid,_.displacementScale=this.displacementScale,_.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(_.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(_.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(_.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(_.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(_.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(_.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(_.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(_.combine=this.combine)),void 0!==this.envMapRotation&&(_.envMapRotation=this.envMapRotation.toArray()),void 0!==this.envMapIntensity&&(_.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(_.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(_.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(_.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(_.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(_.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(_.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(_.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(_.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(_.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(_.size=this.size),null!==this.shadowSide&&(_.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(_.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(_.blending=this.blending),0!==this.side&&(_.side=this.side),!0===this.vertexColors&&(_.vertexColors=!0),this.opacity<1&&(_.opacity=this.opacity),!0===this.transparent&&(_.transparent=!0),204!==this.blendSrc&&(_.blendSrc=this.blendSrc),205!==this.blendDst&&(_.blendDst=this.blendDst),this.blendEquation!==Xd&&(_.blendEquation=this.blendEquation),null!==this.blendSrcAlpha&&(_.blendSrcAlpha=this.blendSrcAlpha),null!==this.blendDstAlpha&&(_.blendDstAlpha=this.blendDstAlpha),null!==this.blendEquationAlpha&&(_.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(_.blendColor=this.blendColor.getHex()),0!==this.blendAlpha&&(_.blendAlpha=this.blendAlpha),3!==this.depthFunc&&(_.depthFunc=this.depthFunc),!1===this.depthTest&&(_.depthTest=this.depthTest),!1===this.depthWrite&&(_.depthWrite=this.depthWrite),!1===this.colorWrite&&(_.colorWrite=this.colorWrite),255!==this.stencilWriteMask&&(_.stencilWriteMask=this.stencilWriteMask),519!==this.stencilFunc&&(_.stencilFunc=this.stencilFunc),0!==this.stencilRef&&(_.stencilRef=this.stencilRef),255!==this.stencilFuncMask&&(_.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==lp&&(_.stencilFail=this.stencilFail),this.stencilZFail!==lp&&(_.stencilZFail=this.stencilZFail),this.stencilZPass!==lp&&(_.stencilZPass=this.stencilZPass),!0===this.stencilWrite&&(_.stencilWrite=this.stencilWrite),void 0!==this.rotation&&0!==this.rotation&&(_.rotation=this.rotation),!0===this.polygonOffset&&(_.polygonOffset=!0),0!==this.polygonOffsetFactor&&(_.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(_.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(_.linewidth=this.linewidth),void 0!==this.dashSize&&(_.dashSize=this.dashSize),void 0!==this.gapSize&&(_.gapSize=this.gapSize),void 0!==this.scale&&(_.scale=this.scale),!0===this.dithering&&(_.dithering=!0),this.alphaTest>0&&(_.alphaTest=this.alphaTest),!0===this.alphaHash&&(_.alphaHash=!0),!0===this.alphaToCoverage&&(_.alphaToCoverage=!0),!0===this.premultipliedAlpha&&(_.premultipliedAlpha=!0),!0===this.forceSinglePass&&(_.forceSinglePass=!0),!0===this.wireframe&&(_.wireframe=!0),this.wireframeLinewidth>1&&(_.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(_.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(_.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(_.flatShading=!0),!1===this.visible&&(_.visible=!1),!1===this.toneMapped&&(_.toneMapped=!1),!1===this.fog&&(_.fog=!1),Object.keys(this.userData).length>0&&(_.userData=this.userData),l){var S=extractFromCache(e.textures),E=extractFromCache(e.images);S.length>0&&(_.textures=S),E.length>0&&(_.images=E)}return _}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;var l=e.clippingPlanes,_=null;if(null!==l){var S=l.length;_=new Array(S);for(var E=0;E!==S;++E)_[E]=l[E].clone()}return this.clippingPlanes=_,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}}])}(fp),sg=function(e){function MeshBasicMaterial(e){var l;return _classCallCheck3(this,MeshBasicMaterial),(l=_callSuper(this,MeshBasicMaterial)).isMeshBasicMaterial=!0,l.type="MeshBasicMaterial",l.color=new rg(16777215),l.map=null,l.lightMap=null,l.lightMapIntensity=1,l.aoMap=null,l.aoMapIntensity=1,l.specularMap=null,l.alphaMap=null,l.envMap=null,l.envMapRotation=new wv,l.combine=0,l.reflectivity=1,l.refractionRatio=.98,l.wireframe=!1,l.wireframeLinewidth=1,l.wireframeLinecap="round",l.wireframeLinejoin="round",l.fog=!0,l.setValues(e),l}return _inherits(MeshBasicMaterial,e),_createClass3(MeshBasicMaterial,[{key:"copy",value:function(e){return _superPropGet(MeshBasicMaterial,"copy",this,3)([e]),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}])}(og),ug=new _p,lg=new mp,cg=0,hg=function(){return _createClass3(function BufferAttribute(e,l){var _=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(_classCallCheck3(this,BufferAttribute),Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:cg++}),this.name="",this.array=e,this.itemSize=l,this.count=void 0!==e?e.length/l:0,this.normalized=_,this.usage=35044,this.updateRanges=[],this.gpuType=df,this.version=0},[{key:"onUploadCallback",value:function(){}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"setUsage",value:function(e){return this.usage=e,this}},{key:"addUpdateRange",value:function(e,l){this.updateRanges.push({start:e,count:l})}},{key:"clearUpdateRanges",value:function(){this.updateRanges.length=0}},{key:"copy",value:function(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}},{key:"copyAt",value:function(e,l,_){e*=this.itemSize,_*=l.itemSize;for(var S=0,E=this.itemSize;S<E;S++)this.array[e+S]=l.array[_+S];return this}},{key:"copyArray",value:function(e){return this.array.set(e),this}},{key:"applyMatrix3",value:function(e){if(2===this.itemSize)for(var l=0,_=this.count;l<_;l++)lg.fromBufferAttribute(this,l),lg.applyMatrix3(e),this.setXY(l,lg.x,lg.y);else if(3===this.itemSize)for(var S=0,E=this.count;S<E;S++)ug.fromBufferAttribute(this,S),ug.applyMatrix3(e),this.setXYZ(S,ug.x,ug.y,ug.z);return this}},{key:"applyMatrix4",value:function(e){for(var l=0,_=this.count;l<_;l++)ug.fromBufferAttribute(this,l),ug.applyMatrix4(e),this.setXYZ(l,ug.x,ug.y,ug.z);return this}},{key:"applyNormalMatrix",value:function(e){for(var l=0,_=this.count;l<_;l++)ug.fromBufferAttribute(this,l),ug.applyNormalMatrix(e),this.setXYZ(l,ug.x,ug.y,ug.z);return this}},{key:"transformDirection",value:function(e){for(var l=0,_=this.count;l<_;l++)ug.fromBufferAttribute(this,l),ug.transformDirection(e),this.setXYZ(l,ug.x,ug.y,ug.z);return this}},{key:"set",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,l),this}},{key:"getComponent",value:function(e,l){var _=this.array[e*this.itemSize+l];return this.normalized&&(_=denormalize(_,this.array)),_}},{key:"setComponent",value:function(e,l,_){return this.normalized&&(_=normalize(_,this.array)),this.array[e*this.itemSize+l]=_,this}},{key:"getX",value:function(e){var l=this.array[e*this.itemSize];return this.normalized&&(l=denormalize(l,this.array)),l}},{key:"setX",value:function(e,l){return this.normalized&&(l=normalize(l,this.array)),this.array[e*this.itemSize]=l,this}},{key:"getY",value:function(e){var l=this.array[e*this.itemSize+1];return this.normalized&&(l=denormalize(l,this.array)),l}},{key:"setY",value:function(e,l){return this.normalized&&(l=normalize(l,this.array)),this.array[e*this.itemSize+1]=l,this}},{key:"getZ",value:function(e){var l=this.array[e*this.itemSize+2];return this.normalized&&(l=denormalize(l,this.array)),l}},{key:"setZ",value:function(e,l){return this.normalized&&(l=normalize(l,this.array)),this.array[e*this.itemSize+2]=l,this}},{key:"getW",value:function(e){var l=this.array[e*this.itemSize+3];return this.normalized&&(l=denormalize(l,this.array)),l}},{key:"setW",value:function(e,l){return this.normalized&&(l=normalize(l,this.array)),this.array[e*this.itemSize+3]=l,this}},{key:"setXY",value:function(e,l,_){return e*=this.itemSize,this.normalized&&(l=normalize(l,this.array),_=normalize(_,this.array)),this.array[e+0]=l,this.array[e+1]=_,this}},{key:"setXYZ",value:function(e,l,_,S){return e*=this.itemSize,this.normalized&&(l=normalize(l,this.array),_=normalize(_,this.array),S=normalize(S,this.array)),this.array[e+0]=l,this.array[e+1]=_,this.array[e+2]=S,this}},{key:"setXYZW",value:function(e,l,_,S,E){return e*=this.itemSize,this.normalized&&(l=normalize(l,this.array),_=normalize(_,this.array),S=normalize(S,this.array),E=normalize(E,this.array)),this.array[e+0]=l,this.array[e+1]=_,this.array[e+2]=S,this.array[e+3]=E,this}},{key:"onUpload",value:function(e){return this.onUploadCallback=e,this}},{key:"clone",value:function(){return new this.constructor(this.array,this.itemSize).copy(this)}},{key:"toJSON",value:function(){var e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),35044!==this.usage&&(e.usage=this.usage),e}}])}(),dg=function(e){function Uint16BufferAttribute(e,l,_){return _classCallCheck3(this,Uint16BufferAttribute),_callSuper(this,Uint16BufferAttribute,[new Uint16Array(e),l,_])}return _inherits(Uint16BufferAttribute,e),_createClass3(Uint16BufferAttribute)}(hg),fg=function(e){function Uint32BufferAttribute(e,l,_){return _classCallCheck3(this,Uint32BufferAttribute),_callSuper(this,Uint32BufferAttribute,[new Uint32Array(e),l,_])}return _inherits(Uint32BufferAttribute,e),_createClass3(Uint32BufferAttribute)}(hg),pg=function(e){function Float32BufferAttribute(e,l,_){return _classCallCheck3(this,Float32BufferAttribute),_callSuper(this,Float32BufferAttribute,[new Float32Array(e),l,_])}return _inherits(Float32BufferAttribute,e),_createClass3(Float32BufferAttribute)}(hg),vg=0,gg=new dv,mg=new Bv,yg=new _p,_g=new zp,bg=new zp,Sg=new _p,wg=function(e){function BufferGeometry(){var e;return _classCallCheck3(this,BufferGeometry),(e=_callSuper(this,BufferGeometry)).isBufferGeometry=!0,Object.defineProperty(e,"id",{value:vg++}),e.uuid=generateUUID(),e.name="",e.type="BufferGeometry",e.index=null,e.indirect=null,e.attributes={},e.morphAttributes={},e.morphTargetsRelative=!1,e.groups=[],e.boundingBox=null,e.boundingSphere=null,e.drawRange={start:0,count:1/0},e.userData={},e}return _inherits(BufferGeometry,e),_createClass3(BufferGeometry,[{key:"getIndex",value:function(){return this.index}},{key:"setIndex",value:function(e){return Array.isArray(e)?this.index=new(arrayNeedsUint32(e)?fg:dg)(e,1):this.index=e,this}},{key:"setIndirect",value:function(e){return this.indirect=e,this}},{key:"getIndirect",value:function(){return this.indirect}},{key:"getAttribute",value:function(e){return this.attributes[e]}},{key:"setAttribute",value:function(e,l){return this.attributes[e]=l,this}},{key:"deleteAttribute",value:function(e){return delete this.attributes[e],this}},{key:"hasAttribute",value:function(e){return void 0!==this.attributes[e]}},{key:"addGroup",value:function(e,l){var _=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.groups.push({start:e,count:l,materialIndex:_})}},{key:"clearGroups",value:function(){this.groups=[]}},{key:"setDrawRange",value:function(e,l){this.drawRange.start=e,this.drawRange.count=l}},{key:"applyMatrix4",value:function(e){var l=this.attributes.position;void 0!==l&&(l.applyMatrix4(e),l.needsUpdate=!0);var _=this.attributes.normal;if(void 0!==_){var S=(new wp).getNormalMatrix(e);_.applyNormalMatrix(S),_.needsUpdate=!0}var E=this.attributes.tangent;return void 0!==E&&(E.transformDirection(e),E.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}},{key:"applyQuaternion",value:function(e){return gg.makeRotationFromQuaternion(e),this.applyMatrix4(gg),this}},{key:"rotateX",value:function(e){return gg.makeRotationX(e),this.applyMatrix4(gg),this}},{key:"rotateY",value:function(e){return gg.makeRotationY(e),this.applyMatrix4(gg),this}},{key:"rotateZ",value:function(e){return gg.makeRotationZ(e),this.applyMatrix4(gg),this}},{key:"translate",value:function(e,l,_){return gg.makeTranslation(e,l,_),this.applyMatrix4(gg),this}},{key:"scale",value:function(e,l,_){return gg.makeScale(e,l,_),this.applyMatrix4(gg),this}},{key:"lookAt",value:function(e){return mg.lookAt(e),mg.updateMatrix(),this.applyMatrix4(mg.matrix),this}},{key:"center",value:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(yg).negate(),this.translate(yg.x,yg.y,yg.z),this}},{key:"setFromPoints",value:function(e){var l=this.getAttribute("position");if(void 0===l){for(var _=[],S=0,E=e.length;S<E;S++){var k=e[S];_.push(k.x,k.y,k.z||0)}this.setAttribute("position",new pg(_,3))}else{for(var T=Math.min(e.length,l.count),M=0;M<T;M++){var R=e[M];l.setXYZ(M,R.x,R.y,R.z||0)}e.length,l.count,l.needsUpdate=!0}return this}},{key:"computeBoundingBox",value:function(){null===this.boundingBox&&(this.boundingBox=new zp);var e=this.attributes.position,l=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)this.boundingBox.set(new _p(-1/0,-1/0,-1/0),new _p(1/0,1/0,1/0));else{if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),l)for(var _=0,S=l.length;_<S;_++){var E=l[_];_g.setFromBufferAttribute(E),this.morphTargetsRelative?(Sg.addVectors(this.boundingBox.min,_g.min),this.boundingBox.expandByPoint(Sg),Sg.addVectors(this.boundingBox.max,_g.max),this.boundingBox.expandByPoint(Sg)):(this.boundingBox.expandByPoint(_g.min),this.boundingBox.expandByPoint(_g.max))}}else this.boundingBox.makeEmpty();isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z)}}},{key:"computeBoundingSphere",value:function(){null===this.boundingSphere&&(this.boundingSphere=new rv);var e=this.attributes.position,l=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)this.boundingSphere.set(new _p,1/0);else if(e){var _=this.boundingSphere.center;if(_g.setFromBufferAttribute(e),l)for(var S=0,E=l.length;S<E;S++){var k=l[S];bg.setFromBufferAttribute(k),this.morphTargetsRelative?(Sg.addVectors(_g.min,bg.min),_g.expandByPoint(Sg),Sg.addVectors(_g.max,bg.max),_g.expandByPoint(Sg)):(_g.expandByPoint(bg.min),_g.expandByPoint(bg.max))}_g.getCenter(_);for(var T=0,M=0,R=e.count;M<R;M++)Sg.fromBufferAttribute(e,M),T=Math.max(T,_.distanceToSquared(Sg));if(l)for(var I=0,O=l.length;I<O;I++)for(var D=l[I],L=this.morphTargetsRelative,U=0,B=D.count;U<B;U++)Sg.fromBufferAttribute(D,U),L&&(yg.fromBufferAttribute(e,U),Sg.add(yg)),T=Math.max(T,_.distanceToSquared(Sg));this.boundingSphere.radius=Math.sqrt(T),isNaN(this.boundingSphere.radius)}}},{key:"computeTangents",value:function(){var e=this.index,l=this.attributes;if(null!==e&&void 0!==l.position&&void 0!==l.normal&&void 0!==l.uv){var _=l.position,S=l.normal,E=l.uv;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new hg(new Float32Array(4*_.count),4));for(var k=this.getAttribute("tangent"),T=[],M=[],R=0;R<_.count;R++)T[R]=new _p,M[R]=new _p;var I=new _p,O=new _p,D=new _p,L=new mp,U=new mp,B=new mp,z=new _p,j=new _p,G=this.groups;0===G.length&&(G=[{start:0,count:e.count}]);for(var H=0,V=G.length;H<V;++H)for(var W=G[H],q=W.start,X=q,K=q+W.count;X<K;X+=3)handleTriangle(e.getX(X+0),e.getX(X+1),e.getX(X+2));for(var Y=new _p,J=new _p,Q=new _p,Z=new _p,$=0,ee=G.length;$<ee;++$)for(var te=G[$],ne=te.start,re=ne,ie=ne+te.count;re<ie;re+=3)handleVertex(e.getX(re+0)),handleVertex(e.getX(re+1)),handleVertex(e.getX(re+2))}function handleTriangle(e,l,S){I.fromBufferAttribute(_,e),O.fromBufferAttribute(_,l),D.fromBufferAttribute(_,S),L.fromBufferAttribute(E,e),U.fromBufferAttribute(E,l),B.fromBufferAttribute(E,S),O.sub(I),D.sub(I),U.sub(L),B.sub(L);var k=1/(U.x*B.y-B.x*U.y);isFinite(k)&&(z.copy(O).multiplyScalar(B.y).addScaledVector(D,-U.y).multiplyScalar(k),j.copy(D).multiplyScalar(U.x).addScaledVector(O,-B.x).multiplyScalar(k),T[e].add(z),T[l].add(z),T[S].add(z),M[e].add(j),M[l].add(j),M[S].add(j))}function handleVertex(e){Q.fromBufferAttribute(S,e),Z.copy(Q);var l=T[e];Y.copy(l),Y.sub(Q.multiplyScalar(Q.dot(l))).normalize(),J.crossVectors(Z,l);var _=J.dot(M[e])<0?-1:1;k.setXYZW(e,Y.x,Y.y,Y.z,_)}}},{key:"computeVertexNormals",value:function(){var e=this.index,l=this.getAttribute("position");if(void 0!==l){var _=this.getAttribute("normal");if(void 0===_)_=new hg(new Float32Array(3*l.count),3),this.setAttribute("normal",_);else for(var S=0,E=_.count;S<E;S++)_.setXYZ(S,0,0,0);var k=new _p,T=new _p,M=new _p,R=new _p,I=new _p,O=new _p,D=new _p,L=new _p;if(e)for(var U=0,B=e.count;U<B;U+=3){var z=e.getX(U+0),j=e.getX(U+1),G=e.getX(U+2);k.fromBufferAttribute(l,z),T.fromBufferAttribute(l,j),M.fromBufferAttribute(l,G),D.subVectors(M,T),L.subVectors(k,T),D.cross(L),R.fromBufferAttribute(_,z),I.fromBufferAttribute(_,j),O.fromBufferAttribute(_,G),R.add(D),I.add(D),O.add(D),_.setXYZ(z,R.x,R.y,R.z),_.setXYZ(j,I.x,I.y,I.z),_.setXYZ(G,O.x,O.y,O.z)}else for(var H=0,V=l.count;H<V;H+=3)k.fromBufferAttribute(l,H+0),T.fromBufferAttribute(l,H+1),M.fromBufferAttribute(l,H+2),D.subVectors(M,T),L.subVectors(k,T),D.cross(L),_.setXYZ(H+0,D.x,D.y,D.z),_.setXYZ(H+1,D.x,D.y,D.z),_.setXYZ(H+2,D.x,D.y,D.z);this.normalizeNormals(),_.needsUpdate=!0}}},{key:"normalizeNormals",value:function(){for(var e=this.attributes.normal,l=0,_=e.count;l<_;l++)Sg.fromBufferAttribute(e,l),Sg.normalize(),e.setXYZ(l,Sg.x,Sg.y,Sg.z)}},{key:"toNonIndexed",value:function(){function convertBufferAttribute(e,l){for(var _=e.array,S=e.itemSize,E=e.normalized,k=new _.constructor(l.length*S),T=0,M=0,R=0,I=l.length;R<I;R++){T=e.isInterleavedBufferAttribute?l[R]*e.data.stride+e.offset:l[R]*S;for(var O=0;O<S;O++)k[M++]=_[T++]}return new hg(k,S,E)}if(null===this.index)return this;var e=new BufferGeometry,l=this.index.array,_=this.attributes;for(var S in _){var E=convertBufferAttribute(_[S],l);e.setAttribute(S,E)}var k=this.morphAttributes;for(var T in k){for(var M=[],R=k[T],I=0,O=R.length;I<O;I++){var D=convertBufferAttribute(R[I],l);M.push(D)}e.morphAttributes[T]=M}e.morphTargetsRelative=this.morphTargetsRelative;for(var L=this.groups,U=0,B=L.length;U<B;U++){var z=L[U];e.addGroup(z.start,z.count,z.materialIndex)}return e}},{key:"toJSON",value:function(){var e={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){var l=this.parameters;for(var _ in l)void 0!==l[_]&&(e[_]=l[_]);return e}e.data={attributes:{}};var S=this.index;null!==S&&(e.data.index={type:S.array.constructor.name,array:Array.prototype.slice.call(S.array)});var E=this.attributes;for(var k in E){var T=E[k];e.data.attributes[k]=T.toJSON(e.data)}var M={},R=!1;for(var I in this.morphAttributes){for(var O=this.morphAttributes[I],D=[],L=0,U=O.length;L<U;L++){var B=O[L];D.push(B.toJSON(e.data))}D.length>0&&(M[I]=D,R=!0)}R&&(e.data.morphAttributes=M,e.data.morphTargetsRelative=this.morphTargetsRelative);var z=this.groups;z.length>0&&(e.data.groups=JSON.parse(JSON.stringify(z)));var j=this.boundingSphere;return null!==j&&(e.data.boundingSphere=j.toJSON()),e}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;var l={};this.name=e.name;var _=e.index;null!==_&&this.setIndex(_.clone());var S=e.attributes;for(var E in S){var k=S[E];this.setAttribute(E,k.clone(l))}var T=e.morphAttributes;for(var M in T){for(var R=[],I=T[M],O=0,D=I.length;O<D;O++)R.push(I[O].clone(l));this.morphAttributes[M]=R}this.morphTargetsRelative=e.morphTargetsRelative;for(var L=e.groups,U=0,B=L.length;U<B;U++){var z=L[U];this.addGroup(z.start,z.count,z.materialIndex)}var j=e.boundingBox;null!==j&&(this.boundingBox=j.clone());var G=e.boundingSphere;return null!==G&&(this.boundingSphere=G.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}])}(fp),xg=new dv,Eg=new hv,kg=new rv,Ag=new _p,Cg=new _p,Tg=new _p,Mg=new _p,Rg=new _p,Ig=new _p,Pg=new _p,Og=new _p,Dg=function(e){function Mesh(){var e,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new wg,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new sg;return _classCallCheck3(this,Mesh),(e=_callSuper(this,Mesh)).isMesh=!0,e.type="Mesh",e.geometry=l,e.material=_,e.morphTargetDictionary=void 0,e.morphTargetInfluences=void 0,e.count=1,e.updateMorphTargets(),e}return _inherits(Mesh,e),_createClass3(Mesh,[{key:"copy",value:function(e,l){return _superPropGet(Mesh,"copy",this,3)([e,l]),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}},{key:"updateMorphTargets",value:function(){var e=this.geometry.morphAttributes,l=Object.keys(e);if(l.length>0){var _=e[l[0]];if(void 0!==_){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var S=0,E=_.length;S<E;S++){var k=_[S].name||String(S);this.morphTargetInfluences.push(0),this.morphTargetDictionary[k]=S}}}}},{key:"getVertexPosition",value:function(e,l){var _=this.geometry,S=_.attributes.position,E=_.morphAttributes.position,k=_.morphTargetsRelative;l.fromBufferAttribute(S,e);var T=this.morphTargetInfluences;if(E&&T){Ig.set(0,0,0);for(var M=0,R=E.length;M<R;M++){var I=T[M],O=E[M];0!==I&&(Rg.fromBufferAttribute(O,e),k?Ig.addScaledVector(Rg,I):Ig.addScaledVector(Rg.sub(l),I))}l.add(Ig)}return l}},{key:"raycast",value:function(e,l){var _=this.geometry,S=this.material,E=this.matrixWorld;if(void 0!==S){if(null===_.boundingSphere&&_.computeBoundingSphere(),kg.copy(_.boundingSphere),kg.applyMatrix4(E),Eg.copy(e.ray).recast(e.near),!1===kg.containsPoint(Eg.origin)){if(null===Eg.intersectSphere(kg,Ag))return;if(Eg.origin.distanceToSquared(Ag)>Math.pow(e.far-e.near,2))return}xg.copy(E).invert(),Eg.copy(e.ray).applyMatrix4(xg),null!==_.boundingBox&&!1===Eg.intersectsBox(_.boundingBox)||this._computeIntersections(e,l,Eg)}}},{key:"_computeIntersections",value:function(e,l,_){var S,E=this.geometry,k=this.material,T=E.index,M=E.attributes.position,R=E.attributes.uv,I=E.attributes.uv1,O=E.attributes.normal,D=E.groups,L=E.drawRange;if(null!==T)if(Array.isArray(k))for(var U=0,B=D.length;U<B;U++)for(var z=D[U],j=k[z.materialIndex],G=Math.max(z.start,L.start),H=Math.min(T.count,Math.min(z.start+z.count,L.start+L.count));G<H;G+=3){(S=checkGeometryIntersection(this,j,e,_,R,I,O,T.getX(G),T.getX(G+1),T.getX(G+2)))&&(S.faceIndex=Math.floor(G/3),S.face.materialIndex=z.materialIndex,l.push(S))}else for(var V=Math.max(0,L.start),W=Math.min(T.count,L.start+L.count);V<W;V+=3){(S=checkGeometryIntersection(this,k,e,_,R,I,O,T.getX(V),T.getX(V+1),T.getX(V+2)))&&(S.faceIndex=Math.floor(V/3),l.push(S))}else if(void 0!==M)if(Array.isArray(k))for(var q=0,X=D.length;q<X;q++)for(var K=D[q],Y=k[K.materialIndex],J=Math.max(K.start,L.start),Q=Math.min(M.count,Math.min(K.start+K.count,L.start+L.count));J<Q;J+=3){(S=checkGeometryIntersection(this,Y,e,_,R,I,O,J,J+1,J+2))&&(S.faceIndex=Math.floor(J/3),S.face.materialIndex=K.materialIndex,l.push(S))}else for(var Z=Math.max(0,L.start),$=Math.min(M.count,L.start+L.count);Z<$;Z+=3){(S=checkGeometryIntersection(this,k,e,_,R,I,O,Z,Z+1,Z+2))&&(S.faceIndex=Math.floor(Z/3),l.push(S))}}}])}(Bv);function checkGeometryIntersection(e,l,_,S,E,k,T,M,R,I){e.getVertexPosition(M,Cg),e.getVertexPosition(R,Tg),e.getVertexPosition(I,Mg);var O=function(e,l,_,S,E,k,T,M){if(null===(1===l.side?S.intersectTriangle(T,k,E,!0,M):S.intersectTriangle(E,k,T,0===l.side,M)))return null;Og.copy(M),Og.applyMatrix4(e.matrixWorld);var R=_.ray.origin.distanceTo(Og);return R<_.near||R>_.far?null:{distance:R,point:Og.clone(),object:e}}(e,l,_,S,Cg,Tg,Mg,Pg);if(O){var D=new _p;$v.getBarycoord(Pg,Cg,Tg,Mg,D),E&&(O.uv=$v.getInterpolatedAttribute(E,M,R,I,D,new mp)),k&&(O.uv1=$v.getInterpolatedAttribute(k,M,R,I,D,new mp)),T&&(O.normal=$v.getInterpolatedAttribute(T,M,R,I,D,new _p),O.normal.dot(S.direction)>0&&O.normal.multiplyScalar(-1));var L={a:M,b:R,c:I,normal:new _p,materialIndex:0};$v.getNormal(Cg,Tg,Mg,L.normal),O.face=L,O.barycoord=D}return O}O("bp",Dg);var Lg=function(e){function BoxGeometry(){var e,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,E=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,k=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,T=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;_classCallCheck3(this,BoxGeometry),(e=_callSuper(this,BoxGeometry)).type="BoxGeometry",e.parameters={width:l,height:_,depth:S,widthSegments:E,heightSegments:k,depthSegments:T};var M=e;E=Math.floor(E),k=Math.floor(k),T=Math.floor(T);var R=[],I=[],O=[],D=[],L=0,U=0;function buildPlane(e,l,_,S,E,k,T,B,z,j,G){for(var H=k/z,V=T/j,W=k/2,q=T/2,X=B/2,K=z+1,Y=j+1,J=0,Q=0,Z=new _p,$=0;$<Y;$++)for(var ee=$*V-q,te=0;te<K;te++){var ne=te*H-W;Z[e]=ne*S,Z[l]=ee*E,Z[_]=X,I.push(Z.x,Z.y,Z.z),Z[e]=0,Z[l]=0,Z[_]=B>0?1:-1,O.push(Z.x,Z.y,Z.z),D.push(te/z),D.push(1-$/j),J+=1}for(var re=0;re<j;re++)for(var ie=0;ie<z;ie++){var ae=L+ie+K*re,oe=L+ie+K*(re+1),se=L+(ie+1)+K*(re+1),ue=L+(ie+1)+K*re;R.push(ae,oe,ue),R.push(oe,se,ue),Q+=6}M.addGroup(U,Q,G),U+=Q,L+=J}return buildPlane("z","y","x",-1,-1,S,_,l,T,k,0),buildPlane("z","y","x",1,-1,S,_,-l,T,k,1),buildPlane("x","z","y",1,1,l,S,_,E,T,2),buildPlane("x","z","y",1,-1,l,S,-_,E,T,3),buildPlane("x","y","z",1,-1,l,_,S,E,k,4),buildPlane("x","y","z",-1,-1,l,_,-S,E,k,5),e.setIndex(R),e.setAttribute("position",new pg(I,3)),e.setAttribute("normal",new pg(O,3)),e.setAttribute("uv",new pg(D,2)),e}return _inherits(BoxGeometry,e),_createClass3(BoxGeometry,[{key:"copy",value:function(e){return _superPropGet(BoxGeometry,"copy",this,3)([e]),this.parameters=Object.assign({},e.parameters),this}}],[{key:"fromJSON",value:function(e){return new BoxGeometry(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}])}(wg);function cloneUniforms(e){var l={};for(var _ in e)for(var S in l[_]={},e[_]){var E=e[_][S];E&&(E.isColor||E.isMatrix3||E.isMatrix4||E.isVector2||E.isVector3||E.isVector4||E.isTexture||E.isQuaternion)?E.isRenderTargetTexture?l[_][S]=null:l[_][S]=E.clone():Array.isArray(E)?l[_][S]=E.slice():l[_][S]=E}return l}function mergeUniforms(e){for(var l={},_=0;_<e.length;_++){var S=cloneUniforms(e[_]);for(var E in S)l[E]=S[E]}return l}function getUnlitUniformColorSpace(e){var l=e.getRenderTarget();return null===l?e.outputColorSpace:!0===l.isXRRenderTarget?l.texture.colorSpace:Tp.workingColorSpace}var Ug={clone:cloneUniforms,merge:mergeUniforms},Fg=function(e){function ShaderMaterial(e){var l;return _classCallCheck3(this,ShaderMaterial),(l=_callSuper(this,ShaderMaterial)).isShaderMaterial=!0,l.type="ShaderMaterial",l.defines={},l.uniforms={},l.uniformsGroups=[],l.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",l.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",l.linewidth=1,l.wireframe=!1,l.wireframeLinewidth=1,l.fog=!1,l.lights=!1,l.clipping=!1,l.forceSinglePass=!0,l.extensions={clipCullDistance:!1,multiDraw:!1},l.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},l.index0AttributeName=void 0,l.uniformsNeedUpdate=!1,l.glslVersion=null,void 0!==e&&l.setValues(e),l}return _inherits(ShaderMaterial,e),_createClass3(ShaderMaterial,[{key:"copy",value:function(e){return _superPropGet(ShaderMaterial,"copy",this,3)([e]),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=cloneUniforms(e.uniforms),this.uniformsGroups=function(e){for(var l=[],_=0;_<e.length;_++)l.push(e[_].clone());return l}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}},{key:"toJSON",value:function(e){var l=_superPropGet(ShaderMaterial,"toJSON",this,3)([e]);for(var _ in l.glslVersion=this.glslVersion,l.uniforms={},this.uniforms){var S=this.uniforms[_].value;S&&S.isTexture?l.uniforms[_]={type:"t",value:S.toJSON(e).uuid}:S&&S.isColor?l.uniforms[_]={type:"c",value:S.getHex()}:S&&S.isVector2?l.uniforms[_]={type:"v2",value:S.toArray()}:S&&S.isVector3?l.uniforms[_]={type:"v3",value:S.toArray()}:S&&S.isVector4?l.uniforms[_]={type:"v4",value:S.toArray()}:S&&S.isMatrix3?l.uniforms[_]={type:"m3",value:S.toArray()}:S&&S.isMatrix4?l.uniforms[_]={type:"m4",value:S.toArray()}:l.uniforms[_]={value:S}}Object.keys(this.defines).length>0&&(l.defines=this.defines),l.vertexShader=this.vertexShader,l.fragmentShader=this.fragmentShader,l.lights=this.lights,l.clipping=this.clipping;var E={};for(var k in this.extensions)!0===this.extensions[k]&&(E[k]=!0);return Object.keys(E).length>0&&(l.extensions=E),l}}])}(og);O("bm",Fg);var Ng=function(e){function Camera(){var e;return _classCallCheck3(this,Camera),(e=_callSuper(this,Camera)).isCamera=!0,e.type="Camera",e.matrixWorldInverse=new dv,e.projectionMatrix=new dv,e.projectionMatrixInverse=new dv,e.coordinateSystem=hp,e._reversedDepth=!1,e}return _inherits(Camera,e),_createClass3(Camera,[{key:"reversedDepth",get:function(){return this._reversedDepth}},{key:"copy",value:function(e,l){return _superPropGet(Camera,"copy",this,3)([e,l]),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}},{key:"getWorldDirection",value:function(e){return _superPropGet(Camera,"getWorldDirection",this,3)([e]).negate()}},{key:"updateMatrixWorld",value:function(e){_superPropGet(Camera,"updateMatrixWorld",this,3)([e]),this.matrixWorldInverse.copy(this.matrixWorld).invert()}},{key:"updateWorldMatrix",value:function(e,l){_superPropGet(Camera,"updateWorldMatrix",this,3)([e,l]),this.matrixWorldInverse.copy(this.matrixWorld).invert()}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}])}(Bv),Bg=new _p,zg=new mp,jg=new mp,Gg=function(e){function PerspectiveCamera(){var e,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,E=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2e3;return _classCallCheck3(this,PerspectiveCamera),(e=_callSuper(this,PerspectiveCamera)).isPerspectiveCamera=!0,e.type="PerspectiveCamera",e.fov=l,e.zoom=1,e.near=S,e.far=E,e.focus=10,e.aspect=_,e.view=null,e.filmGauge=35,e.filmOffset=0,e.updateProjectionMatrix(),e}return _inherits(PerspectiveCamera,e),_createClass3(PerspectiveCamera,[{key:"copy",value:function(e,l){return _superPropGet(PerspectiveCamera,"copy",this,3)([e,l]),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}},{key:"setFocalLength",value:function(e){var l=.5*this.getFilmHeight()/e;this.fov=2*gp*Math.atan(l),this.updateProjectionMatrix()}},{key:"getFocalLength",value:function(){var e=Math.tan(.5*vp*this.fov);return.5*this.getFilmHeight()/e}},{key:"getEffectiveFOV",value:function(){return 2*gp*Math.atan(Math.tan(.5*vp*this.fov)/this.zoom)}},{key:"getFilmWidth",value:function(){return this.filmGauge*Math.min(this.aspect,1)}},{key:"getFilmHeight",value:function(){return this.filmGauge/Math.max(this.aspect,1)}},{key:"getViewBounds",value:function(e,l,_){Bg.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),l.set(Bg.x,Bg.y).multiplyScalar(-e/Bg.z),Bg.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),_.set(Bg.x,Bg.y).multiplyScalar(-e/Bg.z)}},{key:"getViewSize",value:function(e,l){return this.getViewBounds(e,zg,jg),l.subVectors(jg,zg)}},{key:"setViewOffset",value:function(e,l,_,S,E,k){this.aspect=e/l,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=l,this.view.offsetX=_,this.view.offsetY=S,this.view.width=E,this.view.height=k,this.updateProjectionMatrix()}},{key:"clearViewOffset",value:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}},{key:"updateProjectionMatrix",value:function(){var e=this.near,l=e*Math.tan(.5*vp*this.fov)/this.zoom,_=2*l,S=this.aspect*_,E=-.5*S,k=this.view;if(null!==this.view&&this.view.enabled){var T=k.fullWidth,M=k.fullHeight;E+=k.offsetX*S/T,l-=k.offsetY*_/M,S*=k.width/T,_*=k.height/M}var R=this.filmOffset;0!==R&&(E+=e*R/this.getFilmWidth()),this.projectionMatrix.makePerspective(E,E+S,l,l-_,e,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}},{key:"toJSON",value:function(e){var l=_superPropGet(PerspectiveCamera,"toJSON",this,3)([e]);return l.object.fov=this.fov,l.object.zoom=this.zoom,l.object.near=this.near,l.object.far=this.far,l.object.focus=this.focus,l.object.aspect=this.aspect,null!==this.view&&(l.object.view=Object.assign({},this.view)),l.object.filmGauge=this.filmGauge,l.object.filmOffset=this.filmOffset,l}}])}(Ng);O("b9",Gg);var Hg=-90,Vg=function(e){function CubeCamera(e,l,_){var S;_classCallCheck3(this,CubeCamera),(S=_callSuper(this,CubeCamera)).type="CubeCamera",S.renderTarget=_,S.coordinateSystem=null,S.activeMipmapLevel=0;var E=new Gg(Hg,1,e,l);E.layers=S.layers,S.add(E);var k=new Gg(Hg,1,e,l);k.layers=S.layers,S.add(k);var T=new Gg(Hg,1,e,l);T.layers=S.layers,S.add(T);var M=new Gg(Hg,1,e,l);M.layers=S.layers,S.add(M);var R=new Gg(Hg,1,e,l);R.layers=S.layers,S.add(R);var I=new Gg(Hg,1,e,l);return I.layers=S.layers,S.add(I),S}return _inherits(CubeCamera,e),_createClass3(CubeCamera,[{key:"updateCoordinateSystem",value:function(){var e,l=this.coordinateSystem,_=this.children.concat(),S=_slicedToArray(_,6),E=S[0],k=S[1],T=S[2],M=S[3],R=S[4],I=S[5],O=_createForOfIteratorHelper2(_);try{for(O.s();!(e=O.n()).done;){var D=e.value;this.remove(D)}}catch(z){O.e(z)}finally{O.f()}if(l===hp)E.up.set(0,1,0),E.lookAt(1,0,0),k.up.set(0,1,0),k.lookAt(-1,0,0),T.up.set(0,0,-1),T.lookAt(0,1,0),M.up.set(0,0,1),M.lookAt(0,-1,0),R.up.set(0,1,0),R.lookAt(0,0,1),I.up.set(0,1,0),I.lookAt(0,0,-1);else{if(l!==dp)throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+l);E.up.set(0,-1,0),E.lookAt(-1,0,0),k.up.set(0,-1,0),k.lookAt(1,0,0),T.up.set(0,0,1),T.lookAt(0,1,0),M.up.set(0,0,-1),M.lookAt(0,-1,0),R.up.set(0,-1,0),R.lookAt(0,0,1),I.up.set(0,-1,0),I.lookAt(0,0,-1)}var L,U=_createForOfIteratorHelper2(_);try{for(U.s();!(L=U.n()).done;){var B=L.value;this.add(B),B.updateMatrixWorld()}}catch(z){U.e(z)}finally{U.f()}}},{key:"update",value:function(e,l){null===this.parent&&this.updateMatrixWorld();var _=this.renderTarget,S=this.activeMipmapLevel;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());var E=_slicedToArray(this.children,6),k=E[0],T=E[1],M=E[2],R=E[3],I=E[4],O=E[5],D=e.getRenderTarget(),L=e.getActiveCubeFace(),U=e.getActiveMipmapLevel(),B=e.xr.enabled;e.xr.enabled=!1;var z=_.texture.generateMipmaps;_.texture.generateMipmaps=!1,e.setRenderTarget(_,0,S),e.render(l,k),e.setRenderTarget(_,1,S),e.render(l,T),e.setRenderTarget(_,2,S),e.render(l,M),e.setRenderTarget(_,3,S),e.render(l,R),e.setRenderTarget(_,4,S),e.render(l,I),_.texture.generateMipmaps=z,e.setRenderTarget(_,5,S),e.render(l,O),e.setRenderTarget(D,L,U),e.xr.enabled=B,_.texture.needsPMREMUpdate=!0}}])}(Bv),Wg=function(e){function CubeTexture(){var e,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Kd,S=arguments.length>2?arguments[2]:void 0,E=arguments.length>3?arguments[3]:void 0,k=arguments.length>4?arguments[4]:void 0,T=arguments.length>5?arguments[5]:void 0,M=arguments.length>6?arguments[6]:void 0,R=arguments.length>7?arguments[7]:void 0,I=arguments.length>8?arguments[8]:void 0,O=arguments.length>9?arguments[9]:void 0;return _classCallCheck3(this,CubeTexture),(e=_callSuper(this,CubeTexture,[l,_,S,E,k,T,M,R,I,O])).isCubeTexture=!0,e.flipY=!1,e}return _inherits(CubeTexture,e),_createClass3(CubeTexture,[{key:"images",get:function(){return this.image},set:function(e){this.image=e}}])}(Dp),qg=function(e){function WebGLCubeRenderTarget(){var e,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck3(this,WebGLCubeRenderTarget),(e=_callSuper(this,WebGLCubeRenderTarget,[l,l,_])).isWebGLCubeRenderTarget=!0;var S={width:l,height:l,depth:1},E=[S,S,S,S,S,S];return e.texture=new Wg(E),e._setTextureOptions(_),e.texture.isRenderTargetTexture=!0,e}return _inherits(WebGLCubeRenderTarget,e),_createClass3(WebGLCubeRenderTarget,[{key:"fromEquirectangularTexture",value:function(e,l){this.texture.type=l.type,this.texture.colorSpace=l.colorSpace,this.texture.generateMipmaps=l.generateMipmaps,this.texture.minFilter=l.minFilter,this.texture.magFilter=l.magFilter;var _={tEquirect:{value:null}},S="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",E="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",k=new Lg(5,5,5),T=new Fg({name:"CubemapFromEquirect",uniforms:cloneUniforms(_),vertexShader:S,fragmentShader:E,side:1,blending:0});T.uniforms.tEquirect.value=l;var M=new Dg(k,T),R=l.minFilter;return l.minFilter===af&&(l.minFilter=nf),new Vg(1,10,this).update(e,M),l.minFilter=R,M.geometry.dispose(),M.material.dispose(),this}},{key:"clear",value:function(e){for(var l=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],_=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],S=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],E=e.getRenderTarget(),k=0;k<6;k++)e.setRenderTarget(this,k),e.clear(l,_,S);e.setRenderTarget(E)}}])}(Fp),Xg=function(e){function Group(){var e;return _classCallCheck3(this,Group),(e=_callSuper(this,Group)).isGroup=!0,e.type="Group",e}return _inherits(Group,e),_createClass3(Group)}(Bv),Kg={type:"move"},Yg=function(){return _createClass3(function WebXRController(){_classCallCheck3(this,WebXRController),this._targetRay=null,this._grip=null,this._hand=null},[{key:"getHandSpace",value:function(){return null===this._hand&&(this._hand=new Xg,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}},{key:"getTargetRaySpace",value:function(){return null===this._targetRay&&(this._targetRay=new Xg,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new _p,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new _p),this._targetRay}},{key:"getGripSpace",value:function(){return null===this._grip&&(this._grip=new Xg,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new _p,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new _p),this._grip}},{key:"dispatchEvent",value:function(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}},{key:"connect",value:function(e){if(e&&e.hand){var l=this._hand;if(l){var _,S=_createForOfIteratorHelper2(e.hand.values());try{for(S.s();!(_=S.n()).done;){var E=_.value;this._getHandJoint(l,E)}}catch(k){S.e(k)}finally{S.f()}}}return this.dispatchEvent({type:"connected",data:e}),this}},{key:"disconnect",value:function(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}},{key:"update",value:function(e,l,_){var S=null,E=null,k=null,T=this._targetRay,M=this._grip,R=this._hand;if(e&&"visible-blurred"!==l.session.visibilityState){if(R&&e.hand){k=!0;var I,O=_createForOfIteratorHelper2(e.hand.values());try{for(O.s();!(I=O.n()).done;){var D=I.value,L=l.getJointPose(D,_),U=this._getHandJoint(R,D);null!==L&&(U.matrix.fromArray(L.transform.matrix),U.matrix.decompose(U.position,U.rotation,U.scale),U.matrixWorldNeedsUpdate=!0,U.jointRadius=L.radius),U.visible=null!==L}}catch(G){O.e(G)}finally{O.f()}var B=R.joints["index-finger-tip"],z=R.joints["thumb-tip"],j=B.position.distanceTo(z.position);R.inputState.pinching&&j>.025?(R.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!R.inputState.pinching&&j<=.015&&(R.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==M&&e.gripSpace&&null!==(E=l.getPose(e.gripSpace,_))&&(M.matrix.fromArray(E.transform.matrix),M.matrix.decompose(M.position,M.rotation,M.scale),M.matrixWorldNeedsUpdate=!0,E.linearVelocity?(M.hasLinearVelocity=!0,M.linearVelocity.copy(E.linearVelocity)):M.hasLinearVelocity=!1,E.angularVelocity?(M.hasAngularVelocity=!0,M.angularVelocity.copy(E.angularVelocity)):M.hasAngularVelocity=!1);null!==T&&(null===(S=l.getPose(e.targetRaySpace,_))&&null!==E&&(S=E),null!==S&&(T.matrix.fromArray(S.transform.matrix),T.matrix.decompose(T.position,T.rotation,T.scale),T.matrixWorldNeedsUpdate=!0,S.linearVelocity?(T.hasLinearVelocity=!0,T.linearVelocity.copy(S.linearVelocity)):T.hasLinearVelocity=!1,S.angularVelocity?(T.hasAngularVelocity=!0,T.angularVelocity.copy(S.angularVelocity)):T.hasAngularVelocity=!1,this.dispatchEvent(Kg)))}return null!==T&&(T.visible=null!==S),null!==M&&(M.visible=null!==E),null!==R&&(R.visible=null!==k),this}},{key:"_getHandJoint",value:function(e,l){if(void 0===e.joints[l.jointName]){var _=new Xg;_.matrixAutoUpdate=!1,_.visible=!1,e.joints[l.jointName]=_,e.add(_)}return e.joints[l.jointName]}}])}(),Jg=function(){function Fog(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,_=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;_classCallCheck3(this,Fog),this.isFog=!0,this.name="",this.color=new rg(e),this.near=l,this.far=_}return _createClass3(Fog,[{key:"clone",value:function(){return new Fog(this.color,this.near,this.far)}},{key:"toJSON",value:function(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}])}();O("bb",Jg);var Qg=function(e){function Scene(){var e;return _classCallCheck3(this,Scene),(e=_callSuper(this,Scene)).isScene=!0,e.type="Scene",e.background=null,e.environment=null,e.fog=null,e.backgroundBlurriness=0,e.backgroundIntensity=1,e.backgroundRotation=new wv,e.environmentIntensity=1,e.environmentRotation=new wv,e.overrideMaterial=null,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:e})),e}return _inherits(Scene,e),_createClass3(Scene,[{key:"copy",value:function(e,l){return _superPropGet(Scene,"copy",this,3)([e,l]),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}},{key:"toJSON",value:function(e){var l=_superPropGet(Scene,"toJSON",this,3)([e]);return null!==this.fog&&(l.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(l.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(l.object.backgroundIntensity=this.backgroundIntensity),l.object.backgroundRotation=this.backgroundRotation.toArray(),1!==this.environmentIntensity&&(l.object.environmentIntensity=this.environmentIntensity),l.object.environmentRotation=this.environmentRotation.toArray(),l}}])}(Bv);O("ba",Qg);var Zg=function(e){function InstancedBufferAttribute(e,l,_){var S,E=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return _classCallCheck3(this,InstancedBufferAttribute),(S=_callSuper(this,InstancedBufferAttribute,[e,l,_])).isInstancedBufferAttribute=!0,S.meshPerAttribute=E,S}return _inherits(InstancedBufferAttribute,e),_createClass3(InstancedBufferAttribute,[{key:"copy",value:function(e){return _superPropGet(InstancedBufferAttribute,"copy",this,3)([e]),this.meshPerAttribute=e.meshPerAttribute,this}},{key:"toJSON",value:function(){var e=_superPropGet(InstancedBufferAttribute,"toJSON",this,3)([]);return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}])}(hg);O("bt",Zg);var $g=new _p,em=new _p,tm=new wp,nm=function(){return _createClass3(function Plane(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new _p(1,0,0),l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;_classCallCheck3(this,Plane),this.isPlane=!0,this.normal=e,this.constant=l},[{key:"set",value:function(e,l){return this.normal.copy(e),this.constant=l,this}},{key:"setComponents",value:function(e,l,_,S){return this.normal.set(e,l,_),this.constant=S,this}},{key:"setFromNormalAndCoplanarPoint",value:function(e,l){return this.normal.copy(e),this.constant=-l.dot(this.normal),this}},{key:"setFromCoplanarPoints",value:function(e,l,_){var S=$g.subVectors(_,l).cross(em.subVectors(e,l)).normalize();return this.setFromNormalAndCoplanarPoint(S,e),this}},{key:"copy",value:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this}},{key:"normalize",value:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}},{key:"negate",value:function(){return this.constant*=-1,this.normal.negate(),this}},{key:"distanceToPoint",value:function(e){return this.normal.dot(e)+this.constant}},{key:"distanceToSphere",value:function(e){return this.distanceToPoint(e.center)-e.radius}},{key:"projectPoint",value:function(e,l){return l.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}},{key:"intersectLine",value:function(e,l){var _=e.delta($g),S=this.normal.dot(_);if(0===S)return 0===this.distanceToPoint(e.start)?l.copy(e.start):null;var E=-(e.start.dot(this.normal)+this.constant)/S;return E<0||E>1?null:l.copy(e.start).addScaledVector(_,E)}},{key:"intersectsLine",value:function(e){var l=this.distanceToPoint(e.start),_=this.distanceToPoint(e.end);return l<0&&_>0||_<0&&l>0}},{key:"intersectsBox",value:function(e){return e.intersectsPlane(this)}},{key:"intersectsSphere",value:function(e){return e.intersectsPlane(this)}},{key:"coplanarPoint",value:function(e){return e.copy(this.normal).multiplyScalar(-this.constant)}},{key:"applyMatrix4",value:function(e,l){var _=l||tm.getNormalMatrix(e),S=this.coplanarPoint($g).applyMatrix4(e),E=this.normal.applyMatrix3(_).normalize();return this.constant=-S.dot(E),this}},{key:"translate",value:function(e){return this.constant-=e.dot(this.normal),this}},{key:"equals",value:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}])}(),rm=new rv,im=new mp(.5,.5),am=new _p,om=function(){return _createClass3(function Frustum(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new nm,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new nm,_=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new nm,S=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new nm,E=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new nm,k=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new nm;_classCallCheck3(this,Frustum),this.planes=[e,l,_,S,E,k]},[{key:"set",value:function(e,l,_,S,E,k){var T=this.planes;return T[0].copy(e),T[1].copy(l),T[2].copy(_),T[3].copy(S),T[4].copy(E),T[5].copy(k),this}},{key:"copy",value:function(e){for(var l=this.planes,_=0;_<6;_++)l[_].copy(e.planes[_]);return this}},{key:"setFromProjectionMatrix",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:hp,_=arguments.length>2&&void 0!==arguments[2]&&arguments[2],S=this.planes,E=e.elements,k=E[0],T=E[1],M=E[2],R=E[3],I=E[4],O=E[5],D=E[6],L=E[7],U=E[8],B=E[9],z=E[10],j=E[11],G=E[12],H=E[13],V=E[14],W=E[15];if(S[0].setComponents(R-k,L-I,j-U,W-G).normalize(),S[1].setComponents(R+k,L+I,j+U,W+G).normalize(),S[2].setComponents(R+T,L+O,j+B,W+H).normalize(),S[3].setComponents(R-T,L-O,j-B,W-H).normalize(),_)S[4].setComponents(M,D,z,V).normalize(),S[5].setComponents(R-M,L-D,j-z,W-V).normalize();else if(S[4].setComponents(R-M,L-D,j-z,W-V).normalize(),l===hp)S[5].setComponents(R+M,L+D,j+z,W+V).normalize();else{if(l!==dp)throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+l);S[5].setComponents(M,D,z,V).normalize()}return this}},{key:"intersectsObject",value:function(e){if(void 0!==e.boundingSphere)null===e.boundingSphere&&e.computeBoundingSphere(),rm.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{var l=e.geometry;null===l.boundingSphere&&l.computeBoundingSphere(),rm.copy(l.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(rm)}},{key:"intersectsSprite",value:function(e){rm.center.set(0,0,0);var l=im.distanceTo(e.center);return rm.radius=.7071067811865476+l,rm.applyMatrix4(e.matrixWorld),this.intersectsSphere(rm)}},{key:"intersectsSphere",value:function(e){for(var l=this.planes,_=e.center,S=-e.radius,E=0;E<6;E++){if(l[E].distanceToPoint(_)<S)return!1}return!0}},{key:"intersectsBox",value:function(e){for(var l=this.planes,_=0;_<6;_++){var S=l[_];if(am.x=S.normal.x>0?e.max.x:e.min.x,am.y=S.normal.y>0?e.max.y:e.min.y,am.z=S.normal.z>0?e.max.z:e.min.z,S.distanceToPoint(am)<0)return!1}return!0}},{key:"containsPoint",value:function(e){for(var l=this.planes,_=0;_<6;_++)if(l[_].distanceToPoint(e)<0)return!1;return!0}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}])}(),sm=function(e){function DepthTexture(e,l){var _,S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:hf,E=arguments.length>3?arguments[3]:void 0,k=arguments.length>4?arguments[4]:void 0,T=arguments.length>5?arguments[5]:void 0,M=arguments.length>6&&void 0!==arguments[6]?arguments[6]:ef,R=arguments.length>7&&void 0!==arguments[7]?arguments[7]:ef,I=arguments.length>8?arguments[8]:void 0,O=arguments.length>9&&void 0!==arguments[9]?arguments[9]:bf,D=arguments.length>10&&void 0!==arguments[10]?arguments[10]:1;if(_classCallCheck3(this,DepthTexture),O!==bf&&O!==Sf)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");return(_=_callSuper(this,DepthTexture,[{width:e,height:l,depth:D},E,k,T,M,R,O,S,I])).isDepthTexture=!0,_.flipY=!1,_.generateMipmaps=!1,_.compareFunction=null,_}return _inherits(DepthTexture,e),_createClass3(DepthTexture,[{key:"copy",value:function(e){return _superPropGet(DepthTexture,"copy",this,3)([e]),this.source=new Ip(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}},{key:"toJSON",value:function(e){var l=_superPropGet(DepthTexture,"toJSON",this,3)([e]);return null!==this.compareFunction&&(l.compareFunction=this.compareFunction),l}}])}(Dp),um=function(e){function ExternalTexture(){var e,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return _classCallCheck3(this,ExternalTexture),(e=_callSuper(this,ExternalTexture)).sourceTexture=l,e.isExternalTexture=!0,e}return _inherits(ExternalTexture,e),_createClass3(ExternalTexture,[{key:"copy",value:function(e){return _superPropGet(ExternalTexture,"copy",this,3)([e]),this.sourceTexture=e.sourceTexture,this}}])}(Dp),lm=function(){return _createClass3(function Curve(){_classCallCheck3(this,Curve),this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null},[{key:"getPoint",value:function(){}},{key:"getPointAt",value:function(e,l){var _=this.getUtoTmapping(e);return this.getPoint(_,l)}},{key:"getPoints",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,l=[],_=0;_<=e;_++)l.push(this.getPoint(_/e));return l}},{key:"getSpacedPoints",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,l=[],_=0;_<=e;_++)l.push(this.getPointAt(_/e));return l}},{key:"getLength",value:function(){var e=this.getLengths();return e[e.length-1]}},{key:"getLengths",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.arcLengthDivisions;if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var l,_=[],S=this.getPoint(0),E=0;_.push(0);for(var k=1;k<=e;k++)E+=(l=this.getPoint(k/e)).distanceTo(S),_.push(E),S=l;return this.cacheArcLengths=_,_}},{key:"updateArcLengths",value:function(){this.needsUpdate=!0,this.getLengths()}},{key:"getUtoTmapping",value:function(e){var l,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,S=this.getLengths(),E=0,k=S.length;l=_||e*S[k-1];for(var T,M=0,R=k-1;M<=R;)if((T=S[E=Math.floor(M+(R-M)/2)]-l)<0)M=E+1;else{if(!(T>0)){R=E;break}R=E-1}if(S[E=R]===l)return E/(k-1);var I=S[E];return(E+(l-I)/(S[E+1]-I))/(k-1)}},{key:"getTangent",value:function(e,l){var _=1e-4,S=e-_,E=e+_;S<0&&(S=0),E>1&&(E=1);var k=this.getPoint(S),T=this.getPoint(E),M=l||(k.isVector2?new mp:new _p);return M.copy(T).sub(k).normalize(),M}},{key:"getTangentAt",value:function(e,l){var _=this.getUtoTmapping(e);return this.getTangent(_,l)}},{key:"computeFrenetFrames",value:function(e){for(var l=arguments.length>1&&void 0!==arguments[1]&&arguments[1],_=new _p,S=[],E=[],k=[],T=new _p,M=new dv,R=0;R<=e;R++){var I=R/e;S[R]=this.getTangentAt(I,new _p)}E[0]=new _p,k[0]=new _p;var O=Number.MAX_VALUE,D=Math.abs(S[0].x),L=Math.abs(S[0].y),U=Math.abs(S[0].z);D<=O&&(O=D,_.set(1,0,0)),L<=O&&(O=L,_.set(0,1,0)),U<=O&&_.set(0,0,1),T.crossVectors(S[0],_).normalize(),E[0].crossVectors(S[0],T),k[0].crossVectors(S[0],E[0]);for(var B=1;B<=e;B++){if(E[B]=E[B-1].clone(),k[B]=k[B-1].clone(),T.crossVectors(S[B-1],S[B]),T.length()>Number.EPSILON){T.normalize();var z=Math.acos(_clamp2(S[B-1].dot(S[B]),-1,1));E[B].applyMatrix4(M.makeRotationAxis(T,z))}k[B].crossVectors(S[B],E[B])}if(!0===l){var j=Math.acos(_clamp2(E[0].dot(E[e]),-1,1));j/=e,S[0].dot(T.crossVectors(E[0],E[e]))>0&&(j=-j);for(var G=1;G<=e;G++)E[G].applyMatrix4(M.makeRotationAxis(S[G],j*G)),k[G].crossVectors(S[G],E[G])}return{tangents:S,normals:E,binormals:k}}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}},{key:"toJSON",value:function(){var e={metadata:{version:4.7,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}},{key:"fromJSON",value:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}])}(),cm=function(e){function EllipseCurve(){var e,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,E=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,k=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,T=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI,M=arguments.length>6&&void 0!==arguments[6]&&arguments[6],R=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0;return _classCallCheck3(this,EllipseCurve),(e=_callSuper(this,EllipseCurve)).isEllipseCurve=!0,e.type="EllipseCurve",e.aX=l,e.aY=_,e.xRadius=S,e.yRadius=E,e.aStartAngle=k,e.aEndAngle=T,e.aClockwise=M,e.aRotation=R,e}return _inherits(EllipseCurve,e),_createClass3(EllipseCurve,[{key:"getPoint",value:function(e){for(var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new mp,_=2*Math.PI,S=this.aEndAngle-this.aStartAngle,E=Math.abs(S)<Number.EPSILON;S<0;)S+=_;for(;S>_;)S-=_;S<Number.EPSILON&&(S=E?0:_),!0!==this.aClockwise||E||(S===_?S=-_:S-=_);var k=this.aStartAngle+e*S,T=this.aX+this.xRadius*Math.cos(k),M=this.aY+this.yRadius*Math.sin(k);if(0!==this.aRotation){var R=Math.cos(this.aRotation),I=Math.sin(this.aRotation),O=T-this.aX,D=M-this.aY;T=O*R-D*I+this.aX,M=O*I+D*R+this.aY}return l.set(T,M)}},{key:"copy",value:function(e){return _superPropGet(EllipseCurve,"copy",this,3)([e]),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}},{key:"toJSON",value:function(){var e=_superPropGet(EllipseCurve,"toJSON",this,3)([]);return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}},{key:"fromJSON",value:function(e){return _superPropGet(EllipseCurve,"fromJSON",this,3)([e]),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}])}(lm),hm=function(e){function ArcCurve(e,l,_,S,E,k){var T;return _classCallCheck3(this,ArcCurve),(T=_callSuper(this,ArcCurve,[e,l,_,_,S,E,k])).isArcCurve=!0,T.type="ArcCurve",T}return _inherits(ArcCurve,e),_createClass3(ArcCurve)}(cm);function CubicPoly(){var e=0,l=0,_=0,S=0;function init(E,k,T,M){e=E,l=T,_=-3*E+3*k-2*T-M,S=2*E-2*k+T+M}return{initCatmullRom:function(e,l,_,S,E){init(l,_,E*(_-e),E*(S-l))},initNonuniformCatmullRom:function(e,l,_,S,E,k,T){var M=(l-e)/E-(_-e)/(E+k)+(_-l)/k,R=(_-l)/k-(S-l)/(k+T)+(S-_)/T;init(l,_,M*=k,R*=k)},calc:function(E){var k=E*E;return e+l*E+_*k+S*(k*E)}}}var dm=new _p,fm=new CubicPoly,pm=new CubicPoly,vm=new CubicPoly,gm=function(e){function CatmullRomCurve3(){var e,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],_=arguments.length>1&&void 0!==arguments[1]&&arguments[1],S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"centripetal",E=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;return _classCallCheck3(this,CatmullRomCurve3),(e=_callSuper(this,CatmullRomCurve3)).isCatmullRomCurve3=!0,e.type="CatmullRomCurve3",e.points=l,e.closed=_,e.curveType=S,e.tension=E,e}return _inherits(CatmullRomCurve3,e),_createClass3(CatmullRomCurve3,[{key:"getPoint",value:function(e){var l,_,S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new _p,E=this.points,k=E.length,T=(k-(this.closed?0:1))*e,M=Math.floor(T),R=T-M;this.closed?M+=M>0?0:(Math.floor(Math.abs(M)/k)+1)*k:0===R&&M===k-1&&(M=k-2,R=1),this.closed||M>0?l=E[(M-1)%k]:(dm.subVectors(E[0],E[1]).add(E[0]),l=dm);var I=E[M%k],O=E[(M+1)%k];if(this.closed||M+2<k?_=E[(M+2)%k]:(dm.subVectors(E[k-1],E[k-2]).add(E[k-1]),_=dm),"centripetal"===this.curveType||"chordal"===this.curveType){var D="chordal"===this.curveType?.5:.25,L=Math.pow(l.distanceToSquared(I),D),U=Math.pow(I.distanceToSquared(O),D),B=Math.pow(O.distanceToSquared(_),D);U<1e-4&&(U=1),L<1e-4&&(L=U),B<1e-4&&(B=U),fm.initNonuniformCatmullRom(l.x,I.x,O.x,_.x,L,U,B),pm.initNonuniformCatmullRom(l.y,I.y,O.y,_.y,L,U,B),vm.initNonuniformCatmullRom(l.z,I.z,O.z,_.z,L,U,B)}else"catmullrom"===this.curveType&&(fm.initCatmullRom(l.x,I.x,O.x,_.x,this.tension),pm.initCatmullRom(l.y,I.y,O.y,_.y,this.tension),vm.initCatmullRom(l.z,I.z,O.z,_.z,this.tension));return S.set(fm.calc(R),pm.calc(R),vm.calc(R)),S}},{key:"copy",value:function(e){_superPropGet(CatmullRomCurve3,"copy",this,3)([e]),this.points=[];for(var l=0,_=e.points.length;l<_;l++){var S=e.points[l];this.points.push(S.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}},{key:"toJSON",value:function(){var e=_superPropGet(CatmullRomCurve3,"toJSON",this,3)([]);e.points=[];for(var l=0,_=this.points.length;l<_;l++){var S=this.points[l];e.points.push(S.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}},{key:"fromJSON",value:function(e){_superPropGet(CatmullRomCurve3,"fromJSON",this,3)([e]),this.points=[];for(var l=0,_=e.points.length;l<_;l++){var S=e.points[l];this.points.push((new _p).fromArray(S))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}])}(lm);function CatmullRom(e,l,_,S,E){var k=.5*(S-l),T=.5*(E-_),M=e*e;return(2*_-2*S+k+T)*(e*M)+(-3*_+3*S-2*k-T)*M+k*e+_}function QuadraticBezier(e,l,_,S){return function(e,l){var _=1-e;return _*_*l}(e,l)+function(e,l){return 2*(1-e)*e*l}(e,_)+function(e,l){return e*e*l}(e,S)}function CubicBezier(e,l,_,S,E){return function(e,l){var _=1-e;return _*_*_*l}(e,l)+function(e,l){var _=1-e;return 3*_*_*e*l}(e,_)+function(e,l){return 3*(1-e)*e*e*l}(e,S)+function(e,l){return e*e*e*l}(e,E)}var mm=function(e){function CubicBezierCurve(){var e,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new mp,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new mp,S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new mp,E=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new mp;return _classCallCheck3(this,CubicBezierCurve),(e=_callSuper(this,CubicBezierCurve)).isCubicBezierCurve=!0,e.type="CubicBezierCurve",e.v0=l,e.v1=_,e.v2=S,e.v3=E,e}return _inherits(CubicBezierCurve,e),_createClass3(CubicBezierCurve,[{key:"getPoint",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new mp,_=this.v0,S=this.v1,E=this.v2,k=this.v3;return l.set(CubicBezier(e,_.x,S.x,E.x,k.x),CubicBezier(e,_.y,S.y,E.y,k.y)),l}},{key:"copy",value:function(e){return _superPropGet(CubicBezierCurve,"copy",this,3)([e]),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}},{key:"toJSON",value:function(){var e=_superPropGet(CubicBezierCurve,"toJSON",this,3)([]);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}},{key:"fromJSON",value:function(e){return _superPropGet(CubicBezierCurve,"fromJSON",this,3)([e]),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}])}(lm),ym=function(e){function CubicBezierCurve3(){var e,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new _p,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new _p,S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new _p,E=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new _p;return _classCallCheck3(this,CubicBezierCurve3),(e=_callSuper(this,CubicBezierCurve3)).isCubicBezierCurve3=!0,e.type="CubicBezierCurve3",e.v0=l,e.v1=_,e.v2=S,e.v3=E,e}return _inherits(CubicBezierCurve3,e),_createClass3(CubicBezierCurve3,[{key:"getPoint",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new _p,_=this.v0,S=this.v1,E=this.v2,k=this.v3;return l.set(CubicBezier(e,_.x,S.x,E.x,k.x),CubicBezier(e,_.y,S.y,E.y,k.y),CubicBezier(e,_.z,S.z,E.z,k.z)),l}},{key:"copy",value:function(e){return _superPropGet(CubicBezierCurve3,"copy",this,3)([e]),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}},{key:"toJSON",value:function(){var e=_superPropGet(CubicBezierCurve3,"toJSON",this,3)([]);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}},{key:"fromJSON",value:function(e){return _superPropGet(CubicBezierCurve3,"fromJSON",this,3)([e]),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}])}(lm),_m=function(e){function LineCurve(){var e,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new mp,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new mp;return _classCallCheck3(this,LineCurve),(e=_callSuper(this,LineCurve)).isLineCurve=!0,e.type="LineCurve",e.v1=l,e.v2=_,e}return _inherits(LineCurve,e),_createClass3(LineCurve,[{key:"getPoint",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new mp;return 1===e?l.copy(this.v2):(l.copy(this.v2).sub(this.v1),l.multiplyScalar(e).add(this.v1)),l}},{key:"getPointAt",value:function(e,l){return this.getPoint(e,l)}},{key:"getTangent",value:function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:new mp).subVectors(this.v2,this.v1).normalize()}},{key:"getTangentAt",value:function(e,l){return this.getTangent(e,l)}},{key:"copy",value:function(e){return _superPropGet(LineCurve,"copy",this,3)([e]),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=_superPropGet(LineCurve,"toJSON",this,3)([]);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return _superPropGet(LineCurve,"fromJSON",this,3)([e]),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}])}(lm),bm=function(e){function LineCurve3(){var e,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new _p,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new _p;return _classCallCheck3(this,LineCurve3),(e=_callSuper(this,LineCurve3)).isLineCurve3=!0,e.type="LineCurve3",e.v1=l,e.v2=_,e}return _inherits(LineCurve3,e),_createClass3(LineCurve3,[{key:"getPoint",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new _p;return 1===e?l.copy(this.v2):(l.copy(this.v2).sub(this.v1),l.multiplyScalar(e).add(this.v1)),l}},{key:"getPointAt",value:function(e,l){return this.getPoint(e,l)}},{key:"getTangent",value:function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:new _p).subVectors(this.v2,this.v1).normalize()}},{key:"getTangentAt",value:function(e,l){return this.getTangent(e,l)}},{key:"copy",value:function(e){return _superPropGet(LineCurve3,"copy",this,3)([e]),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=_superPropGet(LineCurve3,"toJSON",this,3)([]);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return _superPropGet(LineCurve3,"fromJSON",this,3)([e]),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}])}(lm);O("bq",bm);var Sm=function(e){function QuadraticBezierCurve(){var e,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new mp,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new mp,S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new mp;return _classCallCheck3(this,QuadraticBezierCurve),(e=_callSuper(this,QuadraticBezierCurve)).isQuadraticBezierCurve=!0,e.type="QuadraticBezierCurve",e.v0=l,e.v1=_,e.v2=S,e}return _inherits(QuadraticBezierCurve,e),_createClass3(QuadraticBezierCurve,[{key:"getPoint",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new mp,_=this.v0,S=this.v1,E=this.v2;return l.set(QuadraticBezier(e,_.x,S.x,E.x),QuadraticBezier(e,_.y,S.y,E.y)),l}},{key:"copy",value:function(e){return _superPropGet(QuadraticBezierCurve,"copy",this,3)([e]),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=_superPropGet(QuadraticBezierCurve,"toJSON",this,3)([]);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return _superPropGet(QuadraticBezierCurve,"fromJSON",this,3)([e]),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}])}(lm),wm=function(e){function QuadraticBezierCurve3(){var e,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new _p,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new _p,S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new _p;return _classCallCheck3(this,QuadraticBezierCurve3),(e=_callSuper(this,QuadraticBezierCurve3)).isQuadraticBezierCurve3=!0,e.type="QuadraticBezierCurve3",e.v0=l,e.v1=_,e.v2=S,e}return _inherits(QuadraticBezierCurve3,e),_createClass3(QuadraticBezierCurve3,[{key:"getPoint",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new _p,_=this.v0,S=this.v1,E=this.v2;return l.set(QuadraticBezier(e,_.x,S.x,E.x),QuadraticBezier(e,_.y,S.y,E.y),QuadraticBezier(e,_.z,S.z,E.z)),l}},{key:"copy",value:function(e){return _superPropGet(QuadraticBezierCurve3,"copy",this,3)([e]),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=_superPropGet(QuadraticBezierCurve3,"toJSON",this,3)([]);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return _superPropGet(QuadraticBezierCurve3,"fromJSON",this,3)([e]),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}])}(lm),xm=function(e){function SplineCurve(){var e,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return _classCallCheck3(this,SplineCurve),(e=_callSuper(this,SplineCurve)).isSplineCurve=!0,e.type="SplineCurve",e.points=l,e}return _inherits(SplineCurve,e),_createClass3(SplineCurve,[{key:"getPoint",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new mp,_=this.points,S=(_.length-1)*e,E=Math.floor(S),k=S-E,T=_[0===E?E:E-1],M=_[E],R=_[E>_.length-2?_.length-1:E+1],I=_[E>_.length-3?_.length-1:E+2];return l.set(CatmullRom(k,T.x,M.x,R.x,I.x),CatmullRom(k,T.y,M.y,R.y,I.y)),l}},{key:"copy",value:function(e){_superPropGet(SplineCurve,"copy",this,3)([e]),this.points=[];for(var l=0,_=e.points.length;l<_;l++){var S=e.points[l];this.points.push(S.clone())}return this}},{key:"toJSON",value:function(){var e=_superPropGet(SplineCurve,"toJSON",this,3)([]);e.points=[];for(var l=0,_=this.points.length;l<_;l++){var S=this.points[l];e.points.push(S.toArray())}return e}},{key:"fromJSON",value:function(e){_superPropGet(SplineCurve,"fromJSON",this,3)([e]),this.points=[];for(var l=0,_=e.points.length;l<_;l++){var S=e.points[l];this.points.push((new mp).fromArray(S))}return this}}])}(lm),Em=Object.freeze({__proto__:null,ArcCurve:hm,CatmullRomCurve3:gm,CubicBezierCurve:mm,CubicBezierCurve3:ym,EllipseCurve:cm,LineCurve:_m,LineCurve3:bm,QuadraticBezierCurve:Sm,QuadraticBezierCurve3:wm,SplineCurve:xm}),km=function(e){function PlaneGeometry(){var e,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,E=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;_classCallCheck3(this,PlaneGeometry),(e=_callSuper(this,PlaneGeometry)).type="PlaneGeometry",e.parameters={width:l,height:_,widthSegments:S,heightSegments:E};for(var k=l/2,T=_/2,M=Math.floor(S),R=Math.floor(E),I=M+1,O=R+1,D=l/M,L=_/R,U=[],B=[],z=[],j=[],G=0;G<O;G++)for(var H=G*L-T,V=0;V<I;V++){var W=V*D-k;B.push(W,-H,0),z.push(0,0,1),j.push(V/M),j.push(1-G/R)}for(var q=0;q<R;q++)for(var X=0;X<M;X++){var K=X+I*q,Y=X+I*(q+1),J=X+1+I*(q+1),Q=X+1+I*q;U.push(K,Y,Q),U.push(Y,J,Q)}return e.setIndex(U),e.setAttribute("position",new pg(B,3)),e.setAttribute("normal",new pg(z,3)),e.setAttribute("uv",new pg(j,2)),e}return _inherits(PlaneGeometry,e),_createClass3(PlaneGeometry,[{key:"copy",value:function(e){return _superPropGet(PlaneGeometry,"copy",this,3)([e]),this.parameters=Object.assign({},e.parameters),this}}],[{key:"fromJSON",value:function(e){return new PlaneGeometry(e.width,e.height,e.widthSegments,e.heightSegments)}}])}(wg);O("bk",km);var Am=function(e){function TubeGeometry(){var e,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new wm(new _p(-1,-1,0),new _p(-1,1,0),new _p(1,1,0)),_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:64,S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,E=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,k=arguments.length>4&&void 0!==arguments[4]&&arguments[4];_classCallCheck3(this,TubeGeometry),(e=_callSuper(this,TubeGeometry)).type="TubeGeometry",e.parameters={path:l,tubularSegments:_,radius:S,radialSegments:E,closed:k};var T=l.computeFrenetFrames(_,k);e.tangents=T.tangents,e.normals=T.normals,e.binormals=T.binormals;var M=new _p,R=new _p,I=new mp,O=new _p,D=[],L=[],U=[],B=[];function generateSegment(e){O=l.getPointAt(e/_,O);for(var k=T.normals[e],I=T.binormals[e],U=0;U<=E;U++){var B=U/E*Math.PI*2,z=Math.sin(B),j=-Math.cos(B);R.x=j*k.x+z*I.x,R.y=j*k.y+z*I.y,R.z=j*k.z+z*I.z,R.normalize(),L.push(R.x,R.y,R.z),M.x=O.x+S*R.x,M.y=O.y+S*R.y,M.z=O.z+S*R.z,D.push(M.x,M.y,M.z)}}return function(){for(var e=0;e<_;e++)generateSegment(e);generateSegment(!1===k?_:0),function(){for(var e=0;e<=_;e++)for(var l=0;l<=E;l++)I.x=e/_,I.y=l/E,U.push(I.x,I.y)}(),function(){for(var e=1;e<=_;e++)for(var l=1;l<=E;l++){var S=(E+1)*(e-1)+(l-1),k=(E+1)*e+(l-1),T=(E+1)*e+l,M=(E+1)*(e-1)+l;B.push(S,k,M),B.push(k,T,M)}}()}(),e.setIndex(B),e.setAttribute("position",new pg(D,3)),e.setAttribute("normal",new pg(L,3)),e.setAttribute("uv",new pg(U,2)),e}return _inherits(TubeGeometry,e),_createClass3(TubeGeometry,[{key:"copy",value:function(e){return _superPropGet(TubeGeometry,"copy",this,3)([e]),this.parameters=Object.assign({},e.parameters),this}},{key:"toJSON",value:function(){var e=_superPropGet(TubeGeometry,"toJSON",this,3)([]);return e.path=this.parameters.path.toJSON(),e}}],[{key:"fromJSON",value:function(e){return new TubeGeometry((new Em[e.path.type]).fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}])}(wg);O("br",Am);var Cm=function(e){function MeshDepthMaterial(e){var l;return _classCallCheck3(this,MeshDepthMaterial),(l=_callSuper(this,MeshDepthMaterial)).isMeshDepthMaterial=!0,l.type="MeshDepthMaterial",l.depthPacking=rp,l.map=null,l.alphaMap=null,l.displacementMap=null,l.displacementScale=1,l.displacementBias=0,l.wireframe=!1,l.wireframeLinewidth=1,l.setValues(e),l}return _inherits(MeshDepthMaterial,e),_createClass3(MeshDepthMaterial,[{key:"copy",value:function(e){return _superPropGet(MeshDepthMaterial,"copy",this,3)([e]),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}])}(og),Tm=function(e){function MeshDistanceMaterial(e){var l;return _classCallCheck3(this,MeshDistanceMaterial),(l=_callSuper(this,MeshDistanceMaterial)).isMeshDistanceMaterial=!0,l.type="MeshDistanceMaterial",l.map=null,l.alphaMap=null,l.displacementMap=null,l.displacementScale=1,l.displacementBias=0,l.setValues(e),l}return _inherits(MeshDistanceMaterial,e),_createClass3(MeshDistanceMaterial,[{key:"copy",value:function(e){return _superPropGet(MeshDistanceMaterial,"copy",this,3)([e]),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}])}(og),Mm=_createClass3(function LoadingManager(e,l,_){_classCallCheck3(this,LoadingManager);var S=this,E=!1,k=0,T=0,M=void 0,R=[];this.onStart=void 0,this.onLoad=e,this.onProgress=l,this.onError=_,this.abortController=new AbortController,this.itemStart=function(e){T++,!1===E&&void 0!==S.onStart&&S.onStart(e,k,T),E=!0},this.itemEnd=function(e){k++,void 0!==S.onProgress&&S.onProgress(e,k,T),k===T&&(E=!1,void 0!==S.onLoad&&S.onLoad())},this.itemError=function(e){void 0!==S.onError&&S.onError(e)},this.resolveURL=function(e){return M?M(e):e},this.setURLModifier=function(e){return M=e,this},this.addHandler=function(e,l){return R.push(e,l),this},this.removeHandler=function(e){var l=R.indexOf(e);return-1!==l&&R.splice(l,2),this},this.getHandler=function(e){for(var l=0,_=R.length;l<_;l+=2){var S=R[l],E=R[l+1];if(S.global&&(S.lastIndex=0),S.test(e))return E}return null},this.abort=function(){return this.abortController.abort(),this.abortController=new AbortController,this}});O("bi",Mm);var Rm=function(e){function OrthographicCamera(){var e,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,E=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,k=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.1,T=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2e3;return _classCallCheck3(this,OrthographicCamera),(e=_callSuper(this,OrthographicCamera)).isOrthographicCamera=!0,e.type="OrthographicCamera",e.zoom=1,e.view=null,e.left=l,e.right=_,e.top=S,e.bottom=E,e.near=k,e.far=T,e.updateProjectionMatrix(),e}return _inherits(OrthographicCamera,e),_createClass3(OrthographicCamera,[{key:"copy",value:function(e,l){return _superPropGet(OrthographicCamera,"copy",this,3)([e,l]),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}},{key:"setViewOffset",value:function(e,l,_,S,E,k){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=l,this.view.offsetX=_,this.view.offsetY=S,this.view.width=E,this.view.height=k,this.updateProjectionMatrix()}},{key:"clearViewOffset",value:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}},{key:"updateProjectionMatrix",value:function(){var e=(this.right-this.left)/(2*this.zoom),l=(this.top-this.bottom)/(2*this.zoom),_=(this.right+this.left)/2,S=(this.top+this.bottom)/2,E=_-e,k=_+e,T=S+l,M=S-l;if(null!==this.view&&this.view.enabled){var R=(this.right-this.left)/this.view.fullWidth/this.zoom,I=(this.top-this.bottom)/this.view.fullHeight/this.zoom;k=(E+=R*this.view.offsetX)+R*this.view.width,M=(T-=I*this.view.offsetY)-I*this.view.height}this.projectionMatrix.makeOrthographic(E,k,T,M,this.near,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}},{key:"toJSON",value:function(e){var l=_superPropGet(OrthographicCamera,"toJSON",this,3)([e]);return l.object.zoom=this.zoom,l.object.left=this.left,l.object.right=this.right,l.object.top=this.top,l.object.bottom=this.bottom,l.object.near=this.near,l.object.far=this.far,null!==this.view&&(l.object.view=Object.assign({},this.view)),l}}])}(Ng);O("bs",function(e){function InstancedBufferGeometry(){var e;return _classCallCheck3(this,InstancedBufferGeometry),(e=_callSuper(this,InstancedBufferGeometry)).isInstancedBufferGeometry=!0,e.type="InstancedBufferGeometry",e.instanceCount=1/0,e}return _inherits(InstancedBufferGeometry,e),_createClass3(InstancedBufferGeometry,[{key:"copy",value:function(e){return _superPropGet(InstancedBufferGeometry,"copy",this,3)([e]),this.instanceCount=e.instanceCount,this}},{key:"toJSON",value:function(){var e=_superPropGet(InstancedBufferGeometry,"toJSON",this,3)([]);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}])}(wg));var Im=function(e){function ArrayCamera(){var e,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return _classCallCheck3(this,ArrayCamera),(e=_callSuper(this,ArrayCamera)).isArrayCamera=!0,e.isMultiViewCamera=!1,e.cameras=l,e}return _inherits(ArrayCamera,e),_createClass3(ArrayCamera)}(Gg),Pm=function(){return _createClass3(function Clock(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];_classCallCheck3(this,Clock),this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1},[{key:"start",value:function(){this.startTime=performance.now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}},{key:"stop",value:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}},{key:"getElapsedTime",value:function(){return this.getDelta(),this.elapsedTime}},{key:"getDelta",value:function(){var e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var l=performance.now();e=(l-this.oldTime)/1e3,this.oldTime=l,this.elapsedTime+=e}return e}}])}();O("bc",Pm);var Om=function(){function Uniform(e){_classCallCheck3(this,Uniform),this.value=e}return _createClass3(Uniform,[{key:"clone",value:function(){return new Uniform(void 0===this.value.clone?this.value:this.value.clone())}}])}();function getByteLength(e,l,_,S){var E=function(e){switch(e){case of:case sf:return{byteLength:1,components:1};case lf:case uf:case ff:return{byteLength:2,components:1};case pf:case vf:return{byteLength:2,components:4};case hf:case cf:case df:return{byteLength:4,components:1};case mf:case yf:return{byteLength:4,components:3}}throw new Error("Unknown texture type ".concat(e,"."))}(S);switch(_){case 1021:return e*l;case 1028:case wf:return e*l/E.components*E.byteLength;case 1030:case xf:return e*l*2/E.components*E.byteLength;case 1022:return e*l*3/E.components*E.byteLength;case _f:case Ef:return e*l*4/E.components*E.byteLength;case kf:case Af:return Math.floor((e+3)/4)*Math.floor((l+3)/4)*8;case Cf:case Tf:return Math.floor((e+3)/4)*Math.floor((l+3)/4)*16;case Rf:case Pf:return Math.max(e,16)*Math.max(l,8)/4;case Mf:case If:return Math.max(e,8)*Math.max(l,8)/2;case Of:case Df:return Math.floor((e+3)/4)*Math.floor((l+3)/4)*8;case Lf:case Uf:return Math.floor((e+3)/4)*Math.floor((l+3)/4)*16;case Ff:return Math.floor((e+4)/5)*Math.floor((l+3)/4)*16;case Nf:return Math.floor((e+4)/5)*Math.floor((l+4)/5)*16;case Bf:return Math.floor((e+5)/6)*Math.floor((l+4)/5)*16;case zf:return Math.floor((e+5)/6)*Math.floor((l+5)/6)*16;case jf:return Math.floor((e+7)/8)*Math.floor((l+4)/5)*16;case Gf:return Math.floor((e+7)/8)*Math.floor((l+5)/6)*16;case Hf:return Math.floor((e+7)/8)*Math.floor((l+7)/8)*16;case Vf:return Math.floor((e+9)/10)*Math.floor((l+4)/5)*16;case Wf:return Math.floor((e+9)/10)*Math.floor((l+5)/6)*16;case qf:return Math.floor((e+9)/10)*Math.floor((l+7)/8)*16;case Xf:return Math.floor((e+9)/10)*Math.floor((l+9)/10)*16;case Kf:return Math.floor((e+11)/12)*Math.floor((l+9)/10)*16;case Yf:return Math.floor((e+11)/12)*Math.floor((l+11)/12)*16;case Jf:case Qf:case Zf:return Math.ceil(e/4)*Math.ceil(l/4)*16;case $f:case ep:return Math.ceil(e/4)*Math.ceil(l/4)*8;case tp:case np:return Math.ceil(e/4)*Math.ceil(l/4)*16}throw new Error("Unable to determine texture byte length for ".concat(_," format."))}
/**
			 * @license
			 * Copyright 2010-2025 Three.js Authors
			 * SPDX-License-Identifier: MIT
			 */
function WebGLAnimation(){var e=null,l=!1,_=null,S=null;function onAnimationFrame(l,E){_(l,E),S=e.requestAnimationFrame(onAnimationFrame)}return{start:function(){!0!==l&&null!==_&&(S=e.requestAnimationFrame(onAnimationFrame),l=!0)},stop:function(){e.cancelAnimationFrame(S),l=!1},setAnimationLoop:function(e){_=e},setContext:function(l){e=l}}}function WebGLAttributes(e){var l=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),l.get(e)},remove:function(_){_.isInterleavedBufferAttribute&&(_=_.data);var S=l.get(_);S&&(e.deleteBuffer(S.buffer),l.delete(_))},update:function(_,S){if(_.isInterleavedBufferAttribute&&(_=_.data),_.isGLBufferAttribute){var E=l.get(_);(!E||E.version<_.version)&&l.set(_,{buffer:_.buffer,type:_.type,bytesPerElement:_.elementSize,version:_.version})}else{var k=l.get(_);if(void 0===k)l.set(_,function(l,_){var S,E=l.array,k=l.usage,T=E.byteLength,M=e.createBuffer();if(e.bindBuffer(_,M),e.bufferData(_,E,k),l.onUploadCallback(),E instanceof Float32Array)S=e.FLOAT;else if("undefined"!=typeof Float16Array&&E instanceof Float16Array)S=e.HALF_FLOAT;else if(E instanceof Uint16Array)S=l.isFloat16BufferAttribute?e.HALF_FLOAT:e.UNSIGNED_SHORT;else if(E instanceof Int16Array)S=e.SHORT;else if(E instanceof Uint32Array)S=e.UNSIGNED_INT;else if(E instanceof Int32Array)S=e.INT;else if(E instanceof Int8Array)S=e.BYTE;else if(E instanceof Uint8Array)S=e.UNSIGNED_BYTE;else{if(!(E instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+E);S=e.UNSIGNED_BYTE}return{buffer:M,type:S,bytesPerElement:E.BYTES_PER_ELEMENT,version:l.version,size:T}}(_,S));else if(k.version<_.version){if(k.size!==_.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");!function(l,_,S){var E=_.array,k=_.updateRanges;if(e.bindBuffer(S,l),0===k.length)e.bufferSubData(S,0,E);else{k.sort(function(e,l){return e.start-l.start});for(var T=0,M=1;M<k.length;M++){var R=k[T],I=k[M];I.start<=R.start+R.count+1?R.count=Math.max(R.count,I.start+I.count-R.start):k[++T]=I}k.length=T+1;for(var O=0,D=k.length;O<D;O++){var L=k[O];e.bufferSubData(S,L.start*E.BYTES_PER_ELEMENT,E,L.start,L.count)}_.clearUpdateRanges()}_.onUploadCallback()}(k.buffer,_,S),k.version=_.version}}}}}"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Wd}})),"undefined"!=typeof window&&(window.__THREE__||(window.__THREE__=Wd));var Dm=O("bo",{alphahash_fragment:"#ifdef USE_ALPHAHASH\n\tif ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n#endif",alphahash_pars_fragment:"#ifdef USE_ALPHAHASH\n\tconst float ALPHA_HASH_SCALE = 0.05;\n\tfloat hash2D( vec2 value ) {\n\t\treturn fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n\t}\n\tfloat hash3D( vec3 value ) {\n\t\treturn hash2D( vec2( hash2D( value.xy ), value.z ) );\n\t}\n\tfloat getAlphaHashThreshold( vec3 position ) {\n\t\tfloat maxDeriv = max(\n\t\t\tlength( dFdx( position.xyz ) ),\n\t\t\tlength( dFdy( position.xyz ) )\n\t\t);\n\t\tfloat pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n\t\tvec2 pixScales = vec2(\n\t\t\texp2( floor( log2( pixScale ) ) ),\n\t\t\texp2( ceil( log2( pixScale ) ) )\n\t\t);\n\t\tvec2 alpha = vec2(\n\t\t\thash3D( floor( pixScales.x * position.xyz ) ),\n\t\t\thash3D( floor( pixScales.y * position.xyz ) )\n\t\t);\n\t\tfloat lerpFactor = fract( log2( pixScale ) );\n\t\tfloat x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n\t\tfloat a = min( lerpFactor, 1.0 - lerpFactor );\n\t\tvec3 cases = vec3(\n\t\t\tx * x / ( 2.0 * a * ( 1.0 - a ) ),\n\t\t\t( x - 0.5 * a ) / ( 1.0 - a ),\n\t\t\t1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n\t\t);\n\t\tfloat threshold = ( x < ( 1.0 - a ) )\n\t\t\t? ( ( x < a ) ? cases.x : cases.y )\n\t\t\t: cases.z;\n\t\treturn clamp( threshold , 1.0e-6, 1.0 );\n\t}\n#endif",alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\t#ifdef ALPHA_TO_COVERAGE\n\tdiffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );\n\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\tif ( diffuseColor.a < alphaTest ) discard;\n\t#endif\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_CLEARCOAT ) \n\t\tclearcoatSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_SHEEN ) \n\t\tsheenSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometryNormal, geometryViewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",batching_pars_vertex:"#ifdef USE_BATCHING\n\t#if ! defined( GL_ANGLE_multi_draw )\n\t#define gl_DrawID _gl_DrawID\n\tuniform int _gl_DrawID;\n\t#endif\n\tuniform highp sampler2D batchingTexture;\n\tuniform highp usampler2D batchingIdTexture;\n\tmat4 getBatchingMatrix( const in float i ) {\n\t\tint size = textureSize( batchingTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n\tfloat getIndirectIndex( const in int i ) {\n\t\tint size = textureSize( batchingIdTexture, 0 ).x;\n\t\tint x = i % size;\n\t\tint y = i / size;\n\t\treturn float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );\n\t}\n#endif\n#ifdef USE_BATCHING_COLOR\n\tuniform sampler2D batchingColorTexture;\n\tvec3 getBatchingColor( const in float i ) {\n\t\tint size = textureSize( batchingColorTexture, 0 ).x;\n\t\tint j = int( i );\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\treturn texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;\n\t}\n#endif",batching_vertex:"#ifdef USE_BATCHING\n\tmat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );\n#endif",begin_vertex:"vec3 transformed = vec3( position );\n#ifdef USE_ALPHAHASH\n\tvPosition = vec3( position );\n#endif",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\treturn vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );\n\t\tvec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#ifdef ALPHA_TO_COVERAGE\n\t\tfloat distanceToPlane, distanceGradient;\n\t\tfloat clipOpacity = 1.0;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\tclipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\tif ( clipOpacity == 0.0 ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tfloat unionClipOpacity = 1.0;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\t\tunionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tclipOpacity *= 1.0 - unionClipOpacity;\n\t\t#endif\n\t\tdiffuseColor.a *= clipOpacity;\n\t\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tbool clipped = true;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tif ( clipped ) discard;\n\t\t#endif\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif\n#ifdef USE_BATCHING_COLOR\n\tvec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );\n\tvColor.xyz *= batchingColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n#ifdef USE_ALPHAHASH\n\tvarying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = objectTangent;\n#endif\n#ifdef USE_BATCHING\n\tmat3 bm = mat3( batchingMatrix );\n\ttransformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );\n\ttransformedNormal = bm * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = bm * transformedTangent;\n\t#endif\n#endif\n#ifdef USE_INSTANCING\n\tmat3 im = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );\n\ttransformedNormal = im * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = im * transformedTangent;\n\t#endif\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\ttransformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE\n\t\temissiveColor = sRGBTransferEOTF( emissiveColor );\n\t#endif\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",colorspace_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment:"vec4 LinearTransferOETF( in vec4 value ) {\n\treturn value;\n}\nvec4 sRGBTransferEOTF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 sRGBTransferOETF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform mat3 envMapRotation;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#ifdef USE_ENVMAP\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\t#ifdef USE_ANISOTROPY\n\t\tvec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n\t\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\t\tvec3 bentNormal = cross( bitangent, viewDir );\n\t\t\t\tbentNormal = normalize( cross( bentNormal, bitangent ) );\n\t\t\t\tbentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n\t\t\t\treturn getIBLRadiance( viewDir, bentNormal, roughness );\n\t\t\t#else\n\t\t\t\treturn vec3( 0.0 );\n\t\t\t#endif\n\t\t}\n\t#endif\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\n#if defined( USE_LIGHT_PROBES )\n\tuniform vec3 lightProbe[ 9 ];\n#endif\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif ( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_DISPERSION\n\tmaterial.dispersion = dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\t#ifdef USE_ANISOTROPYMAP\n\t\tmat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n\t\tvec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n\t\tvec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n\t#else\n\t\tvec2 anisotropyV = anisotropyVector;\n\t#endif\n\tmaterial.anisotropy = length( anisotropyV );\n\tif( material.anisotropy == 0.0 ) {\n\t\tanisotropyV = vec2( 1.0, 0.0 );\n\t} else {\n\t\tanisotropyV /= material.anisotropy;\n\t\tmaterial.anisotropy = saturate( material.anisotropy );\n\t}\n\tmaterial.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n\tmaterial.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;\n\tmaterial.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\tfloat dispersion;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat anisotropy;\n\t\tfloat alphaT;\n\t\tvec3 anisotropyT;\n\t\tvec3 anisotropyB;\n\t#endif\n};\nvec3 clearcoatSpecularDirect = vec3( 0.0 );\nvec3 clearcoatSpecularIndirect = vec3( 0.0 );\nvec3 sheenSpecularDirect = vec3( 0.0 );\nvec3 sheenSpecularIndirect = vec3(0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n\tfloat V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n\t\tfloat gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n\t\tfloat gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n\t\tfloat v = 0.5 / ( gv + gl );\n\t\treturn saturate(v);\n\t}\n\tfloat D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n\t\tfloat a2 = alphaT * alphaB;\n\t\thighp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n\t\thighp float v2 = dot( v, v );\n\t\tfloat w2 = a2 / v2;\n\t\treturn RECIPROCAL_PI * a2 * pow2 ( w2 );\n\t}\n#endif\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat dotTL = dot( material.anisotropyT, lightDir );\n\t\tfloat dotTV = dot( material.anisotropyT, viewDir );\n\t\tfloat dotTH = dot( material.anisotropyT, halfDir );\n\t\tfloat dotBL = dot( material.anisotropyB, lightDir );\n\t\tfloat dotBV = dot( material.anisotropyB, viewDir );\n\t\tfloat dotBH = dot( material.anisotropyB, halfDir );\n\t\tfloat V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n\t\tfloat D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n\t#else\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t#endif\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometryNormal;\n\t\tvec3 viewDir = geometryViewDir;\n\t\tvec3 position = geometryPosition;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nvec3 geometryPosition = - vViewPosition;\nvec3 geometryNormal = normal;\nvec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\nvec3 geometryClearcoatNormal = vec3( 0.0 );\n#ifdef USE_CLEARCOAT\n\tgeometryClearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometryViewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometryPosition, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometryPosition, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if defined( USE_LIGHT_PROBES )\n\t\tirradiance += getLightProbeIrradiance( lightProbe, geometryNormal );\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometryNormal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\t#ifdef USE_ANISOTROPY\n\t\tradiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );\n\t#else\n\t\tradiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )\n\tgl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGARITHMIC_DEPTH_BUFFER\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGARITHMIC_DEPTH_BUFFER\n\tvFragDepth = 1.0 + gl_Position.w;\n\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphinstance_vertex:"#ifdef USE_INSTANCING_MORPH\n\tfloat morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\tfloat morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tmorphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;\n\t}\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t}\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_INSTANCING_MORPH\n\t\tuniform float morphTargetBaseInfluence;\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t#endif\n\tuniform sampler2DArray morphTargetsTexture;\n\tuniform ivec2 morphTargetsTextureSize;\n\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t}\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t}\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal,\n\t\t#if defined( USE_NORMALMAP )\n\t\t\tvNormalMapUv\n\t\t#elif defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tvClearcoatNormalMapUv\n\t\t#else\n\t\t\tvUv\n\t\t#endif\n\t\t);\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 nonPerturbedNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = nonPerturbedNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",opaque_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;\nconst float Inv255 = 1. / 255.;\nconst vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );\nconst vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );\nconst vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );\nconst vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );\nvec4 packDepthToRGBA( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec4( 0., 0., 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec4( 1., 1., 1., 1. );\n\tfloat vuf;\n\tfloat af = modf( v * PackFactors.a, vuf );\n\tfloat bf = modf( vuf * ShiftRight8, vuf );\n\tfloat gf = modf( vuf * ShiftRight8, vuf );\n\treturn vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );\n}\nvec3 packDepthToRGB( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec3( 0., 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec3( 1., 1., 1. );\n\tfloat vuf;\n\tfloat bf = modf( v * PackFactors.b, vuf );\n\tfloat gf = modf( vuf * ShiftRight8, vuf );\n\treturn vec3( vuf * Inv255, gf * PackUpscale, bf );\n}\nvec2 packDepthToRG( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec2( 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec2( 1., 1. );\n\tfloat vuf;\n\tfloat gf = modf( v * 256., vuf );\n\treturn vec2( vuf * Inv255, gf );\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors4 );\n}\nfloat unpackRGBToDepth( const in vec3 v ) {\n\treturn dot( v, UnpackFactors3 );\n}\nfloat unpackRGToDepth( const in vec2 v ) {\n\treturn v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;\n}\nvec4 pack2HalfToRGBA( const in vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( const in vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_BATCHING\n\tmvPosition = batchingMatrix * mvPosition;\n#endif\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\tfloat depth = unpackRGBAToDepth( texture2D( depths, uv ) );\n\t\t#ifdef USE_REVERSED_DEPTH_BUFFER\n\t\t\treturn step( depth, compare );\n\t\t#else\n\t\t\treturn step( compare, depth );\n\t\t#endif\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow( sampler2D shadow, vec2 uv, float compare ) {\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\t#ifdef USE_REVERSED_DEPTH_BUFFER\n\t\t\tfloat hard_shadow = step( distribution.x, compare );\n\t\t#else\n\t\t\tfloat hard_shadow = step( compare, distribution.x );\n\t\t#endif\n\t\tif ( hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn mix( 1.0, shadow, shadowIntensity );\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tfloat shadow = 1.0;\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\t\n\t\tfloat lightToPositionLength = length( lightToPosition );\n\t\tif ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {\n\t\t\tfloat dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\t\tdp += shadowBias;\n\t\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\t\tshadow = (\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t\t) * ( 1.0 / 9.0 );\n\t\t\t#else\n\t\t\t\tshadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t\t#endif\n\t\t}\n\t\treturn mix( 1.0, shadow, shadowIntensity );\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tint size = textureSize( boneTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 CineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nconst mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.6605, - 0.1246, - 0.0182 ),\n\tvec3( - 0.5876, 1.1329, - 0.1006 ),\n\tvec3( - 0.0728, - 0.0083, 1.1187 )\n);\nconst mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(\n\tvec3( 0.6274, 0.0691, 0.0164 ),\n\tvec3( 0.3293, 0.9195, 0.0880 ),\n\tvec3( 0.0433, 0.0113, 0.8956 )\n);\nvec3 agxDefaultContrastApprox( vec3 x ) {\n\tvec3 x2 = x * x;\n\tvec3 x4 = x2 * x2;\n\treturn + 15.5 * x4 * x2\n\t\t- 40.14 * x4 * x\n\t\t+ 31.96 * x4\n\t\t- 6.868 * x2 * x\n\t\t+ 0.4298 * x2\n\t\t+ 0.1191 * x\n\t\t- 0.00232;\n}\nvec3 AgXToneMapping( vec3 color ) {\n\tconst mat3 AgXInsetMatrix = mat3(\n\t\tvec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),\n\t\tvec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),\n\t\tvec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )\n\t);\n\tconst mat3 AgXOutsetMatrix = mat3(\n\t\tvec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),\n\t\tvec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),\n\t\tvec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )\n\t);\n\tconst float AgxMinEv = - 12.47393;\tconst float AgxMaxEv = 4.026069;\n\tcolor *= toneMappingExposure;\n\tcolor = LINEAR_SRGB_TO_LINEAR_REC2020 * color;\n\tcolor = AgXInsetMatrix * color;\n\tcolor = max( color, 1e-10 );\tcolor = log2( color );\n\tcolor = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );\n\tcolor = clamp( color, 0.0, 1.0 );\n\tcolor = agxDefaultContrastApprox( color );\n\tcolor = AgXOutsetMatrix * color;\n\tcolor = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );\n\tcolor = LINEAR_REC2020_TO_LINEAR_SRGB * color;\n\tcolor = clamp( color, 0.0, 1.0 );\n\treturn color;\n}\nvec3 NeutralToneMapping( vec3 color ) {\n\tconst float StartCompression = 0.8 - 0.04;\n\tconst float Desaturation = 0.15;\n\tcolor *= toneMappingExposure;\n\tfloat x = min( color.r, min( color.g, color.b ) );\n\tfloat offset = x < 0.08 ? x - 6.25 * x * x : 0.04;\n\tcolor -= offset;\n\tfloat peak = max( color.r, max( color.g, color.b ) );\n\tif ( peak < StartCompression ) return color;\n\tfloat d = 1. - StartCompression;\n\tfloat newPeak = 1. - d * d / ( peak + d - StartCompression );\n\tcolor *= newPeak / peak;\n\tfloat g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );\n\treturn mix( color, vec3( newPeak ), g );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmitted = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn vec3( 1.0 );\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec4 transmittedLight;\n\t\tvec3 transmittance;\n\t\t#ifdef USE_DISPERSION\n\t\t\tfloat halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;\n\t\t\tvec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );\n\t\t\tfor ( int i = 0; i < 3; i ++ ) {\n\t\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );\n\t\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\t\trefractionCoords += 1.0;\n\t\t\t\trefractionCoords /= 2.0;\n\t\t\t\tvec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );\n\t\t\t\ttransmittedLight[ i ] = transmissionSample[ i ];\n\t\t\t\ttransmittedLight.a += transmissionSample.a;\n\t\t\t\ttransmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];\n\t\t\t}\n\t\t\ttransmittedLight.a /= 3.0;\n\t\t#else\n\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\trefractionCoords += 1.0;\n\t\t\trefractionCoords /= 2.0;\n\t\t\ttransmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\t\ttransmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\t#endif\n\t\tvec3 attenuatedColor = transmittance * transmittedLight.rgb;\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\tfloat transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n\t}\n#endif",uv_pars_fragment:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tuniform mat3 anisotropyMapTransform;\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_BATCHING\n\t\tworldPosition = batchingMatrix * worldPosition;\n\t#endif\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nuniform mat3 backgroundRotation;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",depth_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <logdepthbuf_fragment>\n\t#ifdef USE_REVERSED_DEPTH_BUFFER\n\t\tfloat fragCoordZ = vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ];\n\t#else\n\t\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ] + 0.5;\n\t#endif\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#elif DEPTH_PACKING == 3202\n\t\tgl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );\n\t#elif DEPTH_PACKING == 3203\n\t\tgl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_DISPERSION\n\tuniform float dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\tuniform vec2 anisotropyVector;\n\t#ifdef USE_ANISOTROPYMAP\n\t\tuniform sampler2D anisotropyMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;\n\t#endif\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix[ 3 ];\n\tvec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}"}),Lm={common:{diffuse:{value:new rg(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new wp},alphaMap:{value:null},alphaMapTransform:{value:new wp},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new wp}},envmap:{envMap:{value:null},envMapRotation:{value:new wp},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new wp}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new wp}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new wp},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new wp},normalScale:{value:new mp(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new wp},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new wp}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new wp}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new wp}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new rg(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new rg(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new wp},alphaTest:{value:0},uvTransform:{value:new wp}},sprite:{diffuse:{value:new rg(16777215)},opacity:{value:1},center:{value:new mp(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new wp},alphaMap:{value:null},alphaMapTransform:{value:new wp},alphaTest:{value:0}}},Um={basic:{uniforms:mergeUniforms([Lm.common,Lm.specularmap,Lm.envmap,Lm.aomap,Lm.lightmap,Lm.fog]),vertexShader:Dm.meshbasic_vert,fragmentShader:Dm.meshbasic_frag},lambert:{uniforms:mergeUniforms([Lm.common,Lm.specularmap,Lm.envmap,Lm.aomap,Lm.lightmap,Lm.emissivemap,Lm.bumpmap,Lm.normalmap,Lm.displacementmap,Lm.fog,Lm.lights,{emissive:{value:new rg(0)}}]),vertexShader:Dm.meshlambert_vert,fragmentShader:Dm.meshlambert_frag},phong:{uniforms:mergeUniforms([Lm.common,Lm.specularmap,Lm.envmap,Lm.aomap,Lm.lightmap,Lm.emissivemap,Lm.bumpmap,Lm.normalmap,Lm.displacementmap,Lm.fog,Lm.lights,{emissive:{value:new rg(0)},specular:{value:new rg(1118481)},shininess:{value:30}}]),vertexShader:Dm.meshphong_vert,fragmentShader:Dm.meshphong_frag},standard:{uniforms:mergeUniforms([Lm.common,Lm.envmap,Lm.aomap,Lm.lightmap,Lm.emissivemap,Lm.bumpmap,Lm.normalmap,Lm.displacementmap,Lm.roughnessmap,Lm.metalnessmap,Lm.fog,Lm.lights,{emissive:{value:new rg(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Dm.meshphysical_vert,fragmentShader:Dm.meshphysical_frag},toon:{uniforms:mergeUniforms([Lm.common,Lm.aomap,Lm.lightmap,Lm.emissivemap,Lm.bumpmap,Lm.normalmap,Lm.displacementmap,Lm.gradientmap,Lm.fog,Lm.lights,{emissive:{value:new rg(0)}}]),vertexShader:Dm.meshtoon_vert,fragmentShader:Dm.meshtoon_frag},matcap:{uniforms:mergeUniforms([Lm.common,Lm.bumpmap,Lm.normalmap,Lm.displacementmap,Lm.fog,{matcap:{value:null}}]),vertexShader:Dm.meshmatcap_vert,fragmentShader:Dm.meshmatcap_frag},points:{uniforms:mergeUniforms([Lm.points,Lm.fog]),vertexShader:Dm.points_vert,fragmentShader:Dm.points_frag},dashed:{uniforms:mergeUniforms([Lm.common,Lm.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Dm.linedashed_vert,fragmentShader:Dm.linedashed_frag},depth:{uniforms:mergeUniforms([Lm.common,Lm.displacementmap]),vertexShader:Dm.depth_vert,fragmentShader:Dm.depth_frag},normal:{uniforms:mergeUniforms([Lm.common,Lm.bumpmap,Lm.normalmap,Lm.displacementmap,{opacity:{value:1}}]),vertexShader:Dm.meshnormal_vert,fragmentShader:Dm.meshnormal_frag},sprite:{uniforms:mergeUniforms([Lm.sprite,Lm.fog]),vertexShader:Dm.sprite_vert,fragmentShader:Dm.sprite_frag},background:{uniforms:{uvTransform:{value:new wp},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Dm.background_vert,fragmentShader:Dm.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new wp}},vertexShader:Dm.backgroundCube_vert,fragmentShader:Dm.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Dm.cube_vert,fragmentShader:Dm.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Dm.equirect_vert,fragmentShader:Dm.equirect_frag},distanceRGBA:{uniforms:mergeUniforms([Lm.common,Lm.displacementmap,{referencePosition:{value:new _p},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Dm.distanceRGBA_vert,fragmentShader:Dm.distanceRGBA_frag},shadow:{uniforms:mergeUniforms([Lm.lights,Lm.fog,{color:{value:new rg(0)},opacity:{value:1}}]),vertexShader:Dm.shadow_vert,fragmentShader:Dm.shadow_frag}};Um.physical={uniforms:mergeUniforms([Um.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new wp},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new wp},clearcoatNormalScale:{value:new mp(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new wp},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new wp},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new wp},sheen:{value:0},sheenColor:{value:new rg(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new wp},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new wp},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new wp},transmissionSamplerSize:{value:new mp},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new wp},attenuationDistance:{value:0},attenuationColor:{value:new rg(0)},specularColor:{value:new rg(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new wp},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new wp},anisotropyVector:{value:new mp},anisotropyMap:{value:null},anisotropyMapTransform:{value:new wp}}]),vertexShader:Dm.meshphysical_vert,fragmentShader:Dm.meshphysical_frag};var Fm={r:0,b:0,g:0},Nm=new wv,Bm=new dv;function WebGLBackground(e,l,_,S,E,k,T){var M,R,I=new rg(0),O=!0===k?0:1,D=null,L=0,U=null;function getBackground(e){var S=!0===e.isScene?e.background:null;S&&S.isTexture&&(S=(e.backgroundBlurriness>0?_:l).get(S));return S}function setClear(l,_){l.getRGB(Fm,getUnlitUniformColorSpace(e)),S.buffers.color.setClear(Fm.r,Fm.g,Fm.b,_,T)}return{getClearColor:function(){return I},setClearColor:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;I.set(e),setClear(I,O=l)},getClearAlpha:function(){return O},setClearAlpha:function(e){setClear(I,O=e)},render:function(l){var _=!1,E=getBackground(l);null===E?setClear(I,O):E&&E.isColor&&(setClear(E,1),_=!0);var k=e.xr.getEnvironmentBlendMode();"additive"===k?S.buffers.color.setClear(0,0,0,1,T):"alpha-blend"===k&&S.buffers.color.setClear(0,0,0,0,T),(e.autoClear||_)&&(S.buffers.depth.setTest(!0),S.buffers.depth.setMask(!0),S.buffers.color.setMask(!0),e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil))},addToRenderList:function(l,_){var S=getBackground(_);S&&(S.isCubeTexture||S.mapping===Jd)?(void 0===R&&((R=new Dg(new Lg(1,1,1),new Fg({name:"BackgroundCubeMaterial",uniforms:cloneUniforms(Um.backgroundCube.uniforms),vertexShader:Um.backgroundCube.vertexShader,fragmentShader:Um.backgroundCube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1}))).geometry.deleteAttribute("normal"),R.geometry.deleteAttribute("uv"),R.onBeforeRender=function(e,l,_){this.matrixWorld.copyPosition(_.matrixWorld)},Object.defineProperty(R.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),E.update(R)),Nm.copy(_.backgroundRotation),Nm.x*=-1,Nm.y*=-1,Nm.z*=-1,S.isCubeTexture&&!1===S.isRenderTargetTexture&&(Nm.y*=-1,Nm.z*=-1),R.material.uniforms.envMap.value=S,R.material.uniforms.flipEnvMap.value=S.isCubeTexture&&!1===S.isRenderTargetTexture?-1:1,R.material.uniforms.backgroundBlurriness.value=_.backgroundBlurriness,R.material.uniforms.backgroundIntensity.value=_.backgroundIntensity,R.material.uniforms.backgroundRotation.value.setFromMatrix4(Bm.makeRotationFromEuler(Nm)),R.material.toneMapped=Tp.getTransfer(S.colorSpace)!==up,D===S&&L===S.version&&U===e.toneMapping||(R.material.needsUpdate=!0,D=S,L=S.version,U=e.toneMapping),R.layers.enableAll(),l.unshift(R,R.geometry,R.material,0,0,null)):S&&S.isTexture&&(void 0===M&&((M=new Dg(new km(2,2),new Fg({name:"BackgroundMaterial",uniforms:cloneUniforms(Um.background.uniforms),vertexShader:Um.background.vertexShader,fragmentShader:Um.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1}))).geometry.deleteAttribute("normal"),Object.defineProperty(M.material,"map",{get:function(){return this.uniforms.t2D.value}}),E.update(M)),M.material.uniforms.t2D.value=S,M.material.uniforms.backgroundIntensity.value=_.backgroundIntensity,M.material.toneMapped=Tp.getTransfer(S.colorSpace)!==up,!0===S.matrixAutoUpdate&&S.updateMatrix(),M.material.uniforms.uvTransform.value.copy(S.matrix),D===S&&L===S.version&&U===e.toneMapping||(M.material.needsUpdate=!0,D=S,L=S.version,U=e.toneMapping),M.layers.enableAll(),l.unshift(M,M.geometry,M.material,0,0,null))},dispose:function(){void 0!==R&&(R.geometry.dispose(),R.material.dispose(),R=void 0),void 0!==M&&(M.geometry.dispose(),M.material.dispose(),M=void 0)}}}function WebGLBindingStates(e,l){var _=e.getParameter(e.MAX_VERTEX_ATTRIBS),S={},E=createBindingState(null),k=E,T=!1;function bindVertexArrayObject(l){return e.bindVertexArray(l)}function deleteVertexArrayObject(l){return e.deleteVertexArray(l)}function createBindingState(e){for(var l=[],S=[],E=[],k=0;k<_;k++)l[k]=0,S[k]=0,E[k]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:l,enabledAttributes:S,attributeDivisors:E,object:e,attributes:{},index:null}}function initAttributes(){for(var e=k.newAttributes,l=0,_=e.length;l<_;l++)e[l]=0}function enableAttribute(e){enableAttributeAndDivisor(e,0)}function enableAttributeAndDivisor(l,_){var S=k.newAttributes,E=k.enabledAttributes,T=k.attributeDivisors;S[l]=1,0===E[l]&&(e.enableVertexAttribArray(l),E[l]=1),T[l]!==_&&(e.vertexAttribDivisor(l,_),T[l]=_)}function disableUnusedAttributes(){for(var l=k.newAttributes,_=k.enabledAttributes,S=0,E=_.length;S<E;S++)_[S]!==l[S]&&(e.disableVertexAttribArray(S),_[S]=0)}function vertexAttribPointer(l,_,S,E,k,T,M){!0===M?e.vertexAttribIPointer(l,_,S,k,T):e.vertexAttribPointer(l,_,S,E,k,T)}function reset(){resetDefaultState(),T=!0,k!==E&&bindVertexArrayObject((k=E).object)}function resetDefaultState(){E.geometry=null,E.program=null,E.wireframe=!1}return{setup:function(_,E,M,R,I){var O,D=function(l,_,E){var k=!0===E.wireframe,T=S[l.id];void 0===T&&(T={},S[l.id]=T);var M=T[_.id];void 0===M&&(M={},T[_.id]=M);var R=M[k];void 0===R&&(R=createBindingState(e.createVertexArray()),M[k]=R);return R}(R,M,E);k!==D&&bindVertexArrayObject((k=D).object),O=function(e,l,_,S){var E=k.attributes,T=l.attributes,M=0,R=_.getAttributes();for(var I in R){if(R[I].location>=0){var O=E[I],D=T[I];if(void 0===D&&("instanceMatrix"===I&&e.instanceMatrix&&(D=e.instanceMatrix),"instanceColor"===I&&e.instanceColor&&(D=e.instanceColor)),void 0===O)return!0;if(O.attribute!==D)return!0;if(D&&O.data!==D.data)return!0;M++}}return k.attributesNum!==M||k.index!==S}(_,R,M,I),O&&function(e,l,_,S){var E={},T=l.attributes,M=0,R=_.getAttributes();for(var I in R){if(R[I].location>=0){var O=T[I];void 0===O&&("instanceMatrix"===I&&e.instanceMatrix&&(O=e.instanceMatrix),"instanceColor"===I&&e.instanceColor&&(O=e.instanceColor));var D={};D.attribute=O,O&&O.data&&(D.data=O.data),E[I]=D,M++}}k.attributes=E,k.attributesNum=M,k.index=S}(_,R,M,I),null!==I&&l.update(I,e.ELEMENT_ARRAY_BUFFER),(O||T)&&(T=!1,function(_,S,E,k){initAttributes();var T=k.attributes,M=E.getAttributes(),R=S.defaultAttributeValues;for(var I in M){var O=M[I];if(O.location>=0){var D=T[I];if(void 0===D&&("instanceMatrix"===I&&_.instanceMatrix&&(D=_.instanceMatrix),"instanceColor"===I&&_.instanceColor&&(D=_.instanceColor)),void 0!==D){var L=D.normalized,U=D.itemSize,B=l.get(D);if(void 0===B)continue;var z=B.buffer,j=B.type,G=B.bytesPerElement,H=j===e.INT||j===e.UNSIGNED_INT||D.gpuType===cf;if(D.isInterleavedBufferAttribute){var V=D.data,W=V.stride,q=D.offset;if(V.isInstancedInterleavedBuffer){for(var X=0;X<O.locationSize;X++)enableAttributeAndDivisor(O.location+X,V.meshPerAttribute);!0!==_.isInstancedMesh&&void 0===k._maxInstanceCount&&(k._maxInstanceCount=V.meshPerAttribute*V.count)}else for(var K=0;K<O.locationSize;K++)enableAttribute(O.location+K);e.bindBuffer(e.ARRAY_BUFFER,z);for(var Y=0;Y<O.locationSize;Y++)vertexAttribPointer(O.location+Y,U/O.locationSize,j,L,W*G,(q+U/O.locationSize*Y)*G,H)}else{if(D.isInstancedBufferAttribute){for(var J=0;J<O.locationSize;J++)enableAttributeAndDivisor(O.location+J,D.meshPerAttribute);!0!==_.isInstancedMesh&&void 0===k._maxInstanceCount&&(k._maxInstanceCount=D.meshPerAttribute*D.count)}else for(var Q=0;Q<O.locationSize;Q++)enableAttribute(O.location+Q);e.bindBuffer(e.ARRAY_BUFFER,z);for(var Z=0;Z<O.locationSize;Z++)vertexAttribPointer(O.location+Z,U/O.locationSize,j,L,U*G,U/O.locationSize*Z*G,H)}}else if(void 0!==R){var $=R[I];if(void 0!==$)switch($.length){case 2:e.vertexAttrib2fv(O.location,$);break;case 3:e.vertexAttrib3fv(O.location,$);break;case 4:e.vertexAttrib4fv(O.location,$);break;default:e.vertexAttrib1fv(O.location,$)}}}}disableUnusedAttributes()}(_,E,M,R),null!==I&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,l.get(I).buffer))},reset:reset,resetDefaultState:resetDefaultState,dispose:function(){for(var e in reset(),S){var l=S[e];for(var _ in l){var E=l[_];for(var k in E)deleteVertexArrayObject(E[k].object),delete E[k];delete l[_]}delete S[e]}},releaseStatesOfGeometry:function(e){if(void 0!==S[e.id]){var l=S[e.id];for(var _ in l){var E=l[_];for(var k in E)deleteVertexArrayObject(E[k].object),delete E[k];delete l[_]}delete S[e.id]}},releaseStatesOfProgram:function(e){for(var l in S){var _=S[l];if(void 0!==_[e.id]){var E=_[e.id];for(var k in E)deleteVertexArrayObject(E[k].object),delete E[k];delete _[e.id]}}},initAttributes:initAttributes,enableAttribute:enableAttribute,disableUnusedAttributes:disableUnusedAttributes}}function WebGLBufferRenderer(e,l,_){var S;function renderInstances(l,E,k){0!==k&&(e.drawArraysInstanced(S,l,E,k),_.update(E,S,k))}this.setMode=function(e){S=e},this.render=function(l,E){e.drawArrays(S,l,E),_.update(E,S,1)},this.renderInstances=renderInstances,this.renderMultiDraw=function(e,E,k){if(0!==k){l.get("WEBGL_multi_draw").multiDrawArraysWEBGL(S,e,0,E,0,k);for(var T=0,M=0;M<k;M++)T+=E[M];_.update(T,S,1)}},this.renderMultiDrawInstances=function(e,E,k,T){if(0!==k){var M=l.get("WEBGL_multi_draw");if(null===M)for(var R=0;R<e.length;R++)renderInstances(e[R],E[R],T[R]);else{M.multiDrawArraysInstancedWEBGL(S,e,0,E,0,T,0,k);for(var I=0,O=0;O<k;O++)I+=E[O]*T[O];_.update(I,S,1)}}}}function WebGLCapabilities(e,l,_,S){var E;function getMaxPrecision(l){if("highp"===l){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0)return"highp";l="mediump"}return"mediump"===l&&e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}var k=void 0!==_.precision?_.precision:"highp",T=getMaxPrecision(k);T!==k&&(k=T);var M=!0===_.logarithmicDepthBuffer,R=!0===_.reversedDepthBuffer&&l.has("EXT_clip_control"),I=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),O=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS);return{isWebGL2:!0,getMaxAnisotropy:function(){if(void 0!==E)return E;if(!0===l.has("EXT_texture_filter_anisotropic")){var _=l.get("EXT_texture_filter_anisotropic");E=e.getParameter(_.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else E=0;return E},getMaxPrecision:getMaxPrecision,textureFormatReadable:function(l){return l===_f||S.convert(l)===e.getParameter(e.IMPLEMENTATION_COLOR_READ_FORMAT)},textureTypeReadable:function(_){var E=_===ff&&(l.has("EXT_color_buffer_half_float")||l.has("EXT_color_buffer_float"));return!(_!==of&&S.convert(_)!==e.getParameter(e.IMPLEMENTATION_COLOR_READ_TYPE)&&_!==df&&!E)},precision:k,logarithmicDepthBuffer:M,reversedDepthBuffer:R,maxTextures:I,maxVertexTextures:O,maxTextureSize:e.getParameter(e.MAX_TEXTURE_SIZE),maxCubemapSize:e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),maxAttributes:e.getParameter(e.MAX_VERTEX_ATTRIBS),maxVertexUniforms:e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),maxVaryings:e.getParameter(e.MAX_VARYING_VECTORS),maxFragmentUniforms:e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),vertexTextures:O>0,maxSamples:e.getParameter(e.MAX_SAMPLES)}}function WebGLClipping(e){var l=this,_=null,S=0,E=!1,k=!1,T=new nm,M=new wp,R={value:null,needsUpdate:!1};function projectPlanes(e,_,S,E){var k=null!==e?e.length:0,I=null;if(0!==k){if(I=R.value,!0!==E||null===I){var O=S+4*k,D=_.matrixWorldInverse;M.getNormalMatrix(D),(null===I||I.length<O)&&(I=new Float32Array(O));for(var L=0,U=S;L!==k;++L,U+=4)T.copy(e[L]).applyMatrix4(D,M),T.normal.toArray(I,U),I[U+3]=T.constant}R.value=I,R.needsUpdate=!0}return l.numPlanes=k,l.numIntersection=0,I}this.uniform=R,this.numPlanes=0,this.numIntersection=0,this.init=function(e,l){var _=0!==e.length||l||0!==S||E;return E=l,S=e.length,_},this.beginShadows=function(){k=!0,projectPlanes(null)},this.endShadows=function(){k=!1},this.setGlobalState=function(e,l){_=projectPlanes(e,l,0)},this.setState=function(T,M,I){var O=T.clippingPlanes,D=T.clipIntersection,L=T.clipShadows,U=e.get(T);if(!E||null===O||0===O.length||k&&!L)k?projectPlanes(null):function(){R.value!==_&&(R.value=_,R.needsUpdate=S>0);l.numPlanes=S,l.numIntersection=0}();else{var B=k?0:S,z=4*B,j=U.clippingState||null;R.value=j,j=projectPlanes(O,M,z,I);for(var G=0;G!==z;++G)j[G]=_[G];U.clippingState=j,this.numIntersection=D?this.numPlanes:0,this.numPlanes+=B}}}function WebGLCubeMaps(e){var l=new WeakMap;function mapTextureMapping(e,l){return 303===l?e.mapping=Kd:304===l&&(e.mapping=Yd),e}function onTextureDispose(e){var _=e.target;_.removeEventListener("dispose",onTextureDispose);var S=l.get(_);void 0!==S&&(l.delete(_),S.dispose())}return{get:function(_){if(_&&_.isTexture){var S=_.mapping;if(303===S||304===S){if(l.has(_))return mapTextureMapping(l.get(_).texture,_.mapping);var E=_.image;if(E&&E.height>0){var k=new qg(E.height);return k.fromEquirectangularTexture(e,_),l.set(_,k),_.addEventListener("dispose",onTextureDispose),mapTextureMapping(k.texture,_.mapping)}return null}}return _},dispose:function(){l=new WeakMap}}}var zm=[.125,.215,.35,.446,.526,.582],jm=20,Gm=new Rm,Hm=new rg,Vm=null,Wm=0,qm=0,Xm=!1,Km=(1+Math.sqrt(5))/2,Ym=1/Km,Jm=[new _p(-Km,Ym,0),new _p(Km,Ym,0),new _p(-Ym,0,Km),new _p(Ym,0,Km),new _p(0,Km,-Ym),new _p(0,Km,Ym),new _p(-1,1,-1),new _p(1,1,-1),new _p(-1,1,1),new _p(1,1,1)],Qm=new _p,Zm=function(){return _createClass3(function PMREMGenerator(e){_classCallCheck3(this,PMREMGenerator),this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)},[{key:"fromScene",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,_=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,S=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100,E=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},k=E.size,T=void 0===k?256:k,M=E.position,R=void 0===M?Qm:M;Vm=this._renderer.getRenderTarget(),Wm=this._renderer.getActiveCubeFace(),qm=this._renderer.getActiveMipmapLevel(),Xm=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(T);var I=this._allocateTargets();return I.depthBuffer=!0,this._sceneToCubeUV(e,_,S,I,R),l>0&&this._blur(I,0,0,l),this._applyPMREM(I),this._cleanup(I),I}},{key:"fromEquirectangular",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(e,l)}},{key:"fromCubemap",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(e,l)}},{key:"compileCubemapShader",value:function(){null===this._cubemapMaterial&&(this._cubemapMaterial=_getCubemapMaterial(),this._compileMaterial(this._cubemapMaterial))}},{key:"compileEquirectangularShader",value:function(){null===this._equirectMaterial&&(this._equirectMaterial=_getEquirectMaterial(),this._compileMaterial(this._equirectMaterial))}},{key:"dispose",value:function(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}},{key:"_setSize",value:function(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}},{key:"_dispose",value:function(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(var e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}},{key:"_cleanup",value:function(e){this._renderer.setRenderTarget(Vm,Wm,qm),this._renderer.xr.enabled=Xm,e.scissorTest=!1,_setViewport(e,0,0,e.width,e.height)}},{key:"_fromTexture",value:function(e,l){e.mapping===Kd||e.mapping===Yd?this._setSize(0===e.image.length?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),Vm=this._renderer.getRenderTarget(),Wm=this._renderer.getActiveCubeFace(),qm=this._renderer.getActiveMipmapLevel(),Xm=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;var _=l||this._allocateTargets();return this._textureToCubeUV(e,_),this._applyPMREM(_),this._cleanup(_),_}},{key:"_allocateTargets",value:function(){var e=3*Math.max(this._cubeSize,112),l=4*this._cubeSize,_={magFilter:nf,minFilter:nf,generateMipmaps:!1,type:ff,format:_f,colorSpace:op,depthBuffer:!1},S=_createRenderTarget(e,l,_);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==l){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=_createRenderTarget(e,l,_);var E=this._lodMax,k=function(e){for(var l=[],_=[],S=[],E=e,k=e-4+1+zm.length,T=0;T<k;T++){var M=Math.pow(2,E);_.push(M);var R=1/M;T>e-4?R=zm[T-e+4-1]:0===T&&(R=0),S.push(R);for(var I=1/(M-2),O=-I,D=1+I,L=[O,O,D,O,D,D,O,O,D,D,O,D],U=6,B=6,z=3,j=2,G=1,H=new Float32Array(z*B*U),V=new Float32Array(j*B*U),W=new Float32Array(G*B*U),q=0;q<U;q++){var X=q%3*2/3-1,K=q>2?0:-1,Y=[X,K,0,X+2/3,K,0,X+2/3,K+1,0,X,K,0,X+2/3,K+1,0,X,K+1,0];H.set(Y,z*B*q),V.set(L,j*B*q);var J=[q,q,q,q,q,q];W.set(J,G*B*q)}var Q=new wg;Q.setAttribute("position",new hg(H,z)),Q.setAttribute("uv",new hg(V,j)),Q.setAttribute("faceIndex",new hg(W,G)),l.push(Q),E>4&&E--}return{lodPlanes:l,sizeLods:_,sigmas:S}}(E);this._sizeLods=k.sizeLods,this._lodPlanes=k.lodPlanes,this._sigmas=k.sigmas,this._blurMaterial=function(e,l,_){var S=new Float32Array(jm),E=new _p(0,1,0),k=new Fg({name:"SphericalGaussianBlur",defines:{n:jm,CUBEUV_TEXEL_WIDTH:1/l,CUBEUV_TEXEL_HEIGHT:1/_,CUBEUV_MAX_MIP:"".concat(e,".0")},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:S},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:E}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1});return k}(E,e,l)}return S}},{key:"_compileMaterial",value:function(e){var l=new Dg(this._lodPlanes[0],e);this._renderer.compile(l,Gm)}},{key:"_sceneToCubeUV",value:function(e,l,_,S,E){var k=new Gg(90,1,l,_),T=[1,-1,1,1,1,1],M=[1,1,1,-1,-1,-1],R=this._renderer,I=R.autoClear,O=R.toneMapping;R.getClearColor(Hm),R.toneMapping=0,R.autoClear=!1,R.state.buffers.depth.getReversed()&&(R.setRenderTarget(S),R.clearDepth(),R.setRenderTarget(null));var D=new sg({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),L=new Dg(new Lg,D),U=!1,B=e.background;B?B.isColor&&(D.color.copy(B),e.background=null,U=!0):(D.color.copy(Hm),U=!0);for(var z=0;z<6;z++){var j=z%3;0===j?(k.up.set(0,T[z],0),k.position.set(E.x,E.y,E.z),k.lookAt(E.x+M[z],E.y,E.z)):1===j?(k.up.set(0,0,T[z]),k.position.set(E.x,E.y,E.z),k.lookAt(E.x,E.y+M[z],E.z)):(k.up.set(0,T[z],0),k.position.set(E.x,E.y,E.z),k.lookAt(E.x,E.y,E.z+M[z]));var G=this._cubeSize;_setViewport(S,j*G,z>2?G:0,G,G),R.setRenderTarget(S),U&&R.render(L,k),R.render(e,k)}L.geometry.dispose(),L.material.dispose(),R.toneMapping=O,R.autoClear=I,e.background=B}},{key:"_textureToCubeUV",value:function(e,l){var _=this._renderer,S=e.mapping===Kd||e.mapping===Yd;S?(null===this._cubemapMaterial&&(this._cubemapMaterial=_getCubemapMaterial()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=_getEquirectMaterial());var E=S?this._cubemapMaterial:this._equirectMaterial,k=new Dg(this._lodPlanes[0],E);E.uniforms.envMap.value=e;var T=this._cubeSize;_setViewport(l,0,0,3*T,2*T),_.setRenderTarget(l),_.render(k,Gm)}},{key:"_applyPMREM",value:function(e){var l=this._renderer,_=l.autoClear;l.autoClear=!1;for(var S=this._lodPlanes.length,E=1;E<S;E++){var k=Math.sqrt(this._sigmas[E]*this._sigmas[E]-this._sigmas[E-1]*this._sigmas[E-1]),T=Jm[(S-E-1)%Jm.length];this._blur(e,E-1,E,k,T)}l.autoClear=_}},{key:"_blur",value:function(e,l,_,S,E){var k=this._pingPongRenderTarget;this._halfBlur(e,k,l,_,S,"latitudinal",E),this._halfBlur(k,e,_,_,S,"longitudinal",E)}},{key:"_halfBlur",value:function(e,l,_,S,E,k,T){for(var M=this._renderer,R=this._blurMaterial,I=new Dg(this._lodPlanes[S],R),O=R.uniforms,D=this._sizeLods[_]-1,L=isFinite(E)?Math.PI/(2*D):2*Math.PI/39,U=E/L,B=isFinite(E)?1+Math.floor(3*U):jm,z=[],j=0,G=0;G<jm;++G){var H=G/U,V=Math.exp(-H*H/2);z.push(V),0===G?j+=V:G<B&&(j+=2*V)}for(var W=0;W<z.length;W++)z[W]=z[W]/j;O.envMap.value=e.texture,O.samples.value=B,O.weights.value=z,O.latitudinal.value="latitudinal"===k,T&&(O.poleAxis.value=T);var q=this._lodMax;O.dTheta.value=L,O.mipInt.value=q-_;var X=this._sizeLods[S];_setViewport(l,3*X*(S>q-4?S-q+4:0),4*(this._cubeSize-X),3*X,2*X),M.setRenderTarget(l),M.render(I,Gm)}}])}();function _createRenderTarget(e,l,_){var S=new Fp(e,l,_);return S.texture.mapping=Jd,S.texture.name="PMREM.cubeUv",S.scissorTest=!0,S}function _setViewport(e,l,_,S,E){e.viewport.set(l,_,S,E),e.scissor.set(l,_,S,E)}function _getEquirectMaterial(){return new Fg({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function _getCubemapMaterial(){return new Fg({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function WebGLCubeUVMaps(e){var l=new WeakMap,_=null;function onTextureDispose(e){var _=e.target;_.removeEventListener("dispose",onTextureDispose);var S=l.get(_);void 0!==S&&(l.delete(_),S.dispose())}return{get:function(S){if(S&&S.isTexture){var E=S.mapping,k=303===E||304===E,T=E===Kd||E===Yd;if(k||T){var M=l.get(S),R=void 0!==M?M.texture.pmremVersion:0;if(S.isRenderTargetTexture&&S.pmremVersion!==R)return null===_&&(_=new Zm(e)),(M=k?_.fromEquirectangular(S,M):_.fromCubemap(S,M)).texture.pmremVersion=S.pmremVersion,l.set(S,M),M.texture;if(void 0!==M)return M.texture;var I=S.image;return k&&I&&I.height>0||T&&I&&function(e){for(var l=0,_=6,S=0;S<_;S++)void 0!==e[S]&&l++;return l===_}(I)?(null===_&&(_=new Zm(e)),(M=k?_.fromEquirectangular(S):_.fromCubemap(S)).texture.pmremVersion=S.pmremVersion,l.set(S,M),S.addEventListener("dispose",onTextureDispose),M.texture):null}}return S},dispose:function(){l=new WeakMap,null!==_&&(_.dispose(),_=null)}}}function WebGLExtensions(e){var l={};function getExtension(_){if(void 0!==l[_])return l[_];var S;switch(_){case"WEBGL_depth_texture":S=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":S=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":S=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":S=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:S=e.getExtension(_)}return l[_]=S,S}return{has:function(e){return null!==getExtension(e)},init:function(){getExtension("EXT_color_buffer_float"),getExtension("WEBGL_clip_cull_distance"),getExtension("OES_texture_float_linear"),getExtension("EXT_color_buffer_half_float"),getExtension("WEBGL_multisampled_render_to_texture"),getExtension("WEBGL_render_shared_exponent")},get:function(e){var l=getExtension(e);return null===l&&warnOnce("THREE.WebGLRenderer: "+e+" extension not supported."),l}}}function WebGLGeometries(e,l,_,S){var E={},k=new WeakMap;function onGeometryDispose(e){var T=e.target;for(var M in null!==T.index&&l.remove(T.index),T.attributes)l.remove(T.attributes[M]);T.removeEventListener("dispose",onGeometryDispose),delete E[T.id];var R=k.get(T);R&&(l.remove(R),k.delete(T)),S.releaseStatesOfGeometry(T),!0===T.isInstancedBufferGeometry&&delete T._maxInstanceCount,_.memory.geometries--}function updateWireframeAttribute(e){var _=[],S=e.index,E=e.attributes.position,T=0;if(null!==S){var M=S.array;T=S.version;for(var R=0,I=M.length;R<I;R+=3){var O=M[R+0],D=M[R+1],L=M[R+2];_.push(O,D,D,L,L,O)}}else{if(void 0===E)return;var U=E.array;T=E.version;for(var B=0,z=U.length/3-1;B<z;B+=3){var j=B+0,G=B+1,H=B+2;_.push(j,G,G,H,H,j)}}var V=new(arrayNeedsUint32(_)?fg:dg)(_,1);V.version=T;var W=k.get(e);W&&l.remove(W),k.set(e,V)}return{get:function(e,l){return!0===E[l.id]||(l.addEventListener("dispose",onGeometryDispose),E[l.id]=!0,_.memory.geometries++),l},update:function(_){var S=_.attributes;for(var E in S)l.update(S[E],e.ARRAY_BUFFER)},getWireframeAttribute:function(e){var l=k.get(e);if(l){var _=e.index;null!==_&&l.version<_.version&&updateWireframeAttribute(e)}else updateWireframeAttribute(e);return k.get(e)}}}function WebGLIndexedBufferRenderer(e,l,_){var S,E,k;function renderInstances(l,T,M){0!==M&&(e.drawElementsInstanced(S,T,E,l*k,M),_.update(T,S,M))}this.setMode=function(e){S=e},this.setIndex=function(e){E=e.type,k=e.bytesPerElement},this.render=function(l,T){e.drawElements(S,T,E,l*k),_.update(T,S,1)},this.renderInstances=renderInstances,this.renderMultiDraw=function(e,k,T){if(0!==T){l.get("WEBGL_multi_draw").multiDrawElementsWEBGL(S,k,0,E,e,0,T);for(var M=0,R=0;R<T;R++)M+=k[R];_.update(M,S,1)}},this.renderMultiDrawInstances=function(e,T,M,R){if(0!==M){var I=l.get("WEBGL_multi_draw");if(null===I)for(var O=0;O<e.length;O++)renderInstances(e[O]/k,T[O],R[O]);else{I.multiDrawElementsInstancedWEBGL(S,T,0,E,e,0,R,0,M);for(var D=0,L=0;L<M;L++)D+=T[L]*R[L];_.update(D,S,1)}}}}function WebGLInfo(e){var l={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:l,programs:null,autoReset:!0,reset:function(){l.calls=0,l.triangles=0,l.points=0,l.lines=0},update:function(_,S,E){switch(l.calls++,S){case e.TRIANGLES:l.triangles+=E*(_/3);break;case e.LINES:l.lines+=E*(_/2);break;case e.LINE_STRIP:l.lines+=E*(_-1);break;case e.LINE_LOOP:l.lines+=E*_;break;case e.POINTS:l.points+=E*_}}}}function WebGLMorphtargets(e,l,_){var S=new WeakMap,E=new Lp;return{update:function(k,T,M){var R=k.morphTargetInfluences,I=T.morphAttributes.position||T.morphAttributes.normal||T.morphAttributes.color,O=void 0!==I?I.length:0,D=S.get(T);if(void 0===D||D.count!==O){var _disposeTexture=function(){X.dispose(),S.delete(T),T.removeEventListener("dispose",_disposeTexture)};void 0!==D&&D.texture.dispose();var L=void 0!==T.morphAttributes.position,U=void 0!==T.morphAttributes.normal,B=void 0!==T.morphAttributes.color,z=T.morphAttributes.position||[],j=T.morphAttributes.normal||[],G=T.morphAttributes.color||[],H=0;!0===L&&(H=1),!0===U&&(H=2),!0===B&&(H=3);var V=T.attributes.position.count*H,W=1;V>l.maxTextureSize&&(W=Math.ceil(V/l.maxTextureSize),V=l.maxTextureSize);var q=new Float32Array(V*W*4*O),X=new Np(q,V,W,O);X.type=df,X.needsUpdate=!0;for(var K=4*H,Y=0;Y<O;Y++)for(var J=z[Y],Q=j[Y],Z=G[Y],$=V*W*4*Y,ee=0;ee<J.count;ee++){var te=ee*K;!0===L&&(E.fromBufferAttribute(J,ee),q[$+te+0]=E.x,q[$+te+1]=E.y,q[$+te+2]=E.z,q[$+te+3]=0),!0===U&&(E.fromBufferAttribute(Q,ee),q[$+te+4]=E.x,q[$+te+5]=E.y,q[$+te+6]=E.z,q[$+te+7]=0),!0===B&&(E.fromBufferAttribute(Z,ee),q[$+te+8]=E.x,q[$+te+9]=E.y,q[$+te+10]=E.z,q[$+te+11]=4===Z.itemSize?E.w:1)}D={count:O,texture:X,size:new mp(V,W)},S.set(T,D),T.addEventListener("dispose",_disposeTexture)}if(!0===k.isInstancedMesh&&null!==k.morphTexture)M.getUniforms().setValue(e,"morphTexture",k.morphTexture,_);else{for(var ne=0,re=0;re<R.length;re++)ne+=R[re];var ie=T.morphTargetsRelative?1:1-ne;M.getUniforms().setValue(e,"morphTargetBaseInfluence",ie),M.getUniforms().setValue(e,"morphTargetInfluences",R)}M.getUniforms().setValue(e,"morphTargetsTexture",D.texture,_),M.getUniforms().setValue(e,"morphTargetsTextureSize",D.size)}}}function WebGLObjects(e,l,_,S){var E=new WeakMap;function onInstancedMeshDispose(e){var l=e.target;l.removeEventListener("dispose",onInstancedMeshDispose),_.remove(l.instanceMatrix),null!==l.instanceColor&&_.remove(l.instanceColor)}return{update:function(k){var T=S.render.frame,M=k.geometry,R=l.get(k,M);if(E.get(R)!==T&&(l.update(R),E.set(R,T)),k.isInstancedMesh&&(!1===k.hasEventListener("dispose",onInstancedMeshDispose)&&k.addEventListener("dispose",onInstancedMeshDispose),E.get(k)!==T&&(_.update(k.instanceMatrix,e.ARRAY_BUFFER),null!==k.instanceColor&&_.update(k.instanceColor,e.ARRAY_BUFFER),E.set(k,T))),k.isSkinnedMesh){var I=k.skeleton;E.get(I)!==T&&(I.update(),E.set(I,T))}return R},dispose:function(){E=new WeakMap}}}var $m=new Dp,ey=new sm(1,1),ty=new Np,ny=new Bp,ry=new Wg,iy=[],ay=[],oy=new Float32Array(16),sy=new Float32Array(9),uy=new Float32Array(4);function flatten(e,l,_){var S=e[0];if(S<=0||S>0)return e;var E=l*_,k=iy[E];if(void 0===k&&(k=new Float32Array(E),iy[E]=k),0!==l){S.toArray(k,0);for(var T=1,M=0;T!==l;++T)M+=_,e[T].toArray(k,M)}return k}function arraysEqual(e,l){if(e.length!==l.length)return!1;for(var _=0,S=e.length;_<S;_++)if(e[_]!==l[_])return!1;return!0}function copyArray(e,l){for(var _=0,S=l.length;_<S;_++)e[_]=l[_]}function allocTexUnits(e,l){var _=ay[l];void 0===_&&(_=new Int32Array(l),ay[l]=_);for(var S=0;S!==l;++S)_[S]=e.allocateTextureUnit();return _}function setValueV1f(e,l){var _=this.cache;_[0]!==l&&(e.uniform1f(this.addr,l),_[0]=l)}function setValueV2f(e,l){var _=this.cache;if(void 0!==l.x)_[0]===l.x&&_[1]===l.y||(e.uniform2f(this.addr,l.x,l.y),_[0]=l.x,_[1]=l.y);else{if(arraysEqual(_,l))return;e.uniform2fv(this.addr,l),copyArray(_,l)}}function setValueV3f(e,l){var _=this.cache;if(void 0!==l.x)_[0]===l.x&&_[1]===l.y&&_[2]===l.z||(e.uniform3f(this.addr,l.x,l.y,l.z),_[0]=l.x,_[1]=l.y,_[2]=l.z);else if(void 0!==l.r)_[0]===l.r&&_[1]===l.g&&_[2]===l.b||(e.uniform3f(this.addr,l.r,l.g,l.b),_[0]=l.r,_[1]=l.g,_[2]=l.b);else{if(arraysEqual(_,l))return;e.uniform3fv(this.addr,l),copyArray(_,l)}}function setValueV4f(e,l){var _=this.cache;if(void 0!==l.x)_[0]===l.x&&_[1]===l.y&&_[2]===l.z&&_[3]===l.w||(e.uniform4f(this.addr,l.x,l.y,l.z,l.w),_[0]=l.x,_[1]=l.y,_[2]=l.z,_[3]=l.w);else{if(arraysEqual(_,l))return;e.uniform4fv(this.addr,l),copyArray(_,l)}}function setValueM2(e,l){var _=this.cache,S=l.elements;if(void 0===S){if(arraysEqual(_,l))return;e.uniformMatrix2fv(this.addr,!1,l),copyArray(_,l)}else{if(arraysEqual(_,S))return;uy.set(S),e.uniformMatrix2fv(this.addr,!1,uy),copyArray(_,S)}}function setValueM3(e,l){var _=this.cache,S=l.elements;if(void 0===S){if(arraysEqual(_,l))return;e.uniformMatrix3fv(this.addr,!1,l),copyArray(_,l)}else{if(arraysEqual(_,S))return;sy.set(S),e.uniformMatrix3fv(this.addr,!1,sy),copyArray(_,S)}}function setValueM4(e,l){var _=this.cache,S=l.elements;if(void 0===S){if(arraysEqual(_,l))return;e.uniformMatrix4fv(this.addr,!1,l),copyArray(_,l)}else{if(arraysEqual(_,S))return;oy.set(S),e.uniformMatrix4fv(this.addr,!1,oy),copyArray(_,S)}}function setValueV1i(e,l){var _=this.cache;_[0]!==l&&(e.uniform1i(this.addr,l),_[0]=l)}function setValueV2i(e,l){var _=this.cache;if(void 0!==l.x)_[0]===l.x&&_[1]===l.y||(e.uniform2i(this.addr,l.x,l.y),_[0]=l.x,_[1]=l.y);else{if(arraysEqual(_,l))return;e.uniform2iv(this.addr,l),copyArray(_,l)}}function setValueV3i(e,l){var _=this.cache;if(void 0!==l.x)_[0]===l.x&&_[1]===l.y&&_[2]===l.z||(e.uniform3i(this.addr,l.x,l.y,l.z),_[0]=l.x,_[1]=l.y,_[2]=l.z);else{if(arraysEqual(_,l))return;e.uniform3iv(this.addr,l),copyArray(_,l)}}function setValueV4i(e,l){var _=this.cache;if(void 0!==l.x)_[0]===l.x&&_[1]===l.y&&_[2]===l.z&&_[3]===l.w||(e.uniform4i(this.addr,l.x,l.y,l.z,l.w),_[0]=l.x,_[1]=l.y,_[2]=l.z,_[3]=l.w);else{if(arraysEqual(_,l))return;e.uniform4iv(this.addr,l),copyArray(_,l)}}function setValueV1ui(e,l){var _=this.cache;_[0]!==l&&(e.uniform1ui(this.addr,l),_[0]=l)}function setValueV2ui(e,l){var _=this.cache;if(void 0!==l.x)_[0]===l.x&&_[1]===l.y||(e.uniform2ui(this.addr,l.x,l.y),_[0]=l.x,_[1]=l.y);else{if(arraysEqual(_,l))return;e.uniform2uiv(this.addr,l),copyArray(_,l)}}function setValueV3ui(e,l){var _=this.cache;if(void 0!==l.x)_[0]===l.x&&_[1]===l.y&&_[2]===l.z||(e.uniform3ui(this.addr,l.x,l.y,l.z),_[0]=l.x,_[1]=l.y,_[2]=l.z);else{if(arraysEqual(_,l))return;e.uniform3uiv(this.addr,l),copyArray(_,l)}}function setValueV4ui(e,l){var _=this.cache;if(void 0!==l.x)_[0]===l.x&&_[1]===l.y&&_[2]===l.z&&_[3]===l.w||(e.uniform4ui(this.addr,l.x,l.y,l.z,l.w),_[0]=l.x,_[1]=l.y,_[2]=l.z,_[3]=l.w);else{if(arraysEqual(_,l))return;e.uniform4uiv(this.addr,l),copyArray(_,l)}}function setValueT1(e,l,_){var S,E=this.cache,k=_.allocateTextureUnit();E[0]!==k&&(e.uniform1i(this.addr,k),E[0]=k),this.type===e.SAMPLER_2D_SHADOW?(ey.compareFunction=515,S=ey):S=$m,_.setTexture2D(l||S,k)}function setValueT3D1(e,l,_){var S=this.cache,E=_.allocateTextureUnit();S[0]!==E&&(e.uniform1i(this.addr,E),S[0]=E),_.setTexture3D(l||ny,E)}function setValueT6(e,l,_){var S=this.cache,E=_.allocateTextureUnit();S[0]!==E&&(e.uniform1i(this.addr,E),S[0]=E),_.setTextureCube(l||ry,E)}function setValueT2DArray1(e,l,_){var S=this.cache,E=_.allocateTextureUnit();S[0]!==E&&(e.uniform1i(this.addr,E),S[0]=E),_.setTexture2DArray(l||ty,E)}function setValueV1fArray(e,l){e.uniform1fv(this.addr,l)}function setValueV2fArray(e,l){var _=flatten(l,this.size,2);e.uniform2fv(this.addr,_)}function setValueV3fArray(e,l){var _=flatten(l,this.size,3);e.uniform3fv(this.addr,_)}function setValueV4fArray(e,l){var _=flatten(l,this.size,4);e.uniform4fv(this.addr,_)}function setValueM2Array(e,l){var _=flatten(l,this.size,4);e.uniformMatrix2fv(this.addr,!1,_)}function setValueM3Array(e,l){var _=flatten(l,this.size,9);e.uniformMatrix3fv(this.addr,!1,_)}function setValueM4Array(e,l){var _=flatten(l,this.size,16);e.uniformMatrix4fv(this.addr,!1,_)}function setValueV1iArray(e,l){e.uniform1iv(this.addr,l)}function setValueV2iArray(e,l){e.uniform2iv(this.addr,l)}function setValueV3iArray(e,l){e.uniform3iv(this.addr,l)}function setValueV4iArray(e,l){e.uniform4iv(this.addr,l)}function setValueV1uiArray(e,l){e.uniform1uiv(this.addr,l)}function setValueV2uiArray(e,l){e.uniform2uiv(this.addr,l)}function setValueV3uiArray(e,l){e.uniform3uiv(this.addr,l)}function setValueV4uiArray(e,l){e.uniform4uiv(this.addr,l)}function setValueT1Array(e,l,_){var S=this.cache,E=l.length,k=allocTexUnits(_,E);arraysEqual(S,k)||(e.uniform1iv(this.addr,k),copyArray(S,k));for(var T=0;T!==E;++T)_.setTexture2D(l[T]||$m,k[T])}function setValueT3DArray(e,l,_){var S=this.cache,E=l.length,k=allocTexUnits(_,E);arraysEqual(S,k)||(e.uniform1iv(this.addr,k),copyArray(S,k));for(var T=0;T!==E;++T)_.setTexture3D(l[T]||ny,k[T])}function setValueT6Array(e,l,_){var S=this.cache,E=l.length,k=allocTexUnits(_,E);arraysEqual(S,k)||(e.uniform1iv(this.addr,k),copyArray(S,k));for(var T=0;T!==E;++T)_.setTextureCube(l[T]||ry,k[T])}function setValueT2DArrayArray(e,l,_){var S=this.cache,E=l.length,k=allocTexUnits(_,E);arraysEqual(S,k)||(e.uniform1iv(this.addr,k),copyArray(S,k));for(var T=0;T!==E;++T)_.setTexture2DArray(l[T]||ty,k[T])}var ly=_createClass3(function SingleUniform(e,l,_){_classCallCheck3(this,SingleUniform),this.id=e,this.addr=_,this.cache=[],this.type=l.type,this.setValue=function(e){switch(e){case 5126:return setValueV1f;case 35664:return setValueV2f;case 35665:return setValueV3f;case 35666:return setValueV4f;case 35674:return setValueM2;case 35675:return setValueM3;case 35676:return setValueM4;case 5124:case 35670:return setValueV1i;case 35667:case 35671:return setValueV2i;case 35668:case 35672:return setValueV3i;case 35669:case 35673:return setValueV4i;case 5125:return setValueV1ui;case 36294:return setValueV2ui;case 36295:return setValueV3ui;case 36296:return setValueV4ui;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1;case 35679:case 36299:case 36307:return setValueT3D1;case 35680:case 36300:case 36308:case 36293:return setValueT6;case 36289:case 36303:case 36311:case 36292:return setValueT2DArray1}}(l.type)}),cy=_createClass3(function PureArrayUniform(e,l,_){_classCallCheck3(this,PureArrayUniform),this.id=e,this.addr=_,this.cache=[],this.type=l.type,this.size=l.size,this.setValue=function(e){switch(e){case 5126:return setValueV1fArray;case 35664:return setValueV2fArray;case 35665:return setValueV3fArray;case 35666:return setValueV4fArray;case 35674:return setValueM2Array;case 35675:return setValueM3Array;case 35676:return setValueM4Array;case 5124:case 35670:return setValueV1iArray;case 35667:case 35671:return setValueV2iArray;case 35668:case 35672:return setValueV3iArray;case 35669:case 35673:return setValueV4iArray;case 5125:return setValueV1uiArray;case 36294:return setValueV2uiArray;case 36295:return setValueV3uiArray;case 36296:return setValueV4uiArray;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1Array;case 35679:case 36299:case 36307:return setValueT3DArray;case 35680:case 36300:case 36308:case 36293:return setValueT6Array;case 36289:case 36303:case 36311:case 36292:return setValueT2DArrayArray}}(l.type)}),hy=function(){return _createClass3(function StructuredUniform(e){_classCallCheck3(this,StructuredUniform),this.id=e,this.seq=[],this.map={}},[{key:"setValue",value:function(e,l,_){for(var S=this.seq,E=0,k=S.length;E!==k;++E){var T=S[E];T.setValue(e,l[T.id],_)}}}])}(),dy=/(\w+)(\])?(\[|\.)?/g;function addUniform(e,l){e.seq.push(l),e.map[l.id]=l}function parseUniform(e,l,_){var S=e.name,E=S.length;for(dy.lastIndex=0;;){var k=dy.exec(S),T=dy.lastIndex,M=k[1],R="]"===k[2],I=k[3];if(R&&(M|=0),void 0===I||"["===I&&T+2===E){addUniform(_,void 0===I?new ly(M,e,l):new cy(M,e,l));break}var O=_.map[M];void 0===O&&addUniform(_,O=new hy(M)),_=O}}var fy=function(){return _createClass3(function WebGLUniforms(e,l){_classCallCheck3(this,WebGLUniforms),this.seq=[],this.map={};for(var _=e.getProgramParameter(l,e.ACTIVE_UNIFORMS),S=0;S<_;++S){var E=e.getActiveUniform(l,S);parseUniform(E,e.getUniformLocation(l,E.name),this)}},[{key:"setValue",value:function(e,l,_,S){var E=this.map[l];void 0!==E&&E.setValue(e,_,S)}},{key:"setOptional",value:function(e,l,_){var S=l[_];void 0!==S&&this.setValue(e,_,S)}}],[{key:"upload",value:function(e,l,_,S){for(var E=0,k=l.length;E!==k;++E){var T=l[E],M=_[T.id];!1!==M.needsUpdate&&T.setValue(e,M.value,S)}}},{key:"seqWithValue",value:function(e,l){for(var _=[],S=0,E=e.length;S!==E;++S){var k=e[S];k.id in l&&_.push(k)}return _}}])}();function WebGLShader(e,l,_){var S=e.createShader(l);return e.shaderSource(S,_),e.compileShader(S),S}var py=0;var vy=new wp;function getShaderErrors(e,l,_){var S=e.getShaderParameter(l,e.COMPILE_STATUS),E=(e.getShaderInfoLog(l)||"").trim();if(S&&""===E)return"";var k=/ERROR: 0:(\d+)/.exec(E);if(k){var T=parseInt(k[1]);return _.toUpperCase()+"\n\n"+E+"\n\n"+function(e,l){for(var _=e.split("\n"),S=[],E=Math.max(l-6,0),k=Math.min(l+6,_.length),T=E;T<k;T++){var M=T+1;S.push("".concat(M===l?">":" "," ").concat(M,": ").concat(_[T]))}return S.join("\n")}(e.getShaderSource(l),T)}return E}function getTexelEncodingFunction(e,l){var _=function(e){Tp._getMatrix(vy,Tp.workingColorSpace,e);var l="mat3( ".concat(vy.elements.map(function(e){return e.toFixed(4)})," )");switch(Tp.getTransfer(e)){case sp:return[l,"LinearTransferOETF"];case up:return[l,"sRGBTransferOETF"];default:return[l,"LinearTransferOETF"]}}(l);return["vec4 ".concat(e,"( vec4 value ) {"),"\treturn ".concat(_[1],"( vec4( value.rgb * ").concat(_[0],", value.a ) );"),"}"].join("\n")}function getToneMappingFunction(e,l){var _;switch(l){case 1:default:_="Linear";break;case 2:_="Reinhard";break;case 3:_="Cineon";break;case 4:_="ACESFilmic";break;case 6:_="AgX";break;case 7:_="Neutral";break;case 5:_="Custom"}return"vec3 "+e+"( vec3 color ) { return "+_+"ToneMapping( color ); }"}var gy=new _p;function getLuminanceFunction(){Tp.getLuminanceCoefficients(gy);var e=gy.x.toFixed(4),l=gy.y.toFixed(4),_=gy.z.toFixed(4);return["float luminance( const in vec3 rgb ) {","\tconst vec3 weights = vec3( ".concat(e,", ").concat(l,", ").concat(_," );"),"\treturn dot( weights, rgb );","}"].join("\n")}function filterEmptyLine(e){return""!==e}function replaceLightNums(e,l){var _=l.numSpotLightShadows+l.numSpotLightMaps-l.numSpotLightShadowsWithMaps;return e.replace(/NUM_DIR_LIGHTS/g,l.numDirLights).replace(/NUM_SPOT_LIGHTS/g,l.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,l.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,_).replace(/NUM_RECT_AREA_LIGHTS/g,l.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,l.numPointLights).replace(/NUM_HEMI_LIGHTS/g,l.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,l.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,l.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,l.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,l.numPointLightShadows)}function replaceClippingPlaneNums(e,l){return e.replace(/NUM_CLIPPING_PLANES/g,l.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,l.numClippingPlanes-l.numClipIntersection)}var my=/^[ \t]*#include +<([\w\d./]+)>/gm;function resolveIncludes(e){return e.replace(my,includeReplacer)}var yy=new Map;function includeReplacer(e,l){var _=Dm[l];if(void 0===_){var S=yy.get(l);if(void 0===S)throw new Error("Can not resolve #include <"+l+">");_=Dm[S]}return resolveIncludes(_)}var _y=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function unrollLoops(e){return e.replace(_y,loopReplacer)}function loopReplacer(e,l,_,S){for(var E="",k=parseInt(l);k<parseInt(_);k++)E+=S.replace(/\[\s*i\s*\]/g,"[ "+k+" ]").replace(/UNROLLED_LOOP_INDEX/g,k);return E}function generatePrecision(e){var l="precision ".concat(e.precision," float;\n\tprecision ").concat(e.precision," int;\n\tprecision ").concat(e.precision," sampler2D;\n\tprecision ").concat(e.precision," samplerCube;\n\tprecision ").concat(e.precision," sampler3D;\n\tprecision ").concat(e.precision," sampler2DArray;\n\tprecision ").concat(e.precision," sampler2DShadow;\n\tprecision ").concat(e.precision," samplerCubeShadow;\n\tprecision ").concat(e.precision," sampler2DArrayShadow;\n\tprecision ").concat(e.precision," isampler2D;\n\tprecision ").concat(e.precision," isampler3D;\n\tprecision ").concat(e.precision," isamplerCube;\n\tprecision ").concat(e.precision," isampler2DArray;\n\tprecision ").concat(e.precision," usampler2D;\n\tprecision ").concat(e.precision," usampler3D;\n\tprecision ").concat(e.precision," usamplerCube;\n\tprecision ").concat(e.precision," usampler2DArray;\n\t");return"highp"===e.precision?l+="\n#define HIGH_PRECISION":"mediump"===e.precision?l+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(l+="\n#define LOW_PRECISION"),l}function WebGLProgram(e,l,_,S){var E,k,T=e.getContext(),M=_.defines,R=_.vertexShader,I=_.fragmentShader,O=function(e){var l="SHADOWMAP_TYPE_BASIC";return 1===e.shadowMapType?l="SHADOWMAP_TYPE_PCF":2===e.shadowMapType?l="SHADOWMAP_TYPE_PCF_SOFT":3===e.shadowMapType&&(l="SHADOWMAP_TYPE_VSM"),l}(_),D=function(e){var l="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case Kd:case Yd:l="ENVMAP_TYPE_CUBE";break;case Jd:l="ENVMAP_TYPE_CUBE_UV"}return l}(_),L=function(e){var l="ENVMAP_MODE_REFLECTION";e.envMap&&e.envMapMode===Yd&&(l="ENVMAP_MODE_REFRACTION");return l}(_),U=function(e){var l="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case 0:l="ENVMAP_BLENDING_MULTIPLY";break;case 1:l="ENVMAP_BLENDING_MIX";break;case 2:l="ENVMAP_BLENDING_ADD"}return l}(_),B=function(e){var l=e.envMapCubeUVHeight;if(null===l)return null;var _=Math.log2(l)-2,S=1/l;return{texelWidth:1/(3*Math.max(Math.pow(2,_),112)),texelHeight:S,maxMip:_}}(_),z=function(e){return[e.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",e.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(filterEmptyLine).join("\n")}(_),j=function(e){var l=[];for(var _ in e){var S=e[_];!1!==S&&l.push("#define "+_+" "+S)}return l.join("\n")}(M),G=T.createProgram(),H=_.glslVersion?"#version "+_.glslVersion+"\n":"";_.isRawShaderMaterial?((E=["#define SHADER_TYPE "+_.shaderType,"#define SHADER_NAME "+_.shaderName,j].filter(filterEmptyLine).join("\n")).length>0&&(E+="\n"),(k=["#define SHADER_TYPE "+_.shaderType,"#define SHADER_NAME "+_.shaderName,j].filter(filterEmptyLine).join("\n")).length>0&&(k+="\n")):(E=[generatePrecision(_),"#define SHADER_TYPE "+_.shaderType,"#define SHADER_NAME "+_.shaderName,j,_.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",_.batching?"#define USE_BATCHING":"",_.batchingColor?"#define USE_BATCHING_COLOR":"",_.instancing?"#define USE_INSTANCING":"",_.instancingColor?"#define USE_INSTANCING_COLOR":"",_.instancingMorph?"#define USE_INSTANCING_MORPH":"",_.useFog&&_.fog?"#define USE_FOG":"",_.useFog&&_.fogExp2?"#define FOG_EXP2":"",_.map?"#define USE_MAP":"",_.envMap?"#define USE_ENVMAP":"",_.envMap?"#define "+L:"",_.lightMap?"#define USE_LIGHTMAP":"",_.aoMap?"#define USE_AOMAP":"",_.bumpMap?"#define USE_BUMPMAP":"",_.normalMap?"#define USE_NORMALMAP":"",_.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",_.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",_.displacementMap?"#define USE_DISPLACEMENTMAP":"",_.emissiveMap?"#define USE_EMISSIVEMAP":"",_.anisotropy?"#define USE_ANISOTROPY":"",_.anisotropyMap?"#define USE_ANISOTROPYMAP":"",_.clearcoatMap?"#define USE_CLEARCOATMAP":"",_.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",_.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",_.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",_.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",_.specularMap?"#define USE_SPECULARMAP":"",_.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",_.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",_.roughnessMap?"#define USE_ROUGHNESSMAP":"",_.metalnessMap?"#define USE_METALNESSMAP":"",_.alphaMap?"#define USE_ALPHAMAP":"",_.alphaHash?"#define USE_ALPHAHASH":"",_.transmission?"#define USE_TRANSMISSION":"",_.transmissionMap?"#define USE_TRANSMISSIONMAP":"",_.thicknessMap?"#define USE_THICKNESSMAP":"",_.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",_.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",_.mapUv?"#define MAP_UV "+_.mapUv:"",_.alphaMapUv?"#define ALPHAMAP_UV "+_.alphaMapUv:"",_.lightMapUv?"#define LIGHTMAP_UV "+_.lightMapUv:"",_.aoMapUv?"#define AOMAP_UV "+_.aoMapUv:"",_.emissiveMapUv?"#define EMISSIVEMAP_UV "+_.emissiveMapUv:"",_.bumpMapUv?"#define BUMPMAP_UV "+_.bumpMapUv:"",_.normalMapUv?"#define NORMALMAP_UV "+_.normalMapUv:"",_.displacementMapUv?"#define DISPLACEMENTMAP_UV "+_.displacementMapUv:"",_.metalnessMapUv?"#define METALNESSMAP_UV "+_.metalnessMapUv:"",_.roughnessMapUv?"#define ROUGHNESSMAP_UV "+_.roughnessMapUv:"",_.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+_.anisotropyMapUv:"",_.clearcoatMapUv?"#define CLEARCOATMAP_UV "+_.clearcoatMapUv:"",_.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+_.clearcoatNormalMapUv:"",_.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+_.clearcoatRoughnessMapUv:"",_.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+_.iridescenceMapUv:"",_.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+_.iridescenceThicknessMapUv:"",_.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+_.sheenColorMapUv:"",_.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+_.sheenRoughnessMapUv:"",_.specularMapUv?"#define SPECULARMAP_UV "+_.specularMapUv:"",_.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+_.specularColorMapUv:"",_.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+_.specularIntensityMapUv:"",_.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+_.transmissionMapUv:"",_.thicknessMapUv?"#define THICKNESSMAP_UV "+_.thicknessMapUv:"",_.vertexTangents&&!1===_.flatShading?"#define USE_TANGENT":"",_.vertexColors?"#define USE_COLOR":"",_.vertexAlphas?"#define USE_COLOR_ALPHA":"",_.vertexUv1s?"#define USE_UV1":"",_.vertexUv2s?"#define USE_UV2":"",_.vertexUv3s?"#define USE_UV3":"",_.pointsUvs?"#define USE_POINTS_UV":"",_.flatShading?"#define FLAT_SHADED":"",_.skinning?"#define USE_SKINNING":"",_.morphTargets?"#define USE_MORPHTARGETS":"",_.morphNormals&&!1===_.flatShading?"#define USE_MORPHNORMALS":"",_.morphColors?"#define USE_MORPHCOLORS":"",_.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+_.morphTextureStride:"",_.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+_.morphTargetsCount:"",_.doubleSided?"#define DOUBLE_SIDED":"",_.flipSided?"#define FLIP_SIDED":"",_.shadowMapEnabled?"#define USE_SHADOWMAP":"",_.shadowMapEnabled?"#define "+O:"",_.sizeAttenuation?"#define USE_SIZEATTENUATION":"",_.numLightProbes>0?"#define USE_LIGHT_PROBES":"",_.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",_.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","\tuniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","\tattribute vec2 uv1;","#endif","#ifdef USE_UV2","\tattribute vec2 uv2;","#endif","#ifdef USE_UV3","\tattribute vec2 uv3;","#endif","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(filterEmptyLine).join("\n"),k=[generatePrecision(_),"#define SHADER_TYPE "+_.shaderType,"#define SHADER_NAME "+_.shaderName,j,_.useFog&&_.fog?"#define USE_FOG":"",_.useFog&&_.fogExp2?"#define FOG_EXP2":"",_.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",_.map?"#define USE_MAP":"",_.matcap?"#define USE_MATCAP":"",_.envMap?"#define USE_ENVMAP":"",_.envMap?"#define "+D:"",_.envMap?"#define "+L:"",_.envMap?"#define "+U:"",B?"#define CUBEUV_TEXEL_WIDTH "+B.texelWidth:"",B?"#define CUBEUV_TEXEL_HEIGHT "+B.texelHeight:"",B?"#define CUBEUV_MAX_MIP "+B.maxMip+".0":"",_.lightMap?"#define USE_LIGHTMAP":"",_.aoMap?"#define USE_AOMAP":"",_.bumpMap?"#define USE_BUMPMAP":"",_.normalMap?"#define USE_NORMALMAP":"",_.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",_.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",_.emissiveMap?"#define USE_EMISSIVEMAP":"",_.anisotropy?"#define USE_ANISOTROPY":"",_.anisotropyMap?"#define USE_ANISOTROPYMAP":"",_.clearcoat?"#define USE_CLEARCOAT":"",_.clearcoatMap?"#define USE_CLEARCOATMAP":"",_.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",_.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",_.dispersion?"#define USE_DISPERSION":"",_.iridescence?"#define USE_IRIDESCENCE":"",_.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",_.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",_.specularMap?"#define USE_SPECULARMAP":"",_.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",_.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",_.roughnessMap?"#define USE_ROUGHNESSMAP":"",_.metalnessMap?"#define USE_METALNESSMAP":"",_.alphaMap?"#define USE_ALPHAMAP":"",_.alphaTest?"#define USE_ALPHATEST":"",_.alphaHash?"#define USE_ALPHAHASH":"",_.sheen?"#define USE_SHEEN":"",_.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",_.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",_.transmission?"#define USE_TRANSMISSION":"",_.transmissionMap?"#define USE_TRANSMISSIONMAP":"",_.thicknessMap?"#define USE_THICKNESSMAP":"",_.vertexTangents&&!1===_.flatShading?"#define USE_TANGENT":"",_.vertexColors||_.instancingColor||_.batchingColor?"#define USE_COLOR":"",_.vertexAlphas?"#define USE_COLOR_ALPHA":"",_.vertexUv1s?"#define USE_UV1":"",_.vertexUv2s?"#define USE_UV2":"",_.vertexUv3s?"#define USE_UV3":"",_.pointsUvs?"#define USE_POINTS_UV":"",_.gradientMap?"#define USE_GRADIENTMAP":"",_.flatShading?"#define FLAT_SHADED":"",_.doubleSided?"#define DOUBLE_SIDED":"",_.flipSided?"#define FLIP_SIDED":"",_.shadowMapEnabled?"#define USE_SHADOWMAP":"",_.shadowMapEnabled?"#define "+O:"",_.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",_.numLightProbes>0?"#define USE_LIGHT_PROBES":"",_.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",_.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",_.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",_.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==_.toneMapping?"#define TONE_MAPPING":"",0!==_.toneMapping?Dm.tonemapping_pars_fragment:"",0!==_.toneMapping?getToneMappingFunction("toneMapping",_.toneMapping):"",_.dithering?"#define DITHERING":"",_.opaque?"#define OPAQUE":"",Dm.colorspace_pars_fragment,getTexelEncodingFunction("linearToOutputTexel",_.outputColorSpace),getLuminanceFunction(),_.useDepthPacking?"#define DEPTH_PACKING "+_.depthPacking:"","\n"].filter(filterEmptyLine).join("\n")),R=replaceClippingPlaneNums(R=replaceLightNums(R=resolveIncludes(R),_),_),I=replaceClippingPlaneNums(I=replaceLightNums(I=resolveIncludes(I),_),_),R=unrollLoops(R),I=unrollLoops(I),!0!==_.isRawShaderMaterial&&(H="#version 300 es\n",E=[z,"#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+E,k=["#define varying in",_.glslVersion===cp?"":"layout(location = 0) out highp vec4 pc_fragColor;",_.glslVersion===cp?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+k);var V,W,q=H+E+R,X=H+k+I,K=WebGLShader(T,T.VERTEX_SHADER,q),Y=WebGLShader(T,T.FRAGMENT_SHADER,X);function onFirstUse(l){if(e.debug.checkShaderErrors){var _=T.getProgramInfoLog(G)||"",S=T.getShaderInfoLog(K)||"",M=T.getShaderInfoLog(Y)||"",R=_.trim(),I=S.trim(),O=M.trim(),D=!0,L=!0;if(!1===T.getProgramParameter(G,T.LINK_STATUS))if(D=!1,"function"==typeof e.debug.onShaderError)e.debug.onShaderError(T,G,K,Y);else getShaderErrors(T,K,"vertex"),getShaderErrors(T,Y,"fragment");else""!==R||""!==I&&""!==O||(L=!1);L&&(l.diagnostics={runnable:D,programLog:R,vertexShader:{log:I,prefix:E},fragmentShader:{log:O,prefix:k}})}T.deleteShader(K),T.deleteShader(Y),V=new fy(T,G),W=function(e,l){for(var _={},S=e.getProgramParameter(l,e.ACTIVE_ATTRIBUTES),E=0;E<S;E++){var k=e.getActiveAttrib(l,E),T=k.name,M=1;k.type===e.FLOAT_MAT2&&(M=2),k.type===e.FLOAT_MAT3&&(M=3),k.type===e.FLOAT_MAT4&&(M=4),_[T]={type:k.type,location:e.getAttribLocation(l,T),locationSize:M}}return _}(T,G)}T.attachShader(G,K),T.attachShader(G,Y),void 0!==_.index0AttributeName?T.bindAttribLocation(G,0,_.index0AttributeName):!0===_.morphTargets&&T.bindAttribLocation(G,0,"position"),T.linkProgram(G),this.getUniforms=function(){return void 0===V&&onFirstUse(this),V},this.getAttributes=function(){return void 0===W&&onFirstUse(this),W};var J=!1===_.rendererExtensionParallelShaderCompile;return this.isReady=function(){return!1===J&&(J=T.getProgramParameter(G,37297)),J},this.destroy=function(){S.releaseStatesOfProgram(this),T.deleteProgram(G),this.program=void 0},this.type=_.shaderType,this.name=_.shaderName,this.id=py++,this.cacheKey=l,this.usedTimes=1,this.program=G,this.vertexShader=K,this.fragmentShader=Y,this}var by=0,Sy=function(){return _createClass3(function WebGLShaderCache(){_classCallCheck3(this,WebGLShaderCache),this.shaderCache=new Map,this.materialCache=new Map},[{key:"update",value:function(e){var l=e.vertexShader,_=e.fragmentShader,S=this._getShaderStage(l),E=this._getShaderStage(_),k=this._getShaderCacheForMaterial(e);return!1===k.has(S)&&(k.add(S),S.usedTimes++),!1===k.has(E)&&(k.add(E),E.usedTimes++),this}},{key:"remove",value:function(e){var l,_=_createForOfIteratorHelper2(this.materialCache.get(e));try{for(_.s();!(l=_.n()).done;){var S=l.value;S.usedTimes--,0===S.usedTimes&&this.shaderCache.delete(S.code)}}catch(E){_.e(E)}finally{_.f()}return this.materialCache.delete(e),this}},{key:"getVertexShaderID",value:function(e){return this._getShaderStage(e.vertexShader).id}},{key:"getFragmentShaderID",value:function(e){return this._getShaderStage(e.fragmentShader).id}},{key:"dispose",value:function(){this.shaderCache.clear(),this.materialCache.clear()}},{key:"_getShaderCacheForMaterial",value:function(e){var l=this.materialCache,_=l.get(e);return void 0===_&&(_=new Set,l.set(e,_)),_}},{key:"_getShaderStage",value:function(e){var l=this.shaderCache,_=l.get(e);return void 0===_&&(_=new wy(e),l.set(e,_)),_}}])}(),wy=_createClass3(function WebGLShaderStage(e){_classCallCheck3(this,WebGLShaderStage),this.id=by++,this.code=e,this.usedTimes=0});function WebGLPrograms(e,l,_,S,E,k,T){var M=new xv,R=new Sy,I=new Set,O=[],D=E.logarithmicDepthBuffer,L=E.vertexTextures,U=E.precision,B={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function getChannel(e){return I.add(e),0===e?"uv":"uv".concat(e)}return{getParameters:function(k,M,O,z,j){var G=z.fog,H=j.geometry,V=k.isMeshStandardMaterial?z.environment:null,W=(k.isMeshStandardMaterial?_:l).get(k.envMap||V),q=W&&W.mapping===Jd?W.image.height:null,X=B[k.type];null!==k.precision&&(U=E.getMaxPrecision(k.precision),k.precision);var K,Y,J,Q,Z=H.morphAttributes.position||H.morphAttributes.normal||H.morphAttributes.color,$=void 0!==Z?Z.length:0,ee=0;if(void 0!==H.morphAttributes.position&&(ee=1),void 0!==H.morphAttributes.normal&&(ee=2),void 0!==H.morphAttributes.color&&(ee=3),X){var te=Um[X];K=te.vertexShader,Y=te.fragmentShader}else K=k.vertexShader,Y=k.fragmentShader,R.update(k),J=R.getVertexShaderID(k),Q=R.getFragmentShaderID(k);var ne=e.getRenderTarget(),re=e.state.buffers.depth.getReversed(),ie=!0===j.isInstancedMesh,ae=!0===j.isBatchedMesh,oe=!!k.map,se=!!k.matcap,ue=!!W,le=!!k.aoMap,ce=!!k.lightMap,he=!!k.bumpMap,de=!!k.normalMap,fe=!!k.displacementMap,pe=!!k.emissiveMap,ve=!!k.metalnessMap,ge=!!k.roughnessMap,me=k.anisotropy>0,ye=k.clearcoat>0,_e=k.dispersion>0,be=k.iridescence>0,Se=k.sheen>0,we=k.transmission>0,xe=me&&!!k.anisotropyMap,Ee=ye&&!!k.clearcoatMap,ke=ye&&!!k.clearcoatNormalMap,Ae=ye&&!!k.clearcoatRoughnessMap,Ce=be&&!!k.iridescenceMap,Te=be&&!!k.iridescenceThicknessMap,Me=Se&&!!k.sheenColorMap,Re=Se&&!!k.sheenRoughnessMap,Ie=!!k.specularMap,Pe=!!k.specularColorMap,Oe=!!k.specularIntensityMap,De=we&&!!k.transmissionMap,Le=we&&!!k.thicknessMap,Ue=!!k.gradientMap,Fe=!!k.alphaMap,Ne=k.alphaTest>0,Be=!!k.alphaHash,ze=!!k.extensions,je=0;k.toneMapped&&(null!==ne&&!0!==ne.isXRRenderTarget||(je=e.toneMapping));var Ge={shaderID:X,shaderType:k.type,shaderName:k.name,vertexShader:K,fragmentShader:Y,defines:k.defines,customVertexShaderID:J,customFragmentShaderID:Q,isRawShaderMaterial:!0===k.isRawShaderMaterial,glslVersion:k.glslVersion,precision:U,batching:ae,batchingColor:ae&&null!==j._colorsTexture,instancing:ie,instancingColor:ie&&null!==j.instanceColor,instancingMorph:ie&&null!==j.morphTexture,supportsVertexTextures:L,outputColorSpace:null===ne?e.outputColorSpace:!0===ne.isXRRenderTarget?ne.texture.colorSpace:op,alphaToCoverage:!!k.alphaToCoverage,map:oe,matcap:se,envMap:ue,envMapMode:ue&&W.mapping,envMapCubeUVHeight:q,aoMap:le,lightMap:ce,bumpMap:he,normalMap:de,displacementMap:L&&fe,emissiveMap:pe,normalMapObjectSpace:de&&1===k.normalMapType,normalMapTangentSpace:de&&0===k.normalMapType,metalnessMap:ve,roughnessMap:ge,anisotropy:me,anisotropyMap:xe,clearcoat:ye,clearcoatMap:Ee,clearcoatNormalMap:ke,clearcoatRoughnessMap:Ae,dispersion:_e,iridescence:be,iridescenceMap:Ce,iridescenceThicknessMap:Te,sheen:Se,sheenColorMap:Me,sheenRoughnessMap:Re,specularMap:Ie,specularColorMap:Pe,specularIntensityMap:Oe,transmission:we,transmissionMap:De,thicknessMap:Le,gradientMap:Ue,opaque:!1===k.transparent&&1===k.blending&&!1===k.alphaToCoverage,alphaMap:Fe,alphaTest:Ne,alphaHash:Be,combine:k.combine,mapUv:oe&&getChannel(k.map.channel),aoMapUv:le&&getChannel(k.aoMap.channel),lightMapUv:ce&&getChannel(k.lightMap.channel),bumpMapUv:he&&getChannel(k.bumpMap.channel),normalMapUv:de&&getChannel(k.normalMap.channel),displacementMapUv:fe&&getChannel(k.displacementMap.channel),emissiveMapUv:pe&&getChannel(k.emissiveMap.channel),metalnessMapUv:ve&&getChannel(k.metalnessMap.channel),roughnessMapUv:ge&&getChannel(k.roughnessMap.channel),anisotropyMapUv:xe&&getChannel(k.anisotropyMap.channel),clearcoatMapUv:Ee&&getChannel(k.clearcoatMap.channel),clearcoatNormalMapUv:ke&&getChannel(k.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Ae&&getChannel(k.clearcoatRoughnessMap.channel),iridescenceMapUv:Ce&&getChannel(k.iridescenceMap.channel),iridescenceThicknessMapUv:Te&&getChannel(k.iridescenceThicknessMap.channel),sheenColorMapUv:Me&&getChannel(k.sheenColorMap.channel),sheenRoughnessMapUv:Re&&getChannel(k.sheenRoughnessMap.channel),specularMapUv:Ie&&getChannel(k.specularMap.channel),specularColorMapUv:Pe&&getChannel(k.specularColorMap.channel),specularIntensityMapUv:Oe&&getChannel(k.specularIntensityMap.channel),transmissionMapUv:De&&getChannel(k.transmissionMap.channel),thicknessMapUv:Le&&getChannel(k.thicknessMap.channel),alphaMapUv:Fe&&getChannel(k.alphaMap.channel),vertexTangents:!!H.attributes.tangent&&(de||me),vertexColors:k.vertexColors,vertexAlphas:!0===k.vertexColors&&!!H.attributes.color&&4===H.attributes.color.itemSize,pointsUvs:!0===j.isPoints&&!!H.attributes.uv&&(oe||Fe),fog:!!G,useFog:!0===k.fog,fogExp2:!!G&&G.isFogExp2,flatShading:!0===k.flatShading&&!1===k.wireframe,sizeAttenuation:!0===k.sizeAttenuation,logarithmicDepthBuffer:D,reversedDepthBuffer:re,skinning:!0===j.isSkinnedMesh,morphTargets:void 0!==H.morphAttributes.position,morphNormals:void 0!==H.morphAttributes.normal,morphColors:void 0!==H.morphAttributes.color,morphTargetsCount:$,morphTextureStride:ee,numDirLights:M.directional.length,numPointLights:M.point.length,numSpotLights:M.spot.length,numSpotLightMaps:M.spotLightMap.length,numRectAreaLights:M.rectArea.length,numHemiLights:M.hemi.length,numDirLightShadows:M.directionalShadowMap.length,numPointLightShadows:M.pointShadowMap.length,numSpotLightShadows:M.spotShadowMap.length,numSpotLightShadowsWithMaps:M.numSpotLightShadowsWithMaps,numLightProbes:M.numLightProbes,numClippingPlanes:T.numPlanes,numClipIntersection:T.numIntersection,dithering:k.dithering,shadowMapEnabled:e.shadowMap.enabled&&O.length>0,shadowMapType:e.shadowMap.type,toneMapping:je,decodeVideoTexture:oe&&!0===k.map.isVideoTexture&&Tp.getTransfer(k.map.colorSpace)===up,decodeVideoTextureEmissive:pe&&!0===k.emissiveMap.isVideoTexture&&Tp.getTransfer(k.emissiveMap.colorSpace)===up,premultipliedAlpha:k.premultipliedAlpha,doubleSided:k.side===qd,flipSided:1===k.side,useDepthPacking:k.depthPacking>=0,depthPacking:k.depthPacking||0,index0AttributeName:k.index0AttributeName,extensionClipCullDistance:ze&&!0===k.extensions.clipCullDistance&&S.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(ze&&!0===k.extensions.multiDraw||ae)&&S.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:S.has("KHR_parallel_shader_compile"),customProgramCacheKey:k.customProgramCacheKey()};return Ge.vertexUv1s=I.has(1),Ge.vertexUv2s=I.has(2),Ge.vertexUv3s=I.has(3),I.clear(),Ge},getProgramCacheKey:function(l){var _=[];if(l.shaderID?_.push(l.shaderID):(_.push(l.customVertexShaderID),_.push(l.customFragmentShaderID)),void 0!==l.defines)for(var S in l.defines)_.push(S),_.push(l.defines[S]);return!1===l.isRawShaderMaterial&&(!function(e,l){e.push(l.precision),e.push(l.outputColorSpace),e.push(l.envMapMode),e.push(l.envMapCubeUVHeight),e.push(l.mapUv),e.push(l.alphaMapUv),e.push(l.lightMapUv),e.push(l.aoMapUv),e.push(l.bumpMapUv),e.push(l.normalMapUv),e.push(l.displacementMapUv),e.push(l.emissiveMapUv),e.push(l.metalnessMapUv),e.push(l.roughnessMapUv),e.push(l.anisotropyMapUv),e.push(l.clearcoatMapUv),e.push(l.clearcoatNormalMapUv),e.push(l.clearcoatRoughnessMapUv),e.push(l.iridescenceMapUv),e.push(l.iridescenceThicknessMapUv),e.push(l.sheenColorMapUv),e.push(l.sheenRoughnessMapUv),e.push(l.specularMapUv),e.push(l.specularColorMapUv),e.push(l.specularIntensityMapUv),e.push(l.transmissionMapUv),e.push(l.thicknessMapUv),e.push(l.combine),e.push(l.fogExp2),e.push(l.sizeAttenuation),e.push(l.morphTargetsCount),e.push(l.morphAttributeCount),e.push(l.numDirLights),e.push(l.numPointLights),e.push(l.numSpotLights),e.push(l.numSpotLightMaps),e.push(l.numHemiLights),e.push(l.numRectAreaLights),e.push(l.numDirLightShadows),e.push(l.numPointLightShadows),e.push(l.numSpotLightShadows),e.push(l.numSpotLightShadowsWithMaps),e.push(l.numLightProbes),e.push(l.shadowMapType),e.push(l.toneMapping),e.push(l.numClippingPlanes),e.push(l.numClipIntersection),e.push(l.depthPacking)}(_,l),function(e,l){M.disableAll(),l.supportsVertexTextures&&M.enable(0);l.instancing&&M.enable(1);l.instancingColor&&M.enable(2);l.instancingMorph&&M.enable(3);l.matcap&&M.enable(4);l.envMap&&M.enable(5);l.normalMapObjectSpace&&M.enable(6);l.normalMapTangentSpace&&M.enable(7);l.clearcoat&&M.enable(8);l.iridescence&&M.enable(9);l.alphaTest&&M.enable(10);l.vertexColors&&M.enable(11);l.vertexAlphas&&M.enable(12);l.vertexUv1s&&M.enable(13);l.vertexUv2s&&M.enable(14);l.vertexUv3s&&M.enable(15);l.vertexTangents&&M.enable(16);l.anisotropy&&M.enable(17);l.alphaHash&&M.enable(18);l.batching&&M.enable(19);l.dispersion&&M.enable(20);l.batchingColor&&M.enable(21);l.gradientMap&&M.enable(22);e.push(M.mask),M.disableAll(),l.fog&&M.enable(0);l.useFog&&M.enable(1);l.flatShading&&M.enable(2);l.logarithmicDepthBuffer&&M.enable(3);l.reversedDepthBuffer&&M.enable(4);l.skinning&&M.enable(5);l.morphTargets&&M.enable(6);l.morphNormals&&M.enable(7);l.morphColors&&M.enable(8);l.premultipliedAlpha&&M.enable(9);l.shadowMapEnabled&&M.enable(10);l.doubleSided&&M.enable(11);l.flipSided&&M.enable(12);l.useDepthPacking&&M.enable(13);l.dithering&&M.enable(14);l.transmission&&M.enable(15);l.sheen&&M.enable(16);l.opaque&&M.enable(17);l.pointsUvs&&M.enable(18);l.decodeVideoTexture&&M.enable(19);l.decodeVideoTextureEmissive&&M.enable(20);l.alphaToCoverage&&M.enable(21);e.push(M.mask)}(_,l),_.push(e.outputColorSpace)),_.push(l.customProgramCacheKey),_.join()},getUniforms:function(e){var l,_=B[e.type];if(_){var S=Um[_];l=Ug.clone(S.uniforms)}else l=e.uniforms;return l},acquireProgram:function(l,_){for(var S,E=0,T=O.length;E<T;E++){var M=O[E];if(M.cacheKey===_){++(S=M).usedTimes;break}}return void 0===S&&(S=new WebGLProgram(e,_,l,k),O.push(S)),S},releaseProgram:function(e){if(0===--e.usedTimes){var l=O.indexOf(e);O[l]=O[O.length-1],O.pop(),e.destroy()}},releaseShaderCache:function(e){R.remove(e)},programs:O,dispose:function(){R.dispose()}}}function WebGLProperties(){var e=new WeakMap;return{has:function(l){return e.has(l)},get:function(l){var _=e.get(l);return void 0===_&&(_={},e.set(l,_)),_},remove:function(l){e.delete(l)},update:function(l,_,S){e.get(l)[_]=S},dispose:function(){e=new WeakMap}}}function painterSortStable(e,l){return e.groupOrder!==l.groupOrder?e.groupOrder-l.groupOrder:e.renderOrder!==l.renderOrder?e.renderOrder-l.renderOrder:e.material.id!==l.material.id?e.material.id-l.material.id:e.z!==l.z?e.z-l.z:e.id-l.id}function reversePainterSortStable(e,l){return e.groupOrder!==l.groupOrder?e.groupOrder-l.groupOrder:e.renderOrder!==l.renderOrder?e.renderOrder-l.renderOrder:e.z!==l.z?l.z-e.z:e.id-l.id}function WebGLRenderList(){var e=[],l=0,_=[],S=[],E=[];function getNextRenderItem(_,S,E,k,T,M){var R=e[l];return void 0===R?(R={id:_.id,object:_,geometry:S,material:E,groupOrder:k,renderOrder:_.renderOrder,z:T,group:M},e[l]=R):(R.id=_.id,R.object=_,R.geometry=S,R.material=E,R.groupOrder=k,R.renderOrder=_.renderOrder,R.z=T,R.group=M),l++,R}return{opaque:_,transmissive:S,transparent:E,init:function(){l=0,_.length=0,S.length=0,E.length=0},push:function(e,l,k,T,M,R){var I=getNextRenderItem(e,l,k,T,M,R);k.transmission>0?S.push(I):!0===k.transparent?E.push(I):_.push(I)},unshift:function(e,l,k,T,M,R){var I=getNextRenderItem(e,l,k,T,M,R);k.transmission>0?S.unshift(I):!0===k.transparent?E.unshift(I):_.unshift(I)},finish:function(){for(var _=l,S=e.length;_<S;_++){var E=e[_];if(null===E.id)break;E.id=null,E.object=null,E.geometry=null,E.material=null,E.group=null}},sort:function(e,l){_.length>1&&_.sort(e||painterSortStable),S.length>1&&S.sort(l||reversePainterSortStable),E.length>1&&E.sort(l||reversePainterSortStable)}}}function WebGLRenderLists(){var e=new WeakMap;return{get:function(l,_){var S,E=e.get(l);return void 0===E?(S=new WebGLRenderList,e.set(l,[S])):_>=E.length?(S=new WebGLRenderList,E.push(S)):S=E[_],S},dispose:function(){e=new WeakMap}}}function UniformsCache(){var e={};return{get:function(l){if(void 0!==e[l.id])return e[l.id];var _;switch(l.type){case"DirectionalLight":_={direction:new _p,color:new rg};break;case"SpotLight":_={position:new _p,direction:new _p,color:new rg,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":_={position:new _p,color:new rg,distance:0,decay:0};break;case"HemisphereLight":_={direction:new _p,skyColor:new rg,groundColor:new rg};break;case"RectAreaLight":_={color:new rg,position:new _p,halfWidth:new _p,halfHeight:new _p}}return e[l.id]=_,_}}}var xy=0;function shadowCastingAndTexturingLightsFirst(e,l){return(l.castShadow?2:0)-(e.castShadow?2:0)+(l.map?1:0)-(e.map?1:0)}function WebGLLights(e){for(var l,_=new UniformsCache,S=(l={},{get:function(e){if(void 0!==l[e.id])return l[e.id];var _;switch(e.type){case"DirectionalLight":case"SpotLight":_={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new mp};break;case"PointLight":_={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new mp,shadowCameraNear:1,shadowCameraFar:1e3}}return l[e.id]=_,_}}),E={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0},k=0;k<9;k++)E.probe.push(new _p);var T=new _p,M=new dv,R=new dv;return{setup:function(l){for(var k=0,T=0,M=0,R=0;R<9;R++)E.probe[R].set(0,0,0);var I=0,O=0,D=0,L=0,U=0,B=0,z=0,j=0,G=0,H=0,V=0;l.sort(shadowCastingAndTexturingLightsFirst);for(var W=0,q=l.length;W<q;W++){var X=l[W],K=X.color,Y=X.intensity,J=X.distance,Q=X.shadow&&X.shadow.map?X.shadow.map.texture:null;if(X.isAmbientLight)k+=K.r*Y,T+=K.g*Y,M+=K.b*Y;else if(X.isLightProbe){for(var Z=0;Z<9;Z++)E.probe[Z].addScaledVector(X.sh.coefficients[Z],Y);V++}else if(X.isDirectionalLight){var $=_.get(X);if($.color.copy(X.color).multiplyScalar(X.intensity),X.castShadow){var ee=X.shadow,te=S.get(X);te.shadowIntensity=ee.intensity,te.shadowBias=ee.bias,te.shadowNormalBias=ee.normalBias,te.shadowRadius=ee.radius,te.shadowMapSize=ee.mapSize,E.directionalShadow[I]=te,E.directionalShadowMap[I]=Q,E.directionalShadowMatrix[I]=X.shadow.matrix,B++}E.directional[I]=$,I++}else if(X.isSpotLight){var ne=_.get(X);ne.position.setFromMatrixPosition(X.matrixWorld),ne.color.copy(K).multiplyScalar(Y),ne.distance=J,ne.coneCos=Math.cos(X.angle),ne.penumbraCos=Math.cos(X.angle*(1-X.penumbra)),ne.decay=X.decay,E.spot[D]=ne;var re=X.shadow;if(X.map&&(E.spotLightMap[G]=X.map,G++,re.updateMatrices(X),X.castShadow&&H++),E.spotLightMatrix[D]=re.matrix,X.castShadow){var ie=S.get(X);ie.shadowIntensity=re.intensity,ie.shadowBias=re.bias,ie.shadowNormalBias=re.normalBias,ie.shadowRadius=re.radius,ie.shadowMapSize=re.mapSize,E.spotShadow[D]=ie,E.spotShadowMap[D]=Q,j++}D++}else if(X.isRectAreaLight){var ae=_.get(X);ae.color.copy(K).multiplyScalar(Y),ae.halfWidth.set(.5*X.width,0,0),ae.halfHeight.set(0,.5*X.height,0),E.rectArea[L]=ae,L++}else if(X.isPointLight){var oe=_.get(X);if(oe.color.copy(X.color).multiplyScalar(X.intensity),oe.distance=X.distance,oe.decay=X.decay,X.castShadow){var se=X.shadow,ue=S.get(X);ue.shadowIntensity=se.intensity,ue.shadowBias=se.bias,ue.shadowNormalBias=se.normalBias,ue.shadowRadius=se.radius,ue.shadowMapSize=se.mapSize,ue.shadowCameraNear=se.camera.near,ue.shadowCameraFar=se.camera.far,E.pointShadow[O]=ue,E.pointShadowMap[O]=Q,E.pointShadowMatrix[O]=X.shadow.matrix,z++}E.point[O]=oe,O++}else if(X.isHemisphereLight){var le=_.get(X);le.skyColor.copy(X.color).multiplyScalar(Y),le.groundColor.copy(X.groundColor).multiplyScalar(Y),E.hemi[U]=le,U++}}L>0&&(!0===e.has("OES_texture_float_linear")?(E.rectAreaLTC1=Lm.LTC_FLOAT_1,E.rectAreaLTC2=Lm.LTC_FLOAT_2):(E.rectAreaLTC1=Lm.LTC_HALF_1,E.rectAreaLTC2=Lm.LTC_HALF_2)),E.ambient[0]=k,E.ambient[1]=T,E.ambient[2]=M;var ce=E.hash;ce.directionalLength===I&&ce.pointLength===O&&ce.spotLength===D&&ce.rectAreaLength===L&&ce.hemiLength===U&&ce.numDirectionalShadows===B&&ce.numPointShadows===z&&ce.numSpotShadows===j&&ce.numSpotMaps===G&&ce.numLightProbes===V||(E.directional.length=I,E.spot.length=D,E.rectArea.length=L,E.point.length=O,E.hemi.length=U,E.directionalShadow.length=B,E.directionalShadowMap.length=B,E.pointShadow.length=z,E.pointShadowMap.length=z,E.spotShadow.length=j,E.spotShadowMap.length=j,E.directionalShadowMatrix.length=B,E.pointShadowMatrix.length=z,E.spotLightMatrix.length=j+G-H,E.spotLightMap.length=G,E.numSpotLightShadowsWithMaps=H,E.numLightProbes=V,ce.directionalLength=I,ce.pointLength=O,ce.spotLength=D,ce.rectAreaLength=L,ce.hemiLength=U,ce.numDirectionalShadows=B,ce.numPointShadows=z,ce.numSpotShadows=j,ce.numSpotMaps=G,ce.numLightProbes=V,E.version=xy++)},setupView:function(e,l){for(var _=0,S=0,k=0,I=0,O=0,D=l.matrixWorldInverse,L=0,U=e.length;L<U;L++){var B=e[L];if(B.isDirectionalLight){var z=E.directional[_];z.direction.setFromMatrixPosition(B.matrixWorld),T.setFromMatrixPosition(B.target.matrixWorld),z.direction.sub(T),z.direction.transformDirection(D),_++}else if(B.isSpotLight){var j=E.spot[k];j.position.setFromMatrixPosition(B.matrixWorld),j.position.applyMatrix4(D),j.direction.setFromMatrixPosition(B.matrixWorld),T.setFromMatrixPosition(B.target.matrixWorld),j.direction.sub(T),j.direction.transformDirection(D),k++}else if(B.isRectAreaLight){var G=E.rectArea[I];G.position.setFromMatrixPosition(B.matrixWorld),G.position.applyMatrix4(D),R.identity(),M.copy(B.matrixWorld),M.premultiply(D),R.extractRotation(M),G.halfWidth.set(.5*B.width,0,0),G.halfHeight.set(0,.5*B.height,0),G.halfWidth.applyMatrix4(R),G.halfHeight.applyMatrix4(R),I++}else if(B.isPointLight){var H=E.point[S];H.position.setFromMatrixPosition(B.matrixWorld),H.position.applyMatrix4(D),S++}else if(B.isHemisphereLight){var V=E.hemi[O];V.direction.setFromMatrixPosition(B.matrixWorld),V.direction.transformDirection(D),O++}}},state:E}}function WebGLRenderState(e){var l=new WebGLLights(e),_=[],S=[];var E={lightsArray:_,shadowsArray:S,camera:null,lights:l,transmissionRenderTarget:{}};return{init:function(e){E.camera=e,_.length=0,S.length=0},state:E,setupLights:function(){l.setup(_)},setupLightsView:function(e){l.setupView(_,e)},pushLight:function(e){_.push(e)},pushShadow:function(e){S.push(e)}}}function WebGLRenderStates(e){var l=new WeakMap;return{get:function(_){var S,E=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,k=l.get(_);return void 0===k?(S=new WebGLRenderState(e),l.set(_,[S])):E>=k.length?(S=new WebGLRenderState(e),k.push(S)):S=k[E],S},dispose:function(){l=new WeakMap}}}function WebGLShadowMap(e,l,_){var S=new om,E=new mp,k=new mp,T=new Lp,M=new Cm({depthPacking:3201}),R=new Tm,I={},O=_.maxTextureSize,D=_defineProperty3(_defineProperty3(_defineProperty3({},0,1),1,0),qd,qd),L=new Fg({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new mp},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),U=L.clone();U.defines.HORIZONTAL_PASS=1;var B=new wg;B.setAttribute("position",new hg(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var z=new Dg(B,L),j=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1;var G=this.type;function VSMPass(_,S){var k=l.update(z);L.defines.VSM_SAMPLES!==_.blurSamples&&(L.defines.VSM_SAMPLES=_.blurSamples,U.defines.VSM_SAMPLES=_.blurSamples,L.needsUpdate=!0,U.needsUpdate=!0),null===_.mapPass&&(_.mapPass=new Fp(E.x,E.y)),L.uniforms.shadow_pass.value=_.map.texture,L.uniforms.resolution.value=_.mapSize,L.uniforms.radius.value=_.radius,e.setRenderTarget(_.mapPass),e.clear(),e.renderBufferDirect(S,null,k,L,z,null),U.uniforms.shadow_pass.value=_.mapPass.texture,U.uniforms.resolution.value=_.mapSize,U.uniforms.radius.value=_.radius,e.setRenderTarget(_.map),e.clear(),e.renderBufferDirect(S,null,k,U,z,null)}function getDepthMaterial(l,_,S,E){var k=null,T=!0===S.isPointLight?l.customDistanceMaterial:l.customDepthMaterial;if(void 0!==T)k=T;else if(k=!0===S.isPointLight?R:M,e.localClippingEnabled&&!0===_.clipShadows&&Array.isArray(_.clippingPlanes)&&0!==_.clippingPlanes.length||_.displacementMap&&0!==_.displacementScale||_.alphaMap&&_.alphaTest>0||_.map&&_.alphaTest>0||!0===_.alphaToCoverage){var O=k.uuid,L=_.uuid,U=I[O];void 0===U&&(U={},I[O]=U);var B=U[L];void 0===B&&(B=k.clone(),U[L]=B,_.addEventListener("dispose",onMaterialDispose)),k=B}(k.visible=_.visible,k.wireframe=_.wireframe,k.side=3===E?null!==_.shadowSide?_.shadowSide:_.side:null!==_.shadowSide?_.shadowSide:D[_.side],k.alphaMap=_.alphaMap,k.alphaTest=!0===_.alphaToCoverage?.5:_.alphaTest,k.map=_.map,k.clipShadows=_.clipShadows,k.clippingPlanes=_.clippingPlanes,k.clipIntersection=_.clipIntersection,k.displacementMap=_.displacementMap,k.displacementScale=_.displacementScale,k.displacementBias=_.displacementBias,k.wireframeLinewidth=_.wireframeLinewidth,k.linewidth=_.linewidth,!0===S.isPointLight&&!0===k.isMeshDistanceMaterial)&&(e.properties.get(k).light=S);return k}function renderObject(_,E,k,T,M){if(!1!==_.visible){if(_.layers.test(E.layers)&&(_.isMesh||_.isLine||_.isPoints)&&(_.castShadow||_.receiveShadow&&3===M)&&(!_.frustumCulled||S.intersectsObject(_))){_.modelViewMatrix.multiplyMatrices(k.matrixWorldInverse,_.matrixWorld);var R=l.update(_),I=_.material;if(Array.isArray(I))for(var O=R.groups,D=0,L=O.length;D<L;D++){var U=O[D],B=I[U.materialIndex];if(B&&B.visible){var z=getDepthMaterial(_,B,T,M);_.onBeforeShadow(e,_,E,k,R,z,U),e.renderBufferDirect(k,null,R,z,_,U),_.onAfterShadow(e,_,E,k,R,z,U)}}else if(I.visible){var j=getDepthMaterial(_,I,T,M);_.onBeforeShadow(e,_,E,k,R,j,null),e.renderBufferDirect(k,null,R,j,_,null),_.onAfterShadow(e,_,E,k,R,j,null)}}for(var G=_.children,H=0,V=G.length;H<V;H++)renderObject(G[H],E,k,T,M)}}function onMaterialDispose(e){var l=e.target;for(var _ in l.removeEventListener("dispose",onMaterialDispose),I){var S=I[_],E=e.target.uuid;if(E in S)S[E].dispose(),delete S[E]}}this.render=function(l,_,M){if(!1!==j.enabled&&(!1!==j.autoUpdate||!1!==j.needsUpdate)&&0!==l.length){var R=e.getRenderTarget(),I=e.getActiveCubeFace(),D=e.getActiveMipmapLevel(),L=e.state;L.setBlending(0),!0===L.buffers.depth.getReversed()?L.buffers.color.setClear(0,0,0,0):L.buffers.color.setClear(1,1,1,1),L.buffers.depth.setTest(!0),L.setScissorTest(!1);for(var U=3!==G&&3===this.type,B=3===G&&3!==this.type,z=0,H=l.length;z<H;z++){var V=l[z],W=V.shadow;if(void 0!==W&&(!1!==W.autoUpdate||!1!==W.needsUpdate)){E.copy(W.mapSize);var q=W.getFrameExtents();if(E.multiply(q),k.copy(W.mapSize),(E.x>O||E.y>O)&&(E.x>O&&(k.x=Math.floor(O/q.x),E.x=k.x*q.x,W.mapSize.x=k.x),E.y>O&&(k.y=Math.floor(O/q.y),E.y=k.y*q.y,W.mapSize.y=k.y)),null===W.map||!0===U||!0===B){var X=3!==this.type?{minFilter:ef,magFilter:ef}:{};null!==W.map&&W.map.dispose(),W.map=new Fp(E.x,E.y,X),W.map.texture.name=V.name+".shadowMap",W.camera.updateProjectionMatrix()}e.setRenderTarget(W.map),e.clear();for(var K=W.getViewportCount(),Y=0;Y<K;Y++){var J=W.getViewport(Y);T.set(k.x*J.x,k.y*J.y,k.x*J.z,k.y*J.w),L.viewport(T),W.updateMatrices(V,Y),S=W.getFrustum(),renderObject(_,M,W.camera,V,this.type)}!0!==W.isPointLightShadow&&3===this.type&&VSMPass(W,M),W.needsUpdate=!1}}G=this.type,j.needsUpdate=!1,e.setRenderTarget(R,I,D)}}}var Ey=_defineProperty3(_defineProperty3(_defineProperty3(_defineProperty3(_defineProperty3(_defineProperty3(_defineProperty3(_defineProperty3({},0,1),2,6),4,7),3,5),1,0),6,2),7,4),5,3);function WebGLState(e,l){var _;var S=new function(){var l=!1,_=new Lp,S=null,E=new Lp(0,0,0,0);return{setMask:function(_){S===_||l||(e.colorMask(_,_,_,_),S=_)},setLocked:function(e){l=e},setClear:function(l,S,k,T,M){!0===M&&(l*=T,S*=T,k*=T),_.set(l,S,k,T),!1===E.equals(_)&&(e.clearColor(l,S,k,T),E.copy(_))},reset:function(){l=!1,S=null,E.set(-1,0,0,0)}}},E=new function(){var _=!1,S=!1,E=null,k=null,T=null;return{setReversed:function(e){if(S!==e){var _=l.get("EXT_clip_control");e?_.clipControlEXT(_.LOWER_LEFT_EXT,_.ZERO_TO_ONE_EXT):_.clipControlEXT(_.LOWER_LEFT_EXT,_.NEGATIVE_ONE_TO_ONE_EXT),S=e;var E=T;T=null,this.setClear(E)}},getReversed:function(){return S},setTest:function(l){l?enable(e.DEPTH_TEST):disable(e.DEPTH_TEST)},setMask:function(l){E===l||_||(e.depthMask(l),E=l)},setFunc:function(l){if(S&&(l=Ey[l]),k!==l){switch(l){case 0:e.depthFunc(e.NEVER);break;case 1:e.depthFunc(e.ALWAYS);break;case 2:e.depthFunc(e.LESS);break;case 3:default:e.depthFunc(e.LEQUAL);break;case 4:e.depthFunc(e.EQUAL);break;case 5:e.depthFunc(e.GEQUAL);break;case 6:e.depthFunc(e.GREATER);break;case 7:e.depthFunc(e.NOTEQUAL)}k=l}},setLocked:function(e){_=e},setClear:function(l){T!==l&&(S&&(l=1-l),e.clearDepth(l),T=l)},reset:function(){_=!1,E=null,k=null,T=null,S=!1}}},k=new function(){var l=!1,_=null,S=null,E=null,k=null,T=null,M=null,R=null,I=null;return{setTest:function(_){l||(_?enable(e.STENCIL_TEST):disable(e.STENCIL_TEST))},setMask:function(S){_===S||l||(e.stencilMask(S),_=S)},setFunc:function(l,_,T){S===l&&E===_&&k===T||(e.stencilFunc(l,_,T),S=l,E=_,k=T)},setOp:function(l,_,S){T===l&&M===_&&R===S||(e.stencilOp(l,_,S),T=l,M=_,R=S)},setLocked:function(e){l=e},setClear:function(l){I!==l&&(e.clearStencil(l),I=l)},reset:function(){l=!1,_=null,S=null,E=null,k=null,T=null,M=null,R=null,I=null}}},T=new WeakMap,M=new WeakMap,R={},I={},O=new WeakMap,D=[],L=null,U=!1,B=null,z=null,j=null,G=null,H=null,V=null,W=null,q=new rg(0,0,0),X=0,K=!1,Y=null,J=null,Q=null,Z=null,$=null,ee=e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS),te=!1,ne=0,re=e.getParameter(e.VERSION);-1!==re.indexOf("WebGL")?(ne=parseFloat(/^WebGL (\d)/.exec(re)[1]),te=ne>=1):-1!==re.indexOf("OpenGL ES")&&(ne=parseFloat(/^OpenGL ES (\d)/.exec(re)[1]),te=ne>=2);var ie=null,ae={},oe=e.getParameter(e.SCISSOR_BOX),se=e.getParameter(e.VIEWPORT),ue=(new Lp).fromArray(oe),le=(new Lp).fromArray(se);function createTexture(l,_,S,E){var k=new Uint8Array(4),T=e.createTexture();e.bindTexture(l,T),e.texParameteri(l,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(l,e.TEXTURE_MAG_FILTER,e.NEAREST);for(var M=0;M<S;M++)l===e.TEXTURE_3D||l===e.TEXTURE_2D_ARRAY?e.texImage3D(_,0,e.RGBA,1,1,E,0,e.RGBA,e.UNSIGNED_BYTE,k):e.texImage2D(_+M,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,k);return T}var ce={};function enable(l){!0!==R[l]&&(e.enable(l),R[l]=!0)}function disable(l){!1!==R[l]&&(e.disable(l),R[l]=!1)}ce[e.TEXTURE_2D]=createTexture(e.TEXTURE_2D,e.TEXTURE_2D,1),ce[e.TEXTURE_CUBE_MAP]=createTexture(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6),ce[e.TEXTURE_2D_ARRAY]=createTexture(e.TEXTURE_2D_ARRAY,e.TEXTURE_2D_ARRAY,1,1),ce[e.TEXTURE_3D]=createTexture(e.TEXTURE_3D,e.TEXTURE_3D,1,1),S.setClear(0,0,0,1),E.setClear(1),k.setClear(0),enable(e.DEPTH_TEST),E.setFunc(3),setFlipSided(!1),setCullFace(1),enable(e.CULL_FACE),setBlending(0);var he=_defineProperty3(_defineProperty3(_defineProperty3({},Xd,e.FUNC_ADD),101,e.FUNC_SUBTRACT),102,e.FUNC_REVERSE_SUBTRACT);he[103]=e.MIN,he[104]=e.MAX;var de=(_defineProperty3(_defineProperty3(_defineProperty3(_defineProperty3(_defineProperty3(_defineProperty3(_defineProperty3(_defineProperty3(_defineProperty3(_defineProperty3(_={},200,e.ZERO),201,e.ONE),202,e.SRC_COLOR),204,e.SRC_ALPHA),210,e.SRC_ALPHA_SATURATE),208,e.DST_COLOR),206,e.DST_ALPHA),203,e.ONE_MINUS_SRC_COLOR),205,e.ONE_MINUS_SRC_ALPHA),209,e.ONE_MINUS_DST_COLOR),_defineProperty3(_defineProperty3(_defineProperty3(_defineProperty3(_defineProperty3(_,207,e.ONE_MINUS_DST_ALPHA),211,e.CONSTANT_COLOR),212,e.ONE_MINUS_CONSTANT_COLOR),213,e.CONSTANT_ALPHA),214,e.ONE_MINUS_CONSTANT_ALPHA));function setBlending(l,_,S,E,k,T,M,R,I,O){if(0!==l){if(!1===U&&(enable(e.BLEND),U=!0),5===l)k=k||_,T=T||S,M=M||E,_===z&&k===H||(e.blendEquationSeparate(he[_],he[k]),z=_,H=k),S===j&&E===G&&T===V&&M===W||(e.blendFuncSeparate(de[S],de[E],de[T],de[M]),j=S,G=E,V=T,W=M),!1!==R.equals(q)&&I===X||(e.blendColor(R.r,R.g,R.b,I),q.copy(R),X=I),B=l,K=!1;else if(l!==B||O!==K){if(z===Xd&&H===Xd||(e.blendEquation(e.FUNC_ADD),z=Xd,H=Xd),O)switch(l){case 1:e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case 2:e.blendFunc(e.ONE,e.ONE);break;case 3:e.blendFuncSeparate(e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ZERO,e.ONE);break;case 4:e.blendFuncSeparate(e.DST_COLOR,e.ONE_MINUS_SRC_ALPHA,e.ZERO,e.ONE)}else switch(l){case 1:e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case 2:e.blendFuncSeparate(e.SRC_ALPHA,e.ONE,e.ONE,e.ONE)}j=null,G=null,V=null,W=null,q.set(0,0,0),X=0,B=l,K=O}}else!0===U&&(disable(e.BLEND),U=!1)}function setFlipSided(l){Y!==l&&(l?e.frontFace(e.CW):e.frontFace(e.CCW),Y=l)}function setCullFace(l){0!==l?(enable(e.CULL_FACE),l!==J&&(1===l?e.cullFace(e.BACK):2===l?e.cullFace(e.FRONT):e.cullFace(e.FRONT_AND_BACK))):disable(e.CULL_FACE),J=l}function setPolygonOffset(l,_,S){l?(enable(e.POLYGON_OFFSET_FILL),Z===_&&$===S||(e.polygonOffset(_,S),Z=_,$=S)):disable(e.POLYGON_OFFSET_FILL)}return{buffers:{color:S,depth:E,stencil:k},enable:enable,disable:disable,bindFramebuffer:function(l,_){return I[l]!==_&&(e.bindFramebuffer(l,_),I[l]=_,l===e.DRAW_FRAMEBUFFER&&(I[e.FRAMEBUFFER]=_),l===e.FRAMEBUFFER&&(I[e.DRAW_FRAMEBUFFER]=_),!0)},drawBuffers:function(l,_){var S=D,E=!1;if(l){void 0===(S=O.get(_))&&(S=[],O.set(_,S));var k=l.textures;if(S.length!==k.length||S[0]!==e.COLOR_ATTACHMENT0){for(var T=0,M=k.length;T<M;T++)S[T]=e.COLOR_ATTACHMENT0+T;S.length=k.length,E=!0}}else S[0]!==e.BACK&&(S[0]=e.BACK,E=!0);E&&e.drawBuffers(S)},useProgram:function(l){return L!==l&&(e.useProgram(l),L=l,!0)},setBlending:setBlending,setMaterial:function(l,_){l.side===qd?disable(e.CULL_FACE):enable(e.CULL_FACE);var T=1===l.side;_&&(T=!T),setFlipSided(T),1===l.blending&&!1===l.transparent?setBlending(0):setBlending(l.blending,l.blendEquation,l.blendSrc,l.blendDst,l.blendEquationAlpha,l.blendSrcAlpha,l.blendDstAlpha,l.blendColor,l.blendAlpha,l.premultipliedAlpha),E.setFunc(l.depthFunc),E.setTest(l.depthTest),E.setMask(l.depthWrite),S.setMask(l.colorWrite);var M=l.stencilWrite;k.setTest(M),M&&(k.setMask(l.stencilWriteMask),k.setFunc(l.stencilFunc,l.stencilRef,l.stencilFuncMask),k.setOp(l.stencilFail,l.stencilZFail,l.stencilZPass)),setPolygonOffset(l.polygonOffset,l.polygonOffsetFactor,l.polygonOffsetUnits),!0===l.alphaToCoverage?enable(e.SAMPLE_ALPHA_TO_COVERAGE):disable(e.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:setFlipSided,setCullFace:setCullFace,setLineWidth:function(l){l!==Q&&(te&&e.lineWidth(l),Q=l)},setPolygonOffset:setPolygonOffset,setScissorTest:function(l){l?enable(e.SCISSOR_TEST):disable(e.SCISSOR_TEST)},activeTexture:function(l){void 0===l&&(l=e.TEXTURE0+ee-1),ie!==l&&(e.activeTexture(l),ie=l)},bindTexture:function(l,_,S){void 0===S&&(S=null===ie?e.TEXTURE0+ee-1:ie);var E=ae[S];void 0===E&&(E={type:void 0,texture:void 0},ae[S]=E),E.type===l&&E.texture===_||(ie!==S&&(e.activeTexture(S),ie=S),e.bindTexture(l,_||ce[l]),E.type=l,E.texture=_)},unbindTexture:function(){var l=ae[ie];void 0!==l&&void 0!==l.type&&(e.bindTexture(l.type,null),l.type=void 0,l.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(l){}},compressedTexImage3D:function(){try{e.compressedTexImage3D.apply(e,arguments)}catch(l){}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(l){}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(l){}},updateUBOMapping:function(l,_){var S=M.get(_);void 0===S&&(S=new WeakMap,M.set(_,S));var E=S.get(l);void 0===E&&(E=e.getUniformBlockIndex(_,l.name),S.set(l,E))},uniformBlockBinding:function(l,_){var S=M.get(_).get(l);T.get(_)!==S&&(e.uniformBlockBinding(_,S,l.__bindingPointIndex),T.set(_,S))},texStorage2D:function(){try{e.texStorage2D.apply(e,arguments)}catch(l){}},texStorage3D:function(){try{e.texStorage3D.apply(e,arguments)}catch(l){}},texSubImage2D:function(){try{e.texSubImage2D.apply(e,arguments)}catch(l){}},texSubImage3D:function(){try{e.texSubImage3D.apply(e,arguments)}catch(l){}},compressedTexSubImage2D:function(){try{e.compressedTexSubImage2D.apply(e,arguments)}catch(l){}},compressedTexSubImage3D:function(){try{e.compressedTexSubImage3D.apply(e,arguments)}catch(l){}},scissor:function(l){!1===ue.equals(l)&&(e.scissor(l.x,l.y,l.z,l.w),ue.copy(l))},viewport:function(l){!1===le.equals(l)&&(e.viewport(l.x,l.y,l.z,l.w),le.copy(l))},reset:function(){e.disable(e.BLEND),e.disable(e.CULL_FACE),e.disable(e.DEPTH_TEST),e.disable(e.POLYGON_OFFSET_FILL),e.disable(e.SCISSOR_TEST),e.disable(e.STENCIL_TEST),e.disable(e.SAMPLE_ALPHA_TO_COVERAGE),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ZERO),e.blendFuncSeparate(e.ONE,e.ZERO,e.ONE,e.ZERO),e.blendColor(0,0,0,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(e.LESS),E.setReversed(!1),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(e.ALWAYS,0,4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP),e.clearStencil(0),e.cullFace(e.BACK),e.frontFace(e.CCW),e.polygonOffset(0,0),e.activeTexture(e.TEXTURE0),e.bindFramebuffer(e.FRAMEBUFFER,null),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),e.bindFramebuffer(e.READ_FRAMEBUFFER,null),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),R={},ie=null,ae={},I={},O=new WeakMap,D=[],L=null,U=!1,B=null,z=null,j=null,G=null,H=null,V=null,W=null,q=new rg(0,0,0),X=0,K=!1,Y=null,J=null,Q=null,Z=null,$=null,ue.set(0,0,e.canvas.width,e.canvas.height),le.set(0,0,e.canvas.width,e.canvas.height),S.reset(),E.reset(),k.reset()}}}function WebGLTextures(e,l,_,S,E,k,T){var M,R=l.has("WEBGL_multisampled_render_to_texture")?l.get("WEBGL_multisampled_render_to_texture"):null,I="undefined"!=typeof navigator&&/OculusBrowser/g.test(navigator.userAgent),O=new mp,D=new WeakMap,L=new WeakMap,U=!1;try{U="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(W){}function createCanvas(e,l){return U?new OffscreenCanvas(e,l):createElementNS("canvas")}function resizeImage(e,l,_){var S=1,E=getDimensions(e);if((E.width>_||E.height>_)&&(S=_/Math.max(E.width,E.height)),S<1){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap||"undefined"!=typeof VideoFrame&&e instanceof VideoFrame){var k=Math.floor(S*E.width),T=Math.floor(S*E.height);void 0===M&&(M=createCanvas(k,T));var R=l?createCanvas(k,T):M;return R.width=k,R.height=T,R.getContext("2d").drawImage(e,0,0,k,T),R}return e}return e}function textureNeedsGenerateMipmaps(e){return e.generateMipmaps}function generateMipmap(l){e.generateMipmap(l)}function getTargetType(l){return l.isWebGLCubeRenderTarget?e.TEXTURE_CUBE_MAP:l.isWebGL3DRenderTarget?e.TEXTURE_3D:l.isWebGLArrayRenderTarget||l.isCompressedArrayTexture?e.TEXTURE_2D_ARRAY:e.TEXTURE_2D}function getInternalFormat(_,S,E,k){var T=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(null!==_&&void 0!==e[_])return e[_];var M=S;if(S===e.RED&&(E===e.FLOAT&&(M=e.R32F),E===e.HALF_FLOAT&&(M=e.R16F),E===e.UNSIGNED_BYTE&&(M=e.R8)),S===e.RED_INTEGER&&(E===e.UNSIGNED_BYTE&&(M=e.R8UI),E===e.UNSIGNED_SHORT&&(M=e.R16UI),E===e.UNSIGNED_INT&&(M=e.R32UI),E===e.BYTE&&(M=e.R8I),E===e.SHORT&&(M=e.R16I),E===e.INT&&(M=e.R32I)),S===e.RG&&(E===e.FLOAT&&(M=e.RG32F),E===e.HALF_FLOAT&&(M=e.RG16F),E===e.UNSIGNED_BYTE&&(M=e.RG8)),S===e.RG_INTEGER&&(E===e.UNSIGNED_BYTE&&(M=e.RG8UI),E===e.UNSIGNED_SHORT&&(M=e.RG16UI),E===e.UNSIGNED_INT&&(M=e.RG32UI),E===e.BYTE&&(M=e.RG8I),E===e.SHORT&&(M=e.RG16I),E===e.INT&&(M=e.RG32I)),S===e.RGB_INTEGER&&(E===e.UNSIGNED_BYTE&&(M=e.RGB8UI),E===e.UNSIGNED_SHORT&&(M=e.RGB16UI),E===e.UNSIGNED_INT&&(M=e.RGB32UI),E===e.BYTE&&(M=e.RGB8I),E===e.SHORT&&(M=e.RGB16I),E===e.INT&&(M=e.RGB32I)),S===e.RGBA_INTEGER&&(E===e.UNSIGNED_BYTE&&(M=e.RGBA8UI),E===e.UNSIGNED_SHORT&&(M=e.RGBA16UI),E===e.UNSIGNED_INT&&(M=e.RGBA32UI),E===e.BYTE&&(M=e.RGBA8I),E===e.SHORT&&(M=e.RGBA16I),E===e.INT&&(M=e.RGBA32I)),S===e.RGB&&(E===e.UNSIGNED_INT_5_9_9_9_REV&&(M=e.RGB9_E5),E===e.UNSIGNED_INT_10F_11F_11F_REV&&(M=e.R11F_G11F_B10F)),S===e.RGBA){var R=T?sp:Tp.getTransfer(k);E===e.FLOAT&&(M=e.RGBA32F),E===e.HALF_FLOAT&&(M=e.RGBA16F),E===e.UNSIGNED_BYTE&&(M=R===up?e.SRGB8_ALPHA8:e.RGBA8),E===e.UNSIGNED_SHORT_4_4_4_4&&(M=e.RGBA4),E===e.UNSIGNED_SHORT_5_5_5_1&&(M=e.RGB5_A1)}return M!==e.R16F&&M!==e.R32F&&M!==e.RG16F&&M!==e.RG32F&&M!==e.RGBA16F&&M!==e.RGBA32F||l.get("EXT_color_buffer_float"),M}function getInternalDepthFormat(l,_){var S;return l?null===_||_===hf||_===gf?S=e.DEPTH24_STENCIL8:_===df?S=e.DEPTH32F_STENCIL8:_===lf&&(S=e.DEPTH24_STENCIL8):null===_||_===hf||_===gf?S=e.DEPTH_COMPONENT24:_===df?S=e.DEPTH_COMPONENT32F:_===lf&&(S=e.DEPTH_COMPONENT16),S}function getMipLevels(e,l){return!0===textureNeedsGenerateMipmaps(e)||e.isFramebufferTexture&&e.minFilter!==ef&&e.minFilter!==nf?Math.log2(Math.max(l.width,l.height))+1:void 0!==e.mipmaps&&e.mipmaps.length>0?e.mipmaps.length:e.isCompressedTexture&&Array.isArray(e.image)?l.mipmaps.length:1}function onTextureDispose(e){var l=e.target;l.removeEventListener("dispose",onTextureDispose),function(e){var l=S.get(e);if(void 0===l.__webglInit)return;var _=e.source,E=L.get(_);if(E){var k=E[l.__cacheKey];k.usedTimes--,0===k.usedTimes&&deleteTexture(e),0===Object.keys(E).length&&L.delete(_)}S.remove(e)}(l),l.isVideoTexture&&D.delete(l)}function onRenderTargetDispose(l){var _=l.target;_.removeEventListener("dispose",onRenderTargetDispose),function(l){var _=S.get(l);l.depthTexture&&(l.depthTexture.dispose(),S.remove(l.depthTexture));if(l.isWebGLCubeRenderTarget)for(var E=0;E<6;E++){if(Array.isArray(_.__webglFramebuffer[E]))for(var k=0;k<_.__webglFramebuffer[E].length;k++)e.deleteFramebuffer(_.__webglFramebuffer[E][k]);else e.deleteFramebuffer(_.__webglFramebuffer[E]);_.__webglDepthbuffer&&e.deleteRenderbuffer(_.__webglDepthbuffer[E])}else{if(Array.isArray(_.__webglFramebuffer))for(var M=0;M<_.__webglFramebuffer.length;M++)e.deleteFramebuffer(_.__webglFramebuffer[M]);else e.deleteFramebuffer(_.__webglFramebuffer);if(_.__webglDepthbuffer&&e.deleteRenderbuffer(_.__webglDepthbuffer),_.__webglMultisampledFramebuffer&&e.deleteFramebuffer(_.__webglMultisampledFramebuffer),_.__webglColorRenderbuffer)for(var R=0;R<_.__webglColorRenderbuffer.length;R++)_.__webglColorRenderbuffer[R]&&e.deleteRenderbuffer(_.__webglColorRenderbuffer[R]);_.__webglDepthRenderbuffer&&e.deleteRenderbuffer(_.__webglDepthRenderbuffer)}for(var I=l.textures,O=0,D=I.length;O<D;O++){var L=S.get(I[O]);L.__webglTexture&&(e.deleteTexture(L.__webglTexture),T.memory.textures--),S.remove(I[O])}S.remove(l)}(_)}function deleteTexture(l){var _=S.get(l);e.deleteTexture(_.__webglTexture);var E=l.source;delete L.get(E)[_.__cacheKey],T.memory.textures--}var B=0;function setTexture2D(l,E){var k=S.get(l);if(l.isVideoTexture&&function(e){var l=T.render.frame;D.get(e)!==l&&(D.set(e,l),e.update())}(l),!1===l.isRenderTargetTexture&&!0!==l.isExternalTexture&&l.version>0&&k.__version!==l.version){var M=l.image;if(null===M);else if(!1!==M.complete)return void uploadTexture(k,l,E)}else l.isExternalTexture&&(k.__webglTexture=l.sourceTexture?l.sourceTexture:null);_.bindTexture(e.TEXTURE_2D,k.__webglTexture,e.TEXTURE0+E)}var z=_defineProperty3(_defineProperty3(_defineProperty3({},Qd,e.REPEAT),Zd,e.CLAMP_TO_EDGE),$d,e.MIRRORED_REPEAT),j=_defineProperty3(_defineProperty3(_defineProperty3(_defineProperty3(_defineProperty3(_defineProperty3({},ef,e.NEAREST),1004,e.NEAREST_MIPMAP_NEAREST),tf,e.NEAREST_MIPMAP_LINEAR),nf,e.LINEAR),rf,e.LINEAR_MIPMAP_NEAREST),af,e.LINEAR_MIPMAP_LINEAR),G=_defineProperty3(_defineProperty3(_defineProperty3(_defineProperty3(_defineProperty3(_defineProperty3(_defineProperty3(_defineProperty3({},512,e.NEVER),519,e.ALWAYS),513,e.LESS),515,e.LEQUAL),514,e.EQUAL),518,e.GEQUAL),516,e.GREATER),517,e.NOTEQUAL);function setTextureParameters(_,k){if(k.type===df&&!1===l.has("OES_texture_float_linear")&&(k.magFilter===nf||k.magFilter===rf||k.magFilter===tf||k.magFilter===af||k.minFilter===nf||k.minFilter===rf||k.minFilter===tf||k.minFilter),e.texParameteri(_,e.TEXTURE_WRAP_S,z[k.wrapS]),e.texParameteri(_,e.TEXTURE_WRAP_T,z[k.wrapT]),_!==e.TEXTURE_3D&&_!==e.TEXTURE_2D_ARRAY||e.texParameteri(_,e.TEXTURE_WRAP_R,z[k.wrapR]),e.texParameteri(_,e.TEXTURE_MAG_FILTER,j[k.magFilter]),e.texParameteri(_,e.TEXTURE_MIN_FILTER,j[k.minFilter]),k.compareFunction&&(e.texParameteri(_,e.TEXTURE_COMPARE_MODE,e.COMPARE_REF_TO_TEXTURE),e.texParameteri(_,e.TEXTURE_COMPARE_FUNC,G[k.compareFunction])),!0===l.has("EXT_texture_filter_anisotropic")){if(k.magFilter===ef)return;if(k.minFilter!==tf&&k.minFilter!==af)return;if(k.type===df&&!1===l.has("OES_texture_float_linear"))return;if(k.anisotropy>1||S.get(k).__currentAnisotropy){var T=l.get("EXT_texture_filter_anisotropic");e.texParameterf(_,T.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(k.anisotropy,E.getMaxAnisotropy())),S.get(k).__currentAnisotropy=k.anisotropy}}}function initTexture(l,_){var S=!1;void 0===l.__webglInit&&(l.__webglInit=!0,_.addEventListener("dispose",onTextureDispose));var E=_.source,k=L.get(E);void 0===k&&(k={},L.set(E,k));var M=function(e){var l=[];return l.push(e.wrapS),l.push(e.wrapT),l.push(e.wrapR||0),l.push(e.magFilter),l.push(e.minFilter),l.push(e.anisotropy),l.push(e.internalFormat),l.push(e.format),l.push(e.type),l.push(e.generateMipmaps),l.push(e.premultiplyAlpha),l.push(e.flipY),l.push(e.unpackAlignment),l.push(e.colorSpace),l.join()}(_);if(M!==l.__cacheKey){void 0===k[M]&&(k[M]={texture:e.createTexture(),usedTimes:0},T.memory.textures++,S=!0),k[M].usedTimes++;var R=k[l.__cacheKey];void 0!==R&&(k[l.__cacheKey].usedTimes--,0===R.usedTimes&&deleteTexture(_)),l.__cacheKey=M,l.__webglTexture=k[M].texture}return S}function getRow(e,l,_){return Math.floor(Math.floor(e/_)/l)}function uploadTexture(l,T,M){var R=e.TEXTURE_2D;(T.isDataArrayTexture||T.isCompressedArrayTexture)&&(R=e.TEXTURE_2D_ARRAY),T.isData3DTexture&&(R=e.TEXTURE_3D);var I=initTexture(l,T),O=T.source;_.bindTexture(R,l.__webglTexture,e.TEXTURE0+M);var D=S.get(O);if(O.version!==D.__version||!0===I){_.activeTexture(e.TEXTURE0+M);var L=Tp.getPrimaries(Tp.workingColorSpace),U=T.colorSpace===ip?null:Tp.getPrimaries(T.colorSpace),B=T.colorSpace===ip||L===U?e.NONE:e.BROWSER_DEFAULT_WEBGL;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,T.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,T.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,T.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,B);var z=resizeImage(T.image,!1,E.maxTextureSize);z=verifyColorSpace(T,z);var j,G=k.convert(T.format,T.colorSpace),H=k.convert(T.type),V=getInternalFormat(T.internalFormat,G,H,T.colorSpace,T.isVideoTexture);setTextureParameters(R,T);var q=T.mipmaps,X=!0!==T.isVideoTexture,K=void 0===D.__version||!0===I,Y=O.dataReady,J=getMipLevels(T,z);if(T.isDepthTexture)V=getInternalDepthFormat(T.format===Sf,T.type),K&&(X?_.texStorage2D(e.TEXTURE_2D,1,V,z.width,z.height):_.texImage2D(e.TEXTURE_2D,0,V,z.width,z.height,0,G,H,null));else if(T.isDataTexture)if(q.length>0){X&&K&&_.texStorage2D(e.TEXTURE_2D,J,V,q[0].width,q[0].height);for(var Q=0,Z=q.length;Q<Z;Q++)j=q[Q],X?Y&&_.texSubImage2D(e.TEXTURE_2D,Q,0,0,j.width,j.height,G,H,j.data):_.texImage2D(e.TEXTURE_2D,Q,V,j.width,j.height,0,G,H,j.data);T.generateMipmaps=!1}else X?(K&&_.texStorage2D(e.TEXTURE_2D,J,V,z.width,z.height),Y&&function(l,S,E,k){var T=l.updateRanges;if(0===T.length)_.texSubImage2D(e.TEXTURE_2D,0,0,0,S.width,S.height,E,k,S.data);else{T.sort(function(e,l){return e.start-l.start});for(var M=0,R=1;R<T.length;R++){var I=T[M],O=T[R],D=I.start+I.count,L=getRow(O.start,S.width,4),U=getRow(I.start,S.width,4);O.start<=D+1&&L===U&&getRow(O.start+O.count-1,S.width,4)===L?I.count=Math.max(I.count,O.start+O.count-I.start):T[++M]=O}T.length=M+1;var B=e.getParameter(e.UNPACK_ROW_LENGTH),z=e.getParameter(e.UNPACK_SKIP_PIXELS),j=e.getParameter(e.UNPACK_SKIP_ROWS);e.pixelStorei(e.UNPACK_ROW_LENGTH,S.width);for(var G=0,H=T.length;G<H;G++){var V=T[G],W=Math.floor(V.start/4),q=Math.ceil(V.count/4),X=W%S.width,K=Math.floor(W/S.width),Y=q;e.pixelStorei(e.UNPACK_SKIP_PIXELS,X),e.pixelStorei(e.UNPACK_SKIP_ROWS,K),_.texSubImage2D(e.TEXTURE_2D,0,X,K,Y,1,E,k,S.data)}l.clearUpdateRanges(),e.pixelStorei(e.UNPACK_ROW_LENGTH,B),e.pixelStorei(e.UNPACK_SKIP_PIXELS,z),e.pixelStorei(e.UNPACK_SKIP_ROWS,j)}}(T,z,G,H)):_.texImage2D(e.TEXTURE_2D,0,V,z.width,z.height,0,G,H,z.data);else if(T.isCompressedTexture)if(T.isCompressedArrayTexture){X&&K&&_.texStorage3D(e.TEXTURE_2D_ARRAY,J,V,q[0].width,q[0].height,z.depth);for(var $=0,ee=q.length;$<ee;$++)if(j=q[$],T.format!==_f){if(null!==G)if(X){if(Y)if(T.layerUpdates.size>0){var te,ne=getByteLength(j.width,j.height,T.format,T.type),re=_createForOfIteratorHelper2(T.layerUpdates);try{for(re.s();!(te=re.n()).done;){var ie=te.value,ae=j.data.subarray(ie*ne/j.data.BYTES_PER_ELEMENT,(ie+1)*ne/j.data.BYTES_PER_ELEMENT);_.compressedTexSubImage3D(e.TEXTURE_2D_ARRAY,$,0,0,ie,j.width,j.height,1,G,ae)}}catch(W){re.e(W)}finally{re.f()}T.clearLayerUpdates()}else _.compressedTexSubImage3D(e.TEXTURE_2D_ARRAY,$,0,0,0,j.width,j.height,z.depth,G,j.data)}else _.compressedTexImage3D(e.TEXTURE_2D_ARRAY,$,V,j.width,j.height,z.depth,0,j.data,0,0)}else X?Y&&_.texSubImage3D(e.TEXTURE_2D_ARRAY,$,0,0,0,j.width,j.height,z.depth,G,H,j.data):_.texImage3D(e.TEXTURE_2D_ARRAY,$,V,j.width,j.height,z.depth,0,G,H,j.data)}else{X&&K&&_.texStorage2D(e.TEXTURE_2D,J,V,q[0].width,q[0].height);for(var oe=0,se=q.length;oe<se;oe++)j=q[oe],T.format!==_f?null!==G&&(X?Y&&_.compressedTexSubImage2D(e.TEXTURE_2D,oe,0,0,j.width,j.height,G,j.data):_.compressedTexImage2D(e.TEXTURE_2D,oe,V,j.width,j.height,0,j.data)):X?Y&&_.texSubImage2D(e.TEXTURE_2D,oe,0,0,j.width,j.height,G,H,j.data):_.texImage2D(e.TEXTURE_2D,oe,V,j.width,j.height,0,G,H,j.data)}else if(T.isDataArrayTexture)if(X){if(K&&_.texStorage3D(e.TEXTURE_2D_ARRAY,J,V,z.width,z.height,z.depth),Y)if(T.layerUpdates.size>0){var ue,le=getByteLength(z.width,z.height,T.format,T.type),ce=_createForOfIteratorHelper2(T.layerUpdates);try{for(ce.s();!(ue=ce.n()).done;){var he=ue.value,de=z.data.subarray(he*le/z.data.BYTES_PER_ELEMENT,(he+1)*le/z.data.BYTES_PER_ELEMENT);_.texSubImage3D(e.TEXTURE_2D_ARRAY,0,0,0,he,z.width,z.height,1,G,H,de)}}catch(W){ce.e(W)}finally{ce.f()}T.clearLayerUpdates()}else _.texSubImage3D(e.TEXTURE_2D_ARRAY,0,0,0,0,z.width,z.height,z.depth,G,H,z.data)}else _.texImage3D(e.TEXTURE_2D_ARRAY,0,V,z.width,z.height,z.depth,0,G,H,z.data);else if(T.isData3DTexture)X?(K&&_.texStorage3D(e.TEXTURE_3D,J,V,z.width,z.height,z.depth),Y&&_.texSubImage3D(e.TEXTURE_3D,0,0,0,0,z.width,z.height,z.depth,G,H,z.data)):_.texImage3D(e.TEXTURE_3D,0,V,z.width,z.height,z.depth,0,G,H,z.data);else if(T.isFramebufferTexture){if(K)if(X)_.texStorage2D(e.TEXTURE_2D,J,V,z.width,z.height);else for(var fe=z.width,pe=z.height,ve=0;ve<J;ve++)_.texImage2D(e.TEXTURE_2D,ve,V,fe,pe,0,G,H,null),fe>>=1,pe>>=1}else if(q.length>0){if(X&&K){var ge=getDimensions(q[0]);_.texStorage2D(e.TEXTURE_2D,J,V,ge.width,ge.height)}for(var me=0,ye=q.length;me<ye;me++)j=q[me],X?Y&&_.texSubImage2D(e.TEXTURE_2D,me,0,0,G,H,j):_.texImage2D(e.TEXTURE_2D,me,V,G,H,j);T.generateMipmaps=!1}else if(X){if(K){var _e=getDimensions(z);_.texStorage2D(e.TEXTURE_2D,J,V,_e.width,_e.height)}Y&&_.texSubImage2D(e.TEXTURE_2D,0,0,0,G,H,z)}else _.texImage2D(e.TEXTURE_2D,0,V,G,H,z);textureNeedsGenerateMipmaps(T)&&generateMipmap(R),D.__version=O.version,T.onUpdate&&T.onUpdate(T)}l.__version=T.version}function setupFrameBufferTexture(l,E,T,M,I,O){var D=k.convert(T.format,T.colorSpace),L=k.convert(T.type),U=getInternalFormat(T.internalFormat,D,L,T.colorSpace),B=S.get(E),z=S.get(T);if(z.__renderTarget=E,!B.__hasExternalTextures){var j=Math.max(1,E.width>>O),G=Math.max(1,E.height>>O);I===e.TEXTURE_3D||I===e.TEXTURE_2D_ARRAY?_.texImage3D(I,O,U,j,G,E.depth,0,D,L,null):_.texImage2D(I,O,U,j,G,0,D,L,null)}_.bindFramebuffer(e.FRAMEBUFFER,l),useMultisampledRTT(E)?R.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,M,I,z.__webglTexture,0,getRenderTargetSamples(E)):(I===e.TEXTURE_2D||I>=e.TEXTURE_CUBE_MAP_POSITIVE_X&&I<=e.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&e.framebufferTexture2D(e.FRAMEBUFFER,M,I,z.__webglTexture,O),_.bindFramebuffer(e.FRAMEBUFFER,null)}function setupRenderBufferStorage(l,_,S){if(e.bindRenderbuffer(e.RENDERBUFFER,l),_.depthBuffer){var E=_.depthTexture,T=E&&E.isDepthTexture?E.type:null,M=getInternalDepthFormat(_.stencilBuffer,T),I=_.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,O=getRenderTargetSamples(_);useMultisampledRTT(_)?R.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,O,M,_.width,_.height):S?e.renderbufferStorageMultisample(e.RENDERBUFFER,O,M,_.width,_.height):e.renderbufferStorage(e.RENDERBUFFER,M,_.width,_.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,I,e.RENDERBUFFER,l)}else for(var D=_.textures,L=0;L<D.length;L++){var U=D[L],B=k.convert(U.format,U.colorSpace),z=k.convert(U.type),j=getInternalFormat(U.internalFormat,B,z,U.colorSpace),G=getRenderTargetSamples(_);S&&!1===useMultisampledRTT(_)?e.renderbufferStorageMultisample(e.RENDERBUFFER,G,j,_.width,_.height):useMultisampledRTT(_)?R.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,G,j,_.width,_.height):e.renderbufferStorage(e.RENDERBUFFER,j,_.width,_.height)}e.bindRenderbuffer(e.RENDERBUFFER,null)}function setupDepthTexture(l,E){if(E&&E.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(_.bindFramebuffer(e.FRAMEBUFFER,l),!E.depthTexture||!E.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");var k=S.get(E.depthTexture);k.__renderTarget=E,k.__webglTexture&&E.depthTexture.image.width===E.width&&E.depthTexture.image.height===E.height||(E.depthTexture.image.width=E.width,E.depthTexture.image.height=E.height,E.depthTexture.needsUpdate=!0),setTexture2D(E.depthTexture,0);var T=k.__webglTexture,M=getRenderTargetSamples(E);if(E.depthTexture.format===bf)useMultisampledRTT(E)?R.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,T,0,M):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,T,0);else{if(E.depthTexture.format!==Sf)throw new Error("Unknown depthTexture format");useMultisampledRTT(E)?R.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,T,0,M):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,T,0)}}function setupDepthRenderbuffer(l){var E=S.get(l),k=!0===l.isWebGLCubeRenderTarget;if(E.__boundDepthTexture!==l.depthTexture){var T=l.depthTexture;if(E.__depthDisposeCallback&&E.__depthDisposeCallback(),T){var _disposeEvent=function(){delete E.__boundDepthTexture,delete E.__depthDisposeCallback,T.removeEventListener("dispose",_disposeEvent)};T.addEventListener("dispose",_disposeEvent),E.__depthDisposeCallback=_disposeEvent}E.__boundDepthTexture=T}if(l.depthTexture&&!E.__autoAllocateDepthBuffer){if(k)throw new Error("target.depthTexture not supported in Cube render targets");var M=l.texture.mipmaps;M&&M.length>0?setupDepthTexture(E.__webglFramebuffer[0],l):setupDepthTexture(E.__webglFramebuffer,l)}else if(k){E.__webglDepthbuffer=[];for(var R=0;R<6;R++)if(_.bindFramebuffer(e.FRAMEBUFFER,E.__webglFramebuffer[R]),void 0===E.__webglDepthbuffer[R])E.__webglDepthbuffer[R]=e.createRenderbuffer(),setupRenderBufferStorage(E.__webglDepthbuffer[R],l,!1);else{var I=l.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,O=E.__webglDepthbuffer[R];e.bindRenderbuffer(e.RENDERBUFFER,O),e.framebufferRenderbuffer(e.FRAMEBUFFER,I,e.RENDERBUFFER,O)}}else{var D=l.texture.mipmaps;if(D&&D.length>0?_.bindFramebuffer(e.FRAMEBUFFER,E.__webglFramebuffer[0]):_.bindFramebuffer(e.FRAMEBUFFER,E.__webglFramebuffer),void 0===E.__webglDepthbuffer)E.__webglDepthbuffer=e.createRenderbuffer(),setupRenderBufferStorage(E.__webglDepthbuffer,l,!1);else{var L=l.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,U=E.__webglDepthbuffer;e.bindRenderbuffer(e.RENDERBUFFER,U),e.framebufferRenderbuffer(e.FRAMEBUFFER,L,e.RENDERBUFFER,U)}}_.bindFramebuffer(e.FRAMEBUFFER,null)}var H=[],V=[];function getRenderTargetSamples(e){return Math.min(E.maxSamples,e.samples)}function useMultisampledRTT(e){var _=S.get(e);return e.samples>0&&!0===l.has("WEBGL_multisampled_render_to_texture")&&!1!==_.__useRenderToTexture}function verifyColorSpace(e,l){var _=e.colorSpace;e.format,e.type;return!0===e.isCompressedTexture||!0===e.isVideoTexture||_!==op&&_!==ip&&Tp.getTransfer(_),l}function getDimensions(e){return"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement?(O.width=e.naturalWidth||e.width,O.height=e.naturalHeight||e.height):"undefined"!=typeof VideoFrame&&e instanceof VideoFrame?(O.width=e.displayWidth,O.height=e.displayHeight):(O.width=e.width,O.height=e.height),O}this.allocateTextureUnit=function(){var e=B;return E.maxTextures,B+=1,e},this.resetTextureUnits=function(){B=0},this.setTexture2D=setTexture2D,this.setTexture2DArray=function(l,E){var k=S.get(l);!1===l.isRenderTargetTexture&&l.version>0&&k.__version!==l.version?uploadTexture(k,l,E):_.bindTexture(e.TEXTURE_2D_ARRAY,k.__webglTexture,e.TEXTURE0+E)},this.setTexture3D=function(l,E){var k=S.get(l);!1===l.isRenderTargetTexture&&l.version>0&&k.__version!==l.version?uploadTexture(k,l,E):_.bindTexture(e.TEXTURE_3D,k.__webglTexture,e.TEXTURE0+E)},this.setTextureCube=function(l,T){var M=S.get(l);l.version>0&&M.__version!==l.version?function(l,T,M){if(6!==T.image.length)return;var R=initTexture(l,T),I=T.source;_.bindTexture(e.TEXTURE_CUBE_MAP,l.__webglTexture,e.TEXTURE0+M);var O=S.get(I);if(I.version!==O.__version||!0===R){_.activeTexture(e.TEXTURE0+M);var D=Tp.getPrimaries(Tp.workingColorSpace),L=T.colorSpace===ip?null:Tp.getPrimaries(T.colorSpace),U=T.colorSpace===ip||D===L?e.NONE:e.BROWSER_DEFAULT_WEBGL;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,T.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,T.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,T.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,U);for(var B=T.isCompressedTexture||T.image[0].isCompressedTexture,z=T.image[0]&&T.image[0].isDataTexture,j=[],G=0;G<6;G++)j[G]=B||z?z?T.image[G].image:T.image[G]:resizeImage(T.image[G],!0,E.maxCubemapSize),j[G]=verifyColorSpace(T,j[G]);var H,V=j[0],W=k.convert(T.format,T.colorSpace),q=k.convert(T.type),X=getInternalFormat(T.internalFormat,W,q,T.colorSpace),K=!0!==T.isVideoTexture,Y=void 0===O.__version||!0===R,J=I.dataReady,Q=getMipLevels(T,V);if(setTextureParameters(e.TEXTURE_CUBE_MAP,T),B){K&&Y&&_.texStorage2D(e.TEXTURE_CUBE_MAP,Q,X,V.width,V.height);for(var Z=0;Z<6;Z++){H=j[Z].mipmaps;for(var $=0;$<H.length;$++){var ee=H[$];T.format!==_f?null!==W&&(K?J&&_.compressedTexSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+Z,$,0,0,ee.width,ee.height,W,ee.data):_.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+Z,$,X,ee.width,ee.height,0,ee.data)):K?J&&_.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+Z,$,0,0,ee.width,ee.height,W,q,ee.data):_.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+Z,$,X,ee.width,ee.height,0,W,q,ee.data)}}}else{if(H=T.mipmaps,K&&Y){H.length>0&&Q++;var te=getDimensions(j[0]);_.texStorage2D(e.TEXTURE_CUBE_MAP,Q,X,te.width,te.height)}for(var ne=0;ne<6;ne++)if(z){K?J&&_.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+ne,0,0,0,j[ne].width,j[ne].height,W,q,j[ne].data):_.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+ne,0,X,j[ne].width,j[ne].height,0,W,q,j[ne].data);for(var re=0;re<H.length;re++){var ie=H[re].image[ne].image;K?J&&_.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+ne,re+1,0,0,ie.width,ie.height,W,q,ie.data):_.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+ne,re+1,X,ie.width,ie.height,0,W,q,ie.data)}}else{K?J&&_.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+ne,0,0,0,W,q,j[ne]):_.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+ne,0,X,W,q,j[ne]);for(var ae=0;ae<H.length;ae++){var oe=H[ae];K?J&&_.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+ne,ae+1,0,0,W,q,oe.image[ne]):_.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+ne,ae+1,X,W,q,oe.image[ne])}}}textureNeedsGenerateMipmaps(T)&&generateMipmap(e.TEXTURE_CUBE_MAP),O.__version=I.version,T.onUpdate&&T.onUpdate(T)}l.__version=T.version}(M,l,T):_.bindTexture(e.TEXTURE_CUBE_MAP,M.__webglTexture,e.TEXTURE0+T)},this.rebindTextures=function(l,_,E){var k=S.get(l);void 0!==_&&setupFrameBufferTexture(k.__webglFramebuffer,l,l.texture,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,0),void 0!==E&&setupDepthRenderbuffer(l)},this.setupRenderTarget=function(l){var E=l.texture,M=S.get(l),R=S.get(E);l.addEventListener("dispose",onRenderTargetDispose);var I=l.textures,O=!0===l.isWebGLCubeRenderTarget,D=I.length>1;if(D||(void 0===R.__webglTexture&&(R.__webglTexture=e.createTexture()),R.__version=E.version,T.memory.textures++),O){M.__webglFramebuffer=[];for(var L=0;L<6;L++)if(E.mipmaps&&E.mipmaps.length>0){M.__webglFramebuffer[L]=[];for(var U=0;U<E.mipmaps.length;U++)M.__webglFramebuffer[L][U]=e.createFramebuffer()}else M.__webglFramebuffer[L]=e.createFramebuffer()}else{if(E.mipmaps&&E.mipmaps.length>0){M.__webglFramebuffer=[];for(var B=0;B<E.mipmaps.length;B++)M.__webglFramebuffer[B]=e.createFramebuffer()}else M.__webglFramebuffer=e.createFramebuffer();if(D)for(var z=0,j=I.length;z<j;z++){var G=S.get(I[z]);void 0===G.__webglTexture&&(G.__webglTexture=e.createTexture(),T.memory.textures++)}if(l.samples>0&&!1===useMultisampledRTT(l)){M.__webglMultisampledFramebuffer=e.createFramebuffer(),M.__webglColorRenderbuffer=[],_.bindFramebuffer(e.FRAMEBUFFER,M.__webglMultisampledFramebuffer);for(var H=0;H<I.length;H++){var V=I[H];M.__webglColorRenderbuffer[H]=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,M.__webglColorRenderbuffer[H]);var W=k.convert(V.format,V.colorSpace),q=k.convert(V.type),X=getInternalFormat(V.internalFormat,W,q,V.colorSpace,!0===l.isXRRenderTarget),K=getRenderTargetSamples(l);e.renderbufferStorageMultisample(e.RENDERBUFFER,K,X,l.width,l.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+H,e.RENDERBUFFER,M.__webglColorRenderbuffer[H])}e.bindRenderbuffer(e.RENDERBUFFER,null),l.depthBuffer&&(M.__webglDepthRenderbuffer=e.createRenderbuffer(),setupRenderBufferStorage(M.__webglDepthRenderbuffer,l,!0)),_.bindFramebuffer(e.FRAMEBUFFER,null)}}if(O){_.bindTexture(e.TEXTURE_CUBE_MAP,R.__webglTexture),setTextureParameters(e.TEXTURE_CUBE_MAP,E);for(var Y=0;Y<6;Y++)if(E.mipmaps&&E.mipmaps.length>0)for(var J=0;J<E.mipmaps.length;J++)setupFrameBufferTexture(M.__webglFramebuffer[Y][J],l,E,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+Y,J);else setupFrameBufferTexture(M.__webglFramebuffer[Y],l,E,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+Y,0);textureNeedsGenerateMipmaps(E)&&generateMipmap(e.TEXTURE_CUBE_MAP),_.unbindTexture()}else if(D){for(var Q=0,Z=I.length;Q<Z;Q++){var $=I[Q],ee=S.get($),te=e.TEXTURE_2D;(l.isWebGL3DRenderTarget||l.isWebGLArrayRenderTarget)&&(te=l.isWebGL3DRenderTarget?e.TEXTURE_3D:e.TEXTURE_2D_ARRAY),_.bindTexture(te,ee.__webglTexture),setTextureParameters(te,$),setupFrameBufferTexture(M.__webglFramebuffer,l,$,e.COLOR_ATTACHMENT0+Q,te,0),textureNeedsGenerateMipmaps($)&&generateMipmap(te)}_.unbindTexture()}else{var ne=e.TEXTURE_2D;if((l.isWebGL3DRenderTarget||l.isWebGLArrayRenderTarget)&&(ne=l.isWebGL3DRenderTarget?e.TEXTURE_3D:e.TEXTURE_2D_ARRAY),_.bindTexture(ne,R.__webglTexture),setTextureParameters(ne,E),E.mipmaps&&E.mipmaps.length>0)for(var re=0;re<E.mipmaps.length;re++)setupFrameBufferTexture(M.__webglFramebuffer[re],l,E,e.COLOR_ATTACHMENT0,ne,re);else setupFrameBufferTexture(M.__webglFramebuffer,l,E,e.COLOR_ATTACHMENT0,ne,0);textureNeedsGenerateMipmaps(E)&&generateMipmap(ne),_.unbindTexture()}l.depthBuffer&&setupDepthRenderbuffer(l)},this.updateRenderTargetMipmap=function(e){for(var l=e.textures,E=0,k=l.length;E<k;E++){var T=l[E];if(textureNeedsGenerateMipmaps(T)){var M=getTargetType(e),R=S.get(T).__webglTexture;_.bindTexture(M,R),generateMipmap(M),_.unbindTexture()}}},this.updateMultisampleRenderTarget=function(l){if(l.samples>0)if(!1===useMultisampledRTT(l)){var E=l.textures,k=l.width,T=l.height,M=e.COLOR_BUFFER_BIT,R=l.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,O=S.get(l),D=E.length>1;if(D)for(var L=0;L<E.length;L++)_.bindFramebuffer(e.FRAMEBUFFER,O.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+L,e.RENDERBUFFER,null),_.bindFramebuffer(e.FRAMEBUFFER,O.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+L,e.TEXTURE_2D,null,0);_.bindFramebuffer(e.READ_FRAMEBUFFER,O.__webglMultisampledFramebuffer);var U=l.texture.mipmaps;U&&U.length>0?_.bindFramebuffer(e.DRAW_FRAMEBUFFER,O.__webglFramebuffer[0]):_.bindFramebuffer(e.DRAW_FRAMEBUFFER,O.__webglFramebuffer);for(var B=0;B<E.length;B++){if(l.resolveDepthBuffer&&(l.depthBuffer&&(M|=e.DEPTH_BUFFER_BIT),l.stencilBuffer&&l.resolveStencilBuffer&&(M|=e.STENCIL_BUFFER_BIT)),D){e.framebufferRenderbuffer(e.READ_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,O.__webglColorRenderbuffer[B]);var z=S.get(E[B]).__webglTexture;e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,z,0)}e.blitFramebuffer(0,0,k,T,0,0,k,T,M,e.NEAREST),!0===I&&(H.length=0,V.length=0,H.push(e.COLOR_ATTACHMENT0+B),l.depthBuffer&&!1===l.resolveDepthBuffer&&(H.push(R),V.push(R),e.invalidateFramebuffer(e.DRAW_FRAMEBUFFER,V)),e.invalidateFramebuffer(e.READ_FRAMEBUFFER,H))}if(_.bindFramebuffer(e.READ_FRAMEBUFFER,null),_.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),D)for(var j=0;j<E.length;j++){_.bindFramebuffer(e.FRAMEBUFFER,O.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+j,e.RENDERBUFFER,O.__webglColorRenderbuffer[j]);var G=S.get(E[j]).__webglTexture;_.bindFramebuffer(e.FRAMEBUFFER,O.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+j,e.TEXTURE_2D,G,0)}_.bindFramebuffer(e.DRAW_FRAMEBUFFER,O.__webglMultisampledFramebuffer)}else if(l.depthBuffer&&!1===l.resolveDepthBuffer&&I){var W=l.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT;e.invalidateFramebuffer(e.DRAW_FRAMEBUFFER,[W])}},this.setupDepthRenderbuffer=setupDepthRenderbuffer,this.setupFrameBufferTexture=setupFrameBufferTexture,this.useMultisampledRTT=useMultisampledRTT}function WebGLUtils(e,l){return{convert:function(_){var S,E=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ip,k=Tp.getTransfer(E);if(_===of)return e.UNSIGNED_BYTE;if(_===pf)return e.UNSIGNED_SHORT_4_4_4_4;if(_===vf)return e.UNSIGNED_SHORT_5_5_5_1;if(_===mf)return e.UNSIGNED_INT_5_9_9_9_REV;if(_===yf)return e.UNSIGNED_INT_10F_11F_11F_REV;if(_===sf)return e.BYTE;if(_===uf)return e.SHORT;if(_===lf)return e.UNSIGNED_SHORT;if(_===cf)return e.INT;if(_===hf)return e.UNSIGNED_INT;if(_===df)return e.FLOAT;if(_===ff)return e.HALF_FLOAT;if(1021===_)return e.ALPHA;if(1022===_)return e.RGB;if(_===_f)return e.RGBA;if(_===bf)return e.DEPTH_COMPONENT;if(_===Sf)return e.DEPTH_STENCIL;if(1028===_)return e.RED;if(_===wf)return e.RED_INTEGER;if(1030===_)return e.RG;if(_===xf)return e.RG_INTEGER;if(_===Ef)return e.RGBA_INTEGER;if(_===kf||_===Af||_===Cf||_===Tf)if(k===up){if(null===(S=l.get("WEBGL_compressed_texture_s3tc_srgb")))return null;if(_===kf)return S.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(_===Af)return S.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(_===Cf)return S.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(_===Tf)return S.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(null===(S=l.get("WEBGL_compressed_texture_s3tc")))return null;if(_===kf)return S.COMPRESSED_RGB_S3TC_DXT1_EXT;if(_===Af)return S.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(_===Cf)return S.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(_===Tf)return S.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(_===Mf||_===Rf||_===If||_===Pf){if(null===(S=l.get("WEBGL_compressed_texture_pvrtc")))return null;if(_===Mf)return S.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(_===Rf)return S.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(_===If)return S.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(_===Pf)return S.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(_===Of||_===Df||_===Lf){if(null===(S=l.get("WEBGL_compressed_texture_etc")))return null;if(_===Of||_===Df)return k===up?S.COMPRESSED_SRGB8_ETC2:S.COMPRESSED_RGB8_ETC2;if(_===Lf)return k===up?S.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:S.COMPRESSED_RGBA8_ETC2_EAC}if(_===Uf||_===Ff||_===Nf||_===Bf||_===zf||_===jf||_===Gf||_===Hf||_===Vf||_===Wf||_===qf||_===Xf||_===Kf||_===Yf){if(null===(S=l.get("WEBGL_compressed_texture_astc")))return null;if(_===Uf)return k===up?S.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:S.COMPRESSED_RGBA_ASTC_4x4_KHR;if(_===Ff)return k===up?S.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:S.COMPRESSED_RGBA_ASTC_5x4_KHR;if(_===Nf)return k===up?S.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:S.COMPRESSED_RGBA_ASTC_5x5_KHR;if(_===Bf)return k===up?S.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:S.COMPRESSED_RGBA_ASTC_6x5_KHR;if(_===zf)return k===up?S.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:S.COMPRESSED_RGBA_ASTC_6x6_KHR;if(_===jf)return k===up?S.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:S.COMPRESSED_RGBA_ASTC_8x5_KHR;if(_===Gf)return k===up?S.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:S.COMPRESSED_RGBA_ASTC_8x6_KHR;if(_===Hf)return k===up?S.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:S.COMPRESSED_RGBA_ASTC_8x8_KHR;if(_===Vf)return k===up?S.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:S.COMPRESSED_RGBA_ASTC_10x5_KHR;if(_===Wf)return k===up?S.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:S.COMPRESSED_RGBA_ASTC_10x6_KHR;if(_===qf)return k===up?S.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:S.COMPRESSED_RGBA_ASTC_10x8_KHR;if(_===Xf)return k===up?S.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:S.COMPRESSED_RGBA_ASTC_10x10_KHR;if(_===Kf)return k===up?S.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:S.COMPRESSED_RGBA_ASTC_12x10_KHR;if(_===Yf)return k===up?S.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:S.COMPRESSED_RGBA_ASTC_12x12_KHR}if(_===Jf||_===Qf||_===Zf){if(null===(S=l.get("EXT_texture_compression_bptc")))return null;if(_===Jf)return k===up?S.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:S.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(_===Qf)return S.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(_===Zf)return S.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}if(_===$f||_===ep||_===tp||_===np){if(null===(S=l.get("EXT_texture_compression_rgtc")))return null;if(_===$f)return S.COMPRESSED_RED_RGTC1_EXT;if(_===ep)return S.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(_===tp)return S.COMPRESSED_RED_GREEN_RGTC2_EXT;if(_===np)return S.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return _===gf?e.UNSIGNED_INT_24_8:void 0!==e[_]?e[_]:null}}}var ky=function(){return _createClass3(function WebXRDepthSensing(){_classCallCheck3(this,WebXRDepthSensing),this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0},[{key:"init",value:function(e,l){if(null===this.texture){var _=new um(e.texture);e.depthNear===l.depthNear&&e.depthFar===l.depthFar||(this.depthNear=e.depthNear,this.depthFar=e.depthFar),this.texture=_}}},{key:"getMesh",value:function(e){if(null!==this.texture&&null===this.mesh){var l=e.cameras[0].viewport,_=new Fg({vertexShader:"\nvoid main() {\n\n\tgl_Position = vec4( position, 1.0 );\n\n}",fragmentShader:"\nuniform sampler2DArray depthColor;\nuniform float depthWidth;\nuniform float depthHeight;\n\nvoid main() {\n\n\tvec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );\n\n\tif ( coord.x >= 1.0 ) {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;\n\n\t} else {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;\n\n\t}\n\n}",uniforms:{depthColor:{value:this.texture},depthWidth:{value:l.z},depthHeight:{value:l.w}}});this.mesh=new Dg(new km(20,20),_)}return this.mesh}},{key:"reset",value:function(){this.texture=null,this.mesh=null}},{key:"getDepthTexture",value:function(){return this.texture}}])}(),Ay=function(e){function WebXRManager(e,l){var _;_classCallCheck3(this,WebXRManager);var S=_=_callSuper(this,WebXRManager),E=null,k=1,T=null,M="local-floor",R=1,I=null,O=null,D=null,L=null,U=null,B=null,z="undefined"!=typeof XRWebGLBinding,j=new ky,G={},H=l.getContextAttributes(),V=null,W=null,q=[],X=[],K=new mp,Y=null,J=new Gg;J.viewport=new Lp;var Q=new Gg;Q.viewport=new Lp;var Z=[J,Q],$=new Im,ee=null,te=null;function onSessionEvent(e){var l=X.indexOf(e.inputSource);if(-1!==l){var _=q[l];void 0!==_&&(_.update(e.inputSource,e.frame,I||T),_.dispatchEvent({type:e.type,data:e.inputSource}))}}function onSessionEnd(){E.removeEventListener("select",onSessionEvent),E.removeEventListener("selectstart",onSessionEvent),E.removeEventListener("selectend",onSessionEvent),E.removeEventListener("squeeze",onSessionEvent),E.removeEventListener("squeezestart",onSessionEvent),E.removeEventListener("squeezeend",onSessionEvent),E.removeEventListener("end",onSessionEnd),E.removeEventListener("inputsourceschange",onInputSourcesChange);for(var l=0;l<q.length;l++){var _=X[l];null!==_&&(X[l]=null,q[l].disconnect(_))}for(var k in ee=null,te=null,j.reset(),G)delete G[k];e.setRenderTarget(V),U=null,L=null,D=null,E=null,W=null,ae.stop(),S.isPresenting=!1,e.setPixelRatio(Y),e.setSize(K.width,K.height,!1),S.dispatchEvent({type:"sessionend"})}function onInputSourcesChange(e){for(var l=0;l<e.removed.length;l++){var _=e.removed[l],S=X.indexOf(_);S>=0&&(X[S]=null,q[S].disconnect(_))}for(var E=0;E<e.added.length;E++){var k=e.added[E],T=X.indexOf(k);if(-1===T){for(var M=0;M<q.length;M++){if(M>=X.length){X.push(k),T=M;break}if(null===X[M]){X[M]=k,T=M;break}}if(-1===T)break}var R=q[T];R&&R.connect(k)}}_.cameraAutoUpdate=!0,_.enabled=!1,_.isPresenting=!1,_.getController=function(e){var l=q[e];return void 0===l&&(l=new Yg,q[e]=l),l.getTargetRaySpace()},_.getControllerGrip=function(e){var l=q[e];return void 0===l&&(l=new Yg,q[e]=l),l.getGripSpace()},_.getHand=function(e){var l=q[e];return void 0===l&&(l=new Yg,q[e]=l),l.getHandSpace()},_.setFramebufferScaleFactor=function(e){k=e,S.isPresenting},_.setReferenceSpaceType=function(e){M=e,S.isPresenting},_.getReferenceSpace=function(){return I||T},_.setReferenceSpace=function(e){I=e},_.getBaseLayer=function(){return null!==L?L:U},_.getBinding=function(){return null===D&&z&&(D=new XRWebGLBinding(E,l)),D},_.getFrame=function(){return B},_.getSession=function(){return E},_.setSession=function(){var _=_asyncToGenerator(_regenerator().m(function _callee224(_){var O,B,j,G,q;return _regenerator().w(function(X){for(;;)switch(X.n){case 0:if(null===(E=_)){X.n=3;break}if(V=e.getRenderTarget(),E.addEventListener("select",onSessionEvent),E.addEventListener("selectstart",onSessionEvent),E.addEventListener("selectend",onSessionEvent),E.addEventListener("squeeze",onSessionEvent),E.addEventListener("squeezestart",onSessionEvent),E.addEventListener("squeezeend",onSessionEvent),E.addEventListener("end",onSessionEnd),E.addEventListener("inputsourceschange",onInputSourcesChange),!0===H.xrCompatible){X.n=1;break}return X.n=1,l.makeXRCompatible();case 1:return Y=e.getPixelRatio(),e.getSize(K),z&&"createProjectionLayer"in XRWebGLBinding.prototype?(B=null,j=null,G=null,H.depth&&(G=H.stencil?l.DEPTH24_STENCIL8:l.DEPTH_COMPONENT24,B=H.stencil?Sf:bf,j=H.stencil?gf:hf),q={colorFormat:l.RGBA8,depthFormat:G,scaleFactor:k},D=this.getBinding(),L=D.createProjectionLayer(q),E.updateRenderState({layers:[L]}),e.setPixelRatio(1),e.setSize(L.textureWidth,L.textureHeight,!1),W=new Fp(L.textureWidth,L.textureHeight,{format:_f,type:of,depthTexture:new sm(L.textureWidth,L.textureHeight,j,void 0,void 0,void 0,void 0,void 0,void 0,B),stencilBuffer:H.stencil,colorSpace:e.outputColorSpace,samples:H.antialias?4:0,resolveDepthBuffer:!1===L.ignoreDepthValues,resolveStencilBuffer:!1===L.ignoreDepthValues})):(O={antialias:H.antialias,alpha:!0,depth:H.depth,stencil:H.stencil,framebufferScaleFactor:k},U=new XRWebGLLayer(E,l,O),E.updateRenderState({baseLayer:U}),e.setPixelRatio(1),e.setSize(U.framebufferWidth,U.framebufferHeight,!1),W=new Fp(U.framebufferWidth,U.framebufferHeight,{format:_f,type:of,colorSpace:e.outputColorSpace,stencilBuffer:H.stencil,resolveDepthBuffer:!1===U.ignoreDepthValues,resolveStencilBuffer:!1===U.ignoreDepthValues})),W.isXRRenderTarget=!0,this.setFoveation(R),I=null,X.n=2,E.requestReferenceSpace(M);case 2:T=X.v,ae.setContext(E),ae.start(),S.isPresenting=!0,S.dispatchEvent({type:"sessionstart"});case 3:return X.a(2)}},_callee224,this)}));return function(e){return _.apply(this,arguments)}}(),_.getEnvironmentBlendMode=function(){if(null!==E)return E.environmentBlendMode},_.getDepthTexture=function(){return j.getDepthTexture()};var ne=new _p,re=new _p;function updateCamera(e,l){null===l?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(l.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}_.updateCamera=function(e){if(null!==E){var l=e.near,_=e.far;null!==j.texture&&(j.depthNear>0&&(l=j.depthNear),j.depthFar>0&&(_=j.depthFar)),$.near=Q.near=J.near=l,$.far=Q.far=J.far=_,ee===$.near&&te===$.far||(E.updateRenderState({depthNear:$.near,depthFar:$.far}),ee=$.near,te=$.far),$.layers.mask=6|e.layers.mask,J.layers.mask=3&$.layers.mask,Q.layers.mask=5&$.layers.mask;var S=e.parent,k=$.cameras;updateCamera($,S);for(var T=0;T<k.length;T++)updateCamera(k[T],S);2===k.length?function(e,l,_){ne.setFromMatrixPosition(l.matrixWorld),re.setFromMatrixPosition(_.matrixWorld);var S=ne.distanceTo(re),E=l.projectionMatrix.elements,k=_.projectionMatrix.elements,T=E[14]/(E[10]-1),M=E[14]/(E[10]+1),R=(E[9]+1)/E[5],I=(E[9]-1)/E[5],O=(E[8]-1)/E[0],D=(k[8]+1)/k[0],L=T*O,U=T*D,B=S/(-O+D),z=B*-O;if(l.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(z),e.translateZ(B),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert(),-1===E[10])e.projectionMatrix.copy(l.projectionMatrix),e.projectionMatrixInverse.copy(l.projectionMatrixInverse);else{var j=T+B,G=M+B,H=L-z,V=U+(S-z),W=R*M/G*j,q=I*M/G*j;e.projectionMatrix.makePerspective(H,V,W,q,j,G),e.projectionMatrixInverse.copy(e.projectionMatrix).invert()}}($,J,Q):$.projectionMatrix.copy(J.projectionMatrix),function(e,l,_){null===_?e.matrix.copy(l.matrixWorld):(e.matrix.copy(_.matrixWorld),e.matrix.invert(),e.matrix.multiply(l.matrixWorld));e.matrix.decompose(e.position,e.quaternion,e.scale),e.updateMatrixWorld(!0),e.projectionMatrix.copy(l.projectionMatrix),e.projectionMatrixInverse.copy(l.projectionMatrixInverse),e.isPerspectiveCamera&&(e.fov=2*gp*Math.atan(1/e.projectionMatrix.elements[5]),e.zoom=1)}(e,$,S)}},_.getCamera=function(){return $},_.getFoveation=function(){if(null!==L||null!==U)return R},_.setFoveation=function(e){R=e,null!==L&&(L.fixedFoveation=e),null!==U&&void 0!==U.fixedFoveation&&(U.fixedFoveation=e)},_.hasDepthSensing=function(){return null!==j.texture},_.getDepthSensingMesh=function(){return j.getMesh($)},_.getCameraTexture=function(e){return G[e]};var ie=null;var ae=new WebGLAnimation;return ae.setAnimationLoop(function(l,_){if(O=_.getViewerPose(I||T),B=_,null!==O){var k=O.views;null!==U&&(e.setRenderTargetFramebuffer(W,U.framebuffer),e.setRenderTarget(W));var M=!1;k.length!==$.cameras.length&&($.cameras.length=0,M=!0);for(var R=0;R<k.length;R++){var H=k[R],V=null;if(null!==U)V=U.getViewport(H);else{var K=D.getViewSubImage(L,H);V=K.viewport,0===R&&(e.setRenderTargetTextures(W,K.colorTexture,K.depthStencilTexture),e.setRenderTarget(W))}var Y=Z[R];void 0===Y&&((Y=new Gg).layers.enable(R),Y.viewport=new Lp,Z[R]=Y),Y.matrix.fromArray(H.transform.matrix),Y.matrix.decompose(Y.position,Y.quaternion,Y.scale),Y.projectionMatrix.fromArray(H.projectionMatrix),Y.projectionMatrixInverse.copy(Y.projectionMatrix).invert(),Y.viewport.set(V.x,V.y,V.width,V.height),0===R&&($.matrix.copy(Y.matrix),$.matrix.decompose($.position,$.quaternion,$.scale)),!0===M&&$.cameras.push(Y)}var J=E.enabledFeatures;if(J&&J.includes("depth-sensing")&&"gpu-optimized"==E.depthUsage&&z){var Q=(D=S.getBinding()).getDepthInformation(k[0]);Q&&Q.isValid&&Q.texture&&j.init(Q,E.renderState)}if(J&&J.includes("camera-access")&&z){e.state.unbindTexture(),D=S.getBinding();for(var ee=0;ee<k.length;ee++){var te=k[ee].camera;if(te){var ne=G[te];ne||(ne=new um,G[te]=ne);var re=D.getCameraImage(te);ne.sourceTexture=re}}}}for(var ae=0;ae<q.length;ae++){var oe=X[ae],se=q[ae];null!==oe&&void 0!==se&&se.update(oe,_,I||T)}ie&&ie(l,_),_.detectedPlanes&&S.dispatchEvent({type:"planesdetected",data:_}),B=null}),_.setAnimationLoop=function(e){ie=e},_.dispose=function(){},_}return _inherits(WebXRManager,e),_createClass3(WebXRManager)}(fp),Cy=new wv,Ty=new dv;function WebGLMaterials(e,l){function refreshTransformUniform(e,l){!0===e.matrixAutoUpdate&&e.updateMatrix(),l.value.copy(e.matrix)}function refreshUniformsCommon(e,_){e.opacity.value=_.opacity,_.color&&e.diffuse.value.copy(_.color),_.emissive&&e.emissive.value.copy(_.emissive).multiplyScalar(_.emissiveIntensity),_.map&&(e.map.value=_.map,refreshTransformUniform(_.map,e.mapTransform)),_.alphaMap&&(e.alphaMap.value=_.alphaMap,refreshTransformUniform(_.alphaMap,e.alphaMapTransform)),_.bumpMap&&(e.bumpMap.value=_.bumpMap,refreshTransformUniform(_.bumpMap,e.bumpMapTransform),e.bumpScale.value=_.bumpScale,1===_.side&&(e.bumpScale.value*=-1)),_.normalMap&&(e.normalMap.value=_.normalMap,refreshTransformUniform(_.normalMap,e.normalMapTransform),e.normalScale.value.copy(_.normalScale),1===_.side&&e.normalScale.value.negate()),_.displacementMap&&(e.displacementMap.value=_.displacementMap,refreshTransformUniform(_.displacementMap,e.displacementMapTransform),e.displacementScale.value=_.displacementScale,e.displacementBias.value=_.displacementBias),_.emissiveMap&&(e.emissiveMap.value=_.emissiveMap,refreshTransformUniform(_.emissiveMap,e.emissiveMapTransform)),_.specularMap&&(e.specularMap.value=_.specularMap,refreshTransformUniform(_.specularMap,e.specularMapTransform)),_.alphaTest>0&&(e.alphaTest.value=_.alphaTest);var S=l.get(_),E=S.envMap,k=S.envMapRotation;E&&(e.envMap.value=E,Cy.copy(k),Cy.x*=-1,Cy.y*=-1,Cy.z*=-1,E.isCubeTexture&&!1===E.isRenderTargetTexture&&(Cy.y*=-1,Cy.z*=-1),e.envMapRotation.value.setFromMatrix4(Ty.makeRotationFromEuler(Cy)),e.flipEnvMap.value=E.isCubeTexture&&!1===E.isRenderTargetTexture?-1:1,e.reflectivity.value=_.reflectivity,e.ior.value=_.ior,e.refractionRatio.value=_.refractionRatio),_.lightMap&&(e.lightMap.value=_.lightMap,e.lightMapIntensity.value=_.lightMapIntensity,refreshTransformUniform(_.lightMap,e.lightMapTransform)),_.aoMap&&(e.aoMap.value=_.aoMap,e.aoMapIntensity.value=_.aoMapIntensity,refreshTransformUniform(_.aoMap,e.aoMapTransform))}return{refreshFogUniforms:function(l,_){_.color.getRGB(l.fogColor.value,getUnlitUniformColorSpace(e)),_.isFog?(l.fogNear.value=_.near,l.fogFar.value=_.far):_.isFogExp2&&(l.fogDensity.value=_.density)},refreshMaterialUniforms:function(e,_,S,E,k){_.isMeshBasicMaterial||_.isMeshLambertMaterial?refreshUniformsCommon(e,_):_.isMeshToonMaterial?(refreshUniformsCommon(e,_),function(e,l){l.gradientMap&&(e.gradientMap.value=l.gradientMap)}(e,_)):_.isMeshPhongMaterial?(refreshUniformsCommon(e,_),function(e,l){e.specular.value.copy(l.specular),e.shininess.value=Math.max(l.shininess,1e-4)}(e,_)):_.isMeshStandardMaterial?(refreshUniformsCommon(e,_),function(e,l){e.metalness.value=l.metalness,l.metalnessMap&&(e.metalnessMap.value=l.metalnessMap,refreshTransformUniform(l.metalnessMap,e.metalnessMapTransform));e.roughness.value=l.roughness,l.roughnessMap&&(e.roughnessMap.value=l.roughnessMap,refreshTransformUniform(l.roughnessMap,e.roughnessMapTransform));l.envMap&&(e.envMapIntensity.value=l.envMapIntensity)}(e,_),_.isMeshPhysicalMaterial&&function(e,l,_){e.ior.value=l.ior,l.sheen>0&&(e.sheenColor.value.copy(l.sheenColor).multiplyScalar(l.sheen),e.sheenRoughness.value=l.sheenRoughness,l.sheenColorMap&&(e.sheenColorMap.value=l.sheenColorMap,refreshTransformUniform(l.sheenColorMap,e.sheenColorMapTransform)),l.sheenRoughnessMap&&(e.sheenRoughnessMap.value=l.sheenRoughnessMap,refreshTransformUniform(l.sheenRoughnessMap,e.sheenRoughnessMapTransform)));l.clearcoat>0&&(e.clearcoat.value=l.clearcoat,e.clearcoatRoughness.value=l.clearcoatRoughness,l.clearcoatMap&&(e.clearcoatMap.value=l.clearcoatMap,refreshTransformUniform(l.clearcoatMap,e.clearcoatMapTransform)),l.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=l.clearcoatRoughnessMap,refreshTransformUniform(l.clearcoatRoughnessMap,e.clearcoatRoughnessMapTransform)),l.clearcoatNormalMap&&(e.clearcoatNormalMap.value=l.clearcoatNormalMap,refreshTransformUniform(l.clearcoatNormalMap,e.clearcoatNormalMapTransform),e.clearcoatNormalScale.value.copy(l.clearcoatNormalScale),1===l.side&&e.clearcoatNormalScale.value.negate()));l.dispersion>0&&(e.dispersion.value=l.dispersion);l.iridescence>0&&(e.iridescence.value=l.iridescence,e.iridescenceIOR.value=l.iridescenceIOR,e.iridescenceThicknessMinimum.value=l.iridescenceThicknessRange[0],e.iridescenceThicknessMaximum.value=l.iridescenceThicknessRange[1],l.iridescenceMap&&(e.iridescenceMap.value=l.iridescenceMap,refreshTransformUniform(l.iridescenceMap,e.iridescenceMapTransform)),l.iridescenceThicknessMap&&(e.iridescenceThicknessMap.value=l.iridescenceThicknessMap,refreshTransformUniform(l.iridescenceThicknessMap,e.iridescenceThicknessMapTransform)));l.transmission>0&&(e.transmission.value=l.transmission,e.transmissionSamplerMap.value=_.texture,e.transmissionSamplerSize.value.set(_.width,_.height),l.transmissionMap&&(e.transmissionMap.value=l.transmissionMap,refreshTransformUniform(l.transmissionMap,e.transmissionMapTransform)),e.thickness.value=l.thickness,l.thicknessMap&&(e.thicknessMap.value=l.thicknessMap,refreshTransformUniform(l.thicknessMap,e.thicknessMapTransform)),e.attenuationDistance.value=l.attenuationDistance,e.attenuationColor.value.copy(l.attenuationColor));l.anisotropy>0&&(e.anisotropyVector.value.set(l.anisotropy*Math.cos(l.anisotropyRotation),l.anisotropy*Math.sin(l.anisotropyRotation)),l.anisotropyMap&&(e.anisotropyMap.value=l.anisotropyMap,refreshTransformUniform(l.anisotropyMap,e.anisotropyMapTransform)));e.specularIntensity.value=l.specularIntensity,e.specularColor.value.copy(l.specularColor),l.specularColorMap&&(e.specularColorMap.value=l.specularColorMap,refreshTransformUniform(l.specularColorMap,e.specularColorMapTransform));l.specularIntensityMap&&(e.specularIntensityMap.value=l.specularIntensityMap,refreshTransformUniform(l.specularIntensityMap,e.specularIntensityMapTransform))}(e,_,k)):_.isMeshMatcapMaterial?(refreshUniformsCommon(e,_),function(e,l){l.matcap&&(e.matcap.value=l.matcap)}(e,_)):_.isMeshDepthMaterial?refreshUniformsCommon(e,_):_.isMeshDistanceMaterial?(refreshUniformsCommon(e,_),function(e,_){var S=l.get(_).light;e.referencePosition.value.setFromMatrixPosition(S.matrixWorld),e.nearDistance.value=S.shadow.camera.near,e.farDistance.value=S.shadow.camera.far}(e,_)):_.isMeshNormalMaterial?refreshUniformsCommon(e,_):_.isLineBasicMaterial?(function(e,l){e.diffuse.value.copy(l.color),e.opacity.value=l.opacity,l.map&&(e.map.value=l.map,refreshTransformUniform(l.map,e.mapTransform))}(e,_),_.isLineDashedMaterial&&function(e,l){e.dashSize.value=l.dashSize,e.totalSize.value=l.dashSize+l.gapSize,e.scale.value=l.scale}(e,_)):_.isPointsMaterial?function(e,l,_,S){e.diffuse.value.copy(l.color),e.opacity.value=l.opacity,e.size.value=l.size*_,e.scale.value=.5*S,l.map&&(e.map.value=l.map,refreshTransformUniform(l.map,e.uvTransform));l.alphaMap&&(e.alphaMap.value=l.alphaMap,refreshTransformUniform(l.alphaMap,e.alphaMapTransform));l.alphaTest>0&&(e.alphaTest.value=l.alphaTest)}(e,_,S,E):_.isSpriteMaterial?function(e,l){e.diffuse.value.copy(l.color),e.opacity.value=l.opacity,e.rotation.value=l.rotation,l.map&&(e.map.value=l.map,refreshTransformUniform(l.map,e.mapTransform));l.alphaMap&&(e.alphaMap.value=l.alphaMap,refreshTransformUniform(l.alphaMap,e.alphaMapTransform));l.alphaTest>0&&(e.alphaTest.value=l.alphaTest)}(e,_):_.isShadowMaterial?(e.color.value.copy(_.color),e.opacity.value=_.opacity):_.isShaderMaterial&&(_.uniformsNeedUpdate=!1)}}}function WebGLUniformsGroups(e,l,_,S){var E={},k={},T=[],M=e.getParameter(e.MAX_UNIFORM_BUFFER_BINDINGS);function hasUniformChanged(e,l,_,S){var E=e.value,k=l+"_"+_;if(void 0===S[k])return S[k]="number"==typeof E||"boolean"==typeof E?E:E.clone(),!0;var T=S[k];if("number"==typeof E||"boolean"==typeof E){if(T!==E)return S[k]=E,!0}else if(!1===T.equals(E))return T.copy(E),!0;return!1}function getUniformSize(e){var l={boundary:0,storage:0};return"number"==typeof e||"boolean"==typeof e?(l.boundary=4,l.storage=4):e.isVector2?(l.boundary=8,l.storage=8):e.isVector3||e.isColor?(l.boundary=16,l.storage=12):e.isVector4?(l.boundary=16,l.storage=16):e.isMatrix3?(l.boundary=48,l.storage=48):e.isMatrix4?(l.boundary=64,l.storage=64):e.isTexture,l}function onUniformsGroupsDispose(l){var _=l.target;_.removeEventListener("dispose",onUniformsGroupsDispose);var S=T.indexOf(_.__bindingPointIndex);T.splice(S,1),e.deleteBuffer(E[_.id]),delete E[_.id],delete k[_.id]}return{bind:function(e,l){var _=l.program;S.uniformBlockBinding(e,_)},update:function(_,R){var I=E[_.id];void 0===I&&(!function(e){for(var l=e.uniforms,_=0,S=16,E=0,k=l.length;E<k;E++)for(var T=Array.isArray(l[E])?l[E]:[l[E]],M=0,R=T.length;M<R;M++)for(var I=T[M],O=Array.isArray(I.value)?I.value:[I.value],D=0,L=O.length;D<L;D++){var U=getUniformSize(O[D]),B=_%S,z=B%U.boundary,j=B+z;_+=z,0!==j&&S-j<U.storage&&(_+=S-j),I.__data=new Float32Array(U.storage/Float32Array.BYTES_PER_ELEMENT),I.__offset=_,_+=U.storage}var G=_%S;G>0&&(_+=S-G);e.__size=_,e.__cache={}}(_),I=function(l){var _=function(){for(var e=0;e<M;e++)if(-1===T.indexOf(e))return T.push(e),e;return 0}();l.__bindingPointIndex=_;var S=e.createBuffer(),E=l.__size,k=l.usage;return e.bindBuffer(e.UNIFORM_BUFFER,S),e.bufferData(e.UNIFORM_BUFFER,E,k),e.bindBuffer(e.UNIFORM_BUFFER,null),e.bindBufferBase(e.UNIFORM_BUFFER,_,S),S}(_),E[_.id]=I,_.addEventListener("dispose",onUniformsGroupsDispose));var O=R.program;S.updateUBOMapping(_,O);var D=l.render.frame;k[_.id]!==D&&(!function(l){var _=E[l.id],S=l.uniforms,k=l.__cache;e.bindBuffer(e.UNIFORM_BUFFER,_);for(var T=0,M=S.length;T<M;T++)for(var R=Array.isArray(S[T])?S[T]:[S[T]],I=0,O=R.length;I<O;I++){var D=R[I];if(!0===hasUniformChanged(D,T,I,k)){for(var L=D.__offset,U=Array.isArray(D.value)?D.value:[D.value],B=0,z=0;z<U.length;z++){var j=U[z],G=getUniformSize(j);"number"==typeof j||"boolean"==typeof j?(D.__data[0]=j,e.bufferSubData(e.UNIFORM_BUFFER,L+B,D.__data)):j.isMatrix3?(D.__data[0]=j.elements[0],D.__data[1]=j.elements[1],D.__data[2]=j.elements[2],D.__data[3]=0,D.__data[4]=j.elements[3],D.__data[5]=j.elements[4],D.__data[6]=j.elements[5],D.__data[7]=0,D.__data[8]=j.elements[6],D.__data[9]=j.elements[7],D.__data[10]=j.elements[8],D.__data[11]=0):(j.toArray(D.__data,B),B+=G.storage/Float32Array.BYTES_PER_ELEMENT)}e.bufferSubData(e.UNIFORM_BUFFER,L,D.__data)}}e.bindBuffer(e.UNIFORM_BUFFER,null)}(_),k[_.id]=D)},dispose:function(){for(var l in E)e.deleteBuffer(E[l]);T=[],E={},k={}}}}var My=function(){return _createClass3(function WebGLRenderer(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck3(this,WebGLRenderer);var l,_=e.canvas,S=void 0===_?function(){var e=createElementNS("canvas");return e.style.display="block",e}():_,E=e.context,k=void 0===E?null:E,T=e.depth,M=void 0===T||T,R=e.stencil,I=void 0!==R&&R,O=e.alpha,D=void 0!==O&&O,L=e.antialias,U=void 0!==L&&L,B=e.premultipliedAlpha,z=void 0===B||B,j=e.preserveDrawingBuffer,G=void 0!==j&&j,H=e.powerPreference,V=void 0===H?"default":H,W=e.failIfMajorPerformanceCaveat,q=void 0!==W&&W,X=e.reversedDepthBuffer,K=void 0!==X&&X;if(this.isWebGLRenderer=!0,null!==k){if("undefined"!=typeof WebGLRenderingContext&&k instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");l=k.getContextAttributes().alpha}else l=D;var Y=new Uint32Array(4),J=new Int32Array(4),Q=null,Z=null,$=[],ee=[];this.domElement=S,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=0,this.toneMappingExposure=1,this.transmissionResolutionScale=1;var te=this,ne=!1;this._outputColorSpace=ap;var re=0,ie=0,ae=null,oe=-1,se=null,ue=new Lp,le=new Lp,ce=null,he=new rg(0),de=0,fe=S.width,pe=S.height,ve=1,ge=null,me=null,ye=new Lp(0,0,fe,pe),_e=new Lp(0,0,fe,pe),be=!1,Se=new om,we=!1,xe=!1,Ee=new dv,ke=new _p,Ae=new Lp,Ce={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0},Te=!1;function getTargetPixelRatio(){return null===ae?ve:1}var Me,Re,Ie,Pe,Oe,De,Le,Ue,Fe,Ne,Be,ze,je,Ge,He,Ve,We,qe,Xe,Ke,Ye,Je,Qe,Ze,$e=k;function getContext(e,l){return S.getContext(e,l)}try{var et={alpha:!0,depth:M,stencil:I,antialias:U,premultipliedAlpha:z,preserveDrawingBuffer:G,powerPreference:V,failIfMajorPerformanceCaveat:q};if("setAttribute"in S&&S.setAttribute("data-engine","three.js r".concat(Wd)),S.addEventListener("webglcontextlost",onContextLost,!1),S.addEventListener("webglcontextrestored",onContextRestore,!1),S.addEventListener("webglcontextcreationerror",onContextCreationError,!1),null===$e){var tt="webgl2";if(null===($e=getContext(tt,et)))throw getContext(tt)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(ut){throw ut}function initGLContext(){(Me=new WebGLExtensions($e)).init(),Je=new WebGLUtils($e,Me),Re=new WebGLCapabilities($e,Me,e,Je),Ie=new WebGLState($e,Me),Re.reversedDepthBuffer&&K&&Ie.buffers.depth.setReversed(!0),Pe=new WebGLInfo($e),Oe=new WebGLProperties,De=new WebGLTextures($e,Me,Ie,Oe,Re,Je,Pe),Le=new WebGLCubeMaps(te),Ue=new WebGLCubeUVMaps(te),Fe=new WebGLAttributes($e),Qe=new WebGLBindingStates($e,Fe),Ne=new WebGLGeometries($e,Fe,Pe,Qe),Be=new WebGLObjects($e,Ne,Fe,Pe),Xe=new WebGLMorphtargets($e,Re,De),Ve=new WebGLClipping(Oe),ze=new WebGLPrograms(te,Le,Ue,Me,Re,Qe,Ve),je=new WebGLMaterials(te,Oe),Ge=new WebGLRenderLists,He=new WebGLRenderStates(Me),qe=new WebGLBackground(te,Le,Ue,Ie,Be,l,z),We=new WebGLShadowMap(te,Be,Re),Ze=new WebGLUniformsGroups($e,Pe,Re,Ie),Ke=new WebGLBufferRenderer($e,Me,Pe),Ye=new WebGLIndexedBufferRenderer($e,Me,Pe),Pe.programs=ze.programs,te.capabilities=Re,te.extensions=Me,te.properties=Oe,te.renderLists=Ge,te.shadowMap=We,te.state=Ie,te.info=Pe}initGLContext();var nt=new Ay(te,$e);function onContextLost(e){e.preventDefault(),ne=!0}function onContextRestore(){ne=!1;var e=Pe.autoReset,l=We.enabled,_=We.autoUpdate,S=We.needsUpdate,E=We.type;initGLContext(),Pe.autoReset=e,We.enabled=l,We.autoUpdate=_,We.needsUpdate=S,We.type=E}function onContextCreationError(e){}function onMaterialDispose(e){var l=e.target;l.removeEventListener("dispose",onMaterialDispose),function(e){(function(e){var l=Oe.get(e).programs;void 0!==l&&(l.forEach(function(e){ze.releaseProgram(e)}),e.isShaderMaterial&&ze.releaseShaderCache(e))})(e),Oe.remove(e)}(l)}function prepareMaterial(e,l,_){!0===e.transparent&&e.side===qd&&!1===e.forceSinglePass?(e.side=1,e.needsUpdate=!0,getProgram(e,l,_),e.side=0,e.needsUpdate=!0,getProgram(e,l,_),e.side=qd):getProgram(e,l,_)}this.xr=nt,this.getContext=function(){return $e},this.getContextAttributes=function(){return $e.getContextAttributes()},this.forceContextLoss=function(){var e=Me.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){var e=Me.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return ve},this.setPixelRatio=function(e){void 0!==e&&(ve=e,this.setSize(fe,pe,!1))},this.getSize=function(e){return e.set(fe,pe)},this.setSize=function(e,l){var _=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];nt.isPresenting||(fe=e,pe=l,S.width=Math.floor(e*ve),S.height=Math.floor(l*ve),!0===_&&(S.style.width=e+"px",S.style.height=l+"px"),this.setViewport(0,0,e,l))},this.getDrawingBufferSize=function(e){return e.set(fe*ve,pe*ve).floor()},this.setDrawingBufferSize=function(e,l,_){fe=e,pe=l,ve=_,S.width=Math.floor(e*_),S.height=Math.floor(l*_),this.setViewport(0,0,e,l)},this.getCurrentViewport=function(e){return e.copy(ue)},this.getViewport=function(e){return e.copy(ye)},this.setViewport=function(e,l,_,S){e.isVector4?ye.set(e.x,e.y,e.z,e.w):ye.set(e,l,_,S),Ie.viewport(ue.copy(ye).multiplyScalar(ve).round())},this.getScissor=function(e){return e.copy(_e)},this.setScissor=function(e,l,_,S){e.isVector4?_e.set(e.x,e.y,e.z,e.w):_e.set(e,l,_,S),Ie.scissor(le.copy(_e).multiplyScalar(ve).round())},this.getScissorTest=function(){return be},this.setScissorTest=function(e){Ie.setScissorTest(be=e)},this.setOpaqueSort=function(e){ge=e},this.setTransparentSort=function(e){me=e},this.getClearColor=function(e){return e.copy(qe.getClearColor())},this.setClearColor=function(){var e;(e=qe).setClearColor.apply(e,arguments)},this.getClearAlpha=function(){return qe.getClearAlpha()},this.setClearAlpha=function(){var e;(e=qe).setClearAlpha.apply(e,arguments)},this.clear=function(){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],l=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],_=0;if(!(arguments.length>0&&void 0!==arguments[0])||arguments[0]){var S=!1;if(null!==ae){var E=ae.texture.format;S=E===Ef||E===xf||E===wf}if(S){var k=ae.texture.type,T=k===of||k===hf||k===lf||k===gf||k===pf||k===vf,M=qe.getClearColor(),R=qe.getClearAlpha(),I=M.r,O=M.g,D=M.b;T?(Y[0]=I,Y[1]=O,Y[2]=D,Y[3]=R,$e.clearBufferuiv($e.COLOR,0,Y)):(J[0]=I,J[1]=O,J[2]=D,J[3]=R,$e.clearBufferiv($e.COLOR,0,J))}else _|=$e.COLOR_BUFFER_BIT}e&&(_|=$e.DEPTH_BUFFER_BIT),l&&(_|=$e.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),$e.clear(_)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){S.removeEventListener("webglcontextlost",onContextLost,!1),S.removeEventListener("webglcontextrestored",onContextRestore,!1),S.removeEventListener("webglcontextcreationerror",onContextCreationError,!1),qe.dispose(),Ge.dispose(),He.dispose(),Oe.dispose(),Le.dispose(),Ue.dispose(),Be.dispose(),Qe.dispose(),Ze.dispose(),ze.dispose(),nt.dispose(),nt.removeEventListener("sessionstart",onXRSessionStart),nt.removeEventListener("sessionend",onXRSessionEnd),it.stop()},this.renderBufferDirect=function(e,l,_,S,E,k){null===l&&(l=Ce);var T=E.isMesh&&E.matrixWorld.determinant()<0,M=function(e,l,_,S,E){!0!==l.isScene&&(l=Ce);De.resetTextureUnits();var k=l.fog,T=S.isMeshStandardMaterial?l.environment:null,M=null===ae?te.outputColorSpace:!0===ae.isXRRenderTarget?ae.texture.colorSpace:op,R=(S.isMeshStandardMaterial?Ue:Le).get(S.envMap||T),I=!0===S.vertexColors&&!!_.attributes.color&&4===_.attributes.color.itemSize,O=!!_.attributes.tangent&&(!!S.normalMap||S.anisotropy>0),D=!!_.morphAttributes.position,L=!!_.morphAttributes.normal,U=!!_.morphAttributes.color,B=0;S.toneMapped&&(null!==ae&&!0!==ae.isXRRenderTarget||(B=te.toneMapping));var z=_.morphAttributes.position||_.morphAttributes.normal||_.morphAttributes.color,j=void 0!==z?z.length:0,G=Oe.get(S),H=Z.state.lights;if(!0===we&&(!0===xe||e!==se)){var V=e===se&&S.id===oe;Ve.setState(S,e,V)}var W=!1;S.version===G.__version?G.needsLights&&G.lightsStateVersion!==H.state.version||G.outputColorSpace!==M||E.isBatchedMesh&&!1===G.batching?W=!0:E.isBatchedMesh||!0!==G.batching?E.isBatchedMesh&&!0===G.batchingColor&&null===E.colorTexture||E.isBatchedMesh&&!1===G.batchingColor&&null!==E.colorTexture||E.isInstancedMesh&&!1===G.instancing?W=!0:E.isInstancedMesh||!0!==G.instancing?E.isSkinnedMesh&&!1===G.skinning?W=!0:E.isSkinnedMesh||!0!==G.skinning?E.isInstancedMesh&&!0===G.instancingColor&&null===E.instanceColor||E.isInstancedMesh&&!1===G.instancingColor&&null!==E.instanceColor||E.isInstancedMesh&&!0===G.instancingMorph&&null===E.morphTexture||E.isInstancedMesh&&!1===G.instancingMorph&&null!==E.morphTexture||G.envMap!==R||!0===S.fog&&G.fog!==k?W=!0:void 0===G.numClippingPlanes||G.numClippingPlanes===Ve.numPlanes&&G.numIntersection===Ve.numIntersection?(G.vertexAlphas!==I||G.vertexTangents!==O||G.morphTargets!==D||G.morphNormals!==L||G.morphColors!==U||G.toneMapping!==B||G.morphTargetsCount!==j)&&(W=!0):W=!0:W=!0:W=!0:W=!0:(W=!0,G.__version=S.version);var q=G.currentProgram;!0===W&&(q=getProgram(S,l,E));var X=!1,K=!1,Y=!1,J=q.getUniforms(),Q=G.uniforms;Ie.useProgram(q.program)&&(X=!0,K=!0,Y=!0);S.id!==oe&&(oe=S.id,K=!0);if(X||se!==e){Ie.buffers.depth.getReversed()&&!0!==e.reversedDepth&&(e._reversedDepth=!0,e.updateProjectionMatrix()),J.setValue($e,"projectionMatrix",e.projectionMatrix),J.setValue($e,"viewMatrix",e.matrixWorldInverse);var $=J.map.cameraPosition;void 0!==$&&$.setValue($e,ke.setFromMatrixPosition(e.matrixWorld)),Re.logarithmicDepthBuffer&&J.setValue($e,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),(S.isMeshPhongMaterial||S.isMeshToonMaterial||S.isMeshLambertMaterial||S.isMeshBasicMaterial||S.isMeshStandardMaterial||S.isShaderMaterial)&&J.setValue($e,"isOrthographic",!0===e.isOrthographicCamera),se!==e&&(se=e,K=!0,Y=!0)}if(E.isSkinnedMesh){J.setOptional($e,E,"bindMatrix"),J.setOptional($e,E,"bindMatrixInverse");var ee=E.skeleton;ee&&(null===ee.boneTexture&&ee.computeBoneTexture(),J.setValue($e,"boneTexture",ee.boneTexture,De))}E.isBatchedMesh&&(J.setOptional($e,E,"batchingTexture"),J.setValue($e,"batchingTexture",E._matricesTexture,De),J.setOptional($e,E,"batchingIdTexture"),J.setValue($e,"batchingIdTexture",E._indirectTexture,De),J.setOptional($e,E,"batchingColorTexture"),null!==E._colorsTexture&&J.setValue($e,"batchingColorTexture",E._colorsTexture,De));var ne=_.morphAttributes;void 0===ne.position&&void 0===ne.normal&&void 0===ne.color||Xe.update(E,_,q);(K||G.receiveShadow!==E.receiveShadow)&&(G.receiveShadow=E.receiveShadow,J.setValue($e,"receiveShadow",E.receiveShadow));S.isMeshGouraudMaterial&&null!==S.envMap&&(Q.envMap.value=R,Q.flipEnvMap.value=R.isCubeTexture&&!1===R.isRenderTargetTexture?-1:1);S.isMeshStandardMaterial&&null===S.envMap&&null!==l.environment&&(Q.envMapIntensity.value=l.environmentIntensity);K&&(J.setValue($e,"toneMappingExposure",te.toneMappingExposure),G.needsLights&&function(e,l){e.ambientLightColor.needsUpdate=l,e.lightProbe.needsUpdate=l,e.directionalLights.needsUpdate=l,e.directionalLightShadows.needsUpdate=l,e.pointLights.needsUpdate=l,e.pointLightShadows.needsUpdate=l,e.spotLights.needsUpdate=l,e.spotLightShadows.needsUpdate=l,e.rectAreaLights.needsUpdate=l,e.hemisphereLights.needsUpdate=l}(Q,Y),k&&!0===S.fog&&je.refreshFogUniforms(Q,k),je.refreshMaterialUniforms(Q,S,ve,pe,Z.state.transmissionRenderTarget[e.id]),fy.upload($e,getUniformList(G),Q,De));S.isShaderMaterial&&!0===S.uniformsNeedUpdate&&(fy.upload($e,getUniformList(G),Q,De),S.uniformsNeedUpdate=!1);S.isSpriteMaterial&&J.setValue($e,"center",E.center);if(J.setValue($e,"modelViewMatrix",E.modelViewMatrix),J.setValue($e,"normalMatrix",E.normalMatrix),J.setValue($e,"modelMatrix",E.matrixWorld),S.isShaderMaterial||S.isRawShaderMaterial)for(var re=S.uniformsGroups,ie=0,ue=re.length;ie<ue;ie++){var le=re[ie];Ze.update(le,q),Ze.bind(le,q)}return q}(e,l,_,S,E);Ie.setMaterial(S,T);var R=_.index,I=1;if(!0===S.wireframe){if(void 0===(R=Ne.getWireframeAttribute(_)))return;I=2}var O=_.drawRange,D=_.attributes.position,L=O.start*I,U=(O.start+O.count)*I;null!==k&&(L=Math.max(L,k.start*I),U=Math.min(U,(k.start+k.count)*I)),null!==R?(L=Math.max(L,0),U=Math.min(U,R.count)):null!=D&&(L=Math.max(L,0),U=Math.min(U,D.count));var B=U-L;if(!(B<0||B===1/0)){var z;Qe.setup(E,S,M,_,R);var j=Ke;if(null!==R&&(z=Fe.get(R),(j=Ye).setIndex(z)),E.isMesh)!0===S.wireframe?(Ie.setLineWidth(S.wireframeLinewidth*getTargetPixelRatio()),j.setMode($e.LINES)):j.setMode($e.TRIANGLES);else if(E.isLine){var G=S.linewidth;void 0===G&&(G=1),Ie.setLineWidth(G*getTargetPixelRatio()),E.isLineSegments?j.setMode($e.LINES):E.isLineLoop?j.setMode($e.LINE_LOOP):j.setMode($e.LINE_STRIP)}else E.isPoints?j.setMode($e.POINTS):E.isSprite&&j.setMode($e.TRIANGLES);if(E.isBatchedMesh)if(null!==E._multiDrawInstances)warnOnce("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),j.renderMultiDrawInstances(E._multiDrawStarts,E._multiDrawCounts,E._multiDrawCount,E._multiDrawInstances);else if(Me.get("WEBGL_multi_draw"))j.renderMultiDraw(E._multiDrawStarts,E._multiDrawCounts,E._multiDrawCount);else for(var H=E._multiDrawStarts,V=E._multiDrawCounts,W=E._multiDrawCount,q=R?Fe.get(R).bytesPerElement:1,X=Oe.get(S).currentProgram.getUniforms(),K=0;K<W;K++)X.setValue($e,"_gl_DrawID",K),j.render(H[K]/q,V[K]);else if(E.isInstancedMesh)j.renderInstances(L,B,E.count);else if(_.isInstancedBufferGeometry){var Y=void 0!==_._maxInstanceCount?_._maxInstanceCount:1/0,J=Math.min(_.instanceCount,Y);j.renderInstances(L,B,J)}else j.render(L,B)}},this.compile=function(e,l){var _=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;null===_&&(_=e),(Z=He.get(_)).init(l),ee.push(Z),_.traverseVisible(function(e){e.isLight&&e.layers.test(l.layers)&&(Z.pushLight(e),e.castShadow&&Z.pushShadow(e))}),e!==_&&e.traverseVisible(function(e){e.isLight&&e.layers.test(l.layers)&&(Z.pushLight(e),e.castShadow&&Z.pushShadow(e))}),Z.setupLights();var S=new Set;return e.traverse(function(e){if(e.isMesh||e.isPoints||e.isLine||e.isSprite){var l=e.material;if(l)if(Array.isArray(l))for(var E=0;E<l.length;E++){var k=l[E];prepareMaterial(k,_,e),S.add(k)}else prepareMaterial(l,_,e),S.add(l)}}),Z=ee.pop(),S},this.compileAsync=function(e,l){var _=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,S=this.compile(e,l,_);return new Promise(function(l){function checkMaterialsReady(){S.forEach(function(e){Oe.get(e).currentProgram.isReady()&&S.delete(e)}),0!==S.size?setTimeout(checkMaterialsReady,10):l(e)}null!==Me.get("KHR_parallel_shader_compile")?checkMaterialsReady():setTimeout(checkMaterialsReady,10)})};var rt=null;function onXRSessionStart(){it.stop()}function onXRSessionEnd(){it.start()}var it=new WebGLAnimation;function projectObject(e,l,_,S){if(!1!==e.visible){if(e.layers.test(l.layers))if(e.isGroup)_=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(l);else if(e.isLight)Z.pushLight(e),e.castShadow&&Z.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||Se.intersectsSprite(e)){S&&Ae.setFromMatrixPosition(e.matrixWorld).applyMatrix4(Ee);var E=Be.update(e),k=e.material;k.visible&&Q.push(e,E,k,_,Ae.z,null)}}else if((e.isMesh||e.isLine||e.isPoints)&&(!e.frustumCulled||Se.intersectsObject(e))){var T=Be.update(e),M=e.material;if(S&&(void 0!==e.boundingSphere?(null===e.boundingSphere&&e.computeBoundingSphere(),Ae.copy(e.boundingSphere.center)):(null===T.boundingSphere&&T.computeBoundingSphere(),Ae.copy(T.boundingSphere.center)),Ae.applyMatrix4(e.matrixWorld).applyMatrix4(Ee)),Array.isArray(M))for(var R=T.groups,I=0,O=R.length;I<O;I++){var D=R[I],L=M[D.materialIndex];L&&L.visible&&Q.push(e,T,L,_,Ae.z,D)}else M.visible&&Q.push(e,T,M,_,Ae.z,null)}for(var U=e.children,B=0,z=U.length;B<z;B++)projectObject(U[B],l,_,S)}}function renderScene(e,l,_,S){var E=e.opaque,k=e.transmissive,T=e.transparent;Z.setupLightsView(_),!0===we&&Ve.setGlobalState(te.clippingPlanes,_),S&&Ie.viewport(ue.copy(S)),E.length>0&&renderObjects(E,l,_),k.length>0&&renderObjects(k,l,_),T.length>0&&renderObjects(T,l,_),Ie.buffers.depth.setTest(!0),Ie.buffers.depth.setMask(!0),Ie.buffers.color.setMask(!0),Ie.setPolygonOffset(!1)}function renderTransmissionPass(e,l,_,S){if(null===(!0===_.isScene?_.overrideMaterial:null)){void 0===Z.state.transmissionRenderTarget[S.id]&&(Z.state.transmissionRenderTarget[S.id]=new Fp(1,1,{generateMipmaps:!0,type:Me.has("EXT_color_buffer_half_float")||Me.has("EXT_color_buffer_float")?ff:of,minFilter:af,samples:4,stencilBuffer:I,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Tp.workingColorSpace}));var E=Z.state.transmissionRenderTarget[S.id],k=S.viewport||ue;E.setSize(k.z*te.transmissionResolutionScale,k.w*te.transmissionResolutionScale);var T=te.getRenderTarget(),M=te.getActiveCubeFace(),R=te.getActiveMipmapLevel();te.setRenderTarget(E),te.getClearColor(he),(de=te.getClearAlpha())<1&&te.setClearColor(16777215,.5),te.clear(),Te&&qe.render(_);var O=te.toneMapping;te.toneMapping=0;var D=S.viewport;if(void 0!==S.viewport&&(S.viewport=void 0),Z.setupLightsView(S),!0===we&&Ve.setGlobalState(te.clippingPlanes,S),renderObjects(e,_,S),De.updateMultisampleRenderTarget(E),De.updateRenderTargetMipmap(E),!1===Me.has("WEBGL_multisampled_render_to_texture")){for(var L=!1,U=0,B=l.length;U<B;U++){var z=l[U],j=z.object,G=z.geometry,H=z.material,V=z.group;if(H.side===qd&&j.layers.test(S.layers)){var W=H.side;H.side=1,H.needsUpdate=!0,renderObject(j,_,S,G,H,V),H.side=W,H.needsUpdate=!0,L=!0}}!0===L&&(De.updateMultisampleRenderTarget(E),De.updateRenderTargetMipmap(E))}te.setRenderTarget(T,M,R),te.setClearColor(he,de),void 0!==D&&(S.viewport=D),te.toneMapping=O}}function renderObjects(e,l,_){for(var S=!0===l.isScene?l.overrideMaterial:null,E=0,k=e.length;E<k;E++){var T=e[E],M=T.object,R=T.geometry,I=T.group,O=T.material;!0===O.allowOverride&&null!==S&&(O=S),M.layers.test(_.layers)&&renderObject(M,l,_,R,O,I)}}function renderObject(e,l,_,S,E,k){e.onBeforeRender(te,l,_,S,E,k),e.modelViewMatrix.multiplyMatrices(_.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),E.onBeforeRender(te,l,_,S,e,k),!0===E.transparent&&E.side===qd&&!1===E.forceSinglePass?(E.side=1,E.needsUpdate=!0,te.renderBufferDirect(_,l,S,E,e,k),E.side=0,E.needsUpdate=!0,te.renderBufferDirect(_,l,S,E,e,k),E.side=qd):te.renderBufferDirect(_,l,S,E,e,k),e.onAfterRender(te,l,_,S,E,k)}function getProgram(e,l,_){!0!==l.isScene&&(l=Ce);var S=Oe.get(e),E=Z.state.lights,k=Z.state.shadowsArray,T=E.state.version,M=ze.getParameters(e,E.state,k,l,_),R=ze.getProgramCacheKey(M),I=S.programs;S.environment=e.isMeshStandardMaterial?l.environment:null,S.fog=l.fog,S.envMap=(e.isMeshStandardMaterial?Ue:Le).get(e.envMap||S.environment),S.envMapRotation=null!==S.environment&&null===e.envMap?l.environmentRotation:e.envMapRotation,void 0===I&&(e.addEventListener("dispose",onMaterialDispose),I=new Map,S.programs=I);var O=I.get(R);if(void 0!==O){if(S.currentProgram===O&&S.lightsStateVersion===T)return updateCommonMaterialProperties(e,M),O}else M.uniforms=ze.getUniforms(e),e.onBeforeCompile(M,te),O=ze.acquireProgram(M,R),I.set(R,O),S.uniforms=M.uniforms;var D=S.uniforms;return(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(D.clippingPlanes=Ve.uniform),updateCommonMaterialProperties(e,M),S.needsLights=function(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}(e),S.lightsStateVersion=T,S.needsLights&&(D.ambientLightColor.value=E.state.ambient,D.lightProbe.value=E.state.probe,D.directionalLights.value=E.state.directional,D.directionalLightShadows.value=E.state.directionalShadow,D.spotLights.value=E.state.spot,D.spotLightShadows.value=E.state.spotShadow,D.rectAreaLights.value=E.state.rectArea,D.ltc_1.value=E.state.rectAreaLTC1,D.ltc_2.value=E.state.rectAreaLTC2,D.pointLights.value=E.state.point,D.pointLightShadows.value=E.state.pointShadow,D.hemisphereLights.value=E.state.hemi,D.directionalShadowMap.value=E.state.directionalShadowMap,D.directionalShadowMatrix.value=E.state.directionalShadowMatrix,D.spotShadowMap.value=E.state.spotShadowMap,D.spotLightMatrix.value=E.state.spotLightMatrix,D.spotLightMap.value=E.state.spotLightMap,D.pointShadowMap.value=E.state.pointShadowMap,D.pointShadowMatrix.value=E.state.pointShadowMatrix),S.currentProgram=O,S.uniformsList=null,O}function getUniformList(e){if(null===e.uniformsList){var l=e.currentProgram.getUniforms();e.uniformsList=fy.seqWithValue(l.seq,e.uniforms)}return e.uniformsList}function updateCommonMaterialProperties(e,l){var _=Oe.get(e);_.outputColorSpace=l.outputColorSpace,_.batching=l.batching,_.batchingColor=l.batchingColor,_.instancing=l.instancing,_.instancingColor=l.instancingColor,_.instancingMorph=l.instancingMorph,_.skinning=l.skinning,_.morphTargets=l.morphTargets,_.morphNormals=l.morphNormals,_.morphColors=l.morphColors,_.morphTargetsCount=l.morphTargetsCount,_.numClippingPlanes=l.numClippingPlanes,_.numIntersection=l.numClipIntersection,_.vertexAlphas=l.vertexAlphas,_.vertexTangents=l.vertexTangents,_.toneMapping=l.toneMapping}it.setAnimationLoop(function(e){rt&&rt(e)}),"undefined"!=typeof self&&it.setContext(self),this.setAnimationLoop=function(e){rt=e,nt.setAnimationLoop(e),null===e?it.stop():it.start()},nt.addEventListener("sessionstart",onXRSessionStart),nt.addEventListener("sessionend",onXRSessionEnd),this.render=function(e,l){if((void 0===l||!0===l.isCamera)&&!0!==ne){if(!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),null===l.parent&&!0===l.matrixWorldAutoUpdate&&l.updateMatrixWorld(),!0===nt.enabled&&!0===nt.isPresenting&&(!0===nt.cameraAutoUpdate&&nt.updateCamera(l),l=nt.getCamera()),!0===e.isScene&&e.onBeforeRender(te,e,l,ae),(Z=He.get(e,ee.length)).init(l),ee.push(Z),Ee.multiplyMatrices(l.projectionMatrix,l.matrixWorldInverse),Se.setFromProjectionMatrix(Ee,hp,l.reversedDepth),xe=this.localClippingEnabled,we=Ve.init(this.clippingPlanes,xe),(Q=Ge.get(e,$.length)).init(),$.push(Q),!0===nt.enabled&&!0===nt.isPresenting){var _=te.xr.getDepthSensingMesh();null!==_&&projectObject(_,l,-1/0,te.sortObjects)}projectObject(e,l,0,te.sortObjects),Q.finish(),!0===te.sortObjects&&Q.sort(ge,me),(Te=!1===nt.enabled||!1===nt.isPresenting||!1===nt.hasDepthSensing())&&qe.addToRenderList(Q,e),this.info.render.frame++,!0===we&&Ve.beginShadows();var S=Z.state.shadowsArray;We.render(S,e,l),!0===we&&Ve.endShadows(),!0===this.info.autoReset&&this.info.reset();var E=Q.opaque,k=Q.transmissive;if(Z.setupLights(),l.isArrayCamera){var T=l.cameras;if(k.length>0)for(var M=0,R=T.length;M<R;M++){renderTransmissionPass(E,k,e,T[M])}Te&&qe.render(e);for(var I=0,O=T.length;I<O;I++){var D=T[I];renderScene(Q,e,D,D.viewport)}}else k.length>0&&renderTransmissionPass(E,k,e,l),Te&&qe.render(e),renderScene(Q,e,l);null!==ae&&0===ie&&(De.updateMultisampleRenderTarget(ae),De.updateRenderTargetMipmap(ae)),!0===e.isScene&&e.onAfterRender(te,e,l),Qe.resetDefaultState(),oe=-1,se=null,ee.pop(),ee.length>0?(Z=ee[ee.length-1],!0===we&&Ve.setGlobalState(te.clippingPlanes,Z.state.camera)):Z=null,$.pop(),Q=$.length>0?$[$.length-1]:null}},this.getActiveCubeFace=function(){return re},this.getActiveMipmapLevel=function(){return ie},this.getRenderTarget=function(){return ae},this.setRenderTargetTextures=function(e,l,_){var S=Oe.get(e);S.__autoAllocateDepthBuffer=!1===e.resolveDepthBuffer,!1===S.__autoAllocateDepthBuffer&&(S.__useRenderToTexture=!1),Oe.get(e.texture).__webglTexture=l,Oe.get(e.depthTexture).__webglTexture=S.__autoAllocateDepthBuffer?void 0:_,S.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(e,l){var _=Oe.get(e);_.__webglFramebuffer=l,_.__useDefaultFramebuffer=void 0===l};var at=$e.createFramebuffer();this.setRenderTarget=function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,_=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;ae=e,re=l,ie=_;var S=!0,E=null,k=!1,T=!1;if(e){var M=Oe.get(e);if(void 0!==M.__useDefaultFramebuffer)Ie.bindFramebuffer($e.FRAMEBUFFER,null),S=!1;else if(void 0===M.__webglFramebuffer)De.setupRenderTarget(e);else if(M.__hasExternalTextures)De.rebindTextures(e,Oe.get(e.texture).__webglTexture,Oe.get(e.depthTexture).__webglTexture);else if(e.depthBuffer){var R=e.depthTexture;if(M.__boundDepthTexture!==R){if(null!==R&&Oe.has(R)&&(e.width!==R.image.width||e.height!==R.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");De.setupDepthRenderbuffer(e)}}var I=e.texture;(I.isData3DTexture||I.isDataArrayTexture||I.isCompressedArrayTexture)&&(T=!0);var O=Oe.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(E=Array.isArray(O[l])?O[l][_]:O[l],k=!0):E=e.samples>0&&!1===De.useMultisampledRTT(e)?Oe.get(e).__webglMultisampledFramebuffer:Array.isArray(O)?O[_]:O,ue.copy(e.viewport),le.copy(e.scissor),ce=e.scissorTest}else ue.copy(ye).multiplyScalar(ve).floor(),le.copy(_e).multiplyScalar(ve).floor(),ce=be;if(0!==_&&(E=at),Ie.bindFramebuffer($e.FRAMEBUFFER,E)&&S&&Ie.drawBuffers(e,E),Ie.viewport(ue),Ie.scissor(le),Ie.setScissorTest(ce),k){var D=Oe.get(e.texture);$e.framebufferTexture2D($e.FRAMEBUFFER,$e.COLOR_ATTACHMENT0,$e.TEXTURE_CUBE_MAP_POSITIVE_X+l,D.__webglTexture,_)}else if(T)for(var L=l,U=0;U<e.textures.length;U++){var B=Oe.get(e.textures[U]);$e.framebufferTextureLayer($e.FRAMEBUFFER,$e.COLOR_ATTACHMENT0+U,B.__webglTexture,_,L)}else if(null!==e&&0!==_){var z=Oe.get(e.texture);$e.framebufferTexture2D($e.FRAMEBUFFER,$e.COLOR_ATTACHMENT0,$e.TEXTURE_2D,z.__webglTexture,_)}oe=-1},this.readRenderTargetPixels=function(e,l,_,S,E,k,T){var M=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0;if(e&&e.isWebGLRenderTarget){var R=Oe.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==T&&(R=R[T]),R){Ie.bindFramebuffer($e.FRAMEBUFFER,R);try{var I=e.textures[M],O=I.format,D=I.type;if(!Re.textureFormatReadable(O))return;if(!Re.textureTypeReadable(D))return;l>=0&&l<=e.width-S&&_>=0&&_<=e.height-E&&(e.textures.length>1&&$e.readBuffer($e.COLOR_ATTACHMENT0+M),$e.readPixels(l,_,S,E,Je.convert(O),Je.convert(D),k))}finally{var L=null!==ae?Oe.get(ae).__webglFramebuffer:null;Ie.bindFramebuffer($e.FRAMEBUFFER,L)}}}},this.readRenderTargetPixelsAsync=function(){var e=_asyncToGenerator(_regenerator().m(function _callee225(e,l,_,S,E,k,T){var M,R,I,O,D,L,U,B,z=arguments;return _regenerator().w(function(j){for(;;)switch(j.n){case 0:if(M=z.length>7&&void 0!==z[7]?z[7]:0,e&&e.isWebGLRenderTarget){j.n=1;break}throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");case 1:if(R=Oe.get(e).__webglFramebuffer,e.isWebGLCubeRenderTarget&&void 0!==T&&(R=R[T]),!R){j.n=6;break}if(!(l>=0&&l<=e.width-S&&_>=0&&_<=e.height-E)){j.n=5;break}if(Ie.bindFramebuffer($e.FRAMEBUFFER,R),I=e.textures[M],O=I.format,D=I.type,Re.textureFormatReadable(O)){j.n=2;break}throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");case 2:if(Re.textureTypeReadable(D)){j.n=3;break}throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");case 3:return L=$e.createBuffer(),$e.bindBuffer($e.PIXEL_PACK_BUFFER,L),$e.bufferData($e.PIXEL_PACK_BUFFER,k.byteLength,$e.STREAM_READ),e.textures.length>1&&$e.readBuffer($e.COLOR_ATTACHMENT0+M),$e.readPixels(l,_,S,E,Je.convert(O),Je.convert(D),0),U=null!==ae?Oe.get(ae).__webglFramebuffer:null,Ie.bindFramebuffer($e.FRAMEBUFFER,U),B=$e.fenceSync($e.SYNC_GPU_COMMANDS_COMPLETE,0),$e.flush(),j.n=4,probeAsync($e,B,4);case 4:return $e.bindBuffer($e.PIXEL_PACK_BUFFER,L),$e.getBufferSubData($e.PIXEL_PACK_BUFFER,0,k),$e.deleteBuffer(L),$e.deleteSync(B),j.a(2,k);case 5:throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.");case 6:return j.a(2)}},_callee225)}));return function(l,_,S,E,k,T,M){return e.apply(this,arguments)}}(),this.copyFramebufferToTexture=function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,_=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,S=Math.pow(2,-_),E=Math.floor(e.image.width*S),k=Math.floor(e.image.height*S),T=null!==l?l.x:0,M=null!==l?l.y:0;De.setTexture2D(e,0),$e.copyTexSubImage2D($e.TEXTURE_2D,_,0,0,T,M,E,k),Ie.unbindTexture()};var ot=$e.createFramebuffer(),st=$e.createFramebuffer();this.copyTextureToTexture=function(e,l){var _,S,E,k,T,M,R,I,O,D=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,L=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,U=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,B=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;null===B&&(0!==U?(warnOnce("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),B=U,U=0):B=0);var z=e.isCompressedTexture?e.mipmaps[B]:e.image;if(null!==D)_=D.max.x-D.min.x,S=D.max.y-D.min.y,E=D.isBox3?D.max.z-D.min.z:1,k=D.min.x,T=D.min.y,M=D.isBox3?D.min.z:0;else{var j=Math.pow(2,-U);_=Math.floor(z.width*j),S=Math.floor(z.height*j),E=e.isDataArrayTexture?z.depth:e.isData3DTexture?Math.floor(z.depth*j):1,k=0,T=0,M=0}null!==L?(R=L.x,I=L.y,O=L.z):(R=0,I=0,O=0);var G,H=Je.convert(l.format),V=Je.convert(l.type);l.isData3DTexture?(De.setTexture3D(l,0),G=$e.TEXTURE_3D):l.isDataArrayTexture||l.isCompressedArrayTexture?(De.setTexture2DArray(l,0),G=$e.TEXTURE_2D_ARRAY):(De.setTexture2D(l,0),G=$e.TEXTURE_2D),$e.pixelStorei($e.UNPACK_FLIP_Y_WEBGL,l.flipY),$e.pixelStorei($e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,l.premultiplyAlpha),$e.pixelStorei($e.UNPACK_ALIGNMENT,l.unpackAlignment);var W=$e.getParameter($e.UNPACK_ROW_LENGTH),q=$e.getParameter($e.UNPACK_IMAGE_HEIGHT),X=$e.getParameter($e.UNPACK_SKIP_PIXELS),K=$e.getParameter($e.UNPACK_SKIP_ROWS),Y=$e.getParameter($e.UNPACK_SKIP_IMAGES);$e.pixelStorei($e.UNPACK_ROW_LENGTH,z.width),$e.pixelStorei($e.UNPACK_IMAGE_HEIGHT,z.height),$e.pixelStorei($e.UNPACK_SKIP_PIXELS,k),$e.pixelStorei($e.UNPACK_SKIP_ROWS,T),$e.pixelStorei($e.UNPACK_SKIP_IMAGES,M);var J=e.isDataArrayTexture||e.isData3DTexture,Q=l.isDataArrayTexture||l.isData3DTexture;if(e.isDepthTexture){var Z=Oe.get(e),$=Oe.get(l),ee=Oe.get(Z.__renderTarget),te=Oe.get($.__renderTarget);Ie.bindFramebuffer($e.READ_FRAMEBUFFER,ee.__webglFramebuffer),Ie.bindFramebuffer($e.DRAW_FRAMEBUFFER,te.__webglFramebuffer);for(var ne=0;ne<E;ne++)J&&($e.framebufferTextureLayer($e.READ_FRAMEBUFFER,$e.COLOR_ATTACHMENT0,Oe.get(e).__webglTexture,U,M+ne),$e.framebufferTextureLayer($e.DRAW_FRAMEBUFFER,$e.COLOR_ATTACHMENT0,Oe.get(l).__webglTexture,B,O+ne)),$e.blitFramebuffer(k,T,_,S,R,I,_,S,$e.DEPTH_BUFFER_BIT,$e.NEAREST);Ie.bindFramebuffer($e.READ_FRAMEBUFFER,null),Ie.bindFramebuffer($e.DRAW_FRAMEBUFFER,null)}else if(0!==U||e.isRenderTargetTexture||Oe.has(e)){var re=Oe.get(e),ie=Oe.get(l);Ie.bindFramebuffer($e.READ_FRAMEBUFFER,ot),Ie.bindFramebuffer($e.DRAW_FRAMEBUFFER,st);for(var ae=0;ae<E;ae++)J?$e.framebufferTextureLayer($e.READ_FRAMEBUFFER,$e.COLOR_ATTACHMENT0,re.__webglTexture,U,M+ae):$e.framebufferTexture2D($e.READ_FRAMEBUFFER,$e.COLOR_ATTACHMENT0,$e.TEXTURE_2D,re.__webglTexture,U),Q?$e.framebufferTextureLayer($e.DRAW_FRAMEBUFFER,$e.COLOR_ATTACHMENT0,ie.__webglTexture,B,O+ae):$e.framebufferTexture2D($e.DRAW_FRAMEBUFFER,$e.COLOR_ATTACHMENT0,$e.TEXTURE_2D,ie.__webglTexture,B),0!==U?$e.blitFramebuffer(k,T,_,S,R,I,_,S,$e.COLOR_BUFFER_BIT,$e.NEAREST):Q?$e.copyTexSubImage3D(G,B,R,I,O+ae,k,T,_,S):$e.copyTexSubImage2D(G,B,R,I,k,T,_,S);Ie.bindFramebuffer($e.READ_FRAMEBUFFER,null),Ie.bindFramebuffer($e.DRAW_FRAMEBUFFER,null)}else Q?e.isDataTexture||e.isData3DTexture?$e.texSubImage3D(G,B,R,I,O,_,S,E,H,V,z.data):l.isCompressedArrayTexture?$e.compressedTexSubImage3D(G,B,R,I,O,_,S,E,H,z.data):$e.texSubImage3D(G,B,R,I,O,_,S,E,H,V,z):e.isDataTexture?$e.texSubImage2D($e.TEXTURE_2D,B,R,I,_,S,H,V,z.data):e.isCompressedTexture?$e.compressedTexSubImage2D($e.TEXTURE_2D,B,R,I,z.width,z.height,H,z.data):$e.texSubImage2D($e.TEXTURE_2D,B,R,I,_,S,H,V,z);$e.pixelStorei($e.UNPACK_ROW_LENGTH,W),$e.pixelStorei($e.UNPACK_IMAGE_HEIGHT,q),$e.pixelStorei($e.UNPACK_SKIP_PIXELS,X),$e.pixelStorei($e.UNPACK_SKIP_ROWS,K),$e.pixelStorei($e.UNPACK_SKIP_IMAGES,Y),0===B&&l.generateMipmaps&&$e.generateMipmap(G),Ie.unbindTexture()},this.initRenderTarget=function(e){void 0===Oe.get(e).__webglFramebuffer&&De.setupRenderTarget(e)},this.initTexture=function(e){e.isCubeTexture?De.setTextureCube(e,0):e.isData3DTexture?De.setTexture3D(e,0):e.isDataArrayTexture||e.isCompressedArrayTexture?De.setTexture2DArray(e,0):De.setTexture2D(e,0),Ie.unbindTexture()},this.resetState=function(){re=0,ie=0,ae=null,Ie.reset(),Qe.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))},[{key:"coordinateSystem",get:function(){return hp}},{key:"outputColorSpace",get:function(){return this._outputColorSpace},set:function(e){this._outputColorSpace=e;var l=this.getContext();l.drawingBufferColorSpace=Tp._getDrawingBufferColorSpace(e),l.unpackColorSpace=Tp._getUnpackColorSpace()}}])}();O("b7",My);
/**
			 * postprocessing v6.37.8 build Fri Sep 12 2025
			 * https://github.com/pmndrs/postprocessing
			 * Copyright 2015-2025 Raoul van Rschen
			 * @license Zlib
			 */
var Ry=.001,Iy=function(){return _createClass3(function Timer(){_classCallCheck3(this,Timer),this.startTime=performance.now(),this.previousTime=0,this.currentTime=0,this._delta=0,this._elapsed=0,this._fixedDelta=1e3/60,this.timescale=1,this.useFixedDelta=!1,this._autoReset=!1},[{key:"autoReset",get:function(){return this._autoReset},set:function(e){"undefined"!=typeof document&&void 0!==document.hidden&&(e?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this),this._autoReset=e)}},{key:"delta",get:function(){return this._delta*Ry}},{key:"fixedDelta",get:function(){return this._fixedDelta*Ry},set:function(e){this._fixedDelta=1e3*e}},{key:"elapsed",get:function(){return this._elapsed*Ry}},{key:"update",value:function(e){this.useFixedDelta?this._delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=(void 0!==e?e:performance.now())-this.startTime,this._delta=this.currentTime-this.previousTime),this._delta*=this.timescale,this._elapsed+=this._delta}},{key:"reset",value:function(){this._delta=0,this._elapsed=0,this.currentTime=performance.now()-this.startTime}},{key:"getDelta",value:function(){return this.delta}},{key:"getElapsed",value:function(){return this.elapsed}},{key:"handleEvent",value:function(e){document.hidden||(this.currentTime=performance.now()-this.startTime)}},{key:"dispose",value:function(){this.autoReset=!1}}])}(),Py=function(){var e=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),l=new Float32Array([0,0,2,0,0,2]),_=new wg;return _.setAttribute("position",new hg(e,3)),_.setAttribute("uv",new hg(l,2)),_}(),Oy=function(){function _Pass(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Pass",l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Qg,_=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Ng;_classCallCheck3(this,_Pass),this.name=e,this.renderer=null,this.scene=l,this.camera=_,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}return _createClass3(_Pass,[{key:"renderToScreen",get:function(){return!this.rtt},set:function(e){if(this.rtt===e){var l=this.fullscreenMaterial;null!==l&&(l.needsUpdate=!0),this.rtt=!e}}},{key:"mainScene",set:function(e){}},{key:"mainCamera",set:function(e){}},{key:"setRenderer",value:function(e){this.renderer=e}},{key:"isEnabled",value:function(){return this.enabled}},{key:"setEnabled",value:function(e){this.enabled=e}},{key:"fullscreenMaterial",get:function(){return null!==this.screen?this.screen.material:null},set:function(e){var l=this.screen;null!==l?l.material=e:((l=new Dg(_Pass.fullscreenGeometry,e)).frustumCulled=!1,null===this.scene&&(this.scene=new Qg),this.scene.add(l),this.screen=l)}},{key:"getFullscreenMaterial",value:function(){return this.fullscreenMaterial}},{key:"setFullscreenMaterial",value:function(e){this.fullscreenMaterial=e}},{key:"getDepthTexture",value:function(){return null}},{key:"setDepthTexture",value:function(e){}},{key:"render",value:function(e,l,_,S,E){throw new Error("Render method not implemented!")}},{key:"setSize",value:function(e,l){}},{key:"initialize",value:function(e,l,_){}},{key:"dispose",value:function(){for(var e=0,l=Object.keys(this);e<l.length;e++){var _=l[e],S=this[_];(S instanceof Fp||S instanceof og||S instanceof Dp||S instanceof _Pass)&&this[_].dispose()}null!==this.fullscreenMaterial&&this.fullscreenMaterial.dispose()}}],[{key:"fullscreenGeometry",get:function(){return Py}}])}(),Dy=function(e){function ClearMaskPass(){var e;return _classCallCheck3(this,ClearMaskPass),(e=_callSuper(this,ClearMaskPass,["ClearMaskPass",null,null])).needsSwap=!1,e}return _inherits(ClearMaskPass,e),_createClass3(ClearMaskPass,[{key:"render",value:function(e,l,_,S,E){var k=e.state.buffers.stencil;k.setLocked(!1),k.setTest(!1)}}])}(Oy),Ly="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",Uy=function(e){function CopyMaterial(){return _classCallCheck3(this,CopyMaterial),_callSuper(this,CopyMaterial,[{name:"CopyMaterial",uniforms:{inputBuffer:new Om(null),opacity:new Om(1)},blending:0,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:"#include <common>\n#include <dithering_pars_fragment>\n#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\nuniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;\n#include <colorspace_fragment>\n#include <dithering_fragment>\n}",vertexShader:Ly}])}return _inherits(CopyMaterial,e),_createClass3(CopyMaterial,[{key:"inputBuffer",set:function(e){this.uniforms.inputBuffer.value=e}},{key:"setInputBuffer",value:function(e){this.uniforms.inputBuffer.value=e}},{key:"getOpacity",value:function(e){return this.uniforms.opacity.value}},{key:"setOpacity",value:function(e){this.uniforms.opacity.value=e}}])}(Fg),Fy=function(e){function CopyPass(e){var l,_=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return _classCallCheck3(this,CopyPass),(l=_callSuper(this,CopyPass,["CopyPass"])).fullscreenMaterial=new Uy,l.needsSwap=!1,l.renderTarget=e,void 0===e&&(l.renderTarget=new Fp(1,1,{minFilter:nf,magFilter:nf,stencilBuffer:!1,depthBuffer:!1}),l.renderTarget.texture.name="CopyPass.Target"),l.autoResize=_,l}return _inherits(CopyPass,e),_createClass3(CopyPass,[{key:"resize",get:function(){return this.autoResize},set:function(e){this.autoResize=e}},{key:"texture",get:function(){return this.renderTarget.texture}},{key:"getTexture",value:function(){return this.renderTarget.texture}},{key:"setAutoResizeEnabled",value:function(e){this.autoResize=e}},{key:"render",value:function(e,l,_,S,E){this.fullscreenMaterial.inputBuffer=l.texture,e.setRenderTarget(this.renderToScreen?null:this.renderTarget),e.render(this.scene,this.camera)}},{key:"setSize",value:function(e,l){this.autoResize&&this.renderTarget.setSize(e,l)}},{key:"initialize",value:function(e,l,_){void 0!==_&&(this.renderTarget.texture.type=_,_!==of?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":null!==e&&e.outputColorSpace===ap&&(this.renderTarget.texture.colorSpace=ap))}}])}(Oy),Ny=new rg,By=function(e){function ClearPass(){var e,l=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],_=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],S=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return _classCallCheck3(this,ClearPass),(e=_callSuper(this,ClearPass,["ClearPass",null,null])).needsSwap=!1,e.color=l,e.depth=_,e.stencil=S,e.overrideClearColor=null,e.overrideClearAlpha=-1,e}return _inherits(ClearPass,e),_createClass3(ClearPass,[{key:"setClearFlags",value:function(e,l,_){this.color=e,this.depth=l,this.stencil=_}},{key:"getOverrideClearColor",value:function(){return this.overrideClearColor}},{key:"setOverrideClearColor",value:function(e){this.overrideClearColor=e}},{key:"getOverrideClearAlpha",value:function(){return this.overrideClearAlpha}},{key:"setOverrideClearAlpha",value:function(e){this.overrideClearAlpha=e}},{key:"render",value:function(e,l,_,S,E){var k=this.overrideClearColor,T=this.overrideClearAlpha,M=e.getClearAlpha(),R=null!==k,I=T>=0;R?(e.getClearColor(Ny),e.setClearColor(k,I?T:M)):I&&e.setClearAlpha(T),e.setRenderTarget(this.renderToScreen?null:l),e.clear(this.color,this.depth,this.stencil),R?e.setClearColor(Ny,M):I&&e.setClearAlpha(M)}}])}(Oy),zy=function(e){function MaskPass(e,l){var _;return _classCallCheck3(this,MaskPass),(_=_callSuper(this,MaskPass,["MaskPass",e,l])).needsSwap=!1,_.clearPass=new By(!1,!1,!0),_.inverse=!1,_}return _inherits(MaskPass,e),_createClass3(MaskPass,[{key:"mainScene",set:function(e){this.scene=e}},{key:"mainCamera",set:function(e){this.camera=e}},{key:"inverted",get:function(){return this.inverse},set:function(e){this.inverse=e}},{key:"clear",get:function(){return this.clearPass.enabled},set:function(e){this.clearPass.enabled=e}},{key:"getClearPass",value:function(){return this.clearPass}},{key:"isInverted",value:function(){return this.inverted}},{key:"setInverted",value:function(e){this.inverted=e}},{key:"render",value:function(e,l,_,S,E){var k=e.getContext(),T=e.state.buffers,M=this.scene,R=this.camera,I=this.clearPass,O=this.inverted?0:1,D=1-O;T.color.setMask(!1),T.depth.setMask(!1),T.color.setLocked(!0),T.depth.setLocked(!0),T.stencil.setTest(!0),T.stencil.setOp(k.REPLACE,k.REPLACE,k.REPLACE),T.stencil.setFunc(k.ALWAYS,O,4294967295),T.stencil.setClear(D),T.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?I.render(e,null):(I.render(e,l),I.render(e,_))),this.renderToScreen?(e.setRenderTarget(null),e.render(M,R)):(e.setRenderTarget(l),e.render(M,R),e.setRenderTarget(_),e.render(M,R)),T.color.setLocked(!1),T.depth.setLocked(!1),T.stencil.setLocked(!1),T.stencil.setFunc(k.EQUAL,1,4294967295),T.stencil.setOp(k.KEEP,k.KEEP,k.KEEP),T.stencil.setLocked(!0)}}])}(Oy),jy=(O("b8",function(){return _createClass3(function _class(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_=l.depthBuffer,S=void 0===_||_,E=l.stencilBuffer,k=void 0!==E&&E,T=l.multisampling,M=void 0===T?0:T,R=l.frameBufferType;_classCallCheck3(this,_class),this.renderer=null,this.inputBuffer=this.createBuffer(S,k,R,M),this.outputBuffer=this.inputBuffer.clone(),this.copyPass=new Fy,this.depthTexture=null,this.passes=[],this.timer=new Iy,this.autoRenderToScreen=!0,this.setRenderer(e)},[{key:"multisampling",get:function(){return this.inputBuffer.samples||0},set:function(e){var l=this.inputBuffer,_=this.multisampling;_>0&&e>0?(this.inputBuffer.samples=e,this.outputBuffer.samples=e,this.inputBuffer.dispose(),this.outputBuffer.dispose()):_!==e&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),this.inputBuffer=this.createBuffer(l.depthBuffer,l.stencilBuffer,l.texture.type,e),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}},{key:"getTimer",value:function(){return this.timer}},{key:"getRenderer",value:function(){return this.renderer}},{key:"setRenderer",value:function(e){if(this.renderer=e,null!==e){var l=e.getSize(new mp),_=e.getContext().getContextAttributes().alpha,S=this.inputBuffer.texture.type;S===of&&e.outputColorSpace===ap&&(this.inputBuffer.texture.colorSpace=ap,this.outputBuffer.texture.colorSpace=ap,this.inputBuffer.dispose(),this.outputBuffer.dispose()),e.autoClear=!1,this.setSize(l.width,l.height);var E,k=_createForOfIteratorHelper2(this.passes);try{for(k.s();!(E=k.n()).done;){E.value.initialize(e,_,S)}}catch(T){k.e(T)}finally{k.f()}}}},{key:"replaceRenderer",value:function(e){var l=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],_=this.renderer,S=_.domElement.parentNode;return this.setRenderer(e),l&&null!==S&&(S.removeChild(_.domElement),S.appendChild(e.domElement)),_}},{key:"createDepthTexture",value:function(){var e=this.depthTexture=new sm;return this.inputBuffer.depthTexture=e,this.inputBuffer.dispose(),this.inputBuffer.stencilBuffer?(e.format=Sf,e.type=gf):e.type=hf,e}},{key:"deleteDepthTexture",value:function(){if(null!==this.depthTexture){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();var e,l=_createForOfIteratorHelper2(this.passes);try{for(l.s();!(e=l.n()).done;){e.value.setDepthTexture(null)}}catch(_){l.e(_)}finally{l.f()}}}},{key:"createBuffer",value:function(e,l,_,S){var E=this.renderer,k=null===E?new mp:E.getDrawingBufferSize(new mp),T={minFilter:nf,magFilter:nf,stencilBuffer:l,depthBuffer:e,type:_},M=new Fp(k.width,k.height,T);return S>0&&(M.ignoreDepthForMultisampleCopy=!1,M.samples=S),_===of&&null!==E&&E.outputColorSpace===ap&&(M.texture.colorSpace=ap),M.texture.name="EffectComposer.Buffer",M.texture.generateMipmaps=!1,M}},{key:"setMainScene",value:function(e){var l,_=_createForOfIteratorHelper2(this.passes);try{for(_.s();!(l=_.n()).done;){l.value.mainScene=e}}catch(S){_.e(S)}finally{_.f()}}},{key:"setMainCamera",value:function(e){var l,_=_createForOfIteratorHelper2(this.passes);try{for(_.s();!(l=_.n()).done;){l.value.mainCamera=e}}catch(S){_.e(S)}finally{_.f()}}},{key:"addPass",value:function(e,l){var _=this.passes,S=this.renderer,E=S.getDrawingBufferSize(new mp),k=S.getContext().getContextAttributes().alpha,T=this.inputBuffer.texture.type;if(e.setRenderer(S),e.setSize(E.width,E.height),e.initialize(S,k,T),this.autoRenderToScreen&&(_.length>0&&(_[_.length-1].renderToScreen=!1),e.renderToScreen&&(this.autoRenderToScreen=!1)),void 0!==l?_.splice(l,0,e):_.push(e),this.autoRenderToScreen&&(_[_.length-1].renderToScreen=!0),e.needsDepthTexture||null!==this.depthTexture)if(null===this.depthTexture){var M,R=this.createDepthTexture(),I=_createForOfIteratorHelper2(_);try{for(I.s();!(M=I.n()).done;)(e=M.value).setDepthTexture(R)}catch(O){I.e(O)}finally{I.f()}}else e.setDepthTexture(this.depthTexture)}},{key:"removePass",value:function(e){var l=this.passes,_=l.indexOf(e);if(-1!==_&&l.splice(_,1).length>0){if(null!==this.depthTexture){l.reduce(function(e,l){return e||l.needsDepthTexture},!1)||(e.getDepthTexture()===this.depthTexture&&e.setDepthTexture(null),this.deleteDepthTexture())}this.autoRenderToScreen&&_===l.length&&(e.renderToScreen=!1,l.length>0&&(l[l.length-1].renderToScreen=!0))}}},{key:"removeAllPasses",value:function(){var e=this.passes;this.deleteDepthTexture(),e.length>0&&(this.autoRenderToScreen&&(e[e.length-1].renderToScreen=!1),this.passes=[])}},{key:"render",value:function(e){var l,_,S,E=this.renderer,k=this.copyPass,T=this.inputBuffer,M=this.outputBuffer,R=!1;void 0===e&&(this.timer.update(),e=this.timer.getDelta());var I,O=_createForOfIteratorHelper2(this.passes);try{for(O.s();!(I=O.n()).done;){var D=I.value;D.enabled&&(D.render(E,T,M,e,R),D.needsSwap&&(R&&(k.renderToScreen=D.renderToScreen,l=E.getContext(),(_=E.state.buffers.stencil).setFunc(l.NOTEQUAL,1,4294967295),k.render(E,T,M,e,R),_.setFunc(l.EQUAL,1,4294967295)),S=T,T=M,M=S),D instanceof zy?R=!0:D instanceof Dy&&(R=!1))}}catch(L){O.e(L)}finally{O.f()}}},{key:"setSize",value:function(e,l,_){var S=this.renderer,E=S.getSize(new mp);void 0!==e&&void 0!==l||(e=E.width,l=E.height),E.width===e&&E.height===l||S.setSize(e,l,_);var k=S.getDrawingBufferSize(new mp);this.inputBuffer.setSize(k.width,k.height),this.outputBuffer.setSize(k.width,k.height);var T,M=_createForOfIteratorHelper2(this.passes);try{for(M.s();!(T=M.n()).done;){T.value.setSize(k.width,k.height)}}catch(R){M.e(R)}finally{M.f()}}},{key:"reset",value:function(){this.dispose(),this.autoRenderToScreen=!0}},{key:"dispose",value:function(){var e,l=_createForOfIteratorHelper2(this.passes);try{for(l.s();!(e=l.n()).done;){e.value.dispose()}}catch(_){l.e(_)}finally{l.f()}this.passes=[],null!==this.inputBuffer&&this.inputBuffer.dispose(),null!==this.outputBuffer&&this.outputBuffer.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose(),Oy.fullscreenGeometry.dispose()}}])}()),0),Gy=1,Hy=2,Vy={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},Wy=_createClass3(function EffectShaderData(){_classCallCheck3(this,EffectShaderData),this.shaderParts=new Map([[Vy.FRAGMENT_HEAD,null],[Vy.FRAGMENT_MAIN_UV,null],[Vy.FRAGMENT_MAIN_IMAGE,null],[Vy.VERTEX_HEAD,null],[Vy.VERTEX_MAIN_SUPPORT,null]]),this.defines=new Map,this.uniforms=new Map,this.blendModes=new Map,this.extensions=new Set,this.attributes=jy,this.varyings=new Set,this.uvTransformation=!1,this.readDepth=!1,this.colorSpace=op}),qy=!1,Xy=function(){return _createClass3(function OverrideMaterialManager(){var e=this,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;_classCallCheck3(this,OverrideMaterialManager),this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(l),this.meshCount=0,this.replaceMaterial=function(l){if(l.isMesh){var _;if(l.material.flatShading)switch(l.material.side){case qd:_=e.materialsFlatShadedDoubleSide;break;case 1:_=e.materialsFlatShadedBackSide;break;default:_=e.materialsFlatShaded}else switch(l.material.side){case qd:_=e.materialsDoubleSide;break;case 1:_=e.materialsBackSide;break;default:_=e.materials}e.originalMaterials.set(l,l.material),l.isSkinnedMesh?l.material=_[2]:l.isInstancedMesh?l.material=_[1]:l.material=_[0],++e.meshCount}}},[{key:"cloneMaterial",value:function(e){if(!(e instanceof Fg))return e.clone();var l=e.uniforms,_=new Map;for(var S in l){var E=l[S].value;E.isRenderTargetTexture&&(l[S].value=null,_.set(S,E))}var k,T=e.clone(),M=_createForOfIteratorHelper2(_);try{for(M.s();!(k=M.n()).done;){var R=k.value;l[R[0]].value=R[1],T.uniforms[R[0]].value=R[1]}}catch(I){M.e(I)}finally{M.f()}return T}},{key:"setMaterial",value:function(e){var l=this;if(this.disposeMaterials(),this.material=e,null!==e){for(var _=this.materials=[this.cloneMaterial(e),this.cloneMaterial(e),this.cloneMaterial(e)],S=0,E=_;S<E.length;S++){var k=E[S];k.uniforms=Object.assign({},e.uniforms),k.side=0}_[2].skinning=!0,this.materialsBackSide=_.map(function(_){var S=l.cloneMaterial(_);return S.uniforms=Object.assign({},e.uniforms),S.side=1,S}),this.materialsDoubleSide=_.map(function(_){var S=l.cloneMaterial(_);return S.uniforms=Object.assign({},e.uniforms),S.side=qd,S}),this.materialsFlatShaded=_.map(function(_){var S=l.cloneMaterial(_);return S.uniforms=Object.assign({},e.uniforms),S.flatShading=!0,S}),this.materialsFlatShadedBackSide=_.map(function(_){var S=l.cloneMaterial(_);return S.uniforms=Object.assign({},e.uniforms),S.flatShading=!0,S.side=1,S}),this.materialsFlatShadedDoubleSide=_.map(function(_){var S=l.cloneMaterial(_);return S.uniforms=Object.assign({},e.uniforms),S.flatShading=!0,S.side=qd,S})}}},{key:"render",value:function(e,l,_){var S=e.shadowMap.enabled;if(e.shadowMap.enabled=!1,qy){var E=this.originalMaterials;this.meshCount=0,l.traverse(this.replaceMaterial),e.render(l,_);var k,T=_createForOfIteratorHelper2(E);try{for(T.s();!(k=T.n()).done;){var M=k.value;M[0].material=M[1]}}catch(I){T.e(I)}finally{T.f()}this.meshCount!==E.size&&E.clear()}else{var R=l.overrideMaterial;l.overrideMaterial=this.material,e.render(l,_),l.overrideMaterial=R}e.shadowMap.enabled=S}},{key:"disposeMaterials",value:function(){if(null!==this.material){var e,l=_createForOfIteratorHelper2(this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide));try{for(l.s();!(e=l.n()).done;){e.value.dispose()}}catch(_){l.e(_)}finally{l.f()}}}},{key:"dispose",value:function(){this.originalMaterials.clear(),this.disposeMaterials()}}],[{key:"workaroundEnabled",get:function(){return qy},set:function(e){qy=e}}])}(),Ky=-1,Yy=function(e){function Resolution(e){var l,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ky,S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ky,E=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return _classCallCheck3(this,Resolution),(l=_callSuper(this,Resolution)).resizable=e,l.baseSize=new mp(1,1),l.preferredSize=new mp(_,S),l.target=l.preferredSize,l.s=E,l.effectiveSize=new mp,l.addEventListener("change",function(){return l.updateEffectiveSize()}),l.updateEffectiveSize(),l}return _inherits(Resolution,e),_createClass3(Resolution,[{key:"updateEffectiveSize",value:function(){var e=this.baseSize,l=this.preferredSize,_=this.effectiveSize,S=this.scale;l.width!==Ky?_.width=l.width:l.height!==Ky?_.width=Math.round(l.height*(e.width/Math.max(e.height,1))):_.width=Math.round(e.width*S),l.height!==Ky?_.height=l.height:l.width!==Ky?_.height=Math.round(l.width/Math.max(e.width/Math.max(e.height,1),1)):_.height=Math.round(e.height*S)}},{key:"width",get:function(){return this.effectiveSize.width},set:function(e){this.preferredWidth=e}},{key:"height",get:function(){return this.effectiveSize.height},set:function(e){this.preferredHeight=e}},{key:"getWidth",value:function(){return this.width}},{key:"getHeight",value:function(){return this.height}},{key:"scale",get:function(){return this.s},set:function(e){this.s!==e&&(this.s=e,this.preferredSize.setScalar(Ky),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}},{key:"getScale",value:function(){return this.scale}},{key:"setScale",value:function(e){this.scale=e}},{key:"baseWidth",get:function(){return this.baseSize.width},set:function(e){this.baseSize.width!==e&&(this.baseSize.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}},{key:"getBaseWidth",value:function(){return this.baseWidth}},{key:"setBaseWidth",value:function(e){this.baseWidth=e}},{key:"baseHeight",get:function(){return this.baseSize.height},set:function(e){this.baseSize.height!==e&&(this.baseSize.height=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}},{key:"getBaseHeight",value:function(){return this.baseHeight}},{key:"setBaseHeight",value:function(e){this.baseHeight=e}},{key:"setBaseSize",value:function(e,l){this.baseSize.width===e&&this.baseSize.height===l||(this.baseSize.set(e,l),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}},{key:"preferredWidth",get:function(){return this.preferredSize.width},set:function(e){this.preferredSize.width!==e&&(this.preferredSize.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}},{key:"getPreferredWidth",value:function(){return this.preferredWidth}},{key:"setPreferredWidth",value:function(e){this.preferredWidth=e}},{key:"preferredHeight",get:function(){return this.preferredSize.height},set:function(e){this.preferredSize.height!==e&&(this.preferredSize.height=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}},{key:"getPreferredHeight",value:function(){return this.preferredHeight}},{key:"setPreferredHeight",value:function(e){this.preferredHeight=e}},{key:"setPreferredSize",value:function(e,l){this.preferredSize.width===e&&this.preferredSize.height===l||(this.preferredSize.set(e,l),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}},{key:"copy",value:function(e){this.s=e.scale,this.baseSize.set(e.baseWidth,e.baseHeight),this.preferredSize.set(e.preferredWidth,e.preferredHeight),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height)}}],[{key:"AUTO_SIZE",get:function(){return Ky}}])}(fp),Jy=9,Qy=23,Zy=28,$y=30,e_=new Map([[0,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(x.rgb+y.rgb,y.a),opacity);}"],[1,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,y.a*opacity);}"],[2,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4((x.rgb+y.rgb)*0.5,y.a),opacity);}"],[3,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.xy,xHSL.z));return mix(x,vec4(z,y.a),opacity);}"],[4,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 a=x.rgb,b=y.rgb;vec3 z=mix(step(0.0,b)*(1.0-min(vec3(1.0),(1.0-a)/b)),vec3(1.0),step(1.0,a));return mix(x,vec4(z,y.a),opacity);}"],[5,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 a=x.rgb,b=y.rgb;vec3 z=step(0.0,a)*mix(min(vec3(1.0),a/max(1.0-b,1e-9)),vec3(1.0),step(1.0,b));return mix(x,vec4(z,y.a),opacity);}"],[6,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(min(x.rgb,y.rgb),y.a),opacity);}"],[7,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(abs(x.rgb-y.rgb),y.a),opacity);}"],[8,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(x.rgb/max(y.rgb,1e-12),y.a),opacity);}"],[Jy,null],[10,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4((x.rgb+y.rgb-2.0*x.rgb*y.rgb),y.a),opacity);}"],[11,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 a=min(x.rgb,1.0);vec3 b=min(y.rgb,1.0);vec3 z=mix(2.0*a*b,1.0-2.0*(1.0-a)*(1.0-b),step(0.5,b));return mix(x,vec4(z,y.a),opacity);}"],[12,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(step(1.0,x.rgb+y.rgb),y.a),opacity);}"],[13,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.x,xHSL.yz));return mix(x,vec4(z,y.a),opacity);}"],[14,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(1.0-y.rgb,y.a),opacity);}"],[15,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(y.rgb*(1.0-x.rgb),y.a),opacity);}"],[16,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(max(x.rgb,y.rgb),y.a),opacity);}"],[17,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(clamp(y.rgb+x.rgb-1.0,0.0,1.0),y.a),opacity);}"],[18,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(min(x.rgb+y.rgb,1.0),y.a),opacity);}"],[19,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(clamp(2.0*y.rgb+x.rgb-1.0,0.0,1.0),y.a),opacity);}"],[20,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.xy,yHSL.z));return mix(x,vec4(z,y.a),opacity);}"],[21,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(x.rgb*y.rgb,y.a),opacity);}"],[22,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(1.0-abs(1.0-x.rgb-y.rgb),y.a),opacity);}"],[Qy,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,opacity);}"],[24,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 z=mix(2.0*y.rgb*x.rgb,1.0-2.0*(1.0-y.rgb)*(1.0-x.rgb),step(0.5,x.rgb));return mix(x,vec4(z,y.a),opacity);}"],[25,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 y2=2.0*y.rgb;vec3 z=mix(mix(y2,x.rgb,step(0.5*x.rgb,y.rgb)),max(y2-1.0,vec3(0.0)),step(x.rgb,y2-1.0));return mix(x,vec4(z,y.a),opacity);}"],[26,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 z=mix(min(x.rgb*x.rgb/max(1.0-y.rgb,1e-12),1.0),y.rgb,step(1.0,y.rgb));return mix(x,vec4(z,y.a),opacity);}"],[27,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.x,yHSL.y,xHSL.z));return mix(x,vec4(z,y.a),opacity);}"],[Zy,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(x.rgb+y.rgb-min(x.rgb*y.rgb,1.0),y.a),opacity);}"],[29,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 a=x.rgb;vec3 b=y.rgb;vec3 y2=2.0*b;vec3 w=step(0.5,b);vec3 c=a-(1.0-y2)*a*(1.0-a);vec3 d=mix(a+(y2-1.0)*(sqrt(a)-a),a+(y2-1.0)*a*((16.0*a-12.0)*a+3.0),w*(1.0-step(0.25,a)));vec3 z=mix(c,d,w);return mix(x,vec4(z,y.a),opacity);}"],[$y,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y;}"],[31,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(max(x.rgb+y.rgb-1.0,0.0),y.a),opacity);}"],[32,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 z=mix(max(1.0-min((1.0-x.rgb)/(2.0*y.rgb),1.0),0.0),min(x.rgb/(2.0*(1.0-y.rgb)),1.0),step(0.5,y.rgb));return mix(x,vec4(z,y.a),opacity);}"]]),t_=function(e){function BlendMode(e){var l,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return _classCallCheck3(this,BlendMode),(l=_callSuper(this,BlendMode))._blendFunction=e,l.opacity=new Om(_),l}return _inherits(BlendMode,e),_createClass3(BlendMode,[{key:"getOpacity",value:function(){return this.opacity.value}},{key:"setOpacity",value:function(e){this.opacity.value=e}},{key:"blendFunction",get:function(){return this._blendFunction},set:function(e){this._blendFunction=e,this.dispatchEvent({type:"change"})}},{key:"getBlendFunction",value:function(){return this.blendFunction}},{key:"setBlendFunction",value:function(e){this.blendFunction=e}},{key:"getShaderCode",value:function(){return e_.get(this.blendFunction)}}])}(fp),n_=function(e){function Effect(e,l){var _,S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},E=S.attributes,k=void 0===E?jy:E,T=S.blendFunction,M=void 0===T?Qy:T,R=S.defines,I=void 0===R?new Map:R,O=S.uniforms,D=void 0===O?new Map:O,L=S.extensions,U=void 0===L?null:L,B=S.vertexShader,z=void 0===B?null:B;return _classCallCheck3(this,Effect),(_=_callSuper(this,Effect)).name=e,_.renderer=null,_.attributes=k,_.fragmentShader=l,_.vertexShader=z,_.defines=I,_.uniforms=D,_.extensions=U,_.blendMode=new t_(M),_.blendMode.addEventListener("change",function(e){return _.setChanged()}),_._inputColorSpace=op,_._outputColorSpace=ip,_}return _inherits(Effect,e),_createClass3(Effect,[{key:"inputColorSpace",get:function(){return this._inputColorSpace},set:function(e){this._inputColorSpace=e,this.setChanged()}},{key:"outputColorSpace",get:function(){return this._outputColorSpace},set:function(e){this._outputColorSpace=e,this.setChanged()}},{key:"mainScene",set:function(e){}},{key:"mainCamera",set:function(e){}},{key:"getName",value:function(){return this.name}},{key:"setRenderer",value:function(e){this.renderer=e}},{key:"getDefines",value:function(){return this.defines}},{key:"getUniforms",value:function(){return this.uniforms}},{key:"getExtensions",value:function(){return this.extensions}},{key:"getBlendMode",value:function(){return this.blendMode}},{key:"getAttributes",value:function(){return this.attributes}},{key:"setAttributes",value:function(e){this.attributes=e,this.setChanged()}},{key:"getFragmentShader",value:function(){return this.fragmentShader}},{key:"setFragmentShader",value:function(e){this.fragmentShader=e,this.setChanged()}},{key:"getVertexShader",value:function(){return this.vertexShader}},{key:"setVertexShader",value:function(e){this.vertexShader=e,this.setChanged()}},{key:"setChanged",value:function(){this.dispatchEvent({type:"change"})}},{key:"setDepthTexture",value:function(e){}},{key:"update",value:function(e,l,_){}},{key:"setSize",value:function(e,l){}},{key:"initialize",value:function(e,l,_){}},{key:"dispose",value:function(){for(var e=0,l=Object.keys(this);e<l.length;e++){var _=l[e],S=this[_];(S instanceof Fp||S instanceof og||S instanceof Dp||S instanceof Oy)&&this[_].dispose()}}}])}(fp),r_=2,i_=3,a_=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],o_=function(e){function KawaseBlurMaterial(){var e,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Lp;return _classCallCheck3(this,KawaseBlurMaterial),(e=_callSuper(this,KawaseBlurMaterial,[{name:"KawaseBlurMaterial",uniforms:{inputBuffer:new Om(null),texelSize:new Om(new Lp),scale:new Om(1),kernel:new Om(0)},blending:0,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:"#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\nvarying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;\n#include <colorspace_fragment>\n}",vertexShader:"uniform vec4 texelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize.xy*vec2(kernel)+texelSize.zw)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}"}])).setTexelSize(l.x,l.y),e.kernelSize=r_,e}return _inherits(KawaseBlurMaterial,e),_createClass3(KawaseBlurMaterial,[{key:"inputBuffer",set:function(e){this.uniforms.inputBuffer.value=e}},{key:"setInputBuffer",value:function(e){this.inputBuffer=e}},{key:"kernelSequence",get:function(){return a_[this.kernelSize]}},{key:"scale",get:function(){return this.uniforms.scale.value},set:function(e){this.uniforms.scale.value=e}},{key:"getScale",value:function(){return this.uniforms.scale.value}},{key:"setScale",value:function(e){this.uniforms.scale.value=e}},{key:"getKernel",value:function(){return null}},{key:"kernel",get:function(){return this.uniforms.kernel.value},set:function(e){this.uniforms.kernel.value=e}},{key:"setKernel",value:function(e){this.kernel=e}},{key:"setTexelSize",value:function(e,l){this.uniforms.texelSize.value.set(e,l,.5*e,.5*l)}},{key:"setSize",value:function(e,l){var _=1/e,S=1/l;this.uniforms.texelSize.value.set(_,S,.5*_,.5*S)}}])}(Fg),s_=function(e){function KawaseBlurPass(){var e,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_=l.kernelSize,S=void 0===_?r_:_,E=l.resolutionScale,k=void 0===E?.5:E,T=l.width,M=void 0===T?Yy.AUTO_SIZE:T,R=l.height,I=void 0===R?Yy.AUTO_SIZE:R,O=l.resolutionX,D=void 0===O?M:O,L=l.resolutionY,U=void 0===L?I:L;_classCallCheck3(this,KawaseBlurPass),(e=_callSuper(this,KawaseBlurPass,["KawaseBlurPass"])).renderTargetA=new Fp(1,1,{depthBuffer:!1}),e.renderTargetA.texture.name="Blur.Target.A",e.renderTargetB=e.renderTargetA.clone(),e.renderTargetB.texture.name="Blur.Target.B";var B=e.resolution=new Yy(e,D,U,k);return B.addEventListener("change",function(l){return e.setSize(B.baseWidth,B.baseHeight)}),e._blurMaterial=new o_,e._blurMaterial.kernelSize=S,e.copyMaterial=new Uy,e}return _inherits(KawaseBlurPass,e),_createClass3(KawaseBlurPass,[{key:"getResolution",value:function(){return this.resolution}},{key:"blurMaterial",get:function(){return this._blurMaterial},set:function(e){this._blurMaterial=e}},{key:"dithering",get:function(){return this.copyMaterial.dithering},set:function(e){this.copyMaterial.dithering=e}},{key:"kernelSize",get:function(){return this.blurMaterial.kernelSize},set:function(e){this.blurMaterial.kernelSize=e}},{key:"width",get:function(){return this.resolution.width},set:function(e){this.resolution.preferredWidth=e}},{key:"height",get:function(){return this.resolution.height},set:function(e){this.resolution.preferredHeight=e}},{key:"scale",get:function(){return this.blurMaterial.scale},set:function(e){this.blurMaterial.scale=e}},{key:"getScale",value:function(){return this.blurMaterial.scale}},{key:"setScale",value:function(e){this.blurMaterial.scale=e}},{key:"getKernelSize",value:function(){return this.kernelSize}},{key:"setKernelSize",value:function(e){this.kernelSize=e}},{key:"getResolutionScale",value:function(){return this.resolution.scale}},{key:"setResolutionScale",value:function(e){this.resolution.scale=e}},{key:"render",value:function(e,l,_,S,E){var k=this.scene,T=this.camera,M=this.renderTargetA,R=this.renderTargetB,I=this.blurMaterial,O=I.kernelSequence,D=l;this.fullscreenMaterial=I;for(var L=0,U=O.length;L<U;++L){var B=1&L?R:M;I.kernel=O[L],I.inputBuffer=D.texture,e.setRenderTarget(B),e.render(k,T),D=B}this.fullscreenMaterial=this.copyMaterial,this.copyMaterial.inputBuffer=D.texture,e.setRenderTarget(this.renderToScreen?null:_),e.render(k,T)}},{key:"setSize",value:function(e,l){var _=this.resolution;_.setBaseSize(e,l);var S=_.width,E=_.height;this.renderTargetA.setSize(S,E),this.renderTargetB.setSize(S,E),this.blurMaterial.setSize(e,l)}},{key:"initialize",value:function(e,l,_){void 0!==_&&(this.renderTargetA.texture.type=_,this.renderTargetB.texture.type=_,_!==of?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.copyMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):null!==e&&e.outputColorSpace===ap&&(this.renderTargetA.texture.colorSpace=ap,this.renderTargetB.texture.colorSpace=ap))}}],[{key:"AUTO_SIZE",get:function(){return Yy.AUTO_SIZE}}])}(Oy),u_=function(e){function LuminanceMaterial(){var e,l=arguments.length>0&&void 0!==arguments[0]&&arguments[0],_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return _classCallCheck3(this,LuminanceMaterial),(e=_callSuper(this,LuminanceMaterial,[{name:"LuminanceMaterial",defines:{THREE_REVISION:Wd.replace(/\D+/g,"")},uniforms:{inputBuffer:new Om(null),threshold:new Om(0),smoothing:new Om(1),range:new Om(null)},blending:0,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:"#include <common>\n#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\n#ifdef RANGE\nuniform vec2 range;\n#elif defined(THRESHOLD)\nuniform float threshold;uniform float smoothing;\n#endif\nvarying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);float l=luminance(texel.rgb);float mask=1.0;\n#ifdef RANGE\nfloat low=step(range.x,l);float high=step(l,range.y);mask=low*high;\n#elif defined(THRESHOLD)\nmask=smoothstep(threshold,threshold+smoothing,l);\n#endif\n#ifdef COLOR\ngl_FragColor=texel*mask;\n#else\ngl_FragColor=vec4(l*mask);\n#endif\n}",vertexShader:Ly}])).colorOutput=l,e.luminanceRange=_,e}return _inherits(LuminanceMaterial,e),_createClass3(LuminanceMaterial,[{key:"inputBuffer",set:function(e){this.uniforms.inputBuffer.value=e}},{key:"setInputBuffer",value:function(e){this.uniforms.inputBuffer.value=e}},{key:"threshold",get:function(){return this.uniforms.threshold.value},set:function(e){this.smoothing>0||e>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.threshold.value=e}},{key:"getThreshold",value:function(){return this.threshold}},{key:"setThreshold",value:function(e){this.threshold=e}},{key:"smoothing",get:function(){return this.uniforms.smoothing.value},set:function(e){this.threshold>0||e>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.smoothing.value=e}},{key:"getSmoothingFactor",value:function(){return this.smoothing}},{key:"setSmoothingFactor",value:function(e){this.smoothing=e}},{key:"useThreshold",get:function(){return this.threshold>0||this.smoothing>0},set:function(e){}},{key:"colorOutput",get:function(){return void 0!==this.defines.COLOR},set:function(e){e?this.defines.COLOR="1":delete this.defines.COLOR,this.needsUpdate=!0}},{key:"isColorOutputEnabled",value:function(e){return this.colorOutput}},{key:"setColorOutputEnabled",value:function(e){this.colorOutput=e}},{key:"useRange",get:function(){return null!==this.luminanceRange},set:function(e){this.luminanceRange=null}},{key:"luminanceRange",get:function(){return this.uniforms.range.value},set:function(e){null!==e?this.defines.RANGE="1":delete this.defines.RANGE,this.uniforms.range.value=e,this.needsUpdate=!0}},{key:"getLuminanceRange",value:function(){return this.luminanceRange}},{key:"setLuminanceRange",value:function(e){this.luminanceRange=e}}])}(Fg),l_=function(e){function LuminancePass(){var e,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_=l.renderTarget,S=l.luminanceRange,E=l.colorOutput,k=l.resolutionScale,T=void 0===k?1:k,M=l.width,R=void 0===M?Yy.AUTO_SIZE:M,I=l.height,O=void 0===I?Yy.AUTO_SIZE:I,D=l.resolutionX,L=void 0===D?R:D,U=l.resolutionY,B=void 0===U?O:U;_classCallCheck3(this,LuminancePass),(e=_callSuper(this,LuminancePass,["LuminancePass"])).fullscreenMaterial=new u_(E,S),e.needsSwap=!1,e.renderTarget=_,void 0===e.renderTarget&&(e.renderTarget=new Fp(1,1,{depthBuffer:!1}),e.renderTarget.texture.name="LuminancePass.Target");var z=e.resolution=new Yy(e,L,B,T);return z.addEventListener("change",function(l){return e.setSize(z.baseWidth,z.baseHeight)}),e}return _inherits(LuminancePass,e),_createClass3(LuminancePass,[{key:"texture",get:function(){return this.renderTarget.texture}},{key:"getTexture",value:function(){return this.renderTarget.texture}},{key:"getResolution",value:function(){return this.resolution}},{key:"render",value:function(e,l,_,S,E){this.fullscreenMaterial.inputBuffer=l.texture,e.setRenderTarget(this.renderToScreen?null:this.renderTarget),e.render(this.scene,this.camera)}},{key:"setSize",value:function(e,l){var _=this.resolution;_.setBaseSize(e,l),this.renderTarget.setSize(_.width,_.height)}},{key:"initialize",value:function(e,l,_){void 0!==_&&_!==of&&(this.renderTarget.texture.type=_,this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}}])}(Oy),c_=function(e){function DownsamplingMaterial(){return _classCallCheck3(this,DownsamplingMaterial),_callSuper(this,DownsamplingMaterial,[{name:"DownsamplingMaterial",uniforms:{inputBuffer:new Om(null),texelSize:new Om(new mp)},blending:0,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:"#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\n#define WEIGHT_INNER 0.125\n#define WEIGHT_OUTER 0.0555555\nvarying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;float clampToBorder(const in vec2 uv){return float(uv.s>=0.0&&uv.s<=1.0&&uv.t>=0.0&&uv.t<=1.0);}void main(){vec4 c=vec4(0.0);vec4 w=WEIGHT_INNER*vec4(clampToBorder(vUv00),clampToBorder(vUv01),clampToBorder(vUv02),clampToBorder(vUv03));c+=w.x*texture2D(inputBuffer,vUv00);c+=w.y*texture2D(inputBuffer,vUv01);c+=w.z*texture2D(inputBuffer,vUv02);c+=w.w*texture2D(inputBuffer,vUv03);w=WEIGHT_OUTER*vec4(clampToBorder(vUv04),clampToBorder(vUv05),clampToBorder(vUv06),clampToBorder(vUv07));c+=w.x*texture2D(inputBuffer,vUv04);c+=w.y*texture2D(inputBuffer,vUv05);c+=w.z*texture2D(inputBuffer,vUv06);c+=w.w*texture2D(inputBuffer,vUv07);w=WEIGHT_OUTER*vec4(clampToBorder(vUv08),clampToBorder(vUv09),clampToBorder(vUv10),clampToBorder(vUv11));c+=w.x*texture2D(inputBuffer,vUv08);c+=w.y*texture2D(inputBuffer,vUv09);c+=w.z*texture2D(inputBuffer,vUv10);c+=w.w*texture2D(inputBuffer,vUv11);c+=WEIGHT_OUTER*texture2D(inputBuffer,vUv);gl_FragColor=c;\n#include <colorspace_fragment>\n}",vertexShader:"uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;void main(){vUv=position.xy*0.5+0.5;vUv00=vUv+texelSize*vec2(-1.0,1.0);vUv01=vUv+texelSize*vec2(1.0,1.0);vUv02=vUv+texelSize*vec2(-1.0,-1.0);vUv03=vUv+texelSize*vec2(1.0,-1.0);vUv04=vUv+texelSize*vec2(-2.0,2.0);vUv05=vUv+texelSize*vec2(0.0,2.0);vUv06=vUv+texelSize*vec2(2.0,2.0);vUv07=vUv+texelSize*vec2(-2.0,0.0);vUv08=vUv+texelSize*vec2(2.0,0.0);vUv09=vUv+texelSize*vec2(-2.0,-2.0);vUv10=vUv+texelSize*vec2(0.0,-2.0);vUv11=vUv+texelSize*vec2(2.0,-2.0);gl_Position=vec4(position.xy,1.0,1.0);}"}])}return _inherits(DownsamplingMaterial,e),_createClass3(DownsamplingMaterial,[{key:"inputBuffer",set:function(e){this.uniforms.inputBuffer.value=e}},{key:"setSize",value:function(e,l){this.uniforms.texelSize.value.set(1/e,1/l)}}])}(Fg),h_=function(e){function UpsamplingMaterial(){return _classCallCheck3(this,UpsamplingMaterial),_callSuper(this,UpsamplingMaterial,[{name:"UpsamplingMaterial",uniforms:{inputBuffer:new Om(null),supportBuffer:new Om(null),texelSize:new Om(new mp),radius:new Om(.85)},blending:0,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:"#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;uniform mediump sampler2D supportBuffer;\n#else\nuniform lowp sampler2D inputBuffer;uniform lowp sampler2D supportBuffer;\n#endif\nuniform float radius;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vec4 c=vec4(0.0);c+=texture2D(inputBuffer,vUv0)*0.0625;c+=texture2D(inputBuffer,vUv1)*0.125;c+=texture2D(inputBuffer,vUv2)*0.0625;c+=texture2D(inputBuffer,vUv3)*0.125;c+=texture2D(inputBuffer,vUv)*0.25;c+=texture2D(inputBuffer,vUv4)*0.125;c+=texture2D(inputBuffer,vUv5)*0.0625;c+=texture2D(inputBuffer,vUv6)*0.125;c+=texture2D(inputBuffer,vUv7)*0.0625;vec4 baseColor=texture2D(supportBuffer,vUv);gl_FragColor=mix(baseColor,c,radius);\n#include <colorspace_fragment>\n}",vertexShader:"uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,1.0);vUv1=vUv+texelSize*vec2(0.0,1.0);vUv2=vUv+texelSize*vec2(1.0,1.0);vUv3=vUv+texelSize*vec2(-1.0,0.0);vUv4=vUv+texelSize*vec2(1.0,0.0);vUv5=vUv+texelSize*vec2(-1.0,-1.0);vUv6=vUv+texelSize*vec2(0.0,-1.0);vUv7=vUv+texelSize*vec2(1.0,-1.0);gl_Position=vec4(position.xy,1.0,1.0);}"}])}return _inherits(UpsamplingMaterial,e),_createClass3(UpsamplingMaterial,[{key:"inputBuffer",set:function(e){this.uniforms.inputBuffer.value=e}},{key:"supportBuffer",set:function(e){this.uniforms.supportBuffer.value=e}},{key:"radius",get:function(){return this.uniforms.radius.value},set:function(e){this.uniforms.radius.value=e}},{key:"setSize",value:function(e,l){this.uniforms.texelSize.value.set(1/e,1/l)}}])}(Fg),d_=function(e){function MipmapBlurPass(){var e;return _classCallCheck3(this,MipmapBlurPass),(e=_callSuper(this,MipmapBlurPass,["MipmapBlurPass"])).needsSwap=!1,e.renderTarget=new Fp(1,1,{depthBuffer:!1}),e.renderTarget.texture.name="Upsampling.Mipmap0",e.downsamplingMipmaps=[],e.upsamplingMipmaps=[],e.downsamplingMaterial=new c_,e.upsamplingMaterial=new h_,e.resolution=new mp,e}return _inherits(MipmapBlurPass,e),_createClass3(MipmapBlurPass,[{key:"texture",get:function(){return this.renderTarget.texture}},{key:"levels",get:function(){return this.downsamplingMipmaps.length},set:function(e){if(this.levels!==e){var l=this.renderTarget;this.dispose(),this.downsamplingMipmaps=[],this.upsamplingMipmaps=[];for(var _=0;_<e;++_){var S=l.clone();S.texture.name="Downsampling.Mipmap"+_,this.downsamplingMipmaps.push(S)}this.upsamplingMipmaps.push(l);for(var E=1,k=e-1;E<k;++E){var T=l.clone();T.texture.name="Upsampling.Mipmap"+E,this.upsamplingMipmaps.push(T)}this.setSize(this.resolution.x,this.resolution.y)}}},{key:"radius",get:function(){return this.upsamplingMaterial.radius},set:function(e){this.upsamplingMaterial.radius=e}},{key:"render",value:function(e,l,_,S,E){var k=this.scene,T=this.camera,M=this.downsamplingMaterial,R=this.upsamplingMaterial,I=this.downsamplingMipmaps,O=this.upsamplingMipmaps,D=l;this.fullscreenMaterial=M;for(var L=0,U=I.length;L<U;++L){var B=I[L];M.setSize(D.width,D.height),M.inputBuffer=D.texture,e.setRenderTarget(B),e.render(k,T),D=B}this.fullscreenMaterial=R;for(var z=O.length-1;z>=0;--z){var j=O[z];R.setSize(D.width,D.height),R.inputBuffer=D.texture,R.supportBuffer=I[z].texture,e.setRenderTarget(j),e.render(k,T),D=j}}},{key:"setSize",value:function(e,l){var _=this.resolution;_.set(e,l);for(var S=_.width,E=_.height,k=0,T=this.downsamplingMipmaps.length;k<T;++k)S=Math.round(.5*S),E=Math.round(.5*E),this.downsamplingMipmaps[k].setSize(S,E),k<this.upsamplingMipmaps.length&&this.upsamplingMipmaps[k].setSize(S,E)}},{key:"initialize",value:function(e,l,_){if(void 0!==_){var S,E=this.downsamplingMipmaps.concat(this.upsamplingMipmaps),k=_createForOfIteratorHelper2(E);try{for(k.s();!(S=k.n()).done;){S.value.texture.type=_}}catch(R){k.e(R)}finally{k.f()}if(_!==of)this.downsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.upsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1";else if(null!==e&&e.outputColorSpace===ap){var T,M=_createForOfIteratorHelper2(E);try{for(M.s();!(T=M.n()).done;){T.value.texture.colorSpace=ap}}catch(R){M.e(R)}finally{M.f()}}}}},{key:"dispose",value:function(){_superPropGet(MipmapBlurPass,"dispose",this,3)([]);var e,l=_createForOfIteratorHelper2(this.downsamplingMipmaps.concat(this.upsamplingMipmaps));try{for(l.s();!(e=l.n()).done;){e.value.dispose()}}catch(_){l.e(_)}finally{l.f()}}}])}(Oy),f_=(O("bf",function(e){function _class2(){var e,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_=l.blendFunction,S=void 0===_?Zy:_,E=l.luminanceThreshold,k=void 0===E?1:E,T=l.luminanceSmoothing,M=void 0===T?.03:T,R=l.mipmapBlur,I=void 0===R||R,O=l.intensity,D=void 0===O?1:O,L=l.radius,U=void 0===L?.85:L,B=l.levels,z=void 0===B?8:B,j=l.kernelSize,G=void 0===j?i_:j,H=l.resolutionScale,V=void 0===H?.5:H,W=l.width,q=void 0===W?Yy.AUTO_SIZE:W,X=l.height,K=void 0===X?Yy.AUTO_SIZE:X,Y=l.resolutionX,J=void 0===Y?q:Y,Q=l.resolutionY,Z=void 0===Q?K:Q;_classCallCheck3(this,_class2),(e=_callSuper(this,_class2,["BloomEffect","#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D map;\n#else\nuniform lowp sampler2D map;\n#endif\nuniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec4 texel=texture2D(map,uv);outputColor=vec4(texel.rgb*intensity,max(inputColor.a,texel.a));}",{blendFunction:S,uniforms:new Map([["map",new Om(null)],["intensity",new Om(D)]])}])).renderTarget=new Fp(1,1,{depthBuffer:!1}),e.renderTarget.texture.name="Bloom.Target",e.blurPass=new s_({kernelSize:G}),e.luminancePass=new l_({colorOutput:!0}),e.luminanceMaterial.threshold=k,e.luminanceMaterial.smoothing=M,e.mipmapBlurPass=new d_,e.mipmapBlurPass.enabled=I,e.mipmapBlurPass.radius=U,e.mipmapBlurPass.levels=z,e.uniforms.get("map").value=I?e.mipmapBlurPass.texture:e.renderTarget.texture;var $=e.resolution=new Yy(e,J,Z,V);return $.addEventListener("change",function(l){return e.setSize($.baseWidth,$.baseHeight)}),e}return _inherits(_class2,e),_createClass3(_class2,[{key:"texture",get:function(){return this.mipmapBlurPass.enabled?this.mipmapBlurPass.texture:this.renderTarget.texture}},{key:"getTexture",value:function(){return this.texture}},{key:"getResolution",value:function(){return this.resolution}},{key:"getBlurPass",value:function(){return this.blurPass}},{key:"getLuminancePass",value:function(){return this.luminancePass}},{key:"luminanceMaterial",get:function(){return this.luminancePass.fullscreenMaterial}},{key:"getLuminanceMaterial",value:function(){return this.luminancePass.fullscreenMaterial}},{key:"width",get:function(){return this.resolution.width},set:function(e){this.resolution.preferredWidth=e}},{key:"height",get:function(){return this.resolution.height},set:function(e){this.resolution.preferredHeight=e}},{key:"dithering",get:function(){return this.blurPass.dithering},set:function(e){this.blurPass.dithering=e}},{key:"kernelSize",get:function(){return this.blurPass.kernelSize},set:function(e){this.blurPass.kernelSize=e}},{key:"distinction",get:function(){return 1},set:function(e){}},{key:"intensity",get:function(){return this.uniforms.get("intensity").value},set:function(e){this.uniforms.get("intensity").value=e}},{key:"getIntensity",value:function(){return this.intensity}},{key:"setIntensity",value:function(e){this.intensity=e}},{key:"getResolutionScale",value:function(){return this.resolution.scale}},{key:"setResolutionScale",value:function(e){this.resolution.scale=e}},{key:"update",value:function(e,l,_){var S=this.renderTarget,E=this.luminancePass;E.enabled?(E.render(e,l),this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(e,E.renderTarget):this.blurPass.render(e,E.renderTarget,S)):this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(e,l):this.blurPass.render(e,l,S)}},{key:"setSize",value:function(e,l){var _=this.resolution;_.setBaseSize(e,l),this.renderTarget.setSize(_.width,_.height),this.blurPass.resolution.copy(_),this.luminancePass.setSize(e,l),this.mipmapBlurPass.setSize(e,l)}},{key:"initialize",value:function(e,l,_){this.blurPass.initialize(e,l,_),this.luminancePass.initialize(e,l,_),this.mipmapBlurPass.initialize(e,l,_),void 0!==_&&(this.renderTarget.texture.type=_,null!==e&&e.outputColorSpace===ap&&(this.renderTarget.texture.colorSpace=ap))}}])}(n_)),function(e){function ShaderPass(e){var l,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"inputBuffer";return _classCallCheck3(this,ShaderPass),(l=_callSuper(this,ShaderPass,["ShaderPass"])).fullscreenMaterial=e,l.input=_,l}return _inherits(ShaderPass,e),_createClass3(ShaderPass,[{key:"setInput",value:function(e){this.input=e}},{key:"render",value:function(e,l,_,S,E){var k=this.fullscreenMaterial.uniforms;null!==l&&void 0!==k&&void 0!==k[this.input]&&(k[this.input].value=l.texture),e.setRenderTarget(this.renderToScreen?null:_),e.render(this.scene,this.camera)}},{key:"initialize",value:function(e,l,_){void 0!==_&&_!==of&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}}])}(Oy)),p_=(O("bd",function(e){function _class3(e,l){var _,S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return _classCallCheck3(this,_class3),(_=_callSuper(this,_class3,["RenderPass",e,l])).needsSwap=!1,_.clearPass=new By,_.overrideMaterialManager=null===S?null:new Xy(S),_.ignoreBackground=!1,_.skipShadowMapUpdate=!1,_.selection=null,_}return _inherits(_class3,e),_createClass3(_class3,[{key:"mainScene",set:function(e){this.scene=e}},{key:"mainCamera",set:function(e){this.camera=e}},{key:"renderToScreen",get:function(){return _superPropGet(_class3,"renderToScreen",this,1)},set:function(e){_superPropSet(_class3,"renderToScreen",e,this,1,1),this.clearPass.renderToScreen=e}},{key:"overrideMaterial",get:function(){var e=this.overrideMaterialManager;return null!==e?e.material:null},set:function(e){var l=this.overrideMaterialManager;null!==e?null!==l?l.setMaterial(e):this.overrideMaterialManager=new Xy(e):null!==l&&(l.dispose(),this.overrideMaterialManager=null)}},{key:"getOverrideMaterial",value:function(){return this.overrideMaterial}},{key:"setOverrideMaterial",value:function(e){this.overrideMaterial=e}},{key:"clear",get:function(){return this.clearPass.enabled},set:function(e){this.clearPass.enabled=e}},{key:"getSelection",value:function(){return this.selection}},{key:"setSelection",value:function(e){this.selection=e}},{key:"isBackgroundDisabled",value:function(){return this.ignoreBackground}},{key:"setBackgroundDisabled",value:function(e){this.ignoreBackground=e}},{key:"isShadowMapDisabled",value:function(){return this.skipShadowMapUpdate}},{key:"setShadowMapDisabled",value:function(e){this.skipShadowMapUpdate=e}},{key:"getClearPass",value:function(){return this.clearPass}},{key:"render",value:function(e,l,_,S,E){var k=this.scene,T=this.camera,M=this.selection,R=T.layers.mask,I=k.background,O=e.shadowMap.autoUpdate,D=this.renderToScreen?null:l;null!==M&&T.layers.set(M.getLayer()),this.skipShadowMapUpdate&&(e.shadowMap.autoUpdate=!1),(this.ignoreBackground||null!==this.clearPass.overrideClearColor)&&(k.background=null),this.clearPass.enabled&&this.clearPass.render(e,l),e.setRenderTarget(D),null!==this.overrideMaterialManager?this.overrideMaterialManager.render(e,k,T):e.render(k,T),T.layers.mask=R,k.background=I,e.shadowMap.autoUpdate=O}}])}(Oy)),2),v_=0,g_=O("bh",{LOW:0,MEDIUM:1,HIGH:2,ULTRA:3}),m_=function(e){function EdgeDetectionMaterial(){var e,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new mp,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p_;return _classCallCheck3(this,EdgeDetectionMaterial),(e=_callSuper(this,EdgeDetectionMaterial,[{name:"EdgeDetectionMaterial",defines:{THREE_REVISION:Wd.replace(/\D+/g,""),LOCAL_CONTRAST_ADAPTATION_FACTOR:"2.0",EDGE_THRESHOLD:"0.1",DEPTH_THRESHOLD:"0.01",PREDICATION_MODE:"0",PREDICATION_THRESHOLD:"0.01",PREDICATION_SCALE:"2.0",PREDICATION_STRENGTH:"1.0",DEPTH_PACKING:"0"},uniforms:{inputBuffer:new Om(null),depthBuffer:new Om(null),predicationBuffer:new Om(null),texelSize:new Om(l)},blending:0,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:"varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;\n#if EDGE_DETECTION_MODE != 0\nvarying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;\n#endif\n#if EDGE_DETECTION_MODE == 1\n#include <common>\n#endif\n#if EDGE_DETECTION_MODE == 0 || PREDICATION_MODE == 1\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nuniform highp sampler2D depthBuffer;\n#else\nuniform mediump sampler2D depthBuffer;\n#endif\nfloat readDepth(const in vec2 uv){\n#if DEPTH_PACKING == 3201\nreturn unpackRGBAToDepth(texture2D(depthBuffer,uv));\n#else\nreturn texture2D(depthBuffer,uv).r;\n#endif\n}vec3 gatherNeighbors(){float p=readDepth(vUv);float pLeft=readDepth(vUv0);float pTop=readDepth(vUv1);return vec3(p,pLeft,pTop);}\n#elif PREDICATION_MODE == 2\nuniform sampler2D predicationBuffer;vec3 gatherNeighbors(){float p=texture2D(predicationBuffer,vUv).r;float pLeft=texture2D(predicationBuffer,vUv0).r;float pTop=texture2D(predicationBuffer,vUv1).r;return vec3(p,pLeft,pTop);}\n#endif\n#if PREDICATION_MODE != 0\nvec2 calculatePredicatedThreshold(){vec3 neighbours=gatherNeighbors();vec2 delta=abs(neighbours.xx-neighbours.yz);vec2 edges=step(PREDICATION_THRESHOLD,delta);return PREDICATION_SCALE*EDGE_THRESHOLD*(1.0-PREDICATION_STRENGTH*edges);}\n#endif\n#if EDGE_DETECTION_MODE != 0\nuniform sampler2D inputBuffer;\n#endif\nvoid main(){\n#if EDGE_DETECTION_MODE == 0\nconst vec2 threshold=vec2(DEPTH_THRESHOLD);\n#elif PREDICATION_MODE != 0\nvec2 threshold=calculatePredicatedThreshold();\n#else\nconst vec2 threshold=vec2(EDGE_THRESHOLD);\n#endif\n#if EDGE_DETECTION_MODE == 0\nvec3 neighbors=gatherNeighbors();vec2 delta=abs(neighbors.xx-vec2(neighbors.y,neighbors.z));vec2 edges=step(threshold,delta);if(dot(edges,vec2(1.0))==0.0){discard;}gl_FragColor=vec4(edges,0.0,1.0);\n#elif EDGE_DETECTION_MODE == 1\nfloat l=luminance(texture2D(inputBuffer,vUv).rgb);float lLeft=luminance(texture2D(inputBuffer,vUv0).rgb);float lTop=luminance(texture2D(inputBuffer,vUv1).rgb);vec4 delta;delta.xy=abs(l-vec2(lLeft,lTop));vec2 edges=step(threshold,delta.xy);if(dot(edges,vec2(1.0))==0.0){discard;}float lRight=luminance(texture2D(inputBuffer,vUv2).rgb);float lBottom=luminance(texture2D(inputBuffer,vUv3).rgb);delta.zw=abs(l-vec2(lRight,lBottom));vec2 maxDelta=max(delta.xy,delta.zw);float lLeftLeft=luminance(texture2D(inputBuffer,vUv4).rgb);float lTopTop=luminance(texture2D(inputBuffer,vUv5).rgb);delta.zw=abs(vec2(lLeft,lTop)-vec2(lLeftLeft,lTopTop));maxDelta=max(maxDelta.xy,delta.zw);float finalDelta=max(maxDelta.x,maxDelta.y);edges.xy*=step(finalDelta,LOCAL_CONTRAST_ADAPTATION_FACTOR*delta.xy);gl_FragColor=vec4(edges,0.0,1.0);\n#elif EDGE_DETECTION_MODE == 2\nvec4 delta;vec3 c=texture2D(inputBuffer,vUv).rgb;vec3 cLeft=texture2D(inputBuffer,vUv0).rgb;vec3 t=abs(c-cLeft);delta.x=max(max(t.r,t.g),t.b);vec3 cTop=texture2D(inputBuffer,vUv1).rgb;t=abs(c-cTop);delta.y=max(max(t.r,t.g),t.b);vec2 edges=step(threshold,delta.xy);if(dot(edges,vec2(1.0))==0.0){discard;}vec3 cRight=texture2D(inputBuffer,vUv2).rgb;t=abs(c-cRight);delta.z=max(max(t.r,t.g),t.b);vec3 cBottom=texture2D(inputBuffer,vUv3).rgb;t=abs(c-cBottom);delta.w=max(max(t.r,t.g),t.b);vec2 maxDelta=max(delta.xy,delta.zw);vec3 cLeftLeft=texture2D(inputBuffer,vUv4).rgb;t=abs(c-cLeftLeft);delta.z=max(max(t.r,t.g),t.b);vec3 cTopTop=texture2D(inputBuffer,vUv5).rgb;t=abs(c-cTopTop);delta.w=max(max(t.r,t.g),t.b);maxDelta=max(maxDelta.xy,delta.zw);float finalDelta=max(maxDelta.x,maxDelta.y);edges*=step(finalDelta,LOCAL_CONTRAST_ADAPTATION_FACTOR*delta.xy);gl_FragColor=vec4(edges,0.0,1.0);\n#endif\n}",vertexShader:"uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;\n#if EDGE_DETECTION_MODE != 0\nvarying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;\n#endif\nvoid main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,0.0);vUv1=vUv+texelSize*vec2(0.0,-1.0);\n#if EDGE_DETECTION_MODE != 0\nvUv2=vUv+texelSize*vec2(1.0,0.0);vUv3=vUv+texelSize*vec2(0.0,1.0);vUv4=vUv+texelSize*vec2(-2.0,0.0);vUv5=vUv+texelSize*vec2(0.0,-2.0);\n#endif\ngl_Position=vec4(position.xy,1.0,1.0);}"}])).edgeDetectionMode=_,e}return _inherits(EdgeDetectionMaterial,e),_createClass3(EdgeDetectionMaterial,[{key:"depthBuffer",set:function(e){this.uniforms.depthBuffer.value=e}},{key:"depthPacking",set:function(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}},{key:"setDepthBuffer",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:rp;this.depthBuffer=e,this.depthPacking=l}},{key:"edgeDetectionMode",get:function(){return Number(this.defines.EDGE_DETECTION_MODE)},set:function(e){this.defines.EDGE_DETECTION_MODE=e.toFixed(0),this.needsUpdate=!0}},{key:"getEdgeDetectionMode",value:function(){return this.edgeDetectionMode}},{key:"setEdgeDetectionMode",value:function(e){this.edgeDetectionMode=e}},{key:"localContrastAdaptationFactor",get:function(){return Number(this.defines.LOCAL_CONTRAST_ADAPTATION_FACTOR)},set:function(e){this.defines.LOCAL_CONTRAST_ADAPTATION_FACTOR=e.toFixed("6"),this.needsUpdate=!0}},{key:"getLocalContrastAdaptationFactor",value:function(){return this.localContrastAdaptationFactor}},{key:"setLocalContrastAdaptationFactor",value:function(e){this.localContrastAdaptationFactor=e}},{key:"edgeDetectionThreshold",get:function(){return Number(this.defines.EDGE_THRESHOLD)},set:function(e){this.defines.EDGE_THRESHOLD=e.toFixed("6"),this.defines.DEPTH_THRESHOLD=(.1*e).toFixed("6"),this.needsUpdate=!0}},{key:"getEdgeDetectionThreshold",value:function(){return this.edgeDetectionThreshold}},{key:"setEdgeDetectionThreshold",value:function(e){this.edgeDetectionThreshold=e}},{key:"predicationMode",get:function(){return Number(this.defines.PREDICATION_MODE)},set:function(e){this.defines.PREDICATION_MODE=e.toFixed(0),this.needsUpdate=!0}},{key:"getPredicationMode",value:function(){return this.predicationMode}},{key:"setPredicationMode",value:function(e){this.predicationMode=e}},{key:"predicationBuffer",set:function(e){this.uniforms.predicationBuffer.value=e}},{key:"setPredicationBuffer",value:function(e){this.uniforms.predicationBuffer.value=e}},{key:"predicationThreshold",get:function(){return Number(this.defines.PREDICATION_THRESHOLD)},set:function(e){this.defines.PREDICATION_THRESHOLD=e.toFixed("6"),this.needsUpdate=!0}},{key:"getPredicationThreshold",value:function(){return this.predicationThreshold}},{key:"setPredicationThreshold",value:function(e){this.predicationThreshold=e}},{key:"predicationScale",get:function(){return Number(this.defines.PREDICATION_SCALE)},set:function(e){this.defines.PREDICATION_SCALE=e.toFixed("6"),this.needsUpdate=!0}},{key:"getPredicationScale",value:function(){return this.predicationScale}},{key:"setPredicationScale",value:function(e){this.predicationScale=e}},{key:"predicationStrength",get:function(){return Number(this.defines.PREDICATION_STRENGTH)},set:function(e){this.defines.PREDICATION_STRENGTH=e.toFixed("6"),this.needsUpdate=!0}},{key:"getPredicationStrength",value:function(){return this.predicationStrength}},{key:"setPredicationStrength",value:function(e){this.predicationStrength=e}},{key:"setSize",value:function(e,l){this.uniforms.texelSize.value.set(1/e,1/l)}}])}(Fg),y_=function(e){function SMAAWeightsMaterial(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new mp,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new mp;return _classCallCheck3(this,SMAAWeightsMaterial),_callSuper(this,SMAAWeightsMaterial,[{name:"SMAAWeightsMaterial",defines:{MAX_SEARCH_STEPS_INT:"16",MAX_SEARCH_STEPS_FLOAT:"16.0",MAX_SEARCH_STEPS_DIAG_INT:"8",MAX_SEARCH_STEPS_DIAG_FLOAT:"8.0",CORNER_ROUNDING:"25",CORNER_ROUNDING_NORM:"0.25",AREATEX_MAX_DISTANCE:"16.0",AREATEX_MAX_DISTANCE_DIAG:"20.0",AREATEX_PIXEL_SIZE:"(1.0 / vec2(160.0, 560.0))",AREATEX_SUBTEX_SIZE:"(1.0 / 7.0)",SEARCHTEX_SIZE:"vec2(66.0, 33.0)",SEARCHTEX_PACKED_SIZE:"vec2(64.0, 16.0)"},uniforms:{inputBuffer:new Om(null),searchTexture:new Om(null),areaTexture:new Om(null),resolution:new Om(l),texelSize:new Om(e)},blending:0,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:"#define sampleLevelZeroOffset(t, coord, offset) texture2D(t, coord + offset * texelSize)\n#if __VERSION__ < 300\n#define round(v) floor(v + 0.5)\n#endif\n#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\nuniform lowp sampler2D areaTexture;uniform lowp sampler2D searchTexture;uniform vec2 texelSize;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixCoord;void movec(const in bvec2 c,inout vec2 variable,const in vec2 value){if(c.x){variable.x=value.x;}if(c.y){variable.y=value.y;}}void movec(const in bvec4 c,inout vec4 variable,const in vec4 value){movec(c.xy,variable.xy,value.xy);movec(c.zw,variable.zw,value.zw);}vec2 decodeDiagBilinearAccess(in vec2 e){e.r=e.r*abs(5.0*e.r-5.0*0.75);return round(e);}vec4 decodeDiagBilinearAccess(in vec4 e){e.rb=e.rb*abs(5.0*e.rb-5.0*0.75);return round(e);}vec2 searchDiag1(const in vec2 texCoord,const in vec2 dir,out vec2 e){vec4 coord=vec4(texCoord,-1.0,1.0);vec3 t=vec3(texelSize,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(coord.z<float(MAX_SEARCH_STEPS_DIAG_INT-1)&&coord.w>0.9)){break;}coord.xyz=t*vec3(dir,1.0)+coord.xyz;e=texture2D(inputBuffer,coord.xy).rg;coord.w=dot(e,vec2(0.5));}return coord.zw;}vec2 searchDiag2(const in vec2 texCoord,const in vec2 dir,out vec2 e){vec4 coord=vec4(texCoord,-1.0,1.0);coord.x+=0.25*texelSize.x;vec3 t=vec3(texelSize,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(coord.z<float(MAX_SEARCH_STEPS_DIAG_INT-1)&&coord.w>0.9)){break;}coord.xyz=t*vec3(dir,1.0)+coord.xyz;e=texture2D(inputBuffer,coord.xy).rg;e=decodeDiagBilinearAccess(e);coord.w=dot(e,vec2(0.5));}return coord.zw;}vec2 areaDiag(const in vec2 dist,const in vec2 e,const in float offset){vec2 texCoord=vec2(AREATEX_MAX_DISTANCE_DIAG,AREATEX_MAX_DISTANCE_DIAG)*e+dist;texCoord=AREATEX_PIXEL_SIZE*texCoord+0.5*AREATEX_PIXEL_SIZE;texCoord.x+=0.5;texCoord.y+=AREATEX_SUBTEX_SIZE*offset;return texture2D(areaTexture,texCoord).rg;}vec2 calculateDiagWeights(const in vec2 texCoord,const in vec2 e,const in vec4 subsampleIndices){vec2 weights=vec2(0.0);vec4 d;vec2 end;if(e.r>0.0){d.xz=searchDiag1(texCoord,vec2(-1.0,1.0),end);d.x+=float(end.y>0.9);}else{d.xz=vec2(0.0);}d.yw=searchDiag1(texCoord,vec2(1.0,-1.0),end);if(d.x+d.y>2.0){vec4 coords=vec4(-d.x+0.25,d.x,d.y,-d.y-0.25)*texelSize.xyxy+texCoord.xyxy;vec4 c;c.xy=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(-1,0)).rg;c.zw=sampleLevelZeroOffset(inputBuffer,coords.zw,vec2(1,0)).rg;c.yxwz=decodeDiagBilinearAccess(c.xyzw);vec2 cc=vec2(2.0)*c.xz+c.yw;movec(bvec2(step(0.9,d.zw)),cc,vec2(0.0));weights+=areaDiag(d.xy,cc,subsampleIndices.z);}d.xz=searchDiag2(texCoord,vec2(-1.0,-1.0),end);if(sampleLevelZeroOffset(inputBuffer,texCoord,vec2(1,0)).r>0.0){d.yw=searchDiag2(texCoord,vec2(1.0),end);d.y+=float(end.y>0.9);}else{d.yw=vec2(0.0);}if(d.x+d.y>2.0){vec4 coords=vec4(-d.x,-d.x,d.y,d.y)*texelSize.xyxy+texCoord.xyxy;vec4 c;c.x=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(-1,0)).g;c.y=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(0,-1)).r;c.zw=sampleLevelZeroOffset(inputBuffer,coords.zw,vec2(1,0)).gr;vec2 cc=vec2(2.0)*c.xz+c.yw;movec(bvec2(step(0.9,d.zw)),cc,vec2(0.0));weights+=areaDiag(d.xy,cc,subsampleIndices.w).gr;}return weights;}float searchLength(const in vec2 e,const in float offset){vec2 scale=SEARCHTEX_SIZE*vec2(0.5,-1.0);vec2 bias=SEARCHTEX_SIZE*vec2(offset,1.0);scale+=vec2(-1.0,1.0);bias+=vec2(0.5,-0.5);scale*=1.0/SEARCHTEX_PACKED_SIZE;bias*=1.0/SEARCHTEX_PACKED_SIZE;return texture2D(searchTexture,scale*e+bias).r;}float searchXLeft(in vec2 texCoord,const in float end){vec2 e=vec2(0.0,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.x>end&&e.g>0.8281&&e.r==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(-2.0,0.0)*texelSize+texCoord;}float offset=-(255.0/127.0)*searchLength(e,0.0)+3.25;return texelSize.x*offset+texCoord.x;}float searchXRight(vec2 texCoord,const in float end){vec2 e=vec2(0.0,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.x<end&&e.g>0.8281&&e.r==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(2.0,0.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e,0.5)+3.25;return-texelSize.x*offset+texCoord.x;}float searchYUp(vec2 texCoord,const in float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.y>end&&e.r>0.8281&&e.g==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=-vec2(0.0,2.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e.gr,0.0)+3.25;return texelSize.y*offset+texCoord.y;}float searchYDown(vec2 texCoord,const in float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;i++){if(!(texCoord.y<end&&e.r>0.8281&&e.g==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(0.0,2.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e.gr,0.5)+3.25;return-texelSize.y*offset+texCoord.y;}vec2 area(const in vec2 dist,const in float e1,const in float e2,const in float offset){vec2 texCoord=vec2(AREATEX_MAX_DISTANCE)*round(4.0*vec2(e1,e2))+dist;texCoord=AREATEX_PIXEL_SIZE*texCoord+0.5*AREATEX_PIXEL_SIZE;texCoord.y=AREATEX_SUBTEX_SIZE*offset+texCoord.y;return texture2D(areaTexture,texCoord).rg;}void detectHorizontalCornerPattern(inout vec2 weights,const in vec4 texCoord,const in vec2 d){\n#if !defined(DISABLE_CORNER_DETECTION)\nvec2 leftRight=step(d.xy,d.yx);vec2 rounding=(1.0-CORNER_ROUNDING_NORM)*leftRight;rounding/=leftRight.x+leftRight.y;vec2 factor=vec2(1.0);factor.x-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(0,1)).r;factor.x-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,1)).r;factor.y-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(0,-2)).r;factor.y-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,-2)).r;weights*=clamp(factor,0.0,1.0);\n#endif\n}void detectVerticalCornerPattern(inout vec2 weights,const in vec4 texCoord,const in vec2 d){\n#if !defined(DISABLE_CORNER_DETECTION)\nvec2 leftRight=step(d.xy,d.yx);vec2 rounding=(1.0-CORNER_ROUNDING_NORM)*leftRight;rounding/=leftRight.x+leftRight.y;vec2 factor=vec2(1.0);factor.x-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(1,0)).g;factor.x-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,1)).g;factor.y-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(-2,0)).g;factor.y-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(-2,1)).g;weights*=clamp(factor,0.0,1.0);\n#endif\n}void main(){vec4 weights=vec4(0.0);vec4 subsampleIndices=vec4(0.0);vec2 e=texture2D(inputBuffer,vUv).rg;if(e.g>0.0){\n#if !defined(DISABLE_DIAG_DETECTION)\nweights.rg=calculateDiagWeights(vUv,e,subsampleIndices);if(weights.r==-weights.g){\n#endif\nvec2 d;vec3 coords;coords.x=searchXLeft(vOffset[0].xy,vOffset[2].x);coords.y=vOffset[1].y;d.x=coords.x;float e1=texture2D(inputBuffer,coords.xy).r;coords.z=searchXRight(vOffset[0].zw,vOffset[2].y);d.y=coords.z;d=round(resolution.xx*d+-vPixCoord.xx);vec2 sqrtD=sqrt(abs(d));float e2=sampleLevelZeroOffset(inputBuffer,coords.zy,vec2(1,0)).r;weights.rg=area(sqrtD,e1,e2,subsampleIndices.y);coords.y=vUv.y;detectHorizontalCornerPattern(weights.rg,coords.xyzy,d);\n#if !defined(DISABLE_DIAG_DETECTION)\n}else{e.r=0.0;}\n#endif\n}if(e.r>0.0){vec2 d;vec3 coords;coords.y=searchYUp(vOffset[1].xy,vOffset[2].z);coords.x=vOffset[0].x;d.x=coords.y;float e1=texture2D(inputBuffer,coords.xy).g;coords.z=searchYDown(vOffset[1].zw,vOffset[2].w);d.y=coords.z;d=round(resolution.yy*d-vPixCoord.yy);vec2 sqrtD=sqrt(abs(d));float e2=sampleLevelZeroOffset(inputBuffer,coords.xz,vec2(0,1)).g;weights.ba=area(sqrtD,e1,e2,subsampleIndices.x);coords.x=vUv.x;detectVerticalCornerPattern(weights.ba,coords.xyxz,d);}gl_FragColor=weights;}",vertexShader:"uniform vec2 texelSize;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixCoord;void main(){vUv=position.xy*0.5+0.5;vPixCoord=vUv*resolution;vOffset[0]=vUv.xyxy+texelSize.xyxy*vec4(-0.25,-0.125,1.25,-0.125);vOffset[1]=vUv.xyxy+texelSize.xyxy*vec4(-0.125,-0.25,-0.125,1.25);vOffset[2]=vec4(vOffset[0].xz,vOffset[1].yw)+vec4(-2.0,2.0,-2.0,2.0)*texelSize.xxyy*MAX_SEARCH_STEPS_FLOAT;gl_Position=vec4(position.xy,1.0,1.0);}"}])}return _inherits(SMAAWeightsMaterial,e),_createClass3(SMAAWeightsMaterial,[{key:"inputBuffer",set:function(e){this.uniforms.inputBuffer.value=e}},{key:"setInputBuffer",value:function(e){this.uniforms.inputBuffer.value=e}},{key:"searchTexture",get:function(){return this.uniforms.searchTexture.value},set:function(e){this.uniforms.searchTexture.value=e}},{key:"areaTexture",get:function(){return this.uniforms.areaTexture.value},set:function(e){this.uniforms.areaTexture.value=e}},{key:"setLookupTextures",value:function(e,l){this.searchTexture=e,this.areaTexture=l}},{key:"orthogonalSearchSteps",get:function(){return Number(this.defines.MAX_SEARCH_STEPS_INT)},set:function(e){var l=Math.min(Math.max(e,0),112);this.defines.MAX_SEARCH_STEPS_INT=l.toFixed("0"),this.defines.MAX_SEARCH_STEPS_FLOAT=l.toFixed("1"),this.needsUpdate=!0}},{key:"setOrthogonalSearchSteps",value:function(e){this.orthogonalSearchSteps=e}},{key:"diagonalSearchSteps",get:function(){return Number(this.defines.MAX_SEARCH_STEPS_DIAG_INT)},set:function(e){var l=Math.min(Math.max(e,0),20);this.defines.MAX_SEARCH_STEPS_DIAG_INT=l.toFixed("0"),this.defines.MAX_SEARCH_STEPS_DIAG_FLOAT=l.toFixed("1"),this.needsUpdate=!0}},{key:"setDiagonalSearchSteps",value:function(e){this.diagonalSearchSteps=e}},{key:"diagonalDetection",get:function(){return void 0===this.defines.DISABLE_DIAG_DETECTION},set:function(e){e?delete this.defines.DISABLE_DIAG_DETECTION:this.defines.DISABLE_DIAG_DETECTION="1",this.needsUpdate=!0}},{key:"isDiagonalDetectionEnabled",value:function(){return this.diagonalDetection}},{key:"setDiagonalDetectionEnabled",value:function(e){this.diagonalDetection=e}},{key:"cornerRounding",get:function(){return Number(this.defines.CORNER_ROUNDING)},set:function(e){var l=Math.min(Math.max(e,0),100);this.defines.CORNER_ROUNDING=l.toFixed("4"),this.defines.CORNER_ROUNDING_NORM=(l/100).toFixed("4"),this.needsUpdate=!0}},{key:"setCornerRounding",value:function(e){this.cornerRounding=e}},{key:"cornerDetection",get:function(){return void 0===this.defines.DISABLE_CORNER_DETECTION},set:function(e){e?delete this.defines.DISABLE_CORNER_DETECTION:this.defines.DISABLE_CORNER_DETECTION="1",this.needsUpdate=!0}},{key:"isCornerRoundingEnabled",value:function(){return this.cornerDetection}},{key:"setCornerRoundingEnabled",value:function(e){this.cornerDetection=e}},{key:"setSize",value:function(e,l){var _=this.uniforms;_.texelSize.value.set(1/e,1/l),_.resolution.value.set(e,l)}}])}(Fg),__="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAQCAYAAACm53kpAAAAeElEQVRYR+2XSwqAMAxEJ168ePEqwRSKhIIiuHjJqiU0gWE+1CQdApcVAMUAuARaMGCX1MIL/Ow13++9lW2s3mW9MWvsnWc/2fvGygwPAN4E8QzAA4CXAB6AHjG4JTHYI1ey3pcx6FHnEfhLDOIBKAmUBK6/ANUDTlROXAHd9EC1AAAAAElFTkSuQmCC",b_="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAAIwCAYAAAABNmBHAAAgAElEQVR4Xuy9CbhlV1ktOvbpq09DkiIkUBI6kxASIH0DlAQiIK1wRfSJTx+i4JX7vKIigs8HXpXvqVcvrcC9agQ7IDTSSWgqCQQliDRBJKkkhDSkqVPNqVOnP+8b//rH3P+eZ+199tlznVTlvVrft7+1T7OaueZY42/m37QALKNk2wHg1pITlB17mC+Pp11W3X/LHyT32vhg48/5SOv+PnwpsHA70JoGlueB1iKApeqzvOzn44GatTB76Xzhd7suBR7+WWADgDEAwwCG/L54b/poDLrHuvvm70Z2Avhsc+PVcxscBU8F8C8ADg5+ipIjD/PlGwfgju8B924E5seARUfLsiNmqQW0IjL8+7L2NYD/7COBzfcCm+aB8SVgdAkYIRCXKyDax4EdAanL5PuNPllNvXDlAHwFgP8AcC2AhRIoDXbsYb48dl5WkVFTE3LGDcC9m4CZCWBuFFgeAZaGAYJQQCRqDHT+McJrVb8zwATUXH02MHYfMHEIGFsAxgjApQqACYQORjtd/B7Axt/z79sC0+cMPgjjlwPwVwHcA+DfAHzTxcVgWBroqMN8+cYBeM71wH0TwKExYHYUWCIAHYRLTlkCYgcIBcAgU/n3qy8GRu4HRgnAOWBkERhddPAJhGJDBxkvw7cqimr+zFM/ZLnZF64cgL8BYD+AWwB8x/dlWuWagHiYL984AJ/0RWBy1AE4AizyM1yxYAcTigW55xMbAkxEiwEdkJ/ZCQxPAiOHgBECcKEC4TBZcKkSv+mTieNcNPNC26mLNsj45QD8LQDTAO4GcJt/7iw2bfoG4WG+vAGwm9ExiEg69zpg/wgwPQLMjgALzn4E4aIzoJjQ9g4024uygkj+pyuAoX0VAIfngOH5NgCHMhAm8Sv2y3XDZeBhNIp8OzJE8OsBzAKYBHAXgDt8/4O+MVT0j4f58o0D8Pxrgf3DwMwIMEPQEYRkNwfgsuuDZLskip0No0gWMD/9HGDoADAkAC4Aw/wsAgZAgs2Z0ABI0GU6IVmKv+f28KDnHxkA/G0A8y6G73N9kOCjXnh/Ebb6OvgwX75xAF5wLTA1VIHPADgMLDj4yIA5AAm6aCUnv4oz46eeDwxNAUMzwJAz4BABSNDFTwSfg7DDKHE23MG5PqIY8A1u/dINs9dBdy8AgnGPM2NfUBrsnw7z5RsH4IXXAAcJviFgluAbygBINnSLWOAjGxJ4pgOKDV0v/OSLKp8iGXBovhLBBOCQM2ACoTOhnYrAdItYbCij5JFzRyIAqRccAnDAQUjg6UNQ7hsMXP0cRQAexss3DsCLCECCLwCQzMcPwUi2MwAScAKbfnY/YRLFQ8DHX+IAJAMSfDkAF13kLvleIjhjQQHxUVS3jjgGpKeeNzYVQEjgUS8k+PghONdhIwAP4+XXBYCHKIJbwJyDTgaIAdCBJx3Q2M8tYAHP9m4df/ylQOsQ0JqtRLCx30K1wtLBggScQOgsKBGcWHAJeOwRC0BSM1mQIKRbhh+Bj98JQP6t4U0APEyXXxcAEnxkQAFwoVUxID9kvQg+c1C7vidRbIDkc24B//hTQGumDcCWA5DgMxASdNIFBUI5pCML8v8API5zfEQx4BudgqiczviSnJhQwCP4BMCGl+wO8+U7AJi/W4O4YS6+pmK/2ciADsAOBhTIIiAJnPB7AvNjP+0AnANaYkAHX2JBAc+tYaJXOqBZv24Vc386XW5dtkHGW+4HFAJonpOe+YYQZAShgKjv3PNvPQaxVoI8zJdfFwASfPzMUwS3Kt1v0UFIlos6oDFdAGFcliMAP/ryAEAGNwQRnDOgLbdlIEwrIs6AZ/QgkMMHQF6ZAKQcJAsSYPwIeAIk9wJgoPK1gi7+PwF4GC/fOAAvIQPSs0URTPBJ/Pp3GSEGRHfBCIQ0xowBtUbcAj7ys5X4Jfu1HIAGQrIgQRXEsAFQIORDFhiDY/rMHmrU4QUgR08AkgUjCAW6CD6CkwBsAIQC4GG6fPMA3OXiNzCg2I9gNCMksmAAoemDzoimFwL48M85AKkiuQVMAAp8CYRRDAt8GQiJ67N6GJODAXAHlsGguscA2AJg1IPGYmxOpBxFWkRN9LsATgIwXnNs/v/5z/9XCf8BO3YAtxbc/46/KDt+5+ea1Yku2VUxHz/z0v24FwMGK1gWsK2OUUxHHdCBeRUB6OxHABr4ZICIBd0QWSF+XRdMTAjgCdTrG9cBNwE4F8CpDkICyYLGsuhFt6zs+gISwUen8zEAjgMw4cfx2H6O/90yAFo84Cbg4ID3/9TfLTt+5+ebnRABkODjx0SwPi5ec/FrYpmqSAxM8Dn60CsqAFI6GfhqAMiDE/gokmvEr0C4PgDkBQm40wE8zMFEUDKEVoxIMLl/KS73mE7H9d+vcKHQQcjwW0Yu9nP8m8sAmOIBuWY6wP2/4s0ezjjg8TuvaR6ABJ70vxUApGrm7EbGE+i472BAB+WHfqHS/eoAaEwY2E9+wLSXTqhI7CXgnB6LCoOJ4BiST+hTnG0HcCwAglCx3ARoZEVFXnBPp/O/A/hXACc7CPs9/i1lAOyIB+RDX+P9/+pbQjjjAMfv/PL6AFDs1wFAgs/9fgKfgdE/ZEpuiQlbwAde6QAMBgiRmsSwA9BY0JfjovGRDBMH4TlcXGhcBOc6HkF0gjPhZgchxTLZMAci/04W/B6Ab3t09EPXcPyflgFwRTwgJ2MN9/8bf5qFM67x+B/aW4XQz42FeL0YrRyikztUFw0704mf9kXgxhOAqc3AAsPyRxxQCs/PdXOFY0W1KHy3QIUGtx+6vdnx1vsB+dsTncm2AogglFgVEAlUWrOMB2RyEmMCGQ/Y7/HvKns6tfGAnJQ+r/9b76oJZ1zD8WdyQjYBh8aBhVEHjELouQ8ukQ7VRSCJAALwkr+sALhnGzDD3JAJYJHg9uhoi4bx8ytkWUtvHT/7+Zc4dw1uZ3612fH2dkQf7yxIEEockwkJQn4IQoq8unhAhmPRKKFx0uv4K8ueTs94wD7u//VX9ghn7OP4c+4G7h8HpseB+dF2AKlFLwuAIZ8jD6NPrOhAffmfA9/ZBuzZCkyRWSeqBCWyoYGQ5yQrBpDbum/ME1HoPo0XEkSD2zlfbna8q6+EUJcTCxKEtHL5EQjP6BEPyIgYAZBvYt3xHyx7OqvGA65y/7/9wVXCGVc5/sl7qxD66dEqiYgRzAqhN1A4CBNAAlDyAFI+iZ9/N3DLJuC+jcDUBmCWyUnOrmTYCMIOkNclLg0B8/RsNLg9+UvNjnd1APLmmQpFHyEBROuWACQT8nN+H/GAvY7/VNnT6SsesMf13/CpahGnZzhjj+PPmwX2MYdDIfQexWyBAwEUOQDrRDN/98p3A7dvAO6fAA5sqHJDBEAyoUVGkwEd6HR12XU4kwzfl6fCXTZzjy57vvnR513X7Hj7AyDvggAUi9EyFgiZqNxPQF6345nOWbD1HQ/Y5fpvuLa/2+82/vNHgAPDFQDnhoF5j2C2qBWCI8bw1eRw5CL5l94L3DEOTI4DB8Y9OWmsEu/zBJ3rgsaybqBob/7A4C7jtWcooRrczr+u2fH2D0AOQgAUCxKEP7aGgLy64+m6KdjWFA9Yc/03/Osa4glrjr+AupqHz1sEs0cxG0BC9HIePLoit9eNkVf9L+DuUWByDJgaq4ybGYLPAWgiXmLedUE7dwC7saL7CqfPKXi4NYdaykCD410bAHlDEsNiwZ9wAPYbkJcfz6T2gm3N8YDZ9d/wHxUA+739fPwXPrSKYGb+BuP3jAFDElFH9HIWwbzCIGkBr/or4J4RYO8oMOW6ZVcAuvi1Cgoha04BCwT5gfMKHm7NoRde2+x41w5A3hQZkADk5+cGiAeMx3+/7AENFA8Yrv/G71cAXFM4Yzj+otOAaQLQA0gZxaIIZtMDFTigKJV8H9Iq6aZ59ZXAvSPAvpEKgBTtBODcSCWCZeRYtpzrmLyeGNCAyFl1v+Hei8qeb370Rdc2O97BAMi7EgB/2QG41nhAHU9LuWAbOB7Qr//GPRUA13r7Gv9FZwIMoVcEswEwfDoimEP0shKKtIphaZQAXv1+YM+wA3DEdcvRKkGJADQQEsQuhi1Tjt95vBsh5nx2IO59SsHDrTmUOStNjndwAAqEry0IyCMICkOyiuIBNwBvPFQQT7gBuPjc9oRYAIHyOEL4vIFEYVNaOou5vCGE/tV/A0wOVcnpzI47NOri3QFIBpSeaSDUdYLOSWvYImSGgftpJDa4MWJbAGxivGUA5MAOc0Be6eVLj7/4Mk+hzCOYPYpZDBiNkLh+G/M3yFyv/ltgL3W3YQfgcFUhgRY2PwY+Z7/EhAR1SFyXCOb57r28QfQBsJQBMn5D4y0HYLPje9Cd7RIC0PM3EiMofF4gVCBp1P840ix/gyz56r+vAMjk9Gl375iB4+CzveuZdLkkEPJ8ZEfX/6R73vOjzT5Si9hucLxHAVg4PwJgRwh9CKOXK8YA4ZEqKZXSQWh5P+5AftXfA/uGKvYjCKn72cctbFrZNECka5L5CPwIPtMH3TVz17MLB5gdLgA2Nd6jACycHwLQxFEUSR5ASvARDB0h9AQb9bXIgCGk6lUfAPYTgEPAITKgg1BObk58srTJgG58WMkWMaAbQQT1nc8rHGANAJsc71EAFs4PAagQestgC1lsBJ4BMCSOK6dDUcwqqaFiQr/0QeAAAdjy+jBiQQeeMSBZT3nCPUDIa9z+/MIB1gCwyfEeBWDh/BCAeQSzgkjFfGLBBD5nxQ4DxN0wv3hVxX5TBGDwL5obxvVA5YqYL5BeMLd66YYxJpRB0gK+96LCAdYAsMnxHgVg4fwIgMrhUPKQ2C+Bz0PmBTqBMQehAbDlIjj4F80KJguSVZ0FuXpjoCOgXawLjALhbT9eOMAuAGxqvEcBWDg/l1IE05Ed0ygZnyHdz0VwCqEPIfNyx0QQvvLDFQCp+8nfZk5und8tXwIgWcHSNX0N2CJmnAl3v6RwgNnhl17T7HiPArBwfghAS7mV/hey2JS9FvM3BLpUUi1YwDRMXvkRYJoAlAh2l0dcZ04s6JUTDIjyBcrl4yDc/dLCAdYAsMnxHgVg4fxwKVwJgGEJNmWtxpQMpX9on2eRhVA+O56AjMfnP+e3Xvf3NwG4xIPTleiY55bpGh6UbafNU0l0z0p+5Jh5HqYJ6b51nP6XP8cx12XNHQVgIQB/bFPVg2OC7Q+WgVFWng/FvtWLI06uWh5oguKEcXVS/9sEAF//VGD7t4ETDgJbF4CNi8CGZWBs2fPL/H6Vwp2KEtVk4fJ+v/EIYPN9wKa5qu+IncfPwXHVZe/aOL3EbwS7xv8A1rQvnO0j8PArTgTGZ4BxFv9mIxhOCGsv+0OPYDRghcLfkWkEuq0+G00x4OtfDGz+d2DbHmDLjL8si8AYP/7CGIAiEEMTG92zXqSbH+d9R2aA0XnvO+JjthiIrOVDHHPOkBrzUQAWAPsZp3oPDpa/Xag6EVkLBK+5rAnJC3/nYk/APD704WiEAV8OTHwX2LQH2DgFbJgFNrBhjd8r79deGoEwsllgNBOzy8CdjweG9wBj08AIAci2D6HafmyAk4/Z7SJ72hGYRwFYAMDLTwOGp4FRFgD3HhzqRGQiyeurqOdG6r0Rm8IEZjzRlkiqCWoEgK8Axm4BJu4HJhyAbFhDxmbDGnZO4j0SgLGDkpibgEq66TJw/1nA0F5gdLpq+zDqFfd5LMeWqu5HNST0uJOIllg+qgMWgI+HPv0xwLA3gWHpW2sC441gCECbmKziaGrnUdMO4aHeh6MxAP4SMHI7ML4HGD8AjHvHJGNAgpDgY/ck3stipRemvVhc+uASMPUEYGh/9dIRgGx8Y+MNbR/00uVtH0wEx94j/v0oAxaA8Ed+GBieAYZZg5kADC0QWGOFzGJlcGPzl1BxNLXD8sk4xftwNAbA/wwM3wGMUmxOOQBnHXzetIYvibonmSiuYTNjriVg7glAiwBk0fNZH6+PmX9P6kfNmCXGpftJ7TgKwBIAnln14BAAYxMYm5C6RjCyCoOyr0qkD/c+HI0B8DXA8N3AyCQwesD1VQKH7EcASm1Q+y4CkN9pUKiVF5nLvy+fBbTUd8QBaH1HvNBROiZvfsNnrF4kcvPwpdsBLBeU18Nf7AB23Dp4ecHC8oBgUlJJecLS+7+WOpE3gbE+HKw+yoevCYkMGKqPJrdEKARutaFYRs1fiEZ0wP8CDN8LDO8FRqYq3W10pgKgfYLaYCzootgA6KXaTA90y374TKB1sBozy77xHFZ536utRgAmEaw6g5kUSFZwSXnA330qsOlfgHMPDlZesLA8IOjoLypPWHj/11EnCiVwkz7kAExtsGraYUWdSDX5TmsagL8KDBGA7Bd30JsW0oWivnEOQNP7yGTSBR101AlZSUtGyfgZDkCWY1HnJdcBVe6325hTvelg2CQjZNDygG/2An0j1wKnL6y9vGBheUC8prQ8YeH9X39OVQSc7Mc6fCaKvAeHdCIVf4yMYCynTpX+nb97NJmlSQb8r8DQHm9YOFUZTKOzoXGhs6AxF0HIexcLBvWBuiHN8s2ne98R3qc6L4Vyb2oBVjfm9MIFHbjDCh6kPOBbQoG+oW8CO5bWVl6wsDwgfr20PGHh/X/1iaEIuDcCTIW/1Q4rFv8OnYiW3c+W2iKwUjKbyjQNwL1uuR6sAEgDgq1brXOmV81PxhNB6DUDBSYzQJwFtz623XcktX1Q1VWKaTF/zZhVazBVYA1tX5MazsGvobwe/jQr0Ne6BTh5uf/ygoXlAfG60vKEhff/rSe1i4DnTWDUACY1guFTDqLYdCBvf6DJYSMYATBfOx1kLfj1v1axH10nQ3Sd0GUkBnTfpemtBJgseIKQAHLQcVxa2TnuMW0Aqui5es8xBIegVdVVE8VhzHnLh65WMB9An+X18K6aAn2tO4ETl6vqbKuVFywsDwhevqg8YeH93/Rk70JE90nowxZbIJjvS3WYNSGUwGHJTpPxwwcbBuBrgRYBeKACn7VtpdUu/c0NJxO9BIxcKu4TTODzbkonPLoaL0vyUQRb2y8HsL1ckfWzMeuFi40Qezqi+yiPhyt7FOjr6/gCFwgP7Xb5vssTFt7/nQRg6MGRWmDRoeyTlpgw68GRTwgZgo1gGmXAX6/8dtaylSKY/koyID9BhzML3q1gAos2AcOrZYSoq/pJp1VtODRm9Z3LS/7WjVkvXOzEtOpKyGrlAT+4SoG+VY8vBGCvy/dVnrDw/vee65NBJiAjBIVcAJQjOm+DkCZEeiGAMw6sAwDZsJrAdhFM9rPGhd4904Co5oVuCZPV6kD40Ec6+9W8dBTBsfdc3nkpvnB82fp2RPcs79dHgb51LA9ofsDV6vut5/3PnxcAmLVBiDqgevDaJLkYrpuQxzcNwN8AWgIgRbB8loEBzXDwl4cGiDGft58SCOWGedgjvOJ+bPvgRkiuA+ZjzhnQQOiFNVbloa7l/fos0LdO5QENgEXlCfs8Qbf7HyMA3QVjYihYhLENgjX9y/qwxQmRU/asfd0ZcLU2CHVGyusJQLKfVi98CS12T5f7iECkHpsMkAhCF8+nshWH2I/jXsOYO144GV/9ApAIrS3vt4YCfetQHtAA2G+/4PW4/2PPbzMgmUMi2NoeSCRxIt2/FvuxWURIWCXg357gfTjEDNIHnTRXRCpH5ugKwGl3HpMBXQc0v6WLYVm/5limj04rG762K2uYY9jBkr9+rI03NL5ZbczS/dJ+LQyoga4o77fGAn0NlwdMAOy3vl/T938KAcj121z8Bn+Y9eWQJRz8Y6kNagDh2ey5EvxjxQD8TWdAuneCCO4An1vw5vdzQMmdktwq7pLZQR+dM34+ZumAxvY1Y04uqOAJ6FsExzeto7zfAAX6GiwPaLWR1lrfr8n7f/Rl3QGzmsis+/uO71V9OFgP2gpPhgr7TGRqRUT6dyvr4aIs/pm/2zVUNbBSv6G8e5pEv0Cvec7Po7+bTtjlBRlkvAMBkDeQyvsNWKCvofKACYBrre/X1P0/oWEAnnFD1YdjhtXxR73mX10FfCHHE9pVWcGAI/S0gKsfA2y+twrFZw6Hxf/F0Pk8Ri/kpGSnMuDx5T0iACgQHioo0NdAecBUHW6QdsV2/cL7v/Cyqr5gnc42CCOcfX1VIZ/V8We9IDmTzVXwPDJiXuKXPxtDBma8+lzP4WAgKkPxCUAPE4v5GzEuMX0PYJPLhB6FJsc7MAMmkVxaYC/K9gG+F1++8AQ7Gwbgk78I7GFpXgIwFiRXOwaJZPUbiR0yCUDRk+cHf+YpwMj9HgfI8ClGPyvsSiH0WSKRuYlitLb/zHM/JOSs5C/YIC9cMQDZr/dwxgOW9gtGYUBi0wA8l304vDQvAchilFbpIBQhZ7Ejq6ZQ0/Yhil8y4j89Axie9DAsD6FX9HOK3QtROTFkviN83kG4felIY8DCeLrSeMDSfsEovAECUFsTjHD+tcB+tkFgcXKvBRir7qtFl9owmO4Xy/1G3bAFfPrZHorFNWBFwHjQAFctIghj2kBarw06If/+MM9ZqTN6DgsDojCerjQesLRfMApvoGkAWh8Ob/tgAPSKWCp8ngNQtadjmTdltvNvn3peFYhgQQgh+iUmEaUAUoXM1yRLmWuFLaE9Z+XIAWBhPF1pPGBpv2AU3kDTALzwmqo6qtVh9kJErAudABia38TC5wJgS2xIhAwBn3yhByL4EhzXfRXxYsDTJ4IvrNN2JFMxZcBzVo4cABbG05XGA5b2C0bhDTQNQLZBYH1AVsQSAAU+imI1obHyblnjG/kJk3U8BHz8xVUQAhnQIl5CyNgKAGp5LKSSCoAySh5Jj79vTagcxUaIBeRNe79g9gq+DXig4wGzy+PONfT7RWFA4noAkGXZVAhcBckJQgNgrLiaNb3paIDo1vHHX+oA9LQBi4DxJcOUPJUnTgU2NJUyROs8irGARxQAC+PpCtsFd40H/AEf0gMQkLgeACT41PiGoLOKqyrJq3K/Ya9mNyr5FusN/uPLPIeDa8Bc+w3rtyl4VFHaMZc3i9RWBM9jjzgAFsbTFbYLRmm/YBTeQNMAtD4cBKDXBTQGdAB2MGBo8SCLmEuS1AFVAJ3A/NhPt0PoCcA8bSDG76XI7aySg6JYuGfKwJHFgH0E5B3ueMCe/Y4L+xVHAOZ+9EHcEgQgwbeiEYx6jwTdz4qfu7EhEJqxGqruf/RnHIAEnxgwBM0aC8aUAYWNBRCmoIll4HTqO122QcZbrgMWxtMVtgvuOx6wa7/jwhtoGoDWh4MBJ16WN4lfr8AqI0TVV1O1fa9BbQzovkAy4Ed+NgCQUSxZCFWvCOaOFREXyUwZOPIA2GdA3uGOB6wPaOz+QPv5S+MA3OXiN9aclghW+d3IgupBF2pPqxcxGenDPxfSRh2ASiKKiVP2PaZScvAKoA0VDc6cOlIB2GdA3uGOB1zR77iwX/F6AFB9ONSOQW0frA50sILVcckWJyIDSgwPAVcJgFbYuZ3FJvAlEHbJ3IsgJLGedeBIA+AAAXmHOx6wo99xYb/i9QKg2iAIfDJEJHqj4SExbEty0gkdhB/6P9oZbBZIGiKYVb9GKaN50lRHBLOvhDxh/5EKwDUG5B3ueMB2QGM/grb7/6wHAPNGMAY+GSGUjC52VX2f2CD4+HO0gqkZfegXKgBaHkcWtS0AWii9xG1ImrLlN5XR8L8fmQD05BVrmEENmpYSP9QX+KHiqj2/82+HqqDWwnbBRfGATdzAegGwru2DpRq7Mzq2fpAf0Nq0Rl2wBXzglZ4yUAPAmDSVWDBPHQjLcgTqOZ6zUvdKHh4ruDCerox/Dnu7YqwXAC1NI/QcEQuK6WK/kdgCTGC0PYAP/KIDMBgglq+hIkrOfsaCviLSofcJgJ5AdM7kkSaCj/HqQKVIGvD4swF8bcBjmzjsaQ2H5D/6acBd9wALB4DFWWB5AVherMp4GKIYEOp7+26UF0aSfT/xYuDG7wDjrIpAERytXf2vajj7ueryQXSFl10K/ON3gIWDwCLvjfGB8Z54O+Ee4ve6513uB2R1yzsqC+twbC8HcNVhfAeaBuDP/TvwtS3A/ePAIfYFVlPq2HHTuyulZCTlhbjhETF5yxTQGgPGhoHhIWC4VSXGD3n0tLkMHXHxu+YyB+MlPwDuZs5K6FlsbCzdVO9DuKfkHM8AEkP7B8fOkwDcD+B7np42+JkGOvKdAL4E4K8P0zvQdET0b14D3DgB3D0B7B8HZka9WzrD88N6sFm+YcUjrn7E1ZDvMtF9DBgeAYaHgSGB0PNHCD4BLwLRsByAyX/ij0/dDUxuqlIG5hix7eFhvLcOVUAtyPSydAFmOQNe6EYGV/9ZESiKgIEgtbaD/gHALQC4ovY5r5KwtjOU/XfTAHzzLuCmIeDuMWDvKHBwpMoN0WQzNtAaYSs0K4ZlOSAjGG9kPjCBRwZ0ABKEBJexYAZEAU3A7Oi1BeDym4EDnjQ1TwCGWMW8MXcKks0YOyZNlQOQjcgYIUHllEzYQ0ktm+r6oz8G4F4AXwXwRd8/kO9A0wB8y65KmPxgGJgcqYJTKYpTv2CCzyddQJRDOjKivn+Deh8BF8BnwBtaCUA+YYEyAU8h+c6Az9gNHHRmrgOgmDA3jHQ+iWupCeUAvNSrA9HNwqx+muk9nJVNg/CTfrmbAPwbgK8D+PcHkIibjob5o13A3XypWsAkG1cPA9PDFQDZM1id0i1KxsWfOrKnAFXlifCFFMMRcASigOcs2MGAIfE9iWXplS6On7UbmPaUUTXQrgsVMzcRj5Folg2V5ayUA5BWYKwOxKUafnosWjcJwk+7W5F2EKvlE3xcXaNYfiCYsGkA/smuqug6hcleAnAImPbO6YwRpMgjCAVAm/yQmKTv5hNsAf/i7SyNBSl2a8Qv/4/M1yF+BZSYlNQCnnVrpbC+mToAACAASURBVJcaI7sOSEY2NpaDXLqpR+vE/OVksDgImgGgghHoYJbTWc7oJtFWc65/cg2AYvh2ALsB3AzgVv95nS/f4QdsIkT9T3cBrGtITWZfC5hqtQHInsEGQn3UDDvEDEY/ICf7SxMOrAg8T+c00JGkvHGd2DABUYZIAONzCUDppCFhSukCBsLQrFtZe/IixYQpSyEoJoqnuPWrVRAubQh83HNlZB23z7j1ywmj6CIIqUPxw2Xeu9bx2jx10wz4Z7sqTYZaDD8EIDuoE3hMVEphWg66JIp90k0sBxBcy+iPIIaT1RtEsHS/yIAqw+VSNPWQfe5tlVEk8auXgVa5BUsEJuT5uoliAbE5AGotmIAjCPnR9xDG3TQernYAUupTdBGEFMf83OkApHG+XlvTAPwfuyrgSZOhas3u6cwTsUBVn2gTwyFMi8wjHZAA1M9fYGHDULJD1m8Cpa8fRxDad+l+Ykf/3XNvd11U+qiL39SxXevSsshdDFvgbI1O2AwAtRZMZzTBRuDFjxe1Xg8QEIB8yyj5yYIUxfQIkfkIRnmHCM712JoG4FsdgHHp3ACoMH2G6jM4lWzoQarSvwQ6MSB/vporVaFkh+mCLlpVR8Z+dqDZLoDOpHSiQeAFDkBjPrlgCHgCUaFifg67H/9uYjn4Ai1vpTERTAASBaoQJBAKeNqHlL6mwPDZYAOROag/EYRkPX34MwHIvzW9rQcA+TLpI22G7EcQKlJGsYIJhC6ClUMiXfBTbFUQAej6nPS/OuAl9pOOqIc2BLzg++3VmWgIEUz82cRuCAtLIHQQm0gO52uOAb22sC3JEWgRfPpZf2sQBQIgLydPEIFGwPEj8MlF2bSbsulghLftqsCXq9HGgHysznrGgi5qzTUTFH8FLhAUn3hIJwCN0HLncw37qaF2zoYvuKNivmQIuUNc7GvWt6sHNs26twA6vhyq8NEMAHlyntFrDCcQehyaPTl+FwAbXDcmAKMRThakEk8Q8kPg8SPL0qzLBl+A9QCgR6uZGs3vfHz8TtBZvkgGQrEPBVAUg2Sij50QAOjiVKI3saADJRm7dSLYWfSFDkCem/dhZeMy9pPY5QvSDYQyUJoDIK8qMezh3wY6fSL49PcGgCAA8pScJLIgAUYQEmz8RPA17StvGoBv39W24eREiBoNQSgWNI1HBkdgxJSw1AI+dFIbgOYmkjimQ1r6XXC3rAbCHycAgytohf8vsB/r2KRaRq7zpZ+D37HMX0s3DDcCUGLYaw53MJ4YUODzusqlGCQAOQCejuxA8UULUkxIwAmMAp8Wa3qkN/R9W+sBwOhIEPjk5SLr8HeKFbTQfb77csPIMHGl/4MPbReslPhNe4+MiTpi9AFGV4nI7MfvagNQLh/pfrYnDAS8aJQ42A2w4em2cAyWQUuJVQTGWLs1uL7DG9J1RjhA+jvYk4t3KXeMqijpzrud4At9z3XtP16yGfjKZmCGooYh1tZzvv8xXPFl4PoJYC97k9FlwZWD+Azi/deMZWeP13eQCGEyoERudChIjbb3mJYwH7V0QIKuCwj/gfMj0asn2I0FXRSHXfL/iRkNgLyeVj8ccMY//J1fyxzTAXT2+xoQViKYD/1hDqLxPiYxTgSvQrphphG97tz4Slqafnj7uk1kIQDZrvWTw8B3jwEW+RLxPgSiCERdPwPR7+wCPg/gulFgfruDkOMQkFc5x84e708JAMmCuRNBXi4TIg5CGRzGiBGE/D4E/C2r2vcAYJoify62i0aJSMhB+2IHoNwu0fkcjQ85pu3ack5nIBREqneYFyWLkAXIJHESe00Cyx5QyeL6F/tyEcDcrOW2n7fX8df0mME+/vQ/PQjhoy3gzo3AISYf80MQaQx1peH9wb7v2mrtmCBkIMMejp3jIJD1MsaxaMZ8v5N/67INAsB3BAYU4JL4DSo1J15AFPAEwuQHZJzkKfUAtOHLJSOQRWndBYQvCQA01cfnNopfsaCJaD2baBn79QjSTiOEP1EcawIpkq2kegBTNgHWEpOKF8Uwq2NRFPM4AqCf46/rA2U9/uVDvurB01zvAJpiiwOl3fEeciCGF+Ij11f+QkbSfMPfIzqw57mEFZ9Dl3Ps5HXWAYByHJAJKV7N+s0cCQQhwSlfm4lGZ0KB8C/rABgZUS6ZHITBSEhCowUYAAksF7cStWREyxRwtuPpOlgw+5s9sq6OaIJIIlUgEhA1edoTgHxa9HVw5jibZNF+j/9yGQA/7pbujZ4bwv2+cWB6tFo0NzYnkxFA+cvEAo43VBoEo2e+48EMXEOmD9F6xhCE8RwZEJ80VblKvDlmzwicfqy93/o+8K8TwB2jVSgW138FrJQTXBNlnJgmrjZwanow9CBP/rL9wF0jwAGWDtFyoN9PHutnIHT05mPXz93dMGQAPniJsjiBXiTbxDZFMF9NLUPQxKR5qezz1Y6/YZDH0D6GkdAkYJIvRalAdHAMmPZoYhb6NhDWvEyf/ma737CXN7R1ZC7hUbPgcFgqt/ZZjADnM1xqEVhYBpb4CUk5UsL7jQvj///5buDrLeCOEeD+YQchYwG9VIfyg1NaZszFiCH6DkRGLze5/dgk8IMWcMCjdCiCzR8od1B8OTwvJM8JEShFut1fzMhi+eRJr6LI7hYP2M/xVLwKNoZjUTwRMAQQmYyhWGQxsSADOflZ4kukj7PhZ75bETjBpkAGahMkcrGgwhsXeCyBHBj1wmOBQwvAwqKzoFeRV8ZaerjKYAuirmPY/o9X7q5Cyr7fAvYMAftCPGAEoYlBiVtFwLjtp2U4irj7yOANbi+crHyrfCbTquJV44O0F1FrwQGIMZFqdQDyP/gGSZ8TC0ZRRsOlVzzgasd/u+zpMByLehAfCgMQCDyGZJHFCCgLZ2f8mgI5qauEcVx9e5vACTgCTwEMWr5TdIpWKJb5MvrnoocDswvAPAG4VLGg6UKeqmi4iuDz4er30oX0FP7u5moMvIf7W8B+jwlUNAzFnlZCIhvGFRCeWzrgXSSIBreXTFZSgVLHAp4UHOFuociEEsn2PJwl/XEk0dzfSojeerFg1IOo5BKAveIBex1P67lgUzgWQaJwLAKRH04i14ItgDKEtGsRnWx49b2Vkk9wUefTGrKCF7R0JxZMqxN8cmPAxWcAcxGABKEAKPA5u9lEaAbCmKMI+sDN1X3z+ro24wEZFc0VEE64ABgT180PF9ZdBcDb6JpqcPtPk+1ACbmKjJnllwyuILunEAWjZHkBsrsRUnfD0qEiC5IJfyisgMhzWhcP2O14Ro4WbASgAMQJ48SJwchmBCDFa8qpyBbSP7OvU4PQ0p2W7+LSnSJUFOrI4V7w5IoBTQQTfJ6oTSYk2mQcpGRyH2syGjIF6EM3V/fM++C1CfwUExhCsmzCaQT43lZC3e1hBpEHh36XEqrB7Scmq5dV0XZxmV8WuDFzAF9iwhow9seAGoBcGtKjqAc+1l9rLb/1igesO55ysmCrC8ei6IxRMAKTWNBi6Xw98xNTFUi0jEcmpYgRAPhddpVi9OIEPP5cYD4CcLkCooHPwaW9kV+iwWrQHT8uA1fd3F7DFvgUHUP2k8jTiogAqLoxFpDgbMj9jXSuN7i9dLIdaxzBp5XVBMIMgFEnFAPKT9qPd6A9BIGI7MfPmf4U+40HzI8nWgq2PBxL4FEkjKJixGRRFyQQPzzd1iAUzCAQas1YOmAEoFjwkecDC/PAwhKw6CxIkCXwOdVJLxTobMjBdyIgfvimNvNJ7Evf4jWtdnRYD1YNGVuG93VWuWs4Jf+mlZCCZxwP/cnJ6mXVKk2+tK8lQQVHRTGc64SDAZB3Ey3JcxyACkToJx4wHl+YwqloGDICmYmTFgMQFBET8yyYzyAG/AfWX8mCGQg0BTRoHwt9KVaPE/HQ890AIfgWK+CRAaMRYnVdxHbhdY8Wslw1V93UDsmPIj9GxgiAioRRMIJNvoti+SW/Ikd0gwAU8+XxJcbGITJPDvI6XdCFREFSknTB83xka40H1PGF9dnycCxFwygkK0bASJQSVAbAYeD98xUAe5U3jKIwBosSgNsuABYogl3/IwgFPrOIg1Xc4ZrpAsSrvruykl2ucykapkMMh4CExD5DwJfWAYAxwk4MKPAJgOIjGSEGwuCakRhemw6Yv0UUwRf7L00L9pnsNx6Qx4feY4O8pDEcixOjsoTKKpMYjSFYYjOC8Eq3Wnnr0YYS+0Tmi2HysrPGLqwASNYzBnT2Mz2QD91laxLB0gs12GAh81cf/o/OcHyJ+qj0S/zxnhUZbSyYWaL8+Rq2S29wowiWkJPan4MvgrDDGAlRe7KIywDIgR3meEDWg9HbJgApNTkXo8o0i7oVgxnEgFr8F7jEdnU5GvqfJQKQKyEOPlsNIQvyvupAGHS/Okv4qv9oh+PHxMLk8ggBCRxvAmEN+AiEzz2iQfQBeNmkh4K52hJBKOaNe/FSLobLRXCz43rQnu2yi9oMSMDxs2jo8303ERz1wsCGZECF4kd3DwEYYwJjhoNlQrgIjlYodbBPrwMAZfEmyzcIv27gs6XDzC/IR1DOgA9a6DRz4wZAsZ+LYXvQYsHoD4ziOFklna6YD3+nnU6dZ7bGDAcBUImIAmEUw/zbJ1i/scGNDJiLXmle3RhQ+l/aq57gUQCWzwwBKPeLsZ/LFrGg/ShRXAe64Ajkv30kALAjF8R11Dy3K7KRwJcsUTaqWScARou3w/INVnCH+A36n8RvM3nB5XP4oD6DATBYwGb5ajlOLOh6X8JaBKRG77+7ygGYp1bn+V25/01AzBnwQ1ypanD7KWfA1QDYC3zJIj7KgOUzc9nFbetX/r+O5biwNhyX5uSEDr5o0xsJwLp8/m4A7GaJUv/j3/5+HQFYJ3oFPPkho/hNeqBcMkcB2BAA6XrxmMBkfFAci/m0JpwzXw0TXvXtzrz+PKc/Ml/ugzM9MDqCAbz/keVjjGcQA/YLvjoguo1mRslRI6RwfsiA5nqhL5D6nscF8gfTdfxpS+/hLzvWfzMQCoB1Fq/8b3VWaPIDZqsRV64DALsZHVHs1gEvsqFAeBSApQC8pHK90Oql4UEAyvCwNeGcBXNLOPMLftgZsI75ouUr9ousp2TEyIJ/sU4AzC1e+WIFshyAHPZREVwItrrD3wGAhibTYBhxVpe/xePyrNBuWaoNp3DgFwC81O+RAepK/a5Lfe51jxr7JwA83nPXYgq1asl0yX5N48+f4VEGLATlK1vAo5YB1gBSRmsM+NFE57lcfPD5pPFWCJImtyvGgGfOAacBYO59zFglgHgPefZsXV6/gPXBYeC0RVgyJNOGYuJjPka9eHWgjL9bWzhWk0/n/wPn+k8bgFNmgYcsVflZnBRmIShtJM/m7JGibGBoOIIez9wKPP4AcNpylfbNlGfdI+9NjBjz8JVzppckZuJ+dBw4aQ44drk6j1LIY9JkPD7P4s2lwVEGLHwJnncscNIh4Nh5YMsSsHm5ndOu1BGFThJ8/K6JrZtoslST2+XHA6ftB05ZAE5crgAups5TfaL6EF+UyIif3gAcOwtsXep82eIYY9JkXpMgMp/AeZQBC2b8OduBYw8C2+aALQvARgJwGZhY7swEzbNa88IRvAVO1qkF91J36DNOBE7eD2yfB45fqphLnevzdGeBKBfL8UX5/CZgyyyweRHYsFwxYHzRNK6oetSBMDLjUQAWTPqPngpsnQK2zgKbCMAlYMMSME4ALrcnR6JYQIwsoUnjpDRstOLy7cBJB4CHUGwuAtuW2nUDVH1EFUhycSwWjGD64mZg0xywcaECoI0z5P3X5P6nWlHdgHgUgAUAfOYOYMtBYNMssHEe2LgITBCADkIzSJZXpCOnIg25uPrhgnupO/TyhwLHHwSOmwW2LVSik2pCrDsQskzNIBGIpBdGI+VfNgMb5oENCxX4yPRjPj4xaJ0+WGeEHRXBDUz2Mx4FbDoIbJypADixUAFwzAFI8KUJChMV2SUaAGc1cE/xFJef3FYRti64nkqWDrqqEhbrsm5zvZCdPCd8nHzJOLZuABRz9hTHZwPL7LnLnoNMIY2VyaKcjtZLHOAbNgNPngKe4BacfGF1pnydD+hphQ/8XV5UiEueLGnDN1tWXj/3/4cTwAUzwGPcRcFJiDpPt3FLmf5vjwE2HAQ2zPrEzDv7OQg5OSM+ScYQy5Xbo8465u/ZfLTJ7fKHAdumKxVh8wKwealSE6inEoSy2MWCdbUHIghv3AqMzwHji9VLZuDzD8cXxxWZs5c7apmW0fMBnIHKn5X7d6I5npvRz94O7LgXuGIReJSb+Xl1tzqflybwRwqf9i97BQRWomWJQ7oZVFtJoqDX/b/oGODsvcBTATB9gsfGqmzdjtVz+G+PAyamgYmZCoDjFE2anCVg1CeJwOMnTRB/DmUINVkkgia3y08BtkwDW+YqAFJFMD1VAAw6XG61R31O9/fdrcDYPDDmY0zjc1UjivBuAMx1QdMB+WAYXU8dhEU16dOSkppbcHFSrng8MHwnsGMPcN5ypURHp2xMIa7zDz2z8Gn/kVe0YomO0wEwBYKujL7v/zHA6C3AxfOVh58g5AsZxx4fZM7sf3h6BcDxWWeGBZ+cMEFiwGEHHRnDzun7ONHs/djkRgBunql0VDOSHIDU3cxSD4aEajhFXS4H4S1bgVGN0V8we7E0Fh9jVDG6Obr1LJMRwn+kOCaTEYT0dsfqZHXl/p7PrLi9wIY7gO0H2yAgCAWCWCowKrYE8nMLn/a7PQn9X7zIJPPkCcK+758y7x7guNsB6l98gZjLLYet3Ay5n0sv4R+fCYxPA2MOwLEAQLIDPyP8uBg2cRYmzFweAYilKkn+OC8/Fdh0CNhEA4nGA40kd6FES13WLO8v1qHKAfh9B+DoYjU2Ak/js/8NAIwg7OUb7LCC+WAfB4CpBJoIiTRNRmS1l13kqWh3Adv2A8cdqqp1MB+aIOSxWv6pq5D2kkIAvt8rF7BLJksN/jMqfa7v+7/Ak4B3A6ceqpasKMq5akAmlLWY37t8ZW97PDB2qALg2BxgAFwANEGcnI5JcrDZRPlkaXL4u1KJUAfAjbTQ59x6dSvdLPXAgGYshZWR6JIRaXB/NwFI8C1WwLMXzMeSwLfcXuKrA2G+wrLCDcN/IIg4ERRn0qvyySAQX6mG1XuA4fuAbTOVwktRRr2MLCoQyvEZ/UY/WwjAj3jtFJZkU79g1ghkgEBf98+0Umb/3A2M3lkBl/fOcdMok2EjkZyv8773LAfgHDDKjwNwxEUw9yailpwdxBAEYhBbAuGzG3aKkQEJwAkCkOCjlb7Y6SYyf2UwlAS+vKYnAXjfNmDEX7DEfA5CjUcsnzvbu1nDtUMmCDkRZEEyGdlAk6G6lQTSa6m0MP6HuY73AxNTlcJLZ6WOJYC5/CNxLpHMgdKIKNl69Qvu6/75AjHOiTU87gKOOViJb748BKCWrnK/maTA+58AjM0Ao7PA6Lx/xBAupoYDC9okBRAmPdBZ47lNA/DhwMRsxX7mPgl+SrmK5EaRNRslXFQ9CKB9DkADn79cZtkHFkysJ103eBbqlh97DpmTQTYgk9VNxu+xYbXKU3lhFoJPOgdFGY+lPkgQxokkgF9Xgj4AvfoFs84eX4Ke9x9fIC+tRfDxvvniif358sSir2LCj5wNjBKAc8CIi2AxxLCzIAGY9L7AhGIKgpATw4l8wToB0JjPrfTkp+SLQbHrOqm5jNyajS6VCMIpApDAWwQ4LrGgXqzIfnq5cv0vN0ZXHTInME5GBNLb1DGdOYQsI7AfGKFjlgqve8wJwG4T+fuFAFytXzCLb+VgWnH/fIGYfc46Hs7iHC8ZkPcdXx4VfVXJw8+cA4wIgM6AHSLKWZCTESfLfg7WsIyRF3ckiRQ+HACXkwHptyP4KHrpJvKVGnOhRF9eBF9wE0mUEogz2wC+WGI/vVxiQQIxAs9+rmHA6E1YFYB8DJwQMZl0OrLZ++i7sfT8zroYHLS9df4RACWKxSZvLXzG/fQLZqk2gqn2/vUCUQ9UZaM9wDaPeSPrC4A5C1KV+NITKwCS/SiCR/jRBDlLmP7nHynsxno1IPwJSyRpbiMADXzuPDYfZfBTEoAmcuVQdiaW0zwXwQsCYDYmMaDA1wG8TBSvaoR0G77EcGSET6hjOvVApfRPAUN0zjr45JzVcSqiTxD+VeGzXku/4Nr7JwDJOkxFIwt6j6+RqUrlkO4bXzp1gCAAv04AzgLDDsBhKugLFUvQUhTwCEKbnKCw14HwJ9cDgGQ9WegRgDI8XEcVEDvAl7lVlglAgi+I4CR+Zf1mLGgMmDFhBGFfDCicRJFERviSABjLS7FC0MFKMU+07wOPE0kGvaoQgGvtF9z1/iODkwn3VWoEXxres5ib9xx1wZufBAwLgAQexbAD0JiQwJOuJBA68/H3Zhk6+3CifqqwWNMKN8wjKgbk6gWJgC+FMaBb5vJVmsUbV2vCqo3cRWZcCIACoax53+ulkqNd7iqOcU1WcC9cxEm5kQBUdZ+sTnSL/jEtTWngi21jhJNJBivZBukXvOL+yYBkcOqxKjJ4AGgxzMrBVwdAMmHrZOAYF2l6y/mwV6xD17zmWo6MbRyeWtOHwxJ91IIhr6rqZS70DPPLXDVUrfBwzHKr1EUp6/h0T/6L/GcCqslt4IhoTcwdAqDSs7I60WQH6R329pHuFyuXDJmEjuOSbdB+wSvuP5bGUjmsA5XoUvcvBXKKAQnApUdXwah0b8jXR2YzJTsC0ZHB33FL+2yiX3h/1YeD1fFZGT81g/H6yqkVa9YEpqMhTADle8erHA6t7Mh6j4ZBXdBGjFyO4CSIm9wGBiBvgqxwIAJQlXIyEJLyI/i0SkAG/FbhaEr6BXfcv+5dLKhCg4z1C1HEBJ8+BODQGZXfk/quAZC6ketAZEQCTWAU8PIJt0fgwHzZvVWNaKqi7JLOmtDWFy42g1FxH/XfqGkII0C+a0tnDkfsGxQjn3VPsk7tXmuy+Xp0JhtoJosAaFcUAJUYKiYJxcqHqKAH9rPlG2cMrmCUbMX9guMLpGTcCMKDlZGhMK8IPnPIn1X5PA2AwegwEEYmDGBMjOI5whGQP3NPBT7VJlRNaKvF4t2IWHbDErtDlSk1p4lJ7/zd246tglGZryIfrFhQ7pU8WCAX0ZENG+57U14Z4YrCeLrSxXdev6TfLwrbxT7znMrfKQXfHLQCnyvmRIv0Q3430ezMmL98P393G3wqz6am1NYzzoGn+svqRmTAU2citctqAX/2EI8F9ACEmLHXLZGoFxtSl2xyK2bAYwrj6Xr12+1noL/jUTCD9vvFrn6u0v1/nvGkaoVBAQi0eummMAuXQHMWJAA7gCixG8U0gFfcXdlBKk4Z6zELgAJfZEKrxpC1xOIl/+Sk7jkcdYlSco90y9+gK6vJrRiADD0piad7RuFo3udNCgft94vCdrGXn+tujgV3QAcHLcFnroelivHkchEL8ue0uQ74S3eubAITS3IQhKkMRjBMokgWG3L//2z3VSnP4VDgQWxUEEUxAZFHL0eR3HDfm3IRbDHkBfF0zy4EIKNhSvr9goGEBdvTz/MIYQLQdVsTwRTFDj5jQmdArRDYJQNDSs961R3tPhx5NXoVgoxleHnarjohgLec3D2HI492yQNvIwvqO9fJm9zKGbAwnu6FhaP5pFuMg/b7tTbpBdvTz68cz/zI8azVj8iAHTqgmFHXDUB89R2dtaC7tUGw4kDOgFb0R2wYRDGZ8g9O8aU4XwPOczhiwGlMjqqLWiFYGu570wADFsbTvaxg8nkow7E8nM/atfKzln6/1mS4YHv6BQ4+Z0BbqHcd0NwwYbVD3+1yWhXJxPBrbq8AqE/XApSqAxiBV2MZ/54DMOZwKE00rnDUWcR5KiV/brjtSAMALIyn+/mCyeehjIYp6fdrvVELth8RAClyHXxmhPi6r1m8FM0ucgk8+y4RHC1kAK/5XgW+2hZYofafWcPq1B5AqDqEYsQ3nepR2gqhV2yiol1COkD0C+aOaoGx4aL7DQCwMJ7uVwomn4fm7VrX2u/XAlELth+5sHPtN+l/Ap6sX2dCsZ/phZkIJgv9l++1wbcq+2WFv2NXIjNKAPzuw7MUAV8DTuynFIEsQy83RgTAhiv+NgBABaQOGE/3mwWTLwAqHnaQfr9GnwUbARgDNBUlkpzQboyYCyYDYdILdf0l4NduW9kGoa4geNdazLElKoA3Prx7DofiETtC6XvE7hGEzJlpcis3Qgrj6d5UOJoYDcMglrX2+y0NPtl5UZUjkfx/Hqbecoe0OZzdF1gHQrln9Bhee4s3f3Zxm4MvAk9VSFdUIw0i+Q2PaBtISiBSSFgCYMjMW00MP7pwvvLDmwFgQTzdHxcOSGvBg/b7ZRZByWYAlOERluKM3Ra9CKWc0q73dTBhMFT4ZwIw9l5Lrpes+HjeBiGCUOKXeuBvPcKTiEIOR0f+RhDBMYi0Lhea4GTaa5NbOQAVDzhgPB1La5RssV3rIP1+7yy5OAADoAchEHBkFbKfGRpiweAPtMs5IFNokyOGk/7rAYC9OhBFwNXVY1at5tftCBHaWVS2AJdEcEinrDNC+Lumiyc1B8AB4+muLARAXTDCWvr93lR4/Z0Xt6ODFQkj8WtumEwHTKDLQejAfN3uds/dfjoQdatGLxb8jQBAYz6/boxiFgAVudzNIc2/s3xLk1szAORoB4yn+2DhaATAGJCtbpkCYq9+v4V+aBgAQ4i66XtaC85YkDog/zdZvzUgfN1N7a633Xqv6fe9msDIHfNaB6Ay2JRE1AHAEDIfI5nzZCLeN4Nbm9yaA+CA8XSsul6yqV0rJ2WQfr+splCyCYBR/HJyKX4phs0PKBZ0lqOYTpvniAiUAmAd+HKjo1cvDjHgr+3wPJQsVCymUZrPMuRsRBDG4AQCsunyJtFGHwAAIABJREFUcc0BUJlxQoH62q8ST8cggpKNAFRGwCD9fkuvbwAkyGgJE3C+Nz1P1q9/T3F1EZBxvZh50s6AEYC5yyUHXt5/Q8zI5/KrAmAIkkipkyGPYwXz1aRT8v5ZO6jJrRyAvKOvNXlLazsXs9bo/ztc29Pohgotp5J49Rcj/pzfIwGS//3OM4CNd1dpntQpFUmjEH4LYIgnyn/OLjL8FeDGhwJbNgFjI8DIEDA8BAy1PFK7FSKf43cNKrvHx+8C/vmxwMgmYHgEaA35J0StpvvzL/nP8RbLAfhyT207TChgDRiu/ZL9DsfWNABvYzbhCDBKoBAk/pEobGWTqp819hzQ1/0k0PoaMDEJbJjxVZFgDad0SaUO5LksWVj+XScDmw5UEUDJ6U4d0nVbC91S3ovfVHp5al64cgC+k7mZAP768KCA0WD3A/ieLz090CDceVmlAuhBljLgrfcAw6PAyDAwPFwBkCAbItM4a/FiNtERjBl76W9ffD2AbwJDdwFj+6syImRXrd5Y2FjIYcnzWPLEqnsfC0zsr6qBMQmfIDR/pyJ6xMhKyMrSDiKD2xja6TADTt0/AGAs1KcAUCFrOLF6tbtiRVFavT/wuMCa7MfVTlH098YBeBcwNAIMEYAUlS4uBULOmK3LCnwOPANlEIOSoF9+C4DvVoWXhvdWZVOYqWgi3vOXDUQhgieB0EElViMYJ08HxqeqnG8D4IIDkAzo51DKQQJvBKUmKACzbM4+5hUivwrgiwC4LzvjmgCh6nBcgiMTcv9Abo0D8E6g5eCjfpUA6AxoQIzgi8ALmWwC4z//DxcPPwBak8DQFDB8yJPpPZHeGCyC0KN5DFCByfh9/+OAsekKgEzCTwD047X0SCPM1IYQjCv2E/MJoGVwUUQoPboq0MdqkWVn7RtDDMahB4g+P6qhXFpjVtkDtRGA2nKjos7IyOyHFUbIrXe0FXsTuzIYfNb4O2M3ATGIYQOmPn6hG6gi3eUkQQAeAIYOAUOzALMVh2pAlESqGFBAXAYOMQVjxll03iO/yYKRAT0FQXkwZkjp1pz51LO2XAT3KtD3AIAwj4Wg05kfiuUHYlsXAJLVnP0INLM0OYFx78AzcRySeTsw2AJueI+Dj2Fne4EWKz5MA0MzDkCCkAByUWqsJzarEanzj2zXwjEGFHuGY+pYsMojzZL1G9EBexXou339IRBrC3lJGmNDuSHX+w7WC4Cm6wWxm8DngLTImgC8pBcGBuTXf/1fXnyTugnFwxTQOgi0CECyIFlsvvJfEnh0mhsYI/s5uxFYi1xZof7oOqSAawwYjRGBzYGXbtWXaCIrlvHUagX6SP/ruMVYCEbEqECXAMjfree2HgA0ESur1/0vtnNwGSsG0RsZME20/+/XWH6Mugk/yngPAGy5GDYALjiIHIgRUIrsZjM7Ax+BSx1S4pfffQVIep8dL7dMDsTGjJB+CvQxTHmdtrw4l0CovFruC2NOe975egDQsCXRK/eK634JhBK90q2C7I1i+Gt0jxF40k1cPJAB7UP2m3MGJAAFQrGei9iUTH9yBUDTHfU3B5+BOIKQ43BWtNtPcWIOzEZE8FoK9K0DCGNxLi3FqaKA9gTgeoFwPQAoI0OulWT11oEwiFz7cwbErzNxWtEYBB+VY76Vh4DWrH8IOoGQ7Ocg1CqMRLPltmxvs1/SHaP4dcAJePYyyUCRIzrTB8tE8FoL9DUMwl61kQQ87Rmy2PS2rgB0a1ci18RudEJH57OsY02y/+83/sZdBKr4FXQTApBvprGgQCg9UEAM+h9F6ugJDkC3gJPBEvRGrYoYCBX9IxEcS5K4i6cZAHIw8oXQ4mLBb35YH5d7OekadtTV1UZSjaEIPH4nQzYNwgjAHNwDuWGYpZc7lzPfX1cQur5oBorfzDf+zi0yVTuSkuxBI2Q+PhQDIUEnMLo1TBCZLufGw/ixbQa0KB8CTODjPohdY78IQmfDjmW7Yo/doAX6GqIiAtDHaYswSmeMubV81kp11L6hy2PdAcgblfslOKC1IiKRmyRxZgV/8++DS8BFrxXi5Hd/U6MeSKdqEsEKhpBRsgRMbAtuG4KU/+9ry5brzP/lPVMv1EPOQegharrVcgZUhVHFxNPcp9VFtlOWkL437C0WABWypFRGsV0sb5Hn2zYBwvUGoKl10v1knDgo0y7XA8Pfv0UACnjaK33Co9gJQAOe64FkNvtZAHQdjz9v2Nz2GSa3jYej2W3KGuZ9ixGdIVSoKT13B2s5AHkGheST6qn0erHv5AIgAAU+LVfw/wq3CEAV7clBKDDGZG9/5oVXx/oyYARczcqH5GyH8eFplTawFvAtrtXLGpNrQDGbejupB3omlIHQGc/ErzOcGSRs8zrhAbbuL1Tco/JfbLlNwHOmi2kIcs3owbdwNpYtynDQhsFcgvuG9/YapGFvYX22zZcAU0/GwA2LJ/4AmGF9mwEbBu98Y3cMF+uAGQCj2HVp3BbPuo3IlqxAy5wHAq4OfARmEBXGfNIBa0BIsG0ecwC67merHgRpZLwocrWaovuTxew/V0txJQ2DWeae3WAGbdhb2DB4+wRw7w5g8Qpv88liyGtoWHzMi4C9fAEHbBi8kwUKu2xNAdBxaGBLbJdZux1LwAGECYAEm6wyfpelJrEgFnRDxESwgyUxIUsVMwjVy5AYO0bG89Auu1/5BF38KqjBHlUAYXsteNCGwTeWNuwtk4JMkrlzGNizA1hm69g1Nix+zDOBW0aBeRZZGqBh8M4emfWNADDT+zqMjQyESdQFHfDbZECCLRgdHeCTe8CBaKJY1rDnBRCIAuGW4TYAZeFG8ZuMkGiQ1IEwGCJtHZBmy1obBsvVMnDD3jIAerti3LEBOMjGcOpa3WfD4ic9t6oveDtLfw7QMHjnH6wPAybW6yaG4+8D4HIQfvtDIVtLejpBFsVvUI7NIBHw3DUjRzL3rDVtsYPOkAScuX3coNDynT2VYJCkn+PjqvUD8hVbS8NgjphGxcANe8sAGNoVY/824BCBtIaGxRe8pLKZdpMkTvXiJ2toGHzSNHDPScAyq3er4qPyGaNc7JCRXWLT2TjwGmCOeQashq6+qSpZmp8vojQpheF58ncdZVjLnjWPHr4VWKTKxrHGUqq97qXu3jp0wPy+eEC/DYNZsZAO6IEb9pY9lNCuGPcNV830ZmkM9dmw+OKfbdcXvJMPdY0Ng0/7GnDXKcDMccBS7MwdKz8KCAKQIgY0MWGCtr4TOHAasMwOkTqf6unyuLykfd254nkb7qsw/iVg7jhgmSX31Vpd9yRHeLx+zRhjEGRbB6wDYT8NdymyubzDzCCGfpMJWfSRYfr9HP/aMgBm7YoxNQHMbQHm+ID6aFh8yS93tAvGQb7da2gYfPoXgbtPAqaPA+a3AEubgGU1RM6B060fgkRoCzj+TcD+04CFE4BldZdRc4/YxlxgjJMewSiwN1zWfsOngdljq3EmY08vm5i/7j5yIMqpvupKyGoNg9lngYosl9wY/0dZdrMzYl8Ne8sAWNOu2MA3zw/F2CoNiy99XbvftrcLriz6PhsGn3U9cM9xMODObQYWCMANwPJ49UliuW6SaqqBn/gGYP8pwPyJwNIxwDK76ahDeN6uXYCuYyABkEza4LbpY5WEWdSLxjF26/dQB0SJ6r4ByAN6NQxmkWcqrnQ00x1DEDJFjR8CcNWGvWVPp6ZdMQ6OVOCb3wAscPJ6NCy+7PerkP5Q3tBY1PrT9tEw+JwbgPu2AlNbgVkCcCOwtAFYcgAuiwWlM/XqDjMEbP9t4MB2YO54YJFMo/5gHIcALV1TRZ17FXOhPtvgtvkqf9H4kvHDlyKK4l6VzvVSBF22uwjOb7pbw+CfcwBSkyeFEHAUx/yw9JTyEbo27C17Ol3aFWNuAlgIn9QxO2tYfNlbK6MvaxeMRYquvL9rTcPgJ30TuH8LcHAzMOugX3QALo21WXBZLEHwRF1OgHS2eOgbgIPHA7PHAezNu7QFWFZ7JnXJ5rnqxHEulvlzwyVNN3+wern5Yovl7SXLGwvn4riLWO4fgMRJXcPd/+pmOymELEhRzBxJAo9gVL4kwVnbsLccgHEpWi3epocCAMeBRU5eTcPiy/6qtl0wpvhA+2gYfO7NwOQm4OBGYGaDs+5ExYDGgqP+ccAkINaVpB8GTv4d4OBxwNw2YGFrxYCmV0YxLNYheCXau7EhV3ga3Lb8g4+R45uoGLADgHWqhsBXA8K1AZADyRvuvtkBSArh+i9DsQhCOtf0UUgW/7aiYW/Z0+nRrhizoxXwFhyAi5y4rGHxU66qAFhT3rDSIVdpGHzencDejcDBDcDsBDBP1uX1CMJRwFiQIBzxieL3KIY1YW5MPOxNwLRb8gs0aghAss1GZ1O+SFHsdRPt0i/PLHu++dFb/x4mXfhcbWxhfCtYMFr/uWvKxfDaAcg7ipPCvFOVpuo3HrCjYW/ZA+rRrti6TS6MVQ+L4NPH2nx698GnXF0BsKa8Iab4dFZpGHz+JLBvApieqAA4J8CPOQuOBBAOV0CUYbIskRkAecrvAdNbXc/aDCxSpyT4CEIyTgRgneiLIp3nP6fs+a4A4N8B8/48CUC+ZGJA29fpuLmxJW+5h5kNFg2jiWHSi0r0Uv4pCoZsxw8DUfnhd4Vk0XGdGvaWPaBV2hVjdjgA0BlpkQ/K9bmn/HOVqtClvKEBqlfD4AtmgP3jDsBxB6DA7tdbcvYzJvQJkii2n4NOeMpbgJktbYPGACiF3wFoEx1ZMNe/4jnPLXu+KwD4t/5SO/iMBcXuesHylyACMBPDgzGg7opM8mEHIGdwrfGA1rC37AH10a64Yr4APvvOSdwEPOVbKxu+K2pdKRTmdI3dqkPPVgbSTBGAY8AsATjWniBdx0QxJylOFCcr6HBiw1P/CDgU3EgEIMW52M8YkLolQRddIN1AyKWiBretf9MJQN6HsaCPxe4rvgDdHOcOxDIAcmDFDXvLnk4f7Yqt63gEIB/Yoj+4p9xaAbBHeUPM8qF2aRh84QQwNQYcGgdmx4C50WqCFngNsgSvQ+Dxu4MuiawhwIAXVk1O+e/A7CZgThY1dcno1nHL2oDIyZULpBsAFTBZ9pjT0QQgn2V6ufRicS8QRgbs5ZYpEsENDejBfpoLrwAOjgIzZMBRZ0AHoUC+SOA56xJwNlEyTFw5FxBPeWvlzpnbANCdQ1eSGTRybMuydgMggVBsKmtYoC6Mt8znZxsZMLzAxoAOvsh+ydDqtXx4FIDl8L/omQ7A0QqA82S/ERdTI22mNfaTuBIIxR4BhKe+y61punQC+MytI/Zz/c9EuvyBeetLAfGZ5WOMZ9j2/gqABB1fMLsHAVBqhfTcyH5d9MByEdzs+B50Z7voGZX+NzNSsd8cwUcG5ASRKYbdHRNYwhhDIHRgGmO0gFP+HJh15jOXjnyKblVT5Cbfoq+yJOszF8P8+VnNPlICkMAzds/YLxlYznrJwIpO6egTPMqA5ZNDAB6iCCYAyYBcBqTRQ0e4630SxZyQJQIvMJ8mSeLrYe+p/GzGfnTpEIBy6US/out+K1wg+brs88rHmDOgAVCMnrEfxxMte1Mt6j7u9zzKgIXzczEBOJIB0BnCJoqgIfDEhM58SWzJEPGJe9hfVH42un/Mfxl9bgSiBySIBWnAJBDGEDAB8QWFA8wO3/a+wH4+rg4RLPYLul8tCI8CsJmJMQAOuwFC9qMI9g9Z0CxhZz65K0wfFBPqu7PEyVdWAOTHVlTcpxhXHZLz1w0ZA6EDLhkCskRf0sw4dRYC0PQ/vVSRAYPo7QCdj7GqVOSMeBSAzUzMxZcDMwLgcKX/zbv45SQlHXDIgagJc+bjZBqAWhUoH/Y+B2D0J7rFa6LYDRmzomsAaOeKqxEvbWacHQB08JkRIteSXiSBLYJOLB+X4xrzAzY7vgfd2S4RAKkDDgPzNEAIxMASSWF38WsgkuXLyXTRSRCe/DduSZMBMwe6ObTd8JBj24Aot07uDObPP9XsIzUGFPs5+JJ/M6oT4buxHv9X7BeY8KgOWDg/Z58GTC9Xq5FxTXOw9c3Cm6k5fPcjgbHbgAlvVG2tH1T3Oavoq6BlniZ+12n5u/2sDbOvasqoFg8x2Lnbcd1GdhSAhXN+7qMrAC4sA8sORJ6yHwD28z+Ft4fdv8UyqUDrDmCEBcpZ39kLS6aq9l4D2rLb/KYsFTPWdfbvh86vQu2s1K/K+zIjTsXIVQ9a59Egs4Y6sZfIA/EcSp/jEXv8BWcAhxaA+SVgSQAkGAMICcwVlNLlqTc9Gbv/HAA7MrL4+f1VlXwrUq7SvCoyGcrrWpGhuur2fNGYwM8YT67hT3s1LaZvqn5MLM0bzmHMmIFSgdFNj/mIBct63NhFZwEzDsBFgpDPeanNgATfCtGsX9TIKwNrg9tuVkhlng7TI/YArX1VkXKrEe1l2SynN1RCsFJsqnQv3UIMxhwIRjU5AGN9QUteVz3BUAvahuNgjC3HxLAND7nBp/cgONXF5wCz8xUDGgCjKPbvevlzcKUHH2ag6cnYzepYBB9Zi2FxDJdjoXJv1WDFiLJ6MKqKZUzoQFTfj2HmwTKcTpVWvcxHKm6kKgoORAEvVclPD6NdzLXpMT8IYNPcLV7yJGB2AVhYrAC4SNA5AxKM9ryDPE5fs6eeVKWGZ2M3S3MQfEyJUKV8L1ZpJXpVJ9pLilmlAxWkVJHKwIhjjD9TtVXVm1HdOy/pJiaMFRWM+bo0rWl4yM1N7oPhTJecC8wRgAttBjQWdBBGESwgSiV0Pb9DRgu0TY19N+M1mRKh8niqFx3rRDsLqjgl9yaGXT80vcL1wnE252PAZCzAHQCoiqoW3yYWFIt664fUpKaREr1NPakH6XkuOQ+YDwy4FMSwgU8GSRSz0UJx3Vx/5vFNbrs/EiLRY+v4ACITww6iJEodQKwBIyBRv9vwhKzUW6z66TUGEwhDS3ezqusAyNxnJn8xa1KRPSFts9YfFB/QDZcAm78CnDBT5U8rCqjfc3yh8Gn/hGd/MsKf1+QzYJ4891Jye13iy1cAE9cDJ+6FpYrEkidxDN3OtXR+FwBGMezoMmxJLOumAuD4J4rxJrfdH/XCoLGFVKiUbw+LAPQqWWaMMLrd6/+JycSIm85w9lOpt1j1MwAwFTiqAWEUxeYH5ENn/jInUVHeMXQ/f/jRePvCa4DhTwLHfBc4frGqqaNJzLPw6iZxV+HTplFGvZrXZT45N39+HW3TujlZv8D6fp8HRq8Dts9XIOR5YtakgBgdrrrt5Qsq8Ssd0BhQ4HMwmVitAWHAY/LbLDQNQDaTVJ8Q6W4qVB51OOqDZDPVB3TLOBepW5jmqaLbec3jGgBGMSxvvemDYkQ9GoKF1ShUCSKCqBeQrvmfVZPC1keBjXcCmw911tTJ8q5XgOLaQgA+x/OdWA2EGZ98gbjleTHdQHQN+2iwls3nK3/Zhj3VeQhovYzdxmArSwQgDRA3QiSCJUrTnjfl4KozRCSCCeYmt90EoJJbVCk/1+FiCwFZxLk4dRfLFia6x8LbYkD9v9cXtLG6+O4AYQRfrgPygVIcqyhTXcWFOJH8fh3rz7EKwnUArq8mcGwK2MCC1i7WY7Zenh56feHT/jE3yliE4TZncd636gPFCKWavGhcRx2J+cvs9MlSw0Ty3cCm+c7n0G0MExdW4BMIbTXE9UCynvyCCX+Ovm4gbByA/xisVgJPpXrzLj4EoRJjJIZrWHArS9iprK+KcefgiyB0XVKGjOmCmW9xhRVMUSyRFnNeFGEdI2q+/HFXclkp9WsAbgTG9wGj08CI64WxRk/OTDcUAvBHXSLQxcVCDMQSWbzv+1e7WVbz+k5w2tJtsbcCYV6WJY7hmAsDA7r1Sz3OgOgoM+KTOJbcjSI5yGIaNE1uuwlAAU/MF+tF5/0sIghVLdVdM2S0bSzHx2Mi+FTxXf8X925NC4BycK8QwfmgVX1LlcFiykEMcL2BndJJ7aQfijKfxLGDwAhByM7aC5U4qwPzNwufNnNuOH4VZaCPlPo2AahqFqoPVFc14ga2m+WEEL0cAz9kdPrOmMu8r1o/rTsXz7f9oswFs+jO6LAqkvC3Ggg5Fg6mwW03CUI6X12h8lyfcz3QHqr3DIl64DbqaQKc9mI87QXACD6vpJqY0EVxz2CEyCI5eMSGX2e7VtI5J4yTRyZhscrvt1nQuivOAaNLlYESwcySgiVbr37Bfd0/u31yEgg2FVaiPCeVOguqAfGov0iR0R9JABJ0bnwk9nMxw+fOh55EbgRhzozrBUA1polN9CLwok5HEEUQBjFMQB7D+j656PW+IrJ8O/bBCo4sGFdGejqiyYCx3mKe9/JtTiBvmI5OFiTisg9LtJFF7gZGDrUbHKs79+hyu5hSaUvh1foFr3r/6vZJCiXgCDwVVFJ7MVmRLsrGltuFCc68yFdACMDAflwR4QM3HPoKgIExt4gz42SuaQb8hBOE2oZmlu+KFlKR3QSssMJxDPWbbjpfLoJrxG8CYT8MKGZSVTCxYFTIb84nkCxCIPLDiby30gXFghaF4c2ReR466Uu2fvoFr3r/fKAEFxvpqMcd9yonIrkuK5LLV7MVCM+/uDJCyIC2J8a0z1iwqyESgMl15Sa33QKgmtPEBnp11mwuXgO70Ud4DHWzfgDYC3zBEOk7HlA6XKyHQzb8HgGoCSQLqsxorIy1Bxie7Wx0rFaf+wr9Xv32C+56/7HbJ5VHtRYT+GJrsehHcya57PyKAQk6+vBkBZPpjPEExlwU59awg3C24W6KBsC6tqHR+MidyVG3i3rdAnAsH2T093XT+zLr197MTA80h3SfsZP2UqpCrPQ46oF317VrpeiKXTJ9MhMLkgGdCacKG/mupV9w1/vnwyGgCDCKWzJe3lqsyzLWZWe6/kc/oKzgKH4jC7oolhdC4jiuzM0WPo+cPQ2AsX1obFCTO5Jzn566PwbReiwnfTWjI4KvDoh1juh+aT+WKSYD3i8Aql2rJk+VsVQly5kkddv2FvHT61icqO7Fr71/IkLNXOi0FQjV0046oBy6wZ922Q95ICqDEaL4XWw3COcf9Mw73DFB9AqE6wZAAS8XuzGQIDKf+oVkqxt00ttAc+YT0PJ9qRFSB8xoye5Xu1ZVeCSgCLbYLVNswoncHxoeLwCzBGjBNki/4BX3z9lXgUCyIIGmhova83cRgO5Te9yLgP3MfmsBS8xs8/U67ePQOqy9umBUruDchqo8sHSd3PMfT5ifo+ack8eFHI6QEcnT5GvdOnVdXof+ptJ+BVPWceiaRHA8Us/nkACo8mzqlqmWrbFDppT5A5UIZm7CPA2Vgm3QfsEd909kKIqB1qJAKCBG8ZstZz3xHOAAiwmpDIdng1maZQAkZzsHZ537YfQrwNyxoQ+HakrnS0h1mUA1C96TdJTmORyhC3oeqdwROi+GDhkFI6bYNrcNDEDeAkXwQizPRpmnIs3OdqZPSaRFUcbchHlgie6agq2kX7Dd/+d8lUJVXuUzk8ERmS+2vfd4uvN2VOV5rSwb0y3JhgIh9wJeN3YMQCIgR78Q+nDEVYBYZUrUpbXFnM7COSdf7N4IPvtDnT2BY/h8Chh10MXQeYGS+7GGjaQiABpuNIFiECnzdWJMIUHcazLptC7YivsF8/7FgLFMqpiQL5TuNbKfA/DC46rqqAbAwIKWK+timRUBEiNGsOQsyQm+Gpjd4n046hbT84KPuYjOmHHyp92gcgDS2OoIuVIeh/xyUkaVwyEWdLrewHE3uBUDcKIwnq40HpDXL+n3CzbaKdguel5VnFJl2awaghLQBTzteZ0cjLq2A2n0M6EPh2pC57Wg41poLzZsAZNso0Hw6eVR/J8bF9YjWGmVCpGKwQLBRCcrbiSxNLgVAxCF8XSl8YDHHFPW7xeFBRwv/rGqOKUBkODzqgdWPYAM53vTASMQu4Bx9J+69OHIF+N71F1O1gUB+AsBfFqKC+4Wi4BWX+CYgOTAU36wdMVNVKka3MoBWBhPxyiuko3xkSX9fvGMkqsDlzzHC1N6SQ4DoINOe7KelWWTheziObeKCdARApD1AdVnRH048gKUAmAEYi6Oh4DJV4VoGDWqjq4XLbO5o1jBoimEPhPJmwu9FvnTLgdgYTwd2wyXbMyRKen3i2eXXB245FlVYUpVxUpGiLtmGBlrTEhVUwV8dEkVKAq3MHJ1uzRbRx+OOgDWFX6MsXJU/36lJoEoA2AKvw8+uwTEDIBbStdOs8ddDsDCeDom7ZdszBIs6fcL9ror2C75US9IxJJsEsHdGFBil4yYuUwknofJgF4XcEUfjrz+X7fKo4EJJ//PkMORO6FrVjQMeL5kJhZMMXzLwNZCt1nzDFgYT8cQwpLt4hDON0i/X7ys5OrAJVe0S/ISgFY7j9ZvnQ7I3+lyqpYaL98CWp/N+nDkZdhi6bW8An1kP3fRTLKVWlwF6RZCH2L4zDDR0k1IqeTNb2OQSYNbOQMWxtMxeqtkY6I+ny9VEz6btfb7xc+XXB249AoXv85+tIBVgJJ6n4lf6oV+mfjdDJNMH0wAVFX90GMk1f5TxlS3Fggh92DyN0IORy5665KIfCktsl+K3VsGtpVOWOMiuDCerlSnjQ2rB+n3C+pIBdulz8wqonrNPLKgwKaC5B3s53qhXVq6oDNg6sOhqvqhEr3V2VNLBjmnSSNdrOLJ1zkAu6VPRjFcFz4fXDJ8i45hG94Gt3IGjOFYA8TTlQZ/qGH1oP1+8ZtlT1MAtHK8mQg25zOZUSCLIliWcbw8wfW5Ln04ssqnHX04euiCk6/3de66MPpuAQVZAEFkw2MKFw6a1wEL4+lSBvmAOMhD8vkOkFX77feLNw14YT/ssmc4A6oOdHBEkwXlgjH2k4Nal6wB4fIuX9LzZjAmorNeHMo5Tc0OewHwDTUh9HXxfGJsYkAbAAAgAElEQVS/uvCpoAcew6zBBrdyBlQwwoDxdLZWXLDFkHyF8xGE/fb7xR8XXByAAVC1oB18HQYIT+8uGfP75SCUs1o64he8v4j6cIQ+IqkPhxrBCHjdjBH6AblQkAeY1ondukSiELmsUPpjbyp7XuvDgAXxdNZVvWCLIfmKg6Bbhrjup98v3lVwcQLw8gqA5v9zC9jErutltg8gMxDWWMBaMVkmANWFyEV6R0uH2I1IzW7ypbkQOTP5f2ch9KsFkwp0kQlDAOmxzHpscGuGAQvi6VD4RgmAg/b7xZVlT5MATNXwqQc6KGwf2U2uGV2uzg3D4ua7fDnPwZcKgIdq9GaIBPZb0YdD7hgyIFWMXiH0eQ5vXS5HcMkc++9lz2t9GLAgns7KxxZsCkgdtN8vWD+vYDMAUpcja7lOR9eLVcIP4tcuob/3AOHCdW02VTX62ApB4Mv1v24gnPy9HiH03fJ366KYHYTHsgBBg1s5AxbG0+HLZaOp65i+ln6/YM5EwdYBwGj1cmUkE7+8THLNdAHhwrUOXtcrO/pwhF4cct2oN68BMDCfmsJM/n6PEPoYPp8bH3kCkbtjji2tJJA962YAWBBPZ0WBCrbYsFoOf9pDAiENk179fkuvf9nTXewKcBSjsn7ldonWbgQpx+26otaLIwAlfi2QQSJY3Yjy5i9dmsFM/oEDMM/Z7Uf0RiYUA7J+ToNbOQC3e0WBBm9qLad6HICG1ZK1XB5PoxnuOOIcxSXe/Of8xHV/P+FpwN47gKUpYHmuSve0pKZgCKSq5wqniWE1WZz/xouBm74KTMwBI17lVBXwtWSs+8/vL45Ff3vhpcAnvwos8d48DZX3M2hx9XIAnu0IIO0chu35AOgLL0yuG/jOmwbg028G/mNz1YWdETbm4I5BrFlov+EtD2wIo7l+Atg8D2xY7iw3V5diEqO54mnj6XdMAYcU+6gon7A3NSO2qFjlyZYDkAX6uD5Iam44YaUfVNDNxaJcLIPXcGGpfi6PnZdVD1wPspQBX/wl4OaNwN6Jqg+xwrxslcVFuYJblehkcYYZGPS3L20BxueBcS8nwg5H5kZkx6TQSbXFZcCQKadx5Cz5mPurAFxrRaa17pAR2PFC+ElSHKQ/0QjQcgCyGyM9v3SnsDBRJgL6msWCf6IfWeUJac8UFlpY8500DcCfvgb43hiwZwyYVhd2D/VSrKGAmIDnBkiafEcN9cprHgKMzgNjS1V7rRjRlceyrqif6KAkMgXIM+6tAnDl+zSL36O9+U8p9jGHQo285/2XA/AnXeNnKAorDXH/AILwbSvLEz6Ql2+cAf/3XcCdw8DkKHBwpOpFbE2wadzIdyh3jjNQirYWEwYq+/zJwMh8pf+xKNSwM6DZMmzNRRbM2K+2Ii6TlFrAWfd5V3i/F7IgT2LBF5LbIdkqxLPWvtzlAGQ3RpU3Y7AiixMxLOUB2t7pKQ8M0qCTnp8HkojJgNqaMEJesQv4AR3Iw8DB4QqAs+6SWRiqgJgY0HVDAdBA4Ba4xN7ndlSFAAjAYX4IPO5dBDMAdS2i+Jx7XTf1eEdTDfgAQnR34p/wQkRmjNAoByDT/ugFphXAmjAEn8qaPQAgZCs0lSckCNmVigEbFMsPBBE3DcBX7gLuawH7hoAD7EM8DMw48AhATrjtQwiXoqkTEwWd7LOneXNCbz6Tiq/TInb2M8ZzIFrTQbGiy92oGz7pXl/7jvdAJnb2470IbB3T77Sai+hyAP5voTqW6sKwFAc/TAdc5+3dvcsTrvPVYSK4SQb8xV3+6IaAqSHg0FDVh3iOIFTIFxtit9orL5Z/LD1Q4s+B8OnHVuXwhhdd5DoLGsgCCJ04q66X/Ju/vSaeAxDPvbdtmdtKDV90gVEPIl/xySkviOhmAEjrlzSkwj40SlQZYZ39I+8JBMx8mZryhOsKwqYB+KpdVSDFvhYwPVR9BD7uyX4SwRS59nNI+bRck/DzJ05v12M0nY8fAk8iWL5BB5qASPGRCi8EVjzv3mqpkC9ACrrwhKukB67GhpqRRowQMqCiYbj8oOoHeUWpdYIBAUj8c8WjrjyhNIJ1unzjDPjqXdUjJAAP8TMEzLYq9uOHICQALe/EwWe+QgddAqCzzD8+vgIgg0qp+5nYjaDzCgjmnCYone0klqP4JSgvvK+6LoFPoFMlkPGh+0rPWta4RHTNJJQz4M8EAGoNTPVU8opS64CC9zoAWTFChcq7lCdch6s3L4J/2QFIEBKA1P9mHIBmhPh3Ai354RyAAmWsR/PRs6vOR8Z8FMPS97yxtIlYgVB/I7jC0rIKSfLXF1EEB+BFFjQ3jCLA49OWsRTTEPzvzQEwry7VrZ5KwzAQAPssT9jw1dcHgCrORQCS/bgn+1HsCYQSveaHkzvGv1scgU/6R55Y1YIxhvOm1EZekQWl8wVDxJgwc88QiJc6AKX/meHDawX9z16M/Em7bO8Q08GBP/jEkAEVjMBoAFWXUjRA3KtNwOBXW3EkAZhrALktpC6lKtTV4OU7RHB+3kHWgv/zrnYZl2kCkF4uF8MGQGc+MqEYUCA0n1tkwxbw4ScHAHr71Q7W4++c8czwcBAmHVB/c7Bcek9b3FuwbdD/kjGWgzJjQ3thGmVA3jhfOyU+RxB6FamOFp8NrhsTgLy8Cpzm5QlVptAU+6CiNgXCaIQ0BcDYV8b0P4pi30vfIxD5+w72C9aliegW8MHzqrmh/meuFhYi0pKbs6D9fsh/n1XFMrYMbPgUByCZz6J+uEknDA9AornWFRb01WZEsACoHhOqyC7wdetT0QAK2KqOb5MCUvPyhLE0oQxzqaYNXL5xBvyVXe12vByLADjXAvgxBvSPGFGMIjCmJbEW8HfntxtQmxT0cmxp9UPAdKAZ1upA6EB7qgDo6oCUxXRtPVSpAwJpnUhuxAqWCCYK1MBExZljY5S8SYr+pxAFAuBayhNG26jw8usCQLX0SAAkwwcAEngyQizaXoziIli+Oe7/9kJvNk1LmBMe9ECO3XRB7aPeF0EYHNVPdT8gj016YBcWtBfBVYJuz7mF7VgGY/pO8f5WdQ1/7U67nIKNS7j0wIbDPFZsyNHHY7od/xdlEHj8CcC3TgCWHgGAPSxiSdt4312u/8SPAl8/Dlh4pDeZW2PD4J1c9+uyDaIDkgEJQKnTfG/N8nUAmu5HUnMW5ARbPfEuIHy/ACjRK7FL5pOR4RaxgTHofKl8r/S1ZWBnAGDKefbn3AFIPRPXB7sFiVQimKVgGdl5ooNwLQ1/1U+DQGSXQ9r5Evy1q9rZbP1lGQDZsPpzI8APHgXgod7qUx11YtBbFzC+/C+BL7SAWwhgdoLkONSLqy5oLogYft3ZI1F7EAC+phsAnekokhP4HIzml/PvthQWmPB9LJ7jxkcSr14jWj4/0wFlgJD5eoDw6fe4DzAYPHokWhHJZ3TFSkn4h7YOSOBwEtiMTv1aY0uktFYTmI2/43EMQmCuAJmUE0gmVD8EFdPpdnxhVhqzDr8F4NMtYM9Jfg98EVTeNu9Q2OFZBX7vr9vtgm/lcezczZ61ZNN8DCvilYCdPXqNDQpAlfGTKm0M6AA0PTAyoMSx64cRfPQHXsniOTI+fEWDFGp+Qb9BeySRBV2kpl0QxxGAlHDmkI56X6z+EP7UDYSdRgh/IouwIZ36lHabBE0GJ0r10Rgb/xA/tt/j/6aMAf+7R4CxzuBXWRGULwBfIrY6UNfpvLae7n0I+LO/reoLMqiVMbW38oUhkNkQIzZO7tIweGePcmWlAFTjAYHPVGwXxWoLYblEDkLuTT8MDPhXLJ4jALpaJB+ggU6xfgJknT7IKXIQXh4Y0FZCog+wxiUTwSkXUbSMV1rB/A31OXWuFpPUda/mRHKi1e6U+hA7Zq7l+A+UAfDtHg/LrptkQpZ727cRWOL9542Pa3rOvuOqagUltgtmJM08j4/PILbIDKz6w5PAHsbraTnMGdZWIwIzxIfeK0rn578J3LAVuH8CODRahV/FFQ/1IumIvXP1QudNfyNT8oVqcHviPcBd48A0g2RDuoDqHdb2SalZAdG9dnfDkAE0gXnH5ijWCDbKCq5/MRiV0QD8HgHQ63jG0hdsLGxA3x9Bw1Asli7hO3BwApgng/Gjvq01IHrXJ7q3Cz7E++YziF2rs1ZLZ+8H9jJsSoECWXj6igmR87aLgfbGq4GvbgLu2gjsHwdmCEIPSI1h+SkCRjpfUC3iNWcpoRrcnrYbuGsUOMBo7QBCxSTG/igxVcBIVGPWM1h1JYQPnyKNExGZMDIJ9b66eEBGxPDY1Y5nv+GCjfGAxD+DDpiawphABWZPjwNzNLAEIH4XCH0M7/5c93bBfI8Yk2cgVAdvdT10ifDkBWC/r9lGH51NhIsnsWHOfPmEUKT94WeAG8eAO8aAfWPAwVEHISNQlKQUglJjJExqC+H6Nq93kOpUg9szbwLuHa66QzFWkaFieXxi6hgVHOMCYGRuJ+5V4jYJIDKI9KlsAvFDq8QDrnb8NWVPh9EwdFkQ79TlSMIsN0Mi5s9MoOGno4U6f3YAvefL7Y7rvdoFLxOANSA8f7xSgWmd0kCQbmZ6mTLEnJ0UqWLhUkxlrBn6n3wWuGkYuGukCsufGq2iojnRFpafsU7MDxErJuZhYCsJosHtWTcBe1oeq+hxigJgXBrMmTBPnJKLrr+VED54ibHYvZos8sO+DNcrHrDX8YVVyglAKud0LtMjFPtNMz6QLDY7VomLJd671AEH4Xu+3g7nWq28ISvX58/hguOBg8vtFQvV/hEzxfqOevuTfpjri8vAWz8L3NYCfjBc6ZYHmBcitnFd06pxyb8W4gPlgonBqffTtdTg9pybqiVNBssyUsdUD7eGO9amnf3sXtxQipl7Wg/sD4A8AwHIyZMYky50Tp/xgN2OL8y051qw2hXzwRCEdT2nmck1RxHG+w5jeO9NFQBpR6ldMIMXlFWgVndqF2dVFsJzuOgRwMElB6DcI6rznemD0RnbwQiSRS3g7Z+tVIl7PC9kahiYZm6IizuLigliT/VoUog+p8P9l3wJ7qGEanB77k3VczroUToWLCsABud4ypaLCUoxf9i/9w9ADiICULrQRWuIB6w7nuZrwaZwLBGwClSqSyz3AhHbaRGEFGOmC44D72UVgjW2C2Z4lIF4ArjodODQcqUGqAxfcpG4mJVuVqcL5tbs2z/veV0tYK/nhTAqesYNHdO5PCJZos+WuzxHJIViuXFyJxupNLg976ZK2lizUKodilGUgzyGhokF8yw5Mf+qRkjdjfuDtwkkm7DTkNaBaQ2ox1q3eMD8+B6O3H6em8Kx1Ccx9ptWl9iYIUAAWrI3I3nHgPdOtsO5eOuxXXBdj0V1vOL/so3Cxef60tlSpYwveKf0pAu6ohfdJ8k4CUqgvr5jV6VGTBKALeCAh+VbZLTnh5gu6D44A6H8cVlkNK95O1WkBrfn31R5HSy+JCwPplAxRegE/2T+AloGncNmbQyogUQx/KwB4gHj8YWNTwRAOW0FIIIndoqNkTAxz/bd09XDGLBdMM6/pLKi5whAX60gCK2ujxzEAqGL2pQ1Jis5AJEAFHvTujYAKjRf+SEugm1d2COQLU/DAwQ44caEw8AtZzSIPgAvuKkdrWMM6M7xCMBoiBn4YpCE2NCfxWAA5MEuwvCCEICwlnhAHV+YORfDsWJGgPpMKwg1b9QpFnzHbD2BK2JGul9s8KkYW17vLALQRTCBpzXZpS4gtCXXMAkduuAy8E7PijPWprXJ5CR38ygw1fJDohh2BlRAgq2OeN7uTWc1D0AFNtmL54ESBsCaJcLkDajxj5ZXRiCIGA0waDwgjy8sk5+HY+X9ppUbJSCp6TnFCMXwny1WAFQ8rUAc2wUrRL6mXTAefWnFfnz3FpbagQKLAqAzoZjAKkkpXkNO5GCEvOMLFXOnnC4xIKOjnQGNdWSM+GqHQGd7JSsxUf+JzQLwhTdV4je1nQvr1MkPGtlf9yP2Dy+gAqZ6rQytfvdHSDxgLwBF8AmAYjHWluEDiKGMiqOVvtejXTBOuRSYJwDJAARgZAGWL9Nk+IM3SzgTydE4eec1nZHbtDaNAf1Dpd/SMx2END6kD0oXtFhBXmcY+OY6AFChnKnzl7NfdMR3qCAae2B+VVMYXASvDs3/X/zHJZcB84vuiqABEo0QPnhnwqQLyRURmZBPytnwHde0M1vN2lR6picoKULaxHDIEdHkW2iWg4/7b5zb7DSQAVd0/griV2JYojfpwRGEYsGBrOBmx/OgP5sAKANkcbFzNWTRnX/GSGImMYH/LYlk+gGvdT+bW+SWH+Ig1GqL5QeTtR2EYj5LVHfjw/ZDwL8yJ6TB7UU3VVoTjTYxYDK+Ivv7dzNAZIxpZSiU8jjKgIWTcykZkBawDBBnQdMr5QeTKI5iWCB09AmEb7+ucnOQ/aTPWn6wuzyS4u+R0Ob6CUGqJpIDA97AdqINbgRgBJ69CG4Jp6q/ckjXqB/RKla4WpkO2ODgHoynigA0JiLwaNiEt95YQKJ4FRC+7brKzRH9jZbN6iJYuSHm9I5iOAOhHNJfZkh+gxsBKPbLu3+JgaWDdojhMO5kkDWSlNTg4B6MpyIAjf3IggJgMD4MCARjFMU9QCgAykhSKnUCYHB9JB0wy5aTRUxmup4h+Q1uAmDs+hpXgFLnB6ULONOn5xACNJqxghsc3IPxVBGAiQG9aLeilWUJW1FvVXEN0TKp1C6At19TMSCBpz1dHtT/JH7N9yaxp6QkF73KBxYIr10nAMproB44qQGTj6sjUrtOFPtLeFQHLES9AdDFrq1E6M13MaxVCTNAXNFThIylLcor40zxtgDAPKuVwDMrOKw+SBTbtR2MND7sZwC7Qvm4wqHa4T/uIrhb+7n0EgbQdTijoyg+agWXT8llDsAFWr/B8qP1K7bT0pvtVwHhW6+t2C/m8svvZlawi2CKe37nhFtapkDnILRqBQA+v04AjMyn79EIkXO/DnzyCBwVweX4wxs9B4rRZgyPVFqykgDd+5JSpBU5r0vHyHz+jsc3ub0KABsZMCyQgeExKyFPVIz3lmcM6OfPAGCADYPE67Jfs6h7G0o+xvi7oyK4cLZfOgpsXwC2Lq9MwuuVERonKn4nSJrcXnQKcM7dwMMXgYcsVxkSebJgzOWPqdB1ad2f3gpsnwK2LXWeR9m3danUIV1lBSCPArBwtp+7DThuBti6UDWDmWA/DvXk8LRptfPtNUlihYZTOPCi04GH3wFsnwGOW6iAs5n3GeJJ+KLoE+9VDClQ8R6vOQHYegDYwuY3S6H/iJ8jb11ck0q9Qhoc9QMWgPBZJwFbpoFN88DGRWBiqQIgWyJY3lPozaGJ1KTEPh36zpTkJrcXPRE44S7g+Cng2DlgyyKwaclfFoIwvCwx9Zn3Q1DmIPx/2/sSaMuusszvjfXq1ZRUElJkKsBEGQyYhJCBSkUqAW1tsBdpuxEVaBzowXZqe1g90G2LotjQdmMjKqtBxQERdAWUAkUlZNBGkQRNyIAEMAkxpFKpqjfUG3t9//m/c/+737njPq9uVeqcte66b7jnnn32/s6///3v//++Tz0dmD0KzC4DM6vAFpd/0L3Gh6yTDgnvLwKzAWDGiH/ThcC2OWDrErB1pRgQisIQhAa+AED+HEEY6uNLyrRnZLSl6tSbrgLOeBQ44yiw8ziwfaV4UGbdegmA5QMTLFlqsfn7XecDW+eAmePAltXiXnkuZSBkRcm4UGXtU2uo3xsAZgz6y54JzMwDWzkgBOAqMMVBCSAUObh8QuN/CiTgcWAuyWhL1amvvBbY+VgxbW477paa7gIBqCnUrbUBiQuhAKDUot13IbBlDtiyBEyvtO5VDxvvVfxW/JkWNFrCeK8NAGsY7BsvKQC4hQCkJNaKy2LRIsg6SJ3IQSe1onKKC2CsOYMeN+0Dtj0ObDsGbFsEZmWp5S74g2Ir2uA22BScAJGA+dJFwPQ8ML0ETAUAkgDTPq9zdK/+sMWpPF19NxYwA4g3PtsHxAE4SQC6FdSgmGWRRIJLZJll8EGKjHiX1jwaN10HzD4BbD0GzC4WrsKMW2pNobZoCu6CLCDfCTqzgg6sr+wFphaAKQfgZHKvpRSYg7HN5XCL2AbAZwPrZGaj6ippXhgn0kqmU1woxnHedg5AATuWHig2FE1uVRwoxoX+Wcbg89S3AqCKPONcCi8oPtVP+9++G3j+oSK2xRBFDElUxbTS+3nvc4FpDsjxllXQoJg8FgdCQoGJJTTicLcQ6vPL6wbg9cDM4cJv27oAzFA5ky9/UOSvmg8oP86n0dICBn25JwjARWDSAUgBHN6vfdbv10AbARh8X91vDM2ss+NvAECKPVLCsHoyUgRqrlbnRwB933OBc+4DXrIC0IEmiLnE75di8HsyAcjzWUVGUi6uICMpVwwJVMXdeOk3XAxc+Hng+vV2esAYw+sWoP31r3eLcLwQBeQUrEHh4Jo2h4vDmJPuAyMLGAeEn7uqbgB+I7DlSWBGCwe31Gb9aL20kGDb/EGRxY6WTz8f2wtM8l4pgL1SgM8esHCvsuylME4nn9cfQLtldg6TZ0kUKorAfij23vAPCmqp3fcCl60XFINid1PlZrf41/dnApB6wSQjutUfIDJR8CGIQOwWEH7DywpKrWc8CFzqRLHkVYrB2jS2FQH5vkuBycXCAlIUUAAkCM2iRBA6+ARCe7DjYmQduLYTleiQ/XTTS4DpI+6nLhZW2nzVCEBaMLd+soIGqjD1ampdugiYWCpeBKA9bBJC9ActAk8LES26SqsftInLZ44dQif4Igdhym5WLrPDyuYH/7HTCNwDnPko8LXrBccjQaioe6BiKad3+QY/MGTH6rS3OBvCnQDuAIyqhiDkQ9RX+29yE3on8IwjxQPI8zkTiApGU3oVkD/4fGDieAuAdMw5MFQjEgg1DYsUku+a3uI0TGBfV7PotwHwaOEmbHEATvuDIutni6UAQoFRIFRYhfe/dhEw7tbe9Of0Si1g8HkrwRcevDajz07gIJ7n05rYyWIpb4ya/7vv8PRdFpj/LXDmkQLAnA4jCCOlTBRN/rFMAJKgkkVHpGUjySSBSFeg7/azqk8EgbSEq8UDRACLKDXSyaQ7Br//DcA4LSCtwnKhTEkQcmAIQhtM+Uaajl0uS9NatITXWzpzfcdNB4DpY+6nBgDaCtanYLN6fCj4u1ay0QIqtML/EYC61wSA9tAJeP6eWsAoDysFpg1eB0HIQRCIIkVeCqQf/05P3WCB+UPA+CPAzvmCaFWDKEuYcl1yMN+Y2dckqGTeHPEvvWDSNhOAfbefX0A6rS8CUw8X9066bFIfdqMHJID++DJgLACQumyc3gyAEYRRKFCLD1eu5ODLF6QvXedx0w3A1BwwxdAJLTXjd8seQnGrZ9bPFxLyA7WIKON63tYtCQBN/sv9QPm6BkLp0vl9t/m6ietR6fbyBA4gnXtORwRRpNnTtPpW6gWLH83lKqcOFTEnDiKtoHwy8RNFhrefyeztbnrBfbWfgttsP+kIyO32ELD1cHHvInrlvWs6TsnB7qAUlg/suFtAWkE55zYQ0QpqcALoNCXTEt7A3KoaDwGQfqoAOEUBa7fUbKctltwCajVbxvSiyvoasM0BaBKwwdKb9fN7NfcqBWGiSWykWXER0umeacUEonQgCKRfIgDFjya5yq8Wfsfs8dYgiuMxgpAg/vnMzu6mF0z6Zj5APdvPQec0TEosnvQosGOhaLuIYvnwEYSithE52F1XFAA0p5yigD4otCqygFKnpHUpLYP0OcKURYv6Mj4MNR433QhM0gL6QongawOg+6rl9CswKoSkEIxPyTsuAPigCYBmAXVfYcVf+n0SRYw6dP1YwNgHsgSajiJP429RrpWOM6cxDiJB6NINM4w7LbUGMQUwB/M9mZ3dSy+YVG0EoBiDBST5ddZ+PkCsAiIlQZDa3LVatJ0WXG2PbL98AB+4omB3oP/HgTUhmGgBfRqWf2TTrUSjExDSP/qWzQDgfAFAWyzR8rkFtDAKX75jo6nUguZxZ8NByHbvvqBQ36T1swcsBaBAGGRg40Ir+rt9WUDhQ5ZAU7Es2e9LLzglqHRxNkbeuW+oQRRls5jaMjnK0a9ecNf2R4LAwO829kQB3LTtEYQPUwzQAWgW0AGo8AQH0ljp/V17pm0KRcEifGuNOnocO1rACQbKPXhs8TtNwVr5uh+n6Zf3wDgu29g2FdMtOc8B6PdpFj08ZFrplw+ZA5FTvAQQ0/BT36FPDkRqBT9Jag7xYlQItY0f88j78sZzCcKPZlrAQfSCK9uvB4h577SCotUiEJ8opq8IQFl/PUBPEoBLxbRE62LSqG4dFB8r5bHcOtiOQSqT5T7RKzYDgJx+BUCCTxZQCwhaQc9oKcEnEBKknj5FsJ1LAPo9xoWWPWDy+6IIoqbeaO0VA+zHB0zxIQDKkn1GgtXiRxMIAx0Vn0Db+lkuFjLRCt5WEwD71Qvu2H5OfekD5FaciQay/GIbFgBXriwAyGmJADR1ck3DwTE3TQ4B0LetzBJErTYAr2BBSI3HTS8tLKBZPo/fWQDZp197Z3scjGb5BDp/L3+njMweB6B83Gj9wj3atOsPWin9WgXCFlVO/3ctf4iD8XkBkH5USlAZlNPZAQqARr5vxu1yjmH0givbX0UQKI63o0Wun/xHuR8E4VnPK5JQLd4VNttTBvK2uoiKOUf/f+GjwMNBh0NMV6J0c0NpcRv7mrYv3kh8/uHxYp+bVpwLp3R7sts2YzouSq3KGa+q7+x7Co4nazAerRKsVlV1QitF59dyyFZaYY0HMu9mWL3gtvZXMbymBIFMZ1ov2h0B+LTLisxgW+Eq5uU92iZ72ud9vvR+4JFp4NjkRh2ONi0OB1/UBCkvEYRhfuNs4OmhhiPKnFQlx6aAjMnSXJUAACAASURBVPjmz1w41nnwO4cCIBvBwZgTAOUHRq3gyDExD4zRGVYEnpm5LqmQc0M5esFt7acFl0SlHiBxuTkYxxdaihUC4QVXFu5FCUD5QtJl85sjGA0ziQxqeu/fem+hw0F2fLLQGxFlYMRvo7v1WmIVtpt1DFkXvOR7LwJ2HSkyoZmEypoVVe8p7b6qEMnidGG/Vl/L2aPOIwuA1pAIQE3DAmFa4j9f7CPaFpCHKujr5xzZesGdHqAqKz5X+FLRAl58le+jui+kTBALMcgZ73CDBkpN2/7+bfcWOhwUyCEAjQTcAVhKdjkPc2RajewKyu/n1//qJcA2uhBMRGXQOcn9U6JIOjXHQqSYOsVoQp1HNgAvz8yny80H5PVz9H6RqVd849WtXQ/zA0Ow2ayGLJ474L0G79vvbulwkJi8BGCg4S01SKqofoNvSIC+5zkhFUupV8rUTpJN06KpaBkFQm5M1HlkA3AyM5/u9Zl38zrk6f0iU6/4hmscgK5ISUtCTowyDqb7UxwsqFJW3fo/vbuIBJEZ1YRgyHwQKNi0KEl1OKTCZJdxtPDn//v8ooaDaVgqFyiTD2IKfcjZS4Fo+7g+HXOPv84jG4DIzKfLzQf8KVfI/FNKrQ6h94tfz+vOA9cGAAbrpylY2SDlVTTt+uCnV3/V3a7DQQAysJAwobZJgUXi78Qayhd812WeiOAZzEyUiAkHMeu5BF5FwZQAWLPwknkLQy9CrPMy8+lIHZFzvN3T+YbV+8X7c64OHHix74V6zIxB+RJ0wQ+UU992tYoFy3fcXcTDxQkoPsCUhFIczKVCegSg5B8A/PILN9ZwxBSxtiKiUAOi7JW0dLTustF8AGbm0/1o3vjjnSGdj+lYlGwdRO8XN+c1wABIoHk6k61yuSCJITq3jDY9Vx0BqK++uwAfX6JkI/hME0SC1EGguiQ+isqcQRLrF6/0jO2w+6FMnZhyZYsQ1W50qOHgPX1NXndtODsfgMwHzMin+0+ZN0S9YOllMzWfLwKQSS396P3iY3kNOLDPM1y065H4gOW3p4uTDkB8zWdb7FgbdDhEgJkCUDRvogTmd/vPv3BVAUBuvylNzAAYi4hisVQnEHoIqWblrxqm4Mx8ujfljT+YjsWBYgIOc0oJPsq1slCpH71fKybJOEoAuuVTRSCnYlmU6P/Z4iSJEcbLv+Yu9/1EAh7JKEXDKxq4ChUiKymRbwjgHdcUWTARgLYXHSr2LOU+BV7MVwzxwOfkOWybYAGZD5iRT0edjpxD6VhcOQ6j94tP51wdOHBdMeXa9OqWRcmWXA1XLUIUH6zyCwlAs3z+YBkfs1u+VIejJEF3ckrjI9T0y/aMA2+/tgAg08VURKT8vbKMUgAMIGzzAcOi5HknHQAz8+l+MW/829KxhtH7tTz+jIMAJPCYMULAWd6fvi+EY9ouoZBM/Kx/4LUBgFLgNC5o16FrE8JJVJgkiFhaQQBv3+dVbMrWVsC8UxFRkjjaVsW2DtRdOJ/vAyohVYK7A+bTvTdj8HlqTMcaRu/XxHkzjgNkIOWuDr8jnYYDKDutgpUhra0uAlAyCCUAK8BXcjBXgLCk/h0D/hcByDxFAdAzoFUqUBYRJTUcMWdPP7ONL6i5bLQeALJRQ+bT/W7G4AuAOXq/lsGdcRgAY+glLkYclJVTsa6ptCX3uQjAKINQstFrAZKIwWxQIhIJuovB/Nx+r2LzFCwlj8Y0evl/MYk0kieVtcvrwGUnHQCVjjVkPl3mItQsIPuElx9G79dOzDgMgGkAWlNyBJn8xKprBRC+zgEo4LWRgcdVcOCjjlNvmx84DrzNAahaFZWLygKWxUNibIhTcPD9BMLLa65bzreAMSGVoXvJ/Cgh1WUfO+XTZS5CDYDs9GH1fnOrIDcAkABTTDCCLYK0Cwi/586WcKJUiEpC8CCBYDsiiSplqUIUmOjf+o2tIiKVUJbgU5uSWl4DWwX4+PcXnrQATBNS+8yny1yEopdcay+930y5YhgAg+9n2OoUeI5TdQer+32fdhmGoOBZanBo+g1yEKU4dYgFSvqB//vZBIBt9RshkTbW8ZZZ2hUgvDL3iU3uux4LSBM0ZD7dPRnTH08VAIfV+2XAOucQAMuVcKfFSD/+IAABsEoGwYAoHZIKEEYxRIHwLS8pUuhjFVs6/ZZhIVWyxVKBBIRXnbQATBNS+8ynI4tBzkEACv+chlUVIKE/5cRGsWmlKfIzudc3APLQSlg3E2OCyVRc1kpU3DgBmKoQsWtlBcswjPu+nfTYtBL+GQdgOf16GCZW6pXlBCqWSgqJypoOAFfXXDifbwFJLvi5HAjlnUsiIe6AjOp4iQNQHRlT2PlgJCUbbc2s+v/hFwFb/q7gm6HlYpBbmTV2sscQyy/qFBj2v0/cAdz/HGD7NDA1AUyOOU+1CwWOewNjKj6/O03F1/WuugW4/XJgfBoYmwDGdH7IxB5kLPIB+I8AfNwZgga5ck2fJbEm8V9zNWPfrasbgMuPAcuseJ8Exsb9FdBhA+7gaQNKB6TfcgCYug+YJT+g89aoBDMmIMScP12uTKj13uDv8zsKig/uJ1uQOsnojm3qB5P5ACRBH3OhPuzzRN9DV88HqQLEWPJnvTy5nm/t/1s4BcuSpRZtGAu4fi+wtBVYEyccrYwn6hF8/FkJp9bKxAKVFsn/d8urgbHPA9NPOEOWl4+2cfoFHhfVrJTZPKHSj5daOtup6JyCpPx8rHWRVQ7WOlrYCMx8AHIzlxkALPD9c0VB+x/A3E/+E2fUYHXdF7KTGwdvTd0AHP9r4PgWYG0KWBdfsBdsMPfPrKKsoL9XAVLAvO2fFylCE4cKliyrDVZNcGS1CqEYhWFiAZV+XntaURdTLmpCEbpchTYLqi6NrkMCzLzt5Xc4HwyJmmkJ+Z73jQOh4NWeDUZiK1K08f0EXt7CMHVawIk7gaVpYJUA9LI1Ao8bzKX1cytoFtFfpdCIWz7rgzHgth8u0oPGDwETc8CEMySUzFaikgtlpW1Ta8JqNba7lVljSRgW+Q6ZP/57WQvj6fydBjXfAjKbgEvMLwWCvhNoipgNpnQshlS4IGFWzIk6ylWwAz93ETLxGWB5ClidLABoIOS7pmGfG+33YAG5mND0G8F4678vkiPJczNOAC4UyQm2N8w94kirFlfIAl7i402d6dbPWWAtrsjOFiuCvAJZOQE0pHTFsckHYDeCvhNgipQNxoAz8/8IPr5nbvH2jd+6AThJAE4AqwTdZKEBLDoDgU4+YVkPHIBoPwareOt/BkDexsMFAFnbzNJYm0IDnVwbt4uyur1kwL7Tp+iZM/08WT9Rc7DHUmuYTr/x+6o4ovvu9fjBbgR9JyA+omwwxvZI5ULg6ZW7y9FPf9QNwKm/CgCcKABovh8ByVy/UCtJq2f+X1yYJPGU27lIZLbuEWDsWBHesZeDz4iURLUWa1TE47LqK12fZmd3OXidFctqm92KatVs1jAEsNv6sdymaa2g8+xUL4I+Pn2beCgbLGWHI/h8G3oTr45iK86POlbBU9yKI/AcfLR+ouQwH9BfmmbLlTHboOnZ/T9+5vaf8FUaAThXsFOQ45mUcgZCWTAxe0UQ+urYMO1/37GtxQmoLCBtRSp30LrDp2SFdzYMgk/R+VNwvwR9mwQDsaspGSfJgYDYNTbp8psCQFJxEIBkQjDrxt8dXCUIY+COH5MVFPi8SOn2n/QYLZ9Gp0cxANIP5IvAkzVzxivRydnKNzBa8fddM84b6AFyAriMF2pajk9kYIeoClXmA3AQgr5NQEHMBqMVFMNaIOayNRL/vhlH3RZwmhbQQUcAasrVVGz4EtjCu/3dfb/ID3PbT7uKAZ/MhcIC0vqRTo4W0IBIEAmEtFwCYqjW03bcmdwBYeoWgetUbrR8snrloiR2drpACf+rD4D9EvTVjIJu7HBV+781X752Czj9lwUZkTEgcPoNPp5Nv4oBRhCG6dd+1DkMz1JIhR1BAHJ7zwqO3fIRRM5tmDK5CoQKsSgOeBYBKFZULTqcB9r6Ni5KYmd3WKDUA0BlhNLM8EbT1QBXBU72aI5ZjUcVOxz7WLkQ8d37vsart/uA6RcPsxNSAtAXHDYNC1AEpf9s01kKwuBwGU7HgVt/1jtD1e60fgQigSe/j5bQp+KYpGB+H62jT7P8/ZypBIC8Dhcx8eY9wF015abhmnoAyJ5WSrKeNgKO9SHxnT/LSasJBim5lRjWBEIVeROInKL1qunybRawLgASdEy74qjaNNzJCgqEEYzBGvK0297mAFSHEIB6ebKDgc8J1ksmV8t29f1en6L5v6cxIK5iK6Xne/5jCTiFcTqVn/r/tWDPWwXnEPTVgIKUHU7ljASawKefIwDpMdRxRB+wFgD+RREDJABpwSzz2c0LfxczVjkVKwaYgtBBezu3SvX08d39P5uO3QKahXMQciourZRAGKZWar/YZ1xXRPe8wQr2AUK7TvbOVTZBXx4MBECRnConUBSFEXT6mf/TK+/qmzAF/0UBOPqBZYF52HrTFCw2LH5G8UCzJEko5nZqmRnPh/uCXmpnVpDTsIPPwKApOaSA2QLDLSHf97iPx0tpISLfz7bl4iFfsUsnj+HZWEeOYDCDnDmCvZkEgedcCjxGseIhBYt3vx049HwMLRh8gA9gh2MoH9ABqKJzxf0McO7XlSAU4HzhYYFq+5D7hwBu/98OQLlIBCKnW39SlXNY+nqeiq2dkQg+gnGPb9/ZpT0lq6MV5D96gLCwgDmCwbdnCvZmCgY/dxy47xxg5SWuUjigYPHFbwA+fyGwfr2rXrMvPB+vp3L3GHCgi9JOHQCkRVPppeUBigXLFymyejYTB4YsgfA20ofRAlYB0FfAlvQqP0/TsX5PLOB5DNu471cmIwiBaRww/F01J+mz2pqChxUMZvpJlmBv3iTocsW4dzewfhkGFix+2febXDAeJO/YEILBB7pU1g8LQFo98QASVGYNQ6DZfEG3fnEqrgLhbf/HV15anbkFNCvohWSl9XPQ2XTM/2s3I4DwPIZwBEDfgitH0Ek6N6x+u/iD7T4g/YdBBYPpWHEaHlqwNw+AQa4Yj54JrJO+aQDB4pt+oCAyYvOPEIQDCgYfeF/9U3AbAMX7ItAlVtAspKZdz5SOlvA2pstxjES3wJ+92NgAGK2gwi78QoVfEhBeQACqNNP1RdoA18kKdgDhxkUI/zKIYDCnqyzB3jwAJnLFOEIW7QEEi1/1Y21ywVglCAcQDD5/Efj7M4CVrZ5AKlkhxeQUaxBI4nvFzxf8IfCVC4HV7cC6ZEX5nen3VX1vAGLZq8ysrvHY+QBwbGfI2E6JpLvdX+ksthpUvQrmX/sVDGZVUJZgb17vJHLFeGQcmCdVb5+Cxd/5xjZ6QzzMLOQBBIOfTV2Ps4HFHQ7CLQUQmUrV0rgKJMsCjsxGAqTn/hzw0EXA4tnAyg5gbTYBorKkUyLnkB9YVhTxu+kT13iccwtwdBewPAus+b2ar9xJAafqfgMQO4dh+J9+BHe5gqZZZzYok1JJUcpaR6bp93P+W/N6p0KuGIemgEWKgPQhWPxdP7NBLhiHKYHUp2DwpZ8rLOD8tmJQVplOLxAqmbRKC6EDYC7/CeCRPcCx3cDSrsISrs04CPm9ArZk55UvKAspYLqPaPdR4/H0g8DRHcDyVr/X6VabLHk2PhjpPVZY7d5xwF6CwS9y/4LbbVyQsEKIufGiKe0p2JvXOx3kinF0GjhOQY+oNRtljji9TQPf/fOV9IZY4Gq4D8Hgy/4W+Oo2YG5bUUy04vUcLCqSJVRWszJbNgxSmMau+q/Ao2cBR88EjtOqbgNWWaTkIFz3YiWrF4nAjtN0nBZrJnU+/8PA3CxwfMYB6LUra3oglL0tps6wlVha5rLiqd9AdDfB4Je6U0s/0BXTDYh80Sr2FOzNA2AXuWIszABL1JaKWq1R+nwGeM17OsoFY5XTVw/B4Cv+Djg0C8xvLYqJCECzgsxmZlq9T8e0XGUyaUizavPtxoFr/zvw2BnA0Z3A8e2FVV3x6c4sqwObckeyhiXAowUSADhD1XhceDMwx37lvU4XxVN2n3rJIocygkr/Vbs7fe+EdBLcfaXXQ3IPWIrpBB6XlnwpR76jYG9e7/SQKzarxM7qJFj8mg8UarMV9IZ4gvNDD8HgKx8HDs8A8zMFAFnPYQPDl0Co2g4fpDZLqKCxT0/7fhJ4fCdwbFvhRiwRgJruCOwUgCpeCvUjZmEFxhfk9W969kW/B8xvKQqnVgg+B6CB0MsI7P70AHgmd2n1NQ0rv7FvALIlVYK73MnQCDLThSGZoDpuP7uCeuX5n8zroB5yxThGnQ0CgyBMxY63Aq/5aBHG6EBviDlOLV0Eg1+0AByZLgbl+HRxnZXJoqqttA4ODovlJZVuSjTQFtq+NwNPbHMAzramdVpVs6wEoPtdNg37wJfvsYiJP9NFqvHY+7vAwjSwxAeNxVO8T6aNVRRRlT6hHrJ0Ovaw0WDJCKng7g86APvNB9wg2JvXO33IFWOBgn8EIf2nRLD4tbe1+AU7yAWbZeskGHwVdd2mgAUCcNKnJgLQrZ/V9/Jnn5JUYmnAE3hCmv3+t8AWQfSzyPK/POOgJgDdsgqA5nfJAvLdLV+bz0kK4RqPZ3wQWJxyAPqDVhZQyQr7gyaXI9axWCFVAGLvRUhV46PgLnUWBs0HbBPszeudPuWKsTRZAJDTo8l8ui/42juL5veQC7ZpsEow+OrZQlqVVuH4FLA8WVyDAOTAmHUQCAWQkOlsQAwDt/9/AE8SgPQpNa07+AhAA6HLXbb5Xr4IaAMfv/eGvP5NzyYA7UGjBWTWjh40v9fSyscHLtaxhJWxFVsNNAXH1khw983+DYPmA5aCvXkdNIBccemfceooAfhAAcA+6A2xLuAGucxrzgKOMexDfV9OwbS2BB/BEoqLSrBoYGgJ3E8qLcIEsP/ngCPuUy7S13L3wb6PU56/m/Xj4Ps0TKCXQA6AXuNeZY3HMz5QANAeND1kwcKXlj6wOZQ+b7R+Pi0PD0DeFAfk590CKg8qncfoFzIRVWVqfFfBhgn25vXOAHLFWCDbvPstBsJZ4LUPt+jdesgFg+qVptWq11bg2gtgfuLiRAAgQeg+oEmsOujsXb5SsAoCIN/3vx04OlNM6Yv0tdx1MKvK7/TFjVmeCD4HQQQhf159eV7/pmc/kwCcKABoeYvR0oept7SEoZQ0Tr1lPuPQFlAtO0nyAcWhpzw/FSjFzGjLx+RGvxzoSeC1hwsA9klvaFN5FAy+9mJgnhaQ0qqagglADo4c9AhCDpJPl5ZommQ8738HcGw6AJBW1VecZv0cePwOY0/wl1lAD/WUCx0mMlDLr8bjmb+Dwp3x4nkDYbD0thIO5aNtfmDi/xGEeRawxhs7Vb/q2huABQJwAlhyy2cC0xoggjAAUCWWAkksOiIY978TmOOqeqqwqAx3WGhHK06n7TDwOcAV/iipPAKjwgrZm2o8nkUA0gKmAHTrp+o9MTrEYvq44o9pZIOtgmu8mafCV72YAKT/RwAy5OPOuVlAAk9Oule6xQRTWUKlWtkU/IvAHAHti5oIwDK841ZPFtCmdr0U8PaC9hVultd4CIC8P2Ztt/m5/qC11TJXlJDGGpfGAmYODgFoCxACkLpuWh3KCgqE8gNVZK4KtxgjJAB/2X1Krao1rfN7CWZf3LSBT4uAEIyWBVpipL7GgwA0AW25GbGENBTRx3rm1M2w39mmrFVwjTd1Kn+VAZALEE5LtIDyMWUBvbLNLGHgd5H/V07BDp7r3uU+Jadgn3ptxekA5MBri0/Wp4wzBjDbCnkMWMqVpE8GJwLQqvfc0pqbkVj5aNk7gbCxgJno30cAjntowtXNaZ1suvSKNhsYTcVKmw9F5xGE+94dfEoP+JYhD/8OC8eIPUsUHokVVKB78XszbzAF4Pvd//PCKVGIpOAr78mn4DZOm8YC1jco+w6EFTDDPJqeCEBZBa5GffVbhmQ8DtZW5TYOvPhXip0GTuu22lTMLSw+aAVl9QhEWjurI/aQiLJkTMLsX9R3r/ymZ73fp1+37OU9hunXSkdl7T3QrhKCtlCM59k2i5CMMSIAGdqxEIwrmptzTsCEut5yilKoJLAcxCq3fe8tLCDBFwO+tKjyuxSCMdYEXoeDrHcHvu0tTwLzmwHA4N/Gh6zNCqqeOSxC2lb8tQSiMwbuqXIqAcjFh2JjBKGJyShQG6ygVbfJegULWBYcMR3rvb6oCRaQwFPgl1M5rR7/JtBZOIZWx/0+s4QeY5z/1/X2tFnAxPpFELaVkdLN8MWGVr4pCBsfMHN8bmTKfCjZ0Ncp456/x58zLzfw6Qf3ABd8pUgEYmqk5bGyek06IQl1bkXScnlN/u8L24Gdx1qVq91KQvrpgwaAAw9p+wnXPw1YjyWMGtDo2ASOFGMU7SIEUzdYD34vMPmXwLbHgdkFYAtlGiim6DpxJtvq9LtlVr/aWKEB8pUXAOOPAFPzwBTZ9r04vdQ9Ts4pAZ3cd+yHxgfMAOH+vcA69/9Uxijmz/AerYpdar1lNSMYzV+vWY/34I8DY58Gph8Bpo8A04vAFEFIknIHohGVR62QhFRSYjQE6qFri2z3iaPAhHNNlxKwArI0Q1IAxwfReacbC5gBPp66/5ICgLKCtqnsrKKlrFZUFPKOr7osMTtdsxzqQRZ93Q1MPARMPllohUxRqkEK6gShOP0S+dY2hlRv99y+ovRi7IiTnTvLqmg6xDPYpqAUgRgsoR7MxgJmgHD/c4E1FXu7FRRbvEgd7evXWlbPpp9EgUjiJpwe6zwOMlvpAWCMVusJYPIYMOlSDZRpoGiNxKzbdIQlXONMWJbGtw4svdgz3El47nzTRvPrrKptAJT6ZrzfintvAJgx4vsvdQvIXK5VYF3sUZxmJUvgA1FOvwF8spKyBtM1y6EepI4LqVMedbEaTp0EIKdPKh5FqYYqSxgo2jgFr13j6XXHnOiSZOeBVSvyC8qC2r05FVvVw9cAMAOA178AWPMp2LJaaekiCPXExwHw660n1oB/niGQazwOkkSepbJ/72I1x4CJ+cJ6lYI1riccrVicUuVSmIW82pkwnHHVOKbFsOozQGkFkwewnBES37ABYMaAX39ZAUCCb82nIlo+40p2gNnvsoKunxH1xGwA/LOzdQOQJPIuHzV2GBg7Cow7AI0l33XfjOsv6oVodes6ISbBsAZMX+kJxU56KY7pkmFVhOciuvTzSt05v0+ryuT/9gDrZNe4wPMsI7VJP3GcP7gUOOdvgL1rRYJ0ZI5IV3hV4/wrGYPPU3/AiRhYusy2K7mU999P+z90ObD7LuBZK0Xdkeq9NSX2+o4HLwfWlopFCC0fgciBMtAFC8CGrYXVoVjnU2G7rTXrzh4kfRzLY1kyGwBoeiGcPiXb5eAzdXWnazPCSScb4j3xfmav8Cx2p50lAMW0VXINitCogl2r9H2dcctWwQxQsn6ZTBbMNtcgdKIbiZj51VcBk38CXPxoQcfCUg8pjcYgZScw/momACnXyr4leBhs5QaBTHpf7X8dMPYJYO8XgAv9e8QJlAZZq8D4xSuANYKPJQn0AR2AHKy1MACKe9nfFI6IEqduEWoHIJ9wlsVKLekoMCa9EAegSTYQeM4TXco2SEMkAHEbBZoj4bbYtdyCVrFqGXgTSxgXYTZeHLi9AMjEQRCVUXP/n4KUaaT8vVTi+Rtg7GPAuYcAWlMCgUVkQfJ2Q12yBvPXMwHImhDWwf81imsTiLSEvHZkr+jY/p9CQRD4p8DOBwteItai05qn31FFdfLlFxYWgCDUIkRkj/TxbCEi/89jfPZ3X2VqYSJQbmUNQY3HQT7hbv2sLoerVwKQHNEEoCsm8R4MhPRjXUGzVEIKIoY7yaEYuY4dgGb5RXruoSgtSCLLarkICQ9f6QNykGjFdjsIBaI4kGlt8W+Rg5g0HJ8qAp47nihAzFpuWtPIMBZJlASILvR6fQ0DCVbJCkJOJCqnk4pGpb99tZ8MopyiKDX7WWDiwYKXiEQOehCrgKh+eJQ+EQHo1Lby/zRlyf8TIbf9XS5ftIb8I92YugH4ay2pLusorl7dAoonWtMwQSTdOFuQSLTGHyIC8kxSIQuA4hwU2WUAoO4/grBcDbsfWElSzg+JCoYDoEGM1ixSkHzgF/wG7y8sIa3J7JPAGWuFJSQIaU01iJHUiYP4e33BrPOHmG/JMaOfTZVYRhwGav87vWKPJ9/rSH4IOGO5sITqg/ggxXs4TOaBAECbeoOsgfl+DrQShFqcEIhyyt0MbMusEkx76iAZXKM8BvXiZAGlF+KaIbaadYpem4aDgpJZQz6YJABV5VcHAJZ0v4FxX6KG5UpYs0KnqjhRuagEVgPglYAl9ciHf8mdUrJh0Qx9vkDBzBywfbkYQIGwahA/kglATsHsDzKA0BATiPyZ4NEDwIeoa/uFYKKXL2f24nQoIgd9R3yQCMTFqwIAfdBWI7+yB5ZLECYLETd85YJl+2YAUNosLIel/xYlu4Jsl6bhNhD6it4WJCvA2Zc4Gxo73RcgJeOqFmGR6rcChLYACyGojmEYdj59KnZ+tIQRhH9IvWA2hiREjDeRI9Cly7fMF3EtWRFawhQIf5IJwE56wdTIYdt7tp9ys1K8JnoJvod9Wn682PNkP4hUy1ndWgstAtBDMLYN5/6PAc5DGNoF4SrZfN+4+IhT8jqwg2Cp8ThIJ5vfSWBXAVCrWN9SMxDK+skaOvhoAc8me654pmUB3f0wyt+E8FyRAGmPlOEoiSD2qgvmAKoOm52fAuiTDHSyIRxx+lI0QxxADubfF5vffMmSajrWlP7nmZ3dSy+4r/ZzAUEHnQ8R70HsXlK+PgJsW68G4XYGZj0EY2EYATCAT6tAhmE0DXcC4faapcwMgAIfLb0kuzT9Qmw5uwAAIABJREFUSi+EfeALkSrpBovbrQDnkm8wAo8/E3i+CCsZ98NCpAp8cUekZyBavI4ET/TnaAk/RQCyAXy6uNSPA0i+wMeB6ePA5HFgZq2wpNGK3FUDAHmv3fSCe7afX8CB4UNEEOolVi/3obastNwJ9cO5BOBKEQMsAcifHWzRAigWWAlCn5K2bQYAOe1KMjTIR2kRUhKVS7IrLia0v+3xwHMZMCbYNP0KfG79zAqK5DxOvyEuWu6VD5KSHy2YAEQAfpaRdl5UkuUctIpBnCIIl4psD03FtIIP1ADAlBuJM47EqqUX3LX9kSBQcuuyftK78xUkHyQ+RLqHZ3Fv1KcgLj5kAQ1s0Qo6IA1nHhNLQzA8ZxvBXuNx8DcS5UYpNnoYxsCnUIqvZo0F3wPTMa7Hv53HOJVbS/l+5bumX7d+5WLE44hxIRJB2NMCqj9ixwuE90svWCaIA6bAp959EKeWChAyA0PTOV2unGMQveCO7bfqHbcS4rJR7Ewqnw5AWhLuImg2uFQAXAVs8RGmntW4+g2hB3P79L/EJ9zGvqrxOPibiVihAOgrWQOf/EBfBcsPNBBqW9Hv6zzGqFzmoXz3B9AePgXiq6bgiv4YOB9QHS8AfpkAFMMjrWAcQA0iO9XJiQyAnos2vV7ESHOOQfWCO7Zf7F40mZFQScRKAYBaSU6vAVcTgN7xXHiUFpDTMK2dFh56912BTiDcvpkATIXzCL4g3WXTZ4jpGfjoF/oihL+fx+0yWUABLwIwtYKKIabgCzHQvi2ggBKn0McEQDaKT5cGkIOo6SuyYzEfjQB0EM5nZgAPoxe8of3sgSqCQM3jkdFLvpRvR13+7UVRuhUFSavNO6otwp88ZZ3+t4M6HLtch6OT9AG/q9cmtf//gV1JDYcnQ2zY6/YakfSrU+Pg1M45NqPt3IEtoM7WFHokyrWKkooglCMWLYjiUXMtK3g8Uzd1WL3gDe3vRRCoUEYCwGtYFxxqgA2E/jI20F5hhmQod98BHNnlxOTig1aGiDanO21yV4DygWuB8YeB6fnC9WEtiKVVKeE0ZGiXWczeJoWMIig5a9V5DA1ANoKDeDylZ9NSXxyAsiKawrQqmCv2HVf5e8aRoxfc1n7xs+khItAUvojvyWryxVcWJZksVSyZoQRA3dcAoHzax4Gj2wtu6FVKM7gMgti02jbV476oUJJs1j/AbA1mQ3Pm8eTRsoZDtR+xZKCiEKmMXTIeXHPGdhYArX8FwG4DGMEnAHIK4yvT58nWC2b73cexaZgWWaEKgU1gjNbPP7PvOYGsUSBkv3hBtmRWNzxjTk9RWktvxp6POj0vARjY9sWkFel8RWxegjIF4RjwAOnZWMPBTGjqvHmszxJOBUD3xyznL2bqROvoP3N3q84jG4C7M/PpcvMBef0cvV9k6hXv+2Yno5QfGArRbaCC0mWv2YtF3ecerNDhkNZIIsXQRv5dlTtGADJSz2gEE1EJQM//026HdIEZLC8B6A0tk0g1Ja8DuzJdphS82QBEZj5dbj7gxZN5er/IZI+67pscgE7QaDOUMyC0Wb8+gXjuR4F5J6YsaXnFhBoAGEVvUhb60jISgCQnoh/OLBgvIrL8v7DdFkEYM5dtNg97tvz5zJqzdfIBmJlPl5sP+DJP5xtW7xffnzeh7H+Z+3+RpkyWT1YxuURJYVtx6T0fCTocouQV85VkHRIGegEuEv/YKpkA/JceVmL8kv6t5/9pu62tfiPWcFQVEa0DZ9WcLJEPwMx8uvfnjT9IgZyj94t/ldeA/S9tMaGa9SNdmsIxbvVscVJ1GScoMt4UPwhAsmMZ0aXzQBsvdGRBjQz0FUpEJRAJQOq4KAnBdz+sfiPJ3bOYn8fsykyVWMfiN3BOzckS+QDMzKe7OW/88aqQzsfE5kH1fvGjeQ0wADodmVGwOeiMsUqHrGOnS4UFy9P/wAEojkEnI+IqOIJQNLgpCXhcmLAtD/D+kgQE235L93tj+YBqgTX9BiCeW/NedT4AmQ+YkU/3sbzxBymQuZhm8g1T+QbV+wWFdjKO/Te2mEFNlCb6gPF708VJ1TXHgKd91GnZpDfi1k/gM2vqU3DUnCuBmNQe3P9vw6pe229KOvB0K1k+ZS+rnrfM2AlA3JMZtah/EZKZT3drxuDz1O/yxAwu9JgJxr3lQfR+8aa8Buy/wdWQZAVl+ZzCrG3q9c/YrkmHy3IRYryAAqAkEBIlopJxNNUbER+fA/H+/+AAdP9PmS9dazicJybm7mlB8nR2dI1HvgVkOlZGPt2nM29GCamcGZjAwlQ+vvrV+8X/zGsAAUiLVPp/wd+zaTMFWw+/kAA0GQQnpCw5mDsAMIrcRB5mC/+MAffTwgfwKY2KfmCZ6ZIkUShrxXxBX4yYaV8Hzmcn13jUA8CMfDqWYeQcSkhVOl8U6uxH7xekrsg49h8oiCENgC5TUG5vKxxT8f2aRtOtcAKQ1s8soPuOVUIwpchNlEEIOyNSIrrvv3hwnckWIZPZsnbcDyzTpvg3lU8mpZQqozyfK74aj3wAKh1LgrsD5tMxiz/nkGD1sHq/YNFOxkEAcuW7oqmXlisuQOT7VV2jwi/kTgj1RkoZhBje8Z83SCAEEJZW0C3gff8tADCt4VASaWIBK0HI9q8BF5yUAMzIp8tNx5Jg9bB6v/jdDPSRns0BWIZeUitIo9IhHmhXTvzCPQddccnZ76U1V/IvC4SBCFyg26DFNg7c++Mhhb6qiCikT7WVUmr6lYn2nRKyrdZ51GMBlZIc07GUBdMjny6XCiUmpA6j94vMZbgBMFo552pu27PXAqXTyAUQcitOQjAm9xX0N9pIwIPmSCmH5QuPqER0L4kDYgp9zOUL6fYxkbZcFceyAreAF3GlV+NRDwAz8uksnT3jiILVSmpWNlhMze+k94vMZfgGAPJeHDjpCrgM01Tdry9OzvmYAzAqLVWIwEShwzbRwwSEn+MqP6bQK5tZlWyhjCCCsC19Xv7gOnBRbgp7cu/5AOyVjqVMmA75dJZ9nHF0yohWNlhMxKnS+0XmMtwAmFq4imnYbrEqNJPc+9kfd62RKh0On8qV9hXZ9askEPgAfI56ziocUgVbzGT28lEtRMoKtg7lBHtznfZNA+CQ+XQWM8k4uglWK/NLYKzS+8U9GReXD0g/Tyvh4Ne17Yb4Zbr6g6y7/aNWcoPpjKRTsJIags5IJwkEAv6en05S6GUBfRWsUExZyVZVQCQwrgN7Wfdd41GPBczIp8ODeXfTSbBa6YYxlY8/p3q/udc3C+jTbtvqt2oadnB2m4oNgMn0W0p+hYWHWbwg9yU/0Kb9EIy+5y2hiCit4UgKyTeAkN8Valk4Le/ldlONRz4AWWBRM6fdIPfHstw/G+SE5rMnVQ/kA5AkLHS0ak7V7reXfhgACaBqDtD3e/nmc5k9kA/A80JReq+U38zGVp3ObJo/BvAOD3dtwiWar9zEHsgHIGlFubqSx7+Jja36anLLcDvvgwA+NDpDfILv+qlzuXwAXuSjrkKemlO2e3U1uWUYnL8dwB/5e2apca9LNv+vsQfyAUheX4VguB+mzIsaG9ntqxhF4Xbe3QD+n7/uHLAW9wQ1tblMRQ/UA0CaHC7plXEh+q4T0OWcfhleYTSHBK0EH/mi+fcRuKQn4I6fWpeoB4AevCz3HOOm9yb3F5mBlZBNclYCj1aRfyfrbgPCTR6AzK+vD4CyglX7jpmN7HY66d1E0ctdIrEEE4wEIMlam+Pk7YF6AMj7EwAVbU82vTerCwhAXopJN9zVI+AYrOeULLZgErY2x8nZA/kAJGWr0naUWdFpy2cT+oCWjpdjLFxE5UzYIBBpEUX5nLnlvAktb76SPVAfAOUHpiAMm96bsVtCAMaKALICMyxDq6cXfycA+b/mOLl6oF4AiqBRIEzBp7/X2Af0+fi1XIioMIlAI+AIPIGPmeROWV3j1Zuvyu2B+gHoFfZiDS2lC0LiY52WUADkQoTTMH1BFSYRdHoRfKSu5v9qrizMHYPT+vx6ARhSuDcAzzmDo5ZGHT1PAKYMwQxME2jiSo/gEwBrrq+u41ZOy++oD4BaCcsXTPiSI3ey8s4KGoG8QwCMFM+0ggQhLR0BF19SXuD/ayakz7uR0/TsMcxg3SjfqWNA0hsrga/ojaq/8WPcC+YIk4Ke4CMSuB2XVht1Oj8zIfXlU8BtU8DhmYRXWdfrdF1fgr3+S8At48CD04DVjXQSDO70PTUnaJ5uOCwsIIFHSSFy1pKPWCDsZxCpw8UVgKSPxLXM937OzxxAljzcPAbcswU4Qh4V3UN8mKoeKm/bu78IfKJQa8VD48CylHQiL3O3/qg5Rf30BKACMtJXjXKQcfBSK8Dfqc3KVCwuN2VFGRnm/yKZtq4Re5ifyQQgM2A+BeB3GHaZBo5MAIue0l7Kt3cC4xhw+5eL7TuCkJk1jBtyerbUfYG5ExjZ/pqrxE5fAOrOq5SmowVIrRp1IyT2R6+fg0bgVYG4CsyZe2UsaiOGKXr4Sfp9k8CxCYAFSKyvXeY1o1BxQux91yMtfsHPutgnnyUuUvhc0ZsgUXib+nVkq6+ZKaABIHsgVZnuwD9sVo66rrR4ImdhLGSQ8zPL/JgBQxeU1ouWkO9PTgDzbgmXxrzMkatl3keivfG5x4r4IRcz5BfkO5vEZ0kgpIfBZ8yKjlL17syy0tMNcOn9dl4Fy6dLFabj1Mpvow9Ify+I4Nlo9Xt+ZqU9VdJpqZh4QDDyxUyYOYJwHDg+DhgI/WUVZl7aSEt93+GO9Ia2iuZKOfA7lhp9JpvAVy61w2mOwO5hmCgMHC1H9O24gu6UD9jP+ZmbtLRaSsei9SL4XDPbAEh/kGQ/pSUcc0lbApFWb67lQUhpVnLBsoKqqZclFMmUtrxPcwxl3X7vOCAtYLSCcugFQmqhdssH7HU+RznjiOlYXA8wqkOfkItTAom+oKygca4ES8jY+N3z7fSG4hfUtp3ihUHruVSsFy1iRvNP+1N7A5BdJACmVpAgZPhGOyCigEjlPLudn7kvFtOxuB4g6OjD8UWLRkCZFRwrLCEXJQQhp2K+37lQeBCRX1A7KPQto1prFEmSYn2mB9EAsO+kYfk8KQhZF8yjVz5gp/MztyOUjiW9bCUhEBhKRCCgSis45uQ/PhX/xfFWMgOnWu2gxB0TF/o0kEZ/kCDM1Ts+3RHYnwVUL6XhDFrAswfIB6w6P1MrTulY0sum1VICglKwCEACqvQFCUK3gHcsFQCM/ILayqP1k9JshVqrncMalOYYvgcGAyCvIwuod8YBJQmZpmGJeyRwkGw4n8jJOJQNw3idLFhMRNB0SgASTJyKoy/4ieXCeFfJBUeV2SoAclFyR0bbm1OHTUiN0/DTAwD7zQeM52dqj8VsGEkVE2jKetG7AEhQ0frJAv6RC0trC1skl+IWlNinGLbSaZg7Mc0xfA8MbgF1LQV1z08A2G8+oM7PVF9Ms2GUE0gQyp+Lwu2yagLgR9ZaYpkSypQ6a6Q2DCqzpkvietXIFdoZfuieGmcOD0DeP0HEbBhNwYPmA/L8zJQsATAKnguEqS+XTqkE4YfWWwCUFZTksYAYwZfIBeN9Tw0cjOwu8gDIZqsoSSvhEeQDiiGYFoyWiSDRypWgi69UP5sc5fIcquSCNeXqe2X9ZAHfM7Khe2pcOB+AT41+aO5iRD3QAHBEHd9ctuiBBoANEkbaAw0AR9r9zcUbADYYGGkPNAAcafc3F28A2GBgpD3QAHCk3d9cvAFgg4GR9kADwJF2f3PxBoANBkbaAw0AR9r9zcUbADYYGGkPNAAcafc3F28A2GBgpD3QAHCk3d9cfOxqYJ2au9RdPtdp/khoEOlglDYT39V1PzQFXLsMXAlgt9PCxJKPbufyf8/KHIPfBPAZABf79Xc5XQ0ZQ1Q7360NbxoHrlsDvs5ZRsgo0une06by6X1mZvtP99PNAp4F4LsBXA5gjw8EGTeqaGF4QhzQF80CX7cAvGIdeDYAfhdZ2sTKUcVrpE7nd31N5gj8e2dIo2osk7NZpMdK0Z19tv+bJ4F9K8D1ACj8yfNSikHeg+5Z969m57Y/8/ZP+dPLKZhP/rcA+AYAF7g1oRUhEMUzFMt6eSJfX78b2DkPfM0i8GIAX+uWlAMppreUUErn8p2gzTl+2flg/sDbTkvIOik+CP20//mzwAXzwDcCuNTPJeFXpEpM6QEjIHm/zTF8D7T5gATYNQCe69aAloRTGulfBESBSYNyxR5g/Bhw7hKwZwl4vk9LnM5JmsBzUyDGAX3B8G23Mz/g9BuUa/0IiutfMkj7zwKmngAuXSvOpUvAWYBtF4BTnspIj/O8zPaf7qdvWITw6eZA0JLQEhKEGgxZhUj/dz3NzSKwbR44exnYvVKcy+mM5Km0JhxInUtrGkmzCPicg3W5LMGkQiZZTm9xS9Z3+4m2o8C5c4X15pTKW2Lb+fCx7WLtjYxzqiql29Icw/dA5SqYf6RTTilg+lYCIXmICKQ4IK9wxfSJY8AZK8CuFWDnanEua9ZTAMsaCog3Dt92O/MvnRGBtGwkqKRmMEkqCaa+2k+0LQDTh4rP88UHj74kF1WaATo9QHQ7mmP4HugYhtEKj4PB6ZQ+FS0hQahpldPya1kXTOqNY8DscgG+HavAttUCvBxInitrkgL4lcO33c7spBdM3kAuSnq2nx9gQfAh4JyVwvrxwel2z3p4aMlzH6DM2z/lT+8aB+Q/OT4EEqckWQSBkGD6EQKQnDCLwBSnYgcf32fXioGUFawC4esyu7CXXnDP9tOCsyD4KLB1rmgvX7zfbu2WG/Jtme0/3U/vKxBNAMoi0KcjkATCN3HOEr3UAjDrwOP71rXixYEkeKMFlSX8ocwR6KUXTJ7AaNE2tF8WfA4Ye7Kw1mwvX/yZn+eKnvcrfzC6IK/ObP/pfnpfAGQnySoISBqUXyAASS1AK0JfagWYcRDOrAF66TxZQU7jBOEbM0egH71gcgXSFZAV54NQtj9YcNIpbONCyh8Ygi8CVospApDuB63g92W2/3Q/vW8AsqM4gLIKBBIH8bcJwMCNMX68BTqBb8s6sGWtsIA6jwDk662ZI9CvXjA5A6NVa2t/IAicnC/aGV+8T74IQPm/AmGuBc+8/VP+9IEAyLslAKMV/LgAyIUInfnjwPQqMOOgI/DstQ5Mr7UAqMF8V2YXDqoXXNl+EQQ6N9v29aKdesUpWJZbAPyPme0/3U8fGIDssDid/pUASCvCaXgJmFguAEfgEXT27gDkuwaUg/nbmSMwjF7whvbLhSDL5TwwvdRqo9oqHzACkCB8U2b7T/fThwIgO01T1IMCoAZxGRhbKoAXQUcQTjkI+a4B5e5FzjGsXvCG9gdqrLGFYrpVG/UuHzBOw2/LaXxzbh43DKeoJwlAHqLndSs4udoCoIBHQE45EPk3DuitmYOQoxdctp8+rFwIWsGFYiFFoLGNchcEQC6e+OJC5J2Z7T/dTx/aApYdJ37AyJK/DIwvFxYvWr0IwEn/H1Opco5sveDUhSAAF4HJpQJkWixp6k2n4IYfMGf0amDHev2I8+l4/UbvNw8Eozw72wJePOJ8und7EkKj9ztKGA1/7WwATo44n45pWI3e7/AAGPWZ2QBkYHCU+XTMfGGQmYIxjd7vqOE0+PXzATjifDrKtTZ6v4MP/MlyRj4AR5xPF+VaqZLJF1UzKdPV6P2eLDDr3I58AI44n07ZMARbo/d78gMubWE+AEecT8e9YOn2Uheu0fs9tUCYD8AR59MpG6bR+z21gKfW1gNAz4geRT5dTEZo9H5PPRDmAzBmRM8BJzqfLiYjSKKr0fs9dYBYDwBHmE9XtRfMsIz04aQZ1+j9npygrA+Akqs8wfl0BCCTWRq935MTYL1aVQ8Ao1zlAnAi8+kEQGZTNXq/vYb75Pt/fQAcUT5dBGCj93vyAaxXi+oDoFLyT3A+3Rcavd9eY3xS/z8fgCQX/LPR3SOzkon55jg1eyAfgD8M4NcAPD6aDmBtB1e4NMDNcer1QD4AbwbwxwDe4UvRE9wHZG1gNSXDLlwLNcep1QP5APxzzwj9IIAPnXhT5ORc5EYCA9HNcWr1QD4AmRH6FQBMTSZZH98ZmD5Bh5g1FopiNns1x6nTA/kAvAfAEwDudnI+EvQxPfkEzYfaCXRSBluQMB7YHKdGD+QDsBNBH/9+AkAobqTADGK7Inw1x8nfA/kA7EXQt8kgrGAGMfBxZ5Cv5ji5eyAfgL0I+r68uR0QmUFoBQU8vfNvzXHy9kA9AORoMw7CdGQCjoUZDwL4kv/+8OZ1gJhBIjGDgMh3vTavBc035/RAPgD7JegjODfhiMwgoqeJwNPPTaB6Ezq/hq+sB4AcXeXEP+ZhGVo9vRimIQD5v5oPAZCupgDI9wg8/qz/1Xz55usyeyAfgMMQ9GU2Op4eAchpOIJQQEz/VuPlm6/K7IH6AMjgGzdl6QtyX5jWjpQFevF3lq3xf6yhrOlIAUgQCojR8gmE+l9Nl2++JrMH6gEgR5UA5KYsc+AZmCbQCDi+IvgEQMob1XBEAHIajgBMLV+0kCdws6aGu3zqfkV9AGTwjftg3JRVVRAtHQEXX/wbAcoXP5d5CID8GoJKvqDAloKOoIz/y7x8c3pmD4zhaqwjRzCYyQg5gr2ZgsFTLweWr8XQgsXjbwLWrnNtMlKgNoLBmZAa7PTCAuYIBlMvlWQswwr2UlUw45jdDSx8HbD+Ctd+HVCwePKbgJV9aASDM8Yg59TWFDysYPBtmYK91IbNOHaPA/M7gUXKXA4hWDz79cA8+W0aweCMURj+1HYfcBjBYO54MMY3tGDv8I3nmWSHOzYOLJ0LLPGXAQWLz3oB8MQUsEa16kYwOG8whjh74yJkUMFgbsNlCfYO0epwissVY34bsHw2sEIRkAEEi/dcU0SP5qhF1ggG5w3GEGdXr4L5134Fg4kAjuDQgr1DtDqcUmZETwArZwAru4BVqsv0KVh8/o3F4v0QXZBGMDhvMIY4u3MYhv95Zh+Cu1xBcxuOU/HfeDIq5cv7FuwdotXhlCBXjOXZAnyrO4BV6in0IVh8wStLuWCsUAyvEQzOG5ABz+4eB+R/ewnu/kOP/3G/l4kJTERlljQtIot2e53/IwO2OPl4FLtcnCqAp9cahT56CBZf+LpSLhhz1N5qBIPzBmTAs/sLRHcTDKbiNHdBGGymOC/3hglEvgjAnoK9A7Y4+XgiV4zVWYDAs/etxaubYPFFP1QkLtCIP8neaASD8wZkwLP7AyC/tJNg8L/xLNBu+YBdBXsHbHEFAINcMVamgdWZAoRrfPdXm8KitLdmgYveWAq+2y7iMqfuRjA4b1AGOLt/APJLqwSD3+y5T1yI0AoSbAxMMzGV1o8/My2ro2DvAK2t+GgiV4zj4+3AIwDXtwBrVJeuECze+9aW4Dut4PxkIhYsdetGMDhvoDqcPRgA+SWp4O4veQ5Uv/mAGwR78+6rQq4Yq9PAOi2fA4/vBkKudKVU7VZw77uKvWFuZbtcMNb5v0YwOG9g+jx7cADyi6Pg7gccgIxlcA5TKhaD01yYKBmVFpBZMfx/m2Bvny3t8LGqoqTliZbVI+gMgHwnMAnCIFi897cLAAZ6QyzFzzSCwXkD1OPs4QDIL5XgLmk5JHk/SD5gKdibd38VcsVYGmuBTaAzEHLHgyCcaokB7/1IkUET5IKxwF5pBIPzBqbPs4cHIC/AaeqvPL9pmHxAE+zts6VdLCD/lcgVY3UyWD0Bj1ZwqgCggXA7sPfWAoAJvaEtZBrB4Lyx6efsPADyCtmCvf00s/NnOsgVY3m8BTRZPZuGBUACdArY+5lWDqGmYbIrLHEx0ggG5w1OH2fnA7CPizQfaXqgUw80AGywMdIeaAA40u5vLt4AsMHASHugAeBIu7+5eAPABgMj7YEGgCPt/ubiDQAbDIy0BxoAjrT7m4s3AGwwMNIeaAA40u5vLt4AsMHASHugAeBIu7+5eAPABgMj7YEGgCPt/ubiDQAbDIy0B8ZYNMbkX+ZekpuIiOQrPar+xs889HJg6jZg5jAwvVZ8B+ll9PlO5/Fc/o+ECjnHfi8zYfkvM5ulmp4qJXVqx5deD4zfAkw/CGxdAZgoHfuh131QkaI5hu8Bs4Ds8B0AWLnIRGCBsFfn87JffDMwdjOw5R5g8giwZa34jnQQUwDo99wBfJ4TM7COiNdlaj2rA/jeV/vfDeATAP4UGH8I2Lrc6gc+SHqY4oMZ74VSKM0xfA+UUzB/oBUUCKMl6zSQ/PsXqZD5KQC/A0w/DEwcAcYXgYnVwppwADuBkefnCim90FmBWXwnK87Uen53BI8sbuwqaz9p5UgnQhBS+ZN1zE8Ak0utviCwq8DI8/nx5hi+Bzb4gJzKZE1SEFZZgS9/2pWR/gTAJ4HJQ8DEMWB8ARhfBsaWCwDquwQKvvNgHXvOcYVbPFJPkw+dDxC/W1Y4tWDpw/Rlgo4lo1T4/KxTihDNpJwj3/UiMLXemprjffC7eWpzDN8DlYsQDiKtVxzEqoHkyX9HRizW+nIgaQnvAiaeBCbmC0s4tgSMu2rMePAR9X252jXklaTFU108K0MHav/nvJ6ZxVVk9OI7GR2IZoGQNc/HgbHgIwqILIVujuF7oOMqWFawCoRxkfEIB5CWgkREBCNf9wMTc8A4QciBWyoGz16rwNgaML5eWKpctYZL3N+TWLX0gvtuP0HHk2n16JDyxXmVhfU0qywbJbr5GSuXKxA/sV5Y9UYWdnjwyS3qKKgarWA69Wg6fjQOIK0HadnIjPVFB+AiME4AuiUkCFnESyCSkmAuU7Cjm15wX+2X2ifBRn9A8mKcW2UFjULVQcgVDl80u40SYh763FfvquhLCxitoBYUsoJfjXKttByMq9CKcHn4sPuCbgXNJwyWkECcz5Q376UX3LNncZyQAAADEklEQVT9fFgIJs6lBBwtn3Tt6FpIz4RWnuQxPh2XIGzm4CwQ9hWIFgBTK0gQHiIAJddKq0ELQh+KL1qUR4MvSEsoENIKrgALHNiMox+94K7tl9qnnMio8MSf6SNwGpYVjCDk/Ju7isq496fCqX0BkDeqlWwKwic1gAQSpzGREnFgREz01eALLvvq2Kfi45m6cf3qBXdsfxRbJMho8dimqOhEK8cXQRr9QVpvPoDNMXQP9A3ACELFxPh+jACkP0fLIKFCCRRqKuPUdqjlC9o07JZwKVNHeBC94DQcZO0XAAkmgotAk9QYrR9f/BvByYfMSATDVMzwTXMM3QMDAVAgVHCZ7/MaQK4QZUHiNCbBQlqUw74YCb7gcmYkelC9YFlwvVv7RRAorTuBkECU9asCID9/x9B935zYzyKkqpfiNHxcA0gLQgvBAaPVkCqm3h2AtC5m/RyEqzw/4xhGL3hD++MmslgqCbgUfLKAcRrmTlBzDN0DA1tAXUlWcDm1IOIIJAjlT/Fd05lbFQFwjdtgGcewesFt7Rc/Gx8iWjUCjGCT1YvWT1MwgUqrf3NG45tTbcu0aximWx9xENcEQHGbcYAEwtSXSqY0gnCdgeuMI0cvuGx/FUGgFhwEYrR80QckWN+X0fjm1DwAWv8RgJFilJZBznz0pQg+AZAAlVWh1GvGka0XzB0cCQi30aSGVa9AF62fLOB7MhrfnJoPwPER59Px+o3e76mL5Kwp2G57xPl0kxc3er+nLvyKtLmhfUC78RHn081ONnq/pzcAR5xPR9mRRu/31IVgvgUccT4dNaobvd/TGYAjzqejumqj93s6A3DE+XRUg2VSCjdaGr3fUw+I+VPwiPPpqJjO8J1Nw43e7ymHwHoAKMFd7QErAeEE5NNJMb3R+z3lsGcNzgfgiPPpomJ6o/d76oGwPgCOKJ8uKqY3er+nKwBHmE+noqRG7/fUA199U/AI8+kEwEbv93QHoEhZTnA+nYqSGr3fBoAtaiqBUImdm5hPJwA2er+nKwBHnE+X1gUzSbnR+z11wPj/AeCpPDD3t7rvAAAAAElFTkSuQmCC",S_=(O("bg",function(e){function _class4(){var e,l,_,S=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},E=S.blendFunction,k=void 0===E?$y:E,T=S.preset,M=void 0===T?g_.MEDIUM:T,R=S.edgeDetectionMode,I=void 0===R?p_:R,O=S.predicationMode,D=void 0===O?v_:O;_classCallCheck3(this,_class4),e=_callSuper(this,_class4,["SMAAEffect","uniform sampler2D weightMap;varying vec2 vOffset0;varying vec2 vOffset1;void movec(const in bvec2 c,inout vec2 variable,const in vec2 value){if(c.x){variable.x=value.x;}if(c.y){variable.y=value.y;}}void movec(const in bvec4 c,inout vec4 variable,const in vec4 value){movec(c.xy,variable.xy,value.xy);movec(c.zw,variable.zw,value.zw);}void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec4 a;a.x=texture2D(weightMap,vOffset0).a;a.y=texture2D(weightMap,vOffset1).g;a.wz=texture2D(weightMap,uv).rb;vec4 color=inputColor;if(dot(a,vec4(1.0))>=1e-5){bool h=max(a.x,a.z)>max(a.y,a.w);vec4 blendingOffset=vec4(0.0,a.y,0.0,a.w);vec2 blendingWeight=a.yw;movec(bvec4(h),blendingOffset,vec4(a.x,0.0,a.z,0.0));movec(bvec2(h),blendingWeight,a.xz);blendingWeight/=dot(blendingWeight,vec2(1.0));vec4 blendingCoord=blendingOffset*vec4(texelSize,-texelSize)+uv.xyxy;color=blendingWeight.x*texture2D(inputBuffer,blendingCoord.xy);color+=blendingWeight.y*texture2D(inputBuffer,blendingCoord.zw);}outputColor=color;}",{vertexShader:"varying vec2 vOffset0;varying vec2 vOffset1;void mainSupport(const in vec2 uv){vOffset0=uv+texelSize*vec2(1.0,0.0);vOffset1=uv+texelSize*vec2(0.0,1.0);}",blendFunction:k,attributes:Hy|Gy,uniforms:new Map([["weightMap",new Om(null)]])}]),arguments.length>1&&(l=arguments[0],_=arguments[1],arguments.length>2&&(M=arguments[2]),arguments.length>3&&(I=arguments[3])),e.renderTargetEdges=new Fp(1,1,{depthBuffer:!1}),e.renderTargetEdges.texture.name="SMAA.Edges",e.renderTargetWeights=e.renderTargetEdges.clone(),e.renderTargetWeights.texture.name="SMAA.Weights",e.uniforms.get("weightMap").value=e.renderTargetWeights.texture,e.clearPass=new By(!0,!1,!1),e.clearPass.overrideClearColor=new rg(0),e.clearPass.overrideClearAlpha=1,e.edgeDetectionPass=new f_(new m_),e.edgeDetectionMaterial.edgeDetectionMode=I,e.edgeDetectionMaterial.predicationMode=D,e.weightsPass=new f_(new y_);var L=new Mm;return L.onLoad=function(){var S=new Dp(l);S.name="SMAA.Search",S.magFilter=ef,S.minFilter=ef,S.generateMipmaps=!1,S.needsUpdate=!0,S.flipY=!0,e.weightsMaterial.searchTexture=S;var E=new Dp(_);E.name="SMAA.Area",E.magFilter=nf,E.minFilter=nf,E.generateMipmaps=!1,E.needsUpdate=!0,E.flipY=!1,e.weightsMaterial.areaTexture=E,e.dispatchEvent({type:"load"})},L.itemStart("search"),L.itemStart("area"),void 0!==l&&void 0!==_?(L.itemEnd("search"),L.itemEnd("area")):"undefined"!=typeof Image&&(l=new Image,_=new Image,l.addEventListener("load",function(){return L.itemEnd("search")}),_.addEventListener("load",function(){return L.itemEnd("area")}),l.src=__,_.src=b_),e.applyPreset(M),e}return _inherits(_class4,e),_createClass3(_class4,[{key:"edgesTexture",get:function(){return this.renderTargetEdges.texture}},{key:"getEdgesTexture",value:function(){return this.edgesTexture}},{key:"weightsTexture",get:function(){return this.renderTargetWeights.texture}},{key:"getWeightsTexture",value:function(){return this.weightsTexture}},{key:"edgeDetectionMaterial",get:function(){return this.edgeDetectionPass.fullscreenMaterial}},{key:"colorEdgesMaterial",get:function(){return this.edgeDetectionMaterial}},{key:"getEdgeDetectionMaterial",value:function(){return this.edgeDetectionMaterial}},{key:"weightsMaterial",get:function(){return this.weightsPass.fullscreenMaterial}},{key:"getWeightsMaterial",value:function(){return this.weightsMaterial}},{key:"setEdgeDetectionThreshold",value:function(e){this.edgeDetectionMaterial.edgeDetectionThreshold=e}},{key:"setOrthogonalSearchSteps",value:function(e){this.weightsMaterial.orthogonalSearchSteps=e}},{key:"applyPreset",value:function(e){var l=this.edgeDetectionMaterial,_=this.weightsMaterial;switch(e){case g_.LOW:l.edgeDetectionThreshold=.15,_.orthogonalSearchSteps=4,_.diagonalDetection=!1,_.cornerDetection=!1;break;case g_.MEDIUM:l.edgeDetectionThreshold=.1,_.orthogonalSearchSteps=8,_.diagonalDetection=!1,_.cornerDetection=!1;break;case g_.HIGH:l.edgeDetectionThreshold=.1,_.orthogonalSearchSteps=16,_.diagonalSearchSteps=8,_.cornerRounding=25,_.diagonalDetection=!0,_.cornerDetection=!0;break;case g_.ULTRA:l.edgeDetectionThreshold=.05,_.orthogonalSearchSteps=32,_.diagonalSearchSteps=16,_.cornerRounding=25,_.diagonalDetection=!0,_.cornerDetection=!0}}},{key:"setDepthTexture",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:rp;this.edgeDetectionMaterial.depthBuffer=e,this.edgeDetectionMaterial.depthPacking=l}},{key:"update",value:function(e,l,_){this.clearPass.render(e,this.renderTargetEdges),this.edgeDetectionPass.render(e,l,this.renderTargetEdges),this.weightsPass.render(e,this.renderTargetEdges,this.renderTargetWeights)}},{key:"setSize",value:function(e,l){this.edgeDetectionMaterial.setSize(e,l),this.weightsMaterial.setSize(e,l),this.renderTargetEdges.setSize(e,l),this.renderTargetWeights.setSize(e,l)}},{key:"dispose",value:function(){var e=this.weightsMaterial,l=e.searchTexture,_=e.areaTexture;null!==l&&null!==_&&(l.dispose(),_.dispose()),_superPropGet(_class4,"dispose",this,3)([])}}],[{key:"searchImageDataURL",get:function(){return __}},{key:"areaImageDataURL",get:function(){return b_}}])}(n_)),function(e){function EffectMaterial(e,l,_,S){var E,k=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return _classCallCheck3(this,EffectMaterial),E=_callSuper(this,EffectMaterial,[{name:"EffectMaterial",defines:{THREE_REVISION:Wd.replace(/\D+/g,""),DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new Om(null),depthBuffer:new Om(null),resolution:new Om(new mp),texelSize:new Om(new mp),cameraNear:new Om(.3),cameraFar:new Om(1e3),aspect:new Om(1),time:new Om(0)},blending:0,toneMapped:!1,depthWrite:!1,depthTest:!1,dithering:k}]),e&&E.setShaderParts(e),l&&E.setDefines(l),_&&E.setUniforms(_),E.copyCameraSettings(S),E}return _inherits(EffectMaterial,e),_createClass3(EffectMaterial,[{key:"inputBuffer",set:function(e){this.uniforms.inputBuffer.value=e}},{key:"setInputBuffer",value:function(e){this.uniforms.inputBuffer.value=e}},{key:"depthBuffer",get:function(){return this.uniforms.depthBuffer.value},set:function(e){this.uniforms.depthBuffer.value=e}},{key:"depthPacking",get:function(){return Number(this.defines.DEPTH_PACKING)},set:function(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}},{key:"setDepthBuffer",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:rp;this.depthBuffer=e,this.depthPacking=l}},{key:"setShaderData",value:function(e){this.setShaderParts(e.shaderParts),this.setDefines(e.defines),this.setUniforms(e.uniforms),this.setExtensions(e.extensions)}},{key:"setShaderParts",value:function(e){return this.fragmentShader="#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#define packFloatToRGBA(v) packDepthToRGBA(v)\n#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)\n#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\n#if DEPTH_PACKING == 3201\nuniform lowp sampler2D depthBuffer;\n#elif defined(GL_FRAGMENT_PRECISION_HIGH)\nuniform highp sampler2D depthBuffer;\n#else\nuniform mediump sampler2D depthBuffer;\n#endif\nuniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;vec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}float readDepth(const in vec2 uv){\n#if DEPTH_PACKING == 3201\nreturn unpackRGBAToDepth(texture2D(depthBuffer,uv));\n#else\nreturn texture2D(depthBuffer,uv).r;\n#endif\n}float getViewZ(const in float depth){\n#ifdef PERSPECTIVE_CAMERA\nreturn perspectiveDepthToViewZ(depth,cameraNear,cameraFar);\n#else\nreturn orthographicDepthToViewZ(depth,cameraNear,cameraFar);\n#endif\n}vec3 RGBToHCV(const in vec3 RGB){vec4 P=mix(vec4(RGB.bg,-1.0,2.0/3.0),vec4(RGB.gb,0.0,-1.0/3.0),step(RGB.b,RGB.g));vec4 Q=mix(vec4(P.xyw,RGB.r),vec4(RGB.r,P.yzx),step(P.x,RGB.r));float C=Q.x-min(Q.w,Q.y);float H=abs((Q.w-Q.y)/(6.0*C+EPSILON)+Q.z);return vec3(H,C,Q.x);}vec3 RGBToHSL(const in vec3 RGB){vec3 HCV=RGBToHCV(RGB);float L=HCV.z-HCV.y*0.5;float S=HCV.y/(1.0-abs(L*2.0-1.0)+EPSILON);return vec3(HCV.x,S,L);}vec3 HueToRGB(const in float H){float R=abs(H*6.0-3.0)-1.0;float G=2.0-abs(H*6.0-2.0);float B=2.0-abs(H*6.0-4.0);return clamp(vec3(R,G,B),0.0,1.0);}vec3 HSLToRGB(const in vec3 HSL){vec3 RGB=HueToRGB(HSL.x);float C=(1.0-abs(2.0*HSL.z-1.0))*HSL.y;return(RGB-0.5)*C+HSL.z;}FRAGMENT_HEAD void main(){FRAGMENT_MAIN_UV vec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGE color0.a=clamp(color0.a,0.0,1.0);gl_FragColor=color0;\n#ifdef ENCODE_OUTPUT\n#include <colorspace_fragment>\n#endif\n#include <dithering_fragment>\n}".replace(Vy.FRAGMENT_HEAD,e.get(Vy.FRAGMENT_HEAD)||"").replace(Vy.FRAGMENT_MAIN_UV,e.get(Vy.FRAGMENT_MAIN_UV)||"").replace(Vy.FRAGMENT_MAIN_IMAGE,e.get(Vy.FRAGMENT_MAIN_IMAGE)||""),this.vertexShader="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEAD void main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORT gl_Position=vec4(position.xy,1.0,1.0);}".replace(Vy.VERTEX_HEAD,e.get(Vy.VERTEX_HEAD)||"").replace(Vy.VERTEX_MAIN_SUPPORT,e.get(Vy.VERTEX_MAIN_SUPPORT)||""),this.needsUpdate=!0,this}},{key:"setDefines",value:function(e){var l,_=_createForOfIteratorHelper2(e.entries());try{for(_.s();!(l=_.n()).done;){var S=l.value;this.defines[S[0]]=S[1]}}catch(E){_.e(E)}finally{_.f()}return this.needsUpdate=!0,this}},{key:"setUniforms",value:function(e){var l,_=_createForOfIteratorHelper2(e.entries());try{for(_.s();!(l=_.n()).done;){var S=l.value;this.uniforms[S[0]]=S[1]}}catch(E){_.e(E)}finally{_.f()}return this}},{key:"setExtensions",value:function(e){this.extensions={};var l,_=_createForOfIteratorHelper2(e);try{for(_.s();!(l=_.n()).done;){var S=l.value;this.extensions[S]=!0}}catch(E){_.e(E)}finally{_.f()}return this}},{key:"encodeOutput",get:function(){return void 0!==this.defines.ENCODE_OUTPUT},set:function(e){this.encodeOutput!==e&&(e?this.defines.ENCODE_OUTPUT="1":delete this.defines.ENCODE_OUTPUT,this.needsUpdate=!0)}},{key:"isOutputEncodingEnabled",value:function(e){return this.encodeOutput}},{key:"setOutputEncodingEnabled",value:function(e){this.encodeOutput=e}},{key:"time",get:function(){return this.uniforms.time.value},set:function(e){this.uniforms.time.value=e}},{key:"setDeltaTime",value:function(e){this.uniforms.time.value+=e}},{key:"adoptCameraSettings",value:function(e){this.copyCameraSettings(e)}},{key:"copyCameraSettings",value:function(e){e&&(this.uniforms.cameraNear.value=e.near,this.uniforms.cameraFar.value=e.far,e instanceof Gg?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}},{key:"setSize",value:function(e,l){var _=this.uniforms;_.resolution.value.set(e,l),_.texelSize.value.set(1/e,1/l),_.aspect.value=e/l}}],[{key:"Section",get:function(){return Vy}}])}(Fg));function prefixSubstrings(e,l,_){var S,E=_createForOfIteratorHelper2(l);try{for(E.s();!(S=E.n()).done;){var k,T=S.value,M="$1"+e+T.charAt(0).toUpperCase()+T.slice(1),R=new RegExp("([^\\.])(\\b"+T+"\\b)","g"),I=_createForOfIteratorHelper2(_.entries());try{for(I.s();!(k=I.n()).done;){var O=k.value;null!==O[1]&&_.set(O[0],O[1].replace(R,M))}}catch(D){I.e(D)}finally{I.f()}}}catch(D){E.e(D)}finally{E.f()}}function integrateEffect(e,l,_){var S=l.getFragmentShader(),E=l.getVertexShader(),k=void 0!==S&&/mainImage/.test(S),T=void 0!==S&&/mainUv/.test(S);if(_.attributes|=l.getAttributes(),void 0===S)throw new Error("Missing fragment shader (".concat(l.name,")"));if(T&&0!==(_.attributes&Hy))throw new Error("Effects that transform UVs are incompatible with convolution effects (".concat(l.name,")"));if(!k&&!T)throw new Error("Could not find mainImage or mainUv function (".concat(l.name,")"));var M=/\w+\s+(\w+)\([\w\s,]*\)\s*{/g,R=_.shaderParts,I=R.get(Vy.FRAGMENT_HEAD)||"",O=R.get(Vy.FRAGMENT_MAIN_UV)||"",D=R.get(Vy.FRAGMENT_MAIN_IMAGE)||"",L=R.get(Vy.VERTEX_HEAD)||"",U=R.get(Vy.VERTEX_MAIN_SUPPORT)||"",B=new Set,z=new Set;if(T&&(O+="\t".concat(e,"MainUv(UV);\n"),_.uvTransformation=!0),null!==E&&/mainSupport/.test(E)){var j=/mainSupport *\([\w\s]*?uv\s*?\)/.test(E);U+="\t".concat(e,"MainSupport("),U+=j?"vUv);\n":");\n";var G,H=_createForOfIteratorHelper2(E.matchAll(/(?:varying\s+\w+\s+([\S\s]*?);)/g));try{for(H.s();!(G=H.n()).done;){var V,W=_createForOfIteratorHelper2(G.value[1].split(/\s*,\s*/));try{for(W.s();!(V=W.n()).done;){var q=V.value;_.varyings.add(q),B.add(q),z.add(q)}}catch(he){W.e(he)}finally{W.f()}}}catch(he){H.e(he)}finally{H.f()}var X,K=_createForOfIteratorHelper2(E.matchAll(M));try{for(K.s();!(X=K.n()).done;){var Y=X.value;z.add(Y[1])}}catch(he){K.e(he)}finally{K.f()}}var J,Q=_createForOfIteratorHelper2(S.matchAll(M));try{for(Q.s();!(J=Q.n()).done;){var Z=J.value;z.add(Z[1])}}catch(he){Q.e(he)}finally{Q.f()}var $,ee=_createForOfIteratorHelper2(l.defines.keys());try{for(ee.s();!($=ee.n()).done;){var te=$.value;z.add(te.replace(/\([\w\s,]*\)/g,""))}}catch(he){ee.e(he)}finally{ee.f()}var ne,re=_createForOfIteratorHelper2(l.uniforms.keys());try{for(re.s();!(ne=re.n()).done;){var ie=ne.value;z.add(ie)}}catch(he){re.e(he)}finally{re.f()}z.delete("while"),z.delete("for"),z.delete("if"),l.uniforms.forEach(function(l,S){return _.uniforms.set(e+S.charAt(0).toUpperCase()+S.slice(1),l)}),l.defines.forEach(function(l,S){return _.defines.set(e+S.charAt(0).toUpperCase()+S.slice(1),l)});var ae=new Map([["fragment",S],["vertex",E]]);prefixSubstrings(e,z,_.defines),prefixSubstrings(e,z,ae),S=ae.get("fragment"),E=ae.get("vertex");var oe=l.blendMode;if(_.blendModes.set(oe.blendFunction,oe),k){null!==l.inputColorSpace&&l.inputColorSpace!==_.colorSpace&&(D+=l.inputColorSpace===ap?"color0 = sRGBTransferOETF(color0);\n\t":"color0 = sRGBToLinear(color0);\n\t"),l.outputColorSpace!==ip?_.colorSpace=l.outputColorSpace:null!==l.inputColorSpace&&(_.colorSpace=l.inputColorSpace);D+="".concat(e,"MainImage(color0, UV, "),0!==(_.attributes&Gy)&&/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/.test(S)&&(D+="depth, ",_.readDepth=!0),D+="color1);\n\t";var se=e+"BlendOpacity";_.uniforms.set(se,oe.opacity),D+="color0 = blend".concat(oe.blendFunction,"(color0, color1, ").concat(se,");\n\n\t"),I+="uniform float ".concat(se,";\n\n")}if(I+=S+"\n",null!==E&&(L+=E+"\n"),R.set(Vy.FRAGMENT_HEAD,I),R.set(Vy.FRAGMENT_MAIN_UV,O),R.set(Vy.FRAGMENT_MAIN_IMAGE,D),R.set(Vy.VERTEX_HEAD,L),R.set(Vy.VERTEX_MAIN_SUPPORT,U),null!==l.extensions){var ue,le=_createForOfIteratorHelper2(l.extensions);try{for(le.s();!(ue=le.n()).done;){var ce=ue.value;_.extensions.add(ce)}}catch(he){le.e(he)}finally{le.f()}}}O("be",function(e){function _class5(e){var l;_classCallCheck3(this,_class5),(l=_callSuper(this,_class5,["EffectPass"])).fullscreenMaterial=new S_(null,null,null,e),l.listener=function(e){return l.handleEvent(e)},l.effects=[];for(var _=arguments.length,S=new Array(_>1?_-1:0),E=1;E<_;E++)S[E-1]=arguments[E];return l.setEffects(S),l.skipRendering=!1,l.minTime=1,l.maxTime=Number.POSITIVE_INFINITY,l.timeScale=1,l}return _inherits(_class5,e),_createClass3(_class5,[{key:"mainScene",set:function(e){var l,_=_createForOfIteratorHelper2(this.effects);try{for(_.s();!(l=_.n()).done;){l.value.mainScene=e}}catch(S){_.e(S)}finally{_.f()}}},{key:"mainCamera",set:function(e){this.fullscreenMaterial.copyCameraSettings(e);var l,_=_createForOfIteratorHelper2(this.effects);try{for(_.s();!(l=_.n()).done;){l.value.mainCamera=e}}catch(S){_.e(S)}finally{_.f()}}},{key:"encodeOutput",get:function(){return this.fullscreenMaterial.encodeOutput},set:function(e){this.fullscreenMaterial.encodeOutput=e}},{key:"dithering",get:function(){return this.fullscreenMaterial.dithering},set:function(e){var l=this.fullscreenMaterial;l.dithering=e,l.needsUpdate=!0}},{key:"setEffects",value:function(e){var l,_=_createForOfIteratorHelper2(this.effects);try{for(_.s();!(l=_.n()).done;){l.value.removeEventListener("change",this.listener)}}catch(k){_.e(k)}finally{_.f()}this.effects=e.sort(function(e,l){return l.attributes-e.attributes});var S,E=_createForOfIteratorHelper2(this.effects);try{for(E.s();!(S=E.n()).done;){S.value.addEventListener("change",this.listener)}}catch(k){E.e(k)}finally{E.f()}}},{key:"updateMaterial",value:function(){var e,l=new Wy,_=0,S=_createForOfIteratorHelper2(this.effects);try{for(S.s();!(e=S.n()).done;){var E=e.value;if(E.blendMode.blendFunction===Jy)l.attributes|=E.getAttributes()&Gy;else{if(0!==(l.attributes&E.getAttributes()&Hy))throw new Error("Convolution effects cannot be merged (".concat(E.name,")"));integrateEffect("e"+_++,E,l)}}}catch(G){S.e(G)}finally{S.f()}var k,T=l.shaderParts.get(Vy.FRAGMENT_HEAD),M=l.shaderParts.get(Vy.FRAGMENT_MAIN_IMAGE),R=l.shaderParts.get(Vy.FRAGMENT_MAIN_UV),I=/\bblend\b/g,O=_createForOfIteratorHelper2(l.blendModes.values());try{for(O.s();!(k=O.n()).done;){var D=k.value;T+=D.getShaderCode().replace(I,"blend".concat(D.blendFunction))+"\n"}}catch(G){O.e(G)}finally{O.f()}0!==(l.attributes&Gy)?(l.readDepth&&(M="float depth = readDepth(UV);\n\n\t"+M),this.needsDepthTexture=null===this.getDepthTexture()):this.needsDepthTexture=!1,l.colorSpace===ap&&(M+="color0 = sRGBToLinear(color0);\n\t"),l.uvTransformation?(R="vec2 transformedUv = vUv;\n"+R,l.defines.set("UV","transformedUv")):l.defines.set("UV","vUv"),l.shaderParts.set(Vy.FRAGMENT_HEAD,T),l.shaderParts.set(Vy.FRAGMENT_MAIN_IMAGE,M),l.shaderParts.set(Vy.FRAGMENT_MAIN_UV,R);var L,U=_createForOfIteratorHelper2(l.shaderParts);try{for(U.s();!(L=U.n()).done;){var B=_slicedToArray(L.value,2),z=B[0],j=B[1];null!==j&&l.shaderParts.set(z,j.trim().replace(/^#/,"\n#"))}}catch(G){U.e(G)}finally{U.f()}this.skipRendering=0===_,this.needsSwap=!this.skipRendering,this.fullscreenMaterial.setShaderData(l)}},{key:"recompile",value:function(){this.updateMaterial()}},{key:"getDepthTexture",value:function(){return this.fullscreenMaterial.depthBuffer}},{key:"setDepthTexture",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:rp;this.fullscreenMaterial.depthBuffer=e,this.fullscreenMaterial.depthPacking=l;var _,S=_createForOfIteratorHelper2(this.effects);try{for(S.s();!(_=S.n()).done;){_.value.setDepthTexture(e,l)}}catch(E){S.e(E)}finally{S.f()}}},{key:"render",value:function(e,l,_,S,E){var k,T=_createForOfIteratorHelper2(this.effects);try{for(T.s();!(k=T.n()).done;){k.value.update(e,l,S)}}catch(R){T.e(R)}finally{T.f()}if(!this.skipRendering||this.renderToScreen){var M=this.fullscreenMaterial;M.inputBuffer=l.texture,M.time+=S*this.timeScale,e.setRenderTarget(this.renderToScreen?null:_),e.render(this.scene,this.camera)}}},{key:"setSize",value:function(e,l){this.fullscreenMaterial.setSize(e,l);var _,S=_createForOfIteratorHelper2(this.effects);try{for(S.s();!(_=S.n()).done;){_.value.setSize(e,l)}}catch(E){S.e(E)}finally{S.f()}}},{key:"initialize",value:function(e,l,_){this.renderer=e;var S,E=_createForOfIteratorHelper2(this.effects);try{for(E.s();!(S=E.n()).done;){S.value.initialize(e,l,_)}}catch(k){E.e(k)}finally{E.f()}this.updateMaterial(),void 0!==_&&_!==of&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},{key:"dispose",value:function(){_superPropGet(_class5,"dispose",this,3)([]);var e,l=_createForOfIteratorHelper2(this.effects);try{for(l.s();!(e=l.n()).done;){var _=e.value;_.removeEventListener("change",this.listener),_.dispose()}}catch(S){l.e(S)}finally{l.f()}}},{key:"handleEvent",value:function(e){if("change"===e.type)this.recompile()}}])}(Oy))}}})}();
