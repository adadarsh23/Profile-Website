{"version":3,"file":"FuzzyText-CepTC5Zq.js","sources":["../../src/components/FuzzyText.jsx"],"sourcesContent":["import React, { useEffect, useRef } from 'react';\n\nconst FuzzyText = ({\n  children,\n  fontSize = 'clamp(2rem, 10vw, 10rem)',\n  fontWeight = 900,\n  fontFamily = 'inherit',\n  color = '#fff',\n  enableHover = true,\n  baseIntensity = 0.18,\n  hoverIntensity = 0.5,\n}) => {\n  const canvasRef = useRef(null);\n\n  useEffect(() => {\n    let animationFrameId;\n    let isCancelled = false;\n    const canvas = canvasRef.current;\n    if (!canvas) return;\n\n    const init = async () => {\n      if (document.fonts?.ready) {\n        await document.fonts.ready;\n      }\n      if (isCancelled) return;\n\n      const ctx = canvas.getContext('2d');\n      if (!ctx) return;\n\n      const computedFontFamily =\n        fontFamily === 'inherit'\n          ? window.getComputedStyle(canvas).fontFamily || 'sans-serif'\n          : fontFamily;\n\n      const fontSizeStr =\n        typeof fontSize === 'number' ? `${fontSize}px` : fontSize;\n      let numericFontSize;\n      if (typeof fontSize === 'number') {\n        numericFontSize = fontSize;\n      } else {\n        const temp = document.createElement('span');\n        temp.style.fontSize = fontSize;\n        document.body.appendChild(temp);\n        const computedSize = window.getComputedStyle(temp).fontSize;\n        numericFontSize = parseFloat(computedSize);\n        document.body.removeChild(temp);\n      }\n\n      const text = React.Children.toArray(children).join('');\n\n      const offscreen = document.createElement('canvas');\n      const offCtx = offscreen.getContext('2d');\n      if (!offCtx) return;\n\n      offCtx.font = `${fontWeight} ${fontSizeStr} ${computedFontFamily}`;\n      offCtx.textBaseline = 'alphabetic';\n      const metrics = offCtx.measureText(text);\n\n      const actualLeft = metrics.actualBoundingBoxLeft ?? 0;\n      const actualRight = metrics.actualBoundingBoxRight ?? metrics.width;\n      const actualAscent = metrics.actualBoundingBoxAscent ?? numericFontSize;\n      const actualDescent =\n        metrics.actualBoundingBoxDescent ?? numericFontSize * 0.2;\n\n      const textBoundingWidth = Math.ceil(actualLeft + actualRight);\n      const tightHeight = Math.ceil(actualAscent + actualDescent);\n\n      const extraWidthBuffer = 10;\n      const offscreenWidth = textBoundingWidth + extraWidthBuffer;\n\n      offscreen.width = offscreenWidth;\n      offscreen.height = tightHeight;\n\n      const xOffset = extraWidthBuffer / 2;\n      offCtx.font = `${fontWeight} ${fontSizeStr} ${computedFontFamily}`;\n      offCtx.textBaseline = 'alphabetic';\n      offCtx.fillStyle = color;\n      offCtx.fillText(text, xOffset - actualLeft, actualAscent);\n\n      const horizontalMargin = 50;\n      const verticalMargin = 0;\n      canvas.width = offscreenWidth + horizontalMargin * 2;\n      canvas.height = tightHeight + verticalMargin * 2;\n      ctx.translate(horizontalMargin, verticalMargin);\n\n      const interactiveLeft = horizontalMargin + xOffset;\n      const interactiveTop = verticalMargin;\n      const interactiveRight = interactiveLeft + textBoundingWidth;\n      const interactiveBottom = interactiveTop + tightHeight;\n\n      let isHovering = false;\n      const fuzzRange = 30;\n\n      const run = () => {\n        if (isCancelled) return;\n        ctx.clearRect(\n          -fuzzRange,\n          -fuzzRange,\n          offscreenWidth + 2 * fuzzRange,\n          tightHeight + 2 * fuzzRange\n        );\n        const intensity = isHovering ? hoverIntensity : baseIntensity;\n        for (let j = 0; j < tightHeight; j++) {\n          const dx = Math.floor(intensity * (Math.random() - 0.5) * fuzzRange);\n          ctx.drawImage(\n            offscreen,\n            0,\n            j,\n            offscreenWidth,\n            1,\n            dx,\n            j,\n            offscreenWidth,\n            1\n          );\n        }\n        animationFrameId = window.requestAnimationFrame(run);\n      };\n\n      run();\n\n      const isInsideTextArea = (x, y) => {\n        return (\n          x >= interactiveLeft &&\n          x <= interactiveRight &&\n          y >= interactiveTop &&\n          y <= interactiveBottom\n        );\n      };\n\n      const handleMouseMove = (e) => {\n        if (!enableHover) return;\n        const rect = canvas.getBoundingClientRect();\n        const x = e.clientX - rect.left;\n        const y = e.clientY - rect.top;\n        isHovering = isInsideTextArea(x, y);\n      };\n\n      const handleMouseLeave = () => {\n        isHovering = false;\n      };\n\n      const handleTouchMove = (e) => {\n        if (!enableHover) return;\n        e.preventDefault();\n        const rect = canvas.getBoundingClientRect();\n        const touch = e.touches[0];\n        const x = touch.clientX - rect.left;\n        const y = touch.clientY - rect.top;\n        isHovering = isInsideTextArea(x, y);\n      };\n\n      const handleTouchEnd = () => {\n        isHovering = false;\n      };\n\n      if (enableHover) {\n        canvas.addEventListener('mousemove', handleMouseMove);\n        canvas.addEventListener('mouseleave', handleMouseLeave);\n        canvas.addEventListener('touchmove', handleTouchMove, {\n          passive: false,\n        });\n        canvas.addEventListener('touchend', handleTouchEnd);\n      }\n\n      const cleanup = () => {\n        window.cancelAnimationFrame(animationFrameId);\n        if (enableHover) {\n          canvas.removeEventListener('mousemove', handleMouseMove);\n          canvas.removeEventListener('mouseleave', handleMouseLeave);\n          canvas.removeEventListener('touchmove', handleTouchMove);\n          canvas.removeEventListener('touchend', handleTouchEnd);\n        }\n      };\n\n      canvas.cleanupFuzzyText = cleanup;\n    };\n\n    init();\n\n    return () => {\n      isCancelled = true;\n      window.cancelAnimationFrame(animationFrameId);\n      if (canvas && canvas.cleanupFuzzyText) {\n        canvas.cleanupFuzzyText();\n      }\n    };\n  }, [\n    children,\n    fontSize,\n    fontWeight,\n    fontFamily,\n    color,\n    enableHover,\n    baseIntensity,\n    hoverIntensity,\n  ]);\n\n  return <canvas ref={canvasRef} />;\n};\n\nexport default FuzzyText;\n"],"names":["FuzzyText","children","fontSize","fontWeight","fontFamily","color","enableHover","baseIntensity","hoverIntensity","canvasRef","useRef","useEffect","animationFrameId","isCancelled","canvas","ctx","computedFontFamily","fontSizeStr","numericFontSize","temp","computedSize","text","React","offscreen","offCtx","metrics","actualLeft","actualRight","actualAscent","actualDescent","textBoundingWidth","tightHeight","extraWidthBuffer","offscreenWidth","xOffset","horizontalMargin","verticalMargin","interactiveLeft","interactiveTop","interactiveRight","interactiveBottom","isHovering","fuzzRange","run","intensity","j","dx","isInsideTextArea","x","y","handleMouseMove","rect","handleMouseLeave","handleTouchMove","touch","handleTouchEnd","cleanup","jsx"],"mappings":"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"}