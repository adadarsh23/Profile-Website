import{r as e,j as t}from"./vendor-BkT4tQa2.js";const CurvedLoop=({marqueeText:r="",speed:n=2,className:s,curveAmount:i=400,direction:u="left",interactive:c=!0})=>{const l=e.useMemo(()=>(/\s|\u00A0$/.test(r)?r.replace(/\s+$/,""):r)+"Â ",[r]),a=e.useRef(null),f=e.useRef(null),o=e.useRef(null),[p,x]=e.useState(0),[d,m]=e.useState(0),v=`curve-${e.useId()}`,h=`M-200,100 Q720,${100+i} 1640,100`,b=e.useRef(!1),g=e.useRef(0),j=e.useRef(u),A=e.useRef(0),y=p,R=y?Array(Math.ceil(2e3/y)+2).fill(l).join(""):l,w=p>0;e.useEffect(()=>{a.current&&x(a.current.getComputedTextLength())},[l,s]),e.useEffect(()=>{if(p&&f.current){const e=-p;f.current.setAttribute("startOffset",e+"px"),m(e)}},[p]),e.useEffect(()=>{if(!p||!w)return;let e=0;const step=()=>{if(!b.current&&f.current){const e="right"===j.current?n:-n;let t=parseFloat(f.current.getAttribute("startOffset")||"0")+e;t<=-p&&(t+=p),t>0&&(t-=p),f.current.setAttribute("startOffset",t+"px"),m(t)}e=requestAnimationFrame(step)};return e=requestAnimationFrame(step),()=>cancelAnimationFrame(e)},[p,n,w]);const endDrag=()=>{c&&(b.current=!1,j.current=A.current>0?"right":"left")},O=c?b.current?"grabbing":"grab":"auto";return t.jsx("div",{className:"flex items-center justify-center w-full",style:{visibility:w?"visible":"hidden",cursor:O},onPointerDown:e=>{c&&(b.current=!0,g.current=e.clientX,A.current=0,e.target.setPointerCapture(e.pointerId))},onPointerMove:e=>{if(!c||!b.current||!f.current)return;const t=e.clientX-g.current;g.current=e.clientX,A.current=t;let r=parseFloat(f.current.getAttribute("startOffset")||"0")+t;r<=-p&&(r+=p),r>0&&(r-=p),f.current.setAttribute("startOffset",r+"px"),m(r)},onPointerUp:endDrag,onPointerLeave:endDrag,children:t.jsxs("svg",{className:"select-none w-full overflow-visible block",viewBox:"0 0 1440 200",children:[t.jsx("text",{ref:a,xmlSpace:"preserve",style:{visibility:"hidden",opacity:0,pointerEvents:"none"},children:l}),t.jsx("defs",{children:t.jsx("path",{ref:o,id:v,d:h,fill:"none",stroke:"transparent"})}),w&&t.jsx("text",{xmlSpace:"preserve",className:`fill-white ${s??""}`,children:t.jsx("textPath",{ref:f,href:`#${v}`,startOffset:d+"px",xmlSpace:"preserve",children:R})})]})})};export{CurvedLoop as default};
