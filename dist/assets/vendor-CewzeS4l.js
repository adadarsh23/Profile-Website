var F3=Object.defineProperty;var B3=(n,e,t)=>e in n?F3(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Ci=(n,e,t)=>B3(n,typeof e!="symbol"?e+"":e,t);import{r as pD,R as z3,a as Bi}from"./vendor_react-RnE43CiF.js";var cM=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Kw(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function H3(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var e=n.default;if(typeof e=="function"){var t=function i(){var r=!1;try{r=this instanceof i}catch(s){}return r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(i){var r=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(t,i,r.get?r:{enumerable:!0,get:function(){return n[i]}})}),t}var oy={exports:{}},ay={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uM;function G3(){return uM||(uM=1,(function(n){function e(k,X){var W=k.length;k.push(X);e:for(;0<W;){var ie=W-1>>>1,se=k[ie];if(0<r(se,X))k[ie]=X,k[W]=se,W=ie;else break e}}function t(k){return k.length===0?null:k[0]}function i(k){if(k.length===0)return null;var X=k[0],W=k.pop();if(W!==X){k[0]=W;e:for(var ie=0,se=k.length,ye=se>>>1;ie<ye;){var Ne=2*(ie+1)-1,He=k[Ne],fe=Ne+1,he=k[fe];if(0>r(He,W))fe<se&&0>r(he,He)?(k[ie]=he,k[fe]=W,ie=fe):(k[ie]=He,k[Ne]=W,ie=Ne);else if(fe<se&&0>r(he,W))k[ie]=he,k[fe]=W,ie=fe;else break e}}return X}function r(k,X){var W=k.sortIndex-X.sortIndex;return W!==0?W:k.id-X.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,f=3,m=!1,v=!1,g=!1,y=!1,b=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;function A(k){for(var X=t(c);X!==null;){if(X.callback===null)i(c);else if(X.startTime<=k)i(c),X.sortIndex=X.expirationTime,e(l,X);else break;X=t(c)}}function E(k){if(g=!1,A(k),!v)if(t(l)!==null)v=!0,M||(M=!0,z());else{var X=t(c);X!==null&&J(E,X.startTime-k)}}var M=!1,I=-1,R=5,C=-1;function D(){return y?!0:!(n.unstable_now()-C<R)}function L(){if(y=!1,M){var k=n.unstable_now();C=k;var X=!0;try{e:{v=!1,g&&(g=!1,S(I),I=-1),m=!0;var W=f;try{t:{for(A(k),d=t(l);d!==null&&!(d.expirationTime>k&&D());){var ie=d.callback;if(typeof ie=="function"){d.callback=null,f=d.priorityLevel;var se=ie(d.expirationTime<=k);if(k=n.unstable_now(),typeof se=="function"){d.callback=se,A(k),X=!0;break t}d===t(l)&&i(l),A(k)}else i(l);d=t(l)}if(d!==null)X=!0;else{var ye=t(c);ye!==null&&J(E,ye.startTime-k),X=!1}}break e}finally{d=null,f=W,m=!1}X=void 0}}finally{X?z():M=!1}}}var z;if(typeof x=="function")z=function(){x(L)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,H=G.port2;G.port1.onmessage=L,z=function(){H.postMessage(null)}}else z=function(){b(L,0)};function J(k,X){I=b(function(){k(n.unstable_now())},X)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(k){k.callback=null},n.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<k?Math.floor(1e3/k):5},n.unstable_getCurrentPriorityLevel=function(){return f},n.unstable_next=function(k){switch(f){case 1:case 2:case 3:var X=3;break;default:X=f}var W=f;f=X;try{return k()}finally{f=W}},n.unstable_requestPaint=function(){y=!0},n.unstable_runWithPriority=function(k,X){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var W=f;f=k;try{return X()}finally{f=W}},n.unstable_scheduleCallback=function(k,X,W){var ie=n.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?ie+W:ie):W=ie,k){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=W+se,k={id:u++,callback:X,priorityLevel:k,startTime:W,expirationTime:se,sortIndex:-1},W>ie?(k.sortIndex=W,e(c,k),t(l)===null&&k===t(c)&&(g?(S(I),I=-1):g=!0,J(E,W-ie))):(k.sortIndex=se,e(l,k),v||m||(v=!0,M||(M=!0,z()))),k},n.unstable_shouldYield=D,n.unstable_wrapCallback=function(k){var X=f;return function(){var W=f;f=X;try{return k.apply(this,arguments)}finally{f=W}}}})(ay)),ay}var hM;function Use(){return hM||(hM=1,oy.exports=G3()),oy.exports}const V3="modulepreload",W3=function(n){return"/"+n},dM={},Wd=function(e,t,i){let r=Promise.resolve();if(t&&t.length>0){let l=function(c){return Promise.all(c.map(u=>Promise.resolve(u).then(d=>({status:"fulfilled",value:d}),d=>({status:"rejected",reason:d}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));r=l(t.map(c=>{if(c=W3(c),c in dM)return;dM[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector('link[href="'.concat(c,'"]').concat(d)))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":V3,u||(f.as="script"),f.crossOrigin="",f.href=c,a&&f.setAttribute("nonce",a),document.head.appendChild(f),u)return new Promise((m,v)=>{f.addEventListener("load",m),f.addEventListener("error",()=>v(new Error("Unable to preload CSS for ".concat(c))))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return r.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})},Ht=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,Rn=globalThis,fl="10.18.0";function sv(){return ov(Rn),Rn}function ov(n){const e=n.__SENTRY__=n.__SENTRY__||{};return e.version=e.version||fl,e[fl]=e[fl]||{}}function jd(n,e,t=Rn){const i=t.__SENTRY__=t.__SENTRY__||{},r=i[fl]=i[fl]||{};return r[n]||(r[n]=e())}const j3=["debug","info","warn","error","log","assert","trace"],q3="Sentry Logger ",$m={};function Su(n){if(!("console"in Rn))return n();const e=Rn.console,t={},i=Object.keys($m);i.forEach(r=>{const s=$m[r];t[r]=e[r],e[r]=s});try{return n()}finally{i.forEach(r=>{e[r]=t[r]})}}function X3(){Jw().enabled=!0}function Y3(){Jw().enabled=!1}function mD(){return Jw().enabled}function K3(...n){$w("log",...n)}function $3(...n){$w("warn",...n)}function J3(...n){$w("error",...n)}function $w(n,...e){Ht&&mD()&&Su(()=>{Rn.console[n]("".concat(q3,"[").concat(n,"]:"),...e)})}function Jw(){return Ht?jd("loggerSettings",()=>({enabled:!1})):{enabled:!1}}const Tt={enable:X3,disable:Y3,isEnabled:mD,log:K3,warn:$3,error:J3},gD=50,El="?",fM=/\(error: (.*)\)/,pM=/captureMessage|captureException/;function vD(...n){const e=n.sort((t,i)=>t[0]-i[0]).map(t=>t[1]);return(t,i=0,r=0)=>{const s=[],o=t.split("\n");for(let a=i;a<o.length;a++){let l=o[a];l.length>1024&&(l=l.slice(0,1024));const c=fM.test(l)?l.replace(fM,"$1"):l;if(!c.match(/\S*Error: /)){for(const u of e){const d=u(c);if(d){s.push(d);break}}if(s.length>=gD+r)break}}return Z3(s.slice(r))}}function Q3(n){return Array.isArray(n)?vD(...n):n}function Z3(n){if(!n.length)return[];const e=Array.from(n);return/sentryWrapped/.test(vp(e).function||"")&&e.pop(),e.reverse(),pM.test(vp(e).function||"")&&(e.pop(),pM.test(vp(e).function||"")&&e.pop()),e.slice(0,gD).map(t=>({...t,filename:t.filename||vp(e).filename,function:t.function||El}))}function vp(n){return n[n.length-1]||{}}const ly="<anonymous>";function Xo(n){try{return!n||typeof n!="function"?ly:n.name||ly}catch(e){return ly}}function mM(n){const e=n.exception;if(e){const t=[];try{return e.values.forEach(i=>{i.stacktrace.frames&&t.push(...i.stacktrace.frames)}),t}catch(i){return}}}const Dm={},gM={};function kl(n,e){Dm[n]=Dm[n]||[],Dm[n].push(e)}function Ul(n,e){if(!gM[n]){gM[n]=!0;try{e()}catch(t){Ht&&Tt.error("Error while instrumenting ".concat(n),t)}}}function hs(n,e){const t=n&&Dm[n];if(t)for(const i of t)try{i(e)}catch(r){Ht&&Tt.error("Error while triggering instrumentation handler.\nType: ".concat(n,"\nName: ").concat(Xo(i),"\nError:"),r)}}let cy=null;function ez(n){const e="error";kl(e,n),Ul(e,tz)}function tz(){cy=Rn.onerror,Rn.onerror=function(n,e,t,i,r){return hs("error",{column:i,error:r,line:t,msg:n,url:e}),cy?cy.apply(this,arguments):!1},Rn.onerror.__SENTRY_INSTRUMENTED__=!0}let uy=null;function nz(n){const e="unhandledrejection";kl(e,n),Ul(e,iz)}function iz(){uy=Rn.onunhandledrejection,Rn.onunhandledrejection=function(n){return hs("unhandledrejection",n),uy?uy.apply(this,arguments):!0},Rn.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}const _D=Object.prototype.toString;function Qw(n){switch(_D.call(n)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object WebAssembly.Exception]":return!0;default:return Yo(n,Error)}}function xu(n,e){return _D.call(n)==="[object ".concat(e,"]")}function yD(n){return xu(n,"ErrorEvent")}function vM(n){return xu(n,"DOMError")}function rz(n){return xu(n,"DOMException")}function ao(n){return xu(n,"String")}function Zw(n){return typeof n=="object"&&n!==null&&"__sentry_template_string__"in n&&"__sentry_template_values__"in n}function eS(n){return n===null||Zw(n)||typeof n!="object"&&typeof n!="function"}function hd(n){return xu(n,"Object")}function av(n){return typeof Event<"u"&&Yo(n,Event)}function sz(n){return typeof Element<"u"&&Yo(n,Element)}function oz(n){return xu(n,"RegExp")}function qd(n){return!!(n!=null&&n.then&&typeof n.then=="function")}function az(n){return hd(n)&&"nativeEvent"in n&&"preventDefault"in n&&"stopPropagation"in n}function Yo(n,e){try{return n instanceof e}catch(t){return!1}}function bD(n){return!!(typeof n=="object"&&n!==null&&(n.__isVue||n._isVue))}function lz(n){return typeof Request<"u"&&Yo(n,Request)}const tS=Rn,cz=80;function wD(n,e={}){if(!n)return"<unknown>";try{let t=n;const i=5,r=[];let s=0,o=0;const a=" > ",l=a.length;let c;const u=Array.isArray(e)?e:e.keyAttrs,d=!Array.isArray(e)&&e.maxStringLength||cz;for(;t&&s++<i&&(c=uz(t,u),!(c==="html"||s>1&&o+r.length*l+c.length>=d));)r.push(c),o+=c.length,t=t.parentNode;return r.reverse().join(a)}catch(t){return"<unknown>"}}function uz(n,e){const t=n,i=[];if(!(t!=null&&t.tagName))return"";if(tS.HTMLElement&&t instanceof HTMLElement&&t.dataset){if(t.dataset.sentryComponent)return t.dataset.sentryComponent;if(t.dataset.sentryElement)return t.dataset.sentryElement}i.push(t.tagName.toLowerCase());const r=e!=null&&e.length?e.filter(o=>t.getAttribute(o)).map(o=>[o,t.getAttribute(o)]):null;if(r!=null&&r.length)r.forEach(o=>{i.push("[".concat(o[0],'="').concat(o[1],'"]'))});else{t.id&&i.push("#".concat(t.id));const o=t.className;if(o&&ao(o)){const a=o.split(/\s+/);for(const l of a)i.push(".".concat(l))}}const s=["aria-label","type","name","title","alt"];for(const o of s){const a=t.getAttribute(o);a&&i.push("[".concat(o,'="').concat(a,'"]'))}return i.join("")}function nS(){try{return tS.document.location.href}catch(n){return""}}function hz(n){if(!tS.HTMLElement)return null;let e=n;const t=5;for(let i=0;i<t;i++){if(!e)return null;if(e instanceof HTMLElement){if(e.dataset.sentryComponent)return e.dataset.sentryComponent;if(e.dataset.sentryElement)return e.dataset.sentryElement}e=e.parentNode}return null}function Jm(n,e=0){return typeof n!="string"||e===0||n.length<=e?n:"".concat(n.slice(0,e),"...")}function _M(n,e){if(!Array.isArray(n))return"";const t=[];for(let i=0;i<n.length;i++){const r=n[i];try{bD(r)?t.push("[VueViewModel]"):t.push(String(r))}catch(s){t.push("[value cannot be serialized]")}}return t.join(e)}function Pm(n,e,t=!1){return ao(n)?oz(e)?e.test(n):ao(e)?t?n===e:n.includes(e):!1:!1}function lv(n,e=[],t=!1){return e.some(i=>Pm(n,i,t))}function Er(n,e,t){if(!(e in n))return;const i=n[e];if(typeof i!="function")return;const r=t(i);typeof r=="function"&&SD(r,i);try{n[e]=r}catch(s){Ht&&Tt.log('Failed to replace method "'.concat(e,'" in object'),n)}}function Al(n,e,t){try{Object.defineProperty(n,e,{value:t,writable:!0,configurable:!0})}catch(i){Ht&&Tt.log('Failed to add non-enumerable property "'.concat(e,'" to object'),n)}}function SD(n,e){try{const t=e.prototype||{};n.prototype=e.prototype=t,Al(n,"__sentry_original__",e)}catch(t){}}function iS(n){return n.__sentry_original__}function xD(n){if(Qw(n))return{message:n.message,name:n.name,stack:n.stack,...bM(n)};if(av(n)){const e={type:n.type,target:yM(n.target),currentTarget:yM(n.currentTarget),...bM(n)};return typeof CustomEvent<"u"&&Yo(n,CustomEvent)&&(e.detail=n.detail),e}else return n}function yM(n){try{return sz(n)?wD(n):Object.prototype.toString.call(n)}catch(e){return"<unknown>"}}function bM(n){if(typeof n=="object"&&n!==null){const e={};for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e}else return{}}function dz(n,e=40){const t=Object.keys(xD(n));t.sort();const i=t[0];if(!i)return"[object has no keys]";if(i.length>=e)return Jm(i,e);for(let r=t.length;r>0;r--){const s=t.slice(0,r).join(", ");if(!(s.length>e))return r===t.length?s:Jm(s,e)}return""}function fz(){const n=Rn;return n.crypto||n.msCrypto}function Gr(n=fz()){let e=()=>Math.random()*16;try{if(n!=null&&n.randomUUID)return n.randomUUID().replace(/-/g,"");n!=null&&n.getRandomValues&&(e=()=>{const t=new Uint8Array(1);return n.getRandomValues(t),t[0]})}catch(t){}return("10000000100040008000"+1e11).replace(/[018]/g,t=>(t^(e()&15)>>t/4).toString(16))}function ED(n){var e,t;return(t=(e=n.exception)==null?void 0:e.values)==null?void 0:t[0]}function el(n){const{message:e,event_id:t}=n;if(e)return e;const i=ED(n);return i?i.type&&i.value?"".concat(i.type,": ").concat(i.value):i.type||i.value||t||"<unknown>":t||"<unknown>"}function bb(n,e,t){const i=n.exception=n.exception||{},r=i.values=i.values||[],s=r[0]=r[0]||{};s.value||(s.value=e||""),s.type||(s.type="Error")}function tu(n,e){const t=ED(n);if(!t)return;const i={type:"generic",handled:!0},r=t.mechanism;if(t.mechanism={...i,...r,...e},e&&"data"in e){const s={...r==null?void 0:r.data,...e.data};t.mechanism.data=s}}function wM(n){if(pz(n))return!0;try{Al(n,"__sentry_captured__",!0)}catch(e){}return!1}function pz(n){try{return n.__sentry_captured__}catch(e){}}const AD=1e3;function Xd(){return Date.now()/AD}function mz(){const{performance:n}=Rn;if(!(n!=null&&n.now)||!n.timeOrigin)return Xd;const e=n.timeOrigin;return()=>(e+n.now())/AD}let _p;function lo(){return(_p!=null?_p:_p=mz())()}function gz(n){const e=lo(),t={sid:Gr(),init:!0,timestamp:e,started:e,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>_z(t)};return n&&nu(t,n),t}function nu(n,e={}){if(e.user&&(!n.ipAddress&&e.user.ip_address&&(n.ipAddress=e.user.ip_address),!n.did&&!e.did&&(n.did=e.user.id||e.user.email||e.user.username)),n.timestamp=e.timestamp||lo(),e.abnormal_mechanism&&(n.abnormal_mechanism=e.abnormal_mechanism),e.ignoreDuration&&(n.ignoreDuration=e.ignoreDuration),e.sid&&(n.sid=e.sid.length===32?e.sid:Gr()),e.init!==void 0&&(n.init=e.init),!n.did&&e.did&&(n.did="".concat(e.did)),typeof e.started=="number"&&(n.started=e.started),n.ignoreDuration)n.duration=void 0;else if(typeof e.duration=="number")n.duration=e.duration;else{const t=n.timestamp-n.started;n.duration=t>=0?t:0}e.release&&(n.release=e.release),e.environment&&(n.environment=e.environment),!n.ipAddress&&e.ipAddress&&(n.ipAddress=e.ipAddress),!n.userAgent&&e.userAgent&&(n.userAgent=e.userAgent),typeof e.errors=="number"&&(n.errors=e.errors),e.status&&(n.status=e.status)}function vz(n,e){let t={};n.status==="ok"&&(t={status:"exited"}),nu(n,t)}function _z(n){return{sid:"".concat(n.sid),init:n.init,started:new Date(n.started*1e3).toISOString(),timestamp:new Date(n.timestamp*1e3).toISOString(),status:n.status,errors:n.errors,did:typeof n.did=="number"||typeof n.did=="string"?"".concat(n.did):void 0,duration:n.duration,abnormal_mechanism:n.abnormal_mechanism,attrs:{release:n.release,environment:n.environment,ip_address:n.ipAddress,user_agent:n.userAgent}}}function Yd(n,e,t=2){if(!e||typeof e!="object"||t<=0)return e;if(n&&Object.keys(e).length===0)return n;const i={...n};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(i[r]=Yd(i[r],e[r],t-1));return i}function SM(){return Gr()}function MD(){return Gr().substring(16)}const wb="_sentrySpan";function xM(n,e){e?Al(n,wb,e):delete n[wb]}function EM(n){return n[wb]}const yz=100;class Ls{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:SM(),sampleRand:Math.random()}}clone(){const e=new Ls;return e._breadcrumbs=[...this._breadcrumbs],e._tags={...this._tags},e._extra={...this._extra},e._contexts={...this._contexts},this._contexts.flags&&(e._contexts.flags={values:[...this._contexts.flags.values]}),e._user=this._user,e._level=this._level,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=[...this._eventProcessors],e._attachments=[...this._attachments],e._sdkProcessingMetadata={...this._sdkProcessingMetadata},e._propagationContext={...this._propagationContext},e._client=this._client,e._lastEventId=this._lastEventId,xM(e,EM(this)),e}setClient(e){this._client=e}setLastEventId(e){this._lastEventId=e}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&nu(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,t){return this._tags={...this._tags,[e]:t},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,t){return this._extra={...this._extra,[e]:t},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,t){return t===null?delete this._contexts[e]:this._contexts[e]=t,this._notifyScopeListeners(),this}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;const t=typeof e=="function"?e(this):e,i=t instanceof Ls?t.getScopeData():hd(t)?e:void 0,{tags:r,extra:s,user:o,contexts:a,level:l,fingerprint:c=[],propagationContext:u}=i||{};return this._tags={...this._tags,...r},this._extra={...this._extra,...s},this._contexts={...this._contexts,...a},o&&Object.keys(o).length&&(this._user=o),l&&(this._level=l),c.length&&(this._fingerprint=c),u&&(this._propagationContext=u),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._session=void 0,xM(this,void 0),this._attachments=[],this.setPropagationContext({traceId:SM(),sampleRand:Math.random()}),this._notifyScopeListeners(),this}addBreadcrumb(e,t){var s;const i=typeof t=="number"?t:yz;if(i<=0)return this;const r={timestamp:Xd(),...e,message:e.message?Jm(e.message,2048):e.message};return this._breadcrumbs.push(r),this._breadcrumbs.length>i&&(this._breadcrumbs=this._breadcrumbs.slice(-i),(s=this._client)==null||s.recordDroppedEvent("buffer_overflow","log_item")),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:EM(this)}}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata=Yd(this._sdkProcessingMetadata,e,2),this}setPropagationContext(e){return this._propagationContext=e,this}getPropagationContext(){return this._propagationContext}captureException(e,t){const i=(t==null?void 0:t.event_id)||Gr();if(!this._client)return Ht&&Tt.warn("No client configured on scope - will not capture exception!"),i;const r=new Error("Sentry syntheticException");return this._client.captureException(e,{originalException:e,syntheticException:r,...t,event_id:i},this),i}captureMessage(e,t,i){const r=(i==null?void 0:i.event_id)||Gr();if(!this._client)return Ht&&Tt.warn("No client configured on scope - will not capture message!"),r;const s=new Error(e);return this._client.captureMessage(e,t,{originalException:e,syntheticException:s,...i,event_id:r},this),r}captureEvent(e,t){const i=(t==null?void 0:t.event_id)||Gr();return this._client?(this._client.captureEvent(e,{...t,event_id:i},this),i):(Ht&&Tt.warn("No client configured on scope - will not capture event!"),i)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(e=>{e(this)}),this._notifyingListeners=!1)}}function bz(){return jd("defaultCurrentScope",()=>new Ls)}function wz(){return jd("defaultIsolationScope",()=>new Ls)}class Sz{constructor(e,t){let i;e?i=e:i=new Ls;let r;t?r=t:r=new Ls,this._stack=[{scope:i}],this._isolationScope=r}withScope(e){const t=this._pushScope();let i;try{i=e(t)}catch(r){throw this._popScope(),r}return qd(i)?i.then(r=>(this._popScope(),r),r=>{throw this._popScope(),r}):(this._popScope(),i)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const e=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:e}),e}_popScope(){return this._stack.length<=1?!1:!!this._stack.pop()}}function iu(){const n=sv(),e=ov(n);return e.stack=e.stack||new Sz(bz(),wz())}function xz(n){return iu().withScope(n)}function Ez(n,e){const t=iu();return t.withScope(()=>(t.getStackTop().scope=n,e(n)))}function AM(n){return iu().withScope(()=>n(iu().getIsolationScope()))}function Az(){return{withIsolationScope:AM,withScope:xz,withSetScope:Ez,withSetIsolationScope:(n,e)=>AM(e),getCurrentScope:()=>iu().getScope(),getIsolationScope:()=>iu().getIsolationScope()}}function rS(n){const e=ov(n);return e.acs?e.acs:Az()}function go(){const n=sv();return rS(n).getCurrentScope()}function Nl(){const n=sv();return rS(n).getIsolationScope()}function Mz(){return jd("globalScope",()=>new Ls)}function Tz(...n){const e=sv(),t=rS(e);if(n.length===2){const[i,r]=n;return i?t.withSetScope(i,r):t.withScope(r)}return t.withScope(n[0])}function Gi(){return go().getClient()}function Cz(n){const e=n.getPropagationContext(),{traceId:t,parentSpanId:i,propagationSpanId:r}=e,s={trace_id:t,span_id:r||MD()};return i&&(s.parent_span_id=i),s}const Rz="sentry.source",Iz="sentry.sample_rate",Dz="sentry.previous_trace_sample_rate",Pz="sentry.op",Oz="sentry.origin",TD="sentry.profile_id",CD="sentry.exclusive_time",Lz=0,kz=1,Uz="_sentryScope",Nz="_sentryIsolationScope";function Fz(n){if(n){if(typeof n=="object"&&"deref"in n&&typeof n.deref=="function")try{return n.deref()}catch(e){return}return n}}function RD(n){const e=n;return{scope:e[Uz],isolationScope:Fz(e[Nz])}}const Bz="sentry-",zz=/^sentry-/;function Hz(n){const e=Gz(n);if(!e)return;const t=Object.entries(e).reduce((i,[r,s])=>{if(r.match(zz)){const o=r.slice(Bz.length);i[o]=s}return i},{});if(Object.keys(t).length>0)return t}function Gz(n){if(!(!n||!ao(n)&&!Array.isArray(n)))return Array.isArray(n)?n.reduce((e,t)=>{const i=MM(t);return Object.entries(i).forEach(([r,s])=>{e[r]=s}),e},{}):MM(n)}function MM(n){return n.split(",").map(e=>{const t=e.indexOf("=");if(t===-1)return[];const i=e.slice(0,t),r=e.slice(t+1);return[i,r].map(s=>{try{return decodeURIComponent(s.trim())}catch(o){return}})}).reduce((e,[t,i])=>(t&&i&&(e[t]=i),e),{})}const Vz=/^o(\d+)\./,Wz=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function jz(n){return n==="http"||n==="https"}function Kd(n,e=!1){const{host:t,path:i,pass:r,port:s,projectId:o,protocol:a,publicKey:l}=n;return"".concat(a,"://").concat(l).concat(e&&r?":".concat(r):"")+"@".concat(t).concat(s?":".concat(s):"","/").concat(i&&"".concat(i,"/")).concat(o)}function qz(n){const e=Wz.exec(n);if(!e){Su(()=>{console.error("Invalid Sentry Dsn: ".concat(n))});return}const[t,i,r="",s="",o="",a=""]=e.slice(1);let l="",c=a;const u=c.split("/");if(u.length>1&&(l=u.slice(0,-1).join("/"),c=u.pop()),c){const d=c.match(/^\d+/);d&&(c=d[0])}return ID({host:s,pass:r,path:l,projectId:c,port:o,protocol:t,publicKey:i})}function ID(n){return{protocol:n.protocol,publicKey:n.publicKey||"",pass:n.pass||"",host:n.host,port:n.port||"",path:n.path||"",projectId:n.projectId}}function Xz(n){if(!Ht)return!0;const{port:e,projectId:t,protocol:i}=n;return["protocol","publicKey","host","projectId"].find(o=>n[o]?!1:(Tt.error("Invalid Sentry Dsn: ".concat(o," missing")),!0))?!1:t.match(/^\d+$/)?jz(i)?e&&isNaN(parseInt(e,10))?(Tt.error("Invalid Sentry Dsn: Invalid port ".concat(e)),!1):!0:(Tt.error("Invalid Sentry Dsn: Invalid protocol ".concat(i)),!1):(Tt.error("Invalid Sentry Dsn: Invalid projectId ".concat(t)),!1)}function Yz(n){const e=n.match(Vz);return e==null?void 0:e[1]}function Kz(n){const e=n.getOptions(),{host:t}=n.getDsn()||{};let i;return e.orgId?i=String(e.orgId):t&&(i=Yz(t)),i}function DD(n){const e=typeof n=="string"?qz(n):ID(n);if(!(!e||!Xz(e)))return e}function $z(n){if(typeof n=="boolean")return Number(n);const e=typeof n=="string"?parseFloat(n):n;if(!(typeof e!="number"||isNaN(e)||e<0||e>1))return e}const PD=1;let TM=!1;function Jz(n){const{spanId:e,traceId:t,isRemote:i}=n.spanContext(),r=i?e:sS(n).parent_span_id,s=RD(n).scope,o=i?(s==null?void 0:s.getPropagationContext().propagationSpanId)||MD():e;return{parent_span_id:r,span_id:o,trace_id:t}}function Qz(n){if(n&&n.length>0)return n.map(({context:{spanId:e,traceId:t,traceFlags:i,...r},attributes:s})=>({span_id:e,trace_id:t,sampled:i===PD,attributes:s,...r}))}function CM(n){return typeof n=="number"?RM(n):Array.isArray(n)?n[0]+n[1]/1e9:n instanceof Date?RM(n.getTime()):lo()}function RM(n){return n>9999999999?n/1e3:n}function sS(n){var i;if(eH(n))return n.getSpanJSON();const{spanId:e,traceId:t}=n.spanContext();if(Zz(n)){const{attributes:r,startTime:s,name:o,endTime:a,status:l,links:c}=n,u="parentSpanId"in n?n.parentSpanId:"parentSpanContext"in n?(i=n.parentSpanContext)==null?void 0:i.spanId:void 0;return{span_id:e,trace_id:t,data:r,description:o,parent_span_id:u,start_timestamp:CM(s),timestamp:CM(a)||void 0,status:nH(l),op:r[Pz],origin:r[Oz],links:Qz(c)}}return{span_id:e,trace_id:t,start_timestamp:0,data:{}}}function Zz(n){const e=n;return!!e.attributes&&!!e.startTime&&!!e.name&&!!e.endTime&&!!e.status}function eH(n){return typeof n.getSpanJSON=="function"}function tH(n){const{traceFlags:e}=n.spanContext();return e===PD}function nH(n){if(!(!n||n.code===Lz))return n.code===kz?"ok":n.message||"unknown_error"}const iH="_sentryRootSpan";function OD(n){return n[iH]||n}function IM(){TM||(Su(()=>{console.warn("[Sentry] Returning null from `beforeSendSpan` is disallowed. To drop certain spans, configure the respective integrations directly or use `ignoreSpans`.")}),TM=!0)}function rH(n){var t;if(typeof __SENTRY_TRACING__=="boolean"&&!__SENTRY_TRACING__)return!1;const e=(t=Gi())==null?void 0:t.getOptions();return!!e&&(e.tracesSampleRate!=null||!!e.tracesSampler)}function DM(n){Tt.log("Ignoring span ".concat(n.op," - ").concat(n.description," because it matches `ignoreSpans`."))}function PM(n,e){if(!(e!=null&&e.length)||!n.description)return!1;for(const t of e){if(oH(t)){if(Pm(n.description,t))return Ht&&DM(n),!0;continue}if(!t.name&&!t.op)continue;const i=t.name?Pm(n.description,t.name):!0,r=t.op?n.op&&Pm(n.op,t.op):!0;if(i&&r)return Ht&&DM(n),!0}return!1}function sH(n,e){const t=e.parent_span_id,i=e.span_id;if(t)for(const r of n)r.parent_span_id===i&&(r.parent_span_id=t)}function oH(n){return typeof n=="string"||n instanceof RegExp}const oS="production",aH="_frozenDsc";function LD(n,e){const t=e.getOptions(),{publicKey:i}=e.getDsn()||{},r={environment:t.environment||oS,release:t.release,public_key:i,trace_id:n,org_id:Kz(e)};return e.emit("createDsc",r),r}function lH(n,e){const t=e.getPropagationContext();return t.dsc||LD(t.traceId,n)}function cH(n){var v,g,y,b;const e=Gi();if(!e)return{};const t=OD(n),i=sS(t),r=i.data,s=t.spanContext().traceState,o=(g=(v=s==null?void 0:s.get("sentry.sample_rate"))!=null?v:r[Iz])!=null?g:r[Dz];function a(S){return(typeof o=="number"||typeof o=="string")&&(S.sample_rate="".concat(o)),S}const l=t[aH];if(l)return a(l);const c=s==null?void 0:s.get("sentry.dsc"),u=c&&Hz(c);if(u)return a(u);const d=LD(n.spanContext().traceId,e),f=r[Rz],m=i.description;return f!=="url"&&m&&(d.transaction=m),rH()&&(d.sampled=String(tH(t)),d.sample_rand=(b=s==null?void 0:s.get("sentry.sample_rand"))!=null?b:(y=RD(t).scope)==null?void 0:y.getPropagationContext().sampleRand.toString()),a(d),e.emit("createDsc",d,t),d}function no(n,e=100,t=1/0){try{return Sb("",n,e,t)}catch(i){return{ERROR:"**non-serializable** (".concat(i,")")}}}function kD(n,e=3,t=100*1024){const i=no(n,e);return fH(i)>t?kD(n,e-1,t):i}function Sb(n,e,t=1/0,i=1/0,r=pH()){const[s,o]=r;if(e==null||["boolean","string"].includes(typeof e)||typeof e=="number"&&Number.isFinite(e))return e;const a=uH(n,e);if(!a.startsWith("[object "))return a;if(e.__sentry_skip_normalization__)return e;const l=typeof e.__sentry_override_normalization_depth__=="number"?e.__sentry_override_normalization_depth__:t;if(l===0)return a.replace("object ","");if(s(e))return"[Circular ~]";const c=e;if(c&&typeof c.toJSON=="function")try{const m=c.toJSON();return Sb("",m,l-1,i,r)}catch(m){}const u=Array.isArray(e)?[]:{};let d=0;const f=xD(e);for(const m in f){if(!Object.prototype.hasOwnProperty.call(f,m))continue;if(d>=i){u[m]="[MaxProperties ~]";break}const v=f[m];u[m]=Sb(m,v,l-1,i,r),d++}return o(e),u}function uH(n,e){try{if(n==="domain"&&e&&typeof e=="object"&&e._events)return"[Domain]";if(n==="domainEmitter")return"[DomainEmitter]";if(typeof global<"u"&&e===global)return"[Global]";if(typeof window<"u"&&e===window)return"[Window]";if(typeof document<"u"&&e===document)return"[Document]";if(bD(e))return"[VueViewModel]";if(az(e))return"[SyntheticEvent]";if(typeof e=="number"&&!Number.isFinite(e))return"[".concat(e,"]");if(typeof e=="function")return"[Function: ".concat(Xo(e),"]");if(typeof e=="symbol")return"[".concat(String(e),"]");if(typeof e=="bigint")return"[BigInt: ".concat(String(e),"]");const t=hH(e);return/^HTML(\w*)Element$/.test(t)?"[HTMLElement: ".concat(t,"]"):"[object ".concat(t,"]")}catch(t){return"**non-serializable** (".concat(t,")")}}function hH(n){const e=Object.getPrototypeOf(n);return e!=null&&e.constructor?e.constructor.name:"null prototype"}function dH(n){return~-encodeURI(n).split(/%..|./).length}function fH(n){return dH(JSON.stringify(n))}function pH(){const n=new WeakSet;function e(i){return n.has(i)?!0:(n.add(i),!1)}function t(i){n.delete(i)}return[e,t]}function $d(n,e=[]){return[n,e]}function mH(n,e){const[t,i]=n;return[t,[...i,e]]}function OM(n,e){const t=n[1];for(const i of t){const r=i[0].type;if(e(i,r))return!0}return!1}function xb(n){const e=ov(Rn);return e.encodePolyfill?e.encodePolyfill(n):new TextEncoder().encode(n)}function gH(n){const[e,t]=n;let i=JSON.stringify(e);function r(s){typeof i=="string"?i=typeof s=="string"?i+s:[xb(i),s]:i.push(typeof s=="string"?xb(s):s)}for(const s of t){const[o,a]=s;if(r("\n".concat(JSON.stringify(o),"\n")),typeof a=="string"||a instanceof Uint8Array)r(a);else{let l;try{l=JSON.stringify(a)}catch(c){l=JSON.stringify(no(a))}r(l)}}return typeof i=="string"?i:vH(i)}function vH(n){const e=n.reduce((r,s)=>r+s.length,0),t=new Uint8Array(e);let i=0;for(const r of n)t.set(r,i),i+=r.length;return t}function _H(n){const e=typeof n.data=="string"?xb(n.data):n.data;return[{type:"attachment",length:e.length,filename:n.filename,content_type:n.contentType,attachment_type:n.attachmentType},e]}const yH={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",raw_security:"security",log:"log_item"};function LM(n){return yH[n]}function UD(n){if(!(n!=null&&n.sdk))return;const{name:e,version:t}=n.sdk;return{name:e,version:t}}function bH(n,e,t,i){var s;const r=(s=n.sdkProcessingMetadata)==null?void 0:s.dynamicSamplingContext;return{event_id:n.event_id,sent_at:new Date().toISOString(),...e&&{sdk:e},...!!t&&i&&{dsn:Kd(i)},...r&&{trace:r}}}function wH(n,e){var i,r,s,o;if(!e)return n;const t=n.sdk||{};return n.sdk={...t,name:t.name||e.name,version:t.version||e.version,integrations:[...((i=n.sdk)==null?void 0:i.integrations)||[],...e.integrations||[]],packages:[...((r=n.sdk)==null?void 0:r.packages)||[],...e.packages||[]],settings:(s=n.sdk)!=null&&s.settings||e.settings?{...(o=n.sdk)==null?void 0:o.settings,...e.settings}:void 0},n}function SH(n,e,t,i){const r=UD(t),s={sent_at:new Date().toISOString(),...r&&{sdk:r},...!!i&&e&&{dsn:Kd(e)}},o="aggregates"in n?[{type:"sessions"},n]:[{type:"session"},n.toJSON()];return $d(s,[o])}function xH(n,e,t,i){const r=UD(t),s=n.type&&n.type!=="replay_event"?n.type:"event";wH(n,t==null?void 0:t.sdk);const o=bH(n,r,i,e);return delete n.sdkProcessingMetadata,$d(o,[[{type:s},n]])}const hy=0,kM=1,UM=2;function cv(n){return new dd(e=>{e(n)})}function aS(n){return new dd((e,t)=>{t(n)})}class dd{constructor(e){this._state=hy,this._handlers=[],this._runExecutor(e)}then(e,t){return new dd((i,r)=>{this._handlers.push([!1,s=>{if(!e)i(s);else try{i(e(s))}catch(o){r(o)}},s=>{if(!t)r(s);else try{i(t(s))}catch(o){r(o)}}]),this._executeHandlers()})}catch(e){return this.then(t=>t,e)}finally(e){return new dd((t,i)=>{let r,s;return this.then(o=>{s=!1,r=o,e&&e()},o=>{s=!0,r=o,e&&e()}).then(()=>{if(s){i(r);return}t(r)})})}_executeHandlers(){if(this._state===hy)return;const e=this._handlers.slice();this._handlers=[],e.forEach(t=>{t[0]||(this._state===kM&&t[1](this._value),this._state===UM&&t[2](this._value),t[0]=!0)})}_runExecutor(e){const t=(s,o)=>{if(this._state===hy){if(qd(o)){o.then(i,r);return}this._state=s,this._value=o,this._executeHandlers()}},i=s=>{t(kM,s)},r=s=>{t(UM,s)};try{e(i,r)}catch(s){r(s)}}}function EH(n,e,t,i=0){try{const r=Eb(e,t,n,i);return qd(r)?r:cv(r)}catch(r){return aS(r)}}function Eb(n,e,t,i){const r=t[i];if(!n||!r)return n;const s=r({...n},e);return Ht&&s===null&&Tt.log('Event processor "'.concat(r.id||"?",'" dropped event')),qd(s)?s.then(o=>Eb(o,e,t,i+1)):Eb(s,e,t,i+1)}function AH(n,e){const{fingerprint:t,span:i,breadcrumbs:r,sdkProcessingMetadata:s}=e;MH(n,e),i&&RH(n,i),IH(n,t),TH(n,r),CH(n,s)}function NM(n,e){const{extra:t,tags:i,user:r,contexts:s,level:o,sdkProcessingMetadata:a,breadcrumbs:l,fingerprint:c,eventProcessors:u,attachments:d,propagationContext:f,transactionName:m,span:v}=e;yp(n,"extra",t),yp(n,"tags",i),yp(n,"user",r),yp(n,"contexts",s),n.sdkProcessingMetadata=Yd(n.sdkProcessingMetadata,a,2),o&&(n.level=o),m&&(n.transactionName=m),v&&(n.span=v),l.length&&(n.breadcrumbs=[...n.breadcrumbs,...l]),c.length&&(n.fingerprint=[...n.fingerprint,...c]),u.length&&(n.eventProcessors=[...n.eventProcessors,...u]),d.length&&(n.attachments=[...n.attachments,...d]),n.propagationContext={...n.propagationContext,...f}}function yp(n,e,t){n[e]=Yd(n[e],t,1)}function MH(n,e){const{extra:t,tags:i,user:r,contexts:s,level:o,transactionName:a}=e;Object.keys(t).length&&(n.extra={...t,...n.extra}),Object.keys(i).length&&(n.tags={...i,...n.tags}),Object.keys(r).length&&(n.user={...r,...n.user}),Object.keys(s).length&&(n.contexts={...s,...n.contexts}),o&&(n.level=o),a&&n.type!=="transaction"&&(n.transaction=a)}function TH(n,e){const t=[...n.breadcrumbs||[],...e];n.breadcrumbs=t.length?t:void 0}function CH(n,e){n.sdkProcessingMetadata={...n.sdkProcessingMetadata,...e}}function RH(n,e){n.contexts={trace:Jz(e),...n.contexts},n.sdkProcessingMetadata={dynamicSamplingContext:cH(e),...n.sdkProcessingMetadata};const t=OD(e),i=sS(t).description;i&&!n.transaction&&n.type==="transaction"&&(n.transaction=i)}function IH(n,e){n.fingerprint=n.fingerprint?Array.isArray(n.fingerprint)?n.fingerprint:[n.fingerprint]:[],e&&(n.fingerprint=n.fingerprint.concat(e)),n.fingerprint.length||delete n.fingerprint}let bp,FM,wp;function DH(n){const e=Rn._sentryDebugIds;if(!e)return{};const t=Object.keys(e);return wp&&t.length===FM||(FM=t.length,wp=t.reduce((i,r)=>{bp||(bp={});const s=bp[r];if(s)i[s[0]]=s[1];else{const o=n(r);for(let a=o.length-1;a>=0;a--){const l=o[a],c=l==null?void 0:l.filename,u=e[r];if(c&&u){i[c]=u,bp[r]=[c,u];break}}}return i},{})),wp}function PH(n,e,t,i,r,s){const{normalizeDepth:o=3,normalizeMaxBreadth:a=1e3}=n,l={...e,event_id:e.event_id||t.event_id||Gr(),timestamp:e.timestamp||Xd()},c=t.integrations||n.integrations.map(y=>y.name);OH(l,n),UH(l,c),r&&r.emit("applyFrameMetadata",e),e.type===void 0&&LH(l,n.stackParser);const u=FH(i,t.captureContext);t.mechanism&&tu(l,t.mechanism);const d=r?r.getEventProcessors():[],f=Mz().getScopeData();if(s){const y=s.getScopeData();NM(f,y)}if(u){const y=u.getScopeData();NM(f,y)}const m=[...t.attachments||[],...f.attachments];m.length&&(t.attachments=m),AH(l,f);const v=[...d,...f.eventProcessors];return EH(v,l,t).then(y=>(y&&kH(y),typeof o=="number"&&o>0?NH(y,o,a):y))}function OH(n,e){const{environment:t,release:i,dist:r,maxValueLength:s=250}=e;n.environment=n.environment||t||oS,!n.release&&i&&(n.release=i),!n.dist&&r&&(n.dist=r);const o=n.request;o!=null&&o.url&&(o.url=Jm(o.url,s))}function LH(n,e){var i,r;const t=DH(e);(r=(i=n.exception)==null?void 0:i.values)==null||r.forEach(s=>{var o,a;(a=(o=s.stacktrace)==null?void 0:o.frames)==null||a.forEach(l=>{l.filename&&(l.debug_id=t[l.filename])})})}function kH(n){var i,r;const e={};if((r=(i=n.exception)==null?void 0:i.values)==null||r.forEach(s=>{var o,a;(a=(o=s.stacktrace)==null?void 0:o.frames)==null||a.forEach(l=>{l.debug_id&&(l.abs_path?e[l.abs_path]=l.debug_id:l.filename&&(e[l.filename]=l.debug_id),delete l.debug_id)})}),Object.keys(e).length===0)return;n.debug_meta=n.debug_meta||{},n.debug_meta.images=n.debug_meta.images||[];const t=n.debug_meta.images;Object.entries(e).forEach(([s,o])=>{t.push({type:"sourcemap",code_file:s,debug_id:o})})}function UH(n,e){e.length>0&&(n.sdk=n.sdk||{},n.sdk.integrations=[...n.sdk.integrations||[],...e])}function NH(n,e,t){var r,s;if(!n)return null;const i={...n,...n.breadcrumbs&&{breadcrumbs:n.breadcrumbs.map(o=>({...o,...o.data&&{data:no(o.data,e,t)}}))},...n.user&&{user:no(n.user,e,t)},...n.contexts&&{contexts:no(n.contexts,e,t)},...n.extra&&{extra:no(n.extra,e,t)}};return(r=n.contexts)!=null&&r.trace&&i.contexts&&(i.contexts.trace=n.contexts.trace,n.contexts.trace.data&&(i.contexts.trace.data=no(n.contexts.trace.data,e,t))),n.spans&&(i.spans=n.spans.map(o=>({...o,...o.data&&{data:no(o.data,e,t)}}))),(s=n.contexts)!=null&&s.flags&&i.contexts&&(i.contexts.flags=no(n.contexts.flags,3,t)),i}function FH(n,e){if(!e)return n;const t=n?n.clone():new Ls;return t.update(e),t}function BH(n){if(n)return zH(n)?{captureContext:n}:GH(n)?{captureContext:n}:n}function zH(n){return n instanceof Ls||typeof n=="function"}const HH=["user","level","extra","contexts","tags","fingerprint","propagationContext"];function GH(n){return Object.keys(n).some(e=>HH.includes(e))}function VH(n,e){return go().captureException(n,BH(e))}function ND(n,e){return go().captureEvent(n,e)}function Nse(n,e){Nl().setContext(n,e)}function WH(){return Nl().lastEventId()}function BM(n){const e=Nl(),t=go(),{userAgent:i}=Rn.navigator||{},r=gz({user:t.getUser()||e.getUser(),...i&&{userAgent:i},...n}),s=e.getSession();return(s==null?void 0:s.status)==="ok"&&nu(s,{status:"exited"}),FD(),e.setSession(r),r}function FD(){const n=Nl(),t=go().getSession()||n.getSession();t&&vz(t),BD(),n.setSession()}function BD(){const n=Nl(),e=Gi(),t=n.getSession();t&&e&&e.captureSession(t)}function zM(n=!1){if(n){FD();return}BD()}const jH="7";function zD(n){const e=n.protocol?"".concat(n.protocol,":"):"",t=n.port?":".concat(n.port):"";return"".concat(e,"//").concat(n.host).concat(t).concat(n.path?"/".concat(n.path):"","/api/")}function qH(n){return"".concat(zD(n)).concat(n.projectId,"/envelope/")}function XH(n,e){const t={sentry_version:jH};return n.publicKey&&(t.sentry_key=n.publicKey),e&&(t.sentry_client="".concat(e.name,"/").concat(e.version)),new URLSearchParams(t).toString()}function YH(n,e,t){return e||"".concat(qH(n),"?").concat(XH(n,t))}function KH(n,e){const t=DD(n);if(!t)return"";const i="".concat(zD(t),"embed/error-page/");let r="dsn=".concat(Kd(t));for(const s in e)if(s!=="dsn"&&s!=="onClose")if(s==="user"){const o=e.user;if(!o)continue;o.name&&(r+="&name=".concat(encodeURIComponent(o.name))),o.email&&(r+="&email=".concat(encodeURIComponent(o.email)))}else r+="&".concat(encodeURIComponent(s),"=").concat(encodeURIComponent(e[s]));return"".concat(i,"?").concat(r)}const HM=[];function $H(n){const e={};return n.forEach(t=>{const{name:i}=t,r=e[i];r&&!r.isDefaultInstance&&t.isDefaultInstance||(e[i]=t)}),Object.values(e)}function JH(n){const e=n.defaultIntegrations||[],t=n.integrations;e.forEach(r=>{r.isDefaultInstance=!0});let i;if(Array.isArray(t))i=[...e,...t];else if(typeof t=="function"){const r=t(e);i=Array.isArray(r)?r:[r]}else i=e;return $H(i)}function QH(n,e){const t={};return e.forEach(i=>{i&&HD(n,i,t)}),t}function GM(n,e){for(const t of e)t!=null&&t.afterAllSetup&&t.afterAllSetup(n)}function HD(n,e,t){if(t[e.name]){Ht&&Tt.log("Integration skipped because it was already installed: ".concat(e.name));return}if(t[e.name]=e,HM.indexOf(e.name)===-1&&typeof e.setupOnce=="function"&&(e.setupOnce(),HM.push(e.name)),e.setup&&typeof e.setup=="function"&&e.setup(n),typeof e.preprocessEvent=="function"){const i=e.preprocessEvent.bind(e);n.on("preprocessEvent",(r,s)=>i(r,s,n))}if(typeof e.processEvent=="function"){const i=e.processEvent.bind(e),r=Object.assign((s,o)=>i(s,o,n),{id:e.name});n.addEventProcessor(r)}Ht&&Tt.log("Integration installed: ".concat(e.name))}function ZH(n,e,t){const i=[{type:"client_report"},{timestamp:Xd(),discarded_events:n}];return $d(e?{dsn:e}:{},[i])}function GD(n){const e=[];n.message&&e.push(n.message);try{const t=n.exception.values[n.exception.values.length-1];t!=null&&t.value&&(e.push(t.value),t.type&&e.push("".concat(t.type,": ").concat(t.value)))}catch(t){}return e}function e4(n){var l,c,u;const{trace_id:e,parent_span_id:t,span_id:i,status:r,origin:s,data:o,op:a}=(c=(l=n.contexts)==null?void 0:l.trace)!=null?c:{};return{data:o!=null?o:{},description:n.transaction,op:a,parent_span_id:t,span_id:i!=null?i:"",start_timestamp:(u=n.start_timestamp)!=null?u:0,status:r,timestamp:n.timestamp,trace_id:e!=null?e:"",origin:s,profile_id:o==null?void 0:o[TD],exclusive_time:o==null?void 0:o[CD],measurements:n.measurements,is_segment:!0}}function t4(n){return{type:"transaction",timestamp:n.timestamp,start_timestamp:n.start_timestamp,transaction:n.description,contexts:{trace:{trace_id:n.trace_id,span_id:n.span_id,parent_span_id:n.parent_span_id,op:n.op,status:n.status,origin:n.origin,data:{...n.data,...n.profile_id&&{[TD]:n.profile_id},...n.exclusive_time&&{[CD]:n.exclusive_time}}}},measurements:n.measurements}}const VM="Not capturing exception because it's already been captured.",WM="Discarded session because of missing or non-string release",VD=Symbol.for("SentryInternalError"),WD=Symbol.for("SentryDoNotSendEventError");function Om(n){return{message:n,[VD]:!0}}function dy(n){return{message:n,[WD]:!0}}function jM(n){return!!n&&typeof n=="object"&&VD in n}function qM(n){return!!n&&typeof n=="object"&&WD in n}class n4{constructor(e){if(this._options=e,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],e.dsn?this._dsn=DD(e.dsn):Ht&&Tt.warn("No DSN provided, client will not send events."),this._dsn){const t=YH(this._dsn,e.tunnel,e._metadata?e._metadata.sdk:void 0);this._transport=e.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...e.transportOptions,url:t})}}captureException(e,t,i){const r=Gr();if(wM(e))return Ht&&Tt.log(VM),r;const s={event_id:r,...t};return this._process(this.eventFromException(e,s).then(o=>this._captureEvent(o,s,i))),s.event_id}captureMessage(e,t,i,r){const s={event_id:Gr(),...i},o=Zw(e)?e:String(e),a=eS(e)?this.eventFromMessage(o,t,s):this.eventFromException(e,s);return this._process(a.then(l=>this._captureEvent(l,s,r))),s.event_id}captureEvent(e,t,i){const r=Gr();if(t!=null&&t.originalException&&wM(t.originalException))return Ht&&Tt.log(VM),r;const s={event_id:r,...t},o=e.sdkProcessingMetadata||{},a=o.capturedSpanScope,l=o.capturedSpanIsolationScope;return this._process(this._captureEvent(e,s,a||i,l)),s.event_id}captureSession(e){this.sendSession(e),nu(e,{init:!1})}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}async flush(e){const t=this._transport;if(!t)return!0;this.emit("flush");const i=await this._isClientDoneProcessing(e),r=await t.flush(e);return i&&r}async close(e){const t=await this.flush(e);return this.getOptions().enabled=!1,this.emit("close"),t}getEventProcessors(){return this._eventProcessors}addEventProcessor(e){this._eventProcessors.push(e)}init(){(this._isEnabled()||this._options.integrations.some(({name:e})=>e.startsWith("Spotlight")))&&this._setupIntegrations()}getIntegrationByName(e){return this._integrations[e]}addIntegration(e){const t=this._integrations[e.name];HD(this,e,this._integrations),t||GM(this,[e])}sendEvent(e,t={}){this.emit("beforeSendEvent",e,t);let i=xH(e,this._dsn,this._options._metadata,this._options.tunnel);for(const r of t.attachments||[])i=mH(i,_H(r));this.sendEnvelope(i).then(r=>this.emit("afterSendEvent",e,r))}sendSession(e){const{release:t,environment:i=oS}=this._options;if("aggregates"in e){const s=e.attrs||{};if(!s.release&&!t){Ht&&Tt.warn(WM);return}s.release=s.release||t,s.environment=s.environment||i,e.attrs=s}else{if(!e.release&&!t){Ht&&Tt.warn(WM);return}e.release=e.release||t,e.environment=e.environment||i}this.emit("beforeSendSession",e);const r=SH(e,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(r)}recordDroppedEvent(e,t,i=1){if(this._options.sendClientReports){const r="".concat(e,":").concat(t);Ht&&Tt.log('Recording outcome: "'.concat(r,'"').concat(i>1?" (".concat(i," times)"):"")),this._outcomes[r]=(this._outcomes[r]||0)+i}}on(e,t){const i=this._hooks[e]=this._hooks[e]||new Set,r=(...s)=>t(...s);return i.add(r),()=>{i.delete(r)}}emit(e,...t){const i=this._hooks[e];i&&i.forEach(r=>r(...t))}async sendEnvelope(e){if(this.emit("beforeEnvelope",e),this._isEnabled()&&this._transport)try{return await this._transport.send(e)}catch(t){return Ht&&Tt.error("Error while sending envelope:",t),{}}return Ht&&Tt.error("Transport disabled"),{}}_setupIntegrations(){const{integrations:e}=this._options;this._integrations=QH(this,e),GM(this,e)}_updateSessionFromEvent(e,t){var l;let i=t.level==="fatal",r=!1;const s=(l=t.exception)==null?void 0:l.values;if(s){r=!0;for(const c of s){const u=c.mechanism;if((u==null?void 0:u.handled)===!1){i=!0;break}}}const o=e.status==="ok";(o&&e.errors===0||o&&i)&&(nu(e,{...i&&{status:"crashed"},errors:e.errors||Number(r||i)}),this.captureSession(e))}async _isClientDoneProcessing(e){let t=0;for(;!e||t<e;){if(await new Promise(i=>setTimeout(i,1)),!this._numProcessing)return!0;t++}return!1}_isEnabled(){return this.getOptions().enabled!==!1&&this._transport!==void 0}_prepareEvent(e,t,i,r){const s=this.getOptions(),o=Object.keys(this._integrations);return!t.integrations&&(o!=null&&o.length)&&(t.integrations=o),this.emit("preprocessEvent",e,t),e.type||r.setLastEventId(e.event_id||t.event_id),PH(s,e,t,i,this,r).then(a=>{if(a===null)return a;this.emit("postprocessEvent",a,t),a.contexts={trace:Cz(i),...a.contexts};const l=lH(this,i);return a.sdkProcessingMetadata={dynamicSamplingContext:l,...a.sdkProcessingMetadata},a})}_captureEvent(e,t={},i=go(),r=Nl()){return Ht&&Ab(e)&&Tt.log("Captured error event `".concat(GD(e)[0]||"<unknown>","`")),this._processEvent(e,t,i,r).then(s=>s.event_id,s=>{Ht&&(qM(s)?Tt.log(s.message):jM(s)?Tt.warn(s.message):Tt.warn(s))})}_processEvent(e,t,i,r){const s=this.getOptions(),{sampleRate:o}=s,a=jD(e),l=Ab(e),c=e.type||"error",u="before send for type `".concat(c,"`"),d=typeof o>"u"?void 0:$z(o);if(l&&typeof d=="number"&&Math.random()>d)return this.recordDroppedEvent("sample_rate","error"),aS(dy("Discarding event because it's not included in the random sample (sampling rate = ".concat(o,")")));const f=c==="replay_event"?"replay":c;return this._prepareEvent(e,t,i,r).then(m=>{if(m===null)throw this.recordDroppedEvent("event_processor",f),dy("An event processor returned `null`, will not send event.");if(t.data&&t.data.__sentry__===!0)return m;const g=r4(this,s,m,t);return i4(g,u)}).then(m=>{var y;if(m===null){if(this.recordDroppedEvent("before_send",f),a){const S=1+(e.spans||[]).length;this.recordDroppedEvent("before_send","span",S)}throw dy("".concat(u," returned `null`, will not send event."))}const v=i.getSession()||r.getSession();if(l&&v&&this._updateSessionFromEvent(v,m),a){const b=((y=m.sdkProcessingMetadata)==null?void 0:y.spanCountBeforeProcessing)||0,S=m.spans?m.spans.length:0,x=b-S;x>0&&this.recordDroppedEvent("before_send","span",x)}const g=m.transaction_info;if(a&&g&&m.transaction!==e.transaction){const b="custom";m.transaction_info={...g,source:b}}return this.sendEvent(m,t),m}).then(null,m=>{throw qM(m)||jM(m)?m:(this.captureException(m,{mechanism:{handled:!1,type:"internal"},data:{__sentry__:!0},originalException:m}),Om("Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: ".concat(m)))})}_process(e){this._numProcessing++,e.then(t=>(this._numProcessing--,t),t=>(this._numProcessing--,t))}_clearOutcomes(){const e=this._outcomes;return this._outcomes={},Object.entries(e).map(([t,i])=>{const[r,s]=t.split(":");return{reason:r,category:s,quantity:i}})}_flushOutcomes(){Ht&&Tt.log("Flushing outcomes...");const e=this._clearOutcomes();if(e.length===0){Ht&&Tt.log("No outcomes to send");return}if(!this._dsn){Ht&&Tt.log("No dsn provided, will not send outcomes");return}Ht&&Tt.log("Sending outcomes:",e);const t=ZH(e,this._options.tunnel&&Kd(this._dsn));this.sendEnvelope(t)}}function i4(n,e){const t="".concat(e," must return `null` or a valid event.");if(qd(n))return n.then(i=>{if(!hd(i)&&i!==null)throw Om(t);return i},i=>{throw Om("".concat(e," rejected with ").concat(i))});if(!hd(n)&&n!==null)throw Om(t);return n}function r4(n,e,t,i){const{beforeSend:r,beforeSendTransaction:s,beforeSendSpan:o,ignoreSpans:a}=e;let l=t;if(Ab(l)&&r)return r(l,i);if(jD(l)){if(o||a){const c=e4(l);if(a!=null&&a.length&&PM(c,a))return null;if(o){const u=o(c);u?l=Yd(t,t4(u)):IM()}if(l.spans){const u=[],d=l.spans;for(const m of d){if(a!=null&&a.length&&PM(m,a)){sH(d,m);continue}if(o){const v=o(m);v?u.push(v):(IM(),u.push(m))}else u.push(m)}const f=l.spans.length-u.length;f&&n.recordDroppedEvent("before_send","span",f),l.spans=u}}if(s){if(l.spans){const c=l.spans.length;l.sdkProcessingMetadata={...t.sdkProcessingMetadata,spanCountBeforeProcessing:c}}return s(l,i)}}return l}function Ab(n){return n.type===void 0}function jD(n){return n.type==="transaction"}function s4(n){return[{type:"log",item_count:n.length,content_type:"application/vnd.sentry.items.log+json"},{items:n}]}function o4(n,e,t,i){const r={};return e!=null&&e.sdk&&(r.sdk={name:e.sdk.name,version:e.sdk.version}),t&&i&&(r.dsn=Kd(i)),$d(r,[s4(n)])}function fy(n,e){var s;const t=(s=a4(n))!=null?s:[];if(t.length===0)return;const i=n.getOptions(),r=o4(t,i._metadata,i.tunnel,n.getDsn());qD().set(n,[]),n.emit("flushLogs"),n.sendEnvelope(r)}function a4(n){return qD().get(n)}function qD(){return jd("clientToLogBufferMap",()=>new WeakMap)}function l4(n,e){e.debug===!0&&(Ht?Tt.enable():Su(()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")})),go().update(e.initialScope);const i=new n(e);return c4(i),i.init(),i}function c4(n){go().setClient(n)}const XD=Symbol.for("SentryBufferFullError");function u4(n=100){const e=new Set;function t(){return e.size<n}function i(o){e.delete(o)}function r(o){if(!t())return aS(XD);const a=o();return e.add(a),a.then(()=>i(a),()=>i(a)),a}function s(o){if(!e.size)return cv(!0);const a=Promise.allSettled(Array.from(e)).then(()=>!0);if(!o)return a;const l=[a,new Promise(c=>setTimeout(()=>c(!1),o))];return Promise.race(l)}return{get $(){return Array.from(e)},add:r,drain:s}}const h4=60*1e3;function d4(n,e=Date.now()){const t=parseInt("".concat(n),10);if(!isNaN(t))return t*1e3;const i=Date.parse("".concat(n));return isNaN(i)?h4:i-e}function f4(n,e){return n[e]||n.all||0}function p4(n,e,t=Date.now()){return f4(n,e)>t}function m4(n,{statusCode:e,headers:t},i=Date.now()){const r={...n},s=t==null?void 0:t["x-sentry-rate-limits"],o=t==null?void 0:t["retry-after"];if(s)for(const a of s.trim().split(",")){const[l,c,,,u]=a.split(":",5),d=parseInt(l,10),f=(isNaN(d)?60:d)*1e3;if(!c)r.all=i+f;else for(const m of c.split(";"))m==="metric_bucket"?(!u||u.split(";").includes("custom"))&&(r[m]=i+f):r[m]=i+f}else o?r.all=i+d4(o,i):e===429&&(r.all=i+60*1e3);return r}const g4=64;function v4(n,e,t=u4(n.bufferSize||g4)){let i={};const r=o=>t.drain(o);function s(o){const a=[];if(OM(o,(d,f)=>{const m=LM(f);p4(i,m)?n.recordDroppedEvent("ratelimit_backoff",m):a.push(d)}),a.length===0)return Promise.resolve({});const l=$d(o[0],a),c=d=>{OM(l,(f,m)=>{n.recordDroppedEvent(d,LM(m))})},u=()=>e({body:gH(l)}).then(d=>(d.statusCode!==void 0&&(d.statusCode<200||d.statusCode>=300)&&Ht&&Tt.warn("Sentry responded with status code ".concat(d.statusCode," to sent event.")),i=m4(i,d),d),d=>{throw c("network_error"),Ht&&Tt.error("Encountered error running transport request:",d),d});return t.add(u).then(d=>d,d=>{if(d===XD)return Ht&&Tt.error("Skipped sending event because buffer is full."),c("queue_overflow"),Promise.resolve({});throw d})}return{send:s,flush:r}}function py(n){if(!n)return{};const e=n.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!e)return{};const t=e[6]||"",i=e[8]||"";return{host:e[4],path:e[5],protocol:e[2],search:t,hash:i,relative:e[5]+t+i}}function _4(n){var e;"aggregates"in n?((e=n.attrs)==null?void 0:e.ip_address)===void 0&&(n.attrs={...n.attrs,ip_address:"{{auto}}"}):n.ipAddress===void 0&&(n.ipAddress="{{auto}}")}function y4(n,e,t=[e],i="npm"){const r=n._metadata||{};r.sdk||(r.sdk={name:"sentry.javascript.".concat(e),packages:t.map(s=>({name:"".concat(i,":@sentry/").concat(s),version:fl})),version:fl}),n._metadata=r}const b4=100;function Ml(n,e){const t=Gi(),i=Nl();if(!t)return;const{beforeBreadcrumb:r=null,maxBreadcrumbs:s=b4}=t.getOptions();if(s<=0)return;const a={timestamp:Xd(),...n},l=r?Su(()=>r(a,e)):a;l!==null&&(t.emit&&t.emit("beforeAddBreadcrumb",l,e),i.addBreadcrumb(l,s))}let XM;const w4="FunctionToString",YM=new WeakMap,S4=(()=>({name:w4,setupOnce(){XM=Function.prototype.toString;try{Function.prototype.toString=function(...n){const e=iS(this),t=YM.has(Gi())&&e!==void 0?e:this;return XM.apply(t,n)}}catch(n){}},setup(n){YM.set(n,!0)}})),x4=S4,E4=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,/^Can't find variable: gmo$/,/^undefined is not an object \(evaluating 'a\.[A-Z]'\)$/,'can\'t redefine non-configurable property "solana"',"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)","Can't find variable: _AutofillCallbackHandler",/^Non-Error promise rejection captured with value: Object Not Found Matching Id:\d+, MethodName:simulateEvent, ParamCount:\d+$/,/^Java exception was raised during method invocation$/],A4="EventFilters",M4=(n={})=>{let e;return{name:A4,setup(t){const i=t.getOptions();e=KM(n,i)},processEvent(t,i,r){if(!e){const s=r.getOptions();e=KM(n,s)}return C4(t,e)?null:t}}},T4=((n={})=>({...M4(n),name:"InboundFilters"}));function KM(n={},e={}){return{allowUrls:[...n.allowUrls||[],...e.allowUrls||[]],denyUrls:[...n.denyUrls||[],...e.denyUrls||[]],ignoreErrors:[...n.ignoreErrors||[],...e.ignoreErrors||[],...n.disableErrorDefaults?[]:E4],ignoreTransactions:[...n.ignoreTransactions||[],...e.ignoreTransactions||[]]}}function C4(n,e){if(n.type){if(n.type==="transaction"&&I4(n,e.ignoreTransactions))return Ht&&Tt.warn("Event dropped due to being matched by `ignoreTransactions` option.\nEvent: ".concat(el(n))),!0}else{if(R4(n,e.ignoreErrors))return Ht&&Tt.warn("Event dropped due to being matched by `ignoreErrors` option.\nEvent: ".concat(el(n))),!0;if(L4(n))return Ht&&Tt.warn("Event dropped due to not having an error message, error type or stacktrace.\nEvent: ".concat(el(n))),!0;if(D4(n,e.denyUrls))return Ht&&Tt.warn("Event dropped due to being matched by `denyUrls` option.\nEvent: ".concat(el(n),".\nUrl: ").concat(Qm(n))),!0;if(!P4(n,e.allowUrls))return Ht&&Tt.warn("Event dropped due to not being matched by `allowUrls` option.\nEvent: ".concat(el(n),".\nUrl: ").concat(Qm(n))),!0}return!1}function R4(n,e){return e!=null&&e.length?GD(n).some(t=>lv(t,e)):!1}function I4(n,e){if(!(e!=null&&e.length))return!1;const t=n.transaction;return t?lv(t,e):!1}function D4(n,e){if(!(e!=null&&e.length))return!1;const t=Qm(n);return t?lv(t,e):!1}function P4(n,e){if(!(e!=null&&e.length))return!0;const t=Qm(n);return t?lv(t,e):!0}function O4(n=[]){for(let e=n.length-1;e>=0;e--){const t=n[e];if(t&&t.filename!=="<anonymous>"&&t.filename!=="[native code]")return t.filename||null}return null}function Qm(n){var e,t,i;try{const r=[...(t=(e=n.exception)==null?void 0:e.values)!=null?t:[]].reverse().find(o=>{var a,l,c;return((a=o.mechanism)==null?void 0:a.parent_id)===void 0&&((c=(l=o.stacktrace)==null?void 0:l.frames)==null?void 0:c.length)}),s=(i=r==null?void 0:r.stacktrace)==null?void 0:i.frames;return s?O4(s):null}catch(r){return Ht&&Tt.error("Cannot extract url for event ".concat(el(n))),null}}function L4(n){var e,t;return(t=(e=n.exception)==null?void 0:e.values)!=null&&t.length?!n.message&&!n.exception.values.some(i=>i.stacktrace||i.type&&i.type!=="Error"||i.value):!1}function k4(n,e,t,i,r,s){var a;if(!((a=r.exception)!=null&&a.values)||!s||!Yo(s.originalException,Error))return;const o=r.exception.values.length>0?r.exception.values[r.exception.values.length-1]:void 0;o&&(r.exception.values=Mb(n,e,i,s.originalException,t,r.exception.values,o,0))}function Mb(n,e,t,i,r,s,o,a){if(s.length>=t+1)return s;let l=[...s];if(Yo(i[r],Error)){$M(o,a);const c=n(e,i[r]),u=l.length;JM(c,r,u,a),l=Mb(n,e,t,i[r],r,[c,...l],c,u)}return Array.isArray(i.errors)&&i.errors.forEach((c,u)=>{if(Yo(c,Error)){$M(o,a);const d=n(e,c),f=l.length;JM(d,"errors[".concat(u,"]"),f,a),l=Mb(n,e,t,c,r,[d,...l],d,f)}}),l}function $M(n,e){n.mechanism={handled:!0,type:"auto.core.linked_errors",...n.mechanism,...n.type==="AggregateError"&&{is_exception_group:!0},exception_id:e}}function JM(n,e,t,i){n.mechanism={handled:!0,...n.mechanism,type:"chained",source:e,exception_id:t,parent_id:i}}function U4(n){const e="console";kl(e,n),Ul(e,N4)}function N4(){"console"in Rn&&j3.forEach(function(n){n in Rn.console&&Er(Rn.console,n,function(e){return $m[n]=e,function(...t){hs("console",{args:t,level:n});const r=$m[n];r==null||r.apply(Rn.console,t)}})})}function F4(n){return n==="warn"?"warning":["fatal","error","warning","log","info","debug"].includes(n)?n:"log"}const B4="Dedupe",z4=(()=>{let n;return{name:B4,processEvent(e){if(e.type)return e;try{if(G4(e,n))return Ht&&Tt.warn("Event dropped due to being a duplicate of previously captured event."),null}catch(t){}return n=e}}}),H4=z4;function G4(n,e){return e?!!(V4(n,e)||W4(n,e)):!1}function V4(n,e){const t=n.message,i=e.message;return!(!t&&!i||t&&!i||!t&&i||t!==i||!KD(n,e)||!YD(n,e))}function W4(n,e){const t=QM(e),i=QM(n);return!(!t||!i||t.type!==i.type||t.value!==i.value||!KD(n,e)||!YD(n,e))}function YD(n,e){let t=mM(n),i=mM(e);if(!t&&!i)return!0;if(t&&!i||!t&&i||(t=t,i=i,i.length!==t.length))return!1;for(let r=0;r<i.length;r++){const s=i[r],o=t[r];if(s.filename!==o.filename||s.lineno!==o.lineno||s.colno!==o.colno||s.function!==o.function)return!1}return!0}function KD(n,e){let t=n.fingerprint,i=e.fingerprint;if(!t&&!i)return!0;if(t&&!i||!t&&i)return!1;t=t,i=i;try{return t.join("")===i.join("")}catch(r){return!1}}function QM(n){var e,t;return(t=(e=n.exception)==null?void 0:e.values)==null?void 0:t[0]}function $D(n){if(n!==void 0)return n>=400&&n<500?"warning":n>=500?"error":void 0}const fd=Rn;function j4(){return"history"in fd&&!!fd.history}function q4(){if(!("fetch"in fd))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch(n){return!1}}function Tb(n){return n&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(n.toString())}function X4(){var t;if(typeof EdgeRuntime=="string")return!0;if(!q4())return!1;if(Tb(fd.fetch))return!0;let n=!1;const e=fd.document;if(e&&typeof e.createElement=="function")try{const i=e.createElement("iframe");i.hidden=!0,e.head.appendChild(i),(t=i.contentWindow)!=null&&t.fetch&&(n=Tb(i.contentWindow.fetch)),e.head.removeChild(i)}catch(i){Ht&&Tt.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",i)}return n}function Y4(n,e){const t="fetch";kl(t,n),Ul(t,()=>K4(void 0,e))}function K4(n,e=!1){e&&!X4()||Er(Rn,"fetch",function(t){return function(...i){const r=new Error,{method:s,url:o}=$4(i),a={args:i,fetchData:{method:s,url:o},startTimestamp:lo()*1e3,virtualError:r,headers:J4(i)};return hs("fetch",{...a}),t.apply(Rn,i).then(async l=>(hs("fetch",{...a,endTimestamp:lo()*1e3,response:l}),l),l=>{if(hs("fetch",{...a,endTimestamp:lo()*1e3,error:l}),Qw(l)&&l.stack===void 0&&(l.stack=r.stack,Al(l,"framesToPop",1)),l instanceof TypeError&&(l.message==="Failed to fetch"||l.message==="Load failed"||l.message==="NetworkError when attempting to fetch resource."))try{const c=new URL(a.fetchData.url);l.message="".concat(l.message," (").concat(c.host,")")}catch(c){}throw l})}})}function Cb(n,e){return!!n&&typeof n=="object"&&!!n[e]}function ZM(n){return typeof n=="string"?n:n?Cb(n,"url")?n.url:n.toString?n.toString():"":""}function $4(n){if(n.length===0)return{method:"GET",url:""};if(n.length===2){const[t,i]=n;return{url:ZM(t),method:Cb(i,"method")?String(i.method).toUpperCase():"GET"}}const e=n[0];return{url:ZM(e),method:Cb(e,"method")?String(e.method).toUpperCase():"GET"}}function J4(n){const[e,t]=n;try{if(typeof t=="object"&&t!==null&&"headers"in t&&t.headers)return new Headers(t.headers);if(lz(e))return new Headers(e.headers)}catch(i){}}function Q4(){return"npm"}const Ln=Rn;let Rb=0;function JD(){return Rb>0}function Z4(){Rb++,setTimeout(()=>{Rb--})}function ru(n,e={}){function t(r){return typeof r=="function"}if(!t(n))return n;try{const r=n.__sentry_wrapped__;if(r)return typeof r=="function"?r:n;if(iS(n))return n}catch(r){return n}const i=function(...r){try{const s=r.map(o=>ru(o,e));return n.apply(this,s)}catch(s){throw Z4(),Tz(o=>{o.addEventProcessor(a=>(e.mechanism&&(bb(a,void 0),tu(a,e.mechanism)),a.extra={...a.extra,arguments:r},a)),VH(s)}),s}};try{for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}catch(r){}SD(i,n),Al(n,"__sentry_wrapped__",i);try{Object.getOwnPropertyDescriptor(i,"name").configurable&&Object.defineProperty(i,"name",{get(){return n.name}})}catch(r){}return i}function eG(){const n=nS(),{referrer:e}=Ln.document||{},{userAgent:t}=Ln.navigator||{},i={...e&&{Referer:e},...t&&{"User-Agent":t}};return{url:n,headers:i}}function lS(n,e){const t=cS(n,e),i={type:sG(e),value:oG(e)};return t.length&&(i.stacktrace={frames:t}),i.type===void 0&&i.value===""&&(i.value="Unrecoverable error caught"),i}function tG(n,e,t,i){const r=Gi(),s=r==null?void 0:r.getOptions().normalizeDepth,o=hG(e),a={__serialized__:kD(e,s)};if(o)return{exception:{values:[lS(n,o)]},extra:a};const l={exception:{values:[{type:av(e)?e.constructor.name:i?"UnhandledRejection":"Error",value:cG(e,{isUnhandledRejection:i})}]},extra:a};if(t){const c=cS(n,t);c.length&&(l.exception.values[0].stacktrace={frames:c})}return l}function my(n,e){return{exception:{values:[lS(n,e)]}}}function cS(n,e){const t=e.stacktrace||e.stack||"",i=iG(e),r=rG(e);try{return n(t,i,r)}catch(s){}return[]}const nG=/Minified React error #\d+;/i;function iG(n){return n&&nG.test(n.message)?1:0}function rG(n){return typeof n.framesToPop=="number"?n.framesToPop:0}function QD(n){return typeof WebAssembly<"u"&&typeof WebAssembly.Exception<"u"?n instanceof WebAssembly.Exception:!1}function sG(n){const e=n==null?void 0:n.name;return!e&&QD(n)?n.message&&Array.isArray(n.message)&&n.message.length==2?n.message[0]:"WebAssembly.Exception":e}function oG(n){const e=n==null?void 0:n.message;return QD(n)?Array.isArray(n.message)&&n.message.length==2?n.message[1]:"wasm exception":e?e.error&&typeof e.error.message=="string"?e.error.message:e:"No error message"}function aG(n,e,t,i){const r=(t==null?void 0:t.syntheticException)||void 0,s=uS(n,e,r,i);return tu(s),s.level="error",t!=null&&t.event_id&&(s.event_id=t.event_id),cv(s)}function lG(n,e,t="info",i,r){const s=(i==null?void 0:i.syntheticException)||void 0,o=Ib(n,e,s,r);return o.level=t,i!=null&&i.event_id&&(o.event_id=i.event_id),cv(o)}function uS(n,e,t,i,r){let s;if(yD(e)&&e.error)return my(n,e.error);if(vM(e)||rz(e)){const o=e;if("stack"in e)s=my(n,e);else{const a=o.name||(vM(o)?"DOMError":"DOMException"),l=o.message?"".concat(a,": ").concat(o.message):a;s=Ib(n,l,t,i),bb(s,l)}return"code"in o&&(s.tags={...s.tags,"DOMException.code":"".concat(o.code)}),s}return Qw(e)?my(n,e):hd(e)||av(e)?(s=tG(n,e,t,r),tu(s,{synthetic:!0}),s):(s=Ib(n,e,t,i),bb(s,"".concat(e)),tu(s,{synthetic:!0}),s)}function Ib(n,e,t,i){const r={};if(i&&t){const s=cS(n,t);s.length&&(r.exception={values:[{value:e,stacktrace:{frames:s}}]}),tu(r,{synthetic:!0})}if(Zw(e)){const{__sentry_template_string__:s,__sentry_template_values__:o}=e;return r.logentry={message:s,params:o},r}return r.message=e,r}function cG(n,{isUnhandledRejection:e}){const t=dz(n),i=e?"promise rejection":"exception";if(yD(n))return"Event `ErrorEvent` captured as ".concat(i," with message `").concat(n.message,"`");if(av(n)){const r=uG(n);return"Event `".concat(r,"` (type=").concat(n.type,") captured as ").concat(i)}return"Object captured as ".concat(i," with keys: ").concat(t)}function uG(n){try{const e=Object.getPrototypeOf(n);return e?e.constructor.name:void 0}catch(e){}}function hG(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e)){const t=n[e];if(t instanceof Error)return t}}const dG=5e3;class fG extends n4{constructor(e){var a;const t=pG(e),i=Ln.SENTRY_SDK_SOURCE||Q4();y4(t,"browser",["browser"],i),(a=t._metadata)!=null&&a.sdk&&(t._metadata.sdk.settings={infer_ip:t.sendDefaultPii?"auto":"never",...t._metadata.sdk.settings}),super(t);const{sendDefaultPii:r,sendClientReports:s,enableLogs:o}=this._options;Ln.document&&(s||o)&&Ln.document.addEventListener("visibilitychange",()=>{Ln.document.visibilityState==="hidden"&&(s&&this._flushOutcomes(),o&&fy(this))}),o&&(this.on("flush",()=>{fy(this)}),this.on("afterCaptureLog",()=>{this._logFlushIdleTimeout&&clearTimeout(this._logFlushIdleTimeout),this._logFlushIdleTimeout=setTimeout(()=>{fy(this)},dG)})),r&&this.on("beforeSendSession",_4)}eventFromException(e,t){return aG(this._options.stackParser,e,t,this._options.attachStacktrace)}eventFromMessage(e,t="info",i){return lG(this._options.stackParser,e,t,i,this._options.attachStacktrace)}_prepareEvent(e,t,i,r){return e.platform=e.platform||"javascript",super._prepareEvent(e,t,i,r)}}function pG(n){var e;return{release:typeof __SENTRY_RELEASE__=="string"?__SENTRY_RELEASE__:(e=Ln.SENTRY_RELEASE)==null?void 0:e.id,sendClientReports:!0,parentSpanIsAlwaysRootSpan:!0,...n}}const mG=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,Zi=Rn,gG=1e3;let e1,Db,Pb;function vG(n){kl("dom",n),Ul("dom",_G)}function _G(){if(!Zi.document)return;const n=hs.bind(null,"dom"),e=t1(n,!0);Zi.document.addEventListener("click",e,!1),Zi.document.addEventListener("keypress",e,!1),["EventTarget","Node"].forEach(t=>{var s,o;const r=(s=Zi[t])==null?void 0:s.prototype;(o=r==null?void 0:r.hasOwnProperty)!=null&&o.call(r,"addEventListener")&&(Er(r,"addEventListener",function(a){return function(l,c,u){if(l==="click"||l=="keypress")try{const d=this.__sentry_instrumentation_handlers__=this.__sentry_instrumentation_handlers__||{},f=d[l]=d[l]||{refCount:0};if(!f.handler){const m=t1(n);f.handler=m,a.call(this,l,m,u)}f.refCount++}catch(d){}return a.call(this,l,c,u)}}),Er(r,"removeEventListener",function(a){return function(l,c,u){if(l==="click"||l=="keypress")try{const d=this.__sentry_instrumentation_handlers__||{},f=d[l];f&&(f.refCount--,f.refCount<=0&&(a.call(this,l,f.handler,u),f.handler=void 0,delete d[l]),Object.keys(d).length===0&&delete this.__sentry_instrumentation_handlers__)}catch(d){}return a.call(this,l,c,u)}}))})}function yG(n){if(n.type!==Db)return!1;try{if(!n.target||n.target._sentryId!==Pb)return!1}catch(e){}return!0}function bG(n,e){return n!=="keypress"?!1:e!=null&&e.tagName?!(e.tagName==="INPUT"||e.tagName==="TEXTAREA"||e.isContentEditable):!0}function t1(n,e=!1){return t=>{if(!t||t._sentryCaptured)return;const i=wG(t);if(bG(t.type,i))return;Al(t,"_sentryCaptured",!0),i&&!i._sentryId&&Al(i,"_sentryId",Gr());const r=t.type==="keypress"?"input":t.type;yG(t)||(n({event:t,name:r,global:e}),Db=t.type,Pb=i?i._sentryId:void 0),clearTimeout(e1),e1=Zi.setTimeout(()=>{Pb=void 0,Db=void 0},gG)}}function wG(n){try{return n.target}catch(e){return null}}let Sp;function ZD(n){const e="history";kl(e,n),Ul(e,SG)}function SG(){if(Zi.addEventListener("popstate",()=>{const e=Zi.location.href,t=Sp;if(Sp=e,t===e)return;hs("history",{from:t,to:e})}),!j4())return;function n(e){return function(...t){const i=t.length>2?t[2]:void 0;if(i){const r=Sp,s=xG(String(i));if(Sp=s,r===s)return e.apply(this,t);hs("history",{from:r,to:s})}return e.apply(this,t)}}Er(Zi.history,"pushState",n),Er(Zi.history,"replaceState",n)}function xG(n){try{return new URL(n,Zi.location.origin).toString()}catch(e){return n}}const Lm={};function EG(n){const e=Lm[n];if(e)return e;let t=Zi[n];if(Tb(t))return Lm[n]=t.bind(Zi);const i=Zi.document;if(i&&typeof i.createElement=="function")try{const r=i.createElement("iframe");r.hidden=!0,i.head.appendChild(r);const s=r.contentWindow;s!=null&&s[n]&&(t=s[n]),i.head.removeChild(r)}catch(r){mG&&Tt.warn("Could not create sandbox iframe for ".concat(n," check, bailing to window.").concat(n,": "),r)}return t&&(Lm[n]=t.bind(Zi))}function AG(n){Lm[n]=void 0}const Fh="__sentry_xhr_v3__";function MG(n){kl("xhr",n),Ul("xhr",TG)}function TG(){if(!Zi.XMLHttpRequest)return;const n=XMLHttpRequest.prototype;n.open=new Proxy(n.open,{apply(e,t,i){const r=new Error,s=lo()*1e3,o=ao(i[0])?i[0].toUpperCase():void 0,a=CG(i[1]);if(!o||!a)return e.apply(t,i);t[Fh]={method:o,url:a,request_headers:{}},o==="POST"&&a.match(/sentry_key/)&&(t.__sentry_own_request__=!0);const l=()=>{const c=t[Fh];if(c&&t.readyState===4){try{c.status_code=t.status}catch(d){}const u={endTimestamp:lo()*1e3,startTimestamp:s,xhr:t,virtualError:r};hs("xhr",u)}};return"onreadystatechange"in t&&typeof t.onreadystatechange=="function"?t.onreadystatechange=new Proxy(t.onreadystatechange,{apply(c,u,d){return l(),c.apply(u,d)}}):t.addEventListener("readystatechange",l),t.setRequestHeader=new Proxy(t.setRequestHeader,{apply(c,u,d){const[f,m]=d,v=u[Fh];return v&&ao(f)&&ao(m)&&(v.request_headers[f.toLowerCase()]=m),c.apply(u,d)}}),e.apply(t,i)}}),n.send=new Proxy(n.send,{apply(e,t,i){const r=t[Fh];if(!r)return e.apply(t,i);i[0]!==void 0&&(r.body=i[0]);const s={startTimestamp:lo()*1e3,xhr:t};return hs("xhr",s),e.apply(t,i)}})}function CG(n){if(ao(n))return n;try{return n.toString()}catch(e){}}function RG(n,e=EG("fetch")){let t=0,i=0;async function r(s){const o=s.body.length;t+=o,i++;const a={body:s.body,method:"POST",referrerPolicy:"strict-origin",headers:n.headers,keepalive:t<=6e4&&i<15,...n.fetchOptions};try{const l=await e(n.url,a);return{statusCode:l.status,headers:{"x-sentry-rate-limits":l.headers.get("X-Sentry-Rate-Limits"),"retry-after":l.headers.get("Retry-After")}}}catch(l){throw AG("fetch"),l}finally{t-=o,i--}}return v4(n,r)}const IG=30,DG=50;function Ob(n,e,t,i){const r={filename:n,function:e==="<anonymous>"?El:e,in_app:!0};return t!==void 0&&(r.lineno=t),i!==void 0&&(r.colno=i),r}const PG=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,OG=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,LG=/\((\S*)(?::(\d+))(?::(\d+))\)/,kG=/at (.+?) ?\(data:(.+?),/,UG=n=>{const e=n.match(kG);if(e)return{filename:"<data:".concat(e[2],">"),function:e[1]};const t=PG.exec(n);if(t){const[,r,s,o]=t;return Ob(r,El,+s,+o)}const i=OG.exec(n);if(i){if(i[2]&&i[2].indexOf("eval")===0){const a=LG.exec(i[2]);a&&(i[2]=a[1],i[3]=a[2],i[4]=a[3])}const[s,o]=eP(i[1]||El,i[2]);return Ob(o,s,i[3]?+i[3]:void 0,i[4]?+i[4]:void 0)}},NG=[IG,UG],FG=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,BG=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,zG=n=>{const e=FG.exec(n);if(e){if(e[3]&&e[3].indexOf(" > eval")>-1){const s=BG.exec(e[3]);s&&(e[1]=e[1]||"eval",e[3]=s[1],e[4]=s[2],e[5]="")}let i=e[3],r=e[1]||El;return[r,i]=eP(r,i),Ob(i,r,e[4]?+e[4]:void 0,e[5]?+e[5]:void 0)}},HG=[DG,zG],GG=[NG,HG],VG=vD(...GG),eP=(n,e)=>{const t=n.indexOf("safari-extension")!==-1,i=n.indexOf("safari-web-extension")!==-1;return t||i?[n.indexOf("@")!==-1?n.split("@")[0]:El,t?"safari-extension:".concat(e):"safari-web-extension:".concat(e)]:[n,e]},su=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,xp=1024,WG="Breadcrumbs",jG=((n={})=>{const e={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...n};return{name:WG,setup(t){e.console&&U4(KG(t)),e.dom&&vG(YG(t,e.dom)),e.xhr&&MG($G(t)),e.fetch&&Y4(JG(t)),e.history&&ZD(QG(t)),e.sentry&&t.on("beforeSendEvent",XG(t))}}}),qG=jG;function XG(n){return function(t){Gi()===n&&Ml({category:"sentry.".concat(t.type==="transaction"?"transaction":"event"),event_id:t.event_id,level:t.level,message:el(t)},{event:t})}}function YG(n,e){return function(i){if(Gi()!==n)return;let r,s,o=typeof e=="object"?e.serializeAttribute:void 0,a=typeof e=="object"&&typeof e.maxStringLength=="number"?e.maxStringLength:void 0;a&&a>xp&&(su&&Tt.warn("`dom.maxStringLength` cannot exceed ".concat(xp,", but a value of ").concat(a," was configured. Sentry will use ").concat(xp," instead.")),a=xp),typeof o=="string"&&(o=[o]);try{const c=i.event,u=ZG(c)?c.target:c;r=wD(u,{keyAttrs:o,maxStringLength:a}),s=hz(u)}catch(c){r="<unknown>"}if(r.length===0)return;const l={category:"ui.".concat(i.name),message:r};s&&(l.data={"ui.component_name":s}),Ml(l,{event:i.event,name:i.name,global:i.global})}}function KG(n){return function(t){if(Gi()!==n)return;const i={category:"console",data:{arguments:t.args,logger:"console"},level:F4(t.level),message:_M(t.args," ")};if(t.level==="assert")if(t.args[0]===!1)i.message="Assertion failed: ".concat(_M(t.args.slice(1)," ")||"console.assert"),i.data.arguments=t.args.slice(1);else return;Ml(i,{input:t.args,level:t.level})}}function $G(n){return function(t){if(Gi()!==n)return;const{startTimestamp:i,endTimestamp:r}=t,s=t.xhr[Fh];if(!i||!r||!s)return;const{method:o,url:a,status_code:l,body:c}=s,u={method:o,url:a,status_code:l},d={xhr:t.xhr,input:c,startTimestamp:i,endTimestamp:r},f={category:"xhr",data:u,type:"http",level:$D(l)};n.emit("beforeOutgoingRequestBreadcrumb",f,d),Ml(f,d)}}function JG(n){return function(t){if(Gi()!==n)return;const{startTimestamp:i,endTimestamp:r}=t;if(r&&!(t.fetchData.url.match(/sentry_key/)&&t.fetchData.method==="POST"))if(t.fetchData.method,t.fetchData.url,t.error){const s=t.fetchData,o={data:t.error,input:t.args,startTimestamp:i,endTimestamp:r},a={category:"fetch",data:s,level:"error",type:"http"};n.emit("beforeOutgoingRequestBreadcrumb",a,o),Ml(a,o)}else{const s=t.response,o={...t.fetchData,status_code:s==null?void 0:s.status};t.fetchData.request_body_size,t.fetchData.response_body_size,s==null||s.status;const a={input:t.args,response:s,startTimestamp:i,endTimestamp:r},l={category:"fetch",data:o,type:"http",level:$D(o.status_code)};n.emit("beforeOutgoingRequestBreadcrumb",l,a),Ml(l,a)}}}function QG(n){return function(t){if(Gi()!==n)return;let i=t.from,r=t.to;const s=py(Ln.location.href);let o=i?py(i):void 0;const a=py(r);o!=null&&o.path||(o=s),s.protocol===a.protocol&&s.host===a.host&&(r=a.relative),s.protocol===o.protocol&&s.host===o.host&&(i=o.relative),Ml({category:"navigation",data:{from:i,to:r}})}}function ZG(n){return!!n&&!!n.target}const eV=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],tV="BrowserApiErrors",nV=((n={})=>{const e={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,unregisterOriginalCallbacks:!1,...n};return{name:tV,setupOnce(){e.setTimeout&&Er(Ln,"setTimeout",n1),e.setInterval&&Er(Ln,"setInterval",n1),e.requestAnimationFrame&&Er(Ln,"requestAnimationFrame",rV),e.XMLHttpRequest&&"XMLHttpRequest"in Ln&&Er(XMLHttpRequest.prototype,"send",sV);const t=e.eventTarget;t&&(Array.isArray(t)?t:eV).forEach(r=>oV(r,e))}}}),iV=nV;function n1(n){return function(...e){const t=e[0];return e[0]=ru(t,{mechanism:{handled:!1,type:"auto.browser.browserapierrors.".concat(Xo(n))}}),n.apply(this,e)}}function rV(n){return function(e){return n.apply(this,[ru(e,{mechanism:{data:{handler:Xo(n)},handled:!1,type:"auto.browser.browserapierrors.requestAnimationFrame"}})])}}function sV(n){return function(...e){const t=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(r=>{r in t&&typeof t[r]=="function"&&Er(t,r,function(s){const o={mechanism:{data:{handler:Xo(s)},handled:!1,type:"auto.browser.browserapierrors.xhr.".concat(r)}},a=iS(s);return a&&(o.mechanism.data.handler=Xo(a)),ru(s,o)})}),n.apply(this,e)}}function oV(n,e){var r,s;const i=(r=Ln[n])==null?void 0:r.prototype;(s=i==null?void 0:i.hasOwnProperty)!=null&&s.call(i,"addEventListener")&&(Er(i,"addEventListener",function(o){return function(a,l,c){try{aV(l)&&(l.handleEvent=ru(l.handleEvent,{mechanism:{data:{handler:Xo(l),target:n},handled:!1,type:"auto.browser.browserapierrors.handleEvent"}}))}catch(u){}return e.unregisterOriginalCallbacks&&lV(this,a,l),o.apply(this,[a,ru(l,{mechanism:{data:{handler:Xo(l),target:n},handled:!1,type:"auto.browser.browserapierrors.addEventListener"}}),c])}}),Er(i,"removeEventListener",function(o){return function(a,l,c){try{const u=l.__sentry_wrapped__;u&&o.call(this,a,u,c)}catch(u){}return o.call(this,a,l,c)}}))}function aV(n){return typeof n.handleEvent=="function"}function lV(n,e,t){n&&typeof n=="object"&&"removeEventListener"in n&&typeof n.removeEventListener=="function"&&n.removeEventListener(e,t)}const cV=()=>({name:"BrowserSession",setupOnce(){if(typeof Ln.document>"u"){su&&Tt.warn("Using the `browserSessionIntegration` in non-browser environments is not supported.");return}BM({ignoreDuration:!0}),zM(),ZD(({from:n,to:e})=>{n!==void 0&&n!==e&&(BM({ignoreDuration:!0}),zM())})}}),uV="GlobalHandlers",hV=((n={})=>{const e={onerror:!0,onunhandledrejection:!0,...n};return{name:uV,setupOnce(){Error.stackTraceLimit=50},setup(t){e.onerror&&(fV(t),i1("onerror")),e.onunhandledrejection&&(pV(t),i1("onunhandledrejection"))}}}),dV=hV;function fV(n){ez(e=>{const{stackParser:t,attachStacktrace:i}=tP();if(Gi()!==n||JD())return;const{msg:r,url:s,line:o,column:a,error:l}=e,c=vV(uS(t,l||r,void 0,i,!1),s,o,a);c.level="error",ND(c,{originalException:l,mechanism:{handled:!1,type:"auto.browser.global_handlers.onerror"}})})}function pV(n){nz(e=>{const{stackParser:t,attachStacktrace:i}=tP();if(Gi()!==n||JD())return;const r=mV(e),s=eS(r)?gV(r):uS(t,r,void 0,i,!0);s.level="error",ND(s,{originalException:r,mechanism:{handled:!1,type:"auto.browser.global_handlers.onunhandledrejection"}})})}function mV(n){if(eS(n))return n;try{if("reason"in n)return n.reason;if("detail"in n&&"reason"in n.detail)return n.detail.reason}catch(e){}return n}function gV(n){return{exception:{values:[{type:"UnhandledRejection",value:"Non-Error promise rejection captured with value: ".concat(String(n))}]}}}function vV(n,e,t,i){var f;const r=n.exception=n.exception||{},s=r.values=r.values||[],o=s[0]=s[0]||{},a=o.stacktrace=o.stacktrace||{},l=a.frames=a.frames||[],c=i,u=t,d=(f=_V(e))!=null?f:nS();return l.length===0&&l.push({colno:c,filename:d,function:El,in_app:!0,lineno:u}),n}function i1(n){su&&Tt.log("Global Handler attached: ".concat(n))}function tP(){const n=Gi();return(n==null?void 0:n.getOptions())||{stackParser:()=>[],attachStacktrace:!1}}function _V(n){if(!(!ao(n)||n.length===0)){if(n.startsWith("data:")){const e=n.match(/^data:([^;]+)/),t=e?e[1]:"text/javascript",i=n.includes("base64,");return"<data:".concat(t).concat(i?",base64":"",">")}return n.slice(0,1024)}}const yV=()=>({name:"HttpContext",preprocessEvent(n){var i;if(!Ln.navigator&&!Ln.location&&!Ln.document)return;const e=eG(),t={...e.headers,...(i=n.request)==null?void 0:i.headers};n.request={...e,...n.request,headers:t}}}),bV="cause",wV=5,SV="LinkedErrors",xV=((n={})=>{const e=n.limit||wV,t=n.key||bV;return{name:SV,preprocessEvent(i,r,s){const o=s.getOptions();k4(lS,o.stackParser,t,e,i,r)}}}),EV=xV;function AV(){return MV()?(su&&Su(()=>{console.error("[Sentry] You cannot use Sentry.init() in a browser extension, see: https://docs.sentry.io/platforms/javascript/best-practices/browser-extensions/")}),!0):!1}function MV(){var s;if(typeof Ln.window>"u")return!1;const n=Ln;if(n.nw)return!1;const e=n.chrome||n.browser;if(!((s=e==null?void 0:e.runtime)!=null&&s.id))return!1;const t=nS(),i=["chrome-extension","moz-extension","ms-browser-extension","safari-web-extension"];return!(Ln===Ln.top&&i.some(o=>t.startsWith("".concat(o,"://"))))}function TV(n){return[T4(),x4(),iV(),qG(),dV(),EV(),H4(),yV(),cV()]}function Fse(n={}){const e=!n.skipBrowserExtensionCheck&&AV(),t={...n,enabled:e?!1:n.enabled,stackParser:Q3(n.stackParser||VG),integrations:JH({integrations:n.integrations,defaultIntegrations:n.defaultIntegrations==null?TV():n.defaultIntegrations}),transport:n.transport||RG};return l4(fG,t)}function Bse(n={}){const e=Ln.document,t=(e==null?void 0:e.head)||(e==null?void 0:e.body);if(!t){su&&Tt.error("[showReportDialog] Global document not defined");return}const i=go(),r=Gi(),s=r==null?void 0:r.getDsn();if(!s){su&&Tt.error("[showReportDialog] DSN not configured");return}const o={...n,user:{...i.getUser(),...n.user},eventId:n.eventId||WH()},a=Ln.document.createElement("script");a.async=!0,a.crossOrigin="anonymous",a.src=KH(s,o);const{onLoad:l,onClose:c}=o;if(l&&(a.onload=l),c){const u=d=>{if(d.data==="__sentry_reportdialog_closed__")try{c()}finally{Ln.removeEventListener("message",u)}};Ln.addEventListener("message",u)}t.appendChild(a)}var km={exports:{}},CV=km.exports,r1;function RV(){return r1||(r1=1,(function(n,e){(function(i,r){n.exports=r()})(CV,function(){return(function(){var t={"./packages/@logrocket/console/src/index.js":(function(o,a,l){var c=l("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var u=c(l("./packages/@logrocket/console/src/registerConsole.js")),d=u.default;a.default=d}),"./packages/@logrocket/console/src/registerConsole.js":(function(o,a,l){var c=l("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(a,"__esModule",{value:!0}),a.default=m;var u=c(l("./node_modules/@babel/runtime/helpers/typeof.js")),d=c(l("./packages/@logrocket/utils/src/enhanceFunc.ts")),f=l("./packages/@logrocket/exceptions/src/index.js");function m(v){var g=[],y=["log","warn","info","error","debug"];return y.forEach(function(b){g.push((0,d.default)(console,b,function(){for(var S=arguments.length,x=new Array(S),A=0;A<S;A++)x[A]=arguments[A];v.addEvent("lr.core.LogEvent",function(){var E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},M=E.isEnabled;if((0,u.default)(M)==="object"&&M[b]===!1||M===!1)return null;if(b==="error"&&E.shouldAggregateConsoleErrors)if(x&&x.length>=2&&x[0]==="ERROR"){var I="";try{I=" ".concat(x[1])}catch(R){}f.Capture.captureMessage(v,"".concat(x[0]).concat(I),x,{},!0)}else f.Capture.captureMessage(v,x[0],x,{},!0);return{logLevel:b.toUpperCase(),args:x}})}))}),function(){g.forEach(function(b){return b()})}}}),"./packages/@logrocket/exceptions/src/Capture.js":(function(o,a,l){var c=l("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(a,"__esModule",{value:!0}),a.captureMessage=m,a.captureException=v;var u=l("./packages/@logrocket/utils/src/scrubException.ts"),d=c(l("./packages/@logrocket/utils/src/TraceKit.js")),f=c(l("./packages/@logrocket/exceptions/src/stackTraceFromError.js"));function m(g,y,b){var S=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},x=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,A={exceptionType:x?"CONSOLE":"MESSAGE",message:y,messageArgs:b,browserHref:window.location?window.location.href:""};(0,u.scrubException)(A,S),g.addEvent("lr.core.Exception",function(){return A})}function v(g,y){var b=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},S=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,x=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"WINDOW",A=S||d.default.computeStackTrace(y),E={exceptionType:x,errorType:A.name,message:A.message,browserHref:window.location?window.location.href:""};(0,u.scrubException)(E,b);var M={_stackTrace:(0,f.default)(A)};g.addEvent("lr.core.Exception",function(){return E},M)}}),"./packages/@logrocket/exceptions/src/index.js":(function(o,a,l){var c=l("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),u=l("./node_modules/@babel/runtime/helpers/typeof.js");Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"registerExceptions",{enumerable:!0,get:function(){return d.default}}),a.Capture=void 0;var d=c(l("./packages/@logrocket/exceptions/src/registerExceptions.js")),f=v(l("./packages/@logrocket/exceptions/src/Capture.js"));a.Capture=f;function m(g){if(typeof WeakMap!="function")return null;var y=new WeakMap,b=new WeakMap;return(m=function(x){return x?b:y})(g)}function v(g,y){if(g&&g.__esModule)return g;if(g===null||u(g)!=="object"&&typeof g!="function")return{default:g};var b=m(y);if(b&&b.has(g))return b.get(g);var S={},x=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var A in g)if(A!=="default"&&Object.prototype.hasOwnProperty.call(g,A)){var E=x?Object.getOwnPropertyDescriptor(g,A):null;E&&(E.get||E.set)?Object.defineProperty(S,A,E):S[A]=g[A]}return S.default=g,b&&b.set(g,S),S}}),"./packages/@logrocket/exceptions/src/raven/raven.js":(function(o,a,l){var c=l("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var u=c(l("./node_modules/@babel/runtime/helpers/classCallCheck.js")),d=c(l("./node_modules/@babel/runtime/helpers/createClass.js")),f=c(l("./packages/@logrocket/utils/src/TraceKit.js")),m=Object.prototype;function v(A){return A===void 0}function g(A){return typeof A=="function"}function y(A,E){return m.hasOwnProperty.call(A,E)}function b(A,E,M,I){var R=A[E];A[E]=M(R),I&&I.push([A,E,R])}var S=typeof window<"u"?window:typeof l.g<"u"?l.g:typeof self<"u"?self:{};S.document;var x=(function(){function A(E){var M=E.captureException;(0,u.default)(this,A),this._errorHandler=this._errorHandler.bind(this),this._ignoreOnError=0,this._wrappedBuiltIns=[],this.captureException=M,f.default.report.subscribe(this._errorHandler),this._instrumentTryCatch()}return(0,d.default)(A,[{key:"uninstall",value:function(){f.default.report.unsubscribe(this._errorHandler);for(var M;this._wrappedBuiltIns.length;){M=this._wrappedBuiltIns.shift();var I=M[0],R=M[1],C=M[2];I[R]=C}}},{key:"_errorHandler",value:function(M){this._ignoreOnError||this.captureException(M)}},{key:"_ignoreNextOnError",value:function(){var M=this;this._ignoreOnError+=1,setTimeout(function(){M._ignoreOnError-=1})}},{key:"context",value:function(M,I,R){return g(M)&&(R=I||[],I=M,M=void 0),this.wrap(M,I).apply(this,R)}},{key:"wrap",value:function(M,I,R){var C=this;if(v(I)&&!g(M))return M;if(g(M)&&(I=M,M=void 0),!g(I))return I;try{if(I.__lr__)return I;if(I.__lr_wrapper__)return I.__lr_wrapper__;if(!Object.isExtensible(I))return I}catch(z){return I}function D(){var z=[],G=arguments.length,H=!M||M&&M.deep!==!1;for(R&&g(R)&&R.apply(this,arguments);G--;)z[G]=H?C.wrap(M,arguments[G]):arguments[G];try{return I.apply(this,z)}catch(J){throw C._ignoreNextOnError(),C.captureException(f.default.computeStackTrace(J),M),J}}for(var L in I)y(I,L)&&(D[L]=I[L]);return D.prototype=I.prototype,I.__lr_wrapper__=D,D.__lr__=!0,D.__inner__=I,D}},{key:"_instrumentTryCatch",value:function(){var M=this,I=M._wrappedBuiltIns;function R(G){return function(H,J){for(var k=new Array(arguments.length),X=0;X<k.length;++X)k[X]=arguments[X];var W=k[0];return g(W)&&(k[0]=M.wrap(W)),G.apply?G.apply(this,k):G(k[0],k[1])}}function C(G){var H=S[G]&&S[G].prototype;H&&H.hasOwnProperty&&H.hasOwnProperty("addEventListener")&&(b(H,"addEventListener",function(J){return function(k,X,W,ie){try{X&&X.handleEvent&&(X.handleEvent=M.wrap(X.handleEvent))}catch(ye){}var se;return J.call(this,k,M.wrap(X,void 0,se),W,ie)}},I),b(H,"removeEventListener",function(J){return function(k,X,W,ie){try{var se=X==null?void 0:X.__lr_wrapper__;se&&J.call(this,k,se,W,ie)}catch(ye){}return J.call(this,k,X,W,ie)}},void 0))}b(S,"setTimeout",R,I),b(S,"setInterval",R,I),S.requestAnimationFrame&&b(S,"requestAnimationFrame",function(G){return function(H){return G(M.wrap(H))}},I);for(var D=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],L=0;L<D.length;L++)C(D[L]);var z=S.jQuery||S.$;z&&z.fn&&z.fn.ready&&b(z.fn,"ready",function(G){return function(H){return G.call(this,M.wrap(H))}},I)}}]),A})();a.default=x}),"./packages/@logrocket/exceptions/src/registerExceptions.js":(function(o,a,l){var c=l("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),u=l("./node_modules/@babel/runtime/helpers/typeof.js");Object.defineProperty(a,"__esModule",{value:!0}),a.default=g;var d=c(l("./packages/@logrocket/exceptions/src/raven/raven.js")),f=v(l("./packages/@logrocket/exceptions/src/Capture.js"));function m(y){if(typeof WeakMap!="function")return null;var b=new WeakMap,S=new WeakMap;return(m=function(A){return A?S:b})(y)}function v(y,b){if(y&&y.__esModule)return y;if(y===null||u(y)!=="object"&&typeof y!="function")return{default:y};var S=m(b);if(S&&S.has(y))return S.get(y);var x={},A=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var E in y)if(E!=="default"&&Object.prototype.hasOwnProperty.call(y,E)){var M=A?Object.getOwnPropertyDescriptor(y,E):null;M&&(M.get||M.set)?Object.defineProperty(x,E,M):x[E]=y[E]}return x.default=y,S&&S.set(y,x),x}function g(y){var b=new d.default({captureException:function(A){f.captureException(y,null,null,A)}}),S=function(A){A.reason instanceof Error?f.captureException(y,A.reason,null,null,"UNHANDLED_REJECTION"):y.addEvent("lr.core.Exception",function(){return{exceptionType:"UNHANDLED_REJECTION",message:A.reason||"Unhandled Promise rejection"}})};return window.addEventListener("unhandledrejection",S),function(){window.removeEventListener("unhandledrejection",S),b.uninstall()}}}),"./packages/@logrocket/exceptions/src/stackTraceFromError.js":(function(o,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=l;function l(c){function u(d){return d===null?void 0:d}return c.stack?c.stack.map(function(d){return{lineNumber:u(d.line),columnNumber:u(d.column),fileName:u(d.url),functionName:u(d.func)}}):void 0}}),"./packages/@logrocket/network/src/fetchIntercept.js":(function(o,a,l){var c=l("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var u=c(l("./node_modules/@babel/runtime/helpers/toConsumableArray.js")),d=l("./packages/@logrocket/network/src/registerXHR.js"),f=[];function m(b,S){for(var x=f.reduce(function(R,C){return[C].concat(R)},[]),A=arguments.length,E=new Array(A>2?A-2:0),M=2;M<A;M++)E[M-2]=arguments[M];var I=Promise.resolve(E);return x.forEach(function(R){var C=R.request,D=R.requestError;(C||D)&&(I=I.then(function(L){return C.apply(void 0,[S].concat((0,u.default)(L)))},function(L){return D.apply(void 0,[S].concat((0,u.default)(L)))}))}),I=I.then(function(R){(0,d.setActive)(!1);var C,D;try{C=b.apply(void 0,(0,u.default)(R))}catch(L){D=L}if((0,d.setActive)(!0),D)throw D;return C}),x.forEach(function(R){var C=R.response,D=R.responseError;(C||D)&&(I=I.then(function(L){return C(S,L)},function(L){return D&&D(S,L)}))}),I}function v(b){if(!(!b.fetch||!b.Promise)){var S=b.fetch.polyfill;b.fetch=(function(x){var A=0;return function(){for(var E=arguments.length,M=new Array(E),I=0;I<E;I++)M[I]=arguments[I];return m.apply(void 0,[x,A++].concat(M))}})(b.fetch),S&&(b.fetch.polyfill=S)}}var g=!1,y={register:function(S){return g||(g=!0,v(window)),f.push(S),function(){var x=f.indexOf(S);x>=0&&f.splice(x,1)}},clear:function(){f=[]}};a.default=y}),"./packages/@logrocket/network/src/index.js":(function(o,a,l){var c=l("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(a,"__esModule",{value:!0}),a.default=x;var u=c(l("./node_modules/@babel/runtime/helpers/defineProperty.js")),d=c(l("./node_modules/@babel/runtime/helpers/typeof.js")),f=c(l("./packages/@logrocket/network/src/registerFetch.js")),m=l("./packages/@logrocket/network/src/registerIonic.ts"),v=c(l("./packages/@logrocket/network/src/registerNetworkInformation.js")),g=c(l("./packages/@logrocket/network/src/registerXHR.js")),y=c(l("./packages/@logrocket/utils/src/mapValues.ts"));function b(A,E){var M=Object.keys(A);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(A);E&&(I=I.filter(function(R){return Object.getOwnPropertyDescriptor(A,R).enumerable})),M.push.apply(M,I)}return M}function S(A){for(var E=1;E<arguments.length;E++){var M=arguments[E]!=null?arguments[E]:{};E%2?b(Object(M),!0).forEach(function(I){(0,u.default)(A,I,M[I])}):Object.getOwnPropertyDescriptors?Object.defineProperties(A,Object.getOwnPropertyDescriptors(M)):b(Object(M)).forEach(function(I){Object.defineProperty(A,I,Object.getOwnPropertyDescriptor(M,I))})}return A}function x(A){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{isReactNative:!1,isDisabled:!1};if((E==null?void 0:E.isDisabled)===!0)return function(){};var M=E.isReactNative,I=E.shouldAugmentNPS,R=E.shouldParseXHRBlob,C={},D=function(ie){var se=4096e3,ye=ie;if((0,d.default)(ie)==="object"&&ie!=null){var Ne=Object.getPrototypeOf(ie);(Ne===Object.prototype||Ne===null)&&(ye=JSON.stringify(ie))}if(ye&&ye.length&&ye.length>se&&typeof ye=="string"){var He=ye.substring(0,1e3);return"".concat(He," ... LogRocket truncating to first 1000 characters.\n      Keep data under 4MB to prevent truncation. https://docs.logrocket.com/reference/network")}return ie},L=function(ie,se){var ye=se.method;A.addEvent("lr.network.RequestEvent",function(){var Ne=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},He=Ne.isEnabled,fe=He===void 0?!0:He,he=Ne.requestSanitizer,le=he===void 0?function(oe){return oe}:he;if(!fe)return null;var ee=null;try{ee=le(S(S({},se),{},{reqId:ie}))}catch(oe){console.error(oe)}if(ee){var de=ee.url;if(typeof document<"u"&&typeof document.createElement=="function"){var be=document.createElement("a");be.href=ee.url,de=be.href}return{reqId:ie,url:de,headers:(0,y.default)(ee.headers,function(oe){return"".concat(oe)}),body:D(ee.body),method:ye,referrer:ee.referrer||void 0,mode:ee.mode||void 0,credentials:ee.credentials||void 0}}return C[ie]=!0,null})},z=function(ie,se){var ye=se.method,Ne=se.status,He=se.responseType;A.addEvent("lr.network.ResponseEvent",function(){var fe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},he=fe.isEnabled,le=he===void 0?!0:he,ee=fe.responseSanitizer,de=ee===void 0?function(oe){return oe}:ee;if(le){if(C[ie])return delete C[ie],null}else return null;var be=null;try{be=de(S(S({},se),{},{reqId:ie}))}catch(oe){console.error(oe)}return be?{reqId:ie,responseType:He,status:be.status,headers:(0,y.default)(be.headers,function(oe){return"".concat(oe)}),body:D(be.body),method:ye}:{reqId:ie,responseType:He,status:Ne,headers:{},body:null,method:ye}})},G=function(ie){return A.isDisabled||C[ie]===!0},H=(0,f.default)({addRequest:L,addResponse:z,isIgnored:G}),J=(0,g.default)({addRequest:L,addResponse:z,isIgnored:G,logger:A,shouldAugmentNPS:I,shouldParseXHRBlob:R}),k=(0,m.registerIonic)({addRequest:L,addResponse:z,isIgnored:G}),X=M?function(){}:(0,v.default)(A);return function(){X(),H(),J(),k()}}}),"./packages/@logrocket/network/src/registerFetch.js":(function(o,a,l){var c=l("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(a,"__esModule",{value:!0}),a.default=S;var u=c(l("./node_modules/@babel/runtime/helpers/defineProperty.js")),d=c(l("./packages/@logrocket/utils/src/mapValues.ts")),f=c(l("./packages/@logrocket/network/src/fetchIntercept.js"));function m(x,A){var E=Object.keys(x);if(Object.getOwnPropertySymbols){var M=Object.getOwnPropertySymbols(x);A&&(M=M.filter(function(I){return Object.getOwnPropertyDescriptor(x,I).enumerable})),E.push.apply(E,M)}return E}function v(x){for(var A=1;A<arguments.length;A++){var E=arguments[A]!=null?arguments[A]:{};A%2?m(Object(E),!0).forEach(function(M){(0,u.default)(x,M,E[M])}):Object.getOwnPropertyDescriptors?Object.defineProperties(x,Object.getOwnPropertyDescriptors(E)):m(Object(E)).forEach(function(M){Object.defineProperty(x,M,Object.getOwnPropertyDescriptor(E,M))})}return x}function g(x){if(x==null||typeof x.forEach!="function")return x;var A={};return x.forEach(function(E,M){A[M]?A[M]="".concat(A[M],",").concat(E):A[M]="".concat(E)}),A}var y=function(A){return(0,d.default)(g(A),function(E){return"".concat(E)})};function b(){var x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return{url:x.url,headers:y(x.headers),method:x.method&&x.method.toUpperCase(),referrer:x.referrer||void 0,mode:x.mode||void 0,credentials:x.credentials||void 0}}function S(x){var A=x.addRequest,E=x.addResponse,M=x.isIgnored,I="fetch-",R={},C=f.default.register({request:function(L){for(var z=arguments.length,G=new Array(z>1?z-1:0),H=1;H<z;H++)G[H-1]=arguments[H];var J;if(typeof Request<"u"&&G[0]instanceof Request){var k;try{k=G[0].clone().text()}catch(X){k=Promise.resolve("LogRocket fetch error: ".concat(X.message))}J=k.then(function(X){return v(v({},b(G[0])),{},{body:X})},function(X){return v(v({},b(G[0])),{},{body:"LogRocket fetch error: ".concat(X.message)})})}else J=Promise.resolve(v(v({},b(G[1])),{},{url:"".concat(G[0]),body:(G[1]||{}).body}));return J.then(function(X){return R[L]=X.method,A("".concat(I).concat(L),X),G})},requestError:function(L,z){return Promise.reject(z)},response:function(L,z){var G,H;if(M("".concat(I).concat(L)))return z;if(z.headers.get("content-type")==="text/event-stream")H=Promise.resolve("LogRocket skipped consuming an event-stream body.");else{try{G=z.clone()}catch(ie){var J={url:z.url,responseType:z.type.toUpperCase(),status:z.status,headers:y(z.headers),body:"LogRocket fetch error: ".concat(ie.message),method:R[L]};return delete R[L],E("".concat(I).concat(L),J),z}try{if(window.TextDecoder&&G.body){var k=G.body.getReader(),X=new window.TextDecoder("utf-8"),W="";H=k.read().then(function ie(se){var ye=se.done,Ne=se.value;if(ye)return W;var He=Ne?X.decode(Ne,{stream:!0}):"";return W+=He,k.read().then(ie)})}else H=G.text()}catch(ie){H=Promise.resolve("LogRocket error reading body: ".concat(ie.message))}}return H.catch(function(ie){if(!(ie.name==="AbortError"&&ie instanceof DOMException))return"LogRocket error reading body: ".concat(ie.message)}).then(function(ie){var se={url:z.url,responseType:z.type.toUpperCase(),status:z.status,headers:y(z.headers),body:ie,method:R[L]};delete R[L],E("".concat(I).concat(L),se)}),z},responseError:function(L,z){var G={url:void 0,status:0,headers:{},body:"".concat(z)};return E("".concat(I).concat(L),G),Promise.reject(z)}});return C}}),"./packages/@logrocket/network/src/registerIonic.ts":(function(o,a,l){var c=l("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(a,"__esModule",{value:!0}),a.mergeHeaders=k,a.serializeQueryParams=Ne,a.appendQueryParamsString=He,a.processData=le,a.registerIonic=be;var u=c(l("./node_modules/@babel/runtime/helpers/defineProperty.js")),d=c(l("./node_modules/@babel/runtime/helpers/typeof.js")),f=c(l("./node_modules/@babel/runtime/helpers/toConsumableArray.js")),m=c(l("./packages/@logrocket/utils/src/protectFunc.ts"));function v(oe,ge){var Se=typeof Symbol<"u"&&oe[Symbol.iterator]||oe["@@iterator"];if(!Se){if(Array.isArray(oe)||(Se=g(oe))||ge){Se&&(oe=Se);var q=0,me=function(){};return{s:me,n:function(){return q>=oe.length?{done:!0}:{done:!1,value:oe[q++]}},e:function(We){throw We},f:me}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var xe=!0,Re=!1,Ce;return{s:function(){Se=Se.call(oe)},n:function(){var We=Se.next();return xe=We.done,We},e:function(We){Re=!0,Ce=We},f:function(){try{!xe&&Se.return!=null&&Se.return()}finally{if(Re)throw Ce}}}}function g(oe,ge){if(oe){if(typeof oe=="string")return y(oe,ge);var Se=Object.prototype.toString.call(oe).slice(8,-1);if(Se==="Object"&&oe.constructor&&(Se=oe.constructor.name),Se==="Map"||Se==="Set")return Array.from(oe);if(Se==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Se))return y(oe,ge)}}function y(oe,ge){(ge==null||ge>oe.length)&&(ge=oe.length);for(var Se=0,q=new Array(ge);Se<ge;Se++)q[Se]=oe[Se];return q}function b(oe,ge){var Se=Object.keys(oe);if(Object.getOwnPropertySymbols){var q=Object.getOwnPropertySymbols(oe);ge&&(q=q.filter(function(me){return Object.getOwnPropertyDescriptor(oe,me).enumerable})),Se.push.apply(Se,q)}return Se}function S(oe){for(var ge=1;ge<arguments.length;ge++){var Se=arguments[ge]!=null?arguments[ge]:{};ge%2?b(Object(Se),!0).forEach(function(q){(0,u.default)(oe,q,Se[q])}):Object.getOwnPropertyDescriptors?Object.defineProperties(oe,Object.getOwnPropertyDescriptors(Se)):b(Object(Se)).forEach(function(q){Object.defineProperty(oe,q,Object.getOwnPropertyDescriptor(Se,q))})}return oe}var x=new Set(["get","put","post","patch","head","delete","options","upload","download"]),A=new Set(["urlencoded","json","utf8"]),E=new Set(["raw","multipart"]),M="ionic-",I=new Set(["desktop","mobileweb","pwa"]),R=new Set(["FormData"]),C=new Set,D=new Set(["string"]),L=new Set(["string","array"]),z={utf8:D,urlencoded:new Set(["object"]),json:new Set(["array","object"]),raw:new Set(["Uint8Array","ArrayBuffer"]),default:C};function G(oe,ge,Se){if(typeof ge!="string")throw new Error("".concat(Se," must be one of: ").concat((0,f.default)(oe).join(", ")));if(ge=ge.trim().toLowerCase(),!oe.has(ge))throw new Error("".concat(Se," must be one of: ").concat((0,f.default)(oe).join(", ")));return ge}function H(oe,ge,Se){if((0,d.default)(oe)!=="object")throw new Error(Se);for(var q=0,me=Object.keys(oe);q<me.length;q++){var xe=me[q];if(!ge.has((0,d.default)(oe[xe])))throw new Error(Se)}return oe}function J(oe,ge){var Se=new URL(oe),q=Se.host;return ge.getHeaders(q)||null}function k(oe,ge){return S(S({},oe),ge)}function X(oe,ge,Se){var q=Se.getHeaders("*")||{},me=J(oe,Se)||{};return k(k(q,me),ge)}function W(oe,ge){return ge?encodeURIComponent(oe):oe}function ie(oe,ge,Se){return oe.length?Se?"".concat(encodeURIComponent(oe),"[").concat(encodeURIComponent(ge),"]"):"".concat(oe,"[").concat(ge,"]"):Se?encodeURIComponent(ge):ge}function se(oe,ge,Se){var q=[],me=v(ge),xe;try{for(me.s();!(xe=me.n()).done;){var Re=xe.value;if(Array.isArray(Re)){q.push(se("".concat(oe,"[]"),Re,Se));continue}else if((0,d.default)(Re)==="object"){q.push(ye("".concat(oe,"[]").concat(Re),Se,void 0));continue}q.push("".concat(ie(oe,"",Se),"=").concat(W(Re,Se)))}}catch(Ce){me.e(Ce)}finally{me.f()}return q.join("&")}function ye(oe,ge,Se){var q=[];for(var me in ge)if(ge.hasOwnProperty(me)){var xe=oe.length?"".concat(oe,"[").concat(me,"]"):me;if(Array.isArray(ge[me])){q.push(se(xe,ge[me],Se));continue}else if((0,d.default)(ge[me])==="object"&&ge[me]!==null){q.push(ye(xe,ge[me],Se));continue}q.push("".concat(ie(oe,me,Se),"=").concat(W(ge[me],Se)))}return q.join("&")}function Ne(oe,ge){return ye("",oe,ge)}function He(oe,ge){if(!oe.length||!ge.length)return oe;var Se=new URL(oe),q=Se.host,me=Se.pathname,xe=Se.search,Re=Se.hash,Ce=Se.protocol;return"".concat(Ce,"//").concat(q).concat(me).concat(xe.length?"".concat(xe,"&").concat(ge):"?".concat(ge)).concat(Re)}function fe(oe){return z[oe]||z.default}function he(oe){return oe==="multipart"?R:C}function le(oe,ge){var Se=(0,d.default)(oe),q=fe(ge),me=he(ge);if(me.size>0){var xe=!1;if(me.forEach(function(Re){l.g[Re]&&oe instanceof l.g[Re]&&(xe=!0)}),!xe)throw new Error("INSTANCE_TYPE_MISMATCH_DATA ".concat((0,f.default)(me).join(", ")))}if(me.size===0&&!q.has(Se))throw new Error("TYPE_MISMATCH_DATA ".concat((0,f.default)(q).join(", ")));switch(ge){case"utf8":return oe;default:return JSON.stringify(oe,void 0,2)}}function ee(oe,ge){oe=oe||{};var Se,q=oe.data;try{Se=G(A,oe.serializer||ge.getDataSerializer(),"serializer / data payload type")}catch(me){Se=G(E,oe.serializer||ge.getDataSerializer(),"serializer / data payload type"),q={}}return{data:q,filePath:oe.filePath,followRedirect:oe.followRedirect,headers:H(oe.headers||{},D,"Invalid header type, must be string"),method:G(x,oe.method||x[0],"method"),name:oe.name,params:H(oe.params||{},L,"Invalid param, must be of type string or array"),responseType:oe.responseType,serializer:Se,connectTimeout:oe.connectTimeout,readTimeout:oe.readTimeout,timeout:oe.timeout}}var de=0;function be(oe){var ge,Se,q,me=oe.addRequest,xe=oe.addResponse,Re=oe.isIgnored,Ce=(ge=window.cordova)===null||ge===void 0||(Se=ge.plugin)===null||Se===void 0?void 0:Se.http,qe={},We=!1;if(typeof Ce>"u")return function(){};var Ze=(q=window.ionic)===null||q===void 0?void 0:q.platforms;if(typeof Ze<"u"&&typeof Ze.some=="function"&&Ze.some(function(Y){return I.has(Y)}))return function(){};var wt=Ce.sendRequest,St=(0,m.default)(function(Y,B,ue){if(!Re("".concat(M).concat(ue)))try{var Ae={url:Y.url||"",status:Y.status<600&&Y.status>=100?Y.status:0,headers:Y.headers||{},body:B?Y.data:Y.error,method:qe[ue].toUpperCase()};xe("".concat(M).concat(ue),Ae)}catch(Ie){var ze={url:Y.url||"",status:Y.status<600&&Y.status>=100?Y.status:0,headers:Y.headers||{},body:"LogRocket fetch error: ".concat(Ie.message),method:qe[ue].toUpperCase()};xe("".concat(M).concat(ue),ze)}});return Ce.sendRequest=function(Y,B,ue,Ae){var ze=++de,Ie=function(Ye){We||(St(Ye,!0,ze),delete qe[ze]),ue(Ye)},lt=function(Ye){We||(St(Ye,!1,ze),delete qe[ze]),Ae(Ye)};if(!We)try{var Xe=ee(B,Ce),ht=He(Y,ye("",Xe.params,!0)),ct=X(Y,Xe.headers,Ce),je=Xe.method||"get";qe[ze]=je;var Je={url:ht,method:je.toUpperCase(),headers:ct||{},body:le(Xe.data||{},Xe.serializer)};me("".concat(M).concat(ze),Je)}catch(st){var bt={url:Y,method:(B.method||"get").toUpperCase(),headers:{},body:"LogRocket fetch error: ".concat(st.message)};me("".concat(M).concat(ze),bt)}return wt(Y,B,Ie,lt)},function(){We=!0,Ce.sendRequest=wt,qe={}}}}),"./packages/@logrocket/network/src/registerNetworkInformation.js":(function(o,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=c;var l={"slow-2g":"SLOW2G","2g":"TWOG","3g":"THREEG","4g":"FOURG"};function c(u){var d=void 0;function f(){var m={online:window.navigator.onLine,effectiveType:"UNKOWN"};window.navigator.onLine?window.navigator.connection&&window.navigator.connection.effectiveType&&(m.effectiveType=l[window.navigator.connection.effectiveType]||"UNKNOWN"):m.effectiveType="NONE",!(d&&m.online===d.online&&m.effectiveType===d.effectiveType)&&(d=m,u.addEvent("lr.network.NetworkStatusEvent",function(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},g=v.isEnabled,y=g===void 0?!0:g;return y?m:null}))}return setTimeout(f),window.navigator.connection&&typeof window.navigator.connection.addEventListener=="function"&&window.navigator.connection.addEventListener("change",f),window.addEventListener("online",f),window.addEventListener("offline",f),function(){window.removeEventListener("offline",f),window.removeEventListener("online",f),window.navigator.connection&&typeof window.navigator.connection.removeEventListener=="function"&&window.navigator.connection.removeEventListener("change",f)}}}),"./packages/@logrocket/network/src/registerXHR.js":(function(o,a,l){var c=l("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(a,"__esModule",{value:!0}),a.setActive=b,a.default=x;var u=c(l("./packages/@logrocket/utils/src/mapValues.ts")),d=c(l("./packages/@logrocket/utils/src/enhanceFunc.ts")),f=c(l("./packages/@logrocket/utils/src/protectFunc.ts")),m=c(l("./packages/@logrocket/utils/src/startsWith.js")),v=l("./packages/@logrocket/utils/src/constants/nps.js"),g=l("./packages/@logrocket/utils/src/constants/statusCodes.ts"),y=!0;function b(A){y=A}var S=0;function x(A){var E=A.addRequest,M=A.addResponse,I=A.isIgnored,R=A.logger,C=A.shouldAugmentNPS,D=C===void 0?!0:C,L=A.shouldParseXHRBlob,z=L===void 0?!1:L,G=XMLHttpRequest,H=new WeakMap,J=!1,k="xhr-";return window._lrXMLHttpRequest=XMLHttpRequest,XMLHttpRequest=function(W,ie){var se=new G(W,ie);if(!y)return se;H.set(se,{xhrId:++S,requestHeaders:{},sent:!1,done:!1});var ye=se.open;function Ne(){for(var ee=arguments.length,de=new Array(ee),be=0;be<ee;be++)de[be]=arguments[be];try{var oe=de[1];if(window.URL&&typeof window.URL=="function"&&oe.search(v.WOOTRIC_RESPONSES_REGEX)===0){var ge=new window.URL(R.recordingURL);ge.searchParams.set("nps","wootric");var Se=new window.URL(oe),q=Se.searchParams.get("response[text]"),me=q?"".concat(q,"\n\n"):"";Se.searchParams.set("response[text]","".concat(me,"<").concat(ge.href,"|View LogRocket session>")),de[1]=Se.href}}catch(xe){}return ye.apply(this,de)}var He=se.send;function fe(){for(var ee=arguments.length,de=new Array(ee),be=0;be<ee;be++)de[be]=arguments[be];try{var oe=H.get(se);if(window.URL&&typeof window.URL=="function"&&oe&&oe.url&&oe.url.search(v.DELIGHTED_RESPONSES_REGEX)===0&&de.length&&de[0].indexOf(v.DELIGHTED_FEEDBACK_PREFIX)!==-1){var ge=new window.URL(R.recordingURL);ge.searchParams.set("nps","delighted");var Se=encodeURIComponent(ge.href),q=de[0].split("&").map(function(me){if((0,m.default)(me,v.DELIGHTED_FEEDBACK_PREFIX)){var xe=me===v.DELIGHTED_FEEDBACK_PREFIX;return"".concat(me).concat(xe?"":"\n\n","<").concat(Se,"|View LogRocket session>")}return me}).join("&");de[0]=q}}catch(me){}return He.apply(this,de)}D&&(se.open=Ne,se.send=fe);var he=function(){var de;if(!J){var be=H.get(se);if(!(!be||I("".concat(k).concat(be.xhrId)))&&!(!be.sent||!be.done)){var oe=be.status||g.XHR_CUSTOM_STATUS_CODES.error;oe===g.XHR_CUSTOM_STATUS_CODES.error&&((de=window.navigator)===null||de===void 0?void 0:de.onLine)===!1&&(oe=g.XHR_CUSTOM_STATUS_CODES.offline);var ge={url:be.url,status:oe,headers:be.responseHeaders,body:be.responseBody,method:(be.method||"").toUpperCase()};if(z&&ge.body instanceof Blob){var Se=new FileReader;Se.readAsText(ge.body),Se.onload=function(){try{ge.body=JSON.parse(Se.result)}catch(q){}M("".concat(k).concat(be.xhrId),ge)}}else M("".concat(k).concat(be.xhrId),ge)}}};(0,d.default)(se,"open",(0,f.default)(function(ee,de){if(!J){var be=H.get(se);be.method=ee,be.url=de}})),(0,d.default)(se,"send",(0,f.default)(function(ee){if(!J){var de=H.get(se);if(de){var be={url:de.url,method:de.method&&de.method.toUpperCase(),headers:(0,u.default)(de.requestHeaders||{},function(oe){return oe.join(", ")}),body:ee};E("".concat(k).concat(de.xhrId),be),de.sent=!0,he()}}})),(0,d.default)(se,"setRequestHeader",(0,f.default)(function(ee,de){if(!J){var be=H.get(se);be&&(be.requestHeaders=be.requestHeaders||{},be.requestHeaders[ee]=be.requestHeaders[ee]||[],be.requestHeaders[ee].push(de))}}));var le={readystatechange:(0,f.default)(function(){if(!J&&se.readyState===4){var ee=H.get(se);if(!ee||I("".concat(k).concat(ee.xhrId)))return;var de=se.getAllResponseHeaders()||"";ee.responseHeaders=de.split(/[\r\n]+/).reduce(function(oe,ge){var Se=oe,q=ge.split(": ");if(q.length>0){var me=q.shift(),xe=q.join(": ");oe[me]?Se[me]+=", ".concat(xe):Se[me]=xe}return Se},{});var be;try{switch(se.responseType){case"json":be=R._shouldCloneResponse?JSON.parse(JSON.stringify(se.response)):se.response;break;case"arraybuffer":case"blob":{be=se.response;break}case"document":{be=se.responseXML;break}case"text":case"":{be=se.responseText;break}default:be=""}}catch(oe){be="LogRocket: Error accessing response."}ee.responseBody=be,ee.status=se.status,ee.done=!0}}),abort:(0,f.default)(function(){var ee=H.get(se);ee&&(ee.status=g.XHR_CUSTOM_STATUS_CODES.aborted)}),timeout:(0,f.default)(function(){var ee=H.get(se);ee&&(ee.status=g.XHR_CUSTOM_STATUS_CODES.timeout)}),loadend:(0,f.default)(function(){he()})};return Object.keys(le).forEach(function(ee){se.addEventListener(ee,le[ee])}),se},XMLHttpRequest.prototype=G.prototype,["UNSENT","OPENED","HEADERS_RECEIVED","LOADING","DONE"].forEach(function(X){XMLHttpRequest[X]=G[X]}),function(){J=!0,XMLHttpRequest=G}}}),"./packages/@logrocket/now/src/index.js":(function(o,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=Date.now.bind(Date),c=l(),u=typeof performance<"u"&&performance.now?performance.now.bind(performance):function(){return l()-c};a.default=u}),"./packages/@logrocket/redux/src/createEnhancer.js":(function(o,a,l){var c=l("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(a,"__esModule",{value:!0}),a.default=g;var u=c(l("./node_modules/@babel/runtime/helpers/defineProperty.js")),d=c(l("./packages/@logrocket/now/src/index.js"));function f(y,b){var S=Object.keys(y);if(Object.getOwnPropertySymbols){var x=Object.getOwnPropertySymbols(y);b&&(x=x.filter(function(A){return Object.getOwnPropertyDescriptor(y,A).enumerable})),S.push.apply(S,x)}return S}function m(y){for(var b=1;b<arguments.length;b++){var S=arguments[b]!=null?arguments[b]:{};b%2?f(Object(S),!0).forEach(function(x){(0,u.default)(y,x,S[x])}):Object.getOwnPropertyDescriptors?Object.defineProperties(y,Object.getOwnPropertyDescriptors(S)):f(Object(S)).forEach(function(x){Object.defineProperty(y,x,Object.getOwnPropertyDescriptor(S,x))})}return y}var v=0;function g(y){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},S=b.stateSanitizer,x=S===void 0?function(M){return M}:S,A=b.actionSanitizer,E=A===void 0?function(M){return M}:A;return function(M){return function(I,R,C){var D=M(I,R,C),L=D.dispatch,z=v++;y.addEvent("lr.redux.InitialState",function(){var H;try{H=x(D.getState())}catch(J){console.error(J.toString())}return{state:H,storeId:z}});var G=function(J){var k=(0,d.default)(),X,W;try{W=L(J)}catch(se){X=se}finally{var ie=(0,d.default)()-k;y.addEvent("lr.redux.ReduxAction",function(){var se=null,ye=null;try{se=x(D.getState()),ye=E(J)}catch(Ne){console.error(Ne.toString())}return se&&ye?{storeId:z,action:ye,duration:ie,stateDelta:se}:null})}if(X)throw X;return W};return m(m({},D),{},{dispatch:G})}}}}),"./packages/@logrocket/redux/src/createMiddleware.js":(function(o,a,l){var c=l("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(a,"__esModule",{value:!0}),a.default=f;var u=c(l("./packages/@logrocket/now/src/index.js")),d=0;function f(m){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},g=v.stateSanitizer,y=g===void 0?function(x){return x}:g,b=v.actionSanitizer,S=b===void 0?function(x){return x}:b;return function(x){var A=d++;return m.addEvent("lr.redux.InitialState",function(){var E;try{E=y(x.getState())}catch(M){console.error(M.toString())}return{state:E,storeId:A}}),function(E){return function(M){var I=(0,u.default)(),R,C;try{C=E(M)}catch(L){R=L}finally{var D=(0,u.default)()-I;m.addEvent("lr.redux.ReduxAction",function(){var L=null,z=null;try{L=y(x.getState()),z=S(M)}catch(G){console.error(G.toString())}return L&&z?{storeId:A,action:z,duration:D,stateDelta:L}:null})}if(R)throw R;return C}}}}}),"./packages/@logrocket/redux/src/index.js":(function(o,a,l){var c=l("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"createEnhancer",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(a,"createMiddleware",{enumerable:!0,get:function(){return d.default}});var u=c(l("./packages/@logrocket/redux/src/createEnhancer.js")),d=c(l("./packages/@logrocket/redux/src/createMiddleware.js"))}),"./packages/@logrocket/utils/src/TraceKit.js":(function(o,a,l){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var c={collectWindowErrors:!0,debug:!1},u=typeof window<"u"?window:typeof l.g<"u"?l.g:typeof self<"u"?self:{},d=[].slice,f="?",m=/^(?:Uncaught (?:exception: )?)?((?:Eval|Internal|Range|Reference|Syntax|Type|URI)Error): ?(.*)$/;function v(){return typeof document>"u"||typeof document.location>"u"?"":document.location.href}c.report=(function(){var b=[],S=null,x=null,A=null;function E(k){z(),b.push(k)}function M(k){for(var X=b.length-1;X>=0;--X)b[X]===k&&b.splice(X,1)}function I(){G(),b=[]}function R(k,X){var W=null;if(!(X&&!c.collectWindowErrors)){for(var ie in b)if(b.hasOwnProperty(ie))try{b[ie].apply(null,[k].concat(d.call(arguments,2)))}catch(se){W=se}if(W)throw W}}var C,D;function L(k,X,W,ie,se){var ye=null;if(A)c.computeStackTrace.augmentStackTraceWithInitialElement(A,X,W,k),H();else if(se)ye=c.computeStackTrace(se),R(ye,!0);else{var Ne={url:X,line:W,column:ie},He=void 0,fe=k,he;if({}.toString.call(k)==="[object String]"){var he=k.match(m);he&&(He=he[1],fe=he[2])}Ne.func=f,ye={name:He,message:fe,url:v(),stack:[Ne]},R(ye,!0)}return C?C.apply(this,arguments):!1}function z(){D||(C=u.onerror,u.onerror=L,D=!0)}function G(){D&&(u.onerror=C,D=!1,C=void 0)}function H(){var k=A,X=S;S=null,A=null,x=null,R.apply(null,[k,!1].concat(X))}function J(k,X){var W=d.call(arguments,1);if(A){if(x===k)return;H()}var ie=c.computeStackTrace(k);if(A=ie,x=k,S=W,setTimeout(function(){x===k&&H()},ie.incomplete?2e3:0),X!==!1)throw k}return J.subscribe=E,J.unsubscribe=M,J.uninstall=I,J})(),c.computeStackTrace=(function(){function b(E){if(!(typeof E.stack>"u"||!E.stack)){var M=/^\s*at (.*?) ?\(((?:file|https?|blob|chrome-extension|native|eval|<anonymous>).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,I=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|resource|\[native).*?)(?::(\d+))?(?::(\d+))?\s*$/i,R=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,C=E.stack.split("\n"),D=[],L,z;/^(.*) is undefined$/.exec(E.message);for(var G=0,H=C.length;G<H;++G){if(L=M.exec(C[G])){var J=L[2]&&L[2].indexOf("native")!==-1;z={url:J?null:L[2],func:L[1]||f,args:J?[L[2]]:[],line:L[3]?+L[3]:null,column:L[4]?+L[4]:null}}else if(L=R.exec(C[G]))z={url:L[2],func:L[1]||f,args:[],line:+L[3],column:L[4]?+L[4]:null};else if(L=I.exec(C[G]))z={url:L[3],func:L[1]||f,args:L[2]?L[2].split(","):[],line:L[4]?+L[4]:null,column:L[5]?+L[5]:null};else continue;!z.func&&z.line&&(z.func=f),D.push(z)}return D.length?(!D[0].column&&typeof E.columnNumber<"u"&&(D[0].column=E.columnNumber+1),{name:E.name,message:E.message,url:v(),stack:D}):null}}function S(E,M,I,R){var C={url:M,line:I};if(C.url&&C.line){if(E.incomplete=!1,C.func||(C.func=f),E.stack.length>0&&E.stack[0].url===C.url){if(E.stack[0].line===C.line)return!1;if(!E.stack[0].line&&E.stack[0].func===C.func)return E.stack[0].line=C.line,!1}return E.stack.unshift(C),E.partial=!0,!0}else E.incomplete=!0;return!1}function x(E,M){for(var I=/function\s+([_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*)?\s*\(/i,R=[],C={},D=!1,L,z,G=x.caller;G&&!D;G=G.caller)if(!(G===A||G===c.report)){if(z={url:null,func:f,line:null,column:null},G.name?z.func=G.name:(L=I.exec(G.toString()))&&(z.func=L[1]),typeof z.func>"u")try{z.func=L.input.substring(0,L.input.indexOf("{"))}catch(J){}C[""+G]?D=!0:C[""+G]=!0,R.push(z)}M&&R.splice(0,M);var H={name:E.name,message:E.message,url:v(),stack:R};return S(H,E.sourceURL||E.fileName,E.line||E.lineNumber,E.message||E.description),H}function A(E,M){var I=null;M=M==null?0:+M;try{if(I=b(E),I)return I}catch(R){if(c.debug)throw R}try{if(I=x(E,M+1),I)return I}catch(R){if(c.debug)throw R}return{name:E.name,message:E.message,url:v()}}return A.augmentStackTraceWithInitialElement=S,A.computeStackTraceFromStackProp=b,A})();var g=c;a.default=g}),"./packages/@logrocket/utils/src/constants/nps.js":(function(o,a){Object.defineProperty(a,"__esModule",{value:!0}),a.DELIGHTED_FEEDBACK_PREFIX=a.DELIGHTED_RESPONSES_REGEX=a.WOOTRIC_RESPONSES_REGEX=void 0;var l=/^https:\/\/production.wootric.com\/responses/;a.WOOTRIC_RESPONSES_REGEX=l;var c=/^https:\/\/web.delighted.com\/e\/[a-zA-Z-]*\/c/;a.DELIGHTED_RESPONSES_REGEX=c;var u="comment=";a.DELIGHTED_FEEDBACK_PREFIX=u}),"./packages/@logrocket/utils/src/constants/statusCodes.ts":(function(o,a,l){var c=l("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(a,"__esModule",{value:!0}),a.getStatusText=g,a.XHR_CUSTOM_FAILURE_STATUSES=a.XHR_CUSTOM_STATUS_CODES=a.STATUS_CODES=void 0;var u=c(l("./node_modules/@babel/runtime/helpers/defineProperty.js")),d,f={0:"",100:"Continue",101:"Switching Protocol",102:"Processing",103:"Early Hints",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",306:"unused",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Too Early",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",510:"Not Extended",511:"Network Authentication Required"};a.STATUS_CODES=f;var m={error:0,timeout:444,aborted:499,offline:1001};a.XHR_CUSTOM_STATUS_CODES=m;var v=(d={},(0,u.default)(d,m.error,"Error"),(0,u.default)(d,m.timeout,"Timeout"),(0,u.default)(d,m.aborted,"Aborted"),(0,u.default)(d,m.offline,"Offline"),d);a.XHR_CUSTOM_FAILURE_STATUSES=v;function g(y){return f[String(y)]}}),"./packages/@logrocket/utils/src/createUnsubListener.ts":(function(o,a,l){var c=l("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(a,"__esModule",{value:!0}),a.createUnsubListener=m,a.Handler=void 0;var u=c(l("./node_modules/@babel/runtime/helpers/classCallCheck.js")),d=c(l("./node_modules/@babel/runtime/helpers/createClass.js")),f=(function(){function v(g){(0,u.default)(this,v),this._value=void 0,this._value=g}return(0,d.default)(v,[{key:"get",value:function(){return this._value}},{key:"clear",value:function(){this._value=void 0}}]),v})();a.Handler=f;function m(v){return function(){v.clear()}}}),"./packages/@logrocket/utils/src/enhanceFunc.ts":(function(o,a,l){Object.defineProperty(a,"__esModule",{value:!0}),a.default=d;var c=l("./packages/@logrocket/utils/src/createUnsubListener.ts"),u=function(){};function d(f,m,v){if(typeof f[m]!="function")return u;try{var g=function(){for(var x,A=arguments.length,E=new Array(A),M=0;M<A;M++)E[M]=arguments[M];var I=y.apply(this,E);return(x=b.get())===null||x===void 0||x.apply(this,E),I},y=f[m],b=new c.Handler(v);return f[m]=g,function(){b.clear(),f[m]===g&&(f[m]=y)}}catch(S){return u}}}),"./packages/@logrocket/utils/src/logError.js":(function(o,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=typeof console<"u"&&console.error&&console.error.bind,c=l?console.error.bind(console):function(){},u=c;a.default=u}),"./packages/@logrocket/utils/src/mapValues.ts":(function(o,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=l;function l(c,u){if(c==null)return{};var d={};return Object.keys(c).forEach(function(f){d[f]=u(c[f])}),d}}),"./packages/@logrocket/utils/src/protectFunc.ts":(function(o,a,l){var c=l("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(a,"__esModule",{value:!0}),a.default=f;var u=c(l("./packages/@logrocket/utils/src/sendTelemetryData.js")),d=c(l("./packages/@logrocket/utils/src/logError.js"));function f(m){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){};return function(){var g;try{g=m.apply(void 0,arguments)}catch(b){if(typeof window<"u"&&window._lrdebug)throw b;var y=v(b);(0,d.default)("LogRocket",b),(0,u.default)(b,y)}return g}}}),"./packages/@logrocket/utils/src/scrubException.ts":(function(o,a,l){var c=l("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(a,"__esModule",{value:!0}),a.scrubException=b;var u=c(l("./node_modules/@babel/runtime/helpers/typeof.js"));function d(S,x){var A=typeof Symbol<"u"&&S[Symbol.iterator]||S["@@iterator"];if(!A){if(Array.isArray(S)||(A=f(S))||x){A&&(S=A);var E=0,M=function(){};return{s:M,n:function(){return E>=S.length?{done:!0}:{done:!1,value:S[E++]}},e:function(L){throw L},f:M}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var I=!0,R=!1,C;return{s:function(){A=A.call(S)},n:function(){var L=A.next();return I=L.done,L},e:function(L){R=!0,C=L},f:function(){try{!I&&A.return!=null&&A.return()}finally{if(R)throw C}}}}function f(S,x){if(S){if(typeof S=="string")return m(S,x);var A=Object.prototype.toString.call(S).slice(8,-1);if(A==="Object"&&S.constructor&&(A=S.constructor.name),A==="Map"||A==="Set")return Array.from(S);if(A==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(A))return m(S,x)}}function m(S,x){(x==null||x>S.length)&&(x=S.length);for(var A=0,E=new Array(x);A<x;A++)E[A]=S[A];return E}function v(S){return/boolean|number|string/.test((0,u.default)(S))}var g=["level","logger"],y=["tags","extra"];function b(S,x){if(x){var A=d(g),E;try{for(A.s();!(E=A.n()).done;){var M=E.value,I=x[M];v(I)&&(S[M]=I.toString())}}catch(X){A.e(X)}finally{A.f()}var R=d(y),C;try{for(R.s();!(C=R.n()).done;){for(var D=C.value,L=x[D]||{},z={},G=0,H=Object.keys(L);G<H.length;G++){var J=H[G],k=L[J];v(k)&&(z[J.toString()]=k.toString())}S[D]=z}}catch(X){R.e(X)}finally{R.f()}}}}),"./packages/@logrocket/utils/src/sendTelemetryData.js":(function(o,a,l){var c=l("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(a,"__esModule",{value:!0}),a.sendTelemetry=b,a.default=S;var u=c(l("./node_modules/@babel/runtime/helpers/defineProperty.js")),d=c(l("./packages/@logrocket/utils/src/logError.js")),f=c(l("./packages/@logrocket/utils/src/TraceKit.js"));function m(x,A){var E=Object.keys(x);if(Object.getOwnPropertySymbols){var M=Object.getOwnPropertySymbols(x);A&&(M=M.filter(function(I){return Object.getOwnPropertyDescriptor(x,I).enumerable})),E.push.apply(E,M)}return E}function v(x){for(var A=1;A<arguments.length;A++){var E=arguments[A]!=null?arguments[A]:{};A%2?m(Object(E),!0).forEach(function(M){(0,u.default)(x,M,E[M])}):Object.getOwnPropertyDescriptors?Object.defineProperties(x,Object.getOwnPropertyDescriptors(E)):m(Object(E)).forEach(function(M){Object.defineProperty(x,M,Object.getOwnPropertyDescriptor(E,M))})}return x}var g="8304d923ee86bbba88df4d491ccbc1c75ecfbe70";function y(x){try{var A,E,M=x.message,I="https://e.logrocket.com/api/3/store/?sentry_version=7&sentry_client=http%2F3.8.0&sentry_key=b64162b4187a4c5caae8a68a7e291793",R=JSON.stringify(v({message:M,logger:"javascript",platform:"javascript",request:{headers:{"User-Agent":typeof navigator<"u"&&navigator.userAgent},url:typeof location<"u"&&location.href},release:g,environment:((A=window)===null||A===void 0||(E=A.__SDKCONFIG__)===null||E===void 0?void 0:E.scriptEnv)||"prod"},x));if(typeof window<"u"){var C=window._lrXMLHttpRequest||XMLHttpRequest,D=new C;D.open("POST",I),D.send(R)}else typeof fetch<"u"&&fetch(I,{method:"POST",body:R}).catch(function(L){(0,d.default)("Failed to send via fetch",L)})}catch(L){(0,d.default)("Failed to send",L)}}function b(x,A){if(typeof window<"u"&&window._lrdebug)return void(0,d.default)(x);A&&A.extra&&A.extra.appID&&typeof A.extra.appID.indexOf=="function"&&A.extra.appID.indexOf("au2drp/")===0&&Math.random()>=.25||y(v({message:x},A))}function S(x,A){try{var E=x.message,M;try{M=JSON.stringify(A).slice(0,1e3)}catch(R){try{M="Could not stringify payload: ".concat(Object.prototype.toString.call(A))}catch(C){}}var I;try{I=f.default.computeStackTrace(x).stack.map(function(R){return{filename:R.url,lineno:R.line,colno:R.column,function:R.func||"?"}})}catch(R){}y({message:E,extra:{stringPayload:M},exception:{values:[{type:x.type,value:E,stacktrace:{frames:I}}]}})}catch(R){(0,d.default)("Failed to send",R)}}}),"./packages/@logrocket/utils/src/startsWith.js":(function(o,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=l;function l(c,u){var d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return c&&u&&c.substring(d,d+u.length)===u}}),"./packages/logrocket/src/LogRocket.js":(function(o,a,l){var c=l("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(a,"__esModule",{value:!0}),a.default=a.MAX_QUEUE_SIZE=void 0;var u=c(l("./node_modules/@babel/runtime/helpers/classCallCheck.js")),d=c(l("./node_modules/@babel/runtime/helpers/createClass.js")),f=c(l("./node_modules/@babel/runtime/helpers/defineProperty.js")),m=c(l("./node_modules/@babel/runtime/helpers/objectWithoutProperties.js")),v=c(l("./packages/@logrocket/network/src/index.js")),g=l("./packages/@logrocket/exceptions/src/index.js"),y=c(l("./packages/@logrocket/console/src/index.js")),b=l("./packages/@logrocket/redux/src/index.js");function S(I,R){var C=Object.keys(I);if(Object.getOwnPropertySymbols){var D=Object.getOwnPropertySymbols(I);R&&(D=D.filter(function(L){return Object.getOwnPropertyDescriptor(I,L).enumerable})),C.push.apply(C,D)}return C}function x(I){for(var R=1;R<arguments.length;R++){var C=arguments[R]!=null?arguments[R]:{};R%2?S(Object(C),!0).forEach(function(D){(0,f.default)(I,D,C[D])}):Object.getOwnPropertyDescriptors?Object.defineProperties(I,Object.getOwnPropertyDescriptors(C)):S(Object(C)).forEach(function(D){Object.defineProperty(I,D,Object.getOwnPropertyDescriptor(C,D))})}return I}var A=1e3;a.MAX_QUEUE_SIZE=A;var E=function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},C=R.ingestServer,D=(0,m.default)(R,["ingestServer"]);return C?x({serverURL:"".concat(C,"/i"),statsURL:"".concat(C,"/s")},D):D},M=(function(){function I(){var R=this;(0,u.default)(this,I),this._buffer=[],["log","info","warn","error","debug"].forEach(function(C){R[C]=function(){for(var D=arguments.length,L=new Array(D),z=0;z<D;z++)L[z]=arguments[z];R.addEvent("lr.core.LogEvent",function(){var G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return C==="error"&&G.shouldAggregateConsoleErrors&&g.Capture.captureMessage(R,L[0],L,{},!0),{logLevel:C.toUpperCase(),args:L}},{shouldCaptureStackTrace:!0})}}),this._isInitialized=!1,this._installed=[],window._lr_surl_cb=this.getSessionURL.bind(this)}return(0,d.default)(I,[{key:"addEvent",value:function(C,D){var L=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},z=Date.now();this._run(function(G){G.addEvent(C,D,x(x({},L),{},{timeOverride:z}))})}},{key:"onLogger",value:function(C){for(this._logger=C;this._buffer.length>0;){var D=this._buffer.shift();D(this._logger)}}},{key:"_run",value:function(C){if(!this._isDisabled)if(this._logger)C(this._logger);else{if(this._buffer.length>=A){this._isDisabled=!0,console.warn("LogRocket: script did not load. Check that you have a valid network connection."),this.uninstall();return}this._buffer.push(C.bind(this))}}},{key:"init",value:function(C){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this._isInitialized){var L,z=D.shouldAugmentNPS,G=z===void 0?!0:z,H=D.shouldParseXHRBlob,J=H===void 0?!1:H,k=D.shouldDetectExceptions,X=k===void 0?!0:k;X&&this._installed.push((0,g.registerExceptions)(this)),this._installed.push((0,v.default)(this,{shouldAugmentNPS:!!G,shouldParseXHRBlob:!!J,isDisabled:(D==null||(L=D.network)===null||L===void 0?void 0:L.isEnabled)===!1})),this._installed.push((0,y.default)(this)),this._isInitialized=!0,this._run(function(W){W.init(C,E(D))})}}},{key:"start",value:function(){this._run(function(C){C.start()})}},{key:"uninstall",value:function(){this._installed.forEach(function(C){return C()}),this._buffer=[],this._run(function(C){C.uninstall()})}},{key:"identify",value:function(C,D){this._run(function(L){L.identify(C,D)})}},{key:"startNewSession",value:function(){this._run(function(C){C.startNewSession()})}},{key:"track",value:function(C,D){this._run(function(L){L.track(C,D)})}},{key:"getSessionURL",value:function(C){if(typeof C!="function")throw new Error("LogRocket: must pass callback to getSessionURL()");this._run(function(D){D.getSessionURL?D.getSessionURL(C):C(D.recordingURL)})}},{key:"trackScrollEvent",value:function(C){this._logger&&this._logger.trackScrollEvent(C)}},{key:"getVersion",value:function(C){this._run(function(D){C(D.version)})}},{key:"captureMessage",value:function(C){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};g.Capture.captureMessage(this,C,[C],D)}},{key:"captureException",value:function(C){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};g.Capture.captureException(this,C,D)}},{key:"version",get:function(){return this._logger&&this._logger.version}},{key:"sessionURL",get:function(){return this._logger&&this._logger.recordingURL}},{key:"recordingURL",get:function(){return this._logger&&this._logger.recordingURL}},{key:"recordingID",get:function(){return this._logger&&this._logger.recordingID}},{key:"threadID",get:function(){return this._logger&&this._logger.threadID}},{key:"tabID",get:function(){return this._logger&&this._logger.tabID}},{key:"reduxEnhancer",value:function(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(0,b.createEnhancer)(this,C)}},{key:"reduxMiddleware",value:function(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(0,b.createMiddleware)(this,C)}},{key:"isDisabled",get:function(){return!!(this._isDisabled||this._logger&&this._logger._isDisabled)}}]),I})();a.default=M}),"./packages/logrocket/src/makeLogRocket.js":(function(o,a,l){var c=l("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(a,"__esModule",{value:!0}),a.default=m;var u=c(l("./packages/logrocket/src/LogRocket.js")),d="LogRocket on React Native requires the LogRocket React Native specific SDK. See setup guide here https://docs.logrocket.com/reference/react-native.",f=function(){return{init:function(){},uninstall:function(){},log:function(){},info:function(){},warn:function(){},error:function(){},debug:function(){},addEvent:function(){},identify:function(){},start:function(){},get threadID(){return null},get recordingID(){return null},get recordingURL(){return null},reduxEnhancer:function(){return function(y){return function(){return y.apply(void 0,arguments)}}},reduxMiddleware:function(){return function(){return function(y){return function(b){return y(b)}}}},track:function(){},getSessionURL:function(){},getVersion:function(){},startNewSession:function(){},onLogger:function(){},setClock:function(){},captureMessage:function(){},captureException:function(){}}};function m(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(){},g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:f,y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){return new u.default};if(typeof navigator<"u"&&navigator.product==="ReactNative")throw new Error(d);if(typeof window<"u"){if(window._disableLogRocket)return g();if(window.MutationObserver&&window.WeakMap){window._lrMutationObserver=window.MutationObserver;var b=y();return v(b),b}}return f()}}),"./packages/logrocket/src/setup.js":(function(o,a,l){var c=l("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(a,"__esModule",{value:!0}),a.getDomainsAndEnv=v,a.setupBaseSDKCONFIG=g,a.default=y;var u=c(l("./node_modules/@babel/runtime/helpers/objectWithoutProperties.js")),d=c(l("./packages/logrocket/src/makeLogRocket.js")),f={"cdn.logrocket.com":"https://r.logrocket.io","cdn.logrocket.io":"https://r.logrocket.io","cdn.lr-ingest.io":"https://r.lr-ingest.io","cdn.lr-in.com":"https://r.lr-in.com","cdn.lr-in-prod.com":"https://r.lr-in-prod.com","cdn.lr-ingest.com":"https://r.lr-ingest.com","cdn.ingest-lr.com":"https://r.ingest-lr.com","cdn.lr-intake.com":"https://r.lr-intake.com","cdn.intake-lr.com":"https://r.intake-lr.com","cdn.logr-ingest.com":"https://r.logr-ingest.com","cdn.lrkt-in.com":"https://r.lrkt-in.com","cdn.lgrckt-in.com":"https://r.lgrckt-in.com","cdn-staging.logrocket.io":"https://staging-i.logrocket.io","cdn-staging.lr-ingest.io":"https://staging-i.lr-ingest.io","cdn-staging.lr-in.com":"https://staging-i.lr-in.com","cdn-staging.lr-in-prod.com":"https://staging-i.lr-in-prod.com","cdn-staging.lr-ingest.com":"https://staging-i.lr-ingest.com","cdn-staging.ingest-lr.com":"https://staging-i.ingest-lr.com","cdn-staging.lr-intake.com":"https://staging-i.lr-intake.com","cdn-staging.intake-lr.com":"https://staging-i.intake-lr.com","cdn-staging.logr-ingest.com":"https://staging-i.logr-ingest.com","cdn-staging.lrkt-in.com":"https://staging-i.lrkt-in.com","cdn-staging.lgrckt-in.com":"https://staging-i.lgrckt-in.com"};function m(b){return b.startsWith("cdn-staging")?"staging":b.startsWith("localhost")?"development":"prod"}function v(b){if(b==="script"||b==="shopify-pixel"){try{var S=document.currentScript,x=S.src.match(/^(https?:\/\/([^\\]+))\/.+$/),A=x&&x[2];if(A&&f[A])return{scriptEnv:m(A),scriptOrigin:x&&x[1],scriptIngest:f[A]}}catch(E){}return{scriptEnv:"prod",scriptOrigin:"https://cdn.logrocket.io"}}else return{scriptEnv:void 0,scriptOrigin:"https://cdn.lgrckt-in.com",scriptIngest:"https://r.lgrckt-in.com"}}function g(b){typeof window.__SDKCONFIG__>"u"&&(window.__SDKCONFIG__={}),window.__SDKCONFIG__.serverURL="".concat(b,"/i"),window.__SDKCONFIG__.statsURL="".concat(b,"/s")}function y(){var b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},S=b.enterpriseServer,x=b.sdkVersion,A=x===void 0?"10.1.0":x,E=(0,u.default)(b,["enterpriseServer","sdkVersion"]),M=v(A),I=M.scriptEnv,R=M.scriptOrigin,C=M.scriptIngest,D=E.sdkServer||S,L=E.ingestServer||S||C,z=(0,d.default)(function(){var G=document.createElement("script");L&&(g(L),window.__SDKCONFIG__.scriptEnv=I),D?G.src="".concat(D,"/logger.min.js"):window.__SDKCONFIG__&&window.__SDKCONFIG__.loggerURL?G.src=window.__SDKCONFIG__.loggerURL:window._lrAsyncScript?G.src=window._lrAsyncScript:G.src="".concat(R,"/logger-1.min.js"),G.async=!0,document.head.appendChild(G),G.onload=function(){typeof window._LRLogger=="function"?setTimeout(function(){z.onLogger(new window._LRLogger({sdkVersion:A}))}):(console.warn("LogRocket: script execution has been blocked by a product or service."),z.uninstall())},G.onerror=function(){console.warn("LogRocket: script could not load. Check that you have a valid network connection."),z.uninstall()}});return z}}),"./node_modules/@babel/runtime/helpers/arrayLikeToArray.js":(function(o){function a(l,c){(c==null||c>l.length)&&(c=l.length);for(var u=0,d=new Array(c);u<c;u++)d[u]=l[u];return d}o.exports=a,o.exports.__esModule=!0,o.exports.default=o.exports}),"./node_modules/@babel/runtime/helpers/arrayWithoutHoles.js":(function(o,a,l){var c=l("./node_modules/@babel/runtime/helpers/arrayLikeToArray.js");function u(d){if(Array.isArray(d))return c(d)}o.exports=u,o.exports.__esModule=!0,o.exports.default=o.exports}),"./node_modules/@babel/runtime/helpers/classCallCheck.js":(function(o){function a(l,c){if(!(l instanceof c))throw new TypeError("Cannot call a class as a function")}o.exports=a,o.exports.__esModule=!0,o.exports.default=o.exports}),"./node_modules/@babel/runtime/helpers/createClass.js":(function(o,a,l){var c=l("./node_modules/@babel/runtime/helpers/toPropertyKey.js");function u(f,m){for(var v=0;v<m.length;v++){var g=m[v];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(f,c(g.key),g)}}function d(f,m,v){return m&&u(f.prototype,m),v&&u(f,v),Object.defineProperty(f,"prototype",{writable:!1}),f}o.exports=d,o.exports.__esModule=!0,o.exports.default=o.exports}),"./node_modules/@babel/runtime/helpers/defineProperty.js":(function(o,a,l){var c=l("./node_modules/@babel/runtime/helpers/toPropertyKey.js");function u(d,f,m){return f=c(f),f in d?Object.defineProperty(d,f,{value:m,enumerable:!0,configurable:!0,writable:!0}):d[f]=m,d}o.exports=u,o.exports.__esModule=!0,o.exports.default=o.exports}),"./node_modules/@babel/runtime/helpers/interopRequireDefault.js":(function(o){function a(l){return l&&l.__esModule?l:{default:l}}o.exports=a,o.exports.__esModule=!0,o.exports.default=o.exports}),"./node_modules/@babel/runtime/helpers/iterableToArray.js":(function(o){function a(l){if(typeof Symbol<"u"&&l[Symbol.iterator]!=null||l["@@iterator"]!=null)return Array.from(l)}o.exports=a,o.exports.__esModule=!0,o.exports.default=o.exports}),"./node_modules/@babel/runtime/helpers/nonIterableSpread.js":(function(o){function a(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}o.exports=a,o.exports.__esModule=!0,o.exports.default=o.exports}),"./node_modules/@babel/runtime/helpers/objectWithoutProperties.js":(function(o,a,l){var c=l("./node_modules/@babel/runtime/helpers/objectWithoutPropertiesLoose.js");function u(d,f){if(d==null)return{};var m=c(d,f),v,g;if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(d);for(g=0;g<y.length;g++)v=y[g],!(f.indexOf(v)>=0)&&Object.prototype.propertyIsEnumerable.call(d,v)&&(m[v]=d[v])}return m}o.exports=u,o.exports.__esModule=!0,o.exports.default=o.exports}),"./node_modules/@babel/runtime/helpers/objectWithoutPropertiesLoose.js":(function(o){function a(l,c){if(l==null)return{};var u={},d=Object.keys(l),f,m;for(m=0;m<d.length;m++)f=d[m],!(c.indexOf(f)>=0)&&(u[f]=l[f]);return u}o.exports=a,o.exports.__esModule=!0,o.exports.default=o.exports}),"./node_modules/@babel/runtime/helpers/toConsumableArray.js":(function(o,a,l){var c=l("./node_modules/@babel/runtime/helpers/arrayWithoutHoles.js"),u=l("./node_modules/@babel/runtime/helpers/iterableToArray.js"),d=l("./node_modules/@babel/runtime/helpers/unsupportedIterableToArray.js"),f=l("./node_modules/@babel/runtime/helpers/nonIterableSpread.js");function m(v){return c(v)||u(v)||d(v)||f()}o.exports=m,o.exports.__esModule=!0,o.exports.default=o.exports}),"./node_modules/@babel/runtime/helpers/toPrimitive.js":(function(o,a,l){var c=l("./node_modules/@babel/runtime/helpers/typeof.js").default;function u(d,f){if(c(d)!=="object"||d===null)return d;var m=d[Symbol.toPrimitive];if(m!==void 0){var v=m.call(d,f||"default");if(c(v)!=="object")return v;throw new TypeError("@@toPrimitive must return a primitive value.")}return(f==="string"?String:Number)(d)}o.exports=u,o.exports.__esModule=!0,o.exports.default=o.exports}),"./node_modules/@babel/runtime/helpers/toPropertyKey.js":(function(o,a,l){var c=l("./node_modules/@babel/runtime/helpers/typeof.js").default,u=l("./node_modules/@babel/runtime/helpers/toPrimitive.js");function d(f){var m=u(f,"string");return c(m)==="symbol"?m:String(m)}o.exports=d,o.exports.__esModule=!0,o.exports.default=o.exports}),"./node_modules/@babel/runtime/helpers/typeof.js":(function(o){function a(l){"@babel/helpers - typeof";return o.exports=a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},o.exports.__esModule=!0,o.exports.default=o.exports,a(l)}o.exports=a,o.exports.__esModule=!0,o.exports.default=o.exports}),"./node_modules/@babel/runtime/helpers/unsupportedIterableToArray.js":(function(o,a,l){var c=l("./node_modules/@babel/runtime/helpers/arrayLikeToArray.js");function u(d,f){if(d){if(typeof d=="string")return c(d,f);var m=Object.prototype.toString.call(d).slice(8,-1);if(m==="Object"&&d.constructor&&(m=d.constructor.name),m==="Map"||m==="Set")return Array.from(d);if(m==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(m))return c(d,f)}}o.exports=u,o.exports.__esModule=!0,o.exports.default=o.exports})},i={};function r(o){var a=i[o];if(a!==void 0)return a.exports;var l=i[o]={exports:{}};return t[o](l,l.exports,r),l.exports}(function(){r.g=(function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch(o){if(typeof window=="object")return window}})()})();var s={};return(function(){var o=s;/*!**********************************************!*\
  !*** ./packages/logrocket/src/module-npm.js ***!
  \**********************************************/var a=r("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var l=a(r("./packages/logrocket/src/setup.js")),c=(0,l.default)(),u=c;o.default=u})(),s=s.default,s})()})})(km)),km.exports}var IV=RV();const zse=Kw(IV);function io(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function nP(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.__proto__=e}/*!
 * GSAP 3.13.0
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var Tr={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},ou={duration:.5,overwrite:!1,delay:0},hS,Di,Nn,Br=1e8,Cn=1/Br,Lb=Math.PI*2,DV=Lb/4,PV=0,iP=Math.sqrt,OV=Math.cos,LV=Math.sin,Mi=function(e){return typeof e=="string"},Qn=function(e){return typeof e=="function"},fo=function(e){return typeof e=="number"},dS=function(e){return typeof e>"u"},ks=function(e){return typeof e=="object"},cr=function(e){return e!==!1},fS=function(){return typeof window<"u"},Ep=function(e){return Qn(e)||Mi(e)},rP=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},zi=Array.isArray,kb=/(?:-?\.?\d|\.)+/gi,sP=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,Hc=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,gy=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,oP=/[+-]=-?[.\d]+/,aP=/[^,'"\[\]\s]+/gi,kV=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,Bn,Cs,Ub,pS,Ir={},Zm={},lP,cP=function(e){return(Zm=au(e,Ir))&&gr},mS=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},pd=function(e,t){return!t&&console.warn(e)},uP=function(e,t){return e&&(Ir[e]=t)&&Zm&&(Zm[e]=t)||Ir},md=function(){return 0},UV={suppressEvents:!0,isStart:!0,kill:!1},Um={suppressEvents:!0,kill:!1},NV={suppressEvents:!0},gS={},Vo=[],Nb={},hP,Sr={},vy={},s1=30,Nm=[],vS="",_S=function(e){var t=e[0],i,r;if(ks(t)||Qn(t)||(e=[e]),!(i=(t._gsap||{}).harness)){for(r=Nm.length;r--&&!Nm[r].targetTest(t););i=Nm[r]}for(r=e.length;r--;)e[r]&&(e[r]._gsap||(e[r]._gsap=new kP(e[r],i)))||e.splice(r,1);return e},pl=function(e){return e._gsap||_S(zr(e))[0]._gsap},dP=function(e,t,i){return(i=e[t])&&Qn(i)?e[t]():dS(i)&&e.getAttribute&&e.getAttribute(t)||i},ur=function(e,t){return(e=e.split(",")).forEach(t)||e},ti=function(e){return Math.round(e*1e5)/1e5||0},li=function(e){return Math.round(e*1e7)/1e7||0},Kc=function(e,t){var i=t.charAt(0),r=parseFloat(t.substr(2));return e=parseFloat(e),i==="+"?e+r:i==="-"?e-r:i==="*"?e*r:e/r},FV=function(e,t){for(var i=t.length,r=0;e.indexOf(t[r])<0&&++r<i;);return r<i},eg=function(){var e=Vo.length,t=Vo.slice(0),i,r;for(Nb={},Vo.length=0,i=0;i<e;i++)r=t[i],r&&r._lazy&&(r.render(r._lazy[0],r._lazy[1],!0)._lazy=0)},yS=function(e){return!!(e._initted||e._startAt||e.add)},fP=function(e,t,i,r){Vo.length&&!Di&&eg(),e.render(t,i,!!(Di&&t<0&&yS(e))),Vo.length&&!Di&&eg()},pP=function(e){var t=parseFloat(e);return(t||t===0)&&(e+"").match(aP).length<2?t:Mi(e)?e.trim():e},mP=function(e){return e},Dr=function(e,t){for(var i in t)i in e||(e[i]=t[i]);return e},BV=function(e){return function(t,i){for(var r in i)r in t||r==="duration"&&e||r==="ease"||(t[r]=i[r])}},au=function(e,t){for(var i in t)e[i]=t[i];return e},o1=function n(e,t){for(var i in t)i!=="__proto__"&&i!=="constructor"&&i!=="prototype"&&(e[i]=ks(t[i])?n(e[i]||(e[i]={}),t[i]):t[i]);return e},tg=function(e,t){var i={},r;for(r in e)r in t||(i[r]=e[r]);return i},Xh=function(e){var t=e.parent||Bn,i=e.keyframes?BV(zi(e.keyframes)):Dr;if(cr(e.inherit))for(;t;)i(e,t.vars.defaults),t=t.parent||t._dp;return e},zV=function(e,t){for(var i=e.length,r=i===t.length;r&&i--&&e[i]===t[i];);return i<0},gP=function(e,t,i,r,s){var o=e[r],a;if(s)for(a=t[s];o&&o[s]>a;)o=o._prev;return o?(t._next=o._next,o._next=t):(t._next=e[i],e[i]=t),t._next?t._next._prev=t:e[r]=t,t._prev=o,t.parent=t._dp=e,t},uv=function(e,t,i,r){i===void 0&&(i="_first"),r===void 0&&(r="_last");var s=t._prev,o=t._next;s?s._next=o:e[i]===t&&(e[i]=o),o?o._prev=s:e[r]===t&&(e[r]=s),t._next=t._prev=t.parent=null},Ko=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},ml=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var i=e;i;)i._dirty=1,i=i.parent;return e},HV=function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},Fb=function(e,t,i,r){return e._startAt&&(Di?e._startAt.revert(Um):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,r))},GV=function n(e){return!e||e._ts&&n(e.parent)},a1=function(e){return e._repeat?lu(e._tTime,e=e.duration()+e._rDelay)*e:0},lu=function(e,t){var i=Math.floor(e=li(e/t));return e&&i===e?i-1:i},ng=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},hv=function(e){return e._end=li(e._start+(e._tDur/Math.abs(e._ts||e._rts||Cn)||0))},dv=function(e,t){var i=e._dp;return i&&i.smoothChildTiming&&e._ts&&(e._start=li(i._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),hv(e),i._dirty||ml(i,e)),e},vP=function(e,t){var i;if((t._time||!t._dur&&t._initted||t._start<e._time&&(t._dur||!t.add))&&(i=ng(e.rawTime(),t),(!t._dur||Jd(0,t.totalDuration(),i)-t._tTime>Cn)&&t.render(i,!0)),ml(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(i=e;i._dp;)i.rawTime()>=0&&i.totalTime(i._tTime),i=i._dp;e._zTime=-Cn}},Rs=function(e,t,i,r){return t.parent&&Ko(t),t._start=li((fo(i)?i:i||e!==Bn?Nr(e,i,t):e._time)+t._delay),t._end=li(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),gP(e,t,"_first","_last",e._sort?"_start":0),Bb(t)||(e._recent=t),r||vP(e,t),e._ts<0&&dv(e,e._tTime),e},_P=function(e,t){return(Ir.ScrollTrigger||mS("scrollTrigger",t))&&Ir.ScrollTrigger.create(t,e)},yP=function(e,t,i,r,s){if(wS(e,t,s),!e._initted)return 1;if(!i&&e._pt&&!Di&&(e._dur&&e.vars.lazy!==!1||!e._dur&&e.vars.lazy)&&hP!==xr.frame)return Vo.push(e),e._lazy=[s,r],1},VV=function n(e){var t=e.parent;return t&&t._ts&&t._initted&&!t._lock&&(t.rawTime()<0||n(t))},Bb=function(e){var t=e.data;return t==="isFromStart"||t==="isStart"},WV=function(e,t,i,r){var s=e.ratio,o=t<0||!t&&(!e._start&&VV(e)&&!(!e._initted&&Bb(e))||(e._ts<0||e._dp._ts<0)&&!Bb(e))?0:1,a=e._rDelay,l=0,c,u,d;if(a&&e._repeat&&(l=Jd(0,e._tDur,t),u=lu(l,a),e._yoyo&&u&1&&(o=1-o),u!==lu(e._tTime,a)&&(s=1-o,e.vars.repeatRefresh&&e._initted&&e.invalidate())),o!==s||Di||r||e._zTime===Cn||!t&&e._zTime){if(!e._initted&&yP(e,t,r,i,l))return;for(d=e._zTime,e._zTime=t||(i?Cn:0),i||(i=t&&!d),e.ratio=o,e._from&&(o=1-o),e._time=0,e._tTime=l,c=e._pt;c;)c.r(o,c.d),c=c._next;t<0&&Fb(e,t,i,!0),e._onUpdate&&!i&&Ar(e,"onUpdate"),l&&e._repeat&&!i&&e.parent&&Ar(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===o&&(o&&Ko(e,1),!i&&!Di&&(Ar(e,o?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)},jV=function(e,t,i){var r;if(i>t)for(r=e._first;r&&r._start<=i;){if(r.data==="isPause"&&r._start>t)return r;r=r._next}else for(r=e._last;r&&r._start>=i;){if(r.data==="isPause"&&r._start<t)return r;r=r._prev}},cu=function(e,t,i,r){var s=e._repeat,o=li(t)||0,a=e._tTime/e._tDur;return a&&!r&&(e._time*=o/e._dur),e._dur=o,e._tDur=s?s<0?1e10:li(o*(s+1)+e._rDelay*s):o,a>0&&!r&&dv(e,e._tTime=e._tDur*a),e.parent&&hv(e),i||ml(e.parent,e),e},l1=function(e){return e instanceof $i?ml(e):cu(e,e._dur)},qV={_start:0,endTime:md,totalDuration:md},Nr=function n(e,t,i){var r=e.labels,s=e._recent||qV,o=e.duration()>=Br?s.endTime(!1):e._dur,a,l,c;return Mi(t)&&(isNaN(t)||t in r)?(l=t.charAt(0),c=t.substr(-1)==="%",a=t.indexOf("="),l==="<"||l===">"?(a>=0&&(t=t.replace(/=/,"")),(l==="<"?s._start:s.endTime(s._repeat>=0))+(parseFloat(t.substr(1))||0)*(c?(a<0?s:i).totalDuration()/100:1)):a<0?(t in r||(r[t]=o),r[t]):(l=parseFloat(t.charAt(a-1)+t.substr(a+1)),c&&i&&(l=l/100*(zi(i)?i[0]:i).totalDuration()),a>1?n(e,t.substr(0,a-1),i)+l:o+l)):t==null?o:+t},Yh=function(e,t,i){var r=fo(t[1]),s=(r?2:1)+(e<2?0:1),o=t[s],a,l;if(r&&(o.duration=t[1]),o.parent=i,e){for(a=o,l=i;l&&!("immediateRender"in a);)a=l.vars.defaults||{},l=cr(l.vars.inherit)&&l.parent;o.immediateRender=cr(a.immediateRender),e<2?o.runBackwards=1:o.startAt=t[s-1]}return new ai(t[0],o,t[s+1])},ta=function(e,t){return e||e===0?t(e):t},Jd=function(e,t,i){return i<e?e:i>t?t:i},Ni=function(e,t){return!Mi(e)||!(t=kV.exec(e))?"":t[1]},XV=function(e,t,i){return ta(i,function(r){return Jd(e,t,r)})},zb=[].slice,bP=function(e,t){return e&&ks(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&ks(e[0]))&&!e.nodeType&&e!==Cs},YV=function(e,t,i){return i===void 0&&(i=[]),e.forEach(function(r){var s;return Mi(r)&&!t||bP(r,1)?(s=i).push.apply(s,zr(r)):i.push(r)})||i},zr=function(e,t,i){return Nn&&!t&&Nn.selector?Nn.selector(e):Mi(e)&&!i&&(Ub||!uu())?zb.call((t||pS).querySelectorAll(e),0):zi(e)?YV(e,i):bP(e)?zb.call(e,0):e?[e]:[]},Hb=function(e){return e=zr(e)[0]||pd("Invalid scope")||{},function(t){var i=e.current||e.nativeElement||e;return zr(t,i.querySelectorAll?i:i===e?pd("Invalid scope")||pS.createElement("div"):e)}},wP=function(e){return e.sort(function(){return .5-Math.random()})},SP=function(e){if(Qn(e))return e;var t=ks(e)?e:{each:e},i=gl(t.ease),r=t.from||0,s=parseFloat(t.base)||0,o={},a=r>0&&r<1,l=isNaN(r)||a,c=t.axis,u=r,d=r;return Mi(r)?u=d={center:.5,edges:.5,end:1}[r]||0:!a&&l&&(u=r[0],d=r[1]),function(f,m,v){var g=(v||t).length,y=o[g],b,S,x,A,E,M,I,R,C;if(!y){if(C=t.grid==="auto"?0:(t.grid||[1,Br])[1],!C){for(I=-Br;I<(I=v[C++].getBoundingClientRect().left)&&C<g;);C<g&&C--}for(y=o[g]=[],b=l?Math.min(C,g)*u-.5:r%C,S=C===Br?0:l?g*d/C-.5:r/C|0,I=0,R=Br,M=0;M<g;M++)x=M%C-b,A=S-(M/C|0),y[M]=E=c?Math.abs(c==="y"?A:x):iP(x*x+A*A),E>I&&(I=E),E<R&&(R=E);r==="random"&&wP(y),y.max=I-R,y.min=R,y.v=g=(parseFloat(t.amount)||parseFloat(t.each)*(C>g?g-1:c?c==="y"?g/C:C:Math.max(C,g/C))||0)*(r==="edges"?-1:1),y.b=g<0?s-g:s,y.u=Ni(t.amount||t.each)||0,i=i&&g<0?PP(i):i}return g=(y[f]-y.min)/y.max||0,li(y.b+(i?i(g):g)*y.v)+y.u}},Gb=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(i){var r=li(Math.round(parseFloat(i)/e)*e*t);return(r-r%1)/t+(fo(i)?0:Ni(i))}},xP=function(e,t){var i=zi(e),r,s;return!i&&ks(e)&&(r=i=e.radius||Br,e.values?(e=zr(e.values),(s=!fo(e[0]))&&(r*=r)):e=Gb(e.increment)),ta(t,i?Qn(e)?function(o){return s=e(o),Math.abs(s-o)<=r?s:o}:function(o){for(var a=parseFloat(s?o.x:o),l=parseFloat(s?o.y:0),c=Br,u=0,d=e.length,f,m;d--;)s?(f=e[d].x-a,m=e[d].y-l,f=f*f+m*m):f=Math.abs(e[d]-a),f<c&&(c=f,u=d);return u=!r||c<=r?e[u]:o,s||u===o||fo(o)?u:u+Ni(o)}:Gb(e))},EP=function(e,t,i,r){return ta(zi(e)?!t:i===!0?!!(i=0):!r,function(){return zi(e)?e[~~(Math.random()*e.length)]:(i=i||1e-5)&&(r=i<1?Math.pow(10,(i+"").length-2):1)&&Math.floor(Math.round((e-i/2+Math.random()*(t-e+i*.99))/i)*i*r)/r})},KV=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return function(r){return t.reduce(function(s,o){return o(s)},r)}},$V=function(e,t){return function(i){return e(parseFloat(i))+(t||Ni(i))}},JV=function(e,t,i){return MP(e,t,0,1,i)},AP=function(e,t,i){return ta(i,function(r){return e[~~t(r)]})},QV=function n(e,t,i){var r=t-e;return zi(e)?AP(e,n(0,e.length),t):ta(i,function(s){return(r+(s-e)%r)%r+e})},ZV=function n(e,t,i){var r=t-e,s=r*2;return zi(e)?AP(e,n(0,e.length-1),t):ta(i,function(o){return o=(s+(o-e)%s)%s||0,e+(o>r?s-o:o)})},gd=function(e){for(var t=0,i="",r,s,o,a;~(r=e.indexOf("random(",t));)o=e.indexOf(")",r),a=e.charAt(r+7)==="[",s=e.substr(r+7,o-r-7).match(a?aP:kb),i+=e.substr(t,r-t)+EP(a?s:+s[0],a?0:+s[1],+s[2]||1e-5),t=o+1;return i+e.substr(t,e.length-t)},MP=function(e,t,i,r,s){var o=t-e,a=r-i;return ta(s,function(l){return i+((l-e)/o*a||0)})},eW=function n(e,t,i,r){var s=isNaN(e+t)?0:function(m){return(1-m)*e+m*t};if(!s){var o=Mi(e),a={},l,c,u,d,f;if(i===!0&&(r=1)&&(i=null),o)e={p:e},t={p:t};else if(zi(e)&&!zi(t)){for(u=[],d=e.length,f=d-2,c=1;c<d;c++)u.push(n(e[c-1],e[c]));d--,s=function(v){v*=d;var g=Math.min(f,~~v);return u[g](v-g)},i=t}else r||(e=au(zi(e)?[]:{},e));if(!u){for(l in t)bS.call(a,e,l,"get",t[l]);s=function(v){return ES(v,a)||(o?e.p:e)}}}return ta(i,s)},c1=function(e,t,i){var r=e.labels,s=Br,o,a,l;for(o in r)a=r[o]-t,a<0==!!i&&a&&s>(a=Math.abs(a))&&(l=o,s=a);return l},Ar=function(e,t,i){var r=e.vars,s=r[t],o=Nn,a=e._ctx,l,c,u;if(s)return l=r[t+"Params"],c=r.callbackScope||e,i&&Vo.length&&eg(),a&&(Nn=a),u=l?s.apply(c,l):s.call(c),Nn=o,u},Bh=function(e){return Ko(e),e.scrollTrigger&&e.scrollTrigger.kill(!!Di),e.progress()<1&&Ar(e,"onInterrupt"),e},Gc,TP=[],CP=function(e){if(e)if(e=!e.name&&e.default||e,fS()||e.headless){var t=e.name,i=Qn(e),r=t&&!i&&e.init?function(){this._props=[]}:e,s={init:md,render:ES,add:bS,kill:gW,modifier:mW,rawVars:0},o={targetTest:0,get:0,getSetter:xS,aliases:{},register:0};if(uu(),e!==r){if(Sr[t])return;Dr(r,Dr(tg(e,s),o)),au(r.prototype,au(s,tg(e,o))),Sr[r.prop=t]=r,e.targetTest&&(Nm.push(r),gS[t]=1),t=(t==="css"?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}uP(t,r),e.register&&e.register(gr,r,hr)}else TP.push(e)},Tn=255,zh={aqua:[0,Tn,Tn],lime:[0,Tn,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Tn],navy:[0,0,128],white:[Tn,Tn,Tn],olive:[128,128,0],yellow:[Tn,Tn,0],orange:[Tn,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Tn,0,0],pink:[Tn,192,203],cyan:[0,Tn,Tn],transparent:[Tn,Tn,Tn,0]},_y=function(e,t,i){return e+=e<0?1:e>1?-1:0,(e*6<1?t+(i-t)*e*6:e<.5?i:e*3<2?t+(i-t)*(2/3-e)*6:t)*Tn+.5|0},RP=function(e,t,i){var r=e?fo(e)?[e>>16,e>>8&Tn,e&Tn]:0:zh.black,s,o,a,l,c,u,d,f,m,v;if(!r){if(e.substr(-1)===","&&(e=e.substr(0,e.length-1)),zh[e])r=zh[e];else if(e.charAt(0)==="#"){if(e.length<6&&(s=e.charAt(1),o=e.charAt(2),a=e.charAt(3),e="#"+s+s+o+o+a+a+(e.length===5?e.charAt(4)+e.charAt(4):"")),e.length===9)return r=parseInt(e.substr(1,6),16),[r>>16,r>>8&Tn,r&Tn,parseInt(e.substr(7),16)/255];e=parseInt(e.substr(1),16),r=[e>>16,e>>8&Tn,e&Tn]}else if(e.substr(0,3)==="hsl"){if(r=v=e.match(kb),!t)l=+r[0]%360/360,c=+r[1]/100,u=+r[2]/100,o=u<=.5?u*(c+1):u+c-u*c,s=u*2-o,r.length>3&&(r[3]*=1),r[0]=_y(l+1/3,s,o),r[1]=_y(l,s,o),r[2]=_y(l-1/3,s,o);else if(~e.indexOf("="))return r=e.match(sP),i&&r.length<4&&(r[3]=1),r}else r=e.match(kb)||zh.transparent;r=r.map(Number)}return t&&!v&&(s=r[0]/Tn,o=r[1]/Tn,a=r[2]/Tn,d=Math.max(s,o,a),f=Math.min(s,o,a),u=(d+f)/2,d===f?l=c=0:(m=d-f,c=u>.5?m/(2-d-f):m/(d+f),l=d===s?(o-a)/m+(o<a?6:0):d===o?(a-s)/m+2:(s-o)/m+4,l*=60),r[0]=~~(l+.5),r[1]=~~(c*100+.5),r[2]=~~(u*100+.5)),i&&r.length<4&&(r[3]=1),r},IP=function(e){var t=[],i=[],r=-1;return e.split(Wo).forEach(function(s){var o=s.match(Hc)||[];t.push.apply(t,o),i.push(r+=o.length+1)}),t.c=i,t},u1=function(e,t,i){var r="",s=(e+r).match(Wo),o=t?"hsla(":"rgba(",a=0,l,c,u,d;if(!s)return e;if(s=s.map(function(f){return(f=RP(f,t,1))&&o+(t?f[0]+","+f[1]+"%,"+f[2]+"%,"+f[3]:f.join(","))+")"}),i&&(u=IP(e),l=i.c,l.join(r)!==u.c.join(r)))for(c=e.replace(Wo,"1").split(Hc),d=c.length-1;a<d;a++)r+=c[a]+(~l.indexOf(a)?s.shift()||o+"0,0,0,0)":(u.length?u:s.length?s:i).shift());if(!c)for(c=e.split(Wo),d=c.length-1;a<d;a++)r+=c[a]+s[a];return r+c[d]},Wo=(function(){var n="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",e;for(e in zh)n+="|"+e+"\\b";return new RegExp(n+")","gi")})(),tW=/hsl[a]?\(/,DP=function(e){var t=e.join(" "),i;if(Wo.lastIndex=0,Wo.test(t))return i=tW.test(t),e[1]=u1(e[1],i),e[0]=u1(e[0],i,IP(e[1])),!0},vd,xr=(function(){var n=Date.now,e=500,t=33,i=n(),r=i,s=1e3/240,o=s,a=[],l,c,u,d,f,m,v=function g(y){var b=n()-r,S=y===!0,x,A,E,M;if((b>e||b<0)&&(i+=b-t),r+=b,E=r-i,x=E-o,(x>0||S)&&(M=++d.frame,f=E-d.time*1e3,d.time=E=E/1e3,o+=x+(x>=s?4:s-x),A=1),S||(l=c(g)),A)for(m=0;m<a.length;m++)a[m](E,f,M,y)};return d={time:0,frame:0,tick:function(){v(!0)},deltaRatio:function(y){return f/(1e3/(y||60))},wake:function(){lP&&(!Ub&&fS()&&(Cs=Ub=window,pS=Cs.document||{},Ir.gsap=gr,(Cs.gsapVersions||(Cs.gsapVersions=[])).push(gr.version),cP(Zm||Cs.GreenSockGlobals||!Cs.gsap&&Cs||{}),TP.forEach(CP)),u=typeof requestAnimationFrame<"u"&&requestAnimationFrame,l&&d.sleep(),c=u||function(y){return setTimeout(y,o-d.time*1e3+1|0)},vd=1,v(2))},sleep:function(){(u?cancelAnimationFrame:clearTimeout)(l),vd=0,c=md},lagSmoothing:function(y,b){e=y||1/0,t=Math.min(b||33,e)},fps:function(y){s=1e3/(y||240),o=d.time*1e3+s},add:function(y,b,S){var x=b?function(A,E,M,I){y(A,E,M,I),d.remove(x)}:y;return d.remove(y),a[S?"unshift":"push"](x),uu(),x},remove:function(y,b){~(b=a.indexOf(y))&&a.splice(b,1)&&m>=b&&m--},_listeners:a},d})(),uu=function(){return!vd&&xr.wake()},Qt={},nW=/^[\d.\-M][\d.\-,\s]/,iW=/["']/g,rW=function(e){for(var t={},i=e.substr(1,e.length-3).split(":"),r=i[0],s=1,o=i.length,a,l,c;s<o;s++)l=i[s],a=s!==o-1?l.lastIndexOf(","):l.length,c=l.substr(0,a),t[r]=isNaN(c)?c.replace(iW,"").trim():+c,r=l.substr(a+1).trim();return t},sW=function(e){var t=e.indexOf("(")+1,i=e.indexOf(")"),r=e.indexOf("(",t);return e.substring(t,~r&&r<i?e.indexOf(")",i+1):i)},oW=function(e){var t=(e+"").split("("),i=Qt[t[0]];return i&&t.length>1&&i.config?i.config.apply(null,~e.indexOf("{")?[rW(t[1])]:sW(e).split(",").map(pP)):Qt._CE&&nW.test(e)?Qt._CE("",e):i},PP=function(e){return function(t){return 1-e(1-t)}},OP=function n(e,t){for(var i=e._first,r;i;)i instanceof $i?n(i,t):i.vars.yoyoEase&&(!i._yoyo||!i._repeat)&&i._yoyo!==t&&(i.timeline?n(i.timeline,t):(r=i._ease,i._ease=i._yEase,i._yEase=r,i._yoyo=t)),i=i._next},gl=function(e,t){return e&&(Qn(e)?e:Qt[e]||oW(e))||t},Fl=function(e,t,i,r){i===void 0&&(i=function(l){return 1-t(1-l)}),r===void 0&&(r=function(l){return l<.5?t(l*2)/2:1-t((1-l)*2)/2});var s={easeIn:t,easeOut:i,easeInOut:r},o;return ur(e,function(a){Qt[a]=Ir[a]=s,Qt[o=a.toLowerCase()]=i;for(var l in s)Qt[o+(l==="easeIn"?".in":l==="easeOut"?".out":".inOut")]=Qt[a+"."+l]=s[l]}),s},LP=function(e){return function(t){return t<.5?(1-e(1-t*2))/2:.5+e((t-.5)*2)/2}},yy=function n(e,t,i){var r=t>=1?t:1,s=(i||(e?.3:.45))/(t<1?t:1),o=s/Lb*(Math.asin(1/r)||0),a=function(u){return u===1?1:r*Math.pow(2,-10*u)*LV((u-o)*s)+1},l=e==="out"?a:e==="in"?function(c){return 1-a(1-c)}:LP(a);return s=Lb/s,l.config=function(c,u){return n(e,c,u)},l},by=function n(e,t){t===void 0&&(t=1.70158);var i=function(o){return o?--o*o*((t+1)*o+t)+1:0},r=e==="out"?i:e==="in"?function(s){return 1-i(1-s)}:LP(i);return r.config=function(s){return n(e,s)},r};ur("Linear,Quad,Cubic,Quart,Quint,Strong",function(n,e){var t=e<5?e+1:e;Fl(n+",Power"+(t-1),e?function(i){return Math.pow(i,t)}:function(i){return i},function(i){return 1-Math.pow(1-i,t)},function(i){return i<.5?Math.pow(i*2,t)/2:1-Math.pow((1-i)*2,t)/2})});Qt.Linear.easeNone=Qt.none=Qt.Linear.easeIn;Fl("Elastic",yy("in"),yy("out"),yy());(function(n,e){var t=1/e,i=2*t,r=2.5*t,s=function(a){return a<t?n*a*a:a<i?n*Math.pow(a-1.5/e,2)+.75:a<r?n*(a-=2.25/e)*a+.9375:n*Math.pow(a-2.625/e,2)+.984375};Fl("Bounce",function(o){return 1-s(1-o)},s)})(7.5625,2.75);Fl("Expo",function(n){return Math.pow(2,10*(n-1))*n+n*n*n*n*n*n*(1-n)});Fl("Circ",function(n){return-(iP(1-n*n)-1)});Fl("Sine",function(n){return n===1?1:-OV(n*DV)+1});Fl("Back",by("in"),by("out"),by());Qt.SteppedEase=Qt.steps=Ir.SteppedEase={config:function(e,t){e===void 0&&(e=1);var i=1/e,r=e+(t?0:1),s=t?1:0,o=1-Cn;return function(a){return((r*Jd(0,o,a)|0)+s)*i}}};ou.ease=Qt["quad.out"];ur("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(n){return vS+=n+","+n+"Params,"});var kP=function(e,t){this.id=PV++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:dP,this.set=t?t.getSetter:xS},_d=(function(){function n(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,cu(this,+t.duration,1,1),this.data=t.data,Nn&&(this._ctx=Nn,Nn.data.push(this)),vd||xr.wake()}var e=n.prototype;return e.delay=function(i){return i||i===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+i-this._delay),this._delay=i,this):this._delay},e.duration=function(i){return arguments.length?this.totalDuration(this._repeat>0?i+(i+this._rDelay)*this._repeat:i):this.totalDuration()&&this._dur},e.totalDuration=function(i){return arguments.length?(this._dirty=0,cu(this,this._repeat<0?i:(i-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(i,r){if(uu(),!arguments.length)return this._tTime;var s=this._dp;if(s&&s.smoothChildTiming&&this._ts){for(dv(this,i),!s._dp||s.parent||vP(s,this);s&&s.parent;)s.parent._time!==s._start+(s._ts>=0?s._tTime/s._ts:(s.totalDuration()-s._tTime)/-s._ts)&&s.totalTime(s._tTime,!0),s=s.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&i<this._tDur||this._ts<0&&i>0||!this._tDur&&!i)&&Rs(this._dp,this,this._start-this._delay)}return(this._tTime!==i||!this._dur&&!r||this._initted&&Math.abs(this._zTime)===Cn||!i&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=i),fP(this,i,r)),this},e.time=function(i,r){return arguments.length?this.totalTime(Math.min(this.totalDuration(),i+a1(this))%(this._dur+this._rDelay)||(i?this._dur:0),r):this._time},e.totalProgress=function(i,r){return arguments.length?this.totalTime(this.totalDuration()*i,r):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},e.progress=function(i,r){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-i:i)+a1(this),r):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},e.iteration=function(i,r){var s=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(i-1)*s,r):this._repeat?lu(this._tTime,s)+1:1},e.timeScale=function(i,r){if(!arguments.length)return this._rts===-Cn?0:this._rts;if(this._rts===i)return this;var s=this.parent&&this._ts?ng(this.parent._time,this):this._tTime;return this._rts=+i||0,this._ts=this._ps||i===-Cn?0:this._rts,this.totalTime(Jd(-Math.abs(this._delay),this.totalDuration(),s),r!==!1),hv(this),HV(this)},e.paused=function(i){return arguments.length?(this._ps!==i&&(this._ps=i,i?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(uu(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==Cn&&(this._tTime-=Cn)))),this):this._ps},e.startTime=function(i){if(arguments.length){this._start=i;var r=this.parent||this._dp;return r&&(r._sort||!this.parent)&&Rs(r,this,i-this._delay),this}return this._start},e.endTime=function(i){return this._start+(cr(i)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(i){var r=this.parent||this._dp;return r?i&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?ng(r.rawTime(i),this):this._tTime:this._tTime},e.revert=function(i){i===void 0&&(i=NV);var r=Di;return Di=i,yS(this)&&(this.timeline&&this.timeline.revert(i),this.totalTime(-.01,i.suppressEvents)),this.data!=="nested"&&i.kill!==!1&&this.kill(),Di=r,this},e.globalTime=function(i){for(var r=this,s=arguments.length?i:r.rawTime();r;)s=r._start+s/(Math.abs(r._ts)||1),r=r._dp;return!this.parent&&this._sat?this._sat.globalTime(i):s},e.repeat=function(i){return arguments.length?(this._repeat=i===1/0?-2:i,l1(this)):this._repeat===-2?1/0:this._repeat},e.repeatDelay=function(i){if(arguments.length){var r=this._time;return this._rDelay=i,l1(this),r?this.time(r):this}return this._rDelay},e.yoyo=function(i){return arguments.length?(this._yoyo=i,this):this._yoyo},e.seek=function(i,r){return this.totalTime(Nr(this,i),cr(r))},e.restart=function(i,r){return this.play().totalTime(i?-this._delay:0,cr(r)),this._dur||(this._zTime=-Cn),this},e.play=function(i,r){return i!=null&&this.seek(i,r),this.reversed(!1).paused(!1)},e.reverse=function(i,r){return i!=null&&this.seek(i||this.totalDuration(),r),this.reversed(!0).paused(!1)},e.pause=function(i,r){return i!=null&&this.seek(i,r),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(i){return arguments.length?(!!i!==this.reversed()&&this.timeScale(-this._rts||(i?-Cn:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-Cn,this},e.isActive=function(){var i=this.parent||this._dp,r=this._start,s;return!!(!i||this._ts&&this._initted&&i.isActive()&&(s=i.rawTime(!0))>=r&&s<this.endTime(!0)-Cn)},e.eventCallback=function(i,r,s){var o=this.vars;return arguments.length>1?(r?(o[i]=r,s&&(o[i+"Params"]=s),i==="onUpdate"&&(this._onUpdate=r)):delete o[i],this):o[i]},e.then=function(i){var r=this;return new Promise(function(s){var o=Qn(i)?i:mP,a=function(){var c=r.then;r.then=null,Qn(o)&&(o=o(r))&&(o.then||o===r)&&(r.then=c),s(o),r.then=c};r._initted&&r.totalProgress()===1&&r._ts>=0||!r._tTime&&r._ts<0?a():r._prom=a})},e.kill=function(){Bh(this)},n})();Dr(_d.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-Cn,_prom:0,_ps:!1,_rts:1});var $i=(function(n){nP(e,n);function e(i,r){var s;return i===void 0&&(i={}),s=n.call(this,i)||this,s.labels={},s.smoothChildTiming=!!i.smoothChildTiming,s.autoRemoveChildren=!!i.autoRemoveChildren,s._sort=cr(i.sortChildren),Bn&&Rs(i.parent||Bn,io(s),r),i.reversed&&s.reverse(),i.paused&&s.paused(!0),i.scrollTrigger&&_P(io(s),i.scrollTrigger),s}var t=e.prototype;return t.to=function(r,s,o){return Yh(0,arguments,this),this},t.from=function(r,s,o){return Yh(1,arguments,this),this},t.fromTo=function(r,s,o,a){return Yh(2,arguments,this),this},t.set=function(r,s,o){return s.duration=0,s.parent=this,Xh(s).repeatDelay||(s.repeat=0),s.immediateRender=!!s.immediateRender,new ai(r,s,Nr(this,o),1),this},t.call=function(r,s,o){return Rs(this,ai.delayedCall(0,r,s),o)},t.staggerTo=function(r,s,o,a,l,c,u){return o.duration=s,o.stagger=o.stagger||a,o.onComplete=c,o.onCompleteParams=u,o.parent=this,new ai(r,o,Nr(this,l)),this},t.staggerFrom=function(r,s,o,a,l,c,u){return o.runBackwards=1,Xh(o).immediateRender=cr(o.immediateRender),this.staggerTo(r,s,o,a,l,c,u)},t.staggerFromTo=function(r,s,o,a,l,c,u,d){return a.startAt=o,Xh(a).immediateRender=cr(a.immediateRender),this.staggerTo(r,s,a,l,c,u,d)},t.render=function(r,s,o){var a=this._time,l=this._dirty?this.totalDuration():this._tDur,c=this._dur,u=r<=0?0:li(r),d=this._zTime<0!=r<0&&(this._initted||!c),f,m,v,g,y,b,S,x,A,E,M,I;if(this!==Bn&&u>l&&r>=0&&(u=l),u!==this._tTime||o||d){if(a!==this._time&&c&&(u+=this._time-a,r+=this._time-a),f=u,A=this._start,x=this._ts,b=!x,d&&(c||(a=this._zTime),(r||!s)&&(this._zTime=r)),this._repeat){if(M=this._yoyo,y=c+this._rDelay,this._repeat<-1&&r<0)return this.totalTime(y*100+r,s,o);if(f=li(u%y),u===l?(g=this._repeat,f=c):(E=li(u/y),g=~~E,g&&g===E&&(f=c,g--),f>c&&(f=c)),E=lu(this._tTime,y),!a&&this._tTime&&E!==g&&this._tTime-E*y-this._dur<=0&&(E=g),M&&g&1&&(f=c-f,I=1),g!==E&&!this._lock){var R=M&&E&1,C=R===(M&&g&1);if(g<E&&(R=!R),a=R?0:u%c?c:u,this._lock=1,this.render(a||(I?0:li(g*y)),s,!c)._lock=0,this._tTime=u,!s&&this.parent&&Ar(this,"onRepeat"),this.vars.repeatRefresh&&!I&&(this.invalidate()._lock=1),a&&a!==this._time||b!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(c=this._dur,l=this._tDur,C&&(this._lock=2,a=R?c:-1e-4,this.render(a,!0),this.vars.repeatRefresh&&!I&&this.invalidate()),this._lock=0,!this._ts&&!b)return this;OP(this,I)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(S=jV(this,li(a),li(f)),S&&(u-=f-(f=S._start))),this._tTime=u,this._time=f,this._act=!x,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=r,a=0),!a&&u&&!s&&!E&&(Ar(this,"onStart"),this._tTime!==u))return this;if(f>=a&&r>=0)for(m=this._first;m;){if(v=m._next,(m._act||f>=m._start)&&m._ts&&S!==m){if(m.parent!==this)return this.render(r,s,o);if(m.render(m._ts>0?(f-m._start)*m._ts:(m._dirty?m.totalDuration():m._tDur)+(f-m._start)*m._ts,s,o),f!==this._time||!this._ts&&!b){S=0,v&&(u+=this._zTime=-Cn);break}}m=v}else{m=this._last;for(var D=r<0?r:f;m;){if(v=m._prev,(m._act||D<=m._end)&&m._ts&&S!==m){if(m.parent!==this)return this.render(r,s,o);if(m.render(m._ts>0?(D-m._start)*m._ts:(m._dirty?m.totalDuration():m._tDur)+(D-m._start)*m._ts,s,o||Di&&yS(m)),f!==this._time||!this._ts&&!b){S=0,v&&(u+=this._zTime=D?-Cn:Cn);break}}m=v}}if(S&&!s&&(this.pause(),S.render(f>=a?0:-Cn)._zTime=f>=a?1:-1,this._ts))return this._start=A,hv(this),this.render(r,s,o);this._onUpdate&&!s&&Ar(this,"onUpdate",!0),(u===l&&this._tTime>=this.totalDuration()||!u&&a)&&(A===this._start||Math.abs(x)!==Math.abs(this._ts))&&(this._lock||((r||!c)&&(u===l&&this._ts>0||!u&&this._ts<0)&&Ko(this,1),!s&&!(r<0&&!a)&&(u||a||!l)&&(Ar(this,u===l&&r>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(u<l&&this.timeScale()>0)&&this._prom())))}return this},t.add=function(r,s){var o=this;if(fo(s)||(s=Nr(this,s,r)),!(r instanceof _d)){if(zi(r))return r.forEach(function(a){return o.add(a,s)}),this;if(Mi(r))return this.addLabel(r,s);if(Qn(r))r=ai.delayedCall(0,r);else return this}return this!==r?Rs(this,r,s):this},t.getChildren=function(r,s,o,a){r===void 0&&(r=!0),s===void 0&&(s=!0),o===void 0&&(o=!0),a===void 0&&(a=-Br);for(var l=[],c=this._first;c;)c._start>=a&&(c instanceof ai?s&&l.push(c):(o&&l.push(c),r&&l.push.apply(l,c.getChildren(!0,s,o)))),c=c._next;return l},t.getById=function(r){for(var s=this.getChildren(1,1,1),o=s.length;o--;)if(s[o].vars.id===r)return s[o]},t.remove=function(r){return Mi(r)?this.removeLabel(r):Qn(r)?this.killTweensOf(r):(r.parent===this&&uv(this,r),r===this._recent&&(this._recent=this._last),ml(this))},t.totalTime=function(r,s){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=li(xr.time-(this._ts>0?r/this._ts:(this.totalDuration()-r)/-this._ts))),n.prototype.totalTime.call(this,r,s),this._forcing=0,this):this._tTime},t.addLabel=function(r,s){return this.labels[r]=Nr(this,s),this},t.removeLabel=function(r){return delete this.labels[r],this},t.addPause=function(r,s,o){var a=ai.delayedCall(0,s||md,o);return a.data="isPause",this._hasPause=1,Rs(this,a,Nr(this,r))},t.removePause=function(r){var s=this._first;for(r=Nr(this,r);s;)s._start===r&&s.data==="isPause"&&Ko(s),s=s._next},t.killTweensOf=function(r,s,o){for(var a=this.getTweensOf(r,o),l=a.length;l--;)Fo!==a[l]&&a[l].kill(r,s);return this},t.getTweensOf=function(r,s){for(var o=[],a=zr(r),l=this._first,c=fo(s),u;l;)l instanceof ai?FV(l._targets,a)&&(c?(!Fo||l._initted&&l._ts)&&l.globalTime(0)<=s&&l.globalTime(l.totalDuration())>s:!s||l.isActive())&&o.push(l):(u=l.getTweensOf(a,s)).length&&o.push.apply(o,u),l=l._next;return o},t.tweenTo=function(r,s){s=s||{};var o=this,a=Nr(o,r),l=s,c=l.startAt,u=l.onStart,d=l.onStartParams,f=l.immediateRender,m,v=ai.to(o,Dr({ease:s.ease||"none",lazy:!1,immediateRender:!1,time:a,overwrite:"auto",duration:s.duration||Math.abs((a-(c&&"time"in c?c.time:o._time))/o.timeScale())||Cn,onStart:function(){if(o.pause(),!m){var y=s.duration||Math.abs((a-(c&&"time"in c?c.time:o._time))/o.timeScale());v._dur!==y&&cu(v,y,0,1).render(v._time,!0,!0),m=1}u&&u.apply(v,d||[])}},s));return f?v.render(0):v},t.tweenFromTo=function(r,s,o){return this.tweenTo(s,Dr({startAt:{time:Nr(this,r)}},o))},t.recent=function(){return this._recent},t.nextLabel=function(r){return r===void 0&&(r=this._time),c1(this,Nr(this,r))},t.previousLabel=function(r){return r===void 0&&(r=this._time),c1(this,Nr(this,r),1)},t.currentLabel=function(r){return arguments.length?this.seek(r,!0):this.previousLabel(this._time+Cn)},t.shiftChildren=function(r,s,o){o===void 0&&(o=0);for(var a=this._first,l=this.labels,c;a;)a._start>=o&&(a._start+=r,a._end+=r),a=a._next;if(s)for(c in l)l[c]>=o&&(l[c]+=r);return ml(this)},t.invalidate=function(r){var s=this._first;for(this._lock=0;s;)s.invalidate(r),s=s._next;return n.prototype.invalidate.call(this,r)},t.clear=function(r){r===void 0&&(r=!0);for(var s=this._first,o;s;)o=s._next,this.remove(s),s=o;return this._dp&&(this._time=this._tTime=this._pTime=0),r&&(this.labels={}),ml(this)},t.totalDuration=function(r){var s=0,o=this,a=o._last,l=Br,c,u,d;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-r:r));if(o._dirty){for(d=o.parent;a;)c=a._prev,a._dirty&&a.totalDuration(),u=a._start,u>l&&o._sort&&a._ts&&!o._lock?(o._lock=1,Rs(o,a,u-a._delay,1)._lock=0):l=u,u<0&&a._ts&&(s-=u,(!d&&!o._dp||d&&d.smoothChildTiming)&&(o._start+=u/o._ts,o._time-=u,o._tTime-=u),o.shiftChildren(-u,!1,-1/0),l=0),a._end>s&&a._ts&&(s=a._end),a=c;cu(o,o===Bn&&o._time>s?o._time:s,1,1),o._dirty=0}return o._tDur},e.updateRoot=function(r){if(Bn._ts&&(fP(Bn,ng(r,Bn)),hP=xr.frame),xr.frame>=s1){s1+=Tr.autoSleep||120;var s=Bn._first;if((!s||!s._ts)&&Tr.autoSleep&&xr._listeners.length<2){for(;s&&!s._ts;)s=s._next;s||xr.sleep()}}},e})(_d);Dr($i.prototype,{_lock:0,_hasPause:0,_forcing:0});var aW=function(e,t,i,r,s,o,a){var l=new hr(this._pt,e,t,0,1,HP,null,s),c=0,u=0,d,f,m,v,g,y,b,S;for(l.b=i,l.e=r,i+="",r+="",(b=~r.indexOf("random("))&&(r=gd(r)),o&&(S=[i,r],o(S,e,t),i=S[0],r=S[1]),f=i.match(gy)||[];d=gy.exec(r);)v=d[0],g=r.substring(c,d.index),m?m=(m+1)%5:g.substr(-5)==="rgba("&&(m=1),v!==f[u++]&&(y=parseFloat(f[u-1])||0,l._pt={_next:l._pt,p:g||u===1?g:",",s:y,c:v.charAt(1)==="="?Kc(y,v)-y:parseFloat(v)-y,m:m&&m<4?Math.round:0},c=gy.lastIndex);return l.c=c<r.length?r.substring(c,r.length):"",l.fp=a,(oP.test(r)||b)&&(l.e=0),this._pt=l,l},bS=function(e,t,i,r,s,o,a,l,c,u){Qn(r)&&(r=r(s||0,e,o));var d=e[t],f=i!=="get"?i:Qn(d)?c?e[t.indexOf("set")||!Qn(e["get"+t.substr(3)])?t:"get"+t.substr(3)](c):e[t]():d,m=Qn(d)?c?dW:BP:SS,v;if(Mi(r)&&(~r.indexOf("random(")&&(r=gd(r)),r.charAt(1)==="="&&(v=Kc(f,r)+(Ni(f)||0),(v||v===0)&&(r=v))),!u||f!==r||Vb)return!isNaN(f*r)&&r!==""?(v=new hr(this._pt,e,t,+f||0,r-(f||0),typeof d=="boolean"?pW:zP,0,m),c&&(v.fp=c),a&&v.modifier(a,this,e),this._pt=v):(!d&&!(t in e)&&mS(t,r),aW.call(this,e,t,f,r,m,l||Tr.stringFilter,c))},lW=function(e,t,i,r,s){if(Qn(e)&&(e=Kh(e,s,t,i,r)),!ks(e)||e.style&&e.nodeType||zi(e)||rP(e))return Mi(e)?Kh(e,s,t,i,r):e;var o={},a;for(a in e)o[a]=Kh(e[a],s,t,i,r);return o},UP=function(e,t,i,r,s,o){var a,l,c,u;if(Sr[e]&&(a=new Sr[e]).init(s,a.rawVars?t[e]:lW(t[e],r,s,o,i),i,r,o)!==!1&&(i._pt=l=new hr(i._pt,s,e,0,1,a.render,a,0,a.priority),i!==Gc))for(c=i._ptLookup[i._targets.indexOf(s)],u=a._props.length;u--;)c[a._props[u]]=l;return a},Fo,Vb,wS=function n(e,t,i){var r=e.vars,s=r.ease,o=r.startAt,a=r.immediateRender,l=r.lazy,c=r.onUpdate,u=r.runBackwards,d=r.yoyoEase,f=r.keyframes,m=r.autoRevert,v=e._dur,g=e._startAt,y=e._targets,b=e.parent,S=b&&b.data==="nested"?b.vars.targets:y,x=e._overwrite==="auto"&&!hS,A=e.timeline,E,M,I,R,C,D,L,z,G,H,J,k,X;if(A&&(!f||!s)&&(s="none"),e._ease=gl(s,ou.ease),e._yEase=d?PP(gl(d===!0?s:d,ou.ease)):0,d&&e._yoyo&&!e._repeat&&(d=e._yEase,e._yEase=e._ease,e._ease=d),e._from=!A&&!!r.runBackwards,!A||f&&!r.stagger){if(z=y[0]?pl(y[0]).harness:0,k=z&&r[z.prop],E=tg(r,gS),g&&(g._zTime<0&&g.progress(1),t<0&&u&&a&&!m?g.render(-1,!0):g.revert(u&&v?Um:UV),g._lazy=0),o){if(Ko(e._startAt=ai.set(y,Dr({data:"isStart",overwrite:!1,parent:b,immediateRender:!0,lazy:!g&&cr(l),startAt:null,delay:0,onUpdate:c&&function(){return Ar(e,"onUpdate")},stagger:0},o))),e._startAt._dp=0,e._startAt._sat=e,t<0&&(Di||!a&&!m)&&e._startAt.revert(Um),a&&v&&t<=0&&i<=0){t&&(e._zTime=t);return}}else if(u&&v&&!g){if(t&&(a=!1),I=Dr({overwrite:!1,data:"isFromStart",lazy:a&&!g&&cr(l),immediateRender:a,stagger:0,parent:b},E),k&&(I[z.prop]=k),Ko(e._startAt=ai.set(y,I)),e._startAt._dp=0,e._startAt._sat=e,t<0&&(Di?e._startAt.revert(Um):e._startAt.render(-1,!0)),e._zTime=t,!a)n(e._startAt,Cn,Cn);else if(!t)return}for(e._pt=e._ptCache=0,l=v&&cr(l)||l&&!v,M=0;M<y.length;M++){if(C=y[M],L=C._gsap||_S(y)[M]._gsap,e._ptLookup[M]=H={},Nb[L.id]&&Vo.length&&eg(),J=S===y?M:S.indexOf(C),z&&(G=new z).init(C,k||E,e,J,S)!==!1&&(e._pt=R=new hr(e._pt,C,G.name,0,1,G.render,G,0,G.priority),G._props.forEach(function(W){H[W]=R}),G.priority&&(D=1)),!z||k)for(I in E)Sr[I]&&(G=UP(I,E,e,J,C,S))?G.priority&&(D=1):H[I]=R=bS.call(e,C,I,"get",E[I],J,S,0,r.stringFilter);e._op&&e._op[M]&&e.kill(C,e._op[M]),x&&e._pt&&(Fo=e,Bn.killTweensOf(C,H,e.globalTime(t)),X=!e.parent,Fo=0),e._pt&&l&&(Nb[L.id]=1)}D&&GP(e),e._onInit&&e._onInit(e)}e._onUpdate=c,e._initted=(!e._op||e._pt)&&!X,f&&t<=0&&A.render(Br,!0,!0)},cW=function(e,t,i,r,s,o,a,l){var c=(e._pt&&e._ptCache||(e._ptCache={}))[t],u,d,f,m;if(!c)for(c=e._ptCache[t]=[],f=e._ptLookup,m=e._targets.length;m--;){if(u=f[m][t],u&&u.d&&u.d._pt)for(u=u.d._pt;u&&u.p!==t&&u.fp!==t;)u=u._next;if(!u)return Vb=1,e.vars[t]="+=0",wS(e,a),Vb=0,l?pd(t+" not eligible for reset"):1;c.push(u)}for(m=c.length;m--;)d=c[m],u=d._pt||d,u.s=(r||r===0)&&!s?r:u.s+(r||0)+o*u.c,u.c=i-u.s,d.e&&(d.e=ti(i)+Ni(d.e)),d.b&&(d.b=u.s+Ni(d.b))},uW=function(e,t){var i=e[0]?pl(e[0]).harness:0,r=i&&i.aliases,s,o,a,l;if(!r)return t;s=au({},t);for(o in r)if(o in s)for(l=r[o].split(","),a=l.length;a--;)s[l[a]]=s[o];return s},hW=function(e,t,i,r){var s=t.ease||r||"power1.inOut",o,a;if(zi(t))a=i[e]||(i[e]=[]),t.forEach(function(l,c){return a.push({t:c/(t.length-1)*100,v:l,e:s})});else for(o in t)a=i[o]||(i[o]=[]),o==="ease"||a.push({t:parseFloat(e),v:t[o],e:s})},Kh=function(e,t,i,r,s){return Qn(e)?e.call(t,i,r,s):Mi(e)&&~e.indexOf("random(")?gd(e):e},NP=vS+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",FP={};ur(NP+",id,stagger,delay,duration,paused,scrollTrigger",function(n){return FP[n]=1});var ai=(function(n){nP(e,n);function e(i,r,s,o){var a;typeof r=="number"&&(s.duration=r,r=s,s=null),a=n.call(this,o?r:Xh(r))||this;var l=a.vars,c=l.duration,u=l.delay,d=l.immediateRender,f=l.stagger,m=l.overwrite,v=l.keyframes,g=l.defaults,y=l.scrollTrigger,b=l.yoyoEase,S=r.parent||Bn,x=(zi(i)||rP(i)?fo(i[0]):"length"in r)?[i]:zr(i),A,E,M,I,R,C,D,L;if(a._targets=x.length?_S(x):pd("GSAP target "+i+" not found. https://gsap.com",!Tr.nullTargetWarn)||[],a._ptLookup=[],a._overwrite=m,v||f||Ep(c)||Ep(u)){if(r=a.vars,A=a.timeline=new $i({data:"nested",defaults:g||{},targets:S&&S.data==="nested"?S.vars.targets:x}),A.kill(),A.parent=A._dp=io(a),A._start=0,f||Ep(c)||Ep(u)){if(I=x.length,D=f&&SP(f),ks(f))for(R in f)~NP.indexOf(R)&&(L||(L={}),L[R]=f[R]);for(E=0;E<I;E++)M=tg(r,FP),M.stagger=0,b&&(M.yoyoEase=b),L&&au(M,L),C=x[E],M.duration=+Kh(c,io(a),E,C,x),M.delay=(+Kh(u,io(a),E,C,x)||0)-a._delay,!f&&I===1&&M.delay&&(a._delay=u=M.delay,a._start+=u,M.delay=0),A.to(C,M,D?D(E,C,x):0),A._ease=Qt.none;A.duration()?c=u=0:a.timeline=0}else if(v){Xh(Dr(A.vars.defaults,{ease:"none"})),A._ease=gl(v.ease||r.ease||"none");var z=0,G,H,J;if(zi(v))v.forEach(function(k){return A.to(x,k,">")}),A.duration();else{M={};for(R in v)R==="ease"||R==="easeEach"||hW(R,v[R],M,v.easeEach);for(R in M)for(G=M[R].sort(function(k,X){return k.t-X.t}),z=0,E=0;E<G.length;E++)H=G[E],J={ease:H.e,duration:(H.t-(E?G[E-1].t:0))/100*c},J[R]=H.v,A.to(x,J,z),z+=J.duration;A.duration()<c&&A.to({},{duration:c-A.duration()})}}c||a.duration(c=A.duration())}else a.timeline=0;return m===!0&&!hS&&(Fo=io(a),Bn.killTweensOf(x),Fo=0),Rs(S,io(a),s),r.reversed&&a.reverse(),r.paused&&a.paused(!0),(d||!c&&!v&&a._start===li(S._time)&&cr(d)&&GV(io(a))&&S.data!=="nested")&&(a._tTime=-Cn,a.render(Math.max(0,-u)||0)),y&&_P(io(a),y),a}var t=e.prototype;return t.render=function(r,s,o){var a=this._time,l=this._tDur,c=this._dur,u=r<0,d=r>l-Cn&&!u?l:r<Cn?0:r,f,m,v,g,y,b,S,x,A;if(!c)WV(this,r,s,o);else if(d!==this._tTime||!r||o||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==u||this._lazy){if(f=d,x=this.timeline,this._repeat){if(g=c+this._rDelay,this._repeat<-1&&u)return this.totalTime(g*100+r,s,o);if(f=li(d%g),d===l?(v=this._repeat,f=c):(y=li(d/g),v=~~y,v&&v===y?(f=c,v--):f>c&&(f=c)),b=this._yoyo&&v&1,b&&(A=this._yEase,f=c-f),y=lu(this._tTime,g),f===a&&!o&&this._initted&&v===y)return this._tTime=d,this;v!==y&&(x&&this._yEase&&OP(x,b),this.vars.repeatRefresh&&!b&&!this._lock&&f!==g&&this._initted&&(this._lock=o=1,this.render(li(g*v),!0).invalidate()._lock=0))}if(!this._initted){if(yP(this,u?r:f,o,s,d))return this._tTime=0,this;if(a!==this._time&&!(o&&this.vars.repeatRefresh&&v!==y))return this;if(c!==this._dur)return this.render(r,s,o)}if(this._tTime=d,this._time=f,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=S=(A||this._ease)(f/c),this._from&&(this.ratio=S=1-S),!a&&d&&!s&&!y&&(Ar(this,"onStart"),this._tTime!==d))return this;for(m=this._pt;m;)m.r(S,m.d),m=m._next;x&&x.render(r<0?r:x._dur*x._ease(f/this._dur),s,o)||this._startAt&&(this._zTime=r),this._onUpdate&&!s&&(u&&Fb(this,r,s,o),Ar(this,"onUpdate")),this._repeat&&v!==y&&this.vars.onRepeat&&!s&&this.parent&&Ar(this,"onRepeat"),(d===this._tDur||!d)&&this._tTime===d&&(u&&!this._onUpdate&&Fb(this,r,!0,!0),(r||!c)&&(d===this._tDur&&this._ts>0||!d&&this._ts<0)&&Ko(this,1),!s&&!(u&&!a)&&(d||a||b)&&(Ar(this,d===l?"onComplete":"onReverseComplete",!0),this._prom&&!(d<l&&this.timeScale()>0)&&this._prom()))}return this},t.targets=function(){return this._targets},t.invalidate=function(r){return(!r||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(r),n.prototype.invalidate.call(this,r)},t.resetTo=function(r,s,o,a,l){vd||xr.wake(),this._ts||this.play();var c=Math.min(this._dur,(this._dp._time-this._start)*this._ts),u;return this._initted||wS(this,c),u=this._ease(c/this._dur),cW(this,r,s,o,a,u,c,l)?this.resetTo(r,s,o,a,1):(dv(this,0),this.parent||gP(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},t.kill=function(r,s){if(s===void 0&&(s="all"),!r&&(!s||s==="all"))return this._lazy=this._pt=0,this.parent?Bh(this):this.scrollTrigger&&this.scrollTrigger.kill(!!Di),this;if(this.timeline){var o=this.timeline.totalDuration();return this.timeline.killTweensOf(r,s,Fo&&Fo.vars.overwrite!==!0)._first||Bh(this),this.parent&&o!==this.timeline.totalDuration()&&cu(this,this._dur*this.timeline._tDur/o,0,1),this}var a=this._targets,l=r?zr(r):a,c=this._ptLookup,u=this._pt,d,f,m,v,g,y,b;if((!s||s==="all")&&zV(a,l))return s==="all"&&(this._pt=0),Bh(this);for(d=this._op=this._op||[],s!=="all"&&(Mi(s)&&(g={},ur(s,function(S){return g[S]=1}),s=g),s=uW(a,s)),b=a.length;b--;)if(~l.indexOf(a[b])){f=c[b],s==="all"?(d[b]=s,v=f,m={}):(m=d[b]=d[b]||{},v=s);for(g in v)y=f&&f[g],y&&((!("kill"in y.d)||y.d.kill(g)===!0)&&uv(this,y,"_pt"),delete f[g]),m!=="all"&&(m[g]=1)}return this._initted&&!this._pt&&u&&Bh(this),this},e.to=function(r,s){return new e(r,s,arguments[2])},e.from=function(r,s){return Yh(1,arguments)},e.delayedCall=function(r,s,o,a){return new e(s,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:r,onComplete:s,onReverseComplete:s,onCompleteParams:o,onReverseCompleteParams:o,callbackScope:a})},e.fromTo=function(r,s,o){return Yh(2,arguments)},e.set=function(r,s){return s.duration=0,s.repeatDelay||(s.repeat=0),new e(r,s)},e.killTweensOf=function(r,s,o){return Bn.killTweensOf(r,s,o)},e})(_d);Dr(ai.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});ur("staggerTo,staggerFrom,staggerFromTo",function(n){ai[n]=function(){var e=new $i,t=zb.call(arguments,0);return t.splice(n==="staggerFromTo"?5:4,0,0),e[n].apply(e,t)}});var SS=function(e,t,i){return e[t]=i},BP=function(e,t,i){return e[t](i)},dW=function(e,t,i,r){return e[t](r.fp,i)},fW=function(e,t,i){return e.setAttribute(t,i)},xS=function(e,t){return Qn(e[t])?BP:dS(e[t])&&e.setAttribute?fW:SS},zP=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e6)/1e6,t)},pW=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},HP=function(e,t){var i=t._pt,r="";if(!e&&t.b)r=t.b;else if(e===1&&t.e)r=t.e;else{for(;i;)r=i.p+(i.m?i.m(i.s+i.c*e):Math.round((i.s+i.c*e)*1e4)/1e4)+r,i=i._next;r+=t.c}t.set(t.t,t.p,r,t)},ES=function(e,t){for(var i=t._pt;i;)i.r(e,i.d),i=i._next},mW=function(e,t,i,r){for(var s=this._pt,o;s;)o=s._next,s.p===r&&s.modifier(e,t,i),s=o},gW=function(e){for(var t=this._pt,i,r;t;)r=t._next,t.p===e&&!t.op||t.op===e?uv(this,t,"_pt"):t.dep||(i=1),t=r;return!i},vW=function(e,t,i,r){r.mSet(e,t,r.m.call(r.tween,i,r.mt),r)},GP=function(e){for(var t=e._pt,i,r,s,o;t;){for(i=t._next,r=s;r&&r.pr>t.pr;)r=r._next;(t._prev=r?r._prev:o)?t._prev._next=t:s=t,(t._next=r)?r._prev=t:o=t,t=i}e._pt=s},hr=(function(){function n(t,i,r,s,o,a,l,c,u){this.t=i,this.s=s,this.c=o,this.p=r,this.r=a||zP,this.d=l||this,this.set=c||SS,this.pr=u||0,this._next=t,t&&(t._prev=this)}var e=n.prototype;return e.modifier=function(i,r,s){this.mSet=this.mSet||this.set,this.set=vW,this.m=i,this.mt=s,this.tween=r},n})();ur(vS+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(n){return gS[n]=1});Ir.TweenMax=Ir.TweenLite=ai;Ir.TimelineLite=Ir.TimelineMax=$i;Bn=new $i({sortChildren:!1,defaults:ou,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});Tr.stringFilter=DP;var vl=[],Fm={},_W=[],h1=0,yW=0,wy=function(e){return(Fm[e]||_W).map(function(t){return t()})},Wb=function(){var e=Date.now(),t=[];e-h1>2&&(wy("matchMediaInit"),vl.forEach(function(i){var r=i.queries,s=i.conditions,o,a,l,c;for(a in r)o=Cs.matchMedia(r[a]).matches,o&&(l=1),o!==s[a]&&(s[a]=o,c=1);c&&(i.revert(),l&&t.push(i))}),wy("matchMediaRevert"),t.forEach(function(i){return i.onMatch(i,function(r){return i.add(null,r)})}),h1=e,wy("matchMedia"))},VP=(function(){function n(t,i){this.selector=i&&Hb(i),this.data=[],this._r=[],this.isReverted=!1,this.id=yW++,t&&this.add(t)}var e=n.prototype;return e.add=function(i,r,s){Qn(i)&&(s=r,r=i,i=Qn);var o=this,a=function(){var c=Nn,u=o.selector,d;return c&&c!==o&&c.data.push(o),s&&(o.selector=Hb(s)),Nn=o,d=r.apply(o,arguments),Qn(d)&&o._r.push(d),Nn=c,o.selector=u,o.isReverted=!1,d};return o.last=a,i===Qn?a(o,function(l){return o.add(null,l)}):i?o[i]=a:a},e.ignore=function(i){var r=Nn;Nn=null,i(this),Nn=r},e.getTweens=function(){var i=[];return this.data.forEach(function(r){return r instanceof n?i.push.apply(i,r.getTweens()):r instanceof ai&&!(r.parent&&r.parent.data==="nested")&&i.push(r)}),i},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(i,r){var s=this;if(i?(function(){for(var a=s.getTweens(),l=s.data.length,c;l--;)c=s.data[l],c.data==="isFlip"&&(c.revert(),c.getChildren(!0,!0,!1).forEach(function(u){return a.splice(a.indexOf(u),1)}));for(a.map(function(u){return{g:u._dur||u._delay||u._sat&&!u._sat.vars.immediateRender?u.globalTime(0):-1/0,t:u}}).sort(function(u,d){return d.g-u.g||-1/0}).forEach(function(u){return u.t.revert(i)}),l=s.data.length;l--;)c=s.data[l],c instanceof $i?c.data!=="nested"&&(c.scrollTrigger&&c.scrollTrigger.revert(),c.kill()):!(c instanceof ai)&&c.revert&&c.revert(i);s._r.forEach(function(u){return u(i,s)}),s.isReverted=!0})():this.data.forEach(function(a){return a.kill&&a.kill()}),this.clear(),r)for(var o=vl.length;o--;)vl[o].id===this.id&&vl.splice(o,1)},e.revert=function(i){this.kill(i||{})},n})(),bW=(function(){function n(t){this.contexts=[],this.scope=t,Nn&&Nn.data.push(this)}var e=n.prototype;return e.add=function(i,r,s){ks(i)||(i={matches:i});var o=new VP(0,s||this.scope),a=o.conditions={},l,c,u;Nn&&!o.selector&&(o.selector=Nn.selector),this.contexts.push(o),r=o.add("onMatch",r),o.queries=i;for(c in i)c==="all"?u=1:(l=Cs.matchMedia(i[c]),l&&(vl.indexOf(o)<0&&vl.push(o),(a[c]=l.matches)&&(u=1),l.addListener?l.addListener(Wb):l.addEventListener("change",Wb)));return u&&r(o,function(d){return o.add(null,d)}),this},e.revert=function(i){this.kill(i||{})},e.kill=function(i){this.contexts.forEach(function(r){return r.kill(i,!0)})},n})(),ig={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];t.forEach(function(r){return CP(r)})},timeline:function(e){return new $i(e)},getTweensOf:function(e,t){return Bn.getTweensOf(e,t)},getProperty:function(e,t,i,r){Mi(e)&&(e=zr(e)[0]);var s=pl(e||{}).get,o=i?mP:pP;return i==="native"&&(i=""),e&&(t?o((Sr[t]&&Sr[t].get||s)(e,t,i,r)):function(a,l,c){return o((Sr[a]&&Sr[a].get||s)(e,a,l,c))})},quickSetter:function(e,t,i){if(e=zr(e),e.length>1){var r=e.map(function(u){return gr.quickSetter(u,t,i)}),s=r.length;return function(u){for(var d=s;d--;)r[d](u)}}e=e[0]||{};var o=Sr[t],a=pl(e),l=a.harness&&(a.harness.aliases||{})[t]||t,c=o?function(u){var d=new o;Gc._pt=0,d.init(e,i?u+i:u,Gc,0,[e]),d.render(1,d),Gc._pt&&ES(1,Gc)}:a.set(e,l);return o?c:function(u){return c(e,l,i?u+i:u,a,1)}},quickTo:function(e,t,i){var r,s=gr.to(e,Dr((r={},r[t]="+=0.1",r.paused=!0,r.stagger=0,r),i||{})),o=function(l,c,u){return s.resetTo(t,l,c,u)};return o.tween=s,o},isTweening:function(e){return Bn.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=gl(e.ease,ou.ease)),o1(ou,e||{})},config:function(e){return o1(Tr,e||{})},registerEffect:function(e){var t=e.name,i=e.effect,r=e.plugins,s=e.defaults,o=e.extendTimeline;(r||"").split(",").forEach(function(a){return a&&!Sr[a]&&!Ir[a]&&pd(t+" effect requires "+a+" plugin.")}),vy[t]=function(a,l,c){return i(zr(a),Dr(l||{},s),c)},o&&($i.prototype[t]=function(a,l,c){return this.add(vy[t](a,ks(l)?l:(c=l)&&{},this),c)})},registerEase:function(e,t){Qt[e]=gl(t)},parseEase:function(e,t){return arguments.length?gl(e,t):Qt},getById:function(e){return Bn.getById(e)},exportRoot:function(e,t){e===void 0&&(e={});var i=new $i(e),r,s;for(i.smoothChildTiming=cr(e.smoothChildTiming),Bn.remove(i),i._dp=0,i._time=i._tTime=Bn._time,r=Bn._first;r;)s=r._next,(t||!(!r._dur&&r instanceof ai&&r.vars.onComplete===r._targets[0]))&&Rs(i,r,r._start-r._delay),r=s;return Rs(Bn,i,0),i},context:function(e,t){return e?new VP(e,t):Nn},matchMedia:function(e){return new bW(e)},matchMediaRefresh:function(){return vl.forEach(function(e){var t=e.conditions,i,r;for(r in t)t[r]&&(t[r]=!1,i=1);i&&e.revert()})||Wb()},addEventListener:function(e,t){var i=Fm[e]||(Fm[e]=[]);~i.indexOf(t)||i.push(t)},removeEventListener:function(e,t){var i=Fm[e],r=i&&i.indexOf(t);r>=0&&i.splice(r,1)},utils:{wrap:QV,wrapYoyo:ZV,distribute:SP,random:EP,snap:xP,normalize:JV,getUnit:Ni,clamp:XV,splitColor:RP,toArray:zr,selector:Hb,mapRange:MP,pipe:KV,unitize:$V,interpolate:eW,shuffle:wP},install:cP,effects:vy,ticker:xr,updateRoot:$i.updateRoot,plugins:Sr,globalTimeline:Bn,core:{PropTween:hr,globals:uP,Tween:ai,Timeline:$i,Animation:_d,getCache:pl,_removeLinkedListItem:uv,reverting:function(){return Di},context:function(e){return e&&Nn&&(Nn.data.push(e),e._ctx=Nn),Nn},suppressOverwrites:function(e){return hS=e}}};ur("to,from,fromTo,delayedCall,set,killTweensOf",function(n){return ig[n]=ai[n]});xr.add($i.updateRoot);Gc=ig.to({},{duration:0});var wW=function(e,t){for(var i=e._pt;i&&i.p!==t&&i.op!==t&&i.fp!==t;)i=i._next;return i},SW=function(e,t){var i=e._targets,r,s,o;for(r in t)for(s=i.length;s--;)o=e._ptLookup[s][r],o&&(o=o.d)&&(o._pt&&(o=wW(o,r)),o&&o.modifier&&o.modifier(t[r],e,i[s],r))},Sy=function(e,t){return{name:e,headless:1,rawVars:1,init:function(r,s,o){o._onInit=function(a){var l,c;if(Mi(s)&&(l={},ur(s,function(u){return l[u]=1}),s=l),t){l={};for(c in s)l[c]=t(s[c]);s=l}SW(a,s)}}}},gr=ig.registerPlugin({name:"attr",init:function(e,t,i,r,s){var o,a,l;this.tween=i;for(o in t)l=e.getAttribute(o)||"",a=this.add(e,"setAttribute",(l||0)+"",t[o],r,s,0,0,o),a.op=o,a.b=l,this._props.push(o)},render:function(e,t){for(var i=t._pt;i;)Di?i.set(i.t,i.p,i.b,i):i.r(e,i.d),i=i._next}},{name:"endArray",headless:1,init:function(e,t){for(var i=t.length;i--;)this.add(e,i,e[i]||0,t[i],0,0,0,0,0,1)}},Sy("roundProps",Gb),Sy("modifiers"),Sy("snap",xP))||ig;ai.version=$i.version=gr.version="3.13.0";lP=1;fS()&&uu();Qt.Power0;Qt.Power1;Qt.Power2;Qt.Power3;Qt.Power4;Qt.Linear;Qt.Quad;Qt.Cubic;Qt.Quart;Qt.Quint;Qt.Strong;Qt.Elastic;Qt.Back;Qt.SteppedEase;Qt.Bounce;Qt.Sine;Qt.Expo;Qt.Circ;/*!
 * CSSPlugin 3.13.0
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var d1,Bo,$c,AS,rl,f1,MS,xW=function(){return typeof window<"u"},po={},$a=180/Math.PI,Jc=Math.PI/180,tc=Math.atan2,p1=1e8,TS=/([A-Z])/g,EW=/(left|right|width|margin|padding|x)/i,AW=/[\s,\(]\S/,Is={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},jb=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},MW=function(e,t){return t.set(t.t,t.p,e===1?t.e:Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},TW=function(e,t){return t.set(t.t,t.p,e?Math.round((t.s+t.c*e)*1e4)/1e4+t.u:t.b,t)},CW=function(e,t){var i=t.s+t.c*e;t.set(t.t,t.p,~~(i+(i<0?-.5:.5))+t.u,t)},WP=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},jP=function(e,t){return t.set(t.t,t.p,e!==1?t.b:t.e,t)},RW=function(e,t,i){return e.style[t]=i},IW=function(e,t,i){return e.style.setProperty(t,i)},DW=function(e,t,i){return e._gsap[t]=i},PW=function(e,t,i){return e._gsap.scaleX=e._gsap.scaleY=i},OW=function(e,t,i,r,s){var o=e._gsap;o.scaleX=o.scaleY=i,o.renderTransform(s,o)},LW=function(e,t,i,r,s){var o=e._gsap;o[t]=i,o.renderTransform(s,o)},zn="transform",dr=zn+"Origin",kW=function n(e,t){var i=this,r=this.target,s=r.style,o=r._gsap;if(e in po&&s){if(this.tfm=this.tfm||{},e!=="transform")e=Is[e]||e,~e.indexOf(",")?e.split(",").forEach(function(a){return i.tfm[a]=so(r,a)}):this.tfm[e]=o.x?o[e]:so(r,e),e===dr&&(this.tfm.zOrigin=o.zOrigin);else return Is.transform.split(",").forEach(function(a){return n.call(i,a,t)});if(this.props.indexOf(zn)>=0)return;o.svg&&(this.svgo=r.getAttribute("data-svg-origin"),this.props.push(dr,t,"")),e=zn}(s||t)&&this.props.push(e,t,s[e])},qP=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},UW=function(){var e=this.props,t=this.target,i=t.style,r=t._gsap,s,o;for(s=0;s<e.length;s+=3)e[s+1]?e[s+1]===2?t[e[s]](e[s+2]):t[e[s]]=e[s+2]:e[s+2]?i[e[s]]=e[s+2]:i.removeProperty(e[s].substr(0,2)==="--"?e[s]:e[s].replace(TS,"-$1").toLowerCase());if(this.tfm){for(o in this.tfm)r[o]=this.tfm[o];r.svg&&(r.renderTransform(),t.setAttribute("data-svg-origin",this.svgo||"")),s=MS(),(!s||!s.isStart)&&!i[zn]&&(qP(i),r.zOrigin&&i[dr]&&(i[dr]+=" "+r.zOrigin+"px",r.zOrigin=0,r.renderTransform()),r.uncache=1)}},XP=function(e,t){var i={target:e,props:[],revert:UW,save:kW};return e._gsap||gr.core.getCache(e),t&&e.style&&e.nodeType&&t.split(",").forEach(function(r){return i.save(r)}),i},YP,qb=function(e,t){var i=Bo.createElementNS?Bo.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):Bo.createElement(e);return i&&i.style?i:Bo.createElement(e)},Hr=function n(e,t,i){var r=getComputedStyle(e);return r[t]||r.getPropertyValue(t.replace(TS,"-$1").toLowerCase())||r.getPropertyValue(t)||!i&&n(e,hu(t)||t,1)||""},m1="O,Moz,ms,Ms,Webkit".split(","),hu=function(e,t,i){var r=t||rl,s=r.style,o=5;if(e in s&&!i)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);o--&&!(m1[o]+e in s););return o<0?null:(o===3?"ms":o>=0?m1[o]:"")+e},Xb=function(){xW()&&window.document&&(d1=window,Bo=d1.document,$c=Bo.documentElement,rl=qb("div")||{style:{}},qb("div"),zn=hu(zn),dr=zn+"Origin",rl.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",YP=!!hu("perspective"),MS=gr.core.reverting,AS=1)},g1=function(e){var t=e.ownerSVGElement,i=qb("svg",t&&t.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),r=e.cloneNode(!0),s;r.style.display="block",i.appendChild(r),$c.appendChild(i);try{s=r.getBBox()}catch(o){}return i.removeChild(r),$c.removeChild(i),s},v1=function(e,t){for(var i=t.length;i--;)if(e.hasAttribute(t[i]))return e.getAttribute(t[i])},KP=function(e){var t,i;try{t=e.getBBox()}catch(r){t=g1(e),i=1}return t&&(t.width||t.height)||i||(t=g1(e)),t&&!t.width&&!t.x&&!t.y?{x:+v1(e,["x","cx","x1"])||0,y:+v1(e,["y","cy","y1"])||0,width:0,height:0}:t},$P=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&KP(e))},Tl=function(e,t){if(t){var i=e.style,r;t in po&&t!==dr&&(t=zn),i.removeProperty?(r=t.substr(0,2),(r==="ms"||t.substr(0,6)==="webkit")&&(t="-"+t),i.removeProperty(r==="--"?t:t.replace(TS,"-$1").toLowerCase())):i.removeAttribute(t)}},zo=function(e,t,i,r,s,o){var a=new hr(e._pt,t,i,0,1,o?jP:WP);return e._pt=a,a.b=r,a.e=s,e._props.push(i),a},_1={deg:1,rad:1,turn:1},NW={grid:1,flex:1},$o=function n(e,t,i,r){var s=parseFloat(i)||0,o=(i+"").trim().substr((s+"").length)||"px",a=rl.style,l=EW.test(t),c=e.tagName.toLowerCase()==="svg",u=(c?"client":"offset")+(l?"Width":"Height"),d=100,f=r==="px",m=r==="%",v,g,y,b;if(r===o||!s||_1[r]||_1[o])return s;if(o!=="px"&&!f&&(s=n(e,t,i,"px")),b=e.getCTM&&$P(e),(m||o==="%")&&(po[t]||~t.indexOf("adius")))return v=b?e.getBBox()[l?"width":"height"]:e[u],ti(m?s/v*d:s/100*v);if(a[l?"width":"height"]=d+(f?o:r),g=r!=="rem"&&~t.indexOf("adius")||r==="em"&&e.appendChild&&!c?e:e.parentNode,b&&(g=(e.ownerSVGElement||{}).parentNode),(!g||g===Bo||!g.appendChild)&&(g=Bo.body),y=g._gsap,y&&m&&y.width&&l&&y.time===xr.time&&!y.uncache)return ti(s/y.width*d);if(m&&(t==="height"||t==="width")){var S=e.style[t];e.style[t]=d+r,v=e[u],S?e.style[t]=S:Tl(e,t)}else(m||o==="%")&&!NW[Hr(g,"display")]&&(a.position=Hr(e,"position")),g===e&&(a.position="static"),g.appendChild(rl),v=rl[u],g.removeChild(rl),a.position="absolute";return l&&m&&(y=pl(g),y.time=xr.time,y.width=g[u]),ti(f?v*s/d:v&&s?d/v*s:0)},so=function(e,t,i,r){var s;return AS||Xb(),t in Is&&t!=="transform"&&(t=Is[t],~t.indexOf(",")&&(t=t.split(",")[0])),po[t]&&t!=="transform"?(s=bd(e,r),s=t!=="transformOrigin"?s[t]:s.svg?s.origin:sg(Hr(e,dr))+" "+s.zOrigin+"px"):(s=e.style[t],(!s||s==="auto"||r||~(s+"").indexOf("calc("))&&(s=rg[t]&&rg[t](e,t,i)||Hr(e,t)||dP(e,t)||(t==="opacity"?1:0))),i&&!~(s+"").trim().indexOf(" ")?$o(e,t,s,i)+i:s},FW=function(e,t,i,r){if(!i||i==="none"){var s=hu(t,e,1),o=s&&Hr(e,s,1);o&&o!==i?(t=s,i=o):t==="borderColor"&&(i=Hr(e,"borderTopColor"))}var a=new hr(this._pt,e.style,t,0,1,HP),l=0,c=0,u,d,f,m,v,g,y,b,S,x,A,E;if(a.b=i,a.e=r,i+="",r+="",r.substring(0,6)==="var(--"&&(r=Hr(e,r.substring(4,r.indexOf(")")))),r==="auto"&&(g=e.style[t],e.style[t]=r,r=Hr(e,t)||r,g?e.style[t]=g:Tl(e,t)),u=[i,r],DP(u),i=u[0],r=u[1],f=i.match(Hc)||[],E=r.match(Hc)||[],E.length){for(;d=Hc.exec(r);)y=d[0],S=r.substring(l,d.index),v?v=(v+1)%5:(S.substr(-5)==="rgba("||S.substr(-5)==="hsla(")&&(v=1),y!==(g=f[c++]||"")&&(m=parseFloat(g)||0,A=g.substr((m+"").length),y.charAt(1)==="="&&(y=Kc(m,y)+A),b=parseFloat(y),x=y.substr((b+"").length),l=Hc.lastIndex-x.length,x||(x=x||Tr.units[t]||A,l===r.length&&(r+=x,a.e+=x)),A!==x&&(m=$o(e,t,g,x)||0),a._pt={_next:a._pt,p:S||c===1?S:",",s:m,c:b-m,m:v&&v<4||t==="zIndex"?Math.round:0});a.c=l<r.length?r.substring(l,r.length):""}else a.r=t==="display"&&r==="none"?jP:WP;return oP.test(r)&&(a.e=0),this._pt=a,a},y1={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},BW=function(e){var t=e.split(" "),i=t[0],r=t[1]||"50%";return(i==="top"||i==="bottom"||r==="left"||r==="right")&&(e=i,i=r,r=e),t[0]=y1[i]||i,t[1]=y1[r]||r,t.join(" ")},zW=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var i=t.t,r=i.style,s=t.u,o=i._gsap,a,l,c;if(s==="all"||s===!0)r.cssText="",l=1;else for(s=s.split(","),c=s.length;--c>-1;)a=s[c],po[a]&&(l=1,a=a==="transformOrigin"?dr:zn),Tl(i,a);l&&(Tl(i,zn),o&&(o.svg&&i.removeAttribute("transform"),r.scale=r.rotate=r.translate="none",bd(i,1),o.uncache=1,qP(r)))}},rg={clearProps:function(e,t,i,r,s){if(s.data!=="isFromStart"){var o=e._pt=new hr(e._pt,t,i,0,0,zW);return o.u=r,o.pr=-10,o.tween=s,e._props.push(i),1}}},yd=[1,0,0,1,0,0],JP={},QP=function(e){return e==="matrix(1, 0, 0, 1, 0, 0)"||e==="none"||!e},b1=function(e){var t=Hr(e,zn);return QP(t)?yd:t.substr(7).match(sP).map(ti)},CS=function(e,t){var i=e._gsap||pl(e),r=e.style,s=b1(e),o,a,l,c;return i.svg&&e.getAttribute("transform")?(l=e.transform.baseVal.consolidate().matrix,s=[l.a,l.b,l.c,l.d,l.e,l.f],s.join(",")==="1,0,0,1,0,0"?yd:s):(s===yd&&!e.offsetParent&&e!==$c&&!i.svg&&(l=r.display,r.display="block",o=e.parentNode,(!o||!e.offsetParent&&!e.getBoundingClientRect().width)&&(c=1,a=e.nextElementSibling,$c.appendChild(e)),s=b1(e),l?r.display=l:Tl(e,"display"),c&&(a?o.insertBefore(e,a):o?o.appendChild(e):$c.removeChild(e))),t&&s.length>6?[s[0],s[1],s[4],s[5],s[12],s[13]]:s)},Yb=function(e,t,i,r,s,o){var a=e._gsap,l=s||CS(e,!0),c=a.xOrigin||0,u=a.yOrigin||0,d=a.xOffset||0,f=a.yOffset||0,m=l[0],v=l[1],g=l[2],y=l[3],b=l[4],S=l[5],x=t.split(" "),A=parseFloat(x[0])||0,E=parseFloat(x[1])||0,M,I,R,C;i?l!==yd&&(I=m*y-v*g)&&(R=A*(y/I)+E*(-g/I)+(g*S-y*b)/I,C=A*(-v/I)+E*(m/I)-(m*S-v*b)/I,A=R,E=C):(M=KP(e),A=M.x+(~x[0].indexOf("%")?A/100*M.width:A),E=M.y+(~(x[1]||x[0]).indexOf("%")?E/100*M.height:E)),r||r!==!1&&a.smooth?(b=A-c,S=E-u,a.xOffset=d+(b*m+S*g)-b,a.yOffset=f+(b*v+S*y)-S):a.xOffset=a.yOffset=0,a.xOrigin=A,a.yOrigin=E,a.smooth=!!r,a.origin=t,a.originIsAbsolute=!!i,e.style[dr]="0px 0px",o&&(zo(o,a,"xOrigin",c,A),zo(o,a,"yOrigin",u,E),zo(o,a,"xOffset",d,a.xOffset),zo(o,a,"yOffset",f,a.yOffset)),e.setAttribute("data-svg-origin",A+" "+E)},bd=function(e,t){var i=e._gsap||new kP(e);if("x"in i&&!t&&!i.uncache)return i;var r=e.style,s=i.scaleX<0,o="px",a="deg",l=getComputedStyle(e),c=Hr(e,dr)||"0",u,d,f,m,v,g,y,b,S,x,A,E,M,I,R,C,D,L,z,G,H,J,k,X,W,ie,se,ye,Ne,He,fe,he;return u=d=f=g=y=b=S=x=A=0,m=v=1,i.svg=!!(e.getCTM&&$P(e)),l.translate&&((l.translate!=="none"||l.scale!=="none"||l.rotate!=="none")&&(r[zn]=(l.translate!=="none"?"translate3d("+(l.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(l.rotate!=="none"?"rotate("+l.rotate+") ":"")+(l.scale!=="none"?"scale("+l.scale.split(" ").join(",")+") ":"")+(l[zn]!=="none"?l[zn]:"")),r.scale=r.rotate=r.translate="none"),I=CS(e,i.svg),i.svg&&(i.uncache?(W=e.getBBox(),c=i.xOrigin-W.x+"px "+(i.yOrigin-W.y)+"px",X=""):X=!t&&e.getAttribute("data-svg-origin"),Yb(e,X||c,!!X||i.originIsAbsolute,i.smooth!==!1,I)),E=i.xOrigin||0,M=i.yOrigin||0,I!==yd&&(L=I[0],z=I[1],G=I[2],H=I[3],u=J=I[4],d=k=I[5],I.length===6?(m=Math.sqrt(L*L+z*z),v=Math.sqrt(H*H+G*G),g=L||z?tc(z,L)*$a:0,S=G||H?tc(G,H)*$a+g:0,S&&(v*=Math.abs(Math.cos(S*Jc))),i.svg&&(u-=E-(E*L+M*G),d-=M-(E*z+M*H))):(he=I[6],He=I[7],se=I[8],ye=I[9],Ne=I[10],fe=I[11],u=I[12],d=I[13],f=I[14],R=tc(he,Ne),y=R*$a,R&&(C=Math.cos(-R),D=Math.sin(-R),X=J*C+se*D,W=k*C+ye*D,ie=he*C+Ne*D,se=J*-D+se*C,ye=k*-D+ye*C,Ne=he*-D+Ne*C,fe=He*-D+fe*C,J=X,k=W,he=ie),R=tc(-G,Ne),b=R*$a,R&&(C=Math.cos(-R),D=Math.sin(-R),X=L*C-se*D,W=z*C-ye*D,ie=G*C-Ne*D,fe=H*D+fe*C,L=X,z=W,G=ie),R=tc(z,L),g=R*$a,R&&(C=Math.cos(R),D=Math.sin(R),X=L*C+z*D,W=J*C+k*D,z=z*C-L*D,k=k*C-J*D,L=X,J=W),y&&Math.abs(y)+Math.abs(g)>359.9&&(y=g=0,b=180-b),m=ti(Math.sqrt(L*L+z*z+G*G)),v=ti(Math.sqrt(k*k+he*he)),R=tc(J,k),S=Math.abs(R)>2e-4?R*$a:0,A=fe?1/(fe<0?-fe:fe):0),i.svg&&(X=e.getAttribute("transform"),i.forceCSS=e.setAttribute("transform","")||!QP(Hr(e,zn)),X&&e.setAttribute("transform",X))),Math.abs(S)>90&&Math.abs(S)<270&&(s?(m*=-1,S+=g<=0?180:-180,g+=g<=0?180:-180):(v*=-1,S+=S<=0?180:-180)),t=t||i.uncache,i.x=u-((i.xPercent=u&&(!t&&i.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-u)?-50:0)))?e.offsetWidth*i.xPercent/100:0)+o,i.y=d-((i.yPercent=d&&(!t&&i.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-d)?-50:0)))?e.offsetHeight*i.yPercent/100:0)+o,i.z=f+o,i.scaleX=ti(m),i.scaleY=ti(v),i.rotation=ti(g)+a,i.rotationX=ti(y)+a,i.rotationY=ti(b)+a,i.skewX=S+a,i.skewY=x+a,i.transformPerspective=A+o,(i.zOrigin=parseFloat(c.split(" ")[2])||!t&&i.zOrigin||0)&&(r[dr]=sg(c)),i.xOffset=i.yOffset=0,i.force3D=Tr.force3D,i.renderTransform=i.svg?GW:YP?ZP:HW,i.uncache=0,i},sg=function(e){return(e=e.split(" "))[0]+" "+e[1]},xy=function(e,t,i){var r=Ni(t);return ti(parseFloat(t)+parseFloat($o(e,"x",i+"px",r)))+r},HW=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,ZP(e,t)},ga="0deg",sh="0px",va=") ",ZP=function(e,t){var i=t||this,r=i.xPercent,s=i.yPercent,o=i.x,a=i.y,l=i.z,c=i.rotation,u=i.rotationY,d=i.rotationX,f=i.skewX,m=i.skewY,v=i.scaleX,g=i.scaleY,y=i.transformPerspective,b=i.force3D,S=i.target,x=i.zOrigin,A="",E=b==="auto"&&e&&e!==1||b===!0;if(x&&(d!==ga||u!==ga)){var M=parseFloat(u)*Jc,I=Math.sin(M),R=Math.cos(M),C;M=parseFloat(d)*Jc,C=Math.cos(M),o=xy(S,o,I*C*-x),a=xy(S,a,-Math.sin(M)*-x),l=xy(S,l,R*C*-x+x)}y!==sh&&(A+="perspective("+y+va),(r||s)&&(A+="translate("+r+"%, "+s+"%) "),(E||o!==sh||a!==sh||l!==sh)&&(A+=l!==sh||E?"translate3d("+o+", "+a+", "+l+") ":"translate("+o+", "+a+va),c!==ga&&(A+="rotate("+c+va),u!==ga&&(A+="rotateY("+u+va),d!==ga&&(A+="rotateX("+d+va),(f!==ga||m!==ga)&&(A+="skew("+f+", "+m+va),(v!==1||g!==1)&&(A+="scale("+v+", "+g+va),S.style[zn]=A||"translate(0, 0)"},GW=function(e,t){var i=t||this,r=i.xPercent,s=i.yPercent,o=i.x,a=i.y,l=i.rotation,c=i.skewX,u=i.skewY,d=i.scaleX,f=i.scaleY,m=i.target,v=i.xOrigin,g=i.yOrigin,y=i.xOffset,b=i.yOffset,S=i.forceCSS,x=parseFloat(o),A=parseFloat(a),E,M,I,R,C;l=parseFloat(l),c=parseFloat(c),u=parseFloat(u),u&&(u=parseFloat(u),c+=u,l+=u),l||c?(l*=Jc,c*=Jc,E=Math.cos(l)*d,M=Math.sin(l)*d,I=Math.sin(l-c)*-f,R=Math.cos(l-c)*f,c&&(u*=Jc,C=Math.tan(c-u),C=Math.sqrt(1+C*C),I*=C,R*=C,u&&(C=Math.tan(u),C=Math.sqrt(1+C*C),E*=C,M*=C)),E=ti(E),M=ti(M),I=ti(I),R=ti(R)):(E=d,R=f,M=I=0),(x&&!~(o+"").indexOf("px")||A&&!~(a+"").indexOf("px"))&&(x=$o(m,"x",o,"px"),A=$o(m,"y",a,"px")),(v||g||y||b)&&(x=ti(x+v-(v*E+g*I)+y),A=ti(A+g-(v*M+g*R)+b)),(r||s)&&(C=m.getBBox(),x=ti(x+r/100*C.width),A=ti(A+s/100*C.height)),C="matrix("+E+","+M+","+I+","+R+","+x+","+A+")",m.setAttribute("transform",C),S&&(m.style[zn]=C)},VW=function(e,t,i,r,s){var o=360,a=Mi(s),l=parseFloat(s)*(a&&~s.indexOf("rad")?$a:1),c=l-r,u=r+c+"deg",d,f;return a&&(d=s.split("_")[1],d==="short"&&(c%=o,c!==c%(o/2)&&(c+=c<0?o:-o)),d==="cw"&&c<0?c=(c+o*p1)%o-~~(c/o)*o:d==="ccw"&&c>0&&(c=(c-o*p1)%o-~~(c/o)*o)),e._pt=f=new hr(e._pt,t,i,r,c,MW),f.e=u,f.u="deg",e._props.push(i),f},w1=function(e,t){for(var i in t)e[i]=t[i];return e},WW=function(e,t,i){var r=w1({},i._gsap),s="perspective,force3D,transformOrigin,svgOrigin",o=i.style,a,l,c,u,d,f,m,v;r.svg?(c=i.getAttribute("transform"),i.setAttribute("transform",""),o[zn]=t,a=bd(i,1),Tl(i,zn),i.setAttribute("transform",c)):(c=getComputedStyle(i)[zn],o[zn]=t,a=bd(i,1),o[zn]=c);for(l in po)c=r[l],u=a[l],c!==u&&s.indexOf(l)<0&&(m=Ni(c),v=Ni(u),d=m!==v?$o(i,l,c,v):parseFloat(c),f=parseFloat(u),e._pt=new hr(e._pt,a,l,d,f-d,jb),e._pt.u=v||0,e._props.push(l));w1(a,r)};ur("padding,margin,Width,Radius",function(n,e){var t="Top",i="Right",r="Bottom",s="Left",o=(e<3?[t,i,r,s]:[t+s,t+i,r+i,r+s]).map(function(a){return e<2?n+a:"border"+a+n});rg[e>1?"border"+n:n]=function(a,l,c,u,d){var f,m;if(arguments.length<4)return f=o.map(function(v){return so(a,v,c)}),m=f.join(" "),m.split(f[0]).length===5?f[0]:m;f=(u+"").split(" "),m={},o.forEach(function(v,g){return m[v]=f[g]=f[g]||f[(g-1)/2|0]}),a.init(l,m,d)}});var eO={name:"css",register:Xb,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,i,r,s){var o=this._props,a=e.style,l=i.vars.startAt,c,u,d,f,m,v,g,y,b,S,x,A,E,M,I,R;AS||Xb(),this.styles=this.styles||XP(e),R=this.styles.props,this.tween=i;for(g in t)if(g!=="autoRound"&&(u=t[g],!(Sr[g]&&UP(g,t,i,r,e,s)))){if(m=typeof u,v=rg[g],m==="function"&&(u=u.call(i,r,e,s),m=typeof u),m==="string"&&~u.indexOf("random(")&&(u=gd(u)),v)v(this,e,g,u,i)&&(I=1);else if(g.substr(0,2)==="--")c=(getComputedStyle(e).getPropertyValue(g)+"").trim(),u+="",Wo.lastIndex=0,Wo.test(c)||(y=Ni(c),b=Ni(u)),b?y!==b&&(c=$o(e,g,c,b)+b):y&&(u+=y),this.add(a,"setProperty",c,u,r,s,0,0,g),o.push(g),R.push(g,0,a[g]);else if(m!=="undefined"){if(l&&g in l?(c=typeof l[g]=="function"?l[g].call(i,r,e,s):l[g],Mi(c)&&~c.indexOf("random(")&&(c=gd(c)),Ni(c+"")||c==="auto"||(c+=Tr.units[g]||Ni(so(e,g))||""),(c+"").charAt(1)==="="&&(c=so(e,g))):c=so(e,g),f=parseFloat(c),S=m==="string"&&u.charAt(1)==="="&&u.substr(0,2),S&&(u=u.substr(2)),d=parseFloat(u),g in Is&&(g==="autoAlpha"&&(f===1&&so(e,"visibility")==="hidden"&&d&&(f=0),R.push("visibility",0,a.visibility),zo(this,a,"visibility",f?"inherit":"hidden",d?"inherit":"hidden",!d)),g!=="scale"&&g!=="transform"&&(g=Is[g],~g.indexOf(",")&&(g=g.split(",")[0]))),x=g in po,x){if(this.styles.save(g),m==="string"&&u.substring(0,6)==="var(--"&&(u=Hr(e,u.substring(4,u.indexOf(")"))),d=parseFloat(u)),A||(E=e._gsap,E.renderTransform&&!t.parseTransform||bd(e,t.parseTransform),M=t.smoothOrigin!==!1&&E.smooth,A=this._pt=new hr(this._pt,a,zn,0,1,E.renderTransform,E,0,-1),A.dep=1),g==="scale")this._pt=new hr(this._pt,E,"scaleY",E.scaleY,(S?Kc(E.scaleY,S+d):d)-E.scaleY||0,jb),this._pt.u=0,o.push("scaleY",g),g+="X";else if(g==="transformOrigin"){R.push(dr,0,a[dr]),u=BW(u),E.svg?Yb(e,u,0,M,0,this):(b=parseFloat(u.split(" ")[2])||0,b!==E.zOrigin&&zo(this,E,"zOrigin",E.zOrigin,b),zo(this,a,g,sg(c),sg(u)));continue}else if(g==="svgOrigin"){Yb(e,u,1,M,0,this);continue}else if(g in JP){VW(this,E,g,f,S?Kc(f,S+u):u);continue}else if(g==="smoothOrigin"){zo(this,E,"smooth",E.smooth,u);continue}else if(g==="force3D"){E[g]=u;continue}else if(g==="transform"){WW(this,u,e);continue}}else g in a||(g=hu(g)||g);if(x||(d||d===0)&&(f||f===0)&&!AW.test(u)&&g in a)y=(c+"").substr((f+"").length),d||(d=0),b=Ni(u)||(g in Tr.units?Tr.units[g]:y),y!==b&&(f=$o(e,g,c,b)),this._pt=new hr(this._pt,x?E:a,g,f,(S?Kc(f,S+d):d)-f,!x&&(b==="px"||g==="zIndex")&&t.autoRound!==!1?CW:jb),this._pt.u=b||0,y!==b&&b!=="%"&&(this._pt.b=c,this._pt.r=TW);else if(g in a)FW.call(this,e,g,c,S?S+u:u);else if(g in e)this.add(e,g,c||e[g],S?S+u:u,r,s);else if(g!=="parseTransform"){mS(g,u);continue}x||(g in a?R.push(g,0,a[g]):typeof e[g]=="function"?R.push(g,2,e[g]()):R.push(g,1,c||e[g])),o.push(g)}}I&&GP(this)},render:function(e,t){if(t.tween._time||!MS())for(var i=t._pt;i;)i.r(e,i.d),i=i._next;else t.styles.revert()},get:so,aliases:Is,getSetter:function(e,t,i){var r=Is[t];return r&&r.indexOf(",")<0&&(t=r),t in po&&t!==dr&&(e._gsap.x||so(e,"x"))?i&&f1===i?t==="scale"?PW:DW:(f1=i||{})&&(t==="scale"?OW:LW):e.style&&!dS(e.style[t])?RW:~t.indexOf("-")?IW:xS(e,t)},core:{_removeProperty:Tl,_getMatrix:CS}};gr.utils.checkPrefix=hu;gr.core.getStyleSaver=XP;(function(n,e,t,i){var r=ur(n+","+e+","+t,function(s){po[s]=1});ur(e,function(s){Tr.units[s]="deg",JP[s]=1}),Is[r[13]]=n+","+e,ur(i,function(s){var o=s.split(":");Is[o[1]]=r[o[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");ur("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(n){Tr.units[n]="px"});gr.registerPlugin(eO);var jW=gr.registerPlugin(eO)||gr;jW.core.Tween;function tO(n){var e,t,i="";if(typeof n=="string"||typeof n=="number")i+=n;else if(typeof n=="object")if(Array.isArray(n)){var r=n.length;for(e=0;e<r;e++)n[e]&&(t=tO(n[e]))&&(i&&(i+=" "),i+=t)}else for(t in n)n[t]&&(i&&(i+=" "),i+=t);return i}function qW(){for(var n,e,t=0,i="",r=arguments.length;t<r;t++)(n=arguments[t])&&(e=tO(n))&&(i&&(i+=" "),i+=e);return i}const RS="-",XW=n=>{const e=KW(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:i}=n;return{getClassGroupId:o=>{const a=o.split(RS);return a[0]===""&&a.length!==1&&a.shift(),nO(a,e)||YW(o)},getConflictingClassGroupIds:(o,a)=>{const l=t[o]||[];return a&&i[o]?[...l,...i[o]]:l}}},nO=(n,e)=>{var o;if(n.length===0)return e.classGroupId;const t=n[0],i=e.nextPart.get(t),r=i?nO(n.slice(1),i):void 0;if(r)return r;if(e.validators.length===0)return;const s=n.join(RS);return(o=e.validators.find(({validator:a})=>a(s)))==null?void 0:o.classGroupId},S1=/^\[(.+)\]$/,YW=n=>{if(S1.test(n)){const e=S1.exec(n)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},KW=n=>{const{theme:e,classGroups:t}=n,i={nextPart:new Map,validators:[]};for(const r in t)Kb(t[r],i,r,e);return i},Kb=(n,e,t,i)=>{n.forEach(r=>{if(typeof r=="string"){const s=r===""?e:x1(e,r);s.classGroupId=t;return}if(typeof r=="function"){if($W(r)){Kb(r(i),e,t,i);return}e.validators.push({validator:r,classGroupId:t});return}Object.entries(r).forEach(([s,o])=>{Kb(o,x1(e,s),t,i)})})},x1=(n,e)=>{let t=n;return e.split(RS).forEach(i=>{t.nextPart.has(i)||t.nextPart.set(i,{nextPart:new Map,validators:[]}),t=t.nextPart.get(i)}),t},$W=n=>n.isThemeGetter,JW=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,i=new Map;const r=(s,o)=>{t.set(s,o),e++,e>n&&(e=0,i=t,t=new Map)};return{get(s){let o=t.get(s);if(o!==void 0)return o;if((o=i.get(s))!==void 0)return r(s,o),o},set(s,o){t.has(s)?t.set(s,o):r(s,o)}}},$b="!",Jb=":",QW=Jb.length,ZW=n=>{const{prefix:e,experimentalParseClassName:t}=n;let i=r=>{const s=[];let o=0,a=0,l=0,c;for(let v=0;v<r.length;v++){let g=r[v];if(o===0&&a===0){if(g===Jb){s.push(r.slice(l,v)),l=v+QW;continue}if(g==="/"){c=v;continue}}g==="["?o++:g==="]"?o--:g==="("?a++:g===")"&&a--}const u=s.length===0?r:r.substring(l),d=e5(u),f=d!==u,m=c&&c>l?c-l:void 0;return{modifiers:s,hasImportantModifier:f,baseClassName:d,maybePostfixModifierPosition:m}};if(e){const r=e+Jb,s=i;i=o=>o.startsWith(r)?s(o.substring(r.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:o,maybePostfixModifierPosition:void 0}}if(t){const r=i;i=s=>t({className:s,parseClassName:r})}return i},e5=n=>n.endsWith($b)?n.substring(0,n.length-1):n.startsWith($b)?n.substring(1):n,t5=n=>{const e=Object.fromEntries(n.orderSensitiveModifiers.map(i=>[i,!0]));return i=>{if(i.length<=1)return i;const r=[];let s=[];return i.forEach(o=>{o[0]==="["||e[o]?(r.push(...s.sort(),o),s=[]):s.push(o)}),r.push(...s.sort()),r}},n5=n=>({cache:JW(n.cacheSize),parseClassName:ZW(n),sortModifiers:t5(n),...XW(n)}),i5=/\s+/,r5=(n,e)=>{const{parseClassName:t,getClassGroupId:i,getConflictingClassGroupIds:r,sortModifiers:s}=e,o=[],a=n.trim().split(i5);let l="";for(let c=a.length-1;c>=0;c-=1){const u=a[c],{isExternal:d,modifiers:f,hasImportantModifier:m,baseClassName:v,maybePostfixModifierPosition:g}=t(u);if(d){l=u+(l.length>0?" "+l:l);continue}let y=!!g,b=i(y?v.substring(0,g):v);if(!b){if(!y){l=u+(l.length>0?" "+l:l);continue}if(b=i(v),!b){l=u+(l.length>0?" "+l:l);continue}y=!1}const S=s(f).join(":"),x=m?S+$b:S,A=x+b;if(o.includes(A))continue;o.push(A);const E=r(b,y);for(let M=0;M<E.length;++M){const I=E[M];o.push(x+I)}l=u+(l.length>0?" "+l:l)}return l};function s5(){let n=0,e,t,i="";for(;n<arguments.length;)(e=arguments[n++])&&(t=iO(e))&&(i&&(i+=" "),i+=t);return i}const iO=n=>{if(typeof n=="string")return n;let e,t="";for(let i=0;i<n.length;i++)n[i]&&(e=iO(n[i]))&&(t&&(t+=" "),t+=e);return t};function o5(n,...e){let t,i,r,s=o;function o(l){const c=e.reduce((u,d)=>d(u),n());return t=n5(c),i=t.cache.get,r=t.cache.set,s=a,a(l)}function a(l){const c=i(l);if(c)return c;const u=r5(l,t);return r(l,u),u}return function(){return s(s5.apply(null,arguments))}}const fi=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},rO=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,sO=/^\((?:(\w[\w-]*):)?(.+)\)$/i,a5=/^\d+\/\d+$/,l5=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,c5=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,u5=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,h5=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,d5=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,nc=n=>a5.test(n),Wt=n=>!!n&&!Number.isNaN(Number(n)),wo=n=>!!n&&Number.isInteger(Number(n)),Ey=n=>n.endsWith("%")&&Wt(n.slice(0,-1)),Vs=n=>l5.test(n),f5=()=>!0,p5=n=>c5.test(n)&&!u5.test(n),oO=()=>!1,m5=n=>h5.test(n),g5=n=>d5.test(n),v5=n=>!ft(n)&&!pt(n),_5=n=>Eu(n,cO,oO),ft=n=>rO.test(n),_a=n=>Eu(n,uO,p5),Ay=n=>Eu(n,x5,Wt),E1=n=>Eu(n,aO,oO),y5=n=>Eu(n,lO,g5),Ap=n=>Eu(n,hO,m5),pt=n=>sO.test(n),oh=n=>Au(n,uO),b5=n=>Au(n,E5),A1=n=>Au(n,aO),w5=n=>Au(n,cO),S5=n=>Au(n,lO),Mp=n=>Au(n,hO,!0),Eu=(n,e,t)=>{const i=rO.exec(n);return i?i[1]?e(i[1]):t(i[2]):!1},Au=(n,e,t=!1)=>{const i=sO.exec(n);return i?i[1]?e(i[1]):t:!1},aO=n=>n==="position"||n==="percentage",lO=n=>n==="image"||n==="url",cO=n=>n==="length"||n==="size"||n==="bg-size",uO=n=>n==="length",x5=n=>n==="number",E5=n=>n==="family-name",hO=n=>n==="shadow",A5=()=>{const n=fi("color"),e=fi("font"),t=fi("text"),i=fi("font-weight"),r=fi("tracking"),s=fi("leading"),o=fi("breakpoint"),a=fi("container"),l=fi("spacing"),c=fi("radius"),u=fi("shadow"),d=fi("inset-shadow"),f=fi("text-shadow"),m=fi("drop-shadow"),v=fi("blur"),g=fi("perspective"),y=fi("aspect"),b=fi("ease"),S=fi("animate"),x=()=>["auto","avoid","all","avoid-page","page","left","right","column"],A=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],E=()=>[...A(),pt,ft],M=()=>["auto","hidden","clip","visible","scroll"],I=()=>["auto","contain","none"],R=()=>[pt,ft,l],C=()=>[nc,"full","auto",...R()],D=()=>[wo,"none","subgrid",pt,ft],L=()=>["auto",{span:["full",wo,pt,ft]},wo,pt,ft],z=()=>[wo,"auto",pt,ft],G=()=>["auto","min","max","fr",pt,ft],H=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],J=()=>["start","end","center","stretch","center-safe","end-safe"],k=()=>["auto",...R()],X=()=>[nc,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...R()],W=()=>[n,pt,ft],ie=()=>[...A(),A1,E1,{position:[pt,ft]}],se=()=>["no-repeat",{repeat:["","x","y","space","round"]}],ye=()=>["auto","cover","contain",w5,_5,{size:[pt,ft]}],Ne=()=>[Ey,oh,_a],He=()=>["","none","full",c,pt,ft],fe=()=>["",Wt,oh,_a],he=()=>["solid","dashed","dotted","double"],le=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ee=()=>[Wt,Ey,A1,E1],de=()=>["","none",v,pt,ft],be=()=>["none",Wt,pt,ft],oe=()=>["none",Wt,pt,ft],ge=()=>[Wt,pt,ft],Se=()=>[nc,"full",...R()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Vs],breakpoint:[Vs],color:[f5],container:[Vs],"drop-shadow":[Vs],ease:["in","out","in-out"],font:[v5],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Vs],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Vs],shadow:[Vs],spacing:["px",Wt],text:[Vs],"text-shadow":[Vs],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",nc,ft,pt,y]}],container:["container"],columns:[{columns:[Wt,ft,pt,a]}],"break-after":[{"break-after":x()}],"break-before":[{"break-before":x()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:E()}],overflow:[{overflow:M()}],"overflow-x":[{"overflow-x":M()}],"overflow-y":[{"overflow-y":M()}],overscroll:[{overscroll:I()}],"overscroll-x":[{"overscroll-x":I()}],"overscroll-y":[{"overscroll-y":I()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:C()}],"inset-x":[{"inset-x":C()}],"inset-y":[{"inset-y":C()}],start:[{start:C()}],end:[{end:C()}],top:[{top:C()}],right:[{right:C()}],bottom:[{bottom:C()}],left:[{left:C()}],visibility:["visible","invisible","collapse"],z:[{z:[wo,"auto",pt,ft]}],basis:[{basis:[nc,"full","auto",a,...R()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Wt,nc,"auto","initial","none",ft]}],grow:[{grow:["",Wt,pt,ft]}],shrink:[{shrink:["",Wt,pt,ft]}],order:[{order:[wo,"first","last","none",pt,ft]}],"grid-cols":[{"grid-cols":D()}],"col-start-end":[{col:L()}],"col-start":[{"col-start":z()}],"col-end":[{"col-end":z()}],"grid-rows":[{"grid-rows":D()}],"row-start-end":[{row:L()}],"row-start":[{"row-start":z()}],"row-end":[{"row-end":z()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":G()}],"auto-rows":[{"auto-rows":G()}],gap:[{gap:R()}],"gap-x":[{"gap-x":R()}],"gap-y":[{"gap-y":R()}],"justify-content":[{justify:[...H(),"normal"]}],"justify-items":[{"justify-items":[...J(),"normal"]}],"justify-self":[{"justify-self":["auto",...J()]}],"align-content":[{content:["normal",...H()]}],"align-items":[{items:[...J(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...J(),{baseline:["","last"]}]}],"place-content":[{"place-content":H()}],"place-items":[{"place-items":[...J(),"baseline"]}],"place-self":[{"place-self":["auto",...J()]}],p:[{p:R()}],px:[{px:R()}],py:[{py:R()}],ps:[{ps:R()}],pe:[{pe:R()}],pt:[{pt:R()}],pr:[{pr:R()}],pb:[{pb:R()}],pl:[{pl:R()}],m:[{m:k()}],mx:[{mx:k()}],my:[{my:k()}],ms:[{ms:k()}],me:[{me:k()}],mt:[{mt:k()}],mr:[{mr:k()}],mb:[{mb:k()}],ml:[{ml:k()}],"space-x":[{"space-x":R()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":R()}],"space-y-reverse":["space-y-reverse"],size:[{size:X()}],w:[{w:[a,"screen",...X()]}],"min-w":[{"min-w":[a,"screen","none",...X()]}],"max-w":[{"max-w":[a,"screen","none","prose",{screen:[o]},...X()]}],h:[{h:["screen","lh",...X()]}],"min-h":[{"min-h":["screen","lh","none",...X()]}],"max-h":[{"max-h":["screen","lh",...X()]}],"font-size":[{text:["base",t,oh,_a]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[i,pt,Ay]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Ey,ft]}],"font-family":[{font:[b5,ft,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[r,pt,ft]}],"line-clamp":[{"line-clamp":[Wt,"none",pt,Ay]}],leading:[{leading:[s,...R()]}],"list-image":[{"list-image":["none",pt,ft]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",pt,ft]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:W()}],"text-color":[{text:W()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...he(),"wavy"]}],"text-decoration-thickness":[{decoration:[Wt,"from-font","auto",pt,_a]}],"text-decoration-color":[{decoration:W()}],"underline-offset":[{"underline-offset":[Wt,"auto",pt,ft]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:R()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",pt,ft]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",pt,ft]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:ie()}],"bg-repeat":[{bg:se()}],"bg-size":[{bg:ye()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},wo,pt,ft],radial:["",pt,ft],conic:[wo,pt,ft]},S5,y5]}],"bg-color":[{bg:W()}],"gradient-from-pos":[{from:Ne()}],"gradient-via-pos":[{via:Ne()}],"gradient-to-pos":[{to:Ne()}],"gradient-from":[{from:W()}],"gradient-via":[{via:W()}],"gradient-to":[{to:W()}],rounded:[{rounded:He()}],"rounded-s":[{"rounded-s":He()}],"rounded-e":[{"rounded-e":He()}],"rounded-t":[{"rounded-t":He()}],"rounded-r":[{"rounded-r":He()}],"rounded-b":[{"rounded-b":He()}],"rounded-l":[{"rounded-l":He()}],"rounded-ss":[{"rounded-ss":He()}],"rounded-se":[{"rounded-se":He()}],"rounded-ee":[{"rounded-ee":He()}],"rounded-es":[{"rounded-es":He()}],"rounded-tl":[{"rounded-tl":He()}],"rounded-tr":[{"rounded-tr":He()}],"rounded-br":[{"rounded-br":He()}],"rounded-bl":[{"rounded-bl":He()}],"border-w":[{border:fe()}],"border-w-x":[{"border-x":fe()}],"border-w-y":[{"border-y":fe()}],"border-w-s":[{"border-s":fe()}],"border-w-e":[{"border-e":fe()}],"border-w-t":[{"border-t":fe()}],"border-w-r":[{"border-r":fe()}],"border-w-b":[{"border-b":fe()}],"border-w-l":[{"border-l":fe()}],"divide-x":[{"divide-x":fe()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":fe()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...he(),"hidden","none"]}],"divide-style":[{divide:[...he(),"hidden","none"]}],"border-color":[{border:W()}],"border-color-x":[{"border-x":W()}],"border-color-y":[{"border-y":W()}],"border-color-s":[{"border-s":W()}],"border-color-e":[{"border-e":W()}],"border-color-t":[{"border-t":W()}],"border-color-r":[{"border-r":W()}],"border-color-b":[{"border-b":W()}],"border-color-l":[{"border-l":W()}],"divide-color":[{divide:W()}],"outline-style":[{outline:[...he(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Wt,pt,ft]}],"outline-w":[{outline:["",Wt,oh,_a]}],"outline-color":[{outline:W()}],shadow:[{shadow:["","none",u,Mp,Ap]}],"shadow-color":[{shadow:W()}],"inset-shadow":[{"inset-shadow":["none",d,Mp,Ap]}],"inset-shadow-color":[{"inset-shadow":W()}],"ring-w":[{ring:fe()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:W()}],"ring-offset-w":[{"ring-offset":[Wt,_a]}],"ring-offset-color":[{"ring-offset":W()}],"inset-ring-w":[{"inset-ring":fe()}],"inset-ring-color":[{"inset-ring":W()}],"text-shadow":[{"text-shadow":["none",f,Mp,Ap]}],"text-shadow-color":[{"text-shadow":W()}],opacity:[{opacity:[Wt,pt,ft]}],"mix-blend":[{"mix-blend":[...le(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":le()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Wt]}],"mask-image-linear-from-pos":[{"mask-linear-from":ee()}],"mask-image-linear-to-pos":[{"mask-linear-to":ee()}],"mask-image-linear-from-color":[{"mask-linear-from":W()}],"mask-image-linear-to-color":[{"mask-linear-to":W()}],"mask-image-t-from-pos":[{"mask-t-from":ee()}],"mask-image-t-to-pos":[{"mask-t-to":ee()}],"mask-image-t-from-color":[{"mask-t-from":W()}],"mask-image-t-to-color":[{"mask-t-to":W()}],"mask-image-r-from-pos":[{"mask-r-from":ee()}],"mask-image-r-to-pos":[{"mask-r-to":ee()}],"mask-image-r-from-color":[{"mask-r-from":W()}],"mask-image-r-to-color":[{"mask-r-to":W()}],"mask-image-b-from-pos":[{"mask-b-from":ee()}],"mask-image-b-to-pos":[{"mask-b-to":ee()}],"mask-image-b-from-color":[{"mask-b-from":W()}],"mask-image-b-to-color":[{"mask-b-to":W()}],"mask-image-l-from-pos":[{"mask-l-from":ee()}],"mask-image-l-to-pos":[{"mask-l-to":ee()}],"mask-image-l-from-color":[{"mask-l-from":W()}],"mask-image-l-to-color":[{"mask-l-to":W()}],"mask-image-x-from-pos":[{"mask-x-from":ee()}],"mask-image-x-to-pos":[{"mask-x-to":ee()}],"mask-image-x-from-color":[{"mask-x-from":W()}],"mask-image-x-to-color":[{"mask-x-to":W()}],"mask-image-y-from-pos":[{"mask-y-from":ee()}],"mask-image-y-to-pos":[{"mask-y-to":ee()}],"mask-image-y-from-color":[{"mask-y-from":W()}],"mask-image-y-to-color":[{"mask-y-to":W()}],"mask-image-radial":[{"mask-radial":[pt,ft]}],"mask-image-radial-from-pos":[{"mask-radial-from":ee()}],"mask-image-radial-to-pos":[{"mask-radial-to":ee()}],"mask-image-radial-from-color":[{"mask-radial-from":W()}],"mask-image-radial-to-color":[{"mask-radial-to":W()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":A()}],"mask-image-conic-pos":[{"mask-conic":[Wt]}],"mask-image-conic-from-pos":[{"mask-conic-from":ee()}],"mask-image-conic-to-pos":[{"mask-conic-to":ee()}],"mask-image-conic-from-color":[{"mask-conic-from":W()}],"mask-image-conic-to-color":[{"mask-conic-to":W()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:ie()}],"mask-repeat":[{mask:se()}],"mask-size":[{mask:ye()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",pt,ft]}],filter:[{filter:["","none",pt,ft]}],blur:[{blur:de()}],brightness:[{brightness:[Wt,pt,ft]}],contrast:[{contrast:[Wt,pt,ft]}],"drop-shadow":[{"drop-shadow":["","none",m,Mp,Ap]}],"drop-shadow-color":[{"drop-shadow":W()}],grayscale:[{grayscale:["",Wt,pt,ft]}],"hue-rotate":[{"hue-rotate":[Wt,pt,ft]}],invert:[{invert:["",Wt,pt,ft]}],saturate:[{saturate:[Wt,pt,ft]}],sepia:[{sepia:["",Wt,pt,ft]}],"backdrop-filter":[{"backdrop-filter":["","none",pt,ft]}],"backdrop-blur":[{"backdrop-blur":de()}],"backdrop-brightness":[{"backdrop-brightness":[Wt,pt,ft]}],"backdrop-contrast":[{"backdrop-contrast":[Wt,pt,ft]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Wt,pt,ft]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Wt,pt,ft]}],"backdrop-invert":[{"backdrop-invert":["",Wt,pt,ft]}],"backdrop-opacity":[{"backdrop-opacity":[Wt,pt,ft]}],"backdrop-saturate":[{"backdrop-saturate":[Wt,pt,ft]}],"backdrop-sepia":[{"backdrop-sepia":["",Wt,pt,ft]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":R()}],"border-spacing-x":[{"border-spacing-x":R()}],"border-spacing-y":[{"border-spacing-y":R()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",pt,ft]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Wt,"initial",pt,ft]}],ease:[{ease:["linear","initial",b,pt,ft]}],delay:[{delay:[Wt,pt,ft]}],animate:[{animate:["none",S,pt,ft]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[g,pt,ft]}],"perspective-origin":[{"perspective-origin":E()}],rotate:[{rotate:be()}],"rotate-x":[{"rotate-x":be()}],"rotate-y":[{"rotate-y":be()}],"rotate-z":[{"rotate-z":be()}],scale:[{scale:oe()}],"scale-x":[{"scale-x":oe()}],"scale-y":[{"scale-y":oe()}],"scale-z":[{"scale-z":oe()}],"scale-3d":["scale-3d"],skew:[{skew:ge()}],"skew-x":[{"skew-x":ge()}],"skew-y":[{"skew-y":ge()}],transform:[{transform:[pt,ft,"","none","gpu","cpu"]}],"transform-origin":[{origin:E()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Se()}],"translate-x":[{"translate-x":Se()}],"translate-y":[{"translate-y":Se()}],"translate-z":[{"translate-z":Se()}],"translate-none":["translate-none"],accent:[{accent:W()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:W()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",pt,ft]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":R()}],"scroll-mx":[{"scroll-mx":R()}],"scroll-my":[{"scroll-my":R()}],"scroll-ms":[{"scroll-ms":R()}],"scroll-me":[{"scroll-me":R()}],"scroll-mt":[{"scroll-mt":R()}],"scroll-mr":[{"scroll-mr":R()}],"scroll-mb":[{"scroll-mb":R()}],"scroll-ml":[{"scroll-ml":R()}],"scroll-p":[{"scroll-p":R()}],"scroll-px":[{"scroll-px":R()}],"scroll-py":[{"scroll-py":R()}],"scroll-ps":[{"scroll-ps":R()}],"scroll-pe":[{"scroll-pe":R()}],"scroll-pt":[{"scroll-pt":R()}],"scroll-pr":[{"scroll-pr":R()}],"scroll-pb":[{"scroll-pb":R()}],"scroll-pl":[{"scroll-pl":R()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",pt,ft]}],fill:[{fill:["none",...W()]}],"stroke-w":[{stroke:[Wt,oh,_a,Ay]}],stroke:[{stroke:["none",...W()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},Hse=o5(A5);var ya={},My={},Ty={},M1;function er(){return M1||(M1=1,(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.Log=n.LogLevel=void 0;const e=" DEBUG ",t="  INFO ",i="  WARN ",r=" ERROR ";function s(a){return a.unshift("[Statsig]"),a}n.LogLevel={None:0,Error:1,Warn:2,Info:3,Debug:4};class o{static info(...l){o.level>=n.LogLevel.Info&&console.info(t,...s(l))}static debug(...l){o.level>=n.LogLevel.Debug&&console.debug(e,...s(l))}static warn(...l){o.level>=n.LogLevel.Warn&&console.warn(i,...s(l))}static error(...l){o.level>=n.LogLevel.Error&&console.error(r,...s(l))}}n.Log=o,o.level=n.LogLevel.Warn})(Ty)),Ty}var T1;function jo(){return T1||(T1=1,(function(n){var e,t,i;Object.defineProperty(n,"__esModule",{value:!0}),n._getInstance=n._getStatsigGlobalFlag=n._getStatsigGlobal=void 0;const r=er(),s=()=>{try{return typeof __STATSIG__<"u"?__STATSIG__:f}catch(m){return f}};n._getStatsigGlobal=s;const o=m=>(0,n._getStatsigGlobal)()[m];n._getStatsigGlobalFlag=o;const a=m=>{const v=(0,n._getStatsigGlobal)();return m?v.instances&&v.instances[m]:(v.instances&&Object.keys(v.instances).length>1&&r.Log.warn("Call made to Statsig global instance without an SDK key but there is more than one client instance. If you are using mulitple clients, please specify the SDK key."),v.firstInstance)};n._getInstance=a;const l="__STATSIG__",c=typeof window<"u"?window:{},u=typeof cM<"u"?cM:{},d=typeof globalThis<"u"?globalThis:{},f=(i=(t=(e=c[l])!==null&&e!==void 0?e:u[l])!==null&&t!==void 0?t:d[l])!==null&&i!==void 0?i:{instance:n._getInstance};c[l]=f,u[l]=f,d[l]=f})(My)),My}var Cy={},C1;function Qb(){return C1||(C1=1,(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.Diagnostics=void 0;const e=new Map,t="start",i="end",r="statsig::diagnostics";n.Diagnostics={_getMarkers:c=>e.get(c),_markInitOverallStart:c=>{a(c,s({},t,"overall"))},_markInitOverallEnd:(c,u,d)=>{a(c,s({success:u,error:u?void 0:{name:"InitializeError",message:"Failed to initialize"},evaluationDetails:d},i,"overall"))},_markInitNetworkReqStart:(c,u)=>{a(c,s(u,t,"initialize","network_request"))},_markInitNetworkReqEnd:(c,u)=>{a(c,s(u,i,"initialize","network_request"))},_markInitProcessStart:c=>{a(c,s({},t,"initialize","process"))},_markInitProcessEnd:(c,u)=>{a(c,s(u,i,"initialize","process"))},_clearMarkers:c=>{e.delete(c)},_formatError(c){if(c&&typeof c=="object")return{code:l(c,"code"),name:l(c,"name"),message:l(c,"message")}},_getDiagnosticsData(c,u,d,f){var m;return{success:(c==null?void 0:c.ok)===!0,statusCode:c==null?void 0:c.status,sdkRegion:(m=c==null?void 0:c.headers)===null||m===void 0?void 0:m.get("x-statsig-region"),isDelta:d.includes('"is_delta":true')===!0?!0:void 0,attempt:u,error:n.Diagnostics._formatError(f)}},_enqueueDiagnosticsEvent(c,u,d,f){const m=n.Diagnostics._getMarkers(d);if(m==null||m.length<=0)return-1;const v=m[m.length-1].timestamp-m[0].timestamp;n.Diagnostics._clearMarkers(d);const g=o(c,{context:"initialize",markers:m.slice(),statsigOptions:f});return u.enqueue(g),v}};function s(c,u,d,f){return Object.assign({key:d,action:u,step:f,timestamp:Date.now()},c)}function o(c,u){return{eventName:r,user:c,value:null,metadata:u,time:Date.now()}}function a(c,u){var d;const f=(d=e.get(c))!==null&&d!==void 0?d:[];f.push(u),e.set(c,f)}function l(c,u){if(u in c)return c[u]}})(Cy)),Cy}var ba={},wa={},Ry={},Sa={},R1;function IS(){if(R1)return Sa;R1=1,Object.defineProperty(Sa,"__esModule",{value:!0}),Sa._isTypeMatch=Sa._typeOf=void 0;function n(t){return Array.isArray(t)?"array":typeof t}Sa._typeOf=n;function e(t,i){const r=s=>Array.isArray(s)?"array":s===null?"null":typeof s;return r(t)===r(i)}return Sa._isTypeMatch=e,Sa}var I1;function Mu(){return I1||(I1=1,(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n._getSortedObject=n._DJB2Object=n._DJB2=void 0;const e=IS(),t=s=>{let o=0;for(let a=0;a<s.length;a++){const l=s.charCodeAt(a);o=(o<<5)-o+l,o=o&o}return String(o>>>0)};n._DJB2=t;const i=(s,o)=>(0,n._DJB2)(JSON.stringify((0,n._getSortedObject)(s,o)));n._DJB2Object=i;const r=(s,o)=>{if(s==null)return null;const a=Object.keys(s).sort(),l={};return a.forEach(c=>{const u=s[c];if(o===0||(0,e._typeOf)(u)!=="object"){l[c]=u;return}l[c]=(0,n._getSortedObject)(u,o!=null?o-1:o)}),l};n._getSortedObject=r})(Ry)),Ry}var D1;function fv(){if(D1)return wa;D1=1,Object.defineProperty(wa,"__esModule",{value:!0}),wa._getStorageKey=wa._getUserStorageKey=void 0;const n=Mu();function e(i,r,s){var o;if(s)return s(i,r);const a=r&&r.customIDs?r.customIDs:{},l=["uid:".concat((o=r==null?void 0:r.userID)!==null&&o!==void 0?o:""),"cids:".concat(Object.keys(a).sort((c,u)=>c.localeCompare(u)).map(c=>"".concat(c,"-").concat(a[c])).join(",")),"k:".concat(i)];return(0,n._DJB2)(l.join("|"))}wa._getUserStorageKey=e;function t(i,r,s){return r?e(i,r,s):(0,n._DJB2)("k:".concat(i))}return wa._getStorageKey=t,wa}var Iy={},P1;function pv(){return P1||(P1=1,(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.NetworkParam=n.NetworkDefault=n.Endpoint=void 0,n.Endpoint={_initialize:"initialize",_rgstr:"rgstr",_download_config_specs:"download_config_specs"},n.NetworkDefault={[n.Endpoint._rgstr]:"https://prodregistryv2.org/v1",[n.Endpoint._initialize]:"https://featureassets.org/v1",[n.Endpoint._download_config_specs]:"https://api.statsigcdn.com/v1"},n.NetworkParam={EventCount:"ec",SdkKey:"k",SdkType:"st",SdkVersion:"sv",Time:"t",SessionID:"sid",StatsigEncoded:"se",IsGzipped:"gz"}})(Iy)),Iy}var Dy={},O1;function Bl(){return O1||(O1=1,(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n._getUnloadEvent=n._getCurrentPageUrlSafe=n._addDocumentEventListenerSafe=n._addWindowEventListenerSafe=n._isServerEnv=n._getDocumentSafe=n._getWindowSafe=void 0;const e=()=>typeof window<"u"?window:null;n._getWindowSafe=e;const t=()=>{var l;const c=(0,n._getWindowSafe)();return(l=c==null?void 0:c.document)!==null&&l!==void 0?l:null};n._getDocumentSafe=t;const i=()=>{if((0,n._getDocumentSafe)()!==null)return!1;const l=typeof process<"u"&&process.versions!=null&&process.versions.node!=null;return typeof EdgeRuntime=="string"||l};n._isServerEnv=i;const r=(l,c)=>{const u=(0,n._getWindowSafe)();typeof(u==null?void 0:u.addEventListener)=="function"&&u.addEventListener(l,c)};n._addWindowEventListenerSafe=r;const s=(l,c)=>{const u=(0,n._getDocumentSafe)();typeof(u==null?void 0:u.addEventListener)=="function"&&u.addEventListener(l,c)};n._addDocumentEventListenerSafe=s;const o=()=>{var l;try{return(l=(0,n._getWindowSafe)())===null||l===void 0?void 0:l.location.href.split(/[?#]/)[0]}catch(c){return}};n._getCurrentPageUrlSafe=o;const a=()=>{const l=(0,n._getWindowSafe)();return l&&"onpagehide"in l?"pagehide":"beforeunload"};n._getUnloadEvent=a})(Dy)),Dy}var _r={},L1;function dO(){if(L1)return _r;L1=1,Object.defineProperty(_r,"__esModule",{value:!0}),_r._createLayerParameterExposure=_r._createConfigExposure=_r._mapExposures=_r._createGateExposure=_r._isExposureEvent=void 0;const n="statsig::config_exposure",e="statsig::gate_exposure",t="statsig::layer_exposure",i=(u,d,f,m,v)=>(f.bootstrapMetadata&&(m.bootstrapMetadata=f.bootstrapMetadata),{eventName:u,user:d,value:null,metadata:c(f,m),secondaryExposures:v,time:Date.now()}),r=({eventName:u})=>u===e||u===n||u===t;_r._isExposureEvent=r;const s=(u,d,f)=>{var m,v,g;const y={gate:d.name,gateValue:String(d.value),ruleID:d.ruleID};return((m=d.__evaluation)===null||m===void 0?void 0:m.version)!=null&&(y.configVersion=d.__evaluation.version),i(e,u,d.details,y,o((g=(v=d.__evaluation)===null||v===void 0?void 0:v.secondary_exposures)!==null&&g!==void 0?g:[],f))};_r._createGateExposure=s;function o(u,d){return u.map(f=>typeof f=="string"?(d!=null?d:{})[f]:f).filter(f=>f!=null)}_r._mapExposures=o;const a=(u,d,f)=>{var m,v,g,y;const b={config:d.name,ruleID:d.ruleID};return((m=d.__evaluation)===null||m===void 0?void 0:m.version)!=null&&(b.configVersion=d.__evaluation.version),((v=d.__evaluation)===null||v===void 0?void 0:v.passed)!=null&&(b.rulePassed=String(d.__evaluation.passed)),i(n,u,d.details,b,o((y=(g=d.__evaluation)===null||g===void 0?void 0:g.secondary_exposures)!==null&&y!==void 0?y:[],f))};_r._createConfigExposure=a;const l=(u,d,f,m)=>{var v,g,y,b,S,x,A;const E=d.__evaluation,M=((v=E==null?void 0:E.explicit_parameters)===null||v===void 0?void 0:v.includes(f))===!0;let I="",R=(g=E==null?void 0:E.undelegated_secondary_exposures)!==null&&g!==void 0?g:[];M&&(I=(y=E.allocated_experiment_name)!==null&&y!==void 0?y:"",R=(b=E.secondary_exposures)!==null&&b!==void 0?b:[]);const C=(S=d.__evaluation)===null||S===void 0?void 0:S.parameter_rule_ids,D={config:d.name,parameterName:f,ruleID:(x=C==null?void 0:C[f])!==null&&x!==void 0?x:d.ruleID,allocatedExperiment:I,isExplicitParameter:String(M)};return((A=d.__evaluation)===null||A===void 0?void 0:A.version)!=null&&(D.configVersion=d.__evaluation.version),i(t,u,d.details,D,o(R,m))};_r._createLayerParameterExposure=l;const c=(u,d)=>(d.reason=u.reason,u.lcut&&(d.lcut=String(u.lcut)),u.receivedAt&&(d.receivedAt=String(u.receivedAt)),d);return _r}var xa={},k1;function mv(){return k1||(k1=1,Object.defineProperty(xa,"__esModule",{value:!0}),xa.LoggingEnabledOption=xa.LogEventCompressionMode=void 0,xa.LogEventCompressionMode={Disabled:"d",Enabled:"e",Forced:"f"},xa.LoggingEnabledOption={disabled:"disabled",browserOnly:"browser-only",always:"always"}),xa}var Py={},U1;function Jo(){return U1||(U1=1,(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n._setObjectInStorage=n._getObjectFromStorage=n.Storage=void 0;const e=er(),t=Bl(),i={},r={isReady:()=>!0,isReadyResolver:()=>null,getProviderName:()=>"InMemory",getItem:d=>i[d]?i[d]:null,setItem:(d,f)=>{i[d]=f},removeItem:d=>{delete i[d]},getAllKeys:()=>Object.keys(i)};let s=null;try{const d=(0,t._getWindowSafe)();d&&d.localStorage&&typeof d.localStorage.getItem=="function"&&(s={isReady:()=>!0,isReadyResolver:()=>null,getProviderName:()=>"LocalStorage",getItem:f=>d.localStorage.getItem(f),setItem:(f,m)=>d.localStorage.setItem(f,m),removeItem:f=>d.localStorage.removeItem(f),getAllKeys:()=>Object.keys(d.localStorage)})}catch(d){e.Log.warn("Failed to setup localStorageProvider.")}let o=s!=null?s:r,a=o;function l(d){try{return d()}catch(f){if(f instanceof Error&&f.name==="SecurityError")return n.Storage._setProvider(r),null;if(f instanceof Error&&f.name==="QuotaExceededError"){const v=n.Storage.getAllKeys().filter(g=>g.startsWith("statsig."));f.message="".concat(f.message,". Statsig Keys: ").concat(v.length)}throw f}}n.Storage={isReady:()=>a.isReady(),isReadyResolver:()=>a.isReadyResolver(),getProviderName:()=>a.getProviderName(),getItem:d=>l(()=>a.getItem(d)),setItem:(d,f)=>l(()=>a.setItem(d,f)),removeItem:d=>a.removeItem(d),getAllKeys:()=>a.getAllKeys(),_setProvider:d=>{o=d,a=d},_setDisabled:d=>{d?a=r:a=o}};function c(d){const f=n.Storage.getItem(d);return JSON.parse(f!=null?f:"null")}n._getObjectFromStorage=c;function u(d,f){n.Storage.setItem(d,JSON.stringify(f))}n._setObjectInStorage=u})(Py)),Py}var ah={},N1;function fO(){if(N1)return ah;N1=1,Object.defineProperty(ah,"__esModule",{value:!0}),ah.UrlConfiguration=void 0;const n=Mu(),e=pv(),t={[e.Endpoint._initialize]:"i",[e.Endpoint._rgstr]:"e",[e.Endpoint._download_config_specs]:"d"};let i=class{constructor(s,o,a,l){this.customUrl=null,this.fallbackUrls=null,this.endpoint=s,this.endpointDnsKey=t[s],o&&(this.customUrl=o),!o&&a&&(this.customUrl=a.endsWith("/")?"".concat(a).concat(s):"".concat(a,"/").concat(s)),l&&(this.fallbackUrls=l);const c=e.NetworkDefault[s];this.defaultUrl="".concat(c,"/").concat(s)}getUrl(){var s;return(s=this.customUrl)!==null&&s!==void 0?s:this.defaultUrl}getChecksum(){var s;const o=((s=this.fallbackUrls)!==null&&s!==void 0?s:[]).sort().join(",");return(0,n._DJB2)(this.customUrl+o)}};return ah.UrlConfiguration=i,ah}var Oy={},F1;function DS(){return F1||(F1=1,(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n._notifyVisibilityChanged=n._subscribeToVisiblityChanged=n._isUnloading=n._isCurrentlyVisible=void 0;const e=Bl(),t="foreground",i="background",r=[];let s=t,o=!1;const a=()=>s===t;n._isCurrentlyVisible=a;const l=()=>o;n._isUnloading=l;const c=d=>{r.unshift(d)};n._subscribeToVisiblityChanged=c;const u=d=>{d!==s&&(s=d,r.forEach(f=>f(d)))};n._notifyVisibilityChanged=u,(0,e._addWindowEventListenerSafe)("focus",()=>{o=!1,(0,n._notifyVisibilityChanged)(t)}),(0,e._addWindowEventListenerSafe)("blur",()=>(0,n._notifyVisibilityChanged)(i)),(0,e._addDocumentEventListenerSafe)("visibilitychange",()=>{(0,n._notifyVisibilityChanged)(document.visibilityState==="visible"?t:i)}),(0,e._addWindowEventListenerSafe)((0,e._getUnloadEvent)(),()=>{o=!0,(0,n._notifyVisibilityChanged)(i)})})(Oy)),Oy}var B1;function pO(){if(B1)return ba;B1=1;var n=ba&&ba.__awaiter||function(A,E,M,I){function R(C){return C instanceof M?C:new M(function(D){D(C)})}return new(M||(M=Promise))(function(C,D){function L(H){try{G(I.next(H))}catch(J){D(J)}}function z(H){try{G(I.throw(H))}catch(J){D(J)}}function G(H){H.done?C(H.value):R(H.value).then(L,z)}G((I=I.apply(A,E||[])).next())})};Object.defineProperty(ba,"__esModule",{value:!0}),ba.EventLogger=void 0;const e=fv(),t=Mu(),i=er(),r=pv(),s=Bl(),o=dO(),a=mv(),l=Jo(),c=fO(),u=DS(),d=100,f=1e4,m=1e3,v=6e5,g=500,y=200,b={},S={Startup:"startup",GainedFocus:"gained_focus"};let x=class Fc{static _safeFlushAndForget(E){var M;(M=b[E])===null||M===void 0||M.flush().catch(()=>{})}static _safeRetryFailedLogs(E){var M;(M=b[E])===null||M===void 0||M._retryFailedLogs(S.GainedFocus)}constructor(E,M,I,R){var C,D;this._sdkKey=E,this._emitter=M,this._network=I,this._options=R,this._queue=[],this._lastExposureTimeMap={},this._nonExposedChecks={},this._hasRunQuickFlush=!1,this._creationTime=Date.now(),this._loggingEnabled=(C=R==null?void 0:R.loggingEnabled)!==null&&C!==void 0?C:(R==null?void 0:R.disableLogging)===!0?a.LoggingEnabledOption.disabled:a.LoggingEnabledOption.browserOnly,R!=null&&R.loggingEnabled&&R.disableLogging!==void 0&&i.Log.warn("Detected both loggingEnabled and disableLogging options. loggingEnabled takes precedence - please remove disableLogging."),this._maxQueueSize=(D=R==null?void 0:R.loggingBufferMaxSize)!==null&&D!==void 0?D:d;const L=R==null?void 0:R.networkConfig;this._logEventUrlConfig=new c.UrlConfiguration(r.Endpoint._rgstr,L==null?void 0:L.logEventUrl,L==null?void 0:L.api,L==null?void 0:L.logEventFallbackUrls)}setLogEventCompressionMode(E){this._network.setLogEventCompressionMode(E)}setLoggingEnabled(E){if(this._loggingEnabled==="disabled"&&E!=="disabled"){const M=this._getStorageKey(),I=(0,l._getObjectFromStorage)(M);I&&this._queue.push(...I),l.Storage.removeItem(M)}this._loggingEnabled=E}enqueue(E){this._shouldLogEvent(E)&&(this._normalizeAndAppendEvent(E),this._quickFlushIfNeeded(),this._queue.length>this._maxQueueSize&&Fc._safeFlushAndForget(this._sdkKey))}incrementNonExposureCount(E){var M;const I=(M=this._nonExposedChecks[E])!==null&&M!==void 0?M:0;this._nonExposedChecks[E]=I+1}reset(){this.flush().catch(()=>{}),this._lastExposureTimeMap={}}start(){var E;const M=(0,s._isServerEnv)();M&&((E=this._options)===null||E===void 0?void 0:E.loggingEnabled)!=="always"||(b[this._sdkKey]=this,M||(0,u._subscribeToVisiblityChanged)(I=>{I==="background"?Fc._safeFlushAndForget(this._sdkKey):I==="foreground"&&Fc._safeRetryFailedLogs(this._sdkKey)}),this._retryFailedLogs(S.Startup),this._startBackgroundFlushInterval())}stop(){return n(this,void 0,void 0,function*(){this._flushIntervalId&&(clearInterval(this._flushIntervalId),this._flushIntervalId=null),delete b[this._sdkKey],yield this.flush()})}flush(){return n(this,void 0,void 0,function*(){if(this._appendAndResetNonExposedChecks(),this._queue.length===0)return;const E=this._queue;this._queue=[],yield this._sendEvents(E)})}_quickFlushIfNeeded(){this._hasRunQuickFlush||(this._hasRunQuickFlush=!0,!(Date.now()-this._creationTime>y)&&setTimeout(()=>Fc._safeFlushAndForget(this._sdkKey),y))}_shouldLogEvent(E){var M;if(((M=this._options)===null||M===void 0?void 0:M.loggingEnabled)!=="always"&&(0,s._isServerEnv)())return!1;if(!(0,o._isExposureEvent)(E))return!0;const I=E.user?E.user:{statsigEnvironment:void 0},R=(0,e._getUserStorageKey)(this._sdkKey,I),C=E.metadata?E.metadata:{},D=[E.eventName,R,C.gate,C.config,C.ruleID,C.allocatedExperiment,C.parameterName,String(C.isExplicitParameter),C.reason].join("|"),L=this._lastExposureTimeMap[D],z=Date.now();return L&&z-L<v?!1:(Object.keys(this._lastExposureTimeMap).length>m&&(this._lastExposureTimeMap={}),this._lastExposureTimeMap[D]=z,!0)}_sendEvents(E){return n(this,void 0,void 0,function*(){var M,I;if(this._loggingEnabled==="disabled")return this._saveFailedLogsToStorage(E),!1;try{const C=(0,u._isUnloading)()&&this._network.isBeaconSupported()&&((I=(M=this._options)===null||M===void 0?void 0:M.networkConfig)===null||I===void 0?void 0:I.networkOverrideFunc)==null;return this._emitter({name:"pre_logs_flushed",events:E}),(C?this._sendEventsViaBeacon(E):yield this._sendEventsViaPost(E)).success?(this._emitter({name:"logs_flushed",events:E}),!0):(i.Log.warn("Failed to flush events."),this._saveFailedLogsToStorage(E),!1)}catch(R){return i.Log.warn("Failed to flush events."),!1}})}_sendEventsViaPost(E){return n(this,void 0,void 0,function*(){var M;const I=yield this._network.post(this._getRequestData(E)),R=(M=I==null?void 0:I.code)!==null&&M!==void 0?M:-1;return{success:R>=200&&R<300}})}_sendEventsViaBeacon(E){return{success:this._network.beacon(this._getRequestData(E))}}_getRequestData(E){return{sdkKey:this._sdkKey,data:{events:E},urlConfig:this._logEventUrlConfig,retries:3,isCompressable:!0,params:{[r.NetworkParam.EventCount]:String(E.length)},credentials:"same-origin"}}_saveFailedLogsToStorage(E){for(;E.length>g;)E.shift();const M=this._getStorageKey();try{const I=this._getFailedLogsFromStorage(M);(0,l._setObjectInStorage)(M,[...I,...E])}catch(I){i.Log.warn("Unable to save failed logs to storage")}}_getFailedLogsFromStorage(E){let M=[];try{const I=(0,l._getObjectFromStorage)(E);return Array.isArray(I)&&(M=I),M}catch(I){return[]}}_retryFailedLogs(E){const M=this._getStorageKey();n(this,void 0,void 0,function*(){l.Storage.isReady()||(yield l.Storage.isReadyResolver());const I=(0,l._getObjectFromStorage)(M);if(!I)return;E===S.Startup&&l.Storage.removeItem(M),(yield this._sendEvents(I))&&E===S.GainedFocus&&l.Storage.removeItem(M)}).catch(()=>{i.Log.warn("Failed to flush stored logs")})}_getStorageKey(){return"statsig.failed_logs.".concat((0,t._DJB2)(this._sdkKey))}_normalizeAndAppendEvent(E){E.user&&(E.user=Object.assign({},E.user),delete E.user.privateAttributes);const M={},I=this._getCurrentPageUrl();I&&(M.statsigMetadata={currentPage:I});const R=Object.assign(Object.assign({},E),M);i.Log.debug("Enqueued Event:",R),this._queue.push(R)}_appendAndResetNonExposedChecks(){Object.keys(this._nonExposedChecks).length!==0&&(this._normalizeAndAppendEvent({eventName:"statsig::non_exposed_checks",user:null,time:Date.now(),metadata:{checks:Object.assign({},this._nonExposedChecks)}}),this._nonExposedChecks={})}_getCurrentPageUrl(){var E;if(((E=this._options)===null||E===void 0?void 0:E.includeCurrentPageUrlWithEvents)!==!1)return(0,s._getCurrentPageUrlSafe)()}_startBackgroundFlushInterval(){var E,M;const I=(M=(E=this._options)===null||E===void 0?void 0:E.loggingIntervalMs)!==null&&M!==void 0?M:f,R=setInterval(()=>{const C=b[this._sdkKey];!C||C._flushIntervalId!==R?clearInterval(R):Fc._safeFlushAndForget(this._sdkKey)},I);this._flushIntervalId=R}};return ba.EventLogger=x,ba}var Ly={},z1;function og(){return z1||(z1=1,(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.StatsigMetadataProvider=n.SDK_VERSION=void 0,n.SDK_VERSION="3.26.0";let e={sdkVersion:n.SDK_VERSION,sdkType:"js-mono"};n.StatsigMetadataProvider={get:()=>e,add:t=>{e=Object.assign(Object.assign({},e),t)}}})(Ly)),Ly}var ky={},H1;function M5(){return H1||(H1=1,Object.defineProperty(ky,"__esModule",{value:!0})),ky}var Ws={},Ea={},lh={},G1;function PS(){if(G1)return lh;G1=1,Object.defineProperty(lh,"__esModule",{value:!0}),lh.getUUID=void 0;function n(){if(typeof crypto<"u"&&typeof crypto.randomUUID=="function")return crypto.randomUUID();let e=new Date().getTime(),t=typeof performance<"u"&&performance.now&&performance.now()*1e3||0;const i="89ab"[Math.floor(Math.random()*4)];return"xxxxxxxx-xxxx-4xxx-".concat(i,"xxx-xxxxxxxxxxxx").replace(/[xy]/g,r=>{let s=Math.random()*16;return e>0?(s=(e+s)%16|0,e=Math.floor(e/16)):(s=(t+s)%16|0,t=Math.floor(t/16)),(r==="x"?s:s&7|8).toString(16)})}return lh.getUUID=n,lh}var V1;function gv(){if(V1)return Ea;V1=1,Object.defineProperty(Ea,"__esModule",{value:!0}),Ea.getCookieName=Ea.StableID=void 0;const n=fv(),e=er(),t=Bl(),i=Jo(),r=PS(),s={},o={},a={};Ea.StableID={cookiesEnabled:!1,randomID:Math.random().toString(36),get:v=>{if(a[v])return null;if(s[v]!=null)return s[v];let g=null;return g=d(v),g!=null?(s[v]=g,c(g,v),g):(g=u(v),g==null&&(g=(0,r.getUUID)()),c(g,v),f(g,v),s[v]=g,g)},setOverride:(v,g)=>{s[g]=v,c(v,g),f(v,g)},_setCookiesEnabled:(v,g)=>{o[v]=g},_setDisabled:(v,g)=>{a[v]=g}};function l(v){return"statsig.stable_id.".concat((0,n._getStorageKey)(v))}function c(v,g){const y=l(g);try{(0,i._setObjectInStorage)(y,v)}catch(b){e.Log.warn("Failed to save StableID to storage")}}function u(v){const g=l(v);return(0,i._getObjectFromStorage)(g)}function d(v){if(!o[v]||(0,t._getDocumentSafe)()==null)return null;const g=document.cookie.split(";");for(const y of g){const[b,S]=y.trim().split("=");if(b===m(v))return decodeURIComponent(S)}return null}function f(v,g){if(!o[g]||(0,t._getDocumentSafe)()==null)return;const y=new Date;y.setFullYear(y.getFullYear()+1),document.cookie="".concat(m(g),"=").concat(encodeURIComponent(v),"; expires=").concat(y.toUTCString(),"; path=/")}function m(v){return"statsig.stable_id.".concat((0,n._getStorageKey)(v))}return Ea.getCookieName=m,Ea}var Aa={},W1;function mO(){if(W1)return Aa;W1=1,Object.defineProperty(Aa,"__esModule",{value:!0}),Aa._getFullUserHash=Aa._normalizeUser=void 0;const n=Mu(),e=er();function t(r,s,o){try{const a=JSON.parse(JSON.stringify(r));return s!=null&&s.environment!=null?a.statsigEnvironment=s.environment:o!=null&&(a.statsigEnvironment={tier:o}),a}catch(a){return e.Log.error("Failed to JSON.stringify user"),{statsigEnvironment:void 0}}}Aa._normalizeUser=t;function i(r){return r?(0,n._DJB2Object)(r):null}return Aa._getFullUserHash=i,Aa}var ch={},j1;function gO(){if(j1)return ch;j1=1,Object.defineProperty(ch,"__esModule",{value:!0}),ch._typedJsonParse=void 0;const n=er();function e(t,i,r){try{const s=JSON.parse(t);if(s&&typeof s=="object"&&i in s)return s}catch(s){}return n.Log.error("Failed to parse ".concat(r)),null}return ch._typedJsonParse=e,ch}var q1;function T5(){if(q1)return Ws;q1=1;var n=Ws&&Ws.__awaiter||function(f,m,v,g){function y(b){return b instanceof v?b:new v(function(S){S(b)})}return new(v||(v=Promise))(function(b,S){function x(M){try{E(g.next(M))}catch(I){S(I)}}function A(M){try{E(g.throw(M))}catch(I){S(I)}}function E(M){M.done?b(M.value):y(M.value).then(x,A)}E((g=g.apply(f,m||[])).next())})};Object.defineProperty(Ws,"__esModule",{value:!0}),Ws._makeDataAdapterResult=Ws.DataAdapterCore=void 0;const e=er(),t=gv(),i=mO(),r=Jo(),s=gO(),o=10,a=8;let l=class{constructor(m,v){this._adapterName=m,this._cacheSuffix=v,this._options=null,this._sdkKey=null,this._cacheLimit=o,this._lastModifiedStoreKey="statsig.last_modified_time.".concat(v),this._inMemoryCache=new u}attach(m,v,g){this._sdkKey=m,this._options=v}getDataSync(m){const v=m&&(0,i._normalizeUser)(m,this._options),g=this._getCacheKey(v),y=this._inMemoryCache.get(g,v);if(y&&this._getIsCacheValueValid(y))return y;const b=this._loadFromCache(g);return b&&this._getIsCacheValueValid(b)?(this._inMemoryCache.add(g,b,this._cacheLimit),this._inMemoryCache.get(g,v)):null}setData(m,v){const g=v&&(0,i._normalizeUser)(v,this._options),y=this._getCacheKey(g);this._inMemoryCache.add(y,c("Bootstrap",m,null,g),this._cacheLimit)}_getIsCacheValueValid(m){return m.stableID==null||m.stableID===t.StableID.get(this._getSdkKey())}_getDataAsyncImpl(m,v,g){return n(this,void 0,void 0,function*(){r.Storage.isReady()||(yield r.Storage.isReadyResolver());const y=m!=null?m:this.getDataSync(v),b=[this._fetchAndPrepFromNetwork(y,v,g)];return g!=null&&g.timeoutMs&&b.push(new Promise(S=>setTimeout(S,g.timeoutMs)).then(()=>(e.Log.debug("Fetching latest value timed out"),null))),yield Promise.race(b)})}_prefetchDataImpl(m,v){return n(this,void 0,void 0,function*(){const g=m&&(0,i._normalizeUser)(m,this._options),y=this._getCacheKey(g),b=yield this._getDataAsyncImpl(null,g,v);b&&this._inMemoryCache.add(y,Object.assign(Object.assign({},b),{source:"Prefetch"}),this._cacheLimit)})}_fetchAndPrepFromNetwork(m,v,g){return n(this,void 0,void 0,function*(){var y;const b=(y=m==null?void 0:m.data)!==null&&y!==void 0?y:null,S=m!=null&&this._isCachedResultValidFor204(m,v),x=yield this._fetchFromNetwork(b,v,g,S);if(!x)return e.Log.debug("No response returned for latest value"),null;const A=(0,s._typedJsonParse)(x,"has_updates","Response"),E=this._getSdkKey(),M=t.StableID.get(E);let I=null;if((A==null?void 0:A.has_updates)===!0)I=c("Network",x,M,v);else if(b&&(A==null?void 0:A.has_updates)===!1)I=c("NetworkNotModified",b,M,v);else return null;const R=this._getCacheKey(v);return this._inMemoryCache.add(R,I,this._cacheLimit),this._writeToCache(R,I),I})}_getSdkKey(){return this._sdkKey!=null?this._sdkKey:(e.Log.error("".concat(this._adapterName," is not attached to a Client")),"")}_loadFromCache(m){var v;const g=(v=r.Storage.getItem)===null||v===void 0?void 0:v.call(r.Storage,m);if(g==null)return null;const y=(0,s._typedJsonParse)(g,"source","Cached Result");return y?Object.assign(Object.assign({},y),{source:"Cache"}):null}_writeToCache(m,v){const g=JSON.stringify(v);for(let y=0;y<a;y++)try{r.Storage.setItem(m,g);break}catch(b){if(!(b instanceof Error)||b.name!=="QuotaExceededError"||this._cacheLimit<=1)throw b;this._cacheLimit=Math.ceil(this._cacheLimit/2),this._runLocalStorageCacheEviction(m,this._cacheLimit-1)}this._runLocalStorageCacheEviction(m)}_runLocalStorageCacheEviction(m,v=this._cacheLimit){var g;const y=(g=(0,r._getObjectFromStorage)(this._lastModifiedStoreKey))!==null&&g!==void 0?g:{};y[m]=Date.now();const b=d(y,v);for(const S of b)delete y[S],r.Storage.removeItem(S);(0,r._setObjectInStorage)(this._lastModifiedStoreKey,y)}};Ws.DataAdapterCore=l;function c(f,m,v,g){return{source:f,data:m,receivedAt:Date.now(),stableID:v,fullUserHash:(0,i._getFullUserHash)(g)}}Ws._makeDataAdapterResult=c;class u{constructor(){this._data={}}get(m,v){var g;const y=this._data[m],b=y==null?void 0:y.stableID,S=(g=v==null?void 0:v.customIDs)===null||g===void 0?void 0:g.stableID;return S&&b&&S!==b?(e.Log.warn("'StatsigUser.customIDs.stableID' mismatch"),null):y}add(m,v,g){const y=d(this._data,g-1);for(const b of y)delete this._data[b];this._data[m]=v}merge(m){this._data=Object.assign(Object.assign({},this._data),m)}}function d(f,m){const v=Object.keys(f);return v.length<=m?[]:m===0?v:v.sort((g,y)=>{const b=f[g],S=f[y];return typeof b=="object"&&typeof S=="object"?b.receivedAt-S.receivedAt:b-S}).slice(0,v.length-m)}return Ws}var Uy={},X1;function C5(){return X1||(X1=1,Object.defineProperty(Uy,"__esModule",{value:!0})),Uy}var uh={},hh={},Y1;function OS(){if(Y1)return hh;Y1=1,Object.defineProperty(hh,"__esModule",{value:!0}),hh.SDKType=void 0;const n={};let e;return hh.SDKType={_get:t=>{var i;return((i=n[t])!==null&&i!==void 0?i:"js-mono")+(e!=null?e:"")},_setClientType(t,i){n[t]=i},_setBindingType(t){(!e||e==="-react")&&(e="-"+t)}},hh}var K1;function vO(){return K1||(K1=1,(function(n){var e=uh&&uh.__awaiter||function(d,f,m,v){function g(y){return y instanceof m?y:new m(function(b){b(y)})}return new(m||(m=Promise))(function(y,b){function S(E){try{A(v.next(E))}catch(M){b(M)}}function x(E){try{A(v.throw(E))}catch(M){b(M)}}function A(E){E.done?y(E.value):g(E.value).then(S,x)}A((v=v.apply(d,f||[])).next())})};Object.defineProperty(n,"__esModule",{value:!0}),n.ErrorBoundary=n.EXCEPTION_ENDPOINT=void 0;const t=er(),i=OS(),r=og();n.EXCEPTION_ENDPOINT="https://statsigapi.net/v1/sdk_exception";const s="[Statsig] UnknownError";let o=class{constructor(f,m,v,g){this._sdkKey=f,this._options=m,this._emitter=v,this._lastSeenError=g,this._seen=new Set}wrap(f,m){try{const v=f;c(v).forEach(g=>{const y=v[g];"$EB"in y||(v[g]=(...b)=>this._capture(m?"".concat(m,":").concat(g):g,()=>y.apply(f,b)),v[g].$EB=!0)})}catch(v){this._onError("eb:wrap",v)}}logError(f,m){this._onError(f,m)}getLastSeenErrorAndReset(){const f=this._lastSeenError;return this._lastSeenError=void 0,f!=null?f:null}attachErrorIfNoneExists(f){this._lastSeenError||(this._lastSeenError=a(f))}_capture(f,m){try{const v=m();return v&&v instanceof Promise?v.catch(g=>this._onError(f,g)):v}catch(v){return this._onError(f,v),null}}_onError(f,m){try{t.Log.warn("Caught error in ".concat(f),{error:m}),e(this,void 0,void 0,function*(){var g,y,b,S,x,A,E;const M=m||Error(s),I=M instanceof Error,R=I?M.name:"No Name",C=a(M);if(this._lastSeenError=C,this._seen.has(R))return;if(this._seen.add(R),!((y=(g=this._options)===null||g===void 0?void 0:g.networkConfig)===null||y===void 0)&&y.preventAllNetworkTraffic){(b=this._emitter)===null||b===void 0||b.call(this,{name:"error",error:m,tag:f});return}const D=i.SDKType._get(this._sdkKey),L=r.StatsigMetadataProvider.get(),z=I?M.stack:l(M),G=Object.assign({tag:f,exception:R,info:z,statsigOptions:u(this._options)},Object.assign(Object.assign({},L),{sdkType:D}));yield((A=(x=(S=this._options)===null||S===void 0?void 0:S.networkConfig)===null||x===void 0?void 0:x.networkOverrideFunc)!==null&&A!==void 0?A:fetch)(n.EXCEPTION_ENDPOINT,{method:"POST",headers:{"STATSIG-API-KEY":this._sdkKey,"STATSIG-SDK-TYPE":String(D),"STATSIG-SDK-VERSION":String(L.sdkVersion),"Content-Type":"application/json"},body:JSON.stringify(G)}),(E=this._emitter)===null||E===void 0||E.call(this,{name:"error",error:m,tag:f})}).then(()=>{}).catch(()=>{})}catch(v){}}};n.ErrorBoundary=o;function a(d){return d instanceof Error?d:typeof d=="string"?new Error(d):new Error("An unknown error occurred.")}function l(d){try{return JSON.stringify(d)}catch(f){return s}}function c(d){const f=new Set;let m=Object.getPrototypeOf(d);for(;m&&m!==Object.prototype;)Object.getOwnPropertyNames(m).filter(v=>typeof(m==null?void 0:m[v])=="function").forEach(v=>f.add(v)),m=Object.getPrototypeOf(m);return Array.from(f)}function u(d){if(!d)return{};const f={};return Object.keys(d).forEach(m=>{const v=m,g=d[v];switch(typeof g){case"number":case"bigint":case"boolean":f[String(v)]=g;break;case"string":g.length<50?f[String(v)]=g:f[String(v)]="set";break;case"object":v==="environment"?f.environment=g:v==="networkConfig"?f.networkConfig=g:f[String(v)]=g!=null?"set":"unset";break}}),f}})(uh)),uh}var Ny={},$1;function R5(){return $1||($1=1,Object.defineProperty(Ny,"__esModule",{value:!0})),Ny}var Fy={},J1;function I5(){return J1||(J1=1,Object.defineProperty(Fy,"__esModule",{value:!0})),Fy}var By={},Q1;function D5(){return Q1||(Q1=1,Object.defineProperty(By,"__esModule",{value:!0})),By}var Ma={},Z1;function _O(){if(Z1)return Ma;Z1=1,Object.defineProperty(Ma,"__esModule",{value:!0}),Ma.createMemoKey=Ma.MemoPrefix=void 0,Ma.MemoPrefix={_gate:"g",_dynamicConfig:"c",_experiment:"e",_configList:"cl",_layer:"l",_paramStore:"p"};const n=new Set([]),e=new Set(["userPersistedValues"]);function t(i,r,s){let o="".concat(i,"|").concat(r);if(!s)return o;for(const a of Object.keys(s)){if(e.has(a))return;n.has(a)?o+="|".concat(a,"=true"):o+="|".concat(a,"=").concat(s[a])}return o}return Ma.createMemoKey=t,Ma}var Ta={},js={},Ca={},eT;function P5(){if(eT)return Ca;eT=1;var n=Ca&&Ca.__awaiter||function(a,l,c,u){function d(f){return f instanceof c?f:new c(function(m){m(f)})}return new(c||(c=Promise))(function(f,m){function v(b){try{y(u.next(b))}catch(S){m(S)}}function g(b){try{y(u.throw(b))}catch(S){m(S)}}function y(b){b.done?f(b.value):d(b.value).then(v,g)}y((u=u.apply(a,l||[])).next())})};Object.defineProperty(Ca,"__esModule",{value:!0}),Ca._fetchTxtRecords=void 0;const e=new Uint8Array([0,0,1,0,0,1,0,0,0,0,0,0,13,102,101,97,116,117,114,101,97,115,115,101,116,115,3,111,114,103,0,0,16,0,1]),t="https://cloudflare-dns.com/dns-query",i=["i","e","d"],r=200;function s(a){return n(this,void 0,void 0,function*(){const l=yield a(t,{method:"POST",headers:{"Content-Type":"application/dns-message",Accept:"application/dns-message"},body:e});if(!l.ok){const d=new Error("Failed to fetch TXT records from DNS");throw d.name="DnsTxtFetchError",d}const c=yield l.arrayBuffer(),u=new Uint8Array(c);return o(u)})}Ca._fetchTxtRecords=s;function o(a){const l=a.findIndex((u,d)=>d<r&&String.fromCharCode(u)==="="&&i.includes(String.fromCharCode(a[d-1])));if(l===-1){const u=new Error("Failed to parse TXT records from DNS");throw u.name="DnsTxtParseError",u}let c="";for(let u=l-1;u<a.length;u++)c+=String.fromCharCode(a[u]);return c.split(",")}return Ca}var tT;function O5(){if(tT)return js;tT=1;var n=js&&js.__awaiter||function(m,v,g,y){function b(S){return S instanceof g?S:new g(function(x){x(S)})}return new(g||(g=Promise))(function(S,x){function A(I){try{M(y.next(I))}catch(R){x(R)}}function E(I){try{M(y.throw(I))}catch(R){x(R)}}function M(I){I.done?S(I.value):b(I.value).then(A,E)}M((y=y.apply(m,v||[])).next())})};Object.defineProperty(js,"__esModule",{value:!0}),js._isDomainFailure=js.NetworkFallbackResolver=void 0;const e=P5(),t=Mu(),i=er(),r=Jo(),s=10080*60*1e3,o=14400*1e3;let a=class{constructor(v){var g;this._fallbackInfo=null,this._errorBoundary=null,this._dnsQueryCooldowns={},this._networkOverrideFunc=(g=v.networkConfig)===null||g===void 0?void 0:g.networkOverrideFunc}setErrorBoundary(v){this._errorBoundary=v}tryBumpExpiryTime(v,g){var y;const b=(y=this._fallbackInfo)===null||y===void 0?void 0:y[g.endpoint];b&&(b.expiryTime=Date.now()+s,u(v,Object.assign(Object.assign({},this._fallbackInfo),{[g.endpoint]:b})))}getActiveFallbackUrl(v,g){var y,b;if(g.customUrl!=null&&g.fallbackUrls!=null)return null;let S=this._fallbackInfo;S==null&&(S=(y=d(v))!==null&&y!==void 0?y:{},this._fallbackInfo=S);const x=S[g.endpoint];return!x||Date.now()>((b=x.expiryTime)!==null&&b!==void 0?b:0)||g.getChecksum()!==x.urlConfigChecksum?(delete S[g.endpoint],this._fallbackInfo=S,u(v,this._fallbackInfo),null):x.url?x.url:null}tryFetchUpdatedFallbackInfo(v,g,y,b){return n(this,void 0,void 0,function*(){var S,x;try{if(!l(y,b))return!1;const E=g.customUrl==null&&g.fallbackUrls==null?yield this._tryFetchFallbackUrlsFromNetwork(g):g.fallbackUrls,M=this._pickNewFallbackUrl((S=this._fallbackInfo)===null||S===void 0?void 0:S[g.endpoint],E);return M?(this._updateFallbackInfoWithNewUrl(v,g,M),!0):!1}catch(A){return(x=this._errorBoundary)===null||x===void 0||x.logError("tryFetchUpdatedFallbackInfo",A),!1}})}_updateFallbackInfoWithNewUrl(v,g,y){var b,S,x;const A={urlConfigChecksum:g.getChecksum(),url:y,expiryTime:Date.now()+s,previous:[]},E=g.endpoint,M=(b=this._fallbackInfo)===null||b===void 0?void 0:b[E];M&&A.previous.push(...M.previous),A.previous.length>10&&(A.previous=[]);const I=(x=(S=this._fallbackInfo)===null||S===void 0?void 0:S[E])===null||x===void 0?void 0:x.url;I!=null&&A.previous.push(I),this._fallbackInfo=Object.assign(Object.assign({},this._fallbackInfo),{[E]:A}),u(v,this._fallbackInfo)}_tryFetchFallbackUrlsFromNetwork(v){return n(this,void 0,void 0,function*(){var g;const y=this._dnsQueryCooldowns[v.endpoint];if(y&&Date.now()<y)return null;this._dnsQueryCooldowns[v.endpoint]=Date.now()+o;const b=[],S=yield(0,e._fetchTxtRecords)((g=this._networkOverrideFunc)!==null&&g!==void 0?g:fetch),x=f(v.defaultUrl);for(const A of S){if(!A.startsWith(v.endpointDnsKey+"="))continue;const E=A.split("=");if(E.length>1){let M=E[1];M.endsWith("/")&&(M=M.slice(0,-1)),b.push("https://".concat(M).concat(x))}}return b})}_pickNewFallbackUrl(v,g){var y;if(g==null)return null;const b=new Set((y=v==null?void 0:v.previous)!==null&&y!==void 0?y:[]),S=v==null?void 0:v.url;let x=null;for(const A of g){const E=A.endsWith("/")?A.slice(0,-1):A;if(!b.has(A)&&E!==S){x=E;break}}return x}};js.NetworkFallbackResolver=a;function l(m,v){var g;const y=(g=m==null?void 0:m.toLowerCase())!==null&&g!==void 0?g:"";return v||y.includes("uncaught exception")||y.includes("failed to fetch")||y.includes("networkerror when attempting to fetch resource")}js._isDomainFailure=l;function c(m){return"statsig.network_fallback.".concat((0,t._DJB2)(m))}function u(m,v){const g=c(m);if(!v||Object.keys(v).length===0){r.Storage.removeItem(g);return}r.Storage.setItem(g,JSON.stringify(v))}function d(m){const v=c(m),g=r.Storage.getItem(v);if(!g)return null;try{return JSON.parse(g)}catch(y){return i.Log.error("Failed to parse FallbackInfo"),null}}function f(m){try{return new URL(m).pathname}catch(v){return null}}return js}var dh={},nT;function yO(){if(nT)return dh;nT=1,Object.defineProperty(dh,"__esModule",{value:!0}),dh.SDKFlags=void 0;const n={};return dh.SDKFlags={setFlags:(e,t)=>{n[e]=t},get:(e,t)=>{var i,r;return(r=(i=n[e])===null||i===void 0?void 0:i[t])!==null&&r!==void 0?r:!1}},dh}var zy={},iT;function LS(){return iT||(iT=1,(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.StatsigSession=n.SessionID=void 0;const e=jo(),t=fv(),i=er(),r=Jo(),s=PS(),o=1800*1e3,a=14400*1e3,l={};n.SessionID={get:S=>n.StatsigSession.get(S).data.sessionID},n.StatsigSession={get:S=>{l[S]==null&&(l[S]=c(S));const x=l[S];return d(x)},overrideInitialSessionID:(S,x)=>{l[x]=u(S,x)}};function c(S){let x=b(S);const A=Date.now();return x||(x={sessionID:(0,s.getUUID)(),startTime:A,lastUpdate:A}),{data:x,sdkKey:S}}function u(S,x){const A=Date.now();return{data:{sessionID:S,startTime:A,lastUpdate:A},sdkKey:x}}function d(S){const x=Date.now(),A=S.data,E=S.sdkKey;if(m(A)||v(A)){A.sessionID=(0,s.getUUID)(),A.startTime=x;const I=__STATSIG__==null?void 0:__STATSIG__.instance(E);I&&I.$emt({name:"session_expired"})}A.lastUpdate=x,y(A,S.sdkKey),clearTimeout(S.idleTimeoutID),clearTimeout(S.ageTimeoutID);const M=x-A.startTime;return S.idleTimeoutID=f(E,o),S.ageTimeoutID=f(E,a-M),S}function f(S,x){return setTimeout(()=>{var A;const E=(A=(0,e._getStatsigGlobal)())===null||A===void 0?void 0:A.instance(S);E&&E.$emt({name:"session_expired"})},x)}function m({lastUpdate:S}){return Date.now()-S>o}function v({startTime:S}){return Date.now()-S>a}function g(S){return"statsig.session_id.".concat((0,t._getStorageKey)(S))}function y(S,x){const A=g(x);try{(0,r._setObjectInStorage)(A,S)}catch(E){i.Log.warn("Failed to save SessionID")}}function b(S){const x=g(S);return(0,r._getObjectFromStorage)(x)}})(zy)),zy}var fh={},rT;function bO(){return rT||(rT=1,Object.defineProperty(fh,"__esModule",{value:!0}),fh.ErrorTag=void 0,fh.ErrorTag={NetworkError:"NetworkError"}),fh}var sT;function L5(){if(sT)return Ta;sT=1;var n=Ta&&Ta.__awaiter||function(J,k,X,W){function ie(se){return se instanceof X?se:new X(function(ye){ye(se)})}return new(X||(X=Promise))(function(se,ye){function Ne(he){try{fe(W.next(he))}catch(le){ye(le)}}function He(he){try{fe(W.throw(he))}catch(le){ye(le)}}function fe(he){he.done?se(he.value):ie(he.value).then(Ne,He)}fe((W=W.apply(J,k||[])).next())})};Object.defineProperty(Ta,"__esModule",{value:!0}),Ta.NetworkCore=void 0,jo();const e=jo(),t=Qb(),i=er(),r=pv(),s=O5(),o=yO(),a=OS(),l=Bl(),c=LS(),u=gv(),d=bO(),f=og(),m=mv(),v=DS(),g=1e4,y=500,b=3e4,S=1e3,x=50,A=x/S,E=new Set([408,500,502,503,504,522,524,599]);let M=class{constructor(k,X){this._emitter=X,this._errorBoundary=null,this._timeout=g,this._netConfig={},this._options={},this._leakyBucket={},this._lastUsedInitUrl=null,k&&(this._options=k),this._options.networkConfig&&(this._netConfig=this._options.networkConfig),this._netConfig.networkTimeoutMs&&(this._timeout=this._netConfig.networkTimeoutMs),this._fallbackResolver=new s.NetworkFallbackResolver(this._options),this.setLogEventCompressionMode(this._getLogEventCompressionMode(k))}setLogEventCompressionMode(k){this._options.logEventCompressionMode=k}setErrorBoundary(k){this._errorBoundary=k,this._errorBoundary.wrap(this),this._errorBoundary.wrap(this._fallbackResolver),this._fallbackResolver.setErrorBoundary(k)}isBeaconSupported(){return typeof navigator<"u"&&typeof navigator.sendBeacon=="function"}getLastUsedInitUrlAndReset(){const k=this._lastUsedInitUrl;return this._lastUsedInitUrl=null,k}beacon(k){if(!I(k))return!1;const X=this._getInternalRequestArgs("POST",k),W=this._getPopulatedURL(X),ie=navigator;return ie.sendBeacon.bind(ie)(W,X.body)}post(k){return n(this,void 0,void 0,function*(){const X=this._getInternalRequestArgs("POST",k);return this._tryEncodeBody(X),yield this._tryToCompressBody(X),this._sendRequest(X)})}get(k){const X=this._getInternalRequestArgs("GET",k);return this._sendRequest(X)}_sendRequest(k){return n(this,void 0,void 0,function*(){var X,W,ie,se;if(!I(k)||this._netConfig.preventAllNetworkTraffic)return null;const{method:ye,body:Ne,retries:He,attempt:fe}=k,he=k.urlConfig.endpoint;if(this._isRateLimited(he))return i.Log.warn("Request to ".concat(he," was blocked because you are making requests too frequently.")),null;const le=fe!=null?fe:1;let ee=!1;const de=this._getPopulatedURL(k);let be=null;const oe=(0,v._isUnloading)();try{const ge={method:ye,body:Ne,headers:Object.assign({},k.headers),priority:k.priority,keepalive:oe};z(k,le);const Se=this._leakyBucket[he];Se&&(Se.lastRequestTime=Date.now(),this._leakyBucket[he]=Se);const q=(X=this._netConfig.networkOverrideFunc)!==null&&X!==void 0?X:fetch;let me;if(be=yield Promise.race([q(de,ge).finally(()=>clearTimeout(me)),new Promise((Re,Ce)=>{me=setTimeout(()=>{ee=!0,Ce(new Error("Timeout of ".concat(this._timeout,"ms expired.")))},this._timeout)})]),!be.ok){const Re=yield be.text().catch(()=>"No Text"),Ce=new Error("NetworkError: ".concat(de," ").concat(Re));throw Ce.name="NetworkError",Ce}const xe=yield be.text();return G(k,be,le,xe),this._fallbackResolver.tryBumpExpiryTime(k.sdkKey,k.urlConfig),{body:xe,code:be.status}}catch(ge){const Se=D(ge),q=L(Se!=null?Se:"",ee);if(G(k,be,le,"",ge),(yield this._fallbackResolver.tryFetchUpdatedFallbackInfo(k.sdkKey,k.urlConfig,Se,q))&&(k.fallbackUrl=this._fallbackResolver.getActiveFallbackUrl(k.sdkKey,k.urlConfig)),!He||le>He||!E.has((W=be==null?void 0:be.status)!==null&&W!==void 0?W:500)){(ie=this._emitter)===null||ie===void 0||ie.call(this,{name:"error",error:ge,tag:d.ErrorTag.NetworkError,requestArgs:k});const xe="A networking error occurred during ".concat(ye," request to ").concat(de,".");return i.Log.error(xe,Se,ge),(se=this._errorBoundary)===null||se===void 0||se.attachErrorIfNoneExists(xe),null}return yield H(le),this._sendRequest(Object.assign(Object.assign({},k),{retries:He,attempt:le+1}))}})}_getLogEventCompressionMode(k){let X=k==null?void 0:k.logEventCompressionMode;return!X&&(k==null?void 0:k.disableCompression)===!0&&(X=m.LogEventCompressionMode.Disabled),X||(X=m.LogEventCompressionMode.Enabled),X}_isRateLimited(k){var X;const W=Date.now(),ie=(X=this._leakyBucket[k])!==null&&X!==void 0?X:{count:0,lastRequestTime:W},se=W-ie.lastRequestTime,ye=Math.floor(se*A);return ie.count=Math.max(0,ie.count-ye),ie.count>=x?!0:(ie.count+=1,ie.lastRequestTime=W,this._leakyBucket[k]=ie,!1)}_getPopulatedURL(k){var X;const W=(X=k.fallbackUrl)!==null&&X!==void 0?X:k.urlConfig.getUrl();(k.urlConfig.endpoint===r.Endpoint._initialize||k.urlConfig.endpoint===r.Endpoint._download_config_specs)&&(this._lastUsedInitUrl=W);const ie=Object.assign({[r.NetworkParam.SdkKey]:k.sdkKey,[r.NetworkParam.SdkType]:a.SDKType._get(k.sdkKey),[r.NetworkParam.SdkVersion]:f.SDK_VERSION,[r.NetworkParam.Time]:String(Date.now()),[r.NetworkParam.SessionID]:c.SessionID.get(k.sdkKey)},k.params),se=Object.keys(ie).map(ye=>"".concat(encodeURIComponent(ye),"=").concat(encodeURIComponent(ie[ye]))).join("&");return"".concat(W).concat(se?"?".concat(se):"")}_tryEncodeBody(k){var X;const W=(0,l._getWindowSafe)(),ie=k.body;if(!(!k.isStatsigEncodable||this._options.disableStatsigEncoding||typeof ie!="string"||(0,e._getStatsigGlobalFlag)("no-encode")!=null||!(W!=null&&W.btoa)))try{k.body=W.btoa(ie).split("").reverse().join(""),k.params=Object.assign(Object.assign({},(X=k.params)!==null&&X!==void 0?X:{}),{[r.NetworkParam.StatsigEncoded]:"1"})}catch(se){i.Log.warn("Request encoding failed for ".concat(k.urlConfig.getUrl()),se)}}_tryToCompressBody(k){return n(this,void 0,void 0,function*(){var X;const W=k.body;if(!(typeof W!="string"||!C(k,this._options)))try{const ie=new TextEncoder().encode(W),se=new CompressionStream("gzip"),ye=se.writable.getWriter();ye.write(ie).catch(i.Log.error),ye.close().catch(i.Log.error);const Ne=se.readable.getReader(),He=[];let fe;for(;!(fe=yield Ne.read()).done;)He.push(fe.value);const he=He.reduce((de,be)=>de+be.length,0),le=new Uint8Array(he);let ee=0;for(const de of He)le.set(de,ee),ee+=de.length;k.body=le,k.params=Object.assign(Object.assign({},(X=k.params)!==null&&X!==void 0?X:{}),{[r.NetworkParam.IsGzipped]:"1"})}catch(ie){i.Log.warn("Request compression failed for ".concat(k.urlConfig.getUrl()),ie)}})}_getInternalRequestArgs(k,X){const W=this._fallbackResolver.getActiveFallbackUrl(X.sdkKey,X.urlConfig),ie=Object.assign(Object.assign({},X),{method:k,fallbackUrl:W});return"data"in X&&R(ie,X.data),ie}};Ta.NetworkCore=M;const I=J=>J.sdkKey?!0:(i.Log.warn("Unable to make request without an SDK key"),!1),R=(J,k)=>{const{sdkKey:X,fallbackUrl:W}=J,ie=u.StableID.get(X),se=c.SessionID.get(X),ye=a.SDKType._get(X);J.body=JSON.stringify(Object.assign(Object.assign({},k),{statsigMetadata:Object.assign(Object.assign({},f.StatsigMetadataProvider.get()),{stableID:ie,sessionID:se,sdkType:ye,fallbackUrl:W})}))};function C(J,k){if(!J.isCompressable||(0,e._getStatsigGlobalFlag)("no-compress")!=null||typeof CompressionStream>"u"||typeof TextEncoder>"u")return!1;const X=J.urlConfig.customUrl!=null||J.urlConfig.fallbackUrls!=null,W=o.SDKFlags.get(J.sdkKey,"enable_log_event_compression")===!0;switch(k.logEventCompressionMode){case m.LogEventCompressionMode.Disabled:return!1;case m.LogEventCompressionMode.Enabled:return!(X&&!W);case m.LogEventCompressionMode.Forced:return!0;default:return!1}}function D(J){return typeof J=="string"?J:J instanceof Error?"".concat(J.name,": ").concat(J.message):"Unknown Error"}function L(J,k){return J.includes("Timeout")||k}function z(J,k){J.urlConfig.endpoint===r.Endpoint._initialize&&t.Diagnostics._markInitNetworkReqStart(J.sdkKey,{attempt:k})}function G(J,k,X,W,ie){J.urlConfig.endpoint===r.Endpoint._initialize&&t.Diagnostics._markInitNetworkReqEnd(J.sdkKey,t.Diagnostics._getDiagnosticsData(k,X,W,ie))}function H(J){return n(this,void 0,void 0,function*(){yield new Promise(k=>setTimeout(k,Math.min(y*(J*J),b)))})}return Ta}var Hy={},oT;function k5(){return oT||(oT=1,Object.defineProperty(Hy,"__esModule",{value:!0})),Hy}var Gy={},aT;function U5(){return aT||(aT=1,Object.defineProperty(Gy,"__esModule",{value:!0})),Gy}var Vy={},lT;function N5(){return lT||(lT=1,(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n._fastApproxSizeOf=void 0;const e=2,t=1,i=(r,s)=>{let o=0;const a=Object.keys(r);for(let l=0;l<a.length;l++){const c=a[l],u=r[c];if(o+=c.length,typeof u=="object"&&u!==null?o+=(0,n._fastApproxSizeOf)(u,s)+e:o+=String(u).length+t,o>=s)return o}return o};n._fastApproxSizeOf=i})(Vy)),Vy}var Ra={},cT;function F5(){if(cT)return Ra;cT=1;var n=Ra&&Ra.__awaiter||function(v,g,y,b){function S(x){return x instanceof y?x:new y(function(A){A(x)})}return new(y||(y=Promise))(function(x,A){function E(R){try{I(b.next(R))}catch(C){A(C)}}function M(R){try{I(b.throw(R))}catch(C){A(C)}}function I(R){R.done?x(R.value):S(R.value).then(E,M)}I((b=b.apply(v,g||[])).next())})};Object.defineProperty(Ra,"__esModule",{value:!0}),Ra.StatsigClientBase=void 0,jo();const e=jo(),t=vO(),i=pO(),r=er(),s=_O(),o=Bl(),a=LS(),l=gv(),c=mv(),u=Jo(),d=3e3;let f=class{constructor(g,y,b,S){var x,A,E,M;this.loadingStatus="Uninitialized",this._initializePromise=null,this._listeners={};const I=this.$emt.bind(this);(S==null?void 0:S.logLevel)!=null&&(r.Log.level=S.logLevel),S!=null&&S.disableStorage&&u.Storage._setDisabled(!0),S!=null&&S.initialSessionID&&a.StatsigSession.overrideInitialSessionID(S.initialSessionID,g),S!=null&&S.storageProvider&&u.Storage._setProvider(S.storageProvider),S!=null&&S.enableCookies&&l.StableID._setCookiesEnabled(g,S.enableCookies),S!=null&&S.disableStableID&&l.StableID._setDisabled(g,!0),this._sdkKey=g,this._options=S!=null?S:{},this._memoCache={},this.overrideAdapter=(x=S==null?void 0:S.overrideAdapter)!==null&&x!==void 0?x:null,this._logger=new i.EventLogger(g,I,b,S),this._errorBoundary=new t.ErrorBoundary(g,S,I),this._errorBoundary.wrap(this),this._errorBoundary.wrap(y),this._errorBoundary.wrap(this._logger),b.setErrorBoundary(this._errorBoundary),this.dataAdapter=y,this.dataAdapter.attach(g,S,b),this.storageProvider=u.Storage,(M=(E=(A=this.overrideAdapter)===null||A===void 0?void 0:A.loadFromStorage)===null||E===void 0?void 0:E.call(A))===null||M===void 0||M.catch(R=>this._errorBoundary.logError("OA::loadFromStorage",R)),this._primeReadyRipcord(),m(g,this)}updateRuntimeOptions(g){g.loggingEnabled?(this._options.loggingEnabled=g.loggingEnabled,this._logger.setLoggingEnabled(g.loggingEnabled)):g.disableLogging!=null&&(this._options.disableLogging=g.disableLogging,this._logger.setLoggingEnabled(g.disableLogging?"disabled":"browser-only")),g.disableStorage!=null&&(this._options.disableStorage=g.disableStorage,u.Storage._setDisabled(g.disableStorage)),g.enableCookies!=null&&(this._options.enableCookies=g.enableCookies,l.StableID._setCookiesEnabled(this._sdkKey,g.enableCookies)),g.logEventCompressionMode?this._logger.setLogEventCompressionMode(g.logEventCompressionMode):g.disableCompression&&this._logger.setLogEventCompressionMode(c.LogEventCompressionMode.Disabled)}flush(){return this._logger.flush()}shutdown(){return n(this,void 0,void 0,function*(){this.$emt({name:"pre_shutdown"}),this._setStatus("Uninitialized",null),this._initializePromise=null,yield this._logger.stop()})}on(g,y){this._listeners[g]||(this._listeners[g]=[]),this._listeners[g].push(y)}off(g,y){if(this._listeners[g]){const b=this._listeners[g].indexOf(y);b!==-1&&this._listeners[g].splice(b,1)}}$on(g,y){y.__isInternal=!0,this.on(g,y)}$emt(g){var y;const b=S=>{try{S(g)}catch(x){if(S.__isInternal===!0){this._errorBoundary.logError("__emit:".concat(g.name),x);return}r.Log.error("An error occurred in a StatsigClientEvent listener. This is not an issue with Statsig.",g)}};this._listeners[g.name]&&this._listeners[g.name].forEach(S=>b(S)),(y=this._listeners["*"])===null||y===void 0||y.forEach(b)}_setStatus(g,y){this.loadingStatus=g,this._memoCache={},this.$emt({name:"values_updated",status:g,values:y})}_enqueueExposure(g,y,b){if((b==null?void 0:b.disableExposureLog)===!0){this._logger.incrementNonExposureCount(g);return}this._logger.enqueue(y)}_memoize(g,y){return(b,S)=>{if(this._options.disableEvaluationMemoization)return y(b,S);const x=(0,s.createMemoKey)(g,b,S);return x?(x in this._memoCache||(Object.keys(this._memoCache).length>=d&&(this._memoCache={}),this._memoCache[x]=y(b,S)),this._memoCache[x]):y(b,S)}}};Ra.StatsigClientBase=f;function m(v,g){var y;if((0,o._isServerEnv)())return;const b=(0,e._getStatsigGlobal)(),S=(y=b.instances)!==null&&y!==void 0?y:{},x=g;S[v]!=null&&r.Log.warn("Creating multiple Statsig clients with the same SDK key can lead to unexpected behavior. Multi-instance support requires different SDK keys."),S[v]=x,b.firstInstance||(b.firstInstance=x),b.instances=S,__STATSIG__=b}return Ra}var ph={},uT;function B5(){return uT||(uT=1,Object.defineProperty(ph,"__esModule",{value:!0}),ph.DataAdapterCachePrefix=void 0,ph.DataAdapterCachePrefix="statsig.cached"),ph}var Wy={},hT;function z5(){return hT||(hT=1,Object.defineProperty(Wy,"__esModule",{value:!0})),Wy}var qi={},dT;function H5(){if(dT)return qi;dT=1,Object.defineProperty(qi,"__esModule",{value:!0}),qi._makeTypedGet=qi._mergeOverride=qi._makeLayer=qi._makeExperiment=qi._makeDynamicConfig=qi._makeFeatureGate=void 0;const n=er(),e=IS();function t(c,u,d,f){var m;return{name:c,details:u,ruleID:(m=d==null?void 0:d.rule_id)!==null&&m!==void 0?m:"",__evaluation:d,value:f}}function i(c,u,d){var f;return Object.assign(Object.assign({},t(c,u,d,(d==null?void 0:d.value)===!0)),{idType:(f=d==null?void 0:d.id_type)!==null&&f!==void 0?f:null})}qi._makeFeatureGate=i;function r(c,u,d){var f;const m=(f=d==null?void 0:d.value)!==null&&f!==void 0?f:{};return Object.assign(Object.assign({},t(c,u,d,m)),{get:l(c,d==null?void 0:d.value)})}qi._makeDynamicConfig=r;function s(c,u,d){var f;const m=r(c,u,d);return Object.assign(Object.assign({},m),{groupName:(f=d==null?void 0:d.group_name)!==null&&f!==void 0?f:null})}qi._makeExperiment=s;function o(c,u,d,f){var m,v;return Object.assign(Object.assign({},t(c,u,d,void 0)),{get:l(c,d==null?void 0:d.value,f),groupName:(m=d==null?void 0:d.group_name)!==null&&m!==void 0?m:null,__value:(v=d==null?void 0:d.value)!==null&&v!==void 0?v:{}})}qi._makeLayer=o;function a(c,u,d,f){return Object.assign(Object.assign(Object.assign({},c),u),{get:l(c.name,d,f)})}qi._mergeOverride=a;function l(c,u,d){return(f,m)=>{var v;const g=(v=u==null?void 0:u[f])!==null&&v!==void 0?v:null;return g==null?m!=null?m:null:m!=null&&!(0,e._isTypeMatch)(g,m)?(n.Log.warn("Parameter type mismatch. '".concat(c,".").concat(f,"' was found to be type '").concat(typeof g,"' but fallback/return type is '").concat(typeof m,"'. See https://docs.statsig.com/client/javascript-sdk/#typed-getters")),m!=null?m:null):(d==null||d(f),g)}}return qi._makeTypedGet=l,qi}var jy={},fT;function G5(){return fT||(fT=1,Object.defineProperty(jy,"__esModule",{value:!0})),jy}var Ia={},pT;function V5(){if(pT)return Ia;pT=1,Object.defineProperty(Ia,"__esModule",{value:!0}),Ia.UPDATE_DETAIL_ERROR_MESSAGES=Ia.createUpdateDetails=void 0;const n=(e,t,i,r,s,o)=>({duration:i,source:t,success:e,error:r,sourceUrl:s,warnings:o});return Ia.createUpdateDetails=n,Ia.UPDATE_DETAIL_ERROR_MESSAGES={NO_NETWORK_DATA:"No data was returned from the network. This may be due to a network timeout if a timeout value was specified in the options or ad blocker error."},Ia}var mT;function Vn(){return mT||(mT=1,(function(n){var e=ya&&ya.__createBinding||(Object.create?(function(c,u,d,f){f===void 0&&(f=d);var m=Object.getOwnPropertyDescriptor(u,d);(!m||("get"in m?!u.__esModule:m.writable||m.configurable))&&(m={enumerable:!0,get:function(){return u[d]}}),Object.defineProperty(c,f,m)}):(function(c,u,d,f){f===void 0&&(f=d),c[f]=u[d]})),t=ya&&ya.__exportStar||function(c,u){for(var d in c)d!=="default"&&!Object.prototype.hasOwnProperty.call(u,d)&&e(u,c,d)};Object.defineProperty(n,"__esModule",{value:!0}),n.Storage=n.Log=n.EventLogger=n.Diagnostics=void 0,jo();const i=jo(),r=Qb();Object.defineProperty(n,"Diagnostics",{enumerable:!0,get:function(){return r.Diagnostics}});const s=pO();Object.defineProperty(n,"EventLogger",{enumerable:!0,get:function(){return s.EventLogger}});const o=er();Object.defineProperty(n,"Log",{enumerable:!0,get:function(){return o.Log}});const a=og(),l=Jo();Object.defineProperty(n,"Storage",{enumerable:!0,get:function(){return l.Storage}}),t(jo(),n),t(fv(),n),t(M5(),n),t(T5(),n),t(Qb(),n),t(C5(),n),t(vO(),n),t(R5(),n),t(I5(),n),t(Mu(),n),t(D5(),n),t(er(),n),t(_O(),n),t(pv(),n),t(L5(),n),t(k5(),n),t(U5(),n),t(Bl(),n),t(OS(),n),t(LS(),n),t(N5(),n),t(gv(),n),t(F5(),n),t(bO(),n),t(B5(),n),t(dO(),n),t(og(),n),t(mv(),n),t(z5(),n),t(H5(),n),t(G5(),n),t(mO(),n),t(Jo(),n),t(gO(),n),t(IS(),n),t(fO(),n),t(PS(),n),t(DS(),n),t(V5(),n),t(yO(),n),Object.assign((0,i._getStatsigGlobal)(),{Log:o.Log,SDK_VERSION:a.SDK_VERSION})})(ya)),ya}var Da={},ic={},Tp={},gT;function W5(){if(gT)return Tp;gT=1,Object.defineProperty(Tp,"__esModule",{value:!0});const n=Vn();let e=class{constructor(i){this._sdkKey=i,this._rawValues=null,this._values=null,this._source="Uninitialized",this._lcut=0,this._receivedAt=0,this._bootstrapMetadata=null,this._warnings=new Set}reset(){this._values=null,this._rawValues=null,this._source="Loading",this._lcut=0,this._receivedAt=0,this._bootstrapMetadata=null,this._warnings.clear()}finalize(){this._values||(this._source="NoValues")}getValues(){return this._rawValues?(0,n._typedJsonParse)(this._rawValues,"has_updates","EvaluationStoreValues"):null}setValues(i,r){var s,o;if(!i)return!1;const a=(0,n._typedJsonParse)(i.data,"has_updates","EvaluationResponse");return a==null?!1:(this._source=i.source,(a==null?void 0:a.has_updates)!==!0||((s=a.time)!==null&&s!==void 0?s:0)<this._lcut||(this._rawValues=i.data,this._lcut=a.time,this._receivedAt=i.receivedAt,this._values=a,this._bootstrapMetadata=this._extractBootstrapMetadata(i.source,a),i.source&&a.user&&this._setWarningState(r,a),n.SDKFlags.setFlags(this._sdkKey,(o=a.sdk_flags)!==null&&o!==void 0?o:{})),!0)}getWarnings(){if(this._warnings.size!==0)return Array.from(this._warnings)}getGate(i){var r;return this._getDetailedStoreResult((r=this._values)===null||r===void 0?void 0:r.feature_gates,i)}getConfig(i){var r;return this._getDetailedStoreResult((r=this._values)===null||r===void 0?void 0:r.dynamic_configs,i)}getConfigList(){var i;return!((i=this._values)===null||i===void 0)&&i.dynamic_configs?Object.values(this._values.dynamic_configs).map(r=>r.name):[]}getLayer(i){var r;return this._getDetailedStoreResult((r=this._values)===null||r===void 0?void 0:r.layer_configs,i)}getParamStore(i){var r;return this._getDetailedStoreResult((r=this._values)===null||r===void 0?void 0:r.param_stores,i)}getSource(){return this._source}getExposureMapping(){var i;return(i=this._values)===null||i===void 0?void 0:i.exposures}_extractBootstrapMetadata(i,r){if(i!=="Bootstrap")return null;const s={};return r.user&&(s.user=r.user),r.sdkInfo&&(s.generatorSDKInfo=r.sdkInfo),s.lcut=r.time,s}_getDetailedStoreResult(i,r){let s=null;return i&&(s=i[r]?i[r]:i[(0,n._DJB2)(r)]),{result:s,details:this._getDetails(s==null)}}_setWarningState(i,r){var s,o;const a=n.StableID.get(this._sdkKey);if(((s=i.customIDs)===null||s===void 0?void 0:s.stableID)!==a&&(!((o=i.customIDs)===null||o===void 0)&&o.stableID||a)){this._warnings.add("StableIDMismatch");return}if("user"in r){const l=r.user,c=Object.assign(Object.assign({},i),{analyticsOnlyMetadata:void 0,privateAttributes:void 0});(0,n._getFullUserHash)(c)!==(0,n._getFullUserHash)(l)&&this._warnings.add("PartialUserMatch")}}getCurrentSourceDetails(){if(this._source==="Uninitialized"||this._source==="NoValues")return{reason:this._source};const i={reason:this._source,lcut:this._lcut,receivedAt:this._receivedAt};return this._warnings.size>0&&(i.warnings=Array.from(this._warnings)),i}_getDetails(i){var r,s;const o=this.getCurrentSourceDetails();let a=o.reason;const l=(r=o.warnings)!==null&&r!==void 0?r:[];if(this._source==="Bootstrap"&&l.length>0&&(a=a+l[0]),a!=="Uninitialized"&&a!=="NoValues"){const u=i?"Unrecognized":"Recognized";a="".concat(a,":").concat(u)}const c=this._source==="Bootstrap"&&(s=this._bootstrapMetadata)!==null&&s!==void 0?s:void 0;return c&&(o.bootstrapMetadata=c),Object.assign(Object.assign({},o),{reason:a})}};return Tp.default=e,Tp}var rc={},mh={},vT;function j5(){if(vT)return mh;vT=1,Object.defineProperty(mh,"__esModule",{value:!0}),mh._resolveDeltasResponse=void 0;const n=Vn(),e=2;function t(o,a){const l=(0,n._typedJsonParse)(a,"checksum","DeltasEvaluationResponse");if(!l)return{hadBadDeltaChecksum:!0};const c=i(o,l),u=r(c),d=(0,n._DJB2Object)({feature_gates:u.feature_gates,dynamic_configs:u.dynamic_configs,layer_configs:u.layer_configs},e);return d===l.checksumV2?JSON.stringify(u):{hadBadDeltaChecksum:!0,badChecksum:d,badMergedConfigs:u,badFullResponse:l.deltas_full_response}}mh._resolveDeltasResponse=t;function i(o,a){return Object.assign(Object.assign(Object.assign({},o),a),{feature_gates:Object.assign(Object.assign({},o.feature_gates),a.feature_gates),layer_configs:Object.assign(Object.assign({},o.layer_configs),a.layer_configs),dynamic_configs:Object.assign(Object.assign({},o.dynamic_configs),a.dynamic_configs)})}function r(o){const a=o;return s(o.deleted_gates,a.feature_gates),delete a.deleted_gates,s(o.deleted_configs,a.dynamic_configs),delete a.deleted_configs,s(o.deleted_layers,a.layer_configs),delete a.deleted_layers,a}function s(o,a){o==null||o.forEach(l=>{delete a[l]})}return mh}var _T;function wO(){if(_T)return rc;_T=1;var n=rc&&rc.__awaiter||function(r,s,o,a){function l(c){return c instanceof o?c:new o(function(u){u(c)})}return new(o||(o=Promise))(function(c,u){function d(v){try{m(a.next(v))}catch(g){u(g)}}function f(v){try{m(a.throw(v))}catch(g){u(g)}}function m(v){v.done?c(v.value):l(v.value).then(d,f)}m((a=a.apply(r,s||[])).next())})};Object.defineProperty(rc,"__esModule",{value:!0});const e=Vn(),t=j5();class i extends e.NetworkCore{constructor(s,o){super(s,o);const a=s==null?void 0:s.networkConfig;this._option=s,this._initializeUrlConfig=new e.UrlConfiguration(e.Endpoint._initialize,a==null?void 0:a.initializeUrl,a==null?void 0:a.api,a==null?void 0:a.initializeFallbackUrls)}fetchEvaluations(s,o,a,l,c){return n(this,void 0,void 0,function*(){var u,d,f,m,v,g;const y=o?(0,e._typedJsonParse)(o,"has_updates","InitializeResponse"):null;let b={user:l,hash:(f=(d=(u=this._option)===null||u===void 0?void 0:u.networkConfig)===null||d===void 0?void 0:d.initializeHashAlgorithm)!==null&&f!==void 0?f:"djb2",deltasResponseRequested:!1,full_checksum:null};if(y!=null&&y.has_updates){const S=(y==null?void 0:y.hash_used)!==((g=(v=(m=this._option)===null||m===void 0?void 0:m.networkConfig)===null||v===void 0?void 0:v.initializeHashAlgorithm)!==null&&g!==void 0?g:"djb2");b=Object.assign(Object.assign({},b),{sinceTime:c&&!S?y.time:0,previousDerivedFields:"derived_fields"in y&&c?y.derived_fields:{},deltasResponseRequested:!0,full_checksum:y.full_checksum,partialUserMatchSinceTime:S?0:y.time})}return this._fetchEvaluations(s,y,b,a)})}_fetchEvaluations(s,o,a,l){return n(this,void 0,void 0,function*(){var c,u;const d=yield this.post({sdkKey:s,urlConfig:this._initializeUrlConfig,data:a,retries:2,isStatsigEncodable:!0,priority:l});if((d==null?void 0:d.code)===204)return'{"has_updates": false}';if((d==null?void 0:d.code)!==200)return(c=d==null?void 0:d.body)!==null&&c!==void 0?c:null;if((o==null?void 0:o.has_updates)!==!0||((u=d.body)===null||u===void 0?void 0:u.includes('"is_delta":true'))!==!0||a.deltasResponseRequested!==!0)return d.body;const f=(0,t._resolveDeltasResponse)(o,d.body);return typeof f=="string"?f:this._fetchEvaluations(s,o,Object.assign(Object.assign(Object.assign({},a),f),{deltasResponseRequested:!1}),l)})}}return rc.default=i,rc}var gh={},yT;function q5(){if(yT)return gh;yT=1,Object.defineProperty(gh,"__esModule",{value:!0}),gh._makeParamStoreGetter=void 0;const n=Vn(),e={disableExposureLog:!0};function t(u){return u==null||u.disableExposureLog===!1}function i(u,d){return d!=null&&!(0,n._isTypeMatch)(u,d)}function r(u,d){return u.value}function s(u,d,f){return u.getFeatureGate(d.gate_name,t(f)?void 0:e).value?d.pass_value:d.fail_value}function o(u,d,f,m){const g=u.getDynamicConfig(d.config_name,t(m)?void 0:e).get(d.param_name);return i(g,f)?f:g}function a(u,d,f,m){const g=u.getExperiment(d.experiment_name,t(m)?void 0:e).get(d.param_name);return i(g,f)?f:g}function l(u,d,f,m){const g=u.getLayer(d.layer_name,t(m)?void 0:e).get(d.param_name);return i(g,f)?f:g}function c(u,d,f){return(m,v)=>{if(d==null)return v;const g=d[m];if(g==null||v!=null&&(0,n._typeOf)(v)!==g.param_type)return v;switch(g.ref_type){case"static":return r(g);case"gate":return s(u,g,f);case"dynamic_config":return o(u,g,v,f);case"experiment":return a(u,g,v,f);case"layer":return l(u,g,v,f);default:return v}}}return gh._makeParamStoreGetter=c,gh}var Pa={},bT;function X5(){if(bT)return Pa;bT=1;var n=Pa&&Pa.__awaiter||function(r,s,o,a){function l(c){return c instanceof o?c:new o(function(u){u(c)})}return new(o||(o=Promise))(function(c,u){function d(v){try{m(a.next(v))}catch(g){u(g)}}function f(v){try{m(a.throw(v))}catch(g){u(g)}}function m(v){v.done?c(v.value):l(v.value).then(d,f)}m((a=a.apply(r,s||[])).next())})};Object.defineProperty(Pa,"__esModule",{value:!0}),Pa.StatsigEvaluationsDataAdapter=void 0;const e=Vn(),t=wO();let i=class extends e.DataAdapterCore{constructor(){super("EvaluationsDataAdapter","evaluations"),this._network=null,this._options=null}attach(s,o,a){super.attach(s,o,a),a!==null&&a instanceof t.default?this._network=a:this._network=new t.default(o!=null?o:{})}getDataAsync(s,o,a){return this._getDataAsyncImpl(s,(0,e._normalizeUser)(o,this._options),a)}prefetchData(s,o){return this._prefetchDataImpl(s,o)}setData(s){const o=(0,e._typedJsonParse)(s,"has_updates","data");o&&"user"in o?super.setData(s,o.user):e.Log.error("StatsigUser not found. You may be using an older server SDK version. Please upgrade your SDK or use setDataLegacy.")}setDataLegacy(s,o){super.setData(s,o)}_fetchFromNetwork(s,o,a,l){return n(this,void 0,void 0,function*(){var c;const u=yield(c=this._network)===null||c===void 0?void 0:c.fetchEvaluations(this._getSdkKey(),s,a==null?void 0:a.priority,o,l);return u!=null?u:null})}_getCacheKey(s){var o;const a=(0,e._getStorageKey)(this._getSdkKey(),s,(o=this._options)===null||o===void 0?void 0:o.customUserCacheKeyFunc);return"".concat(e.DataAdapterCachePrefix,".").concat(this._cacheSuffix,".").concat(a)}_isCachedResultValidFor204(s,o){return s.fullUserHash!=null&&s.fullUserHash===(0,e._getFullUserHash)(o)}};return Pa.StatsigEvaluationsDataAdapter=i,Pa}var wT;function Y5(){if(wT)return ic;wT=1;var n=ic&&ic.__awaiter||function(a,l,c,u){function d(f){return f instanceof c?f:new c(function(m){m(f)})}return new(c||(c=Promise))(function(f,m){function v(b){try{y(u.next(b))}catch(S){m(S)}}function g(b){try{y(u.throw(b))}catch(S){m(S)}}function y(b){b.done?f(b.value):d(b.value).then(v,g)}y((u=u.apply(a,l||[])).next())})};Object.defineProperty(ic,"__esModule",{value:!0});const e=Vn(),t=W5(),i=wO(),r=q5(),s=X5();let o=class Zb extends e.StatsigClientBase{static instance(l){const c=(0,e._getStatsigGlobal)().instance(l);return c instanceof Zb?c:(e.Log.warn((0,e._isServerEnv)()?"StatsigClient.instance is not supported in server environments":"Unable to find StatsigClient instance"),new Zb(l!=null?l:"",{}))}constructor(l,c,u=null){var d,f;e.SDKType._setClientType(l,"javascript-client");const m=new i.default(u,g=>{this.$emt(g)});super(l,(d=u==null?void 0:u.dataAdapter)!==null&&d!==void 0?d:new s.StatsigEvaluationsDataAdapter,m,u),this._possibleFirstTouchMetadata={},this.getFeatureGate=this._memoize(e.MemoPrefix._gate,this._getFeatureGateImpl.bind(this)),this.getDynamicConfig=this._memoize(e.MemoPrefix._dynamicConfig,this._getDynamicConfigImpl.bind(this)),this.getExperiment=this._memoize(e.MemoPrefix._experiment,this._getExperimentImpl.bind(this)),this.getConfigList=this._memoize(e.MemoPrefix._configList,this._getConfigListImpl.bind(this)),this.getLayer=this._memoize(e.MemoPrefix._layer,this._getLayerImpl.bind(this)),this.getParameterStore=this._memoize(e.MemoPrefix._paramStore,this._getParameterStoreImpl.bind(this)),this._store=new t.default(l),this._network=m,this._user=this._configureUser(c,u),this._sdkInstanceID=(0,e.getUUID)();const v=(f=u==null?void 0:u.plugins)!==null&&f!==void 0?f:[];for(const g of v)g.bind(this)}initializeSync(l){var c;return this.loadingStatus!=="Uninitialized"?(0,e.createUpdateDetails)(!0,this._store.getSource(),-1,null,null,["MultipleInitializations",...(c=this._store.getWarnings())!==null&&c!==void 0?c:[]]):(this._logger.start(),this.updateUserSync(this._user,l))}initializeAsync(l){return n(this,void 0,void 0,function*(){return this._initializePromise?this._initializePromise:(this._initializePromise=this._initializeAsyncImpl(l),this._initializePromise)})}updateUserSync(l,c){const u=performance.now();try{return this._updateUserSyncImpl(l,c,u)}catch(d){const f=d instanceof Error?d:new Error(String(d));return this._createErrorUpdateDetails(f,u)}}_updateUserSyncImpl(l,c,u){var d;const f=[...(d=this._store.getWarnings())!==null&&d!==void 0?d:[]];this._resetForUser(l);const m=this.dataAdapter.getDataSync(this._user);m==null&&f.push("NoCachedValues"),this._store.setValues(m,this._user),this._finalizeUpdate(m);const v=c==null?void 0:c.disableBackgroundCacheRefresh;return v===!0||v==null&&(m==null?void 0:m.source)==="Bootstrap"?(0,e.createUpdateDetails)(!0,this._store.getSource(),performance.now()-u,this._errorBoundary.getLastSeenErrorAndReset(),this._network.getLastUsedInitUrlAndReset(),f):(this._runPostUpdate(m!=null?m:null,this._user),(0,e.createUpdateDetails)(!0,this._store.getSource(),performance.now()-u,this._errorBoundary.getLastSeenErrorAndReset(),this._network.getLastUsedInitUrlAndReset(),f))}updateUserAsync(l,c){return n(this,void 0,void 0,function*(){const u=performance.now();try{return yield this._updateUserAsyncImpl(l,c)}catch(d){const f=d instanceof Error?d:new Error(String(d));return this._createErrorUpdateDetails(f,u)}})}_updateUserAsyncImpl(l,c){return n(this,void 0,void 0,function*(){this._resetForUser(l);const u=this._user;e.Diagnostics._markInitOverallStart(this._sdkKey);let d=this.dataAdapter.getDataSync(u);if(this._store.setValues(d,this._user),this._setStatus("Loading",d),d=yield this.dataAdapter.getDataAsync(d,u,c),u!==this._user)return(0,e.createUpdateDetails)(!1,this._store.getSource(),-1,new Error("User changed during update"),this._network.getLastUsedInitUrlAndReset());let f=!1;d!=null&&(e.Diagnostics._markInitProcessStart(this._sdkKey),f=this._store.setValues(d,this._user),e.Diagnostics._markInitProcessEnd(this._sdkKey,{success:f})),this._finalizeUpdate(d),f||(this._errorBoundary.attachErrorIfNoneExists(e.UPDATE_DETAIL_ERROR_MESSAGES.NO_NETWORK_DATA),this.$emt({name:"initialization_failure"})),e.Diagnostics._markInitOverallEnd(this._sdkKey,f,this._store.getCurrentSourceDetails());const m=e.Diagnostics._enqueueDiagnosticsEvent(this._user,this._logger,this._sdkKey,this._options);return(0,e.createUpdateDetails)(f,this._store.getSource(),m,this._errorBoundary.getLastSeenErrorAndReset(),this._network.getLastUsedInitUrlAndReset(),this._store.getWarnings())})}getContext(){return{sdkKey:this._sdkKey,options:this._options,values:this._store.getValues(),user:JSON.parse(JSON.stringify(this._user)),errorBoundary:this._errorBoundary,session:e.StatsigSession.get(this._sdkKey),stableID:e.StableID.get(this._sdkKey),sdkInstanceID:this._sdkInstanceID}}checkGate(l,c){return this.getFeatureGate(l,c).value}logEvent(l,c,u){const d=typeof l=="string"?{eventName:l,value:c,metadata:u}:l;this.$emt({name:"log_event_called",event:d}),this._logger.enqueue(Object.assign(Object.assign({},d),{user:this._user,time:Date.now()}))}updateUserWithAnalyticsOnlyMetadata(l){this._user=this._configureUser(Object.assign(Object.assign({},this._user),{analyticsOnlyMetadata:l}),this._options)}_primeReadyRipcord(){this.$on("error",()=>{this.loadingStatus==="Loading"&&this._finalizeUpdate(null)})}_initializeAsyncImpl(l){return n(this,void 0,void 0,function*(){return e.Storage.isReady()||(yield e.Storage.isReadyResolver()),this._logger.start(),this.updateUserAsync(this._user,l)})}_createErrorUpdateDetails(l,c){var u;return(0,e.createUpdateDetails)(!1,this._store.getSource(),performance.now()-c,l,null,[...(u=this._store.getWarnings())!==null&&u!==void 0?u:[]])}_finalizeUpdate(l){this._store.finalize(),this._setStatus("Ready",l)}_runPostUpdate(l,c){this.dataAdapter.getDataAsync(l,c,{priority:"low"}).catch(u=>{e.Log.error("An error occurred after update.",u)})}_resetForUser(l){this._logger.reset(),this._store.reset(),this._user=this._configureUser(l,this._options)}_configureUser(l,c){var u,d,f;const m=(0,e._normalizeUser)(l,c),v=(u=m.customIDs)===null||u===void 0?void 0:u.stableID;if(v){const g=(f=(d=this.storageProvider).isReadyResolver)===null||f===void 0?void 0:f.call(d);g?g.then(()=>e.StableID.setOverride(v,this._sdkKey),()=>e.StableID.setOverride(v,this._sdkKey)):e.StableID.setOverride(v,this._sdkKey)}return Object.keys(this._possibleFirstTouchMetadata).length>0&&(m.analyticsOnlyMetadata=Object.assign(Object.assign({},m.analyticsOnlyMetadata),this._possibleFirstTouchMetadata)),m}_getFeatureGateImpl(l,c){var u,d;const{result:f,details:m}=this._store.getGate(l),v=(0,e._makeFeatureGate)(l,m,f),g=(d=(u=this.overrideAdapter)===null||u===void 0?void 0:u.getGateOverride)===null||d===void 0?void 0:d.call(u,v,this._user,c),y=g!=null?g:v;return this._enqueueExposure(l,(0,e._createGateExposure)(this._user,y,this._store.getExposureMapping()),c),this.$emt({name:"gate_evaluation",gate:y}),y}_getDynamicConfigImpl(l,c){var u,d;const{result:f,details:m}=this._store.getConfig(l),v=(0,e._makeDynamicConfig)(l,m,f),g=(d=(u=this.overrideAdapter)===null||u===void 0?void 0:u.getDynamicConfigOverride)===null||d===void 0?void 0:d.call(u,v,this._user,c),y=g!=null?g:v;return this._enqueueExposure(l,(0,e._createConfigExposure)(this._user,y,this._store.getExposureMapping()),c),this.$emt({name:"dynamic_config_evaluation",dynamicConfig:y}),y}_getExperimentImpl(l,c){var u,d,f,m;const{result:v,details:g}=this._store.getConfig(l),y=(0,e._makeExperiment)(l,g,v);y.__evaluation!=null&&(y.__evaluation.secondary_exposures=(0,e._mapExposures)((d=(u=y.__evaluation)===null||u===void 0?void 0:u.secondary_exposures)!==null&&d!==void 0?d:[],this._store.getExposureMapping()));const b=(m=(f=this.overrideAdapter)===null||f===void 0?void 0:f.getExperimentOverride)===null||m===void 0?void 0:m.call(f,y,this._user,c),S=b!=null?b:y;return this._enqueueExposure(l,(0,e._createConfigExposure)(this._user,S,this._store.getExposureMapping()),c),this.$emt({name:"experiment_evaluation",experiment:S}),S}_getConfigListImpl(){return this._store.getConfigList()}_getLayerImpl(l,c){var u,d,f;const{result:m,details:v}=this._store.getLayer(l),g=(0,e._makeLayer)(l,v,m),y=(d=(u=this.overrideAdapter)===null||u===void 0?void 0:u.getLayerOverride)===null||d===void 0?void 0:d.call(u,g,this._user,c);c!=null&&c.disableExposureLog&&this._logger.incrementNonExposureCount(l);const b=(0,e._mergeOverride)(g,y,(f=y==null?void 0:y.__value)!==null&&f!==void 0?f:g.__value,S=>{c!=null&&c.disableExposureLog||this._enqueueExposure(l,(0,e._createLayerParameterExposure)(this._user,b,S,this._store.getExposureMapping()),c)});return this.$emt({name:"layer_evaluation",layer:b}),b}_getParameterStoreImpl(l,c){var u,d;const{result:f,details:m}=this._store.getParamStore(l);this._logger.incrementNonExposureCount(l);const v={name:l,details:m,__configuration:f,get:(0,r._makeParamStoreGetter)(this,f,c)},g=(d=(u=this.overrideAdapter)===null||u===void 0?void 0:u.getParamStoreOverride)===null||d===void 0?void 0:d.call(u,v,c);return g!=null&&(v.__configuration=g.config,v.details=g.details,v.get=(0,r._makeParamStoreGetter)(this,g.config,c)),v}};return ic.default=o,ic}var ST;function K5(){return ST||(ST=1,(function(n){var e=Da&&Da.__createBinding||(Object.create?(function(o,a,l,c){c===void 0&&(c=l);var u=Object.getOwnPropertyDescriptor(a,l);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[l]}}),Object.defineProperty(o,c,u)}):(function(o,a,l,c){c===void 0&&(c=l),o[c]=a[l]})),t=Da&&Da.__exportStar||function(o,a){for(var l in o)l!=="default"&&!Object.prototype.hasOwnProperty.call(a,l)&&e(a,o,l)};Object.defineProperty(n,"__esModule",{value:!0}),n.StatsigClient=void 0;const i=Vn(),r=Y5();n.StatsigClient=r.default,t(Vn(),n);const s=Object.assign((0,i._getStatsigGlobal)(),{StatsigClient:r.default});n.default=s})(Da)),Da}var $se=K5(),qy={},qs={},Jr={},vh={},Xy={},xT;function $5(){return xT||(xT=1,(function(n){var e={};Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});var t=Object.defineProperty,i=(w,h,p)=>h in w?t(w,h,{enumerable:!0,configurable:!0,writable:!0,value:p}):w[h]=p,r=(w,h,p)=>i(w,typeof h!="symbol"?h+"":h,p),s,o=Object.defineProperty,a=(w,h,p)=>h in w?o(w,h,{enumerable:!0,configurable:!0,writable:!0,value:p}):w[h]=p,l=(w,h,p)=>a(w,typeof h!="symbol"?h+"":h,p),c=(w=>(w[w.Document=0]="Document",w[w.DocumentType=1]="DocumentType",w[w.Element=2]="Element",w[w.Text=3]="Text",w[w.CDATA=4]="CDATA",w[w.Comment=5]="Comment",w))(c||{});const u={Node:["childNodes","parentNode","parentElement","textContent"],ShadowRoot:["host","styleSheets"],Element:["shadowRoot","querySelector","querySelectorAll"],MutationObserver:[]},d={Node:["contains","getRootNode"],ShadowRoot:["getSelection"],Element:[],MutationObserver:["constructor"]},f={};function m(w){if(f[w])return f[w];const h=globalThis[w],p=h.prototype,_=w in u?u[w]:void 0,T=!!(_&&_.every(V=>{var F,$;return!!(($=(F=Object.getOwnPropertyDescriptor(p,V))==null?void 0:F.get)!=null&&$.toString().includes("[native code]"))})),P=w in d?d[w]:void 0,O=!!(P&&P.every(V=>{var F;return typeof p[V]=="function"&&((F=p[V])==null?void 0:F.toString().includes("[native code]"))}));if(T&&O)return f[w]=h.prototype,h.prototype;try{const V=document.createElement("iframe");document.body.appendChild(V);const F=V.contentWindow;if(!F)return h.prototype;const $=F[w].prototype;return document.body.removeChild(V),$?f[w]=$:p}catch(V){return p}}const v={};function g(w,h,p){var _;const T="".concat(w,".").concat(String(p));if(v[T])return v[T].call(h);const P=m(w),O=(_=Object.getOwnPropertyDescriptor(P,p))==null?void 0:_.get;return O?(v[T]=O,O.call(h)):h[p]}const y={};function b(w,h,p){const _="".concat(w,".").concat(String(p));if(y[_])return y[_].bind(h);const P=m(w)[p];return typeof P!="function"?h[p]:(y[_]=P,P.bind(h))}function S(w){return g("Node",w,"childNodes")}function x(w){return g("Node",w,"parentNode")}function A(w){return g("Node",w,"parentElement")}function E(w){return g("Node",w,"textContent")}function M(w,h){return b("Node",w,"contains")(h)}function I(w){return b("Node",w,"getRootNode")()}function R(w){return!w||!("host"in w)?null:g("ShadowRoot",w,"host")}function C(w){return w.styleSheets}function D(w){return!w||!("shadowRoot"in w)?null:g("Element",w,"shadowRoot")}function L(w,h){return g("Element",w,"querySelector")(h)}function z(w,h){return g("Element",w,"querySelectorAll")(h)}function G(){return m("MutationObserver").constructor}const H={childNodes:S,parentNode:x,parentElement:A,textContent:E,contains:M,getRootNode:I,host:R,styleSheets:C,shadowRoot:D,querySelector:L,querySelectorAll:z,mutationObserver:G};function J(w){return w.nodeType===w.ELEMENT_NODE}function k(w){const h=w&&"host"in w&&"mode"in w&&H.host(w)||null;return!!(h&&"shadowRoot"in h&&H.shadowRoot(h)===w)}function X(w){return Object.prototype.toString.call(w)==="[object ShadowRoot]"}function W(w){return w.includes(" background-clip: text;")&&!w.includes(" -webkit-background-clip: text;")&&(w=w.replace(/\sbackground-clip:\s*text;/g," -webkit-background-clip: text; background-clip: text;")),w}function ie(w){const{cssText:h}=w;if(h.split('"').length<3)return h;const p=["@import","url(".concat(JSON.stringify(w.href),")")];return w.layerName===""?p.push("layer"):w.layerName&&p.push("layer(".concat(w.layerName,")")),w.supportsText&&p.push("supports(".concat(w.supportsText,")")),w.media.length&&p.push(w.media.mediaText),p.join(" ")+";"}function se(w){try{const h=w.rules||w.cssRules;if(!h)return null;const p=Array.from(h,_=>ye(_,w.href)).join("");return W(p)}catch(h){return null}}function ye(w,h){if(He(w)){let p;try{p=se(w.styleSheet)||ie(w)}catch(_){p=w.cssText}return w.styleSheet.href?qe(p,w.styleSheet.href):p}else{let p=w.cssText;return fe(w)&&w.selectorText.includes(":")&&(p=Ne(p)),h?qe(p,h):p}}function Ne(w){const h=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;return w.replace(h,"$1\\$2")}function He(w){return"styleSheet"in w}function fe(w){return"selectorText"in w}class he{constructor(){l(this,"idNodeMap",new Map),l(this,"nodeMetaMap",new WeakMap)}getId(h){var p;if(!h)return-1;const _=(p=this.getMeta(h))==null?void 0:p.id;return _!=null?_:-1}getNode(h){return this.idNodeMap.get(h)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(h){return this.nodeMetaMap.get(h)||null}removeNodeFromMap(h){const p=this.getId(h);this.idNodeMap.delete(p),h.childNodes&&h.childNodes.forEach(_=>this.removeNodeFromMap(_))}has(h){return this.idNodeMap.has(h)}hasNode(h){return this.nodeMetaMap.has(h)}add(h,p){const _=p.id;this.idNodeMap.set(_,h),this.nodeMetaMap.set(h,p)}replace(h,p){const _=this.getNode(h);if(_){const T=this.nodeMetaMap.get(_);T&&this.nodeMetaMap.set(p,T)}this.idNodeMap.set(h,p)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function le(){return new he}function ee({element:w,maskInputOptions:h,tagName:p,type:_,value:T,maskInputFn:P}){let O=T||"";const V=_&&de(_);return(h[p.toLowerCase()]||V&&h[V])&&(P?O=P(O,w):O="*".repeat(O.length)),O}function de(w){return w.toLowerCase()}const be="__rrweb_original__";function oe(w){const h=w.getContext("2d");if(!h)return!0;const p=50;for(let _=0;_<w.width;_+=p)for(let T=0;T<w.height;T+=p){const P=h.getImageData,O=be in P?P[be]:P;if(new Uint32Array(O.call(h,_,T,Math.min(p,w.width-_),Math.min(p,w.height-T)).data.buffer).some(F=>F!==0))return!1}return!0}function ge(w){const h=w.type;return w.hasAttribute("data-rr-is-password")?"password":h?de(h):null}function Se(w,h){var P;let p;try{p=new URL(w,h!=null?h:window.location.href)}catch(O){return null}const _=/\.([0-9a-z]+)(?:$)/i,T=p.pathname.match(_);return(P=T==null?void 0:T[1])!=null?P:null}function q(w){let h="";return w.indexOf("//")>-1?h=w.split("/").slice(0,3).join("/"):h=w.split("/")[0],h=h.split("?")[0],h}const me=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,xe=/^(?:[a-z+]+:)?\/\//i,Re=/^www\..*/i,Ce=/^(data:)([^,]*),(.*)/i;function qe(w,h){return(w||"").replace(me,(p,_,T,P,O,V)=>{const F=T||O||V,$=_||P||"";if(!F)return p;if(xe.test(F)||Re.test(F)||Ce.test(F))return"url(".concat($).concat(F).concat($,")");if(F[0]==="/")return"url(".concat($).concat(q(h)+F).concat($,")");const re=h.split("/"),pe=F.split("/");re.pop();for(const ke of pe)ke!=="."&&(ke===".."?re.pop():re.push(ke));return"url(".concat($).concat(re.join("/")).concat($,")")})}let We=1;const Ze=new RegExp("[^a-z0-9-_:]"),wt=-2;function St(){return We++}function Y(w){if(w instanceof HTMLFormElement)return"form";const h=de(w.tagName);return Ze.test(h)?"div":h}let B,ue;const Ae=/^[^ \t\n\r\u000c]+/,ze=/^[, \t\n\r\u000c]+/;function Ie(w,h){if(h.trim()==="")return h;let p=0;function _(P){let O;const V=P.exec(h.substring(p));return V?(O=V[0],p+=O.length,O):""}const T=[];for(;_(ze),!(p>=h.length);){let P=_(Ae);if(P.slice(-1)===",")P=Xe(w,P.substring(0,P.length-1)),T.push(P);else{let O="";P=Xe(w,P);let V=!1;for(;;){const F=h.charAt(p);if(F===""){T.push((P+O).trim());break}else if(V)F===")"&&(V=!1);else if(F===","){p+=1,T.push((P+O).trim());break}else F==="("&&(V=!0);O+=F,p+=1}}}return T.join(", ")}const lt=new WeakMap;function Xe(w,h){return!h||h.trim()===""?h:ct(w,h)}function ht(w){return!!(w.tagName==="svg"||w.ownerSVGElement)}function ct(w,h){let p=lt.get(w);if(p||(p=w.createElement("a"),lt.set(w,p)),!h)h="";else if(h.startsWith("blob:")||h.startsWith("data:"))return h;return p.setAttribute("href",h),p.href}function je(w,h,p,_){return _&&(p==="src"||p==="href"&&!(h==="use"&&_[0]==="#")||p==="xlink:href"&&_[0]!=="#"||p==="background"&&(h==="table"||h==="td"||h==="th")?Xe(w,_):p==="srcset"?Ie(w,_):p==="style"?qe(_,ct(w)):h==="object"&&p==="data"?Xe(w,_):_)}function Je(w,h,p){return(w==="video"||w==="audio")&&h==="autoplay"}function bt(w,h,p){try{if(typeof h=="string"){if(w.classList.contains(h))return!0}else for(let _=w.classList.length;_--;){const T=w.classList[_];if(h.test(T))return!0}if(p)return w.matches(p)}catch(_){}return!1}function st(w,h,p){if(!w)return!1;if(w.nodeType!==w.ELEMENT_NODE)return p?st(H.parentNode(w),h,p):!1;for(let _=w.classList.length;_--;){const T=w.classList[_];if(h.test(T))return!0}return p?st(H.parentNode(w),h,p):!1}function Ye(w,h,p,_){let T;if(J(w)){if(T=w,!H.childNodes(T).length)return!1}else{if(H.parentElement(w)===null)return!1;T=H.parentElement(w)}try{if(typeof h=="string"){if(_){if(T.closest(".".concat(h)))return!0}else if(T.classList.contains(h))return!0}else if(st(T,h,_))return!0;if(p){if(_){if(T.closest(p))return!0}else if(T.matches(p))return!0}}catch(P){}return!1}function vt(w,h,p){const _=w.contentWindow;if(!_)return;let T=!1,P;try{P=_.document.readyState}catch(V){return}if(P!=="complete"){const V=setTimeout(()=>{T||(h(),T=!0)},p);w.addEventListener("load",()=>{clearTimeout(V),T=!0,h()});return}const O="about:blank";if(_.location.href!==O||w.src===O||w.src==="")return setTimeout(h,0),w.addEventListener("load",h);w.addEventListener("load",h)}function ce(w,h,p){let _=!1,T;try{T=w.sheet}catch(O){return}if(T)return;const P=setTimeout(()=>{_||(h(),_=!0)},p);w.addEventListener("load",()=>{clearTimeout(P),_=!0,h()})}function ve(w,h){const{doc:p,mirror:_,blockClass:T,blockSelector:P,needsMask:O,inlineStylesheet:V,maskInputOptions:F={},maskTextFn:$,maskInputFn:re,dataURLOptions:pe={},inlineImages:ke,recordCanvas:Le,keepIframeSrcFn:Ve,newlyAddedElement:Me=!1}=h,_e=tt(p,_);switch(w.nodeType){case w.DOCUMENT_NODE:return w.compatMode!=="CSS1Compat"?{type:c.Document,childNodes:[],compatMode:w.compatMode}:{type:c.Document,childNodes:[]};case w.DOCUMENT_TYPE_NODE:return{type:c.DocumentType,name:w.name,publicId:w.publicId,systemId:w.systemId,rootId:_e};case w.ELEMENT_NODE:return Ke(w,{doc:p,blockClass:T,blockSelector:P,inlineStylesheet:V,maskInputOptions:F,maskInputFn:re,dataURLOptions:pe,inlineImages:ke,recordCanvas:Le,keepIframeSrcFn:Ve,newlyAddedElement:Me,rootId:_e});case w.TEXT_NODE:return ut(w,{doc:p,needsMask:O,maskTextFn:$,rootId:_e});case w.CDATA_SECTION_NODE:return{type:c.CDATA,textContent:"",rootId:_e};case w.COMMENT_NODE:return{type:c.Comment,textContent:H.textContent(w)||"",rootId:_e};default:return!1}}function tt(w,h){if(!h.hasNode(w))return;const p=h.getId(w);return p===1?void 0:p}function ut(w,h){var p;const{needsMask:_,maskTextFn:T,rootId:P}=h,O=H.parentNode(w),V=O&&O.tagName;let F=H.textContent(w);const $=V==="STYLE"?!0:void 0,re=V==="SCRIPT"?!0:void 0;if($&&F){try{w.nextSibling||w.previousSibling||(p=O.sheet)!=null&&p.cssRules&&(F=se(O.sheet))}catch(pe){console.warn("Cannot get CSS styles from text's parentNode. Error: ".concat(pe),w)}F=qe(F,ct(h.doc))}return re&&(F="SCRIPT_PLACEHOLDER"),!$&&!re&&F&&_&&(F=T?T(F,H.parentElement(w)):F.replace(/[\S]/g,"*")),{type:c.Text,textContent:F||"",isStyle:$,rootId:P}}function Ke(w,h){const{doc:p,blockClass:_,blockSelector:T,inlineStylesheet:P,maskInputOptions:O={},maskInputFn:V,dataURLOptions:F={},inlineImages:$,recordCanvas:re,keepIframeSrcFn:pe,newlyAddedElement:ke=!1,rootId:Le}=h,Ve=bt(w,_,T),Me=Y(w);let _e={};const It=w.attributes.length;for(let et=0;et<It;et++){const Pt=w.attributes[et];Je(Me,Pt.name,Pt.value)||(_e[Pt.name]=je(p,Me,de(Pt.name),Pt.value))}if(Me==="link"&&P){const et=Array.from(p.styleSheets).find(xn=>xn.href===w.href);let Pt=null;et&&(Pt=se(et)),Pt&&(delete _e.rel,delete _e.href,_e._cssText=Pt)}if(Me==="style"&&w.sheet&&!(w.innerText||H.textContent(w)||"").trim().length){const et=se(w.sheet);et&&(_e._cssText=et)}if(Me==="input"||Me==="textarea"||Me==="select"){const et=w.value,Pt=w.checked;_e.type!=="radio"&&_e.type!=="checkbox"&&_e.type!=="submit"&&_e.type!=="button"&&et?_e.value=ee({element:w,type:ge(w),tagName:Me,value:et,maskInputOptions:O,maskInputFn:V}):Pt&&(_e.checked=Pt)}if(Me==="option"&&(w.selected&&!O.select?_e.selected=!0:delete _e.selected),Me==="dialog"&&w.open&&(_e.rr_open_mode=w.matches("dialog:modal")?"modal":"non-modal"),Me==="canvas"&&re){if(w.__context==="2d")oe(w)||(_e.rr_dataURL=w.toDataURL(F.type,F.quality));else if(!("__context"in w)){const et=w.toDataURL(F.type,F.quality),Pt=p.createElement("canvas");Pt.width=w.width,Pt.height=w.height;const xn=Pt.toDataURL(F.type,F.quality);et!==xn&&(_e.rr_dataURL=et)}}if(Me==="img"&&$){B||(B=p.createElement("canvas"),ue=B.getContext("2d"));const et=w,Pt=et.currentSrc||et.getAttribute("src")||"<unknown-src>",xn=et.crossOrigin,Pn=()=>{et.removeEventListener("load",Pn);try{B.width=et.naturalWidth,B.height=et.naturalHeight,ue.drawImage(et,0,0),_e.rr_dataURL=B.toDataURL(F.type,F.quality)}catch(yi){if(et.crossOrigin!=="anonymous"){et.crossOrigin="anonymous",et.complete&&et.naturalWidth!==0?Pn():et.addEventListener("load",Pn);return}else console.warn("Cannot inline img src=".concat(Pt,"! Error: ").concat(yi))}et.crossOrigin==="anonymous"&&(xn?_e.crossOrigin=xn:et.removeAttribute("crossorigin"))};et.complete&&et.naturalWidth!==0?Pn():et.addEventListener("load",Pn)}if(Me==="audio"||Me==="video"){const et=_e;et.rr_mediaState=w.paused?"paused":"played",et.rr_mediaCurrentTime=w.currentTime,et.rr_mediaPlaybackRate=w.playbackRate,et.rr_mediaMuted=w.muted,et.rr_mediaLoop=w.loop,et.rr_mediaVolume=w.volume}if(ke||(w.scrollLeft&&(_e.rr_scrollLeft=w.scrollLeft),w.scrollTop&&(_e.rr_scrollTop=w.scrollTop)),Ve){const{width:et,height:Pt}=w.getBoundingClientRect();_e={class:_e.class,rr_width:"".concat(et,"px"),rr_height:"".concat(Pt,"px")}}Me==="iframe"&&!pe(_e.src)&&(w.contentDocument||(_e.rr_src=_e.src),delete _e.src);let xt;try{customElements.get(Me)&&(xt=!0)}catch(et){}return{type:c.Element,tagName:Me,attributes:_e,childNodes:[],isSVG:ht(w)||void 0,needBlock:Ve,rootId:Le,isCustom:xt}}function Te(w){return w==null?"":w.toLowerCase()}function dt(w,h){if(h.comment&&w.type===c.Comment)return!0;if(w.type===c.Element){if(h.script&&(w.tagName==="script"||w.tagName==="link"&&(w.attributes.rel==="preload"||w.attributes.rel==="modulepreload")&&w.attributes.as==="script"||w.tagName==="link"&&w.attributes.rel==="prefetch"&&typeof w.attributes.href=="string"&&Se(w.attributes.href)==="js"))return!0;if(h.headFavicon&&(w.tagName==="link"&&w.attributes.rel==="shortcut icon"||w.tagName==="meta"&&(Te(w.attributes.name).match(/^msapplication-tile(image|color)$/)||Te(w.attributes.name)==="application-name"||Te(w.attributes.rel)==="icon"||Te(w.attributes.rel)==="apple-touch-icon"||Te(w.attributes.rel)==="shortcut icon")))return!0;if(w.tagName==="meta"){if(h.headMetaDescKeywords&&Te(w.attributes.name).match(/^description|keywords$/))return!0;if(h.headMetaSocial&&(Te(w.attributes.property).match(/^(og|twitter|fb):/)||Te(w.attributes.name).match(/^(og|twitter):/)||Te(w.attributes.name)==="pinterest"))return!0;if(h.headMetaRobots&&(Te(w.attributes.name)==="robots"||Te(w.attributes.name)==="googlebot"||Te(w.attributes.name)==="bingbot"))return!0;if(h.headMetaHttpEquiv&&w.attributes["http-equiv"]!==void 0)return!0;if(h.headMetaAuthorship&&(Te(w.attributes.name)==="author"||Te(w.attributes.name)==="generator"||Te(w.attributes.name)==="framework"||Te(w.attributes.name)==="publisher"||Te(w.attributes.name)==="progid"||Te(w.attributes.property).match(/^article:/)||Te(w.attributes.property).match(/^product:/)))return!0;if(h.headMetaVerification&&(Te(w.attributes.name)==="google-site-verification"||Te(w.attributes.name)==="yandex-verification"||Te(w.attributes.name)==="csrf-token"||Te(w.attributes.name)==="p:domain_verify"||Te(w.attributes.name)==="verify-v1"||Te(w.attributes.name)==="verification"||Te(w.attributes.name)==="shopify-checkout-api-token"))return!0}}return!1}function Et(w,h){const{doc:p,mirror:_,blockClass:T,blockSelector:P,maskTextClass:O,maskTextSelector:V,skipChild:F=!1,inlineStylesheet:$=!0,maskInputOptions:re={},maskTextFn:pe,maskInputFn:ke,slimDOMOptions:Le,dataURLOptions:Ve={},inlineImages:Me=!1,recordCanvas:_e=!1,onSerialize:It,onIframeLoad:xt,iframeLoadTimeout:et=5e3,onStylesheetLoad:Pt,stylesheetLoadTimeout:xn=5e3,keepIframeSrcFn:Pn=()=>!1,newlyAddedElement:yi=!1}=h;let{needsMask:mn}=h,{preserveWhiteSpace:bi=!0}=h;mn||(mn=Ye(w,O,V,mn===void 0));const wi=ve(w,{doc:p,mirror:_,blockClass:T,blockSelector:P,needsMask:mn,inlineStylesheet:$,maskInputOptions:re,maskTextFn:pe,maskInputFn:ke,dataURLOptions:Ve,inlineImages:Me,recordCanvas:_e,keepIframeSrcFn:Pn,newlyAddedElement:yi});if(!wi)return console.warn(w,"not serialized"),null;let kr;_.hasNode(w)?kr=_.getId(w):dt(wi,Le)||!bi&&wi.type===c.Text&&!wi.isStyle&&!wi.textContent.replace(/^\s+|\s+$/gm,"").length?kr=wt:kr=St();const gn=Object.assign(wi,{id:kr});if(_.add(w,gn),kr===wt)return null;It&&It(w);let fa=!F;if(gn.type===c.Element){fa=fa&&!gn.needBlock,delete gn.needBlock;const ji=H.shadowRoot(w);ji&&X(ji)&&(gn.isShadowHost=!0)}if((gn.type===c.Document||gn.type===c.Element)&&fa){Le.headWhitespace&&gn.type===c.Element&&gn.tagName==="head"&&(bi=!1);const ji={doc:p,mirror:_,blockClass:T,blockSelector:P,needsMask:mn,maskTextClass:O,maskTextSelector:V,skipChild:F,inlineStylesheet:$,maskInputOptions:re,maskTextFn:pe,maskInputFn:ke,slimDOMOptions:Le,dataURLOptions:Ve,inlineImages:Me,recordCanvas:_e,preserveWhiteSpace:bi,onSerialize:It,onIframeLoad:xt,iframeLoadTimeout:et,onStylesheetLoad:Pt,stylesheetLoadTimeout:xn,keepIframeSrcFn:Pn};if(!(gn.type===c.Element&&gn.tagName==="textarea"&&gn.attributes.value!==void 0))for(const Gs of Array.from(H.childNodes(w))){const ws=Et(Gs,ji);ws&&gn.childNodes.push(ws)}let Kr=null;if(J(w)&&(Kr=H.shadowRoot(w)))for(const Gs of Array.from(H.childNodes(Kr))){const ws=Et(Gs,ji);ws&&(X(Kr)&&(ws.isShadow=!0),gn.childNodes.push(ws))}}const rh=H.parentNode(w);return rh&&k(rh)&&X(rh)&&(gn.isShadow=!0),gn.type===c.Element&&gn.tagName==="iframe"&&vt(w,()=>{const ji=w.contentDocument;if(ji&&xt){const Kr=Et(ji,{doc:ji,mirror:_,blockClass:T,blockSelector:P,needsMask:mn,maskTextClass:O,maskTextSelector:V,skipChild:!1,inlineStylesheet:$,maskInputOptions:re,maskTextFn:pe,maskInputFn:ke,slimDOMOptions:Le,dataURLOptions:Ve,inlineImages:Me,recordCanvas:_e,preserveWhiteSpace:bi,onSerialize:It,onIframeLoad:xt,iframeLoadTimeout:et,onStylesheetLoad:Pt,stylesheetLoadTimeout:xn,keepIframeSrcFn:Pn});Kr&&xt(w,Kr)}},et),gn.type===c.Element&&gn.tagName==="link"&&typeof gn.attributes.rel=="string"&&(gn.attributes.rel==="stylesheet"||gn.attributes.rel==="preload"&&typeof gn.attributes.href=="string"&&Se(gn.attributes.href)==="css")&&ce(w,()=>{if(Pt){const ji=Et(w,{doc:p,mirror:_,blockClass:T,blockSelector:P,needsMask:mn,maskTextClass:O,maskTextSelector:V,skipChild:!1,inlineStylesheet:$,maskInputOptions:re,maskTextFn:pe,maskInputFn:ke,slimDOMOptions:Le,dataURLOptions:Ve,inlineImages:Me,recordCanvas:_e,preserveWhiteSpace:bi,onSerialize:It,onIframeLoad:xt,iframeLoadTimeout:et,onStylesheetLoad:Pt,stylesheetLoadTimeout:xn,keepIframeSrcFn:Pn});ji&&Pt(w,ji)}},xn),gn}function dn(w,h){const{mirror:p=new he,blockClass:_="rr-block",blockSelector:T=null,maskTextClass:P="rr-mask",maskTextSelector:O=null,inlineStylesheet:V=!0,inlineImages:F=!1,recordCanvas:$=!1,maskAllInputs:re=!1,maskTextFn:pe,maskInputFn:ke,slimDOM:Le=!1,dataURLOptions:Ve,preserveWhiteSpace:Me,onSerialize:_e,onIframeLoad:It,iframeLoadTimeout:xt,onStylesheetLoad:et,stylesheetLoadTimeout:Pt,keepIframeSrcFn:xn=()=>!1}=h||{};return Et(w,{doc:w,mirror:p,blockClass:_,blockSelector:T,maskTextClass:P,maskTextSelector:O,skipChild:!1,inlineStylesheet:V,maskInputOptions:re===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:re===!1?{password:!0}:re,maskTextFn:pe,maskInputFn:ke,slimDOMOptions:Le===!0||Le==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:Le==="all",headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:Le===!1?{}:Le,dataURLOptions:Ve,inlineImages:F,recordCanvas:$,preserveWhiteSpace:Me,onSerialize:_e,onIframeLoad:It,iframeLoadTimeout:xt,onStylesheetLoad:et,stylesheetLoadTimeout:Pt,keepIframeSrcFn:xn,newlyAddedElement:!1})}function en(w){return w&&w.__esModule&&Object.prototype.hasOwnProperty.call(w,"default")?w.default:w}function vr(w){if(w.__esModule)return w;var h=w.default;if(typeof h=="function"){var p=function _(){return this instanceof _?Reflect.construct(h,arguments,this.constructor):h.apply(this,arguments)};p.prototype=h.prototype}else p={};return Object.defineProperty(p,"__esModule",{value:!0}),Object.keys(w).forEach(function(_){var T=Object.getOwnPropertyDescriptor(w,_);Object.defineProperty(p,_,T.get?T:{enumerable:!0,get:function(){return w[_]}})}),p}var Oi={exports:{}},fn=String,Or=function(){return{isColorSupported:!1,reset:fn,bold:fn,dim:fn,italic:fn,underline:fn,inverse:fn,hidden:fn,strikethrough:fn,black:fn,red:fn,green:fn,yellow:fn,blue:fn,magenta:fn,cyan:fn,white:fn,gray:fn,bgBlack:fn,bgRed:fn,bgGreen:fn,bgYellow:fn,bgBlue:fn,bgMagenta:fn,bgCyan:fn,bgWhite:fn}};Oi.exports=Or(),Oi.exports.createColors=Or;var vs=Oi.exports;const jn=vr(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"})));let Bt=vs,_s=jn,_o=class SO extends Error{constructor(h,p,_,T,P,O){super(h),this.name="CssSyntaxError",this.reason=h,P&&(this.file=P),T&&(this.source=T),O&&(this.plugin=O),typeof p<"u"&&typeof _<"u"&&(typeof p=="number"?(this.line=p,this.column=_):(this.line=p.line,this.column=p.column,this.endLine=_.line,this.endColumn=_.column)),this.setMessage(),Error.captureStackTrace&&Error.captureStackTrace(this,SO)}setMessage(){this.message=this.plugin?this.plugin+": ":"",this.message+=this.file?this.file:"<css input>",typeof this.line<"u"&&(this.message+=":"+this.line+":"+this.column),this.message+=": "+this.reason}showSourceCode(h){if(!this.source)return"";let p=this.source;h==null&&(h=Bt.isColorSupported),_s&&h&&(p=_s(p));let _=p.split(/\r?\n/),T=Math.max(this.line-3,0),P=Math.min(this.line+2,_.length),O=String(P).length,V,F;if(h){let{bold:$,gray:re,red:pe}=Bt.createColors(!0);V=ke=>$(pe(ke)),F=ke=>re(ke)}else V=F=$=>$;return _.slice(T,P).map(($,re)=>{let pe=T+1+re,ke=" "+(" "+pe).slice(-O)+" | ";if(pe===this.line){let Le=F(ke.replace(/\d/g," "))+$.slice(0,this.column-1).replace(/[^\t]/g," ");return V(">")+F(ke)+$+"\n "+Le+V("^")}return" "+F(ke)+$}).join("\n")}toString(){let h=this.showSourceCode();return h&&(h="\n\n"+h+"\n"),this.name+": "+this.message+h}};var N=_o;_o.default=_o;var j={};j.isClean=Symbol("isClean"),j.my=Symbol("my");const ae={after:"\n",beforeClose:"\n",beforeComment:"\n",beforeDecl:"\n",beforeOpen:" ",beforeRule:"\n",colon:": ",commentLeft:" ",commentRight:" ",emptyBody:"",indent:"    ",semicolon:!1};function we(w){return w[0].toUpperCase()+w.slice(1)}let De=class{constructor(h){this.builder=h}atrule(h,p){let _="@"+h.name,T=h.params?this.rawValue(h,"params"):"";if(typeof h.raws.afterName<"u"?_+=h.raws.afterName:T&&(_+=" "),h.nodes)this.block(h,_+T);else{let P=(h.raws.between||"")+(p?";":"");this.builder(_+T+P,h)}}beforeAfter(h,p){let _;h.type==="decl"?_=this.raw(h,null,"beforeDecl"):h.type==="comment"?_=this.raw(h,null,"beforeComment"):p==="before"?_=this.raw(h,null,"beforeRule"):_=this.raw(h,null,"beforeClose");let T=h.parent,P=0;for(;T&&T.type!=="root";)P+=1,T=T.parent;if(_.includes("\n")){let O=this.raw(h,null,"indent");if(O.length)for(let V=0;V<P;V++)_+=O}return _}block(h,p){let _=this.raw(h,"between","beforeOpen");this.builder(p+_+"{",h,"start");let T;h.nodes&&h.nodes.length?(this.body(h),T=this.raw(h,"after")):T=this.raw(h,"after","emptyBody"),T&&this.builder(T),this.builder("}",h,"end")}body(h){let p=h.nodes.length-1;for(;p>0&&h.nodes[p].type==="comment";)p-=1;let _=this.raw(h,"semicolon");for(let T=0;T<h.nodes.length;T++){let P=h.nodes[T],O=this.raw(P,"before");O&&this.builder(O),this.stringify(P,p!==T||_)}}comment(h){let p=this.raw(h,"left","commentLeft"),_=this.raw(h,"right","commentRight");this.builder("/*"+p+h.text+_+"*/",h)}decl(h,p){let _=this.raw(h,"between","colon"),T=h.prop+_+this.rawValue(h,"value");h.important&&(T+=h.raws.important||" !important"),p&&(T+=";"),this.builder(T,h)}document(h){this.body(h)}raw(h,p,_){let T;if(_||(_=p),p&&(T=h.raws[p],typeof T<"u"))return T;let P=h.parent;if(_==="before"&&(!P||P.type==="root"&&P.first===h||P&&P.type==="document"))return"";if(!P)return ae[_];let O=h.root();if(O.rawCache||(O.rawCache={}),typeof O.rawCache[_]<"u")return O.rawCache[_];if(_==="before"||_==="after")return this.beforeAfter(h,_);{let V="raw"+we(_);this[V]?T=this[V](O,h):O.walk(F=>{if(T=F.raws[p],typeof T<"u")return!1})}return typeof T>"u"&&(T=ae[_]),O.rawCache[_]=T,T}rawBeforeClose(h){let p;return h.walk(_=>{if(_.nodes&&_.nodes.length>0&&typeof _.raws.after<"u")return p=_.raws.after,p.includes("\n")&&(p=p.replace(/[^\n]+$/,"")),!1}),p&&(p=p.replace(/\S/g,"")),p}rawBeforeComment(h,p){let _;return h.walkComments(T=>{if(typeof T.raws.before<"u")return _=T.raws.before,_.includes("\n")&&(_=_.replace(/[^\n]+$/,"")),!1}),typeof _>"u"?_=this.raw(p,null,"beforeDecl"):_&&(_=_.replace(/\S/g,"")),_}rawBeforeDecl(h,p){let _;return h.walkDecls(T=>{if(typeof T.raws.before<"u")return _=T.raws.before,_.includes("\n")&&(_=_.replace(/[^\n]+$/,"")),!1}),typeof _>"u"?_=this.raw(p,null,"beforeRule"):_&&(_=_.replace(/\S/g,"")),_}rawBeforeOpen(h){let p;return h.walk(_=>{if(_.type!=="decl"&&(p=_.raws.between,typeof p<"u"))return!1}),p}rawBeforeRule(h){let p;return h.walk(_=>{if(_.nodes&&(_.parent!==h||h.first!==_)&&typeof _.raws.before<"u")return p=_.raws.before,p.includes("\n")&&(p=p.replace(/[^\n]+$/,"")),!1}),p&&(p=p.replace(/\S/g,"")),p}rawColon(h){let p;return h.walkDecls(_=>{if(typeof _.raws.between<"u")return p=_.raws.between.replace(/[^\s:]/g,""),!1}),p}rawEmptyBody(h){let p;return h.walk(_=>{if(_.nodes&&_.nodes.length===0&&(p=_.raws.after,typeof p<"u"))return!1}),p}rawIndent(h){if(h.raws.indent)return h.raws.indent;let p;return h.walk(_=>{let T=_.parent;if(T&&T!==h&&T.parent&&T.parent===h&&typeof _.raws.before<"u"){let P=_.raws.before.split("\n");return p=P[P.length-1],p=p.replace(/\S/g,""),!1}}),p}rawSemicolon(h){let p;return h.walk(_=>{if(_.nodes&&_.nodes.length&&_.last.type==="decl"&&(p=_.raws.semicolon,typeof p<"u"))return!1}),p}rawValue(h,p){let _=h[p],T=h.raws[p];return T&&T.value===_?T.raw:_}root(h){this.body(h),h.raws.after&&this.builder(h.raws.after)}rule(h){this.block(h,this.rawValue(h,"selector")),h.raws.ownSemicolon&&this.builder(h.raws.ownSemicolon,h,"end")}stringify(h,p){if(!this[h.type])throw new Error("Unknown AST node type "+h.type+". Maybe you need to change PostCSS stringifier.");this[h.type](h,p)}};var Pe=De;De.default=De;let Qe=Pe;function U(w,h){new Qe(h).stringify(w)}var Q=U;U.default=U;let{isClean:te,my:ne}=j,Z=N,Be=Pe,Oe=Q;function Fe(w,h){let p=new w.constructor;for(let _ in w){if(!Object.prototype.hasOwnProperty.call(w,_)||_==="proxyCache")continue;let T=w[_],P=typeof T;_==="parent"&&P==="object"?h&&(p[_]=h):_==="source"?p[_]=T:Array.isArray(T)?p[_]=T.map(O=>Fe(O,p)):(P==="object"&&T!==null&&(T=Fe(T)),p[_]=T)}return p}let Ge=class{constructor(h={}){this.raws={},this[te]=!1,this[ne]=!0;for(let p in h)if(p==="nodes"){this.nodes=[];for(let _ of h[p])typeof _.clone=="function"?this.append(_.clone()):this.append(_)}else this[p]=h[p]}addToError(h){if(h.postcssNode=this,h.stack&&this.source&&/\n\s{4}at /.test(h.stack)){let p=this.source;h.stack=h.stack.replace(/\n\s{4}at /,"$&".concat(p.input.from,":").concat(p.start.line,":").concat(p.start.column,"$&"))}return h}after(h){return this.parent.insertAfter(this,h),this}assign(h={}){for(let p in h)this[p]=h[p];return this}before(h){return this.parent.insertBefore(this,h),this}cleanRaws(h){delete this.raws.before,delete this.raws.after,h||delete this.raws.between}clone(h={}){let p=Fe(this);for(let _ in h)p[_]=h[_];return p}cloneAfter(h={}){let p=this.clone(h);return this.parent.insertAfter(this,p),p}cloneBefore(h={}){let p=this.clone(h);return this.parent.insertBefore(this,p),p}error(h,p={}){if(this.source){let{end:_,start:T}=this.rangeBy(p);return this.source.input.error(h,{column:T.column,line:T.line},{column:_.column,line:_.line},p)}return new Z(h)}getProxyProcessor(){return{get(h,p){return p==="proxyOf"?h:p==="root"?()=>h.root().toProxy():h[p]},set(h,p,_){return h[p]===_||(h[p]=_,(p==="prop"||p==="value"||p==="name"||p==="params"||p==="important"||p==="text")&&h.markDirty()),!0}}}markDirty(){if(this[te]){this[te]=!1;let h=this;for(;h=h.parent;)h[te]=!1}}next(){if(!this.parent)return;let h=this.parent.index(this);return this.parent.nodes[h+1]}positionBy(h,p){let _=this.source.start;if(h.index)_=this.positionInside(h.index,p);else if(h.word){p=this.toString();let T=p.indexOf(h.word);T!==-1&&(_=this.positionInside(T,p))}return _}positionInside(h,p){let _=p||this.toString(),T=this.source.start.column,P=this.source.start.line;for(let O=0;O<h;O++)_[O]==="\n"?(T=1,P+=1):T+=1;return{column:T,line:P}}prev(){if(!this.parent)return;let h=this.parent.index(this);return this.parent.nodes[h-1]}rangeBy(h){let p={column:this.source.start.column,line:this.source.start.line},_=this.source.end?{column:this.source.end.column+1,line:this.source.end.line}:{column:p.column+1,line:p.line};if(h.word){let T=this.toString(),P=T.indexOf(h.word);P!==-1&&(p=this.positionInside(P,T),_=this.positionInside(P+h.word.length,T))}else h.start?p={column:h.start.column,line:h.start.line}:h.index&&(p=this.positionInside(h.index)),h.end?_={column:h.end.column,line:h.end.line}:typeof h.endIndex=="number"?_=this.positionInside(h.endIndex):h.index&&(_=this.positionInside(h.index+1));return(_.line<p.line||_.line===p.line&&_.column<=p.column)&&(_={column:p.column+1,line:p.line}),{end:_,start:p}}raw(h,p){return new Be().raw(this,h,p)}remove(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this}replaceWith(...h){if(this.parent){let p=this,_=!1;for(let T of h)T===this?_=!0:_?(this.parent.insertAfter(p,T),p=T):this.parent.insertBefore(p,T);_||this.remove()}return this}root(){let h=this;for(;h.parent&&h.parent.type!=="document";)h=h.parent;return h}toJSON(h,p){let _={},T=p==null;p=p||new Map;let P=0;for(let O in this){if(!Object.prototype.hasOwnProperty.call(this,O)||O==="parent"||O==="proxyCache")continue;let V=this[O];if(Array.isArray(V))_[O]=V.map(F=>typeof F=="object"&&F.toJSON?F.toJSON(null,p):F);else if(typeof V=="object"&&V.toJSON)_[O]=V.toJSON(null,p);else if(O==="source"){let F=p.get(V.input);F==null&&(F=P,p.set(V.input,P),P++),_[O]={end:V.end,inputId:F,start:V.start}}else _[O]=V}return T&&(_.inputs=[...p.keys()].map(O=>O.toJSON())),_}toProxy(){return this.proxyCache||(this.proxyCache=new Proxy(this,this.getProxyProcessor())),this.proxyCache}toString(h=Oe){h.stringify&&(h=h.stringify);let p="";return h(this,_=>{p+=_}),p}warn(h,p,_){let T={node:this};for(let P in _)T[P]=_[P];return h.warn(p,T)}get proxyOf(){return this}};var $e=Ge;Ge.default=Ge;let it=$e,nt=class extends it{constructor(h){h&&typeof h.value<"u"&&typeof h.value!="string"&&(h={...h,value:String(h.value)}),super(h),this.type="decl"}get variable(){return this.prop.startsWith("--")||this.prop[0]==="$"}};var gt=nt;nt.default=nt;let Dt="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";var jt={nanoid:(w=21)=>{let h="",p=w;for(;p--;)h+=Dt[Math.random()*64|0];return h}};let{SourceMapConsumer:_t,SourceMapGenerator:ot}=jn,{existsSync:Kt,readFileSync:Gt}=jn,{dirname:pn,join:Xt}=jn;function ln(w){return Buffer?Buffer.from(w,"base64").toString():window.atob(w)}let tn=class{constructor(h,p){if(p.map===!1)return;this.loadAnnotation(h),this.inline=this.startWith(this.annotation,"data:");let _=p.map?p.map.prev:void 0,T=this.loadMap(p.from,_);!this.mapFile&&p.from&&(this.mapFile=p.from),this.mapFile&&(this.root=pn(this.mapFile)),T&&(this.text=T)}consumer(){return this.consumerCache||(this.consumerCache=new _t(this.text)),this.consumerCache}decodeInline(h){let p=/^data:application\/json;charset=utf-?8;base64,/,_=/^data:application\/json;base64,/,T=/^data:application\/json;charset=utf-?8,/,P=/^data:application\/json,/;if(T.test(h)||P.test(h))return decodeURIComponent(h.substr(RegExp.lastMatch.length));if(p.test(h)||_.test(h))return ln(h.substr(RegExp.lastMatch.length));let O=h.match(/data:application\/json;([^,]+),/)[1];throw new Error("Unsupported source map encoding "+O)}getAnnotationURL(h){return h.replace(/^\/\*\s*# sourceMappingURL=/,"").trim()}isMap(h){return typeof h!="object"?!1:typeof h.mappings=="string"||typeof h._mappings=="string"||Array.isArray(h.sections)}loadAnnotation(h){let p=h.match(/\/\*\s*# sourceMappingURL=/gm);if(!p)return;let _=h.lastIndexOf(p.pop()),T=h.indexOf("*/",_);_>-1&&T>-1&&(this.annotation=this.getAnnotationURL(h.substring(_,T)))}loadFile(h){if(this.root=pn(h),Kt(h))return this.mapFile=h,Gt(h,"utf-8").toString().trim()}loadMap(h,p){if(p===!1)return!1;if(p){if(typeof p=="string")return p;if(typeof p=="function"){let _=p(h);if(_){let T=this.loadFile(_);if(!T)throw new Error("Unable to load previous source map: "+_.toString());return T}}else{if(p instanceof _t)return ot.fromSourceMap(p).toString();if(p instanceof ot)return p.toString();if(this.isMap(p))return JSON.stringify(p);throw new Error("Unsupported previous source map format: "+p.toString())}}else{if(this.inline)return this.decodeInline(this.annotation);if(this.annotation){let _=this.annotation;return h&&(_=Xt(pn(h),_)),this.loadFile(_)}}}startWith(h,p){return h?h.substr(0,p.length)===p:!1}withContent(){return!!(this.consumer().sourcesContent&&this.consumer().sourcesContent.length>0)}};var yt=tn;tn.default=tn;let{SourceMapConsumer:An,SourceMapGenerator:qn}=jn,{fileURLToPath:cn,pathToFileURL:Sn}=jn,{isAbsolute:ca,resolve:qr}=jn,{nanoid:zN}=jt,t_=jn,jx=N,HN=yt,n_=Symbol("fromOffsetCache"),GN=!!(An&&qn),qx=!!(qr&&ca),Ef=class{constructor(h,p={}){if(h===null||typeof h>"u"||typeof h=="object"&&!h.toString)throw new Error("PostCSS received ".concat(h," instead of CSS string"));if(this.css=h.toString(),this.css[0]==="\uFEFF"||this.css[0]===""?(this.hasBOM=!0,this.css=this.css.slice(1)):this.hasBOM=!1,p.from&&(!qx||/^\w+:\/\//.test(p.from)||ca(p.from)?this.file=p.from:this.file=qr(p.from)),qx&&GN){let _=new HN(this.css,p);if(_.text){this.map=_;let T=_.consumer().file;!this.file&&T&&(this.file=this.mapResolve(T))}}this.file||(this.id="<input css "+zN(6)+">"),this.map&&(this.map.file=this.from)}error(h,p,_,T={}){let P,O,V;if(p&&typeof p=="object"){let $=p,re=_;if(typeof $.offset=="number"){let pe=this.fromOffset($.offset);p=pe.line,_=pe.col}else p=$.line,_=$.column;if(typeof re.offset=="number"){let pe=this.fromOffset(re.offset);O=pe.line,V=pe.col}else O=re.line,V=re.column}else if(!_){let $=this.fromOffset(p);p=$.line,_=$.col}let F=this.origin(p,_,O,V);return F?P=new jx(h,F.endLine===void 0?F.line:{column:F.column,line:F.line},F.endLine===void 0?F.column:{column:F.endColumn,line:F.endLine},F.source,F.file,T.plugin):P=new jx(h,O===void 0?p:{column:_,line:p},O===void 0?_:{column:V,line:O},this.css,this.file,T.plugin),P.input={column:_,endColumn:V,endLine:O,line:p,source:this.css},this.file&&(Sn&&(P.input.url=Sn(this.file).toString()),P.input.file=this.file),P}fromOffset(h){let p,_;if(this[n_])_=this[n_];else{let P=this.css.split("\n");_=new Array(P.length);let O=0;for(let V=0,F=P.length;V<F;V++)_[V]=O,O+=P[V].length+1;this[n_]=_}p=_[_.length-1];let T=0;if(h>=p)T=_.length-1;else{let P=_.length-2,O;for(;T<P;)if(O=T+(P-T>>1),h<_[O])P=O-1;else if(h>=_[O+1])T=O+1;else{T=O;break}}return{col:h-_[T]+1,line:T+1}}mapResolve(h){return/^\w+:\/\//.test(h)?h:qr(this.map.consumer().sourceRoot||this.map.root||".",h)}origin(h,p,_,T){if(!this.map)return!1;let P=this.map.consumer(),O=P.originalPositionFor({column:p,line:h});if(!O.source)return!1;let V;typeof _=="number"&&(V=P.originalPositionFor({column:T,line:_}));let F;ca(O.source)?F=Sn(O.source):F=new URL(O.source,this.map.consumer().sourceRoot||Sn(this.map.mapFile));let $={column:O.column,endColumn:V&&V.column,endLine:V&&V.line,line:O.line,url:F.toString()};if(F.protocol==="file:")if(cn)$.file=cn(F);else throw new Error("file: protocol is not available in this PostCSS build");let re=P.sourceContentFor(O.source);return re&&($.source=re),$}toJSON(){let h={};for(let p of["hasBOM","css","file","id"])this[p]!=null&&(h[p]=this[p]);return this.map&&(h.map={...this.map},h.map.consumerCache&&(h.map.consumerCache=void 0)),h}get from(){return this.file||this.id}};var Af=Ef;Ef.default=Ef,t_&&t_.registerInput&&t_.registerInput(Ef);let{SourceMapConsumer:Xx,SourceMapGenerator:Mf}=jn,{dirname:Tf,relative:Yx,resolve:Kx,sep:$x}=jn,{pathToFileURL:Jx}=jn,VN=Af,WN=!!(Xx&&Mf),jN=!!(Tf&&Kx&&Yx&&$x);var Qx=class{constructor(h,p,_,T){this.stringify=h,this.mapOpts=_.map||{},this.root=p,this.opts=_,this.css=T,this.originalCSS=T,this.usesFileUrls=!this.mapOpts.from&&this.mapOpts.absolute,this.memoizedFileURLs=new Map,this.memoizedPaths=new Map,this.memoizedURLs=new Map}addAnnotation(){let h;this.isInline()?h="data:application/json;base64,"+this.toBase64(this.map.toString()):typeof this.mapOpts.annotation=="string"?h=this.mapOpts.annotation:typeof this.mapOpts.annotation=="function"?h=this.mapOpts.annotation(this.opts.to,this.root):h=this.outputFile()+".map";let p="\n";this.css.includes("\r\n")&&(p="\r\n"),this.css+=p+"/*# sourceMappingURL="+h+" */"}applyPrevMaps(){for(let h of this.previous()){let p=this.toUrl(this.path(h.file)),_=h.root||Tf(h.file),T;this.mapOpts.sourcesContent===!1?(T=new Xx(h.text),T.sourcesContent&&(T.sourcesContent=null)):T=h.consumer(),this.map.applySourceMap(T,p,this.toUrl(this.path(_)))}}clearAnnotation(){if(this.mapOpts.annotation!==!1)if(this.root){let h;for(let p=this.root.nodes.length-1;p>=0;p--)h=this.root.nodes[p],h.type==="comment"&&h.text.indexOf("# sourceMappingURL=")===0&&this.root.removeChild(p)}else this.css&&(this.css=this.css.replace(/\n*?\/\*#[\S\s]*?\*\/$/gm,""))}generate(){if(this.clearAnnotation(),jN&&WN&&this.isMap())return this.generateMap();{let h="";return this.stringify(this.root,p=>{h+=p}),[h]}}generateMap(){if(this.root)this.generateString();else if(this.previous().length===1){let h=this.previous()[0].consumer();h.file=this.outputFile(),this.map=Mf.fromSourceMap(h,{ignoreInvalidMapping:!0})}else this.map=new Mf({file:this.outputFile(),ignoreInvalidMapping:!0}),this.map.addMapping({generated:{column:0,line:1},original:{column:0,line:1},source:this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>"});return this.isSourcesContent()&&this.setSourcesContent(),this.root&&this.previous().length>0&&this.applyPrevMaps(),this.isAnnotation()&&this.addAnnotation(),this.isInline()?[this.css]:[this.css,this.map]}generateString(){this.css="",this.map=new Mf({file:this.outputFile(),ignoreInvalidMapping:!0});let h=1,p=1,_="<no source>",T={generated:{column:0,line:0},original:{column:0,line:0},source:""},P,O;this.stringify(this.root,(V,F,$)=>{if(this.css+=V,F&&$!=="end"&&(T.generated.line=h,T.generated.column=p-1,F.source&&F.source.start?(T.source=this.sourcePath(F),T.original.line=F.source.start.line,T.original.column=F.source.start.column-1,this.map.addMapping(T)):(T.source=_,T.original.line=1,T.original.column=0,this.map.addMapping(T))),P=V.match(/\n/g),P?(h+=P.length,O=V.lastIndexOf("\n"),p=V.length-O):p+=V.length,F&&$!=="start"){let re=F.parent||{raws:{}};(!(F.type==="decl"||F.type==="atrule"&&!F.nodes)||F!==re.last||re.raws.semicolon)&&(F.source&&F.source.end?(T.source=this.sourcePath(F),T.original.line=F.source.end.line,T.original.column=F.source.end.column-1,T.generated.line=h,T.generated.column=p-2,this.map.addMapping(T)):(T.source=_,T.original.line=1,T.original.column=0,T.generated.line=h,T.generated.column=p-1,this.map.addMapping(T)))}})}isAnnotation(){return this.isInline()?!0:typeof this.mapOpts.annotation<"u"?this.mapOpts.annotation:this.previous().length?this.previous().some(h=>h.annotation):!0}isInline(){if(typeof this.mapOpts.inline<"u")return this.mapOpts.inline;let h=this.mapOpts.annotation;return typeof h<"u"&&h!==!0?!1:this.previous().length?this.previous().some(p=>p.inline):!0}isMap(){return typeof this.opts.map<"u"?!!this.opts.map:this.previous().length>0}isSourcesContent(){return typeof this.mapOpts.sourcesContent<"u"?this.mapOpts.sourcesContent:this.previous().length?this.previous().some(h=>h.withContent()):!0}outputFile(){return this.opts.to?this.path(this.opts.to):this.opts.from?this.path(this.opts.from):"to.css"}path(h){if(this.mapOpts.absolute||h.charCodeAt(0)===60||/^\w+:\/\//.test(h))return h;let p=this.memoizedPaths.get(h);if(p)return p;let _=this.opts.to?Tf(this.opts.to):".";typeof this.mapOpts.annotation=="string"&&(_=Tf(Kx(_,this.mapOpts.annotation)));let T=Yx(_,h);return this.memoizedPaths.set(h,T),T}previous(){if(!this.previousMaps)if(this.previousMaps=[],this.root)this.root.walk(h=>{if(h.source&&h.source.input.map){let p=h.source.input.map;this.previousMaps.includes(p)||this.previousMaps.push(p)}});else{let h=new VN(this.originalCSS,this.opts);h.map&&this.previousMaps.push(h.map)}return this.previousMaps}setSourcesContent(){let h={};if(this.root)this.root.walk(p=>{if(p.source){let _=p.source.input.from;if(_&&!h[_]){h[_]=!0;let T=this.usesFileUrls?this.toFileUrl(_):this.toUrl(this.path(_));this.map.setSourceContent(T,p.source.input.css)}}});else if(this.css){let p=this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>";this.map.setSourceContent(p,this.css)}}sourcePath(h){return this.mapOpts.from?this.toUrl(this.mapOpts.from):this.usesFileUrls?this.toFileUrl(h.source.input.from):this.toUrl(this.path(h.source.input.from))}toBase64(h){return Buffer?Buffer.from(h).toString("base64"):window.btoa(unescape(encodeURIComponent(h)))}toFileUrl(h){let p=this.memoizedFileURLs.get(h);if(p)return p;if(Jx){let _=Jx(h).toString();return this.memoizedFileURLs.set(h,_),_}else throw new Error("`map.absolute` option is not available in this PostCSS build")}toUrl(h){let p=this.memoizedURLs.get(h);if(p)return p;$x==="\\"&&(h=h.replace(/\\/g,"/"));let _=encodeURI(h).replace(/[#?]/g,encodeURIComponent);return this.memoizedURLs.set(h,_),_}};let qN=$e,i_=class extends qN{constructor(h){super(h),this.type="comment"}};var Cf=i_;i_.default=i_;let{isClean:Zx,my:eE}=j,tE=gt,nE=Cf,XN=$e,iE,r_,s_,rE;function sE(w){return w.map(h=>(h.nodes&&(h.nodes=sE(h.nodes)),delete h.source,h))}function oE(w){if(w[Zx]=!1,w.proxyOf.nodes)for(let h of w.proxyOf.nodes)oE(h)}let Bs=class xO extends XN{append(...h){for(let p of h){let _=this.normalize(p,this.last);for(let T of _)this.proxyOf.nodes.push(T)}return this.markDirty(),this}cleanRaws(h){if(super.cleanRaws(h),this.nodes)for(let p of this.nodes)p.cleanRaws(h)}each(h){if(!this.proxyOf.nodes)return;let p=this.getIterator(),_,T;for(;this.indexes[p]<this.proxyOf.nodes.length&&(_=this.indexes[p],T=h(this.proxyOf.nodes[_],_),T!==!1);)this.indexes[p]+=1;return delete this.indexes[p],T}every(h){return this.nodes.every(h)}getIterator(){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={}),this.lastEach+=1;let h=this.lastEach;return this.indexes[h]=0,h}getProxyProcessor(){return{get(h,p){return p==="proxyOf"?h:h[p]?p==="each"||typeof p=="string"&&p.startsWith("walk")?(..._)=>h[p](..._.map(T=>typeof T=="function"?(P,O)=>T(P.toProxy(),O):T)):p==="every"||p==="some"?_=>h[p]((T,...P)=>_(T.toProxy(),...P)):p==="root"?()=>h.root().toProxy():p==="nodes"?h.nodes.map(_=>_.toProxy()):p==="first"||p==="last"?h[p].toProxy():h[p]:h[p]},set(h,p,_){return h[p]===_||(h[p]=_,(p==="name"||p==="params"||p==="selector")&&h.markDirty()),!0}}}index(h){return typeof h=="number"?h:(h.proxyOf&&(h=h.proxyOf),this.proxyOf.nodes.indexOf(h))}insertAfter(h,p){let _=this.index(h),T=this.normalize(p,this.proxyOf.nodes[_]).reverse();_=this.index(h);for(let O of T)this.proxyOf.nodes.splice(_+1,0,O);let P;for(let O in this.indexes)P=this.indexes[O],_<P&&(this.indexes[O]=P+T.length);return this.markDirty(),this}insertBefore(h,p){let _=this.index(h),T=_===0?"prepend":!1,P=this.normalize(p,this.proxyOf.nodes[_],T).reverse();_=this.index(h);for(let V of P)this.proxyOf.nodes.splice(_,0,V);let O;for(let V in this.indexes)O=this.indexes[V],_<=O&&(this.indexes[V]=O+P.length);return this.markDirty(),this}normalize(h,p){if(typeof h=="string")h=sE(iE(h).nodes);else if(typeof h>"u")h=[];else if(Array.isArray(h)){h=h.slice(0);for(let T of h)T.parent&&T.parent.removeChild(T,"ignore")}else if(h.type==="root"&&this.type!=="document"){h=h.nodes.slice(0);for(let T of h)T.parent&&T.parent.removeChild(T,"ignore")}else if(h.type)h=[h];else if(h.prop){if(typeof h.value>"u")throw new Error("Value field is missed in node creation");typeof h.value!="string"&&(h.value=String(h.value)),h=[new tE(h)]}else if(h.selector)h=[new r_(h)];else if(h.name)h=[new s_(h)];else if(h.text)h=[new nE(h)];else throw new Error("Unknown node type in node creation");return h.map(T=>(T[eE]||xO.rebuild(T),T=T.proxyOf,T.parent&&T.parent.removeChild(T),T[Zx]&&oE(T),typeof T.raws.before>"u"&&p&&typeof p.raws.before<"u"&&(T.raws.before=p.raws.before.replace(/\S/g,"")),T.parent=this.proxyOf,T))}prepend(...h){h=h.reverse();for(let p of h){let _=this.normalize(p,this.first,"prepend").reverse();for(let T of _)this.proxyOf.nodes.unshift(T);for(let T in this.indexes)this.indexes[T]=this.indexes[T]+_.length}return this.markDirty(),this}push(h){return h.parent=this,this.proxyOf.nodes.push(h),this}removeAll(){for(let h of this.proxyOf.nodes)h.parent=void 0;return this.proxyOf.nodes=[],this.markDirty(),this}removeChild(h){h=this.index(h),this.proxyOf.nodes[h].parent=void 0,this.proxyOf.nodes.splice(h,1);let p;for(let _ in this.indexes)p=this.indexes[_],p>=h&&(this.indexes[_]=p-1);return this.markDirty(),this}replaceValues(h,p,_){return _||(_=p,p={}),this.walkDecls(T=>{p.props&&!p.props.includes(T.prop)||p.fast&&!T.value.includes(p.fast)||(T.value=T.value.replace(h,_))}),this.markDirty(),this}some(h){return this.nodes.some(h)}walk(h){return this.each((p,_)=>{let T;try{T=h(p,_)}catch(P){throw p.addToError(P)}return T!==!1&&p.walk&&(T=p.walk(h)),T})}walkAtRules(h,p){return p?h instanceof RegExp?this.walk((_,T)=>{if(_.type==="atrule"&&h.test(_.name))return p(_,T)}):this.walk((_,T)=>{if(_.type==="atrule"&&_.name===h)return p(_,T)}):(p=h,this.walk((_,T)=>{if(_.type==="atrule")return p(_,T)}))}walkComments(h){return this.walk((p,_)=>{if(p.type==="comment")return h(p,_)})}walkDecls(h,p){return p?h instanceof RegExp?this.walk((_,T)=>{if(_.type==="decl"&&h.test(_.prop))return p(_,T)}):this.walk((_,T)=>{if(_.type==="decl"&&_.prop===h)return p(_,T)}):(p=h,this.walk((_,T)=>{if(_.type==="decl")return p(_,T)}))}walkRules(h,p){return p?h instanceof RegExp?this.walk((_,T)=>{if(_.type==="rule"&&h.test(_.selector))return p(_,T)}):this.walk((_,T)=>{if(_.type==="rule"&&_.selector===h)return p(_,T)}):(p=h,this.walk((_,T)=>{if(_.type==="rule")return p(_,T)}))}get first(){if(this.proxyOf.nodes)return this.proxyOf.nodes[0]}get last(){if(this.proxyOf.nodes)return this.proxyOf.nodes[this.proxyOf.nodes.length-1]}};Bs.registerParse=w=>{iE=w},Bs.registerRule=w=>{r_=w},Bs.registerAtRule=w=>{s_=w},Bs.registerRoot=w=>{rE=w};var ua=Bs;Bs.default=Bs,Bs.rebuild=w=>{w.type==="atrule"?Object.setPrototypeOf(w,s_.prototype):w.type==="rule"?Object.setPrototypeOf(w,r_.prototype):w.type==="decl"?Object.setPrototypeOf(w,tE.prototype):w.type==="comment"?Object.setPrototypeOf(w,nE.prototype):w.type==="root"&&Object.setPrototypeOf(w,rE.prototype),w[eE]=!0,w.nodes&&w.nodes.forEach(h=>{Bs.rebuild(h)})};let YN=ua,aE,lE,Bu=class extends YN{constructor(h){super({type:"document",...h}),this.nodes||(this.nodes=[])}toResult(h={}){return new aE(new lE,this,h).stringify()}};Bu.registerLazyResult=w=>{aE=w},Bu.registerProcessor=w=>{lE=w};var o_=Bu;Bu.default=Bu;let a_=class{constructor(h,p={}){if(this.type="warning",this.text=h,p.node&&p.node.source){let _=p.node.rangeBy(p);this.line=_.start.line,this.column=_.start.column,this.endLine=_.end.line,this.endColumn=_.end.column}for(let _ in p)this[_]=p[_]}toString(){return this.node?this.node.error(this.text,{index:this.index,plugin:this.plugin,word:this.word}).message:this.plugin?this.plugin+": "+this.text:this.text}};var cE=a_;a_.default=a_;let KN=cE,l_=class{constructor(h,p,_){this.processor=h,this.messages=[],this.root=p,this.opts=_,this.css=void 0,this.map=void 0}toString(){return this.css}warn(h,p={}){p.plugin||this.lastPlugin&&this.lastPlugin.postcssPlugin&&(p.plugin=this.lastPlugin.postcssPlugin);let _=new KN(h,p);return this.messages.push(_),_}warnings(){return this.messages.filter(h=>h.type==="warning")}get content(){return this.css}};var c_=l_;l_.default=l_;const u_=39,uE=34,Rf=92,hE=47,If=10,zu=32,Df=12,Pf=9,Of=13,$N=91,JN=93,QN=40,ZN=41,e2=123,t2=125,n2=59,i2=42,r2=58,s2=64,Lf=/[\t\n\f\r "#'()/;[\\\]{}]/g,kf=/[\t\n\f\r !"#'():;@[\\\]{}]|\/(?=\*)/g,o2=/.[\r\n"'(/\\]/,dE=/[\da-f]/i;var a2=function(h,p={}){let _=h.css.valueOf(),T=p.ignoreErrors,P,O,V,F,$,re,pe,ke,Le,Ve,Me=_.length,_e=0,It=[],xt=[];function et(){return _e}function Pt(mn){throw h.error("Unclosed "+mn,_e)}function xn(){return xt.length===0&&_e>=Me}function Pn(mn){if(xt.length)return xt.pop();if(_e>=Me)return;let bi=mn?mn.ignoreUnclosed:!1;switch(P=_.charCodeAt(_e),P){case If:case zu:case Pf:case Of:case Df:{O=_e;do O+=1,P=_.charCodeAt(O);while(P===zu||P===If||P===Pf||P===Of||P===Df);Ve=["space",_.slice(_e,O)],_e=O-1;break}case $N:case JN:case e2:case t2:case r2:case n2:case ZN:{let wi=String.fromCharCode(P);Ve=[wi,wi,_e];break}case QN:{if(ke=It.length?It.pop()[1]:"",Le=_.charCodeAt(_e+1),ke==="url"&&Le!==u_&&Le!==uE&&Le!==zu&&Le!==If&&Le!==Pf&&Le!==Df&&Le!==Of){O=_e;do{if(re=!1,O=_.indexOf(")",O+1),O===-1)if(T||bi){O=_e;break}else Pt("bracket");for(pe=O;_.charCodeAt(pe-1)===Rf;)pe-=1,re=!re}while(re);Ve=["brackets",_.slice(_e,O+1),_e,O],_e=O}else O=_.indexOf(")",_e+1),F=_.slice(_e,O+1),O===-1||o2.test(F)?Ve=["(","(",_e]:(Ve=["brackets",F,_e,O],_e=O);break}case u_:case uE:{V=P===u_?"'":'"',O=_e;do{if(re=!1,O=_.indexOf(V,O+1),O===-1)if(T||bi){O=_e+1;break}else Pt("string");for(pe=O;_.charCodeAt(pe-1)===Rf;)pe-=1,re=!re}while(re);Ve=["string",_.slice(_e,O+1),_e,O],_e=O;break}case s2:{Lf.lastIndex=_e+1,Lf.test(_),Lf.lastIndex===0?O=_.length-1:O=Lf.lastIndex-2,Ve=["at-word",_.slice(_e,O+1),_e,O],_e=O;break}case Rf:{for(O=_e,$=!0;_.charCodeAt(O+1)===Rf;)O+=1,$=!$;if(P=_.charCodeAt(O+1),$&&P!==hE&&P!==zu&&P!==If&&P!==Pf&&P!==Of&&P!==Df&&(O+=1,dE.test(_.charAt(O)))){for(;dE.test(_.charAt(O+1));)O+=1;_.charCodeAt(O+1)===zu&&(O+=1)}Ve=["word",_.slice(_e,O+1),_e,O],_e=O;break}default:{P===hE&&_.charCodeAt(_e+1)===i2?(O=_.indexOf("*/",_e+2)+1,O===0&&(T||bi?O=_.length:Pt("comment")),Ve=["comment",_.slice(_e,O+1),_e,O],_e=O):(kf.lastIndex=_e+1,kf.test(_),kf.lastIndex===0?O=_.length-1:O=kf.lastIndex-2,Ve=["word",_.slice(_e,O+1),_e,O],It.push(Ve),_e=O);break}}return _e++,Ve}function yi(mn){xt.push(mn)}return{back:yi,endOfFile:xn,nextToken:Pn,position:et}};let fE=ua,Uf=class extends fE{constructor(h){super(h),this.type="atrule"}append(...h){return this.proxyOf.nodes||(this.nodes=[]),super.append(...h)}prepend(...h){return this.proxyOf.nodes||(this.nodes=[]),super.prepend(...h)}};var h_=Uf;Uf.default=Uf,fE.registerAtRule(Uf);let pE=ua,mE,gE,Wl=class extends pE{constructor(h){super(h),this.type="root",this.nodes||(this.nodes=[])}normalize(h,p,_){let T=super.normalize(h);if(p){if(_==="prepend")this.nodes.length>1?p.raws.before=this.nodes[1].raws.before:delete p.raws.before;else if(this.first!==p)for(let P of T)P.raws.before=p.raws.before}return T}removeChild(h,p){let _=this.index(h);return!p&&_===0&&this.nodes.length>1&&(this.nodes[1].raws.before=this.nodes[_].raws.before),super.removeChild(h)}toResult(h={}){return new mE(new gE,this,h).stringify()}};Wl.registerLazyResult=w=>{mE=w},Wl.registerProcessor=w=>{gE=w};var Hu=Wl;Wl.default=Wl,pE.registerRoot(Wl);let Gu={comma(w){return Gu.split(w,[","],!0)},space(w){let h=[" ","\n","	"];return Gu.split(w,h)},split(w,h,p){let _=[],T="",P=!1,O=0,V=!1,F="",$=!1;for(let re of w)$?$=!1:re==="\\"?$=!0:V?re===F&&(V=!1):re==='"'||re==="'"?(V=!0,F=re):re==="("?O+=1:re===")"?O>0&&(O-=1):O===0&&h.includes(re)&&(P=!0),P?(T!==""&&_.push(T.trim()),T="",P=!1):T+=re;return(p||T!=="")&&_.push(T.trim()),_}};var vE=Gu;Gu.default=Gu;let _E=ua,l2=vE,Nf=class extends _E{constructor(h){super(h),this.type="rule",this.nodes||(this.nodes=[])}get selectors(){return l2.comma(this.selector)}set selectors(h){let p=this.selector?this.selector.match(/,\s*/):null,_=p?p[0]:","+this.raw("between","beforeOpen");this.selector=h.join(_)}};var d_=Nf;Nf.default=Nf,_E.registerRule(Nf);let c2=gt,u2=a2,h2=Cf,d2=h_,f2=Hu,yE=d_;const bE={empty:!0,space:!0};function p2(w){for(let h=w.length-1;h>=0;h--){let p=w[h],_=p[3]||p[2];if(_)return _}}var m2=class{constructor(h){this.input=h,this.root=new f2,this.current=this.root,this.spaces="",this.semicolon=!1,this.createTokenizer(),this.root.source={input:h,start:{column:1,line:1,offset:0}}}atrule(h){let p=new d2;p.name=h[1].slice(1),p.name===""&&this.unnamedAtrule(p,h),this.init(p,h[2]);let _,T,P,O=!1,V=!1,F=[],$=[];for(;!this.tokenizer.endOfFile();){if(h=this.tokenizer.nextToken(),_=h[0],_==="("||_==="["?$.push(_==="("?")":"]"):_==="{"&&$.length>0?$.push("}"):_===$[$.length-1]&&$.pop(),$.length===0)if(_===";"){p.source.end=this.getPosition(h[2]),p.source.end.offset++,this.semicolon=!0;break}else if(_==="{"){V=!0;break}else if(_==="}"){if(F.length>0){for(P=F.length-1,T=F[P];T&&T[0]==="space";)T=F[--P];T&&(p.source.end=this.getPosition(T[3]||T[2]),p.source.end.offset++)}this.end(h);break}else F.push(h);else F.push(h);if(this.tokenizer.endOfFile()){O=!0;break}}p.raws.between=this.spacesAndCommentsFromEnd(F),F.length?(p.raws.afterName=this.spacesAndCommentsFromStart(F),this.raw(p,"params",F),O&&(h=F[F.length-1],p.source.end=this.getPosition(h[3]||h[2]),p.source.end.offset++,this.spaces=p.raws.between,p.raws.between="")):(p.raws.afterName="",p.params=""),V&&(p.nodes=[],this.current=p)}checkMissedSemicolon(h){let p=this.colon(h);if(p===!1)return;let _=0,T;for(let P=p-1;P>=0&&(T=h[P],!(T[0]!=="space"&&(_+=1,_===2)));P--);throw this.input.error("Missed semicolon",T[0]==="word"?T[3]+1:T[2])}colon(h){let p=0,_,T,P;for(let[O,V]of h.entries()){if(_=V,T=_[0],T==="("&&(p+=1),T===")"&&(p-=1),p===0&&T===":")if(!P)this.doubleColon(_);else{if(P[0]==="word"&&P[1]==="progid")continue;return O}P=_}return!1}comment(h){let p=new h2;this.init(p,h[2]),p.source.end=this.getPosition(h[3]||h[2]),p.source.end.offset++;let _=h[1].slice(2,-2);if(/^\s*$/.test(_))p.text="",p.raws.left=_,p.raws.right="";else{let T=_.match(/^(\s*)([^]*\S)(\s*)$/);p.text=T[2],p.raws.left=T[1],p.raws.right=T[3]}}createTokenizer(){this.tokenizer=u2(this.input)}decl(h,p){let _=new c2;this.init(_,h[0][2]);let T=h[h.length-1];for(T[0]===";"&&(this.semicolon=!0,h.pop()),_.source.end=this.getPosition(T[3]||T[2]||p2(h)),_.source.end.offset++;h[0][0]!=="word";)h.length===1&&this.unknownWord(h),_.raws.before+=h.shift()[1];for(_.source.start=this.getPosition(h[0][2]),_.prop="";h.length;){let $=h[0][0];if($===":"||$==="space"||$==="comment")break;_.prop+=h.shift()[1]}_.raws.between="";let P;for(;h.length;)if(P=h.shift(),P[0]===":"){_.raws.between+=P[1];break}else P[0]==="word"&&/\w/.test(P[1])&&this.unknownWord([P]),_.raws.between+=P[1];(_.prop[0]==="_"||_.prop[0]==="*")&&(_.raws.before+=_.prop[0],_.prop=_.prop.slice(1));let O=[],V;for(;h.length&&(V=h[0][0],!(V!=="space"&&V!=="comment"));)O.push(h.shift());this.precheckMissedSemicolon(h);for(let $=h.length-1;$>=0;$--){if(P=h[$],P[1].toLowerCase()==="!important"){_.important=!0;let re=this.stringFrom(h,$);re=this.spacesFromEnd(h)+re,re!==" !important"&&(_.raws.important=re);break}else if(P[1].toLowerCase()==="important"){let re=h.slice(0),pe="";for(let ke=$;ke>0;ke--){let Le=re[ke][0];if(pe.trim().indexOf("!")===0&&Le!=="space")break;pe=re.pop()[1]+pe}pe.trim().indexOf("!")===0&&(_.important=!0,_.raws.important=pe,h=re)}if(P[0]!=="space"&&P[0]!=="comment")break}h.some($=>$[0]!=="space"&&$[0]!=="comment")&&(_.raws.between+=O.map($=>$[1]).join(""),O=[]),this.raw(_,"value",O.concat(h),p),_.value.includes(":")&&!p&&this.checkMissedSemicolon(h)}doubleColon(h){throw this.input.error("Double colon",{offset:h[2]},{offset:h[2]+h[1].length})}emptyRule(h){let p=new yE;this.init(p,h[2]),p.selector="",p.raws.between="",this.current=p}end(h){this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.semicolon=!1,this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.spaces="",this.current.parent?(this.current.source.end=this.getPosition(h[2]),this.current.source.end.offset++,this.current=this.current.parent):this.unexpectedClose(h)}endFile(){this.current.parent&&this.unclosedBlock(),this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.root.source.end=this.getPosition(this.tokenizer.position())}freeSemicolon(h){if(this.spaces+=h[1],this.current.nodes){let p=this.current.nodes[this.current.nodes.length-1];p&&p.type==="rule"&&!p.raws.ownSemicolon&&(p.raws.ownSemicolon=this.spaces,this.spaces="")}}getPosition(h){let p=this.input.fromOffset(h);return{column:p.col,line:p.line,offset:h}}init(h,p){this.current.push(h),h.source={input:this.input,start:this.getPosition(p)},h.raws.before=this.spaces,this.spaces="",h.type!=="comment"&&(this.semicolon=!1)}other(h){let p=!1,_=null,T=!1,P=null,O=[],V=h[1].startsWith("--"),F=[],$=h;for(;$;){if(_=$[0],F.push($),_==="("||_==="[")P||(P=$),O.push(_==="("?")":"]");else if(V&&T&&_==="{")P||(P=$),O.push("}");else if(O.length===0)if(_===";")if(T){this.decl(F,V);return}else break;else if(_==="{"){this.rule(F);return}else if(_==="}"){this.tokenizer.back(F.pop()),p=!0;break}else _===":"&&(T=!0);else _===O[O.length-1]&&(O.pop(),O.length===0&&(P=null));$=this.tokenizer.nextToken()}if(this.tokenizer.endOfFile()&&(p=!0),O.length>0&&this.unclosedBracket(P),p&&T){if(!V)for(;F.length&&($=F[F.length-1][0],!($!=="space"&&$!=="comment"));)this.tokenizer.back(F.pop());this.decl(F,V)}else this.unknownWord(F)}parse(){let h;for(;!this.tokenizer.endOfFile();)switch(h=this.tokenizer.nextToken(),h[0]){case"space":this.spaces+=h[1];break;case";":this.freeSemicolon(h);break;case"}":this.end(h);break;case"comment":this.comment(h);break;case"at-word":this.atrule(h);break;case"{":this.emptyRule(h);break;default:this.other(h);break}this.endFile()}precheckMissedSemicolon(){}raw(h,p,_,T){let P,O,V=_.length,F="",$=!0,re,pe;for(let ke=0;ke<V;ke+=1)P=_[ke],O=P[0],O==="space"&&ke===V-1&&!T?$=!1:O==="comment"?(pe=_[ke-1]?_[ke-1][0]:"empty",re=_[ke+1]?_[ke+1][0]:"empty",!bE[pe]&&!bE[re]?F.slice(-1)===","?$=!1:F+=P[1]:$=!1):F+=P[1];if(!$){let ke=_.reduce((Le,Ve)=>Le+Ve[1],"");h.raws[p]={raw:ke,value:F}}h[p]=F}rule(h){h.pop();let p=new yE;this.init(p,h[0][2]),p.raws.between=this.spacesAndCommentsFromEnd(h),this.raw(p,"selector",h),this.current=p}spacesAndCommentsFromEnd(h){let p,_="";for(;h.length&&(p=h[h.length-1][0],!(p!=="space"&&p!=="comment"));)_=h.pop()[1]+_;return _}spacesAndCommentsFromStart(h){let p,_="";for(;h.length&&(p=h[0][0],!(p!=="space"&&p!=="comment"));)_+=h.shift()[1];return _}spacesFromEnd(h){let p,_="";for(;h.length&&(p=h[h.length-1][0],p==="space");)_=h.pop()[1]+_;return _}stringFrom(h,p){let _="";for(let T=p;T<h.length;T++)_+=h[T][1];return h.splice(p,h.length-p),_}unclosedBlock(){let h=this.current.source.start;throw this.input.error("Unclosed block",h.line,h.column)}unclosedBracket(h){throw this.input.error("Unclosed bracket",{offset:h[2]},{offset:h[2]+1})}unexpectedClose(h){throw this.input.error("Unexpected }",{offset:h[2]},{offset:h[2]+1})}unknownWord(h){throw this.input.error("Unknown word",{offset:h[0][2]},{offset:h[0][2]+h[0][1].length})}unnamedAtrule(h,p){throw this.input.error("At-rule without name",{offset:p[2]},{offset:p[2]+p[1].length})}};let g2=ua,v2=m2,_2=Af;function Ff(w,h){let p=new _2(w,h),_=new v2(p);try{_.parse()}catch(T){throw T}return _.root}var f_=Ff;Ff.default=Ff,g2.registerParse(Ff);let{isClean:ys,my:y2}=j,b2=Qx,w2=Q,S2=ua,x2=o_,wE=c_,E2=f_,A2=Hu;const M2={atrule:"AtRule",comment:"Comment",decl:"Declaration",document:"Document",root:"Root",rule:"Rule"},T2={AtRule:!0,AtRuleExit:!0,Comment:!0,CommentExit:!0,Declaration:!0,DeclarationExit:!0,Document:!0,DocumentExit:!0,Once:!0,OnceExit:!0,postcssPlugin:!0,prepare:!0,Root:!0,RootExit:!0,Rule:!0,RuleExit:!0},C2={Once:!0,postcssPlugin:!0,prepare:!0},jl=0;function Vu(w){return typeof w=="object"&&typeof w.then=="function"}function SE(w){let h=!1,p=M2[w.type];return w.type==="decl"?h=w.prop.toLowerCase():w.type==="atrule"&&(h=w.name.toLowerCase()),h&&w.append?[p,p+"-"+h,jl,p+"Exit",p+"Exit-"+h]:h?[p,p+"-"+h,p+"Exit",p+"Exit-"+h]:w.append?[p,jl,p+"Exit"]:[p,p+"Exit"]}function xE(w){let h;return w.type==="document"?h=["Document",jl,"DocumentExit"]:w.type==="root"?h=["Root",jl,"RootExit"]:h=SE(w),{eventIndex:0,events:h,iterator:0,node:w,visitorIndex:0,visitors:[]}}function p_(w){return w[ys]=!1,w.nodes&&w.nodes.forEach(h=>p_(h)),w}let m_={},ql=class EO{constructor(h,p,_){this.stringified=!1,this.processed=!1;let T;if(typeof p=="object"&&p!==null&&(p.type==="root"||p.type==="document"))T=p_(p);else if(p instanceof EO||p instanceof wE)T=p_(p.root),p.map&&(typeof _.map>"u"&&(_.map={}),_.map.inline||(_.map.inline=!1),_.map.prev=p.map);else{let P=E2;_.syntax&&(P=_.syntax.parse),_.parser&&(P=_.parser),P.parse&&(P=P.parse);try{T=P(p,_)}catch(O){this.processed=!0,this.error=O}T&&!T[y2]&&S2.rebuild(T)}this.result=new wE(h,T,_),this.helpers={...m_,postcss:m_,result:this.result},this.plugins=this.processor.plugins.map(P=>typeof P=="object"&&P.prepare?{...P,...P.prepare(this.result)}:P)}async(){return this.error?Promise.reject(this.error):this.processed?Promise.resolve(this.result):(this.processing||(this.processing=this.runAsync()),this.processing)}catch(h){return this.async().catch(h)}finally(h){return this.async().then(h,h)}getAsyncError(){throw new Error("Use process(css).then(cb) to work with async plugins")}handleError(h,p){let _=this.result.lastPlugin;try{p&&p.addToError(h),this.error=h,h.name==="CssSyntaxError"&&!h.plugin?(h.plugin=_.postcssPlugin,h.setMessage()):_.postcssVersion}catch(T){console&&console.error&&console.error(T)}return h}prepareVisitors(){this.listeners={};let h=(p,_,T)=>{this.listeners[_]||(this.listeners[_]=[]),this.listeners[_].push([p,T])};for(let p of this.plugins)if(typeof p=="object")for(let _ in p){if(!T2[_]&&/^[A-Z]/.test(_))throw new Error("Unknown event ".concat(_," in ").concat(p.postcssPlugin,". Try to update PostCSS (").concat(this.processor.version," now)."));if(!C2[_])if(typeof p[_]=="object")for(let T in p[_])T==="*"?h(p,_,p[_][T]):h(p,_+"-"+T.toLowerCase(),p[_][T]);else typeof p[_]=="function"&&h(p,_,p[_])}this.hasListener=Object.keys(this.listeners).length>0}async runAsync(){this.plugin=0;for(let h=0;h<this.plugins.length;h++){let p=this.plugins[h],_=this.runOnRoot(p);if(Vu(_))try{await _}catch(T){throw this.handleError(T)}}if(this.prepareVisitors(),this.hasListener){let h=this.result.root;for(;!h[ys];){h[ys]=!0;let p=[xE(h)];for(;p.length>0;){let _=this.visitTick(p);if(Vu(_))try{await _}catch(T){let P=p[p.length-1].node;throw this.handleError(T,P)}}}if(this.listeners.OnceExit)for(let[p,_]of this.listeners.OnceExit){this.result.lastPlugin=p;try{if(h.type==="document"){let T=h.nodes.map(P=>_(P,this.helpers));await Promise.all(T)}else await _(h,this.helpers)}catch(T){throw this.handleError(T)}}}return this.processed=!0,this.stringify()}runOnRoot(h){this.result.lastPlugin=h;try{if(typeof h=="object"&&h.Once){if(this.result.root.type==="document"){let p=this.result.root.nodes.map(_=>h.Once(_,this.helpers));return Vu(p[0])?Promise.all(p):p}return h.Once(this.result.root,this.helpers)}else if(typeof h=="function")return h(this.result.root,this.result)}catch(p){throw this.handleError(p)}}stringify(){if(this.error)throw this.error;if(this.stringified)return this.result;this.stringified=!0,this.sync();let h=this.result.opts,p=w2;h.syntax&&(p=h.syntax.stringify),h.stringifier&&(p=h.stringifier),p.stringify&&(p=p.stringify);let T=new b2(p,this.result.root,this.result.opts).generate();return this.result.css=T[0],this.result.map=T[1],this.result}sync(){if(this.error)throw this.error;if(this.processed)return this.result;if(this.processed=!0,this.processing)throw this.getAsyncError();for(let h of this.plugins){let p=this.runOnRoot(h);if(Vu(p))throw this.getAsyncError()}if(this.prepareVisitors(),this.hasListener){let h=this.result.root;for(;!h[ys];)h[ys]=!0,this.walkSync(h);if(this.listeners.OnceExit)if(h.type==="document")for(let p of h.nodes)this.visitSync(this.listeners.OnceExit,p);else this.visitSync(this.listeners.OnceExit,h)}return this.result}then(h,p){return this.async().then(h,p)}toString(){return this.css}visitSync(h,p){for(let[_,T]of h){this.result.lastPlugin=_;let P;try{P=T(p,this.helpers)}catch(O){throw this.handleError(O,p.proxyOf)}if(p.type!=="root"&&p.type!=="document"&&!p.parent)return!0;if(Vu(P))throw this.getAsyncError()}}visitTick(h){let p=h[h.length-1],{node:_,visitors:T}=p;if(_.type!=="root"&&_.type!=="document"&&!_.parent){h.pop();return}if(T.length>0&&p.visitorIndex<T.length){let[O,V]=T[p.visitorIndex];p.visitorIndex+=1,p.visitorIndex===T.length&&(p.visitors=[],p.visitorIndex=0),this.result.lastPlugin=O;try{return V(_.toProxy(),this.helpers)}catch(F){throw this.handleError(F,_)}}if(p.iterator!==0){let O=p.iterator,V;for(;V=_.nodes[_.indexes[O]];)if(_.indexes[O]+=1,!V[ys]){V[ys]=!0,h.push(xE(V));return}p.iterator=0,delete _.indexes[O]}let P=p.events;for(;p.eventIndex<P.length;){let O=P[p.eventIndex];if(p.eventIndex+=1,O===jl){_.nodes&&_.nodes.length&&(_[ys]=!0,p.iterator=_.getIterator());return}else if(this.listeners[O]){p.visitors=this.listeners[O];return}}h.pop()}walkSync(h){h[ys]=!0;let p=SE(h);for(let _ of p)if(_===jl)h.nodes&&h.each(T=>{T[ys]||this.walkSync(T)});else{let T=this.listeners[_];if(T&&this.visitSync(T,h.toProxy()))return}}warnings(){return this.sync().warnings()}get content(){return this.stringify().content}get css(){return this.stringify().css}get map(){return this.stringify().map}get messages(){return this.sync().messages}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){return this.sync().root}get[Symbol.toStringTag](){return"LazyResult"}};ql.registerPostcss=w=>{m_=w};var EE=ql;ql.default=ql,A2.registerLazyResult(ql),x2.registerLazyResult(ql);let R2=Qx,I2=Q,D2=f_;const P2=c_;let g_=class{constructor(h,p,_){p=p.toString(),this.stringified=!1,this._processor=h,this._css=p,this._opts=_,this._map=void 0;let T,P=I2;this.result=new P2(this._processor,T,this._opts),this.result.css=p;let O=this;Object.defineProperty(this.result,"root",{get(){return O.root}});let V=new R2(P,T,this._opts,p);if(V.isMap()){let[F,$]=V.generate();F&&(this.result.css=F),$&&(this.result.map=$)}else V.clearAnnotation(),this.result.css=V.css}async(){return this.error?Promise.reject(this.error):Promise.resolve(this.result)}catch(h){return this.async().catch(h)}finally(h){return this.async().then(h,h)}sync(){if(this.error)throw this.error;return this.result}then(h,p){return this.async().then(h,p)}toString(){return this._css}warnings(){return[]}get content(){return this.result.css}get css(){return this.result.css}get map(){return this.result.map}get messages(){return[]}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){if(this._root)return this._root;let h,p=D2;try{h=p(this._css,this._opts)}catch(_){this.error=_}if(this.error)throw this.error;return this._root=h,h}get[Symbol.toStringTag](){return"NoWorkResult"}};var O2=g_;g_.default=g_;let L2=O2,k2=EE,U2=o_,N2=Hu,Wu=class{constructor(h=[]){this.version="8.4.38",this.plugins=this.normalize(h)}normalize(h){let p=[];for(let _ of h)if(_.postcss===!0?_=_():_.postcss&&(_=_.postcss),typeof _=="object"&&Array.isArray(_.plugins))p=p.concat(_.plugins);else if(typeof _=="object"&&_.postcssPlugin)p.push(_);else if(typeof _=="function")p.push(_);else if(!(typeof _=="object"&&(_.parse||_.stringify)))throw new Error(_+" is not a PostCSS plugin");return p}process(h,p={}){return!this.plugins.length&&!p.parser&&!p.stringifier&&!p.syntax?new L2(this,h,p):new k2(this,h,p)}use(h){return this.plugins=this.plugins.concat(this.normalize([h])),this}};var F2=Wu;Wu.default=Wu,N2.registerProcessor(Wu),U2.registerProcessor(Wu);let B2=gt,z2=yt,H2=Cf,G2=h_,V2=Af,W2=Hu,j2=d_;function ju(w,h){if(Array.isArray(w))return w.map(T=>ju(T));let{inputs:p,..._}=w;if(p){h=[];for(let T of p){let P={...T,__proto__:V2.prototype};P.map&&(P.map={...P.map,__proto__:z2.prototype}),h.push(P)}}if(_.nodes&&(_.nodes=w.nodes.map(T=>ju(T,h))),_.source){let{inputId:T,...P}=_.source;_.source=P,T!=null&&(_.source.input=h[T])}if(_.type==="root")return new W2(_);if(_.type==="decl")return new B2(_);if(_.type==="rule")return new j2(_);if(_.type==="comment")return new H2(_);if(_.type==="atrule")return new G2(_);throw new Error("Unknown node type: "+w.type)}var q2=ju;ju.default=ju;let X2=N,AE=gt,Y2=EE,K2=ua,v_=F2,$2=Q,J2=q2,ME=o_,Q2=cE,TE=Cf,CE=h_,Z2=c_,eF=Af,tF=f_,nF=vE,RE=d_,IE=Hu,iF=$e;function yn(...w){return w.length===1&&Array.isArray(w[0])&&(w=w[0]),new v_(w)}yn.plugin=function(h,p){let _=!1;function T(...O){console&&console.warn&&!_&&(_=!0,console.warn(h+": postcss.plugin was deprecated. Migration guide:\nhttps://evilmartians.com/chronicles/postcss-8-plugin-migration"),e.LANG&&e.LANG.startsWith("cn")&&console.warn(h+":  postcss.plugin . :\nhttps://www.w3ctech.com/topic/2226"));let V=p(...O);return V.postcssPlugin=h,V.postcssVersion=new v_().version,V}let P;return Object.defineProperty(T,"postcss",{get(){return P||(P=T()),P}}),T.process=function(O,V,F){return yn([T(F)]).process(O,V)},T},yn.stringify=$2,yn.parse=tF,yn.fromJSON=J2,yn.list=nF,yn.comment=w=>new TE(w),yn.atRule=w=>new CE(w),yn.decl=w=>new AE(w),yn.rule=w=>new RE(w),yn.root=w=>new IE(w),yn.document=w=>new ME(w),yn.CssSyntaxError=X2,yn.Declaration=AE,yn.Container=K2,yn.Processor=v_,yn.Document=ME,yn.Comment=TE,yn.Warning=Q2,yn.AtRule=CE,yn.Result=Z2,yn.Input=eF,yn.Rule=RE,yn.Root=IE,yn.Node=iF,Y2.registerPostcss(yn);var rF=yn;yn.default=yn;const kn=en(rF);kn.stringify,kn.fromJSON,kn.plugin,kn.parse,kn.list,kn.document,kn.comment,kn.atRule,kn.rule,kn.decl,kn.root,kn.CssSyntaxError,kn.Declaration,kn.Container,kn.Processor,kn.Document,kn.Comment,kn.Warning,kn.AtRule,kn.Result,kn.Input,kn.Rule,kn.Root,kn.Node;var sF=Object.defineProperty,oF=(w,h,p)=>h in w?sF(w,h,{enumerable:!0,configurable:!0,writable:!0,value:p}):w[h]=p,Lr=(w,h,p)=>oF(w,typeof h!="symbol"?h+"":h,p);function aF(w){return w&&w.__esModule&&Object.prototype.hasOwnProperty.call(w,"default")?w.default:w}function lF(w){if(w.__esModule)return w;var h=w.default;if(typeof h=="function"){var p=function _(){return this instanceof _?Reflect.construct(h,arguments,this.constructor):h.apply(this,arguments)};p.prototype=h.prototype}else p={};return Object.defineProperty(p,"__esModule",{value:!0}),Object.keys(w).forEach(function(_){var T=Object.getOwnPropertyDescriptor(w,_);Object.defineProperty(p,_,T.get?T:{enumerable:!0,get:function(){return w[_]}})}),p}var __={exports:{}},Dn=String,DE=function(){return{isColorSupported:!1,reset:Dn,bold:Dn,dim:Dn,italic:Dn,underline:Dn,inverse:Dn,hidden:Dn,strikethrough:Dn,black:Dn,red:Dn,green:Dn,yellow:Dn,blue:Dn,magenta:Dn,cyan:Dn,white:Dn,gray:Dn,bgBlack:Dn,bgRed:Dn,bgGreen:Dn,bgYellow:Dn,bgBlue:Dn,bgMagenta:Dn,bgCyan:Dn,bgWhite:Dn}};__.exports=DE(),__.exports.createColors=DE;var cF=__.exports;const Xr=lF(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"})));let PE=cF,OE=Xr,y_=class AO extends Error{constructor(h,p,_,T,P,O){super(h),this.name="CssSyntaxError",this.reason=h,P&&(this.file=P),T&&(this.source=T),O&&(this.plugin=O),typeof p<"u"&&typeof _<"u"&&(typeof p=="number"?(this.line=p,this.column=_):(this.line=p.line,this.column=p.column,this.endLine=_.line,this.endColumn=_.column)),this.setMessage(),Error.captureStackTrace&&Error.captureStackTrace(this,AO)}setMessage(){this.message=this.plugin?this.plugin+": ":"",this.message+=this.file?this.file:"<css input>",typeof this.line<"u"&&(this.message+=":"+this.line+":"+this.column),this.message+=": "+this.reason}showSourceCode(h){if(!this.source)return"";let p=this.source;h==null&&(h=PE.isColorSupported),OE&&h&&(p=OE(p));let _=p.split(/\r?\n/),T=Math.max(this.line-3,0),P=Math.min(this.line+2,_.length),O=String(P).length,V,F;if(h){let{bold:$,gray:re,red:pe}=PE.createColors(!0);V=ke=>$(pe(ke)),F=ke=>re(ke)}else V=F=$=>$;return _.slice(T,P).map(($,re)=>{let pe=T+1+re,ke=" "+(" "+pe).slice(-O)+" | ";if(pe===this.line){let Le=F(ke.replace(/\d/g," "))+$.slice(0,this.column-1).replace(/[^\t]/g," ");return V(">")+F(ke)+$+"\n "+Le+V("^")}return" "+F(ke)+$}).join("\n")}toString(){let h=this.showSourceCode();return h&&(h="\n\n"+h+"\n"),this.name+": "+this.message+h}};var b_=y_;y_.default=y_;var qu={};qu.isClean=Symbol("isClean"),qu.my=Symbol("my");const LE={after:"\n",beforeClose:"\n",beforeComment:"\n",beforeDecl:"\n",beforeOpen:" ",beforeRule:"\n",colon:": ",commentLeft:" ",commentRight:" ",emptyBody:"",indent:"    ",semicolon:!1};function uF(w){return w[0].toUpperCase()+w.slice(1)}let w_=class{constructor(h){this.builder=h}atrule(h,p){let _="@"+h.name,T=h.params?this.rawValue(h,"params"):"";if(typeof h.raws.afterName<"u"?_+=h.raws.afterName:T&&(_+=" "),h.nodes)this.block(h,_+T);else{let P=(h.raws.between||"")+(p?";":"");this.builder(_+T+P,h)}}beforeAfter(h,p){let _;h.type==="decl"?_=this.raw(h,null,"beforeDecl"):h.type==="comment"?_=this.raw(h,null,"beforeComment"):p==="before"?_=this.raw(h,null,"beforeRule"):_=this.raw(h,null,"beforeClose");let T=h.parent,P=0;for(;T&&T.type!=="root";)P+=1,T=T.parent;if(_.includes("\n")){let O=this.raw(h,null,"indent");if(O.length)for(let V=0;V<P;V++)_+=O}return _}block(h,p){let _=this.raw(h,"between","beforeOpen");this.builder(p+_+"{",h,"start");let T;h.nodes&&h.nodes.length?(this.body(h),T=this.raw(h,"after")):T=this.raw(h,"after","emptyBody"),T&&this.builder(T),this.builder("}",h,"end")}body(h){let p=h.nodes.length-1;for(;p>0&&h.nodes[p].type==="comment";)p-=1;let _=this.raw(h,"semicolon");for(let T=0;T<h.nodes.length;T++){let P=h.nodes[T],O=this.raw(P,"before");O&&this.builder(O),this.stringify(P,p!==T||_)}}comment(h){let p=this.raw(h,"left","commentLeft"),_=this.raw(h,"right","commentRight");this.builder("/*"+p+h.text+_+"*/",h)}decl(h,p){let _=this.raw(h,"between","colon"),T=h.prop+_+this.rawValue(h,"value");h.important&&(T+=h.raws.important||" !important"),p&&(T+=";"),this.builder(T,h)}document(h){this.body(h)}raw(h,p,_){let T;if(_||(_=p),p&&(T=h.raws[p],typeof T<"u"))return T;let P=h.parent;if(_==="before"&&(!P||P.type==="root"&&P.first===h||P&&P.type==="document"))return"";if(!P)return LE[_];let O=h.root();if(O.rawCache||(O.rawCache={}),typeof O.rawCache[_]<"u")return O.rawCache[_];if(_==="before"||_==="after")return this.beforeAfter(h,_);{let V="raw"+uF(_);this[V]?T=this[V](O,h):O.walk(F=>{if(T=F.raws[p],typeof T<"u")return!1})}return typeof T>"u"&&(T=LE[_]),O.rawCache[_]=T,T}rawBeforeClose(h){let p;return h.walk(_=>{if(_.nodes&&_.nodes.length>0&&typeof _.raws.after<"u")return p=_.raws.after,p.includes("\n")&&(p=p.replace(/[^\n]+$/,"")),!1}),p&&(p=p.replace(/\S/g,"")),p}rawBeforeComment(h,p){let _;return h.walkComments(T=>{if(typeof T.raws.before<"u")return _=T.raws.before,_.includes("\n")&&(_=_.replace(/[^\n]+$/,"")),!1}),typeof _>"u"?_=this.raw(p,null,"beforeDecl"):_&&(_=_.replace(/\S/g,"")),_}rawBeforeDecl(h,p){let _;return h.walkDecls(T=>{if(typeof T.raws.before<"u")return _=T.raws.before,_.includes("\n")&&(_=_.replace(/[^\n]+$/,"")),!1}),typeof _>"u"?_=this.raw(p,null,"beforeRule"):_&&(_=_.replace(/\S/g,"")),_}rawBeforeOpen(h){let p;return h.walk(_=>{if(_.type!=="decl"&&(p=_.raws.between,typeof p<"u"))return!1}),p}rawBeforeRule(h){let p;return h.walk(_=>{if(_.nodes&&(_.parent!==h||h.first!==_)&&typeof _.raws.before<"u")return p=_.raws.before,p.includes("\n")&&(p=p.replace(/[^\n]+$/,"")),!1}),p&&(p=p.replace(/\S/g,"")),p}rawColon(h){let p;return h.walkDecls(_=>{if(typeof _.raws.between<"u")return p=_.raws.between.replace(/[^\s:]/g,""),!1}),p}rawEmptyBody(h){let p;return h.walk(_=>{if(_.nodes&&_.nodes.length===0&&(p=_.raws.after,typeof p<"u"))return!1}),p}rawIndent(h){if(h.raws.indent)return h.raws.indent;let p;return h.walk(_=>{let T=_.parent;if(T&&T!==h&&T.parent&&T.parent===h&&typeof _.raws.before<"u"){let P=_.raws.before.split("\n");return p=P[P.length-1],p=p.replace(/\S/g,""),!1}}),p}rawSemicolon(h){let p;return h.walk(_=>{if(_.nodes&&_.nodes.length&&_.last.type==="decl"&&(p=_.raws.semicolon,typeof p<"u"))return!1}),p}rawValue(h,p){let _=h[p],T=h.raws[p];return T&&T.value===_?T.raw:_}root(h){this.body(h),h.raws.after&&this.builder(h.raws.after)}rule(h){this.block(h,this.rawValue(h,"selector")),h.raws.ownSemicolon&&this.builder(h.raws.ownSemicolon,h,"end")}stringify(h,p){if(!this[h.type])throw new Error("Unknown AST node type "+h.type+". Maybe you need to change PostCSS stringifier.");this[h.type](h,p)}};var kE=w_;w_.default=w_;let hF=kE;function S_(w,h){new hF(h).stringify(w)}var Bf=S_;S_.default=S_;let{isClean:zf,my:dF}=qu,fF=b_,pF=kE,mF=Bf;function x_(w,h){let p=new w.constructor;for(let _ in w){if(!Object.prototype.hasOwnProperty.call(w,_)||_==="proxyCache")continue;let T=w[_],P=typeof T;_==="parent"&&P==="object"?h&&(p[_]=h):_==="source"?p[_]=T:Array.isArray(T)?p[_]=T.map(O=>x_(O,p)):(P==="object"&&T!==null&&(T=x_(T)),p[_]=T)}return p}let E_=class{constructor(h={}){this.raws={},this[zf]=!1,this[dF]=!0;for(let p in h)if(p==="nodes"){this.nodes=[];for(let _ of h[p])typeof _.clone=="function"?this.append(_.clone()):this.append(_)}else this[p]=h[p]}addToError(h){if(h.postcssNode=this,h.stack&&this.source&&/\n\s{4}at /.test(h.stack)){let p=this.source;h.stack=h.stack.replace(/\n\s{4}at /,"$&".concat(p.input.from,":").concat(p.start.line,":").concat(p.start.column,"$&"))}return h}after(h){return this.parent.insertAfter(this,h),this}assign(h={}){for(let p in h)this[p]=h[p];return this}before(h){return this.parent.insertBefore(this,h),this}cleanRaws(h){delete this.raws.before,delete this.raws.after,h||delete this.raws.between}clone(h={}){let p=x_(this);for(let _ in h)p[_]=h[_];return p}cloneAfter(h={}){let p=this.clone(h);return this.parent.insertAfter(this,p),p}cloneBefore(h={}){let p=this.clone(h);return this.parent.insertBefore(this,p),p}error(h,p={}){if(this.source){let{end:_,start:T}=this.rangeBy(p);return this.source.input.error(h,{column:T.column,line:T.line},{column:_.column,line:_.line},p)}return new fF(h)}getProxyProcessor(){return{get(h,p){return p==="proxyOf"?h:p==="root"?()=>h.root().toProxy():h[p]},set(h,p,_){return h[p]===_||(h[p]=_,(p==="prop"||p==="value"||p==="name"||p==="params"||p==="important"||p==="text")&&h.markDirty()),!0}}}markDirty(){if(this[zf]){this[zf]=!1;let h=this;for(;h=h.parent;)h[zf]=!1}}next(){if(!this.parent)return;let h=this.parent.index(this);return this.parent.nodes[h+1]}positionBy(h,p){let _=this.source.start;if(h.index)_=this.positionInside(h.index,p);else if(h.word){p=this.toString();let T=p.indexOf(h.word);T!==-1&&(_=this.positionInside(T,p))}return _}positionInside(h,p){let _=p||this.toString(),T=this.source.start.column,P=this.source.start.line;for(let O=0;O<h;O++)_[O]==="\n"?(T=1,P+=1):T+=1;return{column:T,line:P}}prev(){if(!this.parent)return;let h=this.parent.index(this);return this.parent.nodes[h-1]}rangeBy(h){let p={column:this.source.start.column,line:this.source.start.line},_=this.source.end?{column:this.source.end.column+1,line:this.source.end.line}:{column:p.column+1,line:p.line};if(h.word){let T=this.toString(),P=T.indexOf(h.word);P!==-1&&(p=this.positionInside(P,T),_=this.positionInside(P+h.word.length,T))}else h.start?p={column:h.start.column,line:h.start.line}:h.index&&(p=this.positionInside(h.index)),h.end?_={column:h.end.column,line:h.end.line}:typeof h.endIndex=="number"?_=this.positionInside(h.endIndex):h.index&&(_=this.positionInside(h.index+1));return(_.line<p.line||_.line===p.line&&_.column<=p.column)&&(_={column:p.column+1,line:p.line}),{end:_,start:p}}raw(h,p){return new pF().raw(this,h,p)}remove(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this}replaceWith(...h){if(this.parent){let p=this,_=!1;for(let T of h)T===this?_=!0:_?(this.parent.insertAfter(p,T),p=T):this.parent.insertBefore(p,T);_||this.remove()}return this}root(){let h=this;for(;h.parent&&h.parent.type!=="document";)h=h.parent;return h}toJSON(h,p){let _={},T=p==null;p=p||new Map;let P=0;for(let O in this){if(!Object.prototype.hasOwnProperty.call(this,O)||O==="parent"||O==="proxyCache")continue;let V=this[O];if(Array.isArray(V))_[O]=V.map(F=>typeof F=="object"&&F.toJSON?F.toJSON(null,p):F);else if(typeof V=="object"&&V.toJSON)_[O]=V.toJSON(null,p);else if(O==="source"){let F=p.get(V.input);F==null&&(F=P,p.set(V.input,P),P++),_[O]={end:V.end,inputId:F,start:V.start}}else _[O]=V}return T&&(_.inputs=[...p.keys()].map(O=>O.toJSON())),_}toProxy(){return this.proxyCache||(this.proxyCache=new Proxy(this,this.getProxyProcessor())),this.proxyCache}toString(h=mF){h.stringify&&(h=h.stringify);let p="";return h(this,_=>{p+=_}),p}warn(h,p,_){let T={node:this};for(let P in _)T[P]=_[P];return h.warn(p,T)}get proxyOf(){return this}};var Hf=E_;E_.default=E_;let gF=Hf,A_=class extends gF{constructor(h){h&&typeof h.value<"u"&&typeof h.value!="string"&&(h={...h,value:String(h.value)}),super(h),this.type="decl"}get variable(){return this.prop.startsWith("--")||this.prop[0]==="$"}};var Gf=A_;A_.default=A_;let vF="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";var _F={nanoid:(w=21)=>{let h="",p=w;for(;p--;)h+=vF[Math.random()*64|0];return h}};let{SourceMapConsumer:UE,SourceMapGenerator:NE}=Xr,{existsSync:yF,readFileSync:bF}=Xr,{dirname:M_,join:wF}=Xr;function SF(w){return Buffer?Buffer.from(w,"base64").toString():window.atob(w)}let T_=class{constructor(h,p){if(p.map===!1)return;this.loadAnnotation(h),this.inline=this.startWith(this.annotation,"data:");let _=p.map?p.map.prev:void 0,T=this.loadMap(p.from,_);!this.mapFile&&p.from&&(this.mapFile=p.from),this.mapFile&&(this.root=M_(this.mapFile)),T&&(this.text=T)}consumer(){return this.consumerCache||(this.consumerCache=new UE(this.text)),this.consumerCache}decodeInline(h){let p=/^data:application\/json;charset=utf-?8;base64,/,_=/^data:application\/json;base64,/,T=/^data:application\/json;charset=utf-?8,/,P=/^data:application\/json,/;if(T.test(h)||P.test(h))return decodeURIComponent(h.substr(RegExp.lastMatch.length));if(p.test(h)||_.test(h))return SF(h.substr(RegExp.lastMatch.length));let O=h.match(/data:application\/json;([^,]+),/)[1];throw new Error("Unsupported source map encoding "+O)}getAnnotationURL(h){return h.replace(/^\/\*\s*# sourceMappingURL=/,"").trim()}isMap(h){return typeof h!="object"?!1:typeof h.mappings=="string"||typeof h._mappings=="string"||Array.isArray(h.sections)}loadAnnotation(h){let p=h.match(/\/\*\s*# sourceMappingURL=/gm);if(!p)return;let _=h.lastIndexOf(p.pop()),T=h.indexOf("*/",_);_>-1&&T>-1&&(this.annotation=this.getAnnotationURL(h.substring(_,T)))}loadFile(h){if(this.root=M_(h),yF(h))return this.mapFile=h,bF(h,"utf-8").toString().trim()}loadMap(h,p){if(p===!1)return!1;if(p){if(typeof p=="string")return p;if(typeof p=="function"){let _=p(h);if(_){let T=this.loadFile(_);if(!T)throw new Error("Unable to load previous source map: "+_.toString());return T}}else{if(p instanceof UE)return NE.fromSourceMap(p).toString();if(p instanceof NE)return p.toString();if(this.isMap(p))return JSON.stringify(p);throw new Error("Unsupported previous source map format: "+p.toString())}}else{if(this.inline)return this.decodeInline(this.annotation);if(this.annotation){let _=this.annotation;return h&&(_=wF(M_(h),_)),this.loadFile(_)}}}startWith(h,p){return h?h.substr(0,p.length)===p:!1}withContent(){return!!(this.consumer().sourcesContent&&this.consumer().sourcesContent.length>0)}};var FE=T_;T_.default=T_;let{SourceMapConsumer:xF,SourceMapGenerator:EF}=Xr,{fileURLToPath:BE,pathToFileURL:Vf}=Xr,{isAbsolute:C_,resolve:R_}=Xr,{nanoid:AF}=_F,I_=Xr,zE=b_,MF=FE,D_=Symbol("fromOffsetCache"),TF=!!(xF&&EF),HE=!!(R_&&C_),Wf=class{constructor(h,p={}){if(h===null||typeof h>"u"||typeof h=="object"&&!h.toString)throw new Error("PostCSS received ".concat(h," instead of CSS string"));if(this.css=h.toString(),this.css[0]==="\uFEFF"||this.css[0]===""?(this.hasBOM=!0,this.css=this.css.slice(1)):this.hasBOM=!1,p.from&&(!HE||/^\w+:\/\//.test(p.from)||C_(p.from)?this.file=p.from:this.file=R_(p.from)),HE&&TF){let _=new MF(this.css,p);if(_.text){this.map=_;let T=_.consumer().file;!this.file&&T&&(this.file=this.mapResolve(T))}}this.file||(this.id="<input css "+AF(6)+">"),this.map&&(this.map.file=this.from)}error(h,p,_,T={}){let P,O,V;if(p&&typeof p=="object"){let $=p,re=_;if(typeof $.offset=="number"){let pe=this.fromOffset($.offset);p=pe.line,_=pe.col}else p=$.line,_=$.column;if(typeof re.offset=="number"){let pe=this.fromOffset(re.offset);O=pe.line,V=pe.col}else O=re.line,V=re.column}else if(!_){let $=this.fromOffset(p);p=$.line,_=$.col}let F=this.origin(p,_,O,V);return F?P=new zE(h,F.endLine===void 0?F.line:{column:F.column,line:F.line},F.endLine===void 0?F.column:{column:F.endColumn,line:F.endLine},F.source,F.file,T.plugin):P=new zE(h,O===void 0?p:{column:_,line:p},O===void 0?_:{column:V,line:O},this.css,this.file,T.plugin),P.input={column:_,endColumn:V,endLine:O,line:p,source:this.css},this.file&&(Vf&&(P.input.url=Vf(this.file).toString()),P.input.file=this.file),P}fromOffset(h){let p,_;if(this[D_])_=this[D_];else{let P=this.css.split("\n");_=new Array(P.length);let O=0;for(let V=0,F=P.length;V<F;V++)_[V]=O,O+=P[V].length+1;this[D_]=_}p=_[_.length-1];let T=0;if(h>=p)T=_.length-1;else{let P=_.length-2,O;for(;T<P;)if(O=T+(P-T>>1),h<_[O])P=O-1;else if(h>=_[O+1])T=O+1;else{T=O;break}}return{col:h-_[T]+1,line:T+1}}mapResolve(h){return/^\w+:\/\//.test(h)?h:R_(this.map.consumer().sourceRoot||this.map.root||".",h)}origin(h,p,_,T){if(!this.map)return!1;let P=this.map.consumer(),O=P.originalPositionFor({column:p,line:h});if(!O.source)return!1;let V;typeof _=="number"&&(V=P.originalPositionFor({column:T,line:_}));let F;C_(O.source)?F=Vf(O.source):F=new URL(O.source,this.map.consumer().sourceRoot||Vf(this.map.mapFile));let $={column:O.column,endColumn:V&&V.column,endLine:V&&V.line,line:O.line,url:F.toString()};if(F.protocol==="file:")if(BE)$.file=BE(F);else throw new Error("file: protocol is not available in this PostCSS build");let re=P.sourceContentFor(O.source);return re&&($.source=re),$}toJSON(){let h={};for(let p of["hasBOM","css","file","id"])this[p]!=null&&(h[p]=this[p]);return this.map&&(h.map={...this.map},h.map.consumerCache&&(h.map.consumerCache=void 0)),h}get from(){return this.file||this.id}};var jf=Wf;Wf.default=Wf,I_&&I_.registerInput&&I_.registerInput(Wf);let{SourceMapConsumer:GE,SourceMapGenerator:qf}=Xr,{dirname:Xf,relative:VE,resolve:WE,sep:jE}=Xr,{pathToFileURL:qE}=Xr,CF=jf,RF=!!(GE&&qf),IF=!!(Xf&&WE&&VE&&jE);var XE=class{constructor(h,p,_,T){this.stringify=h,this.mapOpts=_.map||{},this.root=p,this.opts=_,this.css=T,this.originalCSS=T,this.usesFileUrls=!this.mapOpts.from&&this.mapOpts.absolute,this.memoizedFileURLs=new Map,this.memoizedPaths=new Map,this.memoizedURLs=new Map}addAnnotation(){let h;this.isInline()?h="data:application/json;base64,"+this.toBase64(this.map.toString()):typeof this.mapOpts.annotation=="string"?h=this.mapOpts.annotation:typeof this.mapOpts.annotation=="function"?h=this.mapOpts.annotation(this.opts.to,this.root):h=this.outputFile()+".map";let p="\n";this.css.includes("\r\n")&&(p="\r\n"),this.css+=p+"/*# sourceMappingURL="+h+" */"}applyPrevMaps(){for(let h of this.previous()){let p=this.toUrl(this.path(h.file)),_=h.root||Xf(h.file),T;this.mapOpts.sourcesContent===!1?(T=new GE(h.text),T.sourcesContent&&(T.sourcesContent=null)):T=h.consumer(),this.map.applySourceMap(T,p,this.toUrl(this.path(_)))}}clearAnnotation(){if(this.mapOpts.annotation!==!1)if(this.root){let h;for(let p=this.root.nodes.length-1;p>=0;p--)h=this.root.nodes[p],h.type==="comment"&&h.text.indexOf("# sourceMappingURL=")===0&&this.root.removeChild(p)}else this.css&&(this.css=this.css.replace(/\n*?\/\*#[\S\s]*?\*\/$/gm,""))}generate(){if(this.clearAnnotation(),IF&&RF&&this.isMap())return this.generateMap();{let h="";return this.stringify(this.root,p=>{h+=p}),[h]}}generateMap(){if(this.root)this.generateString();else if(this.previous().length===1){let h=this.previous()[0].consumer();h.file=this.outputFile(),this.map=qf.fromSourceMap(h,{ignoreInvalidMapping:!0})}else this.map=new qf({file:this.outputFile(),ignoreInvalidMapping:!0}),this.map.addMapping({generated:{column:0,line:1},original:{column:0,line:1},source:this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>"});return this.isSourcesContent()&&this.setSourcesContent(),this.root&&this.previous().length>0&&this.applyPrevMaps(),this.isAnnotation()&&this.addAnnotation(),this.isInline()?[this.css]:[this.css,this.map]}generateString(){this.css="",this.map=new qf({file:this.outputFile(),ignoreInvalidMapping:!0});let h=1,p=1,_="<no source>",T={generated:{column:0,line:0},original:{column:0,line:0},source:""},P,O;this.stringify(this.root,(V,F,$)=>{if(this.css+=V,F&&$!=="end"&&(T.generated.line=h,T.generated.column=p-1,F.source&&F.source.start?(T.source=this.sourcePath(F),T.original.line=F.source.start.line,T.original.column=F.source.start.column-1,this.map.addMapping(T)):(T.source=_,T.original.line=1,T.original.column=0,this.map.addMapping(T))),P=V.match(/\n/g),P?(h+=P.length,O=V.lastIndexOf("\n"),p=V.length-O):p+=V.length,F&&$!=="start"){let re=F.parent||{raws:{}};(!(F.type==="decl"||F.type==="atrule"&&!F.nodes)||F!==re.last||re.raws.semicolon)&&(F.source&&F.source.end?(T.source=this.sourcePath(F),T.original.line=F.source.end.line,T.original.column=F.source.end.column-1,T.generated.line=h,T.generated.column=p-2,this.map.addMapping(T)):(T.source=_,T.original.line=1,T.original.column=0,T.generated.line=h,T.generated.column=p-1,this.map.addMapping(T)))}})}isAnnotation(){return this.isInline()?!0:typeof this.mapOpts.annotation<"u"?this.mapOpts.annotation:this.previous().length?this.previous().some(h=>h.annotation):!0}isInline(){if(typeof this.mapOpts.inline<"u")return this.mapOpts.inline;let h=this.mapOpts.annotation;return typeof h<"u"&&h!==!0?!1:this.previous().length?this.previous().some(p=>p.inline):!0}isMap(){return typeof this.opts.map<"u"?!!this.opts.map:this.previous().length>0}isSourcesContent(){return typeof this.mapOpts.sourcesContent<"u"?this.mapOpts.sourcesContent:this.previous().length?this.previous().some(h=>h.withContent()):!0}outputFile(){return this.opts.to?this.path(this.opts.to):this.opts.from?this.path(this.opts.from):"to.css"}path(h){if(this.mapOpts.absolute||h.charCodeAt(0)===60||/^\w+:\/\//.test(h))return h;let p=this.memoizedPaths.get(h);if(p)return p;let _=this.opts.to?Xf(this.opts.to):".";typeof this.mapOpts.annotation=="string"&&(_=Xf(WE(_,this.mapOpts.annotation)));let T=VE(_,h);return this.memoizedPaths.set(h,T),T}previous(){if(!this.previousMaps)if(this.previousMaps=[],this.root)this.root.walk(h=>{if(h.source&&h.source.input.map){let p=h.source.input.map;this.previousMaps.includes(p)||this.previousMaps.push(p)}});else{let h=new CF(this.originalCSS,this.opts);h.map&&this.previousMaps.push(h.map)}return this.previousMaps}setSourcesContent(){let h={};if(this.root)this.root.walk(p=>{if(p.source){let _=p.source.input.from;if(_&&!h[_]){h[_]=!0;let T=this.usesFileUrls?this.toFileUrl(_):this.toUrl(this.path(_));this.map.setSourceContent(T,p.source.input.css)}}});else if(this.css){let p=this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>";this.map.setSourceContent(p,this.css)}}sourcePath(h){return this.mapOpts.from?this.toUrl(this.mapOpts.from):this.usesFileUrls?this.toFileUrl(h.source.input.from):this.toUrl(this.path(h.source.input.from))}toBase64(h){return Buffer?Buffer.from(h).toString("base64"):window.btoa(unescape(encodeURIComponent(h)))}toFileUrl(h){let p=this.memoizedFileURLs.get(h);if(p)return p;if(qE){let _=qE(h).toString();return this.memoizedFileURLs.set(h,_),_}else throw new Error("`map.absolute` option is not available in this PostCSS build")}toUrl(h){let p=this.memoizedURLs.get(h);if(p)return p;jE==="\\"&&(h=h.replace(/\\/g,"/"));let _=encodeURI(h).replace(/[#?]/g,encodeURIComponent);return this.memoizedURLs.set(h,_),_}};let DF=Hf,P_=class extends DF{constructor(h){super(h),this.type="comment"}};var Yf=P_;P_.default=P_;let{isClean:YE,my:KE}=qu,$E=Gf,JE=Yf,PF=Hf,QE,O_,L_,ZE;function eA(w){return w.map(h=>(h.nodes&&(h.nodes=eA(h.nodes)),delete h.source,h))}function tA(w){if(w[YE]=!1,w.proxyOf.nodes)for(let h of w.proxyOf.nodes)tA(h)}let zs=class MO extends PF{append(...h){for(let p of h){let _=this.normalize(p,this.last);for(let T of _)this.proxyOf.nodes.push(T)}return this.markDirty(),this}cleanRaws(h){if(super.cleanRaws(h),this.nodes)for(let p of this.nodes)p.cleanRaws(h)}each(h){if(!this.proxyOf.nodes)return;let p=this.getIterator(),_,T;for(;this.indexes[p]<this.proxyOf.nodes.length&&(_=this.indexes[p],T=h(this.proxyOf.nodes[_],_),T!==!1);)this.indexes[p]+=1;return delete this.indexes[p],T}every(h){return this.nodes.every(h)}getIterator(){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={}),this.lastEach+=1;let h=this.lastEach;return this.indexes[h]=0,h}getProxyProcessor(){return{get(h,p){return p==="proxyOf"?h:h[p]?p==="each"||typeof p=="string"&&p.startsWith("walk")?(..._)=>h[p](..._.map(T=>typeof T=="function"?(P,O)=>T(P.toProxy(),O):T)):p==="every"||p==="some"?_=>h[p]((T,...P)=>_(T.toProxy(),...P)):p==="root"?()=>h.root().toProxy():p==="nodes"?h.nodes.map(_=>_.toProxy()):p==="first"||p==="last"?h[p].toProxy():h[p]:h[p]},set(h,p,_){return h[p]===_||(h[p]=_,(p==="name"||p==="params"||p==="selector")&&h.markDirty()),!0}}}index(h){return typeof h=="number"?h:(h.proxyOf&&(h=h.proxyOf),this.proxyOf.nodes.indexOf(h))}insertAfter(h,p){let _=this.index(h),T=this.normalize(p,this.proxyOf.nodes[_]).reverse();_=this.index(h);for(let O of T)this.proxyOf.nodes.splice(_+1,0,O);let P;for(let O in this.indexes)P=this.indexes[O],_<P&&(this.indexes[O]=P+T.length);return this.markDirty(),this}insertBefore(h,p){let _=this.index(h),T=_===0?"prepend":!1,P=this.normalize(p,this.proxyOf.nodes[_],T).reverse();_=this.index(h);for(let V of P)this.proxyOf.nodes.splice(_,0,V);let O;for(let V in this.indexes)O=this.indexes[V],_<=O&&(this.indexes[V]=O+P.length);return this.markDirty(),this}normalize(h,p){if(typeof h=="string")h=eA(QE(h).nodes);else if(typeof h>"u")h=[];else if(Array.isArray(h)){h=h.slice(0);for(let T of h)T.parent&&T.parent.removeChild(T,"ignore")}else if(h.type==="root"&&this.type!=="document"){h=h.nodes.slice(0);for(let T of h)T.parent&&T.parent.removeChild(T,"ignore")}else if(h.type)h=[h];else if(h.prop){if(typeof h.value>"u")throw new Error("Value field is missed in node creation");typeof h.value!="string"&&(h.value=String(h.value)),h=[new $E(h)]}else if(h.selector)h=[new O_(h)];else if(h.name)h=[new L_(h)];else if(h.text)h=[new JE(h)];else throw new Error("Unknown node type in node creation");return h.map(T=>(T[KE]||MO.rebuild(T),T=T.proxyOf,T.parent&&T.parent.removeChild(T),T[YE]&&tA(T),typeof T.raws.before>"u"&&p&&typeof p.raws.before<"u"&&(T.raws.before=p.raws.before.replace(/\S/g,"")),T.parent=this.proxyOf,T))}prepend(...h){h=h.reverse();for(let p of h){let _=this.normalize(p,this.first,"prepend").reverse();for(let T of _)this.proxyOf.nodes.unshift(T);for(let T in this.indexes)this.indexes[T]=this.indexes[T]+_.length}return this.markDirty(),this}push(h){return h.parent=this,this.proxyOf.nodes.push(h),this}removeAll(){for(let h of this.proxyOf.nodes)h.parent=void 0;return this.proxyOf.nodes=[],this.markDirty(),this}removeChild(h){h=this.index(h),this.proxyOf.nodes[h].parent=void 0,this.proxyOf.nodes.splice(h,1);let p;for(let _ in this.indexes)p=this.indexes[_],p>=h&&(this.indexes[_]=p-1);return this.markDirty(),this}replaceValues(h,p,_){return _||(_=p,p={}),this.walkDecls(T=>{p.props&&!p.props.includes(T.prop)||p.fast&&!T.value.includes(p.fast)||(T.value=T.value.replace(h,_))}),this.markDirty(),this}some(h){return this.nodes.some(h)}walk(h){return this.each((p,_)=>{let T;try{T=h(p,_)}catch(P){throw p.addToError(P)}return T!==!1&&p.walk&&(T=p.walk(h)),T})}walkAtRules(h,p){return p?h instanceof RegExp?this.walk((_,T)=>{if(_.type==="atrule"&&h.test(_.name))return p(_,T)}):this.walk((_,T)=>{if(_.type==="atrule"&&_.name===h)return p(_,T)}):(p=h,this.walk((_,T)=>{if(_.type==="atrule")return p(_,T)}))}walkComments(h){return this.walk((p,_)=>{if(p.type==="comment")return h(p,_)})}walkDecls(h,p){return p?h instanceof RegExp?this.walk((_,T)=>{if(_.type==="decl"&&h.test(_.prop))return p(_,T)}):this.walk((_,T)=>{if(_.type==="decl"&&_.prop===h)return p(_,T)}):(p=h,this.walk((_,T)=>{if(_.type==="decl")return p(_,T)}))}walkRules(h,p){return p?h instanceof RegExp?this.walk((_,T)=>{if(_.type==="rule"&&h.test(_.selector))return p(_,T)}):this.walk((_,T)=>{if(_.type==="rule"&&_.selector===h)return p(_,T)}):(p=h,this.walk((_,T)=>{if(_.type==="rule")return p(_,T)}))}get first(){if(this.proxyOf.nodes)return this.proxyOf.nodes[0]}get last(){if(this.proxyOf.nodes)return this.proxyOf.nodes[this.proxyOf.nodes.length-1]}};zs.registerParse=w=>{QE=w},zs.registerRule=w=>{O_=w},zs.registerAtRule=w=>{L_=w},zs.registerRoot=w=>{ZE=w};var ha=zs;zs.default=zs,zs.rebuild=w=>{w.type==="atrule"?Object.setPrototypeOf(w,L_.prototype):w.type==="rule"?Object.setPrototypeOf(w,O_.prototype):w.type==="decl"?Object.setPrototypeOf(w,$E.prototype):w.type==="comment"?Object.setPrototypeOf(w,JE.prototype):w.type==="root"&&Object.setPrototypeOf(w,ZE.prototype),w[KE]=!0,w.nodes&&w.nodes.forEach(h=>{zs.rebuild(h)})};let OF=ha,nA,iA,Xu=class extends OF{constructor(h){super({type:"document",...h}),this.nodes||(this.nodes=[])}toResult(h={}){return new nA(new iA,this,h).stringify()}};Xu.registerLazyResult=w=>{nA=w},Xu.registerProcessor=w=>{iA=w};var k_=Xu;Xu.default=Xu;let U_=class{constructor(h,p={}){if(this.type="warning",this.text=h,p.node&&p.node.source){let _=p.node.rangeBy(p);this.line=_.start.line,this.column=_.start.column,this.endLine=_.end.line,this.endColumn=_.end.column}for(let _ in p)this[_]=p[_]}toString(){return this.node?this.node.error(this.text,{index:this.index,plugin:this.plugin,word:this.word}).message:this.plugin?this.plugin+": "+this.text:this.text}};var rA=U_;U_.default=U_;let LF=rA,N_=class{constructor(h,p,_){this.processor=h,this.messages=[],this.root=p,this.opts=_,this.css=void 0,this.map=void 0}toString(){return this.css}warn(h,p={}){p.plugin||this.lastPlugin&&this.lastPlugin.postcssPlugin&&(p.plugin=this.lastPlugin.postcssPlugin);let _=new LF(h,p);return this.messages.push(_),_}warnings(){return this.messages.filter(h=>h.type==="warning")}get content(){return this.css}};var F_=N_;N_.default=N_;const B_=39,sA=34,Kf=92,oA=47,$f=10,Yu=32,Jf=12,Qf=9,Zf=13,kF=91,UF=93,NF=40,FF=41,BF=123,zF=125,HF=59,GF=42,VF=58,WF=64,ep=/[\t\n\f\r "#'()/;[\\\]{}]/g,tp=/[\t\n\f\r !"#'():;@[\\\]{}]|\/(?=\*)/g,jF=/.[\r\n"'(/\\]/,aA=/[\da-f]/i;var qF=function(h,p={}){let _=h.css.valueOf(),T=p.ignoreErrors,P,O,V,F,$,re,pe,ke,Le,Ve,Me=_.length,_e=0,It=[],xt=[];function et(){return _e}function Pt(mn){throw h.error("Unclosed "+mn,_e)}function xn(){return xt.length===0&&_e>=Me}function Pn(mn){if(xt.length)return xt.pop();if(_e>=Me)return;let bi=mn?mn.ignoreUnclosed:!1;switch(P=_.charCodeAt(_e),P){case $f:case Yu:case Qf:case Zf:case Jf:{O=_e;do O+=1,P=_.charCodeAt(O);while(P===Yu||P===$f||P===Qf||P===Zf||P===Jf);Ve=["space",_.slice(_e,O)],_e=O-1;break}case kF:case UF:case BF:case zF:case VF:case HF:case FF:{let wi=String.fromCharCode(P);Ve=[wi,wi,_e];break}case NF:{if(ke=It.length?It.pop()[1]:"",Le=_.charCodeAt(_e+1),ke==="url"&&Le!==B_&&Le!==sA&&Le!==Yu&&Le!==$f&&Le!==Qf&&Le!==Jf&&Le!==Zf){O=_e;do{if(re=!1,O=_.indexOf(")",O+1),O===-1)if(T||bi){O=_e;break}else Pt("bracket");for(pe=O;_.charCodeAt(pe-1)===Kf;)pe-=1,re=!re}while(re);Ve=["brackets",_.slice(_e,O+1),_e,O],_e=O}else O=_.indexOf(")",_e+1),F=_.slice(_e,O+1),O===-1||jF.test(F)?Ve=["(","(",_e]:(Ve=["brackets",F,_e,O],_e=O);break}case B_:case sA:{V=P===B_?"'":'"',O=_e;do{if(re=!1,O=_.indexOf(V,O+1),O===-1)if(T||bi){O=_e+1;break}else Pt("string");for(pe=O;_.charCodeAt(pe-1)===Kf;)pe-=1,re=!re}while(re);Ve=["string",_.slice(_e,O+1),_e,O],_e=O;break}case WF:{ep.lastIndex=_e+1,ep.test(_),ep.lastIndex===0?O=_.length-1:O=ep.lastIndex-2,Ve=["at-word",_.slice(_e,O+1),_e,O],_e=O;break}case Kf:{for(O=_e,$=!0;_.charCodeAt(O+1)===Kf;)O+=1,$=!$;if(P=_.charCodeAt(O+1),$&&P!==oA&&P!==Yu&&P!==$f&&P!==Qf&&P!==Zf&&P!==Jf&&(O+=1,aA.test(_.charAt(O)))){for(;aA.test(_.charAt(O+1));)O+=1;_.charCodeAt(O+1)===Yu&&(O+=1)}Ve=["word",_.slice(_e,O+1),_e,O],_e=O;break}default:{P===oA&&_.charCodeAt(_e+1)===GF?(O=_.indexOf("*/",_e+2)+1,O===0&&(T||bi?O=_.length:Pt("comment")),Ve=["comment",_.slice(_e,O+1),_e,O],_e=O):(tp.lastIndex=_e+1,tp.test(_),tp.lastIndex===0?O=_.length-1:O=tp.lastIndex-2,Ve=["word",_.slice(_e,O+1),_e,O],It.push(Ve),_e=O);break}}return _e++,Ve}function yi(mn){xt.push(mn)}return{back:yi,endOfFile:xn,nextToken:Pn,position:et}};let lA=ha,np=class extends lA{constructor(h){super(h),this.type="atrule"}append(...h){return this.proxyOf.nodes||(this.nodes=[]),super.append(...h)}prepend(...h){return this.proxyOf.nodes||(this.nodes=[]),super.prepend(...h)}};var z_=np;np.default=np,lA.registerAtRule(np);let cA=ha,uA,hA,Xl=class extends cA{constructor(h){super(h),this.type="root",this.nodes||(this.nodes=[])}normalize(h,p,_){let T=super.normalize(h);if(p){if(_==="prepend")this.nodes.length>1?p.raws.before=this.nodes[1].raws.before:delete p.raws.before;else if(this.first!==p)for(let P of T)P.raws.before=p.raws.before}return T}removeChild(h,p){let _=this.index(h);return!p&&_===0&&this.nodes.length>1&&(this.nodes[1].raws.before=this.nodes[_].raws.before),super.removeChild(h)}toResult(h={}){return new uA(new hA,this,h).stringify()}};Xl.registerLazyResult=w=>{uA=w},Xl.registerProcessor=w=>{hA=w};var Ku=Xl;Xl.default=Xl,cA.registerRoot(Xl);let $u={comma(w){return $u.split(w,[","],!0)},space(w){let h=[" ","\n","	"];return $u.split(w,h)},split(w,h,p){let _=[],T="",P=!1,O=0,V=!1,F="",$=!1;for(let re of w)$?$=!1:re==="\\"?$=!0:V?re===F&&(V=!1):re==='"'||re==="'"?(V=!0,F=re):re==="("?O+=1:re===")"?O>0&&(O-=1):O===0&&h.includes(re)&&(P=!0),P?(T!==""&&_.push(T.trim()),T="",P=!1):T+=re;return(p||T!=="")&&_.push(T.trim()),_}};var dA=$u;$u.default=$u;let fA=ha,XF=dA,ip=class extends fA{constructor(h){super(h),this.type="rule",this.nodes||(this.nodes=[])}get selectors(){return XF.comma(this.selector)}set selectors(h){let p=this.selector?this.selector.match(/,\s*/):null,_=p?p[0]:","+this.raw("between","beforeOpen");this.selector=h.join(_)}};var H_=ip;ip.default=ip,fA.registerRule(ip);let YF=Gf,KF=qF,$F=Yf,JF=z_,QF=Ku,pA=H_;const mA={empty:!0,space:!0};function ZF(w){for(let h=w.length-1;h>=0;h--){let p=w[h],_=p[3]||p[2];if(_)return _}}var eB=class{constructor(h){this.input=h,this.root=new QF,this.current=this.root,this.spaces="",this.semicolon=!1,this.createTokenizer(),this.root.source={input:h,start:{column:1,line:1,offset:0}}}atrule(h){let p=new JF;p.name=h[1].slice(1),p.name===""&&this.unnamedAtrule(p,h),this.init(p,h[2]);let _,T,P,O=!1,V=!1,F=[],$=[];for(;!this.tokenizer.endOfFile();){if(h=this.tokenizer.nextToken(),_=h[0],_==="("||_==="["?$.push(_==="("?")":"]"):_==="{"&&$.length>0?$.push("}"):_===$[$.length-1]&&$.pop(),$.length===0)if(_===";"){p.source.end=this.getPosition(h[2]),p.source.end.offset++,this.semicolon=!0;break}else if(_==="{"){V=!0;break}else if(_==="}"){if(F.length>0){for(P=F.length-1,T=F[P];T&&T[0]==="space";)T=F[--P];T&&(p.source.end=this.getPosition(T[3]||T[2]),p.source.end.offset++)}this.end(h);break}else F.push(h);else F.push(h);if(this.tokenizer.endOfFile()){O=!0;break}}p.raws.between=this.spacesAndCommentsFromEnd(F),F.length?(p.raws.afterName=this.spacesAndCommentsFromStart(F),this.raw(p,"params",F),O&&(h=F[F.length-1],p.source.end=this.getPosition(h[3]||h[2]),p.source.end.offset++,this.spaces=p.raws.between,p.raws.between="")):(p.raws.afterName="",p.params=""),V&&(p.nodes=[],this.current=p)}checkMissedSemicolon(h){let p=this.colon(h);if(p===!1)return;let _=0,T;for(let P=p-1;P>=0&&(T=h[P],!(T[0]!=="space"&&(_+=1,_===2)));P--);throw this.input.error("Missed semicolon",T[0]==="word"?T[3]+1:T[2])}colon(h){let p=0,_,T,P;for(let[O,V]of h.entries()){if(_=V,T=_[0],T==="("&&(p+=1),T===")"&&(p-=1),p===0&&T===":")if(!P)this.doubleColon(_);else{if(P[0]==="word"&&P[1]==="progid")continue;return O}P=_}return!1}comment(h){let p=new $F;this.init(p,h[2]),p.source.end=this.getPosition(h[3]||h[2]),p.source.end.offset++;let _=h[1].slice(2,-2);if(/^\s*$/.test(_))p.text="",p.raws.left=_,p.raws.right="";else{let T=_.match(/^(\s*)([^]*\S)(\s*)$/);p.text=T[2],p.raws.left=T[1],p.raws.right=T[3]}}createTokenizer(){this.tokenizer=KF(this.input)}decl(h,p){let _=new YF;this.init(_,h[0][2]);let T=h[h.length-1];for(T[0]===";"&&(this.semicolon=!0,h.pop()),_.source.end=this.getPosition(T[3]||T[2]||ZF(h)),_.source.end.offset++;h[0][0]!=="word";)h.length===1&&this.unknownWord(h),_.raws.before+=h.shift()[1];for(_.source.start=this.getPosition(h[0][2]),_.prop="";h.length;){let $=h[0][0];if($===":"||$==="space"||$==="comment")break;_.prop+=h.shift()[1]}_.raws.between="";let P;for(;h.length;)if(P=h.shift(),P[0]===":"){_.raws.between+=P[1];break}else P[0]==="word"&&/\w/.test(P[1])&&this.unknownWord([P]),_.raws.between+=P[1];(_.prop[0]==="_"||_.prop[0]==="*")&&(_.raws.before+=_.prop[0],_.prop=_.prop.slice(1));let O=[],V;for(;h.length&&(V=h[0][0],!(V!=="space"&&V!=="comment"));)O.push(h.shift());this.precheckMissedSemicolon(h);for(let $=h.length-1;$>=0;$--){if(P=h[$],P[1].toLowerCase()==="!important"){_.important=!0;let re=this.stringFrom(h,$);re=this.spacesFromEnd(h)+re,re!==" !important"&&(_.raws.important=re);break}else if(P[1].toLowerCase()==="important"){let re=h.slice(0),pe="";for(let ke=$;ke>0;ke--){let Le=re[ke][0];if(pe.trim().indexOf("!")===0&&Le!=="space")break;pe=re.pop()[1]+pe}pe.trim().indexOf("!")===0&&(_.important=!0,_.raws.important=pe,h=re)}if(P[0]!=="space"&&P[0]!=="comment")break}h.some($=>$[0]!=="space"&&$[0]!=="comment")&&(_.raws.between+=O.map($=>$[1]).join(""),O=[]),this.raw(_,"value",O.concat(h),p),_.value.includes(":")&&!p&&this.checkMissedSemicolon(h)}doubleColon(h){throw this.input.error("Double colon",{offset:h[2]},{offset:h[2]+h[1].length})}emptyRule(h){let p=new pA;this.init(p,h[2]),p.selector="",p.raws.between="",this.current=p}end(h){this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.semicolon=!1,this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.spaces="",this.current.parent?(this.current.source.end=this.getPosition(h[2]),this.current.source.end.offset++,this.current=this.current.parent):this.unexpectedClose(h)}endFile(){this.current.parent&&this.unclosedBlock(),this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.root.source.end=this.getPosition(this.tokenizer.position())}freeSemicolon(h){if(this.spaces+=h[1],this.current.nodes){let p=this.current.nodes[this.current.nodes.length-1];p&&p.type==="rule"&&!p.raws.ownSemicolon&&(p.raws.ownSemicolon=this.spaces,this.spaces="")}}getPosition(h){let p=this.input.fromOffset(h);return{column:p.col,line:p.line,offset:h}}init(h,p){this.current.push(h),h.source={input:this.input,start:this.getPosition(p)},h.raws.before=this.spaces,this.spaces="",h.type!=="comment"&&(this.semicolon=!1)}other(h){let p=!1,_=null,T=!1,P=null,O=[],V=h[1].startsWith("--"),F=[],$=h;for(;$;){if(_=$[0],F.push($),_==="("||_==="[")P||(P=$),O.push(_==="("?")":"]");else if(V&&T&&_==="{")P||(P=$),O.push("}");else if(O.length===0)if(_===";")if(T){this.decl(F,V);return}else break;else if(_==="{"){this.rule(F);return}else if(_==="}"){this.tokenizer.back(F.pop()),p=!0;break}else _===":"&&(T=!0);else _===O[O.length-1]&&(O.pop(),O.length===0&&(P=null));$=this.tokenizer.nextToken()}if(this.tokenizer.endOfFile()&&(p=!0),O.length>0&&this.unclosedBracket(P),p&&T){if(!V)for(;F.length&&($=F[F.length-1][0],!($!=="space"&&$!=="comment"));)this.tokenizer.back(F.pop());this.decl(F,V)}else this.unknownWord(F)}parse(){let h;for(;!this.tokenizer.endOfFile();)switch(h=this.tokenizer.nextToken(),h[0]){case"space":this.spaces+=h[1];break;case";":this.freeSemicolon(h);break;case"}":this.end(h);break;case"comment":this.comment(h);break;case"at-word":this.atrule(h);break;case"{":this.emptyRule(h);break;default:this.other(h);break}this.endFile()}precheckMissedSemicolon(){}raw(h,p,_,T){let P,O,V=_.length,F="",$=!0,re,pe;for(let ke=0;ke<V;ke+=1)P=_[ke],O=P[0],O==="space"&&ke===V-1&&!T?$=!1:O==="comment"?(pe=_[ke-1]?_[ke-1][0]:"empty",re=_[ke+1]?_[ke+1][0]:"empty",!mA[pe]&&!mA[re]?F.slice(-1)===","?$=!1:F+=P[1]:$=!1):F+=P[1];if(!$){let ke=_.reduce((Le,Ve)=>Le+Ve[1],"");h.raws[p]={raw:ke,value:F}}h[p]=F}rule(h){h.pop();let p=new pA;this.init(p,h[0][2]),p.raws.between=this.spacesAndCommentsFromEnd(h),this.raw(p,"selector",h),this.current=p}spacesAndCommentsFromEnd(h){let p,_="";for(;h.length&&(p=h[h.length-1][0],!(p!=="space"&&p!=="comment"));)_=h.pop()[1]+_;return _}spacesAndCommentsFromStart(h){let p,_="";for(;h.length&&(p=h[0][0],!(p!=="space"&&p!=="comment"));)_+=h.shift()[1];return _}spacesFromEnd(h){let p,_="";for(;h.length&&(p=h[h.length-1][0],p==="space");)_=h.pop()[1]+_;return _}stringFrom(h,p){let _="";for(let T=p;T<h.length;T++)_+=h[T][1];return h.splice(p,h.length-p),_}unclosedBlock(){let h=this.current.source.start;throw this.input.error("Unclosed block",h.line,h.column)}unclosedBracket(h){throw this.input.error("Unclosed bracket",{offset:h[2]},{offset:h[2]+1})}unexpectedClose(h){throw this.input.error("Unexpected }",{offset:h[2]},{offset:h[2]+1})}unknownWord(h){throw this.input.error("Unknown word",{offset:h[0][2]},{offset:h[0][2]+h[0][1].length})}unnamedAtrule(h,p){throw this.input.error("At-rule without name",{offset:p[2]},{offset:p[2]+p[1].length})}};let tB=ha,nB=eB,iB=jf;function rp(w,h){let p=new iB(w,h),_=new nB(p);try{_.parse()}catch(T){throw T}return _.root}var G_=rp;rp.default=rp,tB.registerParse(rp);let{isClean:bs,my:rB}=qu,sB=XE,oB=Bf,aB=ha,lB=k_,gA=F_,cB=G_,uB=Ku;const hB={atrule:"AtRule",comment:"Comment",decl:"Declaration",document:"Document",root:"Root",rule:"Rule"},dB={AtRule:!0,AtRuleExit:!0,Comment:!0,CommentExit:!0,Declaration:!0,DeclarationExit:!0,Document:!0,DocumentExit:!0,Once:!0,OnceExit:!0,postcssPlugin:!0,prepare:!0,Root:!0,RootExit:!0,Rule:!0,RuleExit:!0},fB={Once:!0,postcssPlugin:!0,prepare:!0},Yl=0;function Ju(w){return typeof w=="object"&&typeof w.then=="function"}function vA(w){let h=!1,p=hB[w.type];return w.type==="decl"?h=w.prop.toLowerCase():w.type==="atrule"&&(h=w.name.toLowerCase()),h&&w.append?[p,p+"-"+h,Yl,p+"Exit",p+"Exit-"+h]:h?[p,p+"-"+h,p+"Exit",p+"Exit-"+h]:w.append?[p,Yl,p+"Exit"]:[p,p+"Exit"]}function _A(w){let h;return w.type==="document"?h=["Document",Yl,"DocumentExit"]:w.type==="root"?h=["Root",Yl,"RootExit"]:h=vA(w),{eventIndex:0,events:h,iterator:0,node:w,visitorIndex:0,visitors:[]}}function V_(w){return w[bs]=!1,w.nodes&&w.nodes.forEach(h=>V_(h)),w}let W_={},Kl=class TO{constructor(h,p,_){this.stringified=!1,this.processed=!1;let T;if(typeof p=="object"&&p!==null&&(p.type==="root"||p.type==="document"))T=V_(p);else if(p instanceof TO||p instanceof gA)T=V_(p.root),p.map&&(typeof _.map>"u"&&(_.map={}),_.map.inline||(_.map.inline=!1),_.map.prev=p.map);else{let P=cB;_.syntax&&(P=_.syntax.parse),_.parser&&(P=_.parser),P.parse&&(P=P.parse);try{T=P(p,_)}catch(O){this.processed=!0,this.error=O}T&&!T[rB]&&aB.rebuild(T)}this.result=new gA(h,T,_),this.helpers={...W_,postcss:W_,result:this.result},this.plugins=this.processor.plugins.map(P=>typeof P=="object"&&P.prepare?{...P,...P.prepare(this.result)}:P)}async(){return this.error?Promise.reject(this.error):this.processed?Promise.resolve(this.result):(this.processing||(this.processing=this.runAsync()),this.processing)}catch(h){return this.async().catch(h)}finally(h){return this.async().then(h,h)}getAsyncError(){throw new Error("Use process(css).then(cb) to work with async plugins")}handleError(h,p){let _=this.result.lastPlugin;try{p&&p.addToError(h),this.error=h,h.name==="CssSyntaxError"&&!h.plugin?(h.plugin=_.postcssPlugin,h.setMessage()):_.postcssVersion}catch(T){console&&console.error&&console.error(T)}return h}prepareVisitors(){this.listeners={};let h=(p,_,T)=>{this.listeners[_]||(this.listeners[_]=[]),this.listeners[_].push([p,T])};for(let p of this.plugins)if(typeof p=="object")for(let _ in p){if(!dB[_]&&/^[A-Z]/.test(_))throw new Error("Unknown event ".concat(_," in ").concat(p.postcssPlugin,". Try to update PostCSS (").concat(this.processor.version," now)."));if(!fB[_])if(typeof p[_]=="object")for(let T in p[_])T==="*"?h(p,_,p[_][T]):h(p,_+"-"+T.toLowerCase(),p[_][T]);else typeof p[_]=="function"&&h(p,_,p[_])}this.hasListener=Object.keys(this.listeners).length>0}async runAsync(){this.plugin=0;for(let h=0;h<this.plugins.length;h++){let p=this.plugins[h],_=this.runOnRoot(p);if(Ju(_))try{await _}catch(T){throw this.handleError(T)}}if(this.prepareVisitors(),this.hasListener){let h=this.result.root;for(;!h[bs];){h[bs]=!0;let p=[_A(h)];for(;p.length>0;){let _=this.visitTick(p);if(Ju(_))try{await _}catch(T){let P=p[p.length-1].node;throw this.handleError(T,P)}}}if(this.listeners.OnceExit)for(let[p,_]of this.listeners.OnceExit){this.result.lastPlugin=p;try{if(h.type==="document"){let T=h.nodes.map(P=>_(P,this.helpers));await Promise.all(T)}else await _(h,this.helpers)}catch(T){throw this.handleError(T)}}}return this.processed=!0,this.stringify()}runOnRoot(h){this.result.lastPlugin=h;try{if(typeof h=="object"&&h.Once){if(this.result.root.type==="document"){let p=this.result.root.nodes.map(_=>h.Once(_,this.helpers));return Ju(p[0])?Promise.all(p):p}return h.Once(this.result.root,this.helpers)}else if(typeof h=="function")return h(this.result.root,this.result)}catch(p){throw this.handleError(p)}}stringify(){if(this.error)throw this.error;if(this.stringified)return this.result;this.stringified=!0,this.sync();let h=this.result.opts,p=oB;h.syntax&&(p=h.syntax.stringify),h.stringifier&&(p=h.stringifier),p.stringify&&(p=p.stringify);let T=new sB(p,this.result.root,this.result.opts).generate();return this.result.css=T[0],this.result.map=T[1],this.result}sync(){if(this.error)throw this.error;if(this.processed)return this.result;if(this.processed=!0,this.processing)throw this.getAsyncError();for(let h of this.plugins){let p=this.runOnRoot(h);if(Ju(p))throw this.getAsyncError()}if(this.prepareVisitors(),this.hasListener){let h=this.result.root;for(;!h[bs];)h[bs]=!0,this.walkSync(h);if(this.listeners.OnceExit)if(h.type==="document")for(let p of h.nodes)this.visitSync(this.listeners.OnceExit,p);else this.visitSync(this.listeners.OnceExit,h)}return this.result}then(h,p){return this.async().then(h,p)}toString(){return this.css}visitSync(h,p){for(let[_,T]of h){this.result.lastPlugin=_;let P;try{P=T(p,this.helpers)}catch(O){throw this.handleError(O,p.proxyOf)}if(p.type!=="root"&&p.type!=="document"&&!p.parent)return!0;if(Ju(P))throw this.getAsyncError()}}visitTick(h){let p=h[h.length-1],{node:_,visitors:T}=p;if(_.type!=="root"&&_.type!=="document"&&!_.parent){h.pop();return}if(T.length>0&&p.visitorIndex<T.length){let[O,V]=T[p.visitorIndex];p.visitorIndex+=1,p.visitorIndex===T.length&&(p.visitors=[],p.visitorIndex=0),this.result.lastPlugin=O;try{return V(_.toProxy(),this.helpers)}catch(F){throw this.handleError(F,_)}}if(p.iterator!==0){let O=p.iterator,V;for(;V=_.nodes[_.indexes[O]];)if(_.indexes[O]+=1,!V[bs]){V[bs]=!0,h.push(_A(V));return}p.iterator=0,delete _.indexes[O]}let P=p.events;for(;p.eventIndex<P.length;){let O=P[p.eventIndex];if(p.eventIndex+=1,O===Yl){_.nodes&&_.nodes.length&&(_[bs]=!0,p.iterator=_.getIterator());return}else if(this.listeners[O]){p.visitors=this.listeners[O];return}}h.pop()}walkSync(h){h[bs]=!0;let p=vA(h);for(let _ of p)if(_===Yl)h.nodes&&h.each(T=>{T[bs]||this.walkSync(T)});else{let T=this.listeners[_];if(T&&this.visitSync(T,h.toProxy()))return}}warnings(){return this.sync().warnings()}get content(){return this.stringify().content}get css(){return this.stringify().css}get map(){return this.stringify().map}get messages(){return this.sync().messages}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){return this.sync().root}get[Symbol.toStringTag](){return"LazyResult"}};Kl.registerPostcss=w=>{W_=w};var yA=Kl;Kl.default=Kl,uB.registerLazyResult(Kl),lB.registerLazyResult(Kl);let pB=XE,mB=Bf,gB=G_;const vB=F_;let j_=class{constructor(h,p,_){p=p.toString(),this.stringified=!1,this._processor=h,this._css=p,this._opts=_,this._map=void 0;let T,P=mB;this.result=new vB(this._processor,T,this._opts),this.result.css=p;let O=this;Object.defineProperty(this.result,"root",{get(){return O.root}});let V=new pB(P,T,this._opts,p);if(V.isMap()){let[F,$]=V.generate();F&&(this.result.css=F),$&&(this.result.map=$)}else V.clearAnnotation(),this.result.css=V.css}async(){return this.error?Promise.reject(this.error):Promise.resolve(this.result)}catch(h){return this.async().catch(h)}finally(h){return this.async().then(h,h)}sync(){if(this.error)throw this.error;return this.result}then(h,p){return this.async().then(h,p)}toString(){return this._css}warnings(){return[]}get content(){return this.result.css}get css(){return this.result.css}get map(){return this.result.map}get messages(){return[]}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){if(this._root)return this._root;let h,p=gB;try{h=p(this._css,this._opts)}catch(_){this.error=_}if(this.error)throw this.error;return this._root=h,h}get[Symbol.toStringTag](){return"NoWorkResult"}};var _B=j_;j_.default=j_;let yB=_B,bB=yA,wB=k_,SB=Ku,Qu=class{constructor(h=[]){this.version="8.4.38",this.plugins=this.normalize(h)}normalize(h){let p=[];for(let _ of h)if(_.postcss===!0?_=_():_.postcss&&(_=_.postcss),typeof _=="object"&&Array.isArray(_.plugins))p=p.concat(_.plugins);else if(typeof _=="object"&&_.postcssPlugin)p.push(_);else if(typeof _=="function")p.push(_);else if(!(typeof _=="object"&&(_.parse||_.stringify)))throw new Error(_+" is not a PostCSS plugin");return p}process(h,p={}){return!this.plugins.length&&!p.parser&&!p.stringifier&&!p.syntax?new yB(this,h,p):new bB(this,h,p)}use(h){return this.plugins=this.plugins.concat(this.normalize([h])),this}};var xB=Qu;Qu.default=Qu,SB.registerProcessor(Qu),wB.registerProcessor(Qu);let EB=Gf,AB=FE,MB=Yf,TB=z_,CB=jf,RB=Ku,IB=H_;function Zu(w,h){if(Array.isArray(w))return w.map(T=>Zu(T));let{inputs:p,..._}=w;if(p){h=[];for(let T of p){let P={...T,__proto__:CB.prototype};P.map&&(P.map={...P.map,__proto__:AB.prototype}),h.push(P)}}if(_.nodes&&(_.nodes=w.nodes.map(T=>Zu(T,h))),_.source){let{inputId:T,...P}=_.source;_.source=P,T!=null&&(_.source.input=h[T])}if(_.type==="root")return new RB(_);if(_.type==="decl")return new EB(_);if(_.type==="rule")return new IB(_);if(_.type==="comment")return new MB(_);if(_.type==="atrule")return new TB(_);throw new Error("Unknown node type: "+w.type)}var DB=Zu;Zu.default=Zu;let PB=b_,bA=Gf,OB=yA,LB=ha,q_=xB,kB=Bf,UB=DB,wA=k_,NB=rA,SA=Yf,xA=z_,FB=F_,BB=jf,zB=G_,HB=dA,EA=H_,AA=Ku,GB=Hf;function bn(...w){return w.length===1&&Array.isArray(w[0])&&(w=w[0]),new q_(w)}bn.plugin=function(h,p){let _=!1;function T(...O){console&&console.warn&&!_&&(_=!0,console.warn(h+": postcss.plugin was deprecated. Migration guide:\nhttps://evilmartians.com/chronicles/postcss-8-plugin-migration"),e.LANG&&e.LANG.startsWith("cn")&&console.warn(h+":  postcss.plugin . :\nhttps://www.w3ctech.com/topic/2226"));let V=p(...O);return V.postcssPlugin=h,V.postcssVersion=new q_().version,V}let P;return Object.defineProperty(T,"postcss",{get(){return P||(P=T()),P}}),T.process=function(O,V,F){return bn([T(F)]).process(O,V)},T},bn.stringify=kB,bn.parse=zB,bn.fromJSON=UB,bn.list=HB,bn.comment=w=>new SA(w),bn.atRule=w=>new xA(w),bn.decl=w=>new bA(w),bn.rule=w=>new EA(w),bn.root=w=>new AA(w),bn.document=w=>new wA(w),bn.CssSyntaxError=PB,bn.Declaration=bA,bn.Container=LB,bn.Processor=q_,bn.Document=wA,bn.Comment=SA,bn.Warning=NB,bn.AtRule=xA,bn.Result=FB,bn.Input=BB,bn.Rule=EA,bn.Root=AA,bn.Node=GB,OB.registerPostcss(bn);var VB=bn;bn.default=bn;const Un=aF(VB);Un.stringify,Un.fromJSON,Un.plugin,Un.parse,Un.list,Un.document,Un.comment,Un.atRule,Un.rule,Un.decl,Un.root,Un.CssSyntaxError,Un.Declaration,Un.Container,Un.Processor,Un.Document,Un.Comment,Un.Warning,Un.AtRule,Un.Result,Un.Input,Un.Rule,Un.Root,Un.Node;class X_{constructor(...h){Lr(this,"parentElement",null),Lr(this,"parentNode",null),Lr(this,"ownerDocument"),Lr(this,"firstChild",null),Lr(this,"lastChild",null),Lr(this,"previousSibling",null),Lr(this,"nextSibling",null),Lr(this,"ELEMENT_NODE",1),Lr(this,"TEXT_NODE",3),Lr(this,"nodeType"),Lr(this,"nodeName"),Lr(this,"RRNodeType")}get childNodes(){const h=[];let p=this.firstChild;for(;p;)h.push(p),p=p.nextSibling;return h}contains(h){if(h instanceof X_){if(h.ownerDocument!==this.ownerDocument)return!1;if(h===this)return!0}else return!1;for(;h.parentNode;){if(h.parentNode===this)return!0;h=h.parentNode}return!1}appendChild(h){throw new Error("RRDomException: Failed to execute 'appendChild' on 'RRNode': This RRNode type does not support this method.")}insertBefore(h,p){throw new Error("RRDomException: Failed to execute 'insertBefore' on 'RRNode': This RRNode type does not support this method.")}removeChild(h){throw new Error("RRDomException: Failed to execute 'removeChild' on 'RRNode': This RRNode type does not support this method.")}toString(){return"RRNode"}}const MA={Node:["childNodes","parentNode","parentElement","textContent"],ShadowRoot:["host","styleSheets"],Element:["shadowRoot","querySelector","querySelectorAll"],MutationObserver:[]},TA={Node:["contains","getRootNode"],ShadowRoot:["getSelection"],Element:[],MutationObserver:["constructor"]},sp={};function Y_(w){if(sp[w])return sp[w];const h=globalThis[w],p=h.prototype,_=w in MA?MA[w]:void 0,T=!!(_&&_.every(V=>{var F,$;return!!(($=(F=Object.getOwnPropertyDescriptor(p,V))==null?void 0:F.get)!=null&&$.toString().includes("[native code]"))})),P=w in TA?TA[w]:void 0,O=!!(P&&P.every(V=>{var F;return typeof p[V]=="function"&&((F=p[V])==null?void 0:F.toString().includes("[native code]"))}));if(T&&O)return sp[w]=h.prototype,h.prototype;try{const V=document.createElement("iframe");document.body.appendChild(V);const F=V.contentWindow;if(!F)return h.prototype;const $=F[w].prototype;return document.body.removeChild(V),$?sp[w]=$:p}catch(V){return p}}const K_={};function yo(w,h,p){var _;const T="".concat(w,".").concat(String(p));if(K_[T])return K_[T].call(h);const P=Y_(w),O=(_=Object.getOwnPropertyDescriptor(P,p))==null?void 0:_.get;return O?(K_[T]=O,O.call(h)):h[p]}const $_={};function CA(w,h,p){const _="".concat(w,".").concat(String(p));if($_[_])return $_[_].bind(h);const P=Y_(w)[p];return typeof P!="function"?h[p]:($_[_]=P,P.bind(h))}function WB(w){return yo("Node",w,"childNodes")}function jB(w){return yo("Node",w,"parentNode")}function qB(w){return yo("Node",w,"parentElement")}function XB(w){return yo("Node",w,"textContent")}function YB(w,h){return CA("Node",w,"contains")(h)}function KB(w){return CA("Node",w,"getRootNode")()}function $B(w){return!w||!("host"in w)?null:yo("ShadowRoot",w,"host")}function JB(w){return w.styleSheets}function QB(w){return!w||!("shadowRoot"in w)?null:yo("Element",w,"shadowRoot")}function ZB(w,h){return yo("Element",w,"querySelector")(h)}function e3(w,h){return yo("Element",w,"querySelectorAll")(h)}function RA(){return Y_("MutationObserver").constructor}const Yt={childNodes:WB,parentNode:jB,parentElement:qB,textContent:XB,contains:YB,getRootNode:KB,host:$B,styleSheets:JB,shadowRoot:QB,querySelector:ZB,querySelectorAll:e3,mutationObserver:RA};function Vi(w,h,p=document){const _={capture:!0,passive:!0};return p.addEventListener(w,h,_),()=>p.removeEventListener(w,h,_)}const $l="Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.";let IA={map:{},getId(){return console.error($l),-1},getNode(){return console.error($l),null},removeNodeFromMap(){console.error($l)},has(){return console.error($l),!1},reset(){console.error($l)}};typeof window<"u"&&window.Proxy&&window.Reflect&&(IA=new Proxy(IA,{get(w,h,p){return h==="map"&&console.error($l),Reflect.get(w,h,p)}}));function eh(w,h,p={}){let _=null,T=0;return function(...P){const O=Date.now();!T&&p.leading===!1&&(T=O);const V=h-(O-T),F=this;V<=0||V>h?(_&&(clearTimeout(_),_=null),T=O,w.apply(F,P)):!_&&p.trailing!==!1&&(_=setTimeout(()=>{T=p.leading===!1?0:Date.now(),_=null,w.apply(F,P)},V))}}function op(w,h,p,_,T=window){const P=T.Object.getOwnPropertyDescriptor(w,h);return T.Object.defineProperty(w,h,_?p:{set(O){setTimeout(()=>{p.set.call(this,O)},0),P&&P.set&&P.set.call(this,O)}}),()=>op(w,h,P||{},!0)}function Jl(w,h,p){try{if(!(h in w))return()=>{};const _=w[h],T=p(_);return typeof T=="function"&&(T.prototype=T.prototype||{},Object.defineProperties(T,{__rrweb_original__:{enumerable:!1,value:_}})),w[h]=T,()=>{w[h]=_}}catch(_){return()=>{}}}let ap=Date.now;/[1-9][0-9]{12}/.test(Date.now().toString())||(ap=()=>new Date().getTime());function DA(w){var h,p,_,T;const P=w.document;return{left:P.scrollingElement?P.scrollingElement.scrollLeft:w.pageXOffset!==void 0?w.pageXOffset:P.documentElement.scrollLeft||(P==null?void 0:P.body)&&((h=Yt.parentElement(P.body))==null?void 0:h.scrollLeft)||((p=P==null?void 0:P.body)==null?void 0:p.scrollLeft)||0,top:P.scrollingElement?P.scrollingElement.scrollTop:w.pageYOffset!==void 0?w.pageYOffset:(P==null?void 0:P.documentElement.scrollTop)||(P==null?void 0:P.body)&&((_=Yt.parentElement(P.body))==null?void 0:_.scrollTop)||((T=P==null?void 0:P.body)==null?void 0:T.scrollTop)||0}}function PA(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function OA(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function LA(w){return w?w.nodeType===w.ELEMENT_NODE?w:Yt.parentElement(w):null}function Wi(w,h,p,_){if(!w)return!1;const T=LA(w);if(!T)return!1;try{if(typeof h=="string"){if(T.classList.contains(h)||_&&T.closest("."+h)!==null)return!0}else if(st(T,h,_))return!0}catch(P){}return!!(p&&(T.matches(p)||_&&T.closest(p)!==null))}function t3(w,h){return h.getId(w)!==-1}function J_(w,h,p){return w.tagName==="TITLE"&&p.headTitleMutations?!0:h.getId(w)===wt}function kA(w,h){if(k(w))return!1;const p=h.getId(w);if(!h.has(p))return!0;const _=Yt.parentNode(w);return _&&_.nodeType===w.DOCUMENT_NODE?!1:_?kA(_,h):!0}function Q_(w){return!!w.changedTouches}function n3(w=window){"NodeList"in w&&!w.NodeList.prototype.forEach&&(w.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in w&&!w.DOMTokenList.prototype.forEach&&(w.DOMTokenList.prototype.forEach=Array.prototype.forEach)}function UA(w,h){return!!(w.nodeName==="IFRAME"&&h.getMeta(w))}function NA(w,h){return!!(w.nodeName==="LINK"&&w.nodeType===w.ELEMENT_NODE&&w.getAttribute&&w.getAttribute("rel")==="stylesheet"&&h.getMeta(w))}function Z_(w){return w?w instanceof X_&&"shadowRoot"in w?!!w.shadowRoot:!!Yt.shadowRoot(w):!1}class i3{constructor(){r(this,"id",1),r(this,"styleIDMap",new WeakMap),r(this,"idStyleMap",new Map)}getId(h){var p;return(p=this.styleIDMap.get(h))!=null?p:-1}has(h){return this.styleIDMap.has(h)}add(h,p){if(this.has(h))return this.getId(h);let _;return p===void 0?_=this.id++:_=p,this.styleIDMap.set(h,_),this.idStyleMap.set(_,h),_}getStyle(h){return this.idStyleMap.get(h)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}function FA(w){var h;let p=null;return"getRootNode"in w&&((h=Yt.getRootNode(w))==null?void 0:h.nodeType)===Node.DOCUMENT_FRAGMENT_NODE&&Yt.host(Yt.getRootNode(w))&&(p=Yt.host(Yt.getRootNode(w))),p}function r3(w){let h=w,p;for(;p=FA(h);)h=p;return h}function s3(w){const h=w.ownerDocument;if(!h)return!1;const p=r3(w);return Yt.contains(h,p)}function BA(w){const h=w.ownerDocument;return h?Yt.contains(h,w)||s3(w):!1}var sn=(w=>(w[w.DomContentLoaded=0]="DomContentLoaded",w[w.Load=1]="Load",w[w.FullSnapshot=2]="FullSnapshot",w[w.IncrementalSnapshot=3]="IncrementalSnapshot",w[w.Meta=4]="Meta",w[w.Custom=5]="Custom",w[w.Plugin=6]="Plugin",w))(sn||{}),$t=(w=>(w[w.Mutation=0]="Mutation",w[w.MouseMove=1]="MouseMove",w[w.MouseInteraction=2]="MouseInteraction",w[w.Scroll=3]="Scroll",w[w.ViewportResize=4]="ViewportResize",w[w.Input=5]="Input",w[w.TouchMove=6]="TouchMove",w[w.MediaInteraction=7]="MediaInteraction",w[w.StyleSheetRule=8]="StyleSheetRule",w[w.CanvasMutation=9]="CanvasMutation",w[w.Font=10]="Font",w[w.Log=11]="Log",w[w.Drag=12]="Drag",w[w.StyleDeclaration=13]="StyleDeclaration",w[w.Selection=14]="Selection",w[w.AdoptedStyleSheet=15]="AdoptedStyleSheet",w[w.CustomElement=16]="CustomElement",w))($t||{}),rr=(w=>(w[w.MouseUp=0]="MouseUp",w[w.MouseDown=1]="MouseDown",w[w.Click=2]="Click",w[w.ContextMenu=3]="ContextMenu",w[w.DblClick=4]="DblClick",w[w.Focus=5]="Focus",w[w.Blur=6]="Blur",w[w.TouchStart=7]="TouchStart",w[w.TouchMove_Departed=8]="TouchMove_Departed",w[w.TouchEnd=9]="TouchEnd",w[w.TouchCancel=10]="TouchCancel",w))(rr||{}),Hs=(w=>(w[w.Mouse=0]="Mouse",w[w.Pen=1]="Pen",w[w.Touch=2]="Touch",w))(Hs||{}),Ql=(w=>(w[w["2D"]=0]="2D",w[w.WebGL=1]="WebGL",w[w.WebGL2=2]="WebGL2",w))(Ql||{}),Zl=(w=>(w[w.Play=0]="Play",w[w.Pause=1]="Pause",w[w.Seeked=2]="Seeked",w[w.VolumeChange=3]="VolumeChange",w[w.RateChange=4]="RateChange",w))(Zl||{});function zA(w){return"__ln"in w}class o3{constructor(){r(this,"length",0),r(this,"head",null),r(this,"tail",null)}get(h){if(h>=this.length)throw new Error("Position outside of list range");let p=this.head;for(let _=0;_<h;_++)p=(p==null?void 0:p.next)||null;return p}addNode(h){const p={value:h,previous:null,next:null};if(h.__ln=p,h.previousSibling&&zA(h.previousSibling)){const _=h.previousSibling.__ln.next;p.next=_,p.previous=h.previousSibling.__ln,h.previousSibling.__ln.next=p,_&&(_.previous=p)}else if(h.nextSibling&&zA(h.nextSibling)&&h.nextSibling.__ln.previous){const _=h.nextSibling.__ln.previous;p.previous=_,p.next=h.nextSibling.__ln,h.nextSibling.__ln.previous=p,_&&(_.next=p)}else this.head&&(this.head.previous=p),p.next=this.head,this.head=p;p.next===null&&(this.tail=p),this.length++}removeNode(h){const p=h.__ln;this.head&&(p.previous?(p.previous.next=p.next,p.next?p.next.previous=p.previous:this.tail=p.previous):(this.head=p.next,this.head?this.head.previous=null:this.tail=null),h.__ln&&delete h.__ln,this.length--)}}const HA=(w,h)=>"".concat(w,"@").concat(h);class a3{constructor(){r(this,"frozen",!1),r(this,"locked",!1),r(this,"texts",[]),r(this,"attributes",[]),r(this,"attributeMap",new WeakMap),r(this,"removes",[]),r(this,"mapRemoves",[]),r(this,"movedMap",{}),r(this,"addedSet",new Set),r(this,"movedSet",new Set),r(this,"droppedSet",new Set),r(this,"mutationCb"),r(this,"blockClass"),r(this,"blockSelector"),r(this,"maskTextClass"),r(this,"maskTextSelector"),r(this,"inlineStylesheet"),r(this,"maskInputOptions"),r(this,"maskTextFn"),r(this,"maskInputFn"),r(this,"keepIframeSrcFn"),r(this,"recordCanvas"),r(this,"inlineImages"),r(this,"slimDOMOptions"),r(this,"dataURLOptions"),r(this,"doc"),r(this,"mirror"),r(this,"iframeManager"),r(this,"stylesheetManager"),r(this,"shadowDomManager"),r(this,"canvasManager"),r(this,"processedNodeManager"),r(this,"unattachedDoc"),r(this,"processMutations",h=>{h.forEach(this.processMutation),this.emit()}),r(this,"emit",()=>{if(this.frozen||this.locked)return;const h=[],p=new Set,_=new o3,T=F=>{let $=F,re=wt;for(;re===wt;)$=$&&$.nextSibling,re=$&&this.mirror.getId($);return re},P=F=>{const $=Yt.parentNode(F);if(!$||!BA(F)||$.tagName==="TEXTAREA")return;const re=k($)?this.mirror.getId(FA(F)):this.mirror.getId($),pe=T(F);if(re===-1||pe===-1)return _.addNode(F);const ke=Et(F,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskTextClass:this.maskTextClass,maskTextSelector:this.maskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:Le=>{UA(Le,this.mirror)&&this.iframeManager.addIframe(Le),NA(Le,this.mirror)&&this.stylesheetManager.trackLinkElement(Le),Z_(F)&&this.shadowDomManager.addShadowRoot(Yt.shadowRoot(F),this.doc)},onIframeLoad:(Le,Ve)=>{this.iframeManager.attachIframe(Le,Ve),this.shadowDomManager.observeAttachShadow(Le)},onStylesheetLoad:(Le,Ve)=>{this.stylesheetManager.attachLinkElement(Le,Ve)}});ke&&(h.push({parentId:re,nextId:pe,node:ke}),p.add(ke.id))};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const F of this.movedSet)GA(this.removes,F,this.mirror)&&!this.movedSet.has(Yt.parentNode(F))||P(F);for(const F of this.addedSet)!VA(this.droppedSet,F)&&!GA(this.removes,F,this.mirror)||VA(this.movedSet,F)?P(F):this.droppedSet.add(F);let O=null;for(;_.length;){let F=null;if(O){const $=this.mirror.getId(Yt.parentNode(O.value)),re=T(O.value);$!==-1&&re!==-1&&(F=O)}if(!F){let $=_.tail;for(;$;){const re=$;if($=$.previous,re){const pe=this.mirror.getId(Yt.parentNode(re.value));if(T(re.value)===-1)continue;if(pe!==-1){F=re;break}else{const Le=re.value,Ve=Yt.parentNode(Le);if(Ve&&Ve.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const Me=Yt.host(Ve);if(this.mirror.getId(Me)!==-1){F=re;break}}}}}}if(!F){for(;_.head;)_.removeNode(_.head.value);break}O=F.previous,_.removeNode(F.value),P(F.value)}const V={texts:this.texts.map(F=>{const $=F.node,re=Yt.parentNode($);return re&&re.tagName==="TEXTAREA"&&this.genTextAreaValueMutation(re),{id:this.mirror.getId($),value:F.value}}).filter(F=>!p.has(F.id)).filter(F=>this.mirror.has(F.id)),attributes:this.attributes.map(F=>{const{attributes:$}=F;if(typeof $.style=="string"){const re=JSON.stringify(F.styleDiff),pe=JSON.stringify(F._unchangedStyles);re.length<$.style.length&&(re+pe).split("var(").length===$.style.split("var(").length&&($.style=F.styleDiff)}return{id:this.mirror.getId(F.node),attributes:$}}).filter(F=>!p.has(F.id)).filter(F=>this.mirror.has(F.id)),removes:this.removes,adds:h};!V.texts.length&&!V.attributes.length&&!V.removes.length&&!V.adds.length||(this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(V))}),r(this,"genTextAreaValueMutation",h=>{let p=this.attributeMap.get(h);p||(p={node:h,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(p),this.attributeMap.set(h,p)),p.attributes.value=Array.from(Yt.childNodes(h),_=>Yt.textContent(_)||"").join("")}),r(this,"processMutation",h=>{if(!J_(h.target,this.mirror,this.slimDOMOptions))switch(h.type){case"characterData":{const p=Yt.textContent(h.target);!Wi(h.target,this.blockClass,this.blockSelector,!1)&&p!==h.oldValue&&this.texts.push({value:Ye(h.target,this.maskTextClass,this.maskTextSelector,!0)&&p?this.maskTextFn?this.maskTextFn(p,LA(h.target)):p.replace(/[\S]/g,"*"):p,node:h.target});break}case"attributes":{const p=h.target;let _=h.attributeName,T=h.target.getAttribute(_);if(_==="value"){const O=ge(p);T=ee({element:p,maskInputOptions:this.maskInputOptions,tagName:p.tagName,type:O,value:T,maskInputFn:this.maskInputFn})}if(Wi(h.target,this.blockClass,this.blockSelector,!1)||T===h.oldValue)return;let P=this.attributeMap.get(h.target);if(p.tagName==="IFRAME"&&_==="src"&&!this.keepIframeSrcFn(T))if(!p.contentDocument)_="rr_src";else return;if(P||(P={node:h.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(P),this.attributeMap.set(h.target,P)),_==="type"&&p.tagName==="INPUT"&&(h.oldValue||"").toLowerCase()==="password"&&p.setAttribute("data-rr-is-password","true"),!Je(p.tagName,_))if(P.attributes[_]=je(this.doc,de(p.tagName),de(_),T),_==="style"){if(!this.unattachedDoc)try{this.unattachedDoc=document.implementation.createHTMLDocument()}catch(V){this.unattachedDoc=this.doc}const O=this.unattachedDoc.createElement("span");h.oldValue&&O.setAttribute("style",h.oldValue);for(const V of Array.from(p.style)){const F=p.style.getPropertyValue(V),$=p.style.getPropertyPriority(V);F!==O.style.getPropertyValue(V)||$!==O.style.getPropertyPriority(V)?$===""?P.styleDiff[V]=F:P.styleDiff[V]=[F,$]:P._unchangedStyles[V]=[F,$]}for(const V of Array.from(O.style))p.style.getPropertyValue(V)===""&&(P.styleDiff[V]=!1)}else _==="open"&&p.tagName==="DIALOG"&&(p.matches("dialog:modal")?P.attributes.rr_open_mode="modal":P.attributes.rr_open_mode="non-modal");break}case"childList":{if(Wi(h.target,this.blockClass,this.blockSelector,!0))return;if(h.target.tagName==="TEXTAREA"){this.genTextAreaValueMutation(h.target);return}h.addedNodes.forEach(p=>this.genAdds(p,h.target)),h.removedNodes.forEach(p=>{const _=this.mirror.getId(p),T=k(h.target)?this.mirror.getId(Yt.host(h.target)):this.mirror.getId(h.target);Wi(h.target,this.blockClass,this.blockSelector,!1)||J_(p,this.mirror,this.slimDOMOptions)||!t3(p,this.mirror)||(this.addedSet.has(p)?(ey(this.addedSet,p),this.droppedSet.add(p)):this.addedSet.has(h.target)&&_===-1||kA(h.target,this.mirror)||(this.movedSet.has(p)&&this.movedMap[HA(_,T)]?ey(this.movedSet,p):this.removes.push({parentId:T,id:_,isShadow:k(h.target)&&X(h.target)?!0:void 0})),this.mapRemoves.push(p))});break}}}),r(this,"genAdds",(h,p)=>{if(!this.processedNodeManager.inOtherBuffer(h,this)&&!(this.addedSet.has(h)||this.movedSet.has(h))){if(this.mirror.hasNode(h)){if(J_(h,this.mirror,this.slimDOMOptions))return;this.movedSet.add(h);let _=null;p&&this.mirror.hasNode(p)&&(_=this.mirror.getId(p)),_&&_!==-1&&(this.movedMap[HA(this.mirror.getId(h),_)]=!0)}else this.addedSet.add(h),this.droppedSet.delete(h);Wi(h,this.blockClass,this.blockSelector,!1)||(Yt.childNodes(h).forEach(_=>this.genAdds(_)),Z_(h)&&Yt.childNodes(Yt.shadowRoot(h)).forEach(_=>{this.processedNodeManager.add(_,this),this.genAdds(_,h)}))}})}init(h){["mutationCb","blockClass","blockSelector","maskTextClass","maskTextSelector","inlineStylesheet","maskInputOptions","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach(p=>{this[p]=h[p]})}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function ey(w,h){w.delete(h),Yt.childNodes(h).forEach(p=>ey(w,p))}function GA(w,h,p){return w.length===0?!1:l3(w,h,p)}function l3(w,h,p){let _=Yt.parentNode(h);for(;_;){const T=p.getId(_);if(w.some(P=>P.id===T))return!0;_=Yt.parentNode(_)}return!1}function VA(w,h){return w.size===0?!1:WA(w,h)}function WA(w,h){const p=Yt.parentNode(h);return p?w.has(p)?!0:WA(w,p):!1}let th;function c3(w){th=w}function u3(){th=void 0}const nn=w=>th?(...p)=>{try{return w(...p)}catch(_){if(th&&th(_)===!0)return;throw _}}:w,da=[];function nh(w){try{if("composedPath"in w){const h=w.composedPath();if(h.length)return h[0]}else if("path"in w&&w.path.length)return w.path[0]}catch(h){}return w&&w.target}function jA(w,h){const p=new a3;da.push(p),p.init(w);const _=new(RA())(nn(p.processMutations.bind(p)));return _.observe(h,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),_}function h3({mousemoveCb:w,sampling:h,doc:p,mirror:_}){if(h.mousemove===!1)return()=>{};const T=typeof h.mousemove=="number"?h.mousemove:50,P=typeof h.mousemoveCallback=="number"?h.mousemoveCallback:500;let O=[],V;const F=eh(nn(pe=>{const ke=Date.now()-V;w(O.map(Le=>(Le.timeOffset-=ke,Le)),pe),O=[],V=null}),P),$=nn(eh(nn(pe=>{const ke=nh(pe),{clientX:Le,clientY:Ve}=Q_(pe)?pe.changedTouches[0]:pe;V||(V=ap()),O.push({x:Le,y:Ve,id:_.getId(ke),timeOffset:ap()-V}),F(typeof DragEvent<"u"&&pe instanceof DragEvent?$t.Drag:pe instanceof MouseEvent?$t.MouseMove:$t.TouchMove)}),T,{trailing:!1})),re=[Vi("mousemove",$,p),Vi("touchmove",$,p),Vi("drag",$,p)];return nn(()=>{re.forEach(pe=>pe())})}function d3({mouseInteractionCb:w,doc:h,mirror:p,blockClass:_,blockSelector:T,sampling:P}){if(P.mouseInteraction===!1)return()=>{};const O=P.mouseInteraction===!0||P.mouseInteraction===void 0?{}:P.mouseInteraction,V=[];let F=null;const $=re=>pe=>{const ke=nh(pe);if(Wi(ke,_,T,!0))return;let Le=null,Ve=re;if("pointerType"in pe){switch(pe.pointerType){case"mouse":Le=Hs.Mouse;break;case"touch":Le=Hs.Touch;break;case"pen":Le=Hs.Pen;break}Le===Hs.Touch?rr[re]===rr.MouseDown?Ve="TouchStart":rr[re]===rr.MouseUp&&(Ve="TouchEnd"):Hs.Pen}else Q_(pe)&&(Le=Hs.Touch);Le!==null?(F=Le,(Ve.startsWith("Touch")&&Le===Hs.Touch||Ve.startsWith("Mouse")&&Le===Hs.Mouse)&&(Le=null)):rr[re]===rr.Click&&(Le=F,F=null);const Me=Q_(pe)?pe.changedTouches[0]:pe;if(!Me)return;const _e=p.getId(ke),{clientX:It,clientY:xt}=Me;nn(w)({type:rr[Ve],id:_e,x:It,y:xt,...Le!==null&&{pointerType:Le}})};return Object.keys(rr).filter(re=>Number.isNaN(Number(re))&&!re.endsWith("_Departed")&&O[re]!==!1).forEach(re=>{let pe=de(re);const ke=$(re);if(window.PointerEvent)switch(rr[re]){case rr.MouseDown:case rr.MouseUp:pe=pe.replace("mouse","pointer");break;case rr.TouchStart:case rr.TouchEnd:return}V.push(Vi(pe,ke,h))}),nn(()=>{V.forEach(re=>re())})}function qA({scrollCb:w,doc:h,mirror:p,blockClass:_,blockSelector:T,sampling:P}){const O=nn(eh(nn(V=>{const F=nh(V);if(!F||Wi(F,_,T,!0))return;const $=p.getId(F);if(F===h&&h.defaultView){const re=DA(h.defaultView);w({id:$,x:re.left,y:re.top})}else w({id:$,x:F.scrollLeft,y:F.scrollTop})}),P.scroll||100));return Vi("scroll",O,h)}function f3({viewportResizeCb:w},{win:h}){let p=-1,_=-1;const T=nn(eh(nn(()=>{const P=PA(),O=OA();(p!==P||_!==O)&&(w({width:Number(O),height:Number(P)}),p=P,_=O)}),200));return Vi("resize",T,h)}const p3=["INPUT","TEXTAREA","SELECT"],XA=new WeakMap;function m3({inputCb:w,doc:h,mirror:p,blockClass:_,blockSelector:T,ignoreClass:P,ignoreSelector:O,maskInputOptions:V,maskInputFn:F,sampling:$,userTriggeredOnInput:re}){function pe(xt){let et=nh(xt);const Pt=xt.isTrusted,xn=et&&et.tagName;if(et&&xn==="OPTION"&&(et=Yt.parentElement(et)),!et||!xn||p3.indexOf(xn)<0||Wi(et,_,T,!0)||et.classList.contains(P)||O&&et.matches(O))return;let Pn=et.value,yi=!1;const mn=ge(et)||"";mn==="radio"||mn==="checkbox"?yi=et.checked:(V[xn.toLowerCase()]||V[mn])&&(Pn=ee({element:et,maskInputOptions:V,tagName:xn,type:mn,value:Pn,maskInputFn:F})),ke(et,re?{text:Pn,isChecked:yi,userTriggered:Pt}:{text:Pn,isChecked:yi});const bi=et.name;mn==="radio"&&bi&&yi&&h.querySelectorAll('input[type="radio"][name="'.concat(bi,'"]')).forEach(wi=>{if(wi!==et){const kr=wi.value;ke(wi,re?{text:kr,isChecked:!yi,userTriggered:!1}:{text:kr,isChecked:!yi})}})}function ke(xt,et){const Pt=XA.get(xt);if(!Pt||Pt.text!==et.text||Pt.isChecked!==et.isChecked){XA.set(xt,et);const xn=p.getId(xt);nn(w)({...et,id:xn})}}const Ve=($.input==="last"?["change"]:["input","change"]).map(xt=>Vi(xt,nn(pe),h)),Me=h.defaultView;if(!Me)return()=>{Ve.forEach(xt=>xt())};const _e=Me.Object.getOwnPropertyDescriptor(Me.HTMLInputElement.prototype,"value"),It=[[Me.HTMLInputElement.prototype,"value"],[Me.HTMLInputElement.prototype,"checked"],[Me.HTMLSelectElement.prototype,"value"],[Me.HTMLTextAreaElement.prototype,"value"],[Me.HTMLSelectElement.prototype,"selectedIndex"],[Me.HTMLOptionElement.prototype,"selected"]];return _e&&_e.set&&Ve.push(...It.map(xt=>op(xt[0],xt[1],{set(){nn(pe)({target:this,isTrusted:!1})}},!1,Me))),nn(()=>{Ve.forEach(xt=>xt())})}function lp(w){const h=[];function p(_,T){if(cp("CSSGroupingRule")&&_.parentRule instanceof CSSGroupingRule||cp("CSSMediaRule")&&_.parentRule instanceof CSSMediaRule||cp("CSSSupportsRule")&&_.parentRule instanceof CSSSupportsRule||cp("CSSConditionRule")&&_.parentRule instanceof CSSConditionRule){const O=Array.from(_.parentRule.cssRules).indexOf(_);T.unshift(O)}else if(_.parentStyleSheet){const O=Array.from(_.parentStyleSheet.cssRules).indexOf(_);T.unshift(O)}return T}return p(w,h)}function bo(w,h,p){let _,T;return w?(w.ownerNode?_=h.getId(w.ownerNode):T=p.getId(w),{styleId:T,id:_}):{}}function g3({styleSheetRuleCb:w,mirror:h,stylesheetManager:p},{win:_}){if(!_.CSSStyleSheet||!_.CSSStyleSheet.prototype)return()=>{};const T=_.CSSStyleSheet.prototype.insertRule;_.CSSStyleSheet.prototype.insertRule=new Proxy(T,{apply:nn((re,pe,ke)=>{const[Le,Ve]=ke,{id:Me,styleId:_e}=bo(pe,h,p.styleMirror);return(Me&&Me!==-1||_e&&_e!==-1)&&w({id:Me,styleId:_e,adds:[{rule:Le,index:Ve}]}),re.apply(pe,ke)})}),_.CSSStyleSheet.prototype.addRule=function(re,pe,ke=this.cssRules.length){const Le="".concat(re," { ").concat(pe," }");return _.CSSStyleSheet.prototype.insertRule.apply(this,[Le,ke])};const P=_.CSSStyleSheet.prototype.deleteRule;_.CSSStyleSheet.prototype.deleteRule=new Proxy(P,{apply:nn((re,pe,ke)=>{const[Le]=ke,{id:Ve,styleId:Me}=bo(pe,h,p.styleMirror);return(Ve&&Ve!==-1||Me&&Me!==-1)&&w({id:Ve,styleId:Me,removes:[{index:Le}]}),re.apply(pe,ke)})}),_.CSSStyleSheet.prototype.removeRule=function(re){return _.CSSStyleSheet.prototype.deleteRule.apply(this,[re])};let O;_.CSSStyleSheet.prototype.replace&&(O=_.CSSStyleSheet.prototype.replace,_.CSSStyleSheet.prototype.replace=new Proxy(O,{apply:nn((re,pe,ke)=>{const[Le]=ke,{id:Ve,styleId:Me}=bo(pe,h,p.styleMirror);return(Ve&&Ve!==-1||Me&&Me!==-1)&&w({id:Ve,styleId:Me,replace:Le}),re.apply(pe,ke)})}));let V;_.CSSStyleSheet.prototype.replaceSync&&(V=_.CSSStyleSheet.prototype.replaceSync,_.CSSStyleSheet.prototype.replaceSync=new Proxy(V,{apply:nn((re,pe,ke)=>{const[Le]=ke,{id:Ve,styleId:Me}=bo(pe,h,p.styleMirror);return(Ve&&Ve!==-1||Me&&Me!==-1)&&w({id:Ve,styleId:Me,replaceSync:Le}),re.apply(pe,ke)})}));const F={};up("CSSGroupingRule")?F.CSSGroupingRule=_.CSSGroupingRule:(up("CSSMediaRule")&&(F.CSSMediaRule=_.CSSMediaRule),up("CSSConditionRule")&&(F.CSSConditionRule=_.CSSConditionRule),up("CSSSupportsRule")&&(F.CSSSupportsRule=_.CSSSupportsRule));const $={};return Object.entries(F).forEach(([re,pe])=>{$[re]={insertRule:pe.prototype.insertRule,deleteRule:pe.prototype.deleteRule},pe.prototype.insertRule=new Proxy($[re].insertRule,{apply:nn((ke,Le,Ve)=>{const[Me,_e]=Ve,{id:It,styleId:xt}=bo(Le.parentStyleSheet,h,p.styleMirror);return(It&&It!==-1||xt&&xt!==-1)&&w({id:It,styleId:xt,adds:[{rule:Me,index:[...lp(Le),_e||0]}]}),ke.apply(Le,Ve)})}),pe.prototype.deleteRule=new Proxy($[re].deleteRule,{apply:nn((ke,Le,Ve)=>{const[Me]=Ve,{id:_e,styleId:It}=bo(Le.parentStyleSheet,h,p.styleMirror);return(_e&&_e!==-1||It&&It!==-1)&&w({id:_e,styleId:It,removes:[{index:[...lp(Le),Me]}]}),ke.apply(Le,Ve)})})}),nn(()=>{_.CSSStyleSheet.prototype.insertRule=T,_.CSSStyleSheet.prototype.deleteRule=P,O&&(_.CSSStyleSheet.prototype.replace=O),V&&(_.CSSStyleSheet.prototype.replaceSync=V),Object.entries(F).forEach(([re,pe])=>{pe.prototype.insertRule=$[re].insertRule,pe.prototype.deleteRule=$[re].deleteRule})})}function YA({mirror:w,stylesheetManager:h},p){var _,T,P;let O=null;p.nodeName==="#document"?O=w.getId(p):O=w.getId(Yt.host(p));const V=p.nodeName==="#document"?(_=p.defaultView)==null?void 0:_.Document:(P=(T=p.ownerDocument)==null?void 0:T.defaultView)==null?void 0:P.ShadowRoot,F=V!=null&&V.prototype?Object.getOwnPropertyDescriptor(V==null?void 0:V.prototype,"adoptedStyleSheets"):void 0;return O===null||O===-1||!V||!F?()=>{}:(Object.defineProperty(p,"adoptedStyleSheets",{configurable:F.configurable,enumerable:F.enumerable,get(){var $;return($=F.get)==null?void 0:$.call(this)},set($){var re;const pe=(re=F.set)==null?void 0:re.call(this,$);if(O!==null&&O!==-1)try{h.adoptStyleSheets($,O)}catch(ke){}return pe}}),nn(()=>{Object.defineProperty(p,"adoptedStyleSheets",{configurable:F.configurable,enumerable:F.enumerable,get:F.get,set:F.set})}))}function v3({styleDeclarationCb:w,mirror:h,ignoreCSSAttributes:p,stylesheetManager:_},{win:T}){const P=T.CSSStyleDeclaration.prototype.setProperty;T.CSSStyleDeclaration.prototype.setProperty=new Proxy(P,{apply:nn((V,F,$)=>{var re;const[pe,ke,Le]=$;if(p.has(pe))return P.apply(F,[pe,ke,Le]);const{id:Ve,styleId:Me}=bo((re=F.parentRule)==null?void 0:re.parentStyleSheet,h,_.styleMirror);return(Ve&&Ve!==-1||Me&&Me!==-1)&&w({id:Ve,styleId:Me,set:{property:pe,value:ke,priority:Le},index:lp(F.parentRule)}),V.apply(F,$)})});const O=T.CSSStyleDeclaration.prototype.removeProperty;return T.CSSStyleDeclaration.prototype.removeProperty=new Proxy(O,{apply:nn((V,F,$)=>{var re;const[pe]=$;if(p.has(pe))return O.apply(F,[pe]);const{id:ke,styleId:Le}=bo((re=F.parentRule)==null?void 0:re.parentStyleSheet,h,_.styleMirror);return(ke&&ke!==-1||Le&&Le!==-1)&&w({id:ke,styleId:Le,remove:{property:pe},index:lp(F.parentRule)}),V.apply(F,$)})}),nn(()=>{T.CSSStyleDeclaration.prototype.setProperty=P,T.CSSStyleDeclaration.prototype.removeProperty=O})}function _3({mediaInteractionCb:w,blockClass:h,blockSelector:p,mirror:_,sampling:T,doc:P}){const O=nn(F=>eh(nn($=>{const re=nh($);if(!re||Wi(re,h,p,!0))return;const{currentTime:pe,volume:ke,muted:Le,playbackRate:Ve,loop:Me}=re;w({type:F,id:_.getId(re),currentTime:pe,volume:ke,muted:Le,playbackRate:Ve,loop:Me})}),T.media||500)),V=[Vi("play",O(Zl.Play),P),Vi("pause",O(Zl.Pause),P),Vi("seeked",O(Zl.Seeked),P),Vi("volumechange",O(Zl.VolumeChange),P),Vi("ratechange",O(Zl.RateChange),P)];return nn(()=>{V.forEach(F=>F())})}function y3({fontCb:w,doc:h}){const p=h.defaultView;if(!p)return()=>{};const _=[],T=new WeakMap,P=p.FontFace;p.FontFace=function(F,$,re){const pe=new P(F,$,re);return T.set(pe,{family:F,buffer:typeof $!="string",descriptors:re,fontSource:typeof $=="string"?$:JSON.stringify(Array.from(new Uint8Array($)))}),pe};const O=Jl(h.fonts,"add",function(V){return function(F){return setTimeout(nn(()=>{const $=T.get(F);$&&(w($),T.delete(F))}),0),V.apply(this,[F])}});return _.push(()=>{p.FontFace=P}),_.push(O),nn(()=>{_.forEach(V=>V())})}function b3(w){const{doc:h,mirror:p,blockClass:_,blockSelector:T,selectionCb:P}=w;let O=!0;const V=nn(()=>{const F=h.getSelection();if(!F||O&&(F!=null&&F.isCollapsed))return;O=F.isCollapsed||!1;const $=[],re=F.rangeCount||0;for(let pe=0;pe<re;pe++){const ke=F.getRangeAt(pe),{startContainer:Le,startOffset:Ve,endContainer:Me,endOffset:_e}=ke;Wi(Le,_,T,!0)||Wi(Me,_,T,!0)||$.push({start:p.getId(Le),startOffset:Ve,end:p.getId(Me),endOffset:_e})}P({ranges:$})});return V(),Vi("selectionchange",V)}function w3({doc:w,customElementCb:h}){const p=w.defaultView;return!p||!p.customElements?()=>{}:Jl(p.customElements,"define",function(T){return function(P,O,V){try{h({define:{name:P}})}catch(F){console.warn("Custom element callback failed for ".concat(P))}return T.apply(this,[P,O,V])}})}function S3(w,h){const{mutationCb:p,mousemoveCb:_,mouseInteractionCb:T,scrollCb:P,viewportResizeCb:O,inputCb:V,mediaInteractionCb:F,styleSheetRuleCb:$,styleDeclarationCb:re,canvasMutationCb:pe,fontCb:ke,selectionCb:Le,customElementCb:Ve}=w;w.mutationCb=(...Me)=>{h.mutation&&h.mutation(...Me),p(...Me)},w.mousemoveCb=(...Me)=>{h.mousemove&&h.mousemove(...Me),_(...Me)},w.mouseInteractionCb=(...Me)=>{h.mouseInteraction&&h.mouseInteraction(...Me),T(...Me)},w.scrollCb=(...Me)=>{h.scroll&&h.scroll(...Me),P(...Me)},w.viewportResizeCb=(...Me)=>{h.viewportResize&&h.viewportResize(...Me),O(...Me)},w.inputCb=(...Me)=>{h.input&&h.input(...Me),V(...Me)},w.mediaInteractionCb=(...Me)=>{h.mediaInteaction&&h.mediaInteaction(...Me),F(...Me)},w.styleSheetRuleCb=(...Me)=>{h.styleSheetRule&&h.styleSheetRule(...Me),$(...Me)},w.styleDeclarationCb=(...Me)=>{h.styleDeclaration&&h.styleDeclaration(...Me),re(...Me)},w.canvasMutationCb=(...Me)=>{h.canvasMutation&&h.canvasMutation(...Me),pe(...Me)},w.fontCb=(...Me)=>{h.font&&h.font(...Me),ke(...Me)},w.selectionCb=(...Me)=>{h.selection&&h.selection(...Me),Le(...Me)},w.customElementCb=(...Me)=>{h.customElement&&h.customElement(...Me),Ve(...Me)}}function x3(w,h={}){const p=w.doc.defaultView;if(!p)return()=>{};S3(w,h);let _;w.recordDOM&&(_=jA(w,w.doc));const T=h3(w),P=d3(w),O=qA(w),V=f3(w,{win:p}),F=m3(w),$=_3(w);let re=()=>{},pe=()=>{},ke=()=>{},Le=()=>{};w.recordDOM&&(re=g3(w,{win:p}),pe=YA(w,w.doc),ke=v3(w,{win:p}),w.collectFonts&&(Le=y3(w)));const Ve=b3(w),Me=w3(w),_e=[];for(const It of w.plugins)_e.push(It.observer(It.callback,p,It.options));return nn(()=>{da.forEach(It=>It.reset()),_==null||_.disconnect(),T(),P(),O(),V(),F(),$(),re(),pe(),ke(),Le(),Ve(),Me(),_e.forEach(It=>It())})}function cp(w){return typeof window[w]<"u"}function up(w){return!!(typeof window[w]<"u"&&window[w].prototype&&"insertRule"in window[w].prototype&&"deleteRule"in window[w].prototype)}class KA{constructor(h){r(this,"iframeIdToRemoteIdMap",new WeakMap),r(this,"iframeRemoteIdToIdMap",new WeakMap),this.generateIdFn=h}getId(h,p,_,T){const P=_||this.getIdToRemoteIdMap(h),O=T||this.getRemoteIdToIdMap(h);let V=P.get(p);return V||(V=this.generateIdFn(),P.set(p,V),O.set(V,p)),V}getIds(h,p){const _=this.getIdToRemoteIdMap(h),T=this.getRemoteIdToIdMap(h);return p.map(P=>this.getId(h,P,_,T))}getRemoteId(h,p,_){const T=_||this.getRemoteIdToIdMap(h);if(typeof p!="number")return p;const P=T.get(p);return P||-1}getRemoteIds(h,p){const _=this.getRemoteIdToIdMap(h);return p.map(T=>this.getRemoteId(h,T,_))}reset(h){if(!h){this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap;return}this.iframeIdToRemoteIdMap.delete(h),this.iframeRemoteIdToIdMap.delete(h)}getIdToRemoteIdMap(h){let p=this.iframeIdToRemoteIdMap.get(h);return p||(p=new Map,this.iframeIdToRemoteIdMap.set(h,p)),p}getRemoteIdToIdMap(h){let p=this.iframeRemoteIdToIdMap.get(h);return p||(p=new Map,this.iframeRemoteIdToIdMap.set(h,p)),p}}class E3{constructor(h){r(this,"iframes",new WeakMap),r(this,"crossOriginIframeMap",new WeakMap),r(this,"crossOriginIframeMirror",new KA(St)),r(this,"crossOriginIframeStyleMirror"),r(this,"crossOriginIframeRootIdMap",new WeakMap),r(this,"mirror"),r(this,"mutationCb"),r(this,"wrappedEmit"),r(this,"loadListener"),r(this,"stylesheetManager"),r(this,"recordCrossOriginIframes"),this.mutationCb=h.mutationCb,this.wrappedEmit=h.wrappedEmit,this.stylesheetManager=h.stylesheetManager,this.recordCrossOriginIframes=h.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new KA(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=h.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(h){this.iframes.set(h,!0),h.contentWindow&&this.crossOriginIframeMap.set(h.contentWindow,h)}addLoadListener(h){this.loadListener=h}attachIframe(h,p){var _,T;this.mutationCb({adds:[{parentId:this.mirror.getId(h),nextId:null,node:p}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),this.recordCrossOriginIframes&&((_=h.contentWindow)==null||_.addEventListener("message",this.handleMessage.bind(this))),(T=this.loadListener)==null||T.call(this,h),h.contentDocument&&h.contentDocument.adoptedStyleSheets&&h.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(h.contentDocument.adoptedStyleSheets,this.mirror.getId(h.contentDocument))}handleMessage(h){const p=h;if(p.data.type!=="rrweb"||p.origin!==p.data.origin||!h.source)return;const T=this.crossOriginIframeMap.get(h.source);if(!T)return;const P=this.transformCrossOriginEvent(T,p.data.event);P&&this.wrappedEmit(P,p.data.isCheckout)}transformCrossOriginEvent(h,p){var _;switch(p.type){case sn.FullSnapshot:{this.crossOriginIframeMirror.reset(h),this.crossOriginIframeStyleMirror.reset(h),this.replaceIdOnNode(p.data.node,h);const T=p.data.node.id;return this.crossOriginIframeRootIdMap.set(h,T),this.patchRootIdOnNode(p.data.node,T),{timestamp:p.timestamp,type:sn.IncrementalSnapshot,data:{source:$t.Mutation,adds:[{parentId:this.mirror.getId(h),nextId:null,node:p.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case sn.Meta:case sn.Load:case sn.DomContentLoaded:return!1;case sn.Plugin:return p;case sn.Custom:return this.replaceIds(p.data.payload,h,["id","parentId","previousId","nextId"]),p;case sn.IncrementalSnapshot:switch(p.data.source){case $t.Mutation:return p.data.adds.forEach(T=>{this.replaceIds(T,h,["parentId","nextId","previousId"]),this.replaceIdOnNode(T.node,h);const P=this.crossOriginIframeRootIdMap.get(h);P&&this.patchRootIdOnNode(T.node,P)}),p.data.removes.forEach(T=>{this.replaceIds(T,h,["parentId","id"])}),p.data.attributes.forEach(T=>{this.replaceIds(T,h,["id"])}),p.data.texts.forEach(T=>{this.replaceIds(T,h,["id"])}),p;case $t.Drag:case $t.TouchMove:case $t.MouseMove:return p.data.positions.forEach(T=>{this.replaceIds(T,h,["id"])}),p;case $t.ViewportResize:return!1;case $t.MediaInteraction:case $t.MouseInteraction:case $t.Scroll:case $t.CanvasMutation:case $t.Input:return this.replaceIds(p.data,h,["id"]),p;case $t.StyleSheetRule:case $t.StyleDeclaration:return this.replaceIds(p.data,h,["id"]),this.replaceStyleIds(p.data,h,["styleId"]),p;case $t.Font:return p;case $t.Selection:return p.data.ranges.forEach(T=>{this.replaceIds(T,h,["start","end"])}),p;case $t.AdoptedStyleSheet:return this.replaceIds(p.data,h,["id"]),this.replaceStyleIds(p.data,h,["styleIds"]),(_=p.data.styles)==null||_.forEach(T=>{this.replaceStyleIds(T,h,["styleId"])}),p}}return!1}replace(h,p,_,T){for(const P of T)!Array.isArray(p[P])&&typeof p[P]!="number"||(Array.isArray(p[P])?p[P]=h.getIds(_,p[P]):p[P]=h.getId(_,p[P]));return p}replaceIds(h,p,_){return this.replace(this.crossOriginIframeMirror,h,p,_)}replaceStyleIds(h,p,_){return this.replace(this.crossOriginIframeStyleMirror,h,p,_)}replaceIdOnNode(h,p){this.replaceIds(h,p,["id","rootId"]),"childNodes"in h&&h.childNodes.forEach(_=>{this.replaceIdOnNode(_,p)})}patchRootIdOnNode(h,p){h.type!==c.Document&&!h.rootId&&(h.rootId=p),"childNodes"in h&&h.childNodes.forEach(_=>{this.patchRootIdOnNode(_,p)})}}class A3{constructor(h){r(this,"shadowDoms",new WeakSet),r(this,"mutationCb"),r(this,"scrollCb"),r(this,"bypassOptions"),r(this,"mirror"),r(this,"restoreHandlers",[]),this.mutationCb=h.mutationCb,this.scrollCb=h.scrollCb,this.bypassOptions=h.bypassOptions,this.mirror=h.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(h,p){if(!X(h)||this.shadowDoms.has(h))return;this.shadowDoms.add(h);const _=jA({...this.bypassOptions,doc:p,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this},h);this.restoreHandlers.push(()=>_.disconnect()),this.restoreHandlers.push(qA({...this.bypassOptions,scrollCb:this.scrollCb,doc:h,mirror:this.mirror})),setTimeout(()=>{h.adoptedStyleSheets&&h.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(h.adoptedStyleSheets,this.mirror.getId(Yt.host(h))),this.restoreHandlers.push(YA({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},h))},0)}observeAttachShadow(h){!h.contentWindow||!h.contentDocument||this.patchAttachShadow(h.contentWindow.Element,h.contentDocument)}patchAttachShadow(h,p){const _=this;this.restoreHandlers.push(Jl(h.prototype,"attachShadow",function(T){return function(P){const O=T.call(this,P),V=Yt.shadowRoot(this);return V&&BA(this)&&_.addShadowRoot(V,p),O}}))}reset(){this.restoreHandlers.forEach(h=>{try{h()}catch(p){}}),this.restoreHandlers=[],this.shadowDoms=new WeakSet}}for(var ec="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",M3=typeof Uint8Array>"u"?[]:new Uint8Array(256),hp=0;hp<ec.length;hp++)M3[ec.charCodeAt(hp)]=hp;var T3=function(w){var h=new Uint8Array(w),p,_=h.length,T="";for(p=0;p<_;p+=3)T+=ec[h[p]>>2],T+=ec[(h[p]&3)<<4|h[p+1]>>4],T+=ec[(h[p+1]&15)<<2|h[p+2]>>6],T+=ec[h[p+2]&63];return _%3===2?T=T.substring(0,T.length-1)+"=":_%3===1&&(T=T.substring(0,T.length-2)+"=="),T};const $A=new Map;function C3(w,h){let p=$A.get(w);return p||(p=new Map,$A.set(w,p)),p.has(h)||p.set(h,[]),p.get(h)}const JA=(w,h,p)=>{if(!w||!(ZA(w,h)||typeof w=="object"))return;const _=w.constructor.name,T=C3(p,_);let P=T.indexOf(w);return P===-1&&(P=T.length,T.push(w)),P};function dp(w,h,p){if(w instanceof Array)return w.map(_=>dp(_,h,p));if(w===null)return w;if(w instanceof Float32Array||w instanceof Float64Array||w instanceof Int32Array||w instanceof Uint32Array||w instanceof Uint8Array||w instanceof Uint16Array||w instanceof Int16Array||w instanceof Int8Array||w instanceof Uint8ClampedArray)return{rr_type:w.constructor.name,args:[Object.values(w)]};if(w instanceof ArrayBuffer){const _=w.constructor.name,T=T3(w);return{rr_type:_,base64:T}}else{if(w instanceof DataView)return{rr_type:w.constructor.name,args:[dp(w.buffer,h,p),w.byteOffset,w.byteLength]};if(w instanceof HTMLImageElement){const _=w.constructor.name,{src:T}=w;return{rr_type:_,src:T}}else if(w instanceof HTMLCanvasElement){const _="HTMLImageElement",T=w.toDataURL();return{rr_type:_,src:T}}else{if(w instanceof ImageData)return{rr_type:w.constructor.name,args:[dp(w.data,h,p),w.width,w.height]};if(ZA(w,h)||typeof w=="object"){const _=w.constructor.name,T=JA(w,h,p);return{rr_type:_,index:T}}}}return w}const QA=(w,h,p)=>w.map(_=>dp(_,h,p)),ZA=(w,h)=>!!["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter(T=>typeof h[T]=="function").find(T=>w instanceof h[T]);function R3(w,h,p,_){const T=[],P=Object.getOwnPropertyNames(h.CanvasRenderingContext2D.prototype);for(const O of P)try{if(typeof h.CanvasRenderingContext2D.prototype[O]!="function")continue;const V=Jl(h.CanvasRenderingContext2D.prototype,O,function(F){return function(...$){return Wi(this.canvas,p,_,!0)||setTimeout(()=>{const re=QA($,h,this);w(this.canvas,{type:Ql["2D"],property:O,args:re})},0),F.apply(this,$)}});T.push(V)}catch(V){const F=op(h.CanvasRenderingContext2D.prototype,O,{set($){w(this.canvas,{type:Ql["2D"],property:O,args:[$],setter:!0})}});T.push(F)}return()=>{T.forEach(O=>O())}}function I3(w){return w==="experimental-webgl"?"webgl":w}function eM(w,h,p,_){const T=[];try{const P=Jl(w.HTMLCanvasElement.prototype,"getContext",function(O){return function(V,...F){if(!Wi(this,h,p,!0)){const $=I3(V);if("__context"in this||(this.__context=$),_&&["webgl","webgl2"].includes($))if(F[0]&&typeof F[0]=="object"){const re=F[0];re.preserveDrawingBuffer||(re.preserveDrawingBuffer=!0)}else F.splice(0,1,{preserveDrawingBuffer:!0})}return O.apply(this,[V,...F])}});T.push(P)}catch(P){console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{T.forEach(P=>P())}}function tM(w,h,p,_,T,P){const O=[],V=Object.getOwnPropertyNames(w);for(const F of V)if(!["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(F))try{if(typeof w[F]!="function")continue;const $=Jl(w,F,function(re){return function(...pe){const ke=re.apply(this,pe);if(JA(ke,P,this),"tagName"in this.canvas&&!Wi(this.canvas,_,T,!0)){const Le=QA(pe,P,this),Ve={type:h,property:F,args:Le};p(this.canvas,Ve)}return ke}});O.push($)}catch($){const re=op(w,F,{set(pe){p(this.canvas,{type:h,property:F,args:[pe],setter:!0})}});O.push(re)}return O}function D3(w,h,p,_){const T=[];return T.push(...tM(h.WebGLRenderingContext.prototype,Ql.WebGL,w,p,_,h)),typeof h.WebGL2RenderingContext<"u"&&T.push(...tM(h.WebGL2RenderingContext.prototype,Ql.WebGL2,w,p,_,h)),()=>{T.forEach(P=>P())}}const nM="KGZ1bmN0aW9uKCkgewogICJ1c2Ugc3RyaWN0IjsKICB2YXIgY2hhcnMgPSAiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyI7CiAgdmFyIGxvb2t1cCA9IHR5cGVvZiBVaW50OEFycmF5ID09PSAidW5kZWZpbmVkIiA/IFtdIDogbmV3IFVpbnQ4QXJyYXkoMjU2KTsKICBmb3IgKHZhciBpID0gMDsgaSA8IGNoYXJzLmxlbmd0aDsgaSsrKSB7CiAgICBsb29rdXBbY2hhcnMuY2hhckNvZGVBdChpKV0gPSBpOwogIH0KICB2YXIgZW5jb2RlID0gZnVuY3Rpb24oYXJyYXlidWZmZXIpIHsKICAgIHZhciBieXRlcyA9IG5ldyBVaW50OEFycmF5KGFycmF5YnVmZmVyKSwgaTIsIGxlbiA9IGJ5dGVzLmxlbmd0aCwgYmFzZTY0ID0gIiI7CiAgICBmb3IgKGkyID0gMDsgaTIgPCBsZW47IGkyICs9IDMpIHsKICAgICAgYmFzZTY0ICs9IGNoYXJzW2J5dGVzW2kyXSA+PiAyXTsKICAgICAgYmFzZTY0ICs9IGNoYXJzWyhieXRlc1tpMl0gJiAzKSA8PCA0IHwgYnl0ZXNbaTIgKyAxXSA+PiA0XTsKICAgICAgYmFzZTY0ICs9IGNoYXJzWyhieXRlc1tpMiArIDFdICYgMTUpIDw8IDIgfCBieXRlc1tpMiArIDJdID4+IDZdOwogICAgICBiYXNlNjQgKz0gY2hhcnNbYnl0ZXNbaTIgKyAyXSAmIDYzXTsKICAgIH0KICAgIGlmIChsZW4gJSAzID09PSAyKSB7CiAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDEpICsgIj0iOwogICAgfSBlbHNlIGlmIChsZW4gJSAzID09PSAxKSB7CiAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDIpICsgIj09IjsKICAgIH0KICAgIHJldHVybiBiYXNlNjQ7CiAgfTsKICBjb25zdCBsYXN0QmxvYk1hcCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7CiAgY29uc3QgdHJhbnNwYXJlbnRCbG9iTWFwID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTsKICBhc3luYyBmdW5jdGlvbiBnZXRUcmFuc3BhcmVudEJsb2JGb3Iod2lkdGgsIGhlaWdodCwgZGF0YVVSTE9wdGlvbnMpIHsKICAgIGNvbnN0IGlkID0gYCR7d2lkdGh9LSR7aGVpZ2h0fWA7CiAgICBpZiAoIk9mZnNjcmVlbkNhbnZhcyIgaW4gZ2xvYmFsVGhpcykgewogICAgICBpZiAodHJhbnNwYXJlbnRCbG9iTWFwLmhhcyhpZCkpIHJldHVybiB0cmFuc3BhcmVudEJsb2JNYXAuZ2V0KGlkKTsKICAgICAgY29uc3Qgb2Zmc2NyZWVuID0gbmV3IE9mZnNjcmVlbkNhbnZhcyh3aWR0aCwgaGVpZ2h0KTsKICAgICAgb2Zmc2NyZWVuLmdldENvbnRleHQoIjJkIik7CiAgICAgIGNvbnN0IGJsb2IgPSBhd2FpdCBvZmZzY3JlZW4uY29udmVydFRvQmxvYihkYXRhVVJMT3B0aW9ucyk7CiAgICAgIGNvbnN0IGFycmF5QnVmZmVyID0gYXdhaXQgYmxvYi5hcnJheUJ1ZmZlcigpOwogICAgICBjb25zdCBiYXNlNjQgPSBlbmNvZGUoYXJyYXlCdWZmZXIpOwogICAgICB0cmFuc3BhcmVudEJsb2JNYXAuc2V0KGlkLCBiYXNlNjQpOwogICAgICByZXR1cm4gYmFzZTY0OwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuICIiOwogICAgfQogIH0KICBjb25zdCB3b3JrZXIgPSBzZWxmOwogIHdvcmtlci5vbm1lc3NhZ2UgPSBhc3luYyBmdW5jdGlvbihlKSB7CiAgICBpZiAoIk9mZnNjcmVlbkNhbnZhcyIgaW4gZ2xvYmFsVGhpcykgewogICAgICBjb25zdCB7IGlkLCBiaXRtYXAsIHdpZHRoLCBoZWlnaHQsIGRhdGFVUkxPcHRpb25zIH0gPSBlLmRhdGE7CiAgICAgIGNvbnN0IHRyYW5zcGFyZW50QmFzZTY0ID0gZ2V0VHJhbnNwYXJlbnRCbG9iRm9yKAogICAgICAgIHdpZHRoLAogICAgICAgIGhlaWdodCwKICAgICAgICBkYXRhVVJMT3B0aW9ucwogICAgICApOwogICAgICBjb25zdCBvZmZzY3JlZW4gPSBuZXcgT2Zmc2NyZWVuQ2FudmFzKHdpZHRoLCBoZWlnaHQpOwogICAgICBjb25zdCBjdHggPSBvZmZzY3JlZW4uZ2V0Q29udGV4dCgiMmQiKTsKICAgICAgY3R4LmRyYXdJbWFnZShiaXRtYXAsIDAsIDApOwogICAgICBiaXRtYXAuY2xvc2UoKTsKICAgICAgY29uc3QgYmxvYiA9IGF3YWl0IG9mZnNjcmVlbi5jb252ZXJ0VG9CbG9iKGRhdGFVUkxPcHRpb25zKTsKICAgICAgY29uc3QgdHlwZSA9IGJsb2IudHlwZTsKICAgICAgY29uc3QgYXJyYXlCdWZmZXIgPSBhd2FpdCBibG9iLmFycmF5QnVmZmVyKCk7CiAgICAgIGNvbnN0IGJhc2U2NCA9IGVuY29kZShhcnJheUJ1ZmZlcik7CiAgICAgIGlmICghbGFzdEJsb2JNYXAuaGFzKGlkKSAmJiBhd2FpdCB0cmFuc3BhcmVudEJhc2U2NCA9PT0gYmFzZTY0KSB7CiAgICAgICAgbGFzdEJsb2JNYXAuc2V0KGlkLCBiYXNlNjQpOwogICAgICAgIHJldHVybiB3b3JrZXIucG9zdE1lc3NhZ2UoeyBpZCB9KTsKICAgICAgfQogICAgICBpZiAobGFzdEJsb2JNYXAuZ2V0KGlkKSA9PT0gYmFzZTY0KSByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQgfSk7CiAgICAgIHdvcmtlci5wb3N0TWVzc2FnZSh7CiAgICAgICAgaWQsCiAgICAgICAgdHlwZSwKICAgICAgICBiYXNlNjQsCiAgICAgICAgd2lkdGgsCiAgICAgICAgaGVpZ2h0CiAgICAgIH0pOwogICAgICBsYXN0QmxvYk1hcC5zZXQoaWQsIGJhc2U2NCk7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQ6IGUuZGF0YS5pZCB9KTsKICAgIH0KICB9Owp9KSgpOwovLyMgc291cmNlTWFwcGluZ1VSTD1pbWFnZS1iaXRtYXAtZGF0YS11cmwtd29ya2VyLUlKcEM3Z19iLmpzLm1hcAo=",P3=w=>Uint8Array.from(atob(w),h=>h.charCodeAt(0)),iM=typeof window<"u"&&window.Blob&&new Blob([P3(nM)],{type:"text/javascript;charset=utf-8"});function O3(w){let h;try{if(h=iM&&(window.URL||window.webkitURL).createObjectURL(iM),!h)throw"";const p=new Worker(h,{name:w==null?void 0:w.name});return p.addEventListener("error",()=>{(window.URL||window.webkitURL).revokeObjectURL(h)}),p}catch(p){return new Worker("data:text/javascript;base64,"+nM,{name:w==null?void 0:w.name})}finally{h&&(window.URL||window.webkitURL).revokeObjectURL(h)}}class L3{constructor(h){r(this,"pendingCanvasMutations",new Map),r(this,"rafStamps",{latestId:0,invokeId:null}),r(this,"mirror"),r(this,"mutationCb"),r(this,"resetObservers"),r(this,"frozen",!1),r(this,"locked",!1),r(this,"processMutation",(F,$)=>{(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId||!this.rafStamps.invokeId)&&(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(F)||this.pendingCanvasMutations.set(F,[]),this.pendingCanvasMutations.get(F).push($)});const{sampling:p="all",win:_,blockClass:T,blockSelector:P,recordCanvas:O,dataURLOptions:V}=h;this.mutationCb=h.mutationCb,this.mirror=h.mirror,O&&p==="all"&&this.initCanvasMutationObserver(_,T,P),O&&typeof p=="number"&&this.initCanvasFPSObserver(p,_,T,P,{dataURLOptions:V})}reset(){this.pendingCanvasMutations.clear(),this.resetObservers&&this.resetObservers()}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}initCanvasFPSObserver(h,p,_,T,P){const O=eM(p,_,T,!0),V=new Map,F=new O3;F.onmessage=Ve=>{const{id:Me}=Ve.data;if(V.set(Me,!1),!("base64"in Ve.data))return;const{base64:_e,type:It,width:xt,height:et}=Ve.data;this.mutationCb({id:Me,type:Ql["2D"],commands:[{property:"clearRect",args:[0,0,xt,et]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:_e}],type:It}]},0,0]}]})};const $=1e3/h;let re=0,pe;const ke=()=>{const Ve=[];return p.document.querySelectorAll("canvas").forEach(Me=>{Wi(Me,_,T,!0)||Ve.push(Me)}),Ve},Le=Ve=>{if(re&&Ve-re<$){pe=requestAnimationFrame(Le);return}re=Ve,ke().forEach(async Me=>{var _e;const It=this.mirror.getId(Me);if(V.get(It)||Me.width===0||Me.height===0)return;if(V.set(It,!0),["webgl","webgl2"].includes(Me.__context)){const et=Me.getContext(Me.__context);((_e=et==null?void 0:et.getContextAttributes())==null?void 0:_e.preserveDrawingBuffer)===!1&&et.clear(et.COLOR_BUFFER_BIT)}const xt=await createImageBitmap(Me);F.postMessage({id:It,bitmap:xt,width:Me.width,height:Me.height,dataURLOptions:P.dataURLOptions},[xt])}),pe=requestAnimationFrame(Le)};pe=requestAnimationFrame(Le),this.resetObservers=()=>{O(),cancelAnimationFrame(pe)}}initCanvasMutationObserver(h,p,_){this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher();const T=eM(h,p,_,!1),P=R3(this.processMutation.bind(this),h,p,_),O=D3(this.processMutation.bind(this),h,p,_);this.resetObservers=()=>{T(),P(),O()}}startPendingCanvasMutationFlusher(){requestAnimationFrame(()=>this.flushPendingCanvasMutations())}startRAFTimestamping(){const h=p=>{this.rafStamps.latestId=p,requestAnimationFrame(h)};requestAnimationFrame(h)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach((h,p)=>{const _=this.mirror.getId(p);this.flushPendingCanvasMutationFor(p,_)}),requestAnimationFrame(()=>this.flushPendingCanvasMutations())}flushPendingCanvasMutationFor(h,p){if(this.frozen||this.locked)return;const _=this.pendingCanvasMutations.get(h);if(!_||p===-1)return;const T=_.map(O=>{const{type:V,...F}=O;return F}),{type:P}=_[0];this.mutationCb({id:p,type:P,commands:T}),this.pendingCanvasMutations.delete(h)}}class k3{constructor(h){r(this,"trackedLinkElements",new WeakSet),r(this,"mutationCb"),r(this,"adoptedStyleSheetCb"),r(this,"styleMirror",new i3),this.mutationCb=h.mutationCb,this.adoptedStyleSheetCb=h.adoptedStyleSheetCb}attachLinkElement(h,p){"_cssText"in p.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:p.id,attributes:p.attributes}]}),this.trackLinkElement(h)}trackLinkElement(h){this.trackedLinkElements.has(h)||(this.trackedLinkElements.add(h),this.trackStylesheetInLinkElement(h))}adoptStyleSheets(h,p){if(h.length===0)return;const _={id:p,styleIds:[]},T=[];for(const P of h){let O;this.styleMirror.has(P)?O=this.styleMirror.getId(P):(O=this.styleMirror.add(P),T.push({styleId:O,rules:Array.from(P.rules||CSSRule,(V,F)=>({rule:ye(V,P.href),index:F}))})),_.styleIds.push(O)}T.length>0&&(_.styles=T),this.adoptedStyleSheetCb(_)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(h){}}class U3{constructor(){r(this,"nodeMap",new WeakMap),r(this,"active",!1)}inOtherBuffer(h,p){const _=this.nodeMap.get(h);return _&&Array.from(_).some(T=>T!==p)}add(h,p){this.active||(this.active=!0,requestAnimationFrame(()=>{this.nodeMap=new WeakMap,this.active=!1})),this.nodeMap.set(h,(this.nodeMap.get(h)||new Set).add(p))}destroy(){}}let Xn,fp,ty,pp=!1;try{if(Array.from([1],w=>w*2)[0]!==2){const w=document.createElement("iframe");document.body.appendChild(w),Array.from=((s=w.contentWindow)==null?void 0:s.Array.from)||Array.from,document.body.removeChild(w)}}catch(w){console.debug("Unable to override Array.from",w)}const Yr=le();function ih(w={}){const{emit:h,checkoutEveryNms:p,checkoutEveryNth:_,blockClass:T="rr-block",blockSelector:P=null,ignoreClass:O="rr-ignore",ignoreSelector:V=null,maskTextClass:F="rr-mask",maskTextSelector:$=null,inlineStylesheet:re=!0,maskAllInputs:pe,maskInputOptions:ke,slimDOMOptions:Le,maskInputFn:Ve,maskTextFn:Me,hooks:_e,packFn:It,sampling:xt={},dataURLOptions:et={},mousemoveWait:Pt,recordDOM:xn=!0,recordCanvas:Pn=!1,recordCrossOriginIframes:yi=!1,recordAfter:mn=w.recordAfter==="DOMContentLoaded"?w.recordAfter:"load",userTriggeredOnInput:bi=!1,collectFonts:wi=!1,inlineImages:kr=!1,plugins:gn,keepIframeSrcFn:fa=()=>!1,ignoreCSSAttributes:rh=new Set([]),errorHandler:ji}=w;c3(ji);const Kr=yi?window.parent===window:!0;let Gs=!1;if(!Kr)try{window.parent.document&&(Gs=!1)}catch(vn){Gs=!0}if(Kr&&!h)throw new Error("emit function is required");if(!Kr&&!Gs)return()=>{};Pt!==void 0&&xt.mousemove===void 0&&(xt.mousemove=Pt),Yr.reset();const ws=pe===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:ke!==void 0?ke:{password:!0},ny=Le===!0||Le==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:Le==="all",headMetaDescKeywords:Le==="all",headTitleMutations:Le==="all"}:Le||{};n3();let sM,iy=0;const oM=vn=>{for(const $r of gn||[])$r.eventProcessor&&(vn=$r.eventProcessor(vn));return It&&!Gs&&(vn=It(vn)),vn};Xn=(vn,$r)=>{var Yn;const Kn=vn;if(Kn.timestamp=ap(),(Yn=da[0])!=null&&Yn.isFrozen()&&Kn.type!==sn.FullSnapshot&&!(Kn.type===sn.IncrementalSnapshot&&Kn.data.source===$t.Mutation)&&da.forEach(Ss=>Ss.unfreeze()),Kr)h==null||h(oM(Kn),$r);else if(Gs){const Ss={type:"rrweb",event:oM(Kn),origin:window.location.origin,isCheckout:$r};window.parent.postMessage(Ss,"*")}if(Kn.type===sn.FullSnapshot)sM=Kn,iy=0;else if(Kn.type===sn.IncrementalSnapshot){if(Kn.data.source===$t.Mutation&&Kn.data.isAttachIframe)return;iy++;const Ss=_&&iy>=_,Mn=p&&Kn.timestamp-sM.timestamp>p;(Ss||Mn)&&fp(!0)}};const mp=vn=>{Xn({type:sn.IncrementalSnapshot,data:{source:$t.Mutation,...vn}})},aM=vn=>Xn({type:sn.IncrementalSnapshot,data:{source:$t.Scroll,...vn}}),lM=vn=>Xn({type:sn.IncrementalSnapshot,data:{source:$t.CanvasMutation,...vn}}),N3=vn=>Xn({type:sn.IncrementalSnapshot,data:{source:$t.AdoptedStyleSheet,...vn}}),pa=new k3({mutationCb:mp,adoptedStyleSheetCb:N3}),ma=new E3({mirror:Yr,mutationCb:mp,stylesheetManager:pa,recordCrossOriginIframes:yi,wrappedEmit:Xn});for(const vn of gn||[])vn.getMirror&&vn.getMirror({nodeMirror:Yr,crossOriginIframeMirror:ma.crossOriginIframeMirror,crossOriginIframeStyleMirror:ma.crossOriginIframeStyleMirror});const ry=new U3;ty=new L3({recordCanvas:Pn,mutationCb:lM,win:window,blockClass:T,blockSelector:P,mirror:Yr,sampling:xt.canvas,dataURLOptions:et});const gp=new A3({mutationCb:mp,scrollCb:aM,bypassOptions:{blockClass:T,blockSelector:P,maskTextClass:F,maskTextSelector:$,inlineStylesheet:re,maskInputOptions:ws,dataURLOptions:et,maskTextFn:Me,maskInputFn:Ve,recordCanvas:Pn,inlineImages:kr,sampling:xt,slimDOMOptions:ny,iframeManager:ma,stylesheetManager:pa,canvasManager:ty,keepIframeSrcFn:fa,processedNodeManager:ry},mirror:Yr});fp=(vn=!1)=>{if(!xn)return;Xn({type:sn.Meta,data:{href:window.location.href,width:OA(),height:PA()}},vn),pa.reset(),gp.init(),da.forEach(Yn=>Yn.lock());const $r=dn(document,{mirror:Yr,blockClass:T,blockSelector:P,maskTextClass:F,maskTextSelector:$,inlineStylesheet:re,maskAllInputs:ws,maskTextFn:Me,maskInputFn:Ve,slimDOM:ny,dataURLOptions:et,recordCanvas:Pn,inlineImages:kr,onSerialize:Yn=>{UA(Yn,Yr)&&ma.addIframe(Yn),NA(Yn,Yr)&&pa.trackLinkElement(Yn),Z_(Yn)&&gp.addShadowRoot(Yt.shadowRoot(Yn),document)},onIframeLoad:(Yn,Kn)=>{ma.attachIframe(Yn,Kn),gp.observeAttachShadow(Yn)},onStylesheetLoad:(Yn,Kn)=>{pa.attachLinkElement(Yn,Kn)},keepIframeSrcFn:fa});if(!$r)return console.warn("Failed to snapshot the document");Xn({type:sn.FullSnapshot,data:{node:$r,initialOffset:DA(window)}},vn),da.forEach(Yn=>Yn.unlock()),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&pa.adoptStyleSheets(document.adoptedStyleSheets,Yr.getId(document))};try{const vn=[],$r=Kn=>{var Ss;return nn(x3)({mutationCb:mp,mousemoveCb:(Mn,sy)=>Xn({type:sn.IncrementalSnapshot,data:{source:sy,positions:Mn}}),mouseInteractionCb:Mn=>Xn({type:sn.IncrementalSnapshot,data:{source:$t.MouseInteraction,...Mn}}),scrollCb:aM,viewportResizeCb:Mn=>Xn({type:sn.IncrementalSnapshot,data:{source:$t.ViewportResize,...Mn}}),inputCb:Mn=>Xn({type:sn.IncrementalSnapshot,data:{source:$t.Input,...Mn}}),mediaInteractionCb:Mn=>Xn({type:sn.IncrementalSnapshot,data:{source:$t.MediaInteraction,...Mn}}),styleSheetRuleCb:Mn=>Xn({type:sn.IncrementalSnapshot,data:{source:$t.StyleSheetRule,...Mn}}),styleDeclarationCb:Mn=>Xn({type:sn.IncrementalSnapshot,data:{source:$t.StyleDeclaration,...Mn}}),canvasMutationCb:lM,fontCb:Mn=>Xn({type:sn.IncrementalSnapshot,data:{source:$t.Font,...Mn}}),selectionCb:Mn=>{Xn({type:sn.IncrementalSnapshot,data:{source:$t.Selection,...Mn}})},customElementCb:Mn=>{Xn({type:sn.IncrementalSnapshot,data:{source:$t.CustomElement,...Mn}})},blockClass:T,ignoreClass:O,ignoreSelector:V,maskTextClass:F,maskTextSelector:$,maskInputOptions:ws,inlineStylesheet:re,sampling:xt,recordDOM:xn,recordCanvas:Pn,inlineImages:kr,userTriggeredOnInput:bi,collectFonts:wi,doc:Kn,maskInputFn:Ve,maskTextFn:Me,keepIframeSrcFn:fa,blockSelector:P,slimDOMOptions:ny,dataURLOptions:et,mirror:Yr,iframeManager:ma,stylesheetManager:pa,shadowDomManager:gp,processedNodeManager:ry,canvasManager:ty,ignoreCSSAttributes:rh,plugins:((Ss=gn==null?void 0:gn.filter(Mn=>Mn.observer))==null?void 0:Ss.map(Mn=>({observer:Mn.observer,options:Mn.options,callback:sy=>Xn({type:sn.Plugin,data:{plugin:Mn.name,payload:sy}})})))||[]},_e)};ma.addLoadListener(Kn=>{try{vn.push($r(Kn.contentDocument))}catch(Ss){console.warn(Ss)}});const Yn=()=>{fp(),vn.push($r(document)),pp=!0};return document.readyState==="interactive"||document.readyState==="complete"?Yn():(vn.push(Vi("DOMContentLoaded",()=>{Xn({type:sn.DomContentLoaded,data:{}}),mn==="DOMContentLoaded"&&Yn()})),vn.push(Vi("load",()=>{Xn({type:sn.Load,data:{}}),mn==="load"&&Yn()},window))),()=>{vn.forEach(Kn=>Kn()),ry.destroy(),pp=!1,u3()}}catch(vn){console.warn(vn)}}ih.addCustomEvent=(w,h)=>{if(!pp)throw new Error("please add custom event after start recording");Xn({type:sn.Custom,data:{tag:w,payload:h}})},ih.freezePage=()=>{da.forEach(w=>w.freeze())},ih.takeFullSnapshot=w=>{if(!pp)throw new Error("please take full snapshot after start recording");fp(w)},ih.mirror=Yr;var rM;(function(w){w[w.NotStarted=0]="NotStarted",w[w.Running=1]="Running",w[w.Stopped=2]="Stopped"})(rM||(rM={})),n.record=ih})(Xy)),Xy}var ET;function CO(){if(ET)return vh;ET=1,Object.defineProperty(vh,"__esModule",{value:!0}),vh.SessionReplayClient=void 0;const n=$5(),e=Vn(),t=1e3*60*60*4,i=1e3*30;let r=class{constructor(){this._startTimestamp=null,this._endTimestamp=null}record(l,c,u,d=!1){if((0,e._getDocumentSafe)()==null||(this._startTimestamp=null,this._endTimestamp=null,this._stopCallback=u,this._stopFn))return;const f=(m,v)=>{var g,y,b;d?this._startTimestamp=v?m.timestamp:(g=this._startTimestamp)!==null&&g!==void 0?g:m.timestamp:(y=this._startTimestamp)!==null&&y!==void 0||(this._startTimestamp=m.timestamp),this._endTimestamp=m.timestamp;let S=0;o(m)&&S++,l(Object.assign(Object.assign({},m),{eventIndex:0}),{startTime:this._startTimestamp,endTime:this._endTimestamp,clickCount:S},v!=null?v:!1),this._endTimestamp-this._startTimestamp>t&&((b=this._stopFn)===null||b===void 0||b.call(this),this._stopCallback&&this._stopCallback())};this._stopFn=s(f,c,d)}stop(){this._stopFn&&(this._stopFn(),this._stopFn=void 0)}isRecording(){return this._stopFn!=null}};vh.SessionReplayClient=r;function s(a,l,c){return c?(0,n.record)(Object.assign(Object.assign({},l),{emit:a,checkoutEveryNms:i})):(0,n.record)(Object.assign(Object.assign({},l),{emit:a}))}function o(a){return a.type===3&&a.data.source===2&&(a.data.type===2||a.data.type===4)}return vh}var Xi={},AT;function kS(){if(AT)return Xi;AT=1,Object.defineProperty(Xi,"__esModule",{value:!0}),Xi._appendSlicedMetadata=Xi._slicePayload=Xi._makeLoggableRrwebEvent=Xi.MAX_LOGS=Xi.MAX_INDIVIDUAL_EVENT_BYTES=Xi.REPLAY_ENQUEUE_TRIGGER_BYTES=void 0;const n=Vn(),e=1024*1024;Xi.REPLAY_ENQUEUE_TRIGGER_BYTES=1024*10,Xi.MAX_INDIVIDUAL_EVENT_BYTES=1024*1024*10,Xi.MAX_LOGS=1e4;function t(s,o,a,l,c){const u={session_start_ts:String(l.startTime),session_end_ts:String(l.endTime),clicks_captured_cumulative:String(l.clickCount),rrweb_events:s,rrweb_payload_size:String(o.length),session_replay_sdk_version:n.SDK_VERSION,sdk_instance_id:c};return{eventName:"statsig::session_recording",value:a,metadata:u}}Xi._makeLoggableRrwebEvent=t;function i(s){const o=[];for(let a=0;a<s.length;a+=e)o.push(s.slice(a,a+e));return o}Xi._slicePayload=i;function r(s,o,a,l,c){s.sliced_id=o,s.slice_index=String(a),s.slice_count=String(l),s.slice_byte_size=String(c)}return Xi._appendSlicedMetadata=r,Xi}var MT;function US(){if(MT)return Jr;MT=1,Object.defineProperty(Jr,"__esModule",{value:!0}),Jr.SessionReplayBase=Jr.forceStartRecording=Jr.startRecording=Jr.stopRecording=void 0;const n=Vn(),e=CO(),t=kS();function i(l){var c;(c=o(l))===null||c===void 0||c.stopRecording()}Jr.stopRecording=i;function r(l){var c;(c=o(l))===null||c===void 0||c.startRecording()}Jr.startRecording=r;function s(l){var c;(c=o(l))===null||c===void 0||c.forceStartRecording()}Jr.forceStartRecording=s;function o(l){var c,u;const d=l==null?(0,n._getStatsigGlobal)().firstSRInstance:(u=(c=(0,n._getStatsigGlobal)())===null||c===void 0?void 0:c.srInstances)===null||u===void 0?void 0:u[l];return d instanceof a?d:null}let a=class RO{constructor(c,u){this._sessionData={startTime:-1,endTime:0,clickCount:0},this._events=[],this._wasStopped=!1,this._currentEventIndex=0,this._totalLogs=0,this._client=c,this._options=u;const{sdkKey:d,errorBoundary:f}=this._client.getContext();if(this._errorBoundary=f,this._errorBoundary.wrap(this),this._replayer=new e.SessionReplayClient,this._client.$on("pre_shutdown",()=>this._shutdown()),this._client.on("session_expired",()=>{this._shutdown("session_expired")}),!(0,n._isServerEnv)()){const m=(0,n._getStatsigGlobal)();m.srInstances=Object.assign(Object.assign({},m.srInstances),{[d]:this}),m.firstSRInstance||(m.firstSRInstance=this)}this._currentSessionID=this._getSessionIdFromClient(),this._subscribeToVisibilityChanged()}forceStartRecording(){this._wasStopped=!1,this._attemptToStartRecording(!0)}stopRecording(){this._wasStopped=!0,this._shutdown()}startRecording(){var c;this._wasStopped=!1,this._attemptToStartRecording((c=this._options)===null||c===void 0?void 0:c.forceRecording)}isRecording(){return this._replayer.isRecording()}_logRecording(c){this._events.length!==0&&(c=(0,n._isUnloading)()?"is_leaving_page":c,this._logRecordingWithSessionID(this._currentSessionID,c))}_onVisibilityChanged(c){c==="background"&&(this._logRecording(),this._client.flush().catch(u=>{this._errorBoundary.logError("SR::visibility",u)}))}_subscribeToVisibilityChanged(){const{sdkKey:c}=this._client.getContext();(0,n._subscribeToVisiblityChanged)(u=>{var d,f;const m=(f=(d=(0,n._getStatsigGlobal)())===null||d===void 0?void 0:d.srInstances)===null||f===void 0?void 0:f[c];m instanceof RO&&m._onVisibilityChanged(u)})}_logRecordingWithSessionID(c,u){const d=this._sessionData;if(this._events.length===0)return;const f=JSON.stringify(this._events),m=(0,t._slicePayload)(f),v=m.length>1?(0,n.getUUID)():null;for(let g=0;g<m.length;g++){const y=m[g],b=(0,t._makeLoggableRrwebEvent)(y,f,c,d,this._client.getContext().sdkInstanceID);v!=null&&(0,t._appendSlicedMetadata)(b.metadata,v,g,m.length,y.length),u&&(b.metadata[u]="true"),this._totalLogs++,this._client.logEvent(b),v!=null&&this._client.flush().catch(S=>{n.Log.error(S)})}this._events=[],this._totalLogs>t.MAX_LOGS&&this._shutdown()}_bumpSessionIdleTimerAndLogRecording(){this._getSessionIdFromClient(),this._logRecording()}_getSessionIdFromClient(){return this._client.getContext().session.data.sessionID}_shutdownImpl(c){if(this._replayer.isRecording()){this._replayer.stop();const u=()=>{n.StatsigMetadataProvider.add({isRecordingSession:"false"}),this._client.off("logs_flushed",u)};this._client.$on("logs_flushed",u)}if(this._events.length===0){c==="session_expired"&&(this._currentEventIndex=0,this._sessionData=this._makeEmptySessionData());return}this._logRecording(c),c==="session_expired"&&(this._currentEventIndex=0,this._sessionData=this._makeEmptySessionData())}_makeEmptySessionData(){return{startTime:-1,endTime:0,clickCount:0}}_onRecordingEvent(c,u){if(this._currentSessionID!==this._getSessionIdFromClient()){this._shutdown("session_expired");return}if(this._totalLogs>=t.MAX_LOGS){this._shutdown();return}c.eventIndex=this._currentEventIndex++,this._sessionData.clickCount+=u.clickCount,this._sessionData.startTime=this._sessionData.startTime===-1?u.startTime:Math.min(this._sessionData.startTime,u.startTime),this._sessionData.endTime=Math.max(this._sessionData.endTime,u.endTime);const d=(0,n._fastApproxSizeOf)(c,t.MAX_INDIVIDUAL_EVENT_BYTES);if(d>t.MAX_INDIVIDUAL_EVENT_BYTES){n.Log.warn("SessionReplay event is too large (~".concat(d," bytes) and will not be logged"),c);return}const f=(0,n._fastApproxSizeOf)(this._events,t.REPLAY_ENQUEUE_TRIGGER_BYTES);this._events.push(c),!(f+d<t.REPLAY_ENQUEUE_TRIGGER_BYTES)&&((0,n._isCurrentlyVisible)()?this._bumpSessionIdleTimerAndLogRecording():this._logRecording())}};return Jr.SessionReplayBase=a,Jr}var TT;function J5(){if(TT)return qs;TT=1,Object.defineProperty(qs,"__esModule",{value:!0}),qs.SessionReplay=qs.runStatsigSessionReplay=qs.StatsigSessionReplayPlugin=void 0;const n=Vn(),e=US(),t=kS();class i{constructor(a){this.options=a,this.__plugin="session-replay"}bind(a){r(a,this.options)}}qs.StatsigSessionReplayPlugin=i;function r(o,a){new s(o,a)}qs.runStatsigSessionReplay=r;let s=class extends e.SessionReplayBase{constructor(a,l){var c;super(a,l),this._client.$on("values_updated",()=>{var u;this._wasStopped||this._attemptToStartRecording((u=this._options)===null||u===void 0?void 0:u.forceRecording)}),this._attemptToStartRecording((c=this._options)===null||c===void 0?void 0:c.forceRecording)}_shutdown(a){super._shutdownImpl(a)}_attemptToStartRecording(a=!1){var l,c;if(this._totalLogs>=t.MAX_LOGS)return;const u=this._client.getContext().values;if((u==null?void 0:u.recording_blocked)===!0){this._shutdown();return}if(!a&&(u==null?void 0:u.can_record_session)!==!0){this._shutdown();return}if((u==null?void 0:u.passes_session_recording_targeting)===!1){this._shutdown();return}this._replayer.isRecording()||(this._wasStopped=!1,n.StatsigMetadataProvider.add({isRecordingSession:"true"}),this._replayer.record((d,f)=>this._onRecordingEvent(d,f),(c=(l=this._options)===null||l===void 0?void 0:l.rrwebConfig)!==null&&c!==void 0?c:{},()=>{this._shutdown()}))}};return qs.SessionReplay=s,qs}var Xs={},CT;function Q5(){if(CT)return Xs;CT=1,Object.defineProperty(Xs,"__esModule",{value:!0}),Xs.TriggeredSessionReplay=Xs.runStatsigTriggeredSessionReplay=Xs.StatsigTriggeredSessionReplayPlugin=void 0;const n=Vn(),e=US(),t=kS();class i{constructor(a){this.options=a,this.__plugin="triggered-session-replay"}bind(a){r(a,this.options)}}Xs.StatsigTriggeredSessionReplayPlugin=i;function r(o,a){new s(o,a)}Xs.runStatsigTriggeredSessionReplay=r;let s=class extends e.SessionReplayBase{constructor(a,l){var c;super(a,l),this._runningEventData=[],this._isActiveRecording=!1,this._subscribeToClientEvents(l),l!=null&&l.autoStartRecording?this._attemptToStartRecording((c=this._options)===null||c===void 0?void 0:c.forceRecording):l!=null&&l.keepRollingWindow&&this._attemptToStartRollingWindow()}_subscribeToClientEvents(a){this._subscribeToValuesUpdated(a),this._subscribeToLogEventCalled(),this._subscribeToGateEvaluation(),this._subscribeToExperimentEvaluation()}_subscribeToValuesUpdated(a){this._client.$on("values_updated",()=>{var l;this._wasStopped||(a!=null&&a.autoStartRecording?this._attemptToStartRecording((l=this._options)===null||l===void 0?void 0:l.forceRecording):a!=null&&a.keepRollingWindow&&this._attemptToStartRollingWindow())})}_subscribeToLogEventCalled(){this._client.$on("log_event_called",a=>{var l;if(this._wasStopped)return;const c=this._client.getContext().values;if((c==null?void 0:c.passes_session_recording_targeting)===!1||(c==null?void 0:c.session_recording_event_triggers)==null)return;const d=c.session_recording_event_triggers[a.event.eventName];if(d==null||d.passes_sampling===!1)return;const f=d.values;if(f==null){this._attemptToStartRecording(!0);return}if(f.includes(String((l=a.event.value)!==null&&l!==void 0?l:""))){this._attemptToStartRecording(!0);return}})}_subscribeToGateEvaluation(){this._client.$on("gate_evaluation",a=>{this._tryStartExposureRecording(a.gate.name,String(a.gate.value))})}_subscribeToExperimentEvaluation(){this._client.$on("experiment_evaluation",a=>{var l;this._tryStartExposureRecording(a.experiment.name,(l=a.experiment.groupName)!==null&&l!==void 0?l:"")})}_tryStartExposureRecording(a,l){var c;if(this._wasStopped)return;const u=this._client.getContext().values;if((u==null?void 0:u.passes_session_recording_targeting)===!1||(u==null?void 0:u.session_recording_exposure_triggers)==null)return;const f=(c=u.session_recording_exposure_triggers[a])!==null&&c!==void 0?c:u.session_recording_exposure_triggers[(0,n._DJB2)(a)];if(f==null||f.passes_sampling===!1)return;const m=f.values;if(m==null){this._attemptToStartRecording(!0);return}if(m.includes(l)){this._attemptToStartRecording(!0);return}}forceStartRecording(){super.forceStartRecording()}stopRecording(){this._isActiveRecording=!1,this._runningEventData=[],super.stopRecording()}_handleStartActiveRecording(){if(this._isActiveRecording=!0,this._runningEventData.length===0)return;const a=this._runningEventData.map(l=>l.events).flat();for(let l=0;l<a.length;l++)a[l].event.eventIndex=l,this._sessionData.clickCount+=a[l].data.clickCount,this._sessionData.startTime=this._sessionData.startTime===-1?a[l].data.startTime:Math.min(this._sessionData.startTime,a[l].data.startTime),this._sessionData.endTime=Math.max(this._sessionData.endTime,a[l].data.endTime);this._events=a.map(l=>l.event),this._currentEventIndex=a.length,(0,n._isCurrentlyVisible)()?this._bumpSessionIdleTimerAndLogRecording():this._logRecording(),this._replayer.stop()}_shutdown(a){this._isActiveRecording=!1,this._runningEventData=[],super._shutdownImpl(a)}_onRecordingEvent(a,l,c){if(!this._isActiveRecording){if(this._currentSessionID!==this._getSessionIdFromClient()){this._shutdown("session_expired");return}c&&a.type===4||this._runningEventData.length===0?(this._runningEventData.length>1&&this._runningEventData.shift(),this._runningEventData.push({events:[{event:a,data:l}]})):this._runningEventData[this._runningEventData.length-1].events.push({event:a,data:l});return}super._onRecordingEvent(a,l)}_attemptToStartRollingWindow(){var a,l;const c=this._client.getContext().values;if((c==null?void 0:c.passes_session_recording_targeting)===!1){this._shutdown();return}this._replayer.isRecording()||this._replayer.record((u,d,f)=>this._onRecordingEvent(u,d,f),(l=(a=this._options)===null||a===void 0?void 0:a.rrwebConfig)!==null&&l!==void 0?l:{},()=>{this._shutdown()},!0)}_attemptToStartRecording(a=!1){var l,c;if(this._totalLogs>=t.MAX_LOGS)return;const u=this._client.getContext().values;if((u==null?void 0:u.recording_blocked)===!0){this._shutdown();return}if(!a&&(u==null?void 0:u.can_record_session)!==!0){this._shutdown();return}if((u==null?void 0:u.passes_session_recording_targeting)===!1){this._shutdown();return}this._handleStartActiveRecording(),this._wasStopped=!1,n.StatsigMetadataProvider.add({isRecordingSession:"true"}),!this._replayer.isRecording()&&this._replayer.record((d,f,m)=>this._onRecordingEvent(d,f,m),(c=(l=this._options)===null||l===void 0?void 0:l.rrwebConfig)!==null&&c!==void 0?c:{},()=>{this._shutdown()})}};return Xs.TriggeredSessionReplay=s,Xs}var RT;function Z5(){return RT||(RT=1,(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.forceStartRecording=n.stopRecording=n.startRecording=n.StatsigTriggeredSessionReplayPlugin=n.StatsigSessionReplayPlugin=n.runStatsigTriggeredSessionReplay=n.runStatsigSessionReplay=n.SessionReplay=n.SessionReplayClient=void 0;const e=Vn(),t=J5();Object.defineProperty(n,"SessionReplay",{enumerable:!0,get:function(){return t.SessionReplay}}),Object.defineProperty(n,"StatsigSessionReplayPlugin",{enumerable:!0,get:function(){return t.StatsigSessionReplayPlugin}}),Object.defineProperty(n,"runStatsigSessionReplay",{enumerable:!0,get:function(){return t.runStatsigSessionReplay}});const i=US();Object.defineProperty(n,"forceStartRecording",{enumerable:!0,get:function(){return i.forceStartRecording}}),Object.defineProperty(n,"startRecording",{enumerable:!0,get:function(){return i.startRecording}}),Object.defineProperty(n,"stopRecording",{enumerable:!0,get:function(){return i.stopRecording}});const r=CO();Object.defineProperty(n,"SessionReplayClient",{enumerable:!0,get:function(){return r.SessionReplayClient}});const s=Q5();Object.defineProperty(n,"StatsigTriggeredSessionReplayPlugin",{enumerable:!0,get:function(){return s.StatsigTriggeredSessionReplayPlugin}}),Object.defineProperty(n,"runStatsigTriggeredSessionReplay",{enumerable:!0,get:function(){return s.runStatsigTriggeredSessionReplay}}),Object.assign((0,e._getStatsigGlobal)(),{SessionReplayClient:r.SessionReplayClient,SessionReplay:t.SessionReplay,runStatsigSessionReplay:t.runStatsigSessionReplay,runStatsigTriggeredSessionReplay:s.runStatsigTriggeredSessionReplay,StatsigSessionReplayPlugin:t.StatsigSessionReplayPlugin,StatsigTriggeredSessionReplayPlugin:s.StatsigTriggeredSessionReplayPlugin,startRecording:i.startRecording,stopRecording:i.stopRecording,forceStartRecording:i.forceStartRecording})})(qy)),qy}var Poe=Z5(),Yy={},Ys={},_h={},IT;function Qd(){return IT||(IT=1,Object.defineProperty(_h,"__esModule",{value:!0}),_h.AutoCaptureEventName=void 0,_h.AutoCaptureEventName={PAGE_VIEW:"auto_capture::page_view",PAGE_VIEW_END:"auto_capture::page_view_end",ERROR:"auto_capture::error",SESSION_START:"auto_capture::session_start",PERFORMANCE:"auto_capture::performance",FORM_SUBMIT:"auto_capture::form_submit",CLICK:"auto_capture::click",RAGE_CLICK:"auto_capture::rage_click",WEB_VITALS:"auto_capture::web_vitals",DEAD_CLICK:"auto_capture::dead_click",COPY:"auto_capture::copy",CONSOLE_LOG:"statsig::log_line"}),_h}var yh={},Ky={},DT;function Tu(){return DT||(DT=1,(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.wrapFunctionWithRestore=n.throttle=n._sanitizeString=n._getAnchorNodeInHierarchy=n._getSafeTimezoneOffset=n._getSafeTimezone=n._getSafeNetworkInformation=n._registerEventHandler=n._getSanitizedPageUrl=n._getSafeUrlString=n._getSafeUrl=n._shouldLogEvent=n._getTargetNode=n._stripEmptyValues=n.interactiveElements=void 0;const e=Vn(),t="(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11})",i=new RegExp("^(?:".concat(t,")$")),r="\\d{3}-?\\d{2}-?\\d{4}",s=new RegExp("^(".concat(r,")$"));n.interactiveElements=["button","a","input","select","textarea","form","select","label"];function o(E){return Object.fromEntries(Object.entries(E).filter(([M,I])=>I!=null&&I!==""&&I!==void 0))}n._stripEmptyValues=o;function a(E){if(!E)return null;let M=E.target||E.srcElement;return!M||!(M instanceof Element)?null:(M.nodeType===3&&(M=M.parentNode||null),M)}n._getTargetNode=a;function l(E,M,I=!1){if(!E||!M||M.nodeType!==1)return!1;const R=M.tagName.toLowerCase(),C=E.type.toLowerCase();if(M.classList.contains("statsig-no-capture"))return!1;if(I)return!0;switch(R){case"html":return!1;case"form":return["submit"].indexOf(C)>=0;case"input":case"select":case"textarea":return["change","click"].indexOf(C)>=0;default:if(C==="click"){const L=window.getComputedStyle(M);if(L&&L.getPropertyValue("cursor")==="pointer"||n.interactiveElements.includes(R)||M.getAttribute("contenteditable")==="true"||y(M))return!0}return!1}}n._shouldLogEvent=l;function c(){var E,M,I;const R=(I=(M=(E=(0,e._getWindowSafe)())===null||E===void 0?void 0:E.location)===null||M===void 0?void 0:M.href)!==null&&I!==void 0?I:"";let C;try{C=new URL(R)}catch(D){C=new URL("error:")}return C}n._getSafeUrl=c;function u(){const E=c().toString();return E.startsWith("error:")?"":E}n._getSafeUrlString=u;function d(){return(0,e._getCurrentPageUrlSafe)()||""}n._getSanitizedPageUrl=d;function f(E,M,I){!E||!E.addEventListener||E.addEventListener(M,I,!0)}n._registerEventHandler=f;function m(){const E=(0,e._getWindowSafe)();if(!E||!E.navigator)return null;const M=E.navigator.connection;return M||null}n._getSafeNetworkInformation=m;function v(){try{return Intl.DateTimeFormat().resolvedOptions().timeZone}catch(E){return null}}n._getSafeTimezone=v;function g(){try{return new Date().getTimezoneOffset()}catch(E){return null}}n._getSafeTimezoneOffset=g;function y(E){if(!E)return null;let M=E;for(;M;){const I=M.tagName.toLowerCase();if(["body","document"].includes(I))return null;if(M.tagName.toLowerCase()==="a")return M;M=M.parentElement}return null}n._getAnchorNodeInHierarchy=y;function b(E){return E?E.replace(/<[^>]*>/g,"").trim().split(/(\s+)/).filter(M=>S(M)).join("").replace(/[\r\n]/g," ").replace(/[ ]+/g," ").substring(0,255):null}n._sanitizeString=b;function S(E){return!(i.test((E||"").replace(/[- ]/g,""))||s.test((E||"").replace(/[- ]/g,"")))}function x(E,M){let I=0;return function(...R){const C=Date.now();C-I>=M&&(I=C,E(...R))}}n.throttle=x;function A(E,M,I){const R=E[M];if(typeof R!="function")return()=>{};try{const C=I(R);return Object.defineProperty(C,"__statsig_original__",{enumerable:!1,value:R}),E[M]=C,()=>{E[M]=R}}catch(C){return()=>{}}}n.wrapFunctionWithRestore=A})(Ky)),Ky}var Oa={},PT;function ej(){if(PT)return Oa;PT=1,Object.defineProperty(Oa,"__esModule",{value:!0}),Oa._getStackTrace=Oa._safeStringify=void 0;function n(a,l){return a.length<=l?a:a.slice(0,l)+"..."}function e(a,l,c,u){try{return i(a,l,c)?o(a,u):n(typeof a=="string"?a:typeof a=="object"&&a!==null?JSON.stringify(a):String(a),u)}catch(d){return n("[Unserializable]",u)}}Oa._safeStringify=e;function t(){var a,l;try{return(l=(a=new Error().stack)===null||a===void 0?void 0:a.split("\n").slice(2))!==null&&l!==void 0?l:[]}catch(c){return[]}}Oa._getStackTrace=t;function i(a,l,c){return!!(r(a)&&(Object.keys(a).length>l||s(a,c))||typeof a=="function")}function r(a){return Object.prototype.toString.call(a)==="[object Object]"}function s(a,l){return l<=0?!0:typeof a!="object"||a===null?!1:Object.keys(a).some(c=>s(a[c],l-1))}function o(a,l){return n(a.toString(),l)}return Oa}var Qr={},OT;function NS(){if(OT)return Qr;OT=1,Object.defineProperty(Qr,"__esModule",{value:!0}),Qr._getPossibleFirstTouchMetadata=Qr._getNetworkInfo=Qr._gatherAllMetadata=Qr._gatherCommonMetadata=void 0;const n=Vn(),e=Tu();function t(l){var c,u,d,f,m,v,g,y;const b=(0,n._getDocumentSafe)(),S=(0,n._getWindowSafe)();return(0,e._stripEmptyValues)(Object.assign({title:b==null?void 0:b.title,current_url:(c=S==null?void 0:S.location)===null||c===void 0?void 0:c.href,user_agent:!((u=S==null?void 0:S.navigator)===null||u===void 0)&&u.userAgent&&((f=(d=S==null?void 0:S.navigator)===null||d===void 0?void 0:d.userAgent)===null||f===void 0?void 0:f.length)>200?S.navigator.userAgent.substring(0,200):(m=S==null?void 0:S.navigator)===null||m===void 0?void 0:m.userAgent,locale:(v=S==null?void 0:S.navigator)===null||v===void 0?void 0:v.language,hostname:l.hostname,pathname:l.pathname,screen_width:(g=S==null?void 0:S.screen)===null||g===void 0?void 0:g.width,screen_height:(y=S==null?void 0:S.screen)===null||y===void 0?void 0:y.height,viewport_width:S==null?void 0:S.innerWidth,viewport_height:S==null?void 0:S.innerHeight,viewport:"".concat(S==null?void 0:S.innerWidth,"x").concat(S==null?void 0:S.innerHeight),timestamp:Date.now(),timezone:(0,e._getSafeTimezone)(),timezone_offset:(0,e._getSafeTimezoneOffset)()},r()))}Qr._gatherCommonMetadata=t;function i(l){const c=(0,n._getDocumentSafe)(),u=(0,n._getWindowSafe)();if(!c||!u)return{};const d=o(c),f=t(l),m=a(l),v={};return l.searchParams.forEach((g,y)=>{v[y]=g}),Object.assign(Object.assign({},f),(0,e._stripEmptyValues)(Object.assign(Object.assign(Object.assign({},d),m),v)))}Qr._gatherAllMetadata=i;function r(){const l=(0,e._getSafeNetworkInformation)(),c={};return(l==null?void 0:l.effectiveType)!==void 0&&(c.effective_connection_type=l.effectiveType),(l==null?void 0:l.rtt)!==void 0&&(c.rtt_ms=l.rtt),(l==null?void 0:l.downlink)!==void 0&&(c.downlink_mbps=l.downlink,c.downlink_kbps=l.downlink*1e3),(l==null?void 0:l.saveData)!==void 0&&(c.save_data=l.saveData),c}Qr._getNetworkInfo=r;function s(l){const c=(0,n._getDocumentSafe)(),u=(0,n._getWindowSafe)();if(!c||!u)return{};const d=o(c),f=a(l),m=(0,e._stripEmptyValues)(Object.assign(Object.assign({},d),f)),v={};for(const[g,y]of Object.entries(m))v["$s_".concat(g)]=y;return v}Qr._getPossibleFirstTouchMetadata=s;function o(l){const c=(l==null?void 0:l.referrer)||"";if(!c)return{referrer:null,referrer_domain:null,referrer_path:null,searchEngine:"",searchQuery:""};try{const u=new URL(c),d=u.hostname,f=["google","bing","yahoo","duckduckgo","baidu"].find(v=>d.includes(v+"."))||"",m=u.searchParams.get(f==="yahoo"?"p":"q")||"";return{referrer:c,referrer_domain:u.hostname,referrer_path:u.pathname,searchEngine:f,searchQuery:m}}catch(u){return{referrer:null,referrer_domain:null,referrer_path:null,searchEngine:"",searchQuery:""}}}function a(l){const c=l.searchParams,u={};return["utm_source","utm_medium","utm_campaign","utm_term","utm_content","msclkid","dclid","fbclid","gad_source","gclid","gclsrc","wbraid","utm_id","irclid","igshid","_kx","li_fat_id","mc_cid","mc_eid","epik","qclid","rdt_cid","sccid","ttc","ttclid","ttc_id","twclid"].forEach(f=>{const m=c.get(f);m&&(u[f]=m)}),u}return Qr}var LT;function tj(){if(LT)return yh;LT=1,Object.defineProperty(yh,"__esModule",{value:!0}),yh.ConsoleLogManager=void 0;const n=Vn(),e=Qd(),t=Tu(),i=ej(),r=NS(),s={trace:10,debug:20,log:30,info:30,warn:40,error:50},o=10,a=10,l=500;let c=class{constructor(d,f,m){var v,g,y,b;this._enqueueFn=d,this._errorBoundary=f,this._options=m,this._restoreFns=[],this._isTracking=!1,this._logLevel="info",this.__source="js-auto-capture",this._logLevel=(v=this._options.logLevel)!==null&&v!==void 0?v:"info",this._maxKeys=(g=this._options.maxKeys)!==null&&g!==void 0?g:o,this._maxDepth=(y=this._options.maxDepth)!==null&&y!==void 0?y:a,this._maxStringLength=(b=this._options.maxStringLength)!==null&&b!==void 0?b:l}startTracking(){try{if(this._isTracking||!this._options.enabled||!(0,n._getWindowSafe)())return;this._patchConsole(),this._isTracking=!0}catch(d){n.Log.error("Error starting console log tracking",d),this._errorBoundary.logError("autoCapture:ConsoleLogManager",d)}}stopTracking(){this._isTracking&&(this._restoreFns.forEach(d=>d()),this._restoreFns=[],this._isTracking=!1)}_patchConsole(){Object.entries(s).forEach(([d,f])=>{if(f<s[this._logLevel]||!console[d])return;const m=console[d].bind(console);let v=!1;const g=(0,t.wrapFunctionWithRestore)(console,d,y=>(...b)=>{if(y(...b),!v){v=!0;try{const S=b.map(A=>(0,i._safeStringify)(A,this._maxKeys,this._maxDepth,this._maxStringLength)),x=(0,i._getStackTrace)();this._enqueueConsoleLog(d,S,x)}catch(S){m("console observer error:",S,...b),this._errorBoundary.logError("autoCapture:ConsoleLogManager",S)}finally{v=!1}}});this._restoreFns.push(g)})}_enqueueConsoleLog(d,f,m){if(!this._shouldLog())return;const v=Object.assign({status:d==="log"?"info":d,log_level:d,payload:f,trace:m,timestamp:Date.now(),source:this.__source},(0,r._gatherAllMetadata)((0,t._getSafeUrl)()));this._enqueueFn(e.AutoCaptureEventName.CONSOLE_LOG,f.join(" "),v)}_shouldLog(){return!this._options.sampleRate||typeof this._options.sampleRate!="number"||this._options.sampleRate<=0||this._options.sampleRate>=1?!0:Math.random()<this._options.sampleRate}};return yh.ConsoleLogManager=c,yh}var $y={},Ks={},kT;function IO(){if(kT)return Ks;kT=1,Object.defineProperty(Ks,"__esModule",{value:!0}),Ks._getMetadataFromElement=Ks._gatherCopyEventData=Ks._gatherEventData=void 0;const n=Vn(),e=Tu(),t=1e3,i=100,r=50;function s(E){const M=(0,e._getSanitizedPageUrl)()||"",I=E.tagName.toLowerCase();if(a(E))return{value:M,metadata:g(E)};const R={};R.tagName=I;const C=y(E);Object.assign(R,C),I==="form"&&Object.assign(R,l(E)),I==="input"&&Object.assign(R,c(E));const D=(0,e._getAnchorNodeInHierarchy)(E);return D&&Object.assign(R,u(D)),(I==="button"||D)&&Object.assign(R,d(D||E)),v(R)&&(R.isOutbound="true"),{value:M,metadata:R}}Ks._gatherEventData=s;function o(E){var M,I;const R=(I=(M=(0,n._getWindowSafe)())===null||M===void 0?void 0:M.getSelection())===null||I===void 0?void 0:I.toString(),C={};C.selectedText=(0,e._sanitizeString)(R);const D=E.type||"clipboard";return C.clipType=D,C}Ks._gatherCopyEventData=o;function a(E){return E.tagName.toLowerCase()==="input"&&["button","checkbox","submit","reset"].includes(E.getAttribute("type")||"")||E.tagName.toLowerCase()==="textarea"||E.tagName.toLowerCase()==="select"||E.getAttribute("contenteditable")==="true"}function l(E){var M;const I={};return I.action=E.getAttribute("action"),I.method=(M=E.getAttribute("method"))!==null&&M!==void 0?M:"GET",I.formName=E.getAttribute("name"),I.formId=E.getAttribute("id"),I}function c(E){const M={};return M.content=E.value,M.inputName=E.getAttribute("name"),M}function u(E){const M={};return M.href=E.getAttribute("href"),M}function d(E){const M={};M.content=(E.textContent||"").trim();const I=f(E);return Object.assign(M,I),M}function f(E){const M={};if(!E)return M;const I=E==null?void 0:E.dataset;if(!I)return M;for(const R in I)M["data-".concat(R)]=I[R]||"";return M}function m(E,M){return E?E.length>M?E.substring(0,M)+"...":E:null}function v(E){var M;if(Array.isArray(E.classList)&&(!((M=E.classList)===null||M===void 0)&&M.includes("statsig-ctr-capture")))return!0;const I=E.href;if(I)try{const R=(0,e._getSafeUrl)(),C=new URL(I);return R.host!==C.host}catch(R){return!1}return!1}function g(E){const M={};return M.class=b(m(E.getAttribute("class"),t)||""),M.id=m(E.getAttribute("id"),t),M.ariaLabel=m(E.getAttribute("aria-label"),t),M.name=m(E.getAttribute("name"),t),M}function y(E){const M={},I=g(E);Object.assign(M,I);const R=Array.from(E.classList);return M.classList=R.length>0?R.slice(0,i):null,M.selector=A(E),M}Ks._getMetadataFromElement=y;function b(E){return E.replace(/\s+/g," ").trim()}function S(E){let M=E.nextElementSibling;for(;M;){if(M.tagName===E.tagName)return!0;M=M.nextElementSibling}return!1}function x(E){const M=E.tagName.toLowerCase();if(E.id)return"#".concat(E.id);let I=M;if(E.className&&typeof E.className=="string"){const C=E.className.trim().split(/\s+/);C.length>0&&C[0]!==""&&(I+="."+C.join("."))}const R=E.parentElement;if(R&&R.children.length>1){let C=1,D=1,L=E.previousElementSibling;for(;L;)C++,L.tagName===E.tagName&&D++,L=L.previousElementSibling;I+=":nth-child(".concat(C,")"),(D>1||S(E))&&(I+=":nth-of-type(".concat(D,")"))}return I}function A(E){if(!E)return"";if(!E.parentNode){const C=E.tagName.toLowerCase();if(E.id)return"#".concat(E.id);let D=C;if(E.className&&typeof E.className=="string"){const L=E.className.trim().split(/\s+/);L.length>0&&L[0]!==""&&(D+="."+L.join("."))}return D}const M=[];let I=E,R=0;for(;I&&I.nodeType===Node.ELEMENT_NODE&&R<r;){const C=x(I);if(M.unshift(C),I.id||(I=I.parentElement,I&&I.tagName.toLowerCase()==="body"))break;R++}return M.join(" > ")}return Ks}var UT;function nj(){return UT||(UT=1,(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.DeadClickConfig=void 0;const e=Vn(),t=Qd(),i=Tu(),r=IO(),s=NS();n.DeadClickConfig={CLICK_CHECK_TIMEOUT:1e3,SCROLL_DELAY_MS:100,SELECTION_CHANGE_DELAY_MS:100,MUTATION_DELAY_MS:2500,ABSOLUTE_DEAD_CLICK_TIMEOUT:2750};class o{constructor(l,c){this._enqueueFn=l,this._errorBoundary=c,this._lastMutationTime=0,this._lastSelectionChangeTime=0,this._clicks=[],this._deadClickConfig=n.DeadClickConfig,this._handleScroll=(0,i.throttle)(()=>{const u=Date.now();this._clicks.forEach(d=>{d.scrollDelayMs||(d.scrollDelayMs=u-d.timestamp)})},50)}startTracking(){try{const l=(0,e._getWindowSafe)();if(!l)return;l.addEventListener("click",c=>this._handleClick(c),{capture:!0}),l.addEventListener("scroll",()=>this._handleScroll(),{capture:!0,passive:!0}),l.addEventListener("selectionchange",()=>this._handleSelectionChange()),this._setupMutationObserver()}catch(l){e.Log.error("Error starting dead click tracking",l),this._errorBoundary.logError("autoCapture:DeadClickManager",l)}}_handleClick(l){var c,u;const d=l.target;if(!d)return;const f={timestamp:Date.now(),eventTarget:d};i.interactiveElements.includes((c=d==null?void 0:d.tagName)===null||c===void 0?void 0:c.toLowerCase())||this._clicks.push(f),this._clicks.length&&!this._clickCheckTimer&&(this._clickCheckTimer=(u=(0,e._getWindowSafe)())===null||u===void 0?void 0:u.setTimeout(()=>{this._checkForDeadClick()},this._deadClickConfig.CLICK_CHECK_TIMEOUT))}_handleSelectionChange(){this._lastSelectionChangeTime=Date.now()}_setupMutationObserver(){const l=(0,e._getDocumentSafe)();l&&(this._observer=new MutationObserver(()=>{this._lastMutationTime=Date.now()}),this._observer.observe(l.body,{childList:!0,subtree:!0,attributes:!0,characterData:!0}))}_checkForDeadClick(){var l;if(!this._clicks.length)return;clearTimeout(this._clickCheckTimer),this._clickCheckTimer=void 0;const c=this._clicks;this._clicks=[];for(const u of c){this._updateClickDelayMs(u);const d=u.scrollDelayMs!=null&&u.scrollDelayMs<this._deadClickConfig.SCROLL_DELAY_MS,f=u.selectionChangeDelayMs!=null&&u.selectionChangeDelayMs<this._deadClickConfig.SELECTION_CHANGE_DELAY_MS,m=u.mutationDelayMs!=null&&u.mutationDelayMs<this._deadClickConfig.MUTATION_DELAY_MS;if(d||f||m)continue;const v=u.scrollDelayMs!=null&&u.scrollDelayMs>this._deadClickConfig.SCROLL_DELAY_MS,g=u.selectionChangeDelayMs!=null&&u.selectionChangeDelayMs>this._deadClickConfig.SELECTION_CHANGE_DELAY_MS,y=u.mutationDelayMs!=null&&u.mutationDelayMs>this._deadClickConfig.MUTATION_DELAY_MS,b=u.absoluteDelayMs!=null&&u.absoluteDelayMs>this._deadClickConfig.ABSOLUTE_DEAD_CLICK_TIMEOUT;v||g||y||b?this._logDeadClick(u,{scrollTimeout:v,selectionChangeTimeout:g,mutationTimeout:y,absoluteTimeout:b}):u.absoluteDelayMs!=null&&u.absoluteDelayMs<this._deadClickConfig.ABSOLUTE_DEAD_CLICK_TIMEOUT&&this._clicks.push(u)}this._clicks.length&&!this._clickCheckTimer&&(this._clickCheckTimer=(l=(0,e._getWindowSafe)())===null||l===void 0?void 0:l.setTimeout(()=>{this._checkForDeadClick()},this._deadClickConfig.CLICK_CHECK_TIMEOUT))}_logDeadClick(l,c){const{value:u,metadata:d}=(0,r._gatherEventData)(l.eventTarget);u&&this._enqueueFn(t.AutoCaptureEventName.DEAD_CLICK,u,Object.assign(Object.assign(Object.assign(Object.assign({},d),c),(0,s._gatherCommonMetadata)((0,i._getSafeUrl)())),{scrollDelayMs:l.scrollDelayMs,selectionChangeDelayMs:l.selectionChangeDelayMs,mutationDelayMs:l.mutationDelayMs,absoluteDelayMs:l.absoluteDelayMs}))}_updateClickDelayMs(l){!l.mutationDelayMs&&this._lastMutationTime>0&&l.timestamp<=this._lastMutationTime&&(l.mutationDelayMs=Date.now()-this._lastMutationTime),!l.selectionChangeDelayMs&&this._lastSelectionChangeTime>0&&l.timestamp<=this._lastSelectionChangeTime&&(l.selectionChangeDelayMs=Date.now()-this._lastSelectionChangeTime),l.absoluteDelayMs=Date.now()-l.timestamp}}n.default=o})($y)),$y}var bh={},NT;function ij(){if(NT)return bh;NT=1,Object.defineProperty(bh,"__esModule",{value:!0}),bh.EngagementManager=void 0;const n=Vn(),e=6e5;let t=class{constructor(){this._lastScrollY=0,this._maxScrollY=0,this._lastScrollPercentage=0,this._maxScrollPercentage=0,this._lastPageViewTime=Date.now(),this._inactiveTimer=null,this._onInactivityCallback=null,this._meaningfulEngagementOccurred=!1,this._initializeScrollTracking()}_initializeScrollTracking(){const r=(0,n._getWindowSafe)();r&&(r.addEventListener("scroll",()=>this._handleScroll()),r.addEventListener("scrollend",()=>this._handleScroll()),r.addEventListener("resize",()=>this._handleScroll()))}_handleScroll(){const r=(0,n._getWindowSafe)(),s=(0,n._getDocumentSafe)();if(!r||!s)return;const o=s.body.scrollHeight,a=r.scrollY||s.documentElement.scrollTop||0,l=r.innerHeight;this._lastScrollY=a,this._maxScrollY=Math.max(this._maxScrollY,a);const c=Math.min(100,Math.round((a+l)/o*100));this._lastScrollPercentage=c,this._maxScrollPercentage=Math.max(this._maxScrollPercentage,c),this.bumpInactiveTimer()}getScrollMetrics(){return{lastScrollY:this._lastScrollY,maxScrollY:this._maxScrollY,lastScrollPercentage:this._lastScrollPercentage,maxScrollPercentage:this._maxScrollPercentage,scrollDepth:this._maxScrollPercentage}}getPageViewLength(){return Date.now()-this._lastPageViewTime}setLastPageViewTime(r){this._lastPageViewTime=r}startInactivityTracking(r){this._onInactivityCallback=r}bumpInactiveTimer(){const r=(0,n._getWindowSafe)();r&&(this._inactiveTimer&&clearTimeout(this._inactiveTimer),this._inactiveTimer=r.setTimeout(()=>{this._onInactivityCallback&&this._onInactivityCallback()},e))}setMeaningfulEngagementOccurred(r){this._meaningfulEngagementOccurred=r}getPageViewEndMetadata(){const r=Object.assign(Object.assign({},this.getScrollMetrics()),{pageViewLength:this.getPageViewLength(),meaningfulEngagementOccurred:this._meaningfulEngagementOccurred});return this.setMeaningfulEngagementOccurred(!1),r}};return bh.EngagementManager=t,bh}var Cp={},FT;function rj(){if(FT)return Cp;FT=1,Object.defineProperty(Cp,"__esModule",{value:!0});const n=30,e=1e3,t=3;let i=class{constructor(){this._clicks=[]}isRageClick(s,o,a){this._clicks=this._clicks.filter(c=>a-c.timestamp<e);const l=c=>{const u=s-c.x,d=o-c.y;return Math.abs(u)+Math.abs(d)<=n};return this._clicks.length>0&&!l(this._clicks[this._clicks.length-1])&&(this._clicks=[]),this._clicks.push({x:s,y:o,timestamp:a}),this._clicks.length>=t}};return Cp.default=i,Cp}var wh={},Hh={exports:{}},sj=Hh.exports,BT;function oj(){return BT||(BT=1,(function(n,e){(function(t,i){i(e)})(sj,(function(t){let i=-1;const r=fe=>{addEventListener("pageshow",(he=>{he.persisted&&(i=he.timeStamp,fe(he))}),!0)},s=(fe,he,le,ee)=>{let de,be;return oe=>{he.value>=0&&(oe||ee)&&(be=he.value-(de!=null?de:0),(be||de===void 0)&&(de=he.value,he.delta=be,he.rating=((ge,Se)=>ge>Se[1]?"poor":ge>Se[0]?"needs-improvement":"good")(he.value,le),fe(he)))}},o=fe=>{requestAnimationFrame((()=>requestAnimationFrame((()=>fe()))))},a=()=>{const fe=performance.getEntriesByType("navigation")[0];if(fe&&fe.responseStart>0&&fe.responseStart<performance.now())return fe},l=()=>{var he;const fe=a();return(he=fe==null?void 0:fe.activationStart)!=null?he:0},c=(fe,he=-1)=>{const le=a();let ee="navigate";return i>=0?ee="back-forward-cache":le&&(document.prerendering||l()>0?ee="prerender":document.wasDiscarded?ee="restore":le.type&&(ee=le.type.replace(/_/g,"-"))),{name:fe,value:he,rating:"good",delta:0,entries:[],id:"v5-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:ee}},u=new WeakMap;function d(fe,he){return u.get(fe)||u.set(fe,new he),u.get(fe)}class f{constructor(){Ci(this,"t");Ci(this,"i",0);Ci(this,"o",[])}h(he){var de;if(he.hadRecentInput)return;const le=this.o[0],ee=this.o.at(-1);this.i&&le&&ee&&he.startTime-ee.startTime<1e3&&he.startTime-le.startTime<5e3?(this.i+=he.value,this.o.push(he)):(this.i=he.value,this.o=[he]),(de=this.t)==null||de.call(this,he)}}const m=(fe,he,le={})=>{try{if(PerformanceObserver.supportedEntryTypes.includes(fe)){const ee=new PerformanceObserver((de=>{Promise.resolve().then((()=>{he(de.getEntries())}))}));return ee.observe({type:fe,buffered:!0,...le}),ee}}catch(ee){}},v=fe=>{let he=!1;return()=>{he||(fe(),he=!0)}};let g=-1;const y=()=>document.visibilityState!=="hidden"||document.prerendering?1/0:0,b=fe=>{document.visibilityState==="hidden"&&g>-1&&(g=fe.type==="visibilitychange"?fe.timeStamp:0,x())},S=()=>{addEventListener("visibilitychange",b,!0),addEventListener("prerenderingchange",b,!0)},x=()=>{removeEventListener("visibilitychange",b,!0),removeEventListener("prerenderingchange",b,!0)},A=()=>{var fe;if(g<0){const he=l(),le=document.prerendering||(fe=globalThis.performance.getEntriesByType("visibility-state").filter((ee=>ee.name==="hidden"&&ee.startTime>he))[0])==null?void 0:fe.startTime;g=le!=null?le:y(),S(),r((()=>{setTimeout((()=>{g=y(),S()}))}))}return{get firstHiddenTime(){return g}}},E=fe=>{document.prerendering?addEventListener("prerenderingchange",(()=>fe()),!0):fe()},M=[1800,3e3],I=(fe,he={})=>{E((()=>{const le=A();let ee,de=c("FCP");const be=m("paint",(oe=>{for(const ge of oe)ge.name==="first-contentful-paint"&&(be.disconnect(),ge.startTime<le.firstHiddenTime&&(de.value=Math.max(ge.startTime-l(),0),de.entries.push(ge),ee(!0)))}));be&&(ee=s(fe,de,M,he.reportAllChanges),r((oe=>{de=c("FCP"),ee=s(fe,de,M,he.reportAllChanges),o((()=>{de.value=performance.now()-oe.timeStamp,ee(!0)}))})))}))},R=[.1,.25];let C=0,D=1/0,L=0;const z=fe=>{for(const he of fe)he.interactionId&&(D=Math.min(D,he.interactionId),L=Math.max(L,he.interactionId),C=L?(L-D)/7+1:0)};let G;const H=()=>{var fe;return G?C:(fe=performance.interactionCount)!=null?fe:0},J=()=>{"interactionCount"in performance||G||(G=m("event",z,{type:"event",buffered:!0,durationThreshold:0}))};let k=0;class X{constructor(){Ci(this,"u",[]);Ci(this,"l",new Map);Ci(this,"m");Ci(this,"p")}v(){k=H(),this.u.length=0,this.l.clear()}T(){const he=Math.min(this.u.length-1,Math.floor((H()-k)/50));return this.u[he]}h(he){var de,be;if((de=this.m)==null||de.call(this,he),!he.interactionId&&he.entryType!=="first-input")return;const le=this.u.at(-1);let ee=this.l.get(he.interactionId);if(ee||this.u.length<10||he.duration>le.P){if(ee?he.duration>ee.P?(ee.entries=[he],ee.P=he.duration):he.duration===ee.P&&he.startTime===ee.entries[0].startTime&&ee.entries.push(he):(ee={id:he.interactionId,entries:[he],P:he.duration},this.l.set(ee.id,ee),this.u.push(ee)),this.u.sort(((oe,ge)=>ge.P-oe.P)),this.u.length>10){const oe=this.u.splice(10);for(const ge of oe)this.l.delete(ge.id)}(be=this.p)==null||be.call(this,ee)}}}const W=fe=>{const he=globalThis.requestIdleCallback||setTimeout;document.visibilityState==="hidden"?fe():(fe=v(fe),document.addEventListener("visibilitychange",fe,{once:!0}),he((()=>{fe(),document.removeEventListener("visibilitychange",fe)})))},ie=[200,500];class se{constructor(){Ci(this,"m")}h(he){var le;(le=this.m)==null||le.call(this,he)}}const ye=[2500,4e3],Ne=[800,1800],He=fe=>{document.prerendering?E((()=>He(fe))):document.readyState!=="complete"?addEventListener("load",(()=>He(fe)),!0):setTimeout(fe)};t.CLSThresholds=R,t.FCPThresholds=M,t.INPThresholds=ie,t.LCPThresholds=ye,t.TTFBThresholds=Ne,t.onCLS=(fe,he={})=>{I(v((()=>{let le,ee=c("CLS",0);const de=d(he,f),be=ge=>{for(const Se of ge)de.h(Se);de.i>ee.value&&(ee.value=de.i,ee.entries=de.o,le())},oe=m("layout-shift",be);oe&&(le=s(fe,ee,R,he.reportAllChanges),document.addEventListener("visibilitychange",(()=>{document.visibilityState==="hidden"&&(be(oe.takeRecords()),le(!0))})),r((()=>{de.i=0,ee=c("CLS",0),le=s(fe,ee,R,he.reportAllChanges),o((()=>le()))})),setTimeout(le))})))},t.onFCP=I,t.onINP=(fe,he={})=>{globalThis.PerformanceEventTiming&&"interactionId"in PerformanceEventTiming.prototype&&E((()=>{var ge;J();let le,ee=c("INP");const de=d(he,X),be=Se=>{W((()=>{for(const me of Se)de.h(me);const q=de.T();q&&q.P!==ee.value&&(ee.value=q.P,ee.entries=q.entries,le())}))},oe=m("event",be,{durationThreshold:(ge=he.durationThreshold)!=null?ge:40});le=s(fe,ee,ie,he.reportAllChanges),oe&&(oe.observe({type:"first-input",buffered:!0}),document.addEventListener("visibilitychange",(()=>{document.visibilityState==="hidden"&&(be(oe.takeRecords()),le(!0))})),r((()=>{de.v(),ee=c("INP"),le=s(fe,ee,ie,he.reportAllChanges)})))}))},t.onLCP=(fe,he={})=>{E((()=>{const le=A();let ee,de=c("LCP");const be=d(he,se),oe=Se=>{he.reportAllChanges||(Se=Se.slice(-1));for(const q of Se)be.h(q),q.startTime<le.firstHiddenTime&&(de.value=Math.max(q.startTime-l(),0),de.entries=[q],ee())},ge=m("largest-contentful-paint",oe);if(ge){ee=s(fe,de,ye,he.reportAllChanges);const Se=v((()=>{oe(ge.takeRecords()),ge.disconnect(),ee(!0)}));for(const q of["keydown","click","visibilitychange"])addEventListener(q,(()=>W(Se)),{capture:!0,once:!0});r((q=>{de=c("LCP"),ee=s(fe,de,ye,he.reportAllChanges),o((()=>{de.value=performance.now()-q.timeStamp,ee(!0)}))}))}}))},t.onTTFB=(fe,he={})=>{let le=c("TTFB"),ee=s(fe,le,Ne,he.reportAllChanges);He((()=>{const de=a();de&&(le.value=Math.max(de.responseStart-l(),0),le.entries=[de],ee(!0),r((()=>{le=c("TTFB",0),ee=s(fe,le,Ne,he.reportAllChanges),ee(!0)})))}))}}))})(Hh,Hh.exports)),Hh.exports}var zT;function aj(){if(zT)return wh;zT=1,Object.defineProperty(wh,"__esModule",{value:!0}),wh.WebVitalsManager=void 0;const n=oj(),e=Vn(),t=Qd(),i=Tu(),r=["CLS","FCP","INP","LCP","TTFB"];let s=class{constructor(a,l){this._enqueueFn=a,this._errorBoundary=l,this._isInitialized=!1,this._metricEvent={url:(0,i._getSafeUrlString)(),sanitizedUrl:(0,i._getSanitizedPageUrl)(),metrics:[],firstMetricTimestamp:void 0}}startTracking(){var a,l;try{if(this._isInitialized)return;const c=(l=(a=(0,e._getWindowSafe)())===null||a===void 0?void 0:a.location)===null||l===void 0?void 0:l.protocol;if(c!=="https:"&&c!=="http:")return;(0,n.onCLS)(u=>this._handleMetric(u)),(0,n.onFCP)(u=>this._handleMetric(u)),(0,n.onINP)(u=>this._handleMetric(u)),(0,n.onLCP)(u=>this._handleMetric(u)),(0,n.onTTFB)(u=>this._handleMetric(u)),this._isInitialized=!0}catch(c){e.Log.error("Error starting web vitals tracking",c),this._errorBoundary.logError("autoCapture:WebVitalsManager",c)}}_handleMetric(a){if(this._metricEvent.firstMetricTimestamp===void 0&&(this._metricEvent.firstMetricTimestamp=Date.now()),a===void 0||(a==null?void 0:a.name)===void 0)return;const l=(0,i._getSafeUrlString)();if(l===""||!r.includes(a.name))return;l!==this._metricEvent.url&&(this._enqueueWebVitalsAutoCaptureEvent(),this._metricEvent.url=l);const c=a;this._metricEvent.metrics.push({name:c.name,value:c.value,delta:c.delta,id:c.id}),this._metricEvent.metrics.length===r.length&&this._enqueueWebVitalsAutoCaptureEvent()}_enqueueWebVitalsAutoCaptureEvent(){if(this._metricEvent.url===""||this._metricEvent.metrics.length===0)return;const a={};this._metricEvent.metrics.forEach(l=>{const c=l.name.toLowerCase();a["".concat(c,"_value")]=l.value,a["".concat(c,"_delta")]=l.delta,a["".concat(c,"_id")]=l.id}),this._enqueueFn(t.AutoCaptureEventName.WEB_VITALS,this._metricEvent.sanitizedUrl,Object.assign(Object.assign({},a),{first_metric_timestamp:this._metricEvent.firstMetricTimestamp})),this._metricEvent={url:(0,i._getSafeUrlString)(),sanitizedUrl:(0,i._getSanitizedPageUrl)(),metrics:[],firstMetricTimestamp:void 0}}};return wh.WebVitalsManager=s,wh}var HT;function lj(){if(HT)return Ys;HT=1,Object.defineProperty(Ys,"__esModule",{value:!0}),Ys.AutoCapture=Ys.runStatsigAutoCapture=Ys.StatsigAutoCapturePlugin=void 0;const n=Vn(),e=Qd(),t=tj(),i=nj(),r=ij(),s=rj(),o=aj(),a=Tu(),l=IO(),c=NS(),u={submit:e.AutoCaptureEventName.FORM_SUBMIT,click:e.AutoCaptureEventName.CLICK,copy:e.AutoCaptureEventName.COPY,cut:e.AutoCaptureEventName.COPY};class d{constructor(g){this._options=g,this.__plugin="auto-capture"}bind(g){f(g,this._options)}}Ys.StatsigAutoCapturePlugin=d;function f(v,g){var y;const{sdkKey:b}=v.getContext();if(!(0,n._isServerEnv)()){const x=(y=(0,n._getStatsigGlobal)().acInstances)!==null&&y!==void 0?y:{};if(x[b])return x[b]}return new m(v,g)}Ys.runStatsigAutoCapture=f;let m=class{constructor(g,y){var b,S,x,A;this._client=g,this._disabledEvents={},this._previousLoggedPageViewUrl=null,this._hasLoggedPageViewEnd=!1,this._pageViewLogged=!1;const{sdkKey:E,errorBoundary:M,values:I}=g.getContext();this._options=y,this._disabledEvents=(S=(b=I==null?void 0:I.auto_capture_settings)===null||b===void 0?void 0:b.disabled_events)!==null&&S!==void 0?S:{},this._errorBoundary=M,this._errorBoundary.wrap(this,"autoCapture:"),this._client.$on("values_updated",()=>{var C,D;const L=this._client.getContext().values;this._disabledEvents=(D=(C=L==null?void 0:L.auto_capture_settings)===null||C===void 0?void 0:C.disabled_events)!==null&&D!==void 0?D:this._disabledEvents}),this._engagementManager=new r.EngagementManager,this._rageClickManager=new s.default,this._webVitalsManager=new o.WebVitalsManager(this._enqueueAutoCapture.bind(this),M),this._deadClickManager=new i.default(this._enqueueAutoCapture.bind(this),M),this._consoleLogManager=new t.ConsoleLogManager(this._enqueueAutoCapture.bind(this),M,(x=y==null?void 0:y.consoleLogAutoCaptureSettings)!==null&&x!==void 0?x:{enabled:!1}),this._eventFilterFunc=y==null?void 0:y.eventFilterFunc;const R=(0,n._getDocumentSafe)();if(!(0,n._isServerEnv)()){__STATSIG__=(0,n._getStatsigGlobal)();const C=(A=__STATSIG__.acInstances)!==null&&A!==void 0?A:{};C[E]=this,__STATSIG__.acInstances=C}if((R==null?void 0:R.readyState)==="loading"){R.addEventListener("DOMContentLoaded",()=>this._initialize());return}this._initialize()}_addEventHandlers(){const g=(0,n._getWindowSafe)(),y=(0,n._getDocumentSafe)();if(!g||!y)return;const b=(S,x=!0)=>{var A;const E=S||((A=(0,n._getWindowSafe)())===null||A===void 0?void 0:A.event);this._autoLogEvent(E),x&&this._engagementManager.bumpInactiveTimer(),E.type==="click"&&E instanceof MouseEvent&&this._rageClickManager.isRageClick(E.clientX,E.clientY,Date.now())&&this._logRageClick(E)};(0,a._registerEventHandler)(y,"click",S=>b(S)),(0,a._registerEventHandler)(y,"submit",S=>b(S)),(0,a._registerEventHandler)(y,"copy",S=>b(S)),(0,a._registerEventHandler)(y,"cut",S=>b(S)),(0,a._registerEventHandler)(g,"error",S=>b(S,!1)),(0,a._registerEventHandler)(g,"pagehide",()=>this._tryLogPageViewEnd()),(0,a._registerEventHandler)(g,"beforeunload",()=>this._tryLogPageViewEnd())}_addPageViewTracking(){const g=(0,n._getWindowSafe)(),y=(0,n._getDocumentSafe)();!g||!y||((0,a._registerEventHandler)(g,"popstate",()=>this._tryLogPageView("popstate")),window.history.pushState=new Proxy(window.history.pushState,{apply:(b,S,[x,A,E])=>{b.apply(S,[x,A,E]),this._tryLogPageView("pushstate")}}),window.history.replaceState=new Proxy(window.history.replaceState,{apply:(b,S,[x,A,E])=>{b.apply(S,[x,A,E]),this._tryLogPageView("replacestate")}}),this._tryLogPageView())}_autoLogEvent(g){var y,b,S,x;const A=(y=g.type)===null||y===void 0?void 0:y.toLowerCase();if(A==="error"&&g instanceof ErrorEvent){this._logError(g);return}const E=(0,a._getTargetNode)(g);if(!E)return;const M=u[A];if(!M)return;const I=M===e.AutoCaptureEventName.COPY;if(!(0,a._shouldLogEvent)(g,E,I))return;const R={};if(I){const z=(S=(b=(0,n._getWindowSafe)())===null||b===void 0?void 0:b.getSelection())===null||S===void 0?void 0:S.toString();if(!z)return;!((x=this._options)===null||x===void 0)&&x.captureCopyText&&(R.selectedText=(0,a._sanitizeString)(z));const G=g.type||"clipboard";R.clipType=G}const{value:C,metadata:D}=(0,l._gatherEventData)(E);D.isOutbound&&this._engagementManager.setMeaningfulEngagementOccurred(!0),Object.assign(R,D);const L=(0,c._gatherAllMetadata)((0,a._getSafeUrl)());this._enqueueAutoCapture(M,C,Object.assign(Object.assign({},L),R))}_initialize(){this._webVitalsManager.startTracking(),this._deadClickManager.startTracking(),this._consoleLogManager.startTracking(),this._engagementManager.startInactivityTracking(()=>this._tryLogPageViewEnd(!0)),this._addEventHandlers(),this._addPageViewTracking(),this._logSessionStart(),this._logPerformance()}_logError(g){const y=(g==null?void 0:g.error)||{};let b=y;if(typeof y=="object")try{b=JSON.stringify(y)}catch(S){b=typeof(y==null?void 0:y.toString)=="function"?y.toString():"Unknown Error"}this._enqueueAutoCapture(e.AutoCaptureEventName.ERROR,g.message,{message:g.message,filename:g.filename,lineno:g.lineno,colno:g.colno,error_str:b})}_logSessionStart(){const g=this._getSessionFromClient();try{if(!this._isNewSession(g))return;this._enqueueAutoCapture(e.AutoCaptureEventName.SESSION_START,(0,a._getSanitizedPageUrl)(),Object.assign({sessionID:g.data.sessionID},(0,c._gatherAllMetadata)((0,a._getSafeUrl)())),{flushImmediately:!0})}catch(y){this._errorBoundary.logError("AC::logSession",y)}}_tryLogPageView(g){const y=(0,a._getSafeUrl)(),b=this._previousLoggedPageViewUrl;if(b&&y.pathname===b.pathname)return;this._engagementManager.setLastPageViewTime(Date.now()),this._hasLoggedPageViewEnd=!1;const S=(0,c._gatherAllMetadata)(y);g&&(S.navigation_type=g),this._previousLoggedPageViewUrl&&(S.last_page_view_url=this._previousLoggedPageViewUrl.href),this._pageViewLogged||(this._updateClientWithPossibleFirstTouchMetadata(),this._pageViewLogged=!0),this._enqueueAutoCapture(e.AutoCaptureEventName.PAGE_VIEW,(0,a._getSanitizedPageUrl)(),S,{flushImmediately:!0,addNewSessionMetadata:!0}),this._previousLoggedPageViewUrl=y,this._engagementManager.bumpInactiveTimer()}_tryLogPageViewEnd(g=!1){this._hasLoggedPageViewEnd||(this._hasLoggedPageViewEnd=!0,this._enqueueAutoCapture(e.AutoCaptureEventName.PAGE_VIEW_END,(0,a._getSanitizedPageUrl)(),Object.assign(Object.assign({},this._engagementManager.getPageViewEndMetadata()),{dueToInactivity:g}),{flushImmediately:!0}))}_logRageClick(g){if(!(0,a._shouldLogEvent)(g,g.target))return;const{value:y,metadata:b}=(0,l._gatherEventData)(g.target);this._enqueueAutoCapture(e.AutoCaptureEventName.RAGE_CLICK,y,Object.assign(Object.assign({x:g.clientX,y:g.clientY,timestamp:Date.now()},(0,c._gatherAllMetadata)((0,a._getSafeUrl)())),b))}_logPerformance(){const g=(0,n._getWindowSafe)();!g||!g.performance||typeof(g==null?void 0:g.performance)>"u"||typeof g.performance.getEntriesByType!="function"||typeof g.performance.getEntriesByName!="function"||setTimeout(()=>{const y={},b=g.performance.getEntriesByType("navigation");if(b&&b.length>0&&b[0]instanceof PerformanceNavigationTiming){const x=b[0];y.load_time_ms=x.duration,y.dom_interactive_time_ms=x.domInteractive-x.startTime,y.redirect_count=x.redirectCount,y.transfer_bytes=x.transferSize}const S=g.performance.getEntriesByName("first-contentful-paint");S&&S.length>0&&S[0]instanceof PerformancePaintTiming&&(y.first_contentful_paint_time_ms=S[0].startTime),this._enqueueAutoCapture(e.AutoCaptureEventName.PERFORMANCE,(0,a._getSanitizedPageUrl)(),Object.assign(Object.assign({},y),(0,c._getNetworkInfo)()))},1)}_enqueueAutoCapture(g,y,b,S){var x,A,E;if(!y)return;const M=g.slice(14);if(this._disabledEvents[g]||this._disabledEvents[M])return;const I=this._getSessionFromClient();try{const R=Object.assign({sessionID:I.data.sessionID,page_url:(E=(A=(x=(0,n._getWindowSafe)())===null||x===void 0?void 0:x.location)===null||A===void 0?void 0:A.href)!==null&&E!==void 0?E:""},b);S!=null&&S.addNewSessionMetadata&&(R.isNewSession=String(this._isNewSession(I)));const C={eventName:g,value:y,metadata:R};if(this._eventFilterFunc&&!this._eventFilterFunc(C))return;this._client.logEvent(C),S!=null&&S.flushImmediately&&this._flushImmediately()}catch(R){this._errorBoundary.logError("AC::enqueue",R)}}_updateClientWithPossibleFirstTouchMetadata(){const g=this._client;g._possibleFirstTouchMetadata=(0,c._getPossibleFirstTouchMetadata)((0,a._getSafeUrl)()),Object.keys(g._possibleFirstTouchMetadata).length>0&&(g._user=Object.assign(Object.assign({},g._user),{analyticsOnlyMetadata:Object.assign(Object.assign({},g._possibleFirstTouchMetadata),g._user.analyticsOnlyMetadata)}))}_flushImmediately(){this._client.flush().catch(g=>{n.Log.error(g)})}_isNewSession(g){return Math.abs(g.data.startTime-Date.now())<1e3}_getSessionFromClient(){return this._client.getContext().session}static getAllMetadata(){return(0,c._gatherAllMetadata)((0,a._getSafeUrl)())}};return Ys.AutoCapture=m,Ys}var GT;function cj(){return GT||(GT=1,(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.StatsigAutoCapturePlugin=n.runStatsigAutoCapture=n.AutoCapture=n.AutoCaptureEventName=void 0;const e=Vn(),t=lj();Object.defineProperty(n,"AutoCapture",{enumerable:!0,get:function(){return t.AutoCapture}}),Object.defineProperty(n,"StatsigAutoCapturePlugin",{enumerable:!0,get:function(){return t.StatsigAutoCapturePlugin}}),Object.defineProperty(n,"runStatsigAutoCapture",{enumerable:!0,get:function(){return t.runStatsigAutoCapture}});var i=Qd();Object.defineProperty(n,"AutoCaptureEventName",{enumerable:!0,get:function(){return i.AutoCaptureEventName}});const r=Object.assign((0,e._getStatsigGlobal)(),{AutoCapture:t.AutoCapture,runStatsigAutoCapture:t.runStatsigAutoCapture,StatsigAutoCapturePlugin:t.StatsigAutoCapturePlugin});n.default=r})(Yy)),Yy}var Foe=cj();function DO(n,e,t){return Math.max(n,Math.min(e,t))}class uj{advance(e){var a;if(!this.isRunning)return;let t=!1;if(this.lerp)this.value=(i=this.value,r=this.to,s=60*this.lerp,o=e,(function(l,c,u){return(1-u)*l+u*c})(i,r,1-Math.exp(-s*o))),Math.round(this.value)===this.to&&(this.value=this.to,t=!0);else{this.currentTime+=e;const l=DO(0,this.currentTime/this.duration,1);t=l>=1;const c=t?1:this.easing(l);this.value=this.from+(this.to-this.from)*c}var i,r,s,o;(a=this.onUpdate)==null||a.call(this,this.value,t),t&&this.stop()}stop(){this.isRunning=!1}fromTo(e,t,{lerp:i=.1,duration:r=1,easing:s=(l=>l),onStart:o,onUpdate:a}){this.from=this.value=e,this.to=t,this.lerp=i,this.duration=r,this.easing=s,this.currentTime=0,this.isRunning=!0,o==null||o(),this.onUpdate=a}}class hj{constructor({wrapper:e,content:t,autoResize:i=!0,debounce:r=250}={}){Ci(this,"resize",()=>{this.onWrapperResize(),this.onContentResize()});Ci(this,"onWrapperResize",()=>{this.wrapper===window?(this.width=window.innerWidth,this.height=window.innerHeight):(this.width=this.wrapper.clientWidth,this.height=this.wrapper.clientHeight)});Ci(this,"onContentResize",()=>{this.wrapper===window?(this.scrollHeight=this.content.scrollHeight,this.scrollWidth=this.content.scrollWidth):(this.scrollHeight=this.wrapper.scrollHeight,this.scrollWidth=this.wrapper.scrollWidth)});this.wrapper=e,this.content=t,i&&(this.debouncedResize=(function(s,o){let a;return function(){let l=arguments,c=this;clearTimeout(a),a=setTimeout((function(){s.apply(c,l)}),o)}})(this.resize,r),this.wrapper===window?window.addEventListener("resize",this.debouncedResize,!1):(this.wrapperResizeObserver=new ResizeObserver(this.debouncedResize),this.wrapperResizeObserver.observe(this.wrapper)),this.contentResizeObserver=new ResizeObserver(this.debouncedResize),this.contentResizeObserver.observe(this.content)),this.resize()}destroy(){var e,t;(e=this.wrapperResizeObserver)==null||e.disconnect(),(t=this.contentResizeObserver)==null||t.disconnect(),window.removeEventListener("resize",this.debouncedResize,!1)}get limit(){return{x:this.scrollWidth-this.width,y:this.scrollHeight-this.height}}}class PO{constructor(){this.events={}}emit(e,...t){let i=this.events[e]||[];for(let r=0,s=i.length;r<s;r++)i[r](...t)}on(e,t){var i;return(i=this.events[e])!=null&&i.push(t)||(this.events[e]=[t]),()=>{var r;this.events[e]=(r=this.events[e])==null?void 0:r.filter((s=>t!==s))}}off(e,t){var i;this.events[e]=(i=this.events[e])==null?void 0:i.filter((r=>t!==r))}destroy(){this.events={}}}const VT=100/6;class dj{constructor(e,{wheelMultiplier:t=1,touchMultiplier:i=1}){Ci(this,"onTouchStart",e=>{const{clientX:t,clientY:i}=e.targetTouches?e.targetTouches[0]:e;this.touchStart.x=t,this.touchStart.y=i,this.lastDelta={x:0,y:0},this.emitter.emit("scroll",{deltaX:0,deltaY:0,event:e})});Ci(this,"onTouchMove",e=>{const{clientX:t,clientY:i}=e.targetTouches?e.targetTouches[0]:e,r=-(t-this.touchStart.x)*this.touchMultiplier,s=-(i-this.touchStart.y)*this.touchMultiplier;this.touchStart.x=t,this.touchStart.y=i,this.lastDelta={x:r,y:s},this.emitter.emit("scroll",{deltaX:r,deltaY:s,event:e})});Ci(this,"onTouchEnd",e=>{this.emitter.emit("scroll",{deltaX:this.lastDelta.x,deltaY:this.lastDelta.y,event:e})});Ci(this,"onWheel",e=>{let{deltaX:t,deltaY:i,deltaMode:r}=e;t*=r===1?VT:r===2?this.windowWidth:1,i*=r===1?VT:r===2?this.windowHeight:1,t*=this.wheelMultiplier,i*=this.wheelMultiplier,this.emitter.emit("scroll",{deltaX:t,deltaY:i,event:e})});Ci(this,"onWindowResize",()=>{this.windowWidth=window.innerWidth,this.windowHeight=window.innerHeight});this.element=e,this.wheelMultiplier=t,this.touchMultiplier=i,this.touchStart={x:null,y:null},this.emitter=new PO,window.addEventListener("resize",this.onWindowResize,!1),this.onWindowResize(),this.element.addEventListener("wheel",this.onWheel,{passive:!1}),this.element.addEventListener("touchstart",this.onTouchStart,{passive:!1}),this.element.addEventListener("touchmove",this.onTouchMove,{passive:!1}),this.element.addEventListener("touchend",this.onTouchEnd,{passive:!1})}on(e,t){return this.emitter.on(e,t)}destroy(){this.emitter.destroy(),window.removeEventListener("resize",this.onWindowResize,!1),this.element.removeEventListener("wheel",this.onWheel,{passive:!1}),this.element.removeEventListener("touchstart",this.onTouchStart,{passive:!1}),this.element.removeEventListener("touchmove",this.onTouchMove,{passive:!1}),this.element.removeEventListener("touchend",this.onTouchEnd,{passive:!1})}}class Boe{constructor({wrapper:e=window,content:t=document.documentElement,wheelEventsTarget:i=e,eventsTarget:r=i,smoothWheel:s=!0,syncTouch:o=!1,syncTouchLerp:a=.075,touchInertiaMultiplier:l=35,duration:c,easing:u=(x=>Math.min(1,1.001-Math.pow(2,-10*x))),lerp:d=!c&&.1,infinite:f=!1,orientation:m="vertical",gestureOrientation:v="vertical",touchMultiplier:g=1,wheelMultiplier:y=1,autoResize:b=!0,__experimental__naiveDimensions:S=!1}={}){this.__isSmooth=!1,this.__isScrolling=!1,this.__isStopped=!1,this.__isLocked=!1,this.onVirtualScroll=({deltaX:x,deltaY:A,event:E})=>{if(E.ctrlKey)return;const M=E.type.includes("touch"),I=E.type.includes("wheel");if(this.options.syncTouch&&M&&E.type==="touchstart"&&!this.isStopped&&!this.isLocked)return void this.reset();const R=x===0&&A===0,C=this.options.gestureOrientation==="vertical"&&A===0||this.options.gestureOrientation==="horizontal"&&x===0;if(R||C)return;let D=E.composedPath();if(D=D.slice(0,D.indexOf(this.rootElement)),D.find((H=>{var J,k,X,W,ie;return((J=H.hasAttribute)===null||J===void 0?void 0:J.call(H,"data-lenis-prevent"))||M&&((k=H.hasAttribute)===null||k===void 0?void 0:k.call(H,"data-lenis-prevent-touch"))||I&&((X=H.hasAttribute)===null||X===void 0?void 0:X.call(H,"data-lenis-prevent-wheel"))||((W=H.classList)===null||W===void 0?void 0:W.contains("lenis"))&&!(!((ie=H.classList)===null||ie===void 0)&&ie.contains("lenis-stopped"))})))return;if(this.isStopped||this.isLocked)return void E.preventDefault();if(this.isSmooth=this.options.syncTouch&&M||this.options.smoothWheel&&I,!this.isSmooth)return this.isScrolling=!1,void this.animate.stop();E.preventDefault();let L=A;this.options.gestureOrientation==="both"?L=Math.abs(A)>Math.abs(x)?A:x:this.options.gestureOrientation==="horizontal"&&(L=x);const z=M&&this.options.syncTouch,G=M&&E.type==="touchend"&&Math.abs(L)>5;G&&(L=this.velocity*this.options.touchInertiaMultiplier),this.scrollTo(this.targetScroll+L,Object.assign({programmatic:!1},z?{lerp:G?this.options.syncTouchLerp:1}:{lerp:this.options.lerp,duration:this.options.duration,easing:this.options.easing}))},this.onNativeScroll=()=>{if(!this.__preventNextScrollEvent&&!this.isScrolling){const x=this.animatedScroll;this.animatedScroll=this.targetScroll=this.actualScroll,this.velocity=0,this.direction=Math.sign(this.animatedScroll-x),this.emit()}},window.lenisVersion="1.0.42",e!==document.documentElement&&e!==document.body||(e=window),this.options={wrapper:e,content:t,wheelEventsTarget:i,eventsTarget:r,smoothWheel:s,syncTouch:o,syncTouchLerp:a,touchInertiaMultiplier:l,duration:c,easing:u,lerp:d,infinite:f,gestureOrientation:v,orientation:m,touchMultiplier:g,wheelMultiplier:y,autoResize:b,__experimental__naiveDimensions:S},this.animate=new uj,this.emitter=new PO,this.dimensions=new hj({wrapper:e,content:t,autoResize:b}),this.toggleClassName("lenis",!0),this.velocity=0,this.isLocked=!1,this.isStopped=!1,this.isSmooth=o||s,this.isScrolling=!1,this.targetScroll=this.animatedScroll=this.actualScroll,this.options.wrapper.addEventListener("scroll",this.onNativeScroll,!1),this.virtualScroll=new dj(r,{touchMultiplier:g,wheelMultiplier:y}),this.virtualScroll.on("scroll",this.onVirtualScroll)}destroy(){this.emitter.destroy(),this.options.wrapper.removeEventListener("scroll",this.onNativeScroll,!1),this.virtualScroll.destroy(),this.dimensions.destroy(),this.toggleClassName("lenis",!1),this.toggleClassName("lenis-smooth",!1),this.toggleClassName("lenis-scrolling",!1),this.toggleClassName("lenis-stopped",!1),this.toggleClassName("lenis-locked",!1)}on(e,t){return this.emitter.on(e,t)}off(e,t){return this.emitter.off(e,t)}setScroll(e){this.isHorizontal?this.rootElement.scrollLeft=e:this.rootElement.scrollTop=e}resize(){this.dimensions.resize()}emit(){this.emitter.emit("scroll",this)}reset(){this.isLocked=!1,this.isScrolling=!1,this.animatedScroll=this.targetScroll=this.actualScroll,this.velocity=0,this.animate.stop()}start(){this.isStopped&&(this.isStopped=!1,this.reset())}stop(){this.isStopped||(this.isStopped=!0,this.animate.stop(),this.reset())}raf(e){const t=e-(this.time||e);this.time=e,this.animate.advance(.001*t)}scrollTo(e,{offset:t=0,immediate:i=!1,lock:r=!1,duration:s=this.options.duration,easing:o=this.options.easing,lerp:a=!s&&this.options.lerp,onComplete:l,force:c=!1,programmatic:u=!0}={}){if(!this.isStopped&&!this.isLocked||c){if(["top","left","start"].includes(e))e=0;else if(["bottom","right","end"].includes(e))e=this.limit;else{let d;if(typeof e=="string"?d=document.querySelector(e):e!=null&&e.nodeType&&(d=e),d){if(this.options.wrapper!==window){const m=this.options.wrapper.getBoundingClientRect();t-=this.isHorizontal?m.left:m.top}const f=d.getBoundingClientRect();e=(this.isHorizontal?f.left:f.top)+this.animatedScroll}}if(typeof e=="number"){if(e+=t,e=Math.round(e),this.options.infinite?u&&(this.targetScroll=this.animatedScroll=this.scroll):e=DO(0,e,this.limit),i)return this.animatedScroll=this.targetScroll=e,this.setScroll(this.scroll),this.reset(),void(l==null||l(this));if(!u){if(e===this.targetScroll)return;this.targetScroll=e}this.animate.fromTo(this.animatedScroll,e,{duration:s,easing:o,lerp:a,onStart:()=>{r&&(this.isLocked=!0),this.isScrolling=!0},onUpdate:(d,f)=>{this.isScrolling=!0,this.velocity=d-this.animatedScroll,this.direction=Math.sign(this.velocity),this.animatedScroll=d,this.setScroll(this.scroll),u&&(this.targetScroll=d),f||this.emit(),f&&(this.reset(),this.emit(),l==null||l(this),this.__preventNextScrollEvent=!0,requestAnimationFrame((()=>{delete this.__preventNextScrollEvent})))}})}}}get rootElement(){return this.options.wrapper===window?document.documentElement:this.options.wrapper}get limit(){return this.options.__experimental__naiveDimensions?this.isHorizontal?this.rootElement.scrollWidth-this.rootElement.clientWidth:this.rootElement.scrollHeight-this.rootElement.clientHeight:this.dimensions.limit[this.isHorizontal?"x":"y"]}get isHorizontal(){return this.options.orientation==="horizontal"}get actualScroll(){return this.isHorizontal?this.rootElement.scrollLeft:this.rootElement.scrollTop}get scroll(){return this.options.infinite?(e=this.animatedScroll,t=this.limit,(e%t+t)%t):this.animatedScroll;var e,t}get progress(){return this.limit===0?1:this.scroll/this.limit}get isSmooth(){return this.__isSmooth}set isSmooth(e){this.__isSmooth!==e&&(this.__isSmooth=e,this.toggleClassName("lenis-smooth",e))}get isScrolling(){return this.__isScrolling}set isScrolling(e){this.__isScrolling!==e&&(this.__isScrolling=e,this.toggleClassName("lenis-scrolling",e))}get isStopped(){return this.__isStopped}set isStopped(e){this.__isStopped!==e&&(this.__isStopped=e,this.toggleClassName("lenis-stopped",e))}get isLocked(){return this.__isLocked}set isLocked(e){this.__isLocked!==e&&(this.__isLocked=e,this.toggleClassName("lenis-locked",e))}get className(){let e="lenis";return this.isStopped&&(e+=" lenis-stopped"),this.isLocked&&(e+=" lenis-locked"),this.isScrolling&&(e+=" lenis-scrolling"),this.isSmooth&&(e+=" lenis-smooth"),e}toggleClassName(e,t){this.rootElement.classList.toggle(e,t),this.emitter.emit("className change",this)}}const fj=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Wd(async()=>{const{default:i}=await Promise.resolve().then(()=>Cu);return{default:i}},void 0).then(({default:i})=>i(...t)):e=fetch,(...t)=>e(...t)};class FS extends Error{constructor(e,t="FunctionsError",i){super(e),this.name=t,this.context=i}}class WT extends FS{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class jT extends FS{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class qT extends FS{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var ew;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(ew||(ew={}));var pj=function(n,e,t,i){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(d){o(d)}}function l(u){try{c(i.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):r(u.value).then(a,l)}c((i=i.apply(n,e||[])).next())})};class mj{constructor(e,{headers:t={},customFetch:i,region:r=ew.Any}={}){this.url=e,this.headers=t,this.region=r,this.fetch=fj(i)}setAuth(e){this.headers.Authorization="Bearer ".concat(e)}invoke(e){return pj(this,arguments,void 0,function*(t,i={}){var r;try{const{headers:s,method:o,body:a,signal:l}=i;let c={},{region:u}=i;u||(u=this.region);const d=new URL("".concat(this.url,"/").concat(t));u&&u!=="any"&&(c["x-region"]=u,d.searchParams.set("forceFunctionRegion",u));let f;a&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(c["Content-Type"]="application/octet-stream",f=a):typeof a=="string"?(c["Content-Type"]="text/plain",f=a):typeof FormData<"u"&&a instanceof FormData?f=a:(c["Content-Type"]="application/json",f=JSON.stringify(a)));const m=yield this.fetch(d.toString(),{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},c),this.headers),s),body:f,signal:l}).catch(b=>{throw b.name==="AbortError"?b:new WT(b)}),v=m.headers.get("x-relay-error");if(v&&v==="true")throw new jT(m);if(!m.ok)throw new qT(m);let g=((r=m.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),y;return g==="application/json"?y=yield m.json():g==="application/octet-stream"?y=yield m.blob():g==="text/event-stream"?y=m:g==="multipart/form-data"?y=yield m.formData():y=yield m.text(),{data:y,error:null,response:m}}catch(s){return s instanceof Error&&s.name==="AbortError"?{data:null,error:new WT(s)}:{data:null,error:s,response:s instanceof qT||s instanceof jT?s.context:void 0}}})}}var Si={},sc={},oc={},ac={},lc={},cc={},gj=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},du=gj();const vj=du.fetch,OO=du.fetch.bind(du),LO=du.Headers,_j=du.Request,yj=du.Response,Cu=Object.freeze(Object.defineProperty({__proto__:null,Headers:LO,Request:_j,Response:yj,default:OO,fetch:vj},Symbol.toStringTag,{value:"Module"})),bj=H3(Cu);var Rp={},XT;function kO(){if(XT)return Rp;XT=1,Object.defineProperty(Rp,"__esModule",{value:!0});class n extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}return Rp.default=n,Rp}var YT;function UO(){if(YT)return cc;YT=1;var n=cc&&cc.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(cc,"__esModule",{value:!0});const e=n(bj),t=n(kO());class i{constructor(s){var o,a;this.shouldThrowOnError=!1,this.method=s.method,this.url=s.url,this.headers=new Headers(s.headers),this.schema=s.schema,this.body=s.body,this.shouldThrowOnError=(o=s.shouldThrowOnError)!==null&&o!==void 0?o:!1,this.signal=s.signal,this.isMaybeSingle=(a=s.isMaybeSingle)!==null&&a!==void 0?a:!1,s.fetch?this.fetch=s.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(s,o){return this.headers=new Headers(this.headers),this.headers.set(s,o),this}then(s,o){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const a=this.fetch;let l=a(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async c=>{var u,d,f,m;let v=null,g=null,y=null,b=c.status,S=c.statusText;if(c.ok){if(this.method!=="HEAD"){const M=await c.text();M===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((u=this.headers.get("Accept"))===null||u===void 0)&&u.includes("application/vnd.pgrst.plan+text"))?g=M:g=JSON.parse(M))}const A=(d=this.headers.get("Prefer"))===null||d===void 0?void 0:d.match(/count=(exact|planned|estimated)/),E=(f=c.headers.get("content-range"))===null||f===void 0?void 0:f.split("/");A&&E&&E.length>1&&(y=parseInt(E[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(g)&&(g.length>1?(v={code:"PGRST116",details:"Results contain ".concat(g.length," rows, application/vnd.pgrst.object+json requires 1 row"),hint:null,message:"JSON object requested, multiple (or no) rows returned"},g=null,y=null,b=406,S="Not Acceptable"):g.length===1?g=g[0]:g=null)}else{const A=await c.text();try{v=JSON.parse(A),Array.isArray(v)&&c.status===404&&(g=[],v=null,b=200,S="OK")}catch(E){c.status===404&&A===""?(b=204,S="No Content"):v={message:A}}if(v&&this.isMaybeSingle&&(!((m=v==null?void 0:v.details)===null||m===void 0)&&m.includes("0 rows"))&&(v=null,b=200,S="OK"),v&&this.shouldThrowOnError)throw new t.default(v)}return{error:v,data:g,count:y,status:b,statusText:S}});return this.shouldThrowOnError||(l=l.catch(c=>{var u,d,f;return{error:{message:"".concat((u=c==null?void 0:c.name)!==null&&u!==void 0?u:"FetchError",": ").concat(c==null?void 0:c.message),details:"".concat((d=c==null?void 0:c.stack)!==null&&d!==void 0?d:""),hint:"",code:"".concat((f=c==null?void 0:c.code)!==null&&f!==void 0?f:"")},data:null,count:null,status:0,statusText:""}})),l.then(s,o)}returns(){return this}overrideTypes(){return this}}return cc.default=i,cc}var KT;function NO(){if(KT)return lc;KT=1;var n=lc&&lc.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(lc,"__esModule",{value:!0});const e=n(UO());class t extends e.default{select(r){let s=!1;const o=(r!=null?r:"*").split("").map(a=>/\s/.test(a)&&!s?"":(a==='"'&&(s=!s),a)).join("");return this.url.searchParams.set("select",o),this.headers.append("Prefer","return=representation"),this}order(r,{ascending:s=!0,nullsFirst:o,foreignTable:a,referencedTable:l=a}={}){const c=l?"".concat(l,".order"):"order",u=this.url.searchParams.get(c);return this.url.searchParams.set(c,"".concat(u?"".concat(u,","):"").concat(r,".").concat(s?"asc":"desc").concat(o===void 0?"":o?".nullsfirst":".nullslast")),this}limit(r,{foreignTable:s,referencedTable:o=s}={}){const a=typeof o>"u"?"limit":"".concat(o,".limit");return this.url.searchParams.set(a,"".concat(r)),this}range(r,s,{foreignTable:o,referencedTable:a=o}={}){const l=typeof a>"u"?"offset":"".concat(a,".offset"),c=typeof a>"u"?"limit":"".concat(a,".limit");return this.url.searchParams.set(l,"".concat(r)),this.url.searchParams.set(c,"".concat(s-r+1)),this}abortSignal(r){return this.signal=r,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:r=!1,verbose:s=!1,settings:o=!1,buffers:a=!1,wal:l=!1,format:c="text"}={}){var u;const d=[r?"analyze":null,s?"verbose":null,o?"settings":null,a?"buffers":null,l?"wal":null].filter(Boolean).join("|"),f=(u=this.headers.get("Accept"))!==null&&u!==void 0?u:"application/json";return this.headers.set("Accept","application/vnd.pgrst.plan+".concat(c,'; for="').concat(f,'"; options=').concat(d,";")),c==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(r){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer","max-affected=".concat(r)),this}}return lc.default=t,lc}var $T;function BS(){if($T)return ac;$T=1;var n=ac&&ac.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(ac,"__esModule",{value:!0});const e=n(NO());class t extends e.default{eq(r,s){return this.url.searchParams.append(r,"eq.".concat(s)),this}neq(r,s){return this.url.searchParams.append(r,"neq.".concat(s)),this}gt(r,s){return this.url.searchParams.append(r,"gt.".concat(s)),this}gte(r,s){return this.url.searchParams.append(r,"gte.".concat(s)),this}lt(r,s){return this.url.searchParams.append(r,"lt.".concat(s)),this}lte(r,s){return this.url.searchParams.append(r,"lte.".concat(s)),this}like(r,s){return this.url.searchParams.append(r,"like.".concat(s)),this}likeAllOf(r,s){return this.url.searchParams.append(r,"like(all).{".concat(s.join(","),"}")),this}likeAnyOf(r,s){return this.url.searchParams.append(r,"like(any).{".concat(s.join(","),"}")),this}ilike(r,s){return this.url.searchParams.append(r,"ilike.".concat(s)),this}ilikeAllOf(r,s){return this.url.searchParams.append(r,"ilike(all).{".concat(s.join(","),"}")),this}ilikeAnyOf(r,s){return this.url.searchParams.append(r,"ilike(any).{".concat(s.join(","),"}")),this}is(r,s){return this.url.searchParams.append(r,"is.".concat(s)),this}in(r,s){const o=Array.from(new Set(s)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?'"'.concat(a,'"'):"".concat(a)).join(",");return this.url.searchParams.append(r,"in.(".concat(o,")")),this}contains(r,s){return typeof s=="string"?this.url.searchParams.append(r,"cs.".concat(s)):Array.isArray(s)?this.url.searchParams.append(r,"cs.{".concat(s.join(","),"}")):this.url.searchParams.append(r,"cs.".concat(JSON.stringify(s))),this}containedBy(r,s){return typeof s=="string"?this.url.searchParams.append(r,"cd.".concat(s)):Array.isArray(s)?this.url.searchParams.append(r,"cd.{".concat(s.join(","),"}")):this.url.searchParams.append(r,"cd.".concat(JSON.stringify(s))),this}rangeGt(r,s){return this.url.searchParams.append(r,"sr.".concat(s)),this}rangeGte(r,s){return this.url.searchParams.append(r,"nxl.".concat(s)),this}rangeLt(r,s){return this.url.searchParams.append(r,"sl.".concat(s)),this}rangeLte(r,s){return this.url.searchParams.append(r,"nxr.".concat(s)),this}rangeAdjacent(r,s){return this.url.searchParams.append(r,"adj.".concat(s)),this}overlaps(r,s){return typeof s=="string"?this.url.searchParams.append(r,"ov.".concat(s)):this.url.searchParams.append(r,"ov.{".concat(s.join(","),"}")),this}textSearch(r,s,{config:o,type:a}={}){let l="";a==="plain"?l="pl":a==="phrase"?l="ph":a==="websearch"&&(l="w");const c=o===void 0?"":"(".concat(o,")");return this.url.searchParams.append(r,"".concat(l,"fts").concat(c,".").concat(s)),this}match(r){return Object.entries(r).forEach(([s,o])=>{this.url.searchParams.append(s,"eq.".concat(o))}),this}not(r,s,o){return this.url.searchParams.append(r,"not.".concat(s,".").concat(o)),this}or(r,{foreignTable:s,referencedTable:o=s}={}){const a=o?"".concat(o,".or"):"or";return this.url.searchParams.append(a,"(".concat(r,")")),this}filter(r,s,o){return this.url.searchParams.append(r,"".concat(s,".").concat(o)),this}}return ac.default=t,ac}var JT;function FO(){if(JT)return oc;JT=1;var n=oc&&oc.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(oc,"__esModule",{value:!0});const e=n(BS());class t{constructor(r,{headers:s={},schema:o,fetch:a}){this.url=r,this.headers=new Headers(s),this.schema=o,this.fetch=a}select(r,s){const{head:o=!1,count:a}=s!=null?s:{},l=o?"HEAD":"GET";let c=!1;const u=(r!=null?r:"*").split("").map(d=>/\s/.test(d)&&!c?"":(d==='"'&&(c=!c),d)).join("");return this.url.searchParams.set("select",u),a&&this.headers.append("Prefer","count=".concat(a)),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(r,{count:s,defaultToNull:o=!0}={}){var a;const l="POST";if(s&&this.headers.append("Prefer","count=".concat(s)),o||this.headers.append("Prefer","missing=default"),Array.isArray(r)){const c=r.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>'"'.concat(d,'"'));this.url.searchParams.set("columns",u.join(","))}}return new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:r,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}upsert(r,{onConflict:s,ignoreDuplicates:o=!1,count:a,defaultToNull:l=!0}={}){var c;const u="POST";if(this.headers.append("Prefer","resolution=".concat(o?"ignore":"merge","-duplicates")),s!==void 0&&this.url.searchParams.set("on_conflict",s),a&&this.headers.append("Prefer","count=".concat(a)),l||this.headers.append("Prefer","missing=default"),Array.isArray(r)){const d=r.reduce((f,m)=>f.concat(Object.keys(m)),[]);if(d.length>0){const f=[...new Set(d)].map(m=>'"'.concat(m,'"'));this.url.searchParams.set("columns",f.join(","))}}return new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:r,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}update(r,{count:s}={}){var o;const a="PATCH";return s&&this.headers.append("Prefer","count=".concat(s)),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:r,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}delete({count:r}={}){var s;const o="DELETE";return r&&this.headers.append("Prefer","count=".concat(r)),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}}return oc.default=t,oc}var QT;function wj(){if(QT)return sc;QT=1;var n=sc&&sc.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(sc,"__esModule",{value:!0});const e=n(FO()),t=n(BS());class i{constructor(s,{headers:o={},schema:a,fetch:l}={}){this.url=s,this.headers=new Headers(o),this.schemaName=a,this.fetch=l}from(s){const o=new URL("".concat(this.url,"/").concat(s));return new e.default(o,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(s){return new i(this.url,{headers:this.headers,schema:s,fetch:this.fetch})}rpc(s,o={},{head:a=!1,get:l=!1,count:c}={}){var u;let d;const f=new URL("".concat(this.url,"/rpc/").concat(s));let m;a||l?(d=a?"HEAD":"GET",Object.entries(o).filter(([g,y])=>y!==void 0).map(([g,y])=>[g,Array.isArray(y)?"{".concat(y.join(","),"}"):"".concat(y)]).forEach(([g,y])=>{f.searchParams.append(g,y)})):(d="POST",m=o);const v=new Headers(this.headers);return c&&v.set("Prefer","count=".concat(c)),new t.default({method:d,url:f,headers:v,schema:this.schemaName,body:m,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}}return sc.default=i,sc}var ZT;function Sj(){if(ZT)return Si;ZT=1;var n=Si&&Si.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(Si,"__esModule",{value:!0}),Si.PostgrestError=Si.PostgrestBuilder=Si.PostgrestTransformBuilder=Si.PostgrestFilterBuilder=Si.PostgrestQueryBuilder=Si.PostgrestClient=void 0;const e=n(wj());Si.PostgrestClient=e.default;const t=n(FO());Si.PostgrestQueryBuilder=t.default;const i=n(BS());Si.PostgrestFilterBuilder=i.default;const r=n(NO());Si.PostgrestTransformBuilder=r.default;const s=n(UO());Si.PostgrestBuilder=s.default;const o=n(kO());return Si.PostgrestError=o.default,Si.default={PostgrestClient:e.default,PostgrestQueryBuilder:t.default,PostgrestFilterBuilder:i.default,PostgrestTransformBuilder:r.default,PostgrestBuilder:s.default,PostgrestError:o.default},Si}var xj=Sj();const Ej=Kw(xj),{PostgrestClient:Aj,PostgrestQueryBuilder:zoe,PostgrestFilterBuilder:Hoe,PostgrestTransformBuilder:Goe,PostgrestBuilder:Voe,PostgrestError:Woe}=Ej;class Mj{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const t=process.versions;if(t&&t.node){const i=t.node,r=parseInt(i.replace(/^v/,"").split(".")[0]);return r>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:"Node.js ".concat(r," detected but native WebSocket not found."),workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:"Node.js ".concat(r," detected without native WebSocket support."),workaround:'For Node.js < 22, install "ws" package and provide it via the transport option:\nimport ws from "ws"\nnew RealtimeClient(url, { transport: ws })'}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+="\n\nSuggested solution: ".concat(e.workaround)),new Error(t)}static createWebSocket(e,t){const i=this.getWebSocketConstructor();return new i(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch(e){return!1}}}const Tj="2.75.0",Cj="realtime-js/".concat(Tj),Rj="1.0.0",tw=1e4,Ij=1e3,Dj=100;var $h;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})($h||($h={}));var pi;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(pi||(pi={}));var ss;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(ss||(ss={}));var nw;(function(n){n.websocket="websocket"})(nw||(nw={}));var tl;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(tl||(tl={}));class Pj{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),i=new TextDecoder;return this._decodeBroadcast(e,t,i)}_decodeBroadcast(e,t,i){const r=t.getUint8(1),s=t.getUint8(2);let o=this.HEADER_LENGTH+2;const a=i.decode(e.slice(o,o+r));o=o+r;const l=i.decode(e.slice(o,o+s));o=o+s;const c=JSON.parse(i.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:l,payload:c}}}let BO=class{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var In;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(In||(In={}));const eC=(n,e,t={})=>{var i;const r=(i=t.skipTypes)!==null&&i!==void 0?i:[];return e?Object.keys(e).reduce((s,o)=>(s[o]=Oj(o,n,e,r),s),{}):{}},Oj=(n,e,t,i)=>{const r=e.find(a=>a.name===n),s=r==null?void 0:r.type,o=t[n];return s&&!i.includes(s)?zO(s,o):iw(o)},zO=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return Nj(e,t)}switch(n){case In.bool:return Lj(e);case In.float4:case In.float8:case In.int2:case In.int4:case In.int8:case In.numeric:case In.oid:return kj(e);case In.json:case In.jsonb:return Uj(e);case In.timestamp:return Fj(e);case In.abstime:case In.date:case In.daterange:case In.int4range:case In.int8range:case In.money:case In.reltime:case In.text:case In.time:case In.timestamptz:case In.timetz:case In.tsrange:case In.tstzrange:return iw(e);default:return iw(e)}},iw=n=>n,Lj=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},kj=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},Uj=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log("JSON parse error: ".concat(e)),n}return n},Nj=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,i=n[t];if(n[0]==="{"&&i==="}"){let s;const o=n.slice(1,t);try{s=JSON.parse("["+o+"]")}catch(a){s=o?o.split(","):[]}return s.map(a=>zO(e,a))}return n},Fj=n=>typeof n=="string"?n.replace(" ","T"):n,HO=n=>{let e=n;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class Jy{constructor(e,t,i={},r=tw){this.channel=e,this.event=t,this.payload=i,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var i;return this._hasReceived(e)&&t((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(i=>i.status===e).forEach(i=>i.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var tC;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(tC||(tC={}));class Jh{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},r=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Jh.syncState(this.state,r,s,o),this.pendingDiffs.forEach(l=>{this.state=Jh.syncDiff(this.state,l,s,o)}),this.pendingDiffs=[],a()}),this.channel._on(i.diff,{},r=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(r):(this.state=Jh.syncDiff(this.state,r,s,o),a())}),this.onJoin((r,s,o)=>{this.channel._trigger("presence",{event:"join",key:r,currentPresences:s,newPresences:o})}),this.onLeave((r,s,o)=>{this.channel._trigger("presence",{event:"leave",key:r,currentPresences:s,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,i,r){const s=this.cloneDeep(e),o=this.transformState(t),a={},l={};return this.map(s,(c,u)=>{o[c]||(l[c]=u)}),this.map(o,(c,u)=>{const d=s[c];if(d){const f=u.map(y=>y.presence_ref),m=d.map(y=>y.presence_ref),v=u.filter(y=>m.indexOf(y.presence_ref)<0),g=d.filter(y=>f.indexOf(y.presence_ref)<0);v.length>0&&(a[c]=v),g.length>0&&(l[c]=g)}else a[c]=u}),this.syncDiff(s,{joins:a,leaves:l},i,r)}static syncDiff(e,t,i,r){const{joins:s,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return i||(i=()=>{}),r||(r=()=>{}),this.map(s,(a,l)=>{var c;const u=(c=e[a])!==null&&c!==void 0?c:[];if(e[a]=this.cloneDeep(l),u.length>0){const d=e[a].map(m=>m.presence_ref),f=u.filter(m=>d.indexOf(m.presence_ref)<0);e[a].unshift(...f)}i(a,u,l)}),this.map(o,(a,l)=>{let c=e[a];if(!c)return;const u=l.map(d=>d.presence_ref);c=c.filter(d=>u.indexOf(d.presence_ref)<0),e[a]=c,r(a,c,l),c.length===0&&delete e[a]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(i=>t(i,e[i]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,i)=>{const r=e[i];return"metas"in r?t[i]=r.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):t[i]=r,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var nC;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(nC||(nC={}));var Qh;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(Qh||(Qh={}));var ro;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(ro||(ro={}));class zS{constructor(e,t={config:{}},i){var r,s;if(this.topic=e,this.params=t,this.socket=i,this.bindings={},this.state=pi.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Jy(this,ss.join,this.params,this.timeout),this.rejoinTimer=new BO(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=pi.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel","close ".concat(this.topic," ").concat(this._joinRef())),this.state=pi.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel","error ".concat(this.topic),o),this.state=pi.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel","timeout ".concat(this.topic),this.joinPush.timeout),this.state=pi.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel","error ".concat(this.topic),o),this.state=pi.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ss.reply,{},(o,a)=>{this._trigger(this._replyEventName(a),o)}),this.presence=new Jh(this),this.broadcastEndpointURL=HO(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((s=(r=this.params.config)===null||r===void 0?void 0:r.broadcast)===null||s===void 0)&&s.replay))throw"tried to use replay on public channel '".concat(this.topic,"'. It must be a private channel.")}subscribe(e,t=this.timeout){var i,r,s;if(this.socket.isConnected()||this.socket.connect(),this.state==pi.closed){const{config:{broadcast:o,presence:a,private:l}}=this.params,c=(r=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(m=>m.filter))!==null&&r!==void 0?r:[],u=!!this.bindings[Qh.PRESENCE]&&this.bindings[Qh.PRESENCE].length>0||((s=this.params.config.presence)===null||s===void 0?void 0:s.enabled)===!0,d={},f={broadcast:o,presence:Object.assign(Object.assign({},a),{enabled:u}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(m=>e==null?void 0:e(ro.CHANNEL_ERROR,m)),this._onClose(()=>e==null?void 0:e(ro.CLOSED)),this.updateJoinPayload(Object.assign({config:f},d)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:m})=>{var v;if(this.socket.setAuth(),m===void 0){e==null||e(ro.SUBSCRIBED);return}else{const g=this.bindings.postgres_changes,y=(v=g==null?void 0:g.length)!==null&&v!==void 0?v:0,b=[];for(let S=0;S<y;S++){const x=g[S],{filter:{event:A,schema:E,table:M,filter:I}}=x,R=m&&m[S];if(R&&R.event===A&&R.schema===E&&R.table===M&&R.filter===I)b.push(Object.assign(Object.assign({},x),{id:R.id}));else{this.unsubscribe(),this.state=pi.errored,e==null||e(ro.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=b,e&&e(ro.SUBSCRIBED);return}}).receive("error",m=>{this.state=pi.errored,e==null||e(ro.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(ro.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,i){return this.state===pi.joined&&e===Qh.PRESENCE&&(this.socket.log("channel","resubscribe to ".concat(this.topic," due to change in presence callbacks on joined channel")),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,i)}async send(e,t={}){var i,r;if(!this._canPush()&&e.type==="broadcast"){const{event:s,payload:o}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?"Bearer ".concat(this.socket.accessTokenValue):"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:o,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(i=t.timeout)!==null&&i!==void 0?i:this.timeout);return await((r=c.body)===null||r===void 0?void 0:r.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var o,a,l;const c=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&s("ok"),c.receive("ok",()=>s("ok")),c.receive("error",()=>s("error")),c.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=pi.leaving;const t=()=>{this.socket.log("channel","leave ".concat(this.topic)),this._trigger(ss.close,"leave",this._joinRef())};this.joinPush.destroy();let i=null;return new Promise(r=>{i=new Jy(this,ss.leave,{},e),i.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),i.send(),this._canPush()||i.trigger("ok",{})}).finally(()=>{i==null||i.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=pi.closed,this.bindings={}}async _fetchWithTimeout(e,t,i){const r=new AbortController,s=setTimeout(()=>r.abort(),i),o=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:r.signal}));return clearTimeout(s),o}_push(e,t,i=this.timeout){if(!this.joinedOnce)throw"tried to push '".concat(e,"' to '").concat(this.topic,"' before joining. Use channel.subscribe() before pushing events");let r=new Jy(this,e,t,i);return this._canPush()?r.send():this._addToPushBuffer(r),r}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>Dj){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel","discarded push due to buffer overflow: ".concat(t.event),t.payload))}}_onMessage(e,t,i){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,i){var r,s;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:c,join:u}=ss;if(i&&[a,l,c,u].indexOf(o)>=0&&i!==this._joinRef())return;let f=this._onMessage(o,t,i);if(t&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(r=this.bindings.postgres_changes)===null||r===void 0||r.filter(m=>{var v,g,y;return((v=m.filter)===null||v===void 0?void 0:v.event)==="*"||((y=(g=m.filter)===null||g===void 0?void 0:g.event)===null||y===void 0?void 0:y.toLocaleLowerCase())===o}).map(m=>m.callback(f,i)):(s=this.bindings[o])===null||s===void 0||s.filter(m=>{var v,g,y,b,S,x;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in m){const A=m.id,E=(v=m.filter)===null||v===void 0?void 0:v.event;return A&&((g=t.ids)===null||g===void 0?void 0:g.includes(A))&&(E==="*"||(E==null?void 0:E.toLocaleLowerCase())===((y=t.data)===null||y===void 0?void 0:y.type.toLocaleLowerCase()))}else{const A=(S=(b=m==null?void 0:m.filter)===null||b===void 0?void 0:b.event)===null||S===void 0?void 0:S.toLocaleLowerCase();return A==="*"||A===((x=t==null?void 0:t.event)===null||x===void 0?void 0:x.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===o}).map(m=>{if(typeof f=="object"&&"ids"in f){const v=f.data,{schema:g,table:y,commit_timestamp:b,type:S,errors:x}=v;f=Object.assign(Object.assign({},{schema:g,table:y,commit_timestamp:b,eventType:S,new:{},old:{},errors:x}),this._getPayloadRecords(v))}m.callback(f,i)})}_isClosed(){return this.state===pi.closed}_isJoined(){return this.state===pi.joined}_isJoining(){return this.state===pi.joining}_isLeaving(){return this.state===pi.leaving}_replyEventName(e){return"chan_reply_".concat(e)}_on(e,t,i){const r=e.toLocaleLowerCase(),s={type:r,filter:t,callback:i};return this.bindings[r]?this.bindings[r].push(s):this.bindings[r]=[s],this}_off(e,t){const i=e.toLocaleLowerCase();return this.bindings[i]&&(this.bindings[i]=this.bindings[i].filter(r=>{var s;return!(((s=r.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===i&&zS.isEqual(r.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const i in e)if(e[i]!==t[i])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(ss.close,{},e)}_onError(e){this._on(ss.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=pi.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=eC(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=eC(e.columns,e.old_record)),t}}const Qy=()=>{},Ip={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Bj=[1e3,2e3,5e3,1e4],zj=1e4,Hj='\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });';class Gj{constructor(e,t){var i;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=tw,this.transport=null,this.heartbeatIntervalMs=Ip.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Qy,this.ref=0,this.reconnectTimer=null,this.logger=Qy,this.conn=null,this.sendBuffer=[],this.serializer=new Pj,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=r=>{let s;return r?s=r:typeof fetch>"u"?s=(...o)=>Wd(async()=>{const{default:a}=await Promise.resolve().then(()=>Cu);return{default:a}},void 0).then(({default:a})=>a(...o)).catch(a=>{throw new Error("Failed to load @supabase/node-fetch: ".concat(a.message,". ")+"This is required for HTTP requests in Node.js environments without native fetch.")}):s=fetch,(...o)=>s(...o)},!(!((i=t==null?void 0:t.params)===null||i===void 0)&&i.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint="".concat(e,"/").concat(nw.websocket),this.httpEndpoint=HO(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t==null?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Mj.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error("".concat(t,"\n\n")+'To use Realtime in Node.js, you need to provide a WebSocket implementation:\n\nOption 1: Use Node.js 22+ which has native WebSocket support\nOption 2: Install and provide the "ws" package:\n\n  npm install ws\n\n  import ws from "ws"\n  const client = new RealtimeClient(url, {\n    ...options,\n    transport: ws\n  })'):new Error("WebSocket not available: ".concat(t))}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Rj}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const i=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(i),this._setConnectionState("disconnected")},e?this.conn.close(e,t!=null?t:""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,i){this.logger(e,t,i)}connectionState(){switch(this.conn&&this.conn.readyState){case $h.connecting:return tl.Connecting;case $h.open:return tl.Open;case $h.closing:return tl.Closing;default:return tl.Closed}}isConnected(){return this.connectionState()===tl.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const i="realtime:".concat(e),r=this.getChannels().find(s=>s.topic===i);if(r)return r;{const s=new zS("realtime:".concat(e),t,this);return this.channels.push(s),s}}push(e){const{topic:t,event:i,payload:r,ref:s}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push","".concat(t," ").concat(i," (").concat(s,")"),r),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(Ij,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},Ip.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(i=>i.topic===e&&(i._isJoined()||i._isJoining()));t&&(this.log("transport",'leaving duplicate topic "'.concat(e,'"')),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{if(t.topic==="phoenix"&&t.event==="phx_reply")try{this.heartbeatCallback(t.payload.status==="ok"?"ok":"error")}catch(c){this.log("error","error in heartbeat callback",c)}t.ref&&t.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:i,event:r,payload:s,ref:o}=t,a=o?"(".concat(o,")"):"",l=s.status||"";this.log("receive","".concat(l," ").concat(i," ").concat(r," ").concat(a).trim(),s),this.channels.filter(c=>c._isMember(i)).forEach(c=>c._trigger(r,s,o)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport","connected to ".concat(this.endpointURL())),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker","starting worker for from ".concat(this.workerUrl)):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport","".concat(e)),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(ss.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const i=e.match(/\?/)?"&":"?",r=new URLSearchParams(t);return"".concat(e).concat(i).concat(r)}_workerObjectUrl(e){let t;if(e)t=e;else{const i=new Blob([Hj],{type:"application/javascript"});t=URL.createObjectURL(i)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;e?t=e:this.accessToken?t=await this.accessToken():t=this.accessTokenValue,this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(i=>{const r={access_token:t,version:Cj};t&&i.updateJoinPayload(r),i.joinedOnce&&i._isJoined()&&i._push(ss.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error","error setting auth in ".concat(e),t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(i=>{try{i(t)}catch(r){this.log("error","error in ".concat(e," callback"),r)}})}catch(i){this.log("error","error triggering ".concat(e," callbacks"),i)}}_setupReconnectionTimer(){this.reconnectTimer=new BO(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Ip.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,i,r,s,o,a,l,c,u;if(this.transport=(t=e==null?void 0:e.transport)!==null&&t!==void 0?t:null,this.timeout=(i=e==null?void 0:e.timeout)!==null&&i!==void 0?i:tw,this.heartbeatIntervalMs=(r=e==null?void 0:e.heartbeatIntervalMs)!==null&&r!==void 0?r:Ip.HEARTBEAT_INTERVAL,this.worker=(s=e==null?void 0:e.worker)!==null&&s!==void 0?s:!1,this.accessToken=(o=e==null?void 0:e.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(a=e==null?void 0:e.heartbeatCallback)!==null&&a!==void 0?a:Qy,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(l=e==null?void 0:e.reconnectAfterMs)!==null&&l!==void 0?l:(d=>Bj[d-1]||zj),this.encode=(c=e==null?void 0:e.encode)!==null&&c!==void 0?c:((d,f)=>f(JSON.stringify(d))),this.decode=(u=e==null?void 0:e.decode)!==null&&u!==void 0?u:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class HS extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function si(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class Vj extends HS{constructor(e,t,i){super(e),this.name="StorageApiError",this.status=t,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class rw extends HS{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var Wj=function(n,e,t,i){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(d){o(d)}}function l(u){try{c(i.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):r(u.value).then(a,l)}c((i=i.apply(n,e||[])).next())})};const GO=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Wd(async()=>{const{default:i}=await Promise.resolve().then(()=>Cu);return{default:i}},void 0).then(({default:i})=>i(...t)):e=fetch,(...t)=>e(...t)},jj=()=>Wj(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Wd(()=>Promise.resolve().then(()=>Cu),void 0)).Response:Response}),sw=n=>{if(Array.isArray(n))return n.map(t=>sw(t));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([t,i])=>{const r=t.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[r]=sw(i)}),e},qj=n=>{if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)};var zl=function(n,e,t,i){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(d){o(d)}}function l(u){try{c(i.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):r(u.value).then(a,l)}c((i=i.apply(n,e||[])).next())})};const Zy=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),Xj=(n,e,t)=>zl(void 0,void 0,void 0,function*(){const i=yield jj();n instanceof i&&!(t!=null&&t.noResolveJson)?n.json().then(r=>{const s=n.status||500,o=(r==null?void 0:r.statusCode)||s+"";e(new Vj(Zy(r),s,o))}).catch(r=>{e(new rw(Zy(r),r))}):e(new rw(Zy(n),n))}),Yj=(n,e,t,i)=>{const r={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"||!i?r:(qj(i)?(r.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r.body=JSON.stringify(i)):r.body=i,e!=null&&e.duplex&&(r.duplex=e.duplex),Object.assign(Object.assign({},r),t))};function Zd(n,e,t,i,r,s){return zl(this,void 0,void 0,function*(){return new Promise((o,a)=>{n(t,Yj(e,i,r,s)).then(l=>{if(!l.ok)throw l;return i!=null&&i.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>Xj(l,a,i))})})}function ag(n,e,t,i){return zl(this,void 0,void 0,function*(){return Zd(n,"GET",e,t,i)})}function Ms(n,e,t,i,r){return zl(this,void 0,void 0,function*(){return Zd(n,"POST",e,i,r,t)})}function ow(n,e,t,i,r){return zl(this,void 0,void 0,function*(){return Zd(n,"PUT",e,i,r,t)})}function Kj(n,e,t,i){return zl(this,void 0,void 0,function*(){return Zd(n,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),i)})}function VO(n,e,t,i,r){return zl(this,void 0,void 0,function*(){return Zd(n,"DELETE",e,i,r,t)})}var $j=function(n,e,t,i){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(d){o(d)}}function l(u){try{c(i.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):r(u.value).then(a,l)}c((i=i.apply(n,e||[])).next())})};class Jj{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}execute(){return $j(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(si(e))return{data:null,error:e};throw e}})}}var Qj=function(n,e,t,i){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(d){o(d)}}function l(u){try{c(i.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):r(u.value).then(a,l)}c((i=i.apply(n,e||[])).next())})};class Zj{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}asStream(){return new Jj(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.execute().then(e,t)}execute(){return Qj(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(si(e))return{data:null,error:e};throw e}})}}var sr=function(n,e,t,i){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(d){o(d)}}function l(u){try{c(i.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):r(u.value).then(a,l)}c((i=i.apply(n,e||[])).next())})};const e8={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},iC={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class t8{constructor(e,t={},i,r){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=i,this.fetch=GO(r)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,i,r){return sr(this,void 0,void 0,function*(){try{let s;const o=Object.assign(Object.assign({},iC),r);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&i instanceof Blob?(s=new FormData,s.append("cacheControl",o.cacheControl),l&&s.append("metadata",this.encodeMetadata(l)),s.append("",i)):typeof FormData<"u"&&i instanceof FormData?(s=i,s.append("cacheControl",o.cacheControl),l&&s.append("metadata",this.encodeMetadata(l))):(s=i,a["cache-control"]="max-age=".concat(o.cacheControl),a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),r!=null&&r.headers&&(a=Object.assign(Object.assign({},a),r.headers));const c=this._removeEmptyFolders(t),u=this._getFinalPath(c),d=yield(e=="PUT"?ow:Ms)(this.fetch,"".concat(this.url,"/object/").concat(u),s,Object.assign({headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:c,id:d.Id,fullPath:d.Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(si(s))return{data:null,error:s};throw s}})}upload(e,t,i){return sr(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,i)})}uploadToSignedUrl(e,t,i,r){return sr(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(e),o=this._getFinalPath(s),a=new URL(this.url+"/object/upload/sign/".concat(o));a.searchParams.set("token",t);try{let l;const c=Object.assign({upsert:iC.upsert},r),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&i instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",i)):typeof FormData<"u"&&i instanceof FormData?(l=i,l.append("cacheControl",c.cacheControl)):(l=i,u["cache-control"]="max-age=".concat(c.cacheControl),u["content-type"]=c.contentType);const d=yield ow(this.fetch,a.toString(),l,{headers:u});return{data:{path:s,fullPath:d.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(si(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,t){return sr(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e);const r=Object.assign({},this.headers);t!=null&&t.upsert&&(r["x-upsert"]="true");const s=yield Ms(this.fetch,"".concat(this.url,"/object/upload/sign/").concat(i),{},{headers:r}),o=new URL(this.url+s.url),a=o.searchParams.get("token");if(!a)throw new HS("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(si(i))return{data:null,error:i};throw i}})}update(e,t,i){return sr(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,i)})}move(e,t,i){return sr(this,void 0,void 0,function*(){try{return{data:yield Ms(this.fetch,"".concat(this.url,"/object/move"),{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:i==null?void 0:i.destinationBucket},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(si(r))return{data:null,error:r};throw r}})}copy(e,t,i){return sr(this,void 0,void 0,function*(){try{return{data:{path:(yield Ms(this.fetch,"".concat(this.url,"/object/copy"),{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:i==null?void 0:i.destinationBucket},{headers:this.headers})).Key},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(si(r))return{data:null,error:r};throw r}})}createSignedUrl(e,t,i){return sr(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),s=yield Ms(this.fetch,"".concat(this.url,"/object/sign/").concat(r),Object.assign({expiresIn:t},i!=null&&i.transform?{transform:i.transform}:{}),{headers:this.headers});const o=i!=null&&i.download?"&download=".concat(i.download===!0?"":i.download):"";return s={signedUrl:encodeURI("".concat(this.url).concat(s.signedURL).concat(o))},{data:s,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(si(r))return{data:null,error:r};throw r}})}createSignedUrls(e,t,i){return sr(this,void 0,void 0,function*(){try{const r=yield Ms(this.fetch,"".concat(this.url,"/object/sign/").concat(this.bucketId),{expiresIn:t,paths:e},{headers:this.headers}),s=i!=null&&i.download?"&download=".concat(i.download===!0?"":i.download):"";return{data:r.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI("".concat(this.url).concat(o.signedURL).concat(s)):null})),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(si(r))return{data:null,error:r};throw r}})}download(e,t){const r=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),o=s?"?".concat(s):"",a=this._getFinalPath(e),l=()=>ag(this.fetch,"".concat(this.url,"/").concat(r,"/").concat(a).concat(o),{headers:this.headers,noResolveJson:!0});return new Zj(l,this.shouldThrowOnError)}info(e){return sr(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const i=yield ag(this.fetch,"".concat(this.url,"/object/info/").concat(t),{headers:this.headers});return{data:sw(i),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(si(i))return{data:null,error:i};throw i}})}exists(e){return sr(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield Kj(this.fetch,"".concat(this.url,"/object/").concat(t),{headers:this.headers}),{data:!0,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(si(i)&&i instanceof rw){const r=i.originalError;if([400,404].includes(r==null?void 0:r.status))return{data:!1,error:i}}throw i}})}getPublicUrl(e,t){const i=this._getFinalPath(e),r=[],s=t!=null&&t.download?"download=".concat(t.download===!0?"":t.download):"";s!==""&&r.push(s);const a=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});l!==""&&r.push(l);let c=r.join("&");return c!==""&&(c="?".concat(c)),{data:{publicUrl:encodeURI("".concat(this.url,"/").concat(a,"/public/").concat(i).concat(c))}}}remove(e){return sr(this,void 0,void 0,function*(){try{return{data:yield VO(this.fetch,"".concat(this.url,"/object/").concat(this.bucketId),{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(si(t))return{data:null,error:t};throw t}})}list(e,t,i){return sr(this,void 0,void 0,function*(){try{const r=Object.assign(Object.assign(Object.assign({},e8),t),{prefix:e||""});return{data:yield Ms(this.fetch,"".concat(this.url,"/object/list/").concat(this.bucketId),r,{headers:this.headers},i),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(si(r))return{data:null,error:r};throw r}})}listV2(e,t){return sr(this,void 0,void 0,function*(){try{const i=Object.assign({},e);return{data:yield Ms(this.fetch,"".concat(this.url,"/object/list-v2/").concat(this.bucketId),i,{headers:this.headers},t),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(si(i))return{data:null,error:i};throw i}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return"".concat(this.bucketId,"/").concat(e.replace(/^\/+/,""))}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push("width=".concat(e.width)),e.height&&t.push("height=".concat(e.height)),e.resize&&t.push("resize=".concat(e.resize)),e.format&&t.push("format=".concat(e.format)),e.quality&&t.push("quality=".concat(e.quality)),t.join("&")}}const n8="2.75.0",i8={"X-Client-Info":"storage-js/".concat(n8)};var uc=function(n,e,t,i){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(d){o(d)}}function l(u){try{c(i.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):r(u.value).then(a,l)}c((i=i.apply(n,e||[])).next())})};class r8{constructor(e,t={},i,r){this.shouldThrowOnError=!1;const s=new URL(e);r!=null&&r.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},i8),t),this.fetch=GO(i)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return uc(this,void 0,void 0,function*(){try{return{data:yield ag(this.fetch,"".concat(this.url,"/bucket"),{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(si(e))return{data:null,error:e};throw e}})}getBucket(e){return uc(this,void 0,void 0,function*(){try{return{data:yield ag(this.fetch,"".concat(this.url,"/bucket/").concat(e),{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(si(t))return{data:null,error:t};throw t}})}createBucket(e){return uc(this,arguments,void 0,function*(t,i={public:!1}){try{return{data:yield Ms(this.fetch,"".concat(this.url,"/bucket"),{id:t,name:t,type:i.type,public:i.public,file_size_limit:i.fileSizeLimit,allowed_mime_types:i.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(si(r))return{data:null,error:r};throw r}})}updateBucket(e,t){return uc(this,void 0,void 0,function*(){try{return{data:yield ow(this.fetch,"".concat(this.url,"/bucket/").concat(e),{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(si(i))return{data:null,error:i};throw i}})}emptyBucket(e){return uc(this,void 0,void 0,function*(){try{return{data:yield Ms(this.fetch,"".concat(this.url,"/bucket/").concat(e,"/empty"),{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(si(t))return{data:null,error:t};throw t}})}deleteBucket(e){return uc(this,void 0,void 0,function*(){try{return{data:yield VO(this.fetch,"".concat(this.url,"/bucket/").concat(e),{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(si(t))return{data:null,error:t};throw t}})}}class s8 extends r8{constructor(e,t={},i,r){super(e,t,i,r)}from(e){return new t8(this.url,this.headers,e,this.fetch)}}const o8="2.75.0";let Gh="";typeof Deno<"u"?Gh="deno":typeof document<"u"?Gh="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Gh="react-native":Gh="node";const a8={"X-Client-Info":"supabase-js-".concat(Gh,"/").concat(o8)},l8={headers:a8},c8={schema:"public"},u8={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},h8={};var d8=function(n,e,t,i){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(d){o(d)}}function l(u){try{c(i.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):r(u.value).then(a,l)}c((i=i.apply(n,e||[])).next())})};const f8=n=>{let e;return n?e=n:typeof fetch>"u"?e=OO:e=fetch,(...t)=>e(...t)},p8=()=>typeof Headers>"u"?LO:Headers,m8=(n,e,t)=>{const i=f8(t),r=p8();return(s,o)=>d8(void 0,void 0,void 0,function*(){var a;const l=(a=yield e())!==null&&a!==void 0?a:n;let c=new r(o==null?void 0:o.headers);return c.has("apikey")||c.set("apikey",n),c.has("Authorization")||c.set("Authorization","Bearer ".concat(l)),i(s,Object.assign(Object.assign({},o),{headers:c}))})};var g8=function(n,e,t,i){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(d){o(d)}}function l(u){try{c(i.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):r(u.value).then(a,l)}c((i=i.apply(n,e||[])).next())})};function v8(n){return n.endsWith("/")?n:n+"/"}function _8(n,e){var t,i;const{db:r,auth:s,realtime:o,global:a}=n,{db:l,auth:c,realtime:u,global:d}=e,f={db:Object.assign(Object.assign({},l),r),auth:Object.assign(Object.assign({},c),s),realtime:Object.assign(Object.assign({},u),o),storage:{},global:Object.assign(Object.assign(Object.assign({},d),a),{headers:Object.assign(Object.assign({},(t=d==null?void 0:d.headers)!==null&&t!==void 0?t:{}),(i=a==null?void 0:a.headers)!==null&&i!==void 0?i:{})}),accessToken:()=>g8(this,void 0,void 0,function*(){return""})};return n.accessToken?f.accessToken=n.accessToken:delete f.accessToken,f}function y8(n){const e=n==null?void 0:n.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(v8(e))}catch(t){throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const WO="2.75.0",Bc=30*1e3,aw=3,e0=aw*Bc,b8="http://localhost:9999",w8="supabase.auth.token",S8={"X-Client-Info":"gotrue-js/".concat(WO)},lw="X-Supabase-Api-Version",jO={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},x8=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,E8=600*1e3;class wd extends Error{constructor(e,t,i){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=i}}function At(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class A8 extends wd{constructor(e,t,i){super(e,t,i),this.name="AuthApiError",this.status=t,this.code=i}}function M8(n){return At(n)&&n.name==="AuthApiError"}class nl extends wd{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class na extends wd{constructor(e,t,i,r){super(e,i,r),this.name=t,this.status=i}}class Po extends na{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function T8(n){return At(n)&&n.name==="AuthSessionMissingError"}class hc extends na{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Dp extends na{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Pp extends na{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function C8(n){return At(n)&&n.name==="AuthImplicitGrantRedirectError"}class rC extends na{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class cw extends na{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function t0(n){return At(n)&&n.name==="AuthRetryableFetchError"}class sC extends na{constructor(e,t,i){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=i}}class uw extends na{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const lg="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),oC=" 	\n\r=".split(""),R8=(()=>{const n=new Array(128);for(let e=0;e<n.length;e+=1)n[e]=-1;for(let e=0;e<oC.length;e+=1)n[oC[e].charCodeAt(0)]=-2;for(let e=0;e<lg.length;e+=1)n[lg[e].charCodeAt(0)]=e;return n})();function aC(n,e,t){if(n!==null)for(e.queue=e.queue<<8|n,e.queuedBits+=8;e.queuedBits>=6;){const i=e.queue>>e.queuedBits-6&63;t(lg[i]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const i=e.queue>>e.queuedBits-6&63;t(lg[i]),e.queuedBits-=6}}function qO(n,e,t){const i=R8[n];if(i>-1)for(e.queue=e.queue<<6|i,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(i===-2)return;throw new Error('Invalid Base64-URL character "'.concat(String.fromCharCode(n),'"'))}}function lC(n){const e=[],t=o=>{e.push(String.fromCodePoint(o))},i={utf8seq:0,codepoint:0},r={queue:0,queuedBits:0},s=o=>{P8(o,i,t)};for(let o=0;o<n.length;o+=1)qO(n.charCodeAt(o),r,s);return e.join("")}function I8(n,e){if(n<=127){e(n);return}else if(n<=2047){e(192|n>>6),e(128|n&63);return}else if(n<=65535){e(224|n>>12),e(128|n>>6&63),e(128|n&63);return}else if(n<=1114111){e(240|n>>18),e(128|n>>12&63),e(128|n>>6&63),e(128|n&63);return}throw new Error("Unrecognized Unicode codepoint: ".concat(n.toString(16)))}function D8(n,e){for(let t=0;t<n.length;t+=1){let i=n.charCodeAt(t);if(i>55295&&i<=56319){const r=(i-55296)*1024&65535;i=(n.charCodeAt(t+1)-56320&65535|r)+65536,t+=1}I8(i,e)}}function P8(n,e,t){if(e.utf8seq===0){if(n<=127){t(n);return}for(let i=1;i<6;i+=1)if((n>>7-i&1)===0){e.utf8seq=i;break}if(e.utf8seq===2)e.codepoint=n&31;else if(e.utf8seq===3)e.codepoint=n&15;else if(e.utf8seq===4)e.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|n&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function Qc(n){const e=[],t={queue:0,queuedBits:0},i=r=>{e.push(r)};for(let r=0;r<n.length;r+=1)qO(n.charCodeAt(r),t,i);return new Uint8Array(e)}function O8(n){const e=[];return D8(n,t=>e.push(t)),new Uint8Array(e)}function sl(n){const e=[],t={queue:0,queuedBits:0},i=r=>{e.push(r)};return n.forEach(r=>aC(r,t,i)),aC(null,t,i),e.join("")}function L8(n){return Math.round(Date.now()/1e3)+n}function k8(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}const wr=()=>typeof window<"u"&&typeof document<"u",La={tested:!1,writable:!1},XO=()=>{if(!wr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch(e){return!1}if(La.tested)return La.writable;const n="lswt-".concat(Math.random()).concat(Math.random());try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),La.tested=!0,La.writable=!0}catch(e){La.tested=!0,La.writable=!1}return La.writable};function U8(n){const e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((r,s)=>{e[s]=r})}catch(i){}return t.searchParams.forEach((i,r)=>{e[r]=i}),e}const YO=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Wd(async()=>{const{default:i}=await Promise.resolve().then(()=>Cu);return{default:i}},void 0).then(({default:i})=>i(...t)):e=fetch,(...t)=>e(...t)},N8=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",zc=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},ka=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch(i){return t}},So=async(n,e)=>{await n.removeItem(e)};class vv{constructor(){this.promise=new vv.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}vv.promiseConstructor=Promise;function n0(n){const e=n.split(".");if(e.length!==3)throw new uw("Invalid JWT structure");for(let i=0;i<e.length;i++)if(!x8.test(e[i]))throw new uw("JWT not in base64url format");return{header:JSON.parse(lC(e[0])),payload:JSON.parse(lC(e[1])),signature:Qc(e[2]),raw:{header:e[0],payload:e[1]}}}async function F8(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function B8(n,e){return new Promise((i,r)=>{(async()=>{for(let s=0;s<1/0;s++)try{const o=await n(s);if(!e(s,null,o)){i(o);return}}catch(o){if(!e(s,o)){r(o);return}}})()})}function z8(n){return("0"+n.toString(16)).substr(-2)}function H8(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=t.length;let r="";for(let s=0;s<56;s++)r+=t.charAt(Math.floor(Math.random()*i));return r}return crypto.getRandomValues(e),Array.from(e,z8).join("")}async function G8(n){const t=new TextEncoder().encode(n),i=await crypto.subtle.digest("SHA-256",t),r=new Uint8Array(i);return Array.from(r).map(s=>String.fromCharCode(s)).join("")}async function V8(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const t=await G8(n);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function dc(n,e,t=!1){const i=H8();let r=i;t&&(r+="/PASSWORD_RECOVERY"),await zc(n,"".concat(e,"-code-verifier"),r);const s=await V8(i);return[s,i===s?"plain":"s256"]}const W8=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function j8(n){const e=n.headers.get(lw);if(!e||!e.match(W8))return null;try{return new Date("".concat(e,"T00:00:00.0Z"))}catch(t){return null}}function q8(n){if(!n)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(n<=e)throw new Error("JWT has expired")}function X8(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Y8=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function fc(n){if(!Y8.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function i0(){const n={};return new Proxy(n,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const i=t.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)")return}throw new Error('@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "'.concat(t,'" property of the session object is not supported. Please use getUser() instead.'))},set:(e,t)=>{throw new Error('@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "'.concat(t,'" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.'))},deleteProperty:(e,t)=>{throw new Error('@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "'.concat(t,'" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.'))}})}function cC(n){return JSON.parse(JSON.stringify(n))}var K8=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t};const Ja=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),$8=[502,503,504];async function uC(n){var e;if(!N8(n))throw new cw(Ja(n),0);if($8.includes(n.status))throw new cw(Ja(n),n.status);let t;try{t=await n.json()}catch(s){throw new nl(Ja(s),s)}let i;const r=j8(n);if(r&&r.getTime()>=jO["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?i=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(i=t.error_code),i){if(i==="weak_password")throw new sC(Ja(t),n.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(i==="session_not_found")throw new Po}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((s,o)=>s&&typeof o=="string",!0))throw new sC(Ja(t),n.status,t.weak_password.reasons);throw new A8(Ja(t),n.status||500,i)}const J8=(n,e,t,i)=>{const r={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),r.body=JSON.stringify(i),Object.assign(Object.assign({},r),t))};async function Ot(n,e,t,i){var r;const s=Object.assign({},i==null?void 0:i.headers);s[lw]||(s[lw]=jO["2024-01-01"].name),i!=null&&i.jwt&&(s.Authorization="Bearer ".concat(i.jwt));const o=(r=i==null?void 0:i.query)!==null&&r!==void 0?r:{};i!=null&&i.redirectTo&&(o.redirect_to=i.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await Q8(n,e,t+a,{headers:s,noResolveJson:i==null?void 0:i.noResolveJson},{},i==null?void 0:i.body);return i!=null&&i.xform?i==null?void 0:i.xform(l):{data:Object.assign({},l),error:null}}async function Q8(n,e,t,i,r,s){const o=J8(e,i,r,s);let a;try{a=await n(t,Object.assign({},o))}catch(l){throw console.error(l),new cw(Ja(l),0)}if(a.ok||await uC(a),i!=null&&i.noResolveJson)return a;try{return await a.json()}catch(l){await uC(l)}}function is(n){var e;let t=null;t6(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=L8(n.expires_in)));const i=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:i},error:null}}function hC(n){const e=is(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,i)=>t&&typeof i=="string",!0)&&(e.data.weak_password=n.weak_password),e}function Uo(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function Z8(n){return{data:n,error:null}}function e6(n){const{action_link:e,email_otp:t,hashed_token:i,redirect_to:r,verification_type:s}=n,o=K8(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:t,hashed_token:i,redirect_to:r,verification_type:s},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function dC(n){return n}function t6(n){return n.access_token&&n.refresh_token&&n.expires_in}const r0=["global","local","others"];var n6=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t};class i6{constructor({url:e="",headers:t={},fetch:i}){this.url=e,this.headers=t,this.fetch=YO(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,t=r0[0]){if(r0.indexOf(t)<0)throw new Error("@supabase/auth-js: Parameter scope must be one of ".concat(r0.join(", ")));try{return await Ot(this.fetch,"POST","".concat(this.url,"/logout?scope=").concat(t),{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(i){if(At(i))return{data:null,error:i};throw i}}async inviteUserByEmail(e,t={}){try{return await Ot(this.fetch,"POST","".concat(this.url,"/invite"),{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Uo})}catch(i){if(At(i))return{data:{user:null},error:i};throw i}}async generateLink(e){try{const{options:t}=e,i=n6(e,["options"]),r=Object.assign(Object.assign({},i),t);return"newEmail"in i&&(r.new_email=i==null?void 0:i.newEmail,delete r.newEmail),await Ot(this.fetch,"POST","".concat(this.url,"/admin/generate_link"),{body:r,headers:this.headers,xform:e6,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(At(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await Ot(this.fetch,"POST","".concat(this.url,"/admin/users"),{body:e,headers:this.headers,xform:Uo})}catch(t){if(At(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,i,r,s,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},u=await Ot(this.fetch,"GET","".concat(this.url,"/admin/users"),{headers:this.headers,noResolveJson:!0,query:{page:(i=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&i!==void 0?i:"",per_page:(s=(r=e==null?void 0:e.perPage)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:""},xform:dC});if(u.error)throw u.error;const d=await u.json(),f=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return m.length>0&&(m.forEach(v=>{const g=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(v.split(";")[1].split("=")[1]);c["".concat(y,"Page")]=g}),c.total=parseInt(f)),{data:Object.assign(Object.assign({},d),c),error:null}}catch(c){if(At(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){fc(e);try{return await Ot(this.fetch,"GET","".concat(this.url,"/admin/users/").concat(e),{headers:this.headers,xform:Uo})}catch(t){if(At(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){fc(e);try{return await Ot(this.fetch,"PUT","".concat(this.url,"/admin/users/").concat(e),{body:t,headers:this.headers,xform:Uo})}catch(i){if(At(i))return{data:{user:null},error:i};throw i}}async deleteUser(e,t=!1){fc(e);try{return await Ot(this.fetch,"DELETE","".concat(this.url,"/admin/users/").concat(e),{headers:this.headers,body:{should_soft_delete:t},xform:Uo})}catch(i){if(At(i))return{data:{user:null},error:i};throw i}}async _listFactors(e){fc(e.userId);try{const{data:t,error:i}=await Ot(this.fetch,"GET","".concat(this.url,"/admin/users/").concat(e.userId,"/factors"),{headers:this.headers,xform:r=>({data:{factors:r},error:null})});return{data:t,error:i}}catch(t){if(At(t))return{data:null,error:t};throw t}}async _deleteFactor(e){fc(e.userId),fc(e.id);try{return{data:await Ot(this.fetch,"DELETE","".concat(this.url,"/admin/users/").concat(e.userId,"/factors/").concat(e.id),{headers:this.headers}),error:null}}catch(t){if(At(t))return{data:null,error:t};throw t}}async _listOAuthClients(e){var t,i,r,s,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},u=await Ot(this.fetch,"GET","".concat(this.url,"/admin/oauth/clients"),{headers:this.headers,noResolveJson:!0,query:{page:(i=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&i!==void 0?i:"",per_page:(s=(r=e==null?void 0:e.perPage)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:""},xform:dC});if(u.error)throw u.error;const d=await u.json(),f=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return m.length>0&&(m.forEach(v=>{const g=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(v.split(";")[1].split("=")[1]);c["".concat(y,"Page")]=g}),c.total=parseInt(f)),{data:Object.assign(Object.assign({},d),c),error:null}}catch(c){if(At(c))return{data:{clients:[]},error:c};throw c}}async _createOAuthClient(e){try{return await Ot(this.fetch,"POST","".concat(this.url,"/admin/oauth/clients"),{body:e,headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(At(t))return{data:null,error:t};throw t}}async _getOAuthClient(e){try{return await Ot(this.fetch,"GET","".concat(this.url,"/admin/oauth/clients/").concat(e),{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(At(t))return{data:null,error:t};throw t}}async _deleteOAuthClient(e){try{return await Ot(this.fetch,"DELETE","".concat(this.url,"/admin/oauth/clients/").concat(e),{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(At(t))return{data:null,error:t};throw t}}async _regenerateOAuthClientSecret(e){try{return await Ot(this.fetch,"POST","".concat(this.url,"/admin/oauth/clients/").concat(e,"/regenerate_secret"),{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(At(t))return{data:null,error:t};throw t}}}function fC(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}const pc={debug:!!(globalThis&&XO()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class KO extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class r6 extends KO{}async function s6(n,e,t){pc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const i=new globalThis.AbortController;return e>0&&setTimeout(()=>{i.abort(),pc.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async r=>{if(r){pc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,r.name);try{return await t()}finally{pc.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,r.name)}}else{if(e===0)throw pc.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new r6('Acquiring an exclusive Navigator LockManager lock "'.concat(n,'" immediately failed'));if(pc.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}function o6(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(n){typeof self<"u"&&(self.globalThis=self)}}function $O(n){if(!/^0x[a-fA-F0-9]{40}$/.test(n))throw new Error('@supabase/auth-js: Address "'.concat(n,'" is invalid.'));return n.toLowerCase()}function a6(n){return parseInt(n,16)}function l6(n){const e=new TextEncoder().encode(n);return"0x"+Array.from(e,i=>i.toString(16).padStart(2,"0")).join("")}function c6(n){var e;const{chainId:t,domain:i,expirationTime:r,issuedAt:s=new Date,nonce:o,notBefore:a,requestId:l,resources:c,scheme:u,uri:d,version:f}=n;{if(!Number.isInteger(t))throw new Error('@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: '.concat(t));if(!i)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error('@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: '.concat(o));if(!d)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(f!=="1")throw new Error("@supabase/auth-js: Invalid SIWE message field \"version\". Version must be '1'. Provided value: ".concat(f));if(!((e=n.statement)===null||e===void 0)&&e.includes("\n"))throw new Error("@supabase/auth-js: Invalid SIWE message field \"statement\". Statement must not include '\\n'. Provided value: ".concat(n.statement))}const m=$O(n.address),v=u?"".concat(u,"://").concat(i):i,g=n.statement?"".concat(n.statement,"\n"):"",y="".concat(v," wants you to sign in with your Ethereum account:\n").concat(m,"\n\n").concat(g);let b="URI: ".concat(d,"\nVersion: ").concat(f,"\nChain ID: ").concat(t).concat(o?"\nNonce: ".concat(o):"","\nIssued At: ").concat(s.toISOString());if(r&&(b+="\nExpiration Time: ".concat(r.toISOString())),a&&(b+="\nNot Before: ".concat(a.toISOString())),l&&(b+="\nRequest ID: ".concat(l)),c){let S="\nResources:";for(const x of c){if(!x||typeof x!="string")throw new Error('@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: '.concat(x));S+="\n- ".concat(x)}b+=S}return"".concat(y,"\n").concat(b)}class ri extends Error{constructor({message:e,code:t,cause:i,name:r}){var s;super(e,{cause:i}),this.__isWebAuthnError=!0,this.name=(s=r!=null?r:i instanceof Error?i.name:void 0)!==null&&s!==void 0?s:"Unknown Error",this.code=t}}class cg extends ri{constructor(e,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:e}),this.name="WebAuthnUnknownError",this.originalError=t}}function u6({error:n,options:e}){var t,i,r;const{publicKey:s}=e;if(!s)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(e.signal instanceof AbortSignal)return new ri({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else if(n.name==="ConstraintError"){if(((t=s.authenticatorSelection)===null||t===void 0?void 0:t.requireResidentKey)===!0)return new ri({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:n});if(e.mediation==="conditional"&&((i=s.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new ri({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:n});if(((r=s.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new ri({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:n})}else{if(n.name==="InvalidStateError")return new ri({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:n});if(n.name==="NotAllowedError")return new ri({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="NotSupportedError")return s.pubKeyCredParams.filter(a=>a.type==="public-key").length===0?new ri({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:n}):new ri({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:n});if(n.name==="SecurityError"){const o=window.location.hostname;if(QO(o)){if(s.rp.id!==o)return new ri({message:'The RP ID "'.concat(s.rp.id,'" is invalid for this domain'),code:"ERROR_INVALID_RP_ID",cause:n})}else return new ri({message:"".concat(window.location.hostname," is an invalid domain"),code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="TypeError"){if(s.user.id.byteLength<1||s.user.id.byteLength>64)return new ri({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:n})}else if(n.name==="UnknownError")return new ri({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new ri({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}function h6({error:n,options:e}){const{publicKey:t}=e;if(!t)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(e.signal instanceof AbortSignal)return new ri({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else{if(n.name==="NotAllowedError")return new ri({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="SecurityError"){const i=window.location.hostname;if(QO(i)){if(t.rpId!==i)return new ri({message:'The RP ID "'.concat(t.rpId,'" is invalid for this domain'),code:"ERROR_INVALID_RP_ID",cause:n})}else return new ri({message:"".concat(window.location.hostname," is an invalid domain"),code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="UnknownError")return new ri({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new ri({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}var JO=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t};class d6{createNewAbortSignal(){if(this.controller){const t=new Error("Cancelling existing WebAuthn API call for new one");t.name="AbortError",this.controller.abort(t)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const f6=new d6;function p6(n){if(!n)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(n);const{challenge:e,user:t,excludeCredentials:i}=n,r=JO(n,["challenge","user","excludeCredentials"]),s=Qc(e).buffer,o=Object.assign(Object.assign({},t),{id:Qc(t.id).buffer}),a=Object.assign(Object.assign({},r),{challenge:s,user:o});if(i&&i.length>0){a.excludeCredentials=new Array(i.length);for(let l=0;l<i.length;l++){const c=i[l];a.excludeCredentials[l]=Object.assign(Object.assign({},c),{id:Qc(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return a}function m6(n){if(!n)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(n);const{challenge:e,allowCredentials:t}=n,i=JO(n,["challenge","allowCredentials"]),r=Qc(e).buffer,s=Object.assign(Object.assign({},i),{challenge:r});if(t&&t.length>0){s.allowCredentials=new Array(t.length);for(let o=0;o<t.length;o++){const a=t[o];s.allowCredentials[o]=Object.assign(Object.assign({},a),{id:Qc(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return s}function g6(n){var e;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const t=n;return{id:n.id,rawId:n.id,response:{attestationObject:sl(new Uint8Array(n.response.attestationObject)),clientDataJSON:sl(new Uint8Array(n.response.clientDataJSON))},type:"public-key",clientExtensionResults:n.getClientExtensionResults(),authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function v6(n){var e;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const t=n,i=n.getClientExtensionResults(),r=n.response;return{id:n.id,rawId:n.id,response:{authenticatorData:sl(new Uint8Array(r.authenticatorData)),clientDataJSON:sl(new Uint8Array(r.clientDataJSON)),signature:sl(new Uint8Array(r.signature)),userHandle:r.userHandle?sl(new Uint8Array(r.userHandle)):void 0},type:"public-key",clientExtensionResults:i,authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function QO(n){return n==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(n)}function pC(){var n,e;return!!(wr()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((n=navigator==null?void 0:navigator.credentials)===null||n===void 0?void 0:n.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function _6(n){try{const e=await navigator.credentials.create(n);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new cg("Browser returned unexpected credential type",e)}:{data:null,error:new cg("Empty credential response",e)}}catch(e){return{data:null,error:u6({error:e,options:n})}}}async function y6(n){try{const e=await navigator.credentials.get(n);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new cg("Browser returned unexpected credential type",e)}:{data:null,error:new cg("Empty credential response",e)}}catch(e){return{data:null,error:h6({error:e,options:n})}}}const b6={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},w6={userVerification:"preferred",hints:["security-key"]};function ug(...n){const e=r=>r!==null&&typeof r=="object"&&!Array.isArray(r),t=r=>r instanceof ArrayBuffer||ArrayBuffer.isView(r),i={};for(const r of n)if(r)for(const s in r){const o=r[s];if(o!==void 0)if(Array.isArray(o))i[s]=o;else if(t(o))i[s]=o;else if(e(o)){const a=i[s];e(a)?i[s]=ug(a,o):i[s]=ug(o)}else i[s]=o}return i}function S6(n,e){return ug(b6,n,e||{})}function x6(n,e){return ug(w6,n,e||{})}class E6{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:t,friendlyName:i,signal:r},s){try{const{data:o,error:a}=await this.client.mfa.challenge({factorId:e,webauthn:t});if(!o)return{data:null,error:a};const l=r!=null?r:f6.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:c}=o.webauthn.credential_options.publicKey;c.name||(c.name="".concat(c.id,":").concat(i)),c.displayName||(c.displayName=c.name)}switch(o.webauthn.type){case"create":{const c=S6(o.webauthn.credential_options.publicKey,s==null?void 0:s.create),{data:u,error:d}=await _6({publicKey:c,signal:l});return u?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:u}},error:null}:{data:null,error:d}}case"request":{const c=x6(o.webauthn.credential_options.publicKey,s==null?void 0:s.request),{data:u,error:d}=await y6(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:c,signal:l}));return u?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:u}},error:null}:{data:null,error:d}}}}catch(o){return At(o)?{data:null,error:o}:{data:null,error:new nl("Unexpected error in challenge",o)}}}async _verify({challengeId:e,factorId:t,webauthn:i}){return this.client.mfa.verify({factorId:t,challengeId:e,webauthn:i})}async _authenticate({factorId:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:r}},s){if(!t)return{data:null,error:new wd("rpId is required for WebAuthn authentication")};try{if(!pC())return{data:null,error:new nl("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this.challenge({factorId:e,webauthn:{rpId:t,rpOrigins:i},signal:r},{request:s});if(!o)return{data:null,error:a};const{webauthn:l}=o;return this._verify({factorId:e,challengeId:o.challengeId,webauthn:{type:l.type,rpId:t,rpOrigins:i,credential_response:l.credential_response}})}catch(o){return At(o)?{data:null,error:o}:{data:null,error:new nl("Unexpected error in authenticate",o)}}}async _register({friendlyName:e,rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:r},s){if(!t)return{data:null,error:new wd("rpId is required for WebAuthn registration")};try{if(!pC())return{data:null,error:new nl("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this._enroll({friendlyName:e});if(!o)return await this.client.mfa.listFactors().then(u=>{var d;return(d=u.data)===null||d===void 0?void 0:d.all.find(f=>f.factor_type==="webauthn"&&f.friendly_name===e&&f.status!=="unverified")}).then(u=>u?this.client.mfa.unenroll({factorId:u==null?void 0:u.id}):void 0),{data:null,error:a};const{data:l,error:c}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:t,rpOrigins:i},signal:r},{create:s});return l?this._verify({factorId:o.id,challengeId:l.challengeId,webauthn:{rpId:t,rpOrigins:i,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:c}}catch(o){return At(o)?{data:null,error:o}:{data:null,error:new nl("Unexpected error in register",o)}}}}o6();const A6={url:b8,storageKey:w8,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:S8,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function mC(n,e,t){return await t()}const mc={};class Sd{get jwks(){var e,t;return(t=(e=mc[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){mc[this.storageKey]=Object.assign(Object.assign({},mc[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=mc[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){mc[this.storageKey]=Object.assign(Object.assign({},mc[this.storageKey]),{cachedAt:e})}constructor(e){var t,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Sd.nextInstanceID,Sd.nextInstanceID+=1,this.instanceID>0&&wr()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const r=Object.assign(Object.assign({},A6),e);if(this.logDebugMessages=!!r.debug,typeof r.debug=="function"&&(this.logger=r.debug),this.persistSession=r.persistSession,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.admin=new i6({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=YO(r.fetch),this.lock=r.lock||mC,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.hasCustomAuthorizationHeader=r.hasCustomAuthorizationHeader,r.lock?this.lock=r.lock:wr()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=s6:this.lock=mC,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new E6(this)},this.persistSession?(r.storage?this.storage=r.storage:XO()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=fC(this.memoryStorage)),r.userStorage&&(this.userStorage=r.userStorage)):(this.memoryStorage={},this.storage=fC(this.memoryStorage)),wr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger("GoTrueClient@".concat(this.instanceID," (").concat(WO,") ").concat(new Date().toISOString()),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=U8(window.location.href);let i="none";if(this._isImplicitGrantCallback(t)?i="implicit":await this._isPKCECallback(t)&&(i="pkce"),wr()&&this.detectSessionInUrl&&i!=="none"){const{data:r,error:s}=await this._getSessionFromURL(t,i);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),C8(s)){const l=(e=s.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:o,redirectType:a}=r;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return At(t)?{error:t}:{error:new nl("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,i,r;try{const s=await Ot(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,body:{data:(i=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.captchaToken}},xform:is}),{data:o,error:a}=s;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(s){if(At(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(e){var t,i,r;try{let s;if("email"in e){const{email:u,password:d,options:f}=e;let m=null,v=null;this.flowType==="pkce"&&([m,v]=await dc(this.storage,this.storageKey)),s=await Ot(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:u,password:d,data:(t=f==null?void 0:f.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:m,code_challenge_method:v},xform:is})}else if("phone"in e){const{phone:u,password:d,options:f}=e;s=await Ot(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,body:{phone:u,password:d,data:(i=f==null?void 0:f.data)!==null&&i!==void 0?i:{},channel:(r=f==null?void 0:f.channel)!==null&&r!==void 0?r:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:is})}else throw new Dp("You must provide either an email or phone number and a password");const{data:o,error:a}=s;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(s){if(At(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(e){try{let t;if("email"in e){const{email:s,password:o,options:a}=e;t=await Ot(this.fetch,"POST","".concat(this.url,"/token?grant_type=password"),{headers:this.headers,body:{email:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:hC})}else if("phone"in e){const{phone:s,password:o,options:a}=e;t=await Ot(this.fetch,"POST","".concat(this.url,"/token?grant_type=password"),{headers:this.headers,body:{phone:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:hC})}else throw new Dp("You must provide either an email or phone number and a password");const{data:i,error:r}=t;return r?{data:{user:null,session:null},error:r}:!i||!i.session||!i.user?{data:{user:null,session:null},error:new hc}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:r})}catch(t){if(At(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,i,r,s;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(i=e.options)===null||i===void 0?void 0:i.scopes,queryParams:(r=e.options)===null||r===void 0?void 0:r.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;switch(t){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error('@supabase/auth-js: Unsupported chain "'.concat(t,'"'))}}async signInWithEthereum(e){var t,i,r,s,o,a,l,c,u,d,f;let m,v;if("message"in e)m=e.message,v=e.signature;else{const{chain:g,wallet:y,statement:b,options:S}=e;let x;if(wr())if(typeof y=="object")x=y;else{const C=window;if("ethereum"in C&&typeof C.ethereum=="object"&&"request"in C.ethereum&&typeof C.ethereum.request=="function")x=C.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(S!=null&&S.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");x=y}const A=new URL((t=S==null?void 0:S.url)!==null&&t!==void 0?t:window.location.href),E=await x.request({method:"eth_requestAccounts"}).then(C=>C).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!E||E.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const M=$O(E[0]);let I=(i=S==null?void 0:S.signInWithEthereum)===null||i===void 0?void 0:i.chainId;if(!I){const C=await x.request({method:"eth_chainId"});I=a6(C)}const R={domain:A.host,address:M,statement:b,uri:A.href,version:"1",chainId:I,nonce:(r=S==null?void 0:S.signInWithEthereum)===null||r===void 0?void 0:r.nonce,issuedAt:(o=(s=S==null?void 0:S.signInWithEthereum)===null||s===void 0?void 0:s.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(a=S==null?void 0:S.signInWithEthereum)===null||a===void 0?void 0:a.expirationTime,notBefore:(l=S==null?void 0:S.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(c=S==null?void 0:S.signInWithEthereum)===null||c===void 0?void 0:c.requestId,resources:(u=S==null?void 0:S.signInWithEthereum)===null||u===void 0?void 0:u.resources};m=c6(R),v=await x.request({method:"personal_sign",params:[l6(m),M]})}try{const{data:g,error:y}=await Ot(this.fetch,"POST","".concat(this.url,"/token?grant_type=web3"),{headers:this.headers,body:Object.assign({chain:"ethereum",message:m,signature:v},!((d=e.options)===null||d===void 0)&&d.captchaToken?{gotrue_meta_security:{captcha_token:(f=e.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:is});if(y)throw y;return!g||!g.session||!g.user?{data:{user:null,session:null},error:new hc}:(g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),{data:Object.assign({},g),error:y})}catch(g){if(At(g))return{data:{user:null,session:null},error:g};throw g}}async signInWithSolana(e){var t,i,r,s,o,a,l,c,u,d,f,m;let v,g;if("message"in e)v=e.message,g=e.signature;else{const{chain:y,wallet:b,statement:S,options:x}=e;let A;if(wr())if(typeof b=="object")A=b;else{const M=window;if("solana"in M&&typeof M.solana=="object"&&("signIn"in M.solana&&typeof M.solana.signIn=="function"||"signMessage"in M.solana&&typeof M.solana.signMessage=="function"))A=M.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof b!="object"||!(x!=null&&x.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");A=b}const E=new URL((t=x==null?void 0:x.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in A&&A.signIn){const M=await A.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},x==null?void 0:x.signInWithSolana),{version:"1",domain:E.host,uri:E.href}),S?{statement:S}:null));let I;if(Array.isArray(M)&&M[0]&&typeof M[0]=="object")I=M[0];else if(M&&typeof M=="object"&&"signedMessage"in M&&"signature"in M)I=M;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in I&&"signature"in I&&(typeof I.signedMessage=="string"||I.signedMessage instanceof Uint8Array)&&I.signature instanceof Uint8Array)v=typeof I.signedMessage=="string"?I.signedMessage:new TextDecoder().decode(I.signedMessage),g=I.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in A)||typeof A.signMessage!="function"||!("publicKey"in A)||typeof A!="object"||!A.publicKey||!("toBase58"in A.publicKey)||typeof A.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=["".concat(E.host," wants you to sign in with your Solana account:"),A.publicKey.toBase58(),...S?["",S,""]:[""],"Version: 1","URI: ".concat(E.href),"Issued At: ".concat((r=(i=x==null?void 0:x.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&r!==void 0?r:new Date().toISOString()),...!((s=x==null?void 0:x.signInWithSolana)===null||s===void 0)&&s.notBefore?["Not Before: ".concat(x.signInWithSolana.notBefore)]:[],...!((o=x==null?void 0:x.signInWithSolana)===null||o===void 0)&&o.expirationTime?["Expiration Time: ".concat(x.signInWithSolana.expirationTime)]:[],...!((a=x==null?void 0:x.signInWithSolana)===null||a===void 0)&&a.chainId?["Chain ID: ".concat(x.signInWithSolana.chainId)]:[],...!((l=x==null?void 0:x.signInWithSolana)===null||l===void 0)&&l.nonce?["Nonce: ".concat(x.signInWithSolana.nonce)]:[],...!((c=x==null?void 0:x.signInWithSolana)===null||c===void 0)&&c.requestId?["Request ID: ".concat(x.signInWithSolana.requestId)]:[],...!((d=(u=x==null?void 0:x.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||d===void 0)&&d.length?["Resources",...x.signInWithSolana.resources.map(I=>"- ".concat(I))]:[]].join("\n");const M=await A.signMessage(new TextEncoder().encode(v),"utf8");if(!M||!(M instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=M}}try{const{data:y,error:b}=await Ot(this.fetch,"POST","".concat(this.url,"/token?grant_type=web3"),{headers:this.headers,body:Object.assign({chain:"solana",message:v,signature:sl(g)},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(m=e.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:is});if(b)throw b;return!y||!y.session||!y.user?{data:{user:null,session:null},error:new hc}:(y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),{data:Object.assign({},y),error:b})}catch(y){if(At(y))return{data:{user:null,session:null},error:y};throw y}}async _exchangeCodeForSession(e){const t=await ka(this.storage,"".concat(this.storageKey,"-code-verifier")),[i,r]=(t!=null?t:"").split("/");try{const{data:s,error:o}=await Ot(this.fetch,"POST","".concat(this.url,"/token?grant_type=pkce"),{headers:this.headers,body:{auth_code:e,code_verifier:i},xform:is});if(await So(this.storage,"".concat(this.storageKey,"-code-verifier")),o)throw o;return!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new hc}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:r!=null?r:null}),error:o})}catch(s){if(At(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}}async signInWithIdToken(e){try{const{options:t,provider:i,token:r,access_token:s,nonce:o}=e,a=await Ot(this.fetch,"POST","".concat(this.url,"/token?grant_type=id_token"),{headers:this.headers,body:{provider:i,id_token:r,access_token:s,nonce:o,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:is}),{data:l,error:c}=a;return c?{data:{user:null,session:null},error:c}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new hc}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:c})}catch(t){if(At(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,i,r,s,o;try{if("email"in e){const{email:a,options:l}=e;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await dc(this.storage,this.storageKey));const{error:d}=await Ot(this.fetch,"POST","".concat(this.url,"/otp"),{headers:this.headers,body:{email:a,data:(t=l==null?void 0:l.data)!==null&&t!==void 0?t:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:d}}if("phone"in e){const{phone:a,options:l}=e,{data:c,error:u}=await Ot(this.fetch,"POST","".concat(this.url,"/otp"),{headers:this.headers,body:{phone:a,data:(r=l==null?void 0:l.data)!==null&&r!==void 0?r:{},create_user:(s=l==null?void 0:l.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u}}throw new Dp("You must provide either an email or phone number.")}catch(a){if(At(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var t,i;try{let r,s;"options"in e&&(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo,s=(i=e.options)===null||i===void 0?void 0:i.captchaToken);const{data:o,error:a}=await Ot(this.fetch,"POST","".concat(this.url,"/verify"),{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:r,xform:is});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,c=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(r){if(At(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithSSO(e){var t,i,r;try{let s=null,o=null;return this.flowType==="pkce"&&([s,o]=await dc(this.storage,this.storageKey)),await Ot(this.fetch,"POST","".concat(this.url,"/sso"),{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(i=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&i!==void 0?i:void 0}),!((r=e==null?void 0:e.options)===null||r===void 0)&&r.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:o}),headers:this.headers,xform:Z8})}catch(s){if(At(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:i}=e;if(i)throw i;if(!t)throw new Po;const{error:r}=await Ot(this.fetch,"GET","".concat(this.url,"/reauthenticate"),{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:r}})}catch(e){if(At(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t="".concat(this.url,"/resend");if("email"in e){const{email:i,type:r,options:s}=e,{error:o}=await Ot(this.fetch,"POST",t,{headers:this.headers,body:{email:i,type:r,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:i,type:r,options:s}=e,{data:o,error:a}=await Ot(this.fetch,"POST",t,{headers:this.headers,body:{phone:i,type:r,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new Dp("You must provide either an email or phone number and a type")}catch(t){if(At(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await i,await t()))();return this.pendingInLock.push((async()=>{try{await r}catch(s){}})()),r}return await this.lock("lock:".concat(this.storageKey),e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=t();for(this.pendingInLock.push((async()=>{try{await i}catch(r){}})()),await i;this.pendingInLock.length;){const r=[...this.pendingInLock];await Promise.all(r),this.pendingInLock.splice(0,r.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await ka(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const i=e.expires_at?e.expires_at*1e3-Date.now()<e0:!1;if(this._debug("#__loadSession()","session has".concat(i?"":" not"," expired"),"expires_at",e.expires_at),!i){if(this.userStorage){const o=await ka(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=i0()}if(this.storage.isServer&&e.user){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,c,u)=>(!o&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,c,u))})}return{data:{session:e},error:null}}const{data:r,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Ot(this.fetch,"GET","".concat(this.url,"/user"),{headers:this.headers,jwt:e,xform:Uo}):await this._useSession(async t=>{var i,r,s;const{data:o,error:a}=t;if(a)throw a;return!(!((i=o.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Po}:await Ot(this.fetch,"GET","".concat(this.url,"/user"),{headers:this.headers,jwt:(s=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0,xform:Uo})})}catch(t){if(At(t))return T8(t)&&(await this._removeSession(),await So(this.storage,"".concat(this.storageKey,"-code-verifier"))),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async i=>{const{data:r,error:s}=i;if(s)throw s;if(!r.session)throw new Po;const o=r.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await dc(this.storage,this.storageKey));const{data:c,error:u}=await Ot(this.fetch,"PUT","".concat(this.url,"/user"),{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:Uo});if(u)throw u;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(i){if(At(i))return{data:{user:null},error:i};throw i}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Po;const t=Date.now()/1e3;let i=t,r=!0,s=null;const{payload:o}=n0(e.access_token);if(o.exp&&(i=o.exp,r=i<=t),r){const{data:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};s=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;s={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:i-t,expires_at:i},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(t){if(At(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var i;if(!e){const{data:o,error:a}=t;if(a)throw a;e=(i=o.session)!==null&&i!==void 0?i:void 0}if(!(e!=null&&e.refresh_token))throw new Po;const{data:r,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{user:null,session:null},error:s}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(At(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!wr())throw new Pp("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Pp(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new rC("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Pp("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new rC("No code detected.");const{data:S,error:x}=await this._exchangeCodeForSession(e.code);if(x)throw x;const A=new URL(window.location.href);return A.searchParams.delete("code"),window.history.replaceState(window.history.state,"",A.toString()),{data:{session:S.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:r,access_token:s,refresh_token:o,expires_in:a,expires_at:l,token_type:c}=e;if(!s||!a||!o||!c)throw new Pp("No session defined in URL");const u=Math.round(Date.now()/1e3),d=parseInt(a);let f=u+d;l&&(f=parseInt(l));const m=f-u;m*1e3<=Bc&&console.warn("@supabase/gotrue-js: Session as retrieved from URL expires in ".concat(m,"s, should have been closer to ").concat(d,"s"));const v=f-d;u-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,f,u):u-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,f,u);const{data:g,error:y}=await this._getUser(s);if(y)throw y;const b={provider_token:i,provider_refresh_token:r,access_token:s,expires_in:d,expires_at:f,refresh_token:o,token_type:c,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:b,redirectType:e.type},error:null}}catch(i){if(At(i))return{data:{session:null,redirectType:null},error:i};throw i}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await ka(this.storage,"".concat(this.storageKey,"-code-verifier"));return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var i;const{data:r,error:s}=t;if(s)return{error:s};const o=(i=r.session)===null||i===void 0?void 0:i.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(M8(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await So(this.storage,"".concat(this.storageKey,"-code-verifier"))),{error:null}})}onAuthStateChange(e){const t=k8(),i={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,i),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:i}}}async _emitInitialSession(e){return await this._useSession(async t=>{var i,r;try{const{data:{session:s},error:o}=t;if(o)throw o;await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,t={}){let i=null,r=null;this.flowType==="pkce"&&([i,r]=await dc(this.storage,this.storageKey,!0));try{return await Ot(this.fetch,"POST","".concat(this.url,"/recover"),{body:{email:e,code_challenge:i,code_challenge_method:r,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(s){if(At(s))return{data:null,error:s};throw s}}async getUserIdentities(){var e;try{const{data:t,error:i}=await this.getUser();if(i)throw i;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(At(t))return{data:null,error:t};throw t}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var t;try{const{data:i,error:r}=await this._useSession(async s=>{var o,a,l,c,u;const{data:d,error:f}=s;if(f)throw f;const m=await this._getUrlForProvider("".concat(this.url,"/user/identities/authorize"),e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await Ot(this.fetch,"GET",m,{headers:this.headers,jwt:(u=(c=d.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(r)throw r;return wr()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(i==null?void 0:i.url),{data:{provider:e.provider,url:i==null?void 0:i.url},error:null}}catch(i){if(At(i))return{data:{provider:e.provider,url:null},error:i};throw i}}async linkIdentityIdToken(e){return await this._useSession(async t=>{var i;try{const{error:r,data:{session:s}}=t;if(r)throw r;const{options:o,provider:a,token:l,access_token:c,nonce:u}=e,d=await Ot(this.fetch,"POST","".concat(this.url,"/token?grant_type=id_token"),{headers:this.headers,jwt:(i=s==null?void 0:s.access_token)!==null&&i!==void 0?i:void 0,body:{provider:a,id_token:l,access_token:c,nonce:u,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:is}),{data:f,error:m}=d;return m?{data:{user:null,session:null},error:m}:!f||!f.session||!f.user?{data:{user:null,session:null},error:new hc}:(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("USER_UPDATED",f.session)),{data:f,error:m})}catch(r){if(At(r))return{data:{user:null,session:null},error:r};throw r}})}async unlinkIdentity(e){try{return await this._useSession(async t=>{var i,r;const{data:s,error:o}=t;if(o)throw o;return await Ot(this.fetch,"DELETE","".concat(this.url,"/user/identities/").concat(e.identity_id),{headers:this.headers,jwt:(r=(i=s.session)===null||i===void 0?void 0:i.access_token)!==null&&r!==void 0?r:void 0})})}catch(t){if(At(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t="#_refreshAccessToken(".concat(e.substring(0,5),"...)");this._debug(t,"begin");try{const i=Date.now();return await B8(async r=>(r>0&&await F8(200*Math.pow(2,r-1)),this._debug(t,"refreshing attempt",r),await Ot(this.fetch,"POST","".concat(this.url,"/token?grant_type=refresh_token"),{body:{refresh_token:e},headers:this.headers,xform:is})),(r,s)=>{const o=200*Math.pow(2,r);return s&&t0(s)&&Date.now()+o-i<Bc})}catch(i){if(this._debug(t,"error",i),At(i))return{data:{session:null,user:null},error:i};throw i}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const i=await this._getUrlForProvider("".concat(this.url,"/authorize"),e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",i),wr()&&!t.skipBrowserRedirect&&window.location.assign(i),{data:{provider:e,url:i},error:null}}async _recoverAndRefresh(){var e,t;const i="#_recoverAndRefresh()";this._debug(i,"begin");try{const r=await ka(this.storage,this.storageKey);if(r&&this.userStorage){let o=await ka(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:r.user},await zc(this.userStorage,this.storageKey+"-user",o)),r.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:i0()}else if(r&&!r.user&&!r.user){const o=await ka(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(r.user=o.user,await So(this.storage,this.storageKey+"-user"),await zc(this.storage,this.storageKey,r)):r.user=i0()}if(this._debug(i,"session from storage",r),!this._isValidSession(r)){this._debug(i,"session is not valid"),r!==null&&await this._removeSession();return}const s=((t=r.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<e0;if(this._debug(i,"session has".concat(s?"":" not"," expired with margin of ").concat(e0,"s")),s){if(this.autoRefreshToken&&r.refresh_token){const{error:o}=await this._callRefreshToken(r.refresh_token);o&&(console.error(o),t0(o)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(r.user&&r.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(r.access_token);!a&&(o!=null&&o.user)?(r.user=o.user,await this._saveSession(r),await this._notifyAllSubscribers("SIGNED_IN",r)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(i,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(i,"error",r),console.error(r);return}finally{this._debug(i,"end")}}async _callRefreshToken(e){var t,i;if(!e)throw new Po;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r="#_callRefreshToken(".concat(e.substring(0,5),"...)");this._debug(r,"begin");try{this.refreshingDeferred=new vv;const{data:s,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!s.session)throw new Po;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const a={data:s.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(s){if(this._debug(r,"error",s),At(s)){const o={data:null,error:s};return t0(s)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(o),o}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(s),s}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,t,i=!0){const r="#_notifyAllSubscribers(".concat(e,")");this._debug(r,"begin",t,"broadcast = ".concat(i));try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:e,session:t});const s=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,t)}catch(l){s.push(l)}});if(await Promise.all(o),s.length>0){for(let a=0;a<s.length;a+=1)console.error(s[a]);throw s[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),i=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&t.user&&await zc(this.userStorage,this.storageKey+"-user",{user:t.user});const r=Object.assign({},t);delete r.user;const s=cC(r);await zc(this.storage,this.storageKey,s)}else{const r=cC(t);await zc(this.storage,this.storageKey,r)}}async _removeSession(){this._debug("#_removeSession()"),await So(this.storage,this.storageKey),await So(this.storage,this.storageKey+"-code-verifier"),await So(this.storage,this.storageKey+"-user"),this.userStorage&&await So(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&wr()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Bc);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:i}}=t;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const r=Math.floor((i.expires_at*1e3-e)/Bc);this._debug("#_autoRefreshTokenTick()","access token expires in ".concat(r," ticks, a tick lasts ").concat(Bc,"ms, refresh threshold is ").concat(aw," ticks")),r<=aw&&await this._callRefreshToken(i.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof KO)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!wr()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t="#_onVisibilityChanged(".concat(e,")");this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,i){const r=["provider=".concat(encodeURIComponent(t))];if(i!=null&&i.redirectTo&&r.push("redirect_to=".concat(encodeURIComponent(i.redirectTo))),i!=null&&i.scopes&&r.push("scopes=".concat(encodeURIComponent(i.scopes))),this.flowType==="pkce"){const[s,o]=await dc(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:"".concat(encodeURIComponent(s)),code_challenge_method:"".concat(encodeURIComponent(o))});r.push(a.toString())}if(i!=null&&i.queryParams){const s=new URLSearchParams(i.queryParams);r.push(s.toString())}return i!=null&&i.skipBrowserRedirect&&r.push("skip_http_redirect=".concat(i.skipBrowserRedirect)),"".concat(e,"?").concat(r.join("&"))}async _unenroll(e){try{return await this._useSession(async t=>{var i;const{data:r,error:s}=t;return s?{data:null,error:s}:await Ot(this.fetch,"DELETE","".concat(this.url,"/factors/").concat(e.factorId),{headers:this.headers,jwt:(i=r==null?void 0:r.session)===null||i===void 0?void 0:i.access_token})})}catch(t){if(At(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var i,r;const{data:s,error:o}=t;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:l,error:c}=await Ot(this.fetch,"POST","".concat(this.url,"/factors"),{body:a,headers:this.headers,jwt:(i=s==null?void 0:s.session)===null||i===void 0?void 0:i.access_token});return c?{data:null,error:c}:(e.factorType==="totp"&&l.type==="totp"&&(!((r=l==null?void 0:l.totp)===null||r===void 0)&&r.qr_code)&&(l.totp.qr_code="data:image/svg+xml;utf-8,".concat(l.totp.qr_code)),{data:l,error:null})})}catch(t){if(At(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var i;const{data:r,error:s}=t;if(s)return{data:null,error:s};const o=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?g6(e.webauthn.credential_response):v6(e.webauthn.credential_response)})}:{code:e.code}),{data:a,error:l}=await Ot(this.fetch,"POST","".concat(this.url,"/factors/").concat(e.factorId,"/verify"),{body:o,headers:this.headers,jwt:(i=r==null?void 0:r.session)===null||i===void 0?void 0:i.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:l})})}catch(t){if(At(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var i;const{data:r,error:s}=t;if(s)return{data:null,error:s};const o=await Ot(this.fetch,"POST","".concat(this.url,"/factors/").concat(e.factorId,"/challenge"),{body:e,headers:this.headers,jwt:(i=r==null?void 0:r.session)===null||i===void 0?void 0:i.access_token});if(o.error)return o;const{data:a}=o;if(a.type!=="webauthn")return{data:a,error:null};switch(a.webauthn.type){case"create":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:p6(a.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:m6(a.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(t){if(At(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:i}=await this._challenge({factorId:e.factorId});return i?{data:null,error:i}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){var e;const{data:{user:t},error:i}=await this.getUser();if(i)return{data:null,error:i};const r={all:[],phone:[],totp:[],webauthn:[]};for(const s of(e=t==null?void 0:t.factors)!==null&&e!==void 0?e:[])r.all.push(s),s.status==="verified"&&r[s.factor_type].push(s);return{data:r,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,i;const{data:{session:r},error:s}=e;if(s)return{data:null,error:s};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=n0(r.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((i=(t=r.user.factors)===null||t===void 0?void 0:t.filter(d=>d.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(l="aal2");const u=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(e,t={keys:[]}){let i=t.keys.find(a=>a.kid===e);if(i)return i;const r=Date.now();if(i=this.jwks.keys.find(a=>a.kid===e),i&&this.jwks_cached_at+E8>r)return i;const{data:s,error:o}=await Ot(this.fetch,"GET","".concat(this.url,"/.well-known/jwks.json"),{headers:this.headers});if(o)throw o;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=r,i=s.keys.find(a=>a.kid===e),!i)?null:i}async getClaims(e,t={}){try{let i=e;if(!i){const{data:m,error:v}=await this.getSession();if(v||!m.session)return{data:null,error:v};i=m.session.access_token}const{header:r,payload:s,signature:o,raw:{header:a,payload:l}}=n0(i);t!=null&&t.allowExpired||q8(s.exp);const c=!r.alg||r.alg.startsWith("HS")||!r.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(r.kid,t!=null&&t.keys?{keys:t.keys}:t==null?void 0:t.jwks);if(!c){const{error:m}=await this.getUser(i);if(m)throw m;return{data:{claims:s,header:r,signature:o},error:null}}const u=X8(r.alg),d=await crypto.subtle.importKey("jwk",c,u,!0,["verify"]);if(!await crypto.subtle.verify(u,d,o,O8("".concat(a,".").concat(l))))throw new uw("Invalid JWT signature");return{data:{claims:s,header:r,signature:o},error:null}}catch(i){if(At(i))return{data:null,error:i};throw i}}}Sd.nextInstanceID=0;const M6=Sd;class T6 extends M6{constructor(e){super(e)}}var C6=function(n,e,t,i){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(d){o(d)}}function l(u){try{c(i.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):r(u.value).then(a,l)}c((i=i.apply(n,e||[])).next())})};class R6{constructor(e,t,i){var r,s,o;this.supabaseUrl=e,this.supabaseKey=t;const a=y8(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);const l="sb-".concat(a.hostname.split(".")[0],"-auth-token"),c={db:c8,realtime:h8,auth:Object.assign(Object.assign({},u8),{storageKey:l}),global:l8},u=_8(i!=null?i:{},c);this.storageKey=(r=u.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(s=u.global.headers)!==null&&s!==void 0?s:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(d,f)=>{throw new Error("@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.".concat(String(f)," is not possible"))}})):this.auth=this._initSupabaseAuthClient((o=u.auth)!==null&&o!==void 0?o:{},this.headers,u.global.fetch),this.fetch=m8(t,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.rest=new Aj(new URL("rest/v1",a).href,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),this.storage=new s8(this.storageUrl.href,this.headers,this.fetch,i==null?void 0:i.storage),u.accessToken||this._listenForAuthEvents()}get functions(){return new mj(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},i={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,i)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){return C6(this,void 0,void 0,function*(){var e,t;if(this.accessToken)return yield this.accessToken();const{data:i}=yield this.auth.getSession();return(t=(e=i.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:i,storage:r,userStorage:s,storageKey:o,flowType:a,lock:l,debug:c},u,d){const f={Authorization:"Bearer ".concat(this.supabaseKey),apikey:"".concat(this.supabaseKey)};return new T6({url:this.authUrl.href,headers:Object.assign(Object.assign({},f),u),storageKey:o,autoRefreshToken:e,persistSession:t,detectSessionInUrl:i,storage:r,userStorage:s,flowType:a,lock:l,debug:c,fetch:d,hasCustomAuthorizationHeader:Object.keys(this.headers).some(m=>m.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new Gj(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,i)=>{this._handleTokenChanged(t,"CLIENT",i==null?void 0:i.access_token)})}_handleTokenChanged(e,t,i){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==i?(this.changedAccessToken=i,this.realtime.setAuth(i)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const qoe=(n,e,t)=>new R6(n,e,t);function I6(){if(typeof window<"u"||typeof process>"u")return!1;const n=process.version;if(n==null)return!1;const e=n.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}I6()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Ri=[];for(let n=0;n<256;++n)Ri.push((n+256).toString(16).slice(1));function D6(n,e=0){return(Ri[n[e+0]]+Ri[n[e+1]]+Ri[n[e+2]]+Ri[n[e+3]]+"-"+Ri[n[e+4]]+Ri[n[e+5]]+"-"+Ri[n[e+6]]+Ri[n[e+7]]+"-"+Ri[n[e+8]]+Ri[n[e+9]]+"-"+Ri[n[e+10]]+Ri[n[e+11]]+Ri[n[e+12]]+Ri[n[e+13]]+Ri[n[e+14]]+Ri[n[e+15]]).toLowerCase()}let s0;const P6=new Uint8Array(16);function O6(){if(!s0){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");s0=crypto.getRandomValues.bind(crypto)}return s0(P6)}const L6=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),gC={randomUUID:L6};function k6(n,e,t){var r,s,o;n=n||{};const i=(o=(s=n.random)!=null?s:(r=n.rng)==null?void 0:r.call(n))!=null?o:O6();if(i.length<16)throw new Error("Random bytes length must be >= 16");return i[6]=i[6]&15|64,i[8]=i[8]&63|128,D6(i)}function Xoe(n,e,t){return gC.randomUUID&&!n?gC.randomUUID():k6(n)}/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const ia="180",U6={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},N6={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},ZO=0,hw=1,eL=2,F6=3,B6=0,GS=1,tL=2,Ts=3,Us=0,mi=1,Ji=2,Ai=0,_l=1,dw=2,fw=3,pw=4,nL=5,No=100,iL=101,rL=102,sL=103,oL=104,aL=200,lL=201,cL=202,uL=203,hg=204,dg=205,hL=206,dL=207,fL=208,pL=209,mL=210,gL=211,vL=212,_L=213,yL=214,fg=0,pg=1,mg=2,Cl=3,gg=4,vg=5,_g=6,yg=7,ef=0,bL=1,wL=2,co=0,SL=1,xL=2,EL=3,AL=4,ML=5,TL=6,CL=7,mw="attached",RL="detached",Qo=300,mo=301,Zo=302,xd=303,Ed=304,Ru=306,Ad=1e3,ui=1001,Md=1002,gi=1003,VS=1004,z6=1004,Vc=1005,H6=1005,Zt=1006,Zh=1007,G6=1007,Ds=1008,gw=1008,Zn=1009,_v=1010,yv=1011,fu=1012,tf=1013,fs=1014,Gn=1015,Ii=1016,bv=1017,wv=1018,Rl=1020,WS=35902,jS=35899,qS=1021,XS=1022,hi=1023,pu=1026,Il=1027,nf=1028,rf=1029,YS=1030,Sv=1031,V6=1032,xv=1033,ed=33776,td=33777,nd=33778,id=33779,bg=35840,wg=35841,Sg=35842,xg=35843,Eg=36196,Ag=37492,Mg=37496,Tg=37808,Cg=37809,Rg=37810,Ig=37811,Dg=37812,Pg=37813,Og=37814,Lg=37815,kg=37816,Ug=37817,Ng=37818,Fg=37819,Bg=37820,zg=37821,Hg=36492,Gg=36494,Vg=36495,Wg=36283,jg=36284,qg=36285,Xg=36286,IL=2200,DL=2201,PL=2202,Td=2300,Yg=2301,Bm=2302,ol=2400,al=2401,Cd=2402,Ev=2500,KS=2501,W6=0,j6=1,q6=2,ra=3200,OL=3201,X6=3202,Y6=3203,sa=0,LL=1,as="",hn="srgb",Vr="srgb-linear",Rd="linear",wn="srgb",K6=0,Qa=7680,$6=7681,J6=7682,Q6=7683,Z6=34055,eq=34056,tq=5386,nq=512,iq=513,rq=514,sq=515,oq=516,aq=517,lq=518,vw=519,kL=512,UL=513,NL=514,$S=515,FL=516,BL=517,zL=518,HL=519,Id=35044,cq=35048,uq=35040,hq=35045,dq=35049,fq=35041,pq=35046,mq=35050,gq=35042,vq="100",_w="300 es",Mr=2e3,mu=2001,_q={COMPUTE:"compute",RENDER:"render"},yq={PERSPECTIVE:"perspective",LINEAR:"linear",FLAT:"flat"},bq={NORMAL:"normal",CENTROID:"centroid",SAMPLE:"sample",FIRST:"first",EITHER:"either"};class Pr{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){const i=this._listeners;return i===void 0?!1:i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){const i=this._listeners;if(i===void 0)return;const r=i[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){const t=this._listeners;if(t===void 0)return;const i=t[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}}const Li=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let vC=1234567;const yl=Math.PI/180,gu=180/Math.PI;function Cr(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Li[n&255]+Li[n>>8&255]+Li[n>>16&255]+Li[n>>24&255]+"-"+Li[e&255]+Li[e>>8&255]+"-"+Li[e>>16&15|64]+Li[e>>24&255]+"-"+Li[t&63|128]+Li[t>>8&255]+"-"+Li[t>>16&255]+Li[t>>24&255]+Li[i&255]+Li[i>>8&255]+Li[i>>16&255]+Li[i>>24&255]).toLowerCase()}function Ct(n,e,t){return Math.max(e,Math.min(t,n))}function JS(n,e){return(n%e+e)%e}function wq(n,e,t,i,r){return i+(n-e)*(r-i)/(t-e)}function Sq(n,e,t){return n!==e?(t-n)/(e-n):0}function rd(n,e,t){return(1-t)*n+t*e}function xq(n,e,t,i){return rd(n,e,1-Math.exp(-t*i))}function Eq(n,e=1){return e-Math.abs(JS(n,e*2)-e)}function Aq(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function Mq(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function Tq(n,e){return n+Math.floor(Math.random()*(e-n+1))}function Cq(n,e){return n+Math.random()*(e-n)}function Rq(n){return n*(.5-Math.random())}function Iq(n){n!==void 0&&(vC=n);let e=vC+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function Dq(n){return n*yl}function Pq(n){return n*gu}function Oq(n){return(n&n-1)===0&&n!==0}function Lq(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function kq(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function Uq(n,e,t,i,r){const s=Math.cos,o=Math.sin,a=s(t/2),l=o(t/2),c=s((e+i)/2),u=o((e+i)/2),d=s((e-i)/2),f=o((e-i)/2),m=s((i-e)/2),v=o((i-e)/2);switch(r){case"XYX":n.set(a*u,l*d,l*f,a*c);break;case"YZY":n.set(l*f,a*u,l*d,a*c);break;case"ZXZ":n.set(l*d,l*f,a*u,a*c);break;case"XZX":n.set(a*u,l*v,l*m,a*c);break;case"YXY":n.set(l*m,a*u,l*v,a*c);break;case"ZYZ":n.set(l*v,l*m,a*u,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function Qi(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function Nt(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const Nq={DEG2RAD:yl,RAD2DEG:gu,generateUUID:Cr,clamp:Ct,euclideanModulo:JS,mapLinear:wq,inverseLerp:Sq,lerp:rd,damp:xq,pingpong:Eq,smoothstep:Aq,smootherstep:Mq,randInt:Tq,randFloat:Cq,randFloatSpread:Rq,seededRandom:Iq,degToRad:Dq,radToDeg:Pq,isPowerOfTwo:Oq,ceilPowerOfTwo:Lq,floorPowerOfTwo:kq,setQuaternionFromProperEuler:Uq,normalize:Nt,denormalize:Qi};class Ue{constructor(e=0,t=0){Ue.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Ct(this.x,e.x,t.x),this.y=Ct(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=Ct(this.x,e,t),this.y=Ct(this.y,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Ct(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Ct(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*i-o*r+e.x,this.y=s*r+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class fr{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,s,o,a){let l=i[r+0],c=i[r+1],u=i[r+2],d=i[r+3];const f=s[o+0],m=s[o+1],v=s[o+2],g=s[o+3];if(a===0){e[t+0]=l,e[t+1]=c,e[t+2]=u,e[t+3]=d;return}if(a===1){e[t+0]=f,e[t+1]=m,e[t+2]=v,e[t+3]=g;return}if(d!==g||l!==f||c!==m||u!==v){let y=1-a;const b=l*f+c*m+u*v+d*g,S=b>=0?1:-1,x=1-b*b;if(x>Number.EPSILON){const E=Math.sqrt(x),M=Math.atan2(E,b*S);y=Math.sin(y*M)/E,a=Math.sin(a*M)/E}const A=a*S;if(l=l*y+f*A,c=c*y+m*A,u=u*y+v*A,d=d*y+g*A,y===1-a){const E=1/Math.sqrt(l*l+c*c+u*u+d*d);l*=E,c*=E,u*=E,d*=E}}e[t]=l,e[t+1]=c,e[t+2]=u,e[t+3]=d}static multiplyQuaternionsFlat(e,t,i,r,s,o){const a=i[r],l=i[r+1],c=i[r+2],u=i[r+3],d=s[o],f=s[o+1],m=s[o+2],v=s[o+3];return e[t]=a*v+u*d+l*m-c*f,e[t+1]=l*v+u*f+c*d-a*m,e[t+2]=c*v+u*m+a*f-l*d,e[t+3]=u*v-a*d-l*f-c*m,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const i=e._x,r=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,c=a(i/2),u=a(r/2),d=a(s/2),f=l(i/2),m=l(r/2),v=l(s/2);switch(o){case"XYZ":this._x=f*u*d+c*m*v,this._y=c*m*d-f*u*v,this._z=c*u*v+f*m*d,this._w=c*u*d-f*m*v;break;case"YXZ":this._x=f*u*d+c*m*v,this._y=c*m*d-f*u*v,this._z=c*u*v-f*m*d,this._w=c*u*d+f*m*v;break;case"ZXY":this._x=f*u*d-c*m*v,this._y=c*m*d+f*u*v,this._z=c*u*v+f*m*d,this._w=c*u*d-f*m*v;break;case"ZYX":this._x=f*u*d-c*m*v,this._y=c*m*d+f*u*v,this._z=c*u*v-f*m*d,this._w=c*u*d+f*m*v;break;case"YZX":this._x=f*u*d+c*m*v,this._y=c*m*d+f*u*v,this._z=c*u*v-f*m*d,this._w=c*u*d-f*m*v;break;case"XZY":this._x=f*u*d-c*m*v,this._y=c*m*d-f*u*v,this._z=c*u*v+f*m*d,this._w=c*u*d+f*m*v;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],s=t[8],o=t[1],a=t[5],l=t[9],c=t[2],u=t[6],d=t[10],f=i+a+d;if(f>0){const m=.5/Math.sqrt(f+1);this._w=.25/m,this._x=(u-l)*m,this._y=(s-c)*m,this._z=(o-r)*m}else if(i>a&&i>d){const m=2*Math.sqrt(1+i-a-d);this._w=(u-l)/m,this._x=.25*m,this._y=(r+o)/m,this._z=(s+c)/m}else if(a>d){const m=2*Math.sqrt(1+a-i-d);this._w=(s-c)/m,this._x=(r+o)/m,this._y=.25*m,this._z=(l+u)/m}else{const m=2*Math.sqrt(1+d-i-a);this._w=(o-r)/m,this._x=(s+c)/m,this._y=(l+u)/m,this._z=.25*m}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<1e-8?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Ct(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,s=e._z,o=e._w,a=t._x,l=t._y,c=t._z,u=t._w;return this._x=i*u+o*a+r*c-s*l,this._y=r*u+o*l+s*a-i*c,this._z=s*u+o*c+i*l-r*a,this._w=o*u-i*a-r*l-s*c,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,r=this._y,s=this._z,o=this._w;let a=o*e._w+i*e._x+r*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=i,this._y=r,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const m=1-t;return this._w=m*o+t*this._w,this._x=m*i+t*this._x,this._y=m*r+t*this._y,this._z=m*s+t*this._z,this.normalize(),this}const c=Math.sqrt(l),u=Math.atan2(c,a),d=Math.sin((1-t)*u)/c,f=Math.sin(t*u)/c;return this._w=o*d+this._w*f,this._x=i*d+this._x*f,this._y=r*d+this._y*f,this._z=s*d+this._z*f,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),i=Math.random(),r=Math.sqrt(1-i),s=Math.sqrt(i);return this.set(r*Math.sin(e),r*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class K{constructor(e=0,t=0,i=0){K.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(_C.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(_C.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=e.elements,o=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*o,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*o,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*o,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z,l=e.w,c=2*(o*r-a*i),u=2*(a*t-s*r),d=2*(s*i-o*t);return this.x=t+l*c+o*d-a*u,this.y=i+l*u+a*c-s*d,this.z=r+l*d+s*u-o*c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r,this.y=s[1]*t+s[5]*i+s[9]*r,this.z=s[2]*t+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Ct(this.x,e.x,t.x),this.y=Ct(this.y,e.y,t.y),this.z=Ct(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=Ct(this.x,e,t),this.y=Ct(this.y,e,t),this.z=Ct(this.z,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Ct(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=r*l-s*a,this.y=s*o-i*l,this.z=i*a-r*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return o0.copy(this).projectOnVector(e),this.sub(o0)}reflect(e){return this.sub(o0.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Ct(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,i=Math.sqrt(1-t*t);return this.x=i*Math.cos(e),this.y=t,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const o0=new K,_C=new fr;class kt{constructor(e,t,i,r,s,o,a,l,c){kt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,o,a,l,c)}set(e,t,i,r,s,o,a,l,c){const u=this.elements;return u[0]=e,u[1]=r,u[2]=a,u[3]=t,u[4]=s,u[5]=l,u[6]=i,u[7]=o,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[3],l=i[6],c=i[1],u=i[4],d=i[7],f=i[2],m=i[5],v=i[8],g=r[0],y=r[3],b=r[6],S=r[1],x=r[4],A=r[7],E=r[2],M=r[5],I=r[8];return s[0]=o*g+a*S+l*E,s[3]=o*y+a*x+l*M,s[6]=o*b+a*A+l*I,s[1]=c*g+u*S+d*E,s[4]=c*y+u*x+d*M,s[7]=c*b+u*A+d*I,s[2]=f*g+m*S+v*E,s[5]=f*y+m*x+v*M,s[8]=f*b+m*A+v*I,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8];return t*o*u-t*a*c-i*s*u+i*a*l+r*s*c-r*o*l}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=u*o-a*c,f=a*l-u*s,m=c*s-o*l,v=t*d+i*f+r*m;if(v===0)return this.set(0,0,0,0,0,0,0,0,0);const g=1/v;return e[0]=d*g,e[1]=(r*c-u*i)*g,e[2]=(a*i-r*o)*g,e[3]=f*g,e[4]=(u*t-r*l)*g,e[5]=(r*s-a*t)*g,e[6]=m*g,e[7]=(i*l-c*t)*g,e[8]=(o*t-i*s)*g,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,o,a){const l=Math.cos(s),c=Math.sin(s);return this.set(i*l,i*c,-i*(l*o+c*a)+o+e,-r*c,r*l,-r*(-c*o+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(a0.makeScale(e,t)),this}rotate(e){return this.premultiply(a0.makeRotation(-e)),this}translate(e,t){return this.premultiply(a0.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const a0=new kt;function GL(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const Fq={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Wc(n,e){return new Fq[n](e)}function Dd(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function VL(){const n=Dd("canvas");return n.style.display="block",n}const yC={};function Pd(n){n in yC||(yC[n]=!0,console.warn(n))}function Bq(n,e,t){return new Promise(function(i,r){function s(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:r();break;case n.TIMEOUT_EXPIRED:setTimeout(s,t);break;default:i()}}setTimeout(s,t)})}const bC=new kt().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),wC=new kt().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function zq(){const n={enabled:!0,workingColorSpace:Vr,spaces:{},convert:function(r,s,o){return this.enabled===!1||s===o||!s||!o||(this.spaces[s].transfer===wn&&(r.r=uo(r.r),r.g=uo(r.g),r.b=uo(r.b)),this.spaces[s].primaries!==this.spaces[o].primaries&&(r.applyMatrix3(this.spaces[s].toXYZ),r.applyMatrix3(this.spaces[o].fromXYZ)),this.spaces[o].transfer===wn&&(r.r=Zc(r.r),r.g=Zc(r.g),r.b=Zc(r.b))),r},workingToColorSpace:function(r,s){return this.convert(r,this.workingColorSpace,s)},colorSpaceToWorking:function(r,s){return this.convert(r,s,this.workingColorSpace)},getPrimaries:function(r){return this.spaces[r].primaries},getTransfer:function(r){return r===as?Rd:this.spaces[r].transfer},getToneMappingMode:function(r){return this.spaces[r].outputColorSpaceConfig.toneMappingMode||"standard"},getLuminanceCoefficients:function(r,s=this.workingColorSpace){return r.fromArray(this.spaces[s].luminanceCoefficients)},define:function(r){Object.assign(this.spaces,r)},_getMatrix:function(r,s,o){return r.copy(this.spaces[s].toXYZ).multiply(this.spaces[o].fromXYZ)},_getDrawingBufferColorSpace:function(r){return this.spaces[r].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(r=this.workingColorSpace){return this.spaces[r].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(r,s){return Pd("THREE.ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),n.workingToColorSpace(r,s)},toWorkingColorSpace:function(r,s){return Pd("THREE.ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),n.colorSpaceToWorking(r,s)}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],i=[.3127,.329];return n.define({[Vr]:{primaries:e,whitePoint:i,transfer:Rd,toXYZ:bC,fromXYZ:wC,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:hn},outputColorSpaceConfig:{drawingBufferColorSpace:hn}},[hn]:{primaries:e,whitePoint:i,transfer:wn,toXYZ:bC,fromXYZ:wC,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:hn}}}),n}const rn=zq();function uo(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function Zc(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let gc;class WL{static getDataURL(e,t="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let i;if(e instanceof HTMLCanvasElement)i=e;else{gc===void 0&&(gc=Dd("canvas")),gc.width=e.width,gc.height=e.height;const r=gc.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),i=gc}return i.toDataURL(t)}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=Dd("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=uo(s[o]/255)*255;return i.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(uo(t[i]/255)*255):t[i]=uo(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let Hq=0;class Ho{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:Hq++}),this.uuid=Cr(),this.data=e,this.dataReady=!0,this.version=0}getSize(e){const t=this.data;return typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement?e.set(t.videoWidth,t.videoHeight,0):t instanceof VideoFrame?e.set(t.displayHeight,t.displayWidth,0):t!==null?e.set(t.width,t.height,t.depth||0):e.set(0,0,0),e}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)r[o].isDataTexture?s.push(l0(r[o].image)):s.push(l0(r[o]))}else s=l0(r);i.url=s}return t||(e.images[this.uuid]=i),i}}function l0(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?WL.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Gq=0;const c0=new K;let En=class zm extends Pr{constructor(e=zm.DEFAULT_IMAGE,t=zm.DEFAULT_MAPPING,i=ui,r=ui,s=Zt,o=Ds,a=hi,l=Zn,c=zm.DEFAULT_ANISOTROPY,u=as){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Gq++}),this.uuid=Cr(),this.name="",this.source=new Ho(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=i,this.wrapT=r,this.magFilter=s,this.minFilter=o,this.anisotropy=c,this.format=a,this.internalFormat=null,this.type=l,this.offset=new Ue(0,0),this.repeat=new Ue(1,1),this.center=new Ue(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new kt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=u,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(e&&e.depth&&e.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(c0).x}get height(){return this.source.getSize(c0).y}get depth(){return this.source.getSize(c0).z}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.isArrayTexture=e.isArrayTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}setValues(e){for(const t in e){const i=e[t];if(i===void 0){console.warn("THREE.Texture.setValues(): parameter '".concat(t,"' has value of undefined."));continue}const r=this[t];if(r===void 0){console.warn("THREE.Texture.setValues(): property '".concat(t,"' does not exist."));continue}r&&i&&r.isVector2&&i.isVector2||r&&i&&r.isVector3&&i.isVector3||r&&i&&r.isMatrix3&&i.isMatrix3?r.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Qo)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Ad:e.x=e.x-Math.floor(e.x);break;case ui:e.x=e.x<0?0:1;break;case Md:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Ad:e.y=e.y-Math.floor(e.y);break;case ui:e.y=e.y<0?0:1;break;case Md:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}};En.DEFAULT_IMAGE=null;En.DEFAULT_MAPPING=Qo;En.DEFAULT_ANISOTROPY=1;class Jt{constructor(e=0,t=0,i=0,r=1){Jt.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*r+o[12]*s,this.y=o[1]*t+o[5]*i+o[9]*r+o[13]*s,this.z=o[2]*t+o[6]*i+o[10]*r+o[14]*s,this.w=o[3]*t+o[7]*i+o[11]*r+o[15]*s,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,s;const l=e.elements,c=l[0],u=l[4],d=l[8],f=l[1],m=l[5],v=l[9],g=l[2],y=l[6],b=l[10];if(Math.abs(u-f)<.01&&Math.abs(d-g)<.01&&Math.abs(v-y)<.01){if(Math.abs(u+f)<.1&&Math.abs(d+g)<.1&&Math.abs(v+y)<.1&&Math.abs(c+m+b-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const x=(c+1)/2,A=(m+1)/2,E=(b+1)/2,M=(u+f)/4,I=(d+g)/4,R=(v+y)/4;return x>A&&x>E?x<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(x),r=M/i,s=I/i):A>E?A<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(A),i=M/r,s=R/r):E<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(E),i=I/s,r=R/s),this.set(i,r,s,t),this}let S=Math.sqrt((y-v)*(y-v)+(d-g)*(d-g)+(f-u)*(f-u));return Math.abs(S)<.001&&(S=1),this.x=(y-v)/S,this.y=(d-g)/S,this.z=(f-u)/S,this.w=Math.acos((c+m+b-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Ct(this.x,e.x,t.x),this.y=Ct(this.y,e.y,t.y),this.z=Ct(this.z,e.z,t.z),this.w=Ct(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=Ct(this.x,e,t),this.y=Ct(this.y,e,t),this.z=Ct(this.z,e,t),this.w=Ct(this.w,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Ct(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class QS extends Pr{constructor(e=1,t=1,i={}){super(),i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Zt,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},i),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=i.depth,this.scissor=new Jt(0,0,e,t),this.scissorTest=!1,this.viewport=new Jt(0,0,e,t);const r={width:e,height:t,depth:i.depth},s=new En(r);this.textures=[];const o=i.count;for(let a=0;a<o;a++)this.textures[a]=s.clone(),this.textures[a].isRenderTargetTexture=!0,this.textures[a].renderTarget=this;this._setTextureOptions(i),this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=i.depthTexture,this.samples=i.samples,this.multiview=i.multiview}_setTextureOptions(e={}){const t={minFilter:Zt,generateMipmaps:!1,flipY:!1,internalFormat:null};e.mapping!==void 0&&(t.mapping=e.mapping),e.wrapS!==void 0&&(t.wrapS=e.wrapS),e.wrapT!==void 0&&(t.wrapT=e.wrapT),e.wrapR!==void 0&&(t.wrapR=e.wrapR),e.magFilter!==void 0&&(t.magFilter=e.magFilter),e.minFilter!==void 0&&(t.minFilter=e.minFilter),e.format!==void 0&&(t.format=e.format),e.type!==void 0&&(t.type=e.type),e.anisotropy!==void 0&&(t.anisotropy=e.anisotropy),e.colorSpace!==void 0&&(t.colorSpace=e.colorSpace),e.flipY!==void 0&&(t.flipY=e.flipY),e.generateMipmaps!==void 0&&(t.generateMipmaps=e.generateMipmaps),e.internalFormat!==void 0&&(t.internalFormat=e.internalFormat);for(let i=0;i<this.textures.length;i++)this.textures[i].setValues(t)}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,s=this.textures.length;r<s;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=i,this.textures[r].isArrayTexture=this.textures[r].image.depth>1;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,i=e.textures.length;t<i;t++){this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;const r=Object.assign({},e.textures[t].image);this.textures[t].source=new Ho(r)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class ni extends QS{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}}class Av extends En{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=gi,this.minFilter=gi,this.wrapR=ui,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class Vq extends ni{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new Av(null,e,t,i),this._setTextureOptions(r),this.texture.isRenderTargetTexture=!0}}class Mv extends En{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=gi,this.minFilter=gi,this.wrapR=ui,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Wq extends ni{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new Mv(null,e,t,i),this._setTextureOptions(r),this.texture.isRenderTargetTexture=!0}}class Hi{constructor(e=new K(1/0,1/0,1/0),t=new K(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(Zr.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(Zr.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=Zr.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0){const s=i.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let o=0,a=s.count;o<a;o++)e.isMesh===!0?e.getVertexPosition(o,Zr):Zr.fromBufferAttribute(s,o),Zr.applyMatrix4(e.matrixWorld),this.expandByPoint(Zr);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),Op.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),Op.copy(i.boundingBox)),Op.applyMatrix4(e.matrixWorld),this.union(Op)}const r=e.children;for(let s=0,o=r.length;s<o;s++)this.expandByObject(r[s],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,Zr),Zr.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Sh),Lp.subVectors(this.max,Sh),vc.subVectors(e.a,Sh),_c.subVectors(e.b,Sh),yc.subVectors(e.c,Sh),xo.subVectors(_c,vc),Eo.subVectors(yc,_c),Ua.subVectors(vc,yc);let t=[0,-xo.z,xo.y,0,-Eo.z,Eo.y,0,-Ua.z,Ua.y,xo.z,0,-xo.x,Eo.z,0,-Eo.x,Ua.z,0,-Ua.x,-xo.y,xo.x,0,-Eo.y,Eo.x,0,-Ua.y,Ua.x,0];return!u0(t,vc,_c,yc,Lp)||(t=[1,0,0,0,1,0,0,0,1],!u0(t,vc,_c,yc,Lp))?!1:(kp.crossVectors(xo,Eo),t=[kp.x,kp.y,kp.z],u0(t,vc,_c,yc,Lp))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Zr).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Zr).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:($s[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),$s[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),$s[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),$s[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),$s[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),$s[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),$s[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),$s[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints($s),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(e){return this.min.fromArray(e.min),this.max.fromArray(e.max),this}}const $s=[new K,new K,new K,new K,new K,new K,new K,new K],Zr=new K,Op=new Hi,vc=new K,_c=new K,yc=new K,xo=new K,Eo=new K,Ua=new K,Sh=new K,Lp=new K,kp=new K,Na=new K;function u0(n,e,t,i,r){for(let s=0,o=n.length-3;s<=o;s+=3){Na.fromArray(n,s);const a=r.x*Math.abs(Na.x)+r.y*Math.abs(Na.y)+r.z*Math.abs(Na.z),l=e.dot(Na),c=t.dot(Na),u=i.dot(Na);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>a)return!1}return!0}const jq=new Hi,xh=new K,h0=new K;class Pi{constructor(e=new K,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):jq.setFromPoints(e).getCenter(i);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;xh.subVectors(e,this.center);const t=xh.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=(i-this.radius)*.5;this.center.addScaledVector(xh,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(h0.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(xh.copy(e.center).add(h0)),this.expandByPoint(xh.copy(e.center).sub(h0))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(e){return this.radius=e.radius,this.center.fromArray(e.center),this}}const Js=new K,d0=new K,Up=new K,Ao=new K,f0=new K,Np=new K,p0=new K;class Iu{constructor(e=new K,t=new K(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Js)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Js.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Js.copy(this.origin).addScaledVector(this.direction,t),Js.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){d0.copy(e).add(t).multiplyScalar(.5),Up.copy(t).sub(e).normalize(),Ao.copy(this.origin).sub(d0);const s=e.distanceTo(t)*.5,o=-this.direction.dot(Up),a=Ao.dot(this.direction),l=-Ao.dot(Up),c=Ao.lengthSq(),u=Math.abs(1-o*o);let d,f,m,v;if(u>0)if(d=o*l-a,f=o*a-l,v=s*u,d>=0)if(f>=-v)if(f<=v){const g=1/u;d*=g,f*=g,m=d*(d+o*f+2*a)+f*(o*d+f+2*l)+c}else f=s,d=Math.max(0,-(o*f+a)),m=-d*d+f*(f+2*l)+c;else f=-s,d=Math.max(0,-(o*f+a)),m=-d*d+f*(f+2*l)+c;else f<=-v?(d=Math.max(0,-(-o*s+a)),f=d>0?-s:Math.min(Math.max(-s,-l),s),m=-d*d+f*(f+2*l)+c):f<=v?(d=0,f=Math.min(Math.max(-s,-l),s),m=f*(f+2*l)+c):(d=Math.max(0,-(o*s+a)),f=d>0?s:Math.min(Math.max(-s,-l),s),m=-d*d+f*(f+2*l)+c);else f=o>0?-s:s,d=Math.max(0,-(o*f+a)),m=-d*d+f*(f+2*l)+c;return i&&i.copy(this.origin).addScaledVector(this.direction,d),r&&r.copy(d0).addScaledVector(Up,f),m}intersectSphere(e,t){Js.subVectors(e.center,this.origin);const i=Js.dot(this.direction),r=Js.dot(Js)-i*i,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),a=i-o,l=i+o;return l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return e.radius<0?!1:this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,s,o,a,l;const c=1/this.direction.x,u=1/this.direction.y,d=1/this.direction.z,f=this.origin;return c>=0?(i=(e.min.x-f.x)*c,r=(e.max.x-f.x)*c):(i=(e.max.x-f.x)*c,r=(e.min.x-f.x)*c),u>=0?(s=(e.min.y-f.y)*u,o=(e.max.y-f.y)*u):(s=(e.max.y-f.y)*u,o=(e.min.y-f.y)*u),i>o||s>r||((s>i||isNaN(i))&&(i=s),(o<r||isNaN(r))&&(r=o),d>=0?(a=(e.min.z-f.z)*d,l=(e.max.z-f.z)*d):(a=(e.max.z-f.z)*d,l=(e.min.z-f.z)*d),i>l||a>r)||((a>i||i!==i)&&(i=a),(l<r||r!==r)&&(r=l),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,Js)!==null}intersectTriangle(e,t,i,r,s){f0.subVectors(t,e),Np.subVectors(i,e),p0.crossVectors(f0,Np);let o=this.direction.dot(p0),a;if(o>0){if(r)return null;a=1}else if(o<0)a=-1,o=-o;else return null;Ao.subVectors(this.origin,e);const l=a*this.direction.dot(Np.crossVectors(Ao,Np));if(l<0)return null;const c=a*this.direction.dot(f0.cross(Ao));if(c<0||l+c>o)return null;const u=-a*Ao.dot(p0);return u<0?null:this.at(u/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Rt{constructor(e,t,i,r,s,o,a,l,c,u,d,f,m,v,g,y){Rt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,o,a,l,c,u,d,f,m,v,g,y)}set(e,t,i,r,s,o,a,l,c,u,d,f,m,v,g,y){const b=this.elements;return b[0]=e,b[4]=t,b[8]=i,b[12]=r,b[1]=s,b[5]=o,b[9]=a,b[13]=l,b[2]=c,b[6]=u,b[10]=d,b[14]=f,b[3]=m,b[7]=v,b[11]=g,b[15]=y,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Rt().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/bc.setFromMatrixColumn(e,0).length(),s=1/bc.setFromMatrixColumn(e,1).length(),o=1/bc.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*o,t[9]=i[9]*o,t[10]=i[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,r=e.y,s=e.z,o=Math.cos(i),a=Math.sin(i),l=Math.cos(r),c=Math.sin(r),u=Math.cos(s),d=Math.sin(s);if(e.order==="XYZ"){const f=o*u,m=o*d,v=a*u,g=a*d;t[0]=l*u,t[4]=-l*d,t[8]=c,t[1]=m+v*c,t[5]=f-g*c,t[9]=-a*l,t[2]=g-f*c,t[6]=v+m*c,t[10]=o*l}else if(e.order==="YXZ"){const f=l*u,m=l*d,v=c*u,g=c*d;t[0]=f+g*a,t[4]=v*a-m,t[8]=o*c,t[1]=o*d,t[5]=o*u,t[9]=-a,t[2]=m*a-v,t[6]=g+f*a,t[10]=o*l}else if(e.order==="ZXY"){const f=l*u,m=l*d,v=c*u,g=c*d;t[0]=f-g*a,t[4]=-o*d,t[8]=v+m*a,t[1]=m+v*a,t[5]=o*u,t[9]=g-f*a,t[2]=-o*c,t[6]=a,t[10]=o*l}else if(e.order==="ZYX"){const f=o*u,m=o*d,v=a*u,g=a*d;t[0]=l*u,t[4]=v*c-m,t[8]=f*c+g,t[1]=l*d,t[5]=g*c+f,t[9]=m*c-v,t[2]=-c,t[6]=a*l,t[10]=o*l}else if(e.order==="YZX"){const f=o*l,m=o*c,v=a*l,g=a*c;t[0]=l*u,t[4]=g-f*d,t[8]=v*d+m,t[1]=d,t[5]=o*u,t[9]=-a*u,t[2]=-c*u,t[6]=m*d+v,t[10]=f-g*d}else if(e.order==="XZY"){const f=o*l,m=o*c,v=a*l,g=a*c;t[0]=l*u,t[4]=-d,t[8]=c*u,t[1]=f*d+g,t[5]=o*u,t[9]=m*d-v,t[2]=v*d-m,t[6]=a*u,t[10]=g*d+f}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(qq,e,Xq)}lookAt(e,t,i){const r=this.elements;return yr.subVectors(e,t),yr.lengthSq()===0&&(yr.z=1),yr.normalize(),Mo.crossVectors(i,yr),Mo.lengthSq()===0&&(Math.abs(i.z)===1?yr.x+=1e-4:yr.z+=1e-4,yr.normalize(),Mo.crossVectors(i,yr)),Mo.normalize(),Fp.crossVectors(yr,Mo),r[0]=Mo.x,r[4]=Fp.x,r[8]=yr.x,r[1]=Mo.y,r[5]=Fp.y,r[9]=yr.y,r[2]=Mo.z,r[6]=Fp.z,r[10]=yr.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[4],l=i[8],c=i[12],u=i[1],d=i[5],f=i[9],m=i[13],v=i[2],g=i[6],y=i[10],b=i[14],S=i[3],x=i[7],A=i[11],E=i[15],M=r[0],I=r[4],R=r[8],C=r[12],D=r[1],L=r[5],z=r[9],G=r[13],H=r[2],J=r[6],k=r[10],X=r[14],W=r[3],ie=r[7],se=r[11],ye=r[15];return s[0]=o*M+a*D+l*H+c*W,s[4]=o*I+a*L+l*J+c*ie,s[8]=o*R+a*z+l*k+c*se,s[12]=o*C+a*G+l*X+c*ye,s[1]=u*M+d*D+f*H+m*W,s[5]=u*I+d*L+f*J+m*ie,s[9]=u*R+d*z+f*k+m*se,s[13]=u*C+d*G+f*X+m*ye,s[2]=v*M+g*D+y*H+b*W,s[6]=v*I+g*L+y*J+b*ie,s[10]=v*R+g*z+y*k+b*se,s[14]=v*C+g*G+y*X+b*ye,s[3]=S*M+x*D+A*H+E*W,s[7]=S*I+x*L+A*J+E*ie,s[11]=S*R+x*z+A*k+E*se,s[15]=S*C+x*G+A*X+E*ye,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],o=e[1],a=e[5],l=e[9],c=e[13],u=e[2],d=e[6],f=e[10],m=e[14],v=e[3],g=e[7],y=e[11],b=e[15];return v*(+s*l*d-r*c*d-s*a*f+i*c*f+r*a*m-i*l*m)+g*(+t*l*m-t*c*f+s*o*f-r*o*m+r*c*u-s*l*u)+y*(+t*c*d-t*a*m-s*o*d+i*o*m+s*a*u-i*c*u)+b*(-r*a*u-t*l*d+t*a*f+r*o*d-i*o*f+i*l*u)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=e[9],f=e[10],m=e[11],v=e[12],g=e[13],y=e[14],b=e[15],S=d*y*c-g*f*c+g*l*m-a*y*m-d*l*b+a*f*b,x=v*f*c-u*y*c-v*l*m+o*y*m+u*l*b-o*f*b,A=u*g*c-v*d*c+v*a*m-o*g*m-u*a*b+o*d*b,E=v*d*l-u*g*l-v*a*f+o*g*f+u*a*y-o*d*y,M=t*S+i*x+r*A+s*E;if(M===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const I=1/M;return e[0]=S*I,e[1]=(g*f*s-d*y*s-g*r*m+i*y*m+d*r*b-i*f*b)*I,e[2]=(a*y*s-g*l*s+g*r*c-i*y*c-a*r*b+i*l*b)*I,e[3]=(d*l*s-a*f*s-d*r*c+i*f*c+a*r*m-i*l*m)*I,e[4]=x*I,e[5]=(u*y*s-v*f*s+v*r*m-t*y*m-u*r*b+t*f*b)*I,e[6]=(v*l*s-o*y*s-v*r*c+t*y*c+o*r*b-t*l*b)*I,e[7]=(o*f*s-u*l*s+u*r*c-t*f*c-o*r*m+t*l*m)*I,e[8]=A*I,e[9]=(v*d*s-u*g*s-v*i*m+t*g*m+u*i*b-t*d*b)*I,e[10]=(o*g*s-v*a*s+v*i*c-t*g*c-o*i*b+t*a*b)*I,e[11]=(u*a*s-o*d*s-u*i*c+t*d*c+o*i*m-t*a*m)*I,e[12]=E*I,e[13]=(u*g*r-v*d*r+v*i*f-t*g*f-u*i*y+t*d*y)*I,e[14]=(v*a*r-o*g*r-v*i*l+t*g*l+o*i*y-t*a*y)*I,e[15]=(o*d*r-u*a*r+u*i*l-t*d*l-o*i*f+t*a*f)*I,this}scale(e){const t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),s=1-i,o=e.x,a=e.y,l=e.z,c=s*o,u=s*a;return this.set(c*o+i,c*a-r*l,c*l+r*a,0,c*a+r*l,u*a+i,u*l-r*o,0,c*l-r*a,u*l+r*o,s*l*l+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,s,o){return this.set(1,i,s,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,c=s+s,u=o+o,d=a+a,f=s*c,m=s*u,v=s*d,g=o*u,y=o*d,b=a*d,S=l*c,x=l*u,A=l*d,E=i.x,M=i.y,I=i.z;return r[0]=(1-(g+b))*E,r[1]=(m+A)*E,r[2]=(v-x)*E,r[3]=0,r[4]=(m-A)*M,r[5]=(1-(f+b))*M,r[6]=(y+S)*M,r[7]=0,r[8]=(v+x)*I,r[9]=(y-S)*I,r[10]=(1-(f+g))*I,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let s=bc.set(r[0],r[1],r[2]).length();const o=bc.set(r[4],r[5],r[6]).length(),a=bc.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],es.copy(this);const c=1/s,u=1/o,d=1/a;return es.elements[0]*=c,es.elements[1]*=c,es.elements[2]*=c,es.elements[4]*=u,es.elements[5]*=u,es.elements[6]*=u,es.elements[8]*=d,es.elements[9]*=d,es.elements[10]*=d,t.setFromRotationMatrix(es),i.x=s,i.y=o,i.z=a,this}makePerspective(e,t,i,r,s,o,a=Mr,l=!1){const c=this.elements,u=2*s/(t-e),d=2*s/(i-r),f=(t+e)/(t-e),m=(i+r)/(i-r);let v,g;if(l)v=s/(o-s),g=o*s/(o-s);else if(a===Mr)v=-(o+s)/(o-s),g=-2*o*s/(o-s);else if(a===mu)v=-o/(o-s),g=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return c[0]=u,c[4]=0,c[8]=f,c[12]=0,c[1]=0,c[5]=d,c[9]=m,c[13]=0,c[2]=0,c[6]=0,c[10]=v,c[14]=g,c[3]=0,c[7]=0,c[11]=-1,c[15]=0,this}makeOrthographic(e,t,i,r,s,o,a=Mr,l=!1){const c=this.elements,u=2/(t-e),d=2/(i-r),f=-(t+e)/(t-e),m=-(i+r)/(i-r);let v,g;if(l)v=1/(o-s),g=o/(o-s);else if(a===Mr)v=-2/(o-s),g=-(o+s)/(o-s);else if(a===mu)v=-1/(o-s),g=-s/(o-s);else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return c[0]=u,c[4]=0,c[8]=0,c[12]=f,c[1]=0,c[5]=d,c[9]=0,c[13]=m,c[2]=0,c[6]=0,c[10]=v,c[14]=g,c[3]=0,c[7]=0,c[11]=0,c[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const bc=new K,es=new Rt,qq=new K(0,0,0),Xq=new K(1,1,1),Mo=new K,Fp=new K,yr=new K,SC=new Rt,xC=new fr;let ps=class jL{constructor(e=0,t=0,i=0,r=jL.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,r=this._order){return this._x=e,this._y=t,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const r=e.elements,s=r[0],o=r[4],a=r[8],l=r[1],c=r[5],u=r[9],d=r[2],f=r[6],m=r[10];switch(t){case"XYZ":this._y=Math.asin(Ct(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-u,m),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(f,c),this._z=0);break;case"YXZ":this._x=Math.asin(-Ct(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(a,m),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-d,s),this._z=0);break;case"ZXY":this._x=Math.asin(Ct(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-d,m),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-Ct(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(f,m),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin(Ct(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-d,s)):(this._x=0,this._y=Math.atan2(a,m));break;case"XZY":this._z=Math.asin(-Ct(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(f,c),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-u,m),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return SC.makeRotationFromQuaternion(e),this.setFromRotationMatrix(SC,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return xC.setFromEuler(this),this.setFromQuaternion(xC,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}};ps.DEFAULT_ORDER="XYZ";class Tv{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let Yq=0;const EC=new K,wc=new fr,Qs=new Rt,Bp=new K,Eh=new K,Kq=new K,$q=new fr,AC=new K(1,0,0),MC=new K(0,1,0),TC=new K(0,0,1),CC={type:"added"},Jq={type:"removed"},Sc={type:"childadded",child:null},m0={type:"childremoved",child:null};class an extends Pr{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Yq++}),this.uuid=Cr(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=an.DEFAULT_UP.clone();const e=new K,t=new ps,i=new fr,r=new K(1,1,1);function s(){i.setFromEuler(t,!1)}function o(){t.setFromQuaternion(i,void 0,!1)}t._onChange(s),i._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Rt},normalMatrix:{value:new kt}}),this.matrix=new Rt,this.matrixWorld=new Rt,this.matrixAutoUpdate=an.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=an.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Tv,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return wc.setFromAxisAngle(e,t),this.quaternion.multiply(wc),this}rotateOnWorldAxis(e,t){return wc.setFromAxisAngle(e,t),this.quaternion.premultiply(wc),this}rotateX(e){return this.rotateOnAxis(AC,e)}rotateY(e){return this.rotateOnAxis(MC,e)}rotateZ(e){return this.rotateOnAxis(TC,e)}translateOnAxis(e,t){return EC.copy(e).applyQuaternion(this.quaternion),this.position.add(EC.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(AC,e)}translateY(e){return this.translateOnAxis(MC,e)}translateZ(e){return this.translateOnAxis(TC,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Qs.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?Bp.copy(e):Bp.set(e,t,i);const r=this.parent;this.updateWorldMatrix(!0,!1),Eh.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Qs.lookAt(Eh,Bp,this.up):Qs.lookAt(Bp,Eh,this.up),this.quaternion.setFromRotationMatrix(Qs),r&&(Qs.extractRotation(r.matrixWorld),wc.setFromRotationMatrix(Qs),this.quaternion.premultiply(wc.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(CC),Sc.child=e,this.dispatchEvent(Sc),Sc.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(Jq),m0.child=e,this.dispatchEvent(m0),m0.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Qs.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Qs.multiply(e.parent.matrixWorld)),e.applyMatrix4(Qs),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(CC),Sc.child=e,this.dispatchEvent(Sc),Sc.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,r=this.children.length;i<r;i++){const o=this.children[i].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t,i=[]){this[e]===t&&i.push(this);const r=this.children;for(let s=0,o=r.length;s<o;s++)r[s].getObjectsByProperty(e,t,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Eh,e,Kq),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Eh,$q,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].updateMatrixWorld(e)}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const r=this.children;for(let s=0,o=r.length;s<o;s++)r[s].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.geometryInfo=this._geometryInfo.map(a=>({...a,boundingBox:a.boundingBox?a.boundingBox.toJSON():void 0,boundingSphere:a.boundingSphere?a.boundingSphere.toJSON():void 0})),r.instanceInfo=this._instanceInfo.map(a=>({...a})),r.availableInstanceIds=this._availableInstanceIds.slice(),r.availableGeometryIds=this._availableGeometryIds.slice(),r.nextIndexStart=this._nextIndexStart,r.nextVertexStart=this._nextVertexStart,r.geometryCount=this._geometryCount,r.maxInstanceCount=this._maxInstanceCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.matricesTexture=this._matricesTexture.toJSON(e),r.indirectTexture=this._indirectTexture.toJSON(e),this._colorsTexture!==null&&(r.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(r.boundingSphere=this.boundingSphere.toJSON()),this.boundingBox!==null&&(r.boundingBox=this.boundingBox.toJSON()));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let c=0,u=l.length;c<u;c++){const d=l[c];s(e.shapes,d)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,c=this.material.length;l<c;l++)a.push(s(e.materials,this.material[l]));r.material=a}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let a=0;a<this.children.length;a++)r.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];r.animations.push(s(e.animations,l))}}if(t){const a=o(e.geometries),l=o(e.materials),c=o(e.textures),u=o(e.images),d=o(e.shapes),f=o(e.skeletons),m=o(e.animations),v=o(e.nodes);a.length>0&&(i.geometries=a),l.length>0&&(i.materials=l),c.length>0&&(i.textures=c),u.length>0&&(i.images=u),d.length>0&&(i.shapes=d),f.length>0&&(i.skeletons=f),m.length>0&&(i.animations=m),v.length>0&&(i.nodes=v)}return i.object=r,i;function o(a){const l=[];for(const c in a){const u=a[c];delete u.metadata,l.push(u)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const r=e.children[i];this.add(r.clone())}return this}}an.DEFAULT_UP=new K(0,1,0);an.DEFAULT_MATRIX_AUTO_UPDATE=!0;an.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const ts=new K,Zs=new K,g0=new K,eo=new K,xc=new K,Ec=new K,RC=new K,v0=new K,_0=new K,y0=new K,b0=new Jt,w0=new Jt,S0=new Jt;class lr{constructor(e=new K,t=new K,i=new K){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),ts.subVectors(e,t),r.cross(ts);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,i,r,s){ts.subVectors(r,t),Zs.subVectors(i,t),g0.subVectors(e,t);const o=ts.dot(ts),a=ts.dot(Zs),l=ts.dot(g0),c=Zs.dot(Zs),u=Zs.dot(g0),d=o*c-a*a;if(d===0)return s.set(0,0,0),null;const f=1/d,m=(c*l-a*u)*f,v=(o*u-a*l)*f;return s.set(1-m-v,v,m)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,eo)===null?!1:eo.x>=0&&eo.y>=0&&eo.x+eo.y<=1}static getInterpolation(e,t,i,r,s,o,a,l){return this.getBarycoord(e,t,i,r,eo)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(s,eo.x),l.addScaledVector(o,eo.y),l.addScaledVector(a,eo.z),l)}static getInterpolatedAttribute(e,t,i,r,s,o){return b0.setScalar(0),w0.setScalar(0),S0.setScalar(0),b0.fromBufferAttribute(e,t),w0.fromBufferAttribute(e,i),S0.fromBufferAttribute(e,r),o.setScalar(0),o.addScaledVector(b0,s.x),o.addScaledVector(w0,s.y),o.addScaledVector(S0,s.z),o}static isFrontFacing(e,t,i,r){return ts.subVectors(i,t),Zs.subVectors(e,t),ts.cross(Zs).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return ts.subVectors(this.c,this.b),Zs.subVectors(this.a,this.b),ts.cross(Zs).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return lr.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return lr.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,i,r,s){return lr.getInterpolation(e,this.a,this.b,this.c,t,i,r,s)}containsPoint(e){return lr.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return lr.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,s=this.c;let o,a;xc.subVectors(r,i),Ec.subVectors(s,i),v0.subVectors(e,i);const l=xc.dot(v0),c=Ec.dot(v0);if(l<=0&&c<=0)return t.copy(i);_0.subVectors(e,r);const u=xc.dot(_0),d=Ec.dot(_0);if(u>=0&&d<=u)return t.copy(r);const f=l*d-u*c;if(f<=0&&l>=0&&u<=0)return o=l/(l-u),t.copy(i).addScaledVector(xc,o);y0.subVectors(e,s);const m=xc.dot(y0),v=Ec.dot(y0);if(v>=0&&m<=v)return t.copy(s);const g=m*c-l*v;if(g<=0&&c>=0&&v<=0)return a=c/(c-v),t.copy(i).addScaledVector(Ec,a);const y=u*v-m*d;if(y<=0&&d-u>=0&&m-v>=0)return RC.subVectors(s,r),a=(d-u)/(d-u+(m-v)),t.copy(r).addScaledVector(RC,a);const b=1/(y+g+f);return o=g*b,a=f*b,t.copy(i).addScaledVector(xc,o).addScaledVector(Ec,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const qL={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},To={h:0,s:0,l:0},zp={h:0,s:0,l:0};function x0(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}class at{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(t===void 0&&i===void 0){const r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=hn){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,rn.colorSpaceToWorking(this,t),this}setRGB(e,t,i,r=rn.workingColorSpace){return this.r=e,this.g=t,this.b=i,rn.colorSpaceToWorking(this,r),this}setHSL(e,t,i,r=rn.workingColorSpace){if(e=JS(e,1),t=Ct(t,0,1),i=Ct(i,0,1),t===0)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+t):i+t-i*t,o=2*i-s;this.r=x0(o,s,e+1/3),this.g=x0(o,s,e),this.b=x0(o,s,e-1/3)}return rn.colorSpaceToWorking(this,r),this}setStyle(e,t=hn){function i(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=r[1],a=r[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=hn){const i=qL[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=uo(e.r),this.g=uo(e.g),this.b=uo(e.b),this}copyLinearToSRGB(e){return this.r=Zc(e.r),this.g=Zc(e.g),this.b=Zc(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=hn){return rn.workingToColorSpace(ki.copy(this),e),Math.round(Ct(ki.r*255,0,255))*65536+Math.round(Ct(ki.g*255,0,255))*256+Math.round(Ct(ki.b*255,0,255))}getHexString(e=hn){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=rn.workingColorSpace){rn.workingToColorSpace(ki.copy(this),t);const i=ki.r,r=ki.g,s=ki.b,o=Math.max(i,r,s),a=Math.min(i,r,s);let l,c;const u=(a+o)/2;if(a===o)l=0,c=0;else{const d=o-a;switch(c=u<=.5?d/(o+a):d/(2-o-a),o){case i:l=(r-s)/d+(r<s?6:0);break;case r:l=(s-i)/d+2;break;case s:l=(i-r)/d+4;break}l/=6}return e.h=l,e.s=c,e.l=u,e}getRGB(e,t=rn.workingColorSpace){return rn.workingToColorSpace(ki.copy(this),t),e.r=ki.r,e.g=ki.g,e.b=ki.b,e}getStyle(e=hn){rn.workingToColorSpace(ki.copy(this),e);const t=ki.r,i=ki.g,r=ki.b;return e!==hn?"color(".concat(e," ").concat(t.toFixed(3)," ").concat(i.toFixed(3)," ").concat(r.toFixed(3),")"):"rgb(".concat(Math.round(t*255),",").concat(Math.round(i*255),",").concat(Math.round(r*255),")")}offsetHSL(e,t,i){return this.getHSL(To),this.setHSL(To.h+e,To.s+t,To.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(To),e.getHSL(zp);const i=rd(To.h,zp.h,t),r=rd(To.s,zp.s,t),s=rd(To.l,zp.l,t);return this.setHSL(i,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,r=this.b,s=e.elements;return this.r=s[0]*t+s[3]*i+s[6]*r,this.g=s[1]*t+s[4]*i+s[7]*r,this.b=s[2]*t+s[5]*i+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const ki=new at;at.NAMES=qL;let Qq=0;class Ti extends Pr{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Qq++}),this.uuid=Cr(),this.name="",this.type="Material",this.blending=_l,this.side=Us,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=hg,this.blendDst=dg,this.blendEquation=No,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new at(0,0,0),this.blendAlpha=0,this.depthFunc=Cl,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=vw,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Qa,this.stencilZFail=Qa,this.stencilZPass=Qa,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){console.warn("THREE.Material: parameter '".concat(t,"' has value of undefined."));continue}const r=this[t];if(r===void 0){console.warn("THREE.Material: '".concat(t,"' is not a property of THREE.").concat(this.type,"."));continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.sheenColorMap&&this.sheenColorMap.isTexture&&(i.sheenColorMap=this.sheenColorMap.toJSON(e).uuid),this.sheenRoughnessMap&&this.sheenRoughnessMap.isTexture&&(i.sheenRoughnessMap=this.sheenRoughnessMap.toJSON(e).uuid),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==_l&&(i.blending=this.blending),this.side!==Us&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==hg&&(i.blendSrc=this.blendSrc),this.blendDst!==dg&&(i.blendDst=this.blendDst),this.blendEquation!==No&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==Cl&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==vw&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Qa&&(i.stencilFail=this.stencilFail),this.stencilZFail!==Qa&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==Qa&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(t){const s=r(e.textures),o=r(e.images);s.length>0&&(i.textures=s),o.length>0&&(i.images=o)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const r=t.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class vo extends Ti{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new at(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ps,this.combine=ef,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const oo=Zq();function Zq(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),i=new Uint32Array(512),r=new Uint32Array(512);for(let l=0;l<256;++l){const c=l-127;c<-27?(i[l]=0,i[l|256]=32768,r[l]=24,r[l|256]=24):c<-14?(i[l]=1024>>-c-14,i[l|256]=1024>>-c-14|32768,r[l]=-c-1,r[l|256]=-c-1):c<=15?(i[l]=c+15<<10,i[l|256]=c+15<<10|32768,r[l]=13,r[l|256]=13):c<128?(i[l]=31744,i[l|256]=64512,r[l]=24,r[l|256]=24):(i[l]=31744,i[l|256]=64512,r[l]=13,r[l|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let c=l<<13,u=0;for(;(c&8388608)===0;)c<<=1,u-=8388608;c&=-8388609,u+=947912704,s[l]=c|u}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:t,baseTable:i,shiftTable:r,mantissaTable:s,exponentTable:o,offsetTable:a}}function ar(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=Ct(n,-65504,65504),oo.floatView[0]=n;const e=oo.uint32View[0],t=e>>23&511;return oo.baseTable[t]+((e&8388607)>>oo.shiftTable[t])}function Vh(n){const e=n>>10;return oo.uint32View[0]=oo.mantissaTable[oo.offsetTable[e]+(n&1023)]+oo.exponentTable[e],oo.floatView[0]}class ll{static toHalfFloat(e){return ar(e)}static fromHalfFloat(e){return Vh(e)}}const ii=new K,Hp=new Ue;let eX=0;class _n{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:eX++}),this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=Id,this.updateRanges=[],this.gpuType=Gn,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)Hp.fromBufferAttribute(this,t),Hp.applyMatrix3(e),this.setXY(t,Hp.x,Hp.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)ii.fromBufferAttribute(this,t),ii.applyMatrix3(e),this.setXYZ(t,ii.x,ii.y,ii.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)ii.fromBufferAttribute(this,t),ii.applyMatrix4(e),this.setXYZ(t,ii.x,ii.y,ii.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)ii.fromBufferAttribute(this,t),ii.applyNormalMatrix(e),this.setXYZ(t,ii.x,ii.y,ii.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)ii.fromBufferAttribute(this,t),ii.transformDirection(e),this.setXYZ(t,ii.x,ii.y,ii.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=Qi(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=Nt(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Qi(t,this.array)),t}setX(e,t){return this.normalized&&(t=Nt(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Qi(t,this.array)),t}setY(e,t){return this.normalized&&(t=Nt(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Qi(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Nt(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Qi(t,this.array)),t}setW(e,t){return this.normalized&&(t=Nt(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=Nt(t,this.array),i=Nt(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=Nt(t,this.array),i=Nt(i,this.array),r=Nt(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=Nt(t,this.array),i=Nt(i,this.array),r=Nt(r,this.array),s=Nt(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Id&&(e.usage=this.usage),e}}class tX extends _n{constructor(e,t,i){super(new Int8Array(e),t,i)}}class nX extends _n{constructor(e,t,i){super(new Uint8Array(e),t,i)}}class iX extends _n{constructor(e,t,i){super(new Uint8ClampedArray(e),t,i)}}class rX extends _n{constructor(e,t,i){super(new Int16Array(e),t,i)}}class ZS extends _n{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class sX extends _n{constructor(e,t,i){super(new Int32Array(e),t,i)}}class ex extends _n{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class oX extends _n{constructor(e,t,i){super(new Uint16Array(e),t,i),this.isFloat16BufferAttribute=!0}getX(e){let t=Vh(this.array[e*this.itemSize]);return this.normalized&&(t=Qi(t,this.array)),t}setX(e,t){return this.normalized&&(t=Nt(t,this.array)),this.array[e*this.itemSize]=ar(t),this}getY(e){let t=Vh(this.array[e*this.itemSize+1]);return this.normalized&&(t=Qi(t,this.array)),t}setY(e,t){return this.normalized&&(t=Nt(t,this.array)),this.array[e*this.itemSize+1]=ar(t),this}getZ(e){let t=Vh(this.array[e*this.itemSize+2]);return this.normalized&&(t=Qi(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Nt(t,this.array)),this.array[e*this.itemSize+2]=ar(t),this}getW(e){let t=Vh(this.array[e*this.itemSize+3]);return this.normalized&&(t=Qi(t,this.array)),t}setW(e,t){return this.normalized&&(t=Nt(t,this.array)),this.array[e*this.itemSize+3]=ar(t),this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=Nt(t,this.array),i=Nt(i,this.array)),this.array[e+0]=ar(t),this.array[e+1]=ar(i),this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=Nt(t,this.array),i=Nt(i,this.array),r=Nt(r,this.array)),this.array[e+0]=ar(t),this.array[e+1]=ar(i),this.array[e+2]=ar(r),this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=Nt(t,this.array),i=Nt(i,this.array),r=Nt(r,this.array),s=Nt(s,this.array)),this.array[e+0]=ar(t),this.array[e+1]=ar(i),this.array[e+2]=ar(r),this.array[e+3]=ar(s),this}}class mt extends _n{constructor(e,t,i){super(new Float32Array(e),t,i)}}let aX=0;const Ur=new Rt,E0=new an,Ac=new K,br=new Hi,Ah=new Hi,xi=new K;class Ut extends Pr{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:aX++}),this.uuid=Cr(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(GL(e)?ex:ZS)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const s=new kt().getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Ur.makeRotationFromQuaternion(e),this.applyMatrix4(Ur),this}rotateX(e){return Ur.makeRotationX(e),this.applyMatrix4(Ur),this}rotateY(e){return Ur.makeRotationY(e),this.applyMatrix4(Ur),this}rotateZ(e){return Ur.makeRotationZ(e),this.applyMatrix4(Ur),this}translate(e,t,i){return Ur.makeTranslation(e,t,i),this.applyMatrix4(Ur),this}scale(e,t,i){return Ur.makeScale(e,t,i),this.applyMatrix4(Ur),this}lookAt(e){return E0.lookAt(e),E0.updateMatrix(),this.applyMatrix4(E0.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Ac).negate(),this.translate(Ac.x,Ac.y,Ac.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const i=[];for(let r=0,s=e.length;r<s;r++){const o=e[r];i.push(o.x,o.y,o.z||0)}this.setAttribute("position",new mt(i,3))}else{const i=Math.min(e.length,t.count);for(let r=0;r<i;r++){const s=e[r];t.setXYZ(r,s.x,s.y,s.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Hi);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new K(-1/0,-1/0,-1/0),new K(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++){const s=t[i];br.setFromBufferAttribute(s),this.morphTargetsRelative?(xi.addVectors(this.boundingBox.min,br.min),this.boundingBox.expandByPoint(xi),xi.addVectors(this.boundingBox.max,br.max),this.boundingBox.expandByPoint(xi)):(this.boundingBox.expandByPoint(br.min),this.boundingBox.expandByPoint(br.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Pi);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new K,1/0);return}if(e){const i=this.boundingSphere.center;if(br.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const a=t[s];Ah.setFromBufferAttribute(a),this.morphTargetsRelative?(xi.addVectors(br.min,Ah.min),br.expandByPoint(xi),xi.addVectors(br.max,Ah.max),br.expandByPoint(xi)):(br.expandByPoint(Ah.min),br.expandByPoint(Ah.max))}br.getCenter(i);let r=0;for(let s=0,o=e.count;s<o;s++)xi.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(xi));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let c=0,u=a.count;c<u;c++)xi.fromBufferAttribute(a,c),l&&(Ac.fromBufferAttribute(e,c),xi.add(Ac)),r=Math.max(r,i.distanceToSquared(xi))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=t.position,r=t.normal,s=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new _n(new Float32Array(4*i.count),4));const o=this.getAttribute("tangent"),a=[],l=[];for(let R=0;R<i.count;R++)a[R]=new K,l[R]=new K;const c=new K,u=new K,d=new K,f=new Ue,m=new Ue,v=new Ue,g=new K,y=new K;function b(R,C,D){c.fromBufferAttribute(i,R),u.fromBufferAttribute(i,C),d.fromBufferAttribute(i,D),f.fromBufferAttribute(s,R),m.fromBufferAttribute(s,C),v.fromBufferAttribute(s,D),u.sub(c),d.sub(c),m.sub(f),v.sub(f);const L=1/(m.x*v.y-v.x*m.y);isFinite(L)&&(g.copy(u).multiplyScalar(v.y).addScaledVector(d,-m.y).multiplyScalar(L),y.copy(d).multiplyScalar(m.x).addScaledVector(u,-v.x).multiplyScalar(L),a[R].add(g),a[C].add(g),a[D].add(g),l[R].add(y),l[C].add(y),l[D].add(y))}let S=this.groups;S.length===0&&(S=[{start:0,count:e.count}]);for(let R=0,C=S.length;R<C;++R){const D=S[R],L=D.start,z=D.count;for(let G=L,H=L+z;G<H;G+=3)b(e.getX(G+0),e.getX(G+1),e.getX(G+2))}const x=new K,A=new K,E=new K,M=new K;function I(R){E.fromBufferAttribute(r,R),M.copy(E);const C=a[R];x.copy(C),x.sub(E.multiplyScalar(E.dot(C))).normalize(),A.crossVectors(M,C);const L=A.dot(l[R])<0?-1:1;o.setXYZW(R,x.x,x.y,x.z,L)}for(let R=0,C=S.length;R<C;++R){const D=S[R],L=D.start,z=D.count;for(let G=L,H=L+z;G<H;G+=3)I(e.getX(G+0)),I(e.getX(G+1)),I(e.getX(G+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new _n(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let f=0,m=i.count;f<m;f++)i.setXYZ(f,0,0,0);const r=new K,s=new K,o=new K,a=new K,l=new K,c=new K,u=new K,d=new K;if(e)for(let f=0,m=e.count;f<m;f+=3){const v=e.getX(f+0),g=e.getX(f+1),y=e.getX(f+2);r.fromBufferAttribute(t,v),s.fromBufferAttribute(t,g),o.fromBufferAttribute(t,y),u.subVectors(o,s),d.subVectors(r,s),u.cross(d),a.fromBufferAttribute(i,v),l.fromBufferAttribute(i,g),c.fromBufferAttribute(i,y),a.add(u),l.add(u),c.add(u),i.setXYZ(v,a.x,a.y,a.z),i.setXYZ(g,l.x,l.y,l.z),i.setXYZ(y,c.x,c.y,c.z)}else for(let f=0,m=t.count;f<m;f+=3)r.fromBufferAttribute(t,f+0),s.fromBufferAttribute(t,f+1),o.fromBufferAttribute(t,f+2),u.subVectors(o,s),d.subVectors(r,s),u.cross(d),i.setXYZ(f+0,u.x,u.y,u.z),i.setXYZ(f+1,u.x,u.y,u.z),i.setXYZ(f+2,u.x,u.y,u.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)xi.fromBufferAttribute(e,t),xi.normalize(),e.setXYZ(t,xi.x,xi.y,xi.z)}toNonIndexed(){function e(a,l){const c=a.array,u=a.itemSize,d=a.normalized,f=new c.constructor(l.length*u);let m=0,v=0;for(let g=0,y=l.length;g<y;g++){a.isInterleavedBufferAttribute?m=l[g]*a.data.stride+a.offset:m=l[g]*u;for(let b=0;b<u;b++)f[v++]=c[m++]}return new _n(f,u,d)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Ut,i=this.index.array,r=this.attributes;for(const a in r){const l=r[a],c=e(l,i);t.setAttribute(a,c)}const s=this.morphAttributes;for(const a in s){const l=[],c=s[a];for(let u=0,d=c.length;u<d;u++){const f=c[u],m=e(f,i);l.push(m)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const l in i){const c=i[l];e.data.attributes[l]=c.toJSON(e.data)}const r={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let d=0,f=c.length;d<f;d++){const m=c[d];u.push(m.toJSON(e.data))}u.length>0&&(r[l]=u,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere=a.toJSON()),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone());const r=e.attributes;for(const c in r){const u=r[c];this.setAttribute(c,u.clone(t))}const s=e.morphAttributes;for(const c in s){const u=[],d=s[c];for(let f=0,m=d.length;f<m;f++)u.push(d[f].clone(t));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let c=0,u=o.length;c<u;c++){const d=o[c];this.addGroup(d.start,d.count,d.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const IC=new Rt,Fa=new Iu,Gp=new Pi,DC=new K,Vp=new K,Wp=new K,jp=new K,A0=new K,qp=new K,PC=new K,Xp=new K;let Fn=class extends an{constructor(e=new Ut,t=new vo){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){const i=this.geometry,r=i.attributes.position,s=i.morphAttributes.position,o=i.morphTargetsRelative;t.fromBufferAttribute(r,e);const a=this.morphTargetInfluences;if(s&&a){qp.set(0,0,0);for(let l=0,c=s.length;l<c;l++){const u=a[l],d=s[l];u!==0&&(A0.fromBufferAttribute(d,e),o?qp.addScaledVector(A0,u):qp.addScaledVector(A0.sub(t),u))}t.add(qp)}return t}raycast(e,t){const i=this.geometry,r=this.material,s=this.matrixWorld;r!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),Gp.copy(i.boundingSphere),Gp.applyMatrix4(s),Fa.copy(e.ray).recast(e.near),!(Gp.containsPoint(Fa.origin)===!1&&(Fa.intersectSphere(Gp,DC)===null||Fa.origin.distanceToSquared(DC)>(e.far-e.near)**2))&&(IC.copy(s).invert(),Fa.copy(e.ray).applyMatrix4(IC),!(i.boundingBox!==null&&Fa.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,t,Fa)))}_computeIntersections(e,t,i){let r;const s=this.geometry,o=this.material,a=s.index,l=s.attributes.position,c=s.attributes.uv,u=s.attributes.uv1,d=s.attributes.normal,f=s.groups,m=s.drawRange;if(a!==null)if(Array.isArray(o))for(let v=0,g=f.length;v<g;v++){const y=f[v],b=o[y.materialIndex],S=Math.max(y.start,m.start),x=Math.min(a.count,Math.min(y.start+y.count,m.start+m.count));for(let A=S,E=x;A<E;A+=3){const M=a.getX(A),I=a.getX(A+1),R=a.getX(A+2);r=Yp(this,b,e,i,c,u,d,M,I,R),r&&(r.faceIndex=Math.floor(A/3),r.face.materialIndex=y.materialIndex,t.push(r))}}else{const v=Math.max(0,m.start),g=Math.min(a.count,m.start+m.count);for(let y=v,b=g;y<b;y+=3){const S=a.getX(y),x=a.getX(y+1),A=a.getX(y+2);r=Yp(this,o,e,i,c,u,d,S,x,A),r&&(r.faceIndex=Math.floor(y/3),t.push(r))}}else if(l!==void 0)if(Array.isArray(o))for(let v=0,g=f.length;v<g;v++){const y=f[v],b=o[y.materialIndex],S=Math.max(y.start,m.start),x=Math.min(l.count,Math.min(y.start+y.count,m.start+m.count));for(let A=S,E=x;A<E;A+=3){const M=A,I=A+1,R=A+2;r=Yp(this,b,e,i,c,u,d,M,I,R),r&&(r.faceIndex=Math.floor(A/3),r.face.materialIndex=y.materialIndex,t.push(r))}}else{const v=Math.max(0,m.start),g=Math.min(l.count,m.start+m.count);for(let y=v,b=g;y<b;y+=3){const S=y,x=y+1,A=y+2;r=Yp(this,o,e,i,c,u,d,S,x,A),r&&(r.faceIndex=Math.floor(y/3),t.push(r))}}}};function lX(n,e,t,i,r,s,o,a){let l;if(e.side===mi?l=i.intersectTriangle(o,s,r,!0,a):l=i.intersectTriangle(r,s,o,e.side===Us,a),l===null)return null;Xp.copy(a),Xp.applyMatrix4(n.matrixWorld);const c=t.ray.origin.distanceTo(Xp);return c<t.near||c>t.far?null:{distance:c,point:Xp.clone(),object:n}}function Yp(n,e,t,i,r,s,o,a,l,c){n.getVertexPosition(a,Vp),n.getVertexPosition(l,Wp),n.getVertexPosition(c,jp);const u=lX(n,e,t,i,Vp,Wp,jp,PC);if(u){const d=new K;lr.getBarycoord(PC,Vp,Wp,jp,d),r&&(u.uv=lr.getInterpolatedAttribute(r,a,l,c,d,new Ue)),s&&(u.uv1=lr.getInterpolatedAttribute(s,a,l,c,d,new Ue)),o&&(u.normal=lr.getInterpolatedAttribute(o,a,l,c,d,new K),u.normal.dot(i.direction)>0&&u.normal.multiplyScalar(-1));const f={a,b:l,c,normal:new K,materialIndex:0};lr.getNormal(Vp,Wp,jp,f.normal),u.face=f,u.barycoord=d}return u}class Hl extends Ut{constructor(e=1,t=1,i=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:o};const a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const l=[],c=[],u=[],d=[];let f=0,m=0;v("z","y","x",-1,-1,i,t,e,o,s,0),v("z","y","x",1,-1,i,t,-e,o,s,1),v("x","z","y",1,1,e,i,t,r,o,2),v("x","z","y",1,-1,e,i,-t,r,o,3),v("x","y","z",1,-1,e,t,i,r,s,4),v("x","y","z",-1,-1,e,t,-i,r,s,5),this.setIndex(l),this.setAttribute("position",new mt(c,3)),this.setAttribute("normal",new mt(u,3)),this.setAttribute("uv",new mt(d,2));function v(g,y,b,S,x,A,E,M,I,R,C){const D=A/I,L=E/R,z=A/2,G=E/2,H=M/2,J=I+1,k=R+1;let X=0,W=0;const ie=new K;for(let se=0;se<k;se++){const ye=se*L-G;for(let Ne=0;Ne<J;Ne++){const He=Ne*D-z;ie[g]=He*S,ie[y]=ye*x,ie[b]=H,c.push(ie.x,ie.y,ie.z),ie[g]=0,ie[y]=0,ie[b]=M>0?1:-1,u.push(ie.x,ie.y,ie.z),d.push(Ne/I),d.push(1-se/R),X+=1}}for(let se=0;se<R;se++)for(let ye=0;ye<I;ye++){const Ne=f+ye+J*se,He=f+ye+J*(se+1),fe=f+(ye+1)+J*(se+1),he=f+(ye+1)+J*se;l.push(Ne,He,he),l.push(He,fe,he),W+=6}a.addGroup(m,W,C),m+=W,f+=X}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Hl(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function vu(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=r.clone():Array.isArray(r)?e[t][i]=r.slice():e[t][i]=r}}return e}function Ki(n){const e={};for(let t=0;t<n.length;t++){const i=vu(n[t]);for(const r in i)e[r]=i[r]}return e}function cX(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function XL(n){const e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:rn.workingColorSpace}const YL={clone:vu,merge:Ki};var uX="void main() {\n	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",hX="void main() {\n	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}";class Wn extends Ti{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=uX,this.fragmentShader=hX,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=vu(e.uniforms),this.uniformsGroups=cX(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;o&&o.isTexture?t.uniforms[r]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[r]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[r]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[r]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[r]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[r]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[r]={type:"m4",value:o.toArray()}:t.uniforms[r]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}let sf=class extends an{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Rt,this.projectionMatrix=new Rt,this.projectionMatrixInverse=new Rt,this.coordinateSystem=Mr,this._reversedDepth=!1}get reversedDepth(){return this._reversedDepth}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}};const Co=new K,OC=new Ue,LC=new Ue;class Ei extends sf{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=gu*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(yl*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return gu*2*Math.atan(Math.tan(yl*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,i){Co.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Co.x,Co.y).multiplyScalar(-e/Co.z),Co.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(Co.x,Co.y).multiplyScalar(-e/Co.z)}getViewSize(e,t){return this.getViewBounds(e,OC,LC),t.subVectors(LC,OC)}setViewOffset(e,t,i,r,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(yl*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,s=-.5*r;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;s+=o.offsetX*r/l,t-=o.offsetY*i/c,r*=o.width/l,i*=o.height/c}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-i,e,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Mc=-90,Tc=1;class KL extends an{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new Ei(Mc,Tc,e,t);r.layers=this.layers,this.add(r);const s=new Ei(Mc,Tc,e,t);s.layers=this.layers,this.add(s);const o=new Ei(Mc,Tc,e,t);o.layers=this.layers,this.add(o);const a=new Ei(Mc,Tc,e,t);a.layers=this.layers,this.add(a);const l=new Ei(Mc,Tc,e,t);l.layers=this.layers,this.add(l);const c=new Ei(Mc,Tc,e,t);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[i,r,s,o,a,l]=t;for(const c of t)this.remove(c);if(e===Mr)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===mu)i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const c of t)this.add(c),c.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,a,l,c,u]=this.children,d=e.getRenderTarget(),f=e.getActiveCubeFace(),m=e.getActiveMipmapLevel(),v=e.xr.enabled;e.xr.enabled=!1;const g=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,r),e.render(t,s),e.setRenderTarget(i,1,r),e.render(t,o),e.setRenderTarget(i,2,r),e.render(t,a),e.setRenderTarget(i,3,r),e.render(t,l),e.setRenderTarget(i,4,r),e.render(t,c),i.texture.generateMipmaps=g,e.setRenderTarget(i,5,r),e.render(t,u),e.setRenderTarget(d,f,m),e.xr.enabled=v,i.texture.needsPMREMUpdate=!0}}class of extends En{constructor(e=[],t=mo,i,r,s,o,a,l,c,u){super(e,t,i,r,s,o,a,l,c,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class $L extends ni{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];this.texture=new of(r),this._setTextureOptions(t),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:"\n\n				varying vec3 vWorldDirection;\n\n				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n				}\n\n				void main() {\n\n					vWorldDirection = transformDirection( position, modelMatrix );\n\n					#include <begin_vertex>\n					#include <project_vertex>\n\n				}\n			",fragmentShader:"\n\n				uniform sampler2D tEquirect;\n\n				varying vec3 vWorldDirection;\n\n				#include <common>\n\n				void main() {\n\n					vec3 direction = normalize( vWorldDirection );\n\n					vec2 sampleUV = equirectUv( direction );\n\n					gl_FragColor = texture2D( tEquirect, sampleUV );\n\n				}\n			"},r=new Hl(5,5,5),s=new Wn({name:"CubemapFromEquirect",uniforms:vu(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:mi,blending:Ai});s.uniforms.tEquirect.value=t;const o=new Fn(r,s),a=t.minFilter;return t.minFilter===Ds&&(t.minFilter=Zt),new KL(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t=!0,i=!0,r=!0){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,i,r);e.setRenderTarget(s)}}class jc extends an{constructor(){super(),this.isGroup=!0,this.type="Group"}}const dX={type:"move"};class Hm{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new jc,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new jc,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new K,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new K),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new jc,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new K,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new K),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let r=null,s=null,o=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(c&&e.hand){o=!0;for(const g of e.hand.values()){const y=t.getJointPose(g,i),b=this._getHandJoint(c,g);y!==null&&(b.matrix.fromArray(y.transform.matrix),b.matrix.decompose(b.position,b.rotation,b.scale),b.matrixWorldNeedsUpdate=!0,b.jointRadius=y.radius),b.visible=y!==null}const u=c.joints["index-finger-tip"],d=c.joints["thumb-tip"],f=u.position.distanceTo(d.position),m=.02,v=.005;c.inputState.pinching&&f>m+v?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&f<=m-v&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(r=t.getPose(e.targetRaySpace,i),r===null&&s!==null&&(r=s),r!==null&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(dX)))}return a!==null&&(a.visible=r!==null),l!==null&&(l.visible=s!==null),c!==null&&(c.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const i=new jc;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}class Cv{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new at(e),this.density=t}clone(){return new Cv(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class Rv{constructor(e,t=1,i=1e3){this.isFog=!0,this.name="",this.color=new at(e),this.near=t,this.far=i}clone(){return new Rv(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class Od extends an{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new ps,this.environmentIntensity=1,this.environmentRotation=new ps,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class Iv{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=Id,this.updateRanges=[],this.version=0,this.uuid=Cr()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Cr()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Cr()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Yi=new K;class Dl{constructor(e,t,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)Yi.fromBufferAttribute(this,t),Yi.applyMatrix4(e),this.setXYZ(t,Yi.x,Yi.y,Yi.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Yi.fromBufferAttribute(this,t),Yi.applyNormalMatrix(e),this.setXYZ(t,Yi.x,Yi.y,Yi.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Yi.fromBufferAttribute(this,t),Yi.transformDirection(e),this.setXYZ(t,Yi.x,Yi.y,Yi.z);return this}getComponent(e,t){let i=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(i=Qi(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=Nt(i,this.array)),this.data.array[e*this.data.stride+this.offset+t]=i,this}setX(e,t){return this.normalized&&(t=Nt(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Nt(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Nt(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Nt(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Qi(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Qi(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Qi(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Qi(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=Nt(t,this.array),i=Nt(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=Nt(t,this.array),i=Nt(i,this.array),r=Nt(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=Nt(t,this.array),i=Nt(i,this.array),r=Nt(r,this.array),s=Nt(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new _n(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Dl(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class tx extends Ti{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new at(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Cc;const Mh=new K,Rc=new K,Ic=new K,Dc=new Ue,Th=new Ue,JL=new Rt,Kp=new K,Ch=new K,$p=new K,kC=new Ue,M0=new Ue,UC=new Ue;class QL extends an{constructor(e=new tx){if(super(),this.isSprite=!0,this.type="Sprite",Cc===void 0){Cc=new Ut;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new Iv(t,5);Cc.setIndex([0,1,2,0,2,3]),Cc.setAttribute("position",new Dl(i,3,0,!1)),Cc.setAttribute("uv",new Dl(i,2,3,!1))}this.geometry=Cc,this.material=e,this.center=new Ue(.5,.5),this.count=1}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Rc.setFromMatrixScale(this.matrixWorld),JL.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Ic.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Rc.multiplyScalar(-Ic.z);const i=this.material.rotation;let r,s;i!==0&&(s=Math.cos(i),r=Math.sin(i));const o=this.center;Jp(Kp.set(-.5,-.5,0),Ic,o,Rc,r,s),Jp(Ch.set(.5,-.5,0),Ic,o,Rc,r,s),Jp($p.set(.5,.5,0),Ic,o,Rc,r,s),kC.set(0,0),M0.set(1,0),UC.set(1,1);let a=e.ray.intersectTriangle(Kp,Ch,$p,!1,Mh);if(a===null&&(Jp(Ch.set(-.5,.5,0),Ic,o,Rc,r,s),M0.set(0,1),a=e.ray.intersectTriangle(Kp,$p,Ch,!1,Mh),a===null))return;const l=e.ray.origin.distanceTo(Mh);l<e.near||l>e.far||t.push({distance:l,point:Mh.clone(),uv:lr.getInterpolation(Mh,Kp,Ch,$p,kC,M0,UC,new Ue),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function Jp(n,e,t,i,r,s){Dc.subVectors(n,t).addScalar(.5).multiply(i),r!==void 0?(Th.x=s*Dc.x-r*Dc.y,Th.y=r*Dc.x+s*Dc.y):Th.copy(Dc),n.copy(e),n.x+=Th.x,n.y+=Th.y,n.applyMatrix4(JL)}const Qp=new K,NC=new K;class ZL extends an{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let i=0,r=t.length;i<r;i++){const s=t[i];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,i=0){t=Math.abs(t);const r=this.levels;let s;for(s=0;s<r.length&&!(t<r[s].distance);s++);return r.splice(s,0,{distance:t,hysteresis:i,object:e}),this.add(e),this}removeLevel(e){const t=this.levels;for(let i=0;i<t.length;i++)if(t[i].distance===e){const r=t.splice(i,1);return this.remove(r[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let i,r;for(i=1,r=t.length;i<r;i++){let s=t[i].distance;if(t[i].object.visible&&(s-=s*t[i].hysteresis),e<s)break}return t[i-1].object}return null}raycast(e,t){if(this.levels.length>0){Qp.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(Qp);this.getObjectForDistance(r).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){Qp.setFromMatrixPosition(e.matrixWorld),NC.setFromMatrixPosition(this.matrixWorld);const i=Qp.distanceTo(NC)/e.zoom;t[0].object.visible=!0;let r,s;for(r=1,s=t.length;r<s;r++){let o=t[r].distance;if(t[r].object.visible&&(o-=o*t[r].hysteresis),i>=o)t[r-1].object.visible=!1,t[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<s;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const i=this.levels;for(let r=0,s=i.length;r<s;r++){const o=i[r];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}const FC=new K,BC=new Jt,zC=new Jt,fX=new K,HC=new Rt,Zp=new K,T0=new Pi,GC=new Rt,C0=new Iu;class ek extends Fn{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=mw,this.bindMatrix=new Rt,this.bindMatrixInverse=new Rt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Hi),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,Zp),this.boundingBox.expandByPoint(Zp)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Pi),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,Zp),this.boundingSphere.expandByPoint(Zp)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const i=this.material,r=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),T0.copy(this.boundingSphere),T0.applyMatrix4(r),e.ray.intersectsSphere(T0)!==!1&&(GC.copy(r).invert(),C0.copy(e.ray).applyMatrix4(GC),!(this.boundingBox!==null&&C0.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,C0)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Jt,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.fromBufferAttribute(t,i);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===mw?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===RL?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const i=this.skeleton,r=this.geometry;BC.fromBufferAttribute(r.attributes.skinIndex,e),zC.fromBufferAttribute(r.attributes.skinWeight,e),FC.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=zC.getComponent(s);if(o!==0){const a=BC.getComponent(s);HC.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),t.addScaledVector(fX.copy(FC).applyMatrix4(HC),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}class nx extends an{constructor(){super(),this.isBone=!0,this.type="Bone"}}class ds extends En{constructor(e=null,t=1,i=1,r,s,o,a,l,c=gi,u=gi,d,f){super(null,o,a,l,c,u,r,s,d,f),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const VC=new Rt,pX=new Rt;class Dv{constructor(e=[],t=[]){this.uuid=Cr(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new Rt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new Rt;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:pX;VC.multiplyMatrices(a,t[s]),VC.toArray(i,s*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new Dv(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new ds(t,e,e,hi,Gn);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const s=e.bones[i];let o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new nx),this.bones.push(o),this.boneInverses.push(new Rt().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.7,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let r=0,s=t.length;r<s;r++){const o=t[r];e.bones.push(o.uuid);const a=i[r];e.boneInverses.push(a.toArray())}return e}}class _u extends _n{constructor(e,t,i,r=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Pc=new Rt,WC=new Rt,em=[],jC=new Hi,mX=new Rt,Rh=new Fn,Ih=new Pi;class tk extends Fn{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new _u(new Float32Array(i*16),16),this.instanceColor=null,this.morphTexture=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<i;r++)this.setMatrixAt(r,mX)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new Hi),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,Pc),jC.copy(e.boundingBox).applyMatrix4(Pc),this.boundingBox.union(jC)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new Pi),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,Pc),Ih.copy(e.boundingSphere).applyMatrix4(Pc),this.boundingSphere.union(Ih)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const i=t.morphTargetInfluences,r=this.morphTexture.source.data.data,s=i.length+1,o=e*s+1;for(let a=0;a<i.length;a++)i[a]=r[o+a]}raycast(e,t){const i=this.matrixWorld,r=this.count;if(Rh.geometry=this.geometry,Rh.material=this.material,Rh.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Ih.copy(this.boundingSphere),Ih.applyMatrix4(i),e.ray.intersectsSphere(Ih)!==!1))for(let s=0;s<r;s++){this.getMatrixAt(s,Pc),WC.multiplyMatrices(i,Pc),Rh.matrixWorld=WC,Rh.raycast(e,em);for(let o=0,a=em.length;o<a;o++){const l=em[o];l.instanceId=s,l.object=this,t.push(l)}em.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new _u(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const i=t.morphTargetInfluences,r=i.length+1;this.morphTexture===null&&(this.morphTexture=new ds(new Float32Array(r*this.count),r,this.count,nf,Gn));const s=this.morphTexture.source.data.data;let o=0;for(let c=0;c<i.length;c++)o+=i[c];const a=this.geometry.morphTargetsRelative?1:1-o,l=r*e;s[l]=a,s.set(i,l+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}}const R0=new K,gX=new K,vX=new kt;let ko=class{constructor(e=new K(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=R0.subVectors(i,t).cross(gX.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(R0),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(e.start).addScaledVector(i,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||vX.getNormalMatrix(e),r=this.coplanarPoint(R0).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}};const Ba=new Pi,_X=new Ue(.5,.5),tm=new K;class Du{constructor(e=new ko,t=new ko,i=new ko,r=new ko,s=new ko,o=new ko){this.planes=[e,t,i,r,s,o]}set(e,t,i,r,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(i),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=Mr,i=!1){const r=this.planes,s=e.elements,o=s[0],a=s[1],l=s[2],c=s[3],u=s[4],d=s[5],f=s[6],m=s[7],v=s[8],g=s[9],y=s[10],b=s[11],S=s[12],x=s[13],A=s[14],E=s[15];if(r[0].setComponents(c-o,m-u,b-v,E-S).normalize(),r[1].setComponents(c+o,m+u,b+v,E+S).normalize(),r[2].setComponents(c+a,m+d,b+g,E+x).normalize(),r[3].setComponents(c-a,m-d,b-g,E-x).normalize(),i)r[4].setComponents(l,f,y,A).normalize(),r[5].setComponents(c-l,m-f,b-y,E-A).normalize();else if(r[4].setComponents(c-l,m-f,b-y,E-A).normalize(),t===Mr)r[5].setComponents(c+l,m+f,b+y,E+A).normalize();else if(t===mu)r[5].setComponents(l,f,y,A).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Ba.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Ba.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Ba)}intersectsSprite(e){Ba.center.set(0,0,0);const t=_X.distanceTo(e.center);return Ba.radius=.7071067811865476+t,Ba.applyMatrix4(e.matrixWorld),this.intersectsSphere(Ba)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(tm.x=r.normal.x>0?e.max.x:e.min.x,tm.y=r.normal.y>0?e.max.y:e.min.y,tm.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(tm)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}const xs=new Rt,Es=new Du;class Pv{constructor(){this.coordinateSystem=Mr}intersectsObject(e,t){if(!t.isArrayCamera||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const r=t.cameras[i];if(xs.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Es.setFromProjectionMatrix(xs,r.coordinateSystem,r.reversedDepth),Es.intersectsObject(e))return!0}return!1}intersectsSprite(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const r=t.cameras[i];if(xs.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Es.setFromProjectionMatrix(xs,r.coordinateSystem,r.reversedDepth),Es.intersectsSprite(e))return!0}return!1}intersectsSphere(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const r=t.cameras[i];if(xs.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Es.setFromProjectionMatrix(xs,r.coordinateSystem,r.reversedDepth),Es.intersectsSphere(e))return!0}return!1}intersectsBox(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const r=t.cameras[i];if(xs.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Es.setFromProjectionMatrix(xs,r.coordinateSystem,r.reversedDepth),Es.intersectsBox(e))return!0}return!1}containsPoint(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const r=t.cameras[i];if(xs.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Es.setFromProjectionMatrix(xs,r.coordinateSystem,r.reversedDepth),Es.containsPoint(e))return!0}return!1}clone(){return new Pv}}function I0(n,e){return n-e}function yX(n,e){return n.z-e.z}function bX(n,e){return e.z-n.z}class wX{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,i,r){const s=this.pool,o=this.list;this.index>=s.length&&s.push({start:-1,count:-1,z:-1,index:-1});const a=s[this.index];o.push(a),this.index++,a.start=e,a.count=t,a.z=i,a.index=r}reset(){this.list.length=0,this.index=0}}const or=new Rt,SX=new at(1,1,1),qC=new Du,xX=new Pv,nm=new Hi,za=new Pi,Dh=new K,XC=new K,EX=new K,D0=new wX,Ui=new Fn,im=[];function AX(n,e,t=0){const i=e.itemSize;if(n.isInterleavedBufferAttribute||n.array.constructor!==e.array.constructor){const r=n.count;for(let s=0;s<r;s++)for(let o=0;o<i;o++)e.setComponent(s+t,o,n.getComponent(s,o))}else e.array.set(n.array,t*i);e.needsUpdate=!0}function Ha(n,e){if(n.constructor!==e.constructor){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++)e[i]=n[i]}else{const t=Math.min(n.length,e.length);e.set(new n.constructor(n.buffer,0,t))}}class nk extends Fn{constructor(e,t,i=t*2,r){super(new Ut,r),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=i,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),i=new ds(t,e,e,hi,Gn);this._matricesTexture=i}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),i=new ds(t,e,e,rf,fs);this._indirectTexture=i}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),i=new ds(t,e,e,hi,Gn);i.colorSpace=rn.workingColorSpace,this._colorsTexture=i}_initializeGeometry(e){const t=this.geometry,i=this._maxVertexCount,r=this._maxIndexCount;if(this._geometryInitialized===!1){for(const s in e.attributes){const o=e.getAttribute(s),{array:a,itemSize:l,normalized:c}=o,u=new a.constructor(i*l),d=new _n(u,l,c);t.setAttribute(s,d)}if(e.getIndex()!==null){const s=i>65535?new Uint32Array(r):new Uint16Array(r);t.setIndex(new _n(s,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const i in t.attributes){if(!e.hasAttribute(i))throw new Error('THREE.BatchedMesh: Added geometry missing "'.concat(i,'". All geometries must have consistent attributes.'));const r=e.getAttribute(i),s=t.getAttribute(i);if(r.itemSize!==s.itemSize||r.normalized!==s.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(e){const t=this._instanceInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error("THREE.BatchedMesh: Invalid instanceId ".concat(e,". Instance is either out of range or has been deleted."))}validateGeometryId(e){const t=this._geometryInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error("THREE.BatchedMesh: Invalid geometryId ".concat(e,". Geometry is either out of range or has been deleted."))}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Hi);const e=this.boundingBox,t=this._instanceInfo;e.makeEmpty();for(let i=0,r=t.length;i<r;i++){if(t[i].active===!1)continue;const s=t[i].geometryIndex;this.getMatrixAt(i,or),this.getBoundingBoxAt(s,nm).applyMatrix4(or),e.union(nm)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Pi);const e=this.boundingSphere,t=this._instanceInfo;e.makeEmpty();for(let i=0,r=t.length;i<r;i++){if(t[i].active===!1)continue;const s=t[i].geometryIndex;this.getMatrixAt(i,or),this.getBoundingSphereAt(s,za).applyMatrix4(or),e.union(za)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const i={visible:!0,active:!0,geometryIndex:e};let r=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(I0),r=this._availableInstanceIds.shift(),this._instanceInfo[r]=i):(r=this._instanceInfo.length,this._instanceInfo.push(i));const s=this._matricesTexture;or.identity().toArray(s.image.data,r*16),s.needsUpdate=!0;const o=this._colorsTexture;return o&&(SX.toArray(o.image.data,r*4),o.needsUpdate=!0),this._visibilityChanged=!0,r}addGeometry(e,t=-1,i=-1){this._initializeGeometry(e),this._validateGeometry(e);const r={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},s=this._geometryInfo;r.vertexStart=this._nextVertexStart,r.reservedVertexCount=t===-1?e.getAttribute("position").count:t;const o=e.getIndex();if(o!==null&&(r.indexStart=this._nextIndexStart,r.reservedIndexCount=i===-1?o.count:i),r.indexStart!==-1&&r.indexStart+r.reservedIndexCount>this._maxIndexCount||r.vertexStart+r.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let l;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(I0),l=this._availableGeometryIds.shift(),s[l]=r):(l=this._geometryCount,this._geometryCount++,s.push(r)),this.setGeometryAt(l,e),this._nextIndexStart=r.indexStart+r.reservedIndexCount,this._nextVertexStart=r.vertexStart+r.reservedVertexCount,l}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const i=this.geometry,r=i.getIndex()!==null,s=i.getIndex(),o=t.getIndex(),a=this._geometryInfo[e];if(r&&o.count>a.reservedIndexCount||t.attributes.position.count>a.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const l=a.vertexStart,c=a.reservedVertexCount;a.vertexCount=t.getAttribute("position").count;for(const u in i.attributes){const d=t.getAttribute(u),f=i.getAttribute(u);AX(d,f,l);const m=d.itemSize;for(let v=d.count,g=c;v<g;v++){const y=l+v;for(let b=0;b<m;b++)f.setComponent(y,b,0)}f.needsUpdate=!0,f.addUpdateRange(l*m,c*m)}if(r){const u=a.indexStart,d=a.reservedIndexCount;a.indexCount=t.getIndex().count;for(let f=0;f<o.count;f++)s.setX(u+f,l+o.getX(f));for(let f=o.count,m=d;f<m;f++)s.setX(u+f,l);s.needsUpdate=!0,s.addUpdateRange(u,a.reservedIndexCount)}return a.start=r?a.indexStart:a.vertexStart,a.count=r?a.indexCount:a.vertexCount,a.boundingBox=null,t.boundingBox!==null&&(a.boundingBox=t.boundingBox.clone()),a.boundingSphere=null,t.boundingSphere!==null&&(a.boundingSphere=t.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._geometryInfo;if(e>=t.length||t[e].active===!1)return this;const i=this._instanceInfo;for(let r=0,s=i.length;r<s;r++)i[r].active&&i[r].geometryIndex===e&&this.deleteInstance(r);return t[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,t=0;const i=this._geometryInfo,r=i.map((o,a)=>a).sort((o,a)=>i[o].vertexStart-i[a].vertexStart),s=this.geometry;for(let o=0,a=i.length;o<a;o++){const l=r[o],c=i[l];if(c.active!==!1){if(s.index!==null){if(c.indexStart!==t){const{indexStart:u,vertexStart:d,reservedIndexCount:f}=c,m=s.index,v=m.array,g=e-d;for(let y=u;y<u+f;y++)v[y]=v[y]+g;m.array.copyWithin(t,u,u+f),m.addUpdateRange(t,f),c.indexStart=t}t+=c.reservedIndexCount}if(c.vertexStart!==e){const{vertexStart:u,reservedVertexCount:d}=c,f=s.attributes;for(const m in f){const v=f[m],{array:g,itemSize:y}=v;g.copyWithin(e*y,u*y,(u+d)*y),v.addUpdateRange(e*y,d*y)}c.vertexStart=e}e+=c.reservedVertexCount,c.start=s.index?c.indexStart:c.vertexStart,this._nextIndexStart=s.index?c.indexStart+c.reservedIndexCount:0,this._nextVertexStart=c.vertexStart+c.reservedVertexCount}}return this}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const i=this.geometry,r=this._geometryInfo[e];if(r.boundingBox===null){const s=new Hi,o=i.index,a=i.attributes.position;for(let l=r.start,c=r.start+r.count;l<c;l++){let u=l;o&&(u=o.getX(u)),s.expandByPoint(Dh.fromBufferAttribute(a,u))}r.boundingBox=s}return t.copy(r.boundingBox),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const i=this.geometry,r=this._geometryInfo[e];if(r.boundingSphere===null){const s=new Pi;this.getBoundingBoxAt(e,nm),nm.getCenter(s.center);const o=i.index,a=i.attributes.position;let l=0;for(let c=r.start,u=r.start+r.count;c<u;c++){let d=c;o&&(d=o.getX(d)),Dh.fromBufferAttribute(a,d),l=Math.max(l,s.center.distanceToSquared(Dh))}s.radius=Math.sqrt(l),r.boundingSphere=s}return t.copy(r.boundingSphere),t}setMatrixAt(e,t){this.validateInstanceId(e);const i=this._matricesTexture,r=this._matricesTexture.image.data;return t.toArray(r,e*16),i.needsUpdate=!0,this}getMatrixAt(e,t){return this.validateInstanceId(e),t.fromArray(this._matricesTexture.image.data,e*16)}setColorAt(e,t){return this.validateInstanceId(e),this._colorsTexture===null&&this._initColorsTexture(),t.toArray(this._colorsTexture.image.data,e*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,t){return this.validateInstanceId(e),t.fromArray(this._colorsTexture.image.data,e*4)}setVisibleAt(e,t){return this.validateInstanceId(e),this._instanceInfo[e].visible===t?this:(this._instanceInfo[e].visible=t,this._visibilityChanged=!0,this)}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,t){return this.validateInstanceId(e),this.validateGeometryId(t),this._instanceInfo[e].geometryIndex=t,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e,t={}){this.validateGeometryId(e);const i=this._geometryInfo[e];return t.vertexStart=i.vertexStart,t.vertexCount=i.vertexCount,t.reservedVertexCount=i.reservedVertexCount,t.indexStart=i.indexStart,t.indexCount=i.indexCount,t.reservedIndexCount=i.reservedIndexCount,t.start=i.start,t.count=i.count,t}setInstanceCount(e){const t=this._availableInstanceIds,i=this._instanceInfo;for(t.sort(I0);t[t.length-1]===i.length-1;)i.pop(),t.pop();if(e<i.length)throw new Error("BatchedMesh: Instance ids outside the range ".concat(e," are being used. Cannot shrink instance count."));const r=new Int32Array(e),s=new Int32Array(e);Ha(this._multiDrawCounts,r),Ha(this._multiDrawStarts,s),this._multiDrawCounts=r,this._multiDrawStarts=s,this._maxInstanceCount=e;const o=this._indirectTexture,a=this._matricesTexture,l=this._colorsTexture;o.dispose(),this._initIndirectTexture(),Ha(o.image.data,this._indirectTexture.image.data),a.dispose(),this._initMatricesTexture(),Ha(a.image.data,this._matricesTexture.image.data),l&&(l.dispose(),this._initColorsTexture(),Ha(l.image.data,this._colorsTexture.image.data))}setGeometrySize(e,t){const i=[...this._geometryInfo].filter(a=>a.active);if(Math.max(...i.map(a=>a.vertexStart+a.reservedVertexCount))>e)throw new Error("BatchedMesh: Geometry vertex values are being used outside the range ".concat(t,". Cannot shrink further."));if(this.geometry.index&&Math.max(...i.map(l=>l.indexStart+l.reservedIndexCount))>t)throw new Error("BatchedMesh: Geometry index values are being used outside the range ".concat(t,". Cannot shrink further."));const s=this.geometry;s.dispose(),this._maxVertexCount=e,this._maxIndexCount=t,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new Ut,this._initializeGeometry(s));const o=this.geometry;s.index&&Ha(s.index.array,o.index.array);for(const a in s.attributes)Ha(s.attributes[a].array,o.attributes[a].array)}raycast(e,t){const i=this._instanceInfo,r=this._geometryInfo,s=this.matrixWorld,o=this.geometry;Ui.material=this.material,Ui.geometry.index=o.index,Ui.geometry.attributes=o.attributes,Ui.geometry.boundingBox===null&&(Ui.geometry.boundingBox=new Hi),Ui.geometry.boundingSphere===null&&(Ui.geometry.boundingSphere=new Pi);for(let a=0,l=i.length;a<l;a++){if(!i[a].visible||!i[a].active)continue;const c=i[a].geometryIndex,u=r[c];Ui.geometry.setDrawRange(u.start,u.count),this.getMatrixAt(a,Ui.matrixWorld).premultiply(s),this.getBoundingBoxAt(c,Ui.geometry.boundingBox),this.getBoundingSphereAt(c,Ui.geometry.boundingSphere),Ui.raycast(e,im);for(let d=0,f=im.length;d<f;d++){const m=im[d];m.object=this,m.batchId=a,t.push(m)}im.length=0}Ui.material=null,Ui.geometry.index=null,Ui.geometry.attributes={},Ui.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(t=>({...t,boundingBox:t.boundingBox!==null?t.boundingBox.clone():null,boundingSphere:t.boundingSphere!==null?t.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(t=>({...t})),this._availableInstanceIds=e._availableInstanceIds.slice(),this._availableGeometryIds=e._availableGeometryIds.slice(),this._nextIndexStart=e._nextIndexStart,this._nextVertexStart=e._nextVertexStart,this._geometryCount=e._geometryCount,this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._indirectTexture=e._indirectTexture.clone(),this._indirectTexture.image.data=this._indirectTexture.image.data.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(e,t,i,r,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const o=r.getIndex(),a=o===null?1:o.array.BYTES_PER_ELEMENT,l=this._instanceInfo,c=this._multiDrawStarts,u=this._multiDrawCounts,d=this._geometryInfo,f=this.perObjectFrustumCulled,m=this._indirectTexture,v=m.image.data,g=i.isArrayCamera?xX:qC;f&&!i.isArrayCamera&&(or.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse).multiply(this.matrixWorld),qC.setFromProjectionMatrix(or,i.coordinateSystem,i.reversedDepth));let y=0;if(this.sortObjects){or.copy(this.matrixWorld).invert(),Dh.setFromMatrixPosition(i.matrixWorld).applyMatrix4(or),XC.set(0,0,-1).transformDirection(i.matrixWorld).transformDirection(or);for(let x=0,A=l.length;x<A;x++)if(l[x].visible&&l[x].active){const E=l[x].geometryIndex;this.getMatrixAt(x,or),this.getBoundingSphereAt(E,za).applyMatrix4(or);let M=!1;if(f&&(M=!g.intersectsSphere(za,i)),!M){const I=d[E],R=EX.subVectors(za.center,Dh).dot(XC);D0.push(I.start,I.count,R,x)}}const b=D0.list,S=this.customSort;S===null?b.sort(s.transparent?bX:yX):S.call(this,b,i);for(let x=0,A=b.length;x<A;x++){const E=b[x];c[y]=E.start*a,u[y]=E.count,v[y]=E.index,y++}D0.reset()}else for(let b=0,S=l.length;b<S;b++)if(l[b].visible&&l[b].active){const x=l[b].geometryIndex;let A=!1;if(f&&(this.getMatrixAt(b,or),this.getBoundingSphereAt(x,za).applyMatrix4(or),A=!g.intersectsSphere(za,i)),!A){const E=d[x];c[y]=E.start*a,u[y]=E.count,v[y]=b,y++}}m.needsUpdate=!0,this._multiDrawCount=y,this._visibilityChanged=!1}onBeforeShadow(e,t,i,r,s,o){this.onBeforeRender(e,null,r,s,o)}}class nr extends Ti{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new at(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const Kg=new K,$g=new K,YC=new Rt,Ph=new Iu,rm=new Pi,P0=new K,KC=new K;class ea extends an{constructor(e=new Ut,t=new nr){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[0];for(let r=1,s=t.count;r<s;r++)Kg.fromBufferAttribute(t,r-1),$g.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=Kg.distanceTo($g);e.setAttribute("lineDistance",new mt(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),rm.copy(i.boundingSphere),rm.applyMatrix4(r),rm.radius+=s,e.ray.intersectsSphere(rm)===!1)return;YC.copy(r).invert(),Ph.copy(e.ray).applyMatrix4(YC);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=this.isLineSegments?2:1,u=i.index,f=i.attributes.position;if(u!==null){const m=Math.max(0,o.start),v=Math.min(u.count,o.start+o.count);for(let g=m,y=v-1;g<y;g+=c){const b=u.getX(g),S=u.getX(g+1),x=sm(this,e,Ph,l,b,S,g);x&&t.push(x)}if(this.isLineLoop){const g=u.getX(v-1),y=u.getX(m),b=sm(this,e,Ph,l,g,y,v-1);b&&t.push(b)}}else{const m=Math.max(0,o.start),v=Math.min(f.count,o.start+o.count);for(let g=m,y=v-1;g<y;g+=c){const b=sm(this,e,Ph,l,g,g+1,g);b&&t.push(b)}if(this.isLineLoop){const g=sm(this,e,Ph,l,v-1,m,v-1);g&&t.push(g)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function sm(n,e,t,i,r,s,o){const a=n.geometry.attributes.position;if(Kg.fromBufferAttribute(a,r),$g.fromBufferAttribute(a,s),t.distanceSqToSegment(Kg,$g,P0,KC)>i)return;P0.applyMatrix4(n.matrixWorld);const c=e.ray.origin.distanceTo(P0);if(!(c<e.near||c>e.far))return{distance:c,point:KC.clone().applyMatrix4(n.matrixWorld),index:o,face:null,faceIndex:null,barycoord:null,object:n}}const $C=new K,JC=new K;class Ns extends ea{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[];for(let r=0,s=t.count;r<s;r+=2)$C.fromBufferAttribute(t,r),JC.fromBufferAttribute(t,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+$C.distanceTo(JC);e.setAttribute("lineDistance",new mt(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class ik extends ea{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class ix extends Ti{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new at(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const QC=new Rt,yw=new Iu,om=new Pi,am=new K;class rk extends an{constructor(e=new Ut,t=new ix){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),om.copy(i.boundingSphere),om.applyMatrix4(r),om.radius+=s,e.ray.intersectsSphere(om)===!1)return;QC.copy(r).invert(),yw.copy(e.ray).applyMatrix4(QC);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=i.index,d=i.attributes.position;if(c!==null){const f=Math.max(0,o.start),m=Math.min(c.count,o.start+o.count);for(let v=f,g=m;v<g;v++){const y=c.getX(v);am.fromBufferAttribute(d,y),ZC(am,y,l,r,e,t,this)}}else{const f=Math.max(0,o.start),m=Math.min(d.count,o.start+o.count);for(let v=f,g=m;v<g;v++)am.fromBufferAttribute(d,v),ZC(am,v,l,r,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function ZC(n,e,t,i,r,s,o){const a=yw.distanceSqToPoint(n);if(a<t){const l=new K;yw.closestPointToPoint(n,l),l.applyMatrix4(i);const c=r.ray.origin.distanceTo(l);if(c<r.near||c>r.far)return;s.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,faceIndex:null,barycoord:null,object:o})}}class sk extends En{constructor(e,t,i,r,s=Zt,o=Zt,a,l,c){super(e,t,i,r,s,o,a,l,c),this.isVideoTexture=!0,this.generateMipmaps=!1,this._requestVideoFrameCallbackId=0;const u=this;function d(){u.needsUpdate=!0,u._requestVideoFrameCallbackId=e.requestVideoFrameCallback(d)}"requestVideoFrameCallback"in e&&(this._requestVideoFrameCallbackId=e.requestVideoFrameCallback(d))}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}dispose(){this._requestVideoFrameCallbackId!==0&&this.source.data.cancelVideoFrameCallback(this._requestVideoFrameCallbackId),super.dispose()}}class MX extends sk{constructor(e,t,i,r,s,o,a,l){super({},e,t,i,r,s,o,a,l),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(e){this.image=e,this.needsUpdate=!0}}class TX extends En{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=gi,this.minFilter=gi,this.generateMipmaps=!1,this.needsUpdate=!0}}class Ov extends En{constructor(e,t,i,r,s,o,a,l,c,u,d,f){super(null,o,a,l,c,u,r,s,d,f),this.isCompressedTexture=!0,this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class CX extends Ov{constructor(e,t,i,r,s,o){super(e,t,i,s,o),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=ui,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class RX extends Ov{constructor(e,t,i){super(void 0,e[0].width,e[0].height,t,i,mo),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class IX extends En{constructor(e,t,i,r,s,o,a,l,c){super(e,t,i,r,s,o,a,l,c),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Lv extends En{constructor(e,t,i=fs,r,s,o,a=gi,l=gi,c,u=pu,d=1){if(u!==pu&&u!==Il)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");const f={width:e,height:t,depth:d};super(f,r,s,o,a,l,u,i,c),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new Ho(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class rx extends En{constructor(e=null){super(),this.sourceTexture=e,this.isExternalTexture=!0}copy(e){return super.copy(e),this.sourceTexture=e.sourceTexture,this}}class kv extends Ut{constructor(e=1,t=1,i=4,r=8,s=1){super(),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:i,radialSegments:r,heightSegments:s},t=Math.max(0,t),i=Math.max(1,Math.floor(i)),r=Math.max(3,Math.floor(r)),s=Math.max(1,Math.floor(s));const o=[],a=[],l=[],c=[],u=t/2,d=Math.PI/2*e,f=t,m=2*d+f,v=i*2+s,g=r+1,y=new K,b=new K;for(let S=0;S<=v;S++){let x=0,A=0,E=0,M=0;if(S<=i){const C=S/i,D=C*Math.PI/2;A=-u-e*Math.cos(D),E=e*Math.sin(D),M=-e*Math.cos(D),x=C*d}else if(S<=i+s){const C=(S-i)/s;A=-u+C*t,E=e,M=0,x=d+C*f}else{const C=(S-i-s)/i,D=C*Math.PI/2;A=u+e*Math.sin(D),E=e*Math.cos(D),M=e*Math.sin(D),x=d+f+C*d}const I=Math.max(0,Math.min(1,x/m));let R=0;S===0?R=.5/r:S===v&&(R=-.5/r);for(let C=0;C<=r;C++){const D=C/r,L=D*Math.PI*2,z=Math.sin(L),G=Math.cos(L);b.x=-E*G,b.y=A,b.z=E*z,a.push(b.x,b.y,b.z),y.set(-E*G,M,E*z),y.normalize(),l.push(y.x,y.y,y.z),c.push(D+R,I)}if(S>0){const C=(S-1)*g;for(let D=0;D<r;D++){const L=C+D,z=C+D+1,G=S*g+D,H=S*g+D+1;o.push(L,z,G),o.push(z,H,G)}}}this.setIndex(o),this.setAttribute("position",new mt(a,3)),this.setAttribute("normal",new mt(l,3)),this.setAttribute("uv",new mt(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new kv(e.radius,e.height,e.capSegments,e.radialSegments,e.heightSegments)}}class Uv extends Ut{constructor(e=1,t=32,i=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:r},t=Math.max(3,t);const s=[],o=[],a=[],l=[],c=new K,u=new Ue;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let d=0,f=3;d<=t;d++,f+=3){const m=i+d/t*r;c.x=e*Math.cos(m),c.y=e*Math.sin(m),o.push(c.x,c.y,c.z),a.push(0,0,1),u.x=(o[f]/e+1)/2,u.y=(o[f+1]/e+1)/2,l.push(u.x,u.y)}for(let d=1;d<=t;d++)s.push(d,d+1,0);this.setIndex(s),this.setAttribute("position",new mt(o,3)),this.setAttribute("normal",new mt(a,3)),this.setAttribute("uv",new mt(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Uv(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class af extends Ut{constructor(e=1,t=1,i=1,r=32,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const c=this;r=Math.floor(r),s=Math.floor(s);const u=[],d=[],f=[],m=[];let v=0;const g=[],y=i/2;let b=0;S(),o===!1&&(e>0&&x(!0),t>0&&x(!1)),this.setIndex(u),this.setAttribute("position",new mt(d,3)),this.setAttribute("normal",new mt(f,3)),this.setAttribute("uv",new mt(m,2));function S(){const A=new K,E=new K;let M=0;const I=(t-e)/i;for(let R=0;R<=s;R++){const C=[],D=R/s,L=D*(t-e)+e;for(let z=0;z<=r;z++){const G=z/r,H=G*l+a,J=Math.sin(H),k=Math.cos(H);E.x=L*J,E.y=-D*i+y,E.z=L*k,d.push(E.x,E.y,E.z),A.set(J,I,k).normalize(),f.push(A.x,A.y,A.z),m.push(G,1-D),C.push(v++)}g.push(C)}for(let R=0;R<r;R++)for(let C=0;C<s;C++){const D=g[C][R],L=g[C+1][R],z=g[C+1][R+1],G=g[C][R+1];(e>0||C!==0)&&(u.push(D,L,G),M+=3),(t>0||C!==s-1)&&(u.push(L,z,G),M+=3)}c.addGroup(b,M,0),b+=M}function x(A){const E=v,M=new Ue,I=new K;let R=0;const C=A===!0?e:t,D=A===!0?1:-1;for(let z=1;z<=r;z++)d.push(0,y*D,0),f.push(0,D,0),m.push(.5,.5),v++;const L=v;for(let z=0;z<=r;z++){const H=z/r*l+a,J=Math.cos(H),k=Math.sin(H);I.x=C*k,I.y=y*D,I.z=C*J,d.push(I.x,I.y,I.z),f.push(0,D,0),M.x=J*.5+.5,M.y=k*.5*D+.5,m.push(M.x,M.y),v++}for(let z=0;z<r;z++){const G=E+z,H=L+z;A===!0?u.push(H,H+1,G):u.push(H+1,H,G),R+=3}c.addGroup(b,R,A===!0?1:2),b+=R}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new af(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class lf extends af{constructor(e=1,t=1,i=32,r=1,s=!1,o=0,a=Math.PI*2){super(0,e,t,i,r,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new lf(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class oa extends Ut{constructor(e=[],t=[],i=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:r};const s=[],o=[];a(r),c(i),u(),this.setAttribute("position",new mt(s,3)),this.setAttribute("normal",new mt(s.slice(),3)),this.setAttribute("uv",new mt(o,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function a(S){const x=new K,A=new K,E=new K;for(let M=0;M<t.length;M+=3)m(t[M+0],x),m(t[M+1],A),m(t[M+2],E),l(x,A,E,S)}function l(S,x,A,E){const M=E+1,I=[];for(let R=0;R<=M;R++){I[R]=[];const C=S.clone().lerp(A,R/M),D=x.clone().lerp(A,R/M),L=M-R;for(let z=0;z<=L;z++)z===0&&R===M?I[R][z]=C:I[R][z]=C.clone().lerp(D,z/L)}for(let R=0;R<M;R++)for(let C=0;C<2*(M-R)-1;C++){const D=Math.floor(C/2);C%2===0?(f(I[R][D+1]),f(I[R+1][D]),f(I[R][D])):(f(I[R][D+1]),f(I[R+1][D+1]),f(I[R+1][D]))}}function c(S){const x=new K;for(let A=0;A<s.length;A+=3)x.x=s[A+0],x.y=s[A+1],x.z=s[A+2],x.normalize().multiplyScalar(S),s[A+0]=x.x,s[A+1]=x.y,s[A+2]=x.z}function u(){const S=new K;for(let x=0;x<s.length;x+=3){S.x=s[x+0],S.y=s[x+1],S.z=s[x+2];const A=y(S)/2/Math.PI+.5,E=b(S)/Math.PI+.5;o.push(A,1-E)}v(),d()}function d(){for(let S=0;S<o.length;S+=6){const x=o[S+0],A=o[S+2],E=o[S+4],M=Math.max(x,A,E),I=Math.min(x,A,E);M>.9&&I<.1&&(x<.2&&(o[S+0]+=1),A<.2&&(o[S+2]+=1),E<.2&&(o[S+4]+=1))}}function f(S){s.push(S.x,S.y,S.z)}function m(S,x){const A=S*3;x.x=e[A+0],x.y=e[A+1],x.z=e[A+2]}function v(){const S=new K,x=new K,A=new K,E=new K,M=new Ue,I=new Ue,R=new Ue;for(let C=0,D=0;C<s.length;C+=9,D+=6){S.set(s[C+0],s[C+1],s[C+2]),x.set(s[C+3],s[C+4],s[C+5]),A.set(s[C+6],s[C+7],s[C+8]),M.set(o[D+0],o[D+1]),I.set(o[D+2],o[D+3]),R.set(o[D+4],o[D+5]),E.copy(S).add(x).add(A).divideScalar(3);const L=y(E);g(M,D+0,S,L),g(I,D+2,x,L),g(R,D+4,A,L)}}function g(S,x,A,E){E<0&&S.x===1&&(o[x]=S.x-1),A.x===0&&A.z===0&&(o[x]=E/2/Math.PI+.5)}function y(S){return Math.atan2(S.z,-S.x)}function b(S){return Math.atan2(-S.y,Math.sqrt(S.x*S.x+S.z*S.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new oa(e.vertices,e.indices,e.radius,e.details)}}class Nv extends oa{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=1/i,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Nv(e.radius,e.detail)}}const lm=new K,cm=new K,O0=new K,um=new lr;class ok extends Ut{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const r=Math.pow(10,4),s=Math.cos(yl*t),o=e.getIndex(),a=e.getAttribute("position"),l=o?o.count:a.count,c=[0,0,0],u=["a","b","c"],d=new Array(3),f={},m=[];for(let v=0;v<l;v+=3){o?(c[0]=o.getX(v),c[1]=o.getX(v+1),c[2]=o.getX(v+2)):(c[0]=v,c[1]=v+1,c[2]=v+2);const{a:g,b:y,c:b}=um;if(g.fromBufferAttribute(a,c[0]),y.fromBufferAttribute(a,c[1]),b.fromBufferAttribute(a,c[2]),um.getNormal(O0),d[0]="".concat(Math.round(g.x*r),",").concat(Math.round(g.y*r),",").concat(Math.round(g.z*r)),d[1]="".concat(Math.round(y.x*r),",").concat(Math.round(y.y*r),",").concat(Math.round(y.z*r)),d[2]="".concat(Math.round(b.x*r),",").concat(Math.round(b.y*r),",").concat(Math.round(b.z*r)),!(d[0]===d[1]||d[1]===d[2]||d[2]===d[0]))for(let S=0;S<3;S++){const x=(S+1)%3,A=d[S],E=d[x],M=um[u[S]],I=um[u[x]],R="".concat(A,"_").concat(E),C="".concat(E,"_").concat(A);C in f&&f[C]?(O0.dot(f[C].normal)<=s&&(m.push(M.x,M.y,M.z),m.push(I.x,I.y,I.z)),f[C]=null):R in f||(f[R]={index0:c[S],index1:c[x],normal:O0.clone()})}}for(const v in f)if(f[v]){const{index0:g,index1:y}=f[v];lm.fromBufferAttribute(a,g),cm.fromBufferAttribute(a,y),m.push(lm.x,lm.y,lm.z),m.push(cm.x,cm.y,cm.z)}this.setAttribute("position",new mt(m,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class ms{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){console.warn("THREE.Curve: .getPoint() not implemented.")}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,r=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)i=this.getPoint(o/e),s+=i.distanceTo(r),t.push(s),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t=null){const i=this.getLengths();let r=0;const s=i.length;let o;t?o=t:o=e*i[s-1];let a=0,l=s-1,c;for(;a<=l;)if(r=Math.floor(a+(l-a)/2),c=i[r]-o,c<0)a=r+1;else if(c>0)l=r-1;else{l=r;break}if(r=l,i[r]===o)return r/(s-1);const u=i[r],f=i[r+1]-u,m=(o-u)/f;return(r+m)/(s-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const o=this.getPoint(r),a=this.getPoint(s),l=t||(o.isVector2?new Ue:new K);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t=!1){const i=new K,r=[],s=[],o=[],a=new K,l=new Rt;for(let m=0;m<=e;m++){const v=m/e;r[m]=this.getTangentAt(v,new K)}s[0]=new K,o[0]=new K;let c=Number.MAX_VALUE;const u=Math.abs(r[0].x),d=Math.abs(r[0].y),f=Math.abs(r[0].z);u<=c&&(c=u,i.set(1,0,0)),d<=c&&(c=d,i.set(0,1,0)),f<=c&&i.set(0,0,1),a.crossVectors(r[0],i).normalize(),s[0].crossVectors(r[0],a),o[0].crossVectors(r[0],s[0]);for(let m=1;m<=e;m++){if(s[m]=s[m-1].clone(),o[m]=o[m-1].clone(),a.crossVectors(r[m-1],r[m]),a.length()>Number.EPSILON){a.normalize();const v=Math.acos(Ct(r[m-1].dot(r[m]),-1,1));s[m].applyMatrix4(l.makeRotationAxis(a,v))}o[m].crossVectors(r[m],s[m])}if(t===!0){let m=Math.acos(Ct(s[0].dot(s[e]),-1,1));m/=e,r[0].dot(a.crossVectors(s[0],s[e]))>0&&(m=-m);for(let v=1;v<=e;v++)s[v].applyMatrix4(l.makeRotationAxis(r[v],m*v)),o[v].crossVectors(r[v],s[v])}return{tangents:r,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.7,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class Fv extends ms{constructor(e=0,t=0,i=1,r=1,s=0,o=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,t=new Ue){const i=t,r=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(o?s=0:s=r),this.aClockwise===!0&&!o&&(s===r?s=-r:s=s-r);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const u=Math.cos(this.aRotation),d=Math.sin(this.aRotation),f=l-this.aX,m=c-this.aY;l=f*u-m*d+this.aX,c=f*d+m*u+this.aY}return i.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class ak extends Fv{constructor(e,t,i,r,s,o){super(e,t,i,i,r,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function sx(){let n=0,e=0,t=0,i=0;function r(s,o,a,l){n=s,e=a,t=-3*s+3*o-2*a-l,i=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,c){r(o,a,c*(a-s),c*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,c,u,d){let f=(o-s)/c-(a-s)/(c+u)+(a-o)/u,m=(a-o)/u-(l-o)/(u+d)+(l-a)/d;f*=u,m*=u,r(o,a,f,m)},calc:function(s){const o=s*s,a=o*s;return n+e*s+t*o+i*a}}}const hm=new K,L0=new sx,k0=new sx,U0=new sx;class lk extends ms{constructor(e=[],t=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new K){const i=t,r=this.points,s=r.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:l===0&&a===s-1&&(a=s-2,l=1);let c,u;this.closed||a>0?c=r[(a-1)%s]:(hm.subVectors(r[0],r[1]).add(r[0]),c=hm);const d=r[a%s],f=r[(a+1)%s];if(this.closed||a+2<s?u=r[(a+2)%s]:(hm.subVectors(r[s-1],r[s-2]).add(r[s-1]),u=hm),this.curveType==="centripetal"||this.curveType==="chordal"){const m=this.curveType==="chordal"?.5:.25;let v=Math.pow(c.distanceToSquared(d),m),g=Math.pow(d.distanceToSquared(f),m),y=Math.pow(f.distanceToSquared(u),m);g<1e-4&&(g=1),v<1e-4&&(v=g),y<1e-4&&(y=g),L0.initNonuniformCatmullRom(c.x,d.x,f.x,u.x,v,g,y),k0.initNonuniformCatmullRom(c.y,d.y,f.y,u.y,v,g,y),U0.initNonuniformCatmullRom(c.z,d.z,f.z,u.z,v,g,y)}else this.curveType==="catmullrom"&&(L0.initCatmullRom(c.x,d.x,f.x,u.x,this.tension),k0.initCatmullRom(c.y,d.y,f.y,u.y,this.tension),U0.initCatmullRom(c.z,d.z,f.z,u.z,this.tension));return i.set(L0.calc(l),k0.calc(l),U0.calc(l)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new K().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function eR(n,e,t,i,r){const s=(i-e)*.5,o=(r-t)*.5,a=n*n,l=n*a;return(2*t-2*i+s+o)*l+(-3*t+3*i-2*s-o)*a+s*n+t}function DX(n,e){const t=1-n;return t*t*e}function PX(n,e){return 2*(1-n)*n*e}function OX(n,e){return n*n*e}function sd(n,e,t,i){return DX(n,e)+PX(n,t)+OX(n,i)}function LX(n,e){const t=1-n;return t*t*t*e}function kX(n,e){const t=1-n;return 3*t*t*n*e}function UX(n,e){return 3*(1-n)*n*n*e}function NX(n,e){return n*n*n*e}function od(n,e,t,i,r){return LX(n,e)+kX(n,t)+UX(n,i)+NX(n,r)}class ox extends ms{constructor(e=new Ue,t=new Ue,i=new Ue,r=new Ue){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new Ue){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(od(e,r.x,s.x,o.x,a.x),od(e,r.y,s.y,o.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class ck extends ms{constructor(e=new K,t=new K,i=new K,r=new K){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new K){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(od(e,r.x,s.x,o.x,a.x),od(e,r.y,s.y,o.y,a.y),od(e,r.z,s.z,o.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class ax extends ms{constructor(e=new Ue,t=new Ue){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Ue){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Ue){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class uk extends ms{constructor(e=new K,t=new K){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new K){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new K){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class lx extends ms{constructor(e=new Ue,t=new Ue,i=new Ue){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new Ue){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(sd(e,r.x,s.x,o.x),sd(e,r.y,s.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class cx extends ms{constructor(e=new K,t=new K,i=new K){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new K){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(sd(e,r.x,s.x,o.x),sd(e,r.y,s.y,o.y),sd(e,r.z,s.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class ux extends ms{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Ue){const i=t,r=this.points,s=(r.length-1)*e,o=Math.floor(s),a=s-o,l=r[o===0?o:o-1],c=r[o],u=r[o>r.length-2?r.length-1:o+1],d=r[o>r.length-3?r.length-1:o+2];return i.set(eR(a,l.x,c.x,u.x,d.x),eR(a,l.y,c.y,u.y,d.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new Ue().fromArray(r))}return this}}var Jg=Object.freeze({__proto__:null,ArcCurve:ak,CatmullRomCurve3:lk,CubicBezierCurve:ox,CubicBezierCurve3:ck,EllipseCurve:Fv,LineCurve:ax,LineCurve3:uk,QuadraticBezierCurve:lx,QuadraticBezierCurve3:cx,SplineCurve:ux});class hk extends ms{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const i=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new Jg[i](t,e))}return this}getPoint(e,t){const i=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=i){const o=r[s]-i,a=this.curves[s],l=a.getLength(),c=l===0?0:1-o/l;return a.getPointAt(c,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let r=0,s=this.curves;r<s.length;r++){const o=s[r],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let c=0;c<l.length;c++){const u=l[c];i&&i.equals(u)||(t.push(u),i=u)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){const r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(new Jg[r.type]().fromJSON(r))}return this}}class Qg extends hk{constructor(e){super(),this.type="Path",this.currentPoint=new Ue,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new ax(this.currentPoint.clone(),new Ue(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){const s=new lx(this.currentPoint.clone(),new Ue(e,t),new Ue(i,r));return this.curves.push(s),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,s,o){const a=new ox(this.currentPoint.clone(),new Ue(e,t),new Ue(i,r),new Ue(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new ux(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,s,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,t+l,i,r,s,o),this}absarc(e,t,i,r,s,o){return this.absellipse(e,t,i,i,r,s,o),this}ellipse(e,t,i,r,s,o,a,l){const c=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(e+c,t+u,i,r,s,o,a,l),this}absellipse(e,t,i,r,s,o,a,l){const c=new Fv(e,t,i,r,s,o,a,l);if(this.curves.length>0){const d=c.getPoint(0);d.equals(this.currentPoint)||this.lineTo(d.x,d.y)}this.curves.push(c);const u=c.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class bl extends Qg{constructor(e){super(e),this.uuid=Cr(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){const r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(new Qg().fromJSON(r))}return this}}function FX(n,e,t=2){const i=e&&e.length,r=i?e[0]*t:n.length;let s=dk(n,0,r,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,c;if(i&&(s=VX(n,e,s,t)),n.length>80*t){a=1/0,l=1/0;let u=-1/0,d=-1/0;for(let f=t;f<r;f+=t){const m=n[f],v=n[f+1];m<a&&(a=m),v<l&&(l=v),m>u&&(u=m),v>d&&(d=v)}c=Math.max(u-a,d-l),c=c!==0?32767/c:0}return Ld(s,o,t,a,l,c,0),o}function dk(n,e,t,i,r){let s;if(r===eY(n,e,t,i)>0)for(let o=e;o<t;o+=i)s=tR(o/i|0,n[o],n[o+1],s);else for(let o=t-i;o>=e;o-=i)s=tR(o/i|0,n[o],n[o+1],s);return s&&yu(s,s.next)&&(Ud(s),s=s.next),s}function Pl(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&&(yu(t,t.next)||Hn(t.prev,t,t.next)===0)){if(Ud(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function Ld(n,e,t,i,r,s,o){if(!n)return;!o&&s&&YX(n,i,r,s);let a=n;for(;n.prev!==n.next;){const l=n.prev,c=n.next;if(s?zX(n,i,r,s):BX(n)){e.push(l.i,n.i,c.i),Ud(n),n=c.next,a=c.next;continue}if(n=c,n===a){o?o===1?(n=HX(Pl(n),e),Ld(n,e,t,i,r,s,2)):o===2&&GX(n,e,t,i,r,s):Ld(Pl(n),e,t,i,r,s,1);break}}}function BX(n){const e=n.prev,t=n,i=n.next;if(Hn(e,t,i)>=0)return!1;const r=e.x,s=t.x,o=i.x,a=e.y,l=t.y,c=i.y,u=Math.min(r,s,o),d=Math.min(a,l,c),f=Math.max(r,s,o),m=Math.max(a,l,c);let v=i.next;for(;v!==e;){if(v.x>=u&&v.x<=f&&v.y>=d&&v.y<=m&&Wh(r,a,s,l,o,c,v.x,v.y)&&Hn(v.prev,v,v.next)>=0)return!1;v=v.next}return!0}function zX(n,e,t,i){const r=n.prev,s=n,o=n.next;if(Hn(r,s,o)>=0)return!1;const a=r.x,l=s.x,c=o.x,u=r.y,d=s.y,f=o.y,m=Math.min(a,l,c),v=Math.min(u,d,f),g=Math.max(a,l,c),y=Math.max(u,d,f),b=bw(m,v,e,t,i),S=bw(g,y,e,t,i);let x=n.prevZ,A=n.nextZ;for(;x&&x.z>=b&&A&&A.z<=S;){if(x.x>=m&&x.x<=g&&x.y>=v&&x.y<=y&&x!==r&&x!==o&&Wh(a,u,l,d,c,f,x.x,x.y)&&Hn(x.prev,x,x.next)>=0||(x=x.prevZ,A.x>=m&&A.x<=g&&A.y>=v&&A.y<=y&&A!==r&&A!==o&&Wh(a,u,l,d,c,f,A.x,A.y)&&Hn(A.prev,A,A.next)>=0))return!1;A=A.nextZ}for(;x&&x.z>=b;){if(x.x>=m&&x.x<=g&&x.y>=v&&x.y<=y&&x!==r&&x!==o&&Wh(a,u,l,d,c,f,x.x,x.y)&&Hn(x.prev,x,x.next)>=0)return!1;x=x.prevZ}for(;A&&A.z<=S;){if(A.x>=m&&A.x<=g&&A.y>=v&&A.y<=y&&A!==r&&A!==o&&Wh(a,u,l,d,c,f,A.x,A.y)&&Hn(A.prev,A,A.next)>=0)return!1;A=A.nextZ}return!0}function HX(n,e){let t=n;do{const i=t.prev,r=t.next.next;!yu(i,r)&&pk(i,t,t.next,r)&&kd(i,r)&&kd(r,i)&&(e.push(i.i,t.i,r.i),Ud(t),Ud(t.next),t=n=r),t=t.next}while(t!==n);return Pl(t)}function GX(n,e,t,i,r,s){let o=n;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&JX(o,a)){let l=mk(o,a);o=Pl(o,o.next),l=Pl(l,l.next),Ld(o,e,t,i,r,s,0),Ld(l,e,t,i,r,s,0);return}a=a.next}o=o.next}while(o!==n)}function VX(n,e,t,i){const r=[];for(let s=0,o=e.length;s<o;s++){const a=e[s]*i,l=s<o-1?e[s+1]*i:n.length,c=dk(n,a,l,i,!1);c===c.next&&(c.steiner=!0),r.push($X(c))}r.sort(WX);for(let s=0;s<r.length;s++)t=jX(r[s],t);return t}function WX(n,e){let t=n.x-e.x;if(t===0&&(t=n.y-e.y,t===0)){const i=(n.next.y-n.y)/(n.next.x-n.x),r=(e.next.y-e.y)/(e.next.x-e.x);t=i-r}return t}function jX(n,e){const t=qX(n,e);if(!t)return e;const i=mk(t,n);return Pl(i,i.next),Pl(t,t.next)}function qX(n,e){let t=e;const i=n.x,r=n.y;let s=-1/0,o;if(yu(n,t))return t;do{if(yu(n,t.next))return t.next;if(r<=t.y&&r>=t.next.y&&t.next.y!==t.y){const d=t.x+(r-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(d<=i&&d>s&&(s=d,o=t.x<t.next.x?t:t.next,d===i))return o}t=t.next}while(t!==e);if(!o)return null;const a=o,l=o.x,c=o.y;let u=1/0;t=o;do{if(i>=t.x&&t.x>=l&&i!==t.x&&fk(r<c?i:s,r,l,c,r<c?s:i,r,t.x,t.y)){const d=Math.abs(r-t.y)/(i-t.x);kd(t,n)&&(d<u||d===u&&(t.x>o.x||t.x===o.x&&XX(o,t)))&&(o=t,u=d)}t=t.next}while(t!==a);return o}function XX(n,e){return Hn(n.prev,n,e.prev)<0&&Hn(e.next,n,n.next)<0}function YX(n,e,t,i){let r=n;do r.z===0&&(r.z=bw(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,KX(r)}function KX(n){let e,t=1;do{let i=n,r;n=null;let s=null;for(e=0;i;){e++;let o=i,a=0;for(let c=0;c<t&&(a++,o=o.nextZ,!!o);c++);let l=t;for(;a>0||l>0&&o;)a!==0&&(l===0||!o||i.z<=o.z)?(r=i,i=i.nextZ,a--):(r=o,o=o.nextZ,l--),s?s.nextZ=r:n=r,r.prevZ=s,s=r;i=o}s.nextZ=null,t*=2}while(e>1);return n}function bw(n,e,t,i,r){return n=(n-t)*r|0,e=(e-i)*r|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function $X(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function fk(n,e,t,i,r,s,o,a){return(r-o)*(e-a)>=(n-o)*(s-a)&&(n-o)*(i-a)>=(t-o)*(e-a)&&(t-o)*(s-a)>=(r-o)*(i-a)}function Wh(n,e,t,i,r,s,o,a){return!(n===o&&e===a)&&fk(n,e,t,i,r,s,o,a)}function JX(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!QX(n,e)&&(kd(n,e)&&kd(e,n)&&ZX(n,e)&&(Hn(n.prev,n,e.prev)||Hn(n,e.prev,e))||yu(n,e)&&Hn(n.prev,n,n.next)>0&&Hn(e.prev,e,e.next)>0)}function Hn(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function yu(n,e){return n.x===e.x&&n.y===e.y}function pk(n,e,t,i){const r=fm(Hn(n,e,t)),s=fm(Hn(n,e,i)),o=fm(Hn(t,i,n)),a=fm(Hn(t,i,e));return!!(r!==s&&o!==a||r===0&&dm(n,t,e)||s===0&&dm(n,i,e)||o===0&&dm(t,n,i)||a===0&&dm(t,e,i))}function dm(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function fm(n){return n>0?1:n<0?-1:0}function QX(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&pk(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function kd(n,e){return Hn(n.prev,n,n.next)<0?Hn(n,e,n.next)>=0&&Hn(n,n.prev,e)>=0:Hn(n,e,n.prev)<0||Hn(n,n.next,e)<0}function ZX(n,e){let t=n,i=!1;const r=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function mk(n,e){const t=ww(n.i,n.x,n.y),i=ww(e.i,e.x,e.y),r=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,s.next=i,i.prev=s,i}function tR(n,e,t,i){const r=ww(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function Ud(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function ww(n,e,t){return{i:n,x:e,y:t,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function eY(n,e,t,i){let r=0;for(let s=e,o=t-i;s<t;s+=i)r+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return r}class tY{static triangulate(e,t,i=2){return FX(e,t,i)}}class ls{static area(e){const t=e.length;let i=0;for(let r=t-1,s=0;s<t;r=s++)i+=e[r].x*e[s].y-e[s].x*e[r].y;return i*.5}static isClockWise(e){return ls.area(e)<0}static triangulateShape(e,t){const i=[],r=[],s=[];nR(e),iR(i,e);let o=e.length;t.forEach(nR);for(let l=0;l<t.length;l++)r.push(o),o+=t[l].length,iR(i,t[l]);const a=tY.triangulate(i,r);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function nR(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function iR(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class Bv extends Ut{constructor(e=new bl([new Ue(.5,.5),new Ue(-.5,.5),new Ue(-.5,-.5),new Ue(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,r=[],s=[];for(let a=0,l=e.length;a<l;a++){const c=e[a];o(c)}this.setAttribute("position",new mt(r,3)),this.setAttribute("uv",new mt(s,2)),this.computeVertexNormals();function o(a){const l=[],c=t.curveSegments!==void 0?t.curveSegments:12,u=t.steps!==void 0?t.steps:1,d=t.depth!==void 0?t.depth:1;let f=t.bevelEnabled!==void 0?t.bevelEnabled:!0,m=t.bevelThickness!==void 0?t.bevelThickness:.2,v=t.bevelSize!==void 0?t.bevelSize:m-.1,g=t.bevelOffset!==void 0?t.bevelOffset:0,y=t.bevelSegments!==void 0?t.bevelSegments:3;const b=t.extrudePath,S=t.UVGenerator!==void 0?t.UVGenerator:nY;let x,A=!1,E,M,I,R;b&&(x=b.getSpacedPoints(u),A=!0,f=!1,E=b.computeFrenetFrames(u,!1),M=new K,I=new K,R=new K),f||(y=0,m=0,v=0,g=0);const C=a.extractPoints(c);let D=C.shape;const L=C.holes;if(!ls.isClockWise(D)){D=D.reverse();for(let me=0,xe=L.length;me<xe;me++){const Re=L[me];ls.isClockWise(Re)&&(L[me]=Re.reverse())}}function G(me){const Re=10000000000000001e-36;let Ce=me[0];for(let qe=1;qe<=me.length;qe++){const We=qe%me.length,Ze=me[We],wt=Ze.x-Ce.x,St=Ze.y-Ce.y,Y=wt*wt+St*St,B=Math.max(Math.abs(Ze.x),Math.abs(Ze.y),Math.abs(Ce.x),Math.abs(Ce.y)),ue=Re*B*B;if(Y<=ue){me.splice(We,1),qe--;continue}Ce=Ze}}G(D),L.forEach(G);const H=L.length,J=D;for(let me=0;me<H;me++){const xe=L[me];D=D.concat(xe)}function k(me,xe,Re){return xe||console.error("THREE.ExtrudeGeometry: vec does not exist"),me.clone().addScaledVector(xe,Re)}const X=D.length;function W(me,xe,Re){let Ce,qe,We;const Ze=me.x-xe.x,wt=me.y-xe.y,St=Re.x-me.x,Y=Re.y-me.y,B=Ze*Ze+wt*wt,ue=Ze*Y-wt*St;if(Math.abs(ue)>Number.EPSILON){const Ae=Math.sqrt(B),ze=Math.sqrt(St*St+Y*Y),Ie=xe.x-wt/Ae,lt=xe.y+Ze/Ae,Xe=Re.x-Y/ze,ht=Re.y+St/ze,ct=((Xe-Ie)*Y-(ht-lt)*St)/(Ze*Y-wt*St);Ce=Ie+Ze*ct-me.x,qe=lt+wt*ct-me.y;const je=Ce*Ce+qe*qe;if(je<=2)return new Ue(Ce,qe);We=Math.sqrt(je/2)}else{let Ae=!1;Ze>Number.EPSILON?St>Number.EPSILON&&(Ae=!0):Ze<-Number.EPSILON?St<-Number.EPSILON&&(Ae=!0):Math.sign(wt)===Math.sign(Y)&&(Ae=!0),Ae?(Ce=-wt,qe=Ze,We=Math.sqrt(B)):(Ce=Ze,qe=wt,We=Math.sqrt(B/2))}return new Ue(Ce/We,qe/We)}const ie=[];for(let me=0,xe=J.length,Re=xe-1,Ce=me+1;me<xe;me++,Re++,Ce++)Re===xe&&(Re=0),Ce===xe&&(Ce=0),ie[me]=W(J[me],J[Re],J[Ce]);const se=[];let ye,Ne=ie.concat();for(let me=0,xe=H;me<xe;me++){const Re=L[me];ye=[];for(let Ce=0,qe=Re.length,We=qe-1,Ze=Ce+1;Ce<qe;Ce++,We++,Ze++)We===qe&&(We=0),Ze===qe&&(Ze=0),ye[Ce]=W(Re[Ce],Re[We],Re[Ze]);se.push(ye),Ne=Ne.concat(ye)}let He;if(y===0)He=ls.triangulateShape(J,L);else{const me=[],xe=[];for(let Re=0;Re<y;Re++){const Ce=Re/y,qe=m*Math.cos(Ce*Math.PI/2),We=v*Math.sin(Ce*Math.PI/2)+g;for(let Ze=0,wt=J.length;Ze<wt;Ze++){const St=k(J[Ze],ie[Ze],We);be(St.x,St.y,-qe),Ce===0&&me.push(St)}for(let Ze=0,wt=H;Ze<wt;Ze++){const St=L[Ze];ye=se[Ze];const Y=[];for(let B=0,ue=St.length;B<ue;B++){const Ae=k(St[B],ye[B],We);be(Ae.x,Ae.y,-qe),Ce===0&&Y.push(Ae)}Ce===0&&xe.push(Y)}}He=ls.triangulateShape(me,xe)}const fe=He.length,he=v+g;for(let me=0;me<X;me++){const xe=f?k(D[me],Ne[me],he):D[me];A?(I.copy(E.normals[0]).multiplyScalar(xe.x),M.copy(E.binormals[0]).multiplyScalar(xe.y),R.copy(x[0]).add(I).add(M),be(R.x,R.y,R.z)):be(xe.x,xe.y,0)}for(let me=1;me<=u;me++)for(let xe=0;xe<X;xe++){const Re=f?k(D[xe],Ne[xe],he):D[xe];A?(I.copy(E.normals[me]).multiplyScalar(Re.x),M.copy(E.binormals[me]).multiplyScalar(Re.y),R.copy(x[me]).add(I).add(M),be(R.x,R.y,R.z)):be(Re.x,Re.y,d/u*me)}for(let me=y-1;me>=0;me--){const xe=me/y,Re=m*Math.cos(xe*Math.PI/2),Ce=v*Math.sin(xe*Math.PI/2)+g;for(let qe=0,We=J.length;qe<We;qe++){const Ze=k(J[qe],ie[qe],Ce);be(Ze.x,Ze.y,d+Re)}for(let qe=0,We=L.length;qe<We;qe++){const Ze=L[qe];ye=se[qe];for(let wt=0,St=Ze.length;wt<St;wt++){const Y=k(Ze[wt],ye[wt],Ce);A?be(Y.x,Y.y+x[u-1].y,x[u-1].x+Re):be(Y.x,Y.y,d+Re)}}}le(),ee();function le(){const me=r.length/3;if(f){let xe=0,Re=X*xe;for(let Ce=0;Ce<fe;Ce++){const qe=He[Ce];oe(qe[2]+Re,qe[1]+Re,qe[0]+Re)}xe=u+y*2,Re=X*xe;for(let Ce=0;Ce<fe;Ce++){const qe=He[Ce];oe(qe[0]+Re,qe[1]+Re,qe[2]+Re)}}else{for(let xe=0;xe<fe;xe++){const Re=He[xe];oe(Re[2],Re[1],Re[0])}for(let xe=0;xe<fe;xe++){const Re=He[xe];oe(Re[0]+X*u,Re[1]+X*u,Re[2]+X*u)}}i.addGroup(me,r.length/3-me,0)}function ee(){const me=r.length/3;let xe=0;de(J,xe),xe+=J.length;for(let Re=0,Ce=L.length;Re<Ce;Re++){const qe=L[Re];de(qe,xe),xe+=qe.length}i.addGroup(me,r.length/3-me,1)}function de(me,xe){let Re=me.length;for(;--Re>=0;){const Ce=Re;let qe=Re-1;qe<0&&(qe=me.length-1);for(let We=0,Ze=u+y*2;We<Ze;We++){const wt=X*We,St=X*(We+1),Y=xe+Ce+wt,B=xe+qe+wt,ue=xe+qe+St,Ae=xe+Ce+St;ge(Y,B,ue,Ae)}}}function be(me,xe,Re){l.push(me),l.push(xe),l.push(Re)}function oe(me,xe,Re){Se(me),Se(xe),Se(Re);const Ce=r.length/3,qe=S.generateTopUV(i,r,Ce-3,Ce-2,Ce-1);q(qe[0]),q(qe[1]),q(qe[2])}function ge(me,xe,Re,Ce){Se(me),Se(xe),Se(Ce),Se(xe),Se(Re),Se(Ce);const qe=r.length/3,We=S.generateSideWallUV(i,r,qe-6,qe-3,qe-2,qe-1);q(We[0]),q(We[1]),q(We[3]),q(We[1]),q(We[2]),q(We[3])}function Se(me){r.push(l[me*3+0]),r.push(l[me*3+1]),r.push(l[me*3+2])}function q(me){s.push(me.x),s.push(me.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,i=this.parameters.options;return iY(t,i,e)}static fromJSON(e,t){const i=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=t[e.shapes[s]];i.push(a)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new Jg[r.type]().fromJSON(r)),new Bv(i,e.options)}}const nY={generateTopUV:function(n,e,t,i,r){const s=e[t*3],o=e[t*3+1],a=e[i*3],l=e[i*3+1],c=e[r*3],u=e[r*3+1];return[new Ue(s,o),new Ue(a,l),new Ue(c,u)]},generateSideWallUV:function(n,e,t,i,r,s){const o=e[t*3],a=e[t*3+1],l=e[t*3+2],c=e[i*3],u=e[i*3+1],d=e[i*3+2],f=e[r*3],m=e[r*3+1],v=e[r*3+2],g=e[s*3],y=e[s*3+1],b=e[s*3+2];return Math.abs(a-u)<Math.abs(o-c)?[new Ue(o,1-l),new Ue(c,1-d),new Ue(f,1-v),new Ue(g,1-b)]:[new Ue(a,1-l),new Ue(u,1-d),new Ue(m,1-v),new Ue(y,1-b)]}};function iY(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,r=n.length;i<r;i++){const s=n[i];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class cf extends oa{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new cf(e.radius,e.detail)}}class zv extends Ut{constructor(e=[new Ue(0,-.5),new Ue(.5,0),new Ue(0,.5)],t=12,i=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:r},t=Math.floor(t),r=Ct(r,0,Math.PI*2);const s=[],o=[],a=[],l=[],c=[],u=1/t,d=new K,f=new Ue,m=new K,v=new K,g=new K;let y=0,b=0;for(let S=0;S<=e.length-1;S++)switch(S){case 0:y=e[S+1].x-e[S].x,b=e[S+1].y-e[S].y,m.x=b*1,m.y=-y,m.z=b*0,g.copy(m),m.normalize(),l.push(m.x,m.y,m.z);break;case e.length-1:l.push(g.x,g.y,g.z);break;default:y=e[S+1].x-e[S].x,b=e[S+1].y-e[S].y,m.x=b*1,m.y=-y,m.z=b*0,v.copy(m),m.x+=g.x,m.y+=g.y,m.z+=g.z,m.normalize(),l.push(m.x,m.y,m.z),g.copy(v)}for(let S=0;S<=t;S++){const x=i+S*u*r,A=Math.sin(x),E=Math.cos(x);for(let M=0;M<=e.length-1;M++){d.x=e[M].x*A,d.y=e[M].y,d.z=e[M].x*E,o.push(d.x,d.y,d.z),f.x=S/t,f.y=M/(e.length-1),a.push(f.x,f.y);const I=l[3*M+0]*A,R=l[3*M+1],C=l[3*M+0]*E;c.push(I,R,C)}}for(let S=0;S<t;S++)for(let x=0;x<e.length-1;x++){const A=x+S*e.length,E=A,M=A+e.length,I=A+e.length+1,R=A+1;s.push(E,M,R),s.push(I,R,M)}this.setIndex(s),this.setAttribute("position",new mt(o,3)),this.setAttribute("uv",new mt(a,2)),this.setAttribute("normal",new mt(c,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new zv(e.points,e.segments,e.phiStart,e.phiLength)}}class uf extends oa{constructor(e=1,t=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,r,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new uf(e.radius,e.detail)}}class aa extends Ut{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const s=e/2,o=t/2,a=Math.floor(i),l=Math.floor(r),c=a+1,u=l+1,d=e/a,f=t/l,m=[],v=[],g=[],y=[];for(let b=0;b<u;b++){const S=b*f-o;for(let x=0;x<c;x++){const A=x*d-s;v.push(A,-S,0),g.push(0,0,1),y.push(x/a),y.push(1-b/l)}}for(let b=0;b<l;b++)for(let S=0;S<a;S++){const x=S+c*b,A=S+c*(b+1),E=S+1+c*(b+1),M=S+1+c*b;m.push(x,A,M),m.push(A,E,M)}this.setIndex(m),this.setAttribute("position",new mt(v,3)),this.setAttribute("normal",new mt(g,3)),this.setAttribute("uv",new mt(y,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new aa(e.width,e.height,e.widthSegments,e.heightSegments)}}class Hv extends Ut{constructor(e=.5,t=1,i=32,r=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:r,thetaStart:s,thetaLength:o},i=Math.max(3,i),r=Math.max(1,r);const a=[],l=[],c=[],u=[];let d=e;const f=(t-e)/r,m=new K,v=new Ue;for(let g=0;g<=r;g++){for(let y=0;y<=i;y++){const b=s+y/i*o;m.x=d*Math.cos(b),m.y=d*Math.sin(b),l.push(m.x,m.y,m.z),c.push(0,0,1),v.x=(m.x/t+1)/2,v.y=(m.y/t+1)/2,u.push(v.x,v.y)}d+=f}for(let g=0;g<r;g++){const y=g*(i+1);for(let b=0;b<i;b++){const S=b+y,x=S,A=S+i+1,E=S+i+2,M=S+1;a.push(x,A,M),a.push(A,E,M)}}this.setIndex(a),this.setAttribute("position",new mt(l,3)),this.setAttribute("normal",new mt(c,3)),this.setAttribute("uv",new mt(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Hv(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class Gv extends Ut{constructor(e=new bl([new Ue(0,.5),new Ue(-.5,-.5),new Ue(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],r=[],s=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)c(e);else for(let u=0;u<e.length;u++)c(e[u]),this.addGroup(a,l,u),a+=l,l=0;this.setIndex(i),this.setAttribute("position",new mt(r,3)),this.setAttribute("normal",new mt(s,3)),this.setAttribute("uv",new mt(o,2));function c(u){const d=r.length/3,f=u.extractPoints(t);let m=f.shape;const v=f.holes;ls.isClockWise(m)===!1&&(m=m.reverse());for(let y=0,b=v.length;y<b;y++){const S=v[y];ls.isClockWise(S)===!0&&(v[y]=S.reverse())}const g=ls.triangulateShape(m,v);for(let y=0,b=v.length;y<b;y++){const S=v[y];m=m.concat(S)}for(let y=0,b=m.length;y<b;y++){const S=m[y];r.push(S.x,S.y,0),s.push(0,0,1),o.push(S.x,S.y)}for(let y=0,b=g.length;y<b;y++){const S=g[y],x=S[0]+d,A=S[1]+d,E=S[2]+d;i.push(x,A,E),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return rY(t,e)}static fromJSON(e,t){const i=[];for(let r=0,s=e.shapes.length;r<s;r++){const o=t[e.shapes[r]];i.push(o)}return new Gv(i,e.curveSegments)}}function rY(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const r=n[t];e.shapes.push(r.uuid)}else e.shapes.push(n.uuid);return e}class hf extends Ut{constructor(e=1,t=32,i=16,r=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const l=Math.min(o+a,Math.PI);let c=0;const u=[],d=new K,f=new K,m=[],v=[],g=[],y=[];for(let b=0;b<=i;b++){const S=[],x=b/i;let A=0;b===0&&o===0?A=.5/t:b===i&&l===Math.PI&&(A=-.5/t);for(let E=0;E<=t;E++){const M=E/t;d.x=-e*Math.cos(r+M*s)*Math.sin(o+x*a),d.y=e*Math.cos(o+x*a),d.z=e*Math.sin(r+M*s)*Math.sin(o+x*a),v.push(d.x,d.y,d.z),f.copy(d).normalize(),g.push(f.x,f.y,f.z),y.push(M+A,1-x),S.push(c++)}u.push(S)}for(let b=0;b<i;b++)for(let S=0;S<t;S++){const x=u[b][S+1],A=u[b][S],E=u[b+1][S],M=u[b+1][S+1];(b!==0||o>0)&&m.push(x,A,M),(b!==i-1||l<Math.PI)&&m.push(A,E,M)}this.setIndex(m),this.setAttribute("position",new mt(v,3)),this.setAttribute("normal",new mt(g,3)),this.setAttribute("uv",new mt(y,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new hf(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Vv extends oa{constructor(e=1,t=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,r,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Vv(e.radius,e.detail)}}class Wv extends Ut{constructor(e=1,t=.4,i=12,r=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:r,arc:s},i=Math.floor(i),r=Math.floor(r);const o=[],a=[],l=[],c=[],u=new K,d=new K,f=new K;for(let m=0;m<=i;m++)for(let v=0;v<=r;v++){const g=v/r*s,y=m/i*Math.PI*2;d.x=(e+t*Math.cos(y))*Math.cos(g),d.y=(e+t*Math.cos(y))*Math.sin(g),d.z=t*Math.sin(y),a.push(d.x,d.y,d.z),u.x=e*Math.cos(g),u.y=e*Math.sin(g),f.subVectors(d,u).normalize(),l.push(f.x,f.y,f.z),c.push(v/r),c.push(m/i)}for(let m=1;m<=i;m++)for(let v=1;v<=r;v++){const g=(r+1)*m+v-1,y=(r+1)*(m-1)+v-1,b=(r+1)*(m-1)+v,S=(r+1)*m+v;o.push(g,y,S),o.push(y,b,S)}this.setIndex(o),this.setAttribute("position",new mt(a,3)),this.setAttribute("normal",new mt(l,3)),this.setAttribute("uv",new mt(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Wv(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class jv extends Ut{constructor(e=1,t=.4,i=64,r=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:r,p:s,q:o},i=Math.floor(i),r=Math.floor(r);const a=[],l=[],c=[],u=[],d=new K,f=new K,m=new K,v=new K,g=new K,y=new K,b=new K;for(let x=0;x<=i;++x){const A=x/i*s*Math.PI*2;S(A,s,o,e,m),S(A+.01,s,o,e,v),y.subVectors(v,m),b.addVectors(v,m),g.crossVectors(y,b),b.crossVectors(g,y),g.normalize(),b.normalize();for(let E=0;E<=r;++E){const M=E/r*Math.PI*2,I=-t*Math.cos(M),R=t*Math.sin(M);d.x=m.x+(I*b.x+R*g.x),d.y=m.y+(I*b.y+R*g.y),d.z=m.z+(I*b.z+R*g.z),l.push(d.x,d.y,d.z),f.subVectors(d,m).normalize(),c.push(f.x,f.y,f.z),u.push(x/i),u.push(E/r)}}for(let x=1;x<=i;x++)for(let A=1;A<=r;A++){const E=(r+1)*(x-1)+(A-1),M=(r+1)*x+(A-1),I=(r+1)*x+A,R=(r+1)*(x-1)+A;a.push(E,M,R),a.push(M,I,R)}this.setIndex(a),this.setAttribute("position",new mt(l,3)),this.setAttribute("normal",new mt(c,3)),this.setAttribute("uv",new mt(u,2));function S(x,A,E,M,I){const R=Math.cos(x),C=Math.sin(x),D=E/A*x,L=Math.cos(D);I.x=M*(2+L)*.5*R,I.y=M*(2+L)*C*.5,I.z=M*Math.sin(D)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new jv(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class qv extends Ut{constructor(e=new cx(new K(-1,-1,0),new K(-1,1,0),new K(1,1,0)),t=64,i=1,r=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:r,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new K,l=new K,c=new Ue;let u=new K;const d=[],f=[],m=[],v=[];g(),this.setIndex(v),this.setAttribute("position",new mt(d,3)),this.setAttribute("normal",new mt(f,3)),this.setAttribute("uv",new mt(m,2));function g(){for(let x=0;x<t;x++)y(x);y(s===!1?t:0),S(),b()}function y(x){u=e.getPointAt(x/t,u);const A=o.normals[x],E=o.binormals[x];for(let M=0;M<=r;M++){const I=M/r*Math.PI*2,R=Math.sin(I),C=-Math.cos(I);l.x=C*A.x+R*E.x,l.y=C*A.y+R*E.y,l.z=C*A.z+R*E.z,l.normalize(),f.push(l.x,l.y,l.z),a.x=u.x+i*l.x,a.y=u.y+i*l.y,a.z=u.z+i*l.z,d.push(a.x,a.y,a.z)}}function b(){for(let x=1;x<=t;x++)for(let A=1;A<=r;A++){const E=(r+1)*(x-1)+(A-1),M=(r+1)*x+(A-1),I=(r+1)*x+A,R=(r+1)*(x-1)+A;v.push(E,M,R),v.push(M,I,R)}}function S(){for(let x=0;x<=t;x++)for(let A=0;A<=r;A++)c.x=x/t,c.y=A/r,m.push(c.x,c.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new qv(new Jg[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class gk extends Ut{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],i=new Set,r=new K,s=new K;if(e.index!==null){const o=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let c=0,u=l.length;c<u;++c){const d=l[c],f=d.start,m=d.count;for(let v=f,g=f+m;v<g;v+=3)for(let y=0;y<3;y++){const b=a.getX(v+y),S=a.getX(v+(y+1)%3);r.fromBufferAttribute(o,b),s.fromBufferAttribute(o,S),rR(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,l=o.count/3;a<l;a++)for(let c=0;c<3;c++){const u=3*a+c,d=3*a+(c+1)%3;r.fromBufferAttribute(o,u),s.fromBufferAttribute(o,d),rR(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new mt(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function rR(n,e,t){const i="".concat(n.x,",").concat(n.y,",").concat(n.z,"-").concat(e.x,",").concat(e.y,",").concat(e.z),r="".concat(e.x,",").concat(e.y,",").concat(e.z,"-").concat(n.x,",").concat(n.y,",").concat(n.z);return t.has(i)===!0||t.has(r)===!0?!1:(t.add(i),t.add(r),!0)}var sR=Object.freeze({__proto__:null,BoxGeometry:Hl,CapsuleGeometry:kv,CircleGeometry:Uv,ConeGeometry:lf,CylinderGeometry:af,DodecahedronGeometry:Nv,EdgesGeometry:ok,ExtrudeGeometry:Bv,IcosahedronGeometry:cf,LatheGeometry:zv,OctahedronGeometry:uf,PlaneGeometry:aa,PolyhedronGeometry:oa,RingGeometry:Hv,ShapeGeometry:Gv,SphereGeometry:hf,TetrahedronGeometry:Vv,TorusGeometry:Wv,TorusKnotGeometry:jv,TubeGeometry:qv,WireframeGeometry:gk});class vk extends Ti{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new at(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class _k extends Wn{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class hx extends Ti{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new at(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new at(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=sa,this.normalScale=new Ue(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ps,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class yk extends hx{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Ue(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Ct(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new at(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new at(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new at(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class bk extends Ti{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new at(16777215),this.specular=new at(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new at(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=sa,this.normalScale=new Ue(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ps,this.combine=ef,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class wk extends Ti{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new at(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new at(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=sa,this.normalScale=new Ue(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class Sk extends Ti{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=sa,this.normalScale=new Ue(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class xk extends Ti{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new at(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new at(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=sa,this.normalScale=new Ue(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ps,this.combine=ef,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class dx extends Ti{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=ra,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class fx extends Ti{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class Ek extends Ti{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new at(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=sa,this.normalScale=new Ue(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Ak extends nr{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function cl(n,e){return!n||n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function Mk(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function Tk(n){function e(r,s){return n[r]-n[s]}const t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(e),i}function Sw(n,e,t){const i=n.length,r=new n.constructor(i);for(let s=0,o=0;o!==i;++s){const a=t[s]*e;for(let l=0;l!==e;++l)r[o++]=n[a+l]}return r}function px(n,e,t,i){let r=1,s=n[0];for(;s!==void 0&&s[i]===void 0;)s=n[r++];if(s===void 0)return;let o=s[i];if(o!==void 0)if(Array.isArray(o))do o=s[i],o!==void 0&&(e.push(s.time),t.push(...o)),s=n[r++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[i],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=n[r++];while(s!==void 0);else do o=s[i],o!==void 0&&(e.push(s.time),t.push(o)),s=n[r++];while(s!==void 0)}function sY(n,e,t,i,r=30){const s=n.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const c=s.tracks[l],u=c.getValueSize(),d=[],f=[];for(let m=0;m<c.times.length;++m){const v=c.times[m]*r;if(!(v<t||v>=i)){d.push(c.times[m]);for(let g=0;g<u;++g)f.push(c.values[m*u+g])}}d.length!==0&&(c.times=cl(d,c.times.constructor),c.values=cl(f,c.values.constructor),o.push(c))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s}function oY(n,e=0,t=n,i=30){i<=0&&(i=30);const r=t.tracks.length,s=e/i;for(let o=0;o<r;++o){const a=t.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const c=n.tracks.find(function(b){return b.name===a.name&&b.ValueTypeName===l});if(c===void 0)continue;let u=0;const d=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(u=d/3);let f=0;const m=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(f=m/3);const v=a.times.length-1;let g;if(s<=a.times[0]){const b=u,S=d-u;g=a.values.slice(b,S)}else if(s>=a.times[v]){const b=v*d+u,S=b+d-u;g=a.values.slice(b,S)}else{const b=a.createInterpolant(),S=u,x=d-u;b.evaluate(s),g=b.resultBuffer.slice(S,x)}l==="quaternion"&&new fr().fromArray(g).normalize().conjugate().toArray(g);const y=c.times.length;for(let b=0;b<y;++b){const S=b*m+f;if(l==="quaternion")fr.multiplyQuaternionsFlat(c.values,S,g,0,c.values,S);else{const x=m-f*2;for(let A=0;A<x;++A)c.values[S+A]-=g[A]}}}return n.blendMode=KS,n}class aY{static convertArray(e,t){return cl(e,t)}static isTypedArray(e){return Mk(e)}static getKeyframeOrder(e){return Tk(e)}static sortedArray(e,t,i){return Sw(e,t,i)}static flattenJSON(e,t,i,r){px(e,t,i,r)}static subclip(e,t,i,r,s=30){return sY(e,t,i,r,s)}static makeClipAdditive(e,t=0,i=e,r=30){return oY(e,t,i,r)}}class df{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],s=t[i-1];e:{t:{let o;n:{i:if(!(e<r)){for(let a=i+2;;){if(r===void 0){if(e<s)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(s=r,r=t[++i],e<r)break t}o=t.length;break n}if(!(e>=s)){const a=t[1];e<a&&(i=2,s=a);for(let l=i-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===l)break;if(r=s,s=t[--i-1],e>=s)break t}o=i,i=0;break n}break e}for(;i<o;){const a=i+o>>>1;e<t[a]?o=a:i=a+1}if(r=t[i],s=t[i-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)t[o]=i[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class Ck extends df{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:ol,endingEnd:ol}}intervalChanged_(e,t,i){const r=this.parameterPositions;let s=e-2,o=e+1,a=r[s],l=r[o];if(a===void 0)switch(this.getSettings_().endingStart){case al:s=e,a=2*t-i;break;case Cd:s=r.length-2,a=t+r[s]-r[s+1];break;default:s=e,a=i}if(l===void 0)switch(this.getSettings_().endingEnd){case al:o=e,l=2*i-t;break;case Cd:o=1,l=i+r[1]-r[0];break;default:o=e-1,l=t}const c=(i-t)*.5,u=this.valueSize;this._weightPrev=c/(t-a),this._weightNext=c/(l-i),this._offsetPrev=s*u,this._offsetNext=o*u}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=this._offsetPrev,d=this._offsetNext,f=this._weightPrev,m=this._weightNext,v=(i-t)/(r-t),g=v*v,y=g*v,b=-f*y+2*f*g-f*v,S=(1+f)*y+(-1.5-2*f)*g+(-.5+f)*v+1,x=(-1-m)*y+(1.5+m)*g+.5*v,A=m*y-m*g;for(let E=0;E!==a;++E)s[E]=b*o[u+E]+S*o[c+E]+x*o[l+E]+A*o[d+E];return s}}class mx extends df{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=(i-t)/(r-t),d=1-u;for(let f=0;f!==a;++f)s[f]=o[c+f]*d+o[l+f]*u;return s}}class Rk extends df{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class Wr{constructor(e,t,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=cl(t,this.TimeBufferType),this.values=cl(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:cl(e.times,Array),values:cl(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new Rk(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new mx(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new Ck(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Td:t=this.InterpolantFactoryMethodDiscrete;break;case Yg:t=this.InterpolantFactoryMethodLinear;break;case Bm:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Td;case this.InterpolantFactoryMethodLinear:return Yg;case this.InterpolantFactoryMethodSmooth:return Bm}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let s=0,o=r-1;for(;s!==r&&i[s]<e;)++s;for(;o!==-1&&i[o]>t;)--o;if(++o,s!==0||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=i.slice(s,o),this.values=this.values.slice(s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,s=i.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=i[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(r!==void 0&&Mk(r))for(let a=0,l=r.length;a!==l;++a){const c=r[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),r=this.getInterpolation()===Bm,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const c=e[a],u=e[a+1];if(c!==u&&(a!==1||c!==e[0]))if(r)l=!0;else{const d=a*i,f=d-i,m=d+i;for(let v=0;v!==i;++v){const g=t[d+v];if(g!==t[f+v]||g!==t[m+v]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const d=a*i,f=o*i;for(let m=0;m!==i;++m)t[f+m]=t[d+m]}++o}}if(s>0){e[o]=e[s];for(let a=s*i,l=o*i,c=0;c!==i;++c)t[l+c]=t[a+c];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*i)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),i=this.constructor,r=new i(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}Wr.prototype.ValueTypeName="";Wr.prototype.TimeBufferType=Float32Array;Wr.prototype.ValueBufferType=Float32Array;Wr.prototype.DefaultInterpolation=Yg;class Gl extends Wr{constructor(e,t,i){super(e,t,i)}}Gl.prototype.ValueTypeName="bool";Gl.prototype.ValueBufferType=Array;Gl.prototype.DefaultInterpolation=Td;Gl.prototype.InterpolantFactoryMethodLinear=void 0;Gl.prototype.InterpolantFactoryMethodSmooth=void 0;class gx extends Wr{constructor(e,t,i,r){super(e,t,i,r)}}gx.prototype.ValueTypeName="color";class Nd extends Wr{constructor(e,t,i,r){super(e,t,i,r)}}Nd.prototype.ValueTypeName="number";class Ik extends df{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(i-t)/(r-t);let c=e*a;for(let u=c+a;c!==u;c+=4)fr.slerpFlat(s,0,o,c-a,o,c,l);return s}}class ff extends Wr{constructor(e,t,i,r){super(e,t,i,r)}InterpolantFactoryMethodLinear(e){return new Ik(this.times,this.values,this.getValueSize(),e)}}ff.prototype.ValueTypeName="quaternion";ff.prototype.InterpolantFactoryMethodSmooth=void 0;class Vl extends Wr{constructor(e,t,i){super(e,t,i)}}Vl.prototype.ValueTypeName="string";Vl.prototype.ValueBufferType=Array;Vl.prototype.DefaultInterpolation=Td;Vl.prototype.InterpolantFactoryMethodLinear=void 0;Vl.prototype.InterpolantFactoryMethodSmooth=void 0;class Fd extends Wr{constructor(e,t,i,r){super(e,t,i,r)}}Fd.prototype.ValueTypeName="vector";class Bd{constructor(e="",t=-1,i=[],r=Ev){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=Cr(),this.userData={},this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,r=1/(e.fps||1);for(let o=0,a=i.length;o!==a;++o)t.push(cY(i[o]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s.userData=JSON.parse(e.userData||"{}"),s}static toJSON(e){const t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode,userData:JSON.stringify(e.userData)};for(let s=0,o=i.length;s!==o;++s)t.push(Wr.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(e,t,i,r){const s=t.length,o=[];for(let a=0;a<s;a++){let l=[],c=[];l.push((a+s-1)%s,a,(a+1)%s),c.push(0,1,0);const u=Tk(l);l=Sw(l,1,u),c=Sw(c,1,u),!r&&l[0]===0&&(l.push(s),c.push(c[0])),o.push(new Nd(".morphTargetInfluences["+t[a].name+"]",l,c).scale(1/i))}return new this(e,-1,o)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const r={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const c=e[a],u=c.name.match(s);if(u&&u.length>1){const d=u[1];let f=r[d];f||(r[d]=f=[]),f.push(c)}}const o=[];for(const a in r)o.push(this.CreateFromMorphTargetSequence(a,r[a],t,i));return o}static parseAnimation(e,t){if(console.warn("THREE.AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(d,f,m,v,g){if(m.length!==0){const y=[],b=[];px(m,y,b,v),y.length!==0&&g.push(new d(f,y,b))}},r=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let d=0;d<c.length;d++){const f=c[d].keys;if(!(!f||f.length===0))if(f[0].morphTargets){const m={};let v;for(v=0;v<f.length;v++)if(f[v].morphTargets)for(let g=0;g<f[v].morphTargets.length;g++)m[f[v].morphTargets[g]]=-1;for(const g in m){const y=[],b=[];for(let S=0;S!==f[v].morphTargets.length;++S){const x=f[v];y.push(x.time),b.push(x.morphTarget===g?1:0)}r.push(new Nd(".morphTargetInfluence["+g+"]",y,b))}l=m.length*o}else{const m=".bones["+t[d].name+"]";i(Fd,m+".position",f,"pos",r),i(ff,m+".quaternion",f,"rot",r),i(Fd,m+".scale",f,"scl",r)}}return r.length===0?null:new this(s,l,r,a)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,r=e.length;i!==r;++i){const s=this.tracks[i];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let i=0;i<this.tracks.length;i++)e.push(this.tracks[i].clone());const t=new this.constructor(this.name,this.duration,e,this.blendMode);return t.userData=JSON.parse(JSON.stringify(this.userData)),t}toJSON(){return this.constructor.toJSON(this)}}function lY(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Nd;case"vector":case"vector2":case"vector3":case"vector4":return Fd;case"color":return gx;case"quaternion":return ff;case"bool":case"boolean":return Gl;case"string":return Vl}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function cY(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=lY(n.type);if(n.times===void 0){const t=[],i=[];px(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const Ps={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class pf{constructor(e,t,i){const r=this;let s=!1,o=0,a=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.abortController=new AbortController,this.itemStart=function(u){a++,s===!1&&r.onStart!==void 0&&r.onStart(u,o,a),s=!0},this.itemEnd=function(u){o++,r.onProgress!==void 0&&r.onProgress(u,o,a),o===a&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(u){r.onError!==void 0&&r.onError(u)},this.resolveURL=function(u){return l?l(u):u},this.setURLModifier=function(u){return l=u,this},this.addHandler=function(u,d){return c.push(u,d),this},this.removeHandler=function(u){const d=c.indexOf(u);return d!==-1&&c.splice(d,2),this},this.getHandler=function(u){for(let d=0,f=c.length;d<f;d+=2){const m=c[d],v=c[d+1];if(m.global&&(m.lastIndex=0),m.test(u))return v}return null},this.abort=function(){return this.abortController.abort(),this.abortController=new AbortController,this}}}const Dk=new pf;class ir{constructor(e){this.manager=e!==void 0?e:Dk,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(r,s){i.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}abort(){return this}}ir.DEFAULT_MATERIAL_NAME="__DEFAULT";const to={};class uY extends Error{constructor(e,t){super(e),this.response=t}}class Rr extends ir{constructor(e){super(e),this.mimeType="",this.responseType="",this._abortController=new AbortController}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=Ps.get("file:".concat(e));if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(to[e]!==void 0){to[e].push({onLoad:t,onProgress:i,onError:r});return}to[e]=[],to[e].push({onLoad:t,onProgress:i,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin",signal:typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal}),a=this.mimeType,l=this.responseType;fetch(o).then(c=>{if(c.status===200||c.status===0){if(c.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||c.body===void 0||c.body.getReader===void 0)return c;const u=to[e],d=c.body.getReader(),f=c.headers.get("X-File-Size")||c.headers.get("Content-Length"),m=f?parseInt(f):0,v=m!==0;let g=0;const y=new ReadableStream({start(b){S();function S(){d.read().then(({done:x,value:A})=>{if(x)b.close();else{g+=A.byteLength;const E=new ProgressEvent("progress",{lengthComputable:v,loaded:g,total:m});for(let M=0,I=u.length;M<I;M++){const R=u[M];R.onProgress&&R.onProgress(E)}b.enqueue(A),S()}},x=>{b.error(x)})}}});return new Response(y)}else throw new uY('fetch for "'.concat(c.url,'" responded with ').concat(c.status,": ").concat(c.statusText),c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(u=>new DOMParser().parseFromString(u,a));case"json":return c.json();default:if(a==="")return c.text();{const d=/charset="?([^;"\s]*)"?/i.exec(a),f=d&&d[1]?d[1].toLowerCase():void 0,m=new TextDecoder(f);return c.arrayBuffer().then(v=>m.decode(v))}}}).then(c=>{Ps.add("file:".concat(e),c);const u=to[e];delete to[e];for(let d=0,f=u.length;d<f;d++){const m=u[d];m.onLoad&&m.onLoad(c)}}).catch(c=>{const u=to[e];if(u===void 0)throw this.manager.itemError(e),c;delete to[e];for(let d=0,f=u.length;d<f;d++){const m=u[d];m.onError&&m.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}class hY extends ir{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new Rr(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t=[];for(let i=0;i<e.length;i++){const r=Bd.parse(e[i]);t.push(r)}return t}}class dY extends ir{constructor(e){super(e)}load(e,t,i,r){const s=this,o=[],a=new Ov,l=new Rr(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let c=0;function u(d){l.load(e[d],function(f){const m=s.parse(f,!0);o[d]={width:m.width,height:m.height,format:m.format,mipmaps:m.mipmaps},c+=1,c===6&&(m.mipmapCount===1&&(a.minFilter=Zt),a.image=o,a.format=m.format,a.needsUpdate=!0,t&&t(a))},i,r)}if(Array.isArray(e))for(let d=0,f=e.length;d<f;++d)u(d);else l.load(e,function(d){const f=s.parse(d,!0);if(f.isCubemap){const m=f.mipmaps.length/f.mipmapCount;for(let v=0;v<m;v++){o[v]={mipmaps:[]};for(let g=0;g<f.mipmapCount;g++)o[v].mipmaps.push(f.mipmaps[v*f.mipmapCount+g]),o[v].format=f.format,o[v].width=f.width,o[v].height=f.height}a.image=o}else a.image.width=f.width,a.image.height=f.height,a.mipmaps=f.mipmaps;f.mipmapCount===1&&(a.minFilter=Zt),a.format=f.format,a.needsUpdate=!0,t&&t(a)},i,r);return a}}const Oc=new WeakMap;class zd extends ir{constructor(e){super(e)}load(e,t,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Ps.get("image:".concat(e));if(o!==void 0){if(o.complete===!0)s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0);else{let d=Oc.get(o);d===void 0&&(d=[],Oc.set(o,d)),d.push({onLoad:t,onError:r})}return o}const a=Dd("img");function l(){u(),t&&t(this);const d=Oc.get(this)||[];for(let f=0;f<d.length;f++){const m=d[f];m.onLoad&&m.onLoad(this)}Oc.delete(this),s.manager.itemEnd(e)}function c(d){u(),r&&r(d),Ps.remove("image:".concat(e));const f=Oc.get(this)||[];for(let m=0;m<f.length;m++){const v=f[m];v.onError&&v.onError(d)}Oc.delete(this),s.manager.itemError(e),s.manager.itemEnd(e)}function u(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),Ps.add("image:".concat(e),a),s.manager.itemStart(e),a.src=e,a}}class fY extends ir{constructor(e){super(e)}load(e,t,i,r){const s=new of;s.colorSpace=hn;const o=new zd(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(c){o.load(e[c],function(u){s.images[c]=u,a++,a===6&&(s.needsUpdate=!0,t&&t(s))},void 0,r)}for(let c=0;c<e.length;++c)l(c);return s}}class vx extends ir{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new ds,a=new Rr(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(l){let c;try{c=s.parse(l)}catch(u){if(r!==void 0)r(u);else{console.error(u);return}}c.image!==void 0?o.image=c.image:c.data!==void 0&&(o.image.width=c.width,o.image.height=c.height,o.image.data=c.data),o.wrapS=c.wrapS!==void 0?c.wrapS:ui,o.wrapT=c.wrapT!==void 0?c.wrapT:ui,o.magFilter=c.magFilter!==void 0?c.magFilter:Zt,o.minFilter=c.minFilter!==void 0?c.minFilter:Zt,o.anisotropy=c.anisotropy!==void 0?c.anisotropy:1,c.colorSpace!==void 0&&(o.colorSpace=c.colorSpace),c.flipY!==void 0&&(o.flipY=c.flipY),c.format!==void 0&&(o.format=c.format),c.type!==void 0&&(o.type=c.type),c.mipmaps!==void 0&&(o.mipmaps=c.mipmaps,o.minFilter=Ds),c.mipmapCount===1&&(o.minFilter=Zt),c.generateMipmaps!==void 0&&(o.generateMipmaps=c.generateMipmaps),o.needsUpdate=!0,t&&t(o,c)},i,r),o}}class pY extends ir{constructor(e){super(e)}load(e,t,i,r){const s=new En,o=new zd(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,t!==void 0&&t(s)},i,r),s}}class la extends an{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new at(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}}class Pk extends la{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(an.DEFAULT_UP),this.updateMatrix(),this.groundColor=new at(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const N0=new Rt,oR=new K,aR=new K;class _x{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Ue(512,512),this.mapType=Zn,this.map=null,this.mapPass=null,this.matrix=new Rt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Du,this._frameExtents=new Ue(1,1),this._viewportCount=1,this._viewports=[new Jt(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;oR.setFromMatrixPosition(e.matrixWorld),t.position.copy(oR),aR.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(aR),t.updateMatrixWorld(),N0.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(N0,t.coordinateSystem,t.reversedDepth),t.reversedDepth?i.set(.5,0,0,.5,0,.5,0,.5,0,0,1,0,0,0,0,1):i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(N0)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.autoUpdate=e.autoUpdate,this.needsUpdate=e.needsUpdate,this.normalBias=e.normalBias,this.blurSamples=e.blurSamples,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class mY extends _x{constructor(){super(new Ei(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1,this.aspect=1}updateMatrices(e){const t=this.camera,i=gu*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height*this.aspect,s=e.distance||t.far;(i!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=i,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class Ok extends la{constructor(e,t,i=0,r=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(an.DEFAULT_UP),this.updateMatrix(),this.target=new an,this.distance=i,this.angle=r,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new mY}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const lR=new Rt,Oh=new K,F0=new K;class gY extends _x{constructor(){super(new Ei(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Ue(4,2),this._viewportCount=6,this._viewports=[new Jt(2,1,1,1),new Jt(0,1,1,1),new Jt(3,1,1,1),new Jt(1,1,1,1),new Jt(3,0,1,1),new Jt(1,0,1,1)],this._cubeDirections=[new K(1,0,0),new K(-1,0,0),new K(0,0,1),new K(0,0,-1),new K(0,1,0),new K(0,-1,0)],this._cubeUps=[new K(0,1,0),new K(0,1,0),new K(0,1,0),new K(0,1,0),new K(0,0,1),new K(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,r=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),Oh.setFromMatrixPosition(e.matrixWorld),i.position.copy(Oh),F0.copy(i.position),F0.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(F0),i.updateMatrixWorld(),r.makeTranslation(-Oh.x,-Oh.y,-Oh.z),lR.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(lR,i.coordinateSystem,i.reversedDepth)}}class Lk extends la{constructor(e,t,i=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new gY}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class mf extends sf{constructor(e=-1,t=1,i=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,o=i+e,a=r+t,l=r-t;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,o=s+c*this.view.width,a-=u*this.view.offsetY,l=a-u*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}class vY extends _x{constructor(){super(new mf(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class kk extends la{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(an.DEFAULT_UP),this.updateMatrix(),this.target=new an,this.shadow=new vY}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class Uk extends la{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class Nk extends la{constructor(e,t,i=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class Fk{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new K)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*r),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*i),t.addScaledVector(o[4],1.092548*(i*r)),t.addScaledVector(o[5],1.092548*(r*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(i*s)),t.addScaledVector(o[8],.546274*(i*i-r*r)),t}getIrradianceAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*r),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*i),t.addScaledVector(o[4],2*.429043*i*r),t.addScaledVector(o[5],2*.429043*r*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*i*s),t.addScaledVector(o[8],.429043*(i*i-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(e,t+r*3);return this}toArray(e=[],t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(e,t+r*3);return e}static getBasisAt(e,t){const i=e.x,r=e.y,s=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*s,t[3]=.488603*i,t[4]=1.092548*i*r,t[5]=1.092548*r*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*i*s,t[8]=.546274*(i*i-r*r)}}class Bk extends la{constructor(e=new Fk,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class Xv extends ir{constructor(e){super(e),this.textures={}}load(e,t,i,r){const s=this,o=new Rr(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t=this.textures;function i(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const r=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new at().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(r.dispersion=e.dispersion),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(r.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(r.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(r.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(r.depthFunc=e.depthFunc),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(r.blendSrc=e.blendSrc),e.blendDst!==void 0&&(r.blendDst=e.blendDst),e.blendEquation!==void 0&&(r.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(r.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(r.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(r.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&r.blendColor!==void 0&&r.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(r.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==void 0&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(r.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(r.uniforms[s]={},o.type){case"t":r.uniforms[s].value=i(o.value);break;case"c":r.uniforms[s].value=new at().setHex(o.value);break;case"v2":r.uniforms[s].value=new Ue().fromArray(o.value);break;case"v3":r.uniforms[s].value=new K().fromArray(o.value);break;case"v4":r.uniforms[s].value=new Jt().fromArray(o.value);break;case"m3":r.uniforms[s].value=new kt().fromArray(o.value);break;case"m4":r.uniforms[s].value=new Rt().fromArray(o.value);break;default:r.uniforms[s].value=o.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)r.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(r.lights=e.lights),e.clipping!==void 0&&(r.clipping=e.clipping),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=i(e.map)),e.matcap!==void 0&&(r.matcap=i(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),r.normalScale=new Ue().fromArray(s)}return e.displacementMap!==void 0&&(r.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=i(e.envMap)),e.envMapRotation!==void 0&&r.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new Ue().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=i(e.thicknessMap)),e.anisotropyMap!==void 0&&(r.anisotropyMap=i(e.anisotropyMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=i(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return Xv.createMaterialFromType(e)}static createMaterialFromType(e){const t={ShadowMaterial:vk,SpriteMaterial:tx,RawShaderMaterial:_k,ShaderMaterial:Wn,PointsMaterial:ix,MeshPhysicalMaterial:yk,MeshStandardMaterial:hx,MeshPhongMaterial:bk,MeshToonMaterial:wk,MeshNormalMaterial:Sk,MeshLambertMaterial:xk,MeshDepthMaterial:dx,MeshDistanceMaterial:fx,MeshBasicMaterial:vo,MeshMatcapMaterial:Ek,LineDashedMaterial:Ak,LineBasicMaterial:nr,Material:Ti};return new t[e]}}class xw{static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class zk extends Ut{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class Hk extends ir{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new Rr(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t={},i={};function r(m,v){if(t[v]!==void 0)return t[v];const y=m.interleavedBuffers[v],b=s(m,y.buffer),S=Wc(y.type,b),x=new Iv(S,y.stride);return x.uuid=y.uuid,t[v]=x,x}function s(m,v){if(i[v]!==void 0)return i[v];const y=m.arrayBuffers[v],b=new Uint32Array(y).buffer;return i[v]=b,b}const o=e.isInstancedBufferGeometry?new zk:new Ut,a=e.data.index;if(a!==void 0){const m=Wc(a.type,a.array);o.setIndex(new _n(m,1))}const l=e.data.attributes;for(const m in l){const v=l[m];let g;if(v.isInterleavedBufferAttribute){const y=r(e.data,v.data);g=new Dl(y,v.itemSize,v.offset,v.normalized)}else{const y=Wc(v.type,v.array),b=v.isInstancedBufferAttribute?_u:_n;g=new b(y,v.itemSize,v.normalized)}v.name!==void 0&&(g.name=v.name),v.usage!==void 0&&g.setUsage(v.usage),o.setAttribute(m,g)}const c=e.data.morphAttributes;if(c)for(const m in c){const v=c[m],g=[];for(let y=0,b=v.length;y<b;y++){const S=v[y];let x;if(S.isInterleavedBufferAttribute){const A=r(e.data,S.data);x=new Dl(A,S.itemSize,S.offset,S.normalized)}else{const A=Wc(S.type,S.array);x=new _n(A,S.itemSize,S.normalized)}S.name!==void 0&&(x.name=S.name),g.push(x)}o.morphAttributes[m]=g}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const d=e.data.groups||e.data.drawcalls||e.data.offsets;if(d!==void 0)for(let m=0,v=d.length;m!==v;++m){const g=d[m];o.addGroup(g.start,g.count,g.materialIndex)}const f=e.data.boundingSphere;return f!==void 0&&(o.boundingSphere=new Pi().fromJSON(f)),e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class _Y extends ir{constructor(e){super(e)}load(e,t,i,r){const s=this,o=this.path===""?xw.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new Rr(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let c=null;try{c=JSON.parse(l)}catch(d){r!==void 0&&r(d),console.error("THREE:ObjectLoader: Can't parse "+e+".",d.message);return}const u=c.metadata;if(u===void 0||u.type===void 0||u.type.toLowerCase()==="geometry"){r!==void 0&&r(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(c,t)},i,r)}async loadAsync(e,t){const i=this,r=this.path===""?xw.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const s=new Rr(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,t),a=JSON.parse(o),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(a)}parse(e,t){const i=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,r),o=this.parseImages(e.images,function(){t!==void 0&&t(c)}),a=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,a),c=this.parseObject(e.object,s,l,a,i),u=this.parseSkeletons(e.skeletons,c);if(this.bindSkeletons(c,u),this.bindLightTargets(c),t!==void 0){let d=!1;for(const f in o)if(o[f].data instanceof HTMLImageElement){d=!0;break}d===!1&&t(c)}return c}async parseAsync(e){const t=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,r,a,o,t),c=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,c),this.bindLightTargets(l),l}parseShapes(e){const t={};if(e!==void 0)for(let i=0,r=e.length;i<r;i++){const s=new bl().fromJSON(e[i]);t[s.uuid]=s}return t}parseSkeletons(e,t){const i={},r={};if(t.traverse(function(s){s.isBone&&(r[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new Dv().fromJSON(e[s],r);i[a.uuid]=a}return i}parseGeometries(e,t){const i={};if(e!==void 0){const r=new Hk;for(let s=0,o=e.length;s<o;s++){let a;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=r.parse(l);break;default:l.type in sR?a=sR[l.type].fromJSON(l,t):console.warn('THREE.ObjectLoader: Unsupported geometry type "'.concat(l.type,'"'))}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),l.userData!==void 0&&(a.userData=l.userData),i[l.uuid]=a}}return i}parseMaterials(e,t){const i={},r={};if(e!==void 0){const s=new Xv;s.setTextures(t);for(let o=0,a=e.length;o<a;o++){const l=e[o];i[l.uuid]===void 0&&(i[l.uuid]=s.parse(l)),r[l.uuid]=i[l.uuid]}}return r}parseAnimations(e){const t={};if(e!==void 0)for(let i=0;i<e.length;i++){const r=e[i],s=Bd.parse(r);t[s.uuid]=s}return t}parseImages(e,t){const i=this,r={};let s;function o(l){return i.manager.itemStart(l),s.load(l,function(){i.manager.itemEnd(l)},void 0,function(){i.manager.itemError(l),i.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const c=l,u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:i.resourcePath+c;return o(u)}else return l.data?{data:Wc(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new pf(t);s=new zd(l),s.setCrossOrigin(this.crossOrigin);for(let c=0,u=e.length;c<u;c++){const d=e[c],f=d.url;if(Array.isArray(f)){const m=[];for(let v=0,g=f.length;v<g;v++){const y=f[v],b=a(y);b!==null&&(b instanceof HTMLImageElement?m.push(b):m.push(new ds(b.data,b.width,b.height)))}r[d.uuid]=new Ho(m)}else{const m=a(d.url);r[d.uuid]=new Ho(m)}}}return r}async parseImagesAsync(e){const t=this,i={};let r;async function s(o){if(typeof o=="string"){const a=o,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:t.resourcePath+a;return await r.loadAsync(l)}else return o.data?{data:Wc(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){r=new zd(this.manager),r.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const l=e[o],c=l.url;if(Array.isArray(c)){const u=[];for(let d=0,f=c.length;d<f;d++){const m=c[d],v=await s(m);v!==null&&(v instanceof HTMLImageElement?u.push(v):u.push(new ds(v.data,v.width,v.height)))}i[l.uuid]=new Ho(u)}else{const u=await s(l.url);i[l.uuid]=new Ho(u)}}}return i}parseTextures(e,t){function i(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const r={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),t[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=t[a.image],c=l.data;let u;Array.isArray(c)?(u=new of,c.length===6&&(u.needsUpdate=!0)):(c&&c.data?u=new ds:u=new En,c&&(u.needsUpdate=!0)),u.source=l,u.uuid=a.uuid,a.name!==void 0&&(u.name=a.name),a.mapping!==void 0&&(u.mapping=i(a.mapping,yY)),a.channel!==void 0&&(u.channel=a.channel),a.offset!==void 0&&u.offset.fromArray(a.offset),a.repeat!==void 0&&u.repeat.fromArray(a.repeat),a.center!==void 0&&u.center.fromArray(a.center),a.rotation!==void 0&&(u.rotation=a.rotation),a.wrap!==void 0&&(u.wrapS=i(a.wrap[0],cR),u.wrapT=i(a.wrap[1],cR)),a.format!==void 0&&(u.format=a.format),a.internalFormat!==void 0&&(u.internalFormat=a.internalFormat),a.type!==void 0&&(u.type=a.type),a.colorSpace!==void 0&&(u.colorSpace=a.colorSpace),a.minFilter!==void 0&&(u.minFilter=i(a.minFilter,uR)),a.magFilter!==void 0&&(u.magFilter=i(a.magFilter,uR)),a.anisotropy!==void 0&&(u.anisotropy=a.anisotropy),a.flipY!==void 0&&(u.flipY=a.flipY),a.generateMipmaps!==void 0&&(u.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(u.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(u.unpackAlignment=a.unpackAlignment),a.compareFunction!==void 0&&(u.compareFunction=a.compareFunction),a.userData!==void 0&&(u.userData=a.userData),r[a.uuid]=u}return r}parseObject(e,t,i,r,s){let o;function a(f){return t[f]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",f),t[f]}function l(f){if(f!==void 0){if(Array.isArray(f)){const m=[];for(let v=0,g=f.length;v<g;v++){const y=f[v];i[y]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",y),m.push(i[y])}return m}return i[f]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",f),i[f]}}function c(f){return r[f]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",f),r[f]}let u,d;switch(e.type){case"Scene":o=new Od,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new at(e.background):o.background=c(e.background)),e.environment!==void 0&&(o.environment=c(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new Rv(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new Cv(e.fog.color,e.fog.density)),e.fog.name!==""&&(o.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&o.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(o.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&o.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":o=new Ei(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new mf(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new Uk(e.color,e.intensity);break;case"DirectionalLight":o=new kk(e.color,e.intensity),o.target=e.target||"";break;case"PointLight":o=new Lk(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new Nk(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new Ok(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),o.target=e.target||"";break;case"HemisphereLight":o=new Pk(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new Bk().fromJSON(e);break;case"SkinnedMesh":u=a(e.geometry),d=l(e.material),o=new ek(u,d),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":u=a(e.geometry),d=l(e.material),o=new Fn(u,d);break;case"InstancedMesh":u=a(e.geometry),d=l(e.material);const f=e.count,m=e.instanceMatrix,v=e.instanceColor;o=new tk(u,d,f),o.instanceMatrix=new _u(new Float32Array(m.array),16),v!==void 0&&(o.instanceColor=new _u(new Float32Array(v.array),v.itemSize));break;case"BatchedMesh":u=a(e.geometry),d=l(e.material),o=new nk(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,d),o.geometry=u,o.perObjectFrustumCulled=e.perObjectFrustumCulled,o.sortObjects=e.sortObjects,o._drawRanges=e.drawRanges,o._reservedRanges=e.reservedRanges,o._geometryInfo=e.geometryInfo.map(g=>{let y=null,b=null;return g.boundingBox!==void 0&&(y=new Hi().fromJSON(g.boundingBox)),g.boundingSphere!==void 0&&(b=new Pi().fromJSON(g.boundingSphere)),{...g,boundingBox:y,boundingSphere:b}}),o._instanceInfo=e.instanceInfo,o._availableInstanceIds=e._availableInstanceIds,o._availableGeometryIds=e._availableGeometryIds,o._nextIndexStart=e.nextIndexStart,o._nextVertexStart=e.nextVertexStart,o._geometryCount=e.geometryCount,o._maxInstanceCount=e.maxInstanceCount,o._maxVertexCount=e.maxVertexCount,o._maxIndexCount=e.maxIndexCount,o._geometryInitialized=e.geometryInitialized,o._matricesTexture=c(e.matricesTexture.uuid),o._indirectTexture=c(e.indirectTexture.uuid),e.colorsTexture!==void 0&&(o._colorsTexture=c(e.colorsTexture.uuid)),e.boundingSphere!==void 0&&(o.boundingSphere=new Pi().fromJSON(e.boundingSphere)),e.boundingBox!==void 0&&(o.boundingBox=new Hi().fromJSON(e.boundingBox));break;case"LOD":o=new ZL;break;case"Line":o=new ea(a(e.geometry),l(e.material));break;case"LineLoop":o=new ik(a(e.geometry),l(e.material));break;case"LineSegments":o=new Ns(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new rk(a(e.geometry),l(e.material));break;case"Sprite":o=new QL(l(e.material));break;case"Group":o=new jc;break;case"Bone":o=new nx;break;default:o=new an}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(o.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const f=e.children;for(let m=0;m<f.length;m++)o.add(this.parseObject(f[m],t,i,r,s))}if(e.animations!==void 0){const f=e.animations;for(let m=0;m<f.length;m++){const v=f[m];o.animations.push(s[v])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const f=e.levels;for(let m=0;m<f.length;m++){const v=f[m],g=o.getObjectByProperty("uuid",v.object);g!==void 0&&o.addLevel(g,v.distance,v.hysteresis)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const r=t[i.skeleton];r===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(r,i.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const i=t.target,r=e.getObjectByProperty("uuid",i);r!==void 0?t.target=r:t.target=new an}})}}const yY={UVMapping:Qo,CubeReflectionMapping:mo,CubeRefractionMapping:Zo,EquirectangularReflectionMapping:xd,EquirectangularRefractionMapping:Ed,CubeUVReflectionMapping:Ru},cR={RepeatWrapping:Ad,ClampToEdgeWrapping:ui,MirroredRepeatWrapping:Md},uR={NearestFilter:gi,NearestMipmapNearestFilter:VS,NearestMipmapLinearFilter:Vc,LinearFilter:Zt,LinearMipmapNearestFilter:Zh,LinearMipmapLinearFilter:Ds},B0=new WeakMap;class bY extends ir{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"},this._abortController=new AbortController}setOptions(e){return this.options=e,this}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Ps.get("image-bitmap:".concat(e));if(o!==void 0){if(s.manager.itemStart(e),o.then){o.then(c=>{if(B0.has(o)===!0)r&&r(B0.get(o)),s.manager.itemError(e),s.manager.itemEnd(e);else return t&&t(c),s.manager.itemEnd(e),c});return}return setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o}const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader,a.signal=typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal;const l=fetch(e,a).then(function(c){return c.blob()}).then(function(c){return createImageBitmap(c,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(c){return Ps.add("image-bitmap:".concat(e),c),t&&t(c),s.manager.itemEnd(e),c}).catch(function(c){r&&r(c),B0.set(l,c),Ps.remove("image-bitmap:".concat(e)),s.manager.itemError(e),s.manager.itemEnd(e)});Ps.add("image-bitmap:".concat(e),l),s.manager.itemStart(e)}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}let pm;class yx{static getContext(){return pm===void 0&&(pm=new(window.AudioContext||window.webkitAudioContext)),pm}static setContext(e){pm=e}}class wY extends ir{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new Rr(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{const c=l.slice(0);yx.getContext().decodeAudioData(c,function(d){t(d)}).catch(a)}catch(c){a(c)}},i,r);function a(l){r?r(l):console.error(l),s.manager.itemError(e)}}}const hR=new Rt,dR=new Rt,Ga=new Rt;class SY{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Ei,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Ei,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,Ga.copy(e.projectionMatrix);const r=t.eyeSep/2,s=r*t.near/t.focus,o=t.near*Math.tan(yl*t.fov*.5)/t.zoom;let a,l;dR.elements[12]=-r,hR.elements[12]=r,a=-o*t.aspect+s,l=o*t.aspect+s,Ga.elements[0]=2*t.near/(l-a),Ga.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(Ga),a=-o*t.aspect-s,l=o*t.aspect-s,Ga.elements[0]=2*t.near/(l-a),Ga.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(Ga)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(dR),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(hR)}}class Gk extends Ei{constructor(e=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=e}}class Vk{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=performance.now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=performance.now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}const Va=new K,z0=new fr,xY=new K,Wa=new K,ja=new K;class EY extends an{constructor(){super(),this.type="AudioListener",this.context=yx.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Vk}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Va,z0,xY),Wa.set(0,0,-1).applyQuaternion(z0),ja.set(0,1,0).applyQuaternion(z0),t.positionX){const i=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Va.x,i),t.positionY.linearRampToValueAtTime(Va.y,i),t.positionZ.linearRampToValueAtTime(Va.z,i),t.forwardX.linearRampToValueAtTime(Wa.x,i),t.forwardY.linearRampToValueAtTime(Wa.y,i),t.forwardZ.linearRampToValueAtTime(Wa.z,i),t.upX.linearRampToValueAtTime(ja.x,i),t.upY.linearRampToValueAtTime(ja.y,i),t.upZ.linearRampToValueAtTime(ja.z,i)}else t.setPosition(Va.x,Va.y,Va.z),t.setOrientation(Wa.x,Wa.y,Wa.z,ja.x,ja.y,ja.z)}}class Wk extends an{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,t){return super.copy(e,t),e.sourceType!=="buffer"?(console.warn("THREE.Audio: Audio source type cannot be copied."),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}}const qa=new K,fR=new fr,AY=new K,Xa=new K;class MY extends Wk{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(qa,fR,AY),Xa.set(0,0,1).applyQuaternion(fR);const t=this.panner;if(t.positionX){const i=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(qa.x,i),t.positionY.linearRampToValueAtTime(qa.y,i),t.positionZ.linearRampToValueAtTime(qa.z,i),t.orientationX.linearRampToValueAtTime(Xa.x,i),t.orientationY.linearRampToValueAtTime(Xa.y,i),t.orientationZ.linearRampToValueAtTime(Xa.z,i)}else t.setPosition(qa.x,qa.y,qa.z),t.setOrientation(Xa.x,Xa.y,Xa.z)}}class TY{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let i=0;i<t.length;i++)e+=t[i];return e/t.length}}class jk{constructor(e,t,i){this.binding=e,this.valueSize=i;let r,s,o;switch(t){case"quaternion":r=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,r=this.valueSize,s=e*r+r;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==r;++a)i[s+a]=i[a];o=t}else{o+=t;const a=t/o;this._mixBufferRegion(i,s,0,a,r)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,r=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=t*this._origIndex;this._mixBufferRegion(i,r,l,1-s,t)}o>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*t,1,t);for(let l=t,c=t+t;l!==c;++l)if(i[l]!==i[l+t]){a.setValue(i,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,r=i*this._origIndex;e.getValue(t,r);for(let s=i,o=r;s!==o;++s)t[s]=t[r+s%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,r,s){if(r>=.5)for(let o=0;o!==s;++o)e[t+o]=e[i+o]}_slerp(e,t,i,r){fr.slerpFlat(e,t,e,t,e,i,r)}_slerpAdditive(e,t,i,r,s){const o=this._workIndex*s;fr.multiplyQuaternionsFlat(e,o,e,t,e,i),fr.slerpFlat(e,t,e,t,e,o,r)}_lerp(e,t,i,r,s){const o=1-r;for(let a=0;a!==s;++a){const l=t+a;e[l]=e[l]*o+e[i+a]*r}}_lerpAdditive(e,t,i,r,s){for(let o=0;o!==s;++o){const a=t+o;e[a]=e[a]+e[i+o]*r}}}const bx="\\[\\]\\.:\\/",CY=new RegExp("["+bx+"]","g"),wx="[^"+bx+"]",RY="[^"+bx.replace("\\.","")+"]",IY=/((?:WC+[\/:])*)/.source.replace("WC",wx),DY=/(WCOD+)?/.source.replace("WCOD",RY),PY=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",wx),OY=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",wx),LY=new RegExp("^"+IY+DY+PY+OY+"$"),kY=["material","materials","bones","map"];class UY{constructor(e,t,i){const r=i||on.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class on{constructor(e,t,i){this.path=t,this.parsedPath=i||on.parseTrackName(t),this.node=on.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new on.Composite(e,t,i):new on(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(CY,"")}static parseTrackName(e){const t=LY.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const s=i.nodeName.substring(r+1);kY.indexOf(s)!==-1&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=s)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===t||a.uuid===t)return a;const l=i(a.children);if(l)return l}return null},r=i(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)e[t++]=i[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,r=t.propertyName;let s=t.propertyIndex;if(e||(e=on.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(i){let c=t.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let u=0;u<e.length;u++)if(e[u].name===c){c=u;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(c!==void 0){if(e[c]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[c]}}const o=e[r];if(o===void 0){const c=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+r+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.isMaterial===!0?a=this.Versioning.NeedsUpdate:e.isObject3D===!0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}on.Composite=UY;on.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};on.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};on.prototype.GetterByBindingType=[on.prototype._getValue_direct,on.prototype._getValue_array,on.prototype._getValue_arrayElement,on.prototype._getValue_toArray];on.prototype.SetterByBindingTypeAndVersioning=[[on.prototype._setValue_direct,on.prototype._setValue_direct_setNeedsUpdate,on.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[on.prototype._setValue_array,on.prototype._setValue_array_setNeedsUpdate,on.prototype._setValue_array_setMatrixWorldNeedsUpdate],[on.prototype._setValue_arrayElement,on.prototype._setValue_arrayElement_setNeedsUpdate,on.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[on.prototype._setValue_fromArray,on.prototype._setValue_fromArray_setNeedsUpdate,on.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class NY{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Cr(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,r=arguments.length;i!==r;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,i=this._paths,r=this._parsedPaths,s=this._bindings,o=s.length;let a,l=e.length,c=this.nCachedObjects_;for(let u=0,d=arguments.length;u!==d;++u){const f=arguments[u],m=f.uuid;let v=t[m];if(v===void 0){v=l++,t[m]=v,e.push(f);for(let g=0,y=o;g!==y;++g)s[g].push(new on(f,i[g],r[g]))}else if(v<c){a=e[v];const g=--c,y=e[g];t[y.uuid]=v,e[v]=y,t[m]=g,e[g]=f;for(let b=0,S=o;b!==S;++b){const x=s[b],A=x[g];let E=x[v];x[v]=A,E===void 0&&(E=new on(f,i[b],r[b])),x[g]=E}}else e[v]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=c}remove(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],c=l.uuid,u=t[c];if(u!==void 0&&u>=s){const d=s++,f=e[d];t[f.uuid]=u,e[u]=f,t[c]=d,e[d]=l;for(let m=0,v=r;m!==v;++m){const g=i[m],y=g[d],b=g[u];g[u]=y,g[d]=b}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,l=arguments.length;a!==l;++a){const c=arguments[a],u=c.uuid,d=t[u];if(d!==void 0)if(delete t[u],d<s){const f=--s,m=e[f],v=--o,g=e[v];t[m.uuid]=d,e[d]=m,t[g.uuid]=f,e[f]=g,e.pop();for(let y=0,b=r;y!==b;++y){const S=i[y],x=S[f],A=S[v];S[d]=x,S[f]=A,S.pop()}}else{const f=--o,m=e[f];f>0&&(t[m.uuid]=d),e[d]=m,e.pop();for(let v=0,g=r;v!==g;++v){const y=i[v];y[d]=y[f],y.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const i=this._bindingsIndicesByPath;let r=i[e];const s=this._bindings;if(r!==void 0)return s[r];const o=this._paths,a=this._parsedPaths,l=this._objects,c=l.length,u=this.nCachedObjects_,d=new Array(c);r=s.length,i[e]=r,o.push(e),a.push(t),s.push(d);for(let f=u,m=l.length;f!==m;++f){const v=l[f];d[f]=new on(v,e,t)}return d}unsubscribe_(e){const t=this._bindingsIndicesByPath,i=t[e];if(i!==void 0){const r=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,l=o[a],c=e[a];t[c]=i,o[i]=l,o.pop(),s[i]=s[a],s.pop(),r[i]=r[a],r.pop()}}}class qk{constructor(e,t,i=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=r;const s=t.tracks,o=s.length,a=new Array(o),l={endingStart:ol,endingEnd:ol};for(let c=0;c!==o;++c){const u=s[c].createInterpolant(null);a[c]=u,u.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=DL,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i=!1){if(e.fadeOut(t),this.fadeIn(t),i===!0){const r=this._clip.duration,s=e._clip.duration,o=s/r,a=r/s;e.warp(1,o,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,i=!1){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const r=this._mixer,s=r.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,c=a.sampleValues;return l[0]=s,l[1]=s+i,c[0]=e/o,c[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,r){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*i;l<0||i===0?t=0:(this._startTime=null,t=i*l)}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const l=this._interpolants,c=this._propertyBindings;switch(this.blendMode){case KS:for(let u=0,d=l.length;u!==d;++u)l[u].evaluate(o),c[u].accumulateAdditive(a);break;case Ev:default:for(let u=0,d=l.length;u!==d;++u)l[u].evaluate(o),c[u].accumulate(r,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let r=this.time+e,s=this._loopCount;const o=i===PL;if(e===0)return s===-1?r:o&&(s&1)===1?t-r:r;if(i===IL){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),r>=t||r<0){const a=Math.floor(r/t);r-=t*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const c=e<0;this._setEndings(c,!c,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=r;if(o&&(s&1)===1)return t-r}return r}_setEndings(e,t,i){const r=this._interpolantSettings;i?(r.endingStart=al,r.endingEnd=al):(e?r.endingStart=this.zeroSlopeAtStart?al:ol:r.endingStart=Cd,t?r.endingEnd=this.zeroSlopeAtEnd?al:ol:r.endingEnd=Cd)}_scheduleFading(e,t,i){const r=this._mixer,s=r.time;let o=this._weightInterpolant;o===null&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=t,a[1]=s+e,l[1]=i,this}}const FY=new Float32Array(1);class BY extends Pr{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,r=e._clip.tracks,s=r.length,o=e._propertyBindings,a=e._interpolants,l=i.uuid,c=this._bindingsByRootAndName;let u=c[l];u===void 0&&(u={},c[l]=u);for(let d=0;d!==s;++d){const f=r[d],m=f.name;let v=u[m];if(v!==void 0)++v.referenceCount,o[d]=v;else{if(v=o[d],v!==void 0){v._cacheIndex===null&&(++v.referenceCount,this._addInactiveBinding(v,l,m));continue}const g=t&&t._propertyBindings[d].binding.parsedPath;v=new jk(on.create(i,m,g),f.ValueTypeName,f.getValueSize()),++v.referenceCount,this._addInactiveBinding(v,l,m),o[d]=v}a[d].resultBuffer=v.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,i)}const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,i){const r=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],r=e._cacheIndex;i._cacheIndex=r,t[r]=i,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,c=l[l.length-1],u=e._byClipCacheIndex;c._byClipCacheIndex=u,l[u]=c,l.pop(),e._byClipCacheIndex=null;const d=a.actionByRoot,f=(e._localRoot||this._root).uuid;delete d[f],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,r=this._nActiveActions++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,r=--this._nActiveActions,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_addInactiveBinding(e,t,i){const r=this._bindingsByRootAndName,s=this._bindings;let o=r[t];o===void 0&&(o={},r[t]=o),o[i]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,r=i.rootNode.uuid,s=i.path,o=this._bindingsByRootAndName,a=o[r],l=t[t.length-1],c=e._cacheIndex;l._cacheIndex=c,t[c]=l,t.pop(),delete a[s],Object.keys(a).length===0&&delete o[r]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return i===void 0&&(i=new mx(new Float32Array(2),new Float32Array(2),1,FY),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=t[r];e.__cacheIndex=r,t[r]=e,s.__cacheIndex=i,t[i]=s}clipAction(e,t,i){const r=t||this._root,s=r.uuid;let o=typeof e=="string"?Bd.findByName(r,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let c=null;if(i===void 0&&(o!==null?i=o.blendMode:i=Ev),l!==void 0){const d=l.actionByRoot[s];if(d!==void 0&&d.blendMode===i)return d;c=l.knownActions[0],o===null&&(o=c._clip)}if(o===null)return null;const u=new qk(this,o,t,i);return this._bindAction(u,c),this._addInactiveAction(u,a,s),u}existingAction(e,t){const i=t||this._root,r=i.uuid,s=typeof e=="string"?Bd.findByName(i,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[r]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let i=t-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,r=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let c=0;c!==i;++c)t[c]._update(r,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)a[c].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,r=this._actionsByClip,s=r[i];if(s!==void 0){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const c=o[a];this._deactivateAction(c);const u=c._cacheIndex,d=t[t.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,d._cacheIndex=u,t[u]=d,t.pop(),this._removeInactiveBindingsForAction(c)}delete r[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const o in i){const a=i[o].actionByRoot,l=a[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const r=this._bindingsByRootAndName,s=r[t];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const i=this.existingAction(e,t);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class zY extends QS{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isRenderTarget3D=!0,this.depth=i,this.texture=new Mv(null,e,t,i),this._setTextureOptions(r),this.texture.isRenderTargetTexture=!0}}class Vt{constructor(e){this.value=e}clone(){return new Vt(this.value.clone===void 0?this.value:this.value.clone())}}let HY=0;class GY extends Pr{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:HY++}),this.name="",this.usage=Id,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){this.dispatchEvent({type:"dispose"})}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let i=0,r=t.length;i<r;i++){const s=Array.isArray(t[i])?t[i]:[t[i]];for(let o=0;o<s.length;o++)this.uniforms.push(s[o].clone())}return this}clone(){return new this.constructor().copy(this)}}class VY extends Iv{constructor(e,t,i=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class WY{constructor(e,t,i,r,s,o=!1){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=i,this.elementSize=r,this.count=s,this.normalized=o,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const pR=new Rt;class jY{constructor(e,t,i=0,r=1/0){this.ray=new Iu(e,t),this.near=i,this.far=r,this.camera=null,this.layers=new Tv,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return pR.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(pR),this}intersectObject(e,t=!0,i=[]){return Ew(e,this,i,t),i.sort(mR),i}intersectObjects(e,t=!0,i=[]){for(let r=0,s=e.length;r<s;r++)Ew(e[r],this,i,t);return i.sort(mR),i}}function mR(n,e){return n.distance-e.distance}function Ew(n,e,t,i){let r=!0;if(n.layers.test(e.layers)&&n.raycast(e,t)===!1&&(r=!1),r===!0&&i===!0){const s=n.children;for(let o=0,a=s.length;o<a;o++)Ew(s[o],e,t,!0)}}let qY=class{constructor(){this._previousTime=0,this._currentTime=0,this._startTime=performance.now(),this._delta=0,this._elapsed=0,this._timescale=1,this._document=null,this._pageVisibilityHandler=null}connect(e){this._document=e,e.hidden!==void 0&&(this._pageVisibilityHandler=XY.bind(this),e.addEventListener("visibilitychange",this._pageVisibilityHandler,!1))}disconnect(){this._pageVisibilityHandler!==null&&(this._document.removeEventListener("visibilitychange",this._pageVisibilityHandler),this._pageVisibilityHandler=null),this._document=null}getDelta(){return this._delta/1e3}getElapsed(){return this._elapsed/1e3}getTimescale(){return this._timescale}setTimescale(e){return this._timescale=e,this}reset(){return this._currentTime=performance.now()-this._startTime,this}dispose(){this.disconnect()}update(e){return this._pageVisibilityHandler!==null&&this._document.hidden===!0?this._delta=0:(this._previousTime=this._currentTime,this._currentTime=(e!==void 0?e:performance.now())-this._startTime,this._delta=(this._currentTime-this._previousTime)*this._timescale,this._elapsed+=this._delta),this}};function XY(){this._document.hidden===!1&&this.reset()}class YY{constructor(e=1,t=0,i=0){this.radius=e,this.phi=t,this.theta=i}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Ct(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(Ct(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class KY{constructor(e=1,t=0,i=0){this.radius=e,this.theta=t,this.y=i}set(e,t,i){return this.radius=e,this.theta=t,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=t,this}clone(){return new this.constructor().copy(this)}}class Sx{constructor(e,t,i,r){Sx.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,t,i,r)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let i=0;i<4;i++)this.elements[i]=e[i+t];return this}set(e,t,i,r){const s=this.elements;return s[0]=e,s[2]=t,s[1]=i,s[3]=r,this}}const gR=new Ue;class $Y{constructor(e=new Ue(1/0,1/0),t=new Ue(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=gR.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,gR).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const vR=new K,mm=new K,Lc=new K,kc=new K,H0=new K,JY=new K,QY=new K;class ZY{constructor(e=new K,t=new K){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){vR.subVectors(e,this.start),mm.subVectors(this.end,this.start);const i=mm.dot(mm);let s=mm.dot(vR)/i;return t&&(s=Ct(s,0,1)),s}closestPointToPoint(e,t,i){const r=this.closestPointToPointParameter(e,t);return this.delta(i).multiplyScalar(r).add(this.start)}distanceSqToLine3(e,t=JY,i=QY){const r=10000000000000001e-32;let s,o;const a=this.start,l=e.start,c=this.end,u=e.end;Lc.subVectors(c,a),kc.subVectors(u,l),H0.subVectors(a,l);const d=Lc.dot(Lc),f=kc.dot(kc),m=kc.dot(H0);if(d<=r&&f<=r)return t.copy(a),i.copy(l),t.sub(i),t.dot(t);if(d<=r)s=0,o=m/f,o=Ct(o,0,1);else{const v=Lc.dot(H0);if(f<=r)o=0,s=Ct(-v/d,0,1);else{const g=Lc.dot(kc),y=d*f-g*g;y!==0?s=Ct((g*m-v*f)/y,0,1):s=0,o=(g*s+m)/f,o<0?(o=0,s=Ct(-v/d,0,1)):o>1&&(o=1,s=Ct((g-v)/d,0,1))}}return t.copy(a).add(Lc.multiplyScalar(s)),i.copy(l).add(kc.multiplyScalar(o)),t.sub(i),t.dot(t)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const _R=new K;class e9 extends an{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const i=new Ut,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const c=o/l*Math.PI*2,u=a/l*Math.PI*2;r.push(Math.cos(c),Math.sin(c),1,Math.cos(u),Math.sin(u),1)}i.setAttribute("position",new mt(r,3));const s=new nr({fog:!1,toneMapped:!1});this.cone=new Ns(i,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),_R.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(_R),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Ro=new K,gm=new Rt,G0=new Rt;class t9 extends Ns{constructor(e){const t=Xk(e),i=new Ut,r=[],s=[];for(let c=0;c<t.length;c++){const u=t[c];u.parent&&u.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(0,0,0),s.push(0,0,0))}i.setAttribute("position",new mt(r,3)),i.setAttribute("color",new mt(s,3));const o=new nr({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,o),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1;const a=new at(255),l=new at(65280);this.setColors(a,l)}updateMatrixWorld(e){const t=this.bones,i=this.geometry,r=i.getAttribute("position");G0.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const a=t[s];a.parent&&a.parent.isBone&&(gm.multiplyMatrices(G0,a.matrixWorld),Ro.setFromMatrixPosition(gm),r.setXYZ(o,Ro.x,Ro.y,Ro.z),gm.multiplyMatrices(G0,a.parent.matrixWorld),Ro.setFromMatrixPosition(gm),r.setXYZ(o+1,Ro.x,Ro.y,Ro.z),o+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}setColors(e,t){const r=this.geometry.getAttribute("color");for(let s=0;s<r.count;s+=2)r.setXYZ(s,e.r,e.g,e.b),r.setXYZ(s+1,t.r,t.g,t.b);return r.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}function Xk(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push(...Xk(n.children[t]));return e}class n9 extends Fn{constructor(e,t,i){const r=new hf(t,4,2),s=new vo({wireframe:!0,fog:!1,toneMapped:!1});super(r,s),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const i9=new K,yR=new at,bR=new at;class r9 extends an{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";const r=new uf(t);r.rotateY(Math.PI*.5),this.material=new vo({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=r.getAttribute("position"),o=new Float32Array(s.count*3);r.setAttribute("color",new _n(o,3)),this.add(new Fn(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");yR.copy(this.light.color),bR.copy(this.light.groundColor);for(let i=0,r=t.count;i<r;i++){const s=i<r/2?yR:bR;t.setXYZ(i,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(i9.setFromMatrixPosition(this.light.matrixWorld).negate())}}class s9 extends Ns{constructor(e=10,t=10,i=4473924,r=8947848){i=new at(i),r=new at(r);const s=t/2,o=e/t,a=e/2,l=[],c=[];for(let f=0,m=0,v=-a;f<=t;f++,v+=o){l.push(-a,0,v,a,0,v),l.push(v,0,-a,v,0,a);const g=f===s?i:r;g.toArray(c,m),m+=3,g.toArray(c,m),m+=3,g.toArray(c,m),m+=3,g.toArray(c,m),m+=3}const u=new Ut;u.setAttribute("position",new mt(l,3)),u.setAttribute("color",new mt(c,3));const d=new nr({vertexColors:!0,toneMapped:!1});super(u,d),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class o9 extends Ns{constructor(e=10,t=16,i=8,r=64,s=4473924,o=8947848){s=new at(s),o=new at(o);const a=[],l=[];if(t>1)for(let d=0;d<t;d++){const f=d/t*(Math.PI*2),m=Math.sin(f)*e,v=Math.cos(f)*e;a.push(0,0,0),a.push(m,0,v);const g=d&1?s:o;l.push(g.r,g.g,g.b),l.push(g.r,g.g,g.b)}for(let d=0;d<i;d++){const f=d&1?s:o,m=e-e/i*d;for(let v=0;v<r;v++){let g=v/r*(Math.PI*2),y=Math.sin(g)*m,b=Math.cos(g)*m;a.push(y,0,b),l.push(f.r,f.g,f.b),g=(v+1)/r*(Math.PI*2),y=Math.sin(g)*m,b=Math.cos(g)*m,a.push(y,0,b),l.push(f.r,f.g,f.b)}}const c=new Ut;c.setAttribute("position",new mt(a,3)),c.setAttribute("color",new mt(l,3));const u=new nr({vertexColors:!0,toneMapped:!1});super(c,u),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const wR=new K,vm=new K,SR=new K;class a9 extends an{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",t===void 0&&(t=1);let r=new Ut;r.setAttribute("position",new mt([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new nr({fog:!1,toneMapped:!1});this.lightPlane=new ea(r,s),this.add(this.lightPlane),r=new Ut,r.setAttribute("position",new mt([0,0,0,0,0,1],3)),this.targetLine=new ea(r,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),wR.setFromMatrixPosition(this.light.matrixWorld),vm.setFromMatrixPosition(this.light.target.matrixWorld),SR.subVectors(vm,wR),this.lightPlane.lookAt(vm),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(vm),this.targetLine.scale.z=SR.length()}}const _m=new K,$n=new sf;class l9 extends Ns{constructor(e){const t=new Ut,i=new nr({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(v,g){l(v),l(g)}function l(v){r.push(0,0,0),s.push(0,0,0),o[v]===void 0&&(o[v]=[]),o[v].push(r.length/3-1)}t.setAttribute("position",new mt(r,3)),t.setAttribute("color",new mt(s,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const c=new at(16755200),u=new at(16711680),d=new at(43775),f=new at(16777215),m=new at(3355443);this.setColors(c,u,d,f,m)}setColors(e,t,i,r,s){const a=this.geometry.getAttribute("color");return a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,i.r,i.g,i.b),a.setXYZ(33,i.r,i.g,i.b),a.setXYZ(34,i.r,i.g,i.b),a.setXYZ(35,i.r,i.g,i.b),a.setXYZ(36,i.r,i.g,i.b),a.setXYZ(37,i.r,i.g,i.b),a.setXYZ(38,r.r,r.g,r.b),a.setXYZ(39,r.r,r.g,r.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0,this}update(){const e=this.geometry,t=this.pointMap,i=1,r=1;let s,o;if($n.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),this.camera.reversedDepth===!0)s=1,o=0;else if(this.camera.coordinateSystem===Mr)s=-1,o=1;else if(this.camera.coordinateSystem===mu)s=0,o=1;else throw new Error("THREE.CameraHelper.update(): Invalid coordinate system: "+this.camera.coordinateSystem);ei("c",t,e,$n,0,0,s),ei("t",t,e,$n,0,0,o),ei("n1",t,e,$n,-i,-r,s),ei("n2",t,e,$n,i,-r,s),ei("n3",t,e,$n,-i,r,s),ei("n4",t,e,$n,i,r,s),ei("f1",t,e,$n,-i,-r,o),ei("f2",t,e,$n,i,-r,o),ei("f3",t,e,$n,-i,r,o),ei("f4",t,e,$n,i,r,o),ei("u1",t,e,$n,i*.7,r*1.1,s),ei("u2",t,e,$n,-i*.7,r*1.1,s),ei("u3",t,e,$n,0,r*2,s),ei("cf1",t,e,$n,-i,0,o),ei("cf2",t,e,$n,i,0,o),ei("cf3",t,e,$n,0,-r,o),ei("cf4",t,e,$n,0,r,o),ei("cn1",t,e,$n,-i,0,s),ei("cn2",t,e,$n,i,0,s),ei("cn3",t,e,$n,0,-r,s),ei("cn4",t,e,$n,0,r,s),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function ei(n,e,t,i,r,s,o){_m.set(r,s,o).unproject(i);const a=e[n];if(a!==void 0){const l=t.getAttribute("position");for(let c=0,u=a.length;c<u;c++)l.setXYZ(a[c],_m.x,_m.y,_m.z)}}const ym=new Hi;class c9 extends Ns{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),s=new Ut;s.setIndex(new _n(i,1)),s.setAttribute("position",new _n(r,3)),super(s,new nr({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(){if(this.object!==void 0&&ym.setFromObject(this.object),ym.isEmpty())return;const e=ym.min,t=ym.max,i=this.geometry.attributes.position,r=i.array;r[0]=t.x,r[1]=t.y,r[2]=t.z,r[3]=e.x,r[4]=t.y,r[5]=t.z,r[6]=e.x,r[7]=e.y,r[8]=t.z,r[9]=t.x,r[10]=e.y,r[11]=t.z,r[12]=t.x,r[13]=t.y,r[14]=e.z,r[15]=e.x,r[16]=t.y,r[17]=e.z,r[18]=e.x,r[19]=e.y,r[20]=e.z,r[21]=t.x,r[22]=e.y,r[23]=e.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class u9 extends Ns{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new Ut;s.setIndex(new _n(i,1)),s.setAttribute("position",new mt(r,3)),super(s,new nr({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class h9 extends ea{constructor(e,t=1,i=16776960){const r=i,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new Ut;o.setAttribute("position",new mt(s,3)),o.computeBoundingSphere(),super(o,new nr({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new Ut;l.setAttribute("position",new mt(a,3)),l.computeBoundingSphere(),this.add(new Fn(l,new vo({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const xR=new K;let bm,V0;class d9 extends an{constructor(e=new K(0,0,1),t=new K(0,0,0),i=1,r=16776960,s=i*.2,o=s*.2){super(),this.type="ArrowHelper",bm===void 0&&(bm=new Ut,bm.setAttribute("position",new mt([0,0,0,0,1,0],3)),V0=new lf(.5,1,5,1),V0.translate(0,-.5,0)),this.position.copy(t),this.line=new ea(bm,new nr({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Fn(V0,new vo({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{xR.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(xR,t)}}setLength(e,t=e*.2,i=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class f9 extends Ns{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new Ut;r.setAttribute("position",new mt(t,3)),r.setAttribute("color",new mt(i,3));const s=new nr({vertexColors:!0,toneMapped:!1});super(r,s),this.type="AxesHelper"}setColors(e,t,i){const r=new at,s=this.geometry.attributes.color.array;return r.set(e),r.toArray(s,0),r.toArray(s,3),r.set(t),r.toArray(s,6),r.toArray(s,9),r.set(i),r.toArray(s,12),r.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class p9{constructor(){this.type="ShapePath",this.color=new at,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new Qg,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,i,r){return this.currentPath.quadraticCurveTo(e,t,i,r),this}bezierCurveTo(e,t,i,r,s,o){return this.currentPath.bezierCurveTo(e,t,i,r,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(b){const S=[];for(let x=0,A=b.length;x<A;x++){const E=b[x],M=new bl;M.curves=E.curves,S.push(M)}return S}function i(b,S){const x=S.length;let A=!1;for(let E=x-1,M=0;M<x;E=M++){let I=S[E],R=S[M],C=R.x-I.x,D=R.y-I.y;if(Math.abs(D)>Number.EPSILON){if(D<0&&(I=S[M],C=-C,R=S[E],D=-D),b.y<I.y||b.y>R.y)continue;if(b.y===I.y){if(b.x===I.x)return!0}else{const L=D*(b.x-I.x)-C*(b.y-I.y);if(L===0)return!0;if(L<0)continue;A=!A}}else{if(b.y!==I.y)continue;if(R.x<=b.x&&b.x<=I.x||I.x<=b.x&&b.x<=R.x)return!0}}return A}const r=ls.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,a,l;const c=[];if(s.length===1)return a=s[0],l=new bl,l.curves=a.curves,c.push(l),c;let u=!r(s[0].getPoints());u=e?!u:u;const d=[],f=[];let m=[],v=0,g;f[v]=void 0,m[v]=[];for(let b=0,S=s.length;b<S;b++)a=s[b],g=a.getPoints(),o=r(g),o=e?!o:o,o?(!u&&f[v]&&v++,f[v]={s:new bl,p:g},f[v].s.curves=a.curves,u&&v++,m[v]=[]):m[v].push({h:a,p:g[0]});if(!f[0])return t(s);if(f.length>1){let b=!1,S=0;for(let x=0,A=f.length;x<A;x++)d[x]=[];for(let x=0,A=f.length;x<A;x++){const E=m[x];for(let M=0;M<E.length;M++){const I=E[M];let R=!0;for(let C=0;C<f.length;C++)i(I.p,f[C].p)&&(x!==C&&S++,R?(R=!1,d[C].push(I)):b=!0);R&&d[x].push(I)}}S>0&&b===!1&&(m=d)}let y;for(let b=0,S=f.length;b<S;b++){l=f[b].s,c.push(l),y=m[b];for(let x=0,A=y.length;x<A;x++)l.holes.push(y[x].h)}return c}}class m9 extends Pr{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(e){if(e===void 0){console.warn("THREE.Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=e}disconnect(){}dispose(){}update(){}}function g9(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2):(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0),n}function v9(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0):(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2),n}function _9(n){return n.repeat.x=1,n.repeat.y=1,n.offset.x=0,n.offset.y=0,n}function Aw(n,e,t,i){const r=y9(i);switch(t){case qS:return n*e;case nf:return n*e/r.components*r.byteLength;case rf:return n*e/r.components*r.byteLength;case YS:return n*e*2/r.components*r.byteLength;case Sv:return n*e*2/r.components*r.byteLength;case XS:return n*e*3/r.components*r.byteLength;case hi:return n*e*4/r.components*r.byteLength;case xv:return n*e*4/r.components*r.byteLength;case ed:case td:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case nd:case id:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case wg:case xg:return Math.max(n,16)*Math.max(e,8)/4;case bg:case Sg:return Math.max(n,8)*Math.max(e,8)/2;case Eg:case Ag:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case Mg:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case Tg:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case Cg:return Math.floor((n+4)/5)*Math.floor((e+3)/4)*16;case Rg:return Math.floor((n+4)/5)*Math.floor((e+4)/5)*16;case Ig:return Math.floor((n+5)/6)*Math.floor((e+4)/5)*16;case Dg:return Math.floor((n+5)/6)*Math.floor((e+5)/6)*16;case Pg:return Math.floor((n+7)/8)*Math.floor((e+4)/5)*16;case Og:return Math.floor((n+7)/8)*Math.floor((e+5)/6)*16;case Lg:return Math.floor((n+7)/8)*Math.floor((e+7)/8)*16;case kg:return Math.floor((n+9)/10)*Math.floor((e+4)/5)*16;case Ug:return Math.floor((n+9)/10)*Math.floor((e+5)/6)*16;case Ng:return Math.floor((n+9)/10)*Math.floor((e+7)/8)*16;case Fg:return Math.floor((n+9)/10)*Math.floor((e+9)/10)*16;case Bg:return Math.floor((n+11)/12)*Math.floor((e+9)/10)*16;case zg:return Math.floor((n+11)/12)*Math.floor((e+11)/12)*16;case Hg:case Gg:case Vg:return Math.ceil(n/4)*Math.ceil(e/4)*16;case Wg:case jg:return Math.ceil(n/4)*Math.ceil(e/4)*8;case qg:case Xg:return Math.ceil(n/4)*Math.ceil(e/4)*16}throw new Error("Unable to determine texture byte length for ".concat(t," format."))}function y9(n){switch(n){case Zn:case _v:return{byteLength:1,components:1};case fu:case yv:case Ii:return{byteLength:2,components:1};case bv:case wv:return{byteLength:2,components:4};case fs:case tf:case Gn:return{byteLength:4,components:1};case WS:case jS:return{byteLength:4,components:3}}throw new Error("Unknown texture type ".concat(n,"."))}class b9{static contain(e,t){return g9(e,t)}static cover(e,t){return v9(e,t)}static fill(e){return _9(e)}static getByteLength(e,t,i,r){return Aw(e,t,i,r)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:ia}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=ia);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function Yk(){let n=null,e=!1,t=null,i=null;function r(s,o){t(s,o),i=n.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function w9(n){const e=new WeakMap;function t(a,l){const c=a.array,u=a.usage,d=c.byteLength,f=n.createBuffer();n.bindBuffer(l,f),n.bufferData(l,c,u),a.onUploadCallback();let m;if(c instanceof Float32Array)m=n.FLOAT;else if(typeof Float16Array<"u"&&c instanceof Float16Array)m=n.HALF_FLOAT;else if(c instanceof Uint16Array)a.isFloat16BufferAttribute?m=n.HALF_FLOAT:m=n.UNSIGNED_SHORT;else if(c instanceof Int16Array)m=n.SHORT;else if(c instanceof Uint32Array)m=n.UNSIGNED_INT;else if(c instanceof Int32Array)m=n.INT;else if(c instanceof Int8Array)m=n.BYTE;else if(c instanceof Uint8Array)m=n.UNSIGNED_BYTE;else if(c instanceof Uint8ClampedArray)m=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+c);return{buffer:f,type:m,bytesPerElement:c.BYTES_PER_ELEMENT,version:a.version,size:d}}function i(a,l,c){const u=l.array,d=l.updateRanges;if(n.bindBuffer(c,a),d.length===0)n.bufferSubData(c,0,u);else{d.sort((m,v)=>m.start-v.start);let f=0;for(let m=1;m<d.length;m++){const v=d[f],g=d[m];g.start<=v.start+v.count+1?v.count=Math.max(v.count,g.start+g.count-v.start):(++f,d[f]=g)}d.length=f+1;for(let m=0,v=d.length;m<v;m++){const g=d[m];n.bufferSubData(c,g.start*u.BYTES_PER_ELEMENT,u,g.start,g.count)}l.clearUpdateRanges()}l.onUploadCallback()}function r(a){return a.isInterleavedBufferAttribute&&(a=a.data),e.get(a)}function s(a){a.isInterleavedBufferAttribute&&(a=a.data);const l=e.get(a);l&&(n.deleteBuffer(l.buffer),e.delete(a))}function o(a,l){if(a.isInterleavedBufferAttribute&&(a=a.data),a.isGLBufferAttribute){const u=e.get(a);(!u||u.version<a.version)&&e.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version});return}const c=e.get(a);if(c===void 0)e.set(a,t(a,l));else if(c.version<a.version){if(c.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");i(c.buffer,a,l),c.version=a.version}}return{get:r,remove:s,update:o}}var S9="#ifdef USE_ALPHAHASH\n	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n#endif",x9="#ifdef USE_ALPHAHASH\n	const float ALPHA_HASH_SCALE = 0.05;\n	float hash2D( vec2 value ) {\n		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n	}\n	float hash3D( vec3 value ) {\n		return hash2D( vec2( hash2D( value.xy ), value.z ) );\n	}\n	float getAlphaHashThreshold( vec3 position ) {\n		float maxDeriv = max(\n			length( dFdx( position.xyz ) ),\n			length( dFdy( position.xyz ) )\n		);\n		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n		vec2 pixScales = vec2(\n			exp2( floor( log2( pixScale ) ) ),\n			exp2( ceil( log2( pixScale ) ) )\n		);\n		vec2 alpha = vec2(\n			hash3D( floor( pixScales.x * position.xyz ) ),\n			hash3D( floor( pixScales.y * position.xyz ) )\n		);\n		float lerpFactor = fract( log2( pixScale ) );\n		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n		float a = min( lerpFactor, 1.0 - lerpFactor );\n		vec3 cases = vec3(\n			x * x / ( 2.0 * a * ( 1.0 - a ) ),\n			( x - 0.5 * a ) / ( 1.0 - a ),\n			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n		);\n		float threshold = ( x < ( 1.0 - a ) )\n			? ( ( x < a ) ? cases.x : cases.y )\n			: cases.z;\n		return clamp( threshold , 1.0e-6, 1.0 );\n	}\n#endif",E9="#ifdef USE_ALPHAMAP\n	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",A9="#ifdef USE_ALPHAMAP\n	uniform sampler2D alphaMap;\n#endif",M9="#ifdef USE_ALPHATEST\n	#ifdef ALPHA_TO_COVERAGE\n	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );\n	if ( diffuseColor.a == 0.0 ) discard;\n	#else\n	if ( diffuseColor.a < alphaTest ) discard;\n	#endif\n#endif",T9="#ifdef USE_ALPHATEST\n	uniform float alphaTest;\n#endif",C9="#ifdef USE_AOMAP\n	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n	reflectedLight.indirectDiffuse *= ambientOcclusion;\n	#if defined( USE_CLEARCOAT ) \n		clearcoatSpecularIndirect *= ambientOcclusion;\n	#endif\n	#if defined( USE_SHEEN ) \n		sheenSpecularIndirect *= ambientOcclusion;\n	#endif\n	#if defined( USE_ENVMAP ) && defined( STANDARD )\n		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );\n		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n	#endif\n#endif",R9="#ifdef USE_AOMAP\n	uniform sampler2D aoMap;\n	uniform float aoMapIntensity;\n#endif",I9="#ifdef USE_BATCHING\n	#if ! defined( GL_ANGLE_multi_draw )\n	#define gl_DrawID _gl_DrawID\n	uniform int _gl_DrawID;\n	#endif\n	uniform highp sampler2D batchingTexture;\n	uniform highp usampler2D batchingIdTexture;\n	mat4 getBatchingMatrix( const in float i ) {\n		int size = textureSize( batchingTexture, 0 ).x;\n		int j = int( i ) * 4;\n		int x = j % size;\n		int y = j / size;\n		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );\n		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );\n		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );\n		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );\n		return mat4( v1, v2, v3, v4 );\n	}\n	float getIndirectIndex( const in int i ) {\n		int size = textureSize( batchingIdTexture, 0 ).x;\n		int x = i % size;\n		int y = i / size;\n		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );\n	}\n#endif\n#ifdef USE_BATCHING_COLOR\n	uniform sampler2D batchingColorTexture;\n	vec3 getBatchingColor( const in float i ) {\n		int size = textureSize( batchingColorTexture, 0 ).x;\n		int j = int( i );\n		int x = j % size;\n		int y = j / size;\n		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;\n	}\n#endif",D9="#ifdef USE_BATCHING\n	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );\n#endif",P9="vec3 transformed = vec3( position );\n#ifdef USE_ALPHAHASH\n	vPosition = vec3( position );\n#endif",O9="vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n	vec3 objectTangent = vec3( tangent.xyz );\n#endif",L9="float G_BlinnPhong_Implicit( ) {\n	return 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n	vec3 halfDir = normalize( lightDir + viewDir );\n	float dotNH = saturate( dot( normal, halfDir ) );\n	float dotVH = saturate( dot( viewDir, halfDir ) );\n	vec3 F = F_Schlick( specularColor, 1.0, dotVH );\n	float G = G_BlinnPhong_Implicit( );\n	float D = D_BlinnPhong( shininess, dotNH );\n	return F * ( G * D );\n} // validated",k9="#ifdef USE_IRIDESCENCE\n	const mat3 XYZ_TO_REC709 = mat3(\n		 3.2404542, -0.9692660,  0.0556434,\n		-1.5371385,  1.8760108, -0.2040259,\n		-0.4985314,  0.0415560,  1.0572252\n	);\n	vec3 Fresnel0ToIor( vec3 fresnel0 ) {\n		vec3 sqrtF0 = sqrt( fresnel0 );\n		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n	}\n	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n	}\n	float IorToFresnel0( float transmittedIor, float incidentIor ) {\n		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n	}\n	vec3 evalSensitivity( float OPD, vec3 shift ) {\n		float phase = 2.0 * PI * OPD * 1.0e-9;\n		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n		xyz /= 1.0685e-7;\n		vec3 rgb = XYZ_TO_REC709 * xyz;\n		return rgb;\n	}\n	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n		vec3 I;\n		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n		float cosTheta2Sq = 1.0 - sinTheta2Sq;\n		if ( cosTheta2Sq < 0.0 ) {\n			return vec3( 1.0 );\n		}\n		float cosTheta2 = sqrt( cosTheta2Sq );\n		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n		float R12 = F_Schlick( R0, 1.0, cosTheta1 );\n		float T121 = 1.0 - R12;\n		float phi12 = 0.0;\n		if ( iridescenceIOR < outsideIOR ) phi12 = PI;\n		float phi21 = PI - phi12;\n		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n		vec3 phi23 = vec3( 0.0 );\n		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n		vec3 phi = vec3( phi21 ) + phi23;\n		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n		vec3 r123 = sqrt( R123 );\n		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n		vec3 C0 = R12 + Rs;\n		I = C0;\n		vec3 Cm = Rs - T121;\n		for ( int m = 1; m <= 2; ++ m ) {\n			Cm *= r123;\n			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n			I += Cm * Sm;\n		}\n		return max( I, vec3( 0.0 ) );\n	}\n#endif",U9="#ifdef USE_BUMPMAP\n	uniform sampler2D bumpMap;\n	uniform float bumpScale;\n	vec2 dHdxy_fwd() {\n		vec2 dSTdx = dFdx( vBumpMapUv );\n		vec2 dSTdy = dFdy( vBumpMapUv );\n		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n		return vec2( dBx, dBy );\n	}\n	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );\n		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );\n		vec3 vN = surf_norm;\n		vec3 R1 = cross( vSigmaY, vN );\n		vec3 R2 = cross( vN, vSigmaX );\n		float fDet = dot( vSigmaX, R1 ) * faceDirection;\n		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n		return normalize( abs( fDet ) * surf_norm - vGrad );\n	}\n#endif",N9="#if NUM_CLIPPING_PLANES > 0\n	vec4 plane;\n	#ifdef ALPHA_TO_COVERAGE\n		float distanceToPlane, distanceGradient;\n		float clipOpacity = 1.0;\n		#pragma unroll_loop_start\n		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n			plane = clippingPlanes[ i ];\n			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n			distanceGradient = fwidth( distanceToPlane ) / 2.0;\n			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n			if ( clipOpacity == 0.0 ) discard;\n		}\n		#pragma unroll_loop_end\n		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n			float unionClipOpacity = 1.0;\n			#pragma unroll_loop_start\n			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n				plane = clippingPlanes[ i ];\n				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n				distanceGradient = fwidth( distanceToPlane ) / 2.0;\n				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n			}\n			#pragma unroll_loop_end\n			clipOpacity *= 1.0 - unionClipOpacity;\n		#endif\n		diffuseColor.a *= clipOpacity;\n		if ( diffuseColor.a == 0.0 ) discard;\n	#else\n		#pragma unroll_loop_start\n		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n			plane = clippingPlanes[ i ];\n			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n		}\n		#pragma unroll_loop_end\n		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n			bool clipped = true;\n			#pragma unroll_loop_start\n			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n				plane = clippingPlanes[ i ];\n				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n			}\n			#pragma unroll_loop_end\n			if ( clipped ) discard;\n		#endif\n	#endif\n#endif",F9="#if NUM_CLIPPING_PLANES > 0\n	varying vec3 vClipPosition;\n	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",B9="#if NUM_CLIPPING_PLANES > 0\n	varying vec3 vClipPosition;\n#endif",z9="#if NUM_CLIPPING_PLANES > 0\n	vClipPosition = - mvPosition.xyz;\n#endif",H9="#if defined( USE_COLOR_ALPHA )\n	diffuseColor *= vColor;\n#elif defined( USE_COLOR )\n	diffuseColor.rgb *= vColor;\n#endif",G9="#if defined( USE_COLOR_ALPHA )\n	varying vec4 vColor;\n#elif defined( USE_COLOR )\n	varying vec3 vColor;\n#endif",V9="#if defined( USE_COLOR_ALPHA )\n	varying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n	varying vec3 vColor;\n#endif",W9="#if defined( USE_COLOR_ALPHA )\n	vColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n	vColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n	vColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n	vColor.xyz *= instanceColor.xyz;\n#endif\n#ifdef USE_BATCHING_COLOR\n	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );\n	vColor.xyz *= batchingColor.xyz;\n#endif",j9="#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n	const highp float a = 12.9898, b = 78.233, c = 43758.5453;\n	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n	return fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n	float precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n	float precisionSafeLength( vec3 v ) {\n		float maxComponent = max3( abs( v ) );\n		return length( v / maxComponent ) * maxComponent;\n	}\n#endif\nstruct IncidentLight {\n	vec3 color;\n	vec3 direction;\n	bool visible;\n};\nstruct ReflectedLight {\n	vec3 directDiffuse;\n	vec3 directSpecular;\n	vec3 indirectDiffuse;\n	vec3 indirectSpecular;\n};\n#ifdef USE_ALPHAHASH\n	varying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n	mat3 tmp;\n	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n	return tmp;\n}\nbool isPerspectiveMatrix( mat4 m ) {\n	return m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n	return vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n	return RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",q9="#ifdef ENVMAP_TYPE_CUBE_UV\n	#define cubeUV_minMipLevel 4.0\n	#define cubeUV_minTileSize 16.0\n	float getFace( vec3 direction ) {\n		vec3 absDirection = abs( direction );\n		float face = - 1.0;\n		if ( absDirection.x > absDirection.z ) {\n			if ( absDirection.x > absDirection.y )\n				face = direction.x > 0.0 ? 0.0 : 3.0;\n			else\n				face = direction.y > 0.0 ? 1.0 : 4.0;\n		} else {\n			if ( absDirection.z > absDirection.y )\n				face = direction.z > 0.0 ? 2.0 : 5.0;\n			else\n				face = direction.y > 0.0 ? 1.0 : 4.0;\n		}\n		return face;\n	}\n	vec2 getUV( vec3 direction, float face ) {\n		vec2 uv;\n		if ( face == 0.0 ) {\n			uv = vec2( direction.z, direction.y ) / abs( direction.x );\n		} else if ( face == 1.0 ) {\n			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n		} else if ( face == 2.0 ) {\n			uv = vec2( - direction.x, direction.y ) / abs( direction.z );\n		} else if ( face == 3.0 ) {\n			uv = vec2( - direction.z, direction.y ) / abs( direction.x );\n		} else if ( face == 4.0 ) {\n			uv = vec2( - direction.x, direction.z ) / abs( direction.y );\n		} else {\n			uv = vec2( direction.x, direction.y ) / abs( direction.z );\n		}\n		return 0.5 * ( uv + 1.0 );\n	}\n	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n		float face = getFace( direction );\n		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n		mipInt = max( mipInt, cubeUV_minMipLevel );\n		float faceSize = exp2( mipInt );\n		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n		if ( face > 2.0 ) {\n			uv.y += faceSize;\n			face -= 3.0;\n		}\n		uv.x += face * faceSize;\n		uv.x += filterInt * 3.0 * cubeUV_minTileSize;\n		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n		uv.x *= CUBEUV_TEXEL_WIDTH;\n		uv.y *= CUBEUV_TEXEL_HEIGHT;\n		#ifdef texture2DGradEXT\n			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n		#else\n			return texture2D( envMap, uv ).rgb;\n		#endif\n	}\n	#define cubeUV_r0 1.0\n	#define cubeUV_m0 - 2.0\n	#define cubeUV_r1 0.8\n	#define cubeUV_m1 - 1.0\n	#define cubeUV_r4 0.4\n	#define cubeUV_m4 2.0\n	#define cubeUV_r5 0.305\n	#define cubeUV_m5 3.0\n	#define cubeUV_r6 0.21\n	#define cubeUV_m6 4.0\n	float roughnessToMip( float roughness ) {\n		float mip = 0.0;\n		if ( roughness >= cubeUV_r1 ) {\n			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n		} else if ( roughness >= cubeUV_r4 ) {\n			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n		} else if ( roughness >= cubeUV_r5 ) {\n			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n		} else if ( roughness >= cubeUV_r6 ) {\n			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n		} else {\n			mip = - 2.0 * log2( 1.16 * roughness );		}\n		return mip;\n	}\n	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n		float mipF = fract( mip );\n		float mipInt = floor( mip );\n		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n		if ( mipF == 0.0 ) {\n			return vec4( color0, 1.0 );\n		} else {\n			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n			return vec4( mix( color0, color1, mipF ), 1.0 );\n		}\n	}\n#endif",X9="vec3 transformedNormal = objectNormal;\n#ifdef USE_TANGENT\n	vec3 transformedTangent = objectTangent;\n#endif\n#ifdef USE_BATCHING\n	mat3 bm = mat3( batchingMatrix );\n	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );\n	transformedNormal = bm * transformedNormal;\n	#ifdef USE_TANGENT\n		transformedTangent = bm * transformedTangent;\n	#endif\n#endif\n#ifdef USE_INSTANCING\n	mat3 im = mat3( instanceMatrix );\n	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );\n	transformedNormal = im * transformedNormal;\n	#ifdef USE_TANGENT\n		transformedTangent = im * transformedTangent;\n	#endif\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n	transformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;\n	#ifdef FLIP_SIDED\n		transformedTangent = - transformedTangent;\n	#endif\n#endif",Y9="#ifdef USE_DISPLACEMENTMAP\n	uniform sampler2D displacementMap;\n	uniform float displacementScale;\n	uniform float displacementBias;\n#endif",K9="#ifdef USE_DISPLACEMENTMAP\n	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",$9="#ifdef USE_EMISSIVEMAP\n	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE\n		emissiveColor = sRGBTransferEOTF( emissiveColor );\n	#endif\n	totalEmissiveRadiance *= emissiveColor.rgb;\n#endif",J9="#ifdef USE_EMISSIVEMAP\n	uniform sampler2D emissiveMap;\n#endif",Q9="gl_FragColor = linearToOutputTexel( gl_FragColor );",Z9="vec4 LinearTransferOETF( in vec4 value ) {\n	return value;\n}\nvec4 sRGBTransferEOTF( in vec4 value ) {\n	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 sRGBTransferOETF( in vec4 value ) {\n	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",eK="#ifdef USE_ENVMAP\n	#ifdef ENV_WORLDPOS\n		vec3 cameraToFrag;\n		if ( isOrthographic ) {\n			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n		} else {\n			cameraToFrag = normalize( vWorldPosition - cameraPosition );\n		}\n		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n		#ifdef ENVMAP_MODE_REFLECTION\n			vec3 reflectVec = reflect( cameraToFrag, worldNormal );\n		#else\n			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n		#endif\n	#else\n		vec3 reflectVec = vReflect;\n	#endif\n	#ifdef ENVMAP_TYPE_CUBE\n		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n	#else\n		vec4 envColor = vec4( 0.0 );\n	#endif\n	#ifdef ENVMAP_BLENDING_MULTIPLY\n		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n	#elif defined( ENVMAP_BLENDING_MIX )\n		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n	#elif defined( ENVMAP_BLENDING_ADD )\n		outgoingLight += envColor.xyz * specularStrength * reflectivity;\n	#endif\n#endif",tK="#ifdef USE_ENVMAP\n	uniform float envMapIntensity;\n	uniform float flipEnvMap;\n	uniform mat3 envMapRotation;\n	#ifdef ENVMAP_TYPE_CUBE\n		uniform samplerCube envMap;\n	#else\n		uniform sampler2D envMap;\n	#endif\n	\n#endif",nK="#ifdef USE_ENVMAP\n	uniform float reflectivity;\n	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n		#define ENV_WORLDPOS\n	#endif\n	#ifdef ENV_WORLDPOS\n		varying vec3 vWorldPosition;\n		uniform float refractionRatio;\n	#else\n		varying vec3 vReflect;\n	#endif\n#endif",iK="#ifdef USE_ENVMAP\n	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n		#define ENV_WORLDPOS\n	#endif\n	#ifdef ENV_WORLDPOS\n		\n		varying vec3 vWorldPosition;\n	#else\n		varying vec3 vReflect;\n		uniform float refractionRatio;\n	#endif\n#endif",rK="#ifdef USE_ENVMAP\n	#ifdef ENV_WORLDPOS\n		vWorldPosition = worldPosition.xyz;\n	#else\n		vec3 cameraToVertex;\n		if ( isOrthographic ) {\n			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n		} else {\n			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n		}\n		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n		#ifdef ENVMAP_MODE_REFLECTION\n			vReflect = reflect( cameraToVertex, worldNormal );\n		#else\n			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n		#endif\n	#endif\n#endif",sK="#ifdef USE_FOG\n	vFogDepth = - mvPosition.z;\n#endif",oK="#ifdef USE_FOG\n	varying float vFogDepth;\n#endif",aK="#ifdef USE_FOG\n	#ifdef FOG_EXP2\n		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n	#else\n		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n	#endif\n	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",lK="#ifdef USE_FOG\n	uniform vec3 fogColor;\n	varying float vFogDepth;\n	#ifdef FOG_EXP2\n		uniform float fogDensity;\n	#else\n		uniform float fogNear;\n		uniform float fogFar;\n	#endif\n#endif",cK="#ifdef USE_GRADIENTMAP\n	uniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n	float dotNL = dot( normal, lightDirection );\n	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n	#ifdef USE_GRADIENTMAP\n		return vec3( texture2D( gradientMap, coord ).r );\n	#else\n		vec2 fw = fwidth( coord ) * 0.5;\n		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n	#endif\n}",uK="#ifdef USE_LIGHTMAP\n	uniform sampler2D lightMap;\n	uniform float lightMapIntensity;\n#endif",hK="LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",dK="varying vec3 vViewPosition;\nstruct LambertMaterial {\n	vec3 diffuseColor;\n	float specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n	vec3 irradiance = dotNL * directLight.color;\n	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct				RE_Direct_Lambert\n#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert",fK="uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\n#if defined( USE_LIGHT_PROBES )\n	uniform vec3 lightProbe[ 9 ];\n#endif\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n	float x = normal.x, y = normal.y, z = normal.z;\n	vec3 result = shCoefficients[ 0 ] * 0.886227;\n	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n	return result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n	return irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n	vec3 irradiance = ambientLightColor;\n	return irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n	if ( cutoffDistance > 0.0 ) {\n		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n	}\n	return distanceFalloff;\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n	return smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n	struct DirectionalLight {\n		vec3 direction;\n		vec3 color;\n	};\n	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {\n		light.color = directionalLight.color;\n		light.direction = directionalLight.direction;\n		light.visible = true;\n	}\n#endif\n#if NUM_POINT_LIGHTS > 0\n	struct PointLight {\n		vec3 position;\n		vec3 color;\n		float distance;\n		float decay;\n	};\n	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {\n		vec3 lVector = pointLight.position - geometryPosition;\n		light.direction = normalize( lVector );\n		float lightDistance = length( lVector );\n		light.color = pointLight.color;\n		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n		light.visible = ( light.color != vec3( 0.0 ) );\n	}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n	struct SpotLight {\n		vec3 position;\n		vec3 direction;\n		vec3 color;\n		float distance;\n		float decay;\n		float coneCos;\n		float penumbraCos;\n	};\n	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {\n		vec3 lVector = spotLight.position - geometryPosition;\n		light.direction = normalize( lVector );\n		float angleCos = dot( light.direction, spotLight.direction );\n		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n		if ( spotAttenuation > 0.0 ) {\n			float lightDistance = length( lVector );\n			light.color = spotLight.color * spotAttenuation;\n			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n			light.visible = ( light.color != vec3( 0.0 ) );\n		} else {\n			light.color = vec3( 0.0 );\n			light.visible = false;\n		}\n	}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n	struct RectAreaLight {\n		vec3 color;\n		vec3 position;\n		vec3 halfWidth;\n		vec3 halfHeight;\n	};\n	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;\n	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n	struct HemisphereLight {\n		vec3 direction;\n		vec3 skyColor;\n		vec3 groundColor;\n	};\n	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n		float dotNL = dot( normal, hemiLight.direction );\n		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n		return irradiance;\n	}\n#endif",pK="#ifdef USE_ENVMAP\n	vec3 getIBLIrradiance( const in vec3 normal ) {\n		#ifdef ENVMAP_TYPE_CUBE_UV\n			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );\n			return PI * envMapColor.rgb * envMapIntensity;\n		#else\n			return vec3( 0.0 );\n		#endif\n	}\n	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n		#ifdef ENVMAP_TYPE_CUBE_UV\n			vec3 reflectVec = reflect( - viewDir, normal );\n			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );\n			return envMapColor.rgb * envMapIntensity;\n		#else\n			return vec3( 0.0 );\n		#endif\n	}\n	#ifdef USE_ANISOTROPY\n		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n			#ifdef ENVMAP_TYPE_CUBE_UV\n				vec3 bentNormal = cross( bitangent, viewDir );\n				bentNormal = normalize( cross( bentNormal, bitangent ) );\n				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n				return getIBLRadiance( viewDir, bentNormal, roughness );\n			#else\n				return vec3( 0.0 );\n			#endif\n		}\n	#endif\n#endif",mK="ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",gK="varying vec3 vViewPosition;\nstruct ToonMaterial {\n	vec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;\n	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct				RE_Direct_Toon\n#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon",vK="BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",_K="varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n	vec3 diffuseColor;\n	vec3 specularColor;\n	float specularShininess;\n	float specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n	vec3 irradiance = dotNL * directLight.color;\n	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct				RE_Direct_BlinnPhong\n#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong",yK="PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n	material.ior = ior;\n	#ifdef USE_SPECULAR\n		float specularIntensityFactor = specularIntensity;\n		vec3 specularColorFactor = specularColor;\n		#ifdef USE_SPECULAR_COLORMAP\n			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n		#endif\n		#ifdef USE_SPECULAR_INTENSITYMAP\n			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n		#endif\n		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n	#else\n		float specularIntensityFactor = 1.0;\n		vec3 specularColorFactor = vec3( 1.0 );\n		material.specularF90 = 1.0;\n	#endif\n	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n	material.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n	material.clearcoat = clearcoat;\n	material.clearcoatRoughness = clearcoatRoughness;\n	material.clearcoatF0 = vec3( 0.04 );\n	material.clearcoatF90 = 1.0;\n	#ifdef USE_CLEARCOATMAP\n		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n	#endif\n	#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n	#endif\n	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n	material.clearcoatRoughness += geometryRoughness;\n	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_DISPERSION\n	material.dispersion = dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n	material.iridescence = iridescence;\n	material.iridescenceIOR = iridescenceIOR;\n	#ifdef USE_IRIDESCENCEMAP\n		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n	#endif\n	#ifdef USE_IRIDESCENCE_THICKNESSMAP\n		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n	#else\n		material.iridescenceThickness = iridescenceThicknessMaximum;\n	#endif\n#endif\n#ifdef USE_SHEEN\n	material.sheenColor = sheenColor;\n	#ifdef USE_SHEEN_COLORMAP\n		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n	#endif\n	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n	#ifdef USE_SHEEN_ROUGHNESSMAP\n		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n	#endif\n#endif\n#ifdef USE_ANISOTROPY\n	#ifdef USE_ANISOTROPYMAP\n		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n	#else\n		vec2 anisotropyV = anisotropyVector;\n	#endif\n	material.anisotropy = length( anisotropyV );\n	if( material.anisotropy == 0.0 ) {\n		anisotropyV = vec2( 1.0, 0.0 );\n	} else {\n		anisotropyV /= material.anisotropy;\n		material.anisotropy = saturate( material.anisotropy );\n	}\n	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;\n	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;\n#endif",bK="struct PhysicalMaterial {\n	vec3 diffuseColor;\n	float roughness;\n	vec3 specularColor;\n	float specularF90;\n	float dispersion;\n	#ifdef USE_CLEARCOAT\n		float clearcoat;\n		float clearcoatRoughness;\n		vec3 clearcoatF0;\n		float clearcoatF90;\n	#endif\n	#ifdef USE_IRIDESCENCE\n		float iridescence;\n		float iridescenceIOR;\n		float iridescenceThickness;\n		vec3 iridescenceFresnel;\n		vec3 iridescenceF0;\n	#endif\n	#ifdef USE_SHEEN\n		vec3 sheenColor;\n		float sheenRoughness;\n	#endif\n	#ifdef IOR\n		float ior;\n	#endif\n	#ifdef USE_TRANSMISSION\n		float transmission;\n		float transmissionAlpha;\n		float thickness;\n		float attenuationDistance;\n		vec3 attenuationColor;\n	#endif\n	#ifdef USE_ANISOTROPY\n		float anisotropy;\n		float alphaT;\n		vec3 anisotropyT;\n		vec3 anisotropyB;\n	#endif\n};\nvec3 clearcoatSpecularDirect = vec3( 0.0 );\nvec3 clearcoatSpecularIndirect = vec3( 0.0 );\nvec3 sheenSpecularDirect = vec3( 0.0 );\nvec3 sheenSpecularIndirect = vec3(0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n	float a2 = pow2( alpha );\n	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n	return 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n	float a2 = pow2( alpha );\n	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n	return RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n		float v = 0.5 / ( gv + gl );\n		return saturate(v);\n	}\n	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n		float a2 = alphaT * alphaB;\n		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n		highp float v2 = dot( v, v );\n		float w2 = a2 / v2;\n		return RECIPROCAL_PI * a2 * pow2 ( w2 );\n	}\n#endif\n#ifdef USE_CLEARCOAT\n	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n		vec3 f0 = material.clearcoatF0;\n		float f90 = material.clearcoatF90;\n		float roughness = material.clearcoatRoughness;\n		float alpha = pow2( roughness );\n		vec3 halfDir = normalize( lightDir + viewDir );\n		float dotNL = saturate( dot( normal, lightDir ) );\n		float dotNV = saturate( dot( normal, viewDir ) );\n		float dotNH = saturate( dot( normal, halfDir ) );\n		float dotVH = saturate( dot( viewDir, halfDir ) );\n		vec3 F = F_Schlick( f0, f90, dotVH );\n		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n		float D = D_GGX( alpha, dotNH );\n		return F * ( V * D );\n	}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n	vec3 f0 = material.specularColor;\n	float f90 = material.specularF90;\n	float roughness = material.roughness;\n	float alpha = pow2( roughness );\n	vec3 halfDir = normalize( lightDir + viewDir );\n	float dotNL = saturate( dot( normal, lightDir ) );\n	float dotNV = saturate( dot( normal, viewDir ) );\n	float dotNH = saturate( dot( normal, halfDir ) );\n	float dotVH = saturate( dot( viewDir, halfDir ) );\n	vec3 F = F_Schlick( f0, f90, dotVH );\n	#ifdef USE_IRIDESCENCE\n		F = mix( F, material.iridescenceFresnel, material.iridescence );\n	#endif\n	#ifdef USE_ANISOTROPY\n		float dotTL = dot( material.anisotropyT, lightDir );\n		float dotTV = dot( material.anisotropyT, viewDir );\n		float dotTH = dot( material.anisotropyT, halfDir );\n		float dotBL = dot( material.anisotropyB, lightDir );\n		float dotBV = dot( material.anisotropyB, viewDir );\n		float dotBH = dot( material.anisotropyB, halfDir );\n		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n	#else\n		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n		float D = D_GGX( alpha, dotNH );\n	#endif\n	return F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n	const float LUT_SIZE = 64.0;\n	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n	const float LUT_BIAS = 0.5 / LUT_SIZE;\n	float dotNV = saturate( dot( N, V ) );\n	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n	uv = uv * LUT_SCALE + LUT_BIAS;\n	return uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n	float l = length( f );\n	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n	float x = dot( v1, v2 );\n	float y = abs( x );\n	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n	float b = 3.4175940 + ( 4.1616724 + y ) * y;\n	float v = a / b;\n	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n	return cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n	vec3 lightNormal = cross( v1, v2 );\n	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n	vec3 T1, T2;\n	T1 = normalize( V - N * dot( V, N ) );\n	T2 = - cross( N, T1 );\n	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n	vec3 coords[ 4 ];\n	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n	coords[ 0 ] = normalize( coords[ 0 ] );\n	coords[ 1 ] = normalize( coords[ 1 ] );\n	coords[ 2 ] = normalize( coords[ 2 ] );\n	coords[ 3 ] = normalize( coords[ 3 ] );\n	vec3 vectorFormFactor = vec3( 0.0 );\n	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n	return vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n	float alpha = pow2( roughness );\n	float invAlpha = 1.0 / alpha;\n	float cos2h = dotNH * dotNH;\n	float sin2h = max( 1.0 - cos2h, 0.0078125 );\n	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n	vec3 halfDir = normalize( lightDir + viewDir );\n	float dotNL = saturate( dot( normal, lightDir ) );\n	float dotNV = saturate( dot( normal, viewDir ) );\n	float dotNH = saturate( dot( normal, halfDir ) );\n	float D = D_Charlie( sheenRoughness, dotNH );\n	float V = V_Neubelt( dotNV, dotNL );\n	return sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n	float dotNV = saturate( dot( normal, viewDir ) );\n	float r2 = roughness * roughness;\n	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n	return saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n	float dotNV = saturate( dot( normal, viewDir ) );\n	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n	vec4 r = roughness * c0 + c1;\n	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n	return fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n	vec2 fab = DFGApprox( normal, viewDir, roughness );\n	return specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n	vec2 fab = DFGApprox( normal, viewDir, roughness );\n	#ifdef USE_IRIDESCENCE\n		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n	#else\n		vec3 Fr = specularColor;\n	#endif\n	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n	float Ess = fab.x + fab.y;\n	float Ems = 1.0 - Ess;\n	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n	singleScatter += FssEss;\n	multiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n		vec3 normal = geometryNormal;\n		vec3 viewDir = geometryViewDir;\n		vec3 position = geometryPosition;\n		vec3 lightPos = rectAreaLight.position;\n		vec3 halfWidth = rectAreaLight.halfWidth;\n		vec3 halfHeight = rectAreaLight.halfHeight;\n		vec3 lightColor = rectAreaLight.color;\n		float roughness = material.roughness;\n		vec3 rectCoords[ 4 ];\n		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n		vec2 uv = LTC_Uv( normal, viewDir, roughness );\n		vec4 t1 = texture2D( ltc_1, uv );\n		vec4 t2 = texture2D( ltc_2, uv );\n		mat3 mInv = mat3(\n			vec3( t1.x, 0, t1.y ),\n			vec3(    0, 1,    0 ),\n			vec3( t1.z, 0, t1.w )\n		);\n		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n	}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n	vec3 irradiance = dotNL * directLight.color;\n	#ifdef USE_CLEARCOAT\n		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );\n		vec3 ccIrradiance = dotNLcc * directLight.color;\n		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );\n	#endif\n	#ifdef USE_SHEEN\n		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );\n	#endif\n	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );\n	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n	#ifdef USE_CLEARCOAT\n		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n	#endif\n	#ifdef USE_SHEEN\n		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );\n	#endif\n	vec3 singleScattering = vec3( 0.0 );\n	vec3 multiScattering = vec3( 0.0 );\n	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n	#ifdef USE_IRIDESCENCE\n		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n	#else\n		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n	#endif\n	vec3 totalScattering = singleScattering + multiScattering;\n	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n	reflectedLight.indirectSpecular += radiance * singleScattering;\n	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct				RE_Direct_Physical\n#define RE_Direct_RectArea		RE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular		RE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",wK="\nvec3 geometryPosition = - vViewPosition;\nvec3 geometryNormal = normal;\nvec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\nvec3 geometryClearcoatNormal = vec3( 0.0 );\n#ifdef USE_CLEARCOAT\n	geometryClearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n	float dotNVi = saturate( dot( normal, geometryViewDir ) );\n	if ( material.iridescenceThickness == 0.0 ) {\n		material.iridescence = 0.0;\n	} else {\n		material.iridescence = saturate( material.iridescence );\n	}\n	if ( material.iridescence > 0.0 ) {\n		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n	}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n	PointLight pointLight;\n	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n	PointLightShadow pointLightShadow;\n	#endif\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n		pointLight = pointLights[ i ];\n		getPointLightInfo( pointLight, geometryPosition, directLight );\n		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n		pointLightShadow = pointLightShadows[ i ];\n		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n		#endif\n		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n	}\n	#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n	SpotLight spotLight;\n	vec4 spotColor;\n	vec3 spotLightCoord;\n	bool inSpotLightMap;\n	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n	SpotLightShadow spotLightShadow;\n	#endif\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n		spotLight = spotLights[ i ];\n		getSpotLightInfo( spotLight, geometryPosition, directLight );\n		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n		#else\n		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n		#endif\n		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n		#endif\n		#undef SPOT_LIGHT_MAP_INDEX\n		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n		spotLightShadow = spotLightShadows[ i ];\n		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n		#endif\n		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n	}\n	#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n	DirectionalLight directionalLight;\n	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n	DirectionalLightShadow directionalLightShadow;\n	#endif\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n		directionalLight = directionalLights[ i ];\n		getDirectionalLightInfo( directionalLight, directLight );\n		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n		directionalLightShadow = directionalLightShadows[ i ];\n		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n		#endif\n		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n	}\n	#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n	RectAreaLight rectAreaLight;\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n		rectAreaLight = rectAreaLights[ i ];\n		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n	}\n	#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n	vec3 iblIrradiance = vec3( 0.0 );\n	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n	#if defined( USE_LIGHT_PROBES )\n		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );\n	#endif\n	#if ( NUM_HEMI_LIGHTS > 0 )\n		#pragma unroll_loop_start\n		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );\n		}\n		#pragma unroll_loop_end\n	#endif\n#endif\n#if defined( RE_IndirectSpecular )\n	vec3 radiance = vec3( 0.0 );\n	vec3 clearcoatRadiance = vec3( 0.0 );\n#endif",SK="#if defined( RE_IndirectDiffuse )\n	#ifdef USE_LIGHTMAP\n		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n		irradiance += lightMapIrradiance;\n	#endif\n	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n		iblIrradiance += getIBLIrradiance( geometryNormal );\n	#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n	#ifdef USE_ANISOTROPY\n		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );\n	#else\n		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );\n	#endif\n	#ifdef USE_CLEARCOAT\n		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );\n	#endif\n#endif",xK="#if defined( RE_IndirectDiffuse )\n	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif",EK="#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )\n	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",AK="#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )\n	uniform float logDepthBufFC;\n	varying float vFragDepth;\n	varying float vIsPerspective;\n#endif",MK="#ifdef USE_LOGARITHMIC_DEPTH_BUFFER\n	varying float vFragDepth;\n	varying float vIsPerspective;\n#endif",TK="#ifdef USE_LOGARITHMIC_DEPTH_BUFFER\n	vFragDepth = 1.0 + gl_Position.w;\n	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n#endif",CK="#ifdef USE_MAP\n	vec4 sampledDiffuseColor = texture2D( map, vMapUv );\n	#ifdef DECODE_VIDEO_TEXTURE\n		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );\n	#endif\n	diffuseColor *= sampledDiffuseColor;\n#endif",RK="#ifdef USE_MAP\n	uniform sampler2D map;\n#endif",IK="#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n	#if defined( USE_POINTS_UV )\n		vec2 uv = vUv;\n	#else\n		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n	#endif\n#endif\n#ifdef USE_MAP\n	diffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n	diffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",DK="#if defined( USE_POINTS_UV )\n	varying vec2 vUv;\n#else\n	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n		uniform mat3 uvTransform;\n	#endif\n#endif\n#ifdef USE_MAP\n	uniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n	uniform sampler2D alphaMap;\n#endif",PK="float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n	metalnessFactor *= texelMetalness.b;\n#endif",OK="#ifdef USE_METALNESSMAP\n	uniform sampler2D metalnessMap;\n#endif",LK="#ifdef USE_INSTANCING_MORPH\n	float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;\n	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;\n	}\n#endif",kK="#if defined( USE_MORPHCOLORS )\n	vColor *= morphTargetBaseInfluence;\n	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n		#if defined( USE_COLOR_ALPHA )\n			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n		#elif defined( USE_COLOR )\n			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n		#endif\n	}\n#endif",UK="#ifdef USE_MORPHNORMALS\n	objectNormal *= morphTargetBaseInfluence;\n	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n	}\n#endif",NK="#ifdef USE_MORPHTARGETS\n	#ifndef USE_INSTANCING_MORPH\n		uniform float morphTargetBaseInfluence;\n		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n	#endif\n	uniform sampler2DArray morphTargetsTexture;\n	uniform ivec2 morphTargetsTextureSize;\n	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n		int y = texelIndex / morphTargetsTextureSize.x;\n		int x = texelIndex - y * morphTargetsTextureSize.x;\n		ivec3 morphUV = ivec3( x, y, morphTargetIndex );\n		return texelFetch( morphTargetsTexture, morphUV, 0 );\n	}\n#endif",FK="#ifdef USE_MORPHTARGETS\n	transformed *= morphTargetBaseInfluence;\n	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n	}\n#endif",BK="float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n	vec3 fdx = dFdx( vViewPosition );\n	vec3 fdy = dFdy( vViewPosition );\n	vec3 normal = normalize( cross( fdx, fdy ) );\n#else\n	vec3 normal = normalize( vNormal );\n	#ifdef DOUBLE_SIDED\n		normal *= faceDirection;\n	#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n	#ifdef USE_TANGENT\n		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n	#else\n		mat3 tbn = getTangentFrame( - vViewPosition, normal,\n		#if defined( USE_NORMALMAP )\n			vNormalMapUv\n		#elif defined( USE_CLEARCOAT_NORMALMAP )\n			vClearcoatNormalMapUv\n		#else\n			vUv\n		#endif\n		);\n	#endif\n	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n		tbn[0] *= faceDirection;\n		tbn[1] *= faceDirection;\n	#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n	#ifdef USE_TANGENT\n		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n	#else\n		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n	#endif\n	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n		tbn2[0] *= faceDirection;\n		tbn2[1] *= faceDirection;\n	#endif\n#endif\nvec3 nonPerturbedNormal = normal;",zK="#ifdef USE_NORMALMAP_OBJECTSPACE\n	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n	#ifdef FLIP_SIDED\n		normal = - normal;\n	#endif\n	#ifdef DOUBLE_SIDED\n		normal = normal * faceDirection;\n	#endif\n	normal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n	mapN.xy *= normalScale;\n	normal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",HK="#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n	#ifdef USE_TANGENT\n		varying vec3 vTangent;\n		varying vec3 vBitangent;\n	#endif\n#endif",GK="#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n	#ifdef USE_TANGENT\n		varying vec3 vTangent;\n		varying vec3 vBitangent;\n	#endif\n#endif",VK="#ifndef FLAT_SHADED\n	vNormal = normalize( transformedNormal );\n	#ifdef USE_TANGENT\n		vTangent = normalize( transformedTangent );\n		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n	#endif\n#endif",WK="#ifdef USE_NORMALMAP\n	uniform sampler2D normalMap;\n	uniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n	uniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n		vec3 q0 = dFdx( eye_pos.xyz );\n		vec3 q1 = dFdy( eye_pos.xyz );\n		vec2 st0 = dFdx( uv.st );\n		vec2 st1 = dFdy( uv.st );\n		vec3 N = surf_norm;\n		vec3 q1perp = cross( q1, N );\n		vec3 q0perp = cross( N, q0 );\n		vec3 T = q1perp * st0.x + q0perp * st1.x;\n		vec3 B = q1perp * st0.y + q0perp * st1.y;\n		float det = max( dot( T, T ), dot( B, B ) );\n		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n		return mat3( T * scale, B * scale, N );\n	}\n#endif",jK="#ifdef USE_CLEARCOAT\n	vec3 clearcoatNormal = nonPerturbedNormal;\n#endif",qK="#ifdef USE_CLEARCOAT_NORMALMAP\n	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n	clearcoatMapN.xy *= clearcoatNormalScale;\n	clearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",XK="#ifdef USE_CLEARCOATMAP\n	uniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n	uniform sampler2D clearcoatNormalMap;\n	uniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n	uniform sampler2D clearcoatRoughnessMap;\n#endif",YK="#ifdef USE_IRIDESCENCEMAP\n	uniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n	uniform sampler2D iridescenceThicknessMap;\n#endif",KK="#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",$K="vec3 packNormalToRGB( const in vec3 normal ) {\n	return normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n	return 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;\nconst float Inv255 = 1. / 255.;\nconst vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );\nconst vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );\nconst vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );\nconst vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );\nvec4 packDepthToRGBA( const in float v ) {\n	if( v <= 0.0 )\n		return vec4( 0., 0., 0., 0. );\n	if( v >= 1.0 )\n		return vec4( 1., 1., 1., 1. );\n	float vuf;\n	float af = modf( v * PackFactors.a, vuf );\n	float bf = modf( vuf * ShiftRight8, vuf );\n	float gf = modf( vuf * ShiftRight8, vuf );\n	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );\n}\nvec3 packDepthToRGB( const in float v ) {\n	if( v <= 0.0 )\n		return vec3( 0., 0., 0. );\n	if( v >= 1.0 )\n		return vec3( 1., 1., 1. );\n	float vuf;\n	float bf = modf( v * PackFactors.b, vuf );\n	float gf = modf( vuf * ShiftRight8, vuf );\n	return vec3( vuf * Inv255, gf * PackUpscale, bf );\n}\nvec2 packDepthToRG( const in float v ) {\n	if( v <= 0.0 )\n		return vec2( 0., 0. );\n	if( v >= 1.0 )\n		return vec2( 1., 1. );\n	float vuf;\n	float gf = modf( v * 256., vuf );\n	return vec2( vuf * Inv255, gf );\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n	return dot( v, UnpackFactors4 );\n}\nfloat unpackRGBToDepth( const in vec3 v ) {\n	return dot( v, UnpackFactors3 );\n}\nfloat unpackRGToDepth( const in vec2 v ) {\n	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;\n}\nvec4 pack2HalfToRGBA( const in vec2 v ) {\n	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( const in vec4 v ) {\n	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n	return ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n	return depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n	return ( near * far ) / ( ( far - near ) * depth - far );\n}",JK="#ifdef PREMULTIPLIED_ALPHA\n	gl_FragColor.rgb *= gl_FragColor.a;\n#endif",QK="vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_BATCHING\n	mvPosition = batchingMatrix * mvPosition;\n#endif\n#ifdef USE_INSTANCING\n	mvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",ZK="#ifdef DITHERING\n	gl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",e$="#ifdef DITHERING\n	vec3 dithering( vec3 color ) {\n		float grid_position = rand( gl_FragCoord.xy );\n		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n		return color + dither_shift_RGB;\n	}\n#endif",t$="float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n	roughnessFactor *= texelRoughness.g;\n#endif",n$="#ifdef USE_ROUGHNESSMAP\n	uniform sampler2D roughnessMap;\n#endif",i$="#if NUM_SPOT_LIGHT_COORDS > 0\n	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n	#if NUM_DIR_LIGHT_SHADOWS > 0\n		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n		struct DirectionalLightShadow {\n			float shadowIntensity;\n			float shadowBias;\n			float shadowNormalBias;\n			float shadowRadius;\n			vec2 shadowMapSize;\n		};\n		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n	#endif\n	#if NUM_SPOT_LIGHT_SHADOWS > 0\n		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n		struct SpotLightShadow {\n			float shadowIntensity;\n			float shadowBias;\n			float shadowNormalBias;\n			float shadowRadius;\n			vec2 shadowMapSize;\n		};\n		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n	#endif\n	#if NUM_POINT_LIGHT_SHADOWS > 0\n		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n		struct PointLightShadow {\n			float shadowIntensity;\n			float shadowBias;\n			float shadowNormalBias;\n			float shadowRadius;\n			vec2 shadowMapSize;\n			float shadowCameraNear;\n			float shadowCameraFar;\n		};\n		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n	#endif\n	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n		float depth = unpackRGBAToDepth( texture2D( depths, uv ) );\n		#ifdef USE_REVERSED_DEPTH_BUFFER\n			return step( depth, compare );\n		#else\n			return step( compare, depth );\n		#endif\n	}\n	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n		return unpackRGBATo2Half( texture2D( shadow, uv ) );\n	}\n	float VSMShadow( sampler2D shadow, vec2 uv, float compare ) {\n		float occlusion = 1.0;\n		vec2 distribution = texture2DDistribution( shadow, uv );\n		#ifdef USE_REVERSED_DEPTH_BUFFER\n			float hard_shadow = step( distribution.x, compare );\n		#else\n			float hard_shadow = step( compare, distribution.x );\n		#endif\n		if ( hard_shadow != 1.0 ) {\n			float distance = compare - distribution.x;\n			float variance = max( 0.00000, distribution.y * distribution.y );\n			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n		}\n		return occlusion;\n	}\n	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n		float shadow = 1.0;\n		shadowCoord.xyz /= shadowCoord.w;\n		shadowCoord.z += shadowBias;\n		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n		if ( frustumTest ) {\n		#if defined( SHADOWMAP_TYPE_PCF )\n			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n			float dx0 = - texelSize.x * shadowRadius;\n			float dy0 = - texelSize.y * shadowRadius;\n			float dx1 = + texelSize.x * shadowRadius;\n			float dy1 = + texelSize.y * shadowRadius;\n			float dx2 = dx0 / 2.0;\n			float dy2 = dy0 / 2.0;\n			float dx3 = dx1 / 2.0;\n			float dy3 = dy1 / 2.0;\n			shadow = (\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n			) * ( 1.0 / 17.0 );\n		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n			float dx = texelSize.x;\n			float dy = texelSize.y;\n			vec2 uv = shadowCoord.xy;\n			vec2 f = fract( uv * shadowMapSize + 0.5 );\n			uv -= f * texelSize;\n			shadow = (\n				texture2DCompare( shadowMap, uv, shadowCoord.z ) +\n				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n					 f.x ) +\n				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n					 f.x ) +\n				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n					 f.y ) +\n				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n					 f.y ) +\n				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n						  f.x ),\n					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n						  f.x ),\n					 f.y )\n			) * ( 1.0 / 9.0 );\n		#elif defined( SHADOWMAP_TYPE_VSM )\n			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n		#else\n			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n		#endif\n		}\n		return mix( 1.0, shadow, shadowIntensity );\n	}\n	vec2 cubeToUV( vec3 v, float texelSizeY ) {\n		vec3 absV = abs( v );\n		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n		absV *= scaleToCube;\n		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n		vec2 planar = v.xy;\n		float almostATexel = 1.5 * texelSizeY;\n		float almostOne = 1.0 - almostATexel;\n		if ( absV.z >= almostOne ) {\n			if ( v.z > 0.0 )\n				planar.x = 4.0 - v.x;\n		} else if ( absV.x >= almostOne ) {\n			float signX = sign( v.x );\n			planar.x = v.z * signX + 2.0 * signX;\n		} else if ( absV.y >= almostOne ) {\n			float signY = sign( v.y );\n			planar.x = v.x + 2.0 * signY + 2.0;\n			planar.y = v.z * signY - 2.0;\n		}\n		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n	}\n	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n		float shadow = 1.0;\n		vec3 lightToPosition = shadowCoord.xyz;\n		\n		float lightToPositionLength = length( lightToPosition );\n		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {\n			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;\n			vec3 bd3D = normalize( lightToPosition );\n			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n				shadow = (\n					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n				) * ( 1.0 / 9.0 );\n			#else\n				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n			#endif\n		}\n		return mix( 1.0, shadow, shadowIntensity );\n	}\n#endif",r$="#if NUM_SPOT_LIGHT_COORDS > 0\n	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n	#if NUM_DIR_LIGHT_SHADOWS > 0\n		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n		struct DirectionalLightShadow {\n			float shadowIntensity;\n			float shadowBias;\n			float shadowNormalBias;\n			float shadowRadius;\n			vec2 shadowMapSize;\n		};\n		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n	#endif\n	#if NUM_SPOT_LIGHT_SHADOWS > 0\n		struct SpotLightShadow {\n			float shadowIntensity;\n			float shadowBias;\n			float shadowNormalBias;\n			float shadowRadius;\n			vec2 shadowMapSize;\n		};\n		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n	#endif\n	#if NUM_POINT_LIGHT_SHADOWS > 0\n		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n		struct PointLightShadow {\n			float shadowIntensity;\n			float shadowBias;\n			float shadowNormalBias;\n			float shadowRadius;\n			vec2 shadowMapSize;\n			float shadowCameraNear;\n			float shadowCameraFar;\n		};\n		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n	#endif\n#endif",s$="#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n	vec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n	#if NUM_DIR_LIGHT_SHADOWS > 0\n		#pragma unroll_loop_start\n		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n		}\n		#pragma unroll_loop_end\n	#endif\n	#if NUM_POINT_LIGHT_SHADOWS > 0\n		#pragma unroll_loop_start\n		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n		}\n		#pragma unroll_loop_end\n	#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n		shadowWorldPosition = worldPosition;\n		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n		#endif\n		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n	}\n	#pragma unroll_loop_end\n#endif",o$="float getShadowMask() {\n	float shadow = 1.0;\n	#ifdef USE_SHADOWMAP\n	#if NUM_DIR_LIGHT_SHADOWS > 0\n	DirectionalLightShadow directionalLight;\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n		directionalLight = directionalLightShadows[ i ];\n		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n	}\n	#pragma unroll_loop_end\n	#endif\n	#if NUM_SPOT_LIGHT_SHADOWS > 0\n	SpotLightShadow spotLight;\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n		spotLight = spotLightShadows[ i ];\n		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n	}\n	#pragma unroll_loop_end\n	#endif\n	#if NUM_POINT_LIGHT_SHADOWS > 0\n	PointLightShadow pointLight;\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n		pointLight = pointLightShadows[ i ];\n		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n	}\n	#pragma unroll_loop_end\n	#endif\n	#endif\n	return shadow;\n}",a$="#ifdef USE_SKINNING\n	mat4 boneMatX = getBoneMatrix( skinIndex.x );\n	mat4 boneMatY = getBoneMatrix( skinIndex.y );\n	mat4 boneMatZ = getBoneMatrix( skinIndex.z );\n	mat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",l$="#ifdef USE_SKINNING\n	uniform mat4 bindMatrix;\n	uniform mat4 bindMatrixInverse;\n	uniform highp sampler2D boneTexture;\n	mat4 getBoneMatrix( const in float i ) {\n		int size = textureSize( boneTexture, 0 ).x;\n		int j = int( i ) * 4;\n		int x = j % size;\n		int y = j / size;\n		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );\n		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );\n		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );\n		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );\n		return mat4( v1, v2, v3, v4 );\n	}\n#endif",c$="#ifdef USE_SKINNING\n	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n	vec4 skinned = vec4( 0.0 );\n	skinned += boneMatX * skinVertex * skinWeight.x;\n	skinned += boneMatY * skinVertex * skinWeight.y;\n	skinned += boneMatZ * skinVertex * skinWeight.z;\n	skinned += boneMatW * skinVertex * skinWeight.w;\n	transformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",u$="#ifdef USE_SKINNING\n	mat4 skinMatrix = mat4( 0.0 );\n	skinMatrix += skinWeight.x * boneMatX;\n	skinMatrix += skinWeight.y * boneMatY;\n	skinMatrix += skinWeight.z * boneMatZ;\n	skinMatrix += skinWeight.w * boneMatW;\n	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n	#ifdef USE_TANGENT\n		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n	#endif\n#endif",h$="float specularStrength;\n#ifdef USE_SPECULARMAP\n	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n	specularStrength = texelSpecular.r;\n#else\n	specularStrength = 1.0;\n#endif",d$="#ifdef USE_SPECULARMAP\n	uniform sampler2D specularMap;\n#endif",f$="#if defined( TONE_MAPPING )\n	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",p$="#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n	return saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n	color *= toneMappingExposure;\n	return saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 CineonToneMapping( vec3 color ) {\n	color *= toneMappingExposure;\n	color = max( vec3( 0.0 ), color - 0.004 );\n	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n	return a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n	const mat3 ACESInputMat = mat3(\n		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),\n		vec3( 0.04823, 0.01566, 0.83777 )\n	);\n	const mat3 ACESOutputMat = mat3(\n		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),\n		vec3( -0.07367, -0.00605,  1.07602 )\n	);\n	color *= toneMappingExposure / 0.6;\n	color = ACESInputMat * color;\n	color = RRTAndODTFit( color );\n	color = ACESOutputMat * color;\n	return saturate( color );\n}\nconst mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(\n	vec3( 1.6605, - 0.1246, - 0.0182 ),\n	vec3( - 0.5876, 1.1329, - 0.1006 ),\n	vec3( - 0.0728, - 0.0083, 1.1187 )\n);\nconst mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(\n	vec3( 0.6274, 0.0691, 0.0164 ),\n	vec3( 0.3293, 0.9195, 0.0880 ),\n	vec3( 0.0433, 0.0113, 0.8956 )\n);\nvec3 agxDefaultContrastApprox( vec3 x ) {\n	vec3 x2 = x * x;\n	vec3 x4 = x2 * x2;\n	return + 15.5 * x4 * x2\n		- 40.14 * x4 * x\n		+ 31.96 * x4\n		- 6.868 * x2 * x\n		+ 0.4298 * x2\n		+ 0.1191 * x\n		- 0.00232;\n}\nvec3 AgXToneMapping( vec3 color ) {\n	const mat3 AgXInsetMatrix = mat3(\n		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),\n		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),\n		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )\n	);\n	const mat3 AgXOutsetMatrix = mat3(\n		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),\n		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),\n		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )\n	);\n	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;\n	color *= toneMappingExposure;\n	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;\n	color = AgXInsetMatrix * color;\n	color = max( color, 1e-10 );	color = log2( color );\n	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );\n	color = clamp( color, 0.0, 1.0 );\n	color = agxDefaultContrastApprox( color );\n	color = AgXOutsetMatrix * color;\n	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );\n	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;\n	color = clamp( color, 0.0, 1.0 );\n	return color;\n}\nvec3 NeutralToneMapping( vec3 color ) {\n	const float StartCompression = 0.8 - 0.04;\n	const float Desaturation = 0.15;\n	color *= toneMappingExposure;\n	float x = min( color.r, min( color.g, color.b ) );\n	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;\n	color -= offset;\n	float peak = max( color.r, max( color.g, color.b ) );\n	if ( peak < StartCompression ) return color;\n	float d = 1. - StartCompression;\n	float newPeak = 1. - d * d / ( peak + d - StartCompression );\n	color *= newPeak / peak;\n	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );\n	return mix( color, vec3( newPeak ), g );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",m$="#ifdef USE_TRANSMISSION\n	material.transmission = transmission;\n	material.transmissionAlpha = 1.0;\n	material.thickness = thickness;\n	material.attenuationDistance = attenuationDistance;\n	material.attenuationColor = attenuationColor;\n	#ifdef USE_TRANSMISSIONMAP\n		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n	#endif\n	#ifdef USE_THICKNESSMAP\n		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n	#endif\n	vec3 pos = vWorldPosition;\n	vec3 v = normalize( cameraPosition - pos );\n	vec3 n = inverseTransformDirection( normal, viewMatrix );\n	vec4 transmitted = getIBLVolumeRefraction(\n		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,\n		material.attenuationColor, material.attenuationDistance );\n	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",g$="#ifdef USE_TRANSMISSION\n	uniform float transmission;\n	uniform float thickness;\n	uniform float attenuationDistance;\n	uniform vec3 attenuationColor;\n	#ifdef USE_TRANSMISSIONMAP\n		uniform sampler2D transmissionMap;\n	#endif\n	#ifdef USE_THICKNESSMAP\n		uniform sampler2D thicknessMap;\n	#endif\n	uniform vec2 transmissionSamplerSize;\n	uniform sampler2D transmissionSamplerMap;\n	uniform mat4 modelMatrix;\n	uniform mat4 projectionMatrix;\n	varying vec3 vWorldPosition;\n	float w0( float a ) {\n		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n	}\n	float w1( float a ) {\n		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n	}\n	float w2( float a ){\n		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n	}\n	float w3( float a ) {\n		return ( 1.0 / 6.0 ) * ( a * a * a );\n	}\n	float g0( float a ) {\n		return w0( a ) + w1( a );\n	}\n	float g1( float a ) {\n		return w2( a ) + w3( a );\n	}\n	float h0( float a ) {\n		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n	}\n	float h1( float a ) {\n		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n	}\n	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n		uv = uv * texelSize.zw + 0.5;\n		vec2 iuv = floor( uv );\n		vec2 fuv = fract( uv );\n		float g0x = g0( fuv.x );\n		float g1x = g1( fuv.x );\n		float h0x = h0( fuv.x );\n		float h1x = h1( fuv.x );\n		float h0y = h0( fuv.y );\n		float h1y = h1( fuv.y );\n		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n	}\n	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n		vec2 fLodSizeInv = 1.0 / fLodSize;\n		vec2 cLodSizeInv = 1.0 / cLodSize;\n		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n		return mix( fSample, cSample, fract( lod ) );\n	}\n	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n		vec3 modelScale;\n		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n		return normalize( refractionVector ) * thickness * modelScale;\n	}\n	float applyIorToRoughness( const in float roughness, const in float ior ) {\n		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n	}\n	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n	}\n	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n		if ( isinf( attenuationDistance ) ) {\n			return vec3( 1.0 );\n		} else {\n			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;\n		}\n	}\n	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,\n		const in vec3 attenuationColor, const in float attenuationDistance ) {\n		vec4 transmittedLight;\n		vec3 transmittance;\n		#ifdef USE_DISPERSION\n			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;\n			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );\n			for ( int i = 0; i < 3; i ++ ) {\n				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );\n				vec3 refractedRayExit = position + transmissionRay;\n				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n				vec2 refractionCoords = ndcPos.xy / ndcPos.w;\n				refractionCoords += 1.0;\n				refractionCoords /= 2.0;\n				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );\n				transmittedLight[ i ] = transmissionSample[ i ];\n				transmittedLight.a += transmissionSample.a;\n				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];\n			}\n			transmittedLight.a /= 3.0;\n		#else\n			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n			vec3 refractedRayExit = position + transmissionRay;\n			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n			vec2 refractionCoords = ndcPos.xy / ndcPos.w;\n			refractionCoords += 1.0;\n			refractionCoords /= 2.0;\n			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n		#endif\n		vec3 attenuatedColor = transmittance * transmittedLight.rgb;\n		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n	}\n#endif",v$="#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n	varying vec2 vUv;\n#endif\n#ifdef USE_MAP\n	varying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n	varying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n	varying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n	varying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n	varying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n	varying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n	varying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n	varying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n	varying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n	varying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n	varying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n	varying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n	varying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n	varying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n	varying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n	varying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n	varying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n	varying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n	varying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n	varying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n	uniform mat3 transmissionMapTransform;\n	varying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n	uniform mat3 thicknessMapTransform;\n	varying vec2 vThicknessMapUv;\n#endif",_$="#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n	varying vec2 vUv;\n#endif\n#ifdef USE_MAP\n	uniform mat3 mapTransform;\n	varying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n	uniform mat3 alphaMapTransform;\n	varying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n	uniform mat3 lightMapTransform;\n	varying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n	uniform mat3 aoMapTransform;\n	varying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n	uniform mat3 bumpMapTransform;\n	varying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n	uniform mat3 normalMapTransform;\n	varying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n	uniform mat3 displacementMapTransform;\n	varying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n	uniform mat3 emissiveMapTransform;\n	varying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n	uniform mat3 metalnessMapTransform;\n	varying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n	uniform mat3 roughnessMapTransform;\n	varying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n	uniform mat3 anisotropyMapTransform;\n	varying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n	uniform mat3 clearcoatMapTransform;\n	varying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n	uniform mat3 clearcoatNormalMapTransform;\n	varying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n	uniform mat3 clearcoatRoughnessMapTransform;\n	varying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n	uniform mat3 sheenColorMapTransform;\n	varying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n	uniform mat3 sheenRoughnessMapTransform;\n	varying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n	uniform mat3 iridescenceMapTransform;\n	varying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n	uniform mat3 iridescenceThicknessMapTransform;\n	varying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n	uniform mat3 specularMapTransform;\n	varying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n	uniform mat3 specularColorMapTransform;\n	varying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n	uniform mat3 specularIntensityMapTransform;\n	varying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n	uniform mat3 transmissionMapTransform;\n	varying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n	uniform mat3 thicknessMapTransform;\n	varying vec2 vThicknessMapUv;\n#endif",y$="#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n	vUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",b$="#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n	vec4 worldPosition = vec4( transformed, 1.0 );\n	#ifdef USE_BATCHING\n		worldPosition = batchingMatrix * worldPosition;\n	#endif\n	#ifdef USE_INSTANCING\n		worldPosition = instanceMatrix * worldPosition;\n	#endif\n	worldPosition = modelMatrix * worldPosition;\n#endif";const w$="varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n	gl_Position = vec4( position.xy, 1.0, 1.0 );\n}",S$="uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n	vec4 texColor = texture2D( t2D, vUv );\n	#ifdef DECODE_VIDEO_TEXTURE\n		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n	#endif\n	texColor.rgb *= backgroundIntensity;\n	gl_FragColor = texColor;\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n}",x$="varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n	vWorldDirection = transformDirection( position, modelMatrix );\n	#include <begin_vertex>\n	#include <project_vertex>\n	gl_Position.z = gl_Position.w;\n}",E$="#ifdef ENVMAP_TYPE_CUBE\n	uniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n	uniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nuniform mat3 backgroundRotation;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n	#ifdef ENVMAP_TYPE_CUBE\n		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n	#elif defined( ENVMAP_TYPE_CUBE_UV )\n		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );\n	#else\n		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n	#endif\n	texColor.rgb *= backgroundIntensity;\n	gl_FragColor = texColor;\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n}",A$="varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n	vWorldDirection = transformDirection( position, modelMatrix );\n	#include <begin_vertex>\n	#include <project_vertex>\n	gl_Position.z = gl_Position.w;\n}",M$="uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n	gl_FragColor = texColor;\n	gl_FragColor.a *= opacity;\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n}",T$="#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n	#include <uv_vertex>\n	#include <batching_vertex>\n	#include <skinbase_vertex>\n	#include <morphinstance_vertex>\n	#ifdef USE_DISPLACEMENTMAP\n		#include <beginnormal_vertex>\n		#include <morphnormal_vertex>\n		#include <skinnormal_vertex>\n	#endif\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	vHighPrecisionZW = gl_Position.zw;\n}",C$="#if DEPTH_PACKING == 3200\n	uniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n	vec4 diffuseColor = vec4( 1.0 );\n	#include <clipping_planes_fragment>\n	#if DEPTH_PACKING == 3200\n		diffuseColor.a = opacity;\n	#endif\n	#include <map_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	#include <logdepthbuf_fragment>\n	#ifdef USE_REVERSED_DEPTH_BUFFER\n		float fragCoordZ = vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ];\n	#else\n		float fragCoordZ = 0.5 * vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ] + 0.5;\n	#endif\n	#if DEPTH_PACKING == 3200\n		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n	#elif DEPTH_PACKING == 3201\n		gl_FragColor = packDepthToRGBA( fragCoordZ );\n	#elif DEPTH_PACKING == 3202\n		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );\n	#elif DEPTH_PACKING == 3203\n		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );\n	#endif\n}",R$="#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <batching_vertex>\n	#include <skinbase_vertex>\n	#include <morphinstance_vertex>\n	#ifdef USE_DISPLACEMENTMAP\n		#include <beginnormal_vertex>\n		#include <morphnormal_vertex>\n		#include <skinnormal_vertex>\n	#endif\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <worldpos_vertex>\n	#include <clipping_planes_vertex>\n	vWorldPosition = worldPosition.xyz;\n}",I$="#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n	vec4 diffuseColor = vec4( 1.0 );\n	#include <clipping_planes_fragment>\n	#include <map_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	float dist = length( vWorldPosition - referencePosition );\n	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n	dist = saturate( dist );\n	gl_FragColor = packDepthToRGBA( dist );\n}",D$="varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n	vWorldDirection = transformDirection( position, modelMatrix );\n	#include <begin_vertex>\n	#include <project_vertex>\n}",P$="uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n	vec3 direction = normalize( vWorldDirection );\n	vec2 sampleUV = equirectUv( direction );\n	gl_FragColor = texture2D( tEquirect, sampleUV );\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n}",O$="uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	vLineDistance = scale * lineDistance;\n	#include <uv_vertex>\n	#include <color_vertex>\n	#include <morphinstance_vertex>\n	#include <morphcolor_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	#include <fog_vertex>\n}",L$="uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <clipping_planes_fragment>\n	if ( mod( vLineDistance, totalSize ) > dashSize ) {\n		discard;\n	}\n	vec3 outgoingLight = vec3( 0.0 );\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	outgoingLight = diffuseColor.rgb;\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n}",k$="#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <color_vertex>\n	#include <morphinstance_vertex>\n	#include <morphcolor_vertex>\n	#include <batching_vertex>\n	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n		#include <beginnormal_vertex>\n		#include <morphnormal_vertex>\n		#include <skinbase_vertex>\n		#include <skinnormal_vertex>\n		#include <defaultnormal_vertex>\n	#endif\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	#include <worldpos_vertex>\n	#include <envmap_vertex>\n	#include <fog_vertex>\n}",U$="uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <clipping_planes_fragment>\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	#include <specularmap_fragment>\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	#ifdef USE_LIGHTMAP\n		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n	#else\n		reflectedLight.indirectDiffuse += vec3( 1.0 );\n	#endif\n	#include <aomap_fragment>\n	reflectedLight.indirectDiffuse *= diffuseColor.rgb;\n	vec3 outgoingLight = reflectedLight.indirectDiffuse;\n	#include <envmap_fragment>\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n	#include <dithering_fragment>\n}",N$="#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <color_vertex>\n	#include <morphinstance_vertex>\n	#include <morphcolor_vertex>\n	#include <batching_vertex>\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <normal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	vViewPosition = - mvPosition.xyz;\n	#include <worldpos_vertex>\n	#include <envmap_vertex>\n	#include <shadowmap_vertex>\n	#include <fog_vertex>\n}",F$="#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <clipping_planes_fragment>\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	vec3 totalEmissiveRadiance = emissive;\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	#include <specularmap_fragment>\n	#include <normal_fragment_begin>\n	#include <normal_fragment_maps>\n	#include <emissivemap_fragment>\n	#include <lights_lambert_fragment>\n	#include <lights_fragment_begin>\n	#include <lights_fragment_maps>\n	#include <lights_fragment_end>\n	#include <aomap_fragment>\n	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n	#include <envmap_fragment>\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n	#include <dithering_fragment>\n}",B$="#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <color_vertex>\n	#include <morphinstance_vertex>\n	#include <morphcolor_vertex>\n	#include <batching_vertex>\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <normal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	#include <fog_vertex>\n	vViewPosition = - mvPosition.xyz;\n}",z$="#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <clipping_planes_fragment>\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	#include <normal_fragment_begin>\n	#include <normal_fragment_maps>\n	vec3 viewDir = normalize( vViewPosition );\n	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n	vec3 y = cross( viewDir, x );\n	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n	#ifdef USE_MATCAP\n		vec4 matcapColor = texture2D( matcap, uv );\n	#else\n		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n	#endif\n	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n	#include <dithering_fragment>\n}",H$="#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n	varying vec3 vViewPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <batching_vertex>\n	#include <beginnormal_vertex>\n	#include <morphinstance_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <normal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n	vViewPosition = - mvPosition.xyz;\n#endif\n}",G$="#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n	varying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );\n	#include <clipping_planes_fragment>\n	#include <logdepthbuf_fragment>\n	#include <normal_fragment_begin>\n	#include <normal_fragment_maps>\n	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );\n	#ifdef OPAQUE\n		gl_FragColor.a = 1.0;\n	#endif\n}",V$="#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <color_vertex>\n	#include <morphcolor_vertex>\n	#include <batching_vertex>\n	#include <beginnormal_vertex>\n	#include <morphinstance_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <normal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	vViewPosition = - mvPosition.xyz;\n	#include <worldpos_vertex>\n	#include <envmap_vertex>\n	#include <shadowmap_vertex>\n	#include <fog_vertex>\n}",W$="#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <clipping_planes_fragment>\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	vec3 totalEmissiveRadiance = emissive;\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	#include <specularmap_fragment>\n	#include <normal_fragment_begin>\n	#include <normal_fragment_maps>\n	#include <emissivemap_fragment>\n	#include <lights_phong_fragment>\n	#include <lights_fragment_begin>\n	#include <lights_fragment_maps>\n	#include <lights_fragment_end>\n	#include <aomap_fragment>\n	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n	#include <envmap_fragment>\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n	#include <dithering_fragment>\n}",j$="#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n	varying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <color_vertex>\n	#include <morphinstance_vertex>\n	#include <morphcolor_vertex>\n	#include <batching_vertex>\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <normal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	vViewPosition = - mvPosition.xyz;\n	#include <worldpos_vertex>\n	#include <shadowmap_vertex>\n	#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n	vWorldPosition = worldPosition.xyz;\n#endif\n}",q$="#define STANDARD\n#ifdef PHYSICAL\n	#define IOR\n	#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n	uniform float ior;\n#endif\n#ifdef USE_SPECULAR\n	uniform float specularIntensity;\n	uniform vec3 specularColor;\n	#ifdef USE_SPECULAR_COLORMAP\n		uniform sampler2D specularColorMap;\n	#endif\n	#ifdef USE_SPECULAR_INTENSITYMAP\n		uniform sampler2D specularIntensityMap;\n	#endif\n#endif\n#ifdef USE_CLEARCOAT\n	uniform float clearcoat;\n	uniform float clearcoatRoughness;\n#endif\n#ifdef USE_DISPERSION\n	uniform float dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n	uniform float iridescence;\n	uniform float iridescenceIOR;\n	uniform float iridescenceThicknessMinimum;\n	uniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n	uniform vec3 sheenColor;\n	uniform float sheenRoughness;\n	#ifdef USE_SHEEN_COLORMAP\n		uniform sampler2D sheenColorMap;\n	#endif\n	#ifdef USE_SHEEN_ROUGHNESSMAP\n		uniform sampler2D sheenRoughnessMap;\n	#endif\n#endif\n#ifdef USE_ANISOTROPY\n	uniform vec2 anisotropyVector;\n	#ifdef USE_ANISOTROPYMAP\n		uniform sampler2D anisotropyMap;\n	#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <clipping_planes_fragment>\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	vec3 totalEmissiveRadiance = emissive;\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	#include <roughnessmap_fragment>\n	#include <metalnessmap_fragment>\n	#include <normal_fragment_begin>\n	#include <normal_fragment_maps>\n	#include <clearcoat_normal_fragment_begin>\n	#include <clearcoat_normal_fragment_maps>\n	#include <emissivemap_fragment>\n	#include <lights_physical_fragment>\n	#include <lights_fragment_begin>\n	#include <lights_fragment_maps>\n	#include <lights_fragment_end>\n	#include <aomap_fragment>\n	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n	#include <transmission_fragment>\n	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n	#ifdef USE_SHEEN\n		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;\n	#endif\n	#ifdef USE_CLEARCOAT\n		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );\n		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;\n	#endif\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n	#include <dithering_fragment>\n}",X$="#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <color_vertex>\n	#include <morphinstance_vertex>\n	#include <morphcolor_vertex>\n	#include <batching_vertex>\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <normal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	vViewPosition = - mvPosition.xyz;\n	#include <worldpos_vertex>\n	#include <shadowmap_vertex>\n	#include <fog_vertex>\n}",Y$="#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <clipping_planes_fragment>\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	vec3 totalEmissiveRadiance = emissive;\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	#include <normal_fragment_begin>\n	#include <normal_fragment_maps>\n	#include <emissivemap_fragment>\n	#include <lights_toon_fragment>\n	#include <lights_fragment_begin>\n	#include <lights_fragment_maps>\n	#include <lights_fragment_end>\n	#include <aomap_fragment>\n	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n	#include <dithering_fragment>\n}",K$="uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n	varying vec2 vUv;\n	uniform mat3 uvTransform;\n#endif\nvoid main() {\n	#ifdef USE_POINTS_UV\n		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n	#endif\n	#include <color_vertex>\n	#include <morphinstance_vertex>\n	#include <morphcolor_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <project_vertex>\n	gl_PointSize = size;\n	#ifdef USE_SIZEATTENUATION\n		bool isPerspective = isPerspectiveMatrix( projectionMatrix );\n		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n	#endif\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	#include <worldpos_vertex>\n	#include <fog_vertex>\n}",$$="uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <clipping_planes_fragment>\n	vec3 outgoingLight = vec3( 0.0 );\n	#include <logdepthbuf_fragment>\n	#include <map_particle_fragment>\n	#include <color_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	outgoingLight = diffuseColor.rgb;\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n}",J$="#include <common>\n#include <batching_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n	#include <batching_vertex>\n	#include <beginnormal_vertex>\n	#include <morphinstance_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <worldpos_vertex>\n	#include <shadowmap_vertex>\n	#include <fog_vertex>\n}",Q$="uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n	#include <logdepthbuf_fragment>\n	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n}",Z$="uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	vec4 mvPosition = modelViewMatrix[ 3 ];\n	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );\n	#ifndef USE_SIZEATTENUATION\n		bool isPerspective = isPerspectiveMatrix( projectionMatrix );\n		if ( isPerspective ) scale *= - mvPosition.z;\n	#endif\n	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n	vec2 rotatedPosition;\n	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n	mvPosition.xy += rotatedPosition;\n	gl_Position = projectionMatrix * mvPosition;\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	#include <fog_vertex>\n}",e7="uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <clipping_planes_fragment>\n	vec3 outgoingLight = vec3( 0.0 );\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	outgoingLight = diffuseColor.rgb;\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n}",zt={alphahash_fragment:S9,alphahash_pars_fragment:x9,alphamap_fragment:E9,alphamap_pars_fragment:A9,alphatest_fragment:M9,alphatest_pars_fragment:T9,aomap_fragment:C9,aomap_pars_fragment:R9,batching_pars_vertex:I9,batching_vertex:D9,begin_vertex:P9,beginnormal_vertex:O9,bsdfs:L9,iridescence_fragment:k9,bumpmap_pars_fragment:U9,clipping_planes_fragment:N9,clipping_planes_pars_fragment:F9,clipping_planes_pars_vertex:B9,clipping_planes_vertex:z9,color_fragment:H9,color_pars_fragment:G9,color_pars_vertex:V9,color_vertex:W9,common:j9,cube_uv_reflection_fragment:q9,defaultnormal_vertex:X9,displacementmap_pars_vertex:Y9,displacementmap_vertex:K9,emissivemap_fragment:$9,emissivemap_pars_fragment:J9,colorspace_fragment:Q9,colorspace_pars_fragment:Z9,envmap_fragment:eK,envmap_common_pars_fragment:tK,envmap_pars_fragment:nK,envmap_pars_vertex:iK,envmap_physical_pars_fragment:pK,envmap_vertex:rK,fog_vertex:sK,fog_pars_vertex:oK,fog_fragment:aK,fog_pars_fragment:lK,gradientmap_pars_fragment:cK,lightmap_pars_fragment:uK,lights_lambert_fragment:hK,lights_lambert_pars_fragment:dK,lights_pars_begin:fK,lights_toon_fragment:mK,lights_toon_pars_fragment:gK,lights_phong_fragment:vK,lights_phong_pars_fragment:_K,lights_physical_fragment:yK,lights_physical_pars_fragment:bK,lights_fragment_begin:wK,lights_fragment_maps:SK,lights_fragment_end:xK,logdepthbuf_fragment:EK,logdepthbuf_pars_fragment:AK,logdepthbuf_pars_vertex:MK,logdepthbuf_vertex:TK,map_fragment:CK,map_pars_fragment:RK,map_particle_fragment:IK,map_particle_pars_fragment:DK,metalnessmap_fragment:PK,metalnessmap_pars_fragment:OK,morphinstance_vertex:LK,morphcolor_vertex:kK,morphnormal_vertex:UK,morphtarget_pars_vertex:NK,morphtarget_vertex:FK,normal_fragment_begin:BK,normal_fragment_maps:zK,normal_pars_fragment:HK,normal_pars_vertex:GK,normal_vertex:VK,normalmap_pars_fragment:WK,clearcoat_normal_fragment_begin:jK,clearcoat_normal_fragment_maps:qK,clearcoat_pars_fragment:XK,iridescence_pars_fragment:YK,opaque_fragment:KK,packing:$K,premultiplied_alpha_fragment:JK,project_vertex:QK,dithering_fragment:ZK,dithering_pars_fragment:e$,roughnessmap_fragment:t$,roughnessmap_pars_fragment:n$,shadowmap_pars_fragment:i$,shadowmap_pars_vertex:r$,shadowmap_vertex:s$,shadowmask_pars_fragment:o$,skinbase_vertex:a$,skinning_pars_vertex:l$,skinning_vertex:c$,skinnormal_vertex:u$,specularmap_fragment:h$,specularmap_pars_fragment:d$,tonemapping_fragment:f$,tonemapping_pars_fragment:p$,transmission_fragment:m$,transmission_pars_fragment:g$,uv_pars_fragment:v$,uv_pars_vertex:_$,uv_vertex:y$,worldpos_vertex:b$,background_vert:w$,background_frag:S$,backgroundCube_vert:x$,backgroundCube_frag:E$,cube_vert:A$,cube_frag:M$,depth_vert:T$,depth_frag:C$,distanceRGBA_vert:R$,distanceRGBA_frag:I$,equirect_vert:D$,equirect_frag:P$,linedashed_vert:O$,linedashed_frag:L$,meshbasic_vert:k$,meshbasic_frag:U$,meshlambert_vert:N$,meshlambert_frag:F$,meshmatcap_vert:B$,meshmatcap_frag:z$,meshnormal_vert:H$,meshnormal_frag:G$,meshphong_vert:V$,meshphong_frag:W$,meshphysical_vert:j$,meshphysical_frag:q$,meshtoon_vert:X$,meshtoon_frag:Y$,points_vert:K$,points_frag:$$,shadow_vert:J$,shadow_frag:Q$,sprite_vert:Z$,sprite_frag:e7},rt={common:{diffuse:{value:new at(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new kt},alphaMap:{value:null},alphaMapTransform:{value:new kt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new kt}},envmap:{envMap:{value:null},envMapRotation:{value:new kt},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new kt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new kt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new kt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new kt},normalScale:{value:new Ue(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new kt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new kt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new kt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new kt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new at(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new at(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new kt},alphaTest:{value:0},uvTransform:{value:new kt}},sprite:{diffuse:{value:new at(16777215)},opacity:{value:1},center:{value:new Ue(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new kt},alphaMap:{value:null},alphaMapTransform:{value:new kt},alphaTest:{value:0}}},os={basic:{uniforms:Ki([rt.common,rt.specularmap,rt.envmap,rt.aomap,rt.lightmap,rt.fog]),vertexShader:zt.meshbasic_vert,fragmentShader:zt.meshbasic_frag},lambert:{uniforms:Ki([rt.common,rt.specularmap,rt.envmap,rt.aomap,rt.lightmap,rt.emissivemap,rt.bumpmap,rt.normalmap,rt.displacementmap,rt.fog,rt.lights,{emissive:{value:new at(0)}}]),vertexShader:zt.meshlambert_vert,fragmentShader:zt.meshlambert_frag},phong:{uniforms:Ki([rt.common,rt.specularmap,rt.envmap,rt.aomap,rt.lightmap,rt.emissivemap,rt.bumpmap,rt.normalmap,rt.displacementmap,rt.fog,rt.lights,{emissive:{value:new at(0)},specular:{value:new at(1118481)},shininess:{value:30}}]),vertexShader:zt.meshphong_vert,fragmentShader:zt.meshphong_frag},standard:{uniforms:Ki([rt.common,rt.envmap,rt.aomap,rt.lightmap,rt.emissivemap,rt.bumpmap,rt.normalmap,rt.displacementmap,rt.roughnessmap,rt.metalnessmap,rt.fog,rt.lights,{emissive:{value:new at(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:zt.meshphysical_vert,fragmentShader:zt.meshphysical_frag},toon:{uniforms:Ki([rt.common,rt.aomap,rt.lightmap,rt.emissivemap,rt.bumpmap,rt.normalmap,rt.displacementmap,rt.gradientmap,rt.fog,rt.lights,{emissive:{value:new at(0)}}]),vertexShader:zt.meshtoon_vert,fragmentShader:zt.meshtoon_frag},matcap:{uniforms:Ki([rt.common,rt.bumpmap,rt.normalmap,rt.displacementmap,rt.fog,{matcap:{value:null}}]),vertexShader:zt.meshmatcap_vert,fragmentShader:zt.meshmatcap_frag},points:{uniforms:Ki([rt.points,rt.fog]),vertexShader:zt.points_vert,fragmentShader:zt.points_frag},dashed:{uniforms:Ki([rt.common,rt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:zt.linedashed_vert,fragmentShader:zt.linedashed_frag},depth:{uniforms:Ki([rt.common,rt.displacementmap]),vertexShader:zt.depth_vert,fragmentShader:zt.depth_frag},normal:{uniforms:Ki([rt.common,rt.bumpmap,rt.normalmap,rt.displacementmap,{opacity:{value:1}}]),vertexShader:zt.meshnormal_vert,fragmentShader:zt.meshnormal_frag},sprite:{uniforms:Ki([rt.sprite,rt.fog]),vertexShader:zt.sprite_vert,fragmentShader:zt.sprite_frag},background:{uniforms:{uvTransform:{value:new kt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:zt.background_vert,fragmentShader:zt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new kt}},vertexShader:zt.backgroundCube_vert,fragmentShader:zt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:zt.cube_vert,fragmentShader:zt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:zt.equirect_vert,fragmentShader:zt.equirect_frag},distanceRGBA:{uniforms:Ki([rt.common,rt.displacementmap,{referencePosition:{value:new K},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:zt.distanceRGBA_vert,fragmentShader:zt.distanceRGBA_frag},shadow:{uniforms:Ki([rt.lights,rt.fog,{color:{value:new at(0)},opacity:{value:1}}]),vertexShader:zt.shadow_vert,fragmentShader:zt.shadow_frag}};os.physical={uniforms:Ki([os.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new kt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new kt},clearcoatNormalScale:{value:new Ue(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new kt},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new kt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new kt},sheen:{value:0},sheenColor:{value:new at(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new kt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new kt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new kt},transmissionSamplerSize:{value:new Ue},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new kt},attenuationDistance:{value:0},attenuationColor:{value:new at(0)},specularColor:{value:new at(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new kt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new kt},anisotropyVector:{value:new Ue},anisotropyMap:{value:null},anisotropyMapTransform:{value:new kt}}]),vertexShader:zt.meshphysical_vert,fragmentShader:zt.meshphysical_frag};const wm={r:0,b:0,g:0},Ya=new ps,t7=new Rt;function n7(n,e,t,i,r,s,o){const a=new at(0);let l=s===!0?0:1,c,u,d=null,f=0,m=null;function v(x){let A=x.isScene===!0?x.background:null;return A&&A.isTexture&&(A=(x.backgroundBlurriness>0?t:e).get(A)),A}function g(x){let A=!1;const E=v(x);E===null?b(a,l):E&&E.isColor&&(b(E,1),A=!0);const M=n.xr.getEnvironmentBlendMode();M==="additive"?i.buffers.color.setClear(0,0,0,1,o):M==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,o),(n.autoClear||A)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function y(x,A){const E=v(A);E&&(E.isCubeTexture||E.mapping===Ru)?(u===void 0&&(u=new Fn(new Hl(1,1,1),new Wn({name:"BackgroundCubeMaterial",uniforms:vu(os.backgroundCube.uniforms),vertexShader:os.backgroundCube.vertexShader,fragmentShader:os.backgroundCube.fragmentShader,side:mi,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(M,I,R){this.matrixWorld.copyPosition(R.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(u)),Ya.copy(A.backgroundRotation),Ya.x*=-1,Ya.y*=-1,Ya.z*=-1,E.isCubeTexture&&E.isRenderTargetTexture===!1&&(Ya.y*=-1,Ya.z*=-1),u.material.uniforms.envMap.value=E,u.material.uniforms.flipEnvMap.value=E.isCubeTexture&&E.isRenderTargetTexture===!1?-1:1,u.material.uniforms.backgroundBlurriness.value=A.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=A.backgroundIntensity,u.material.uniforms.backgroundRotation.value.setFromMatrix4(t7.makeRotationFromEuler(Ya)),u.material.toneMapped=rn.getTransfer(E.colorSpace)!==wn,(d!==E||f!==E.version||m!==n.toneMapping)&&(u.material.needsUpdate=!0,d=E,f=E.version,m=n.toneMapping),u.layers.enableAll(),x.unshift(u,u.geometry,u.material,0,0,null)):E&&E.isTexture&&(c===void 0&&(c=new Fn(new aa(2,2),new Wn({name:"BackgroundMaterial",uniforms:vu(os.background.uniforms),vertexShader:os.background.vertexShader,fragmentShader:os.background.fragmentShader,side:Us,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(c)),c.material.uniforms.t2D.value=E,c.material.uniforms.backgroundIntensity.value=A.backgroundIntensity,c.material.toneMapped=rn.getTransfer(E.colorSpace)!==wn,E.matrixAutoUpdate===!0&&E.updateMatrix(),c.material.uniforms.uvTransform.value.copy(E.matrix),(d!==E||f!==E.version||m!==n.toneMapping)&&(c.material.needsUpdate=!0,d=E,f=E.version,m=n.toneMapping),c.layers.enableAll(),x.unshift(c,c.geometry,c.material,0,0,null))}function b(x,A){x.getRGB(wm,XL(n)),i.buffers.color.setClear(wm.r,wm.g,wm.b,A,o)}function S(){u!==void 0&&(u.geometry.dispose(),u.material.dispose(),u=void 0),c!==void 0&&(c.geometry.dispose(),c.material.dispose(),c=void 0)}return{getClearColor:function(){return a},setClearColor:function(x,A=1){a.set(x),l=A,b(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(x){l=x,b(a,l)},render:g,addToRenderList:y,dispose:S}}function i7(n,e){const t=n.getParameter(n.MAX_VERTEX_ATTRIBS),i={},r=f(null);let s=r,o=!1;function a(D,L,z,G,H){let J=!1;const k=d(G,z,L);s!==k&&(s=k,c(s.object)),J=m(D,G,z,H),J&&v(D,G,z,H),H!==null&&e.update(H,n.ELEMENT_ARRAY_BUFFER),(J||o)&&(o=!1,A(D,L,z,G),H!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(H).buffer))}function l(){return n.createVertexArray()}function c(D){return n.bindVertexArray(D)}function u(D){return n.deleteVertexArray(D)}function d(D,L,z){const G=z.wireframe===!0;let H=i[D.id];H===void 0&&(H={},i[D.id]=H);let J=H[L.id];J===void 0&&(J={},H[L.id]=J);let k=J[G];return k===void 0&&(k=f(l()),J[G]=k),k}function f(D){const L=[],z=[],G=[];for(let H=0;H<t;H++)L[H]=0,z[H]=0,G[H]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:L,enabledAttributes:z,attributeDivisors:G,object:D,attributes:{},index:null}}function m(D,L,z,G){const H=s.attributes,J=L.attributes;let k=0;const X=z.getAttributes();for(const W in X)if(X[W].location>=0){const se=H[W];let ye=J[W];if(ye===void 0&&(W==="instanceMatrix"&&D.instanceMatrix&&(ye=D.instanceMatrix),W==="instanceColor"&&D.instanceColor&&(ye=D.instanceColor)),se===void 0||se.attribute!==ye||ye&&se.data!==ye.data)return!0;k++}return s.attributesNum!==k||s.index!==G}function v(D,L,z,G){const H={},J=L.attributes;let k=0;const X=z.getAttributes();for(const W in X)if(X[W].location>=0){let se=J[W];se===void 0&&(W==="instanceMatrix"&&D.instanceMatrix&&(se=D.instanceMatrix),W==="instanceColor"&&D.instanceColor&&(se=D.instanceColor));const ye={};ye.attribute=se,se&&se.data&&(ye.data=se.data),H[W]=ye,k++}s.attributes=H,s.attributesNum=k,s.index=G}function g(){const D=s.newAttributes;for(let L=0,z=D.length;L<z;L++)D[L]=0}function y(D){b(D,0)}function b(D,L){const z=s.newAttributes,G=s.enabledAttributes,H=s.attributeDivisors;z[D]=1,G[D]===0&&(n.enableVertexAttribArray(D),G[D]=1),H[D]!==L&&(n.vertexAttribDivisor(D,L),H[D]=L)}function S(){const D=s.newAttributes,L=s.enabledAttributes;for(let z=0,G=L.length;z<G;z++)L[z]!==D[z]&&(n.disableVertexAttribArray(z),L[z]=0)}function x(D,L,z,G,H,J,k){k===!0?n.vertexAttribIPointer(D,L,z,H,J):n.vertexAttribPointer(D,L,z,G,H,J)}function A(D,L,z,G){g();const H=G.attributes,J=z.getAttributes(),k=L.defaultAttributeValues;for(const X in J){const W=J[X];if(W.location>=0){let ie=H[X];if(ie===void 0&&(X==="instanceMatrix"&&D.instanceMatrix&&(ie=D.instanceMatrix),X==="instanceColor"&&D.instanceColor&&(ie=D.instanceColor)),ie!==void 0){const se=ie.normalized,ye=ie.itemSize,Ne=e.get(ie);if(Ne===void 0)continue;const He=Ne.buffer,fe=Ne.type,he=Ne.bytesPerElement,le=fe===n.INT||fe===n.UNSIGNED_INT||ie.gpuType===tf;if(ie.isInterleavedBufferAttribute){const ee=ie.data,de=ee.stride,be=ie.offset;if(ee.isInstancedInterleavedBuffer){for(let oe=0;oe<W.locationSize;oe++)b(W.location+oe,ee.meshPerAttribute);D.isInstancedMesh!==!0&&G._maxInstanceCount===void 0&&(G._maxInstanceCount=ee.meshPerAttribute*ee.count)}else for(let oe=0;oe<W.locationSize;oe++)y(W.location+oe);n.bindBuffer(n.ARRAY_BUFFER,He);for(let oe=0;oe<W.locationSize;oe++)x(W.location+oe,ye/W.locationSize,fe,se,de*he,(be+ye/W.locationSize*oe)*he,le)}else{if(ie.isInstancedBufferAttribute){for(let ee=0;ee<W.locationSize;ee++)b(W.location+ee,ie.meshPerAttribute);D.isInstancedMesh!==!0&&G._maxInstanceCount===void 0&&(G._maxInstanceCount=ie.meshPerAttribute*ie.count)}else for(let ee=0;ee<W.locationSize;ee++)y(W.location+ee);n.bindBuffer(n.ARRAY_BUFFER,He);for(let ee=0;ee<W.locationSize;ee++)x(W.location+ee,ye/W.locationSize,fe,se,ye*he,ye/W.locationSize*ee*he,le)}}else if(k!==void 0){const se=k[X];if(se!==void 0)switch(se.length){case 2:n.vertexAttrib2fv(W.location,se);break;case 3:n.vertexAttrib3fv(W.location,se);break;case 4:n.vertexAttrib4fv(W.location,se);break;default:n.vertexAttrib1fv(W.location,se)}}}}S()}function E(){R();for(const D in i){const L=i[D];for(const z in L){const G=L[z];for(const H in G)u(G[H].object),delete G[H];delete L[z]}delete i[D]}}function M(D){if(i[D.id]===void 0)return;const L=i[D.id];for(const z in L){const G=L[z];for(const H in G)u(G[H].object),delete G[H];delete L[z]}delete i[D.id]}function I(D){for(const L in i){const z=i[L];if(z[D.id]===void 0)continue;const G=z[D.id];for(const H in G)u(G[H].object),delete G[H];delete z[D.id]}}function R(){C(),o=!0,s!==r&&(s=r,c(s.object))}function C(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:a,reset:R,resetDefaultState:C,dispose:E,releaseStatesOfGeometry:M,releaseStatesOfProgram:I,initAttributes:g,enableAttribute:y,disableUnusedAttributes:S}}function r7(n,e,t){let i;function r(c){i=c}function s(c,u){n.drawArrays(i,c,u),t.update(u,i,1)}function o(c,u,d){d!==0&&(n.drawArraysInstanced(i,c,u,d),t.update(u,i,d))}function a(c,u,d){if(d===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,c,0,u,0,d);let m=0;for(let v=0;v<d;v++)m+=u[v];t.update(m,i,1)}function l(c,u,d,f){if(d===0)return;const m=e.get("WEBGL_multi_draw");if(m===null)for(let v=0;v<c.length;v++)o(c[v],u[v],f[v]);else{m.multiDrawArraysInstancedWEBGL(i,c,0,u,0,f,0,d);let v=0;for(let g=0;g<d;g++)v+=u[g]*f[g];t.update(v,i,1)}}this.setMode=r,this.render=s,this.renderInstances=o,this.renderMultiDraw=a,this.renderMultiDrawInstances=l}function s7(n,e,t,i){let r;function s(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const I=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(I.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function o(I){return!(I!==hi&&i.convert(I)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function a(I){const R=I===Ii&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(I!==Zn&&i.convert(I)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&I!==Gn&&!R)}function l(I){if(I==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";I="mediump"}return I==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let c=t.precision!==void 0?t.precision:"highp";const u=l(c);u!==c&&(console.warn("THREE.WebGLRenderer:",c,"not supported, using",u,"instead."),c=u);const d=t.logarithmicDepthBuffer===!0,f=t.reversedDepthBuffer===!0&&e.has("EXT_clip_control"),m=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),v=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),g=n.getParameter(n.MAX_TEXTURE_SIZE),y=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),b=n.getParameter(n.MAX_VERTEX_ATTRIBS),S=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),x=n.getParameter(n.MAX_VARYING_VECTORS),A=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),E=v>0,M=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:l,textureFormatReadable:o,textureTypeReadable:a,precision:c,logarithmicDepthBuffer:d,reversedDepthBuffer:f,maxTextures:m,maxVertexTextures:v,maxTextureSize:g,maxCubemapSize:y,maxAttributes:b,maxVertexUniforms:S,maxVaryings:x,maxFragmentUniforms:A,vertexTextures:E,maxSamples:M}}function o7(n){const e=this;let t=null,i=0,r=!1,s=!1;const o=new ko,a=new kt,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(d,f){const m=d.length!==0||f||i!==0||r;return r=f,i=d.length,m},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(d,f){t=u(d,f,0)},this.setState=function(d,f,m){const v=d.clippingPlanes,g=d.clipIntersection,y=d.clipShadows,b=n.get(d);if(!r||v===null||v.length===0||s&&!y)s?u(null):c();else{const S=s?0:i,x=S*4;let A=b.clippingState||null;l.value=A,A=u(v,f,x,m);for(let E=0;E!==x;++E)A[E]=t[E];b.clippingState=A,this.numIntersection=g?this.numPlanes:0,this.numPlanes+=S}};function c(){l.value!==t&&(l.value=t,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function u(d,f,m,v){const g=d!==null?d.length:0;let y=null;if(g!==0){if(y=l.value,v!==!0||y===null){const b=m+g*4,S=f.matrixWorldInverse;a.getNormalMatrix(S),(y===null||y.length<b)&&(y=new Float32Array(b));for(let x=0,A=m;x!==g;++x,A+=4)o.copy(d[x]).applyMatrix4(S,a),o.normal.toArray(y,A),y[A+3]=o.constant}l.value=y,l.needsUpdate=!0}return e.numPlanes=g,e.numIntersection=0,y}}function a7(n){let e=new WeakMap;function t(o,a){return a===xd?o.mapping=mo:a===Ed&&(o.mapping=Zo),o}function i(o){if(o&&o.isTexture){const a=o.mapping;if(a===xd||a===Ed)if(e.has(o)){const l=e.get(o).texture;return t(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const c=new $L(l.height);return c.fromEquirectangularTexture(n,o),e.set(o,c),o.addEventListener("dispose",r),t(c.texture,o.mapping)}else return null}}return o}function r(o){const a=o.target;a.removeEventListener("dispose",r);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:i,dispose:s}}const qc=4,ER=[.125,.215,.35,.446,.526,.582],il=20,W0=new mf,AR=new at;let j0=null,q0=0,X0=0,Y0=!1;const Za=(1+Math.sqrt(5))/2,Uc=1/Za,MR=[new K(-Za,Uc,0),new K(Za,Uc,0),new K(-Uc,0,Za),new K(Uc,0,Za),new K(0,Za,-Uc),new K(0,Za,Uc),new K(-1,1,-1),new K(1,1,-1),new K(-1,1,1),new K(1,1,1)],l7=new K;class Mw{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100,s={}){const{size:o=256,position:a=l7}=s;j0=this._renderer.getRenderTarget(),q0=this._renderer.getActiveCubeFace(),X0=this._renderer.getActiveMipmapLevel(),Y0=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(o);const l=this._allocateTargets();return l.depthBuffer=!0,this._sceneToCubeUV(e,i,r,l,a),t>0&&this._blur(l,0,0,t),this._applyPMREM(l),this._cleanup(l),l}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=RR(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=CR(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(j0,q0,X0),this._renderer.xr.enabled=Y0,e.scissorTest=!1,Sm(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===mo||e.mapping===Zo?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),j0=this._renderer.getRenderTarget(),q0=this._renderer.getActiveCubeFace(),X0=this._renderer.getActiveMipmapLevel(),Y0=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:Zt,minFilter:Zt,generateMipmaps:!1,type:Ii,format:hi,colorSpace:Vr,depthBuffer:!1},r=TR(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=TR(e,t,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=c7(s)),this._blurMaterial=u7(s,e,t)}return r}_compileMaterial(e){const t=new Fn(this._lodPlanes[0],e);this._renderer.compile(t,W0)}_sceneToCubeUV(e,t,i,r,s){const l=new Ei(90,1,t,i),c=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],d=this._renderer,f=d.autoClear,m=d.toneMapping;d.getClearColor(AR),d.toneMapping=co,d.autoClear=!1,d.state.buffers.depth.getReversed()&&(d.setRenderTarget(r),d.clearDepth(),d.setRenderTarget(null));const g=new vo({name:"PMREM.Background",side:mi,depthWrite:!1,depthTest:!1}),y=new Fn(new Hl,g);let b=!1;const S=e.background;S?S.isColor&&(g.color.copy(S),e.background=null,b=!0):(g.color.copy(AR),b=!0);for(let x=0;x<6;x++){const A=x%3;A===0?(l.up.set(0,c[x],0),l.position.set(s.x,s.y,s.z),l.lookAt(s.x+u[x],s.y,s.z)):A===1?(l.up.set(0,0,c[x]),l.position.set(s.x,s.y,s.z),l.lookAt(s.x,s.y+u[x],s.z)):(l.up.set(0,c[x],0),l.position.set(s.x,s.y,s.z),l.lookAt(s.x,s.y,s.z+u[x]));const E=this._cubeSize;Sm(r,A*E,x>2?E:0,E,E),d.setRenderTarget(r),b&&d.render(y,l),d.render(e,l)}y.geometry.dispose(),y.material.dispose(),d.toneMapping=m,d.autoClear=f,e.background=S}_textureToCubeUV(e,t){const i=this._renderer,r=e.mapping===mo||e.mapping===Zo;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=RR()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=CR());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new Fn(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;Sm(t,0,0,3*l,2*l),i.setRenderTarget(t),i.render(o,W0)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;const r=this._lodPlanes.length;for(let s=1;s<r;s++){const o=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),a=MR[(r-s-1)%MR.length];this._blur(e,s-1,s,o,a)}t.autoClear=i}_blur(e,t,i,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,i,r,"latitudinal",s),this._halfBlur(o,e,i,i,r,"longitudinal",s)}_halfBlur(e,t,i,r,s,o,a){const l=this._renderer,c=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const u=3,d=new Fn(this._lodPlanes[r],c),f=c.uniforms,m=this._sizeLods[i]-1,v=isFinite(s)?Math.PI/(2*m):2*Math.PI/(2*il-1),g=s/v,y=isFinite(s)?1+Math.floor(u*g):il;y>il&&console.warn("sigmaRadians, ".concat(s,", is too large and will clip, as it requested ").concat(y," samples when the maximum is set to ").concat(il));const b=[];let S=0;for(let I=0;I<il;++I){const R=I/g,C=Math.exp(-R*R/2);b.push(C),I===0?S+=C:I<y&&(S+=2*C)}for(let I=0;I<b.length;I++)b[I]=b[I]/S;f.envMap.value=e.texture,f.samples.value=y,f.weights.value=b,f.latitudinal.value=o==="latitudinal",a&&(f.poleAxis.value=a);const{_lodMax:x}=this;f.dTheta.value=v,f.mipInt.value=x-i;const A=this._sizeLods[r],E=3*A*(r>x-qc?r-x+qc:0),M=4*(this._cubeSize-A);Sm(t,E,M,3*A,2*A),l.setRenderTarget(t),l.render(d,W0)}}function c7(n){const e=[],t=[],i=[];let r=n;const s=n-qc+1+ER.length;for(let o=0;o<s;o++){const a=Math.pow(2,r);t.push(a);let l=1/a;o>n-qc?l=ER[o-n+qc-1]:o===0&&(l=0),i.push(l);const c=1/(a-2),u=-c,d=1+c,f=[u,u,d,u,d,d,u,u,d,d,u,d],m=6,v=6,g=3,y=2,b=1,S=new Float32Array(g*v*m),x=new Float32Array(y*v*m),A=new Float32Array(b*v*m);for(let M=0;M<m;M++){const I=M%3*2/3-1,R=M>2?0:-1,C=[I,R,0,I+2/3,R,0,I+2/3,R+1,0,I,R,0,I+2/3,R+1,0,I,R+1,0];S.set(C,g*v*M),x.set(f,y*v*M);const D=[M,M,M,M,M,M];A.set(D,b*v*M)}const E=new Ut;E.setAttribute("position",new _n(S,g)),E.setAttribute("uv",new _n(x,y)),E.setAttribute("faceIndex",new _n(A,b)),e.push(E),r>qc&&r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}function TR(n,e,t){const i=new ni(n,e,t);return i.texture.mapping=Ru,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function Sm(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function u7(n,e,t){const i=new Float32Array(il),r=new K(0,1,0);return new Wn({name:"SphericalGaussianBlur",defines:{n:il,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:"".concat(n,".0")},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:xx(),fragmentShader:"\n\n			precision mediump float;\n			precision mediump int;\n\n			varying vec3 vOutputDirection;\n\n			uniform sampler2D envMap;\n			uniform int samples;\n			uniform float weights[ n ];\n			uniform bool latitudinal;\n			uniform float dTheta;\n			uniform float mipInt;\n			uniform vec3 poleAxis;\n\n			#define ENVMAP_TYPE_CUBE_UV\n			#include <cube_uv_reflection_fragment>\n\n			vec3 getSample( float theta, vec3 axis ) {\n\n				float cosTheta = cos( theta );\n				// Rodrigues' axis-angle rotation\n				vec3 sampleDirection = vOutputDirection * cosTheta\n					+ cross( axis, vOutputDirection ) * sin( theta )\n					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n				return bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n			}\n\n			void main() {\n\n				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n				}\n\n				axis = normalize( axis );\n\n				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n				for ( int i = 1; i < n; i++ ) {\n\n					if ( i >= samples ) {\n\n						break;\n\n					}\n\n					float theta = dTheta * float( i );\n					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n				}\n\n			}\n		",blending:Ai,depthTest:!1,depthWrite:!1})}function CR(){return new Wn({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:xx(),fragmentShader:"\n\n			precision mediump float;\n			precision mediump int;\n\n			varying vec3 vOutputDirection;\n\n			uniform sampler2D envMap;\n\n			#include <common>\n\n			void main() {\n\n				vec3 outputDirection = normalize( vOutputDirection );\n				vec2 uv = equirectUv( outputDirection );\n\n				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n			}\n		",blending:Ai,depthTest:!1,depthWrite:!1})}function RR(){return new Wn({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:xx(),fragmentShader:"\n\n			precision mediump float;\n			precision mediump int;\n\n			uniform float flipEnvMap;\n\n			varying vec3 vOutputDirection;\n\n			uniform samplerCube envMap;\n\n			void main() {\n\n				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n			}\n		",blending:Ai,depthTest:!1,depthWrite:!1})}function xx(){return"\n\n		precision mediump float;\n		precision mediump int;\n\n		attribute float faceIndex;\n\n		varying vec3 vOutputDirection;\n\n		// RH coordinate system; PMREM face-indexing convention\n		vec3 getDirection( vec2 uv, float face ) {\n\n			uv = 2.0 * uv - 1.0;\n\n			vec3 direction = vec3( uv, 1.0 );\n\n			if ( face == 0.0 ) {\n\n				direction = direction.zyx; // ( 1, v, u ) pos x\n\n			} else if ( face == 1.0 ) {\n\n				direction = direction.xzy;\n				direction.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n			} else if ( face == 2.0 ) {\n\n				direction.x *= -1.0; // ( -u, v, 1 ) pos z\n\n			} else if ( face == 3.0 ) {\n\n				direction = direction.zyx;\n				direction.xz *= -1.0; // ( -1, v, -u ) neg x\n\n			} else if ( face == 4.0 ) {\n\n				direction = direction.xzy;\n				direction.xy *= -1.0; // ( -u, -1, v ) neg y\n\n			} else if ( face == 5.0 ) {\n\n				direction.z *= -1.0; // ( u, v, -1 ) neg z\n\n			}\n\n			return direction;\n\n		}\n\n		void main() {\n\n			vOutputDirection = getDirection( uv, faceIndex );\n			gl_Position = vec4( position, 1.0 );\n\n		}\n	"}function h7(n){let e=new WeakMap,t=null;function i(a){if(a&&a.isTexture){const l=a.mapping,c=l===xd||l===Ed,u=l===mo||l===Zo;if(c||u){let d=e.get(a);const f=d!==void 0?d.texture.pmremVersion:0;if(a.isRenderTargetTexture&&a.pmremVersion!==f)return t===null&&(t=new Mw(n)),d=c?t.fromEquirectangular(a,d):t.fromCubemap(a,d),d.texture.pmremVersion=a.pmremVersion,e.set(a,d),d.texture;if(d!==void 0)return d.texture;{const m=a.image;return c&&m&&m.height>0||u&&m&&r(m)?(t===null&&(t=new Mw(n)),d=c?t.fromEquirectangular(a):t.fromCubemap(a),d.texture.pmremVersion=a.pmremVersion,e.set(a,d),a.addEventListener("dispose",s),d.texture):null}}}return a}function r(a){let l=0;const c=6;for(let u=0;u<c;u++)a[u]!==void 0&&l++;return l===c}function s(a){const l=a.target;l.removeEventListener("dispose",s);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:o}}function d7(n){const e={};function t(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return t(i)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(i){const r=t(i);return r===null&&Pd("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function f7(n,e,t,i){const r={},s=new WeakMap;function o(d){const f=d.target;f.index!==null&&e.remove(f.index);for(const v in f.attributes)e.remove(f.attributes[v]);f.removeEventListener("dispose",o),delete r[f.id];const m=s.get(f);m&&(e.remove(m),s.delete(f)),i.releaseStatesOfGeometry(f),f.isInstancedBufferGeometry===!0&&delete f._maxInstanceCount,t.memory.geometries--}function a(d,f){return r[f.id]===!0||(f.addEventListener("dispose",o),r[f.id]=!0,t.memory.geometries++),f}function l(d){const f=d.attributes;for(const m in f)e.update(f[m],n.ARRAY_BUFFER)}function c(d){const f=[],m=d.index,v=d.attributes.position;let g=0;if(m!==null){const S=m.array;g=m.version;for(let x=0,A=S.length;x<A;x+=3){const E=S[x+0],M=S[x+1],I=S[x+2];f.push(E,M,M,I,I,E)}}else if(v!==void 0){const S=v.array;g=v.version;for(let x=0,A=S.length/3-1;x<A;x+=3){const E=x+0,M=x+1,I=x+2;f.push(E,M,M,I,I,E)}}else return;const y=new(GL(f)?ex:ZS)(f,1);y.version=g;const b=s.get(d);b&&e.remove(b),s.set(d,y)}function u(d){const f=s.get(d);if(f){const m=d.index;m!==null&&f.version<m.version&&c(d)}else c(d);return s.get(d)}return{get:a,update:l,getWireframeAttribute:u}}function p7(n,e,t){let i;function r(f){i=f}let s,o;function a(f){s=f.type,o=f.bytesPerElement}function l(f,m){n.drawElements(i,m,s,f*o),t.update(m,i,1)}function c(f,m,v){v!==0&&(n.drawElementsInstanced(i,m,s,f*o,v),t.update(m,i,v))}function u(f,m,v){if(v===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,m,0,s,f,0,v);let y=0;for(let b=0;b<v;b++)y+=m[b];t.update(y,i,1)}function d(f,m,v,g){if(v===0)return;const y=e.get("WEBGL_multi_draw");if(y===null)for(let b=0;b<f.length;b++)c(f[b]/o,m[b],g[b]);else{y.multiDrawElementsInstancedWEBGL(i,m,0,s,f,0,g,0,v);let b=0;for(let S=0;S<v;S++)b+=m[S]*g[S];t.update(b,i,1)}}this.setMode=r,this.setIndex=a,this.render=l,this.renderInstances=c,this.renderMultiDraw=u,this.renderMultiDrawInstances=d}function m7(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,o,a){switch(t.calls++,o){case n.TRIANGLES:t.triangles+=a*(s/3);break;case n.LINES:t.lines+=a*(s/2);break;case n.LINE_STRIP:t.lines+=a*(s-1);break;case n.LINE_LOOP:t.lines+=a*s;break;case n.POINTS:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:i}}function g7(n,e,t){const i=new WeakMap,r=new Jt;function s(o,a,l){const c=o.morphTargetInfluences,u=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,d=u!==void 0?u.length:0;let f=i.get(a);if(f===void 0||f.count!==d){let C=function(){I.dispose(),i.delete(a),a.removeEventListener("dispose",C)};f!==void 0&&f.texture.dispose();const m=a.morphAttributes.position!==void 0,v=a.morphAttributes.normal!==void 0,g=a.morphAttributes.color!==void 0,y=a.morphAttributes.position||[],b=a.morphAttributes.normal||[],S=a.morphAttributes.color||[];let x=0;m===!0&&(x=1),v===!0&&(x=2),g===!0&&(x=3);let A=a.attributes.position.count*x,E=1;A>e.maxTextureSize&&(E=Math.ceil(A/e.maxTextureSize),A=e.maxTextureSize);const M=new Float32Array(A*E*4*d),I=new Av(M,A,E,d);I.type=Gn,I.needsUpdate=!0;const R=x*4;for(let D=0;D<d;D++){const L=y[D],z=b[D],G=S[D],H=A*E*4*D;for(let J=0;J<L.count;J++){const k=J*R;m===!0&&(r.fromBufferAttribute(L,J),M[H+k+0]=r.x,M[H+k+1]=r.y,M[H+k+2]=r.z,M[H+k+3]=0),v===!0&&(r.fromBufferAttribute(z,J),M[H+k+4]=r.x,M[H+k+5]=r.y,M[H+k+6]=r.z,M[H+k+7]=0),g===!0&&(r.fromBufferAttribute(G,J),M[H+k+8]=r.x,M[H+k+9]=r.y,M[H+k+10]=r.z,M[H+k+11]=G.itemSize===4?r.w:1)}}f={count:d,texture:I,size:new Ue(A,E)},i.set(a,f),a.addEventListener("dispose",C)}if(o.isInstancedMesh===!0&&o.morphTexture!==null)l.getUniforms().setValue(n,"morphTexture",o.morphTexture,t);else{let m=0;for(let g=0;g<c.length;g++)m+=c[g];const v=a.morphTargetsRelative?1:1-m;l.getUniforms().setValue(n,"morphTargetBaseInfluence",v),l.getUniforms().setValue(n,"morphTargetInfluences",c)}l.getUniforms().setValue(n,"morphTargetsTexture",f.texture,t),l.getUniforms().setValue(n,"morphTargetsTextureSize",f.size)}return{update:s}}function v7(n,e,t,i){let r=new WeakMap;function s(l){const c=i.render.frame,u=l.geometry,d=e.get(l,u);if(r.get(d)!==c&&(e.update(d),r.set(d,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),r.get(l)!==c&&(t.update(l.instanceMatrix,n.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,n.ARRAY_BUFFER),r.set(l,c))),l.isSkinnedMesh){const f=l.skeleton;r.get(f)!==c&&(f.update(),r.set(f,c))}return d}function o(){r=new WeakMap}function a(l){const c=l.target;c.removeEventListener("dispose",a),t.remove(c.instanceMatrix),c.instanceColor!==null&&t.remove(c.instanceColor)}return{update:s,dispose:o}}const Kk=new En,IR=new Lv(1,1),$k=new Av,Jk=new Mv,Qk=new of,DR=[],PR=[],OR=new Float32Array(16),LR=new Float32Array(9),kR=new Float32Array(4);function Pu(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let s=DR[r];if(s===void 0&&(s=new Float32Array(r),DR[r]=s),e!==0){i.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function vi(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function _i(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function Yv(n,e){let t=PR[e];t===void 0&&(t=new Int32Array(e),PR[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function _7(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function y7(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(vi(t,e))return;n.uniform2fv(this.addr,e),_i(t,e)}}function b7(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(vi(t,e))return;n.uniform3fv(this.addr,e),_i(t,e)}}function w7(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(vi(t,e))return;n.uniform4fv(this.addr,e),_i(t,e)}}function S7(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(vi(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),_i(t,e)}else{if(vi(t,i))return;kR.set(i),n.uniformMatrix2fv(this.addr,!1,kR),_i(t,i)}}function x7(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(vi(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),_i(t,e)}else{if(vi(t,i))return;LR.set(i),n.uniformMatrix3fv(this.addr,!1,LR),_i(t,i)}}function E7(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(vi(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),_i(t,e)}else{if(vi(t,i))return;OR.set(i),n.uniformMatrix4fv(this.addr,!1,OR),_i(t,i)}}function A7(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function M7(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(vi(t,e))return;n.uniform2iv(this.addr,e),_i(t,e)}}function T7(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(vi(t,e))return;n.uniform3iv(this.addr,e),_i(t,e)}}function C7(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(vi(t,e))return;n.uniform4iv(this.addr,e),_i(t,e)}}function R7(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function I7(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(vi(t,e))return;n.uniform2uiv(this.addr,e),_i(t,e)}}function D7(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(vi(t,e))return;n.uniform3uiv(this.addr,e),_i(t,e)}}function P7(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(vi(t,e))return;n.uniform4uiv(this.addr,e),_i(t,e)}}function O7(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r);let s;this.type===n.SAMPLER_2D_SHADOW?(IR.compareFunction=$S,s=IR):s=Kk,t.setTexture2D(e||s,r)}function L7(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||Jk,r)}function k7(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||Qk,r)}function U7(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||$k,r)}function N7(n){switch(n){case 5126:return _7;case 35664:return y7;case 35665:return b7;case 35666:return w7;case 35674:return S7;case 35675:return x7;case 35676:return E7;case 5124:case 35670:return A7;case 35667:case 35671:return M7;case 35668:case 35672:return T7;case 35669:case 35673:return C7;case 5125:return R7;case 36294:return I7;case 36295:return D7;case 36296:return P7;case 35678:case 36198:case 36298:case 36306:case 35682:return O7;case 35679:case 36299:case 36307:return L7;case 35680:case 36300:case 36308:case 36293:return k7;case 36289:case 36303:case 36311:case 36292:return U7}}function F7(n,e){n.uniform1fv(this.addr,e)}function B7(n,e){const t=Pu(e,this.size,2);n.uniform2fv(this.addr,t)}function z7(n,e){const t=Pu(e,this.size,3);n.uniform3fv(this.addr,t)}function H7(n,e){const t=Pu(e,this.size,4);n.uniform4fv(this.addr,t)}function G7(n,e){const t=Pu(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function V7(n,e){const t=Pu(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function W7(n,e){const t=Pu(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function j7(n,e){n.uniform1iv(this.addr,e)}function q7(n,e){n.uniform2iv(this.addr,e)}function X7(n,e){n.uniform3iv(this.addr,e)}function Y7(n,e){n.uniform4iv(this.addr,e)}function K7(n,e){n.uniform1uiv(this.addr,e)}function $7(n,e){n.uniform2uiv(this.addr,e)}function J7(n,e){n.uniform3uiv(this.addr,e)}function Q7(n,e){n.uniform4uiv(this.addr,e)}function Z7(n,e,t){const i=this.cache,r=e.length,s=Yv(t,r);vi(i,s)||(n.uniform1iv(this.addr,s),_i(i,s));for(let o=0;o!==r;++o)t.setTexture2D(e[o]||Kk,s[o])}function eJ(n,e,t){const i=this.cache,r=e.length,s=Yv(t,r);vi(i,s)||(n.uniform1iv(this.addr,s),_i(i,s));for(let o=0;o!==r;++o)t.setTexture3D(e[o]||Jk,s[o])}function tJ(n,e,t){const i=this.cache,r=e.length,s=Yv(t,r);vi(i,s)||(n.uniform1iv(this.addr,s),_i(i,s));for(let o=0;o!==r;++o)t.setTextureCube(e[o]||Qk,s[o])}function nJ(n,e,t){const i=this.cache,r=e.length,s=Yv(t,r);vi(i,s)||(n.uniform1iv(this.addr,s),_i(i,s));for(let o=0;o!==r;++o)t.setTexture2DArray(e[o]||$k,s[o])}function iJ(n){switch(n){case 5126:return F7;case 35664:return B7;case 35665:return z7;case 35666:return H7;case 35674:return G7;case 35675:return V7;case 35676:return W7;case 5124:case 35670:return j7;case 35667:case 35671:return q7;case 35668:case 35672:return X7;case 35669:case 35673:return Y7;case 5125:return K7;case 36294:return $7;case 36295:return J7;case 36296:return Q7;case 35678:case 36198:case 36298:case 36306:case 35682:return Z7;case 35679:case 36299:case 36307:return eJ;case 35680:case 36300:case 36308:case 36293:return tJ;case 36289:case 36303:case 36311:case 36292:return nJ}}class rJ{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.setValue=N7(t.type)}}class sJ{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=iJ(t.type)}}class oJ{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const a=r[s];a.setValue(e,t[a.id],i)}}}const K0=/(\w+)(\])?(\[|\.)?/g;function UR(n,e){n.seq.push(e),n.map[e.id]=e}function aJ(n,e,t){const i=n.name,r=i.length;for(K0.lastIndex=0;;){const s=K0.exec(i),o=K0.lastIndex;let a=s[1];const l=s[2]==="]",c=s[3];if(l&&(a=a|0),c===void 0||c==="["&&o+2===r){UR(t,c===void 0?new rJ(a,n,e):new sJ(a,n,e));break}else{let d=t.map[a];d===void 0&&(d=new oJ(a),UR(t,d)),t=d}}}class Gm{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){const s=e.getActiveUniform(t,r),o=e.getUniformLocation(t,s.name);aJ(s,o,this)}}setValue(e,t,i,r){const s=this.map[t];s!==void 0&&s.setValue(e,i,r)}setOptional(e,t,i){const r=t[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let s=0,o=t.length;s!==o;++s){const a=t[s],l=i[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,r)}}static seqWithValue(e,t){const i=[];for(let r=0,s=e.length;r!==s;++r){const o=e[r];o.id in t&&i.push(o)}return i}}function NR(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}const lJ=37297;let cJ=0;function uJ(n,e){const t=n.split("\n"),i=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=r;o<s;o++){const a=o+1;i.push("".concat(a===e?">":" "," ").concat(a,": ").concat(t[o]))}return i.join("\n")}const FR=new kt;function hJ(n){rn._getMatrix(FR,rn.workingColorSpace,n);const e="mat3( ".concat(FR.elements.map(t=>t.toFixed(4))," )");switch(rn.getTransfer(n)){case Rd:return[e,"LinearTransferOETF"];case wn:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",n),[e,"LinearTransferOETF"]}}function BR(n,e,t){const i=n.getShaderParameter(e,n.COMPILE_STATUS),s=(n.getShaderInfoLog(e)||"").trim();if(i&&s==="")return"";const o=/ERROR: 0:(\d+)/.exec(s);if(o){const a=parseInt(o[1]);return t.toUpperCase()+"\n\n"+s+"\n\n"+uJ(n.getShaderSource(e),a)}else return s}function dJ(n,e){const t=hJ(e);return["vec4 ".concat(n,"( vec4 value ) {"),"	return ".concat(t[1],"( vec4( value.rgb * ").concat(t[0],", value.a ) );"),"}"].join("\n")}function fJ(n,e){let t;switch(e){case SL:t="Linear";break;case xL:t="Reinhard";break;case EL:t="Cineon";break;case AL:t="ACESFilmic";break;case TL:t="AgX";break;case CL:t="Neutral";break;case ML:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const xm=new K;function pJ(){rn.getLuminanceCoefficients(xm);const n=xm.x.toFixed(4),e=xm.y.toFixed(4),t=xm.z.toFixed(4);return["float luminance( const in vec3 rgb ) {","	const vec3 weights = vec3( ".concat(n,", ").concat(e,", ").concat(t," );"),"	return dot( weights, rgb );","}"].join("\n")}function mJ(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(jh).join("\n")}function gJ(n){const e=[];for(const t in n){const i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join("\n")}function vJ(n,e){const t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const s=n.getActiveAttrib(e,r),o=s.name;let a=1;s.type===n.FLOAT_MAT2&&(a=2),s.type===n.FLOAT_MAT3&&(a=3),s.type===n.FLOAT_MAT4&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}function jh(n){return n!==""}function zR(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function HR(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const _J=/^[ \t]*#include +<([\w\d./]+)>/gm;function Tw(n){return n.replace(_J,bJ)}const yJ=new Map;function bJ(n,e){let t=zt[e];if(t===void 0){const i=yJ.get(e);if(i!==void 0)t=zt[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return Tw(t)}const wJ=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function GR(n){return n.replace(wJ,SJ)}function SJ(n,e,t,i){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function VR(n){let e="precision ".concat(n.precision," float;\n	precision ").concat(n.precision," int;\n	precision ").concat(n.precision," sampler2D;\n	precision ").concat(n.precision," samplerCube;\n	precision ").concat(n.precision," sampler3D;\n	precision ").concat(n.precision," sampler2DArray;\n	precision ").concat(n.precision," sampler2DShadow;\n	precision ").concat(n.precision," samplerCubeShadow;\n	precision ").concat(n.precision," sampler2DArrayShadow;\n	precision ").concat(n.precision," isampler2D;\n	precision ").concat(n.precision," isampler3D;\n	precision ").concat(n.precision," isamplerCube;\n	precision ").concat(n.precision," isampler2DArray;\n	precision ").concat(n.precision," usampler2D;\n	precision ").concat(n.precision," usampler3D;\n	precision ").concat(n.precision," usamplerCube;\n	precision ").concat(n.precision," usampler2DArray;\n	");return n.precision==="highp"?e+="\n#define HIGH_PRECISION":n.precision==="mediump"?e+="\n#define MEDIUM_PRECISION":n.precision==="lowp"&&(e+="\n#define LOW_PRECISION"),e}function xJ(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===GS?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===tL?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===Ts&&(e="SHADOWMAP_TYPE_VSM"),e}function EJ(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case mo:case Zo:e="ENVMAP_TYPE_CUBE";break;case Ru:e="ENVMAP_TYPE_CUBE_UV";break}return e}function AJ(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case Zo:e="ENVMAP_MODE_REFRACTION";break}return e}function MJ(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case ef:e="ENVMAP_BLENDING_MULTIPLY";break;case bL:e="ENVMAP_BLENDING_MIX";break;case wL:e="ENVMAP_BLENDING_ADD";break}return e}function TJ(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:i,maxMip:t}}function CJ(n,e,t,i){const r=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=xJ(t),c=EJ(t),u=AJ(t),d=MJ(t),f=TJ(t),m=mJ(t),v=gJ(s),g=r.createProgram();let y,b,S=t.glslVersion?"#version "+t.glslVersion+"\n":"";t.isRawShaderMaterial?(y=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v].filter(jh).join("\n"),y.length>0&&(y+="\n"),b=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v].filter(jh).join("\n"),b.length>0&&(b+="\n")):(y=[VR(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",t.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif","\n"].filter(jh).join("\n"),b=[VR(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+u:"",t.envMap?"#define "+d:"",f?"#define CUBEUV_TEXEL_WIDTH "+f.texelWidth:"",f?"#define CUBEUV_TEXEL_HEIGHT "+f.texelHeight:"",f?"#define CUBEUV_MAX_MIP "+f.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",t.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==co?"#define TONE_MAPPING":"",t.toneMapping!==co?zt.tonemapping_pars_fragment:"",t.toneMapping!==co?fJ("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",zt.colorspace_pars_fragment,dJ("linearToOutputTexel",t.outputColorSpace),pJ(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"","\n"].filter(jh).join("\n")),o=Tw(o),o=zR(o,t),o=HR(o,t),a=Tw(a),a=zR(a,t),a=HR(a,t),o=GR(o),a=GR(a),t.isRawShaderMaterial!==!0&&(S="#version 300 es\n",y=[m,"#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+y,b=["#define varying in",t.glslVersion===_w?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===_w?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+b);const x=S+y+o,A=S+b+a,E=NR(r,r.VERTEX_SHADER,x),M=NR(r,r.FRAGMENT_SHADER,A);r.attachShader(g,E),r.attachShader(g,M),t.index0AttributeName!==void 0?r.bindAttribLocation(g,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(g,0,"position"),r.linkProgram(g);function I(L){if(n.debug.checkShaderErrors){const z=r.getProgramInfoLog(g)||"",G=r.getShaderInfoLog(E)||"",H=r.getShaderInfoLog(M)||"",J=z.trim(),k=G.trim(),X=H.trim();let W=!0,ie=!0;if(r.getProgramParameter(g,r.LINK_STATUS)===!1)if(W=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(r,g,E,M);else{const se=BR(r,E,"vertex"),ye=BR(r,M,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(g,r.VALIDATE_STATUS)+"\n\nMaterial Name: "+L.name+"\nMaterial Type: "+L.type+"\n\nProgram Info Log: "+J+"\n"+se+"\n"+ye)}else J!==""?console.warn("THREE.WebGLProgram: Program Info Log:",J):(k===""||X==="")&&(ie=!1);ie&&(L.diagnostics={runnable:W,programLog:J,vertexShader:{log:k,prefix:y},fragmentShader:{log:X,prefix:b}})}r.deleteShader(E),r.deleteShader(M),R=new Gm(r,g),C=vJ(r,g)}let R;this.getUniforms=function(){return R===void 0&&I(this),R};let C;this.getAttributes=function(){return C===void 0&&I(this),C};let D=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return D===!1&&(D=r.getProgramParameter(g,lJ)),D},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(g),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=cJ++,this.cacheKey=e,this.usedTimes=1,this.program=g,this.vertexShader=E,this.fragmentShader=M,this}let RJ=0;class IJ{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(t),s=this._getShaderStage(i),o=this._getShaderCacheForMaterial(e);return o.has(r)===!1&&(o.add(r),r.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return i===void 0&&(i=new DJ(e),t.set(e,i)),i}}class DJ{constructor(e){this.id=RJ++,this.code=e,this.usedTimes=0}}function PJ(n,e,t,i,r,s,o){const a=new Tv,l=new IJ,c=new Set,u=[],d=r.logarithmicDepthBuffer,f=r.vertexTextures;let m=r.precision;const v={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function g(C){return c.add(C),C===0?"uv":"uv".concat(C)}function y(C,D,L,z,G){const H=z.fog,J=G.geometry,k=C.isMeshStandardMaterial?z.environment:null,X=(C.isMeshStandardMaterial?t:e).get(C.envMap||k),W=X&&X.mapping===Ru?X.image.height:null,ie=v[C.type];C.precision!==null&&(m=r.getMaxPrecision(C.precision),m!==C.precision&&console.warn("THREE.WebGLProgram.getParameters:",C.precision,"not supported, using",m,"instead."));const se=J.morphAttributes.position||J.morphAttributes.normal||J.morphAttributes.color,ye=se!==void 0?se.length:0;let Ne=0;J.morphAttributes.position!==void 0&&(Ne=1),J.morphAttributes.normal!==void 0&&(Ne=2),J.morphAttributes.color!==void 0&&(Ne=3);let He,fe,he,le;if(ie){const en=os[ie];He=en.vertexShader,fe=en.fragmentShader}else He=C.vertexShader,fe=C.fragmentShader,l.update(C),he=l.getVertexShaderID(C),le=l.getFragmentShaderID(C);const ee=n.getRenderTarget(),de=n.state.buffers.depth.getReversed(),be=G.isInstancedMesh===!0,oe=G.isBatchedMesh===!0,ge=!!C.map,Se=!!C.matcap,q=!!X,me=!!C.aoMap,xe=!!C.lightMap,Re=!!C.bumpMap,Ce=!!C.normalMap,qe=!!C.displacementMap,We=!!C.emissiveMap,Ze=!!C.metalnessMap,wt=!!C.roughnessMap,St=C.anisotropy>0,Y=C.clearcoat>0,B=C.dispersion>0,ue=C.iridescence>0,Ae=C.sheen>0,ze=C.transmission>0,Ie=St&&!!C.anisotropyMap,lt=Y&&!!C.clearcoatMap,Xe=Y&&!!C.clearcoatNormalMap,ht=Y&&!!C.clearcoatRoughnessMap,ct=ue&&!!C.iridescenceMap,je=ue&&!!C.iridescenceThicknessMap,Je=Ae&&!!C.sheenColorMap,bt=Ae&&!!C.sheenRoughnessMap,st=!!C.specularMap,Ye=!!C.specularColorMap,vt=!!C.specularIntensityMap,ce=ze&&!!C.transmissionMap,ve=ze&&!!C.thicknessMap,tt=!!C.gradientMap,ut=!!C.alphaMap,Ke=C.alphaTest>0,Te=!!C.alphaHash,dt=!!C.extensions;let Et=co;C.toneMapped&&(ee===null||ee.isXRRenderTarget===!0)&&(Et=n.toneMapping);const dn={shaderID:ie,shaderType:C.type,shaderName:C.name,vertexShader:He,fragmentShader:fe,defines:C.defines,customVertexShaderID:he,customFragmentShaderID:le,isRawShaderMaterial:C.isRawShaderMaterial===!0,glslVersion:C.glslVersion,precision:m,batching:oe,batchingColor:oe&&G._colorsTexture!==null,instancing:be,instancingColor:be&&G.instanceColor!==null,instancingMorph:be&&G.morphTexture!==null,supportsVertexTextures:f,outputColorSpace:ee===null?n.outputColorSpace:ee.isXRRenderTarget===!0?ee.texture.colorSpace:Vr,alphaToCoverage:!!C.alphaToCoverage,map:ge,matcap:Se,envMap:q,envMapMode:q&&X.mapping,envMapCubeUVHeight:W,aoMap:me,lightMap:xe,bumpMap:Re,normalMap:Ce,displacementMap:f&&qe,emissiveMap:We,normalMapObjectSpace:Ce&&C.normalMapType===LL,normalMapTangentSpace:Ce&&C.normalMapType===sa,metalnessMap:Ze,roughnessMap:wt,anisotropy:St,anisotropyMap:Ie,clearcoat:Y,clearcoatMap:lt,clearcoatNormalMap:Xe,clearcoatRoughnessMap:ht,dispersion:B,iridescence:ue,iridescenceMap:ct,iridescenceThicknessMap:je,sheen:Ae,sheenColorMap:Je,sheenRoughnessMap:bt,specularMap:st,specularColorMap:Ye,specularIntensityMap:vt,transmission:ze,transmissionMap:ce,thicknessMap:ve,gradientMap:tt,opaque:C.transparent===!1&&C.blending===_l&&C.alphaToCoverage===!1,alphaMap:ut,alphaTest:Ke,alphaHash:Te,combine:C.combine,mapUv:ge&&g(C.map.channel),aoMapUv:me&&g(C.aoMap.channel),lightMapUv:xe&&g(C.lightMap.channel),bumpMapUv:Re&&g(C.bumpMap.channel),normalMapUv:Ce&&g(C.normalMap.channel),displacementMapUv:qe&&g(C.displacementMap.channel),emissiveMapUv:We&&g(C.emissiveMap.channel),metalnessMapUv:Ze&&g(C.metalnessMap.channel),roughnessMapUv:wt&&g(C.roughnessMap.channel),anisotropyMapUv:Ie&&g(C.anisotropyMap.channel),clearcoatMapUv:lt&&g(C.clearcoatMap.channel),clearcoatNormalMapUv:Xe&&g(C.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:ht&&g(C.clearcoatRoughnessMap.channel),iridescenceMapUv:ct&&g(C.iridescenceMap.channel),iridescenceThicknessMapUv:je&&g(C.iridescenceThicknessMap.channel),sheenColorMapUv:Je&&g(C.sheenColorMap.channel),sheenRoughnessMapUv:bt&&g(C.sheenRoughnessMap.channel),specularMapUv:st&&g(C.specularMap.channel),specularColorMapUv:Ye&&g(C.specularColorMap.channel),specularIntensityMapUv:vt&&g(C.specularIntensityMap.channel),transmissionMapUv:ce&&g(C.transmissionMap.channel),thicknessMapUv:ve&&g(C.thicknessMap.channel),alphaMapUv:ut&&g(C.alphaMap.channel),vertexTangents:!!J.attributes.tangent&&(Ce||St),vertexColors:C.vertexColors,vertexAlphas:C.vertexColors===!0&&!!J.attributes.color&&J.attributes.color.itemSize===4,pointsUvs:G.isPoints===!0&&!!J.attributes.uv&&(ge||ut),fog:!!H,useFog:C.fog===!0,fogExp2:!!H&&H.isFogExp2,flatShading:C.flatShading===!0&&C.wireframe===!1,sizeAttenuation:C.sizeAttenuation===!0,logarithmicDepthBuffer:d,reversedDepthBuffer:de,skinning:G.isSkinnedMesh===!0,morphTargets:J.morphAttributes.position!==void 0,morphNormals:J.morphAttributes.normal!==void 0,morphColors:J.morphAttributes.color!==void 0,morphTargetsCount:ye,morphTextureStride:Ne,numDirLights:D.directional.length,numPointLights:D.point.length,numSpotLights:D.spot.length,numSpotLightMaps:D.spotLightMap.length,numRectAreaLights:D.rectArea.length,numHemiLights:D.hemi.length,numDirLightShadows:D.directionalShadowMap.length,numPointLightShadows:D.pointShadowMap.length,numSpotLightShadows:D.spotShadowMap.length,numSpotLightShadowsWithMaps:D.numSpotLightShadowsWithMaps,numLightProbes:D.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:C.dithering,shadowMapEnabled:n.shadowMap.enabled&&L.length>0,shadowMapType:n.shadowMap.type,toneMapping:Et,decodeVideoTexture:ge&&C.map.isVideoTexture===!0&&rn.getTransfer(C.map.colorSpace)===wn,decodeVideoTextureEmissive:We&&C.emissiveMap.isVideoTexture===!0&&rn.getTransfer(C.emissiveMap.colorSpace)===wn,premultipliedAlpha:C.premultipliedAlpha,doubleSided:C.side===Ji,flipSided:C.side===mi,useDepthPacking:C.depthPacking>=0,depthPacking:C.depthPacking||0,index0AttributeName:C.index0AttributeName,extensionClipCullDistance:dt&&C.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(dt&&C.extensions.multiDraw===!0||oe)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:C.customProgramCacheKey()};return dn.vertexUv1s=c.has(1),dn.vertexUv2s=c.has(2),dn.vertexUv3s=c.has(3),c.clear(),dn}function b(C){const D=[];if(C.shaderID?D.push(C.shaderID):(D.push(C.customVertexShaderID),D.push(C.customFragmentShaderID)),C.defines!==void 0)for(const L in C.defines)D.push(L),D.push(C.defines[L]);return C.isRawShaderMaterial===!1&&(S(D,C),x(D,C),D.push(n.outputColorSpace)),D.push(C.customProgramCacheKey),D.join()}function S(C,D){C.push(D.precision),C.push(D.outputColorSpace),C.push(D.envMapMode),C.push(D.envMapCubeUVHeight),C.push(D.mapUv),C.push(D.alphaMapUv),C.push(D.lightMapUv),C.push(D.aoMapUv),C.push(D.bumpMapUv),C.push(D.normalMapUv),C.push(D.displacementMapUv),C.push(D.emissiveMapUv),C.push(D.metalnessMapUv),C.push(D.roughnessMapUv),C.push(D.anisotropyMapUv),C.push(D.clearcoatMapUv),C.push(D.clearcoatNormalMapUv),C.push(D.clearcoatRoughnessMapUv),C.push(D.iridescenceMapUv),C.push(D.iridescenceThicknessMapUv),C.push(D.sheenColorMapUv),C.push(D.sheenRoughnessMapUv),C.push(D.specularMapUv),C.push(D.specularColorMapUv),C.push(D.specularIntensityMapUv),C.push(D.transmissionMapUv),C.push(D.thicknessMapUv),C.push(D.combine),C.push(D.fogExp2),C.push(D.sizeAttenuation),C.push(D.morphTargetsCount),C.push(D.morphAttributeCount),C.push(D.numDirLights),C.push(D.numPointLights),C.push(D.numSpotLights),C.push(D.numSpotLightMaps),C.push(D.numHemiLights),C.push(D.numRectAreaLights),C.push(D.numDirLightShadows),C.push(D.numPointLightShadows),C.push(D.numSpotLightShadows),C.push(D.numSpotLightShadowsWithMaps),C.push(D.numLightProbes),C.push(D.shadowMapType),C.push(D.toneMapping),C.push(D.numClippingPlanes),C.push(D.numClipIntersection),C.push(D.depthPacking)}function x(C,D){a.disableAll(),D.supportsVertexTextures&&a.enable(0),D.instancing&&a.enable(1),D.instancingColor&&a.enable(2),D.instancingMorph&&a.enable(3),D.matcap&&a.enable(4),D.envMap&&a.enable(5),D.normalMapObjectSpace&&a.enable(6),D.normalMapTangentSpace&&a.enable(7),D.clearcoat&&a.enable(8),D.iridescence&&a.enable(9),D.alphaTest&&a.enable(10),D.vertexColors&&a.enable(11),D.vertexAlphas&&a.enable(12),D.vertexUv1s&&a.enable(13),D.vertexUv2s&&a.enable(14),D.vertexUv3s&&a.enable(15),D.vertexTangents&&a.enable(16),D.anisotropy&&a.enable(17),D.alphaHash&&a.enable(18),D.batching&&a.enable(19),D.dispersion&&a.enable(20),D.batchingColor&&a.enable(21),D.gradientMap&&a.enable(22),C.push(a.mask),a.disableAll(),D.fog&&a.enable(0),D.useFog&&a.enable(1),D.flatShading&&a.enable(2),D.logarithmicDepthBuffer&&a.enable(3),D.reversedDepthBuffer&&a.enable(4),D.skinning&&a.enable(5),D.morphTargets&&a.enable(6),D.morphNormals&&a.enable(7),D.morphColors&&a.enable(8),D.premultipliedAlpha&&a.enable(9),D.shadowMapEnabled&&a.enable(10),D.doubleSided&&a.enable(11),D.flipSided&&a.enable(12),D.useDepthPacking&&a.enable(13),D.dithering&&a.enable(14),D.transmission&&a.enable(15),D.sheen&&a.enable(16),D.opaque&&a.enable(17),D.pointsUvs&&a.enable(18),D.decodeVideoTexture&&a.enable(19),D.decodeVideoTextureEmissive&&a.enable(20),D.alphaToCoverage&&a.enable(21),C.push(a.mask)}function A(C){const D=v[C.type];let L;if(D){const z=os[D];L=YL.clone(z.uniforms)}else L=C.uniforms;return L}function E(C,D){let L;for(let z=0,G=u.length;z<G;z++){const H=u[z];if(H.cacheKey===D){L=H,++L.usedTimes;break}}return L===void 0&&(L=new CJ(n,D,C,s),u.push(L)),L}function M(C){if(--C.usedTimes===0){const D=u.indexOf(C);u[D]=u[u.length-1],u.pop(),C.destroy()}}function I(C){l.remove(C)}function R(){l.dispose()}return{getParameters:y,getProgramCacheKey:b,getUniforms:A,acquireProgram:E,releaseProgram:M,releaseShaderCache:I,programs:u,dispose:R}}function OJ(){let n=new WeakMap;function e(o){return n.has(o)}function t(o){let a=n.get(o);return a===void 0&&(a={},n.set(o,a)),a}function i(o){n.delete(o)}function r(o,a,l){n.get(o)[a]=l}function s(){n=new WeakMap}return{has:e,get:t,remove:i,update:r,dispose:s}}function LJ(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function WR(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function jR(){const n=[];let e=0;const t=[],i=[],r=[];function s(){e=0,t.length=0,i.length=0,r.length=0}function o(d,f,m,v,g,y){let b=n[e];return b===void 0?(b={id:d.id,object:d,geometry:f,material:m,groupOrder:v,renderOrder:d.renderOrder,z:g,group:y},n[e]=b):(b.id=d.id,b.object=d,b.geometry=f,b.material=m,b.groupOrder=v,b.renderOrder=d.renderOrder,b.z=g,b.group=y),e++,b}function a(d,f,m,v,g,y){const b=o(d,f,m,v,g,y);m.transmission>0?i.push(b):m.transparent===!0?r.push(b):t.push(b)}function l(d,f,m,v,g,y){const b=o(d,f,m,v,g,y);m.transmission>0?i.unshift(b):m.transparent===!0?r.unshift(b):t.unshift(b)}function c(d,f){t.length>1&&t.sort(d||LJ),i.length>1&&i.sort(f||WR),r.length>1&&r.sort(f||WR)}function u(){for(let d=e,f=n.length;d<f;d++){const m=n[d];if(m.id===null)break;m.id=null,m.object=null,m.geometry=null,m.material=null,m.group=null}}return{opaque:t,transmissive:i,transparent:r,init:s,push:a,unshift:l,finish:u,sort:c}}function kJ(){let n=new WeakMap;function e(i,r){const s=n.get(i);let o;return s===void 0?(o=new jR,n.set(i,[o])):r>=s.length?(o=new jR,s.push(o)):o=s[r],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function UJ(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new K,color:new at};break;case"SpotLight":t={position:new K,direction:new K,color:new at,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new K,color:new at,distance:0,decay:0};break;case"HemisphereLight":t={direction:new K,skyColor:new at,groundColor:new at};break;case"RectAreaLight":t={color:new at,position:new K,halfWidth:new K,halfHeight:new K};break}return n[e.id]=t,t}}}function NJ(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ue};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ue};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ue,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let FJ=0;function BJ(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function zJ(n){const e=new UJ,t=NJ(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let c=0;c<9;c++)i.probe.push(new K);const r=new K,s=new Rt,o=new Rt;function a(c){let u=0,d=0,f=0;for(let C=0;C<9;C++)i.probe[C].set(0,0,0);let m=0,v=0,g=0,y=0,b=0,S=0,x=0,A=0,E=0,M=0,I=0;c.sort(BJ);for(let C=0,D=c.length;C<D;C++){const L=c[C],z=L.color,G=L.intensity,H=L.distance,J=L.shadow&&L.shadow.map?L.shadow.map.texture:null;if(L.isAmbientLight)u+=z.r*G,d+=z.g*G,f+=z.b*G;else if(L.isLightProbe){for(let k=0;k<9;k++)i.probe[k].addScaledVector(L.sh.coefficients[k],G);I++}else if(L.isDirectionalLight){const k=e.get(L);if(k.color.copy(L.color).multiplyScalar(L.intensity),L.castShadow){const X=L.shadow,W=t.get(L);W.shadowIntensity=X.intensity,W.shadowBias=X.bias,W.shadowNormalBias=X.normalBias,W.shadowRadius=X.radius,W.shadowMapSize=X.mapSize,i.directionalShadow[m]=W,i.directionalShadowMap[m]=J,i.directionalShadowMatrix[m]=L.shadow.matrix,S++}i.directional[m]=k,m++}else if(L.isSpotLight){const k=e.get(L);k.position.setFromMatrixPosition(L.matrixWorld),k.color.copy(z).multiplyScalar(G),k.distance=H,k.coneCos=Math.cos(L.angle),k.penumbraCos=Math.cos(L.angle*(1-L.penumbra)),k.decay=L.decay,i.spot[g]=k;const X=L.shadow;if(L.map&&(i.spotLightMap[E]=L.map,E++,X.updateMatrices(L),L.castShadow&&M++),i.spotLightMatrix[g]=X.matrix,L.castShadow){const W=t.get(L);W.shadowIntensity=X.intensity,W.shadowBias=X.bias,W.shadowNormalBias=X.normalBias,W.shadowRadius=X.radius,W.shadowMapSize=X.mapSize,i.spotShadow[g]=W,i.spotShadowMap[g]=J,A++}g++}else if(L.isRectAreaLight){const k=e.get(L);k.color.copy(z).multiplyScalar(G),k.halfWidth.set(L.width*.5,0,0),k.halfHeight.set(0,L.height*.5,0),i.rectArea[y]=k,y++}else if(L.isPointLight){const k=e.get(L);if(k.color.copy(L.color).multiplyScalar(L.intensity),k.distance=L.distance,k.decay=L.decay,L.castShadow){const X=L.shadow,W=t.get(L);W.shadowIntensity=X.intensity,W.shadowBias=X.bias,W.shadowNormalBias=X.normalBias,W.shadowRadius=X.radius,W.shadowMapSize=X.mapSize,W.shadowCameraNear=X.camera.near,W.shadowCameraFar=X.camera.far,i.pointShadow[v]=W,i.pointShadowMap[v]=J,i.pointShadowMatrix[v]=L.shadow.matrix,x++}i.point[v]=k,v++}else if(L.isHemisphereLight){const k=e.get(L);k.skyColor.copy(L.color).multiplyScalar(G),k.groundColor.copy(L.groundColor).multiplyScalar(G),i.hemi[b]=k,b++}}y>0&&(n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=rt.LTC_FLOAT_1,i.rectAreaLTC2=rt.LTC_FLOAT_2):(i.rectAreaLTC1=rt.LTC_HALF_1,i.rectAreaLTC2=rt.LTC_HALF_2)),i.ambient[0]=u,i.ambient[1]=d,i.ambient[2]=f;const R=i.hash;(R.directionalLength!==m||R.pointLength!==v||R.spotLength!==g||R.rectAreaLength!==y||R.hemiLength!==b||R.numDirectionalShadows!==S||R.numPointShadows!==x||R.numSpotShadows!==A||R.numSpotMaps!==E||R.numLightProbes!==I)&&(i.directional.length=m,i.spot.length=g,i.rectArea.length=y,i.point.length=v,i.hemi.length=b,i.directionalShadow.length=S,i.directionalShadowMap.length=S,i.pointShadow.length=x,i.pointShadowMap.length=x,i.spotShadow.length=A,i.spotShadowMap.length=A,i.directionalShadowMatrix.length=S,i.pointShadowMatrix.length=x,i.spotLightMatrix.length=A+E-M,i.spotLightMap.length=E,i.numSpotLightShadowsWithMaps=M,i.numLightProbes=I,R.directionalLength=m,R.pointLength=v,R.spotLength=g,R.rectAreaLength=y,R.hemiLength=b,R.numDirectionalShadows=S,R.numPointShadows=x,R.numSpotShadows=A,R.numSpotMaps=E,R.numLightProbes=I,i.version=FJ++)}function l(c,u){let d=0,f=0,m=0,v=0,g=0;const y=u.matrixWorldInverse;for(let b=0,S=c.length;b<S;b++){const x=c[b];if(x.isDirectionalLight){const A=i.directional[d];A.direction.setFromMatrixPosition(x.matrixWorld),r.setFromMatrixPosition(x.target.matrixWorld),A.direction.sub(r),A.direction.transformDirection(y),d++}else if(x.isSpotLight){const A=i.spot[m];A.position.setFromMatrixPosition(x.matrixWorld),A.position.applyMatrix4(y),A.direction.setFromMatrixPosition(x.matrixWorld),r.setFromMatrixPosition(x.target.matrixWorld),A.direction.sub(r),A.direction.transformDirection(y),m++}else if(x.isRectAreaLight){const A=i.rectArea[v];A.position.setFromMatrixPosition(x.matrixWorld),A.position.applyMatrix4(y),o.identity(),s.copy(x.matrixWorld),s.premultiply(y),o.extractRotation(s),A.halfWidth.set(x.width*.5,0,0),A.halfHeight.set(0,x.height*.5,0),A.halfWidth.applyMatrix4(o),A.halfHeight.applyMatrix4(o),v++}else if(x.isPointLight){const A=i.point[f];A.position.setFromMatrixPosition(x.matrixWorld),A.position.applyMatrix4(y),f++}else if(x.isHemisphereLight){const A=i.hemi[g];A.direction.setFromMatrixPosition(x.matrixWorld),A.direction.transformDirection(y),g++}}}return{setup:a,setupView:l,state:i}}function qR(n){const e=new zJ(n),t=[],i=[];function r(u){c.camera=u,t.length=0,i.length=0}function s(u){t.push(u)}function o(u){i.push(u)}function a(){e.setup(t)}function l(u){e.setupView(t,u)}const c={lightsArray:t,shadowsArray:i,camera:null,lights:e,transmissionRenderTarget:{}};return{init:r,state:c,setupLights:a,setupLightsView:l,pushLight:s,pushShadow:o}}function HJ(n){let e=new WeakMap;function t(r,s=0){const o=e.get(r);let a;return o===void 0?(a=new qR(n),e.set(r,[a])):s>=o.length?(a=new qR(n),o.push(a)):a=o[s],a}function i(){e=new WeakMap}return{get:t,dispose:i}}const GJ="void main() {\n	gl_Position = vec4( position, 1.0 );\n}",VJ="uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n	const float samples = float( VSM_SAMPLES );\n	float mean = 0.0;\n	float squared_mean = 0.0;\n	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n	for ( float i = 0.0; i < samples; i ++ ) {\n		float uvOffset = uvStart + i * uvStride;\n		#ifdef HORIZONTAL_PASS\n			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n			mean += distribution.x;\n			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n		#else\n			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n			mean += depth;\n			squared_mean += depth * depth;\n		#endif\n	}\n	mean = mean / samples;\n	squared_mean = squared_mean / samples;\n	float std_dev = sqrt( squared_mean - mean * mean );\n	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}";function WJ(n,e,t){let i=new Du;const r=new Ue,s=new Ue,o=new Jt,a=new dx({depthPacking:OL}),l=new fx,c={},u=t.maxTextureSize,d={[Us]:mi,[mi]:Us,[Ji]:Ji},f=new Wn({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ue},radius:{value:4}},vertexShader:GJ,fragmentShader:VJ}),m=f.clone();m.defines.HORIZONTAL_PASS=1;const v=new Ut;v.setAttribute("position",new _n(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const g=new Fn(v,f),y=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=GS;let b=this.type;this.render=function(M,I,R){if(y.enabled===!1||y.autoUpdate===!1&&y.needsUpdate===!1||M.length===0)return;const C=n.getRenderTarget(),D=n.getActiveCubeFace(),L=n.getActiveMipmapLevel(),z=n.state;z.setBlending(Ai),z.buffers.depth.getReversed()===!0?z.buffers.color.setClear(0,0,0,0):z.buffers.color.setClear(1,1,1,1),z.buffers.depth.setTest(!0),z.setScissorTest(!1);const G=b!==Ts&&this.type===Ts,H=b===Ts&&this.type!==Ts;for(let J=0,k=M.length;J<k;J++){const X=M[J],W=X.shadow;if(W===void 0){console.warn("THREE.WebGLShadowMap:",X,"has no shadow.");continue}if(W.autoUpdate===!1&&W.needsUpdate===!1)continue;r.copy(W.mapSize);const ie=W.getFrameExtents();if(r.multiply(ie),s.copy(W.mapSize),(r.x>u||r.y>u)&&(r.x>u&&(s.x=Math.floor(u/ie.x),r.x=s.x*ie.x,W.mapSize.x=s.x),r.y>u&&(s.y=Math.floor(u/ie.y),r.y=s.y*ie.y,W.mapSize.y=s.y)),W.map===null||G===!0||H===!0){const ye=this.type!==Ts?{minFilter:gi,magFilter:gi}:{};W.map!==null&&W.map.dispose(),W.map=new ni(r.x,r.y,ye),W.map.texture.name=X.name+".shadowMap",W.camera.updateProjectionMatrix()}n.setRenderTarget(W.map),n.clear();const se=W.getViewportCount();for(let ye=0;ye<se;ye++){const Ne=W.getViewport(ye);o.set(s.x*Ne.x,s.y*Ne.y,s.x*Ne.z,s.y*Ne.w),z.viewport(o),W.updateMatrices(X,ye),i=W.getFrustum(),A(I,R,W.camera,X,this.type)}W.isPointLightShadow!==!0&&this.type===Ts&&S(W,R),W.needsUpdate=!1}b=this.type,y.needsUpdate=!1,n.setRenderTarget(C,D,L)};function S(M,I){const R=e.update(g);f.defines.VSM_SAMPLES!==M.blurSamples&&(f.defines.VSM_SAMPLES=M.blurSamples,m.defines.VSM_SAMPLES=M.blurSamples,f.needsUpdate=!0,m.needsUpdate=!0),M.mapPass===null&&(M.mapPass=new ni(r.x,r.y)),f.uniforms.shadow_pass.value=M.map.texture,f.uniforms.resolution.value=M.mapSize,f.uniforms.radius.value=M.radius,n.setRenderTarget(M.mapPass),n.clear(),n.renderBufferDirect(I,null,R,f,g,null),m.uniforms.shadow_pass.value=M.mapPass.texture,m.uniforms.resolution.value=M.mapSize,m.uniforms.radius.value=M.radius,n.setRenderTarget(M.map),n.clear(),n.renderBufferDirect(I,null,R,m,g,null)}function x(M,I,R,C){let D=null;const L=R.isPointLight===!0?M.customDistanceMaterial:M.customDepthMaterial;if(L!==void 0)D=L;else if(D=R.isPointLight===!0?l:a,n.localClippingEnabled&&I.clipShadows===!0&&Array.isArray(I.clippingPlanes)&&I.clippingPlanes.length!==0||I.displacementMap&&I.displacementScale!==0||I.alphaMap&&I.alphaTest>0||I.map&&I.alphaTest>0||I.alphaToCoverage===!0){const z=D.uuid,G=I.uuid;let H=c[z];H===void 0&&(H={},c[z]=H);let J=H[G];J===void 0&&(J=D.clone(),H[G]=J,I.addEventListener("dispose",E)),D=J}if(D.visible=I.visible,D.wireframe=I.wireframe,C===Ts?D.side=I.shadowSide!==null?I.shadowSide:I.side:D.side=I.shadowSide!==null?I.shadowSide:d[I.side],D.alphaMap=I.alphaMap,D.alphaTest=I.alphaToCoverage===!0?.5:I.alphaTest,D.map=I.map,D.clipShadows=I.clipShadows,D.clippingPlanes=I.clippingPlanes,D.clipIntersection=I.clipIntersection,D.displacementMap=I.displacementMap,D.displacementScale=I.displacementScale,D.displacementBias=I.displacementBias,D.wireframeLinewidth=I.wireframeLinewidth,D.linewidth=I.linewidth,R.isPointLight===!0&&D.isMeshDistanceMaterial===!0){const z=n.properties.get(D);z.light=R}return D}function A(M,I,R,C,D){if(M.visible===!1)return;if(M.layers.test(I.layers)&&(M.isMesh||M.isLine||M.isPoints)&&(M.castShadow||M.receiveShadow&&D===Ts)&&(!M.frustumCulled||i.intersectsObject(M))){M.modelViewMatrix.multiplyMatrices(R.matrixWorldInverse,M.matrixWorld);const G=e.update(M),H=M.material;if(Array.isArray(H)){const J=G.groups;for(let k=0,X=J.length;k<X;k++){const W=J[k],ie=H[W.materialIndex];if(ie&&ie.visible){const se=x(M,ie,C,D);M.onBeforeShadow(n,M,I,R,G,se,W),n.renderBufferDirect(R,null,G,se,M,W),M.onAfterShadow(n,M,I,R,G,se,W)}}}else if(H.visible){const J=x(M,H,C,D);M.onBeforeShadow(n,M,I,R,G,J,null),n.renderBufferDirect(R,null,G,J,M,null),M.onAfterShadow(n,M,I,R,G,J,null)}}const z=M.children;for(let G=0,H=z.length;G<H;G++)A(z[G],I,R,C,D)}function E(M){M.target.removeEventListener("dispose",E);for(const R in c){const C=c[R],D=M.target.uuid;D in C&&(C[D].dispose(),delete C[D])}}}const jJ={[fg]:pg,[mg]:_g,[gg]:yg,[Cl]:vg,[pg]:fg,[_g]:mg,[yg]:gg,[vg]:Cl};function qJ(n,e){function t(){let ce=!1;const ve=new Jt;let tt=null;const ut=new Jt(0,0,0,0);return{setMask:function(Ke){tt!==Ke&&!ce&&(n.colorMask(Ke,Ke,Ke,Ke),tt=Ke)},setLocked:function(Ke){ce=Ke},setClear:function(Ke,Te,dt,Et,dn){dn===!0&&(Ke*=Et,Te*=Et,dt*=Et),ve.set(Ke,Te,dt,Et),ut.equals(ve)===!1&&(n.clearColor(Ke,Te,dt,Et),ut.copy(ve))},reset:function(){ce=!1,tt=null,ut.set(-1,0,0,0)}}}function i(){let ce=!1,ve=!1,tt=null,ut=null,Ke=null;return{setReversed:function(Te){if(ve!==Te){const dt=e.get("EXT_clip_control");Te?dt.clipControlEXT(dt.LOWER_LEFT_EXT,dt.ZERO_TO_ONE_EXT):dt.clipControlEXT(dt.LOWER_LEFT_EXT,dt.NEGATIVE_ONE_TO_ONE_EXT),ve=Te;const Et=Ke;Ke=null,this.setClear(Et)}},getReversed:function(){return ve},setTest:function(Te){Te?ee(n.DEPTH_TEST):de(n.DEPTH_TEST)},setMask:function(Te){tt!==Te&&!ce&&(n.depthMask(Te),tt=Te)},setFunc:function(Te){if(ve&&(Te=jJ[Te]),ut!==Te){switch(Te){case fg:n.depthFunc(n.NEVER);break;case pg:n.depthFunc(n.ALWAYS);break;case mg:n.depthFunc(n.LESS);break;case Cl:n.depthFunc(n.LEQUAL);break;case gg:n.depthFunc(n.EQUAL);break;case vg:n.depthFunc(n.GEQUAL);break;case _g:n.depthFunc(n.GREATER);break;case yg:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}ut=Te}},setLocked:function(Te){ce=Te},setClear:function(Te){Ke!==Te&&(ve&&(Te=1-Te),n.clearDepth(Te),Ke=Te)},reset:function(){ce=!1,tt=null,ut=null,Ke=null,ve=!1}}}function r(){let ce=!1,ve=null,tt=null,ut=null,Ke=null,Te=null,dt=null,Et=null,dn=null;return{setTest:function(en){ce||(en?ee(n.STENCIL_TEST):de(n.STENCIL_TEST))},setMask:function(en){ve!==en&&!ce&&(n.stencilMask(en),ve=en)},setFunc:function(en,vr,Oi){(tt!==en||ut!==vr||Ke!==Oi)&&(n.stencilFunc(en,vr,Oi),tt=en,ut=vr,Ke=Oi)},setOp:function(en,vr,Oi){(Te!==en||dt!==vr||Et!==Oi)&&(n.stencilOp(en,vr,Oi),Te=en,dt=vr,Et=Oi)},setLocked:function(en){ce=en},setClear:function(en){dn!==en&&(n.clearStencil(en),dn=en)},reset:function(){ce=!1,ve=null,tt=null,ut=null,Ke=null,Te=null,dt=null,Et=null,dn=null}}}const s=new t,o=new i,a=new r,l=new WeakMap,c=new WeakMap;let u={},d={},f=new WeakMap,m=[],v=null,g=!1,y=null,b=null,S=null,x=null,A=null,E=null,M=null,I=new at(0,0,0),R=0,C=!1,D=null,L=null,z=null,G=null,H=null;const J=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let k=!1,X=0;const W=n.getParameter(n.VERSION);W.indexOf("WebGL")!==-1?(X=parseFloat(/^WebGL (\d)/.exec(W)[1]),k=X>=1):W.indexOf("OpenGL ES")!==-1&&(X=parseFloat(/^OpenGL ES (\d)/.exec(W)[1]),k=X>=2);let ie=null,se={};const ye=n.getParameter(n.SCISSOR_BOX),Ne=n.getParameter(n.VIEWPORT),He=new Jt().fromArray(ye),fe=new Jt().fromArray(Ne);function he(ce,ve,tt,ut){const Ke=new Uint8Array(4),Te=n.createTexture();n.bindTexture(ce,Te),n.texParameteri(ce,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(ce,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let dt=0;dt<tt;dt++)ce===n.TEXTURE_3D||ce===n.TEXTURE_2D_ARRAY?n.texImage3D(ve,0,n.RGBA,1,1,ut,0,n.RGBA,n.UNSIGNED_BYTE,Ke):n.texImage2D(ve+dt,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,Ke);return Te}const le={};le[n.TEXTURE_2D]=he(n.TEXTURE_2D,n.TEXTURE_2D,1),le[n.TEXTURE_CUBE_MAP]=he(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),le[n.TEXTURE_2D_ARRAY]=he(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),le[n.TEXTURE_3D]=he(n.TEXTURE_3D,n.TEXTURE_3D,1,1),s.setClear(0,0,0,1),o.setClear(1),a.setClear(0),ee(n.DEPTH_TEST),o.setFunc(Cl),Re(!1),Ce(hw),ee(n.CULL_FACE),me(Ai);function ee(ce){u[ce]!==!0&&(n.enable(ce),u[ce]=!0)}function de(ce){u[ce]!==!1&&(n.disable(ce),u[ce]=!1)}function be(ce,ve){return d[ce]!==ve?(n.bindFramebuffer(ce,ve),d[ce]=ve,ce===n.DRAW_FRAMEBUFFER&&(d[n.FRAMEBUFFER]=ve),ce===n.FRAMEBUFFER&&(d[n.DRAW_FRAMEBUFFER]=ve),!0):!1}function oe(ce,ve){let tt=m,ut=!1;if(ce){tt=f.get(ve),tt===void 0&&(tt=[],f.set(ve,tt));const Ke=ce.textures;if(tt.length!==Ke.length||tt[0]!==n.COLOR_ATTACHMENT0){for(let Te=0,dt=Ke.length;Te<dt;Te++)tt[Te]=n.COLOR_ATTACHMENT0+Te;tt.length=Ke.length,ut=!0}}else tt[0]!==n.BACK&&(tt[0]=n.BACK,ut=!0);ut&&n.drawBuffers(tt)}function ge(ce){return v!==ce?(n.useProgram(ce),v=ce,!0):!1}const Se={[No]:n.FUNC_ADD,[iL]:n.FUNC_SUBTRACT,[rL]:n.FUNC_REVERSE_SUBTRACT};Se[sL]=n.MIN,Se[oL]=n.MAX;const q={[aL]:n.ZERO,[lL]:n.ONE,[cL]:n.SRC_COLOR,[hg]:n.SRC_ALPHA,[mL]:n.SRC_ALPHA_SATURATE,[fL]:n.DST_COLOR,[hL]:n.DST_ALPHA,[uL]:n.ONE_MINUS_SRC_COLOR,[dg]:n.ONE_MINUS_SRC_ALPHA,[pL]:n.ONE_MINUS_DST_COLOR,[dL]:n.ONE_MINUS_DST_ALPHA,[gL]:n.CONSTANT_COLOR,[vL]:n.ONE_MINUS_CONSTANT_COLOR,[_L]:n.CONSTANT_ALPHA,[yL]:n.ONE_MINUS_CONSTANT_ALPHA};function me(ce,ve,tt,ut,Ke,Te,dt,Et,dn,en){if(ce===Ai){g===!0&&(de(n.BLEND),g=!1);return}if(g===!1&&(ee(n.BLEND),g=!0),ce!==nL){if(ce!==y||en!==C){if((b!==No||A!==No)&&(n.blendEquation(n.FUNC_ADD),b=No,A=No),en)switch(ce){case _l:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case dw:n.blendFunc(n.ONE,n.ONE);break;case fw:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case pw:n.blendFuncSeparate(n.DST_COLOR,n.ONE_MINUS_SRC_ALPHA,n.ZERO,n.ONE);break;default:console.error("THREE.WebGLState: Invalid blending: ",ce);break}else switch(ce){case _l:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case dw:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE,n.ONE,n.ONE);break;case fw:console.error("THREE.WebGLState: SubtractiveBlending requires material.premultipliedAlpha = true");break;case pw:console.error("THREE.WebGLState: MultiplyBlending requires material.premultipliedAlpha = true");break;default:console.error("THREE.WebGLState: Invalid blending: ",ce);break}S=null,x=null,E=null,M=null,I.set(0,0,0),R=0,y=ce,C=en}return}Ke=Ke||ve,Te=Te||tt,dt=dt||ut,(ve!==b||Ke!==A)&&(n.blendEquationSeparate(Se[ve],Se[Ke]),b=ve,A=Ke),(tt!==S||ut!==x||Te!==E||dt!==M)&&(n.blendFuncSeparate(q[tt],q[ut],q[Te],q[dt]),S=tt,x=ut,E=Te,M=dt),(Et.equals(I)===!1||dn!==R)&&(n.blendColor(Et.r,Et.g,Et.b,dn),I.copy(Et),R=dn),y=ce,C=!1}function xe(ce,ve){ce.side===Ji?de(n.CULL_FACE):ee(n.CULL_FACE);let tt=ce.side===mi;ve&&(tt=!tt),Re(tt),ce.blending===_l&&ce.transparent===!1?me(Ai):me(ce.blending,ce.blendEquation,ce.blendSrc,ce.blendDst,ce.blendEquationAlpha,ce.blendSrcAlpha,ce.blendDstAlpha,ce.blendColor,ce.blendAlpha,ce.premultipliedAlpha),o.setFunc(ce.depthFunc),o.setTest(ce.depthTest),o.setMask(ce.depthWrite),s.setMask(ce.colorWrite);const ut=ce.stencilWrite;a.setTest(ut),ut&&(a.setMask(ce.stencilWriteMask),a.setFunc(ce.stencilFunc,ce.stencilRef,ce.stencilFuncMask),a.setOp(ce.stencilFail,ce.stencilZFail,ce.stencilZPass)),We(ce.polygonOffset,ce.polygonOffsetFactor,ce.polygonOffsetUnits),ce.alphaToCoverage===!0?ee(n.SAMPLE_ALPHA_TO_COVERAGE):de(n.SAMPLE_ALPHA_TO_COVERAGE)}function Re(ce){D!==ce&&(ce?n.frontFace(n.CW):n.frontFace(n.CCW),D=ce)}function Ce(ce){ce!==ZO?(ee(n.CULL_FACE),ce!==L&&(ce===hw?n.cullFace(n.BACK):ce===eL?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):de(n.CULL_FACE),L=ce}function qe(ce){ce!==z&&(k&&n.lineWidth(ce),z=ce)}function We(ce,ve,tt){ce?(ee(n.POLYGON_OFFSET_FILL),(G!==ve||H!==tt)&&(n.polygonOffset(ve,tt),G=ve,H=tt)):de(n.POLYGON_OFFSET_FILL)}function Ze(ce){ce?ee(n.SCISSOR_TEST):de(n.SCISSOR_TEST)}function wt(ce){ce===void 0&&(ce=n.TEXTURE0+J-1),ie!==ce&&(n.activeTexture(ce),ie=ce)}function St(ce,ve,tt){tt===void 0&&(ie===null?tt=n.TEXTURE0+J-1:tt=ie);let ut=se[tt];ut===void 0&&(ut={type:void 0,texture:void 0},se[tt]=ut),(ut.type!==ce||ut.texture!==ve)&&(ie!==tt&&(n.activeTexture(tt),ie=tt),n.bindTexture(ce,ve||le[ce]),ut.type=ce,ut.texture=ve)}function Y(){const ce=se[ie];ce!==void 0&&ce.type!==void 0&&(n.bindTexture(ce.type,null),ce.type=void 0,ce.texture=void 0)}function B(){try{n.compressedTexImage2D(...arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function ue(){try{n.compressedTexImage3D(...arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function Ae(){try{n.texSubImage2D(...arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function ze(){try{n.texSubImage3D(...arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function Ie(){try{n.compressedTexSubImage2D(...arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function lt(){try{n.compressedTexSubImage3D(...arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function Xe(){try{n.texStorage2D(...arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function ht(){try{n.texStorage3D(...arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function ct(){try{n.texImage2D(...arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function je(){try{n.texImage3D(...arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function Je(ce){He.equals(ce)===!1&&(n.scissor(ce.x,ce.y,ce.z,ce.w),He.copy(ce))}function bt(ce){fe.equals(ce)===!1&&(n.viewport(ce.x,ce.y,ce.z,ce.w),fe.copy(ce))}function st(ce,ve){let tt=c.get(ve);tt===void 0&&(tt=new WeakMap,c.set(ve,tt));let ut=tt.get(ce);ut===void 0&&(ut=n.getUniformBlockIndex(ve,ce.name),tt.set(ce,ut))}function Ye(ce,ve){const ut=c.get(ve).get(ce);l.get(ve)!==ut&&(n.uniformBlockBinding(ve,ut,ce.__bindingPointIndex),l.set(ve,ut))}function vt(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),o.setReversed(!1),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),u={},ie=null,se={},d={},f=new WeakMap,m=[],v=null,g=!1,y=null,b=null,S=null,x=null,A=null,E=null,M=null,I=new at(0,0,0),R=0,C=!1,D=null,L=null,z=null,G=null,H=null,He.set(0,0,n.canvas.width,n.canvas.height),fe.set(0,0,n.canvas.width,n.canvas.height),s.reset(),o.reset(),a.reset()}return{buffers:{color:s,depth:o,stencil:a},enable:ee,disable:de,bindFramebuffer:be,drawBuffers:oe,useProgram:ge,setBlending:me,setMaterial:xe,setFlipSided:Re,setCullFace:Ce,setLineWidth:qe,setPolygonOffset:We,setScissorTest:Ze,activeTexture:wt,bindTexture:St,unbindTexture:Y,compressedTexImage2D:B,compressedTexImage3D:ue,texImage2D:ct,texImage3D:je,updateUBOMapping:st,uniformBlockBinding:Ye,texStorage2D:Xe,texStorage3D:ht,texSubImage2D:Ae,texSubImage3D:ze,compressedTexSubImage2D:Ie,compressedTexSubImage3D:lt,scissor:Je,viewport:bt,reset:vt}}function XJ(n,e,t,i,r,s,o){const a=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),c=new Ue,u=new WeakMap;let d;const f=new WeakMap;let m=!1;try{m=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch(Y){}function v(Y,B){return m?new OffscreenCanvas(Y,B):Dd("canvas")}function g(Y,B,ue){let Ae=1;const ze=St(Y);if((ze.width>ue||ze.height>ue)&&(Ae=ue/Math.max(ze.width,ze.height)),Ae<1)if(typeof HTMLImageElement<"u"&&Y instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&Y instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&Y instanceof ImageBitmap||typeof VideoFrame<"u"&&Y instanceof VideoFrame){const Ie=Math.floor(Ae*ze.width),lt=Math.floor(Ae*ze.height);d===void 0&&(d=v(Ie,lt));const Xe=B?v(Ie,lt):d;return Xe.width=Ie,Xe.height=lt,Xe.getContext("2d").drawImage(Y,0,0,Ie,lt),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+ze.width+"x"+ze.height+") to ("+Ie+"x"+lt+")."),Xe}else return"data"in Y&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+ze.width+"x"+ze.height+")."),Y;return Y}function y(Y){return Y.generateMipmaps}function b(Y){n.generateMipmap(Y)}function S(Y){return Y.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:Y.isWebGL3DRenderTarget?n.TEXTURE_3D:Y.isWebGLArrayRenderTarget||Y.isCompressedArrayTexture?n.TEXTURE_2D_ARRAY:n.TEXTURE_2D}function x(Y,B,ue,Ae,ze=!1){if(Y!==null){if(n[Y]!==void 0)return n[Y];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+Y+"'")}let Ie=B;if(B===n.RED&&(ue===n.FLOAT&&(Ie=n.R32F),ue===n.HALF_FLOAT&&(Ie=n.R16F),ue===n.UNSIGNED_BYTE&&(Ie=n.R8)),B===n.RED_INTEGER&&(ue===n.UNSIGNED_BYTE&&(Ie=n.R8UI),ue===n.UNSIGNED_SHORT&&(Ie=n.R16UI),ue===n.UNSIGNED_INT&&(Ie=n.R32UI),ue===n.BYTE&&(Ie=n.R8I),ue===n.SHORT&&(Ie=n.R16I),ue===n.INT&&(Ie=n.R32I)),B===n.RG&&(ue===n.FLOAT&&(Ie=n.RG32F),ue===n.HALF_FLOAT&&(Ie=n.RG16F),ue===n.UNSIGNED_BYTE&&(Ie=n.RG8)),B===n.RG_INTEGER&&(ue===n.UNSIGNED_BYTE&&(Ie=n.RG8UI),ue===n.UNSIGNED_SHORT&&(Ie=n.RG16UI),ue===n.UNSIGNED_INT&&(Ie=n.RG32UI),ue===n.BYTE&&(Ie=n.RG8I),ue===n.SHORT&&(Ie=n.RG16I),ue===n.INT&&(Ie=n.RG32I)),B===n.RGB_INTEGER&&(ue===n.UNSIGNED_BYTE&&(Ie=n.RGB8UI),ue===n.UNSIGNED_SHORT&&(Ie=n.RGB16UI),ue===n.UNSIGNED_INT&&(Ie=n.RGB32UI),ue===n.BYTE&&(Ie=n.RGB8I),ue===n.SHORT&&(Ie=n.RGB16I),ue===n.INT&&(Ie=n.RGB32I)),B===n.RGBA_INTEGER&&(ue===n.UNSIGNED_BYTE&&(Ie=n.RGBA8UI),ue===n.UNSIGNED_SHORT&&(Ie=n.RGBA16UI),ue===n.UNSIGNED_INT&&(Ie=n.RGBA32UI),ue===n.BYTE&&(Ie=n.RGBA8I),ue===n.SHORT&&(Ie=n.RGBA16I),ue===n.INT&&(Ie=n.RGBA32I)),B===n.RGB&&(ue===n.UNSIGNED_INT_5_9_9_9_REV&&(Ie=n.RGB9_E5),ue===n.UNSIGNED_INT_10F_11F_11F_REV&&(Ie=n.R11F_G11F_B10F)),B===n.RGBA){const lt=ze?Rd:rn.getTransfer(Ae);ue===n.FLOAT&&(Ie=n.RGBA32F),ue===n.HALF_FLOAT&&(Ie=n.RGBA16F),ue===n.UNSIGNED_BYTE&&(Ie=lt===wn?n.SRGB8_ALPHA8:n.RGBA8),ue===n.UNSIGNED_SHORT_4_4_4_4&&(Ie=n.RGBA4),ue===n.UNSIGNED_SHORT_5_5_5_1&&(Ie=n.RGB5_A1)}return(Ie===n.R16F||Ie===n.R32F||Ie===n.RG16F||Ie===n.RG32F||Ie===n.RGBA16F||Ie===n.RGBA32F)&&e.get("EXT_color_buffer_float"),Ie}function A(Y,B){let ue;return Y?B===null||B===fs||B===Rl?ue=n.DEPTH24_STENCIL8:B===Gn?ue=n.DEPTH32F_STENCIL8:B===fu&&(ue=n.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):B===null||B===fs||B===Rl?ue=n.DEPTH_COMPONENT24:B===Gn?ue=n.DEPTH_COMPONENT32F:B===fu&&(ue=n.DEPTH_COMPONENT16),ue}function E(Y,B){return y(Y)===!0||Y.isFramebufferTexture&&Y.minFilter!==gi&&Y.minFilter!==Zt?Math.log2(Math.max(B.width,B.height))+1:Y.mipmaps!==void 0&&Y.mipmaps.length>0?Y.mipmaps.length:Y.isCompressedTexture&&Array.isArray(Y.image)?B.mipmaps.length:1}function M(Y){const B=Y.target;B.removeEventListener("dispose",M),R(B),B.isVideoTexture&&u.delete(B)}function I(Y){const B=Y.target;B.removeEventListener("dispose",I),D(B)}function R(Y){const B=i.get(Y);if(B.__webglInit===void 0)return;const ue=Y.source,Ae=f.get(ue);if(Ae){const ze=Ae[B.__cacheKey];ze.usedTimes--,ze.usedTimes===0&&C(Y),Object.keys(Ae).length===0&&f.delete(ue)}i.remove(Y)}function C(Y){const B=i.get(Y);n.deleteTexture(B.__webglTexture);const ue=Y.source,Ae=f.get(ue);delete Ae[B.__cacheKey],o.memory.textures--}function D(Y){const B=i.get(Y);if(Y.depthTexture&&(Y.depthTexture.dispose(),i.remove(Y.depthTexture)),Y.isWebGLCubeRenderTarget)for(let Ae=0;Ae<6;Ae++){if(Array.isArray(B.__webglFramebuffer[Ae]))for(let ze=0;ze<B.__webglFramebuffer[Ae].length;ze++)n.deleteFramebuffer(B.__webglFramebuffer[Ae][ze]);else n.deleteFramebuffer(B.__webglFramebuffer[Ae]);B.__webglDepthbuffer&&n.deleteRenderbuffer(B.__webglDepthbuffer[Ae])}else{if(Array.isArray(B.__webglFramebuffer))for(let Ae=0;Ae<B.__webglFramebuffer.length;Ae++)n.deleteFramebuffer(B.__webglFramebuffer[Ae]);else n.deleteFramebuffer(B.__webglFramebuffer);if(B.__webglDepthbuffer&&n.deleteRenderbuffer(B.__webglDepthbuffer),B.__webglMultisampledFramebuffer&&n.deleteFramebuffer(B.__webglMultisampledFramebuffer),B.__webglColorRenderbuffer)for(let Ae=0;Ae<B.__webglColorRenderbuffer.length;Ae++)B.__webglColorRenderbuffer[Ae]&&n.deleteRenderbuffer(B.__webglColorRenderbuffer[Ae]);B.__webglDepthRenderbuffer&&n.deleteRenderbuffer(B.__webglDepthRenderbuffer)}const ue=Y.textures;for(let Ae=0,ze=ue.length;Ae<ze;Ae++){const Ie=i.get(ue[Ae]);Ie.__webglTexture&&(n.deleteTexture(Ie.__webglTexture),o.memory.textures--),i.remove(ue[Ae])}i.remove(Y)}let L=0;function z(){L=0}function G(){const Y=L;return Y>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+Y+" texture units while this GPU supports only "+r.maxTextures),L+=1,Y}function H(Y){const B=[];return B.push(Y.wrapS),B.push(Y.wrapT),B.push(Y.wrapR||0),B.push(Y.magFilter),B.push(Y.minFilter),B.push(Y.anisotropy),B.push(Y.internalFormat),B.push(Y.format),B.push(Y.type),B.push(Y.generateMipmaps),B.push(Y.premultiplyAlpha),B.push(Y.flipY),B.push(Y.unpackAlignment),B.push(Y.colorSpace),B.join()}function J(Y,B){const ue=i.get(Y);if(Y.isVideoTexture&&Ze(Y),Y.isRenderTargetTexture===!1&&Y.isExternalTexture!==!0&&Y.version>0&&ue.__version!==Y.version){const Ae=Y.image;if(Ae===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Ae.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{le(ue,Y,B);return}}else Y.isExternalTexture&&(ue.__webglTexture=Y.sourceTexture?Y.sourceTexture:null);t.bindTexture(n.TEXTURE_2D,ue.__webglTexture,n.TEXTURE0+B)}function k(Y,B){const ue=i.get(Y);if(Y.isRenderTargetTexture===!1&&Y.version>0&&ue.__version!==Y.version){le(ue,Y,B);return}t.bindTexture(n.TEXTURE_2D_ARRAY,ue.__webglTexture,n.TEXTURE0+B)}function X(Y,B){const ue=i.get(Y);if(Y.isRenderTargetTexture===!1&&Y.version>0&&ue.__version!==Y.version){le(ue,Y,B);return}t.bindTexture(n.TEXTURE_3D,ue.__webglTexture,n.TEXTURE0+B)}function W(Y,B){const ue=i.get(Y);if(Y.version>0&&ue.__version!==Y.version){ee(ue,Y,B);return}t.bindTexture(n.TEXTURE_CUBE_MAP,ue.__webglTexture,n.TEXTURE0+B)}const ie={[Ad]:n.REPEAT,[ui]:n.CLAMP_TO_EDGE,[Md]:n.MIRRORED_REPEAT},se={[gi]:n.NEAREST,[VS]:n.NEAREST_MIPMAP_NEAREST,[Vc]:n.NEAREST_MIPMAP_LINEAR,[Zt]:n.LINEAR,[Zh]:n.LINEAR_MIPMAP_NEAREST,[Ds]:n.LINEAR_MIPMAP_LINEAR},ye={[kL]:n.NEVER,[HL]:n.ALWAYS,[UL]:n.LESS,[$S]:n.LEQUAL,[NL]:n.EQUAL,[zL]:n.GEQUAL,[FL]:n.GREATER,[BL]:n.NOTEQUAL};function Ne(Y,B){if(B.type===Gn&&e.has("OES_texture_float_linear")===!1&&(B.magFilter===Zt||B.magFilter===Zh||B.magFilter===Vc||B.magFilter===Ds||B.minFilter===Zt||B.minFilter===Zh||B.minFilter===Vc||B.minFilter===Ds)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(Y,n.TEXTURE_WRAP_S,ie[B.wrapS]),n.texParameteri(Y,n.TEXTURE_WRAP_T,ie[B.wrapT]),(Y===n.TEXTURE_3D||Y===n.TEXTURE_2D_ARRAY)&&n.texParameteri(Y,n.TEXTURE_WRAP_R,ie[B.wrapR]),n.texParameteri(Y,n.TEXTURE_MAG_FILTER,se[B.magFilter]),n.texParameteri(Y,n.TEXTURE_MIN_FILTER,se[B.minFilter]),B.compareFunction&&(n.texParameteri(Y,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(Y,n.TEXTURE_COMPARE_FUNC,ye[B.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(B.magFilter===gi||B.minFilter!==Vc&&B.minFilter!==Ds||B.type===Gn&&e.has("OES_texture_float_linear")===!1)return;if(B.anisotropy>1||i.get(B).__currentAnisotropy){const ue=e.get("EXT_texture_filter_anisotropic");n.texParameterf(Y,ue.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(B.anisotropy,r.getMaxAnisotropy())),i.get(B).__currentAnisotropy=B.anisotropy}}}function He(Y,B){let ue=!1;Y.__webglInit===void 0&&(Y.__webglInit=!0,B.addEventListener("dispose",M));const Ae=B.source;let ze=f.get(Ae);ze===void 0&&(ze={},f.set(Ae,ze));const Ie=H(B);if(Ie!==Y.__cacheKey){ze[Ie]===void 0&&(ze[Ie]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,ue=!0),ze[Ie].usedTimes++;const lt=ze[Y.__cacheKey];lt!==void 0&&(ze[Y.__cacheKey].usedTimes--,lt.usedTimes===0&&C(B)),Y.__cacheKey=Ie,Y.__webglTexture=ze[Ie].texture}return ue}function fe(Y,B,ue){return Math.floor(Math.floor(Y/ue)/B)}function he(Y,B,ue,Ae){const Ie=Y.updateRanges;if(Ie.length===0)t.texSubImage2D(n.TEXTURE_2D,0,0,0,B.width,B.height,ue,Ae,B.data);else{Ie.sort((je,Je)=>je.start-Je.start);let lt=0;for(let je=1;je<Ie.length;je++){const Je=Ie[lt],bt=Ie[je],st=Je.start+Je.count,Ye=fe(bt.start,B.width,4),vt=fe(Je.start,B.width,4);bt.start<=st+1&&Ye===vt&&fe(bt.start+bt.count-1,B.width,4)===Ye?Je.count=Math.max(Je.count,bt.start+bt.count-Je.start):(++lt,Ie[lt]=bt)}Ie.length=lt+1;const Xe=n.getParameter(n.UNPACK_ROW_LENGTH),ht=n.getParameter(n.UNPACK_SKIP_PIXELS),ct=n.getParameter(n.UNPACK_SKIP_ROWS);n.pixelStorei(n.UNPACK_ROW_LENGTH,B.width);for(let je=0,Je=Ie.length;je<Je;je++){const bt=Ie[je],st=Math.floor(bt.start/4),Ye=Math.ceil(bt.count/4),vt=st%B.width,ce=Math.floor(st/B.width),ve=Ye,tt=1;n.pixelStorei(n.UNPACK_SKIP_PIXELS,vt),n.pixelStorei(n.UNPACK_SKIP_ROWS,ce),t.texSubImage2D(n.TEXTURE_2D,0,vt,ce,ve,tt,ue,Ae,B.data)}Y.clearUpdateRanges(),n.pixelStorei(n.UNPACK_ROW_LENGTH,Xe),n.pixelStorei(n.UNPACK_SKIP_PIXELS,ht),n.pixelStorei(n.UNPACK_SKIP_ROWS,ct)}}function le(Y,B,ue){let Ae=n.TEXTURE_2D;(B.isDataArrayTexture||B.isCompressedArrayTexture)&&(Ae=n.TEXTURE_2D_ARRAY),B.isData3DTexture&&(Ae=n.TEXTURE_3D);const ze=He(Y,B),Ie=B.source;t.bindTexture(Ae,Y.__webglTexture,n.TEXTURE0+ue);const lt=i.get(Ie);if(Ie.version!==lt.__version||ze===!0){t.activeTexture(n.TEXTURE0+ue);const Xe=rn.getPrimaries(rn.workingColorSpace),ht=B.colorSpace===as?null:rn.getPrimaries(B.colorSpace),ct=B.colorSpace===as||Xe===ht?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,B.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,B.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,B.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,ct);let je=g(B.image,!1,r.maxTextureSize);je=wt(B,je);const Je=s.convert(B.format,B.colorSpace),bt=s.convert(B.type);let st=x(B.internalFormat,Je,bt,B.colorSpace,B.isVideoTexture);Ne(Ae,B);let Ye;const vt=B.mipmaps,ce=B.isVideoTexture!==!0,ve=lt.__version===void 0||ze===!0,tt=Ie.dataReady,ut=E(B,je);if(B.isDepthTexture)st=A(B.format===Il,B.type),ve&&(ce?t.texStorage2D(n.TEXTURE_2D,1,st,je.width,je.height):t.texImage2D(n.TEXTURE_2D,0,st,je.width,je.height,0,Je,bt,null));else if(B.isDataTexture)if(vt.length>0){ce&&ve&&t.texStorage2D(n.TEXTURE_2D,ut,st,vt[0].width,vt[0].height);for(let Ke=0,Te=vt.length;Ke<Te;Ke++)Ye=vt[Ke],ce?tt&&t.texSubImage2D(n.TEXTURE_2D,Ke,0,0,Ye.width,Ye.height,Je,bt,Ye.data):t.texImage2D(n.TEXTURE_2D,Ke,st,Ye.width,Ye.height,0,Je,bt,Ye.data);B.generateMipmaps=!1}else ce?(ve&&t.texStorage2D(n.TEXTURE_2D,ut,st,je.width,je.height),tt&&he(B,je,Je,bt)):t.texImage2D(n.TEXTURE_2D,0,st,je.width,je.height,0,Je,bt,je.data);else if(B.isCompressedTexture)if(B.isCompressedArrayTexture){ce&&ve&&t.texStorage3D(n.TEXTURE_2D_ARRAY,ut,st,vt[0].width,vt[0].height,je.depth);for(let Ke=0,Te=vt.length;Ke<Te;Ke++)if(Ye=vt[Ke],B.format!==hi)if(Je!==null)if(ce){if(tt)if(B.layerUpdates.size>0){const dt=Aw(Ye.width,Ye.height,B.format,B.type);for(const Et of B.layerUpdates){const dn=Ye.data.subarray(Et*dt/Ye.data.BYTES_PER_ELEMENT,(Et+1)*dt/Ye.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Ke,0,0,Et,Ye.width,Ye.height,1,Je,dn)}B.clearLayerUpdates()}else t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Ke,0,0,0,Ye.width,Ye.height,je.depth,Je,Ye.data)}else t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,Ke,st,Ye.width,Ye.height,je.depth,0,Ye.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else ce?tt&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,Ke,0,0,0,Ye.width,Ye.height,je.depth,Je,bt,Ye.data):t.texImage3D(n.TEXTURE_2D_ARRAY,Ke,st,Ye.width,Ye.height,je.depth,0,Je,bt,Ye.data)}else{ce&&ve&&t.texStorage2D(n.TEXTURE_2D,ut,st,vt[0].width,vt[0].height);for(let Ke=0,Te=vt.length;Ke<Te;Ke++)Ye=vt[Ke],B.format!==hi?Je!==null?ce?tt&&t.compressedTexSubImage2D(n.TEXTURE_2D,Ke,0,0,Ye.width,Ye.height,Je,Ye.data):t.compressedTexImage2D(n.TEXTURE_2D,Ke,st,Ye.width,Ye.height,0,Ye.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):ce?tt&&t.texSubImage2D(n.TEXTURE_2D,Ke,0,0,Ye.width,Ye.height,Je,bt,Ye.data):t.texImage2D(n.TEXTURE_2D,Ke,st,Ye.width,Ye.height,0,Je,bt,Ye.data)}else if(B.isDataArrayTexture)if(ce){if(ve&&t.texStorage3D(n.TEXTURE_2D_ARRAY,ut,st,je.width,je.height,je.depth),tt)if(B.layerUpdates.size>0){const Ke=Aw(je.width,je.height,B.format,B.type);for(const Te of B.layerUpdates){const dt=je.data.subarray(Te*Ke/je.data.BYTES_PER_ELEMENT,(Te+1)*Ke/je.data.BYTES_PER_ELEMENT);t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,Te,je.width,je.height,1,Je,bt,dt)}B.clearLayerUpdates()}else t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,je.width,je.height,je.depth,Je,bt,je.data)}else t.texImage3D(n.TEXTURE_2D_ARRAY,0,st,je.width,je.height,je.depth,0,Je,bt,je.data);else if(B.isData3DTexture)ce?(ve&&t.texStorage3D(n.TEXTURE_3D,ut,st,je.width,je.height,je.depth),tt&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,je.width,je.height,je.depth,Je,bt,je.data)):t.texImage3D(n.TEXTURE_3D,0,st,je.width,je.height,je.depth,0,Je,bt,je.data);else if(B.isFramebufferTexture){if(ve)if(ce)t.texStorage2D(n.TEXTURE_2D,ut,st,je.width,je.height);else{let Ke=je.width,Te=je.height;for(let dt=0;dt<ut;dt++)t.texImage2D(n.TEXTURE_2D,dt,st,Ke,Te,0,Je,bt,null),Ke>>=1,Te>>=1}}else if(vt.length>0){if(ce&&ve){const Ke=St(vt[0]);t.texStorage2D(n.TEXTURE_2D,ut,st,Ke.width,Ke.height)}for(let Ke=0,Te=vt.length;Ke<Te;Ke++)Ye=vt[Ke],ce?tt&&t.texSubImage2D(n.TEXTURE_2D,Ke,0,0,Je,bt,Ye):t.texImage2D(n.TEXTURE_2D,Ke,st,Je,bt,Ye);B.generateMipmaps=!1}else if(ce){if(ve){const Ke=St(je);t.texStorage2D(n.TEXTURE_2D,ut,st,Ke.width,Ke.height)}tt&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,Je,bt,je)}else t.texImage2D(n.TEXTURE_2D,0,st,Je,bt,je);y(B)&&b(Ae),lt.__version=Ie.version,B.onUpdate&&B.onUpdate(B)}Y.__version=B.version}function ee(Y,B,ue){if(B.image.length!==6)return;const Ae=He(Y,B),ze=B.source;t.bindTexture(n.TEXTURE_CUBE_MAP,Y.__webglTexture,n.TEXTURE0+ue);const Ie=i.get(ze);if(ze.version!==Ie.__version||Ae===!0){t.activeTexture(n.TEXTURE0+ue);const lt=rn.getPrimaries(rn.workingColorSpace),Xe=B.colorSpace===as?null:rn.getPrimaries(B.colorSpace),ht=B.colorSpace===as||lt===Xe?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,B.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,B.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,B.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,ht);const ct=B.isCompressedTexture||B.image[0].isCompressedTexture,je=B.image[0]&&B.image[0].isDataTexture,Je=[];for(let Te=0;Te<6;Te++)!ct&&!je?Je[Te]=g(B.image[Te],!0,r.maxCubemapSize):Je[Te]=je?B.image[Te].image:B.image[Te],Je[Te]=wt(B,Je[Te]);const bt=Je[0],st=s.convert(B.format,B.colorSpace),Ye=s.convert(B.type),vt=x(B.internalFormat,st,Ye,B.colorSpace),ce=B.isVideoTexture!==!0,ve=Ie.__version===void 0||Ae===!0,tt=ze.dataReady;let ut=E(B,bt);Ne(n.TEXTURE_CUBE_MAP,B);let Ke;if(ct){ce&&ve&&t.texStorage2D(n.TEXTURE_CUBE_MAP,ut,vt,bt.width,bt.height);for(let Te=0;Te<6;Te++){Ke=Je[Te].mipmaps;for(let dt=0;dt<Ke.length;dt++){const Et=Ke[dt];B.format!==hi?st!==null?ce?tt&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,dt,0,0,Et.width,Et.height,st,Et.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,dt,vt,Et.width,Et.height,0,Et.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):ce?tt&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,dt,0,0,Et.width,Et.height,st,Ye,Et.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,dt,vt,Et.width,Et.height,0,st,Ye,Et.data)}}}else{if(Ke=B.mipmaps,ce&&ve){Ke.length>0&&ut++;const Te=St(Je[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,ut,vt,Te.width,Te.height)}for(let Te=0;Te<6;Te++)if(je){ce?tt&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,0,0,0,Je[Te].width,Je[Te].height,st,Ye,Je[Te].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,0,vt,Je[Te].width,Je[Te].height,0,st,Ye,Je[Te].data);for(let dt=0;dt<Ke.length;dt++){const dn=Ke[dt].image[Te].image;ce?tt&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,dt+1,0,0,dn.width,dn.height,st,Ye,dn.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,dt+1,vt,dn.width,dn.height,0,st,Ye,dn.data)}}else{ce?tt&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,0,0,0,st,Ye,Je[Te]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,0,vt,st,Ye,Je[Te]);for(let dt=0;dt<Ke.length;dt++){const Et=Ke[dt];ce?tt&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,dt+1,0,0,st,Ye,Et.image[Te]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,dt+1,vt,st,Ye,Et.image[Te])}}}y(B)&&b(n.TEXTURE_CUBE_MAP),Ie.__version=ze.version,B.onUpdate&&B.onUpdate(B)}Y.__version=B.version}function de(Y,B,ue,Ae,ze,Ie){const lt=s.convert(ue.format,ue.colorSpace),Xe=s.convert(ue.type),ht=x(ue.internalFormat,lt,Xe,ue.colorSpace),ct=i.get(B),je=i.get(ue);if(je.__renderTarget=B,!ct.__hasExternalTextures){const Je=Math.max(1,B.width>>Ie),bt=Math.max(1,B.height>>Ie);ze===n.TEXTURE_3D||ze===n.TEXTURE_2D_ARRAY?t.texImage3D(ze,Ie,ht,Je,bt,B.depth,0,lt,Xe,null):t.texImage2D(ze,Ie,ht,Je,bt,0,lt,Xe,null)}t.bindFramebuffer(n.FRAMEBUFFER,Y),We(B)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,Ae,ze,je.__webglTexture,0,qe(B)):(ze===n.TEXTURE_2D||ze>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&ze<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,Ae,ze,je.__webglTexture,Ie),t.bindFramebuffer(n.FRAMEBUFFER,null)}function be(Y,B,ue){if(n.bindRenderbuffer(n.RENDERBUFFER,Y),B.depthBuffer){const Ae=B.depthTexture,ze=Ae&&Ae.isDepthTexture?Ae.type:null,Ie=A(B.stencilBuffer,ze),lt=B.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Xe=qe(B);We(B)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Xe,Ie,B.width,B.height):ue?n.renderbufferStorageMultisample(n.RENDERBUFFER,Xe,Ie,B.width,B.height):n.renderbufferStorage(n.RENDERBUFFER,Ie,B.width,B.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,lt,n.RENDERBUFFER,Y)}else{const Ae=B.textures;for(let ze=0;ze<Ae.length;ze++){const Ie=Ae[ze],lt=s.convert(Ie.format,Ie.colorSpace),Xe=s.convert(Ie.type),ht=x(Ie.internalFormat,lt,Xe,Ie.colorSpace),ct=qe(B);ue&&We(B)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,ct,ht,B.width,B.height):We(B)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,ct,ht,B.width,B.height):n.renderbufferStorage(n.RENDERBUFFER,ht,B.width,B.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function oe(Y,B){if(B&&B.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,Y),!(B.depthTexture&&B.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const Ae=i.get(B.depthTexture);Ae.__renderTarget=B,(!Ae.__webglTexture||B.depthTexture.image.width!==B.width||B.depthTexture.image.height!==B.height)&&(B.depthTexture.image.width=B.width,B.depthTexture.image.height=B.height,B.depthTexture.needsUpdate=!0),J(B.depthTexture,0);const ze=Ae.__webglTexture,Ie=qe(B);if(B.depthTexture.format===pu)We(B)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,ze,0,Ie):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,ze,0);else if(B.depthTexture.format===Il)We(B)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,ze,0,Ie):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,ze,0);else throw new Error("Unknown depthTexture format")}function ge(Y){const B=i.get(Y),ue=Y.isWebGLCubeRenderTarget===!0;if(B.__boundDepthTexture!==Y.depthTexture){const Ae=Y.depthTexture;if(B.__depthDisposeCallback&&B.__depthDisposeCallback(),Ae){const ze=()=>{delete B.__boundDepthTexture,delete B.__depthDisposeCallback,Ae.removeEventListener("dispose",ze)};Ae.addEventListener("dispose",ze),B.__depthDisposeCallback=ze}B.__boundDepthTexture=Ae}if(Y.depthTexture&&!B.__autoAllocateDepthBuffer){if(ue)throw new Error("target.depthTexture not supported in Cube render targets");const Ae=Y.texture.mipmaps;Ae&&Ae.length>0?oe(B.__webglFramebuffer[0],Y):oe(B.__webglFramebuffer,Y)}else if(ue){B.__webglDepthbuffer=[];for(let Ae=0;Ae<6;Ae++)if(t.bindFramebuffer(n.FRAMEBUFFER,B.__webglFramebuffer[Ae]),B.__webglDepthbuffer[Ae]===void 0)B.__webglDepthbuffer[Ae]=n.createRenderbuffer(),be(B.__webglDepthbuffer[Ae],Y,!1);else{const ze=Y.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Ie=B.__webglDepthbuffer[Ae];n.bindRenderbuffer(n.RENDERBUFFER,Ie),n.framebufferRenderbuffer(n.FRAMEBUFFER,ze,n.RENDERBUFFER,Ie)}}else{const Ae=Y.texture.mipmaps;if(Ae&&Ae.length>0?t.bindFramebuffer(n.FRAMEBUFFER,B.__webglFramebuffer[0]):t.bindFramebuffer(n.FRAMEBUFFER,B.__webglFramebuffer),B.__webglDepthbuffer===void 0)B.__webglDepthbuffer=n.createRenderbuffer(),be(B.__webglDepthbuffer,Y,!1);else{const ze=Y.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Ie=B.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,Ie),n.framebufferRenderbuffer(n.FRAMEBUFFER,ze,n.RENDERBUFFER,Ie)}}t.bindFramebuffer(n.FRAMEBUFFER,null)}function Se(Y,B,ue){const Ae=i.get(Y);B!==void 0&&de(Ae.__webglFramebuffer,Y,Y.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),ue!==void 0&&ge(Y)}function q(Y){const B=Y.texture,ue=i.get(Y),Ae=i.get(B);Y.addEventListener("dispose",I);const ze=Y.textures,Ie=Y.isWebGLCubeRenderTarget===!0,lt=ze.length>1;if(lt||(Ae.__webglTexture===void 0&&(Ae.__webglTexture=n.createTexture()),Ae.__version=B.version,o.memory.textures++),Ie){ue.__webglFramebuffer=[];for(let Xe=0;Xe<6;Xe++)if(B.mipmaps&&B.mipmaps.length>0){ue.__webglFramebuffer[Xe]=[];for(let ht=0;ht<B.mipmaps.length;ht++)ue.__webglFramebuffer[Xe][ht]=n.createFramebuffer()}else ue.__webglFramebuffer[Xe]=n.createFramebuffer()}else{if(B.mipmaps&&B.mipmaps.length>0){ue.__webglFramebuffer=[];for(let Xe=0;Xe<B.mipmaps.length;Xe++)ue.__webglFramebuffer[Xe]=n.createFramebuffer()}else ue.__webglFramebuffer=n.createFramebuffer();if(lt)for(let Xe=0,ht=ze.length;Xe<ht;Xe++){const ct=i.get(ze[Xe]);ct.__webglTexture===void 0&&(ct.__webglTexture=n.createTexture(),o.memory.textures++)}if(Y.samples>0&&We(Y)===!1){ue.__webglMultisampledFramebuffer=n.createFramebuffer(),ue.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,ue.__webglMultisampledFramebuffer);for(let Xe=0;Xe<ze.length;Xe++){const ht=ze[Xe];ue.__webglColorRenderbuffer[Xe]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,ue.__webglColorRenderbuffer[Xe]);const ct=s.convert(ht.format,ht.colorSpace),je=s.convert(ht.type),Je=x(ht.internalFormat,ct,je,ht.colorSpace,Y.isXRRenderTarget===!0),bt=qe(Y);n.renderbufferStorageMultisample(n.RENDERBUFFER,bt,Je,Y.width,Y.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Xe,n.RENDERBUFFER,ue.__webglColorRenderbuffer[Xe])}n.bindRenderbuffer(n.RENDERBUFFER,null),Y.depthBuffer&&(ue.__webglDepthRenderbuffer=n.createRenderbuffer(),be(ue.__webglDepthRenderbuffer,Y,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(Ie){t.bindTexture(n.TEXTURE_CUBE_MAP,Ae.__webglTexture),Ne(n.TEXTURE_CUBE_MAP,B);for(let Xe=0;Xe<6;Xe++)if(B.mipmaps&&B.mipmaps.length>0)for(let ht=0;ht<B.mipmaps.length;ht++)de(ue.__webglFramebuffer[Xe][ht],Y,B,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Xe,ht);else de(ue.__webglFramebuffer[Xe],Y,B,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Xe,0);y(B)&&b(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(lt){for(let Xe=0,ht=ze.length;Xe<ht;Xe++){const ct=ze[Xe],je=i.get(ct);let Je=n.TEXTURE_2D;(Y.isWebGL3DRenderTarget||Y.isWebGLArrayRenderTarget)&&(Je=Y.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(Je,je.__webglTexture),Ne(Je,ct),de(ue.__webglFramebuffer,Y,ct,n.COLOR_ATTACHMENT0+Xe,Je,0),y(ct)&&b(Je)}t.unbindTexture()}else{let Xe=n.TEXTURE_2D;if((Y.isWebGL3DRenderTarget||Y.isWebGLArrayRenderTarget)&&(Xe=Y.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(Xe,Ae.__webglTexture),Ne(Xe,B),B.mipmaps&&B.mipmaps.length>0)for(let ht=0;ht<B.mipmaps.length;ht++)de(ue.__webglFramebuffer[ht],Y,B,n.COLOR_ATTACHMENT0,Xe,ht);else de(ue.__webglFramebuffer,Y,B,n.COLOR_ATTACHMENT0,Xe,0);y(B)&&b(Xe),t.unbindTexture()}Y.depthBuffer&&ge(Y)}function me(Y){const B=Y.textures;for(let ue=0,Ae=B.length;ue<Ae;ue++){const ze=B[ue];if(y(ze)){const Ie=S(Y),lt=i.get(ze).__webglTexture;t.bindTexture(Ie,lt),b(Ie),t.unbindTexture()}}}const xe=[],Re=[];function Ce(Y){if(Y.samples>0){if(We(Y)===!1){const B=Y.textures,ue=Y.width,Ae=Y.height;let ze=n.COLOR_BUFFER_BIT;const Ie=Y.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,lt=i.get(Y),Xe=B.length>1;if(Xe)for(let ct=0;ct<B.length;ct++)t.bindFramebuffer(n.FRAMEBUFFER,lt.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+ct,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,lt.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+ct,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,lt.__webglMultisampledFramebuffer);const ht=Y.texture.mipmaps;ht&&ht.length>0?t.bindFramebuffer(n.DRAW_FRAMEBUFFER,lt.__webglFramebuffer[0]):t.bindFramebuffer(n.DRAW_FRAMEBUFFER,lt.__webglFramebuffer);for(let ct=0;ct<B.length;ct++){if(Y.resolveDepthBuffer&&(Y.depthBuffer&&(ze|=n.DEPTH_BUFFER_BIT),Y.stencilBuffer&&Y.resolveStencilBuffer&&(ze|=n.STENCIL_BUFFER_BIT)),Xe){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,lt.__webglColorRenderbuffer[ct]);const je=i.get(B[ct]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,je,0)}n.blitFramebuffer(0,0,ue,Ae,0,0,ue,Ae,ze,n.NEAREST),l===!0&&(xe.length=0,Re.length=0,xe.push(n.COLOR_ATTACHMENT0+ct),Y.depthBuffer&&Y.resolveDepthBuffer===!1&&(xe.push(Ie),Re.push(Ie),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,Re)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,xe))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),Xe)for(let ct=0;ct<B.length;ct++){t.bindFramebuffer(n.FRAMEBUFFER,lt.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+ct,n.RENDERBUFFER,lt.__webglColorRenderbuffer[ct]);const je=i.get(B[ct]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,lt.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+ct,n.TEXTURE_2D,je,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,lt.__webglMultisampledFramebuffer)}else if(Y.depthBuffer&&Y.resolveDepthBuffer===!1&&l){const B=Y.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[B])}}}function qe(Y){return Math.min(r.maxSamples,Y.samples)}function We(Y){const B=i.get(Y);return Y.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&B.__useRenderToTexture!==!1}function Ze(Y){const B=o.render.frame;u.get(Y)!==B&&(u.set(Y,B),Y.update())}function wt(Y,B){const ue=Y.colorSpace,Ae=Y.format,ze=Y.type;return Y.isCompressedTexture===!0||Y.isVideoTexture===!0||ue!==Vr&&ue!==as&&(rn.getTransfer(ue)===wn?(Ae!==hi||ze!==Zn)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",ue)),B}function St(Y){return typeof HTMLImageElement<"u"&&Y instanceof HTMLImageElement?(c.width=Y.naturalWidth||Y.width,c.height=Y.naturalHeight||Y.height):typeof VideoFrame<"u"&&Y instanceof VideoFrame?(c.width=Y.displayWidth,c.height=Y.displayHeight):(c.width=Y.width,c.height=Y.height),c}this.allocateTextureUnit=G,this.resetTextureUnits=z,this.setTexture2D=J,this.setTexture2DArray=k,this.setTexture3D=X,this.setTextureCube=W,this.rebindTextures=Se,this.setupRenderTarget=q,this.updateRenderTargetMipmap=me,this.updateMultisampleRenderTarget=Ce,this.setupDepthRenderbuffer=ge,this.setupFrameBufferTexture=de,this.useMultisampledRTT=We}function Zk(n,e){function t(i,r=as){let s;const o=rn.getTransfer(r);if(i===Zn)return n.UNSIGNED_BYTE;if(i===bv)return n.UNSIGNED_SHORT_4_4_4_4;if(i===wv)return n.UNSIGNED_SHORT_5_5_5_1;if(i===WS)return n.UNSIGNED_INT_5_9_9_9_REV;if(i===jS)return n.UNSIGNED_INT_10F_11F_11F_REV;if(i===_v)return n.BYTE;if(i===yv)return n.SHORT;if(i===fu)return n.UNSIGNED_SHORT;if(i===tf)return n.INT;if(i===fs)return n.UNSIGNED_INT;if(i===Gn)return n.FLOAT;if(i===Ii)return n.HALF_FLOAT;if(i===qS)return n.ALPHA;if(i===XS)return n.RGB;if(i===hi)return n.RGBA;if(i===pu)return n.DEPTH_COMPONENT;if(i===Il)return n.DEPTH_STENCIL;if(i===nf)return n.RED;if(i===rf)return n.RED_INTEGER;if(i===YS)return n.RG;if(i===Sv)return n.RG_INTEGER;if(i===xv)return n.RGBA_INTEGER;if(i===ed||i===td||i===nd||i===id)if(o===wn)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(i===ed)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===td)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===nd)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===id)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(i===ed)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===td)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===nd)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===id)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===bg||i===wg||i===Sg||i===xg)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(i===bg)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===wg)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===Sg)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===xg)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===Eg||i===Ag||i===Mg)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(i===Eg||i===Ag)return o===wn?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(i===Mg)return o===wn?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(i===Tg||i===Cg||i===Rg||i===Ig||i===Dg||i===Pg||i===Og||i===Lg||i===kg||i===Ug||i===Ng||i===Fg||i===Bg||i===zg)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(i===Tg)return o===wn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===Cg)return o===wn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===Rg)return o===wn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===Ig)return o===wn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===Dg)return o===wn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===Pg)return o===wn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===Og)return o===wn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===Lg)return o===wn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===kg)return o===wn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===Ug)return o===wn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===Ng)return o===wn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===Fg)return o===wn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===Bg)return o===wn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===zg)return o===wn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===Hg||i===Gg||i===Vg)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(i===Hg)return o===wn?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===Gg)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===Vg)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===Wg||i===jg||i===qg||i===Xg)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(i===Wg)return s.COMPRESSED_RED_RGTC1_EXT;if(i===jg)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===qg)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===Xg)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===Rl?n.UNSIGNED_INT_24_8:n[i]!==void 0?n[i]:null}return{convert:t}}const YJ="\nvoid main() {\n\n	gl_Position = vec4( position, 1.0 );\n\n}",KJ="\nuniform sampler2DArray depthColor;\nuniform float depthWidth;\nuniform float depthHeight;\n\nvoid main() {\n\n	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );\n\n	if ( coord.x >= 1.0 ) {\n\n		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;\n\n	} else {\n\n		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;\n\n	}\n\n}";class $J{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t){if(this.texture===null){const i=new rx(e.texture);(e.depthNear!==t.depthNear||e.depthFar!==t.depthFar)&&(this.depthNear=e.depthNear,this.depthFar=e.depthFar),this.texture=i}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,i=new Wn({vertexShader:YJ,fragmentShader:KJ,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new Fn(new aa(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class JJ extends Pr{constructor(e,t){super();const i=this;let r=null,s=1,o=null,a="local-floor",l=1,c=null,u=null,d=null,f=null,m=null,v=null;const g=typeof XRWebGLBinding<"u",y=new $J,b={},S=t.getContextAttributes();let x=null,A=null;const E=[],M=[],I=new Ue;let R=null;const C=new Ei;C.viewport=new Jt;const D=new Ei;D.viewport=new Jt;const L=[C,D],z=new Gk;let G=null,H=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(le){let ee=E[le];return ee===void 0&&(ee=new Hm,E[le]=ee),ee.getTargetRaySpace()},this.getControllerGrip=function(le){let ee=E[le];return ee===void 0&&(ee=new Hm,E[le]=ee),ee.getGripSpace()},this.getHand=function(le){let ee=E[le];return ee===void 0&&(ee=new Hm,E[le]=ee),ee.getHandSpace()};function J(le){const ee=M.indexOf(le.inputSource);if(ee===-1)return;const de=E[ee];de!==void 0&&(de.update(le.inputSource,le.frame,c||o),de.dispatchEvent({type:le.type,data:le.inputSource}))}function k(){r.removeEventListener("select",J),r.removeEventListener("selectstart",J),r.removeEventListener("selectend",J),r.removeEventListener("squeeze",J),r.removeEventListener("squeezestart",J),r.removeEventListener("squeezeend",J),r.removeEventListener("end",k),r.removeEventListener("inputsourceschange",X);for(let le=0;le<E.length;le++){const ee=M[le];ee!==null&&(M[le]=null,E[le].disconnect(ee))}G=null,H=null,y.reset();for(const le in b)delete b[le];e.setRenderTarget(x),m=null,f=null,d=null,r=null,A=null,he.stop(),i.isPresenting=!1,e.setPixelRatio(R),e.setSize(I.width,I.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(le){s=le,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(le){a=le,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||o},this.setReferenceSpace=function(le){c=le},this.getBaseLayer=function(){return f!==null?f:m},this.getBinding=function(){return d===null&&g&&(d=new XRWebGLBinding(r,t)),d},this.getFrame=function(){return v},this.getSession=function(){return r},this.setSession=async function(le){if(r=le,r!==null){if(x=e.getRenderTarget(),r.addEventListener("select",J),r.addEventListener("selectstart",J),r.addEventListener("selectend",J),r.addEventListener("squeeze",J),r.addEventListener("squeezestart",J),r.addEventListener("squeezeend",J),r.addEventListener("end",k),r.addEventListener("inputsourceschange",X),S.xrCompatible!==!0&&await t.makeXRCompatible(),R=e.getPixelRatio(),e.getSize(I),g&&"createProjectionLayer"in XRWebGLBinding.prototype){let de=null,be=null,oe=null;S.depth&&(oe=S.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,de=S.stencil?Il:pu,be=S.stencil?Rl:fs);const ge={colorFormat:t.RGBA8,depthFormat:oe,scaleFactor:s};d=this.getBinding(),f=d.createProjectionLayer(ge),r.updateRenderState({layers:[f]}),e.setPixelRatio(1),e.setSize(f.textureWidth,f.textureHeight,!1),A=new ni(f.textureWidth,f.textureHeight,{format:hi,type:Zn,depthTexture:new Lv(f.textureWidth,f.textureHeight,be,void 0,void 0,void 0,void 0,void 0,void 0,de),stencilBuffer:S.stencil,colorSpace:e.outputColorSpace,samples:S.antialias?4:0,resolveDepthBuffer:f.ignoreDepthValues===!1,resolveStencilBuffer:f.ignoreDepthValues===!1})}else{const de={antialias:S.antialias,alpha:!0,depth:S.depth,stencil:S.stencil,framebufferScaleFactor:s};m=new XRWebGLLayer(r,t,de),r.updateRenderState({baseLayer:m}),e.setPixelRatio(1),e.setSize(m.framebufferWidth,m.framebufferHeight,!1),A=new ni(m.framebufferWidth,m.framebufferHeight,{format:hi,type:Zn,colorSpace:e.outputColorSpace,stencilBuffer:S.stencil,resolveDepthBuffer:m.ignoreDepthValues===!1,resolveStencilBuffer:m.ignoreDepthValues===!1})}A.isXRRenderTarget=!0,this.setFoveation(l),c=null,o=await r.requestReferenceSpace(a),he.setContext(r),he.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode},this.getDepthTexture=function(){return y.getDepthTexture()};function X(le){for(let ee=0;ee<le.removed.length;ee++){const de=le.removed[ee],be=M.indexOf(de);be>=0&&(M[be]=null,E[be].disconnect(de))}for(let ee=0;ee<le.added.length;ee++){const de=le.added[ee];let be=M.indexOf(de);if(be===-1){for(let ge=0;ge<E.length;ge++)if(ge>=M.length){M.push(de),be=ge;break}else if(M[ge]===null){M[ge]=de,be=ge;break}if(be===-1)break}const oe=E[be];oe&&oe.connect(de)}}const W=new K,ie=new K;function se(le,ee,de){W.setFromMatrixPosition(ee.matrixWorld),ie.setFromMatrixPosition(de.matrixWorld);const be=W.distanceTo(ie),oe=ee.projectionMatrix.elements,ge=de.projectionMatrix.elements,Se=oe[14]/(oe[10]-1),q=oe[14]/(oe[10]+1),me=(oe[9]+1)/oe[5],xe=(oe[9]-1)/oe[5],Re=(oe[8]-1)/oe[0],Ce=(ge[8]+1)/ge[0],qe=Se*Re,We=Se*Ce,Ze=be/(-Re+Ce),wt=Ze*-Re;if(ee.matrixWorld.decompose(le.position,le.quaternion,le.scale),le.translateX(wt),le.translateZ(Ze),le.matrixWorld.compose(le.position,le.quaternion,le.scale),le.matrixWorldInverse.copy(le.matrixWorld).invert(),oe[10]===-1)le.projectionMatrix.copy(ee.projectionMatrix),le.projectionMatrixInverse.copy(ee.projectionMatrixInverse);else{const St=Se+Ze,Y=q+Ze,B=qe-wt,ue=We+(be-wt),Ae=me*q/Y*St,ze=xe*q/Y*St;le.projectionMatrix.makePerspective(B,ue,Ae,ze,St,Y),le.projectionMatrixInverse.copy(le.projectionMatrix).invert()}}function ye(le,ee){ee===null?le.matrixWorld.copy(le.matrix):le.matrixWorld.multiplyMatrices(ee.matrixWorld,le.matrix),le.matrixWorldInverse.copy(le.matrixWorld).invert()}this.updateCamera=function(le){if(r===null)return;let ee=le.near,de=le.far;y.texture!==null&&(y.depthNear>0&&(ee=y.depthNear),y.depthFar>0&&(de=y.depthFar)),z.near=D.near=C.near=ee,z.far=D.far=C.far=de,(G!==z.near||H!==z.far)&&(r.updateRenderState({depthNear:z.near,depthFar:z.far}),G=z.near,H=z.far),z.layers.mask=le.layers.mask|6,C.layers.mask=z.layers.mask&3,D.layers.mask=z.layers.mask&5;const be=le.parent,oe=z.cameras;ye(z,be);for(let ge=0;ge<oe.length;ge++)ye(oe[ge],be);oe.length===2?se(z,C,D):z.projectionMatrix.copy(C.projectionMatrix),Ne(le,z,be)};function Ne(le,ee,de){de===null?le.matrix.copy(ee.matrixWorld):(le.matrix.copy(de.matrixWorld),le.matrix.invert(),le.matrix.multiply(ee.matrixWorld)),le.matrix.decompose(le.position,le.quaternion,le.scale),le.updateMatrixWorld(!0),le.projectionMatrix.copy(ee.projectionMatrix),le.projectionMatrixInverse.copy(ee.projectionMatrixInverse),le.isPerspectiveCamera&&(le.fov=gu*2*Math.atan(1/le.projectionMatrix.elements[5]),le.zoom=1)}this.getCamera=function(){return z},this.getFoveation=function(){if(!(f===null&&m===null))return l},this.setFoveation=function(le){l=le,f!==null&&(f.fixedFoveation=le),m!==null&&m.fixedFoveation!==void 0&&(m.fixedFoveation=le)},this.hasDepthSensing=function(){return y.texture!==null},this.getDepthSensingMesh=function(){return y.getMesh(z)},this.getCameraTexture=function(le){return b[le]};let He=null;function fe(le,ee){if(u=ee.getViewerPose(c||o),v=ee,u!==null){const de=u.views;m!==null&&(e.setRenderTargetFramebuffer(A,m.framebuffer),e.setRenderTarget(A));let be=!1;de.length!==z.cameras.length&&(z.cameras.length=0,be=!0);for(let q=0;q<de.length;q++){const me=de[q];let xe=null;if(m!==null)xe=m.getViewport(me);else{const Ce=d.getViewSubImage(f,me);xe=Ce.viewport,q===0&&(e.setRenderTargetTextures(A,Ce.colorTexture,Ce.depthStencilTexture),e.setRenderTarget(A))}let Re=L[q];Re===void 0&&(Re=new Ei,Re.layers.enable(q),Re.viewport=new Jt,L[q]=Re),Re.matrix.fromArray(me.transform.matrix),Re.matrix.decompose(Re.position,Re.quaternion,Re.scale),Re.projectionMatrix.fromArray(me.projectionMatrix),Re.projectionMatrixInverse.copy(Re.projectionMatrix).invert(),Re.viewport.set(xe.x,xe.y,xe.width,xe.height),q===0&&(z.matrix.copy(Re.matrix),z.matrix.decompose(z.position,z.quaternion,z.scale)),be===!0&&z.cameras.push(Re)}const oe=r.enabledFeatures;if(oe&&oe.includes("depth-sensing")&&r.depthUsage=="gpu-optimized"&&g){d=i.getBinding();const q=d.getDepthInformation(de[0]);q&&q.isValid&&q.texture&&y.init(q,r.renderState)}if(oe&&oe.includes("camera-access")&&g){e.state.unbindTexture(),d=i.getBinding();for(let q=0;q<de.length;q++){const me=de[q].camera;if(me){let xe=b[me];xe||(xe=new rx,b[me]=xe);const Re=d.getCameraImage(me);xe.sourceTexture=Re}}}}for(let de=0;de<E.length;de++){const be=M[de],oe=E[de];be!==null&&oe!==void 0&&oe.update(be,ee,c||o)}He&&He(le,ee),ee.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:ee}),v=null}const he=new Yk;he.setAnimationLoop(fe),this.setAnimationLoop=function(le){He=le},this.dispose=function(){}}}const Ka=new ps,QJ=new Rt;function ZJ(n,e){function t(y,b){y.matrixAutoUpdate===!0&&y.updateMatrix(),b.value.copy(y.matrix)}function i(y,b){b.color.getRGB(y.fogColor.value,XL(n)),b.isFog?(y.fogNear.value=b.near,y.fogFar.value=b.far):b.isFogExp2&&(y.fogDensity.value=b.density)}function r(y,b,S,x,A){b.isMeshBasicMaterial||b.isMeshLambertMaterial?s(y,b):b.isMeshToonMaterial?(s(y,b),d(y,b)):b.isMeshPhongMaterial?(s(y,b),u(y,b)):b.isMeshStandardMaterial?(s(y,b),f(y,b),b.isMeshPhysicalMaterial&&m(y,b,A)):b.isMeshMatcapMaterial?(s(y,b),v(y,b)):b.isMeshDepthMaterial?s(y,b):b.isMeshDistanceMaterial?(s(y,b),g(y,b)):b.isMeshNormalMaterial?s(y,b):b.isLineBasicMaterial?(o(y,b),b.isLineDashedMaterial&&a(y,b)):b.isPointsMaterial?l(y,b,S,x):b.isSpriteMaterial?c(y,b):b.isShadowMaterial?(y.color.value.copy(b.color),y.opacity.value=b.opacity):b.isShaderMaterial&&(b.uniformsNeedUpdate=!1)}function s(y,b){y.opacity.value=b.opacity,b.color&&y.diffuse.value.copy(b.color),b.emissive&&y.emissive.value.copy(b.emissive).multiplyScalar(b.emissiveIntensity),b.map&&(y.map.value=b.map,t(b.map,y.mapTransform)),b.alphaMap&&(y.alphaMap.value=b.alphaMap,t(b.alphaMap,y.alphaMapTransform)),b.bumpMap&&(y.bumpMap.value=b.bumpMap,t(b.bumpMap,y.bumpMapTransform),y.bumpScale.value=b.bumpScale,b.side===mi&&(y.bumpScale.value*=-1)),b.normalMap&&(y.normalMap.value=b.normalMap,t(b.normalMap,y.normalMapTransform),y.normalScale.value.copy(b.normalScale),b.side===mi&&y.normalScale.value.negate()),b.displacementMap&&(y.displacementMap.value=b.displacementMap,t(b.displacementMap,y.displacementMapTransform),y.displacementScale.value=b.displacementScale,y.displacementBias.value=b.displacementBias),b.emissiveMap&&(y.emissiveMap.value=b.emissiveMap,t(b.emissiveMap,y.emissiveMapTransform)),b.specularMap&&(y.specularMap.value=b.specularMap,t(b.specularMap,y.specularMapTransform)),b.alphaTest>0&&(y.alphaTest.value=b.alphaTest);const S=e.get(b),x=S.envMap,A=S.envMapRotation;x&&(y.envMap.value=x,Ka.copy(A),Ka.x*=-1,Ka.y*=-1,Ka.z*=-1,x.isCubeTexture&&x.isRenderTargetTexture===!1&&(Ka.y*=-1,Ka.z*=-1),y.envMapRotation.value.setFromMatrix4(QJ.makeRotationFromEuler(Ka)),y.flipEnvMap.value=x.isCubeTexture&&x.isRenderTargetTexture===!1?-1:1,y.reflectivity.value=b.reflectivity,y.ior.value=b.ior,y.refractionRatio.value=b.refractionRatio),b.lightMap&&(y.lightMap.value=b.lightMap,y.lightMapIntensity.value=b.lightMapIntensity,t(b.lightMap,y.lightMapTransform)),b.aoMap&&(y.aoMap.value=b.aoMap,y.aoMapIntensity.value=b.aoMapIntensity,t(b.aoMap,y.aoMapTransform))}function o(y,b){y.diffuse.value.copy(b.color),y.opacity.value=b.opacity,b.map&&(y.map.value=b.map,t(b.map,y.mapTransform))}function a(y,b){y.dashSize.value=b.dashSize,y.totalSize.value=b.dashSize+b.gapSize,y.scale.value=b.scale}function l(y,b,S,x){y.diffuse.value.copy(b.color),y.opacity.value=b.opacity,y.size.value=b.size*S,y.scale.value=x*.5,b.map&&(y.map.value=b.map,t(b.map,y.uvTransform)),b.alphaMap&&(y.alphaMap.value=b.alphaMap,t(b.alphaMap,y.alphaMapTransform)),b.alphaTest>0&&(y.alphaTest.value=b.alphaTest)}function c(y,b){y.diffuse.value.copy(b.color),y.opacity.value=b.opacity,y.rotation.value=b.rotation,b.map&&(y.map.value=b.map,t(b.map,y.mapTransform)),b.alphaMap&&(y.alphaMap.value=b.alphaMap,t(b.alphaMap,y.alphaMapTransform)),b.alphaTest>0&&(y.alphaTest.value=b.alphaTest)}function u(y,b){y.specular.value.copy(b.specular),y.shininess.value=Math.max(b.shininess,1e-4)}function d(y,b){b.gradientMap&&(y.gradientMap.value=b.gradientMap)}function f(y,b){y.metalness.value=b.metalness,b.metalnessMap&&(y.metalnessMap.value=b.metalnessMap,t(b.metalnessMap,y.metalnessMapTransform)),y.roughness.value=b.roughness,b.roughnessMap&&(y.roughnessMap.value=b.roughnessMap,t(b.roughnessMap,y.roughnessMapTransform)),b.envMap&&(y.envMapIntensity.value=b.envMapIntensity)}function m(y,b,S){y.ior.value=b.ior,b.sheen>0&&(y.sheenColor.value.copy(b.sheenColor).multiplyScalar(b.sheen),y.sheenRoughness.value=b.sheenRoughness,b.sheenColorMap&&(y.sheenColorMap.value=b.sheenColorMap,t(b.sheenColorMap,y.sheenColorMapTransform)),b.sheenRoughnessMap&&(y.sheenRoughnessMap.value=b.sheenRoughnessMap,t(b.sheenRoughnessMap,y.sheenRoughnessMapTransform))),b.clearcoat>0&&(y.clearcoat.value=b.clearcoat,y.clearcoatRoughness.value=b.clearcoatRoughness,b.clearcoatMap&&(y.clearcoatMap.value=b.clearcoatMap,t(b.clearcoatMap,y.clearcoatMapTransform)),b.clearcoatRoughnessMap&&(y.clearcoatRoughnessMap.value=b.clearcoatRoughnessMap,t(b.clearcoatRoughnessMap,y.clearcoatRoughnessMapTransform)),b.clearcoatNormalMap&&(y.clearcoatNormalMap.value=b.clearcoatNormalMap,t(b.clearcoatNormalMap,y.clearcoatNormalMapTransform),y.clearcoatNormalScale.value.copy(b.clearcoatNormalScale),b.side===mi&&y.clearcoatNormalScale.value.negate())),b.dispersion>0&&(y.dispersion.value=b.dispersion),b.iridescence>0&&(y.iridescence.value=b.iridescence,y.iridescenceIOR.value=b.iridescenceIOR,y.iridescenceThicknessMinimum.value=b.iridescenceThicknessRange[0],y.iridescenceThicknessMaximum.value=b.iridescenceThicknessRange[1],b.iridescenceMap&&(y.iridescenceMap.value=b.iridescenceMap,t(b.iridescenceMap,y.iridescenceMapTransform)),b.iridescenceThicknessMap&&(y.iridescenceThicknessMap.value=b.iridescenceThicknessMap,t(b.iridescenceThicknessMap,y.iridescenceThicknessMapTransform))),b.transmission>0&&(y.transmission.value=b.transmission,y.transmissionSamplerMap.value=S.texture,y.transmissionSamplerSize.value.set(S.width,S.height),b.transmissionMap&&(y.transmissionMap.value=b.transmissionMap,t(b.transmissionMap,y.transmissionMapTransform)),y.thickness.value=b.thickness,b.thicknessMap&&(y.thicknessMap.value=b.thicknessMap,t(b.thicknessMap,y.thicknessMapTransform)),y.attenuationDistance.value=b.attenuationDistance,y.attenuationColor.value.copy(b.attenuationColor)),b.anisotropy>0&&(y.anisotropyVector.value.set(b.anisotropy*Math.cos(b.anisotropyRotation),b.anisotropy*Math.sin(b.anisotropyRotation)),b.anisotropyMap&&(y.anisotropyMap.value=b.anisotropyMap,t(b.anisotropyMap,y.anisotropyMapTransform))),y.specularIntensity.value=b.specularIntensity,y.specularColor.value.copy(b.specularColor),b.specularColorMap&&(y.specularColorMap.value=b.specularColorMap,t(b.specularColorMap,y.specularColorMapTransform)),b.specularIntensityMap&&(y.specularIntensityMap.value=b.specularIntensityMap,t(b.specularIntensityMap,y.specularIntensityMapTransform))}function v(y,b){b.matcap&&(y.matcap.value=b.matcap)}function g(y,b){const S=e.get(b).light;y.referencePosition.value.setFromMatrixPosition(S.matrixWorld),y.nearDistance.value=S.shadow.camera.near,y.farDistance.value=S.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function eQ(n,e,t,i){let r={},s={},o=[];const a=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function l(S,x){const A=x.program;i.uniformBlockBinding(S,A)}function c(S,x){let A=r[S.id];A===void 0&&(v(S),A=u(S),r[S.id]=A,S.addEventListener("dispose",y));const E=x.program;i.updateUBOMapping(S,E);const M=e.render.frame;s[S.id]!==M&&(f(S),s[S.id]=M)}function u(S){const x=d();S.__bindingPointIndex=x;const A=n.createBuffer(),E=S.__size,M=S.usage;return n.bindBuffer(n.UNIFORM_BUFFER,A),n.bufferData(n.UNIFORM_BUFFER,E,M),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,x,A),A}function d(){for(let S=0;S<a;S++)if(o.indexOf(S)===-1)return o.push(S),S;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function f(S){const x=r[S.id],A=S.uniforms,E=S.__cache;n.bindBuffer(n.UNIFORM_BUFFER,x);for(let M=0,I=A.length;M<I;M++){const R=Array.isArray(A[M])?A[M]:[A[M]];for(let C=0,D=R.length;C<D;C++){const L=R[C];if(m(L,M,C,E)===!0){const z=L.__offset,G=Array.isArray(L.value)?L.value:[L.value];let H=0;for(let J=0;J<G.length;J++){const k=G[J],X=g(k);typeof k=="number"||typeof k=="boolean"?(L.__data[0]=k,n.bufferSubData(n.UNIFORM_BUFFER,z+H,L.__data)):k.isMatrix3?(L.__data[0]=k.elements[0],L.__data[1]=k.elements[1],L.__data[2]=k.elements[2],L.__data[3]=0,L.__data[4]=k.elements[3],L.__data[5]=k.elements[4],L.__data[6]=k.elements[5],L.__data[7]=0,L.__data[8]=k.elements[6],L.__data[9]=k.elements[7],L.__data[10]=k.elements[8],L.__data[11]=0):(k.toArray(L.__data,H),H+=X.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,z,L.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function m(S,x,A,E){const M=S.value,I=x+"_"+A;if(E[I]===void 0)return typeof M=="number"||typeof M=="boolean"?E[I]=M:E[I]=M.clone(),!0;{const R=E[I];if(typeof M=="number"||typeof M=="boolean"){if(R!==M)return E[I]=M,!0}else if(R.equals(M)===!1)return R.copy(M),!0}return!1}function v(S){const x=S.uniforms;let A=0;const E=16;for(let I=0,R=x.length;I<R;I++){const C=Array.isArray(x[I])?x[I]:[x[I]];for(let D=0,L=C.length;D<L;D++){const z=C[D],G=Array.isArray(z.value)?z.value:[z.value];for(let H=0,J=G.length;H<J;H++){const k=G[H],X=g(k),W=A%E,ie=W%X.boundary,se=W+ie;A+=ie,se!==0&&E-se<X.storage&&(A+=E-se),z.__data=new Float32Array(X.storage/Float32Array.BYTES_PER_ELEMENT),z.__offset=A,A+=X.storage}}}const M=A%E;return M>0&&(A+=E-M),S.__size=A,S.__cache={},this}function g(S){const x={boundary:0,storage:0};return typeof S=="number"||typeof S=="boolean"?(x.boundary=4,x.storage=4):S.isVector2?(x.boundary=8,x.storage=8):S.isVector3||S.isColor?(x.boundary=16,x.storage=12):S.isVector4?(x.boundary=16,x.storage=16):S.isMatrix3?(x.boundary=48,x.storage=48):S.isMatrix4?(x.boundary=64,x.storage=64):S.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",S),x}function y(S){const x=S.target;x.removeEventListener("dispose",y);const A=o.indexOf(x.__bindingPointIndex);o.splice(A,1),n.deleteBuffer(r[x.id]),delete r[x.id],delete s[x.id]}function b(){for(const S in r)n.deleteBuffer(r[S]);o=[],r={},s={}}return{bind:l,update:c,dispose:b}}class eU{constructor(e={}){const{canvas:t=VL(),context:i=null,depth:r=!0,stencil:s=!1,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:d=!1,reversedDepthBuffer:f=!1}=e;this.isWebGLRenderer=!0;let m;if(i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");m=i.getContextAttributes().alpha}else m=o;const v=new Uint32Array(4),g=new Int32Array(4);let y=null,b=null;const S=[],x=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=co,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const A=this;let E=!1;this._outputColorSpace=hn;let M=0,I=0,R=null,C=-1,D=null;const L=new Jt,z=new Jt;let G=null;const H=new at(0);let J=0,k=t.width,X=t.height,W=1,ie=null,se=null;const ye=new Jt(0,0,k,X),Ne=new Jt(0,0,k,X);let He=!1;const fe=new Du;let he=!1,le=!1;const ee=new Rt,de=new K,be=new Jt,oe={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let ge=!1;function Se(){return R===null?W:1}let q=i;function me(U,Q){return t.getContext(U,Q)}try{const U={alpha:!0,depth:r,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:u,failIfMajorPerformanceCaveat:d};if("setAttribute"in t&&t.setAttribute("data-engine","three.js r".concat(ia)),t.addEventListener("webglcontextlost",tt,!1),t.addEventListener("webglcontextrestored",ut,!1),t.addEventListener("webglcontextcreationerror",Ke,!1),q===null){const Q="webgl2";if(q=me(Q,U),q===null)throw me(Q)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(U){throw console.error("THREE.WebGLRenderer: "+U.message),U}let xe,Re,Ce,qe,We,Ze,wt,St,Y,B,ue,Ae,ze,Ie,lt,Xe,ht,ct,je,Je,bt,st,Ye,vt;function ce(){xe=new d7(q),xe.init(),st=new Zk(q,xe),Re=new s7(q,xe,e,st),Ce=new qJ(q,xe),Re.reversedDepthBuffer&&f&&Ce.buffers.depth.setReversed(!0),qe=new m7(q),We=new OJ,Ze=new XJ(q,xe,Ce,We,Re,st,qe),wt=new a7(A),St=new h7(A),Y=new w9(q),Ye=new i7(q,Y),B=new f7(q,Y,qe,Ye),ue=new v7(q,B,Y,qe),je=new g7(q,Re,Ze),Xe=new o7(We),Ae=new PJ(A,wt,St,xe,Re,Ye,Xe),ze=new ZJ(A,We),Ie=new kJ,lt=new HJ(xe),ct=new n7(A,wt,St,Ce,ue,m,l),ht=new WJ(A,ue,Re),vt=new eQ(q,qe,Re,Ce),Je=new r7(q,xe,qe),bt=new p7(q,xe,qe),qe.programs=Ae.programs,A.capabilities=Re,A.extensions=xe,A.properties=We,A.renderLists=Ie,A.shadowMap=ht,A.state=Ce,A.info=qe}ce();const ve=new JJ(A,q);this.xr=ve,this.getContext=function(){return q},this.getContextAttributes=function(){return q.getContextAttributes()},this.forceContextLoss=function(){const U=xe.get("WEBGL_lose_context");U&&U.loseContext()},this.forceContextRestore=function(){const U=xe.get("WEBGL_lose_context");U&&U.restoreContext()},this.getPixelRatio=function(){return W},this.setPixelRatio=function(U){U!==void 0&&(W=U,this.setSize(k,X,!1))},this.getSize=function(U){return U.set(k,X)},this.setSize=function(U,Q,te=!0){if(ve.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}k=U,X=Q,t.width=Math.floor(U*W),t.height=Math.floor(Q*W),te===!0&&(t.style.width=U+"px",t.style.height=Q+"px"),this.setViewport(0,0,U,Q)},this.getDrawingBufferSize=function(U){return U.set(k*W,X*W).floor()},this.setDrawingBufferSize=function(U,Q,te){k=U,X=Q,W=te,t.width=Math.floor(U*te),t.height=Math.floor(Q*te),this.setViewport(0,0,U,Q)},this.getCurrentViewport=function(U){return U.copy(L)},this.getViewport=function(U){return U.copy(ye)},this.setViewport=function(U,Q,te,ne){U.isVector4?ye.set(U.x,U.y,U.z,U.w):ye.set(U,Q,te,ne),Ce.viewport(L.copy(ye).multiplyScalar(W).round())},this.getScissor=function(U){return U.copy(Ne)},this.setScissor=function(U,Q,te,ne){U.isVector4?Ne.set(U.x,U.y,U.z,U.w):Ne.set(U,Q,te,ne),Ce.scissor(z.copy(Ne).multiplyScalar(W).round())},this.getScissorTest=function(){return He},this.setScissorTest=function(U){Ce.setScissorTest(He=U)},this.setOpaqueSort=function(U){ie=U},this.setTransparentSort=function(U){se=U},this.getClearColor=function(U){return U.copy(ct.getClearColor())},this.setClearColor=function(){ct.setClearColor(...arguments)},this.getClearAlpha=function(){return ct.getClearAlpha()},this.setClearAlpha=function(){ct.setClearAlpha(...arguments)},this.clear=function(U=!0,Q=!0,te=!0){let ne=0;if(U){let Z=!1;if(R!==null){const Be=R.texture.format;Z=Be===xv||Be===Sv||Be===rf}if(Z){const Be=R.texture.type,Oe=Be===Zn||Be===fs||Be===fu||Be===Rl||Be===bv||Be===wv,Fe=ct.getClearColor(),Ge=ct.getClearAlpha(),$e=Fe.r,it=Fe.g,nt=Fe.b;Oe?(v[0]=$e,v[1]=it,v[2]=nt,v[3]=Ge,q.clearBufferuiv(q.COLOR,0,v)):(g[0]=$e,g[1]=it,g[2]=nt,g[3]=Ge,q.clearBufferiv(q.COLOR,0,g))}else ne|=q.COLOR_BUFFER_BIT}Q&&(ne|=q.DEPTH_BUFFER_BIT),te&&(ne|=q.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),q.clear(ne)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",tt,!1),t.removeEventListener("webglcontextrestored",ut,!1),t.removeEventListener("webglcontextcreationerror",Ke,!1),ct.dispose(),Ie.dispose(),lt.dispose(),We.dispose(),wt.dispose(),St.dispose(),ue.dispose(),Ye.dispose(),vt.dispose(),Ae.dispose(),ve.dispose(),ve.removeEventListener("sessionstart",Oi),ve.removeEventListener("sessionend",fn),Or.stop()};function tt(U){U.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),E=!0}function ut(){console.log("THREE.WebGLRenderer: Context Restored."),E=!1;const U=qe.autoReset,Q=ht.enabled,te=ht.autoUpdate,ne=ht.needsUpdate,Z=ht.type;ce(),qe.autoReset=U,ht.enabled=Q,ht.autoUpdate=te,ht.needsUpdate=ne,ht.type=Z}function Ke(U){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",U.statusMessage)}function Te(U){const Q=U.target;Q.removeEventListener("dispose",Te),dt(Q)}function dt(U){Et(U),We.remove(U)}function Et(U){const Q=We.get(U).programs;Q!==void 0&&(Q.forEach(function(te){Ae.releaseProgram(te)}),U.isShaderMaterial&&Ae.releaseShaderCache(U))}this.renderBufferDirect=function(U,Q,te,ne,Z,Be){Q===null&&(Q=oe);const Oe=Z.isMesh&&Z.matrixWorld.determinant()<0,Fe=j(U,Q,te,ne,Z);Ce.setMaterial(ne,Oe);let Ge=te.index,$e=1;if(ne.wireframe===!0){if(Ge=B.getWireframeAttribute(te),Ge===void 0)return;$e=2}const it=te.drawRange,nt=te.attributes.position;let gt=it.start*$e,Dt=(it.start+it.count)*$e;Be!==null&&(gt=Math.max(gt,Be.start*$e),Dt=Math.min(Dt,(Be.start+Be.count)*$e)),Ge!==null?(gt=Math.max(gt,0),Dt=Math.min(Dt,Ge.count)):nt!=null&&(gt=Math.max(gt,0),Dt=Math.min(Dt,nt.count));const Mt=Dt-gt;if(Mt<0||Mt===1/0)return;Ye.setup(Z,ne,Fe,te,Ge);let jt,_t=Je;if(Ge!==null&&(jt=Y.get(Ge),_t=bt,_t.setIndex(jt)),Z.isMesh)ne.wireframe===!0?(Ce.setLineWidth(ne.wireframeLinewidth*Se()),_t.setMode(q.LINES)):_t.setMode(q.TRIANGLES);else if(Z.isLine){let ot=ne.linewidth;ot===void 0&&(ot=1),Ce.setLineWidth(ot*Se()),Z.isLineSegments?_t.setMode(q.LINES):Z.isLineLoop?_t.setMode(q.LINE_LOOP):_t.setMode(q.LINE_STRIP)}else Z.isPoints?_t.setMode(q.POINTS):Z.isSprite&&_t.setMode(q.TRIANGLES);if(Z.isBatchedMesh)if(Z._multiDrawInstances!==null)Pd("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),_t.renderMultiDrawInstances(Z._multiDrawStarts,Z._multiDrawCounts,Z._multiDrawCount,Z._multiDrawInstances);else if(xe.get("WEBGL_multi_draw"))_t.renderMultiDraw(Z._multiDrawStarts,Z._multiDrawCounts,Z._multiDrawCount);else{const ot=Z._multiDrawStarts,Kt=Z._multiDrawCounts,Gt=Z._multiDrawCount,pn=Ge?Y.get(Ge).bytesPerElement:1,Xt=We.get(ne).currentProgram.getUniforms();for(let ln=0;ln<Gt;ln++)Xt.setValue(q,"_gl_DrawID",ln),_t.render(ot[ln]/pn,Kt[ln])}else if(Z.isInstancedMesh)_t.renderInstances(gt,Mt,Z.count);else if(te.isInstancedBufferGeometry){const ot=te._maxInstanceCount!==void 0?te._maxInstanceCount:1/0,Kt=Math.min(te.instanceCount,ot);_t.renderInstances(gt,Mt,Kt)}else _t.render(gt,Mt)};function dn(U,Q,te){U.transparent===!0&&U.side===Ji&&U.forceSinglePass===!1?(U.side=mi,U.needsUpdate=!0,_s(U,Q,te),U.side=Us,U.needsUpdate=!0,_s(U,Q,te),U.side=Ji):_s(U,Q,te)}this.compile=function(U,Q,te=null){te===null&&(te=U),b=lt.get(te),b.init(Q),x.push(b),te.traverseVisible(function(Z){Z.isLight&&Z.layers.test(Q.layers)&&(b.pushLight(Z),Z.castShadow&&b.pushShadow(Z))}),U!==te&&U.traverseVisible(function(Z){Z.isLight&&Z.layers.test(Q.layers)&&(b.pushLight(Z),Z.castShadow&&b.pushShadow(Z))}),b.setupLights();const ne=new Set;return U.traverse(function(Z){if(!(Z.isMesh||Z.isPoints||Z.isLine||Z.isSprite))return;const Be=Z.material;if(Be)if(Array.isArray(Be))for(let Oe=0;Oe<Be.length;Oe++){const Fe=Be[Oe];dn(Fe,te,Z),ne.add(Fe)}else dn(Be,te,Z),ne.add(Be)}),b=x.pop(),ne},this.compileAsync=function(U,Q,te=null){const ne=this.compile(U,Q,te);return new Promise(Z=>{function Be(){if(ne.forEach(function(Oe){We.get(Oe).currentProgram.isReady()&&ne.delete(Oe)}),ne.size===0){Z(U);return}setTimeout(Be,10)}xe.get("KHR_parallel_shader_compile")!==null?Be():setTimeout(Be,10)})};let en=null;function vr(U){en&&en(U)}function Oi(){Or.stop()}function fn(){Or.start()}const Or=new Yk;Or.setAnimationLoop(vr),typeof self<"u"&&Or.setContext(self),this.setAnimationLoop=function(U){en=U,ve.setAnimationLoop(U),U===null?Or.stop():Or.start()},ve.addEventListener("sessionstart",Oi),ve.addEventListener("sessionend",fn),this.render=function(U,Q){if(Q!==void 0&&Q.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(E===!0)return;if(U.matrixWorldAutoUpdate===!0&&U.updateMatrixWorld(),Q.parent===null&&Q.matrixWorldAutoUpdate===!0&&Q.updateMatrixWorld(),ve.enabled===!0&&ve.isPresenting===!0&&(ve.cameraAutoUpdate===!0&&ve.updateCamera(Q),Q=ve.getCamera()),U.isScene===!0&&U.onBeforeRender(A,U,Q,R),b=lt.get(U,x.length),b.init(Q),x.push(b),ee.multiplyMatrices(Q.projectionMatrix,Q.matrixWorldInverse),fe.setFromProjectionMatrix(ee,Mr,Q.reversedDepth),le=this.localClippingEnabled,he=Xe.init(this.clippingPlanes,le),y=Ie.get(U,S.length),y.init(),S.push(y),ve.enabled===!0&&ve.isPresenting===!0){const Be=A.xr.getDepthSensingMesh();Be!==null&&vs(Be,Q,-1/0,A.sortObjects)}vs(U,Q,0,A.sortObjects),y.finish(),A.sortObjects===!0&&y.sort(ie,se),ge=ve.enabled===!1||ve.isPresenting===!1||ve.hasDepthSensing()===!1,ge&&ct.addToRenderList(y,U),this.info.render.frame++,he===!0&&Xe.beginShadows();const te=b.state.shadowsArray;ht.render(te,U,Q),he===!0&&Xe.endShadows(),this.info.autoReset===!0&&this.info.reset();const ne=y.opaque,Z=y.transmissive;if(b.setupLights(),Q.isArrayCamera){const Be=Q.cameras;if(Z.length>0)for(let Oe=0,Fe=Be.length;Oe<Fe;Oe++){const Ge=Be[Oe];Fs(ne,Z,U,Ge)}ge&&ct.render(U);for(let Oe=0,Fe=Be.length;Oe<Fe;Oe++){const Ge=Be[Oe];Fu(y,U,Ge,Ge.viewport)}}else Z.length>0&&Fs(ne,Z,U,Q),ge&&ct.render(U),Fu(y,U,Q);R!==null&&I===0&&(Ze.updateMultisampleRenderTarget(R),Ze.updateRenderTargetMipmap(R)),U.isScene===!0&&U.onAfterRender(A,U,Q),Ye.resetDefaultState(),C=-1,D=null,x.pop(),x.length>0?(b=x[x.length-1],he===!0&&Xe.setGlobalState(A.clippingPlanes,b.state.camera)):b=null,S.pop(),S.length>0?y=S[S.length-1]:y=null};function vs(U,Q,te,ne){if(U.visible===!1)return;if(U.layers.test(Q.layers)){if(U.isGroup)te=U.renderOrder;else if(U.isLOD)U.autoUpdate===!0&&U.update(Q);else if(U.isLight)b.pushLight(U),U.castShadow&&b.pushShadow(U);else if(U.isSprite){if(!U.frustumCulled||fe.intersectsSprite(U)){ne&&be.setFromMatrixPosition(U.matrixWorld).applyMatrix4(ee);const Oe=ue.update(U),Fe=U.material;Fe.visible&&y.push(U,Oe,Fe,te,be.z,null)}}else if((U.isMesh||U.isLine||U.isPoints)&&(!U.frustumCulled||fe.intersectsObject(U))){const Oe=ue.update(U),Fe=U.material;if(ne&&(U.boundingSphere!==void 0?(U.boundingSphere===null&&U.computeBoundingSphere(),be.copy(U.boundingSphere.center)):(Oe.boundingSphere===null&&Oe.computeBoundingSphere(),be.copy(Oe.boundingSphere.center)),be.applyMatrix4(U.matrixWorld).applyMatrix4(ee)),Array.isArray(Fe)){const Ge=Oe.groups;for(let $e=0,it=Ge.length;$e<it;$e++){const nt=Ge[$e],gt=Fe[nt.materialIndex];gt&&gt.visible&&y.push(U,Oe,gt,te,be.z,nt)}}else Fe.visible&&y.push(U,Oe,Fe,te,be.z,null)}}const Be=U.children;for(let Oe=0,Fe=Be.length;Oe<Fe;Oe++)vs(Be[Oe],Q,te,ne)}function Fu(U,Q,te,ne){const Z=U.opaque,Be=U.transmissive,Oe=U.transparent;b.setupLightsView(te),he===!0&&Xe.setGlobalState(A.clippingPlanes,te),ne&&Ce.viewport(L.copy(ne)),Z.length>0&&jn(Z,Q,te),Be.length>0&&jn(Be,Q,te),Oe.length>0&&jn(Oe,Q,te),Ce.buffers.depth.setTest(!0),Ce.buffers.depth.setMask(!0),Ce.buffers.color.setMask(!0),Ce.setPolygonOffset(!1)}function Fs(U,Q,te,ne){if((te.isScene===!0?te.overrideMaterial:null)!==null)return;b.state.transmissionRenderTarget[ne.id]===void 0&&(b.state.transmissionRenderTarget[ne.id]=new ni(1,1,{generateMipmaps:!0,type:xe.has("EXT_color_buffer_half_float")||xe.has("EXT_color_buffer_float")?Ii:Zn,minFilter:Ds,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:rn.workingColorSpace}));const Be=b.state.transmissionRenderTarget[ne.id],Oe=ne.viewport||L;Be.setSize(Oe.z*A.transmissionResolutionScale,Oe.w*A.transmissionResolutionScale);const Fe=A.getRenderTarget(),Ge=A.getActiveCubeFace(),$e=A.getActiveMipmapLevel();A.setRenderTarget(Be),A.getClearColor(H),J=A.getClearAlpha(),J<1&&A.setClearColor(16777215,.5),A.clear(),ge&&ct.render(te);const it=A.toneMapping;A.toneMapping=co;const nt=ne.viewport;if(ne.viewport!==void 0&&(ne.viewport=void 0),b.setupLightsView(ne),he===!0&&Xe.setGlobalState(A.clippingPlanes,ne),jn(U,te,ne),Ze.updateMultisampleRenderTarget(Be),Ze.updateRenderTargetMipmap(Be),xe.has("WEBGL_multisampled_render_to_texture")===!1){let gt=!1;for(let Dt=0,Mt=Q.length;Dt<Mt;Dt++){const jt=Q[Dt],_t=jt.object,ot=jt.geometry,Kt=jt.material,Gt=jt.group;if(Kt.side===Ji&&_t.layers.test(ne.layers)){const pn=Kt.side;Kt.side=mi,Kt.needsUpdate=!0,Bt(_t,te,ne,ot,Kt,Gt),Kt.side=pn,Kt.needsUpdate=!0,gt=!0}}gt===!0&&(Ze.updateMultisampleRenderTarget(Be),Ze.updateRenderTargetMipmap(Be))}A.setRenderTarget(Fe,Ge,$e),A.setClearColor(H,J),nt!==void 0&&(ne.viewport=nt),A.toneMapping=it}function jn(U,Q,te){const ne=Q.isScene===!0?Q.overrideMaterial:null;for(let Z=0,Be=U.length;Z<Be;Z++){const Oe=U[Z],Fe=Oe.object,Ge=Oe.geometry,$e=Oe.group;let it=Oe.material;it.allowOverride===!0&&ne!==null&&(it=ne),Fe.layers.test(te.layers)&&Bt(Fe,Q,te,Ge,it,$e)}}function Bt(U,Q,te,ne,Z,Be){U.onBeforeRender(A,Q,te,ne,Z,Be),U.modelViewMatrix.multiplyMatrices(te.matrixWorldInverse,U.matrixWorld),U.normalMatrix.getNormalMatrix(U.modelViewMatrix),Z.onBeforeRender(A,Q,te,ne,U,Be),Z.transparent===!0&&Z.side===Ji&&Z.forceSinglePass===!1?(Z.side=mi,Z.needsUpdate=!0,A.renderBufferDirect(te,Q,ne,Z,U,Be),Z.side=Us,Z.needsUpdate=!0,A.renderBufferDirect(te,Q,ne,Z,U,Be),Z.side=Ji):A.renderBufferDirect(te,Q,ne,Z,U,Be),U.onAfterRender(A,Q,te,ne,Z,Be)}function _s(U,Q,te){Q.isScene!==!0&&(Q=oe);const ne=We.get(U),Z=b.state.lights,Be=b.state.shadowsArray,Oe=Z.state.version,Fe=Ae.getParameters(U,Z.state,Be,Q,te),Ge=Ae.getProgramCacheKey(Fe);let $e=ne.programs;ne.environment=U.isMeshStandardMaterial?Q.environment:null,ne.fog=Q.fog,ne.envMap=(U.isMeshStandardMaterial?St:wt).get(U.envMap||ne.environment),ne.envMapRotation=ne.environment!==null&&U.envMap===null?Q.environmentRotation:U.envMapRotation,$e===void 0&&(U.addEventListener("dispose",Te),$e=new Map,ne.programs=$e);let it=$e.get(Ge);if(it!==void 0){if(ne.currentProgram===it&&ne.lightsStateVersion===Oe)return N(U,Fe),it}else Fe.uniforms=Ae.getUniforms(U),U.onBeforeCompile(Fe,A),it=Ae.acquireProgram(Fe,Ge),$e.set(Ge,it),ne.uniforms=Fe.uniforms;const nt=ne.uniforms;return(!U.isShaderMaterial&&!U.isRawShaderMaterial||U.clipping===!0)&&(nt.clippingPlanes=Xe.uniform),N(U,Fe),ne.needsLights=we(U),ne.lightsStateVersion=Oe,ne.needsLights&&(nt.ambientLightColor.value=Z.state.ambient,nt.lightProbe.value=Z.state.probe,nt.directionalLights.value=Z.state.directional,nt.directionalLightShadows.value=Z.state.directionalShadow,nt.spotLights.value=Z.state.spot,nt.spotLightShadows.value=Z.state.spotShadow,nt.rectAreaLights.value=Z.state.rectArea,nt.ltc_1.value=Z.state.rectAreaLTC1,nt.ltc_2.value=Z.state.rectAreaLTC2,nt.pointLights.value=Z.state.point,nt.pointLightShadows.value=Z.state.pointShadow,nt.hemisphereLights.value=Z.state.hemi,nt.directionalShadowMap.value=Z.state.directionalShadowMap,nt.directionalShadowMatrix.value=Z.state.directionalShadowMatrix,nt.spotShadowMap.value=Z.state.spotShadowMap,nt.spotLightMatrix.value=Z.state.spotLightMatrix,nt.spotLightMap.value=Z.state.spotLightMap,nt.pointShadowMap.value=Z.state.pointShadowMap,nt.pointShadowMatrix.value=Z.state.pointShadowMatrix),ne.currentProgram=it,ne.uniformsList=null,it}function _o(U){if(U.uniformsList===null){const Q=U.currentProgram.getUniforms();U.uniformsList=Gm.seqWithValue(Q.seq,U.uniforms)}return U.uniformsList}function N(U,Q){const te=We.get(U);te.outputColorSpace=Q.outputColorSpace,te.batching=Q.batching,te.batchingColor=Q.batchingColor,te.instancing=Q.instancing,te.instancingColor=Q.instancingColor,te.instancingMorph=Q.instancingMorph,te.skinning=Q.skinning,te.morphTargets=Q.morphTargets,te.morphNormals=Q.morphNormals,te.morphColors=Q.morphColors,te.morphTargetsCount=Q.morphTargetsCount,te.numClippingPlanes=Q.numClippingPlanes,te.numIntersection=Q.numClipIntersection,te.vertexAlphas=Q.vertexAlphas,te.vertexTangents=Q.vertexTangents,te.toneMapping=Q.toneMapping}function j(U,Q,te,ne,Z){Q.isScene!==!0&&(Q=oe),Ze.resetTextureUnits();const Be=Q.fog,Oe=ne.isMeshStandardMaterial?Q.environment:null,Fe=R===null?A.outputColorSpace:R.isXRRenderTarget===!0?R.texture.colorSpace:Vr,Ge=(ne.isMeshStandardMaterial?St:wt).get(ne.envMap||Oe),$e=ne.vertexColors===!0&&!!te.attributes.color&&te.attributes.color.itemSize===4,it=!!te.attributes.tangent&&(!!ne.normalMap||ne.anisotropy>0),nt=!!te.morphAttributes.position,gt=!!te.morphAttributes.normal,Dt=!!te.morphAttributes.color;let Mt=co;ne.toneMapped&&(R===null||R.isXRRenderTarget===!0)&&(Mt=A.toneMapping);const jt=te.morphAttributes.position||te.morphAttributes.normal||te.morphAttributes.color,_t=jt!==void 0?jt.length:0,ot=We.get(ne),Kt=b.state.lights;if(he===!0&&(le===!0||U!==D)){const cn=U===D&&ne.id===C;Xe.setState(ne,U,cn)}let Gt=!1;ne.version===ot.__version?(ot.needsLights&&ot.lightsStateVersion!==Kt.state.version||ot.outputColorSpace!==Fe||Z.isBatchedMesh&&ot.batching===!1||!Z.isBatchedMesh&&ot.batching===!0||Z.isBatchedMesh&&ot.batchingColor===!0&&Z.colorTexture===null||Z.isBatchedMesh&&ot.batchingColor===!1&&Z.colorTexture!==null||Z.isInstancedMesh&&ot.instancing===!1||!Z.isInstancedMesh&&ot.instancing===!0||Z.isSkinnedMesh&&ot.skinning===!1||!Z.isSkinnedMesh&&ot.skinning===!0||Z.isInstancedMesh&&ot.instancingColor===!0&&Z.instanceColor===null||Z.isInstancedMesh&&ot.instancingColor===!1&&Z.instanceColor!==null||Z.isInstancedMesh&&ot.instancingMorph===!0&&Z.morphTexture===null||Z.isInstancedMesh&&ot.instancingMorph===!1&&Z.morphTexture!==null||ot.envMap!==Ge||ne.fog===!0&&ot.fog!==Be||ot.numClippingPlanes!==void 0&&(ot.numClippingPlanes!==Xe.numPlanes||ot.numIntersection!==Xe.numIntersection)||ot.vertexAlphas!==$e||ot.vertexTangents!==it||ot.morphTargets!==nt||ot.morphNormals!==gt||ot.morphColors!==Dt||ot.toneMapping!==Mt||ot.morphTargetsCount!==_t)&&(Gt=!0):(Gt=!0,ot.__version=ne.version);let pn=ot.currentProgram;Gt===!0&&(pn=_s(ne,Q,Z));let Xt=!1,ln=!1,tn=!1;const yt=pn.getUniforms(),An=ot.uniforms;if(Ce.useProgram(pn.program)&&(Xt=!0,ln=!0,tn=!0),ne.id!==C&&(C=ne.id,ln=!0),Xt||D!==U){Ce.buffers.depth.getReversed()&&U.reversedDepth!==!0&&(U._reversedDepth=!0,U.updateProjectionMatrix()),yt.setValue(q,"projectionMatrix",U.projectionMatrix),yt.setValue(q,"viewMatrix",U.matrixWorldInverse);const Sn=yt.map.cameraPosition;Sn!==void 0&&Sn.setValue(q,de.setFromMatrixPosition(U.matrixWorld)),Re.logarithmicDepthBuffer&&yt.setValue(q,"logDepthBufFC",2/(Math.log(U.far+1)/Math.LN2)),(ne.isMeshPhongMaterial||ne.isMeshToonMaterial||ne.isMeshLambertMaterial||ne.isMeshBasicMaterial||ne.isMeshStandardMaterial||ne.isShaderMaterial)&&yt.setValue(q,"isOrthographic",U.isOrthographicCamera===!0),D!==U&&(D=U,ln=!0,tn=!0)}if(Z.isSkinnedMesh){yt.setOptional(q,Z,"bindMatrix"),yt.setOptional(q,Z,"bindMatrixInverse");const cn=Z.skeleton;cn&&(cn.boneTexture===null&&cn.computeBoneTexture(),yt.setValue(q,"boneTexture",cn.boneTexture,Ze))}Z.isBatchedMesh&&(yt.setOptional(q,Z,"batchingTexture"),yt.setValue(q,"batchingTexture",Z._matricesTexture,Ze),yt.setOptional(q,Z,"batchingIdTexture"),yt.setValue(q,"batchingIdTexture",Z._indirectTexture,Ze),yt.setOptional(q,Z,"batchingColorTexture"),Z._colorsTexture!==null&&yt.setValue(q,"batchingColorTexture",Z._colorsTexture,Ze));const qn=te.morphAttributes;if((qn.position!==void 0||qn.normal!==void 0||qn.color!==void 0)&&je.update(Z,te,pn),(ln||ot.receiveShadow!==Z.receiveShadow)&&(ot.receiveShadow=Z.receiveShadow,yt.setValue(q,"receiveShadow",Z.receiveShadow)),ne.isMeshGouraudMaterial&&ne.envMap!==null&&(An.envMap.value=Ge,An.flipEnvMap.value=Ge.isCubeTexture&&Ge.isRenderTargetTexture===!1?-1:1),ne.isMeshStandardMaterial&&ne.envMap===null&&Q.environment!==null&&(An.envMapIntensity.value=Q.environmentIntensity),ln&&(yt.setValue(q,"toneMappingExposure",A.toneMappingExposure),ot.needsLights&&ae(An,tn),Be&&ne.fog===!0&&ze.refreshFogUniforms(An,Be),ze.refreshMaterialUniforms(An,ne,W,X,b.state.transmissionRenderTarget[U.id]),Gm.upload(q,_o(ot),An,Ze)),ne.isShaderMaterial&&ne.uniformsNeedUpdate===!0&&(Gm.upload(q,_o(ot),An,Ze),ne.uniformsNeedUpdate=!1),ne.isSpriteMaterial&&yt.setValue(q,"center",Z.center),yt.setValue(q,"modelViewMatrix",Z.modelViewMatrix),yt.setValue(q,"normalMatrix",Z.normalMatrix),yt.setValue(q,"modelMatrix",Z.matrixWorld),ne.isShaderMaterial||ne.isRawShaderMaterial){const cn=ne.uniformsGroups;for(let Sn=0,ca=cn.length;Sn<ca;Sn++){const qr=cn[Sn];vt.update(qr,pn),vt.bind(qr,pn)}}return pn}function ae(U,Q){U.ambientLightColor.needsUpdate=Q,U.lightProbe.needsUpdate=Q,U.directionalLights.needsUpdate=Q,U.directionalLightShadows.needsUpdate=Q,U.pointLights.needsUpdate=Q,U.pointLightShadows.needsUpdate=Q,U.spotLights.needsUpdate=Q,U.spotLightShadows.needsUpdate=Q,U.rectAreaLights.needsUpdate=Q,U.hemisphereLights.needsUpdate=Q}function we(U){return U.isMeshLambertMaterial||U.isMeshToonMaterial||U.isMeshPhongMaterial||U.isMeshStandardMaterial||U.isShadowMaterial||U.isShaderMaterial&&U.lights===!0}this.getActiveCubeFace=function(){return M},this.getActiveMipmapLevel=function(){return I},this.getRenderTarget=function(){return R},this.setRenderTargetTextures=function(U,Q,te){const ne=We.get(U);ne.__autoAllocateDepthBuffer=U.resolveDepthBuffer===!1,ne.__autoAllocateDepthBuffer===!1&&(ne.__useRenderToTexture=!1),We.get(U.texture).__webglTexture=Q,We.get(U.depthTexture).__webglTexture=ne.__autoAllocateDepthBuffer?void 0:te,ne.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(U,Q){const te=We.get(U);te.__webglFramebuffer=Q,te.__useDefaultFramebuffer=Q===void 0};const De=q.createFramebuffer();this.setRenderTarget=function(U,Q=0,te=0){R=U,M=Q,I=te;let ne=!0,Z=null,Be=!1,Oe=!1;if(U){const Ge=We.get(U);if(Ge.__useDefaultFramebuffer!==void 0)Ce.bindFramebuffer(q.FRAMEBUFFER,null),ne=!1;else if(Ge.__webglFramebuffer===void 0)Ze.setupRenderTarget(U);else if(Ge.__hasExternalTextures)Ze.rebindTextures(U,We.get(U.texture).__webglTexture,We.get(U.depthTexture).__webglTexture);else if(U.depthBuffer){const nt=U.depthTexture;if(Ge.__boundDepthTexture!==nt){if(nt!==null&&We.has(nt)&&(U.width!==nt.image.width||U.height!==nt.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");Ze.setupDepthRenderbuffer(U)}}const $e=U.texture;($e.isData3DTexture||$e.isDataArrayTexture||$e.isCompressedArrayTexture)&&(Oe=!0);const it=We.get(U).__webglFramebuffer;U.isWebGLCubeRenderTarget?(Array.isArray(it[Q])?Z=it[Q][te]:Z=it[Q],Be=!0):U.samples>0&&Ze.useMultisampledRTT(U)===!1?Z=We.get(U).__webglMultisampledFramebuffer:Array.isArray(it)?Z=it[te]:Z=it,L.copy(U.viewport),z.copy(U.scissor),G=U.scissorTest}else L.copy(ye).multiplyScalar(W).floor(),z.copy(Ne).multiplyScalar(W).floor(),G=He;if(te!==0&&(Z=De),Ce.bindFramebuffer(q.FRAMEBUFFER,Z)&&ne&&Ce.drawBuffers(U,Z),Ce.viewport(L),Ce.scissor(z),Ce.setScissorTest(G),Be){const Ge=We.get(U.texture);q.framebufferTexture2D(q.FRAMEBUFFER,q.COLOR_ATTACHMENT0,q.TEXTURE_CUBE_MAP_POSITIVE_X+Q,Ge.__webglTexture,te)}else if(Oe){const Ge=Q;for(let $e=0;$e<U.textures.length;$e++){const it=We.get(U.textures[$e]);q.framebufferTextureLayer(q.FRAMEBUFFER,q.COLOR_ATTACHMENT0+$e,it.__webglTexture,te,Ge)}}else if(U!==null&&te!==0){const Ge=We.get(U.texture);q.framebufferTexture2D(q.FRAMEBUFFER,q.COLOR_ATTACHMENT0,q.TEXTURE_2D,Ge.__webglTexture,te)}C=-1},this.readRenderTargetPixels=function(U,Q,te,ne,Z,Be,Oe,Fe=0){if(!(U&&U.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Ge=We.get(U).__webglFramebuffer;if(U.isWebGLCubeRenderTarget&&Oe!==void 0&&(Ge=Ge[Oe]),Ge){Ce.bindFramebuffer(q.FRAMEBUFFER,Ge);try{const $e=U.textures[Fe],it=$e.format,nt=$e.type;if(!Re.textureFormatReadable(it)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Re.textureTypeReadable(nt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Q>=0&&Q<=U.width-ne&&te>=0&&te<=U.height-Z&&(U.textures.length>1&&q.readBuffer(q.COLOR_ATTACHMENT0+Fe),q.readPixels(Q,te,ne,Z,st.convert(it),st.convert(nt),Be))}finally{const $e=R!==null?We.get(R).__webglFramebuffer:null;Ce.bindFramebuffer(q.FRAMEBUFFER,$e)}}},this.readRenderTargetPixelsAsync=async function(U,Q,te,ne,Z,Be,Oe,Fe=0){if(!(U&&U.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Ge=We.get(U).__webglFramebuffer;if(U.isWebGLCubeRenderTarget&&Oe!==void 0&&(Ge=Ge[Oe]),Ge)if(Q>=0&&Q<=U.width-ne&&te>=0&&te<=U.height-Z){Ce.bindFramebuffer(q.FRAMEBUFFER,Ge);const $e=U.textures[Fe],it=$e.format,nt=$e.type;if(!Re.textureFormatReadable(it))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Re.textureTypeReadable(nt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const gt=q.createBuffer();q.bindBuffer(q.PIXEL_PACK_BUFFER,gt),q.bufferData(q.PIXEL_PACK_BUFFER,Be.byteLength,q.STREAM_READ),U.textures.length>1&&q.readBuffer(q.COLOR_ATTACHMENT0+Fe),q.readPixels(Q,te,ne,Z,st.convert(it),st.convert(nt),0);const Dt=R!==null?We.get(R).__webglFramebuffer:null;Ce.bindFramebuffer(q.FRAMEBUFFER,Dt);const Mt=q.fenceSync(q.SYNC_GPU_COMMANDS_COMPLETE,0);return q.flush(),await Bq(q,Mt,4),q.bindBuffer(q.PIXEL_PACK_BUFFER,gt),q.getBufferSubData(q.PIXEL_PACK_BUFFER,0,Be),q.deleteBuffer(gt),q.deleteSync(Mt),Be}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(U,Q=null,te=0){const ne=Math.pow(2,-te),Z=Math.floor(U.image.width*ne),Be=Math.floor(U.image.height*ne),Oe=Q!==null?Q.x:0,Fe=Q!==null?Q.y:0;Ze.setTexture2D(U,0),q.copyTexSubImage2D(q.TEXTURE_2D,te,0,0,Oe,Fe,Z,Be),Ce.unbindTexture()};const Pe=q.createFramebuffer(),Qe=q.createFramebuffer();this.copyTextureToTexture=function(U,Q,te=null,ne=null,Z=0,Be=null){Be===null&&(Z!==0?(Pd("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),Be=Z,Z=0):Be=0);let Oe,Fe,Ge,$e,it,nt,gt,Dt,Mt;const jt=U.isCompressedTexture?U.mipmaps[Be]:U.image;if(te!==null)Oe=te.max.x-te.min.x,Fe=te.max.y-te.min.y,Ge=te.isBox3?te.max.z-te.min.z:1,$e=te.min.x,it=te.min.y,nt=te.isBox3?te.min.z:0;else{const qn=Math.pow(2,-Z);Oe=Math.floor(jt.width*qn),Fe=Math.floor(jt.height*qn),U.isDataArrayTexture?Ge=jt.depth:U.isData3DTexture?Ge=Math.floor(jt.depth*qn):Ge=1,$e=0,it=0,nt=0}ne!==null?(gt=ne.x,Dt=ne.y,Mt=ne.z):(gt=0,Dt=0,Mt=0);const _t=st.convert(Q.format),ot=st.convert(Q.type);let Kt;Q.isData3DTexture?(Ze.setTexture3D(Q,0),Kt=q.TEXTURE_3D):Q.isDataArrayTexture||Q.isCompressedArrayTexture?(Ze.setTexture2DArray(Q,0),Kt=q.TEXTURE_2D_ARRAY):(Ze.setTexture2D(Q,0),Kt=q.TEXTURE_2D),q.pixelStorei(q.UNPACK_FLIP_Y_WEBGL,Q.flipY),q.pixelStorei(q.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Q.premultiplyAlpha),q.pixelStorei(q.UNPACK_ALIGNMENT,Q.unpackAlignment);const Gt=q.getParameter(q.UNPACK_ROW_LENGTH),pn=q.getParameter(q.UNPACK_IMAGE_HEIGHT),Xt=q.getParameter(q.UNPACK_SKIP_PIXELS),ln=q.getParameter(q.UNPACK_SKIP_ROWS),tn=q.getParameter(q.UNPACK_SKIP_IMAGES);q.pixelStorei(q.UNPACK_ROW_LENGTH,jt.width),q.pixelStorei(q.UNPACK_IMAGE_HEIGHT,jt.height),q.pixelStorei(q.UNPACK_SKIP_PIXELS,$e),q.pixelStorei(q.UNPACK_SKIP_ROWS,it),q.pixelStorei(q.UNPACK_SKIP_IMAGES,nt);const yt=U.isDataArrayTexture||U.isData3DTexture,An=Q.isDataArrayTexture||Q.isData3DTexture;if(U.isDepthTexture){const qn=We.get(U),cn=We.get(Q),Sn=We.get(qn.__renderTarget),ca=We.get(cn.__renderTarget);Ce.bindFramebuffer(q.READ_FRAMEBUFFER,Sn.__webglFramebuffer),Ce.bindFramebuffer(q.DRAW_FRAMEBUFFER,ca.__webglFramebuffer);for(let qr=0;qr<Ge;qr++)yt&&(q.framebufferTextureLayer(q.READ_FRAMEBUFFER,q.COLOR_ATTACHMENT0,We.get(U).__webglTexture,Z,nt+qr),q.framebufferTextureLayer(q.DRAW_FRAMEBUFFER,q.COLOR_ATTACHMENT0,We.get(Q).__webglTexture,Be,Mt+qr)),q.blitFramebuffer($e,it,Oe,Fe,gt,Dt,Oe,Fe,q.DEPTH_BUFFER_BIT,q.NEAREST);Ce.bindFramebuffer(q.READ_FRAMEBUFFER,null),Ce.bindFramebuffer(q.DRAW_FRAMEBUFFER,null)}else if(Z!==0||U.isRenderTargetTexture||We.has(U)){const qn=We.get(U),cn=We.get(Q);Ce.bindFramebuffer(q.READ_FRAMEBUFFER,Pe),Ce.bindFramebuffer(q.DRAW_FRAMEBUFFER,Qe);for(let Sn=0;Sn<Ge;Sn++)yt?q.framebufferTextureLayer(q.READ_FRAMEBUFFER,q.COLOR_ATTACHMENT0,qn.__webglTexture,Z,nt+Sn):q.framebufferTexture2D(q.READ_FRAMEBUFFER,q.COLOR_ATTACHMENT0,q.TEXTURE_2D,qn.__webglTexture,Z),An?q.framebufferTextureLayer(q.DRAW_FRAMEBUFFER,q.COLOR_ATTACHMENT0,cn.__webglTexture,Be,Mt+Sn):q.framebufferTexture2D(q.DRAW_FRAMEBUFFER,q.COLOR_ATTACHMENT0,q.TEXTURE_2D,cn.__webglTexture,Be),Z!==0?q.blitFramebuffer($e,it,Oe,Fe,gt,Dt,Oe,Fe,q.COLOR_BUFFER_BIT,q.NEAREST):An?q.copyTexSubImage3D(Kt,Be,gt,Dt,Mt+Sn,$e,it,Oe,Fe):q.copyTexSubImage2D(Kt,Be,gt,Dt,$e,it,Oe,Fe);Ce.bindFramebuffer(q.READ_FRAMEBUFFER,null),Ce.bindFramebuffer(q.DRAW_FRAMEBUFFER,null)}else An?U.isDataTexture||U.isData3DTexture?q.texSubImage3D(Kt,Be,gt,Dt,Mt,Oe,Fe,Ge,_t,ot,jt.data):Q.isCompressedArrayTexture?q.compressedTexSubImage3D(Kt,Be,gt,Dt,Mt,Oe,Fe,Ge,_t,jt.data):q.texSubImage3D(Kt,Be,gt,Dt,Mt,Oe,Fe,Ge,_t,ot,jt):U.isDataTexture?q.texSubImage2D(q.TEXTURE_2D,Be,gt,Dt,Oe,Fe,_t,ot,jt.data):U.isCompressedTexture?q.compressedTexSubImage2D(q.TEXTURE_2D,Be,gt,Dt,jt.width,jt.height,_t,jt.data):q.texSubImage2D(q.TEXTURE_2D,Be,gt,Dt,Oe,Fe,_t,ot,jt);q.pixelStorei(q.UNPACK_ROW_LENGTH,Gt),q.pixelStorei(q.UNPACK_IMAGE_HEIGHT,pn),q.pixelStorei(q.UNPACK_SKIP_PIXELS,Xt),q.pixelStorei(q.UNPACK_SKIP_ROWS,ln),q.pixelStorei(q.UNPACK_SKIP_IMAGES,tn),Be===0&&Q.generateMipmaps&&q.generateMipmap(Kt),Ce.unbindTexture()},this.initRenderTarget=function(U){We.get(U).__webglFramebuffer===void 0&&Ze.setupRenderTarget(U)},this.initTexture=function(U){U.isCubeTexture?Ze.setTextureCube(U,0):U.isData3DTexture?Ze.setTexture3D(U,0):U.isDataArrayTexture||U.isCompressedArrayTexture?Ze.setTexture2DArray(U,0):Ze.setTexture2D(U,0),Ce.unbindTexture()},this.resetState=function(){M=0,I=0,R=null,Ce.reset(),Ye.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Mr}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=rn._getDrawingBufferColorSpace(e),t.unpackColorSpace=rn._getUnpackColorSpace()}}const Qoe=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:AL,AddEquation:No,AddOperation:wL,AdditiveAnimationBlendMode:KS,AdditiveBlending:dw,AgXToneMapping:TL,AlphaFormat:qS,AlwaysCompare:HL,AlwaysDepth:pg,AlwaysStencilFunc:vw,AmbientLight:Uk,AnimationAction:qk,AnimationClip:Bd,AnimationLoader:hY,AnimationMixer:BY,AnimationObjectGroup:NY,AnimationUtils:aY,ArcCurve:ak,ArrayCamera:Gk,ArrowHelper:d9,AttachedBindMode:mw,Audio:Wk,AudioAnalyser:TY,AudioContext:yx,AudioListener:EY,AudioLoader:wY,AxesHelper:f9,BackSide:mi,BasicDepthPacking:ra,BasicShadowMap:B6,BatchedMesh:nk,Bone:nx,BooleanKeyframeTrack:Gl,Box2:$Y,Box3:Hi,Box3Helper:u9,BoxGeometry:Hl,BoxHelper:c9,BufferAttribute:_n,BufferGeometry:Ut,BufferGeometryLoader:Hk,ByteType:_v,Cache:Ps,Camera:sf,CameraHelper:l9,CanvasTexture:IX,CapsuleGeometry:kv,CatmullRomCurve3:lk,CineonToneMapping:EL,CircleGeometry:Uv,ClampToEdgeWrapping:ui,Clock:Vk,Color:at,ColorKeyframeTrack:gx,ColorManagement:rn,CompressedArrayTexture:CX,CompressedCubeTexture:RX,CompressedTexture:Ov,CompressedTextureLoader:dY,ConeGeometry:lf,ConstantAlphaFactor:_L,ConstantColorFactor:gL,Controls:m9,CubeCamera:KL,CubeReflectionMapping:mo,CubeRefractionMapping:Zo,CubeTexture:of,CubeTextureLoader:fY,CubeUVReflectionMapping:Ru,CubicBezierCurve:ox,CubicBezierCurve3:ck,CubicInterpolant:Ck,CullFaceBack:hw,CullFaceFront:eL,CullFaceFrontBack:F6,CullFaceNone:ZO,Curve:ms,CurvePath:hk,CustomBlending:nL,CustomToneMapping:ML,CylinderGeometry:af,Cylindrical:KY,Data3DTexture:Mv,DataArrayTexture:Av,DataTexture:ds,DataTextureLoader:vx,DataUtils:ll,DecrementStencilOp:Q6,DecrementWrapStencilOp:eq,DefaultLoadingManager:Dk,DepthFormat:pu,DepthStencilFormat:Il,DepthTexture:Lv,DetachedBindMode:RL,DirectionalLight:kk,DirectionalLightHelper:a9,DiscreteInterpolant:Rk,DodecahedronGeometry:Nv,DoubleSide:Ji,DstAlphaFactor:hL,DstColorFactor:fL,DynamicCopyUsage:mq,DynamicDrawUsage:cq,DynamicReadUsage:dq,EdgesGeometry:ok,EllipseCurve:Fv,EqualCompare:NL,EqualDepth:gg,EqualStencilFunc:rq,EquirectangularReflectionMapping:xd,EquirectangularRefractionMapping:Ed,Euler:ps,EventDispatcher:Pr,ExternalTexture:rx,ExtrudeGeometry:Bv,FileLoader:Rr,Float16BufferAttribute:oX,Float32BufferAttribute:mt,FloatType:Gn,Fog:Rv,FogExp2:Cv,FramebufferTexture:TX,FrontSide:Us,Frustum:Du,FrustumArray:Pv,GLBufferAttribute:WY,GLSL1:vq,GLSL3:_w,GreaterCompare:FL,GreaterDepth:_g,GreaterEqualCompare:zL,GreaterEqualDepth:vg,GreaterEqualStencilFunc:lq,GreaterStencilFunc:oq,GridHelper:s9,Group:jc,HalfFloatType:Ii,HemisphereLight:Pk,HemisphereLightHelper:r9,IcosahedronGeometry:cf,ImageBitmapLoader:bY,ImageLoader:zd,ImageUtils:WL,IncrementStencilOp:J6,IncrementWrapStencilOp:Z6,InstancedBufferAttribute:_u,InstancedBufferGeometry:zk,InstancedInterleavedBuffer:VY,InstancedMesh:tk,Int16BufferAttribute:rX,Int32BufferAttribute:sX,Int8BufferAttribute:tX,IntType:tf,InterleavedBuffer:Iv,InterleavedBufferAttribute:Dl,Interpolant:df,InterpolateDiscrete:Td,InterpolateLinear:Yg,InterpolateSmooth:Bm,InterpolationSamplingMode:bq,InterpolationSamplingType:yq,InvertStencilOp:tq,KeepStencilOp:Qa,KeyframeTrack:Wr,LOD:ZL,LatheGeometry:zv,Layers:Tv,LessCompare:UL,LessDepth:mg,LessEqualCompare:$S,LessEqualDepth:Cl,LessEqualStencilFunc:sq,LessStencilFunc:iq,Light:la,LightProbe:Bk,Line:ea,Line3:ZY,LineBasicMaterial:nr,LineCurve:ax,LineCurve3:uk,LineDashedMaterial:Ak,LineLoop:ik,LineSegments:Ns,LinearFilter:Zt,LinearInterpolant:mx,LinearMipMapLinearFilter:gw,LinearMipMapNearestFilter:G6,LinearMipmapLinearFilter:Ds,LinearMipmapNearestFilter:Zh,LinearSRGBColorSpace:Vr,LinearToneMapping:SL,LinearTransfer:Rd,Loader:ir,LoaderUtils:xw,LoadingManager:pf,LoopOnce:IL,LoopPingPong:PL,LoopRepeat:DL,MOUSE:U6,Material:Ti,MaterialLoader:Xv,MathUtils:Nq,Matrix2:Sx,Matrix3:kt,Matrix4:Rt,MaxEquation:oL,Mesh:Fn,MeshBasicMaterial:vo,MeshDepthMaterial:dx,MeshDistanceMaterial:fx,MeshLambertMaterial:xk,MeshMatcapMaterial:Ek,MeshNormalMaterial:Sk,MeshPhongMaterial:bk,MeshPhysicalMaterial:yk,MeshStandardMaterial:hx,MeshToonMaterial:wk,MinEquation:sL,MirroredRepeatWrapping:Md,MixOperation:bL,MultiplyBlending:pw,MultiplyOperation:ef,NearestFilter:gi,NearestMipMapLinearFilter:H6,NearestMipMapNearestFilter:z6,NearestMipmapLinearFilter:Vc,NearestMipmapNearestFilter:VS,NeutralToneMapping:CL,NeverCompare:kL,NeverDepth:fg,NeverStencilFunc:nq,NoBlending:Ai,NoColorSpace:as,NoToneMapping:co,NormalAnimationBlendMode:Ev,NormalBlending:_l,NotEqualCompare:BL,NotEqualDepth:yg,NotEqualStencilFunc:aq,NumberKeyframeTrack:Nd,Object3D:an,ObjectLoader:_Y,ObjectSpaceNormalMap:LL,OctahedronGeometry:uf,OneFactor:lL,OneMinusConstantAlphaFactor:yL,OneMinusConstantColorFactor:vL,OneMinusDstAlphaFactor:dL,OneMinusDstColorFactor:pL,OneMinusSrcAlphaFactor:dg,OneMinusSrcColorFactor:uL,OrthographicCamera:mf,PCFShadowMap:GS,PCFSoftShadowMap:tL,PMREMGenerator:Mw,Path:Qg,PerspectiveCamera:Ei,Plane:ko,PlaneGeometry:aa,PlaneHelper:h9,PointLight:Lk,PointLightHelper:n9,Points:rk,PointsMaterial:ix,PolarGridHelper:o9,PolyhedronGeometry:oa,PositionalAudio:MY,PropertyBinding:on,PropertyMixer:jk,QuadraticBezierCurve:lx,QuadraticBezierCurve3:cx,Quaternion:fr,QuaternionKeyframeTrack:ff,QuaternionLinearInterpolant:Ik,RED_GREEN_RGTC2_Format:qg,RED_RGTC1_Format:Wg,REVISION:ia,RGBADepthPacking:OL,RGBAFormat:hi,RGBAIntegerFormat:xv,RGBA_ASTC_10x10_Format:Fg,RGBA_ASTC_10x5_Format:kg,RGBA_ASTC_10x6_Format:Ug,RGBA_ASTC_10x8_Format:Ng,RGBA_ASTC_12x10_Format:Bg,RGBA_ASTC_12x12_Format:zg,RGBA_ASTC_4x4_Format:Tg,RGBA_ASTC_5x4_Format:Cg,RGBA_ASTC_5x5_Format:Rg,RGBA_ASTC_6x5_Format:Ig,RGBA_ASTC_6x6_Format:Dg,RGBA_ASTC_8x5_Format:Pg,RGBA_ASTC_8x6_Format:Og,RGBA_ASTC_8x8_Format:Lg,RGBA_BPTC_Format:Hg,RGBA_ETC2_EAC_Format:Mg,RGBA_PVRTC_2BPPV1_Format:xg,RGBA_PVRTC_4BPPV1_Format:Sg,RGBA_S3TC_DXT1_Format:td,RGBA_S3TC_DXT3_Format:nd,RGBA_S3TC_DXT5_Format:id,RGBDepthPacking:X6,RGBFormat:XS,RGBIntegerFormat:V6,RGB_BPTC_SIGNED_Format:Gg,RGB_BPTC_UNSIGNED_Format:Vg,RGB_ETC1_Format:Eg,RGB_ETC2_Format:Ag,RGB_PVRTC_2BPPV1_Format:wg,RGB_PVRTC_4BPPV1_Format:bg,RGB_S3TC_DXT1_Format:ed,RGDepthPacking:Y6,RGFormat:YS,RGIntegerFormat:Sv,RawShaderMaterial:_k,Ray:Iu,Raycaster:jY,RectAreaLight:Nk,RedFormat:nf,RedIntegerFormat:rf,ReinhardToneMapping:xL,RenderTarget:QS,RenderTarget3D:zY,RepeatWrapping:Ad,ReplaceStencilOp:$6,ReverseSubtractEquation:rL,RingGeometry:Hv,SIGNED_RED_GREEN_RGTC2_Format:Xg,SIGNED_RED_RGTC1_Format:jg,SRGBColorSpace:hn,SRGBTransfer:wn,Scene:Od,ShaderChunk:zt,ShaderLib:os,ShaderMaterial:Wn,ShadowMaterial:vk,Shape:bl,ShapeGeometry:Gv,ShapePath:p9,ShapeUtils:ls,ShortType:yv,Skeleton:Dv,SkeletonHelper:t9,SkinnedMesh:ek,Source:Ho,Sphere:Pi,SphereGeometry:hf,Spherical:YY,SphericalHarmonics3:Fk,SplineCurve:ux,SpotLight:Ok,SpotLightHelper:e9,Sprite:QL,SpriteMaterial:tx,SrcAlphaFactor:hg,SrcAlphaSaturateFactor:mL,SrcColorFactor:cL,StaticCopyUsage:pq,StaticDrawUsage:Id,StaticReadUsage:hq,StereoCamera:SY,StreamCopyUsage:gq,StreamDrawUsage:uq,StreamReadUsage:fq,StringKeyframeTrack:Vl,SubtractEquation:iL,SubtractiveBlending:fw,TOUCH:N6,TangentSpaceNormalMap:sa,TetrahedronGeometry:Vv,Texture:En,TextureLoader:pY,TextureUtils:b9,Timer:qY,TimestampQuery:_q,TorusGeometry:Wv,TorusKnotGeometry:jv,Triangle:lr,TriangleFanDrawMode:q6,TriangleStripDrawMode:j6,TrianglesDrawMode:W6,TubeGeometry:qv,UVMapping:Qo,Uint16BufferAttribute:ZS,Uint32BufferAttribute:ex,Uint8BufferAttribute:nX,Uint8ClampedBufferAttribute:iX,Uniform:Vt,UniformsGroup:GY,UniformsLib:rt,UniformsUtils:YL,UnsignedByteType:Zn,UnsignedInt101111Type:jS,UnsignedInt248Type:Rl,UnsignedInt5999Type:WS,UnsignedIntType:fs,UnsignedShort4444Type:bv,UnsignedShort5551Type:wv,UnsignedShortType:fu,VSMShadowMap:Ts,Vector2:Ue,Vector3:K,Vector4:Jt,VectorKeyframeTrack:Fd,VideoFrameTexture:MX,VideoTexture:sk,WebGL3DRenderTarget:Wq,WebGLArrayRenderTarget:Vq,WebGLCoordinateSystem:Mr,WebGLCubeRenderTarget:$L,WebGLRenderTarget:ni,WebGLRenderer:eU,WebGLUtils:Zk,WebGPUCoordinateSystem:mu,WebXRController:Hm,WireframeGeometry:gk,WrapAroundEnding:Cd,ZeroCurvatureEnding:ol,ZeroFactor:aL,ZeroSlopeEnding:al,ZeroStencilOp:K6,createCanvasElement:VL},Symbol.toStringTag,{value:"Module"}));var $0={exports:{}},J0={},Q0={exports:{}},Z0={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XR;function tQ(){if(XR)return Z0;XR=1;var n=pD();function e(d,f){return d===f&&(d!==0||1/d===1/f)||d!==d&&f!==f}var t=typeof Object.is=="function"?Object.is:e,i=n.useState,r=n.useEffect,s=n.useLayoutEffect,o=n.useDebugValue;function a(d,f){var m=f(),v=i({inst:{value:m,getSnapshot:f}}),g=v[0].inst,y=v[1];return s(function(){g.value=m,g.getSnapshot=f,l(g)&&y({inst:g})},[d,m,f]),r(function(){return l(g)&&y({inst:g}),d(function(){l(g)&&y({inst:g})})},[d]),o(m),m}function l(d){var f=d.getSnapshot;d=d.value;try{var m=f();return!t(d,m)}catch(v){return!0}}function c(d,f){return f()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?c:a;return Z0.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:u,Z0}var YR;function nQ(){return YR||(YR=1,Q0.exports=tQ()),Q0.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KR;function iQ(){if(KR)return J0;KR=1;var n=pD(),e=nQ();function t(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var i=typeof Object.is=="function"?Object.is:t,r=e.useSyncExternalStore,s=n.useRef,o=n.useEffect,a=n.useMemo,l=n.useDebugValue;return J0.useSyncExternalStoreWithSelector=function(c,u,d,f,m){var v=s(null);if(v.current===null){var g={hasValue:!1,value:null};v.current=g}else g=v.current;v=a(function(){function b(M){if(!S){if(S=!0,x=M,M=f(M),m!==void 0&&g.hasValue){var I=g.value;if(m(I,M))return A=I}return A=M}if(I=A,i(x,M))return I;var R=f(M);return m!==void 0&&m(I,R)?(x=M,I):(x=M,A=R)}var S=!1,x,A,E=d===void 0?null:d;return[function(){return b(u())},E===null?void 0:function(){return b(E())}]},[u,d,f,m]);var y=r(c,v[0],v[1]);return o(function(){g.hasValue=!0,g.value=y},[y]),l(y),y},J0}var $R;function rQ(){return $R||($R=1,$0.exports=iQ()),$0.exports}var sQ=rQ();const oQ=Kw(sQ),JR=n=>{let e;const t=new Set,i=(c,u)=>{const d=typeof c=="function"?c(e):c;if(!Object.is(d,e)){const f=e;e=(u!=null?u:typeof d!="object"||d===null)?d:Object.assign({},e,d),t.forEach(m=>m(e,f))}},r=()=>e,a={setState:i,getState:r,getInitialState:()=>l,subscribe:c=>(t.add(c),()=>t.delete(c))},l=e=n(i,r,a);return a},aQ=(n=>n?JR(n):JR),{useSyncExternalStoreWithSelector:lQ}=oQ,cQ=n=>n;function uQ(n,e=cQ,t){const i=lQ(n.subscribe,n.getState,n.getInitialState,e,t);return z3.useDebugValue(i),i}const QR=(n,e)=>{const t=aQ(n),i=(r,s=e)=>uQ(t,r,s);return Object.assign(i,t),i},Zoe=((n,e)=>n?QR(n,e):QR);function tU(n,e,t){if(!n)return;if(t(n)===!0)return n;let i=e?n.return:n.child;for(;i;){const r=tU(i,e,t);if(r)return r;i=e?null:i.sibling}}function nU(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch(e){return n}}const Ex=nU(Bi.createContext(null));class hQ extends Bi.Component{render(){return Bi.createElement(Ex.Provider,{value:this._reactInternals},this.props.children)}}function dQ(){const n=Bi.useContext(Ex);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=Bi.useId();return Bi.useMemo(()=>{for(const t of[n,n==null?void 0:n.alternate]){if(!t)continue;const i=tU(t,!1,r=>{let s=r.memoizedState;for(;s;){if(s.memoizedState===e)return!0;s=s.next}});if(i)return i}},[n,e])}const fQ=Symbol.for("react.context"),pQ=n=>n!==null&&typeof n=="object"&&"$$typeof"in n&&n.$$typeof===fQ;function mQ(){const n=dQ(),[e]=Bi.useState(()=>new Map);e.clear();let t=n;for(;t;){const i=t.type;pQ(i)&&i!==Ex&&!e.has(i)&&e.set(i,Bi.use(nU(i))),t=t.return}return e}function eae(){const n=mQ();return Bi.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>i=>Bi.createElement(e,null,Bi.createElement(t.Provider,{...i,value:n.get(t)})),e=>Bi.createElement(hQ,{...e})),[n])}function ZR(){return ZR=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},ZR.apply(null,arguments)}const iU=parseInt(ia.replace(/\D+/g,""));var Fr=Uint8Array,Go=Uint16Array,Cw=Uint32Array,rU=new Fr([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),sU=new Fr([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),gQ=new Fr([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),oU=function(n,e){for(var t=new Go(31),i=0;i<31;++i)t[i]=e+=1<<n[i-1];for(var r=new Cw(t[30]),i=1;i<30;++i)for(var s=t[i];s<t[i+1];++s)r[s]=s-t[i]<<5|i;return[t,r]},aU=oU(rU,2),lU=aU[0],vQ=aU[1];lU[28]=258,vQ[258]=28;var _Q=oU(sU,0),yQ=_Q[0],Rw=new Go(32768);for(var On=0;On<32768;++On){var Io=(On&43690)>>>1|(On&21845)<<1;Io=(Io&52428)>>>2|(Io&13107)<<2,Io=(Io&61680)>>>4|(Io&3855)<<4,Rw[On]=((Io&65280)>>>8|(Io&255)<<8)>>>1}var ad=(function(n,e,t){for(var i=n.length,r=0,s=new Go(e);r<i;++r)++s[n[r]-1];var o=new Go(e);for(r=0;r<e;++r)o[r]=o[r-1]+s[r-1]<<1;var a;if(t){a=new Go(1<<e);var l=15-e;for(r=0;r<i;++r)if(n[r])for(var c=r<<4|n[r],u=e-n[r],d=o[n[r]-1]++<<u,f=d|(1<<u)-1;d<=f;++d)a[Rw[d]>>>l]=c}else for(a=new Go(i),r=0;r<i;++r)n[r]&&(a[r]=Rw[o[n[r]-1]++]>>>15-n[r]);return a}),gf=new Fr(288);for(var On=0;On<144;++On)gf[On]=8;for(var On=144;On<256;++On)gf[On]=9;for(var On=256;On<280;++On)gf[On]=7;for(var On=280;On<288;++On)gf[On]=8;var cU=new Fr(32);for(var On=0;On<32;++On)cU[On]=5;var bQ=ad(gf,9,1),wQ=ad(cU,5,1),eb=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},ns=function(n,e,t){var i=e/8|0;return(n[i]|n[i+1]<<8)>>(e&7)&t},tb=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},SQ=function(n){return(n/8|0)+(n&7&&1)},xQ=function(n,e,t){(t==null||t>n.length)&&(t=n.length);var i=new(n instanceof Go?Go:n instanceof Cw?Cw:Fr)(t-e);return i.set(n.subarray(e,t)),i},EQ=function(n,e,t){var i=n.length;if(!i||t&&!t.l&&i<5)return e||new Fr(0);var r=!e||t,s=!t||t.i;t||(t={}),e||(e=new Fr(i*3));var o=function(le){var ee=e.length;if(le>ee){var de=new Fr(Math.max(ee*2,le));de.set(e),e=de}},a=t.f||0,l=t.p||0,c=t.b||0,u=t.l,d=t.d,f=t.m,m=t.n,v=i*8;do{if(!u){t.f=a=ns(n,l,1);var g=ns(n,l+1,3);if(l+=3,g)if(g==1)u=bQ,d=wQ,f=9,m=5;else if(g==2){var x=ns(n,l,31)+257,A=ns(n,l+10,15)+4,E=x+ns(n,l+5,31)+1;l+=14;for(var M=new Fr(E),I=new Fr(19),R=0;R<A;++R)I[gQ[R]]=ns(n,l+R*3,7);l+=A*3;for(var C=eb(I),D=(1<<C)-1,L=ad(I,C,1),R=0;R<E;){var z=L[ns(n,l,D)];l+=z&15;var y=z>>>4;if(y<16)M[R++]=y;else{var G=0,H=0;for(y==16?(H=3+ns(n,l,3),l+=2,G=M[R-1]):y==17?(H=3+ns(n,l,7),l+=3):y==18&&(H=11+ns(n,l,127),l+=7);H--;)M[R++]=G}}var J=M.subarray(0,x),k=M.subarray(x);f=eb(J),m=eb(k),u=ad(J,f,1),d=ad(k,m,1)}else throw"invalid block type";else{var y=SQ(l)+4,b=n[y-4]|n[y-3]<<8,S=y+b;if(S>i){if(s)throw"unexpected EOF";break}r&&o(c+b),e.set(n.subarray(y,S),c),t.b=c+=b,t.p=l=S*8;continue}if(l>v){if(s)throw"unexpected EOF";break}}r&&o(c+131072);for(var X=(1<<f)-1,W=(1<<m)-1,ie=l;;ie=l){var G=u[tb(n,l)&X],se=G>>>4;if(l+=G&15,l>v){if(s)throw"unexpected EOF";break}if(!G)throw"invalid length/literal";if(se<256)e[c++]=se;else if(se==256){ie=l,u=null;break}else{var ye=se-254;if(se>264){var R=se-257,Ne=rU[R];ye=ns(n,l,(1<<Ne)-1)+lU[R],l+=Ne}var He=d[tb(n,l)&W],fe=He>>>4;if(!He)throw"invalid distance";l+=He&15;var k=yQ[fe];if(fe>3){var Ne=sU[fe];k+=tb(n,l)&(1<<Ne)-1,l+=Ne}if(l>v){if(s)throw"unexpected EOF";break}r&&o(c+131072);for(var he=c+ye;c<he;c+=4)e[c]=e[c-k],e[c+1]=e[c+1-k],e[c+2]=e[c+2-k],e[c+3]=e[c+3-k];c=he}}t.l=u,t.p=ie,t.b=c,u&&(a=1,t.m=f,t.d=d,t.n=m)}while(!a);return c==e.length?e:xQ(e,0,c)},AQ=new Fr(0),MQ=function(n){if((n[0]&15)!=8||n[0]>>>4>7||(n[0]<<8|n[1])%31)throw"invalid zlib data";if(n[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function Em(n,e){return EQ((MQ(n),n.subarray(2,-4)),e)}var TQ=typeof TextDecoder<"u"&&new TextDecoder,CQ=0;try{TQ.decode(AQ,{stream:!0}),CQ=1}catch(n){}const RQ=n=>n&&n.isCubeTexture;class tae extends Fn{constructor(e,t){var i,r;const s=RQ(e),a=((r=s?(i=e.image[0])==null?void 0:i.width:e.image.width)!=null?r:1024)/4,l=Math.floor(Math.log2(a)),c=Math.pow(2,l),u=3*Math.max(c,112),d=4*c,f=[s?"#define ENVMAP_TYPE_CUBE":"","#define CUBEUV_TEXEL_WIDTH ".concat(1/u),"#define CUBEUV_TEXEL_HEIGHT ".concat(1/d),"#define CUBEUV_MAX_MIP ".concat(l,".0")],m="\n        varying vec3 vWorldPosition;\n        void main() \n        {\n            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );\n            vWorldPosition = worldPosition.xyz;\n            \n            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n        }\n        ",v=f.join("\n")+"\n        #define ENVMAP_TYPE_CUBE_UV\n        varying vec3 vWorldPosition;\n        uniform float radius;\n        uniform float height;\n        uniform float angle;\n        #ifdef ENVMAP_TYPE_CUBE\n            uniform samplerCube map;\n        #else\n            uniform sampler2D map;\n        #endif\n        // From: https://www.shadertoy.com/view/4tsBD7\n        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) \n        {\n            float d = dot ( rd, n );\n            \n            if( d > 0.0 ) { return 1e6; }\n            \n            vec3  o = ro - c;\n            float t = - dot( n, o ) / d;\n            vec3  q = o + rd * t;\n            \n            return ( dot( q, q ) < r * r ) ? t : 1e6;\n        }\n        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm\n        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) \n        {\n            vec3 oc = ro - ce;\n            float b = dot( oc, rd );\n            float c = dot( oc, oc ) - ra * ra;\n            float h = b * b - c;\n            \n            if( h < 0.0 ) { return -1.0; }\n            \n            h = sqrt( h );\n            \n            return - b + h;\n        }\n        vec3 project() \n        {\n            vec3 p = normalize( vWorldPosition );\n            vec3 camPos = cameraPosition;\n            camPos.y -= height;\n            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );\n            if( intersection > 0.0 ) {\n                \n                vec3 h = vec3( 0.0, - height, 0.0 );\n                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );\n                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;\n            } else {\n                p = vec3( 0.0, 1.0, 0.0 );\n            }\n            return p;\n        }\n        #include <common>\n        #include <cube_uv_reflection_fragment>\n        void main() \n        {\n            vec3 projectedWorldPosition = project();\n            \n            #ifdef ENVMAP_TYPE_CUBE\n                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;\n            #else\n                vec3 direction = normalize( projectedWorldPosition );\n                vec2 uv = equirectUv( direction );\n                vec3 outcolor = texture2D( map, uv ).rgb;\n            #endif\n            gl_FragColor = vec4( outcolor, 1.0 );\n            #include <tonemapping_fragment>\n            #include <".concat(iU>=154?"colorspace_fragment":"encodings_fragment",">\n        }\n        "),g={map:{value:e},height:{value:(t==null?void 0:t.height)||15},radius:{value:(t==null?void 0:t.radius)||100}},y=new cf(1,16),b=new Wn({uniforms:g,fragmentShader:v,vertexShader:m,side:Ji});super(y,b)}set radius(e){this.material.uniforms.radius.value=e}get radius(){return this.material.uniforms.radius.value}set height(e){this.material.uniforms.height.value=e}get height(){return this.material.uniforms.height.value}}class nae extends vx{constructor(e){super(e),this.type=Ii}parse(e){const o=function(R,C){switch(R){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(C||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(C||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(C||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(C||""))}},d=function(R,C,D){C=C||1024;let z=R.pos,G=-1,H=0,J="",k=String.fromCharCode.apply(null,new Uint16Array(R.subarray(z,z+128)));for(;0>(G=k.indexOf("\n"))&&H<C&&z<R.byteLength;)J+=k,H+=k.length,z+=128,k+=String.fromCharCode.apply(null,new Uint16Array(R.subarray(z,z+128)));return-1<G?(R.pos+=H+G+1,J+k.slice(0,G)):!1},f=function(R){const C=/^#\?(\S+)/,D=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,L=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,z=/^\s*FORMAT=(\S+)\s*$/,G=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,H={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let J,k;for((R.pos>=R.byteLength||!(J=d(R)))&&o(1,"no header found"),(k=J.match(C))||o(3,"bad initial token"),H.valid|=1,H.programtype=k[1],H.string+=J+"\n";J=d(R),J!==!1;){if(H.string+=J+"\n",J.charAt(0)==="#"){H.comments+=J+"\n";continue}if((k=J.match(D))&&(H.gamma=parseFloat(k[1])),(k=J.match(L))&&(H.exposure=parseFloat(k[1])),(k=J.match(z))&&(H.valid|=2,H.format=k[1]),(k=J.match(G))&&(H.valid|=4,H.height=parseInt(k[1],10),H.width=parseInt(k[2],10)),H.valid&2&&H.valid&4)break}return H.valid&2||o(3,"missing format specifier"),H.valid&4||o(3,"missing image size specifier"),H},m=function(R,C,D){const L=C;if(L<8||L>32767||R[0]!==2||R[1]!==2||R[2]&128)return new Uint8Array(R);L!==(R[2]<<8|R[3])&&o(3,"wrong scanline width");const z=new Uint8Array(4*C*D);z.length||o(4,"unable to allocate buffer space");let G=0,H=0;const J=4*L,k=new Uint8Array(4),X=new Uint8Array(J);let W=D;for(;W>0&&H<R.byteLength;){H+4>R.byteLength&&o(1),k[0]=R[H++],k[1]=R[H++],k[2]=R[H++],k[3]=R[H++],(k[0]!=2||k[1]!=2||(k[2]<<8|k[3])!=L)&&o(3,"bad rgbe scanline format");let ie=0,se;for(;ie<J&&H<R.byteLength;){se=R[H++];const Ne=se>128;if(Ne&&(se-=128),(se===0||ie+se>J)&&o(3,"bad scanline data"),Ne){const He=R[H++];for(let fe=0;fe<se;fe++)X[ie++]=He}else X.set(R.subarray(H,H+se),ie),ie+=se,H+=se}const ye=L;for(let Ne=0;Ne<ye;Ne++){let He=0;z[G]=X[Ne+He],He+=L,z[G+1]=X[Ne+He],He+=L,z[G+2]=X[Ne+He],He+=L,z[G+3]=X[Ne+He],G+=4}W--}return z},v=function(R,C,D,L){const z=R[C+3],G=Math.pow(2,z-128)/255;D[L+0]=R[C+0]*G,D[L+1]=R[C+1]*G,D[L+2]=R[C+2]*G,D[L+3]=1},g=function(R,C,D,L){const z=R[C+3],G=Math.pow(2,z-128)/255;D[L+0]=ll.toHalfFloat(Math.min(R[C+0]*G,65504)),D[L+1]=ll.toHalfFloat(Math.min(R[C+1]*G,65504)),D[L+2]=ll.toHalfFloat(Math.min(R[C+2]*G,65504)),D[L+3]=ll.toHalfFloat(1)},y=new Uint8Array(e);y.pos=0;const b=f(y),S=b.width,x=b.height,A=m(y.subarray(y.pos),S,x);let E,M,I;switch(this.type){case Gn:I=A.length/4;const R=new Float32Array(I*4);for(let D=0;D<I;D++)v(A,D*4,R,D*4);E=R,M=Gn;break;case Ii:I=A.length/4;const C=new Uint16Array(I*4);for(let D=0;D<I;D++)g(A,D*4,C,D*4);E=C,M=Ii;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:S,height:x,data:E,header:b.string,gamma:b.gamma,exposure:b.exposure,type:M}}setDataType(e){return this.type=e,this}load(e,t,i,r){function s(o,a){switch(o.type){case Gn:case Ii:"colorSpace"in o?o.colorSpace="srgb-linear":o.encoding=3e3,o.minFilter=Zt,o.magFilter=Zt,o.generateMipmaps=!1,o.flipY=!0;break}t&&t(o,a)}return super.load(e,s,i,r)}}const Lh=iU>=152;class iae extends vx{constructor(e){super(e),this.type=Ii}parse(e){const C=Math.pow(2.7182818,2.2);function D(N,j){for(var ae=0,we=0;we<65536;++we)(we==0||N[we>>3]&1<<(we&7))&&(j[ae++]=we);for(var De=ae-1;ae<65536;)j[ae++]=0;return De}function L(N){for(var j=0;j<16384;j++)N[j]={},N[j].len=0,N[j].lit=0,N[j].p=null}const z={l:0,c:0,lc:0};function G(N,j,ae,we,De){for(;ae<N;)j=j<<8|bt(we,De),ae+=8;ae-=N,z.l=j>>ae&(1<<N)-1,z.c=j,z.lc=ae}const H=new Array(59);function J(N){for(var j=0;j<=58;++j)H[j]=0;for(var j=0;j<65537;++j)H[N[j]]+=1;for(var ae=0,j=58;j>0;--j){var we=ae+H[j]>>1;H[j]=ae,ae=we}for(var j=0;j<65537;++j){var De=N[j];De>0&&(N[j]=De|H[De]++<<6)}}function k(N,j,ae,we,De,Pe,Qe){for(var U=ae,Q=0,te=0;De<=Pe;De++){if(U.value-ae.value>we)return!1;G(6,Q,te,N,U);var ne=z.l;if(Q=z.c,te=z.lc,Qe[De]=ne,ne==63){if(U.value-ae.value>we)throw"Something wrong with hufUnpackEncTable";G(8,Q,te,N,U);var Z=z.l+6;if(Q=z.c,te=z.lc,De+Z>Pe+1)throw"Something wrong with hufUnpackEncTable";for(;Z--;)Qe[De++]=0;De--}else if(ne>=59){var Z=ne-59+2;if(De+Z>Pe+1)throw"Something wrong with hufUnpackEncTable";for(;Z--;)Qe[De++]=0;De--}}J(Qe)}function X(N){return N&63}function W(N){return N>>6}function ie(N,j,ae,we){for(;j<=ae;j++){var De=W(N[j]),Pe=X(N[j]);if(De>>Pe)throw"Invalid table entry";if(Pe>14){var Qe=we[De>>Pe-14];if(Qe.len)throw"Invalid table entry";if(Qe.lit++,Qe.p){var U=Qe.p;Qe.p=new Array(Qe.lit);for(var Q=0;Q<Qe.lit-1;++Q)Qe.p[Q]=U[Q]}else Qe.p=new Array(1);Qe.p[Qe.lit-1]=j}else if(Pe)for(var te=0,Q=1<<14-Pe;Q>0;Q--){var Qe=we[(De<<14-Pe)+te];if(Qe.len||Qe.p)throw"Invalid table entry";Qe.len=Pe,Qe.lit=j,te++}}return!0}const se={c:0,lc:0};function ye(N,j,ae,we){N=N<<8|bt(ae,we),j+=8,se.c=N,se.lc=j}const Ne={c:0,lc:0};function He(N,j,ae,we,De,Pe,Qe,U,Q,te){if(N==j){we<8&&(ye(ae,we,De,Qe),ae=se.c,we=se.lc),we-=8;var ne=ae>>we,ne=new Uint8Array([ne])[0];if(Q.value+ne>te)return!1;for(var Z=U[Q.value-1];ne-- >0;)U[Q.value++]=Z}else if(Q.value<te)U[Q.value++]=N;else return!1;Ne.c=ae,Ne.lc=we}function fe(N){return N&65535}function he(N){var j=fe(N);return j>32767?j-65536:j}const le={a:0,b:0};function ee(N,j){var ae=he(N),we=he(j),De=we,Pe=ae+(De&1)+(De>>1),Qe=Pe,U=Pe-De;le.a=Qe,le.b=U}function de(N,j){var ae=fe(N),we=fe(j),De=ae-(we>>1)&65535,Pe=we+De-32768&65535;le.a=Pe,le.b=De}function be(N,j,ae,we,De,Pe,Qe){for(var U=Qe<16384,Q=ae>De?De:ae,te=1,ne;te<=Q;)te<<=1;for(te>>=1,ne=te,te>>=1;te>=1;){for(var Z=0,Be=Z+Pe*(De-ne),Oe=Pe*te,Fe=Pe*ne,Ge=we*te,$e=we*ne,it,nt,gt,Dt;Z<=Be;Z+=Fe){for(var Mt=Z,jt=Z+we*(ae-ne);Mt<=jt;Mt+=$e){var _t=Mt+Ge,ot=Mt+Oe,Kt=ot+Ge;U?(ee(N[Mt+j],N[ot+j]),it=le.a,gt=le.b,ee(N[_t+j],N[Kt+j]),nt=le.a,Dt=le.b,ee(it,nt),N[Mt+j]=le.a,N[_t+j]=le.b,ee(gt,Dt),N[ot+j]=le.a,N[Kt+j]=le.b):(de(N[Mt+j],N[ot+j]),it=le.a,gt=le.b,de(N[_t+j],N[Kt+j]),nt=le.a,Dt=le.b,de(it,nt),N[Mt+j]=le.a,N[_t+j]=le.b,de(gt,Dt),N[ot+j]=le.a,N[Kt+j]=le.b)}if(ae&te){var ot=Mt+Oe;U?ee(N[Mt+j],N[ot+j]):de(N[Mt+j],N[ot+j]),it=le.a,N[ot+j]=le.b,N[Mt+j]=it}}if(De&te)for(var Mt=Z,jt=Z+we*(ae-ne);Mt<=jt;Mt+=$e){var _t=Mt+Ge;U?ee(N[Mt+j],N[_t+j]):de(N[Mt+j],N[_t+j]),it=le.a,N[_t+j]=le.b,N[Mt+j]=it}ne=te,te>>=1}return Z}function oe(N,j,ae,we,De,Pe,Qe,U,Q,te){for(var ne=0,Z=0,Be=U,Oe=Math.trunc(De.value+(Pe+7)/8);De.value<Oe;)for(ye(ne,Z,ae,De),ne=se.c,Z=se.lc;Z>=14;){var Fe=ne>>Z-14&16383,Ge=j[Fe];if(Ge.len)Z-=Ge.len,He(Ge.lit,Qe,ne,Z,ae,we,De,Q,te,Be),ne=Ne.c,Z=Ne.lc;else{if(!Ge.p)throw"hufDecode issues";var $e;for($e=0;$e<Ge.lit;$e++){for(var it=X(N[Ge.p[$e]]);Z<it&&De.value<Oe;)ye(ne,Z,ae,De),ne=se.c,Z=se.lc;if(Z>=it&&W(N[Ge.p[$e]])==(ne>>Z-it&(1<<it)-1)){Z-=it,He(Ge.p[$e],Qe,ne,Z,ae,we,De,Q,te,Be),ne=Ne.c,Z=Ne.lc;break}}if($e==Ge.lit)throw"hufDecode issues"}}var nt=8-Pe&7;for(ne>>=nt,Z-=nt;Z>0;){var Ge=j[ne<<14-Z&16383];if(Ge.len)Z-=Ge.len,He(Ge.lit,Qe,ne,Z,ae,we,De,Q,te,Be),ne=Ne.c,Z=Ne.lc;else throw"hufDecode issues"}return!0}function ge(N,j,ae,we,De,Pe){var Qe={value:0},U=ae.value,Q=Je(j,ae),te=Je(j,ae);ae.value+=4;var ne=Je(j,ae);if(ae.value+=4,Q<0||Q>=65537||te<0||te>=65537)throw"Something wrong with HUF_ENCSIZE";var Z=new Array(65537),Be=new Array(16384);L(Be);var Oe=we-(ae.value-U);if(k(N,j,ae,Oe,Q,te,Z),ne>8*(we-(ae.value-U)))throw"Something wrong with hufUncompress";ie(Z,Q,te,Be),oe(Z,Be,N,j,ae,ne,te,Pe,De,Qe)}function Se(N,j,ae){for(var we=0;we<ae;++we)j[we]=N[j[we]]}function q(N){for(var j=1;j<N.length;j++){var ae=N[j-1]+N[j]-128;N[j]=ae}}function me(N,j){for(var ae=0,we=Math.floor((N.length+1)/2),De=0,Pe=N.length-1;!(De>Pe||(j[De++]=N[ae++],De>Pe));)j[De++]=N[we++]}function xe(N){for(var j=N.byteLength,ae=new Array,we=0,De=new DataView(N);j>0;){var Pe=De.getInt8(we++);if(Pe<0){var Qe=-Pe;j-=Qe+1;for(var U=0;U<Qe;U++)ae.push(De.getUint8(we++))}else{var Qe=Pe;j-=2;for(var Q=De.getUint8(we++),U=0;U<Qe+1;U++)ae.push(Q)}}return ae}function Re(N,j,ae,we,De,Pe){var _t=new DataView(Pe.buffer),Qe=ae[N.idx[0]].width,U=ae[N.idx[0]].height,Q=3,te=Math.floor(Qe/8),ne=Math.ceil(Qe/8),Z=Math.ceil(U/8),Be=Qe-(ne-1)*8,Oe=U-(Z-1)*8,Fe={value:0},Ge=new Array(Q),$e=new Array(Q),it=new Array(Q),nt=new Array(Q),gt=new Array(Q);for(let Xt=0;Xt<Q;++Xt)gt[Xt]=j[N.idx[Xt]],Ge[Xt]=Xt<1?0:Ge[Xt-1]+ne*Z,$e[Xt]=new Float32Array(64),it[Xt]=new Uint16Array(64),nt[Xt]=new Uint16Array(ne*64);for(let Xt=0;Xt<Z;++Xt){var Dt=8;Xt==Z-1&&(Dt=Oe);var Mt=8;for(let tn=0;tn<ne;++tn){tn==ne-1&&(Mt=Be);for(let yt=0;yt<Q;++yt)it[yt].fill(0),it[yt][0]=De[Ge[yt]++],Ce(Fe,we,it[yt]),qe(it[yt],$e[yt]),We($e[yt]);Ze($e);for(let yt=0;yt<Q;++yt)wt($e[yt],nt[yt],tn*64)}let ln=0;for(let tn=0;tn<Q;++tn){const yt=ae[N.idx[tn]].type;for(let An=8*Xt;An<8*Xt+Dt;++An){ln=gt[tn][An];for(let qn=0;qn<te;++qn){const cn=qn*64+(An&7)*8;_t.setUint16(ln+0*yt,nt[tn][cn+0],!0),_t.setUint16(ln+2*yt,nt[tn][cn+1],!0),_t.setUint16(ln+4*yt,nt[tn][cn+2],!0),_t.setUint16(ln+6*yt,nt[tn][cn+3],!0),_t.setUint16(ln+8*yt,nt[tn][cn+4],!0),_t.setUint16(ln+10*yt,nt[tn][cn+5],!0),_t.setUint16(ln+12*yt,nt[tn][cn+6],!0),_t.setUint16(ln+14*yt,nt[tn][cn+7],!0),ln+=16*yt}}if(te!=ne)for(let An=8*Xt;An<8*Xt+Dt;++An){const qn=gt[tn][An]+8*te*2*yt,cn=te*64+(An&7)*8;for(let Sn=0;Sn<Mt;++Sn)_t.setUint16(qn+Sn*2*yt,nt[tn][cn+Sn],!0)}}}for(var jt=new Uint16Array(Qe),_t=new DataView(Pe.buffer),ot=0;ot<Q;++ot){ae[N.idx[ot]].decoded=!0;var Kt=ae[N.idx[ot]].type;if(ae[ot].type==2)for(var Gt=0;Gt<U;++Gt){const Xt=gt[ot][Gt];for(var pn=0;pn<Qe;++pn)jt[pn]=_t.getUint16(Xt+pn*2*Kt,!0);for(var pn=0;pn<Qe;++pn)_t.setFloat32(Xt+pn*2*Kt,ve(jt[pn]),!0)}}}function Ce(N,j,ae){for(var we,De=1;De<64;)we=j[N.value],we==65280?De=64:we>>8==255?De+=we&255:(ae[De]=we,De++),N.value++}function qe(N,j){j[0]=ve(N[0]),j[1]=ve(N[1]),j[2]=ve(N[5]),j[3]=ve(N[6]),j[4]=ve(N[14]),j[5]=ve(N[15]),j[6]=ve(N[27]),j[7]=ve(N[28]),j[8]=ve(N[2]),j[9]=ve(N[4]),j[10]=ve(N[7]),j[11]=ve(N[13]),j[12]=ve(N[16]),j[13]=ve(N[26]),j[14]=ve(N[29]),j[15]=ve(N[42]),j[16]=ve(N[3]),j[17]=ve(N[8]),j[18]=ve(N[12]),j[19]=ve(N[17]),j[20]=ve(N[25]),j[21]=ve(N[30]),j[22]=ve(N[41]),j[23]=ve(N[43]),j[24]=ve(N[9]),j[25]=ve(N[11]),j[26]=ve(N[18]),j[27]=ve(N[24]),j[28]=ve(N[31]),j[29]=ve(N[40]),j[30]=ve(N[44]),j[31]=ve(N[53]),j[32]=ve(N[10]),j[33]=ve(N[19]),j[34]=ve(N[23]),j[35]=ve(N[32]),j[36]=ve(N[39]),j[37]=ve(N[45]),j[38]=ve(N[52]),j[39]=ve(N[54]),j[40]=ve(N[20]),j[41]=ve(N[22]),j[42]=ve(N[33]),j[43]=ve(N[38]),j[44]=ve(N[46]),j[45]=ve(N[51]),j[46]=ve(N[55]),j[47]=ve(N[60]),j[48]=ve(N[21]),j[49]=ve(N[34]),j[50]=ve(N[37]),j[51]=ve(N[47]),j[52]=ve(N[50]),j[53]=ve(N[56]),j[54]=ve(N[59]),j[55]=ve(N[61]),j[56]=ve(N[35]),j[57]=ve(N[36]),j[58]=ve(N[48]),j[59]=ve(N[49]),j[60]=ve(N[57]),j[61]=ve(N[58]),j[62]=ve(N[62]),j[63]=ve(N[63])}function We(N){const j=.5*Math.cos(.7853975),ae=.5*Math.cos(3.14159/16),we=.5*Math.cos(3.14159/8),De=.5*Math.cos(3*3.14159/16),Pe=.5*Math.cos(5*3.14159/16),Qe=.5*Math.cos(3*3.14159/8),U=.5*Math.cos(7*3.14159/16);for(var Q=new Array(4),te=new Array(4),ne=new Array(4),Z=new Array(4),Be=0;Be<8;++Be){var Oe=Be*8;Q[0]=we*N[Oe+2],Q[1]=Qe*N[Oe+2],Q[2]=we*N[Oe+6],Q[3]=Qe*N[Oe+6],te[0]=ae*N[Oe+1]+De*N[Oe+3]+Pe*N[Oe+5]+U*N[Oe+7],te[1]=De*N[Oe+1]-U*N[Oe+3]-ae*N[Oe+5]-Pe*N[Oe+7],te[2]=Pe*N[Oe+1]-ae*N[Oe+3]+U*N[Oe+5]+De*N[Oe+7],te[3]=U*N[Oe+1]-Pe*N[Oe+3]+De*N[Oe+5]-ae*N[Oe+7],ne[0]=j*(N[Oe+0]+N[Oe+4]),ne[3]=j*(N[Oe+0]-N[Oe+4]),ne[1]=Q[0]+Q[3],ne[2]=Q[1]-Q[2],Z[0]=ne[0]+ne[1],Z[1]=ne[3]+ne[2],Z[2]=ne[3]-ne[2],Z[3]=ne[0]-ne[1],N[Oe+0]=Z[0]+te[0],N[Oe+1]=Z[1]+te[1],N[Oe+2]=Z[2]+te[2],N[Oe+3]=Z[3]+te[3],N[Oe+4]=Z[3]-te[3],N[Oe+5]=Z[2]-te[2],N[Oe+6]=Z[1]-te[1],N[Oe+7]=Z[0]-te[0]}for(var Fe=0;Fe<8;++Fe)Q[0]=we*N[16+Fe],Q[1]=Qe*N[16+Fe],Q[2]=we*N[48+Fe],Q[3]=Qe*N[48+Fe],te[0]=ae*N[8+Fe]+De*N[24+Fe]+Pe*N[40+Fe]+U*N[56+Fe],te[1]=De*N[8+Fe]-U*N[24+Fe]-ae*N[40+Fe]-Pe*N[56+Fe],te[2]=Pe*N[8+Fe]-ae*N[24+Fe]+U*N[40+Fe]+De*N[56+Fe],te[3]=U*N[8+Fe]-Pe*N[24+Fe]+De*N[40+Fe]-ae*N[56+Fe],ne[0]=j*(N[Fe]+N[32+Fe]),ne[3]=j*(N[Fe]-N[32+Fe]),ne[1]=Q[0]+Q[3],ne[2]=Q[1]-Q[2],Z[0]=ne[0]+ne[1],Z[1]=ne[3]+ne[2],Z[2]=ne[3]-ne[2],Z[3]=ne[0]-ne[1],N[0+Fe]=Z[0]+te[0],N[8+Fe]=Z[1]+te[1],N[16+Fe]=Z[2]+te[2],N[24+Fe]=Z[3]+te[3],N[32+Fe]=Z[3]-te[3],N[40+Fe]=Z[2]-te[2],N[48+Fe]=Z[1]-te[1],N[56+Fe]=Z[0]-te[0]}function Ze(N){for(var j=0;j<64;++j){var ae=N[0][j],we=N[1][j],De=N[2][j];N[0][j]=ae+1.5747*De,N[1][j]=ae-.1873*we-.4682*De,N[2][j]=ae+1.8556*we}}function wt(N,j,ae){for(var we=0;we<64;++we)j[ae+we]=ll.toHalfFloat(St(N[we]))}function St(N){return N<=1?Math.sign(N)*Math.pow(Math.abs(N),2.2):Math.sign(N)*Math.pow(C,Math.abs(N)-1)}function Y(N){return new DataView(N.array.buffer,N.offset.value,N.size)}function B(N){var j=N.viewer.buffer.slice(N.offset.value,N.offset.value+N.size),ae=new Uint8Array(xe(j)),we=new Uint8Array(ae.length);return q(ae),me(ae,we),new DataView(we.buffer)}function ue(N){var j=N.array.slice(N.offset.value,N.offset.value+N.size),ae=Em(j),we=new Uint8Array(ae.length);return q(ae),me(ae,we),new DataView(we.buffer)}function Ae(N){for(var j=N.viewer,ae={value:N.offset.value},we=new Uint16Array(N.width*N.scanlineBlockSize*(N.channels*N.type)),De=new Uint8Array(8192),Pe=0,Qe=new Array(N.channels),U=0;U<N.channels;U++)Qe[U]={},Qe[U].start=Pe,Qe[U].end=Qe[U].start,Qe[U].nx=N.width,Qe[U].ny=N.lines,Qe[U].size=N.type,Pe+=Qe[U].nx*Qe[U].ny*Qe[U].size;var Q=tt(j,ae),te=tt(j,ae);if(te>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(Q<=te)for(var U=0;U<te-Q+1;U++)De[U+Q]=st(j,ae);var ne=new Uint16Array(65536),Z=D(De,ne),Be=Je(j,ae);ge(N.array,j,ae,Be,we,Pe);for(var U=0;U<N.channels;++U)for(var Oe=Qe[U],Fe=0;Fe<Qe[U].size;++Fe)be(we,Oe.start+Fe,Oe.nx,Oe.size,Oe.ny,Oe.nx*Oe.size,Z);Se(ne,we,Pe);for(var Ge=0,$e=new Uint8Array(we.buffer.byteLength),it=0;it<N.lines;it++)for(var nt=0;nt<N.channels;nt++){var Oe=Qe[nt],gt=Oe.nx*Oe.size,Dt=new Uint8Array(we.buffer,Oe.end*2,gt*2);$e.set(Dt,Ge),Ge+=gt*2,Oe.end+=gt}return new DataView($e.buffer)}function ze(N){var j=N.array.slice(N.offset.value,N.offset.value+N.size),ae=Em(j);const we=N.lines*N.channels*N.width,De=N.type==1?new Uint16Array(we):new Uint32Array(we);let Pe=0,Qe=0;const U=new Array(4);for(let Q=0;Q<N.lines;Q++)for(let te=0;te<N.channels;te++){let ne=0;switch(N.type){case 1:U[0]=Pe,U[1]=U[0]+N.width,Pe=U[1]+N.width;for(let Z=0;Z<N.width;++Z){const Be=ae[U[0]++]<<8|ae[U[1]++];ne+=Be,De[Qe]=ne,Qe++}break;case 2:U[0]=Pe,U[1]=U[0]+N.width,U[2]=U[1]+N.width,Pe=U[2]+N.width;for(let Z=0;Z<N.width;++Z){const Be=ae[U[0]++]<<24|ae[U[1]++]<<16|ae[U[2]++]<<8;ne+=Be,De[Qe]=ne,Qe++}break}}return new DataView(De.buffer)}function Ie(N){var j=N.viewer,ae={value:N.offset.value},we=new Uint8Array(N.width*N.lines*(N.channels*N.type*2)),De={version:Ye(j,ae),unknownUncompressedSize:Ye(j,ae),unknownCompressedSize:Ye(j,ae),acCompressedSize:Ye(j,ae),dcCompressedSize:Ye(j,ae),rleCompressedSize:Ye(j,ae),rleUncompressedSize:Ye(j,ae),rleRawSize:Ye(j,ae),totalAcUncompressedCount:Ye(j,ae),totalDcUncompressedCount:Ye(j,ae),acCompression:Ye(j,ae)};if(De.version<2)throw"EXRLoader.parse: "+jn.compression+" version "+De.version+" is unsupported";for(var Pe=new Array,Qe=tt(j,ae)-2;Qe>0;){var U=lt(j.buffer,ae),Q=st(j,ae),te=Q>>2&3,ne=(Q>>4)-1,Z=new Int8Array([ne])[0],Be=st(j,ae);Pe.push({name:U,index:Z,type:Be,compression:te}),Qe-=U.length+3}for(var Oe=jn.channels,Fe=new Array(N.channels),Ge=0;Ge<N.channels;++Ge){var $e=Fe[Ge]={},it=Oe[Ge];$e.name=it.name,$e.compression=0,$e.decoded=!1,$e.type=it.pixelType,$e.pLinear=it.pLinear,$e.width=N.width,$e.height=N.lines}for(var nt={idx:new Array(3)},gt=0;gt<N.channels;++gt)for(var $e=Fe[gt],Ge=0;Ge<Pe.length;++Ge){var Dt=Pe[Ge];$e.name==Dt.name&&($e.compression=Dt.compression,Dt.index>=0&&(nt.idx[Dt.index]=gt),$e.offset=gt)}if(De.acCompressedSize>0)switch(De.acCompression){case 0:var _t=new Uint16Array(De.totalAcUncompressedCount);ge(N.array,j,ae,De.acCompressedSize,_t,De.totalAcUncompressedCount);break;case 1:var Mt=N.array.slice(ae.value,ae.value+De.totalAcUncompressedCount),jt=Em(Mt),_t=new Uint16Array(jt.buffer);ae.value+=De.totalAcUncompressedCount;break}if(De.dcCompressedSize>0){var ot={array:N.array,offset:ae,size:De.dcCompressedSize},Kt=new Uint16Array(ue(ot).buffer);ae.value+=De.dcCompressedSize}if(De.rleRawSize>0){var Mt=N.array.slice(ae.value,ae.value+De.rleCompressedSize),jt=Em(Mt),Gt=xe(jt.buffer);ae.value+=De.rleCompressedSize}for(var pn=0,Xt=new Array(Fe.length),Ge=0;Ge<Xt.length;++Ge)Xt[Ge]=new Array;for(var ln=0;ln<N.lines;++ln)for(var tn=0;tn<Fe.length;++tn)Xt[tn].push(pn),pn+=Fe[tn].width*N.type*2;Re(nt,Xt,Fe,_t,Kt,we);for(var Ge=0;Ge<Fe.length;++Ge){var $e=Fe[Ge];if(!$e.decoded)switch($e.compression){case 2:for(var yt=0,An=0,ln=0;ln<N.lines;++ln){for(var qn=Xt[Ge][yt],cn=0;cn<$e.width;++cn){for(var Sn=0;Sn<2*$e.type;++Sn)we[qn++]=Gt[An+Sn*$e.width*$e.height];An++}yt++}break;case 1:default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(we.buffer)}function lt(N,j){for(var ae=new Uint8Array(N),we=0;ae[j.value+we]!=0;)we+=1;var De=new TextDecoder().decode(ae.slice(j.value,j.value+we));return j.value=j.value+we+1,De}function Xe(N,j,ae){var we=new TextDecoder().decode(new Uint8Array(N).slice(j.value,j.value+ae));return j.value=j.value+ae,we}function ht(N,j){var ae=je(N,j),we=Je(N,j);return[ae,we]}function ct(N,j){var ae=Je(N,j),we=Je(N,j);return[ae,we]}function je(N,j){var ae=N.getInt32(j.value,!0);return j.value=j.value+4,ae}function Je(N,j){var ae=N.getUint32(j.value,!0);return j.value=j.value+4,ae}function bt(N,j){var ae=N[j.value];return j.value=j.value+1,ae}function st(N,j){var ae=N.getUint8(j.value);return j.value=j.value+1,ae}const Ye=function(N,j){let ae;return"getBigInt64"in DataView.prototype?ae=Number(N.getBigInt64(j.value,!0)):ae=N.getUint32(j.value+4,!0)+Number(N.getUint32(j.value,!0)<<32),j.value+=8,ae};function vt(N,j){var ae=N.getFloat32(j.value,!0);return j.value+=4,ae}function ce(N,j){return ll.toHalfFloat(vt(N,j))}function ve(N){var j=(N&31744)>>10,ae=N&1023;return(N>>15?-1:1)*(j?j===31?ae?NaN:1/0:Math.pow(2,j-15)*(1+ae/1024):6103515625e-14*(ae/1024))}function tt(N,j){var ae=N.getUint16(j.value,!0);return j.value+=2,ae}function ut(N,j){return ve(tt(N,j))}function Ke(N,j,ae,we){for(var De=ae.value,Pe=[];ae.value<De+we-1;){var Qe=lt(j,ae),U=je(N,ae),Q=st(N,ae);ae.value+=3;var te=je(N,ae),ne=je(N,ae);Pe.push({name:Qe,pixelType:U,pLinear:Q,xSampling:te,ySampling:ne})}return ae.value+=1,Pe}function Te(N,j){var ae=vt(N,j),we=vt(N,j),De=vt(N,j),Pe=vt(N,j),Qe=vt(N,j),U=vt(N,j),Q=vt(N,j),te=vt(N,j);return{redX:ae,redY:we,greenX:De,greenY:Pe,blueX:Qe,blueY:U,whiteX:Q,whiteY:te}}function dt(N,j){var ae=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],we=st(N,j);return ae[we]}function Et(N,j){var ae=Je(N,j),we=Je(N,j),De=Je(N,j),Pe=Je(N,j);return{xMin:ae,yMin:we,xMax:De,yMax:Pe}}function dn(N,j){var ae=["INCREASING_Y"],we=st(N,j);return ae[we]}function en(N,j){var ae=vt(N,j),we=vt(N,j);return[ae,we]}function vr(N,j){var ae=vt(N,j),we=vt(N,j),De=vt(N,j);return[ae,we,De]}function Oi(N,j,ae,we,De){if(we==="string"||we==="stringvector"||we==="iccProfile")return Xe(j,ae,De);if(we==="chlist")return Ke(N,j,ae,De);if(we==="chromaticities")return Te(N,ae);if(we==="compression")return dt(N,ae);if(we==="box2i")return Et(N,ae);if(we==="lineOrder")return dn(N,ae);if(we==="float")return vt(N,ae);if(we==="v2f")return en(N,ae);if(we==="v3f")return vr(N,ae);if(we==="int")return je(N,ae);if(we==="rational")return ht(N,ae);if(we==="timecode")return ct(N,ae);if(we==="preview")return ae.value+=De,"skipped";ae.value+=De}function fn(N,j,ae){const we={};if(N.getUint32(0,!0)!=20000630)throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";we.version=N.getUint8(4);const De=N.getUint8(5);we.spec={singleTile:!!(De&2),longName:!!(De&4),deepFormat:!!(De&8),multiPart:!!(De&16)},ae.value=8;for(var Pe=!0;Pe;){var Qe=lt(j,ae);if(Qe==0)Pe=!1;else{var U=lt(j,ae),Q=Je(N,ae),te=Oi(N,j,ae,U,Q);te===void 0?console.warn("EXRLoader.parse: skipped unknown header attribute type '".concat(U,"'.")):we[Qe]=te}}if((De&-5)!=0)throw console.error("EXRHeader:",we),"THREE.EXRLoader: provided file is currently unsupported.";return we}function Or(N,j,ae,we,De){const Pe={size:0,viewer:j,array:ae,offset:we,width:N.dataWindow.xMax-N.dataWindow.xMin+1,height:N.dataWindow.yMax-N.dataWindow.yMin+1,channels:N.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:N.channels[0].pixelType,uncompress:null,getter:null,format:null,[Lh?"colorSpace":"encoding"]:null};switch(N.compression){case"NO_COMPRESSION":Pe.lines=1,Pe.uncompress=Y;break;case"RLE_COMPRESSION":Pe.lines=1,Pe.uncompress=B;break;case"ZIPS_COMPRESSION":Pe.lines=1,Pe.uncompress=ue;break;case"ZIP_COMPRESSION":Pe.lines=16,Pe.uncompress=ue;break;case"PIZ_COMPRESSION":Pe.lines=32,Pe.uncompress=Ae;break;case"PXR24_COMPRESSION":Pe.lines=16,Pe.uncompress=ze;break;case"DWAA_COMPRESSION":Pe.lines=32,Pe.uncompress=Ie;break;case"DWAB_COMPRESSION":Pe.lines=256,Pe.uncompress=Ie;break;default:throw"EXRLoader.parse: "+N.compression+" is unsupported"}if(Pe.scanlineBlockSize=Pe.lines,Pe.type==1)switch(De){case Gn:Pe.getter=ut,Pe.inputSize=2;break;case Ii:Pe.getter=tt,Pe.inputSize=2;break}else if(Pe.type==2)switch(De){case Gn:Pe.getter=vt,Pe.inputSize=4;break;case Ii:Pe.getter=ce,Pe.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+Pe.type+" for "+N.compression+".";Pe.blockCount=(N.dataWindow.yMax+1)/Pe.scanlineBlockSize;for(var Qe=0;Qe<Pe.blockCount;Qe++)Ye(j,we);Pe.outputChannels=Pe.channels==3?4:Pe.channels;const U=Pe.width*Pe.height*Pe.outputChannels;switch(De){case Gn:Pe.byteArray=new Float32Array(U),Pe.channels<Pe.outputChannels&&Pe.byteArray.fill(1,0,U);break;case Ii:Pe.byteArray=new Uint16Array(U),Pe.channels<Pe.outputChannels&&Pe.byteArray.fill(15360,0,U);break;default:console.error("THREE.EXRLoader: unsupported type: ",De);break}return Pe.bytesPerLine=Pe.width*Pe.inputSize*Pe.channels,Pe.outputChannels==4?Pe.format=hi:Pe.format=nf,Lh?Pe.colorSpace="srgb-linear":Pe.encoding=3e3,Pe}const vs=new DataView(e),Fu=new Uint8Array(e),Fs={value:0},jn=fn(vs,e,Fs),Bt=Or(jn,vs,Fu,Fs,this.type),_s={value:0},_o={R:0,G:1,B:2,A:3,Y:0};for(let N=0;N<Bt.height/Bt.scanlineBlockSize;N++){const j=Je(vs,Fs);Bt.size=Je(vs,Fs),Bt.lines=j+Bt.scanlineBlockSize>Bt.height?Bt.height-j:Bt.scanlineBlockSize;const we=Bt.size<Bt.lines*Bt.bytesPerLine?Bt.uncompress(Bt):Y(Bt);Fs.value+=Bt.size;for(let De=0;De<Bt.scanlineBlockSize;De++){const Pe=De+N*Bt.scanlineBlockSize;if(Pe>=Bt.height)break;for(let Qe=0;Qe<Bt.channels;Qe++){const U=_o[jn.channels[Qe].name];for(let Q=0;Q<Bt.width;Q++){_s.value=(De*(Bt.channels*Bt.width)+Qe*Bt.width+Q)*Bt.inputSize;const te=(Bt.height-1-Pe)*(Bt.width*Bt.outputChannels)+Q*Bt.outputChannels+U;Bt.byteArray[te]=Bt.getter(we,_s)}}}}return{header:jn,width:Bt.width,height:Bt.height,data:Bt.byteArray,format:Bt.format,[Lh?"colorSpace":"encoding"]:Bt[Lh?"colorSpace":"encoding"],type:this.type}}setDataType(e){return this.type=e,this}load(e,t,i,r){function s(o,a){Lh?o.colorSpace=a.colorSpace:o.encoding=a.encoding,o.minFilter=Zt,o.magFilter=Zt,o.generateMipmaps=!1,o.flipY=!1,t&&t(o,a)}return super.load(e,s,i,r)}}const uU=(n,e,t)=>{let i;switch(n){case Zn:i=new Uint8ClampedArray(e*t*4);break;case Ii:i=new Uint16Array(e*t*4);break;case fs:i=new Uint32Array(e*t*4);break;case _v:i=new Int8Array(e*t*4);break;case yv:i=new Int16Array(e*t*4);break;case tf:i=new Int32Array(e*t*4);break;case Gn:i=new Float32Array(e*t*4);break;default:throw new Error("Unsupported data type")}return i};let Am;const IQ=(n,e,t,i)=>{if(Am!==void 0)return Am;const r=new ni(1,1,i);e.setRenderTarget(r);const s=new Fn(new aa,new vo({color:16777215}));e.render(s,t),e.setRenderTarget(null);const o=uU(n,r.width,r.height);return e.readRenderTargetPixels(r,0,0,r.width,r.height,o),r.dispose(),s.geometry.dispose(),s.material.dispose(),Am=o[0]!==0,Am};class Ax{constructor(e){var t,i,r,s,o,a,l,c,u,d,f,m,v,g,y,b;this._rendererIsDisposable=!1,this._supportsReadPixels=!0,this.render=()=>{this._renderer.setRenderTarget(this._renderTarget);try{this._renderer.render(this._scene,this._camera)}catch(x){throw this._renderer.setRenderTarget(null),x}this._renderer.setRenderTarget(null)},this._width=e.width,this._height=e.height,this._type=e.type,this._colorSpace=e.colorSpace;const S={format:hi,depthBuffer:!1,stencilBuffer:!1,type:this._type,colorSpace:this._colorSpace,anisotropy:((t=e.renderTargetOptions)===null||t===void 0?void 0:t.anisotropy)!==void 0?(i=e.renderTargetOptions)===null||i===void 0?void 0:i.anisotropy:1,generateMipmaps:((r=e.renderTargetOptions)===null||r===void 0?void 0:r.generateMipmaps)!==void 0?(s=e.renderTargetOptions)===null||s===void 0?void 0:s.generateMipmaps:!1,magFilter:((o=e.renderTargetOptions)===null||o===void 0?void 0:o.magFilter)!==void 0?(a=e.renderTargetOptions)===null||a===void 0?void 0:a.magFilter:Zt,minFilter:((l=e.renderTargetOptions)===null||l===void 0?void 0:l.minFilter)!==void 0?(c=e.renderTargetOptions)===null||c===void 0?void 0:c.minFilter:Zt,samples:((u=e.renderTargetOptions)===null||u===void 0?void 0:u.samples)!==void 0?(d=e.renderTargetOptions)===null||d===void 0?void 0:d.samples:void 0,wrapS:((f=e.renderTargetOptions)===null||f===void 0?void 0:f.wrapS)!==void 0?(m=e.renderTargetOptions)===null||m===void 0?void 0:m.wrapS:ui,wrapT:((v=e.renderTargetOptions)===null||v===void 0?void 0:v.wrapT)!==void 0?(g=e.renderTargetOptions)===null||g===void 0?void 0:g.wrapT:ui};if(this._material=e.material,e.renderer?this._renderer=e.renderer:(this._renderer=Ax.instantiateRenderer(),this._rendererIsDisposable=!0),this._scene=new Od,this._camera=new mf,this._camera.position.set(0,0,10),this._camera.left=-.5,this._camera.right=.5,this._camera.top=.5,this._camera.bottom=-.5,this._camera.updateProjectionMatrix(),!IQ(this._type,this._renderer,this._camera,S)){let x;switch(this._type){case Ii:x=this._renderer.extensions.has("EXT_color_buffer_float")?Gn:void 0;break}x!==void 0?(console.warn("This browser does not support reading pixels from ".concat(this._type," RenderTargets, switching to ").concat(Gn)),this._type=x):(this._supportsReadPixels=!1,console.warn("This browser dos not support toArray or toDataTexture, calls to those methods will result in an error thrown"))}this._quad=new Fn(new aa,this._material),this._quad.geometry.computeBoundingBox(),this._scene.add(this._quad),this._renderTarget=new ni(this.width,this.height,S),this._renderTarget.texture.mapping=((y=e.renderTargetOptions)===null||y===void 0?void 0:y.mapping)!==void 0?(b=e.renderTargetOptions)===null||b===void 0?void 0:b.mapping:Qo}static instantiateRenderer(){const e=new eU;return e.setSize(128,128),e}toArray(){if(!this._supportsReadPixels)throw new Error("Can't read pixels in this browser");const e=uU(this._type,this._width,this._height);return this._renderer.readRenderTargetPixels(this._renderTarget,0,0,this._width,this._height,e),e}toDataTexture(e){const t=new ds(this.toArray(),this.width,this.height,hi,this._type,(e==null?void 0:e.mapping)||Qo,(e==null?void 0:e.wrapS)||ui,(e==null?void 0:e.wrapT)||ui,(e==null?void 0:e.magFilter)||Zt,(e==null?void 0:e.minFilter)||Zt,(e==null?void 0:e.anisotropy)||1,Vr);return t.generateMipmaps=(e==null?void 0:e.generateMipmaps)!==void 0?e==null?void 0:e.generateMipmaps:!1,t}disposeOnDemandRenderer(){this._renderer.setRenderTarget(null),this._rendererIsDisposable&&(this._renderer.dispose(),this._renderer.forceContextLoss())}dispose(e){this.disposeOnDemandRenderer(),e&&this.renderTarget.dispose(),this.material instanceof Wn&&Object.values(this.material.uniforms).forEach(t=>{t.value instanceof En&&t.value.dispose()}),Object.values(this.material).forEach(t=>{t instanceof En&&t.dispose()}),this.material.dispose(),this._quad.geometry.dispose()}get width(){return this._width}set width(e){this._width=e,this._renderTarget.setSize(this._width,this._height)}get height(){return this._height}set height(e){this._height=e,this._renderTarget.setSize(this._width,this._height)}get renderer(){return this._renderer}get renderTarget(){return this._renderTarget}set renderTarget(e){this._renderTarget=e,this._width=e.width,this._height=e.height}get material(){return this._material}get type(){return this._type}get colorSpace(){return this._colorSpace}}const DQ="\nvarying vec2 vUv;\n\nvoid main() {\n  vUv = uv;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}\n",PQ="\n// min half float value\n#define HALF_FLOAT_MIN vec3( -65504, -65504, -65504 )\n// max half float value\n#define HALF_FLOAT_MAX vec3( 65504, 65504, 65504 )\n\nuniform sampler2D sdr;\nuniform sampler2D gainMap;\nuniform vec3 gamma;\nuniform vec3 offsetHdr;\nuniform vec3 offsetSdr;\nuniform vec3 gainMapMin;\nuniform vec3 gainMapMax;\nuniform float weightFactor;\n\nvarying vec2 vUv;\n\nvoid main() {\n  vec3 rgb = texture2D( sdr, vUv ).rgb;\n  vec3 recovery = texture2D( gainMap, vUv ).rgb;\n  vec3 logRecovery = pow( recovery, gamma );\n  vec3 logBoost = gainMapMin * ( 1.0 - logRecovery ) + gainMapMax * logRecovery;\n  vec3 hdrColor = (rgb + offsetSdr) * exp2( logBoost * weightFactor ) - offsetHdr;\n  vec3 clampedHdrColor = max( HALF_FLOAT_MIN, min( HALF_FLOAT_MAX, hdrColor ));\n  gl_FragColor = vec4( clampedHdrColor , 1.0 );\n}\n";class OQ extends Wn{constructor({gamma:e,offsetHdr:t,offsetSdr:i,gainMapMin:r,gainMapMax:s,maxDisplayBoost:o,hdrCapacityMin:a,hdrCapacityMax:l,sdr:c,gainMap:u}){super({name:"GainMapDecoderMaterial",vertexShader:DQ,fragmentShader:PQ,uniforms:{sdr:{value:c},gainMap:{value:u},gamma:{value:new K(1/e[0],1/e[1],1/e[2])},offsetHdr:{value:new K().fromArray(t)},offsetSdr:{value:new K().fromArray(i)},gainMapMin:{value:new K().fromArray(r)},gainMapMax:{value:new K().fromArray(s)},weightFactor:{value:(Math.log2(o)-a)/(l-a)}},blending:Ai,depthTest:!1,depthWrite:!1}),this._maxDisplayBoost=o,this._hdrCapacityMin=a,this._hdrCapacityMax=l,this.needsUpdate=!0,this.uniformsNeedUpdate=!0}get sdr(){return this.uniforms.sdr.value}set sdr(e){this.uniforms.sdr.value=e}get gainMap(){return this.uniforms.gainMap.value}set gainMap(e){this.uniforms.gainMap.value=e}get offsetHdr(){return this.uniforms.offsetHdr.value.toArray()}set offsetHdr(e){this.uniforms.offsetHdr.value.fromArray(e)}get offsetSdr(){return this.uniforms.offsetSdr.value.toArray()}set offsetSdr(e){this.uniforms.offsetSdr.value.fromArray(e)}get gainMapMin(){return this.uniforms.gainMapMin.value.toArray()}set gainMapMin(e){this.uniforms.gainMapMin.value.fromArray(e)}get gainMapMax(){return this.uniforms.gainMapMax.value.toArray()}set gainMapMax(e){this.uniforms.gainMapMax.value.fromArray(e)}get gamma(){const e=this.uniforms.gamma.value;return[1/e.x,1/e.y,1/e.z]}set gamma(e){const t=this.uniforms.gamma.value;t.x=1/e[0],t.y=1/e[1],t.z=1/e[2]}get hdrCapacityMin(){return this._hdrCapacityMin}set hdrCapacityMin(e){this._hdrCapacityMin=e,this.calculateWeight()}get hdrCapacityMax(){return this._hdrCapacityMax}set hdrCapacityMax(e){this._hdrCapacityMax=e,this.calculateWeight()}get maxDisplayBoost(){return this._maxDisplayBoost}set maxDisplayBoost(e){this._maxDisplayBoost=Math.max(1,Math.min(65504,e)),this.calculateWeight()}calculateWeight(){const e=(Math.log2(this._maxDisplayBoost)-this._hdrCapacityMin)/(this._hdrCapacityMax-this._hdrCapacityMin);this.uniforms.weightFactor.value=Math.max(0,Math.min(1,e))}}class hU extends Error{}class dU extends Error{}const kh=(n,e,t)=>{const i=new RegExp("".concat(e,'="([^"]*)"'),"i").exec(n);if(i)return i[1];const r=new RegExp("<".concat(e,"[^>]*>([\\s\\S]*?)</").concat(e,">"),"i").exec(n);if(r){const s=r[1].match(/<rdf:li>([^<]*)<\/rdf:li>/g);return s&&s.length===3?s.map(o=>o.replace(/<\/?rdf:li>/g,"")):r[1].trim()}if(t!==void 0)return t;throw new Error("Can't find ".concat(e," in gainmap metadata"))},LQ=n=>{let e;typeof TextDecoder<"u"?e=new TextDecoder().decode(n):e=n.toString();let t=e.indexOf("<x:xmpmeta");for(;t!==-1;){const i=e.indexOf("x:xmpmeta>",t),r=e.slice(t,i+10);try{const s=kh(r,"hdrgm:GainMapMin","0"),o=kh(r,"hdrgm:GainMapMax"),a=kh(r,"hdrgm:Gamma","1"),l=kh(r,"hdrgm:OffsetSDR","0.015625"),c=kh(r,"hdrgm:OffsetHDR","0.015625"),u=/hdrgm:HDRCapacityMin="([^"]*)"/.exec(r),d=u?u[1]:"0",f=/hdrgm:HDRCapacityMax="([^"]*)"/.exec(r);if(!f)throw new Error("Incomplete gainmap metadata");const m=f[1];return{gainMapMin:Array.isArray(s)?s.map(v=>parseFloat(v)):[parseFloat(s),parseFloat(s),parseFloat(s)],gainMapMax:Array.isArray(o)?o.map(v=>parseFloat(v)):[parseFloat(o),parseFloat(o),parseFloat(o)],gamma:Array.isArray(a)?a.map(v=>parseFloat(v)):[parseFloat(a),parseFloat(a),parseFloat(a)],offsetSdr:Array.isArray(l)?l.map(v=>parseFloat(v)):[parseFloat(l),parseFloat(l),parseFloat(l)],offsetHdr:Array.isArray(c)?c.map(v=>parseFloat(v)):[parseFloat(c),parseFloat(c),parseFloat(c)],hdrCapacityMin:parseFloat(d),hdrCapacityMax:parseFloat(m)}}catch(s){}t=e.indexOf("<x:xmpmeta",i)}};class kQ{constructor(e){this.options={debug:e&&e.debug!==void 0?e.debug:!1,extractFII:e&&e.extractFII!==void 0?e.extractFII:!0,extractNonFII:e&&e.extractNonFII!==void 0?e.extractNonFII:!0}}extract(e){return new Promise((t,i)=>{const r=this.options.debug,s=new DataView(e.buffer);if(s.getUint16(0)!==65496){i(new Error("Not a valid jpeg"));return}const o=s.byteLength;let a=2,l=0,c;for(;a<o;){if(++l>250){i(new Error("Found no marker after ".concat(l," loops ")));return}if(s.getUint8(a)!==255){i(new Error("Not a valid marker at offset 0x".concat(a.toString(16),", found: 0x").concat(s.getUint8(a).toString(16))));return}if(c=s.getUint8(a+1),r&&console.log("Marker: ".concat(c.toString(16))),c===226){r&&console.log("Found APP2 marker (0xffe2)");const u=a+4;if(s.getUint32(u)===1297106432){const d=u+4;let f;if(s.getUint16(d)===18761)f=!1;else if(s.getUint16(d)===19789)f=!0;else{i(new Error("No valid endianness marker found in TIFF header"));return}if(s.getUint16(d+2,!f)!==42){i(new Error("Not valid TIFF data! (no 0x002A marker)"));return}const m=s.getUint32(d+4,!f);if(m<8){i(new Error("Not valid TIFF data! (First offset less than 8)"));return}const v=d+m,g=s.getUint16(v,!f),y=v+2;let b=0;for(let E=y;E<y+12*g;E+=12)s.getUint16(E,!f)===45057&&(b=s.getUint32(E+8,!f));const x=v+2+g*12+4,A=[];for(let E=x;E<x+b*16;E+=16){const M={MPType:s.getUint32(E,!f),size:s.getUint32(E+4,!f),dataOffset:s.getUint32(E+8,!f),dependantImages:s.getUint32(E+12,!f),start:-1,end:-1,isFII:!1};M.dataOffset?(M.start=d+M.dataOffset,M.isFII=!1):(M.start=0,M.isFII=!0),M.end=M.start+M.size,A.push(M)}if(this.options.extractNonFII&&A.length){const E=new Blob([s]),M=[];for(const I of A){if(I.isFII&&!this.options.extractFII)continue;const R=E.slice(I.start,I.end+1,"image/jpeg");M.push(R)}t(M)}}}a+=2+s.getUint16(a+2)}})}}const UQ=async n=>{const e=LQ(n);if(!e)throw new dU("Gain map XMP metadata not found");const i=await new kQ({extractFII:!0,extractNonFII:!0}).extract(n);if(i.length!==2)throw new hU("Gain map recovery image not found");return{sdr:new Uint8Array(await i[0].arrayBuffer()),gainMap:new Uint8Array(await i[1].arrayBuffer()),metadata:e}},eI=n=>new Promise((e,t)=>{const i=document.createElement("img");i.onload=()=>{e(i)},i.onerror=r=>{t(r)},i.src=URL.createObjectURL(n)});class fU extends ir{constructor(e,t){super(t),e&&(this._renderer=e),this._internalLoadingManager=new pf}setRenderer(e){return this._renderer=e,this}setRenderTargetOptions(e){return this._renderTargetOptions=e,this}prepareQuadRenderer(){this._renderer||console.warn("WARNING: An existing WebGL Renderer was not passed to this Loader constructor or in setRenderer, the result of this Loader will need to be converted to a Data Texture with toDataTexture() before you can use it in your renderer.");const e=new OQ({gainMapMax:[1,1,1],gainMapMin:[0,0,0],gamma:[1,1,1],offsetHdr:[1,1,1],offsetSdr:[1,1,1],hdrCapacityMax:1,hdrCapacityMin:0,maxDisplayBoost:1,gainMap:new En,sdr:new En});return new Ax({width:16,height:16,type:Ii,colorSpace:Vr,material:e,renderer:this._renderer,renderTargetOptions:this._renderTargetOptions})}async render(e,t,i,r){const s=r?new Blob([r],{type:"image/jpeg"}):void 0,o=new Blob([i],{type:"image/jpeg"});let a,l,c=!1;if(typeof createImageBitmap>"u"){const f=await Promise.all([s?eI(s):Promise.resolve(void 0),eI(o)]);l=f[0],a=f[1],c=!0}else{const f=await Promise.all([s?createImageBitmap(s,{imageOrientation:"flipY"}):Promise.resolve(void 0),createImageBitmap(o,{imageOrientation:"flipY"})]);l=f[0],a=f[1]}const u=new En(l||new ImageData(2,2),Qo,ui,ui,Zt,gw,hi,Zn,1,Vr);u.flipY=c,u.needsUpdate=!0;const d=new En(a,Qo,ui,ui,Zt,gw,hi,Zn,1,hn);d.flipY=c,d.needsUpdate=!0,e.width=a.width,e.height=a.height,e.material.gainMap=u,e.material.sdr=d,e.material.gainMapMin=t.gainMapMin,e.material.gainMapMax=t.gainMapMax,e.material.offsetHdr=t.offsetHdr,e.material.offsetSdr=t.offsetSdr,e.material.gamma=t.gamma,e.material.hdrCapacityMin=t.hdrCapacityMin,e.material.hdrCapacityMax=t.hdrCapacityMax,e.material.maxDisplayBoost=Math.pow(2,t.hdrCapacityMax),e.material.needsUpdate=!0,e.render()}}class rae extends fU{load([e,t,i],r,s,o){const a=this.prepareQuadRenderer();let l,c,u;const d=async()=>{if(l&&c&&u){try{await this.render(a,u,l,c)}catch(C){this.manager.itemError(e),this.manager.itemError(t),this.manager.itemError(i),typeof o=="function"&&o(C),a.disposeOnDemandRenderer();return}typeof r=="function"&&r(a),this.manager.itemEnd(e),this.manager.itemEnd(t),this.manager.itemEnd(i),a.disposeOnDemandRenderer()}};let f=!0,m=0,v=0,g=!0,y=0,b=0,S=!0,x=0,A=0;const E=()=>{if(typeof s=="function"){const C=m+y+x,D=v+b+A,L=f&&g&&S;s(new ProgressEvent("progress",{lengthComputable:L,loaded:D,total:C}))}};this.manager.itemStart(e),this.manager.itemStart(t),this.manager.itemStart(i);const M=new Rr(this._internalLoadingManager);M.setResponseType("arraybuffer"),M.setRequestHeader(this.requestHeader),M.setPath(this.path),M.setWithCredentials(this.withCredentials),M.load(e,async C=>{if(typeof C=="string")throw new Error("Invalid sdr buffer");l=C,await d()},C=>{f=C.lengthComputable,v=C.loaded,m=C.total,E()},C=>{this.manager.itemError(e),typeof o=="function"&&o(C)});const I=new Rr(this._internalLoadingManager);I.setResponseType("arraybuffer"),I.setRequestHeader(this.requestHeader),I.setPath(this.path),I.setWithCredentials(this.withCredentials),I.load(t,async C=>{if(typeof C=="string")throw new Error("Invalid gainmap buffer");c=C,await d()},C=>{g=C.lengthComputable,b=C.loaded,y=C.total,E()},C=>{this.manager.itemError(t),typeof o=="function"&&o(C)});const R=new Rr(this._internalLoadingManager);return R.setRequestHeader(this.requestHeader),R.setPath(this.path),R.setWithCredentials(this.withCredentials),R.load(i,async C=>{if(typeof C!="string")throw new Error("Invalid metadata string");u=JSON.parse(C),await d()},C=>{S=C.lengthComputable,A=C.loaded,x=C.total,E()},C=>{this.manager.itemError(i),typeof o=="function"&&o(C)}),a}}class sae extends fU{load(e,t,i,r){const s=this.prepareQuadRenderer(),o=new Rr(this._internalLoadingManager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(this.withCredentials),this.manager.itemStart(e),o.load(e,async a=>{if(typeof a=="string")throw new Error("Invalid buffer, received [string], was expecting [ArrayBuffer]");const l=new Uint8Array(a);let c,u,d;try{const f=await UQ(l);c=f.sdr,u=f.gainMap,d=f.metadata}catch(f){if(f instanceof dU||f instanceof hU)console.warn("Failure to reconstruct an HDR image from ".concat(e,": Gain map metadata not found in the file, HDRJPGLoader will render the SDR jpeg")),d={gainMapMin:[0,0,0],gainMapMax:[1,1,1],gamma:[1,1,1],hdrCapacityMin:0,hdrCapacityMax:1,offsetHdr:[0,0,0],offsetSdr:[0,0,0]},c=l;else throw f}try{await this.render(s,d,c,u)}catch(f){this.manager.itemError(e),typeof r=="function"&&r(f),s.disposeOnDemandRenderer();return}typeof t=="function"&&t(s),this.manager.itemEnd(e),s.disposeOnDemandRenderer()},i,a=>{this.manager.itemError(e),typeof r=="function"&&r(a)}),s}}function NQ(n,e){n.indexOf(e)===-1&&n.push(e)}function FQ(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const Ol=(n,e,t)=>t>e?e:t<n?n:t;let Mx=()=>{};const Hd={},BQ=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n);function pU(n){return typeof n=="object"&&n!==null}const zQ=n=>/^0[^.\s]+$/u.test(n);function Tx(n){let e;return()=>(e===void 0&&(e=n()),e)}const Ou=n=>n,HQ=(n,e)=>t=>e(n(t)),Cx=(...n)=>n.reduce(HQ),mU=(n,e,t)=>{const i=e-n;return i===0?1:(t-n)/i};class GQ{constructor(){this.subscriptions=[]}add(e){return NQ(this.subscriptions,e),()=>FQ(this.subscriptions,e)}notify(e,t,i){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,t,i);else for(let s=0;s<r;s++){const o=this.subscriptions[s];o&&o(e,t,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Lu=n=>n*1e3,cs=n=>n/1e3;function gU(n,e){return e?n*(1e3/e):0}const vU=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,VQ=1e-7,WQ=12;function jQ(n,e,t,i,r){let s,o,a=0;do o=e+(t-e)/2,s=vU(o,i,r)-n,s>0?t=o:e=o;while(Math.abs(s)>VQ&&++a<WQ);return o}function vf(n,e,t,i){if(n===e&&t===i)return Ou;const r=s=>jQ(s,0,1,n,t);return s=>s===0||s===1?s:vU(r(s),e,i)}const _U=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,yU=n=>e=>1-n(1-e),bU=vf(.33,1.53,.69,.99),Rx=yU(bU),wU=_U(Rx),SU=n=>(n*=2)<1?.5*Rx(n):.5*(2-Math.pow(2,-10*(n-1))),Ix=n=>1-Math.sin(Math.acos(n)),qQ=yU(Ix),xU=_U(Ix),XQ=vf(.42,0,1,1),YQ=vf(0,0,.58,1),EU=vf(.42,0,.58,1),KQ=n=>Array.isArray(n)&&typeof n[0]!="number",AU=n=>Array.isArray(n)&&typeof n[0]=="number",$Q={linear:Ou,easeIn:XQ,easeInOut:EU,easeOut:YQ,circIn:Ix,circInOut:xU,circOut:qQ,backIn:Rx,backInOut:wU,backOut:bU,anticipate:SU},JQ=n=>typeof n=="string",tI=n=>{if(AU(n)){Mx(n.length===4);const[e,t,i,r]=n;return vf(e,t,i,r)}else if(JQ(n))return $Q[n];return n},Mm=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function QQ(n,e){let t=new Set,i=new Set,r=!1,s=!1;const o=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function l(u){o.has(u)&&(c.schedule(u),n()),u(a)}const c={schedule:(u,d=!1,f=!1)=>{const v=f&&r?t:i;return d&&o.add(u),v.has(u)||v.add(u),u},cancel:u=>{i.delete(u),o.delete(u)},process:u=>{if(a=u,r){s=!0;return}r=!0,[t,i]=[i,t],t.forEach(l),t.clear(),r=!1,s&&(s=!1,c.process(u))}};return c}const ZQ=40;function MU(n,e){let t=!1,i=!0;const r={delta:0,timestamp:0,isProcessing:!1},s=()=>t=!0,o=Mm.reduce((x,A)=>(x[A]=QQ(s),x),{}),{setup:a,read:l,resolveKeyframes:c,preUpdate:u,update:d,preRender:f,render:m,postRender:v}=o,g=()=>{const x=Hd.useManualTiming?r.timestamp:performance.now();t=!1,Hd.useManualTiming||(r.delta=i?1e3/60:Math.max(Math.min(x-r.timestamp,ZQ),1)),r.timestamp=x,r.isProcessing=!0,a.process(r),l.process(r),c.process(r),u.process(r),d.process(r),f.process(r),m.process(r),v.process(r),r.isProcessing=!1,t&&e&&(i=!1,n(g))},y=()=>{t=!0,i=!0,r.isProcessing||n(g)};return{schedule:Mm.reduce((x,A)=>{const E=o[A];return x[A]=(M,I=!1,R=!1)=>(t||y(),E.schedule(M,I,R)),x},{}),cancel:x=>{for(let A=0;A<Mm.length;A++)o[Mm[A]].cancel(x)},state:r,steps:o}}const{schedule:bu,cancel:TU,state:Zg,steps:oae}=MU(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ou,!0);let Vm;function eZ(){Vm=void 0}const us={now:()=>(Vm===void 0&&us.set(Zg.isProcessing||Hd.useManualTiming?Zg.timestamp:performance.now()),Vm),set:n=>{Vm=n,queueMicrotask(eZ)}},CU=n=>e=>typeof e=="string"&&e.startsWith(n),aae=CU("--"),tZ=CU("var(--"),Dx=n=>tZ(n)?nZ.test(n.split("/*")[0].trim()):!1,nZ=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,ku={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},Gd={...ku,transform:n=>Ol(0,1,n)},Tm={...ku,default:1},ld=n=>Math.round(n*1e5)/1e5,Px=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function iZ(n){return n==null}const rZ=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Ox=(n,e)=>t=>!!(typeof t=="string"&&rZ.test(t)&&t.startsWith(n)||e&&!iZ(t)&&Object.prototype.hasOwnProperty.call(t,e)),RU=(n,e,t)=>i=>{if(typeof i!="string")return i;const[r,s,o,a]=i.match(Px);return{[n]:parseFloat(r),[e]:parseFloat(s),[t]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},sZ=n=>Ol(0,255,n),nb={...ku,transform:n=>Math.round(sZ(n))},ul={test:Ox("rgb","red"),parse:RU("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:i=1})=>"rgba("+nb.transform(n)+", "+nb.transform(e)+", "+nb.transform(t)+", "+ld(Gd.transform(i))+")"};function oZ(n){let e="",t="",i="",r="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),i=n.substring(5,7),r=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),i=n.substring(3,4),r=n.substring(4,5),e+=e,t+=t,i+=i,r+=r),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}}const Iw={test:Ox("#"),parse:oZ,transform:ul.transform},_f=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>"".concat(e).concat(n)}),Oo=_f("deg"),eu=_f("%"),Lt=_f("px"),aZ=_f("vh"),lZ=_f("vw"),nI={...eu,parse:n=>eu.parse(n)/100,transform:n=>eu.transform(n*100)},Xc={test:Ox("hsl","hue"),parse:RU("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:i=1})=>"hsla("+Math.round(n)+", "+eu.transform(ld(e))+", "+eu.transform(ld(t))+", "+ld(Gd.transform(i))+")"},oi={test:n=>ul.test(n)||Iw.test(n)||Xc.test(n),parse:n=>ul.test(n)?ul.parse(n):Xc.test(n)?Xc.parse(n):Iw.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?ul.transform(n):Xc.transform(n),getAnimatableNone:n=>{const e=oi.parse(n);return e.alpha=0,oi.transform(e)}},cZ=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function uZ(n){var e,t;return isNaN(n)&&typeof n=="string"&&(((e=n.match(Px))==null?void 0:e.length)||0)+(((t=n.match(cZ))==null?void 0:t.length)||0)>0}const IU="number",DU="color",hZ="var",dZ="var(",iI="${}",fZ=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Vd(n){const e=n.toString(),t=[],i={color:[],number:[],var:[]},r=[];let s=0;const a=e.replace(fZ,l=>(oi.test(l)?(i.color.push(s),r.push(DU),t.push(oi.parse(l))):l.startsWith(dZ)?(i.var.push(s),r.push(hZ),t.push(l)):(i.number.push(s),r.push(IU),t.push(parseFloat(l))),++s,iI)).split(iI);return{values:t,split:a,indexes:i,types:r}}function PU(n){return Vd(n).values}function OU(n){const{split:e,types:t}=Vd(n),i=e.length;return r=>{let s="";for(let o=0;o<i;o++)if(s+=e[o],r[o]!==void 0){const a=t[o];a===IU?s+=ld(r[o]):a===DU?s+=oi.transform(r[o]):s+=r[o]}return s}}const pZ=n=>typeof n=="number"?0:oi.test(n)?oi.getAnimatableNone(n):n;function mZ(n){const e=PU(n);return OU(n)(e.map(pZ))}const yf={test:uZ,parse:PU,createTransformer:OU,getAnimatableNone:mZ};function ib(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function gZ({hue:n,saturation:e,lightness:t,alpha:i}){n/=360,e/=100,t/=100;let r=0,s=0,o=0;if(!e)r=s=o=t;else{const a=t<.5?t*(1+e):t+e-t*e,l=2*t-a;r=ib(l,a,n+1/3),s=ib(l,a,n),o=ib(l,a,n-1/3)}return{red:Math.round(r*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:i}}function ev(n,e){return t=>t>0?e:n}const Kv=(n,e,t)=>n+(e-n)*t,rb=(n,e,t)=>{const i=n*n,r=t*(e*e-i)+i;return r<0?0:Math.sqrt(r)},vZ=[Iw,ul,Xc],_Z=n=>vZ.find(e=>e.test(n));function rI(n){const e=_Z(n);if(!e)return!1;let t=e.parse(n);return e===Xc&&(t=gZ(t)),t}const sI=(n,e)=>{const t=rI(n),i=rI(e);if(!t||!i)return ev(n,e);const r={...t};return s=>(r.red=rb(t.red,i.red,s),r.green=rb(t.green,i.green,s),r.blue=rb(t.blue,i.blue,s),r.alpha=Kv(t.alpha,i.alpha,s),ul.transform(r))},Dw=new Set(["none","hidden"]);function yZ(n,e){return Dw.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function bZ(n,e){return t=>Kv(n,e,t)}function Lx(n){return typeof n=="number"?bZ:typeof n=="string"?Dx(n)?ev:oi.test(n)?sI:xZ:Array.isArray(n)?LU:typeof n=="object"?oi.test(n)?sI:wZ:ev}function LU(n,e){const t=[...n],i=t.length,r=n.map((s,o)=>Lx(s)(s,e[o]));return s=>{for(let o=0;o<i;o++)t[o]=r[o](s);return t}}function wZ(n,e){const t={...n,...e},i={};for(const r in t)n[r]!==void 0&&e[r]!==void 0&&(i[r]=Lx(n[r])(n[r],e[r]));return r=>{for(const s in i)t[s]=i[s](r);return t}}function SZ(n,e){var r;const t=[],i={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const o=e.types[s],a=n.indexes[o][i[o]],l=(r=n.values[a])!=null?r:0;t[s]=l,i[o]++}return t}const xZ=(n,e)=>{const t=yf.createTransformer(e),i=Vd(n),r=Vd(e);return i.indexes.var.length===r.indexes.var.length&&i.indexes.color.length===r.indexes.color.length&&i.indexes.number.length>=r.indexes.number.length?Dw.has(n)&&!r.values.length||Dw.has(e)&&!i.values.length?yZ(n,e):Cx(LU(SZ(i,r),r.values),t):ev(n,e)};function kU(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?Kv(n,e,t):Lx(n)(n,e)}const EZ=n=>{const e=({timestamp:t})=>n(t);return{start:(t=!0)=>bu.update(e,t),stop:()=>TU(e),now:()=>Zg.isProcessing?Zg.timestamp:us.now()}},UU=(n,e,t=10)=>{let i="";const r=Math.max(Math.round(e/t),2);for(let s=0;s<r;s++)i+=Math.round(n(s/(r-1))*1e4)/1e4+", ";return"linear(".concat(i.substring(0,i.length-2),")")},tv=2e4;function kx(n){let e=0;const t=50;let i=n.next(e);for(;!i.done&&e<tv;)e+=t,i=n.next(e);return e>=tv?1/0:e}function AZ(n,e=100,t){const i=t({...n,keyframes:[0,e]}),r=Math.min(kx(i),tv);return{type:"keyframes",ease:s=>i.next(r*s).value/e,duration:cs(r)}}const MZ=5;function NU(n,e,t){const i=Math.max(e-MZ,0);return gU(t-n(i),e-i)}const Jn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},sb=.001;function TZ({duration:n=Jn.duration,bounce:e=Jn.bounce,velocity:t=Jn.velocity,mass:i=Jn.mass}){let r,s,o=1-e;o=Ol(Jn.minDamping,Jn.maxDamping,o),n=Ol(Jn.minDuration,Jn.maxDuration,cs(n)),o<1?(r=c=>{const u=c*o,d=u*n,f=u-t,m=Pw(c,o),v=Math.exp(-d);return sb-f/m*v},s=c=>{const d=c*o*n,f=d*t+t,m=Math.pow(o,2)*Math.pow(c,2)*n,v=Math.exp(-d),g=Pw(Math.pow(c,2),o);return(-r(c)+sb>0?-1:1)*((f-m)*v)/g}):(r=c=>{const u=Math.exp(-c*n),d=(c-t)*n+1;return-sb+u*d},s=c=>{const u=Math.exp(-c*n),d=(t-c)*(n*n);return u*d});const a=5/n,l=RZ(r,s,a);if(n=Lu(n),isNaN(l))return{stiffness:Jn.stiffness,damping:Jn.damping,duration:n};{const c=Math.pow(l,2)*i;return{stiffness:c,damping:o*2*Math.sqrt(i*c),duration:n}}}const CZ=12;function RZ(n,e,t){let i=t;for(let r=1;r<CZ;r++)i=i-n(i)/e(i);return i}function Pw(n,e){return n*Math.sqrt(1-e*e)}const IZ=["duration","bounce"],DZ=["stiffness","damping","mass"];function oI(n,e){return e.some(t=>n[t]!==void 0)}function PZ(n){let e={velocity:Jn.velocity,stiffness:Jn.stiffness,damping:Jn.damping,mass:Jn.mass,isResolvedFromDuration:!1,...n};if(!oI(n,DZ)&&oI(n,IZ))if(n.visualDuration){const t=n.visualDuration,i=2*Math.PI/(t*1.2),r=i*i,s=2*Ol(.05,1,1-(n.bounce||0))*Math.sqrt(r);e={...e,mass:Jn.mass,stiffness:r,damping:s}}else{const t=TZ(n);e={...e,...t,mass:Jn.mass},e.isResolvedFromDuration=!0}return e}function nv(n=Jn.visualDuration,e=Jn.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:i,restDelta:r}=t;const s=t.keyframes[0],o=t.keyframes[t.keyframes.length-1],a={done:!1,value:s},{stiffness:l,damping:c,mass:u,duration:d,velocity:f,isResolvedFromDuration:m}=PZ({...t,velocity:-cs(t.velocity||0)}),v=f||0,g=c/(2*Math.sqrt(l*u)),y=o-s,b=cs(Math.sqrt(l/u)),S=Math.abs(y)<5;i||(i=S?Jn.restSpeed.granular:Jn.restSpeed.default),r||(r=S?Jn.restDelta.granular:Jn.restDelta.default);let x;if(g<1){const E=Pw(b,g);x=M=>{const I=Math.exp(-g*b*M);return o-I*((v+g*b*y)/E*Math.sin(E*M)+y*Math.cos(E*M))}}else if(g===1)x=E=>o-Math.exp(-b*E)*(y+(v+b*y)*E);else{const E=b*Math.sqrt(g*g-1);x=M=>{const I=Math.exp(-g*b*M),R=Math.min(E*M,300);return o-I*((v+g*b*y)*Math.sinh(R)+E*y*Math.cosh(R))/E}}const A={calculatedDuration:m&&d||null,next:E=>{const M=x(E);if(m)a.done=E>=d;else{let I=E===0?v:0;g<1&&(I=E===0?Lu(v):NU(x,E,M));const R=Math.abs(I)<=i,C=Math.abs(o-M)<=r;a.done=R&&C}return a.value=a.done?o:M,a},toString:()=>{const E=Math.min(kx(A),tv),M=UU(I=>A.next(E*I).value,E,30);return E+"ms "+M},toTransition:()=>{}};return A}nv.applyToOptions=n=>{const e=AZ(n,100,nv);return n.ease=e.ease,n.duration=Lu(e.duration),n.type="keyframes",n};function Ow({keyframes:n,velocity:e=0,power:t=.8,timeConstant:i=325,bounceDamping:r=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:u}){const d=n[0],f={done:!1,value:d},m=R=>a!==void 0&&R<a||l!==void 0&&R>l,v=R=>a===void 0?l:l===void 0||Math.abs(a-R)<Math.abs(l-R)?a:l;let g=t*e;const y=d+g,b=o===void 0?y:o(y);b!==y&&(g=b-d);const S=R=>-g*Math.exp(-R/i),x=R=>b+S(R),A=R=>{const C=S(R),D=x(R);f.done=Math.abs(C)<=c,f.value=f.done?b:D};let E,M;const I=R=>{m(f.value)&&(E=R,M=nv({keyframes:[f.value,v(f.value)],velocity:NU(x,R,f.value),damping:r,stiffness:s,restDelta:c,restSpeed:u}))};return I(0),{calculatedDuration:null,next:R=>{let C=!1;return!M&&E===void 0&&(C=!0,A(R),I(R)),E!==void 0&&R>=E?M.next(R-E):(!C&&A(R),f)}}}function OZ(n,e,t){const i=[],r=t||Hd.mix||kU,s=n.length-1;for(let o=0;o<s;o++){let a=r(n[o],n[o+1]);if(e){const l=Array.isArray(e)?e[o]||Ou:e;a=Cx(l,a)}i.push(a)}return i}function FU(n,e,{clamp:t=!0,ease:i,mixer:r}={}){const s=n.length;if(Mx(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const o=n[0]===n[1];n[0]>n[s-1]&&(n=[...n].reverse(),e=[...e].reverse());const a=OZ(e,i,r),l=a.length,c=u=>{if(o&&u<n[0])return e[0];let d=0;if(l>1)for(;d<n.length-2&&!(u<n[d+1]);d++);const f=mU(n[d],n[d+1],u);return a[d](f)};return t?u=>c(Ol(n[0],n[s-1],u)):c}function LZ(n,e){const t=n[n.length-1];for(let i=1;i<=e;i++){const r=mU(0,e,i);n.push(Kv(t,1,r))}}function kZ(n){const e=[0];return LZ(e,n.length-1),e}function UZ(n,e){return n.map(t=>t*e)}function NZ(n,e){return n.map(()=>e||EU).splice(0,n.length-1)}function cd({duration:n=300,keyframes:e,times:t,ease:i="easeInOut"}){const r=KQ(i)?i.map(tI):tI(i),s={done:!1,value:e[0]},o=UZ(t&&t.length===e.length?t:kZ(e),n),a=FU(o,e,{ease:Array.isArray(r)?r:NZ(e,r)});return{calculatedDuration:n,next:l=>(s.value=a(l),s.done=l>=n,s)}}const FZ=n=>n!==null;function Ux(n,{repeat:e,repeatType:t="loop"},i,r=1){const s=n.filter(FZ),a=r<0||e&&t!=="loop"&&e%2===1?0:s.length-1;return!a||i===void 0?s[a]:i}const BZ={decay:Ow,inertia:Ow,tween:cd,keyframes:cd,spring:nv};function BU(n){typeof n.type=="string"&&(n.type=BZ[n.type])}class Nx{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const zZ=n=>n/100;class Fx extends Nx{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var i,r;const{motionValue:t}=this.options;t&&t.updatedAt!==us.now()&&this.tick(us.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(r=(i=this.options).onStop)==null||r.call(i))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;BU(e);const{type:t=cd,repeat:i=0,repeatDelay:r=0,repeatType:s,velocity:o=0}=e;let{keyframes:a}=e;const l=t||cd;l!==cd&&typeof a[0]!="number"&&(this.mixKeyframes=Cx(zZ,kU(a[0],a[1])),a=[0,100]);const c=l({...e,keyframes:a});s==="mirror"&&(this.mirroredGenerator=l({...e,keyframes:[...a].reverse(),velocity:-o})),c.calculatedDuration===null&&(c.calculatedDuration=kx(c));const{calculatedDuration:u}=c;this.calculatedDuration=u,this.resolvedDuration=u+r,this.totalDuration=this.resolvedDuration*(i+1)-r,this.generator=c}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:i,totalDuration:r,mixKeyframes:s,mirroredGenerator:o,resolvedDuration:a,calculatedDuration:l}=this;if(this.startTime===null)return i.next(0);const{delay:c=0,keyframes:u,repeat:d,repeatType:f,repeatDelay:m,type:v,onUpdate:g,finalKeyframe:y}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-r/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const b=this.currentTime-c*(this.playbackSpeed>=0?1:-1),S=this.playbackSpeed>=0?b<0:b>r;this.currentTime=Math.max(b,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=r);let x=this.currentTime,A=i;if(d){const R=Math.min(this.currentTime,r)/a;let C=Math.floor(R),D=R%1;!D&&R>=1&&(D=1),D===1&&C--,C=Math.min(C,d+1),!!(C%2)&&(f==="reverse"?(D=1-D,m&&(D-=m/a)):f==="mirror"&&(A=o)),x=Ol(0,1,D)*a}const E=S?{done:!1,value:u[0]}:A.next(x);s&&(E.value=s(E.value));let{done:M}=E;!S&&l!==null&&(M=this.playbackSpeed>=0?this.currentTime>=r:this.currentTime<=0);const I=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&M);return I&&v!==Ow&&(E.value=Ux(u,this.options,y,this.speed)),g&&g(E.value),I&&this.finish(),E}then(e,t){return this.finished.then(e,t)}get duration(){return cs(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+cs(e)}get time(){return cs(this.currentTime)}set time(e){var t;e=Lu(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(t=this.driver)==null||t.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(us.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=cs(this.currentTime))}play(){var r,s;if(this.isStopped)return;const{driver:e=EZ,startTime:t}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),(s=(r=this.options).onPlay)==null||s.call(r);const i=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=i):this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime||(this.startTime=t!=null?t:i),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(us.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,t;this.notifyFinished(),this.teardown(),this.state="finished",(t=(e=this.options).onComplete)==null||t.call(e)}cancel(){var e,t;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(t=(e=this.options).onCancel)==null||t.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var t;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(t=this.driver)==null||t.stop(),e.observe(this)}}function HZ(n){var e;for(let t=1;t<n.length;t++)(e=n[t])!=null||(n[t]=n[t-1])}const hl=n=>n*180/Math.PI,Lw=n=>{const e=hl(Math.atan2(n[1],n[0]));return kw(e)},GZ={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:Lw,rotateZ:Lw,skewX:n=>hl(Math.atan(n[1])),skewY:n=>hl(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},kw=n=>(n=n%360,n<0&&(n+=360),n),aI=Lw,lI=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),cI=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),VZ={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:lI,scaleY:cI,scale:n=>(lI(n)+cI(n))/2,rotateX:n=>kw(hl(Math.atan2(n[6],n[5]))),rotateY:n=>kw(hl(Math.atan2(-n[2],n[0]))),rotateZ:aI,rotate:aI,skewX:n=>hl(Math.atan(n[4])),skewY:n=>hl(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function uI(n){return n.includes("scale")?1:0}function Uw(n,e){if(!n||n==="none")return uI(e);const t=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let i,r;if(t)i=VZ,r=t;else{const a=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);i=GZ,r=a}if(!r)return uI(e);const s=i[e],o=r[1].split(",").map(WZ);return typeof s=="function"?s(o):o[s]}const lae=(n,e)=>{const{transform:t="none"}=getComputedStyle(n);return Uw(t,e)};function WZ(n){return parseFloat(n.trim())}const Bx=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],cae=new Set(Bx),hI=n=>n===ku||n===Lt,jZ=new Set(["x","y","z"]),qZ=Bx.filter(n=>!jZ.has(n));function XZ(n){const e=[];return qZ.forEach(t=>{const i=n.getValue(t);i!==void 0&&(e.push([t,i.get()]),i.set(t.startsWith("scale")?1:0))}),e}const wl={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:(n,{transform:e})=>Uw(e,"x"),y:(n,{transform:e})=>Uw(e,"y")};wl.translateX=wl.x;wl.translateY=wl.y;const Sl=new Set;let Nw=!1,Fw=!1,Bw=!1;function zU(){if(Fw){const n=Array.from(Sl).filter(i=>i.needsMeasurement),e=new Set(n.map(i=>i.element)),t=new Map;e.forEach(i=>{const r=XZ(i);r.length&&(t.set(i,r),i.render())}),n.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render();const r=t.get(i);r&&r.forEach(([s,o])=>{var a;(a=i.getValue(s))==null||a.set(o)})}),n.forEach(i=>i.measureEndState()),n.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}Fw=!1,Nw=!1,Sl.forEach(n=>n.complete(Bw)),Sl.clear()}function HU(){Sl.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(Fw=!0)})}function YZ(){Bw=!0,HU(),zU(),Bw=!1}class GU{constructor(e,t,i,r,s,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=i,this.motionValue=r,this.element=s,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(Sl.add(this),Nw||(Nw=!0,bu.read(HU),bu.resolveKeyframes(zU))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:i,motionValue:r}=this;if(e[0]===null){const s=r==null?void 0:r.get(),o=e[e.length-1];if(s!==void 0)e[0]=s;else if(i&&t){const a=i.readValue(t,o);a!=null&&(e[0]=a)}e[0]===void 0&&(e[0]=o),r&&s===void 0&&r.set(e[0])}HZ(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Sl.delete(this)}cancel(){this.state==="scheduled"&&(Sl.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const KZ=n=>n.startsWith("--");function $Z(n,e,t){KZ(e)?n.style.setProperty(e,t):n.style[e]=t}const JZ=Tx(()=>window.ScrollTimeline!==void 0),QZ={};function ZZ(n,e){const t=Tx(n);return()=>{var i;return(i=QZ[e])!=null?i:t()}}const VU=ZZ(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch(n){return!1}return!0},"linearEasing"),qh=([n,e,t,i])=>"cubic-bezier(".concat(n,", ").concat(e,", ").concat(t,", ").concat(i,")"),dI={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:qh([0,.65,.55,1]),circOut:qh([.55,0,1,.45]),backIn:qh([.31,.01,.66,-.59]),backOut:qh([.33,1.53,.69,.99])};function WU(n,e){if(n)return typeof n=="function"?VU()?UU(n,e):"ease-out":AU(n)?qh(n):Array.isArray(n)?n.map(t=>WU(t,e)||dI.easeOut):dI[n]}function eee(n,e,t,{delay:i=0,duration:r=300,repeat:s=0,repeatType:o="loop",ease:a="easeOut",times:l}={},c=void 0){const u={[e]:t};l&&(u.offset=l);const d=WU(a,r);Array.isArray(d)&&(u.easing=d);const f={delay:i,duration:r,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"};return c&&(f.pseudoElement=c),n.animate(u,f)}function jU(n){return typeof n=="function"&&"applyToOptions"in n}function tee({type:n,...e}){var t,i;return jU(n)&&VU()?n.applyToOptions(e):((t=e.duration)!=null||(e.duration=300),(i=e.ease)!=null||(e.ease="easeOut"),e)}class nee extends Nx{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:t,name:i,keyframes:r,pseudoElement:s,allowFlatten:o=!1,finalKeyframe:a,onComplete:l}=e;this.isPseudoElement=!!s,this.allowFlatten=o,this.options=e,Mx(typeof e.type!="string");const c=tee(e);this.animation=eee(t,i,r,c,s),c.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const u=Ux(r,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(u):$Z(t,i,u),this.animation.cancel()}l==null||l(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,t;(t=(e=this.animation).finish)==null||t.call(e)}cancel(){try{this.animation.cancel()}catch(e){}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,t;this.isPseudoElement||(t=(e=this.animation).commitStyles)==null||t.call(e)}get duration(){var t,i;const e=((i=(t=this.animation.effect)==null?void 0:t.getComputedTiming)==null?void 0:i.call(t).duration)||0;return cs(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+cs(e)}get time(){return cs(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Lu(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){var i;return this.allowFlatten&&((i=this.animation.effect)==null||i.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&JZ()?(this.animation.timeline=e,Ou):t(this)}}const qU={anticipate:SU,backInOut:wU,circInOut:xU};function iee(n){return n in qU}function ree(n){typeof n.ease=="string"&&iee(n.ease)&&(n.ease=qU[n.ease])}const fI=10;class see extends nee{constructor(e){ree(e),BU(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){var c;const{motionValue:t,onUpdate:i,onComplete:r,element:s,...o}=this.options;if(!t)return;if(e!==void 0){t.set(e);return}const a=new Fx({...o,autoplay:!1}),l=Lu((c=this.finishedTime)!=null?c:this.time);t.setWithVelocity(a.sample(l-fI).value,a.sample(l).value,fI),a.stop()}}const pI=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(yf.test(n)||n==="0")&&!n.startsWith("url("));function oee(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function aee(n,e,t,i){const r=n[0];if(r===null)return!1;if(e==="display"||e==="visibility")return!0;const s=n[n.length-1],o=pI(r,e),a=pI(s,e);return!o||!a?!1:oee(n)||(t==="spring"||jU(t))&&i}function lee(n){n.duration=0,n.type="keyframes"}const cee=new Set(["opacity","clipPath","filter","transform"]),uee=Tx(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function hee(n){var u;const{motionValue:e,name:t,repeatDelay:i,repeatType:r,damping:s,type:o}=n;if(!(((u=e==null?void 0:e.owner)==null?void 0:u.current)instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=e.owner.getProps();return uee()&&t&&cee.has(t)&&(t!=="transform"||!c)&&!l&&!i&&r!=="mirror"&&s!==0&&o!=="inertia"}const dee=40;class uae extends Nx{constructor({autoplay:e=!0,delay:t=0,type:i="keyframes",repeat:r=0,repeatDelay:s=0,repeatType:o="loop",keyframes:a,name:l,motionValue:c,element:u,...d}){var v;super(),this.stop=()=>{var g,y;this._animation&&(this._animation.stop(),(g=this.stopTimeline)==null||g.call(this)),(y=this.keyframeResolver)==null||y.cancel()},this.createdAt=us.now();const f={autoplay:e,delay:t,type:i,repeat:r,repeatDelay:s,repeatType:o,name:l,motionValue:c,element:u,...d},m=(u==null?void 0:u.KeyframeResolver)||GU;this.keyframeResolver=new m(a,(g,y,b)=>this.onKeyframesResolved(g,y,f,!b),l,c,u),(v=this.keyframeResolver)==null||v.scheduleResolve()}onKeyframesResolved(e,t,i,r){this.keyframeResolver=void 0;const{name:s,type:o,velocity:a,delay:l,isHandoff:c,onUpdate:u}=i;this.resolvedAt=us.now(),aee(e,s,o,a)||((Hd.instantAnimations||!l)&&(u==null||u(Ux(e,i,t))),e[0]=e[e.length-1],lee(i),i.repeat=0);const f={startTime:r?this.resolvedAt?this.resolvedAt-this.createdAt>dee?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:t,...i,keyframes:e},m=!c&&hee(f)?new see({...f,element:f.motionValue.owner.current}):new Fx(f);m.finished.then(()=>this.notifyFinished()).catch(Ou),this.pendingTimeline&&(this.stopTimeline=m.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=m}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),YZ()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const fee=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function pee(n){const e=fee.exec(n);if(!e)return[,];const[,t,i,r]=e;return["--".concat(t!=null?t:i),r]}function XU(n,e,t=1){const[i,r]=pee(n);if(!i)return;const s=window.getComputedStyle(e).getPropertyValue(i);if(s){const o=s.trim();return BQ(o)?parseFloat(o):o}return Dx(r)?XU(r,e,t+1):r}function hae(n,e){var t,i;return(i=(t=n==null?void 0:n[e])!=null?t:n==null?void 0:n.default)!=null?i:n}const mee=new Set(["width","height","top","left","right","bottom",...Bx]),gee={test:n=>n==="auto",parse:n=>n},YU=n=>e=>e.test(n),KU=[ku,Lt,eu,Oo,lZ,aZ,gee],mI=n=>KU.find(YU(n));function vee(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||zQ(n):!0}const _ee=new Set(["brightness","contrast","saturate","opacity"]);function yee(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[i]=t.match(Px)||[];if(!i)return n;const r=t.replace(i,"");let s=_ee.has(e)?1:0;return i!==t&&(s*=100),e+"("+s+r+")"}const bee=/\b([a-z-]*)\(.*?\)/gu,zw={...yf,getAnimatableNone:n=>{const e=n.match(bee);return e?e.map(yee).join(" "):n}},gI={...ku,transform:Math.round},wee={rotate:Oo,rotateX:Oo,rotateY:Oo,rotateZ:Oo,scale:Tm,scaleX:Tm,scaleY:Tm,scaleZ:Tm,skew:Oo,skewX:Oo,skewY:Oo,distance:Lt,translateX:Lt,translateY:Lt,translateZ:Lt,x:Lt,y:Lt,z:Lt,perspective:Lt,transformPerspective:Lt,opacity:Gd,originX:nI,originY:nI,originZ:Lt},See={borderWidth:Lt,borderTopWidth:Lt,borderRightWidth:Lt,borderBottomWidth:Lt,borderLeftWidth:Lt,borderRadius:Lt,radius:Lt,borderTopLeftRadius:Lt,borderTopRightRadius:Lt,borderBottomRightRadius:Lt,borderBottomLeftRadius:Lt,width:Lt,maxWidth:Lt,height:Lt,maxHeight:Lt,top:Lt,right:Lt,bottom:Lt,left:Lt,padding:Lt,paddingTop:Lt,paddingRight:Lt,paddingBottom:Lt,paddingLeft:Lt,margin:Lt,marginTop:Lt,marginRight:Lt,marginBottom:Lt,marginLeft:Lt,backgroundPositionX:Lt,backgroundPositionY:Lt,...wee,zIndex:gI,fillOpacity:Gd,strokeOpacity:Gd,numOctaves:gI},xee={...See,color:oi,backgroundColor:oi,outlineColor:oi,fill:oi,stroke:oi,borderColor:oi,borderTopColor:oi,borderRightColor:oi,borderBottomColor:oi,borderLeftColor:oi,filter:zw,WebkitFilter:zw},Eee=n=>xee[n];function Aee(n,e){let t=Eee(n);return t!==zw&&(t=yf),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const Mee=new Set(["auto","none","0"]);function Tee(n,e,t){let i=0,r;for(;i<n.length&&!r;){const s=n[i];typeof s=="string"&&!Mee.has(s)&&Vd(s).values.length&&(r=n[i]),i++}if(r&&t)for(const s of e)n[s]=Aee(t,r)}class dae extends GU{constructor(e,t,i,r,s){super(e,t,i,r,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:i}=this;if(!t||!t.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),Dx(c))){const u=XU(c,t.current);u!==void 0&&(e[l]=u),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!mee.has(i)||e.length!==2)return;const[r,s]=e,o=mI(r),a=mI(s);if(o!==a)if(hI(o)&&hI(a))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else wl[i]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,i=[];for(let r=0;r<e.length;r++)(e[r]===null||vee(e[r]))&&i.push(r);i.length&&Tee(e,i,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:i}=this;if(!e||!e.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=wl[i](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const r=t[t.length-1];r!==void 0&&e.getValue(i,r).jump(r,!1)}measureEndState(){var a;const{element:e,name:t,unresolvedKeyframes:i}=this;if(!e||!e.current)return;const r=e.getValue(t);r&&r.jump(this.measuredOrigin,!1);const s=i.length-1,o=i[s];i[s]=wl[t](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(a=this.removedTransforms)!=null&&a.length&&this.removedTransforms.forEach(([l,c])=>{e.getValue(l).set(c)}),this.resolveNoneKeyframes()}}function $U(n,e,t){if(n instanceof EventTarget)return[n];if(typeof n=="string"){const r=document.querySelectorAll(n);return r?Array.from(r):[]}return Array.from(n)}const fae=(n,e)=>e&&typeof n=="number"?e.transform(n):n;function Cee(n){return pU(n)&&"offsetHeight"in n}const vI=30,Ree=n=>!isNaN(parseFloat(n)),_I={current:void 0};class Iee{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=i=>{var s;const r=us.now();if(this.updatedAt!==r&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&((s=this.events.change)==null||s.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=us.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=Ree(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new GQ);const i=this.events[e].add(t);return e==="change"?()=>{i(),bu.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,i){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return _I.current&&_I.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const e=us.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>vI)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,vI);return gU(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,t;(e=this.dependents)==null||e.clear(),(t=this.events.destroy)==null||t.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function pae(n,e){return new Iee(n,e)}const{schedule:mae}=MU(queueMicrotask,!1),rs={x:!1,y:!1};function JU(){return rs.x||rs.y}function gae(n){return n==="x"||n==="y"?rs[n]?null:(rs[n]=!0,()=>{rs[n]=!1}):rs.x||rs.y?null:(rs.x=rs.y=!0,()=>{rs.x=rs.y=!1})}function QU(n,e){const t=$U(n),i=new AbortController,r={passive:!0,...e,signal:i.signal};return[t,r,()=>i.abort()]}function yI(n){return!(n.pointerType==="touch"||JU())}function vae(n,e,t={}){const[i,r,s]=QU(n,t),o=a=>{if(!yI(a))return;const{target:l}=a,c=e(l,a);if(typeof c!="function"||!l)return;const u=d=>{yI(d)&&(c(d),l.removeEventListener("pointerleave",u))};l.addEventListener("pointerleave",u,r)};return i.forEach(a=>{a.addEventListener("pointerenter",o,r)}),s}const ZU=(n,e)=>e?n===e?!0:ZU(n,e.parentElement):!1,Dee=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,Pee=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Oee(n){return Pee.has(n.tagName)||n.tabIndex!==-1}const Wm=new WeakSet;function bI(n){return e=>{e.key==="Enter"&&n(e)}}function ob(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const Lee=(n,e)=>{const t=n.currentTarget;if(!t)return;const i=bI(()=>{if(Wm.has(t))return;ob(t,"down");const r=bI(()=>{ob(t,"up")}),s=()=>ob(t,"cancel");t.addEventListener("keyup",r,e),t.addEventListener("blur",s,e)});t.addEventListener("keydown",i,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",i),e)};function wI(n){return Dee(n)&&!JU()}function _ae(n,e,t={}){const[i,r,s]=QU(n,t),o=a=>{const l=a.currentTarget;if(!wI(a))return;Wm.add(l);const c=e(l,a),u=(m,v)=>{window.removeEventListener("pointerup",d),window.removeEventListener("pointercancel",f),Wm.has(l)&&Wm.delete(l),wI(m)&&typeof c=="function"&&c(m,{success:v})},d=m=>{u(m,l===window||l===document||t.useGlobalTarget||ZU(l,m.target))},f=m=>{u(m,!1)};window.addEventListener("pointerup",d,r),window.addEventListener("pointercancel",f,r)};return i.forEach(a=>{(t.useGlobalTarget?window:a).addEventListener("pointerdown",o,r),Cee(a)&&(a.addEventListener("focus",c=>Lee(c,r)),!Oee(a)&&!a.hasAttribute("tabindex")&&(a.tabIndex=0))}),s}function eN(n){return pU(n)&&"ownerSVGElement"in n}const jm=new WeakMap;let Lo;const tN=(n,e,t)=>(i,r)=>r&&r[0]?r[0][n+"Size"]:eN(i)&&"getBBox"in i?i.getBBox()[e]:i[t],kee=tN("inline","width","offsetWidth"),Uee=tN("block","height","offsetHeight");function Nee({target:n,borderBoxSize:e}){var t;(t=jm.get(n))==null||t.forEach(i=>{i(n,{get width(){return kee(n,e)},get height(){return Uee(n,e)}})})}function Fee(n){n.forEach(Nee)}function Bee(){typeof ResizeObserver>"u"||(Lo=new ResizeObserver(Fee))}function zee(n,e){Lo||Bee();const t=$U(n);return t.forEach(i=>{let r=jm.get(i);r||(r=new Set,jm.set(i,r)),r.add(e),Lo==null||Lo.observe(i)}),()=>{t.forEach(i=>{const r=jm.get(i);r==null||r.delete(e),r!=null&&r.size||Lo==null||Lo.unobserve(i)})}}const qm=new Set;let Yc;function Hee(){Yc=()=>{const n={get width(){return window.innerWidth},get height(){return window.innerHeight}};qm.forEach(e=>e(n))},window.addEventListener("resize",Yc)}function Gee(n){return qm.add(n),Yc||Hee(),()=>{qm.delete(n),!qm.size&&typeof Yc=="function"&&(window.removeEventListener("resize",Yc),Yc=void 0)}}function yae(n,e){return typeof n=="function"?Gee(n):zee(n,e)}function bae(n,e){let t;const i=()=>{const{currentTime:r}=e,o=(r===null?0:r.value)/100;t!==o&&n(o),t=o};return bu.preUpdate(i,!0),()=>TU(i)}function wae(n){return eN(n)&&n.tagName==="svg"}function Sae(...n){const e=!Array.isArray(n[0]),t=e?0:-1,i=n[0+t],r=n[1+t],s=n[2+t],o=n[3+t],a=FU(r,s,o);return e?a(i):a}const Vee=n=>!!(n&&n.getVelocity);function xae(n,e,t){const i=n.get();let r=null,s=i,o;const a=typeof i=="string"?i.replace(/[\d.-]/g,""):void 0,l=()=>{r&&(r.stop(),r=null)},c=()=>{l(),r=new Fx({keyframes:[xI(n.get()),xI(s)],velocity:n.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01,...t,onUpdate:o})};if(n.attach((u,d)=>(s=u,o=f=>d(SI(f,a)),bu.postRender(c),n.get()),l),Vee(e)){const u=e.on("change",f=>n.set(SI(f,a))),d=n.on("destroy",u);return()=>{u(),d()}}return l}function SI(n,e){return e?n+e:n}function xI(n){return typeof n=="number"?n:parseFloat(n)}const Wee=[...KU,oi,yf],Eae=n=>Wee.find(YU(n));function Aae(n,e,{checkForDefaultPrevented:t=!0}={}){return function(r){if(n==null||n(r),t===!1||!r.defaultPrevented)return e==null?void 0:e(r)}}var iv=function(){return iv=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++){t=arguments[i];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},iv.apply(this,arguments)};function jee(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t}function Mae(n,e,t){if(t||arguments.length===2)for(var i=0,r=e.length,s;i<r;i++)(s||!(i in e))&&(s||(s=Array.prototype.slice.call(e,0,i)),s[i]=e[i]);return n.concat(s||Array.prototype.slice.call(e))}function ab(n,e){return typeof n=="function"?n(e):n&&(n.current=e),n}function qee(n,e){var t=Bi.useState(function(){return{value:n,callback:e,facade:{get current(){return t.value},set current(i){var r=t.value;r!==i&&(t.value=i,t.callback(i,r))}}}})[0];return t.callback=e,t.facade}var Xee=typeof window<"u"?Bi.useLayoutEffect:Bi.useEffect,EI=new WeakMap;function Tae(n,e){var t=qee(null,function(i){return n.forEach(function(r){return ab(r,i)})});return Xee(function(){var i=EI.get(t);if(i){var r=new Set(i),s=new Set(n),o=t.current;r.forEach(function(a){s.has(a)||ab(a,null)}),s.forEach(function(a){r.has(a)||ab(a,o)})}EI.set(t,n)},[n]),t}function Yee(n){return n}function Kee(n,e){e===void 0&&(e=Yee);var t=[],i=!1,r={read:function(){if(i)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:n},useMedium:function(s){var o=e(s,i);return t.push(o),function(){t=t.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(i=!0;t.length;){var o=t;t=[],o.forEach(s)}t={push:function(a){return s(a)},filter:function(){return t}}},assignMedium:function(s){i=!0;var o=[];if(t.length){var a=t;t=[],a.forEach(s),o=t}var l=function(){var u=o;o=[],u.forEach(s)},c=function(){return Promise.resolve().then(l)};c(),t={push:function(u){o.push(u),c()},filter:function(u){return o=o.filter(u),t}}}};return r}function Cae(n){n===void 0&&(n={});var e=Kee(null);return e.options=iv({async:!0,ssr:!1},n),e}var nN=function(n){var e=n.sideCar,t=jee(n,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var i=e.read();if(!i)throw new Error("Sidecar medium not found");return Bi.createElement(i,iv({},t))};nN.isSideCarExport=!0;function Rae(n,e){return n.useMedium(e),nN}var Iae=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__},$ee=function(n){if(typeof document>"u")return null;var e=Array.isArray(n)?n[0]:n;return e.ownerDocument.body},Nc=new WeakMap,Cm=new WeakMap,Rm={},lb=0,iN=function(n){return n&&(n.host||iN(n.parentNode))},Jee=function(n,e){return e.map(function(t){if(n.contains(t))return t;var i=iN(t);return i&&n.contains(i)?i:(console.error("aria-hidden",t,"in not contained inside",n,". Doing nothing"),null)}).filter(function(t){return!!t})},Qee=function(n,e,t,i){var r=Jee(e,Array.isArray(n)?n:[n]);Rm[t]||(Rm[t]=new WeakMap);var s=Rm[t],o=[],a=new Set,l=new Set(r),c=function(d){!d||a.has(d)||(a.add(d),c(d.parentNode))};r.forEach(c);var u=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(f){if(a.has(f))u(f);else try{var m=f.getAttribute(i),v=m!==null&&m!=="false",g=(Nc.get(f)||0)+1,y=(s.get(f)||0)+1;Nc.set(f,g),s.set(f,y),o.push(f),g===1&&v&&Cm.set(f,!0),y===1&&f.setAttribute(t,"true"),v||f.setAttribute(i,"true")}catch(b){console.error("aria-hidden: cannot operate on ",f,b)}})};return u(e),a.clear(),lb++,function(){o.forEach(function(d){var f=Nc.get(d)-1,m=s.get(d)-1;Nc.set(d,f),s.set(d,m),f||(Cm.has(d)||d.removeAttribute(i),Cm.delete(d)),m||d.removeAttribute(t)}),lb--,lb||(Nc=new WeakMap,Nc=new WeakMap,Cm=new WeakMap,Rm={})}},Dae=function(n,e,t){t===void 0&&(t="data-aria-hidden");var i=Array.from(Array.isArray(n)?n:[n]),r=$ee(n);return r?(i.push.apply(i,Array.from(r.querySelectorAll("[aria-live], script"))),Qee(i,r,t,"aria-hidden")):function(){return null}},Zee=1e-6,tr=typeof Float32Array<"u"?Float32Array:Array;function ete(){var n=new tr(9);return tr!=Float32Array&&(n[1]=0,n[2]=0,n[3]=0,n[5]=0,n[6]=0,n[7]=0),n[0]=1,n[4]=1,n[8]=1,n}function Pae(){var n=new tr(16);return tr!=Float32Array&&(n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0),n[0]=1,n[5]=1,n[10]=1,n[15]=1,n}function Oae(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15],n}function Lae(n,e){var t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=e[9],f=e[10],m=e[11],v=e[12],g=e[13],y=e[14],b=e[15],S=t*a-i*o,x=t*l-r*o,A=t*c-s*o,E=i*l-r*a,M=i*c-s*a,I=r*c-s*l,R=u*g-d*v,C=u*y-f*v,D=u*b-m*v,L=d*y-f*g,z=d*b-m*g,G=f*b-m*y,H=S*G-x*z+A*L+E*D-M*C+I*R;return H?(H=1/H,n[0]=(a*G-l*z+c*L)*H,n[1]=(r*z-i*G-s*L)*H,n[2]=(g*I-y*M+b*E)*H,n[3]=(f*M-d*I-m*E)*H,n[4]=(l*D-o*G-c*C)*H,n[5]=(t*G-r*D+s*C)*H,n[6]=(y*A-v*I-b*x)*H,n[7]=(u*I-f*A+m*x)*H,n[8]=(o*z-a*D+c*R)*H,n[9]=(i*D-t*z-s*R)*H,n[10]=(v*M-g*A+b*S)*H,n[11]=(d*A-u*M-m*S)*H,n[12]=(a*C-o*L-l*R)*H,n[13]=(t*L-i*C+r*R)*H,n[14]=(g*x-v*E-y*S)*H,n[15]=(u*E-d*x+f*S)*H,n):null}function kae(n,e,t){var i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=e[6],u=e[7],d=e[8],f=e[9],m=e[10],v=e[11],g=e[12],y=e[13],b=e[14],S=e[15],x=t[0],A=t[1],E=t[2],M=t[3];return n[0]=x*i+A*a+E*d+M*g,n[1]=x*r+A*l+E*f+M*y,n[2]=x*s+A*c+E*m+M*b,n[3]=x*o+A*u+E*v+M*S,x=t[4],A=t[5],E=t[6],M=t[7],n[4]=x*i+A*a+E*d+M*g,n[5]=x*r+A*l+E*f+M*y,n[6]=x*s+A*c+E*m+M*b,n[7]=x*o+A*u+E*v+M*S,x=t[8],A=t[9],E=t[10],M=t[11],n[8]=x*i+A*a+E*d+M*g,n[9]=x*r+A*l+E*f+M*y,n[10]=x*s+A*c+E*m+M*b,n[11]=x*o+A*u+E*v+M*S,x=t[12],A=t[13],E=t[14],M=t[15],n[12]=x*i+A*a+E*d+M*g,n[13]=x*r+A*l+E*f+M*y,n[14]=x*s+A*c+E*m+M*b,n[15]=x*o+A*u+E*v+M*S,n}function Uae(n,e){return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=e[0],n[13]=e[1],n[14]=e[2],n[15]=1,n}function Nae(n,e){return n[0]=e[0],n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=e[1],n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=e[2],n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function tte(n,e,t,i,r){var s=1/Math.tan(e/2);if(n[0]=s/t,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=s,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[11]=-1,n[12]=0,n[13]=0,n[15]=0,r!=null&&r!==1/0){var o=1/(i-r);n[10]=(r+i)*o,n[14]=2*r*i*o}else n[10]=-1,n[14]=-2*i;return n}var Fae=tte;function Bae(n,e,t,i){var r=e[0],s=e[1],o=e[2],a=i[0],l=i[1],c=i[2],u=r-t[0],d=s-t[1],f=o-t[2],m=u*u+d*d+f*f;m>0&&(m=1/Math.sqrt(m),u*=m,d*=m,f*=m);var v=l*f-c*d,g=c*u-a*f,y=a*d-l*u;return m=v*v+g*g+y*y,m>0&&(m=1/Math.sqrt(m),v*=m,g*=m,y*=m),n[0]=v,n[1]=g,n[2]=y,n[3]=0,n[4]=d*y-f*g,n[5]=f*v-u*y,n[6]=u*g-d*v,n[7]=0,n[8]=u,n[9]=d,n[10]=f,n[11]=0,n[12]=r,n[13]=s,n[14]=o,n[15]=1,n}function rN(){var n=new tr(3);return tr!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0),n}function nte(n){var e=n[0],t=n[1],i=n[2];return Math.sqrt(e*e+t*t+i*i)}function AI(n,e,t){var i=new tr(3);return i[0]=n,i[1]=e,i[2]=t,i}function zae(n,e,t){return n[0]=e[0]*t,n[1]=e[1]*t,n[2]=e[2]*t,n}function Hae(n,e){var t=e[0]-n[0],i=e[1]-n[1],r=e[2]-n[2];return t*t+i*i+r*r}function Gae(n,e){return n[0]=-e[0],n[1]=-e[1],n[2]=-e[2],n}function ite(n,e){var t=e[0],i=e[1],r=e[2],s=t*t+i*i+r*r;return s>0&&(s=1/Math.sqrt(s)),n[0]=e[0]*s,n[1]=e[1]*s,n[2]=e[2]*s,n}function rte(n,e){return n[0]*e[0]+n[1]*e[1]+n[2]*e[2]}function cb(n,e,t){var i=e[0],r=e[1],s=e[2],o=t[0],a=t[1],l=t[2];return n[0]=r*l-s*a,n[1]=s*o-i*l,n[2]=i*a-r*o,n}function Vae(n,e,t){var i=t[0],r=t[1],s=t[2],o=t[3],a=e[0],l=e[1],c=e[2],u=r*c-s*l,d=s*a-i*c,f=i*l-r*a;return u=u+u,d=d+d,f=f+f,n[0]=a+o*u+r*f-s*d,n[1]=l+o*d+s*u-i*f,n[2]=c+o*f+i*d-r*u,n}var ste=nte;(function(){var n=rN();return function(e,t,i,r,s,o){var a,l;for(t||(t=3),i||(i=0),r?l=Math.min(r*t+i,e.length):l=e.length,a=i;a<l;a+=t)n[0]=e[a],n[1]=e[a+1],n[2]=e[a+2],s(n,n,o),e[a]=n[0],e[a+1]=n[1],e[a+2]=n[2];return e}})();function ote(){var n=new tr(4);return tr!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0,n[3]=0),n}function ate(n,e){var t=e[0],i=e[1],r=e[2],s=e[3],o=t*t+i*i+r*r+s*s;return o>0&&(o=1/Math.sqrt(o)),n[0]=t*o,n[1]=i*o,n[2]=r*o,n[3]=s*o,n}(function(){var n=ote();return function(e,t,i,r,s,o){var a,l;for(t||(t=4),i||(i=0),r?l=Math.min(r*t+i,e.length):l=e.length,a=i;a<l;a+=t)n[0]=e[a],n[1]=e[a+1],n[2]=e[a+2],n[3]=e[a+3],s(n,n,o),e[a]=n[0],e[a+1]=n[1],e[a+2]=n[2],e[a+3]=n[3];return e}})();function MI(){var n=new tr(4);return tr!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0),n[3]=1,n}function lte(n,e,t){t=t*.5;var i=Math.sin(t);return n[0]=i*e[0],n[1]=i*e[1],n[2]=i*e[2],n[3]=Math.cos(t),n}function Wae(n,e,t){var i=e[0],r=e[1],s=e[2],o=e[3],a=t[0],l=t[1],c=t[2],u=t[3];return n[0]=i*u+o*a+r*c-s*l,n[1]=r*u+o*l+s*a-i*c,n[2]=s*u+o*c+i*l-r*a,n[3]=o*u-i*a-r*l-s*c,n}function ub(n,e,t,i){var r=e[0],s=e[1],o=e[2],a=e[3],l=t[0],c=t[1],u=t[2],d=t[3],f,m,v,g,y;return m=r*l+s*c+o*u+a*d,m<0&&(m=-m,l=-l,c=-c,u=-u,d=-d),1-m>Zee?(f=Math.acos(m),v=Math.sin(f),g=Math.sin((1-i)*f)/v,y=Math.sin(i*f)/v):(g=1-i,y=i),n[0]=g*r+y*l,n[1]=g*s+y*c,n[2]=g*o+y*u,n[3]=g*a+y*d,n}function jae(n,e){return n[0]=-e[0],n[1]=-e[1],n[2]=-e[2],n[3]=e[3],n}function cte(n,e){var t=e[0]+e[4]+e[8],i;if(t>0)i=Math.sqrt(t+1),n[3]=.5*i,i=.5/i,n[0]=(e[5]-e[7])*i,n[1]=(e[6]-e[2])*i,n[2]=(e[1]-e[3])*i;else{var r=0;e[4]>e[0]&&(r=1),e[8]>e[r*3+r]&&(r=2);var s=(r+1)%3,o=(r+2)%3;i=Math.sqrt(e[r*3+r]-e[s*3+s]-e[o*3+o]+1),n[r]=.5*i,i=.5/i,n[3]=(e[s*3+o]-e[o*3+s])*i,n[s]=(e[s*3+r]+e[r*3+s])*i,n[o]=(e[o*3+r]+e[r*3+o])*i}return n}var sN=ate;(function(){var n=rN(),e=AI(1,0,0),t=AI(0,1,0);return function(i,r,s){var o=rte(r,s);return o<-.999999?(cb(n,e,r),ste(n)<1e-6&&cb(n,t,r),ite(n,n),lte(i,n,Math.PI),i):o>.999999?(i[0]=0,i[1]=0,i[2]=0,i[3]=1,i):(cb(n,r,s),i[0]=n[0],i[1]=n[1],i[2]=n[2],i[3]=1+o,sN(i,i))}})();(function(){var n=MI(),e=MI();return function(t,i,r,s,o,a){return ub(n,i,o,a),ub(e,r,s,a),ub(t,n,e,2*a*(1-a)),t}})();(function(){var n=ete();return function(e,t,i,r){return n[0]=i[0],n[3]=i[1],n[6]=i[2],n[1]=r[0],n[4]=r[1],n[7]=r[2],n[2]=-t[0],n[5]=-t[1],n[8]=-t[2],sN(e,cte(e,n))}})();function ute(){var n=new tr(2);return tr!=Float32Array&&(n[0]=0,n[1]=0),n}function qae(n){var e=new tr(2);return e[0]=n[0],e[1]=n[1],e}function Xae(n,e){var t=new tr(2);return t[0]=n,t[1]=e,t}function Yae(n,e){return n[0]=e[0],n[1]=e[1],n}function Kae(n,e,t){return n[0]=e,n[1]=t,n}function $ae(n,e,t){return n[0]=e[0]+t[0],n[1]=e[1]+t[1],n}function hte(n,e,t){return n[0]=e[0]-t[0],n[1]=e[1]-t[1],n}function Jae(n,e,t){return n[0]=e[0]*t,n[1]=e[1]*t,n}function dte(n){var e=n[0],t=n[1];return e*e+t*t}var Qae=hte,Zae=dte;(function(){var n=ute();return function(e,t,i,r,s,o){var a,l;for(t||(t=2),i||(i=0),r?l=Math.min(r*t+i,e.length):l=e.length,a=i;a<l;a+=t)n[0]=e[a],n[1]=e[a+1],s(n,n,o),e[a]=n[0],e[a+1]=n[1];return e}})();function oN(n,e){return function(){return n.apply(e,arguments)}}const{toString:fte}=Object.prototype,{getPrototypeOf:zx}=Object,{iterator:$v,toStringTag:aN}=Symbol,Jv=(n=>e=>{const t=fte.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),gs=n=>(n=n.toLowerCase(),e=>Jv(e)===n),Qv=n=>e=>typeof e===n,{isArray:Uu}=Array,wu=Qv("undefined");function bf(n){return n!==null&&!wu(n)&&n.constructor!==null&&!wu(n.constructor)&&pr(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const lN=gs("ArrayBuffer");function pte(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&lN(n.buffer),e}const mte=Qv("string"),pr=Qv("function"),cN=Qv("number"),wf=n=>n!==null&&typeof n=="object",gte=n=>n===!0||n===!1,Xm=n=>{if(Jv(n)!=="object")return!1;const e=zx(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(aN in n)&&!($v in n)},vte=n=>{if(!wf(n)||bf(n))return!1;try{return Object.keys(n).length===0&&Object.getPrototypeOf(n)===Object.prototype}catch(e){return!1}},_te=gs("Date"),yte=gs("File"),bte=gs("Blob"),wte=gs("FileList"),Ste=n=>wf(n)&&pr(n.pipe),xte=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||pr(n.append)&&((e=Jv(n))==="formdata"||e==="object"&&pr(n.toString)&&n.toString()==="[object FormData]"))},Ete=gs("URLSearchParams"),[Ate,Mte,Tte,Cte]=["ReadableStream","Request","Response","Headers"].map(gs),Rte=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Sf(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let i,r;if(typeof n!="object"&&(n=[n]),Uu(n))for(i=0,r=n.length;i<r;i++)e.call(null,n[i],i,n);else{if(bf(n))return;const s=t?Object.getOwnPropertyNames(n):Object.keys(n),o=s.length;let a;for(i=0;i<o;i++)a=s[i],e.call(null,n[a],a,n)}}function uN(n,e){if(bf(n))return null;e=e.toLowerCase();const t=Object.keys(n);let i=t.length,r;for(;i-- >0;)if(r=t[i],e===r.toLowerCase())return r;return null}const dl=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,hN=n=>!wu(n)&&n!==dl;function Hw(){const{caseless:n,skipUndefined:e}=hN(this)&&this||{},t={},i=(r,s)=>{const o=n&&uN(t,s)||s;Xm(t[o])&&Xm(r)?t[o]=Hw(t[o],r):Xm(r)?t[o]=Hw({},r):Uu(r)?t[o]=r.slice():(!e||!wu(r))&&(t[o]=r)};for(let r=0,s=arguments.length;r<s;r++)arguments[r]&&Sf(arguments[r],i);return t}const Ite=(n,e,t,{allOwnKeys:i}={})=>(Sf(e,(r,s)=>{t&&pr(r)?n[s]=oN(r,t):n[s]=r},{allOwnKeys:i}),n),Dte=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),Pte=(n,e,t,i)=>{n.prototype=Object.create(e.prototype,i),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},Ote=(n,e,t,i)=>{let r,s,o;const a={};if(e=e||{},n==null)return e;do{for(r=Object.getOwnPropertyNames(n),s=r.length;s-- >0;)o=r[s],(!i||i(o,n,e))&&!a[o]&&(e[o]=n[o],a[o]=!0);n=t!==!1&&zx(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},Lte=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const i=n.indexOf(e,t);return i!==-1&&i===t},kte=n=>{if(!n)return null;if(Uu(n))return n;let e=n.length;if(!cN(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},Ute=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&zx(Uint8Array)),Nte=(n,e)=>{const i=(n&&n[$v]).call(n);let r;for(;(r=i.next())&&!r.done;){const s=r.value;e.call(n,s[0],s[1])}},Fte=(n,e)=>{let t;const i=[];for(;(t=n.exec(e))!==null;)i.push(t);return i},Bte=gs("HTMLFormElement"),zte=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,i,r){return i.toUpperCase()+r}),TI=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),Hte=gs("RegExp"),dN=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),i={};Sf(t,(r,s)=>{let o;(o=e(r,s,n))!==!1&&(i[s]=o||r)}),Object.defineProperties(n,i)},Gte=n=>{dN(n,(e,t)=>{if(pr(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const i=n[t];if(pr(i)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},Vte=(n,e)=>{const t={},i=r=>{r.forEach(s=>{t[s]=!0})};return Uu(n)?i(n):i(String(n).split(e)),t},Wte=()=>{},jte=(n,e)=>n!=null&&Number.isFinite(n=+n)?n:e;function qte(n){return!!(n&&pr(n.append)&&n[aN]==="FormData"&&n[$v])}const Xte=n=>{const e=new Array(10),t=(i,r)=>{if(wf(i)){if(e.indexOf(i)>=0)return;if(bf(i))return i;if(!("toJSON"in i)){e[r]=i;const s=Uu(i)?[]:{};return Sf(i,(o,a)=>{const l=t(o,r+1);!wu(l)&&(s[a]=l)}),e[r]=void 0,s}}return i};return t(n,0)},Yte=gs("AsyncFunction"),Kte=n=>n&&(wf(n)||pr(n))&&pr(n.then)&&pr(n.catch),fN=((n,e)=>n?setImmediate:e?((t,i)=>(dl.addEventListener("message",({source:r,data:s})=>{r===dl&&s===t&&i.length&&i.shift()()},!1),r=>{i.push(r),dl.postMessage(t,"*")}))("axios@".concat(Math.random()),[]):t=>setTimeout(t))(typeof setImmediate=="function",pr(dl.postMessage)),$te=typeof queueMicrotask<"u"?queueMicrotask.bind(dl):typeof process<"u"&&process.nextTick||fN,Jte=n=>n!=null&&pr(n[$v]),Ee={isArray:Uu,isArrayBuffer:lN,isBuffer:bf,isFormData:xte,isArrayBufferView:pte,isString:mte,isNumber:cN,isBoolean:gte,isObject:wf,isPlainObject:Xm,isEmptyObject:vte,isReadableStream:Ate,isRequest:Mte,isResponse:Tte,isHeaders:Cte,isUndefined:wu,isDate:_te,isFile:yte,isBlob:bte,isRegExp:Hte,isFunction:pr,isStream:Ste,isURLSearchParams:Ete,isTypedArray:Ute,isFileList:wte,forEach:Sf,merge:Hw,extend:Ite,trim:Rte,stripBOM:Dte,inherits:Pte,toFlatObject:Ote,kindOf:Jv,kindOfTest:gs,endsWith:Lte,toArray:kte,forEachEntry:Nte,matchAll:Fte,isHTMLForm:Bte,hasOwnProperty:TI,hasOwnProp:TI,reduceDescriptors:dN,freezeMethods:Gte,toObjectSet:Vte,toCamelCase:zte,noop:Wte,toFiniteNumber:jte,findKey:uN,global:dl,isContextDefined:hN,isSpecCompliantForm:qte,toJSONObject:Xte,isAsyncFn:Yte,isThenable:Kte,setImmediate:fN,asap:$te,isIterable:Jte};function Ft(n,e,t,i,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),i&&(this.request=i),r&&(this.response=r,this.status=r.status?r.status:null)}Ee.inherits(Ft,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Ee.toJSONObject(this.config),code:this.code,status:this.status}}});const pN=Ft.prototype,mN={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{mN[n]={value:n}});Object.defineProperties(Ft,mN);Object.defineProperty(pN,"isAxiosError",{value:!0});Ft.from=(n,e,t,i,r,s)=>{const o=Object.create(pN);Ee.toFlatObject(n,o,function(u){return u!==Error.prototype},c=>c!=="isAxiosError");const a=n&&n.message?n.message:"Error",l=e==null&&n?n.code:e;return Ft.call(o,a,l,t,i,r),n&&o.cause==null&&Object.defineProperty(o,"cause",{value:n,configurable:!0}),o.name=n&&n.name||"Error",s&&Object.assign(o,s),o};const Qte=null;function Gw(n){return Ee.isPlainObject(n)||Ee.isArray(n)}function gN(n){return Ee.endsWith(n,"[]")?n.slice(0,-2):n}function CI(n,e,t){return n?n.concat(e).map(function(r,s){return r=gN(r),!t&&s?"["+r+"]":r}).join(t?".":""):e}function Zte(n){return Ee.isArray(n)&&!n.some(Gw)}const ene=Ee.toFlatObject(Ee,{},null,function(e){return/^is[A-Z]/.test(e)});function Zv(n,e,t){if(!Ee.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,t=Ee.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(g,y){return!Ee.isUndefined(y[g])});const i=t.metaTokens,r=t.visitor||u,s=t.dots,o=t.indexes,l=(t.Blob||typeof Blob<"u"&&Blob)&&Ee.isSpecCompliantForm(e);if(!Ee.isFunction(r))throw new TypeError("visitor must be a function");function c(v){if(v===null)return"";if(Ee.isDate(v))return v.toISOString();if(Ee.isBoolean(v))return v.toString();if(!l&&Ee.isBlob(v))throw new Ft("Blob is not supported. Use a Buffer instead.");return Ee.isArrayBuffer(v)||Ee.isTypedArray(v)?l&&typeof Blob=="function"?new Blob([v]):Buffer.from(v):v}function u(v,g,y){let b=v;if(v&&!y&&typeof v=="object"){if(Ee.endsWith(g,"{}"))g=i?g:g.slice(0,-2),v=JSON.stringify(v);else if(Ee.isArray(v)&&Zte(v)||(Ee.isFileList(v)||Ee.endsWith(g,"[]"))&&(b=Ee.toArray(v)))return g=gN(g),b.forEach(function(x,A){!(Ee.isUndefined(x)||x===null)&&e.append(o===!0?CI([g],A,s):o===null?g:g+"[]",c(x))}),!1}return Gw(v)?!0:(e.append(CI(y,g,s),c(v)),!1)}const d=[],f=Object.assign(ene,{defaultVisitor:u,convertValue:c,isVisitable:Gw});function m(v,g){if(!Ee.isUndefined(v)){if(d.indexOf(v)!==-1)throw Error("Circular reference detected in "+g.join("."));d.push(v),Ee.forEach(v,function(b,S){(!(Ee.isUndefined(b)||b===null)&&r.call(e,b,Ee.isString(S)?S.trim():S,g,f))===!0&&m(b,g?g.concat(S):[S])}),d.pop()}}if(!Ee.isObject(n))throw new TypeError("data must be an object");return m(n),e}function RI(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(i){return e[i]})}function Hx(n,e){this._pairs=[],n&&Zv(n,this,e)}const vN=Hx.prototype;vN.append=function(e,t){this._pairs.push([e,t])};vN.toString=function(e){const t=e?function(i){return e.call(this,i,RI)}:RI;return this._pairs.map(function(r){return t(r[0])+"="+t(r[1])},"").join("&")};function tne(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function _N(n,e,t){if(!e)return n;const i=t&&t.encode||tne;Ee.isFunction(t)&&(t={serialize:t});const r=t&&t.serialize;let s;if(r?s=r(e,t):s=Ee.isURLSearchParams(e)?e.toString():new Hx(e,t).toString(i),s){const o=n.indexOf("#");o!==-1&&(n=n.slice(0,o)),n+=(n.indexOf("?")===-1?"?":"&")+s}return n}class II{constructor(){this.handlers=[]}use(e,t,i){return this.handlers.push({fulfilled:e,rejected:t,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Ee.forEach(this.handlers,function(i){i!==null&&e(i)})}}const yN={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},nne=typeof URLSearchParams<"u"?URLSearchParams:Hx,ine=typeof FormData<"u"?FormData:null,rne=typeof Blob<"u"?Blob:null,sne={isBrowser:!0,classes:{URLSearchParams:nne,FormData:ine,Blob:rne},protocols:["http","https","file","blob","url","data"]},Gx=typeof window<"u"&&typeof document<"u",Vw=typeof navigator=="object"&&navigator||void 0,one=Gx&&(!Vw||["ReactNative","NativeScript","NS"].indexOf(Vw.product)<0),ane=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",lne=Gx&&window.location.href||"http://localhost",cne=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Gx,hasStandardBrowserEnv:one,hasStandardBrowserWebWorkerEnv:ane,navigator:Vw,origin:lne},Symbol.toStringTag,{value:"Module"})),Fi={...cne,...sne};function une(n,e){return Zv(n,new Fi.classes.URLSearchParams,{visitor:function(t,i,r,s){return Fi.isNode&&Ee.isBuffer(t)?(this.append(i,t.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)},...e})}function hne(n){return Ee.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function dne(n){const e={},t=Object.keys(n);let i;const r=t.length;let s;for(i=0;i<r;i++)s=t[i],e[s]=n[s];return e}function bN(n){function e(t,i,r,s){let o=t[s++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=s>=t.length;return o=!o&&Ee.isArray(r)?r.length:o,l?(Ee.hasOwnProp(r,o)?r[o]=[r[o],i]:r[o]=i,!a):((!r[o]||!Ee.isObject(r[o]))&&(r[o]=[]),e(t,i,r[o],s)&&Ee.isArray(r[o])&&(r[o]=dne(r[o])),!a)}if(Ee.isFormData(n)&&Ee.isFunction(n.entries)){const t={};return Ee.forEachEntry(n,(i,r)=>{e(hne(i),r,t,0)}),t}return null}function fne(n,e,t){if(Ee.isString(n))try{return(e||JSON.parse)(n),Ee.trim(n)}catch(i){if(i.name!=="SyntaxError")throw i}return(t||JSON.stringify)(n)}const xf={transitional:yN,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const i=t.getContentType()||"",r=i.indexOf("application/json")>-1,s=Ee.isObject(e);if(s&&Ee.isHTMLForm(e)&&(e=new FormData(e)),Ee.isFormData(e))return r?JSON.stringify(bN(e)):e;if(Ee.isArrayBuffer(e)||Ee.isBuffer(e)||Ee.isStream(e)||Ee.isFile(e)||Ee.isBlob(e)||Ee.isReadableStream(e))return e;if(Ee.isArrayBufferView(e))return e.buffer;if(Ee.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(i.indexOf("application/x-www-form-urlencoded")>-1)return une(e,this.formSerializer).toString();if((a=Ee.isFileList(e))||i.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return Zv(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return s||r?(t.setContentType("application/json",!1),fne(e)):e}],transformResponse:[function(e){const t=this.transitional||xf.transitional,i=t&&t.forcedJSONParsing,r=this.responseType==="json";if(Ee.isResponse(e)||Ee.isReadableStream(e))return e;if(e&&Ee.isString(e)&&(i&&!this.responseType||r)){const o=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e,this.parseReviver)}catch(a){if(o)throw a.name==="SyntaxError"?Ft.from(a,Ft.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Fi.classes.FormData,Blob:Fi.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Ee.forEach(["delete","get","head","post","put","patch"],n=>{xf.headers[n]={}});const pne=Ee.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),mne=n=>{const e={};let t,i,r;return n&&n.split("\n").forEach(function(o){r=o.indexOf(":"),t=o.substring(0,r).trim().toLowerCase(),i=o.substring(r+1).trim(),!(!t||e[t]&&pne[t])&&(t==="set-cookie"?e[t]?e[t].push(i):e[t]=[i]:e[t]=e[t]?e[t]+", "+i:i)}),e},DI=Symbol("internals");function Uh(n){return n&&String(n).trim().toLowerCase()}function Ym(n){return n===!1||n==null?n:Ee.isArray(n)?n.map(Ym):String(n)}function gne(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=t.exec(n);)e[i[1]]=i[2];return e}const vne=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function hb(n,e,t,i,r){if(Ee.isFunction(i))return i.call(this,e,t);if(r&&(e=t),!!Ee.isString(e)){if(Ee.isString(i))return e.indexOf(i)!==-1;if(Ee.isRegExp(i))return i.test(e)}}function _ne(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,i)=>t.toUpperCase()+i)}function yne(n,e){const t=Ee.toCamelCase(" "+e);["get","set","has"].forEach(i=>{Object.defineProperty(n,i+t,{value:function(r,s,o){return this[i].call(this,e,r,s,o)},configurable:!0})})}let mr=class{constructor(e){e&&this.set(e)}set(e,t,i){const r=this;function s(a,l,c){const u=Uh(l);if(!u)throw new Error("header name must be a non-empty string");const d=Ee.findKey(r,u);(!d||r[d]===void 0||c===!0||c===void 0&&r[d]!==!1)&&(r[d||l]=Ym(a))}const o=(a,l)=>Ee.forEach(a,(c,u)=>s(c,u,l));if(Ee.isPlainObject(e)||e instanceof this.constructor)o(e,t);else if(Ee.isString(e)&&(e=e.trim())&&!vne(e))o(mne(e),t);else if(Ee.isObject(e)&&Ee.isIterable(e)){let a={},l,c;for(const u of e){if(!Ee.isArray(u))throw TypeError("Object iterator must return a key-value pair");a[c=u[0]]=(l=a[c])?Ee.isArray(l)?[...l,u[1]]:[l,u[1]]:u[1]}o(a,t)}else e!=null&&s(t,e,i);return this}get(e,t){if(e=Uh(e),e){const i=Ee.findKey(this,e);if(i){const r=this[i];if(!t)return r;if(t===!0)return gne(r);if(Ee.isFunction(t))return t.call(this,r,i);if(Ee.isRegExp(t))return t.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Uh(e),e){const i=Ee.findKey(this,e);return!!(i&&this[i]!==void 0&&(!t||hb(this,this[i],i,t)))}return!1}delete(e,t){const i=this;let r=!1;function s(o){if(o=Uh(o),o){const a=Ee.findKey(i,o);a&&(!t||hb(i,i[a],a,t))&&(delete i[a],r=!0)}}return Ee.isArray(e)?e.forEach(s):s(e),r}clear(e){const t=Object.keys(this);let i=t.length,r=!1;for(;i--;){const s=t[i];(!e||hb(this,this[s],s,e,!0))&&(delete this[s],r=!0)}return r}normalize(e){const t=this,i={};return Ee.forEach(this,(r,s)=>{const o=Ee.findKey(i,s);if(o){t[o]=Ym(r),delete t[s];return}const a=e?_ne(s):String(s).trim();a!==s&&delete t[s],t[a]=Ym(r),i[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return Ee.forEach(this,(i,r)=>{i!=null&&i!==!1&&(t[r]=e&&Ee.isArray(i)?i.join(", "):i)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const i=new this(e);return t.forEach(r=>i.set(r)),i}static accessor(e){const i=(this[DI]=this[DI]={accessors:{}}).accessors,r=this.prototype;function s(o){const a=Uh(o);i[a]||(yne(r,o),i[a]=!0)}return Ee.isArray(e)?e.forEach(s):s(e),this}};mr.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Ee.reduceDescriptors(mr.prototype,({value:n},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(i){this[t]=i}}});Ee.freezeMethods(mr);function db(n,e){const t=this||xf,i=e||t,r=mr.from(i.headers);let s=i.data;return Ee.forEach(n,function(a){s=a.call(t,s,r.normalize(),e?e.status:void 0)}),r.normalize(),s}function wN(n){return!!(n&&n.__CANCEL__)}function Nu(n,e,t){Ft.call(this,n==null?"canceled":n,Ft.ERR_CANCELED,e,t),this.name="CanceledError"}Ee.inherits(Nu,Ft,{__CANCEL__:!0});function SN(n,e,t){const i=t.config.validateStatus;!t.status||!i||i(t.status)?n(t):e(new Ft("Request failed with status code "+t.status,[Ft.ERR_BAD_REQUEST,Ft.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function bne(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function wne(n,e){n=n||10;const t=new Array(n),i=new Array(n);let r=0,s=0,o;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),u=i[s];o||(o=c),t[r]=l,i[r]=c;let d=s,f=0;for(;d!==r;)f+=t[d++],d=d%n;if(r=(r+1)%n,r===s&&(s=(s+1)%n),c-o<e)return;const m=u&&c-u;return m?Math.round(f*1e3/m):void 0}}function Sne(n,e){let t=0,i=1e3/e,r,s;const o=(c,u=Date.now())=>{t=u,r=null,s&&(clearTimeout(s),s=null),n(...c)};return[(...c)=>{const u=Date.now(),d=u-t;d>=i?o(c,u):(r=c,s||(s=setTimeout(()=>{s=null,o(r)},i-d)))},()=>r&&o(r)]}const rv=(n,e,t=3)=>{let i=0;const r=wne(50,250);return Sne(s=>{const o=s.loaded,a=s.lengthComputable?s.total:void 0,l=o-i,c=r(l),u=o<=a;i=o;const d={loaded:o,total:a,progress:a?o/a:void 0,bytes:l,rate:c||void 0,estimated:c&&a&&u?(a-o)/c:void 0,event:s,lengthComputable:a!=null,[e?"download":"upload"]:!0};n(d)},t)},PI=(n,e)=>{const t=n!=null;return[i=>e[0]({lengthComputable:t,total:n,loaded:i}),e[1]]},OI=n=>(...e)=>Ee.asap(()=>n(...e)),xne=Fi.hasStandardBrowserEnv?((n,e)=>t=>(t=new URL(t,Fi.origin),n.protocol===t.protocol&&n.host===t.host&&(e||n.port===t.port)))(new URL(Fi.origin),Fi.navigator&&/(msie|trident)/i.test(Fi.navigator.userAgent)):()=>!0,Ene=Fi.hasStandardBrowserEnv?{write(n,e,t,i,r,s){const o=[n+"="+encodeURIComponent(e)];Ee.isNumber(t)&&o.push("expires="+new Date(t).toGMTString()),Ee.isString(i)&&o.push("path="+i),Ee.isString(r)&&o.push("domain="+r),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(n){const e=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Ane(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function Mne(n,e){return e?n.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):n}function xN(n,e,t){let i=!Ane(e);return n&&(i||t==!1)?Mne(n,e):e}const LI=n=>n instanceof mr?{...n}:n;function Ll(n,e){e=e||{};const t={};function i(c,u,d,f){return Ee.isPlainObject(c)&&Ee.isPlainObject(u)?Ee.merge.call({caseless:f},c,u):Ee.isPlainObject(u)?Ee.merge({},u):Ee.isArray(u)?u.slice():u}function r(c,u,d,f){if(Ee.isUndefined(u)){if(!Ee.isUndefined(c))return i(void 0,c,d,f)}else return i(c,u,d,f)}function s(c,u){if(!Ee.isUndefined(u))return i(void 0,u)}function o(c,u){if(Ee.isUndefined(u)){if(!Ee.isUndefined(c))return i(void 0,c)}else return i(void 0,u)}function a(c,u,d){if(d in e)return i(c,u);if(d in n)return i(void 0,c)}const l={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,u,d)=>r(LI(c),LI(u),d,!0)};return Ee.forEach(Object.keys({...n,...e}),function(u){const d=l[u]||r,f=d(n[u],e[u],u);Ee.isUndefined(f)&&d!==a||(t[u]=f)}),t}const EN=n=>{const e=Ll({},n);let{data:t,withXSRFToken:i,xsrfHeaderName:r,xsrfCookieName:s,headers:o,auth:a}=e;if(e.headers=o=mr.from(o),e.url=_N(xN(e.baseURL,e.url,e.allowAbsoluteUrls),n.params,n.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):""))),Ee.isFormData(t)){if(Fi.hasStandardBrowserEnv||Fi.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(Ee.isFunction(t.getHeaders)){const l=t.getHeaders(),c=["content-type","content-length"];Object.entries(l).forEach(([u,d])=>{c.includes(u.toLowerCase())&&o.set(u,d)})}}if(Fi.hasStandardBrowserEnv&&(i&&Ee.isFunction(i)&&(i=i(e)),i||i!==!1&&xne(e.url))){const l=r&&s&&Ene.read(s);l&&o.set(r,l)}return e},Tne=typeof XMLHttpRequest<"u",Cne=Tne&&function(n){return new Promise(function(t,i){const r=EN(n);let s=r.data;const o=mr.from(r.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:c}=r,u,d,f,m,v;function g(){m&&m(),v&&v(),r.cancelToken&&r.cancelToken.unsubscribe(u),r.signal&&r.signal.removeEventListener("abort",u)}let y=new XMLHttpRequest;y.open(r.method.toUpperCase(),r.url,!0),y.timeout=r.timeout;function b(){if(!y)return;const x=mr.from("getAllResponseHeaders"in y&&y.getAllResponseHeaders()),E={data:!a||a==="text"||a==="json"?y.responseText:y.response,status:y.status,statusText:y.statusText,headers:x,config:n,request:y};SN(function(I){t(I),g()},function(I){i(I),g()},E),y=null}"onloadend"in y?y.onloadend=b:y.onreadystatechange=function(){!y||y.readyState!==4||y.status===0&&!(y.responseURL&&y.responseURL.indexOf("file:")===0)||setTimeout(b)},y.onabort=function(){y&&(i(new Ft("Request aborted",Ft.ECONNABORTED,n,y)),y=null)},y.onerror=function(A){const E=A&&A.message?A.message:"Network Error",M=new Ft(E,Ft.ERR_NETWORK,n,y);M.event=A||null,i(M),y=null},y.ontimeout=function(){let A=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const E=r.transitional||yN;r.timeoutErrorMessage&&(A=r.timeoutErrorMessage),i(new Ft(A,E.clarifyTimeoutError?Ft.ETIMEDOUT:Ft.ECONNABORTED,n,y)),y=null},s===void 0&&o.setContentType(null),"setRequestHeader"in y&&Ee.forEach(o.toJSON(),function(A,E){y.setRequestHeader(E,A)}),Ee.isUndefined(r.withCredentials)||(y.withCredentials=!!r.withCredentials),a&&a!=="json"&&(y.responseType=r.responseType),c&&([f,v]=rv(c,!0),y.addEventListener("progress",f)),l&&y.upload&&([d,m]=rv(l),y.upload.addEventListener("progress",d),y.upload.addEventListener("loadend",m)),(r.cancelToken||r.signal)&&(u=x=>{y&&(i(!x||x.type?new Nu(null,n,y):x),y.abort(),y=null)},r.cancelToken&&r.cancelToken.subscribe(u),r.signal&&(r.signal.aborted?u():r.signal.addEventListener("abort",u)));const S=bne(r.url);if(S&&Fi.protocols.indexOf(S)===-1){i(new Ft("Unsupported protocol "+S+":",Ft.ERR_BAD_REQUEST,n));return}y.send(s||null)})},Rne=(n,e)=>{const{length:t}=n=n?n.filter(Boolean):[];if(e||t){let i=new AbortController,r;const s=function(c){if(!r){r=!0,a();const u=c instanceof Error?c:this.reason;i.abort(u instanceof Ft?u:new Nu(u instanceof Error?u.message:u))}};let o=e&&setTimeout(()=>{o=null,s(new Ft("timeout ".concat(e," of ms exceeded"),Ft.ETIMEDOUT))},e);const a=()=>{n&&(o&&clearTimeout(o),o=null,n.forEach(c=>{c.unsubscribe?c.unsubscribe(s):c.removeEventListener("abort",s)}),n=null)};n.forEach(c=>c.addEventListener("abort",s));const{signal:l}=i;return l.unsubscribe=()=>Ee.asap(a),l}},Ine=function*(n,e){let t=n.byteLength;if(t<e){yield n;return}let i=0,r;for(;i<t;)r=i+e,yield n.slice(i,r),i=r},Dne=async function*(n,e){for await(const t of Pne(n))yield*Ine(t,e)},Pne=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const e=n.getReader();try{for(;;){const{done:t,value:i}=await e.read();if(t)break;yield i}}finally{await e.cancel()}},kI=(n,e,t,i)=>{const r=Dne(n,e);let s=0,o,a=l=>{o||(o=!0,i&&i(l))};return new ReadableStream({async pull(l){try{const{done:c,value:u}=await r.next();if(c){a(),l.close();return}let d=u.byteLength;if(t){let f=s+=d;t(f)}l.enqueue(new Uint8Array(u))}catch(c){throw a(c),c}},cancel(l){return a(l),r.return()}},{highWaterMark:2})},UI=64*1024,{isFunction:Im}=Ee,One=(({Request:n,Response:e})=>({Request:n,Response:e}))(Ee.global),{ReadableStream:NI,TextEncoder:FI}=Ee.global,BI=(n,...e)=>{try{return!!n(...e)}catch(t){return!1}},Lne=n=>{n=Ee.merge.call({skipUndefined:!0},One,n);const{fetch:e,Request:t,Response:i}=n,r=e?Im(e):typeof fetch=="function",s=Im(t),o=Im(i);if(!r)return!1;const a=r&&Im(NI),l=r&&(typeof FI=="function"?(v=>g=>v.encode(g))(new FI):async v=>new Uint8Array(await new t(v).arrayBuffer())),c=s&&a&&BI(()=>{let v=!1;const g=new t(Fi.origin,{body:new NI,method:"POST",get duplex(){return v=!0,"half"}}).headers.has("Content-Type");return v&&!g}),u=o&&a&&BI(()=>Ee.isReadableStream(new i("").body)),d={stream:u&&(v=>v.body)};r&&["text","arrayBuffer","blob","formData","stream"].forEach(v=>{!d[v]&&(d[v]=(g,y)=>{let b=g&&g[v];if(b)return b.call(g);throw new Ft("Response type '".concat(v,"' is not supported"),Ft.ERR_NOT_SUPPORT,y)})});const f=async v=>{if(v==null)return 0;if(Ee.isBlob(v))return v.size;if(Ee.isSpecCompliantForm(v))return(await new t(Fi.origin,{method:"POST",body:v}).arrayBuffer()).byteLength;if(Ee.isArrayBufferView(v)||Ee.isArrayBuffer(v))return v.byteLength;if(Ee.isURLSearchParams(v)&&(v=v+""),Ee.isString(v))return(await l(v)).byteLength},m=async(v,g)=>{const y=Ee.toFiniteNumber(v.getContentLength());return y==null?f(g):y};return async v=>{let{url:g,method:y,data:b,signal:S,cancelToken:x,timeout:A,onDownloadProgress:E,onUploadProgress:M,responseType:I,headers:R,withCredentials:C="same-origin",fetchOptions:D}=EN(v),L=e||fetch;I=I?(I+"").toLowerCase():"text";let z=Rne([S,x&&x.toAbortSignal()],A),G=null;const H=z&&z.unsubscribe&&(()=>{z.unsubscribe()});let J;try{if(M&&c&&y!=="get"&&y!=="head"&&(J=await m(R,b))!==0){let ye=new t(g,{method:"POST",body:b,duplex:"half"}),Ne;if(Ee.isFormData(b)&&(Ne=ye.headers.get("content-type"))&&R.setContentType(Ne),ye.body){const[He,fe]=PI(J,rv(OI(M)));b=kI(ye.body,UI,He,fe)}}Ee.isString(C)||(C=C?"include":"omit");const k=s&&"credentials"in t.prototype,X={...D,signal:z,method:y.toUpperCase(),headers:R.normalize().toJSON(),body:b,duplex:"half",credentials:k?C:void 0};G=s&&new t(g,X);let W=await(s?L(G,D):L(g,X));const ie=u&&(I==="stream"||I==="response");if(u&&(E||ie&&H)){const ye={};["status","statusText","headers"].forEach(he=>{ye[he]=W[he]});const Ne=Ee.toFiniteNumber(W.headers.get("content-length")),[He,fe]=E&&PI(Ne,rv(OI(E),!0))||[];W=new i(kI(W.body,UI,He,()=>{fe&&fe(),H&&H()}),ye)}I=I||"text";let se=await d[Ee.findKey(d,I)||"text"](W,v);return!ie&&H&&H(),await new Promise((ye,Ne)=>{SN(ye,Ne,{data:se,headers:mr.from(W.headers),status:W.status,statusText:W.statusText,config:v,request:G})})}catch(k){throw H&&H(),k&&k.name==="TypeError"&&/Load failed|fetch/i.test(k.message)?Object.assign(new Ft("Network Error",Ft.ERR_NETWORK,v,G),{cause:k.cause||k}):Ft.from(k,k&&k.code,v,G)}}},kne=new Map,AN=n=>{let e=n?n.env:{};const{fetch:t,Request:i,Response:r}=e,s=[i,r,t];let o=s.length,a=o,l,c,u=kne;for(;a--;)l=s[a],c=u.get(l),c===void 0&&u.set(l,c=a?new Map:Lne(e)),u=c;return c};AN();const Ww={http:Qte,xhr:Cne,fetch:{get:AN}};Ee.forEach(Ww,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch(t){}Object.defineProperty(n,"adapterName",{value:e})}});const zI=n=>"- ".concat(n),Une=n=>Ee.isFunction(n)||n===null||n===!1,MN={getAdapter:(n,e)=>{n=Ee.isArray(n)?n:[n];const{length:t}=n;let i,r;const s={};for(let o=0;o<t;o++){i=n[o];let a;if(r=i,!Une(i)&&(r=Ww[(a=String(i)).toLowerCase()],r===void 0))throw new Ft("Unknown adapter '".concat(a,"'"));if(r&&(Ee.isFunction(r)||(r=r.get(e))))break;s[a||"#"+o]=r}if(!r){const o=Object.entries(s).map(([l,c])=>"adapter ".concat(l," ")+(c===!1?"is not supported by the environment":"is not available in the build"));let a=t?o.length>1?"since :\n"+o.map(zI).join("\n"):" "+zI(o[0]):"as no adapter specified";throw new Ft("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return r},adapters:Ww};function fb(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new Nu(null,n)}function HI(n){return fb(n),n.headers=mr.from(n.headers),n.data=db.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),MN.getAdapter(n.adapter||xf.adapter,n)(n).then(function(i){return fb(n),i.data=db.call(n,n.transformResponse,i),i.headers=mr.from(i.headers),i},function(i){return wN(i)||(fb(n),i&&i.response&&(i.response.data=db.call(n,n.transformResponse,i.response),i.response.headers=mr.from(i.response.headers))),Promise.reject(i)})}const TN="1.12.2",e_={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{e_[n]=function(i){return typeof i===n||"a"+(e<1?"n ":" ")+n}});const GI={};e_.transitional=function(e,t,i){function r(s,o){return"[Axios v"+TN+"] Transitional option '"+s+"'"+o+(i?". "+i:"")}return(s,o,a)=>{if(e===!1)throw new Ft(r(o," has been removed"+(t?" in "+t:"")),Ft.ERR_DEPRECATED);return t&&!GI[o]&&(GI[o]=!0,console.warn(r(o," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(s,o,a):!0}};e_.spelling=function(e){return(t,i)=>(console.warn("".concat(i," is likely a misspelling of ").concat(e)),!0)};function Nne(n,e,t){if(typeof n!="object")throw new Ft("options must be an object",Ft.ERR_BAD_OPTION_VALUE);const i=Object.keys(n);let r=i.length;for(;r-- >0;){const s=i[r],o=e[s];if(o){const a=n[s],l=a===void 0||o(a,s,n);if(l!==!0)throw new Ft("option "+s+" must be "+l,Ft.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new Ft("Unknown option "+s,Ft.ERR_BAD_OPTION)}}const Km={assertOptions:Nne,validators:e_},As=Km.validators;let xl=class{constructor(e){this.defaults=e||{},this.interceptors={request:new II,response:new II}}async request(e,t){try{return await this._request(e,t)}catch(i){if(i instanceof Error){let r={};Error.captureStackTrace?Error.captureStackTrace(r):r=new Error;const s=r.stack?r.stack.replace(/^.+\n/,""):"";try{i.stack?s&&!String(i.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(i.stack+="\n"+s):i.stack=s}catch(o){}}throw i}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=Ll(this.defaults,t);const{transitional:i,paramsSerializer:r,headers:s}=t;i!==void 0&&Km.assertOptions(i,{silentJSONParsing:As.transitional(As.boolean),forcedJSONParsing:As.transitional(As.boolean),clarifyTimeoutError:As.transitional(As.boolean)},!1),r!=null&&(Ee.isFunction(r)?t.paramsSerializer={serialize:r}:Km.assertOptions(r,{encode:As.function,serialize:As.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),Km.assertOptions(t,{baseUrl:As.spelling("baseURL"),withXsrfToken:As.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o=s&&Ee.merge(s.common,s[t.method]);s&&Ee.forEach(["delete","get","head","post","put","patch","common"],v=>{delete s[v]}),t.headers=mr.concat(o,s);const a=[];let l=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(t)===!1||(l=l&&g.synchronous,a.unshift(g.fulfilled,g.rejected))});const c=[];this.interceptors.response.forEach(function(g){c.push(g.fulfilled,g.rejected)});let u,d=0,f;if(!l){const v=[HI.bind(this),void 0];for(v.unshift(...a),v.push(...c),f=v.length,u=Promise.resolve(t);d<f;)u=u.then(v[d++],v[d++]);return u}f=a.length;let m=t;for(;d<f;){const v=a[d++],g=a[d++];try{m=v(m)}catch(y){g.call(this,y);break}}try{u=HI.call(this,m)}catch(v){return Promise.reject(v)}for(d=0,f=c.length;d<f;)u=u.then(c[d++],c[d++]);return u}getUri(e){e=Ll(this.defaults,e);const t=xN(e.baseURL,e.url,e.allowAbsoluteUrls);return _N(t,e.params,e.paramsSerializer)}};Ee.forEach(["delete","get","head","options"],function(e){xl.prototype[e]=function(t,i){return this.request(Ll(i||{},{method:e,url:t,data:(i||{}).data}))}});Ee.forEach(["post","put","patch"],function(e){function t(i){return function(s,o,a){return this.request(Ll(a||{},{method:e,headers:i?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}xl.prototype[e]=t(),xl.prototype[e+"Form"]=t(!0)});let Fne=class CN{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(s){t=s});const i=this;this.promise.then(r=>{if(!i._listeners)return;let s=i._listeners.length;for(;s-- >0;)i._listeners[s](r);i._listeners=null}),this.promise.then=r=>{let s;const o=new Promise(a=>{i.subscribe(a),s=a}).then(r);return o.cancel=function(){i.unsubscribe(s)},o},e(function(s,o,a){i.reason||(i.reason=new Nu(s,o,a),t(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=i=>{e.abort(i)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new CN(function(r){e=r}),cancel:e}}};function Bne(n){return function(t){return n.apply(null,t)}}function zne(n){return Ee.isObject(n)&&n.isAxiosError===!0}const jw={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(jw).forEach(([n,e])=>{jw[e]=n});function RN(n){const e=new xl(n),t=oN(xl.prototype.request,e);return Ee.extend(t,xl.prototype,e,{allOwnKeys:!0}),Ee.extend(t,e,null,{allOwnKeys:!0}),t.create=function(r){return RN(Ll(n,r))},t}const di=RN(xf);di.Axios=xl;di.CanceledError=Nu;di.CancelToken=Fne;di.isCancel=wN;di.VERSION=TN;di.toFormData=Zv;di.AxiosError=Ft;di.Cancel=di.CanceledError;di.all=function(e){return Promise.all(e)};di.spread=Bne;di.isAxiosError=zne;di.mergeConfig=Ll;di.AxiosHeaders=mr;di.formToJSON=n=>bN(Ee.isHTMLForm(n)?new FormData(n):n);di.getAdapter=MN.getAdapter;di.HttpStatusCode=jw;di.default=di;const{Axios:nle,AxiosError:ile,CanceledError:rle,isCancel:sle,CancelToken:ole,VERSION:ale,all:lle,Cancel:cle,isAxiosError:ule,spread:hle,toFormData:dle,AxiosHeaders:fle,HttpStatusCode:ple,formToJSON:mle,getAdapter:gle,mergeConfig:vle}=di;function ud(n){let e=n[0],t=n[1],i=n[2];return Math.sqrt(e*e+t*t+i*i)}function qw(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n}function Hne(n,e,t,i){return n[0]=e,n[1]=t,n[2]=i,n}function VI(n,e,t){return n[0]=e[0]+t[0],n[1]=e[1]+t[1],n[2]=e[2]+t[2],n}function WI(n,e,t){return n[0]=e[0]-t[0],n[1]=e[1]-t[1],n[2]=e[2]-t[2],n}function Gne(n,e,t){return n[0]=e[0]*t[0],n[1]=e[1]*t[1],n[2]=e[2]*t[2],n}function Vne(n,e,t){return n[0]=e[0]/t[0],n[1]=e[1]/t[1],n[2]=e[2]/t[2],n}function pb(n,e,t){return n[0]=e[0]*t,n[1]=e[1]*t,n[2]=e[2]*t,n}function Wne(n,e){let t=e[0]-n[0],i=e[1]-n[1],r=e[2]-n[2];return Math.sqrt(t*t+i*i+r*r)}function jne(n,e){let t=e[0]-n[0],i=e[1]-n[1],r=e[2]-n[2];return t*t+i*i+r*r}function jI(n){let e=n[0],t=n[1],i=n[2];return e*e+t*t+i*i}function qne(n,e){return n[0]=-e[0],n[1]=-e[1],n[2]=-e[2],n}function Xne(n,e){return n[0]=1/e[0],n[1]=1/e[1],n[2]=1/e[2],n}function Xw(n,e){let t=e[0],i=e[1],r=e[2],s=t*t+i*i+r*r;return s>0&&(s=1/Math.sqrt(s)),n[0]=e[0]*s,n[1]=e[1]*s,n[2]=e[2]*s,n}function IN(n,e){return n[0]*e[0]+n[1]*e[1]+n[2]*e[2]}function qI(n,e,t){let i=e[0],r=e[1],s=e[2],o=t[0],a=t[1],l=t[2];return n[0]=r*l-s*a,n[1]=s*o-i*l,n[2]=i*a-r*o,n}function Yne(n,e,t,i){let r=e[0],s=e[1],o=e[2];return n[0]=r+i*(t[0]-r),n[1]=s+i*(t[1]-s),n[2]=o+i*(t[2]-o),n}function Kne(n,e,t,i,r){const s=Math.exp(-i*r);let o=e[0],a=e[1],l=e[2];return n[0]=t[0]+(o-t[0])*s,n[1]=t[1]+(a-t[1])*s,n[2]=t[2]+(l-t[2])*s,n}function $ne(n,e,t){let i=e[0],r=e[1],s=e[2],o=t[3]*i+t[7]*r+t[11]*s+t[15];return o=o||1,n[0]=(t[0]*i+t[4]*r+t[8]*s+t[12])/o,n[1]=(t[1]*i+t[5]*r+t[9]*s+t[13])/o,n[2]=(t[2]*i+t[6]*r+t[10]*s+t[14])/o,n}function Jne(n,e,t){let i=e[0],r=e[1],s=e[2],o=t[3]*i+t[7]*r+t[11]*s+t[15];return o=o||1,n[0]=(t[0]*i+t[4]*r+t[8]*s)/o,n[1]=(t[1]*i+t[5]*r+t[9]*s)/o,n[2]=(t[2]*i+t[6]*r+t[10]*s)/o,n}function Qne(n,e,t){let i=e[0],r=e[1],s=e[2];return n[0]=i*t[0]+r*t[3]+s*t[6],n[1]=i*t[1]+r*t[4]+s*t[7],n[2]=i*t[2]+r*t[5]+s*t[8],n}function Zne(n,e,t){let i=e[0],r=e[1],s=e[2],o=t[0],a=t[1],l=t[2],c=t[3],u=a*s-l*r,d=l*i-o*s,f=o*r-a*i,m=a*f-l*d,v=l*u-o*f,g=o*d-a*u,y=c*2;return u*=y,d*=y,f*=y,m*=2,v*=2,g*=2,n[0]=i+u+m,n[1]=r+d+v,n[2]=s+f+g,n}const eie=(function(){const n=[0,0,0],e=[0,0,0];return function(t,i){qw(n,t),qw(e,i),Xw(n,n),Xw(e,e);let r=IN(n,e);return r>1?0:r<-1?Math.PI:Math.acos(r)}})();function tie(n,e){return n[0]===e[0]&&n[1]===e[1]&&n[2]===e[2]}class ci extends Array{constructor(e=0,t=e,i=e){return super(e,t,i),this}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}set x(e){this[0]=e}set y(e){this[1]=e}set z(e){this[2]=e}set(e,t=e,i=e){return e.length?this.copy(e):(Hne(this,e,t,i),this)}copy(e){return qw(this,e),this}add(e,t){return t?VI(this,e,t):VI(this,this,e),this}sub(e,t){return t?WI(this,e,t):WI(this,this,e),this}multiply(e){return e.length?Gne(this,this,e):pb(this,this,e),this}divide(e){return e.length?Vne(this,this,e):pb(this,this,1/e),this}inverse(e=this){return Xne(this,e),this}len(){return ud(this)}distance(e){return e?Wne(this,e):ud(this)}squaredLen(){return jI(this)}squaredDistance(e){return e?jne(this,e):jI(this)}negate(e=this){return qne(this,e),this}cross(e,t){return t?qI(this,e,t):qI(this,this,e),this}scale(e){return pb(this,this,e),this}normalize(){return Xw(this,this),this}dot(e){return IN(this,e)}equals(e){return tie(this,e)}applyMatrix3(e){return Qne(this,this,e),this}applyMatrix4(e){return $ne(this,this,e),this}scaleRotateMatrix4(e){return Jne(this,this,e),this}applyQuaternion(e){return Zne(this,this,e),this}angle(e){return eie(this,e)}lerp(e,t){return Yne(this,this,e,t),this}smoothLerp(e,t,i){return Kne(this,this,e,t,i),this}clone(){return new ci(this[0],this[1],this[2])}fromArray(e,t=0){return this[0]=e[t],this[1]=e[t+1],this[2]=e[t+2],this}toArray(e=[],t=0){return e[t]=this[0],e[t+1]=this[1],e[t+2]=this[2],e}transformDirection(e){const t=this[0],i=this[1],r=this[2];return this[0]=e[0]*t+e[4]*i+e[8]*r,this[1]=e[1]*t+e[5]*i+e[9]*r,this[2]=e[2]*t+e[6]*i+e[10]*r,this.normalize()}}const XI=new ci;let nie=1,iie=1,YI=!1;class rie{constructor(e,t={}){e.canvas||console.error("gl not passed as first argument to Geometry"),this.gl=e,this.attributes=t,this.id=nie++,this.VAOs={},this.drawRange={start:0,count:0},this.instancedCount=0,this.gl.renderer.bindVertexArray(null),this.gl.renderer.currentGeometry=null,this.glState=this.gl.renderer.state;for(let i in t)this.addAttribute(i,t[i])}addAttribute(e,t){if(this.attributes[e]=t,t.id=iie++,t.size=t.size||1,t.type=t.type||(t.data.constructor===Float32Array?this.gl.FLOAT:t.data.constructor===Uint16Array?this.gl.UNSIGNED_SHORT:this.gl.UNSIGNED_INT),t.target=e==="index"?this.gl.ELEMENT_ARRAY_BUFFER:this.gl.ARRAY_BUFFER,t.normalized=t.normalized||!1,t.stride=t.stride||0,t.offset=t.offset||0,t.count=t.count||(t.stride?t.data.byteLength/t.stride:t.data.length/t.size),t.divisor=t.instanced||0,t.needsUpdate=!1,t.usage=t.usage||this.gl.STATIC_DRAW,t.buffer||this.updateAttribute(t),t.divisor){if(this.isInstanced=!0,this.instancedCount&&this.instancedCount!==t.count*t.divisor)return console.warn("geometry has multiple instanced buffers of different length"),this.instancedCount=Math.min(this.instancedCount,t.count*t.divisor);this.instancedCount=t.count*t.divisor}else e==="index"?this.drawRange.count=t.count:this.attributes.index||(this.drawRange.count=Math.max(this.drawRange.count,t.count))}updateAttribute(e){const t=!e.buffer;t&&(e.buffer=this.gl.createBuffer()),this.glState.boundBuffer!==e.buffer&&(this.gl.bindBuffer(e.target,e.buffer),this.glState.boundBuffer=e.buffer),t?this.gl.bufferData(e.target,e.data,e.usage):this.gl.bufferSubData(e.target,0,e.data),e.needsUpdate=!1}setIndex(e){this.addAttribute("index",e)}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}setInstancedCount(e){this.instancedCount=e}createVAO(e){this.VAOs[e.attributeOrder]=this.gl.renderer.createVertexArray(),this.gl.renderer.bindVertexArray(this.VAOs[e.attributeOrder]),this.bindAttributes(e)}bindAttributes(e){e.attributeLocations.forEach((t,{name:i,type:r})=>{if(!this.attributes[i]){console.warn("active attribute ".concat(i," not being supplied"));return}const s=this.attributes[i];this.gl.bindBuffer(s.target,s.buffer),this.glState.boundBuffer=s.buffer;let o=1;r===35674&&(o=2),r===35675&&(o=3),r===35676&&(o=4);const a=s.size/o,l=o===1?0:o*o*4,c=o===1?0:o*4;for(let u=0;u<o;u++)this.gl.vertexAttribPointer(t+u,a,s.type,s.normalized,s.stride+l,s.offset+u*c),this.gl.enableVertexAttribArray(t+u),this.gl.renderer.vertexAttribDivisor(t+u,s.divisor)}),this.attributes.index&&this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.attributes.index.buffer)}draw({program:e,mode:t=this.gl.TRIANGLES}){var r;this.gl.renderer.currentGeometry!=="".concat(this.id,"_").concat(e.attributeOrder)&&(this.VAOs[e.attributeOrder]||this.createVAO(e),this.gl.renderer.bindVertexArray(this.VAOs[e.attributeOrder]),this.gl.renderer.currentGeometry="".concat(this.id,"_").concat(e.attributeOrder)),e.attributeLocations.forEach((s,{name:o})=>{const a=this.attributes[o];a.needsUpdate&&this.updateAttribute(a)});let i=2;((r=this.attributes.index)==null?void 0:r.type)===this.gl.UNSIGNED_INT&&(i=4),this.isInstanced?this.attributes.index?this.gl.renderer.drawElementsInstanced(t,this.drawRange.count,this.attributes.index.type,this.attributes.index.offset+this.drawRange.start*i,this.instancedCount):this.gl.renderer.drawArraysInstanced(t,this.drawRange.start,this.drawRange.count,this.instancedCount):this.attributes.index?this.gl.drawElements(t,this.drawRange.count,this.attributes.index.type,this.attributes.index.offset+this.drawRange.start*i):this.gl.drawArrays(t,this.drawRange.start,this.drawRange.count)}getPosition(){const e=this.attributes.position;if(e.data)return e;if(!YI)return console.warn("No position buffer data found to compute bounds"),YI=!0}computeBoundingBox(e){e||(e=this.getPosition());const t=e.data,i=e.size;this.bounds||(this.bounds={min:new ci,max:new ci,center:new ci,scale:new ci,radius:1/0});const r=this.bounds.min,s=this.bounds.max,o=this.bounds.center,a=this.bounds.scale;r.set(1/0),s.set(-1/0);for(let l=0,c=t.length;l<c;l+=i){const u=t[l],d=t[l+1],f=t[l+2];r.x=Math.min(u,r.x),r.y=Math.min(d,r.y),r.z=Math.min(f,r.z),s.x=Math.max(u,s.x),s.y=Math.max(d,s.y),s.z=Math.max(f,s.z)}a.sub(s,r),o.add(r,s).divide(2)}computeBoundingSphere(e){e||(e=this.getPosition());const t=e.data,i=e.size;this.bounds||this.computeBoundingBox(e);let r=0;for(let s=0,o=t.length;s<o;s+=i)XI.fromArray(t,s),r=Math.max(r,this.bounds.center.squaredDistance(XI));this.bounds.radius=Math.sqrt(r)}remove(){for(let e in this.VAOs)this.gl.renderer.deleteVertexArray(this.VAOs[e]),delete this.VAOs[e];for(let e in this.attributes)this.gl.deleteBuffer(this.attributes[e].buffer),delete this.attributes[e]}}let sie=1;const KI={};class _le{constructor(e,{vertex:t,fragment:i,uniforms:r={},transparent:s=!1,cullFace:o=e.BACK,frontFace:a=e.CCW,depthTest:l=!0,depthWrite:c=!0,depthFunc:u=e.LEQUAL}={}){e.canvas||console.error("gl not passed as first argument to Program"),this.gl=e,this.uniforms=r,this.id=sie++,t||console.warn("vertex shader not supplied"),i||console.warn("fragment shader not supplied"),this.transparent=s,this.cullFace=o,this.frontFace=a,this.depthTest=l,this.depthWrite=c,this.depthFunc=u,this.blendFunc={},this.blendEquation={},this.stencilFunc={},this.stencilOp={},this.transparent&&!this.blendFunc.src&&(this.gl.renderer.premultipliedAlpha?this.setBlendFunc(this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA):this.setBlendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA)),this.vertexShader=e.createShader(e.VERTEX_SHADER),this.fragmentShader=e.createShader(e.FRAGMENT_SHADER),this.program=e.createProgram(),e.attachShader(this.program,this.vertexShader),e.attachShader(this.program,this.fragmentShader),this.setShaders({vertex:t,fragment:i})}setShaders({vertex:e,fragment:t}){if(e&&(this.gl.shaderSource(this.vertexShader,e),this.gl.compileShader(this.vertexShader),this.gl.getShaderInfoLog(this.vertexShader)!==""&&console.warn("".concat(this.gl.getShaderInfoLog(this.vertexShader),"\nVertex Shader\n").concat($I(e)))),t&&(this.gl.shaderSource(this.fragmentShader,t),this.gl.compileShader(this.fragmentShader),this.gl.getShaderInfoLog(this.fragmentShader)!==""&&console.warn("".concat(this.gl.getShaderInfoLog(this.fragmentShader),"\nFragment Shader\n").concat($I(t)))),this.gl.linkProgram(this.program),!this.gl.getProgramParameter(this.program,this.gl.LINK_STATUS))return console.warn(this.gl.getProgramInfoLog(this.program));this.uniformLocations=new Map;let i=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_UNIFORMS);for(let o=0;o<i;o++){let a=this.gl.getActiveUniform(this.program,o);this.uniformLocations.set(a,this.gl.getUniformLocation(this.program,a.name));const l=a.name.match(/(\w+)/g);a.uniformName=l[0],a.nameComponents=l.slice(1)}this.attributeLocations=new Map;const r=[],s=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES);for(let o=0;o<s;o++){const a=this.gl.getActiveAttrib(this.program,o),l=this.gl.getAttribLocation(this.program,a.name);l!==-1&&(r[l]=a.name,this.attributeLocations.set(a,l))}this.attributeOrder=r.join("")}setBlendFunc(e,t,i,r){this.blendFunc.src=e,this.blendFunc.dst=t,this.blendFunc.srcAlpha=i,this.blendFunc.dstAlpha=r,e&&(this.transparent=!0)}setBlendEquation(e,t){this.blendEquation.modeRGB=e,this.blendEquation.modeAlpha=t}setStencilFunc(e,t,i){this.stencilRef=t,this.stencilFunc.func=e,this.stencilFunc.ref=t,this.stencilFunc.mask=i}setStencilOp(e,t,i){this.stencilOp.stencilFail=e,this.stencilOp.depthFail=t,this.stencilOp.depthPass=i}applyState(){this.depthTest?this.gl.renderer.enable(this.gl.DEPTH_TEST):this.gl.renderer.disable(this.gl.DEPTH_TEST),this.cullFace?this.gl.renderer.enable(this.gl.CULL_FACE):this.gl.renderer.disable(this.gl.CULL_FACE),this.blendFunc.src?this.gl.renderer.enable(this.gl.BLEND):this.gl.renderer.disable(this.gl.BLEND),this.cullFace&&this.gl.renderer.setCullFace(this.cullFace),this.gl.renderer.setFrontFace(this.frontFace),this.gl.renderer.setDepthMask(this.depthWrite),this.gl.renderer.setDepthFunc(this.depthFunc),this.blendFunc.src&&this.gl.renderer.setBlendFunc(this.blendFunc.src,this.blendFunc.dst,this.blendFunc.srcAlpha,this.blendFunc.dstAlpha),this.gl.renderer.setBlendEquation(this.blendEquation.modeRGB,this.blendEquation.modeAlpha),this.stencilFunc.func||this.stencilOp.stencilFail?this.gl.renderer.enable(this.gl.STENCIL_TEST):this.gl.renderer.disable(this.gl.STENCIL_TEST),this.gl.renderer.setStencilFunc(this.stencilFunc.func,this.stencilFunc.ref,this.stencilFunc.mask),this.gl.renderer.setStencilOp(this.stencilOp.stencilFail,this.stencilOp.depthFail,this.stencilOp.depthPass)}use({flipFaces:e=!1}={}){let t=-1;this.gl.renderer.state.currentProgram===this.id||(this.gl.useProgram(this.program),this.gl.renderer.state.currentProgram=this.id),this.uniformLocations.forEach((r,s)=>{let o=this.uniforms[s.uniformName];for(const a of s.nameComponents){if(!o)break;if(a in o)o=o[a];else{if(Array.isArray(o.value))break;o=void 0;break}}if(!o)return JI("Active uniform ".concat(s.name," has not been supplied"));if(o&&o.value===void 0)return JI("".concat(s.name," uniform is missing a value parameter"));if(o.value.texture)return t=t+1,o.value.update(t),mb(this.gl,s.type,r,t);if(o.value.length&&o.value[0].texture){const a=[];return o.value.forEach(l=>{t=t+1,l.update(t),a.push(t)}),mb(this.gl,s.type,r,a)}mb(this.gl,s.type,r,o.value)}),this.applyState(),e&&this.gl.renderer.setFrontFace(this.frontFace===this.gl.CCW?this.gl.CW:this.gl.CCW)}remove(){this.gl.deleteProgram(this.program)}}function mb(n,e,t,i){i=i.length?oie(i):i;const r=n.renderer.state.uniformLocations.get(t);if(i.length)if(r===void 0||r.length!==i.length)n.renderer.state.uniformLocations.set(t,i.slice(0));else{if(aie(r,i))return;r.set?r.set(i):lie(r,i),n.renderer.state.uniformLocations.set(t,r)}else{if(r===i)return;n.renderer.state.uniformLocations.set(t,i)}switch(e){case 5126:return i.length?n.uniform1fv(t,i):n.uniform1f(t,i);case 35664:return n.uniform2fv(t,i);case 35665:return n.uniform3fv(t,i);case 35666:return n.uniform4fv(t,i);case 35670:case 5124:case 35678:case 36306:case 35680:case 36289:return i.length?n.uniform1iv(t,i):n.uniform1i(t,i);case 35671:case 35667:return n.uniform2iv(t,i);case 35672:case 35668:return n.uniform3iv(t,i);case 35673:case 35669:return n.uniform4iv(t,i);case 35674:return n.uniformMatrix2fv(t,!1,i);case 35675:return n.uniformMatrix3fv(t,!1,i);case 35676:return n.uniformMatrix4fv(t,!1,i)}}function $I(n){let e=n.split("\n");for(let t=0;t<e.length;t++)e[t]=t+1+": "+e[t];return e.join("\n")}function oie(n){const e=n.length,t=n[0].length;if(t===void 0)return n;const i=e*t;let r=KI[i];r||(KI[i]=r=new Float32Array(i));for(let s=0;s<e;s++)r.set(n[s],s*t);return r}function aie(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function lie(n,e){for(let t=0,i=n.length;t<i;t++)n[t]=e[t]}let gb=0;function JI(n){gb>100||(console.warn(n),gb++,gb>100&&console.warn("More than 100 program warnings - stopping logs."))}const vb=new ci;let cie=1;class yle{constructor({canvas:e=document.createElement("canvas"),width:t=300,height:i=150,dpr:r=1,alpha:s=!1,depth:o=!0,stencil:a=!1,antialias:l=!1,premultipliedAlpha:c=!1,preserveDrawingBuffer:u=!1,powerPreference:d="default",autoClear:f=!0,webgl:m=2}={}){const v={alpha:s,depth:o,stencil:a,antialias:l,premultipliedAlpha:c,preserveDrawingBuffer:u,powerPreference:d};this.dpr=r,this.alpha=s,this.color=!0,this.depth=o,this.stencil=a,this.premultipliedAlpha=c,this.autoClear=f,this.id=cie++,m===2&&(this.gl=e.getContext("webgl2",v)),this.isWebgl2=!!this.gl,this.gl||(this.gl=e.getContext("webgl",v)),this.gl||console.error("unable to create webgl context"),this.gl.renderer=this,this.setSize(t,i),this.state={},this.state.blendFunc={src:this.gl.ONE,dst:this.gl.ZERO},this.state.blendEquation={modeRGB:this.gl.FUNC_ADD},this.state.cullFace=!1,this.state.frontFace=this.gl.CCW,this.state.depthMask=!0,this.state.depthFunc=this.gl.LEQUAL,this.state.premultiplyAlpha=!1,this.state.flipY=!1,this.state.unpackAlignment=4,this.state.framebuffer=null,this.state.viewport={x:0,y:0,width:null,height:null},this.state.textureUnits=[],this.state.activeTextureUnit=0,this.state.boundBuffer=null,this.state.uniformLocations=new Map,this.state.currentProgram=null,this.extensions={},this.isWebgl2?(this.getExtension("EXT_color_buffer_float"),this.getExtension("OES_texture_float_linear")):(this.getExtension("OES_texture_float"),this.getExtension("OES_texture_float_linear"),this.getExtension("OES_texture_half_float"),this.getExtension("OES_texture_half_float_linear"),this.getExtension("OES_element_index_uint"),this.getExtension("OES_standard_derivatives"),this.getExtension("EXT_sRGB"),this.getExtension("WEBGL_depth_texture"),this.getExtension("WEBGL_draw_buffers")),this.getExtension("WEBGL_compressed_texture_astc"),this.getExtension("EXT_texture_compression_bptc"),this.getExtension("WEBGL_compressed_texture_s3tc"),this.getExtension("WEBGL_compressed_texture_etc1"),this.getExtension("WEBGL_compressed_texture_pvrtc"),this.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),this.vertexAttribDivisor=this.getExtension("ANGLE_instanced_arrays","vertexAttribDivisor","vertexAttribDivisorANGLE"),this.drawArraysInstanced=this.getExtension("ANGLE_instanced_arrays","drawArraysInstanced","drawArraysInstancedANGLE"),this.drawElementsInstanced=this.getExtension("ANGLE_instanced_arrays","drawElementsInstanced","drawElementsInstancedANGLE"),this.createVertexArray=this.getExtension("OES_vertex_array_object","createVertexArray","createVertexArrayOES"),this.bindVertexArray=this.getExtension("OES_vertex_array_object","bindVertexArray","bindVertexArrayOES"),this.deleteVertexArray=this.getExtension("OES_vertex_array_object","deleteVertexArray","deleteVertexArrayOES"),this.drawBuffers=this.getExtension("WEBGL_draw_buffers","drawBuffers","drawBuffersWEBGL"),this.parameters={},this.parameters.maxTextureUnits=this.gl.getParameter(this.gl.MAX_COMBINED_TEXTURE_IMAGE_UNITS),this.parameters.maxAnisotropy=this.getExtension("EXT_texture_filter_anisotropic")?this.gl.getParameter(this.getExtension("EXT_texture_filter_anisotropic").MAX_TEXTURE_MAX_ANISOTROPY_EXT):0}setSize(e,t){this.width=e,this.height=t,this.gl.canvas.width=e*this.dpr,this.gl.canvas.height=t*this.dpr,this.gl.canvas.style&&Object.assign(this.gl.canvas.style,{width:e+"px",height:t+"px"})}setViewport(e,t,i=0,r=0){this.state.viewport.width===e&&this.state.viewport.height===t||(this.state.viewport.width=e,this.state.viewport.height=t,this.state.viewport.x=i,this.state.viewport.y=r,this.gl.viewport(i,r,e,t))}setScissor(e,t,i=0,r=0){this.gl.scissor(i,r,e,t)}enable(e){this.state[e]!==!0&&(this.gl.enable(e),this.state[e]=!0)}disable(e){this.state[e]!==!1&&(this.gl.disable(e),this.state[e]=!1)}setBlendFunc(e,t,i,r){this.state.blendFunc.src===e&&this.state.blendFunc.dst===t&&this.state.blendFunc.srcAlpha===i&&this.state.blendFunc.dstAlpha===r||(this.state.blendFunc.src=e,this.state.blendFunc.dst=t,this.state.blendFunc.srcAlpha=i,this.state.blendFunc.dstAlpha=r,i!==void 0?this.gl.blendFuncSeparate(e,t,i,r):this.gl.blendFunc(e,t))}setBlendEquation(e,t){e=e||this.gl.FUNC_ADD,!(this.state.blendEquation.modeRGB===e&&this.state.blendEquation.modeAlpha===t)&&(this.state.blendEquation.modeRGB=e,this.state.blendEquation.modeAlpha=t,t!==void 0?this.gl.blendEquationSeparate(e,t):this.gl.blendEquation(e))}setCullFace(e){this.state.cullFace!==e&&(this.state.cullFace=e,this.gl.cullFace(e))}setFrontFace(e){this.state.frontFace!==e&&(this.state.frontFace=e,this.gl.frontFace(e))}setDepthMask(e){this.state.depthMask!==e&&(this.state.depthMask=e,this.gl.depthMask(e))}setDepthFunc(e){this.state.depthFunc!==e&&(this.state.depthFunc=e,this.gl.depthFunc(e))}setStencilMask(e){this.state.stencilMask!==e&&(this.state.stencilMask=e,this.gl.stencilMask(e))}setStencilFunc(e,t,i){this.state.stencilFunc===e&&this.state.stencilRef===t&&this.state.stencilFuncMask===i||(this.state.stencilFunc=e||this.gl.ALWAYS,this.state.stencilRef=t||0,this.state.stencilFuncMask=i||0,this.gl.stencilFunc(e||this.gl.ALWAYS,t||0,i||0))}setStencilOp(e,t,i){this.state.stencilFail===e&&this.state.stencilDepthFail===t&&this.state.stencilDepthPass===i||(this.state.stencilFail=e,this.state.stencilDepthFail=t,this.state.stencilDepthPass=i,this.gl.stencilOp(e,t,i))}activeTexture(e){this.state.activeTextureUnit!==e&&(this.state.activeTextureUnit=e,this.gl.activeTexture(this.gl.TEXTURE0+e))}bindFramebuffer({target:e=this.gl.FRAMEBUFFER,buffer:t=null}={}){this.state.framebuffer!==t&&(this.state.framebuffer=t,this.gl.bindFramebuffer(e,t))}getExtension(e,t,i){return t&&this.gl[t]?this.gl[t].bind(this.gl):(this.extensions[e]||(this.extensions[e]=this.gl.getExtension(e)),t?this.extensions[e]?this.extensions[e][i].bind(this.extensions[e]):null:this.extensions[e])}sortOpaque(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program.id!==t.program.id?e.program.id-t.program.id:e.zDepth!==t.zDepth?e.zDepth-t.zDepth:t.id-e.id}sortTransparent(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.zDepth!==t.zDepth?t.zDepth-e.zDepth:t.id-e.id}sortUI(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program.id!==t.program.id?e.program.id-t.program.id:t.id-e.id}getRenderList({scene:e,camera:t,frustumCull:i,sort:r}){let s=[];if(t&&i&&t.updateFrustum(),e.traverse(o=>{if(!o.visible)return!0;o.draw&&(i&&o.frustumCulled&&t&&!t.frustumIntersectsMesh(o)||s.push(o))}),r){const o=[],a=[],l=[];s.forEach(c=>{c.program.transparent?c.program.depthTest?a.push(c):l.push(c):o.push(c),c.zDepth=0,!(c.renderOrder!==0||!c.program.depthTest||!t)&&(c.worldMatrix.getTranslation(vb),vb.applyMatrix4(t.projectionViewMatrix),c.zDepth=vb.z)}),o.sort(this.sortOpaque),a.sort(this.sortTransparent),l.sort(this.sortUI),s=o.concat(a,l)}return s}render({scene:e,camera:t,target:i=null,update:r=!0,sort:s=!0,frustumCull:o=!0,clear:a}){i===null?(this.bindFramebuffer(),this.setViewport(this.width*this.dpr,this.height*this.dpr)):(this.bindFramebuffer(i),this.setViewport(i.width,i.height)),(a||this.autoClear&&a!==!1)&&(this.depth&&(!i||i.depth)&&(this.enable(this.gl.DEPTH_TEST),this.setDepthMask(!0)),(this.stencil||!i||i.stencil)&&(this.enable(this.gl.STENCIL_TEST),this.setStencilMask(255)),this.gl.clear((this.color?this.gl.COLOR_BUFFER_BIT:0)|(this.depth?this.gl.DEPTH_BUFFER_BIT:0)|(this.stencil?this.gl.STENCIL_BUFFER_BIT:0))),r&&e.updateMatrixWorld(),t&&t.updateMatrixWorld(),this.getRenderList({scene:e,camera:t,frustumCull:o,sort:s}).forEach(c=>{c.draw({camera:t})})}}function uie(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n}function hie(n,e,t,i,r){return n[0]=e,n[1]=t,n[2]=i,n[3]=r,n}function die(n,e){let t=e[0],i=e[1],r=e[2],s=e[3],o=t*t+i*i+r*r+s*s;return o>0&&(o=1/Math.sqrt(o)),n[0]=t*o,n[1]=i*o,n[2]=r*o,n[3]=s*o,n}function fie(n,e){return n[0]*e[0]+n[1]*e[1]+n[2]*e[2]+n[3]*e[3]}function pie(n){return n[0]=0,n[1]=0,n[2]=0,n[3]=1,n}function mie(n,e,t){t=t*.5;let i=Math.sin(t);return n[0]=i*e[0],n[1]=i*e[1],n[2]=i*e[2],n[3]=Math.cos(t),n}function QI(n,e,t){let i=e[0],r=e[1],s=e[2],o=e[3],a=t[0],l=t[1],c=t[2],u=t[3];return n[0]=i*u+o*a+r*c-s*l,n[1]=r*u+o*l+s*a-i*c,n[2]=s*u+o*c+i*l-r*a,n[3]=o*u-i*a-r*l-s*c,n}function gie(n,e,t){t*=.5;let i=e[0],r=e[1],s=e[2],o=e[3],a=Math.sin(t),l=Math.cos(t);return n[0]=i*l+o*a,n[1]=r*l+s*a,n[2]=s*l-r*a,n[3]=o*l-i*a,n}function vie(n,e,t){t*=.5;let i=e[0],r=e[1],s=e[2],o=e[3],a=Math.sin(t),l=Math.cos(t);return n[0]=i*l-s*a,n[1]=r*l+o*a,n[2]=s*l+i*a,n[3]=o*l-r*a,n}function _ie(n,e,t){t*=.5;let i=e[0],r=e[1],s=e[2],o=e[3],a=Math.sin(t),l=Math.cos(t);return n[0]=i*l+r*a,n[1]=r*l-i*a,n[2]=s*l+o*a,n[3]=o*l-s*a,n}function yie(n,e,t,i){let r=e[0],s=e[1],o=e[2],a=e[3],l=t[0],c=t[1],u=t[2],d=t[3],f,m,v,g,y;return m=r*l+s*c+o*u+a*d,m<0&&(m=-m,l=-l,c=-c,u=-u,d=-d),1-m>1e-6?(f=Math.acos(m),v=Math.sin(f),g=Math.sin((1-i)*f)/v,y=Math.sin(i*f)/v):(g=1-i,y=i),n[0]=g*r+y*l,n[1]=g*s+y*c,n[2]=g*o+y*u,n[3]=g*a+y*d,n}function bie(n,e){let t=e[0],i=e[1],r=e[2],s=e[3],o=t*t+i*i+r*r+s*s,a=o?1/o:0;return n[0]=-t*a,n[1]=-i*a,n[2]=-r*a,n[3]=s*a,n}function wie(n,e){return n[0]=-e[0],n[1]=-e[1],n[2]=-e[2],n[3]=e[3],n}function Sie(n,e){let t=e[0]+e[4]+e[8],i;if(t>0)i=Math.sqrt(t+1),n[3]=.5*i,i=.5/i,n[0]=(e[5]-e[7])*i,n[1]=(e[6]-e[2])*i,n[2]=(e[1]-e[3])*i;else{let r=0;e[4]>e[0]&&(r=1),e[8]>e[r*3+r]&&(r=2);let s=(r+1)%3,o=(r+2)%3;i=Math.sqrt(e[r*3+r]-e[s*3+s]-e[o*3+o]+1),n[r]=.5*i,i=.5/i,n[3]=(e[s*3+o]-e[o*3+s])*i,n[s]=(e[s*3+r]+e[r*3+s])*i,n[o]=(e[o*3+r]+e[r*3+o])*i}return n}function xie(n,e,t="YXZ"){let i=Math.sin(e[0]*.5),r=Math.cos(e[0]*.5),s=Math.sin(e[1]*.5),o=Math.cos(e[1]*.5),a=Math.sin(e[2]*.5),l=Math.cos(e[2]*.5);return t==="XYZ"?(n[0]=i*o*l+r*s*a,n[1]=r*s*l-i*o*a,n[2]=r*o*a+i*s*l,n[3]=r*o*l-i*s*a):t==="YXZ"?(n[0]=i*o*l+r*s*a,n[1]=r*s*l-i*o*a,n[2]=r*o*a-i*s*l,n[3]=r*o*l+i*s*a):t==="ZXY"?(n[0]=i*o*l-r*s*a,n[1]=r*s*l+i*o*a,n[2]=r*o*a+i*s*l,n[3]=r*o*l-i*s*a):t==="ZYX"?(n[0]=i*o*l-r*s*a,n[1]=r*s*l+i*o*a,n[2]=r*o*a-i*s*l,n[3]=r*o*l+i*s*a):t==="YZX"?(n[0]=i*o*l+r*s*a,n[1]=r*s*l+i*o*a,n[2]=r*o*a-i*s*l,n[3]=r*o*l-i*s*a):t==="XZY"&&(n[0]=i*o*l-r*s*a,n[1]=r*s*l-i*o*a,n[2]=r*o*a+i*s*l,n[3]=r*o*l+i*s*a),n}const Eie=uie,Aie=hie,Mie=fie,Tie=die;class Cie extends Array{constructor(e=0,t=0,i=0,r=1){super(e,t,i,r),this.onChange=()=>{},this._target=this;const s=["0","1","2","3"];return new Proxy(this,{set(o,a){const l=Reflect.set(...arguments);return l&&s.includes(a)&&o.onChange(),l}})}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}get w(){return this[3]}set x(e){this._target[0]=e,this.onChange()}set y(e){this._target[1]=e,this.onChange()}set z(e){this._target[2]=e,this.onChange()}set w(e){this._target[3]=e,this.onChange()}identity(){return pie(this._target),this.onChange(),this}set(e,t,i,r){return e.length?this.copy(e):(Aie(this._target,e,t,i,r),this.onChange(),this)}rotateX(e){return gie(this._target,this._target,e),this.onChange(),this}rotateY(e){return vie(this._target,this._target,e),this.onChange(),this}rotateZ(e){return _ie(this._target,this._target,e),this.onChange(),this}inverse(e=this._target){return bie(this._target,e),this.onChange(),this}conjugate(e=this._target){return wie(this._target,e),this.onChange(),this}copy(e){return Eie(this._target,e),this.onChange(),this}normalize(e=this._target){return Tie(this._target,e),this.onChange(),this}multiply(e,t){return t?QI(this._target,e,t):QI(this._target,this._target,e),this.onChange(),this}dot(e){return Mie(this._target,e)}fromMatrix3(e){return Sie(this._target,e),this.onChange(),this}fromEuler(e,t){return xie(this._target,e,e.order),t||this.onChange(),this}fromAxisAngle(e,t){return mie(this._target,e,t),this.onChange(),this}slerp(e,t){return yie(this._target,this._target,e,t),this.onChange(),this}fromArray(e,t=0){return this._target[0]=e[t],this._target[1]=e[t+1],this._target[2]=e[t+2],this._target[3]=e[t+3],this.onChange(),this}toArray(e=[],t=0){return e[t]=this[0],e[t+1]=this[1],e[t+2]=this[2],e[t+3]=this[3],e}}const Rie=1e-6;function Iie(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15],n}function Die(n,e,t,i,r,s,o,a,l,c,u,d,f,m,v,g,y){return n[0]=e,n[1]=t,n[2]=i,n[3]=r,n[4]=s,n[5]=o,n[6]=a,n[7]=l,n[8]=c,n[9]=u,n[10]=d,n[11]=f,n[12]=m,n[13]=v,n[14]=g,n[15]=y,n}function Pie(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function Oie(n,e){let t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=e[9],f=e[10],m=e[11],v=e[12],g=e[13],y=e[14],b=e[15],S=t*a-i*o,x=t*l-r*o,A=t*c-s*o,E=i*l-r*a,M=i*c-s*a,I=r*c-s*l,R=u*g-d*v,C=u*y-f*v,D=u*b-m*v,L=d*y-f*g,z=d*b-m*g,G=f*b-m*y,H=S*G-x*z+A*L+E*D-M*C+I*R;return H?(H=1/H,n[0]=(a*G-l*z+c*L)*H,n[1]=(r*z-i*G-s*L)*H,n[2]=(g*I-y*M+b*E)*H,n[3]=(f*M-d*I-m*E)*H,n[4]=(l*D-o*G-c*C)*H,n[5]=(t*G-r*D+s*C)*H,n[6]=(y*A-v*I-b*x)*H,n[7]=(u*I-f*A+m*x)*H,n[8]=(o*z-a*D+c*R)*H,n[9]=(i*D-t*z-s*R)*H,n[10]=(v*M-g*A+b*S)*H,n[11]=(d*A-u*M-m*S)*H,n[12]=(a*C-o*L-l*R)*H,n[13]=(t*L-i*C+r*R)*H,n[14]=(g*x-v*E-y*S)*H,n[15]=(u*E-d*x+f*S)*H,n):null}function DN(n){let e=n[0],t=n[1],i=n[2],r=n[3],s=n[4],o=n[5],a=n[6],l=n[7],c=n[8],u=n[9],d=n[10],f=n[11],m=n[12],v=n[13],g=n[14],y=n[15],b=e*o-t*s,S=e*a-i*s,x=e*l-r*s,A=t*a-i*o,E=t*l-r*o,M=i*l-r*a,I=c*v-u*m,R=c*g-d*m,C=c*y-f*m,D=u*g-d*v,L=u*y-f*v,z=d*y-f*g;return b*z-S*L+x*D+A*C-E*R+M*I}function ZI(n,e,t){let i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=e[6],u=e[7],d=e[8],f=e[9],m=e[10],v=e[11],g=e[12],y=e[13],b=e[14],S=e[15],x=t[0],A=t[1],E=t[2],M=t[3];return n[0]=x*i+A*a+E*d+M*g,n[1]=x*r+A*l+E*f+M*y,n[2]=x*s+A*c+E*m+M*b,n[3]=x*o+A*u+E*v+M*S,x=t[4],A=t[5],E=t[6],M=t[7],n[4]=x*i+A*a+E*d+M*g,n[5]=x*r+A*l+E*f+M*y,n[6]=x*s+A*c+E*m+M*b,n[7]=x*o+A*u+E*v+M*S,x=t[8],A=t[9],E=t[10],M=t[11],n[8]=x*i+A*a+E*d+M*g,n[9]=x*r+A*l+E*f+M*y,n[10]=x*s+A*c+E*m+M*b,n[11]=x*o+A*u+E*v+M*S,x=t[12],A=t[13],E=t[14],M=t[15],n[12]=x*i+A*a+E*d+M*g,n[13]=x*r+A*l+E*f+M*y,n[14]=x*s+A*c+E*m+M*b,n[15]=x*o+A*u+E*v+M*S,n}function Lie(n,e,t){let i=t[0],r=t[1],s=t[2],o,a,l,c,u,d,f,m,v,g,y,b;return e===n?(n[12]=e[0]*i+e[4]*r+e[8]*s+e[12],n[13]=e[1]*i+e[5]*r+e[9]*s+e[13],n[14]=e[2]*i+e[6]*r+e[10]*s+e[14],n[15]=e[3]*i+e[7]*r+e[11]*s+e[15]):(o=e[0],a=e[1],l=e[2],c=e[3],u=e[4],d=e[5],f=e[6],m=e[7],v=e[8],g=e[9],y=e[10],b=e[11],n[0]=o,n[1]=a,n[2]=l,n[3]=c,n[4]=u,n[5]=d,n[6]=f,n[7]=m,n[8]=v,n[9]=g,n[10]=y,n[11]=b,n[12]=o*i+u*r+v*s+e[12],n[13]=a*i+d*r+g*s+e[13],n[14]=l*i+f*r+y*s+e[14],n[15]=c*i+m*r+b*s+e[15]),n}function kie(n,e,t){let i=t[0],r=t[1],s=t[2];return n[0]=e[0]*i,n[1]=e[1]*i,n[2]=e[2]*i,n[3]=e[3]*i,n[4]=e[4]*r,n[5]=e[5]*r,n[6]=e[6]*r,n[7]=e[7]*r,n[8]=e[8]*s,n[9]=e[9]*s,n[10]=e[10]*s,n[11]=e[11]*s,n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15],n}function Uie(n,e,t,i){let r=i[0],s=i[1],o=i[2],a=Math.hypot(r,s,o),l,c,u,d,f,m,v,g,y,b,S,x,A,E,M,I,R,C,D,L,z,G,H,J;return Math.abs(a)<Rie?null:(a=1/a,r*=a,s*=a,o*=a,l=Math.sin(t),c=Math.cos(t),u=1-c,d=e[0],f=e[1],m=e[2],v=e[3],g=e[4],y=e[5],b=e[6],S=e[7],x=e[8],A=e[9],E=e[10],M=e[11],I=r*r*u+c,R=s*r*u+o*l,C=o*r*u-s*l,D=r*s*u-o*l,L=s*s*u+c,z=o*s*u+r*l,G=r*o*u+s*l,H=s*o*u-r*l,J=o*o*u+c,n[0]=d*I+g*R+x*C,n[1]=f*I+y*R+A*C,n[2]=m*I+b*R+E*C,n[3]=v*I+S*R+M*C,n[4]=d*D+g*L+x*z,n[5]=f*D+y*L+A*z,n[6]=m*D+b*L+E*z,n[7]=v*D+S*L+M*z,n[8]=d*G+g*H+x*J,n[9]=f*G+y*H+A*J,n[10]=m*G+b*H+E*J,n[11]=v*G+S*H+M*J,e!==n&&(n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n)}function Nie(n,e){return n[0]=e[12],n[1]=e[13],n[2]=e[14],n}function PN(n,e){let t=e[0],i=e[1],r=e[2],s=e[4],o=e[5],a=e[6],l=e[8],c=e[9],u=e[10];return n[0]=Math.hypot(t,i,r),n[1]=Math.hypot(s,o,a),n[2]=Math.hypot(l,c,u),n}function Fie(n){let e=n[0],t=n[1],i=n[2],r=n[4],s=n[5],o=n[6],a=n[8],l=n[9],c=n[10];const u=e*e+t*t+i*i,d=r*r+s*s+o*o,f=a*a+l*l+c*c;return Math.sqrt(Math.max(u,d,f))}const ON=(function(){const n=[1,1,1];return function(e,t){let i=n;PN(i,t);let r=1/i[0],s=1/i[1],o=1/i[2],a=t[0]*r,l=t[1]*s,c=t[2]*o,u=t[4]*r,d=t[5]*s,f=t[6]*o,m=t[8]*r,v=t[9]*s,g=t[10]*o,y=a+d+g,b=0;return y>0?(b=Math.sqrt(y+1)*2,e[3]=.25*b,e[0]=(f-v)/b,e[1]=(m-c)/b,e[2]=(l-u)/b):a>d&&a>g?(b=Math.sqrt(1+a-d-g)*2,e[3]=(f-v)/b,e[0]=.25*b,e[1]=(l+u)/b,e[2]=(m+c)/b):d>g?(b=Math.sqrt(1+d-a-g)*2,e[3]=(m-c)/b,e[0]=(l+u)/b,e[1]=.25*b,e[2]=(f+v)/b):(b=Math.sqrt(1+g-a-d)*2,e[3]=(l-u)/b,e[0]=(m+c)/b,e[1]=(f+v)/b,e[2]=.25*b),e}})();function Bie(n,e,t,i){let r=ud([n[0],n[1],n[2]]);const s=ud([n[4],n[5],n[6]]),o=ud([n[8],n[9],n[10]]);DN(n)<0&&(r=-r),t[0]=n[12],t[1]=n[13],t[2]=n[14];const l=n.slice(),c=1/r,u=1/s,d=1/o;l[0]*=c,l[1]*=c,l[2]*=c,l[4]*=u,l[5]*=u,l[6]*=u,l[8]*=d,l[9]*=d,l[10]*=d,ON(e,l),i[0]=r,i[1]=s,i[2]=o}function zie(n,e,t,i){const r=n,s=e[0],o=e[1],a=e[2],l=e[3],c=s+s,u=o+o,d=a+a,f=s*c,m=s*u,v=s*d,g=o*u,y=o*d,b=a*d,S=l*c,x=l*u,A=l*d,E=i[0],M=i[1],I=i[2];return r[0]=(1-(g+b))*E,r[1]=(m+A)*E,r[2]=(v-x)*E,r[3]=0,r[4]=(m-A)*M,r[5]=(1-(f+b))*M,r[6]=(y+S)*M,r[7]=0,r[8]=(v+x)*I,r[9]=(y-S)*I,r[10]=(1-(f+g))*I,r[11]=0,r[12]=t[0],r[13]=t[1],r[14]=t[2],r[15]=1,r}function Hie(n,e){let t=e[0],i=e[1],r=e[2],s=e[3],o=t+t,a=i+i,l=r+r,c=t*o,u=i*o,d=i*a,f=r*o,m=r*a,v=r*l,g=s*o,y=s*a,b=s*l;return n[0]=1-d-v,n[1]=u+b,n[2]=f-y,n[3]=0,n[4]=u-b,n[5]=1-c-v,n[6]=m+g,n[7]=0,n[8]=f+y,n[9]=m-g,n[10]=1-c-d,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function Gie(n,e,t,i,r){let s=1/Math.tan(e/2),o=1/(i-r);return n[0]=s/t,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=s,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=(r+i)*o,n[11]=-1,n[12]=0,n[13]=0,n[14]=2*r*i*o,n[15]=0,n}function Vie(n,e,t,i,r,s,o){let a=1/(e-t),l=1/(i-r),c=1/(s-o);return n[0]=-2*a,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=-2*l,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=2*c,n[11]=0,n[12]=(e+t)*a,n[13]=(r+i)*l,n[14]=(o+s)*c,n[15]=1,n}function Wie(n,e,t,i){let r=e[0],s=e[1],o=e[2],a=i[0],l=i[1],c=i[2],u=r-t[0],d=s-t[1],f=o-t[2],m=u*u+d*d+f*f;m===0?f=1:(m=1/Math.sqrt(m),u*=m,d*=m,f*=m);let v=l*f-c*d,g=c*u-a*f,y=a*d-l*u;return m=v*v+g*g+y*y,m===0&&(c?a+=1e-6:l?c+=1e-6:l+=1e-6,v=l*f-c*d,g=c*u-a*f,y=a*d-l*u,m=v*v+g*g+y*y),m=1/Math.sqrt(m),v*=m,g*=m,y*=m,n[0]=v,n[1]=g,n[2]=y,n[3]=0,n[4]=d*y-f*g,n[5]=f*v-u*y,n[6]=u*g-d*v,n[7]=0,n[8]=u,n[9]=d,n[10]=f,n[11]=0,n[12]=r,n[13]=s,n[14]=o,n[15]=1,n}function eD(n,e,t){return n[0]=e[0]+t[0],n[1]=e[1]+t[1],n[2]=e[2]+t[2],n[3]=e[3]+t[3],n[4]=e[4]+t[4],n[5]=e[5]+t[5],n[6]=e[6]+t[6],n[7]=e[7]+t[7],n[8]=e[8]+t[8],n[9]=e[9]+t[9],n[10]=e[10]+t[10],n[11]=e[11]+t[11],n[12]=e[12]+t[12],n[13]=e[13]+t[13],n[14]=e[14]+t[14],n[15]=e[15]+t[15],n}function tD(n,e,t){return n[0]=e[0]-t[0],n[1]=e[1]-t[1],n[2]=e[2]-t[2],n[3]=e[3]-t[3],n[4]=e[4]-t[4],n[5]=e[5]-t[5],n[6]=e[6]-t[6],n[7]=e[7]-t[7],n[8]=e[8]-t[8],n[9]=e[9]-t[9],n[10]=e[10]-t[10],n[11]=e[11]-t[11],n[12]=e[12]-t[12],n[13]=e[13]-t[13],n[14]=e[14]-t[14],n[15]=e[15]-t[15],n}function jie(n,e,t){return n[0]=e[0]*t,n[1]=e[1]*t,n[2]=e[2]*t,n[3]=e[3]*t,n[4]=e[4]*t,n[5]=e[5]*t,n[6]=e[6]*t,n[7]=e[7]*t,n[8]=e[8]*t,n[9]=e[9]*t,n[10]=e[10]*t,n[11]=e[11]*t,n[12]=e[12]*t,n[13]=e[13]*t,n[14]=e[14]*t,n[15]=e[15]*t,n}class qo extends Array{constructor(e=1,t=0,i=0,r=0,s=0,o=1,a=0,l=0,c=0,u=0,d=1,f=0,m=0,v=0,g=0,y=1){return super(e,t,i,r,s,o,a,l,c,u,d,f,m,v,g,y),this}get x(){return this[12]}get y(){return this[13]}get z(){return this[14]}get w(){return this[15]}set x(e){this[12]=e}set y(e){this[13]=e}set z(e){this[14]=e}set w(e){this[15]=e}set(e,t,i,r,s,o,a,l,c,u,d,f,m,v,g,y){return e.length?this.copy(e):(Die(this,e,t,i,r,s,o,a,l,c,u,d,f,m,v,g,y),this)}translate(e,t=this){return Lie(this,t,e),this}rotate(e,t,i=this){return Uie(this,i,e,t),this}scale(e,t=this){return kie(this,t,typeof e=="number"?[e,e,e]:e),this}add(e,t){return t?eD(this,e,t):eD(this,this,e),this}sub(e,t){return t?tD(this,e,t):tD(this,this,e),this}multiply(e,t){return e.length?t?ZI(this,e,t):ZI(this,this,e):jie(this,this,e),this}identity(){return Pie(this),this}copy(e){return Iie(this,e),this}fromPerspective({fov:e,aspect:t,near:i,far:r}={}){return Gie(this,e,t,i,r),this}fromOrthogonal({left:e,right:t,bottom:i,top:r,near:s,far:o}){return Vie(this,e,t,i,r,s,o),this}fromQuaternion(e){return Hie(this,e),this}setPosition(e){return this.x=e[0],this.y=e[1],this.z=e[2],this}inverse(e=this){return Oie(this,e),this}compose(e,t,i){return zie(this,e,t,i),this}decompose(e,t,i){return Bie(this,e,t,i),this}getRotation(e){return ON(e,this),this}getTranslation(e){return Nie(e,this),this}getScaling(e){return PN(e,this),this}getMaxScaleOnAxis(){return Fie(this)}lookAt(e,t,i){return Wie(this,e,t,i),this}determinant(){return DN(this)}fromArray(e,t=0){return this[0]=e[t],this[1]=e[t+1],this[2]=e[t+2],this[3]=e[t+3],this[4]=e[t+4],this[5]=e[t+5],this[6]=e[t+6],this[7]=e[t+7],this[8]=e[t+8],this[9]=e[t+9],this[10]=e[t+10],this[11]=e[t+11],this[12]=e[t+12],this[13]=e[t+13],this[14]=e[t+14],this[15]=e[t+15],this}toArray(e=[],t=0){return e[t]=this[0],e[t+1]=this[1],e[t+2]=this[2],e[t+3]=this[3],e[t+4]=this[4],e[t+5]=this[5],e[t+6]=this[6],e[t+7]=this[7],e[t+8]=this[8],e[t+9]=this[9],e[t+10]=this[10],e[t+11]=this[11],e[t+12]=this[12],e[t+13]=this[13],e[t+14]=this[14],e[t+15]=this[15],e}}function qie(n,e,t="YXZ"){return t==="XYZ"?(n[1]=Math.asin(Math.min(Math.max(e[8],-1),1)),Math.abs(e[8])<.99999?(n[0]=Math.atan2(-e[9],e[10]),n[2]=Math.atan2(-e[4],e[0])):(n[0]=Math.atan2(e[6],e[5]),n[2]=0)):t==="YXZ"?(n[0]=Math.asin(-Math.min(Math.max(e[9],-1),1)),Math.abs(e[9])<.99999?(n[1]=Math.atan2(e[8],e[10]),n[2]=Math.atan2(e[1],e[5])):(n[1]=Math.atan2(-e[2],e[0]),n[2]=0)):t==="ZXY"?(n[0]=Math.asin(Math.min(Math.max(e[6],-1),1)),Math.abs(e[6])<.99999?(n[1]=Math.atan2(-e[2],e[10]),n[2]=Math.atan2(-e[4],e[5])):(n[1]=0,n[2]=Math.atan2(e[1],e[0]))):t==="ZYX"?(n[1]=Math.asin(-Math.min(Math.max(e[2],-1),1)),Math.abs(e[2])<.99999?(n[0]=Math.atan2(e[6],e[10]),n[2]=Math.atan2(e[1],e[0])):(n[0]=0,n[2]=Math.atan2(-e[4],e[5]))):t==="YZX"?(n[2]=Math.asin(Math.min(Math.max(e[1],-1),1)),Math.abs(e[1])<.99999?(n[0]=Math.atan2(-e[9],e[5]),n[1]=Math.atan2(-e[2],e[0])):(n[0]=0,n[1]=Math.atan2(e[8],e[10]))):t==="XZY"&&(n[2]=Math.asin(-Math.min(Math.max(e[4],-1),1)),Math.abs(e[4])<.99999?(n[0]=Math.atan2(e[6],e[5]),n[1]=Math.atan2(e[8],e[0])):(n[0]=Math.atan2(-e[9],e[10]),n[1]=0)),n}const nD=new qo;class Xie extends Array{constructor(e=0,t=e,i=e,r="YXZ"){super(e,t,i),this.order=r,this.onChange=()=>{},this._target=this;const s=["0","1","2"];return new Proxy(this,{set(o,a){const l=Reflect.set(...arguments);return l&&s.includes(a)&&o.onChange(),l}})}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}set x(e){this._target[0]=e,this.onChange()}set y(e){this._target[1]=e,this.onChange()}set z(e){this._target[2]=e,this.onChange()}set(e,t=e,i=e){return e.length?this.copy(e):(this._target[0]=e,this._target[1]=t,this._target[2]=i,this.onChange(),this)}copy(e){return this._target[0]=e[0],this._target[1]=e[1],this._target[2]=e[2],this.onChange(),this}reorder(e){return this._target.order=e,this.onChange(),this}fromRotationMatrix(e,t=this.order){return qie(this._target,e,t),this.onChange(),this}fromQuaternion(e,t=this.order,i){return nD.fromQuaternion(e),this._target.fromRotationMatrix(nD,t),i||this.onChange(),this}fromArray(e,t=0){return this._target[0]=e[t],this._target[1]=e[t+1],this._target[2]=e[t+2],this}toArray(e=[],t=0){return e[t]=this[0],e[t+1]=this[1],e[t+2]=this[2],e}}class LN{constructor(){this.parent=null,this.children=[],this.visible=!0,this.matrix=new qo,this.worldMatrix=new qo,this.matrixAutoUpdate=!0,this.worldMatrixNeedsUpdate=!1,this.position=new ci,this.quaternion=new Cie,this.scale=new ci(1),this.rotation=new Xie,this.up=new ci(0,1,0),this.rotation._target.onChange=()=>this.quaternion.fromEuler(this.rotation,!0),this.quaternion._target.onChange=()=>this.rotation.fromQuaternion(this.quaternion,void 0,!0)}setParent(e,t=!0){this.parent&&e!==this.parent&&this.parent.removeChild(this,!1),this.parent=e,t&&e&&e.addChild(this,!1)}addChild(e,t=!0){~this.children.indexOf(e)||this.children.push(e),t&&e.setParent(this,!1)}removeChild(e,t=!0){~this.children.indexOf(e)&&this.children.splice(this.children.indexOf(e),1),t&&e.setParent(null,!1)}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.worldMatrixNeedsUpdate||e)&&(this.parent===null?this.worldMatrix.copy(this.matrix):this.worldMatrix.multiply(this.parent.worldMatrix,this.matrix),this.worldMatrixNeedsUpdate=!1,e=!0);for(let t=0,i=this.children.length;t<i;t++)this.children[t].updateMatrixWorld(e)}updateMatrix(){this.matrix.compose(this.quaternion,this.position,this.scale),this.worldMatrixNeedsUpdate=!0}traverse(e){if(!e(this))for(let t=0,i=this.children.length;t<i;t++)this.children[t].traverse(e)}decompose(){this.matrix.decompose(this.quaternion._target,this.position,this.scale),this.rotation.fromQuaternion(this.quaternion)}lookAt(e,t=!1){t?this.matrix.lookAt(this.position,e,this.up):this.matrix.lookAt(e,this.position,this.up),this.matrix.getRotation(this.quaternion._target),this.rotation.fromQuaternion(this.quaternion)}}const Yie=new qo,Kie=new ci,$ie=new ci;class ble extends LN{constructor(e,{near:t=.1,far:i=100,fov:r=45,aspect:s=1,left:o,right:a,bottom:l,top:c,zoom:u=1}={}){super(),Object.assign(this,{near:t,far:i,fov:r,aspect:s,left:o,right:a,bottom:l,top:c,zoom:u}),this.projectionMatrix=new qo,this.viewMatrix=new qo,this.projectionViewMatrix=new qo,this.worldPosition=new ci,this.type=o||a?"orthographic":"perspective",this.type==="orthographic"?this.orthographic():this.perspective()}perspective({near:e=this.near,far:t=this.far,fov:i=this.fov,aspect:r=this.aspect}={}){return Object.assign(this,{near:e,far:t,fov:i,aspect:r}),this.projectionMatrix.fromPerspective({fov:i*(Math.PI/180),aspect:r,near:e,far:t}),this.type="perspective",this}orthographic({near:e=this.near,far:t=this.far,left:i=this.left||-1,right:r=this.right||1,bottom:s=this.bottom||-1,top:o=this.top||1,zoom:a=this.zoom}={}){return Object.assign(this,{near:e,far:t,left:i,right:r,bottom:s,top:o,zoom:a}),i/=a,r/=a,s/=a,o/=a,this.projectionMatrix.fromOrthogonal({left:i,right:r,bottom:s,top:o,near:e,far:t}),this.type="orthographic",this}updateMatrixWorld(){return super.updateMatrixWorld(),this.viewMatrix.inverse(this.worldMatrix),this.worldMatrix.getTranslation(this.worldPosition),this.projectionViewMatrix.multiply(this.projectionMatrix,this.viewMatrix),this}updateProjectionMatrix(){return this.type==="perspective"?this.perspective():this.orthographic()}lookAt(e){return super.lookAt(e,!0),this}project(e){return e.applyMatrix4(this.viewMatrix),e.applyMatrix4(this.projectionMatrix),this}unproject(e){return e.applyMatrix4(Yie.inverse(this.projectionMatrix)),e.applyMatrix4(this.worldMatrix),this}updateFrustum(){this.frustum||(this.frustum=[new ci,new ci,new ci,new ci,new ci,new ci]);const e=this.projectionViewMatrix;this.frustum[0].set(e[3]-e[0],e[7]-e[4],e[11]-e[8]).constant=e[15]-e[12],this.frustum[1].set(e[3]+e[0],e[7]+e[4],e[11]+e[8]).constant=e[15]+e[12],this.frustum[2].set(e[3]+e[1],e[7]+e[5],e[11]+e[9]).constant=e[15]+e[13],this.frustum[3].set(e[3]-e[1],e[7]-e[5],e[11]-e[9]).constant=e[15]-e[13],this.frustum[4].set(e[3]-e[2],e[7]-e[6],e[11]-e[10]).constant=e[15]-e[14],this.frustum[5].set(e[3]+e[2],e[7]+e[6],e[11]+e[10]).constant=e[15]+e[14];for(let t=0;t<6;t++){const i=1/this.frustum[t].distance();this.frustum[t].multiply(i),this.frustum[t].constant*=i}}frustumIntersectsMesh(e,t=e.worldMatrix){if(!e.geometry.attributes.position||((!e.geometry.bounds||e.geometry.bounds.radius===1/0)&&e.geometry.computeBoundingSphere(),!e.geometry.bounds))return!0;const i=Kie;i.copy(e.geometry.bounds.center),i.applyMatrix4(t);const r=e.geometry.bounds.radius*t.getMaxScaleOnAxis();return this.frustumIntersectsSphere(i,r)}frustumIntersectsSphere(e,t){const i=$ie;for(let r=0;r<6;r++){const s=this.frustum[r];if(i.copy(s).dot(e)+s.constant<-t)return!1}return!0}}function Jie(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[4],n[4]=e[5],n[5]=e[6],n[6]=e[8],n[7]=e[9],n[8]=e[10],n}function Qie(n,e){let t=e[0],i=e[1],r=e[2],s=e[3],o=t+t,a=i+i,l=r+r,c=t*o,u=i*o,d=i*a,f=r*o,m=r*a,v=r*l,g=s*o,y=s*a,b=s*l;return n[0]=1-d-v,n[3]=u-b,n[6]=f+y,n[1]=u+b,n[4]=1-c-v,n[7]=m-g,n[2]=f-y,n[5]=m+g,n[8]=1-c-d,n}function Zie(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[8]=e[8],n}function ere(n,e,t,i,r,s,o,a,l,c){return n[0]=e,n[1]=t,n[2]=i,n[3]=r,n[4]=s,n[5]=o,n[6]=a,n[7]=l,n[8]=c,n}function tre(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=1,n[5]=0,n[6]=0,n[7]=0,n[8]=1,n}function nre(n,e){let t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=u*o-a*c,f=-u*s+a*l,m=c*s-o*l,v=t*d+i*f+r*m;return v?(v=1/v,n[0]=d*v,n[1]=(-u*i+r*c)*v,n[2]=(a*i-r*o)*v,n[3]=f*v,n[4]=(u*t-r*l)*v,n[5]=(-a*t+r*s)*v,n[6]=m*v,n[7]=(-c*t+i*l)*v,n[8]=(o*t-i*s)*v,n):null}function iD(n,e,t){let i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=e[6],u=e[7],d=e[8],f=t[0],m=t[1],v=t[2],g=t[3],y=t[4],b=t[5],S=t[6],x=t[7],A=t[8];return n[0]=f*i+m*o+v*c,n[1]=f*r+m*a+v*u,n[2]=f*s+m*l+v*d,n[3]=g*i+y*o+b*c,n[4]=g*r+y*a+b*u,n[5]=g*s+y*l+b*d,n[6]=S*i+x*o+A*c,n[7]=S*r+x*a+A*u,n[8]=S*s+x*l+A*d,n}function ire(n,e,t){let i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=e[6],u=e[7],d=e[8],f=t[0],m=t[1];return n[0]=i,n[1]=r,n[2]=s,n[3]=o,n[4]=a,n[5]=l,n[6]=f*i+m*o+c,n[7]=f*r+m*a+u,n[8]=f*s+m*l+d,n}function rre(n,e,t){let i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=e[6],u=e[7],d=e[8],f=Math.sin(t),m=Math.cos(t);return n[0]=m*i+f*o,n[1]=m*r+f*a,n[2]=m*s+f*l,n[3]=m*o-f*i,n[4]=m*a-f*r,n[5]=m*l-f*s,n[6]=c,n[7]=u,n[8]=d,n}function sre(n,e,t){let i=t[0],r=t[1];return n[0]=i*e[0],n[1]=i*e[1],n[2]=i*e[2],n[3]=r*e[3],n[4]=r*e[4],n[5]=r*e[5],n[6]=e[6],n[7]=e[7],n[8]=e[8],n}function ore(n,e){let t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=e[9],f=e[10],m=e[11],v=e[12],g=e[13],y=e[14],b=e[15],S=t*a-i*o,x=t*l-r*o,A=t*c-s*o,E=i*l-r*a,M=i*c-s*a,I=r*c-s*l,R=u*g-d*v,C=u*y-f*v,D=u*b-m*v,L=d*y-f*g,z=d*b-m*g,G=f*b-m*y,H=S*G-x*z+A*L+E*D-M*C+I*R;return H?(H=1/H,n[0]=(a*G-l*z+c*L)*H,n[1]=(l*D-o*G-c*C)*H,n[2]=(o*z-a*D+c*R)*H,n[3]=(r*z-i*G-s*L)*H,n[4]=(t*G-r*D+s*C)*H,n[5]=(i*D-t*z-s*R)*H,n[6]=(g*I-y*M+b*E)*H,n[7]=(y*A-v*I-b*x)*H,n[8]=(v*M-g*A+b*S)*H,n):null}class are extends Array{constructor(e=1,t=0,i=0,r=0,s=1,o=0,a=0,l=0,c=1){return super(e,t,i,r,s,o,a,l,c),this}set(e,t,i,r,s,o,a,l,c){return e.length?this.copy(e):(ere(this,e,t,i,r,s,o,a,l,c),this)}translate(e,t=this){return ire(this,t,e),this}rotate(e,t=this){return rre(this,t,e),this}scale(e,t=this){return sre(this,t,e),this}multiply(e,t){return t?iD(this,e,t):iD(this,this,e),this}identity(){return tre(this),this}copy(e){return Zie(this,e),this}fromMatrix4(e){return Jie(this,e),this}fromQuaternion(e){return Qie(this,e),this}fromBasis(e,t,i){return this.set(e[0],e[1],e[2],t[0],t[1],t[2],i[0],i[1],i[2]),this}inverse(e=this){return nre(this,e),this}getNormalMatrix(e){return ore(this,e),this}}let lre=0;class wle extends LN{constructor(e,{geometry:t,program:i,mode:r=e.TRIANGLES,frustumCulled:s=!0,renderOrder:o=0}={}){super(),e.canvas||console.error("gl not passed as first argument to Mesh"),this.gl=e,this.id=lre++,this.geometry=t,this.program=i,this.mode=r,this.frustumCulled=s,this.renderOrder=o,this.modelViewMatrix=new qo,this.normalMatrix=new are,this.beforeRenderCallbacks=[],this.afterRenderCallbacks=[]}onBeforeRender(e){return this.beforeRenderCallbacks.push(e),this}onAfterRender(e){return this.afterRenderCallbacks.push(e),this}draw({camera:e}={}){e&&(this.program.uniforms.modelMatrix||Object.assign(this.program.uniforms,{modelMatrix:{value:null},viewMatrix:{value:null},modelViewMatrix:{value:null},normalMatrix:{value:null},projectionMatrix:{value:null},cameraPosition:{value:null}}),this.program.uniforms.projectionMatrix.value=e.projectionMatrix,this.program.uniforms.cameraPosition.value=e.worldPosition,this.program.uniforms.viewMatrix.value=e.viewMatrix,this.modelViewMatrix.multiply(e.viewMatrix,this.worldMatrix),this.normalMatrix.getNormalMatrix(this.modelViewMatrix),this.program.uniforms.modelMatrix.value=this.worldMatrix,this.program.uniforms.modelViewMatrix.value=this.modelViewMatrix,this.program.uniforms.normalMatrix.value=this.normalMatrix),this.beforeRenderCallbacks.forEach(i=>i&&i({mesh:this,camera:e}));let t=this.program.cullFace&&this.worldMatrix.determinant()<0;this.program.use({flipFaces:t}),this.geometry.draw({mode:this.mode,program:this.program}),this.afterRenderCallbacks.forEach(i=>i&&i({mesh:this,camera:e}))}}const rD=new Uint8Array(4);function sD(n){return(n&n-1)===0}let cre=1;class Sle{constructor(e,{image:t,target:i=e.TEXTURE_2D,type:r=e.UNSIGNED_BYTE,format:s=e.RGBA,internalFormat:o=s,wrapS:a=e.CLAMP_TO_EDGE,wrapT:l=e.CLAMP_TO_EDGE,wrapR:c=e.CLAMP_TO_EDGE,generateMipmaps:u=i===(e.TEXTURE_2D||e.TEXTURE_CUBE_MAP),minFilter:d=u?e.NEAREST_MIPMAP_LINEAR:e.LINEAR,magFilter:f=e.LINEAR,premultiplyAlpha:m=!1,unpackAlignment:v=4,flipY:g=i==(e.TEXTURE_2D||e.TEXTURE_3D),anisotropy:y=0,level:b=0,width:S,height:x=S,length:A=1}={}){this.gl=e,this.id=cre++,this.image=t,this.target=i,this.type=r,this.format=s,this.internalFormat=o,this.minFilter=d,this.magFilter=f,this.wrapS=a,this.wrapT=l,this.wrapR=c,this.generateMipmaps=u,this.premultiplyAlpha=m,this.unpackAlignment=v,this.flipY=g,this.anisotropy=Math.min(y,this.gl.renderer.parameters.maxAnisotropy),this.level=b,this.width=S,this.height=x,this.length=A,this.texture=this.gl.createTexture(),this.store={image:null},this.glState=this.gl.renderer.state,this.state={},this.state.minFilter=this.gl.NEAREST_MIPMAP_LINEAR,this.state.magFilter=this.gl.LINEAR,this.state.wrapS=this.gl.REPEAT,this.state.wrapT=this.gl.REPEAT,this.state.anisotropy=0}bind(){this.glState.textureUnits[this.glState.activeTextureUnit]!==this.id&&(this.gl.bindTexture(this.target,this.texture),this.glState.textureUnits[this.glState.activeTextureUnit]=this.id)}update(e=0){const t=!(this.image===this.store.image&&!this.needsUpdate);if((t||this.glState.textureUnits[e]!==this.id)&&(this.gl.renderer.activeTexture(e),this.bind()),!!t){if(this.needsUpdate=!1,this.flipY!==this.glState.flipY&&(this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,this.flipY),this.glState.flipY=this.flipY),this.premultiplyAlpha!==this.glState.premultiplyAlpha&&(this.gl.pixelStorei(this.gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),this.glState.premultiplyAlpha=this.premultiplyAlpha),this.unpackAlignment!==this.glState.unpackAlignment&&(this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT,this.unpackAlignment),this.glState.unpackAlignment=this.unpackAlignment),this.minFilter!==this.state.minFilter&&(this.gl.texParameteri(this.target,this.gl.TEXTURE_MIN_FILTER,this.minFilter),this.state.minFilter=this.minFilter),this.magFilter!==this.state.magFilter&&(this.gl.texParameteri(this.target,this.gl.TEXTURE_MAG_FILTER,this.magFilter),this.state.magFilter=this.magFilter),this.wrapS!==this.state.wrapS&&(this.gl.texParameteri(this.target,this.gl.TEXTURE_WRAP_S,this.wrapS),this.state.wrapS=this.wrapS),this.wrapT!==this.state.wrapT&&(this.gl.texParameteri(this.target,this.gl.TEXTURE_WRAP_T,this.wrapT),this.state.wrapT=this.wrapT),this.wrapR!==this.state.wrapR&&(this.gl.texParameteri(this.target,this.gl.TEXTURE_WRAP_R,this.wrapR),this.state.wrapR=this.wrapR),this.anisotropy&&this.anisotropy!==this.state.anisotropy&&(this.gl.texParameterf(this.target,this.gl.renderer.getExtension("EXT_texture_filter_anisotropic").TEXTURE_MAX_ANISOTROPY_EXT,this.anisotropy),this.state.anisotropy=this.anisotropy),this.image){if(this.image.width&&(this.width=this.image.width,this.height=this.image.height),this.target===this.gl.TEXTURE_CUBE_MAP)for(let i=0;i<6;i++)this.gl.texImage2D(this.gl.TEXTURE_CUBE_MAP_POSITIVE_X+i,this.level,this.internalFormat,this.format,this.type,this.image[i]);else if(ArrayBuffer.isView(this.image))this.target===this.gl.TEXTURE_2D?this.gl.texImage2D(this.target,this.level,this.internalFormat,this.width,this.height,0,this.format,this.type,this.image):(this.target===this.gl.TEXTURE_2D_ARRAY||this.target===this.gl.TEXTURE_3D)&&this.gl.texImage3D(this.target,this.level,this.internalFormat,this.width,this.height,this.length,0,this.format,this.type,this.image);else if(this.image.isCompressedTexture)for(let i=0;i<this.image.length;i++)this.gl.compressedTexImage2D(this.target,i,this.internalFormat,this.image[i].width,this.image[i].height,0,this.image[i].data);else this.target===this.gl.TEXTURE_2D?this.gl.texImage2D(this.target,this.level,this.internalFormat,this.format,this.type,this.image):this.gl.texImage3D(this.target,this.level,this.internalFormat,this.width,this.height,this.length,0,this.format,this.type,this.image);this.generateMipmaps&&(!this.gl.renderer.isWebgl2&&(!sD(this.image.width)||!sD(this.image.height))?(this.generateMipmaps=!1,this.wrapS=this.wrapT=this.gl.CLAMP_TO_EDGE,this.minFilter=this.gl.LINEAR):this.gl.generateMipmap(this.target)),this.onUpdate&&this.onUpdate()}else if(this.target===this.gl.TEXTURE_CUBE_MAP)for(let i=0;i<6;i++)this.gl.texImage2D(this.gl.TEXTURE_CUBE_MAP_POSITIVE_X+i,0,this.gl.RGBA,1,1,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,rD);else this.width?this.target===this.gl.TEXTURE_2D?this.gl.texImage2D(this.target,this.level,this.internalFormat,this.width,this.height,0,this.format,this.type,null):this.gl.texImage3D(this.target,this.level,this.internalFormat,this.width,this.height,this.length,0,this.format,this.type,null):this.gl.texImage2D(this.target,0,this.gl.RGBA,1,1,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,rD);this.store.image=this.image}}}class kN extends rie{constructor(e,{width:t=1,height:i=1,widthSegments:r=1,heightSegments:s=1,attributes:o={}}={}){const a=r,l=s,c=(a+1)*(l+1),u=a*l*6,d=new Float32Array(c*3),f=new Float32Array(c*3),m=new Float32Array(c*2),v=u>65536?new Uint32Array(u):new Uint16Array(u);kN.buildPlane(d,f,m,v,t,i,0,a,l),Object.assign(o,{position:{size:3,data:d},normal:{size:3,data:f},uv:{size:2,data:m},index:{data:v}}),super(e,o)}static buildPlane(e,t,i,r,s,o,a,l,c,u=0,d=1,f=2,m=1,v=-1,g=0,y=0){const b=g,S=s/l,x=o/c;for(let A=0;A<=c;A++){let E=A*x-o/2;for(let M=0;M<=l;M++,g++){let I=M*S-s/2;if(e[g*3+u]=I*m,e[g*3+d]=E*v,e[g*3+f]=a/2,t[g*3+u]=0,t[g*3+d]=0,t[g*3+f]=a>=0?1:-1,i[g*2]=M/l,i[g*2+1]=1-A/c,A===c||M===l)continue;let R=b+M+A*(l+1),C=b+M+(A+1)*(l+1),D=b+M+(A+1)*(l+1)+1,L=b+M+A*(l+1)+1;r[y*6]=R,r[y*6+1]=C,r[y*6+2]=L,r[y*6+3]=C,r[y*6+4]=D,r[y*6+5]=L,y++}}}}const oD=n=>typeof n=="boolean"?"".concat(n):n===0?"0":n,aD=qW,xle=(n,e)=>t=>{var i;if((e==null?void 0:e.variants)==null)return aD(n,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:r,defaultVariants:s}=e,o=Object.keys(r).map(c=>{const u=t==null?void 0:t[c],d=s==null?void 0:s[c];if(u===null)return null;const f=oD(u)||oD(d);return r[c][f]}),a=t&&Object.entries(t).reduce((c,u)=>{let[d,f]=u;return f===void 0||(c[d]=f),c},{}),l=e==null||(i=e.compoundVariants)===null||i===void 0?void 0:i.reduce((c,u)=>{let{class:d,className:f,...m}=u;return Object.entries(m).every(v=>{let[g,y]=v;return Array.isArray(y)?y.includes({...s,...a}[g]):{...s,...a}[g]===y})?[...c,d,f]:c},[]);return aD(n,o,l,t==null?void 0:t.class,t==null?void 0:t.className)};/**
 * postprocessing v6.37.8 build Fri Sep 12 2025
 * https://github.com/pmndrs/postprocessing
 * Copyright 2015-2025 Raoul van Rschen
 * @license Zlib
 */var _b=1/1e3,ure=1e3,hre=class{constructor(){this.startTime=performance.now(),this.previousTime=0,this.currentTime=0,this._delta=0,this._elapsed=0,this._fixedDelta=1e3/60,this.timescale=1,this.useFixedDelta=!1,this._autoReset=!1}get autoReset(){return this._autoReset}set autoReset(n){typeof document<"u"&&document.hidden!==void 0&&(n?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this),this._autoReset=n)}get delta(){return this._delta*_b}get fixedDelta(){return this._fixedDelta*_b}set fixedDelta(n){this._fixedDelta=n*ure}get elapsed(){return this._elapsed*_b}update(n){this.useFixedDelta?this._delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=(n!==void 0?n:performance.now())-this.startTime,this._delta=this.currentTime-this.previousTime),this._delta*=this.timescale,this._elapsed+=this._delta}reset(){this._delta=0,this._elapsed=0,this.currentTime=performance.now()-this.startTime}getDelta(){return this.delta}getElapsed(){return this.elapsed}handleEvent(n){document.hidden||(this.currentTime=performance.now()-this.startTime)}dispose(){this.autoReset=!1}},dre=(()=>{const n=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),e=new Float32Array([0,0,2,0,0,2]),t=new Ut;return t.setAttribute("position",new _n(n,3)),t.setAttribute("uv",new _n(e,2)),t})(),jr=class Yw{static get fullscreenGeometry(){return dre}constructor(e="Pass",t=new Od,i=new sf){this.name=e,this.renderer=null,this.scene=t,this.camera=i,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(e){if(this.rtt===e){const t=this.fullscreenMaterial;t!==null&&(t.needsUpdate=!0),this.rtt=!e}}set mainScene(e){}set mainCamera(e){}setRenderer(e){this.renderer=e}isEnabled(){return this.enabled}setEnabled(e){this.enabled=e}get fullscreenMaterial(){return this.screen!==null?this.screen.material:null}set fullscreenMaterial(e){let t=this.screen;t!==null?t.material=e:(t=new Fn(Yw.fullscreenGeometry,e),t.frustumCulled=!1,this.scene===null&&(this.scene=new Od),this.scene.add(t),this.screen=t)}getFullscreenMaterial(){return this.fullscreenMaterial}setFullscreenMaterial(e){this.fullscreenMaterial=e}getDepthTexture(){return null}setDepthTexture(e,t=ra){}render(e,t,i,r,s){throw new Error("Render method not implemented!")}setSize(e,t){}initialize(e,t,i){}dispose(){for(const e of Object.keys(this)){const t=this[e];(t instanceof ni||t instanceof Ti||t instanceof En||t instanceof Yw)&&this[e].dispose()}this.fullscreenMaterial!==null&&this.fullscreenMaterial.dispose()}},fre=class extends jr{constructor(){super("ClearMaskPass",null,null),this.needsSwap=!1}render(n,e,t,i,r){const s=n.state.buffers.stencil;s.setLocked(!1),s.setTest(!1)}},pre="#include <common>\n#include <dithering_pars_fragment>\n#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\nuniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;\n#include <colorspace_fragment>\n#include <dithering_fragment>\n}",UN="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",NN=class extends Wn{constructor(){super({name:"CopyMaterial",uniforms:{inputBuffer:new Vt(null),opacity:new Vt(1)},blending:Ai,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:pre,vertexShader:UN})}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.uniforms.inputBuffer.value=n}getOpacity(n){return this.uniforms.opacity.value}setOpacity(n){this.uniforms.opacity.value=n}},mre=class extends jr{constructor(n,e=!0){super("CopyPass"),this.fullscreenMaterial=new NN,this.needsSwap=!1,this.renderTarget=n,n===void 0&&(this.renderTarget=new ni(1,1,{minFilter:Zt,magFilter:Zt,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="CopyPass.Target"),this.autoResize=e}get resize(){return this.autoResize}set resize(n){this.autoResize=n}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}setAutoResizeEnabled(n){this.autoResize=n}render(n,e,t,i,r){this.fullscreenMaterial.inputBuffer=e.texture,n.setRenderTarget(this.renderToScreen?null:this.renderTarget),n.render(this.scene,this.camera)}setSize(n,e){this.autoResize&&this.renderTarget.setSize(n,e)}initialize(n,e,t){t!==void 0&&(this.renderTarget.texture.type=t,t!==Zn?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":n!==null&&n.outputColorSpace===hn&&(this.renderTarget.texture.colorSpace=hn))}},lD=new at,Vx=class extends jr{constructor(n=!0,e=!0,t=!1){super("ClearPass",null,null),this.needsSwap=!1,this.color=n,this.depth=e,this.stencil=t,this.overrideClearColor=null,this.overrideClearAlpha=-1}setClearFlags(n,e,t){this.color=n,this.depth=e,this.stencil=t}getOverrideClearColor(){return this.overrideClearColor}setOverrideClearColor(n){this.overrideClearColor=n}getOverrideClearAlpha(){return this.overrideClearAlpha}setOverrideClearAlpha(n){this.overrideClearAlpha=n}render(n,e,t,i,r){const s=this.overrideClearColor,o=this.overrideClearAlpha,a=n.getClearAlpha(),l=s!==null,c=o>=0;l?(n.getClearColor(lD),n.setClearColor(s,c?o:a)):c&&n.setClearAlpha(o),n.setRenderTarget(this.renderToScreen?null:e),n.clear(this.color,this.depth,this.stencil),l?n.setClearColor(lD,a):c&&n.setClearAlpha(a)}},gre=class extends jr{constructor(n,e){super("MaskPass",n,e),this.needsSwap=!1,this.clearPass=new Vx(!1,!1,!0),this.inverse=!1}set mainScene(n){this.scene=n}set mainCamera(n){this.camera=n}get inverted(){return this.inverse}set inverted(n){this.inverse=n}get clear(){return this.clearPass.enabled}set clear(n){this.clearPass.enabled=n}getClearPass(){return this.clearPass}isInverted(){return this.inverted}setInverted(n){this.inverted=n}render(n,e,t,i,r){const s=n.getContext(),o=n.state.buffers,a=this.scene,l=this.camera,c=this.clearPass,u=this.inverted?0:1,d=1-u;o.color.setMask(!1),o.depth.setMask(!1),o.color.setLocked(!0),o.depth.setLocked(!0),o.stencil.setTest(!0),o.stencil.setOp(s.REPLACE,s.REPLACE,s.REPLACE),o.stencil.setFunc(s.ALWAYS,u,4294967295),o.stencil.setClear(d),o.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?c.render(n,null):(c.render(n,e),c.render(n,t))),this.renderToScreen?(n.setRenderTarget(null),n.render(a,l)):(n.setRenderTarget(e),n.render(a,l),n.setRenderTarget(t),n.render(a,l)),o.color.setLocked(!1),o.depth.setLocked(!1),o.stencil.setLocked(!1),o.stencil.setFunc(s.EQUAL,1,4294967295),o.stencil.setOp(s.KEEP,s.KEEP,s.KEEP),o.stencil.setLocked(!0)}},Ele=class{constructor(n=null,{depthBuffer:e=!0,stencilBuffer:t=!1,multisampling:i=0,frameBufferType:r}={}){this.renderer=null,this.inputBuffer=this.createBuffer(e,t,r,i),this.outputBuffer=this.inputBuffer.clone(),this.copyPass=new mre,this.depthTexture=null,this.passes=[],this.timer=new hre,this.autoRenderToScreen=!0,this.setRenderer(n)}get multisampling(){return this.inputBuffer.samples||0}set multisampling(n){const e=this.inputBuffer,t=this.multisampling;t>0&&n>0?(this.inputBuffer.samples=n,this.outputBuffer.samples=n,this.inputBuffer.dispose(),this.outputBuffer.dispose()):t!==n&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),this.inputBuffer=this.createBuffer(e.depthBuffer,e.stencilBuffer,e.texture.type,n),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}getTimer(){return this.timer}getRenderer(){return this.renderer}setRenderer(n){if(this.renderer=n,n!==null){const e=n.getSize(new Ue),t=n.getContext().getContextAttributes().alpha,i=this.inputBuffer.texture.type;i===Zn&&n.outputColorSpace===hn&&(this.inputBuffer.texture.colorSpace=hn,this.outputBuffer.texture.colorSpace=hn,this.inputBuffer.dispose(),this.outputBuffer.dispose()),n.autoClear=!1,this.setSize(e.width,e.height);for(const r of this.passes)r.initialize(n,t,i)}}replaceRenderer(n,e=!0){const t=this.renderer,i=t.domElement.parentNode;return this.setRenderer(n),e&&i!==null&&(i.removeChild(t.domElement),i.appendChild(n.domElement)),t}createDepthTexture(){const n=this.depthTexture=new Lv;return this.inputBuffer.depthTexture=n,this.inputBuffer.dispose(),this.inputBuffer.stencilBuffer?(n.format=Il,n.type=Rl):n.type=fs,n}deleteDepthTexture(){if(this.depthTexture!==null){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();for(const n of this.passes)n.setDepthTexture(null)}}createBuffer(n,e,t,i){const r=this.renderer,s=r===null?new Ue:r.getDrawingBufferSize(new Ue),o={minFilter:Zt,magFilter:Zt,stencilBuffer:e,depthBuffer:n,type:t},a=new ni(s.width,s.height,o);return i>0&&(a.ignoreDepthForMultisampleCopy=!1,a.samples=i),t===Zn&&r!==null&&r.outputColorSpace===hn&&(a.texture.colorSpace=hn),a.texture.name="EffectComposer.Buffer",a.texture.generateMipmaps=!1,a}setMainScene(n){for(const e of this.passes)e.mainScene=n}setMainCamera(n){for(const e of this.passes)e.mainCamera=n}addPass(n,e){const t=this.passes,i=this.renderer,r=i.getDrawingBufferSize(new Ue),s=i.getContext().getContextAttributes().alpha,o=this.inputBuffer.texture.type;if(n.setRenderer(i),n.setSize(r.width,r.height),n.initialize(i,s,o),this.autoRenderToScreen&&(t.length>0&&(t[t.length-1].renderToScreen=!1),n.renderToScreen&&(this.autoRenderToScreen=!1)),e!==void 0?t.splice(e,0,n):t.push(n),this.autoRenderToScreen&&(t[t.length-1].renderToScreen=!0),n.needsDepthTexture||this.depthTexture!==null)if(this.depthTexture===null){const a=this.createDepthTexture();for(n of t)n.setDepthTexture(a)}else n.setDepthTexture(this.depthTexture)}removePass(n){const e=this.passes,t=e.indexOf(n);if(t!==-1&&e.splice(t,1).length>0){if(this.depthTexture!==null){const s=(a,l)=>a||l.needsDepthTexture;e.reduce(s,!1)||(n.getDepthTexture()===this.depthTexture&&n.setDepthTexture(null),this.deleteDepthTexture())}this.autoRenderToScreen&&t===e.length&&(n.renderToScreen=!1,e.length>0&&(e[e.length-1].renderToScreen=!0))}}removeAllPasses(){const n=this.passes;this.deleteDepthTexture(),n.length>0&&(this.autoRenderToScreen&&(n[n.length-1].renderToScreen=!1),this.passes=[])}render(n){const e=this.renderer,t=this.copyPass;let i=this.inputBuffer,r=this.outputBuffer,s=!1,o,a,l;n===void 0&&(this.timer.update(),n=this.timer.getDelta());for(const c of this.passes)c.enabled&&(c.render(e,i,r,n,s),c.needsSwap&&(s&&(t.renderToScreen=c.renderToScreen,o=e.getContext(),a=e.state.buffers.stencil,a.setFunc(o.NOTEQUAL,1,4294967295),t.render(e,i,r,n,s),a.setFunc(o.EQUAL,1,4294967295)),l=i,i=r,r=l),c instanceof gre?s=!0:c instanceof fre&&(s=!1))}setSize(n,e,t){const i=this.renderer,r=i.getSize(new Ue);(n===void 0||e===void 0)&&(n=r.width,e=r.height),(r.width!==n||r.height!==e)&&i.setSize(n,e,t);const s=i.getDrawingBufferSize(new Ue);this.inputBuffer.setSize(s.width,s.height),this.outputBuffer.setSize(s.width,s.height);for(const o of this.passes)o.setSize(s.width,s.height)}reset(){this.dispose(),this.autoRenderToScreen=!0}dispose(){for(const n of this.passes)n.dispose();this.passes=[],this.inputBuffer!==null&&this.inputBuffer.dispose(),this.outputBuffer!==null&&this.outputBuffer.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose(),jr.fullscreenGeometry.dispose()}},ho={NONE:0,DEPTH:1,CONVOLUTION:2},un={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},vre=class{constructor(){this.shaderParts=new Map([[un.FRAGMENT_HEAD,null],[un.FRAGMENT_MAIN_UV,null],[un.FRAGMENT_MAIN_IMAGE,null],[un.VERTEX_HEAD,null],[un.VERTEX_MAIN_SUPPORT,null]]),this.defines=new Map,this.uniforms=new Map,this.blendModes=new Map,this.extensions=new Set,this.attributes=ho.NONE,this.varyings=new Set,this.uvTransformation=!1,this.readDepth=!1,this.colorSpace=Vr}},yb=!1,cD=class{constructor(n=null){this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(n),this.meshCount=0,this.replaceMaterial=e=>{if(e.isMesh){let t;if(e.material.flatShading)switch(e.material.side){case Ji:t=this.materialsFlatShadedDoubleSide;break;case mi:t=this.materialsFlatShadedBackSide;break;default:t=this.materialsFlatShaded;break}else switch(e.material.side){case Ji:t=this.materialsDoubleSide;break;case mi:t=this.materialsBackSide;break;default:t=this.materials;break}this.originalMaterials.set(e,e.material),e.isSkinnedMesh?e.material=t[2]:e.isInstancedMesh?e.material=t[1]:e.material=t[0],++this.meshCount}}}cloneMaterial(n){if(!(n instanceof Wn))return n.clone();const e=n.uniforms,t=new Map;for(const r in e){const s=e[r].value;s.isRenderTargetTexture&&(e[r].value=null,t.set(r,s))}const i=n.clone();for(const r of t)e[r[0]].value=r[1],i.uniforms[r[0]].value=r[1];return i}setMaterial(n){if(this.disposeMaterials(),this.material=n,n!==null){const e=this.materials=[this.cloneMaterial(n),this.cloneMaterial(n),this.cloneMaterial(n)];for(const t of e)t.uniforms=Object.assign({},n.uniforms),t.side=Us;e[2].skinning=!0,this.materialsBackSide=e.map(t=>{const i=this.cloneMaterial(t);return i.uniforms=Object.assign({},n.uniforms),i.side=mi,i}),this.materialsDoubleSide=e.map(t=>{const i=this.cloneMaterial(t);return i.uniforms=Object.assign({},n.uniforms),i.side=Ji,i}),this.materialsFlatShaded=e.map(t=>{const i=this.cloneMaterial(t);return i.uniforms=Object.assign({},n.uniforms),i.flatShading=!0,i}),this.materialsFlatShadedBackSide=e.map(t=>{const i=this.cloneMaterial(t);return i.uniforms=Object.assign({},n.uniforms),i.flatShading=!0,i.side=mi,i}),this.materialsFlatShadedDoubleSide=e.map(t=>{const i=this.cloneMaterial(t);return i.uniforms=Object.assign({},n.uniforms),i.flatShading=!0,i.side=Ji,i})}}render(n,e,t){const i=n.shadowMap.enabled;if(n.shadowMap.enabled=!1,yb){const r=this.originalMaterials;this.meshCount=0,e.traverse(this.replaceMaterial),n.render(e,t);for(const s of r)s[0].material=s[1];this.meshCount!==r.size&&r.clear()}else{const r=e.overrideMaterial;e.overrideMaterial=this.material,n.render(e,t),e.overrideMaterial=r}n.shadowMap.enabled=i}disposeMaterials(){if(this.material!==null){const n=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide);for(const e of n)e.dispose()}}dispose(){this.originalMaterials.clear(),this.disposeMaterials()}static get workaroundEnabled(){return yb}static set workaroundEnabled(n){yb=n}},Do=-1,Os=class extends Pr{constructor(n,e=Do,t=Do,i=1){super(),this.resizable=n,this.baseSize=new Ue(1,1),this.preferredSize=new Ue(e,t),this.target=this.preferredSize,this.s=i,this.effectiveSize=new Ue,this.addEventListener("change",()=>this.updateEffectiveSize()),this.updateEffectiveSize()}updateEffectiveSize(){const n=this.baseSize,e=this.preferredSize,t=this.effectiveSize,i=this.scale;e.width!==Do?t.width=e.width:e.height!==Do?t.width=Math.round(e.height*(n.width/Math.max(n.height,1))):t.width=Math.round(n.width*i),e.height!==Do?t.height=e.height:e.width!==Do?t.height=Math.round(e.width/Math.max(n.width/Math.max(n.height,1),1)):t.height=Math.round(n.height*i)}get width(){return this.effectiveSize.width}set width(n){this.preferredWidth=n}get height(){return this.effectiveSize.height}set height(n){this.preferredHeight=n}getWidth(){return this.width}getHeight(){return this.height}get scale(){return this.s}set scale(n){this.s!==n&&(this.s=n,this.preferredSize.setScalar(Do),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getScale(){return this.scale}setScale(n){this.scale=n}get baseWidth(){return this.baseSize.width}set baseWidth(n){this.baseSize.width!==n&&(this.baseSize.width=n,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseWidth(){return this.baseWidth}setBaseWidth(n){this.baseWidth=n}get baseHeight(){return this.baseSize.height}set baseHeight(n){this.baseSize.height!==n&&(this.baseSize.height=n,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseHeight(){return this.baseHeight}setBaseHeight(n){this.baseHeight=n}setBaseSize(n,e){(this.baseSize.width!==n||this.baseSize.height!==e)&&(this.baseSize.set(n,e),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}get preferredWidth(){return this.preferredSize.width}set preferredWidth(n){this.preferredSize.width!==n&&(this.preferredSize.width=n,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredWidth(){return this.preferredWidth}setPreferredWidth(n){this.preferredWidth=n}get preferredHeight(){return this.preferredSize.height}set preferredHeight(n){this.preferredSize.height!==n&&(this.preferredSize.height=n,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredHeight(){return this.preferredHeight}setPreferredHeight(n){this.preferredHeight=n}setPreferredSize(n,e){(this.preferredSize.width!==n||this.preferredSize.height!==e)&&(this.preferredSize.set(n,e),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}copy(n){this.s=n.scale,this.baseSize.set(n.baseWidth,n.baseHeight),this.preferredSize.set(n.preferredWidth,n.preferredHeight),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height)}static get AUTO_SIZE(){return Do}},qt={ADD:0,ALPHA:1,AVERAGE:2,COLOR:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,DIVIDE:8,DST:9,EXCLUSION:10,HARD_LIGHT:11,HARD_MIX:12,HUE:13,INVERT:14,INVERT_RGB:15,LIGHTEN:16,LINEAR_BURN:17,LINEAR_DODGE:18,LINEAR_LIGHT:19,LUMINOSITY:20,MULTIPLY:21,NEGATION:22,NORMAL:23,OVERLAY:24,PIN_LIGHT:25,REFLECT:26,SATURATION:27,SCREEN:28,SOFT_LIGHT:29,SRC:30,SUBTRACT:31,VIVID_LIGHT:32},_re="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(x.rgb+y.rgb,y.a),opacity);}",yre="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,y.a*opacity);}",bre="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4((x.rgb+y.rgb)*0.5,y.a),opacity);}",wre="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.xy,xHSL.z));return mix(x,vec4(z,y.a),opacity);}",Sre="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 a=x.rgb,b=y.rgb;vec3 z=mix(step(0.0,b)*(1.0-min(vec3(1.0),(1.0-a)/b)),vec3(1.0),step(1.0,a));return mix(x,vec4(z,y.a),opacity);}",xre="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 a=x.rgb,b=y.rgb;vec3 z=step(0.0,a)*mix(min(vec3(1.0),a/max(1.0-b,1e-9)),vec3(1.0),step(1.0,b));return mix(x,vec4(z,y.a),opacity);}",Ere="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(min(x.rgb,y.rgb),y.a),opacity);}",Are="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(abs(x.rgb-y.rgb),y.a),opacity);}",Mre="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(x.rgb/max(y.rgb,1e-12),y.a),opacity);}",Tre="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4((x.rgb+y.rgb-2.0*x.rgb*y.rgb),y.a),opacity);}",Cre="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 a=min(x.rgb,1.0);vec3 b=min(y.rgb,1.0);vec3 z=mix(2.0*a*b,1.0-2.0*(1.0-a)*(1.0-b),step(0.5,b));return mix(x,vec4(z,y.a),opacity);}",Rre="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(step(1.0,x.rgb+y.rgb),y.a),opacity);}",Ire="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.x,xHSL.yz));return mix(x,vec4(z,y.a),opacity);}",Dre="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(1.0-y.rgb,y.a),opacity);}",Pre="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(y.rgb*(1.0-x.rgb),y.a),opacity);}",Ore="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(max(x.rgb,y.rgb),y.a),opacity);}",Lre="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(clamp(y.rgb+x.rgb-1.0,0.0,1.0),y.a),opacity);}",kre="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(min(x.rgb+y.rgb,1.0),y.a),opacity);}",Ure="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(clamp(2.0*y.rgb+x.rgb-1.0,0.0,1.0),y.a),opacity);}",Nre="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.xy,yHSL.z));return mix(x,vec4(z,y.a),opacity);}",Fre="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(x.rgb*y.rgb,y.a),opacity);}",Bre="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(1.0-abs(1.0-x.rgb-y.rgb),y.a),opacity);}",zre="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,opacity);}",Hre="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 z=mix(2.0*y.rgb*x.rgb,1.0-2.0*(1.0-y.rgb)*(1.0-x.rgb),step(0.5,x.rgb));return mix(x,vec4(z,y.a),opacity);}",Gre="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 y2=2.0*y.rgb;vec3 z=mix(mix(y2,x.rgb,step(0.5*x.rgb,y.rgb)),max(y2-1.0,vec3(0.0)),step(x.rgb,y2-1.0));return mix(x,vec4(z,y.a),opacity);}",Vre="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 z=mix(min(x.rgb*x.rgb/max(1.0-y.rgb,1e-12),1.0),y.rgb,step(1.0,y.rgb));return mix(x,vec4(z,y.a),opacity);}",Wre="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.x,yHSL.y,xHSL.z));return mix(x,vec4(z,y.a),opacity);}",jre="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(x.rgb+y.rgb-min(x.rgb*y.rgb,1.0),y.a),opacity);}",qre="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 a=x.rgb;vec3 b=y.rgb;vec3 y2=2.0*b;vec3 w=step(0.5,b);vec3 c=a-(1.0-y2)*a*(1.0-a);vec3 d=mix(a+(y2-1.0)*(sqrt(a)-a),a+(y2-1.0)*a*((16.0*a-12.0)*a+3.0),w*(1.0-step(0.25,a)));vec3 z=mix(c,d,w);return mix(x,vec4(z,y.a),opacity);}",Xre="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y;}",Yre="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(max(x.rgb+y.rgb-1.0,0.0),y.a),opacity);}",Kre="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 z=mix(max(1.0-min((1.0-x.rgb)/(2.0*y.rgb),1.0),0.0),min(x.rgb/(2.0*(1.0-y.rgb)),1.0),step(0.5,y.rgb));return mix(x,vec4(z,y.a),opacity);}",$re=new Map([[qt.ADD,_re],[qt.ALPHA,yre],[qt.AVERAGE,bre],[qt.COLOR,wre],[qt.COLOR_BURN,Sre],[qt.COLOR_DODGE,xre],[qt.DARKEN,Ere],[qt.DIFFERENCE,Are],[qt.DIVIDE,Mre],[qt.DST,null],[qt.EXCLUSION,Tre],[qt.HARD_LIGHT,Cre],[qt.HARD_MIX,Rre],[qt.HUE,Ire],[qt.INVERT,Dre],[qt.INVERT_RGB,Pre],[qt.LIGHTEN,Ore],[qt.LINEAR_BURN,Lre],[qt.LINEAR_DODGE,kre],[qt.LINEAR_LIGHT,Ure],[qt.LUMINOSITY,Nre],[qt.MULTIPLY,Fre],[qt.NEGATION,Bre],[qt.NORMAL,zre],[qt.OVERLAY,Hre],[qt.PIN_LIGHT,Gre],[qt.REFLECT,Vre],[qt.SATURATION,Wre],[qt.SCREEN,jre],[qt.SOFT_LIGHT,qre],[qt.SRC,Xre],[qt.SUBTRACT,Yre],[qt.VIVID_LIGHT,Kre]]),Jre=class extends Pr{constructor(n,e=1){super(),this._blendFunction=n,this.opacity=new Vt(e)}getOpacity(){return this.opacity.value}setOpacity(n){this.opacity.value=n}get blendFunction(){return this._blendFunction}set blendFunction(n){this._blendFunction=n,this.dispatchEvent({type:"change"})}getBlendFunction(){return this.blendFunction}setBlendFunction(n){this.blendFunction=n}getShaderCode(){return $re.get(this.blendFunction)}},FN=class extends Pr{constructor(n,e,{attributes:t=ho.NONE,blendFunction:i=qt.NORMAL,defines:r=new Map,uniforms:s=new Map,extensions:o=null,vertexShader:a=null}={}){super(),this.name=n,this.renderer=null,this.attributes=t,this.fragmentShader=e,this.vertexShader=a,this.defines=r,this.uniforms=s,this.extensions=o,this.blendMode=new Jre(i),this.blendMode.addEventListener("change",l=>this.setChanged()),this._inputColorSpace=Vr,this._outputColorSpace=as}get inputColorSpace(){return this._inputColorSpace}set inputColorSpace(n){this._inputColorSpace=n,this.setChanged()}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(n){this._outputColorSpace=n,this.setChanged()}set mainScene(n){}set mainCamera(n){}getName(){return this.name}setRenderer(n){this.renderer=n}getDefines(){return this.defines}getUniforms(){return this.uniforms}getExtensions(){return this.extensions}getBlendMode(){return this.blendMode}getAttributes(){return this.attributes}setAttributes(n){this.attributes=n,this.setChanged()}getFragmentShader(){return this.fragmentShader}setFragmentShader(n){this.fragmentShader=n,this.setChanged()}getVertexShader(){return this.vertexShader}setVertexShader(n){this.vertexShader=n,this.setChanged()}setChanged(){this.dispatchEvent({type:"change"})}setDepthTexture(n,e=ra){}update(n,e,t){}setSize(n,e){}initialize(n,e,t){}dispose(){for(const n of Object.keys(this)){const e=this[n];(e instanceof ni||e instanceof Ti||e instanceof En||e instanceof jr)&&this[n].dispose()}}},Wx={MEDIUM:2,LARGE:3},Qre="#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\nvarying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;\n#include <colorspace_fragment>\n}",Zre="uniform vec4 texelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize.xy*vec2(kernel)+texelSize.zw)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}",ese=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],tse=class extends Wn{constructor(n=new Jt){super({name:"KawaseBlurMaterial",uniforms:{inputBuffer:new Vt(null),texelSize:new Vt(new Jt),scale:new Vt(1),kernel:new Vt(0)},blending:Ai,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Qre,vertexShader:Zre}),this.setTexelSize(n.x,n.y),this.kernelSize=Wx.MEDIUM}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.inputBuffer=n}get kernelSequence(){return ese[this.kernelSize]}get scale(){return this.uniforms.scale.value}set scale(n){this.uniforms.scale.value=n}getScale(){return this.uniforms.scale.value}setScale(n){this.uniforms.scale.value=n}getKernel(){return null}get kernel(){return this.uniforms.kernel.value}set kernel(n){this.uniforms.kernel.value=n}setKernel(n){this.kernel=n}setTexelSize(n,e){this.uniforms.texelSize.value.set(n,e,n*.5,e*.5)}setSize(n,e){const t=1/n,i=1/e;this.uniforms.texelSize.value.set(t,i,t*.5,i*.5)}},nse=class extends jr{constructor({kernelSize:n=Wx.MEDIUM,resolutionScale:e=.5,width:t=Os.AUTO_SIZE,height:i=Os.AUTO_SIZE,resolutionX:r=t,resolutionY:s=i}={}){super("KawaseBlurPass"),this.renderTargetA=new ni(1,1,{depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B";const o=this.resolution=new Os(this,r,s,e);o.addEventListener("change",a=>this.setSize(o.baseWidth,o.baseHeight)),this._blurMaterial=new tse,this._blurMaterial.kernelSize=n,this.copyMaterial=new NN}getResolution(){return this.resolution}get blurMaterial(){return this._blurMaterial}set blurMaterial(n){this._blurMaterial=n}get dithering(){return this.copyMaterial.dithering}set dithering(n){this.copyMaterial.dithering=n}get kernelSize(){return this.blurMaterial.kernelSize}set kernelSize(n){this.blurMaterial.kernelSize=n}get width(){return this.resolution.width}set width(n){this.resolution.preferredWidth=n}get height(){return this.resolution.height}set height(n){this.resolution.preferredHeight=n}get scale(){return this.blurMaterial.scale}set scale(n){this.blurMaterial.scale=n}getScale(){return this.blurMaterial.scale}setScale(n){this.blurMaterial.scale=n}getKernelSize(){return this.kernelSize}setKernelSize(n){this.kernelSize=n}getResolutionScale(){return this.resolution.scale}setResolutionScale(n){this.resolution.scale=n}render(n,e,t,i,r){const s=this.scene,o=this.camera,a=this.renderTargetA,l=this.renderTargetB,c=this.blurMaterial,u=c.kernelSequence;let d=e;this.fullscreenMaterial=c;for(let f=0,m=u.length;f<m;++f){const v=(f&1)===0?a:l;c.kernel=u[f],c.inputBuffer=d.texture,n.setRenderTarget(v),n.render(s,o),d=v}this.fullscreenMaterial=this.copyMaterial,this.copyMaterial.inputBuffer=d.texture,n.setRenderTarget(this.renderToScreen?null:t),n.render(s,o)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e);const i=t.width,r=t.height;this.renderTargetA.setSize(i,r),this.renderTargetB.setSize(i,r),this.blurMaterial.setSize(n,e)}initialize(n,e,t){t!==void 0&&(this.renderTargetA.texture.type=t,this.renderTargetB.texture.type=t,t!==Zn?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.copyMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):n!==null&&n.outputColorSpace===hn&&(this.renderTargetA.texture.colorSpace=hn,this.renderTargetB.texture.colorSpace=hn))}static get AUTO_SIZE(){return Os.AUTO_SIZE}},ise="#include <common>\n#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\n#ifdef RANGE\nuniform vec2 range;\n#elif defined(THRESHOLD)\nuniform float threshold;uniform float smoothing;\n#endif\nvarying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);float l=luminance(texel.rgb);float mask=1.0;\n#ifdef RANGE\nfloat low=step(range.x,l);float high=step(l,range.y);mask=low*high;\n#elif defined(THRESHOLD)\nmask=smoothstep(threshold,threshold+smoothing,l);\n#endif\n#ifdef COLOR\ngl_FragColor=texel*mask;\n#else\ngl_FragColor=vec4(l*mask);\n#endif\n}",rse=class extends Wn{constructor(n=!1,e=null){super({name:"LuminanceMaterial",defines:{THREE_REVISION:ia.replace(/\D+/g,"")},uniforms:{inputBuffer:new Vt(null),threshold:new Vt(0),smoothing:new Vt(1),range:new Vt(null)},blending:Ai,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:ise,vertexShader:UN}),this.colorOutput=n,this.luminanceRange=e}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.uniforms.inputBuffer.value=n}get threshold(){return this.uniforms.threshold.value}set threshold(n){this.smoothing>0||n>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.threshold.value=n}getThreshold(){return this.threshold}setThreshold(n){this.threshold=n}get smoothing(){return this.uniforms.smoothing.value}set smoothing(n){this.threshold>0||n>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.smoothing.value=n}getSmoothingFactor(){return this.smoothing}setSmoothingFactor(n){this.smoothing=n}get useThreshold(){return this.threshold>0||this.smoothing>0}set useThreshold(n){}get colorOutput(){return this.defines.COLOR!==void 0}set colorOutput(n){n?this.defines.COLOR="1":delete this.defines.COLOR,this.needsUpdate=!0}isColorOutputEnabled(n){return this.colorOutput}setColorOutputEnabled(n){this.colorOutput=n}get useRange(){return this.luminanceRange!==null}set useRange(n){this.luminanceRange=null}get luminanceRange(){return this.uniforms.range.value}set luminanceRange(n){n!==null?this.defines.RANGE="1":delete this.defines.RANGE,this.uniforms.range.value=n,this.needsUpdate=!0}getLuminanceRange(){return this.luminanceRange}setLuminanceRange(n){this.luminanceRange=n}},sse=class extends jr{constructor({renderTarget:n,luminanceRange:e,colorOutput:t,resolutionScale:i=1,width:r=Os.AUTO_SIZE,height:s=Os.AUTO_SIZE,resolutionX:o=r,resolutionY:a=s}={}){super("LuminancePass"),this.fullscreenMaterial=new rse(t,e),this.needsSwap=!1,this.renderTarget=n,this.renderTarget===void 0&&(this.renderTarget=new ni(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="LuminancePass.Target");const l=this.resolution=new Os(this,o,a,i);l.addEventListener("change",c=>this.setSize(l.baseWidth,l.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}render(n,e,t,i,r){const s=this.fullscreenMaterial;s.inputBuffer=e.texture,n.setRenderTarget(this.renderToScreen?null:this.renderTarget),n.render(this.scene,this.camera)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e),this.renderTarget.setSize(t.width,t.height)}initialize(n,e,t){t!==void 0&&t!==Zn&&(this.renderTarget.texture.type=t,this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},ose="#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\n#define WEIGHT_INNER 0.125\n#define WEIGHT_OUTER 0.0555555\nvarying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;float clampToBorder(const in vec2 uv){return float(uv.s>=0.0&&uv.s<=1.0&&uv.t>=0.0&&uv.t<=1.0);}void main(){vec4 c=vec4(0.0);vec4 w=WEIGHT_INNER*vec4(clampToBorder(vUv00),clampToBorder(vUv01),clampToBorder(vUv02),clampToBorder(vUv03));c+=w.x*texture2D(inputBuffer,vUv00);c+=w.y*texture2D(inputBuffer,vUv01);c+=w.z*texture2D(inputBuffer,vUv02);c+=w.w*texture2D(inputBuffer,vUv03);w=WEIGHT_OUTER*vec4(clampToBorder(vUv04),clampToBorder(vUv05),clampToBorder(vUv06),clampToBorder(vUv07));c+=w.x*texture2D(inputBuffer,vUv04);c+=w.y*texture2D(inputBuffer,vUv05);c+=w.z*texture2D(inputBuffer,vUv06);c+=w.w*texture2D(inputBuffer,vUv07);w=WEIGHT_OUTER*vec4(clampToBorder(vUv08),clampToBorder(vUv09),clampToBorder(vUv10),clampToBorder(vUv11));c+=w.x*texture2D(inputBuffer,vUv08);c+=w.y*texture2D(inputBuffer,vUv09);c+=w.z*texture2D(inputBuffer,vUv10);c+=w.w*texture2D(inputBuffer,vUv11);c+=WEIGHT_OUTER*texture2D(inputBuffer,vUv);gl_FragColor=c;\n#include <colorspace_fragment>\n}",ase="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;void main(){vUv=position.xy*0.5+0.5;vUv00=vUv+texelSize*vec2(-1.0,1.0);vUv01=vUv+texelSize*vec2(1.0,1.0);vUv02=vUv+texelSize*vec2(-1.0,-1.0);vUv03=vUv+texelSize*vec2(1.0,-1.0);vUv04=vUv+texelSize*vec2(-2.0,2.0);vUv05=vUv+texelSize*vec2(0.0,2.0);vUv06=vUv+texelSize*vec2(2.0,2.0);vUv07=vUv+texelSize*vec2(-2.0,0.0);vUv08=vUv+texelSize*vec2(2.0,0.0);vUv09=vUv+texelSize*vec2(-2.0,-2.0);vUv10=vUv+texelSize*vec2(0.0,-2.0);vUv11=vUv+texelSize*vec2(2.0,-2.0);gl_Position=vec4(position.xy,1.0,1.0);}",lse=class extends Wn{constructor(){super({name:"DownsamplingMaterial",uniforms:{inputBuffer:new Vt(null),texelSize:new Vt(new Ue)},blending:Ai,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:ose,vertexShader:ase})}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setSize(n,e){this.uniforms.texelSize.value.set(1/n,1/e)}},cse="#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;uniform mediump sampler2D supportBuffer;\n#else\nuniform lowp sampler2D inputBuffer;uniform lowp sampler2D supportBuffer;\n#endif\nuniform float radius;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vec4 c=vec4(0.0);c+=texture2D(inputBuffer,vUv0)*0.0625;c+=texture2D(inputBuffer,vUv1)*0.125;c+=texture2D(inputBuffer,vUv2)*0.0625;c+=texture2D(inputBuffer,vUv3)*0.125;c+=texture2D(inputBuffer,vUv)*0.25;c+=texture2D(inputBuffer,vUv4)*0.125;c+=texture2D(inputBuffer,vUv5)*0.0625;c+=texture2D(inputBuffer,vUv6)*0.125;c+=texture2D(inputBuffer,vUv7)*0.0625;vec4 baseColor=texture2D(supportBuffer,vUv);gl_FragColor=mix(baseColor,c,radius);\n#include <colorspace_fragment>\n}",use="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,1.0);vUv1=vUv+texelSize*vec2(0.0,1.0);vUv2=vUv+texelSize*vec2(1.0,1.0);vUv3=vUv+texelSize*vec2(-1.0,0.0);vUv4=vUv+texelSize*vec2(1.0,0.0);vUv5=vUv+texelSize*vec2(-1.0,-1.0);vUv6=vUv+texelSize*vec2(0.0,-1.0);vUv7=vUv+texelSize*vec2(1.0,-1.0);gl_Position=vec4(position.xy,1.0,1.0);}",hse=class extends Wn{constructor(){super({name:"UpsamplingMaterial",uniforms:{inputBuffer:new Vt(null),supportBuffer:new Vt(null),texelSize:new Vt(new Ue),radius:new Vt(.85)},blending:Ai,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:cse,vertexShader:use})}set inputBuffer(n){this.uniforms.inputBuffer.value=n}set supportBuffer(n){this.uniforms.supportBuffer.value=n}get radius(){return this.uniforms.radius.value}set radius(n){this.uniforms.radius.value=n}setSize(n,e){this.uniforms.texelSize.value.set(1/n,1/e)}},dse=class extends jr{constructor(){super("MipmapBlurPass"),this.needsSwap=!1,this.renderTarget=new ni(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Upsampling.Mipmap0",this.downsamplingMipmaps=[],this.upsamplingMipmaps=[],this.downsamplingMaterial=new lse,this.upsamplingMaterial=new hse,this.resolution=new Ue}get texture(){return this.renderTarget.texture}get levels(){return this.downsamplingMipmaps.length}set levels(n){if(this.levels!==n){const e=this.renderTarget;this.dispose(),this.downsamplingMipmaps=[],this.upsamplingMipmaps=[];for(let t=0;t<n;++t){const i=e.clone();i.texture.name="Downsampling.Mipmap"+t,this.downsamplingMipmaps.push(i)}this.upsamplingMipmaps.push(e);for(let t=1,i=n-1;t<i;++t){const r=e.clone();r.texture.name="Upsampling.Mipmap"+t,this.upsamplingMipmaps.push(r)}this.setSize(this.resolution.x,this.resolution.y)}}get radius(){return this.upsamplingMaterial.radius}set radius(n){this.upsamplingMaterial.radius=n}render(n,e,t,i,r){const{scene:s,camera:o}=this,{downsamplingMaterial:a,upsamplingMaterial:l}=this,{downsamplingMipmaps:c,upsamplingMipmaps:u}=this;let d=e;this.fullscreenMaterial=a;for(let f=0,m=c.length;f<m;++f){const v=c[f];a.setSize(d.width,d.height),a.inputBuffer=d.texture,n.setRenderTarget(v),n.render(s,o),d=v}this.fullscreenMaterial=l;for(let f=u.length-1;f>=0;--f){const m=u[f];l.setSize(d.width,d.height),l.inputBuffer=d.texture,l.supportBuffer=c[f].texture,n.setRenderTarget(m),n.render(s,o),d=m}}setSize(n,e){const t=this.resolution;t.set(n,e);let i=t.width,r=t.height;for(let s=0,o=this.downsamplingMipmaps.length;s<o;++s)i=Math.round(i*.5),r=Math.round(r*.5),this.downsamplingMipmaps[s].setSize(i,r),s<this.upsamplingMipmaps.length&&this.upsamplingMipmaps[s].setSize(i,r)}initialize(n,e,t){if(t!==void 0){const i=this.downsamplingMipmaps.concat(this.upsamplingMipmaps);for(const r of i)r.texture.type=t;if(t!==Zn)this.downsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.upsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1";else if(n!==null&&n.outputColorSpace===hn)for(const r of i)r.texture.colorSpace=hn}}dispose(){super.dispose();for(const n of this.downsamplingMipmaps.concat(this.upsamplingMipmaps))n.dispose()}},fse="#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D map;\n#else\nuniform lowp sampler2D map;\n#endif\nuniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec4 texel=texture2D(map,uv);outputColor=vec4(texel.rgb*intensity,max(inputColor.a,texel.a));}",Ale=class extends FN{constructor({blendFunction:n=qt.SCREEN,luminanceThreshold:e=1,luminanceSmoothing:t=.03,mipmapBlur:i=!0,intensity:r=1,radius:s=.85,levels:o=8,kernelSize:a=Wx.LARGE,resolutionScale:l=.5,width:c=Os.AUTO_SIZE,height:u=Os.AUTO_SIZE,resolutionX:d=c,resolutionY:f=u}={}){super("BloomEffect",fse,{blendFunction:n,uniforms:new Map([["map",new Vt(null)],["intensity",new Vt(r)]])}),this.renderTarget=new ni(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Bloom.Target",this.blurPass=new nse({kernelSize:a}),this.luminancePass=new sse({colorOutput:!0}),this.luminanceMaterial.threshold=e,this.luminanceMaterial.smoothing=t,this.mipmapBlurPass=new dse,this.mipmapBlurPass.enabled=i,this.mipmapBlurPass.radius=s,this.mipmapBlurPass.levels=o,this.uniforms.get("map").value=i?this.mipmapBlurPass.texture:this.renderTarget.texture;const m=this.resolution=new Os(this,d,f,l);m.addEventListener("change",v=>this.setSize(m.baseWidth,m.baseHeight))}get texture(){return this.mipmapBlurPass.enabled?this.mipmapBlurPass.texture:this.renderTarget.texture}getTexture(){return this.texture}getResolution(){return this.resolution}getBlurPass(){return this.blurPass}getLuminancePass(){return this.luminancePass}get luminanceMaterial(){return this.luminancePass.fullscreenMaterial}getLuminanceMaterial(){return this.luminancePass.fullscreenMaterial}get width(){return this.resolution.width}set width(n){this.resolution.preferredWidth=n}get height(){return this.resolution.height}set height(n){this.resolution.preferredHeight=n}get dithering(){return this.blurPass.dithering}set dithering(n){this.blurPass.dithering=n}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(n){this.blurPass.kernelSize=n}get distinction(){return console.warn(this.name,"distinction was removed"),1}set distinction(n){console.warn(this.name,"distinction was removed")}get intensity(){return this.uniforms.get("intensity").value}set intensity(n){this.uniforms.get("intensity").value=n}getIntensity(){return this.intensity}setIntensity(n){this.intensity=n}getResolutionScale(){return this.resolution.scale}setResolutionScale(n){this.resolution.scale=n}update(n,e,t){const i=this.renderTarget,r=this.luminancePass;r.enabled?(r.render(n,e),this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(n,r.renderTarget):this.blurPass.render(n,r.renderTarget,i)):this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(n,e):this.blurPass.render(n,e,i)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e),this.renderTarget.setSize(t.width,t.height),this.blurPass.resolution.copy(t),this.luminancePass.setSize(n,e),this.mipmapBlurPass.setSize(n,e)}initialize(n,e,t){this.blurPass.initialize(n,e,t),this.luminancePass.initialize(n,e,t),this.mipmapBlurPass.initialize(n,e,t),t!==void 0&&(this.renderTarget.texture.type=t,n!==null&&n.outputColorSpace===hn&&(this.renderTarget.texture.colorSpace=hn))}},uD=class extends jr{constructor(n,e="inputBuffer"){super("ShaderPass"),this.fullscreenMaterial=n,this.input=e}setInput(n){this.input=n}render(n,e,t,i,r){const s=this.fullscreenMaterial.uniforms;e!==null&&s!==void 0&&s[this.input]!==void 0&&(s[this.input].value=e.texture),n.setRenderTarget(this.renderToScreen?null:t),n.render(this.scene,this.camera)}initialize(n,e,t){t!==void 0&&t!==Zn&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},Mle=class extends jr{constructor(n,e,t=null){super("RenderPass",n,e),this.needsSwap=!1,this.clearPass=new Vx,this.overrideMaterialManager=t===null?null:new cD(t),this.ignoreBackground=!1,this.skipShadowMapUpdate=!1,this.selection=null}set mainScene(n){this.scene=n}set mainCamera(n){this.camera=n}get renderToScreen(){return super.renderToScreen}set renderToScreen(n){super.renderToScreen=n,this.clearPass.renderToScreen=n}get overrideMaterial(){const n=this.overrideMaterialManager;return n!==null?n.material:null}set overrideMaterial(n){const e=this.overrideMaterialManager;n!==null?e!==null?e.setMaterial(n):this.overrideMaterialManager=new cD(n):e!==null&&(e.dispose(),this.overrideMaterialManager=null)}getOverrideMaterial(){return this.overrideMaterial}setOverrideMaterial(n){this.overrideMaterial=n}get clear(){return this.clearPass.enabled}set clear(n){this.clearPass.enabled=n}getSelection(){return this.selection}setSelection(n){this.selection=n}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(n){this.ignoreBackground=n}isShadowMapDisabled(){return this.skipShadowMapUpdate}setShadowMapDisabled(n){this.skipShadowMapUpdate=n}getClearPass(){return this.clearPass}render(n,e,t,i,r){const s=this.scene,o=this.camera,a=this.selection,l=o.layers.mask,c=s.background,u=n.shadowMap.autoUpdate,d=this.renderToScreen?null:e;a!==null&&o.layers.set(a.getLayer()),this.skipShadowMapUpdate&&(n.shadowMap.autoUpdate=!1),(this.ignoreBackground||this.clearPass.overrideClearColor!==null)&&(s.background=null),this.clearPass.enabled&&this.clearPass.render(n,e),n.setRenderTarget(d),this.overrideMaterialManager!==null?this.overrideMaterialManager.render(n,s,o):n.render(s,o),o.layers.mask=l,s.background=c,n.shadowMap.autoUpdate=u}},BN={COLOR:2},pse={DISABLED:0},Nh={LOW:0,MEDIUM:1,HIGH:2,ULTRA:3},mse="varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;\n#if EDGE_DETECTION_MODE != 0\nvarying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;\n#endif\n#if EDGE_DETECTION_MODE == 1\n#include <common>\n#endif\n#if EDGE_DETECTION_MODE == 0 || PREDICATION_MODE == 1\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nuniform highp sampler2D depthBuffer;\n#else\nuniform mediump sampler2D depthBuffer;\n#endif\nfloat readDepth(const in vec2 uv){\n#if DEPTH_PACKING == 3201\nreturn unpackRGBAToDepth(texture2D(depthBuffer,uv));\n#else\nreturn texture2D(depthBuffer,uv).r;\n#endif\n}vec3 gatherNeighbors(){float p=readDepth(vUv);float pLeft=readDepth(vUv0);float pTop=readDepth(vUv1);return vec3(p,pLeft,pTop);}\n#elif PREDICATION_MODE == 2\nuniform sampler2D predicationBuffer;vec3 gatherNeighbors(){float p=texture2D(predicationBuffer,vUv).r;float pLeft=texture2D(predicationBuffer,vUv0).r;float pTop=texture2D(predicationBuffer,vUv1).r;return vec3(p,pLeft,pTop);}\n#endif\n#if PREDICATION_MODE != 0\nvec2 calculatePredicatedThreshold(){vec3 neighbours=gatherNeighbors();vec2 delta=abs(neighbours.xx-neighbours.yz);vec2 edges=step(PREDICATION_THRESHOLD,delta);return PREDICATION_SCALE*EDGE_THRESHOLD*(1.0-PREDICATION_STRENGTH*edges);}\n#endif\n#if EDGE_DETECTION_MODE != 0\nuniform sampler2D inputBuffer;\n#endif\nvoid main(){\n#if EDGE_DETECTION_MODE == 0\nconst vec2 threshold=vec2(DEPTH_THRESHOLD);\n#elif PREDICATION_MODE != 0\nvec2 threshold=calculatePredicatedThreshold();\n#else\nconst vec2 threshold=vec2(EDGE_THRESHOLD);\n#endif\n#if EDGE_DETECTION_MODE == 0\nvec3 neighbors=gatherNeighbors();vec2 delta=abs(neighbors.xx-vec2(neighbors.y,neighbors.z));vec2 edges=step(threshold,delta);if(dot(edges,vec2(1.0))==0.0){discard;}gl_FragColor=vec4(edges,0.0,1.0);\n#elif EDGE_DETECTION_MODE == 1\nfloat l=luminance(texture2D(inputBuffer,vUv).rgb);float lLeft=luminance(texture2D(inputBuffer,vUv0).rgb);float lTop=luminance(texture2D(inputBuffer,vUv1).rgb);vec4 delta;delta.xy=abs(l-vec2(lLeft,lTop));vec2 edges=step(threshold,delta.xy);if(dot(edges,vec2(1.0))==0.0){discard;}float lRight=luminance(texture2D(inputBuffer,vUv2).rgb);float lBottom=luminance(texture2D(inputBuffer,vUv3).rgb);delta.zw=abs(l-vec2(lRight,lBottom));vec2 maxDelta=max(delta.xy,delta.zw);float lLeftLeft=luminance(texture2D(inputBuffer,vUv4).rgb);float lTopTop=luminance(texture2D(inputBuffer,vUv5).rgb);delta.zw=abs(vec2(lLeft,lTop)-vec2(lLeftLeft,lTopTop));maxDelta=max(maxDelta.xy,delta.zw);float finalDelta=max(maxDelta.x,maxDelta.y);edges.xy*=step(finalDelta,LOCAL_CONTRAST_ADAPTATION_FACTOR*delta.xy);gl_FragColor=vec4(edges,0.0,1.0);\n#elif EDGE_DETECTION_MODE == 2\nvec4 delta;vec3 c=texture2D(inputBuffer,vUv).rgb;vec3 cLeft=texture2D(inputBuffer,vUv0).rgb;vec3 t=abs(c-cLeft);delta.x=max(max(t.r,t.g),t.b);vec3 cTop=texture2D(inputBuffer,vUv1).rgb;t=abs(c-cTop);delta.y=max(max(t.r,t.g),t.b);vec2 edges=step(threshold,delta.xy);if(dot(edges,vec2(1.0))==0.0){discard;}vec3 cRight=texture2D(inputBuffer,vUv2).rgb;t=abs(c-cRight);delta.z=max(max(t.r,t.g),t.b);vec3 cBottom=texture2D(inputBuffer,vUv3).rgb;t=abs(c-cBottom);delta.w=max(max(t.r,t.g),t.b);vec2 maxDelta=max(delta.xy,delta.zw);vec3 cLeftLeft=texture2D(inputBuffer,vUv4).rgb;t=abs(c-cLeftLeft);delta.z=max(max(t.r,t.g),t.b);vec3 cTopTop=texture2D(inputBuffer,vUv5).rgb;t=abs(c-cTopTop);delta.w=max(max(t.r,t.g),t.b);maxDelta=max(maxDelta.xy,delta.zw);float finalDelta=max(maxDelta.x,maxDelta.y);edges*=step(finalDelta,LOCAL_CONTRAST_ADAPTATION_FACTOR*delta.xy);gl_FragColor=vec4(edges,0.0,1.0);\n#endif\n}",gse="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;\n#if EDGE_DETECTION_MODE != 0\nvarying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;\n#endif\nvoid main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,0.0);vUv1=vUv+texelSize*vec2(0.0,-1.0);\n#if EDGE_DETECTION_MODE != 0\nvUv2=vUv+texelSize*vec2(1.0,0.0);vUv3=vUv+texelSize*vec2(0.0,1.0);vUv4=vUv+texelSize*vec2(-2.0,0.0);vUv5=vUv+texelSize*vec2(0.0,-2.0);\n#endif\ngl_Position=vec4(position.xy,1.0,1.0);}",vse=class extends Wn{constructor(n=new Ue,e=BN.COLOR){super({name:"EdgeDetectionMaterial",defines:{THREE_REVISION:ia.replace(/\D+/g,""),LOCAL_CONTRAST_ADAPTATION_FACTOR:"2.0",EDGE_THRESHOLD:"0.1",DEPTH_THRESHOLD:"0.01",PREDICATION_MODE:"0",PREDICATION_THRESHOLD:"0.01",PREDICATION_SCALE:"2.0",PREDICATION_STRENGTH:"1.0",DEPTH_PACKING:"0"},uniforms:{inputBuffer:new Vt(null),depthBuffer:new Vt(null),predicationBuffer:new Vt(null),texelSize:new Vt(n)},blending:Ai,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:mse,vertexShader:gse}),this.edgeDetectionMode=e}set depthBuffer(n){this.uniforms.depthBuffer.value=n}set depthPacking(n){this.defines.DEPTH_PACKING=n.toFixed(0),this.needsUpdate=!0}setDepthBuffer(n,e=ra){this.depthBuffer=n,this.depthPacking=e}get edgeDetectionMode(){return Number(this.defines.EDGE_DETECTION_MODE)}set edgeDetectionMode(n){this.defines.EDGE_DETECTION_MODE=n.toFixed(0),this.needsUpdate=!0}getEdgeDetectionMode(){return this.edgeDetectionMode}setEdgeDetectionMode(n){this.edgeDetectionMode=n}get localContrastAdaptationFactor(){return Number(this.defines.LOCAL_CONTRAST_ADAPTATION_FACTOR)}set localContrastAdaptationFactor(n){this.defines.LOCAL_CONTRAST_ADAPTATION_FACTOR=n.toFixed("6"),this.needsUpdate=!0}getLocalContrastAdaptationFactor(){return this.localContrastAdaptationFactor}setLocalContrastAdaptationFactor(n){this.localContrastAdaptationFactor=n}get edgeDetectionThreshold(){return Number(this.defines.EDGE_THRESHOLD)}set edgeDetectionThreshold(n){this.defines.EDGE_THRESHOLD=n.toFixed("6"),this.defines.DEPTH_THRESHOLD=(n*.1).toFixed("6"),this.needsUpdate=!0}getEdgeDetectionThreshold(){return this.edgeDetectionThreshold}setEdgeDetectionThreshold(n){this.edgeDetectionThreshold=n}get predicationMode(){return Number(this.defines.PREDICATION_MODE)}set predicationMode(n){this.defines.PREDICATION_MODE=n.toFixed(0),this.needsUpdate=!0}getPredicationMode(){return this.predicationMode}setPredicationMode(n){this.predicationMode=n}set predicationBuffer(n){this.uniforms.predicationBuffer.value=n}setPredicationBuffer(n){this.uniforms.predicationBuffer.value=n}get predicationThreshold(){return Number(this.defines.PREDICATION_THRESHOLD)}set predicationThreshold(n){this.defines.PREDICATION_THRESHOLD=n.toFixed("6"),this.needsUpdate=!0}getPredicationThreshold(){return this.predicationThreshold}setPredicationThreshold(n){this.predicationThreshold=n}get predicationScale(){return Number(this.defines.PREDICATION_SCALE)}set predicationScale(n){this.defines.PREDICATION_SCALE=n.toFixed("6"),this.needsUpdate=!0}getPredicationScale(){return this.predicationScale}setPredicationScale(n){this.predicationScale=n}get predicationStrength(){return Number(this.defines.PREDICATION_STRENGTH)}set predicationStrength(n){this.defines.PREDICATION_STRENGTH=n.toFixed("6"),this.needsUpdate=!0}getPredicationStrength(){return this.predicationStrength}setPredicationStrength(n){this.predicationStrength=n}setSize(n,e){this.uniforms.texelSize.value.set(1/n,1/e)}},_se="#define sampleLevelZeroOffset(t, coord, offset) texture2D(t, coord + offset * texelSize)\n#if __VERSION__ < 300\n#define round(v) floor(v + 0.5)\n#endif\n#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\nuniform lowp sampler2D areaTexture;uniform lowp sampler2D searchTexture;uniform vec2 texelSize;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixCoord;void movec(const in bvec2 c,inout vec2 variable,const in vec2 value){if(c.x){variable.x=value.x;}if(c.y){variable.y=value.y;}}void movec(const in bvec4 c,inout vec4 variable,const in vec4 value){movec(c.xy,variable.xy,value.xy);movec(c.zw,variable.zw,value.zw);}vec2 decodeDiagBilinearAccess(in vec2 e){e.r=e.r*abs(5.0*e.r-5.0*0.75);return round(e);}vec4 decodeDiagBilinearAccess(in vec4 e){e.rb=e.rb*abs(5.0*e.rb-5.0*0.75);return round(e);}vec2 searchDiag1(const in vec2 texCoord,const in vec2 dir,out vec2 e){vec4 coord=vec4(texCoord,-1.0,1.0);vec3 t=vec3(texelSize,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(coord.z<float(MAX_SEARCH_STEPS_DIAG_INT-1)&&coord.w>0.9)){break;}coord.xyz=t*vec3(dir,1.0)+coord.xyz;e=texture2D(inputBuffer,coord.xy).rg;coord.w=dot(e,vec2(0.5));}return coord.zw;}vec2 searchDiag2(const in vec2 texCoord,const in vec2 dir,out vec2 e){vec4 coord=vec4(texCoord,-1.0,1.0);coord.x+=0.25*texelSize.x;vec3 t=vec3(texelSize,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(coord.z<float(MAX_SEARCH_STEPS_DIAG_INT-1)&&coord.w>0.9)){break;}coord.xyz=t*vec3(dir,1.0)+coord.xyz;e=texture2D(inputBuffer,coord.xy).rg;e=decodeDiagBilinearAccess(e);coord.w=dot(e,vec2(0.5));}return coord.zw;}vec2 areaDiag(const in vec2 dist,const in vec2 e,const in float offset){vec2 texCoord=vec2(AREATEX_MAX_DISTANCE_DIAG,AREATEX_MAX_DISTANCE_DIAG)*e+dist;texCoord=AREATEX_PIXEL_SIZE*texCoord+0.5*AREATEX_PIXEL_SIZE;texCoord.x+=0.5;texCoord.y+=AREATEX_SUBTEX_SIZE*offset;return texture2D(areaTexture,texCoord).rg;}vec2 calculateDiagWeights(const in vec2 texCoord,const in vec2 e,const in vec4 subsampleIndices){vec2 weights=vec2(0.0);vec4 d;vec2 end;if(e.r>0.0){d.xz=searchDiag1(texCoord,vec2(-1.0,1.0),end);d.x+=float(end.y>0.9);}else{d.xz=vec2(0.0);}d.yw=searchDiag1(texCoord,vec2(1.0,-1.0),end);if(d.x+d.y>2.0){vec4 coords=vec4(-d.x+0.25,d.x,d.y,-d.y-0.25)*texelSize.xyxy+texCoord.xyxy;vec4 c;c.xy=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(-1,0)).rg;c.zw=sampleLevelZeroOffset(inputBuffer,coords.zw,vec2(1,0)).rg;c.yxwz=decodeDiagBilinearAccess(c.xyzw);vec2 cc=vec2(2.0)*c.xz+c.yw;movec(bvec2(step(0.9,d.zw)),cc,vec2(0.0));weights+=areaDiag(d.xy,cc,subsampleIndices.z);}d.xz=searchDiag2(texCoord,vec2(-1.0,-1.0),end);if(sampleLevelZeroOffset(inputBuffer,texCoord,vec2(1,0)).r>0.0){d.yw=searchDiag2(texCoord,vec2(1.0),end);d.y+=float(end.y>0.9);}else{d.yw=vec2(0.0);}if(d.x+d.y>2.0){vec4 coords=vec4(-d.x,-d.x,d.y,d.y)*texelSize.xyxy+texCoord.xyxy;vec4 c;c.x=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(-1,0)).g;c.y=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(0,-1)).r;c.zw=sampleLevelZeroOffset(inputBuffer,coords.zw,vec2(1,0)).gr;vec2 cc=vec2(2.0)*c.xz+c.yw;movec(bvec2(step(0.9,d.zw)),cc,vec2(0.0));weights+=areaDiag(d.xy,cc,subsampleIndices.w).gr;}return weights;}float searchLength(const in vec2 e,const in float offset){vec2 scale=SEARCHTEX_SIZE*vec2(0.5,-1.0);vec2 bias=SEARCHTEX_SIZE*vec2(offset,1.0);scale+=vec2(-1.0,1.0);bias+=vec2(0.5,-0.5);scale*=1.0/SEARCHTEX_PACKED_SIZE;bias*=1.0/SEARCHTEX_PACKED_SIZE;return texture2D(searchTexture,scale*e+bias).r;}float searchXLeft(in vec2 texCoord,const in float end){vec2 e=vec2(0.0,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.x>end&&e.g>0.8281&&e.r==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(-2.0,0.0)*texelSize+texCoord;}float offset=-(255.0/127.0)*searchLength(e,0.0)+3.25;return texelSize.x*offset+texCoord.x;}float searchXRight(vec2 texCoord,const in float end){vec2 e=vec2(0.0,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.x<end&&e.g>0.8281&&e.r==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(2.0,0.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e,0.5)+3.25;return-texelSize.x*offset+texCoord.x;}float searchYUp(vec2 texCoord,const in float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.y>end&&e.r>0.8281&&e.g==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=-vec2(0.0,2.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e.gr,0.0)+3.25;return texelSize.y*offset+texCoord.y;}float searchYDown(vec2 texCoord,const in float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;i++){if(!(texCoord.y<end&&e.r>0.8281&&e.g==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(0.0,2.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e.gr,0.5)+3.25;return-texelSize.y*offset+texCoord.y;}vec2 area(const in vec2 dist,const in float e1,const in float e2,const in float offset){vec2 texCoord=vec2(AREATEX_MAX_DISTANCE)*round(4.0*vec2(e1,e2))+dist;texCoord=AREATEX_PIXEL_SIZE*texCoord+0.5*AREATEX_PIXEL_SIZE;texCoord.y=AREATEX_SUBTEX_SIZE*offset+texCoord.y;return texture2D(areaTexture,texCoord).rg;}void detectHorizontalCornerPattern(inout vec2 weights,const in vec4 texCoord,const in vec2 d){\n#if !defined(DISABLE_CORNER_DETECTION)\nvec2 leftRight=step(d.xy,d.yx);vec2 rounding=(1.0-CORNER_ROUNDING_NORM)*leftRight;rounding/=leftRight.x+leftRight.y;vec2 factor=vec2(1.0);factor.x-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(0,1)).r;factor.x-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,1)).r;factor.y-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(0,-2)).r;factor.y-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,-2)).r;weights*=clamp(factor,0.0,1.0);\n#endif\n}void detectVerticalCornerPattern(inout vec2 weights,const in vec4 texCoord,const in vec2 d){\n#if !defined(DISABLE_CORNER_DETECTION)\nvec2 leftRight=step(d.xy,d.yx);vec2 rounding=(1.0-CORNER_ROUNDING_NORM)*leftRight;rounding/=leftRight.x+leftRight.y;vec2 factor=vec2(1.0);factor.x-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(1,0)).g;factor.x-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,1)).g;factor.y-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(-2,0)).g;factor.y-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(-2,1)).g;weights*=clamp(factor,0.0,1.0);\n#endif\n}void main(){vec4 weights=vec4(0.0);vec4 subsampleIndices=vec4(0.0);vec2 e=texture2D(inputBuffer,vUv).rg;if(e.g>0.0){\n#if !defined(DISABLE_DIAG_DETECTION)\nweights.rg=calculateDiagWeights(vUv,e,subsampleIndices);if(weights.r==-weights.g){\n#endif\nvec2 d;vec3 coords;coords.x=searchXLeft(vOffset[0].xy,vOffset[2].x);coords.y=vOffset[1].y;d.x=coords.x;float e1=texture2D(inputBuffer,coords.xy).r;coords.z=searchXRight(vOffset[0].zw,vOffset[2].y);d.y=coords.z;d=round(resolution.xx*d+-vPixCoord.xx);vec2 sqrtD=sqrt(abs(d));float e2=sampleLevelZeroOffset(inputBuffer,coords.zy,vec2(1,0)).r;weights.rg=area(sqrtD,e1,e2,subsampleIndices.y);coords.y=vUv.y;detectHorizontalCornerPattern(weights.rg,coords.xyzy,d);\n#if !defined(DISABLE_DIAG_DETECTION)\n}else{e.r=0.0;}\n#endif\n}if(e.r>0.0){vec2 d;vec3 coords;coords.y=searchYUp(vOffset[1].xy,vOffset[2].z);coords.x=vOffset[0].x;d.x=coords.y;float e1=texture2D(inputBuffer,coords.xy).g;coords.z=searchYDown(vOffset[1].zw,vOffset[2].w);d.y=coords.z;d=round(resolution.yy*d-vPixCoord.yy);vec2 sqrtD=sqrt(abs(d));float e2=sampleLevelZeroOffset(inputBuffer,coords.xz,vec2(0,1)).g;weights.ba=area(sqrtD,e1,e2,subsampleIndices.x);coords.x=vUv.x;detectVerticalCornerPattern(weights.ba,coords.xyxz,d);}gl_FragColor=weights;}",yse="uniform vec2 texelSize;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixCoord;void main(){vUv=position.xy*0.5+0.5;vPixCoord=vUv*resolution;vOffset[0]=vUv.xyxy+texelSize.xyxy*vec4(-0.25,-0.125,1.25,-0.125);vOffset[1]=vUv.xyxy+texelSize.xyxy*vec4(-0.125,-0.25,-0.125,1.25);vOffset[2]=vec4(vOffset[0].xz,vOffset[1].yw)+vec4(-2.0,2.0,-2.0,2.0)*texelSize.xxyy*MAX_SEARCH_STEPS_FLOAT;gl_Position=vec4(position.xy,1.0,1.0);}",bse=class extends Wn{constructor(n=new Ue,e=new Ue){super({name:"SMAAWeightsMaterial",defines:{MAX_SEARCH_STEPS_INT:"16",MAX_SEARCH_STEPS_FLOAT:"16.0",MAX_SEARCH_STEPS_DIAG_INT:"8",MAX_SEARCH_STEPS_DIAG_FLOAT:"8.0",CORNER_ROUNDING:"25",CORNER_ROUNDING_NORM:"0.25",AREATEX_MAX_DISTANCE:"16.0",AREATEX_MAX_DISTANCE_DIAG:"20.0",AREATEX_PIXEL_SIZE:"(1.0 / vec2(160.0, 560.0))",AREATEX_SUBTEX_SIZE:"(1.0 / 7.0)",SEARCHTEX_SIZE:"vec2(66.0, 33.0)",SEARCHTEX_PACKED_SIZE:"vec2(64.0, 16.0)"},uniforms:{inputBuffer:new Vt(null),searchTexture:new Vt(null),areaTexture:new Vt(null),resolution:new Vt(e),texelSize:new Vt(n)},blending:Ai,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:_se,vertexShader:yse})}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.uniforms.inputBuffer.value=n}get searchTexture(){return this.uniforms.searchTexture.value}set searchTexture(n){this.uniforms.searchTexture.value=n}get areaTexture(){return this.uniforms.areaTexture.value}set areaTexture(n){this.uniforms.areaTexture.value=n}setLookupTextures(n,e){this.searchTexture=n,this.areaTexture=e}get orthogonalSearchSteps(){return Number(this.defines.MAX_SEARCH_STEPS_INT)}set orthogonalSearchSteps(n){const e=Math.min(Math.max(n,0),112);this.defines.MAX_SEARCH_STEPS_INT=e.toFixed("0"),this.defines.MAX_SEARCH_STEPS_FLOAT=e.toFixed("1"),this.needsUpdate=!0}setOrthogonalSearchSteps(n){this.orthogonalSearchSteps=n}get diagonalSearchSteps(){return Number(this.defines.MAX_SEARCH_STEPS_DIAG_INT)}set diagonalSearchSteps(n){const e=Math.min(Math.max(n,0),20);this.defines.MAX_SEARCH_STEPS_DIAG_INT=e.toFixed("0"),this.defines.MAX_SEARCH_STEPS_DIAG_FLOAT=e.toFixed("1"),this.needsUpdate=!0}setDiagonalSearchSteps(n){this.diagonalSearchSteps=n}get diagonalDetection(){return this.defines.DISABLE_DIAG_DETECTION===void 0}set diagonalDetection(n){n?delete this.defines.DISABLE_DIAG_DETECTION:this.defines.DISABLE_DIAG_DETECTION="1",this.needsUpdate=!0}isDiagonalDetectionEnabled(){return this.diagonalDetection}setDiagonalDetectionEnabled(n){this.diagonalDetection=n}get cornerRounding(){return Number(this.defines.CORNER_ROUNDING)}set cornerRounding(n){const e=Math.min(Math.max(n,0),100);this.defines.CORNER_ROUNDING=e.toFixed("4"),this.defines.CORNER_ROUNDING_NORM=(e/100).toFixed("4"),this.needsUpdate=!0}setCornerRounding(n){this.cornerRounding=n}get cornerDetection(){return this.defines.DISABLE_CORNER_DETECTION===void 0}set cornerDetection(n){n?delete this.defines.DISABLE_CORNER_DETECTION:this.defines.DISABLE_CORNER_DETECTION="1",this.needsUpdate=!0}isCornerRoundingEnabled(){return this.cornerDetection}setCornerRoundingEnabled(n){this.cornerDetection=n}setSize(n,e){const t=this.uniforms;t.texelSize.value.set(1/n,1/e),t.resolution.value.set(n,e)}},hD="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAQCAYAAACm53kpAAAAeElEQVRYR+2XSwqAMAxEJ168ePEqwRSKhIIiuHjJqiU0gWE+1CQdApcVAMUAuARaMGCX1MIL/Ow13++9lW2s3mW9MWvsnWc/2fvGygwPAN4E8QzAA4CXAB6AHjG4JTHYI1ey3pcx6FHnEfhLDOIBKAmUBK6/ANUDTlROXAHd9EC1AAAAAElFTkSuQmCC",dD="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAAIwCAYAAAABNmBHAAAgAElEQVR4Xuy9CbhlV1ktOvbpq09DkiIkUBI6kxASIH0DlAQiIK1wRfSJTx+i4JX7vKIigs8HXpXvqVcvrcC9agQ7IDTSSWgqCQQliDRBJKkkhDSkqVPNqVOnP+8b//rH3P+eZ+199tlznVTlvVrft7+1T7OaueZY42/m37QALKNk2wHg1pITlB17mC+Pp11W3X/LHyT32vhg48/5SOv+PnwpsHA70JoGlueB1iKApeqzvOzn44GatTB76Xzhd7suBR7+WWADgDEAwwCG/L54b/poDLrHuvvm70Z2Avhsc+PVcxscBU8F8C8ADg5+ipIjD/PlGwfgju8B924E5seARUfLsiNmqQW0IjL8+7L2NYD/7COBzfcCm+aB8SVgdAkYIRCXKyDax4EdAanL5PuNPllNvXDlAHwFgP8AcC2AhRIoDXbsYb48dl5WkVFTE3LGDcC9m4CZCWBuFFgeAZaGAYJQQCRqDHT+McJrVb8zwATUXH02MHYfMHEIGFsAxgjApQqACYQORjtd/B7Axt/z79sC0+cMPgjjlwPwVwHcA+DfAHzTxcVgWBroqMN8+cYBeM71wH0TwKExYHYUWCIAHYRLTlkCYgcIBcAgU/n3qy8GRu4HRgnAOWBkERhddPAJhGJDBxkvw7cqimr+zFM/ZLnZF64cgL8BYD+AWwB8x/dlWuWagHiYL984AJ/0RWBy1AE4AizyM1yxYAcTigW55xMbAkxEiwEdkJ/ZCQxPAiOHgBECcKEC4TBZcKkSv+mTieNcNPNC26mLNsj45QD8LQDTAO4GcJt/7iw2bfoG4WG+vAGwm9ExiEg69zpg/wgwPQLMjgALzn4E4aIzoJjQ9g4024uygkj+pyuAoX0VAIfngOH5NgCHMhAm8Sv2y3XDZeBhNIp8OzJE8OsBzAKYBHAXgDt8/4O+MVT0j4f58o0D8Pxrgf3DwMwIMEPQEYRkNwfgsuuDZLskip0No0gWMD/9HGDoADAkAC4Aw/wsAgZAgs2Z0ABI0GU6IVmKv+f28KDnHxkA/G0A8y6G73N9kOCjXnh/Ebb6OvgwX75xAF5wLTA1VIHPADgMLDj4yIA5AAm6aCUnv4oz46eeDwxNAUMzwJAz4BABSNDFTwSfg7DDKHE23MG5PqIY8A1u/dINs9dBdy8AgnGPM2NfUBrsnw7z5RsH4IXXAAcJviFgluAbygBINnSLWOAjGxJ4pgOKDV0v/OSLKp8iGXBovhLBBOCQM2ACoTOhnYrAdItYbCij5JFzRyIAqRccAnDAQUjg6UNQ7hsMXP0cRQAexss3DsCLCECCLwCQzMcPwUi2MwAScAKbfnY/YRLFQ8DHX+IAJAMSfDkAF13kLvleIjhjQQHxUVS3jjgGpKeeNzYVQEjgUS8k+PghONdhIwAP4+XXBYCHKIJbwJyDTgaIAdCBJx3Q2M8tYAHP9m4df/ylQOsQ0JqtRLCx30K1wtLBggScQOgsKBGcWHAJeOwRC0BSM1mQIKRbhh+Bj98JQP6t4U0APEyXXxcAEnxkQAFwoVUxID9kvQg+c1C7vidRbIDkc24B//hTQGumDcCWA5DgMxASdNIFBUI5pCML8v8API5zfEQx4BudgqiczviSnJhQwCP4BMCGl+wO8+U7AJi/W4O4YS6+pmK/2ciADsAOBhTIIiAJnPB7AvNjP+0AnANaYkAHX2JBAc+tYaJXOqBZv24Vc386XW5dtkHGW+4HFAJonpOe+YYQZAShgKjv3PNvPQaxVoI8zJdfFwASfPzMUwS3Kt1v0UFIlos6oDFdAGFcliMAP/ryAEAGNwQRnDOgLbdlIEwrIs6AZ/QgkMMHQF6ZAKQcJAsSYPwIeAIk9wJgoPK1gi7+PwF4GC/fOAAvIQPSs0URTPBJ/Pp3GSEGRHfBCIQ0xowBtUbcAj7ys5X4Jfu1HIAGQrIgQRXEsAFQIORDFhiDY/rMHmrU4QUgR08AkgUjCAW6CD6CkwBsAIQC4GG6fPMA3OXiNzCg2I9gNCMksmAAoemDzoimFwL48M85AKkiuQVMAAp8CYRRDAt8GQiJ67N6GJODAXAHlsGguscA2AJg1IPGYmxOpBxFWkRN9LsATgIwXnNs/v/5z/9XCf8BO3YAtxbc/46/KDt+5+ea1Yku2VUxHz/z0v24FwMGK1gWsK2OUUxHHdCBeRUB6OxHABr4ZICIBd0QWSF+XRdMTAjgCdTrG9cBNwE4F8CpDkICyYLGsuhFt6zs+gISwUen8zEAjgMw4cfx2H6O/90yAFo84Cbg4ID3/9TfLTt+5+ebnRABkODjx0SwPi5ec/FrYpmqSAxM8Dn60CsqAFI6GfhqAMiDE/gokmvEr0C4PgDkBQm40wE8zMFEUDKEVoxIMLl/KS73mE7H9d+vcKHQQcjwW0Yu9nP8m8sAmOIBuWY6wP2/4s0ezjjg8TuvaR6ABJ70vxUApGrm7EbGE+i472BAB+WHfqHS/eoAaEwY2E9+wLSXTqhI7CXgnB6LCoOJ4BiST+hTnG0HcCwAglCx3ARoZEVFXnBPp/O/A/hXACc7CPs9/i1lAOyIB+RDX+P9/+pbQjjjAMfv/PL6AFDs1wFAgs/9fgKfgdE/ZEpuiQlbwAde6QAMBgiRmsSwA9BY0JfjovGRDBMH4TlcXGhcBOc6HkF0gjPhZgchxTLZMAci/04W/B6Ab3t09EPXcPyflgFwRTwgJ2MN9/8bf5qFM67x+B/aW4XQz42FeL0YrRyikztUFw0704mf9kXgxhOAqc3AAsPyRxxQCs/PdXOFY0W1KHy3QIUGtx+6vdnx1vsB+dsTncm2AogglFgVEAlUWrOMB2RyEmMCGQ/Y7/HvKns6tfGAnJQ+r/9b76oJZ1zD8WdyQjYBh8aBhVEHjELouQ8ukQ7VRSCJAALwkr+sALhnGzDD3JAJYJHg9uhoi4bx8ytkWUtvHT/7+Zc4dw1uZ3612fH2dkQf7yxIEEockwkJQn4IQoq8unhAhmPRKKFx0uv4K8ueTs94wD7u//VX9ghn7OP4c+4G7h8HpseB+dF2AKlFLwuAIZ8jD6NPrOhAffmfA9/ZBuzZCkyRWSeqBCWyoYGQ5yQrBpDbum/ME1HoPo0XEkSD2zlfbna8q6+EUJcTCxKEtHL5EQjP6BEPyIgYAZBvYt3xHyx7OqvGA65y/7/9wVXCGVc5/sl7qxD66dEqiYgRzAqhN1A4CBNAAlDyAFI+iZ9/N3DLJuC+jcDUBmCWyUnOrmTYCMIOkNclLg0B8/RsNLg9+UvNjnd1APLmmQpFHyEBROuWACQT8nN+H/GAvY7/VNnT6SsesMf13/CpahGnZzhjj+PPmwX2MYdDIfQexWyBAwEUOQDrRDN/98p3A7dvAO6fAA5sqHJDBEAyoUVGkwEd6HR12XU4kwzfl6fCXTZzjy57vvnR513X7Hj7AyDvggAUi9EyFgiZqNxPQF6345nOWbD1HQ/Y5fpvuLa/2+82/vNHgAPDFQDnhoF5j2C2qBWCI8bw1eRw5CL5l94L3DEOTI4DB8Y9OWmsEu/zBJ3rgsaybqBob/7A4C7jtWcooRrczr+u2fH2D0AOQgAUCxKEP7aGgLy64+m6KdjWFA9Yc/03/Osa4glrjr+AupqHz1sEs0cxG0BC9HIePLoit9eNkVf9L+DuUWByDJgaq4ybGYLPAWgiXmLedUE7dwC7saL7CqfPKXi4NYdaykCD410bAHlDEsNiwZ9wAPYbkJcfz6T2gm3N8YDZ9d/wHxUA+739fPwXPrSKYGb+BuP3jAFDElFH9HIWwbzCIGkBr/or4J4RYO8oMOW6ZVcAuvi1Cgoha04BCwT5gfMKHm7NoRde2+x41w5A3hQZkADk5+cGiAeMx3+/7AENFA8Yrv/G71cAXFM4Yzj+otOAaQLQA0gZxaIIZtMDFTigKJV8H9Iq6aZ59ZXAvSPAvpEKgBTtBODcSCWCZeRYtpzrmLyeGNCAyFl1v+Hei8qeb370Rdc2O97BAMi7EgB/2QG41nhAHU9LuWAbOB7Qr//GPRUA13r7Gv9FZwIMoVcEswEwfDoimEP0shKKtIphaZQAXv1+YM+wA3DEdcvRKkGJADQQEsQuhi1Tjt95vBsh5nx2IO59SsHDrTmUOStNjndwAAqEry0IyCMICkOyiuIBNwBvPFQQT7gBuPjc9oRYAIHyOEL4vIFEYVNaOou5vCGE/tV/A0wOVcnpzI47NOri3QFIBpSeaSDUdYLOSWvYImSGgftpJDa4MWJbAGxivGUA5MAOc0Be6eVLj7/4Mk+hzCOYPYpZDBiNkLh+G/M3yFyv/ltgL3W3YQfgcFUhgRY2PwY+Z7/EhAR1SFyXCOb57r28QfQBsJQBMn5D4y0HYLPje9Cd7RIC0PM3EiMofF4gVCBp1P840ix/gyz56r+vAMjk9Gl375iB4+CzveuZdLkkEPJ8ZEfX/6R73vOjzT5Si9hucLxHAVg4PwJgRwh9CKOXK8YA4ZEqKZXSQWh5P+5AftXfA/uGKvYjCKn72cctbFrZNECka5L5CPwIPtMH3TVz17MLB5gdLgA2Nd6jACycHwLQxFEUSR5ASvARDB0h9AQb9bXIgCGk6lUfAPYTgEPAITKgg1BObk58srTJgG58WMkWMaAbQQT1nc8rHGANAJsc71EAFs4PAagQestgC1lsBJ4BMCSOK6dDUcwqqaFiQr/0QeAAAdjy+jBiQQeeMSBZT3nCPUDIa9z+/MIB1gCwyfEeBWDh/BCAeQSzgkjFfGLBBD5nxQ4DxN0wv3hVxX5TBGDwL5obxvVA5YqYL5BeMLd66YYxJpRB0gK+96LCAdYAsMnxHgVg4fwIgMrhUPKQ2C+Bz0PmBTqBMQehAbDlIjj4F80KJguSVZ0FuXpjoCOgXawLjALhbT9eOMAuAGxqvEcBWDg/l1IE05Ed0ygZnyHdz0VwCqEPIfNyx0QQvvLDFQCp+8nfZk5und8tXwIgWcHSNX0N2CJmnAl3v6RwgNnhl17T7HiPArBwfghAS7mV/hey2JS9FvM3BLpUUi1YwDRMXvkRYJoAlAh2l0dcZ04s6JUTDIjyBcrl4yDc/dLCAdYAsMnxHgVg4fxwKVwJgGEJNmWtxpQMpX9on2eRhVA+O56AjMfnP+e3Xvf3NwG4xIPTleiY55bpGh6UbafNU0l0z0p+5Jh5HqYJ6b51nP6XP8cx12XNHQVgIQB/bFPVg2OC7Q+WgVFWng/FvtWLI06uWh5oguKEcXVS/9sEAF//VGD7t4ETDgJbF4CNi8CGZWBs2fPL/H6Vwp2KEtVk4fJ+v/EIYPN9wKa5qu+IncfPwXHVZe/aOL3EbwS7xv8A1rQvnO0j8PArTgTGZ4BxFv9mIxhOCGsv+0OPYDRghcLfkWkEuq0+G00x4OtfDGz+d2DbHmDLjL8si8AYP/7CGIAiEEMTG92zXqSbH+d9R2aA0XnvO+JjthiIrOVDHHPOkBrzUQAWAPsZp3oPDpa/Xag6EVkLBK+5rAnJC3/nYk/APD704WiEAV8OTHwX2LQH2DgFbJgFNrBhjd8r79deGoEwsllgNBOzy8CdjweG9wBj08AIAci2D6HafmyAk4/Z7SJ72hGYRwFYAMDLTwOGp4FRFgD3HhzqRGQiyeurqOdG6r0Rm8IEZjzRlkiqCWoEgK8Axm4BJu4HJhyAbFhDxmbDGnZO4j0SgLGDkpibgEq66TJw/1nA0F5gdLpq+zDqFfd5LMeWqu5HNST0uJOIllg+qgMWgI+HPv0xwLA3gWHpW2sC441gCECbmKziaGrnUdMO4aHeh6MxAP4SMHI7ML4HGD8AjHvHJGNAgpDgY/ck3stipRemvVhc+uASMPUEYGh/9dIRgGx8Y+MNbR/00uVtH0wEx94j/v0oAxaA8Ed+GBieAYZZg5kADC0QWGOFzGJlcGPzl1BxNLXD8sk4xftwNAbA/wwM3wGMUmxOOQBnHXzetIYvibonmSiuYTNjriVg7glAiwBk0fNZH6+PmX9P6kfNmCXGpftJ7TgKwBIAnln14BAAYxMYm5C6RjCyCoOyr0qkD/c+HI0B8DXA8N3AyCQwesD1VQKH7EcASm1Q+y4CkN9pUKiVF5nLvy+fBbTUd8QBaH1HvNBROiZvfsNnrF4kcvPwpdsBLBeU18Nf7AB23Dp4ecHC8oBgUlJJecLS+7+WOpE3gbE+HKw+yoevCYkMGKqPJrdEKARutaFYRs1fiEZ0wP8CDN8LDO8FRqYq3W10pgKgfYLaYCzootgA6KXaTA90y374TKB1sBozy77xHFZ536utRgAmEaw6g5kUSFZwSXnA330qsOlfgHMPDlZesLA8IOjoLypPWHj/11EnCiVwkz7kAExtsGraYUWdSDX5TmsagL8KDBGA7Bd30JsW0oWivnEOQNP7yGTSBR101AlZSUtGyfgZDkCWY1HnJdcBVe6325hTvelg2CQjZNDygG/2An0j1wKnL6y9vGBheUC8prQ8YeH9X39OVQSc7Mc6fCaKvAeHdCIVf4yMYCynTpX+nb97NJmlSQb8r8DQHm9YOFUZTKOzoXGhs6AxF0HIexcLBvWBuiHN8s2ne98R3qc6L4Vyb2oBVjfm9MIFHbjDCh6kPOBbQoG+oW8CO5bWVl6wsDwgfr20PGHh/X/1iaEIuDcCTIW/1Q4rFv8OnYiW3c+W2iKwUjKbyjQNwL1uuR6sAEgDgq1brXOmV81PxhNB6DUDBSYzQJwFtz623XcktX1Q1VWKaTF/zZhVazBVYA1tX5MazsGvobwe/jQr0Ne6BTh5uf/ygoXlAfG60vKEhff/rSe1i4DnTWDUACY1guFTDqLYdCBvf6DJYSMYATBfOx1kLfj1v1axH10nQ3Sd0GUkBnTfpemtBJgseIKQAHLQcVxa2TnuMW0Aqui5es8xBIegVdVVE8VhzHnLh65WMB9An+X18K6aAn2tO4ETl6vqbKuVFywsDwhevqg8YeH93/Rk70JE90nowxZbIJjvS3WYNSGUwGHJTpPxwwcbBuBrgRYBeKACn7VtpdUu/c0NJxO9BIxcKu4TTODzbkonPLoaL0vyUQRb2y8HsL1ckfWzMeuFi40Qezqi+yiPhyt7FOjr6/gCFwgP7Xb5vssTFt7/nQRg6MGRWmDRoeyTlpgw68GRTwgZgo1gGmXAX6/8dtaylSKY/koyID9BhzML3q1gAos2AcOrZYSoq/pJp1VtODRm9Z3LS/7WjVkvXOzEtOpKyGrlAT+4SoG+VY8vBGCvy/dVnrDw/vee65NBJiAjBIVcAJQjOm+DkCZEeiGAMw6sAwDZsJrAdhFM9rPGhd4904Co5oVuCZPV6kD40Ec6+9W8dBTBsfdc3nkpvnB82fp2RPcs79dHgb51LA9ofsDV6vut5/3PnxcAmLVBiDqgevDaJLkYrpuQxzcNwN8AWgIgRbB8loEBzXDwl4cGiDGft58SCOWGedgjvOJ+bPvgRkiuA+ZjzhnQQOiFNVbloa7l/fos0LdO5QENgEXlCfs8Qbf7HyMA3QVjYihYhLENgjX9y/qwxQmRU/asfd0ZcLU2CHVGyusJQLKfVi98CS12T5f7iECkHpsMkAhCF8+nshWH2I/jXsOYO144GV/9ApAIrS3vt4YCfetQHtAA2G+/4PW4/2PPbzMgmUMi2NoeSCRxIt2/FvuxWURIWCXg357gfTjEDNIHnTRXRCpH5ugKwGl3HpMBXQc0v6WLYVm/5limj04rG762K2uYY9jBkr9+rI03NL5ZbczS/dJ+LQyoga4o77fGAn0NlwdMAOy3vl/T938KAcj121z8Bn+Y9eWQJRz8Y6kNagDh2ey5EvxjxQD8TWdAuneCCO4An1vw5vdzQMmdktwq7pLZQR+dM34+ZumAxvY1Y04uqOAJ6FsExzeto7zfAAX6GiwPaLWR1lrfr8n7f/Rl3QGzmsis+/uO71V9OFgP2gpPhgr7TGRqRUT6dyvr4aIs/pm/2zVUNbBSv6G8e5pEv0Cvec7Po7+bTtjlBRlkvAMBkDeQyvsNWKCvofKACYBrre/X1P0/oWEAnnFD1YdjhtXxR73mX10FfCHHE9pVWcGAI/S0gKsfA2y+twrFZw6Hxf/F0Pk8Ri/kpGSnMuDx5T0iACgQHioo0NdAecBUHW6QdsV2/cL7v/Cyqr5gnc42CCOcfX1VIZ/V8We9IDmTzVXwPDJiXuKXPxtDBma8+lzP4WAgKkPxCUAPE4v5GzEuMX0PYJPLhB6FJsc7MAMmkVxaYC/K9gG+F1++8AQ7Gwbgk78I7GFpXgIwFiRXOwaJZPUbiR0yCUDRk+cHf+YpwMj9HgfI8ClGPyvsSiH0WSKRuYlitLb/zHM/JOSs5C/YIC9cMQDZr/dwxgOW9gtGYUBi0wA8l304vDQvAchilFbpIBQhZ7Ejq6ZQ0/Yhil8y4j89Axie9DAsD6FX9HOK3QtROTFkviN83kG4felIY8DCeLrSeMDSfsEovAECUFsTjHD+tcB+tkFgcXKvBRir7qtFl9owmO4Xy/1G3bAFfPrZHorFNWBFwHjQAFctIghj2kBarw06If/+MM9ZqTN6DgsDojCerjQesLRfMApvoGkAWh8Ob/tgAPSKWCp8ngNQtadjmTdltvNvn3peFYhgQQgh+iUmEaUAUoXM1yRLmWuFLaE9Z+XIAWBhPF1pPGBpv2AU3kDTALzwmqo6qtVh9kJErAudABia38TC5wJgS2xIhAwBn3yhByL4EhzXfRXxYsDTJ4IvrNN2JFMxZcBzVo4cABbG05XGA5b2C0bhDTQNQLZBYH1AVsQSAAU+imI1obHyblnjG/kJk3U8BHz8xVUQAhnQIl5CyNgKAGp5LKSSCoAySh5Jj79vTagcxUaIBeRNe79g9gq+DXig4wGzy+PONfT7RWFA4noAkGXZVAhcBckJQgNgrLiaNb3paIDo1vHHX+oA9LQBi4DxJcOUPJUnTgU2NJUyROs8irGARxQAC+PpCtsFd40H/AEf0gMQkLgeACT41PiGoLOKqyrJq3K/Ya9mNyr5FusN/uPLPIeDa8Bc+w3rtyl4VFHaMZc3i9RWBM9jjzgAFsbTFbYLRmm/YBTeQNMAtD4cBKDXBTQGdAB2MGBo8SCLmEuS1AFVAJ3A/NhPt0PoCcA8bSDG76XI7aySg6JYuGfKwJHFgH0E5B3ueMCe/Y4L+xVHAOZ+9EHcEgQgwbeiEYx6jwTdz4qfu7EhEJqxGqruf/RnHIAEnxgwBM0aC8aUAYWNBRCmoIll4HTqO122QcZbrgMWxtMVtgvuOx6wa7/jwhtoGoDWh4MBJ16WN4lfr8AqI0TVV1O1fa9BbQzovkAy4Ed+NgCQUSxZCFWvCOaOFREXyUwZOPIA2GdA3uGOB6wPaOz+QPv5S+MA3OXiN9aclghW+d3IgupBF2pPqxcxGenDPxfSRh2ASiKKiVP2PaZScvAKoA0VDc6cOlIB2GdA3uGOB1zR77iwX/F6AFB9ONSOQW0frA50sILVcckWJyIDSgwPAVcJgFbYuZ3FJvAlEHbJ3IsgJLGedeBIA+AAAXmHOx6wo99xYb/i9QKg2iAIfDJEJHqj4SExbEty0gkdhB/6P9oZbBZIGiKYVb9GKaN50lRHBLOvhDxh/5EKwDUG5B3ueMB2QGM/grb7/6wHAPNGMAY+GSGUjC52VX2f2CD4+HO0gqkZfegXKgBaHkcWtS0AWii9xG1ImrLlN5XR8L8fmQD05BVrmEENmpYSP9QX+KHiqj2/82+HqqDWwnbBRfGATdzAegGwru2DpRq7Mzq2fpAf0Nq0Rl2wBXzglZ4yUAPAmDSVWDBPHQjLcgTqOZ6zUvdKHh4ruDCerox/Dnu7YqwXAC1NI/QcEQuK6WK/kdgCTGC0PYAP/KIDMBgglq+hIkrOfsaCviLSofcJgJ5AdM7kkSaCj/HqQKVIGvD4swF8bcBjmzjsaQ2H5D/6acBd9wALB4DFWWB5AVherMp4GKIYEOp7+26UF0aSfT/xYuDG7wDjrIpAERytXf2vajj7ueryQXSFl10K/ON3gIWDwCLvjfGB8Z54O+Ee4ve6513uB2R1yzsqC+twbC8HcNVhfAeaBuDP/TvwtS3A/ePAIfYFVlPq2HHTuyulZCTlhbjhETF5yxTQGgPGhoHhIWC4VSXGD3n0tLkMHXHxu+YyB+MlPwDuZs5K6FlsbCzdVO9DuKfkHM8AEkP7B8fOkwDcD+B7np42+JkGOvKdAL4E4K8P0zvQdET0b14D3DgB3D0B7B8HZka9WzrD88N6sFm+YcUjrn7E1ZDvMtF9DBgeAYaHgSGB0PNHCD4BLwLRsByAyX/ij0/dDUxuqlIG5hix7eFhvLcOVUAtyPSydAFmOQNe6EYGV/9ZESiKgIEgtbaD/gHALQC4ovY5r5KwtjOU/XfTAHzzLuCmIeDuMWDvKHBwpMoN0WQzNtAaYSs0K4ZlOSAjGG9kPjCBRwZ0ABKEBJexYAZEAU3A7Oi1BeDym4EDnjQ1TwCGWMW8MXcKks0YOyZNlQOQjcgYIUHllEzYQ0ktm+r6oz8G4F4AXwXwRd8/kO9A0wB8y65KmPxgGJgcqYJTKYpTv2CCzyddQJRDOjKivn+Deh8BF8BnwBtaCUA+YYEyAU8h+c6Az9gNHHRmrgOgmDA3jHQ+iWupCeUAvNSrA9HNwqx+muk9nJVNg/CTfrmbAPwbgK8D+PcHkIibjob5o13A3XypWsAkG1cPA9PDFQDZM1id0i1KxsWfOrKnAFXlifCFFMMRcASigOcs2MGAIfE9iWXplS6On7UbmPaUUTXQrgsVMzcRj5Folg2V5ayUA5BWYKwOxKUafnosWjcJwk+7W5F2EKvlE3xcXaNYfiCYsGkA/smuqug6hcleAnAImPbO6YwRpMgjCAVAm/yQmKTv5hNsAf/i7SyNBSl2a8Qv/4/M1yF+BZSYlNQCnnVrpbC+mToAACAASURBVJcaI7sOSEY2NpaDXLqpR+vE/OVksDgImgGgghHoYJbTWc7oJtFWc65/cg2AYvh2ALsB3AzgVv95nS/f4QdsIkT9T3cBrGtITWZfC5hqtQHInsEGQn3UDDvEDEY/ICf7SxMOrAg8T+c00JGkvHGd2DABUYZIAONzCUDppCFhSukCBsLQrFtZe/IixYQpSyEoJoqnuPWrVRAubQh83HNlZB23z7j1ywmj6CIIqUPxw2Xeu9bx2jx10wz4Z7sqTYZaDD8EIDuoE3hMVEphWg66JIp90k0sBxBcy+iPIIaT1RtEsHS/yIAqw+VSNPWQfe5tlVEk8auXgVa5BUsEJuT5uoliAbE5AGotmIAjCPnR9xDG3TQernYAUupTdBGEFMf83OkApHG+XlvTAPwfuyrgSZOhas3u6cwTsUBVn2gTwyFMi8wjHZAA1M9fYGHDULJD1m8Cpa8fRxDad+l+Ykf/3XNvd11U+qiL39SxXevSsshdDFvgbI1O2AwAtRZMZzTBRuDFjxe1Xg8QEIB8yyj5yYIUxfQIkfkIRnmHCM712JoG4FsdgHHp3ACoMH2G6jM4lWzoQarSvwQ6MSB/vporVaFkh+mCLlpVR8Z+dqDZLoDOpHSiQeAFDkBjPrlgCHgCUaFifg67H/9uYjn4Ai1vpTERTAASBaoQJBAKeNqHlL6mwPDZYAOROag/EYRkPX34MwHIvzW9rQcA+TLpI22G7EcQKlJGsYIJhC6ClUMiXfBTbFUQAej6nPS/OuAl9pOOqIc2BLzg++3VmWgIEUz82cRuCAtLIHQQm0gO52uOAb22sC3JEWgRfPpZf2sQBQIgLydPEIFGwPEj8MlF2bSbsulghLftqsCXq9HGgHysznrGgi5qzTUTFH8FLhAUn3hIJwCN0HLncw37qaF2zoYvuKNivmQIuUNc7GvWt6sHNs26twA6vhyq8NEMAHlyntFrDCcQehyaPTl+FwAbXDcmAKMRThakEk8Q8kPg8SPL0qzLBl+A9QCgR6uZGs3vfHz8TtBZvkgGQrEPBVAUg2Sij50QAOjiVKI3saADJRm7dSLYWfSFDkCem/dhZeMy9pPY5QvSDYQyUJoDIK8qMezh3wY6fSL49PcGgCAA8pScJLIgAUYQEmz8RPA17StvGoBv39W24eREiBoNQSgWNI1HBkdgxJSw1AI+dFIbgOYmkjimQ1r6XXC3rAbCHycAgytohf8vsB/r2KRaRq7zpZ+D37HMX0s3DDcCUGLYaw53MJ4YUODzusqlGCQAOQCejuxA8UULUkxIwAmMAp8Wa3qkN/R9W+sBwOhIEPjk5SLr8HeKFbTQfb77csPIMHGl/4MPbReslPhNe4+MiTpi9AFGV4nI7MfvagNQLh/pfrYnDAS8aJQ42A2w4em2cAyWQUuJVQTGWLs1uL7DG9J1RjhA+jvYk4t3KXeMqijpzrud4At9z3XtP16yGfjKZmCGooYh1tZzvv8xXPFl4PoJYC97k9FlwZWD+Azi/deMZWeP13eQCGEyoERudChIjbb3mJYwH7V0QIKuCwj/gfMj0asn2I0FXRSHXfL/iRkNgLyeVj8ccMY//J1fyxzTAXT2+xoQViKYD/1hDqLxPiYxTgSvQrphphG97tz4Slqafnj7uk1kIQDZrvWTw8B3jwEW+RLxPgSiCERdPwPR7+wCPg/gulFgfruDkOMQkFc5x84e708JAMmCuRNBXi4TIg5CGRzGiBGE/D4E/C2r2vcAYJoify62i0aJSMhB+2IHoNwu0fkcjQ85pu3ack5nIBREqneYFyWLkAXIJHESe00Cyx5QyeL6F/tyEcDcrOW2n7fX8df0mME+/vQ/PQjhoy3gzo3AISYf80MQaQx1peH9wb7v2mrtmCBkIMMejp3jIJD1MsaxaMZ8v5N/67INAsB3BAYU4JL4DSo1J15AFPAEwuQHZJzkKfUAtOHLJSOQRWndBYQvCQA01cfnNopfsaCJaD2baBn79QjSTiOEP1EcawIpkq2kegBTNgHWEpOKF8Uwq2NRFPM4AqCf46/rA2U9/uVDvurB01zvAJpiiwOl3fEeciCGF+Ij11f+QkbSfMPfIzqw57mEFZ9Dl3Ps5HXWAYByHJAJKV7N+s0cCQQhwSlfm4lGZ0KB8C/rABgZUS6ZHITBSEhCowUYAAksF7cStWREyxRwtuPpOlgw+5s9sq6OaIJIIlUgEhA1edoTgHxa9HVw5jibZNF+j/9yGQA/7pbujZ4bwv2+cWB6tFo0NzYnkxFA+cvEAo43VBoEo2e+48EMXEOmD9F6xhCE8RwZEJ80VblKvDlmzwicfqy93/o+8K8TwB2jVSgW138FrJQTXBNlnJgmrjZwanow9CBP/rL9wF0jwAGWDtFyoN9PHutnIHT05mPXz93dMGQAPniJsjiBXiTbxDZFMF9NLUPQxKR5qezz1Y6/YZDH0D6GkdAkYJIvRalAdHAMmPZoYhb6NhDWvEyf/ma737CXN7R1ZC7hUbPgcFgqt/ZZjADnM1xqEVhYBpb4CUk5UsL7jQvj///5buDrLeCOEeD+YQchYwG9VIfyg1NaZszFiCH6DkRGLze5/dgk8IMWcMCjdCiCzR8od1B8OTwvJM8JEShFut1fzMhi+eRJr6LI7hYP2M/xVLwKNoZjUTwRMAQQmYyhWGQxsSADOflZ4kukj7PhZ75bETjBpkAGahMkcrGgwhsXeCyBHBj1wmOBQwvAwqKzoFeRV8ZaerjKYAuirmPY/o9X7q5Cyr7fAvYMAftCPGAEoYlBiVtFwLjtp2U4irj7yOANbi+crHyrfCbTquJV44O0F1FrwQGIMZFqdQDyP/gGSZ8TC0ZRRsOlVzzgasd/u+zpMByLehAfCgMQCDyGZJHFCCgLZ2f8mgI5qauEcVx9e5vACTgCTwEMWr5TdIpWKJb5MvrnoocDswvAPAG4VLGg6UKeqmi4iuDz4er30oX0FP7u5moMvIf7W8B+jwlUNAzFnlZCIhvGFRCeWzrgXSSIBreXTFZSgVLHAp4UHOFuociEEsn2PJwl/XEk0dzfSojeerFg1IOo5BKAveIBex1P67lgUzgWQaJwLAKRH04i14ItgDKEtGsRnWx49b2Vkk9wUefTGrKCF7R0JxZMqxN8cmPAxWcAcxGABKEAKPA5u9lEaAbCmKMI+sDN1X3z+ro24wEZFc0VEE64ABgT180PF9ZdBcDb6JpqcPtPk+1ACbmKjJnllwyuILunEAWjZHkBsrsRUnfD0qEiC5IJfyisgMhzWhcP2O14Ro4WbASgAMQJ48SJwchmBCDFa8qpyBbSP7OvU4PQ0p2W7+LSnSJUFOrI4V7w5IoBTQQTfJ6oTSYk2mQcpGRyH2syGjIF6EM3V/fM++C1CfwUExhCsmzCaQT43lZC3e1hBpEHh36XEqrB7Scmq5dV0XZxmV8WuDFzAF9iwhow9seAGoBcGtKjqAc+1l9rLb/1igesO55ysmCrC8ei6IxRMAKTWNBi6Xw98xNTFUi0jEcmpYgRAPhddpVi9OIEPP5cYD4CcLkCooHPwaW9kV+iwWrQHT8uA1fd3F7DFvgUHUP2k8jTiogAqLoxFpDgbMj9jXSuN7i9dLIdaxzBp5XVBMIMgFEnFAPKT9qPd6A9BIGI7MfPmf4U+40HzI8nWgq2PBxL4FEkjKJixGRRFyQQPzzd1iAUzCAQas1YOmAEoFjwkecDC/PAwhKw6CxIkCXwOdVJLxTobMjBdyIgfvimNvNJ7Evf4jWtdnRYD1YNGVuG93VWuWs4Jf+mlZCCZxwP/cnJ6mXVKk2+tK8lQQVHRTGc64SDAZB3Ey3JcxyACkToJx4wHl+YwqloGDICmYmTFgMQFBET8yyYzyAG/AfWX8mCGQg0BTRoHwt9KVaPE/HQ890AIfgWK+CRAaMRYnVdxHbhdY8Wslw1V93UDsmPIj9GxgiAioRRMIJNvoti+SW/Ikd0gwAU8+XxJcbGITJPDvI6XdCFREFSknTB83xka40H1PGF9dnycCxFwygkK0bASJQSVAbAYeD98xUAe5U3jKIwBosSgNsuABYogl3/IwgFPrOIg1Xc4ZrpAsSrvruykl2ucykapkMMh4CExD5DwJfWAYAxwk4MKPAJgOIjGSEGwuCakRhemw6Yv0UUwRf7L00L9pnsNx6Qx4feY4O8pDEcixOjsoTKKpMYjSFYYjOC8Eq3Wnnr0YYS+0Tmi2HysrPGLqwASNYzBnT2Mz2QD91laxLB0gs12GAh81cf/o/OcHyJ+qj0S/zxnhUZbSyYWaL8+Rq2S29wowiWkJPan4MvgrDDGAlRe7KIywDIgR3meEDWg9HbJgApNTkXo8o0i7oVgxnEgFr8F7jEdnU5GvqfJQKQKyEOPlsNIQvyvupAGHS/Okv4qv9oh+PHxMLk8ggBCRxvAmEN+AiEzz2iQfQBeNmkh4K52hJBKOaNe/FSLobLRXCz43rQnu2yi9oMSMDxs2jo8303ERz1wsCGZECF4kd3DwEYYwJjhoNlQrgIjlYodbBPrwMAZfEmyzcIv27gs6XDzC/IR1DOgA9a6DRz4wZAsZ+LYXvQYsHoD4ziOFklna6YD3+nnU6dZ7bGDAcBUImIAmEUw/zbJ1i/scGNDJiLXmle3RhQ+l/aq57gUQCWzwwBKPeLsZ/LFrGg/ShRXAe64Ajkv30kALAjF8R11Dy3K7KRwJcsUTaqWScARou3w/INVnCH+A36n8RvM3nB5XP4oD6DATBYwGb5ajlOLOh6X8JaBKRG77+7ygGYp1bn+V25/01AzBnwQ1ypanD7KWfA1QDYC3zJIj7KgOUzc9nFbetX/r+O5biwNhyX5uSEDr5o0xsJwLp8/m4A7GaJUv/j3/5+HQFYJ3oFPPkho/hNeqBcMkcB2BAA6XrxmMBkfFAci/m0JpwzXw0TXvXtzrz+PKc/Ml/ugzM9MDqCAbz/keVjjGcQA/YLvjoguo1mRslRI6RwfsiA5nqhL5D6nscF8gfTdfxpS+/hLzvWfzMQCoB1Fq/8b3VWaPIDZqsRV64DALsZHVHs1gEvsqFAeBSApQC8pHK90Oql4UEAyvCwNeGcBXNLOPMLftgZsI75ouUr9ousp2TEyIJ/sU4AzC1e+WIFshyAHPZREVwItrrD3wGAhibTYBhxVpe/xePyrNBuWaoNp3DgFwC81O+RAepK/a5Lfe51jxr7JwA83nPXYgq1asl0yX5N48+f4VEGLATlK1vAo5YB1gBSRmsM+NFE57lcfPD5pPFWCJImtyvGgGfOAacBYO59zFglgHgPefZsXV6/gPXBYeC0RVgyJNOGYuJjPka9eHWgjL9bWzhWk0/n/wPn+k8bgFNmgYcsVflZnBRmIShtJM/m7JGibGBoOIIez9wKPP4AcNpylfbNlGfdI+9NjBjz8JVzppckZuJ+dBw4aQ44drk6j1LIY9JkPD7P4s2lwVEGLHwJnncscNIh4Nh5YMsSsHm5ndOu1BGFThJ8/K6JrZtoslST2+XHA6ftB05ZAE5crgAups5TfaL6EF+UyIif3gAcOwtsXep82eIYY9JkXpMgMp/AeZQBC2b8OduBYw8C2+aALQvARgJwGZhY7swEzbNa88IRvAVO1qkF91J36DNOBE7eD2yfB45fqphLnevzdGeBKBfL8UX5/CZgyyyweRHYsFwxYHzRNK6oetSBMDLjUQAWTPqPngpsnQK2zgKbCMAlYMMSME4ALrcnR6JYQIwsoUnjpDRstOLy7cBJB4CHUGwuAtuW2nUDVH1EFUhycSwWjGD64mZg0xywcaECoI0z5P3X5P6nWlHdgHgUgAUAfOYOYMtBYNMssHEe2LgITBCADkIzSJZXpCOnIg25uPrhgnupO/TyhwLHHwSOmwW2LVSik2pCrDsQskzNIBGIpBdGI+VfNgMb5oENCxX4yPRjPj4xaJ0+WGeEHRXBDUz2Mx4FbDoIbJypADixUAFwzAFI8KUJChMV2SUaAGc1cE/xFJef3FYRti64nkqWDrqqEhbrsm5zvZCdPCd8nHzJOLZuABRz9hTHZwPL7LnLnoNMIY2VyaKcjtZLHOAbNgNPngKe4BacfGF1pnydD+hphQ/8XV5UiEueLGnDN1tWXj/3/4cTwAUzwGPcRcFJiDpPt3FLmf5vjwE2HAQ2zPrEzDv7OQg5OSM+ScYQy5Xbo8465u/ZfLTJ7fKHAdumKxVh8wKwealSE6inEoSy2MWCdbUHIghv3AqMzwHji9VLZuDzD8cXxxWZs5c7apmW0fMBnIHKn5X7d6I5npvRz94O7LgXuGIReJSb+Xl1tzqflybwRwqf9i97BQRWomWJQ7oZVFtJoqDX/b/oGODsvcBTATB9gsfGqmzdjtVz+G+PAyamgYmZCoDjFE2anCVg1CeJwOMnTRB/DmUINVkkgia3y08BtkwDW+YqAFJFMD1VAAw6XG61R31O9/fdrcDYPDDmY0zjc1UjivBuAMx1QdMB+WAYXU8dhEU16dOSkppbcHFSrng8MHwnsGMPcN5ypURHp2xMIa7zDz2z8Gn/kVe0YomO0wEwBYKujL7v/zHA6C3AxfOVh58g5AsZxx4fZM7sf3h6BcDxWWeGBZ+cMEFiwGEHHRnDzun7ONHs/djkRgBunql0VDOSHIDU3cxSD4aEajhFXS4H4S1bgVGN0V8we7E0Fh9jVDG6Obr1LJMRwn+kOCaTEYT0dsfqZHXl/p7PrLi9wIY7gO0H2yAgCAWCWCowKrYE8nMLn/a7PQn9X7zIJPPkCcK+758y7x7guNsB6l98gZjLLYet3Ay5n0sv4R+fCYxPA2MOwLEAQLIDPyP8uBg2cRYmzFweAYilKkn+OC8/Fdh0CNhEA4nGA40kd6FES13WLO8v1qHKAfh9B+DoYjU2Ak/js/8NAIwg7OUb7LCC+WAfB4CpBJoIiTRNRmS1l13kqWh3Adv2A8cdqqp1MB+aIOSxWv6pq5D2kkIAvt8rF7BLJksN/jMqfa7v+7/Ak4B3A6ceqpasKMq5akAmlLWY37t8ZW97PDB2qALg2BxgAFwANEGcnI5JcrDZRPlkaXL4u1KJUAfAjbTQ59x6dSvdLPXAgGYshZWR6JIRaXB/NwFI8C1WwLMXzMeSwLfcXuKrA2G+wrLCDcN/IIg4ERRn0qvyySAQX6mG1XuA4fuAbTOVwktRRr2MLCoQyvEZ/UY/WwjAj3jtFJZkU79g1ghkgEBf98+0Umb/3A2M3lkBl/fOcdMok2EjkZyv8773LAfgHDDKjwNwxEUw9yailpwdxBAEYhBbAuGzG3aKkQEJwAkCkOCjlb7Y6SYyf2UwlAS+vKYnAXjfNmDEX7DEfA5CjUcsnzvbu1nDtUMmCDkRZEEyGdlAk6G6lQTSa6m0MP6HuY73AxNTlcJLZ6WOJYC5/CNxLpHMgdKIKNl69Qvu6/75AjHOiTU87gKOOViJb748BKCWrnK/maTA+58AjM0Ao7PA6Lx/xBAupoYDC9okBRAmPdBZ47lNA/DhwMRsxX7mPgl+SrmK5EaRNRslXFQ9CKB9DkADn79cZtkHFkysJ103eBbqlh97DpmTQTYgk9VNxu+xYbXKU3lhFoJPOgdFGY+lPkgQxokkgF9Xgj4AvfoFs84eX4Ke9x9fIC+tRfDxvvniif358sSir2LCj5wNjBKAc8CIi2AxxLCzIAGY9L7AhGIKgpATw4l8wToB0JjPrfTkp+SLQbHrOqm5jNyajS6VCMIpApDAWwQ4LrGgXqzIfnq5cv0vN0ZXHTInME5GBNLb1DGdOYQsI7AfGKFjlgqve8wJwG4T+fuFAFytXzCLb+VgWnH/fIGYfc46Hs7iHC8ZkPcdXx4VfVXJw8+cA4wIgM6AHSLKWZCTESfLfg7WsIyRF3ckiRQ+HACXkwHptyP4KHrpJvKVGnOhRF9eBF9wE0mUEogz2wC+WGI/vVxiQQIxAs9+rmHA6E1YFYB8DJwQMZl0OrLZ++i7sfT8zroYHLS9df4RACWKxSZvLXzG/fQLZqk2gqn2/vUCUQ9UZaM9wDaPeSPrC4A5C1KV+NITKwCS/SiCR/jRBDlLmP7nHynsxno1IPwJSyRpbiMADXzuPDYfZfBTEoAmcuVQdiaW0zwXwQsCYDYmMaDA1wG8TBSvaoR0G77EcGSET6hjOvVApfRPAUN0zjr45JzVcSqiTxD+VeGzXku/4Nr7JwDJOkxFIwt6j6+RqUrlkO4bXzp1gCAAv04AzgLDDsBhKugLFUvQUhTwCEKbnKCw14HwJ9cDgGQ9WegRgDI8XEcVEDvAl7lVlglAgi+I4CR+Zf1mLGgMmDFhBGFfDCicRJFERviSABjLS7FC0MFKMU+07wOPE0kGvaoQgGvtF9z1/iODkwn3VWoEXxres5ib9xx1wZufBAwLgAQexbAD0JiQwJOuJBA68/H3Zhk6+3CifqqwWNMKN8wjKgbk6gWJgC+FMaBb5vJVmsUbV2vCqo3cRWZcCIACoax53+ulkqNd7iqOcU1WcC9cxEm5kQBUdZ+sTnSL/jEtTWngi21jhJNJBivZBukXvOL+yYBkcOqxKjJ4AGgxzMrBVwdAMmHrZOAYF2l6y/mwV6xD17zmWo6MbRyeWtOHwxJ91IIhr6rqZS70DPPLXDVUrfBwzHKr1EUp6/h0T/6L/GcCqslt4IhoTcwdAqDSs7I60WQH6R329pHuFyuXDJmEjuOSbdB+wSvuP5bGUjmsA5XoUvcvBXKKAQnApUdXwah0b8jXR2YzJTsC0ZHB33FL+2yiX3h/1YeD1fFZGT81g/H6yqkVa9YEpqMhTADle8erHA6t7Mh6j4ZBXdBGjFyO4CSIm9wGBiBvgqxwIAJQlXIyEJLyI/i0SkAG/FbhaEr6BXfcv+5dLKhCg4z1C1HEBJ8+BODQGZXfk/quAZC6ketAZEQCTWAU8PIJt0fgwHzZvVWNaKqi7JLOmtDWFy42g1FxH/XfqGkII0C+a0tnDkfsGxQjn3VPsk7tXmuy+Xp0JhtoJosAaFcUAJUYKiYJxcqHqKAH9rPlG2cMrmCUbMX9guMLpGTcCMKDlZGhMK8IPnPIn1X5PA2AwegwEEYmDGBMjOI5whGQP3NPBT7VJlRNaKvF4t2IWHbDErtDlSk1p4lJ7/zd246tglGZryIfrFhQ7pU8WCAX0ZENG+57U14Z4YrCeLrSxXdev6TfLwrbxT7znMrfKQXfHLQCnyvmRIv0Q3430ezMmL98P393G3wqz6am1NYzzoGn+svqRmTAU2citctqAX/2EI8F9ACEmLHXLZGoFxtSl2xyK2bAYwrj6Xr12+1noL/jUTCD9vvFrn6u0v1/nvGkaoVBAQi0eummMAuXQHMWJAA7gCixG8U0gFfcXdlBKk4Z6zELgAJfZEKrxpC1xOIl/+Sk7jkcdYlSco90y9+gK6vJrRiADD0piad7RuFo3udNCgft94vCdrGXn+tujgV3QAcHLcFnroelivHkchEL8ue0uQ74S3eubAITS3IQhKkMRjBMokgWG3L//2z3VSnP4VDgQWxUEEUxAZFHL0eR3HDfm3IRbDHkBfF0zy4EIKNhSvr9goGEBdvTz/MIYQLQdVsTwRTFDj5jQmdArRDYJQNDSs961R3tPhx5NXoVgoxleHnarjohgLec3D2HI492yQNvIwvqO9fJm9zKGbAwnu6FhaP5pFuMg/b7tTbpBdvTz68cz/zI8azVj8iAHTqgmFHXDUB89R2dtaC7tUGw4kDOgFb0R2wYRDGZ8g9O8aU4XwPOczhiwGlMjqqLWiFYGu570wADFsbTvaxg8nkow7E8nM/atfKzln6/1mS4YHv6BQ4+Z0BbqHcd0NwwYbVD3+1yWhXJxPBrbq8AqE/XApSqAxiBV2MZ/54DMOZwKE00rnDUWcR5KiV/brjtSAMALIyn+/mCyeehjIYp6fdrvVELth8RAClyHXxmhPi6r1m8FM0ucgk8+y4RHC1kAK/5XgW+2hZYofafWcPq1B5AqDqEYsQ3nepR2gqhV2yiol1COkD0C+aOaoGx4aL7DQCwMJ7uVwomn4fm7VrX2u/XAlELth+5sHPtN+l/Ap6sX2dCsZ/phZkIJgv9l++1wbcq+2WFv2NXIjNKAPzuw7MUAV8DTuynFIEsQy83RgTAhiv+NgBABaQOGE/3mwWTLwAqHnaQfr9GnwUbARgDNBUlkpzQboyYCyYDYdILdf0l4NduW9kGoa4geNdazLElKoA3Prx7DofiETtC6XvE7hGEzJlpcis3Qgrj6d5UOJoYDcMglrX2+y0NPtl5UZUjkfx/Hqbecoe0OZzdF1gHQrln9Bhee4s3f3Zxm4MvAk9VSFdUIw0i+Q2PaBtISiBSSFgCYMjMW00MP7pwvvLDmwFgQTzdHxcOSGvBg/b7ZRZByWYAlOERluKM3Ra9CKWc0q73dTBhMFT4ZwIw9l5Lrpes+HjeBiGCUOKXeuBvPcKTiEIOR0f+RhDBMYi0Lhea4GTaa5NbOQAVDzhgPB1La5RssV3rIP1+7yy5OAADoAchEHBkFbKfGRpiweAPtMs5IFNokyOGk/7rAYC9OhBFwNXVY1at5tftCBHaWVS2AJdEcEinrDNC+Lumiyc1B8AB4+muLARAXTDCWvr93lR4/Z0Xt6ODFQkj8WtumEwHTKDLQejAfN3uds/dfjoQdatGLxb8jQBAYz6/boxiFgAVudzNIc2/s3xLk1szAORoB4yn+2DhaATAGJCtbpkCYq9+v4V+aBgAQ4i66XtaC85YkDog/zdZvzUgfN1N7a633Xqv6fe9msDIHfNaB6Ay2JRE1AHAEDIfI5nzZCLeN4Nbm9yaA+CA8XSsul6yqV0rJ2WQfr+splCyCYBR/HJyKX4phs0PKBZ0lqOYTpvniAiUAmAd+HKjo1cvDjHgr+3wPJQsVCymUZrPMuRsRBDG4AQCsunyJtFGHwAAIABJREFUcc0BUJlxQoH62q8ST8cggpKNAFRGwCD9fkuvbwAkyGgJE3C+Nz1P1q9/T3F1EZBxvZh50s6AEYC5yyUHXt5/Q8zI5/KrAmAIkkipkyGPYwXz1aRT8v5ZO6jJrRyAvKOvNXlLazsXs9bo/ztc29Pohgotp5J49Rcj/pzfIwGS//3OM4CNd1dpntQpFUmjEH4LYIgnyn/OLjL8FeDGhwJbNgFjI8DIEDA8BAy1PFK7FSKf43cNKrvHx+8C/vmxwMgmYHgEaA35J0StpvvzL/nP8RbLAfhyT207TChgDRiu/ZL9DsfWNABvYzbhCDBKoBAk/pEobGWTqp819hzQ1/0k0PoaMDEJbJjxVZFgDad0SaUO5LksWVj+XScDmw5UEUDJ6U4d0nVbC91S3ovfVHp5al64cgC+k7mZAP768KCA0WD3A/ieLz090CDceVmlAuhBljLgrfcAw6PAyDAwPFwBkCAbItM4a/FiNtERjBl76W9ffD2AbwJDdwFj+6syImRXrd5Y2FjIYcnzWPLEqnsfC0zsr6qBMQmfIDR/pyJ6xMhKyMrSDiKD2xja6TADTt0/AGAs1KcAUCFrOLF6tbtiRVFavT/wuMCa7MfVTlH098YBeBcwNAIMEYAUlS4uBULOmK3LCnwOPANlEIOSoF9+C4DvVoWXhvdWZVOYqWgi3vOXDUQhgieB0EElViMYJ08HxqeqnG8D4IIDkAzo51DKQQJvBKUmKACzbM4+5hUivwrgiwC4LzvjmgCh6nBcgiMTcv9Abo0D8E6g5eCjfpUA6AxoQIzgi8ALmWwC4z//DxcPPwBak8DQFDB8yJPpPZHeGCyC0KN5DFCByfh9/+OAsekKgEzCTwD047X0SCPM1IYQjCv2E/MJoGVwUUQoPboq0MdqkWVn7RtDDMahB4g+P6qhXFpjVtkDtRGA2nKjos7IyOyHFUbIrXe0FXsTuzIYfNb4O2M3ATGIYQOmPn6hG6gi3eUkQQAeAIYOAUOzALMVh2pAlESqGFBAXAYOMQVjxll03iO/yYKRAT0FQXkwZkjp1pz51LO2XAT3KtD3AIAwj4Wg05kfiuUHYlsXAJLVnP0INLM0OYFx78AzcRySeTsw2AJueI+Dj2Fne4EWKz5MA0MzDkCCkAByUWqsJzarEanzj2zXwjEGFHuGY+pYsMojzZL1G9EBexXou339IRBrC3lJGmNDuSHX+w7WC4Cm6wWxm8DngLTImgC8pBcGBuTXf/1fXnyTugnFwxTQOgi0CECyIFlsvvJfEnh0mhsYI/s5uxFYi1xZof7oOqSAawwYjRGBzYGXbtWXaCIrlvHUagX6SP/ruMVYCEbEqECXAMjfree2HgA0ESur1/0vtnNwGSsG0RsZME20/+/XWH6Mugk/yngPAGy5GDYALjiIHIgRUIrsZjM7Ax+BSx1S4pfffQVIep8dL7dMDsTGjJB+CvQxTHmdtrw4l0CovFruC2NOe975egDQsCXRK/eK634JhBK90q2C7I1i+Gt0jxF40k1cPJAB7UP2m3MGJAAFQrGei9iUTH9yBUDTHfU3B5+BOIKQ43BWtNtPcWIOzEZE8FoK9K0DCGNxLi3FqaKA9gTgeoFwPQAoI0OulWT11oEwiFz7cwbErzNxWtEYBB+VY76Vh4DWrH8IOoGQ7Ocg1CqMRLPltmxvs1/SHaP4dcAJePYyyUCRIzrTB8tE8FoL9DUMwl61kQQ87Rmy2PS2rgB0a1ci18RudEJH57OsY02y/+83/sZdBKr4FXQTApBvprGgQCg9UEAM+h9F6ugJDkC3gJPBEvRGrYoYCBX9IxEcS5K4i6cZAHIw8oXQ4mLBb35YH5d7OekadtTV1UZSjaEIPH4nQzYNwgjAHNwDuWGYpZc7lzPfX1cQur5oBorfzDf+zi0yVTuSkuxBI2Q+PhQDIUEnMLo1TBCZLufGw/ixbQa0KB8CTODjPohdY78IQmfDjmW7Yo/doAX6GqIiAtDHaYswSmeMubV81kp11L6hy2PdAcgblfslOKC1IiKRmyRxZgV/8++DS8BFrxXi5Hd/U6MeSKdqEsEKhpBRsgRMbAtuG4KU/+9ry5brzP/lPVMv1EPOQegharrVcgZUhVHFxNPcp9VFtlOWkL437C0WABWypFRGsV0sb5Hn2zYBwvUGoKl10v1knDgo0y7XA8Pfv0UACnjaK33Co9gJQAOe64FkNvtZAHQdjz9v2Nz2GSa3jYej2W3KGuZ9ixGdIVSoKT13B2s5AHkGheST6qn0erHv5AIgAAU+LVfw/wq3CEAV7clBKDDGZG9/5oVXx/oyYARczcqH5GyH8eFplTawFvAtrtXLGpNrQDGbejupB3omlIHQGc/ErzOcGSRs8zrhAbbuL1Tco/JfbLlNwHOmi2kIcs3owbdwNpYtynDQhsFcgvuG9/YapGFvYX22zZcAU0/GwA2LJ/4AmGF9mwEbBu98Y3cMF+uAGQCj2HVp3BbPuo3IlqxAy5wHAq4OfARmEBXGfNIBa0BIsG0ecwC67merHgRpZLwocrWaovuTxew/V0txJQ2DWeae3WAGbdhb2DB4+wRw7w5g8Qpv88liyGtoWHzMi4C9fAEHbBi8kwUKu2xNAdBxaGBLbJdZux1LwAGECYAEm6wyfpelJrEgFnRDxESwgyUxIUsVMwjVy5AYO0bG89Auu1/5BF38KqjBHlUAYXsteNCGwTeWNuwtk4JMkrlzGNizA1hm69g1Nix+zDOBW0aBeRZZGqBh8M4emfWNADDT+zqMjQyESdQFHfDbZECCLRgdHeCTe8CBaKJY1rDnBRCIAuGW4TYAZeFG8ZuMkGiQ1IEwGCJtHZBmy1obBsvVMnDD3jIAerti3LEBOMjGcOpa3WfD4ic9t6oveDtLfw7QMHjnH6wPAybW6yaG4+8D4HIQfvtDIVtLejpBFsVvUI7NIBHw3DUjRzL3rDVtsYPOkAScuX3coNDynT2VYJCkn+PjqvUD8hVbS8NgjphGxcANe8sAGNoVY/824BCBtIaGxRe8pLKZdpMkTvXiJ2toGHzSNHDPScAyq3er4qPyGaNc7JCRXWLT2TjwGmCOeQashq6+qSpZmp8vojQpheF58ncdZVjLnjWPHr4VWKTKxrHGUqq97qXu3jp0wPy+eEC/DYNZsZAO6IEb9pY9lNCuGPcNV830ZmkM9dmw+OKfbdcXvJMPdY0Ng0/7GnDXKcDMccBS7MwdKz8KCAKQIgY0MWGCtr4TOHAasMwOkTqf6unyuLykfd254nkb7qsw/iVg7jhgmSX31Vpd9yRHeLx+zRhjEGRbB6wDYT8NdymyubzDzCCGfpMJWfSRYfr9HP/aMgBm7YoxNQHMbQHm+ID6aFh8yS93tAvGQb7da2gYfPoXgbtPAqaPA+a3AEubgGU1RM6B060fgkRoCzj+TcD+04CFE4BldZdRc4/YxlxgjJMewSiwN1zWfsOngdljq3EmY08vm5i/7j5yIMqpvupKyGoNg9lngYosl9wY/0dZdrMzYl8Ne8sAWNOu2MA3zw/F2CoNiy99XbvftrcLriz6PhsGn3U9cM9xMODObQYWCMANwPJ49UliuW6SaqqBn/gGYP8pwPyJwNIxwDK76ahDeN6uXYCuYyABkEza4LbpY5WEWdSLxjF26/dQB0SJ6r4ByAN6NQxmkWcqrnQ00x1DEDJFjR8CcNWGvWVPp6ZdMQ6OVOCb3wAscPJ6NCy+7PerkP5Q3tBY1PrT9tEw+JwbgPu2AlNbgVkCcCOwtAFYcgAuiwWlM/XqDjMEbP9t4MB2YO54YJFMo/5gHIcALV1TRZ17FXOhPtvgtvkqf9H4kvHDlyKK4l6VzvVSBF22uwjOb7pbw+CfcwBSkyeFEHAUx/yw9JTyEbo27C17Ol3aFWNuAlgIn9QxO2tYfNlbK6MvaxeMRYquvL9rTcPgJ30TuH8LcHAzMOugX3QALo21WXBZLEHwRF1OgHS2eOgbgIPHA7PHAezNu7QFWFZ7JnXJ5rnqxHEulvlzwyVNN3+wern5Yovl7SXLGwvn4riLWO4fgMRJXcPd/+pmOymELEhRzBxJAo9gVL4kwVnbsLccgHEpWi3epocCAMeBRU5eTcPiy/6qtl0wpvhA+2gYfO7NwOQm4OBGYGaDs+5ExYDGgqP+ccAkINaVpB8GTv4d4OBxwNw2YGFrxYCmV0YxLNYheCXau7EhV3ga3Lb8g4+R45uoGLADgHWqhsBXA8K1AZADyRvuvtkBSArh+i9DsQhCOtf0UUgW/7aiYW/Z0+nRrhizoxXwFhyAi5y4rGHxU66qAFhT3rDSIVdpGHzencDejcDBDcDsBDBP1uX1CMJRwFiQIBzxieL3KIY1YW5MPOxNwLRb8gs0aghAss1GZ1O+SFHsdRPt0i/PLHu++dFb/x4mXfhcbWxhfCtYMFr/uWvKxfDaAcg7ipPCvFOVpuo3HrCjYW/ZA+rRrti6TS6MVQ+L4NPH2nx698GnXF0BsKa8Iab4dFZpGHz+JLBvApieqAA4J8CPOQuOBBAOV0CUYbIskRkAecrvAdNbXc/aDCxSpyT4CEIyTgRgneiLIp3nP6fs+a4A4N8B8/48CUC+ZGJA29fpuLmxJW+5h5kNFg2jiWHSi0r0Uv4pCoZsxw8DUfnhd4Vk0XGdGvaWPaBV2hVjdjgA0BlpkQ/K9bmn/HOVqtClvKEBqlfD4AtmgP3jDsBxB6DA7tdbcvYzJvQJkii2n4NOeMpbgJktbYPGACiF3wFoEx1ZMNe/4jnPLXu+KwD4t/5SO/iMBcXuesHylyACMBPDgzGg7opM8mEHIGdwrfGA1rC37AH10a64Yr4APvvOSdwEPOVbKxu+K2pdKRTmdI3dqkPPVgbSTBGAY8AsATjWniBdx0QxJylOFCcr6HBiw1P/CDgU3EgEIMW52M8YkLolQRddIN1AyKWiBretf9MJQN6HsaCPxe4rvgDdHOcOxDIAcmDFDXvLnk4f7Yqt63gEIB/Yoj+4p9xaAbBHeUPM8qF2aRh84QQwNQYcGgdmx4C50WqCFngNsgSvQ+Dxu4MuiawhwIAXVk1O+e/A7CZgThY1dcno1nHL2oDIyZULpBsAFTBZ9pjT0QQgn2V6ufRicS8QRgbs5ZYpEsENDejBfpoLrwAOjgIzZMBRZ0AHoUC+SOA56xJwNlEyTFw5FxBPeWvlzpnbANCdQ1eSGTRybMuydgMggVBsKmtYoC6Mt8znZxsZMLzAxoAOvsh+ydDqtXx4FIDl8L/omQ7A0QqA82S/ERdTI22mNfaTuBIIxR4BhKe+y61punQC+MytI/Zz/c9EuvyBeetLAfGZ5WOMZ9j2/gqABB1fMLsHAVBqhfTcyH5d9MByEdzs+B50Z7voGZX+NzNSsd8cwUcG5ASRKYbdHRNYwhhDIHRgGmO0gFP+HJh15jOXjnyKblVT5Cbfoq+yJOszF8P8+VnNPlICkMAzds/YLxlYznrJwIpO6egTPMqA5ZNDAB6iCCYAyYBcBqTRQ0e4630SxZyQJQIvMJ8mSeLrYe+p/GzGfnTpEIBy6US/out+K1wg+brs88rHmDOgAVCMnrEfxxMte1Mt6j7u9zzKgIXzczEBOJIB0BnCJoqgIfDEhM58SWzJEPGJe9hfVH42un/Mfxl9bgSiBySIBWnAJBDGEDAB8QWFA8wO3/a+wH4+rg4RLPYLul8tCI8CsJmJMQAOuwFC9qMI9g9Z0CxhZz65K0wfFBPqu7PEyVdWAOTHVlTcpxhXHZLz1w0ZA6EDLhkCskRf0sw4dRYC0PQ/vVSRAYPo7QCdj7GqVOSMeBSAzUzMxZcDMwLgcKX/zbv45SQlHXDIgagJc+bjZBqAWhUoH/Y+B2D0J7rFa6LYDRmzomsAaOeKqxEvbWacHQB08JkRIteSXiSBLYJOLB+X4xrzAzY7vgfd2S4RAKkDDgPzNEAIxMASSWF38WsgkuXLyXTRSRCe/DduSZMBMwe6ObTd8JBj24Aot07uDObPP9XsIzUGFPs5+JJ/M6oT4buxHv9X7BeY8KgOWDg/Z58GTC9Xq5FxTXOw9c3Cm6k5fPcjgbHbgAlvVG2tH1T3Oavoq6BlniZ+12n5u/2sDbOvasqoFg8x2Lnbcd1GdhSAhXN+7qMrAC4sA8sORJ6yHwD28z+Ft4fdv8UyqUDrDmCEBcpZ39kLS6aq9l4D2rLb/KYsFTPWdfbvh86vQu2s1K/K+zIjTsXIVQ9a59Egs4Y6sZfIA/EcSp/jEXv8BWcAhxaA+SVgSQAkGAMICcwVlNLlqTc9Gbv/HAA7MrL4+f1VlXwrUq7SvCoyGcrrWpGhuur2fNGYwM8YT67hT3s1LaZvqn5MLM0bzmHMmIFSgdFNj/mIBct63NhFZwEzDsBFgpDPeanNgATfCtGsX9TIKwNrg9tuVkhlng7TI/YArX1VkXKrEe1l2SynN1RCsFJsqnQv3UIMxhwIRjU5AGN9QUteVz3BUAvahuNgjC3HxLAND7nBp/cgONXF5wCz8xUDGgCjKPbvevlzcKUHH2ag6cnYzepYBB9Zi2FxDJdjoXJv1WDFiLJ6MKqKZUzoQFTfj2HmwTKcTpVWvcxHKm6kKgoORAEvVclPD6NdzLXpMT8IYNPcLV7yJGB2AVhYrAC4SNA5AxKM9ryDPE5fs6eeVKWGZ2M3S3MQfEyJUKV8L1ZpJXpVJ9pLilmlAxWkVJHKwIhjjD9TtVXVm1HdOy/pJiaMFRWM+bo0rWl4yM1N7oPhTJecC8wRgAttBjQWdBBGESwgSiV0Pb9DRgu0TY19N+M1mRKh8niqFx3rRDsLqjgl9yaGXT80vcL1wnE252PAZCzAHQCoiqoW3yYWFIt664fUpKaREr1NPakH6XkuOQ+YDwy4FMSwgU8GSRSz0UJx3Vx/5vFNbrs/EiLRY+v4ACITww6iJEodQKwBIyBRv9vwhKzUW6z66TUGEwhDS3ezqusAyNxnJn8xa1KRPSFts9YfFB/QDZcAm78CnDBT5U8rCqjfc3yh8Gn/hGd/MsKf1+QzYJ4891Jye13iy1cAE9cDJ+6FpYrEkidxDN3OtXR+FwBGMezoMmxJLOumAuD4J4rxJrfdH/XCoLGFVKiUbw+LAPQqWWaMMLrd6/+JycSIm85w9lOpt1j1MwAwFTiqAWEUxeYH5ENn/jInUVHeMXQ/f/jRePvCa4DhTwLHfBc4frGqqaNJzLPw6iZxV+HTplFGvZrXZT45N39+HW3TujlZv8D6fp8HRq8Dts9XIOR5YtakgBgdrrrt5Qsq8Ssd0BhQ4HMwmVitAWHAY/LbLDQNQDaTVJ8Q6W4qVB51OOqDZDPVB3TLOBepW5jmqaLbec3jGgBGMSxvvemDYkQ9GoKF1ShUCSKCqBeQrvmfVZPC1keBjXcCmw911tTJ8q5XgOLaQgA+x/OdWA2EGZ98gbjleTHdQHQN+2iwls3nK3/Zhj3VeQhovYzdxmArSwQgDRA3QiSCJUrTnjfl4KozRCSCCeYmt90EoJJbVCk/1+FiCwFZxLk4dRfLFia6x8LbYkD9v9cXtLG6+O4AYQRfrgPygVIcqyhTXcWFOJH8fh3rz7EKwnUArq8mcGwK2MCC1i7WY7Zenh56feHT/jE3yliE4TZncd636gPFCKWavGhcRx2J+cvs9MlSw0Ty3cCm+c7n0G0MExdW4BMIbTXE9UCynvyCCX+Ovm4gbByA/xisVgJPpXrzLj4EoRJjJIZrWHArS9iprK+KcefgiyB0XVKGjOmCmW9xhRVMUSyRFnNeFGEdI2q+/HFXclkp9WsAbgTG9wGj08CI64WxRk/OTDcUAvBHXSLQxcVCDMQSWbzv+1e7WVbz+k5w2tJtsbcCYV6WJY7hmAsDA7r1Sz3OgOgoM+KTOJbcjSI5yGIaNE1uuwlAAU/MF+tF5/0sIghVLdVdM2S0bSzHx2Mi+FTxXf8X925NC4BycK8QwfmgVX1LlcFiykEMcL2BndJJ7aQfijKfxLGDwAhByM7aC5U4qwPzNwufNnNuOH4VZaCPlPo2AahqFqoPVFc14ga2m+WEEL0cAz9kdPrOmMu8r1o/rTsXz7f9oswFs+jO6LAqkvC3Ggg5Fg6mwW03CUI6X12h8lyfcz3QHqr3DIl64DbqaQKc9mI87QXACD6vpJqY0EVxz2CEyCI5eMSGX2e7VtI5J4yTRyZhscrvt1nQuivOAaNLlYESwcySgiVbr37Bfd0/u31yEgg2FVaiPCeVOguqAfGov0iR0R9JABJ0bnwk9nMxw+fOh55EbgRhzozrBUA1polN9CLwok5HEEUQBjFMQB7D+j656PW+IrJ8O/bBCo4sGFdGejqiyYCx3mKe9/JtTiBvmI5OFiTisg9LtJFF7gZGDrUbHKs79+hyu5hSaUvh1foFr3r/6vZJCiXgCDwVVFJ7MVmRLsrGltuFCc68yFdACMDAflwR4QM3HPoKgIExt4gz42SuaQb8hBOE2oZmlu+KFlKR3QSssMJxDPWbbjpfLoJrxG8CYT8MKGZSVTCxYFTIb84nkCxCIPLDiby30gXFghaF4c2ReR466Uu2fvoFr3r/fKAEFxvpqMcd9yonIrkuK5LLV7MVCM+/uDJCyIC2J8a0z1iwqyESgMl15Sa33QKgmtPEBnp11mwuXgO70Ud4DHWzfgDYC3zBEOk7HlA6XKyHQzb8HgGoCSQLqsxorIy1Bxie7Wx0rFaf+wr9Xv32C+56/7HbJ5VHtRYT+GJrsehHcya57PyKAQk6+vBkBZPpjPEExlwU59awg3C24W6KBsC6tqHR+MidyVG3i3rdAnAsH2T093XT+zLr197MTA80h3SfsZP2UqpCrPQ46oF317VrpeiKXTJ9MhMLkgGdCacKG/mupV9w1/vnwyGgCDCKWzJe3lqsyzLWZWe6/kc/oKzgKH4jC7oolhdC4jiuzM0WPo+cPQ2AsX1obFCTO5Jzn566PwbReiwnfTWjI4KvDoh1juh+aT+WKSYD3i8Aql2rJk+VsVQly5kkddv2FvHT61icqO7Fr71/IkLNXOi0FQjV0046oBy6wZ922Q95ICqDEaL4XWw3COcf9Mw73DFB9AqE6wZAAS8XuzGQIDKf+oVkqxt00ttAc+YT0PJ9qRFSB8xoye5Xu1ZVeCSgCLbYLVNswoncHxoeLwCzBGjBNki/4BX3z9lXgUCyIIGmhova83cRgO5Te9yLgP3MfmsBS8xs8/U67ePQOqy9umBUruDchqo8sHSd3PMfT5ifo+ack8eFHI6QEcnT5GvdOnVdXof+ptJ+BVPWceiaRHA8Us/nkACo8mzqlqmWrbFDppT5A5UIZm7CPA2Vgm3QfsEd909kKIqB1qJAKCBG8ZstZz3xHOAAiwmpDIdng1maZQAkZzsHZ537YfQrwNyxoQ+HakrnS0h1mUA1C96TdJTmORyhC3oeqdwROi+GDhkFI6bYNrcNDEDeAkXwQizPRpmnIs3OdqZPSaRFUcbchHlgie6agq2kX7Dd/+d8lUJVXuUzk8ERmS+2vfd4uvN2VOV5rSwb0y3JhgIh9wJeN3YMQCIgR78Q+nDEVYBYZUrUpbXFnM7COSdf7N4IPvtDnT2BY/h8Chh10MXQeYGS+7GGjaQiABpuNIFiECnzdWJMIUHcazLptC7YivsF8/7FgLFMqpiQL5TuNbKfA/DC46rqqAbAwIKWK+timRUBEiNGsOQsyQm+Gpjd4n046hbT84KPuYjOmHHyp92gcgDS2OoIuVIeh/xyUkaVwyEWdLrewHE3uBUDcKIwnq40HpDXL+n3CzbaKdguel5VnFJl2awaghLQBTzteZ0cjLq2A2n0M6EPh2pC57Wg41poLzZsAZNso0Hw6eVR/J8bF9YjWGmVCpGKwQLBRCcrbiSxNLgVAxCF8XSl8YDHHFPW7xeFBRwv/rGqOKUBkODzqgdWPYAM53vTASMQu4Bx9J+69OHIF+N71F1O1gUB+AsBfFqKC+4Wi4BWX+CYgOTAU36wdMVNVKka3MoBWBhPxyiuko3xkSX9fvGMkqsDlzzHC1N6SQ4DoINOe7KelWWTheziObeKCdARApD1AdVnRH048gKUAmAEYi6Oh4DJV4VoGDWqjq4XLbO5o1jBoimEPhPJmwu9FvnTLgdgYTwd2wyXbMyRKen3i2eXXB245FlVYUpVxUpGiLtmGBlrTEhVUwV8dEkVKAq3MHJ1uzRbRx+OOgDWFX6MsXJU/36lJoEoA2AKvw8+uwTEDIBbStdOs8ddDsDCeDom7ZdszBIs6fcL9ror2C75US9IxJJsEsHdGFBil4yYuUwknofJgF4XcEUfjrz+X7fKo4EJJ//PkMORO6FrVjQMeL5kJhZMMXzLwNZCt1nzDFgYT8cQwpLt4hDON0i/X7ys5OrAJVe0S/ISgFY7j9ZvnQ7I3+lyqpYaL98CWp/N+nDkZdhi6bW8An1kP3fRTLKVWlwF6RZCH2L4zDDR0k1IqeTNb2OQSYNbOQMWxtMxeqtkY6I+ny9VEz6btfb7xc+XXB249AoXv85+tIBVgJJ6n4lf6oV+mfjdDJNMH0wAVFX90GMk1f5TxlS3Fggh92DyN0IORy5665KIfCktsl+K3VsGtpVOWOMiuDCerlSnjQ2rB+n3C+pIBdulz8wqonrNPLKgwKaC5B3s53qhXVq6oDNg6sOhqvqhEr3V2VNLBjmnSSNdrOLJ1zkAu6VPRjFcFz4fXDJ8i45hG94Gt3IGjOFYA8TTlQZ/qGH1oP1+8ZtlT1MAtHK8mQg25zOZUSCLIliWcbw8wfW5Ln04ssqnHX04euiCk6/3de66MPpuAQVZAEFkw2MKFw6a1wEL4+lSBvmAOMhD8vkOkFX77feLNw14YT/ssmc4A6oOdHBEkwXlgjH2k4Nal6wB4fIuX9LzZjAmorNeHMo5Tc0OewHwDTUh9HXxfGJsYkAbAAAgAElEQVS/uvCpoAcew6zBBrdyBlQwwoDxdLZWXLDFkHyF8xGE/fb7xR8XXByAAVC1oB18HQYIT+8uGfP75SCUs1o64he8v4j6cIQ+IqkPhxrBCHjdjBH6AblQkAeY1ondukSiELmsUPpjbyp7XuvDgAXxdNZVvWCLIfmKg6Bbhrjup98v3lVwcQLw8gqA5v9zC9jErutltg8gMxDWWMBaMVkmANWFyEV6R0uH2I1IzW7ypbkQOTP5f2ch9KsFkwp0kQlDAOmxzHpscGuGAQvi6VD4RgmAg/b7xZVlT5MATNXwqQc6KGwf2U2uGV2uzg3D4ua7fDnPwZcKgIdq9GaIBPZb0YdD7hgyIFWMXiH0eQ5vXS5HcMkc++9lz2t9GLAgns7KxxZsCkgdtN8vWD+vYDMAUpcja7lOR9eLVcIP4tcuob/3AOHCdW02VTX62ApB4Mv1v24gnPy9HiH03fJ366KYHYTHsgBBg1s5AxbG0+HLZaOp65i+ln6/YM5EwdYBwGj1cmUkE7+8THLNdAHhwrUOXtcrO/pwhF4cct2oN68BMDCfmsJM/n6PEPoYPp8bH3kCkbtjji2tJJA962YAWBBPZ0WBCrbYsFoOf9pDAiENk179fkuvf9nTXewKcBSjsn7ldonWbgQpx+26otaLIwAlfi2QQSJY3Yjy5i9dmsFM/oEDMM/Z7Uf0RiYUA7J+ToNbOQC3e0WBBm9qLad6HICG1ZK1XB5PoxnuOOIcxSXe/Of8xHV/P+FpwN47gKUpYHmuSve0pKZgCKSq5wqniWE1WZz/xouBm74KTMwBI17lVBXwtWSs+8/vL45Ff3vhpcAnvwos8d48DZX3M2hx9XIAnu0IIO0chu35AOgLL0yuG/jOmwbg028G/mNz1YWdETbm4I5BrFlov+EtD2wIo7l+Atg8D2xY7iw3V5diEqO54mnj6XdMAYcU+6gon7A3NSO2qFjlyZYDkAX6uD5Iam44YaUfVNDNxaJcLIPXcGGpfi6PnZdVD1wPspQBX/wl4OaNwN6Jqg+xwrxslcVFuYJblehkcYYZGPS3L20BxueBcS8nwg5H5kZkx6TQSbXFZcCQKadx5Cz5mPurAFxrRaa17pAR2PFC+ElSHKQ/0QjQcgCyGyM9v3SnsDBRJgL6msWCf6IfWeUJac8UFlpY8500DcCfvgb43hiwZwyYVhd2D/VSrKGAmIDnBkiafEcN9cprHgKMzgNjS1V7rRjRlceyrqif6KAkMgXIM+6tAnDl+zSL36O9+U8p9jGHQo285/2XA/AnXeNnKAorDXH/AILwbSvLEz6Ql2+cAf/3XcCdw8DkKHBwpOpFbE2wadzIdyh3jjNQirYWEwYq+/zJwMh8pf+xKNSwM6DZMmzNRRbM2K+2Ii6TlFrAWfd5V3i/F7IgT2LBF5LbIdkqxLPWvtzlAGQ3RpU3Y7AiixMxLOUB2t7pKQ8M0qCTnp8HkojJgNqaMEJesQv4AR3Iw8DB4QqAs+6SWRiqgJgY0HVDAdBA4Ba4xN7ndlSFAAjAYX4IPO5dBDMAdS2i+Jx7XTf1eEdTDfgAQnR34p/wQkRmjNAoByDT/ugFphXAmjAEn8qaPQAgZCs0lSckCNmVigEbFMsPBBE3DcBX7gLuawH7hoAD7EM8DMw48AhATrjtQwiXoqkTEwWd7LOneXNCbz6Tiq/TInb2M8ZzIFrTQbGiy92oGz7pXl/7jvdAJnb2470IbB3T77Sai+hyAP5voTqW6sKwFAc/TAdc5+3dvcsTrvPVYSK4SQb8xV3+6IaAqSHg0FDVh3iOIFTIFxtit9orL5Z/LD1Q4s+B8OnHVuXwhhdd5DoLGsgCCJ04q66X/Ju/vSaeAxDPvbdtmdtKDV90gVEPIl/xySkviOhmAEjrlzSkwj40SlQZYZ39I+8JBMx8mZryhOsKwqYB+KpdVSDFvhYwPVR9BD7uyX4SwRS59nNI+bRck/DzJ05v12M0nY8fAk8iWL5BB5qASPGRCi8EVjzv3mqpkC9ACrrwhKukB67GhpqRRowQMqCiYbj8oOoHeUWpdYIBAUj8c8WjrjyhNIJ1unzjDPjqXdUjJAAP8TMEzLYq9uOHICQALe/EwWe+QgddAqCzzD8+vgIgg0qp+5nYjaDzCgjmnCYone0klqP4JSgvvK+6LoFPoFMlkPGh+0rPWta4RHTNJJQz4M8EAGoNTPVU8opS64CC9zoAWTFChcq7lCdch6s3L4J/2QFIEBKA1P9mHIBmhPh3Ai354RyAAmWsR/PRs6vOR8Z8FMPS97yxtIlYgVB/I7jC0rIKSfLXF1EEB+BFFjQ3jCLA49OWsRTTEPzvzQEwry7VrZ5KwzAQAPssT9jw1dcHgCrORQCS/bgn+1HsCYQSveaHkzvGv1scgU/6R55Y1YIxhvOm1EZekQWl8wVDxJgwc88QiJc6AKX/meHDawX9z16M/Em7bO8Q08GBP/jEkAEVjMBoAFWXUjRA3KtNwOBXW3EkAZhrALktpC6lKtTV4OU7RHB+3kHWgv/zrnYZl2kCkF4uF8MGQGc+MqEYUCA0n1tkwxbw4ScHAHr71Q7W4++c8czwcBAmHVB/c7Bcek9b3FuwbdD/kjGWgzJjQ3thGmVA3jhfOyU+RxB6FamOFp8NrhsTgLy8Cpzm5QlVptAU+6CiNgXCaIQ0BcDYV8b0P4pi30vfIxD5+w72C9aliegW8MHzqrmh/meuFhYi0pKbs6D9fsh/n1XFMrYMbPgUByCZz6J+uEknDA9AornWFRb01WZEsACoHhOqyC7wdetT0QAK2KqOb5MCUvPyhLE0oQxzqaYNXL5xBvyVXe12vByLADjXAvgxBvSPGFGMIjCmJbEW8HfntxtQmxT0cmxp9UPAdKAZ1upA6EB7qgDo6oCUxXRtPVSpAwJpnUhuxAqWCCYK1MBExZljY5S8SYr+pxAFAuBayhNG26jw8usCQLX0SAAkwwcAEngyQizaXoziIli+Oe7/9kJvNk1LmBMe9ECO3XRB7aPeF0EYHNVPdT8gj016YBcWtBfBVYJuz7mF7VgGY/pO8f5WdQ1/7U67nIKNS7j0wIbDPFZsyNHHY7od/xdlEHj8CcC3TgCWHgGAPSxiSdt4312u/8SPAl8/Dlh4pDeZW2PD4J1c9+uyDaIDkgEJQKnTfG/N8nUAmu5HUnMW5ARbPfEuIHy/ACjRK7FL5pOR4RaxgTHofKl8r/S1ZWBnAGDKefbn3AFIPRPXB7sFiVQimKVgGdl5ooNwLQ1/1U+DQGSXQ9r5Evy1q9rZbP1lGQDZsPpzI8APHgXgod7qUx11YtBbFzC+/C+BL7SAWwhgdoLkONSLqy5oLogYft3ZI1F7EAC+phsAnekokhP4HIzml/PvthQWmPB9LJ7jxkcSr14jWj4/0wFlgJD5eoDw6fe4DzAYPHokWhHJZ3TFSkn4h7YOSOBwEtiMTv1aY0uktFYTmI2/43EMQmCuAJmUE0gmVD8EFdPpdnxhVhqzDr8F4NMtYM9Jfg98EVTeNu9Q2OFZBX7vr9vtgm/lcezczZ61ZNN8DCvilYCdPXqNDQpAlfGTKm0M6AA0PTAyoMSx64cRfPQHXsniOTI+fEWDFGp+Qb9BeySRBV2kpl0QxxGAlHDmkI56X6z+EP7UDYSdRgh/IouwIZ36lHabBE0GJ0r10Rgb/xA/tt/j/6aMAf+7R4CxzuBXWRGULwBfIrY6UNfpvLae7n0I+LO/reoLMqiVMbW38oUhkNkQIzZO7tIweGePcmWlAFTjAYHPVGwXxWoLYblEDkLuTT8MDPhXLJ4jALpaJB+ggU6xfgJknT7IKXIQXh4Y0FZCog+wxiUTwSkXUbSMV1rB/A31OXWuFpPUda/mRHKi1e6U+hA7Zq7l+A+UAfDtHg/LrptkQpZ727cRWOL9542Pa3rOvuOqagUltgtmJM08j4/PILbIDKz6w5PAHsbraTnMGdZWIwIzxIfeK0rn578J3LAVuH8CODRahV/FFQ/1IumIvXP1QudNfyNT8oVqcHviPcBd48A0g2RDuoDqHdb2SalZAdG9dnfDkAE0gXnH5ijWCDbKCq5/MRiV0QD8HgHQ63jG0hdsLGxA3x9Bw1Asli7hO3BwApgng/Gjvq01IHrXJ7q3Cz7E++YziF2rs1ZLZ+8H9jJsSoECWXj6igmR87aLgfbGq4GvbgLu2gjsHwdmCEIPSI1h+SkCRjpfUC3iNWcpoRrcnrYbuGsUOMBo7QBCxSTG/igxVcBIVGPWM1h1JYQPnyKNExGZMDIJ9b66eEBGxPDY1Y5nv+GCjfGAxD+DDpiawphABWZPjwNzNLAEIH4XCH0M7/5c93bBfI8Yk2cgVAdvdT10ifDkBWC/r9lGH51NhIsnsWHOfPmEUKT94WeAG8eAO8aAfWPAwVEHISNQlKQUglJjJExqC+H6Nq93kOpUg9szbwLuHa66QzFWkaFieXxi6hgVHOMCYGRuJ+5V4jYJIDKI9KlsAvFDq8QDrnb8NWVPh9EwdFkQ79TlSMIsN0Mi5s9MoOGno4U6f3YAvefL7Y7rvdoFLxOANSA8f7xSgWmd0kCQbmZ6mTLEnJ0UqWLhUkxlrBn6n3wWuGkYuGukCsufGq2iojnRFpafsU7MDxErJuZhYCsJosHtWTcBe1oeq+hxigJgXBrMmTBPnJKLrr+VED54ibHYvZos8sO+DNcrHrDX8YVVyglAKud0LtMjFPtNMz6QLDY7VomLJd671AEH4Xu+3g7nWq28ISvX58/hguOBg8vtFQvV/hEzxfqOevuTfpjri8vAWz8L3NYCfjBc6ZYHmBcitnFd06pxyb8W4gPlgonBqffTtdTg9pybqiVNBssyUsdUD7eGO9amnf3sXtxQipl7Wg/sD4A8AwHIyZMYky50Tp/xgN2OL8y051qw2hXzwRCEdT2nmck1RxHG+w5jeO9NFQBpR6ldMIMXlFWgVndqF2dVFsJzuOgRwMElB6DcI6rznemD0RnbwQiSRS3g7Z+tVIl7PC9kahiYZm6IizuLigliT/VoUog+p8P9l3wJ7qGEanB77k3VczroUToWLCsABud4ypaLCUoxf9i/9w9ADiICULrQRWuIB6w7nuZrwaZwLBGwClSqSyz3AhHbaRGEFGOmC44D72UVgjW2C2Z4lIF4ArjodODQcqUGqAxfcpG4mJVuVqcL5tbs2z/veV0tYK/nhTAqesYNHdO5PCJZos+WuzxHJIViuXFyJxupNLg976ZK2lizUKodilGUgzyGhokF8yw5Mf+qRkjdjfuDtwkkm7DTkNaBaQ2ox1q3eMD8+B6O3H6em8Kx1Ccx9ptWl9iYIUAAWrI3I3nHgPdOtsO5eOuxXXBdj0V1vOL/so3Cxef60tlSpYwveKf0pAu6ohfdJ8k4CUqgvr5jV6VGTBKALeCAh+VbZLTnh5gu6D44A6H8cVlkNK95O1WkBrfn31R5HSy+JCwPplAxRegE/2T+AloGncNmbQyogUQx/KwB4gHj8YWNTwRAOW0FIIIndoqNkTAxz/bd09XDGLBdMM6/pLKi5whAX60gCK2ujxzEAqGL2pQ1Jis5AJEAFHvTujYAKjRf+SEugm1d2COQLU/DAwQ44caEw8AtZzSIPgAvuKkdrWMM6M7xCMBoiBn4YpCE2NCfxWAA5MEuwvCCEICwlnhAHV+YORfDsWJGgPpMKwg1b9QpFnzHbD2BK2JGul9s8KkYW17vLALQRTCBpzXZpS4gtCXXMAkduuAy8E7PijPWprXJ5CR38ygw1fJDohh2BlRAgq2OeN7uTWc1D0AFNtmL54ESBsCaJcLkDajxj5ZXRiCIGA0waDwgjy8sk5+HY+X9ppUbJSCp6TnFCMXwny1WAFQ8rUAc2wUrRL6mXTAefWnFfnz3FpbagQKLAqAzoZjAKkkpXkNO5GCEvOMLFXOnnC4xIKOjnQGNdWSM+GqHQGd7JSsxUf+JzQLwhTdV4je1nQvr1MkPGtlf9yP2Dy+gAqZ6rQytfvdHSDxgLwBF8AmAYjHWluEDiKGMiqOVvtejXTBOuRSYJwDJAARgZAGWL9Nk+IM3SzgTydE4eec1nZHbtDaNAf1Dpd/SMx2END6kD0oXtFhBXmcY+OY6AFChnKnzl7NfdMR3qCAae2B+VVMYXASvDs3/X/zHJZcB84vuiqABEo0QPnhnwqQLyRURmZBPytnwHde0M1vN2lR6picoKULaxHDIEdHkW2iWg4/7b5zb7DSQAVd0/griV2JYojfpwRGEYsGBrOBmx/OgP5sAKANkcbFzNWTRnX/GSGImMYH/LYlk+gGvdT+bW+SWH+Ig1GqL5QeTtR2EYj5LVHfjw/ZDwL8yJ6TB7UU3VVoTjTYxYDK+Ivv7dzNAZIxpZSiU8jjKgIWTcykZkBawDBBnQdMr5QeTKI5iWCB09AmEb7+ucnOQ/aTPWn6wuzyS4u+R0Ob6CUGqJpIDA97AdqINbgRgBJ69CG4Jp6q/ckjXqB/RKla4WpkO2ODgHoynigA0JiLwaNiEt95YQKJ4FRC+7brKzRH9jZbN6iJYuSHm9I5iOAOhHNJfZkh+gxsBKPbLu3+JgaWDdojhMO5kkDWSlNTg4B6MpyIAjf3IggJgMD4MCARjFMU9QCgAykhSKnUCYHB9JB0wy5aTRUxmup4h+Q1uAmDs+hpXgFLnB6ULONOn5xACNJqxghsc3IPxVBGAiQG9aLeilWUJW1FvVXEN0TKp1C6At19TMSCBpz1dHtT/JH7N9yaxp6QkF73KBxYIr10nAMproB44qQGTj6sjUrtOFPtLeFQHLES9AdDFrq1E6M13MaxVCTNAXNFThIylLcor40zxtgDAPKuVwDMrOKw+SBTbtR2MND7sZwC7Qvm4wqHa4T/uIrhb+7n0EgbQdTijoyg+agWXT8llDsAFWr/B8qP1K7bT0pvtVwHhW6+t2C/m8svvZlawi2CKe37nhFtapkDnILRqBQA+v04AjMyn79EIkXO/DnzyCBwVweX4wxs9B4rRZgyPVFqykgDd+5JSpBU5r0vHyHz+jsc3ub0KABsZMCyQgeExKyFPVIz3lmcM6OfPAGCADYPE67Jfs6h7G0o+xvi7oyK4cLZfOgpsXwC2Lq9MwuuVERonKn4nSJrcXnQKcM7dwMMXgYcsVxkSebJgzOWPqdB1ad2f3gpsnwK2LXWeR9m3danUIV1lBSCPArBwtp+7DThuBti6UDWDmWA/DvXk8LRptfPtNUlihYZTOPCi04GH3wFsnwGOW6iAs5n3GeJJ+KLoE+9VDClQ8R6vOQHYegDYwuY3S6H/iJ8jb11ck0q9Qhoc9QMWgPBZJwFbpoFN88DGRWBiqQIgWyJY3lPozaGJ1KTEPh36zpTkJrcXPRE44S7g+Cng2DlgyyKwaclfFoIwvCwx9Zn3Q1DmIPx/2/sSaMuusszvjfXq1ZRUElJkKsBEGQyYhJCBSkUqAW1tsBdpuxEVaBzowXZqe1g90G2LotjQdmMjKqtBxQERdAWUAkUlZNBGkQRNyIAEMAkxpFKpqjfUG3t9//m/c/+737njPq9uVeqcte66b7jnnn32/s6///3v//++Tz0dmD0KzC4DM6vAFpd/0L3Gh6yTDgnvLwKzAWDGiH/ThcC2OWDrErB1pRgQisIQhAa+AED+HEEY6uNLyrRnZLSl6tSbrgLOeBQ44yiw8ziwfaV4UGbdegmA5QMTLFlqsfn7XecDW+eAmePAltXiXnkuZSBkRcm4UGXtU2uo3xsAZgz6y54JzMwDWzkgBOAqMMVBCSAUObh8QuN/CiTgcWAuyWhL1amvvBbY+VgxbW477paa7gIBqCnUrbUBiQuhAKDUot13IbBlDtiyBEyvtO5VDxvvVfxW/JkWNFrCeK8NAGsY7BsvKQC4hQCkJNaKy2LRIsg6SJ3IQSe1onKKC2CsOYMeN+0Dtj0ObDsGbFsEZmWp5S74g2Ir2uA22BScAJGA+dJFwPQ8ML0ETAUAkgDTPq9zdK/+sMWpPF19NxYwA4g3PtsHxAE4SQC6FdSgmGWRRIJLZJll8EGKjHiX1jwaN10HzD4BbD0GzC4WrsKMW2pNobZoCu6CLCDfCTqzgg6sr+wFphaAKQfgZHKvpRSYg7HN5XCL2AbAZwPrZGaj6ippXhgn0kqmU1woxnHedg5AATuWHig2FE1uVRwoxoX+Wcbg89S3AqCKPONcCi8oPtVP+9++G3j+oSK2xRBFDElUxbTS+3nvc4FpDsjxllXQoJg8FgdCQoGJJTTicLcQ6vPL6wbg9cDM4cJv27oAzFA5ky9/UOSvmg8oP86n0dICBn25JwjARWDSAUgBHN6vfdbv10AbARh8X91vDM2ss+NvAECKPVLCsHoyUgRqrlbnRwB933OBc+4DXrIC0IEmiLnE75di8HsyAcjzWUVGUi6uICMpVwwJVMXdeOk3XAxc+Hng+vV2esAYw+sWoP31r3eLcLwQBeQUrEHh4Jo2h4vDmJPuAyMLGAeEn7uqbgB+I7DlSWBGCwe31Gb9aL20kGDb/EGRxY6WTz8f2wtM8l4pgL1SgM8esHCvsuylME4nn9cfQLtldg6TZ0kUKorAfij23vAPCmqp3fcCl60XFINid1PlZrf41/dnApB6wSQjutUfIDJR8CGIQOwWEH7DywpKrWc8CFzqRLHkVYrB2jS2FQH5vkuBycXCAlIUUAAkCM2iRBA6+ARCe7DjYmQduLYTleiQ/XTTS4DpI+6nLhZW2nzVCEBaMLd+soIGqjD1ampdugiYWCpeBKA9bBJC9ActAk8LES26SqsftInLZ44dQif4Igdhym5WLrPDyuYH/7HTCNwDnPko8LXrBccjQaioe6BiKad3+QY/MGTH6rS3OBvCnQDuAIyqhiDkQ9RX+29yE3on8IwjxQPI8zkTiApGU3oVkD/4fGDieAuAdMw5MFQjEgg1DYsUku+a3uI0TGBfV7PotwHwaOEmbHEATvuDIutni6UAQoFRIFRYhfe/dhEw7tbe9Of0Si1g8HkrwRcevDajz07gIJ7n05rYyWIpb4ya/7vv8PRdFpj/LXDmkQLAnA4jCCOlTBRN/rFMAJKgkkVHpGUjySSBSFeg7/azqk8EgbSEq8UDRACLKDXSyaQ7Br//DcA4LSCtwnKhTEkQcmAIQhtM+Uaajl0uS9NatITXWzpzfcdNB4DpY+6nBgDaCtanYLN6fCj4u1ay0QIqtML/EYC61wSA9tAJeP6eWsAoDysFpg1eB0HIQRCIIkVeCqQf/05P3WCB+UPA+CPAzvmCaFWDKEuYcl1yMN+Y2dckqGTeHPEvvWDSNhOAfbefX0A6rS8CUw8X9066bFIfdqMHJID++DJgLACQumyc3gyAEYRRKFCLD1eu5ODLF6QvXedx0w3A1BwwxdAJLTXjd8seQnGrZ9bPFxLyA7WIKON63tYtCQBN/sv9QPm6BkLp0vl9t/m6ietR6fbyBA4gnXtORwRRpNnTtPpW6gWLH83lKqcOFTEnDiKtoHwy8RNFhrefyeztbnrBfbWfgttsP+kIyO32ELD1cHHvInrlvWs6TsnB7qAUlg/suFtAWkE55zYQ0QpqcALoNCXTEt7A3KoaDwGQfqoAOEUBa7fUbKctltwCajVbxvSiyvoasM0BaBKwwdKb9fN7NfcqBWGiSWykWXER0umeacUEonQgCKRfIgDFjya5yq8Wfsfs8dYgiuMxgpAg/vnMzu6mF0z6Zj5APdvPQec0TEosnvQosGOhaLuIYvnwEYSithE52F1XFAA0p5yigD4otCqygFKnpHUpLYP0OcKURYv6Mj4MNR433QhM0gL6QongawOg+6rl9CswKoSkEIxPyTsuAPigCYBmAXVfYcVf+n0SRYw6dP1YwNgHsgSajiJP429RrpWOM6cxDiJB6NINM4w7LbUGMQUwB/M9mZ3dSy+YVG0EoBiDBST5ddZ+PkCsAiIlQZDa3LVatJ0WXG2PbL98AB+4omB3oP/HgTUhmGgBfRqWf2TTrUSjExDSP/qWzQDgfAFAWyzR8rkFtDAKX75jo6nUguZxZ8NByHbvvqBQ36T1swcsBaBAGGRg40Ir+rt9WUDhQ5ZAU7Es2e9LLzglqHRxNkbeuW+oQRRls5jaMjnK0a9ecNf2R4LAwO829kQB3LTtEYQPUwzQAWgW0AGo8AQH0ljp/V17pm0KRcEifGuNOnocO1rACQbKPXhs8TtNwVr5uh+n6Zf3wDgu29g2FdMtOc8B6PdpFj08ZFrplw+ZA5FTvAQQ0/BT36FPDkRqBT9Jag7xYlQItY0f88j78sZzCcKPZlrAQfSCK9uvB4h577SCotUiEJ8opq8IQFl/PUBPEoBLxbRE62LSqG4dFB8r5bHcOtiOQSqT5T7RKzYDgJx+BUCCTxZQCwhaQc9oKcEnEBKknj5FsJ1LAPo9xoWWPWDy+6IIoqbeaO0VA+zHB0zxIQDKkn1GgtXiRxMIAx0Vn0Db+lkuFjLRCt5WEwD71Qvu2H5OfekD5FaciQay/GIbFgBXriwAyGmJADR1ck3DwTE3TQ4B0LetzBJErTYAr2BBSI3HTS8tLKBZPo/fWQDZp197Z3scjGb5BDp/L3+njMweB6B83Gj9wj3atOsPWin9WgXCFlVO/3ctf4iD8XkBkH5USlAZlNPZAQqARr5vxu1yjmH0givbX0UQKI63o0Wun/xHuR8E4VnPK5JQLd4VNttTBvK2uoiKOUf/f+GjwMNBh0NMV6J0c0NpcRv7mrYv3kh8/uHxYp+bVpwLp3R7sts2YzouSq3KGa+q7+x7Co4nazAerRKsVlV1QitF59dyyFZaYY0HMu9mWL3gtvZXMbymBIFMZ1ov2h0B+LTLisxgW+Eq5uU92iZ72ud9vvR+4JFp4NjkRh2ONi0OB1/UBCkvEYRhfuNs4OmhhiPKnFQlx6aAjMnSXJUAACAASURBVPjmz1w41nnwO4cCIBvBwZgTAOUHRq3gyDExD4zRGVYEnpm5LqmQc0M5esFt7acFl0SlHiBxuTkYxxdaihUC4QVXFu5FCUD5QtJl85sjGA0ziQxqeu/fem+hw0F2fLLQGxFlYMRvo7v1WmIVtpt1DFkXvOR7LwJ2HSkyoZmEypoVVe8p7b6qEMnidGG/Vl/L2aPOIwuA1pAIQE3DAmFa4j9f7CPaFpCHKujr5xzZesGdHqAqKz5X+FLRAl58le+jui+kTBALMcgZ73CDBkpN2/7+bfcWOhwUyCEAjQTcAVhKdjkPc2RajewKyu/n1//qJcA2uhBMRGXQOcn9U6JIOjXHQqSYOsVoQp1HNgAvz8yny80H5PVz9H6RqVd849WtXQ/zA0Ow2ayGLJ474L0G79vvbulwkJi8BGCg4S01SKqofoNvSIC+5zkhFUupV8rUTpJN06KpaBkFQm5M1HlkA3AyM5/u9Zl38zrk6f0iU6/4hmscgK5ISUtCTowyDqb7UxwsqFJW3fo/vbuIBJEZ1YRgyHwQKNi0KEl1OKTCZJdxtPDn//v8ooaDaVgqFyiTD2IKfcjZS4Fo+7g+HXOPv84jG4DIzKfLzQf8KVfI/FNKrQ6h94tfz+vOA9cGAAbrpylY2SDlVTTt+uCnV3/V3a7DQQAysJAwobZJgUXi78Qayhd812WeiOAZzEyUiAkHMeu5BF5FwZQAWLPwknkLQy9CrPMy8+lIHZFzvN3T+YbV+8X7c64OHHix74V6zIxB+RJ0wQ+UU992tYoFy3fcXcTDxQkoPsCUhFIczKVCegSg5B8A/PILN9ZwxBSxtiKiUAOi7JW0dLTustF8AGbm0/1o3vjjnSGdj+lYlGwdRO8XN+c1wABIoHk6k61yuSCJITq3jDY9Vx0BqK++uwAfX6JkI/hME0SC1EGguiQ+isqcQRLrF6/0jO2w+6FMnZhyZYsQ1W50qOHgPX1NXndtODsfgMwHzMin+0+ZN0S9YOllMzWfLwKQSS396P3iY3kNOLDPM1y065H4gOW3p4uTDkB8zWdb7FgbdDhEgJkCUDRvogTmd/vPv3BVAUBuvylNzAAYi4hisVQnEHoIqWblrxqm4Mx8ujfljT+YjsWBYgIOc0oJPsq1slCpH71fKybJOEoAuuVTRSCnYlmU6P/Z4iSJEcbLv+Yu9/1EAh7JKEXDKxq4ChUiKymRbwjgHdcUWTARgLYXHSr2LOU+BV7MVwzxwOfkOWybYAGZD5iRT0edjpxD6VhcOQ6j94tP51wdOHBdMeXa9OqWRcmWXA1XLUIUH6zyCwlAs3z+YBkfs1u+VIejJEF3ckrjI9T0y/aMA2+/tgAg08VURKT8vbKMUgAMIGzzAcOi5HknHQAz8+l+MW/829KxhtH7tTz+jIMAJPCYMULAWd6fvi+EY9ouoZBM/Kx/4LUBgFLgNC5o16FrE8JJVJgkiFhaQQBv3+dVbMrWVsC8UxFRkjjaVsW2DtRdOJ/vAyohVYK7A+bTvTdj8HlqTMcaRu/XxHkzjgNkIOWuDr8jnYYDKDutgpUhra0uAlAyCCUAK8BXcjBXgLCk/h0D/hcByDxFAdAzoFUqUBYRJTUcMWdPP7ONL6i5bLQeALJRQ+bT/W7G4AuAOXq/lsGdcRgAY+glLkYclJVTsa6ptCX3uQjAKINQstFrAZKIwWxQIhIJuovB/Nx+r2LzFCwlj8Y0evl/MYk0kieVtcvrwGUnHQCVjjVkPl3mItQsIPuElx9G79dOzDgMgGkAWlNyBJn8xKprBRC+zgEo4LWRgcdVcOCjjlNvmx84DrzNAahaFZWLygKWxUNibIhTcPD9BMLLa65bzreAMSGVoXvJ/Cgh1WUfO+XTZS5CDYDs9GH1fnOrIDcAkABTTDCCLYK0Cwi/586WcKJUiEpC8CCBYDsiiSplqUIUmOjf+o2tIiKVUJbgU5uSWl4DWwX4+PcXnrQATBNS+8yny1yEopdcay+930y5YhgAg+9n2OoUeI5TdQer+32fdhmGoOBZanBo+g1yEKU4dYgFSvqB//vZBIBt9RshkTbW8ZZZ2hUgvDL3iU3uux4LSBM0ZD7dPRnTH08VAIfV+2XAOucQAMuVcKfFSD/+IAABsEoGwYAoHZIKEEYxRIHwLS8pUuhjFVs6/ZZhIVWyxVKBBIRXnbQATBNS+8ynI4tBzkEACv+chlUVIKE/5cRGsWmlKfIzudc3APLQSlg3E2OCyVRc1kpU3DgBmKoQsWtlBcswjPu+nfTYtBL+GQdgOf16GCZW6pXlBCqWSgqJypoOAFfXXDifbwFJLvi5HAjlnUsiIe6AjOp4iQNQHRlT2PlgJCUbbc2s+v/hFwFb/q7gm6HlYpBbmTV2sscQyy/qFBj2v0/cAdz/HGD7NDA1AUyOOU+1CwWOewNjKj6/O03F1/WuugW4/XJgfBoYmwDGdH7IxB5kLPIB+I8AfNwZgga5ck2fJbEm8V9zNWPfrasbgMuPAcuseJ8Exsb9FdBhA+7gaQNKB6TfcgCYug+YJT+g89aoBDMmIMScP12uTKj13uDv8zsKig/uJ1uQOsnojm3qB5P5ACRBH3OhPuzzRN9DV88HqQLEWPJnvTy5nm/t/1s4BcuSpRZtGAu4fi+wtBVYEyccrYwn6hF8/FkJp9bKxAKVFsn/d8urgbHPA9NPOEOWl4+2cfoFHhfVrJTZPKHSj5daOtup6JyCpPx8rHWRVQ7WOlrYCMx8AHIzlxkALPD9c0VB+x/A3E/+E2fUYHXdF7KTGwdvTd0AHP9r4PgWYG0KWBdfsBdsMPfPrKKsoL9XAVLAvO2fFylCE4cKliyrDVZNcGS1CqEYhWFiAZV+XntaURdTLmpCEbpchTYLqi6NrkMCzLzt5Xc4HwyJmmkJ+Z73jQOh4NWeDUZiK1K08f0EXt7CMHVawIk7gaVpYJUA9LI1Ao8bzKX1cytoFtFfpdCIWz7rgzHgth8u0oPGDwETc8CEMySUzFaikgtlpW1Ta8JqNba7lVljSRgW+Q6ZP/57WQvj6fydBjXfAjKbgEvMLwWCvhNoipgNpnQshlS4IGFWzIk6ylWwAz93ETLxGWB5ClidLABoIOS7pmGfG+33YAG5mND0G8F4678vkiPJczNOAC4UyQm2N8w94kirFlfIAl7i402d6dbPWWAtrsjOFiuCvAJZOQE0pHTFsckHYDeCvhNgipQNxoAz8/8IPr5nbvH2jd+6AThJAE4AqwTdZKEBLDoDgU4+YVkPHIBoPwareOt/BkDexsMFAFnbzNJYm0IDnVwbt4uyur1kwL7Tp+iZM/08WT9Rc7DHUmuYTr/x+6o4ovvu9fjBbgR9JyA+omwwxvZI5ULg6ZW7y9FPf9QNwKm/CgCcKABovh8ByVy/UCtJq2f+X1yYJPGU27lIZLbuEWDsWBHesZeDz4iURLUWa1TE47LqK12fZmd3OXidFctqm92KatVs1jAEsNv6sdymaa2g8+xUL4I+Pn2beCgbLGWHI/h8G3oTr45iK86POlbBU9yKI/AcfLR+ouQwH9BfmmbLlTHboOnZ/T9+5vaf8FUaAThXsFOQ45mUcgZCWTAxe0UQ+urYMO1/37GtxQmoLCBtRSp30LrDp2SFdzYMgk/R+VNwvwR9mwQDsaspGSfJgYDYNTbp8psCQFJxEIBkQjDrxt8dXCUIY+COH5MVFPi8SOn2n/QYLZ9Gp0cxANIP5IvAkzVzxivRydnKNzBa8fddM84b6AFyAriMF2pajk9kYIeoClXmA3AQgr5NQEHMBqMVFMNaIOayNRL/vhlH3RZwmhbQQUcAasrVVGz4EtjCu/3dfb/ID3PbT7uKAZ/MhcIC0vqRTo4W0IBIEAmEtFwCYqjW03bcmdwBYeoWgetUbrR8snrloiR2drpACf+rD4D9EvTVjIJu7HBV+781X752Czj9lwUZkTEgcPoNPp5Nv4oBRhCG6dd+1DkMz1JIhR1BAHJ7zwqO3fIRRM5tmDK5CoQKsSgOeBYBKFZULTqcB9r6Ni5KYmd3WKDUA0BlhNLM8EbT1QBXBU72aI5ZjUcVOxz7WLkQ8d37vsart/uA6RcPsxNSAtAXHDYNC1AEpf9s01kKwuBwGU7HgVt/1jtD1e60fgQigSe/j5bQp+KYpGB+H62jT7P8/ZypBIC8Dhcx8eY9wF015abhmnoAyJ5WSrKeNgKO9SHxnT/LSasJBim5lRjWBEIVeROInKL1qunybRawLgASdEy74qjaNNzJCgqEEYzBGvK0297mAFSHEIB6ebKDgc8J1ksmV8t29f1en6L5v6cxIK5iK6Xne/5jCTiFcTqVn/r/tWDPWwXnEPTVgIKUHU7ljASawKefIwDpMdRxRB+wFgD+RREDJABpwSzz2c0LfxczVjkVKwaYgtBBezu3SvX08d39P5uO3QKahXMQciourZRAGKZWar/YZ1xXRPe8wQr2AUK7TvbOVTZBXx4MBECRnConUBSFEXT6mf/TK+/qmzAF/0UBOPqBZYF52HrTFCw2LH5G8UCzJEko5nZqmRnPh/uCXmpnVpDTsIPPwKApOaSA2QLDLSHf97iPx0tpISLfz7bl4iFfsUsnj+HZWEeOYDCDnDmCvZkEgedcCjxGseIhBYt3vx049HwMLRh8gA9gh2MoH9ABqKJzxf0McO7XlSAU4HzhYYFq+5D7hwBu/98OQLlIBCKnW39SlXNY+nqeiq2dkQg+gnGPb9/ZpT0lq6MV5D96gLCwgDmCwbdnCvZmCgY/dxy47xxg5SWuUjigYPHFbwA+fyGwfr2rXrMvPB+vp3L3GHCgi9JOHQCkRVPppeUBigXLFymyejYTB4YsgfA20ofRAlYB0FfAlvQqP0/TsX5PLOB5DNu471cmIwiBaRww/F01J+mz2pqChxUMZvpJlmBv3iTocsW4dzewfhkGFix+2febXDAeJO/YEILBB7pU1g8LQFo98QASVGYNQ6DZfEG3fnEqrgLhbf/HV15anbkFNCvohWSl9XPQ2XTM/2s3I4DwPIZwBEDfgitH0Ek6N6x+u/iD7T4g/YdBBYPpWHEaHlqwNw+AQa4Yj54JrJO+aQDB4pt+oCAyYvOPEIQDCgYfeF/9U3AbAMX7ItAlVtAspKZdz5SOlvA2pstxjES3wJ+92NgAGK2gwi78QoVfEhBeQACqNNP1RdoA18kKdgDhxkUI/zKIYDCnqyzB3jwAJnLFOEIW7QEEi1/1Y21ywVglCAcQDD5/Efj7M4CVrZ5AKlkhxeQUaxBI4nvFzxf8IfCVC4HV7cC6ZEX5nen3VX1vAGLZq8ysrvHY+QBwbGfI2E6JpLvdX+ksthpUvQrmX/sVDGZVUJZgb17vJHLFeGQcmCdVb5+Cxd/5xjZ6QzzMLOQBBIOfTV2Ps4HFHQ7CLQUQmUrV0rgKJMsCjsxGAqTn/hzw0EXA4tnAyg5gbTYBorKkUyLnkB9YVhTxu+kT13iccwtwdBewPAus+b2ar9xJAafqfgMQO4dh+J9+BHe5gqZZZzYok1JJUcpaR6bp93P+W/N6p0KuGIemgEWKgPQhWPxdP7NBLhiHKYHUp2DwpZ8rLOD8tmJQVplOLxAqmbRKC6EDYC7/CeCRPcCx3cDSrsISrs04CPm9ArZk55UvKAspYLqPaPdR4/H0g8DRHcDyVr/X6VabLHk2PhjpPVZY7d5xwF6CwS9y/4LbbVyQsEKIufGiKe0p2JvXOx3kinF0GjhOQY+oNRtljji9TQPf/fOV9IZY4Gq4D8Hgy/4W+Oo2YG5bUUy04vUcLCqSJVRWszJbNgxSmMau+q/Ao2cBR88EjtOqbgNWWaTkIFz3YiWrF4nAjtN0nBZrJnU+/8PA3CxwfMYB6LUra3oglL0tps6wlVha5rLiqd9AdDfB4Je6U0s/0BXTDYh80Sr2FOzNA2AXuWIszABL1JaKWq1R+nwGeM17OsoFY5XTVw/B4Cv+Djg0C8xvLYqJCECzgsxmZlq9T8e0XGUyaUizavPtxoFr/zvw2BnA0Z3A8e2FVV3x6c4sqwObckeyhiXAowUSADhD1XhceDMwx37lvU4XxVN2n3rJIocygkr/Vbs7fe+EdBLcfaXXQ3IPWIrpBB6XlnwpR76jYG9e7/SQKzarxM7qJFj8mg8UarMV9IZ4gvNDD8HgKx8HDs8A8zMFAFnPYQPDl0Co2g4fpDZLqKCxT0/7fhJ4fCdwbFvhRiwRgJruCOwUgCpeCvUjZmEFxhfk9W969kW/B8xvKQqnVgg+B6CB0MsI7P70AHgmd2n1NQ0rv7FvALIlVYK73MnQCDLThSGZoDpuP7uCeuX5n8zroB5yxThGnQ0CgyBMxY63Aq/5aBHG6EBviDlOLV0Eg1+0AByZLgbl+HRxnZXJoqqttA4ODovlJZVuSjTQFtq+NwNPbHMAzramdVpVs6wEoPtdNg37wJfvsYiJP9NFqvHY+7vAwjSwxAeNxVO8T6aNVRRRlT6hHrJ0Ovaw0WDJCKng7g86APvNB9wg2JvXO33IFWOBgn8EIf2nRLD4tbe1+AU7yAWbZeskGHwVdd2mgAUCcNKnJgLQrZ/V9/Jnn5JUYmnAE3hCmv3+t8AWQfSzyPK/POOgJgDdsgqA5nfJAvLdLV+bz0kK4RqPZ3wQWJxyAPqDVhZQyQr7gyaXI9axWCFVAGLvRUhV46PgLnUWBs0HbBPszeudPuWKsTRZAJDTo8l8ui/42juL5veQC7ZpsEow+OrZQlqVVuH4FLA8WVyDAOTAmHUQCAWQkOlsQAwDt/9/AE8SgPQpNa07+AhAA6HLXbb5Xr4IaAMfv/eGvP5NzyYA7UGjBWTWjh40v9fSyscHLtaxhJWxFVsNNAXH1khw983+DYPmA5aCvXkdNIBccemfceooAfhAAcA+6A2xLuAGucxrzgKOMexDfV9OwbS2BB/BEoqLSrBoYGgJ3E8qLcIEsP/ngCPuUy7S13L3wb6PU56/m/Xj4Ps0TKCXQA6AXuNeZY3HMz5QANAeND1kwcKXlj6wOZQ+b7R+Pi0PD0DeFAfk590CKg8qncfoFzIRVWVqfFfBhgn25vXOAHLFWCDbvPstBsJZ4LUPt+jdesgFg+qVptWq11bg2gtgfuLiRAAgQeg+oEmsOujsXb5SsAoCIN/3vx04OlNM6Yv0tdx1MKvK7/TFjVmeCD4HQQQhf159eV7/pmc/kwCcKABoeYvR0oept7SEoZQ0Tr1lPuPQFlAtO0nyAcWhpzw/FSjFzGjLx+RGvxzoSeC1hwsA9klvaFN5FAy+9mJgnhaQ0qqagglADo4c9AhCDpJPl5ZommQ8738HcGw6AJBW1VecZv0cePwOY0/wl1lAD/WUCx0mMlDLr8bjmb+Dwp3x4nkDYbD0thIO5aNtfmDi/xGEeRawxhs7Vb/q2huABQJwAlhyy2cC0xoggjAAUCWWAkksOiIY978TmOOqeqqwqAx3WGhHK06n7TDwOcAV/iipPAKjwgrZm2o8nkUA0gKmAHTrp+o9MTrEYvq44o9pZIOtgmu8mafCV72YAKT/RwAy5OPOuVlAAk9Oule6xQRTWUKlWtkU/IvAHAHti5oIwDK841ZPFtCmdr0U8PaC9hVultd4CIC8P2Ztt/m5/qC11TJXlJDGGpfGAmYODgFoCxACkLpuWh3KCgqE8gNVZK4KtxgjJAB/2X1Krao1rfN7CWZf3LSBT4uAEIyWBVpipL7GgwA0AW25GbGENBTRx3rm1M2w39mmrFVwjTd1Kn+VAZALEE5LtIDyMWUBvbLNLGHgd5H/V07BDp7r3uU+Jadgn3ptxekA5MBri0/Wp4wzBjDbCnkMWMqVpE8GJwLQqvfc0pqbkVj5aNk7gbCxgJno30cAjntowtXNaZ1suvSKNhsYTcVKmw9F5xGE+94dfEoP+JYhD/8OC8eIPUsUHokVVKB78XszbzAF4Pvd//PCKVGIpOAr78mn4DZOm8YC1jco+w6EFTDDPJqeCEBZBa5GffVbhmQ8DtZW5TYOvPhXip0GTuu22lTMLSw+aAVl9QhEWjurI/aQiLJkTMLsX9R3r/ymZ73fp1+37OU9hunXSkdl7T3QrhKCtlCM59k2i5CMMSIAGdqxEIwrmptzTsCEut5yilKoJLAcxCq3fe8tLCDBFwO+tKjyuxSCMdYEXoeDrHcHvu0tTwLzmwHA4N/Gh6zNCqqeOSxC2lb8tQSiMwbuqXIqAcjFh2JjBKGJyShQG6ygVbfJegULWBYcMR3rvb6oCRaQwFPgl1M5rR7/JtBZOIZWx/0+s4QeY5z/1/X2tFnAxPpFELaVkdLN8MWGVr4pCBsfMHN8bmTKfCjZ0Ncp456/x58zLzfw6Qf3ABd8pUgEYmqk5bGyek06IQl1bkXScnlN/u8L24Gdx1qVq91KQvrpgwaAAw9p+wnXPw1YjyWMGtDo2ASOFGMU7SIEUzdYD34vMPmXwLbHgdkFYAtlGiim6DpxJtvq9LtlVr/aWKEB8pUXAOOPAFPzwBTZ9r04vdQ9Ts4pAZ3cd+yHxgfMAOH+vcA69/9Uxijmz/AerYpdar1lNSMYzV+vWY/34I8DY58Gph8Bpo8A04vAFEFIknIHohGVR62QhFRSYjQE6qFri2z3iaPAhHNNlxKwArI0Q1IAxwfReacbC5gBPp66/5ICgLKCtqnsrKKlrFZUFPKOr7osMTtdsxzqQRZ93Q1MPARMPllohUxRqkEK6gShOP0S+dY2hlRv99y+ovRi7IiTnTvLqmg6xDPYpqAUgRgsoR7MxgJmgHD/c4E1FXu7FRRbvEgd7evXWlbPpp9EgUjiJpwe6zwOMlvpAWCMVusJYPIYMOlSDZRpoGiNxKzbdIQlXONMWJbGtw4svdgz3El47nzTRvPrrKptAJT6ZrzfintvAJgx4vsvdQvIXK5VYF3sUZxmJUvgA1FOvwF8spKyBtM1y6EepI4LqVMedbEaTp0EIKdPKh5FqYYqSxgo2jgFr13j6XXHnOiSZOeBVSvyC8qC2r05FVvVw9cAMAOA178AWPMp2LJaaekiCPXExwHw660n1oB/niGQazwOkkSepbJ/72I1x4CJ+cJ6lYI1riccrVicUuVSmIW82pkwnHHVOKbFsOozQGkFkwewnBES37ABYMaAX39ZAUCCb82nIlo+40p2gNnvsoKunxH1xGwA/LOzdQOQJPIuHzV2GBg7Cow7AI0l33XfjOsv6oVodes6ISbBsAZMX+kJxU56KY7pkmFVhOciuvTzSt05v0+ryuT/9gDrZNe4wPMsI7VJP3GcP7gUOOdvgL1rRYJ0ZI5IV3hV4/wrGYPPU3/AiRhYusy2K7mU999P+z90ObD7LuBZK0Xdkeq9NSX2+o4HLwfWlopFCC0fgciBMtAFC8CGrYXVoVjnU2G7rTXrzh4kfRzLY1kyGwBoeiGcPiXb5eAzdXWnazPCSScb4j3xfmav8Cx2p50lAMW0VXINitCogl2r9H2dcctWwQxQsn6ZTBbMNtcgdKIbiZj51VcBk38CXPxoQcfCUg8pjcYgZScw/momACnXyr4leBhs5QaBTHpf7X8dMPYJYO8XgAv9e8QJlAZZq8D4xSuANYKPJQn0AR2AHKy1MACKe9nfFI6IEqduEWoHIJ9wlsVKLekoMCa9EAegSTYQeM4TXco2SEMkAHEbBZoj4bbYtdyCVrFqGXgTSxgXYTZeHLi9AMjEQRCVUXP/n4KUaaT8vVTi+Rtg7GPAuYcAWlMCgUVkQfJ2Q12yBvPXMwHImhDWwf81imsTiLSEvHZkr+jY/p9CQRD4p8DOBwteItai05qn31FFdfLlFxYWgCDUIkRkj/TxbCEi/89jfPZ3X2VqYSJQbmUNQY3HQT7hbv2sLoerVwKQHNEEoCsm8R4MhPRjXUGzVEIKIoY7yaEYuY4dgGb5RXruoSgtSCLLarkICQ9f6QNykGjFdjsIBaI4kGlt8W+Rg5g0HJ8qAp47nihAzFpuWtPIMBZJlASILvR6fQ0DCVbJCkJOJCqnk4pGpb99tZ8MopyiKDX7WWDiwYKXiEQOehCrgKh+eJQ+EQHo1Lby/zRlyf8TIbf9XS5ftIb8I92YugH4ay2pLusorl7dAoonWtMwQSTdOFuQSLTGHyIC8kxSIQuA4hwU2WUAoO4/grBcDbsfWElSzg+JCoYDoEGM1ixSkHzgF/wG7y8sIa3J7JPAGWuFJSQIaU01iJHUiYP4e33BrPOHmG/JMaOfTZVYRhwGav87vWKPJ9/rSH4IOGO5sITqg/ggxXs4TOaBAECbeoOsgfl+DrQShFqcEIhyyt0MbMusEkx76iAZXKM8BvXiZAGlF+KaIbaadYpem4aDgpJZQz6YJABV5VcHAJZ0v4FxX6KG5UpYs0KnqjhRuagEVgPglYAl9ciHf8mdUrJh0Qx9vkDBzBywfbkYQIGwahA/kglATsHsDzKA0BATiPyZ4NEDwIeoa/uFYKKXL2f24nQoIgd9R3yQCMTFqwIAfdBWI7+yB5ZLECYLETd85YJl+2YAUNosLIel/xYlu4Jsl6bhNhD6it4WJCvA2Zc4Gxo73RcgJeOqFmGR6rcChLYACyGojmEYdj59KnZ+tIQRhH9IvWA2hiREjDeRI9Cly7fMF3EtWRFawhQIf5IJwE56wdTIYdt7tp9ys1K8JnoJvod9Wn682PNkP4hUy1ndWgstAtBDMLYN5/6PAc5DGNoF4SrZfN+4+IhT8jqwg2Cp8ThIJ5vfSWBXAVCrWN9SMxDK+skaOvhoAc8me654pmUB3f0wyt+E8FyRAGmPlOEoiSD2qgvmAKoOm52fAuiTDHSyIRxx+lI0QxxADubfF5vffMmSajrWlP7nmZ3dSy+4r/ZzAUEHnQ8R70HsXlK+PgJsW68G4XYGZj0EY2EYATCAT6tAhmE0DXcC4faapcwMgAIfLb0kuzT9Qmw5uwAAIABJREFUSi+EfeALkSrpBovbrQDnkm8wAo8/E3i+CCsZ98NCpAp8cUekZyBavI4ET/TnaAk/RQCyAXy6uNSPA0i+wMeB6ePA5HFgZq2wpNGK3FUDAHmv3fSCe7afX8CB4UNEEOolVi/3obastNwJ9cO5BOBKEQMsAcifHWzRAigWWAlCn5K2bQYAOe1KMjTIR2kRUhKVS7IrLia0v+3xwHMZMCbYNP0KfG79zAqK5DxOvyEuWu6VD5KSHy2YAEQAfpaRdl5UkuUctIpBnCIIl4psD03FtIIP1ADAlBuJM47EqqUX3LX9kSBQcuuyftK78xUkHyQ+RLqHZ3Fv1KcgLj5kAQ1s0Qo6IA1nHhNLQzA8ZxvBXuNx8DcS5UYpNnoYxsCnUIqvZo0F3wPTMa7Hv53HOJVbS/l+5bumX7d+5WLE44hxIRJB2NMCqj9ixwuE90svWCaIA6bAp959EKeWChAyA0PTOV2unGMQveCO7bfqHbcS4rJR7Ewqnw5AWhLuImg2uFQAXAVs8RGmntW4+g2hB3P79L/EJ9zGvqrxOPibiVihAOgrWQOf/EBfBcsPNBBqW9Hv6zzGqFzmoXz3B9AePgXiq6bgiv4YOB9QHS8AfpkAFMMjrWAcQA0iO9XJiQyAnos2vV7ESHOOQfWCO7Zf7F40mZFQScRKAYBaSU6vAVcTgN7xXHiUFpDTMK2dFh56912BTiDcvpkATIXzCL4g3WXTZ4jpGfjoF/oihL+fx+0yWUABLwIwtYKKIabgCzHQvi2ggBKn0McEQDaKT5cGkIOo6SuyYzEfjQB0EM5nZgAPoxe8of3sgSqCQM3jkdFLvpRvR13+7UVRuhUFSavNO6otwp88ZZ3+t4M6HLtch6OT9AG/q9cmtf//gV1JDYcnQ2zY6/YakfSrU+Pg1M45NqPt3IEtoM7WFHokyrWKkooglCMWLYjiUXMtK3g8Uzd1WL3gDe3vRRCoUEYCwGtYFxxqgA2E/jI20F5hhmQod98BHNnlxOTig1aGiDanO21yV4DygWuB8YeB6fnC9WEtiKVVKeE0ZGiXWczeJoWMIig5a9V5DA1ANoKDeDylZ9NSXxyAsiKawrQqmCv2HVf5e8aRoxfc1n7xs+khItAUvojvyWryxVcWJZksVSyZoQRA3dcAoHzax4Gj2wtu6FVKM7gMgti02jbV476oUJJs1j/AbA1mQ3Pm8eTRsoZDtR+xZKCiEKmMXTIeXHPGdhYArX8FwG4DGMEnAHIK4yvT58nWC2b73cexaZgWWaEKgU1gjNbPP7PvOYGsUSBkv3hBtmRWNzxjTk9RWktvxp6POj0vARjY9sWkFel8RWxegjIF4RjwAOnZWMPBTGjqvHmszxJOBUD3xyznL2bqROvoP3N3q84jG4C7M/PpcvMBef0cvV9k6hXv+2Yno5QfGArRbaCC0mWv2YtF3ecerNDhkNZIIsXQRv5dlTtGADJSz2gEE1EJQM//026HdIEZLC8B6A0tk0g1Ja8DuzJdphS82QBEZj5dbj7gxZN5er/IZI+67pscgE7QaDOUMyC0Wb8+gXjuR4F5J6YsaXnFhBoAGEVvUhb60jISgCQnoh/OLBgvIrL8v7DdFkEYM5dtNg97tvz5zJqzdfIBmJlPl5sP+DJP5xtW7xffnzeh7H+Z+3+RpkyWT1YxuURJYVtx6T0fCTocouQV85VkHRIGegEuEv/YKpkA/JceVmL8kv6t5/9pu62tfiPWcFQVEa0DZ9WcLJEPwMx8uvfnjT9IgZyj94t/ldeA/S9tMaGa9SNdmsIxbvVscVJ1GScoMt4UPwhAsmMZ0aXzQBsvdGRBjQz0FUpEJRAJQOq4KAnBdz+sfiPJ3bOYn8fsykyVWMfiN3BOzckS+QDMzKe7OW/88aqQzsfE5kH1fvGjeQ0wADodmVGwOeiMsUqHrGOnS4UFy9P/wAEojkEnI+IqOIJQNLgpCXhcmLAtD/D+kgQE235L93tj+YBqgTX9BiCeW/NedT4AmQ+YkU/3sbzxBymQuZhm8g1T+QbV+wWFdjKO/Te2mEFNlCb6gPF708VJ1TXHgKd91GnZpDfi1k/gM2vqU3DUnCuBmNQe3P9vw6pe229KOvB0K1k+ZS+rnrfM2AlA3JMZtah/EZKZT3drxuDz1O/yxAwu9JgJxr3lQfR+8aa8Buy/wdWQZAVl+ZzCrG3q9c/YrkmHy3IRYryAAqAkEBIlopJxNNUbER+fA/H+/+AAdP9PmS9dazicJybm7mlB8nR2dI1HvgVkOlZGPt2nM29GCamcGZjAwlQ+vvrV+8X/zGsAAUiLVPp/wd+zaTMFWw+/kAA0GQQnpCw5mDsAMIrcRB5mC/+MAffTwgfwKY2KfmCZ6ZIkUShrxXxBX4yYaV8Hzmcn13jUA8CMfDqWYeQcSkhVOl8U6uxH7xekrsg49h8oiCENgC5TUG5vKxxT8f2aRtOtcAKQ1s8soPuOVUIwpchNlEEIOyNSIrrvv3hwnckWIZPZsnbcDyzTpvg3lU8mpZQqozyfK74aj3wAKh1LgrsD5tMxiz/nkGD1sHq/YNFOxkEAcuW7oqmXlisuQOT7VV2jwi/kTgj1RkoZhBje8Z83SCAEEJZW0C3gff8tADCt4VASaWIBK0HI9q8BF5yUAMzIp8tNx5Jg9bB6v/jdDPSRns0BWIZeUitIo9IhHmhXTvzCPQddccnZ76U1V/IvC4SBCFyg26DFNg7c++Mhhb6qiCikT7WVUmr6lYn2nRKyrdZ51GMBlZIc07GUBdMjny6XCiUmpA6j94vMZbgBMFo552pu27PXAqXTyAUQcitOQjAm9xX0N9pIwIPmSCmH5QuPqER0L4kDYgp9zOUL6fYxkbZcFceyAreAF3GlV+NRDwAz8uksnT3jiILVSmpWNlhMze+k94vMZfgGAPJeHDjpCrgM01Tdry9OzvmYAzAqLVWIwEShwzbRwwSEn+MqP6bQK5tZlWyhjCCCsC19Xv7gOnBRbgp7cu/5AOyVjqVMmA75dJZ9nHF0yohWNlhMxKnS+0XmMtwAmFq4imnYbrEqNJPc+9kfd62RKh0On8qV9hXZ9askEPgAfI56ziocUgVbzGT28lEtRMoKtg7lBHtznfZNA+CQ+XQWM8k4uglWK/NLYKzS+8U9GReXD0g/Tyvh4Ne17Yb4Zbr6g6y7/aNWcoPpjKRTsJIags5IJwkEAv6en05S6GUBfRWsUExZyVZVQCQwrgN7Wfdd41GPBczIp8ODeXfTSbBa6YYxlY8/p3q/udc3C+jTbtvqt2oadnB2m4oNgMn0W0p+hYWHWbwg9yU/0Kb9EIy+5y2hiCit4UgKyTeAkN8Valk4Le/ldlONRz4AWWBRM6fdIPfHstw/G+SE5rMnVQ/kA5AkLHS0ak7V7reXfhgACaBqDtD3e/nmc5k9kA/A80JReq+U38zGVp3ObJo/BvAOD3dtwiWar9zEHsgHIGlFubqSx7+Jja36anLLcDvvgwA+NDpDfILv+qlzuXwAXuSjrkKemlO2e3U1uWUYnL8dwB/5e2apca9LNv+vsQfyAUheX4VguB+mzIsaG9ntqxhF4Xbe3QD+n7/uHLAW9wQ1tblMRQ/UA0CaHC7plXEh+q4T0OWcfhleYTSHBK0EH/mi+fcRuKQn4I6fWpeoB4AevCz3HOOm9yb3F5mBlZBNclYCj1aRfyfrbgPCTR6AzK+vD4CyglX7jpmN7HY66d1E0ctdIrEEE4wEIMlam+Pk7YF6AMj7EwAVbU82vTerCwhAXopJN9zVI+AYrOeULLZgErY2x8nZA/kAJGWr0naUWdFpy2cT+oCWjpdjLFxE5UzYIBBpEUX5nLnlvAktb76SPVAfAOUHpiAMm96bsVtCAMaKALICMyxDq6cXfycA+b/mOLl6oF4AiqBRIEzBp7/X2Af0+fi1XIioMIlAI+AIPIGPmeROWV3j1Zuvyu2B+gHoFfZiDS2lC0LiY52WUADkQoTTMH1BFSYRdHoRfKSu5v9qrizMHYPT+vx6ARhSuDcAzzmDo5ZGHT1PAKYMwQxME2jiSo/gEwBrrq+u41ZOy++oD4BaCcsXTPiSI3ey8s4KGoG8QwCMFM+0ggQhLR0BF19SXuD/ayakz7uR0/TsMcxg3SjfqWNA0hsrga/ojaq/8WPcC+YIk4Ke4CMSuB2XVht1Oj8zIfXlU8BtU8DhmYRXWdfrdF1fgr3+S8At48CD04DVjXQSDO70PTUnaJ5uOCwsIIFHSSFy1pKPWCDsZxCpw8UVgKSPxLXM937OzxxAljzcPAbcswU4Qh4V3UN8mKoeKm/bu78IfKJQa8VD48CylHQiL3O3/qg5Rf30BKACMtJXjXKQcfBSK8Dfqc3KVCwuN2VFGRnm/yKZtq4Re5ifyQQgM2A+BeB3GHaZBo5MAIue0l7Kt3cC4xhw+5eL7TuCkJk1jBtyerbUfYG5ExjZ/pqrxE5fAOrOq5SmowVIrRp1IyT2R6+fg0bgVYG4CsyZe2UsaiOGKXr4Sfp9k8CxCYAFSKyvXeY1o1BxQux91yMtfsHPutgnnyUuUvhc0ZsgUXib+nVkq6+ZKaABIHsgVZnuwD9sVo66rrR4ImdhLGSQ8zPL/JgBQxeU1ouWkO9PTgDzbgmXxrzMkatl3keivfG5x4r4IRcz5BfkO5vEZ0kgpIfBZ8yKjlL17syy0tMNcOn9dl4Fy6dLFabj1Mpvow9Ify+I4Nlo9Xt+ZqU9VdJpqZh4QDDyxUyYOYJwHDg+DhgI/WUVZl7aSEt93+GO9Ia2iuZKOfA7lhp9JpvAVy61w2mOwO5hmCgMHC1H9O24gu6UD9jP+ZmbtLRaSsei9SL4XDPbAEh/kGQ/pSUcc0lbApFWb67lQUhpVnLBsoKqqZclFMmUtrxPcwxl3X7vOCAtYLSCcugFQmqhdssH7HU+RznjiOlYXA8wqkOfkItTAom+oKygca4ES8jY+N3z7fSG4hfUtp3ihUHruVSsFy1iRvNP+1N7A5BdJACmVpAgZPhGOyCigEjlPLudn7kvFtOxuB4g6OjD8UWLRkCZFRwrLCEXJQQhp2K+37lQeBCRX1A7KPQto1prFEmSYn2mB9EAsO+kYfk8KQhZF8yjVz5gp/MztyOUjiW9bCUhEBhKRCCgSis45uQ/PhX/xfFWMgOnWu2gxB0TF/o0kEZ/kCDM1Ts+3RHYnwVUL6XhDFrAswfIB6w6P1MrTulY0sum1VICglKwCEACqvQFCUK3gHcsFQCM/ILayqP1k9JshVqrncMalOYYvgcGAyCvIwuod8YBJQmZpmGJeyRwkGw4n8jJOJQNw3idLFhMRNB0SgASTJyKoy/4ieXCeFfJBUeV2SoAclFyR0bbm1OHTUiN0/DTAwD7zQeM52dqj8VsGEkVE2jKetG7AEhQ0frJAv6RC0trC1skl+IWlNinGLbSaZg7Mc0xfA8MbgF1LQV1z08A2G8+oM7PVF9Ms2GUE0gQyp+Lwu2yagLgR9ZaYpkSypQ6a6Q2DCqzpkvietXIFdoZfuieGmcOD0DeP0HEbBhNwYPmA/L8zJQsATAKnguEqS+XTqkE4YfWWwCUFZTksYAYwZfIBeN9Tw0cjOwu8gDIZqsoSSvhEeQDiiGYFoyWiSDRypWgi69UP5sc5fIcquSCNeXqe2X9ZAHfM7Khe2pcOB+AT41+aO5iRD3QAHBEHd9ctuiBBoANEkbaAw0AR9r9zcUbADYYGGkPNAAcafc3F28A2GBgpD3QAHCk3d9cvAFgg4GR9kADwJF2f3PxBoANBkbaAw0AR9r9zcUbADYYGGkPNAAcafc3F28A2GBgpD3QAHCk3d9cfOxqYJ2au9RdPtdp/khoEOlglDYT39V1PzQFXLsMXAlgt9PCxJKPbufyf8/KHIPfBPAZABf79Xc5XQ0ZQ1Q7360NbxoHrlsDvs5ZRsgo0une06by6X1mZvtP99PNAp4F4LsBXA5gjw8EGTeqaGF4QhzQF80CX7cAvGIdeDYAfhdZ2sTKUcVrpE7nd31N5gj8e2dIo2osk7NZpMdK0Z19tv+bJ4F9K8D1ACj8yfNSikHeg+5Z969m57Y/8/ZP+dPLKZhP/rcA+AYAF7g1oRUhEMUzFMt6eSJfX78b2DkPfM0i8GIAX+uWlAMppreUUErn8p2gzTl+2flg/sDbTkvIOik+CP20//mzwAXzwDcCuNTPJeFXpEpM6QEjIHm/zTF8D7T5gATYNQCe69aAloRTGulfBESBSYNyxR5g/Bhw7hKwZwl4vk9LnM5JmsBzUyDGAX3B8G23Mz/g9BuUa/0IiutfMkj7zwKmngAuXSvOpUvAWYBtF4BTnspIj/O8zPaf7qdvWITw6eZA0JLQEhKEGgxZhUj/dz3NzSKwbR44exnYvVKcy+mM5Km0JhxInUtrGkmzCPicg3W5LMGkQiZZTm9xS9Z3+4m2o8C5c4X15pTKW2Lb+fCx7WLtjYxzqiql29Icw/dA5SqYf6RTTilg+lYCIXmICKQ4IK9wxfSJY8AZK8CuFWDnanEua9ZTAMsaCog3Dt92O/MvnRGBtGwkqKRmMEkqCaa+2k+0LQDTh4rP88UHj74kF1WaATo9QHQ7mmP4HugYhtEKj4PB6ZQ+FS0hQahpldPya1kXTOqNY8DscgG+HavAttUCvBxInitrkgL4lcO33c7spBdM3kAuSnq2nx9gQfAh4JyVwvrxwel2z3p4aMlzH6DM2z/lT+8aB+Q/OT4EEqckWQSBkGD6EQKQnDCLwBSnYgcf32fXioGUFawC4esyu7CXXnDP9tOCsyD4KLB1rmgvX7zfbu2WG/Jtme0/3U/vKxBNAMoi0KcjkATCN3HOEr3UAjDrwOP71rXixYEkeKMFlSX8ocwR6KUXTJ7AaNE2tF8WfA4Ye7Kw1mwvX/yZn+eKnvcrfzC6IK/ObP/pfnpfAGQnySoISBqUXyAASS1AK0JfagWYcRDOrAF66TxZQU7jBOEbM0egH71gcgXSFZAV54NQtj9YcNIpbONCyh8Ygi8CVospApDuB63g92W2/3Q/vW8AsqM4gLIKBBIH8bcJwMCNMX68BTqBb8s6sGWtsIA6jwDk662ZI9CvXjA5A6NVa2t/IAicnC/aGV+8T74IQPm/AmGuBc+8/VP+9IEAyLslAKMV/LgAyIUInfnjwPQqMOOgI/DstQ5Mr7UAqMF8V2YXDqoXXNl+EQQ6N9v29aKdesUpWJZbAPyPme0/3U8fGIDssDid/pUASCvCaXgJmFguAEfgEXT27gDkuwaUg/nbmSMwjF7whvbLhSDL5TwwvdRqo9oqHzACkCB8U2b7T/fThwIgO01T1IMCoAZxGRhbKoAXQUcQTjkI+a4B5e5FzjGsXvCG9gdqrLGFYrpVG/UuHzBOw2/LaXxzbh43DKeoJwlAHqLndSs4udoCoIBHQE45EPk3DuitmYOQoxdctp8+rFwIWsGFYiFFoLGNchcEQC6e+OJC5J2Z7T/dTx/aApYdJ37AyJK/DIwvFxYvWr0IwEn/H1Opco5sveDUhSAAF4HJpQJkWixp6k2n4IYfMGf0amDHev2I8+l4/UbvNw8Eozw72wJePOJ8und7EkKj9ztKGA1/7WwATo44n45pWI3e7/AAGPWZ2QBkYHCU+XTMfGGQmYIxjd7vqOE0+PXzATjifDrKtTZ6v4MP/MlyRj4AR5xPF+VaqZLJF1UzKdPV6P2eLDDr3I58AI44n07ZMARbo/d78gMubWE+AEecT8e9YOn2Uheu0fs9tUCYD8AR59MpG6bR+z21gKfW1gNAz4geRT5dTEZo9H5PPRDmAzBmRM8BJzqfLiYjSKKr0fs9dYBYDwBHmE9XtRfMsIz04aQZ1+j9npygrA+Akqs8wfl0BCCTWRq935MTYL1aVQ8Ao1zlAnAi8+kEQGZTNXq/vYb75Pt/fQAcUT5dBGCj93vyAaxXi+oDoFLyT3A+3Rcavd9eY3xS/z8fgCQX/LPR3SOzkon55jg1eyAfgD8M4NcAPD6aDmBtB1e4NMDNcer1QD4AbwbwxwDe4UvRE9wHZG1gNSXDLlwLNcep1QP5APxzzwj9IIAPnXhT5ORc5EYCA9HNcWr1QD4AmRH6FQBMTSZZH98ZmD5Bh5g1FopiNns1x6nTA/kAvAfAEwDudnI+EvQxPfkEzYfaCXRSBluQMB7YHKdGD+QDsBNBH/9+AkAobqTADGK7Inw1x8nfA/kA7EXQt8kgrGAGMfBxZ5Cv5ji5eyAfgL0I+r68uR0QmUFoBQU8vfNvzXHy9kA9AORoMw7CdGQCjoUZDwL4kv/+8OZ1gJhBIjGDgMh3vTavBc035/RAPgD7JegjODfhiMwgoqeJwNPPTaB6Ezq/hq+sB4AcXeXEP+ZhGVo9vRimIQD5v5oPAZCupgDI9wg8/qz/1Xz55usyeyAfgMMQ9GU2Op4eAchpOIJQQEz/VuPlm6/K7IH6AMjgGzdl6QtyX5jWjpQFevF3lq3xf6yhrOlIAUgQCojR8gmE+l9Nl2++JrMH6gEgR5UA5KYsc+AZmCbQCDi+IvgEQMob1XBEAHIajgBMLV+0kCdws6aGu3zqfkV9AGTwjftg3JRVVRAtHQEXX/wbAcoXP5d5CID8GoJKvqDAloKOoIz/y7x8c3pmD4zhaqwjRzCYyQg5gr2ZgsFTLweWr8XQgsXjbwLWrnNtMlKgNoLBmZAa7PTCAuYIBlMvlWQswwr2UlUw45jdDSx8HbD+Ctd+HVCwePKbgJV9aASDM8Yg59TWFDysYPBtmYK91IbNOHaPA/M7gUXKXA4hWDz79cA8+W0aweCMURj+1HYfcBjBYO54MMY3tGDv8I3nmWSHOzYOLJ0LLPGXAQWLz3oB8MQUsEa16kYwOG8whjh74yJkUMFgbsNlCfYO0epwissVY34bsHw2sEIRkAEEi/dcU0SP5qhF1ggG5w3GEGdXr4L5134Fg4kAjuDQgr1DtDqcUmZETwArZwAru4BVqsv0KVh8/o3F4v0QXZBGMDhvMIY4u3MYhv95Zh+Cu1xBcxuOU/HfeDIq5cv7FuwdotXhlCBXjOXZAnyrO4BV6in0IVh8wStLuWCsUAyvEQzOG5ABz+4eB+R/ewnu/kOP/3G/l4kJTERlljQtIot2e53/IwO2OPl4FLtcnCqAp9cahT56CBZf+LpSLhhz1N5qBIPzBmTAs/sLRHcTDKbiNHdBGGymOC/3hglEvgjAnoK9A7Y4+XgiV4zVWYDAs/etxaubYPFFP1QkLtCIP8neaASD8wZkwLP7AyC/tJNg8L/xLNBu+YBdBXsHbHEFAINcMVamgdWZAoRrfPdXm8KitLdmgYveWAq+2y7iMqfuRjA4b1AGOLt/APJLqwSD3+y5T1yI0AoSbAxMMzGV1o8/My2ro2DvAK2t+GgiV4zj4+3AIwDXtwBrVJeuECze+9aW4Dut4PxkIhYsdetGMDhvoDqcPRgA+SWp4O4veQ5Uv/mAGwR78+6rQq4Yq9PAOi2fA4/vBkKudKVU7VZw77uKvWFuZbtcMNb5v0YwOG9g+jx7cADyi6Pg7gccgIxlcA5TKhaD01yYKBmVFpBZMfx/m2Bvny3t8LGqoqTliZbVI+gMgHwnMAnCIFi897cLAAZ6QyzFzzSCwXkD1OPs4QDIL5XgLmk5JHk/SD5gKdibd38VcsVYGmuBTaAzEHLHgyCcaokB7/1IkUET5IKxwF5pBIPzBqbPs4cHIC/AaeqvPL9pmHxAE+zts6VdLCD/lcgVY3UyWD0Bj1ZwqgCggXA7sPfWAoAJvaEtZBrB4Lyx6efsPADyCtmCvf00s/NnOsgVY3m8BTRZPZuGBUACdArY+5lWDqGmYbIrLHEx0ggG5w1OH2fnA7CPizQfaXqgUw80AGywMdIeaAA40u5vLt4AsMHASHugAeBIu7+5eAPABgMj7YEGgCPt/ubiDQAbDIy0BxoAjrT7m4s3AGwwMNIeaAA40u5vLt4AsMHASHugAeBIu7+5eAPABgMj7YEGgCPt/ubiDQAbDIy0B8ZYNMbkX+ZekpuIiOQrPar+xs889HJg6jZg5jAwvVZ8B+ll9PlO5/Fc/o+ECjnHfi8zYfkvM5ulmp4qJXVqx5deD4zfAkw/CGxdAZgoHfuh131QkaI5hu8Bs4Ds8B0AWLnIRGCBsFfn87JffDMwdjOw5R5g8giwZa34jnQQUwDo99wBfJ4TM7COiNdlaj2rA/jeV/vfDeATAP4UGH8I2Lrc6gc+SHqY4oMZ74VSKM0xfA+UUzB/oBUUCKMl6zSQ/PsXqZD5KQC/A0w/DEwcAcYXgYnVwppwADuBkefnCim90FmBWXwnK87Uen53BI8sbuwqaz9p5UgnQhBS+ZN1zE8Ak0utviCwq8DI8/nx5hi+Bzb4gJzKZE1SEFZZgS9/2pWR/gTAJ4HJQ8DEMWB8ARhfBsaWCwDquwQKvvNgHXvOcYVbPFJPkw+dDxC/W1Y4tWDpw/Rlgo4lo1T4/KxTihDNpJwj3/UiMLXemprjffC7eWpzDN8DlYsQDiKtVxzEqoHkyX9HRizW+nIgaQnvAiaeBCbmC0s4tgSMu2rMePAR9X252jXklaTFU108K0MHav/nvJ6ZxVVk9OI7GR2IZoGQNc/HgbHgIwqILIVujuF7oOMqWFawCoRxkfEIB5CWgkREBCNf9wMTc8A4QciBWyoGz16rwNgaML5eWKpctYZL3N+TWLX0gvtuP0HHk2n16JDyxXmVhfU0qywbJbr5GSuXKxA/sV5Y9UYWdnjwyS3qKKgarWA69Wg6fjQOIK0HadnIjPVFB+AiME4AuiUkCFnESyCSkmAuU7Cjm15wX+2X2ifBRn9A8mKcW2UFjULVQcgVDl80u40SYh763FfvquhLCxitoBYUsoJfjXKttByMq9CKcHn4sPuCbgXNJwyWkECcz5Q376UX3LNncZyQAAADEklEQVT9fFgIJs6lBBwtn3Tt6FpIz4RWnuQxPh2XIGzm4CwQ9hWIFgBTK0gQHiIAJddKq0ELQh+KL1qUR4MvSEsoENIKrgALHNiMox+94K7tl9qnnMio8MSf6SNwGpYVjCDk/Ju7isq496fCqX0BkDeqlWwKwic1gAQSpzGREnFgREz01eALLvvq2Kfi45m6cf3qBXdsfxRbJMho8dimqOhEK8cXQRr9QVpvPoDNMXQP9A3ACELFxPh+jACkP0fLIKFCCRRqKuPUdqjlC9o07JZwKVNHeBC94DQcZO0XAAkmgotAk9QYrR9f/BvByYfMSATDVMzwTXMM3QMDAVAgVHCZ7/MaQK4QZUHiNCbBQlqUw74YCb7gcmYkelC9YFlwvVv7RRAorTuBkECU9asCID9/x9B935zYzyKkqpfiNHxcA0gLQgvBAaPVkCqm3h2AtC5m/RyEqzw/4xhGL3hD++MmslgqCbgUfLKAcRrmTlBzDN0DA1tAXUlWcDm1IOIIJAjlT/Fd05lbFQFwjdtgGcewesFt7Rc/Gx8iWjUCjGCT1YvWT1MwgUqrf3NG45tTbcu0aximWx9xENcEQHGbcYAEwtSXSqY0gnCdgeuMI0cvuGx/FUGgFhwEYrR80QckWN+X0fjm1DwAWv8RgJFilJZBznz0pQg+AZAAlVWh1GvGka0XzB0cCQi30aSGVa9AF62fLOB7MhrfnJoPwPER59Px+o3e76mL5Kwp2G57xPl0kxc3er+nLvyKtLmhfUC78RHn081ONnq/pzcAR5xPR9mRRu/31IVgvgUccT4dNaobvd/TGYAjzqejumqj93s6A3DE+XRUg2VSCjdaGr3fUw+I+VPwiPPpqJjO8J1Nw43e7ymHwHoAKMFd7QErAeEE5NNJMb3R+z3lsGcNzgfgiPPpomJ6o/d76oGwPgCOKJ8uKqY3er+nKwBHmE+noqRG7/fUA199U/AI8+kEwEbv93QHoEhZTnA+nYqSGr3fBoAtaiqBUImdm5hPJwA2er+nKwBHnE+X1gUzSbnR+z11wPj/AeCpPDD3t7rvAAAAAElFTkSuQmCC",wse="uniform sampler2D weightMap;varying vec2 vOffset0;varying vec2 vOffset1;void movec(const in bvec2 c,inout vec2 variable,const in vec2 value){if(c.x){variable.x=value.x;}if(c.y){variable.y=value.y;}}void movec(const in bvec4 c,inout vec4 variable,const in vec4 value){movec(c.xy,variable.xy,value.xy);movec(c.zw,variable.zw,value.zw);}void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec4 a;a.x=texture2D(weightMap,vOffset0).a;a.y=texture2D(weightMap,vOffset1).g;a.wz=texture2D(weightMap,uv).rb;vec4 color=inputColor;if(dot(a,vec4(1.0))>=1e-5){bool h=max(a.x,a.z)>max(a.y,a.w);vec4 blendingOffset=vec4(0.0,a.y,0.0,a.w);vec2 blendingWeight=a.yw;movec(bvec4(h),blendingOffset,vec4(a.x,0.0,a.z,0.0));movec(bvec2(h),blendingWeight,a.xz);blendingWeight/=dot(blendingWeight,vec2(1.0));vec4 blendingCoord=blendingOffset*vec4(texelSize,-texelSize)+uv.xyxy;color=blendingWeight.x*texture2D(inputBuffer,blendingCoord.xy);color+=blendingWeight.y*texture2D(inputBuffer,blendingCoord.zw);}outputColor=color;}",Sse="varying vec2 vOffset0;varying vec2 vOffset1;void mainSupport(const in vec2 uv){vOffset0=uv+texelSize*vec2(1.0,0.0);vOffset1=uv+texelSize*vec2(0.0,1.0);}",Tle=class extends FN{constructor({blendFunction:n=qt.SRC,preset:e=Nh.MEDIUM,edgeDetectionMode:t=BN.COLOR,predicationMode:i=pse.DISABLED}={}){super("SMAAEffect",wse,{vertexShader:Sse,blendFunction:n,attributes:ho.CONVOLUTION|ho.DEPTH,uniforms:new Map([["weightMap",new Vt(null)]])});let r,s;arguments.length>1&&(r=arguments[0],s=arguments[1],arguments.length>2&&(e=arguments[2]),arguments.length>3&&(t=arguments[3])),this.renderTargetEdges=new ni(1,1,{depthBuffer:!1}),this.renderTargetEdges.texture.name="SMAA.Edges",this.renderTargetWeights=this.renderTargetEdges.clone(),this.renderTargetWeights.texture.name="SMAA.Weights",this.uniforms.get("weightMap").value=this.renderTargetWeights.texture,this.clearPass=new Vx(!0,!1,!1),this.clearPass.overrideClearColor=new at(0),this.clearPass.overrideClearAlpha=1,this.edgeDetectionPass=new uD(new vse),this.edgeDetectionMaterial.edgeDetectionMode=t,this.edgeDetectionMaterial.predicationMode=i,this.weightsPass=new uD(new bse);const o=new pf;o.onLoad=()=>{const a=new En(r);a.name="SMAA.Search",a.magFilter=gi,a.minFilter=gi,a.generateMipmaps=!1,a.needsUpdate=!0,a.flipY=!0,this.weightsMaterial.searchTexture=a;const l=new En(s);l.name="SMAA.Area",l.magFilter=Zt,l.minFilter=Zt,l.generateMipmaps=!1,l.needsUpdate=!0,l.flipY=!1,this.weightsMaterial.areaTexture=l,this.dispatchEvent({type:"load"})},o.itemStart("search"),o.itemStart("area"),r!==void 0&&s!==void 0?(o.itemEnd("search"),o.itemEnd("area")):typeof Image<"u"&&(r=new Image,s=new Image,r.addEventListener("load",()=>o.itemEnd("search")),s.addEventListener("load",()=>o.itemEnd("area")),r.src=hD,s.src=dD),this.applyPreset(e)}get edgesTexture(){return this.renderTargetEdges.texture}getEdgesTexture(){return this.edgesTexture}get weightsTexture(){return this.renderTargetWeights.texture}getWeightsTexture(){return this.weightsTexture}get edgeDetectionMaterial(){return this.edgeDetectionPass.fullscreenMaterial}get colorEdgesMaterial(){return this.edgeDetectionMaterial}getEdgeDetectionMaterial(){return this.edgeDetectionMaterial}get weightsMaterial(){return this.weightsPass.fullscreenMaterial}getWeightsMaterial(){return this.weightsMaterial}setEdgeDetectionThreshold(n){this.edgeDetectionMaterial.edgeDetectionThreshold=n}setOrthogonalSearchSteps(n){this.weightsMaterial.orthogonalSearchSteps=n}applyPreset(n){const e=this.edgeDetectionMaterial,t=this.weightsMaterial;switch(n){case Nh.LOW:e.edgeDetectionThreshold=.15,t.orthogonalSearchSteps=4,t.diagonalDetection=!1,t.cornerDetection=!1;break;case Nh.MEDIUM:e.edgeDetectionThreshold=.1,t.orthogonalSearchSteps=8,t.diagonalDetection=!1,t.cornerDetection=!1;break;case Nh.HIGH:e.edgeDetectionThreshold=.1,t.orthogonalSearchSteps=16,t.diagonalSearchSteps=8,t.cornerRounding=25,t.diagonalDetection=!0,t.cornerDetection=!0;break;case Nh.ULTRA:e.edgeDetectionThreshold=.05,t.orthogonalSearchSteps=32,t.diagonalSearchSteps=16,t.cornerRounding=25,t.diagonalDetection=!0,t.cornerDetection=!0;break}}setDepthTexture(n,e=ra){this.edgeDetectionMaterial.depthBuffer=n,this.edgeDetectionMaterial.depthPacking=e}update(n,e,t){this.clearPass.render(n,this.renderTargetEdges),this.edgeDetectionPass.render(n,e,this.renderTargetEdges),this.weightsPass.render(n,this.renderTargetEdges,this.renderTargetWeights)}setSize(n,e){this.edgeDetectionMaterial.setSize(n,e),this.weightsMaterial.setSize(n,e),this.renderTargetEdges.setSize(n,e),this.renderTargetWeights.setSize(n,e)}dispose(){const{searchTexture:n,areaTexture:e}=this.weightsMaterial;n!==null&&e!==null&&(n.dispose(),e.dispose()),super.dispose()}static get searchImageDataURL(){return hD}static get areaImageDataURL(){return dD}},xse="#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#define packFloatToRGBA(v) packDepthToRGBA(v)\n#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)\n#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\n#if DEPTH_PACKING == 3201\nuniform lowp sampler2D depthBuffer;\n#elif defined(GL_FRAGMENT_PRECISION_HIGH)\nuniform highp sampler2D depthBuffer;\n#else\nuniform mediump sampler2D depthBuffer;\n#endif\nuniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;vec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}float readDepth(const in vec2 uv){\n#if DEPTH_PACKING == 3201\nreturn unpackRGBAToDepth(texture2D(depthBuffer,uv));\n#else\nreturn texture2D(depthBuffer,uv).r;\n#endif\n}float getViewZ(const in float depth){\n#ifdef PERSPECTIVE_CAMERA\nreturn perspectiveDepthToViewZ(depth,cameraNear,cameraFar);\n#else\nreturn orthographicDepthToViewZ(depth,cameraNear,cameraFar);\n#endif\n}vec3 RGBToHCV(const in vec3 RGB){vec4 P=mix(vec4(RGB.bg,-1.0,2.0/3.0),vec4(RGB.gb,0.0,-1.0/3.0),step(RGB.b,RGB.g));vec4 Q=mix(vec4(P.xyw,RGB.r),vec4(RGB.r,P.yzx),step(P.x,RGB.r));float C=Q.x-min(Q.w,Q.y);float H=abs((Q.w-Q.y)/(6.0*C+EPSILON)+Q.z);return vec3(H,C,Q.x);}vec3 RGBToHSL(const in vec3 RGB){vec3 HCV=RGBToHCV(RGB);float L=HCV.z-HCV.y*0.5;float S=HCV.y/(1.0-abs(L*2.0-1.0)+EPSILON);return vec3(HCV.x,S,L);}vec3 HueToRGB(const in float H){float R=abs(H*6.0-3.0)-1.0;float G=2.0-abs(H*6.0-2.0);float B=2.0-abs(H*6.0-4.0);return clamp(vec3(R,G,B),0.0,1.0);}vec3 HSLToRGB(const in vec3 HSL){vec3 RGB=HueToRGB(HSL.x);float C=(1.0-abs(2.0*HSL.z-1.0))*HSL.y;return(RGB-0.5)*C+HSL.z;}FRAGMENT_HEAD void main(){FRAGMENT_MAIN_UV vec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGE color0.a=clamp(color0.a,0.0,1.0);gl_FragColor=color0;\n#ifdef ENCODE_OUTPUT\n#include <colorspace_fragment>\n#endif\n#include <dithering_fragment>\n}",Ese="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEAD void main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORT gl_Position=vec4(position.xy,1.0,1.0);}",Ase=class extends Wn{constructor(n,e,t,i,r=!1){super({name:"EffectMaterial",defines:{THREE_REVISION:ia.replace(/\D+/g,""),DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new Vt(null),depthBuffer:new Vt(null),resolution:new Vt(new Ue),texelSize:new Vt(new Ue),cameraNear:new Vt(.3),cameraFar:new Vt(1e3),aspect:new Vt(1),time:new Vt(0)},blending:Ai,toneMapped:!1,depthWrite:!1,depthTest:!1,dithering:r}),n&&this.setShaderParts(n),e&&this.setDefines(e),t&&this.setUniforms(t),this.copyCameraSettings(i)}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.uniforms.inputBuffer.value=n}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(n){this.uniforms.depthBuffer.value=n}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(n){this.defines.DEPTH_PACKING=n.toFixed(0),this.needsUpdate=!0}setDepthBuffer(n,e=ra){this.depthBuffer=n,this.depthPacking=e}setShaderData(n){this.setShaderParts(n.shaderParts),this.setDefines(n.defines),this.setUniforms(n.uniforms),this.setExtensions(n.extensions)}setShaderParts(n){return this.fragmentShader=xse.replace(un.FRAGMENT_HEAD,n.get(un.FRAGMENT_HEAD)||"").replace(un.FRAGMENT_MAIN_UV,n.get(un.FRAGMENT_MAIN_UV)||"").replace(un.FRAGMENT_MAIN_IMAGE,n.get(un.FRAGMENT_MAIN_IMAGE)||""),this.vertexShader=Ese.replace(un.VERTEX_HEAD,n.get(un.VERTEX_HEAD)||"").replace(un.VERTEX_MAIN_SUPPORT,n.get(un.VERTEX_MAIN_SUPPORT)||""),this.needsUpdate=!0,this}setDefines(n){for(const e of n.entries())this.defines[e[0]]=e[1];return this.needsUpdate=!0,this}setUniforms(n){for(const e of n.entries())this.uniforms[e[0]]=e[1];return this}setExtensions(n){this.extensions={};for(const e of n)this.extensions[e]=!0;return this}get encodeOutput(){return this.defines.ENCODE_OUTPUT!==void 0}set encodeOutput(n){this.encodeOutput!==n&&(n?this.defines.ENCODE_OUTPUT="1":delete this.defines.ENCODE_OUTPUT,this.needsUpdate=!0)}isOutputEncodingEnabled(n){return this.encodeOutput}setOutputEncodingEnabled(n){this.encodeOutput=n}get time(){return this.uniforms.time.value}set time(n){this.uniforms.time.value=n}setDeltaTime(n){this.uniforms.time.value+=n}adoptCameraSettings(n){this.copyCameraSettings(n)}copyCameraSettings(n){n&&(this.uniforms.cameraNear.value=n.near,this.uniforms.cameraFar.value=n.far,n instanceof Ei?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(n,e){const t=this.uniforms;t.resolution.value.set(n,e),t.texelSize.value.set(1/n,1/e),t.aspect.value=n/e}static get Section(){return un}};function fD(n,e,t){for(const i of e){const r="$1"+n+i.charAt(0).toUpperCase()+i.slice(1),s=new RegExp("([^\\.])(\\b"+i+"\\b)","g");for(const o of t.entries())o[1]!==null&&t.set(o[0],o[1].replace(s,r))}}function Mse(n,e,t){let i=e.getFragmentShader(),r=e.getVertexShader();const s=i!==void 0&&/mainImage/.test(i),o=i!==void 0&&/mainUv/.test(i);if(t.attributes|=e.getAttributes(),i===void 0)throw new Error("Missing fragment shader (".concat(e.name,")"));if(o&&(t.attributes&ho.CONVOLUTION)!==0)throw new Error("Effects that transform UVs are incompatible with convolution effects (".concat(e.name,")"));if(!s&&!o)throw new Error("Could not find mainImage or mainUv function (".concat(e.name,")"));{const a=/\w+\s+(\w+)\([\w\s,]*\)\s*{/g,l=t.shaderParts;let c=l.get(un.FRAGMENT_HEAD)||"",u=l.get(un.FRAGMENT_MAIN_UV)||"",d=l.get(un.FRAGMENT_MAIN_IMAGE)||"",f=l.get(un.VERTEX_HEAD)||"",m=l.get(un.VERTEX_MAIN_SUPPORT)||"";const v=new Set,g=new Set;if(o&&(u+="	".concat(n,"MainUv(UV);\n"),t.uvTransformation=!0),r!==null&&/mainSupport/.test(r)){const S=/mainSupport *\([\w\s]*?uv\s*?\)/.test(r);m+="	".concat(n,"MainSupport("),m+=S?"vUv);\n":");\n";for(const x of r.matchAll(/(?:varying\s+\w+\s+([\S\s]*?);)/g))for(const A of x[1].split(/\s*,\s*/))t.varyings.add(A),v.add(A),g.add(A);for(const x of r.matchAll(a))g.add(x[1])}for(const S of i.matchAll(a))g.add(S[1]);for(const S of e.defines.keys())g.add(S.replace(/\([\w\s,]*\)/g,""));for(const S of e.uniforms.keys())g.add(S);g.delete("while"),g.delete("for"),g.delete("if"),e.uniforms.forEach((S,x)=>t.uniforms.set(n+x.charAt(0).toUpperCase()+x.slice(1),S)),e.defines.forEach((S,x)=>t.defines.set(n+x.charAt(0).toUpperCase()+x.slice(1),S));const y=new Map([["fragment",i],["vertex",r]]);fD(n,g,t.defines),fD(n,g,y),i=y.get("fragment"),r=y.get("vertex");const b=e.blendMode;if(t.blendModes.set(b.blendFunction,b),s){e.inputColorSpace!==null&&e.inputColorSpace!==t.colorSpace&&(d+=e.inputColorSpace===hn?"color0 = sRGBTransferOETF(color0);\n	":"color0 = sRGBToLinear(color0);\n	"),e.outputColorSpace!==as?t.colorSpace=e.outputColorSpace:e.inputColorSpace!==null&&(t.colorSpace=e.inputColorSpace);const S=/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/;d+="".concat(n,"MainImage(color0, UV, "),(t.attributes&ho.DEPTH)!==0&&S.test(i)&&(d+="depth, ",t.readDepth=!0),d+="color1);\n	";const x=n+"BlendOpacity";t.uniforms.set(x,b.opacity),d+="color0 = blend".concat(b.blendFunction,"(color0, color1, ").concat(x,");\n\n	"),c+="uniform float ".concat(x,";\n\n")}if(c+=i+"\n",r!==null&&(f+=r+"\n"),l.set(un.FRAGMENT_HEAD,c),l.set(un.FRAGMENT_MAIN_UV,u),l.set(un.FRAGMENT_MAIN_IMAGE,d),l.set(un.VERTEX_HEAD,f),l.set(un.VERTEX_MAIN_SUPPORT,m),e.extensions!==null)for(const S of e.extensions)t.extensions.add(S)}}var Cle=class extends jr{constructor(n,...e){super("EffectPass"),this.fullscreenMaterial=new Ase(null,null,null,n),this.listener=t=>this.handleEvent(t),this.effects=[],this.setEffects(e),this.skipRendering=!1,this.minTime=1,this.maxTime=Number.POSITIVE_INFINITY,this.timeScale=1}set mainScene(n){for(const e of this.effects)e.mainScene=n}set mainCamera(n){this.fullscreenMaterial.copyCameraSettings(n);for(const e of this.effects)e.mainCamera=n}get encodeOutput(){return this.fullscreenMaterial.encodeOutput}set encodeOutput(n){this.fullscreenMaterial.encodeOutput=n}get dithering(){return this.fullscreenMaterial.dithering}set dithering(n){const e=this.fullscreenMaterial;e.dithering=n,e.needsUpdate=!0}setEffects(n){for(const e of this.effects)e.removeEventListener("change",this.listener);this.effects=n.sort((e,t)=>t.attributes-e.attributes);for(const e of this.effects)e.addEventListener("change",this.listener)}updateMaterial(){const n=new vre;let e=0;for(const o of this.effects)if(o.blendMode.blendFunction===qt.DST)n.attributes|=o.getAttributes()&ho.DEPTH;else{if((n.attributes&o.getAttributes()&ho.CONVOLUTION)!==0)throw new Error("Convolution effects cannot be merged (".concat(o.name,")"));Mse("e"+e++,o,n)}let t=n.shaderParts.get(un.FRAGMENT_HEAD),i=n.shaderParts.get(un.FRAGMENT_MAIN_IMAGE),r=n.shaderParts.get(un.FRAGMENT_MAIN_UV);const s=/\bblend\b/g;for(const o of n.blendModes.values())t+=o.getShaderCode().replace(s,"blend".concat(o.blendFunction))+"\n";(n.attributes&ho.DEPTH)!==0?(n.readDepth&&(i="float depth = readDepth(UV);\n\n	"+i),this.needsDepthTexture=this.getDepthTexture()===null):this.needsDepthTexture=!1,n.colorSpace===hn&&(i+="color0 = sRGBToLinear(color0);\n	"),n.uvTransformation?(r="vec2 transformedUv = vUv;\n"+r,n.defines.set("UV","transformedUv")):n.defines.set("UV","vUv"),n.shaderParts.set(un.FRAGMENT_HEAD,t),n.shaderParts.set(un.FRAGMENT_MAIN_IMAGE,i),n.shaderParts.set(un.FRAGMENT_MAIN_UV,r);for(const[o,a]of n.shaderParts)a!==null&&n.shaderParts.set(o,a.trim().replace(/^#/,"\n#"));this.skipRendering=e===0,this.needsSwap=!this.skipRendering,this.fullscreenMaterial.setShaderData(n)}recompile(){this.updateMaterial()}getDepthTexture(){return this.fullscreenMaterial.depthBuffer}setDepthTexture(n,e=ra){this.fullscreenMaterial.depthBuffer=n,this.fullscreenMaterial.depthPacking=e;for(const t of this.effects)t.setDepthTexture(n,e)}render(n,e,t,i,r){for(const s of this.effects)s.update(n,e,i);if(!this.skipRendering||this.renderToScreen){const s=this.fullscreenMaterial;s.inputBuffer=e.texture,s.time+=i*this.timeScale,n.setRenderTarget(this.renderToScreen?null:t),n.render(this.scene,this.camera)}}setSize(n,e){this.fullscreenMaterial.setSize(n,e);for(const t of this.effects)t.setSize(n,e)}initialize(n,e,t){this.renderer=n;for(const i of this.effects)i.initialize(n,e,t);this.updateMaterial(),t!==void 0&&t!==Zn&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}dispose(){super.dispose();for(const n of this.effects)n.removeEventListener("change",this.listener),n.dispose()}handleEvent(n){switch(n.type){case"change":this.recompile();break}}};export{JZ as $,uae as A,Dee as B,Zg as C,dae as D,Cx as E,cs as F,mU as G,Ol as H,gae as I,Fx as J,GU as K,eu as L,Hd as M,Ou as N,NQ as O,FQ as P,qQ as Q,eN as R,GQ as S,wae as T,oae as U,vae as V,_ae as W,gU as X,FU as Y,kZ as Z,yae as _,aae as a,Rae as a$,bae as a0,Mx as a1,_I as a2,Sae as a3,xae as a4,Kw as a5,y4 as a6,Nse as a7,Fse as a8,Qw as a9,at as aA,hi as aB,Zn as aC,Ue as aD,K as aE,Vk as aF,rn as aG,hQ as aH,Qoe as aI,mo as aJ,xd as aK,fY as aL,nae as aM,iae as aN,sae as aO,rae as aP,ZR as aQ,$L as aR,Ii as aS,tae as aT,Aae as aU,Cae as aV,jee as aW,Tae as aX,iv as aY,Iae as aZ,Mae as a_,Tz as aa,VH as ab,Gi as ac,Bse as ad,Tt as ae,jW as af,Vn as ag,K5 as ah,dQ as ai,eae as aj,tU as ak,eU as al,jY as am,mf as an,Ei as ao,Od as ap,tL as aq,Ts as ar,GS as as,B6 as at,Vr as au,hn as av,co as aw,AL as ax,Zoe as ay,Tv as az,Bx as b,wle as b$,Dae as b0,Use as b1,Wd as b2,$se as b3,Poe as b4,Foe as b5,Boe as b6,qoe as b7,Xoe as b8,zse as b9,Lae as bA,Fae as bB,ite as bC,jae as bD,MI as bE,rte as bF,Yae as bG,Qae as bH,Jae as bI,Zae as bJ,$ae as bK,ub as bL,Hae as bM,Wae as bN,sN as bO,cb as bP,lte as bQ,zae as bR,Hse as bS,qW as bT,di as bU,yle as bV,ble as bW,LN as bX,kN as bY,Sle as bZ,_le as b_,Wv as ba,hf as bb,af as bc,aa as bd,Hl as be,hx as bf,Ut as bg,_n as bh,ix as bi,mi as bj,Ji as bk,Nq as bl,Pae as bm,AI as bn,Kae as bo,ute as bp,Xae as bq,qae as br,Vae as bs,rN as bt,kae as bu,Uae as bv,Gae as bw,Bae as bx,Nae as by,Oae as bz,Vee as c,xle as c0,Ele as c1,Rv as c2,Mle as c3,Cle as c4,Ale as c5,Tle as c6,Nh as c7,pf as c8,Wn as c9,zt as ca,Fn as cb,uk as cc,qv as cd,zk as ce,_u as cf,Jt as cg,pae as d,us as e,bu as f,fae as g,TU as h,Cee as i,BQ as j,zQ as k,Eae as l,Kv as m,See as n,yf as o,Lt as p,Aee as q,mae as r,uI as s,cae as t,lae as u,Eee as v,hae as w,Lu as x,lee as y,mee as z};
