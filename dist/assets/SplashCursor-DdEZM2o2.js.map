{"version":3,"file":"SplashCursor-DdEZM2o2.js","sources":["../../src/components/SplashCursor.jsx"],"sourcesContent":["'use client';\nimport { useEffect, useRef } from 'react';\n\nfunction SplashCursor({\n  SIM_RESOLUTION = 128,\n  DYE_RESOLUTION = 1440,\n  CAPTURE_RESOLUTION = 512,\n  DENSITY_DISSIPATION = 3.5,\n  VELOCITY_DISSIPATION = 2,\n  PRESSURE = 0.1,\n  PRESSURE_ITERATIONS = 20,\n  CURL = 3,\n  SPLAT_RADIUS = 0.2,\n  SPLAT_FORCE = 6000,\n  SHADING = true,\n  COLOR_UPDATE_SPEED = 10,\n  BACK_COLOR = { r: 0.5, g: 0, b: 0 },\n  TRANSPARENT = true,\n}) {\n  const canvasRef = useRef(null);\n\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    if (!canvas) return;\n\n    function pointerPrototype() {\n      this.id = -1;\n      this.texcoordX = 0;\n      this.texcoordY = 0;\n      this.prevTexcoordX = 0;\n      this.prevTexcoordY = 0;\n      this.deltaX = 0;\n      this.deltaY = 0;\n      this.down = false;\n      this.moved = false;\n      this.color = [0, 0, 0];\n    }\n\n    let config = {\n      SIM_RESOLUTION,\n      DYE_RESOLUTION,\n      CAPTURE_RESOLUTION,\n      DENSITY_DISSIPATION,\n      VELOCITY_DISSIPATION,\n      PRESSURE,\n      PRESSURE_ITERATIONS,\n      CURL,\n      SPLAT_RADIUS,\n      SPLAT_FORCE,\n      SHADING,\n      COLOR_UPDATE_SPEED,\n      PAUSED: false,\n      BACK_COLOR,\n      TRANSPARENT,\n    };\n\n    let pointers = [new pointerPrototype()];\n\n    const { gl, ext } = getWebGLContext(canvas);\n    if (!ext.supportLinearFiltering) {\n      config.DYE_RESOLUTION = 256;\n      config.SHADING = false;\n    }\n\n    function getWebGLContext(canvas) {\n      const params = {\n        alpha: true,\n        depth: false,\n        stencil: false,\n        antialias: false,\n        preserveDrawingBuffer: false,\n      };\n      let gl = canvas.getContext('webgl2', params);\n      const isWebGL2 = !!gl;\n      if (!isWebGL2)\n        gl =\n          canvas.getContext('webgl', params) ||\n          canvas.getContext('experimental-webgl', params);\n      let halfFloat;\n      let supportLinearFiltering;\n      if (isWebGL2) {\n        gl.getExtension('EXT_color_buffer_float');\n        supportLinearFiltering = gl.getExtension('OES_texture_float_linear');\n      } else {\n        halfFloat = gl.getExtension('OES_texture_half_float');\n        supportLinearFiltering = gl.getExtension(\n          'OES_texture_half_float_linear'\n        );\n      }\n      gl.clearColor(0.0, 0.0, 0.0, 1.0);\n      const halfFloatTexType = isWebGL2\n        ? gl.HALF_FLOAT\n        : halfFloat && halfFloat.HALF_FLOAT_OES;\n      let formatRGBA;\n      let formatRG;\n      let formatR;\n\n      if (isWebGL2) {\n        formatRGBA = getSupportedFormat(\n          gl,\n          gl.RGBA16F,\n          gl.RGBA,\n          halfFloatTexType\n        );\n        formatRG = getSupportedFormat(gl, gl.RG16F, gl.RG, halfFloatTexType);\n        formatR = getSupportedFormat(gl, gl.R16F, gl.RED, halfFloatTexType);\n      } else {\n        formatRGBA = getSupportedFormat(gl, gl.RGBA, gl.RGBA, halfFloatTexType);\n        formatRG = getSupportedFormat(gl, gl.RGBA, gl.RGBA, halfFloatTexType);\n        formatR = getSupportedFormat(gl, gl.RGBA, gl.RGBA, halfFloatTexType);\n      }\n\n      return {\n        gl,\n        ext: {\n          formatRGBA,\n          formatRG,\n          formatR,\n          halfFloatTexType,\n          supportLinearFiltering,\n        },\n      };\n    }\n\n    function getSupportedFormat(gl, internalFormat, format, type) {\n      if (!supportRenderTextureFormat(gl, internalFormat, format, type)) {\n        switch (internalFormat) {\n          case gl.R16F:\n            return getSupportedFormat(gl, gl.RG16F, gl.RG, type);\n          case gl.RG16F:\n            return getSupportedFormat(gl, gl.RGBA16F, gl.RGBA, type);\n          default:\n            return null;\n        }\n      }\n      return {\n        internalFormat,\n        format,\n      };\n    }\n\n    function supportRenderTextureFormat(gl, internalFormat, format, type) {\n      const texture = gl.createTexture();\n      gl.bindTexture(gl.TEXTURE_2D, texture);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n      gl.texImage2D(\n        gl.TEXTURE_2D,\n        0,\n        internalFormat,\n        4,\n        4,\n        0,\n        format,\n        type,\n        null\n      );\n      const fbo = gl.createFramebuffer();\n      gl.bindFramebuffer(gl.FRAMEBUFFER, fbo);\n      gl.framebufferTexture2D(\n        gl.FRAMEBUFFER,\n        gl.COLOR_ATTACHMENT0,\n        gl.TEXTURE_2D,\n        texture,\n        0\n      );\n      const status = gl.checkFramebufferStatus(gl.FRAMEBUFFER);\n      return status === gl.FRAMEBUFFER_COMPLETE;\n    }\n\n    class Material {\n      constructor(vertexShader, fragmentShaderSource) {\n        this.vertexShader = vertexShader;\n        this.fragmentShaderSource = fragmentShaderSource;\n        this.programs = [];\n        this.activeProgram = null;\n        this.uniforms = [];\n      }\n      setKeywords(keywords) {\n        let hash = 0;\n        for (let i = 0; i < keywords.length; i++) hash += hashCode(keywords[i]);\n        let program = this.programs[hash];\n        if (program == null) {\n          let fragmentShader = compileShader(\n            gl.FRAGMENT_SHADER,\n            this.fragmentShaderSource,\n            keywords\n          );\n          program = createProgram(this.vertexShader, fragmentShader);\n          this.programs[hash] = program;\n        }\n        if (program === this.activeProgram) return;\n        this.uniforms = getUniforms(program);\n        this.activeProgram = program;\n      }\n      bind() {\n        gl.useProgram(this.activeProgram);\n      }\n    }\n\n    class Program {\n      constructor(vertexShader, fragmentShader) {\n        this.uniforms = {};\n        this.program = createProgram(vertexShader, fragmentShader);\n        this.uniforms = getUniforms(this.program);\n      }\n      bind() {\n        gl.useProgram(this.program);\n      }\n    }\n\n    function createProgram(vertexShader, fragmentShader) {\n      let program = gl.createProgram();\n      gl.attachShader(program, vertexShader);\n      gl.attachShader(program, fragmentShader);\n      gl.linkProgram(program);\n      if (!gl.getProgramParameter(program, gl.LINK_STATUS))\n        console.trace(gl.getProgramInfoLog(program));\n      return program;\n    }\n\n    function getUniforms(program) {\n      let uniforms = [];\n      let uniformCount = gl.getProgramParameter(program, gl.ACTIVE_UNIFORMS);\n      for (let i = 0; i < uniformCount; i++) {\n        let uniformName = gl.getActiveUniform(program, i).name;\n        uniforms[uniformName] = gl.getUniformLocation(program, uniformName);\n      }\n      return uniforms;\n    }\n\n    function compileShader(type, source, keywords) {\n      source = addKeywords(source, keywords);\n      const shader = gl.createShader(type);\n      gl.shaderSource(shader, source);\n      gl.compileShader(shader);\n      if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS))\n        console.trace(gl.getShaderInfoLog(shader));\n      return shader;\n    }\n\n    function addKeywords(source, keywords) {\n      if (!keywords) return source;\n      let keywordsString = '';\n      keywords.forEach((keyword) => {\n        keywordsString += '#define ' + keyword + '\\n';\n      });\n      return keywordsString + source;\n    }\n\n    const baseVertexShader = compileShader(\n      gl.VERTEX_SHADER,\n      `\n        precision highp float;\n        attribute vec2 aPosition;\n        varying vec2 vUv;\n        varying vec2 vL;\n        varying vec2 vR;\n        varying vec2 vT;\n        varying vec2 vB;\n        uniform vec2 texelSize;\n\n        void main () {\n            vUv = aPosition * 0.5 + 0.5;\n            vL = vUv - vec2(texelSize.x, 0.0);\n            vR = vUv + vec2(texelSize.x, 0.0);\n            vT = vUv + vec2(0.0, texelSize.y);\n            vB = vUv - vec2(0.0, texelSize.y);\n            gl_Position = vec4(aPosition, 0.0, 1.0);\n        }\n      `\n    );\n\n    const copyShader = compileShader(\n      gl.FRAGMENT_SHADER,\n      `\n        precision mediump float;\n        precision mediump sampler2D;\n        varying highp vec2 vUv;\n        uniform sampler2D uTexture;\n\n        void main () {\n            gl_FragColor = texture2D(uTexture, vUv);\n        }\n      `\n    );\n\n    const clearShader = compileShader(\n      gl.FRAGMENT_SHADER,\n      `\n        precision mediump float;\n        precision mediump sampler2D;\n        varying highp vec2 vUv;\n        uniform sampler2D uTexture;\n        uniform float value;\n\n        void main () {\n            gl_FragColor = value * texture2D(uTexture, vUv);\n        }\n     `\n    );\n\n    const displayShaderSource = `\n      precision highp float;\n      precision highp sampler2D;\n      varying vec2 vUv;\n      varying vec2 vL;\n      varying vec2 vR;\n      varying vec2 vT;\n      varying vec2 vB;\n      uniform sampler2D uTexture;\n      uniform sampler2D uDithering;\n      uniform vec2 ditherScale;\n      uniform vec2 texelSize;\n\n      vec3 linearToGamma (vec3 color) {\n          color = max(color, vec3(0));\n          return max(1.055 * pow(color, vec3(0.416666667)) - 0.055, vec3(0));\n      }\n\n      void main () {\n          vec3 c = texture2D(uTexture, vUv).rgb;\n          #ifdef SHADING\n              vec3 lc = texture2D(uTexture, vL).rgb;\n              vec3 rc = texture2D(uTexture, vR).rgb;\n              vec3 tc = texture2D(uTexture, vT).rgb;\n              vec3 bc = texture2D(uTexture, vB).rgb;\n\n              float dx = length(rc) - length(lc);\n              float dy = length(tc) - length(bc);\n\n              vec3 n = normalize(vec3(dx, dy, length(texelSize)));\n              vec3 l = vec3(0.0, 0.0, 1.0);\n\n              float diffuse = clamp(dot(n, l) + 0.7, 0.7, 1.0);\n              c *= diffuse;\n          #endif\n\n          float a = max(c.r, max(c.g, c.b));\n          gl_FragColor = vec4(c, a);\n      }\n    `;\n\n    const splatShader = compileShader(\n      gl.FRAGMENT_SHADER,\n      `\n        precision highp float;\n        precision highp sampler2D;\n        varying vec2 vUv;\n        uniform sampler2D uTarget;\n        uniform float aspectRatio;\n        uniform vec3 color;\n        uniform vec2 point;\n        uniform float radius;\n\n        void main () {\n            vec2 p = vUv - point.xy;\n            p.x *= aspectRatio;\n            vec3 splat = exp(-dot(p, p) / radius) * color;\n            vec3 base = texture2D(uTarget, vUv).xyz;\n            gl_FragColor = vec4(base + splat, 1.0);\n        }\n      `\n    );\n\n    const advectionShader = compileShader(\n      gl.FRAGMENT_SHADER,\n      `\n        precision highp float;\n        precision highp sampler2D;\n        varying vec2 vUv;\n        uniform sampler2D uVelocity;\n        uniform sampler2D uSource;\n        uniform vec2 texelSize;\n        uniform vec2 dyeTexelSize;\n        uniform float dt;\n        uniform float dissipation;\n\n        vec4 bilerp (sampler2D sam, vec2 uv, vec2 tsize) {\n            vec2 st = uv / tsize - 0.5;\n            vec2 iuv = floor(st);\n            vec2 fuv = fract(st);\n\n            vec4 a = texture2D(sam, (iuv + vec2(0.5, 0.5)) * tsize);\n            vec4 b = texture2D(sam, (iuv + vec2(1.5, 0.5)) * tsize);\n            vec4 c = texture2D(sam, (iuv + vec2(0.5, 1.5)) * tsize);\n            vec4 d = texture2D(sam, (iuv + vec2(1.5, 1.5)) * tsize);\n\n            return mix(mix(a, b, fuv.x), mix(c, d, fuv.x), fuv.y);\n        }\n\n        void main () {\n            #ifdef MANUAL_FILTERING\n                vec2 coord = vUv - dt * bilerp(uVelocity, vUv, texelSize).xy * texelSize;\n                vec4 result = bilerp(uSource, coord, dyeTexelSize);\n            #else\n                vec2 coord = vUv - dt * texture2D(uVelocity, vUv).xy * texelSize;\n                vec4 result = texture2D(uSource, coord);\n            #endif\n            float decay = 1.0 + dissipation * dt;\n            gl_FragColor = result / decay;\n        }\n      `,\n      ext.supportLinearFiltering ? null : ['MANUAL_FILTERING']\n    );\n\n    const divergenceShader = compileShader(\n      gl.FRAGMENT_SHADER,\n      `\n        precision mediump float;\n        precision mediump sampler2D;\n        varying highp vec2 vUv;\n        varying highp vec2 vL;\n        varying highp vec2 vR;\n        varying highp vec2 vT;\n        varying highp vec2 vB;\n        uniform sampler2D uVelocity;\n\n        void main () {\n            float L = texture2D(uVelocity, vL).x;\n            float R = texture2D(uVelocity, vR).x;\n            float T = texture2D(uVelocity, vT).y;\n            float B = texture2D(uVelocity, vB).y;\n\n            vec2 C = texture2D(uVelocity, vUv).xy;\n            if (vL.x < 0.0) { L = -C.x; }\n            if (vR.x > 1.0) { R = -C.x; }\n            if (vT.y > 1.0) { T = -C.y; }\n            if (vB.y < 0.0) { B = -C.y; }\n\n            float div = 0.5 * (R - L + T - B);\n            gl_FragColor = vec4(div, 0.0, 0.0, 1.0);\n        }\n      `\n    );\n\n    const curlShader = compileShader(\n      gl.FRAGMENT_SHADER,\n      `\n        precision mediump float;\n        precision mediump sampler2D;\n        varying highp vec2 vUv;\n        varying highp vec2 vL;\n        varying highp vec2 vR;\n        varying highp vec2 vT;\n        varying highp vec2 vB;\n        uniform sampler2D uVelocity;\n\n        void main () {\n            float L = texture2D(uVelocity, vL).y;\n            float R = texture2D(uVelocity, vR).y;\n            float T = texture2D(uVelocity, vT).x;\n            float B = texture2D(uVelocity, vB).x;\n            float vorticity = R - L - T + B;\n            gl_FragColor = vec4(0.5 * vorticity, 0.0, 0.0, 1.0);\n        }\n      `\n    );\n\n    const vorticityShader = compileShader(\n      gl.FRAGMENT_SHADER,\n      `\n        precision highp float;\n        precision highp sampler2D;\n        varying vec2 vUv;\n        varying vec2 vL;\n        varying vec2 vR;\n        varying vec2 vT;\n        varying vec2 vB;\n        uniform sampler2D uVelocity;\n        uniform sampler2D uCurl;\n        uniform float curl;\n        uniform float dt;\n\n        void main () {\n            float L = texture2D(uCurl, vL).x;\n            float R = texture2D(uCurl, vR).x;\n            float T = texture2D(uCurl, vT).x;\n            float B = texture2D(uCurl, vB).x;\n            float C = texture2D(uCurl, vUv).x;\n\n            vec2 force = 0.5 * vec2(abs(T) - abs(B), abs(R) - abs(L));\n            force /= length(force) + 0.0001;\n            force *= curl * C;\n            force.y *= -1.0;\n\n            vec2 velocity = texture2D(uVelocity, vUv).xy;\n            velocity += force * dt;\n            velocity = min(max(velocity, -1000.0), 1000.0);\n            gl_FragColor = vec4(velocity, 0.0, 1.0);\n        }\n      `\n    );\n\n    const pressureShader = compileShader(\n      gl.FRAGMENT_SHADER,\n      `\n        precision mediump float;\n        precision mediump sampler2D;\n        varying highp vec2 vUv;\n        varying highp vec2 vL;\n        varying highp vec2 vR;\n        varying highp vec2 vT;\n        varying highp vec2 vB;\n        uniform sampler2D uPressure;\n        uniform sampler2D uDivergence;\n\n        void main () {\n            float L = texture2D(uPressure, vL).x;\n            float R = texture2D(uPressure, vR).x;\n            float T = texture2D(uPressure, vT).x;\n            float B = texture2D(uPressure, vB).x;\n            float C = texture2D(uPressure, vUv).x;\n            float divergence = texture2D(uDivergence, vUv).x;\n            float pressure = (L + R + B + T - divergence) * 0.25;\n            gl_FragColor = vec4(pressure, 0.0, 0.0, 1.0);\n        }\n      `\n    );\n\n    const gradientSubtractShader = compileShader(\n      gl.FRAGMENT_SHADER,\n      `\n        precision mediump float;\n        precision mediump sampler2D;\n        varying highp vec2 vUv;\n        varying highp vec2 vL;\n        varying highp vec2 vR;\n        varying highp vec2 vT;\n        varying highp vec2 vB;\n        uniform sampler2D uPressure;\n        uniform sampler2D uVelocity;\n\n        void main () {\n            float L = texture2D(uPressure, vL).x;\n            float R = texture2D(uPressure, vR).x;\n            float T = texture2D(uPressure, vT).x;\n            float B = texture2D(uPressure, vB).x;\n            vec2 velocity = texture2D(uVelocity, vUv).xy;\n            velocity.xy -= vec2(R - L, T - B);\n            gl_FragColor = vec4(velocity, 0.0, 1.0);\n        }\n      `\n    );\n\n    const blit = (() => {\n      gl.bindBuffer(gl.ARRAY_BUFFER, gl.createBuffer());\n      gl.bufferData(\n        gl.ARRAY_BUFFER,\n        new Float32Array([-1, -1, -1, 1, 1, 1, 1, -1]),\n        gl.STATIC_DRAW\n      );\n      gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, gl.createBuffer());\n      gl.bufferData(\n        gl.ELEMENT_ARRAY_BUFFER,\n        new Uint16Array([0, 1, 2, 0, 2, 3]),\n        gl.STATIC_DRAW\n      );\n      gl.vertexAttribPointer(0, 2, gl.FLOAT, false, 0, 0);\n      gl.enableVertexAttribArray(0);\n      return (target, clear = false) => {\n        if (target == null) {\n          gl.viewport(0, 0, gl.drawingBufferWidth, gl.drawingBufferHeight);\n          gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n        } else {\n          gl.viewport(0, 0, target.width, target.height);\n          gl.bindFramebuffer(gl.FRAMEBUFFER, target.fbo);\n        }\n        if (clear) {\n          gl.clearColor(0.0, 0.0, 0.0, 1.0);\n          gl.clear(gl.COLOR_BUFFER_BIT);\n        }\n        gl.drawElements(gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0);\n      };\n    })();\n\n    let dye, velocity, divergence, curl, pressure;\n\n    const copyProgram = new Program(baseVertexShader, copyShader);\n    const clearProgram = new Program(baseVertexShader, clearShader);\n    const splatProgram = new Program(baseVertexShader, splatShader);\n    const advectionProgram = new Program(baseVertexShader, advectionShader);\n    const divergenceProgram = new Program(baseVertexShader, divergenceShader);\n    const curlProgram = new Program(baseVertexShader, curlShader);\n    const vorticityProgram = new Program(baseVertexShader, vorticityShader);\n    const pressureProgram = new Program(baseVertexShader, pressureShader);\n    const gradienSubtractProgram = new Program(\n      baseVertexShader,\n      gradientSubtractShader\n    );\n    const displayMaterial = new Material(baseVertexShader, displayShaderSource);\n\n    function initFramebuffers() {\n      let simRes = getResolution(config.SIM_RESOLUTION);\n      let dyeRes = getResolution(config.DYE_RESOLUTION);\n      const texType = ext.halfFloatTexType;\n      const rgba = ext.formatRGBA;\n      const rg = ext.formatRG;\n      const r = ext.formatR;\n      const filtering = ext.supportLinearFiltering ? gl.LINEAR : gl.NEAREST;\n      gl.disable(gl.BLEND);\n\n      if (!dye)\n        dye = createDoubleFBO(\n          dyeRes.width,\n          dyeRes.height,\n          rgba.internalFormat,\n          rgba.format,\n          texType,\n          filtering\n        );\n      else\n        dye = resizeDoubleFBO(\n          dye,\n          dyeRes.width,\n          dyeRes.height,\n          rgba.internalFormat,\n          rgba.format,\n          texType,\n          filtering\n        );\n\n      if (!velocity)\n        velocity = createDoubleFBO(\n          simRes.width,\n          simRes.height,\n          rg.internalFormat,\n          rg.format,\n          texType,\n          filtering\n        );\n      else\n        velocity = resizeDoubleFBO(\n          velocity,\n          simRes.width,\n          simRes.height,\n          rg.internalFormat,\n          rg.format,\n          texType,\n          filtering\n        );\n\n      divergence = createFBO(\n        simRes.width,\n        simRes.height,\n        r.internalFormat,\n        r.format,\n        texType,\n        gl.NEAREST\n      );\n      curl = createFBO(\n        simRes.width,\n        simRes.height,\n        r.internalFormat,\n        r.format,\n        texType,\n        gl.NEAREST\n      );\n      pressure = createDoubleFBO(\n        simRes.width,\n        simRes.height,\n        r.internalFormat,\n        r.format,\n        texType,\n        gl.NEAREST\n      );\n    }\n\n    function createFBO(w, h, internalFormat, format, type, param) {\n      gl.activeTexture(gl.TEXTURE0);\n      let texture = gl.createTexture();\n      gl.bindTexture(gl.TEXTURE_2D, texture);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, param);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, param);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n      gl.texImage2D(\n        gl.TEXTURE_2D,\n        0,\n        internalFormat,\n        w,\n        h,\n        0,\n        format,\n        type,\n        null\n      );\n\n      let fbo = gl.createFramebuffer();\n      gl.bindFramebuffer(gl.FRAMEBUFFER, fbo);\n      gl.framebufferTexture2D(\n        gl.FRAMEBUFFER,\n        gl.COLOR_ATTACHMENT0,\n        gl.TEXTURE_2D,\n        texture,\n        0\n      );\n      gl.viewport(0, 0, w, h);\n      gl.clear(gl.COLOR_BUFFER_BIT);\n\n      let texelSizeX = 1.0 / w;\n      let texelSizeY = 1.0 / h;\n      return {\n        texture,\n        fbo,\n        width: w,\n        height: h,\n        texelSizeX,\n        texelSizeY,\n        attach(id) {\n          gl.activeTexture(gl.TEXTURE0 + id);\n          gl.bindTexture(gl.TEXTURE_2D, texture);\n          return id;\n        },\n      };\n    }\n\n    function createDoubleFBO(w, h, internalFormat, format, type, param) {\n      let fbo1 = createFBO(w, h, internalFormat, format, type, param);\n      let fbo2 = createFBO(w, h, internalFormat, format, type, param);\n      return {\n        width: w,\n        height: h,\n        texelSizeX: fbo1.texelSizeX,\n        texelSizeY: fbo1.texelSizeY,\n        get read() {\n          return fbo1;\n        },\n        set read(value) {\n          fbo1 = value;\n        },\n        get write() {\n          return fbo2;\n        },\n        set write(value) {\n          fbo2 = value;\n        },\n        swap() {\n          let temp = fbo1;\n          fbo1 = fbo2;\n          fbo2 = temp;\n        },\n      };\n    }\n\n    function resizeFBO(target, w, h, internalFormat, format, type, param) {\n      let newFBO = createFBO(w, h, internalFormat, format, type, param);\n      copyProgram.bind();\n      gl.uniform1i(copyProgram.uniforms.uTexture, target.attach(0));\n      blit(newFBO);\n      return newFBO;\n    }\n\n    function resizeDoubleFBO(\n      target,\n      w,\n      h,\n      internalFormat,\n      format,\n      type,\n      param\n    ) {\n      if (target.width === w && target.height === h) return target;\n      target.read = resizeFBO(\n        target.read,\n        w,\n        h,\n        internalFormat,\n        format,\n        type,\n        param\n      );\n      target.write = createFBO(w, h, internalFormat, format, type, param);\n      target.width = w;\n      target.height = h;\n      target.texelSizeX = 1.0 / w;\n      target.texelSizeY = 1.0 / h;\n      return target;\n    }\n\n    function updateKeywords() {\n      let displayKeywords = [];\n      if (config.SHADING) displayKeywords.push('SHADING');\n      displayMaterial.setKeywords(displayKeywords);\n    }\n\n    updateKeywords();\n    initFramebuffers();\n    let lastUpdateTime = Date.now();\n    let colorUpdateTimer = 0.0;\n\n    function updateFrame() {\n      const dt = calcDeltaTime();\n      if (resizeCanvas()) initFramebuffers();\n      updateColors(dt);\n      applyInputs();\n      step(dt);\n      render(null);\n      requestAnimationFrame(updateFrame);\n    }\n\n    function calcDeltaTime() {\n      let now = Date.now();\n      let dt = (now - lastUpdateTime) / 1000;\n      dt = Math.min(dt, 0.016666);\n      lastUpdateTime = now;\n      return dt;\n    }\n\n    function resizeCanvas() {\n      let width = scaleByPixelRatio(canvas.clientWidth);\n      let height = scaleByPixelRatio(canvas.clientHeight);\n      if (canvas.width !== width || canvas.height !== height) {\n        canvas.width = width;\n        canvas.height = height;\n        return true;\n      }\n      return false;\n    }\n\n    function updateColors(dt) {\n      colorUpdateTimer += dt * config.COLOR_UPDATE_SPEED;\n      if (colorUpdateTimer >= 1) {\n        colorUpdateTimer = wrap(colorUpdateTimer, 0, 1);\n        pointers.forEach((p) => {\n          p.color = generateColor();\n        });\n      }\n    }\n\n    function applyInputs() {\n      pointers.forEach((p) => {\n        if (p.moved) {\n          p.moved = false;\n          splatPointer(p);\n        }\n      });\n    }\n\n    function step(dt) {\n      gl.disable(gl.BLEND);\n      curlProgram.bind();\n      gl.uniform2f(\n        curlProgram.uniforms.texelSize,\n        velocity.texelSizeX,\n        velocity.texelSizeY\n      );\n      gl.uniform1i(curlProgram.uniforms.uVelocity, velocity.read.attach(0));\n      blit(curl);\n\n      vorticityProgram.bind();\n      gl.uniform2f(\n        vorticityProgram.uniforms.texelSize,\n        velocity.texelSizeX,\n        velocity.texelSizeY\n      );\n      gl.uniform1i(\n        vorticityProgram.uniforms.uVelocity,\n        velocity.read.attach(0)\n      );\n      gl.uniform1i(vorticityProgram.uniforms.uCurl, curl.attach(1));\n      gl.uniform1f(vorticityProgram.uniforms.curl, config.CURL);\n      gl.uniform1f(vorticityProgram.uniforms.dt, dt);\n      blit(velocity.write);\n      velocity.swap();\n\n      divergenceProgram.bind();\n      gl.uniform2f(\n        divergenceProgram.uniforms.texelSize,\n        velocity.texelSizeX,\n        velocity.texelSizeY\n      );\n      gl.uniform1i(\n        divergenceProgram.uniforms.uVelocity,\n        velocity.read.attach(0)\n      );\n      blit(divergence);\n\n      clearProgram.bind();\n      gl.uniform1i(clearProgram.uniforms.uTexture, pressure.read.attach(0));\n      gl.uniform1f(clearProgram.uniforms.value, config.PRESSURE);\n      blit(pressure.write);\n      pressure.swap();\n\n      pressureProgram.bind();\n      gl.uniform2f(\n        pressureProgram.uniforms.texelSize,\n        velocity.texelSizeX,\n        velocity.texelSizeY\n      );\n      gl.uniform1i(pressureProgram.uniforms.uDivergence, divergence.attach(0));\n      for (let i = 0; i < config.PRESSURE_ITERATIONS; i++) {\n        gl.uniform1i(\n          pressureProgram.uniforms.uPressure,\n          pressure.read.attach(1)\n        );\n        blit(pressure.write);\n        pressure.swap();\n      }\n\n      gradienSubtractProgram.bind();\n      gl.uniform2f(\n        gradienSubtractProgram.uniforms.texelSize,\n        velocity.texelSizeX,\n        velocity.texelSizeY\n      );\n      gl.uniform1i(\n        gradienSubtractProgram.uniforms.uPressure,\n        pressure.read.attach(0)\n      );\n      gl.uniform1i(\n        gradienSubtractProgram.uniforms.uVelocity,\n        velocity.read.attach(1)\n      );\n      blit(velocity.write);\n      velocity.swap();\n\n      advectionProgram.bind();\n      gl.uniform2f(\n        advectionProgram.uniforms.texelSize,\n        velocity.texelSizeX,\n        velocity.texelSizeY\n      );\n      if (!ext.supportLinearFiltering)\n        gl.uniform2f(\n          advectionProgram.uniforms.dyeTexelSize,\n          velocity.texelSizeX,\n          velocity.texelSizeY\n        );\n      let velocityId = velocity.read.attach(0);\n      gl.uniform1i(advectionProgram.uniforms.uVelocity, velocityId);\n      gl.uniform1i(advectionProgram.uniforms.uSource, velocityId);\n      gl.uniform1f(advectionProgram.uniforms.dt, dt);\n      gl.uniform1f(\n        advectionProgram.uniforms.dissipation,\n        config.VELOCITY_DISSIPATION\n      );\n      blit(velocity.write);\n      velocity.swap();\n\n      if (!ext.supportLinearFiltering)\n        gl.uniform2f(\n          advectionProgram.uniforms.dyeTexelSize,\n          dye.texelSizeX,\n          dye.texelSizeY\n        );\n      gl.uniform1i(\n        advectionProgram.uniforms.uVelocity,\n        velocity.read.attach(0)\n      );\n      gl.uniform1i(advectionProgram.uniforms.uSource, dye.read.attach(1));\n      gl.uniform1f(\n        advectionProgram.uniforms.dissipation,\n        config.DENSITY_DISSIPATION\n      );\n      blit(dye.write);\n      dye.swap();\n    }\n\n    function render(target) {\n      gl.blendFunc(gl.ONE, gl.ONE_MINUS_SRC_ALPHA);\n      gl.enable(gl.BLEND);\n      drawDisplay(target);\n    }\n\n    function drawDisplay(target) {\n      let width = target == null ? gl.drawingBufferWidth : target.width;\n      let height = target == null ? gl.drawingBufferHeight : target.height;\n      displayMaterial.bind();\n      if (config.SHADING)\n        gl.uniform2f(\n          displayMaterial.uniforms.texelSize,\n          1.0 / width,\n          1.0 / height\n        );\n      gl.uniform1i(displayMaterial.uniforms.uTexture, dye.read.attach(0));\n      blit(target);\n    }\n\n    function splatPointer(pointer) {\n      let dx = pointer.deltaX * config.SPLAT_FORCE;\n      let dy = pointer.deltaY * config.SPLAT_FORCE;\n      splat(pointer.texcoordX, pointer.texcoordY, dx, dy, pointer.color);\n    }\n\n    function clickSplat(pointer) {\n      const color = generateColor();\n      color.r *= 10.0;\n      color.g *= 10.0;\n      color.b *= 10.0;\n      let dx = 10 * (Math.random() - 0.5);\n      let dy = 30 * (Math.random() - 0.5);\n      splat(pointer.texcoordX, pointer.texcoordY, dx, dy, color);\n    }\n\n    function splat(x, y, dx, dy, color) {\n      splatProgram.bind();\n      gl.uniform1i(splatProgram.uniforms.uTarget, velocity.read.attach(0));\n      gl.uniform1f(\n        splatProgram.uniforms.aspectRatio,\n        canvas.width / canvas.height\n      );\n      gl.uniform2f(splatProgram.uniforms.point, x, y);\n      gl.uniform3f(splatProgram.uniforms.color, dx, dy, 0.0);\n      gl.uniform1f(\n        splatProgram.uniforms.radius,\n        correctRadius(config.SPLAT_RADIUS / 100.0)\n      );\n      blit(velocity.write);\n      velocity.swap();\n\n      gl.uniform1i(splatProgram.uniforms.uTarget, dye.read.attach(0));\n      gl.uniform3f(splatProgram.uniforms.color, color.r, color.g, color.b);\n      blit(dye.write);\n      dye.swap();\n    }\n\n    function correctRadius(radius) {\n      let aspectRatio = canvas.width / canvas.height;\n      if (aspectRatio > 1) radius *= aspectRatio;\n      return radius;\n    }\n\n    function updatePointerDownData(pointer, id, posX, posY) {\n      pointer.id = id;\n      pointer.down = true;\n      pointer.moved = false;\n      pointer.texcoordX = posX / canvas.width;\n      pointer.texcoordY = 1.0 - posY / canvas.height;\n      pointer.prevTexcoordX = pointer.texcoordX;\n      pointer.prevTexcoordY = pointer.texcoordY;\n      pointer.deltaX = 0;\n      pointer.deltaY = 0;\n      pointer.color = generateColor();\n    }\n\n    function updatePointerMoveData(pointer, posX, posY, color) {\n      pointer.prevTexcoordX = pointer.texcoordX;\n      pointer.prevTexcoordY = pointer.texcoordY;\n      pointer.texcoordX = posX / canvas.width;\n      pointer.texcoordY = 1.0 - posY / canvas.height;\n      pointer.deltaX = correctDeltaX(pointer.texcoordX - pointer.prevTexcoordX);\n      pointer.deltaY = correctDeltaY(pointer.texcoordY - pointer.prevTexcoordY);\n      pointer.moved =\n        Math.abs(pointer.deltaX) > 0 || Math.abs(pointer.deltaY) > 0;\n      pointer.color = color;\n    }\n\n    function updatePointerUpData(pointer) {\n      pointer.down = false;\n    }\n\n    function correctDeltaX(delta) {\n      let aspectRatio = canvas.width / canvas.height;\n      if (aspectRatio < 1) delta *= aspectRatio;\n      return delta;\n    }\n\n    function correctDeltaY(delta) {\n      let aspectRatio = canvas.width / canvas.height;\n      if (aspectRatio > 1) delta /= aspectRatio;\n      return delta;\n    }\n\n    function generateColor() {\n      let c = HSVtoRGB(Math.random(), 1.0, 1.0);\n      c.r *= 0.15;\n      c.g *= 0.15;\n      c.b *= 0.15;\n      return c;\n    }\n\n    function HSVtoRGB(h, s, v) {\n      let r, g, b, i, f, p, q, t;\n      i = Math.floor(h * 6);\n      f = h * 6 - i;\n      p = v * (1 - s);\n      q = v * (1 - f * s);\n      t = v * (1 - (1 - f) * s);\n      switch (i % 6) {\n        case 0:\n          r = v;\n          g = t;\n          b = p;\n          break;\n        case 1:\n          r = q;\n          g = v;\n          b = p;\n          break;\n        case 2:\n          r = p;\n          g = v;\n          b = t;\n          break;\n        case 3:\n          r = p;\n          g = q;\n          b = v;\n          break;\n        case 4:\n          r = t;\n          g = p;\n          b = v;\n          break;\n        case 5:\n          r = v;\n          g = p;\n          b = q;\n          break;\n        default:\n          break;\n      }\n      return { r, g, b };\n    }\n\n    function wrap(value, min, max) {\n      const range = max - min;\n      if (range === 0) return min;\n      return ((value - min) % range) + min;\n    }\n\n    function getResolution(resolution) {\n      let aspectRatio = gl.drawingBufferWidth / gl.drawingBufferHeight;\n      if (aspectRatio < 1) aspectRatio = 1.0 / aspectRatio;\n      const min = Math.round(resolution);\n      const max = Math.round(resolution * aspectRatio);\n      if (gl.drawingBufferWidth > gl.drawingBufferHeight)\n        return { width: max, height: min };\n      else return { width: min, height: max };\n    }\n\n    function scaleByPixelRatio(input) {\n      const pixelRatio = window.devicePixelRatio || 1;\n      return Math.floor(input * pixelRatio);\n    }\n\n    function hashCode(s) {\n      if (s.length === 0) return 0;\n      let hash = 0;\n      for (let i = 0; i < s.length; i++) {\n        hash = (hash << 5) - hash + s.charCodeAt(i);\n        hash |= 0;\n      }\n      return hash;\n    }\n\n    window.addEventListener('mousedown', (e) => {\n      let pointer = pointers[0];\n      let posX = scaleByPixelRatio(e.clientX);\n      let posY = scaleByPixelRatio(e.clientY);\n      updatePointerDownData(pointer, -1, posX, posY);\n      clickSplat(pointer);\n    });\n\n    document.body.addEventListener(\n      'mousemove',\n      function handleFirstMouseMove(e) {\n        let pointer = pointers[0];\n        let posX = scaleByPixelRatio(e.clientX);\n        let posY = scaleByPixelRatio(e.clientY);\n        let color = generateColor();\n        updateFrame();\n        updatePointerMoveData(pointer, posX, posY, color);\n        document.body.removeEventListener('mousemove', handleFirstMouseMove);\n      }\n    );\n\n    window.addEventListener('mousemove', (e) => {\n      let pointer = pointers[0];\n      let posX = scaleByPixelRatio(e.clientX);\n      let posY = scaleByPixelRatio(e.clientY);\n      let color = pointer.color;\n      updatePointerMoveData(pointer, posX, posY, color);\n    });\n\n    document.body.addEventListener(\n      'touchstart',\n      function handleFirstTouchStart(e) {\n        const touches = e.targetTouches;\n        let pointer = pointers[0];\n        for (let i = 0; i < touches.length; i++) {\n          let posX = scaleByPixelRatio(touches[i].clientX);\n          let posY = scaleByPixelRatio(touches[i].clientY);\n          updateFrame();\n          updatePointerDownData(pointer, touches[i].identifier, posX, posY);\n        }\n        document.body.removeEventListener('touchstart', handleFirstTouchStart);\n      }\n    );\n\n    window.addEventListener('touchstart', (e) => {\n      const touches = e.targetTouches;\n      let pointer = pointers[0];\n      for (let i = 0; i < touches.length; i++) {\n        let posX = scaleByPixelRatio(touches[i].clientX);\n        let posY = scaleByPixelRatio(touches[i].clientY);\n        updatePointerDownData(pointer, touches[i].identifier, posX, posY);\n      }\n    });\n\n    window.addEventListener(\n      'touchmove',\n      (e) => {\n        const touches = e.targetTouches;\n        let pointer = pointers[0];\n        for (let i = 0; i < touches.length; i++) {\n          let posX = scaleByPixelRatio(touches[i].clientX);\n          let posY = scaleByPixelRatio(touches[i].clientY);\n          updatePointerMoveData(pointer, posX, posY, pointer.color);\n        }\n      },\n      false\n    );\n\n    window.addEventListener('touchend', (e) => {\n      const touches = e.changedTouches;\n      let pointer = pointers[0];\n      for (let i = 0; i < touches.length; i++) {\n        updatePointerUpData(pointer);\n      }\n    });\n\n    updateFrame();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [\n    SIM_RESOLUTION,\n    DYE_RESOLUTION,\n    CAPTURE_RESOLUTION,\n    DENSITY_DISSIPATION,\n    VELOCITY_DISSIPATION,\n    PRESSURE,\n    PRESSURE_ITERATIONS,\n    CURL,\n    SPLAT_RADIUS,\n    SPLAT_FORCE,\n    SHADING,\n    COLOR_UPDATE_SPEED,\n    BACK_COLOR,\n    TRANSPARENT,\n  ]);\n\n  return (\n    <div className=\"fixed top-0 left-0 z-50 pointer-events-none w-full h-full\">\n      <canvas\n        ref={canvasRef}\n        id=\"fluid\"\n        className=\"w-screen h-screen block\"\n      ></canvas>\n    </div>\n  );\n}\n\nexport default SplashCursor;\n"],"names":["SplashCursor","SIM_RESOLUTION","DYE_RESOLUTION","CAPTURE_RESOLUTION","DENSITY_DISSIPATION","VELOCITY_DISSIPATION","PRESSURE","PRESSURE_ITERATIONS","CURL","SPLAT_RADIUS","SPLAT_FORCE","SHADING","COLOR_UPDATE_SPEED","BACK_COLOR","TRANSPARENT","canvasRef","useRef","useEffect","canvas","pointerPrototype","config","pointers","gl","ext","getWebGLContext","params","isWebGL2","halfFloat","supportLinearFiltering","halfFloatTexType","formatRGBA","formatRG","formatR","getSupportedFormat","internalFormat","format","type","supportRenderTextureFormat","texture","fbo","Material","vertexShader","fragmentShaderSource","keywords","hash","i","hashCode","program","fragmentShader","compileShader","createProgram","getUniforms","Program","uniforms","uniformCount","uniformName","source","addKeywords","shader","keywordsString","keyword","baseVertexShader","copyShader","clearShader","displayShaderSource","splatShader","advectionShader","divergenceShader","curlShader","vorticityShader","pressureShader","gradientSubtractShader","blit","target","clear","dye","velocity","divergence","curl","pressure","copyProgram","clearProgram","splatProgram","advectionProgram","divergenceProgram","curlProgram","vorticityProgram","pressureProgram","gradienSubtractProgram","displayMaterial","initFramebuffers","simRes","getResolution","dyeRes","texType","rgba","rg","r","filtering","resizeDoubleFBO","createDoubleFBO","createFBO","w","h","param","texelSizeX","texelSizeY","id","fbo1","fbo2","value","temp","resizeFBO","newFBO","updateKeywords","displayKeywords","lastUpdateTime","colorUpdateTimer","updateFrame","dt","calcDeltaTime","resizeCanvas","updateColors","applyInputs","step","render","now","width","scaleByPixelRatio","height","wrap","p","generateColor","splatPointer","velocityId","drawDisplay","pointer","dx","dy","splat","clickSplat","color","x","y","correctRadius","radius","aspectRatio","updatePointerDownData","posX","posY","updatePointerMoveData","correctDeltaX","correctDeltaY","updatePointerUpData","delta","c","HSVtoRGB","s","v","g","b","q","t","min","max","range","resolution","input","pixelRatio","handleFirstMouseMove","e","handleFirstTouchStart","touches","jsx"],"mappings":"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"}