{"version":3,"file":"Beats-BJp-WQ8Q.js","sources":["../../src/components/Beats.jsx"],"sourcesContent":["import React, { useState, useEffect, useMemo, memo } from 'react';\nimport { motion } from 'framer-motion';\nimport { Play, Pause } from 'lucide-react';\n\nconst Beats = memo(function Beats({ items = [], baseRadius = 220 }) {\n  const [windowWidth, setWindowWidth] = useState(window.innerWidth);\n  const [previewing, setPreviewing] = useState(null); // track audio preview id\n\n  // âœ… Handle resize\n  useEffect(() => {\n    const handleResize = () => setWindowWidth(window.innerWidth);\n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n\n  // âœ… Dynamic radius scaling with clamp (mobile â†’ 4K)\n  const responsiveRadius = useMemo(() => {\n    return Math.min(\n      Math.max(windowWidth / 5, 120), // minimum circle size\n      baseRadius * 1.6 // max cap for ultra-wide screens\n    );\n  }, [windowWidth, baseRadius]);\n\n  // âœ… Decide layout: circle OR grid\n  const useGridLayout = windowWidth < 480 || items.length > 10;\n\n  // âœ… Precompute positions for circle layout\n  const positions = useMemo(() => {\n    if (useGridLayout) return [];\n    const itemCount = items.length;\n    return items.map((_, index) => {\n      const angle = (index / itemCount) * 2 * Math.PI;\n      const x = responsiveRadius + responsiveRadius * Math.cos(angle) - 80;\n      const y = responsiveRadius + responsiveRadius * Math.sin(angle) - 90;\n      return { x, y };\n    });\n  }, [items, responsiveRadius, useGridLayout]);\n\n  // âœ… Handle audio preview toggle\n  const togglePreview = (id, url) => {\n    if (previewing === id) {\n      const audio = document.getElementById(`audio-${id}`);\n      if (audio) audio.pause();\n      setPreviewing(null);\n    } else {\n      if (previewing !== null) {\n        const prevAudio = document.getElementById(`audio-${previewing}`);\n        if (prevAudio) prevAudio.pause();\n      }\n      const audio = document.getElementById(`audio-${id}`);\n      if (audio) {\n        audio.play();\n        setPreviewing(id);\n      }\n    }\n  };\n\n  return (\n    <div\n      className={`relative mx-auto ${\n        useGridLayout\n          ? 'grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-6'\n          : ''\n      }`}\n      style={\n        useGridLayout\n          ? {}\n          : { width: responsiveRadius * 2, height: responsiveRadius * 2 }\n      }\n    >\n      {items.length === 0 && (\n        <div className=\"text-center text-gray-400 py-12 w-full\">\n          ðŸŽ§ No beats available yet\n        </div>\n      )}\n\n      {items.map((item, index) => {\n        const { x, y } = positions[index] || {};\n        const isPreviewing = previewing === item.id;\n\n        return (\n          <motion.div\n            key={item.id || index}\n            role=\"article\"\n            aria-label={`Beat: ${item.title}`}\n            tabIndex={0}\n            style={\n              useGridLayout\n                ? {}\n                : {\n                    position: 'absolute',\n                    left: x,\n                    top: y,\n                    width: 'clamp(130px, 20vw, 210px)',\n                    height: 'clamp(170px, 30vw, 250px)',\n                  }\n            }\n            whileHover={{\n              scale: 1.06,\n              rotate: 0,\n              transition: { duration: 0.25 },\n            }}\n            whileTap={{ scale: 0.95 }}\n            initial={{ opacity: 0, scale: 0.85 }}\n            animate={{ opacity: 1, scale: 1 }}\n            transition={{ duration: 0.5, delay: index * 0.08 }}\n          >\n            {/* Card */}\n            <div className=\"relative group bg-black/90 backdrop-blur-xl rounded-2xl p-3 w-full h-full shadow-lg hover:shadow-2xl transition-all duration-300 border border-white/10 focus-within:ring-2 focus-within:ring-white/30\">\n              <div className=\"flex flex-col h-full\">\n                {/* Image with preview button */}\n                <div className=\"relative mb-3 aspect-[4/3] overflow-hidden rounded-lg\">\n                  <img\n                    src={item.image}\n                    alt={item.title || 'Beat Cover'}\n                    className=\"w-full h-full object-cover rounded-lg shadow-md group-hover:scale-105 transition-transform duration-300\"\n                    loading=\"lazy\"\n                  />\n                  <div className=\"absolute inset-0 bg-gradient-to-t from-black/70 to-transparent\" />\n\n                  {/* Play/Pause button */}\n                  <button\n                    onClick={() => togglePreview(item.id, item.url)}\n                    className=\"absolute bottom-3 right-3 p-2 bg-white/20 backdrop-blur-md rounded-full hover:bg-white/40 transition\"\n                    aria-label={isPreviewing ? 'Pause preview' : 'Play preview'}\n                  >\n                    {isPreviewing ? (\n                      <Pause className=\"w-4 h-4 text-white\" />\n                    ) : (\n                      <Play className=\"w-4 h-4 text-white\" />\n                    )}\n                  </button>\n\n                  {/* Hidden audio element */}\n                  <audio id={`audio-${item.id}`} src={item.url} />\n                </div>\n\n                {/* Title & Artist */}\n                <h3 className=\"text-white text-sm md:text-base font-semibold truncate mb-0.5\">\n                  {item.title}\n                </h3>\n                <p className=\"text-gray-400 text-xs md:text-sm mb-1 font-medium truncate\">\n                  {item.artist}\n                </p>\n\n                {/* Tags */}\n                <div className=\"flex flex-wrap items-center gap-2 text-[10px] md:text-xs text-gray-300 mb-2\">\n                  {item.bpm && (\n                    <span className=\"px-2 py-0.5 bg-white/10 rounded-full\">\n                      {item.bpm} BPM\n                    </span>\n                  )}\n                  {item.duration && (\n                    <span className=\"px-2 py-0.5 bg-white/10 rounded-full\">\n                      {item.duration}\n                    </span>\n                  )}\n                </div>\n\n                {/* Button */}\n                <div className=\"mt-auto\">\n                  <a\n                    href={item.download}\n                    aria-label={`Download or buy ${item.title}`}\n                    download={item.price === 'Free' ? true : undefined}\n                    className={`block text-center focus:outline-none focus:ring-2 focus:ring-white/40 ${\n                      item.price === 'Free'\n                        ? 'bg-white text-black hover:bg-gray-200'\n                        : 'bg-gradient-to-r from-gray-800 to-black hover:from-black hover:to-gray-900 text-white'\n                    } font-medium text-xs md:text-sm py-2 px-4 rounded-lg transition-all duration-200 shadow-md hover:shadow-xl`}\n                  >\n                    {item.price === 'Free'\n                      ? 'â¬‡ Download'\n                      : `ðŸ’³ Buy ${item.price}`}\n                  </a>\n                </div>\n              </div>\n            </div>\n          </motion.div>\n        );\n      })}\n    </div>\n  );\n});\n\nexport default Beats;\n"],"names":["Beats","memo","items","baseRadius","windowWidth","setWindowWidth","useState","previewing","setPreviewing","useEffect","handleResize","responsiveRadius","useMemo","useGridLayout","positions","itemCount","_","index","angle","x","y","togglePreview","id","url","audio","prevAudio","jsxs","jsx","item","isPreviewing","motion","Pause","Play"],"mappings":"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"}