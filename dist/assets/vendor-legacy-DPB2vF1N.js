!function(){var e=["spanId","traceId","traceFlags"],_=["inputs"],S=["inputId"],k=["inputs"],E=["inputId"],T=["type"],M=["type"],I=["motionValue","onUpdate","onComplete","element"],R=["autoplay","delay","type","repeat","repeatDelay","repeatType","keyframes","name","motionValue","element"],O=["class","className"];function _superPropSet(e,_,S,k,E,T){return function(e,_,S,k,E){if(!set(e,_,S,k||e)&&E)throw new TypeError("failed to set property");return S}(_getPrototypeOf(T?e.prototype:e),_,S,k,E)}function set(e,_,S,k){return set="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(e,_,S,k){var E,T=_superPropBase(e,_);if(T){if((E=Object.getOwnPropertyDescriptor(T,_)).set)return E.set.call(k,S),!0;if(!E.writable)return!1}if(E=Object.getOwnPropertyDescriptor(k,_)){if(!E.writable)return!1;E.value=S,Object.defineProperty(k,_,E)}else _defineProperty3(k,_,S);return!0},set(e,_,S,k)}function _regeneratorValues(e){if(null!=e){var _=e["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],S=0;if(_)return _.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return{next:function(){return e&&S>=e.length&&(e=void 0),{value:e&&e[S++],done:!e}}}}throw new TypeError(_typeof3(e)+" is not iterable")}function _wrapNativeSuper(e){var _="function"==typeof Map?new Map:void 0;return _wrapNativeSuper=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(_){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==_){if(_.has(e))return _.get(e);_.set(e,Wrapper)}function Wrapper(){return function(e,_,S){if(_isNativeReflectConstruct())return Reflect.construct.apply(null,arguments);var k=[null];k.push.apply(k,_);var E=new(e.bind.apply(e,k));return S&&_setPrototypeOf(E,S.prototype),E}(e,arguments,_getPrototypeOf(this).constructor)}return Wrapper.prototype=Object.create(e.prototype,{constructor:{value:Wrapper,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(Wrapper,e)},_wrapNativeSuper(e)}function _callSuper(e,_,S){return _=_getPrototypeOf(_),_possibleConstructorReturn(e,_isNativeReflectConstruct()?Reflect.construct(_,S||[],_getPrototypeOf(e).constructor):_.apply(e,S))}function _possibleConstructorReturn(e,_){if(_&&("object"==_typeof3(_)||"function"==typeof _))return _;if(void 0!==_)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(_isNativeReflectConstruct=function(){return!!e})()}function _superPropGet(e,_,S,k){var E=_get2(_getPrototypeOf(1&k?e.prototype:e),_,S);return 2&k&&"function"==typeof E?function(e){return E.apply(S,e)}:E}function _get2(){return _get2="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,_,S){var k=_superPropBase(e,_);if(k){var E=Object.getOwnPropertyDescriptor(k,_);return E.get?E.get.call(arguments.length<3?e:S):E.value}},_get2.apply(null,arguments)}function _superPropBase(e,_){for(;!{}.hasOwnProperty.call(e,_)&&null!==(e=_getPrototypeOf(e)););return e}function _getPrototypeOf(e){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_getPrototypeOf(e)}function _inherits(e,_){if("function"!=typeof _&&null!==_)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(_&&_.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),_&&_setPrototypeOf(e,_)}function _setPrototypeOf(e,_){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,_){return e.__proto__=_,e},_setPrototypeOf(e,_)}function _regenerator(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,_,S="function"==typeof Symbol?Symbol:{},k=S.iterator||"@@iterator",E=S.toStringTag||"@@toStringTag";function i(S,k,E,M){var I=k&&k.prototype instanceof Generator?k:Generator,R=Object.create(I.prototype);return _regeneratorDefine2(R,"_invoke",function(S,k,E){var M,I,R,O=0,D=E||[],L=!1,U={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function(_,S){return M=_,I=0,R=e,U.n=S,T}};function d(S,k){for(I=S,R=k,_=0;!L&&O&&!E&&_<D.length;_++){var E,M=D[_],B=U.p,z=M[2];S>3?(E=z===k)&&(R=M[(I=M[4])?5:(I=3,3)],M[4]=M[5]=e):M[0]<=B&&((E=S<2&&B<M[1])?(I=0,U.v=k,U.n=M[1]):B<z&&(E=S<3||M[0]>k||k>z)&&(M[4]=S,M[5]=k,U.n=z,I=0))}if(E||S>1)return T;throw L=!0,k}return function(E,D,B){if(O>1)throw TypeError("Generator is already running");for(L&&1===D&&d(D,B),I=D,R=B;(_=I<2?e:R)||!L;){M||(I?I<3?(I>1&&(U.n=-1),d(I,R)):U.n=R:U.v=R);try{if(O=2,M){if(I||(E="next"),_=M[E]){if(!(_=_.call(M,R)))throw TypeError("iterator result is not an object");if(!_.done)return _;R=_.value,I<2&&(I=0)}else 1===I&&(_=M.return)&&_.call(M),I<2&&(R=TypeError("The iterator does not provide a '"+E+"' method"),I=1);M=e}else if((_=(L=U.n<0)?R:S.call(k,U))!==T)break}catch(_){M=e,I=1,R=_}finally{O=1}}return{value:_,done:L}}}(S,E,M),!0),R}var T={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}_=Object.getPrototypeOf;var M=[][k]?_(_([][k]())):(_regeneratorDefine2(_={},k,function(){return this}),_),I=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(M);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,GeneratorFunctionPrototype):(e.__proto__=GeneratorFunctionPrototype,_regeneratorDefine2(e,E,"GeneratorFunction")),e.prototype=Object.create(I),e}return GeneratorFunction.prototype=GeneratorFunctionPrototype,_regeneratorDefine2(I,"constructor",GeneratorFunctionPrototype),_regeneratorDefine2(GeneratorFunctionPrototype,"constructor",GeneratorFunction),GeneratorFunction.displayName="GeneratorFunction",_regeneratorDefine2(GeneratorFunctionPrototype,E,"GeneratorFunction"),_regeneratorDefine2(I),_regeneratorDefine2(I,E,"Generator"),_regeneratorDefine2(I,k,function(){return this}),_regeneratorDefine2(I,"toString",function(){return"[object Generator]"}),(_regenerator=function(){return{w:i,m:f}})()}function _regeneratorDefine2(e,_,S,k){var E=Object.defineProperty;try{E({},"",{})}catch(e){E=0}_regeneratorDefine2=function(e,_,S,k){function o(_,S){_regeneratorDefine2(e,_,function(e){return this._invoke(_,S,e)})}_?E?E(e,_,{value:S,enumerable:!k,configurable:!k,writable:!k}):e[_]=S:(o("next",0),o("throw",1),o("return",2))},_regeneratorDefine2(e,_,S,k)}function asyncGeneratorStep(e,_,S,k,E,T,M){try{var I=e[T](M),R=I.value}catch(e){return void S(e)}I.done?_(R):Promise.resolve(R).then(k,E)}function _asyncToGenerator(e){return function(){var _=this,S=arguments;return new Promise(function(k,E){var T=e.apply(_,S);function _next(e){asyncGeneratorStep(T,k,E,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(T,k,E,_next,_throw,"throw",e)}_next(void 0)})}}function _objectWithoutProperties3(e,_){if(null==e)return{};var S,k,E=function(e,_){if(null==e)return{};var S={};for(var k in e)if({}.hasOwnProperty.call(e,k)){if(-1!==_.indexOf(k))continue;S[k]=e[k]}return S}(e,_);if(Object.getOwnPropertySymbols){var T=Object.getOwnPropertySymbols(e);for(k=0;k<T.length;k++)S=T[k],-1===_.indexOf(S)&&{}.propertyIsEnumerable.call(e,S)&&(E[S]=e[S])}return E}function _slicedToArray(e,_){return function(e){if(Array.isArray(e))return e}(e)||function(e,_){var S=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=S){var k,E,T,M,I=[],R=!0,O=!1;try{if(T=(S=S.call(e)).next,0===_){if(Object(S)!==S)return;R=!1}else for(;!(R=(k=T.call(S)).done)&&(I.push(k.value),I.length!==_);R=!0);}catch(e){O=!0,E=e}finally{try{if(!R&&null!=S.return&&(M=S.return(),Object(M)!==M))return}finally{if(O)throw E}}return I}}(e,_)||_unsupportedIterableToArray2(e,_)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _classCallCheck3(e,_){if(!(e instanceof _))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,_){for(var S=0;S<_.length;S++){var k=_[S];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(e,_toPropertyKey2(k.key),k)}}function _createClass3(e,_,S){return _&&_defineProperties(e.prototype,_),S&&_defineProperties(e,S),Object.defineProperty(e,"prototype",{writable:!1}),e}function _typeof3(e){return _typeof3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof3(e)}function ownKeys(e,_){var S=Object.keys(e);if(Object.getOwnPropertySymbols){var k=Object.getOwnPropertySymbols(e);_&&(k=k.filter(function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable})),S.push.apply(S,k)}return S}function _objectSpread2(e){for(var _=1;_<arguments.length;_++){var S=null!=arguments[_]?arguments[_]:{};_%2?ownKeys(Object(S),!0).forEach(function(_){_defineProperty3(e,_,S[_])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(S)):ownKeys(Object(S)).forEach(function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(S,_))})}return e}function _defineProperty3(e,_,S){return(_=_toPropertyKey2(_))in e?Object.defineProperty(e,_,{value:S,enumerable:!0,configurable:!0,writable:!0}):e[_]=S,e}function _toPropertyKey2(e){var _=function(e,_){if("object"!=_typeof3(e)||!e)return e;var S=e[Symbol.toPrimitive];if(void 0!==S){var k=S.call(e,_||"default");if("object"!=_typeof3(k))return k;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===_?String:Number)(e)}(e,"string");return"symbol"==_typeof3(_)?_:_+""}function _toConsumableArray3(e){return function(e){if(Array.isArray(e))return _arrayLikeToArray2(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||_unsupportedIterableToArray2(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _createForOfIteratorHelper2(e,_){var S="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!S){if(Array.isArray(e)||(S=_unsupportedIterableToArray2(e))||_&&e&&"number"==typeof e.length){S&&(e=S);var k=0,F=function(){};return{s:F,n:function(){return k>=e.length?{done:!0}:{done:!1,value:e[k++]}},e:function(e){throw e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var E,T=!0,M=!1;return{s:function(){S=S.call(e)},n:function(){var e=S.next();return T=e.done,e},e:function(e){M=!0,E=e},f:function(){try{T||null==S.return||S.return()}finally{if(M)throw E}}}}function _unsupportedIterableToArray2(e,_){if(e){if("string"==typeof e)return _arrayLikeToArray2(e,_);var S={}.toString.call(e).slice(8,-1);return"Object"===S&&e.constructor&&(S=e.constructor.name),"Map"===S||"Set"===S?Array.from(e):"Arguments"===S||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(S)?_arrayLikeToArray2(e,_):void 0}}function _arrayLikeToArray2(e,_){(null==_||_>e.length)&&(_=e.length);for(var S=0,k=Array(_);S<_;S++)k[S]=e[S];return k}function _wrapAsyncGenerator(e){return function(){return new AsyncGenerator(e.apply(this,arguments))}}function AsyncGenerator(e){var _,S;function resume(_,S){try{var k=e[_](S),E=k.value,T=E instanceof _OverloadYield;Promise.resolve(T?E.v:E).then(function(S){if(T){var M="return"===_?"return":"next";if(!E.k||S.done)return resume(M,S);S=e[M](S).value}settle(k.done?"return":"normal",S)},function(e){resume("throw",e)})}catch(e){settle("throw",e)}}function settle(e,k){switch(e){case"return":_.resolve({value:k,done:!0});break;case"throw":_.reject(k);break;default:_.resolve({value:k,done:!1})}(_=_.next)?resume(_.key,_.arg):S=null}this._invoke=function(e,k){return new Promise(function(E,T){var M={key:e,arg:k,resolve:E,reject:T,next:null};S?S=S.next=M:(_=S=M,resume(e,k))})},"function"!=typeof e.return&&(this.return=void 0)}function _awaitAsyncGenerator(e){return new _OverloadYield(e,0)}function _asyncGeneratorDelegate(e){var _={},S=!1;function pump(_,k){return S=!0,k=new Promise(function(S){S(e[_](k))}),{done:!1,value:new _OverloadYield(k,1)}}return _["undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},_.next=function(e){return S?(S=!1,e):pump("next",e)},"function"==typeof e.throw&&(_.throw=function(e){if(S)throw S=!1,e;return pump("throw",e)}),"function"==typeof e.return&&(_.return=function(e){return S?(S=!1,e):pump("return",e)}),_}function _OverloadYield(e,_){this.v=e,this.k=_}function _asyncIterator(e){var _,S,k,E=2;for("undefined"!=typeof Symbol&&(S=Symbol.asyncIterator,k=Symbol.iterator);E--;){if(S&&null!=(_=e[S]))return _.call(e);if(k&&null!=(_=e[k]))return new AsyncFromSyncIterator(_.call(e));S="@@asyncIterator",k="@@iterator"}throw new TypeError("Object is not async iterable")}function AsyncFromSyncIterator(e){function AsyncFromSyncIteratorContinuation(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var _=e.done;return Promise.resolve(e.value).then(function(e){return{value:e,done:_}})}return AsyncFromSyncIterator=function(e){this.s=e,this.n=e.next},AsyncFromSyncIterator.prototype={s:null,n:null,next:function(){return AsyncFromSyncIteratorContinuation(this.n.apply(this.s,arguments))},return:function(e){var _=this.s.return;return void 0===_?Promise.resolve({value:e,done:!0}):AsyncFromSyncIteratorContinuation(_.apply(this.s,arguments))},throw:function(e){var _=this.s.return;return void 0===_?Promise.reject(e):AsyncFromSyncIteratorContinuation(_.apply(this.s,arguments))}},new AsyncFromSyncIterator(e)}AsyncGenerator.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},AsyncGenerator.prototype.next=function(e){return this._invoke("next",e)},AsyncGenerator.prototype.throw=function(e){return this._invoke("throw",e)},AsyncGenerator.prototype.return=function(e){return this._invoke("return",e)},System.register(["./vendor_react-legacy-BMnBdIgx.js"],function(D,L){"use strict";var U,B,z;return{setters:[function(e){U=e.r,B=e.R,z=e.a}],execute:function(){function _mergeNamespaces(e,_){for(var _loop=function(){var k=_[S];if("string"!=typeof k&&!Array.isArray(k)){var _loop2=function(_){if("default"!==_&&!(_ in e)){var S=Object.getOwnPropertyDescriptor(k,_);S&&Object.defineProperty(e,_,S.get?S:{enumerable:!0,get:function(){return k[_]}})}};for(var E in k)_loop2(E)}},S=0;S<_.length;S++)_loop();return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}D({I:function(e){return"x"===e||"y"===e?Ax[e]?null:(Ax[e]=!0,function(){Ax[e]=!1}):Ax.x||Ax.y?null:(Ax.x=Ax.y=!0,function(){Ax.x=Ax.y=!1})},O:addUniqueItem,P:removeItem,R:isSVGElement,T:function(e){return isSVGElement(e)&&"svg"===e.tagName},V:function(e,_){var S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},k=_slicedToArray(setupGesture(e,S),3),E=k[0],T=k[1],M=k[2],onPointerEnter=function(e){if(isValidHover(e)){var S=e.target,k=_(S,e);if("function"==typeof k&&S){var _onPointerLeave=function(e){isValidHover(e)&&(k(e),S.removeEventListener("pointerleave",_onPointerLeave))};S.addEventListener("pointerleave",_onPointerLeave,T)}}};return E.forEach(function(e){e.addEventListener("pointerenter",onPointerEnter,T)}),M},W:function(e,_){var S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},k=_slicedToArray(setupGesture(e,S),3),E=k[0],T=k[1],M=k[2],startPress=function(e){var k=e.currentTarget;if(isValidPressEvent(e)){Mx.add(k);var E=_(k,e),onPointerEnd=function(e,_){window.removeEventListener("pointerup",onPointerUp),window.removeEventListener("pointercancel",onPointerCancel),Mx.has(k)&&Mx.delete(k),isValidPressEvent(e)&&"function"==typeof E&&E(e,{success:_})},onPointerUp=function(e){onPointerEnd(e,k===window||k===document||S.useGlobalTarget||_isNodeOrChild(k,e.target))},onPointerCancel=function(e){onPointerEnd(e,!1)};window.addEventListener("pointerup",onPointerUp,T),window.addEventListener("pointercancel",onPointerCancel,T)}};return E.forEach(function(e){var _;(S.useGlobalTarget?window:e).addEventListener("pointerdown",startPress,T),isHTMLElement(e)&&(e.addEventListener("focus",function(e){return enableKeyboardPress(e,T)}),_=e,Tx.has(_.tagName)||-1!==_.tabIndex||e.hasAttribute("tabindex")||(e.tabIndex=0))}),M},X:velocityPerSecond,Y:interpolate,Z:defaultOffset,_:function(e,_){return"function"==typeof e?function(e){Lx.add(e),Dx||(Dx=function(){var e={get width(){return window.innerWidth},get height(){return window.innerHeight}};Lx.forEach(function(_){return _(e)})},window.addEventListener("resize",Dx));return function(){Lx.delete(e),Lx.size||"function"!=typeof Dx||(window.removeEventListener("resize",Dx),Dx=void 0)}}(e):function(e,_){Ix||function(){if("undefined"==typeof ResizeObserver)return;Ix=new ResizeObserver(notifyAll)}();var S=resolveElements(e);return S.forEach(function(e){var S,k=Rx.get(e);k||(k=new Set,Rx.set(e,k)),k.add(_),null===(S=Ix)||void 0===S||S.observe(e)}),function(){S.forEach(function(e){var S,k=Rx.get(e);(null==k||k.delete(_),null!=k&&k.size)||(null===(S=Ix)||void 0===S||S.unobserve(e))})}}(e,_)},a0:function(e,_){var S,onFrame=function(){var k=_.currentTime,E=(null===k?0:k.value)/100;S!==E&&e(E),S=E};return WS.preUpdate(onFrame,!0),function(){return qS(onFrame)}},a3:function(){var e=!Array.isArray(arguments.length<=0?void 0:arguments[0]),_=e?0:-1,S=0+_<0||arguments.length<=0+_?void 0:arguments[0+_],k=1+_<0||arguments.length<=1+_?void 0:arguments[1+_],E=2+_<0||arguments.length<=2+_?void 0:arguments[2+_],T=3+_<0||arguments.length<=3+_?void 0:arguments[3+_],M=interpolate(k,E,T);return e?M(S):M},a4:function(e,_,S){var k,E=e.get(),T=null,M=E,I="string"==typeof E?E.replace(/[\d.-]/g,""):void 0,stopAnimation=function(){T&&(T.stop(),T=null)},startAnimation=function(){stopAnimation(),T=new jw(_objectSpread2(_objectSpread2({keyframes:[asNumber(e.get()),asNumber(M)],velocity:e.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01},S),{},{onUpdate:k}))};if(e.attach(function(e,_){M=e,k=function(e){return _(parseValue(e,I))},WS.postRender(startAnimation)},stopAnimation),Fx(_)){var R=_.on("change",function(_){return e.set(parseValue(_,I))}),O=e.on("destroy",R);return function(){R(),O()}}return stopAnimation},a5:getDefaultExportFromCjs,a6:applySdkMetadata,a7:function(e,_){getIsolationScope().setContext(e,_)},a8:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_=!e.skipBrowserExtensionCheck&&function(){if(function(){var e;if(void 0===Be.window)return!1;var _=Be;if(_.nw)return!1;var S=_.chrome||_.browser;if(null==S||null===(e=S.runtime)||void 0===e||!e.id)return!1;var k=getLocationHref(),E=["chrome-extension","moz-extension","ms-browser-extension","safari-web-extension"];return!(Be===Be.top&&E.some(function(e){return k.startsWith("".concat(e,"://"))}))}())return it&&consoleSandbox(function(){}),!0;return!1}(),S=_objectSpread2(_objectSpread2({},e),{},{enabled:!_&&e.enabled,stackParser:stackParserFromStackParserOptions(e.stackParser||nt),integrations:getIntegrationsToSetup({integrations:e.integrations,defaultIntegrations:null==e.defaultIntegrations?[inboundFiltersIntegration(),functionToStringIntegration(),browserApiErrorsIntegration(),breadcrumbsIntegration(),globalHandlersIntegration(),linkedErrorsIntegration(),dedupeIntegration(),httpContextIntegration(),browserSessionIntegration()]:e.defaultIntegrations}),transport:e.transport||makeFetchTransport});return function(e,_){!0===_.debug&&(j?X.enable():consoleSandbox(function(){}));getCurrentScope().update(_.initialScope);var S=new e(_);return function(e){getCurrentScope().setClient(e)}(S),S.init(),S}(Ge,S)},a9:isError,aS:_extends,aW:function(e,_){var S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},k=S.checkForDefaultPrevented,E=void 0===k||k;return function(S){if(null==e||e(S),!1===E||!S.defaultPrevented)return null==_?void 0:_(S)}},aX:function(e){void 0===e&&(e={});var _=function(e,_){void 0===_&&(_=ItoI);var S=[],k=!1,E={read:function(){if(k)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return S.length?S[S.length-1]:e},useMedium:function(e){var E=_(e,k);return S.push(E),function(){S=S.filter(function(e){return e!==E})}},assignSyncMedium:function(e){for(k=!0;S.length;){var _=S;S=[],_.forEach(e)}S={push:function(_){return e(_)},filter:function(){return S}}},assignMedium:function(e){k=!0;var _=[];if(S.length){var E=S;S=[],E.forEach(e),_=S}var executeQueue=function(){var S=_;_=[],S.forEach(e)},cycle=function(){return Promise.resolve().then(executeQueue)};cycle(),S={push:function(e){_.push(e),cycle()},filter:function(e){return _=_.filter(e),S}}}};return E}(null);return _.options=go({async:!0,ssr:!1},e),_},aY:__rest,aZ:function(e,_){var S=(k=null,E=function(_){return e.forEach(function(e){return assignRef(e,_)})},T=z.useState(function(){return{value:k,callback:E,facade:{get current(){return T.value},set current(e){var _=T.value;_!==e&&(T.value=e,T.callback(e,_))}}}})[0],T.callback=E,T.facade);var k,E,T;return Bx(function(){var _=Nx.get(S);if(_){var k=new Set(_),E=new Set(e),T=S.current;k.forEach(function(e){E.has(e)||assignRef(e,null)}),E.forEach(function(e){k.has(e)||assignRef(e,T)})}Nx.set(S,e)},[e]),S},aa:withScope,ab:captureException,ac:getClient,ad:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_=Be.document,S=(null==_?void 0:_.head)||(null==_?void 0:_.body);if(!S)return void(it&&X.error("[showReportDialog] Global document not defined"));var k=getCurrentScope(),E=getClient(),T=null==E?void 0:E.getDsn();if(!T)return void(it&&X.error("[showReportDialog] DSN not configured"));var M=_objectSpread2(_objectSpread2({},e),{},{user:_objectSpread2(_objectSpread2({},k.getUser()),e.user),eventId:e.eventId||getIsolationScope().lastEventId()}),I=Be.document.createElement("script");I.async=!0,I.crossOrigin="anonymous",I.src=function(e,_){var S=makeDsn(e);if(!S)return"";var k="".concat(getBaseApiEndpoint(S),"embed/error-page/"),E="dsn=".concat(dsnToString(S));for(var T in _)if("dsn"!==T&&"onClose"!==T)if("user"===T){var M=_.user;if(!M)continue;M.name&&(E+="&name=".concat(encodeURIComponent(M.name))),M.email&&(E+="&email=".concat(encodeURIComponent(M.email)))}else E+="&".concat(encodeURIComponent(T),"=").concat(encodeURIComponent(_[T]));return"".concat(k,"?").concat(E)}(T,M);var R=M.onLoad,O=M.onClose;R&&(I.onload=R);if(O){var _reportDialogClosedMessageHandler=function(e){if("__sentry_reportdialog_closed__"===e.data)try{O()}finally{Be.removeEventListener("message",_reportDialogClosedMessageHandler)}};Be.addEventListener("message",_reportDialogClosedMessageHandler)}S.appendChild(I)},ag:requireSrc$3,ah:requireSrc$2,ai:requireScheduler,aj:c,ak:function(){var e=function(){var e=c(),_=_slicedToArray(z.useState(function(){return new Map}),1)[0];_.clear();for(var S=e;S;){var k=S.type;b(k)&&k!==Nb&&!_.has(k)&&_.set(k,z.use(l(k))),S=S.return}return _}();return z.useMemo(function(){return Array.from(e.keys()).reduce(function(_,S){return function(k){return z.createElement(_,null,z.createElement(S.Provider,_objectSpread2(_objectSpread2({},k),{},{value:e.get(S)})))}},function(e){return z.createElement(zb,_objectSpread2({},e))})},[e])},al:i$1,b0:__spreadArray,b1:function(e,_){return e.useMedium(_),SideCar},b9:function(e,_,S){if(Ju.randomUUID&&!e)return Ju.randomUUID();return function(e){var _,S,k,E;e=e||{};var T=null!==(_=null!==(S=e.random)&&void 0!==S?S:null===(k=(E=e).rng)||void 0===k?void 0:k.call(E))&&void 0!==_?_:function(){if(!qu){if("undefined"==typeof crypto||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");qu=crypto.getRandomValues.bind(crypto)}return qu(Ku)}();if(T.length<16)throw new Error("Random bytes length must be >= 16");return T[6]=15&T[6]|64,T[8]=63&T[8]|128,function(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(Xu[e[_+0]]+Xu[e[_+1]]+Xu[e[_+2]]+Xu[e[_+3]]+"-"+Xu[e[_+4]]+Xu[e[_+5]]+"-"+Xu[e[_+6]]+Xu[e[_+7]]+"-"+Xu[e[_+8]]+Xu[e[_+9]]+"-"+Xu[e[_+10]]+Xu[e[_+11]]+Xu[e[_+12]]+Xu[e[_+13]]+Xu[e[_+14]]+Xu[e[_+15]]).toLowerCase()}(T)}(e)}
/**
			 * @license
			 * Copyright 2010-2025 Three.js Authors
			 * SPDX-License-Identifier: MIT
			 */,bA:function(e,_){return e[0]=_[0],e[1]=_[1],e[2]=_[2],e[3]=_[3],e[4]=_[4],e[5]=_[5],e[6]=_[6],e[7]=_[7],e[8]=_[8],e[9]=_[9],e[10]=_[10],e[11]=_[11],e[12]=_[12],e[13]=_[13],e[14]=_[14],e[15]=_[15],e},bB:function(e,_){var S=_[0],k=_[1],E=_[2],T=_[3],M=_[4],I=_[5],R=_[6],O=_[7],D=_[8],L=_[9],U=_[10],B=_[11],z=_[12],G=_[13],j=_[14],V=_[15],H=S*I-k*M,W=S*R-E*M,q=S*O-T*M,X=k*R-E*I,Y=k*O-T*I,K=E*O-T*R,J=D*G-L*z,Q=D*j-U*z,Z=D*V-B*z,$=L*j-U*G,ee=L*V-B*G,te=U*V-B*j,re=H*te-W*ee+q*$+X*Z-Y*Q+K*J;if(!re)return null;return re=1/re,e[0]=(I*te-R*ee+O*$)*re,e[1]=(E*ee-k*te-T*$)*re,e[2]=(G*K-j*Y+V*X)*re,e[3]=(U*Y-L*K-B*X)*re,e[4]=(R*Z-M*te-O*Q)*re,e[5]=(S*te-E*Z+T*Q)*re,e[6]=(j*q-z*K-V*W)*re,e[7]=(D*K-U*q+B*W)*re,e[8]=(M*ee-I*Z+O*J)*re,e[9]=(k*Z-S*ee-T*J)*re,e[10]=(z*Y-G*q+V*H)*re,e[11]=(L*q-D*Y-B*H)*re,e[12]=(I*Q-M*$-R*J)*re,e[13]=(S*$-k*Q+E*J)*re,e[14]=(G*W-z*X-j*H)*re,e[15]=(D*X-L*W+U*H)*re,e},bD:normalize$5,bE:function(e,_){return e[0]=-_[0],e[1]=-_[1],e[2]=-_[2],e[3]=_[3],e},bF:create$1,bG:dot$3,bH:function(e,_){return e[0]=_[0],e[1]=_[1],e},bJ:function(e,_,S){return e[0]=_[0]*S,e[1]=_[1]*S,e},bL:function(e,_,S){return e[0]=_[0]+S[0],e[1]=_[1]+S[1],e},bM:slerp$1,bN:function(e,_){var S=_[0]-e[0],k=_[1]-e[1],E=_[2]-e[2];return S*S+k*k+E*E},bO:function(e,_,S){var k=_[0],E=_[1],T=_[2],M=_[3],I=S[0],R=S[1],O=S[2],D=S[3];return e[0]=k*D+M*I+E*O-T*R,e[1]=E*D+M*R+T*I-k*O,e[2]=T*D+M*O+k*R-E*I,e[3]=M*D-k*I-E*R-T*O,e},bQ:cross$1,bR:setAxisAngle$1,bS:function(e,_,S){return e[0]=_[0]*S,e[1]=_[1]*S,e[2]=_[2]*S,e},bV:clsx,bn:function(){var e=new Wx(16);Wx!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0);return e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},bo:fromValues$1,bp:function(e,_,S){return e[0]=_,e[1]=S,e},bq:create,br:function(e,_){var S=new Wx(2);return S[0]=e,S[1]=_,S},bs:function(e){var _=new Wx(2);return _[0]=e[0],_[1]=e[1],_},bt:function(e,_,S){var k=S[0],E=S[1],T=S[2],M=S[3],I=_[0],R=_[1],O=_[2],D=E*O-T*R,L=T*I-k*O,U=k*R-E*I;return D+=D,L+=L,U+=U,e[0]=I+M*D+E*U-T*L,e[1]=R+M*L+T*D-k*U,e[2]=O+M*U+k*L-E*D,e},bu:create$3,bv:function(e,_,S){var k=_[0],E=_[1],T=_[2],M=_[3],I=_[4],R=_[5],O=_[6],D=_[7],L=_[8],U=_[9],B=_[10],z=_[11],G=_[12],j=_[13],V=_[14],H=_[15],W=S[0],q=S[1],X=S[2],Y=S[3];return e[0]=W*k+q*I+X*L+Y*G,e[1]=W*E+q*R+X*U+Y*j,e[2]=W*T+q*O+X*B+Y*V,e[3]=W*M+q*D+X*z+Y*H,W=S[4],q=S[5],X=S[6],Y=S[7],e[4]=W*k+q*I+X*L+Y*G,e[5]=W*E+q*R+X*U+Y*j,e[6]=W*T+q*O+X*B+Y*V,e[7]=W*M+q*D+X*z+Y*H,W=S[8],q=S[9],X=S[10],Y=S[11],e[8]=W*k+q*I+X*L+Y*G,e[9]=W*E+q*R+X*U+Y*j,e[10]=W*T+q*O+X*B+Y*V,e[11]=W*M+q*D+X*z+Y*H,W=S[12],q=S[13],X=S[14],Y=S[15],e[12]=W*k+q*I+X*L+Y*G,e[13]=W*E+q*R+X*U+Y*j,e[14]=W*T+q*O+X*B+Y*V,e[15]=W*M+q*D+X*z+Y*H,e},bw:function(e,_){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=_[0],e[13]=_[1],e[14]=_[2],e[15]=1,e},bx:function(e,_){return e[0]=-_[0],e[1]=-_[1],e[2]=-_[2],e},by:function(e,_,S,k){var E=_[0],T=_[1],M=_[2],I=k[0],R=k[1],O=k[2],D=E-S[0],L=T-S[1],U=M-S[2],B=D*D+L*L+U*U;B>0&&(D*=B=1/Math.sqrt(B),L*=B,U*=B);var z=R*U-O*L,G=O*D-I*U,j=I*L-R*D;B=z*z+G*G+j*j,B>0&&(z*=B=1/Math.sqrt(B),G*=B,j*=B);return e[0]=z,e[1]=G,e[2]=j,e[3]=0,e[4]=L*j-U*G,e[5]=U*z-D*j,e[6]=D*G-L*z,e[7]=0,e[8]=D,e[9]=L,e[10]=U,e[11]=0,e[12]=E,e[13]=T,e[14]=M,e[15]=1,e},bz:function(e,_){return e[0]=_[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=_[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=_[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},d:function(e,_){return new kx(e,_)},i:isHTMLElement,q:getAnimatableNone,s:defaultTransformValue,w:function(e,_){var S,k;return null!==(S=null!==(k=null==e?void 0:e[_])&&void 0!==k?k:null==e?void 0:e.default)&&void 0!==S?S:e},y:makeAnimationInstant});var L="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function getAugmentedNamespace(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var _=e.default;if("function"==typeof _){var S=function a(){var e=!1;try{e=this instanceof a}catch(S){}return e?Reflect.construct(_,arguments,this.constructor):_.apply(this,arguments)};S.prototype=_.prototype}else S={};return Object.defineProperty(S,"__esModule",{value:!0}),Object.keys(e).forEach(function(_){var k=Object.getOwnPropertyDescriptor(e,_);Object.defineProperty(S,_,k.get?k:{enumerable:!0,get:function(){return e[_]}})}),S}var G=D("b3",function(e,_,S){var k=Promise.resolve();function handlePreloadError(e){var _=new Event("vite:preloadError",{cancelable:!0});if(_.payload=e,window.dispatchEvent(_),!_.defaultPrevented)throw e}return k.then(function(_){var S,k=_createForOfIteratorHelper2(_||[]);try{for(k.s();!(S=k.n()).done;){var E=S.value;"rejected"===E.status&&handlePreloadError(E.reason)}}catch(T){k.e(T)}finally{k.f()}return e().catch(handlePreloadError)})}),j="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,V=globalThis,H="10.22.0";function getMainCarrier(){return getSentryCarrier(V),V}function getSentryCarrier(e){var _=e.__SENTRY__=e.__SENTRY__||{};return _.version=_.version||H,_[H]=_[H]||{}}function getGlobalSingleton(e,_){var S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:V,k=S.__SENTRY__=S.__SENTRY__||{},E=k[H]=k[H]||{};return E[e]||(E[e]=_())}var W=["debug","info","warn","error","log","assert","trace"],q={};function consoleSandbox(e){if(!("console"in V))return e();var _=V.console,S={},k=Object.keys(q);k.forEach(function(e){var k=q[e];S[e]=_[e],_[e]=k});try{return e()}finally{k.forEach(function(e){_[e]=S[e]})}}function isEnabled(){return _getLoggerSettings().enabled}function _maybeLog(e){for(var _=arguments.length,S=new Array(_>1?_-1:0),k=1;k<_;k++)S[k-1]=arguments[k];j&&isEnabled()&&consoleSandbox(function(){var _;(_=V.console)[e].apply(_,["".concat("Sentry Logger ","[").concat(e,"]:")].concat(S))})}function _getLoggerSettings(){return j?getGlobalSingleton("loggerSettings",function(){return{enabled:!1}}):{enabled:!1}}var X=D("ae",{enable:function(){_getLoggerSettings().enabled=!0},disable:function(){_getLoggerSettings().enabled=!1},isEnabled:isEnabled,log:function(){for(var e=arguments.length,_=new Array(e),S=0;S<e;S++)_[S]=arguments[S];_maybeLog.apply(void 0,["log"].concat(_))},warn:function(){for(var e=arguments.length,_=new Array(e),S=0;S<e;S++)_[S]=arguments[S];_maybeLog.apply(void 0,["warn"].concat(_))},error:function(){for(var e=arguments.length,_=new Array(e),S=0;S<e;S++)_[S]=arguments[S];_maybeLog.apply(void 0,["error"].concat(_))}}),Y=50,K="?",J=/\(error: (.*)\)/,Q=/captureMessage|captureException/;function createStackParser(){for(var e=arguments.length,_=new Array(e),S=0;S<e;S++)_[S]=arguments[S];var k=_.sort(function(e,_){return e[0]-_[0]}).map(function(e){return e[1]});return function(e){for(var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,E=[],T=e.split("\n"),M=_;M<T.length;M++){var I=T[M];I.length>1024&&(I=I.slice(0,1024));var R=J.test(I)?I.replace(J,"$1"):I;if(!R.match(/\S*Error: /)){var O,D=_createForOfIteratorHelper2(k);try{for(D.s();!(O=D.n()).done;){var L=(0,O.value)(R);if(L){E.push(L);break}}}catch(U){D.e(U)}finally{D.f()}if(E.length>=Y+S)break}}return function(e){if(!e.length)return[];var _=Array.from(e);/sentryWrapped/.test(getLastStackFrame(_).function||"")&&_.pop();_.reverse(),Q.test(getLastStackFrame(_).function||"")&&(_.pop(),Q.test(getLastStackFrame(_).function||"")&&_.pop());return _.slice(0,Y).map(function(e){return _objectSpread2(_objectSpread2({},e),{},{filename:e.filename||getLastStackFrame(_).filename,function:e.function||K})})}(E.slice(S))}}function stackParserFromStackParserOptions(e){return Array.isArray(e)?createStackParser.apply(void 0,_toConsumableArray3(e)):e}function getLastStackFrame(e){return e[e.length-1]||{}}var Z="<anonymous>";function getFunctionName(e){try{return e&&"function"==typeof e&&e.name||Z}catch(_){return Z}}function getFramesFromEvent(e){var _=e.exception;if(_){var S=[];try{return _.values.forEach(function(e){e.stacktrace.frames&&S.push.apply(S,_toConsumableArray3(e.stacktrace.frames))}),S}catch(k){return}}}var $={},ee={};function addHandler(e,_){$[e]=$[e]||[],$[e].push(_)}function maybeInstrument(e,_){if(!ee[e]){ee[e]=!0;try{_()}catch(fo){j&&X.error("Error while instrumenting ".concat(e),fo)}}}function triggerHandlers(e,_){var S=e&&$[e];if(S){var k,E=_createForOfIteratorHelper2(S);try{for(E.s();!(k=E.n()).done;){var T=k.value;try{T(_)}catch(fo){j&&X.error("Error while triggering instrumentation handler.\nType: ".concat(e,"\nName: ").concat(getFunctionName(T),"\nError:"),fo)}}}catch(M){E.e(M)}finally{E.f()}}}var te=null;function instrumentError(){te=V.onerror,V.onerror=function(e,_,S,k,E){return triggerHandlers("error",{column:k,error:E,line:S,msg:e,url:_}),!!te&&te.apply(this,arguments)},V.onerror.__SENTRY_INSTRUMENTED__=!0}var re=null;function instrumentUnhandledRejection(){re=V.onunhandledrejection,V.onunhandledrejection=function(e){return triggerHandlers("unhandledrejection",e),!re||re.apply(this,arguments)},V.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}var ne=Object.prototype.toString;function isError(e){switch(ne.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object WebAssembly.Exception]":return!0;default:return isInstanceOf(e,Error)}}function isBuiltin(e,_){return ne.call(e)==="[object ".concat(_,"]")}function isErrorEvent$1(e){return isBuiltin(e,"ErrorEvent")}function isDOMError(e){return isBuiltin(e,"DOMError")}function isString$1(e){return isBuiltin(e,"String")}function isParameterizedString(e){return"object"===_typeof3(e)&&null!==e&&"__sentry_template_string__"in e&&"__sentry_template_values__"in e}function isPrimitive(e){return null===e||isParameterizedString(e)||"object"!==_typeof3(e)&&"function"!=typeof e}function isPlainObject$3(e){return isBuiltin(e,"Object")}function isEvent(e){return"undefined"!=typeof Event&&isInstanceOf(e,Event)}function isThenable$1(e){return Boolean((null==e?void 0:e.then)&&"function"==typeof e.then)}function isInstanceOf(e,_){try{return e instanceof _}catch(S){return!1}}function isVueViewModel(e){return!("object"!==_typeof3(e)||null===e||!e.__isVue&&!e._isVue)}var ie,ae=V,oe=80;function htmlTreeAsString(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)return"<unknown>";try{for(var S,k=e,E=[],T=0,M=0,I=Array.isArray(_)?_:_.keyAttrs,R=!Array.isArray(_)&&_.maxStringLength||oe;k&&T++<5&&!("html"===(S=_htmlElementAsString(k,I))||T>1&&M+3*E.length+S.length>=R);)E.push(S),M+=S.length,k=k.parentNode;return E.reverse().join(" > ")}catch(O){return"<unknown>"}}function _htmlElementAsString(e,_){var S=e,k=[];if(null==S||!S.tagName)return"";if(ae.HTMLElement&&S instanceof HTMLElement&&S.dataset){if(S.dataset.sentryComponent)return S.dataset.sentryComponent;if(S.dataset.sentryElement)return S.dataset.sentryElement}k.push(S.tagName.toLowerCase());var E=null!=_&&_.length?_.filter(function(e){return S.getAttribute(e)}).map(function(e){return[e,S.getAttribute(e)]}):null;if(null!=E&&E.length)E.forEach(function(e){k.push("[".concat(e[0],'="').concat(e[1],'"]'))});else{S.id&&k.push("#".concat(S.id));var T=S.className;if(T&&isString$1(T)){var M,I=_createForOfIteratorHelper2(T.split(/\s+/));try{for(I.s();!(M=I.n()).done;){var R=M.value;k.push(".".concat(R))}}catch(B){I.e(B)}finally{I.f()}}}for(var O=0,D=["aria-label","type","name","title","alt"];O<D.length;O++){var L=D[O],U=S.getAttribute(L);U&&k.push("[".concat(L,'="').concat(U,'"]'))}return k.join("")}function getLocationHref(){try{return ae.document.location.href}catch(e){return""}}function truncate(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return"string"!=typeof e||0===_||e.length<=_?e:"".concat(e.slice(0,_),"...")}function safeJoin(e,_){if(!Array.isArray(e))return"";for(var S=[],k=0;k<e.length;k++){var E=e[k];try{isVueViewModel(E)?S.push("[VueViewModel]"):S.push(String(E))}catch(T){S.push("[value cannot be serialized]")}}return S.join(_)}function isMatchingPattern(e,_){var S=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return!!isString$1(e)&&(isBuiltin(_,"RegExp")?_.test(e):!!isString$1(_)&&(S?e===_:e.includes(_)))}function stringMatchesSomePattern(e){var _=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).some(function(S){return isMatchingPattern(e,S,_)})}function fill$1(e,_,S){if(_ in e){var k=e[_];if("function"==typeof k){var E=S(k);"function"==typeof E&&markFunctionWrapped(E,k);try{e[_]=E}catch(T){j&&X.log('Failed to replace method "'.concat(_,'" in object'),e)}}}}function addNonEnumerableProperty(e,_,S){try{Object.defineProperty(e,_,{value:S,writable:!0,configurable:!0})}catch(k){j&&X.log('Failed to add non-enumerable property "'.concat(_,'" to object'),e)}}function markFunctionWrapped(e,_){try{var S=_.prototype||{};e.prototype=_.prototype=S,addNonEnumerableProperty(e,"__sentry_original__",_)}catch(k){}}function getOriginalFunction(e){return e.__sentry_original__}function convertToPlainObject(e){if(isError(e))return _objectSpread2({message:e.message,name:e.name,stack:e.stack},getOwnProperties(e));if(isEvent(e)){var _=_objectSpread2({type:e.type,target:serializeEventTarget(e.target),currentTarget:serializeEventTarget(e.currentTarget)},getOwnProperties(e));return"undefined"!=typeof CustomEvent&&isInstanceOf(e,CustomEvent)&&(_.detail=e.detail),_}return e}function serializeEventTarget(e){try{return _=e,"undefined"!=typeof Element&&isInstanceOf(_,Element)?htmlTreeAsString(e):Object.prototype.toString.call(e)}catch(S){return"<unknown>"}var _}function getOwnProperties(e){if("object"===_typeof3(e)&&null!==e){var _={};for(var S in e)Object.prototype.hasOwnProperty.call(e,S)&&(_[S]=e[S]);return _}return{}}function uuid4(){var e,_=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(e=V).crypto||e.msCrypto;try{if(null!=_&&_.randomUUID)return _.randomUUID().replace(/-/g,"")}catch(S){}return ie||(ie=[1e7]+1e3+4e3+8e3+1e11),ie.replace(/[018]/g,function(e){return(e^(16*Math.random()&15)>>e/4).toString(16)})}function getFirstException(e){var _;return null===(_=e.exception)||void 0===_||null===(_=_.values)||void 0===_?void 0:_[0]}function getEventDescription(e){var _=e.message,S=e.event_id;if(_)return _;var k=getFirstException(e);return k?k.type&&k.value?"".concat(k.type,": ").concat(k.value):k.type||k.value||S||"<unknown>":S||"<unknown>"}function addExceptionTypeValue(e,_,S){var k=e.exception=e.exception||{},E=k.values=k.values||[],T=E[0]=E[0]||{};T.value||(T.value=_||""),T.type||(T.type="Error")}function addExceptionMechanism(e,_){var S=getFirstException(e);if(S){var k=S.mechanism;if(S.mechanism=_objectSpread2(_objectSpread2(_objectSpread2({},{type:"generic",handled:!0}),k),_),_&&"data"in _){var E=_objectSpread2(_objectSpread2({},null==k?void 0:k.data),_.data);S.mechanism.data=E}}}function checkOrSetAlreadyCaught(e){if(function(e){try{return e.__sentry_captured__}catch(_){}}(e))return!0;try{addNonEnumerableProperty(e,"__sentry_captured__",!0)}catch(_){}return!1}var se;function dateTimestampInSeconds(){return Date.now()/1e3}function timestampInSeconds(){return(null!=se?se:se=function(){var e=V.performance;if(null==e||!e.now||!e.timeOrigin)return dateTimestampInSeconds;var _=e.timeOrigin;return function(){return(_+e.now())/1e3}}())()}function makeSession(e){var _=timestampInSeconds(),S={sid:uuid4(),init:!0,timestamp:_,started:_,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:function(){return function(e){return{sid:"".concat(e.sid),init:e.init,started:new Date(1e3*e.started).toISOString(),timestamp:new Date(1e3*e.timestamp).toISOString(),status:e.status,errors:e.errors,did:"number"==typeof e.did||"string"==typeof e.did?"".concat(e.did):void 0,duration:e.duration,abnormal_mechanism:e.abnormal_mechanism,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}}}(S)}};return e&&updateSession(S,e),S}function updateSession(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(_.user&&(!e.ipAddress&&_.user.ip_address&&(e.ipAddress=_.user.ip_address),e.did||_.did||(e.did=_.user.id||_.user.email||_.user.username)),e.timestamp=_.timestamp||timestampInSeconds(),_.abnormal_mechanism&&(e.abnormal_mechanism=_.abnormal_mechanism),_.ignoreDuration&&(e.ignoreDuration=_.ignoreDuration),_.sid&&(e.sid=32===_.sid.length?_.sid:uuid4()),void 0!==_.init&&(e.init=_.init),!e.did&&_.did&&(e.did="".concat(_.did)),"number"==typeof _.started&&(e.started=_.started),e.ignoreDuration)e.duration=void 0;else if("number"==typeof _.duration)e.duration=_.duration;else{var S=e.timestamp-e.started;e.duration=S>=0?S:0}_.release&&(e.release=_.release),_.environment&&(e.environment=_.environment),!e.ipAddress&&_.ipAddress&&(e.ipAddress=_.ipAddress),!e.userAgent&&_.userAgent&&(e.userAgent=_.userAgent),"number"==typeof _.errors&&(e.errors=_.errors),_.status&&(e.status=_.status)}function merge$1(e,_){var S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;if(!_||"object"!==_typeof3(_)||S<=0)return _;if(e&&0===Object.keys(_).length)return e;var k=_objectSpread2({},e);for(var E in _)Object.prototype.hasOwnProperty.call(_,E)&&(k[E]=merge$1(k[E],_[E],S-1));return k}function generateTraceId(){return uuid4()}function generateSpanId(){return uuid4().substring(16)}var ue="_sentrySpan";function _setSpanForScope(e,_){_?addNonEnumerableProperty(e,ue,_):delete e[ue]}function _getSpanForScope(e){return e[ue]}var le=function(){function Scope(){_classCallCheck3(this,Scope),this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:generateTraceId(),sampleRand:Math.random()}}return _createClass3(Scope,[{key:"clone",value:function(){var e=new Scope;return e._breadcrumbs=_toConsumableArray3(this._breadcrumbs),e._tags=_objectSpread2({},this._tags),e._extra=_objectSpread2({},this._extra),e._contexts=_objectSpread2({},this._contexts),this._contexts.flags&&(e._contexts.flags={values:_toConsumableArray3(this._contexts.flags.values)}),e._user=this._user,e._level=this._level,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=_toConsumableArray3(this._eventProcessors),e._attachments=_toConsumableArray3(this._attachments),e._sdkProcessingMetadata=_objectSpread2({},this._sdkProcessingMetadata),e._propagationContext=_objectSpread2({},this._propagationContext),e._client=this._client,e._lastEventId=this._lastEventId,_setSpanForScope(e,_getSpanForScope(this)),e}},{key:"setClient",value:function(e){this._client=e}},{key:"setLastEventId",value:function(e){this._lastEventId=e}},{key:"getClient",value:function(){return this._client}},{key:"lastEventId",value:function(){return this._lastEventId}},{key:"addScopeListener",value:function(e){this._scopeListeners.push(e)}},{key:"addEventProcessor",value:function(e){return this._eventProcessors.push(e),this}},{key:"setUser",value:function(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&updateSession(this._session,{user:e}),this._notifyScopeListeners(),this}},{key:"getUser",value:function(){return this._user}},{key:"setTags",value:function(e){return this._tags=_objectSpread2(_objectSpread2({},this._tags),e),this._notifyScopeListeners(),this}},{key:"setTag",value:function(e,_){return this._tags=_objectSpread2(_objectSpread2({},this._tags),{},_defineProperty3({},e,_)),this._notifyScopeListeners(),this}},{key:"setExtras",value:function(e){return this._extra=_objectSpread2(_objectSpread2({},this._extra),e),this._notifyScopeListeners(),this}},{key:"setExtra",value:function(e,_){return this._extra=_objectSpread2(_objectSpread2({},this._extra),{},_defineProperty3({},e,_)),this._notifyScopeListeners(),this}},{key:"setFingerprint",value:function(e){return this._fingerprint=e,this._notifyScopeListeners(),this}},{key:"setLevel",value:function(e){return this._level=e,this._notifyScopeListeners(),this}},{key:"setTransactionName",value:function(e){return this._transactionName=e,this._notifyScopeListeners(),this}},{key:"setContext",value:function(e,_){return null===_?delete this._contexts[e]:this._contexts[e]=_,this._notifyScopeListeners(),this}},{key:"setSession",value:function(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}},{key:"getSession",value:function(){return this._session}},{key:"update",value:function(e){if(!e)return this;var _="function"==typeof e?e(this):e,S=(_ instanceof Scope?_.getScopeData():isPlainObject$3(_)?e:void 0)||{},k=S.tags,E=S.extra,T=S.user,M=S.contexts,I=S.level,R=S.fingerprint,O=void 0===R?[]:R,D=S.propagationContext;return this._tags=_objectSpread2(_objectSpread2({},this._tags),k),this._extra=_objectSpread2(_objectSpread2({},this._extra),E),this._contexts=_objectSpread2(_objectSpread2({},this._contexts),M),T&&Object.keys(T).length&&(this._user=T),I&&(this._level=I),O.length&&(this._fingerprint=O),D&&(this._propagationContext=D),this}},{key:"clear",value:function(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._session=void 0,_setSpanForScope(this,void 0),this._attachments=[],this.setPropagationContext({traceId:generateTraceId(),sampleRand:Math.random()}),this._notifyScopeListeners(),this}},{key:"addBreadcrumb",value:function(e,_){var S="number"==typeof _?_:100;if(S<=0)return this;var k,E=_objectSpread2(_objectSpread2({timestamp:dateTimestampInSeconds()},e),{},{message:e.message?truncate(e.message,2048):e.message});(this._breadcrumbs.push(E),this._breadcrumbs.length>S)&&(this._breadcrumbs=this._breadcrumbs.slice(-S),null===(k=this._client)||void 0===k||k.recordDroppedEvent("buffer_overflow","log_item"));return this._notifyScopeListeners(),this}},{key:"getLastBreadcrumb",value:function(){return this._breadcrumbs[this._breadcrumbs.length-1]}},{key:"clearBreadcrumbs",value:function(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}},{key:"addAttachment",value:function(e){return this._attachments.push(e),this}},{key:"clearAttachments",value:function(){return this._attachments=[],this}},{key:"getScopeData",value:function(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:_getSpanForScope(this)}}},{key:"setSDKProcessingMetadata",value:function(e){return this._sdkProcessingMetadata=merge$1(this._sdkProcessingMetadata,e,2),this}},{key:"setPropagationContext",value:function(e){return this._propagationContext=e,this}},{key:"getPropagationContext",value:function(){return this._propagationContext}},{key:"captureException",value:function(e,_){var S=(null==_?void 0:_.event_id)||uuid4();if(!this._client)return j&&X.warn("No client configured on scope - will not capture exception!"),S;var k=new Error("Sentry syntheticException");return this._client.captureException(e,_objectSpread2(_objectSpread2({originalException:e,syntheticException:k},_),{},{event_id:S}),this),S}},{key:"captureMessage",value:function(e,_,S){var k=(null==S?void 0:S.event_id)||uuid4();if(!this._client)return j&&X.warn("No client configured on scope - will not capture message!"),k;var E=new Error(e);return this._client.captureMessage(e,_,_objectSpread2(_objectSpread2({originalException:e,syntheticException:E},S),{},{event_id:k}),this),k}},{key:"captureEvent",value:function(e,_){var S=(null==_?void 0:_.event_id)||uuid4();return this._client?(this._client.captureEvent(e,_objectSpread2(_objectSpread2({},_),{},{event_id:S}),this),S):(j&&X.warn("No client configured on scope - will not capture event!"),S)}},{key:"_notifyScopeListeners",value:function(){var e=this;this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(function(_){_(e)}),this._notifyingListeners=!1)}}])}();var ce=function(){return _createClass3(function AsyncContextStack(e,_){var S,k;_classCallCheck3(this,AsyncContextStack),S=e||new le,k=_||new le,this._stack=[{scope:S}],this._isolationScope=k},[{key:"withScope",value:function(e){var _,S=this,k=this._pushScope();try{_=e(k)}catch(fo){throw this._popScope(),fo}return isThenable$1(_)?_.then(function(e){return S._popScope(),e},function(e){throw S._popScope(),e}):(this._popScope(),_)}},{key:"getClient",value:function(){return this.getStackTop().client}},{key:"getScope",value:function(){return this.getStackTop().scope}},{key:"getIsolationScope",value:function(){return this._isolationScope}},{key:"getStackTop",value:function(){return this._stack[this._stack.length-1]}},{key:"_pushScope",value:function(){var e=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:e}),e}},{key:"_popScope",value:function(){return!(this._stack.length<=1)&&!!this._stack.pop()}}])}();function getAsyncContextStack(){var e=getSentryCarrier(getMainCarrier());return e.stack=e.stack||new ce(getGlobalSingleton("defaultCurrentScope",function(){return new le}),getGlobalSingleton("defaultIsolationScope",function(){return new le}))}function withScope$1(e){return getAsyncContextStack().withScope(e)}function withSetScope(e,_){var S=getAsyncContextStack();return S.withScope(function(){return S.getStackTop().scope=e,_(e)})}function withIsolationScope(e){return getAsyncContextStack().withScope(function(){return e(getAsyncContextStack().getIsolationScope())})}function getAsyncContextStrategy(e){var _=getSentryCarrier(e);return _.acs?_.acs:{withIsolationScope:withIsolationScope,withScope:withScope$1,withSetScope:withSetScope,withSetIsolationScope:function(e,_){return withIsolationScope(_)},getCurrentScope:function(){return getAsyncContextStack().getScope()},getIsolationScope:function(){return getAsyncContextStack().getIsolationScope()}}}function getCurrentScope(){return getAsyncContextStrategy(getMainCarrier()).getCurrentScope()}function getIsolationScope(){return getAsyncContextStrategy(getMainCarrier()).getIsolationScope()}function withScope(){for(var e=getAsyncContextStrategy(getMainCarrier()),_=arguments.length,S=new Array(_),k=0;k<_;k++)S[k]=arguments[k];if(2===S.length){var E=S[0],T=S[1];return E?e.withSetScope(E,T):e.withScope(T)}return e.withScope(S[0])}function getClient(){return getCurrentScope().getClient()}var he="sentry.profile_id",de="sentry.exclusive_time";function unwrapScopeFromWeakRef(e){if(e){if("object"===_typeof3(e)&&"deref"in e&&"function"==typeof e.deref)try{return e.deref()}catch(_){return}return e}}function getCapturedScopesOnSpan(e){var _=e;return{scope:_._sentryScope,isolationScope:unwrapScopeFromWeakRef(_._sentryIsolationScope)}}var fe=/^sentry-/;function baggageHeaderToDynamicSamplingContext(e){var _=function(e){if(!e||!isString$1(e)&&!Array.isArray(e))return;if(Array.isArray(e))return e.reduce(function(e,_){var S=baggageHeaderToObject(_);return Object.entries(S).forEach(function(_){var S=_slicedToArray(_,2),k=S[0],E=S[1];e[k]=E}),e},{});return baggageHeaderToObject(e)}(e);if(_){var S=Object.entries(_).reduce(function(e,_){var S=_slicedToArray(_,2),k=S[0],E=S[1];k.match(fe)&&(e[k.slice(7)]=E);return e},{});return Object.keys(S).length>0?S:void 0}}function baggageHeaderToObject(e){return e.split(",").map(function(e){var _=e.indexOf("=");return-1===_?[]:[e.slice(0,_),e.slice(_+1)].map(function(e){try{return decodeURIComponent(e.trim())}catch(_){return}})}).reduce(function(e,_){var S=_slicedToArray(_,2),k=S[0],E=S[1];return k&&E&&(e[k]=E),e},{})}var pe=/^o(\d+)\./,ve=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function dsnToString(e){var _=arguments.length>1&&void 0!==arguments[1]&&arguments[1],S=e.host,k=e.path,E=e.pass,T=e.port,M=e.projectId,I=e.protocol,R=e.publicKey;return"".concat(I,"://").concat(R).concat(_&&E?":".concat(E):"")+"@".concat(S).concat(T?":".concat(T):"","/").concat(k?"".concat(k,"/"):k).concat(M)}function dsnFromComponents(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function extractOrgIdFromClient(e){var _,S=e.getOptions(),k=(e.getDsn()||{}).host;return S.orgId?_=String(S.orgId):k&&(_=function(e){var _=e.match(pe);return null==_?void 0:_[1]}(k)),_}function makeDsn(e){var _="string"==typeof e?function(e){var _=ve.exec(e);if(_){var S=_slicedToArray(_.slice(1),6),k=S[0],E=S[1],T=S[2],M=void 0===T?"":T,I=S[3],R=void 0===I?"":I,O=S[4],D=void 0===O?"":O,L=S[5],U="",B=void 0===L?"":L,z=B.split("/");if(z.length>1&&(U=z.slice(0,-1).join("/"),B=z.pop()),B){var G=B.match(/^\d+/);G&&(B=G[0])}return dsnFromComponents({host:R,pass:M,path:U,projectId:B,port:D,protocol:k,publicKey:E})}consoleSandbox(function(){})}(e):dsnFromComponents(e);if(_&&function(e){if(!j)return!0;var _=e.port,S=e.projectId,k=e.protocol;return!(["protocol","publicKey","host","projectId"].find(function(_){return!e[_]&&(X.error("Invalid Sentry Dsn: ".concat(_," missing")),!0)})||(S.match(/^\d+$/)?function(e){return"http"===e||"https"===e}(k)?_&&isNaN(parseInt(_,10))&&(X.error("Invalid Sentry Dsn: Invalid port ".concat(_)),1):(X.error("Invalid Sentry Dsn: Invalid protocol ".concat(k)),1):(X.error("Invalid Sentry Dsn: Invalid projectId ".concat(S)),1)))}(_))return _}var ge=!1;function spanToTraceContext(e){var _=e.spanContext(),S=_.spanId,k=_.traceId,E=_.isRemote,T=E?S:spanToJSON(e).parent_span_id,M=getCapturedScopesOnSpan(e).scope;return{parent_span_id:T,span_id:E?(null==M?void 0:M.getPropagationContext().propagationSpanId)||generateSpanId():S,trace_id:k}}function convertSpanLinksForEnvelope(_){return _&&_.length>0?_.map(function(_){var S=_.context,k=S.spanId,E=S.traceId,T=S.traceFlags,M=_objectWithoutProperties3(S,e);return _objectSpread2({span_id:k,trace_id:E,sampled:1===T,attributes:_.attributes},M)}):void 0}function spanTimeInputToSeconds(e){return"number"==typeof e?ensureTimestampInSeconds(e):Array.isArray(e)?e[0]+e[1]/1e9:e instanceof Date?ensureTimestampInSeconds(e.getTime()):timestampInSeconds()}function ensureTimestampInSeconds(e){return e>9999999999?e/1e3:e}function spanToJSON(e){if(function(e){return"function"==typeof e.getSpanJSON}(e))return e.getSpanJSON();var _=e.spanContext(),S=_.spanId,k=_.traceId;if(function(e){var _=e;return!!(_.attributes&&_.startTime&&_.name&&_.endTime&&_.status)}(e)){var E,T=e.attributes,M=e.startTime,I=e.name,R=e.endTime,O=e.status,D=e.links;return{span_id:S,trace_id:k,data:T,description:I,parent_span_id:"parentSpanId"in e?e.parentSpanId:"parentSpanContext"in e?null===(E=e.parentSpanContext)||void 0===E?void 0:E.spanId:void 0,start_timestamp:spanTimeInputToSeconds(M),timestamp:spanTimeInputToSeconds(R)||void 0,status:getStatusMessage(O),op:T["sentry.op"],origin:T["sentry.origin"],links:convertSpanLinksForEnvelope(D)}}return{span_id:S,trace_id:k,start_timestamp:0,data:{}}}function getStatusMessage(e){if(e&&0!==e.code)return 1===e.code?"ok":e.message||"unknown_error"}function getRootSpan(e){return e._sentryRootSpan||e}function showSpanDropWarning(){ge||(consoleSandbox(function(){}),ge=!0)}function logIgnoredSpan(e){X.log("Ignoring span ".concat(e.op," - ").concat(e.description," because it matches `ignoreSpans`."))}function shouldIgnoreSpan(e,_){if(null==_||!_.length||!e.description)return!1;var S,k=_createForOfIteratorHelper2(_);try{for(k.s();!(S=k.n()).done;){var E=S.value;if(isStringOrRegExp(E)){if(isMatchingPattern(e.description,E))return j&&logIgnoredSpan(e),!0}else if(E.name||E.op){var T=!E.name||isMatchingPattern(e.description,E.name),M=!E.op||e.op&&isMatchingPattern(e.op,E.op);if(T&&M)return j&&logIgnoredSpan(e),!0}}}catch(I){k.e(I)}finally{k.f()}return!1}function reparentChildSpans(e,_){var S=_.parent_span_id,k=_.span_id;if(S){var E,T=_createForOfIteratorHelper2(e);try{for(T.s();!(E=T.n()).done;){var M=E.value;M.parent_span_id===k&&(M.parent_span_id=S)}}catch(I){T.e(I)}finally{T.f()}}}function isStringOrRegExp(e){return"string"==typeof e||e instanceof RegExp}var me="production";function getDynamicSamplingContextFromClient(e,_){var S=_.getOptions(),k=(_.getDsn()||{}).publicKey,E={environment:S.environment||me,release:S.release,public_key:k,trace_id:e,org_id:extractOrgIdFromClient(_)};return _.emit("createDsc",E),E}function getDynamicSamplingContextFromSpan(e){var _,S,k=getClient();if(!k)return{};var E=getRootSpan(e),T=spanToJSON(E),M=T.data,I=E.spanContext().traceState,R=null!==(_=null!==(S=null==I?void 0:I.get("sentry.sample_rate"))&&void 0!==S?S:M["sentry.sample_rate"])&&void 0!==_?_:M["sentry.previous_trace_sample_rate"];function applyLocalSampleRateToDsc(e){return"number"!=typeof R&&"string"!=typeof R||(e.sample_rate="".concat(R)),e}var O=E._frozenDsc;if(O)return applyLocalSampleRateToDsc(O);var D=null==I?void 0:I.get("sentry.dsc"),L=D&&baggageHeaderToDynamicSamplingContext(D);if(L)return applyLocalSampleRateToDsc(L);var U,B,z=getDynamicSamplingContextFromClient(e.spanContext().traceId,k),G=M["sentry.source"],j=T.description;("url"!==G&&j&&(z.transaction=j),function(){var e;if("boolean"==typeof __SENTRY_TRACING__&&!__SENTRY_TRACING__)return!1;var _=null===(e=getClient())||void 0===e?void 0:e.getOptions();return!(!_||null==_.tracesSampleRate&&!_.tracesSampler)}())&&(z.sampled=String(function(e){return 1===e.spanContext().traceFlags}(E)),z.sample_rand=null!==(U=null==I?void 0:I.get("sentry.sample_rand"))&&void 0!==U?U:null===(B=getCapturedScopesOnSpan(E).scope)||void 0===B?void 0:B.getPropagationContext().sampleRand.toString());return applyLocalSampleRateToDsc(z),k.emit("createDsc",z,E),z}function normalize$8(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0;try{return visit("",e,_,S)}catch(k){return{ERROR:"**non-serializable** (".concat(k,")")}}}function normalizeToSize(e){var _,S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,k=arguments.length>2&&void 0!==arguments[2]?arguments[2]:102400,E=normalize$8(e,S);return _=E,function(e){return~-encodeURI(e).split(/%..|./).length}(JSON.stringify(_))>k?normalizeToSize(e,S-1,k):E}function visit(e,_){var S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0,k=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0,E=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){var e=new WeakSet;function memoize(_){return!!e.has(_)||(e.add(_),!1)}function unmemoize(_){e.delete(_)}return[memoize,unmemoize]}(),T=_slicedToArray(E,2),M=T[0],I=T[1];if(null==_||["boolean","string"].includes(_typeof3(_))||"number"==typeof _&&Number.isFinite(_))return _;var R=function(e,_){try{if("domain"===e&&_&&"object"===_typeof3(_)&&_._events)return"[Domain]";if("domainEmitter"===e)return"[DomainEmitter]";if("undefined"!=typeof global&&_===global)return"[Global]";if("undefined"!=typeof window&&_===window)return"[Window]";if("undefined"!=typeof document&&_===document)return"[Document]";if(isVueViewModel(_))return"[VueViewModel]";if(isPlainObject$3(k=_)&&"nativeEvent"in k&&"preventDefault"in k&&"stopPropagation"in k)return"[SyntheticEvent]";if("number"==typeof _&&!Number.isFinite(_))return"[".concat(_,"]");if("function"==typeof _)return"[Function: ".concat(getFunctionName(_),"]");if("symbol"===_typeof3(_))return"[".concat(String(_),"]");if("bigint"==typeof _)return"[BigInt: ".concat(String(_),"]");var S=function(e){var _=Object.getPrototypeOf(e);return null!=_&&_.constructor?_.constructor.name:"null prototype"}(_);return/^HTML(\w*)Element$/.test(S)?"[HTMLElement: ".concat(S,"]"):"[object ".concat(S,"]")}catch(E){return"**non-serializable** (".concat(E,")")}var k}(e,_);if(!R.startsWith("[object "))return R;if(_.__sentry_skip_normalization__)return _;var O="number"==typeof _.__sentry_override_normalization_depth__?_.__sentry_override_normalization_depth__:S;if(0===O)return R.replace("object ","");if(M(_))return"[Circular ~]";var D=_;if(D&&"function"==typeof D.toJSON)try{return visit("",D.toJSON(),O-1,k,E)}catch(j){}var L=Array.isArray(_)?[]:{},U=0,B=convertToPlainObject(_);for(var z in B)if(Object.prototype.hasOwnProperty.call(B,z)){if(U>=k){L[z]="[MaxProperties ~]";break}var G=B[z];L[z]=visit(z,G,O-1,k,E),U++}return I(_),L}function createEnvelope(e){return[e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]]}function addItemToEnvelope(e,_){var S=_slicedToArray(e,2),k=S[0],E=S[1];return[k,[].concat(_toConsumableArray3(E),[_])]}function forEachEnvelopeItem(e,_){var S,k=_createForOfIteratorHelper2(e[1]);try{for(k.s();!(S=k.n()).done;){var E=S.value;if(_(E,E[0].type))return!0}}catch(T){k.e(T)}finally{k.f()}return!1}function encodeUTF8(e){var _=getSentryCarrier(V);return _.encodePolyfill?_.encodePolyfill(e):(new TextEncoder).encode(e)}function serializeEnvelope(e){var _=_slicedToArray(e,2),S=_[0],k=_[1],E=JSON.stringify(S);function append(e){"string"==typeof E?E="string"==typeof e?E+e:[encodeUTF8(E),e]:E.push("string"==typeof e?encodeUTF8(e):e)}var T,M=_createForOfIteratorHelper2(k);try{for(M.s();!(T=M.n()).done;){var I=_slicedToArray(T.value,2),R=I[0],O=I[1];if(append("\n".concat(JSON.stringify(R),"\n")),"string"==typeof O||O instanceof Uint8Array)append(O);else{var D=void 0;try{D=JSON.stringify(O)}catch(L){D=JSON.stringify(normalize$8(O))}append(D)}}}catch(U){M.e(U)}finally{M.f()}return"string"==typeof E?E:function(e){var _,S=e.reduce(function(e,_){return e+_.length},0),k=new Uint8Array(S),E=0,T=_createForOfIteratorHelper2(e);try{for(T.s();!(_=T.n()).done;){var M=_.value;k.set(M,E),E+=M.length}}catch(U){T.e(U)}finally{T.f()}return k}(E)}function createAttachmentEnvelopeItem(e){var _="string"==typeof e.data?encodeUTF8(e.data):e.data;return[{type:"attachment",length:_.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType},_]}var ye={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",raw_security:"security",log:"log_item",metric:"metric",trace_metric:"metric"};function envelopeItemTypeToDataCategory(e){return ye[e]}function getSdkMetadataForEnvelopeHeader(e){if(null!=e&&e.sdk){var _=e.sdk;return{name:_.name,version:_.version}}}function createEventEnvelope(e,_,S,k){var E=getSdkMetadataForEnvelopeHeader(S),T=e.type&&"replay_event"!==e.type?e.type:"event";!function(e,_){var S,k,E,T;if(!_)return e;var M=e.sdk||{};e.sdk=_objectSpread2(_objectSpread2({},M),{},{name:M.name||_.name,version:M.version||_.version,integrations:[].concat(_toConsumableArray3((null===(S=e.sdk)||void 0===S?void 0:S.integrations)||[]),_toConsumableArray3(_.integrations||[])),packages:[].concat(_toConsumableArray3((null===(k=e.sdk)||void 0===k?void 0:k.packages)||[]),_toConsumableArray3(_.packages||[])),settings:null!==(E=e.sdk)&&void 0!==E&&E.settings||_.settings?_objectSpread2(_objectSpread2({},null===(T=e.sdk)||void 0===T?void 0:T.settings),_.settings):void 0})}(e,null==S?void 0:S.sdk);var M=function(e,_,S,k){var E,T=null===(E=e.sdkProcessingMetadata)||void 0===E?void 0:E.dynamicSamplingContext;return _objectSpread2(_objectSpread2(_objectSpread2({event_id:e.event_id,sent_at:(new Date).toISOString()},_&&{sdk:_}),!!S&&k&&{dsn:dsnToString(k)}),T&&{trace:T})}(e,E,k,_);return delete e.sdkProcessingMetadata,createEnvelope(M,[[{type:T},e]])}function resolvedSyncPromise(e){return new xe(function(_){_(e)})}function rejectedSyncPromise(e){return new xe(function(_,S){S(e)})}var _e,be,Se,we,xe=function(){function SyncPromise(e){_classCallCheck3(this,SyncPromise),this._state=0,this._handlers=[],this._runExecutor(e)}return _createClass3(SyncPromise,[{key:"then",value:function(e,_){var S=this;return new SyncPromise(function(k,E){S._handlers.push([!1,function(_){if(e)try{k(e(_))}catch(fo){E(fo)}else k(_)},function(e){if(_)try{k(_(e))}catch(fo){E(fo)}else E(e)}]),S._executeHandlers()})}},{key:"catch",value:function(e){return this.then(function(e){return e},e)}},{key:"finally",value:function(e){var _=this;return new SyncPromise(function(S,k){var E,T;return _.then(function(_){T=!1,E=_,e&&e()},function(_){T=!0,E=_,e&&e()}).then(function(){T?k(E):S(E)})})}},{key:"_executeHandlers",value:function(){var e=this;if(0!==this._state){var _=this._handlers.slice();this._handlers=[],_.forEach(function(_){_[0]||(1===e._state&&_[1](e._value),2===e._state&&_[2](e._value),_[0]=!0)})}}},{key:"_runExecutor",value:function(e){var _=this,setResult=function(e,S){0===_._state&&(isThenable$1(S)?S.then(resolve,reject):(_._state=e,_._value=S,_._executeHandlers()))},resolve=function(e){setResult(1,e)},reject=function(e){setResult(2,e)};try{e(resolve,reject)}catch(fo){reject(fo)}}}])}();function notifyEventProcessors(e,_,S){var k=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;try{var E=_notifyEventProcessors(_,S,e,k);return isThenable$1(E)?E:resolvedSyncPromise(E)}catch(T){return rejectedSyncPromise(T)}}function _notifyEventProcessors(e,_,S,k){var E=S[k];if(!e||!E)return e;var T=E(_objectSpread2({},e),_);return j&&null===T&&X.log('Event processor "'.concat(E.id||"?",'" dropped event')),isThenable$1(T)?T.then(function(e){return _notifyEventProcessors(e,_,S,k+1)}):_notifyEventProcessors(T,_,S,k+1)}function applyScopeDataToEvent(e,_){var S=_.fingerprint,k=_.span,E=_.breadcrumbs,T=_.sdkProcessingMetadata;!function(e,_){var S=_.extra,k=_.tags,E=_.user,T=_.contexts,M=_.level,I=_.transactionName;Object.keys(S).length&&(e.extra=_objectSpread2(_objectSpread2({},S),e.extra));Object.keys(k).length&&(e.tags=_objectSpread2(_objectSpread2({},k),e.tags));Object.keys(E).length&&(e.user=_objectSpread2(_objectSpread2({},E),e.user));Object.keys(T).length&&(e.contexts=_objectSpread2(_objectSpread2({},T),e.contexts));M&&(e.level=M);I&&"transaction"!==e.type&&(e.transaction=I)}(e,_),k&&function(e,_){e.contexts=_objectSpread2({trace:spanToTraceContext(_)},e.contexts),e.sdkProcessingMetadata=_objectSpread2({dynamicSamplingContext:getDynamicSamplingContextFromSpan(_)},e.sdkProcessingMetadata);var S=getRootSpan(_),k=spanToJSON(S).description;k&&!e.transaction&&"transaction"===e.type&&(e.transaction=k)}(e,k),function(e,_){e.fingerprint=e.fingerprint?Array.isArray(e.fingerprint)?e.fingerprint:[e.fingerprint]:[],_&&(e.fingerprint=e.fingerprint.concat(_));e.fingerprint.length||delete e.fingerprint}(e,S),function(e,_){var S=[].concat(_toConsumableArray3(e.breadcrumbs||[]),_toConsumableArray3(_));e.breadcrumbs=S.length?S:void 0}(e,E),function(e,_){e.sdkProcessingMetadata=_objectSpread2(_objectSpread2({},e.sdkProcessingMetadata),_)}(e,T)}function mergeScopeData(e,_){var S=_.extra,k=_.tags,E=_.user,T=_.contexts,M=_.level,I=_.sdkProcessingMetadata,R=_.breadcrumbs,O=_.fingerprint,D=_.eventProcessors,L=_.attachments,U=_.propagationContext,B=_.transactionName,z=_.span;mergeAndOverwriteScopeData(e,"extra",S),mergeAndOverwriteScopeData(e,"tags",k),mergeAndOverwriteScopeData(e,"user",E),mergeAndOverwriteScopeData(e,"contexts",T),e.sdkProcessingMetadata=merge$1(e.sdkProcessingMetadata,I,2),M&&(e.level=M),B&&(e.transactionName=B),z&&(e.span=z),R.length&&(e.breadcrumbs=[].concat(_toConsumableArray3(e.breadcrumbs),_toConsumableArray3(R))),O.length&&(e.fingerprint=[].concat(_toConsumableArray3(e.fingerprint),_toConsumableArray3(O))),D.length&&(e.eventProcessors=[].concat(_toConsumableArray3(e.eventProcessors),_toConsumableArray3(D))),L.length&&(e.attachments=[].concat(_toConsumableArray3(e.attachments),_toConsumableArray3(L))),e.propagationContext=_objectSpread2(_objectSpread2({},e.propagationContext),U)}function mergeAndOverwriteScopeData(e,_,S){e[_]=merge$1(e[_],S,1)}function prepareEvent(e,_,S,k,E,T){var M=e.normalizeDepth,I=void 0===M?3:M,R=e.normalizeMaxBreadth,O=void 0===R?1e3:R,D=_objectSpread2(_objectSpread2({},_),{},{event_id:_.event_id||S.event_id||uuid4(),timestamp:_.timestamp||dateTimestampInSeconds()}),L=S.integrations||e.integrations.map(function(e){return e.name});!function(e,_){var S=_.environment,k=_.release,E=_.dist,T=_.maxValueLength,M=void 0===T?250:T;e.environment=e.environment||S||me,!e.release&&k&&(e.release=k);!e.dist&&E&&(e.dist=E);var I=e.request;null!=I&&I.url&&(I.url=truncate(I.url,M))}(D,e),function(e,_){_.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[].concat(_toConsumableArray3(e.sdk.integrations||[]),_toConsumableArray3(_)))}(D,L),E&&E.emit("applyFrameMetadata",_),void 0===_.type&&function(e,_){var S,k=function(e){var _=V._sentryDebugIds,S=V._debugIds;if(!_&&!S)return{};var k=_?Object.keys(_):[],E=S?Object.keys(S):[];if(we&&k.length===be&&E.length===Se)return we;be=k.length,Se=E.length,we={},_e||(_e={});var processDebugIds=function(_,S){var k,E=_createForOfIteratorHelper2(_);try{for(E.s();!(k=E.n()).done;){var T,M=k.value,I=S[M],R=null===(T=_e)||void 0===T?void 0:T[M];if(R&&we&&I)we[R[0]]=I,_e&&(_e[M]=[R[0],I]);else if(I)for(var O=e(M),D=O.length-1;D>=0;D--){var L=O[D],U=null==L?void 0:L.filename;if(U&&we&&_e){we[U]=I,_e[M]=[U,I];break}}}}catch(B){E.e(B)}finally{E.f()}};return _&&processDebugIds(k,_),S&&processDebugIds(E,S),we}(_);null===(S=e.exception)||void 0===S||null===(S=S.values)||void 0===S||S.forEach(function(e){var _;null===(_=e.stacktrace)||void 0===_||null===(_=_.frames)||void 0===_||_.forEach(function(e){e.filename&&(e.debug_id=k[e.filename])})})}(D,e.stackParser);var U=function(e,_){if(!_)return e;var S=e?e.clone():new le;return S.update(_),S}(k,S.captureContext);S.mechanism&&addExceptionMechanism(D,S.mechanism);var B=E?E.getEventProcessors():[],z=getGlobalSingleton("globalScope",function(){return new le}).getScopeData();T&&mergeScopeData(z,T.getScopeData());U&&mergeScopeData(z,U.getScopeData());var G=[].concat(_toConsumableArray3(S.attachments||[]),_toConsumableArray3(z.attachments));return G.length&&(S.attachments=G),applyScopeDataToEvent(D,z),notifyEventProcessors([].concat(_toConsumableArray3(B),_toConsumableArray3(z.eventProcessors)),D,S).then(function(e){return e&&function(e){var _,S={};if(null===(_=e.exception)||void 0===_||null===(_=_.values)||void 0===_||_.forEach(function(e){var _;null===(_=e.stacktrace)||void 0===_||null===(_=_.frames)||void 0===_||_.forEach(function(e){e.debug_id&&(e.abs_path?S[e.abs_path]=e.debug_id:e.filename&&(S[e.filename]=e.debug_id),delete e.debug_id)})}),0===Object.keys(S).length)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];var k=e.debug_meta.images;Object.entries(S).forEach(function(e){var _=_slicedToArray(e,2),S=_[0],E=_[1];k.push({type:"sourcemap",code_file:S,debug_id:E})})}(e),"number"==typeof I&&I>0?function(e,_,S){var k,E;if(!e)return null;var T=_objectSpread2(_objectSpread2(_objectSpread2(_objectSpread2(_objectSpread2({},e),e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map(function(e){return _objectSpread2(_objectSpread2({},e),e.data&&{data:normalize$8(e.data,_,S)})})}),e.user&&{user:normalize$8(e.user,_,S)}),e.contexts&&{contexts:normalize$8(e.contexts,_,S)}),e.extra&&{extra:normalize$8(e.extra,_,S)});null!==(k=e.contexts)&&void 0!==k&&k.trace&&T.contexts&&(T.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(T.contexts.trace.data=normalize$8(e.contexts.trace.data,_,S)));e.spans&&(T.spans=e.spans.map(function(e){return _objectSpread2(_objectSpread2({},e),e.data&&{data:normalize$8(e.data,_,S)})}));null!==(E=e.contexts)&&void 0!==E&&E.flags&&T.contexts&&(T.contexts.flags=normalize$8(e.contexts.flags,3,S));return T}(e,I,O):e})}function parseEventHintOrCaptureContext(e){if(e)return function(e){return e instanceof le||"function"==typeof e}(e)||function(e){return Object.keys(e).some(function(e){return ke.includes(e)})}(e)?{captureContext:e}:e}var ke=["user","level","extra","contexts","tags","fingerprint","propagationContext"];function captureException(e,_){return getCurrentScope().captureException(e,parseEventHintOrCaptureContext(_))}function captureEvent(e,_){return getCurrentScope().captureEvent(e,_)}function startSession(e){var _=getIsolationScope(),S=getCurrentScope(),k=(V.navigator||{}).userAgent,E=makeSession(_objectSpread2(_objectSpread2({user:S.getUser()||_.getUser()},k&&{userAgent:k}),e)),T=_.getSession();return"ok"===(null==T?void 0:T.status)&&updateSession(T,{status:"exited"}),endSession(),_.setSession(E),E}function endSession(){var e=getIsolationScope(),_=getCurrentScope().getSession()||e.getSession();_&&function(e){var _={};"ok"===e.status&&(_={status:"exited"}),updateSession(e,_)}(_),_sendSessionUpdate(),e.setSession()}function _sendSessionUpdate(){var e=getIsolationScope(),_=getClient(),S=e.getSession();S&&_&&_.captureSession(S)}function captureSession(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]?endSession():_sendSessionUpdate()}function getBaseApiEndpoint(e){var _=e.protocol?"".concat(e.protocol,":"):"",S=e.port?":".concat(e.port):"";return"".concat(_,"//").concat(e.host).concat(S).concat(e.path?"/".concat(e.path):"","/api/")}function getEnvelopeEndpointWithUrlEncodedAuth(e,_,S){return _||"".concat(function(e){return"".concat(getBaseApiEndpoint(e)).concat(e.projectId,"/envelope/")}(e),"?").concat(function(e,_){var S={sentry_version:"7"};return e.publicKey&&(S.sentry_key=e.publicKey),_&&(S.sentry_client="".concat(_.name,"/").concat(_.version)),new URLSearchParams(S).toString()}(e,S))}var Ce=[];function getIntegrationsToSetup(e){var _,S=e.defaultIntegrations||[],k=e.integrations;if(S.forEach(function(e){e.isDefaultInstance=!0}),Array.isArray(k))_=[].concat(_toConsumableArray3(S),_toConsumableArray3(k));else if("function"==typeof k){var E=k(S);_=Array.isArray(E)?E:[E]}else _=S;return function(e){var _={};return e.forEach(function(e){var S=e.name,k=_[S];k&&!k.isDefaultInstance&&e.isDefaultInstance||(_[S]=e)}),Object.values(_)}(_)}function afterSetupIntegrations(e,_){var S,k=_createForOfIteratorHelper2(_);try{for(k.s();!(S=k.n()).done;){var E=S.value;null!=E&&E.afterAllSetup&&E.afterAllSetup(e)}}catch(T){k.e(T)}finally{k.f()}}function setupIntegration(e,_,S){if(S[_.name])j&&X.log("Integration skipped because it was already installed: ".concat(_.name));else{if(S[_.name]=_,-1===Ce.indexOf(_.name)&&"function"==typeof _.setupOnce&&(_.setupOnce(),Ce.push(_.name)),_.setup&&"function"==typeof _.setup&&_.setup(e),"function"==typeof _.preprocessEvent){var k=_.preprocessEvent.bind(_);e.on("preprocessEvent",function(_,S){return k(_,S,e)})}if("function"==typeof _.processEvent){var E=_.processEvent.bind(_),T=Object.assign(function(_,S){return E(_,S,e)},{id:_.name});e.addEventProcessor(T)}j&&X.log("Integration installed: ".concat(_.name))}}function _INTERNAL_flushLogsBuffer(e,_){var S,k=null!==(S=null!=_?_:function(e){return _getBufferMap$1().get(e)}(e))&&void 0!==S?S:[];if(0!==k.length){var E,T,M,I,R,O,D=e.getOptions(),L=(E=k,T=D._metadata,M=D.tunnel,I=e.getDsn(),O={},null!=T&&T.sdk&&(O.sdk={name:T.sdk.name,version:T.sdk.version}),M&&I&&(O.dsn=dsnToString(I)),createEnvelope(O,[(R=E,[{type:"log",item_count:R.length,content_type:"application/vnd.sentry.items.log+json"},{items:R}])]));_getBufferMap$1().set(e,[]),e.emit("flushLogs"),e.sendEnvelope(L)}}function _getBufferMap$1(){return getGlobalSingleton("clientToLogBufferMap",function(){return new WeakMap})}function _INTERNAL_flushMetricsBuffer(e,_){var S,k=null!==(S=null!=_?_:function(e){return _getBufferMap().get(e)}(e))&&void 0!==S?S:[];if(0!==k.length){var E,T,M,I,R,O,D=e.getOptions(),L=(E=k,T=D._metadata,M=D.tunnel,I=e.getDsn(),O={},null!=T&&T.sdk&&(O.sdk={name:T.sdk.name,version:T.sdk.version}),M&&I&&(O.dsn=dsnToString(I)),createEnvelope(O,[(R=E,[{type:"trace_metric",item_count:R.length,content_type:"application/vnd.sentry.items.trace-metric+json"},{items:R}])]));_getBufferMap().set(e,[]),e.emit("flushMetrics"),e.sendEnvelope(L)}}function _getBufferMap(){return getGlobalSingleton("clientToMetricBufferMap",function(){return new WeakMap})}function getPossibleEventMessages(e){var _=[];e.message&&_.push(e.message);try{var S=e.exception.values[e.exception.values.length-1];null!=S&&S.value&&(_.push(S.value),S.type&&_.push("".concat(S.type,": ").concat(S.value)))}catch(k){}return _}var Ae="Not capturing exception because it's already been captured.",Ee="Discarded session because of missing or non-string release",Te=Symbol.for("SentryInternalError"),Me=Symbol.for("SentryDoNotSendEventError");function _makeInternalError(e){return _defineProperty3({message:e},Te,!0)}function _makeDoNotSendEventError(e){return _defineProperty3({message:e},Me,!0)}function _isInternalError(e){return!!e&&"object"===_typeof3(e)&&Te in e}function _isDoNotSendEventError(e){return!!e&&"object"===_typeof3(e)&&Me in e}function setupWeightBasedFlushing(e,_,S,k,E){var T,M=0;e.on(S,function(){M=0,clearTimeout(T)}),e.on(_,function(_){(M+=k(_))>=8e5?E(e):(clearTimeout(T),T=setTimeout(function(){E(e)},5e3))}),e.on("flush",function(){E(e)})}var Ie=function(){return _createClass3(function Client(e){var _;if(_classCallCheck3(this,Client),this._options=e,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],e.dsn?this._dsn=makeDsn(e.dsn):j&&X.warn("No DSN provided, client will not send events."),this._dsn){var S=getEnvelopeEndpointWithUrlEncodedAuth(this._dsn,e.tunnel,e._metadata?e._metadata.sdk:void 0);this._transport=e.transport(_objectSpread2(_objectSpread2({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this)},e.transportOptions),{},{url:S}))}this._options.enableLogs&&setupWeightBasedFlushing(this,"afterCaptureLog","flushLogs",estimateLogSizeInBytes,_INTERNAL_flushLogsBuffer),null!==(_=this._options._experiments)&&void 0!==_&&_.enableMetrics&&setupWeightBasedFlushing(this,"afterCaptureMetric","flushMetrics",estimateMetricSizeInBytes,_INTERNAL_flushMetricsBuffer)},[{key:"captureException",value:function(e,_,S){var k=this,E=uuid4();if(checkOrSetAlreadyCaught(e))return j&&X.log(Ae),E;var T=_objectSpread2({event_id:E},_);return this._process(this.eventFromException(e,T).then(function(e){return k._captureEvent(e,T,S)})),T.event_id}},{key:"captureMessage",value:function(e,_,S,k){var E=this,T=_objectSpread2({event_id:uuid4()},S),M=isParameterizedString(e)?e:String(e),I=isPrimitive(e)?this.eventFromMessage(M,_,T):this.eventFromException(e,T);return this._process(I.then(function(e){return E._captureEvent(e,T,k)})),T.event_id}},{key:"captureEvent",value:function(e,_,S){var k=uuid4();if(null!=_&&_.originalException&&checkOrSetAlreadyCaught(_.originalException))return j&&X.log(Ae),k;var E=_objectSpread2({event_id:k},_),T=e.sdkProcessingMetadata||{},M=T.capturedSpanScope,I=T.capturedSpanIsolationScope;return this._process(this._captureEvent(e,E,M||S,I)),E.event_id}},{key:"captureSession",value:function(e){this.sendSession(e),updateSession(e,{init:!1})}},{key:"getDsn",value:function(){return this._dsn}},{key:"getOptions",value:function(){return this._options}},{key:"getSdkMetadata",value:function(){return this._options._metadata}},{key:"getTransport",value:function(){return this._transport}},{key:"flush",value:(k=_asyncToGenerator(_regenerator().m(function _callee(e){var _,S,k;return _regenerator().w(function(E){for(;;)switch(E.n){case 0:if(_=this._transport){E.n=1;break}return E.a(2,!0);case 1:return this.emit("flush"),E.n=2,this._isClientDoneProcessing(e);case 2:return S=E.v,E.n=3,_.flush(e);case 3:return k=E.v,E.a(2,S&&k)}},_callee,this)})),function(e){return k.apply(this,arguments)})},{key:"close",value:(S=_asyncToGenerator(_regenerator().m(function _callee2(e){var _;return _regenerator().w(function(S){for(;;)switch(S.n){case 0:return S.n=1,this.flush(e);case 1:return _=S.v,this.getOptions().enabled=!1,this.emit("close"),S.a(2,_)}},_callee2,this)})),function(e){return S.apply(this,arguments)})},{key:"getEventProcessors",value:function(){return this._eventProcessors}},{key:"addEventProcessor",value:function(e){this._eventProcessors.push(e)}},{key:"init",value:function(){(this._isEnabled()||this._options.integrations.some(function(e){return e.name.startsWith("Spotlight")}))&&this._setupIntegrations()}},{key:"getIntegrationByName",value:function(e){return this._integrations[e]}},{key:"addIntegration",value:function(e){var _=this._integrations[e.name];setupIntegration(this,e,this._integrations),_||afterSetupIntegrations(this,[e])}},{key:"sendEvent",value:function(e){var _=this,S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.emit("beforeSendEvent",e,S);var k,E=createEventEnvelope(e,this._dsn,this._options._metadata,this._options.tunnel),T=_createForOfIteratorHelper2(S.attachments||[]);try{for(T.s();!(k=T.n()).done;){E=addItemToEnvelope(E,createAttachmentEnvelopeItem(k.value))}}catch(M){T.e(M)}finally{T.f()}this.sendEnvelope(E).then(function(S){return _.emit("afterSendEvent",e,S)})}},{key:"sendSession",value:function(e){var _=this._options,S=_.release,k=_.environment,E=void 0===k?me:k;if("aggregates"in e){var T=e.attrs||{};if(!T.release&&!S)return void(j&&X.warn(Ee));T.release=T.release||S,T.environment=T.environment||E,e.attrs=T}else{if(!e.release&&!S)return void(j&&X.warn(Ee));e.release=e.release||S,e.environment=e.environment||E}this.emit("beforeSendSession",e);var M=function(e,_,S,k){var E=getSdkMetadataForEnvelopeHeader(S);return createEnvelope(_objectSpread2(_objectSpread2({sent_at:(new Date).toISOString()},E&&{sdk:E}),!!k&&_&&{dsn:dsnToString(_)}),["aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()]])}(e,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(M)}},{key:"recordDroppedEvent",value:function(e,_){var S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(this._options.sendClientReports){var k="".concat(e,":").concat(_);j&&X.log('Recording outcome: "'.concat(k,'"').concat(S>1?" (".concat(S," times)"):"")),this._outcomes[k]=(this._outcomes[k]||0)+S}}},{key:"on",value:function(e,_){var S=this._hooks[e]=this._hooks[e]||new Set,uniqueCallback=function(){return _.apply(void 0,arguments)};return S.add(uniqueCallback),function(){S.delete(uniqueCallback)}}},{key:"emit",value:function(e){for(var _=arguments.length,S=new Array(_>1?_-1:0),k=1;k<_;k++)S[k-1]=arguments[k];var E=this._hooks[e];E&&E.forEach(function(e){return e.apply(void 0,S)})}},{key:"sendEnvelope",value:(_=_asyncToGenerator(_regenerator().m(function _callee3(e){var _;return _regenerator().w(function(S){for(;;)switch(S.p=S.n){case 0:if(this.emit("beforeEnvelope",e),!this._isEnabled()||!this._transport){S.n=4;break}return S.p=1,S.n=2,this._transport.send(e);case 2:return S.a(2,S.v);case 3:return S.p=3,_=S.v,j&&X.error("Error while sending envelope:",_),S.a(2,{});case 4:return j&&X.error("Transport disabled"),S.a(2,{})}},_callee3,this,[[1,3]])})),function(e){return _.apply(this,arguments)})},{key:"_setupIntegrations",value:function(){var e=this._options.integrations;this._integrations=function(e,_){var S={};return _.forEach(function(_){_&&setupIntegration(e,_,S)}),S}(this,e),afterSetupIntegrations(this,e)}},{key:"_updateSessionFromEvent",value:function(e,_){var S,k="fatal"===_.level,E=!1,T=null===(S=_.exception)||void 0===S?void 0:S.values;if(T){E=!0;var M,I=_createForOfIteratorHelper2(T);try{for(I.s();!(M=I.n()).done;){var R=M.value.mechanism;if(!1===(null==R?void 0:R.handled)){k=!0;break}}}catch(D){I.e(D)}finally{I.f()}}var O="ok"===e.status;(O&&0===e.errors||O&&k)&&(updateSession(e,_objectSpread2(_objectSpread2({},k&&{status:"crashed"}),{},{errors:e.errors||Number(E||k)})),this.captureSession(e))}},{key:"_isClientDoneProcessing",value:(e=_asyncToGenerator(_regenerator().m(function _callee4(e){var _;return _regenerator().w(function(S){for(;;)switch(S.n){case 0:_=0;case 1:if(e&&!(_<e)){S.n=4;break}return S.n=2,new Promise(function(e){return setTimeout(e,1)});case 2:if(this._numProcessing){S.n=3;break}return S.a(2,!0);case 3:_++,S.n=1;break;case 4:return S.a(2,!1)}},_callee4,this)})),function(_){return e.apply(this,arguments)})},{key:"_isEnabled",value:function(){return!1!==this.getOptions().enabled&&void 0!==this._transport}},{key:"_prepareEvent",value:function(e,_,S,k){var E=this,T=this.getOptions(),M=Object.keys(this._integrations);return!_.integrations&&null!=M&&M.length&&(_.integrations=M),this.emit("preprocessEvent",e,_),e.type||k.setLastEventId(e.event_id||_.event_id),prepareEvent(T,e,_,S,this,k).then(function(e){if(null===e)return e;var k,T,M,I,R;E.emit("postprocessEvent",e,_),e.contexts=_objectSpread2({trace:(k=S,T=k.getPropagationContext(),M=T.traceId,I=T.parentSpanId,R={trace_id:M,span_id:T.propagationSpanId||generateSpanId()},I&&(R.parent_span_id=I),R)},e.contexts);var O=function(e,_){var S=_.getPropagationContext();return S.dsc||getDynamicSamplingContextFromClient(S.traceId,e)}(E,S);return e.sdkProcessingMetadata=_objectSpread2({dynamicSamplingContext:O},e.sdkProcessingMetadata),e})}},{key:"_captureEvent",value:function(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:getCurrentScope(),k=arguments.length>3&&void 0!==arguments[3]?arguments[3]:getIsolationScope();return j&&isErrorEvent(e)&&X.log("Captured error event `".concat(getPossibleEventMessages(e)[0]||"<unknown>","`")),this._processEvent(e,_,S,k).then(function(e){return e.event_id},function(e){j&&(_isDoNotSendEventError(e)?X.log(e.message):_isInternalError(e)?X.warn(e.message):X.warn(e))})}},{key:"_processEvent",value:function(e,_,S,k){var E=this,T=this.getOptions(),M=T.sampleRate,I=isTransactionEvent(e),R=isErrorEvent(e),O=e.type||"error",D="before send for type `".concat(O,"`"),L=void 0===M?void 0:function(e){if("boolean"==typeof e)return Number(e);var _="string"==typeof e?parseFloat(e):e;return"number"!=typeof _||isNaN(_)||_<0||_>1?void 0:_}(M);if(R&&"number"==typeof L&&Math.random()>L)return this.recordDroppedEvent("sample_rate","error"),rejectedSyncPromise(_makeDoNotSendEventError("Discarding event because it's not included in the random sample (sampling rate = ".concat(M,")")));var U="replay_event"===O?"replay":O;return this._prepareEvent(e,_,S,k).then(function(e){if(null===e)throw E.recordDroppedEvent("event_processor",U),_makeDoNotSendEventError("An event processor returned `null`, will not send event.");if(_.data&&!0===_.data.__sentry__)return e;var S=function(e,_,S,k){var E=_.beforeSend,T=_.beforeSendTransaction,M=_.beforeSendSpan,I=_.ignoreSpans,R=S;if(isErrorEvent(R)&&E)return E(R,k);if(isTransactionEvent(R)){if(M||I){var O=function(e){var _,S,k,E=null!==(_=null===(S=e.contexts)||void 0===S?void 0:S.trace)&&void 0!==_?_:{},T=E.trace_id,M=E.parent_span_id,I=E.span_id,R=E.status,O=E.origin,D=E.data,L=E.op;return{data:null!=D?D:{},description:e.transaction,op:L,parent_span_id:M,span_id:null!=I?I:"",start_timestamp:null!==(k=e.start_timestamp)&&void 0!==k?k:0,status:R,timestamp:e.timestamp,trace_id:null!=T?T:"",origin:O,profile_id:null==D?void 0:D[he],exclusive_time:null==D?void 0:D[de],measurements:e.measurements,is_segment:!0}}(R);if(null!=I&&I.length&&shouldIgnoreSpan(O,I))return null;if(M){var D=M(O);D?R=merge$1(S,function(e){return{type:"transaction",timestamp:e.timestamp,start_timestamp:e.start_timestamp,transaction:e.description,contexts:{trace:{trace_id:e.trace_id,span_id:e.span_id,parent_span_id:e.parent_span_id,op:e.op,status:e.status,origin:e.origin,data:_objectSpread2(_objectSpread2(_objectSpread2({},e.data),e.profile_id&&_defineProperty3({},he,e.profile_id)),e.exclusive_time&&_defineProperty3({},de,e.exclusive_time))}},measurements:e.measurements}}(D)):showSpanDropWarning()}if(R.spans){var L,U=[],B=R.spans,z=_createForOfIteratorHelper2(B);try{for(z.s();!(L=z.n()).done;){var G=L.value;if(null!=I&&I.length&&shouldIgnoreSpan(G,I))reparentChildSpans(B,G);else if(M){var j=M(G);j?U.push(j):(showSpanDropWarning(),U.push(G))}else U.push(G)}}catch(W){z.e(W)}finally{z.f()}var V=R.spans.length-U.length;V&&e.recordDroppedEvent("before_send","span",V),R.spans=U}}if(T){if(R.spans){var H=R.spans.length;R.sdkProcessingMetadata=_objectSpread2(_objectSpread2({},S.sdkProcessingMetadata),{},{spanCountBeforeProcessing:H})}return T(R,k)}}return R}(E,T,e,_);return function(e,_){var S="".concat(_," must return `null` or a valid event.");if(isThenable$1(e))return e.then(function(e){if(!isPlainObject$3(e)&&null!==e)throw _makeInternalError(S);return e},function(e){throw _makeInternalError("".concat(_," rejected with ").concat(e))});if(!isPlainObject$3(e)&&null!==e)throw _makeInternalError(S);return e}(S,D)}).then(function(T){if(null===T){if(E.recordDroppedEvent("before_send",U),I){var M=1+(e.spans||[]).length;E.recordDroppedEvent("before_send","span",M)}throw _makeDoNotSendEventError("".concat(D," returned `null`, will not send event."))}var O=S.getSession()||k.getSession();if(R&&O&&E._updateSessionFromEvent(O,T),I){var L,B=((null===(L=T.sdkProcessingMetadata)||void 0===L?void 0:L.spanCountBeforeProcessing)||0)-(T.spans?T.spans.length:0);B>0&&E.recordDroppedEvent("before_send","span",B)}var z=T.transaction_info;if(I&&z&&T.transaction!==e.transaction){T.transaction_info=_objectSpread2(_objectSpread2({},z),{},{source:"custom"})}return E.sendEvent(T,_),T}).then(null,function(e){if(_isDoNotSendEventError(e)||_isInternalError(e))throw e;throw E.captureException(e,{mechanism:{handled:!1,type:"internal"},data:{__sentry__:!0},originalException:e}),_makeInternalError("Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: ".concat(e))})}},{key:"_process",value:function(e){var _=this;this._numProcessing++,e.then(function(e){return _._numProcessing--,e},function(e){return _._numProcessing--,e})}},{key:"_clearOutcomes",value:function(){var e=this._outcomes;return this._outcomes={},Object.entries(e).map(function(e){var _=_slicedToArray(e,2),S=_[0],k=_[1],E=_slicedToArray(S.split(":"),2);return{reason:E[0],category:E[1],quantity:k}})}},{key:"_flushOutcomes",value:function(){j&&X.log("Flushing outcomes...");var e=this._clearOutcomes();if(0!==e.length)if(this._dsn){j&&X.log("Sending outcomes:",e);var _,S,k=(_=e,createEnvelope((S=this._options.tunnel&&dsnToString(this._dsn))?{dsn:S}:{},[[{type:"client_report"},{timestamp:dateTimestampInSeconds(),discarded_events:_}]]));this.sendEnvelope(k)}else j&&X.log("No dsn provided, will not send outcomes");else j&&X.log("No outcomes to send")}}]);var e,_,S,k}();function isErrorEvent(e){return void 0===e.type}function isTransactionEvent(e){return"transaction"===e.type}function estimateMetricSizeInBytes(e){var _=0;return e.name&&(_+=2*e.name.length),"string"==typeof e.value?_+=2*e.value.length:_+=8,_+estimateAttributesSizeInBytes(e.attributes)}function estimateLogSizeInBytes(e){var _=0;return e.message&&(_+=2*e.message.length),_+estimateAttributesSizeInBytes(e.attributes)}function estimateAttributesSizeInBytes(e){if(!e)return 0;var _=0;return Object.values(e).forEach(function(e){Array.isArray(e)?_+=e.length*estimatePrimitiveSizeInBytes(e[0]):isPrimitive(e)?_+=estimatePrimitiveSizeInBytes(e):_+=100}),_}function estimatePrimitiveSizeInBytes(e){return"string"==typeof e?2*e.length:"number"==typeof e?8:"boolean"==typeof e?4:0}var Re=Symbol.for("SentryBufferFullError");function makePromiseBuffer(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,_=new Set;function remove(e){_.delete(e)}return{get $(){return Array.from(_)},add:function(S){if(!(_.size<e))return rejectedSyncPromise(Re);var k=S();return _.add(k),k.then(function(){return remove(k)},function(){return remove(k)}),k},drain:function(e){if(!_.size)return resolvedSyncPromise(!0);var S=Promise.allSettled(Array.from(_)).then(function(){return!0});if(!e)return S;var k=[S,new Promise(function(_){return setTimeout(function(){return _(!1)},e)})];return Promise.race(k)}}}var Pe=6e4;function updateRateLimits(e,_){var S=_.statusCode,k=_.headers,E=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Date.now(),T=_objectSpread2({},e),M=null==k?void 0:k["x-sentry-rate-limits"],I=null==k?void 0:k["retry-after"];if(M){var R,O=_createForOfIteratorHelper2(M.trim().split(","));try{for(O.s();!(R=O.n()).done;){var D=_slicedToArray(R.value.split(":",5),5),L=D[0],U=D[1],B=D[4],z=parseInt(L,10),G=1e3*(isNaN(z)?60:z);if(U){var j,V=_createForOfIteratorHelper2(U.split(";"));try{for(V.s();!(j=V.n()).done;){var H=j.value;"metric_bucket"===H&&B&&!B.split(";").includes("custom")||(T[H]=E+G)}}catch(W){V.e(W)}finally{V.f()}}else T.all=E+G}}catch(W){O.e(W)}finally{O.f()}}else I?T.all=E+function(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now(),S=parseInt("".concat(e),10);if(!isNaN(S))return 1e3*S;var k=Date.parse("".concat(e));return isNaN(k)?Pe:k-_}(I,E):429===S&&(T.all=E+6e4);return T}var Oe=64;function createTransport(e,_){var S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:makePromiseBuffer(e.bufferSize||Oe),k={};return{send:function(E){var T=[];if(forEachEnvelopeItem(E,function(_,S){var E=envelopeItemTypeToDataCategory(S);!function(e,_){var S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Date.now();return function(e,_){return e[_]||e.all||0}(e,_)>S}(k,E)?T.push(_):e.recordDroppedEvent("ratelimit_backoff",E)}),0===T.length)return Promise.resolve({});var M=createEnvelope(E[0],T),recordEnvelopeLoss=function(_){forEachEnvelopeItem(M,function(S,k){e.recordDroppedEvent(_,envelopeItemTypeToDataCategory(k))})};return S.add(function(){return _({body:serializeEnvelope(M)}).then(function(e){return void 0!==e.statusCode&&(e.statusCode<200||e.statusCode>=300)&&j&&X.warn("Sentry responded with status code ".concat(e.statusCode," to sent event.")),k=updateRateLimits(k,e),e},function(e){throw recordEnvelopeLoss("network_error"),j&&X.error("Encountered error running transport request:",e),e})}).then(function(e){return e},function(e){if(e===Re)return j&&X.error("Skipped sending event because buffer is full."),recordEnvelopeLoss("queue_overflow"),Promise.resolve({});throw e})},flush:function(e){return S.drain(e)}}}function parseUrl(e){if(!e)return{};var _=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!_)return{};var S=_[6]||"",k=_[8]||"";return{host:_[4],path:_[5],protocol:_[2],search:S,hash:k,relative:_[5]+S+k}}function addAutoIpAddressToSession(e){var _;"aggregates"in e?void 0===(null===(_=e.attrs)||void 0===_?void 0:_.ip_address)&&(e.attrs=_objectSpread2(_objectSpread2({},e.attrs),{},{ip_address:"{{auto}}"})):void 0===e.ipAddress&&(e.ipAddress="{{auto}}")}function applySdkMetadata(e,_){var S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[_],k=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"npm",E=e._metadata||{};E.sdk||(E.sdk={name:"sentry.javascript.".concat(_),packages:S.map(function(e){return{name:"".concat(k,":@sentry/").concat(e),version:H}}),version:H}),e._metadata=E}var De;function addBreadcrumb(e,_){var S=getClient(),k=getIsolationScope();if(S){var E=S.getOptions(),T=E.beforeBreadcrumb,M=void 0===T?null:T,I=E.maxBreadcrumbs,R=void 0===I?100:I;if(!(R<=0)){var O=_objectSpread2({timestamp:dateTimestampInSeconds()},e),D=M?consoleSandbox(function(){return M(O,_)}):O;null!==D&&(S.emit&&S.emit("beforeAddBreadcrumb",D,_),k.addBreadcrumb(D,R))}}}var Le=new WeakMap,functionToStringIntegration=function(){return{name:"FunctionToString",setupOnce:function(){De=Function.prototype.toString;try{Function.prototype.toString=function(){for(var e=getOriginalFunction(this),_=Le.has(getClient())&&void 0!==e?e:this,S=arguments.length,k=new Array(S),E=0;E<S;E++)k[E]=arguments[E];return De.apply(_,k)}}catch(e){}},setup:function(e){Le.set(e,!0)}}},Fe=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,/^Can't find variable: gmo$/,/^undefined is not an object \(evaluating 'a\.[A-Z]'\)$/,'can\'t redefine non-configurable property "solana"',"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)","Can't find variable: _AutofillCallbackHandler",/^Non-Error promise rejection captured with value: Object Not Found Matching Id:\d+, MethodName:simulateEvent, ParamCount:\d+$/,/^Java exception was raised during method invocation$/],eventFiltersIntegration=function(){var e,_=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{name:"EventFilters",setup:function(S){var k=S.getOptions();e=_mergeOptions(_,k)},processEvent:function(S,k,E){if(!e){var T=E.getOptions();e=_mergeOptions(_,T)}return function(e,_){if(e.type){if("transaction"===e.type&&function(e,_){if(null==_||!_.length)return!1;var S=e.transaction;return!!S&&stringMatchesSomePattern(S,_)}(e,_.ignoreTransactions))return j&&X.warn("Event dropped due to being matched by `ignoreTransactions` option.\nEvent: ".concat(getEventDescription(e))),!0}else{if(function(e,_){if(null==_||!_.length)return!1;return getPossibleEventMessages(e).some(function(e){return stringMatchesSomePattern(e,_)})}(e,_.ignoreErrors))return j&&X.warn("Event dropped due to being matched by `ignoreErrors` option.\nEvent: ".concat(getEventDescription(e))),!0;if(function(e){var _;if(null===(_=e.exception)||void 0===_||null===(_=_.values)||void 0===_||!_.length)return!1;return!e.message&&!e.exception.values.some(function(e){return e.stacktrace||e.type&&"Error"!==e.type||e.value})}(e))return j&&X.warn("Event dropped due to not having an error message, error type or stacktrace.\nEvent: ".concat(getEventDescription(e))),!0;if(function(e,_){if(null==_||!_.length)return!1;var S=_getEventFilterUrl(e);return!!S&&stringMatchesSomePattern(S,_)}(e,_.denyUrls))return j&&X.warn("Event dropped due to being matched by `denyUrls` option.\nEvent: ".concat(getEventDescription(e),".\nUrl: ").concat(_getEventFilterUrl(e))),!0;if(!function(e,_){if(null==_||!_.length)return!0;var S=_getEventFilterUrl(e);return!S||stringMatchesSomePattern(S,_)}(e,_.allowUrls))return j&&X.warn("Event dropped due to not being matched by `allowUrls` option.\nEvent: ".concat(getEventDescription(e),".\nUrl: ").concat(_getEventFilterUrl(e))),!0}return!1}(S,e)?null:S}}},inboundFiltersIntegration=function(){return _objectSpread2(_objectSpread2({},eventFiltersIntegration(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})),{},{name:"InboundFilters"})};function _mergeOptions(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{allowUrls:[].concat(_toConsumableArray3(e.allowUrls||[]),_toConsumableArray3(_.allowUrls||[])),denyUrls:[].concat(_toConsumableArray3(e.denyUrls||[]),_toConsumableArray3(_.denyUrls||[])),ignoreErrors:[].concat(_toConsumableArray3(e.ignoreErrors||[]),_toConsumableArray3(_.ignoreErrors||[]),_toConsumableArray3(e.disableErrorDefaults?[]:Fe)),ignoreTransactions:[].concat(_toConsumableArray3(e.ignoreTransactions||[]),_toConsumableArray3(_.ignoreTransactions||[]))}}function _getEventFilterUrl(e){try{var _,S,k,E=_toConsumableArray3(null!==(_=null===(S=e.exception)||void 0===S?void 0:S.values)&&void 0!==_?_:[]).reverse().find(function(e){var _,S;return void 0===(null===(_=e.mechanism)||void 0===_?void 0:_.parent_id)&&(null===(S=e.stacktrace)||void 0===S||null===(S=S.frames)||void 0===S?void 0:S.length)}),T=null==E||null===(k=E.stacktrace)||void 0===k?void 0:k.frames;return T?function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],_=e.length-1;_>=0;_--){var S=e[_];if(S&&"<anonymous>"!==S.filename&&"[native code]"!==S.filename)return S.filename||null}return null}(T):null}catch(M){return j&&X.error("Cannot extract url for event ".concat(getEventDescription(e))),null}}function applyAggregateErrorsToEvent(e,_,S,k,E,T){var M;if(null!==(M=E.exception)&&void 0!==M&&M.values&&T&&isInstanceOf(T.originalException,Error)){var I=E.exception.values.length>0?E.exception.values[E.exception.values.length-1]:void 0;I&&(E.exception.values=aggregateExceptionsFromError(e,_,k,T.originalException,S,E.exception.values,I,0))}}function aggregateExceptionsFromError(e,_,S,k,E,T,M,I){if(T.length>=S+1)return T;var R=_toConsumableArray3(T);if(isInstanceOf(k[E],Error)){applyExceptionGroupFieldsForParentException(M,I);var O=e(_,k[E]),D=R.length;applyExceptionGroupFieldsForChildException(O,E,D,I),R=aggregateExceptionsFromError(e,_,S,k[E],E,[O].concat(_toConsumableArray3(R)),O,D)}return Array.isArray(k.errors)&&k.errors.forEach(function(k,T){if(isInstanceOf(k,Error)){applyExceptionGroupFieldsForParentException(M,I);var O=e(_,k),D=R.length;applyExceptionGroupFieldsForChildException(O,"errors[".concat(T,"]"),D,I),R=aggregateExceptionsFromError(e,_,S,k,E,[O].concat(_toConsumableArray3(R)),O,D)}}),R}function applyExceptionGroupFieldsForParentException(e,_){e.mechanism=_objectSpread2(_objectSpread2(_objectSpread2({handled:!0,type:"auto.core.linked_errors"},e.mechanism),"AggregateError"===e.type&&{is_exception_group:!0}),{},{exception_id:_})}function applyExceptionGroupFieldsForChildException(e,_,S,k){e.mechanism=_objectSpread2(_objectSpread2({handled:!0},e.mechanism),{},{type:"chained",source:_,exception_id:S,parent_id:k})}function instrumentConsole(){"console"in V&&W.forEach(function(e){e in V.console&&fill$1(V.console,e,function(_){return q[e]=_,function(){for(var _=arguments.length,S=new Array(_),k=0;k<_;k++)S[k]=arguments[k];triggerHandlers("console",{args:S,level:e});var E=q[e];null==E||E.apply(V.console,S)}})})}function severityLevelFromString(e){return"warn"===e?"warning":["fatal","error","warning","log","info","debug"].includes(e)?e:"log"}var dedupeIntegration=function(){var e;return{name:"Dedupe",processEvent:function(_){if(_.type)return _;try{if(function(e,_){if(!_)return!1;if(function(e,_){var S=e.message,k=_.message;if(!S&&!k)return!1;if(S&&!k||!S&&k)return!1;if(S!==k)return!1;if(!_isSameFingerprint(e,_))return!1;if(!_isSameStacktrace(e,_))return!1;return!0}(e,_))return!0;if(function(e,_){var S=_getExceptionFromEvent(_),k=_getExceptionFromEvent(e);if(!S||!k)return!1;if(S.type!==k.type||S.value!==k.value)return!1;if(!_isSameFingerprint(e,_))return!1;if(!_isSameStacktrace(e,_))return!1;return!0}(e,_))return!0;return!1}(_,e))return j&&X.warn("Event dropped due to being a duplicate of previously captured event."),null}catch(S){}return e=_}}};function _isSameStacktrace(e,_){var S=getFramesFromEvent(e),k=getFramesFromEvent(_);if(!S&&!k)return!0;if(S&&!k||!S&&k)return!1;if(k.length!==S.length)return!1;for(var E=0;E<k.length;E++){var T=k[E],M=S[E];if(T.filename!==M.filename||T.lineno!==M.lineno||T.colno!==M.colno||T.function!==M.function)return!1}return!0}function _isSameFingerprint(e,_){var S=e.fingerprint,k=_.fingerprint;if(!S&&!k)return!0;if(S&&!k||!S&&k)return!1;try{return!(S.join("")!==k.join(""))}catch(E){return!1}}function _getExceptionFromEvent(e){var _;return null===(_=e.exception)||void 0===_||null===(_=_.values)||void 0===_?void 0:_[0]}function getBreadcrumbLogLevelFromHttpStatusCode(e){return void 0===e?void 0:e>=400&&e<500?"warning":e>=500?"error":void 0}var Ue=V;function isNativeFunction(e){return e&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function supportsNativeFetch(){if("string"==typeof EdgeRuntime)return!0;if(!function(){if(!("fetch"in Ue))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch(e){return!1}}())return!1;if(isNativeFunction(Ue.fetch))return!0;var e=!1,_=Ue.document;if(_&&"function"==typeof _.createElement)try{var S,k=_.createElement("iframe");k.hidden=!0,_.head.appendChild(k),null!==(S=k.contentWindow)&&void 0!==S&&S.fetch&&(e=isNativeFunction(k.contentWindow.fetch)),_.head.removeChild(k)}catch(E){j&&X.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",E)}return e}function addFetchInstrumentationHandler(e,_){var S="fetch";addHandler(S,e),maybeInstrument(S,function(){return function(e){var _=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(_&&!supportsNativeFetch())return;fill$1(V,"fetch",function(e){return function(){for(var _=new Error,S=arguments.length,k=new Array(S),E=0;E<S;E++)k[E]=arguments[E];var T=function(e){if(0===e.length)return{method:"GET",url:""};if(2===e.length){var _=_slicedToArray(e,2),S=_[0],k=_[1];return{url:getUrlFromResource(S),method:hasProp(k,"method")?String(k.method).toUpperCase():"GET"}}var E=e[0];return{url:getUrlFromResource(E),method:hasProp(E,"method")?String(E.method).toUpperCase():"GET"}}(k),M={args:k,fetchData:{method:T.method,url:T.url},startTimestamp:1e3*timestampInSeconds(),virtualError:_,headers:getHeadersFromFetchArgs(k)};return triggerHandlers("fetch",_objectSpread2({},M)),e.apply(V,k).then(function(){var e=_asyncToGenerator(_regenerator().m(function _callee5(e){return _regenerator().w(function(_){for(;;)if(0===_.n)return triggerHandlers("fetch",_objectSpread2(_objectSpread2({},M),{},{endTimestamp:1e3*timestampInSeconds(),response:e})),_.a(2,e)},_callee5)}));return function(_){return e.apply(this,arguments)}}(),function(e){if(triggerHandlers("fetch",_objectSpread2(_objectSpread2({},M),{},{endTimestamp:1e3*timestampInSeconds(),error:e})),isError(e)&&void 0===e.stack&&(e.stack=_.stack,addNonEnumerableProperty(e,"framesToPop",1)),e instanceof TypeError&&("Failed to fetch"===e.message||"Load failed"===e.message||"NetworkError when attempting to fetch resource."===e.message))try{var S=new URL(M.fetchData.url);e.message="".concat(e.message," (").concat(S.host,")")}catch(k){}throw e})}})}(void 0,_)})}function hasProp(e,_){return!!e&&"object"===_typeof3(e)&&!!e[_]}function getUrlFromResource(e){return"string"==typeof e?e:e?hasProp(e,"url")?e.url:e.toString?e.toString():"":""}function getHeadersFromFetchArgs(e){var _,S=_slicedToArray(e,2),k=S[0],E=S[1];try{if("object"===_typeof3(E)&&null!==E&&"headers"in E&&E.headers)return new Headers(E.headers);if(_=k,"undefined"!=typeof Request&&isInstanceOf(_,Request))return new Headers(k.headers)}catch(T){}}var Be=V,Ne=0;function shouldIgnoreOnError(){return Ne>0}function wrap$1(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!function(e){return"function"==typeof e}(e))return e;try{var S=e.__sentry_wrapped__;if(S)return"function"==typeof S?S:e;if(getOriginalFunction(e))return e}catch(E){return e}var sentryWrapped=function(){for(var S=arguments.length,k=new Array(S),E=0;E<S;E++)k[E]=arguments[E];try{var T=k.map(function(e){return wrap$1(e,_)});return e.apply(this,T)}catch(M){throw Ne++,setTimeout(function(){Ne--}),withScope(function(e){e.addEventProcessor(function(e){return _.mechanism&&(addExceptionTypeValue(e,void 0),addExceptionMechanism(e,_.mechanism)),e.extra=_objectSpread2(_objectSpread2({},e.extra),{},{arguments:k}),e}),captureException(M)}),M}};try{for(var k in e)Object.prototype.hasOwnProperty.call(e,k)&&(sentryWrapped[k]=e[k])}catch(T){}markFunctionWrapped(sentryWrapped,e),addNonEnumerableProperty(e,"__sentry_wrapped__",sentryWrapped);try{Object.getOwnPropertyDescriptor(sentryWrapped,"name").configurable&&Object.defineProperty(sentryWrapped,"name",{get:function(){return e.name}})}catch(M){}return sentryWrapped}function exceptionFromError(e,_){var S=parseStackFrames(e,_),k={type:extractType(_),value:extractMessage(_)};return S.length&&(k.stacktrace={frames:S}),void 0===k.type&&""===k.value&&(k.value="Unrecoverable error caught"),k}function eventFromPlainObject(e,_,S,k){var E=getClient(),T=null==E?void 0:E.getOptions().normalizeDepth,M=function(e){for(var _ in e)if(Object.prototype.hasOwnProperty.call(e,_)){var S=e[_];if(S instanceof Error)return S}return}(_),I={__serialized__:normalizeToSize(_,T)};if(M)return{exception:{values:[exceptionFromError(e,M)]},extra:I};var R={exception:{values:[{type:isEvent(_)?_.constructor.name:k?"UnhandledRejection":"Error",value:getNonErrorObjectExceptionValue(_,{isUnhandledRejection:k})}]},extra:I};if(S){var O=parseStackFrames(e,S);O.length&&(R.exception.values[0].stacktrace={frames:O})}return R}function eventFromError(e,_){return{exception:{values:[exceptionFromError(e,_)]}}}function parseStackFrames(e,_){var S=_.stacktrace||_.stack||"",k=function(e){if(e&&ze.test(e.message))return 1;return 0}(_),E=function(e){if("number"==typeof e.framesToPop)return e.framesToPop;return 0}(_);try{return e(S,k,E)}catch(T){}return[]}var ze=/Minified React error #\d+;/i;function isWebAssemblyException(e){return"undefined"!=typeof WebAssembly&&void 0!==WebAssembly.Exception&&e instanceof WebAssembly.Exception}function extractType(e){var _=null==e?void 0:e.name;return!_&&isWebAssemblyException(e)?e.message&&Array.isArray(e.message)&&2==e.message.length?e.message[0]:"WebAssembly.Exception":_}function extractMessage(e){var _=null==e?void 0:e.message;return isWebAssemblyException(e)?Array.isArray(e.message)&&2==e.message.length?e.message[1]:"wasm exception":_?_.error&&"string"==typeof _.error.message?_.error.message:_:"No error message"}function eventFromUnknownInput(e,_,S,k,E){var T;if(isErrorEvent$1(_)&&_.error)return eventFromError(e,_.error);if(isDOMError(_)||isBuiltin(_,"DOMException")){var M=_;if("stack"in _)T=eventFromError(e,_);else{var I=M.name||(isDOMError(M)?"DOMError":"DOMException"),R=M.message?"".concat(I,": ").concat(M.message):I;addExceptionTypeValue(T=eventFromString(e,R,S,k),R)}return"code"in M&&(T.tags=_objectSpread2(_objectSpread2({},T.tags),{},{"DOMException.code":"".concat(M.code)})),T}return isError(_)?eventFromError(e,_):isPlainObject$3(_)||isEvent(_)?(addExceptionMechanism(T=eventFromPlainObject(e,_,S,E),{synthetic:!0}),T):(addExceptionTypeValue(T=eventFromString(e,_,S,k),"".concat(_)),addExceptionMechanism(T,{synthetic:!0}),T)}function eventFromString(e,_,S,k){var E={};if(k&&S){var T=parseStackFrames(e,S);T.length&&(E.exception={values:[{value:_,stacktrace:{frames:T}}]}),addExceptionMechanism(E,{synthetic:!0})}if(isParameterizedString(_)){var M=_.__sentry_template_string__,I=_.__sentry_template_values__;return E.logentry={message:M,params:I},E}return E.message=_,E}function getNonErrorObjectExceptionValue(e,_){var S=_.isUnhandledRejection,k=function(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:40,S=Object.keys(convertToPlainObject(e));S.sort();var k=S[0];if(!k)return"[object has no keys]";if(k.length>=_)return truncate(k,_);for(var E=S.length;E>0;E--){var T=S.slice(0,E).join(", ");if(!(T.length>_))return E===S.length?T:truncate(T,_)}return""}(e),E=S?"promise rejection":"exception";if(isErrorEvent$1(e))return"Event `ErrorEvent` captured as ".concat(E," with message `").concat(e.message,"`");if(isEvent(e)){var T=function(e){try{var _=Object.getPrototypeOf(e);return _?_.constructor.name:void 0}catch(S){}}(e);return"Event `".concat(T,"` (type=").concat(e.type,") captured as ").concat(E)}return"Object captured as ".concat(E," with keys: ").concat(k)}var Ge=function(e){function BrowserClient(e){var _,S;_classCallCheck3(this,BrowserClient);var k,E,T=(k=e,_objectSpread2({release:"string"==typeof __SENTRY_RELEASE__?__SENTRY_RELEASE__:null===(E=Be.SENTRY_RELEASE)||void 0===E?void 0:E.id,sendClientReports:!0,parentSpanIsAlwaysRootSpan:!0},k));applySdkMetadata(T,"browser",["browser"],Be.SENTRY_SDK_SOURCE||"npm"),null!==(_=T._metadata)&&void 0!==_&&_.sdk&&(T._metadata.sdk.settings=_objectSpread2({infer_ip:T.sendDefaultPii?"auto":"never"},T._metadata.sdk.settings));var M=(S=_callSuper(this,BrowserClient,[T]))._options,I=M.sendDefaultPii,R=M.sendClientReports,O=M.enableLogs,D=M._experiments;return Be.document&&(R||O||null!=D&&D.enableMetrics)&&Be.document.addEventListener("visibilitychange",function(){"hidden"===Be.document.visibilityState&&(R&&S._flushOutcomes(),O&&_INTERNAL_flushLogsBuffer(S),null!=D&&D.enableMetrics&&_INTERNAL_flushMetricsBuffer(S))}),I&&S.on("beforeSendSession",addAutoIpAddressToSession),S}return _inherits(BrowserClient,e),_createClass3(BrowserClient,[{key:"eventFromException",value:function(e,_){return function(e,_,S,k){var E=eventFromUnknownInput(e,_,(null==S?void 0:S.syntheticException)||void 0,k);return addExceptionMechanism(E),E.level="error",null!=S&&S.event_id&&(E.event_id=S.event_id),resolvedSyncPromise(E)}(this._options.stackParser,e,_,this._options.attachStacktrace)}},{key:"eventFromMessage",value:function(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",S=arguments.length>2?arguments[2]:void 0;return function(e,_){var S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"info",k=arguments.length>3?arguments[3]:void 0,E=arguments.length>4?arguments[4]:void 0,T=eventFromString(e,_,(null==k?void 0:k.syntheticException)||void 0,E);return T.level=S,null!=k&&k.event_id&&(T.event_id=k.event_id),resolvedSyncPromise(T)}(this._options.stackParser,e,_,S,this._options.attachStacktrace)}},{key:"_prepareEvent",value:function(e,_,S,k){return e.platform=e.platform||"javascript",_superPropGet(BrowserClient,"_prepareEvent",this,3)([e,_,S,k])}}])}(Ie);var je,Ve,He,We,qe="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,Xe=V;function instrumentDOM(){if(Xe.document){var e=triggerHandlers.bind(null,"dom"),_=makeDOMEventHandler(e,!0);Xe.document.addEventListener("click",_,!1),Xe.document.addEventListener("keypress",_,!1),["EventTarget","Node"].forEach(function(_){var S,k,E=null===(S=Xe[_])||void 0===S?void 0:S.prototype;null!=E&&null!==(k=E.hasOwnProperty)&&void 0!==k&&k.call(E,"addEventListener")&&(fill$1(E,"addEventListener",function(_){return function(S,k,E){if("click"===S||"keypress"==S)try{var T=this.__sentry_instrumentation_handlers__=this.__sentry_instrumentation_handlers__||{},M=T[S]=T[S]||{refCount:0};if(!M.handler){var I=makeDOMEventHandler(e);M.handler=I,_.call(this,S,I,E)}M.refCount++}catch(R){}return _.call(this,S,k,E)}}),fill$1(E,"removeEventListener",function(e){return function(_,S,k){if("click"===_||"keypress"==_)try{var E=this.__sentry_instrumentation_handlers__||{},T=E[_];T&&(T.refCount--,T.refCount<=0&&(e.call(this,_,T.handler,k),T.handler=void 0,delete E[_]),0===Object.keys(E).length&&delete this.__sentry_instrumentation_handlers__)}catch(M){}return e.call(this,_,S,k)}}))})}}function makeDOMEventHandler(e){var _=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(S){if(S&&!S._sentryCaptured){var k=function(e){try{return e.target}catch(_){return null}}(S);if(!function(e,_){return"keypress"===e&&(null==_||!_.tagName||"INPUT"!==_.tagName&&"TEXTAREA"!==_.tagName&&!_.isContentEditable)}(S.type,k)){addNonEnumerableProperty(S,"_sentryCaptured",!0),k&&!k._sentryId&&addNonEnumerableProperty(k,"_sentryId",uuid4());var E="keypress"===S.type?"input":S.type;if(!function(e){if(e.type!==Ve)return!1;try{if(!e.target||e.target._sentryId!==He)return!1}catch(_){}return!0}(S))e({event:S,name:E,global:_}),Ve=S.type,He=k?k._sentryId:void 0;clearTimeout(je),je=Xe.setTimeout(function(){He=void 0,Ve=void 0},1e3)}}}}function addHistoryInstrumentationHandler(e){var _="history";addHandler(_,e),maybeInstrument(_,instrumentHistory)}function instrumentHistory(){function historyReplacementFunction(e){return function(){for(var _=arguments.length,S=new Array(_),k=0;k<_;k++)S[k]=arguments[k];var E=S.length>2?S[2]:void 0;if(E){var T=We,M=function(e){try{return new URL(e,Xe.location.origin).toString()}catch(_){return e}}(String(E));if(We=M,T===M)return e.apply(this,S);triggerHandlers("history",{from:T,to:M})}return e.apply(this,S)}}Xe.addEventListener("popstate",function(){var e=Xe.location.href,_=We;(We=e,_!==e)&&triggerHandlers("history",{from:_,to:e})}),"history"in Ue&&Ue.history&&(fill$1(Xe.history,"pushState",historyReplacementFunction),fill$1(Xe.history,"replaceState",historyReplacementFunction))}var Ye={};function clearCachedImplementation(e){Ye[e]=void 0}var Ke="__sentry_xhr_v3__";function instrumentXHR(){if(Xe.XMLHttpRequest){var e=XMLHttpRequest.prototype;e.open=new Proxy(e.open,{apply:function(e,_,S){var k=new Error,E=1e3*timestampInSeconds(),T=isString$1(S[0])?S[0].toUpperCase():void 0,M=function(e){if(isString$1(e))return e;try{return e.toString()}catch(_){}return}(S[1]);if(!T||!M)return e.apply(_,S);_[Ke]={method:T,url:M,request_headers:{}},"POST"===T&&M.match(/sentry_key/)&&(_.__sentry_own_request__=!0);var onreadystatechangeHandler=function(){var e=_[Ke];if(e&&4===_.readyState){try{e.status_code=_.status}catch(S){}triggerHandlers("xhr",{endTimestamp:1e3*timestampInSeconds(),startTimestamp:E,xhr:_,virtualError:k})}};return"onreadystatechange"in _&&"function"==typeof _.onreadystatechange?_.onreadystatechange=new Proxy(_.onreadystatechange,{apply:function(e,_,S){return onreadystatechangeHandler(),e.apply(_,S)}}):_.addEventListener("readystatechange",onreadystatechangeHandler),_.setRequestHeader=new Proxy(_.setRequestHeader,{apply:function(e,_,S){var k=_slicedToArray(S,2),E=k[0],T=k[1],M=_[Ke];return M&&isString$1(E)&&isString$1(T)&&(M.request_headers[E.toLowerCase()]=T),e.apply(_,S)}}),e.apply(_,S)}}),e.send=new Proxy(e.send,{apply:function(e,_,S){var k=_[Ke];return k?(void 0!==S[0]&&(k.body=S[0]),triggerHandlers("xhr",{startTimestamp:1e3*timestampInSeconds(),xhr:_}),e.apply(_,S)):e.apply(_,S)}})}}function makeFetchTransport(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){var _=Ye[e];if(_)return _;var S=Xe[e];if(isNativeFunction(S))return Ye[e]=S.bind(Xe);var k=Xe.document;if(k&&"function"==typeof k.createElement)try{var E=k.createElement("iframe");E.hidden=!0,k.head.appendChild(E);var T=E.contentWindow;null!=T&&T[e]&&(S=T[e]),k.head.removeChild(E)}catch(fo){qe&&X.warn("Could not create sandbox iframe for ".concat(e," check, bailing to window.").concat(e,": "),fo)}return S?Ye[e]=S.bind(Xe):S}("fetch"),S=0,k=0;function _makeRequest(){return(_makeRequest=_asyncToGenerator(_regenerator().m(function _callee6(E){var T,M,I,R;return _regenerator().w(function(O){for(;;)switch(O.p=O.n){case 0:return T=E.body.length,S+=T,k++,M=_objectSpread2({body:E.body,method:"POST",referrerPolicy:"strict-origin",headers:e.headers,keepalive:S<=6e4&&k<15},e.fetchOptions),O.p=1,O.n=2,_(e.url,M);case 2:return I=O.v,O.a(2,{statusCode:I.status,headers:{"x-sentry-rate-limits":I.headers.get("X-Sentry-Rate-Limits"),"retry-after":I.headers.get("Retry-After")}});case 3:throw O.p=3,R=O.v,clearCachedImplementation("fetch"),R;case 4:return O.p=4,S-=T,k--,O.f(4);case 5:return O.a(2)}},_callee6,null,[[1,3,4,5]])}))).apply(this,arguments)}return createTransport(e,function(e){return _makeRequest.apply(this,arguments)})}function createFrame(e,_,S,k){var E={filename:e,function:"<anonymous>"===_?K:_,in_app:!0};return void 0!==S&&(E.lineno=S),void 0!==k&&(E.colno=k),E}var Je=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,Qe=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,Ze=/\((\S*)(?::(\d+))(?::(\d+))\)/,$e=/at (.+?) ?\(data:(.+?),/,et=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,tt=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,rt=[[30,function(e){var _=e.match($e);if(_)return{filename:"<data:".concat(_[2],">"),function:_[1]};var S=Je.exec(e);if(S){var k=_slicedToArray(S,4),E=k[1],T=k[2],M=k[3];return createFrame(E,K,+T,+M)}var I=Qe.exec(e);if(I){if(I[2]&&0===I[2].indexOf("eval")){var R=Ze.exec(I[2]);R&&(I[2]=R[1],I[3]=R[2],I[4]=R[3])}var O=_slicedToArray(extractSafariExtensionDetails(I[1]||K,I[2]),2),D=O[0];return createFrame(O[1],D,I[3]?+I[3]:void 0,I[4]?+I[4]:void 0)}}],[50,function(e){var _=et.exec(e);if(_){if(_[3]&&_[3].indexOf(" > eval")>-1){var S=tt.exec(_[3]);S&&(_[1]=_[1]||"eval",_[3]=S[1],_[4]=S[2],_[5]="")}var k=_[3],E=_[1]||K,T=_slicedToArray(extractSafariExtensionDetails(E,k),2);return E=T[0],createFrame(k=T[1],E,_[4]?+_[4]:void 0,_[5]?+_[5]:void 0)}}]],nt=createStackParser.apply(void 0,rt),extractSafariExtensionDetails=function(e,_){var S=-1!==e.indexOf("safari-extension"),k=-1!==e.indexOf("safari-web-extension");return S||k?[-1!==e.indexOf("@")?e.split("@")[0]:K,S?"safari-extension:".concat(_):"safari-web-extension:".concat(_)]:[e,_]},it="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,at=1024,breadcrumbsIntegration=function(){var e=_objectSpread2({console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0},arguments.length>0&&void 0!==arguments[0]?arguments[0]:{});return{name:"Breadcrumbs",setup:function(_){var S,k;e.console&&(S=function(e){return function(_){if(getClient()===e){var S={category:"console",data:{arguments:_.args,logger:"console"},level:severityLevelFromString(_.level),message:safeJoin(_.args," ")};if("assert"===_.level){if(!1!==_.args[0])return;S.message="Assertion failed: ".concat(safeJoin(_.args.slice(1)," ")||"console.assert"),S.data.arguments=_.args.slice(1)}addBreadcrumb(S,{input:_.args,level:_.level})}}}(_),addHandler(k="console",S),maybeInstrument(k,instrumentConsole)),e.dom&&function(e){addHandler("dom",e),maybeInstrument("dom",instrumentDOM)}(function(e,_){return function(S){if(getClient()===e){var k,E,T="object"===_typeof3(_)?_.serializeAttribute:void 0,M="object"===_typeof3(_)&&"number"==typeof _.maxStringLength?_.maxStringLength:void 0;M&&M>at&&(it&&X.warn("`dom.maxStringLength` cannot exceed ".concat(at,", but a value of ").concat(M," was configured. Sentry will use ").concat(at," instead.")),M=at),"string"==typeof T&&(T=[T]);try{var I=S.event,R=function(e){return!!e&&!!e.target}(I)?I.target:I;k=htmlTreeAsString(R,{keyAttrs:T,maxStringLength:M}),E=function(e){if(!ae.HTMLElement)return null;for(var _=e,S=0;S<5;S++){if(!_)return null;if(_ instanceof HTMLElement){if(_.dataset.sentryComponent)return _.dataset.sentryComponent;if(_.dataset.sentryElement)return _.dataset.sentryElement}_=_.parentNode}return null}(R)}catch(D){k="<unknown>"}if(0!==k.length){var O={category:"ui.".concat(S.name),message:k};E&&(O.data={"ui.component_name":E}),addBreadcrumb(O,{event:S.event,name:S.name,global:S.global})}}}}(_,e.dom)),e.xhr&&function(e){addHandler("xhr",e),maybeInstrument("xhr",instrumentXHR)}(function(e){return function(_){if(getClient()===e){var S=_.startTimestamp,k=_.endTimestamp,E=_.xhr[Ke];if(S&&k&&E){var T=E.method,M=E.url,I=E.status_code,R=E.body,O={method:T,url:M,status_code:I},D={xhr:_.xhr,input:R,startTimestamp:S,endTimestamp:k},L={category:"xhr",data:O,type:"http",level:getBreadcrumbLogLevelFromHttpStatusCode(I)};e.emit("beforeOutgoingRequestBreadcrumb",L,D),addBreadcrumb(L,D)}}}}(_)),e.fetch&&addFetchInstrumentationHandler(function(e){return function(_){if(getClient()===e){var S=_.startTimestamp,k=_.endTimestamp;if(k&&(!_.fetchData.url.match(/sentry_key/)||"POST"!==_.fetchData.method))if(_.fetchData.method,_.fetchData.url,_.error){var E=_.fetchData,T={data:_.error,input:_.args,startTimestamp:S,endTimestamp:k},M={category:"fetch",data:E,level:"error",type:"http"};e.emit("beforeOutgoingRequestBreadcrumb",M,T),addBreadcrumb(M,T)}else{var I=_.response,R=_objectSpread2(_objectSpread2({},_.fetchData),{},{status_code:null==I?void 0:I.status});_.fetchData.request_body_size,_.fetchData.response_body_size,null==I||I.status;var O={input:_.args,response:I,startTimestamp:S,endTimestamp:k},D={category:"fetch",data:R,type:"http",level:getBreadcrumbLogLevelFromHttpStatusCode(R.status_code)};e.emit("beforeOutgoingRequestBreadcrumb",D,O),addBreadcrumb(D,O)}}}}(_)),e.history&&addHistoryInstrumentationHandler(function(e){return function(_){var S;if(getClient()===e){var k=_.from,E=_.to,T=parseUrl(Be.location.href),M=k?parseUrl(k):void 0,I=parseUrl(E);null!==(S=M)&&void 0!==S&&S.path||(M=T),T.protocol===I.protocol&&T.host===I.host&&(E=I.relative),T.protocol===M.protocol&&T.host===M.host&&(k=M.relative),addBreadcrumb({category:"navigation",data:{from:k,to:E}})}}}(_)),e.sentry&&_.on("beforeSendEvent",function(e){return function(_){getClient()===e&&addBreadcrumb({category:"sentry.".concat("transaction"===_.type?"transaction":"event"),event_id:_.event_id,level:_.level,message:getEventDescription(_)},{event:_})}}(_))}}};var ot=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],browserApiErrorsIntegration=function(){var e=_objectSpread2({XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,unregisterOriginalCallbacks:!1},arguments.length>0&&void 0!==arguments[0]?arguments[0]:{});return{name:"BrowserApiErrors",setupOnce:function(){e.setTimeout&&fill$1(Be,"setTimeout",_wrapTimeFunction),e.setInterval&&fill$1(Be,"setInterval",_wrapTimeFunction),e.requestAnimationFrame&&fill$1(Be,"requestAnimationFrame",_wrapRAF),e.XMLHttpRequest&&"XMLHttpRequest"in Be&&fill$1(XMLHttpRequest.prototype,"send",_wrapXHR);var _=e.eventTarget;_&&(Array.isArray(_)?_:ot).forEach(function(_){return function(e,_){var S,k,E=Be,T=null===(S=E[e])||void 0===S?void 0:S.prototype;if(null==T||null===(k=T.hasOwnProperty)||void 0===k||!k.call(T,"addEventListener"))return;fill$1(T,"addEventListener",function(S){return function(k,E,T){try{"function"==typeof E.handleEvent&&(E.handleEvent=wrap$1(E.handleEvent,{mechanism:{data:{handler:getFunctionName(E),target:e},handled:!1,type:"auto.browser.browserapierrors.handleEvent"}}))}catch(M){}return _.unregisterOriginalCallbacks&&function(e,_,S){e&&"object"===_typeof3(e)&&"removeEventListener"in e&&"function"==typeof e.removeEventListener&&e.removeEventListener(_,S)}(this,k,E),S.apply(this,[k,wrap$1(E,{mechanism:{data:{handler:getFunctionName(E),target:e},handled:!1,type:"auto.browser.browserapierrors.addEventListener"}}),T])}}),fill$1(T,"removeEventListener",function(e){return function(_,S,k){try{var E=S.__sentry_wrapped__;E&&e.call(this,_,E,k)}catch(T){}return e.call(this,_,S,k)}})}(_,e)})}}};function _wrapTimeFunction(e){return function(){for(var _=arguments.length,S=new Array(_),k=0;k<_;k++)S[k]=arguments[k];var E=S[0];return S[0]=wrap$1(E,{mechanism:{handled:!1,type:"auto.browser.browserapierrors.".concat(getFunctionName(e))}}),e.apply(this,S)}}function _wrapRAF(e){return function(_){return e.apply(this,[wrap$1(_,{mechanism:{data:{handler:getFunctionName(e)},handled:!1,type:"auto.browser.browserapierrors.requestAnimationFrame"}})])}}function _wrapXHR(e){return function(){var _=this;["onload","onerror","onprogress","onreadystatechange"].forEach(function(e){e in _&&"function"==typeof _[e]&&fill$1(_,e,function(_){var S={mechanism:{data:{handler:getFunctionName(_)},handled:!1,type:"auto.browser.browserapierrors.xhr.".concat(e)}},k=getOriginalFunction(_);return k&&(S.mechanism.data.handler=getFunctionName(k)),wrap$1(_,S)})});for(var S=arguments.length,k=new Array(S),E=0;E<S;E++)k[E]=arguments[E];return e.apply(this,k)}}var browserSessionIntegration=function(){return{name:"BrowserSession",setupOnce:function(){void 0!==Be.document?(startSession({ignoreDuration:!0}),captureSession(),addHistoryInstrumentationHandler(function(e){var _=e.from,S=e.to;void 0!==_&&_!==S&&(startSession({ignoreDuration:!0}),captureSession())})):it&&X.warn("Using the `browserSessionIntegration` in non-browser environments is not supported.")}}},globalHandlersIntegration=function(){var e=_objectSpread2({onerror:!0,onunhandledrejection:!0},arguments.length>0&&void 0!==arguments[0]?arguments[0]:{});return{name:"GlobalHandlers",setupOnce:function(){Error.stackTraceLimit=50},setup:function(_){e.onerror&&(!function(e){_=function(_){var S=getOptions(),k=S.stackParser,E=S.attachStacktrace;if(getClient()===e&&!shouldIgnoreOnError()){var T=_.msg,M=_.url,I=_.line,R=_.column,O=_.error,D=function(e,_,S,k){var E,T=e.exception=e.exception||{},M=T.values=T.values||[],I=M[0]=M[0]||{},R=I.stacktrace=I.stacktrace||{},O=R.frames=R.frames||[],D=k,L=S,U=null!==(E=function(e){if(isString$1(e)&&0!==e.length){if(e.startsWith("data:")){var _=e.match(/^data:([^;]+)/),S=_?_[1]:"text/javascript",k=e.includes("base64,");return"<data:".concat(S).concat(k?",base64":"",">")}return e.slice(0,1024)}}(_))&&void 0!==E?E:getLocationHref();return 0===O.length&&O.push({colno:D,filename:U,function:K,in_app:!0,lineno:L}),e}(eventFromUnknownInput(k,O||T,void 0,E,!1),M,I,R);D.level="error",captureEvent(D,{originalException:O,mechanism:{handled:!1,type:"auto.browser.global_handlers.onerror"}})}},S="error",addHandler(S,_),maybeInstrument(S,instrumentError);var _,S}(_),globalHandlerLog("onerror")),e.onunhandledrejection&&(!function(e){_=function(_){var S=getOptions(),k=S.stackParser,E=S.attachStacktrace;if(getClient()===e&&!shouldIgnoreOnError()){var T=function(e){if(isPrimitive(e))return e;try{if("reason"in e)return e.reason;if("detail"in e&&"reason"in e.detail)return e.detail.reason}catch(_){}return e}(_),M=isPrimitive(T)?{exception:{values:[{type:"UnhandledRejection",value:"Non-Error promise rejection captured with value: ".concat(String(T))}]}}:eventFromUnknownInput(k,T,void 0,E,!0);M.level="error",captureEvent(M,{originalException:T,mechanism:{handled:!1,type:"auto.browser.global_handlers.onunhandledrejection"}})}},S="unhandledrejection",addHandler(S,_),maybeInstrument(S,instrumentUnhandledRejection);var _,S}(_),globalHandlerLog("onunhandledrejection"))}}};function globalHandlerLog(e){it&&X.log("Global Handler attached: ".concat(e))}function getOptions(){var e=getClient();return(null==e?void 0:e.getOptions())||{stackParser:function(){return[]},attachStacktrace:!1}}var httpContextIntegration=function(){return{name:"HttpContext",preprocessEvent:function(e){var _;if(Be.navigator||Be.location||Be.document){var S,k,E,T=(S=getLocationHref(),k=(Be.document||{}).referrer,E=(Be.navigator||{}).userAgent,{url:S,headers:_objectSpread2(_objectSpread2({},k&&{Referer:k}),E&&{"User-Agent":E})}),M=_objectSpread2(_objectSpread2({},T.headers),null===(_=e.request)||void 0===_?void 0:_.headers);e.request=_objectSpread2(_objectSpread2(_objectSpread2({},T),e.request),{},{headers:M})}}}},linkedErrorsIntegration=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_=e.limit||5,S=e.key||"cause";return{name:"LinkedErrors",preprocessEvent:function(e,k,E){applyAggregateErrorsToEvent(exceptionFromError,E.getOptions().stackParser,S,_,e,k)}}};var st,ut={exports:{}};var lt=(st||(st=1,function(e){!function(_,S){e.exports=S()}(0,function(){return function(){var e={"./packages/@logrocket/console/src/index.js":
/*!**************************************************!*\
					  !*** ./packages/@logrocket/console/src/index.js ***!
					  \**************************************************/function(e,_,S){var k=S(/*! @babel/runtime/helpers/interopRequireDefault */"./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(_,"__esModule",{value:!0}),_.default=void 0;var E=k(S(/*! ./registerConsole */"./packages/@logrocket/console/src/registerConsole.js")).default;_.default=E},"./packages/@logrocket/console/src/registerConsole.js":
/*!************************************************************!*\
					  !*** ./packages/@logrocket/console/src/registerConsole.js ***!
					  \************************************************************/function(e,_,S){var k=S(/*! @babel/runtime/helpers/interopRequireDefault */"./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(_,"__esModule",{value:!0}),_.default=function(e){var _=[];return["log","warn","info","error","debug"].forEach(function(S){_.push((0,T.default)(console,S,function(){for(var _=arguments.length,k=new Array(_),T=0;T<_;T++)k[T]=arguments[T];e.addEvent("lr.core.LogEvent",function(){var _=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},T=_.isEnabled;if("object"===(0,E.default)(T)&&!1===T[S]||!1===T)return null;if("error"===S&&_.shouldAggregateConsoleErrors)if(k&&k.length>=2&&"ERROR"===k[0]){var I="";try{I=" ".concat(k[1])}catch(R){}M.Capture.captureMessage(e,"".concat(k[0]).concat(I),k,{},!0)}else M.Capture.captureMessage(e,k[0],k,{},!0);return{logLevel:S.toUpperCase(),args:k}})}))}),function(){_.forEach(function(e){return e()})}};var E=k(S(/*! @babel/runtime/helpers/typeof */"./node_modules/@babel/runtime/helpers/typeof.js")),T=k(S(/*! @logrocket/utils/src/enhanceFunc */"./packages/@logrocket/utils/src/enhanceFunc.ts")),M=S(/*! @logrocket/exceptions */"./packages/@logrocket/exceptions/src/index.js")},"./packages/@logrocket/exceptions/src/Capture.js":
/*!*******************************************************!*\
					  !*** ./packages/@logrocket/exceptions/src/Capture.js ***!
					  \*******************************************************/function(e,_,S){var k=S(/*! @babel/runtime/helpers/interopRequireDefault */"./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(_,"__esModule",{value:!0}),_.captureMessage=function(e,_,S){var k=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},T=arguments.length>4&&void 0!==arguments[4]&&arguments[4],M={exceptionType:T?"CONSOLE":"MESSAGE",message:_,messageArgs:S,browserHref:window.location?window.location.href:""};(0,E.scrubException)(M,k),e.addEvent("lr.core.Exception",function(){return M})},_.captureException=function(e,_){var S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},k=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,I=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"WINDOW",R=k||T.default.computeStackTrace(_),O={exceptionType:I,errorType:R.name,message:R.message,browserHref:window.location?window.location.href:""};(0,E.scrubException)(O,S);var D={_stackTrace:(0,M.default)(R)};e.addEvent("lr.core.Exception",function(){return O},D)};var E=S(/*! @logrocket/utils/src/scrubException */"./packages/@logrocket/utils/src/scrubException.ts"),T=k(S(/*! @logrocket/utils/src/TraceKit */"./packages/@logrocket/utils/src/TraceKit.js")),M=k(S(/*! ./stackTraceFromError */"./packages/@logrocket/exceptions/src/stackTraceFromError.js"))},"./packages/@logrocket/exceptions/src/index.js":
/*!*****************************************************!*\
					  !*** ./packages/@logrocket/exceptions/src/index.js ***!
					  \*****************************************************/function(e,_,S){var k=S(/*! @babel/runtime/helpers/interopRequireDefault */"./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),E=S(/*! @babel/runtime/helpers/typeof */"./node_modules/@babel/runtime/helpers/typeof.js");Object.defineProperty(_,"__esModule",{value:!0}),Object.defineProperty(_,"registerExceptions",{enumerable:!0,get:function(){return T.default}}),_.Capture=void 0;var T=k(S(/*! ./registerExceptions */"./packages/@logrocket/exceptions/src/registerExceptions.js")),M=function(e,_){if(e&&e.__esModule)return e;if(null===e||"object"!==E(e)&&"function"!=typeof e)return{default:e};var S=_getRequireWildcardCache(_);if(S&&S.has(e))return S.get(e);var k={},T=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var M in e)if("default"!==M&&Object.prototype.hasOwnProperty.call(e,M)){var I=T?Object.getOwnPropertyDescriptor(e,M):null;I&&(I.get||I.set)?Object.defineProperty(k,M,I):k[M]=e[M]}return k.default=e,S&&S.set(e,k),k}(S(/*! ./Capture */"./packages/@logrocket/exceptions/src/Capture.js"));function _getRequireWildcardCache(e){if("function"!=typeof WeakMap)return null;var _=new WeakMap,S=new WeakMap;return(_getRequireWildcardCache=function(e){return e?S:_})(e)}_.Capture=M},"./packages/@logrocket/exceptions/src/raven/raven.js":
/*!***********************************************************!*\
					  !*** ./packages/@logrocket/exceptions/src/raven/raven.js ***!
					  \***********************************************************/function(e,_,S){var k=S(/*! @babel/runtime/helpers/interopRequireDefault */"./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(_,"__esModule",{value:!0}),_.default=void 0;var E=k(S(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js")),T=k(S(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js")),M=k(S(/*! @logrocket/utils/src/TraceKit */"./packages/@logrocket/utils/src/TraceKit.js")),I=Object.prototype;function isFunction(e){return"function"==typeof e}function hasKey(e,_){return I.hasOwnProperty.call(e,_)}function fill(e,_,S,k){var E=e[_];e[_]=S(E),k&&k.push([e,_,E])}var R="undefined"!=typeof window?window:void 0!==S.g?S.g:"undefined"!=typeof self?self:{};R.document;var O=function(){function Handler(e){var _=e.captureException;(0,E.default)(this,Handler),this._errorHandler=this._errorHandler.bind(this),this._ignoreOnError=0,this._wrappedBuiltIns=[],this.captureException=_,M.default.report.subscribe(this._errorHandler),this._instrumentTryCatch()}return(0,T.default)(Handler,[{key:"uninstall",value:function(){var e;for(M.default.report.unsubscribe(this._errorHandler);this._wrappedBuiltIns.length;){var _=(e=this._wrappedBuiltIns.shift())[0],S=e[1],k=e[2];_[S]=k}}},{key:"_errorHandler",value:function(e){this._ignoreOnError||this.captureException(e)}},{key:"_ignoreNextOnError",value:function(){var e=this;this._ignoreOnError+=1,setTimeout(function(){e._ignoreOnError-=1})}},{key:"context",value:function(e,_,S){return isFunction(e)&&(S=_||[],_=e,e=void 0),this.wrap(e,_).apply(this,S)}},{key:"wrap",value:function(e,_,S){var k=this;if(void 0===_&&!isFunction(e))return e;if(isFunction(e)&&(_=e,e=void 0),!isFunction(_))return _;try{if(_.__lr__)return _;if(_.__lr_wrapper__)return _.__lr_wrapper__;if(!Object.isExtensible(_))return _}catch(fo){return _}function wrapped(){var E=[],T=arguments.length,I=!e||e&&!1!==e.deep;for(S&&isFunction(S)&&S.apply(this,arguments);T--;)E[T]=I?k.wrap(e,arguments[T]):arguments[T];try{return _.apply(this,E)}catch(fo){throw k._ignoreNextOnError(),k.captureException(M.default.computeStackTrace(fo),e),fo}}for(var E in _)hasKey(_,E)&&(wrapped[E]=_[E]);return wrapped.prototype=_.prototype,_.__lr_wrapper__=wrapped,wrapped.__lr__=!0,wrapped.__inner__=_,wrapped}},{key:"_instrumentTryCatch",value:function(){var e=this,_=e._wrappedBuiltIns;function wrapTimeFn(_){return function(S,k){for(var E=new Array(arguments.length),T=0;T<E.length;++T)E[T]=arguments[T];var M=E[0];return isFunction(M)&&(E[0]=e.wrap(M)),_.apply?_.apply(this,E):_(E[0],E[1])}}function wrapEventTarget(S){var k=R[S]&&R[S].prototype;k&&k.hasOwnProperty&&k.hasOwnProperty("addEventListener")&&(fill(k,"addEventListener",function(_){return function(S,k,E,T){try{k&&k.handleEvent&&(k.handleEvent=e.wrap(k.handleEvent))}catch(M){}return _.call(this,S,e.wrap(k,void 0,void 0),E,T)}},_),fill(k,"removeEventListener",function(e){return function(_,S,k,E){try{var T=null==S?void 0:S.__lr_wrapper__;T&&e.call(this,_,T,k,E)}catch(fo){}return e.call(this,_,S,k,E)}},void 0))}fill(R,"setTimeout",wrapTimeFn,_),fill(R,"setInterval",wrapTimeFn,_),R.requestAnimationFrame&&fill(R,"requestAnimationFrame",function(_){return function(S){return _(e.wrap(S))}},_);for(var S=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],k=0;k<S.length;k++)wrapEventTarget(S[k]);var E=R.jQuery||R.$;E&&E.fn&&E.fn.ready&&fill(E.fn,"ready",function(_){return function(S){return _.call(this,e.wrap(S))}},_)}}]),Handler}();_.default=O},"./packages/@logrocket/exceptions/src/registerExceptions.js":
/*!******************************************************************!*\
					  !*** ./packages/@logrocket/exceptions/src/registerExceptions.js ***!
					  \******************************************************************/function(e,_,S){var k=S(/*! @babel/runtime/helpers/interopRequireDefault */"./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),E=S(/*! @babel/runtime/helpers/typeof */"./node_modules/@babel/runtime/helpers/typeof.js");Object.defineProperty(_,"__esModule",{value:!0}),_.default=function(e){var _=new T.default({captureException:function(_){M.captureException(e,null,null,_)}}),rejectionHandler=function(_){_.reason instanceof Error?M.captureException(e,_.reason,null,null,"UNHANDLED_REJECTION"):e.addEvent("lr.core.Exception",function(){return{exceptionType:"UNHANDLED_REJECTION",message:_.reason||"Unhandled Promise rejection"}})};return window.addEventListener("unhandledrejection",rejectionHandler),function(){window.removeEventListener("unhandledrejection",rejectionHandler),_.uninstall()}};var T=k(S(/*! ./raven/raven */"./packages/@logrocket/exceptions/src/raven/raven.js")),M=function(e,_){if(e&&e.__esModule)return e;if(null===e||"object"!==E(e)&&"function"!=typeof e)return{default:e};var S=_getRequireWildcardCache(_);if(S&&S.has(e))return S.get(e);var k={},T=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var M in e)if("default"!==M&&Object.prototype.hasOwnProperty.call(e,M)){var I=T?Object.getOwnPropertyDescriptor(e,M):null;I&&(I.get||I.set)?Object.defineProperty(k,M,I):k[M]=e[M]}return k.default=e,S&&S.set(e,k),k}(S(/*! ./Capture */"./packages/@logrocket/exceptions/src/Capture.js"));function _getRequireWildcardCache(e){if("function"!=typeof WeakMap)return null;var _=new WeakMap,S=new WeakMap;return(_getRequireWildcardCache=function(e){return e?S:_})(e)}},"./packages/@logrocket/exceptions/src/stackTraceFromError.js":
/*!*******************************************************************!*\
					  !*** ./packages/@logrocket/exceptions/src/stackTraceFromError.js ***!
					  \*******************************************************************/function(e,_){Object.defineProperty(_,"__esModule",{value:!0}),_.default=function(e){function makeNotNull(e){return null===e?void 0:e}return e.stack?e.stack.map(function(e){return{lineNumber:makeNotNull(e.line),columnNumber:makeNotNull(e.column),fileName:makeNotNull(e.url),functionName:makeNotNull(e.func)}}):void 0}},"./packages/@logrocket/network/src/fetchIntercept.js":
/*!***********************************************************!*\
					  !*** ./packages/@logrocket/network/src/fetchIntercept.js ***!
					  \***********************************************************/function(e,_,S){var k=S(/*! @babel/runtime/helpers/interopRequireDefault */"./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(_,"__esModule",{value:!0}),_.default=void 0;var E=k(S(/*! @babel/runtime/helpers/toConsumableArray */"./node_modules/@babel/runtime/helpers/toConsumableArray.js")),T=S(/*! ./registerXHR */"./packages/@logrocket/network/src/registerXHR.js"),M=[];function makeInterceptor(e,_){for(var S=M.reduce(function(e,_){return[_].concat(e)},[]),k=arguments.length,I=new Array(k>2?k-2:0),R=2;R<k;R++)I[R-2]=arguments[R];var O=Promise.resolve(I);return S.forEach(function(e){var S=e.request,k=e.requestError;(S||k)&&(O=O.then(function(e){return S.apply(void 0,[_].concat((0,E.default)(e)))},function(e){return k.apply(void 0,[_].concat((0,E.default)(e)))}))}),O=O.then(function(_){var S,k;(0,T.setActive)(!1);try{S=e.apply(void 0,(0,E.default)(_))}catch(M){k=M}if((0,T.setActive)(!0),k)throw k;return S}),S.forEach(function(e){var S=e.response,k=e.responseError;(S||k)&&(O=O.then(function(e){return S(_,e)},function(e){return k&&k(_,e)}))}),O}function attach(e){if(e.fetch&&e.Promise){var _=e.fetch.polyfill;e.fetch=function(e){var _=0;return function(){for(var S=arguments.length,k=new Array(S),E=0;E<S;E++)k[E]=arguments[E];return makeInterceptor.apply(void 0,[e,_++].concat(k))}}(e.fetch),_&&(e.fetch.polyfill=_)}}var I=!1,R={register:function(e){return I||(I=!0,attach(window)),M.push(e),function(){var _=M.indexOf(e);_>=0&&M.splice(_,1)}},clear:function(){M=[]}};_.default=R},"./packages/@logrocket/network/src/index.js":
/*!**************************************************!*\
					  !*** ./packages/@logrocket/network/src/index.js ***!
					  \**************************************************/function(e,_,S){var k=S(/*! @babel/runtime/helpers/interopRequireDefault */"./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(_,"__esModule",{value:!0}),_.default=function(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{isReactNative:!1,isDisabled:!1};if(!0===(null==_?void 0:_.isDisabled))return function(){};var S=_.isReactNative,k=_.shouldAugmentNPS,E=_.shouldParseXHRBlob,L={},truncate=function(e){var _=e;if("object"===(0,T.default)(e)&&null!=e){var S=Object.getPrototypeOf(e);S!==Object.prototype&&null!==S||(_=JSON.stringify(e))}if(_&&_.length&&_.length>4096e3&&"string"==typeof _){var k=_.substring(0,1e3);return"".concat(k," ... LogRocket truncating to first 1000 characters.\n      Keep data under 4MB to prevent truncation. https://docs.logrocket.com/reference/network")}return e},addRequest=function(_,S){var k=S.method;e.addEvent("lr.network.RequestEvent",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},E=e.isEnabled,T=void 0===E||E,M=e.requestSanitizer,I=void 0===M?function(e){return e}:M;if(!T)return null;var R=null;try{R=I(_objectSpread(_objectSpread({},S),{},{reqId:_}))}catch(B){}if(R){var O=R.url;if("undefined"!=typeof document&&"function"==typeof document.createElement){var U=document.createElement("a");U.href=R.url,O=U.href}return{reqId:_,url:O,headers:(0,D.default)(R.headers,function(e){return"".concat(e)}),body:truncate(R.body),method:k,referrer:R.referrer||void 0,mode:R.mode||void 0,credentials:R.credentials||void 0}}return L[_]=!0,null})},addResponse=function(_,S){var k=S.method,E=S.status,T=S.responseType;e.addEvent("lr.network.ResponseEvent",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},M=e.isEnabled,I=void 0===M||M,R=e.responseSanitizer,O=void 0===R?function(e){return e}:R;if(!I)return null;if(L[_])return delete L[_],null;var U=null;try{U=O(_objectSpread(_objectSpread({},S),{},{reqId:_}))}catch(B){}return U?{reqId:_,responseType:T,status:U.status,headers:(0,D.default)(U.headers,function(e){return"".concat(e)}),body:truncate(U.body),method:k}:{reqId:_,responseType:T,status:E,headers:{},body:null,method:k}})},isIgnored=function(_){return e.isDisabled||!0===L[_]},U=(0,M.default)({addRequest:addRequest,addResponse:addResponse,isIgnored:isIgnored}),B=(0,O.default)({addRequest:addRequest,addResponse:addResponse,isIgnored:isIgnored,logger:e,shouldAugmentNPS:k,shouldParseXHRBlob:E}),z=(0,I.registerIonic)({addRequest:addRequest,addResponse:addResponse,isIgnored:isIgnored}),G=S?function(){}:(0,R.default)(e);return function(){G(),U(),B(),z()}};var E=k(S(/*! @babel/runtime/helpers/defineProperty */"./node_modules/@babel/runtime/helpers/defineProperty.js")),T=k(S(/*! @babel/runtime/helpers/typeof */"./node_modules/@babel/runtime/helpers/typeof.js")),M=k(S(/*! ./registerFetch */"./packages/@logrocket/network/src/registerFetch.js")),I=S(/*! ./registerIonic */"./packages/@logrocket/network/src/registerIonic.ts"),R=k(S(/*! ./registerNetworkInformation */"./packages/@logrocket/network/src/registerNetworkInformation.js")),O=k(S(/*! ./registerXHR */"./packages/@logrocket/network/src/registerXHR.js")),D=k(S(/*! @logrocket/utils/src/mapValues */"./packages/@logrocket/utils/src/mapValues.ts"));function ownKeys(e,_){var S=Object.keys(e);if(Object.getOwnPropertySymbols){var k=Object.getOwnPropertySymbols(e);_&&(k=k.filter(function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable})),S.push.apply(S,k)}return S}function _objectSpread(e){for(var _=1;_<arguments.length;_++){var S=null!=arguments[_]?arguments[_]:{};_%2?ownKeys(Object(S),!0).forEach(function(_){(0,E.default)(e,_,S[_])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(S)):ownKeys(Object(S)).forEach(function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(S,_))})}return e}},"./packages/@logrocket/network/src/registerFetch.js":
/*!**********************************************************!*\
					  !*** ./packages/@logrocket/network/src/registerFetch.js ***!
					  \**********************************************************/function(e,_,S){var k=S(/*! @babel/runtime/helpers/interopRequireDefault */"./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(_,"__esModule",{value:!0}),_.default=function(e){var _=e.addRequest,S=e.addResponse,k=e.isIgnored,E="fetch-",T={},I=M.default.register({request:function(e){for(var S=arguments.length,k=new Array(S>1?S-1:0),M=1;M<S;M++)k[M-1]=arguments[M];var I;if("undefined"!=typeof Request&&k[0]instanceof Request){var R;try{R=k[0].clone().text()}catch(O){R=Promise.resolve("LogRocket fetch error: ".concat(O.message))}I=R.then(function(e){return _objectSpread(_objectSpread({},pluckFetchFields(k[0])),{},{body:e})},function(e){return _objectSpread(_objectSpread({},pluckFetchFields(k[0])),{},{body:"LogRocket fetch error: ".concat(e.message)})})}else I=Promise.resolve(_objectSpread(_objectSpread({},pluckFetchFields(k[1])),{},{url:"".concat(k[0]),body:(k[1]||{}).body}));return I.then(function(S){return T[e]=S.method,_("".concat(E).concat(e),S),k})},requestError:function(e,_){return Promise.reject(_)},response:function(e,_){var M,I;if(k("".concat(E).concat(e)))return _;if("text/event-stream"===_.headers.get("content-type"))I=Promise.resolve("LogRocket skipped consuming an event-stream body.");else{try{M=_.clone()}catch(U){var R={url:_.url,responseType:_.type.toUpperCase(),status:_.status,headers:stringifyHeaders(_.headers),body:"LogRocket fetch error: ".concat(U.message),method:T[e]};return delete T[e],S("".concat(E).concat(e),R),_}try{if(window.TextDecoder&&M.body){var O=M.body.getReader(),D=new window.TextDecoder("utf-8"),L="";I=O.read().then(function readResponseBody(e){var _=e.done,S=e.value;if(_)return L;var k=S?D.decode(S,{stream:!0}):"";return L+=k,O.read().then(readResponseBody)})}else I=M.text()}catch(B){I=Promise.resolve("LogRocket error reading body: ".concat(B.message))}}return I.catch(function(e){if(!("AbortError"===e.name&&e instanceof DOMException))return"LogRocket error reading body: ".concat(e.message)}).then(function(k){var M={url:_.url,responseType:_.type.toUpperCase(),status:_.status,headers:stringifyHeaders(_.headers),body:k,method:T[e]};delete T[e],S("".concat(E).concat(e),M)}),_},responseError:function(e,_){var k={url:void 0,status:0,headers:{},body:"".concat(_)};return S("".concat(E).concat(e),k),Promise.reject(_)}});return I};var E=k(S(/*! @babel/runtime/helpers/defineProperty */"./node_modules/@babel/runtime/helpers/defineProperty.js")),T=k(S(/*! @logrocket/utils/src/mapValues */"./packages/@logrocket/utils/src/mapValues.ts")),M=k(S(/*! ./fetchIntercept */"./packages/@logrocket/network/src/fetchIntercept.js"));function ownKeys(e,_){var S=Object.keys(e);if(Object.getOwnPropertySymbols){var k=Object.getOwnPropertySymbols(e);_&&(k=k.filter(function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable})),S.push.apply(S,k)}return S}function _objectSpread(e){for(var _=1;_<arguments.length;_++){var S=null!=arguments[_]?arguments[_]:{};_%2?ownKeys(Object(S),!0).forEach(function(_){(0,E.default)(e,_,S[_])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(S)):ownKeys(Object(S)).forEach(function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(S,_))})}return e}var stringifyHeaders=function(e){return(0,T.default)(function(e){if(null==e||"function"!=typeof e.forEach)return e;var _={};return e.forEach(function(e,S){_[S]?_[S]="".concat(_[S],",").concat(e):_[S]="".concat(e)}),_}(e),function(e){return"".concat(e)})};function pluckFetchFields(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{url:e.url,headers:stringifyHeaders(e.headers),method:e.method&&e.method.toUpperCase(),referrer:e.referrer||void 0,mode:e.mode||void 0,credentials:e.credentials||void 0}}},"./packages/@logrocket/network/src/registerIonic.ts":
/*!**********************************************************!*\
					  !*** ./packages/@logrocket/network/src/registerIonic.ts ***!
					  \**********************************************************/function(e,_,S){var k=S(/*! @babel/runtime/helpers/interopRequireDefault */"./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(_,"__esModule",{value:!0}),_.mergeHeaders=mergeHeaders,_.serializeQueryParams=function(e,_){return serializeObject("",e,_)},_.appendQueryParamsString=appendQueryParamsString,_.processData=processData,_.registerIonic=function(e){var _,S,k,E=e.addRequest,T=e.addResponse,M=e.isIgnored,B=null===(_=window.cordova)||void 0===_||null===(S=_.plugin)||void 0===S?void 0:S.http,z={},V=!1;if(void 0===B)return function(){};var W=null===(k=window.ionic)||void 0===k?void 0:k.platforms;if(void 0!==W&&"function"==typeof W.some&&W.some(function(e){return U.has(e)}))return function(){};var q=B.sendRequest,X=(0,I.default)(function(e,_,S){if(!M("".concat(L).concat(S)))try{var k={url:e.url||"",status:e.status<600&&e.status>=100?e.status:0,headers:e.headers||{},body:_?e.data:e.error,method:z[S].toUpperCase()};T("".concat(L).concat(S),k)}catch(I){var E={url:e.url||"",status:e.status<600&&e.status>=100?e.status:0,headers:e.headers||{},body:"LogRocket fetch error: ".concat(I.message),method:z[S].toUpperCase()};T("".concat(L).concat(S),E)}});return B.sendRequest=function(e,_,S,k){var T=++H;if(!V)try{var M=function(e,_){var S,k=(e=e||{}).data;try{S=checkForValidStringValue(O,e.serializer||_.getDataSerializer(),"serializer / data payload type")}catch(E){S=checkForValidStringValue(D,e.serializer||_.getDataSerializer(),"serializer / data payload type"),k={}}return{data:k,filePath:e.filePath,followRedirect:e.followRedirect,headers:checkKeyValuePairObject(e.headers||{},G,"Invalid header type, must be string"),method:checkForValidStringValue(R,e.method||R[0],"method"),name:e.name,params:checkKeyValuePairObject(e.params||{},j,"Invalid param, must be of type string or array"),responseType:e.responseType,serializer:S,connectTimeout:e.connectTimeout,readTimeout:e.readTimeout,timeout:e.timeout}}(_,B),I=appendQueryParamsString(e,serializeObject("",M.params,!0)),U=function(e,_,S){var k=S.getHeaders("*")||{},E=function(e,_){var S=new URL(e),k=S.host;return _.getHeaders(k)||null}(e,S)||{};return mergeHeaders(mergeHeaders(k,E),_)}(e,M.headers,B),W=M.method||"get";z[T]=W;var Y={url:I,method:W.toUpperCase(),headers:U||{},body:processData(M.data||{},M.serializer)};E("".concat(L).concat(T),Y)}catch(J){var K={url:e,method:(_.method||"get").toUpperCase(),headers:{},body:"LogRocket fetch error: ".concat(J.message)};E("".concat(L).concat(T),K)}return q(e,_,function(e){V||(X(e,!0,T),delete z[T]),S(e)},function(e){V||(X(e,!1,T),delete z[T]),k(e)})},function(){V=!0,B.sendRequest=q,z={}}};var E=k(S(/*! @babel/runtime/helpers/defineProperty */"./node_modules/@babel/runtime/helpers/defineProperty.js")),T=k(S(/*! @babel/runtime/helpers/typeof */"./node_modules/@babel/runtime/helpers/typeof.js")),M=k(S(/*! @babel/runtime/helpers/toConsumableArray */"./node_modules/@babel/runtime/helpers/toConsumableArray.js")),I=k(S(/*! @logrocket/utils/src/protectFunc */"./packages/@logrocket/utils/src/protectFunc.ts"));function _createForOfIteratorHelper(e,_){var S="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!S){if(Array.isArray(e)||(S=function(e,_){if(e){if("string"==typeof e)return _arrayLikeToArray(e,_);var S=Object.prototype.toString.call(e).slice(8,-1);return"Object"===S&&e.constructor&&(S=e.constructor.name),"Map"===S||"Set"===S?Array.from(e):"Arguments"===S||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(S)?_arrayLikeToArray(e,_):void 0}}(e))||_){S&&(e=S);var k=0,F=function(){};return{s:F,n:function(){return k>=e.length?{done:!0}:{done:!1,value:e[k++]}},e:function(e){throw e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var E,T=!0,M=!1;return{s:function(){S=S.call(e)},n:function(){var e=S.next();return T=e.done,e},e:function(e){M=!0,E=e},f:function(){try{T||null==S.return||S.return()}finally{if(M)throw E}}}}function _arrayLikeToArray(e,_){(null==_||_>e.length)&&(_=e.length);for(var S=0,k=new Array(_);S<_;S++)k[S]=e[S];return k}function ownKeys(e,_){var S=Object.keys(e);if(Object.getOwnPropertySymbols){var k=Object.getOwnPropertySymbols(e);_&&(k=k.filter(function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable})),S.push.apply(S,k)}return S}function _objectSpread(e){for(var _=1;_<arguments.length;_++){var S=null!=arguments[_]?arguments[_]:{};_%2?ownKeys(Object(S),!0).forEach(function(_){(0,E.default)(e,_,S[_])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(S)):ownKeys(Object(S)).forEach(function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(S,_))})}return e}var R=new Set(["get","put","post","patch","head","delete","options","upload","download"]),O=new Set(["urlencoded","json","utf8"]),D=new Set(["raw","multipart"]),L="ionic-",U=new Set(["desktop","mobileweb","pwa"]),B=new Set(["FormData"]),z=new Set,G=new Set(["string"]),j=new Set(["string","array"]),V={utf8:G,urlencoded:new Set(["object"]),json:new Set(["array","object"]),raw:new Set(["Uint8Array","ArrayBuffer"]),default:z};function checkForValidStringValue(e,_,S){if("string"!=typeof _)throw new Error("".concat(S," must be one of: ").concat((0,M.default)(e).join(", ")));if(_=_.trim().toLowerCase(),!e.has(_))throw new Error("".concat(S," must be one of: ").concat((0,M.default)(e).join(", ")));return _}function checkKeyValuePairObject(e,_,S){if("object"!==(0,T.default)(e))throw new Error(S);for(var k=0,E=Object.keys(e);k<E.length;k++){var M=E[k];if(!_.has((0,T.default)(e[M])))throw new Error(S)}return e}function mergeHeaders(e,_){return _objectSpread(_objectSpread({},e),_)}function serializeValue(e,_){return _?encodeURIComponent(e):e}function serializeIdentifier(e,_,S){return e.length?S?"".concat(encodeURIComponent(e),"[").concat(encodeURIComponent(_),"]"):"".concat(e,"[").concat(_,"]"):S?encodeURIComponent(_):_}function serializeArray(e,_,S){var k,E=[],M=_createForOfIteratorHelper(_);try{for(M.s();!(k=M.n()).done;){var I=k.value;Array.isArray(I)?E.push(serializeArray("".concat(e,"[]"),I,S)):"object"!==(0,T.default)(I)?E.push("".concat(serializeIdentifier(e,"",S),"=").concat(serializeValue(I,S))):E.push(serializeObject("".concat(e,"[]").concat(I),S,void 0))}}catch(R){M.e(R)}finally{M.f()}return E.join("&")}function serializeObject(e,_,S){var k=[];for(var E in _)if(_.hasOwnProperty(E)){var M=e.length?"".concat(e,"[").concat(E,"]"):E;Array.isArray(_[E])?k.push(serializeArray(M,_[E],S)):"object"!==(0,T.default)(_[E])||null===_[E]?k.push("".concat(serializeIdentifier(e,E,S),"=").concat(serializeValue(_[E],S))):k.push(serializeObject(M,_[E],S))}return k.join("&")}function appendQueryParamsString(e,_){if(!e.length||!_.length)return e;var S=new URL(e),k=S.host,E=S.pathname,T=S.search,M=S.hash,I=S.protocol;return"".concat(I,"//").concat(k).concat(E).concat(T.length?"".concat(T,"&").concat(_):"?".concat(_)).concat(M)}function processData(e,_){var k=(0,T.default)(e),E=function(e){return V[e]||V.default}(_),I=function(e){return"multipart"===e?B:z}(_);if(I.size>0){var R=!1;if(I.forEach(function(_){S.g[_]&&e instanceof S.g[_]&&(R=!0)}),!R)throw new Error("INSTANCE_TYPE_MISMATCH_DATA ".concat((0,M.default)(I).join(", ")))}if(0===I.size&&!E.has(k))throw new Error("TYPE_MISMATCH_DATA ".concat((0,M.default)(E).join(", ")));return"utf8"===_?e:JSON.stringify(e,void 0,2)}var H=0},"./packages/@logrocket/network/src/registerNetworkInformation.js":
/*!***********************************************************************!*\
					  !*** ./packages/@logrocket/network/src/registerNetworkInformation.js ***!
					  \***********************************************************************/function(e,_){Object.defineProperty(_,"__esModule",{value:!0}),_.default=function(e){var _=void 0;function sendNetworkInformation(){var k={online:window.navigator.onLine,effectiveType:"UNKOWN"};window.navigator.onLine?window.navigator.connection&&window.navigator.connection.effectiveType&&(k.effectiveType=S[window.navigator.connection.effectiveType]||"UNKNOWN"):k.effectiveType="NONE",_&&k.online===_.online&&k.effectiveType===_.effectiveType||(_=k,e.addEvent("lr.network.NetworkStatusEvent",function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).isEnabled;return void 0===e||e?k:null}))}return setTimeout(sendNetworkInformation),window.navigator.connection&&"function"==typeof window.navigator.connection.addEventListener&&window.navigator.connection.addEventListener("change",sendNetworkInformation),window.addEventListener("online",sendNetworkInformation),window.addEventListener("offline",sendNetworkInformation),function(){window.removeEventListener("offline",sendNetworkInformation),window.removeEventListener("online",sendNetworkInformation),window.navigator.connection&&"function"==typeof window.navigator.connection.removeEventListener&&window.navigator.connection.removeEventListener("change",sendNetworkInformation)}};var S={"slow-2g":"SLOW2G","2g":"TWOG","3g":"THREEG","4g":"FOURG"}},"./packages/@logrocket/network/src/registerXHR.js":
/*!********************************************************!*\
					  !*** ./packages/@logrocket/network/src/registerXHR.js ***!
					  \********************************************************/function(e,_,S){var k=S(/*! @babel/runtime/helpers/interopRequireDefault */"./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(_,"__esModule",{value:!0}),_.setActive=function(e){D=e},_.default=function(e){var _=e.addRequest,S=e.addResponse,k=e.isIgnored,U=e.logger,B=e.shouldAugmentNPS,z=void 0===B||B,G=e.shouldParseXHRBlob,j=void 0!==G&&G,V=XMLHttpRequest,H=new WeakMap,W=!1,q="xhr-";return window._lrXMLHttpRequest=XMLHttpRequest,XMLHttpRequest=function(e,B){var G=new V(e,B);if(!D)return G;H.set(G,{xhrId:++L,requestHeaders:{},sent:!1,done:!1});var X=G.open,Y=G.send;z&&(G.open=function(){for(var e=arguments.length,_=new Array(e),S=0;S<e;S++)_[S]=arguments[S];try{var k=_[1];if(window.URL&&"function"==typeof window.URL&&0===k.search(R.WOOTRIC_RESPONSES_REGEX)){var E=new window.URL(U.recordingURL);E.searchParams.set("nps","wootric");var T=new window.URL(k),M=T.searchParams.get("response[text]"),I=M?"".concat(M,"\n\n"):"";T.searchParams.set("response[text]","".concat(I,"<").concat(E.href,"|View LogRocket session>")),_[1]=T.href}}catch(fo){}return X.apply(this,_)},G.send=function(){for(var e=arguments.length,_=new Array(e),S=0;S<e;S++)_[S]=arguments[S];try{var k=H.get(G);if(window.URL&&"function"==typeof window.URL&&k&&k.url&&0===k.url.search(R.DELIGHTED_RESPONSES_REGEX)&&_.length&&-1!==_[0].indexOf(R.DELIGHTED_FEEDBACK_PREFIX)){var E=new window.URL(U.recordingURL);E.searchParams.set("nps","delighted");var T=encodeURIComponent(E.href),M=_[0].split("&").map(function(e){if((0,I.default)(e,R.DELIGHTED_FEEDBACK_PREFIX)){var _=e===R.DELIGHTED_FEEDBACK_PREFIX;return"".concat(e).concat(_?"":"\n\n","<").concat(T,"|View LogRocket session>")}return e}).join("&");_[0]=M}}catch(fo){}return Y.apply(this,_)});var captureResponse=function(){var e;if(!W){var _=H.get(G);if(_&&!k("".concat(q).concat(_.xhrId))&&_.sent&&_.done){var E=_.status||O.XHR_CUSTOM_STATUS_CODES.error;E===O.XHR_CUSTOM_STATUS_CODES.error&&!1===(null===(e=window.navigator)||void 0===e?void 0:e.onLine)&&(E=O.XHR_CUSTOM_STATUS_CODES.offline);var T={url:_.url,status:E,headers:_.responseHeaders,body:_.responseBody,method:(_.method||"").toUpperCase()};if(j&&T.body instanceof Blob){var M=new FileReader;M.readAsText(T.body),M.onload=function(){try{T.body=JSON.parse(M.result)}catch(e){}S("".concat(q).concat(_.xhrId),T)}}else S("".concat(q).concat(_.xhrId),T)}}};(0,T.default)(G,"open",(0,M.default)(function(e,_){if(!W){var S=H.get(G);S.method=e,S.url=_}})),(0,T.default)(G,"send",(0,M.default)(function(e){if(!W){var S=H.get(G);if(S){var k={url:S.url,method:S.method&&S.method.toUpperCase(),headers:(0,E.default)(S.requestHeaders||{},function(e){return e.join(", ")}),body:e};_("".concat(q).concat(S.xhrId),k),S.sent=!0,captureResponse()}}})),(0,T.default)(G,"setRequestHeader",(0,M.default)(function(e,_){if(!W){var S=H.get(G);S&&(S.requestHeaders=S.requestHeaders||{},S.requestHeaders[e]=S.requestHeaders[e]||[],S.requestHeaders[e].push(_))}}));var K={readystatechange:(0,M.default)(function(){if(!W&&4===G.readyState){var e=H.get(G);if(!e)return;if(k("".concat(q).concat(e.xhrId)))return;var _,S=G.getAllResponseHeaders()||"";e.responseHeaders=S.split(/[\r\n]+/).reduce(function(e,_){var S=e,k=_.split(": ");if(k.length>0){var E=k.shift(),T=k.join(": ");e[E]?S[E]+=", ".concat(T):S[E]=T}return S},{});try{switch(G.responseType){case"json":_=U._shouldCloneResponse?JSON.parse(JSON.stringify(G.response)):G.response;break;case"arraybuffer":case"blob":_=G.response;break;case"document":_=G.responseXML;break;case"text":case"":_=G.responseText;break;default:_=""}}catch(E){_="LogRocket: Error accessing response."}e.responseBody=_,e.status=G.status,e.done=!0}}),abort:(0,M.default)(function(){var e=H.get(G);e&&(e.status=O.XHR_CUSTOM_STATUS_CODES.aborted)}),timeout:(0,M.default)(function(){var e=H.get(G);e&&(e.status=O.XHR_CUSTOM_STATUS_CODES.timeout)}),loadend:(0,M.default)(function(){captureResponse()})};return Object.keys(K).forEach(function(e){G.addEventListener(e,K[e])}),G},XMLHttpRequest.prototype=V.prototype,["UNSENT","OPENED","HEADERS_RECEIVED","LOADING","DONE"].forEach(function(e){XMLHttpRequest[e]=V[e]}),function(){W=!0,XMLHttpRequest=V}};var E=k(S(/*! @logrocket/utils/src/mapValues */"./packages/@logrocket/utils/src/mapValues.ts")),T=k(S(/*! @logrocket/utils/src/enhanceFunc */"./packages/@logrocket/utils/src/enhanceFunc.ts")),M=k(S(/*! @logrocket/utils/src/protectFunc */"./packages/@logrocket/utils/src/protectFunc.ts")),I=k(S(/*! @logrocket/utils/src/startsWith */"./packages/@logrocket/utils/src/startsWith.js")),R=S(/*! @logrocket/utils/src/constants/nps */"./packages/@logrocket/utils/src/constants/nps.js"),O=S(/*! @logrocket/utils/src/constants/statusCodes */"./packages/@logrocket/utils/src/constants/statusCodes.ts"),D=!0,L=0},"./packages/@logrocket/now/src/index.js":
/*!**********************************************!*\
					  !*** ./packages/@logrocket/now/src/index.js ***!
					  \**********************************************/function(e,_){Object.defineProperty(_,"__esModule",{value:!0}),_.default=void 0;var S=Date.now.bind(Date),k=S(),E="undefined"!=typeof performance&&performance.now?performance.now.bind(performance):function(){return S()-k};_.default=E},"./packages/@logrocket/redux/src/createEnhancer.js":
/*!*********************************************************!*\
					  !*** ./packages/@logrocket/redux/src/createEnhancer.js ***!
					  \*********************************************************/function(e,_,S){var k=S(/*! @babel/runtime/helpers/interopRequireDefault */"./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(_,"__esModule",{value:!0}),_.default=function(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},S=_.stateSanitizer,k=void 0===S?function(e){return e}:S,E=_.actionSanitizer,I=void 0===E?function(e){return e}:E;return function(_){return function(S,E,R){var O=_(S,E,R),D=O.dispatch,L=M++;return e.addEvent("lr.redux.InitialState",function(){var e;try{e=k(O.getState())}catch(_){}return{state:e,storeId:L}}),_objectSpread(_objectSpread({},O),{},{dispatch:function(_){var S,E,M=(0,T.default)();try{E=D(_)}catch(U){S=U}finally{var R=(0,T.default)()-M;e.addEvent("lr.redux.ReduxAction",function(){var e=null,E=null;try{e=k(O.getState()),E=I(_)}catch(S){}return e&&E?{storeId:L,action:E,duration:R,stateDelta:e}:null})}if(S)throw S;return E}})}}};var E=k(S(/*! @babel/runtime/helpers/defineProperty */"./node_modules/@babel/runtime/helpers/defineProperty.js")),T=k(S(/*! @logrocket/now */"./packages/@logrocket/now/src/index.js"));function ownKeys(e,_){var S=Object.keys(e);if(Object.getOwnPropertySymbols){var k=Object.getOwnPropertySymbols(e);_&&(k=k.filter(function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable})),S.push.apply(S,k)}return S}function _objectSpread(e){for(var _=1;_<arguments.length;_++){var S=null!=arguments[_]?arguments[_]:{};_%2?ownKeys(Object(S),!0).forEach(function(_){(0,E.default)(e,_,S[_])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(S)):ownKeys(Object(S)).forEach(function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(S,_))})}return e}var M=0},"./packages/@logrocket/redux/src/createMiddleware.js":
/*!***********************************************************!*\
					  !*** ./packages/@logrocket/redux/src/createMiddleware.js ***!
					  \***********************************************************/function(e,_,S){var k=S(/*! @babel/runtime/helpers/interopRequireDefault */"./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(_,"__esModule",{value:!0}),_.default=function(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},S=_.stateSanitizer,k=void 0===S?function(e){return e}:S,M=_.actionSanitizer,I=void 0===M?function(e){return e}:M;return function(_){var S=T++;return e.addEvent("lr.redux.InitialState",function(){var e;try{e=k(_.getState())}catch(E){}return{state:e,storeId:S}}),function(T){return function(M){var R,O,D=(0,E.default)();try{O=T(M)}catch(U){R=U}finally{var L=(0,E.default)()-D;e.addEvent("lr.redux.ReduxAction",function(){var e=null,E=null;try{e=k(_.getState()),E=I(M)}catch(R){}return e&&E?{storeId:S,action:E,duration:L,stateDelta:e}:null})}if(R)throw R;return O}}}};var E=k(S(/*! @logrocket/now */"./packages/@logrocket/now/src/index.js")),T=0},"./packages/@logrocket/redux/src/index.js":
/*!************************************************!*\
					  !*** ./packages/@logrocket/redux/src/index.js ***!
					  \************************************************/function(e,_,S){var k=S(/*! @babel/runtime/helpers/interopRequireDefault */"./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(_,"__esModule",{value:!0}),Object.defineProperty(_,"createEnhancer",{enumerable:!0,get:function(){return E.default}}),Object.defineProperty(_,"createMiddleware",{enumerable:!0,get:function(){return T.default}});var E=k(S(/*! ./createEnhancer */"./packages/@logrocket/redux/src/createEnhancer.js")),T=k(S(/*! ./createMiddleware */"./packages/@logrocket/redux/src/createMiddleware.js"))},"./packages/@logrocket/utils/src/TraceKit.js":
/*!***************************************************!*\
					  !*** ./packages/@logrocket/utils/src/TraceKit.js ***!
					  \***************************************************/function(e,_,S){Object.defineProperty(_,"__esModule",{value:!0}),_.default=void 0;var k={collectWindowErrors:!0,debug:!1},E="undefined"!=typeof window?window:void 0!==S.g?S.g:"undefined"!=typeof self?self:{},T=[].slice,M="?",I=/^(?:Uncaught (?:exception: )?)?((?:Eval|Internal|Range|Reference|Syntax|Type|URI)Error): ?(.*)$/;function getLocationHref(){return"undefined"==typeof document||void 0===document.location?"":document.location.href}k.report=function(){var e,_,S=[],R=null,O=null,D=null;function notifyHandlers(e,_){var E=null;if(!_||k.collectWindowErrors){for(var M in S)if(S.hasOwnProperty(M))try{S[M].apply(null,[e].concat(T.call(arguments,2)))}catch(I){E=I}if(E)throw E}}function traceKitWindowOnError(_,S,E,T,R){if(D)k.computeStackTrace.augmentStackTraceWithInitialElement(D,S,E,_),processLastException();else if(R)notifyHandlers(k.computeStackTrace(R),!0);else{var O,L={url:S,line:E,column:T},U=void 0,B=_;"[object String]"==={}.toString.call(_)&&(O=_.match(I))&&(U=O[1],B=O[2]),L.func=M,notifyHandlers({name:U,message:B,url:getLocationHref(),stack:[L]},!0)}return!!e&&e.apply(this,arguments)}function processLastException(){var e=D,_=R;R=null,D=null,O=null,notifyHandlers.apply(null,[e,!1].concat(_))}function report(e,_){var S=T.call(arguments,1);if(D){if(O===e)return;processLastException()}var E=k.computeStackTrace(e);if(D=E,O=e,R=S,setTimeout(function(){O===e&&processLastException()},E.incomplete?2e3:0),!1!==_)throw e}return report.subscribe=function(k){_||(e=E.onerror,E.onerror=traceKitWindowOnError,_=!0),S.push(k)},report.unsubscribe=function(e){for(var _=S.length-1;_>=0;--_)S[_]===e&&S.splice(_,1)},report.uninstall=function(){_&&(E.onerror=e,_=!1,e=void 0),S=[]},report}(),k.computeStackTrace=function(){function computeStackTraceFromStackProp(e){if(void 0!==e.stack&&e.stack){var _,S,k=/^\s*at (.*?) ?\(((?:file|https?|blob|chrome-extension|native|eval|<anonymous>).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,E=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|resource|\[native).*?)(?::(\d+))?(?::(\d+))?\s*$/i,T=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,I=e.stack.split("\n"),R=[];/^(.*) is undefined$/.exec(e.message);for(var O=0,D=I.length;O<D;++O){if(_=k.exec(I[O])){var L=_[2]&&-1!==_[2].indexOf("native");S={url:L?null:_[2],func:_[1]||M,args:L?[_[2]]:[],line:_[3]?+_[3]:null,column:_[4]?+_[4]:null}}else if(_=T.exec(I[O]))S={url:_[2],func:_[1]||M,args:[],line:+_[3],column:_[4]?+_[4]:null};else{if(!(_=E.exec(I[O])))continue;S={url:_[3],func:_[1]||M,args:_[2]?_[2].split(","):[],line:_[4]?+_[4]:null,column:_[5]?+_[5]:null}}!S.func&&S.line&&(S.func=M),R.push(S)}return R.length?(R[0].column||void 0===e.columnNumber||(R[0].column=e.columnNumber+1),{name:e.name,message:e.message,url:getLocationHref(),stack:R}):null}}function augmentStackTraceWithInitialElement(e,_,S,k){var E={url:_,line:S};if(E.url&&E.line){if(e.incomplete=!1,E.func||(E.func=M),e.stack.length>0&&e.stack[0].url===E.url){if(e.stack[0].line===E.line)return!1;if(!e.stack[0].line&&e.stack[0].func===E.func)return e.stack[0].line=E.line,!1}return e.stack.unshift(E),e.partial=!0,!0}return e.incomplete=!0,!1}function computeStackTraceByWalkingCallerChain(e,_){for(var S,E,T=/function\s+([_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*)?\s*\(/i,I=[],R={},O=!1,D=computeStackTraceByWalkingCallerChain.caller;D&&!O;D=D.caller)if(D!==computeStackTrace&&D!==k.report){if(E={url:null,func:M,line:null,column:null},D.name?E.func=D.name:(S=T.exec(D.toString()))&&(E.func=S[1]),void 0===E.func)try{E.func=S.input.substring(0,S.input.indexOf("{"))}catch(fo){}R[""+D]?O=!0:R[""+D]=!0,I.push(E)}_&&I.splice(0,_);var L={name:e.name,message:e.message,url:getLocationHref(),stack:I};return augmentStackTraceWithInitialElement(L,e.sourceURL||e.fileName,e.line||e.lineNumber,e.message||e.description),L}function computeStackTrace(e,_){var S=null;_=null==_?0:+_;try{if(S=computeStackTraceFromStackProp(e))return S}catch(fo){if(k.debug)throw fo}try{if(S=computeStackTraceByWalkingCallerChain(e,_+1))return S}catch(fo){if(k.debug)throw fo}return{name:e.name,message:e.message,url:getLocationHref()}}return computeStackTrace.augmentStackTraceWithInitialElement=augmentStackTraceWithInitialElement,computeStackTrace.computeStackTraceFromStackProp=computeStackTraceFromStackProp,computeStackTrace}();var R=k;_.default=R},"./packages/@logrocket/utils/src/constants/nps.js":
/*!********************************************************!*\
					  !*** ./packages/@logrocket/utils/src/constants/nps.js ***!
					  \********************************************************/function(e,_){Object.defineProperty(_,"__esModule",{value:!0}),_.DELIGHTED_FEEDBACK_PREFIX=_.DELIGHTED_RESPONSES_REGEX=_.WOOTRIC_RESPONSES_REGEX=void 0,_.WOOTRIC_RESPONSES_REGEX=/^https:\/\/production.wootric.com\/responses/,_.DELIGHTED_RESPONSES_REGEX=/^https:\/\/web.delighted.com\/e\/[a-zA-Z-]*\/c/,_.DELIGHTED_FEEDBACK_PREFIX="comment="},"./packages/@logrocket/utils/src/constants/statusCodes.ts":
/*!****************************************************************!*\
					  !*** ./packages/@logrocket/utils/src/constants/statusCodes.ts ***!
					  \****************************************************************/function(e,_,S){var k=S(/*! @babel/runtime/helpers/interopRequireDefault */"./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(_,"__esModule",{value:!0}),_.getStatusText=function(e){return M[String(e)]},_.XHR_CUSTOM_FAILURE_STATUSES=_.XHR_CUSTOM_STATUS_CODES=_.STATUS_CODES=void 0;var E,T=k(S(/*! @babel/runtime/helpers/defineProperty */"./node_modules/@babel/runtime/helpers/defineProperty.js")),M={0:"",100:"Continue",101:"Switching Protocol",102:"Processing",103:"Early Hints",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",306:"unused",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Too Early",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",510:"Not Extended",511:"Network Authentication Required"};_.STATUS_CODES=M;var I={error:0,timeout:444,aborted:499,offline:1001};_.XHR_CUSTOM_STATUS_CODES=I;var R=(E={},(0,T.default)(E,I.error,"Error"),(0,T.default)(E,I.timeout,"Timeout"),(0,T.default)(E,I.aborted,"Aborted"),(0,T.default)(E,I.offline,"Offline"),E);_.XHR_CUSTOM_FAILURE_STATUSES=R},"./packages/@logrocket/utils/src/createUnsubListener.ts":
/*!**************************************************************!*\
					  !*** ./packages/@logrocket/utils/src/createUnsubListener.ts ***!
					  \**************************************************************/function(e,_,S){var k=S(/*! @babel/runtime/helpers/interopRequireDefault */"./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(_,"__esModule",{value:!0}),_.createUnsubListener=function(e){return function(){e.clear()}},_.Handler=void 0;var E=k(S(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js")),T=k(S(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js")),M=function(){function Handler(e){(0,E.default)(this,Handler),this._value=void 0,this._value=e}return(0,T.default)(Handler,[{key:"get",value:function(){return this._value}},{key:"clear",value:function(){this._value=void 0}}]),Handler}();_.Handler=M},"./packages/@logrocket/utils/src/enhanceFunc.ts":
/*!******************************************************!*\
					  !*** ./packages/@logrocket/utils/src/enhanceFunc.ts ***!
					  \******************************************************/function(e,_,S){Object.defineProperty(_,"__esModule",{value:!0}),_.default=function(e,_,S){if("function"!=typeof e[_])return NO_OP_UNREGISTER;try{var shim=function(){for(var e,_=arguments.length,S=new Array(_),k=0;k<_;k++)S[k]=arguments[k];var M=E.apply(this,S);return null===(e=T.get())||void 0===e||e.apply(this,S),M},E=e[_],T=new k.Handler(S);return e[_]=shim,function(){T.clear(),e[_]===shim&&(e[_]=E)}}catch(M){return NO_OP_UNREGISTER}};var k=S(/*! ./createUnsubListener */"./packages/@logrocket/utils/src/createUnsubListener.ts"),NO_OP_UNREGISTER=function(){}},"./packages/@logrocket/utils/src/logError.js":
/*!***************************************************!*\
					  !*** ./packages/@logrocket/utils/src/logError.js ***!
					  \***************************************************/function(e,_){Object.defineProperty(_,"__esModule",{value:!0}),_.default=void 0;var S="undefined"!=typeof console&&console.error&&console.error.bind?function(){}.bind():function(){};_.default=S},"./packages/@logrocket/utils/src/mapValues.ts":
/*!****************************************************!*\
					  !*** ./packages/@logrocket/utils/src/mapValues.ts ***!
					  \****************************************************/function(e,_){Object.defineProperty(_,"__esModule",{value:!0}),_.default=function(e,_){if(null==e)return{};var S={};return Object.keys(e).forEach(function(k){S[k]=_(e[k])}),S}},"./packages/@logrocket/utils/src/protectFunc.ts":
/*!******************************************************!*\
					  !*** ./packages/@logrocket/utils/src/protectFunc.ts ***!
					  \******************************************************/function(e,_,S){var k=S(/*! @babel/runtime/helpers/interopRequireDefault */"./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(_,"__esModule",{value:!0}),_.default=function(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};return function(){var S;try{S=e.apply(void 0,arguments)}catch(M){if("undefined"!=typeof window&&window._lrdebug)throw M;var k=_(M);(0,T.default)("LogRocket",M),(0,E.default)(M,k)}return S}};var E=k(S(/*! ./sendTelemetryData */"./packages/@logrocket/utils/src/sendTelemetryData.js")),T=k(S(/*! ./logError */"./packages/@logrocket/utils/src/logError.js"))},"./packages/@logrocket/utils/src/scrubException.ts":
/*!*********************************************************!*\
					  !*** ./packages/@logrocket/utils/src/scrubException.ts ***!
					  \*********************************************************/function(e,_,S){var k=S(/*! @babel/runtime/helpers/interopRequireDefault */"./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(_,"__esModule",{value:!0}),_.scrubException=function(e,_){if(_){var S,k=_createForOfIteratorHelper(T);try{for(k.s();!(S=k.n()).done;){var E=S.value,I=_[E];isScalar(I)&&(e[E]=I.toString())}}catch(V){k.e(V)}finally{k.f()}var R,O=_createForOfIteratorHelper(M);try{for(O.s();!(R=O.n()).done;){for(var D=R.value,L=_[D]||{},U={},B=0,z=Object.keys(L);B<z.length;B++){var G=z[B],j=L[G];isScalar(j)&&(U[G.toString()]=j.toString())}e[D]=U}}catch(V){O.e(V)}finally{O.f()}}};var E=k(S(/*! @babel/runtime/helpers/typeof */"./node_modules/@babel/runtime/helpers/typeof.js"));function _createForOfIteratorHelper(e,_){var S="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!S){if(Array.isArray(e)||(S=function(e,_){if(e){if("string"==typeof e)return _arrayLikeToArray(e,_);var S=Object.prototype.toString.call(e).slice(8,-1);return"Object"===S&&e.constructor&&(S=e.constructor.name),"Map"===S||"Set"===S?Array.from(e):"Arguments"===S||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(S)?_arrayLikeToArray(e,_):void 0}}(e))||_){S&&(e=S);var k=0,F=function(){};return{s:F,n:function(){return k>=e.length?{done:!0}:{done:!1,value:e[k++]}},e:function(e){throw e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var E,T=!0,M=!1;return{s:function(){S=S.call(e)},n:function(){var e=S.next();return T=e.done,e},e:function(e){M=!0,E=e},f:function(){try{T||null==S.return||S.return()}finally{if(M)throw E}}}}function _arrayLikeToArray(e,_){(null==_||_>e.length)&&(_=e.length);for(var S=0,k=new Array(_);S<_;S++)k[S]=e[S];return k}function isScalar(e){return/boolean|number|string/.test((0,E.default)(e))}var T=["level","logger"],M=["tags","extra"]},"./packages/@logrocket/utils/src/sendTelemetryData.js":
/*!************************************************************!*\
					  !*** ./packages/@logrocket/utils/src/sendTelemetryData.js ***!
					  \************************************************************/function(e,_,S){var k=S(/*! @babel/runtime/helpers/interopRequireDefault */"./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(_,"__esModule",{value:!0}),_.sendTelemetry=function(e,_){"undefined"!=typeof window&&window._lrdebug?(0,T.default)(e):_&&_.extra&&_.extra.appID&&"function"==typeof _.extra.appID.indexOf&&0===_.extra.appID.indexOf("au2drp/")&&Math.random()>=.25||_sendToSentry(_objectSpread({message:e},_))},_.default=function(e,_){try{var S,k,E=e.message;try{S=JSON.stringify(_).slice(0,1e3)}catch(e){try{S="Could not stringify payload: ".concat(Object.prototype.toString.call(_))}catch(e){}}try{k=M.default.computeStackTrace(e).stack.map(function(e){return{filename:e.url,lineno:e.line,colno:e.column,function:e.func||"?"}})}catch(e){}_sendToSentry({message:E,extra:{stringPayload:S},exception:{values:[{type:e.type,value:E,stacktrace:{frames:k}}]}})}catch(e){(0,T.default)("Failed to send",e)}};var E=k(S(/*! @babel/runtime/helpers/defineProperty */"./node_modules/@babel/runtime/helpers/defineProperty.js")),T=k(S(/*! ./logError */"./packages/@logrocket/utils/src/logError.js")),M=k(S(/*! ./TraceKit */"./packages/@logrocket/utils/src/TraceKit.js"));function ownKeys(e,_){var S=Object.keys(e);if(Object.getOwnPropertySymbols){var k=Object.getOwnPropertySymbols(e);_&&(k=k.filter(function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable})),S.push.apply(S,k)}return S}function _objectSpread(e){for(var _=1;_<arguments.length;_++){var S=null!=arguments[_]?arguments[_]:{};_%2?ownKeys(Object(S),!0).forEach(function(_){(0,E.default)(e,_,S[_])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(S)):ownKeys(Object(S)).forEach(function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(S,_))})}return e}var I="8304d923ee86bbba88df4d491ccbc1c75ecfbe70";function _sendToSentry(e){try{var _,S,k=e.message,E="https://e.logrocket.com/api/3/store/?sentry_version=7&sentry_client=http%2F3.8.0&sentry_key=b64162b4187a4c5caae8a68a7e291793",M=JSON.stringify(_objectSpread({message:k,logger:"javascript",platform:"javascript",request:{headers:{"User-Agent":"undefined"!=typeof navigator&&navigator.userAgent},url:"undefined"!=typeof location&&location.href},release:I,environment:(null===(_=window)||void 0===_||null===(S=_.__SDKCONFIG__)||void 0===S?void 0:S.scriptEnv)||"prod"},e));if("undefined"!=typeof window){var R=new(window._lrXMLHttpRequest||XMLHttpRequest);R.open("POST",E),R.send(M)}else"undefined"!=typeof fetch&&fetch(E,{method:"POST",body:M}).catch(function(e){(0,T.default)("Failed to send via fetch",e)})}catch(O){(0,T.default)("Failed to send",O)}}},"./packages/@logrocket/utils/src/startsWith.js":
/*!*****************************************************!*\
					  !*** ./packages/@logrocket/utils/src/startsWith.js ***!
					  \*****************************************************/function(e,_){Object.defineProperty(_,"__esModule",{value:!0}),_.default=function(e,_){var S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return e&&_&&e.substring(S,S+_.length)===_}},"./packages/logrocket/src/LogRocket.js":
/*!*********************************************!*\
					  !*** ./packages/logrocket/src/LogRocket.js ***!
					  \*********************************************/function(e,_,S){var k=S(/*! @babel/runtime/helpers/interopRequireDefault */"./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(_,"__esModule",{value:!0}),_.default=_.MAX_QUEUE_SIZE=void 0;var E=k(S(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js")),T=k(S(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js")),M=k(S(/*! @babel/runtime/helpers/defineProperty */"./node_modules/@babel/runtime/helpers/defineProperty.js")),I=k(S(/*! @babel/runtime/helpers/objectWithoutProperties */"./node_modules/@babel/runtime/helpers/objectWithoutProperties.js")),R=k(S(/*! @logrocket/network */"./packages/@logrocket/network/src/index.js")),O=S(/*! @logrocket/exceptions */"./packages/@logrocket/exceptions/src/index.js"),D=k(S(/*! @logrocket/console */"./packages/@logrocket/console/src/index.js")),L=S(/*! @logrocket/redux */"./packages/@logrocket/redux/src/index.js");function ownKeys(e,_){var S=Object.keys(e);if(Object.getOwnPropertySymbols){var k=Object.getOwnPropertySymbols(e);_&&(k=k.filter(function(_){return Object.getOwnPropertyDescriptor(e,_).enumerable})),S.push.apply(S,k)}return S}function _objectSpread(e){for(var _=1;_<arguments.length;_++){var S=null!=arguments[_]?arguments[_]:{};_%2?ownKeys(Object(S),!0).forEach(function(_){(0,M.default)(e,_,S[_])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(S)):ownKeys(Object(S)).forEach(function(_){Object.defineProperty(e,_,Object.getOwnPropertyDescriptor(S,_))})}return e}_.MAX_QUEUE_SIZE=1e3;var U=function(){function LogRocket(){var e=this;(0,E.default)(this,LogRocket),this._buffer=[],["log","info","warn","error","debug"].forEach(function(_){e[_]=function(){for(var S=arguments.length,k=new Array(S),E=0;E<S;E++)k[E]=arguments[E];e.addEvent("lr.core.LogEvent",function(){return"error"===_&&(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).shouldAggregateConsoleErrors&&O.Capture.captureMessage(e,k[0],k,{},!0),{logLevel:_.toUpperCase(),args:k}},{shouldCaptureStackTrace:!0})}}),this._isInitialized=!1,this._installed=[],window._lr_surl_cb=this.getSessionURL.bind(this)}return(0,T.default)(LogRocket,[{key:"addEvent",value:function(e,_){var S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},k=Date.now();this._run(function(E){E.addEvent(e,_,_objectSpread(_objectSpread({},S),{},{timeOverride:k}))})}},{key:"onLogger",value:function(e){for(this._logger=e;this._buffer.length>0;)this._buffer.shift()(this._logger)}},{key:"_run",value:function(e){if(!this._isDisabled)if(this._logger)e(this._logger);else{if(this._buffer.length>=1e3)return this._isDisabled=!0,void this.uninstall();this._buffer.push(e.bind(this))}}},{key:"init",value:function(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this._isInitialized){var S,k=_.shouldAugmentNPS,E=void 0===k||k,T=_.shouldParseXHRBlob,M=void 0!==T&&T,L=_.shouldDetectExceptions;(void 0===L||L)&&this._installed.push((0,O.registerExceptions)(this)),this._installed.push((0,R.default)(this,{shouldAugmentNPS:!!E,shouldParseXHRBlob:!!M,isDisabled:!1===(null==_||null===(S=_.network)||void 0===S?void 0:S.isEnabled)})),this._installed.push((0,D.default)(this)),this._isInitialized=!0,this._run(function(S){S.init(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_=e.ingestServer,S=(0,I.default)(e,["ingestServer"]);return _?_objectSpread({serverURL:"".concat(_,"/i"),statsURL:"".concat(_,"/s")},S):S}(_))})}}},{key:"start",value:function(){this._run(function(e){e.start()})}},{key:"uninstall",value:function(){this._installed.forEach(function(e){return e()}),this._buffer=[],this._run(function(e){e.uninstall()})}},{key:"identify",value:function(e,_){this._run(function(S){S.identify(e,_)})}},{key:"startNewSession",value:function(){this._run(function(e){e.startNewSession()})}},{key:"track",value:function(e,_){this._run(function(S){S.track(e,_)})}},{key:"getSessionURL",value:function(e){if("function"!=typeof e)throw new Error("LogRocket: must pass callback to getSessionURL()");this._run(function(_){_.getSessionURL?_.getSessionURL(e):e(_.recordingURL)})}},{key:"trackScrollEvent",value:function(e){this._logger&&this._logger.trackScrollEvent(e)}},{key:"getVersion",value:function(e){this._run(function(_){e(_.version)})}},{key:"captureMessage",value:function(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};O.Capture.captureMessage(this,e,[e],_)}},{key:"captureException",value:function(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};O.Capture.captureException(this,e,_)}},{key:"version",get:function(){return this._logger&&this._logger.version}},{key:"sessionURL",get:function(){return this._logger&&this._logger.recordingURL}},{key:"recordingURL",get:function(){return this._logger&&this._logger.recordingURL}},{key:"recordingID",get:function(){return this._logger&&this._logger.recordingID}},{key:"threadID",get:function(){return this._logger&&this._logger.threadID}},{key:"tabID",get:function(){return this._logger&&this._logger.tabID}},{key:"reduxEnhancer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,L.createEnhancer)(this,e)}},{key:"reduxMiddleware",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,L.createMiddleware)(this,e)}},{key:"isDisabled",get:function(){return!!(this._isDisabled||this._logger&&this._logger._isDisabled)}}]),LogRocket}();_.default=U},"./packages/logrocket/src/makeLogRocket.js":
/*!*************************************************!*\
					  !*** ./packages/logrocket/src/makeLogRocket.js ***!
					  \*************************************************/function(e,_,S){var k=S(/*! @babel/runtime/helpers/interopRequireDefault */"./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(_,"__esModule",{value:!0}),_.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:makeNoopPolyfill,S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return new E.default};if("undefined"!=typeof navigator&&"ReactNative"===navigator.product)throw new Error(T);if("undefined"!=typeof window){if(window._disableLogRocket)return _();if(window.MutationObserver&&window.WeakMap){window._lrMutationObserver=window.MutationObserver;var k=S();return e(k),k}}return makeNoopPolyfill()};var E=k(S(/*! ./LogRocket */"./packages/logrocket/src/LogRocket.js")),T="LogRocket on React Native requires the LogRocket React Native specific SDK. See setup guide here https://docs.logrocket.com/reference/react-native.",makeNoopPolyfill=function(){return{init:function(){},uninstall:function(){},log:function(){},info:function(){},warn:function(){},error:function(){},debug:function(){},addEvent:function(){},identify:function(){},start:function(){},get threadID(){return null},get recordingID(){return null},get recordingURL(){return null},reduxEnhancer:function(){return function(e){return function(){return e.apply(void 0,arguments)}}},reduxMiddleware:function(){return function(){return function(e){return function(_){return e(_)}}}},track:function(){},getSessionURL:function(){},getVersion:function(){},startNewSession:function(){},onLogger:function(){},setClock:function(){},captureMessage:function(){},captureException:function(){}}}},"./packages/logrocket/src/setup.js":
/*!*****************************************!*\
					  !*** ./packages/logrocket/src/setup.js ***!
					  \*****************************************/function(e,_,S){var k=S(/*! @babel/runtime/helpers/interopRequireDefault */"./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(_,"__esModule",{value:!0}),_.getDomainsAndEnv=getDomainsAndEnv,_.setupBaseSDKCONFIG=setupBaseSDKCONFIG,_.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_=e.enterpriseServer,S=e.sdkVersion,k=void 0===S?"10.1.0":S,M=(0,E.default)(e,["enterpriseServer","sdkVersion"]),I=getDomainsAndEnv(k),R=I.scriptEnv,O=I.scriptOrigin,D=I.scriptIngest,L=M.sdkServer||_,U=M.ingestServer||_||D,B=(0,T.default)(function(){var e=document.createElement("script");U&&(setupBaseSDKCONFIG(U),window.__SDKCONFIG__.scriptEnv=R),L?e.src="".concat(L,"/logger.min.js"):window.__SDKCONFIG__&&window.__SDKCONFIG__.loggerURL?e.src=window.__SDKCONFIG__.loggerURL:window._lrAsyncScript?e.src=window._lrAsyncScript:e.src="".concat(O,"/logger-1.min.js"),e.async=!0,document.head.appendChild(e),e.onload=function(){"function"==typeof window._LRLogger?setTimeout(function(){B.onLogger(new window._LRLogger({sdkVersion:k}))}):B.uninstall()},e.onerror=function(){B.uninstall()}});return B};var E=k(S(/*! @babel/runtime/helpers/objectWithoutProperties */"./node_modules/@babel/runtime/helpers/objectWithoutProperties.js")),T=k(S(/*! ./makeLogRocket */"./packages/logrocket/src/makeLogRocket.js")),M={"cdn.logrocket.com":"https://r.logrocket.io","cdn.logrocket.io":"https://r.logrocket.io","cdn.lr-ingest.io":"https://r.lr-ingest.io","cdn.lr-in.com":"https://r.lr-in.com","cdn.lr-in-prod.com":"https://r.lr-in-prod.com","cdn.lr-ingest.com":"https://r.lr-ingest.com","cdn.ingest-lr.com":"https://r.ingest-lr.com","cdn.lr-intake.com":"https://r.lr-intake.com","cdn.intake-lr.com":"https://r.intake-lr.com","cdn.logr-ingest.com":"https://r.logr-ingest.com","cdn.lrkt-in.com":"https://r.lrkt-in.com","cdn.lgrckt-in.com":"https://r.lgrckt-in.com","cdn-staging.logrocket.io":"https://staging-i.logrocket.io","cdn-staging.lr-ingest.io":"https://staging-i.lr-ingest.io","cdn-staging.lr-in.com":"https://staging-i.lr-in.com","cdn-staging.lr-in-prod.com":"https://staging-i.lr-in-prod.com","cdn-staging.lr-ingest.com":"https://staging-i.lr-ingest.com","cdn-staging.ingest-lr.com":"https://staging-i.ingest-lr.com","cdn-staging.lr-intake.com":"https://staging-i.lr-intake.com","cdn-staging.intake-lr.com":"https://staging-i.intake-lr.com","cdn-staging.logr-ingest.com":"https://staging-i.logr-ingest.com","cdn-staging.lrkt-in.com":"https://staging-i.lrkt-in.com","cdn-staging.lgrckt-in.com":"https://staging-i.lgrckt-in.com"};function getDomainsAndEnv(e){if("script"===e||"shopify-pixel"===e){try{var _=document.currentScript.src.match(/^(https?:\/\/([^\\]+))\/.+$/),S=_&&_[2];if(S&&M[S])return{scriptEnv:(k=S,k.startsWith("cdn-staging")?"staging":k.startsWith("localhost")?"development":"prod"),scriptOrigin:_&&_[1],scriptIngest:M[S]}}catch(E){}return{scriptEnv:"prod",scriptOrigin:"https://cdn.logrocket.io"}}return{scriptEnv:void 0,scriptOrigin:"https://cdn.lgrckt-in.com",scriptIngest:"https://r.lgrckt-in.com"};var k}function setupBaseSDKCONFIG(e){void 0===window.__SDKCONFIG__&&(window.__SDKCONFIG__={}),window.__SDKCONFIG__.serverURL="".concat(e,"/i"),window.__SDKCONFIG__.statsURL="".concat(e,"/s")}},"./node_modules/@babel/runtime/helpers/arrayLikeToArray.js":
/*!*****************************************************************!*\
					  !*** ./node_modules/@babel/runtime/helpers/arrayLikeToArray.js ***!
					  \*****************************************************************/function(e){e.exports=function(e,_){(null==_||_>e.length)&&(_=e.length);for(var S=0,k=new Array(_);S<_;S++)k[S]=e[S];return k},e.exports.__esModule=!0,e.exports.default=e.exports},"./node_modules/@babel/runtime/helpers/arrayWithoutHoles.js":
/*!******************************************************************!*\
					  !*** ./node_modules/@babel/runtime/helpers/arrayWithoutHoles.js ***!
					  \******************************************************************/function(e,_,S){var k=S(/*! ./arrayLikeToArray.js */"./node_modules/@babel/runtime/helpers/arrayLikeToArray.js");e.exports=function(e){if(Array.isArray(e))return k(e)},e.exports.__esModule=!0,e.exports.default=e.exports},"./node_modules/@babel/runtime/helpers/classCallCheck.js":
/*!***************************************************************!*\
					  !*** ./node_modules/@babel/runtime/helpers/classCallCheck.js ***!
					  \***************************************************************/function(e){e.exports=function(e,_){if(!(e instanceof _))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},"./node_modules/@babel/runtime/helpers/createClass.js":
/*!************************************************************!*\
					  !*** ./node_modules/@babel/runtime/helpers/createClass.js ***!
					  \************************************************************/function(e,_,S){var k=S(/*! ./toPropertyKey.js */"./node_modules/@babel/runtime/helpers/toPropertyKey.js");function _defineProperties(e,_){for(var S=0;S<_.length;S++){var E=_[S];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(e,k(E.key),E)}}e.exports=function(e,_,S){return _&&_defineProperties(e.prototype,_),S&&_defineProperties(e,S),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},"./node_modules/@babel/runtime/helpers/defineProperty.js":
/*!***************************************************************!*\
					  !*** ./node_modules/@babel/runtime/helpers/defineProperty.js ***!
					  \***************************************************************/function(e,_,S){var k=S(/*! ./toPropertyKey.js */"./node_modules/@babel/runtime/helpers/toPropertyKey.js");e.exports=function(e,_,S){return(_=k(_))in e?Object.defineProperty(e,_,{value:S,enumerable:!0,configurable:!0,writable:!0}):e[_]=S,e},e.exports.__esModule=!0,e.exports.default=e.exports},"./node_modules/@babel/runtime/helpers/interopRequireDefault.js":
/*!**********************************************************************!*\
					  !*** ./node_modules/@babel/runtime/helpers/interopRequireDefault.js ***!
					  \**********************************************************************/function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},"./node_modules/@babel/runtime/helpers/iterableToArray.js":
/*!****************************************************************!*\
					  !*** ./node_modules/@babel/runtime/helpers/iterableToArray.js ***!
					  \****************************************************************/function(e){e.exports=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.__esModule=!0,e.exports.default=e.exports},"./node_modules/@babel/runtime/helpers/nonIterableSpread.js":
/*!******************************************************************!*\
					  !*** ./node_modules/@babel/runtime/helpers/nonIterableSpread.js ***!
					  \******************************************************************/function(e){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},"./node_modules/@babel/runtime/helpers/objectWithoutProperties.js":
/*!************************************************************************!*\
					  !*** ./node_modules/@babel/runtime/helpers/objectWithoutProperties.js ***!
					  \************************************************************************/function(e,_,S){var k=S(/*! ./objectWithoutPropertiesLoose.js */"./node_modules/@babel/runtime/helpers/objectWithoutPropertiesLoose.js");e.exports=function(e,_){if(null==e)return{};var S,E,T=k(e,_);if(Object.getOwnPropertySymbols){var M=Object.getOwnPropertySymbols(e);for(E=0;E<M.length;E++)S=M[E],_.indexOf(S)>=0||Object.prototype.propertyIsEnumerable.call(e,S)&&(T[S]=e[S])}return T},e.exports.__esModule=!0,e.exports.default=e.exports},"./node_modules/@babel/runtime/helpers/objectWithoutPropertiesLoose.js":
/*!*****************************************************************************!*\
					  !*** ./node_modules/@babel/runtime/helpers/objectWithoutPropertiesLoose.js ***!
					  \*****************************************************************************/function(e){e.exports=function(e,_){if(null==e)return{};var S,k,E={},T=Object.keys(e);for(k=0;k<T.length;k++)S=T[k],_.indexOf(S)>=0||(E[S]=e[S]);return E},e.exports.__esModule=!0,e.exports.default=e.exports},"./node_modules/@babel/runtime/helpers/toConsumableArray.js":
/*!******************************************************************!*\
					  !*** ./node_modules/@babel/runtime/helpers/toConsumableArray.js ***!
					  \******************************************************************/function(e,_,S){var k=S(/*! ./arrayWithoutHoles.js */"./node_modules/@babel/runtime/helpers/arrayWithoutHoles.js"),E=S(/*! ./iterableToArray.js */"./node_modules/@babel/runtime/helpers/iterableToArray.js"),T=S(/*! ./unsupportedIterableToArray.js */"./node_modules/@babel/runtime/helpers/unsupportedIterableToArray.js"),M=S(/*! ./nonIterableSpread.js */"./node_modules/@babel/runtime/helpers/nonIterableSpread.js");e.exports=function(e){return k(e)||E(e)||T(e)||M()},e.exports.__esModule=!0,e.exports.default=e.exports},"./node_modules/@babel/runtime/helpers/toPrimitive.js":
/*!************************************************************!*\
					  !*** ./node_modules/@babel/runtime/helpers/toPrimitive.js ***!
					  \************************************************************/function(e,_,S){var k=S(/*! ./typeof.js */"./node_modules/@babel/runtime/helpers/typeof.js").default;e.exports=function(e,_){if("object"!==k(e)||null===e)return e;var S=e[Symbol.toPrimitive];if(void 0!==S){var E=S.call(e,_||"default");if("object"!==k(E))return E;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===_?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},"./node_modules/@babel/runtime/helpers/toPropertyKey.js":
/*!**************************************************************!*\
					  !*** ./node_modules/@babel/runtime/helpers/toPropertyKey.js ***!
					  \**************************************************************/function(e,_,S){var k=S(/*! ./typeof.js */"./node_modules/@babel/runtime/helpers/typeof.js").default,E=S(/*! ./toPrimitive.js */"./node_modules/@babel/runtime/helpers/toPrimitive.js");e.exports=function(e){var _=E(e,"string");return"symbol"===k(_)?_:String(_)},e.exports.__esModule=!0,e.exports.default=e.exports},"./node_modules/@babel/runtime/helpers/typeof.js":
/*!*******************************************************!*\
					  !*** ./node_modules/@babel/runtime/helpers/typeof.js ***!
					  \*******************************************************/function(e){function _typeof(_){return e.exports=_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,_typeof(_)}e.exports=_typeof,e.exports.__esModule=!0,e.exports.default=e.exports},"./node_modules/@babel/runtime/helpers/unsupportedIterableToArray.js":
/*!***************************************************************************!*\
					  !*** ./node_modules/@babel/runtime/helpers/unsupportedIterableToArray.js ***!
					  \***************************************************************************/function(e,_,S){var k=S(/*! ./arrayLikeToArray.js */"./node_modules/@babel/runtime/helpers/arrayLikeToArray.js");e.exports=function(e,_){if(e){if("string"==typeof e)return k(e,_);var S=Object.prototype.toString.call(e).slice(8,-1);return"Object"===S&&e.constructor&&(S=e.constructor.name),"Map"===S||"Set"===S?Array.from(e):"Arguments"===S||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(S)?k(e,_):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports}},_={};function __webpack_require__(S){var k=_[S];if(void 0!==k)return k.exports;var E=_[S]={exports:{}};return e[S](E,E.exports,__webpack_require__),E.exports}__webpack_require__.g=function(){if("object"===("undefined"==typeof globalThis?"undefined":_typeof3(globalThis)))return globalThis;try{return this||new Function("return this")()}catch(fo){if("object"===("undefined"==typeof window?"undefined":_typeof3(window)))return window}}();var S={};return function(){var e=S,_=__webpack_require__(/*! @babel/runtime/helpers/interopRequireDefault */"./node_modules/@babel/runtime/helpers/interopRequireDefault.js");
/*!**********************************************!*\
					  !*** ./packages/logrocket/src/module-npm.js ***!
					  \**********************************************/Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var k=(0,_(__webpack_require__(/*! ./setup */"./packages/logrocket/src/setup.js")).default)();e.default=k}(),S=S.default}()})}(ut)),ut.exports);D("ba",getDefaultExportFromCjs(lt));function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _inheritsLoose(e,_){e.prototype=Object.create(_.prototype),e.prototype.constructor=e,e.__proto__=_}
/*!
			 * GSAP 3.13.0
			 * https://gsap.com
			 *
			 * @license Copyright 2008-2025, GreenSock. All rights reserved.
			 * Subject to the terms at https://gsap.com/standard-license
			 * @author: Jack Doyle, jack@greensock.com
			*/var ct,ht,dt,ft,pt,vt,gt,mt,yt,_t,bt,St={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},wt={duration:.5,overwrite:!1,delay:0},xt=1e8,kt=1e-8,Ct=2*Math.PI,At=Ct/4,Et=0,Tt=Math.sqrt,Mt=Math.cos,It=Math.sin,_isString=function(e){return"string"==typeof e},_isFunction=function(e){return"function"==typeof e},_isNumber=function(e){return"number"==typeof e},_isUndefined=function(e){return void 0===e},_isObject=function(e){return"object"===_typeof3(e)},_isNotFalse=function(e){return!1!==e},_windowExists$1=function(){return"undefined"!=typeof window},_isFuncOrString=function(e){return _isFunction(e)||_isString(e)},Rt="function"==typeof ArrayBuffer&&ArrayBuffer.isView||function(){},Pt=Array.isArray,Ot=/(?:-?\.?\d|\.)+/gi,Dt=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,Lt=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,Ft=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,Ut=/[+-]=-?[.\d]+/,Bt=/[^,'"\[\]\s]+/gi,Nt=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,zt={},Gt={},_install=function(e){return(Gt=_merge(e,zt))&&Dr},_missingPlugin=function(e,_){},_warn=function(e,_){return!_&&void 0},_addGlobal=function(e,_){return e&&(zt[e]=_)&&Gt&&(Gt[e]=_)||zt},_emptyFunc=function(){return 0},jt={suppressEvents:!0,isStart:!0,kill:!1},Vt={suppressEvents:!0,kill:!1},Ht={suppressEvents:!0},Wt={},qt=[],Xt={},Yt={},Kt={},Jt=30,Qt=[],Zt="",_harness=function(e){var _,S,k=e[0];if(_isObject(k)||_isFunction(k)||(e=[e]),!(_=(k._gsap||{}).harness)){for(S=Qt.length;S--&&!Qt[S].targetTest(k););_=Qt[S]}for(S=e.length;S--;)e[S]&&(e[S]._gsap||(e[S]._gsap=new GSCache(e[S],_)))||e.splice(S,1);return e},_getCache=function(e){return e._gsap||_harness(toArray$2(e))[0]._gsap},_getProperty=function(e,_,S){return(S=e[_])&&_isFunction(S)?e[_]():_isUndefined(S)&&e.getAttribute&&e.getAttribute(_)||S},_forEachName=function(e,_){return(e=e.split(",")).forEach(_)||e},_round=function(e){return Math.round(1e5*e)/1e5||0},_roundPrecise=function(e){return Math.round(1e7*e)/1e7||0},_parseRelative=function(e,_){var S=_.charAt(0),k=parseFloat(_.substr(2));return e=parseFloat(e),"+"===S?e+k:"-"===S?e-k:"*"===S?e*k:e/k},_arrayContainsAny=function(e,_){for(var S=_.length,k=0;e.indexOf(_[k])<0&&++k<S;);return k<S},_lazyRender=function(){var e,_,S=qt.length,k=qt.slice(0);for(Xt={},qt.length=0,e=0;e<S;e++)(_=k[e])&&_._lazy&&(_.render(_._lazy[0],_._lazy[1],!0)._lazy=0)},_isRevertWorthy=function(e){return!!(e._initted||e._startAt||e.add)},_lazySafeRender=function(e,_,S,k){qt.length&&!ht&&_lazyRender(),e.render(_,S,!!(ht&&_<0&&_isRevertWorthy(e))),qt.length&&!ht&&_lazyRender()},_numericIfPossible=function(e){var _=parseFloat(e);return(_||0===_)&&(e+"").match(Bt).length<2?_:_isString(e)?e.trim():e},_passThrough=function(e){return e},_setDefaults=function(e,_){for(var S in _)S in e||(e[S]=_[S]);return e},_merge=function(e,_){for(var S in _)e[S]=_[S];return e},$t=function _mergeDeep(e,_){for(var S in _)"__proto__"!==S&&"constructor"!==S&&"prototype"!==S&&(e[S]=_isObject(_[S])?_mergeDeep(e[S]||(e[S]={}),_[S]):_[S]);return e},_copyExcluding=function(e,_){var S,k={};for(S in e)S in _||(k[S]=e[S]);return k},_inheritDefaults=function(e){var _,S=e.parent||ft,k=e.keyframes?(_=Pt(e.keyframes),function(e,S){for(var k in S)k in e||"duration"===k&&_||"ease"===k||(e[k]=S[k])}):_setDefaults;if(_isNotFalse(e.inherit))for(;S;)k(e,S.vars.defaults),S=S.parent||S._dp;return e},_addLinkedListItem=function(e,_,S,k,E){var T,M=e[k];if(E)for(T=_[E];M&&M[E]>T;)M=M._prev;return M?(_._next=M._next,M._next=_):(_._next=e[S],e[S]=_),_._next?_._next._prev=_:e[k]=_,_._prev=M,_.parent=_._dp=e,_},_removeLinkedListItem=function(e,_,S,k){void 0===S&&(S="_first"),void 0===k&&(k="_last");var E=_._prev,T=_._next;E?E._next=T:e[S]===_&&(e[S]=T),T?T._prev=E:e[k]===_&&(e[k]=E),_._next=_._prev=_.parent=null},_removeFromParent=function(e,_){e.parent&&(!_||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},_uncache=function(e,_){if(e&&(!_||_._end>e._dur||_._start<0))for(var S=e;S;)S._dirty=1,S=S.parent;return e},_rewindStartAt=function(e,_,S,k){return e._startAt&&(ht?e._startAt.revert(Vt):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(_,!0,k))},er=function _hasNoPausedAncestors(e){return!e||e._ts&&_hasNoPausedAncestors(e.parent)},_elapsedCycleDuration=function(e){return e._repeat?_animationCycle(e._tTime,e=e.duration()+e._rDelay)*e:0},_animationCycle=function(e,_){var S=Math.floor(e=_roundPrecise(e/_));return e&&S===e?S-1:S},_parentToChildTotalTime=function(e,_){return(e-_._start)*_._ts+(_._ts>=0?0:_._dirty?_.totalDuration():_._tDur)},_setEnd=function(e){return e._end=_roundPrecise(e._start+(e._tDur/Math.abs(e._ts||e._rts||kt)||0))},_alignPlayhead=function(e,_){var S=e._dp;return S&&S.smoothChildTiming&&e._ts&&(e._start=_roundPrecise(S._time-(e._ts>0?_/e._ts:((e._dirty?e.totalDuration():e._tDur)-_)/-e._ts)),_setEnd(e),S._dirty||_uncache(S,e)),e},_postAddChecks=function(e,_){var S;if((_._time||!_._dur&&_._initted||_._start<e._time&&(_._dur||!_.add))&&(S=_parentToChildTotalTime(e.rawTime(),_),(!_._dur||_clamp(0,_.totalDuration(),S)-_._tTime>kt)&&_.render(S,!0)),_uncache(e,_)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(S=e;S._dp;)S.rawTime()>=0&&S.totalTime(S._tTime),S=S._dp;e._zTime=-1e-8}},_addToTimeline=function(e,_,S,k){return _.parent&&_removeFromParent(_),_._start=_roundPrecise((_isNumber(S)?S:S||e!==ft?nr(e,S,_):e._time)+_._delay),_._end=_roundPrecise(_._start+(_.totalDuration()/Math.abs(_.timeScale())||0)),_addLinkedListItem(e,_,"_first","_last",e._sort?"_start":0),_isFromOrFromStart(_)||(e._recent=_),k||_postAddChecks(e,_),e._ts<0&&_alignPlayhead(e,e._tTime),e},_scrollTrigger=function(e,_){return zt.ScrollTrigger?zt.ScrollTrigger.create(_,e):void 0},_attemptInitTween=function(e,_,S,k,E){return Sr(e,_,E),e._initted?!S&&e._pt&&!ht&&(e._dur&&!1!==e.vars.lazy||!e._dur&&e.vars.lazy)&&yt!==cr.frame?(qt.push(e),e._lazy=[E,k],1):void 0:1},tr=function _parentPlayheadIsBeforeStart(e){var _=e.parent;return _&&_._ts&&_._initted&&!_._lock&&(_.rawTime()<0||_parentPlayheadIsBeforeStart(_))},_isFromOrFromStart=function(e){var _=e.data;return"isFromStart"===_||"isStart"===_},_setDuration=function(e,_,S,k){var E=e._repeat,T=_roundPrecise(_)||0,M=e._tTime/e._tDur;return M&&!k&&(e._time*=T/e._dur),e._dur=T,e._tDur=E?E<0?1e10:_roundPrecise(T*(E+1)+e._rDelay*E):T,M>0&&!k&&_alignPlayhead(e,e._tTime=e._tDur*M),e.parent&&_setEnd(e),S||_uncache(e.parent,e),e},_onUpdateTotalDuration=function(e){return e instanceof yr?_uncache(e):_setDuration(e,e._dur)},rr={_start:0,endTime:_emptyFunc,totalDuration:_emptyFunc},nr=function _parsePosition(e,_,S){var k,E,T,M=e.labels,I=e._recent||rr,R=e.duration()>=xt?I.endTime(!1):e._dur;return _isString(_)&&(isNaN(_)||_ in M)?(E=_.charAt(0),T="%"===_.substr(-1),k=_.indexOf("="),"<"===E||">"===E?(k>=0&&(_=_.replace(/=/,"")),("<"===E?I._start:I.endTime(I._repeat>=0))+(parseFloat(_.substr(1))||0)*(T?(k<0?I:S).totalDuration()/100:1)):k<0?(_ in M||(M[_]=R),M[_]):(E=parseFloat(_.charAt(k-1)+_.substr(k+1)),T&&S&&(E=E/100*(Pt(S)?S[0]:S).totalDuration()),k>1?_parsePosition(e,_.substr(0,k-1),S)+E:R+E)):null==_?R:+_},_createTweenType=function(e,_,S){var k,E,T=_isNumber(_[1]),M=(T?2:1)+(e<2?0:1),I=_[M];if(T&&(I.duration=_[1]),I.parent=S,e){for(k=I,E=S;E&&!("immediateRender"in k);)k=E.vars.defaults||{},E=_isNotFalse(E.vars.inherit)&&E.parent;I.immediateRender=_isNotFalse(k.immediateRender),e<2?I.runBackwards=1:I.startAt=_[M-1]}return new kr(_[0],I,_[M+1])},_conditionalReturn=function(e,_){return e||0===e?_(e):_},_clamp=function(e,_,S){return S<e?e:S>_?_:S},getUnit=function(e,_){return _isString(e)&&(_=Nt.exec(e))?_[1]:""},ir=[].slice,_isArrayLike=function(e,_){return e&&_isObject(e)&&"length"in e&&(!_&&!e.length||e.length-1 in e&&_isObject(e[0]))&&!e.nodeType&&e!==pt},toArray$2=function(e,_,S){return dt&&!_&&dt.selector?dt.selector(e):!_isString(e)||S||!vt&&_wake()?Pt(e)?function(e,_,S){return void 0===S&&(S=[]),e.forEach(function(e){var k;return _isString(e)&&!_||_isArrayLike(e,1)?(k=S).push.apply(k,toArray$2(e)):S.push(e)})||S}(e,S):_isArrayLike(e)?ir.call(e,0):e?[e]:[]:ir.call((_||gt).querySelectorAll(e),0)},selector=function(e){return e=toArray$2(e)[0]||_warn()||{},function(_){var S=e.current||e.nativeElement||e;return toArray$2(_,S.querySelectorAll?S:S===e?_warn()||gt.createElement("div"):e)}},shuffle=function(e){return e.sort(function(){return.5-Math.random()})},distribute=function(e){if(_isFunction(e))return e;var _=_isObject(e)?e:{each:e},S=_parseEase(_.ease),k=_.from||0,E=parseFloat(_.base)||0,T={},M=k>0&&k<1,I=isNaN(k)||M,R=_.axis,O=k,D=k;return _isString(k)?O=D={center:.5,edges:.5,end:1}[k]||0:!M&&I&&(O=k[0],D=k[1]),function(e,M,L){var U,B,z,G,j,V,H,W,q,X=(L||_).length,Y=T[X];if(!Y){if(!(q="auto"===_.grid?0:(_.grid||[1,xt])[1])){for(H=-1e8;H<(H=L[q++].getBoundingClientRect().left)&&q<X;);q<X&&q--}for(Y=T[X]=[],U=I?Math.min(q,X)*O-.5:k%q,B=q===xt?0:I?X*D/q-.5:k/q|0,H=0,W=xt,V=0;V<X;V++)z=V%q-U,G=B-(V/q|0),Y[V]=j=R?Math.abs("y"===R?G:z):Tt(z*z+G*G),j>H&&(H=j),j<W&&(W=j);"random"===k&&shuffle(Y),Y.max=H-W,Y.min=W,Y.v=X=(parseFloat(_.amount)||parseFloat(_.each)*(q>X?X-1:R?"y"===R?X/q:q:Math.max(q,X/q))||0)*("edges"===k?-1:1),Y.b=X<0?E-X:E,Y.u=getUnit(_.amount||_.each)||0,S=S&&X<0?_invertEase(S):S}return X=(Y[e]-Y.min)/Y.max||0,_roundPrecise(Y.b+(S?S(X):X)*Y.v)+Y.u}},_roundModifier=function(e){var _=Math.pow(10,((e+"").split(".")[1]||"").length);return function(S){var k=_roundPrecise(Math.round(parseFloat(S)/e)*e*_);return(k-k%1)/_+(_isNumber(S)?0:getUnit(S))}},snap=function(e,_){var S,k,E=Pt(e);return!E&&_isObject(e)&&(S=E=e.radius||xt,e.values?(e=toArray$2(e.values),(k=!_isNumber(e[0]))&&(S*=S)):e=_roundModifier(e.increment)),_conditionalReturn(_,E?_isFunction(e)?function(_){return k=e(_),Math.abs(k-_)<=S?k:_}:function(_){for(var E,T,M=parseFloat(k?_.x:_),I=parseFloat(k?_.y:0),R=xt,O=0,D=e.length;D--;)(E=k?(E=e[D].x-M)*E+(T=e[D].y-I)*T:Math.abs(e[D]-M))<R&&(R=E,O=D);return O=!S||R<=S?e[O]:_,k||O===_||_isNumber(_)?O:O+getUnit(_)}:_roundModifier(e))},random=function(e,_,S,k){return _conditionalReturn(Pt(e)?!_:!0===S?!!(S=0):!k,function(){return Pt(e)?e[~~(Math.random()*e.length)]:(S=S||1e-5)&&(k=S<1?Math.pow(10,(S+"").length-2):1)&&Math.floor(Math.round((e-S/2+Math.random()*(_-e+.99*S))/S)*S*k)/k})},_wrapArray=function(e,_,S){return _conditionalReturn(S,function(S){return e[~~_(S)]})},_replaceRandom=function(e){for(var _,S,k,E,T=0,M="";~(_=e.indexOf("random(",T));)k=e.indexOf(")",_),E="["===e.charAt(_+7),S=e.substr(_+7,k-_-7).match(E?Bt:Ot),M+=e.substr(T,_-T)+random(E?S:+S[0],E?0:+S[1],+S[2]||1e-5),T=k+1;return M+e.substr(T,e.length-T)},mapRange=function(e,_,S,k,E){var T=_-e,M=k-S;return _conditionalReturn(E,function(_){return S+((_-e)/T*M||0)})},_getLabelInDirection=function(e,_,S){var k,E,T,M=e.labels,I=xt;for(k in M)(E=M[k]-_)<0==!!S&&E&&I>(E=Math.abs(E))&&(T=k,I=E);return T},_callback=function(e,_,S){var k,E,T,M=e.vars,I=M[_],R=dt,O=e._ctx;if(I)return k=M[_+"Params"],E=M.callbackScope||e,S&&qt.length&&_lazyRender(),O&&(dt=O),T=k?I.apply(E,k):I.call(E),dt=R,T},_interrupt=function(e){return _removeFromParent(e),e.scrollTrigger&&e.scrollTrigger.kill(!!ht),e.progress()<1&&_callback(e,"onInterrupt"),e},ar=[],_createPlugin=function(e){if(e)if(e=!e.name&&e.default||e,_windowExists$1()||e.headless){var _=e.name,S=_isFunction(e),k=_&&!S&&e.init?function(){this._props=[]}:e,E={init:_emptyFunc,render:_renderPropTweens,add:_addPropTween,kill:_killPropTweensOf,modifier:_addPluginModifier,rawVars:0},T={targetTest:0,get:0,getSetter:_getSetter,aliases:{},register:0};if(_wake(),e!==k){if(Yt[_])return;_setDefaults(k,_setDefaults(_copyExcluding(e,E),T)),_merge(k.prototype,_merge(E,_copyExcluding(e,T))),Yt[k.prop=_]=k,e.targetTest&&(Qt.push(k),Wt[_]=1),_=("css"===_?"CSS":_.charAt(0).toUpperCase()+_.substr(1))+"Plugin"}_addGlobal(_,k),e.register&&e.register(Dr,k,Cr)}else ar.push(e)},or=255,sr={aqua:[0,or,or],lime:[0,or,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,or],navy:[0,0,128],white:[or,or,or],olive:[128,128,0],yellow:[or,or,0],orange:[or,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[or,0,0],pink:[or,192,203],cyan:[0,or,or],transparent:[or,or,or,0]},_hue=function(e,_,S){return(6*(e+=e<0?1:e>1?-1:0)<1?_+(S-_)*e*6:e<.5?S:3*e<2?_+(S-_)*(2/3-e)*6:_)*or+.5|0},splitColor$1=function(e,_,S){var k,E,T,M,I,R,O,D,L,U,B=e?_isNumber(e)?[e>>16,e>>8&or,e&or]:0:sr.black;if(!B){if(","===e.substr(-1)&&(e=e.substr(0,e.length-1)),sr[e])B=sr[e];else if("#"===e.charAt(0)){if(e.length<6&&(k=e.charAt(1),E=e.charAt(2),T=e.charAt(3),e="#"+k+k+E+E+T+T+(5===e.length?e.charAt(4)+e.charAt(4):"")),9===e.length)return[(B=parseInt(e.substr(1,6),16))>>16,B>>8&or,B&or,parseInt(e.substr(7),16)/255];B=[(e=parseInt(e.substr(1),16))>>16,e>>8&or,e&or]}else if("hsl"===e.substr(0,3))if(B=U=e.match(Ot),_){if(~e.indexOf("="))return B=e.match(Dt),S&&B.length<4&&(B[3]=1),B}else M=+B[0]%360/360,I=+B[1]/100,k=2*(R=+B[2]/100)-(E=R<=.5?R*(I+1):R+I-R*I),B.length>3&&(B[3]*=1),B[0]=_hue(M+1/3,k,E),B[1]=_hue(M,k,E),B[2]=_hue(M-1/3,k,E);else B=e.match(Ot)||sr.transparent;B=B.map(Number)}return _&&!U&&(k=B[0]/or,E=B[1]/or,T=B[2]/or,R=((O=Math.max(k,E,T))+(D=Math.min(k,E,T)))/2,O===D?M=I=0:(L=O-D,I=R>.5?L/(2-O-D):L/(O+D),M=O===k?(E-T)/L+(E<T?6:0):O===E?(T-k)/L+2:(k-E)/L+4,M*=60),B[0]=~~(M+.5),B[1]=~~(100*I+.5),B[2]=~~(100*R+.5)),S&&B.length<4&&(B[3]=1),B},_colorOrderData=function(e){var _=[],S=[],k=-1;return e.split(ur).forEach(function(e){var E=e.match(Lt)||[];_.push.apply(_,E),S.push(k+=E.length+1)}),_.c=S,_},_formatColors=function(e,_,S){var k,E,T,M,I="",R=(e+I).match(ur),O=_?"hsla(":"rgba(",D=0;if(!R)return e;if(R=R.map(function(e){return(e=splitColor$1(e,_,1))&&O+(_?e[0]+","+e[1]+"%,"+e[2]+"%,"+e[3]:e.join(","))+")"}),S&&(T=_colorOrderData(e),(k=S.c).join(I)!==T.c.join(I)))for(M=(E=e.replace(ur,"1").split(Lt)).length-1;D<M;D++)I+=E[D]+(~k.indexOf(D)?R.shift()||O+"0,0,0,0)":(T.length?T:R.length?R:S).shift());if(!E)for(M=(E=e.split(ur)).length-1;D<M;D++)I+=E[D]+R[D];return I+E[M]},ur=function(){var e,_="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b";for(e in sr)_+="|"+e+"\\b";return new RegExp(_+")","gi")}(),lr=/hsl[a]?\(/,_colorStringFilter=function(e){var _,S=e.join(" ");if(ur.lastIndex=0,ur.test(S))return _=lr.test(S),e[1]=_formatColors(e[1],_),e[0]=_formatColors(e[0],_,_colorOrderData(e[1])),!0},cr=function(){var e,_,S,k,E,T,M=Date.now,I=500,R=33,O=M(),D=O,L=1e3/240,U=L,B=[],z=function _tick(S){var z,G,j,V,H=M()-D,W=!0===S;if((H>I||H<0)&&(O+=H-R),((z=(j=(D+=H)-O)-U)>0||W)&&(V=++k.frame,E=j-1e3*k.time,k.time=j/=1e3,U+=z+(z>=L?4:L-z),G=1),W||(e=_(_tick)),G)for(T=0;T<B.length;T++)B[T](j,E,V,S)};return k={time:0,frame:0,tick:function(){z(!0)},deltaRatio:function(e){return E/(1e3/(e||60))},wake:function(){mt&&(!vt&&_windowExists$1()&&(pt=vt=window,gt=pt.document||{},zt.gsap=Dr,(pt.gsapVersions||(pt.gsapVersions=[])).push(Dr.version),_install(Gt||pt.GreenSockGlobals||!pt.gsap&&pt||{}),ar.forEach(_createPlugin)),S="undefined"!=typeof requestAnimationFrame&&requestAnimationFrame,e&&k.sleep(),_=S||function(e){return setTimeout(e,U-1e3*k.time+1|0)},bt=1,z(2))},sleep:function(){(S?cancelAnimationFrame:clearTimeout)(e),bt=0,_=_emptyFunc},lagSmoothing:function(e,_){I=e||1/0,R=Math.min(_||33,I)},fps:function(e){L=1e3/(e||240),U=1e3*k.time+L},add:function(e,_,S){var E=_?function(_,S,T,M){e(_,S,T,M),k.remove(E)}:e;return k.remove(e),B[S?"unshift":"push"](E),_wake(),E},remove:function(e,_){~(_=B.indexOf(e))&&B.splice(_,1)&&T>=_&&T--},_listeners:B},k}(),_wake=function(){return!bt&&cr.wake()},hr={},dr=/^[\d.\-M][\d.\-,\s]/,fr=/["']/g,_parseObjectInString=function(e){for(var _,S,k,E={},T=e.substr(1,e.length-3).split(":"),M=T[0],I=1,R=T.length;I<R;I++)S=T[I],_=I!==R-1?S.lastIndexOf(","):S.length,k=S.substr(0,_),E[M]=isNaN(k)?k.replace(fr,"").trim():+k,M=S.substr(_+1).trim();return E},_invertEase=function(e){return function(_){return 1-e(1-_)}},pr=function _propagateYoyoEase(e,_){for(var S,k=e._first;k;)k instanceof yr?_propagateYoyoEase(k,_):!k.vars.yoyoEase||k._yoyo&&k._repeat||k._yoyo===_||(k.timeline?_propagateYoyoEase(k.timeline,_):(S=k._ease,k._ease=k._yEase,k._yEase=S,k._yoyo=_)),k=k._next},_parseEase=function(e,_){return e&&(_isFunction(e)?e:hr[e]||function(e){var _,S,k,E,T=(e+"").split("("),M=hr[T[0]];return M&&T.length>1&&M.config?M.config.apply(null,~e.indexOf("{")?[_parseObjectInString(T[1])]:(_=e,S=_.indexOf("(")+1,k=_.indexOf(")"),E=_.indexOf("(",S),_.substring(S,~E&&E<k?_.indexOf(")",k+1):k)).split(",").map(_numericIfPossible)):hr._CE&&dr.test(e)?hr._CE("",e):M}(e))||_},_insertEase=function(e,_,S,k){void 0===S&&(S=function(e){return 1-_(1-e)}),void 0===k&&(k=function(e){return e<.5?_(2*e)/2:1-_(2*(1-e))/2});var E,T={easeIn:_,easeOut:S,easeInOut:k};return _forEachName(e,function(e){for(var _ in hr[e]=zt[e]=T,hr[E=e.toLowerCase()]=S,T)hr[E+("easeIn"===_?".in":"easeOut"===_?".out":".inOut")]=hr[e+"."+_]=T[_]}),T},_easeInOutFromOut=function(e){return function(_){return _<.5?(1-e(1-2*_))/2:.5+e(2*(_-.5))/2}},vr=function _configElastic(e,_,S){var k=_>=1?_:1,E=(S||(e?.3:.45))/(_<1?_:1),T=E/Ct*(Math.asin(1/k)||0),easeOut=function(e){return 1===e?1:k*Math.pow(2,-10*e)*It((e-T)*E)+1},M="out"===e?easeOut:"in"===e?function(e){return 1-easeOut(1-e)}:_easeInOutFromOut(easeOut);return E=Ct/E,M.config=function(_,S){return _configElastic(e,_,S)},M},gr=function _configBack(e,_){void 0===_&&(_=1.70158);var easeOut=function(e){return e?--e*e*((_+1)*e+_)+1:0},S="out"===e?easeOut:"in"===e?function(e){return 1-easeOut(1-e)}:_easeInOutFromOut(easeOut);return S.config=function(_){return _configBack(e,_)},S};_forEachName("Linear,Quad,Cubic,Quart,Quint,Strong",function(e,_){var S=_<5?_+1:_;_insertEase(e+",Power"+(S-1),_?function(e){return Math.pow(e,S)}:function(e){return e},function(e){return 1-Math.pow(1-e,S)},function(e){return e<.5?Math.pow(2*e,S)/2:1-Math.pow(2*(1-e),S)/2})}),hr.Linear.easeNone=hr.none=hr.Linear.easeIn,_insertEase("Elastic",vr("in"),vr("out"),vr()),function(e,_){var S=1/_,k=2*S,E=2.5*S,easeOut=function(T){return T<S?e*T*T:T<k?e*Math.pow(T-1.5/_,2)+.75:T<E?e*(T-=2.25/_)*T+.9375:e*Math.pow(T-2.625/_,2)+.984375};_insertEase("Bounce",function(e){return 1-easeOut(1-e)},easeOut)}(7.5625,2.75),_insertEase("Expo",function(e){return Math.pow(2,10*(e-1))*e+e*e*e*e*e*e*(1-e)}),_insertEase("Circ",function(e){return-(Tt(1-e*e)-1)}),_insertEase("Sine",function(e){return 1===e?1:1-Mt(e*At)}),_insertEase("Back",gr("in"),gr("out"),gr()),hr.SteppedEase=hr.steps=zt.SteppedEase={config:function(e,_){void 0===e&&(e=1);var S=1/e,k=e+(_?0:1),E=_?1:0;return function(e){return((k*_clamp(0,.99999999,e)|0)+E)*S}}},wt.ease=hr["quad.out"],_forEachName("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(e){return Zt+=e+","+e+"Params,"});var GSCache=function(e,_){this.id=Et++,e._gsap=this,this.target=e,this.harness=_,this.get=_?_.get:_getProperty,this.set=_?_.getSetter:_getSetter},mr=function(){function Animation(e){this.vars=e,this._delay=+e.delay||0,(this._repeat=e.repeat===1/0?-2:e.repeat||0)&&(this._rDelay=e.repeatDelay||0,this._yoyo=!!e.yoyo||!!e.yoyoEase),this._ts=1,_setDuration(this,+e.duration,1,1),this.data=e.data,dt&&(this._ctx=dt,dt.data.push(this)),bt||cr.wake()}var e=Animation.prototype;return e.delay=function(e){return e||0===e?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+e-this._delay),this._delay=e,this):this._delay},e.duration=function(e){return arguments.length?this.totalDuration(this._repeat>0?e+(e+this._rDelay)*this._repeat:e):this.totalDuration()&&this._dur},e.totalDuration=function(e){return arguments.length?(this._dirty=0,_setDuration(this,this._repeat<0?e:(e-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(e,_){if(_wake(),!arguments.length)return this._tTime;var S=this._dp;if(S&&S.smoothChildTiming&&this._ts){for(_alignPlayhead(this,e),!S._dp||S.parent||_postAddChecks(S,this);S&&S.parent;)S.parent._time!==S._start+(S._ts>=0?S._tTime/S._ts:(S.totalDuration()-S._tTime)/-S._ts)&&S.totalTime(S._tTime,!0),S=S.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&e<this._tDur||this._ts<0&&e>0||!this._tDur&&!e)&&_addToTimeline(this._dp,this,this._start-this._delay)}return(this._tTime!==e||!this._dur&&!_||this._initted&&Math.abs(this._zTime)===kt||!e&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=e),_lazySafeRender(this,e,_)),this},e.time=function(e,_){return arguments.length?this.totalTime(Math.min(this.totalDuration(),e+_elapsedCycleDuration(this))%(this._dur+this._rDelay)||(e?this._dur:0),_):this._time},e.totalProgress=function(e,_){return arguments.length?this.totalTime(this.totalDuration()*e,_):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},e.progress=function(e,_){return arguments.length?this.totalTime(this.duration()*(!this._yoyo||1&this.iteration()?e:1-e)+_elapsedCycleDuration(this),_):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},e.iteration=function(e,_){var S=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(e-1)*S,_):this._repeat?_animationCycle(this._tTime,S)+1:1},e.timeScale=function(e,_){if(!arguments.length)return-1e-8===this._rts?0:this._rts;if(this._rts===e)return this;var S=this.parent&&this._ts?_parentToChildTotalTime(this.parent._time,this):this._tTime;return this._rts=+e||0,this._ts=this._ps||-1e-8===e?0:this._rts,this.totalTime(_clamp(-Math.abs(this._delay),this.totalDuration(),S),!1!==_),_setEnd(this),function(e){for(var _=e.parent;_&&_.parent;)_._dirty=1,_.totalDuration(),_=_.parent;return e}(this)},e.paused=function(e){return arguments.length?(this._ps!==e&&(this._ps=e,e?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(_wake(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,1===this.progress()&&Math.abs(this._zTime)!==kt&&(this._tTime-=kt)))),this):this._ps},e.startTime=function(e){if(arguments.length){this._start=e;var _=this.parent||this._dp;return _&&(_._sort||!this.parent)&&_addToTimeline(_,this,e-this._delay),this}return this._start},e.endTime=function(e){return this._start+(_isNotFalse(e)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(e){var _=this.parent||this._dp;return _?e&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?_parentToChildTotalTime(_.rawTime(e),this):this._tTime:this._tTime},e.revert=function(e){void 0===e&&(e=Ht);var _=ht;return ht=e,_isRevertWorthy(this)&&(this.timeline&&this.timeline.revert(e),this.totalTime(-.01,e.suppressEvents)),"nested"!==this.data&&!1!==e.kill&&this.kill(),ht=_,this},e.globalTime=function(e){for(var _=this,S=arguments.length?e:_.rawTime();_;)S=_._start+S/(Math.abs(_._ts)||1),_=_._dp;return!this.parent&&this._sat?this._sat.globalTime(e):S},e.repeat=function(e){return arguments.length?(this._repeat=e===1/0?-2:e,_onUpdateTotalDuration(this)):-2===this._repeat?1/0:this._repeat},e.repeatDelay=function(e){if(arguments.length){var _=this._time;return this._rDelay=e,_onUpdateTotalDuration(this),_?this.time(_):this}return this._rDelay},e.yoyo=function(e){return arguments.length?(this._yoyo=e,this):this._yoyo},e.seek=function(e,_){return this.totalTime(nr(this,e),_isNotFalse(_))},e.restart=function(e,_){return this.play().totalTime(e?-this._delay:0,_isNotFalse(_)),this._dur||(this._zTime=-1e-8),this},e.play=function(e,_){return null!=e&&this.seek(e,_),this.reversed(!1).paused(!1)},e.reverse=function(e,_){return null!=e&&this.seek(e||this.totalDuration(),_),this.reversed(!0).paused(!1)},e.pause=function(e,_){return null!=e&&this.seek(e,_),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(e){return arguments.length?(!!e!==this.reversed()&&this.timeScale(-this._rts||(e?-1e-8:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-1e-8,this},e.isActive=function(){var e,_=this.parent||this._dp,S=this._start;return!(_&&!(this._ts&&this._initted&&_.isActive()&&(e=_.rawTime(!0))>=S&&e<this.endTime(!0)-kt))},e.eventCallback=function(e,_,S){var k=this.vars;return arguments.length>1?(_?(k[e]=_,S&&(k[e+"Params"]=S),"onUpdate"===e&&(this._onUpdate=_)):delete k[e],this):k[e]},e.then=function(e){var _=this;return new Promise(function(S){var k=_isFunction(e)?e:_passThrough,_resolve=function(){var e=_.then;_.then=null,_isFunction(k)&&(k=k(_))&&(k.then||k===_)&&(_.then=e),S(k),_.then=e};_._initted&&1===_.totalProgress()&&_._ts>=0||!_._tTime&&_._ts<0?_resolve():_._prom=_resolve})},e.kill=function(){_interrupt(this)},Animation}();_setDefaults(mr.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-1e-8,_prom:0,_ps:!1,_rts:1});var yr=function(e){function Timeline(_,S){var k;return void 0===_&&(_={}),(k=e.call(this,_)||this).labels={},k.smoothChildTiming=!!_.smoothChildTiming,k.autoRemoveChildren=!!_.autoRemoveChildren,k._sort=_isNotFalse(_.sortChildren),ft&&_addToTimeline(_.parent||ft,_assertThisInitialized(k),S),_.reversed&&k.reverse(),_.paused&&k.paused(!0),_.scrollTrigger&&_scrollTrigger(_assertThisInitialized(k),_.scrollTrigger),k}_inheritsLoose(Timeline,e);var _=Timeline.prototype;return _.to=function(e,_,S){return _createTweenType(0,arguments,this),this},_.from=function(e,_,S){return _createTweenType(1,arguments,this),this},_.fromTo=function(e,_,S,k){return _createTweenType(2,arguments,this),this},_.set=function(e,_,S){return _.duration=0,_.parent=this,_inheritDefaults(_).repeatDelay||(_.repeat=0),_.immediateRender=!!_.immediateRender,new kr(e,_,nr(this,S),1),this},_.call=function(e,_,S){return _addToTimeline(this,kr.delayedCall(0,e,_),S)},_.staggerTo=function(e,_,S,k,E,T,M){return S.duration=_,S.stagger=S.stagger||k,S.onComplete=T,S.onCompleteParams=M,S.parent=this,new kr(e,S,nr(this,E)),this},_.staggerFrom=function(e,_,S,k,E,T,M){return S.runBackwards=1,_inheritDefaults(S).immediateRender=_isNotFalse(S.immediateRender),this.staggerTo(e,_,S,k,E,T,M)},_.staggerFromTo=function(e,_,S,k,E,T,M,I){return k.startAt=S,_inheritDefaults(k).immediateRender=_isNotFalse(k.immediateRender),this.staggerTo(e,_,k,E,T,M,I)},_.render=function(e,_,S){var k,E,T,M,I,R,O,D,L,U,B,z,G=this._time,j=this._dirty?this.totalDuration():this._tDur,V=this._dur,H=e<=0?0:_roundPrecise(e),W=this._zTime<0!=e<0&&(this._initted||!V);if(this!==ft&&H>j&&e>=0&&(H=j),H!==this._tTime||S||W){if(G!==this._time&&V&&(H+=this._time-G,e+=this._time-G),k=H,L=this._start,R=!(D=this._ts),W&&(V||(G=this._zTime),(e||!_)&&(this._zTime=e)),this._repeat){if(B=this._yoyo,I=V+this._rDelay,this._repeat<-1&&e<0)return this.totalTime(100*I+e,_,S);if(k=_roundPrecise(H%I),H===j?(M=this._repeat,k=V):((M=~~(U=_roundPrecise(H/I)))&&M===U&&(k=V,M--),k>V&&(k=V)),U=_animationCycle(this._tTime,I),!G&&this._tTime&&U!==M&&this._tTime-U*I-this._dur<=0&&(U=M),B&&1&M&&(k=V-k,z=1),M!==U&&!this._lock){var q=B&&1&U,X=q===(B&&1&M);if(M<U&&(q=!q),G=q?0:H%V?V:H,this._lock=1,this.render(G||(z?0:_roundPrecise(M*I)),_,!V)._lock=0,this._tTime=H,!_&&this.parent&&_callback(this,"onRepeat"),this.vars.repeatRefresh&&!z&&(this.invalidate()._lock=1),G&&G!==this._time||R!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(V=this._dur,j=this._tDur,X&&(this._lock=2,G=q?V:-1e-4,this.render(G,!0),this.vars.repeatRefresh&&!z&&this.invalidate()),this._lock=0,!this._ts&&!R)return this;pr(this,z)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(O=function(e,_,S){var k;if(S>_)for(k=e._first;k&&k._start<=S;){if("isPause"===k.data&&k._start>_)return k;k=k._next}else for(k=e._last;k&&k._start>=S;){if("isPause"===k.data&&k._start<_)return k;k=k._prev}}(this,_roundPrecise(G),_roundPrecise(k)),O&&(H-=k-(k=O._start))),this._tTime=H,this._time=k,this._act=!D,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=e,G=0),!G&&H&&!_&&!U&&(_callback(this,"onStart"),this._tTime!==H))return this;if(k>=G&&e>=0)for(E=this._first;E;){if(T=E._next,(E._act||k>=E._start)&&E._ts&&O!==E){if(E.parent!==this)return this.render(e,_,S);if(E.render(E._ts>0?(k-E._start)*E._ts:(E._dirty?E.totalDuration():E._tDur)+(k-E._start)*E._ts,_,S),k!==this._time||!this._ts&&!R){O=0,T&&(H+=this._zTime=-1e-8);break}}E=T}else{E=this._last;for(var Y=e<0?e:k;E;){if(T=E._prev,(E._act||Y<=E._end)&&E._ts&&O!==E){if(E.parent!==this)return this.render(e,_,S);if(E.render(E._ts>0?(Y-E._start)*E._ts:(E._dirty?E.totalDuration():E._tDur)+(Y-E._start)*E._ts,_,S||ht&&_isRevertWorthy(E)),k!==this._time||!this._ts&&!R){O=0,T&&(H+=this._zTime=Y?-1e-8:kt);break}}E=T}}if(O&&!_&&(this.pause(),O.render(k>=G?0:-1e-8)._zTime=k>=G?1:-1,this._ts))return this._start=L,_setEnd(this),this.render(e,_,S);this._onUpdate&&!_&&_callback(this,"onUpdate",!0),(H===j&&this._tTime>=this.totalDuration()||!H&&G)&&(L!==this._start&&Math.abs(D)===Math.abs(this._ts)||this._lock||((e||!V)&&(H===j&&this._ts>0||!H&&this._ts<0)&&_removeFromParent(this,1),_||e<0&&!G||!H&&!G&&j||(_callback(this,H===j&&e>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(H<j&&this.timeScale()>0)&&this._prom())))}return this},_.add=function(e,_){var S=this;if(_isNumber(_)||(_=nr(this,_,e)),!(e instanceof mr)){if(Pt(e))return e.forEach(function(e){return S.add(e,_)}),this;if(_isString(e))return this.addLabel(e,_);if(!_isFunction(e))return this;e=kr.delayedCall(0,e)}return this!==e?_addToTimeline(this,e,_):this},_.getChildren=function(e,_,S,k){void 0===e&&(e=!0),void 0===_&&(_=!0),void 0===S&&(S=!0),void 0===k&&(k=-1e8);for(var E=[],T=this._first;T;)T._start>=k&&(T instanceof kr?_&&E.push(T):(S&&E.push(T),e&&E.push.apply(E,T.getChildren(!0,_,S)))),T=T._next;return E},_.getById=function(e){for(var _=this.getChildren(1,1,1),S=_.length;S--;)if(_[S].vars.id===e)return _[S]},_.remove=function(e){return _isString(e)?this.removeLabel(e):_isFunction(e)?this.killTweensOf(e):(e.parent===this&&_removeLinkedListItem(this,e),e===this._recent&&(this._recent=this._last),_uncache(this))},_.totalTime=function(_,S){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=_roundPrecise(cr.time-(this._ts>0?_/this._ts:(this.totalDuration()-_)/-this._ts))),e.prototype.totalTime.call(this,_,S),this._forcing=0,this):this._tTime},_.addLabel=function(e,_){return this.labels[e]=nr(this,_),this},_.removeLabel=function(e){return delete this.labels[e],this},_.addPause=function(e,_,S){var k=kr.delayedCall(0,_||_emptyFunc,S);return k.data="isPause",this._hasPause=1,_addToTimeline(this,k,nr(this,e))},_.removePause=function(e){var _=this._first;for(e=nr(this,e);_;)_._start===e&&"isPause"===_.data&&_removeFromParent(_),_=_._next},_.killTweensOf=function(e,_,S){for(var k=this.getTweensOf(e,S),E=k.length;E--;)_r!==k[E]&&k[E].kill(e,_);return this},_.getTweensOf=function(e,_){for(var S,k=[],E=toArray$2(e),T=this._first,M=_isNumber(_);T;)T instanceof kr?_arrayContainsAny(T._targets,E)&&(M?(!_r||T._initted&&T._ts)&&T.globalTime(0)<=_&&T.globalTime(T.totalDuration())>_:!_||T.isActive())&&k.push(T):(S=T.getTweensOf(E,_)).length&&k.push.apply(k,S),T=T._next;return k},_.tweenTo=function(e,_){_=_||{};var S,k=this,E=nr(k,e),T=_,M=T.startAt,I=T.onStart,R=T.onStartParams,O=T.immediateRender,D=kr.to(k,_setDefaults({ease:_.ease||"none",lazy:!1,immediateRender:!1,time:E,overwrite:"auto",duration:_.duration||Math.abs((E-(M&&"time"in M?M.time:k._time))/k.timeScale())||kt,onStart:function(){if(k.pause(),!S){var e=_.duration||Math.abs((E-(M&&"time"in M?M.time:k._time))/k.timeScale());D._dur!==e&&_setDuration(D,e,0,1).render(D._time,!0,!0),S=1}I&&I.apply(D,R||[])}},_));return O?D.render(0):D},_.tweenFromTo=function(e,_,S){return this.tweenTo(_,_setDefaults({startAt:{time:nr(this,e)}},S))},_.recent=function(){return this._recent},_.nextLabel=function(e){return void 0===e&&(e=this._time),_getLabelInDirection(this,nr(this,e))},_.previousLabel=function(e){return void 0===e&&(e=this._time),_getLabelInDirection(this,nr(this,e),1)},_.currentLabel=function(e){return arguments.length?this.seek(e,!0):this.previousLabel(this._time+kt)},_.shiftChildren=function(e,_,S){void 0===S&&(S=0);for(var k,E=this._first,T=this.labels;E;)E._start>=S&&(E._start+=e,E._end+=e),E=E._next;if(_)for(k in T)T[k]>=S&&(T[k]+=e);return _uncache(this)},_.invalidate=function(_){var S=this._first;for(this._lock=0;S;)S.invalidate(_),S=S._next;return e.prototype.invalidate.call(this,_)},_.clear=function(e){void 0===e&&(e=!0);for(var _,S=this._first;S;)_=S._next,this.remove(S),S=_;return this._dp&&(this._time=this._tTime=this._pTime=0),e&&(this.labels={}),_uncache(this)},_.totalDuration=function(e){var _,S,k,E=0,T=this,M=T._last,I=xt;if(arguments.length)return T.timeScale((T._repeat<0?T.duration():T.totalDuration())/(T.reversed()?-e:e));if(T._dirty){for(k=T.parent;M;)_=M._prev,M._dirty&&M.totalDuration(),(S=M._start)>I&&T._sort&&M._ts&&!T._lock?(T._lock=1,_addToTimeline(T,M,S-M._delay,1)._lock=0):I=S,S<0&&M._ts&&(E-=S,(!k&&!T._dp||k&&k.smoothChildTiming)&&(T._start+=S/T._ts,T._time-=S,T._tTime-=S),T.shiftChildren(-S,!1,-1/0),I=0),M._end>E&&M._ts&&(E=M._end),M=_;_setDuration(T,T===ft&&T._time>E?T._time:E,1,1),T._dirty=0}return T._tDur},Timeline.updateRoot=function(e){if(ft._ts&&(_lazySafeRender(ft,_parentToChildTotalTime(e,ft)),yt=cr.frame),cr.frame>=Jt){Jt+=St.autoSleep||120;var _=ft._first;if((!_||!_._ts)&&St.autoSleep&&cr._listeners.length<2){for(;_&&!_._ts;)_=_._next;_||cr.sleep()}}},Timeline}(mr);_setDefaults(yr.prototype,{_lock:0,_hasPause:0,_forcing:0});var _r,br,_addComplexStringPropTween=function(e,_,S,k,E,T,M){var I,R,O,D,L,U,B,z,G=new Cr(this._pt,e,_,0,1,_renderComplexString,null,E),j=0,V=0;for(G.b=S,G.e=k,S+="",(B=~(k+="").indexOf("random("))&&(k=_replaceRandom(k)),T&&(T(z=[S,k],e,_),S=z[0],k=z[1]),R=S.match(Ft)||[];I=Ft.exec(k);)D=I[0],L=k.substring(j,I.index),O?O=(O+1)%5:"rgba("===L.substr(-5)&&(O=1),D!==R[V++]&&(U=parseFloat(R[V-1])||0,G._pt={_next:G._pt,p:L||1===V?L:",",s:U,c:"="===D.charAt(1)?_parseRelative(U,D)-U:parseFloat(D)-U,m:O&&O<4?Math.round:0},j=Ft.lastIndex);return G.c=j<k.length?k.substring(j,k.length):"",G.fp=M,(Ut.test(k)||B)&&(G.e=0),this._pt=G,G},_addPropTween=function(e,_,S,k,E,T,M,I,R,O){_isFunction(k)&&(k=k(E||0,e,T));var D,L=e[_],U="get"!==S?S:_isFunction(L)?R?e[_.indexOf("set")||!_isFunction(e["get"+_.substr(3)])?_:"get"+_.substr(3)](R):e[_]():L,B=_isFunction(L)?R?_setterFuncWithParam:_setterFunc:_setterPlain;if(_isString(k)&&(~k.indexOf("random(")&&(k=_replaceRandom(k)),"="===k.charAt(1)&&((D=_parseRelative(U,k)+(getUnit(U)||0))||0===D)&&(k=D)),!O||U!==k||br)return isNaN(U*k)||""===k?_addComplexStringPropTween.call(this,e,_,U,k,B,I||St.stringFilter,R):(D=new Cr(this._pt,e,_,+U||0,k-(U||0),"boolean"==typeof L?_renderBoolean:_renderPlain,0,B),R&&(D.fp=R),M&&D.modifier(M,this,e),this._pt=D)},_checkPlugin=function(e,_,S,k,E,T){var M,I,R,O;if(Yt[e]&&!1!==(M=new Yt[e]).init(E,M.rawVars?_[e]:function(e,_,S,k,E){if(_isFunction(e)&&(e=_parseFuncOrString(e,E,_,S,k)),!_isObject(e)||e.style&&e.nodeType||Pt(e)||Rt(e))return _isString(e)?_parseFuncOrString(e,E,_,S,k):e;var T,M={};for(T in e)M[T]=_parseFuncOrString(e[T],E,_,S,k);return M}(_[e],k,E,T,S),S,k,T)&&(S._pt=I=new Cr(S._pt,E,e,0,1,M.render,M,0,M.priority),S!==_t))for(R=S._ptLookup[S._targets.indexOf(E)],O=M._props.length;O--;)R[M._props[O]]=I;return M},Sr=function _initTween(e,_,S){var k,E,T,M,I,R,O,D,L,U,B,z,G,j=e.vars,V=j.ease,H=j.startAt,W=j.immediateRender,q=j.lazy,X=j.onUpdate,Y=j.runBackwards,K=j.yoyoEase,J=j.keyframes,Q=j.autoRevert,Z=e._dur,$=e._startAt,ee=e._targets,te=e.parent,re=te&&"nested"===te.data?te.vars.targets:ee,ne="auto"===e._overwrite&&!ct,ie=e.timeline;if(ie&&(!J||!V)&&(V="none"),e._ease=_parseEase(V,wt.ease),e._yEase=K?_invertEase(_parseEase(!0===K?V:K,wt.ease)):0,K&&e._yoyo&&!e._repeat&&(K=e._yEase,e._yEase=e._ease,e._ease=K),e._from=!ie&&!!j.runBackwards,!ie||J&&!j.stagger){if(z=(D=ee[0]?_getCache(ee[0]).harness:0)&&j[D.prop],k=_copyExcluding(j,Wt),$&&($._zTime<0&&$.progress(1),_<0&&Y&&W&&!Q?$.render(-1,!0):$.revert(Y&&Z?Vt:jt),$._lazy=0),H){if(_removeFromParent(e._startAt=kr.set(ee,_setDefaults({data:"isStart",overwrite:!1,parent:te,immediateRender:!0,lazy:!$&&_isNotFalse(q),startAt:null,delay:0,onUpdate:X&&function(){return _callback(e,"onUpdate")},stagger:0},H))),e._startAt._dp=0,e._startAt._sat=e,_<0&&(ht||!W&&!Q)&&e._startAt.revert(Vt),W&&Z&&_<=0&&S<=0)return void(_&&(e._zTime=_))}else if(Y&&Z&&!$)if(_&&(W=!1),T=_setDefaults({overwrite:!1,data:"isFromStart",lazy:W&&!$&&_isNotFalse(q),immediateRender:W,stagger:0,parent:te},k),z&&(T[D.prop]=z),_removeFromParent(e._startAt=kr.set(ee,T)),e._startAt._dp=0,e._startAt._sat=e,_<0&&(ht?e._startAt.revert(Vt):e._startAt.render(-1,!0)),e._zTime=_,W){if(!_)return}else _initTween(e._startAt,kt,kt);for(e._pt=e._ptCache=0,q=Z&&_isNotFalse(q)||q&&!Z,E=0;E<ee.length;E++){if(O=(I=ee[E])._gsap||_harness(ee)[E]._gsap,e._ptLookup[E]=U={},Xt[O.id]&&qt.length&&_lazyRender(),B=re===ee?E:re.indexOf(I),D&&!1!==(L=new D).init(I,z||k,e,B,re)&&(e._pt=M=new Cr(e._pt,I,L.name,0,1,L.render,L,0,L.priority),L._props.forEach(function(e){U[e]=M}),L.priority&&(R=1)),!D||z)for(T in k)Yt[T]&&(L=_checkPlugin(T,k,e,B,I,re))?L.priority&&(R=1):U[T]=M=_addPropTween.call(e,I,T,"get",k[T],B,re,0,j.stringFilter);e._op&&e._op[E]&&e.kill(I,e._op[E]),ne&&e._pt&&(_r=e,ft.killTweensOf(I,U,e.globalTime(_)),G=!e.parent,_r=0),e._pt&&q&&(Xt[O.id]=1)}R&&_sortPropTweensByPriority(e),e._onInit&&e._onInit(e)}e._onUpdate=X,e._initted=(!e._op||e._pt)&&!G,J&&_<=0&&ie.render(xt,!0,!0)},_parseKeyframe=function(e,_,S,k){var E,T,M=_.ease||k||"power1.inOut";if(Pt(_))T=S[e]||(S[e]=[]),_.forEach(function(e,S){return T.push({t:S/(_.length-1)*100,v:e,e:M})});else for(E in _)T=S[E]||(S[E]=[]),"ease"===E||T.push({t:parseFloat(e),v:_[E],e:M})},_parseFuncOrString=function(e,_,S,k,E){return _isFunction(e)?e.call(_,S,k,E):_isString(e)&&~e.indexOf("random(")?_replaceRandom(e):e},wr=Zt+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",xr={};_forEachName(wr+",id,stagger,delay,duration,paused,scrollTrigger",function(e){return xr[e]=1});var kr=function(e){function Tween(_,S,k,E){var T;"number"==typeof S&&(k.duration=S,S=k,k=null);var M,I,R,O,D,L,U,B,z=(T=e.call(this,E?S:_inheritDefaults(S))||this).vars,G=z.duration,j=z.delay,V=z.immediateRender,H=z.stagger,W=z.overwrite,q=z.keyframes,X=z.defaults,Y=z.scrollTrigger,K=z.yoyoEase,J=S.parent||ft,Q=(Pt(_)||Rt(_)?_isNumber(_[0]):"length"in S)?[_]:toArray$2(_);if(T._targets=Q.length?_harness(Q):_warn(0,!St.nullTargetWarn)||[],T._ptLookup=[],T._overwrite=W,q||H||_isFuncOrString(G)||_isFuncOrString(j)){if(S=T.vars,(M=T.timeline=new yr({data:"nested",defaults:X||{},targets:J&&"nested"===J.data?J.vars.targets:Q})).kill(),M.parent=M._dp=_assertThisInitialized(T),M._start=0,H||_isFuncOrString(G)||_isFuncOrString(j)){if(O=Q.length,U=H&&distribute(H),_isObject(H))for(D in H)~wr.indexOf(D)&&(B||(B={}),B[D]=H[D]);for(I=0;I<O;I++)(R=_copyExcluding(S,xr)).stagger=0,K&&(R.yoyoEase=K),B&&_merge(R,B),L=Q[I],R.duration=+_parseFuncOrString(G,_assertThisInitialized(T),I,L,Q),R.delay=(+_parseFuncOrString(j,_assertThisInitialized(T),I,L,Q)||0)-T._delay,!H&&1===O&&R.delay&&(T._delay=j=R.delay,T._start+=j,R.delay=0),M.to(L,R,U?U(I,L,Q):0),M._ease=hr.none;M.duration()?G=j=0:T.timeline=0}else if(q){_inheritDefaults(_setDefaults(M.vars.defaults,{ease:"none"})),M._ease=_parseEase(q.ease||S.ease||"none");var Z,$,ee,te=0;if(Pt(q))q.forEach(function(e){return M.to(Q,e,">")}),M.duration();else{for(D in R={},q)"ease"===D||"easeEach"===D||_parseKeyframe(D,q[D],R,q.easeEach);for(D in R)for(Z=R[D].sort(function(e,_){return e.t-_.t}),te=0,I=0;I<Z.length;I++)(ee={ease:($=Z[I]).e,duration:($.t-(I?Z[I-1].t:0))/100*G})[D]=$.v,M.to(Q,ee,te),te+=ee.duration;M.duration()<G&&M.to({},{duration:G-M.duration()})}}G||T.duration(G=M.duration())}else T.timeline=0;return!0!==W||ct||(_r=_assertThisInitialized(T),ft.killTweensOf(Q),_r=0),_addToTimeline(J,_assertThisInitialized(T),k),S.reversed&&T.reverse(),S.paused&&T.paused(!0),(V||!G&&!q&&T._start===_roundPrecise(J._time)&&_isNotFalse(V)&&er(_assertThisInitialized(T))&&"nested"!==J.data)&&(T._tTime=-1e-8,T.render(Math.max(0,-j)||0)),Y&&_scrollTrigger(_assertThisInitialized(T),Y),T}_inheritsLoose(Tween,e);var _=Tween.prototype;return _.render=function(e,_,S){var k,E,T,M,I,R,O,D,L,U=this._time,B=this._tDur,z=this._dur,G=e<0,j=e>B-kt&&!G?B:e<kt?0:e;if(z){if(j!==this._tTime||!e||S||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==G||this._lazy){if(k=j,D=this.timeline,this._repeat){if(M=z+this._rDelay,this._repeat<-1&&G)return this.totalTime(100*M+e,_,S);if(k=_roundPrecise(j%M),j===B?(T=this._repeat,k=z):(T=~~(I=_roundPrecise(j/M)))&&T===I?(k=z,T--):k>z&&(k=z),(R=this._yoyo&&1&T)&&(L=this._yEase,k=z-k),I=_animationCycle(this._tTime,M),k===U&&!S&&this._initted&&T===I)return this._tTime=j,this;T!==I&&(D&&this._yEase&&pr(D,R),this.vars.repeatRefresh&&!R&&!this._lock&&k!==M&&this._initted&&(this._lock=S=1,this.render(_roundPrecise(M*T),!0).invalidate()._lock=0))}if(!this._initted){if(_attemptInitTween(this,G?e:k,S,_,j))return this._tTime=0,this;if(!(U===this._time||S&&this.vars.repeatRefresh&&T!==I))return this;if(z!==this._dur)return this.render(e,_,S)}if(this._tTime=j,this._time=k,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=O=(L||this._ease)(k/z),this._from&&(this.ratio=O=1-O),!U&&j&&!_&&!I&&(_callback(this,"onStart"),this._tTime!==j))return this;for(E=this._pt;E;)E.r(O,E.d),E=E._next;D&&D.render(e<0?e:D._dur*D._ease(k/this._dur),_,S)||this._startAt&&(this._zTime=e),this._onUpdate&&!_&&(G&&_rewindStartAt(this,e,0,S),_callback(this,"onUpdate")),this._repeat&&T!==I&&this.vars.onRepeat&&!_&&this.parent&&_callback(this,"onRepeat"),j!==this._tDur&&j||this._tTime!==j||(G&&!this._onUpdate&&_rewindStartAt(this,e,0,!0),(e||!z)&&(j===this._tDur&&this._ts>0||!j&&this._ts<0)&&_removeFromParent(this,1),_||G&&!U||!(j||U||R)||(_callback(this,j===B?"onComplete":"onReverseComplete",!0),this._prom&&!(j<B&&this.timeScale()>0)&&this._prom()))}}else!function(e,_,S,k){var E,T,M,I=e.ratio,R=_<0||!_&&(!e._start&&tr(e)&&(e._initted||!_isFromOrFromStart(e))||(e._ts<0||e._dp._ts<0)&&!_isFromOrFromStart(e))?0:1,O=e._rDelay,D=0;if(O&&e._repeat&&(D=_clamp(0,e._tDur,_),T=_animationCycle(D,O),e._yoyo&&1&T&&(R=1-R),T!==_animationCycle(e._tTime,O)&&(I=1-R,e.vars.repeatRefresh&&e._initted&&e.invalidate())),R!==I||ht||k||e._zTime===kt||!_&&e._zTime){if(!e._initted&&_attemptInitTween(e,_,k,S,D))return;for(M=e._zTime,e._zTime=_||(S?kt:0),S||(S=_&&!M),e.ratio=R,e._from&&(R=1-R),e._time=0,e._tTime=D,E=e._pt;E;)E.r(R,E.d),E=E._next;_<0&&_rewindStartAt(e,_,0,!0),e._onUpdate&&!S&&_callback(e,"onUpdate"),D&&e._repeat&&!S&&e.parent&&_callback(e,"onRepeat"),(_>=e._tDur||_<0)&&e.ratio===R&&(R&&_removeFromParent(e,1),S||ht||(_callback(e,R?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=_)}(this,e,_,S);return this},_.targets=function(){return this._targets},_.invalidate=function(_){return(!_||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(_),e.prototype.invalidate.call(this,_)},_.resetTo=function(e,_,S,k,E){bt||cr.wake(),this._ts||this.play();var T=Math.min(this._dur,(this._dp._time-this._start)*this._ts);return this._initted||Sr(this,T),function(e,_,S,k,E,T,M,I){var R,O,D,L,U=(e._pt&&e._ptCache||(e._ptCache={}))[_];if(!U)for(U=e._ptCache[_]=[],D=e._ptLookup,L=e._targets.length;L--;){if((R=D[L][_])&&R.d&&R.d._pt)for(R=R.d._pt;R&&R.p!==_&&R.fp!==_;)R=R._next;if(!R)return br=1,e.vars[_]="+=0",Sr(e,M),br=0,I?_warn():1;U.push(R)}for(L=U.length;L--;)(R=(O=U[L])._pt||O).s=!k&&0!==k||E?R.s+(k||0)+T*R.c:k,R.c=S-R.s,O.e&&(O.e=_round(S)+getUnit(O.e)),O.b&&(O.b=R.s+getUnit(O.b))}(this,e,_,S,k,this._ease(T/this._dur),T,E)?this.resetTo(e,_,S,k,1):(_alignPlayhead(this,0),this.parent||_addLinkedListItem(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},_.kill=function(e,_){if(void 0===_&&(_="all"),!(e||_&&"all"!==_))return this._lazy=this._pt=0,this.parent?_interrupt(this):this.scrollTrigger&&this.scrollTrigger.kill(!!ht),this;if(this.timeline){var S=this.timeline.totalDuration();return this.timeline.killTweensOf(e,_,_r&&!0!==_r.vars.overwrite)._first||_interrupt(this),this.parent&&S!==this.timeline.totalDuration()&&_setDuration(this,this._dur*this.timeline._tDur/S,0,1),this}var k,E,T,M,I,R,O,D=this._targets,L=e?toArray$2(e):D,U=this._ptLookup,B=this._pt;if((!_||"all"===_)&&function(e,_){for(var S=e.length,k=S===_.length;k&&S--&&e[S]===_[S];);return S<0}(D,L))return"all"===_&&(this._pt=0),_interrupt(this);for(k=this._op=this._op||[],"all"!==_&&(_isString(_)&&(I={},_forEachName(_,function(e){return I[e]=1}),_=I),_=function(e,_){var S,k,E,T,M=e[0]?_getCache(e[0]).harness:0,I=M&&M.aliases;if(!I)return _;for(k in S=_merge({},_),I)if(k in S)for(E=(T=I[k].split(",")).length;E--;)S[T[E]]=S[k];return S}(D,_)),O=D.length;O--;)if(~L.indexOf(D[O]))for(I in E=U[O],"all"===_?(k[O]=_,M=E,T={}):(T=k[O]=k[O]||{},M=_),M)(R=E&&E[I])&&("kill"in R.d&&!0!==R.d.kill(I)||_removeLinkedListItem(this,R,"_pt"),delete E[I]),"all"!==T&&(T[I]=1);return this._initted&&!this._pt&&B&&_interrupt(this),this},Tween.to=function(e,_){return new Tween(e,_,arguments[2])},Tween.from=function(e,_){return _createTweenType(1,arguments)},Tween.delayedCall=function(e,_,S,k){return new Tween(_,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:e,onComplete:_,onReverseComplete:_,onCompleteParams:S,onReverseCompleteParams:S,callbackScope:k})},Tween.fromTo=function(e,_,S){return _createTweenType(2,arguments)},Tween.set=function(e,_){return _.duration=0,_.repeatDelay||(_.repeat=0),new Tween(e,_)},Tween.killTweensOf=function(e,_,S){return ft.killTweensOf(e,_,S)},Tween}(mr);_setDefaults(kr.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),_forEachName("staggerTo,staggerFrom,staggerFromTo",function(e){kr[e]=function(){var _=new yr,S=ir.call(arguments,0);return S.splice("staggerFromTo"===e?5:4,0,0),_[e].apply(_,S)}});var _setterPlain=function(e,_,S){return e[_]=S},_setterFunc=function(e,_,S){return e[_](S)},_setterFuncWithParam=function(e,_,S,k){return e[_](k.fp,S)},_setterAttribute=function(e,_,S){return e.setAttribute(_,S)},_getSetter=function(e,_){return _isFunction(e[_])?_setterFunc:_isUndefined(e[_])&&e.setAttribute?_setterAttribute:_setterPlain},_renderPlain=function(e,_){return _.set(_.t,_.p,Math.round(1e6*(_.s+_.c*e))/1e6,_)},_renderBoolean=function(e,_){return _.set(_.t,_.p,!!(_.s+_.c*e),_)},_renderComplexString=function(e,_){var S=_._pt,k="";if(!e&&_.b)k=_.b;else if(1===e&&_.e)k=_.e;else{for(;S;)k=S.p+(S.m?S.m(S.s+S.c*e):Math.round(1e4*(S.s+S.c*e))/1e4)+k,S=S._next;k+=_.c}_.set(_.t,_.p,k,_)},_renderPropTweens=function(e,_){for(var S=_._pt;S;)S.r(e,S.d),S=S._next},_addPluginModifier=function(e,_,S,k){for(var E,T=this._pt;T;)E=T._next,T.p===k&&T.modifier(e,_,S),T=E},_killPropTweensOf=function(e){for(var _,S,k=this._pt;k;)S=k._next,k.p===e&&!k.op||k.op===e?_removeLinkedListItem(this,k,"_pt"):k.dep||(_=1),k=S;return!_},_setterWithModifier=function(e,_,S,k){k.mSet(e,_,k.m.call(k.tween,S,k.mt),k)},_sortPropTweensByPriority=function(e){for(var _,S,k,E,T=e._pt;T;){for(_=T._next,S=k;S&&S.pr>T.pr;)S=S._next;(T._prev=S?S._prev:E)?T._prev._next=T:k=T,(T._next=S)?S._prev=T:E=T,T=_}e._pt=k},Cr=function(){function PropTween(e,_,S,k,E,T,M,I,R){this.t=_,this.s=k,this.c=E,this.p=S,this.r=T||_renderPlain,this.d=M||this,this.set=I||_setterPlain,this.pr=R||0,this._next=e,e&&(e._prev=this)}return PropTween.prototype.modifier=function(e,_,S){this.mSet=this.mSet||this.set,this.set=_setterWithModifier,this.m=e,this.mt=S,this.tween=_},PropTween}();_forEachName(Zt+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(e){return Wt[e]=1}),zt.TweenMax=zt.TweenLite=kr,zt.TimelineLite=zt.TimelineMax=yr,ft=new yr({sortChildren:!1,defaults:wt,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),St.stringFilter=_colorStringFilter;var Ar=[],Er={},Tr=[],Mr=0,Ir=0,_dispatch=function(e){return(Er[e]||Tr).map(function(e){return e()})},_onMediaChange=function(){var e=Date.now(),_=[];e-Mr>2&&(_dispatch("matchMediaInit"),Ar.forEach(function(e){var S,k,E,T,M=e.queries,I=e.conditions;for(k in M)(S=pt.matchMedia(M[k]).matches)&&(E=1),S!==I[k]&&(I[k]=S,T=1);T&&(e.revert(),E&&_.push(e))}),_dispatch("matchMediaRevert"),_.forEach(function(e){return e.onMatch(e,function(_){return e.add(null,_)})}),Mr=e,_dispatch("matchMedia"))},Rr=function(){function Context(e,_){this.selector=_&&selector(_),this.data=[],this._r=[],this.isReverted=!1,this.id=Ir++,e&&this.add(e)}var e=Context.prototype;return e.add=function(e,_,S){_isFunction(e)&&(S=_,_=e,e=_isFunction);var k=this,f=function(){var e,E=dt,T=k.selector;return E&&E!==k&&E.data.push(k),S&&(k.selector=selector(S)),dt=k,e=_.apply(k,arguments),_isFunction(e)&&k._r.push(e),dt=E,k.selector=T,k.isReverted=!1,e};return k.last=f,e===_isFunction?f(k,function(e){return k.add(null,e)}):e?k[e]=f:f},e.ignore=function(e){var _=dt;dt=null,e(this),dt=_},e.getTweens=function(){var e=[];return this.data.forEach(function(_){return _ instanceof Context?e.push.apply(e,_.getTweens()):_ instanceof kr&&!(_.parent&&"nested"===_.parent.data)&&e.push(_)}),e},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(e,_){var S=this;if(e?function(){for(var _,k=S.getTweens(),E=S.data.length;E--;)"isFlip"===(_=S.data[E]).data&&(_.revert(),_.getChildren(!0,!0,!1).forEach(function(e){return k.splice(k.indexOf(e),1)}));for(k.map(function(e){return{g:e._dur||e._delay||e._sat&&!e._sat.vars.immediateRender?e.globalTime(0):-1/0,t:e}}).sort(function(e,_){return _.g-e.g||-1/0}).forEach(function(_){return _.t.revert(e)}),E=S.data.length;E--;)(_=S.data[E])instanceof yr?"nested"!==_.data&&(_.scrollTrigger&&_.scrollTrigger.revert(),_.kill()):!(_ instanceof kr)&&_.revert&&_.revert(e);S._r.forEach(function(_){return _(e,S)}),S.isReverted=!0}():this.data.forEach(function(e){return e.kill&&e.kill()}),this.clear(),_)for(var k=Ar.length;k--;)Ar[k].id===this.id&&Ar.splice(k,1)},e.revert=function(e){this.kill(e||{})},Context}(),Pr=function(){function MatchMedia(e){this.contexts=[],this.scope=e,dt&&dt.data.push(this)}var e=MatchMedia.prototype;return e.add=function(e,_,S){_isObject(e)||(e={matches:e});var k,E,T,M=new Rr(0,S||this.scope),I=M.conditions={};for(E in dt&&!M.selector&&(M.selector=dt.selector),this.contexts.push(M),_=M.add("onMatch",_),M.queries=e,e)"all"===E?T=1:(k=pt.matchMedia(e[E]))&&(Ar.indexOf(M)<0&&Ar.push(M),(I[E]=k.matches)&&(T=1),k.addListener?k.addListener(_onMediaChange):k.addEventListener("change",_onMediaChange));return T&&_(M,function(e){return M.add(null,e)}),this},e.revert=function(e){this.kill(e||{})},e.kill=function(e){this.contexts.forEach(function(_){return _.kill(e,!0)})},MatchMedia}(),Or={registerPlugin:function(){for(var e=arguments.length,_=new Array(e),S=0;S<e;S++)_[S]=arguments[S];_.forEach(function(e){return _createPlugin(e)})},timeline:function(e){return new yr(e)},getTweensOf:function(e,_){return ft.getTweensOf(e,_)},getProperty:function(e,_,S,k){_isString(e)&&(e=toArray$2(e)[0]);var E=_getCache(e||{}).get,T=S?_passThrough:_numericIfPossible;return"native"===S&&(S=""),e?_?T((Yt[_]&&Yt[_].get||E)(e,_,S,k)):function(_,S,k){return T((Yt[_]&&Yt[_].get||E)(e,_,S,k))}:e},quickSetter:function(e,_,S){if((e=toArray$2(e)).length>1){var k=e.map(function(e){return Dr.quickSetter(e,_,S)}),E=k.length;return function(e){for(var _=E;_--;)k[_](e)}}e=e[0]||{};var T=Yt[_],M=_getCache(e),I=M.harness&&(M.harness.aliases||{})[_]||_,R=T?function(_){var k=new T;_t._pt=0,k.init(e,S?_+S:_,_t,0,[e]),k.render(1,k),_t._pt&&_renderPropTweens(1,_t)}:M.set(e,I);return T?R:function(_){return R(e,I,S?_+S:_,M,1)}},quickTo:function(e,_,S){var k,E=Dr.to(e,_setDefaults(((k={})[_]="+=0.1",k.paused=!0,k.stagger=0,k),S||{})),func=function(e,S,k){return E.resetTo(_,e,S,k)};return func.tween=E,func},isTweening:function(e){return ft.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=_parseEase(e.ease,wt.ease)),$t(wt,e||{})},config:function(e){return $t(St,e||{})},registerEffect:function(e){var _=e.name,S=e.effect,k=e.plugins,E=e.defaults,T=e.extendTimeline;(k||"").split(",").forEach(function(e){return e&&!Yt[e]&&!zt[e]&&_warn()}),Kt[_]=function(e,_,k){return S(toArray$2(e),_setDefaults(_||{},E),k)},T&&(yr.prototype[_]=function(e,S,k){return this.add(Kt[_](e,_isObject(S)?S:(k=S)&&{},this),k)})},registerEase:function(e,_){hr[e]=_parseEase(_)},parseEase:function(e,_){return arguments.length?_parseEase(e,_):hr},getById:function(e){return ft.getById(e)},exportRoot:function(e,_){void 0===e&&(e={});var S,k,E=new yr(e);for(E.smoothChildTiming=_isNotFalse(e.smoothChildTiming),ft.remove(E),E._dp=0,E._time=E._tTime=ft._time,S=ft._first;S;)k=S._next,!_&&!S._dur&&S instanceof kr&&S.vars.onComplete===S._targets[0]||_addToTimeline(E,S,S._start-S._delay),S=k;return _addToTimeline(ft,E,0),E},context:function(e,_){return e?new Rr(e,_):dt},matchMedia:function(e){return new Pr(e)},matchMediaRefresh:function(){return Ar.forEach(function(e){var _,S,k=e.conditions;for(S in k)k[S]&&(k[S]=!1,_=1);_&&e.revert()})||_onMediaChange()},addEventListener:function(e,_){var S=Er[e]||(Er[e]=[]);~S.indexOf(_)||S.push(_)},removeEventListener:function(e,_){var S=Er[e],k=S&&S.indexOf(_);k>=0&&S.splice(k,1)},utils:{wrap:function wrap(e,_,S){var k=_-e;return Pt(e)?_wrapArray(e,wrap(0,e.length),_):_conditionalReturn(S,function(_){return(k+(_-e)%k)%k+e})},wrapYoyo:function wrapYoyo(e,_,S){var k=_-e,E=2*k;return Pt(e)?_wrapArray(e,wrapYoyo(0,e.length-1),_):_conditionalReturn(S,function(_){return e+((_=(E+(_-e)%E)%E||0)>k?E-_:_)})},distribute:distribute,random:random,snap:snap,normalize:function(e,_,S){return mapRange(e,_,0,1,S)},getUnit:getUnit,clamp:function(e,_,S){return _conditionalReturn(S,function(S){return _clamp(e,_,S)})},splitColor:splitColor$1,toArray:toArray$2,selector:selector,mapRange:mapRange,pipe:function(){for(var e=arguments.length,_=new Array(e),S=0;S<e;S++)_[S]=arguments[S];return function(e){return _.reduce(function(e,_){return _(e)},e)}},unitize:function(e,_){return function(S){return e(parseFloat(S))+(_||getUnit(S))}},interpolate:function interpolate(e,_,S,k){var E=isNaN(e+_)?0:function(S){return(1-S)*e+S*_};if(!E){var T,M,I,R,O,D=_isString(e),L={};if(!0===S&&(k=1)&&(S=null),D)e={p:e},_={p:_};else if(Pt(e)&&!Pt(_)){for(I=[],R=e.length,O=R-2,M=1;M<R;M++)I.push(interpolate(e[M-1],e[M]));R--,E=function(e){e*=R;var _=Math.min(O,~~e);return I[_](e-_)},S=_}else k||(e=_merge(Pt(e)?[]:{},e));if(!I){for(T in _)_addPropTween.call(L,e,T,"get",_[T]);E=function(_){return _renderPropTweens(_,L)||(D?e.p:e)}}}return _conditionalReturn(S,E)},shuffle:shuffle},install:_install,effects:Kt,ticker:cr,updateRoot:yr.updateRoot,plugins:Yt,globalTimeline:ft,core:{PropTween:Cr,globals:_addGlobal,Tween:kr,Timeline:yr,Animation:mr,getCache:_getCache,_removeLinkedListItem:_removeLinkedListItem,reverting:function(){return ht},context:function(e){return e&&dt&&(dt.data.push(e),e._ctx=dt),dt},suppressOverwrites:function(e){return ct=e}}};_forEachName("to,from,fromTo,delayedCall,set,killTweensOf",function(e){return Or[e]=kr[e]}),cr.add(yr.updateRoot),_t=Or.to({},{duration:0});var _getPluginPropTween=function(e,_){for(var S=e._pt;S&&S.p!==_&&S.op!==_&&S.fp!==_;)S=S._next;return S},_buildModifierPlugin=function(e,_){return{name:e,headless:1,rawVars:1,init:function(e,S,k){k._onInit=function(e){var k,E;if(_isString(S)&&(k={},_forEachName(S,function(e){return k[e]=1}),S=k),_){for(E in k={},S)k[E]=_(S[E]);S=k}!function(e,_){var S,k,E,T=e._targets;for(S in _)for(k=T.length;k--;)(E=e._ptLookup[k][S])&&(E=E.d)&&(E._pt&&(E=_getPluginPropTween(E,S)),E&&E.modifier&&E.modifier(_[S],e,T[k],S))}(e,S)}}}},Dr=Or.registerPlugin({name:"attr",init:function(e,_,S,k,E){var T,M,I;for(T in this.tween=S,_)I=e.getAttribute(T)||"",(M=this.add(e,"setAttribute",(I||0)+"",_[T],k,E,0,0,T)).op=T,M.b=I,this._props.push(T)},render:function(e,_){for(var S=_._pt;S;)ht?S.set(S.t,S.p,S.b,S):S.r(e,S.d),S=S._next}},{name:"endArray",headless:1,init:function(e,_){for(var S=_.length;S--;)this.add(e,S,e[S]||0,_[S],0,0,0,0,0,1)}},_buildModifierPlugin("roundProps",_roundModifier),_buildModifierPlugin("modifiers"),_buildModifierPlugin("snap",snap))||Or;kr.version=yr.version=Dr.version="3.13.0",mt=1,_windowExists$1()&&_wake(),hr.Power0,hr.Power1,hr.Power2,hr.Power3,hr.Power4,hr.Linear,hr.Quad,hr.Cubic,hr.Quart,hr.Quint,hr.Strong,hr.Elastic,hr.Back,hr.SteppedEase,hr.Bounce,hr.Sine,hr.Expo,hr.Circ;
/*!
			 * CSSPlugin 3.13.0
			 * https://gsap.com
			 *
			 * Copyright 2008-2025, GreenSock. All rights reserved.
			 * Subject to the terms at https://gsap.com/standard-license
			 * @author: Jack Doyle, jack@greensock.com
			*/
var Lr,Fr,Ur,Br,Nr,zr,Gr,jr,Vr={},Hr=180/Math.PI,Wr=Math.PI/180,qr=Math.atan2,Xr=/([A-Z])/g,Yr=/(left|right|width|margin|padding|x)/i,Kr=/[\s,\(]\S/,Jr={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},_renderCSSProp=function(e,_){return _.set(_.t,_.p,Math.round(1e4*(_.s+_.c*e))/1e4+_.u,_)},_renderPropWithEnd=function(e,_){return _.set(_.t,_.p,1===e?_.e:Math.round(1e4*(_.s+_.c*e))/1e4+_.u,_)},_renderCSSPropWithBeginning=function(e,_){return _.set(_.t,_.p,e?Math.round(1e4*(_.s+_.c*e))/1e4+_.u:_.b,_)},_renderRoundedCSSProp=function(e,_){var S=_.s+_.c*e;_.set(_.t,_.p,~~(S+(S<0?-.5:.5))+_.u,_)},_renderNonTweeningValue=function(e,_){return _.set(_.t,_.p,e?_.e:_.b,_)},_renderNonTweeningValueOnlyAtEnd=function(e,_){return _.set(_.t,_.p,1!==e?_.b:_.e,_)},_setterCSSStyle=function(e,_,S){return e.style[_]=S},_setterCSSProp=function(e,_,S){return e.style.setProperty(_,S)},_setterTransform=function(e,_,S){return e._gsap[_]=S},_setterScale=function(e,_,S){return e._gsap.scaleX=e._gsap.scaleY=S},_setterScaleWithRender=function(e,_,S,k,E){var T=e._gsap;T.scaleX=T.scaleY=S,T.renderTransform(E,T)},_setterTransformWithRender=function(e,_,S,k,E){var T=e._gsap;T[_]=S,T.renderTransform(E,T)},Qr="transform",Zr=Qr+"Origin",$r=function _saveStyle(e,_){var S=this,k=this.target,E=k.style,T=k._gsap;if(e in Vr&&E){if(this.tfm=this.tfm||{},"transform"===e)return Jr.transform.split(",").forEach(function(e){return _saveStyle.call(S,e,_)});if(~(e=Jr[e]||e).indexOf(",")?e.split(",").forEach(function(e){return S.tfm[e]=_get(k,e)}):this.tfm[e]=T.x?T[e]:_get(k,e),e===Zr&&(this.tfm.zOrigin=T.zOrigin),this.props.indexOf(Qr)>=0)return;T.svg&&(this.svgo=k.getAttribute("data-svg-origin"),this.props.push(Zr,_,"")),e=Qr}(E||_)&&this.props.push(e,_,E[e])},_removeIndependentTransforms=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},_revertStyle=function(){var e,_,S=this.props,k=this.target,E=k.style,T=k._gsap;for(e=0;e<S.length;e+=3)S[e+1]?2===S[e+1]?k[S[e]](S[e+2]):k[S[e]]=S[e+2]:S[e+2]?E[S[e]]=S[e+2]:E.removeProperty("--"===S[e].substr(0,2)?S[e]:S[e].replace(Xr,"-$1").toLowerCase());if(this.tfm){for(_ in this.tfm)T[_]=this.tfm[_];T.svg&&(T.renderTransform(),k.setAttribute("data-svg-origin",this.svgo||"")),(e=Gr())&&e.isStart||E[Qr]||(_removeIndependentTransforms(E),T.zOrigin&&E[Zr]&&(E[Zr]+=" "+T.zOrigin+"px",T.zOrigin=0,T.renderTransform()),T.uncache=1)}},_getStyleSaver=function(e,_){var S={target:e,props:[],revert:_revertStyle,save:$r};return e._gsap||Dr.core.getCache(e),_&&e.style&&e.nodeType&&_.split(",").forEach(function(e){return S.save(e)}),S},_createElement=function(e,_){var S=Fr.createElementNS?Fr.createElementNS((_||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):Fr.createElement(e);return S&&S.style?S:Fr.createElement(e)},en=function _getComputedProperty(e,_,S){var k=getComputedStyle(e);return k[_]||k.getPropertyValue(_.replace(Xr,"-$1").toLowerCase())||k.getPropertyValue(_)||!S&&_getComputedProperty(e,_checkPropPrefix(_)||_,1)||""},tn="O,Moz,ms,Ms,Webkit".split(","),_checkPropPrefix=function(e,_,S){var k=(_||Nr).style,E=5;if(e in k&&!S)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);E--&&!(tn[E]+e in k););return E<0?null:(3===E?"ms":E>=0?tn[E]:"")+e},_initCore=function(){"undefined"!=typeof window&&window.document&&(Lr=window,Fr=Lr.document,Ur=Fr.documentElement,Nr=_createElement("div")||{style:{}},_createElement("div"),Qr=_checkPropPrefix(Qr),Zr=Qr+"Origin",Nr.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",jr=!!_checkPropPrefix("perspective"),Gr=Dr.core.reverting,Br=1)},_getReparentedCloneBBox=function(e){var _,S=e.ownerSVGElement,k=_createElement("svg",S&&S.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),E=e.cloneNode(!0);E.style.display="block",k.appendChild(E),Ur.appendChild(k);try{_=E.getBBox()}catch(fo){}return k.removeChild(E),Ur.removeChild(k),_},_getAttributeFallbacks=function(e,_){for(var S=_.length;S--;)if(e.hasAttribute(_[S]))return e.getAttribute(_[S])},_getBBox=function(e){var _,S;try{_=e.getBBox()}catch(k){_=_getReparentedCloneBBox(e),S=1}return _&&(_.width||_.height)||S||(_=_getReparentedCloneBBox(e)),!_||_.width||_.x||_.y?_:{x:+_getAttributeFallbacks(e,["x","cx","x1"])||0,y:+_getAttributeFallbacks(e,["y","cy","y1"])||0,width:0,height:0}},_isSVG=function(e){return!(!e.getCTM||e.parentNode&&!e.ownerSVGElement||!_getBBox(e))},_removeProperty=function(e,_){if(_){var S,k=e.style;_ in Vr&&_!==Zr&&(_=Qr),k.removeProperty?("ms"!==(S=_.substr(0,2))&&"webkit"!==_.substr(0,6)||(_="-"+_),k.removeProperty("--"===S?_:_.replace(Xr,"-$1").toLowerCase())):k.removeAttribute(_)}},_addNonTweeningPT=function(e,_,S,k,E,T){var M=new Cr(e._pt,_,S,0,1,T?_renderNonTweeningValueOnlyAtEnd:_renderNonTweeningValue);return e._pt=M,M.b=k,M.e=E,e._props.push(S),M},rn={deg:1,rad:1,turn:1},nn={grid:1,flex:1},an=function _convertToUnit(e,_,S,k){var E,T,M,I,R=parseFloat(S)||0,O=(S+"").trim().substr((R+"").length)||"px",D=Nr.style,L=Yr.test(_),U="svg"===e.tagName.toLowerCase(),B=(U?"client":"offset")+(L?"Width":"Height"),z=100,G="px"===k,j="%"===k;if(k===O||!R||rn[k]||rn[O])return R;if("px"!==O&&!G&&(R=_convertToUnit(e,_,S,"px")),I=e.getCTM&&_isSVG(e),(j||"%"===O)&&(Vr[_]||~_.indexOf("adius")))return E=I?e.getBBox()[L?"width":"height"]:e[B],_round(j?R/E*z:R/100*E);if(D[L?"width":"height"]=z+(G?O:k),T="rem"!==k&&~_.indexOf("adius")||"em"===k&&e.appendChild&&!U?e:e.parentNode,I&&(T=(e.ownerSVGElement||{}).parentNode),T&&T!==Fr&&T.appendChild||(T=Fr.body),(M=T._gsap)&&j&&M.width&&L&&M.time===cr.time&&!M.uncache)return _round(R/M.width*z);if(!j||"height"!==_&&"width"!==_)(j||"%"===O)&&!nn[en(T,"display")]&&(D.position=en(e,"position")),T===e&&(D.position="static"),T.appendChild(Nr),E=Nr[B],T.removeChild(Nr),D.position="absolute";else{var V=e.style[_];e.style[_]=z+k,E=e[B],V?e.style[_]=V:_removeProperty(e,_)}return L&&j&&((M=_getCache(T)).time=cr.time,M.width=T[B]),_round(G?E*R/z:E&&R?z/E*R:0)},_get=function(e,_,S,k){var E;return Br||_initCore(),_ in Jr&&"transform"!==_&&~(_=Jr[_]).indexOf(",")&&(_=_.split(",")[0]),Vr[_]&&"transform"!==_?(E=_parseTransform(e,k),E="transformOrigin"!==_?E[_]:E.svg?E.origin:_firstTwoOnly(en(e,Zr))+" "+E.zOrigin+"px"):(!(E=e.style[_])||"auto"===E||k||~(E+"").indexOf("calc("))&&(E=un[_]&&un[_](e,_,S)||en(e,_)||_getProperty(e,_)||("opacity"===_?1:0)),S&&!~(E+"").trim().indexOf(" ")?an(e,_,E,S)+S:E},_tweenComplexCSSString=function(e,_,S,k){if(!S||"none"===S){var E=_checkPropPrefix(_,e,1),T=E&&en(e,E,1);T&&T!==S?(_=E,S=T):"borderColor"===_&&(S=en(e,"borderTopColor"))}var M,I,R,O,D,L,U,B,z,G,j,V=new Cr(this._pt,e.style,_,0,1,_renderComplexString),H=0,W=0;if(V.b=S,V.e=k,S+="","var(--"===(k+="").substring(0,6)&&(k=en(e,k.substring(4,k.indexOf(")")))),"auto"===k&&(L=e.style[_],e.style[_]=k,k=en(e,_)||k,L?e.style[_]=L:_removeProperty(e,_)),_colorStringFilter(M=[S,k]),k=M[1],R=(S=M[0]).match(Lt)||[],(k.match(Lt)||[]).length){for(;I=Lt.exec(k);)U=I[0],z=k.substring(H,I.index),D?D=(D+1)%5:"rgba("!==z.substr(-5)&&"hsla("!==z.substr(-5)||(D=1),U!==(L=R[W++]||"")&&(O=parseFloat(L)||0,j=L.substr((O+"").length),"="===U.charAt(1)&&(U=_parseRelative(O,U)+j),B=parseFloat(U),G=U.substr((B+"").length),H=Lt.lastIndex-G.length,G||(G=G||St.units[_]||j,H===k.length&&(k+=G,V.e+=G)),j!==G&&(O=an(e,_,L,G)||0),V._pt={_next:V._pt,p:z||1===W?z:",",s:O,c:B-O,m:D&&D<4||"zIndex"===_?Math.round:0});V.c=H<k.length?k.substring(H,k.length):""}else V.r="display"===_&&"none"===k?_renderNonTweeningValueOnlyAtEnd:_renderNonTweeningValue;return Ut.test(k)&&(V.e=0),this._pt=V,V},sn={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},_convertKeywordsToPercentages=function(e){var _=e.split(" "),S=_[0],k=_[1]||"50%";return"top"!==S&&"bottom"!==S&&"left"!==k&&"right"!==k||(e=S,S=k,k=e),_[0]=sn[S]||S,_[1]=sn[k]||k,_.join(" ")},_renderClearProps=function(e,_){if(_.tween&&_.tween._time===_.tween._dur){var S,k,E,T=_.t,M=T.style,I=_.u,R=T._gsap;if("all"===I||!0===I)M.cssText="",k=1;else for(E=(I=I.split(",")).length;--E>-1;)S=I[E],Vr[S]&&(k=1,S="transformOrigin"===S?Zr:Qr),_removeProperty(T,S);k&&(_removeProperty(T,Qr),R&&(R.svg&&T.removeAttribute("transform"),M.scale=M.rotate=M.translate="none",_parseTransform(T,1),R.uncache=1,_removeIndependentTransforms(M)))}},un={clearProps:function(e,_,S,k,E){if("isFromStart"!==E.data){var T=e._pt=new Cr(e._pt,_,S,0,0,_renderClearProps);return T.u=k,T.pr=-10,T.tween=E,e._props.push(S),1}}},ln=[1,0,0,1,0,0],cn={},_isNullTransform=function(e){return"matrix(1, 0, 0, 1, 0, 0)"===e||"none"===e||!e},_getComputedTransformMatrixAsArray=function(e){var _=en(e,Qr);return _isNullTransform(_)?ln:_.substr(7).match(Dt).map(_round)},_getMatrix=function(e,_){var S,k,E,T,M=e._gsap||_getCache(e),I=e.style,R=_getComputedTransformMatrixAsArray(e);return M.svg&&e.getAttribute("transform")?"1,0,0,1,0,0"===(R=[(E=e.transform.baseVal.consolidate().matrix).a,E.b,E.c,E.d,E.e,E.f]).join(",")?ln:R:(R!==ln||e.offsetParent||e===Ur||M.svg||(E=I.display,I.display="block",(S=e.parentNode)&&(e.offsetParent||e.getBoundingClientRect().width)||(T=1,k=e.nextElementSibling,Ur.appendChild(e)),R=_getComputedTransformMatrixAsArray(e),E?I.display=E:_removeProperty(e,"display"),T&&(k?S.insertBefore(e,k):S?S.appendChild(e):Ur.removeChild(e))),_&&R.length>6?[R[0],R[1],R[4],R[5],R[12],R[13]]:R)},_applySVGOrigin=function(e,_,S,k,E,T){var M,I,R,O=e._gsap,D=E||_getMatrix(e,!0),L=O.xOrigin||0,U=O.yOrigin||0,B=O.xOffset||0,z=O.yOffset||0,G=D[0],j=D[1],V=D[2],H=D[3],W=D[4],q=D[5],X=_.split(" "),Y=parseFloat(X[0])||0,K=parseFloat(X[1])||0;S?D!==ln&&(I=G*H-j*V)&&(R=Y*(-j/I)+K*(G/I)-(G*q-j*W)/I,Y=Y*(H/I)+K*(-V/I)+(V*q-H*W)/I,K=R):(Y=(M=_getBBox(e)).x+(~X[0].indexOf("%")?Y/100*M.width:Y),K=M.y+(~(X[1]||X[0]).indexOf("%")?K/100*M.height:K)),k||!1!==k&&O.smooth?(W=Y-L,q=K-U,O.xOffset=B+(W*G+q*V)-W,O.yOffset=z+(W*j+q*H)-q):O.xOffset=O.yOffset=0,O.xOrigin=Y,O.yOrigin=K,O.smooth=!!k,O.origin=_,O.originIsAbsolute=!!S,e.style[Zr]="0px 0px",T&&(_addNonTweeningPT(T,O,"xOrigin",L,Y),_addNonTweeningPT(T,O,"yOrigin",U,K),_addNonTweeningPT(T,O,"xOffset",B,O.xOffset),_addNonTweeningPT(T,O,"yOffset",z,O.yOffset)),e.setAttribute("data-svg-origin",Y+" "+K)},_parseTransform=function(e,_){var S=e._gsap||new GSCache(e);if("x"in S&&!_&&!S.uncache)return S;var k,E,T,M,I,R,O,D,L,U,B,z,G,j,V,H,W,q,X,Y,K,J,Q,Z,$,ee,te,re,ne,ie,ae,oe,se=e.style,ue=S.scaleX<0,le="px",ce="deg",he=getComputedStyle(e),de=en(e,Zr)||"0";return k=E=T=R=O=D=L=U=B=0,M=I=1,S.svg=!(!e.getCTM||!_isSVG(e)),he.translate&&("none"===he.translate&&"none"===he.scale&&"none"===he.rotate||(se[Qr]=("none"!==he.translate?"translate3d("+(he.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+("none"!==he.rotate?"rotate("+he.rotate+") ":"")+("none"!==he.scale?"scale("+he.scale.split(" ").join(",")+") ":"")+("none"!==he[Qr]?he[Qr]:"")),se.scale=se.rotate=se.translate="none"),j=_getMatrix(e,S.svg),S.svg&&(S.uncache?($=e.getBBox(),de=S.xOrigin-$.x+"px "+(S.yOrigin-$.y)+"px",Z=""):Z=!_&&e.getAttribute("data-svg-origin"),_applySVGOrigin(e,Z||de,!!Z||S.originIsAbsolute,!1!==S.smooth,j)),z=S.xOrigin||0,G=S.yOrigin||0,j!==ln&&(q=j[0],X=j[1],Y=j[2],K=j[3],k=J=j[4],E=Q=j[5],6===j.length?(M=Math.sqrt(q*q+X*X),I=Math.sqrt(K*K+Y*Y),R=q||X?qr(X,q)*Hr:0,(L=Y||K?qr(Y,K)*Hr+R:0)&&(I*=Math.abs(Math.cos(L*Wr))),S.svg&&(k-=z-(z*q+G*Y),E-=G-(z*X+G*K))):(oe=j[6],ie=j[7],te=j[8],re=j[9],ne=j[10],ae=j[11],k=j[12],E=j[13],T=j[14],O=(V=qr(oe,ne))*Hr,V&&(Z=J*(H=Math.cos(-V))+te*(W=Math.sin(-V)),$=Q*H+re*W,ee=oe*H+ne*W,te=J*-W+te*H,re=Q*-W+re*H,ne=oe*-W+ne*H,ae=ie*-W+ae*H,J=Z,Q=$,oe=ee),D=(V=qr(-Y,ne))*Hr,V&&(H=Math.cos(-V),ae=K*(W=Math.sin(-V))+ae*H,q=Z=q*H-te*W,X=$=X*H-re*W,Y=ee=Y*H-ne*W),R=(V=qr(X,q))*Hr,V&&(Z=q*(H=Math.cos(V))+X*(W=Math.sin(V)),$=J*H+Q*W,X=X*H-q*W,Q=Q*H-J*W,q=Z,J=$),O&&Math.abs(O)+Math.abs(R)>359.9&&(O=R=0,D=180-D),M=_round(Math.sqrt(q*q+X*X+Y*Y)),I=_round(Math.sqrt(Q*Q+oe*oe)),V=qr(J,Q),L=Math.abs(V)>2e-4?V*Hr:0,B=ae?1/(ae<0?-ae:ae):0),S.svg&&(Z=e.getAttribute("transform"),S.forceCSS=e.setAttribute("transform","")||!_isNullTransform(en(e,Qr)),Z&&e.setAttribute("transform",Z))),Math.abs(L)>90&&Math.abs(L)<270&&(ue?(M*=-1,L+=R<=0?180:-180,R+=R<=0?180:-180):(I*=-1,L+=L<=0?180:-180)),_=_||S.uncache,S.x=k-((S.xPercent=k&&(!_&&S.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-k)?-50:0)))?e.offsetWidth*S.xPercent/100:0)+le,S.y=E-((S.yPercent=E&&(!_&&S.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-E)?-50:0)))?e.offsetHeight*S.yPercent/100:0)+le,S.z=T+le,S.scaleX=_round(M),S.scaleY=_round(I),S.rotation=_round(R)+ce,S.rotationX=_round(O)+ce,S.rotationY=_round(D)+ce,S.skewX=L+ce,S.skewY=U+ce,S.transformPerspective=B+le,(S.zOrigin=parseFloat(de.split(" ")[2])||!_&&S.zOrigin||0)&&(se[Zr]=_firstTwoOnly(de)),S.xOffset=S.yOffset=0,S.force3D=St.force3D,S.renderTransform=S.svg?_renderSVGTransforms:jr?_renderCSSTransforms:_renderNon3DTransforms,S.uncache=0,S},_firstTwoOnly=function(e){return(e=e.split(" "))[0]+" "+e[1]},_addPxTranslate=function(e,_,S){var k=getUnit(_);return _round(parseFloat(_)+parseFloat(an(e,"x",S+"px",k)))+k},_renderNon3DTransforms=function(e,_){_.z="0px",_.rotationY=_.rotationX="0deg",_.force3D=0,_renderCSSTransforms(e,_)},hn="0deg",dn="0px",fn=") ",_renderCSSTransforms=function(e,_){var S=_||this,k=S.xPercent,E=S.yPercent,T=S.x,M=S.y,I=S.z,R=S.rotation,O=S.rotationY,D=S.rotationX,L=S.skewX,U=S.skewY,B=S.scaleX,z=S.scaleY,G=S.transformPerspective,j=S.force3D,V=S.target,H=S.zOrigin,W="",q="auto"===j&&e&&1!==e||!0===j;if(H&&(D!==hn||O!==hn)){var X,Y=parseFloat(O)*Wr,K=Math.sin(Y),J=Math.cos(Y);Y=parseFloat(D)*Wr,X=Math.cos(Y),T=_addPxTranslate(V,T,K*X*-H),M=_addPxTranslate(V,M,-Math.sin(Y)*-H),I=_addPxTranslate(V,I,J*X*-H+H)}G!==dn&&(W+="perspective("+G+fn),(k||E)&&(W+="translate("+k+"%, "+E+"%) "),(q||T!==dn||M!==dn||I!==dn)&&(W+=I!==dn||q?"translate3d("+T+", "+M+", "+I+") ":"translate("+T+", "+M+fn),R!==hn&&(W+="rotate("+R+fn),O!==hn&&(W+="rotateY("+O+fn),D!==hn&&(W+="rotateX("+D+fn),L===hn&&U===hn||(W+="skew("+L+", "+U+fn),1===B&&1===z||(W+="scale("+B+", "+z+fn),V.style[Qr]=W||"translate(0, 0)"},_renderSVGTransforms=function(e,_){var S,k,E,T,M,I=_||this,R=I.xPercent,O=I.yPercent,D=I.x,L=I.y,U=I.rotation,B=I.skewX,z=I.skewY,G=I.scaleX,j=I.scaleY,V=I.target,H=I.xOrigin,W=I.yOrigin,q=I.xOffset,X=I.yOffset,Y=I.forceCSS,K=parseFloat(D),J=parseFloat(L);U=parseFloat(U),B=parseFloat(B),(z=parseFloat(z))&&(B+=z=parseFloat(z),U+=z),U||B?(U*=Wr,B*=Wr,S=Math.cos(U)*G,k=Math.sin(U)*G,E=Math.sin(U-B)*-j,T=Math.cos(U-B)*j,B&&(z*=Wr,M=Math.tan(B-z),E*=M=Math.sqrt(1+M*M),T*=M,z&&(M=Math.tan(z),S*=M=Math.sqrt(1+M*M),k*=M)),S=_round(S),k=_round(k),E=_round(E),T=_round(T)):(S=G,T=j,k=E=0),(K&&!~(D+"").indexOf("px")||J&&!~(L+"").indexOf("px"))&&(K=an(V,"x",D,"px"),J=an(V,"y",L,"px")),(H||W||q||X)&&(K=_round(K+H-(H*S+W*E)+q),J=_round(J+W-(H*k+W*T)+X)),(R||O)&&(M=V.getBBox(),K=_round(K+R/100*M.width),J=_round(J+O/100*M.height)),M="matrix("+S+","+k+","+E+","+T+","+K+","+J+")",V.setAttribute("transform",M),Y&&(V.style[Qr]=M)},_addRotationalPropTween=function(e,_,S,k,E){var T,M,I=360,R=_isString(E),O=parseFloat(E)*(R&&~E.indexOf("rad")?Hr:1)-k,D=k+O+"deg";return R&&("short"===(T=E.split("_")[1])&&(O%=I)!==O%180&&(O+=O<0?I:-360),"cw"===T&&O<0?O=(O+36e9)%I-~~(O/I)*I:"ccw"===T&&O>0&&(O=(O-36e9)%I-~~(O/I)*I)),e._pt=M=new Cr(e._pt,_,S,k,O,_renderPropWithEnd),M.e=D,M.u="deg",e._props.push(S),M},_assign=function(e,_){for(var S in _)e[S]=_[S];return e},_addRawTransformPTs=function(e,_,S){var k,E,T,M,I,R,O,D=_assign({},S._gsap),L=S.style;for(E in D.svg?(T=S.getAttribute("transform"),S.setAttribute("transform",""),L[Qr]=_,k=_parseTransform(S,1),_removeProperty(S,Qr),S.setAttribute("transform",T)):(T=getComputedStyle(S)[Qr],L[Qr]=_,k=_parseTransform(S,1),L[Qr]=T),Vr)(T=D[E])!==(M=k[E])&&"perspective,force3D,transformOrigin,svgOrigin".indexOf(E)<0&&(I=getUnit(T)!==(O=getUnit(M))?an(S,E,T,O):parseFloat(T),R=parseFloat(M),e._pt=new Cr(e._pt,k,E,I,R-I,_renderCSSProp),e._pt.u=O||0,e._props.push(E));_assign(k,D)};_forEachName("padding,margin,Width,Radius",function(e,_){var S="Top",k="Right",E="Bottom",T="Left",M=(_<3?[S,k,E,T]:[S+T,S+k,E+k,E+T]).map(function(S){return _<2?e+S:"border"+S+e});un[_>1?"border"+e:e]=function(e,_,S,k,E){var T,I;if(arguments.length<4)return T=M.map(function(_){return _get(e,_,S)}),5===(I=T.join(" ")).split(T[0]).length?T[0]:I;T=(k+"").split(" "),I={},M.forEach(function(e,_){return I[e]=T[_]=T[_]||T[(_-1)/2|0]}),e.init(_,I,E)}});var pn={name:"css",register:_initCore,targetTest:function(e){return e.style&&e.nodeType},init:function(e,_,S,k,E){var T,M,I,R,O,D,L,U,B,z,G,j,V,H,W,q,X=this._props,Y=e.style,K=S.vars.startAt;for(L in Br||_initCore(),this.styles=this.styles||_getStyleSaver(e),q=this.styles.props,this.tween=S,_)if("autoRound"!==L&&(M=_[L],!Yt[L]||!_checkPlugin(L,_,S,k,e,E)))if(O=_typeof3(M),D=un[L],"function"===O&&(O=_typeof3(M=M.call(S,k,e,E))),"string"===O&&~M.indexOf("random(")&&(M=_replaceRandom(M)),D)D(this,e,L,M,S)&&(W=1);else if("--"===L.substr(0,2))T=(getComputedStyle(e).getPropertyValue(L)+"").trim(),M+="",ur.lastIndex=0,ur.test(T)||(U=getUnit(T),B=getUnit(M)),B?U!==B&&(T=an(e,L,T,B)+B):U&&(M+=U),this.add(Y,"setProperty",T,M,k,E,0,0,L),X.push(L),q.push(L,0,Y[L]);else if("undefined"!==O){if(K&&L in K?(T="function"==typeof K[L]?K[L].call(S,k,e,E):K[L],_isString(T)&&~T.indexOf("random(")&&(T=_replaceRandom(T)),getUnit(T+"")||"auto"===T||(T+=St.units[L]||getUnit(_get(e,L))||""),"="===(T+"").charAt(1)&&(T=_get(e,L))):T=_get(e,L),R=parseFloat(T),(z="string"===O&&"="===M.charAt(1)&&M.substr(0,2))&&(M=M.substr(2)),I=parseFloat(M),L in Jr&&("autoAlpha"===L&&(1===R&&"hidden"===_get(e,"visibility")&&I&&(R=0),q.push("visibility",0,Y.visibility),_addNonTweeningPT(this,Y,"visibility",R?"inherit":"hidden",I?"inherit":"hidden",!I)),"scale"!==L&&"transform"!==L&&~(L=Jr[L]).indexOf(",")&&(L=L.split(",")[0])),G=L in Vr)if(this.styles.save(L),"string"===O&&"var(--"===M.substring(0,6)&&(M=en(e,M.substring(4,M.indexOf(")"))),I=parseFloat(M)),j||((V=e._gsap).renderTransform&&!_.parseTransform||_parseTransform(e,_.parseTransform),H=!1!==_.smoothOrigin&&V.smooth,(j=this._pt=new Cr(this._pt,Y,Qr,0,1,V.renderTransform,V,0,-1)).dep=1),"scale"===L)this._pt=new Cr(this._pt,V,"scaleY",V.scaleY,(z?_parseRelative(V.scaleY,z+I):I)-V.scaleY||0,_renderCSSProp),this._pt.u=0,X.push("scaleY",L),L+="X";else{if("transformOrigin"===L){q.push(Zr,0,Y[Zr]),M=_convertKeywordsToPercentages(M),V.svg?_applySVGOrigin(e,M,0,H,0,this):((B=parseFloat(M.split(" ")[2])||0)!==V.zOrigin&&_addNonTweeningPT(this,V,"zOrigin",V.zOrigin,B),_addNonTweeningPT(this,Y,L,_firstTwoOnly(T),_firstTwoOnly(M)));continue}if("svgOrigin"===L){_applySVGOrigin(e,M,1,H,0,this);continue}if(L in cn){_addRotationalPropTween(this,V,L,R,z?_parseRelative(R,z+M):M);continue}if("smoothOrigin"===L){_addNonTweeningPT(this,V,"smooth",V.smooth,M);continue}if("force3D"===L){V[L]=M;continue}if("transform"===L){_addRawTransformPTs(this,M,e);continue}}else L in Y||(L=_checkPropPrefix(L)||L);if(G||(I||0===I)&&(R||0===R)&&!Kr.test(M)&&L in Y)I||(I=0),(U=(T+"").substr((R+"").length))!==(B=getUnit(M)||(L in St.units?St.units[L]:U))&&(R=an(e,L,T,B)),this._pt=new Cr(this._pt,G?V:Y,L,R,(z?_parseRelative(R,z+I):I)-R,G||"px"!==B&&"zIndex"!==L||!1===_.autoRound?_renderCSSProp:_renderRoundedCSSProp),this._pt.u=B||0,U!==B&&"%"!==B&&(this._pt.b=T,this._pt.r=_renderCSSPropWithBeginning);else if(L in Y)_tweenComplexCSSString.call(this,e,L,T,z?z+M:M);else if(L in e)this.add(e,L,T||e[L],z?z+M:M,k,E);else if("parseTransform"!==L){_missingPlugin();continue}G||(L in Y?q.push(L,0,Y[L]):"function"==typeof e[L]?q.push(L,2,e[L]()):q.push(L,1,T||e[L])),X.push(L)}W&&_sortPropTweensByPriority(this)},render:function(e,_){if(_.tween._time||!Gr())for(var S=_._pt;S;)S.r(e,S.d),S=S._next;else _.styles.revert()},get:_get,aliases:Jr,getSetter:function(e,_,S){var k=Jr[_];return k&&k.indexOf(",")<0&&(_=k),_ in Vr&&_!==Zr&&(e._gsap.x||_get(e,"x"))?S&&zr===S?"scale"===_?_setterScale:_setterTransform:(zr=S||{})&&("scale"===_?_setterScaleWithRender:_setterTransformWithRender):e.style&&!_isUndefined(e.style[_])?_setterCSSStyle:~_.indexOf("-")?_setterCSSProp:_getSetter(e,_)},core:{_removeProperty:_removeProperty,_getMatrix:_getMatrix}};function r(e){var _,S,k="";if("string"==typeof e||"number"==typeof e)k+=e;else if("object"==_typeof3(e))if(Array.isArray(e)){var E=e.length;for(_=0;_<E;_++)e[_]&&(S=r(e[_]))&&(k&&(k+=" "),k+=S)}else for(S in e)e[S]&&(k&&(k+=" "),k+=S);return k}function clsx(){for(var e,_,S=0,k="",E=arguments.length;S<E;S++)(e=arguments[S])&&(_=r(e))&&(k&&(k+=" "),k+=_);return k}Dr.utils.checkPrefix=_checkPropPrefix,Dr.core.getStyleSaver=_getStyleSaver,function(e,_){var S=_forEachName(e+","+_+",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective",function(e){Vr[e]=1});_forEachName(_,function(e){St.units[e]="deg",cn[e]=1}),Jr[S[13]]=e+","+_,_forEachName("0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY",function(e){var _=e.split(":");Jr[_[1]]=S[_[0]]})}("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY"),_forEachName("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(e){St.units[e]="px"}),Dr.registerPlugin(pn),D("af",Dr.registerPlugin(pn)||Dr).core.Tween;var _getGroupRecursive=function(e,_){var S;if(0===e.length)return _.classGroupId;var k=e[0],E=_.nextPart.get(k),T=E?_getGroupRecursive(e.slice(1),E):void 0;if(T)return T;if(0!==_.validators.length){var M=e.join("-");return null===(S=_.validators.find(function(e){return(0,e.validator)(M)}))||void 0===S?void 0:S.classGroupId}},vn=/^\[(.+)\]$/,getGroupIdForArbitraryProperty=function(e){if(vn.test(e)){var _=vn.exec(e)[1],S=null==_?void 0:_.substring(0,_.indexOf(":"));if(S)return"arbitrary.."+S}},createClassMap=function(e){var _=e.theme,S=e.classGroups,k={nextPart:new Map,validators:[]};for(var E in S)_processClassesRecursively(S[E],k,E,_);return k},_processClassesRecursively=function(e,_,S,k){e.forEach(function(e){if("string"!=typeof e){if("function"==typeof e)return isThemeGetter(e)?void _processClassesRecursively(e(k),_,S,k):void _.validators.push({validator:e,classGroupId:S});Object.entries(e).forEach(function(e){var E=_slicedToArray(e,2),T=E[0],M=E[1];_processClassesRecursively(M,getPart(_,T),S,k)})}else{(""===e?_:getPart(_,e)).classGroupId=S}})},getPart=function(e,_){var S=e;return _.split("-").forEach(function(e){S.nextPart.has(e)||S.nextPart.set(e,{nextPart:new Map,validators:[]}),S=S.nextPart.get(e)}),S},isThemeGetter=function(e){return e.isThemeGetter},createLruCache=function(e){if(e<1)return{get:function(){},set:function(){}};var _=0,S=new Map,k=new Map,update=function(E,T){S.set(E,T),++_>e&&(_=0,k=S,S=new Map)};return{get:function(e){var _=S.get(e);return void 0!==_?_:void 0!==(_=k.get(e))?(update(e,_),_):void 0},set:function(e,_){S.has(e)?S.set(e,_):update(e,_)}}},createParseClassName=function(e){var _=e.prefix,S=e.experimentalParseClassName,parseClassName=function(e){for(var _,S=[],k=0,E=0,T=0,M=0;M<e.length;M++){var I=e[M];if(0===k&&0===E){if(":"===I){S.push(e.slice(T,M)),T=M+1;continue}if("/"===I){_=M;continue}}"["===I?k++:"]"===I?k--:"("===I?E++:")"===I&&E--}var R=0===S.length?e:e.substring(T),O=stripImportantModifier(R);return{modifiers:S,hasImportantModifier:O!==R,baseClassName:O,maybePostfixModifierPosition:_&&_>T?_-T:void 0}};if(_){var k=_+":",E=parseClassName;parseClassName=function(e){return e.startsWith(k)?E(e.substring(k.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:e,maybePostfixModifierPosition:void 0}}}if(S){var T=parseClassName;parseClassName=function(e){return S({className:e,parseClassName:T})}}return parseClassName},stripImportantModifier=function(e){return e.endsWith("!")?e.substring(0,e.length-1):e.startsWith("!")?e.substring(1):e},createSortModifiers=function(e){var _=Object.fromEntries(e.orderSensitiveModifiers.map(function(e){return[e,!0]}));return function(e){if(e.length<=1)return e;var S=[],k=[];return e.forEach(function(e){"["===e[0]||_[e]?(S.push.apply(S,_toConsumableArray3(k.sort()).concat([e])),k=[]):k.push(e)}),S.push.apply(S,_toConsumableArray3(k.sort())),S}},createConfigUtils=function(e){return _objectSpread2({cache:createLruCache(e.cacheSize),parseClassName:createParseClassName(e),sortModifiers:createSortModifiers(e)},function(e){var _=createClassMap(e),S=e.conflictingClassGroups,k=e.conflictingClassGroupModifiers;return{getClassGroupId:function(e){var S=e.split("-");return""===S[0]&&1!==S.length&&S.shift(),_getGroupRecursive(S,_)||getGroupIdForArbitraryProperty(e)},getConflictingClassGroupIds:function(e,_){var E=S[e]||[];return _&&k[e]?[].concat(_toConsumableArray3(E),_toConsumableArray3(k[e])):E}}}(e))},gn=/\s+/;function twJoin(){for(var e,_,S=0,k="";S<arguments.length;)(e=arguments[S++])&&(_=_toValue(e))&&(k&&(k+=" "),k+=_);return k}var _toValue=function(e){if("string"==typeof e)return e;for(var _,S="",k=0;k<e.length;k++)e[k]&&(_=_toValue(e[k]))&&(S&&(S+=" "),S+=_);return S};function createTailwindMerge(e){for(var _=arguments.length,S=new Array(_>1?_-1:0),k=1;k<_;k++)S[k-1]=arguments[k];var E,T,M,functionToCall=function(_){var k=S.reduce(function(e,_){return _(e)},e());return E=createConfigUtils(k),T=E.cache.get,M=E.cache.set,functionToCall=tailwindMerge,tailwindMerge(_)};function tailwindMerge(e){var _=T(e);if(_)return _;var S=function(e,_){for(var S=_.parseClassName,k=_.getClassGroupId,E=_.getConflictingClassGroupIds,T=_.sortModifiers,M=[],I=e.trim().split(gn),R="",O=I.length-1;O>=0;O-=1){var D=I[O],L=S(D),U=L.isExternal,B=L.modifiers,z=L.hasImportantModifier,G=L.baseClassName,j=L.maybePostfixModifierPosition;if(U)R=D+(R.length>0?" "+R:R);else{var V=!!j,H=k(V?G.substring(0,j):G);if(!H){if(!V){R=D+(R.length>0?" "+R:R);continue}if(!(H=k(G))){R=D+(R.length>0?" "+R:R);continue}V=!1}var W=T(B).join(":"),q=z?W+"!":W,X=q+H;if(!M.includes(X)){M.push(X);for(var Y=E(H,V),K=0;K<Y.length;++K){var J=Y[K];M.push(q+J)}R=D+(R.length>0?" "+R:R)}}}return R}(e,E);return M(e,S),S}return function(){return functionToCall(twJoin.apply(null,arguments))}}var mn,yn,fromTheme=function(e){var themeGetter=function(_){return _[e]||[]};return themeGetter.isThemeGetter=!0,themeGetter},_n=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,bn=/^\((?:(\w[\w-]*):)?(.+)\)$/i,Sn=/^\d+\/\d+$/,wn=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,xn=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,kn=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,Cn=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,An=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,isFraction=function(e){return Sn.test(e)},isNumber$1=function(e){return!!e&&!Number.isNaN(Number(e))},isInteger=function(e){return!!e&&Number.isInteger(Number(e))},isPercent=function(e){return e.endsWith("%")&&isNumber$1(e.slice(0,-1))},isTshirtSize=function(e){return wn.test(e)},isAny=function(){return!0},isLengthOnly=function(e){return xn.test(e)&&!kn.test(e)},isNever=function(){return!1},isShadow=function(e){return Cn.test(e)},isImage=function(e){return An.test(e)},isAnyNonArbitrary=function(e){return!isArbitraryValue(e)&&!isArbitraryVariable(e)},isArbitrarySize=function(e){return getIsArbitraryValue(e,isLabelSize,isNever)},isArbitraryValue=function(e){return _n.test(e)},isArbitraryLength=function(e){return getIsArbitraryValue(e,isLabelLength,isLengthOnly)},isArbitraryNumber=function(e){return getIsArbitraryValue(e,isLabelNumber,isNumber$1)},isArbitraryPosition=function(e){return getIsArbitraryValue(e,isLabelPosition,isNever)},isArbitraryImage=function(e){return getIsArbitraryValue(e,isLabelImage,isImage)},isArbitraryShadow=function(e){return getIsArbitraryValue(e,isLabelShadow,isShadow)},isArbitraryVariable=function(e){return bn.test(e)},isArbitraryVariableLength=function(e){return getIsArbitraryVariable(e,isLabelLength)},isArbitraryVariableFamilyName=function(e){return getIsArbitraryVariable(e,isLabelFamilyName)},isArbitraryVariablePosition=function(e){return getIsArbitraryVariable(e,isLabelPosition)},isArbitraryVariableSize=function(e){return getIsArbitraryVariable(e,isLabelSize)},isArbitraryVariableImage=function(e){return getIsArbitraryVariable(e,isLabelImage)},isArbitraryVariableShadow=function(e){return getIsArbitraryVariable(e,isLabelShadow,!0)},getIsArbitraryValue=function(e,_,S){var k=_n.exec(e);return!!k&&(k[1]?_(k[1]):S(k[2]))},getIsArbitraryVariable=function(e,_){var S=arguments.length>2&&void 0!==arguments[2]&&arguments[2],k=bn.exec(e);return!!k&&(k[1]?_(k[1]):S)},isLabelPosition=function(e){return"position"===e||"percentage"===e},isLabelImage=function(e){return"image"===e||"url"===e},isLabelSize=function(e){return"length"===e||"size"===e||"bg-size"===e},isLabelLength=function(e){return"length"===e},isLabelNumber=function(e){return"number"===e},isLabelFamilyName=function(e){return"family-name"===e},isLabelShadow=function(e){return"shadow"===e},En=(D("bU",createTailwindMerge(function(){var e=fromTheme("color"),_=fromTheme("font"),S=fromTheme("text"),k=fromTheme("font-weight"),E=fromTheme("tracking"),T=fromTheme("leading"),M=fromTheme("breakpoint"),I=fromTheme("container"),R=fromTheme("spacing"),O=fromTheme("radius"),D=fromTheme("shadow"),L=fromTheme("inset-shadow"),U=fromTheme("text-shadow"),B=fromTheme("drop-shadow"),z=fromTheme("blur"),G=fromTheme("perspective"),j=fromTheme("aspect"),V=fromTheme("ease"),H=fromTheme("animate"),scalePositionWithArbitrary=function(){return[].concat(_toConsumableArray3(["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"]),[isArbitraryVariable,isArbitraryValue])},scaleUnambiguousSpacing=function(){return[isArbitraryVariable,isArbitraryValue,R]},scaleInset=function(){return[isFraction,"full","auto"].concat(_toConsumableArray3(scaleUnambiguousSpacing()))},scaleGridTemplateColsRows=function(){return[isInteger,"none","subgrid",isArbitraryVariable,isArbitraryValue]},scaleGridColRowStartAndEnd=function(){return["auto",{span:["full",isInteger,isArbitraryVariable,isArbitraryValue]},isInteger,isArbitraryVariable,isArbitraryValue]},scaleGridColRowStartOrEnd=function(){return[isInteger,"auto",isArbitraryVariable,isArbitraryValue]},scaleGridAutoColsRows=function(){return["auto","min","max","fr",isArbitraryVariable,isArbitraryValue]},scaleMargin=function(){return["auto"].concat(_toConsumableArray3(scaleUnambiguousSpacing()))},scaleSizing=function(){return[isFraction,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit"].concat(_toConsumableArray3(scaleUnambiguousSpacing()))},scaleColor=function(){return[e,isArbitraryVariable,isArbitraryValue]},scaleBgPosition=function(){return[].concat(_toConsumableArray3(["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"]),[isArbitraryVariablePosition,isArbitraryPosition,{position:[isArbitraryVariable,isArbitraryValue]}])},scaleBgSize=function(){return["auto","cover","contain",isArbitraryVariableSize,isArbitrarySize,{size:[isArbitraryVariable,isArbitraryValue]}]},scaleGradientStopPosition=function(){return[isPercent,isArbitraryVariableLength,isArbitraryLength]},scaleRadius=function(){return["","none","full",O,isArbitraryVariable,isArbitraryValue]},scaleBorderWidth=function(){return["",isNumber$1,isArbitraryVariableLength,isArbitraryLength]},scaleMaskImagePosition=function(){return[isNumber$1,isPercent,isArbitraryVariablePosition,isArbitraryPosition]},scaleBlur=function(){return["","none",z,isArbitraryVariable,isArbitraryValue]},scaleRotate=function(){return["none",isNumber$1,isArbitraryVariable,isArbitraryValue]},scaleScale=function(){return["none",isNumber$1,isArbitraryVariable,isArbitraryValue]},scaleSkew=function(){return[isNumber$1,isArbitraryVariable,isArbitraryValue]},scaleTranslate=function(){return[isFraction,"full"].concat(_toConsumableArray3(scaleUnambiguousSpacing()))};return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[isTshirtSize],breakpoint:[isTshirtSize],color:[isAny],container:[isTshirtSize],"drop-shadow":[isTshirtSize],ease:["in","out","in-out"],font:[isAnyNonArbitrary],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[isTshirtSize],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[isTshirtSize],shadow:[isTshirtSize],spacing:["px",isNumber$1],text:[isTshirtSize],"text-shadow":[isTshirtSize],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",isFraction,isArbitraryValue,isArbitraryVariable,j]}],container:["container"],columns:[{columns:[isNumber$1,isArbitraryValue,isArbitraryVariable,I]}],"break-after":[{"break-after":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-before":[{"break-before":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:scalePositionWithArbitrary()}],overflow:[{overflow:["auto","hidden","clip","visible","scroll"]}],"overflow-x":[{"overflow-x":["auto","hidden","clip","visible","scroll"]}],"overflow-y":[{"overflow-y":["auto","hidden","clip","visible","scroll"]}],overscroll:[{overscroll:["auto","contain","none"]}],"overscroll-x":[{"overscroll-x":["auto","contain","none"]}],"overscroll-y":[{"overscroll-y":["auto","contain","none"]}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:scaleInset()}],"inset-x":[{"inset-x":scaleInset()}],"inset-y":[{"inset-y":scaleInset()}],start:[{start:scaleInset()}],end:[{end:scaleInset()}],top:[{top:scaleInset()}],right:[{right:scaleInset()}],bottom:[{bottom:scaleInset()}],left:[{left:scaleInset()}],visibility:["visible","invisible","collapse"],z:[{z:[isInteger,"auto",isArbitraryVariable,isArbitraryValue]}],basis:[{basis:[isFraction,"full","auto",I].concat(_toConsumableArray3(scaleUnambiguousSpacing()))}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[isNumber$1,isFraction,"auto","initial","none",isArbitraryValue]}],grow:[{grow:["",isNumber$1,isArbitraryVariable,isArbitraryValue]}],shrink:[{shrink:["",isNumber$1,isArbitraryVariable,isArbitraryValue]}],order:[{order:[isInteger,"first","last","none",isArbitraryVariable,isArbitraryValue]}],"grid-cols":[{"grid-cols":scaleGridTemplateColsRows()}],"col-start-end":[{col:scaleGridColRowStartAndEnd()}],"col-start":[{"col-start":scaleGridColRowStartOrEnd()}],"col-end":[{"col-end":scaleGridColRowStartOrEnd()}],"grid-rows":[{"grid-rows":scaleGridTemplateColsRows()}],"row-start-end":[{row:scaleGridColRowStartAndEnd()}],"row-start":[{"row-start":scaleGridColRowStartOrEnd()}],"row-end":[{"row-end":scaleGridColRowStartOrEnd()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":scaleGridAutoColsRows()}],"auto-rows":[{"auto-rows":scaleGridAutoColsRows()}],gap:[{gap:scaleUnambiguousSpacing()}],"gap-x":[{"gap-x":scaleUnambiguousSpacing()}],"gap-y":[{"gap-y":scaleUnambiguousSpacing()}],"justify-content":[{justify:[].concat(_toConsumableArray3(["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"]),["normal"])}],"justify-items":[{"justify-items":[].concat(_toConsumableArray3(["start","end","center","stretch","center-safe","end-safe"]),["normal"])}],"justify-self":[{"justify-self":["auto"].concat(_toConsumableArray3(["start","end","center","stretch","center-safe","end-safe"]))}],"align-content":[{content:["normal"].concat(_toConsumableArray3(["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"]))}],"align-items":[{items:[].concat(_toConsumableArray3(["start","end","center","stretch","center-safe","end-safe"]),[{baseline:["","last"]}])}],"align-self":[{self:["auto"].concat(_toConsumableArray3(["start","end","center","stretch","center-safe","end-safe"]),[{baseline:["","last"]}])}],"place-content":[{"place-content":["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"]}],"place-items":[{"place-items":[].concat(_toConsumableArray3(["start","end","center","stretch","center-safe","end-safe"]),["baseline"])}],"place-self":[{"place-self":["auto"].concat(_toConsumableArray3(["start","end","center","stretch","center-safe","end-safe"]))}],p:[{p:scaleUnambiguousSpacing()}],px:[{px:scaleUnambiguousSpacing()}],py:[{py:scaleUnambiguousSpacing()}],ps:[{ps:scaleUnambiguousSpacing()}],pe:[{pe:scaleUnambiguousSpacing()}],pt:[{pt:scaleUnambiguousSpacing()}],pr:[{pr:scaleUnambiguousSpacing()}],pb:[{pb:scaleUnambiguousSpacing()}],pl:[{pl:scaleUnambiguousSpacing()}],m:[{m:scaleMargin()}],mx:[{mx:scaleMargin()}],my:[{my:scaleMargin()}],ms:[{ms:scaleMargin()}],me:[{me:scaleMargin()}],mt:[{mt:scaleMargin()}],mr:[{mr:scaleMargin()}],mb:[{mb:scaleMargin()}],ml:[{ml:scaleMargin()}],"space-x":[{"space-x":scaleUnambiguousSpacing()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":scaleUnambiguousSpacing()}],"space-y-reverse":["space-y-reverse"],size:[{size:scaleSizing()}],w:[{w:[I,"screen"].concat(_toConsumableArray3(scaleSizing()))}],"min-w":[{"min-w":[I,"screen","none"].concat(_toConsumableArray3(scaleSizing()))}],"max-w":[{"max-w":[I,"screen","none","prose",{screen:[M]}].concat(_toConsumableArray3(scaleSizing()))}],h:[{h:["screen","lh"].concat(_toConsumableArray3(scaleSizing()))}],"min-h":[{"min-h":["screen","lh","none"].concat(_toConsumableArray3(scaleSizing()))}],"max-h":[{"max-h":["screen","lh"].concat(_toConsumableArray3(scaleSizing()))}],"font-size":[{text:["base",S,isArbitraryVariableLength,isArbitraryLength]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[k,isArbitraryVariable,isArbitraryNumber]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",isPercent,isArbitraryValue]}],"font-family":[{font:[isArbitraryVariableFamilyName,isArbitraryValue,_]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[E,isArbitraryVariable,isArbitraryValue]}],"line-clamp":[{"line-clamp":[isNumber$1,"none",isArbitraryVariable,isArbitraryNumber]}],leading:[{leading:[T].concat(_toConsumableArray3(scaleUnambiguousSpacing()))}],"list-image":[{"list-image":["none",isArbitraryVariable,isArbitraryValue]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",isArbitraryVariable,isArbitraryValue]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:scaleColor()}],"text-color":[{text:scaleColor()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[].concat(_toConsumableArray3(["solid","dashed","dotted","double"]),["wavy"])}],"text-decoration-thickness":[{decoration:[isNumber$1,"from-font","auto",isArbitraryVariable,isArbitraryLength]}],"text-decoration-color":[{decoration:scaleColor()}],"underline-offset":[{"underline-offset":[isNumber$1,"auto",isArbitraryVariable,isArbitraryValue]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:scaleUnambiguousSpacing()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",isArbitraryVariable,isArbitraryValue]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",isArbitraryVariable,isArbitraryValue]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:scaleBgPosition()}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","space","round"]}]}],"bg-size":[{bg:scaleBgSize()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},isInteger,isArbitraryVariable,isArbitraryValue],radial:["",isArbitraryVariable,isArbitraryValue],conic:[isInteger,isArbitraryVariable,isArbitraryValue]},isArbitraryVariableImage,isArbitraryImage]}],"bg-color":[{bg:scaleColor()}],"gradient-from-pos":[{from:scaleGradientStopPosition()}],"gradient-via-pos":[{via:scaleGradientStopPosition()}],"gradient-to-pos":[{to:scaleGradientStopPosition()}],"gradient-from":[{from:scaleColor()}],"gradient-via":[{via:scaleColor()}],"gradient-to":[{to:scaleColor()}],rounded:[{rounded:scaleRadius()}],"rounded-s":[{"rounded-s":scaleRadius()}],"rounded-e":[{"rounded-e":scaleRadius()}],"rounded-t":[{"rounded-t":scaleRadius()}],"rounded-r":[{"rounded-r":scaleRadius()}],"rounded-b":[{"rounded-b":scaleRadius()}],"rounded-l":[{"rounded-l":scaleRadius()}],"rounded-ss":[{"rounded-ss":scaleRadius()}],"rounded-se":[{"rounded-se":scaleRadius()}],"rounded-ee":[{"rounded-ee":scaleRadius()}],"rounded-es":[{"rounded-es":scaleRadius()}],"rounded-tl":[{"rounded-tl":scaleRadius()}],"rounded-tr":[{"rounded-tr":scaleRadius()}],"rounded-br":[{"rounded-br":scaleRadius()}],"rounded-bl":[{"rounded-bl":scaleRadius()}],"border-w":[{border:scaleBorderWidth()}],"border-w-x":[{"border-x":scaleBorderWidth()}],"border-w-y":[{"border-y":scaleBorderWidth()}],"border-w-s":[{"border-s":scaleBorderWidth()}],"border-w-e":[{"border-e":scaleBorderWidth()}],"border-w-t":[{"border-t":scaleBorderWidth()}],"border-w-r":[{"border-r":scaleBorderWidth()}],"border-w-b":[{"border-b":scaleBorderWidth()}],"border-w-l":[{"border-l":scaleBorderWidth()}],"divide-x":[{"divide-x":scaleBorderWidth()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":scaleBorderWidth()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[].concat(_toConsumableArray3(["solid","dashed","dotted","double"]),["hidden","none"])}],"divide-style":[{divide:[].concat(_toConsumableArray3(["solid","dashed","dotted","double"]),["hidden","none"])}],"border-color":[{border:scaleColor()}],"border-color-x":[{"border-x":scaleColor()}],"border-color-y":[{"border-y":scaleColor()}],"border-color-s":[{"border-s":scaleColor()}],"border-color-e":[{"border-e":scaleColor()}],"border-color-t":[{"border-t":scaleColor()}],"border-color-r":[{"border-r":scaleColor()}],"border-color-b":[{"border-b":scaleColor()}],"border-color-l":[{"border-l":scaleColor()}],"divide-color":[{divide:scaleColor()}],"outline-style":[{outline:[].concat(_toConsumableArray3(["solid","dashed","dotted","double"]),["none","hidden"])}],"outline-offset":[{"outline-offset":[isNumber$1,isArbitraryVariable,isArbitraryValue]}],"outline-w":[{outline:["",isNumber$1,isArbitraryVariableLength,isArbitraryLength]}],"outline-color":[{outline:scaleColor()}],shadow:[{shadow:["","none",D,isArbitraryVariableShadow,isArbitraryShadow]}],"shadow-color":[{shadow:scaleColor()}],"inset-shadow":[{"inset-shadow":["none",L,isArbitraryVariableShadow,isArbitraryShadow]}],"inset-shadow-color":[{"inset-shadow":scaleColor()}],"ring-w":[{ring:scaleBorderWidth()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:scaleColor()}],"ring-offset-w":[{"ring-offset":[isNumber$1,isArbitraryLength]}],"ring-offset-color":[{"ring-offset":scaleColor()}],"inset-ring-w":[{"inset-ring":scaleBorderWidth()}],"inset-ring-color":[{"inset-ring":scaleColor()}],"text-shadow":[{"text-shadow":["none",U,isArbitraryVariableShadow,isArbitraryShadow]}],"text-shadow-color":[{"text-shadow":scaleColor()}],opacity:[{opacity:[isNumber$1,isArbitraryVariable,isArbitraryValue]}],"mix-blend":[{"mix-blend":[].concat(_toConsumableArray3(["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]),["plus-darker","plus-lighter"])}],"bg-blend":[{"bg-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[isNumber$1]}],"mask-image-linear-from-pos":[{"mask-linear-from":scaleMaskImagePosition()}],"mask-image-linear-to-pos":[{"mask-linear-to":scaleMaskImagePosition()}],"mask-image-linear-from-color":[{"mask-linear-from":scaleColor()}],"mask-image-linear-to-color":[{"mask-linear-to":scaleColor()}],"mask-image-t-from-pos":[{"mask-t-from":scaleMaskImagePosition()}],"mask-image-t-to-pos":[{"mask-t-to":scaleMaskImagePosition()}],"mask-image-t-from-color":[{"mask-t-from":scaleColor()}],"mask-image-t-to-color":[{"mask-t-to":scaleColor()}],"mask-image-r-from-pos":[{"mask-r-from":scaleMaskImagePosition()}],"mask-image-r-to-pos":[{"mask-r-to":scaleMaskImagePosition()}],"mask-image-r-from-color":[{"mask-r-from":scaleColor()}],"mask-image-r-to-color":[{"mask-r-to":scaleColor()}],"mask-image-b-from-pos":[{"mask-b-from":scaleMaskImagePosition()}],"mask-image-b-to-pos":[{"mask-b-to":scaleMaskImagePosition()}],"mask-image-b-from-color":[{"mask-b-from":scaleColor()}],"mask-image-b-to-color":[{"mask-b-to":scaleColor()}],"mask-image-l-from-pos":[{"mask-l-from":scaleMaskImagePosition()}],"mask-image-l-to-pos":[{"mask-l-to":scaleMaskImagePosition()}],"mask-image-l-from-color":[{"mask-l-from":scaleColor()}],"mask-image-l-to-color":[{"mask-l-to":scaleColor()}],"mask-image-x-from-pos":[{"mask-x-from":scaleMaskImagePosition()}],"mask-image-x-to-pos":[{"mask-x-to":scaleMaskImagePosition()}],"mask-image-x-from-color":[{"mask-x-from":scaleColor()}],"mask-image-x-to-color":[{"mask-x-to":scaleColor()}],"mask-image-y-from-pos":[{"mask-y-from":scaleMaskImagePosition()}],"mask-image-y-to-pos":[{"mask-y-to":scaleMaskImagePosition()}],"mask-image-y-from-color":[{"mask-y-from":scaleColor()}],"mask-image-y-to-color":[{"mask-y-to":scaleColor()}],"mask-image-radial":[{"mask-radial":[isArbitraryVariable,isArbitraryValue]}],"mask-image-radial-from-pos":[{"mask-radial-from":scaleMaskImagePosition()}],"mask-image-radial-to-pos":[{"mask-radial-to":scaleMaskImagePosition()}],"mask-image-radial-from-color":[{"mask-radial-from":scaleColor()}],"mask-image-radial-to-color":[{"mask-radial-to":scaleColor()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"]}],"mask-image-conic-pos":[{"mask-conic":[isNumber$1]}],"mask-image-conic-from-pos":[{"mask-conic-from":scaleMaskImagePosition()}],"mask-image-conic-to-pos":[{"mask-conic-to":scaleMaskImagePosition()}],"mask-image-conic-from-color":[{"mask-conic-from":scaleColor()}],"mask-image-conic-to-color":[{"mask-conic-to":scaleColor()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:scaleBgPosition()}],"mask-repeat":[{mask:["no-repeat",{repeat:["","x","y","space","round"]}]}],"mask-size":[{mask:scaleBgSize()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",isArbitraryVariable,isArbitraryValue]}],filter:[{filter:["","none",isArbitraryVariable,isArbitraryValue]}],blur:[{blur:scaleBlur()}],brightness:[{brightness:[isNumber$1,isArbitraryVariable,isArbitraryValue]}],contrast:[{contrast:[isNumber$1,isArbitraryVariable,isArbitraryValue]}],"drop-shadow":[{"drop-shadow":["","none",B,isArbitraryVariableShadow,isArbitraryShadow]}],"drop-shadow-color":[{"drop-shadow":scaleColor()}],grayscale:[{grayscale:["",isNumber$1,isArbitraryVariable,isArbitraryValue]}],"hue-rotate":[{"hue-rotate":[isNumber$1,isArbitraryVariable,isArbitraryValue]}],invert:[{invert:["",isNumber$1,isArbitraryVariable,isArbitraryValue]}],saturate:[{saturate:[isNumber$1,isArbitraryVariable,isArbitraryValue]}],sepia:[{sepia:["",isNumber$1,isArbitraryVariable,isArbitraryValue]}],"backdrop-filter":[{"backdrop-filter":["","none",isArbitraryVariable,isArbitraryValue]}],"backdrop-blur":[{"backdrop-blur":scaleBlur()}],"backdrop-brightness":[{"backdrop-brightness":[isNumber$1,isArbitraryVariable,isArbitraryValue]}],"backdrop-contrast":[{"backdrop-contrast":[isNumber$1,isArbitraryVariable,isArbitraryValue]}],"backdrop-grayscale":[{"backdrop-grayscale":["",isNumber$1,isArbitraryVariable,isArbitraryValue]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[isNumber$1,isArbitraryVariable,isArbitraryValue]}],"backdrop-invert":[{"backdrop-invert":["",isNumber$1,isArbitraryVariable,isArbitraryValue]}],"backdrop-opacity":[{"backdrop-opacity":[isNumber$1,isArbitraryVariable,isArbitraryValue]}],"backdrop-saturate":[{"backdrop-saturate":[isNumber$1,isArbitraryVariable,isArbitraryValue]}],"backdrop-sepia":[{"backdrop-sepia":["",isNumber$1,isArbitraryVariable,isArbitraryValue]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":scaleUnambiguousSpacing()}],"border-spacing-x":[{"border-spacing-x":scaleUnambiguousSpacing()}],"border-spacing-y":[{"border-spacing-y":scaleUnambiguousSpacing()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",isArbitraryVariable,isArbitraryValue]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[isNumber$1,"initial",isArbitraryVariable,isArbitraryValue]}],ease:[{ease:["linear","initial",V,isArbitraryVariable,isArbitraryValue]}],delay:[{delay:[isNumber$1,isArbitraryVariable,isArbitraryValue]}],animate:[{animate:["none",H,isArbitraryVariable,isArbitraryValue]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[G,isArbitraryVariable,isArbitraryValue]}],"perspective-origin":[{"perspective-origin":scalePositionWithArbitrary()}],rotate:[{rotate:scaleRotate()}],"rotate-x":[{"rotate-x":scaleRotate()}],"rotate-y":[{"rotate-y":scaleRotate()}],"rotate-z":[{"rotate-z":scaleRotate()}],scale:[{scale:scaleScale()}],"scale-x":[{"scale-x":scaleScale()}],"scale-y":[{"scale-y":scaleScale()}],"scale-z":[{"scale-z":scaleScale()}],"scale-3d":["scale-3d"],skew:[{skew:scaleSkew()}],"skew-x":[{"skew-x":scaleSkew()}],"skew-y":[{"skew-y":scaleSkew()}],transform:[{transform:[isArbitraryVariable,isArbitraryValue,"","none","gpu","cpu"]}],"transform-origin":[{origin:scalePositionWithArbitrary()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:scaleTranslate()}],"translate-x":[{"translate-x":scaleTranslate()}],"translate-y":[{"translate-y":scaleTranslate()}],"translate-z":[{"translate-z":scaleTranslate()}],"translate-none":["translate-none"],accent:[{accent:scaleColor()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:scaleColor()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",isArbitraryVariable,isArbitraryValue]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":scaleUnambiguousSpacing()}],"scroll-mx":[{"scroll-mx":scaleUnambiguousSpacing()}],"scroll-my":[{"scroll-my":scaleUnambiguousSpacing()}],"scroll-ms":[{"scroll-ms":scaleUnambiguousSpacing()}],"scroll-me":[{"scroll-me":scaleUnambiguousSpacing()}],"scroll-mt":[{"scroll-mt":scaleUnambiguousSpacing()}],"scroll-mr":[{"scroll-mr":scaleUnambiguousSpacing()}],"scroll-mb":[{"scroll-mb":scaleUnambiguousSpacing()}],"scroll-ml":[{"scroll-ml":scaleUnambiguousSpacing()}],"scroll-p":[{"scroll-p":scaleUnambiguousSpacing()}],"scroll-px":[{"scroll-px":scaleUnambiguousSpacing()}],"scroll-py":[{"scroll-py":scaleUnambiguousSpacing()}],"scroll-ps":[{"scroll-ps":scaleUnambiguousSpacing()}],"scroll-pe":[{"scroll-pe":scaleUnambiguousSpacing()}],"scroll-pt":[{"scroll-pt":scaleUnambiguousSpacing()}],"scroll-pr":[{"scroll-pr":scaleUnambiguousSpacing()}],"scroll-pb":[{"scroll-pb":scaleUnambiguousSpacing()}],"scroll-pl":[{"scroll-pl":scaleUnambiguousSpacing()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",isArbitraryVariable,isArbitraryValue]}],fill:[{fill:["none"].concat(_toConsumableArray3(scaleColor()))}],"stroke-w":[{stroke:[isNumber$1,isArbitraryVariableLength,isArbitraryLength,isArbitraryNumber]}],stroke:[{stroke:["none"].concat(_toConsumableArray3(scaleColor()))}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}})),{}),Tn={},Mn={};function requireLog(){return mn||(mn=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Log=e.LogLevel=void 0;var _=" DEBUG ",S="  INFO ",k="  WARN ",E=" ERROR ";function addTag(e){return e.unshift("[Statsig]"),e}e.LogLevel={None:0,Error:1,Warn:2,Info:3,Debug:4};var T=function(){function Log(){_classCallCheck3(this,Log)}return _createClass3(Log,null,[{key:"info",value:function(){if(Log.level>=e.LogLevel.Info){for(var _,k=arguments.length,E=new Array(k),T=0;T<k;T++)E[T]=arguments[T];(_=console).info.apply(_,[S].concat(_toConsumableArray3(addTag(E))))}}},{key:"debug",value:function(){if(Log.level>=e.LogLevel.Debug){for(var S,k=arguments.length,E=new Array(k),T=0;T<k;T++)E[T]=arguments[T];(S=console).debug.apply(S,[_].concat(_toConsumableArray3(addTag(E))))}}},{key:"warn",value:function(){if(Log.level>=e.LogLevel.Warn){for(var _,S=arguments.length,E=new Array(S),T=0;T<S;T++)E[T]=arguments[T];(_=console).warn.apply(_,[k].concat(_toConsumableArray3(addTag(E))))}}},{key:"error",value:function(){if(Log.level>=e.LogLevel.Error){for(var _,S=arguments.length,k=new Array(S),T=0;T<S;T++)k[T]=arguments[T];(_=console).error.apply(_,[E].concat(_toConsumableArray3(addTag(k))))}}}])}();e.Log=T,T.level=e.LogLevel.Warn}(Mn)),Mn}function require$_StatsigGlobal(){return yn||(yn=1,function(e){var _,S,k;Object.defineProperty(e,"__esModule",{value:!0}),e._getInstance=e._getStatsigGlobalFlag=e._getStatsigGlobal=void 0;var E=requireLog();e._getStatsigGlobal=function(){try{return"undefined"!=typeof __STATSIG__?__STATSIG__:O}catch(fo){return O}};e._getStatsigGlobalFlag=function(_){return(0,e._getStatsigGlobal)()[_]};e._getInstance=function(_){var S=(0,e._getStatsigGlobal)();return _?S.instances&&S.instances[_]:(S.instances&&Object.keys(S.instances).length>1&&E.Log.warn("Call made to Statsig global instance without an SDK key but there is more than one client instance. If you are using mulitple clients, please specify the SDK key."),S.firstInstance)};var T="__STATSIG__",M="undefined"!=typeof window?window:{},I=void 0!==L?L:{},R="undefined"!=typeof globalThis?globalThis:{},O=null!==(k=null!==(S=null!==(_=M[T])&&void 0!==_?_:I[T])&&void 0!==S?S:R[T])&&void 0!==k?k:{instance:e._getInstance};M[T]=O,I[T]=O,R[T]=O}(Tn)),Tn}var In,Rn={};function requireDiagnostics(){return In||(In=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Diagnostics=void 0;var _=new Map,S="start",k="end",E="statsig::diagnostics";function _createMarker(e,_,S,k){return Object.assign({key:S,action:_,step:k,timestamp:Date.now()},e)}function _addMarker(e,S){var k,E=null!==(k=_.get(e))&&void 0!==k?k:[];E.push(S),_.set(e,E)}function _safeGetField(e,_){if(_ in e)return e[_]}e.Diagnostics={_getMarkers:function(e){return _.get(e)},_markInitOverallStart:function(e){_addMarker(e,_createMarker({},S,"overall"))},_markInitOverallEnd:function(e,_,S){_addMarker(e,_createMarker({success:_,error:_?void 0:{name:"InitializeError",message:"Failed to initialize"},evaluationDetails:S},k,"overall"))},_markInitNetworkReqStart:function(e,_){_addMarker(e,_createMarker(_,S,"initialize","network_request"))},_markInitNetworkReqEnd:function(e,_){_addMarker(e,_createMarker(_,k,"initialize","network_request"))},_markInitProcessStart:function(e){_addMarker(e,_createMarker({},S,"initialize","process"))},_markInitProcessEnd:function(e,_){_addMarker(e,_createMarker(_,k,"initialize","process"))},_clearMarkers:function(e){_.delete(e)},_formatError:function(e){if(e&&"object"===_typeof3(e))return{code:_safeGetField(e,"code"),name:_safeGetField(e,"name"),message:_safeGetField(e,"message")}},_getDiagnosticsData:function(_,S,k,E){var T;return{success:!0===(null==_?void 0:_.ok),statusCode:null==_?void 0:_.status,sdkRegion:null===(T=null==_?void 0:_.headers)||void 0===T?void 0:T.get("x-statsig-region"),isDelta:!0===k.includes('"is_delta":true')||void 0,attempt:S,error:e.Diagnostics._formatError(E)}},_enqueueDiagnosticsEvent:function(_,S,k,T){var M=e.Diagnostics._getMarkers(k);if(null==M||M.length<=0)return-1;var I=M[M.length-1].timestamp-M[0].timestamp;e.Diagnostics._clearMarkers(k);var R=function(e,_){var S={eventName:E,user:e,value:null,metadata:_,time:Date.now()};return S}(_,{context:"initialize",markers:M.slice(),statsigOptions:T});return S.enqueue(R),I}}}(Rn)),Rn}var Pn,On,Dn,Ln={},Fn={},Un={},Bn={};function requireTypingUtils(){if(Pn)return Bn;return Pn=1,Object.defineProperty(Bn,"__esModule",{value:!0}),Bn._isTypeMatch=Bn._typeOf=void 0,Bn._typeOf=function(e){return Array.isArray(e)?"array":_typeof3(e)},Bn._isTypeMatch=function(e,_){var typeOf=function(e){return Array.isArray(e)?"array":null===e?"null":_typeof3(e)};return typeOf(e)===typeOf(_)},Bn}function requireHashing(){return On||(On=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e._getSortedObject=e._DJB2Object=e._DJB2=void 0;var _=requireTypingUtils();e._DJB2=function(e){for(var _=0,S=0;S<e.length;S++){_=(_<<5)-_+e.charCodeAt(S),_&=_}return String(_>>>0)};e._DJB2Object=function(_,S){return(0,e._DJB2)(JSON.stringify((0,e._getSortedObject)(_,S)))};e._getSortedObject=function(S,k){if(null==S)return null;var E=Object.keys(S).sort(),T={};return E.forEach(function(E){var M=S[E];0!==k&&"object"===(0,_._typeOf)(M)?T[E]=(0,e._getSortedObject)(M,null!=k?k-1:k):T[E]=M}),T}}(Un)),Un}function requireCacheKey(){if(Dn)return Fn;Dn=1,Object.defineProperty(Fn,"__esModule",{value:!0}),Fn._getStorageKey=Fn._getUserStorageKey=void 0;var e=requireHashing();function _getUserStorageKey(_,S,k){var E;if(k)return k(_,S);var T=S&&S.customIDs?S.customIDs:{},M=["uid:".concat(null!==(E=null==S?void 0:S.userID)&&void 0!==E?E:""),"cids:".concat(Object.keys(T).sort(function(e,_){return e.localeCompare(_)}).map(function(e){return"".concat(e,"-").concat(T[e])}).join(",")),"k:".concat(_)];return(0,e._DJB2)(M.join("|"))}return Fn._getUserStorageKey=_getUserStorageKey,Fn._getStorageKey=function(_,S,k){return S?_getUserStorageKey(_,S,k):(0,e._DJB2)("k:".concat(_))},Fn}var Nn,zn={};function requireNetworkConfig(){return Nn||(Nn=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.NetworkParam=e.NetworkDefault=e.Endpoint=void 0,e.Endpoint={_initialize:"initialize",_rgstr:"rgstr",_download_config_specs:"download_config_specs"},e.NetworkDefault=_defineProperty3(_defineProperty3(_defineProperty3({},e.Endpoint._rgstr,"https://prodregistryv2.org/v1"),e.Endpoint._initialize,"https://featureassets.org/v1"),e.Endpoint._download_config_specs,"https://api.statsigcdn.com/v1"),e.NetworkParam={EventCount:"ec",SdkKey:"k",SdkType:"st",SdkVersion:"sv",Time:"t",SessionID:"sid",StatsigEncoded:"se",IsGzipped:"gz"}}(zn)),zn}var Gn,jn={};function requireSafeJs(){return Gn||(Gn=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e._getUnloadEvent=e._getCurrentPageUrlSafe=e._addDocumentEventListenerSafe=e._addWindowEventListenerSafe=e._isServerEnv=e._getDocumentSafe=e._getWindowSafe=void 0;e._getWindowSafe=function(){return"undefined"!=typeof window?window:null};e._getDocumentSafe=function(){var _,S=(0,e._getWindowSafe)();return null!==(_=null==S?void 0:S.document)&&void 0!==_?_:null};e._isServerEnv=function(){if(null!==(0,e._getDocumentSafe)())return!1;var _="undefined"!=typeof process&&null!=process.versions&&null!=process.versions.node;return"string"==typeof EdgeRuntime||_};e._addWindowEventListenerSafe=function(_,S){var k=(0,e._getWindowSafe)();"function"==typeof(null==k?void 0:k.addEventListener)&&k.addEventListener(_,S)};e._addDocumentEventListenerSafe=function(_,S){var k=(0,e._getDocumentSafe)();"function"==typeof(null==k?void 0:k.addEventListener)&&k.addEventListener(_,S)};e._getCurrentPageUrlSafe=function(){var _;try{return null===(_=(0,e._getWindowSafe)())||void 0===_?void 0:_.location.href.split(/[?#]/)[0]}catch(S){return}};e._getUnloadEvent=function(){var _=(0,e._getWindowSafe)();return _&&"onpagehide"in _?"pagehide":"beforeunload"}}(jn)),jn}var Vn,Hn={};function requireStatsigEvent(){if(Vn)return Hn;Vn=1,Object.defineProperty(Hn,"__esModule",{value:!0}),Hn._createLayerParameterExposure=Hn._createConfigExposure=Hn._mapExposures=Hn._createGateExposure=Hn._isExposureEvent=void 0;var e="statsig::config_exposure",_="statsig::gate_exposure",S="statsig::layer_exposure",_createExposure=function(e,_,S,k,E){return S.bootstrapMetadata&&(k.bootstrapMetadata=S.bootstrapMetadata),{eventName:e,user:_,value:null,metadata:_addEvaluationDetailsToMetadata(S,k),secondaryExposures:E,time:Date.now()}};Hn._isExposureEvent=function(k){var E=k.eventName;return E===_||E===e||E===S};function _mapExposures(e,_){return e.map(function(e){return"string"==typeof e?(null!=_?_:{})[e]:e}).filter(function(e){return null!=e})}Hn._createGateExposure=function(e,S,k){var E,T,M,I={gate:S.name,gateValue:String(S.value),ruleID:S.ruleID};return null!=(null===(E=S.__evaluation)||void 0===E?void 0:E.version)&&(I.configVersion=S.__evaluation.version),_createExposure(_,e,S.details,I,_mapExposures(null!==(M=null===(T=S.__evaluation)||void 0===T?void 0:T.secondary_exposures)&&void 0!==M?M:[],k))},Hn._mapExposures=_mapExposures;Hn._createConfigExposure=function(_,S,k){var E,T,M,I,R={config:S.name,ruleID:S.ruleID};return null!=(null===(E=S.__evaluation)||void 0===E?void 0:E.version)&&(R.configVersion=S.__evaluation.version),null!=(null===(T=S.__evaluation)||void 0===T?void 0:T.passed)&&(R.rulePassed=String(S.__evaluation.passed)),_createExposure(e,_,S.details,R,_mapExposures(null!==(I=null===(M=S.__evaluation)||void 0===M?void 0:M.secondary_exposures)&&void 0!==I?I:[],k))};Hn._createLayerParameterExposure=function(e,_,k,E){var T,M,I,R,O,D,L,U=_.__evaluation,B=!0===(null===(T=null==U?void 0:U.explicit_parameters)||void 0===T?void 0:T.includes(k)),z="",G=null!==(M=null==U?void 0:U.undelegated_secondary_exposures)&&void 0!==M?M:[];B&&(z=null!==(I=U.allocated_experiment_name)&&void 0!==I?I:"",G=null!==(R=U.secondary_exposures)&&void 0!==R?R:[]);var j=null===(O=_.__evaluation)||void 0===O?void 0:O.parameter_rule_ids,V={config:_.name,parameterName:k,ruleID:null!==(D=null==j?void 0:j[k])&&void 0!==D?D:_.ruleID,allocatedExperiment:z,isExplicitParameter:String(B)};return null!=(null===(L=_.__evaluation)||void 0===L?void 0:L.version)&&(V.configVersion=_.__evaluation.version),_createExposure(S,e,_.details,V,_mapExposures(G,E))};var _addEvaluationDetailsToMetadata=function(e,_){return _.reason=e.reason,e.lcut&&(_.lcut=String(e.lcut)),e.receivedAt&&(_.receivedAt=String(e.receivedAt)),_};return Hn}var Wn,qn={};function requireStatsigOptionsCommon(){return Wn||(Wn=1,Object.defineProperty(qn,"__esModule",{value:!0}),qn.LoggingEnabledOption=qn.LogEventCompressionMode=void 0,qn.LogEventCompressionMode={Disabled:"d",Enabled:"e",Forced:"f"},qn.LoggingEnabledOption={disabled:"disabled",browserOnly:"browser-only",always:"always"}),qn}var Xn,Yn={};function requireStorageProvider(){return Xn||(Xn=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e._setObjectInStorage=e._getObjectFromStorage=e.Storage=void 0;var _=requireLog(),S=requireSafeJs(),k={},E={isReady:function(){return!0},isReadyResolver:function(){return null},getProviderName:function(){return"InMemory"},getItem:function(e){return k[e]?k[e]:null},setItem:function(e,_){k[e]=_},removeItem:function(e){delete k[e]},getAllKeys:function(){return Object.keys(k)}},T=null;try{var M=(0,S._getWindowSafe)();M&&M.localStorage&&"function"==typeof M.localStorage.getItem&&(T={isReady:function(){return!0},isReadyResolver:function(){return null},getProviderName:function(){return"LocalStorage"},getItem:function(e){return M.localStorage.getItem(e)},setItem:function(e,_){return M.localStorage.setItem(e,_)},removeItem:function(e){return M.localStorage.removeItem(e)},getAllKeys:function(){return Object.keys(M.localStorage)}})}catch(O){_.Log.warn("Failed to setup localStorageProvider.")}var I=null!=T?T:E,R=I;function _inMemoryBreaker(_){try{return _()}catch(O){if(O instanceof Error&&"SecurityError"===O.name)return e.Storage._setProvider(E),null;throw O}}e.Storage={isReady:function(){return R.isReady()},isReadyResolver:function(){return R.isReadyResolver()},getProviderName:function(){return R.getProviderName()},getItem:function(e){return _inMemoryBreaker(function(){return R.getItem(e)})},setItem:function(e,_){return _inMemoryBreaker(function(){return R.setItem(e,_)})},removeItem:function(e){return R.removeItem(e)},getAllKeys:function(){return R.getAllKeys()},_setProvider:function(e){I=e,R=e},_setDisabled:function(e){R=e?E:I}},e._getObjectFromStorage=function(_){var S=e.Storage.getItem(_);return JSON.parse(null!=S?S:"null")},e._setObjectInStorage=function(_,S){e.Storage.setItem(_,JSON.stringify(S))}}(Yn)),Yn}var Kn,Jn={};function requireUrlConfiguration(){if(Kn)return Jn;Kn=1,Object.defineProperty(Jn,"__esModule",{value:!0}),Jn.UrlConfiguration=void 0;var e=requireHashing(),_=requireNetworkConfig(),S=_defineProperty3(_defineProperty3(_defineProperty3({},_.Endpoint._initialize,"i"),_.Endpoint._rgstr,"e"),_.Endpoint._download_config_specs,"d"),k=function(){return _createClass3(function UrlConfiguration(e,k,E,T){_classCallCheck3(this,UrlConfiguration),this.customUrl=null,this.fallbackUrls=null,this.endpoint=e,this.endpointDnsKey=S[e],k&&(this.customUrl=k),!k&&E&&(this.customUrl=E.endsWith("/")?"".concat(E).concat(e):"".concat(E,"/").concat(e)),T&&(this.fallbackUrls=T);var M=_.NetworkDefault[e];this.defaultUrl="".concat(M,"/").concat(e)},[{key:"getUrl",value:function(){var e;return null!==(e=this.customUrl)&&void 0!==e?e:this.defaultUrl}},{key:"getChecksum",value:function(){var _,S=(null!==(_=this.fallbackUrls)&&void 0!==_?_:[]).sort().join(",");return(0,e._DJB2)(this.customUrl+S)}}])}();return Jn.UrlConfiguration=k,Jn}var Qn,Zn,$n={};function requireVisibilityObserving(){return Qn||(Qn=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e._notifyVisibilityChanged=e._subscribeToVisiblityChanged=e._isUnloading=e._isCurrentlyVisible=void 0;var _=requireSafeJs(),S="foreground",k="background",E=[],T=S,M=!1;e._isCurrentlyVisible=function(){return T===S};e._isUnloading=function(){return M};e._subscribeToVisiblityChanged=function(e){E.unshift(e)};e._notifyVisibilityChanged=function(e){e!==T&&(T=e,E.forEach(function(_){return _(e)}))},(0,_._addWindowEventListenerSafe)("focus",function(){M=!1,(0,e._notifyVisibilityChanged)(S)}),(0,_._addWindowEventListenerSafe)("blur",function(){return(0,e._notifyVisibilityChanged)(k)}),(0,_._addDocumentEventListenerSafe)("visibilitychange",function(){(0,e._notifyVisibilityChanged)("visible"===document.visibilityState?S:k)}),(0,_._addWindowEventListenerSafe)((0,_._getUnloadEvent)(),function(){M=!0,(0,e._notifyVisibilityChanged)(k)})}($n)),$n}function requireEventLogger(){if(Zn)return Ln;Zn=1;var e=Ln&&Ln.__awaiter||function(e,_,S,k){return new(S||(S=Promise))(function(E,T){function fulfilled(e){try{step(k.next(e))}catch(fo){T(fo)}}function rejected(e){try{step(k.throw(e))}catch(fo){T(fo)}}function step(e){var _;e.done?E(e.value):(_=e.value,_ instanceof S?_:new S(function(e){e(_)})).then(fulfilled,rejected)}step((k=k.apply(e,_||[])).next())})};Object.defineProperty(Ln,"__esModule",{value:!0}),Ln.EventLogger=void 0;var _=requireCacheKey(),S=requireHashing(),k=requireLog(),E=requireNetworkConfig(),T=requireSafeJs(),M=requireStatsigEvent(),I=requireStatsigOptionsCommon(),R=requireStorageProvider(),O=requireUrlConfiguration(),D=requireVisibilityObserving(),L={},U="startup",B="gained_focus",z=function(){function EventLogger(e,_,S,T){var M,R;_classCallCheck3(this,EventLogger),this._sdkKey=e,this._emitter=_,this._network=S,this._options=T,this._queue=[],this._lastExposureTimeMap={},this._nonExposedChecks={},this._hasRunQuickFlush=!1,this._creationTime=Date.now(),this._loggingEnabled=null!==(M=null==T?void 0:T.loggingEnabled)&&void 0!==M?M:!0===(null==T?void 0:T.disableLogging)?I.LoggingEnabledOption.disabled:I.LoggingEnabledOption.browserOnly,(null==T?void 0:T.loggingEnabled)&&void 0!==T.disableLogging&&k.Log.warn("Detected both loggingEnabled and disableLogging options. loggingEnabled takes precedence - please remove disableLogging."),this._maxQueueSize=null!==(R=null==T?void 0:T.loggingBufferMaxSize)&&void 0!==R?R:100;var D=null==T?void 0:T.networkConfig;this._logEventUrlConfig=new O.UrlConfiguration(E.Endpoint._rgstr,null==D?void 0:D.logEventUrl,null==D?void 0:D.api,null==D?void 0:D.logEventFallbackUrls)}return _createClass3(EventLogger,[{key:"setLogEventCompressionMode",value:function(e){this._network.setLogEventCompressionMode(e)}},{key:"setLoggingEnabled",value:function(e){if("disabled"===this._loggingEnabled&&"disabled"!==e){var _,S=this._getStorageKey(),k=(0,R._getObjectFromStorage)(S);if(k)(_=this._queue).push.apply(_,_toConsumableArray3(k));R.Storage.removeItem(S)}this._loggingEnabled=e}},{key:"enqueue",value:function(e){this._shouldLogEvent(e)&&(this._normalizeAndAppendEvent(e),this._quickFlushIfNeeded(),this._queue.length>this._maxQueueSize&&EventLogger._safeFlushAndForget(this._sdkKey))}},{key:"incrementNonExposureCount",value:function(e){var _,S=null!==(_=this._nonExposedChecks[e])&&void 0!==_?_:0;this._nonExposedChecks[e]=S+1}},{key:"reset",value:function(){this.flush().catch(function(){}),this._lastExposureTimeMap={}}},{key:"start",value:function(){var e,_=this,S=(0,T._isServerEnv)();S&&"always"!==(null===(e=this._options)||void 0===e?void 0:e.loggingEnabled)||(L[this._sdkKey]=this,S||(0,D._subscribeToVisiblityChanged)(function(e){"background"===e?EventLogger._safeFlushAndForget(_._sdkKey):"foreground"===e&&EventLogger._safeRetryFailedLogs(_._sdkKey)}),this._retryFailedLogs(U),this._startBackgroundFlushInterval())}},{key:"stop",value:function(){return e(this,void 0,void 0,_regenerator().m(function _callee7(){return _regenerator().w(function(e){for(;;)switch(e.n){case 0:return this._flushIntervalId&&(clearInterval(this._flushIntervalId),this._flushIntervalId=null),delete L[this._sdkKey],e.n=1,this.flush();case 1:return e.a(2)}},_callee7,this)}))}},{key:"flush",value:function(){return e(this,void 0,void 0,_regenerator().m(function _callee8(){var e;return _regenerator().w(function(_){for(;;)switch(_.n){case 0:if(this._appendAndResetNonExposedChecks(),0!==this._queue.length){_.n=1;break}return _.a(2);case 1:return e=this._queue,this._queue=[],_.n=2,this._sendEvents(e);case 2:return _.a(2)}},_callee8,this)}))}},{key:"_quickFlushIfNeeded",value:function(){var e=this;this._hasRunQuickFlush||(this._hasRunQuickFlush=!0,Date.now()-this._creationTime>200||setTimeout(function(){return EventLogger._safeFlushAndForget(e._sdkKey)},200))}},{key:"_shouldLogEvent",value:function(e){var S;if("always"!==(null===(S=this._options)||void 0===S?void 0:S.loggingEnabled)&&(0,T._isServerEnv)())return!1;if(!(0,M._isExposureEvent)(e))return!0;var k=e.user?e.user:{statsigEnvironment:void 0},E=(0,_._getUserStorageKey)(this._sdkKey,k),I=e.metadata?e.metadata:{},R=[e.eventName,E,I.gate,I.config,I.ruleID,I.allocatedExperiment,I.parameterName,String(I.isExplicitParameter),I.reason].join("|"),O=this._lastExposureTimeMap[R],D=Date.now();return!(O&&D-O<6e5)&&(Object.keys(this._lastExposureTimeMap).length>1e3&&(this._lastExposureTimeMap={}),this._lastExposureTimeMap[R]=D,!0)}},{key:"_sendEvents",value:function(_){return e(this,void 0,void 0,_regenerator().m(function _callee9(){var e,S,E,T,M;return _regenerator().w(function(I){for(;;)switch(I.p=I.n){case 0:if("disabled"!==this._loggingEnabled){I.n=1;break}return this._saveFailedLogsToStorage(_),I.a(2,!1);case 1:if(I.p=1,E=(0,D._isUnloading)(),T=E&&this._network.isBeaconSupported()&&null==(null===(S=null===(e=this._options)||void 0===e?void 0:e.networkConfig)||void 0===S?void 0:S.networkOverrideFunc),this._emitter({name:"pre_logs_flushed",events:_}),!T){I.n=2;break}M=this._sendEventsViaBeacon(_),I.n=4;break;case 2:return I.n=3,this._sendEventsViaPost(_);case 3:M=I.v;case 4:if(!M.success){I.n=5;break}return this._emitter({name:"logs_flushed",events:_}),I.a(2,!0);case 5:return k.Log.warn("Failed to flush events."),this._saveFailedLogsToStorage(_),I.a(2,!1);case 6:I.n=8;break;case 7:return I.p=7,I.v,k.Log.warn("Failed to flush events."),I.a(2,!1);case 8:return I.a(2)}},_callee9,this,[[1,7]])}))}},{key:"_sendEventsViaPost",value:function(_){return e(this,void 0,void 0,_regenerator().m(function _callee0(){var e,S,k;return _regenerator().w(function(E){for(;;)switch(E.n){case 0:return E.n=1,this._network.post(this._getRequestData(_));case 1:return S=E.v,k=null!==(e=null==S?void 0:S.code)&&void 0!==e?e:-1,E.a(2,{success:k>=200&&k<300})}},_callee0,this)}))}},{key:"_sendEventsViaBeacon",value:function(e){return{success:this._network.beacon(this._getRequestData(e))}}},{key:"_getRequestData",value:function(e){return{sdkKey:this._sdkKey,data:{events:e},urlConfig:this._logEventUrlConfig,retries:3,isCompressable:!0,params:_defineProperty3({},E.NetworkParam.EventCount,String(e.length)),credentials:"same-origin"}}},{key:"_saveFailedLogsToStorage",value:function(e){for(;e.length>500;)e.shift();var _=this._getStorageKey();try{var S=this._getFailedLogsFromStorage(_);(0,R._setObjectInStorage)(_,[].concat(_toConsumableArray3(S),_toConsumableArray3(e)))}catch(Kb){k.Log.warn("Unable to save failed logs to storage")}}},{key:"_getFailedLogsFromStorage",value:function(e){var _=[];try{var S=(0,R._getObjectFromStorage)(e);return Array.isArray(S)&&(_=S),_}catch(Kb){return[]}}},{key:"_retryFailedLogs",value:function(_){var S=this,E=this._getStorageKey();e(S,void 0,void 0,_regenerator().m(function _callee1(){var e;return _regenerator().w(function(S){for(;;)switch(S.n){case 0:if(R.Storage.isReady()){S.n=1;break}return S.n=1,R.Storage.isReadyResolver();case 1:if(e=(0,R._getObjectFromStorage)(E)){S.n=2;break}return S.a(2);case 2:return _===U&&R.Storage.removeItem(E),S.n=3,this._sendEvents(e);case 3:S.v&&_===B&&R.Storage.removeItem(E);case 4:return S.a(2)}},_callee1,this)})).catch(function(){k.Log.warn("Failed to flush stored logs")})}},{key:"_getStorageKey",value:function(){return"statsig.failed_logs.".concat((0,S._DJB2)(this._sdkKey))}},{key:"_normalizeAndAppendEvent",value:function(e){e.user&&(e.user=Object.assign({},e.user),delete e.user.privateAttributes);var _={},S=this._getCurrentPageUrl();S&&(_.statsigMetadata={currentPage:S});var E=Object.assign(Object.assign({},e),_);k.Log.debug("Enqueued Event:",E),this._queue.push(E)}},{key:"_appendAndResetNonExposedChecks",value:function(){0!==Object.keys(this._nonExposedChecks).length&&(this._normalizeAndAppendEvent({eventName:"statsig::non_exposed_checks",user:null,time:Date.now(),metadata:{checks:Object.assign({},this._nonExposedChecks)}}),this._nonExposedChecks={})}},{key:"_getCurrentPageUrl",value:function(){var e;if(!1!==(null===(e=this._options)||void 0===e?void 0:e.includeCurrentPageUrlWithEvents))return(0,T._getCurrentPageUrlSafe)()}},{key:"_startBackgroundFlushInterval",value:function(){var e,_,S=this,k=null!==(_=null===(e=this._options)||void 0===e?void 0:e.loggingIntervalMs)&&void 0!==_?_:1e4,E=setInterval(function(){var e=L[S._sdkKey];e&&e._flushIntervalId===E?EventLogger._safeFlushAndForget(S._sdkKey):clearInterval(E)},k);this._flushIntervalId=E}}],[{key:"_safeFlushAndForget",value:function(e){var _;null===(_=L[e])||void 0===_||_.flush().catch(function(){})}},{key:"_safeRetryFailedLogs",value:function(e){var _;null===(_=L[e])||void 0===_||_._retryFailedLogs(B)}}])}();return Ln.EventLogger=z,Ln}var ei,ti={};function requireStatsigMetadata(){return ei||(ei=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.StatsigMetadataProvider=e.SDK_VERSION=void 0,e.SDK_VERSION="3.29.1";var _={sdkVersion:e.SDK_VERSION,sdkType:"js-mono"};e.StatsigMetadataProvider={get:function(){return _},add:function(e){_=Object.assign(Object.assign({},_),e)}}}(ti)),ti}var ri,ni={};var ii,ai,oi={},si={},ui={};function requireUUID(){if(ii)return ui;return ii=1,Object.defineProperty(ui,"__esModule",{value:!0}),ui.getUUID=void 0,ui.getUUID=function(){if("undefined"!=typeof crypto&&"function"==typeof crypto.randomUUID)return crypto.randomUUID();var e=(new Date).getTime(),_="undefined"!=typeof performance&&performance.now&&1e3*performance.now()||0,S="89ab"[Math.floor(4*Math.random())];return"xxxxxxxx-xxxx-4xxx-".concat(S,"xxx-xxxxxxxxxxxx").replace(/[xy]/g,function(S){var k=16*Math.random();return e>0?(k=(e+k)%16|0,e=Math.floor(e/16)):(k=(_+k)%16|0,_=Math.floor(_/16)),("x"===S?k:7&k|8).toString(16)})},ui}function requireStableID(){if(ai)return si;ai=1,Object.defineProperty(si,"__esModule",{value:!0}),si.getCookieName=si.StableID=void 0;var e=requireCacheKey(),_=requireLog(),S=requireSafeJs(),k=requireStorageProvider(),E=requireUUID(),T={},M={},I={};function _getStableIDStorageKey(_){return"statsig.stable_id.".concat((0,e._getStorageKey)(_))}function _persistToStorage(e,S){var E=_getStableIDStorageKey(S);try{(0,k._setObjectInStorage)(E,e)}catch(fo){_.Log.warn("Failed to save StableID to storage")}}function _persistToCookie(e,_){if(M[_]&&null!=(0,S._getDocumentSafe)()){var k=new Date;k.setFullYear(k.getFullYear()+1),document.cookie="".concat(getCookieName(_),"=").concat(encodeURIComponent(e),"; expires=").concat(k.toUTCString(),"; path=/")}}function getCookieName(_){return"statsig.stable_id.".concat((0,e._getStorageKey)(_))}return si.StableID={cookiesEnabled:!1,randomID:Math.random().toString(36),get:function(e){if(I[e])return null;if(null!=T[e])return T[e];var _=null;return _=function(e){if(!M[e]||null==(0,S._getDocumentSafe)())return null;var _,k=document.cookie.split(";"),E=_createForOfIteratorHelper2(k);try{for(E.s();!(_=E.n()).done;){var T=_slicedToArray(_.value.trim().split("="),2),I=T[0],R=T[1];if(I===getCookieName(e))return decodeURIComponent(R)}}catch(O){E.e(O)}finally{E.f()}return null}(e),null!=_?(T[e]=_,_persistToStorage(_,e),_):(_=function(e){var _=_getStableIDStorageKey(e);return(0,k._getObjectFromStorage)(_)}(e),null==_&&(_=(0,E.getUUID)()),_persistToStorage(_,e),_persistToCookie(_,e),T[e]=_,_)},setOverride:function(e,_){T[_]=e,_persistToStorage(e,_),_persistToCookie(e,_)},_setCookiesEnabled:function(e,_){M[e]=_},_setDisabled:function(e,_){I[e]=_}},si.getCookieName=getCookieName,si}var li,ci={};function requireStatsigUser(){if(li)return ci;li=1,Object.defineProperty(ci,"__esModule",{value:!0}),ci._getFullUserHash=ci._normalizeUser=void 0;var e=requireHashing(),_=requireLog();return ci._normalizeUser=function(e,S,k){try{var E=JSON.parse(JSON.stringify(e));return null!=S&&null!=S.environment?E.statsigEnvironment=S.environment:null!=k&&(E.statsigEnvironment={tier:k}),E}catch(T){return _.Log.error("Failed to JSON.stringify user"),{statsigEnvironment:void 0}}},ci._getFullUserHash=function(_){return _?(0,e._DJB2Object)(_):null},ci}var hi,di,fi={};function requireTypedJsonParse(){if(hi)return fi;hi=1,Object.defineProperty(fi,"__esModule",{value:!0}),fi._typedJsonParse=void 0;var e=requireLog();return fi._typedJsonParse=function(_,S,k){try{var E=JSON.parse(_);if(E&&"object"===_typeof3(E)&&S in E)return E}catch(Kb){}return e.Log.error("Failed to parse ".concat(k)),null},fi}function requireDataAdapterCore(){if(di)return oi;di=1;var e=oi&&oi.__awaiter||function(e,_,S,k){return new(S||(S=Promise))(function(E,T){function fulfilled(e){try{step(k.next(e))}catch(fo){T(fo)}}function rejected(e){try{step(k.throw(e))}catch(fo){T(fo)}}function step(e){var _;e.done?E(e.value):(_=e.value,_ instanceof S?_:new S(function(e){e(_)})).then(fulfilled,rejected)}step((k=k.apply(e,_||[])).next())})};Object.defineProperty(oi,"__esModule",{value:!0}),oi._makeDataAdapterResult=oi.DataAdapterCore=void 0;var _=requireLog(),S=requireStableID(),k=requireStatsigUser(),E=requireStorageProvider(),T=requireTypedJsonParse(),M=function(){return _createClass3(function DataAdapterCore(e,_){_classCallCheck3(this,DataAdapterCore),this._adapterName=e,this._cacheSuffix=_,this._options=null,this._sdkKey=null,this._cacheLimit=10,this._lastModifiedStoreKey="statsig.last_modified_time.".concat(_),this._inMemoryCache=new I},[{key:"attach",value:function(e,_,S){this._sdkKey=e,this._options=_}},{key:"getDataSync",value:function(e){var _=e&&(0,k._normalizeUser)(e,this._options),S=this._getCacheKey(_),E=this._inMemoryCache.get(S,_);if(E&&this._getIsCacheValueValid(E))return E;var T=this._loadFromCache(S);return T&&this._getIsCacheValueValid(T)?(this._inMemoryCache.add(S,T,this._cacheLimit),this._inMemoryCache.get(S,_)):null}},{key:"setData",value:function(e,_){var S=_&&(0,k._normalizeUser)(_,this._options),E=this._getCacheKey(S);this._inMemoryCache.add(E,_makeDataAdapterResult("Bootstrap",e,null,S),this._cacheLimit)}},{key:"_getIsCacheValueValid",value:function(e){return null==e.stableID||e.stableID===S.StableID.get(this._getSdkKey())}},{key:"_getDataAsyncImpl",value:function(S,k,T){return e(this,void 0,void 0,_regenerator().m(function _callee10(){var e,M;return _regenerator().w(function(I){for(;;)switch(I.n){case 0:if(E.Storage.isReady()){I.n=1;break}return I.n=1,E.Storage.isReadyResolver();case 1:return e=null!=S?S:this.getDataSync(k),M=[this._fetchAndPrepFromNetwork(e,k,T)],(null==T?void 0:T.timeoutMs)&&M.push(new Promise(function(e){return setTimeout(e,T.timeoutMs)}).then(function(){return _.Log.debug("Fetching latest value timed out"),null})),I.n=2,Promise.race(M);case 2:return I.a(2,I.v)}},_callee10,this)}))}},{key:"_prefetchDataImpl",value:function(_,S){return e(this,void 0,void 0,_regenerator().m(function _callee11(){var e,E,T;return _regenerator().w(function(M){for(;;)switch(M.n){case 0:return e=_&&(0,k._normalizeUser)(_,this._options),E=this._getCacheKey(e),M.n=1,this._getDataAsyncImpl(null,e,S);case 1:(T=M.v)&&this._inMemoryCache.add(E,Object.assign(Object.assign({},T),{source:"Prefetch"}),this._cacheLimit);case 2:return M.a(2)}},_callee11,this)}))}},{key:"_fetchAndPrepFromNetwork",value:function(k,E,M){return e(this,void 0,void 0,_regenerator().m(function _callee12(){var e,I,R,O,D,L,U,B,z;return _regenerator().w(function(G){for(;;)switch(G.n){case 0:return I=null!==(e=null==k?void 0:k.data)&&void 0!==e?e:null,R=null!=k&&this._isCachedResultValidFor204(k,E),G.n=1,this._fetchFromNetwork(I,E,M,R);case 1:if(O=G.v){G.n=2;break}return _.Log.debug("No response returned for latest value"),G.a(2,null);case 2:if(D=(0,T._typedJsonParse)(O,"has_updates","Response"),L=this._getSdkKey(),U=S.StableID.get(L),B=null,!0!==(null==D?void 0:D.has_updates)){G.n=3;break}B=_makeDataAdapterResult("Network",O,U,E),G.n=5;break;case 3:if(!I||!1!==(null==D?void 0:D.has_updates)){G.n=4;break}B=_makeDataAdapterResult("NetworkNotModified",I,U,E),G.n=5;break;case 4:return G.a(2,null);case 5:return z=this._getCacheKey(E),this._inMemoryCache.add(z,B,this._cacheLimit),this._writeToCache(z,B),G.a(2,B)}},_callee12,this)}))}},{key:"_getSdkKey",value:function(){return null!=this._sdkKey?this._sdkKey:(_.Log.error("".concat(this._adapterName," is not attached to a Client")),"")}},{key:"_loadFromCache",value:function(e){var _,S=null===(_=E.Storage.getItem)||void 0===_?void 0:_.call(E.Storage,e);if(null==S)return null;var k=(0,T._typedJsonParse)(S,"source","Cached Result");return k?Object.assign(Object.assign({},k),{source:"Cache"}):null}},{key:"_writeToCache",value:function(e,_){for(var S=JSON.stringify(_),k=0;k<8;k++)try{E.Storage.setItem(e,S);break}catch(T){if(!(T instanceof Error)||!T.toString().includes("QuotaExceededError")&&!T.toString().includes("QUOTA_EXCEEDED_ERR")||this._cacheLimit<=1)throw T;this._cacheLimit=Math.ceil(this._cacheLimit/2),this._runLocalStorageCacheEviction(e,this._cacheLimit-1)}this._runLocalStorageCacheEviction(e)}},{key:"_runLocalStorageCacheEviction",value:function(e){var _,S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._cacheLimit,k=null!==(_=(0,E._getObjectFromStorage)(this._lastModifiedStoreKey))&&void 0!==_?_:{};k[e]=Date.now();var T,M=_createForOfIteratorHelper2(_getEvictableKeys(k,S));try{for(M.s();!(T=M.n()).done;){var I=T.value;delete k[I],E.Storage.removeItem(I)}}catch(R){M.e(R)}finally{M.f()}(0,E._setObjectInStorage)(this._lastModifiedStoreKey,k)}}])}();function _makeDataAdapterResult(e,_,S,E){return{source:e,data:_,receivedAt:Date.now(),stableID:S,fullUserHash:(0,k._getFullUserHash)(E)}}oi.DataAdapterCore=M,oi._makeDataAdapterResult=_makeDataAdapterResult;var I=function(){return _createClass3(function InMemoryCache(){_classCallCheck3(this,InMemoryCache),this._data={}},[{key:"get",value:function(e,S){var k,E=this._data[e],T=null==E?void 0:E.stableID,M=null===(k=null==S?void 0:S.customIDs)||void 0===k?void 0:k.stableID;return M&&T&&M!==T?(_.Log.warn("'StatsigUser.customIDs.stableID' mismatch"),null):E}},{key:"add",value:function(e,_,S){var k,E=_createForOfIteratorHelper2(_getEvictableKeys(this._data,S-1));try{for(E.s();!(k=E.n()).done;){var T=k.value;delete this._data[T]}}catch(M){E.e(M)}finally{E.f()}this._data[e]=_}},{key:"merge",value:function(e){this._data=Object.assign(Object.assign({},this._data),e)}}])}();function _getEvictableKeys(e,_){var S=Object.keys(e);return S.length<=_?[]:0===_?S:S.sort(function(_,S){var k=e[_],E=e[S];return"object"===_typeof3(k)&&"object"===_typeof3(E)?k.receivedAt-E.receivedAt:k-E}).slice(0,S.length-_)}return oi}var pi,vi={};var gi,mi,yi={},_i={};function requireSDKType(){if(gi)return _i;gi=1,Object.defineProperty(_i,"__esModule",{value:!0}),_i.SDKType=void 0;var e,_={};return _i.SDKType={_get:function(S){var k;return(null!==(k=_[S])&&void 0!==k?k:"js-mono")+(null!=e?e:"")},_setClientType:function(e,S){_[e]=S},_setBindingType:function(_){e&&"-react"!==e||(e="-"+_)}},_i}function requireErrorBoundary(){return mi||(mi=1,function(e){var _=yi&&yi.__awaiter||function(e,_,S,k){return new(S||(S=Promise))(function(E,T){function fulfilled(e){try{step(k.next(e))}catch(fo){T(fo)}}function rejected(e){try{step(k.throw(e))}catch(fo){T(fo)}}function step(e){var _;e.done?E(e.value):(_=e.value,_ instanceof S?_:new S(function(e){e(_)})).then(fulfilled,rejected)}step((k=k.apply(e,_||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0}),e.ErrorBoundary=e.EXCEPTION_ENDPOINT=void 0;var S=requireLog(),k=requireSDKType(),E=requireStatsigMetadata();e.EXCEPTION_ENDPOINT="https://statsigapi.net/v1/sdk_exception";var T="[Statsig] UnknownError",M=function(){return _createClass3(function ErrorBoundary(e,_,S,k){_classCallCheck3(this,ErrorBoundary),this._sdkKey=e,this._options=_,this._emitter=S,this._lastSeenError=k,this._seen=new Set},[{key:"wrap",value:function(e,_){var S=this;try{var k=e;(function(e){var _=new Set,S=Object.getPrototypeOf(e);for(;S&&S!==Object.prototype;)Object.getOwnPropertyNames(S).filter(function(e){return"function"==typeof(null==S?void 0:S[e])}).forEach(function(e){return _.add(e)}),S=Object.getPrototypeOf(S);return Array.from(_)})(k).forEach(function(E){var T=k[E];"$EB"in T||(k[E]=function(){for(var k=arguments.length,M=new Array(k),I=0;I<k;I++)M[I]=arguments[I];return S._capture(_?"".concat(_,":").concat(E):E,function(){return T.apply(e,M)})},k[E].$EB=!0)})}catch(E){this._onError("eb:wrap",E)}}},{key:"logError",value:function(e,_){this._onError(e,_)}},{key:"getLastSeenErrorAndReset",value:function(){var e=this._lastSeenError;return this._lastSeenError=void 0,null!=e?e:null}},{key:"attachErrorIfNoneExists",value:function(e){this._lastSeenError||(this._lastSeenError=_resolveError(e))}},{key:"_capture",value:function(e,_){var S=this;try{var k=_();return k&&k instanceof Promise?k.catch(function(_){return S._onError(e,_)}):k}catch(E){return this._onError(e,E),null}}},{key:"_onError",value:function(M,I){var R=this;try{S.Log.warn("Caught error in ".concat(M),{error:I});_(R,void 0,void 0,_regenerator().m(function _callee13(){var _,S,R,O,D,L,U,B,z,G,j,V,H,W,q,X;return _regenerator().w(function(Y){for(;;)switch(Y.n){case 0:if(B=I||Error(T),z=B instanceof Error,G=z?B.name:"No Name",j=_resolveError(B),this._lastSeenError=j,!this._seen.has(G)){Y.n=1;break}return Y.a(2);case 1:if(this._seen.add(G),!(null===(S=null===(_=this._options)||void 0===_?void 0:_.networkConfig)||void 0===S?void 0:S.preventAllNetworkTraffic)){Y.n=2;break}return null===(R=this._emitter)||void 0===R||R.call(this,{name:"error",error:I,tag:M}),Y.a(2);case 2:return V=k.SDKType._get(this._sdkKey),H=E.StatsigMetadataProvider.get(),W=z?B.stack:_getDescription(B),q=Object.assign({tag:M,exception:G,info:W,statsigOptions:_getStatsigOptionLoggingCopy(this._options)},Object.assign(Object.assign({},H),{sdkType:V})),X=null!==(L=null===(D=null===(O=this._options)||void 0===O?void 0:O.networkConfig)||void 0===D?void 0:D.networkOverrideFunc)&&void 0!==L?L:fetch,Y.n=3,X(e.EXCEPTION_ENDPOINT,{method:"POST",headers:{"STATSIG-API-KEY":this._sdkKey,"STATSIG-SDK-TYPE":String(V),"STATSIG-SDK-VERSION":String(H.sdkVersion),"Content-Type":"application/json"},body:JSON.stringify(q)});case 3:null===(U=this._emitter)||void 0===U||U.call(this,{name:"error",error:I,tag:M});case 4:return Y.a(2)}},_callee13,this)})).then(function(){}).catch(function(){})}catch(O){}}}])}();function _resolveError(e){return e instanceof Error?e:"string"==typeof e?new Error(e):new Error("An unknown error occurred.")}function _getDescription(e){try{return JSON.stringify(e)}catch(Kb){return T}}function _getStatsigOptionLoggingCopy(e){if(!e)return{};var _={};return Object.keys(e).forEach(function(S){var k=S,E=e[k];switch(_typeof3(E)){case"number":case"bigint":case"boolean":_[String(k)]=E;break;case"string":E.length<50?_[String(k)]=E:_[String(k)]="set";break;case"object":"environment"===k?_.environment=E:"networkConfig"===k?_.networkConfig=E:_[String(k)]=null!=E?"set":"unset"}}),_}e.ErrorBoundary=M}(yi)),yi}var bi,Si={};var wi,xi={};var ki,Ci={};var Ai,Ei={};function requireMemoKey(){if(Ai)return Ei;Ai=1,Object.defineProperty(Ei,"__esModule",{value:!0}),Ei.createMemoKey=Ei.MemoPrefix=void 0,Ei.MemoPrefix={_gate:"g",_dynamicConfig:"c",_experiment:"e",_configList:"cl",_layer:"l",_paramStore:"p"};var e=new Set([]),_=new Set(["userPersistedValues"]);return Ei.createMemoKey=function(S,k,E){var T="".concat(S,"|").concat(k);if(!E)return T;for(var M=0,I=Object.keys(E);M<I.length;M++){var R=I[M];if(_.has(R))return;e.has(R)?T+="|".concat(R,"=true"):T+="|".concat(R,"=").concat(E[R])}return T},Ei}var Ti,Mi,Ii={},Ri={},Pi={};function requireDnsTxtQuery(){if(Ti)return Pi;Ti=1;var e=Pi&&Pi.__awaiter||function(e,_,S,k){return new(S||(S=Promise))(function(E,T){function fulfilled(e){try{step(k.next(e))}catch(fo){T(fo)}}function rejected(e){try{step(k.throw(e))}catch(fo){T(fo)}}function step(e){var _;e.done?E(e.value):(_=e.value,_ instanceof S?_:new S(function(e){e(_)})).then(fulfilled,rejected)}step((k=k.apply(e,_||[])).next())})};Object.defineProperty(Pi,"__esModule",{value:!0}),Pi._fetchTxtRecords=void 0;var _=new Uint8Array([0,0,1,0,0,1,0,0,0,0,0,0,13,102,101,97,116,117,114,101,97,115,115,101,116,115,3,111,114,103,0,0,16,0,1]),S=["i","e","d"];function _parseDnsResponse(e){var _=e.findIndex(function(_,k){return k<200&&"="===String.fromCharCode(_)&&S.includes(String.fromCharCode(e[k-1]))});if(-1===_){var k=new Error("Failed to parse TXT records from DNS");throw k.name="DnsTxtParseError",k}for(var E="",T=_-1;T<e.length;T++)E+=String.fromCharCode(e[T]);return E.split(",")}return Pi._fetchTxtRecords=function(S){return e(this,void 0,void 0,_regenerator().m(function _callee14(){var e,k,E,T;return _regenerator().w(function(M){for(;;)switch(M.n){case 0:return M.n=1,S("https://cloudflare-dns.com/dns-query",{method:"POST",headers:{"Content-Type":"application/dns-message",Accept:"application/dns-message"},body:_});case 1:if((e=M.v).ok){M.n=2;break}throw(k=new Error("Failed to fetch TXT records from DNS")).name="DnsTxtFetchError",k;case 2:return M.n=3,e.arrayBuffer();case 3:return E=M.v,T=new Uint8Array(E),M.a(2,_parseDnsResponse(T))}},_callee14)}))},Pi}function requireNetworkFallbackResolver(){if(Mi)return Ri;Mi=1;var e=Ri&&Ri.__awaiter||function(e,_,S,k){return new(S||(S=Promise))(function(E,T){function fulfilled(e){try{step(k.next(e))}catch(fo){T(fo)}}function rejected(e){try{step(k.throw(e))}catch(fo){T(fo)}}function step(e){var _;e.done?E(e.value):(_=e.value,_ instanceof S?_:new S(function(e){e(_)})).then(fulfilled,rejected)}step((k=k.apply(e,_||[])).next())})};Object.defineProperty(Ri,"__esModule",{value:!0}),Ri._isDomainFailure=Ri.NetworkFallbackResolver=void 0;var _=requireDnsTxtQuery(),S=requireHashing(),k=requireLog(),E=requireStorageProvider(),T=6048e5,M=function(){return _createClass3(function NetworkFallbackResolver(e){var _;_classCallCheck3(this,NetworkFallbackResolver),this._fallbackInfo=null,this._errorBoundary=null,this._dnsQueryCooldowns={},this._networkOverrideFunc=null===(_=e.networkConfig)||void 0===_?void 0:_.networkOverrideFunc},[{key:"setErrorBoundary",value:function(e){this._errorBoundary=e}},{key:"tryBumpExpiryTime",value:function(e,_){var S,k=null===(S=this._fallbackInfo)||void 0===S?void 0:S[_.endpoint];k&&(k.expiryTime=Date.now()+T,_tryWriteFallbackInfoToCache(e,Object.assign(Object.assign({},this._fallbackInfo),_defineProperty3({},_.endpoint,k))))}},{key:"getActiveFallbackUrl",value:function(e,_){var S,T;if(null!=_.customUrl&&null!=_.fallbackUrls)return null;var M=this._fallbackInfo;null==M&&(M=null!==(S=function(e){var _=_getFallbackInfoStorageKey(e),T=E.Storage.getItem(_);if(!T)return null;try{return JSON.parse(T)}catch(S){return k.Log.error("Failed to parse FallbackInfo"),null}}(e))&&void 0!==S?S:{},this._fallbackInfo=M);var I=M[_.endpoint];return!I||Date.now()>(null!==(T=I.expiryTime)&&void 0!==T?T:0)||_.getChecksum()!==I.urlConfigChecksum?(delete M[_.endpoint],this._fallbackInfo=M,_tryWriteFallbackInfoToCache(e,this._fallbackInfo),null):I.url?I.url:null}},{key:"tryFetchUpdatedFallbackInfo",value:function(_,S,k,E){return e(this,void 0,void 0,_regenerator().m(function _callee15(){var e,T,M,I,R,O;return _regenerator().w(function(D){for(;;)switch(D.p=D.n){case 0:if(D.p=0,_isDomainFailure(k,E)){D.n=1;break}return D.a(2,!1);case 1:if(!(null==S.customUrl&&null==S.fallbackUrls)){D.n=3;break}return D.n=2,this._tryFetchFallbackUrlsFromNetwork(S);case 2:R=D.v,D.n=4;break;case 3:R=S.fallbackUrls;case 4:if(M=R,I=this._pickNewFallbackUrl(null===(e=this._fallbackInfo)||void 0===e?void 0:e[S.endpoint],M)){D.n=5;break}return D.a(2,!1);case 5:return this._updateFallbackInfoWithNewUrl(_,S,I),D.a(2,!0);case 6:return D.p=6,O=D.v,null===(T=this._errorBoundary)||void 0===T||T.logError("tryFetchUpdatedFallbackInfo",O),D.a(2,!1)}},_callee15,this,[[0,6]])}))}},{key:"_updateFallbackInfoWithNewUrl",value:function(e,_,S){var k,E,M,I,R={urlConfigChecksum:_.getChecksum(),url:S,expiryTime:Date.now()+T,previous:[]},O=_.endpoint,D=null===(k=this._fallbackInfo)||void 0===k?void 0:k[O];D&&(I=R.previous).push.apply(I,_toConsumableArray3(D.previous));R.previous.length>10&&(R.previous=[]);var L=null===(M=null===(E=this._fallbackInfo)||void 0===E?void 0:E[O])||void 0===M?void 0:M.url;null!=L&&R.previous.push(L),this._fallbackInfo=Object.assign(Object.assign({},this._fallbackInfo),_defineProperty3({},O,R)),_tryWriteFallbackInfoToCache(e,this._fallbackInfo)}},{key:"_tryFetchFallbackUrlsFromNetwork",value:function(S){return e(this,void 0,void 0,_regenerator().m(function _callee16(){var e,k,E,T,M,I,R,O,D,L,U;return _regenerator().w(function(B){for(;;)switch(B.p=B.n){case 0:if(!((k=this._dnsQueryCooldowns[S.endpoint])&&Date.now()<k)){B.n=1;break}return B.a(2,null);case 1:return this._dnsQueryCooldowns[S.endpoint]=Date.now()+144e5,E=[],B.n=2,(0,_._fetchTxtRecords)(null!==(e=this._networkOverrideFunc)&&void 0!==e?e:fetch);case 2:T=B.v,M=_extractPathFromUrl(S.defaultUrl),I=_createForOfIteratorHelper2(T),B.p=3,I.s();case 4:if((R=I.n()).done){B.n=7;break}if((O=R.value).startsWith(S.endpointDnsKey+"=")){B.n=5;break}return B.a(3,6);case 5:(D=O.split("=")).length>1&&((L=D[1]).endsWith("/")&&(L=L.slice(0,-1)),E.push("https://".concat(L).concat(M)));case 6:B.n=4;break;case 7:B.n=9;break;case 8:B.p=8,U=B.v,I.e(U);case 9:return B.p=9,I.f(),B.f(9);case 10:return B.a(2,E)}},_callee16,this,[[3,8,9,10]])}))}},{key:"_pickNewFallbackUrl",value:function(e,_){var S;if(null==_)return null;var k,E=new Set(null!==(S=null==e?void 0:e.previous)&&void 0!==S?S:[]),T=null==e?void 0:e.url,M=null,I=_createForOfIteratorHelper2(_);try{for(I.s();!(k=I.n()).done;){var R=k.value,O=R.endsWith("/")?R.slice(0,-1):R;if(!E.has(R)&&O!==T){M=O;break}}}catch(D){I.e(D)}finally{I.f()}return M}}])}();function _isDomainFailure(e,_){var S,k=null!==(S=null==e?void 0:e.toLowerCase())&&void 0!==S?S:"";return _||k.includes("uncaught exception")||k.includes("failed to fetch")||k.includes("networkerror when attempting to fetch resource")}function _getFallbackInfoStorageKey(e){return"statsig.network_fallback.".concat((0,S._DJB2)(e))}function _tryWriteFallbackInfoToCache(e,_){var S=_getFallbackInfoStorageKey(e);_&&0!==Object.keys(_).length?E.Storage.setItem(S,JSON.stringify(_)):E.Storage.removeItem(S)}function _extractPathFromUrl(e){try{return new URL(e).pathname}catch(_){return null}}return Ri.NetworkFallbackResolver=M,Ri._isDomainFailure=_isDomainFailure,Ri}var Oi,Di={};function requireSDKFlags(){if(Oi)return Di;Oi=1,Object.defineProperty(Di,"__esModule",{value:!0}),Di.SDKFlags=void 0;var e={};return Di.SDKFlags={setFlags:function(_,S){e[_]=S},get:function(_,S){var k,E;return null!==(E=null===(k=e[_])||void 0===k?void 0:k[S])&&void 0!==E&&E}},Di}var Li,Fi={};function requireSessionID(){return Li||(Li=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.StatsigSession=e.SessionID=void 0;var _=require$_StatsigGlobal(),S=requireCacheKey(),k=requireLog(),E=requireStorageProvider(),T=requireUUID(),M=18e5,I=144e5,R={};function _createSessionTimeout(e,S){return setTimeout(function(){var S,k=null===(S=(0,_._getStatsigGlobal)())||void 0===S?void 0:S.instance(e);k&&k.$emt({name:"session_expired"})},S)}function _getSessionIDStorageKey(e){return"statsig.session_id.".concat((0,S._getStorageKey)(e))}e.SessionID={get:function(_){return e.StatsigSession.get(_).data.sessionID}},e.StatsigSession={get:function(e){return null==R[e]&&(R[e]=function(e){var _=function(e){var _=_getSessionIDStorageKey(e);return(0,E._getObjectFromStorage)(_)}(e),S=Date.now();_||(_={sessionID:(0,T.getUUID)(),startTime:S,lastUpdate:S});return{data:_,sdkKey:e}}(e)),function(e){var _=Date.now(),S=e.data,R=e.sdkKey;if(U=S,B=U.lastUpdate,Date.now()-B>M||(D=S,L=D.startTime,Date.now()-L>I)){S.sessionID=(0,T.getUUID)(),S.startTime=_;var O=null===__STATSIG__||void 0===__STATSIG__?void 0:__STATSIG__.instance(R);O&&O.$emt({name:"session_expired"})}var D,L;var U,B;S.lastUpdate=_,function(e,_){var S=_getSessionIDStorageKey(_);try{(0,E._setObjectInStorage)(S,e)}catch(fo){k.Log.warn("Failed to save SessionID")}}(S,e.sdkKey),clearTimeout(e.idleTimeoutID),clearTimeout(e.ageTimeoutID);var z=_-S.startTime;return e.idleTimeoutID=_createSessionTimeout(R,M),e.ageTimeoutID=_createSessionTimeout(R,I-z),e}(R[e])},overrideInitialSessionID:function(e,_){R[_]=function(e,_){var S=Date.now();return{data:{sessionID:e,startTime:S,lastUpdate:S},sdkKey:_}}(e,_)}}}(Fi)),Fi}var Ui,Bi,Ni={};function requireStatsigClientEventEmitter(){return Ui||(Ui=1,Object.defineProperty(Ni,"__esModule",{value:!0}),Ni.ErrorTag=void 0,Ni.ErrorTag={NetworkError:"NetworkError"}),Ni}function requireNetworkCore(){if(Bi)return Ii;Bi=1;var e=Ii&&Ii.__awaiter||function(e,_,S,k){return new(S||(S=Promise))(function(E,T){function fulfilled(e){try{step(k.next(e))}catch(fo){T(fo)}}function rejected(e){try{step(k.throw(e))}catch(fo){T(fo)}}function step(e){var _;e.done?E(e.value):(_=e.value,_ instanceof S?_:new S(function(e){e(_)})).then(fulfilled,rejected)}step((k=k.apply(e,_||[])).next())})};Object.defineProperty(Ii,"__esModule",{value:!0}),Ii.NetworkCore=void 0,require$_StatsigGlobal();var _=require$_StatsigGlobal(),S=requireDiagnostics(),k=requireLog(),E=requireNetworkConfig(),T=requireNetworkFallbackResolver(),M=requireSDKFlags(),I=requireSDKType(),R=requireSafeJs(),O=requireSessionID(),D=requireStableID(),L=requireStatsigClientEventEmitter(),U=requireStatsigMetadata(),B=requireStatsigOptionsCommon(),z=requireVisibilityObserving(),G=new Set([408,500,502,503,504,522,524,599]),j=function(){return _createClass3(function NetworkCore(e,_){_classCallCheck3(this,NetworkCore),this._emitter=_,this._errorBoundary=null,this._timeout=1e4,this._netConfig={},this._options={},this._leakyBucket={},this._lastUsedInitUrl=null,e&&(this._options=e),this._options.networkConfig&&(this._netConfig=this._options.networkConfig),this._netConfig.networkTimeoutMs&&(this._timeout=this._netConfig.networkTimeoutMs),this._fallbackResolver=new T.NetworkFallbackResolver(this._options),this.setLogEventCompressionMode(this._getLogEventCompressionMode(e))},[{key:"setLogEventCompressionMode",value:function(e){this._options.logEventCompressionMode=e}},{key:"setErrorBoundary",value:function(e){this._errorBoundary=e,this._errorBoundary.wrap(this),this._errorBoundary.wrap(this._fallbackResolver),this._fallbackResolver.setErrorBoundary(e)}},{key:"isBeaconSupported",value:function(){return"undefined"!=typeof navigator&&"function"==typeof navigator.sendBeacon}},{key:"getLastUsedInitUrlAndReset",value:function(){var e=this._lastUsedInitUrl;return this._lastUsedInitUrl=null,e}},{key:"beacon",value:function(e){if(!_ensureValidSdkKey(e))return!1;var _=this._getInternalRequestArgs("POST",e),S=this._getPopulatedURL(_),k=navigator;return k.sendBeacon.bind(k)(S,_.body)}},{key:"post",value:function(_){return e(this,void 0,void 0,_regenerator().m(function _callee17(){var e;return _regenerator().w(function(S){for(;;)switch(S.n){case 0:return e=this._getInternalRequestArgs("POST",_),this._tryEncodeBody(e),S.n=1,this._tryToCompressBody(e);case 1:return S.a(2,this._sendRequest(e))}},_callee17,this)}))}},{key:"get",value:function(e){var _=this._getInternalRequestArgs("GET",e);return this._sendRequest(_)}},{key:"_sendRequest",value:function(_){return e(this,void 0,void 0,_regenerator().m(function _callee18(){var e,S,E,T,M,I,R,O,D,U,B,j,V,H,W,q,X,Y,K,J,Q,Z,$,ee,te,re=this;return _regenerator().w(function(ne){for(;;)switch(ne.p=ne.n){case 0:if(_ensureValidSdkKey(_)){ne.n=1;break}return ne.a(2,null);case 1:if(!this._netConfig.preventAllNetworkTraffic){ne.n=2;break}return ne.a(2,null);case 2:if(M=_.method,I=_.body,R=_.retries,O=_.attempt,D=_.urlConfig.endpoint,!this._isRateLimited(D)){ne.n=3;break}return k.Log.warn("Request to ".concat(D," was blocked because you are making requests too frequently.")),ne.a(2,null);case 3:return U=null!=O?O:1,B=!1,j=this._getPopulatedURL(_),V=null,H=(0,z._isUnloading)(),ne.p=4,W={method:M,body:I,headers:Object.assign({},_.headers),priority:_.priority,keepalive:H},_tryMarkInitStart(_,U),(q=this._leakyBucket[D])&&(q.lastRequestTime=Date.now(),this._leakyBucket[D]=q),X=null!==(e=this._netConfig.networkOverrideFunc)&&void 0!==e?e:fetch,ne.n=5,Promise.race([X(j,W).finally(function(){return clearTimeout(Y)}),new Promise(function(e,_){Y=setTimeout(function(){B=!0,_(new Error("Timeout of ".concat(re._timeout,"ms expired.")))},re._timeout)})]);case 5:if((V=ne.v).ok){ne.n=7;break}return ne.n=6,V.text().catch(function(){return"No Text"});case 6:throw K=ne.v,(J=new Error("NetworkError: ".concat(j," ").concat(K))).name="NetworkError",J;case 7:return ne.n=8,V.text();case 8:return Q=ne.v,_tryMarkInitEnd(_,V,U,Q),this._fallbackResolver.tryBumpExpiryTime(_.sdkKey,_.urlConfig),ne.a(2,{body:Q,code:V.status});case 9:return ne.p=9,te=ne.v,Z=_getErrorMessage(te),$=_didTimeout(null!=Z?Z:"",B),_tryMarkInitEnd(_,V,U,"",te),ne.n=10,this._fallbackResolver.tryFetchUpdatedFallbackInfo(_.sdkKey,_.urlConfig,Z,$);case 10:if(ne.v&&(_.fallbackUrl=this._fallbackResolver.getActiveFallbackUrl(_.sdkKey,_.urlConfig)),R&&!(U>R)&&G.has(null!==(S=null==V?void 0:V.status)&&void 0!==S?S:500)){ne.n=11;break}return null===(E=this._emitter)||void 0===E||E.call(this,{name:"error",error:te,tag:L.ErrorTag.NetworkError,requestArgs:_}),ee="A networking error occurred during ".concat(M," request to ").concat(j,"."),k.Log.error(ee,Z,te),null===(T=this._errorBoundary)||void 0===T||T.attachErrorIfNoneExists(ee),ne.a(2,null);case 11:return ne.n=12,_exponentialBackoff(U);case 12:return ne.a(2,this._sendRequest(Object.assign(Object.assign({},_),{retries:R,attempt:U+1})))}},_callee18,this,[[4,9]])}))}},{key:"_getLogEventCompressionMode",value:function(e){var _=null==e?void 0:e.logEventCompressionMode;return _||!0!==(null==e?void 0:e.disableCompression)||(_=B.LogEventCompressionMode.Disabled),_||(_=B.LogEventCompressionMode.Enabled),_}},{key:"_isRateLimited",value:function(e){var _,S=Date.now(),k=null!==(_=this._leakyBucket[e])&&void 0!==_?_:{count:0,lastRequestTime:S},E=S-k.lastRequestTime,T=Math.floor(.05*E);return k.count=Math.max(0,k.count-T),k.count>=50||(k.count+=1,k.lastRequestTime=S,this._leakyBucket[e]=k,!1)}},{key:"_getPopulatedURL",value:function(e){var _,S=null!==(_=e.fallbackUrl)&&void 0!==_?_:e.urlConfig.getUrl();e.urlConfig.endpoint!==E.Endpoint._initialize&&e.urlConfig.endpoint!==E.Endpoint._download_config_specs||(this._lastUsedInitUrl=S);var k=Object.assign(_defineProperty3(_defineProperty3(_defineProperty3(_defineProperty3(_defineProperty3({},E.NetworkParam.SdkKey,e.sdkKey),E.NetworkParam.SdkType,I.SDKType._get(e.sdkKey)),E.NetworkParam.SdkVersion,U.SDK_VERSION),E.NetworkParam.Time,String(Date.now())),E.NetworkParam.SessionID,O.SessionID.get(e.sdkKey)),e.params),T=Object.keys(k).map(function(e){return"".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(k[e]))}).join("&");return"".concat(S).concat(T?"?".concat(T):"")}},{key:"_tryEncodeBody",value:function(e){var S,T=(0,R._getWindowSafe)(),M=e.body;if(e.isStatsigEncodable&&!this._options.disableStatsigEncoding&&"string"==typeof M&&null==(0,_._getStatsigGlobalFlag)("no-encode")&&(null==T?void 0:T.btoa))try{e.body=T.btoa(M).split("").reverse().join(""),e.params=Object.assign(Object.assign({},null!==(S=e.params)&&void 0!==S?S:{}),_defineProperty3({},E.NetworkParam.StatsigEncoded,"1"))}catch(fo){k.Log.warn("Request encoding failed for ".concat(e.urlConfig.getUrl()),fo)}}},{key:"_tryToCompressBody",value:function(_){return e(this,void 0,void 0,_regenerator().m(function _callee19(){var e,S,T,M,I,R,O,D,L,U,B,z,G,j,V;return _regenerator().w(function(H){for(;;)switch(H.p=H.n){case 0:if("string"==typeof(S=_.body)&&_allowCompression(_,this._options)){H.n=1;break}return H.a(2);case 1:H.p=1,T=(new TextEncoder).encode(S),M=new CompressionStream("gzip"),(I=M.writable.getWriter()).write(T).catch(k.Log.error),I.close().catch(k.Log.error),R=M.readable.getReader(),O=[];case 2:return H.n=3,R.read();case 3:if((D=H.v).done){H.n=4;break}O.push(D.value),H.n=2;break;case 4:for(L=O.reduce(function(e,_){return e+_.length},0),U=new Uint8Array(L),B=0,z=0,G=O;z<G.length;z++)j=G[z],U.set(j,B),B+=j.length;_.body=U,_.params=Object.assign(Object.assign({},null!==(e=_.params)&&void 0!==e?e:{}),_defineProperty3({},E.NetworkParam.IsGzipped,"1")),H.n=6;break;case 5:H.p=5,V=H.v,k.Log.warn("Request compression failed for ".concat(_.urlConfig.getUrl()),V);case 6:return H.a(2)}},_callee19,this,[[1,5]])}))}},{key:"_getInternalRequestArgs",value:function(e,_){var S=this._fallbackResolver.getActiveFallbackUrl(_.sdkKey,_.urlConfig),k=Object.assign(Object.assign({},_),{method:e,fallbackUrl:S});return"data"in _&&_populateRequestBody(k,_.data),k}}])}();Ii.NetworkCore=j;var _ensureValidSdkKey=function(e){return!!e.sdkKey||(k.Log.warn("Unable to make request without an SDK key"),!1)},_populateRequestBody=function(e,_){var S=e.sdkKey,k=e.fallbackUrl,E=D.StableID.get(S),T=O.SessionID.get(S),M=I.SDKType._get(S);e.body=JSON.stringify(Object.assign(Object.assign({},_),{statsigMetadata:Object.assign(Object.assign({},U.StatsigMetadataProvider.get()),{stableID:E,sessionID:T,sdkType:M,fallbackUrl:k})}))};function _allowCompression(e,S){if(!e.isCompressable)return!1;if(null!=(0,_._getStatsigGlobalFlag)("no-compress")||"undefined"==typeof CompressionStream||"undefined"==typeof TextEncoder)return!1;var k=null!=e.urlConfig.customUrl||null!=e.urlConfig.fallbackUrls,E=!0===M.SDKFlags.get(e.sdkKey,"enable_log_event_compression");switch(S.logEventCompressionMode){case B.LogEventCompressionMode.Disabled:return!1;case B.LogEventCompressionMode.Enabled:return!(k&&!E);case B.LogEventCompressionMode.Forced:return!0;default:return!1}}function _getErrorMessage(e){return"string"==typeof e?e:e instanceof Error?"".concat(e.name,": ").concat(e.message):"Unknown Error"}function _didTimeout(e,_){return e.includes("Timeout")||_}function _tryMarkInitStart(e,_){e.urlConfig.endpoint===E.Endpoint._initialize&&S.Diagnostics._markInitNetworkReqStart(e.sdkKey,{attempt:_})}function _tryMarkInitEnd(e,_,k,T,M){e.urlConfig.endpoint===E.Endpoint._initialize&&S.Diagnostics._markInitNetworkReqEnd(e.sdkKey,S.Diagnostics._getDiagnosticsData(_,k,T,M))}function _exponentialBackoff(_){return e(this,void 0,void 0,_regenerator().m(function _callee20(){return _regenerator().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,new Promise(function(e){return setTimeout(e,Math.min(_*_*500,3e4))});case 1:return e.a(2)}},_callee20)}))}return Ii}var zi,Gi={};var ji,Vi={};var Hi,Wi={};var qi,Xi={};function requireStatsigClientBase(){if(qi)return Xi;qi=1;var e=Xi&&Xi.__awaiter||function(e,_,S,k){return new(S||(S=Promise))(function(E,T){function fulfilled(e){try{step(k.next(e))}catch(fo){T(fo)}}function rejected(e){try{step(k.throw(e))}catch(fo){T(fo)}}function step(e){var _;e.done?E(e.value):(_=e.value,_ instanceof S?_:new S(function(e){e(_)})).then(fulfilled,rejected)}step((k=k.apply(e,_||[])).next())})};Object.defineProperty(Xi,"__esModule",{value:!0}),Xi.StatsigClientBase=void 0,require$_StatsigGlobal();var _=require$_StatsigGlobal(),S=requireErrorBoundary(),k=requireEventLogger(),E=requireLog(),T=requireMemoKey(),M=requireSafeJs(),I=requireSessionID(),R=requireStableID(),O=requireStatsigOptionsCommon(),D=requireStorageProvider(),L=function(){return _createClass3(function StatsigClientBase(e,T,O,L){var U,B,z,G,j=this;_classCallCheck3(this,StatsigClientBase),this.loadingStatus="Uninitialized",this._initializePromise=null,this._listeners={};var V=this.$emt.bind(this);null!=(null==L?void 0:L.logLevel)&&(E.Log.level=L.logLevel),(null==L?void 0:L.disableStorage)&&D.Storage._setDisabled(!0),(null==L?void 0:L.initialSessionID)&&I.StatsigSession.overrideInitialSessionID(L.initialSessionID,e),(null==L?void 0:L.storageProvider)&&D.Storage._setProvider(L.storageProvider),(null==L?void 0:L.enableCookies)&&R.StableID._setCookiesEnabled(e,L.enableCookies),(null==L?void 0:L.disableStableID)&&R.StableID._setDisabled(e,!0),this._sdkKey=e,this._options=null!=L?L:{},this._memoCache={},this.overrideAdapter=null!==(U=null==L?void 0:L.overrideAdapter)&&void 0!==U?U:null,this._logger=new k.EventLogger(e,V,O,L),this._errorBoundary=new S.ErrorBoundary(e,L,V),this._errorBoundary.wrap(this),this._errorBoundary.wrap(T),this._errorBoundary.wrap(this._logger),O.setErrorBoundary(this._errorBoundary),this.dataAdapter=T,this.dataAdapter.attach(e,L,O),this.storageProvider=D.Storage,null===(G=null===(z=null===(B=this.overrideAdapter)||void 0===B?void 0:B.loadFromStorage)||void 0===z?void 0:z.call(B))||void 0===G||G.catch(function(e){return j._errorBoundary.logError("OA::loadFromStorage",e)}),this._primeReadyRipcord(),function(e,S){var k;if((0,M._isServerEnv)())return;var T=(0,_._getStatsigGlobal)(),I=null!==(k=T.instances)&&void 0!==k?k:{},R=S;null!=I[e]&&E.Log.warn("Creating multiple Statsig clients with the same SDK key can lead to unexpected behavior. Multi-instance support requires different SDK keys.");I[e]=R,T.firstInstance||(T.firstInstance=R);T.instances=I,__STATSIG__=T}(e,this)},[{key:"updateRuntimeOptions",value:function(e){e.loggingEnabled?(this._options.loggingEnabled=e.loggingEnabled,this._logger.setLoggingEnabled(e.loggingEnabled)):null!=e.disableLogging&&(this._options.disableLogging=e.disableLogging,this._logger.setLoggingEnabled(e.disableLogging?"disabled":"browser-only")),null!=e.disableStorage&&(this._options.disableStorage=e.disableStorage,D.Storage._setDisabled(e.disableStorage)),null!=e.enableCookies&&(this._options.enableCookies=e.enableCookies,R.StableID._setCookiesEnabled(this._sdkKey,e.enableCookies)),e.logEventCompressionMode?this._logger.setLogEventCompressionMode(e.logEventCompressionMode):e.disableCompression&&this._logger.setLogEventCompressionMode(O.LogEventCompressionMode.Disabled)}},{key:"flush",value:function(){return this._logger.flush()}},{key:"shutdown",value:function(){return e(this,void 0,void 0,_regenerator().m(function _callee21(){return _regenerator().w(function(e){for(;;)switch(e.n){case 0:return this.$emt({name:"pre_shutdown"}),this._setStatus("Uninitialized",null),this._initializePromise=null,e.n=1,this._logger.stop();case 1:return e.a(2)}},_callee21,this)}))}},{key:"on",value:function(e,_){this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].push(_)}},{key:"off",value:function(e,_){if(this._listeners[e]){var S=this._listeners[e].indexOf(_);-1!==S&&this._listeners[e].splice(S,1)}}},{key:"$on",value:function(e,_){_.__isInternal=!0,this.on(e,_)}},{key:"$emt",value:function(e){var _,S=this,barrier=function(_){try{_(e)}catch(k){if(!0===_.__isInternal)return void S._errorBoundary.logError("__emit:".concat(e.name),k);E.Log.error("An error occurred in a StatsigClientEvent listener. This is not an issue with Statsig.",e)}};this._listeners[e.name]&&this._listeners[e.name].forEach(function(e){return barrier(e)}),null===(_=this._listeners["*"])||void 0===_||_.forEach(barrier)}},{key:"_setStatus",value:function(e,_){this.loadingStatus=e,this._memoCache={},this.$emt({name:"values_updated",status:e,values:_})}},{key:"_enqueueExposure",value:function(e,_,S){!0!==(null==S?void 0:S.disableExposureLog)?this._logger.enqueue(_):this._logger.incrementNonExposureCount(e)}},{key:"_memoize",value:function(e,_){var S=this;return function(k,E){if(S._options.disableEvaluationMemoization)return _(k,E);var M=(0,T.createMemoKey)(e,k,E);return M?(M in S._memoCache||(Object.keys(S._memoCache).length>=3e3&&(S._memoCache={}),S._memoCache[M]=_(k,E)),S._memoCache[M]):_(k,E)}}}])}();return Xi.StatsigClientBase=L,Xi}var Yi,Ki={};var Ji,Qi={};var Zi,$i={};var ea,ta={};var ra,na,ia={};function requireSrc$3(){return na||(na=1,function(e){var _=En&&En.__createBinding||(Object.create?function(e,_,S,k){void 0===k&&(k=S);var E=Object.getOwnPropertyDescriptor(_,S);E&&!("get"in E?!_.__esModule:E.writable||E.configurable)||(E={enumerable:!0,get:function(){return _[S]}}),Object.defineProperty(e,k,E)}:function(e,_,S,k){void 0===k&&(k=S),e[k]=_[S]}),S=En&&En.__exportStar||function(e,S){for(var k in e)"default"===k||Object.prototype.hasOwnProperty.call(S,k)||_(S,e,k)};Object.defineProperty(e,"__esModule",{value:!0}),e.Storage=e.Log=e.EventLogger=e.Diagnostics=void 0,require$_StatsigGlobal();var k=require$_StatsigGlobal(),E=requireDiagnostics();Object.defineProperty(e,"Diagnostics",{enumerable:!0,get:function(){return E.Diagnostics}});var T=requireEventLogger();Object.defineProperty(e,"EventLogger",{enumerable:!0,get:function(){return T.EventLogger}});var M=requireLog();Object.defineProperty(e,"Log",{enumerable:!0,get:function(){return M.Log}});var I=requireStatsigMetadata(),R=requireStorageProvider();Object.defineProperty(e,"Storage",{enumerable:!0,get:function(){return R.Storage}}),S(require$_StatsigGlobal(),e),S(requireCacheKey(),e),S((ri||(ri=1,Object.defineProperty(ni,"__esModule",{value:!0})),ni),e),S(requireDataAdapterCore(),e),S(requireDiagnostics(),e),S((pi||(pi=1,Object.defineProperty(vi,"__esModule",{value:!0})),vi),e),S(requireErrorBoundary(),e),S((bi||(bi=1,Object.defineProperty(Si,"__esModule",{value:!0})),Si),e),S((wi||(wi=1,Object.defineProperty(xi,"__esModule",{value:!0})),xi),e),S(requireHashing(),e),S((ki||(ki=1,Object.defineProperty(Ci,"__esModule",{value:!0})),Ci),e),S(requireLog(),e),S(requireMemoKey(),e),S(requireNetworkConfig(),e),S(requireNetworkCore(),e),S((zi||(zi=1,Object.defineProperty(Gi,"__esModule",{value:!0})),Gi),e),S((ji||(ji=1,Object.defineProperty(Vi,"__esModule",{value:!0})),Vi),e),S(requireSafeJs(),e),S(requireSDKType(),e),S(requireSessionID(),e),S((Hi||(Hi=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e._fastApproxSizeOf=void 0,e._fastApproxSizeOf=function(_,S){for(var k=0,E=Object.keys(_),T=0;T<E.length;T++){var M=E[T],I=_[M];if(k+=M.length,"object"===_typeof3(I)&&null!==I?k+=(0,e._fastApproxSizeOf)(I,S)+2:k+=String(I).length+1,k>=S)return k}return k}}(Wi)),Wi),e),S(requireStableID(),e),S(requireStatsigClientBase(),e),S(requireStatsigClientEventEmitter(),e),S((Yi||(Yi=1,Object.defineProperty(Ki,"__esModule",{value:!0}),Ki.DataAdapterCachePrefix=void 0,Ki.DataAdapterCachePrefix="statsig.cached"),Ki),e),S(requireStatsigEvent(),e),S(requireStatsigMetadata(),e),S(requireStatsigOptionsCommon(),e),S((Ji||(Ji=1,Object.defineProperty(Qi,"__esModule",{value:!0})),Qi),e),S(function(){if(Zi)return $i;Zi=1,Object.defineProperty($i,"__esModule",{value:!0}),$i._makeTypedGet=$i._mergeOverride=$i._makeLayer=$i._makeExperiment=$i._makeDynamicConfig=$i._makeFeatureGate=void 0;var e=requireLog(),_=requireTypingUtils();function _makeEvaluation(e,_,S,k){var E;return{name:e,details:_,ruleID:null!==(E=null==S?void 0:S.rule_id)&&void 0!==E?E:"",__evaluation:S,value:k}}function _makeDynamicConfig(e,_,S){var k,E,T=null!==(k=null==S?void 0:S.value)&&void 0!==k?k:{};return Object.assign(Object.assign({},_makeEvaluation(e,_,S,T)),{idType:null!==(E=null==S?void 0:S.id_type)&&void 0!==E?E:null,get:_makeTypedGet(e,null==S?void 0:S.value)})}function _makeTypedGet(S,k,E){return function(T,M){var I,R=null!==(I=null==k?void 0:k[T])&&void 0!==I?I:null;return null==R?null!=M?M:null:null==M||(0,_._isTypeMatch)(R,M)?(null==E||E(T),R):(e.Log.warn("Parameter type mismatch. '".concat(S,".").concat(T,"' was found to be type '").concat(_typeof3(R),"' but fallback/return type is '").concat(_typeof3(M),"'. See https://docs.statsig.com/client/javascript-sdk/#typed-getters")),null!=M?M:null)}}return $i._makeFeatureGate=function(e,_,S){var k;return Object.assign(Object.assign({},_makeEvaluation(e,_,S,!0===(null==S?void 0:S.value))),{idType:null!==(k=null==S?void 0:S.id_type)&&void 0!==k?k:null})},$i._makeDynamicConfig=_makeDynamicConfig,$i._makeExperiment=function(e,_,S){var k,E=_makeDynamicConfig(e,_,S);return Object.assign(Object.assign({},E),{groupName:null!==(k=null==S?void 0:S.group_name)&&void 0!==k?k:null})},$i._makeLayer=function(e,_,S,k){var E,T;return Object.assign(Object.assign({},_makeEvaluation(e,_,S,void 0)),{get:_makeTypedGet(e,null==S?void 0:S.value,k),groupName:null!==(E=null==S?void 0:S.group_name)&&void 0!==E?E:null,__value:null!==(T=null==S?void 0:S.value)&&void 0!==T?T:{}})},$i._mergeOverride=function(e,_,S,k){return Object.assign(Object.assign(Object.assign({},e),_),{get:_makeTypedGet(e.name,S,k)})},$i._makeTypedGet=_makeTypedGet,$i}(),e),S((ea||(ea=1,Object.defineProperty(ta,"__esModule",{value:!0})),ta),e),S(requireStatsigUser(),e),S(requireStorageProvider(),e),S(requireTypedJsonParse(),e),S(requireTypingUtils(),e),S(requireUrlConfiguration(),e),S(requireUUID(),e),S(requireVisibilityObserving(),e),S((ra||(ra=1,Object.defineProperty(ia,"__esModule",{value:!0}),ia.UPDATE_DETAIL_ERROR_MESSAGES=ia.createUpdateDetails=void 0,ia.createUpdateDetails=function(e,_,S,k,E,T){return{duration:S,source:_,success:e,error:k,sourceUrl:E,warnings:T}},ia.UPDATE_DETAIL_ERROR_MESSAGES={NO_NETWORK_DATA:"No data was returned from the network. This may be due to a network timeout if a timeout value was specified in the options or ad blocker error."}),ia),e),S(requireSDKFlags(),e),Object.assign((0,k._getStatsigGlobal)(),{Log:M.Log,SDK_VERSION:I.SDK_VERSION})}(En)),En}var aa,oa={},sa={},ua={},la={};var ca,ha,da={};function requireEvaluationStore(){if(ha)return ua;ha=1,Object.defineProperty(ua,"__esModule",{value:!0});var e=requireSrc$3(),_=function(){if(aa)return la;aa=1,Object.defineProperty(la,"__esModule",{value:!0}),la.V1InitializeContainer=void 0;var e=requireSrc$3(),_=function(){return _createClass3(function V1InitializeContainer(e){_classCallCheck3(this,V1InitializeContainer),this._values=e},[{key:"getGate",value:function(e){return this._getResultFromLookup(this._values.feature_gates,e)}},{key:"getConfig",value:function(e){return this._getResultFromLookup(this._values.dynamic_configs,e)}},{key:"getLayer",value:function(e){return this._getResultFromLookup(this._values.layer_configs,e)}},{key:"getParamStore",value:function(e){return this._getResultFromLookup(this._values.param_stores,e)}},{key:"getConfigList",value:function(){return Object.keys(this._values.dynamic_configs)}},{key:"getExposureMapping",value:function(){return this._values.exposures}},{key:"_getResultFromLookup",value:function(_,S){var k,E;return _&&null!==(E=null!==(k=_[S])&&void 0!==k?k:_[(0,e._DJB2)(S)])&&void 0!==E?E:null}}])}();return la.V1InitializeContainer=_,la}(),S=function(){if(ca)return da;ca=1,Object.defineProperty(da,"__esModule",{value:!0}),da.V2InitializeContainer=void 0;var e=requireSrc$3(),_=function(){return _createClass3(function V2InitializeContainer(e){_classCallCheck3(this,V2InitializeContainer),this._values=e},[{key:"getGate",value:function(e){var _,S,k,E=this._getResultFromLookup(this._values.feature_gates,e);return E?{name:e,value:!0===E.v,rule_id:null!==(_=E.r)&&void 0!==_?_:"default",secondary_exposures:null!==(S=E.s)&&void 0!==S?S:[],id_type:null!==(k=E.i)&&void 0!==k?k:""}:null}},{key:"getConfig",value:function(e){var _,S,k,E,T=this._getResultFromLookup(this._values.dynamic_configs,e);return T?{name:e,value:null!==(_=this._values.values[T.v])&&void 0!==_?_:{},rule_id:T.r,secondary_exposures:null!==(S=T.s)&&void 0!==S?S:[],id_type:null!==(k=T.i)&&void 0!==k?k:"",is_user_in_experiment:!0===T.ue,passed:!0===T.p,group_name:null!==(E=T.gn)&&void 0!==E?E:void 0,is_experiment_active:!0===T.ea,group:T.r,is_device_based:"stableID"===T.i}:null}},{key:"getLayer",value:function(e){var _,S,k,E,T,M,I=this._getResultFromLookup(this._values.layer_configs,e);return I?{name:e,value:null!==(_=this._values.values[I.v])&&void 0!==_?_:{},rule_id:I.r,secondary_exposures:null!==(S=I.s)&&void 0!==S?S:[],is_user_in_experiment:!0===I.ue,group_name:null!==(k=I.gn)&&void 0!==k?k:void 0,is_experiment_active:!0===I.ea,group:I.r,is_device_based:"stableID"===I.i,allocated_experiment_name:null!==(E=I.ae)&&void 0!==E?E:"",explicit_parameters:null!==(T=I.ep)&&void 0!==T?T:[],undelegated_secondary_exposures:null!==(M=I.us)&&void 0!==M?M:[],parameter_rule_ids:I.pr}:null}},{key:"getParamStore",value:function(e){return this._getResultFromLookup(this._values.param_stores,e)}},{key:"getConfigList",value:function(){return Object.keys(this._values.dynamic_configs)}},{key:"getExposureMapping",value:function(){return this._values.exposures}},{key:"_getResultFromLookup",value:function(_,S){var k,E;return _&&null!==(E=null!==(k=_[S])&&void 0!==k?k:_[(0,e._DJB2)(S)])&&void 0!==E?E:null}}])}();return da.V2InitializeContainer=_,da}(),k=function(){return _createClass3(function EvaluationStore(e){_classCallCheck3(this,EvaluationStore),this._sdkKey=e,this._rawValues=null,this._values=null,this._source="Uninitialized",this._lcut=0,this._receivedAt=0,this._bootstrapMetadata=null,this._warnings=new Set},[{key:"reset",value:function(){this._values=null,this._rawValues=null,this._source="Loading",this._lcut=0,this._receivedAt=0,this._bootstrapMetadata=null,this._warnings.clear()}},{key:"finalize",value:function(){this._values||(this._source="NoValues")}},{key:"getValues",value:function(){return this._rawValues?(0,e._typedJsonParse)(this._rawValues,"has_updates","EvaluationStoreValues"):null}},{key:"setValues",value:function(k,E){var T,M;if(!k)return!1;var I=(0,e._typedJsonParse)(k.data,"has_updates","EvaluationResponse");return null!=I&&(this._source=k.source,!0!==(null==I?void 0:I.has_updates)||(null!==(T=I.time)&&void 0!==T?T:0)<this._lcut||(this._rawValues=k.data,this._lcut=I.time,this._receivedAt=k.receivedAt,"init-v2"===I.response_format?this._values=new S.V2InitializeContainer(I):this._values=new _.V1InitializeContainer(I),this._bootstrapMetadata=this._extractBootstrapMetadata(k.source,I),k.source&&I.user&&this._setWarningState(E,I),e.SDKFlags.setFlags(this._sdkKey,null!==(M=I.sdk_flags)&&void 0!==M?M:{})),!0)}},{key:"getWarnings",value:function(){if(0!==this._warnings.size)return Array.from(this._warnings)}},{key:"getGate",value:function(e){var _=this._values?this._values.getGate(e):null;return this._getDetailedStoreResult(_)}},{key:"getConfig",value:function(e){var _=this._values?this._values.getConfig(e):null;return this._getDetailedStoreResult(_)}},{key:"getConfigList",value:function(){return this._values?this._values.getConfigList():[]}},{key:"getLayer",value:function(e){var _=this._values?this._values.getLayer(e):null;return this._getDetailedStoreResult(_)}},{key:"getParamStore",value:function(e){var _=this._values?this._values.getParamStore(e):null;return this._getDetailedStoreResult(_)}},{key:"getSource",value:function(){return this._source}},{key:"getExposureMapping",value:function(){var e;return null===(e=this._values)||void 0===e?void 0:e.getExposureMapping()}},{key:"_extractBootstrapMetadata",value:function(e,_){if("Bootstrap"!==e)return null;var S={};return _.user&&(S.user=_.user),_.sdkInfo&&(S.generatorSDKInfo=_.sdkInfo),S.lcut=_.time,S}},{key:"_getDetailedStoreResult",value:function(e){return{result:e,details:this._getDetails(null==e)}}},{key:"_setWarningState",value:function(_,S){var k,E,T=e.StableID.get(this._sdkKey);if((null===(k=_.customIDs)||void 0===k?void 0:k.stableID)===T||!(null===(E=_.customIDs)||void 0===E?void 0:E.stableID)&&!T){if("user"in S){var M=S.user,I=Object.assign(Object.assign({},_),{analyticsOnlyMetadata:void 0,privateAttributes:void 0});(0,e._getFullUserHash)(I)!==(0,e._getFullUserHash)(M)&&this._warnings.add("PartialUserMatch")}}else this._warnings.add("StableIDMismatch")}},{key:"getCurrentSourceDetails",value:function(){if("Uninitialized"===this._source||"NoValues"===this._source)return{reason:this._source};var e={reason:this._source,lcut:this._lcut,receivedAt:this._receivedAt};return this._warnings.size>0&&(e.warnings=Array.from(this._warnings)),e}},{key:"_getDetails",value:function(e){var _,S,k=this.getCurrentSourceDetails(),E=k.reason,T=null!==(_=k.warnings)&&void 0!==_?_:[];if("Bootstrap"===this._source&&T.length>0&&(E+=T[0]),"Uninitialized"!==E&&"NoValues"!==E){var M=e?"Unrecognized":"Recognized";E="".concat(E,":").concat(M)}var I="Bootstrap"===this._source&&null!==(S=this._bootstrapMetadata)&&void 0!==S?S:void 0;return I&&(k.bootstrapMetadata=I),Object.assign(Object.assign({},k),{reason:E})}}])}();return ua.default=k,ua}var fa,pa,va={},ga={};function requireEvaluationResponseDeltas(){if(fa)return ga;fa=1,Object.defineProperty(ga,"__esModule",{value:!0}),ga._resolveDeltasResponse=void 0;var e=requireSrc$3();function _deleteEntriesInRecord(e,_){null==e||e.forEach(function(e){delete _[e]})}return ga._resolveDeltasResponse=function(_,S){var k=(0,e._typedJsonParse)(S,"checksum","DeltasEvaluationResponse");if(!k)return{hadBadDeltaChecksum:!0};var E=function(e){var _=e;return _deleteEntriesInRecord(e.deleted_gates,_.feature_gates),delete _.deleted_gates,_deleteEntriesInRecord(e.deleted_configs,_.dynamic_configs),delete _.deleted_configs,_deleteEntriesInRecord(e.deleted_layers,_.layer_configs),delete _.deleted_layers,_}(function(e,_){return Object.assign(Object.assign(Object.assign({},e),_),{feature_gates:Object.assign(Object.assign({},e.feature_gates),_.feature_gates),layer_configs:Object.assign(Object.assign({},e.layer_configs),_.layer_configs),dynamic_configs:Object.assign(Object.assign({},e.dynamic_configs),_.dynamic_configs)})}(_,k)),T=(0,e._DJB2Object)({feature_gates:E.feature_gates,dynamic_configs:E.dynamic_configs,layer_configs:E.layer_configs},2);return T===k.checksumV2?JSON.stringify(E):{hadBadDeltaChecksum:!0,badChecksum:T,badMergedConfigs:E,badFullResponse:k.deltas_full_response}},ga}function requireNetwork(){if(pa)return va;pa=1;var e=va&&va.__awaiter||function(e,_,S,k){return new(S||(S=Promise))(function(E,T){function fulfilled(e){try{step(k.next(e))}catch(fo){T(fo)}}function rejected(e){try{step(k.throw(e))}catch(fo){T(fo)}}function step(e){var _;e.done?E(e.value):(_=e.value,_ instanceof S?_:new S(function(e){e(_)})).then(fulfilled,rejected)}step((k=k.apply(e,_||[])).next())})};Object.defineProperty(va,"__esModule",{value:!0});var _=requireSrc$3(),S=requireEvaluationResponseDeltas(),k=function(k){function StatsigNetwork(e,S){var k;_classCallCheck3(this,StatsigNetwork),k=_callSuper(this,StatsigNetwork,[e,S]);var E=null==e?void 0:e.networkConfig;return k._option=e,k._initializeUrlConfig=new _.UrlConfiguration(_.Endpoint._initialize,null==E?void 0:E.initializeUrl,null==E?void 0:E.api,null==E?void 0:E.initializeFallbackUrls),k}return _inherits(StatsigNetwork,k),_createClass3(StatsigNetwork,[{key:"fetchEvaluations",value:function(S,k,E,T,M){return e(this,void 0,void 0,_regenerator().m(function _callee22(){var e,I,R,O,D,L,U,B,z;return _regenerator().w(function(G){for(;;)if(0===G.n)return U=k?(0,_._typedJsonParse)(k,"has_updates","InitializeResponse"):null,B={user:T,hash:null!==(R=null===(I=null===(e=this._option)||void 0===e?void 0:e.networkConfig)||void 0===I?void 0:I.initializeHashAlgorithm)&&void 0!==R?R:"djb2",deltasResponseRequested:!1,full_checksum:null},(null==U?void 0:U.has_updates)&&(z=(null==U?void 0:U.hash_used)!==(null!==(L=null===(D=null===(O=this._option)||void 0===O?void 0:O.networkConfig)||void 0===D?void 0:D.initializeHashAlgorithm)&&void 0!==L?L:"djb2"),B=Object.assign(Object.assign({},B),{sinceTime:M&&!z?U.time:0,previousDerivedFields:"derived_fields"in U&&M?U.derived_fields:{},deltasResponseRequested:!0,full_checksum:U.full_checksum,partialUserMatchSinceTime:z?0:U.time})),G.a(2,this._fetchEvaluations(S,U,B,E))},_callee22,this)}))}},{key:"_fetchEvaluations",value:function(_,k,E,T){return e(this,void 0,void 0,_regenerator().m(function _callee23(){var e,M,I,R;return _regenerator().w(function(O){for(;;)switch(O.n){case 0:return O.n=1,this.post({sdkKey:_,urlConfig:this._initializeUrlConfig,data:E,retries:2,isStatsigEncodable:!0,priority:T});case 1:if(204!==(null==(I=O.v)?void 0:I.code)){O.n=2;break}return O.a(2,'{"has_updates": false}');case 2:if(200===(null==I?void 0:I.code)){O.n=3;break}return O.a(2,null!==(e=null==I?void 0:I.body)&&void 0!==e?e:null);case 3:if(!0===(null==k?void 0:k.has_updates)&&!0===(null===(M=I.body)||void 0===M?void 0:M.includes('"is_delta":true'))&&!0===E.deltasResponseRequested){O.n=4;break}return O.a(2,I.body);case 4:if("string"!=typeof(R=(0,S._resolveDeltasResponse)(k,I.body))){O.n=5;break}return O.a(2,R);case 5:return O.a(2,this._fetchEvaluations(_,k,Object.assign(Object.assign(Object.assign({},E),R),{deltasResponseRequested:!1}),T))}},_callee23,this)}))}}])}(_.NetworkCore);return va.default=k,va}var ma,ya={};function requireParamStoreGetterFactory(){if(ma)return ya;ma=1,Object.defineProperty(ya,"__esModule",{value:!0}),ya._makeParamStoreGetter=void 0;var e=requireSrc$3(),_={disableExposureLog:!0};function _shouldLogExposure(e){return null==e||!1===e.disableExposureLog}function _shouldReturnFallback(_,S){return null!=S&&!(0,e._isTypeMatch)(_,S)}return ya._makeParamStoreGetter=function(S,k,E){return function(T,M){if(null==k)return M;var I=k[T];if(null==I||null!=M&&(0,e._typeOf)(M)!==I.param_type)return M;switch(I.ref_type){case"static":return function(e){return e.value}(I);case"gate":return function(e,S,k){return e.getFeatureGate(S.gate_name,_shouldLogExposure(k)?void 0:_).value?S.pass_value:S.fail_value}(S,I,E);case"dynamic_config":return function(e,S,k,E){var T=e.getDynamicConfig(S.config_name,_shouldLogExposure(E)?void 0:_).get(S.param_name);return _shouldReturnFallback(T,k)?k:T}(S,I,M,E);case"experiment":return function(e,S,k,E){var T=e.getExperiment(S.experiment_name,_shouldLogExposure(E)?void 0:_).get(S.param_name);return _shouldReturnFallback(T,k)?k:T}(S,I,M,E);case"layer":return function(e,S,k,E){var T=e.getLayer(S.layer_name,_shouldLogExposure(E)?void 0:_).get(S.param_name);return _shouldReturnFallback(T,k)?k:T}(S,I,M,E);default:return M}}},ya}var _a,ba,Sa,wa={};function requireStatsigEvaluationsDataAdapter(){if(_a)return wa;_a=1;var e=wa&&wa.__awaiter||function(e,_,S,k){return new(S||(S=Promise))(function(E,T){function fulfilled(e){try{step(k.next(e))}catch(fo){T(fo)}}function rejected(e){try{step(k.throw(e))}catch(fo){T(fo)}}function step(e){var _;e.done?E(e.value):(_=e.value,_ instanceof S?_:new S(function(e){e(_)})).then(fulfilled,rejected)}step((k=k.apply(e,_||[])).next())})};Object.defineProperty(wa,"__esModule",{value:!0}),wa.StatsigEvaluationsDataAdapter=void 0;var _=requireSrc$3(),S=requireNetwork(),k=function(k){function StatsigEvaluationsDataAdapter(){var e;return _classCallCheck3(this,StatsigEvaluationsDataAdapter),(e=_callSuper(this,StatsigEvaluationsDataAdapter,["EvaluationsDataAdapter","evaluations"]))._network=null,e._options=null,e}return _inherits(StatsigEvaluationsDataAdapter,k),_createClass3(StatsigEvaluationsDataAdapter,[{key:"attach",value:function(e,_,k){_superPropGet(StatsigEvaluationsDataAdapter,"attach",this,3)([e,_,k]),null!==k&&k instanceof S.default?this._network=k:this._network=new S.default(null!=_?_:{})}},{key:"getDataAsync",value:function(e,S,k){return this._getDataAsyncImpl(e,(0,_._normalizeUser)(S,this._options),k)}},{key:"prefetchData",value:function(e,_){return this._prefetchDataImpl(e,_)}},{key:"setData",value:function(e){var S=(0,_._typedJsonParse)(e,"has_updates","data");S&&"user"in S?_superPropGet(StatsigEvaluationsDataAdapter,"setData",this,3)([e,S.user]):_.Log.error("StatsigUser not found. You may be using an older server SDK version. Please upgrade your SDK or use setDataLegacy.")}},{key:"setDataLegacy",value:function(e,_){_superPropGet(StatsigEvaluationsDataAdapter,"setData",this,3)([e,_])}},{key:"_fetchFromNetwork",value:function(_,S,k,E){return e(this,void 0,void 0,_regenerator().m(function _callee24(){var e,T;return _regenerator().w(function(M){for(;;)switch(M.n){case 0:return M.n=1,null===(e=this._network)||void 0===e?void 0:e.fetchEvaluations(this._getSdkKey(),_,null==k?void 0:k.priority,S,E);case 1:return T=M.v,M.a(2,null!=T?T:null)}},_callee24,this)}))}},{key:"_getCacheKey",value:function(e){var S,k=(0,_._getStorageKey)(this._getSdkKey(),e,null===(S=this._options)||void 0===S?void 0:S.customUserCacheKeyFunc);return"".concat(_.DataAdapterCachePrefix,".").concat(this._cacheSuffix,".").concat(k)}},{key:"_isCachedResultValidFor204",value:function(e,S){return null!=e.fullUserHash&&e.fullUserHash===(0,_._getFullUserHash)(S)}}])}(_.DataAdapterCore);return wa.StatsigEvaluationsDataAdapter=k,wa}function requireStatsigClient(){if(ba)return sa;ba=1;var e=sa&&sa.__awaiter||function(e,_,S,k){return new(S||(S=Promise))(function(E,T){function fulfilled(e){try{step(k.next(e))}catch(fo){T(fo)}}function rejected(e){try{step(k.throw(e))}catch(fo){T(fo)}}function step(e){var _;e.done?E(e.value):(_=e.value,_ instanceof S?_:new S(function(e){e(_)})).then(fulfilled,rejected)}step((k=k.apply(e,_||[])).next())})};Object.defineProperty(sa,"__esModule",{value:!0});var _=requireSrc$3(),S=requireEvaluationStore(),k=requireNetwork(),E=requireParamStoreGetterFactory(),T=requireStatsigEvaluationsDataAdapter(),M=function(M){function StatsigClient(e,E){var M,I,R,O=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;_classCallCheck3(this,StatsigClient),_.SDKType._setClientType(e,"javascript-client");var D=new k.default(O,function(e){M.$emt(e)});(M=_callSuper(this,StatsigClient,[e,null!==(I=null==O?void 0:O.dataAdapter)&&void 0!==I?I:new T.StatsigEvaluationsDataAdapter,D,O]))._possibleFirstTouchMetadata={},M.getFeatureGate=M._memoize(_.MemoPrefix._gate,M._getFeatureGateImpl.bind(M)),M.getDynamicConfig=M._memoize(_.MemoPrefix._dynamicConfig,M._getDynamicConfigImpl.bind(M)),M.getExperiment=M._memoize(_.MemoPrefix._experiment,M._getExperimentImpl.bind(M)),M.getConfigList=M._memoize(_.MemoPrefix._configList,M._getConfigListImpl.bind(M)),M.getLayer=M._memoize(_.MemoPrefix._layer,M._getLayerImpl.bind(M)),M.getParameterStore=M._memoize(_.MemoPrefix._paramStore,M._getParameterStoreImpl.bind(M)),M._store=new S.default(e),M._network=D,M._user=M._configureUser(E,O),M._sdkInstanceID=(0,_.getUUID)();var L,U=_createForOfIteratorHelper2(null!==(R=null==O?void 0:O.plugins)&&void 0!==R?R:[]);try{for(U.s();!(L=U.n()).done;){L.value.bind(M)}}catch(B){U.e(B)}finally{U.f()}return M}return _inherits(StatsigClient,M),_createClass3(StatsigClient,[{key:"initializeSync",value:function(e){var S;return"Uninitialized"!==this.loadingStatus?(0,_.createUpdateDetails)(!0,this._store.getSource(),-1,null,null,["MultipleInitializations"].concat(_toConsumableArray3(null!==(S=this._store.getWarnings())&&void 0!==S?S:[]))):(this._logger.start(),this.updateUserSync(this._user,e))}},{key:"initializeAsync",value:function(_){return e(this,void 0,void 0,_regenerator().m(function _callee25(){return _regenerator().w(function(e){for(;;)switch(e.n){case 0:if(!this._initializePromise){e.n=1;break}return e.a(2,this._initializePromise);case 1:return this._initializePromise=this._initializeAsyncImpl(_),e.a(2,this._initializePromise)}},_callee25,this)}))}},{key:"updateUserSync",value:function(e,_){var S=performance.now();try{return this._updateUserSyncImpl(e,_,S)}catch(fo){var k=fo instanceof Error?fo:new Error(String(fo));return this._createErrorUpdateDetails(k,S)}}},{key:"_updateUserSyncImpl",value:function(e,S,k){var E,T=_toConsumableArray3(null!==(E=this._store.getWarnings())&&void 0!==E?E:[]);this._resetForUser(e);var M=this.dataAdapter.getDataSync(this._user);null==M&&T.push("NoCachedValues"),this._store.setValues(M,this._user),this._finalizeUpdate(M);var I=null==S?void 0:S.disableBackgroundCacheRefresh;return!0===I||null==I&&"Bootstrap"===(null==M?void 0:M.source)||this._runPostUpdate(null!=M?M:null,this._user),(0,_.createUpdateDetails)(!0,this._store.getSource(),performance.now()-k,this._errorBoundary.getLastSeenErrorAndReset(),this._network.getLastUsedInitUrlAndReset(),T)}},{key:"updateUserAsync",value:function(_,S){return e(this,void 0,void 0,_regenerator().m(function _callee26(){var e,k,E;return _regenerator().w(function(T){for(;;)switch(T.p=T.n){case 0:return e=performance.now(),T.p=1,T.n=2,this._updateUserAsyncImpl(_,S);case 2:return T.a(2,T.v);case 3:return T.p=3,E=T.v,k=E instanceof Error?E:new Error(String(E)),T.a(2,this._createErrorUpdateDetails(k,e))}},_callee26,this,[[1,3]])}))}},{key:"_updateUserAsyncImpl",value:function(S,k){return e(this,void 0,void 0,_regenerator().m(function _callee27(){var e,E,T,M;return _regenerator().w(function(I){for(;;)switch(I.n){case 0:return this._resetForUser(S),e=this._user,_.Diagnostics._markInitOverallStart(this._sdkKey),E=this.dataAdapter.getDataSync(e),this._store.setValues(E,this._user),this._setStatus("Loading",E),I.n=1,this.dataAdapter.getDataAsync(E,e,k);case 1:if(E=I.v,e===this._user){I.n=2;break}return I.a(2,(0,_.createUpdateDetails)(!1,this._store.getSource(),-1,new Error("User changed during update"),this._network.getLastUsedInitUrlAndReset()));case 2:return T=!1,null!=E&&(_.Diagnostics._markInitProcessStart(this._sdkKey),T=this._store.setValues(E,this._user),_.Diagnostics._markInitProcessEnd(this._sdkKey,{success:T})),this._finalizeUpdate(E),T||(this._errorBoundary.attachErrorIfNoneExists(_.UPDATE_DETAIL_ERROR_MESSAGES.NO_NETWORK_DATA),this.$emt({name:"initialization_failure"})),_.Diagnostics._markInitOverallEnd(this._sdkKey,T,this._store.getCurrentSourceDetails()),M=_.Diagnostics._enqueueDiagnosticsEvent(this._user,this._logger,this._sdkKey,this._options),I.a(2,(0,_.createUpdateDetails)(T,this._store.getSource(),M,this._errorBoundary.getLastSeenErrorAndReset(),this._network.getLastUsedInitUrlAndReset(),this._store.getWarnings()))}},_callee27,this)}))}},{key:"getContext",value:function(){return{sdkKey:this._sdkKey,options:this._options,values:this._store.getValues(),user:JSON.parse(JSON.stringify(this._user)),errorBoundary:this._errorBoundary,session:_.StatsigSession.get(this._sdkKey),stableID:_.StableID.get(this._sdkKey),sdkInstanceID:this._sdkInstanceID}}},{key:"checkGate",value:function(e,_){return this.getFeatureGate(e,_).value}},{key:"logEvent",value:function(e,_,S){var k="string"==typeof e?{eventName:e,value:_,metadata:S}:e;this.$emt({name:"log_event_called",event:k}),this._logger.enqueue(Object.assign(Object.assign({},k),{user:this._user,time:Date.now()}))}},{key:"updateUserWithAnalyticsOnlyMetadata",value:function(e){this._user=this._configureUser(Object.assign(Object.assign({},this._user),{analyticsOnlyMetadata:e}),this._options)}},{key:"_primeReadyRipcord",value:function(){var e=this;this.$on("error",function(){"Loading"===e.loadingStatus&&e._finalizeUpdate(null)})}},{key:"_initializeAsyncImpl",value:function(S){return e(this,void 0,void 0,_regenerator().m(function _callee28(){return _regenerator().w(function(e){for(;;)switch(e.n){case 0:if(_.Storage.isReady()){e.n=1;break}return e.n=1,_.Storage.isReadyResolver();case 1:return this._logger.start(),e.a(2,this.updateUserAsync(this._user,S))}},_callee28,this)}))}},{key:"_createErrorUpdateDetails",value:function(e,S){var k;return(0,_.createUpdateDetails)(!1,this._store.getSource(),performance.now()-S,e,null,_toConsumableArray3(null!==(k=this._store.getWarnings())&&void 0!==k?k:[]))}},{key:"_finalizeUpdate",value:function(e){this._store.finalize(),this._setStatus("Ready",e)}},{key:"_runPostUpdate",value:function(e,S){this.dataAdapter.getDataAsync(e,S,{priority:"low"}).catch(function(e){_.Log.error("An error occurred after update.",e)})}},{key:"_resetForUser",value:function(e){this._logger.reset(),this._store.reset(),this._user=this._configureUser(e,this._options)}},{key:"_configureUser",value:function(e,S){var k,E,T,M=this,I=(0,_._normalizeUser)(e,S),R=null===(k=I.customIDs)||void 0===k?void 0:k.stableID;if(R){var O=null===(T=(E=this.storageProvider).isReadyResolver)||void 0===T?void 0:T.call(E);O?O.then(function(){return _.StableID.setOverride(R,M._sdkKey)},function(){return _.StableID.setOverride(R,M._sdkKey)}):_.StableID.setOverride(R,this._sdkKey)}return Object.keys(this._possibleFirstTouchMetadata).length>0&&(I.analyticsOnlyMetadata=Object.assign(Object.assign({},I.analyticsOnlyMetadata),this._possibleFirstTouchMetadata)),I}},{key:"_getFeatureGateImpl",value:function(e,S){var k,E,T=this._store.getGate(e),M=T.result,I=T.details,R=(0,_._makeFeatureGate)(e,I,M),O=null===(E=null===(k=this.overrideAdapter)||void 0===k?void 0:k.getGateOverride)||void 0===E?void 0:E.call(k,R,this._user,S),D=null!=O?O:R;return this._enqueueExposure(e,(0,_._createGateExposure)(this._user,D,this._store.getExposureMapping()),S),this.$emt({name:"gate_evaluation",gate:D}),D}},{key:"_getDynamicConfigImpl",value:function(e,S){var k,E,T=this._store.getConfig(e),M=T.result,I=T.details,R=(0,_._makeDynamicConfig)(e,I,M),O=null===(E=null===(k=this.overrideAdapter)||void 0===k?void 0:k.getDynamicConfigOverride)||void 0===E?void 0:E.call(k,R,this._user,S),D=null!=O?O:R;return this._enqueueExposure(e,(0,_._createConfigExposure)(this._user,D,this._store.getExposureMapping()),S),this.$emt({name:"dynamic_config_evaluation",dynamicConfig:D}),D}},{key:"_getExperimentImpl",value:function(e,S){var k,E,T,M,I=this._store.getConfig(e),R=I.result,O=I.details,D=(0,_._makeExperiment)(e,O,R);null!=D.__evaluation&&(D.__evaluation.secondary_exposures=(0,_._mapExposures)(null!==(E=null===(k=D.__evaluation)||void 0===k?void 0:k.secondary_exposures)&&void 0!==E?E:[],this._store.getExposureMapping()));var L=null===(M=null===(T=this.overrideAdapter)||void 0===T?void 0:T.getExperimentOverride)||void 0===M?void 0:M.call(T,D,this._user,S),U=null!=L?L:D;return this._enqueueExposure(e,(0,_._createConfigExposure)(this._user,U,this._store.getExposureMapping()),S),this.$emt({name:"experiment_evaluation",experiment:U}),U}},{key:"_getConfigListImpl",value:function(){return this._store.getConfigList()}},{key:"_getLayerImpl",value:function(e,S){var k,E,T,M=this,I=this._store.getLayer(e),R=I.result,O=I.details,D=(0,_._makeLayer)(e,O,R),L=null===(E=null===(k=this.overrideAdapter)||void 0===k?void 0:k.getLayerOverride)||void 0===E?void 0:E.call(k,D,this._user,S);(null==S?void 0:S.disableExposureLog)&&this._logger.incrementNonExposureCount(e);var U=(0,_._mergeOverride)(D,L,null!==(T=null==L?void 0:L.__value)&&void 0!==T?T:D.__value,function(k){(null==S?void 0:S.disableExposureLog)||M._enqueueExposure(e,(0,_._createLayerParameterExposure)(M._user,U,k,M._store.getExposureMapping()),S)});return this.$emt({name:"layer_evaluation",layer:U}),U}},{key:"_getParameterStoreImpl",value:function(e,_){var S,k,T=this._store.getParamStore(e),M=T.result,I=T.details;this._logger.incrementNonExposureCount(e);var R={name:e,details:I,__configuration:M,get:(0,E._makeParamStoreGetter)(this,M,_)},O=null===(k=null===(S=this.overrideAdapter)||void 0===S?void 0:S.getParamStoreOverride)||void 0===k?void 0:k.call(S,R,_);return null!=O&&(R.__configuration=O.config,R.details=O.details,R.get=(0,E._makeParamStoreGetter)(this,O.config,_)),R}}],[{key:"instance",value:function(e){var S=(0,_._getStatsigGlobal)().instance(e);return S instanceof StatsigClient?S:(_.Log.warn((0,_._isServerEnv)()?"StatsigClient.instance is not supported in server environments":"Unable to find StatsigClient instance"),new StatsigClient(null!=e?e:"",{}))}}])}(_.StatsigClientBase);return sa.default=M,sa}function requireSrc$2(){return Sa||(Sa=1,function(e){var _=oa&&oa.__createBinding||(Object.create?function(e,_,S,k){void 0===k&&(k=S);var E=Object.getOwnPropertyDescriptor(_,S);E&&!("get"in E?!_.__esModule:E.writable||E.configurable)||(E={enumerable:!0,get:function(){return _[S]}}),Object.defineProperty(e,k,E)}:function(e,_,S,k){void 0===k&&(k=S),e[k]=_[S]}),S=oa&&oa.__exportStar||function(e,S){for(var k in e)"default"===k||Object.prototype.hasOwnProperty.call(S,k)||_(S,e,k)};Object.defineProperty(e,"__esModule",{value:!0}),e.StatsigClient=void 0;var k=requireSrc$3(),E=requireStatsigClient();e.StatsigClient=E.default,S(requireSrc$3(),e);var T=Object.assign((0,k._getStatsigGlobal)(),{StatsigClient:E.default});e.default=T}(oa)),oa}D("b4",requireSrc$2());var xa,ka,Ca={},Aa={},Ea={},Ta={},Ma={};function requireRecord(){return xa||(xa=1,function(e){var M={};Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});var I,R=Object.defineProperty,__publicField=function(e,_,S){return function(e,_,S){return _ in e?R(e,_,{enumerable:!0,configurable:!0,writable:!0,value:S}):e[_]=S}(e,"symbol"!==_typeof3(_)?_+"":_,S)},O=Object.defineProperty,__publicField$1=function(e,_,S){return function(e,_,S){return _ in e?O(e,_,{enumerable:!0,configurable:!0,writable:!0,value:S}):e[_]=S}(e,"symbol"!==_typeof3(_)?_+"":_,S)},D=function(e){return e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment",e}(D||{}),L={Node:["childNodes","parentNode","parentElement","textContent"],ShadowRoot:["host","styleSheets"],Element:["shadowRoot","querySelector","querySelectorAll"],MutationObserver:[]},U={Node:["contains","getRootNode"],ShadowRoot:["getSelection"],Element:[],MutationObserver:["constructor"]},B={};function getUntaintedPrototype$1(e){if(B[e])return B[e];var _=globalThis[e],S=_.prototype,k=e in L?L[e]:void 0,E=Boolean(k&&k.every(function(e){var _,k;return Boolean(null==(k=null==(_=Object.getOwnPropertyDescriptor(S,e))?void 0:_.get)?void 0:k.toString().includes("[native code]"))})),T=e in U?U[e]:void 0,M=Boolean(T&&T.every(function(e){var _;return"function"==typeof S[e]&&(null==(_=S[e])?void 0:_.toString().includes("[native code]"))}));if(E&&M)return B[e]=_.prototype,_.prototype;try{var I=document.createElement("iframe");document.body.appendChild(I);var R=I.contentWindow;if(!R)return _.prototype;var O=R[e].prototype;return document.body.removeChild(I),O?B[e]=O:S}catch(D){return S}}var z={};function getUntaintedAccessor$1(e,_,S){var k,E="".concat(e,".").concat(String(S));if(z[E])return z[E].call(_);var T=getUntaintedPrototype$1(e),M=null==(k=Object.getOwnPropertyDescriptor(T,S))?void 0:k.get;return M?(z[E]=M,M.call(_)):_[S]}var G={};function getUntaintedMethod$1(e,_,S){var k="".concat(e,".").concat(String(S));if(G[k])return G[k].bind(_);var E=getUntaintedPrototype$1(e)[S];return"function"!=typeof E?_[S]:(G[k]=E,E.bind(_))}var j={childNodes:function(e){return getUntaintedAccessor$1("Node",e,"childNodes")},parentNode:function(e){return getUntaintedAccessor$1("Node",e,"parentNode")},parentElement:function(e){return getUntaintedAccessor$1("Node",e,"parentElement")},textContent:function(e){return getUntaintedAccessor$1("Node",e,"textContent")},contains:function(e,_){return getUntaintedMethod$1("Node",e,"contains")(_)},getRootNode:function(e){return getUntaintedMethod$1("Node",e,"getRootNode")()},host:function(e){return e&&"host"in e?getUntaintedAccessor$1("ShadowRoot",e,"host"):null},styleSheets:function(e){return e.styleSheets},shadowRoot:function(e){return e&&"shadowRoot"in e?getUntaintedAccessor$1("Element",e,"shadowRoot"):null},querySelector:function(e,_){return getUntaintedAccessor$1("Element",e,"querySelector")(_)},querySelectorAll:function(e,_){return getUntaintedAccessor$1("Element",e,"querySelectorAll")(_)},mutationObserver:function(){return getUntaintedPrototype$1("MutationObserver").constructor}};function isElement(e){return e.nodeType===e.ELEMENT_NODE}function isShadowRoot(e){var _=e&&"host"in e&&"mode"in e&&j.host(e)||null;return Boolean(_&&"shadowRoot"in _&&j.shadowRoot(_)===e)}function isNativeShadowDom(e){return"[object ShadowRoot]"===Object.prototype.toString.call(e)}function stringifyStylesheet(e){try{var _=e.rules||e.cssRules;if(!_)return null;var S=Array.from(_,function(_){return stringifyRule(_,e.href)}).join("");return(k=S).includes(" background-clip: text;")&&!k.includes(" -webkit-background-clip: text;")&&(k=k.replace(/\sbackground-clip:\s*text;/g," -webkit-background-clip: text; background-clip: text;")),k}catch(E){return null}var k}function stringifyRule(e,_){if(function(e){return"styleSheet"in e}(e)){var S;try{S=stringifyStylesheet(e.styleSheet)||function(e){var _=e.cssText;if(_.split('"').length<3)return _;var S=["@import","url(".concat(JSON.stringify(e.href),")")];return""===e.layerName?S.push("layer"):e.layerName&&S.push("layer(".concat(e.layerName,")")),e.supportsText&&S.push("supports(".concat(e.supportsText,")")),e.media.length&&S.push(e.media.mediaText),S.join(" ")+";"}(e)}catch(T){S=e.cssText}return e.styleSheet.href?absolutifyURLs(S,e.styleSheet.href):S}var k,E=e.cssText;return function(e){return"selectorText"in e}(e)&&e.selectorText.includes(":")&&(k=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm,E=E.replace(k,"$1\\$2")),_?absolutifyURLs(E,_):E}var V=function(){return _createClass3(function Mirror(){_classCallCheck3(this,Mirror),__publicField$1(this,"idNodeMap",new Map),__publicField$1(this,"nodeMetaMap",new WeakMap)},[{key:"getId",value:function(e){var _;if(!e)return-1;var S=null==(_=this.getMeta(e))?void 0:_.id;return null!=S?S:-1}},{key:"getNode",value:function(e){return this.idNodeMap.get(e)||null}},{key:"getIds",value:function(){return Array.from(this.idNodeMap.keys())}},{key:"getMeta",value:function(e){return this.nodeMetaMap.get(e)||null}},{key:"removeNodeFromMap",value:function(e){var _=this,S=this.getId(e);this.idNodeMap.delete(S),e.childNodes&&e.childNodes.forEach(function(e){return _.removeNodeFromMap(e)})}},{key:"has",value:function(e){return this.idNodeMap.has(e)}},{key:"hasNode",value:function(e){return this.nodeMetaMap.has(e)}},{key:"add",value:function(e,_){var S=_.id;this.idNodeMap.set(S,e),this.nodeMetaMap.set(e,_)}},{key:"replace",value:function(e,_){var S=this.getNode(e);if(S){var k=this.nodeMetaMap.get(S);k&&this.nodeMetaMap.set(_,k)}this.idNodeMap.set(e,_)}},{key:"reset",value:function(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}])}();function maskInputValue(e){var _=e.element,S=e.maskInputOptions,k=e.tagName,E=e.type,T=e.value,M=e.maskInputFn,I=T||"",R=E&&toLowerCase(E);return(S[k.toLowerCase()]||R&&S[R])&&(I=M?M(I,_):"*".repeat(I.length)),I}function toLowerCase(e){return e.toLowerCase()}var H="__rrweb_original__";function getInputType(e){var _=e.type;return e.hasAttribute("data-rr-is-password")?"password":_?toLowerCase(_):null}function extractFileExtension(e,_){var S,k;try{k=new URL(e,null!=_?_:window.location.href)}catch(T){return null}var E=k.pathname.match(/\.([0-9a-z]+)(?:$)/i);return null!==(S=null==E?void 0:E[1])&&void 0!==S?S:null}var W=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,q=/^(?:[a-z+]+:)?\/\//i,X=/^www\..*/i,Y=/^(data:)([^,]*),(.*)/i;function absolutifyURLs(e,_){return(e||"").replace(W,function(e,S,k,E,T,M){var I,R=k||T||M,O=S||E||"";if(!R)return e;if(q.test(R)||X.test(R))return"url(".concat(O).concat(R).concat(O,")");if(Y.test(R))return"url(".concat(O).concat(R).concat(O,")");if("/"===R[0])return"url(".concat(O).concat((I=_,(I.indexOf("//")>-1?I.split("/").slice(0,3).join("/"):I.split("/")[0]).split("?")[0]+R)).concat(O,")");var D=_.split("/"),L=R.split("/");D.pop();var U,B=_createForOfIteratorHelper2(L);try{for(B.s();!(U=B.n()).done;){var z=U.value;"."!==z&&(".."===z?D.pop():D.push(z))}}catch(G){B.e(G)}finally{B.f()}return"url(".concat(O).concat(D.join("/")).concat(O,")")})}var K,J,Q=1,Z=new RegExp("[^a-z0-9-_:]");function genId(){return Q++}var $=/^[^ \t\n\r\u000c]+/,ee=/^[, \t\n\r\u000c]+/;var te=new WeakMap;function absoluteToDoc(e,_){return _&&""!==_.trim()?getHref(e,_):_}function isSVGElement(e){return Boolean("svg"===e.tagName||e.ownerSVGElement)}function getHref(e,_){var S=te.get(e);if(S||(S=e.createElement("a"),te.set(e,S)),_){if(_.startsWith("blob:")||_.startsWith("data:"))return _}else _="";return S.setAttribute("href",_),S.href}function transformAttribute(e,_,S,k){return k?"src"===S||"href"===S&&("use"!==_||"#"!==k[0])||"xlink:href"===S&&"#"!==k[0]?absoluteToDoc(e,k):"background"!==S||"table"!==_&&"td"!==_&&"th"!==_?"srcset"===S?function(e,_){if(""===_.trim())return _;var S=0;function collectCharacters(e){var k,E=e.exec(_.substring(S));return E?(k=E[0],S+=k.length,k):""}for(var k=[];collectCharacters(ee),!(S>=_.length);){var E=collectCharacters($);if(","===E.slice(-1))E=absoluteToDoc(e,E.substring(0,E.length-1)),k.push(E);else{var T="";E=absoluteToDoc(e,E);for(var M=!1;;){var I=_.charAt(S);if(""===I){k.push((E+T).trim());break}if(M)")"===I&&(M=!1);else{if(","===I){S+=1,k.push((E+T).trim());break}"("===I&&(M=!0)}T+=I,S+=1}}}return k.join(", ")}(e,k):"style"===S?absolutifyURLs(k,getHref(e)):"object"===_&&"data"===S?absoluteToDoc(e,k):k:absoluteToDoc(e,k):k}function ignoreAttribute(e,_,S){return("video"===e||"audio"===e)&&"autoplay"===_}function classMatchesRegex(e,_,S){if(!e)return!1;if(e.nodeType!==e.ELEMENT_NODE)return!!S&&classMatchesRegex(j.parentNode(e),_,S);for(var k=e.classList.length;k--;){var E=e.classList[k];if(_.test(E))return!0}return!!S&&classMatchesRegex(j.parentNode(e),_,S)}function needMaskingText(e,_,S,k){var E;if(isElement(e)){if(E=e,!j.childNodes(E).length)return!1}else{if(null===j.parentElement(e))return!1;E=j.parentElement(e)}try{if("string"==typeof _){if(k){if(E.closest(".".concat(_)))return!0}else if(E.classList.contains(_))return!0}else if(classMatchesRegex(E,_,k))return!0;if(S)if(k){if(E.closest(S))return!0}else if(E.matches(S))return!0}catch(T){}return!1}function serializeNode(e,_){var S=_.doc,k=_.mirror,E=_.blockClass,T=_.blockSelector,M=_.needsMask,I=_.inlineStylesheet,R=_.maskInputOptions,O=void 0===R?{}:R,L=_.maskTextFn,U=_.maskInputFn,B=_.dataURLOptions,z=void 0===B?{}:B,G=_.inlineImages,V=_.recordCanvas,W=_.keepIframeSrcFn,q=_.newlyAddedElement,X=void 0!==q&&q,Y=function(e,_){if(!_.hasNode(e))return;var S=_.getId(e);return 1===S?void 0:S}(S,k);switch(e.nodeType){case e.DOCUMENT_NODE:return"CSS1Compat"!==e.compatMode?{type:D.Document,childNodes:[],compatMode:e.compatMode}:{type:D.Document,childNodes:[]};case e.DOCUMENT_TYPE_NODE:return{type:D.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:Y};case e.ELEMENT_NODE:return function(e,_){for(var S,k=_.doc,E=_.blockClass,T=_.blockSelector,M=_.inlineStylesheet,I=_.maskInputOptions,R=void 0===I?{}:I,O=_.maskInputFn,L=_.dataURLOptions,U=void 0===L?{}:L,B=_.inlineImages,z=_.recordCanvas,G=_.keepIframeSrcFn,V=_.newlyAddedElement,W=void 0!==V&&V,q=_.rootId,X=function(e,_,S){try{if("string"==typeof _){if(e.classList.contains(_))return!0}else for(var k=e.classList.length;k--;){var E=e.classList[k];if(_.test(E))return!0}if(S)return e.matches(S)}catch(T){}return!1}(e,E,T),Y=function(e){if(e instanceof HTMLFormElement)return"form";var _=toLowerCase(e.tagName);return Z.test(_)?"div":_}(e),Q={},$=e.attributes.length,ee=0;ee<$;ee++){var te=e.attributes[ee];ignoreAttribute(Y,te.name,te.value)||(Q[te.name]=transformAttribute(k,Y,toLowerCase(te.name),te.value))}if("link"===Y&&M){var re=Array.from(k.styleSheets).find(function(_){return _.href===e.href}),ne=null;re&&(ne=stringifyStylesheet(re)),ne&&(delete Q.rel,delete Q.href,Q._cssText=ne)}if("style"===Y&&e.sheet&&!(e.innerText||j.textContent(e)||"").trim().length){var ie=stringifyStylesheet(e.sheet);ie&&(Q._cssText=ie)}if("input"===Y||"textarea"===Y||"select"===Y){var ae=e.value,oe=e.checked;"radio"!==Q.type&&"checkbox"!==Q.type&&"submit"!==Q.type&&"button"!==Q.type&&ae?Q.value=maskInputValue({element:e,type:getInputType(e),tagName:Y,value:ae,maskInputOptions:R,maskInputFn:O}):oe&&(Q.checked=oe)}"option"===Y&&(e.selected&&!R.select?Q.selected=!0:delete Q.selected);"dialog"===Y&&e.open&&(Q.rr_open_mode=e.matches("dialog:modal")?"modal":"non-modal");if("canvas"===Y&&z)if("2d"===e.__context)(function(e){var _=e.getContext("2d");if(!_)return!0;for(var S=0;S<e.width;S+=50)for(var k=0;k<e.height;k+=50){var E=_.getImageData,T=H in E?E[H]:E;if(new Uint32Array(T.call(_,S,k,Math.min(50,e.width-S),Math.min(50,e.height-k)).data.buffer).some(function(e){return 0!==e}))return!1}return!0})(e)||(Q.rr_dataURL=e.toDataURL(U.type,U.quality));else if(!("__context"in e)){var se=e.toDataURL(U.type,U.quality),ue=k.createElement("canvas");ue.width=e.width,ue.height=e.height,se!==ue.toDataURL(U.type,U.quality)&&(Q.rr_dataURL=se)}if("img"===Y&&B){K||(K=k.createElement("canvas"),J=K.getContext("2d"));var le=e,ce=(le.currentSrc||le.getAttribute("src"),le.crossOrigin),_recordInlineImage=function(){le.removeEventListener("load",_recordInlineImage);try{K.width=le.naturalWidth,K.height=le.naturalHeight,J.drawImage(le,0,0),Q.rr_dataURL=K.toDataURL(U.type,U.quality)}catch(e){if("anonymous"!==le.crossOrigin)return le.crossOrigin="anonymous",void(le.complete&&0!==le.naturalWidth?_recordInlineImage():le.addEventListener("load",_recordInlineImage))}"anonymous"===le.crossOrigin&&(ce?Q.crossOrigin=ce:le.removeAttribute("crossorigin"))};le.complete&&0!==le.naturalWidth?_recordInlineImage():le.addEventListener("load",_recordInlineImage)}if("audio"===Y||"video"===Y){var he=Q;he.rr_mediaState=e.paused?"paused":"played",he.rr_mediaCurrentTime=e.currentTime,he.rr_mediaPlaybackRate=e.playbackRate,he.rr_mediaMuted=e.muted,he.rr_mediaLoop=e.loop,he.rr_mediaVolume=e.volume}W||(e.scrollLeft&&(Q.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(Q.rr_scrollTop=e.scrollTop));if(X){var de=e.getBoundingClientRect(),fe=de.width,pe=de.height;Q={class:Q.class,rr_width:"".concat(fe,"px"),rr_height:"".concat(pe,"px")}}"iframe"!==Y||G(Q.src)||(e.contentDocument||(Q.rr_src=Q.src),delete Q.src);try{customElements.get(Y)&&(S=!0)}catch(ve){}return{type:D.Element,tagName:Y,attributes:Q,childNodes:[],isSVG:isSVGElement(e)||void 0,needBlock:X,rootId:q,isCustom:S}}(e,{doc:S,blockClass:E,blockSelector:T,inlineStylesheet:I,maskInputOptions:O,maskInputFn:U,dataURLOptions:z,inlineImages:G,recordCanvas:V,keepIframeSrcFn:W,newlyAddedElement:X,rootId:Y});case e.TEXT_NODE:return function(e,_){var S,k=_.needsMask,E=_.maskTextFn,T=_.rootId,M=j.parentNode(e),I=M&&M.tagName,R=j.textContent(e),O="STYLE"===I||void 0,L="SCRIPT"===I||void 0;if(O&&R){try{e.nextSibling||e.previousSibling||(null==(S=M.sheet)?void 0:S.cssRules)&&(R=stringifyStylesheet(M.sheet))}catch(U){}R=absolutifyURLs(R,getHref(_.doc))}L&&(R="SCRIPT_PLACEHOLDER");!O&&!L&&R&&k&&(R=E?E(R,j.parentElement(e)):R.replace(/[\S]/g,"*"));return{type:D.Text,textContent:R||"",isStyle:O,rootId:T}}(e,{doc:S,needsMask:M,maskTextFn:L,rootId:Y});case e.CDATA_SECTION_NODE:return{type:D.CDATA,textContent:"",rootId:Y};case e.COMMENT_NODE:return{type:D.Comment,textContent:j.textContent(e)||"",rootId:Y};default:return!1}}function lowerIfExists(e){return null==e?"":e.toLowerCase()}function serializeNodeWithId(e,_){var S=_.doc,k=_.mirror,E=_.blockClass,T=_.blockSelector,M=_.maskTextClass,I=_.maskTextSelector,R=_.skipChild,O=void 0!==R&&R,L=_.inlineStylesheet,U=void 0===L||L,B=_.maskInputOptions,z=void 0===B?{}:B,G=_.maskTextFn,V=_.maskInputFn,H=_.slimDOMOptions,W=_.dataURLOptions,q=void 0===W?{}:W,X=_.inlineImages,Y=void 0!==X&&X,K=_.recordCanvas,J=void 0!==K&&K,Q=_.onSerialize,Z=_.onIframeLoad,$=_.iframeLoadTimeout,ee=void 0===$?5e3:$,te=_.onStylesheetLoad,re=_.stylesheetLoadTimeout,ne=void 0===re?5e3:re,ie=_.keepIframeSrcFn,ae=void 0===ie?function(){return!1}:ie,oe=_.newlyAddedElement,se=void 0!==oe&&oe,ue=_.needsMask,le=_.preserveWhiteSpace,ce=void 0===le||le;ue||(ue=needMaskingText(e,M,I,void 0===ue));var he,de=serializeNode(e,{doc:S,mirror:k,blockClass:E,blockSelector:T,needsMask:ue,inlineStylesheet:U,maskInputOptions:z,maskTextFn:G,maskInputFn:V,dataURLOptions:q,inlineImages:Y,recordCanvas:J,keepIframeSrcFn:ae,newlyAddedElement:se});if(!de)return null;he=k.hasNode(e)?k.getId(e):!function(e,_){if(_.comment&&e.type===D.Comment)return!0;if(e.type===D.Element){if(_.script&&("script"===e.tagName||"link"===e.tagName&&("preload"===e.attributes.rel||"modulepreload"===e.attributes.rel)&&"script"===e.attributes.as||"link"===e.tagName&&"prefetch"===e.attributes.rel&&"string"==typeof e.attributes.href&&"js"===extractFileExtension(e.attributes.href)))return!0;if(_.headFavicon&&("link"===e.tagName&&"shortcut icon"===e.attributes.rel||"meta"===e.tagName&&(lowerIfExists(e.attributes.name).match(/^msapplication-tile(image|color)$/)||"application-name"===lowerIfExists(e.attributes.name)||"icon"===lowerIfExists(e.attributes.rel)||"apple-touch-icon"===lowerIfExists(e.attributes.rel)||"shortcut icon"===lowerIfExists(e.attributes.rel))))return!0;if("meta"===e.tagName){if(_.headMetaDescKeywords&&lowerIfExists(e.attributes.name).match(/^description|keywords$/))return!0;if(_.headMetaSocial&&(lowerIfExists(e.attributes.property).match(/^(og|twitter|fb):/)||lowerIfExists(e.attributes.name).match(/^(og|twitter):/)||"pinterest"===lowerIfExists(e.attributes.name)))return!0;if(_.headMetaRobots&&("robots"===lowerIfExists(e.attributes.name)||"googlebot"===lowerIfExists(e.attributes.name)||"bingbot"===lowerIfExists(e.attributes.name)))return!0;if(_.headMetaHttpEquiv&&void 0!==e.attributes["http-equiv"])return!0;if(_.headMetaAuthorship&&("author"===lowerIfExists(e.attributes.name)||"generator"===lowerIfExists(e.attributes.name)||"framework"===lowerIfExists(e.attributes.name)||"publisher"===lowerIfExists(e.attributes.name)||"progid"===lowerIfExists(e.attributes.name)||lowerIfExists(e.attributes.property).match(/^article:/)||lowerIfExists(e.attributes.property).match(/^product:/)))return!0;if(_.headMetaVerification&&("google-site-verification"===lowerIfExists(e.attributes.name)||"yandex-verification"===lowerIfExists(e.attributes.name)||"csrf-token"===lowerIfExists(e.attributes.name)||"p:domain_verify"===lowerIfExists(e.attributes.name)||"verify-v1"===lowerIfExists(e.attributes.name)||"verification"===lowerIfExists(e.attributes.name)||"shopify-checkout-api-token"===lowerIfExists(e.attributes.name)))return!0}}return!1}(de,H)&&(ce||de.type!==D.Text||de.isStyle||de.textContent.replace(/^\s+|\s+$/gm,"").length)?genId():-2;var fe=Object.assign(de,{id:he});if(k.add(e,fe),-2===he)return null;Q&&Q(e);var pe=!O;if(fe.type===D.Element){pe=pe&&!fe.needBlock,delete fe.needBlock;var ve=j.shadowRoot(e);ve&&isNativeShadowDom(ve)&&(fe.isShadowHost=!0)}if((fe.type===D.Document||fe.type===D.Element)&&pe){H.headWhitespace&&fe.type===D.Element&&"head"===fe.tagName&&(ce=!1);var ge={doc:S,mirror:k,blockClass:E,blockSelector:T,needsMask:ue,maskTextClass:M,maskTextSelector:I,skipChild:O,inlineStylesheet:U,maskInputOptions:z,maskTextFn:G,maskInputFn:V,slimDOMOptions:H,dataURLOptions:q,inlineImages:Y,recordCanvas:J,preserveWhiteSpace:ce,onSerialize:Q,onIframeLoad:Z,iframeLoadTimeout:ee,onStylesheetLoad:te,stylesheetLoadTimeout:ne,keepIframeSrcFn:ae};if(fe.type===D.Element&&"textarea"===fe.tagName&&void 0!==fe.attributes.value);else for(var me=0,ye=Array.from(j.childNodes(e));me<ye.length;me++){var _e=serializeNodeWithId(ye[me],ge);_e&&fe.childNodes.push(_e)}var be=null;if(isElement(e)&&(be=j.shadowRoot(e)))for(var Se=0,we=Array.from(j.childNodes(be));Se<we.length;Se++){var xe=serializeNodeWithId(we[Se],ge);xe&&(isNativeShadowDom(be)&&(xe.isShadow=!0),fe.childNodes.push(xe))}}var ke=j.parentNode(e);return ke&&isShadowRoot(ke)&&isNativeShadowDom(ke)&&(fe.isShadow=!0),fe.type===D.Element&&"iframe"===fe.tagName&&function(e,_,S){var k=e.contentWindow;if(k){var E,T=!1;try{E=k.document.readyState}catch(R){return}if("complete"===E){var M="about:blank";if(k.location.href!==M||e.src===M||""===e.src)return setTimeout(_,0),e.addEventListener("load",_);e.addEventListener("load",_)}else{var I=setTimeout(function(){T||(_(),T=!0)},S);e.addEventListener("load",function(){clearTimeout(I),T=!0,_()})}}}(e,function(){var _=e.contentDocument;if(_&&Z){var S=serializeNodeWithId(_,{doc:_,mirror:k,blockClass:E,blockSelector:T,needsMask:ue,maskTextClass:M,maskTextSelector:I,skipChild:!1,inlineStylesheet:U,maskInputOptions:z,maskTextFn:G,maskInputFn:V,slimDOMOptions:H,dataURLOptions:q,inlineImages:Y,recordCanvas:J,preserveWhiteSpace:ce,onSerialize:Q,onIframeLoad:Z,iframeLoadTimeout:ee,onStylesheetLoad:te,stylesheetLoadTimeout:ne,keepIframeSrcFn:ae});S&&Z(e,S)}},ee),fe.type===D.Element&&"link"===fe.tagName&&"string"==typeof fe.attributes.rel&&("stylesheet"===fe.attributes.rel||"preload"===fe.attributes.rel&&"string"==typeof fe.attributes.href&&"css"===extractFileExtension(fe.attributes.href))&&function(e,_,S){var k,E=!1;try{k=e.sheet}catch(M){return}if(!k){var T=setTimeout(function(){E||(_(),E=!0)},S);e.addEventListener("load",function(){clearTimeout(T),E=!0,_()})}}(e,function(){if(te){var _=serializeNodeWithId(e,{doc:S,mirror:k,blockClass:E,blockSelector:T,needsMask:ue,maskTextClass:M,maskTextSelector:I,skipChild:!1,inlineStylesheet:U,maskInputOptions:z,maskTextFn:G,maskInputFn:V,slimDOMOptions:H,dataURLOptions:q,inlineImages:Y,recordCanvas:J,preserveWhiteSpace:ce,onSerialize:Q,onIframeLoad:Z,iframeLoadTimeout:ee,onStylesheetLoad:te,stylesheetLoadTimeout:ne,keepIframeSrcFn:ae});_&&te(e,_)}},ne),fe}function getDefaultExportFromCjs$1(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function getAugmentedNamespace$1(e){if(e.__esModule)return e;var _=e.default;if("function"==typeof _){var S=function a22(){return this instanceof a22?Reflect.construct(_,arguments,this.constructor):_.apply(this,arguments)};S.prototype=_.prototype}else S={};return Object.defineProperty(S,"__esModule",{value:!0}),Object.keys(e).forEach(function(_){var k=Object.getOwnPropertyDescriptor(e,_);Object.defineProperty(S,_,k.get?k:{enumerable:!0,get:function(){return e[_]}})}),S}var re={exports:{}},ne=String,create$1=function(){return{isColorSupported:!1,reset:ne,bold:ne,dim:ne,italic:ne,underline:ne,inverse:ne,hidden:ne,strikethrough:ne,black:ne,red:ne,green:ne,yellow:ne,blue:ne,magenta:ne,cyan:ne,white:ne,gray:ne,bgBlack:ne,bgRed:ne,bgGreen:ne,bgYellow:ne,bgBlue:ne,bgMagenta:ne,bgCyan:ne,bgWhite:ne}};re.exports=create$1(),re.exports.createColors=create$1;var ie=re.exports,ae=getAugmentedNamespace$1(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"}))),oe=ie,se=ae,ue=function(e){function CssSyntaxError(e,_,S,k,E,T){var M;return _classCallCheck3(this,CssSyntaxError),(M=_callSuper(this,CssSyntaxError,[e])).name="CssSyntaxError",M.reason=e,E&&(M.file=E),k&&(M.source=k),T&&(M.plugin=T),void 0!==_&&void 0!==S&&("number"==typeof _?(M.line=_,M.column=S):(M.line=_.line,M.column=_.column,M.endLine=S.line,M.endColumn=S.column)),M.setMessage(),Error.captureStackTrace&&Error.captureStackTrace(M,CssSyntaxError),M}return _inherits(CssSyntaxError,e),_createClass3(CssSyntaxError,[{key:"setMessage",value:function(){this.message=this.plugin?this.plugin+": ":"",this.message+=this.file?this.file:"<css input>",void 0!==this.line&&(this.message+=":"+this.line+":"+this.column),this.message+=": "+this.reason}},{key:"showSourceCode",value:function(e){var _=this;if(!this.source)return"";var S=this.source;null==e&&(e=oe.isColorSupported),se&&e&&(S=se(S));var k,E,T=S.split(/\r?\n/),M=Math.max(this.line-3,0),I=Math.min(this.line+2,T.length),R=String(I).length;if(e){var O=oe.createColors(!0),D=O.bold,L=O.gray,U=O.red;k=function(e){return D(U(e))},E=function(e){return L(e)}}else k=E=function(e){return e};return T.slice(M,I).map(function(e,S){var T=M+1+S,I=" "+(" "+T).slice(-R)+" | ";if(T===_.line){var O=E(I.replace(/\d/g," "))+e.slice(0,_.column-1).replace(/[^\t]/g," ");return k(">")+E(I)+e+"\n "+O+k("^")}return" "+E(I)+e}).join("\n")}},{key:"toString",value:function(){var e=this.showSourceCode();return e&&(e="\n\n"+e+"\n"),this.name+": "+this.message+e}}])}(_wrapNativeSuper(Error)),le=ue;ue.default=ue;var ce={};ce.isClean=Symbol("isClean"),ce.my=Symbol("my");var he={after:"\n",beforeClose:"\n",beforeComment:"\n",beforeDecl:"\n",beforeOpen:" ",beforeRule:"\n",colon:": ",commentLeft:" ",commentRight:" ",emptyBody:"",indent:"    ",semicolon:!1};var de=function(){return _createClass3(function Stringifier(e){_classCallCheck3(this,Stringifier),this.builder=e},[{key:"atrule",value:function(e,_){var S="@"+e.name,k=e.params?this.rawValue(e,"params"):"";if(void 0!==e.raws.afterName?S+=e.raws.afterName:k&&(S+=" "),e.nodes)this.block(e,S+k);else{var E=(e.raws.between||"")+(_?";":"");this.builder(S+k+E,e)}}},{key:"beforeAfter",value:function(e,_){var S;S="decl"===e.type?this.raw(e,null,"beforeDecl"):"comment"===e.type?this.raw(e,null,"beforeComment"):"before"===_?this.raw(e,null,"beforeRule"):this.raw(e,null,"beforeClose");for(var k=e.parent,E=0;k&&"root"!==k.type;)E+=1,k=k.parent;if(S.includes("\n")){var T=this.raw(e,null,"indent");if(T.length)for(var M=0;M<E;M++)S+=T}return S}},{key:"block",value:function(e,_){var S,k=this.raw(e,"between","beforeOpen");this.builder(_+k+"{",e,"start"),e.nodes&&e.nodes.length?(this.body(e),S=this.raw(e,"after")):S=this.raw(e,"after","emptyBody"),S&&this.builder(S),this.builder("}",e,"end")}},{key:"body",value:function(e){for(var _=e.nodes.length-1;_>0&&"comment"===e.nodes[_].type;)_-=1;for(var S=this.raw(e,"semicolon"),k=0;k<e.nodes.length;k++){var E=e.nodes[k],T=this.raw(E,"before");T&&this.builder(T),this.stringify(E,_!==k||S)}}},{key:"comment",value:function(e){var _=this.raw(e,"left","commentLeft"),S=this.raw(e,"right","commentRight");this.builder("/*"+_+e.text+S+"*/",e)}},{key:"decl",value:function(e,_){var S=this.raw(e,"between","colon"),k=e.prop+S+this.rawValue(e,"value");e.important&&(k+=e.raws.important||" !important"),_&&(k+=";"),this.builder(k,e)}},{key:"document",value:function(e){this.body(e)}},{key:"raw",value:function(e,_,S){var k;if(S||(S=_),_&&void 0!==(k=e.raws[_]))return k;var E=e.parent;if("before"===S){if(!E||"root"===E.type&&E.first===e)return"";if(E&&"document"===E.type)return""}if(!E)return he[S];var T=e.root();if(T.rawCache||(T.rawCache={}),void 0!==T.rawCache[S])return T.rawCache[S];if("before"===S||"after"===S)return this.beforeAfter(e,S);var M,I="raw"+((M=S)[0].toUpperCase()+M.slice(1));return this[I]?k=this[I](T,e):T.walk(function(e){if(void 0!==(k=e.raws[_]))return!1}),void 0===k&&(k=he[S]),T.rawCache[S]=k,k}},{key:"rawBeforeClose",value:function(e){var _;return e.walk(function(e){if(e.nodes&&e.nodes.length>0&&void 0!==e.raws.after)return(_=e.raws.after).includes("\n")&&(_=_.replace(/[^\n]+$/,"")),!1}),_&&(_=_.replace(/\S/g,"")),_}},{key:"rawBeforeComment",value:function(e,_){var S;return e.walkComments(function(e){if(void 0!==e.raws.before)return(S=e.raws.before).includes("\n")&&(S=S.replace(/[^\n]+$/,"")),!1}),void 0===S?S=this.raw(_,null,"beforeDecl"):S&&(S=S.replace(/\S/g,"")),S}},{key:"rawBeforeDecl",value:function(e,_){var S;return e.walkDecls(function(e){if(void 0!==e.raws.before)return(S=e.raws.before).includes("\n")&&(S=S.replace(/[^\n]+$/,"")),!1}),void 0===S?S=this.raw(_,null,"beforeRule"):S&&(S=S.replace(/\S/g,"")),S}},{key:"rawBeforeOpen",value:function(e){var _;return e.walk(function(e){if("decl"!==e.type&&void 0!==(_=e.raws.between))return!1}),_}},{key:"rawBeforeRule",value:function(e){var _;return e.walk(function(S){if(S.nodes&&(S.parent!==e||e.first!==S)&&void 0!==S.raws.before)return(_=S.raws.before).includes("\n")&&(_=_.replace(/[^\n]+$/,"")),!1}),_&&(_=_.replace(/\S/g,"")),_}},{key:"rawColon",value:function(e){var _;return e.walkDecls(function(e){if(void 0!==e.raws.between)return _=e.raws.between.replace(/[^\s:]/g,""),!1}),_}},{key:"rawEmptyBody",value:function(e){var _;return e.walk(function(e){if(e.nodes&&0===e.nodes.length&&void 0!==(_=e.raws.after))return!1}),_}},{key:"rawIndent",value:function(e){return e.raws.indent?e.raws.indent:(e.walk(function(S){var k=S.parent;if(k&&k!==e&&k.parent&&k.parent===e&&void 0!==S.raws.before){var E=S.raws.before.split("\n");return _=(_=E[E.length-1]).replace(/\S/g,""),!1}}),_);var _}},{key:"rawSemicolon",value:function(e){var _;return e.walk(function(e){if(e.nodes&&e.nodes.length&&"decl"===e.last.type&&void 0!==(_=e.raws.semicolon))return!1}),_}},{key:"rawValue",value:function(e,_){var S=e[_],k=e.raws[_];return k&&k.value===S?k.raw:S}},{key:"root",value:function(e){this.body(e),e.raws.after&&this.builder(e.raws.after)}},{key:"rule",value:function(e){this.block(e,this.rawValue(e,"selector")),e.raws.ownSemicolon&&this.builder(e.raws.ownSemicolon,e,"end")}},{key:"stringify",value:function(e,_){if(!this[e.type])throw new Error("Unknown AST node type "+e.type+". Maybe you need to change PostCSS stringifier.");this[e.type](e,_)}}])}(),fe=de;de.default=de;var pe=fe;function stringify$4$1(e,_){new pe(_).stringify(e)}var ve=stringify$4$1;stringify$4$1.default=stringify$4$1;var ge=ce.isClean,me=ce.my,ye=le,_e=fe,be=ve;function cloneNode$1(e,_){var S=new e.constructor;for(var k in e)if(Object.prototype.hasOwnProperty.call(e,k)&&"proxyCache"!==k){var E=e[k],T=_typeof3(E);"parent"===k&&"object"===T?_&&(S[k]=_):"source"===k?S[k]=E:Array.isArray(E)?S[k]=E.map(function(e){return cloneNode$1(e,S)}):("object"===T&&null!==E&&(E=cloneNode$1(E)),S[k]=E)}return S}var Se=function(){return _createClass3(function Node2(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(var _ in _classCallCheck3(this,Node2),this.raws={},this[ge]=!1,this[me]=!0,e)if("nodes"===_){this.nodes=[];var S,k=_createForOfIteratorHelper2(e[_]);try{for(k.s();!(S=k.n()).done;){var E=S.value;"function"==typeof E.clone?this.append(E.clone()):this.append(E)}}catch(T){k.e(T)}finally{k.f()}}else this[_]=e[_]},[{key:"addToError",value:function(e){if(e.postcssNode=this,e.stack&&this.source&&/\n\s{4}at /.test(e.stack)){var _=this.source;e.stack=e.stack.replace(/\n\s{4}at /,"$&".concat(_.input.from,":").concat(_.start.line,":").concat(_.start.column,"$&"))}return e}},{key:"after",value:function(e){return this.parent.insertAfter(this,e),this}},{key:"assign",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(var _ in e)this[_]=e[_];return this}},{key:"before",value:function(e){return this.parent.insertBefore(this,e),this}},{key:"cleanRaws",value:function(e){delete this.raws.before,delete this.raws.after,e||delete this.raws.between}},{key:"clone",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_=cloneNode$1(this);for(var S in e)_[S]=e[S];return _}},{key:"cloneAfter",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_=this.clone(e);return this.parent.insertAfter(this,_),_}},{key:"cloneBefore",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_=this.clone(e);return this.parent.insertBefore(this,_),_}},{key:"error",value:function(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.source){var S=this.rangeBy(_),k=S.end,E=S.start;return this.source.input.error(e,{column:E.column,line:E.line},{column:k.column,line:k.line},_)}return new ye(e)}},{key:"getProxyProcessor",value:function(){return{get:function(e,_){return"proxyOf"===_?e:"root"===_?function(){return e.root().toProxy()}:e[_]},set:function(e,_,S){return e[_]===S||(e[_]=S,"prop"!==_&&"value"!==_&&"name"!==_&&"params"!==_&&"important"!==_&&"text"!==_||e.markDirty()),!0}}}},{key:"markDirty",value:function(){if(this[ge]){this[ge]=!1;for(var e=this;e=e.parent;)e[ge]=!1}}},{key:"next",value:function(){if(this.parent){var e=this.parent.index(this);return this.parent.nodes[e+1]}}},{key:"positionBy",value:function(e,_){var S=this.source.start;if(e.index)S=this.positionInside(e.index,_);else if(e.word){var k=(_=this.toString()).indexOf(e.word);-1!==k&&(S=this.positionInside(k,_))}return S}},{key:"positionInside",value:function(e,_){for(var S=_||this.toString(),k=this.source.start.column,E=this.source.start.line,T=0;T<e;T++)"\n"===S[T]?(k=1,E+=1):k+=1;return{column:k,line:E}}},{key:"prev",value:function(){if(this.parent){var e=this.parent.index(this);return this.parent.nodes[e-1]}}},{key:"rangeBy",value:function(e){var _={column:this.source.start.column,line:this.source.start.line},S=this.source.end?{column:this.source.end.column+1,line:this.source.end.line}:{column:_.column+1,line:_.line};if(e.word){var k=this.toString(),E=k.indexOf(e.word);-1!==E&&(_=this.positionInside(E,k),S=this.positionInside(E+e.word.length,k))}else e.start?_={column:e.start.column,line:e.start.line}:e.index&&(_=this.positionInside(e.index)),e.end?S={column:e.end.column,line:e.end.line}:"number"==typeof e.endIndex?S=this.positionInside(e.endIndex):e.index&&(S=this.positionInside(e.index+1));return(S.line<_.line||S.line===_.line&&S.column<=_.column)&&(S={column:_.column+1,line:_.line}),{end:S,start:_}}},{key:"raw",value:function(e,_){return(new _e).raw(this,e,_)}},{key:"remove",value:function(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this}},{key:"replaceWith",value:function(){if(this.parent){for(var e=this,_=!1,S=arguments.length,k=new Array(S),E=0;E<S;E++)k[E]=arguments[E];for(var T=0,M=k;T<M.length;T++){var I=M[T];I===this?_=!0:_?(this.parent.insertAfter(e,I),e=I):this.parent.insertBefore(e,I)}_||this.remove()}return this}},{key:"root",value:function(){for(var e=this;e.parent&&"document"!==e.parent.type;)e=e.parent;return e}},{key:"toJSON",value:function(e,_){var S={},k=null==_;_=_||new Map;var E=0;for(var T in this)if(Object.prototype.hasOwnProperty.call(this,T)&&"parent"!==T&&"proxyCache"!==T){var M=this[T];if(Array.isArray(M))S[T]=M.map(function(e){return"object"===_typeof3(e)&&e.toJSON?e.toJSON(null,_):e});else if("object"===_typeof3(M)&&M.toJSON)S[T]=M.toJSON(null,_);else if("source"===T){var I=_.get(M.input);null==I&&(I=E,_.set(M.input,E),E++),S[T]={end:M.end,inputId:I,start:M.start}}else S[T]=M}return k&&(S.inputs=_toConsumableArray3(_.keys()).map(function(e){return e.toJSON()})),S}},{key:"toProxy",value:function(){return this.proxyCache||(this.proxyCache=new Proxy(this,this.getProxyProcessor())),this.proxyCache}},{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:be;e.stringify&&(e=e.stringify);var _="";return e(this,function(e){_+=e}),_}},{key:"warn",value:function(e,_,S){var k={node:this};for(var E in S)k[E]=S[E];return e.warn(_,k)}},{key:"proxyOf",get:function(){return this}}])}(),we=Se;Se.default=Se;var xe=function(e){function Declaration(e){var _;return _classCallCheck3(this,Declaration),e&&void 0!==e.value&&"string"!=typeof e.value&&(e=_objectSpread2(_objectSpread2({},e),{},{value:String(e.value)})),(_=_callSuper(this,Declaration,[e])).type="decl",_}return _inherits(Declaration,e),_createClass3(Declaration,[{key:"variable",get:function(){return this.prop.startsWith("--")||"$"===this.prop[0]}}])}(we),ke=xe;xe.default=xe;var nonSecure$1_nanoid=function(){for(var e="",_=arguments.length>0&&void 0!==arguments[0]?arguments[0]:21;_--;)e+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[64*Math.random()|0];return e},Ce=ae.SourceMapConsumer,Ae=ae.SourceMapGenerator,Ee=ae.existsSync,Te=ae.readFileSync,Me=ae.dirname,Ie=ae.join;var Re=function(){return _createClass3(function PreviousMap(e,_){if(_classCallCheck3(this,PreviousMap),!1!==_.map){this.loadAnnotation(e),this.inline=this.startWith(this.annotation,"data:");var S=_.map?_.map.prev:void 0,k=this.loadMap(_.from,S);!this.mapFile&&_.from&&(this.mapFile=_.from),this.mapFile&&(this.root=Me(this.mapFile)),k&&(this.text=k)}},[{key:"consumer",value:function(){return this.consumerCache||(this.consumerCache=new Ce(this.text)),this.consumerCache}},{key:"decodeInline",value:function(e){var _;if(/^data:application\/json;charset=utf-?8,/.test(e)||/^data:application\/json,/.test(e))return decodeURIComponent(e.substr(RegExp.lastMatch.length));if(/^data:application\/json;charset=utf-?8;base64,/.test(e)||/^data:application\/json;base64,/.test(e))return _=e.substr(RegExp.lastMatch.length),Buffer?Buffer.from(_,"base64").toString():window.atob(_);var S=e.match(/data:application\/json;([^,]+),/)[1];throw new Error("Unsupported source map encoding "+S)}},{key:"getAnnotationURL",value:function(e){return e.replace(/^\/\*\s*# sourceMappingURL=/,"").trim()}},{key:"isMap",value:function(e){return"object"===_typeof3(e)&&("string"==typeof e.mappings||"string"==typeof e._mappings||Array.isArray(e.sections))}},{key:"loadAnnotation",value:function(e){var _=e.match(/\/\*\s*# sourceMappingURL=/gm);if(_){var S=e.lastIndexOf(_.pop()),k=e.indexOf("*/",S);S>-1&&k>-1&&(this.annotation=this.getAnnotationURL(e.substring(S,k)))}}},{key:"loadFile",value:function(e){if(this.root=Me(e),Ee(e))return this.mapFile=e,Te(e,"utf-8").toString().trim()}},{key:"loadMap",value:function(e,_){if(!1===_)return!1;if(_){if("string"==typeof _)return _;if("function"!=typeof _){if(_ instanceof Ce)return Ae.fromSourceMap(_).toString();if(_ instanceof Ae)return _.toString();if(this.isMap(_))return JSON.stringify(_);throw new Error("Unsupported previous source map format: "+_.toString())}var S=_(e);if(S){var k=this.loadFile(S);if(!k)throw new Error("Unable to load previous source map: "+S.toString());return k}}else{if(this.inline)return this.decodeInline(this.annotation);if(this.annotation){var E=this.annotation;return e&&(E=Ie(Me(e),E)),this.loadFile(E)}}}},{key:"startWith",value:function(e,_){return!!e&&e.substr(0,_.length)===_}},{key:"withContent",value:function(){return!!(this.consumer().sourcesContent&&this.consumer().sourcesContent.length>0)}}])}(),Pe=Re;Re.default=Re;var Oe=ae.SourceMapConsumer,De=ae.SourceMapGenerator,Le=ae.fileURLToPath,Fe=ae.pathToFileURL,Ue=ae.isAbsolute,Be=ae.resolve,Ne=nonSecure$1_nanoid,ze=ae,Ge=le,je=Pe,Ve=Symbol("fromOffsetCache"),He=Boolean(Oe&&De),We=Boolean(Be&&Ue),qe=function(){return _createClass3(function Input(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(_classCallCheck3(this,Input),null==e||"object"===_typeof3(e)&&!e.toString)throw new Error("PostCSS received ".concat(e," instead of CSS string"));if(this.css=e.toString(),"\ufeff"===this.css[0]||""===this.css[0]?(this.hasBOM=!0,this.css=this.css.slice(1)):this.hasBOM=!1,_.from&&(!We||/^\w+:\/\//.test(_.from)||Ue(_.from)?this.file=_.from:this.file=Be(_.from)),We&&He){var S=new je(this.css,_);if(S.text){this.map=S;var k=S.consumer().file;!this.file&&k&&(this.file=this.mapResolve(k))}}this.file||(this.id="<input css "+Ne(6)+">"),this.map&&(this.map.file=this.from)},[{key:"error",value:function(e,_,S){var k,E,T,M=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(_&&"object"===_typeof3(_)){var I=_,R=S;if("number"==typeof I.offset){var O=this.fromOffset(I.offset);_=O.line,S=O.col}else _=I.line,S=I.column;if("number"==typeof R.offset){var D=this.fromOffset(R.offset);E=D.line,T=D.col}else E=R.line,T=R.column}else if(!S){var L=this.fromOffset(_);_=L.line,S=L.col}var U=this.origin(_,S,E,T);return(k=U?new Ge(e,void 0===U.endLine?U.line:{column:U.column,line:U.line},void 0===U.endLine?U.column:{column:U.endColumn,line:U.endLine},U.source,U.file,M.plugin):new Ge(e,void 0===E?_:{column:S,line:_},void 0===E?S:{column:T,line:E},this.css,this.file,M.plugin)).input={column:S,endColumn:T,endLine:E,line:_,source:this.css},this.file&&(Fe&&(k.input.url=Fe(this.file).toString()),k.input.file=this.file),k}},{key:"fromOffset",value:function(e){var _;if(this[Ve])_=this[Ve];else{var S=this.css.split("\n");_=new Array(S.length);for(var k=0,E=0,T=S.length;E<T;E++)_[E]=k,k+=S[E].length+1;this[Ve]=_}var M=0;if(e>=_[_.length-1])M=_.length-1;else for(var I,R=_.length-2;M<R;)if(e<_[I=M+(R-M>>1)])R=I-1;else{if(!(e>=_[I+1])){M=I;break}M=I+1}return{col:e-_[M]+1,line:M+1}}},{key:"mapResolve",value:function(e){return/^\w+:\/\//.test(e)?e:Be(this.map.consumer().sourceRoot||this.map.root||".",e)}},{key:"origin",value:function(e,_,S,k){if(!this.map)return!1;var E,T,M=this.map.consumer(),I=M.originalPositionFor({column:_,line:e});if(!I.source)return!1;"number"==typeof S&&(E=M.originalPositionFor({column:k,line:S})),T=Ue(I.source)?Fe(I.source):new URL(I.source,this.map.consumer().sourceRoot||Fe(this.map.mapFile));var R={column:I.column,endColumn:E&&E.column,endLine:E&&E.line,line:I.line,url:T.toString()};if("file:"===T.protocol){if(!Le)throw new Error("file: protocol is not available in this PostCSS build");R.file=Le(T)}var O=M.sourceContentFor(I.source);return O&&(R.source=O),R}},{key:"toJSON",value:function(){for(var e={},_=0,S=["hasBOM","css","file","id"];_<S.length;_++){var k=S[_];null!=this[k]&&(e[k]=this[k])}return this.map&&(e.map=_objectSpread2({},this.map),e.map.consumerCache&&(e.map.consumerCache=void 0)),e}},{key:"from",get:function(){return this.file||this.id}}])}(),Xe=qe;qe.default=qe,ze&&ze.registerInput&&ze.registerInput(qe);var Ye=ae.SourceMapConsumer,Ke=ae.SourceMapGenerator,Je=ae.dirname,Qe=ae.relative,Ze=ae.resolve,$e=ae.sep,et=ae.pathToFileURL,tt=Xe,rt=Boolean(Ye&&Ke),nt=Boolean(Je&&Ze&&Qe&&$e),it=function(){return _createClass3(function MapGenerator(e,_,S,k){_classCallCheck3(this,MapGenerator),this.stringify=e,this.mapOpts=S.map||{},this.root=_,this.opts=S,this.css=k,this.originalCSS=k,this.usesFileUrls=!this.mapOpts.from&&this.mapOpts.absolute,this.memoizedFileURLs=new Map,this.memoizedPaths=new Map,this.memoizedURLs=new Map},[{key:"addAnnotation",value:function(){var e;e=this.isInline()?"data:application/json;base64,"+this.toBase64(this.map.toString()):"string"==typeof this.mapOpts.annotation?this.mapOpts.annotation:"function"==typeof this.mapOpts.annotation?this.mapOpts.annotation(this.opts.to,this.root):this.outputFile()+".map";var _="\n";this.css.includes("\r\n")&&(_="\r\n"),this.css+=_+"/*# sourceMappingURL="+e+" */"}},{key:"applyPrevMaps",value:function(){var e,_=_createForOfIteratorHelper2(this.previous());try{for(_.s();!(e=_.n()).done;){var S=e.value,k=this.toUrl(this.path(S.file)),E=S.root||Je(S.file),T=void 0;!1===this.mapOpts.sourcesContent?(T=new Ye(S.text)).sourcesContent&&(T.sourcesContent=null):T=S.consumer(),this.map.applySourceMap(T,k,this.toUrl(this.path(E)))}}catch(M){_.e(M)}finally{_.f()}}},{key:"clearAnnotation",value:function(){if(!1!==this.mapOpts.annotation)if(this.root)for(var e,_=this.root.nodes.length-1;_>=0;_--)"comment"===(e=this.root.nodes[_]).type&&0===e.text.indexOf("# sourceMappingURL=")&&this.root.removeChild(_);else this.css&&(this.css=this.css.replace(/\n*?\/\*#[\S\s]*?\*\/$/gm,""))}},{key:"generate",value:function(){if(this.clearAnnotation(),nt&&rt&&this.isMap())return this.generateMap();var e="";return this.stringify(this.root,function(_){e+=_}),[e]}},{key:"generateMap",value:function(){if(this.root)this.generateString();else if(1===this.previous().length){var e=this.previous()[0].consumer();e.file=this.outputFile(),this.map=Ke.fromSourceMap(e,{ignoreInvalidMapping:!0})}else this.map=new Ke({file:this.outputFile(),ignoreInvalidMapping:!0}),this.map.addMapping({generated:{column:0,line:1},original:{column:0,line:1},source:this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>"});return this.isSourcesContent()&&this.setSourcesContent(),this.root&&this.previous().length>0&&this.applyPrevMaps(),this.isAnnotation()&&this.addAnnotation(),this.isInline()?[this.css]:[this.css,this.map]}},{key:"generateString",value:function(){var e=this;this.css="",this.map=new Ke({file:this.outputFile(),ignoreInvalidMapping:!0});var _,S,k=1,E=1,T="<no source>",M={generated:{column:0,line:0},original:{column:0,line:0},source:""};this.stringify(this.root,function(I,R,O){if(e.css+=I,R&&"end"!==O&&(M.generated.line=k,M.generated.column=E-1,R.source&&R.source.start?(M.source=e.sourcePath(R),M.original.line=R.source.start.line,M.original.column=R.source.start.column-1,e.map.addMapping(M)):(M.source=T,M.original.line=1,M.original.column=0,e.map.addMapping(M))),(_=I.match(/\n/g))?(k+=_.length,S=I.lastIndexOf("\n"),E=I.length-S):E+=I.length,R&&"start"!==O){var D=R.parent||{raws:{}};("decl"===R.type||"atrule"===R.type&&!R.nodes)&&R===D.last&&!D.raws.semicolon||(R.source&&R.source.end?(M.source=e.sourcePath(R),M.original.line=R.source.end.line,M.original.column=R.source.end.column-1,M.generated.line=k,M.generated.column=E-2,e.map.addMapping(M)):(M.source=T,M.original.line=1,M.original.column=0,M.generated.line=k,M.generated.column=E-1,e.map.addMapping(M)))}})}},{key:"isAnnotation",value:function(){return!!this.isInline()||(void 0!==this.mapOpts.annotation?this.mapOpts.annotation:!this.previous().length||this.previous().some(function(e){return e.annotation}))}},{key:"isInline",value:function(){if(void 0!==this.mapOpts.inline)return this.mapOpts.inline;var e=this.mapOpts.annotation;return(void 0===e||!0===e)&&(!this.previous().length||this.previous().some(function(e){return e.inline}))}},{key:"isMap",value:function(){return void 0!==this.opts.map?!!this.opts.map:this.previous().length>0}},{key:"isSourcesContent",value:function(){return void 0!==this.mapOpts.sourcesContent?this.mapOpts.sourcesContent:!this.previous().length||this.previous().some(function(e){return e.withContent()})}},{key:"outputFile",value:function(){return this.opts.to?this.path(this.opts.to):this.opts.from?this.path(this.opts.from):"to.css"}},{key:"path",value:function(e){if(this.mapOpts.absolute)return e;if(60===e.charCodeAt(0))return e;if(/^\w+:\/\//.test(e))return e;var _=this.memoizedPaths.get(e);if(_)return _;var S=this.opts.to?Je(this.opts.to):".";"string"==typeof this.mapOpts.annotation&&(S=Je(Ze(S,this.mapOpts.annotation)));var k=Qe(S,e);return this.memoizedPaths.set(e,k),k}},{key:"previous",value:function(){var e=this;if(!this.previousMaps)if(this.previousMaps=[],this.root)this.root.walk(function(_){if(_.source&&_.source.input.map){var S=_.source.input.map;e.previousMaps.includes(S)||e.previousMaps.push(S)}});else{var _=new tt(this.originalCSS,this.opts);_.map&&this.previousMaps.push(_.map)}return this.previousMaps}},{key:"setSourcesContent",value:function(){var e=this,_={};if(this.root)this.root.walk(function(S){if(S.source){var k=S.source.input.from;if(k&&!_[k]){_[k]=!0;var E=e.usesFileUrls?e.toFileUrl(k):e.toUrl(e.path(k));e.map.setSourceContent(E,S.source.input.css)}}});else if(this.css){var S=this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>";this.map.setSourceContent(S,this.css)}}},{key:"sourcePath",value:function(e){return this.mapOpts.from?this.toUrl(this.mapOpts.from):this.usesFileUrls?this.toFileUrl(e.source.input.from):this.toUrl(this.path(e.source.input.from))}},{key:"toBase64",value:function(e){return Buffer?Buffer.from(e).toString("base64"):window.btoa(unescape(encodeURIComponent(e)))}},{key:"toFileUrl",value:function(e){var _=this.memoizedFileURLs.get(e);if(_)return _;if(et){var S=et(e).toString();return this.memoizedFileURLs.set(e,S),S}throw new Error("`map.absolute` option is not available in this PostCSS build")}},{key:"toUrl",value:function(e){var _=this.memoizedURLs.get(e);if(_)return _;"\\"===$e&&(e=e.replace(/\\/g,"/"));var S=encodeURI(e).replace(/[#?]/g,encodeURIComponent);return this.memoizedURLs.set(e,S),S}}])}(),at=function(e){function Comment(e){var _;return _classCallCheck3(this,Comment),(_=_callSuper(this,Comment,[e])).type="comment",_}return _inherits(Comment,e),_createClass3(Comment)}(we),ot=at;at.default=at;var st,ut,lt,ct,ht=ce.isClean,dt=ce.my,ft=ke,pt=ot;function cleanSource$1(e){return e.map(function(e){return e.nodes&&(e.nodes=cleanSource$1(e.nodes)),delete e.source,e})}function markDirtyUp$1(e){if(e[ht]=!1,e.proxyOf.nodes){var _,S=_createForOfIteratorHelper2(e.proxyOf.nodes);try{for(S.s();!(_=S.n()).done;){markDirtyUp$1(_.value)}}catch(k){S.e(k)}finally{S.f()}}}var vt=function(e){function Container(){return _classCallCheck3(this,Container),_callSuper(this,Container,arguments)}return _inherits(Container,e),_createClass3(Container,[{key:"append",value:function(){for(var e=arguments.length,_=new Array(e),S=0;S<e;S++)_[S]=arguments[S];for(var k=0,E=_;k<E.length;k++){var T,M=E[k],I=_createForOfIteratorHelper2(this.normalize(M,this.last));try{for(I.s();!(T=I.n()).done;){var R=T.value;this.proxyOf.nodes.push(R)}}catch(O){I.e(O)}finally{I.f()}}return this.markDirty(),this}},{key:"cleanRaws",value:function(e){if(_superPropGet(Container,"cleanRaws",this,3)([e]),this.nodes){var _,S=_createForOfIteratorHelper2(this.nodes);try{for(S.s();!(_=S.n()).done;){_.value.cleanRaws(e)}}catch(k){S.e(k)}finally{S.f()}}}},{key:"each",value:function(e){if(this.proxyOf.nodes){for(var _,S,k=this.getIterator();this.indexes[k]<this.proxyOf.nodes.length&&(_=this.indexes[k],!1!==(S=e(this.proxyOf.nodes[_],_)));)this.indexes[k]+=1;return delete this.indexes[k],S}}},{key:"every",value:function(e){return this.nodes.every(e)}},{key:"getIterator",value:function(){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={}),this.lastEach+=1;var e=this.lastEach;return this.indexes[e]=0,e}},{key:"getProxyProcessor",value:function(){return{get:function(e,_){return"proxyOf"===_?e:e[_]?"each"===_||"string"==typeof _&&_.startsWith("walk")?function(){for(var S=arguments.length,k=new Array(S),E=0;E<S;E++)k[E]=arguments[E];return e[_].apply(e,_toConsumableArray3(k.map(function(e){return"function"==typeof e?function(_,S){return e(_.toProxy(),S)}:e})))}:"every"===_||"some"===_?function(S){return e[_](function(e){for(var _=arguments.length,k=new Array(_>1?_-1:0),E=1;E<_;E++)k[E-1]=arguments[E];return S.apply(void 0,[e.toProxy()].concat(k))})}:"root"===_?function(){return e.root().toProxy()}:"nodes"===_?e.nodes.map(function(e){return e.toProxy()}):"first"===_||"last"===_?e[_].toProxy():e[_]:e[_]},set:function(e,_,S){return e[_]===S||(e[_]=S,"name"!==_&&"params"!==_&&"selector"!==_||e.markDirty()),!0}}}},{key:"index",value:function(e){return"number"==typeof e?e:(e.proxyOf&&(e=e.proxyOf),this.proxyOf.nodes.indexOf(e))}},{key:"insertAfter",value:function(e,_){var S=this.index(e),k=this.normalize(_,this.proxyOf.nodes[S]).reverse();S=this.index(e);var E,T,M=_createForOfIteratorHelper2(k);try{for(M.s();!(E=M.n()).done;){var I=E.value;this.proxyOf.nodes.splice(S+1,0,I)}}catch(O){M.e(O)}finally{M.f()}for(var R in this.indexes)S<(T=this.indexes[R])&&(this.indexes[R]=T+k.length);return this.markDirty(),this}},{key:"insertBefore",value:function(e,_){var S=this.index(e),k=0===S&&"prepend",E=this.normalize(_,this.proxyOf.nodes[S],k).reverse();S=this.index(e);var T,M,I=_createForOfIteratorHelper2(E);try{for(I.s();!(T=I.n()).done;){var R=T.value;this.proxyOf.nodes.splice(S,0,R)}}catch(D){I.e(D)}finally{I.f()}for(var O in this.indexes)S<=(M=this.indexes[O])&&(this.indexes[O]=M+E.length);return this.markDirty(),this}},{key:"normalize",value:function(e,_){var S=this;if("string"==typeof e)e=cleanSource$1(st(e).nodes);else if(void 0===e)e=[];else if(Array.isArray(e)){var k,E=_createForOfIteratorHelper2(e=e.slice(0));try{for(E.s();!(k=E.n()).done;){var T=k.value;T.parent&&T.parent.removeChild(T,"ignore")}}catch(D){E.e(D)}finally{E.f()}}else if("root"===e.type&&"document"!==this.type){var M,I=_createForOfIteratorHelper2(e=e.nodes.slice(0));try{for(I.s();!(M=I.n()).done;){var R=M.value;R.parent&&R.parent.removeChild(R,"ignore")}}catch(D){I.e(D)}finally{I.f()}}else if(e.type)e=[e];else if(e.prop){if(void 0===e.value)throw new Error("Value field is missed in node creation");"string"!=typeof e.value&&(e.value=String(e.value)),e=[new ft(e)]}else if(e.selector)e=[new ut(e)];else if(e.name)e=[new lt(e)];else{if(!e.text)throw new Error("Unknown node type in node creation");e=[new pt(e)]}var O=e.map(function(e){return e[dt]||Container.rebuild(e),(e=e.proxyOf).parent&&e.parent.removeChild(e),e[ht]&&markDirtyUp$1(e),void 0===e.raws.before&&_&&void 0!==_.raws.before&&(e.raws.before=_.raws.before.replace(/\S/g,"")),e.parent=S.proxyOf,e});return O}},{key:"prepend",value:function(){for(var e=arguments.length,_=new Array(e),S=0;S<e;S++)_[S]=arguments[S];var k,E=_createForOfIteratorHelper2(_=_.reverse());try{for(E.s();!(k=E.n()).done;){var T,M=k.value,I=this.normalize(M,this.first,"prepend").reverse(),R=_createForOfIteratorHelper2(I);try{for(R.s();!(T=R.n()).done;){var O=T.value;this.proxyOf.nodes.unshift(O)}}catch(L){R.e(L)}finally{R.f()}for(var D in this.indexes)this.indexes[D]=this.indexes[D]+I.length}}catch(L){E.e(L)}finally{E.f()}return this.markDirty(),this}},{key:"push",value:function(e){return e.parent=this,this.proxyOf.nodes.push(e),this}},{key:"removeAll",value:function(){var e,_=_createForOfIteratorHelper2(this.proxyOf.nodes);try{for(_.s();!(e=_.n()).done;){e.value.parent=void 0}}catch(S){_.e(S)}finally{_.f()}return this.proxyOf.nodes=[],this.markDirty(),this}},{key:"removeChild",value:function(e){var _;for(var S in e=this.index(e),this.proxyOf.nodes[e].parent=void 0,this.proxyOf.nodes.splice(e,1),this.indexes)(_=this.indexes[S])>=e&&(this.indexes[S]=_-1);return this.markDirty(),this}},{key:"replaceValues",value:function(e,_,S){return S||(S=_,_={}),this.walkDecls(function(k){_.props&&!_.props.includes(k.prop)||_.fast&&!k.value.includes(_.fast)||(k.value=k.value.replace(e,S))}),this.markDirty(),this}},{key:"some",value:function(e){return this.nodes.some(e)}},{key:"walk",value:function(e){return this.each(function(_,S){var k;try{k=e(_,S)}catch(E){throw _.addToError(E)}return!1!==k&&_.walk&&(k=_.walk(e)),k})}},{key:"walkAtRules",value:function(e,_){return _?e instanceof RegExp?this.walk(function(S,k){if("atrule"===S.type&&e.test(S.name))return _(S,k)}):this.walk(function(S,k){if("atrule"===S.type&&S.name===e)return _(S,k)}):(_=e,this.walk(function(e,S){if("atrule"===e.type)return _(e,S)}))}},{key:"walkComments",value:function(e){return this.walk(function(_,S){if("comment"===_.type)return e(_,S)})}},{key:"walkDecls",value:function(e,_){return _?e instanceof RegExp?this.walk(function(S,k){if("decl"===S.type&&e.test(S.prop))return _(S,k)}):this.walk(function(S,k){if("decl"===S.type&&S.prop===e)return _(S,k)}):(_=e,this.walk(function(e,S){if("decl"===e.type)return _(e,S)}))}},{key:"walkRules",value:function(e,_){return _?e instanceof RegExp?this.walk(function(S,k){if("rule"===S.type&&e.test(S.selector))return _(S,k)}):this.walk(function(S,k){if("rule"===S.type&&S.selector===e)return _(S,k)}):(_=e,this.walk(function(e,S){if("rule"===e.type)return _(e,S)}))}},{key:"first",get:function(){if(this.proxyOf.nodes)return this.proxyOf.nodes[0]}},{key:"last",get:function(){if(this.proxyOf.nodes)return this.proxyOf.nodes[this.proxyOf.nodes.length-1]}}])}(we);vt.registerParse=function(e){st=e},vt.registerRule=function(e){ut=e},vt.registerAtRule=function(e){lt=e},vt.registerRoot=function(e){ct=e};var gt=vt;vt.default=vt,vt.rebuild=function(e){"atrule"===e.type?Object.setPrototypeOf(e,lt.prototype):"rule"===e.type?Object.setPrototypeOf(e,ut.prototype):"decl"===e.type?Object.setPrototypeOf(e,ft.prototype):"comment"===e.type?Object.setPrototypeOf(e,pt.prototype):"root"===e.type&&Object.setPrototypeOf(e,ct.prototype),e[dt]=!0,e.nodes&&e.nodes.forEach(function(e){vt.rebuild(e)})};var mt,yt,_t=function(e){function Document2(e){var _;return _classCallCheck3(this,Document2),(_=_callSuper(this,Document2,[_objectSpread2({type:"document"},e)])).nodes||(_.nodes=[]),_}return _inherits(Document2,e),_createClass3(Document2,[{key:"toResult",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new mt(new yt,this,e).stringify()}}])}(gt);_t.registerLazyResult=function(e){mt=e},_t.registerProcessor=function(e){yt=e};var bt=_t;_t.default=_t;var St=function(){return _createClass3(function Warning(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(_classCallCheck3(this,Warning),this.type="warning",this.text=e,_.node&&_.node.source){var S=_.node.rangeBy(_);this.line=S.start.line,this.column=S.start.column,this.endLine=S.end.line,this.endColumn=S.end.column}for(var k in _)this[k]=_[k]},[{key:"toString",value:function(){return this.node?this.node.error(this.text,{index:this.index,plugin:this.plugin,word:this.word}).message:this.plugin?this.plugin+": "+this.text:this.text}}])}(),wt=St;St.default=St;var xt=wt,kt=function(){return _createClass3(function Result(e,_,S){_classCallCheck3(this,Result),this.processor=e,this.messages=[],this.root=_,this.opts=S,this.css=void 0,this.map=void 0},[{key:"toString",value:function(){return this.css}},{key:"warn",value:function(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_.plugin||this.lastPlugin&&this.lastPlugin.postcssPlugin&&(_.plugin=this.lastPlugin.postcssPlugin);var S=new xt(e,_);return this.messages.push(S),S}},{key:"warnings",value:function(){return this.messages.filter(function(e){return"warning"===e.type})}},{key:"content",get:function(){return this.css}}])}(),Ct=kt;kt.default=kt;var At="'".charCodeAt(0),Et='"'.charCodeAt(0),Tt="\\".charCodeAt(0),Mt="/".charCodeAt(0),It="\n".charCodeAt(0),Rt=" ".charCodeAt(0),Pt="\f".charCodeAt(0),Ot="\t".charCodeAt(0),Dt="\r".charCodeAt(0),Lt="[".charCodeAt(0),Ft="]".charCodeAt(0),Ut="(".charCodeAt(0),Bt=")".charCodeAt(0),Nt="{".charCodeAt(0),zt="}".charCodeAt(0),Gt=";".charCodeAt(0),jt="*".charCodeAt(0),Vt=":".charCodeAt(0),Ht="@".charCodeAt(0),Wt=/[\t\n\f\r "#'()/;[\\\]{}]/g,qt=/[\t\n\f\r !"#'():;@[\\\]{}]|\/(?=\*)/g,Xt=/.[\r\n"'(/\\]/,Yt=/[\da-f]/i,Kt=gt,Jt=function(e){function AtRule(e){var _;return _classCallCheck3(this,AtRule),(_=_callSuper(this,AtRule,[e])).type="atrule",_}return _inherits(AtRule,e),_createClass3(AtRule,[{key:"append",value:function(){this.proxyOf.nodes||(this.nodes=[]);for(var e=arguments.length,_=new Array(e),S=0;S<e;S++)_[S]=arguments[S];return _superPropGet(AtRule,"append",this,3)(_)}},{key:"prepend",value:function(){this.proxyOf.nodes||(this.nodes=[]);for(var e=arguments.length,_=new Array(e),S=0;S<e;S++)_[S]=arguments[S];return _superPropGet(AtRule,"prepend",this,3)(_)}}])}(Kt),Qt=Jt;Jt.default=Jt,Kt.registerAtRule(Jt);var Zt,$t,er=gt,tr=function(e){function Root(e){var _;return _classCallCheck3(this,Root),(_=_callSuper(this,Root,[e])).type="root",_.nodes||(_.nodes=[]),_}return _inherits(Root,e),_createClass3(Root,[{key:"normalize",value:function(e,_,S){var k=_superPropGet(Root,"normalize",this,3)([e]);if(_)if("prepend"===S)this.nodes.length>1?_.raws.before=this.nodes[1].raws.before:delete _.raws.before;else if(this.first!==_){var E,T=_createForOfIteratorHelper2(k);try{for(T.s();!(E=T.n()).done;){E.value.raws.before=_.raws.before}}catch(M){T.e(M)}finally{T.f()}}return k}},{key:"removeChild",value:function(e,_){var S=this.index(e);return!_&&0===S&&this.nodes.length>1&&(this.nodes[1].raws.before=this.nodes[S].raws.before),_superPropGet(Root,"removeChild",this,3)([e])}},{key:"toResult",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Zt(new $t,this,e).stringify()}}])}(er);tr.registerLazyResult=function(e){Zt=e},tr.registerProcessor=function(e){$t=e};var rr=tr;tr.default=tr,er.registerRoot(tr);var nr={comma:function(e){return nr.split(e,[","],!0)},space:function(e){return nr.split(e,[" ","\n","\t"])},split:function(e,_,S){var k,E=[],T="",M=!1,I=0,R=!1,O="",D=!1,L=_createForOfIteratorHelper2(e);try{for(L.s();!(k=L.n()).done;){var U=k.value;D?D=!1:"\\"===U?D=!0:R?U===O&&(R=!1):'"'===U||"'"===U?(R=!0,O=U):"("===U?I+=1:")"===U?I>0&&(I-=1):0===I&&_.includes(U)&&(M=!0),M?(""!==T&&E.push(T.trim()),T="",M=!1):T+=U}}catch(B){L.e(B)}finally{L.f()}return(S||""!==T)&&E.push(T.trim()),E}},ir=nr;nr.default=nr;var ar=gt,or=ir,sr=function(e){function Rule(e){var _;return _classCallCheck3(this,Rule),(_=_callSuper(this,Rule,[e])).type="rule",_.nodes||(_.nodes=[]),_}return _inherits(Rule,e),_createClass3(Rule,[{key:"selectors",get:function(){return or.comma(this.selector)},set:function(e){var _=this.selector?this.selector.match(/,\s*/):null,S=_?_[0]:","+this.raw("between","beforeOpen");this.selector=e.join(S)}}])}(ar),ur=sr;sr.default=sr,ar.registerRule(sr);var lr=ke,tokenizer2$1=function(e){var _,S,k,E,T,M,I,R,O,D,L=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},U=e.css.valueOf(),B=L.ignoreErrors,z=U.length,G=0,j=[],V=[];function unclosed(_){throw e.error("Unclosed "+_,G)}return{back:function(e){V.push(e)},endOfFile:function(){return 0===V.length&&G>=z},nextToken:function(e){if(V.length)return V.pop();if(!(G>=z)){var L=!!e&&e.ignoreUnclosed;switch(_=U.charCodeAt(G)){case It:case Rt:case Ot:case Dt:case Pt:S=G;do{S+=1,_=U.charCodeAt(S)}while(_===Rt||_===It||_===Ot||_===Dt||_===Pt);D=["space",U.slice(G,S)],G=S-1;break;case Lt:case Ft:case Nt:case zt:case Vt:case Gt:case Bt:var H=String.fromCharCode(_);D=[H,H,G];break;case Ut:if(R=j.length?j.pop()[1]:"",O=U.charCodeAt(G+1),"url"===R&&O!==At&&O!==Et&&O!==Rt&&O!==It&&O!==Ot&&O!==Pt&&O!==Dt){S=G;do{if(M=!1,-1===(S=U.indexOf(")",S+1))){if(B||L){S=G;break}unclosed("bracket")}for(I=S;U.charCodeAt(I-1)===Tt;)I-=1,M=!M}while(M);D=["brackets",U.slice(G,S+1),G,S],G=S}else S=U.indexOf(")",G+1),E=U.slice(G,S+1),-1===S||Xt.test(E)?D=["(","(",G]:(D=["brackets",E,G,S],G=S);break;case At:case Et:k=_===At?"'":'"',S=G;do{if(M=!1,-1===(S=U.indexOf(k,S+1))){if(B||L){S=G+1;break}unclosed("string")}for(I=S;U.charCodeAt(I-1)===Tt;)I-=1,M=!M}while(M);D=["string",U.slice(G,S+1),G,S],G=S;break;case Ht:Wt.lastIndex=G+1,Wt.test(U),S=0===Wt.lastIndex?U.length-1:Wt.lastIndex-2,D=["at-word",U.slice(G,S+1),G,S],G=S;break;case Tt:for(S=G,T=!0;U.charCodeAt(S+1)===Tt;)S+=1,T=!T;if(_=U.charCodeAt(S+1),T&&_!==Mt&&_!==Rt&&_!==It&&_!==Ot&&_!==Dt&&_!==Pt&&(S+=1,Yt.test(U.charAt(S)))){for(;Yt.test(U.charAt(S+1));)S+=1;U.charCodeAt(S+1)===Rt&&(S+=1)}D=["word",U.slice(G,S+1),G,S],G=S;break;default:_===Mt&&U.charCodeAt(G+1)===jt?(0===(S=U.indexOf("*/",G+2)+1)&&(B||L?S=U.length:unclosed("comment")),D=["comment",U.slice(G,S+1),G,S],G=S):(qt.lastIndex=G+1,qt.test(U),S=0===qt.lastIndex?U.length-1:qt.lastIndex-2,D=["word",U.slice(G,S+1),G,S],j.push(D),G=S)}return G++,D}},position:function(){return G}}},cr=ot,hr=Qt,dr=rr,fr=ur,pr={empty:!0,space:!0};var vr=function(){return _createClass3(function Parser(e){_classCallCheck3(this,Parser),this.input=e,this.root=new dr,this.current=this.root,this.spaces="",this.semicolon=!1,this.createTokenizer(),this.root.source={input:e,start:{column:1,line:1,offset:0}}},[{key:"atrule",value:function(e){var _,S,k,E=new hr;E.name=e[1].slice(1),""===E.name&&this.unnamedAtrule(E,e),this.init(E,e[2]);for(var T=!1,M=!1,I=[],R=[];!this.tokenizer.endOfFile();){if("("===(_=(e=this.tokenizer.nextToken())[0])||"["===_?R.push("("===_?")":"]"):"{"===_&&R.length>0?R.push("}"):_===R[R.length-1]&&R.pop(),0===R.length){if(";"===_){E.source.end=this.getPosition(e[2]),E.source.end.offset++,this.semicolon=!0;break}if("{"===_){M=!0;break}if("}"===_){if(I.length>0){for(S=I[k=I.length-1];S&&"space"===S[0];)S=I[--k];S&&(E.source.end=this.getPosition(S[3]||S[2]),E.source.end.offset++)}this.end(e);break}I.push(e)}else I.push(e);if(this.tokenizer.endOfFile()){T=!0;break}}E.raws.between=this.spacesAndCommentsFromEnd(I),I.length?(E.raws.afterName=this.spacesAndCommentsFromStart(I),this.raw(E,"params",I),T&&(e=I[I.length-1],E.source.end=this.getPosition(e[3]||e[2]),E.source.end.offset++,this.spaces=E.raws.between,E.raws.between="")):(E.raws.afterName="",E.params=""),M&&(E.nodes=[],this.current=E)}},{key:"checkMissedSemicolon",value:function(e){var _=this.colon(e);if(!1!==_){for(var S,k=0,E=_-1;E>=0&&("space"===(S=e[E])[0]||2!==(k+=1));E--);throw this.input.error("Missed semicolon","word"===S[0]?S[3]+1:S[2])}}},{key:"colon",value:function(e){var _,S,k,E,T=0,M=_createForOfIteratorHelper2(e.entries());try{for(M.s();!(E=M.n()).done;){var I=_slicedToArray(E.value,2),R=I[0];if("("===(S=(_=I[1])[0])&&(T+=1),")"===S&&(T-=1),0===T&&":"===S){if(k){if("word"===k[0]&&"progid"===k[1])continue;return R}this.doubleColon(_)}k=_}}catch(O){M.e(O)}finally{M.f()}return!1}},{key:"comment",value:function(e){var _=new cr;this.init(_,e[2]),_.source.end=this.getPosition(e[3]||e[2]),_.source.end.offset++;var S=e[1].slice(2,-2);if(/^\s*$/.test(S))_.text="",_.raws.left=S,_.raws.right="";else{var k=S.match(/^(\s*)([^]*\S)(\s*)$/);_.text=k[2],_.raws.left=k[1],_.raws.right=k[3]}}},{key:"createTokenizer",value:function(){this.tokenizer=tokenizer2$1(this.input)}},{key:"decl",value:function(e,_){var S=new lr;this.init(S,e[0][2]);var k,E=e[e.length-1];for(";"===E[0]&&(this.semicolon=!0,e.pop()),S.source.end=this.getPosition(E[3]||E[2]||function(e){for(var _=e.length-1;_>=0;_--){var S=e[_],k=S[3]||S[2];if(k)return k}}(e)),S.source.end.offset++;"word"!==e[0][0];)1===e.length&&this.unknownWord(e),S.raws.before+=e.shift()[1];for(S.source.start=this.getPosition(e[0][2]),S.prop="";e.length;){var T=e[0][0];if(":"===T||"space"===T||"comment"===T)break;S.prop+=e.shift()[1]}for(S.raws.between="";e.length;){if(":"===(k=e.shift())[0]){S.raws.between+=k[1];break}"word"===k[0]&&/\w/.test(k[1])&&this.unknownWord([k]),S.raws.between+=k[1]}"_"!==S.prop[0]&&"*"!==S.prop[0]||(S.raws.before+=S.prop[0],S.prop=S.prop.slice(1));for(var M,I=[];e.length&&("space"===(M=e[0][0])||"comment"===M);)I.push(e.shift());this.precheckMissedSemicolon(e);for(var R=e.length-1;R>=0;R--){if("!important"===(k=e[R])[1].toLowerCase()){S.important=!0;var O=this.stringFrom(e,R);" !important"!==(O=this.spacesFromEnd(e)+O)&&(S.raws.important=O);break}if("important"===k[1].toLowerCase()){for(var D=e.slice(0),L="",U=R;U>0;U--){var B=D[U][0];if(0===L.trim().indexOf("!")&&"space"!==B)break;L=D.pop()[1]+L}0===L.trim().indexOf("!")&&(S.important=!0,S.raws.important=L,e=D)}if("space"!==k[0]&&"comment"!==k[0])break}var z=e.some(function(e){return"space"!==e[0]&&"comment"!==e[0]});z&&(S.raws.between+=I.map(function(e){return e[1]}).join(""),I=[]),this.raw(S,"value",I.concat(e),_),S.value.includes(":")&&!_&&this.checkMissedSemicolon(e)}},{key:"doubleColon",value:function(e){throw this.input.error("Double colon",{offset:e[2]},{offset:e[2]+e[1].length})}},{key:"emptyRule",value:function(e){var _=new fr;this.init(_,e[2]),_.selector="",_.raws.between="",this.current=_}},{key:"end",value:function(e){this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.semicolon=!1,this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.spaces="",this.current.parent?(this.current.source.end=this.getPosition(e[2]),this.current.source.end.offset++,this.current=this.current.parent):this.unexpectedClose(e)}},{key:"endFile",value:function(){this.current.parent&&this.unclosedBlock(),this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.root.source.end=this.getPosition(this.tokenizer.position())}},{key:"freeSemicolon",value:function(e){if(this.spaces+=e[1],this.current.nodes){var _=this.current.nodes[this.current.nodes.length-1];_&&"rule"===_.type&&!_.raws.ownSemicolon&&(_.raws.ownSemicolon=this.spaces,this.spaces="")}}},{key:"getPosition",value:function(e){var _=this.input.fromOffset(e);return{column:_.col,line:_.line,offset:e}}},{key:"init",value:function(e,_){this.current.push(e),e.source={input:this.input,start:this.getPosition(_)},e.raws.before=this.spaces,this.spaces="","comment"!==e.type&&(this.semicolon=!1)}},{key:"other",value:function(e){for(var _=!1,S=null,k=!1,E=null,T=[],M=e[1].startsWith("--"),I=[],R=e;R;){if(S=R[0],I.push(R),"("===S||"["===S)E||(E=R),T.push("("===S?")":"]");else if(M&&k&&"{"===S)E||(E=R),T.push("}");else if(0===T.length){if(";"===S){if(k)return void this.decl(I,M);break}if("{"===S)return void this.rule(I);if("}"===S){this.tokenizer.back(I.pop()),_=!0;break}":"===S&&(k=!0)}else S===T[T.length-1]&&(T.pop(),0===T.length&&(E=null));R=this.tokenizer.nextToken()}if(this.tokenizer.endOfFile()&&(_=!0),T.length>0&&this.unclosedBracket(E),_&&k){if(!M)for(;I.length&&("space"===(R=I[I.length-1][0])||"comment"===R);)this.tokenizer.back(I.pop());this.decl(I,M)}else this.unknownWord(I)}},{key:"parse",value:function(){for(var e;!this.tokenizer.endOfFile();)switch((e=this.tokenizer.nextToken())[0]){case"space":this.spaces+=e[1];break;case";":this.freeSemicolon(e);break;case"}":this.end(e);break;case"comment":this.comment(e);break;case"at-word":this.atrule(e);break;case"{":this.emptyRule(e);break;default:this.other(e)}this.endFile()}},{key:"precheckMissedSemicolon",value:function(){}},{key:"raw",value:function(e,_,S,k){for(var E,T,M,I,R=S.length,O="",D=!0,L=0;L<R;L+=1)"space"!==(T=(E=S[L])[0])||L!==R-1||k?"comment"===T?(I=S[L-1]?S[L-1][0]:"empty",M=S[L+1]?S[L+1][0]:"empty",pr[I]||pr[M]||","===O.slice(-1)?D=!1:O+=E[1]):O+=E[1]:D=!1;if(!D){var U=S.reduce(function(e,_){return e+_[1]},"");e.raws[_]={raw:U,value:O}}e[_]=O}},{key:"rule",value:function(e){e.pop();var _=new fr;this.init(_,e[0][2]),_.raws.between=this.spacesAndCommentsFromEnd(e),this.raw(_,"selector",e),this.current=_}},{key:"spacesAndCommentsFromEnd",value:function(e){for(var _,S="";e.length&&("space"===(_=e[e.length-1][0])||"comment"===_);)S=e.pop()[1]+S;return S}},{key:"spacesAndCommentsFromStart",value:function(e){for(var _,S="";e.length&&("space"===(_=e[0][0])||"comment"===_);)S+=e.shift()[1];return S}},{key:"spacesFromEnd",value:function(e){for(var _="";e.length&&"space"===e[e.length-1][0];)_=e.pop()[1]+_;return _}},{key:"stringFrom",value:function(e,_){for(var S="",k=_;k<e.length;k++)S+=e[k][1];return e.splice(_,e.length-_),S}},{key:"unclosedBlock",value:function(){var e=this.current.source.start;throw this.input.error("Unclosed block",e.line,e.column)}},{key:"unclosedBracket",value:function(e){throw this.input.error("Unclosed bracket",{offset:e[2]},{offset:e[2]+1})}},{key:"unexpectedClose",value:function(e){throw this.input.error("Unexpected }",{offset:e[2]},{offset:e[2]+1})}},{key:"unknownWord",value:function(e){throw this.input.error("Unknown word",{offset:e[0][2]},{offset:e[0][2]+e[0][1].length})}},{key:"unnamedAtrule",value:function(e,_){throw this.input.error("At-rule without name",{offset:_[2]},{offset:_[2]+_[1].length})}}])}(),gr=gt,mr=vr,yr=Xe;function parse$3$1(e,_){var S=new yr(e,_),k=new mr(S);try{k.parse()}catch(E){throw E}return k.root}var _r=parse$3$1;parse$3$1.default=parse$3$1,gr.registerParse(parse$3$1);var br=ce.isClean,Sr=ce.my,wr=it,xr=ve,kr=gt,Cr=bt,Ar=Ct,Er=_r,Tr=rr,Mr={atrule:"AtRule",comment:"Comment",decl:"Declaration",document:"Document",root:"Root",rule:"Rule"},Ir={AtRule:!0,AtRuleExit:!0,Comment:!0,CommentExit:!0,Declaration:!0,DeclarationExit:!0,Document:!0,DocumentExit:!0,Once:!0,OnceExit:!0,postcssPlugin:!0,prepare:!0,Root:!0,RootExit:!0,Rule:!0,RuleExit:!0},Rr={Once:!0,postcssPlugin:!0,prepare:!0};function isPromise$1(e){return"object"===_typeof3(e)&&"function"==typeof e.then}function getEvents$1(e){var _=!1,S=Mr[e.type];return"decl"===e.type?_=e.prop.toLowerCase():"atrule"===e.type&&(_=e.name.toLowerCase()),_&&e.append?[S,S+"-"+_,0,S+"Exit",S+"Exit-"+_]:_?[S,S+"-"+_,S+"Exit",S+"Exit-"+_]:e.append?[S,0,S+"Exit"]:[S,S+"Exit"]}function toStack$1(e){return{eventIndex:0,events:"document"===e.type?["Document",0,"DocumentExit"]:"root"===e.type?["Root",0,"RootExit"]:getEvents$1(e),iterator:0,node:e,visitorIndex:0,visitors:[]}}function cleanMarks$1(e){return e[br]=!1,e.nodes&&e.nodes.forEach(function(e){return cleanMarks$1(e)}),e}var Pr={},Or=function(){return _createClass3(function LazyResult(e,_,S){var k,E=this;if(_classCallCheck3(this,LazyResult),this.stringified=!1,this.processed=!1,"object"!==_typeof3(_)||null===_||"root"!==_.type&&"document"!==_.type)if(_ instanceof LazyResult||_ instanceof Ar)k=cleanMarks$1(_.root),_.map&&(void 0===S.map&&(S.map={}),S.map.inline||(S.map.inline=!1),S.map.prev=_.map);else{var T=Er;S.syntax&&(T=S.syntax.parse),S.parser&&(T=S.parser),T.parse&&(T=T.parse);try{k=T(_,S)}catch(M){this.processed=!0,this.error=M}k&&!k[Sr]&&kr.rebuild(k)}else k=cleanMarks$1(_);this.result=new Ar(e,k,S),this.helpers=_objectSpread2(_objectSpread2({},Pr),{},{postcss:Pr,result:this.result}),this.plugins=this.processor.plugins.map(function(e){return"object"===_typeof3(e)&&e.prepare?_objectSpread2(_objectSpread2({},e),e.prepare(E.result)):e})},[{key:"async",value:function(){return this.error?Promise.reject(this.error):this.processed?Promise.resolve(this.result):(this.processing||(this.processing=this.runAsync()),this.processing)}},{key:"catch",value:function(e){return this.async().catch(e)}},{key:"finally",value:function(e){return this.async().then(e,e)}},{key:"getAsyncError",value:function(){throw new Error("Use process(css).then(cb) to work with async plugins")}},{key:"handleError",value:function(e,_){var S=this.result.lastPlugin;try{_&&_.addToError(e),this.error=e,"CssSyntaxError"!==e.name||e.plugin?S.postcssVersion:(e.plugin=S.postcssPlugin,e.setMessage())}catch(k){console&&console.error}return e}},{key:"prepareVisitors",value:function(){var e=this;this.listeners={};var _,add=function(_,S,k){e.listeners[S]||(e.listeners[S]=[]),e.listeners[S].push([_,k])},S=_createForOfIteratorHelper2(this.plugins);try{for(S.s();!(_=S.n()).done;){var k=_.value;if("object"===_typeof3(k))for(var E in k){if(!Ir[E]&&/^[A-Z]/.test(E))throw new Error("Unknown event ".concat(E," in ").concat(k.postcssPlugin,". Try to update PostCSS (").concat(this.processor.version," now)."));if(!Rr[E])if("object"===_typeof3(k[E]))for(var T in k[E])add(k,"*"===T?E:E+"-"+T.toLowerCase(),k[E][T]);else"function"==typeof k[E]&&add(k,E,k[E])}}}catch(M){S.e(M)}finally{S.f()}this.hasListener=Object.keys(this.listeners).length>0}},{key:"runAsync",value:(e=_asyncToGenerator(_regenerator().m(function _callee29(){var e,_,S,k,E,T,M,I,R,O,D,L,U,B=this;return _regenerator().w(function(z){for(;;)switch(z.p=z.n){case 0:this.plugin=0,e=0;case 1:if(!(e<this.plugins.length)){z.n=6;break}if(_=this.plugins[e],!isPromise$1(S=this.runOnRoot(_))){z.n=5;break}return z.p=2,z.n=3,S;case 3:z.n=5;break;case 4:throw z.p=4,D=z.v,this.handleError(D);case 5:e++,z.n=1;break;case 6:if(this.prepareVisitors(),!this.hasListener){z.n=21;break}k=this.result.root;case 7:if(k[br]){z.n=14;break}k[br]=!0,E=[toStack$1(k)];case 8:if(!(E.length>0)){z.n=13;break}if(!isPromise$1(T=this.visitTick(E))){z.n=12;break}return z.p=9,z.n=10,T;case 10:z.n=12;break;case 11:throw z.p=11,L=z.v,M=E[E.length-1].node,this.handleError(L,M);case 12:z.n=8;break;case 13:z.n=7;break;case 14:if(!this.listeners.OnceExit){z.n=21;break}I=_createForOfIteratorHelper2(this.listeners.OnceExit),z.p=15,O=_regenerator().m(function _loop3(){var e,_,S,E,T;return _regenerator().w(function(M){for(;;)switch(M.p=M.n){case 0:if(e=_slicedToArray(R.value,2),_=e[0],S=e[1],B.result.lastPlugin=_,M.p=1,"document"!==k.type){M.n=3;break}return E=k.nodes.map(function(e){return S(e,B.helpers)}),M.n=2,Promise.all(E);case 2:M.n=4;break;case 3:return M.n=4,S(k,B.helpers);case 4:M.n=6;break;case 5:throw M.p=5,T=M.v,B.handleError(T);case 6:return M.a(2)}},_loop3,null,[[1,5]])}),I.s();case 16:if((R=I.n()).done){z.n=18;break}return z.d(_regeneratorValues(O()),17);case 17:z.n=16;break;case 18:z.n=20;break;case 19:z.p=19,U=z.v,I.e(U);case 20:return z.p=20,I.f(),z.f(20);case 21:return this.processed=!0,z.a(2,this.stringify())}},_callee29,this,[[15,19,20,21],[9,11],[2,4]])})),function(){return e.apply(this,arguments)})},{key:"runOnRoot",value:function(e){var _=this;this.result.lastPlugin=e;try{if("object"===_typeof3(e)&&e.Once){if("document"===this.result.root.type){var S=this.result.root.nodes.map(function(S){return e.Once(S,_.helpers)});return isPromise$1(S[0])?Promise.all(S):S}return e.Once(this.result.root,this.helpers)}if("function"==typeof e)return e(this.result.root,this.result)}catch(k){throw this.handleError(k)}}},{key:"stringify",value:function(){if(this.error)throw this.error;if(this.stringified)return this.result;this.stringified=!0,this.sync();var e=this.result.opts,_=xr;e.syntax&&(_=e.syntax.stringify),e.stringifier&&(_=e.stringifier),_.stringify&&(_=_.stringify);var S=new wr(_,this.result.root,this.result.opts).generate();return this.result.css=S[0],this.result.map=S[1],this.result}},{key:"sync",value:function(){if(this.error)throw this.error;if(this.processed)return this.result;if(this.processed=!0,this.processing)throw this.getAsyncError();var e,_=_createForOfIteratorHelper2(this.plugins);try{for(_.s();!(e=_.n()).done;){var S=e.value;if(isPromise$1(this.runOnRoot(S)))throw this.getAsyncError()}}catch(I){_.e(I)}finally{_.f()}if(this.prepareVisitors(),this.hasListener){for(var k=this.result.root;!k[br];)k[br]=!0,this.walkSync(k);if(this.listeners.OnceExit)if("document"===k.type){var E,T=_createForOfIteratorHelper2(k.nodes);try{for(T.s();!(E=T.n()).done;){var M=E.value;this.visitSync(this.listeners.OnceExit,M)}}catch(I){T.e(I)}finally{T.f()}}else this.visitSync(this.listeners.OnceExit,k)}return this.result}},{key:"then",value:function(e,_){return this.async().then(e,_)}},{key:"toString",value:function(){return this.css}},{key:"visitSync",value:function(e,_){var S,k=_createForOfIteratorHelper2(e);try{for(k.s();!(S=k.n()).done;){var E=_slicedToArray(S.value,2),T=E[0],M=E[1];this.result.lastPlugin=T;var I=void 0;try{I=M(_,this.helpers)}catch(R){throw this.handleError(R,_.proxyOf)}if("root"!==_.type&&"document"!==_.type&&!_.parent)return!0;if(isPromise$1(I))throw this.getAsyncError()}}catch(O){k.e(O)}finally{k.f()}}},{key:"visitTick",value:function(e){var _=e[e.length-1],S=_.node,k=_.visitors;if("root"===S.type||"document"===S.type||S.parent){if(k.length>0&&_.visitorIndex<k.length){var E=_slicedToArray(k[_.visitorIndex],2),T=E[0],M=E[1];_.visitorIndex+=1,_.visitorIndex===k.length&&(_.visitors=[],_.visitorIndex=0),this.result.lastPlugin=T;try{return M(S.toProxy(),this.helpers)}catch(L){throw this.handleError(L,S)}}if(0!==_.iterator){for(var I,R=_.iterator;I=S.nodes[S.indexes[R]];)if(S.indexes[R]+=1,!I[br])return I[br]=!0,void e.push(toStack$1(I));_.iterator=0,delete S.indexes[R]}for(var O=_.events;_.eventIndex<O.length;){var D=O[_.eventIndex];if(_.eventIndex+=1,0===D)return void(S.nodes&&S.nodes.length&&(S[br]=!0,_.iterator=S.getIterator()));if(this.listeners[D])return void(_.visitors=this.listeners[D])}e.pop()}else e.pop()}},{key:"walkSync",value:function(e){var _=this;e[br]=!0;var S,k=_createForOfIteratorHelper2(getEvents$1(e));try{for(k.s();!(S=k.n()).done;){var E=S.value;if(0===E)e.nodes&&e.each(function(e){e[br]||_.walkSync(e)});else{var T=this.listeners[E];if(T&&this.visitSync(T,e.toProxy()))return}}}catch(M){k.e(M)}finally{k.f()}}},{key:"warnings",value:function(){return this.sync().warnings()}},{key:"content",get:function(){return this.stringify().content}},{key:"css",get:function(){return this.stringify().css}},{key:"map",get:function(){return this.stringify().map}},{key:"messages",get:function(){return this.sync().messages}},{key:"opts",get:function(){return this.result.opts}},{key:"processor",get:function(){return this.result.processor}},{key:"root",get:function(){return this.sync().root}},{key:Symbol.toStringTag,get:function(){return"LazyResult"}}]);var e}();Or.registerPostcss=function(e){Pr=e};var Dr=Or;Or.default=Or,Tr.registerLazyResult(Or),Cr.registerLazyResult(Or);var Lr=it,Fr=ve,Ur=_r,Br=Ct,Nr=function(){return _createClass3(function NoWorkResult(e,_,S){var k;_classCallCheck3(this,NoWorkResult),_=_.toString(),this.stringified=!1,this._processor=e,this._css=_,this._opts=S,this._map=void 0;var E=Fr;this.result=new Br(this._processor,k,this._opts),this.result.css=_;var T=this;Object.defineProperty(this.result,"root",{get:function(){return T.root}});var M=new Lr(E,k,this._opts,_);if(M.isMap()){var I=_slicedToArray(M.generate(),2),R=I[0],O=I[1];R&&(this.result.css=R),O&&(this.result.map=O)}else M.clearAnnotation(),this.result.css=M.css},[{key:"async",value:function(){return this.error?Promise.reject(this.error):Promise.resolve(this.result)}},{key:"catch",value:function(e){return this.async().catch(e)}},{key:"finally",value:function(e){return this.async().then(e,e)}},{key:"sync",value:function(){if(this.error)throw this.error;return this.result}},{key:"then",value:function(e,_){return this.async().then(e,_)}},{key:"toString",value:function(){return this._css}},{key:"warnings",value:function(){return[]}},{key:"content",get:function(){return this.result.css}},{key:"css",get:function(){return this.result.css}},{key:"map",get:function(){return this.result.map}},{key:"messages",get:function(){return[]}},{key:"opts",get:function(){return this.result.opts}},{key:"processor",get:function(){return this.result.processor}},{key:"root",get:function(){if(this._root)return this._root;var e,_=Ur;try{e=_(this._css,this._opts)}catch(S){this.error=S}if(this.error)throw this.error;return this._root=e,e}},{key:Symbol.toStringTag,get:function(){return"NoWorkResult"}}])}(),zr=Nr;Nr.default=Nr;var Gr=zr,jr=Dr,Vr=bt,Hr=rr,Wr=function(){return _createClass3(function Processor(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];_classCallCheck3(this,Processor),this.version="8.4.38",this.plugins=this.normalize(e)},[{key:"normalize",value:function(e){var _,S=[],k=_createForOfIteratorHelper2(e);try{for(k.s();!(_=k.n()).done;){var E=_.value;if(!0===E.postcss?E=E():E.postcss&&(E=E.postcss),"object"===_typeof3(E)&&Array.isArray(E.plugins))S=S.concat(E.plugins);else if("object"===_typeof3(E)&&E.postcssPlugin)S.push(E);else if("function"==typeof E)S.push(E);else if("object"!==_typeof3(E)||!E.parse&&!E.stringify)throw new Error(E+" is not a PostCSS plugin")}}catch(T){k.e(T)}finally{k.f()}return S}},{key:"process",value:function(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.plugins.length||_.parser||_.stringifier||_.syntax?new jr(this,e,_):new Gr(this,e,_)}},{key:"use",value:function(e){return this.plugins=this.plugins.concat(this.normalize([e])),this}}])}(),qr=Wr;Wr.default=Wr,Hr.registerProcessor(Wr),Vr.registerProcessor(Wr);var Xr=ke,Yr=Pe,Kr=ot,Jr=Qt,Qr=Xe,Zr=rr,$r=ur;function fromJSON$1$1(e,k){if(Array.isArray(e))return e.map(function(e){return fromJSON$1$1(e)});var E=e.inputs,T=_objectWithoutProperties3(e,_);if(E){k=[];var M,I=_createForOfIteratorHelper2(E);try{for(I.s();!(M=I.n()).done;){var R=_objectSpread2(_objectSpread2({},M.value),{},{__proto__:Qr.prototype});R.map&&(R.map=_objectSpread2(_objectSpread2({},R.map),{},{__proto__:Yr.prototype})),k.push(R)}}catch(U){I.e(U)}finally{I.f()}}if(T.nodes&&(T.nodes=e.nodes.map(function(e){return fromJSON$1$1(e,k)})),T.source){var O=T.source,D=O.inputId,L=_objectWithoutProperties3(O,S);T.source=L,null!=D&&(T.source.input=k[D])}if("root"===T.type)return new Zr(T);if("decl"===T.type)return new Xr(T);if("rule"===T.type)return new $r(T);if("comment"===T.type)return new Kr(T);if("atrule"===T.type)return new Jr(T);throw new Error("Unknown node type: "+e.type)}var en=fromJSON$1$1;fromJSON$1$1.default=fromJSON$1$1;var tn=le,rn=ke,nn=Dr,an=gt,sn=qr,un=ve,ln=en,cn=bt,hn=wt,dn=ot,fn=Qt,pn=Ct,vn=Xe,gn=_r,mn=ir,yn=ur,_n=rr,bn=we;function postcss$3(){for(var e=arguments.length,_=new Array(e),S=0;S<e;S++)_[S]=arguments[S];return 1===_.length&&Array.isArray(_[0])&&(_=_[0]),new sn(_)}postcss$3.plugin=function(e,_){var S,k=!1;function creator(){console&&console.warn&&!k&&(k=!0,M.LANG&&M.LANG.startsWith("cn"));var S=_.apply(void 0,arguments);return S.postcssPlugin=e,S.postcssVersion=(new sn).version,S}return Object.defineProperty(creator,"postcss",{get:function(){return S||(S=creator()),S}}),creator.process=function(e,_,S){return postcss$3([creator(S)]).process(e,_)},creator},postcss$3.stringify=un,postcss$3.parse=gn,postcss$3.fromJSON=ln,postcss$3.list=mn,postcss$3.comment=function(e){return new dn(e)},postcss$3.atRule=function(e){return new fn(e)},postcss$3.decl=function(e){return new rn(e)},postcss$3.rule=function(e){return new yn(e)},postcss$3.root=function(e){return new _n(e)},postcss$3.document=function(e){return new cn(e)},postcss$3.CssSyntaxError=tn,postcss$3.Declaration=rn,postcss$3.Container=an,postcss$3.Processor=sn,postcss$3.Document=cn,postcss$3.Comment=dn,postcss$3.Warning=hn,postcss$3.AtRule=fn,postcss$3.Result=pn,postcss$3.Input=vn,postcss$3.Rule=yn,postcss$3.Root=_n,postcss$3.Node=bn,nn.registerPostcss(postcss$3);var Sn=postcss$3;postcss$3.default=postcss$3;var wn=getDefaultExportFromCjs$1(Sn);wn.stringify,wn.fromJSON,wn.plugin,wn.parse,wn.list,wn.document,wn.comment,wn.atRule,wn.rule,wn.decl,wn.root,wn.CssSyntaxError,wn.Declaration,wn.Container,wn.Processor,wn.Document,wn.Comment,wn.Warning,wn.AtRule,wn.Result,wn.Input,wn.Rule,wn.Root,wn.Node;var xn=Object.defineProperty,__publicField2=function(e,_,S){return function(e,_,S){return _ in e?xn(e,_,{enumerable:!0,configurable:!0,writable:!0,value:S}):e[_]=S}(e,"symbol"!==_typeof3(_)?_+"":_,S)};function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function getAugmentedNamespace(e){if(e.__esModule)return e;var _=e.default;if("function"==typeof _){var S=function a22(){return this instanceof a22?Reflect.construct(_,arguments,this.constructor):_.apply(this,arguments)};S.prototype=_.prototype}else S={};return Object.defineProperty(S,"__esModule",{value:!0}),Object.keys(e).forEach(function(_){var k=Object.getOwnPropertyDescriptor(e,_);Object.defineProperty(S,_,k.get?k:{enumerable:!0,get:function(){return e[_]}})}),S}var kn={exports:{}},Cn=String,create=function(){return{isColorSupported:!1,reset:Cn,bold:Cn,dim:Cn,italic:Cn,underline:Cn,inverse:Cn,hidden:Cn,strikethrough:Cn,black:Cn,red:Cn,green:Cn,yellow:Cn,blue:Cn,magenta:Cn,cyan:Cn,white:Cn,gray:Cn,bgBlack:Cn,bgRed:Cn,bgGreen:Cn,bgYellow:Cn,bgBlue:Cn,bgMagenta:Cn,bgCyan:Cn,bgWhite:Cn}};kn.exports=create(),kn.exports.createColors=create;var An=kn.exports,En=getAugmentedNamespace(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"}))),Tn=An,Mn=En,In=function(e){function CssSyntaxError2(e,_,S,k,E,T){var M;return _classCallCheck3(this,CssSyntaxError2),(M=_callSuper(this,CssSyntaxError2,[e])).name="CssSyntaxError",M.reason=e,E&&(M.file=E),k&&(M.source=k),T&&(M.plugin=T),void 0!==_&&void 0!==S&&("number"==typeof _?(M.line=_,M.column=S):(M.line=_.line,M.column=_.column,M.endLine=S.line,M.endColumn=S.column)),M.setMessage(),Error.captureStackTrace&&Error.captureStackTrace(M,CssSyntaxError2),M}return _inherits(CssSyntaxError2,e),_createClass3(CssSyntaxError2,[{key:"setMessage",value:function(){this.message=this.plugin?this.plugin+": ":"",this.message+=this.file?this.file:"<css input>",void 0!==this.line&&(this.message+=":"+this.line+":"+this.column),this.message+=": "+this.reason}},{key:"showSourceCode",value:function(e){var _=this;if(!this.source)return"";var S=this.source;null==e&&(e=Tn.isColorSupported),Mn&&e&&(S=Mn(S));var k,E,T=S.split(/\r?\n/),M=Math.max(this.line-3,0),I=Math.min(this.line+2,T.length),R=String(I).length;if(e){var O=Tn.createColors(!0),D=O.bold,L=O.gray,U=O.red;k=function(e){return D(U(e))},E=function(e){return L(e)}}else k=E=function(e){return e};return T.slice(M,I).map(function(e,S){var T=M+1+S,I=" "+(" "+T).slice(-R)+" | ";if(T===_.line){var O=E(I.replace(/\d/g," "))+e.slice(0,_.column-1).replace(/[^\t]/g," ");return k(">")+E(I)+e+"\n "+O+k("^")}return" "+E(I)+e}).join("\n")}},{key:"toString",value:function(){var e=this.showSourceCode();return e&&(e="\n\n"+e+"\n"),this.name+": "+this.message+e}}])}(_wrapNativeSuper(Error)),Rn=In;In.default=In;var Pn={};Pn.isClean=Symbol("isClean"),Pn.my=Symbol("my");var On={after:"\n",beforeClose:"\n",beforeComment:"\n",beforeDecl:"\n",beforeOpen:" ",beforeRule:"\n",colon:": ",commentLeft:" ",commentRight:" ",emptyBody:"",indent:"    ",semicolon:!1};var Dn=function(){return _createClass3(function Stringifier2(e){_classCallCheck3(this,Stringifier2),this.builder=e},[{key:"atrule",value:function(e,_){var S="@"+e.name,k=e.params?this.rawValue(e,"params"):"";if(void 0!==e.raws.afterName?S+=e.raws.afterName:k&&(S+=" "),e.nodes)this.block(e,S+k);else{var E=(e.raws.between||"")+(_?";":"");this.builder(S+k+E,e)}}},{key:"beforeAfter",value:function(e,_){var S;S="decl"===e.type?this.raw(e,null,"beforeDecl"):"comment"===e.type?this.raw(e,null,"beforeComment"):"before"===_?this.raw(e,null,"beforeRule"):this.raw(e,null,"beforeClose");for(var k=e.parent,E=0;k&&"root"!==k.type;)E+=1,k=k.parent;if(S.includes("\n")){var T=this.raw(e,null,"indent");if(T.length)for(var M=0;M<E;M++)S+=T}return S}},{key:"block",value:function(e,_){var S,k=this.raw(e,"between","beforeOpen");this.builder(_+k+"{",e,"start"),e.nodes&&e.nodes.length?(this.body(e),S=this.raw(e,"after")):S=this.raw(e,"after","emptyBody"),S&&this.builder(S),this.builder("}",e,"end")}},{key:"body",value:function(e){for(var _=e.nodes.length-1;_>0&&"comment"===e.nodes[_].type;)_-=1;for(var S=this.raw(e,"semicolon"),k=0;k<e.nodes.length;k++){var E=e.nodes[k],T=this.raw(E,"before");T&&this.builder(T),this.stringify(E,_!==k||S)}}},{key:"comment",value:function(e){var _=this.raw(e,"left","commentLeft"),S=this.raw(e,"right","commentRight");this.builder("/*"+_+e.text+S+"*/",e)}},{key:"decl",value:function(e,_){var S=this.raw(e,"between","colon"),k=e.prop+S+this.rawValue(e,"value");e.important&&(k+=e.raws.important||" !important"),_&&(k+=";"),this.builder(k,e)}},{key:"document",value:function(e){this.body(e)}},{key:"raw",value:function(e,_,S){var k;if(S||(S=_),_&&void 0!==(k=e.raws[_]))return k;var E=e.parent;if("before"===S){if(!E||"root"===E.type&&E.first===e)return"";if(E&&"document"===E.type)return""}if(!E)return On[S];var T=e.root();if(T.rawCache||(T.rawCache={}),void 0!==T.rawCache[S])return T.rawCache[S];if("before"===S||"after"===S)return this.beforeAfter(e,S);var M,I="raw"+((M=S)[0].toUpperCase()+M.slice(1));return this[I]?k=this[I](T,e):T.walk(function(e){if(void 0!==(k=e.raws[_]))return!1}),void 0===k&&(k=On[S]),T.rawCache[S]=k,k}},{key:"rawBeforeClose",value:function(e){var _;return e.walk(function(e){if(e.nodes&&e.nodes.length>0&&void 0!==e.raws.after)return(_=e.raws.after).includes("\n")&&(_=_.replace(/[^\n]+$/,"")),!1}),_&&(_=_.replace(/\S/g,"")),_}},{key:"rawBeforeComment",value:function(e,_){var S;return e.walkComments(function(e){if(void 0!==e.raws.before)return(S=e.raws.before).includes("\n")&&(S=S.replace(/[^\n]+$/,"")),!1}),void 0===S?S=this.raw(_,null,"beforeDecl"):S&&(S=S.replace(/\S/g,"")),S}},{key:"rawBeforeDecl",value:function(e,_){var S;return e.walkDecls(function(e){if(void 0!==e.raws.before)return(S=e.raws.before).includes("\n")&&(S=S.replace(/[^\n]+$/,"")),!1}),void 0===S?S=this.raw(_,null,"beforeRule"):S&&(S=S.replace(/\S/g,"")),S}},{key:"rawBeforeOpen",value:function(e){var _;return e.walk(function(e){if("decl"!==e.type&&void 0!==(_=e.raws.between))return!1}),_}},{key:"rawBeforeRule",value:function(e){var _;return e.walk(function(S){if(S.nodes&&(S.parent!==e||e.first!==S)&&void 0!==S.raws.before)return(_=S.raws.before).includes("\n")&&(_=_.replace(/[^\n]+$/,"")),!1}),_&&(_=_.replace(/\S/g,"")),_}},{key:"rawColon",value:function(e){var _;return e.walkDecls(function(e){if(void 0!==e.raws.between)return _=e.raws.between.replace(/[^\s:]/g,""),!1}),_}},{key:"rawEmptyBody",value:function(e){var _;return e.walk(function(e){if(e.nodes&&0===e.nodes.length&&void 0!==(_=e.raws.after))return!1}),_}},{key:"rawIndent",value:function(e){return e.raws.indent?e.raws.indent:(e.walk(function(S){var k=S.parent;if(k&&k!==e&&k.parent&&k.parent===e&&void 0!==S.raws.before){var E=S.raws.before.split("\n");return _=(_=E[E.length-1]).replace(/\S/g,""),!1}}),_);var _}},{key:"rawSemicolon",value:function(e){var _;return e.walk(function(e){if(e.nodes&&e.nodes.length&&"decl"===e.last.type&&void 0!==(_=e.raws.semicolon))return!1}),_}},{key:"rawValue",value:function(e,_){var S=e[_],k=e.raws[_];return k&&k.value===S?k.raw:S}},{key:"root",value:function(e){this.body(e),e.raws.after&&this.builder(e.raws.after)}},{key:"rule",value:function(e){this.block(e,this.rawValue(e,"selector")),e.raws.ownSemicolon&&this.builder(e.raws.ownSemicolon,e,"end")}},{key:"stringify",value:function(e,_){if(!this[e.type])throw new Error("Unknown AST node type "+e.type+". Maybe you need to change PostCSS stringifier.");this[e.type](e,_)}}])}(),Ln=Dn;Dn.default=Dn;var Fn=Ln;function stringify$4(e,_){new Fn(_).stringify(e)}var Un=stringify$4;stringify$4.default=stringify$4;var Bn=Pn.isClean,Nn=Pn.my,zn=Rn,Gn=Ln,jn=Un;function cloneNode(e,_){var S=new e.constructor;for(var k in e)if(Object.prototype.hasOwnProperty.call(e,k)&&"proxyCache"!==k){var E=e[k],T=_typeof3(E);"parent"===k&&"object"===T?_&&(S[k]=_):"source"===k?S[k]=E:Array.isArray(E)?S[k]=E.map(function(e){return cloneNode(e,S)}):("object"===T&&null!==E&&(E=cloneNode(E)),S[k]=E)}return S}var Vn=function(){return _createClass3(function Node3(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(var _ in _classCallCheck3(this,Node3),this.raws={},this[Bn]=!1,this[Nn]=!0,e)if("nodes"===_){this.nodes=[];var S,k=_createForOfIteratorHelper2(e[_]);try{for(k.s();!(S=k.n()).done;){var E=S.value;"function"==typeof E.clone?this.append(E.clone()):this.append(E)}}catch(T){k.e(T)}finally{k.f()}}else this[_]=e[_]},[{key:"addToError",value:function(e){if(e.postcssNode=this,e.stack&&this.source&&/\n\s{4}at /.test(e.stack)){var _=this.source;e.stack=e.stack.replace(/\n\s{4}at /,"$&".concat(_.input.from,":").concat(_.start.line,":").concat(_.start.column,"$&"))}return e}},{key:"after",value:function(e){return this.parent.insertAfter(this,e),this}},{key:"assign",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(var _ in e)this[_]=e[_];return this}},{key:"before",value:function(e){return this.parent.insertBefore(this,e),this}},{key:"cleanRaws",value:function(e){delete this.raws.before,delete this.raws.after,e||delete this.raws.between}},{key:"clone",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_=cloneNode(this);for(var S in e)_[S]=e[S];return _}},{key:"cloneAfter",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_=this.clone(e);return this.parent.insertAfter(this,_),_}},{key:"cloneBefore",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_=this.clone(e);return this.parent.insertBefore(this,_),_}},{key:"error",value:function(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.source){var S=this.rangeBy(_),k=S.end,E=S.start;return this.source.input.error(e,{column:E.column,line:E.line},{column:k.column,line:k.line},_)}return new zn(e)}},{key:"getProxyProcessor",value:function(){return{get:function(e,_){return"proxyOf"===_?e:"root"===_?function(){return e.root().toProxy()}:e[_]},set:function(e,_,S){return e[_]===S||(e[_]=S,"prop"!==_&&"value"!==_&&"name"!==_&&"params"!==_&&"important"!==_&&"text"!==_||e.markDirty()),!0}}}},{key:"markDirty",value:function(){if(this[Bn]){this[Bn]=!1;for(var e=this;e=e.parent;)e[Bn]=!1}}},{key:"next",value:function(){if(this.parent){var e=this.parent.index(this);return this.parent.nodes[e+1]}}},{key:"positionBy",value:function(e,_){var S=this.source.start;if(e.index)S=this.positionInside(e.index,_);else if(e.word){var k=(_=this.toString()).indexOf(e.word);-1!==k&&(S=this.positionInside(k,_))}return S}},{key:"positionInside",value:function(e,_){for(var S=_||this.toString(),k=this.source.start.column,E=this.source.start.line,T=0;T<e;T++)"\n"===S[T]?(k=1,E+=1):k+=1;return{column:k,line:E}}},{key:"prev",value:function(){if(this.parent){var e=this.parent.index(this);return this.parent.nodes[e-1]}}},{key:"rangeBy",value:function(e){var _={column:this.source.start.column,line:this.source.start.line},S=this.source.end?{column:this.source.end.column+1,line:this.source.end.line}:{column:_.column+1,line:_.line};if(e.word){var k=this.toString(),E=k.indexOf(e.word);-1!==E&&(_=this.positionInside(E,k),S=this.positionInside(E+e.word.length,k))}else e.start?_={column:e.start.column,line:e.start.line}:e.index&&(_=this.positionInside(e.index)),e.end?S={column:e.end.column,line:e.end.line}:"number"==typeof e.endIndex?S=this.positionInside(e.endIndex):e.index&&(S=this.positionInside(e.index+1));return(S.line<_.line||S.line===_.line&&S.column<=_.column)&&(S={column:_.column+1,line:_.line}),{end:S,start:_}}},{key:"raw",value:function(e,_){return(new Gn).raw(this,e,_)}},{key:"remove",value:function(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this}},{key:"replaceWith",value:function(){if(this.parent){for(var e=this,_=!1,S=arguments.length,k=new Array(S),E=0;E<S;E++)k[E]=arguments[E];for(var T=0,M=k;T<M.length;T++){var I=M[T];I===this?_=!0:_?(this.parent.insertAfter(e,I),e=I):this.parent.insertBefore(e,I)}_||this.remove()}return this}},{key:"root",value:function(){for(var e=this;e.parent&&"document"!==e.parent.type;)e=e.parent;return e}},{key:"toJSON",value:function(e,_){var S={},k=null==_;_=_||new Map;var E=0;for(var T in this)if(Object.prototype.hasOwnProperty.call(this,T)&&"parent"!==T&&"proxyCache"!==T){var M=this[T];if(Array.isArray(M))S[T]=M.map(function(e){return"object"===_typeof3(e)&&e.toJSON?e.toJSON(null,_):e});else if("object"===_typeof3(M)&&M.toJSON)S[T]=M.toJSON(null,_);else if("source"===T){var I=_.get(M.input);null==I&&(I=E,_.set(M.input,E),E++),S[T]={end:M.end,inputId:I,start:M.start}}else S[T]=M}return k&&(S.inputs=_toConsumableArray3(_.keys()).map(function(e){return e.toJSON()})),S}},{key:"toProxy",value:function(){return this.proxyCache||(this.proxyCache=new Proxy(this,this.getProxyProcessor())),this.proxyCache}},{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jn;e.stringify&&(e=e.stringify);var _="";return e(this,function(e){_+=e}),_}},{key:"warn",value:function(e,_,S){var k={node:this};for(var E in S)k[E]=S[E];return e.warn(_,k)}},{key:"proxyOf",get:function(){return this}}])}(),Hn=Vn;Vn.default=Vn;var Wn=function(e){function Declaration2(e){var _;return _classCallCheck3(this,Declaration2),e&&void 0!==e.value&&"string"!=typeof e.value&&(e=_objectSpread2(_objectSpread2({},e),{},{value:String(e.value)})),(_=_callSuper(this,Declaration2,[e])).type="decl",_}return _inherits(Declaration2,e),_createClass3(Declaration2,[{key:"variable",get:function(){return this.prop.startsWith("--")||"$"===this.prop[0]}}])}(Hn),qn=Wn;Wn.default=Wn;var nonSecure_nanoid=function(){for(var e="",_=arguments.length>0&&void 0!==arguments[0]?arguments[0]:21;_--;)e+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[64*Math.random()|0];return e},Xn=En.SourceMapConsumer,Yn=En.SourceMapGenerator,Kn=En.existsSync,Jn=En.readFileSync,Qn=En.dirname,Zn=En.join;var $n=function(){return _createClass3(function PreviousMap2(e,_){if(_classCallCheck3(this,PreviousMap2),!1!==_.map){this.loadAnnotation(e),this.inline=this.startWith(this.annotation,"data:");var S=_.map?_.map.prev:void 0,k=this.loadMap(_.from,S);!this.mapFile&&_.from&&(this.mapFile=_.from),this.mapFile&&(this.root=Qn(this.mapFile)),k&&(this.text=k)}},[{key:"consumer",value:function(){return this.consumerCache||(this.consumerCache=new Xn(this.text)),this.consumerCache}},{key:"decodeInline",value:function(e){var _;if(/^data:application\/json;charset=utf-?8,/.test(e)||/^data:application\/json,/.test(e))return decodeURIComponent(e.substr(RegExp.lastMatch.length));if(/^data:application\/json;charset=utf-?8;base64,/.test(e)||/^data:application\/json;base64,/.test(e))return _=e.substr(RegExp.lastMatch.length),Buffer?Buffer.from(_,"base64").toString():window.atob(_);var S=e.match(/data:application\/json;([^,]+),/)[1];throw new Error("Unsupported source map encoding "+S)}},{key:"getAnnotationURL",value:function(e){return e.replace(/^\/\*\s*# sourceMappingURL=/,"").trim()}},{key:"isMap",value:function(e){return"object"===_typeof3(e)&&("string"==typeof e.mappings||"string"==typeof e._mappings||Array.isArray(e.sections))}},{key:"loadAnnotation",value:function(e){var _=e.match(/\/\*\s*# sourceMappingURL=/gm);if(_){var S=e.lastIndexOf(_.pop()),k=e.indexOf("*/",S);S>-1&&k>-1&&(this.annotation=this.getAnnotationURL(e.substring(S,k)))}}},{key:"loadFile",value:function(e){if(this.root=Qn(e),Kn(e))return this.mapFile=e,Jn(e,"utf-8").toString().trim()}},{key:"loadMap",value:function(e,_){if(!1===_)return!1;if(_){if("string"==typeof _)return _;if("function"!=typeof _){if(_ instanceof Xn)return Yn.fromSourceMap(_).toString();if(_ instanceof Yn)return _.toString();if(this.isMap(_))return JSON.stringify(_);throw new Error("Unsupported previous source map format: "+_.toString())}var S=_(e);if(S){var k=this.loadFile(S);if(!k)throw new Error("Unable to load previous source map: "+S.toString());return k}}else{if(this.inline)return this.decodeInline(this.annotation);if(this.annotation){var E=this.annotation;return e&&(E=Zn(Qn(e),E)),this.loadFile(E)}}}},{key:"startWith",value:function(e,_){return!!e&&e.substr(0,_.length)===_}},{key:"withContent",value:function(){return!!(this.consumer().sourcesContent&&this.consumer().sourcesContent.length>0)}}])}(),ei=$n;$n.default=$n;var ti=En.SourceMapConsumer,ri=En.SourceMapGenerator,ni=En.fileURLToPath,ii=En.pathToFileURL,ai=En.isAbsolute,oi=En.resolve,si=nonSecure_nanoid,ui=En,li=Rn,ci=ei,hi=Symbol("fromOffsetCache"),di=Boolean(ti&&ri),fi=Boolean(oi&&ai),pi=function(){return _createClass3(function Input2(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(_classCallCheck3(this,Input2),null==e||"object"===_typeof3(e)&&!e.toString)throw new Error("PostCSS received ".concat(e," instead of CSS string"));if(this.css=e.toString(),"\ufeff"===this.css[0]||""===this.css[0]?(this.hasBOM=!0,this.css=this.css.slice(1)):this.hasBOM=!1,_.from&&(!fi||/^\w+:\/\//.test(_.from)||ai(_.from)?this.file=_.from:this.file=oi(_.from)),fi&&di){var S=new ci(this.css,_);if(S.text){this.map=S;var k=S.consumer().file;!this.file&&k&&(this.file=this.mapResolve(k))}}this.file||(this.id="<input css "+si(6)+">"),this.map&&(this.map.file=this.from)},[{key:"error",value:function(e,_,S){var k,E,T,M=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(_&&"object"===_typeof3(_)){var I=_,R=S;if("number"==typeof I.offset){var O=this.fromOffset(I.offset);_=O.line,S=O.col}else _=I.line,S=I.column;if("number"==typeof R.offset){var D=this.fromOffset(R.offset);E=D.line,T=D.col}else E=R.line,T=R.column}else if(!S){var L=this.fromOffset(_);_=L.line,S=L.col}var U=this.origin(_,S,E,T);return(k=U?new li(e,void 0===U.endLine?U.line:{column:U.column,line:U.line},void 0===U.endLine?U.column:{column:U.endColumn,line:U.endLine},U.source,U.file,M.plugin):new li(e,void 0===E?_:{column:S,line:_},void 0===E?S:{column:T,line:E},this.css,this.file,M.plugin)).input={column:S,endColumn:T,endLine:E,line:_,source:this.css},this.file&&(ii&&(k.input.url=ii(this.file).toString()),k.input.file=this.file),k}},{key:"fromOffset",value:function(e){var _;if(this[hi])_=this[hi];else{var S=this.css.split("\n");_=new Array(S.length);for(var k=0,E=0,T=S.length;E<T;E++)_[E]=k,k+=S[E].length+1;this[hi]=_}var M=0;if(e>=_[_.length-1])M=_.length-1;else for(var I,R=_.length-2;M<R;)if(e<_[I=M+(R-M>>1)])R=I-1;else{if(!(e>=_[I+1])){M=I;break}M=I+1}return{col:e-_[M]+1,line:M+1}}},{key:"mapResolve",value:function(e){return/^\w+:\/\//.test(e)?e:oi(this.map.consumer().sourceRoot||this.map.root||".",e)}},{key:"origin",value:function(e,_,S,k){if(!this.map)return!1;var E,T,M=this.map.consumer(),I=M.originalPositionFor({column:_,line:e});if(!I.source)return!1;"number"==typeof S&&(E=M.originalPositionFor({column:k,line:S})),T=ai(I.source)?ii(I.source):new URL(I.source,this.map.consumer().sourceRoot||ii(this.map.mapFile));var R={column:I.column,endColumn:E&&E.column,endLine:E&&E.line,line:I.line,url:T.toString()};if("file:"===T.protocol){if(!ni)throw new Error("file: protocol is not available in this PostCSS build");R.file=ni(T)}var O=M.sourceContentFor(I.source);return O&&(R.source=O),R}},{key:"toJSON",value:function(){for(var e={},_=0,S=["hasBOM","css","file","id"];_<S.length;_++){var k=S[_];null!=this[k]&&(e[k]=this[k])}return this.map&&(e.map=_objectSpread2({},this.map),e.map.consumerCache&&(e.map.consumerCache=void 0)),e}},{key:"from",get:function(){return this.file||this.id}}])}(),vi=pi;pi.default=pi,ui&&ui.registerInput&&ui.registerInput(pi);var gi=En.SourceMapConsumer,mi=En.SourceMapGenerator,yi=En.dirname,_i=En.relative,bi=En.resolve,Si=En.sep,wi=En.pathToFileURL,xi=vi,ki=Boolean(gi&&mi),Ci=Boolean(yi&&bi&&_i&&Si),Ai=function(){return _createClass3(function MapGenerator2(e,_,S,k){_classCallCheck3(this,MapGenerator2),this.stringify=e,this.mapOpts=S.map||{},this.root=_,this.opts=S,this.css=k,this.originalCSS=k,this.usesFileUrls=!this.mapOpts.from&&this.mapOpts.absolute,this.memoizedFileURLs=new Map,this.memoizedPaths=new Map,this.memoizedURLs=new Map},[{key:"addAnnotation",value:function(){var e;e=this.isInline()?"data:application/json;base64,"+this.toBase64(this.map.toString()):"string"==typeof this.mapOpts.annotation?this.mapOpts.annotation:"function"==typeof this.mapOpts.annotation?this.mapOpts.annotation(this.opts.to,this.root):this.outputFile()+".map";var _="\n";this.css.includes("\r\n")&&(_="\r\n"),this.css+=_+"/*# sourceMappingURL="+e+" */"}},{key:"applyPrevMaps",value:function(){var e,_=_createForOfIteratorHelper2(this.previous());try{for(_.s();!(e=_.n()).done;){var S=e.value,k=this.toUrl(this.path(S.file)),E=S.root||yi(S.file),T=void 0;!1===this.mapOpts.sourcesContent?(T=new gi(S.text)).sourcesContent&&(T.sourcesContent=null):T=S.consumer(),this.map.applySourceMap(T,k,this.toUrl(this.path(E)))}}catch(M){_.e(M)}finally{_.f()}}},{key:"clearAnnotation",value:function(){if(!1!==this.mapOpts.annotation)if(this.root)for(var e,_=this.root.nodes.length-1;_>=0;_--)"comment"===(e=this.root.nodes[_]).type&&0===e.text.indexOf("# sourceMappingURL=")&&this.root.removeChild(_);else this.css&&(this.css=this.css.replace(/\n*?\/\*#[\S\s]*?\*\/$/gm,""))}},{key:"generate",value:function(){if(this.clearAnnotation(),Ci&&ki&&this.isMap())return this.generateMap();var e="";return this.stringify(this.root,function(_){e+=_}),[e]}},{key:"generateMap",value:function(){if(this.root)this.generateString();else if(1===this.previous().length){var e=this.previous()[0].consumer();e.file=this.outputFile(),this.map=mi.fromSourceMap(e,{ignoreInvalidMapping:!0})}else this.map=new mi({file:this.outputFile(),ignoreInvalidMapping:!0}),this.map.addMapping({generated:{column:0,line:1},original:{column:0,line:1},source:this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>"});return this.isSourcesContent()&&this.setSourcesContent(),this.root&&this.previous().length>0&&this.applyPrevMaps(),this.isAnnotation()&&this.addAnnotation(),this.isInline()?[this.css]:[this.css,this.map]}},{key:"generateString",value:function(){var e=this;this.css="",this.map=new mi({file:this.outputFile(),ignoreInvalidMapping:!0});var _,S,k=1,E=1,T="<no source>",M={generated:{column:0,line:0},original:{column:0,line:0},source:""};this.stringify(this.root,function(I,R,O){if(e.css+=I,R&&"end"!==O&&(M.generated.line=k,M.generated.column=E-1,R.source&&R.source.start?(M.source=e.sourcePath(R),M.original.line=R.source.start.line,M.original.column=R.source.start.column-1,e.map.addMapping(M)):(M.source=T,M.original.line=1,M.original.column=0,e.map.addMapping(M))),(_=I.match(/\n/g))?(k+=_.length,S=I.lastIndexOf("\n"),E=I.length-S):E+=I.length,R&&"start"!==O){var D=R.parent||{raws:{}};("decl"===R.type||"atrule"===R.type&&!R.nodes)&&R===D.last&&!D.raws.semicolon||(R.source&&R.source.end?(M.source=e.sourcePath(R),M.original.line=R.source.end.line,M.original.column=R.source.end.column-1,M.generated.line=k,M.generated.column=E-2,e.map.addMapping(M)):(M.source=T,M.original.line=1,M.original.column=0,M.generated.line=k,M.generated.column=E-1,e.map.addMapping(M)))}})}},{key:"isAnnotation",value:function(){return!!this.isInline()||(void 0!==this.mapOpts.annotation?this.mapOpts.annotation:!this.previous().length||this.previous().some(function(e){return e.annotation}))}},{key:"isInline",value:function(){if(void 0!==this.mapOpts.inline)return this.mapOpts.inline;var e=this.mapOpts.annotation;return(void 0===e||!0===e)&&(!this.previous().length||this.previous().some(function(e){return e.inline}))}},{key:"isMap",value:function(){return void 0!==this.opts.map?!!this.opts.map:this.previous().length>0}},{key:"isSourcesContent",value:function(){return void 0!==this.mapOpts.sourcesContent?this.mapOpts.sourcesContent:!this.previous().length||this.previous().some(function(e){return e.withContent()})}},{key:"outputFile",value:function(){return this.opts.to?this.path(this.opts.to):this.opts.from?this.path(this.opts.from):"to.css"}},{key:"path",value:function(e){if(this.mapOpts.absolute)return e;if(60===e.charCodeAt(0))return e;if(/^\w+:\/\//.test(e))return e;var _=this.memoizedPaths.get(e);if(_)return _;var S=this.opts.to?yi(this.opts.to):".";"string"==typeof this.mapOpts.annotation&&(S=yi(bi(S,this.mapOpts.annotation)));var k=_i(S,e);return this.memoizedPaths.set(e,k),k}},{key:"previous",value:function(){var e=this;if(!this.previousMaps)if(this.previousMaps=[],this.root)this.root.walk(function(_){if(_.source&&_.source.input.map){var S=_.source.input.map;e.previousMaps.includes(S)||e.previousMaps.push(S)}});else{var _=new xi(this.originalCSS,this.opts);_.map&&this.previousMaps.push(_.map)}return this.previousMaps}},{key:"setSourcesContent",value:function(){var e=this,_={};if(this.root)this.root.walk(function(S){if(S.source){var k=S.source.input.from;if(k&&!_[k]){_[k]=!0;var E=e.usesFileUrls?e.toFileUrl(k):e.toUrl(e.path(k));e.map.setSourceContent(E,S.source.input.css)}}});else if(this.css){var S=this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>";this.map.setSourceContent(S,this.css)}}},{key:"sourcePath",value:function(e){return this.mapOpts.from?this.toUrl(this.mapOpts.from):this.usesFileUrls?this.toFileUrl(e.source.input.from):this.toUrl(this.path(e.source.input.from))}},{key:"toBase64",value:function(e){return Buffer?Buffer.from(e).toString("base64"):window.btoa(unescape(encodeURIComponent(e)))}},{key:"toFileUrl",value:function(e){var _=this.memoizedFileURLs.get(e);if(_)return _;if(wi){var S=wi(e).toString();return this.memoizedFileURLs.set(e,S),S}throw new Error("`map.absolute` option is not available in this PostCSS build")}},{key:"toUrl",value:function(e){var _=this.memoizedURLs.get(e);if(_)return _;"\\"===Si&&(e=e.replace(/\\/g,"/"));var S=encodeURI(e).replace(/[#?]/g,encodeURIComponent);return this.memoizedURLs.set(e,S),S}}])}(),Ei=function(e){function Comment2(e){var _;return _classCallCheck3(this,Comment2),(_=_callSuper(this,Comment2,[e])).type="comment",_}return _inherits(Comment2,e),_createClass3(Comment2)}(Hn),Ti=Ei;Ei.default=Ei;var Mi,Ii,Ri,Pi,Oi=Pn.isClean,Di=Pn.my,Li=qn,Fi=Ti;function cleanSource(e){return e.map(function(e){return e.nodes&&(e.nodes=cleanSource(e.nodes)),delete e.source,e})}function markDirtyUp(e){if(e[Oi]=!1,e.proxyOf.nodes){var _,S=_createForOfIteratorHelper2(e.proxyOf.nodes);try{for(S.s();!(_=S.n()).done;){markDirtyUp(_.value)}}catch(k){S.e(k)}finally{S.f()}}}var Ui=function(e){function Container2(){return _classCallCheck3(this,Container2),_callSuper(this,Container2,arguments)}return _inherits(Container2,e),_createClass3(Container2,[{key:"append",value:function(){for(var e=arguments.length,_=new Array(e),S=0;S<e;S++)_[S]=arguments[S];for(var k=0,E=_;k<E.length;k++){var T,M=E[k],I=_createForOfIteratorHelper2(this.normalize(M,this.last));try{for(I.s();!(T=I.n()).done;){var R=T.value;this.proxyOf.nodes.push(R)}}catch(O){I.e(O)}finally{I.f()}}return this.markDirty(),this}},{key:"cleanRaws",value:function(e){if(_superPropGet(Container2,"cleanRaws",this,3)([e]),this.nodes){var _,S=_createForOfIteratorHelper2(this.nodes);try{for(S.s();!(_=S.n()).done;){_.value.cleanRaws(e)}}catch(k){S.e(k)}finally{S.f()}}}},{key:"each",value:function(e){if(this.proxyOf.nodes){for(var _,S,k=this.getIterator();this.indexes[k]<this.proxyOf.nodes.length&&(_=this.indexes[k],!1!==(S=e(this.proxyOf.nodes[_],_)));)this.indexes[k]+=1;return delete this.indexes[k],S}}},{key:"every",value:function(e){return this.nodes.every(e)}},{key:"getIterator",value:function(){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={}),this.lastEach+=1;var e=this.lastEach;return this.indexes[e]=0,e}},{key:"getProxyProcessor",value:function(){return{get:function(e,_){return"proxyOf"===_?e:e[_]?"each"===_||"string"==typeof _&&_.startsWith("walk")?function(){for(var S=arguments.length,k=new Array(S),E=0;E<S;E++)k[E]=arguments[E];return e[_].apply(e,_toConsumableArray3(k.map(function(e){return"function"==typeof e?function(_,S){return e(_.toProxy(),S)}:e})))}:"every"===_||"some"===_?function(S){return e[_](function(e){for(var _=arguments.length,k=new Array(_>1?_-1:0),E=1;E<_;E++)k[E-1]=arguments[E];return S.apply(void 0,[e.toProxy()].concat(k))})}:"root"===_?function(){return e.root().toProxy()}:"nodes"===_?e.nodes.map(function(e){return e.toProxy()}):"first"===_||"last"===_?e[_].toProxy():e[_]:e[_]},set:function(e,_,S){return e[_]===S||(e[_]=S,"name"!==_&&"params"!==_&&"selector"!==_||e.markDirty()),!0}}}},{key:"index",value:function(e){return"number"==typeof e?e:(e.proxyOf&&(e=e.proxyOf),this.proxyOf.nodes.indexOf(e))}},{key:"insertAfter",value:function(e,_){var S=this.index(e),k=this.normalize(_,this.proxyOf.nodes[S]).reverse();S=this.index(e);var E,T,M=_createForOfIteratorHelper2(k);try{for(M.s();!(E=M.n()).done;){var I=E.value;this.proxyOf.nodes.splice(S+1,0,I)}}catch(O){M.e(O)}finally{M.f()}for(var R in this.indexes)S<(T=this.indexes[R])&&(this.indexes[R]=T+k.length);return this.markDirty(),this}},{key:"insertBefore",value:function(e,_){var S=this.index(e),k=0===S&&"prepend",E=this.normalize(_,this.proxyOf.nodes[S],k).reverse();S=this.index(e);var T,M,I=_createForOfIteratorHelper2(E);try{for(I.s();!(T=I.n()).done;){var R=T.value;this.proxyOf.nodes.splice(S,0,R)}}catch(D){I.e(D)}finally{I.f()}for(var O in this.indexes)S<=(M=this.indexes[O])&&(this.indexes[O]=M+E.length);return this.markDirty(),this}},{key:"normalize",value:function(e,_){var S=this;if("string"==typeof e)e=cleanSource(Mi(e).nodes);else if(void 0===e)e=[];else if(Array.isArray(e)){var k,E=_createForOfIteratorHelper2(e=e.slice(0));try{for(E.s();!(k=E.n()).done;){var T=k.value;T.parent&&T.parent.removeChild(T,"ignore")}}catch(D){E.e(D)}finally{E.f()}}else if("root"===e.type&&"document"!==this.type){var M,I=_createForOfIteratorHelper2(e=e.nodes.slice(0));try{for(I.s();!(M=I.n()).done;){var R=M.value;R.parent&&R.parent.removeChild(R,"ignore")}}catch(D){I.e(D)}finally{I.f()}}else if(e.type)e=[e];else if(e.prop){if(void 0===e.value)throw new Error("Value field is missed in node creation");"string"!=typeof e.value&&(e.value=String(e.value)),e=[new Li(e)]}else if(e.selector)e=[new Ii(e)];else if(e.name)e=[new Ri(e)];else{if(!e.text)throw new Error("Unknown node type in node creation");e=[new Fi(e)]}var O=e.map(function(e){return e[Di]||Container2.rebuild(e),(e=e.proxyOf).parent&&e.parent.removeChild(e),e[Oi]&&markDirtyUp(e),void 0===e.raws.before&&_&&void 0!==_.raws.before&&(e.raws.before=_.raws.before.replace(/\S/g,"")),e.parent=S.proxyOf,e});return O}},{key:"prepend",value:function(){for(var e=arguments.length,_=new Array(e),S=0;S<e;S++)_[S]=arguments[S];var k,E=_createForOfIteratorHelper2(_=_.reverse());try{for(E.s();!(k=E.n()).done;){var T,M=k.value,I=this.normalize(M,this.first,"prepend").reverse(),R=_createForOfIteratorHelper2(I);try{for(R.s();!(T=R.n()).done;){var O=T.value;this.proxyOf.nodes.unshift(O)}}catch(L){R.e(L)}finally{R.f()}for(var D in this.indexes)this.indexes[D]=this.indexes[D]+I.length}}catch(L){E.e(L)}finally{E.f()}return this.markDirty(),this}},{key:"push",value:function(e){return e.parent=this,this.proxyOf.nodes.push(e),this}},{key:"removeAll",value:function(){var e,_=_createForOfIteratorHelper2(this.proxyOf.nodes);try{for(_.s();!(e=_.n()).done;){e.value.parent=void 0}}catch(S){_.e(S)}finally{_.f()}return this.proxyOf.nodes=[],this.markDirty(),this}},{key:"removeChild",value:function(e){var _;for(var S in e=this.index(e),this.proxyOf.nodes[e].parent=void 0,this.proxyOf.nodes.splice(e,1),this.indexes)(_=this.indexes[S])>=e&&(this.indexes[S]=_-1);return this.markDirty(),this}},{key:"replaceValues",value:function(e,_,S){return S||(S=_,_={}),this.walkDecls(function(k){_.props&&!_.props.includes(k.prop)||_.fast&&!k.value.includes(_.fast)||(k.value=k.value.replace(e,S))}),this.markDirty(),this}},{key:"some",value:function(e){return this.nodes.some(e)}},{key:"walk",value:function(e){return this.each(function(_,S){var k;try{k=e(_,S)}catch(E){throw _.addToError(E)}return!1!==k&&_.walk&&(k=_.walk(e)),k})}},{key:"walkAtRules",value:function(e,_){return _?e instanceof RegExp?this.walk(function(S,k){if("atrule"===S.type&&e.test(S.name))return _(S,k)}):this.walk(function(S,k){if("atrule"===S.type&&S.name===e)return _(S,k)}):(_=e,this.walk(function(e,S){if("atrule"===e.type)return _(e,S)}))}},{key:"walkComments",value:function(e){return this.walk(function(_,S){if("comment"===_.type)return e(_,S)})}},{key:"walkDecls",value:function(e,_){return _?e instanceof RegExp?this.walk(function(S,k){if("decl"===S.type&&e.test(S.prop))return _(S,k)}):this.walk(function(S,k){if("decl"===S.type&&S.prop===e)return _(S,k)}):(_=e,this.walk(function(e,S){if("decl"===e.type)return _(e,S)}))}},{key:"walkRules",value:function(e,_){return _?e instanceof RegExp?this.walk(function(S,k){if("rule"===S.type&&e.test(S.selector))return _(S,k)}):this.walk(function(S,k){if("rule"===S.type&&S.selector===e)return _(S,k)}):(_=e,this.walk(function(e,S){if("rule"===e.type)return _(e,S)}))}},{key:"first",get:function(){if(this.proxyOf.nodes)return this.proxyOf.nodes[0]}},{key:"last",get:function(){if(this.proxyOf.nodes)return this.proxyOf.nodes[this.proxyOf.nodes.length-1]}}])}(Hn);Ui.registerParse=function(e){Mi=e},Ui.registerRule=function(e){Ii=e},Ui.registerAtRule=function(e){Ri=e},Ui.registerRoot=function(e){Pi=e};var Bi=Ui;Ui.default=Ui,Ui.rebuild=function(e){"atrule"===e.type?Object.setPrototypeOf(e,Ri.prototype):"rule"===e.type?Object.setPrototypeOf(e,Ii.prototype):"decl"===e.type?Object.setPrototypeOf(e,Li.prototype):"comment"===e.type?Object.setPrototypeOf(e,Fi.prototype):"root"===e.type&&Object.setPrototypeOf(e,Pi.prototype),e[Di]=!0,e.nodes&&e.nodes.forEach(function(e){Ui.rebuild(e)})};var Ni,zi,Gi=function(e){function Document23(e){var _;return _classCallCheck3(this,Document23),(_=_callSuper(this,Document23,[_objectSpread2({type:"document"},e)])).nodes||(_.nodes=[]),_}return _inherits(Document23,e),_createClass3(Document23,[{key:"toResult",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Ni(new zi,this,e).stringify()}}])}(Bi);Gi.registerLazyResult=function(e){Ni=e},Gi.registerProcessor=function(e){zi=e};var ji=Gi;Gi.default=Gi;var Vi=function(){return _createClass3(function Warning2(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(_classCallCheck3(this,Warning2),this.type="warning",this.text=e,_.node&&_.node.source){var S=_.node.rangeBy(_);this.line=S.start.line,this.column=S.start.column,this.endLine=S.end.line,this.endColumn=S.end.column}for(var k in _)this[k]=_[k]},[{key:"toString",value:function(){return this.node?this.node.error(this.text,{index:this.index,plugin:this.plugin,word:this.word}).message:this.plugin?this.plugin+": "+this.text:this.text}}])}(),Hi=Vi;Vi.default=Vi;var Wi=Hi,qi=function(){return _createClass3(function Result2(e,_,S){_classCallCheck3(this,Result2),this.processor=e,this.messages=[],this.root=_,this.opts=S,this.css=void 0,this.map=void 0},[{key:"toString",value:function(){return this.css}},{key:"warn",value:function(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_.plugin||this.lastPlugin&&this.lastPlugin.postcssPlugin&&(_.plugin=this.lastPlugin.postcssPlugin);var S=new Wi(e,_);return this.messages.push(S),S}},{key:"warnings",value:function(){return this.messages.filter(function(e){return"warning"===e.type})}},{key:"content",get:function(){return this.css}}])}(),Xi=qi;qi.default=qi;var Yi="'".charCodeAt(0),Ki='"'.charCodeAt(0),Ji="\\".charCodeAt(0),Qi="/".charCodeAt(0),Zi="\n".charCodeAt(0),$i=" ".charCodeAt(0),ea="\f".charCodeAt(0),ta="\t".charCodeAt(0),ra="\r".charCodeAt(0),na="[".charCodeAt(0),ia="]".charCodeAt(0),aa="(".charCodeAt(0),oa=")".charCodeAt(0),sa="{".charCodeAt(0),ua="}".charCodeAt(0),la=";".charCodeAt(0),ca="*".charCodeAt(0),ha=":".charCodeAt(0),da="@".charCodeAt(0),fa=/[\t\n\f\r "#'()/;[\\\]{}]/g,pa=/[\t\n\f\r !"#'():;@[\\\]{}]|\/(?=\*)/g,va=/.[\r\n"'(/\\]/,ga=/[\da-f]/i,ma=Bi,ya=function(e){function AtRule2(e){var _;return _classCallCheck3(this,AtRule2),(_=_callSuper(this,AtRule2,[e])).type="atrule",_}return _inherits(AtRule2,e),_createClass3(AtRule2,[{key:"append",value:function(){this.proxyOf.nodes||(this.nodes=[]);for(var e=arguments.length,_=new Array(e),S=0;S<e;S++)_[S]=arguments[S];return _superPropGet(AtRule2,"append",this,3)(_)}},{key:"prepend",value:function(){this.proxyOf.nodes||(this.nodes=[]);for(var e=arguments.length,_=new Array(e),S=0;S<e;S++)_[S]=arguments[S];return _superPropGet(AtRule2,"prepend",this,3)(_)}}])}(ma),_a=ya;ya.default=ya,ma.registerAtRule(ya);var ba,Sa,wa=Bi,xa=function(e){function Root2(e){var _;return _classCallCheck3(this,Root2),(_=_callSuper(this,Root2,[e])).type="root",_.nodes||(_.nodes=[]),_}return _inherits(Root2,e),_createClass3(Root2,[{key:"normalize",value:function(e,_,S){var k=_superPropGet(Root2,"normalize",this,3)([e]);if(_)if("prepend"===S)this.nodes.length>1?_.raws.before=this.nodes[1].raws.before:delete _.raws.before;else if(this.first!==_){var E,T=_createForOfIteratorHelper2(k);try{for(T.s();!(E=T.n()).done;){E.value.raws.before=_.raws.before}}catch(M){T.e(M)}finally{T.f()}}return k}},{key:"removeChild",value:function(e,_){var S=this.index(e);return!_&&0===S&&this.nodes.length>1&&(this.nodes[1].raws.before=this.nodes[S].raws.before),_superPropGet(Root2,"removeChild",this,3)([e])}},{key:"toResult",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new ba(new Sa,this,e).stringify()}}])}(wa);xa.registerLazyResult=function(e){ba=e},xa.registerProcessor=function(e){Sa=e};var ka=xa;xa.default=xa,wa.registerRoot(xa);var Ca={comma:function(e){return Ca.split(e,[","],!0)},space:function(e){return Ca.split(e,[" ","\n","\t"])},split:function(e,_,S){var k,E=[],T="",M=!1,I=0,R=!1,O="",D=!1,L=_createForOfIteratorHelper2(e);try{for(L.s();!(k=L.n()).done;){var U=k.value;D?D=!1:"\\"===U?D=!0:R?U===O&&(R=!1):'"'===U||"'"===U?(R=!0,O=U):"("===U?I+=1:")"===U?I>0&&(I-=1):0===I&&_.includes(U)&&(M=!0),M?(""!==T&&E.push(T.trim()),T="",M=!1):T+=U}}catch(B){L.e(B)}finally{L.f()}return(S||""!==T)&&E.push(T.trim()),E}},Aa=Ca;Ca.default=Ca;var Ea=Bi,Ta=Aa,Ma=function(e){function Rule2(e){var _;return _classCallCheck3(this,Rule2),(_=_callSuper(this,Rule2,[e])).type="rule",_.nodes||(_.nodes=[]),_}return _inherits(Rule2,e),_createClass3(Rule2,[{key:"selectors",get:function(){return Ta.comma(this.selector)},set:function(e){var _=this.selector?this.selector.match(/,\s*/):null,S=_?_[0]:","+this.raw("between","beforeOpen");this.selector=e.join(S)}}])}(Ea),Ia=Ma;Ma.default=Ma,Ea.registerRule(Ma);var Ra=qn,tokenizer22=function(e){var _,S,k,E,T,M,I,R,O,D,L=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},U=e.css.valueOf(),B=L.ignoreErrors,z=U.length,G=0,j=[],V=[];function unclosed(_){throw e.error("Unclosed "+_,G)}return{back:function(e){V.push(e)},endOfFile:function(){return 0===V.length&&G>=z},nextToken:function(e){if(V.length)return V.pop();if(!(G>=z)){var L=!!e&&e.ignoreUnclosed;switch(_=U.charCodeAt(G)){case Zi:case $i:case ta:case ra:case ea:S=G;do{S+=1,_=U.charCodeAt(S)}while(_===$i||_===Zi||_===ta||_===ra||_===ea);D=["space",U.slice(G,S)],G=S-1;break;case na:case ia:case sa:case ua:case ha:case la:case oa:var H=String.fromCharCode(_);D=[H,H,G];break;case aa:if(R=j.length?j.pop()[1]:"",O=U.charCodeAt(G+1),"url"===R&&O!==Yi&&O!==Ki&&O!==$i&&O!==Zi&&O!==ta&&O!==ea&&O!==ra){S=G;do{if(M=!1,-1===(S=U.indexOf(")",S+1))){if(B||L){S=G;break}unclosed("bracket")}for(I=S;U.charCodeAt(I-1)===Ji;)I-=1,M=!M}while(M);D=["brackets",U.slice(G,S+1),G,S],G=S}else S=U.indexOf(")",G+1),E=U.slice(G,S+1),-1===S||va.test(E)?D=["(","(",G]:(D=["brackets",E,G,S],G=S);break;case Yi:case Ki:k=_===Yi?"'":'"',S=G;do{if(M=!1,-1===(S=U.indexOf(k,S+1))){if(B||L){S=G+1;break}unclosed("string")}for(I=S;U.charCodeAt(I-1)===Ji;)I-=1,M=!M}while(M);D=["string",U.slice(G,S+1),G,S],G=S;break;case da:fa.lastIndex=G+1,fa.test(U),S=0===fa.lastIndex?U.length-1:fa.lastIndex-2,D=["at-word",U.slice(G,S+1),G,S],G=S;break;case Ji:for(S=G,T=!0;U.charCodeAt(S+1)===Ji;)S+=1,T=!T;if(_=U.charCodeAt(S+1),T&&_!==Qi&&_!==$i&&_!==Zi&&_!==ta&&_!==ra&&_!==ea&&(S+=1,ga.test(U.charAt(S)))){for(;ga.test(U.charAt(S+1));)S+=1;U.charCodeAt(S+1)===$i&&(S+=1)}D=["word",U.slice(G,S+1),G,S],G=S;break;default:_===Qi&&U.charCodeAt(G+1)===ca?(0===(S=U.indexOf("*/",G+2)+1)&&(B||L?S=U.length:unclosed("comment")),D=["comment",U.slice(G,S+1),G,S],G=S):(pa.lastIndex=G+1,pa.test(U),S=0===pa.lastIndex?U.length-1:pa.lastIndex-2,D=["word",U.slice(G,S+1),G,S],j.push(D),G=S)}return G++,D}},position:function(){return G}}},Pa=Ti,Oa=_a,Da=ka,La=Ia,Fa={empty:!0,space:!0};var Ua=function(){return _createClass3(function Parser2(e){_classCallCheck3(this,Parser2),this.input=e,this.root=new Da,this.current=this.root,this.spaces="",this.semicolon=!1,this.createTokenizer(),this.root.source={input:e,start:{column:1,line:1,offset:0}}},[{key:"atrule",value:function(e){var _,S,k,E=new Oa;E.name=e[1].slice(1),""===E.name&&this.unnamedAtrule(E,e),this.init(E,e[2]);for(var T=!1,M=!1,I=[],R=[];!this.tokenizer.endOfFile();){if("("===(_=(e=this.tokenizer.nextToken())[0])||"["===_?R.push("("===_?")":"]"):"{"===_&&R.length>0?R.push("}"):_===R[R.length-1]&&R.pop(),0===R.length){if(";"===_){E.source.end=this.getPosition(e[2]),E.source.end.offset++,this.semicolon=!0;break}if("{"===_){M=!0;break}if("}"===_){if(I.length>0){for(S=I[k=I.length-1];S&&"space"===S[0];)S=I[--k];S&&(E.source.end=this.getPosition(S[3]||S[2]),E.source.end.offset++)}this.end(e);break}I.push(e)}else I.push(e);if(this.tokenizer.endOfFile()){T=!0;break}}E.raws.between=this.spacesAndCommentsFromEnd(I),I.length?(E.raws.afterName=this.spacesAndCommentsFromStart(I),this.raw(E,"params",I),T&&(e=I[I.length-1],E.source.end=this.getPosition(e[3]||e[2]),E.source.end.offset++,this.spaces=E.raws.between,E.raws.between="")):(E.raws.afterName="",E.params=""),M&&(E.nodes=[],this.current=E)}},{key:"checkMissedSemicolon",value:function(e){var _=this.colon(e);if(!1!==_){for(var S,k=0,E=_-1;E>=0&&("space"===(S=e[E])[0]||2!==(k+=1));E--);throw this.input.error("Missed semicolon","word"===S[0]?S[3]+1:S[2])}}},{key:"colon",value:function(e){var _,S,k,E,T=0,M=_createForOfIteratorHelper2(e.entries());try{for(M.s();!(E=M.n()).done;){var I=_slicedToArray(E.value,2),R=I[0];if("("===(S=(_=I[1])[0])&&(T+=1),")"===S&&(T-=1),0===T&&":"===S){if(k){if("word"===k[0]&&"progid"===k[1])continue;return R}this.doubleColon(_)}k=_}}catch(O){M.e(O)}finally{M.f()}return!1}},{key:"comment",value:function(e){var _=new Pa;this.init(_,e[2]),_.source.end=this.getPosition(e[3]||e[2]),_.source.end.offset++;var S=e[1].slice(2,-2);if(/^\s*$/.test(S))_.text="",_.raws.left=S,_.raws.right="";else{var k=S.match(/^(\s*)([^]*\S)(\s*)$/);_.text=k[2],_.raws.left=k[1],_.raws.right=k[3]}}},{key:"createTokenizer",value:function(){this.tokenizer=tokenizer22(this.input)}},{key:"decl",value:function(e,_){var S=new Ra;this.init(S,e[0][2]);var k,E=e[e.length-1];for(";"===E[0]&&(this.semicolon=!0,e.pop()),S.source.end=this.getPosition(E[3]||E[2]||function(e){for(var _=e.length-1;_>=0;_--){var S=e[_],k=S[3]||S[2];if(k)return k}}(e)),S.source.end.offset++;"word"!==e[0][0];)1===e.length&&this.unknownWord(e),S.raws.before+=e.shift()[1];for(S.source.start=this.getPosition(e[0][2]),S.prop="";e.length;){var T=e[0][0];if(":"===T||"space"===T||"comment"===T)break;S.prop+=e.shift()[1]}for(S.raws.between="";e.length;){if(":"===(k=e.shift())[0]){S.raws.between+=k[1];break}"word"===k[0]&&/\w/.test(k[1])&&this.unknownWord([k]),S.raws.between+=k[1]}"_"!==S.prop[0]&&"*"!==S.prop[0]||(S.raws.before+=S.prop[0],S.prop=S.prop.slice(1));for(var M,I=[];e.length&&("space"===(M=e[0][0])||"comment"===M);)I.push(e.shift());this.precheckMissedSemicolon(e);for(var R=e.length-1;R>=0;R--){if("!important"===(k=e[R])[1].toLowerCase()){S.important=!0;var O=this.stringFrom(e,R);" !important"!==(O=this.spacesFromEnd(e)+O)&&(S.raws.important=O);break}if("important"===k[1].toLowerCase()){for(var D=e.slice(0),L="",U=R;U>0;U--){var B=D[U][0];if(0===L.trim().indexOf("!")&&"space"!==B)break;L=D.pop()[1]+L}0===L.trim().indexOf("!")&&(S.important=!0,S.raws.important=L,e=D)}if("space"!==k[0]&&"comment"!==k[0])break}var z=e.some(function(e){return"space"!==e[0]&&"comment"!==e[0]});z&&(S.raws.between+=I.map(function(e){return e[1]}).join(""),I=[]),this.raw(S,"value",I.concat(e),_),S.value.includes(":")&&!_&&this.checkMissedSemicolon(e)}},{key:"doubleColon",value:function(e){throw this.input.error("Double colon",{offset:e[2]},{offset:e[2]+e[1].length})}},{key:"emptyRule",value:function(e){var _=new La;this.init(_,e[2]),_.selector="",_.raws.between="",this.current=_}},{key:"end",value:function(e){this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.semicolon=!1,this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.spaces="",this.current.parent?(this.current.source.end=this.getPosition(e[2]),this.current.source.end.offset++,this.current=this.current.parent):this.unexpectedClose(e)}},{key:"endFile",value:function(){this.current.parent&&this.unclosedBlock(),this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.root.source.end=this.getPosition(this.tokenizer.position())}},{key:"freeSemicolon",value:function(e){if(this.spaces+=e[1],this.current.nodes){var _=this.current.nodes[this.current.nodes.length-1];_&&"rule"===_.type&&!_.raws.ownSemicolon&&(_.raws.ownSemicolon=this.spaces,this.spaces="")}}},{key:"getPosition",value:function(e){var _=this.input.fromOffset(e);return{column:_.col,line:_.line,offset:e}}},{key:"init",value:function(e,_){this.current.push(e),e.source={input:this.input,start:this.getPosition(_)},e.raws.before=this.spaces,this.spaces="","comment"!==e.type&&(this.semicolon=!1)}},{key:"other",value:function(e){for(var _=!1,S=null,k=!1,E=null,T=[],M=e[1].startsWith("--"),I=[],R=e;R;){if(S=R[0],I.push(R),"("===S||"["===S)E||(E=R),T.push("("===S?")":"]");else if(M&&k&&"{"===S)E||(E=R),T.push("}");else if(0===T.length){if(";"===S){if(k)return void this.decl(I,M);break}if("{"===S)return void this.rule(I);if("}"===S){this.tokenizer.back(I.pop()),_=!0;break}":"===S&&(k=!0)}else S===T[T.length-1]&&(T.pop(),0===T.length&&(E=null));R=this.tokenizer.nextToken()}if(this.tokenizer.endOfFile()&&(_=!0),T.length>0&&this.unclosedBracket(E),_&&k){if(!M)for(;I.length&&("space"===(R=I[I.length-1][0])||"comment"===R);)this.tokenizer.back(I.pop());this.decl(I,M)}else this.unknownWord(I)}},{key:"parse",value:function(){for(var e;!this.tokenizer.endOfFile();)switch((e=this.tokenizer.nextToken())[0]){case"space":this.spaces+=e[1];break;case";":this.freeSemicolon(e);break;case"}":this.end(e);break;case"comment":this.comment(e);break;case"at-word":this.atrule(e);break;case"{":this.emptyRule(e);break;default:this.other(e)}this.endFile()}},{key:"precheckMissedSemicolon",value:function(){}},{key:"raw",value:function(e,_,S,k){for(var E,T,M,I,R=S.length,O="",D=!0,L=0;L<R;L+=1)"space"!==(T=(E=S[L])[0])||L!==R-1||k?"comment"===T?(I=S[L-1]?S[L-1][0]:"empty",M=S[L+1]?S[L+1][0]:"empty",Fa[I]||Fa[M]||","===O.slice(-1)?D=!1:O+=E[1]):O+=E[1]:D=!1;if(!D){var U=S.reduce(function(e,_){return e+_[1]},"");e.raws[_]={raw:U,value:O}}e[_]=O}},{key:"rule",value:function(e){e.pop();var _=new La;this.init(_,e[0][2]),_.raws.between=this.spacesAndCommentsFromEnd(e),this.raw(_,"selector",e),this.current=_}},{key:"spacesAndCommentsFromEnd",value:function(e){for(var _,S="";e.length&&("space"===(_=e[e.length-1][0])||"comment"===_);)S=e.pop()[1]+S;return S}},{key:"spacesAndCommentsFromStart",value:function(e){for(var _,S="";e.length&&("space"===(_=e[0][0])||"comment"===_);)S+=e.shift()[1];return S}},{key:"spacesFromEnd",value:function(e){for(var _="";e.length&&"space"===e[e.length-1][0];)_=e.pop()[1]+_;return _}},{key:"stringFrom",value:function(e,_){for(var S="",k=_;k<e.length;k++)S+=e[k][1];return e.splice(_,e.length-_),S}},{key:"unclosedBlock",value:function(){var e=this.current.source.start;throw this.input.error("Unclosed block",e.line,e.column)}},{key:"unclosedBracket",value:function(e){throw this.input.error("Unclosed bracket",{offset:e[2]},{offset:e[2]+1})}},{key:"unexpectedClose",value:function(e){throw this.input.error("Unexpected }",{offset:e[2]},{offset:e[2]+1})}},{key:"unknownWord",value:function(e){throw this.input.error("Unknown word",{offset:e[0][2]},{offset:e[0][2]+e[0][1].length})}},{key:"unnamedAtrule",value:function(e,_){throw this.input.error("At-rule without name",{offset:_[2]},{offset:_[2]+_[1].length})}}])}(),Ba=Bi,Na=Ua,za=vi;function parse$3(e,_){var S=new za(e,_),k=new Na(S);try{k.parse()}catch(E){throw E}return k.root}var Ga=parse$3;parse$3.default=parse$3,Ba.registerParse(parse$3);var ja=Pn.isClean,Va=Pn.my,Ha=Ai,Wa=Un,qa=Bi,Xa=ji,Ya=Xi,Ka=Ga,Ja=ka,Qa={atrule:"AtRule",comment:"Comment",decl:"Declaration",document:"Document",root:"Root",rule:"Rule"},Za={AtRule:!0,AtRuleExit:!0,Comment:!0,CommentExit:!0,Declaration:!0,DeclarationExit:!0,Document:!0,DocumentExit:!0,Once:!0,OnceExit:!0,postcssPlugin:!0,prepare:!0,Root:!0,RootExit:!0,Rule:!0,RuleExit:!0},$a={Once:!0,postcssPlugin:!0,prepare:!0};function isPromise(e){return"object"===_typeof3(e)&&"function"==typeof e.then}function getEvents(e){var _=!1,S=Qa[e.type];return"decl"===e.type?_=e.prop.toLowerCase():"atrule"===e.type&&(_=e.name.toLowerCase()),_&&e.append?[S,S+"-"+_,0,S+"Exit",S+"Exit-"+_]:_?[S,S+"-"+_,S+"Exit",S+"Exit-"+_]:e.append?[S,0,S+"Exit"]:[S,S+"Exit"]}function toStack(e){return{eventIndex:0,events:"document"===e.type?["Document",0,"DocumentExit"]:"root"===e.type?["Root",0,"RootExit"]:getEvents(e),iterator:0,node:e,visitorIndex:0,visitors:[]}}function cleanMarks(e){return e[ja]=!1,e.nodes&&e.nodes.forEach(function(e){return cleanMarks(e)}),e}var eo={},to=function(){return _createClass3(function LazyResult2(e,_,S){var k,E=this;if(_classCallCheck3(this,LazyResult2),this.stringified=!1,this.processed=!1,"object"!==_typeof3(_)||null===_||"root"!==_.type&&"document"!==_.type)if(_ instanceof LazyResult2||_ instanceof Ya)k=cleanMarks(_.root),_.map&&(void 0===S.map&&(S.map={}),S.map.inline||(S.map.inline=!1),S.map.prev=_.map);else{var T=Ka;S.syntax&&(T=S.syntax.parse),S.parser&&(T=S.parser),T.parse&&(T=T.parse);try{k=T(_,S)}catch(M){this.processed=!0,this.error=M}k&&!k[Va]&&qa.rebuild(k)}else k=cleanMarks(_);this.result=new Ya(e,k,S),this.helpers=_objectSpread2(_objectSpread2({},eo),{},{postcss:eo,result:this.result}),this.plugins=this.processor.plugins.map(function(e){return"object"===_typeof3(e)&&e.prepare?_objectSpread2(_objectSpread2({},e),e.prepare(E.result)):e})},[{key:"async",value:function(){return this.error?Promise.reject(this.error):this.processed?Promise.resolve(this.result):(this.processing||(this.processing=this.runAsync()),this.processing)}},{key:"catch",value:function(e){return this.async().catch(e)}},{key:"finally",value:function(e){return this.async().then(e,e)}},{key:"getAsyncError",value:function(){throw new Error("Use process(css).then(cb) to work with async plugins")}},{key:"handleError",value:function(e,_){var S=this.result.lastPlugin;try{_&&_.addToError(e),this.error=e,"CssSyntaxError"!==e.name||e.plugin?S.postcssVersion:(e.plugin=S.postcssPlugin,e.setMessage())}catch(k){console&&console.error}return e}},{key:"prepareVisitors",value:function(){var e=this;this.listeners={};var _,add=function(_,S,k){e.listeners[S]||(e.listeners[S]=[]),e.listeners[S].push([_,k])},S=_createForOfIteratorHelper2(this.plugins);try{for(S.s();!(_=S.n()).done;){var k=_.value;if("object"===_typeof3(k))for(var E in k){if(!Za[E]&&/^[A-Z]/.test(E))throw new Error("Unknown event ".concat(E," in ").concat(k.postcssPlugin,". Try to update PostCSS (").concat(this.processor.version," now)."));if(!$a[E])if("object"===_typeof3(k[E]))for(var T in k[E])add(k,"*"===T?E:E+"-"+T.toLowerCase(),k[E][T]);else"function"==typeof k[E]&&add(k,E,k[E])}}}catch(M){S.e(M)}finally{S.f()}this.hasListener=Object.keys(this.listeners).length>0}},{key:"runAsync",value:(e=_asyncToGenerator(_regenerator().m(function _callee30(){var e,_,S,k,E,T,M,I,R,O,D,L,U,B=this;return _regenerator().w(function(z){for(;;)switch(z.p=z.n){case 0:this.plugin=0,e=0;case 1:if(!(e<this.plugins.length)){z.n=6;break}if(_=this.plugins[e],!isPromise(S=this.runOnRoot(_))){z.n=5;break}return z.p=2,z.n=3,S;case 3:z.n=5;break;case 4:throw z.p=4,D=z.v,this.handleError(D);case 5:e++,z.n=1;break;case 6:if(this.prepareVisitors(),!this.hasListener){z.n=21;break}k=this.result.root;case 7:if(k[ja]){z.n=14;break}k[ja]=!0,E=[toStack(k)];case 8:if(!(E.length>0)){z.n=13;break}if(!isPromise(T=this.visitTick(E))){z.n=12;break}return z.p=9,z.n=10,T;case 10:z.n=12;break;case 11:throw z.p=11,L=z.v,M=E[E.length-1].node,this.handleError(L,M);case 12:z.n=8;break;case 13:z.n=7;break;case 14:if(!this.listeners.OnceExit){z.n=21;break}I=_createForOfIteratorHelper2(this.listeners.OnceExit),z.p=15,O=_regenerator().m(function _loop4(){var e,_,S,E,T;return _regenerator().w(function(M){for(;;)switch(M.p=M.n){case 0:if(e=_slicedToArray(R.value,2),_=e[0],S=e[1],B.result.lastPlugin=_,M.p=1,"document"!==k.type){M.n=3;break}return E=k.nodes.map(function(e){return S(e,B.helpers)}),M.n=2,Promise.all(E);case 2:M.n=4;break;case 3:return M.n=4,S(k,B.helpers);case 4:M.n=6;break;case 5:throw M.p=5,T=M.v,B.handleError(T);case 6:return M.a(2)}},_loop4,null,[[1,5]])}),I.s();case 16:if((R=I.n()).done){z.n=18;break}return z.d(_regeneratorValues(O()),17);case 17:z.n=16;break;case 18:z.n=20;break;case 19:z.p=19,U=z.v,I.e(U);case 20:return z.p=20,I.f(),z.f(20);case 21:return this.processed=!0,z.a(2,this.stringify())}},_callee30,this,[[15,19,20,21],[9,11],[2,4]])})),function(){return e.apply(this,arguments)})},{key:"runOnRoot",value:function(e){var _=this;this.result.lastPlugin=e;try{if("object"===_typeof3(e)&&e.Once){if("document"===this.result.root.type){var S=this.result.root.nodes.map(function(S){return e.Once(S,_.helpers)});return isPromise(S[0])?Promise.all(S):S}return e.Once(this.result.root,this.helpers)}if("function"==typeof e)return e(this.result.root,this.result)}catch(k){throw this.handleError(k)}}},{key:"stringify",value:function(){if(this.error)throw this.error;if(this.stringified)return this.result;this.stringified=!0,this.sync();var e=this.result.opts,_=Wa;e.syntax&&(_=e.syntax.stringify),e.stringifier&&(_=e.stringifier),_.stringify&&(_=_.stringify);var S=new Ha(_,this.result.root,this.result.opts).generate();return this.result.css=S[0],this.result.map=S[1],this.result}},{key:"sync",value:function(){if(this.error)throw this.error;if(this.processed)return this.result;if(this.processed=!0,this.processing)throw this.getAsyncError();var e,_=_createForOfIteratorHelper2(this.plugins);try{for(_.s();!(e=_.n()).done;){var S=e.value;if(isPromise(this.runOnRoot(S)))throw this.getAsyncError()}}catch(I){_.e(I)}finally{_.f()}if(this.prepareVisitors(),this.hasListener){for(var k=this.result.root;!k[ja];)k[ja]=!0,this.walkSync(k);if(this.listeners.OnceExit)if("document"===k.type){var E,T=_createForOfIteratorHelper2(k.nodes);try{for(T.s();!(E=T.n()).done;){var M=E.value;this.visitSync(this.listeners.OnceExit,M)}}catch(I){T.e(I)}finally{T.f()}}else this.visitSync(this.listeners.OnceExit,k)}return this.result}},{key:"then",value:function(e,_){return this.async().then(e,_)}},{key:"toString",value:function(){return this.css}},{key:"visitSync",value:function(e,_){var S,k=_createForOfIteratorHelper2(e);try{for(k.s();!(S=k.n()).done;){var E=_slicedToArray(S.value,2),T=E[0],M=E[1];this.result.lastPlugin=T;var I=void 0;try{I=M(_,this.helpers)}catch(R){throw this.handleError(R,_.proxyOf)}if("root"!==_.type&&"document"!==_.type&&!_.parent)return!0;if(isPromise(I))throw this.getAsyncError()}}catch(O){k.e(O)}finally{k.f()}}},{key:"visitTick",value:function(e){var _=e[e.length-1],S=_.node,k=_.visitors;if("root"===S.type||"document"===S.type||S.parent){if(k.length>0&&_.visitorIndex<k.length){var E=_slicedToArray(k[_.visitorIndex],2),T=E[0],M=E[1];_.visitorIndex+=1,_.visitorIndex===k.length&&(_.visitors=[],_.visitorIndex=0),this.result.lastPlugin=T;try{return M(S.toProxy(),this.helpers)}catch(L){throw this.handleError(L,S)}}if(0!==_.iterator){for(var I,R=_.iterator;I=S.nodes[S.indexes[R]];)if(S.indexes[R]+=1,!I[ja])return I[ja]=!0,void e.push(toStack(I));_.iterator=0,delete S.indexes[R]}for(var O=_.events;_.eventIndex<O.length;){var D=O[_.eventIndex];if(_.eventIndex+=1,0===D)return void(S.nodes&&S.nodes.length&&(S[ja]=!0,_.iterator=S.getIterator()));if(this.listeners[D])return void(_.visitors=this.listeners[D])}e.pop()}else e.pop()}},{key:"walkSync",value:function(e){var _=this;e[ja]=!0;var S,k=_createForOfIteratorHelper2(getEvents(e));try{for(k.s();!(S=k.n()).done;){var E=S.value;if(0===E)e.nodes&&e.each(function(e){e[ja]||_.walkSync(e)});else{var T=this.listeners[E];if(T&&this.visitSync(T,e.toProxy()))return}}}catch(M){k.e(M)}finally{k.f()}}},{key:"warnings",value:function(){return this.sync().warnings()}},{key:"content",get:function(){return this.stringify().content}},{key:"css",get:function(){return this.stringify().css}},{key:"map",get:function(){return this.stringify().map}},{key:"messages",get:function(){return this.sync().messages}},{key:"opts",get:function(){return this.result.opts}},{key:"processor",get:function(){return this.result.processor}},{key:"root",get:function(){return this.sync().root}},{key:Symbol.toStringTag,get:function(){return"LazyResult"}}]);var e}();to.registerPostcss=function(e){eo=e};var ro=to;to.default=to,Ja.registerLazyResult(to),Xa.registerLazyResult(to);var no=Ai,io=Un,ao=Ga,oo=Xi,so=function(){return _createClass3(function NoWorkResult2(e,_,S){var k;_classCallCheck3(this,NoWorkResult2),_=_.toString(),this.stringified=!1,this._processor=e,this._css=_,this._opts=S,this._map=void 0;var E=io;this.result=new oo(this._processor,k,this._opts),this.result.css=_;var T=this;Object.defineProperty(this.result,"root",{get:function(){return T.root}});var M=new no(E,k,this._opts,_);if(M.isMap()){var I=_slicedToArray(M.generate(),2),R=I[0],O=I[1];R&&(this.result.css=R),O&&(this.result.map=O)}else M.clearAnnotation(),this.result.css=M.css},[{key:"async",value:function(){return this.error?Promise.reject(this.error):Promise.resolve(this.result)}},{key:"catch",value:function(e){return this.async().catch(e)}},{key:"finally",value:function(e){return this.async().then(e,e)}},{key:"sync",value:function(){if(this.error)throw this.error;return this.result}},{key:"then",value:function(e,_){return this.async().then(e,_)}},{key:"toString",value:function(){return this._css}},{key:"warnings",value:function(){return[]}},{key:"content",get:function(){return this.result.css}},{key:"css",get:function(){return this.result.css}},{key:"map",get:function(){return this.result.map}},{key:"messages",get:function(){return[]}},{key:"opts",get:function(){return this.result.opts}},{key:"processor",get:function(){return this.result.processor}},{key:"root",get:function(){if(this._root)return this._root;var e,_=ao;try{e=_(this._css,this._opts)}catch(S){this.error=S}if(this.error)throw this.error;return this._root=e,e}},{key:Symbol.toStringTag,get:function(){return"NoWorkResult"}}])}(),uo=so;so.default=so;var lo=uo,co=ro,ho=ji,fo=ka,po=function(){return _createClass3(function Processor2(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];_classCallCheck3(this,Processor2),this.version="8.4.38",this.plugins=this.normalize(e)},[{key:"normalize",value:function(e){var _,S=[],k=_createForOfIteratorHelper2(e);try{for(k.s();!(_=k.n()).done;){var E=_.value;if(!0===E.postcss?E=E():E.postcss&&(E=E.postcss),"object"===_typeof3(E)&&Array.isArray(E.plugins))S=S.concat(E.plugins);else if("object"===_typeof3(E)&&E.postcssPlugin)S.push(E);else if("function"==typeof E)S.push(E);else if("object"!==_typeof3(E)||!E.parse&&!E.stringify)throw new Error(E+" is not a PostCSS plugin")}}catch(T){k.e(T)}finally{k.f()}return S}},{key:"process",value:function(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.plugins.length||_.parser||_.stringifier||_.syntax?new co(this,e,_):new lo(this,e,_)}},{key:"use",value:function(e){return this.plugins=this.plugins.concat(this.normalize([e])),this}}])}(),vo=po;po.default=po,fo.registerProcessor(po),ho.registerProcessor(po);var go=qn,mo=ei,yo=Ti,_o=_a,bo=vi,So=ka,wo=Ia;function fromJSON$1(e,_){if(Array.isArray(e))return e.map(function(e){return fromJSON$1(e)});var S=e.inputs,T=_objectWithoutProperties3(e,k);if(S){_=[];var M,I=_createForOfIteratorHelper2(S);try{for(I.s();!(M=I.n()).done;){var R=_objectSpread2(_objectSpread2({},M.value),{},{__proto__:bo.prototype});R.map&&(R.map=_objectSpread2(_objectSpread2({},R.map),{},{__proto__:mo.prototype})),_.push(R)}}catch(U){I.e(U)}finally{I.f()}}if(T.nodes&&(T.nodes=e.nodes.map(function(e){return fromJSON$1(e,_)})),T.source){var O=T.source,D=O.inputId,L=_objectWithoutProperties3(O,E);T.source=L,null!=D&&(T.source.input=_[D])}if("root"===T.type)return new So(T);if("decl"===T.type)return new go(T);if("rule"===T.type)return new wo(T);if("comment"===T.type)return new yo(T);if("atrule"===T.type)return new _o(T);throw new Error("Unknown node type: "+e.type)}var xo=fromJSON$1;fromJSON$1.default=fromJSON$1;var ko=Rn,Co=qn,Ao=ro,Eo=Bi,To=vo,Mo=Un,Io=xo,Ro=ji,Po=Hi,Oo=Ti,Do=_a,Lo=Xi,Fo=vi,Uo=Ga,Bo=Aa,No=Ia,zo=ka,Go=Hn;function postcss(){for(var e=arguments.length,_=new Array(e),S=0;S<e;S++)_[S]=arguments[S];return 1===_.length&&Array.isArray(_[0])&&(_=_[0]),new To(_)}postcss.plugin=function(e,_){var S,k=!1;function creator(){console&&console.warn&&!k&&(k=!0,M.LANG&&M.LANG.startsWith("cn"));var S=_.apply(void 0,arguments);return S.postcssPlugin=e,S.postcssVersion=(new To).version,S}return Object.defineProperty(creator,"postcss",{get:function(){return S||(S=creator()),S}}),creator.process=function(e,_,S){return postcss([creator(S)]).process(e,_)},creator},postcss.stringify=Mo,postcss.parse=Uo,postcss.fromJSON=Io,postcss.list=Bo,postcss.comment=function(e){return new Oo(e)},postcss.atRule=function(e){return new Do(e)},postcss.decl=function(e){return new Co(e)},postcss.rule=function(e){return new No(e)},postcss.root=function(e){return new zo(e)},postcss.document=function(e){return new Ro(e)},postcss.CssSyntaxError=ko,postcss.Declaration=Co,postcss.Container=Eo,postcss.Processor=To,postcss.Document=Ro,postcss.Comment=Oo,postcss.Warning=Po,postcss.AtRule=Do,postcss.Result=Lo,postcss.Input=Fo,postcss.Rule=No,postcss.Root=zo,postcss.Node=Go,Ao.registerPostcss(postcss);var jo=postcss;postcss.default=postcss;var Vo=getDefaultExportFromCjs(jo);Vo.stringify,Vo.fromJSON,Vo.plugin,Vo.parse,Vo.list,Vo.document,Vo.comment,Vo.atRule,Vo.rule,Vo.decl,Vo.root,Vo.CssSyntaxError,Vo.Declaration,Vo.Container,Vo.Processor,Vo.Document,Vo.Comment,Vo.Warning,Vo.AtRule,Vo.Result,Vo.Input,Vo.Rule,Vo.Root,Vo.Node;var Ho=function(){function BaseRRNode(){_classCallCheck3(this,BaseRRNode),__publicField2(this,"parentElement",null),__publicField2(this,"parentNode",null),__publicField2(this,"ownerDocument"),__publicField2(this,"firstChild",null),__publicField2(this,"lastChild",null),__publicField2(this,"previousSibling",null),__publicField2(this,"nextSibling",null),__publicField2(this,"ELEMENT_NODE",1),__publicField2(this,"TEXT_NODE",3),__publicField2(this,"nodeType"),__publicField2(this,"nodeName"),__publicField2(this,"RRNodeType")}return _createClass3(BaseRRNode,[{key:"childNodes",get:function(){for(var e=[],_=this.firstChild;_;)e.push(_),_=_.nextSibling;return e}},{key:"contains",value:function(e){if(!(e instanceof BaseRRNode))return!1;if(e.ownerDocument!==this.ownerDocument)return!1;if(e===this)return!0;for(;e.parentNode;){if(e.parentNode===this)return!0;e=e.parentNode}return!1}},{key:"appendChild",value:function(e){throw new Error("RRDomException: Failed to execute 'appendChild' on 'RRNode': This RRNode type does not support this method.")}},{key:"insertBefore",value:function(e,_){throw new Error("RRDomException: Failed to execute 'insertBefore' on 'RRNode': This RRNode type does not support this method.")}},{key:"removeChild",value:function(e){throw new Error("RRDomException: Failed to execute 'removeChild' on 'RRNode': This RRNode type does not support this method.")}},{key:"toString",value:function(){return"RRNode"}}])}(),Wo={Node:["childNodes","parentNode","parentElement","textContent"],ShadowRoot:["host","styleSheets"],Element:["shadowRoot","querySelector","querySelectorAll"],MutationObserver:[]},qo={Node:["contains","getRootNode"],ShadowRoot:["getSelection"],Element:[],MutationObserver:["constructor"]},Xo={};function getUntaintedPrototype(e){if(Xo[e])return Xo[e];var _=globalThis[e],S=_.prototype,k=e in Wo?Wo[e]:void 0,E=Boolean(k&&k.every(function(e){var _,k;return Boolean(null==(k=null==(_=Object.getOwnPropertyDescriptor(S,e))?void 0:_.get)?void 0:k.toString().includes("[native code]"))})),T=e in qo?qo[e]:void 0,M=Boolean(T&&T.every(function(e){var _;return"function"==typeof S[e]&&(null==(_=S[e])?void 0:_.toString().includes("[native code]"))}));if(E&&M)return Xo[e]=_.prototype,_.prototype;try{var I=document.createElement("iframe");document.body.appendChild(I);var R=I.contentWindow;if(!R)return _.prototype;var O=R[e].prototype;return document.body.removeChild(I),O?Xo[e]=O:S}catch(D){return S}}var Yo={};function getUntaintedAccessor(e,_,S){var k,E="".concat(e,".").concat(String(S));if(Yo[E])return Yo[E].call(_);var T=getUntaintedPrototype(e),M=null==(k=Object.getOwnPropertyDescriptor(T,S))?void 0:k.get;return M?(Yo[E]=M,M.call(_)):_[S]}var Ko={};function getUntaintedMethod(e,_,S){var k="".concat(e,".").concat(String(S));if(Ko[k])return Ko[k].bind(_);var E=getUntaintedPrototype(e)[S];return"function"!=typeof E?_[S]:(Ko[k]=E,E.bind(_))}function mutationObserverCtor(){return getUntaintedPrototype("MutationObserver").constructor}var Jo={childNodes:function(e){return getUntaintedAccessor("Node",e,"childNodes")},parentNode:function(e){return getUntaintedAccessor("Node",e,"parentNode")},parentElement:function(e){return getUntaintedAccessor("Node",e,"parentElement")},textContent:function(e){return getUntaintedAccessor("Node",e,"textContent")},contains:function(e,_){return getUntaintedMethod("Node",e,"contains")(_)},getRootNode:function(e){return getUntaintedMethod("Node",e,"getRootNode")()},host:function(e){return e&&"host"in e?getUntaintedAccessor("ShadowRoot",e,"host"):null},styleSheets:function(e){return e.styleSheets},shadowRoot:function(e){return e&&"shadowRoot"in e?getUntaintedAccessor("Element",e,"shadowRoot"):null},querySelector:function(e,_){return getUntaintedAccessor("Element",e,"querySelector")(_)},querySelectorAll:function(e,_){return getUntaintedAccessor("Element",e,"querySelectorAll")(_)},mutationObserver:mutationObserverCtor};function on(e,_){var S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document,k={capture:!0,passive:!0};return S.addEventListener(e,_,k),function(){return S.removeEventListener(e,_,k)}}var Qo={map:{},getId:function(){return-1},getNode:function(){return null},removeNodeFromMap:function(){},has:function(){return!1},reset:function(){}};function throttle(e,_){var S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},k=null,E=0;return function(){for(var T=arguments.length,M=new Array(T),I=0;I<T;I++)M[I]=arguments[I];var R=Date.now();E||!1!==S.leading||(E=R);var O=_-(R-E),D=this;O<=0||O>_?(k&&(clearTimeout(k),k=null),E=R,e.apply(D,M)):k||!1===S.trailing||(k=setTimeout(function(){E=!1===S.leading?0:Date.now(),k=null,e.apply(D,M)},O))}}function hookSetter(e,_,S,k){var E=arguments.length>4&&void 0!==arguments[4]?arguments[4]:window,T=E.Object.getOwnPropertyDescriptor(e,_);return E.Object.defineProperty(e,_,k?S:{set:function(e){var _=this;setTimeout(function(){S.set.call(_,e)},0),T&&T.set&&T.set.call(this,e)}}),function(){return hookSetter(e,_,T||{},!0)}}function patch(e,_,S){try{if(!(_ in e))return function(){};var k=e[_],E=S(k);return"function"==typeof E&&(E.prototype=E.prototype||{},Object.defineProperties(E,{__rrweb_original__:{enumerable:!1,value:k}})),e[_]=E,function(){e[_]=k}}catch(T){return function(){}}}"undefined"!=typeof window&&window.Proxy&&window.Reflect&&(Qo=new Proxy(Qo,{get:function(e,_,S){return Reflect.get(e,_,S)}}));var Zo=Date.now;function getWindowScroll(e){var _,S,k,E,T=e.document;return{left:T.scrollingElement?T.scrollingElement.scrollLeft:void 0!==e.pageXOffset?e.pageXOffset:T.documentElement.scrollLeft||(null==T?void 0:T.body)&&(null==(_=Jo.parentElement(T.body))?void 0:_.scrollLeft)||(null==(S=null==T?void 0:T.body)?void 0:S.scrollLeft)||0,top:T.scrollingElement?T.scrollingElement.scrollTop:void 0!==e.pageYOffset?e.pageYOffset:(null==T?void 0:T.documentElement.scrollTop)||(null==T?void 0:T.body)&&(null==(k=Jo.parentElement(T.body))?void 0:k.scrollTop)||(null==(E=null==T?void 0:T.body)?void 0:E.scrollTop)||0}}function getWindowHeight(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function getWindowWidth(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function closestElementOfNode(e){return e?e.nodeType===e.ELEMENT_NODE?e:Jo.parentElement(e):null}function isBlocked(e,_,S,k){if(!e)return!1;var E=closestElementOfNode(e);if(!E)return!1;try{if("string"==typeof _){if(E.classList.contains(_))return!0;if(k&&null!==E.closest("."+_))return!0}else if(classMatchesRegex(E,_,k))return!0}catch(T){}if(S){if(E.matches(S))return!0;if(k&&null!==E.closest(S))return!0}return!1}function isIgnored(e,_,S){return!("TITLE"!==e.tagName||!S.headTitleMutations)||-2===_.getId(e)}function isAncestorRemoved(e,_){if(isShadowRoot(e))return!1;var S=_.getId(e);if(!_.has(S))return!0;var k=Jo.parentNode(e);return(!k||k.nodeType!==e.DOCUMENT_NODE)&&(!k||isAncestorRemoved(k,_))}function legacy_isTouchEvent(e){return Boolean(e.changedTouches)}function isSerializedIframe(e,_){return Boolean("IFRAME"===e.nodeName&&_.getMeta(e))}function isSerializedStylesheet(e,_){return Boolean("LINK"===e.nodeName&&e.nodeType===e.ELEMENT_NODE&&e.getAttribute&&"stylesheet"===e.getAttribute("rel")&&_.getMeta(e))}function hasShadowRoot(e){return!!e&&(e instanceof Ho&&"shadowRoot"in e?Boolean(e.shadowRoot):Boolean(Jo.shadowRoot(e)))}/[1-9][0-9]{12}/.test(Date.now().toString())||(Zo=function(){return(new Date).getTime()});var $o=function(){return _createClass3(function StyleSheetMirror(){_classCallCheck3(this,StyleSheetMirror),__publicField(this,"id",1),__publicField(this,"styleIDMap",new WeakMap),__publicField(this,"idStyleMap",new Map)},[{key:"getId",value:function(e){var _;return null!==(_=this.styleIDMap.get(e))&&void 0!==_?_:-1}},{key:"has",value:function(e){return this.styleIDMap.has(e)}},{key:"add",value:function(e,_){return this.has(e)?this.getId(e):(S=void 0===_?this.id++:_,this.styleIDMap.set(e,S),this.idStyleMap.set(S,e),S);var S}},{key:"getStyle",value:function(e){return this.idStyleMap.get(e)||null}},{key:"reset",value:function(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}},{key:"generateId",value:function(){return this.id++}}])}();function getShadowHost(e){var _,S=null;return"getRootNode"in e&&(null==(_=Jo.getRootNode(e))?void 0:_.nodeType)===Node.DOCUMENT_FRAGMENT_NODE&&Jo.host(Jo.getRootNode(e))&&(S=Jo.host(Jo.getRootNode(e))),S}function shadowHostInDom(e){var _=e.ownerDocument;if(!_)return!1;var S=function(e){for(var _,S=e;_=getShadowHost(S);)S=_;return S}(e);return Jo.contains(_,S)}function inDom(e){var _=e.ownerDocument;return!!_&&(Jo.contains(_,e)||shadowHostInDom(e))}var es=function(e){return e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e}(es||{}),ts=function(e){return e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e[e.CustomElement=16]="CustomElement",e}(ts||{}),rs=function(e){return e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel",e}(rs||{}),ns=function(e){return e[e.Mouse=0]="Mouse",e[e.Pen=1]="Pen",e[e.Touch=2]="Touch",e}(ns||{}),is=function(e){return e[e["2D"]=0]="2D",e[e.WebGL=1]="WebGL",e[e.WebGL2=2]="WebGL2",e}(is||{}),as=function(e){return e[e.Play=0]="Play",e[e.Pause=1]="Pause",e[e.Seeked=2]="Seeked",e[e.VolumeChange=3]="VolumeChange",e[e.RateChange=4]="RateChange",e}(as||{});function isNodeInLinkedList(e){return"__ln"in e}var os,ss=function(){return _createClass3(function DoubleLinkedList(){_classCallCheck3(this,DoubleLinkedList),__publicField(this,"length",0),__publicField(this,"head",null),__publicField(this,"tail",null)},[{key:"get",value:function(e){if(e>=this.length)throw new Error("Position outside of list range");for(var _=this.head,S=0;S<e;S++)_=(null==_?void 0:_.next)||null;return _}},{key:"addNode",value:function(e){var _={value:e,previous:null,next:null};if(e.__ln=_,e.previousSibling&&isNodeInLinkedList(e.previousSibling)){var S=e.previousSibling.__ln.next;_.next=S,_.previous=e.previousSibling.__ln,e.previousSibling.__ln.next=_,S&&(S.previous=_)}else if(e.nextSibling&&isNodeInLinkedList(e.nextSibling)&&e.nextSibling.__ln.previous){var k=e.nextSibling.__ln.previous;_.previous=k,_.next=e.nextSibling.__ln,e.nextSibling.__ln.previous=_,k&&(k.next=_)}else this.head&&(this.head.previous=_),_.next=this.head,this.head=_;null===_.next&&(this.tail=_),this.length++}},{key:"removeNode",value:function(e){var _=e.__ln;this.head&&(_.previous?(_.previous.next=_.next,_.next?_.next.previous=_.previous:this.tail=_.previous):(this.head=_.next,this.head?this.head.previous=null:this.tail=null),e.__ln&&delete e.__ln,this.length--)}}])}(),moveKey=function(e,_){return"".concat(e,"@").concat(_)},us=function(){return _createClass3(function MutationBuffer(){var e=this;_classCallCheck3(this,MutationBuffer),__publicField(this,"frozen",!1),__publicField(this,"locked",!1),__publicField(this,"texts",[]),__publicField(this,"attributes",[]),__publicField(this,"attributeMap",new WeakMap),__publicField(this,"removes",[]),__publicField(this,"mapRemoves",[]),__publicField(this,"movedMap",{}),__publicField(this,"addedSet",new Set),__publicField(this,"movedSet",new Set),__publicField(this,"droppedSet",new Set),__publicField(this,"mutationCb"),__publicField(this,"blockClass"),__publicField(this,"blockSelector"),__publicField(this,"maskTextClass"),__publicField(this,"maskTextSelector"),__publicField(this,"inlineStylesheet"),__publicField(this,"maskInputOptions"),__publicField(this,"maskTextFn"),__publicField(this,"maskInputFn"),__publicField(this,"keepIframeSrcFn"),__publicField(this,"recordCanvas"),__publicField(this,"inlineImages"),__publicField(this,"slimDOMOptions"),__publicField(this,"dataURLOptions"),__publicField(this,"doc"),__publicField(this,"mirror"),__publicField(this,"iframeManager"),__publicField(this,"stylesheetManager"),__publicField(this,"shadowDomManager"),__publicField(this,"canvasManager"),__publicField(this,"processedNodeManager"),__publicField(this,"unattachedDoc"),__publicField(this,"processMutations",function(_){_.forEach(e.processMutation),e.emit()}),__publicField(this,"emit",function(){if(!e.frozen&&!e.locked){for(var _=[],S=new Set,k=new ss,getNextId=function(_){for(var S=_,k=-2;-2===k;)k=(S=S&&S.nextSibling)&&e.mirror.getId(S);return k},pushAdd=function(E){var T=Jo.parentNode(E);if(T&&inDom(E)&&"TEXTAREA"!==T.tagName){var M=isShadowRoot(T)?e.mirror.getId(getShadowHost(E)):e.mirror.getId(T),I=getNextId(E);if(-1===M||-1===I)return k.addNode(E);var R=serializeNodeWithId(E,{doc:e.doc,mirror:e.mirror,blockClass:e.blockClass,blockSelector:e.blockSelector,maskTextClass:e.maskTextClass,maskTextSelector:e.maskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:e.inlineStylesheet,maskInputOptions:e.maskInputOptions,maskTextFn:e.maskTextFn,maskInputFn:e.maskInputFn,slimDOMOptions:e.slimDOMOptions,dataURLOptions:e.dataURLOptions,recordCanvas:e.recordCanvas,inlineImages:e.inlineImages,onSerialize:function(_){isSerializedIframe(_,e.mirror)&&e.iframeManager.addIframe(_),isSerializedStylesheet(_,e.mirror)&&e.stylesheetManager.trackLinkElement(_),hasShadowRoot(E)&&e.shadowDomManager.addShadowRoot(Jo.shadowRoot(E),e.doc)},onIframeLoad:function(_,S){e.iframeManager.attachIframe(_,S),e.shadowDomManager.observeAttachShadow(_)},onStylesheetLoad:function(_,S){e.stylesheetManager.attachLinkElement(_,S)}});R&&(_.push({parentId:M,nextId:I,node:R}),S.add(R.id))}};e.mapRemoves.length;)e.mirror.removeNodeFromMap(e.mapRemoves.shift());var E,T=_createForOfIteratorHelper2(e.movedSet);try{for(T.s();!(E=T.n()).done;){var M=E.value;isParentRemoved(e.removes,M,e.mirror)&&!e.movedSet.has(Jo.parentNode(M))||pushAdd(M)}}catch(X){T.e(X)}finally{T.f()}var I,R=_createForOfIteratorHelper2(e.addedSet);try{for(R.s();!(I=R.n()).done;){var O=I.value;isAncestorInSet(e.droppedSet,O)||isParentRemoved(e.removes,O,e.mirror)?isAncestorInSet(e.movedSet,O)?pushAdd(O):e.droppedSet.add(O):pushAdd(O)}}catch(X){R.e(X)}finally{R.f()}for(var D=null;k.length;){var L=null;if(D){var U=e.mirror.getId(Jo.parentNode(D.value)),B=getNextId(D.value);-1!==U&&-1!==B&&(L=D)}if(!L)for(var z=k.tail;z;){var G=z;if(z=z.previous,G){var j=e.mirror.getId(Jo.parentNode(G.value));if(-1===getNextId(G.value))continue;if(-1!==j){L=G;break}var V=G.value,H=Jo.parentNode(V);if(H&&H.nodeType===Node.DOCUMENT_FRAGMENT_NODE){var W=Jo.host(H);if(-1!==e.mirror.getId(W)){L=G;break}}}}if(!L){for(;k.head;)k.removeNode(k.head.value);break}D=L.previous,k.removeNode(L.value),pushAdd(L.value)}var q={texts:e.texts.map(function(_){var S=_.node,k=Jo.parentNode(S);return k&&"TEXTAREA"===k.tagName&&e.genTextAreaValueMutation(k),{id:e.mirror.getId(S),value:_.value}}).filter(function(e){return!S.has(e.id)}).filter(function(_){return e.mirror.has(_.id)}),attributes:e.attributes.map(function(_){var S=_.attributes;if("string"==typeof S.style){var k=JSON.stringify(_.styleDiff),E=JSON.stringify(_._unchangedStyles);k.length<S.style.length&&(k+E).split("var(").length===S.style.split("var(").length&&(S.style=_.styleDiff)}return{id:e.mirror.getId(_.node),attributes:S}}).filter(function(e){return!S.has(e.id)}).filter(function(_){return e.mirror.has(_.id)}),removes:e.removes,adds:_};(q.texts.length||q.attributes.length||q.removes.length||q.adds.length)&&(e.texts=[],e.attributes=[],e.attributeMap=new WeakMap,e.removes=[],e.addedSet=new Set,e.movedSet=new Set,e.droppedSet=new Set,e.movedMap={},e.mutationCb(q))}}),__publicField(this,"genTextAreaValueMutation",function(_){var S=e.attributeMap.get(_);S||(S={node:_,attributes:{},styleDiff:{},_unchangedStyles:{}},e.attributes.push(S),e.attributeMap.set(_,S)),S.attributes.value=Array.from(Jo.childNodes(_),function(e){return Jo.textContent(e)||""}).join("")}),__publicField(this,"processMutation",function(_){if(!isIgnored(_.target,e.mirror,e.slimDOMOptions))switch(_.type){case"characterData":var S=Jo.textContent(_.target);isBlocked(_.target,e.blockClass,e.blockSelector,!1)||S===_.oldValue||e.texts.push({value:needMaskingText(_.target,e.maskTextClass,e.maskTextSelector,!0)&&S?e.maskTextFn?e.maskTextFn(S,closestElementOfNode(_.target)):S.replace(/[\S]/g,"*"):S,node:_.target});break;case"attributes":var k=_.target,E=_.attributeName,T=_.target.getAttribute(E);if("value"===E){var M=getInputType(k);T=maskInputValue({element:k,maskInputOptions:e.maskInputOptions,tagName:k.tagName,type:M,value:T,maskInputFn:e.maskInputFn})}if(isBlocked(_.target,e.blockClass,e.blockSelector,!1)||T===_.oldValue)return;var I=e.attributeMap.get(_.target);if("IFRAME"===k.tagName&&"src"===E&&!e.keepIframeSrcFn(T)){if(k.contentDocument)return;E="rr_src"}if(I||(I={node:_.target,attributes:{},styleDiff:{},_unchangedStyles:{}},e.attributes.push(I),e.attributeMap.set(_.target,I)),"type"===E&&"INPUT"===k.tagName&&"password"===(_.oldValue||"").toLowerCase()&&k.setAttribute("data-rr-is-password","true"),!ignoreAttribute(k.tagName,E))if(I.attributes[E]=transformAttribute(e.doc,toLowerCase(k.tagName),toLowerCase(E),T),"style"===E){if(!e.unattachedDoc)try{e.unattachedDoc=document.implementation.createHTMLDocument()}catch(V){e.unattachedDoc=e.doc}var R=e.unattachedDoc.createElement("span");_.oldValue&&R.setAttribute("style",_.oldValue);for(var O=0,D=Array.from(k.style);O<D.length;O++){var L=D[O],U=k.style.getPropertyValue(L),B=k.style.getPropertyPriority(L);U!==R.style.getPropertyValue(L)||B!==R.style.getPropertyPriority(L)?I.styleDiff[L]=""===B?U:[U,B]:I._unchangedStyles[L]=[U,B]}for(var z=0,G=Array.from(R.style);z<G.length;z++){var j=G[z];""===k.style.getPropertyValue(j)&&(I.styleDiff[j]=!1)}}else"open"===E&&"DIALOG"===k.tagName&&(k.matches("dialog:modal")?I.attributes.rr_open_mode="modal":I.attributes.rr_open_mode="non-modal");break;case"childList":if(isBlocked(_.target,e.blockClass,e.blockSelector,!0))return;if("TEXTAREA"===_.target.tagName)return void e.genTextAreaValueMutation(_.target);_.addedNodes.forEach(function(S){return e.genAdds(S,_.target)}),_.removedNodes.forEach(function(S){var k=e.mirror.getId(S),E=isShadowRoot(_.target)?e.mirror.getId(Jo.host(_.target)):e.mirror.getId(_.target);isBlocked(_.target,e.blockClass,e.blockSelector,!1)||isIgnored(S,e.mirror,e.slimDOMOptions)||!function(e,_){return-1!==_.getId(e)}(S,e.mirror)||(e.addedSet.has(S)?(deepDelete(e.addedSet,S),e.droppedSet.add(S)):e.addedSet.has(_.target)&&-1===k||isAncestorRemoved(_.target,e.mirror)||(e.movedSet.has(S)&&e.movedMap[moveKey(k,E)]?deepDelete(e.movedSet,S):e.removes.push({parentId:E,id:k,isShadow:!(!isShadowRoot(_.target)||!isNativeShadowDom(_.target))||void 0})),e.mapRemoves.push(S))})}}),__publicField(this,"genAdds",function(_,S){if(!e.processedNodeManager.inOtherBuffer(_,e)&&!e.addedSet.has(_)&&!e.movedSet.has(_)){if(e.mirror.hasNode(_)){if(isIgnored(_,e.mirror,e.slimDOMOptions))return;e.movedSet.add(_);var k=null;S&&e.mirror.hasNode(S)&&(k=e.mirror.getId(S)),k&&-1!==k&&(e.movedMap[moveKey(e.mirror.getId(_),k)]=!0)}else e.addedSet.add(_),e.droppedSet.delete(_);isBlocked(_,e.blockClass,e.blockSelector,!1)||(Jo.childNodes(_).forEach(function(_){return e.genAdds(_)}),hasShadowRoot(_)&&Jo.childNodes(Jo.shadowRoot(_)).forEach(function(S){e.processedNodeManager.add(S,e),e.genAdds(S,_)}))}})},[{key:"init",value:function(e){var _=this;["mutationCb","blockClass","blockSelector","maskTextClass","maskTextSelector","inlineStylesheet","maskInputOptions","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach(function(S){_[S]=e[S]})}},{key:"freeze",value:function(){this.frozen=!0,this.canvasManager.freeze()}},{key:"unfreeze",value:function(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}},{key:"isFrozen",value:function(){return this.frozen}},{key:"lock",value:function(){this.locked=!0,this.canvasManager.lock()}},{key:"unlock",value:function(){this.locked=!1,this.canvasManager.unlock(),this.emit()}},{key:"reset",value:function(){this.shadowDomManager.reset(),this.canvasManager.reset()}}])}();function deepDelete(e,_){e.delete(_),Jo.childNodes(_).forEach(function(_){return deepDelete(e,_)})}function isParentRemoved(e,_,S){return 0!==e.length&&function(e,_,S){var k,E=Jo.parentNode(_),_loop5=function(){var _=S.getId(E);if(e.some(function(e){return e.id===_}))return{v:!0};E=Jo.parentNode(E)};for(;E;)if(k=_loop5())return k.v;return!1}(e,_,S)}function isAncestorInSet(e,_){return 0!==e.size&&_isAncestorInSet(e,_)}function _isAncestorInSet(e,_){var S=Jo.parentNode(_);return!!S&&(!!e.has(S)||_isAncestorInSet(e,S))}var callbackWrapper=function(e){if(!os)return e;return function(){try{return e.apply(void 0,arguments)}catch(_){if(os&&!0===os(_))return;throw _}}},ls=[];function getEventTarget(e){try{if("composedPath"in e){var _=e.composedPath();if(_.length)return _[0]}else if("path"in e&&e.path.length)return e.path[0]}catch(S){}return e&&e.target}function initMutationObserver(e,_){var S=new us;ls.push(S),S.init(e);var k=new(mutationObserverCtor())(callbackWrapper(S.processMutations.bind(S)));return k.observe(_,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),k}function initMouseInteractionObserver(e){var _=e.mouseInteractionCb,S=e.doc,k=e.mirror,E=e.blockClass,T=e.blockSelector,M=e.sampling;if(!1===M.mouseInteraction)return function(){};var I=!0===M.mouseInteraction||void 0===M.mouseInteraction?{}:M.mouseInteraction,R=[],O=null;return Object.keys(rs).filter(function(e){return Number.isNaN(Number(e))&&!e.endsWith("_Departed")&&!1!==I[e]}).forEach(function(e){var M=toLowerCase(e),I=function(e){return function(S){var M=getEventTarget(S);if(!isBlocked(M,E,T,!0)){var I=null,R=e;if("pointerType"in S){switch(S.pointerType){case"mouse":I=ns.Mouse;break;case"touch":I=ns.Touch;break;case"pen":I=ns.Pen}I===ns.Touch?rs[e]===rs.MouseDown?R="TouchStart":rs[e]===rs.MouseUp&&(R="TouchEnd"):ns.Pen}else legacy_isTouchEvent(S)&&(I=ns.Touch);null!==I?(O=I,(R.startsWith("Touch")&&I===ns.Touch||R.startsWith("Mouse")&&I===ns.Mouse)&&(I=null)):rs[e]===rs.Click&&(I=O,O=null);var D=legacy_isTouchEvent(S)?S.changedTouches[0]:S;if(D){var L=k.getId(M),U=D.clientX,B=D.clientY;callbackWrapper(_)(_objectSpread2({type:rs[R],id:L,x:U,y:B},null!==I&&{pointerType:I}))}}}}(e);if(window.PointerEvent)switch(rs[e]){case rs.MouseDown:case rs.MouseUp:M=M.replace("mouse","pointer");break;case rs.TouchStart:case rs.TouchEnd:return}R.push(on(M,I,S))}),callbackWrapper(function(){R.forEach(function(e){return e()})})}function initScrollObserver(e){var _=e.scrollCb,S=e.doc,k=e.mirror,E=e.blockClass,T=e.blockSelector,M=e.sampling;return on("scroll",callbackWrapper(throttle(callbackWrapper(function(e){var M=getEventTarget(e);if(M&&!isBlocked(M,E,T,!0)){var I=k.getId(M);if(M===S&&S.defaultView){var R=getWindowScroll(S.defaultView);_({id:I,x:R.left,y:R.top})}else _({id:I,x:M.scrollLeft,y:M.scrollTop})}}),M.scroll||100)),S)}var cs=["INPUT","TEXTAREA","SELECT"],hs=new WeakMap;function getNestedCSSRulePositions(e){return function(e,_){if(hasNestedCSSRule("CSSGroupingRule")&&e.parentRule instanceof CSSGroupingRule||hasNestedCSSRule("CSSMediaRule")&&e.parentRule instanceof CSSMediaRule||hasNestedCSSRule("CSSSupportsRule")&&e.parentRule instanceof CSSSupportsRule||hasNestedCSSRule("CSSConditionRule")&&e.parentRule instanceof CSSConditionRule){var S=Array.from(e.parentRule.cssRules).indexOf(e);_.unshift(S)}else if(e.parentStyleSheet){var k=Array.from(e.parentStyleSheet.cssRules).indexOf(e);_.unshift(k)}return _}(e,[])}function getIdAndStyleId(e,_,S){var k,E;return e?(e.ownerNode?k=_.getId(e.ownerNode):E=S.getId(e),{styleId:E,id:k}):{}}function initAdoptedStyleSheetObserver(e,_){var S,k,E,T=e.mirror,M=e.stylesheetManager,I=null;I="#document"===_.nodeName?T.getId(_):T.getId(Jo.host(_));var R="#document"===_.nodeName?null==(S=_.defaultView)?void 0:S.Document:null==(E=null==(k=_.ownerDocument)?void 0:k.defaultView)?void 0:E.ShadowRoot,O=(null==R?void 0:R.prototype)?Object.getOwnPropertyDescriptor(null==R?void 0:R.prototype,"adoptedStyleSheets"):void 0;return null!==I&&-1!==I&&R&&O?(Object.defineProperty(_,"adoptedStyleSheets",{configurable:O.configurable,enumerable:O.enumerable,get:function(){var e;return null==(e=O.get)?void 0:e.call(this)},set:function(e){var _,S=null==(_=O.set)?void 0:_.call(this,e);if(null!==I&&-1!==I)try{M.adoptStyleSheets(e,I)}catch(k){}return S}}),callbackWrapper(function(){Object.defineProperty(_,"adoptedStyleSheets",{configurable:O.configurable,enumerable:O.enumerable,get:O.get,set:O.set})})):function(){}}function initObservers(e){var _,S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},k=e.doc.defaultView;if(!k)return function(){};!function(e,_){var S=e.mutationCb,k=e.mousemoveCb,E=e.mouseInteractionCb,T=e.scrollCb,M=e.viewportResizeCb,I=e.inputCb,R=e.mediaInteractionCb,O=e.styleSheetRuleCb,D=e.styleDeclarationCb,L=e.canvasMutationCb,U=e.fontCb,B=e.selectionCb,z=e.customElementCb;e.mutationCb=function(){_.mutation&&_.mutation.apply(_,arguments),S.apply(void 0,arguments)},e.mousemoveCb=function(){_.mousemove&&_.mousemove.apply(_,arguments),k.apply(void 0,arguments)},e.mouseInteractionCb=function(){_.mouseInteraction&&_.mouseInteraction.apply(_,arguments),E.apply(void 0,arguments)},e.scrollCb=function(){_.scroll&&_.scroll.apply(_,arguments),T.apply(void 0,arguments)},e.viewportResizeCb=function(){_.viewportResize&&_.viewportResize.apply(_,arguments),M.apply(void 0,arguments)},e.inputCb=function(){_.input&&_.input.apply(_,arguments),I.apply(void 0,arguments)},e.mediaInteractionCb=function(){_.mediaInteaction&&_.mediaInteaction.apply(_,arguments),R.apply(void 0,arguments)},e.styleSheetRuleCb=function(){_.styleSheetRule&&_.styleSheetRule.apply(_,arguments),O.apply(void 0,arguments)},e.styleDeclarationCb=function(){_.styleDeclaration&&_.styleDeclaration.apply(_,arguments),D.apply(void 0,arguments)},e.canvasMutationCb=function(){_.canvasMutation&&_.canvasMutation.apply(_,arguments),L.apply(void 0,arguments)},e.fontCb=function(){_.font&&_.font.apply(_,arguments),U.apply(void 0,arguments)},e.selectionCb=function(){_.selection&&_.selection.apply(_,arguments),B.apply(void 0,arguments)},e.customElementCb=function(){_.customElement&&_.customElement.apply(_,arguments),z.apply(void 0,arguments)}}(e,S),e.recordDOM&&(_=initMutationObserver(e,e.doc));var E,T,M,I,R,O=function(e){var _=e.mousemoveCb,S=e.sampling,k=e.doc,E=e.mirror;if(!1===S.mousemove)return function(){};var T,M="number"==typeof S.mousemove?S.mousemove:50,I="number"==typeof S.mousemoveCallback?S.mousemoveCallback:500,R=[],O=throttle(callbackWrapper(function(e){var S=Date.now()-T;_(R.map(function(e){return e.timeOffset-=S,e}),e),R=[],T=null}),I),D=callbackWrapper(throttle(callbackWrapper(function(e){var _=getEventTarget(e),S=legacy_isTouchEvent(e)?e.changedTouches[0]:e,k=S.clientX,M=S.clientY;T||(T=Zo()),R.push({x:k,y:M,id:E.getId(_),timeOffset:Zo()-T}),O("undefined"!=typeof DragEvent&&e instanceof DragEvent?ts.Drag:e instanceof MouseEvent?ts.MouseMove:ts.TouchMove)}),M,{trailing:!1})),L=[on("mousemove",D,k),on("touchmove",D,k),on("drag",D,k)];return callbackWrapper(function(){L.forEach(function(e){return e()})})}(e),D=initMouseInteractionObserver(e),L=initScrollObserver(e),U=(E={win:k},T=e.viewportResizeCb,M=E.win,I=-1,R=-1,on("resize",callbackWrapper(throttle(callbackWrapper(function(){var e=getWindowHeight(),_=getWindowWidth();I===e&&R===_||(T({width:Number(_),height:Number(e)}),I=e,R=_)}),200)),M)),B=function(e){var _=e.inputCb,S=e.doc,k=e.mirror,E=e.blockClass,T=e.blockSelector,M=e.ignoreClass,I=e.ignoreSelector,R=e.maskInputOptions,O=e.maskInputFn,D=e.sampling,L=e.userTriggeredOnInput;function eventHandler(e){var _=getEventTarget(e),k=e.isTrusted,D=_&&_.tagName;if(_&&"OPTION"===D&&(_=Jo.parentElement(_)),_&&D&&!(cs.indexOf(D)<0)&&!isBlocked(_,E,T,!0)&&!(_.classList.contains(M)||I&&_.matches(I))){var U=_.value,B=!1,z=getInputType(_)||"";"radio"===z||"checkbox"===z?B=_.checked:(R[D.toLowerCase()]||R[z])&&(U=maskInputValue({element:_,maskInputOptions:R,tagName:D,type:z,value:U,maskInputFn:O})),cbWithDedup(_,L?{text:U,isChecked:B,userTriggered:k}:{text:U,isChecked:B});var G=_.name;"radio"===z&&G&&B&&S.querySelectorAll('input[type="radio"][name="'.concat(G,'"]')).forEach(function(e){if(e!==_){var S=e.value;cbWithDedup(e,L?{text:S,isChecked:!B,userTriggered:!1}:{text:S,isChecked:!B})}})}}function cbWithDedup(e,S){var E=hs.get(e);if(!E||E.text!==S.text||E.isChecked!==S.isChecked){hs.set(e,S);var T=k.getId(e);callbackWrapper(_)(_objectSpread2(_objectSpread2({},S),{},{id:T}))}}var U=("last"===D.input?["change"]:["input","change"]).map(function(e){return on(e,callbackWrapper(eventHandler),S)}),B=S.defaultView;if(!B)return function(){U.forEach(function(e){return e()})};var z=B.Object.getOwnPropertyDescriptor(B.HTMLInputElement.prototype,"value"),G=[[B.HTMLInputElement.prototype,"value"],[B.HTMLInputElement.prototype,"checked"],[B.HTMLSelectElement.prototype,"value"],[B.HTMLTextAreaElement.prototype,"value"],[B.HTMLSelectElement.prototype,"selectedIndex"],[B.HTMLOptionElement.prototype,"selected"]];return z&&z.set&&U.push.apply(U,_toConsumableArray3(G.map(function(e){return hookSetter(e[0],e[1],{set:function(){callbackWrapper(eventHandler)({target:this,isTrusted:!1})}},!1,B)}))),callbackWrapper(function(){U.forEach(function(e){return e()})})}(e),z=function(e){var _=e.mediaInteractionCb,S=e.blockClass,k=e.blockSelector,E=e.mirror,T=e.sampling,M=e.doc,I=callbackWrapper(function(e){return throttle(callbackWrapper(function(T){var M=getEventTarget(T);if(M&&!isBlocked(M,S,k,!0)){var I=M.currentTime,R=M.volume,O=M.muted,D=M.playbackRate,L=M.loop;_({type:e,id:E.getId(M),currentTime:I,volume:R,muted:O,playbackRate:D,loop:L})}}),T.media||500)}),R=[on("play",I(as.Play),M),on("pause",I(as.Pause),M),on("seeked",I(as.Seeked),M),on("volumechange",I(as.VolumeChange),M),on("ratechange",I(as.RateChange),M)];return callbackWrapper(function(){R.forEach(function(e){return e()})})}(e),styleSheetObserver=function(){},adoptedStyleSheetObserver=function(){},styleDeclarationObserver=function(){},fontObserver=function(){};e.recordDOM&&(styleSheetObserver=function(e,_){var S=e.styleSheetRuleCb,k=e.mirror,E=e.stylesheetManager,T=_.win;if(!T.CSSStyleSheet||!T.CSSStyleSheet.prototype)return function(){};var M=T.CSSStyleSheet.prototype.insertRule;T.CSSStyleSheet.prototype.insertRule=new Proxy(M,{apply:callbackWrapper(function(e,_,T){var M=_slicedToArray(T,2),I=M[0],R=M[1],O=getIdAndStyleId(_,k,E.styleMirror),D=O.id,L=O.styleId;return(D&&-1!==D||L&&-1!==L)&&S({id:D,styleId:L,adds:[{rule:I,index:R}]}),e.apply(_,T)})}),T.CSSStyleSheet.prototype.addRule=function(e,_){var S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.cssRules.length,k="".concat(e," { ").concat(_," }");return T.CSSStyleSheet.prototype.insertRule.apply(this,[k,S])};var I,R,O=T.CSSStyleSheet.prototype.deleteRule;T.CSSStyleSheet.prototype.deleteRule=new Proxy(O,{apply:callbackWrapper(function(e,_,T){var M=_slicedToArray(T,1)[0],I=getIdAndStyleId(_,k,E.styleMirror),R=I.id,O=I.styleId;return(R&&-1!==R||O&&-1!==O)&&S({id:R,styleId:O,removes:[{index:M}]}),e.apply(_,T)})}),T.CSSStyleSheet.prototype.removeRule=function(e){return T.CSSStyleSheet.prototype.deleteRule.apply(this,[e])},T.CSSStyleSheet.prototype.replace&&(I=T.CSSStyleSheet.prototype.replace,T.CSSStyleSheet.prototype.replace=new Proxy(I,{apply:callbackWrapper(function(e,_,T){var M=_slicedToArray(T,1)[0],I=getIdAndStyleId(_,k,E.styleMirror),R=I.id,O=I.styleId;return(R&&-1!==R||O&&-1!==O)&&S({id:R,styleId:O,replace:M}),e.apply(_,T)})})),T.CSSStyleSheet.prototype.replaceSync&&(R=T.CSSStyleSheet.prototype.replaceSync,T.CSSStyleSheet.prototype.replaceSync=new Proxy(R,{apply:callbackWrapper(function(e,_,T){var M=_slicedToArray(T,1)[0],I=getIdAndStyleId(_,k,E.styleMirror),R=I.id,O=I.styleId;return(R&&-1!==R||O&&-1!==O)&&S({id:R,styleId:O,replaceSync:M}),e.apply(_,T)})}));var D={};canMonkeyPatchNestedCSSRule("CSSGroupingRule")?D.CSSGroupingRule=T.CSSGroupingRule:(canMonkeyPatchNestedCSSRule("CSSMediaRule")&&(D.CSSMediaRule=T.CSSMediaRule),canMonkeyPatchNestedCSSRule("CSSConditionRule")&&(D.CSSConditionRule=T.CSSConditionRule),canMonkeyPatchNestedCSSRule("CSSSupportsRule")&&(D.CSSSupportsRule=T.CSSSupportsRule));var L={};return Object.entries(D).forEach(function(e){var _=_slicedToArray(e,2),T=_[0],M=_[1];L[T]={insertRule:M.prototype.insertRule,deleteRule:M.prototype.deleteRule},M.prototype.insertRule=new Proxy(L[T].insertRule,{apply:callbackWrapper(function(e,_,T){var M=_slicedToArray(T,2),I=M[0],R=M[1],O=getIdAndStyleId(_.parentStyleSheet,k,E.styleMirror),D=O.id,L=O.styleId;return(D&&-1!==D||L&&-1!==L)&&S({id:D,styleId:L,adds:[{rule:I,index:[].concat(_toConsumableArray3(getNestedCSSRulePositions(_)),[R||0])}]}),e.apply(_,T)})}),M.prototype.deleteRule=new Proxy(L[T].deleteRule,{apply:callbackWrapper(function(e,_,T){var M=_slicedToArray(T,1)[0],I=getIdAndStyleId(_.parentStyleSheet,k,E.styleMirror),R=I.id,O=I.styleId;return(R&&-1!==R||O&&-1!==O)&&S({id:R,styleId:O,removes:[{index:[].concat(_toConsumableArray3(getNestedCSSRulePositions(_)),[M])}]}),e.apply(_,T)})})}),callbackWrapper(function(){T.CSSStyleSheet.prototype.insertRule=M,T.CSSStyleSheet.prototype.deleteRule=O,I&&(T.CSSStyleSheet.prototype.replace=I),R&&(T.CSSStyleSheet.prototype.replaceSync=R),Object.entries(D).forEach(function(e){var _=_slicedToArray(e,2),S=_[0],k=_[1];k.prototype.insertRule=L[S].insertRule,k.prototype.deleteRule=L[S].deleteRule})})}(e,{win:k}),adoptedStyleSheetObserver=initAdoptedStyleSheetObserver(e,e.doc),styleDeclarationObserver=function(e,_){var S=e.styleDeclarationCb,k=e.mirror,E=e.ignoreCSSAttributes,T=e.stylesheetManager,M=_.win,I=M.CSSStyleDeclaration.prototype.setProperty;M.CSSStyleDeclaration.prototype.setProperty=new Proxy(I,{apply:callbackWrapper(function(e,_,M){var R,O=_slicedToArray(M,3),D=O[0],L=O[1],U=O[2];if(E.has(D))return I.apply(_,[D,L,U]);var B=getIdAndStyleId(null==(R=_.parentRule)?void 0:R.parentStyleSheet,k,T.styleMirror),z=B.id,G=B.styleId;return(z&&-1!==z||G&&-1!==G)&&S({id:z,styleId:G,set:{property:D,value:L,priority:U},index:getNestedCSSRulePositions(_.parentRule)}),e.apply(_,M)})});var R=M.CSSStyleDeclaration.prototype.removeProperty;return M.CSSStyleDeclaration.prototype.removeProperty=new Proxy(R,{apply:callbackWrapper(function(e,_,M){var I,O=_slicedToArray(M,1)[0];if(E.has(O))return R.apply(_,[O]);var D=getIdAndStyleId(null==(I=_.parentRule)?void 0:I.parentStyleSheet,k,T.styleMirror),L=D.id,U=D.styleId;return(L&&-1!==L||U&&-1!==U)&&S({id:L,styleId:U,remove:{property:O},index:getNestedCSSRulePositions(_.parentRule)}),e.apply(_,M)})}),callbackWrapper(function(){M.CSSStyleDeclaration.prototype.setProperty=I,M.CSSStyleDeclaration.prototype.removeProperty=R})}(e,{win:k}),e.collectFonts&&(fontObserver=function(e){var _=e.fontCb,S=e.doc,k=S.defaultView;if(!k)return function(){};var E=[],T=new WeakMap,M=k.FontFace;k.FontFace=function(e,_,S){var k=new M(e,_,S);return T.set(k,{family:e,buffer:"string"!=typeof _,descriptors:S,fontSource:"string"==typeof _?_:JSON.stringify(Array.from(new Uint8Array(_)))}),k};var I=patch(S.fonts,"add",function(e){return function(S){return setTimeout(callbackWrapper(function(){var e=T.get(S);e&&(_(e),T.delete(S))}),0),e.apply(this,[S])}});return E.push(function(){k.FontFace=M}),E.push(I),callbackWrapper(function(){E.forEach(function(e){return e()})})}(e)));var G,j,V,H,W,q,X,Y,K,J=(j=(G=e).doc,V=G.mirror,H=G.blockClass,W=G.blockSelector,q=G.selectionCb,X=!0,(Y=callbackWrapper(function(){var e=j.getSelection();if(!(!e||X&&(null==e?void 0:e.isCollapsed))){X=e.isCollapsed||!1;for(var _=[],S=e.rangeCount||0,k=0;k<S;k++){var E=e.getRangeAt(k),T=E.startContainer,M=E.startOffset,I=E.endContainer,R=E.endOffset;isBlocked(T,H,W,!0)||isBlocked(I,H,W,!0)||_.push({start:V.getId(T),startOffset:M,end:V.getId(I),endOffset:R})}q({ranges:_})}}))(),on("selectionchange",Y)),Q=function(e){var _=e.doc,S=e.customElementCb,k=_.defaultView;return k&&k.customElements?patch(k.customElements,"define",function(e){return function(_,k,E){try{S({define:{name:_}})}catch(T){}return e.apply(this,[_,k,E])}}):function(){}}(e),Z=[],$=_createForOfIteratorHelper2(e.plugins);try{for($.s();!(K=$.n()).done;){var ee=K.value;Z.push(ee.observer(ee.callback,k,ee.options))}}catch(te){$.e(te)}finally{$.f()}return callbackWrapper(function(){ls.forEach(function(e){return e.reset()}),null==_||_.disconnect(),O(),D(),L(),U(),B(),z(),styleSheetObserver(),adoptedStyleSheetObserver(),styleDeclarationObserver(),fontObserver(),J(),Q(),Z.forEach(function(e){return e()})})}function hasNestedCSSRule(e){return void 0!==window[e]}function canMonkeyPatchNestedCSSRule(e){return Boolean(void 0!==window[e]&&window[e].prototype&&"insertRule"in window[e].prototype&&"deleteRule"in window[e].prototype)}for(var ds=function(){return _createClass3(function CrossOriginIframeMirror(e){_classCallCheck3(this,CrossOriginIframeMirror),__publicField(this,"iframeIdToRemoteIdMap",new WeakMap),__publicField(this,"iframeRemoteIdToIdMap",new WeakMap),this.generateIdFn=e},[{key:"getId",value:function(e,_,S,k){var E=S||this.getIdToRemoteIdMap(e),T=k||this.getRemoteIdToIdMap(e),M=E.get(_);return M||(M=this.generateIdFn(),E.set(_,M),T.set(M,_)),M}},{key:"getIds",value:function(e,_){var S=this,k=this.getIdToRemoteIdMap(e),E=this.getRemoteIdToIdMap(e);return _.map(function(_){return S.getId(e,_,k,E)})}},{key:"getRemoteId",value:function(e,_,S){var k=S||this.getRemoteIdToIdMap(e);if("number"!=typeof _)return _;var E=k.get(_);return E||-1}},{key:"getRemoteIds",value:function(e,_){var S=this,k=this.getRemoteIdToIdMap(e);return _.map(function(_){return S.getRemoteId(e,_,k)})}},{key:"reset",value:function(e){if(!e)return this.iframeIdToRemoteIdMap=new WeakMap,void(this.iframeRemoteIdToIdMap=new WeakMap);this.iframeIdToRemoteIdMap.delete(e),this.iframeRemoteIdToIdMap.delete(e)}},{key:"getIdToRemoteIdMap",value:function(e){var _=this.iframeIdToRemoteIdMap.get(e);return _||(_=new Map,this.iframeIdToRemoteIdMap.set(e,_)),_}},{key:"getRemoteIdToIdMap",value:function(e){var _=this.iframeRemoteIdToIdMap.get(e);return _||(_=new Map,this.iframeRemoteIdToIdMap.set(e,_)),_}}])}(),fs=function(){return _createClass3(function IframeManager(e){_classCallCheck3(this,IframeManager),__publicField(this,"iframes",new WeakMap),__publicField(this,"crossOriginIframeMap",new WeakMap),__publicField(this,"crossOriginIframeMirror",new ds(genId)),__publicField(this,"crossOriginIframeStyleMirror"),__publicField(this,"crossOriginIframeRootIdMap",new WeakMap),__publicField(this,"mirror"),__publicField(this,"mutationCb"),__publicField(this,"wrappedEmit"),__publicField(this,"loadListener"),__publicField(this,"stylesheetManager"),__publicField(this,"recordCrossOriginIframes"),this.mutationCb=e.mutationCb,this.wrappedEmit=e.wrappedEmit,this.stylesheetManager=e.stylesheetManager,this.recordCrossOriginIframes=e.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new ds(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=e.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))},[{key:"addIframe",value:function(e){this.iframes.set(e,!0),e.contentWindow&&this.crossOriginIframeMap.set(e.contentWindow,e)}},{key:"addLoadListener",value:function(e){this.loadListener=e}},{key:"attachIframe",value:function(e,_){var S,k;this.mutationCb({adds:[{parentId:this.mirror.getId(e),nextId:null,node:_}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),this.recordCrossOriginIframes&&(null==(S=e.contentWindow)||S.addEventListener("message",this.handleMessage.bind(this))),null==(k=this.loadListener)||k.call(this,e),e.contentDocument&&e.contentDocument.adoptedStyleSheets&&e.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(e.contentDocument.adoptedStyleSheets,this.mirror.getId(e.contentDocument))}},{key:"handleMessage",value:function(e){var _=e;if("rrweb"===_.data.type&&_.origin===_.data.origin&&e.source){var S=this.crossOriginIframeMap.get(e.source);if(S){var k=this.transformCrossOriginEvent(S,_.data.event);k&&this.wrappedEmit(k,_.data.isCheckout)}}}},{key:"transformCrossOriginEvent",value:function(e,_){var S,k=this;switch(_.type){case es.FullSnapshot:this.crossOriginIframeMirror.reset(e),this.crossOriginIframeStyleMirror.reset(e),this.replaceIdOnNode(_.data.node,e);var E=_.data.node.id;return this.crossOriginIframeRootIdMap.set(e,E),this.patchRootIdOnNode(_.data.node,E),{timestamp:_.timestamp,type:es.IncrementalSnapshot,data:{source:ts.Mutation,adds:[{parentId:this.mirror.getId(e),nextId:null,node:_.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}};case es.Meta:case es.Load:case es.DomContentLoaded:return!1;case es.Plugin:return _;case es.Custom:return this.replaceIds(_.data.payload,e,["id","parentId","previousId","nextId"]),_;case es.IncrementalSnapshot:switch(_.data.source){case ts.Mutation:return _.data.adds.forEach(function(_){k.replaceIds(_,e,["parentId","nextId","previousId"]),k.replaceIdOnNode(_.node,e);var S=k.crossOriginIframeRootIdMap.get(e);S&&k.patchRootIdOnNode(_.node,S)}),_.data.removes.forEach(function(_){k.replaceIds(_,e,["parentId","id"])}),_.data.attributes.forEach(function(_){k.replaceIds(_,e,["id"])}),_.data.texts.forEach(function(_){k.replaceIds(_,e,["id"])}),_;case ts.Drag:case ts.TouchMove:case ts.MouseMove:return _.data.positions.forEach(function(_){k.replaceIds(_,e,["id"])}),_;case ts.ViewportResize:return!1;case ts.MediaInteraction:case ts.MouseInteraction:case ts.Scroll:case ts.CanvasMutation:case ts.Input:return this.replaceIds(_.data,e,["id"]),_;case ts.StyleSheetRule:case ts.StyleDeclaration:return this.replaceIds(_.data,e,["id"]),this.replaceStyleIds(_.data,e,["styleId"]),_;case ts.Font:return _;case ts.Selection:return _.data.ranges.forEach(function(_){k.replaceIds(_,e,["start","end"])}),_;case ts.AdoptedStyleSheet:return this.replaceIds(_.data,e,["id"]),this.replaceStyleIds(_.data,e,["styleIds"]),null==(S=_.data.styles)||S.forEach(function(_){k.replaceStyleIds(_,e,["styleId"])}),_}}return!1}},{key:"replace",value:function(e,_,S,k){var E,T=_createForOfIteratorHelper2(k);try{for(T.s();!(E=T.n()).done;){var M=E.value;(Array.isArray(_[M])||"number"==typeof _[M])&&(Array.isArray(_[M])?_[M]=e.getIds(S,_[M]):_[M]=e.getId(S,_[M]))}}catch(I){T.e(I)}finally{T.f()}return _}},{key:"replaceIds",value:function(e,_,S){return this.replace(this.crossOriginIframeMirror,e,_,S)}},{key:"replaceStyleIds",value:function(e,_,S){return this.replace(this.crossOriginIframeStyleMirror,e,_,S)}},{key:"replaceIdOnNode",value:function(e,_){var S=this;this.replaceIds(e,_,["id","rootId"]),"childNodes"in e&&e.childNodes.forEach(function(e){S.replaceIdOnNode(e,_)})}},{key:"patchRootIdOnNode",value:function(e,_){var S=this;e.type===D.Document||e.rootId||(e.rootId=_),"childNodes"in e&&e.childNodes.forEach(function(e){S.patchRootIdOnNode(e,_)})}}])}(),ps=function(){return _createClass3(function ShadowDomManager(e){_classCallCheck3(this,ShadowDomManager),__publicField(this,"shadowDoms",new WeakSet),__publicField(this,"mutationCb"),__publicField(this,"scrollCb"),__publicField(this,"bypassOptions"),__publicField(this,"mirror"),__publicField(this,"restoreHandlers",[]),this.mutationCb=e.mutationCb,this.scrollCb=e.scrollCb,this.bypassOptions=e.bypassOptions,this.mirror=e.mirror,this.init()},[{key:"init",value:function(){this.reset(),this.patchAttachShadow(Element,document)}},{key:"addShadowRoot",value:function(e,_){var S=this;if(isNativeShadowDom(e)&&!this.shadowDoms.has(e)){this.shadowDoms.add(e);var k=initMutationObserver(_objectSpread2(_objectSpread2({},this.bypassOptions),{},{doc:_,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this}),e);this.restoreHandlers.push(function(){return k.disconnect()}),this.restoreHandlers.push(initScrollObserver(_objectSpread2(_objectSpread2({},this.bypassOptions),{},{scrollCb:this.scrollCb,doc:e,mirror:this.mirror}))),setTimeout(function(){e.adoptedStyleSheets&&e.adoptedStyleSheets.length>0&&S.bypassOptions.stylesheetManager.adoptStyleSheets(e.adoptedStyleSheets,S.mirror.getId(Jo.host(e))),S.restoreHandlers.push(initAdoptedStyleSheetObserver({mirror:S.mirror,stylesheetManager:S.bypassOptions.stylesheetManager},e))},0)}}},{key:"observeAttachShadow",value:function(e){e.contentWindow&&e.contentDocument&&this.patchAttachShadow(e.contentWindow.Element,e.contentDocument)}},{key:"patchAttachShadow",value:function(e,_){var S=this;this.restoreHandlers.push(patch(e.prototype,"attachShadow",function(e){return function(k){var E=e.call(this,k),T=Jo.shadowRoot(this);return T&&inDom(this)&&S.addShadowRoot(T,_),E}}))}},{key:"reset",value:function(){this.restoreHandlers.forEach(function(e){try{e()}catch(_){}}),this.restoreHandlers=[],this.shadowDoms=new WeakSet}}])}(),vs="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",gs="undefined"==typeof Uint8Array?[]:new Uint8Array(256),ms=0;ms<64;ms++)gs[vs.charCodeAt(ms)]=ms;var ys=new Map;var saveWebGLVar=function(e,_,S){if(e&&(isInstanceOfWebGLObject(e,_)||"object"===_typeof3(e))){var k=function(e,_){var S=ys.get(e);return S||(S=new Map,ys.set(e,S)),S.has(_)||S.set(_,[]),S.get(_)}(S,e.constructor.name),E=k.indexOf(e);return-1===E&&(E=k.length,k.push(e)),E}};function serializeArg(e,_,S){if(e instanceof Array)return e.map(function(e){return serializeArg(e,_,S)});if(null===e)return e;if(e instanceof Float32Array||e instanceof Float64Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Int16Array||e instanceof Int8Array||e instanceof Uint8ClampedArray)return{rr_type:e.constructor.name,args:[Object.values(e)]};if(e instanceof ArrayBuffer){var k=e.constructor.name,E=function(e){var _,S=new Uint8Array(e),k=S.length,E="";for(_=0;_<k;_+=3)E+=vs[S[_]>>2],E+=vs[(3&S[_])<<4|S[_+1]>>4],E+=vs[(15&S[_+1])<<2|S[_+2]>>6],E+=vs[63&S[_+2]];return k%3==2?E=E.substring(0,E.length-1)+"=":k%3==1&&(E=E.substring(0,E.length-2)+"=="),E}(e);return{rr_type:k,base64:E}}if(e instanceof DataView)return{rr_type:e.constructor.name,args:[serializeArg(e.buffer,_,S),e.byteOffset,e.byteLength]};if(e instanceof HTMLImageElement)return{rr_type:e.constructor.name,src:e.src};if(e instanceof HTMLCanvasElement){return{rr_type:"HTMLImageElement",src:e.toDataURL()}}return e instanceof ImageData?{rr_type:e.constructor.name,args:[serializeArg(e.data,_,S),e.width,e.height]}:isInstanceOfWebGLObject(e,_)||"object"===_typeof3(e)?{rr_type:e.constructor.name,index:saveWebGLVar(e,_,S)}:e}var serializeArgs=function(e,_,S){return e.map(function(e){return serializeArg(e,_,S)})},isInstanceOfWebGLObject=function(e,_){var S=["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter(function(e){return"function"==typeof _[e]});return Boolean(S.find(function(S){return e instanceof _[S]}))};function initCanvasContextObserver(e,_,S,k){var E=[];try{var T=patch(e.HTMLCanvasElement.prototype,"getContext",function(e){return function(E){for(var T=arguments.length,M=new Array(T>1?T-1:0),I=1;I<T;I++)M[I-1]=arguments[I];if(!isBlocked(this,_,S,!0)){var R=function(e){return"experimental-webgl"===e?"webgl":e}(E);if("__context"in this||(this.__context=R),k&&["webgl","webgl2"].includes(R))if(M[0]&&"object"===_typeof3(M[0])){var O=M[0];O.preserveDrawingBuffer||(O.preserveDrawingBuffer=!0)}else M.splice(0,1,{preserveDrawingBuffer:!0})}return e.apply(this,[E].concat(M))}});E.push(T)}catch(M){}return function(){E.forEach(function(e){return e()})}}function patchGLPrototype(e,_,S,k,E,T){var M,I=[],R=_createForOfIteratorHelper2(Object.getOwnPropertyNames(e));try{var _loop7=function(){var R=M.value;if(["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(R))return 0;try{if("function"!=typeof e[R])return 0;var O=patch(e,R,function(e){return function(){for(var M=arguments.length,I=new Array(M),O=0;O<M;O++)I[O]=arguments[O];var D=e.apply(this,I);if(saveWebGLVar(D,T,this),"tagName"in this.canvas&&!isBlocked(this.canvas,k,E,!0)){var L=serializeArgs(I,T,this),U={type:_,property:R,args:L};S(this.canvas,U)}return D}});I.push(O)}catch(L){var D=hookSetter(e,R,{set:function(e){S(this.canvas,{type:_,property:R,args:[e],setter:!0})}});I.push(D)}};for(R.s();!(M=R.n()).done;)_loop7()}catch(O){R.e(O)}finally{R.f()}return I}var _s,bs="KGZ1bmN0aW9uKCkgewogICJ1c2Ugc3RyaWN0IjsKICB2YXIgY2hhcnMgPSAiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyI7CiAgdmFyIGxvb2t1cCA9IHR5cGVvZiBVaW50OEFycmF5ID09PSAidW5kZWZpbmVkIiA/IFtdIDogbmV3IFVpbnQ4QXJyYXkoMjU2KTsKICBmb3IgKHZhciBpID0gMDsgaSA8IGNoYXJzLmxlbmd0aDsgaSsrKSB7CiAgICBsb29rdXBbY2hhcnMuY2hhckNvZGVBdChpKV0gPSBpOwogIH0KICB2YXIgZW5jb2RlID0gZnVuY3Rpb24oYXJyYXlidWZmZXIpIHsKICAgIHZhciBieXRlcyA9IG5ldyBVaW50OEFycmF5KGFycmF5YnVmZmVyKSwgaTIsIGxlbiA9IGJ5dGVzLmxlbmd0aCwgYmFzZTY0ID0gIiI7CiAgICBmb3IgKGkyID0gMDsgaTIgPCBsZW47IGkyICs9IDMpIHsKICAgICAgYmFzZTY0ICs9IGNoYXJzW2J5dGVzW2kyXSA+PiAyXTsKICAgICAgYmFzZTY0ICs9IGNoYXJzWyhieXRlc1tpMl0gJiAzKSA8PCA0IHwgYnl0ZXNbaTIgKyAxXSA+PiA0XTsKICAgICAgYmFzZTY0ICs9IGNoYXJzWyhieXRlc1tpMiArIDFdICYgMTUpIDw8IDIgfCBieXRlc1tpMiArIDJdID4+IDZdOwogICAgICBiYXNlNjQgKz0gY2hhcnNbYnl0ZXNbaTIgKyAyXSAmIDYzXTsKICAgIH0KICAgIGlmIChsZW4gJSAzID09PSAyKSB7CiAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDEpICsgIj0iOwogICAgfSBlbHNlIGlmIChsZW4gJSAzID09PSAxKSB7CiAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDIpICsgIj09IjsKICAgIH0KICAgIHJldHVybiBiYXNlNjQ7CiAgfTsKICBjb25zdCBsYXN0QmxvYk1hcCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7CiAgY29uc3QgdHJhbnNwYXJlbnRCbG9iTWFwID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTsKICBhc3luYyBmdW5jdGlvbiBnZXRUcmFuc3BhcmVudEJsb2JGb3Iod2lkdGgsIGhlaWdodCwgZGF0YVVSTE9wdGlvbnMpIHsKICAgIGNvbnN0IGlkID0gYCR7d2lkdGh9LSR7aGVpZ2h0fWA7CiAgICBpZiAoIk9mZnNjcmVlbkNhbnZhcyIgaW4gZ2xvYmFsVGhpcykgewogICAgICBpZiAodHJhbnNwYXJlbnRCbG9iTWFwLmhhcyhpZCkpIHJldHVybiB0cmFuc3BhcmVudEJsb2JNYXAuZ2V0KGlkKTsKICAgICAgY29uc3Qgb2Zmc2NyZWVuID0gbmV3IE9mZnNjcmVlbkNhbnZhcyh3aWR0aCwgaGVpZ2h0KTsKICAgICAgb2Zmc2NyZWVuLmdldENvbnRleHQoIjJkIik7CiAgICAgIGNvbnN0IGJsb2IgPSBhd2FpdCBvZmZzY3JlZW4uY29udmVydFRvQmxvYihkYXRhVVJMT3B0aW9ucyk7CiAgICAgIGNvbnN0IGFycmF5QnVmZmVyID0gYXdhaXQgYmxvYi5hcnJheUJ1ZmZlcigpOwogICAgICBjb25zdCBiYXNlNjQgPSBlbmNvZGUoYXJyYXlCdWZmZXIpOwogICAgICB0cmFuc3BhcmVudEJsb2JNYXAuc2V0KGlkLCBiYXNlNjQpOwogICAgICByZXR1cm4gYmFzZTY0OwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuICIiOwogICAgfQogIH0KICBjb25zdCB3b3JrZXIgPSBzZWxmOwogIHdvcmtlci5vbm1lc3NhZ2UgPSBhc3luYyBmdW5jdGlvbihlKSB7CiAgICBpZiAoIk9mZnNjcmVlbkNhbnZhcyIgaW4gZ2xvYmFsVGhpcykgewogICAgICBjb25zdCB7IGlkLCBiaXRtYXAsIHdpZHRoLCBoZWlnaHQsIGRhdGFVUkxPcHRpb25zIH0gPSBlLmRhdGE7CiAgICAgIGNvbnN0IHRyYW5zcGFyZW50QmFzZTY0ID0gZ2V0VHJhbnNwYXJlbnRCbG9iRm9yKAogICAgICAgIHdpZHRoLAogICAgICAgIGhlaWdodCwKICAgICAgICBkYXRhVVJMT3B0aW9ucwogICAgICApOwogICAgICBjb25zdCBvZmZzY3JlZW4gPSBuZXcgT2Zmc2NyZWVuQ2FudmFzKHdpZHRoLCBoZWlnaHQpOwogICAgICBjb25zdCBjdHggPSBvZmZzY3JlZW4uZ2V0Q29udGV4dCgiMmQiKTsKICAgICAgY3R4LmRyYXdJbWFnZShiaXRtYXAsIDAsIDApOwogICAgICBiaXRtYXAuY2xvc2UoKTsKICAgICAgY29uc3QgYmxvYiA9IGF3YWl0IG9mZnNjcmVlbi5jb252ZXJ0VG9CbG9iKGRhdGFVUkxPcHRpb25zKTsKICAgICAgY29uc3QgdHlwZSA9IGJsb2IudHlwZTsKICAgICAgY29uc3QgYXJyYXlCdWZmZXIgPSBhd2FpdCBibG9iLmFycmF5QnVmZmVyKCk7CiAgICAgIGNvbnN0IGJhc2U2NCA9IGVuY29kZShhcnJheUJ1ZmZlcik7CiAgICAgIGlmICghbGFzdEJsb2JNYXAuaGFzKGlkKSAmJiBhd2FpdCB0cmFuc3BhcmVudEJhc2U2NCA9PT0gYmFzZTY0KSB7CiAgICAgICAgbGFzdEJsb2JNYXAuc2V0KGlkLCBiYXNlNjQpOwogICAgICAgIHJldHVybiB3b3JrZXIucG9zdE1lc3NhZ2UoeyBpZCB9KTsKICAgICAgfQogICAgICBpZiAobGFzdEJsb2JNYXAuZ2V0KGlkKSA9PT0gYmFzZTY0KSByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQgfSk7CiAgICAgIHdvcmtlci5wb3N0TWVzc2FnZSh7CiAgICAgICAgaWQsCiAgICAgICAgdHlwZSwKICAgICAgICBiYXNlNjQsCiAgICAgICAgd2lkdGgsCiAgICAgICAgaGVpZ2h0CiAgICAgIH0pOwogICAgICBsYXN0QmxvYk1hcC5zZXQoaWQsIGJhc2U2NCk7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQ6IGUuZGF0YS5pZCB9KTsKICAgIH0KICB9Owp9KSgpOwovLyMgc291cmNlTWFwcGluZ1VSTD1pbWFnZS1iaXRtYXAtZGF0YS11cmwtd29ya2VyLUlKcEM3Z19iLmpzLm1hcAo=",Ss="undefined"!=typeof window&&window.Blob&&new Blob([(_s=bs,Uint8Array.from(atob(_s),function(e){return e.charCodeAt(0)}))],{type:"text/javascript;charset=utf-8"});function WorkerWrapper(e){var _;try{if(!(_=Ss&&(window.URL||window.webkitURL).createObjectURL(Ss)))throw"";var S=new Worker(_,{name:null==e?void 0:e.name});return S.addEventListener("error",function(){(window.URL||window.webkitURL).revokeObjectURL(_)}),S}catch(k){return new Worker("data:text/javascript;base64,"+bs,{name:null==e?void 0:e.name})}finally{_&&(window.URL||window.webkitURL).revokeObjectURL(_)}}var ws,xs,ks,Cs=function(){return _createClass3(function CanvasManager(e){var _=this;_classCallCheck3(this,CanvasManager),__publicField(this,"pendingCanvasMutations",new Map),__publicField(this,"rafStamps",{latestId:0,invokeId:null}),__publicField(this,"mirror"),__publicField(this,"mutationCb"),__publicField(this,"resetObservers"),__publicField(this,"frozen",!1),__publicField(this,"locked",!1),__publicField(this,"processMutation",function(e,S){!(_.rafStamps.invokeId&&_.rafStamps.latestId!==_.rafStamps.invokeId)&&_.rafStamps.invokeId||(_.rafStamps.invokeId=_.rafStamps.latestId),_.pendingCanvasMutations.has(e)||_.pendingCanvasMutations.set(e,[]),_.pendingCanvasMutations.get(e).push(S)});var S=e.sampling,k=void 0===S?"all":S,E=e.win,T=e.blockClass,M=e.blockSelector,I=e.recordCanvas,R=e.dataURLOptions;this.mutationCb=e.mutationCb,this.mirror=e.mirror,I&&"all"===k&&this.initCanvasMutationObserver(E,T,M),I&&"number"==typeof k&&this.initCanvasFPSObserver(k,E,T,M,{dataURLOptions:R})},[{key:"reset",value:function(){this.pendingCanvasMutations.clear(),this.resetObservers&&this.resetObservers()}},{key:"freeze",value:function(){this.frozen=!0}},{key:"unfreeze",value:function(){this.frozen=!1}},{key:"lock",value:function(){this.locked=!0}},{key:"unlock",value:function(){this.locked=!1}},{key:"initCanvasFPSObserver",value:function(e,_,S,k,E){var T=this,M=initCanvasContextObserver(_,S,k,!0),I=new Map,R=new WorkerWrapper;R.onmessage=function(e){var _=e.data.id;if(I.set(_,!1),"base64"in e.data){var S=e.data,k=S.base64,E=S.type,M=S.width,R=S.height;T.mutationCb({id:_,type:is["2D"],commands:[{property:"clearRect",args:[0,0,M,R]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:k}],type:E}]},0,0]}]})}};var O,D=1e3/e,L=0,_takeCanvasSnapshots=function(e){var M;L&&e-L<D?O=requestAnimationFrame(_takeCanvasSnapshots):(L=e,(M=[],_.document.querySelectorAll("canvas").forEach(function(e){isBlocked(e,S,k,!0)||M.push(e)}),M).forEach(function(){var e=_asyncToGenerator(_regenerator().m(function _callee31(e){var _,S,k,M;return _regenerator().w(function(O){for(;;)switch(O.n){case 0:if(S=T.mirror.getId(e),!I.get(S)){O.n=1;break}return O.a(2);case 1:if(0!==e.width&&0!==e.height){O.n=2;break}return O.a(2);case 2:return I.set(S,!0),["webgl","webgl2"].includes(e.__context)&&(k=e.getContext(e.__context),!1===(null==(_=null==k?void 0:k.getContextAttributes())?void 0:_.preserveDrawingBuffer)&&k.clear(k.COLOR_BUFFER_BIT)),O.n=3,createImageBitmap(e);case 3:M=O.v,R.postMessage({id:S,bitmap:M,width:e.width,height:e.height,dataURLOptions:E.dataURLOptions},[M]);case 4:return O.a(2)}},_callee31)}));return function(_){return e.apply(this,arguments)}}()),O=requestAnimationFrame(_takeCanvasSnapshots))};O=requestAnimationFrame(_takeCanvasSnapshots),this.resetObservers=function(){M(),cancelAnimationFrame(O)}}},{key:"initCanvasMutationObserver",value:function(e,_,S){this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher();var k=initCanvasContextObserver(e,_,S,!1),E=function(e,_,S,k){var E,T=[],M=_createForOfIteratorHelper2(Object.getOwnPropertyNames(_.CanvasRenderingContext2D.prototype));try{var _loop6=function(){var M=E.value;try{if("function"!=typeof _.CanvasRenderingContext2D.prototype[M])return 1;var I=patch(_.CanvasRenderingContext2D.prototype,M,function(E){return function(){for(var T=this,I=arguments.length,R=new Array(I),O=0;O<I;O++)R[O]=arguments[O];return isBlocked(this.canvas,S,k,!0)||setTimeout(function(){var S=serializeArgs(R,_,T);e(T.canvas,{type:is["2D"],property:M,args:S})},0),E.apply(this,R)}});T.push(I)}catch(O){var R=hookSetter(_.CanvasRenderingContext2D.prototype,M,{set:function(_){e(this.canvas,{type:is["2D"],property:M,args:[_],setter:!0})}});T.push(R)}};for(M.s();!(E=M.n()).done;)_loop6()}catch(I){M.e(I)}finally{M.f()}return function(){T.forEach(function(e){return e()})}}(this.processMutation.bind(this),e,_,S),T=function(e,_,S,k){var E=[];return E.push.apply(E,_toConsumableArray3(patchGLPrototype(_.WebGLRenderingContext.prototype,is.WebGL,e,S,k,_))),void 0!==_.WebGL2RenderingContext&&E.push.apply(E,_toConsumableArray3(patchGLPrototype(_.WebGL2RenderingContext.prototype,is.WebGL2,e,S,k,_))),function(){E.forEach(function(e){return e()})}}(this.processMutation.bind(this),e,_,S);this.resetObservers=function(){k(),E(),T()}}},{key:"startPendingCanvasMutationFlusher",value:function(){var e=this;requestAnimationFrame(function(){return e.flushPendingCanvasMutations()})}},{key:"startRAFTimestamping",value:function(){var e=this,_setLatestRAFTimestamp=function(_){e.rafStamps.latestId=_,requestAnimationFrame(_setLatestRAFTimestamp)};requestAnimationFrame(_setLatestRAFTimestamp)}},{key:"flushPendingCanvasMutations",value:function(){var e=this;this.pendingCanvasMutations.forEach(function(_,S){var k=e.mirror.getId(S);e.flushPendingCanvasMutationFor(S,k)}),requestAnimationFrame(function(){return e.flushPendingCanvasMutations()})}},{key:"flushPendingCanvasMutationFor",value:function(e,_){if(!this.frozen&&!this.locked){var S=this.pendingCanvasMutations.get(e);if(S&&-1!==_){var k=S.map(function(e){e.type;return _objectWithoutProperties3(e,T)}),E=S[0].type;this.mutationCb({id:_,type:E,commands:k}),this.pendingCanvasMutations.delete(e)}}}}])}(),As=function(){return _createClass3(function StylesheetManager(e){_classCallCheck3(this,StylesheetManager),__publicField(this,"trackedLinkElements",new WeakSet),__publicField(this,"mutationCb"),__publicField(this,"adoptedStyleSheetCb"),__publicField(this,"styleMirror",new $o),this.mutationCb=e.mutationCb,this.adoptedStyleSheetCb=e.adoptedStyleSheetCb},[{key:"attachLinkElement",value:function(e,_){"_cssText"in _.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:_.id,attributes:_.attributes}]}),this.trackLinkElement(e)}},{key:"trackLinkElement",value:function(e){this.trackedLinkElements.has(e)||(this.trackedLinkElements.add(e),this.trackStylesheetInLinkElement(e))}},{key:"adoptStyleSheets",value:function(e,_){var S=this;if(0!==e.length){var k,E={id:_,styleIds:[]},T=[],M=_createForOfIteratorHelper2(e);try{var _loop8=function(){var e,_=k.value;S.styleMirror.has(_)?e=S.styleMirror.getId(_):(e=S.styleMirror.add(_),T.push({styleId:e,rules:Array.from(_.rules||CSSRule,function(e,S){return{rule:stringifyRule(e,_.href),index:S}})})),E.styleIds.push(e)};for(M.s();!(k=M.n()).done;)_loop8()}catch(I){M.e(I)}finally{M.f()}T.length>0&&(E.styles=T),this.adoptedStyleSheetCb(E)}}},{key:"reset",value:function(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}},{key:"trackStylesheetInLinkElement",value:function(e){}}])}(),Es=function(){return _createClass3(function ProcessedNodeManager(){_classCallCheck3(this,ProcessedNodeManager),__publicField(this,"nodeMap",new WeakMap),__publicField(this,"active",!1)},[{key:"inOtherBuffer",value:function(e,_){var S=this.nodeMap.get(e);return S&&Array.from(S).some(function(e){return e!==_})}},{key:"add",value:function(e,_){var S=this;this.active||(this.active=!0,requestAnimationFrame(function(){S.nodeMap=new WeakMap,S.active=!1})),this.nodeMap.set(e,(this.nodeMap.get(e)||new Set).add(_))}},{key:"destroy",value:function(){}}])}(),Ts=!1;try{if(2!==Array.from([1],function(e){return 2*e})[0]){var Ms=document.createElement("iframe");document.body.appendChild(Ms),Array.from=(null==(I=Ms.contentWindow)?void 0:I.Array.from)||Array.from,document.body.removeChild(Ms)}}catch(Os){}var Is,Rs,Ps=new V;function record(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_=e.emit,S=e.checkoutEveryNms,k=e.checkoutEveryNth,E=e.blockClass,T=void 0===E?"rr-block":E,M=e.blockSelector,I=void 0===M?null:M,R=e.ignoreClass,O=void 0===R?"rr-ignore":R,D=e.ignoreSelector,L=void 0===D?null:D,U=e.maskTextClass,B=void 0===U?"rr-mask":U,z=e.maskTextSelector,G=void 0===z?null:z,j=e.inlineStylesheet,H=void 0===j||j,W=e.maskAllInputs,q=e.maskInputOptions,X=e.slimDOMOptions,Y=e.maskInputFn,K=e.maskTextFn,J=e.hooks,Q=e.packFn,Z=e.sampling,$=void 0===Z?{}:Z,ee=e.dataURLOptions,te=void 0===ee?{}:ee,re=e.mousemoveWait,ne=e.recordDOM,ie=void 0===ne||ne,ae=e.recordCanvas,oe=void 0!==ae&&ae,se=e.recordCrossOriginIframes,ue=void 0!==se&&se,le=e.recordAfter,ce=void 0===le?"DOMContentLoaded"===e.recordAfter?e.recordAfter:"load":le,he=e.userTriggeredOnInput,de=void 0!==he&&he,fe=e.collectFonts,pe=void 0!==fe&&fe,ve=e.inlineImages,ge=void 0!==ve&&ve,me=e.plugins,ye=e.keepIframeSrcFn,_e=void 0===ye?function(){return!1}:ye,be=e.ignoreCSSAttributes,Se=void 0===be?new Set([]):be,we=e.errorHandler;os=we;var xe=!ue||window.parent===window,ke=!1;if(!xe)try{window.parent.document&&(ke=!1)}catch(Ue){ke=!0}if(xe&&!_)throw new Error("emit function is required");if(!xe&&!ke)return function(){};void 0!==re&&void 0===$.mousemove&&($.mousemove=re),Ps.reset();var Ce,Ae=!0===W?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:void 0!==q?q:{password:!0},Ee=!0===X||"all"===X?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:"all"===X,headMetaDescKeywords:"all"===X,headTitleMutations:"all"===X}:X||{};!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;"NodeList"in e&&!e.NodeList.prototype.forEach&&(e.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in e&&!e.DOMTokenList.prototype.forEach&&(e.DOMTokenList.prototype.forEach=Array.prototype.forEach)}();var Te=0,eventProcessor=function(e){var _,S=_createForOfIteratorHelper2(me||[]);try{for(S.s();!(_=S.n()).done;){var k=_.value;k.eventProcessor&&(e=k.eventProcessor(e))}}catch(Os){S.e(Os)}finally{S.f()}return Q&&!ke&&(e=Q(e)),e};ws=function(e,E){var T,M=e;if(M.timestamp=Zo(),!(null==(T=ls[0])?void 0:T.isFrozen())||M.type===es.FullSnapshot||M.type===es.IncrementalSnapshot&&M.data.source===ts.Mutation||ls.forEach(function(e){return e.unfreeze()}),xe)null==_||_(eventProcessor(M),E);else if(ke){var I={type:"rrweb",event:eventProcessor(M),origin:window.location.origin,isCheckout:E};window.parent.postMessage(I,"*")}if(M.type===es.FullSnapshot)Ce=M,Te=0;else if(M.type===es.IncrementalSnapshot){if(M.data.source===ts.Mutation&&M.data.isAttachIframe)return;Te++;var R=k&&Te>=k,O=S&&M.timestamp-Ce.timestamp>S;(R||O)&&xs(!0)}};var Me,wrappedMutationEmit=function(e){ws({type:es.IncrementalSnapshot,data:_objectSpread2({source:ts.Mutation},e)})},wrappedScrollEmit=function(e){return ws({type:es.IncrementalSnapshot,data:_objectSpread2({source:ts.Scroll},e)})},wrappedCanvasMutationEmit=function(e){return ws({type:es.IncrementalSnapshot,data:_objectSpread2({source:ts.CanvasMutation},e)})},Ie=new As({mutationCb:wrappedMutationEmit,adoptedStyleSheetCb:function(e){return ws({type:es.IncrementalSnapshot,data:_objectSpread2({source:ts.AdoptedStyleSheet},e)})}}),Re=new fs({mirror:Ps,mutationCb:wrappedMutationEmit,stylesheetManager:Ie,recordCrossOriginIframes:ue,wrappedEmit:ws}),Pe=_createForOfIteratorHelper2(me||[]);try{for(Pe.s();!(Me=Pe.n()).done;){var Oe=Me.value;Oe.getMirror&&Oe.getMirror({nodeMirror:Ps,crossOriginIframeMirror:Re.crossOriginIframeMirror,crossOriginIframeStyleMirror:Re.crossOriginIframeStyleMirror})}}catch(Os){Pe.e(Os)}finally{Pe.f()}var De=new Es;ks=new Cs({recordCanvas:oe,mutationCb:wrappedCanvasMutationEmit,win:window,blockClass:T,blockSelector:I,mirror:Ps,sampling:$.canvas,dataURLOptions:te});var Le=new ps({mutationCb:wrappedMutationEmit,scrollCb:wrappedScrollEmit,bypassOptions:{blockClass:T,blockSelector:I,maskTextClass:B,maskTextSelector:G,inlineStylesheet:H,maskInputOptions:Ae,dataURLOptions:te,maskTextFn:K,maskInputFn:Y,recordCanvas:oe,inlineImages:ge,sampling:$,slimDOMOptions:Ee,iframeManager:Re,stylesheetManager:Ie,canvasManager:ks,keepIframeSrcFn:_e,processedNodeManager:De},mirror:Ps});xs=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(ie){ws({type:es.Meta,data:{href:window.location.href,width:getWindowWidth(),height:getWindowHeight()}},e),Ie.reset(),Le.init(),ls.forEach(function(e){return e.lock()});var _=function(e,_){var S=_||{},k=S.mirror,E=void 0===k?new V:k,T=S.blockClass,M=void 0===T?"rr-block":T,I=S.blockSelector,R=void 0===I?null:I,O=S.maskTextClass,D=void 0===O?"rr-mask":O,L=S.maskTextSelector,U=void 0===L?null:L,B=S.inlineStylesheet,z=void 0===B||B,G=S.inlineImages,j=void 0!==G&&G,H=S.recordCanvas,W=void 0!==H&&H,q=S.maskAllInputs,X=void 0!==q&&q,Y=S.maskTextFn,K=S.maskInputFn,J=S.slimDOM,Q=void 0!==J&&J,Z=S.dataURLOptions,$=S.preserveWhiteSpace,ee=S.onSerialize,te=S.onIframeLoad,re=S.iframeLoadTimeout,ne=S.onStylesheetLoad,ie=S.stylesheetLoadTimeout,ae=S.keepIframeSrcFn;return serializeNodeWithId(e,{doc:e,mirror:E,blockClass:M,blockSelector:R,maskTextClass:D,maskTextSelector:U,skipChild:!1,inlineStylesheet:z,maskInputOptions:!0===X?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:!1===X?{password:!0}:X,maskTextFn:Y,maskInputFn:K,slimDOMOptions:!0===Q||"all"===Q?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:"all"===Q,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:!1===Q?{}:Q,dataURLOptions:Z,inlineImages:j,recordCanvas:W,preserveWhiteSpace:$,onSerialize:ee,onIframeLoad:te,iframeLoadTimeout:re,onStylesheetLoad:ne,stylesheetLoadTimeout:ie,keepIframeSrcFn:void 0===ae?function(){return!1}:ae,newlyAddedElement:!1})}(document,{mirror:Ps,blockClass:T,blockSelector:I,maskTextClass:B,maskTextSelector:G,inlineStylesheet:H,maskAllInputs:Ae,maskTextFn:K,maskInputFn:Y,slimDOM:Ee,dataURLOptions:te,recordCanvas:oe,inlineImages:ge,onSerialize:function(e){isSerializedIframe(e,Ps)&&Re.addIframe(e),isSerializedStylesheet(e,Ps)&&Ie.trackLinkElement(e),hasShadowRoot(e)&&Le.addShadowRoot(Jo.shadowRoot(e),document)},onIframeLoad:function(e,_){Re.attachIframe(e,_),Le.observeAttachShadow(e)},onStylesheetLoad:function(e,_){Ie.attachLinkElement(e,_)},keepIframeSrcFn:_e});_&&(ws({type:es.FullSnapshot,data:{node:_,initialOffset:getWindowScroll(window)}},e),ls.forEach(function(e){return e.unlock()}),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&Ie.adoptStyleSheets(document.adoptedStyleSheets,Ps.getId(document)))}};try{var Fe=[],observe=function(e){var _;return callbackWrapper(initObservers)({mutationCb:wrappedMutationEmit,mousemoveCb:function(e,_){return ws({type:es.IncrementalSnapshot,data:{source:_,positions:e}})},mouseInteractionCb:function(e){return ws({type:es.IncrementalSnapshot,data:_objectSpread2({source:ts.MouseInteraction},e)})},scrollCb:wrappedScrollEmit,viewportResizeCb:function(e){return ws({type:es.IncrementalSnapshot,data:_objectSpread2({source:ts.ViewportResize},e)})},inputCb:function(e){return ws({type:es.IncrementalSnapshot,data:_objectSpread2({source:ts.Input},e)})},mediaInteractionCb:function(e){return ws({type:es.IncrementalSnapshot,data:_objectSpread2({source:ts.MediaInteraction},e)})},styleSheetRuleCb:function(e){return ws({type:es.IncrementalSnapshot,data:_objectSpread2({source:ts.StyleSheetRule},e)})},styleDeclarationCb:function(e){return ws({type:es.IncrementalSnapshot,data:_objectSpread2({source:ts.StyleDeclaration},e)})},canvasMutationCb:wrappedCanvasMutationEmit,fontCb:function(e){return ws({type:es.IncrementalSnapshot,data:_objectSpread2({source:ts.Font},e)})},selectionCb:function(e){ws({type:es.IncrementalSnapshot,data:_objectSpread2({source:ts.Selection},e)})},customElementCb:function(e){ws({type:es.IncrementalSnapshot,data:_objectSpread2({source:ts.CustomElement},e)})},blockClass:T,ignoreClass:O,ignoreSelector:L,maskTextClass:B,maskTextSelector:G,maskInputOptions:Ae,inlineStylesheet:H,sampling:$,recordDOM:ie,recordCanvas:oe,inlineImages:ge,userTriggeredOnInput:de,collectFonts:pe,doc:e,maskInputFn:Y,maskTextFn:K,keepIframeSrcFn:_e,blockSelector:I,slimDOMOptions:Ee,dataURLOptions:te,mirror:Ps,iframeManager:Re,stylesheetManager:Ie,shadowDomManager:Le,processedNodeManager:De,canvasManager:ks,ignoreCSSAttributes:Se,plugins:(null==(_=null==me?void 0:me.filter(function(e){return e.observer}))?void 0:_.map(function(e){return{observer:e.observer,options:e.options,callback:function(_){return ws({type:es.Plugin,data:{plugin:e.name,payload:_}})}}}))||[]},J)};Re.addLoadListener(function(e){try{Fe.push(observe(e.contentDocument))}catch(_){}});var _init=function(){xs(),Fe.push(observe(document)),Ts=!0};return"interactive"===document.readyState||"complete"===document.readyState?_init():(Fe.push(on("DOMContentLoaded",function(){ws({type:es.DomContentLoaded,data:{}}),"DOMContentLoaded"===ce&&_init()})),Fe.push(on("load",function(){ws({type:es.Load,data:{}}),"load"===ce&&_init()},window))),function(){Fe.forEach(function(e){return e()}),De.destroy(),Ts=!1,os=void 0}}catch(Be){}}record.addCustomEvent=function(e,_){if(!Ts)throw new Error("please add custom event after start recording");ws({type:es.Custom,data:{tag:e,payload:_}})},record.freezePage=function(){ls.forEach(function(e){return e.freeze()})},record.takeFullSnapshot=function(e){if(!Ts)throw new Error("please take full snapshot after start recording");xs(e)},record.mirror=Ps,(Rs=Is||(Is={}))[Rs.NotStarted=0]="NotStarted",Rs[Rs.Running=1]="Running",Rs[Rs.Stopped=2]="Stopped",e.record=record}(Ma)),Ma}function requireSessionReplayClient(){if(ka)return Ta;ka=1,Object.defineProperty(Ta,"__esModule",{value:!0}),Ta.SessionReplayClient=void 0;var e=requireRecord(),_=requireSrc$3(),S=function(){return _createClass3(function SessionReplayClient(){_classCallCheck3(this,SessionReplayClient),this._startTimestamp=null,this._endTimestamp=null},[{key:"record",value:function(S,k,E){var T=this,M=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(null!=(0,_._getDocumentSafe)()&&(this._startTimestamp=null,this._endTimestamp=null,this._stopCallback=E,!this._stopFn)){this._stopFn=function(_,S,k){return k?(0,e.record)(Object.assign(Object.assign({},S),{emit:_,checkoutEveryNms:3e4})):(0,e.record)(Object.assign(Object.assign({},S),{emit:_}))}(function(e,_){var k,E,I;M?T._startTimestamp=_?e.timestamp:null!==(k=T._startTimestamp)&&void 0!==k?k:e.timestamp:null!==(E=T._startTimestamp)&&void 0!==E||(T._startTimestamp=e.timestamp),T._endTimestamp=e.timestamp;var R=0;(function(e){return 3===e.type&&2===e.data.source&&(2===e.data.type||4===e.data.type)})(e)&&R++,S(Object.assign(Object.assign({},e),{eventIndex:0}),{startTime:T._startTimestamp,endTime:T._endTimestamp,clickCount:R},null!=_&&_),T._endTimestamp-T._startTimestamp>144e5&&(null===(I=T._stopFn)||void 0===I||I.call(T),T._stopCallback&&T._stopCallback())},k,M)}}},{key:"stop",value:function(){this._stopFn&&(this._stopFn(),this._stopFn=void 0)}},{key:"isRecording",value:function(){return null!=this._stopFn}}])}();return Ta.SessionReplayClient=S,Ta}var Ia,Ra,Pa,Oa={};function requireSessionReplayUtils(){if(Ia)return Oa;Ia=1,Object.defineProperty(Oa,"__esModule",{value:!0}),Oa._appendSlicedMetadata=Oa._slicePayload=Oa._makeLoggableRrwebEvent=Oa.MAX_LOGS=Oa.MAX_INDIVIDUAL_EVENT_BYTES=Oa.REPLAY_ENQUEUE_TRIGGER_BYTES=void 0;var e=requireSrc$3(),_=1048576;return Oa.REPLAY_ENQUEUE_TRIGGER_BYTES=10240,Oa.MAX_INDIVIDUAL_EVENT_BYTES=10485760,Oa.MAX_LOGS=1e4,Oa._makeLoggableRrwebEvent=function(_,S,k,E,T){return{eventName:"statsig::session_recording",value:k,metadata:{session_start_ts:String(E.startTime),session_end_ts:String(E.endTime),clicks_captured_cumulative:String(E.clickCount),rrweb_events:_,rrweb_payload_size:String(S.length),session_replay_sdk_version:e.SDK_VERSION,sdk_instance_id:T}}},Oa._slicePayload=function(e){for(var S=[],k=0;k<e.length;k+=_)S.push(e.slice(k,k+_));return S},Oa._appendSlicedMetadata=function(e,_,S,k,E){e.sliced_id=_,e.slice_index=String(S),e.slice_count=String(k),e.slice_byte_size=String(E)},Oa}function requireSessionReplayBase(){if(Ra)return Ea;Ra=1,Object.defineProperty(Ea,"__esModule",{value:!0}),Ea.SessionReplayBase=Ea.forceStartRecording=Ea.startRecording=Ea.stopRecording=void 0;var e=requireSrc$3(),_=requireSessionReplayClient(),S=requireSessionReplayUtils();function _getInstanceFromSdkKey(_){var S,E,T=null==_?(0,e._getStatsigGlobal)().firstSRInstance:null===(E=null===(S=(0,e._getStatsigGlobal)())||void 0===S?void 0:S.srInstances)||void 0===E?void 0:E[_];return T instanceof k?T:null}Ea.stopRecording=function(e){var _;null===(_=_getInstanceFromSdkKey(e))||void 0===_||_.stopRecording()},Ea.startRecording=function(e){var _;null===(_=_getInstanceFromSdkKey(e))||void 0===_||_.startRecording()},Ea.forceStartRecording=function(e){var _;null===(_=_getInstanceFromSdkKey(e))||void 0===_||_.forceStartRecording()};var k=function(){function SessionReplayBase(S,k){var E=this;_classCallCheck3(this,SessionReplayBase),this._sessionData={startTime:-1,endTime:0,clickCount:0},this._events=[],this._wasStopped=!1,this._currentEventIndex=0,this._totalLogs=0,this._client=S,this._options=k;var T=this._client.getContext(),M=T.sdkKey,I=T.errorBoundary;if(this._errorBoundary=I,this._errorBoundary.wrap(this),this._replayer=new _.SessionReplayClient,this._client.$on("pre_shutdown",function(){return E._shutdown()}),this._client.on("session_expired",function(){E._shutdown("session_expired")}),!(0,e._isServerEnv)()){var R=(0,e._getStatsigGlobal)();R.srInstances=Object.assign(Object.assign({},R.srInstances),_defineProperty3({},M,this)),R.firstSRInstance||(R.firstSRInstance=this)}this._currentSessionID=this._getSessionIdFromClient(),this._subscribeToVisibilityChanged()}return _createClass3(SessionReplayBase,[{key:"forceStartRecording",value:function(){this._wasStopped=!1,this._attemptToStartRecording(!0)}},{key:"stopRecording",value:function(){this._wasStopped=!0,this._shutdown()}},{key:"startRecording",value:function(){var e;this._wasStopped=!1,this._attemptToStartRecording(null===(e=this._options)||void 0===e?void 0:e.forceRecording)}},{key:"isRecording",value:function(){return this._replayer.isRecording()}},{key:"_logRecording",value:function(_){0!==this._events.length&&(_=(0,e._isUnloading)()?"is_leaving_page":_,this._logRecordingWithSessionID(this._currentSessionID,_))}},{key:"_onVisibilityChanged",value:function(e){var _=this;"background"===e&&(this._logRecording(),this._client.flush().catch(function(e){_._errorBoundary.logError("SR::visibility",e)}))}},{key:"_subscribeToVisibilityChanged",value:function(){var _=this._client.getContext().sdkKey;(0,e._subscribeToVisiblityChanged)(function(S){var k,E,T=null===(E=null===(k=(0,e._getStatsigGlobal)())||void 0===k?void 0:k.srInstances)||void 0===E?void 0:E[_];T instanceof SessionReplayBase&&T._onVisibilityChanged(S)})}},{key:"_logRecordingWithSessionID",value:function(_,k){var E=this._sessionData;if(0!==this._events.length){for(var T=JSON.stringify(this._events),M=(0,S._slicePayload)(T),I=M.length>1?(0,e.getUUID)():null,R=0;R<M.length;R++){var O=M[R],D=(0,S._makeLoggableRrwebEvent)(O,T,_,E,this._client.getContext().sdkInstanceID);null!=I&&(0,S._appendSlicedMetadata)(D.metadata,I,R,M.length,O.length),k&&(D.metadata[k]="true"),this._totalLogs++,this._client.logEvent(D),null!=I&&this._client.flush().catch(function(_){e.Log.error(_)})}this._events=[],this._totalLogs>S.MAX_LOGS&&this._shutdown()}}},{key:"_bumpSessionIdleTimerAndLogRecording",value:function(){this._getSessionIdFromClient(),this._logRecording()}},{key:"_getSessionIdFromClient",value:function(){return this._client.getContext().session.data.sessionID}},{key:"_shutdownImpl",value:function(_){var S=this;if(this._replayer.isRecording()){this._replayer.stop();var _handler=function(){e.StatsigMetadataProvider.add({isRecordingSession:"false"}),S._client.off("logs_flushed",_handler)};this._client.$on("logs_flushed",_handler)}0!==this._events.length?(this._logRecording(_),"session_expired"===_&&(this._currentEventIndex=0,this._sessionData=this._makeEmptySessionData())):"session_expired"===_&&(this._currentEventIndex=0,this._sessionData=this._makeEmptySessionData())}},{key:"_makeEmptySessionData",value:function(){return{startTime:-1,endTime:0,clickCount:0}}},{key:"_onRecordingEvent",value:function(_,k){if(this._currentSessionID===this._getSessionIdFromClient())if(this._totalLogs>=S.MAX_LOGS)this._shutdown();else{_.eventIndex=this._currentEventIndex++,this._sessionData.clickCount+=k.clickCount,this._sessionData.startTime=-1===this._sessionData.startTime?k.startTime:Math.min(this._sessionData.startTime,k.startTime),this._sessionData.endTime=Math.max(this._sessionData.endTime,k.endTime);var E=(0,e._fastApproxSizeOf)(_,S.MAX_INDIVIDUAL_EVENT_BYTES);if(E>S.MAX_INDIVIDUAL_EVENT_BYTES)e.Log.warn("SessionReplay event is too large (~".concat(E," bytes) and will not be logged"),_);else{var T=(0,e._fastApproxSizeOf)(this._events,S.REPLAY_ENQUEUE_TRIGGER_BYTES);this._events.push(_),T+E<S.REPLAY_ENQUEUE_TRIGGER_BYTES||((0,e._isCurrentlyVisible)()?this._bumpSessionIdleTimerAndLogRecording():this._logRecording())}}else this._shutdown("session_expired")}}])}();return Ea.SessionReplayBase=k,Ea}var Da,La,Fa={};D("b5",(La||(La=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.forceStartRecording=e.stopRecording=e.startRecording=e.StatsigTriggeredSessionReplayPlugin=e.StatsigSessionReplayPlugin=e.runStatsigTriggeredSessionReplay=e.runStatsigSessionReplay=e.SessionReplay=e.SessionReplayClient=void 0;var _=requireSrc$3(),S=function(){if(Pa)return Aa;Pa=1,Object.defineProperty(Aa,"__esModule",{value:!0}),Aa.SessionReplay=Aa.runStatsigSessionReplay=Aa.StatsigSessionReplayPlugin=void 0;var e=requireSrc$3(),_=requireSessionReplayBase(),S=requireSessionReplayUtils(),k=function(){return _createClass3(function StatsigSessionReplayPlugin(e){_classCallCheck3(this,StatsigSessionReplayPlugin),this.options=e,this.__plugin="session-replay"},[{key:"bind",value:function(e){runStatsigSessionReplay(e,this.options)}}])}();function runStatsigSessionReplay(e,_){new E(e,_)}Aa.StatsigSessionReplayPlugin=k,Aa.runStatsigSessionReplay=runStatsigSessionReplay;var E=function(_){function SessionReplay(e,_){var S,k;return _classCallCheck3(this,SessionReplay),(S=_callSuper(this,SessionReplay,[e,_]))._client.$on("values_updated",function(){var e;S._wasStopped||S._attemptToStartRecording(null===(e=S._options)||void 0===e?void 0:e.forceRecording)}),S._attemptToStartRecording(null===(k=S._options)||void 0===k?void 0:k.forceRecording),S}return _inherits(SessionReplay,_),_createClass3(SessionReplay,[{key:"_shutdown",value:function(e){_superPropGet(SessionReplay,"_shutdownImpl",this,3)([e])}},{key:"_attemptToStartRecording",value:function(){var _,k,E=this,T=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!(this._totalLogs>=S.MAX_LOGS)){var M=this._client.getContext().values;!0===(null==M?void 0:M.recording_blocked)||!T&&!0!==(null==M?void 0:M.can_record_session)||!1===(null==M?void 0:M.passes_session_recording_targeting)?this._shutdown():this._replayer.isRecording()||(this._wasStopped=!1,e.StatsigMetadataProvider.add({isRecordingSession:"true"}),this._replayer.record(function(e,_){return E._onRecordingEvent(e,_)},null!==(k=null===(_=this._options)||void 0===_?void 0:_.rrwebConfig)&&void 0!==k?k:{},function(){E._shutdown()}))}}}])}(_.SessionReplayBase);return Aa.SessionReplay=E,Aa}();Object.defineProperty(e,"SessionReplay",{enumerable:!0,get:function(){return S.SessionReplay}}),Object.defineProperty(e,"StatsigSessionReplayPlugin",{enumerable:!0,get:function(){return S.StatsigSessionReplayPlugin}}),Object.defineProperty(e,"runStatsigSessionReplay",{enumerable:!0,get:function(){return S.runStatsigSessionReplay}});var k=requireSessionReplayBase();Object.defineProperty(e,"forceStartRecording",{enumerable:!0,get:function(){return k.forceStartRecording}}),Object.defineProperty(e,"startRecording",{enumerable:!0,get:function(){return k.startRecording}}),Object.defineProperty(e,"stopRecording",{enumerable:!0,get:function(){return k.stopRecording}});var E=requireSessionReplayClient();Object.defineProperty(e,"SessionReplayClient",{enumerable:!0,get:function(){return E.SessionReplayClient}});var T=function(){if(Da)return Fa;Da=1,Object.defineProperty(Fa,"__esModule",{value:!0}),Fa.TriggeredSessionReplay=Fa.runStatsigTriggeredSessionReplay=Fa.StatsigTriggeredSessionReplayPlugin=void 0;var e=requireSrc$3(),_=requireSessionReplayBase(),S=requireSessionReplayUtils(),k=function(){return _createClass3(function StatsigTriggeredSessionReplayPlugin(e){_classCallCheck3(this,StatsigTriggeredSessionReplayPlugin),this.options=e,this.__plugin="triggered-session-replay"},[{key:"bind",value:function(e){runStatsigTriggeredSessionReplay(e,this.options)}}])}();function runStatsigTriggeredSessionReplay(e,_){new E(e,_)}Fa.StatsigTriggeredSessionReplayPlugin=k,Fa.runStatsigTriggeredSessionReplay=runStatsigTriggeredSessionReplay;var E=function(_){function TriggeredSessionReplay(e,_){var S,k;return _classCallCheck3(this,TriggeredSessionReplay),(S=_callSuper(this,TriggeredSessionReplay,[e,_]))._runningEventData=[],S._isActiveRecording=!1,S._subscribeToClientEvents(_),(null==_?void 0:_.autoStartRecording)?S._attemptToStartRecording(null===(k=S._options)||void 0===k?void 0:k.forceRecording):(null==_?void 0:_.keepRollingWindow)&&S._attemptToStartRollingWindow(),S}return _inherits(TriggeredSessionReplay,_),_createClass3(TriggeredSessionReplay,[{key:"_subscribeToClientEvents",value:function(e){this._subscribeToValuesUpdated(e),this._subscribeToLogEventCalled(),this._subscribeToGateEvaluation(),this._subscribeToExperimentEvaluation()}},{key:"_subscribeToValuesUpdated",value:function(e){var _=this;this._client.$on("values_updated",function(){var S;_._wasStopped||((null==e?void 0:e.autoStartRecording)?_._attemptToStartRecording(null===(S=_._options)||void 0===S?void 0:S.forceRecording):(null==e?void 0:e.keepRollingWindow)&&_._attemptToStartRollingWindow())})}},{key:"_subscribeToLogEventCalled",value:function(){var e=this;this._client.$on("log_event_called",function(_){var S;if(!e._wasStopped){var k=e._client.getContext().values;if(!1!==(null==k?void 0:k.passes_session_recording_targeting)&&null!=(null==k?void 0:k.session_recording_event_triggers)){var E=k.session_recording_event_triggers[_.event.eventName];if(null!=E&&!1!==E.passes_sampling){var T=E.values;null!=T?T.includes(String(null!==(S=_.event.value)&&void 0!==S?S:""))&&e._attemptToStartRecording(!0):e._attemptToStartRecording(!0)}}}})}},{key:"_subscribeToGateEvaluation",value:function(){var e=this;this._client.$on("gate_evaluation",function(_){e._tryStartExposureRecording(_.gate.name,String(_.gate.value))})}},{key:"_subscribeToExperimentEvaluation",value:function(){var e=this;this._client.$on("experiment_evaluation",function(_){var S;e._tryStartExposureRecording(_.experiment.name,null!==(S=_.experiment.groupName)&&void 0!==S?S:"")})}},{key:"_tryStartExposureRecording",value:function(_,S){var k;if(!this._wasStopped){var E=this._client.getContext().values;if(!1!==(null==E?void 0:E.passes_session_recording_targeting)&&null!=(null==E?void 0:E.session_recording_exposure_triggers)){var T=null!==(k=E.session_recording_exposure_triggers[_])&&void 0!==k?k:E.session_recording_exposure_triggers[(0,e._DJB2)(_)];if(null!=T&&!1!==T.passes_sampling){var M=T.values;null!=M?M.includes(S)&&this._attemptToStartRecording(!0):this._attemptToStartRecording(!0)}}}}},{key:"forceStartRecording",value:function(){_superPropGet(TriggeredSessionReplay,"forceStartRecording",this,3)([])}},{key:"stopRecording",value:function(){this._isActiveRecording=!1,this._runningEventData=[],_superPropGet(TriggeredSessionReplay,"stopRecording",this,3)([])}},{key:"_handleStartActiveRecording",value:function(){if(this._isActiveRecording=!0,0!==this._runningEventData.length){for(var _=this._runningEventData.map(function(e){return e.events}).flat(),S=0;S<_.length;S++)_[S].event.eventIndex=S,this._sessionData.clickCount+=_[S].data.clickCount,this._sessionData.startTime=-1===this._sessionData.startTime?_[S].data.startTime:Math.min(this._sessionData.startTime,_[S].data.startTime),this._sessionData.endTime=Math.max(this._sessionData.endTime,_[S].data.endTime);this._events=_.map(function(e){return e.event}),this._currentEventIndex=_.length,(0,e._isCurrentlyVisible)()?this._bumpSessionIdleTimerAndLogRecording():this._logRecording(),this._replayer.stop()}}},{key:"_shutdown",value:function(e){this._isActiveRecording=!1,this._runningEventData=[],_superPropGet(TriggeredSessionReplay,"_shutdownImpl",this,3)([e])}},{key:"_onRecordingEvent",value:function(e,_,S){if(!this._isActiveRecording)return this._currentSessionID!==this._getSessionIdFromClient()?void this._shutdown("session_expired"):void(S&&4===e.type||0===this._runningEventData.length?(this._runningEventData.length>1&&this._runningEventData.shift(),this._runningEventData.push({events:[{event:e,data:_}]})):this._runningEventData[this._runningEventData.length-1].events.push({event:e,data:_}));_superPropGet(TriggeredSessionReplay,"_onRecordingEvent",this,3)([e,_])}},{key:"_attemptToStartRollingWindow",value:function(){var e,_,S=this,k=this._client.getContext().values;!1!==(null==k?void 0:k.passes_session_recording_targeting)?this._replayer.isRecording()||this._replayer.record(function(e,_,k){return S._onRecordingEvent(e,_,k)},null!==(_=null===(e=this._options)||void 0===e?void 0:e.rrwebConfig)&&void 0!==_?_:{},function(){S._shutdown()},!0):this._shutdown()}},{key:"_attemptToStartRecording",value:function(){var _,k,E=this,T=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!(this._totalLogs>=S.MAX_LOGS)){var M=this._client.getContext().values;!0===(null==M?void 0:M.recording_blocked)||!T&&!0!==(null==M?void 0:M.can_record_session)||!1===(null==M?void 0:M.passes_session_recording_targeting)?this._shutdown():(this._handleStartActiveRecording(),this._wasStopped=!1,e.StatsigMetadataProvider.add({isRecordingSession:"true"}),this._replayer.isRecording()||this._replayer.record(function(e,_,S){return E._onRecordingEvent(e,_,S)},null!==(k=null===(_=this._options)||void 0===_?void 0:_.rrwebConfig)&&void 0!==k?k:{},function(){E._shutdown()}))}}}])}(_.SessionReplayBase);return Fa.TriggeredSessionReplay=E,Fa}();Object.defineProperty(e,"StatsigTriggeredSessionReplayPlugin",{enumerable:!0,get:function(){return T.StatsigTriggeredSessionReplayPlugin}}),Object.defineProperty(e,"runStatsigTriggeredSessionReplay",{enumerable:!0,get:function(){return T.runStatsigTriggeredSessionReplay}}),Object.assign((0,_._getStatsigGlobal)(),{SessionReplayClient:E.SessionReplayClient,SessionReplay:S.SessionReplay,runStatsigSessionReplay:S.runStatsigSessionReplay,runStatsigTriggeredSessionReplay:T.runStatsigTriggeredSessionReplay,StatsigSessionReplayPlugin:S.StatsigSessionReplayPlugin,StatsigTriggeredSessionReplayPlugin:T.StatsigTriggeredSessionReplayPlugin,startRecording:k.startRecording,stopRecording:k.stopRecording,forceStartRecording:k.forceStartRecording})}(Ca)),Ca));var Ua,Ba={},Na={},za={};function requireAutoCaptureEvent(){return Ua||(Ua=1,Object.defineProperty(za,"__esModule",{value:!0}),za.AutoCaptureEventName=void 0,za.AutoCaptureEventName={PAGE_VIEW:"auto_capture::page_view",PAGE_VIEW_END:"auto_capture::page_view_end",ERROR:"auto_capture::error",SESSION_START:"auto_capture::session_start",PERFORMANCE:"auto_capture::performance",FORM_SUBMIT:"auto_capture::form_submit",CLICK:"auto_capture::click",RAGE_CLICK:"auto_capture::rage_click",WEB_VITALS:"auto_capture::web_vitals",DEAD_CLICK:"auto_capture::dead_click",COPY:"auto_capture::copy",CONSOLE_LOG:"statsig::log_line"}),za}var Ga,ja={},Va={};function requireCommonUtils(){return Ga||(Ga=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.wrapFunctionWithRestore=e.throttle=e._sanitizeString=e._getAnchorNodeInHierarchy=e._getSafeTimezoneOffset=e._getSafeTimezone=e._getSafeNetworkInformation=e._registerEventHandler=e._getSanitizedPageUrl=e._getSafeUrlString=e._getSafeUrl=e._shouldLogEvent=e._getTargetNode=e._stripEmptyValues=e.interactiveElements=void 0;var _=requireSrc$3(),S=new RegExp("^(?:".concat("(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11})",")$")),k=new RegExp("^(".concat("\\d{3}-?\\d{2}-?\\d{4}",")$"));function _getSafeUrl(){var e,S,k,E,T=null!==(k=null===(S=null===(e=(0,_._getWindowSafe)())||void 0===e?void 0:e.location)||void 0===S?void 0:S.href)&&void 0!==k?k:"";try{E=new URL(T)}catch(fo){E=new URL("error:")}return E}function _getAnchorNodeInHierarchy(e){if(!e)return null;for(var _=e;_;){var S=_.tagName.toLowerCase();if(["body","document"].includes(S))return null;if("a"===_.tagName.toLowerCase())return _;_=_.parentElement}return null}e.interactiveElements=["button","a","input","select","textarea","form","select","label"],e._stripEmptyValues=function(e){return Object.fromEntries(Object.entries(e).filter(function(e){var _=_slicedToArray(e,2),S=(_[0],_[1]);return null!=S&&""!==S&&void 0!==S}))},e._getTargetNode=function(e){if(!e)return null;var _=e.target||e.srcElement;return _&&_ instanceof Element?(3===_.nodeType&&(_=_.parentNode||null),_):null},e._shouldLogEvent=function(_,S){var k=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!_||!S||1!==S.nodeType)return!1;var E=S.tagName.toLowerCase(),T=_.type.toLowerCase();if(S.classList.contains("statsig-no-capture"))return!1;if(k)return!0;switch(E){case"html":return!1;case"form":return["submit"].indexOf(T)>=0;case"input":case"select":case"textarea":return["change","click"].indexOf(T)>=0;default:if("click"===T){var M=window.getComputedStyle(S);if(M&&"pointer"===M.getPropertyValue("cursor"))return!0;if(e.interactiveElements.includes(E))return!0;if("true"===S.getAttribute("contenteditable"))return!0;if(_getAnchorNodeInHierarchy(S))return!0}return!1}},e._getSafeUrl=_getSafeUrl,e._getSafeUrlString=function(){var e=_getSafeUrl().toString();return e.startsWith("error:")?"":e},e._getSanitizedPageUrl=function(){return(0,_._getCurrentPageUrlSafe)()||""},e._registerEventHandler=function(e,_,S){e&&e.addEventListener&&e.addEventListener(_,S,!0)},e._getSafeNetworkInformation=function(){var e=(0,_._getWindowSafe)();if(!e||!e.navigator)return null;var S=e.navigator.connection;return S||null},e._getSafeTimezone=function(){try{return Intl.DateTimeFormat().resolvedOptions().timeZone}catch(fo){return null}},e._getSafeTimezoneOffset=function(){try{return(new Date).getTimezoneOffset()}catch(fo){return null}},e._getAnchorNodeInHierarchy=_getAnchorNodeInHierarchy,e._sanitizeString=function(e){return e?e.replace(/<[^>]*>/g,"").trim().split(/(\s+)/).filter(function(e){return function(e){if(S.test((e||"").replace(/[- ]/g,"")))return!1;if(k.test((e||"").replace(/[- ]/g,"")))return!1;return!0}(e)}).join("").replace(/[\r\n]/g," ").replace(/[ ]+/g," ").substring(0,255):null},e.throttle=function(e,_){var S=0;return function(){var k=Date.now();k-S>=_&&(S=k,e.apply(void 0,arguments))}},e.wrapFunctionWithRestore=function(e,_,S){var k=e[_];if("function"!=typeof k)return function(){};try{var E=S(k);return Object.defineProperty(E,"__statsig_original__",{enumerable:!1,value:k}),e[_]=E,function(){e[_]=k}}catch(Kb){return function(){}}}}(Va)),Va}var Ha,Wa={};function requireConsoleLogsUtils(){if(Ha)return Wa;function _truncateString(e,_){return e.length<=_?e:e.slice(0,_)+"..."}function _isObjectTooDeep(e,_){return _<=0||"object"===_typeof3(e)&&null!==e&&Object.keys(e).some(function(S){return _isObjectTooDeep(e[S],_-1)})}return Ha=1,Object.defineProperty(Wa,"__esModule",{value:!0}),Wa._getStackTrace=Wa._safeStringify=void 0,Wa._safeStringify=function(e,_,S,k){try{return function(e,_,S){if(k=e,"[object Object]"===Object.prototype.toString.call(k)){if(Object.keys(e).length>_)return!0;if(_isObjectTooDeep(e,S))return!0}var k;if("function"==typeof e)return!0;return!1}(e,_,S)?function(e,_){return _truncateString(e.toString(),_)}(e,k):"string"==typeof e?_truncateString(e,k):"object"===_typeof3(e)&&null!==e?_truncateString(JSON.stringify(e),k):_truncateString(String(e),k)}catch(Kb){return _truncateString("[Unserializable]",k)}},Wa._getStackTrace=function(){var e,_;try{return null!==(_=null===(e=(new Error).stack)||void 0===e?void 0:e.split("\n").slice(2))&&void 0!==_?_:[]}catch(S){return[]}},Wa}var qa,Xa,Ya={};function requireMetadataUtils(){if(qa)return Ya;qa=1,Object.defineProperty(Ya,"__esModule",{value:!0}),Ya._getPossibleFirstTouchMetadata=Ya._getNetworkInfo=Ya._gatherAllMetadata=Ya._gatherCommonMetadata=void 0;var e=requireSrc$3(),_=requireCommonUtils();function _gatherCommonMetadata(S){var k,E,T,M,I,R,O,D,L=(0,e._getDocumentSafe)(),U=(0,e._getWindowSafe)();return(0,_._stripEmptyValues)(Object.assign({title:null==L?void 0:L.title,current_url:null===(k=null==U?void 0:U.location)||void 0===k?void 0:k.href,user_agent:(null===(E=null==U?void 0:U.navigator)||void 0===E?void 0:E.userAgent)&&(null===(M=null===(T=null==U?void 0:U.navigator)||void 0===T?void 0:T.userAgent)||void 0===M?void 0:M.length)>200?U.navigator.userAgent.substring(0,200):null===(I=null==U?void 0:U.navigator)||void 0===I?void 0:I.userAgent,locale:null===(R=null==U?void 0:U.navigator)||void 0===R?void 0:R.language,hostname:S.hostname,pathname:S.pathname,screen_width:null===(O=null==U?void 0:U.screen)||void 0===O?void 0:O.width,screen_height:null===(D=null==U?void 0:U.screen)||void 0===D?void 0:D.height,viewport_width:null==U?void 0:U.innerWidth,viewport_height:null==U?void 0:U.innerHeight,viewport:"".concat(null==U?void 0:U.innerWidth,"x").concat(null==U?void 0:U.innerHeight),timestamp:Date.now(),timezone:(0,_._getSafeTimezone)(),timezone_offset:(0,_._getSafeTimezoneOffset)()},_getNetworkInfo()))}function _getNetworkInfo(){var e=(0,_._getSafeNetworkInformation)(),S={};return void 0!==(null==e?void 0:e.effectiveType)&&(S.effective_connection_type=e.effectiveType),void 0!==(null==e?void 0:e.rtt)&&(S.rtt_ms=e.rtt),void 0!==(null==e?void 0:e.downlink)&&(S.downlink_mbps=e.downlink,S.downlink_kbps=1e3*e.downlink),void 0!==(null==e?void 0:e.saveData)&&(S.save_data=e.saveData),S}function getReferrerInfo(e){var _=(null==e?void 0:e.referrer)||"";if(!_)return{referrer:null,referrer_domain:null,referrer_path:null,searchEngine:"",searchQuery:""};try{var S=new URL(_),k=S.hostname,E=["google","bing","yahoo","duckduckgo","baidu"].find(function(e){return k.includes(e+".")})||"",T=S.searchParams.get("yahoo"===E?"p":"q")||"";return{referrer:_,referrer_domain:S.hostname,referrer_path:S.pathname,searchEngine:E,searchQuery:T}}catch(fo){return{referrer:null,referrer_domain:null,referrer_path:null,searchEngine:"",searchQuery:""}}}function getCampaignParams(e){var _=e.searchParams,S={};return["utm_source","utm_medium","utm_campaign","utm_term","utm_content","msclkid","dclid","fbclid","gad_source","gclid","gclsrc","wbraid","utm_id","irclid","igshid","_kx","li_fat_id","mc_cid","mc_eid","epik","qclid","rdt_cid","sccid","ttc","ttclid","ttc_id","twclid"].forEach(function(e){var k=_.get(e);k&&(S[e]=k)}),S}return Ya._gatherCommonMetadata=_gatherCommonMetadata,Ya._gatherAllMetadata=function(S){var k=(0,e._getDocumentSafe)(),E=(0,e._getWindowSafe)();if(!k||!E)return{};var T=getReferrerInfo(k),M=_gatherCommonMetadata(S),I=getCampaignParams(S),R={};return S.searchParams.forEach(function(e,_){R[_]=e}),Object.assign(Object.assign({},M),(0,_._stripEmptyValues)(Object.assign(Object.assign(Object.assign({},T),I),R)))},Ya._getNetworkInfo=_getNetworkInfo,Ya._getPossibleFirstTouchMetadata=function(S){var k=(0,e._getDocumentSafe)(),E=(0,e._getWindowSafe)();if(!k||!E)return{};for(var T=getReferrerInfo(k),M=getCampaignParams(S),I=(0,_._stripEmptyValues)(Object.assign(Object.assign({},T),M)),R={},O=0,D=Object.entries(I);O<D.length;O++){var L=_slicedToArray(D[O],2),U=L[0],B=L[1];R["$s_".concat(U)]=B}return R},Ya}var Ka,Ja,Qa={},Za={};function requireEventUtils(){if(Ka)return Za;Ka=1,Object.defineProperty(Za,"__esModule",{value:!0}),Za._getMetadataFromElement=Za._gatherCopyEventData=Za._gatherEventData=void 0;var e=requireSrc$3(),_=requireCommonUtils(),S=1e3;function _truncateString(e,_){return e?e.length>_?e.substring(0,_)+"...":e:null}function _getSafeMetadataAttributes(e){var _={};return _.class=(_truncateString(e.getAttribute("class"),S)||"").replace(/\s+/g," ").trim(),_.id=_truncateString(e.getAttribute("id"),S),_.ariaLabel=_truncateString(e.getAttribute("aria-label"),S),_.name=_truncateString(e.getAttribute("name"),S),_}function _getMetadataFromElement(e){var _={},S=_getSafeMetadataAttributes(e);Object.assign(_,S);var k=Array.from(e.classList);return _.classList=k.length>0?k.slice(0,100):null,_.selector=function(e){if(!e)return"";if(!e.parentNode){var _=e.tagName.toLowerCase();if(e.id)return"#".concat(e.id);var S=_;if(e.className&&"string"==typeof e.className){var k=e.className.trim().split(/\s+/);k.length>0&&""!==k[0]&&(S+="."+k.join("."))}return S}var E=[],T=e,M=0;for(;T&&T.nodeType===Node.ELEMENT_NODE&&M<50;){var I=getElementSelector(T);if(E.unshift(I),T.id)break;if((T=T.parentElement)&&"body"===T.tagName.toLowerCase())break;M++}return E.join(" > ")}(e),_}function getElementSelector(e){var _=e.tagName.toLowerCase();if(e.id)return"#".concat(e.id);var S=_;if(e.className&&"string"==typeof e.className){var k=e.className.trim().split(/\s+/);k.length>0&&""!==k[0]&&(S+="."+k.join("."))}var E=e.parentElement;if(E&&E.children.length>1){for(var T=1,M=1,I=e.previousElementSibling;I;)T++,I.tagName===e.tagName&&M++,I=I.previousElementSibling;S+=":nth-child(".concat(T,")"),(M>1||function(e){for(var _=e.nextElementSibling;_;){if(_.tagName===e.tagName)return!0;_=_.nextElementSibling}return!1}(e))&&(S+=":nth-of-type(".concat(M,")"))}return S}return Za._gatherEventData=function(e){var S=(0,_._getSanitizedPageUrl)()||"",k=e.tagName.toLowerCase();if(function(e){return"input"===e.tagName.toLowerCase()&&["button","checkbox","submit","reset"].includes(e.getAttribute("type")||"")||"textarea"===e.tagName.toLowerCase()||"select"===e.tagName.toLowerCase()||"true"===e.getAttribute("contenteditable")}(e))return{value:S,metadata:_getSafeMetadataAttributes(e)};var E={};E.tagName=k;var T=_getMetadataFromElement(e);Object.assign(E,T),"form"===k&&Object.assign(E,function(e){var _,S={};return S.action=e.getAttribute("action"),S.method=null!==(_=e.getAttribute("method"))&&void 0!==_?_:"GET",S.formName=e.getAttribute("name"),S.formId=e.getAttribute("id"),S}(e)),"input"===k&&Object.assign(E,function(e){var _={};return _.content=e.value,_.inputName=e.getAttribute("name"),_}(e));var M=(0,_._getAnchorNodeInHierarchy)(e);return M&&Object.assign(E,function(e){var _={};return _.href=e.getAttribute("href"),_}(M)),("button"===k||M)&&Object.assign(E,function(e){var _={};_.content=(e.textContent||"").trim();var S=function(e){var _={};if(!e)return _;var S=null==e?void 0:e.dataset;if(!S)return _;for(var k in S)_["data-".concat(k)]=S[k]||"";return _}(e);return Object.assign(_,S),_}(M||e)),function(e){var S;if(Array.isArray(e.classList)&&(null===(S=e.classList)||void 0===S?void 0:S.includes("statsig-ctr-capture")))return!0;var k=e.href;if(k)try{var E=(0,_._getSafeUrl)(),T=new URL(k);return E.host!==T.host}catch(M){return!1}return!1}(E)&&(E.isOutbound="true"),{value:S,metadata:E}},Za._gatherCopyEventData=function(S){var k,E,T=null===(E=null===(k=(0,e._getWindowSafe)())||void 0===k?void 0:k.getSelection())||void 0===E?void 0:E.toString(),M={};M.selectedText=(0,_._sanitizeString)(T);var I=S.type||"clipboard";return M.clipType=I,M},Za._getMetadataFromElement=_getMetadataFromElement,Za}var $a,eo={};var to,ro={};var no,io,ao,oo,so={},uo={exports:{}};function requireWebVitals_umd(){return no||(no=1,function(e,_){!function(e){var _=-1,n=function(e){addEventListener("pageshow",function(S){S.persisted&&(_=S.timeStamp,e(S))},!0)},i=function(e,_,S,k){var E,T;return function(M){_.value>=0&&(M||k)&&((T=_.value-(null!=E?E:0))||void 0===E)&&(E=_.value,_.delta=T,_.rating=function(e,_){return e>_[1]?"poor":e>_[0]?"needs-improvement":"good"}(_.value,S),e(_))}},o=function(e){requestAnimationFrame(function(){return requestAnimationFrame(function(){return e()})})},s=function(){var e=performance.getEntriesByType("navigation")[0];if(e&&e.responseStart>0&&e.responseStart<performance.now())return e},r=function(){var e,_=s();return null!==(e=null==_?void 0:_.activationStart)&&void 0!==e?e:0},c=function(e){var S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,k=s(),E="navigate";return _>=0?E="back-forward-cache":k&&(document.prerendering||r()>0?E="prerender":document.wasDiscarded?E="restore":k.type&&(E=k.type.replace(/_/g,"-"))),{name:e,value:S,rating:"good",delta:0,entries:[],id:"v5-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:E}},S=new WeakMap;function d(e,_){return S.get(e)||S.set(e,new _),S.get(e)}var k,E=function(){function h(){_classCallCheck3(this,h),_defineProperty3(this,"t",void 0),_defineProperty3(this,"i",0),_defineProperty3(this,"o",[])}return _createClass3(h,[{key:"h",value:function(e){var _;if(!e.hadRecentInput){var S=this.o[0],k=this.o.at(-1);this.i&&S&&k&&e.startTime-k.startTime<1e3&&e.startTime-S.startTime<5e3?(this.i+=e.value,this.o.push(e)):(this.i=e.value,this.o=[e]),null===(_=this.t)||void 0===_||_.call(this,e)}}}])}(),f=function(e,_){var S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var k=new PerformanceObserver(function(e){Promise.resolve().then(function(){_(e.getEntries())})});return k.observe(_objectSpread2({type:e,buffered:!0},S)),k}}catch(E){}},u=function(e){var _=!1;return function(){_||(e(),_=!0)}},T=-1,m=function(){return"hidden"!==document.visibilityState||document.prerendering?1/0:0},p=function(e){"hidden"===document.visibilityState&&T>-1&&(T="visibilitychange"===e.type?e.timeStamp:0,v())},g=function(){addEventListener("visibilitychange",p,!0),addEventListener("prerenderingchange",p,!0)},v=function(){removeEventListener("visibilitychange",p,!0),removeEventListener("prerenderingchange",p,!0)},y=function(){if(T<0){var e,_=r(),S=document.prerendering||null===(e=globalThis.performance.getEntriesByType("visibility-state").filter(function(e){return"hidden"===e.name&&e.startTime>_})[0])||void 0===e?void 0:e.startTime;T=null!=S?S:m(),g(),n(function(){setTimeout(function(){T=m(),g()})})}return{get firstHiddenTime(){return T}}},b=function(e){document.prerendering?addEventListener("prerenderingchange",function(){return e()},!0):e()},M=[1800,3e3],P=function(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};b(function(){var S,k=y(),E=c("FCP"),T=f("paint",function(e){var _,M=_createForOfIteratorHelper2(e);try{for(M.s();!(_=M.n()).done;){var I=_.value;"first-contentful-paint"===I.name&&(T.disconnect(),I.startTime<k.firstHiddenTime&&(E.value=Math.max(I.startTime-r(),0),E.entries.push(I),S(!0)))}}catch(R){M.e(R)}finally{M.f()}});T&&(S=i(e,E,M,_.reportAllChanges),n(function(k){E=c("FCP"),S=i(e,E,M,_.reportAllChanges),o(function(){E.value=performance.now()-k.timeStamp,S(!0)})}))})},I=[.1,.25],R=0,O=1/0,D=0,C=function(e){var _,S=_createForOfIteratorHelper2(e);try{for(S.s();!(_=S.n()).done;){var k=_.value;k.interactionId&&(O=Math.min(O,k.interactionId),D=Math.max(D,k.interactionId),R=D?(D-O)/7+1:0)}}catch(E){S.e(E)}finally{S.f()}},w=function(){var e;return k?R:null!==(e=performance.interactionCount)&&void 0!==e?e:0},F=function(){"interactionCount"in performance||k||(k=f("event",C,{type:"event",buffered:!0,durationThreshold:0}))},L=0,U=function(){function x(){_classCallCheck3(this,x),_defineProperty3(this,"u",[]),_defineProperty3(this,"l",new Map),_defineProperty3(this,"m",void 0),_defineProperty3(this,"p",void 0)}return _createClass3(x,[{key:"v",value:function(){L=w(),this.u.length=0,this.l.clear()}},{key:"T",value:function(){var e=Math.min(this.u.length-1,Math.floor((w()-L)/50));return this.u[e]}},{key:"h",value:function(e){var _;if(null!==(_=this.m)&&void 0!==_&&_.call(this,e),e.interactionId||"first-input"===e.entryType){var S=this.u.at(-1),k=this.l.get(e.interactionId);if(k||this.u.length<10||e.duration>S.P){var E;if(k?e.duration>k.P?(k.entries=[e],k.P=e.duration):e.duration===k.P&&e.startTime===k.entries[0].startTime&&k.entries.push(e):(k={id:e.interactionId,entries:[e],P:e.duration},this.l.set(k.id,k),this.u.push(k)),this.u.sort(function(e,_){return _.P-e.P}),this.u.length>10){var T,M=_createForOfIteratorHelper2(this.u.splice(10));try{for(M.s();!(T=M.n()).done;){var I=T.value;this.l.delete(I.id)}}catch(R){M.e(R)}finally{M.f()}}null===(E=this.p)||void 0===E||E.call(this,k)}}}}])}(),A=function(e){var _=globalThis.requestIdleCallback||setTimeout;"hidden"===document.visibilityState?e():(e=u(e),document.addEventListener("visibilitychange",e,{once:!0}),_(function(){e(),document.removeEventListener("visibilitychange",e)}))},B=[200,500],z=function(){function N(){_classCallCheck3(this,N),_defineProperty3(this,"m",void 0)}return _createClass3(N,[{key:"h",value:function(e){var _;null===(_=this.m)||void 0===_||_.call(this,e)}}])}(),G=[2500,4e3],j=[800,1800],_O=function(e){document.prerendering?b(function(){return _O(e)}):"complete"!==document.readyState?addEventListener("load",function(){return _O(e)},!0):setTimeout(e)};e.CLSThresholds=I,e.FCPThresholds=M,e.INPThresholds=B,e.LCPThresholds=G,e.TTFBThresholds=j,e.onCLS=function(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};P(u(function(){var S,k=c("CLS",0),T=d(_,E),u=function(e){var _,E=_createForOfIteratorHelper2(e);try{for(E.s();!(_=E.n()).done;){var M=_.value;T.h(M)}}catch(I){E.e(I)}finally{E.f()}T.i>k.value&&(k.value=T.i,k.entries=T.o,S())},M=f("layout-shift",u);M&&(S=i(e,k,I,_.reportAllChanges),document.addEventListener("visibilitychange",function(){"hidden"===document.visibilityState&&(u(M.takeRecords()),S(!0))}),n(function(){T.i=0,k=c("CLS",0),S=i(e,k,I,_.reportAllChanges),o(function(){return S()})}),setTimeout(S))}))},e.onFCP=P,e.onINP=function(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};globalThis.PerformanceEventTiming&&"interactionId"in PerformanceEventTiming.prototype&&b(function(){var S;F();var k,E=c("INP"),T=d(_,U),a=function(e){A(function(){var _,S=_createForOfIteratorHelper2(e);try{for(S.s();!(_=S.n()).done;){var M=_.value;T.h(M)}}catch(R){S.e(R)}finally{S.f()}var I=T.T();I&&I.P!==E.value&&(E.value=I.P,E.entries=I.entries,k())})},M=f("event",a,{durationThreshold:null!==(S=_.durationThreshold)&&void 0!==S?S:40});k=i(e,E,B,_.reportAllChanges),M&&(M.observe({type:"first-input",buffered:!0}),document.addEventListener("visibilitychange",function(){"hidden"===document.visibilityState&&(a(M.takeRecords()),k(!0))}),n(function(){T.v(),E=c("INP"),k=i(e,E,B,_.reportAllChanges)}))})},e.onLCP=function(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};b(function(){var S,k=y(),E=c("LCP"),T=d(_,z),m=function(e){_.reportAllChanges||(e=e.slice(-1));var M,I=_createForOfIteratorHelper2(e);try{for(I.s();!(M=I.n()).done;){var R=M.value;T.h(R),R.startTime<k.firstHiddenTime&&(E.value=Math.max(R.startTime-r(),0),E.entries=[R],S())}}catch(O){I.e(O)}finally{I.f()}},M=f("largest-contentful-paint",m);if(M){S=i(e,E,G,_.reportAllChanges);for(var I=u(function(){m(M.takeRecords()),M.disconnect(),S(!0)}),R=0,O=["keydown","click","visibilitychange"];R<O.length;R++){var D=O[R];addEventListener(D,function(){return A(I)},{capture:!0,once:!0})}n(function(k){E=c("LCP"),S=i(e,E,G,_.reportAllChanges),o(function(){E.value=performance.now()-k.timeStamp,S(!0)})})}})},e.onTTFB=function(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},S=c("TTFB"),k=i(e,S,j,_.reportAllChanges);_O(function(){var E=s();E&&(S.value=Math.max(E.responseStart-r(),0),S.entries=[E],k(!0),n(function(){S=c("TTFB",0),(k=i(e,S,j,_.reportAllChanges))(!0)}))})}}(_)}(0,uo.exports)),uo.exports}function requireAutoCapture(){if(ao)return Na;ao=1,Object.defineProperty(Na,"__esModule",{value:!0}),Na.AutoCapture=Na.runStatsigAutoCapture=Na.StatsigAutoCapturePlugin=void 0;var e=requireSrc$3(),_=requireAutoCaptureEvent(),S=function(){if(Xa)return ja;Xa=1,Object.defineProperty(ja,"__esModule",{value:!0}),ja.ConsoleLogManager=void 0;var e=requireSrc$3(),_=requireAutoCaptureEvent(),S=requireCommonUtils(),k=requireConsoleLogsUtils(),E=requireMetadataUtils(),T={trace:10,debug:20,log:30,info:30,warn:40,error:50},M=function(){return _createClass3(function ConsoleLogManager(e,_,S){var k,E,T,M;_classCallCheck3(this,ConsoleLogManager),this._enqueueFn=e,this._errorBoundary=_,this._options=S,this._restoreFns=[],this._isTracking=!1,this._logLevel="info",this.__source="js-auto-capture",this._logLevel=null!==(k=this._options.logLevel)&&void 0!==k?k:"info",this._maxKeys=null!==(E=this._options.maxKeys)&&void 0!==E?E:10,this._maxDepth=null!==(T=this._options.maxDepth)&&void 0!==T?T:10,this._maxStringLength=null!==(M=this._options.maxStringLength)&&void 0!==M?M:500},[{key:"startTracking",value:function(){try{if(this._isTracking||!this._options.enabled)return;if(!(0,e._getWindowSafe)())return;this._patchConsole(),this._isTracking=!0}catch(_){e.Log.error("Error starting console log tracking",_),this._errorBoundary.logError("autoCapture:ConsoleLogManager",_)}}},{key:"stopTracking",value:function(){this._isTracking&&(this._restoreFns.forEach(function(e){return e()}),this._restoreFns=[],this._isTracking=!1)}},{key:"_patchConsole",value:function(){var e=this;Object.entries(T).forEach(function(_){var E=_slicedToArray(_,2),M=E[0];if(!(E[1]<T[e._logLevel])&&console[M]){var I=function(){}.bind(),R=!1,O=(0,S.wrapFunctionWithRestore)(console,M,function(_){return function(){for(var S=arguments.length,E=new Array(S),T=0;T<S;T++)E[T]=arguments[T];if(_.apply(void 0,E),!R){R=!0;try{var O=E.map(function(_){return(0,k._safeStringify)(_,e._maxKeys,e._maxDepth,e._maxStringLength)}),D=(0,k._getStackTrace)();e._enqueueConsoleLog(M,O,D)}catch(L){I.apply(void 0,["console observer error:",L].concat(E)),e._errorBoundary.logError("autoCapture:ConsoleLogManager",L)}finally{R=!1}}}});e._restoreFns.push(O)}})}},{key:"_enqueueConsoleLog",value:function(e,k,T){if(this._shouldLog()){var M=Object.assign({status:"log"===e?"info":e,log_level:e,payload:k,trace:T,timestamp:Date.now(),source:this.__source},(0,E._gatherAllMetadata)((0,S._getSafeUrl)()));this._enqueueFn(_.AutoCaptureEventName.CONSOLE_LOG,k.join(" "),M)}}},{key:"_shouldLog",value:function(){return!this._options.sampleRate||"number"!=typeof this._options.sampleRate||this._options.sampleRate<=0||this._options.sampleRate>=1||Math.random()<this._options.sampleRate}}])}();return ja.ConsoleLogManager=M,ja}(),k=(Ja||(Ja=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DeadClickConfig=void 0;var _=requireSrc$3(),S=requireAutoCaptureEvent(),k=requireCommonUtils(),E=requireEventUtils(),T=requireMetadataUtils();e.DeadClickConfig={CLICK_CHECK_TIMEOUT:1e3,SCROLL_DELAY_MS:100,SELECTION_CHANGE_DELAY_MS:100,MUTATION_DELAY_MS:2500,ABSOLUTE_DEAD_CLICK_TIMEOUT:2750};var M=function(){return _createClass3(function DeadClickManager(_,S){var E=this;_classCallCheck3(this,DeadClickManager),this._enqueueFn=_,this._errorBoundary=S,this._lastMutationTime=0,this._lastSelectionChangeTime=0,this._clicks=[],this._deadClickConfig=e.DeadClickConfig,this._handleScroll=(0,k.throttle)(function(){var e=Date.now();E._clicks.forEach(function(_){_.scrollDelayMs||(_.scrollDelayMs=e-_.timestamp)})},50)},[{key:"startTracking",value:function(){var e=this;try{var S=(0,_._getWindowSafe)();if(!S)return;S.addEventListener("click",function(_){return e._handleClick(_)},{capture:!0}),S.addEventListener("scroll",function(){return e._handleScroll()},{capture:!0,passive:!0}),S.addEventListener("selectionchange",function(){return e._handleSelectionChange()}),this._setupMutationObserver()}catch(k){_.Log.error("Error starting dead click tracking",k),this._errorBoundary.logError("autoCapture:DeadClickManager",k)}}},{key:"_handleClick",value:function(e){var S,E,T=this,M=e.target;if(M){var I={timestamp:Date.now(),eventTarget:M};k.interactiveElements.includes(null===(S=null==M?void 0:M.tagName)||void 0===S?void 0:S.toLowerCase())||this._clicks.push(I),this._clicks.length&&!this._clickCheckTimer&&(this._clickCheckTimer=null===(E=(0,_._getWindowSafe)())||void 0===E?void 0:E.setTimeout(function(){T._checkForDeadClick()},this._deadClickConfig.CLICK_CHECK_TIMEOUT))}}},{key:"_handleSelectionChange",value:function(){this._lastSelectionChangeTime=Date.now()}},{key:"_setupMutationObserver",value:function(){var e=this,S=(0,_._getDocumentSafe)();S&&(this._observer=new MutationObserver(function(){e._lastMutationTime=Date.now()}),this._observer.observe(S.body,{childList:!0,subtree:!0,attributes:!0,characterData:!0}))}},{key:"_checkForDeadClick",value:function(){var e,S=this;if(this._clicks.length){clearTimeout(this._clickCheckTimer),this._clickCheckTimer=void 0;var k=this._clicks;this._clicks=[];var E,T=_createForOfIteratorHelper2(k);try{for(T.s();!(E=T.n()).done;){var M=E.value;this._updateClickDelayMs(M);var I=null!=M.scrollDelayMs&&M.scrollDelayMs<this._deadClickConfig.SCROLL_DELAY_MS,R=null!=M.selectionChangeDelayMs&&M.selectionChangeDelayMs<this._deadClickConfig.SELECTION_CHANGE_DELAY_MS,O=null!=M.mutationDelayMs&&M.mutationDelayMs<this._deadClickConfig.MUTATION_DELAY_MS;if(!(I||R||O)){var D=null!=M.scrollDelayMs&&M.scrollDelayMs>this._deadClickConfig.SCROLL_DELAY_MS,L=null!=M.selectionChangeDelayMs&&M.selectionChangeDelayMs>this._deadClickConfig.SELECTION_CHANGE_DELAY_MS,U=null!=M.mutationDelayMs&&M.mutationDelayMs>this._deadClickConfig.MUTATION_DELAY_MS,B=null!=M.absoluteDelayMs&&M.absoluteDelayMs>this._deadClickConfig.ABSOLUTE_DEAD_CLICK_TIMEOUT;D||L||U||B?this._logDeadClick(M,{scrollTimeout:D,selectionChangeTimeout:L,mutationTimeout:U,absoluteTimeout:B}):null!=M.absoluteDelayMs&&M.absoluteDelayMs<this._deadClickConfig.ABSOLUTE_DEAD_CLICK_TIMEOUT&&this._clicks.push(M)}}}catch(z){T.e(z)}finally{T.f()}this._clicks.length&&!this._clickCheckTimer&&(this._clickCheckTimer=null===(e=(0,_._getWindowSafe)())||void 0===e?void 0:e.setTimeout(function(){S._checkForDeadClick()},this._deadClickConfig.CLICK_CHECK_TIMEOUT))}}},{key:"_logDeadClick",value:function(e,_){var M=(0,E._gatherEventData)(e.eventTarget),I=M.value,R=M.metadata;I&&this._enqueueFn(S.AutoCaptureEventName.DEAD_CLICK,I,Object.assign(Object.assign(Object.assign(Object.assign({},R),_),(0,T._gatherCommonMetadata)((0,k._getSafeUrl)())),{scrollDelayMs:e.scrollDelayMs,selectionChangeDelayMs:e.selectionChangeDelayMs,mutationDelayMs:e.mutationDelayMs,absoluteDelayMs:e.absoluteDelayMs}))}},{key:"_updateClickDelayMs",value:function(e){!e.mutationDelayMs&&this._lastMutationTime>0&&e.timestamp<=this._lastMutationTime&&(e.mutationDelayMs=Date.now()-this._lastMutationTime),!e.selectionChangeDelayMs&&this._lastSelectionChangeTime>0&&e.timestamp<=this._lastSelectionChangeTime&&(e.selectionChangeDelayMs=Date.now()-this._lastSelectionChangeTime),e.absoluteDelayMs=Date.now()-e.timestamp}}])}();e.default=M}(Qa)),Qa),E=function(){if($a)return eo;$a=1,Object.defineProperty(eo,"__esModule",{value:!0}),eo.EngagementManager=void 0;var e=requireSrc$3(),_=function(){return _createClass3(function EngagementManager(){_classCallCheck3(this,EngagementManager),this._lastScrollY=0,this._maxScrollY=0,this._lastScrollPercentage=0,this._maxScrollPercentage=0,this._lastPageViewTime=Date.now(),this._inactiveTimer=null,this._onInactivityCallback=null,this._meaningfulEngagementOccurred=!1,this._initializeScrollTracking()},[{key:"_initializeScrollTracking",value:function(){var _=this,S=(0,e._getWindowSafe)();S&&(S.addEventListener("scroll",function(){return _._handleScroll()}),S.addEventListener("scrollend",function(){return _._handleScroll()}),S.addEventListener("resize",function(){return _._handleScroll()}))}},{key:"_handleScroll",value:function(){var _=(0,e._getWindowSafe)(),S=(0,e._getDocumentSafe)();if(_&&S){var k=S.body.scrollHeight,E=_.scrollY||S.documentElement.scrollTop||0,T=_.innerHeight;this._lastScrollY=E,this._maxScrollY=Math.max(this._maxScrollY,E);var M=Math.min(100,Math.round((E+T)/k*100));this._lastScrollPercentage=M,this._maxScrollPercentage=Math.max(this._maxScrollPercentage,M),this.bumpInactiveTimer()}}},{key:"getScrollMetrics",value:function(){return{lastScrollY:this._lastScrollY,maxScrollY:this._maxScrollY,lastScrollPercentage:this._lastScrollPercentage,maxScrollPercentage:this._maxScrollPercentage,scrollDepth:this._maxScrollPercentage}}},{key:"getPageViewLength",value:function(){return Date.now()-this._lastPageViewTime}},{key:"setLastPageViewTime",value:function(e){this._lastPageViewTime=e}},{key:"startInactivityTracking",value:function(e){this._onInactivityCallback=e}},{key:"bumpInactiveTimer",value:function(){var _=this,S=(0,e._getWindowSafe)();S&&(this._inactiveTimer&&clearTimeout(this._inactiveTimer),this._inactiveTimer=S.setTimeout(function(){_._onInactivityCallback&&_._onInactivityCallback()},6e5))}},{key:"setMeaningfulEngagementOccurred",value:function(e){this._meaningfulEngagementOccurred=e}},{key:"getPageViewEndMetadata",value:function(){var e=Object.assign(Object.assign({},this.getScrollMetrics()),{pageViewLength:this.getPageViewLength(),meaningfulEngagementOccurred:this._meaningfulEngagementOccurred});return this.setMeaningfulEngagementOccurred(!1),e}}])}();return eo.EngagementManager=_,eo}(),T=function(){if(to)return ro;to=1,Object.defineProperty(ro,"__esModule",{value:!0});var e=function(){return _createClass3(function RageClickManager(){_classCallCheck3(this,RageClickManager),this._clicks=[]},[{key:"isRageClick",value:function(e,_,S){var k,E,T;return this._clicks=this._clicks.filter(function(e){return S-e.timestamp<1e3}),this._clicks.length>0&&(E=e-(k=this._clicks[this._clicks.length-1]).x,T=_-k.y,!(Math.abs(E)+Math.abs(T)<=30))&&(this._clicks=[]),this._clicks.push({x:e,y:_,timestamp:S}),this._clicks.length>=3}}])}();return ro.default=e,ro}(),M=function(){if(io)return so;io=1,Object.defineProperty(so,"__esModule",{value:!0}),so.WebVitalsManager=void 0;var e=requireWebVitals_umd(),_=requireSrc$3(),S=requireAutoCaptureEvent(),k=requireCommonUtils(),E=["CLS","FCP","INP","LCP","TTFB"],T=function(){return _createClass3(function WebVitalsManager(e,_){_classCallCheck3(this,WebVitalsManager),this._enqueueFn=e,this._errorBoundary=_,this._isInitialized=!1,this._metricEvent={url:(0,k._getSafeUrlString)(),sanitizedUrl:(0,k._getSanitizedPageUrl)(),metrics:[],firstMetricTimestamp:void 0}},[{key:"startTracking",value:function(){var S,k,E=this;try{if(this._isInitialized)return;var T=null===(k=null===(S=(0,_._getWindowSafe)())||void 0===S?void 0:S.location)||void 0===k?void 0:k.protocol;if("https:"!==T&&"http:"!==T)return;(0,e.onCLS)(function(e){return E._handleMetric(e)}),(0,e.onFCP)(function(e){return E._handleMetric(e)}),(0,e.onINP)(function(e){return E._handleMetric(e)}),(0,e.onLCP)(function(e){return E._handleMetric(e)}),(0,e.onTTFB)(function(e){return E._handleMetric(e)}),this._isInitialized=!0}catch(M){_.Log.error("Error starting web vitals tracking",M),this._errorBoundary.logError("autoCapture:WebVitalsManager",M)}}},{key:"_handleMetric",value:function(e){if(void 0===this._metricEvent.firstMetricTimestamp&&(this._metricEvent.firstMetricTimestamp=Date.now()),void 0!==e&&void 0!==(null==e?void 0:e.name)){var _=(0,k._getSafeUrlString)();if(""!==_&&E.includes(e.name)){_!==this._metricEvent.url&&(this._enqueueWebVitalsAutoCaptureEvent(),this._metricEvent.url=_);var S=e;this._metricEvent.metrics.push({name:S.name,value:S.value,delta:S.delta,id:S.id}),this._metricEvent.metrics.length===E.length&&this._enqueueWebVitalsAutoCaptureEvent()}}}},{key:"_enqueueWebVitalsAutoCaptureEvent",value:function(){if(""!==this._metricEvent.url&&0!==this._metricEvent.metrics.length){var e={};this._metricEvent.metrics.forEach(function(_){var S=_.name.toLowerCase();e["".concat(S,"_value")]=_.value,e["".concat(S,"_delta")]=_.delta,e["".concat(S,"_id")]=_.id}),this._enqueueFn(S.AutoCaptureEventName.WEB_VITALS,this._metricEvent.sanitizedUrl,Object.assign(Object.assign({},e),{first_metric_timestamp:this._metricEvent.firstMetricTimestamp})),this._metricEvent={url:(0,k._getSafeUrlString)(),sanitizedUrl:(0,k._getSanitizedPageUrl)(),metrics:[],firstMetricTimestamp:void 0}}}}])}();return so.WebVitalsManager=T,so}(),I=requireCommonUtils(),R=requireEventUtils(),O=requireMetadataUtils(),D={submit:_.AutoCaptureEventName.FORM_SUBMIT,click:_.AutoCaptureEventName.CLICK,copy:_.AutoCaptureEventName.COPY,cut:_.AutoCaptureEventName.COPY},L=function(){return _createClass3(function StatsigAutoCapturePlugin(e){_classCallCheck3(this,StatsigAutoCapturePlugin),this._options=e,this.__plugin="auto-capture"},[{key:"bind",value:function(e){runStatsigAutoCapture(e,this._options)}}])}();function runStatsigAutoCapture(_,S){var k,E=_.getContext().sdkKey;if(!(0,e._isServerEnv)()){var T=null!==(k=(0,e._getStatsigGlobal)().acInstances)&&void 0!==k?k:{};if(T[E])return T[E]}return new U(_,S)}Na.StatsigAutoCapturePlugin=L,Na.runStatsigAutoCapture=runStatsigAutoCapture;var U=function(){return _createClass3(function AutoCapture(_,I){var R,O,D,L,U=this;_classCallCheck3(this,AutoCapture),this._client=_,this._disabledEvents={},this._previousLoggedPageViewUrl=null,this._hasLoggedPageViewEnd=!1,this._pageViewLogged=!1;var B=_.getContext(),z=B.sdkKey,G=B.errorBoundary,j=B.values;this._options=I,this._disabledEvents=null!==(O=null===(R=null==j?void 0:j.auto_capture_settings)||void 0===R?void 0:R.disabled_events)&&void 0!==O?O:{},this._errorBoundary=G,this._errorBoundary.wrap(this,"autoCapture:"),this._client.$on("values_updated",function(){var e,_,S=U._client.getContext().values;U._disabledEvents=null!==(_=null===(e=null==S?void 0:S.auto_capture_settings)||void 0===e?void 0:e.disabled_events)&&void 0!==_?_:U._disabledEvents}),this._engagementManager=new E.EngagementManager,this._rageClickManager=new T.default,this._webVitalsManager=new M.WebVitalsManager(this._enqueueAutoCapture.bind(this),G),this._deadClickManager=new k.default(this._enqueueAutoCapture.bind(this),G),this._consoleLogManager=new S.ConsoleLogManager(this._enqueueAutoCapture.bind(this),G,null!==(D=null==I?void 0:I.consoleLogAutoCaptureSettings)&&void 0!==D?D:{enabled:!1}),this._eventFilterFunc=null==I?void 0:I.eventFilterFunc;var V=(0,e._getDocumentSafe)();if(!(0,e._isServerEnv)()){__STATSIG__=(0,e._getStatsigGlobal)();var H=null!==(L=__STATSIG__.acInstances)&&void 0!==L?L:{};H[z]=this,__STATSIG__.acInstances=H}"loading"!==(null==V?void 0:V.readyState)?this._initialize():V.addEventListener("DOMContentLoaded",function(){return U._initialize()})},[{key:"_addEventHandlers",value:function(){var _=this,S=(0,e._getWindowSafe)(),k=(0,e._getDocumentSafe)();if(S&&k){var eventHandler=function(S){var k,E=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],T=S||(null===(k=(0,e._getWindowSafe)())||void 0===k?void 0:k.event);(_._autoLogEvent(T),E&&_._engagementManager.bumpInactiveTimer(),"click"===T.type&&T instanceof MouseEvent)&&(_._rageClickManager.isRageClick(T.clientX,T.clientY,Date.now())&&_._logRageClick(T))};(0,I._registerEventHandler)(k,"click",function(e){return eventHandler(e)}),(0,I._registerEventHandler)(k,"submit",function(e){return eventHandler(e)}),(0,I._registerEventHandler)(k,"copy",function(e){return eventHandler(e)}),(0,I._registerEventHandler)(k,"cut",function(e){return eventHandler(e)}),(0,I._registerEventHandler)(S,"error",function(e){return eventHandler(e,!1)}),(0,I._registerEventHandler)(S,"pagehide",function(){return _._tryLogPageViewEnd()}),(0,I._registerEventHandler)(S,"beforeunload",function(){return _._tryLogPageViewEnd()})}}},{key:"_addPageViewTracking",value:function(){var _=this,S=(0,e._getWindowSafe)(),k=(0,e._getDocumentSafe)();S&&k&&((0,I._registerEventHandler)(S,"popstate",function(){return _._tryLogPageView("popstate")}),window.history.pushState=new Proxy(window.history.pushState,{apply:function(e,S,k){var E=_slicedToArray(k,3),T=E[0],M=E[1],I=E[2];e.apply(S,[T,M,I]),_._tryLogPageView("pushstate")}}),window.history.replaceState=new Proxy(window.history.replaceState,{apply:function(e,S,k){var E=_slicedToArray(k,3),T=E[0],M=E[1],I=E[2];e.apply(S,[T,M,I]),_._tryLogPageView("replacestate")}}),this._tryLogPageView())}},{key:"_autoLogEvent",value:function(S){var k,E,T,M,L=null===(k=S.type)||void 0===k?void 0:k.toLowerCase();if("error"===L&&S instanceof ErrorEvent)this._logError(S);else{var U=(0,I._getTargetNode)(S);if(U){var B=D[L];if(B){var z=B===_.AutoCaptureEventName.COPY;if((0,I._shouldLogEvent)(S,U,z)){var G={};if(z){var j=null===(T=null===(E=(0,e._getWindowSafe)())||void 0===E?void 0:E.getSelection())||void 0===T?void 0:T.toString();if(!j)return;(null===(M=this._options)||void 0===M?void 0:M.captureCopyText)&&(G.selectedText=(0,I._sanitizeString)(j));var V=S.type||"clipboard";G.clipType=V}var H=(0,R._gatherEventData)(U),W=H.value,q=H.metadata;q.isOutbound&&this._engagementManager.setMeaningfulEngagementOccurred(!0),Object.assign(G,q);var X=(0,O._gatherAllMetadata)((0,I._getSafeUrl)());this._enqueueAutoCapture(B,W,Object.assign(Object.assign({},X),G))}}}}}},{key:"_initialize",value:function(){var e=this;this._webVitalsManager.startTracking(),this._deadClickManager.startTracking(),this._consoleLogManager.startTracking(),this._engagementManager.startInactivityTracking(function(){return e._tryLogPageViewEnd(!0)}),this._addEventHandlers(),this._addPageViewTracking(),this._logSessionStart(),this._logPerformance()}},{key:"_logError",value:function(e){var S=(null==e?void 0:e.error)||{},k=S;if("object"===_typeof3(S))try{k=JSON.stringify(S)}catch(fo){k="function"==typeof(null==S?void 0:S.toString)?S.toString():"Unknown Error"}this._enqueueAutoCapture(_.AutoCaptureEventName.ERROR,e.message,{message:e.message,filename:e.filename,lineno:e.lineno,colno:e.colno,error_str:k})}},{key:"_logSessionStart",value:function(){var e=this._getSessionFromClient();try{if(!this._isNewSession(e))return;this._enqueueAutoCapture(_.AutoCaptureEventName.SESSION_START,(0,I._getSanitizedPageUrl)(),Object.assign({sessionID:e.data.sessionID},(0,O._gatherAllMetadata)((0,I._getSafeUrl)())),{flushImmediately:!0})}catch(S){this._errorBoundary.logError("AC::logSession",S)}}},{key:"_tryLogPageView",value:function(e){var S=(0,I._getSafeUrl)(),k=this._previousLoggedPageViewUrl;if(!k||S.pathname!==k.pathname){this._engagementManager.setLastPageViewTime(Date.now()),this._hasLoggedPageViewEnd=!1;var E=(0,O._gatherAllMetadata)(S);e&&(E.navigation_type=e),this._previousLoggedPageViewUrl&&(E.last_page_view_url=this._previousLoggedPageViewUrl.href),this._pageViewLogged||(this._updateClientWithPossibleFirstTouchMetadata(),this._pageViewLogged=!0),this._enqueueAutoCapture(_.AutoCaptureEventName.PAGE_VIEW,(0,I._getSanitizedPageUrl)(),E,{flushImmediately:!0,addNewSessionMetadata:!0}),this._previousLoggedPageViewUrl=S,this._engagementManager.bumpInactiveTimer()}}},{key:"_tryLogPageViewEnd",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._hasLoggedPageViewEnd||(this._hasLoggedPageViewEnd=!0,this._enqueueAutoCapture(_.AutoCaptureEventName.PAGE_VIEW_END,(0,I._getSanitizedPageUrl)(),Object.assign(Object.assign({},this._engagementManager.getPageViewEndMetadata()),{dueToInactivity:e}),{flushImmediately:!0}))}},{key:"_logRageClick",value:function(e){if((0,I._shouldLogEvent)(e,e.target)){var S=(0,R._gatherEventData)(e.target),k=S.value,E=S.metadata;this._enqueueAutoCapture(_.AutoCaptureEventName.RAGE_CLICK,k,Object.assign(Object.assign({x:e.clientX,y:e.clientY,timestamp:Date.now()},(0,O._gatherAllMetadata)((0,I._getSafeUrl)())),E))}}},{key:"_logPerformance",value:function(){var S=this,k=(0,e._getWindowSafe)();k&&k.performance&&void 0!==(null==k?void 0:k.performance)&&"function"==typeof k.performance.getEntriesByType&&"function"==typeof k.performance.getEntriesByName&&setTimeout(function(){var e={},E=k.performance.getEntriesByType("navigation");if(E&&E.length>0&&E[0]instanceof PerformanceNavigationTiming){var T=E[0];e.load_time_ms=T.duration,e.dom_interactive_time_ms=T.domInteractive-T.startTime,e.redirect_count=T.redirectCount,e.transfer_bytes=T.transferSize}var M=k.performance.getEntriesByName("first-contentful-paint");M&&M.length>0&&M[0]instanceof PerformancePaintTiming&&(e.first_contentful_paint_time_ms=M[0].startTime),S._enqueueAutoCapture(_.AutoCaptureEventName.PERFORMANCE,(0,I._getSanitizedPageUrl)(),Object.assign(Object.assign({},e),(0,O._getNetworkInfo)()))},1)}},{key:"_enqueueAutoCapture",value:function(_,S,k,E){var T,M,I;if(S){var R=_.slice(14);if(!this._disabledEvents[_]&&!this._disabledEvents[R]){var O=this._getSessionFromClient();try{var D=Object.assign({sessionID:O.data.sessionID,page_url:null!==(I=null===(M=null===(T=(0,e._getWindowSafe)())||void 0===T?void 0:T.location)||void 0===M?void 0:M.href)&&void 0!==I?I:""},k);(null==E?void 0:E.addNewSessionMetadata)&&(D.isNewSession=String(this._isNewSession(O)));var L={eventName:_,value:S,metadata:D};if(this._eventFilterFunc&&!this._eventFilterFunc(L))return;this._client.logEvent(L),(null==E?void 0:E.flushImmediately)&&this._flushImmediately()}catch(U){this._errorBoundary.logError("AC::enqueue",U)}}}}},{key:"_updateClientWithPossibleFirstTouchMetadata",value:function(){var e=this._client;e._possibleFirstTouchMetadata=(0,O._getPossibleFirstTouchMetadata)((0,I._getSafeUrl)()),Object.keys(e._possibleFirstTouchMetadata).length>0&&(e._user=Object.assign(Object.assign({},e._user),{analyticsOnlyMetadata:Object.assign(Object.assign({},e._possibleFirstTouchMetadata),e._user.analyticsOnlyMetadata)}))}},{key:"_flushImmediately",value:function(){this._client.flush().catch(function(_){e.Log.error(_)})}},{key:"_isNewSession",value:function(e){return Math.abs(e.data.startTime-Date.now())<1e3}},{key:"_getSessionFromClient",value:function(){return this._client.getContext().session}}],[{key:"getAllMetadata",value:function(){return(0,O._gatherAllMetadata)((0,I._getSafeUrl)())}}])}();return Na.AutoCapture=U,Na}D("b6",(oo||(oo=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.StatsigAutoCapturePlugin=e.runStatsigAutoCapture=e.AutoCapture=e.AutoCaptureEventName=void 0;var _=requireSrc$3(),S=requireAutoCapture();Object.defineProperty(e,"AutoCapture",{enumerable:!0,get:function(){return S.AutoCapture}}),Object.defineProperty(e,"StatsigAutoCapturePlugin",{enumerable:!0,get:function(){return S.StatsigAutoCapturePlugin}}),Object.defineProperty(e,"runStatsigAutoCapture",{enumerable:!0,get:function(){return S.runStatsigAutoCapture}});var k=requireAutoCaptureEvent();Object.defineProperty(e,"AutoCaptureEventName",{enumerable:!0,get:function(){return k.AutoCaptureEventName}});var E=Object.assign((0,_._getStatsigGlobal)(),{AutoCapture:S.AutoCapture,runStatsigAutoCapture:S.runStatsigAutoCapture,StatsigAutoCapturePlugin:S.StatsigAutoCapturePlugin});e.default=E}(Ba)),Ba));function t(e,_,S){return Math.max(e,Math.min(_,S))}var lo=function(){return _createClass3(function Animate(){_classCallCheck3(this,Animate)},[{key:"advance",value:function(e){var _;if(this.isRunning){var S,k,E,T,M=!1;if(this.lerp)this.value=(S=this.value,k=this.to,E=60*this.lerp,T=e,function(e,_,S){return(1-S)*e+S*_}(S,k,1-Math.exp(-E*T))),Math.round(this.value)===this.to&&(this.value=this.to,M=!0);else{this.currentTime+=e;var I=t(0,this.currentTime/this.duration,1),R=(M=I>=1)?1:this.easing(I);this.value=this.from+(this.to-this.from)*R}null!==(_=this.onUpdate)&&void 0!==_&&_.call(this,this.value,M),M&&this.stop()}}},{key:"stop",value:function(){this.isRunning=!1}},{key:"fromTo",value:function(e,_,S){var k=S.lerp,E=void 0===k?.1:k,T=S.duration,M=void 0===T?1:T,I=S.easing,R=void 0===I?function(e){return e}:I,O=S.onStart,D=S.onUpdate;this.from=this.value=e,this.to=_,this.lerp=E,this.duration=M,this.easing=R,this.currentTime=0,this.isRunning=!0,null!=O&&O(),this.onUpdate=D}}])}(),co=function(){return _createClass3(function Dimensions(){var e=this,_=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},S=_.wrapper,k=_.content,E=_.autoResize,T=void 0===E||E,M=_.debounce,I=void 0===M?250:M;_classCallCheck3(this,Dimensions),_defineProperty3(this,"resize",function(){e.onWrapperResize(),e.onContentResize()}),_defineProperty3(this,"onWrapperResize",function(){e.wrapper===window?(e.width=window.innerWidth,e.height=window.innerHeight):(e.width=e.wrapper.clientWidth,e.height=e.wrapper.clientHeight)}),_defineProperty3(this,"onContentResize",function(){e.wrapper===window?(e.scrollHeight=e.content.scrollHeight,e.scrollWidth=e.content.scrollWidth):(e.scrollHeight=e.wrapper.scrollHeight,e.scrollWidth=e.wrapper.scrollWidth)}),this.wrapper=S,this.content=k,T&&(this.debouncedResize=function(e,_){var S;return function(){var k=arguments,E=this;clearTimeout(S),S=setTimeout(function(){e.apply(E,k)},_)}}(this.resize,I),this.wrapper===window?window.addEventListener("resize",this.debouncedResize,!1):(this.wrapperResizeObserver=new ResizeObserver(this.debouncedResize),this.wrapperResizeObserver.observe(this.wrapper)),this.contentResizeObserver=new ResizeObserver(this.debouncedResize),this.contentResizeObserver.observe(this.content)),this.resize()},[{key:"destroy",value:function(){var e,_;null!==(e=this.wrapperResizeObserver)&&void 0!==e&&e.disconnect(),null!==(_=this.contentResizeObserver)&&void 0!==_&&_.disconnect(),window.removeEventListener("resize",this.debouncedResize,!1)}},{key:"limit",get:function(){return{x:this.scrollWidth-this.width,y:this.scrollHeight-this.height}}}])}(),ho=function(){return _createClass3(function Emitter(){_classCallCheck3(this,Emitter),this.events={}},[{key:"emit",value:function(e){for(var _=this.events[e]||[],S=arguments.length,k=new Array(S>1?S-1:0),E=1;E<S;E++)k[E-1]=arguments[E];for(var T=0,M=_.length;T<M;T++)_[T].apply(_,k)}},{key:"on",value:function(e,_){var S,k=this;return null!==(S=this.events[e])&&void 0!==S&&S.push(_)||(this.events[e]=[_]),function(){var S;k.events[e]=null===(S=k.events[e])||void 0===S?void 0:S.filter(function(e){return _!==e})}}},{key:"off",value:function(e,_){var S;this.events[e]=null===(S=this.events[e])||void 0===S?void 0:S.filter(function(e){return _!==e})}},{key:"destroy",value:function(){this.events={}}}])}(),fo=100/6,po=function(){return _createClass3(function VirtualScroll(e,_){var S=this,k=_.wheelMultiplier,E=void 0===k?1:k,T=_.touchMultiplier,M=void 0===T?1:T;_classCallCheck3(this,VirtualScroll),_defineProperty3(this,"onTouchStart",function(e){var _=e.targetTouches?e.targetTouches[0]:e,k=_.clientX,E=_.clientY;S.touchStart.x=k,S.touchStart.y=E,S.lastDelta={x:0,y:0},S.emitter.emit("scroll",{deltaX:0,deltaY:0,event:e})}),_defineProperty3(this,"onTouchMove",function(e){var _=e.targetTouches?e.targetTouches[0]:e,k=_.clientX,E=_.clientY,T=-(k-S.touchStart.x)*S.touchMultiplier,M=-(E-S.touchStart.y)*S.touchMultiplier;S.touchStart.x=k,S.touchStart.y=E,S.lastDelta={x:T,y:M},S.emitter.emit("scroll",{deltaX:T,deltaY:M,event:e})}),_defineProperty3(this,"onTouchEnd",function(e){S.emitter.emit("scroll",{deltaX:S.lastDelta.x,deltaY:S.lastDelta.y,event:e})}),_defineProperty3(this,"onWheel",function(e){var _=e.deltaX,k=e.deltaY,E=e.deltaMode;_*=1===E?fo:2===E?S.windowWidth:1,k*=1===E?fo:2===E?S.windowHeight:1,_*=S.wheelMultiplier,k*=S.wheelMultiplier,S.emitter.emit("scroll",{deltaX:_,deltaY:k,event:e})}),_defineProperty3(this,"onWindowResize",function(){S.windowWidth=window.innerWidth,S.windowHeight=window.innerHeight}),this.element=e,this.wheelMultiplier=E,this.touchMultiplier=M,this.touchStart={x:null,y:null},this.emitter=new ho,window.addEventListener("resize",this.onWindowResize,!1),this.onWindowResize(),this.element.addEventListener("wheel",this.onWheel,{passive:!1}),this.element.addEventListener("touchstart",this.onTouchStart,{passive:!1}),this.element.addEventListener("touchmove",this.onTouchMove,{passive:!1}),this.element.addEventListener("touchend",this.onTouchEnd,{passive:!1})},[{key:"on",value:function(e,_){return this.emitter.on(e,_)}},{key:"destroy",value:function(){this.emitter.destroy(),window.removeEventListener("resize",this.onWindowResize,!1),this.element.removeEventListener("wheel",this.onWheel,{passive:!1}),this.element.removeEventListener("touchstart",this.onTouchStart,{passive:!1}),this.element.removeEventListener("touchmove",this.onTouchMove,{passive:!1}),this.element.removeEventListener("touchend",this.onTouchEnd,{passive:!1})}}])}(),vo=function(){return _createClass3(function Lenis(){var e=this,_=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},S=_.wrapper,k=void 0===S?window:S,E=_.content,T=void 0===E?document.documentElement:E,M=_.wheelEventsTarget,I=void 0===M?k:M,R=_.eventsTarget,O=void 0===R?I:R,D=_.smoothWheel,L=void 0===D||D,U=_.syncTouch,B=void 0!==U&&U,z=_.syncTouchLerp,G=void 0===z?.075:z,j=_.touchInertiaMultiplier,V=void 0===j?35:j,H=_.duration,W=_.easing,q=void 0===W?function(e){return Math.min(1,1.001-Math.pow(2,-10*e))}:W,X=_.lerp,Y=void 0===X?!H&&.1:X,K=_.infinite,J=void 0!==K&&K,Q=_.orientation,Z=void 0===Q?"vertical":Q,$=_.gestureOrientation,ee=void 0===$?"vertical":$,te=_.touchMultiplier,re=void 0===te?1:te,ne=_.wheelMultiplier,ie=void 0===ne?1:ne,ae=_.autoResize,oe=void 0===ae||ae,se=_.__experimental__naiveDimensions,ue=void 0!==se&&se;_classCallCheck3(this,Lenis),this.__isSmooth=!1,this.__isScrolling=!1,this.__isStopped=!1,this.__isLocked=!1,this.onVirtualScroll=function(_){var S=_.deltaX,k=_.deltaY,E=_.event;if(!E.ctrlKey){var T=E.type.includes("touch"),M=E.type.includes("wheel");if(!e.options.syncTouch||!T||"touchstart"!==E.type||e.isStopped||e.isLocked){var I=0===S&&0===k,R="vertical"===e.options.gestureOrientation&&0===k||"horizontal"===e.options.gestureOrientation&&0===S;if(!I&&!R){var O=E.composedPath();if(!(O=O.slice(0,O.indexOf(e.rootElement))).find(function(e){var _,S,k,E,I;return(null===(_=e.hasAttribute)||void 0===_?void 0:_.call(e,"data-lenis-prevent"))||T&&(null===(S=e.hasAttribute)||void 0===S?void 0:S.call(e,"data-lenis-prevent-touch"))||M&&(null===(k=e.hasAttribute)||void 0===k?void 0:k.call(e,"data-lenis-prevent-wheel"))||(null===(E=e.classList)||void 0===E?void 0:E.contains("lenis"))&&!(null===(I=e.classList)||void 0===I?void 0:I.contains("lenis-stopped"))}))if(e.isStopped||e.isLocked)E.preventDefault();else{if(e.isSmooth=e.options.syncTouch&&T||e.options.smoothWheel&&M,!e.isSmooth)return e.isScrolling=!1,void e.animate.stop();E.preventDefault();var D=k;"both"===e.options.gestureOrientation?D=Math.abs(k)>Math.abs(S)?k:S:"horizontal"===e.options.gestureOrientation&&(D=S);var L=T&&e.options.syncTouch,U=T&&"touchend"===E.type&&Math.abs(D)>5;U&&(D=e.velocity*e.options.touchInertiaMultiplier),e.scrollTo(e.targetScroll+D,Object.assign({programmatic:!1},L?{lerp:U?e.options.syncTouchLerp:1}:{lerp:e.options.lerp,duration:e.options.duration,easing:e.options.easing}))}}}else e.reset()}},this.onNativeScroll=function(){if(!e.__preventNextScrollEvent&&!e.isScrolling){var _=e.animatedScroll;e.animatedScroll=e.targetScroll=e.actualScroll,e.velocity=0,e.direction=Math.sign(e.animatedScroll-_),e.emit()}},window.lenisVersion="1.0.42",k!==document.documentElement&&k!==document.body||(k=window),this.options={wrapper:k,content:T,wheelEventsTarget:I,eventsTarget:O,smoothWheel:L,syncTouch:B,syncTouchLerp:G,touchInertiaMultiplier:V,duration:H,easing:q,lerp:Y,infinite:J,gestureOrientation:ee,orientation:Z,touchMultiplier:re,wheelMultiplier:ie,autoResize:oe,__experimental__naiveDimensions:ue},this.animate=new lo,this.emitter=new ho,this.dimensions=new co({wrapper:k,content:T,autoResize:oe}),this.toggleClassName("lenis",!0),this.velocity=0,this.isLocked=!1,this.isStopped=!1,this.isSmooth=B||L,this.isScrolling=!1,this.targetScroll=this.animatedScroll=this.actualScroll,this.options.wrapper.addEventListener("scroll",this.onNativeScroll,!1),this.virtualScroll=new po(O,{touchMultiplier:re,wheelMultiplier:ie}),this.virtualScroll.on("scroll",this.onVirtualScroll)},[{key:"destroy",value:function(){this.emitter.destroy(),this.options.wrapper.removeEventListener("scroll",this.onNativeScroll,!1),this.virtualScroll.destroy(),this.dimensions.destroy(),this.toggleClassName("lenis",!1),this.toggleClassName("lenis-smooth",!1),this.toggleClassName("lenis-scrolling",!1),this.toggleClassName("lenis-stopped",!1),this.toggleClassName("lenis-locked",!1)}},{key:"on",value:function(e,_){return this.emitter.on(e,_)}},{key:"off",value:function(e,_){return this.emitter.off(e,_)}},{key:"setScroll",value:function(e){this.isHorizontal?this.rootElement.scrollLeft=e:this.rootElement.scrollTop=e}},{key:"resize",value:function(){this.dimensions.resize()}},{key:"emit",value:function(){this.emitter.emit("scroll",this)}},{key:"reset",value:function(){this.isLocked=!1,this.isScrolling=!1,this.animatedScroll=this.targetScroll=this.actualScroll,this.velocity=0,this.animate.stop()}},{key:"start",value:function(){this.isStopped&&(this.isStopped=!1,this.reset())}},{key:"stop",value:function(){this.isStopped||(this.isStopped=!0,this.animate.stop(),this.reset())}},{key:"raf",value:function(e){var _=e-(this.time||e);this.time=e,this.animate.advance(.001*_)}},{key:"scrollTo",value:function(e){var _=this,S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},k=S.offset,E=void 0===k?0:k,T=S.immediate,M=void 0!==T&&T,I=S.lock,R=void 0!==I&&I,O=S.duration,D=void 0===O?this.options.duration:O,L=S.easing,U=void 0===L?this.options.easing:L,B=S.lerp,z=void 0===B?!D&&this.options.lerp:B,G=S.onComplete,j=S.force,V=void 0!==j&&j,H=S.programmatic,W=void 0===H||H;if(!this.isStopped&&!this.isLocked||V){if(["top","left","start"].includes(e))e=0;else if(["bottom","right","end"].includes(e))e=this.limit;else{var q;if("string"==typeof e?q=document.querySelector(e):(null==e?void 0:e.nodeType)&&(q=e),q){if(this.options.wrapper!==window){var X=this.options.wrapper.getBoundingClientRect();E-=this.isHorizontal?X.left:X.top}var Y=q.getBoundingClientRect();e=(this.isHorizontal?Y.left:Y.top)+this.animatedScroll}}if("number"==typeof e){if(e+=E,e=Math.round(e),this.options.infinite?W&&(this.targetScroll=this.animatedScroll=this.scroll):e=t(0,e,this.limit),M)return this.animatedScroll=this.targetScroll=e,this.setScroll(this.scroll),this.reset(),void(null==G||G(this));if(!W){if(e===this.targetScroll)return;this.targetScroll=e}this.animate.fromTo(this.animatedScroll,e,{duration:D,easing:U,lerp:z,onStart:function(){R&&(_.isLocked=!0),_.isScrolling=!0},onUpdate:function(e,S){_.isScrolling=!0,_.velocity=e-_.animatedScroll,_.direction=Math.sign(_.velocity),_.animatedScroll=e,_.setScroll(_.scroll),W&&(_.targetScroll=e),S||_.emit(),S&&(_.reset(),_.emit(),null==G||G(_),_.__preventNextScrollEvent=!0,requestAnimationFrame(function(){delete _.__preventNextScrollEvent}))}})}}}},{key:"rootElement",get:function(){return this.options.wrapper===window?document.documentElement:this.options.wrapper}},{key:"limit",get:function(){return this.options.__experimental__naiveDimensions?this.isHorizontal?this.rootElement.scrollWidth-this.rootElement.clientWidth:this.rootElement.scrollHeight-this.rootElement.clientHeight:this.dimensions.limit[this.isHorizontal?"x":"y"]}},{key:"isHorizontal",get:function(){return"horizontal"===this.options.orientation}},{key:"actualScroll",get:function(){return this.isHorizontal?this.rootElement.scrollLeft:this.rootElement.scrollTop}},{key:"scroll",get:function(){return this.options.infinite?(this.animatedScroll%(e=this.limit)+e)%e:this.animatedScroll;var e}},{key:"progress",get:function(){return 0===this.limit?1:this.scroll/this.limit}},{key:"isSmooth",get:function(){return this.__isSmooth},set:function(e){this.__isSmooth!==e&&(this.__isSmooth=e,this.toggleClassName("lenis-smooth",e))}},{key:"isScrolling",get:function(){return this.__isScrolling},set:function(e){this.__isScrolling!==e&&(this.__isScrolling=e,this.toggleClassName("lenis-scrolling",e))}},{key:"isStopped",get:function(){return this.__isStopped},set:function(e){this.__isStopped!==e&&(this.__isStopped=e,this.toggleClassName("lenis-stopped",e))}},{key:"isLocked",get:function(){return this.__isLocked},set:function(e){this.__isLocked!==e&&(this.__isLocked=e,this.toggleClassName("lenis-locked",e))}},{key:"className",get:function(){var e="lenis";return this.isStopped&&(e+=" lenis-stopped"),this.isLocked&&(e+=" lenis-locked"),this.isScrolling&&(e+=" lenis-scrolling"),this.isSmooth&&(e+=" lenis-smooth"),e}},{key:"toggleClassName",value:function(e,_){this.rootElement.classList.toggle(e,_),this.emitter.emit("className change",this)}}])}();D("b7",vo);var _extendStatics=function(e,_){return _extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,_){e.__proto__=_}||function(e,_){for(var S in _)Object.prototype.hasOwnProperty.call(_,S)&&(e[S]=_[S])},_extendStatics(e,_)};function __extends(e,_){if("function"!=typeof _&&null!==_)throw new TypeError("Class extends value "+String(_)+" is not a constructor or null");function __(){this.constructor=e}_extendStatics(e,_),e.prototype=null===_?Object.create(_):(__.prototype=_.prototype,new __)}var go=D("a_",function(){return D("a_",go=Object.assign||function(e){for(var _,S=1,k=arguments.length;S<k;S++)for(var E in _=arguments[S])Object.prototype.hasOwnProperty.call(_,E)&&(e[E]=_[E]);return e}),go.apply(this,arguments)});function __rest(e,_){var S={};for(var k in e)Object.prototype.hasOwnProperty.call(e,k)&&_.indexOf(k)<0&&(S[k]=e[k]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var E=0;for(k=Object.getOwnPropertySymbols(e);E<k.length;E++)_.indexOf(k[E])<0&&Object.prototype.propertyIsEnumerable.call(e,k[E])&&(S[k[E]]=e[k[E]])}return S}function __decorate(e,_,S,k){var E,T=arguments.length,M=T<3?_:null===k?k=Object.getOwnPropertyDescriptor(_,S):k;if("object"===("undefined"==typeof Reflect?"undefined":_typeof3(Reflect))&&"function"==typeof Reflect.decorate)M=Reflect.decorate(e,_,S,k);else for(var I=e.length-1;I>=0;I--)(E=e[I])&&(M=(T<3?E(M):T>3?E(_,S,M):E(_,S))||M);return T>3&&M&&Object.defineProperty(_,S,M),M}function __param(e,_){return function(S,k){_(S,k,e)}}function __esDecorate(e,_,S,k,E,T){function accept(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var M,I=k.kind,R="getter"===I?"get":"setter"===I?"set":"value",O=!_&&e?k.static?e:e.prototype:null,D=_||(O?Object.getOwnPropertyDescriptor(O,k.name):{}),L=!1,U=S.length-1;U>=0;U--){var B={};for(var z in k)B[z]="access"===z?{}:k[z];for(var z in k.access)B.access[z]=k.access[z];B.addInitializer=function(e){if(L)throw new TypeError("Cannot add initializers after decoration has completed");T.push(accept(e||null))};var G=(0,S[U])("accessor"===I?{get:D.get,set:D.set}:D[R],B);if("accessor"===I){if(void 0===G)continue;if(null===G||"object"!==_typeof3(G))throw new TypeError("Object expected");(M=accept(G.get))&&(D.get=M),(M=accept(G.set))&&(D.set=M),(M=accept(G.init))&&E.unshift(M)}else(M=accept(G))&&("field"===I?E.unshift(M):D[R]=M)}O&&Object.defineProperty(O,k.name,D),L=!0}function __runInitializers(e,_,S){for(var k=arguments.length>2,E=0;E<_.length;E++)S=k?_[E].call(e,S):_[E].call(e);return k?S:void 0}function __propKey(e){return"symbol"===_typeof3(e)?e:"".concat(e)}function __setFunctionName(e,_,S){return"symbol"===_typeof3(_)&&(_=_.description?"[".concat(_.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:S?"".concat(S," ",_):_})}function __metadata(e,_){if("object"===("undefined"==typeof Reflect?"undefined":_typeof3(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,_)}function __awaiter(e,_,S,k){return new(S||(S=Promise))(function(E,T){function fulfilled(e){try{step(k.next(e))}catch(fo){T(fo)}}function rejected(e){try{step(k.throw(e))}catch(fo){T(fo)}}function step(e){var _;e.done?E(e.value):(_=e.value,_ instanceof S?_:new S(function(e){e(_)})).then(fulfilled,rejected)}step((k=k.apply(e,_||[])).next())})}function __generator(e,_){var S,k,E,T={label:0,sent:function(){if(1&E[0])throw E[1];return E[1]},trys:[],ops:[]},M=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return M.next=verb(0),M.throw=verb(1),M.return=verb(2),"function"==typeof Symbol&&(M[Symbol.iterator]=function(){return this}),M;function verb(I){return function(R){return function(I){if(S)throw new TypeError("Generator is already executing.");for(;M&&(M=0,I[0]&&(T=0)),T;)try{if(S=1,k&&(E=2&I[0]?k.return:I[0]?k.throw||((E=k.return)&&E.call(k),0):k.next)&&!(E=E.call(k,I[1])).done)return E;switch(k=0,E&&(I=[2&I[0],E.value]),I[0]){case 0:case 1:E=I;break;case 4:return T.label++,{value:I[1],done:!1};case 5:T.label++,k=I[1],I=[0];continue;case 7:I=T.ops.pop(),T.trys.pop();continue;default:if(!(E=T.trys,(E=E.length>0&&E[E.length-1])||6!==I[0]&&2!==I[0])){T=0;continue}if(3===I[0]&&(!E||I[1]>E[0]&&I[1]<E[3])){T.label=I[1];break}if(6===I[0]&&T.label<E[1]){T.label=E[1],E=I;break}if(E&&T.label<E[2]){T.label=E[2],T.ops.push(I);break}E[2]&&T.ops.pop(),T.trys.pop();continue}I=_.call(e,T)}catch(fo){I=[6,fo],k=0}finally{S=E=0}if(5&I[0])throw I[1];return{value:I[0]?I[1]:void 0,done:!0}}([I,R])}}}var mo=Object.create?function(e,_,S,k){void 0===k&&(k=S);var E=Object.getOwnPropertyDescriptor(_,S);E&&!("get"in E?!_.__esModule:E.writable||E.configurable)||(E={enumerable:!0,get:function(){return _[S]}}),Object.defineProperty(e,k,E)}:function(e,_,S,k){void 0===k&&(k=S),e[k]=_[S]};function __exportStar(e,_){for(var S in e)"default"===S||Object.prototype.hasOwnProperty.call(_,S)||mo(_,e,S)}function __values(e){var _="function"==typeof Symbol&&Symbol.iterator,S=_&&e[_],k=0;if(S)return S.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&k>=e.length&&(e=void 0),{value:e&&e[k++],done:!e}}};throw new TypeError(_?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read(e,_){var S="function"==typeof Symbol&&e[Symbol.iterator];if(!S)return e;var k,E,T=S.call(e),M=[];try{for(;(void 0===_||_-- >0)&&!(k=T.next()).done;)M.push(k.value)}catch(I){E={error:I}}finally{try{k&&!k.done&&(S=T.return)&&S.call(T)}finally{if(E)throw E.error}}return M}function __spread(){for(var e=[],_=0;_<arguments.length;_++)e=e.concat(__read(arguments[_]));return e}function __spreadArrays(){for(var e=0,_=0,S=arguments.length;_<S;_++)e+=arguments[_].length;var k=Array(e),E=0;for(_=0;_<S;_++)for(var T=arguments[_],M=0,I=T.length;M<I;M++,E++)k[E]=T[M];return k}function __spreadArray(e,_,S){if(S||2===arguments.length)for(var k,E=0,T=_.length;E<T;E++)!k&&E in _||(k||(k=Array.prototype.slice.call(_,0,E)),k[E]=_[E]);return e.concat(k||Array.prototype.slice.call(_))}function __await(e){return this instanceof __await?(this.v=e,this):new __await(e)}function __asyncGenerator(e,_,S){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var k,E=S.apply(e,_||[]),T=[];return k=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),verb("next"),verb("throw"),verb("return",function(e){return function(_){return Promise.resolve(_).then(e,reject)}}),k[Symbol.asyncIterator]=function(){return this},k;function verb(e,_){E[e]&&(k[e]=function(_){return new Promise(function(S,k){T.push([e,_,S,k])>1||resume(e,_)})},_&&(k[e]=_(k[e])))}function resume(e,_){try{!function(e){e.value instanceof __await?Promise.resolve(e.value.v).then(fulfill,reject):settle(T[0][2],e)}(E[e](_))}catch(fo){settle(T[0][3],fo)}}function fulfill(e){resume("next",e)}function reject(e){resume("throw",e)}function settle(e,_){e(_),T.shift(),T.length&&resume(T[0][0],T[0][1])}}function __asyncDelegator(e){var _,S;return _={},verb("next"),verb("throw",function(e){throw e}),verb("return"),_[Symbol.iterator]=function(){return this},_;function verb(k,E){_[k]=e[k]?function(_){return(S=!S)?{value:__await(e[k](_)),done:!1}:E?E(_):_}:E}}function __asyncValues(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var _,S=e[Symbol.asyncIterator];return S?S.call(e):(e=__values(e),_={},verb("next"),verb("throw"),verb("return"),_[Symbol.asyncIterator]=function(){return this},_);function verb(S){_[S]=e[S]&&function(_){return new Promise(function(k,E){(function(e,_,S,k){Promise.resolve(k).then(function(_){e({value:_,done:S})},_)})(k,E,(_=e[S](_)).done,_.value)})}}}function __makeTemplateObject(e,_){return Object.defineProperty?Object.defineProperty(e,"raw",{value:_}):e.raw=_,e}var yo=Object.create?function(e,_){Object.defineProperty(e,"default",{enumerable:!0,value:_})}:function(e,_){e.default=_},_ownKeys=function(e){return _ownKeys=Object.getOwnPropertyNames||function(e){var _=[];for(var S in e)Object.prototype.hasOwnProperty.call(e,S)&&(_[_.length]=S);return _},_ownKeys(e)};function __importStar(e){if(e&&e.__esModule)return e;var _={};if(null!=e)for(var S=_ownKeys(e),k=0;k<S.length;k++)"default"!==S[k]&&mo(_,e,S[k]);return yo(_,e),_}function __importDefault(e){return e&&e.__esModule?e:{default:e}}function __classPrivateFieldGet(e,_,S,k){if("a"===S&&!k)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof _?e!==_||!k:!_.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===S?k:"a"===S?k.call(e):k?k.value:_.get(e)}function __classPrivateFieldSet(e,_,S,k,E){if("m"===k)throw new TypeError("Private method is not writable");if("a"===k&&!E)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof _?e!==_||!E:!_.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===k?E.call(e,S):E?E.value=S:_.set(e,S),S}function __classPrivateFieldIn(e,_){if(null===_||"object"!==_typeof3(_)&&"function"!=typeof _)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof e?_===e:e.has(_)}function __addDisposableResource(e,_,S){if(null!=_){if("object"!==_typeof3(_)&&"function"!=typeof _)throw new TypeError("Object expected.");var k,E;if(S){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");k=_[Symbol.asyncDispose]}if(void 0===k){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");k=_[Symbol.dispose],S&&(E=k)}if("function"!=typeof k)throw new TypeError("Object not disposable.");E&&(k=function(){try{E.call(this)}catch(fo){return Promise.reject(fo)}}),e.stack.push({value:_,dispose:k,async:S})}else S&&e.stack.push({async:!0});return _}var _o="function"==typeof SuppressedError?SuppressedError:function(e,_,S){var k=new Error(S);return k.name="SuppressedError",k.error=e,k.suppressed=_,k};function __disposeResources(e){function fail(_){e.error=e.hasError?new _o(_,e.error,"An error was suppressed during disposal."):_,e.hasError=!0}var _,S=0;return function next(){for(;_=e.stack.pop();)try{if(!_.async&&1===S)return S=0,e.stack.push(_),Promise.resolve().then(next);if(_.dispose){var k=_.dispose.call(_.value);if(_.async)return S|=2,Promise.resolve(k).then(next,function(e){return fail(e),next()})}else S|=1}catch(fo){fail(fo)}if(1===S)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}()}function __rewriteRelativeImportExtension(e,_){return"string"==typeof e&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(e,S,k,E,T){return S?_?".jsx":".js":!k||E&&T?k+E+"."+T.toLowerCase()+"js":e}):e}var bo,So={__extends:__extends,__assign:go,__rest:__rest,__decorate:__decorate,__param:__param,__esDecorate:__esDecorate,__runInitializers:__runInitializers,__propKey:__propKey,__setFunctionName:__setFunctionName,__metadata:__metadata,__awaiter:__awaiter,__generator:__generator,__createBinding:mo,__exportStar:__exportStar,__values:__values,__read:__read,__spread:__spread,__spreadArrays:__spreadArrays,__spreadArray:__spreadArray,__await:__await,__asyncGenerator:__asyncGenerator,__asyncDelegator:__asyncDelegator,__asyncValues:__asyncValues,__makeTemplateObject:__makeTemplateObject,__importStar:__importStar,__importDefault:__importDefault,__classPrivateFieldGet:__classPrivateFieldGet,__classPrivateFieldSet:__classPrivateFieldSet,__classPrivateFieldIn:__classPrivateFieldIn,__addDisposableResource:__addDisposableResource,__disposeResources:__disposeResources,__rewriteRelativeImportExtension:__rewriteRelativeImportExtension},wo=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:__addDisposableResource,get __assign(){return go},__asyncDelegator:__asyncDelegator,__asyncGenerator:__asyncGenerator,__asyncValues:__asyncValues,__await:__await,__awaiter:__awaiter,__classPrivateFieldGet:__classPrivateFieldGet,__classPrivateFieldIn:__classPrivateFieldIn,__classPrivateFieldSet:__classPrivateFieldSet,__createBinding:mo,__decorate:__decorate,__disposeResources:__disposeResources,__esDecorate:__esDecorate,__exportStar:__exportStar,__extends:__extends,__generator:__generator,__importDefault:__importDefault,__importStar:__importStar,__makeTemplateObject:__makeTemplateObject,__metadata:__metadata,__param:__param,__propKey:__propKey,__read:__read,__rest:__rest,__rewriteRelativeImportExtension:__rewriteRelativeImportExtension,__runInitializers:__runInitializers,__setFunctionName:__setFunctionName,__spread:__spread,__spreadArray:__spreadArray,__spreadArrays:__spreadArrays,__values:__values,default:So},Symbol.toStringTag,{value:"Module"})),xo=function(e){function FunctionsError(e){var _,S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"FunctionsError",k=arguments.length>2?arguments[2]:void 0;return _classCallCheck3(this,FunctionsError),(_=_callSuper(this,FunctionsError,[e])).name=S,_.context=k,_}return _inherits(FunctionsError,e),_createClass3(FunctionsError)}(_wrapNativeSuper(Error)),ko=function(e){function FunctionsFetchError(e){return _classCallCheck3(this,FunctionsFetchError),_callSuper(this,FunctionsFetchError,["Failed to send a request to the Edge Function","FunctionsFetchError",e])}return _inherits(FunctionsFetchError,e),_createClass3(FunctionsFetchError)}(xo),Co=function(e){function FunctionsRelayError(e){return _classCallCheck3(this,FunctionsRelayError),_callSuper(this,FunctionsRelayError,["Relay Error invoking the Edge Function","FunctionsRelayError",e])}return _inherits(FunctionsRelayError,e),_createClass3(FunctionsRelayError)}(xo),Ao=function(e){function FunctionsHttpError(e){return _classCallCheck3(this,FunctionsHttpError),_callSuper(this,FunctionsHttpError,["Edge Function returned a non-2xx status code","FunctionsHttpError",e])}return _inherits(FunctionsHttpError,e),_createClass3(FunctionsHttpError)}(xo);!function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"}(bo||(bo={}));var Eo,To,Mo,Io,Ro,Po,Oo,Do=function(){return _createClass3(function FunctionsClient(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},S=_.headers,k=void 0===S?{}:S,E=_.customFetch,T=_.region,M=void 0===T?bo.Any:T;_classCallCheck3(this,FunctionsClient),this.url=e,this.headers=k,this.region=M,this.fetch=function(e){var _;return _=e||("undefined"==typeof fetch?function(){for(var e=arguments.length,_=new Array(e),S=0;S<e;S++)_[S]=arguments[S];return G(_asyncToGenerator(_regenerator().m(function _callee32(){var e,_;return _regenerator().w(function(S){for(;;)switch(S.n){case 0:return S.n=1,Promise.resolve().then(function(){return Yo});case 1:return e=S.v,_=e.default,S.a(2,{default:_})}},_callee32)})),void 0).then(function(e){return e.default.apply(void 0,_)})}:fetch),function(){return _.apply(void 0,arguments)}}(E)},[{key:"setAuth",value:function(e){this.headers.Authorization="Bearer ".concat(e)}},{key:"invoke",value:function(e){return __awaiter(this,arguments,void 0,function(e){var _=this,S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return _regenerator().m(function _callee33(){var k,E,T,M,I,R,O,D,L,U,B,z,G,j;return _regenerator().w(function(V){for(;;)switch(V.p=V.n){case 0:return V.p=0,E=S.headers,T=S.method,M=S.body,I=S.signal,R={},(O=S.region)||(O=_.region),D=new URL("".concat(_.url,"/").concat(e)),O&&"any"!==O&&(R["x-region"]=O,D.searchParams.set("forceFunctionRegion",O)),M&&(E&&!Object.prototype.hasOwnProperty.call(E,"Content-Type")||!E)?"undefined"!=typeof Blob&&M instanceof Blob||M instanceof ArrayBuffer?(R["Content-Type"]="application/octet-stream",L=M):"string"==typeof M?(R["Content-Type"]="text/plain",L=M):"undefined"!=typeof FormData&&M instanceof FormData?L=M:(R["Content-Type"]="application/json",L=JSON.stringify(M)):L=M,V.n=1,_.fetch(D.toString(),{method:T||"POST",headers:Object.assign(Object.assign(Object.assign({},R),_.headers),E),body:L,signal:I}).catch(function(e){if("AbortError"===e.name)throw e;throw new ko(e)});case 1:if(U=V.v,!(B=U.headers.get("x-relay-error"))||"true"!==B){V.n=2;break}throw new Co(U);case 2:if(U.ok){V.n=3;break}throw new Ao(U);case 3:if("application/json"!==(z=(null!==(k=U.headers.get("Content-Type"))&&void 0!==k?k:"text/plain").split(";")[0].trim())){V.n=5;break}return V.n=4,U.json();case 4:G=V.v,V.n=12;break;case 5:if("application/octet-stream"!==z&&"application/pdf"!==z){V.n=7;break}return V.n=6,U.blob();case 6:G=V.v,V.n=12;break;case 7:if("text/event-stream"!==z){V.n=8;break}G=U,V.n=12;break;case 8:if("multipart/form-data"!==z){V.n=10;break}return V.n=9,U.formData();case 9:G=V.v,V.n=12;break;case 10:return V.n=11,U.text();case 11:G=V.v;case 12:return V.a(2,{data:G,error:null,response:U});case 13:if(V.p=13,!((j=V.v)instanceof Error&&"AbortError"===j.name)){V.n=14;break}return V.a(2,{data:null,error:new ko(j)});case 14:return V.a(2,{data:null,error:j,response:j instanceof Ao||j instanceof Co?j.context:void 0})}},_callee33,null,[[0,13]])})()})}}])}(),Lo={},Fo=getAugmentedNamespace(wo),Uo={},Bo={},No={},zo={},Go={},jo=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")}(),Vo=jo.fetch,Ho=jo.fetch.bind(jo),Wo=jo.Headers,qo=jo.Request,Xo=jo.Response,Yo=Object.freeze(Object.defineProperty({__proto__:null,Headers:Wo,Request:qo,Response:Xo,default:Ho,fetch:Vo},Symbol.toStringTag,{value:"Module"})),Ko=getAugmentedNamespace(Yo),Jo={};function requirePostgrestError(){if(Eo)return Jo;Eo=1,Object.defineProperty(Jo,"__esModule",{value:!0});var e=function(e){function PostgrestError(e){var _;return _classCallCheck3(this,PostgrestError),(_=_callSuper(this,PostgrestError,[e.message])).name="PostgrestError",_.details=e.details,_.hint=e.hint,_.code=e.code,_}return _inherits(PostgrestError,e),_createClass3(PostgrestError)}(_wrapNativeSuper(Error));return Jo.default=e,Jo}function requirePostgrestBuilder(){if(To)return Go;To=1,Object.defineProperty(Go,"__esModule",{value:!0});var e=Fo,_=e.__importDefault(Ko),S=e.__importDefault(requirePostgrestError()),k=function(){return _createClass3(function PostgrestBuilder(e){var S,k;_classCallCheck3(this,PostgrestBuilder),this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=null!==(S=e.shouldThrowOnError)&&void 0!==S&&S,this.signal=e.signal,this.isMaybeSingle=null!==(k=e.isMaybeSingle)&&void 0!==k&&k,e.fetch?this.fetch=e.fetch:"undefined"==typeof fetch?this.fetch=_.default:this.fetch=fetch},[{key:"throwOnError",value:function(){return this.shouldThrowOnError=!0,this}},{key:"setHeader",value:function(e,_){return this.headers=new Headers(this.headers),this.headers.set(e,_),this}},{key:"then",value:function(e,_){var k=this;void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),"GET"!==this.method&&"HEAD"!==this.method&&this.headers.set("Content-Type","application/json");var E=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(function(){var e=_asyncToGenerator(_regenerator().m(function _callee34(e){var _,E,T,M,I,R,O,D,L,U,B,z,G,j;return _regenerator().w(function(V){for(;;)switch(V.n){case 0:if(I=null,R=null,O=null,D=e.status,L=e.statusText,!e.ok){V.n=3;break}if("HEAD"===k.method){V.n=2;break}return V.n=1,e.text();case 1:""===(U=V.v)||(R="text/csv"===k.headers.get("Accept")||k.headers.get("Accept")&&(null===(_=k.headers.get("Accept"))||void 0===_?void 0:_.includes("application/vnd.pgrst.plan+text"))?U:JSON.parse(U));case 2:B=null===(E=k.headers.get("Prefer"))||void 0===E?void 0:E.match(/count=(exact|planned|estimated)/),z=null===(T=e.headers.get("content-range"))||void 0===T?void 0:T.split("/"),B&&z&&z.length>1&&(O=parseInt(z[1])),k.isMaybeSingle&&"GET"===k.method&&Array.isArray(R)&&(R.length>1?(I={code:"PGRST116",details:"Results contain ".concat(R.length," rows, application/vnd.pgrst.object+json requires 1 row"),hint:null,message:"JSON object requested, multiple (or no) rows returned"},R=null,O=null,D=406,L="Not Acceptable"):R=1===R.length?R[0]:null),V.n=5;break;case 3:return V.n=4,e.text();case 4:G=V.v;try{I=JSON.parse(G),Array.isArray(I)&&404===e.status&&(R=[],I=null,D=200,L="OK")}catch(H){404===e.status&&""===G?(D=204,L="No Content"):I={message:G}}if(I&&k.isMaybeSingle&&(null===(M=null==I?void 0:I.details)||void 0===M?void 0:M.includes("0 rows"))&&(I=null,D=200,L="OK"),!I||!k.shouldThrowOnError){V.n=5;break}throw new S.default(I);case 5:return j={error:I,data:R,count:O,status:D,statusText:L},V.a(2,j)}},_callee34)}));return function(_){return e.apply(this,arguments)}}());return this.shouldThrowOnError||(E=E.catch(function(e){var _,S,k;return{error:{message:"".concat(null!==(_=null==e?void 0:e.name)&&void 0!==_?_:"FetchError",": ").concat(null==e?void 0:e.message),details:"".concat(null!==(S=null==e?void 0:e.stack)&&void 0!==S?S:""),hint:"",code:"".concat(null!==(k=null==e?void 0:e.code)&&void 0!==k?k:"")},data:null,count:null,status:0,statusText:""}})),E.then(e,_)}},{key:"returns",value:function(){return this}},{key:"overrideTypes",value:function(){return this}}])}();return Go.default=k,Go}function requirePostgrestTransformBuilder(){if(Mo)return zo;Mo=1,Object.defineProperty(zo,"__esModule",{value:!0});var e=function(e){function PostgrestTransformBuilder(){return _classCallCheck3(this,PostgrestTransformBuilder),_callSuper(this,PostgrestTransformBuilder,arguments)}return _inherits(PostgrestTransformBuilder,e),_createClass3(PostgrestTransformBuilder,[{key:"select",value:function(e){var _=!1,S=(null!=e?e:"*").split("").map(function(e){return/\s/.test(e)&&!_?"":('"'===e&&(_=!_),e)}).join("");return this.url.searchParams.set("select",S),this.headers.append("Prefer","return=representation"),this}},{key:"order",value:function(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},S=_.ascending,k=void 0===S||S,E=_.nullsFirst,T=_.foreignTable,M=_.referencedTable,I=void 0===M?T:M,R=I?"".concat(I,".order"):"order",O=this.url.searchParams.get(R);return this.url.searchParams.set(R,"".concat(O?"".concat(O,","):"").concat(e,".").concat(k?"asc":"desc").concat(void 0===E?"":E?".nullsfirst":".nullslast")),this}},{key:"limit",value:function(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},S=_.foreignTable,k=_.referencedTable,E=void 0===k?S:k,T=void 0===E?"limit":"".concat(E,".limit");return this.url.searchParams.set(T,"".concat(e)),this}},{key:"range",value:function(e,_){var S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},k=S.foreignTable,E=S.referencedTable,T=void 0===E?k:E,M=void 0===T?"offset":"".concat(T,".offset"),I=void 0===T?"limit":"".concat(T,".limit");return this.url.searchParams.set(M,"".concat(e)),this.url.searchParams.set(I,"".concat(_-e+1)),this}},{key:"abortSignal",value:function(e){return this.signal=e,this}},{key:"single",value:function(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}},{key:"maybeSingle",value:function(){return"GET"===this.method?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}},{key:"csv",value:function(){return this.headers.set("Accept","text/csv"),this}},{key:"geojson",value:function(){return this.headers.set("Accept","application/geo+json"),this}},{key:"explain",value:function(){var e,_=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},S=_.analyze,k=void 0!==S&&S,E=_.verbose,T=void 0!==E&&E,M=_.settings,I=void 0!==M&&M,R=_.buffers,O=void 0!==R&&R,D=_.wal,L=void 0!==D&&D,U=_.format,B=void 0===U?"text":U,z=[k?"analyze":null,T?"verbose":null,I?"settings":null,O?"buffers":null,L?"wal":null].filter(Boolean).join("|"),G=null!==(e=this.headers.get("Accept"))&&void 0!==e?e:"application/json";return this.headers.set("Accept","application/vnd.pgrst.plan+".concat(B,'; for="').concat(G,'"; options=').concat(z,";")),this}},{key:"rollback",value:function(){return this.headers.append("Prefer","tx=rollback"),this}},{key:"returns",value:function(){return this}},{key:"maxAffected",value:function(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer","max-affected=".concat(e)),this}}])}(Fo.__importDefault(requirePostgrestBuilder()).default);return zo.default=e,zo}function requirePostgrestFilterBuilder(){if(Io)return No;Io=1,Object.defineProperty(No,"__esModule",{value:!0});var e=Fo.__importDefault(requirePostgrestTransformBuilder()),_=new RegExp("[,()]"),S=function(e){function PostgrestFilterBuilder(){return _classCallCheck3(this,PostgrestFilterBuilder),_callSuper(this,PostgrestFilterBuilder,arguments)}return _inherits(PostgrestFilterBuilder,e),_createClass3(PostgrestFilterBuilder,[{key:"eq",value:function(e,_){return this.url.searchParams.append(e,"eq.".concat(_)),this}},{key:"neq",value:function(e,_){return this.url.searchParams.append(e,"neq.".concat(_)),this}},{key:"gt",value:function(e,_){return this.url.searchParams.append(e,"gt.".concat(_)),this}},{key:"gte",value:function(e,_){return this.url.searchParams.append(e,"gte.".concat(_)),this}},{key:"lt",value:function(e,_){return this.url.searchParams.append(e,"lt.".concat(_)),this}},{key:"lte",value:function(e,_){return this.url.searchParams.append(e,"lte.".concat(_)),this}},{key:"like",value:function(e,_){return this.url.searchParams.append(e,"like.".concat(_)),this}},{key:"likeAllOf",value:function(e,_){return this.url.searchParams.append(e,"like(all).{".concat(_.join(","),"}")),this}},{key:"likeAnyOf",value:function(e,_){return this.url.searchParams.append(e,"like(any).{".concat(_.join(","),"}")),this}},{key:"ilike",value:function(e,_){return this.url.searchParams.append(e,"ilike.".concat(_)),this}},{key:"ilikeAllOf",value:function(e,_){return this.url.searchParams.append(e,"ilike(all).{".concat(_.join(","),"}")),this}},{key:"ilikeAnyOf",value:function(e,_){return this.url.searchParams.append(e,"ilike(any).{".concat(_.join(","),"}")),this}},{key:"is",value:function(e,_){return this.url.searchParams.append(e,"is.".concat(_)),this}},{key:"in",value:function(e,S){var k=Array.from(new Set(S)).map(function(e){return"string"==typeof e&&_.test(e)?'"'.concat(e,'"'):"".concat(e)}).join(",");return this.url.searchParams.append(e,"in.(".concat(k,")")),this}},{key:"contains",value:function(e,_){return"string"==typeof _?this.url.searchParams.append(e,"cs.".concat(_)):Array.isArray(_)?this.url.searchParams.append(e,"cs.{".concat(_.join(","),"}")):this.url.searchParams.append(e,"cs.".concat(JSON.stringify(_))),this}},{key:"containedBy",value:function(e,_){return"string"==typeof _?this.url.searchParams.append(e,"cd.".concat(_)):Array.isArray(_)?this.url.searchParams.append(e,"cd.{".concat(_.join(","),"}")):this.url.searchParams.append(e,"cd.".concat(JSON.stringify(_))),this}},{key:"rangeGt",value:function(e,_){return this.url.searchParams.append(e,"sr.".concat(_)),this}},{key:"rangeGte",value:function(e,_){return this.url.searchParams.append(e,"nxl.".concat(_)),this}},{key:"rangeLt",value:function(e,_){return this.url.searchParams.append(e,"sl.".concat(_)),this}},{key:"rangeLte",value:function(e,_){return this.url.searchParams.append(e,"nxr.".concat(_)),this}},{key:"rangeAdjacent",value:function(e,_){return this.url.searchParams.append(e,"adj.".concat(_)),this}},{key:"overlaps",value:function(e,_){return"string"==typeof _?this.url.searchParams.append(e,"ov.".concat(_)):this.url.searchParams.append(e,"ov.{".concat(_.join(","),"}")),this}},{key:"textSearch",value:function(e,_){var S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},k=S.config,E=S.type,T="";"plain"===E?T="pl":"phrase"===E?T="ph":"websearch"===E&&(T="w");var M=void 0===k?"":"(".concat(k,")");return this.url.searchParams.append(e,"".concat(T,"fts").concat(M,".").concat(_)),this}},{key:"match",value:function(e){var _=this;return Object.entries(e).forEach(function(e){var S=_slicedToArray(e,2),k=S[0],E=S[1];_.url.searchParams.append(k,"eq.".concat(E))}),this}},{key:"not",value:function(e,_,S){return this.url.searchParams.append(e,"not.".concat(_,".").concat(S)),this}},{key:"or",value:function(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},S=_.foreignTable,k=_.referencedTable,E=void 0===k?S:k,T=E?"".concat(E,".or"):"or";return this.url.searchParams.append(T,"(".concat(e,")")),this}},{key:"filter",value:function(e,_,S){return this.url.searchParams.append(e,"".concat(_,".").concat(S)),this}}])}(e.default);return No.default=S,No}function requirePostgrestQueryBuilder(){if(Ro)return Bo;Ro=1,Object.defineProperty(Bo,"__esModule",{value:!0});var e=Fo.__importDefault(requirePostgrestFilterBuilder()),_=function(){return _createClass3(function PostgrestQueryBuilder(e,_){var S=_.headers,k=void 0===S?{}:S,E=_.schema,T=_.fetch;_classCallCheck3(this,PostgrestQueryBuilder),this.url=e,this.headers=new Headers(k),this.schema=E,this.fetch=T},[{key:"select",value:function(_,S){var k=null!=S?S:{},E=k.head,T=void 0!==E&&E,M=k.count,I=T?"HEAD":"GET",R=!1,O=(null!=_?_:"*").split("").map(function(e){return/\s/.test(e)&&!R?"":('"'===e&&(R=!R),e)}).join("");return this.url.searchParams.set("select",O),M&&this.headers.append("Prefer","count=".concat(M)),new e.default({method:I,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}},{key:"insert",value:function(_){var S,k=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},E=k.count,T=k.defaultToNull,M=void 0===T||T;if(E&&this.headers.append("Prefer","count=".concat(E)),M||this.headers.append("Prefer","missing=default"),Array.isArray(_)){var I=_.reduce(function(e,_){return e.concat(Object.keys(_))},[]);if(I.length>0){var R=_toConsumableArray3(new Set(I)).map(function(e){return'"'.concat(e,'"')});this.url.searchParams.set("columns",R.join(","))}}return new e.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:_,fetch:null!==(S=this.fetch)&&void 0!==S?S:fetch})}},{key:"upsert",value:function(_){var S,k=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},E=k.onConflict,T=k.ignoreDuplicates,M=void 0!==T&&T,I=k.count,R=k.defaultToNull,O=void 0===R||R;if(this.headers.append("Prefer","resolution=".concat(M?"ignore":"merge","-duplicates")),void 0!==E&&this.url.searchParams.set("on_conflict",E),I&&this.headers.append("Prefer","count=".concat(I)),O||this.headers.append("Prefer","missing=default"),Array.isArray(_)){var D=_.reduce(function(e,_){return e.concat(Object.keys(_))},[]);if(D.length>0){var L=_toConsumableArray3(new Set(D)).map(function(e){return'"'.concat(e,'"')});this.url.searchParams.set("columns",L.join(","))}}return new e.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:_,fetch:null!==(S=this.fetch)&&void 0!==S?S:fetch})}},{key:"update",value:function(_){var S,k=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).count;return k&&this.headers.append("Prefer","count=".concat(k)),new e.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:_,fetch:null!==(S=this.fetch)&&void 0!==S?S:fetch})}},{key:"delete",value:function(){var _,S=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).count;return S&&this.headers.append("Prefer","count=".concat(S)),new e.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:null!==(_=this.fetch)&&void 0!==_?_:fetch})}}])}();return Bo.default=_,Bo}var Qo,Zo,$o,es,ts,rs=function(){if(Oo)return Lo;Oo=1,Object.defineProperty(Lo,"__esModule",{value:!0}),Lo.PostgrestError=Lo.PostgrestBuilder=Lo.PostgrestTransformBuilder=Lo.PostgrestFilterBuilder=Lo.PostgrestQueryBuilder=Lo.PostgrestClient=void 0;var e=Fo,_=e.__importDefault(function(){if(Po)return Uo;Po=1,Object.defineProperty(Uo,"__esModule",{value:!0});var e=Fo,_=e.__importDefault(requirePostgrestQueryBuilder()),S=e.__importDefault(requirePostgrestFilterBuilder()),k=function(){function PostgrestClient(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},S=_.headers,k=void 0===S?{}:S,E=_.schema,T=_.fetch;_classCallCheck3(this,PostgrestClient),this.url=e,this.headers=new Headers(k),this.schemaName=E,this.fetch=T}return _createClass3(PostgrestClient,[{key:"from",value:function(e){var S=new URL("".concat(this.url,"/").concat(e));return new _.default(S,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}},{key:"schema",value:function(e){return new PostgrestClient(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}},{key:"rpc",value:function(e){var _,k,E,T=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},M=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},I=M.head,R=void 0!==I&&I,O=M.get,D=void 0!==O&&O,L=M.count,U=new URL("".concat(this.url,"/rpc/").concat(e));R||D?(k=R?"HEAD":"GET",Object.entries(T).filter(function(e){var _=_slicedToArray(e,2);return _[0],void 0!==_[1]}).map(function(e){var _=_slicedToArray(e,2),S=_[0],k=_[1];return[S,Array.isArray(k)?"{".concat(k.join(","),"}"):"".concat(k)]}).forEach(function(e){var _=_slicedToArray(e,2),S=_[0],k=_[1];U.searchParams.append(S,k)})):(k="POST",E=T);var B=new Headers(this.headers);return L&&B.set("Prefer","count=".concat(L)),new S.default({method:k,url:U,headers:B,schema:this.schemaName,body:E,fetch:null!==(_=this.fetch)&&void 0!==_?_:fetch})}}])}();return Uo.default=k,Uo}());Lo.PostgrestClient=_.default;var S=e.__importDefault(requirePostgrestQueryBuilder());Lo.PostgrestQueryBuilder=S.default;var k=e.__importDefault(requirePostgrestFilterBuilder());Lo.PostgrestFilterBuilder=k.default;var E=e.__importDefault(requirePostgrestTransformBuilder());Lo.PostgrestTransformBuilder=E.default;var T=e.__importDefault(requirePostgrestBuilder());Lo.PostgrestBuilder=T.default;var M=e.__importDefault(requirePostgrestError());return Lo.PostgrestError=M.default,Lo.default={PostgrestClient:_.default,PostgrestQueryBuilder:S.default,PostgrestFilterBuilder:k.default,PostgrestTransformBuilder:E.default,PostgrestBuilder:T.default,PostgrestError:M.default},Lo}(),ns=getDefaultExportFromCjs(rs),is=ns||_mergeNamespaces({__proto__:null,default:ns},[rs]),as=is.PostgrestClient,os=(is.PostgrestQueryBuilder,is.PostgrestFilterBuilder,is.PostgrestTransformBuilder,is.PostgrestBuilder,is.PostgrestError,function(){return _createClass3(function WebSocketFactory(){_classCallCheck3(this,WebSocketFactory)},null,[{key:"detectEnvironment",value:function(){var e;if("undefined"!=typeof WebSocket)return{type:"native",constructor:WebSocket};if("undefined"!=typeof globalThis&&void 0!==globalThis.WebSocket)return{type:"native",constructor:globalThis.WebSocket};if("undefined"!=typeof global&&void 0!==global.WebSocket)return{type:"native",constructor:global.WebSocket};if("undefined"!=typeof globalThis&&void 0!==globalThis.WebSocketPair&&void 0===globalThis.WebSocket)return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if("undefined"!=typeof globalThis&&globalThis.EdgeRuntime||"undefined"!=typeof navigator&&(null===(e=navigator.userAgent)||void 0===e?void 0:e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if("undefined"!=typeof process){var _=process.versions;if(_&&_.node){var S=_.node,k=parseInt(S.replace(/^v/,"").split(".")[0]);return k>=22?void 0!==globalThis.WebSocket?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:"Node.js ".concat(k," detected but native WebSocket not found."),workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:"Node.js ".concat(k," detected without native WebSocket support."),workaround:'For Node.js < 22, install "ws" package and provide it via the transport option:\nimport ws from "ws"\nnew RealtimeClient(url, { transport: ws })'}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}},{key:"getWebSocketConstructor",value:function(){var e=this.detectEnvironment();if(e.constructor)return e.constructor;var _=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(_+="\n\nSuggested solution: ".concat(e.workaround)),new Error(_)}},{key:"createWebSocket",value:function(e,_){return new(this.getWebSocketConstructor())(e,_)}},{key:"isWebSocketSupported",value:function(){try{var e=this.detectEnvironment();return"native"===e.type||"ws"===e.type}catch(Kb){return!1}}}])}()),ss="realtime-js/".concat("2.78.0"),us=1e4;!function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"}(Qo||(Qo={})),function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"}(Zo||(Zo={})),function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"}($o||($o={})),function(e){e.websocket="websocket"}(es||(es={})),function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"}(ts||(ts={}));var ls,cs=function(){return _createClass3(function Serializer(){_classCallCheck3(this,Serializer),this.HEADER_LENGTH=1},[{key:"decode",value:function(e,_){return e.constructor===ArrayBuffer?_(this._binaryDecode(e)):_("string"==typeof e?JSON.parse(e):{})}},{key:"_binaryDecode",value:function(e){var _=new DataView(e),S=new TextDecoder;return this._decodeBroadcast(e,_,S)}},{key:"_decodeBroadcast",value:function(e,_,S){var k=_.getUint8(1),E=_.getUint8(2),T=this.HEADER_LENGTH+2,M=S.decode(e.slice(T,T+k));T+=k;var I=S.decode(e.slice(T,T+E));return T+=E,{ref:null,topic:M,event:I,payload:JSON.parse(S.decode(e.slice(T,e.byteLength)))}}}])}(),hs=function(){return _createClass3(function Timer(e,_){_classCallCheck3(this,Timer),this.callback=e,this.timerCalc=_,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=_},[{key:"reset",value:function(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}},{key:"scheduleTimeout",value:function(){var e=this;clearTimeout(this.timer),this.timer=setTimeout(function(){e.tries=e.tries+1,e.callback()},this.timerCalc(this.tries+1))}}])}();!function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"}(ls||(ls={}));var ds,convertChangeData=function(e,_){var S,k=null!==(S=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).skipTypes)&&void 0!==S?S:[];return _?Object.keys(_).reduce(function(S,E){return S[E]=convertColumn(E,e,_,k),S},{}):{}},convertColumn=function(e,_,S,k){var E=_.find(function(_){return _.name===e}),T=null==E?void 0:E.type,M=S[e];return T&&!k.includes(T)?convertCell(T,M):noop$3(M)},convertCell=function(e,_){if("_"===e.charAt(0)){var S=e.slice(1,e.length);return toArray$1(_,S)}switch(e){case ls.bool:return toBoolean(_);case ls.float4:case ls.float8:case ls.int2:case ls.int4:case ls.int8:case ls.numeric:case ls.oid:return toNumber(_);case ls.json:case ls.jsonb:return toJson(_);case ls.timestamp:return toTimestampString(_);case ls.abstime:case ls.date:case ls.daterange:case ls.int4range:case ls.int8range:case ls.money:case ls.reltime:case ls.text:case ls.time:case ls.timestamptz:case ls.timetz:case ls.tsrange:case ls.tstzrange:default:return noop$3(_)}},noop$3=function(e){return e},toBoolean=function(e){switch(e){case"t":return!0;case"f":return!1;default:return e}},toNumber=function(e){if("string"==typeof e){var _=parseFloat(e);if(!Number.isNaN(_))return _}return e},toJson=function(e){if("string"==typeof e)try{return JSON.parse(e)}catch(_){return e}return e},toArray$1=function(e,_){if("string"!=typeof e)return e;var S=e.length-1,k=e[S];if("{"===e[0]&&"}"===k){var E,T=e.slice(1,S);try{E=JSON.parse("["+T+"]")}catch(M){E=T?T.split(","):[]}return E.map(function(e){return convertCell(_,e)})}return e},toTimestampString=function(e){return"string"==typeof e?e.replace(" ","T"):e},httpEndpointURL=function(e){var _=new URL(e);return _.protocol=_.protocol.replace(/^ws/i,"http"),_.pathname=_.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),""===_.pathname||"/"===_.pathname?_.pathname="/api/broadcast":_.pathname=_.pathname+"/api/broadcast",_.href},fs=function(){return _createClass3(function Push(e,_){var S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},k=arguments.length>3&&void 0!==arguments[3]?arguments[3]:us;_classCallCheck3(this,Push),this.channel=e,this.event=_,this.payload=S,this.timeout=k,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null},[{key:"resend",value:function(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}},{key:"send",value:function(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}},{key:"updatePayload",value:function(e){this.payload=Object.assign(Object.assign({},this.payload),e)}},{key:"receive",value:function(e,_){var S;return this._hasReceived(e)&&_(null===(S=this.receivedResp)||void 0===S?void 0:S.response),this.recHooks.push({status:e,callback:_}),this}},{key:"startTimeout",value:function(){var e=this;if(!this.timeoutTimer){this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);this.channel._on(this.refEvent,{},function(_){e._cancelRefEvent(),e._cancelTimeout(),e.receivedResp=_,e._matchReceive(_)}),this.timeoutTimer=setTimeout(function(){e.trigger("timeout",{})},this.timeout)}}},{key:"trigger",value:function(e,_){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:_})}},{key:"destroy",value:function(){this._cancelRefEvent(),this._cancelTimeout()}},{key:"_cancelRefEvent",value:function(){this.refEvent&&this.channel._off(this.refEvent,{})}},{key:"_cancelTimeout",value:function(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}},{key:"_matchReceive",value:function(e){var _=e.status,S=e.response;this.recHooks.filter(function(e){return e.status===_}).forEach(function(e){return e.callback(S)})}},{key:"_hasReceived",value:function(e){return this.receivedResp&&this.receivedResp.status===e}}])}();!function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"}(ds||(ds={}));var ps,vs,gs,ms=function(){return _createClass3(function RealtimePresence(e,_){var S=this;_classCallCheck3(this,RealtimePresence),this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:function(){},onLeave:function(){},onSync:function(){}};var k=(null==_?void 0:_.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(k.state,{},function(e){var _=S.caller,k=_.onJoin,E=_.onLeave,T=_.onSync;S.joinRef=S.channel._joinRef(),S.state=RealtimePresence.syncState(S.state,e,k,E),S.pendingDiffs.forEach(function(e){S.state=RealtimePresence.syncDiff(S.state,e,k,E)}),S.pendingDiffs=[],T()}),this.channel._on(k.diff,{},function(e){var _=S.caller,k=_.onJoin,E=_.onLeave,T=_.onSync;S.inPendingSyncState()?S.pendingDiffs.push(e):(S.state=RealtimePresence.syncDiff(S.state,e,k,E),T())}),this.onJoin(function(e,_,k){S.channel._trigger("presence",{event:"join",key:e,currentPresences:_,newPresences:k})}),this.onLeave(function(e,_,k){S.channel._trigger("presence",{event:"leave",key:e,currentPresences:_,leftPresences:k})}),this.onSync(function(){S.channel._trigger("presence",{event:"sync"})})},[{key:"onJoin",value:function(e){this.caller.onJoin=e}},{key:"onLeave",value:function(e){this.caller.onLeave=e}},{key:"onSync",value:function(e){this.caller.onSync=e}},{key:"inPendingSyncState",value:function(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}],[{key:"syncState",value:function(e,_,S,k){var E=this.cloneDeep(e),T=this.transformState(_),M={},I={};return this.map(E,function(e,_){T[e]||(I[e]=_)}),this.map(T,function(e,_){var S=E[e];if(S){var k=_.map(function(e){return e.presence_ref}),T=S.map(function(e){return e.presence_ref}),R=_.filter(function(e){return T.indexOf(e.presence_ref)<0}),O=S.filter(function(e){return k.indexOf(e.presence_ref)<0});R.length>0&&(M[e]=R),O.length>0&&(I[e]=O)}else M[e]=_}),this.syncDiff(E,{joins:M,leaves:I},S,k)}},{key:"syncDiff",value:function(e,_,S,k){var E=this,T={joins:this.transformState(_.joins),leaves:this.transformState(_.leaves)},M=T.joins,I=T.leaves;return S||(S=function(){}),k||(k=function(){}),this.map(M,function(_,k){var T,M=null!==(T=e[_])&&void 0!==T?T:[];if(e[_]=E.cloneDeep(k),M.length>0){var I,R=e[_].map(function(e){return e.presence_ref}),O=M.filter(function(e){return R.indexOf(e.presence_ref)<0});(I=e[_]).unshift.apply(I,_toConsumableArray3(O))}S(_,M,k)}),this.map(I,function(_,S){var E=e[_];if(E){var T=S.map(function(e){return e.presence_ref});E=E.filter(function(e){return T.indexOf(e.presence_ref)<0}),e[_]=E,k(_,E,S),0===E.length&&delete e[_]}}),e}},{key:"map",value:function(e,_){return Object.getOwnPropertyNames(e).map(function(S){return _(S,e[S])})}},{key:"transformState",value:function(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce(function(_,S){var k=e[S];return _[S]="metas"in k?k.metas.map(function(e){return e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e}):k,_},{})}},{key:"cloneDeep",value:function(e){return JSON.parse(JSON.stringify(e))}}])}();!function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"}(ps||(ps={})),function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"}(vs||(vs={})),function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"}(gs||(gs={}));var ys=function(){function RealtimeChannel(e){var _,S,k=this,E=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}},T=arguments.length>2?arguments[2]:void 0;if(_classCallCheck3(this,RealtimeChannel),this.topic=e,this.params=E,this.socket=T,this.bindings={},this.state=Zo.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},E.config),this.timeout=this.socket.timeout,this.joinPush=new fs(this,$o.join,this.params,this.timeout),this.rejoinTimer=new hs(function(){return k._rejoinUntilConnected()},this.socket.reconnectAfterMs),this.joinPush.receive("ok",function(){k.state=Zo.joined,k.rejoinTimer.reset(),k.pushBuffer.forEach(function(e){return e.send()}),k.pushBuffer=[]}),this._onClose(function(){k.rejoinTimer.reset(),k.socket.log("channel","close ".concat(k.topic," ").concat(k._joinRef())),k.state=Zo.closed,k.socket._remove(k)}),this._onError(function(e){k._isLeaving()||k._isClosed()||(k.socket.log("channel","error ".concat(k.topic),e),k.state=Zo.errored,k.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",function(){k._isJoining()&&(k.socket.log("channel","timeout ".concat(k.topic),k.joinPush.timeout),k.state=Zo.errored,k.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",function(e){k._isLeaving()||k._isClosed()||(k.socket.log("channel","error ".concat(k.topic),e),k.state=Zo.errored,k.rejoinTimer.scheduleTimeout())}),this._on($o.reply,{},function(e,_){k._trigger(k._replyEventName(_),e)}),this.presence=new ms(this),this.broadcastEndpointURL=httpEndpointURL(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(null===(S=null===(_=this.params.config)||void 0===_?void 0:_.broadcast)||void 0===S?void 0:S.replay))throw"tried to use replay on public channel '".concat(this.topic,"'. It must be a private channel.")}return _createClass3(RealtimeChannel,[{key:"subscribe",value:function(e){var _,S,k,E=this,T=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.timeout;if(this.socket.isConnected()||this.socket.connect(),this.state==Zo.closed){var M=this.params.config,I=M.broadcast,R=M.presence,O=M.private,D=null!==(S=null===(_=this.bindings.postgres_changes)||void 0===_?void 0:_.map(function(e){return e.filter}))&&void 0!==S?S:[],L=!!this.bindings[vs.PRESENCE]&&this.bindings[vs.PRESENCE].length>0||!0===(null===(k=this.params.config.presence)||void 0===k?void 0:k.enabled),U={},B={broadcast:I,presence:Object.assign(Object.assign({},R),{enabled:L}),postgres_changes:D,private:O};this.socket.accessTokenValue&&(U.access_token=this.socket.accessTokenValue),this._onError(function(_){return null==e?void 0:e(gs.CHANNEL_ERROR,_)}),this._onClose(function(){return null==e?void 0:e(gs.CLOSED)}),this.updateJoinPayload(Object.assign({config:B},U)),this.joinedOnce=!0,this._rejoin(T),this.joinPush.receive("ok",function(){var _=_asyncToGenerator(_regenerator().m(function _callee35(_){var S,k,T,M,I,R,O,D,L,U,B,z,G;return _regenerator().w(function(j){for(;;)switch(j.n){case 0:if(S=_.postgres_changes,E.socket.setAuth(),void 0!==S){j.n=1;break}return null==e||e(gs.SUBSCRIBED),j.a(2);case 1:T=E.bindings.postgres_changes,M=null!==(k=null==T?void 0:T.length)&&void 0!==k?k:0,I=[],R=0;case 2:if(!(R<M)){j.n=5;break}if(O=T[R],D=O.filter,L=D.event,U=D.schema,B=D.table,z=D.filter,!(G=S&&S[R])||G.event!==L||G.schema!==U||G.table!==B||G.filter!==z){j.n=3;break}I.push(Object.assign(Object.assign({},O),{id:G.id})),j.n=4;break;case 3:return E.unsubscribe(),E.state=Zo.errored,null==e||e(gs.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes")),j.a(2);case 4:R++,j.n=2;break;case 5:return E.bindings.postgres_changes=I,e&&e(gs.SUBSCRIBED),j.a(2);case 6:return j.a(2)}},_callee35)}));return function(e){return _.apply(this,arguments)}}()).receive("error",function(_){E.state=Zo.errored,null==e||e(gs.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(_).join(", ")||"error")))}).receive("timeout",function(){null==e||e(gs.TIMED_OUT)})}return this}},{key:"presenceState",value:function(){return this.presence.state}},{key:"track",value:(E=_asyncToGenerator(_regenerator().m(function _callee36(e){var _,S=arguments;return _regenerator().w(function(k){for(;;)switch(k.n){case 0:return _=S.length>1&&void 0!==S[1]?S[1]:{},k.n=1,this.send({type:"presence",event:"track",payload:e},_.timeout||this.timeout);case 1:return k.a(2,k.v)}},_callee36,this)})),function(e){return E.apply(this,arguments)})},{key:"untrack",value:(k=_asyncToGenerator(_regenerator().m(function _callee37(){var e,_=arguments;return _regenerator().w(function(S){for(;;)switch(S.n){case 0:return e=_.length>0&&void 0!==_[0]?_[0]:{},S.n=1,this.send({type:"presence",event:"untrack"},e);case 1:return S.a(2,S.v)}},_callee37,this)})),function(){return k.apply(this,arguments)})},{key:"on",value:function(e,_,S){var k=this;return this.state===Zo.joined&&e===vs.PRESENCE&&(this.socket.log("channel","resubscribe to ".concat(this.topic," due to change in presence callbacks on joined channel")),this.unsubscribe().then(function(){return k.subscribe()})),this._on(e,_,S)}},{key:"httpSend",value:(S=_asyncToGenerator(_regenerator().m(function _callee38(e,_){var S,k,E,T,M,I,R,O=arguments;return _regenerator().w(function(D){for(;;)switch(D.p=D.n){case 0:if(S=O.length>2&&void 0!==O[2]?O[2]:{},E=this.socket.accessTokenValue?"Bearer ".concat(this.socket.accessTokenValue):"",null!=_){D.n=1;break}return D.a(2,Promise.reject("Payload is required for httpSend()"));case 1:return T={method:"POST",headers:{Authorization:E,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:_,private:this.private}]})},D.n=2,this._fetchWithTimeout(this.broadcastEndpointURL,T,null!==(k=S.timeout)&&void 0!==k?k:this.timeout);case 2:if(202!==(M=D.v).status){D.n=3;break}return D.a(2,{success:!0});case 3:return I=M.statusText,D.p=4,D.n=5,M.json();case 5:R=D.v,I=R.error||R.message||I,D.n=7;break;case 6:D.p=6,D.v;case 7:return D.a(2,Promise.reject(new Error(I)))}},_callee38,this,[[4,6]])})),function(e,_){return S.apply(this,arguments)})},{key:"send",value:(_=_asyncToGenerator(_regenerator().m(function _callee39(e){var _,S,k,E,T,M,I,R,O=this,D=arguments;return _regenerator().w(function(L){for(;;)switch(L.p=L.n){case 0:if(_=D.length>1&&void 0!==D[1]?D[1]:{},this._canPush()||"broadcast"!==e.type){L.n=7;break}return E=e.event,T=e.payload,M=this.socket.accessTokenValue?"Bearer ".concat(this.socket.accessTokenValue):"",I={method:"POST",headers:{Authorization:M,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:E,payload:T,private:this.private}]})},L.p=1,L.n=2,this._fetchWithTimeout(this.broadcastEndpointURL,I,null!==(S=_.timeout)&&void 0!==S?S:this.timeout);case 2:return R=L.v,L.n=3,null===(k=R.body)||void 0===k?void 0:k.cancel();case 3:return L.a(2,R.ok?"ok":"error");case 4:if(L.p=4,"AbortError"!==L.v.name){L.n=5;break}return L.a(2,"timed out");case 5:return L.a(2,"error");case 6:L.n=8;break;case 7:return L.a(2,new Promise(function(S){var k,E,T,M=O._push(e.type,e,_.timeout||O.timeout);"broadcast"!==e.type||(null===(T=null===(E=null===(k=O.params)||void 0===k?void 0:k.config)||void 0===E?void 0:E.broadcast)||void 0===T?void 0:T.ack)||S("ok"),M.receive("ok",function(){return S("ok")}),M.receive("error",function(){return S("error")}),M.receive("timeout",function(){return S("timed out")})}));case 8:return L.a(2)}},_callee39,this,[[1,4]])})),function(e){return _.apply(this,arguments)})},{key:"updateJoinPayload",value:function(e){this.joinPush.updatePayload(e)}},{key:"unsubscribe",value:function(){var e=this,_=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this.state=Zo.leaving;var onClose=function(){e.socket.log("channel","leave ".concat(e.topic)),e._trigger($o.close,"leave",e._joinRef())};this.joinPush.destroy();var S=null;return new Promise(function(k){(S=new fs(e,$o.leave,{},_)).receive("ok",function(){onClose(),k("ok")}).receive("timeout",function(){onClose(),k("timed out")}).receive("error",function(){k("error")}),S.send(),e._canPush()||S.trigger("ok",{})}).finally(function(){null==S||S.destroy()})}},{key:"teardown",value:function(){this.pushBuffer.forEach(function(e){return e.destroy()}),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Zo.closed,this.bindings={}}},{key:"_fetchWithTimeout",value:(e=_asyncToGenerator(_regenerator().m(function _callee40(e,_,S){var k,E,T;return _regenerator().w(function(M){for(;;)switch(M.n){case 0:return k=new AbortController,E=setTimeout(function(){return k.abort()},S),M.n=1,this.socket.fetch(e,Object.assign(Object.assign({},_),{signal:k.signal}));case 1:return T=M.v,clearTimeout(E),M.a(2,T)}},_callee40,this)})),function(_,S,k){return e.apply(this,arguments)})},{key:"_push",value:function(e,_){var S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.timeout;if(!this.joinedOnce)throw"tried to push '".concat(e,"' to '").concat(this.topic,"' before joining. Use channel.subscribe() before pushing events");var k=new fs(this,e,_,S);return this._canPush()?k.send():this._addToPushBuffer(k),k}},{key:"_addToPushBuffer",value:function(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>100){var _=this.pushBuffer.shift();_&&(_.destroy(),this.socket.log("channel","discarded push due to buffer overflow: ".concat(_.event),_.payload))}}},{key:"_onMessage",value:function(e,_,S){return _}},{key:"_isMember",value:function(e){return this.topic===e}},{key:"_joinRef",value:function(){return this.joinPush.ref}},{key:"_trigger",value:function(e,_,S){var k,E,T=this,M=e.toLocaleLowerCase(),I=$o,R=I.close,O=I.error,D=I.leave,L=I.join;if(!(S&&[R,O,D,L].indexOf(M)>=0&&S!==this._joinRef())){var U=this._onMessage(M,_,S);if(_&&!U)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(M)?null===(k=this.bindings.postgres_changes)||void 0===k||k.filter(function(e){var _,S,k;return"*"===(null===(_=e.filter)||void 0===_?void 0:_.event)||(null===(k=null===(S=e.filter)||void 0===S?void 0:S.event)||void 0===k?void 0:k.toLocaleLowerCase())===M}).map(function(e){return e.callback(U,S)}):null===(E=this.bindings[M])||void 0===E||E.filter(function(e){var S,k,E,T,I,R;if(["broadcast","presence","postgres_changes"].includes(M)){if("id"in e){var O=e.id,D=null===(S=e.filter)||void 0===S?void 0:S.event;return O&&(null===(k=_.ids)||void 0===k?void 0:k.includes(O))&&("*"===D||(null==D?void 0:D.toLocaleLowerCase())===(null===(E=_.data)||void 0===E?void 0:E.type.toLocaleLowerCase()))}var L=null===(I=null===(T=null==e?void 0:e.filter)||void 0===T?void 0:T.event)||void 0===I?void 0:I.toLocaleLowerCase();return"*"===L||L===(null===(R=null==_?void 0:_.event)||void 0===R?void 0:R.toLocaleLowerCase())}return e.type.toLocaleLowerCase()===M}).map(function(e){if("object"===_typeof3(U)&&"ids"in U){var _=U.data,k={schema:_.schema,table:_.table,commit_timestamp:_.commit_timestamp,eventType:_.type,new:{},old:{},errors:_.errors};U=Object.assign(Object.assign({},k),T._getPayloadRecords(_))}e.callback(U,S)})}}},{key:"_isClosed",value:function(){return this.state===Zo.closed}},{key:"_isJoined",value:function(){return this.state===Zo.joined}},{key:"_isJoining",value:function(){return this.state===Zo.joining}},{key:"_isLeaving",value:function(){return this.state===Zo.leaving}},{key:"_replyEventName",value:function(e){return"chan_reply_".concat(e)}},{key:"_on",value:function(e,_,S){var k=e.toLocaleLowerCase(),E={type:k,filter:_,callback:S};return this.bindings[k]?this.bindings[k].push(E):this.bindings[k]=[E],this}},{key:"_off",value:function(e,_){var S=e.toLocaleLowerCase();return this.bindings[S]&&(this.bindings[S]=this.bindings[S].filter(function(e){var k;return!((null===(k=e.type)||void 0===k?void 0:k.toLocaleLowerCase())===S&&RealtimeChannel.isEqual(e.filter,_))})),this}},{key:"_rejoinUntilConnected",value:function(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}},{key:"_onClose",value:function(e){this._on($o.close,{},e)}},{key:"_onError",value:function(e){this._on($o.error,{},function(_){return e(_)})}},{key:"_canPush",value:function(){return this.socket.isConnected()&&this._isJoined()}},{key:"_rejoin",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Zo.joining,this.joinPush.resend(e))}},{key:"_getPayloadRecords",value:function(e){var _={new:{},old:{}};return"INSERT"!==e.type&&"UPDATE"!==e.type||(_.new=convertChangeData(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(_.old=convertChangeData(e.columns,e.old_record)),_}}],[{key:"isEqual",value:function(e,_){if(Object.keys(e).length!==Object.keys(_).length)return!1;for(var S in e)if(e[S]!==_[S])return!1;return!0}}]);var e,_,S,k,E}(),noop$2=function(){},_s=25e3,bs=10,Ss=100,ws=[1e3,2e3,5e3,1e4],xs=function(){return _createClass3(function RealtimeClient(e,_){var S;if(_classCallCheck3(this,RealtimeClient),this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=us,this.transport=null,this.heartbeatIntervalMs=_s,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=noop$2,this.ref=0,this.reconnectTimer=null,this.logger=noop$2,this.conn=null,this.sendBuffer=[],this.serializer=new cs,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=function(e){var _;return _=e||("undefined"==typeof fetch?function(){for(var e=arguments.length,_=new Array(e),S=0;S<e;S++)_[S]=arguments[S];return G(_asyncToGenerator(_regenerator().m(function _callee41(){var e,_;return _regenerator().w(function(S){for(;;)switch(S.n){case 0:return S.n=1,Promise.resolve().then(function(){return Yo});case 1:return e=S.v,_=e.default,S.a(2,{default:_})}},_callee41)})),void 0).then(function(e){return e.default.apply(void 0,_)}).catch(function(e){throw new Error("Failed to load @supabase/node-fetch: ".concat(e.message,". ")+"This is required for HTTP requests in Node.js environments without native fetch.")})}:fetch),function(){return _.apply(void 0,arguments)}},!(null===(S=null==_?void 0:_.params)||void 0===S?void 0:S.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=_.params.apikey,this.endPoint="".concat(e,"/").concat(es.websocket),this.httpEndpoint=httpEndpointURL(e),this._initializeOptions(_),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(null==_?void 0:_.fetch)},[{key:"connect",value:function(){if(!(this.isConnecting()||this.isDisconnecting()||null!==this.conn&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=os.createWebSocket(this.endpointURL())}catch(_){this._setConnectionState("disconnected");var e=_.message;if(e.includes("Node.js"))throw new Error("".concat(e,"\n\n")+'To use Realtime in Node.js, you need to provide a WebSocket implementation:\n\nOption 1: Use Node.js 22+ which has native WebSocket support\nOption 2: Install and provide the "ws" package:\n\n  npm install ws\n\n  import ws from "ws"\n  const client = new RealtimeClient(url, {\n    ...options,\n    transport: ws\n  })');throw new Error("WebSocket not available: ".concat(e))}this._setupConnectionHandlers()}}},{key:"endpointURL",value:function(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}},{key:"disconnect",value:function(e,_){var S=this;if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){var k=setTimeout(function(){S._setConnectionState("disconnected")},100);this.conn.onclose=function(){clearTimeout(k),S._setConnectionState("disconnected")},e?this.conn.close(e,null!=_?_:""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}},{key:"getChannels",value:function(){return this.channels}},{key:"removeChannel",value:(T=_asyncToGenerator(_regenerator().m(function _callee42(e){var _;return _regenerator().w(function(S){for(;;)switch(S.n){case 0:return S.n=1,e.unsubscribe();case 1:return _=S.v,0===this.channels.length&&this.disconnect(),S.a(2,_)}},_callee42,this)})),function(e){return T.apply(this,arguments)})},{key:"removeAllChannels",value:(E=_asyncToGenerator(_regenerator().m(function _callee43(){var e;return _regenerator().w(function(_){for(;;)switch(_.n){case 0:return _.n=1,Promise.all(this.channels.map(function(e){return e.unsubscribe()}));case 1:return e=_.v,this.channels=[],this.disconnect(),_.a(2,e)}},_callee43,this)})),function(){return E.apply(this,arguments)})},{key:"log",value:function(e,_,S){this.logger(e,_,S)}},{key:"connectionState",value:function(){switch(this.conn&&this.conn.readyState){case Qo.connecting:return ts.Connecting;case Qo.open:return ts.Open;case Qo.closing:return ts.Closing;default:return ts.Closed}}},{key:"isConnected",value:function(){return this.connectionState()===ts.Open}},{key:"isConnecting",value:function(){return"connecting"===this._connectionState}},{key:"isDisconnecting",value:function(){return"disconnecting"===this._connectionState}},{key:"channel",value:function(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}},S="realtime:".concat(e),k=this.getChannels().find(function(e){return e.topic===S});if(k)return k;var E=new ys("realtime:".concat(e),_,this);return this.channels.push(E),E}},{key:"push",value:function(e){var _=this,S=e.topic,k=e.event,E=e.payload,T=e.ref,callback=function(){_.encode(e,function(e){var S;null===(S=_.conn)||void 0===S||S.send(e)})};this.log("push","".concat(S," ").concat(k," (").concat(T,")"),E),this.isConnected()?callback():this.sendBuffer.push(callback)}},{key:"setAuth",value:(k=_asyncToGenerator(_regenerator().m(function _callee44(){var e,_=arguments;return _regenerator().w(function(S){for(;;)switch(S.p=S.n){case 0:return e=_.length>0&&void 0!==_[0]?_[0]:null,this._authPromise=this._performAuth(e),S.p=1,S.n=2,this._authPromise;case 2:return S.p=2,this._authPromise=null,S.f(2);case 3:return S.a(2)}},_callee44,this,[[1,,2,3]])})),function(){return k.apply(this,arguments)})},{key:"sendHeartbeat",value:(S=_asyncToGenerator(_regenerator().m(function _callee45(){var e,_=this;return _regenerator().w(function(S){for(;;)switch(S.n){case 0:if(this.isConnected()){S.n=1;break}try{this.heartbeatCallback("disconnected")}catch(fo){this.log("error","error in heartbeat callback",fo)}return S.a(2);case 1:if(!this.pendingHeartbeatRef){S.n=2;break}this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(fo){this.log("error","error in heartbeat callback",fo)}return this._wasManualDisconnect=!1,null===(e=this.conn)||void 0===e||e.close(1e3,"heartbeat timeout"),setTimeout(function(){var e;_.isConnected()||null===(e=_.reconnectTimer)||void 0===e||e.scheduleTimeout()},Ss),S.a(2);case 2:this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(fo){this.log("error","error in heartbeat callback",fo)}this._setAuthSafely("heartbeat");case 3:return S.a(2)}},_callee45,this)})),function(){return S.apply(this,arguments)})},{key:"onHeartbeat",value:function(e){this.heartbeatCallback=e}},{key:"flushSendBuffer",value:function(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(function(e){return e()}),this.sendBuffer=[])}},{key:"_makeRef",value:function(){var e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}},{key:"_leaveOpenTopic",value:function(e){var _=this.channels.find(function(_){return _.topic===e&&(_._isJoined()||_._isJoining())});_&&(this.log("transport",'leaving duplicate topic "'.concat(e,'"')),_.unsubscribe())}},{key:"_remove",value:function(e){this.channels=this.channels.filter(function(_){return _.topic!==e.topic})}},{key:"_onConnMessage",value:function(e){var _=this;this.decode(e.data,function(e){if("phoenix"===e.topic&&"phx_reply"===e.event)try{_.heartbeatCallback("ok"===e.payload.status?"ok":"error")}catch(fo){_.log("error","error in heartbeat callback",fo)}e.ref&&e.ref===_.pendingHeartbeatRef&&(_.pendingHeartbeatRef=null);var S=e.topic,k=e.event,E=e.payload,T=e.ref,M=T?"(".concat(T,")"):"",I=E.status||"";_.log("receive","".concat(I," ").concat(S," ").concat(k," ").concat(M).trim(),E),_.channels.filter(function(e){return e._isMember(S)}).forEach(function(e){return e._trigger(k,E,T)}),_._triggerStateCallbacks("message",e)})}},{key:"_clearTimer",value:function(e){var _;"heartbeat"===e&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):"reconnect"===e&&(null===(_=this.reconnectTimer)||void 0===_||_.reset())}},{key:"_clearAllTimers",value:function(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}},{key:"_setupConnectionHandlers",value:function(){var e=this;this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=function(){return e._onConnOpen()},this.conn.onerror=function(_){return e._onConnError(_)},this.conn.onmessage=function(_){return e._onConnMessage(_)},this.conn.onclose=function(_){return e._onConnClose(_)})}},{key:"_teardownConnection",value:function(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(function(e){return e.teardown()})}},{key:"_onConnOpen",value:function(){this._setConnectionState("connected"),this.log("transport","connected to ".concat(this.endpointURL())),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}},{key:"_startHeartbeat",value:function(){var e=this;this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(function(){return e.sendHeartbeat()},this.heartbeatIntervalMs)}},{key:"_startWorkerHeartbeat",value:function(){var e=this;this.workerUrl?this.log("worker","starting worker for from ".concat(this.workerUrl)):this.log("worker","starting default worker");var _=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(_),this.workerRef.onerror=function(_){e.log("worker","worker error",_.message),e.workerRef.terminate()},this.workerRef.onmessage=function(_){"keepAlive"===_.data.event&&e.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}},{key:"_onConnClose",value:function(e){var _;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||null===(_=this.reconnectTimer)||void 0===_||_.scheduleTimeout(),this._triggerStateCallbacks("close",e)}},{key:"_onConnError",value:function(e){this._setConnectionState("disconnected"),this.log("transport","".concat(e)),this._triggerChanError(),this._triggerStateCallbacks("error",e)}},{key:"_triggerChanError",value:function(){this.channels.forEach(function(e){return e._trigger($o.error)})}},{key:"_appendParams",value:function(e,_){if(0===Object.keys(_).length)return e;var S=e.match(/\?/)?"&":"?",k=new URLSearchParams(_);return"".concat(e).concat(S).concat(k)}},{key:"_workerObjectUrl",value:function(e){var _;if(e)_=e;else{var S=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});_=URL.createObjectURL(S)}return _}},{key:"_setConnectionState",value:function(e){var _=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._connectionState=e,"connecting"===e?this._wasManualDisconnect=!1:"disconnecting"===e&&(this._wasManualDisconnect=_)}},{key:"_performAuth",value:(_=_asyncToGenerator(_regenerator().m(function _callee46(){var e,_,S=arguments;return _regenerator().w(function(k){for(;;)switch(k.n){case 0:if(!(e=S.length>0&&void 0!==S[0]?S[0]:null)){k.n=1;break}_=e,k.n=4;break;case 1:if(!this.accessToken){k.n=3;break}return k.n=2,this.accessToken();case 2:_=k.v,k.n=4;break;case 3:_=this.accessTokenValue;case 4:this.accessTokenValue!=_&&(this.accessTokenValue=_,this.channels.forEach(function(e){var S={access_token:_,version:ss};_&&e.updateJoinPayload(S),e.joinedOnce&&e._isJoined()&&e._push($o.access_token,{access_token:_})}));case 5:return k.a(2)}},_callee46,this)})),function(){return _.apply(this,arguments)})},{key:"_waitForAuthIfNeeded",value:(e=_asyncToGenerator(_regenerator().m(function _callee47(){return _regenerator().w(function(e){for(;;)switch(e.n){case 0:if(!this._authPromise){e.n=1;break}return e.n=1,this._authPromise;case 1:return e.a(2)}},_callee47,this)})),function(){return e.apply(this,arguments)})},{key:"_setAuthSafely",value:function(){var e=this,_=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"general";this.setAuth().catch(function(S){e.log("error","error setting auth in ".concat(_),S)})}},{key:"_triggerStateCallbacks",value:function(e,_){var S=this;try{this.stateChangeCallbacks[e].forEach(function(k){try{k(_)}catch(fo){S.log("error","error in ".concat(e," callback"),fo)}})}catch(fo){this.log("error","error triggering ".concat(e," callbacks"),fo)}}},{key:"_setupReconnectionTimer",value:function(){var e=this;this.reconnectTimer=new hs(_asyncToGenerator(_regenerator().m(function _callee49(){return _regenerator().w(function(_){for(;;)switch(_.n){case 0:setTimeout(_asyncToGenerator(_regenerator().m(function _callee48(){return _regenerator().w(function(_){for(;;)switch(_.n){case 0:return _.n=1,e._waitForAuthIfNeeded();case 1:e.isConnected()||e.connect();case 2:return _.a(2)}},_callee48)})),bs);case 1:return _.a(2)}},_callee49)})),this.reconnectAfterMs)}},{key:"_initializeOptions",value:function(e){var _,S,k,E,T,M,I,R,O;if(this.transport=null!==(_=null==e?void 0:e.transport)&&void 0!==_?_:null,this.timeout=null!==(S=null==e?void 0:e.timeout)&&void 0!==S?S:us,this.heartbeatIntervalMs=null!==(k=null==e?void 0:e.heartbeatIntervalMs)&&void 0!==k?k:_s,this.worker=null!==(E=null==e?void 0:e.worker)&&void 0!==E&&E,this.accessToken=null!==(T=null==e?void 0:e.accessToken)&&void 0!==T?T:null,this.heartbeatCallback=null!==(M=null==e?void 0:e.heartbeatCallback)&&void 0!==M?M:noop$2,(null==e?void 0:e.params)&&(this.params=e.params),(null==e?void 0:e.logger)&&(this.logger=e.logger),((null==e?void 0:e.logLevel)||(null==e?void 0:e.log_level))&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=null!==(I=null==e?void 0:e.reconnectAfterMs)&&void 0!==I?I:function(e){return ws[e-1]||1e4},this.encode=null!==(R=null==e?void 0:e.encode)&&void 0!==R?R:function(e,_){return _(JSON.stringify(e))},this.decode=null!==(O=null==e?void 0:e.decode)&&void 0!==O?O:this.serializer.decode.bind(this.serializer),this.worker){if("undefined"!=typeof window&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=null==e?void 0:e.workerUrl}}}]);var e,_,S,k,E,T}(),ks=function(e){function StorageError(e){var _;return _classCallCheck3(this,StorageError),(_=_callSuper(this,StorageError,[e])).__isStorageError=!0,_.name="StorageError",_}return _inherits(StorageError,e),_createClass3(StorageError)}(_wrapNativeSuper(Error));function isStorageError(e){return"object"===_typeof3(e)&&null!==e&&"__isStorageError"in e}var Cs=function(e){function StorageApiError(e,_,S){var k;return _classCallCheck3(this,StorageApiError),(k=_callSuper(this,StorageApiError,[e])).name="StorageApiError",k.status=_,k.statusCode=S,k}return _inherits(StorageApiError,e),_createClass3(StorageApiError,[{key:"toJSON",value:function(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}])}(ks),As=function(e){function StorageUnknownError(e,_){var S;return _classCallCheck3(this,StorageUnknownError),(S=_callSuper(this,StorageUnknownError,[e])).name="StorageUnknownError",S.originalError=_,S}return _inherits(StorageUnknownError,e),_createClass3(StorageUnknownError)}(ks),resolveFetch$3=function(e){var _;return _=e||("undefined"==typeof fetch?function(){for(var e=arguments.length,_=new Array(e),S=0;S<e;S++)_[S]=arguments[S];return G(_asyncToGenerator(_regenerator().m(function _callee50(){var e,_;return _regenerator().w(function(S){for(;;)switch(S.n){case 0:return S.n=1,Promise.resolve().then(function(){return Yo});case 1:return e=S.v,_=e.default,S.a(2,{default:_})}},_callee50)})),void 0).then(function(e){return e.default.apply(void 0,_)})}:fetch),function(){return _.apply(void 0,arguments)}},resolveResponse=function(){return __awaiter(void 0,void 0,void 0,_regenerator().m(function _callee51(){return _regenerator().w(function(e){for(;;)switch(e.n){case 0:if("undefined"!=typeof Response){e.n=2;break}return e.n=1,G(function(){return Promise.resolve().then(function(){return Yo})},void 0);case 1:return e.a(2,e.v.Response);case 2:return e.a(2,Response)}},_callee51)}))},_recursiveToCamel=function(e){if(Array.isArray(e))return e.map(function(e){return _recursiveToCamel(e)});if("function"==typeof e||e!==Object(e))return e;var _={};return Object.entries(e).forEach(function(e){var S=_slicedToArray(e,2),k=S[0],E=S[1],T=k.replace(/([-_][a-z])/gi,function(e){return e.toUpperCase().replace(/[-_]/g,"")});_[T]=_recursiveToCamel(E)}),_},_getErrorMessage$2=function(e){var _;return e.msg||e.message||e.error_description||("string"==typeof e.error?e.error:null===(_=e.error)||void 0===_?void 0:_.message)||JSON.stringify(e)},handleError$2=function(e,_,S){return __awaiter(void 0,void 0,void 0,_regenerator().m(function _callee52(){var k;return _regenerator().w(function(E){for(;;)switch(E.n){case 0:return E.n=1,resolveResponse();case 1:k=E.v,e instanceof k&&!(null==S?void 0:S.noResolveJson)?e.json().then(function(S){var k=e.status||500,E=(null==S?void 0:S.statusCode)||k+"";_(new Cs(_getErrorMessage$2(S),k,E))}).catch(function(e){_(new As(_getErrorMessage$2(e),e))}):_(new As(_getErrorMessage$2(e),e));case 2:return E.a(2)}},_callee52)}))},_getRequestParams$2=function(e,_,S,k){var E={method:e,headers:(null==_?void 0:_.headers)||{}};return"GET"!==e&&k?(!function(e){if("object"!==_typeof3(e)||null===e)return!1;var _=Object.getPrototypeOf(e);return!(null!==_&&_!==Object.prototype&&null!==Object.getPrototypeOf(_)||Symbol.toStringTag in e||Symbol.iterator in e)}(k)?E.body=k:(E.headers=Object.assign({"Content-Type":"application/json"},null==_?void 0:_.headers),E.body=JSON.stringify(k)),(null==_?void 0:_.duplex)&&(E.duplex=_.duplex),Object.assign(Object.assign({},E),S)):E};function _handleRequest$2(e,_,S,k,E,T){return __awaiter(this,void 0,void 0,_regenerator().m(function _callee53(){return _regenerator().w(function(M){for(;;)if(0===M.n)return M.a(2,new Promise(function(M,I){e(S,_getRequestParams$2(_,k,E,T)).then(function(e){if(!e.ok)throw e;return(null==k?void 0:k.noResolveJson)?e:e.json()}).then(function(e){return M(e)}).catch(function(e){return handleError$2(e,I,k)})}))},_callee53)}))}function get(e,_,S,k){return __awaiter(this,void 0,void 0,_regenerator().m(function _callee54(){return _regenerator().w(function(E){for(;;)if(0===E.n)return E.a(2,_handleRequest$2(e,"GET",_,S,k))},_callee54)}))}function post$1(e,_,S,k,E){return __awaiter(this,void 0,void 0,_regenerator().m(function _callee55(){return _regenerator().w(function(T){for(;;)if(0===T.n)return T.a(2,_handleRequest$2(e,"POST",_,k,E,S))},_callee55)}))}function put(e,_,S,k,E){return __awaiter(this,void 0,void 0,_regenerator().m(function _callee56(){return _regenerator().w(function(T){for(;;)if(0===T.n)return T.a(2,_handleRequest$2(e,"PUT",_,k,E,S))},_callee56)}))}function head(e,_,S,k){return __awaiter(this,void 0,void 0,_regenerator().m(function _callee57(){return _regenerator().w(function(E){for(;;)if(0===E.n)return E.a(2,_handleRequest$2(e,"HEAD",_,Object.assign(Object.assign({},S),{noResolveJson:!0}),k))},_callee57)}))}function _remove2(e,_,S,k,E){return __awaiter(this,void 0,void 0,_regenerator().m(function _callee58(){return _regenerator().w(function(T){for(;;)if(0===T.n)return T.a(2,_handleRequest$2(e,"DELETE",_,k,E,S))},_callee58)}))}var Es,Ts=function(){return _createClass3(function StreamDownloadBuilder(e,_){_classCallCheck3(this,StreamDownloadBuilder),this.downloadFn=e,this.shouldThrowOnError=_},[{key:"then",value:function(e,_){return this.execute().then(e,_)}},{key:"execute",value:function(){return __awaiter(this,void 0,void 0,_regenerator().m(function _callee59(){var e,_;return _regenerator().w(function(S){for(;;)switch(S.p=S.n){case 0:return S.p=0,S.n=1,this.downloadFn();case 1:return e=S.v,S.a(2,{data:e.body,error:null});case 2:if(S.p=2,_=S.v,!this.shouldThrowOnError){S.n=3;break}throw _;case 3:if(!isStorageError(_)){S.n=4;break}return S.a(2,{data:null,error:_});case 4:throw _;case 5:return S.a(2)}},_callee59,this,[[0,2]])}))}}])}(),Ms=function(){return _createClass3(function BlobDownloadBuilder(e,_){_classCallCheck3(this,BlobDownloadBuilder),this.downloadFn=e,this.shouldThrowOnError=_,this[Es]="BlobDownloadBuilder",this.promise=null},[{key:"asStream",value:function(){return new Ts(this.downloadFn,this.shouldThrowOnError)}},{key:"then",value:function(e,_){return this.getPromise().then(e,_)}},{key:"catch",value:function(e){return this.getPromise().catch(e)}},{key:"finally",value:function(e){return this.getPromise().finally(e)}},{key:"getPromise",value:function(){return this.promise||(this.promise=this.execute()),this.promise}},{key:"execute",value:function(){return __awaiter(this,void 0,void 0,_regenerator().m(function _callee60(){var e,_,S;return _regenerator().w(function(k){for(;;)switch(k.p=k.n){case 0:return k.p=0,k.n=1,this.downloadFn();case 1:return e=k.v,k.n=2,e.blob();case 2:return _=k.v,k.a(2,{data:_,error:null});case 3:if(k.p=3,S=k.v,!this.shouldThrowOnError){k.n=4;break}throw S;case 4:if(!isStorageError(S)){k.n=5;break}return k.a(2,{data:null,error:S});case 5:throw S;case 6:return k.a(2)}},_callee60,this,[[0,3]])}))}}])}();Es=Symbol.toStringTag;var Is={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Rs={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1},Ps=function(){return _createClass3(function StorageFileApi(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},S=arguments.length>2?arguments[2]:void 0,k=arguments.length>3?arguments[3]:void 0;_classCallCheck3(this,StorageFileApi),this.shouldThrowOnError=!1,this.url=e,this.headers=_,this.bucketId=S,this.fetch=resolveFetch$3(k)},[{key:"throwOnError",value:function(){return this.shouldThrowOnError=!0,this}},{key:"uploadOrUpdate",value:function(e,_,S,k){return __awaiter(this,void 0,void 0,_regenerator().m(function _callee61(){var E,T,M,I,R,O,D,L;return _regenerator().w(function(U){for(;;)switch(U.p=U.n){case 0:return U.p=0,T=Object.assign(Object.assign({},Rs),k),M=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(T.upsert)}),I=T.metadata,"undefined"!=typeof Blob&&S instanceof Blob?((E=new FormData).append("cacheControl",T.cacheControl),I&&E.append("metadata",this.encodeMetadata(I)),E.append("",S)):"undefined"!=typeof FormData&&S instanceof FormData?((E=S).append("cacheControl",T.cacheControl),I&&E.append("metadata",this.encodeMetadata(I))):(E=S,M["cache-control"]="max-age=".concat(T.cacheControl),M["content-type"]=T.contentType,I&&(M["x-metadata"]=this.toBase64(this.encodeMetadata(I)))),(null==k?void 0:k.headers)&&(M=Object.assign(Object.assign({},M),k.headers)),R=this._removeEmptyFolders(_),O=this._getFinalPath(R),U.n=1,("PUT"==e?put:post$1)(this.fetch,"".concat(this.url,"/object/").concat(O),E,Object.assign({headers:M},(null==T?void 0:T.duplex)?{duplex:T.duplex}:{}));case 1:return D=U.v,U.a(2,{data:{path:R,id:D.Id,fullPath:D.Key},error:null});case 2:if(U.p=2,L=U.v,!this.shouldThrowOnError){U.n=3;break}throw L;case 3:if(!isStorageError(L)){U.n=4;break}return U.a(2,{data:null,error:L});case 4:throw L;case 5:return U.a(2)}},_callee61,this,[[0,2]])}))}},{key:"upload",value:function(e,_,S){return __awaiter(this,void 0,void 0,_regenerator().m(function _callee62(){return _regenerator().w(function(k){for(;;)if(0===k.n)return k.a(2,this.uploadOrUpdate("POST",e,_,S))},_callee62,this)}))}},{key:"uploadToSignedUrl",value:function(e,_,S,k){return __awaiter(this,void 0,void 0,_regenerator().m(function _callee63(){var E,T,M,I,R,O,D,L;return _regenerator().w(function(U){for(;;)switch(U.p=U.n){case 0:return E=this._removeEmptyFolders(e),T=this._getFinalPath(E),(M=new URL(this.url+"/object/upload/sign/".concat(T))).searchParams.set("token",_),U.p=1,R=Object.assign({upsert:Rs.upsert},k),O=Object.assign(Object.assign({},this.headers),{"x-upsert":String(R.upsert)}),"undefined"!=typeof Blob&&S instanceof Blob?((I=new FormData).append("cacheControl",R.cacheControl),I.append("",S)):"undefined"!=typeof FormData&&S instanceof FormData?(I=S).append("cacheControl",R.cacheControl):(I=S,O["cache-control"]="max-age=".concat(R.cacheControl),O["content-type"]=R.contentType),U.n=2,put(this.fetch,M.toString(),I,{headers:O});case 2:return D=U.v,U.a(2,{data:{path:E,fullPath:D.Key},error:null});case 3:if(U.p=3,L=U.v,!this.shouldThrowOnError){U.n=4;break}throw L;case 4:if(!isStorageError(L)){U.n=5;break}return U.a(2,{data:null,error:L});case 5:throw L;case 6:return U.a(2)}},_callee63,this,[[1,3]])}))}},{key:"createSignedUploadUrl",value:function(e,_){return __awaiter(this,void 0,void 0,_regenerator().m(function _callee64(){var S,k,E,T,M,I;return _regenerator().w(function(R){for(;;)switch(R.p=R.n){case 0:return R.p=0,S=this._getFinalPath(e),k=Object.assign({},this.headers),(null==_?void 0:_.upsert)&&(k["x-upsert"]="true"),R.n=1,post$1(this.fetch,"".concat(this.url,"/object/upload/sign/").concat(S),{},{headers:k});case 1:if(E=R.v,T=new URL(this.url+E.url),M=T.searchParams.get("token")){R.n=2;break}throw new ks("No token returned by API");case 2:return R.a(2,{data:{signedUrl:T.toString(),path:e,token:M},error:null});case 3:if(R.p=3,I=R.v,!this.shouldThrowOnError){R.n=4;break}throw I;case 4:if(!isStorageError(I)){R.n=5;break}return R.a(2,{data:null,error:I});case 5:throw I;case 6:return R.a(2)}},_callee64,this,[[0,3]])}))}},{key:"update",value:function(e,_,S){return __awaiter(this,void 0,void 0,_regenerator().m(function _callee65(){return _regenerator().w(function(k){for(;;)if(0===k.n)return k.a(2,this.uploadOrUpdate("PUT",e,_,S))},_callee65,this)}))}},{key:"move",value:function(e,_,S){return __awaiter(this,void 0,void 0,_regenerator().m(function _callee66(){var k,E;return _regenerator().w(function(T){for(;;)switch(T.p=T.n){case 0:return T.p=0,T.n=1,post$1(this.fetch,"".concat(this.url,"/object/move"),{bucketId:this.bucketId,sourceKey:e,destinationKey:_,destinationBucket:null==S?void 0:S.destinationBucket},{headers:this.headers});case 1:return k=T.v,T.a(2,{data:k,error:null});case 2:if(T.p=2,E=T.v,!this.shouldThrowOnError){T.n=3;break}throw E;case 3:if(!isStorageError(E)){T.n=4;break}return T.a(2,{data:null,error:E});case 4:throw E;case 5:return T.a(2)}},_callee66,this,[[0,2]])}))}},{key:"copy",value:function(e,_,S){return __awaiter(this,void 0,void 0,_regenerator().m(function _callee67(){var k,E;return _regenerator().w(function(T){for(;;)switch(T.p=T.n){case 0:return T.p=0,T.n=1,post$1(this.fetch,"".concat(this.url,"/object/copy"),{bucketId:this.bucketId,sourceKey:e,destinationKey:_,destinationBucket:null==S?void 0:S.destinationBucket},{headers:this.headers});case 1:return k=T.v,T.a(2,{data:{path:k.Key},error:null});case 2:if(T.p=2,E=T.v,!this.shouldThrowOnError){T.n=3;break}throw E;case 3:if(!isStorageError(E)){T.n=4;break}return T.a(2,{data:null,error:E});case 4:throw E;case 5:return T.a(2)}},_callee67,this,[[0,2]])}))}},{key:"createSignedUrl",value:function(e,_,S){return __awaiter(this,void 0,void 0,_regenerator().m(function _callee68(){var k,E,T,M,I;return _regenerator().w(function(R){for(;;)switch(R.p=R.n){case 0:return R.p=0,k=this._getFinalPath(e),R.n=1,post$1(this.fetch,"".concat(this.url,"/object/sign/").concat(k),Object.assign({expiresIn:_},(null==S?void 0:S.transform)?{transform:S.transform}:{}),{headers:this.headers});case 1:return E=R.v,T=(null==S?void 0:S.download)?"&download=".concat(!0===S.download?"":S.download):"",M=encodeURI("".concat(this.url).concat(E.signedURL).concat(T)),E={signedUrl:M},R.a(2,{data:E,error:null});case 2:if(R.p=2,I=R.v,!this.shouldThrowOnError){R.n=3;break}throw I;case 3:if(!isStorageError(I)){R.n=4;break}return R.a(2,{data:null,error:I});case 4:throw I;case 5:return R.a(2)}},_callee68,this,[[0,2]])}))}},{key:"createSignedUrls",value:function(e,_,S){return __awaiter(this,void 0,void 0,_regenerator().m(function _callee69(){var k,E,T,M=this;return _regenerator().w(function(I){for(;;)switch(I.p=I.n){case 0:return I.p=0,I.n=1,post$1(this.fetch,"".concat(this.url,"/object/sign/").concat(this.bucketId),{expiresIn:_,paths:e},{headers:this.headers});case 1:return k=I.v,E=(null==S?void 0:S.download)?"&download=".concat(!0===S.download?"":S.download):"",I.a(2,{data:k.map(function(e){return Object.assign(Object.assign({},e),{signedUrl:e.signedURL?encodeURI("".concat(M.url).concat(e.signedURL).concat(E)):null})}),error:null});case 2:if(I.p=2,T=I.v,!this.shouldThrowOnError){I.n=3;break}throw T;case 3:if(!isStorageError(T)){I.n=4;break}return I.a(2,{data:null,error:T});case 4:throw T;case 5:return I.a(2)}},_callee69,this,[[0,2]])}))}},{key:"download",value:function(e,_){var S=this,k=void 0!==(null==_?void 0:_.transform)?"render/image/authenticated":"object",E=this.transformOptsToQueryString((null==_?void 0:_.transform)||{}),T=E?"?".concat(E):"",M=this._getFinalPath(e);return new Ms(function(){return get(S.fetch,"".concat(S.url,"/").concat(k,"/").concat(M).concat(T),{headers:S.headers,noResolveJson:!0})},this.shouldThrowOnError)}},{key:"info",value:function(e){return __awaiter(this,void 0,void 0,_regenerator().m(function _callee70(){var _,S,k;return _regenerator().w(function(E){for(;;)switch(E.p=E.n){case 0:return _=this._getFinalPath(e),E.p=1,E.n=2,get(this.fetch,"".concat(this.url,"/object/info/").concat(_),{headers:this.headers});case 2:return S=E.v,E.a(2,{data:_recursiveToCamel(S),error:null});case 3:if(E.p=3,k=E.v,!this.shouldThrowOnError){E.n=4;break}throw k;case 4:if(!isStorageError(k)){E.n=5;break}return E.a(2,{data:null,error:k});case 5:throw k;case 6:return E.a(2)}},_callee70,this,[[1,3]])}))}},{key:"exists",value:function(e){return __awaiter(this,void 0,void 0,_regenerator().m(function _callee71(){var _,S,k;return _regenerator().w(function(E){for(;;)switch(E.p=E.n){case 0:return _=this._getFinalPath(e),E.p=1,E.n=2,head(this.fetch,"".concat(this.url,"/object/").concat(_),{headers:this.headers});case 2:return E.a(2,{data:!0,error:null});case 3:if(E.p=3,k=E.v,!this.shouldThrowOnError){E.n=4;break}throw k;case 4:if(!(isStorageError(k)&&k instanceof As)){E.n=5;break}if(S=k.originalError,![400,404].includes(null==S?void 0:S.status)){E.n=5;break}return E.a(2,{data:!1,error:k});case 5:throw k;case 6:return E.a(2)}},_callee71,this,[[1,3]])}))}},{key:"getPublicUrl",value:function(e,_){var S=this._getFinalPath(e),k=[],E=(null==_?void 0:_.download)?"download=".concat(!0===_.download?"":_.download):"";""!==E&&k.push(E);var T=void 0!==(null==_?void 0:_.transform)?"render/image":"object",M=this.transformOptsToQueryString((null==_?void 0:_.transform)||{});""!==M&&k.push(M);var I=k.join("&");return""!==I&&(I="?".concat(I)),{data:{publicUrl:encodeURI("".concat(this.url,"/").concat(T,"/public/").concat(S).concat(I))}}}},{key:"remove",value:function(e){return __awaiter(this,void 0,void 0,_regenerator().m(function _callee72(){var _,S;return _regenerator().w(function(k){for(;;)switch(k.p=k.n){case 0:return k.p=0,k.n=1,_remove2(this.fetch,"".concat(this.url,"/object/").concat(this.bucketId),{prefixes:e},{headers:this.headers});case 1:return _=k.v,k.a(2,{data:_,error:null});case 2:if(k.p=2,S=k.v,!this.shouldThrowOnError){k.n=3;break}throw S;case 3:if(!isStorageError(S)){k.n=4;break}return k.a(2,{data:null,error:S});case 4:throw S;case 5:return k.a(2)}},_callee72,this,[[0,2]])}))}},{key:"list",value:function(e,_,S){return __awaiter(this,void 0,void 0,_regenerator().m(function _callee73(){var k,E,T;return _regenerator().w(function(M){for(;;)switch(M.p=M.n){case 0:return M.p=0,k=Object.assign(Object.assign(Object.assign({},Is),_),{prefix:e||""}),M.n=1,post$1(this.fetch,"".concat(this.url,"/object/list/").concat(this.bucketId),k,{headers:this.headers},S);case 1:return E=M.v,M.a(2,{data:E,error:null});case 2:if(M.p=2,T=M.v,!this.shouldThrowOnError){M.n=3;break}throw T;case 3:if(!isStorageError(T)){M.n=4;break}return M.a(2,{data:null,error:T});case 4:throw T;case 5:return M.a(2)}},_callee73,this,[[0,2]])}))}},{key:"listV2",value:function(e,_){return __awaiter(this,void 0,void 0,_regenerator().m(function _callee74(){var S,k,E;return _regenerator().w(function(T){for(;;)switch(T.p=T.n){case 0:return T.p=0,S=Object.assign({},e),T.n=1,post$1(this.fetch,"".concat(this.url,"/object/list-v2/").concat(this.bucketId),S,{headers:this.headers},_);case 1:return k=T.v,T.a(2,{data:k,error:null});case 2:if(T.p=2,E=T.v,!this.shouldThrowOnError){T.n=3;break}throw E;case 3:if(!isStorageError(E)){T.n=4;break}return T.a(2,{data:null,error:E});case 4:throw E;case 5:return T.a(2)}},_callee74,this,[[0,2]])}))}},{key:"encodeMetadata",value:function(e){return JSON.stringify(e)}},{key:"toBase64",value:function(e){return"undefined"!=typeof Buffer?Buffer.from(e).toString("base64"):btoa(e)}},{key:"_getFinalPath",value:function(e){return"".concat(this.bucketId,"/").concat(e.replace(/^\/+/,""))}},{key:"_removeEmptyFolders",value:function(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}},{key:"transformOptsToQueryString",value:function(e){var _=[];return e.width&&_.push("width=".concat(e.width)),e.height&&_.push("height=".concat(e.height)),e.resize&&_.push("resize=".concat(e.resize)),e.format&&_.push("format=".concat(e.format)),e.quality&&_.push("quality=".concat(e.quality)),_.join("&")}}])}(),Os="2.78.0",Ds={"X-Client-Info":"storage-js/".concat(Os)},Ls=function(){return _createClass3(function StorageBucketApi(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},S=arguments.length>2?arguments[2]:void 0,k=arguments.length>3?arguments[3]:void 0;_classCallCheck3(this,StorageBucketApi),this.shouldThrowOnError=!1;var E=new URL(e);(null==k?void 0:k.useNewHostname)&&/supabase\.(co|in|red)$/.test(E.hostname)&&!E.hostname.includes("storage.supabase.")&&(E.hostname=E.hostname.replace("supabase.","storage.supabase.")),this.url=E.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Ds),_),this.fetch=resolveFetch$3(S)},[{key:"throwOnError",value:function(){return this.shouldThrowOnError=!0,this}},{key:"listBuckets",value:function(e){return __awaiter(this,void 0,void 0,_regenerator().m(function _callee75(){var _,S,k;return _regenerator().w(function(E){for(;;)switch(E.p=E.n){case 0:return E.p=0,_=this.listBucketOptionsToQueryString(e),E.n=1,get(this.fetch,"".concat(this.url,"/bucket").concat(_),{headers:this.headers});case 1:return S=E.v,E.a(2,{data:S,error:null});case 2:if(E.p=2,k=E.v,!this.shouldThrowOnError){E.n=3;break}throw k;case 3:if(!isStorageError(k)){E.n=4;break}return E.a(2,{data:null,error:k});case 4:throw k;case 5:return E.a(2)}},_callee75,this,[[0,2]])}))}},{key:"getBucket",value:function(e){return __awaiter(this,void 0,void 0,_regenerator().m(function _callee76(){var _,S;return _regenerator().w(function(k){for(;;)switch(k.p=k.n){case 0:return k.p=0,k.n=1,get(this.fetch,"".concat(this.url,"/bucket/").concat(e),{headers:this.headers});case 1:return _=k.v,k.a(2,{data:_,error:null});case 2:if(k.p=2,S=k.v,!this.shouldThrowOnError){k.n=3;break}throw S;case 3:if(!isStorageError(S)){k.n=4;break}return k.a(2,{data:null,error:S});case 4:throw S;case 5:return k.a(2)}},_callee76,this,[[0,2]])}))}},{key:"createBucket",value:function(e){return __awaiter(this,arguments,void 0,function(e){var _=this,S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{public:!1};return _regenerator().m(function _callee77(){var k,E;return _regenerator().w(function(T){for(;;)switch(T.p=T.n){case 0:return T.p=0,T.n=1,post$1(_.fetch,"".concat(_.url,"/bucket"),{id:e,name:e,type:S.type,public:S.public,file_size_limit:S.fileSizeLimit,allowed_mime_types:S.allowedMimeTypes},{headers:_.headers});case 1:return k=T.v,T.a(2,{data:k,error:null});case 2:if(T.p=2,E=T.v,!_.shouldThrowOnError){T.n=3;break}throw E;case 3:if(!isStorageError(E)){T.n=4;break}return T.a(2,{data:null,error:E});case 4:throw E;case 5:return T.a(2)}},_callee77,null,[[0,2]])})()})}},{key:"updateBucket",value:function(e,_){return __awaiter(this,void 0,void 0,_regenerator().m(function _callee78(){var S,k;return _regenerator().w(function(E){for(;;)switch(E.p=E.n){case 0:return E.p=0,E.n=1,put(this.fetch,"".concat(this.url,"/bucket/").concat(e),{id:e,name:e,public:_.public,file_size_limit:_.fileSizeLimit,allowed_mime_types:_.allowedMimeTypes},{headers:this.headers});case 1:return S=E.v,E.a(2,{data:S,error:null});case 2:if(E.p=2,k=E.v,!this.shouldThrowOnError){E.n=3;break}throw k;case 3:if(!isStorageError(k)){E.n=4;break}return E.a(2,{data:null,error:k});case 4:throw k;case 5:return E.a(2)}},_callee78,this,[[0,2]])}))}},{key:"emptyBucket",value:function(e){return __awaiter(this,void 0,void 0,_regenerator().m(function _callee79(){var _,S;return _regenerator().w(function(k){for(;;)switch(k.p=k.n){case 0:return k.p=0,k.n=1,post$1(this.fetch,"".concat(this.url,"/bucket/").concat(e,"/empty"),{},{headers:this.headers});case 1:return _=k.v,k.a(2,{data:_,error:null});case 2:if(k.p=2,S=k.v,!this.shouldThrowOnError){k.n=3;break}throw S;case 3:if(!isStorageError(S)){k.n=4;break}return k.a(2,{data:null,error:S});case 4:throw S;case 5:return k.a(2)}},_callee79,this,[[0,2]])}))}},{key:"deleteBucket",value:function(e){return __awaiter(this,void 0,void 0,_regenerator().m(function _callee80(){var _,S;return _regenerator().w(function(k){for(;;)switch(k.p=k.n){case 0:return k.p=0,k.n=1,_remove2(this.fetch,"".concat(this.url,"/bucket/").concat(e),{},{headers:this.headers});case 1:return _=k.v,k.a(2,{data:_,error:null});case 2:if(k.p=2,S=k.v,!this.shouldThrowOnError){k.n=3;break}throw S;case 3:if(!isStorageError(S)){k.n=4;break}return k.a(2,{data:null,error:S});case 4:throw S;case 5:return k.a(2)}},_callee80,this,[[0,2]])}))}},{key:"listBucketOptionsToQueryString",value:function(e){var _={};return e&&("limit"in e&&(_.limit=String(e.limit)),"offset"in e&&(_.offset=String(e.offset)),e.search&&(_.search=e.search),e.sortColumn&&(_.sortColumn=e.sortColumn),e.sortOrder&&(_.sortOrder=e.sortOrder)),Object.keys(_).length>0?"?"+new URLSearchParams(_).toString():""}}])}(),Fs=function(){return _createClass3(function StorageAnalyticsApi(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},S=arguments.length>2?arguments[2]:void 0;_classCallCheck3(this,StorageAnalyticsApi),this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Ds),_),this.fetch=resolveFetch$3(S)},[{key:"throwOnError",value:function(){return this.shouldThrowOnError=!0,this}},{key:"createBucket",value:function(e){return __awaiter(this,void 0,void 0,_regenerator().m(function _callee81(){var _,S;return _regenerator().w(function(k){for(;;)switch(k.p=k.n){case 0:return k.p=0,k.n=1,post$1(this.fetch,"".concat(this.url,"/bucket"),{name:e},{headers:this.headers});case 1:return _=k.v,k.a(2,{data:_,error:null});case 2:if(k.p=2,S=k.v,!this.shouldThrowOnError){k.n=3;break}throw S;case 3:if(!isStorageError(S)){k.n=4;break}return k.a(2,{data:null,error:S});case 4:throw S;case 5:return k.a(2)}},_callee81,this,[[0,2]])}))}},{key:"listBuckets",value:function(e){return __awaiter(this,void 0,void 0,_regenerator().m(function _callee82(){var _,S,k,E,T;return _regenerator().w(function(M){for(;;)switch(M.p=M.n){case 0:return M.p=0,_=new URLSearchParams,void 0!==(null==e?void 0:e.limit)&&_.set("limit",e.limit.toString()),void 0!==(null==e?void 0:e.offset)&&_.set("offset",e.offset.toString()),(null==e?void 0:e.sortColumn)&&_.set("sortColumn",e.sortColumn),(null==e?void 0:e.sortOrder)&&_.set("sortOrder",e.sortOrder),(null==e?void 0:e.search)&&_.set("search",e.search),S=_.toString(),k=S?"".concat(this.url,"/bucket?").concat(S):"".concat(this.url,"/bucket"),M.n=1,get(this.fetch,k,{headers:this.headers});case 1:return E=M.v,M.a(2,{data:E,error:null});case 2:if(M.p=2,T=M.v,!this.shouldThrowOnError){M.n=3;break}throw T;case 3:if(!isStorageError(T)){M.n=4;break}return M.a(2,{data:null,error:T});case 4:throw T;case 5:return M.a(2)}},_callee82,this,[[0,2]])}))}},{key:"deleteBucket",value:function(e){return __awaiter(this,void 0,void 0,_regenerator().m(function _callee83(){var _,S;return _regenerator().w(function(k){for(;;)switch(k.p=k.n){case 0:return k.p=0,k.n=1,_remove2(this.fetch,"".concat(this.url,"/bucket/").concat(e),{},{headers:this.headers});case 1:return _=k.v,k.a(2,{data:_,error:null});case 2:if(k.p=2,S=k.v,!this.shouldThrowOnError){k.n=3;break}throw S;case 3:if(!isStorageError(S)){k.n=4;break}return k.a(2,{data:null,error:S});case 4:throw S;case 5:return k.a(2)}},_callee83,this,[[0,2]])}))}}])}(),Us={"X-Client-Info":"storage-js/".concat(Os),"Content-Type":"application/json"},Bs=function(e){function StorageVectorsError(e){var _;return _classCallCheck3(this,StorageVectorsError),(_=_callSuper(this,StorageVectorsError,[e])).__isStorageVectorsError=!0,_.name="StorageVectorsError",_}return _inherits(StorageVectorsError,e),_createClass3(StorageVectorsError)}(_wrapNativeSuper(Error));function isStorageVectorsError(e){return"object"===_typeof3(e)&&null!==e&&"__isStorageVectorsError"in e}var Ns,zs=function(e){function StorageVectorsApiError(e,_,S){var k;return _classCallCheck3(this,StorageVectorsApiError),(k=_callSuper(this,StorageVectorsApiError,[e])).name="StorageVectorsApiError",k.status=_,k.statusCode=S,k}return _inherits(StorageVectorsApiError,e),_createClass3(StorageVectorsApiError,[{key:"toJSON",value:function(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}])}(Bs),Gs=function(e){function StorageVectorsUnknownError(e,_){var S;return _classCallCheck3(this,StorageVectorsUnknownError),(S=_callSuper(this,StorageVectorsUnknownError,[e])).name="StorageVectorsUnknownError",S.originalError=_,S}return _inherits(StorageVectorsUnknownError,e),_createClass3(StorageVectorsUnknownError)}(Bs);!function(e){e.InternalError="InternalError",e.S3VectorConflictException="S3VectorConflictException",e.S3VectorNotFoundException="S3VectorNotFoundException",e.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",e.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",e.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"}(Ns||(Ns={}));var resolveFetch$2=function(e){var _;return _=e||("undefined"==typeof fetch?function(){for(var e=arguments.length,_=new Array(e),S=0;S<e;S++)_[S]=arguments[S];return G(_asyncToGenerator(_regenerator().m(function _callee84(){var e,_;return _regenerator().w(function(S){for(;;)switch(S.n){case 0:return S.n=1,Promise.resolve().then(function(){return Yo});case 1:return e=S.v,_=e.default,S.a(2,{default:_})}},_callee84)})),void 0).then(function(e){return e.default.apply(void 0,_)})}:fetch),function(){return _.apply(void 0,arguments)}},_getErrorMessage$1=function(e){return e.msg||e.message||e.error_description||e.error||JSON.stringify(e)},handleError$1=function(e,_,S){return __awaiter(void 0,void 0,void 0,_regenerator().m(function _callee85(){var k,E,T,M;return _regenerator().w(function(I){for(;;)switch(I.n){case 0:e&&"object"===_typeof3(e)&&"status"in e&&"ok"in e&&"number"==typeof e.status&&!(null==S?void 0:S.noResolveJson)?(k=e.status||500,"function"==typeof(E=e).json?E.json().then(function(e){var S=(null==e?void 0:e.statusCode)||(null==e?void 0:e.code)||k+"";_(new zs(_getErrorMessage$1(e),k,S))}).catch(function(){var e=k+"",S=E.statusText||"HTTP ".concat(k," error");_(new zs(S,k,e))}):(T=k+"",M=E.statusText||"HTTP ".concat(k," error"),_(new zs(M,k,T)))):_(new Gs(_getErrorMessage$1(e),e));case 1:return I.a(2)}},_callee85)}))},_getRequestParams$1=function(e,_,S,k){var E={method:e,headers:(null==_?void 0:_.headers)||{}};return k?(!function(e){if("object"!==_typeof3(e)||null===e)return!1;var _=Object.getPrototypeOf(e);return!(null!==_&&_!==Object.prototype&&null!==Object.getPrototypeOf(_)||Symbol.toStringTag in e||Symbol.iterator in e)}(k)?E.body=k:(E.headers=Object.assign({"Content-Type":"application/json"},null==_?void 0:_.headers),E.body=JSON.stringify(k)),Object.assign(Object.assign({},E),S)):E};function _handleRequest$1(e,_,S,k,E,T){return __awaiter(this,void 0,void 0,_regenerator().m(function _callee86(){return _regenerator().w(function(M){for(;;)if(0===M.n)return M.a(2,new Promise(function(M,I){e(S,_getRequestParams$1(_,k,E,T)).then(function(e){if(!e.ok)throw e;if(null==k?void 0:k.noResolveJson)return e;var _=e.headers.get("content-type");return _&&_.includes("application/json")?e.json():{}}).then(function(e){return M(e)}).catch(function(e){return handleError$1(e,I,k)})}))},_callee86)}))}function post(e,_,S,k,E){return __awaiter(this,void 0,void 0,_regenerator().m(function _callee87(){return _regenerator().w(function(T){for(;;)if(0===T.n)return T.a(2,_handleRequest$1(e,"POST",_,k,E,S))},_callee87)}))}var js=function(){return _createClass3(function VectorIndexApi(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},S=arguments.length>2?arguments[2]:void 0;_classCallCheck3(this,VectorIndexApi),this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Us),_),this.fetch=resolveFetch$2(S)},[{key:"throwOnError",value:function(){return this.shouldThrowOnError=!0,this}},{key:"createIndex",value:function(e){return __awaiter(this,void 0,void 0,_regenerator().m(function _callee88(){var _,S;return _regenerator().w(function(k){for(;;)switch(k.p=k.n){case 0:return k.p=0,k.n=1,post(this.fetch,"".concat(this.url,"/CreateIndex"),e,{headers:this.headers});case 1:return _=k.v,k.a(2,{data:_||{},error:null});case 2:if(k.p=2,S=k.v,!this.shouldThrowOnError){k.n=3;break}throw S;case 3:if(!isStorageVectorsError(S)){k.n=4;break}return k.a(2,{data:null,error:S});case 4:throw S;case 5:return k.a(2)}},_callee88,this,[[0,2]])}))}},{key:"getIndex",value:function(e,_){return __awaiter(this,void 0,void 0,_regenerator().m(function _callee89(){var S,k;return _regenerator().w(function(E){for(;;)switch(E.p=E.n){case 0:return E.p=0,E.n=1,post(this.fetch,"".concat(this.url,"/GetIndex"),{vectorBucketName:e,indexName:_},{headers:this.headers});case 1:return S=E.v,E.a(2,{data:S,error:null});case 2:if(E.p=2,k=E.v,!this.shouldThrowOnError){E.n=3;break}throw k;case 3:if(!isStorageVectorsError(k)){E.n=4;break}return E.a(2,{data:null,error:k});case 4:throw k;case 5:return E.a(2)}},_callee89,this,[[0,2]])}))}},{key:"listIndexes",value:function(e){return __awaiter(this,void 0,void 0,_regenerator().m(function _callee90(){var _,S;return _regenerator().w(function(k){for(;;)switch(k.p=k.n){case 0:return k.p=0,k.n=1,post(this.fetch,"".concat(this.url,"/ListIndexes"),e,{headers:this.headers});case 1:return _=k.v,k.a(2,{data:_,error:null});case 2:if(k.p=2,S=k.v,!this.shouldThrowOnError){k.n=3;break}throw S;case 3:if(!isStorageVectorsError(S)){k.n=4;break}return k.a(2,{data:null,error:S});case 4:throw S;case 5:return k.a(2)}},_callee90,this,[[0,2]])}))}},{key:"deleteIndex",value:function(e,_){return __awaiter(this,void 0,void 0,_regenerator().m(function _callee91(){var S,k;return _regenerator().w(function(E){for(;;)switch(E.p=E.n){case 0:return E.p=0,E.n=1,post(this.fetch,"".concat(this.url,"/DeleteIndex"),{vectorBucketName:e,indexName:_},{headers:this.headers});case 1:return S=E.v,E.a(2,{data:S||{},error:null});case 2:if(E.p=2,k=E.v,!this.shouldThrowOnError){E.n=3;break}throw k;case 3:if(!isStorageVectorsError(k)){E.n=4;break}return E.a(2,{data:null,error:k});case 4:throw k;case 5:return E.a(2)}},_callee91,this,[[0,2]])}))}}])}(),Vs=function(){return _createClass3(function VectorDataApi(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},S=arguments.length>2?arguments[2]:void 0;_classCallCheck3(this,VectorDataApi),this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Us),_),this.fetch=resolveFetch$2(S)},[{key:"throwOnError",value:function(){return this.shouldThrowOnError=!0,this}},{key:"putVectors",value:function(e){return __awaiter(this,void 0,void 0,_regenerator().m(function _callee92(){var _,S;return _regenerator().w(function(k){for(;;)switch(k.p=k.n){case 0:if(k.p=0,!(e.vectors.length<1||e.vectors.length>500)){k.n=1;break}throw new Error("Vector batch size must be between 1 and 500 items");case 1:return k.n=2,post(this.fetch,"".concat(this.url,"/PutVectors"),e,{headers:this.headers});case 2:return _=k.v,k.a(2,{data:_||{},error:null});case 3:if(k.p=3,S=k.v,!this.shouldThrowOnError){k.n=4;break}throw S;case 4:if(!isStorageVectorsError(S)){k.n=5;break}return k.a(2,{data:null,error:S});case 5:throw S;case 6:return k.a(2)}},_callee92,this,[[0,3]])}))}},{key:"getVectors",value:function(e){return __awaiter(this,void 0,void 0,_regenerator().m(function _callee93(){var _,S;return _regenerator().w(function(k){for(;;)switch(k.p=k.n){case 0:return k.p=0,k.n=1,post(this.fetch,"".concat(this.url,"/GetVectors"),e,{headers:this.headers});case 1:return _=k.v,k.a(2,{data:_,error:null});case 2:if(k.p=2,S=k.v,!this.shouldThrowOnError){k.n=3;break}throw S;case 3:if(!isStorageVectorsError(S)){k.n=4;break}return k.a(2,{data:null,error:S});case 4:throw S;case 5:return k.a(2)}},_callee93,this,[[0,2]])}))}},{key:"listVectors",value:function(e){return __awaiter(this,void 0,void 0,_regenerator().m(function _callee94(){var _,S;return _regenerator().w(function(k){for(;;)switch(k.p=k.n){case 0:if(k.p=0,void 0===e.segmentCount){k.n=2;break}if(!(e.segmentCount<1||e.segmentCount>16)){k.n=1;break}throw new Error("segmentCount must be between 1 and 16");case 1:if(void 0===e.segmentIndex){k.n=2;break}if(!(e.segmentIndex<0||e.segmentIndex>=e.segmentCount)){k.n=2;break}throw new Error("segmentIndex must be between 0 and ".concat(e.segmentCount-1));case 2:return k.n=3,post(this.fetch,"".concat(this.url,"/ListVectors"),e,{headers:this.headers});case 3:return _=k.v,k.a(2,{data:_,error:null});case 4:if(k.p=4,S=k.v,!this.shouldThrowOnError){k.n=5;break}throw S;case 5:if(!isStorageVectorsError(S)){k.n=6;break}return k.a(2,{data:null,error:S});case 6:throw S;case 7:return k.a(2)}},_callee94,this,[[0,4]])}))}},{key:"queryVectors",value:function(e){return __awaiter(this,void 0,void 0,_regenerator().m(function _callee95(){var _,S;return _regenerator().w(function(k){for(;;)switch(k.p=k.n){case 0:return k.p=0,k.n=1,post(this.fetch,"".concat(this.url,"/QueryVectors"),e,{headers:this.headers});case 1:return _=k.v,k.a(2,{data:_,error:null});case 2:if(k.p=2,S=k.v,!this.shouldThrowOnError){k.n=3;break}throw S;case 3:if(!isStorageVectorsError(S)){k.n=4;break}return k.a(2,{data:null,error:S});case 4:throw S;case 5:return k.a(2)}},_callee95,this,[[0,2]])}))}},{key:"deleteVectors",value:function(e){return __awaiter(this,void 0,void 0,_regenerator().m(function _callee96(){var _,S;return _regenerator().w(function(k){for(;;)switch(k.p=k.n){case 0:if(k.p=0,!(e.keys.length<1||e.keys.length>500)){k.n=1;break}throw new Error("Keys batch size must be between 1 and 500 items");case 1:return k.n=2,post(this.fetch,"".concat(this.url,"/DeleteVectors"),e,{headers:this.headers});case 2:return _=k.v,k.a(2,{data:_||{},error:null});case 3:if(k.p=3,S=k.v,!this.shouldThrowOnError){k.n=4;break}throw S;case 4:if(!isStorageVectorsError(S)){k.n=5;break}return k.a(2,{data:null,error:S});case 5:throw S;case 6:return k.a(2)}},_callee96,this,[[0,3]])}))}}])}(),Hs=function(){return _createClass3(function VectorBucketApi(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},S=arguments.length>2?arguments[2]:void 0;_classCallCheck3(this,VectorBucketApi),this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Us),_),this.fetch=resolveFetch$2(S)},[{key:"throwOnError",value:function(){return this.shouldThrowOnError=!0,this}},{key:"createBucket",value:function(e){return __awaiter(this,void 0,void 0,_regenerator().m(function _callee97(){var _,S;return _regenerator().w(function(k){for(;;)switch(k.p=k.n){case 0:return k.p=0,k.n=1,post(this.fetch,"".concat(this.url,"/CreateVectorBucket"),{vectorBucketName:e},{headers:this.headers});case 1:return _=k.v,k.a(2,{data:_||{},error:null});case 2:if(k.p=2,S=k.v,!this.shouldThrowOnError){k.n=3;break}throw S;case 3:if(!isStorageVectorsError(S)){k.n=4;break}return k.a(2,{data:null,error:S});case 4:throw S;case 5:return k.a(2)}},_callee97,this,[[0,2]])}))}},{key:"getBucket",value:function(e){return __awaiter(this,void 0,void 0,_regenerator().m(function _callee98(){var _,S;return _regenerator().w(function(k){for(;;)switch(k.p=k.n){case 0:return k.p=0,k.n=1,post(this.fetch,"".concat(this.url,"/GetVectorBucket"),{vectorBucketName:e},{headers:this.headers});case 1:return _=k.v,k.a(2,{data:_,error:null});case 2:if(k.p=2,S=k.v,!this.shouldThrowOnError){k.n=3;break}throw S;case 3:if(!isStorageVectorsError(S)){k.n=4;break}return k.a(2,{data:null,error:S});case 4:throw S;case 5:return k.a(2)}},_callee98,this,[[0,2]])}))}},{key:"listBuckets",value:function(){return __awaiter(this,arguments,void 0,function(){var e=this,_=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _regenerator().m(function _callee99(){var S,k;return _regenerator().w(function(E){for(;;)switch(E.p=E.n){case 0:return E.p=0,E.n=1,post(e.fetch,"".concat(e.url,"/ListVectorBuckets"),_,{headers:e.headers});case 1:return S=E.v,E.a(2,{data:S,error:null});case 2:if(E.p=2,k=E.v,!e.shouldThrowOnError){E.n=3;break}throw k;case 3:if(!isStorageVectorsError(k)){E.n=4;break}return E.a(2,{data:null,error:k});case 4:throw k;case 5:return E.a(2)}},_callee99,null,[[0,2]])})()})}},{key:"deleteBucket",value:function(e){return __awaiter(this,void 0,void 0,_regenerator().m(function _callee100(){var _,S;return _regenerator().w(function(k){for(;;)switch(k.p=k.n){case 0:return k.p=0,k.n=1,post(this.fetch,"".concat(this.url,"/DeleteVectorBucket"),{vectorBucketName:e},{headers:this.headers});case 1:return _=k.v,k.a(2,{data:_||{},error:null});case 2:if(k.p=2,S=k.v,!this.shouldThrowOnError){k.n=3;break}throw S;case 3:if(!isStorageVectorsError(S)){k.n=4;break}return k.a(2,{data:null,error:S});case 4:throw S;case 5:return k.a(2)}},_callee100,this,[[0,2]])}))}}])}(),Ws=function(e){function StorageVectorsClient(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return _classCallCheck3(this,StorageVectorsClient),_callSuper(this,StorageVectorsClient,[e,_.headers||{},_.fetch])}return _inherits(StorageVectorsClient,e),_createClass3(StorageVectorsClient,[{key:"from",value:function(e){return new qs(this.url,this.headers,e,this.fetch)}}])}(Hs),qs=function(e){function VectorBucketScope(e,_,S,k){var E;return _classCallCheck3(this,VectorBucketScope),(E=_callSuper(this,VectorBucketScope,[e,_,k])).vectorBucketName=S,E}return _inherits(VectorBucketScope,e),_createClass3(VectorBucketScope,[{key:"createIndex",value:function(e){var _=this,S=Object.create(null,{createIndex:{get:function(){return _superPropGet(VectorBucketScope,"createIndex",_,1)}}});return __awaiter(this,void 0,void 0,_regenerator().m(function _callee101(){return _regenerator().w(function(_){for(;;)if(0===_.n)return _.a(2,S.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName})))},_callee101,this)}))}},{key:"listIndexes",value:function(){var e=this,_=Object.create(null,{listIndexes:{get:function(){return _superPropGet(VectorBucketScope,"listIndexes",e,1)}}});return __awaiter(this,arguments,void 0,function(){var e=this,S=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _regenerator().m(function _callee102(){return _regenerator().w(function(k){for(;;)if(0===k.n)return k.a(2,_.listIndexes.call(e,Object.assign(Object.assign({},S),{vectorBucketName:e.vectorBucketName})))},_callee102)})()})}},{key:"getIndex",value:function(e){var _=this,S=Object.create(null,{getIndex:{get:function(){return _superPropGet(VectorBucketScope,"getIndex",_,1)}}});return __awaiter(this,void 0,void 0,_regenerator().m(function _callee103(){return _regenerator().w(function(_){for(;;)if(0===_.n)return _.a(2,S.getIndex.call(this,this.vectorBucketName,e))},_callee103,this)}))}},{key:"deleteIndex",value:function(e){var _=this,S=Object.create(null,{deleteIndex:{get:function(){return _superPropGet(VectorBucketScope,"deleteIndex",_,1)}}});return __awaiter(this,void 0,void 0,_regenerator().m(function _callee104(){return _regenerator().w(function(_){for(;;)if(0===_.n)return _.a(2,S.deleteIndex.call(this,this.vectorBucketName,e))},_callee104,this)}))}},{key:"index",value:function(e){return new Xs(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}])}(js),Xs=function(e){function VectorIndexScope(e,_,S,k,E){var T;return _classCallCheck3(this,VectorIndexScope),(T=_callSuper(this,VectorIndexScope,[e,_,E])).vectorBucketName=S,T.indexName=k,T}return _inherits(VectorIndexScope,e),_createClass3(VectorIndexScope,[{key:"putVectors",value:function(e){var _=this,S=Object.create(null,{putVectors:{get:function(){return _superPropGet(VectorIndexScope,"putVectors",_,1)}}});return __awaiter(this,void 0,void 0,_regenerator().m(function _callee105(){return _regenerator().w(function(_){for(;;)if(0===_.n)return _.a(2,S.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName})))},_callee105,this)}))}},{key:"getVectors",value:function(e){var _=this,S=Object.create(null,{getVectors:{get:function(){return _superPropGet(VectorIndexScope,"getVectors",_,1)}}});return __awaiter(this,void 0,void 0,_regenerator().m(function _callee106(){return _regenerator().w(function(_){for(;;)if(0===_.n)return _.a(2,S.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName})))},_callee106,this)}))}},{key:"listVectors",value:function(){var e=this,_=Object.create(null,{listVectors:{get:function(){return _superPropGet(VectorIndexScope,"listVectors",e,1)}}});return __awaiter(this,arguments,void 0,function(){var e=this,S=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _regenerator().m(function _callee107(){return _regenerator().w(function(k){for(;;)if(0===k.n)return k.a(2,_.listVectors.call(e,Object.assign(Object.assign({},S),{vectorBucketName:e.vectorBucketName,indexName:e.indexName})))},_callee107)})()})}},{key:"queryVectors",value:function(e){var _=this,S=Object.create(null,{queryVectors:{get:function(){return _superPropGet(VectorIndexScope,"queryVectors",_,1)}}});return __awaiter(this,void 0,void 0,_regenerator().m(function _callee108(){return _regenerator().w(function(_){for(;;)if(0===_.n)return _.a(2,S.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName})))},_callee108,this)}))}},{key:"deleteVectors",value:function(e){var _=this,S=Object.create(null,{deleteVectors:{get:function(){return _superPropGet(VectorIndexScope,"deleteVectors",_,1)}}});return __awaiter(this,void 0,void 0,_regenerator().m(function _callee109(){return _regenerator().w(function(_){for(;;)if(0===_.n)return _.a(2,S.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName})))},_callee109,this)}))}}])}(Vs),Ys=function(e){function StorageClient(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},S=arguments.length>2?arguments[2]:void 0,k=arguments.length>3?arguments[3]:void 0;return _classCallCheck3(this,StorageClient),_callSuper(this,StorageClient,[e,_,S,k])}return _inherits(StorageClient,e),_createClass3(StorageClient,[{key:"from",value:function(e){return new Ps(this.url,this.headers,e,this.fetch)}},{key:"vectors",get:function(){return new Ws(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}},{key:"analytics",get:function(){return new Fs(this.url+"/iceberg",this.headers,this.fetch)}}])}(Ls),Ks="";Ks="undefined"!=typeof Deno?"deno":"undefined"!=typeof document?"web":"undefined"!=typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";var Js={headers:{"X-Client-Info":"supabase-js-".concat(Ks,"/").concat("2.78.0")}},Qs={schema:"public"},Zs={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},$s={},resolveFetch$1=function(e){var _;return _=e||("undefined"==typeof fetch?Ho:fetch),function(){return _.apply(void 0,arguments)}},fetchWithAuth=function(e,_,S){var k=resolveFetch$1(S),E="undefined"==typeof Headers?Wo:Headers;return function(){var S=_asyncToGenerator(_regenerator().m(function _callee110(S,T){var M,I,R,O,D,L;return _regenerator().w(function(U){for(;;)switch(U.n){case 0:return U.n=1,_();case 1:if(D=M=U.v,!(O=null!==D)){U.n=2;break}O=void 0!==M;case 2:if(!O){U.n=3;break}L=M,U.n=4;break;case 3:L=e;case 4:return I=L,(R=new E(null==T?void 0:T.headers)).has("apikey")||R.set("apikey",e),R.has("Authorization")||R.set("Authorization","Bearer ".concat(I)),U.a(2,k(S,Object.assign(Object.assign({},T),{headers:R})))}},_callee110)}));return function(e,_){return S.apply(this,arguments)}}()};var eu="2.78.0",tu=3e4,ru=9e4,nu={"X-Client-Info":"gotrue-js/".concat(eu)},iu="X-Supabase-Api-Version",au={timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"},ou=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,su=function(e){function AuthError(e,_,S){var k;return _classCallCheck3(this,AuthError),(k=_callSuper(this,AuthError,[e])).__isAuthError=!0,k.name="AuthError",k.status=_,k.code=S,k}return _inherits(AuthError,e),_createClass3(AuthError)}(_wrapNativeSuper(Error));function isAuthError(e){return"object"===_typeof3(e)&&null!==e&&"__isAuthError"in e}var uu=function(e){function AuthApiError(e,_,S){var k;return _classCallCheck3(this,AuthApiError),(k=_callSuper(this,AuthApiError,[e,_,S])).name="AuthApiError",k.status=_,k.code=S,k}return _inherits(AuthApiError,e),_createClass3(AuthApiError)}(su);function isAuthApiError(e){return isAuthError(e)&&"AuthApiError"===e.name}var lu=function(e){function AuthUnknownError(e,_){var S;return _classCallCheck3(this,AuthUnknownError),(S=_callSuper(this,AuthUnknownError,[e])).name="AuthUnknownError",S.originalError=_,S}return _inherits(AuthUnknownError,e),_createClass3(AuthUnknownError)}(su),cu=function(e){function CustomAuthError(e,_,S,k){var E;return _classCallCheck3(this,CustomAuthError),(E=_callSuper(this,CustomAuthError,[e,S,k])).name=_,E.status=S,E}return _inherits(CustomAuthError,e),_createClass3(CustomAuthError)}(su),hu=function(e){function AuthSessionMissingError(){return _classCallCheck3(this,AuthSessionMissingError),_callSuper(this,AuthSessionMissingError,["Auth session missing!","AuthSessionMissingError",400,void 0])}return _inherits(AuthSessionMissingError,e),_createClass3(AuthSessionMissingError)}(cu);function isAuthSessionMissingError(e){return isAuthError(e)&&"AuthSessionMissingError"===e.name}var du=function(e){function AuthInvalidTokenResponseError(){return _classCallCheck3(this,AuthInvalidTokenResponseError),_callSuper(this,AuthInvalidTokenResponseError,["Auth session or user missing","AuthInvalidTokenResponseError",500,void 0])}return _inherits(AuthInvalidTokenResponseError,e),_createClass3(AuthInvalidTokenResponseError)}(cu),fu=function(e){function AuthInvalidCredentialsError(e){return _classCallCheck3(this,AuthInvalidCredentialsError),_callSuper(this,AuthInvalidCredentialsError,[e,"AuthInvalidCredentialsError",400,void 0])}return _inherits(AuthInvalidCredentialsError,e),_createClass3(AuthInvalidCredentialsError)}(cu),pu=function(e){function AuthImplicitGrantRedirectError(e){var _,S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return _classCallCheck3(this,AuthImplicitGrantRedirectError),(_=_callSuper(this,AuthImplicitGrantRedirectError,[e,"AuthImplicitGrantRedirectError",500,void 0])).details=null,_.details=S,_}return _inherits(AuthImplicitGrantRedirectError,e),_createClass3(AuthImplicitGrantRedirectError,[{key:"toJSON",value:function(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}])}(cu);function isAuthImplicitGrantRedirectError(e){return isAuthError(e)&&"AuthImplicitGrantRedirectError"===e.name}var vu=function(e){function AuthPKCEGrantCodeExchangeError(e){var _,S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return _classCallCheck3(this,AuthPKCEGrantCodeExchangeError),(_=_callSuper(this,AuthPKCEGrantCodeExchangeError,[e,"AuthPKCEGrantCodeExchangeError",500,void 0])).details=null,_.details=S,_}return _inherits(AuthPKCEGrantCodeExchangeError,e),_createClass3(AuthPKCEGrantCodeExchangeError,[{key:"toJSON",value:function(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}])}(cu),gu=function(e){function AuthRetryableFetchError(e,_){return _classCallCheck3(this,AuthRetryableFetchError),_callSuper(this,AuthRetryableFetchError,[e,"AuthRetryableFetchError",_,void 0])}return _inherits(AuthRetryableFetchError,e),_createClass3(AuthRetryableFetchError)}(cu);function isAuthRetryableFetchError(e){return isAuthError(e)&&"AuthRetryableFetchError"===e.name}var mu=function(e){function AuthWeakPasswordError(e,_,S){var k;return _classCallCheck3(this,AuthWeakPasswordError),(k=_callSuper(this,AuthWeakPasswordError,[e,"AuthWeakPasswordError",_,"weak_password"])).reasons=S,k}return _inherits(AuthWeakPasswordError,e),_createClass3(AuthWeakPasswordError)}(cu),yu=function(e){function AuthInvalidJwtError(e){return _classCallCheck3(this,AuthInvalidJwtError),_callSuper(this,AuthInvalidJwtError,[e,"AuthInvalidJwtError",400,"invalid_jwt"])}return _inherits(AuthInvalidJwtError,e),_createClass3(AuthInvalidJwtError)}(cu),_u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),bu=" \t\n\r=".split(""),Su=function(){for(var e=new Array(128),_=0;_<e.length;_+=1)e[_]=-1;for(var S=0;S<bu.length;S+=1)e[bu[S].charCodeAt(0)]=-2;for(var k=0;k<_u.length;k+=1)e[_u[k].charCodeAt(0)]=k;return e}();function byteToBase64URL(e,_,S){if(null!==e)for(_.queue=_.queue<<8|e,_.queuedBits+=8;_.queuedBits>=6;){var k=_.queue>>_.queuedBits-6&63;S(_u[k]),_.queuedBits-=6}else if(_.queuedBits>0)for(_.queue=_.queue<<6-_.queuedBits,_.queuedBits=6;_.queuedBits>=6;){var E=_.queue>>_.queuedBits-6&63;S(_u[E]),_.queuedBits-=6}}function byteFromBase64URL(e,_,S){var k=Su[e];if(!(k>-1)){if(-2===k)return;throw new Error('Invalid Base64-URL character "'.concat(String.fromCharCode(e),'"'))}for(_.queue=_.queue<<6|k,_.queuedBits+=6;_.queuedBits>=8;)S(_.queue>>_.queuedBits-8&255),_.queuedBits-=8}function stringFromBase64URL(e){for(var _=[],utf8Emit=function(e){_.push(String.fromCodePoint(e))},S={utf8seq:0,codepoint:0},k={queue:0,queuedBits:0},byteEmit=function(e){!function(e,_,S){if(0===_.utf8seq){if(e<=127)return void S(e);for(var k=1;k<6;k+=1)if(!(e>>7-k&1)){_.utf8seq=k;break}if(2===_.utf8seq)_.codepoint=31&e;else if(3===_.utf8seq)_.codepoint=15&e;else{if(4!==_.utf8seq)throw new Error("Invalid UTF-8 sequence");_.codepoint=7&e}_.utf8seq-=1}else if(_.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");_.codepoint=_.codepoint<<6|63&e,_.utf8seq-=1,0===_.utf8seq&&S(_.codepoint)}}(e,S,utf8Emit)},E=0;E<e.length;E+=1)byteFromBase64URL(e.charCodeAt(E),k,byteEmit);return _.join("")}function codepointToUTF8(e,_){if(!(e<=127)){if(e<=2047)return _(192|e>>6),void _(128|63&e);if(e<=65535)return _(224|e>>12),_(128|e>>6&63),void _(128|63&e);if(e<=1114111)return _(240|e>>18),_(128|e>>12&63),_(128|e>>6&63),void _(128|63&e);throw new Error("Unrecognized Unicode codepoint: ".concat(e.toString(16)))}_(e)}function base64UrlToUint8Array(e){for(var _=[],S={queue:0,queuedBits:0},onByte=function(e){_.push(e)},k=0;k<e.length;k+=1)byteFromBase64URL(e.charCodeAt(k),S,onByte);return new Uint8Array(_)}function stringToUint8Array(e){var _=[];return function(e,_){for(var S=0;S<e.length;S+=1){var k=e.charCodeAt(S);if(k>55295&&k<=56319){var E=1024*(k-55296)&65535;k=65536+(e.charCodeAt(S+1)-56320&65535|E),S+=1}codepointToUTF8(k,_)}}(e,function(e){return _.push(e)}),new Uint8Array(_)}function bytesToBase64URL(e){var _=[],S={queue:0,queuedBits:0},onChar=function(e){_.push(e)};return e.forEach(function(e){return byteToBase64URL(e,S,onChar)}),byteToBase64URL(null,S,onChar),_.join("")}var isBrowser=function(){return"undefined"!=typeof window&&"undefined"!=typeof document},wu={tested:!1,writable:!1},supportsLocalStorage=function(){if(!isBrowser())return!1;try{if("object"!==_typeof3(globalThis.localStorage))return!1}catch(fo){return!1}if(wu.tested)return wu.writable;var e="lswt-".concat(Math.random()).concat(Math.random());try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),wu.tested=!0,wu.writable=!0}catch(fo){wu.tested=!0,wu.writable=!1}return wu.writable};function parseParametersFromURL(e){var _={},S=new URL(e);if(S.hash&&"#"===S.hash[0])try{new URLSearchParams(S.hash.substring(1)).forEach(function(e,S){_[S]=e})}catch(fo){}return S.searchParams.forEach(function(e,S){_[S]=e}),_}var resolveFetch=function(e){var _;return _=e||("undefined"==typeof fetch?function(){for(var e=arguments.length,_=new Array(e),S=0;S<e;S++)_[S]=arguments[S];return G(_asyncToGenerator(_regenerator().m(function _callee112(){var e,_;return _regenerator().w(function(S){for(;;)switch(S.n){case 0:return S.n=1,Promise.resolve().then(function(){return Yo});case 1:return e=S.v,_=e.default,S.a(2,{default:_})}},_callee112)})),void 0).then(function(e){return e.default.apply(void 0,_)})}:fetch),function(){return _.apply(void 0,arguments)}},looksLikeFetchResponse=function(e){return"object"===_typeof3(e)&&null!==e&&"status"in e&&"ok"in e&&"json"in e&&"function"==typeof e.json},xu=function(){var e=_asyncToGenerator(_regenerator().m(function _callee113(e,_,S){return _regenerator().w(function(k){for(;;)switch(k.n){case 0:return k.n=1,e.setItem(_,JSON.stringify(S));case 1:return k.a(2)}},_callee113)}));return function(_,S,k){return e.apply(this,arguments)}}(),ku=function(){var e=_asyncToGenerator(_regenerator().m(function _callee114(e,_){var S;return _regenerator().w(function(k){for(;;)switch(k.p=k.n){case 0:return k.n=1,e.getItem(_);case 1:if(S=k.v){k.n=2;break}return k.a(2,null);case 2:return k.p=2,k.a(2,JSON.parse(S));case 3:return k.p=3,k.v,k.a(2,S)}},_callee114,null,[[2,3]])}));return function(_,S){return e.apply(this,arguments)}}(),Cu=function(){var e=_asyncToGenerator(_regenerator().m(function _callee115(e,_){return _regenerator().w(function(S){for(;;)switch(S.n){case 0:return S.n=1,e.removeItem(_);case 1:return S.a(2)}},_callee115)}));return function(_,S){return e.apply(this,arguments)}}(),Au=_createClass3(function Deferred(){var e=this;_classCallCheck3(this,Deferred),this.promise=new Deferred.promiseConstructor(function(_,S){e.resolve=_,e.reject=S})});function decodeJWT(e){var _=e.split(".");if(3!==_.length)throw new yu("Invalid JWT structure");for(var S=0;S<_.length;S++)if(!ou.test(_[S]))throw new yu("JWT not in base64url format");return{header:JSON.parse(stringFromBase64URL(_[0])),payload:JSON.parse(stringFromBase64URL(_[1])),signature:base64UrlToUint8Array(_[2]),raw:{header:_[0],payload:_[1]}}}function sleep(e){return _sleep.apply(this,arguments)}function _sleep(){return _sleep=_asyncToGenerator(_regenerator().m(function _callee272(e){return _regenerator().w(function(_){for(;;)switch(_.n){case 0:return _.n=1,new Promise(function(_){setTimeout(function(){return _(null)},e)});case 1:return _.a(2,_.v)}},_callee272)})),_sleep.apply(this,arguments)}function retryable(e,_){return new Promise(function(S,k){_asyncToGenerator(_regenerator().m(function _callee116(){var E,T,M;return _regenerator().w(function(I){for(;;)switch(I.p=I.n){case 0:E=0;case 1:if(!(E<1/0)){I.n=7;break}return I.p=2,I.n=3,e(E);case 3:if(T=I.v,_(E,null,T)){I.n=4;break}return S(T),I.a(2);case 4:I.n=6;break;case 5:if(I.p=5,M=I.v,_(E,M)){I.n=6;break}return k(M),I.a(2);case 6:E++,I.n=1;break;case 7:return I.a(2)}},_callee116,null,[[2,5]])}))()})}function dec2hex(e){return("0"+e.toString(16)).substr(-2)}function generatePKCEVerifier(){var e=new Uint32Array(56);if("undefined"==typeof crypto){for(var _="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",S="",k=0;k<56;k++)S+=_.charAt(Math.floor(66*Math.random()));return S}return crypto.getRandomValues(e),Array.from(e,dec2hex).join("")}function sha256(e){return _sha.apply(this,arguments)}function _sha(){return _sha=_asyncToGenerator(_regenerator().m(function _callee273(e){var _,S,k,E;return _regenerator().w(function(T){for(;;)switch(T.n){case 0:return _=new TextEncoder,S=_.encode(e),T.n=1,crypto.subtle.digest("SHA-256",S);case 1:return k=T.v,E=new Uint8Array(k),T.a(2,Array.from(E).map(function(e){return String.fromCharCode(e)}).join(""))}},_callee273)})),_sha.apply(this,arguments)}function generatePKCEChallenge(e){return _generatePKCEChallenge.apply(this,arguments)}function _generatePKCEChallenge(){return(_generatePKCEChallenge=_asyncToGenerator(_regenerator().m(function _callee274(e){var _;return _regenerator().w(function(S){for(;;)switch(S.n){case 0:if("undefined"!=typeof crypto&&void 0!==crypto.subtle&&"undefined"!=typeof TextEncoder){S.n=1;break}return S.a(2,e);case 1:return S.n=2,sha256(e);case 2:return _=S.v,S.a(2,btoa(_).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,""))}},_callee274)}))).apply(this,arguments)}function getCodeChallengeAndMethod(e,_){return _getCodeChallengeAndMethod.apply(this,arguments)}function _getCodeChallengeAndMethod(){return _getCodeChallengeAndMethod=_asyncToGenerator(_regenerator().m(function _callee275(e,_){var S,k,E,T,M,I=arguments;return _regenerator().w(function(R){for(;;)switch(R.n){case 0:return S=I.length>2&&void 0!==I[2]&&I[2],k=generatePKCEVerifier(),E=k,S&&(E+="/PASSWORD_RECOVERY"),R.n=1,xu(e,"".concat(_,"-code-verifier"),E);case 1:return R.n=2,generatePKCEChallenge(k);case 2:return T=R.v,M=k===T?"plain":"s256",R.a(2,[T,M])}},_callee275)})),_getCodeChallengeAndMethod.apply(this,arguments)}Au.promiseConstructor=Promise;var Eu=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function parseResponseAPIVersion(e){var _=e.headers.get(iu);if(!_)return null;if(!_.match(Eu))return null;try{return new Date("".concat(_,"T00:00:00.0Z"))}catch(fo){return null}}function validateExp(e){if(!e)throw new Error("Missing exp claim");if(e<=Math.floor(Date.now()/1e3))throw new Error("JWT has expired")}function getAlgorithm(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var Tu=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function validateUUID(e){if(!Tu.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function userNotAvailableProxy(){return new Proxy({},{get:function(e,_){if("__isUserNotAvailableProxy"===_)return!0;if("symbol"===_typeof3(_)){var S=_.toString();if("Symbol(Symbol.toPrimitive)"===S||"Symbol(Symbol.toStringTag)"===S||"Symbol(util.inspect.custom)"===S)return}throw new Error('@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "'.concat(_,'" property of the session object is not supported. Please use getUser() instead.'))},set:function(e,_){throw new Error('@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "'.concat(_,'" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.'))},deleteProperty:function(e,_){throw new Error('@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "'.concat(_,'" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.'))}})}function insecureUserWarningProxy(e,_){return new Proxy(e,{get:function(e,S,k){if("__isInsecureUserWarningProxy"===S)return!0;if("symbol"===_typeof3(S)){var E=S.toString();if("Symbol(Symbol.toPrimitive)"===E||"Symbol(Symbol.toStringTag)"===E||"Symbol(util.inspect.custom)"===E||"Symbol(nodejs.util.inspect.custom)"===E)return Reflect.get(e,S,k)}return _.value||"string"!=typeof S||(_.value=!0),Reflect.get(e,S,k)}})}function deepClone(e){return JSON.parse(JSON.stringify(e))}var _getErrorMessage=function(e){return e.msg||e.message||e.error_description||e.error||JSON.stringify(e)},Mu=[502,503,504];function handleError(e){return _handleError.apply(this,arguments)}function _handleError(){return _handleError=_asyncToGenerator(_regenerator().m(function _callee276(e){var _,S,k,E,T;return _regenerator().w(function(M){for(;;)switch(M.p=M.n){case 0:if(looksLikeFetchResponse(e)){M.n=1;break}throw new gu(_getErrorMessage(e),0);case 1:if(!Mu.includes(e.status)){M.n=2;break}throw new gu(_getErrorMessage(e),e.status);case 2:return M.p=2,M.n=3,e.json();case 3:S=M.v,M.n=5;break;case 4:throw M.p=4,T=M.v,new lu(_getErrorMessage(T),T);case 5:if(k=void 0,(E=parseResponseAPIVersion(e))&&E.getTime()>=au.timestamp&&"object"===_typeof3(S)&&S&&"string"==typeof S.code?k=S.code:"object"===_typeof3(S)&&S&&"string"==typeof S.error_code&&(k=S.error_code),k){M.n=7;break}if(!("object"===_typeof3(S)&&S&&"object"===_typeof3(S.weak_password)&&S.weak_password&&Array.isArray(S.weak_password.reasons)&&S.weak_password.reasons.length&&S.weak_password.reasons.reduce(function(e,_){return e&&"string"==typeof _},!0))){M.n=6;break}throw new mu(_getErrorMessage(S),e.status,S.weak_password.reasons);case 6:M.n=9;break;case 7:if("weak_password"!==k){M.n=8;break}throw new mu(_getErrorMessage(S),e.status,(null===(_=S.weak_password)||void 0===_?void 0:_.reasons)||[]);case 8:if("session_not_found"!==k){M.n=9;break}throw new hu;case 9:throw new uu(_getErrorMessage(S),e.status||500,k);case 10:return M.a(2)}},_callee276,null,[[2,4]])})),_handleError.apply(this,arguments)}var _getRequestParams=function(e,_,S,k){var E={method:e,headers:(null==_?void 0:_.headers)||{}};return"GET"===e?E:(E.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null==_?void 0:_.headers),E.body=JSON.stringify(k),Object.assign(Object.assign({},E),S))};function _request(e,_,S,k){return _request2.apply(this,arguments)}function _request2(){return _request2=_asyncToGenerator(_regenerator().m(function _callee277(e,_,S,k){var E,T,M,I,R;return _regenerator().w(function(O){for(;;)switch(O.n){case 0:return(T=Object.assign({},null==k?void 0:k.headers))[iu]||(T[iu]=au.name),(null==k?void 0:k.jwt)&&(T.Authorization="Bearer ".concat(k.jwt)),M=null!==(E=null==k?void 0:k.query)&&void 0!==E?E:{},(null==k?void 0:k.redirectTo)&&(M.redirect_to=k.redirectTo),I=Object.keys(M).length?"?"+new URLSearchParams(M).toString():"",O.n=1,_handleRequest(e,_,S+I,{headers:T,noResolveJson:null==k?void 0:k.noResolveJson},{},null==k?void 0:k.body);case 1:return R=O.v,O.a(2,(null==k?void 0:k.xform)?null==k?void 0:k.xform(R):{data:Object.assign({},R),error:null})}},_callee277)})),_request2.apply(this,arguments)}function _handleRequest(e,_,S,k,E,T){return _handleRequest2.apply(this,arguments)}function _handleRequest2(){return(_handleRequest2=_asyncToGenerator(_regenerator().m(function _callee278(e,_,S,k,E,T){var M,I,R,O;return _regenerator().w(function(D){for(;;)switch(D.p=D.n){case 0:return M=_getRequestParams(_,k,E,T),D.p=1,D.n=2,e(S,Object.assign({},M));case 2:I=D.v,D.n=4;break;case 3:throw D.p=3,R=D.v,new gu(_getErrorMessage(R),0);case 4:if(I.ok){D.n=5;break}return D.n=5,handleError(I);case 5:if(!(null==k?void 0:k.noResolveJson)){D.n=6;break}return D.a(2,I);case 6:return D.p=6,D.n=7,I.json();case 7:return D.a(2,D.v);case 8:return D.p=8,O=D.v,D.n=9,handleError(O);case 9:return D.a(2)}},_callee278,null,[[6,8],[1,3]])}))).apply(this,arguments)}function _sessionResponse(e){var _,S,k=null;return function(e){return e.access_token&&e.refresh_token&&e.expires_in}(e)&&(k=Object.assign({},e),e.expires_at||(k.expires_at=(S=e.expires_in,Math.round(Date.now()/1e3)+S))),{data:{session:k,user:null!==(_=e.user)&&void 0!==_?_:e},error:null}}function _sessionResponsePassword(e){var _=_sessionResponse(e);return!_.error&&e.weak_password&&"object"===_typeof3(e.weak_password)&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&"string"==typeof e.weak_password.message&&e.weak_password.reasons.reduce(function(e,_){return e&&"string"==typeof _},!0)&&(_.data.weak_password=e.weak_password),_}function _userResponse(e){var _;return{data:{user:null!==(_=e.user)&&void 0!==_?_:e},error:null}}function _ssoResponse(e){return{data:e,error:null}}function _generateLinkResponse(e){var _=e.action_link,S=e.email_otp,k=e.hashed_token,E=e.redirect_to,T=e.verification_type,M=__rest(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:_,email_otp:S,hashed_token:k,redirect_to:E,verification_type:T},user:Object.assign({},M)},error:null}}function _noResolveJsonResponse(e){return e}var Iu=["global","local","others"],Ru=function(){return _createClass3(function GoTrueAdminApi(e){var _=e.url,S=void 0===_?"":_,k=e.headers,E=void 0===k?{}:k,T=e.fetch;_classCallCheck3(this,GoTrueAdminApi),this.url=S,this.headers=E,this.fetch=resolveFetch(T),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}},[{key:"signOut",value:(G=_asyncToGenerator(_regenerator().m(function _callee117(e){var _,S,k=arguments;return _regenerator().w(function(E){for(;;)switch(E.p=E.n){case 0:if(_=k.length>1&&void 0!==k[1]?k[1]:Iu[0],!(Iu.indexOf(_)<0)){E.n=1;break}throw new Error("@supabase/auth-js: Parameter scope must be one of ".concat(Iu.join(", ")));case 1:return E.p=1,E.n=2,_request(this.fetch,"POST","".concat(this.url,"/logout?scope=").concat(_),{headers:this.headers,jwt:e,noResolveJson:!0});case 2:return E.a(2,{data:null,error:null});case 3:if(E.p=3,!isAuthError(S=E.v)){E.n=4;break}return E.a(2,{data:null,error:S});case 4:throw S;case 5:return E.a(2)}},_callee117,this,[[1,3]])})),function(e){return G.apply(this,arguments)})},{key:"inviteUserByEmail",value:(z=_asyncToGenerator(_regenerator().m(function _callee118(e){var _,S,k=arguments;return _regenerator().w(function(E){for(;;)switch(E.p=E.n){case 0:return _=k.length>1&&void 0!==k[1]?k[1]:{},E.p=1,E.n=2,_request(this.fetch,"POST","".concat(this.url,"/invite"),{body:{email:e,data:_.data},headers:this.headers,redirectTo:_.redirectTo,xform:_userResponse});case 2:return E.a(2,E.v);case 3:if(E.p=3,!isAuthError(S=E.v)){E.n=4;break}return E.a(2,{data:{user:null},error:S});case 4:throw S;case 5:return E.a(2)}},_callee118,this,[[1,3]])})),function(e){return z.apply(this,arguments)})},{key:"generateLink",value:(B=_asyncToGenerator(_regenerator().m(function _callee119(e){var _,S,k,E;return _regenerator().w(function(T){for(;;)switch(T.p=T.n){case 0:return T.p=0,_=e.options,S=__rest(e,["options"]),k=Object.assign(Object.assign({},S),_),"newEmail"in S&&(k.new_email=null==S?void 0:S.newEmail,delete k.newEmail),T.n=1,_request(this.fetch,"POST","".concat(this.url,"/admin/generate_link"),{body:k,headers:this.headers,xform:_generateLinkResponse,redirectTo:null==_?void 0:_.redirectTo});case 1:return T.a(2,T.v);case 2:if(T.p=2,!isAuthError(E=T.v)){T.n=3;break}return T.a(2,{data:{properties:null,user:null},error:E});case 3:throw E;case 4:return T.a(2)}},_callee119,this,[[0,2]])})),function(e){return B.apply(this,arguments)})},{key:"createUser",value:(U=_asyncToGenerator(_regenerator().m(function _callee120(e){var _;return _regenerator().w(function(S){for(;;)switch(S.p=S.n){case 0:return S.p=0,S.n=1,_request(this.fetch,"POST","".concat(this.url,"/admin/users"),{body:e,headers:this.headers,xform:_userResponse});case 1:return S.a(2,S.v);case 2:if(S.p=2,!isAuthError(_=S.v)){S.n=3;break}return S.a(2,{data:{user:null},error:_});case 3:throw _;case 4:return S.a(2)}},_callee120,this,[[0,2]])})),function(e){return U.apply(this,arguments)})},{key:"listUsers",value:(L=_asyncToGenerator(_regenerator().m(function _callee121(e){var _,S,k,E,T,M,I,R,O,D,L,U,B;return _regenerator().w(function(z){for(;;)switch(z.p=z.n){case 0:return z.p=0,R={nextPage:null,lastPage:0,total:0},z.n=1,_request(this.fetch,"GET","".concat(this.url,"/admin/users"),{headers:this.headers,noResolveJson:!0,query:{page:null!==(S=null===(_=null==e?void 0:e.page)||void 0===_?void 0:_.toString())&&void 0!==S?S:"",per_page:null!==(E=null===(k=null==e?void 0:e.perPage)||void 0===k?void 0:k.toString())&&void 0!==E?E:""},xform:_noResolveJsonResponse});case 1:if(!(O=z.v).error){z.n=2;break}throw O.error;case 2:return z.n=3,O.json();case 3:return D=z.v,L=null!==(T=O.headers.get("x-total-count"))&&void 0!==T?T:0,(U=null!==(I=null===(M=O.headers.get("link"))||void 0===M?void 0:M.split(","))&&void 0!==I?I:[]).length>0&&(U.forEach(function(e){var _=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),S=JSON.parse(e.split(";")[1].split("=")[1]);R["".concat(S,"Page")]=_}),R.total=parseInt(L)),z.a(2,{data:Object.assign(Object.assign({},D),R),error:null});case 4:if(z.p=4,!isAuthError(B=z.v)){z.n=5;break}return z.a(2,{data:{users:[]},error:B});case 5:throw B;case 6:return z.a(2)}},_callee121,this,[[0,4]])})),function(e){return L.apply(this,arguments)})},{key:"getUserById",value:(D=_asyncToGenerator(_regenerator().m(function _callee122(e){var _;return _regenerator().w(function(S){for(;;)switch(S.p=S.n){case 0:return validateUUID(e),S.p=1,S.n=2,_request(this.fetch,"GET","".concat(this.url,"/admin/users/").concat(e),{headers:this.headers,xform:_userResponse});case 2:return S.a(2,S.v);case 3:if(S.p=3,!isAuthError(_=S.v)){S.n=4;break}return S.a(2,{data:{user:null},error:_});case 4:throw _;case 5:return S.a(2)}},_callee122,this,[[1,3]])})),function(e){return D.apply(this,arguments)})},{key:"updateUserById",value:(O=_asyncToGenerator(_regenerator().m(function _callee123(e,_){var S;return _regenerator().w(function(k){for(;;)switch(k.p=k.n){case 0:return validateUUID(e),k.p=1,k.n=2,_request(this.fetch,"PUT","".concat(this.url,"/admin/users/").concat(e),{body:_,headers:this.headers,xform:_userResponse});case 2:return k.a(2,k.v);case 3:if(k.p=3,!isAuthError(S=k.v)){k.n=4;break}return k.a(2,{data:{user:null},error:S});case 4:throw S;case 5:return k.a(2)}},_callee123,this,[[1,3]])})),function(e,_){return O.apply(this,arguments)})},{key:"deleteUser",value:(R=_asyncToGenerator(_regenerator().m(function _callee124(e){var _,S,k=arguments;return _regenerator().w(function(E){for(;;)switch(E.p=E.n){case 0:return _=k.length>1&&void 0!==k[1]&&k[1],validateUUID(e),E.p=1,E.n=2,_request(this.fetch,"DELETE","".concat(this.url,"/admin/users/").concat(e),{headers:this.headers,body:{should_soft_delete:_},xform:_userResponse});case 2:return E.a(2,E.v);case 3:if(E.p=3,!isAuthError(S=E.v)){E.n=4;break}return E.a(2,{data:{user:null},error:S});case 4:throw S;case 5:return E.a(2)}},_callee124,this,[[1,3]])})),function(e){return R.apply(this,arguments)})},{key:"_listFactors",value:(I=_asyncToGenerator(_regenerator().m(function _callee125(e){var _,S,k,E;return _regenerator().w(function(T){for(;;)switch(T.p=T.n){case 0:return validateUUID(e.userId),T.p=1,T.n=2,_request(this.fetch,"GET","".concat(this.url,"/admin/users/").concat(e.userId,"/factors"),{headers:this.headers,xform:function(e){return{data:{factors:e},error:null}}});case 2:return _=T.v,S=_.data,k=_.error,T.a(2,{data:S,error:k});case 3:if(T.p=3,!isAuthError(E=T.v)){T.n=4;break}return T.a(2,{data:null,error:E});case 4:throw E;case 5:return T.a(2)}},_callee125,this,[[1,3]])})),function(e){return I.apply(this,arguments)})},{key:"_deleteFactor",value:(M=_asyncToGenerator(_regenerator().m(function _callee126(e){var _,S;return _regenerator().w(function(k){for(;;)switch(k.p=k.n){case 0:return validateUUID(e.userId),validateUUID(e.id),k.p=1,k.n=2,_request(this.fetch,"DELETE","".concat(this.url,"/admin/users/").concat(e.userId,"/factors/").concat(e.id),{headers:this.headers});case 2:return _=k.v,k.a(2,{data:_,error:null});case 3:if(k.p=3,!isAuthError(S=k.v)){k.n=4;break}return k.a(2,{data:null,error:S});case 4:throw S;case 5:return k.a(2)}},_callee126,this,[[1,3]])})),function(e){return M.apply(this,arguments)})},{key:"_listOAuthClients",value:(T=_asyncToGenerator(_regenerator().m(function _callee127(e){var _,S,k,E,T,M,I,R,O,D,L,U,B;return _regenerator().w(function(z){for(;;)switch(z.p=z.n){case 0:return z.p=0,R={nextPage:null,lastPage:0,total:0},z.n=1,_request(this.fetch,"GET","".concat(this.url,"/admin/oauth/clients"),{headers:this.headers,noResolveJson:!0,query:{page:null!==(S=null===(_=null==e?void 0:e.page)||void 0===_?void 0:_.toString())&&void 0!==S?S:"",per_page:null!==(E=null===(k=null==e?void 0:e.perPage)||void 0===k?void 0:k.toString())&&void 0!==E?E:""},xform:_noResolveJsonResponse});case 1:if(!(O=z.v).error){z.n=2;break}throw O.error;case 2:return z.n=3,O.json();case 3:return D=z.v,L=null!==(T=O.headers.get("x-total-count"))&&void 0!==T?T:0,(U=null!==(I=null===(M=O.headers.get("link"))||void 0===M?void 0:M.split(","))&&void 0!==I?I:[]).length>0&&(U.forEach(function(e){var _=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),S=JSON.parse(e.split(";")[1].split("=")[1]);R["".concat(S,"Page")]=_}),R.total=parseInt(L)),z.a(2,{data:Object.assign(Object.assign({},D),R),error:null});case 4:if(z.p=4,!isAuthError(B=z.v)){z.n=5;break}return z.a(2,{data:{clients:[]},error:B});case 5:throw B;case 6:return z.a(2)}},_callee127,this,[[0,4]])})),function(e){return T.apply(this,arguments)})},{key:"_createOAuthClient",value:(E=_asyncToGenerator(_regenerator().m(function _callee128(e){var _;return _regenerator().w(function(S){for(;;)switch(S.p=S.n){case 0:return S.p=0,S.n=1,_request(this.fetch,"POST","".concat(this.url,"/admin/oauth/clients"),{body:e,headers:this.headers,xform:function(e){return{data:e,error:null}}});case 1:return S.a(2,S.v);case 2:if(S.p=2,!isAuthError(_=S.v)){S.n=3;break}return S.a(2,{data:null,error:_});case 3:throw _;case 4:return S.a(2)}},_callee128,this,[[0,2]])})),function(e){return E.apply(this,arguments)})},{key:"_getOAuthClient",value:(k=_asyncToGenerator(_regenerator().m(function _callee129(e){var _;return _regenerator().w(function(S){for(;;)switch(S.p=S.n){case 0:return S.p=0,S.n=1,_request(this.fetch,"GET","".concat(this.url,"/admin/oauth/clients/").concat(e),{headers:this.headers,xform:function(e){return{data:e,error:null}}});case 1:return S.a(2,S.v);case 2:if(S.p=2,!isAuthError(_=S.v)){S.n=3;break}return S.a(2,{data:null,error:_});case 3:throw _;case 4:return S.a(2)}},_callee129,this,[[0,2]])})),function(e){return k.apply(this,arguments)})},{key:"_updateOAuthClient",value:(S=_asyncToGenerator(_regenerator().m(function _callee130(e,_){var S;return _regenerator().w(function(k){for(;;)switch(k.p=k.n){case 0:return k.p=0,k.n=1,_request(this.fetch,"PUT","".concat(this.url,"/admin/oauth/clients/").concat(e),{body:_,headers:this.headers,xform:function(e){return{data:e,error:null}}});case 1:return k.a(2,k.v);case 2:if(k.p=2,!isAuthError(S=k.v)){k.n=3;break}return k.a(2,{data:null,error:S});case 3:throw S;case 4:return k.a(2)}},_callee130,this,[[0,2]])})),function(e,_){return S.apply(this,arguments)})},{key:"_deleteOAuthClient",value:(_=_asyncToGenerator(_regenerator().m(function _callee131(e){var _;return _regenerator().w(function(S){for(;;)switch(S.p=S.n){case 0:return S.p=0,S.n=1,_request(this.fetch,"DELETE","".concat(this.url,"/admin/oauth/clients/").concat(e),{headers:this.headers,noResolveJson:!0});case 1:return S.a(2,{data:null,error:null});case 2:if(S.p=2,!isAuthError(_=S.v)){S.n=3;break}return S.a(2,{data:null,error:_});case 3:throw _;case 4:return S.a(2)}},_callee131,this,[[0,2]])})),function(e){return _.apply(this,arguments)})},{key:"_regenerateOAuthClientSecret",value:(e=_asyncToGenerator(_regenerator().m(function _callee132(e){var _;return _regenerator().w(function(S){for(;;)switch(S.p=S.n){case 0:return S.p=0,S.n=1,_request(this.fetch,"POST","".concat(this.url,"/admin/oauth/clients/").concat(e,"/regenerate_secret"),{headers:this.headers,xform:function(e){return{data:e,error:null}}});case 1:return S.a(2,S.v);case 2:if(S.p=2,!isAuthError(_=S.v)){S.n=3;break}return S.a(2,{data:null,error:_});case 3:throw _;case 4:return S.a(2)}},_callee132,this,[[0,2]])})),function(_){return e.apply(this,arguments)})}]);var e,_,S,k,E,T,M,I,R,O,D,L,U,B,z,G}();function memoryLocalStorageAdapter(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{getItem:function(_){return e[_]||null},setItem:function(_,S){e[_]=S},removeItem:function(_){delete e[_]}}}var Pu=!!(globalThis&&supportsLocalStorage()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")),Ou=function(e){function LockAcquireTimeoutError(e){var _;return _classCallCheck3(this,LockAcquireTimeoutError),(_=_callSuper(this,LockAcquireTimeoutError,[e])).isAcquireTimeout=!0,_}return _inherits(LockAcquireTimeoutError,e),_createClass3(LockAcquireTimeoutError)}(_wrapNativeSuper(Error)),Du=function(e){function NavigatorLockAcquireTimeoutError(){return _classCallCheck3(this,NavigatorLockAcquireTimeoutError),_callSuper(this,NavigatorLockAcquireTimeoutError,arguments)}return _inherits(NavigatorLockAcquireTimeoutError,e),_createClass3(NavigatorLockAcquireTimeoutError)}(Ou);function navigatorLock(e,_,S){return _navigatorLock.apply(this,arguments)}function _navigatorLock(){return _navigatorLock=_asyncToGenerator(_regenerator().m(function _callee280(e,_,S){var k;return _regenerator().w(function(E){for(;;)switch(E.n){case 0:return k=new globalThis.AbortController,_>0&&setTimeout(function(){k.abort()},_),E.n=1,Promise.resolve().then(function(){return globalThis.navigator.locks.request(e,0===_?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:k.signal},function(){var k=_asyncToGenerator(_regenerator().m(function _callee279(k){return _regenerator().w(function(E){for(;;)switch(E.p=E.n){case 0:if(!k){E.n=5;break}return E.p=1,E.n=2,S();case 2:return E.a(2,E.v);case 3:return E.p=3,E.f(3);case 4:E.n=12;break;case 5:if(0!==_){E.n=6;break}throw new Du('Acquiring an exclusive Navigator LockManager lock "'.concat(e,'" immediately failed'));case 6:if(!Pu){E.n=10;break}return E.p=7,E.n=8,globalThis.navigator.locks.query();case 8:E.v,E.n=10;break;case 9:E.p=9,E.v;case 10:return E.n=11,S();case 11:return E.a(2,E.v);case 12:return E.a(2)}},_callee279,null,[[7,9],[1,,3,4]])}));return function(e){return k.apply(this,arguments)}}())});case 1:return E.a(2,E.v)}},_callee280)})),_navigatorLock.apply(this,arguments)}function getAddress(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error('@supabase/auth-js: Address "'.concat(e,'" is invalid.'));return e.toLowerCase()}function fromHex(e){return parseInt(e,16)}function toHex(e){var _=(new TextEncoder).encode(e);return"0x"+Array.from(_,function(e){return e.toString(16).padStart(2,"0")}).join("")}function createSiweMessage(e){var _,S=e.chainId,k=e.domain,E=e.expirationTime,T=e.issuedAt,M=void 0===T?new Date:T,I=e.nonce,R=e.notBefore,O=e.requestId,D=e.resources,L=e.scheme,U=e.uri,B=e.version;if(!Number.isInteger(S))throw new Error('@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: '.concat(S));if(!k)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(I&&I.length<8)throw new Error('@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: '.concat(I));if(!U)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if("1"!==B)throw new Error("@supabase/auth-js: Invalid SIWE message field \"version\". Version must be '1'. Provided value: ".concat(B));if(null===(_=e.statement)||void 0===_?void 0:_.includes("\n"))throw new Error("@supabase/auth-js: Invalid SIWE message field \"statement\". Statement must not include '\\n'. Provided value: ".concat(e.statement));var z=getAddress(e.address),G=L?"".concat(L,"://").concat(k):k,j=e.statement?"".concat(e.statement,"\n"):"",V="".concat(G," wants you to sign in with your Ethereum account:\n").concat(z,"\n\n").concat(j),H="URI: ".concat(U,"\nVersion: ").concat(B,"\nChain ID: ").concat(S).concat(I?"\nNonce: ".concat(I):"","\nIssued At: ").concat(M.toISOString());if(E&&(H+="\nExpiration Time: ".concat(E.toISOString())),R&&(H+="\nNot Before: ".concat(R.toISOString())),O&&(H+="\nRequest ID: ".concat(O)),D){var W,q="\nResources:",X=_createForOfIteratorHelper2(D);try{for(X.s();!(W=X.n()).done;){var Y=W.value;if(!Y||"string"!=typeof Y)throw new Error('@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: '.concat(Y));q+="\n- ".concat(Y)}}catch(K){X.e(K)}finally{X.f()}H+=q}return"".concat(V,"\n").concat(H)}var Lu=function(e){function WebAuthnError(e){var _,S,k=e.message,E=e.code,T=e.cause,M=e.name;return _classCallCheck3(this,WebAuthnError),(_=_callSuper(this,WebAuthnError,[k,{cause:T}])).__isWebAuthnError=!0,_.name=null!==(S=null!=M?M:T instanceof Error?T.name:void 0)&&void 0!==S?S:"Unknown Error",_.code=E,_}return _inherits(WebAuthnError,e),_createClass3(WebAuthnError)}(_wrapNativeSuper(Error)),Fu=function(e){function WebAuthnUnknownError(e,_){var S;return _classCallCheck3(this,WebAuthnUnknownError),(S=_callSuper(this,WebAuthnUnknownError,[{code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:_,message:e}])).name="WebAuthnUnknownError",S.originalError=_,S}return _inherits(WebAuthnUnknownError,e),_createClass3(WebAuthnUnknownError)}(Lu);function identifyRegistrationError(e){var _,S,k,E=e.error,T=e.options,M=T.publicKey;if(!M)throw Error("options was missing required publicKey property");if("AbortError"===E.name){if(T.signal instanceof AbortSignal)return new Lu({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:E})}else if("ConstraintError"===E.name){if(!0===(null===(_=M.authenticatorSelection)||void 0===_?void 0:_.requireResidentKey))return new Lu({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:E});if("conditional"===T.mediation&&"required"===(null===(S=M.authenticatorSelection)||void 0===S?void 0:S.userVerification))return new Lu({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:E});if("required"===(null===(k=M.authenticatorSelection)||void 0===k?void 0:k.userVerification))return new Lu({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:E})}else{if("InvalidStateError"===E.name)return new Lu({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:E});if("NotAllowedError"===E.name)return new Lu({message:E.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:E});if("NotSupportedError"===E.name)return 0===M.pubKeyCredParams.filter(function(e){return"public-key"===e.type}).length?new Lu({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:E}):new Lu({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:E});if("SecurityError"===E.name){var I=window.location.hostname;if(!isValidDomain(I))return new Lu({message:"".concat(window.location.hostname," is an invalid domain"),code:"ERROR_INVALID_DOMAIN",cause:E});if(M.rp.id!==I)return new Lu({message:'The RP ID "'.concat(M.rp.id,'" is invalid for this domain'),code:"ERROR_INVALID_RP_ID",cause:E})}else if("TypeError"===E.name){if(M.user.id.byteLength<1||M.user.id.byteLength>64)return new Lu({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:E})}else if("UnknownError"===E.name)return new Lu({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:E})}return new Lu({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:E})}function identifyAuthenticationError(e){var _=e.error,S=e.options,k=S.publicKey;if(!k)throw Error("options was missing required publicKey property");if("AbortError"===_.name){if(S.signal instanceof AbortSignal)return new Lu({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:_})}else{if("NotAllowedError"===_.name)return new Lu({message:_.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:_});if("SecurityError"===_.name){var E=window.location.hostname;if(!isValidDomain(E))return new Lu({message:"".concat(window.location.hostname," is an invalid domain"),code:"ERROR_INVALID_DOMAIN",cause:_});if(k.rpId!==E)return new Lu({message:'The RP ID "'.concat(k.rpId,'" is invalid for this domain'),code:"ERROR_INVALID_RP_ID",cause:_})}else if("UnknownError"===_.name)return new Lu({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:_})}return new Lu({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:_})}var Uu=new(function(){return _createClass3(function WebAuthnAbortService(){_classCallCheck3(this,WebAuthnAbortService)},[{key:"createNewAbortSignal",value:function(){if(this.controller){var e=new Error("Cancelling existing WebAuthn API call for new one");e.name="AbortError",this.controller.abort(e)}var _=new AbortController;return this.controller=_,_.signal}},{key:"cancelCeremony",value:function(){if(this.controller){var e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}])}());function deserializeCredentialCreationOptions(e){if(!e)throw new Error("Credential creation options are required");if("undefined"!=typeof PublicKeyCredential&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&"function"==typeof PublicKeyCredential.parseCreationOptionsFromJSON)return PublicKeyCredential.parseCreationOptionsFromJSON(e);var _=e.challenge,S=e.user,k=e.excludeCredentials,E=__rest(e,["challenge","user","excludeCredentials"]),T=base64UrlToUint8Array(_).buffer,M=Object.assign(Object.assign({},S),{id:base64UrlToUint8Array(S.id).buffer}),I=Object.assign(Object.assign({},E),{challenge:T,user:M});if(k&&k.length>0){I.excludeCredentials=new Array(k.length);for(var R=0;R<k.length;R++){var O=k[R];I.excludeCredentials[R]=Object.assign(Object.assign({},O),{id:base64UrlToUint8Array(O.id).buffer,type:O.type||"public-key",transports:O.transports})}}return I}function deserializeCredentialRequestOptions(e){if(!e)throw new Error("Credential request options are required");if("undefined"!=typeof PublicKeyCredential&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&"function"==typeof PublicKeyCredential.parseRequestOptionsFromJSON)return PublicKeyCredential.parseRequestOptionsFromJSON(e);var _=e.challenge,S=e.allowCredentials,k=__rest(e,["challenge","allowCredentials"]),E=base64UrlToUint8Array(_).buffer,T=Object.assign(Object.assign({},k),{challenge:E});if(S&&S.length>0){T.allowCredentials=new Array(S.length);for(var M=0;M<S.length;M++){var I=S[M];T.allowCredentials[M]=Object.assign(Object.assign({},I),{id:base64UrlToUint8Array(I.id).buffer,type:I.type||"public-key",transports:I.transports})}}return T}function serializeCredentialCreationResponse(e){var _;if("toJSON"in e&&"function"==typeof e.toJSON)return e.toJSON();var S=e;return{id:e.id,rawId:e.id,response:{attestationObject:bytesToBase64URL(new Uint8Array(e.response.attestationObject)),clientDataJSON:bytesToBase64URL(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:null!==(_=S.authenticatorAttachment)&&void 0!==_?_:void 0}}function serializeCredentialRequestResponse(e){var _;if("toJSON"in e&&"function"==typeof e.toJSON)return e.toJSON();var S=e,k=e.getClientExtensionResults(),E=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:bytesToBase64URL(new Uint8Array(E.authenticatorData)),clientDataJSON:bytesToBase64URL(new Uint8Array(E.clientDataJSON)),signature:bytesToBase64URL(new Uint8Array(E.signature)),userHandle:E.userHandle?bytesToBase64URL(new Uint8Array(E.userHandle)):void 0},type:"public-key",clientExtensionResults:k,authenticatorAttachment:null!==(_=S.authenticatorAttachment)&&void 0!==_?_:void 0}}function isValidDomain(e){return"localhost"===e||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function browserSupportsWebAuthn(){var e,_;return!!(isBrowser()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&"function"==typeof(null===(e=null===navigator||void 0===navigator?void 0:navigator.credentials)||void 0===e?void 0:e.create)&&"function"==typeof(null===(_=null===navigator||void 0===navigator?void 0:navigator.credentials)||void 0===_?void 0:_.get))}function createCredential(e){return _createCredential.apply(this,arguments)}function _createCredential(){return(_createCredential=_asyncToGenerator(_regenerator().m(function _callee281(e){var _,S;return _regenerator().w(function(k){for(;;)switch(k.p=k.n){case 0:return k.p=0,k.n=1,navigator.credentials.create(e);case 1:if(_=k.v){k.n=2;break}return k.a(2,{data:null,error:new Fu("Empty credential response",_)});case 2:if(_ instanceof PublicKeyCredential){k.n=3;break}return k.a(2,{data:null,error:new Fu("Browser returned unexpected credential type",_)});case 3:return k.a(2,{data:_,error:null});case 4:return k.p=4,S=k.v,k.a(2,{data:null,error:identifyRegistrationError({error:S,options:e})})}},_callee281,null,[[0,4]])}))).apply(this,arguments)}function getCredential(e){return _getCredential.apply(this,arguments)}function _getCredential(){return(_getCredential=_asyncToGenerator(_regenerator().m(function _callee282(e){var _,S;return _regenerator().w(function(k){for(;;)switch(k.p=k.n){case 0:return k.p=0,k.n=1,navigator.credentials.get(e);case 1:if(_=k.v){k.n=2;break}return k.a(2,{data:null,error:new Fu("Empty credential response",_)});case 2:if(_ instanceof PublicKeyCredential){k.n=3;break}return k.a(2,{data:null,error:new Fu("Browser returned unexpected credential type",_)});case 3:return k.a(2,{data:_,error:null});case 4:return k.p=4,S=k.v,k.a(2,{data:null,error:identifyAuthenticationError({error:S,options:e})})}},_callee282,null,[[0,4]])}))).apply(this,arguments)}var Bu={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},Nu={userVerification:"preferred",hints:["security-key"]};function deepMerge(){for(var isObject=function(e){return null!==e&&"object"===_typeof3(e)&&!Array.isArray(e)},isArrayBufferLike=function(e){return e instanceof ArrayBuffer||ArrayBuffer.isView(e)},e={},_=arguments.length,S=new Array(_),k=0;k<_;k++)S[k]=arguments[k];for(var E=0,T=S;E<T.length;E++){var M=T[E];if(M)for(var I in M){var R=M[I];if(void 0!==R)if(Array.isArray(R))e[I]=R;else if(isArrayBufferLike(R))e[I]=R;else if(isObject(R)){var O=e[I];isObject(O)?e[I]=deepMerge(O,R):e[I]=deepMerge(R)}else e[I]=R}}return e}function mergeCredentialCreationOptions(e,_){return deepMerge(Bu,e,_||{})}function mergeCredentialRequestOptions(e,_){return deepMerge(Nu,e,_||{})}var zu=function(){return _createClass3(function WebAuthnApi(e){_classCallCheck3(this,WebAuthnApi),this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)},[{key:"_enroll",value:(E=_asyncToGenerator(_regenerator().m(function _callee133(e){return _regenerator().w(function(_){for(;;)if(0===_.n)return _.a(2,this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"})))},_callee133,this)})),function(e){return E.apply(this,arguments)})},{key:"_challenge",value:(k=_asyncToGenerator(_regenerator().m(function _callee134(e,_){var S,k,E,T,M,I,R,O,D,L,U,B,z,G,j,V,H,W,q;return _regenerator().w(function(X){for(;;)switch(X.p=X.n){case 0:return S=e.factorId,k=e.webauthn,E=e.friendlyName,T=e.signal,X.p=1,X.n=2,this.client.mfa.challenge({factorId:S,webauthn:k});case 2:if(M=X.v,I=M.data,R=M.error,I){X.n=3;break}return X.a(2,{data:null,error:R});case 3:O=null!=T?T:Uu.createNewAbortSignal(),"create"===I.webauthn.type&&((D=I.webauthn.credential_options.publicKey.user).name||(D.name="".concat(D.id,":").concat(E)),D.displayName||(D.displayName=D.name)),W=I.webauthn.type,X.n="create"===W?4:"request"===W?7:10;break;case 4:return L=mergeCredentialCreationOptions(I.webauthn.credential_options.publicKey,null==_?void 0:_.create),X.n=5,createCredential({publicKey:L,signal:O});case 5:if(U=X.v,B=U.data,z=U.error,!B){X.n=6;break}return X.a(2,{data:{factorId:S,challengeId:I.id,webauthn:{type:I.webauthn.type,credential_response:B}},error:null});case 6:return X.a(2,{data:null,error:z});case 7:return G=mergeCredentialRequestOptions(I.webauthn.credential_options.publicKey,null==_?void 0:_.request),X.n=8,getCredential(Object.assign(Object.assign({},I.webauthn.credential_options),{publicKey:G,signal:O}));case 8:if(j=X.v,V=j.data,H=j.error,!V){X.n=9;break}return X.a(2,{data:{factorId:S,challengeId:I.id,webauthn:{type:I.webauthn.type,credential_response:V}},error:null});case 9:return X.a(2,{data:null,error:H});case 10:X.n=13;break;case 11:if(X.p=11,!isAuthError(q=X.v)){X.n=12;break}return X.a(2,{data:null,error:q});case 12:return X.a(2,{data:null,error:new lu("Unexpected error in challenge",q)});case 13:return X.a(2)}},_callee134,this,[[1,11]])})),function(e,_){return k.apply(this,arguments)})},{key:"_verify",value:(S=_asyncToGenerator(_regenerator().m(function _callee135(e){var _,S,k;return _regenerator().w(function(E){for(;;)if(0===E.n)return _=e.challengeId,S=e.factorId,k=e.webauthn,E.a(2,this.client.mfa.verify({factorId:S,challengeId:_,webauthn:k}))},_callee135,this)})),function(e){return S.apply(this,arguments)})},{key:"_authenticate",value:(_=_asyncToGenerator(_regenerator().m(function _callee136(e,_){var S,k,E,T,M,I,R,O,D,L,U,B;return _regenerator().w(function(z){for(;;)switch(z.p=z.n){case 0:if(S=e.factorId,k=e.webauthn,E=k.rpId,T=void 0===E?"undefined"!=typeof window?window.location.hostname:void 0:E,M=k.rpOrigins,I=void 0===M?"undefined"!=typeof window?[window.location.origin]:void 0:M,R=k.signal,T){z.n=1;break}return z.a(2,{data:null,error:new su("rpId is required for WebAuthn authentication")});case 1:if(z.p=1,browserSupportsWebAuthn()){z.n=2;break}return z.a(2,{data:null,error:new lu("Browser does not support WebAuthn",null)});case 2:return z.n=3,this.challenge({factorId:S,webauthn:{rpId:T,rpOrigins:I},signal:R},{request:_});case 3:if(O=z.v,D=O.data,L=O.error,D){z.n=4;break}return z.a(2,{data:null,error:L});case 4:return U=D.webauthn,z.a(2,this._verify({factorId:S,challengeId:D.challengeId,webauthn:{type:U.type,rpId:T,rpOrigins:I,credential_response:U.credential_response}}));case 5:if(z.p=5,!isAuthError(B=z.v)){z.n=6;break}return z.a(2,{data:null,error:B});case 6:return z.a(2,{data:null,error:new lu("Unexpected error in authenticate",B)})}},_callee136,this,[[1,5]])})),function(e,S){return _.apply(this,arguments)})},{key:"_register",value:(e=_asyncToGenerator(_regenerator().m(function _callee137(e,_){var S,k,E,T,M,I,R,O,D,L,U,B,z,G=this;return _regenerator().w(function(j){for(;;)switch(j.p=j.n){case 0:if(S=e.friendlyName,k=e.rpId,E=void 0===k?"undefined"!=typeof window?window.location.hostname:void 0:k,T=e.rpOrigins,M=void 0===T?"undefined"!=typeof window?[window.location.origin]:void 0:T,I=e.signal,E){j.n=1;break}return j.a(2,{data:null,error:new su("rpId is required for WebAuthn registration")});case 1:if(j.p=1,browserSupportsWebAuthn()){j.n=2;break}return j.a(2,{data:null,error:new lu("Browser does not support WebAuthn",null)});case 2:return j.n=3,this._enroll({friendlyName:S});case 3:if(R=j.v,O=R.data,D=R.error,O){j.n=5;break}return j.n=4,this.client.mfa.listFactors().then(function(e){var _;return null===(_=e.data)||void 0===_?void 0:_.all.find(function(e){return"webauthn"===e.factor_type&&e.friendly_name===S&&"unverified"!==e.status})}).then(function(e){return e?G.client.mfa.unenroll({factorId:null==e?void 0:e.id}):void 0});case 4:return j.a(2,{data:null,error:D});case 5:return j.n=6,this._challenge({factorId:O.id,friendlyName:O.friendly_name,webauthn:{rpId:E,rpOrigins:M},signal:I},{create:_});case 6:if(L=j.v,U=L.data,B=L.error,U){j.n=7;break}return j.a(2,{data:null,error:B});case 7:return j.a(2,this._verify({factorId:O.id,challengeId:U.challengeId,webauthn:{rpId:E,rpOrigins:M,type:U.webauthn.type,credential_response:U.webauthn.credential_response}}));case 8:if(j.p=8,!isAuthError(z=j.v)){j.n=9;break}return j.a(2,{data:null,error:z});case 9:return j.a(2,{data:null,error:new lu("Unexpected error in register",z)})}},_callee137,this,[[1,8]])})),function(_,S){return e.apply(this,arguments)})}]);var e,_,S,k,E}();!function(){if("object"!==("undefined"==typeof globalThis?"undefined":_typeof3(globalThis)))try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(fo){"undefined"!=typeof self&&(self.globalThis=self)}}();var Gu={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:nu,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};function lockNoOp(e,_,S){return _lockNoOp.apply(this,arguments)}function _lockNoOp(){return(_lockNoOp=_asyncToGenerator(_regenerator().m(function _callee283(e,_,S){return _regenerator().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,S();case 1:return e.a(2,e.v)}},_callee283)}))).apply(this,arguments)}var ju={},Vu=function(){return _createClass3(function GoTrueClient(e){var _,S,k=this;_classCallCheck3(this,GoTrueClient),this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=GoTrueClient.nextInstanceID,GoTrueClient.nextInstanceID+=1,this.instanceID>0&&isBrowser();var E=Object.assign(Object.assign({},Gu),e);if(this.logDebugMessages=!!E.debug,"function"==typeof E.debug&&(this.logger=E.debug),this.persistSession=E.persistSession,this.storageKey=E.storageKey,this.autoRefreshToken=E.autoRefreshToken,this.admin=new Ru({url:E.url,headers:E.headers,fetch:E.fetch}),this.url=E.url,this.headers=E.headers,this.fetch=resolveFetch(E.fetch),this.lock=E.lock||lockNoOp,this.detectSessionInUrl=E.detectSessionInUrl,this.flowType=E.flowType,this.hasCustomAuthorizationHeader=E.hasCustomAuthorizationHeader,E.lock?this.lock=E.lock:isBrowser()&&(null===(_=null===globalThis||void 0===globalThis?void 0:globalThis.navigator)||void 0===_?void 0:_.locks)?this.lock=navigatorLock:this.lock=lockNoOp,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new zu(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this)},this.persistSession?(E.storage?this.storage=E.storage:supportsLocalStorage()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=memoryLocalStorageAdapter(this.memoryStorage)),E.userStorage&&(this.userStorage=E.userStorage)):(this.memoryStorage={},this.storage=memoryLocalStorageAdapter(this.memoryStorage)),isBrowser()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(fo){}null===(S=this.broadcastChannel)||void 0===S||S.addEventListener("message",function(){var e=_asyncToGenerator(_regenerator().m(function _callee138(e){return _regenerator().w(function(_){for(;;)switch(_.n){case 0:return k._debug("received broadcast notification from other tab or client",e),_.n=1,k._notifyAllSubscribers(e.data.event,e.data.session,!1);case 1:return _.a(2)}},_callee138)}));return function(_){return e.apply(this,arguments)}}())}this.initialize()},[{key:"jwks",get:function(){var e,_;return null!==(_=null===(e=ju[this.storageKey])||void 0===e?void 0:e.jwks)&&void 0!==_?_:{keys:[]}},set:function(e){ju[this.storageKey]=Object.assign(Object.assign({},ju[this.storageKey]),{jwks:e})}},{key:"jwks_cached_at",get:function(){var e,_;return null!==(_=null===(e=ju[this.storageKey])||void 0===e?void 0:e.cachedAt)&&void 0!==_?_:Number.MIN_SAFE_INTEGER},set:function(e){ju[this.storageKey]=Object.assign(Object.assign({},ju[this.storageKey]),{cachedAt:e})}},{key:"_debug",value:function(){if(this.logDebugMessages){for(var e=arguments.length,_=new Array(e),S=0;S<e;S++)_[S]=arguments[S];this.logger.apply(this,["GoTrueClient@".concat(this.instanceID," (").concat(eu,") ").concat((new Date).toISOString())].concat(_))}return this}},{key:"initialize",value:(Ne=_asyncToGenerator(_regenerator().m(function _callee141(){var e=this;return _regenerator().w(function(_){for(;;)switch(_.n){case 0:if(!this.initializePromise){_.n=2;break}return _.n=1,this.initializePromise;case 1:case 3:return _.a(2,_.v);case 2:return this.initializePromise=_asyncToGenerator(_regenerator().m(function _callee140(){return _regenerator().w(function(_){for(;;)switch(_.n){case 0:return _.n=1,e._acquireLock(-1,_asyncToGenerator(_regenerator().m(function _callee139(){return _regenerator().w(function(_){for(;;)switch(_.n){case 0:return _.n=1,e._initialize();case 1:return _.a(2,_.v)}},_callee139)})));case 1:return _.a(2,_.v)}},_callee140)}))(),_.n=3,this.initializePromise}},_callee141,this)})),function(){return Ne.apply(this,arguments)})},{key:"_initialize",value:(Be=_asyncToGenerator(_regenerator().m(function _callee143(){var e,_,S,k,E,T,M,I,R,O,D=this;return _regenerator().w(function(L){for(;;)switch(L.p=L.n){case 0:if(L.p=0,_=parseParametersFromURL(window.location.href),S="none",!this._isImplicitGrantCallback(_)){L.n=1;break}S="implicit",L.n=3;break;case 1:return L.n=2,this._isPKCECallback(_);case 2:if(!L.v){L.n=3;break}S="pkce";case 3:if(!isBrowser()||!this.detectSessionInUrl||"none"===S){L.n=9;break}return L.n=4,this._getSessionFromURL(_,S);case 4:if(k=L.v,E=k.data,!(T=k.error)){L.n=7;break}if(this._debug("#_initialize()","error detecting session from URL",T),!isAuthImplicitGrantRedirectError(T)){L.n=5;break}if("identity_already_exists"!==(M=null===(e=T.details)||void 0===e?void 0:e.code)&&"identity_not_found"!==M&&"single_identity_not_deletable"!==M){L.n=5;break}return L.a(2,{error:T});case 5:return L.n=6,this._removeSession();case 6:return L.a(2,{error:T});case 7:return I=E.session,R=E.redirectType,this._debug("#_initialize()","detected session in URL",I,"redirect type",R),L.n=8,this._saveSession(I);case 8:return setTimeout(_asyncToGenerator(_regenerator().m(function _callee142(){return _regenerator().w(function(e){for(;;)switch(e.n){case 0:if("recovery"!==R){e.n=2;break}return e.n=1,D._notifyAllSubscribers("PASSWORD_RECOVERY",I);case 1:e.n=3;break;case 2:return e.n=3,D._notifyAllSubscribers("SIGNED_IN",I);case 3:return e.a(2)}},_callee142)})),0),L.a(2,{error:null});case 9:return L.n=10,this._recoverAndRefresh();case 10:return L.a(2,{error:null});case 11:if(L.p=11,!isAuthError(O=L.v)){L.n=12;break}return L.a(2,{error:O});case 12:return L.a(2,{error:new lu("Unexpected error during initialization",O)});case 13:return L.p=13,L.n=14,this._handleVisibilityChange();case 14:return this._debug("#_initialize()","end"),L.f(13);case 15:return L.a(2)}},_callee143,this,[[0,11,13,15]])})),function(){return Be.apply(this,arguments)})},{key:"signInAnonymously",value:(Ue=_asyncToGenerator(_regenerator().m(function _callee144(e){var _,S,k,E,T,M,I,R,O;return _regenerator().w(function(D){for(;;)switch(D.p=D.n){case 0:return D.p=0,D.n=1,_request(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,body:{data:null!==(S=null===(_=null==e?void 0:e.options)||void 0===_?void 0:_.data)&&void 0!==S?S:{},gotrue_meta_security:{captcha_token:null===(k=null==e?void 0:e.options)||void 0===k?void 0:k.captchaToken}},xform:_sessionResponse});case 1:if(E=D.v,T=E.data,!(M=E.error)&&T){D.n=2;break}return D.a(2,{data:{user:null,session:null},error:M});case 2:if(I=T.session,R=T.user,!T.session){D.n=4;break}return D.n=3,this._saveSession(T.session);case 3:return D.n=4,this._notifyAllSubscribers("SIGNED_IN",I);case 4:return D.a(2,{data:{user:R,session:I},error:null});case 5:if(D.p=5,!isAuthError(O=D.v)){D.n=6;break}return D.a(2,{data:{user:null,session:null},error:O});case 6:throw O;case 7:return D.a(2)}},_callee144,this,[[0,5]])})),function(e){return Ue.apply(this,arguments)})},{key:"signUp",value:(Fe=_asyncToGenerator(_regenerator().m(function _callee145(e){var _,S,k,E,T,M,I,R,O,D,L,U,B,z,G,j,V,H,W,q;return _regenerator().w(function(X){for(;;)switch(X.p=X.n){case 0:if(X.p=0,!("email"in e)){X.n=4;break}if(T=e.email,M=e.password,I=e.options,R=null,O=null,"pkce"!==this.flowType){X.n=2;break}return X.n=1,getCodeChallengeAndMethod(this.storage,this.storageKey);case 1:D=X.v,L=_slicedToArray(D,2),R=L[0],O=L[1];case 2:return X.n=3,_request(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,redirectTo:null==I?void 0:I.emailRedirectTo,body:{email:T,password:M,data:null!==(_=null==I?void 0:I.data)&&void 0!==_?_:{},gotrue_meta_security:{captcha_token:null==I?void 0:I.captchaToken},code_challenge:R,code_challenge_method:O},xform:_sessionResponse});case 3:E=X.v,X.n=7;break;case 4:if(!("phone"in e)){X.n=6;break}return U=e.phone,B=e.password,z=e.options,X.n=5,_request(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,body:{phone:U,password:B,data:null!==(S=null==z?void 0:z.data)&&void 0!==S?S:{},channel:null!==(k=null==z?void 0:z.channel)&&void 0!==k?k:"sms",gotrue_meta_security:{captcha_token:null==z?void 0:z.captchaToken}},xform:_sessionResponse});case 5:E=X.v,X.n=7;break;case 6:throw new fu("You must provide either an email or phone number and a password");case 7:if(j=(G=E).data,!(V=G.error)&&j){X.n=8;break}return X.a(2,{data:{user:null,session:null},error:V});case 8:if(H=j.session,W=j.user,!j.session){X.n=10;break}return X.n=9,this._saveSession(j.session);case 9:return X.n=10,this._notifyAllSubscribers("SIGNED_IN",H);case 10:return X.a(2,{data:{user:W,session:H},error:null});case 11:if(X.p=11,!isAuthError(q=X.v)){X.n=12;break}return X.a(2,{data:{user:null,session:null},error:q});case 12:throw q;case 13:return X.a(2)}},_callee145,this,[[0,11]])})),function(e){return Fe.apply(this,arguments)})},{key:"signInWithPassword",value:(Le=_asyncToGenerator(_regenerator().m(function _callee146(e){var _,S,k,E,T,M,I,R,O,D,L;return _regenerator().w(function(U){for(;;)switch(U.p=U.n){case 0:if(U.p=0,!("email"in e)){U.n=2;break}return S=e.email,k=e.password,E=e.options,U.n=1,_request(this.fetch,"POST","".concat(this.url,"/token?grant_type=password"),{headers:this.headers,body:{email:S,password:k,gotrue_meta_security:{captcha_token:null==E?void 0:E.captchaToken}},xform:_sessionResponsePassword});case 1:case 3:_=U.v,U.n=5;break;case 2:if(!("phone"in e)){U.n=4;break}return T=e.phone,M=e.password,I=e.options,U.n=3,_request(this.fetch,"POST","".concat(this.url,"/token?grant_type=password"),{headers:this.headers,body:{phone:T,password:M,gotrue_meta_security:{captcha_token:null==I?void 0:I.captchaToken}},xform:_sessionResponsePassword});case 4:throw new fu("You must provide either an email or phone number and a password");case 5:if(O=(R=_).data,!(D=R.error)){U.n=6;break}return U.a(2,{data:{user:null,session:null},error:D});case 6:if(O&&O.session&&O.user){U.n=7;break}return U.a(2,{data:{user:null,session:null},error:new du});case 7:if(!O.session){U.n=9;break}return U.n=8,this._saveSession(O.session);case 8:return U.n=9,this._notifyAllSubscribers("SIGNED_IN",O.session);case 9:return U.a(2,{data:Object.assign({user:O.user,session:O.session},O.weak_password?{weakPassword:O.weak_password}:null),error:D});case 10:if(U.p=10,!isAuthError(L=U.v)){U.n=11;break}return U.a(2,{data:{user:null,session:null},error:L});case 11:throw L;case 12:return U.a(2)}},_callee146,this,[[0,10]])})),function(e){return Le.apply(this,arguments)})},{key:"signInWithOAuth",value:(De=_asyncToGenerator(_regenerator().m(function _callee147(e){var _,S,k,E;return _regenerator().w(function(T){for(;;)switch(T.n){case 0:return T.n=1,this._handleProviderSignIn(e.provider,{redirectTo:null===(_=e.options)||void 0===_?void 0:_.redirectTo,scopes:null===(S=e.options)||void 0===S?void 0:S.scopes,queryParams:null===(k=e.options)||void 0===k?void 0:k.queryParams,skipBrowserRedirect:null===(E=e.options)||void 0===E?void 0:E.skipBrowserRedirect});case 1:return T.a(2,T.v)}},_callee147,this)})),function(e){return De.apply(this,arguments)})},{key:"exchangeCodeForSession",value:(Oe=_asyncToGenerator(_regenerator().m(function _callee149(e){var _=this;return _regenerator().w(function(S){for(;;)switch(S.n){case 0:return S.n=1,this.initializePromise;case 1:return S.a(2,this._acquireLock(-1,_asyncToGenerator(_regenerator().m(function _callee148(){return _regenerator().w(function(S){for(;;)if(0===S.n)return S.a(2,_._exchangeCodeForSession(e))},_callee148)}))))}},_callee149,this)})),function(e){return Oe.apply(this,arguments)})},{key:"signInWithWeb3",value:(Pe=_asyncToGenerator(_regenerator().m(function _callee150(e){var _,S;return _regenerator().w(function(k){for(;;)switch(k.n){case 0:_=e.chain,S=_,k.n="ethereum"===S?1:"solana"===S?3:5;break;case 1:return k.n=2,this.signInWithEthereum(e);case 2:case 4:return k.a(2,k.v);case 3:return k.n=4,this.signInWithSolana(e);case 5:throw new Error('@supabase/auth-js: Unsupported chain "'.concat(_,'"'));case 6:return k.a(2)}},_callee150,this)})),function(e){return Pe.apply(this,arguments)})},{key:"signInWithEthereum",value:(Re=_asyncToGenerator(_regenerator().m(function _callee151(e){var _,S,k,E,T,M,I,R,O,D,L,U,B,z,G,j,V,H,W,q,X,Y,K,J,Q,Z,$,ee;return _regenerator().w(function(te){for(;;)switch(te.p=te.n){case 0:if(!("message"in e)){te.n=1;break}U=e.message,B=e.signature,te.n=12;break;case 1:if(e.chain,z=e.wallet,G=e.statement,j=e.options,isBrowser()){te.n=3;break}if("object"===_typeof3(z)&&(null==j?void 0:j.url)){te.n=2;break}throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");case 2:V=z,te.n=6;break;case 3:if("object"!==_typeof3(z)){te.n=4;break}V=z,te.n=6;break;case 4:if(!("ethereum"in(H=window))||"object"!==_typeof3(H.ethereum)||!("request"in H.ethereum)||"function"!=typeof H.ethereum.request){te.n=5;break}V=H.ethereum,te.n=6;break;case 5:throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.");case 6:return W=new URL(null!==(_=null==j?void 0:j.url)&&void 0!==_?_:window.location.href),te.n=7,V.request({method:"eth_requestAccounts"}).then(function(e){return e}).catch(function(){throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});case 7:if((q=te.v)&&0!==q.length){te.n=8;break}throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");case 8:if(X=getAddress(q[0]),Y=null===(S=null==j?void 0:j.signInWithEthereum)||void 0===S?void 0:S.chainId){te.n=10;break}return te.n=9,V.request({method:"eth_chainId"});case 9:K=te.v,Y=fromHex(K);case 10:return J={domain:W.host,address:X,statement:G,uri:W.href,version:"1",chainId:Y,nonce:null===(k=null==j?void 0:j.signInWithEthereum)||void 0===k?void 0:k.nonce,issuedAt:null!==(T=null===(E=null==j?void 0:j.signInWithEthereum)||void 0===E?void 0:E.issuedAt)&&void 0!==T?T:new Date,expirationTime:null===(M=null==j?void 0:j.signInWithEthereum)||void 0===M?void 0:M.expirationTime,notBefore:null===(I=null==j?void 0:j.signInWithEthereum)||void 0===I?void 0:I.notBefore,requestId:null===(R=null==j?void 0:j.signInWithEthereum)||void 0===R?void 0:R.requestId,resources:null===(O=null==j?void 0:j.signInWithEthereum)||void 0===O?void 0:O.resources},U=createSiweMessage(J),te.n=11,V.request({method:"personal_sign",params:[toHex(U),X]});case 11:B=te.v;case 12:return te.p=12,te.n=13,_request(this.fetch,"POST","".concat(this.url,"/token?grant_type=web3"),{headers:this.headers,body:Object.assign({chain:"ethereum",message:U,signature:B},(null===(D=e.options)||void 0===D?void 0:D.captchaToken)?{gotrue_meta_security:{captcha_token:null===(L=e.options)||void 0===L?void 0:L.captchaToken}}:null),xform:_sessionResponse});case 13:if(Q=te.v,Z=Q.data,!($=Q.error)){te.n=14;break}throw $;case 14:if(Z&&Z.session&&Z.user){te.n=15;break}return te.a(2,{data:{user:null,session:null},error:new du});case 15:if(!Z.session){te.n=17;break}return te.n=16,this._saveSession(Z.session);case 16:return te.n=17,this._notifyAllSubscribers("SIGNED_IN",Z.session);case 17:return te.a(2,{data:Object.assign({},Z),error:$});case 18:if(te.p=18,!isAuthError(ee=te.v)){te.n=19;break}return te.a(2,{data:{user:null,session:null},error:ee});case 19:throw ee;case 20:return te.a(2)}},_callee151,this,[[12,18]])})),function(e){return Re.apply(this,arguments)})},{key:"signInWithSolana",value:(Ie=_asyncToGenerator(_regenerator().m(function _callee152(e){var _,S,k,E,T,M,I,R,O,D,L,U,B,z,G,j,V,H,W,q,X,Y,K,J,Q,Z,$;return _regenerator().w(function(ee){for(;;)switch(ee.p=ee.n){case 0:if(!("message"in e)){ee.n=1;break}B=e.message,z=e.signature,ee.n=17;break;case 1:if(e.chain,G=e.wallet,j=e.statement,V=e.options,isBrowser()){ee.n=3;break}if("object"===_typeof3(G)&&(null==V?void 0:V.url)){ee.n=2;break}throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");case 2:H=G,ee.n=6;break;case 3:if("object"!==_typeof3(G)){ee.n=4;break}H=G,ee.n=6;break;case 4:if(!("solana"in(W=window))||"object"!==_typeof3(W.solana)||!("signIn"in W.solana&&"function"==typeof W.solana.signIn||"signMessage"in W.solana&&"function"==typeof W.solana.signMessage)){ee.n=5;break}H=W.solana,ee.n=6;break;case 5:throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.");case 6:if(q=new URL(null!==(_=null==V?void 0:V.url)&&void 0!==_?_:window.location.href),!("signIn"in H)||!H.signIn){ee.n=13;break}return ee.n=7,H.signIn(Object.assign(Object.assign(Object.assign({issuedAt:(new Date).toISOString()},null==V?void 0:V.signInWithSolana),{version:"1",domain:q.host,uri:q.href}),j?{statement:j}:null));case 7:if(X=ee.v,!Array.isArray(X)||!X[0]||"object"!==_typeof3(X[0])){ee.n=8;break}Y=X[0],ee.n=10;break;case 8:if(!(X&&"object"===_typeof3(X)&&"signedMessage"in X&&"signature"in X)){ee.n=9;break}Y=X,ee.n=10;break;case 9:throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");case 10:if(!("signedMessage"in Y&&"signature"in Y&&("string"==typeof Y.signedMessage||Y.signedMessage instanceof Uint8Array)&&Y.signature instanceof Uint8Array)){ee.n=11;break}B="string"==typeof Y.signedMessage?Y.signedMessage:(new TextDecoder).decode(Y.signedMessage),z=Y.signature,ee.n=12;break;case 11:throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields");case 12:ee.n=17;break;case 13:if("signMessage"in H&&"function"==typeof H.signMessage&&"publicKey"in H&&"object"===_typeof3(H)&&H.publicKey&&"toBase58"in H.publicKey&&"function"==typeof H.publicKey.toBase58){ee.n=14;break}throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");case 14:return B=["".concat(q.host," wants you to sign in with your Solana account:"),H.publicKey.toBase58()].concat(_toConsumableArray3(j?["",j,""]:[""]),["Version: 1","URI: ".concat(q.href),"Issued At: ".concat(null!==(k=null===(S=null==V?void 0:V.signInWithSolana)||void 0===S?void 0:S.issuedAt)&&void 0!==k?k:(new Date).toISOString())],_toConsumableArray3((null===(E=null==V?void 0:V.signInWithSolana)||void 0===E?void 0:E.notBefore)?["Not Before: ".concat(V.signInWithSolana.notBefore)]:[]),_toConsumableArray3((null===(T=null==V?void 0:V.signInWithSolana)||void 0===T?void 0:T.expirationTime)?["Expiration Time: ".concat(V.signInWithSolana.expirationTime)]:[]),_toConsumableArray3((null===(M=null==V?void 0:V.signInWithSolana)||void 0===M?void 0:M.chainId)?["Chain ID: ".concat(V.signInWithSolana.chainId)]:[]),_toConsumableArray3((null===(I=null==V?void 0:V.signInWithSolana)||void 0===I?void 0:I.nonce)?["Nonce: ".concat(V.signInWithSolana.nonce)]:[]),_toConsumableArray3((null===(R=null==V?void 0:V.signInWithSolana)||void 0===R?void 0:R.requestId)?["Request ID: ".concat(V.signInWithSolana.requestId)]:[]),_toConsumableArray3((null===(D=null===(O=null==V?void 0:V.signInWithSolana)||void 0===O?void 0:O.resources)||void 0===D?void 0:D.length)?["Resources"].concat(_toConsumableArray3(V.signInWithSolana.resources.map(function(e){return"- ".concat(e)}))):[])).join("\n"),ee.n=15,H.signMessage((new TextEncoder).encode(B),"utf8");case 15:if((K=ee.v)&&K instanceof Uint8Array){ee.n=16;break}throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");case 16:z=K;case 17:return ee.p=17,ee.n=18,_request(this.fetch,"POST","".concat(this.url,"/token?grant_type=web3"),{headers:this.headers,body:Object.assign({chain:"solana",message:B,signature:bytesToBase64URL(z)},(null===(L=e.options)||void 0===L?void 0:L.captchaToken)?{gotrue_meta_security:{captcha_token:null===(U=e.options)||void 0===U?void 0:U.captchaToken}}:null),xform:_sessionResponse});case 18:if(J=ee.v,Q=J.data,!(Z=J.error)){ee.n=19;break}throw Z;case 19:if(Q&&Q.session&&Q.user){ee.n=20;break}return ee.a(2,{data:{user:null,session:null},error:new du});case 20:if(!Q.session){ee.n=22;break}return ee.n=21,this._saveSession(Q.session);case 21:return ee.n=22,this._notifyAllSubscribers("SIGNED_IN",Q.session);case 22:return ee.a(2,{data:Object.assign({},Q),error:Z});case 23:if(ee.p=23,!isAuthError($=ee.v)){ee.n=24;break}return ee.a(2,{data:{user:null,session:null},error:$});case 24:throw $;case 25:return ee.a(2)}},_callee152,this,[[17,23]])})),function(e){return Ie.apply(this,arguments)})},{key:"_exchangeCodeForSession",value:(Me=_asyncToGenerator(_regenerator().m(function _callee153(e){var _,S,k,E,T,M,I,R,O;return _regenerator().w(function(D){for(;;)switch(D.p=D.n){case 0:return D.n=1,ku(this.storage,"".concat(this.storageKey,"-code-verifier"));case 1:return _=D.v,S=(null!=_?_:"").split("/"),k=_slicedToArray(S,2),E=k[0],T=k[1],D.p=2,D.n=3,_request(this.fetch,"POST","".concat(this.url,"/token?grant_type=pkce"),{headers:this.headers,body:{auth_code:e,code_verifier:E},xform:_sessionResponse});case 3:return M=D.v,I=M.data,R=M.error,D.n=4,Cu(this.storage,"".concat(this.storageKey,"-code-verifier"));case 4:if(!R){D.n=5;break}throw R;case 5:if(I&&I.session&&I.user){D.n=6;break}return D.a(2,{data:{user:null,session:null,redirectType:null},error:new du});case 6:if(!I.session){D.n=8;break}return D.n=7,this._saveSession(I.session);case 7:return D.n=8,this._notifyAllSubscribers("SIGNED_IN",I.session);case 8:return D.a(2,{data:Object.assign(Object.assign({},I),{redirectType:null!=T?T:null}),error:R});case 9:if(D.p=9,!isAuthError(O=D.v)){D.n=10;break}return D.a(2,{data:{user:null,session:null,redirectType:null},error:O});case 10:throw O;case 11:return D.a(2)}},_callee153,this,[[2,9]])})),function(e){return Me.apply(this,arguments)})},{key:"signInWithIdToken",value:(Te=_asyncToGenerator(_regenerator().m(function _callee154(e){var _,S,k,E,T,M,I,R,O;return _regenerator().w(function(D){for(;;)switch(D.p=D.n){case 0:return D.p=0,_=e.options,S=e.provider,k=e.token,E=e.access_token,T=e.nonce,D.n=1,_request(this.fetch,"POST","".concat(this.url,"/token?grant_type=id_token"),{headers:this.headers,body:{provider:S,id_token:k,access_token:E,nonce:T,gotrue_meta_security:{captcha_token:null==_?void 0:_.captchaToken}},xform:_sessionResponse});case 1:if(M=D.v,I=M.data,!(R=M.error)){D.n=2;break}return D.a(2,{data:{user:null,session:null},error:R});case 2:if(I&&I.session&&I.user){D.n=3;break}return D.a(2,{data:{user:null,session:null},error:new du});case 3:if(!I.session){D.n=5;break}return D.n=4,this._saveSession(I.session);case 4:return D.n=5,this._notifyAllSubscribers("SIGNED_IN",I.session);case 5:return D.a(2,{data:I,error:R});case 6:if(D.p=6,!isAuthError(O=D.v)){D.n=7;break}return D.a(2,{data:{user:null,session:null},error:O});case 7:throw O;case 8:return D.a(2)}},_callee154,this,[[0,6]])})),function(e){return Te.apply(this,arguments)})},{key:"signInWithOtp",value:(Ee=_asyncToGenerator(_regenerator().m(function _callee155(e){var _,S,k,E,T,M,I,R,O,D,L,U,B,z,G,j,V,H,W;return _regenerator().w(function(q){for(;;)switch(q.p=q.n){case 0:if(q.p=0,!("email"in e)){q.n=4;break}if(M=e.email,I=e.options,R=null,O=null,"pkce"!==this.flowType){q.n=2;break}return q.n=1,getCodeChallengeAndMethod(this.storage,this.storageKey);case 1:D=q.v,L=_slicedToArray(D,2),R=L[0],O=L[1];case 2:return q.n=3,_request(this.fetch,"POST","".concat(this.url,"/otp"),{headers:this.headers,body:{email:M,data:null!==(_=null==I?void 0:I.data)&&void 0!==_?_:{},create_user:null===(S=null==I?void 0:I.shouldCreateUser)||void 0===S||S,gotrue_meta_security:{captcha_token:null==I?void 0:I.captchaToken},code_challenge:R,code_challenge_method:O},redirectTo:null==I?void 0:I.emailRedirectTo});case 3:return U=q.v,B=U.error,q.a(2,{data:{user:null,session:null},error:B});case 4:if(!("phone"in e)){q.n=6;break}return z=e.phone,G=e.options,q.n=5,_request(this.fetch,"POST","".concat(this.url,"/otp"),{headers:this.headers,body:{phone:z,data:null!==(k=null==G?void 0:G.data)&&void 0!==k?k:{},create_user:null===(E=null==G?void 0:G.shouldCreateUser)||void 0===E||E,gotrue_meta_security:{captcha_token:null==G?void 0:G.captchaToken},channel:null!==(T=null==G?void 0:G.channel)&&void 0!==T?T:"sms"}});case 5:return j=q.v,V=j.data,H=j.error,q.a(2,{data:{user:null,session:null,messageId:null==V?void 0:V.message_id},error:H});case 6:throw new fu("You must provide either an email or phone number.");case 7:if(q.p=7,!isAuthError(W=q.v)){q.n=8;break}return q.a(2,{data:{user:null,session:null},error:W});case 8:throw W;case 9:return q.a(2)}},_callee155,this,[[0,7]])})),function(e){return Ee.apply(this,arguments)})},{key:"verifyOtp",value:(Ae=_asyncToGenerator(_regenerator().m(function _callee156(e){var _,S,k,E,T,M,I,R,O,D;return _regenerator().w(function(L){for(;;)switch(L.p=L.n){case 0:return L.p=0,k=void 0,E=void 0,"options"in e&&(k=null===(_=e.options)||void 0===_?void 0:_.redirectTo,E=null===(S=e.options)||void 0===S?void 0:S.captchaToken),L.n=1,_request(this.fetch,"POST","".concat(this.url,"/verify"),{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:E}}),redirectTo:k,xform:_sessionResponse});case 1:if(T=L.v,M=T.data,!(I=T.error)){L.n=2;break}throw I;case 2:if(M){L.n=3;break}throw new Error("An error occurred on token verification.");case 3:if(R=M.session,O=M.user,!(null==R?void 0:R.access_token)){L.n=5;break}return L.n=4,this._saveSession(R);case 4:return L.n=5,this._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",R);case 5:return L.a(2,{data:{user:O,session:R},error:null});case 6:if(L.p=6,!isAuthError(D=L.v)){L.n=7;break}return L.a(2,{data:{user:null,session:null},error:D});case 7:throw D;case 8:return L.a(2)}},_callee156,this,[[0,6]])})),function(e){return Ae.apply(this,arguments)})},{key:"signInWithSSO",value:(Ce=_asyncToGenerator(_regenerator().m(function _callee157(e){var _,S,k,E,T,M,I,R;return _regenerator().w(function(O){for(;;)switch(O.p=O.n){case 0:if(O.p=0,E=null,T=null,"pkce"!==this.flowType){O.n=2;break}return O.n=1,getCodeChallengeAndMethod(this.storage,this.storageKey);case 1:M=O.v,I=_slicedToArray(M,2),E=I[0],T=I[1];case 2:return O.n=3,_request(this.fetch,"POST","".concat(this.url,"/sso"),{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(S=null===(_=e.options)||void 0===_?void 0:_.redirectTo)&&void 0!==S?S:void 0}),(null===(k=null==e?void 0:e.options)||void 0===k?void 0:k.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:E,code_challenge_method:T}),headers:this.headers,xform:_ssoResponse});case 3:return O.a(2,O.v);case 4:if(O.p=4,!isAuthError(R=O.v)){O.n=5;break}return O.a(2,{data:null,error:R});case 5:throw R;case 6:return O.a(2)}},_callee157,this,[[0,4]])})),function(e){return Ce.apply(this,arguments)})},{key:"reauthenticate",value:(ke=_asyncToGenerator(_regenerator().m(function _callee159(){var e=this;return _regenerator().w(function(_){for(;;)switch(_.n){case 0:return _.n=1,this.initializePromise;case 1:return _.n=2,this._acquireLock(-1,_asyncToGenerator(_regenerator().m(function _callee158(){return _regenerator().w(function(_){for(;;)switch(_.n){case 0:return _.n=1,e._reauthenticate();case 1:return _.a(2,_.v)}},_callee158)})));case 2:return _.a(2,_.v)}},_callee159,this)})),function(){return ke.apply(this,arguments)})},{key:"_reauthenticate",value:(xe=_asyncToGenerator(_regenerator().m(function _callee161(){var e,_=this;return _regenerator().w(function(S){for(;;)switch(S.p=S.n){case 0:return S.p=0,S.n=1,this._useSession(function(){var e=_asyncToGenerator(_regenerator().m(function _callee160(e){var S,k,E,T;return _regenerator().w(function(M){for(;;)switch(M.n){case 0:if(S=e.data.session,!(k=e.error)){M.n=1;break}throw k;case 1:if(S){M.n=2;break}throw new hu;case 2:return M.n=3,_request(_.fetch,"GET","".concat(_.url,"/reauthenticate"),{headers:_.headers,jwt:S.access_token});case 3:return E=M.v,T=E.error,M.a(2,{data:{user:null,session:null},error:T})}},_callee160)}));return function(_){return e.apply(this,arguments)}}());case 1:return S.a(2,S.v);case 2:if(S.p=2,!isAuthError(e=S.v)){S.n=3;break}return S.a(2,{data:{user:null,session:null},error:e});case 3:throw e;case 4:return S.a(2)}},_callee161,this,[[0,2]])})),function(){return xe.apply(this,arguments)})},{key:"resend",value:(we=_asyncToGenerator(_regenerator().m(function _callee162(e){var _,S,k,E,T,M,I,R,O,D,L,U,B;return _regenerator().w(function(z){for(;;)switch(z.p=z.n){case 0:if(z.p=0,_="".concat(this.url,"/resend"),!("email"in e)){z.n=2;break}return S=e.email,k=e.type,E=e.options,z.n=1,_request(this.fetch,"POST",_,{headers:this.headers,body:{email:S,type:k,gotrue_meta_security:{captcha_token:null==E?void 0:E.captchaToken}},redirectTo:null==E?void 0:E.emailRedirectTo});case 1:return T=z.v,M=T.error,z.a(2,{data:{user:null,session:null},error:M});case 2:if(!("phone"in e)){z.n=4;break}return I=e.phone,R=e.type,O=e.options,z.n=3,_request(this.fetch,"POST",_,{headers:this.headers,body:{phone:I,type:R,gotrue_meta_security:{captcha_token:null==O?void 0:O.captchaToken}}});case 3:return D=z.v,L=D.data,U=D.error,z.a(2,{data:{user:null,session:null,messageId:null==L?void 0:L.message_id},error:U});case 4:throw new fu("You must provide either an email or phone number and a type");case 5:if(z.p=5,!isAuthError(B=z.v)){z.n=6;break}return z.a(2,{data:{user:null,session:null},error:B});case 6:throw B;case 7:return z.a(2)}},_callee162,this,[[0,5]])})),function(e){return we.apply(this,arguments)})},{key:"getSession",value:(Se=_asyncToGenerator(_regenerator().m(function _callee165(){var e,_=this;return _regenerator().w(function(S){for(;;)switch(S.n){case 0:return S.n=1,this.initializePromise;case 1:return S.n=2,this._acquireLock(-1,_asyncToGenerator(_regenerator().m(function _callee164(){return _regenerator().w(function(e){for(;;)if(0===e.n)return e.a(2,_._useSession(function(){var e=_asyncToGenerator(_regenerator().m(function _callee163(e){return _regenerator().w(function(_){for(;;)if(0===_.n)return _.a(2,e)},_callee163)}));return function(_){return e.apply(this,arguments)}}()))},_callee164)})));case 2:return e=S.v,S.a(2,e)}},_callee165,this)})),function(){return Se.apply(this,arguments)})},{key:"_acquireLock",value:(be=_asyncToGenerator(_regenerator().m(function _callee170(e,_){var S,k,E=this;return _regenerator().w(function(T){for(;;)switch(T.p=T.n){case 0:if(this._debug("#_acquireLock","begin",e),T.p=1,!this.lockAcquired){T.n=2;break}return S=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),k=_asyncToGenerator(_regenerator().m(function _callee166(){return _regenerator().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,S;case 1:return e.n=2,_();case 2:return e.a(2,e.v)}},_callee166)}))(),this.pendingInLock.push(_asyncToGenerator(_regenerator().m(function _callee167(){return _regenerator().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,k;case 1:e.n=3;break;case 2:e.p=2,e.v;case 3:return e.a(2)}},_callee167,null,[[0,2]])}))()),T.a(2,k);case 2:return T.n=3,this.lock("lock:".concat(this.storageKey),e,_asyncToGenerator(_regenerator().m(function _callee169(){var e,S;return _regenerator().w(function(k){for(;;)switch(k.p=k.n){case 0:return E._debug("#_acquireLock","lock acquired for storage key",E.storageKey),k.p=1,E.lockAcquired=!0,e=_(),E.pendingInLock.push(_asyncToGenerator(_regenerator().m(function _callee168(){return _regenerator().w(function(_){for(;;)switch(_.p=_.n){case 0:return _.p=0,_.n=1,e;case 1:_.n=3;break;case 2:_.p=2,_.v;case 3:return _.a(2)}},_callee168,null,[[0,2]])}))()),k.n=2,e;case 2:if(!E.pendingInLock.length){k.n=4;break}return S=_toConsumableArray3(E.pendingInLock),k.n=3,Promise.all(S);case 3:E.pendingInLock.splice(0,S.length),k.n=2;break;case 4:return k.n=5,e;case 5:return k.a(2,k.v);case 6:return k.p=6,E._debug("#_acquireLock","lock released for storage key",E.storageKey),E.lockAcquired=!1,k.f(6);case 7:return k.a(2)}},_callee169,null,[[1,,6,7]])})));case 3:return T.a(2,T.v);case 4:return T.p=4,this._debug("#_acquireLock","end"),T.f(4);case 5:return T.a(2)}},_callee170,this,[[1,,4,5]])})),function(e,_){return be.apply(this,arguments)})},{key:"_useSession",value:(_e=_asyncToGenerator(_regenerator().m(function _callee171(e){var _;return _regenerator().w(function(S){for(;;)switch(S.p=S.n){case 0:return this._debug("#_useSession","begin"),S.p=1,S.n=2,this.__loadSession();case 2:return _=S.v,S.n=3,e(_);case 3:return S.a(2,S.v);case 4:return S.p=4,this._debug("#_useSession","end"),S.f(4);case 5:return S.a(2)}},_callee171,this,[[1,,4,5]])})),function(e){return _e.apply(this,arguments)})},{key:"__loadSession",value:(ye=_asyncToGenerator(_regenerator().m(function _callee172(){var e,_,S,k,E,T,M,I;return _regenerator().w(function(R){for(;;)switch(R.p=R.n){case 0:return this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack),R.p=1,e=null,R.n=2,ku(this.storage,this.storageKey);case 2:if(_=R.v,this._debug("#getSession()","session from storage",_),null===_){R.n=4;break}if(!this._isValidSession(_)){R.n=3;break}e=_,R.n=4;break;case 3:return this._debug("#getSession()","session from storage is not valid"),R.n=4,this._removeSession();case 4:if(e){R.n=5;break}return R.a(2,{data:{session:null},error:null});case 5:if(S=!!e.expires_at&&1e3*e.expires_at-Date.now()<ru,this._debug("#__loadSession()","session has".concat(S?"":" not"," expired"),"expires_at",e.expires_at),S){R.n=8;break}if(!this.userStorage){R.n=7;break}return R.n=6,ku(this.userStorage,this.storageKey+"-user");case 6:(null==(k=R.v)?void 0:k.user)?e.user=k.user:e.user=userNotAvailableProxy();case 7:return this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy&&(E={value:this.suppressGetSessionWarning},e.user=insecureUserWarningProxy(e.user,E),E.value&&(this.suppressGetSessionWarning=!0)),R.a(2,{data:{session:e},error:null});case 8:return R.n=9,this._callRefreshToken(e.refresh_token);case 9:if(T=R.v,M=T.data,!(I=T.error)){R.n=10;break}return R.a(2,{data:{session:null},error:I});case 10:return R.a(2,{data:{session:M},error:null});case 11:return R.p=11,this._debug("#__loadSession()","end"),R.f(11);case 12:return R.a(2)}},_callee172,this,[[1,,11,12]])})),function(){return ye.apply(this,arguments)})},{key:"getUser",value:(me=_asyncToGenerator(_regenerator().m(function _callee174(e){var _,S=this;return _regenerator().w(function(k){for(;;)switch(k.n){case 0:if(!e){k.n=2;break}return k.n=1,this._getUser(e);case 1:return k.a(2,k.v);case 2:return k.n=3,this.initializePromise;case 3:return k.n=4,this._acquireLock(-1,_asyncToGenerator(_regenerator().m(function _callee173(){return _regenerator().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,S._getUser();case 1:return e.a(2,e.v)}},_callee173)})));case 4:return _=k.v,k.a(2,_)}},_callee174,this)})),function(e){return me.apply(this,arguments)})},{key:"_getUser",value:(ge=_asyncToGenerator(_regenerator().m(function _callee176(e){var _,S=this;return _regenerator().w(function(k){for(;;)switch(k.p=k.n){case 0:if(k.p=0,!e){k.n=2;break}return k.n=1,_request(this.fetch,"GET","".concat(this.url,"/user"),{headers:this.headers,jwt:e,xform:_userResponse});case 1:case 3:return k.a(2,k.v);case 2:return k.n=3,this._useSession(function(){var e=_asyncToGenerator(_regenerator().m(function _callee175(e){var _,k,E,T,M;return _regenerator().w(function(I){for(;;)switch(I.n){case 0:if(T=e.data,!(M=e.error)){I.n=1;break}throw M;case 1:if((null===(_=T.session)||void 0===_?void 0:_.access_token)||S.hasCustomAuthorizationHeader){I.n=2;break}return I.a(2,{data:{user:null},error:new hu});case 2:return I.n=3,_request(S.fetch,"GET","".concat(S.url,"/user"),{headers:S.headers,jwt:null!==(E=null===(k=T.session)||void 0===k?void 0:k.access_token)&&void 0!==E?E:void 0,xform:_userResponse});case 3:return I.a(2,I.v)}},_callee175)}));return function(_){return e.apply(this,arguments)}}());case 4:if(k.p=4,!isAuthError(_=k.v)){k.n=7;break}if(!isAuthSessionMissingError(_)){k.n=6;break}return k.n=5,this._removeSession();case 5:return k.n=6,Cu(this.storage,"".concat(this.storageKey,"-code-verifier"));case 6:return k.a(2,{data:{user:null},error:_});case 7:throw _;case 8:return k.a(2)}},_callee176,this,[[0,4]])})),function(e){return ge.apply(this,arguments)})},{key:"updateUser",value:(ve=_asyncToGenerator(_regenerator().m(function _callee178(e){var _,S=this,k=arguments;return _regenerator().w(function(E){for(;;)switch(E.n){case 0:return _=k.length>1&&void 0!==k[1]?k[1]:{},E.n=1,this.initializePromise;case 1:return E.n=2,this._acquireLock(-1,_asyncToGenerator(_regenerator().m(function _callee177(){return _regenerator().w(function(k){for(;;)switch(k.n){case 0:return k.n=1,S._updateUser(e,_);case 1:return k.a(2,k.v)}},_callee177)})));case 2:return E.a(2,E.v)}},_callee178,this)})),function(e){return ve.apply(this,arguments)})},{key:"_updateUser",value:(pe=_asyncToGenerator(_regenerator().m(function _callee180(e){var _,S,k=this,E=arguments;return _regenerator().w(function(T){for(;;)switch(T.p=T.n){case 0:return _=E.length>1&&void 0!==E[1]?E[1]:{},T.p=1,T.n=2,this._useSession(function(){var S=_asyncToGenerator(_regenerator().m(function _callee179(S){var E,T,M,I,R,O,D,L,U,B;return _regenerator().w(function(z){for(;;)switch(z.n){case 0:if(E=S.data,!(T=S.error)){z.n=1;break}throw T;case 1:if(E.session){z.n=2;break}throw new hu;case 2:if(M=E.session,I=null,R=null,"pkce"!==k.flowType||null==e.email){z.n=4;break}return z.n=3,getCodeChallengeAndMethod(k.storage,k.storageKey);case 3:O=z.v,D=_slicedToArray(O,2),I=D[0],R=D[1];case 4:return z.n=5,_request(k.fetch,"PUT","".concat(k.url,"/user"),{headers:k.headers,redirectTo:null==_?void 0:_.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:I,code_challenge_method:R}),jwt:M.access_token,xform:_userResponse});case 5:if(L=z.v,U=L.data,!(B=L.error)){z.n=6;break}throw B;case 6:return M.user=U.user,z.n=7,k._saveSession(M);case 7:return z.n=8,k._notifyAllSubscribers("USER_UPDATED",M);case 8:return z.a(2,{data:{user:M.user},error:null})}},_callee179)}));return function(e){return S.apply(this,arguments)}}());case 2:return T.a(2,T.v);case 3:if(T.p=3,!isAuthError(S=T.v)){T.n=4;break}return T.a(2,{data:{user:null},error:S});case 4:throw S;case 5:return T.a(2)}},_callee180,this,[[1,3]])})),function(e){return pe.apply(this,arguments)})},{key:"setSession",value:(fe=_asyncToGenerator(_regenerator().m(function _callee182(e){var _=this;return _regenerator().w(function(S){for(;;)switch(S.n){case 0:return S.n=1,this.initializePromise;case 1:return S.n=2,this._acquireLock(-1,_asyncToGenerator(_regenerator().m(function _callee181(){return _regenerator().w(function(S){for(;;)switch(S.n){case 0:return S.n=1,_._setSession(e);case 1:return S.a(2,S.v)}},_callee181)})));case 2:return S.a(2,S.v)}},_callee182,this)})),function(e){return fe.apply(this,arguments)})},{key:"_setSession",value:(de=_asyncToGenerator(_regenerator().m(function _callee183(e){var _,S,k,E,T,M,I,R,O,D,L,U,B;return _regenerator().w(function(z){for(;;)switch(z.p=z.n){case 0:if(z.p=0,e.access_token&&e.refresh_token){z.n=1;break}throw new hu;case 1:if(_=Date.now()/1e3,S=_,k=!0,E=null,T=decodeJWT(e.access_token),(M=T.payload).exp&&(S=M.exp,k=S<=_),!k){z.n=5;break}return z.n=2,this._callRefreshToken(e.refresh_token);case 2:if(I=z.v,R=I.data,!(O=I.error)){z.n=3;break}return z.a(2,{data:{user:null,session:null},error:O});case 3:if(R){z.n=4;break}return z.a(2,{data:{user:null,session:null},error:null});case 4:E=R,z.n=9;break;case 5:return z.n=6,this._getUser(e.access_token);case 6:if(D=z.v,L=D.data,!(U=D.error)){z.n=7;break}throw U;case 7:return E={access_token:e.access_token,refresh_token:e.refresh_token,user:L.user,token_type:"bearer",expires_in:S-_,expires_at:S},z.n=8,this._saveSession(E);case 8:return z.n=9,this._notifyAllSubscribers("SIGNED_IN",E);case 9:return z.a(2,{data:{user:E.user,session:E},error:null});case 10:if(z.p=10,!isAuthError(B=z.v)){z.n=11;break}return z.a(2,{data:{session:null,user:null},error:B});case 11:throw B;case 12:return z.a(2)}},_callee183,this,[[0,10]])})),function(e){return de.apply(this,arguments)})},{key:"refreshSession",value:(he=_asyncToGenerator(_regenerator().m(function _callee185(e){var _=this;return _regenerator().w(function(S){for(;;)switch(S.n){case 0:return S.n=1,this.initializePromise;case 1:return S.n=2,this._acquireLock(-1,_asyncToGenerator(_regenerator().m(function _callee184(){return _regenerator().w(function(S){for(;;)switch(S.n){case 0:return S.n=1,_._refreshSession(e);case 1:return S.a(2,S.v)}},_callee184)})));case 2:return S.a(2,S.v)}},_callee185,this)})),function(e){return he.apply(this,arguments)})},{key:"_refreshSession",value:(ce=_asyncToGenerator(_regenerator().m(function _callee187(e){var _,S=this;return _regenerator().w(function(k){for(;;)switch(k.p=k.n){case 0:return k.p=0,k.n=1,this._useSession(function(){var _=_asyncToGenerator(_regenerator().m(function _callee186(_){var k,E,T,M,I,R;return _regenerator().w(function(O){for(;;)switch(O.n){case 0:if(e){O.n=2;break}if(E=_.data,!(T=_.error)){O.n=1;break}throw T;case 1:e=null!==(k=E.session)&&void 0!==k?k:void 0;case 2:if(null==e?void 0:e.refresh_token){O.n=3;break}throw new hu;case 3:return O.n=4,S._callRefreshToken(e.refresh_token);case 4:if(M=O.v,I=M.data,!(R=M.error)){O.n=5;break}return O.a(2,{data:{user:null,session:null},error:R});case 5:if(I){O.n=6;break}return O.a(2,{data:{user:null,session:null},error:null});case 6:return O.a(2,{data:{user:I.user,session:I},error:null})}},_callee186)}));return function(e){return _.apply(this,arguments)}}());case 1:return k.a(2,k.v);case 2:if(k.p=2,!isAuthError(_=k.v)){k.n=3;break}return k.a(2,{data:{user:null,session:null},error:_});case 3:throw _;case 4:return k.a(2)}},_callee187,this,[[0,2]])})),function(e){return ce.apply(this,arguments)})},{key:"_getSessionFromURL",value:(le=_asyncToGenerator(_regenerator().m(function _callee188(e,_){var S,k,E,T,M,I,R,O,D,L,U,B,z,G,j,V,H,W,q,X;return _regenerator().w(function(Y){for(;;)switch(Y.p=Y.n){case 0:if(Y.p=0,isBrowser()){Y.n=1;break}throw new pu("No browser detected.");case 1:if(!(e.error||e.error_description||e.error_code)){Y.n=2;break}throw new pu(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});case 2:q=_,Y.n="implicit"===q?3:"pkce"===q?5:7;break;case 3:if("pkce"!==this.flowType){Y.n=4;break}throw new vu("Not a valid PKCE flow url.");case 4:case 6:return Y.a(3,7);case 5:if("implicit"!==this.flowType){Y.n=6;break}throw new pu("Not a valid implicit grant flow url.");case 7:if("pkce"!==_){Y.n=11;break}if(this._debug("#_initialize()","begin","is PKCE flow",!0),e.code){Y.n=8;break}throw new vu("No code detected.");case 8:return Y.n=9,this._exchangeCodeForSession(e.code);case 9:if(S=Y.v,k=S.data,!(E=S.error)){Y.n=10;break}throw E;case 10:return(T=new URL(window.location.href)).searchParams.delete("code"),window.history.replaceState(window.history.state,"",T.toString()),Y.a(2,{data:{session:k.session,redirectType:null},error:null});case 11:if(M=e.provider_token,I=e.provider_refresh_token,R=e.access_token,O=e.refresh_token,D=e.expires_in,L=e.expires_at,U=e.token_type,R&&D&&O&&U){Y.n=12;break}throw new pu("No session defined in URL");case 12:return B=Math.round(Date.now()/1e3),z=parseInt(D),G=B+z,L&&(G=parseInt(L)),Y.n=13,this._getUser(R);case 13:if(j=Y.v,V=j.data,!(H=j.error)){Y.n=14;break}throw H;case 14:return W={provider_token:M,provider_refresh_token:I,access_token:R,expires_in:z,expires_at:G,refresh_token:O,token_type:U,user:V.user},window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),Y.a(2,{data:{session:W,redirectType:e.type},error:null});case 15:if(Y.p=15,!isAuthError(X=Y.v)){Y.n=16;break}return Y.a(2,{data:{session:null,redirectType:null},error:X});case 16:throw X;case 17:return Y.a(2)}},_callee188,this,[[0,15]])})),function(e,_){return le.apply(this,arguments)})},{key:"_isImplicitGrantCallback",value:function(e){return Boolean(e.access_token||e.error_description)}},{key:"_isPKCECallback",value:(ue=_asyncToGenerator(_regenerator().m(function _callee189(e){var _;return _regenerator().w(function(S){for(;;)switch(S.n){case 0:return S.n=1,ku(this.storage,"".concat(this.storageKey,"-code-verifier"));case 1:return _=S.v,S.a(2,!(!e.code||!_))}},_callee189,this)})),function(e){return ue.apply(this,arguments)})},{key:"signOut",value:(se=_asyncToGenerator(_regenerator().m(function _callee191(){var e,_=this,S=arguments;return _regenerator().w(function(k){for(;;)switch(k.n){case 0:return e=S.length>0&&void 0!==S[0]?S[0]:{scope:"global"},k.n=1,this.initializePromise;case 1:return k.n=2,this._acquireLock(-1,_asyncToGenerator(_regenerator().m(function _callee190(){return _regenerator().w(function(S){for(;;)switch(S.n){case 0:return S.n=1,_._signOut(e);case 1:return S.a(2,S.v)}},_callee190)})));case 2:return k.a(2,k.v)}},_callee191,this)})),function(){return se.apply(this,arguments)})},{key:"_signOut",value:(oe=_asyncToGenerator(_regenerator().m(function _callee193(){var e,_=this,S=arguments;return _regenerator().w(function(k){for(;;)switch(k.n){case 0:return e=(S.length>0&&void 0!==S[0]?S[0]:{scope:"global"}).scope,k.n=1,this._useSession(function(){var S=_asyncToGenerator(_regenerator().m(function _callee192(S){var k,E,T,M,I,R;return _regenerator().w(function(O){for(;;)switch(O.n){case 0:if(E=S.data,!(T=S.error)){O.n=1;break}return O.a(2,{error:T});case 1:if(!(M=null===(k=E.session)||void 0===k?void 0:k.access_token)){O.n=3;break}return O.n=2,_.admin.signOut(M,e);case 2:if(I=O.v,!(R=I.error)){O.n=3;break}if(isAuthApiError(R)&&(404===R.status||401===R.status||403===R.status)){O.n=3;break}return O.a(2,{error:R});case 3:if("others"===e){O.n=5;break}return O.n=4,_._removeSession();case 4:return O.n=5,Cu(_.storage,"".concat(_.storageKey,"-code-verifier"));case 5:return O.a(2,{error:null})}},_callee192)}));return function(e){return S.apply(this,arguments)}}());case 1:return k.a(2,k.v)}},_callee193,this)})),function(){return oe.apply(this,arguments)})},{key:"onAuthStateChange",value:function(e){var _=this,S="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var _=16*Math.random()|0;return("x"==e?_:3&_|8).toString(16)}),k={id:S,callback:e,unsubscribe:function(){_._debug("#unsubscribe()","state change callback with id removed",S),_.stateChangeEmitters.delete(S)}};return this._debug("#onAuthStateChange()","registered callback with id",S),this.stateChangeEmitters.set(S,k),_asyncToGenerator(_regenerator().m(function _callee195(){return _regenerator().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,_.initializePromise;case 1:return e.n=2,_._acquireLock(-1,_asyncToGenerator(_regenerator().m(function _callee194(){return _regenerator().w(function(e){for(;;)switch(e.n){case 0:_._emitInitialSession(S);case 1:return e.a(2)}},_callee194)})));case 2:return e.a(2)}},_callee195)}))(),{data:{subscription:k}}}},{key:"_emitInitialSession",value:(ae=_asyncToGenerator(_regenerator().m(function _callee197(e){var _=this;return _regenerator().w(function(S){for(;;)switch(S.n){case 0:return S.n=1,this._useSession(function(){var S=_asyncToGenerator(_regenerator().m(function _callee196(S){var k,E,T,M,I;return _regenerator().w(function(R){for(;;)switch(R.p=R.n){case 0:if(R.p=0,T=S.data.session,!(M=S.error)){R.n=1;break}throw M;case 1:return R.n=2,null===(k=_.stateChangeEmitters.get(e))||void 0===k?void 0:k.callback("INITIAL_SESSION",T);case 2:_._debug("INITIAL_SESSION","callback id",e,"session",T),R.n=5;break;case 3:return R.p=3,I=R.v,R.n=4,null===(E=_.stateChangeEmitters.get(e))||void 0===E?void 0:E.callback("INITIAL_SESSION",null);case 4:_._debug("INITIAL_SESSION","callback id",e,"error",I);case 5:return R.a(2)}},_callee196,null,[[0,3]])}));return function(e){return S.apply(this,arguments)}}());case 1:return S.a(2,S.v)}},_callee197,this)})),function(e){return ae.apply(this,arguments)})},{key:"resetPasswordForEmail",value:(ie=_asyncToGenerator(_regenerator().m(function _callee198(e){var _,S,k,E,T,M,I=arguments;return _regenerator().w(function(R){for(;;)switch(R.p=R.n){case 0:if(_=I.length>1&&void 0!==I[1]?I[1]:{},S=null,k=null,"pkce"!==this.flowType){R.n=2;break}return R.n=1,getCodeChallengeAndMethod(this.storage,this.storageKey,!0);case 1:E=R.v,T=_slicedToArray(E,2),S=T[0],k=T[1];case 2:return R.p=2,R.n=3,_request(this.fetch,"POST","".concat(this.url,"/recover"),{body:{email:e,code_challenge:S,code_challenge_method:k,gotrue_meta_security:{captcha_token:_.captchaToken}},headers:this.headers,redirectTo:_.redirectTo});case 3:return R.a(2,R.v);case 4:if(R.p=4,!isAuthError(M=R.v)){R.n=5;break}return R.a(2,{data:null,error:M});case 5:throw M;case 6:return R.a(2)}},_callee198,this,[[2,4]])})),function(e){return ie.apply(this,arguments)})},{key:"getUserIdentities",value:(ne=_asyncToGenerator(_regenerator().m(function _callee199(){var e,_,S,k,E;return _regenerator().w(function(T){for(;;)switch(T.p=T.n){case 0:return T.p=0,T.n=1,this.getUser();case 1:if(_=T.v,S=_.data,!(k=_.error)){T.n=2;break}throw k;case 2:return T.a(2,{data:{identities:null!==(e=S.user.identities)&&void 0!==e?e:[]},error:null});case 3:if(T.p=3,!isAuthError(E=T.v)){T.n=4;break}return T.a(2,{data:null,error:E});case 4:throw E;case 5:return T.a(2)}},_callee199,this,[[0,3]])})),function(){return ne.apply(this,arguments)})},{key:"linkIdentity",value:(re=_asyncToGenerator(_regenerator().m(function _callee200(e){return _regenerator().w(function(_){for(;;)switch(_.n){case 0:if(!("token"in e)){_.n=1;break}return _.a(2,this.linkIdentityIdToken(e));case 1:return _.a(2,this.linkIdentityOAuth(e))}},_callee200,this)})),function(e){return re.apply(this,arguments)})},{key:"linkIdentityOAuth",value:(te=_asyncToGenerator(_regenerator().m(function _callee202(e){var _,S,k,E,T,M=this;return _regenerator().w(function(I){for(;;)switch(I.p=I.n){case 0:return I.p=0,I.n=1,this._useSession(function(){var _=_asyncToGenerator(_regenerator().m(function _callee201(_){var S,k,E,T,I,R,O,D;return _regenerator().w(function(L){for(;;)switch(L.n){case 0:if(R=_.data,!(O=_.error)){L.n=1;break}throw O;case 1:return L.n=2,M._getUrlForProvider("".concat(M.url,"/user/identities/authorize"),e.provider,{redirectTo:null===(S=e.options)||void 0===S?void 0:S.redirectTo,scopes:null===(k=e.options)||void 0===k?void 0:k.scopes,queryParams:null===(E=e.options)||void 0===E?void 0:E.queryParams,skipBrowserRedirect:!0});case 2:return D=L.v,L.n=3,_request(M.fetch,"GET",D,{headers:M.headers,jwt:null!==(I=null===(T=R.session)||void 0===T?void 0:T.access_token)&&void 0!==I?I:void 0});case 3:return L.a(2,L.v)}},_callee201)}));return function(e){return _.apply(this,arguments)}}());case 1:if(S=I.v,k=S.data,!(E=S.error)){I.n=2;break}throw E;case 2:return isBrowser()&&!(null===(_=e.options)||void 0===_?void 0:_.skipBrowserRedirect)&&window.location.assign(null==k?void 0:k.url),I.a(2,{data:{provider:e.provider,url:null==k?void 0:k.url},error:null});case 3:if(I.p=3,!isAuthError(T=I.v)){I.n=4;break}return I.a(2,{data:{provider:e.provider,url:null},error:T});case 4:throw T;case 5:return I.a(2)}},_callee202,this,[[0,3]])})),function(e){return te.apply(this,arguments)})},{key:"linkIdentityIdToken",value:(ee=_asyncToGenerator(_regenerator().m(function _callee204(e){var _=this;return _regenerator().w(function(S){for(;;)switch(S.n){case 0:return S.n=1,this._useSession(function(){var S=_asyncToGenerator(_regenerator().m(function _callee203(S){var k,E,T,M,I,R,O,D,L,U,B,z;return _regenerator().w(function(G){for(;;)switch(G.p=G.n){case 0:if(G.p=0,E=S.error,T=S.data.session,!E){G.n=1;break}throw E;case 1:return M=e.options,I=e.provider,R=e.token,O=e.access_token,D=e.nonce,G.n=2,_request(_.fetch,"POST","".concat(_.url,"/token?grant_type=id_token"),{headers:_.headers,jwt:null!==(k=null==T?void 0:T.access_token)&&void 0!==k?k:void 0,body:{provider:I,id_token:R,access_token:O,nonce:D,link_identity:!0,gotrue_meta_security:{captcha_token:null==M?void 0:M.captchaToken}},xform:_sessionResponse});case 2:if(L=G.v,U=L.data,!(B=L.error)){G.n=3;break}return G.a(2,{data:{user:null,session:null},error:B});case 3:if(U&&U.session&&U.user){G.n=4;break}return G.a(2,{data:{user:null,session:null},error:new du});case 4:if(!U.session){G.n=6;break}return G.n=5,_._saveSession(U.session);case 5:return G.n=6,_._notifyAllSubscribers("USER_UPDATED",U.session);case 6:return G.a(2,{data:U,error:B});case 7:if(G.p=7,!isAuthError(z=G.v)){G.n=8;break}return G.a(2,{data:{user:null,session:null},error:z});case 8:throw z;case 9:return G.a(2)}},_callee203,null,[[0,7]])}));return function(e){return S.apply(this,arguments)}}());case 1:return S.a(2,S.v)}},_callee204,this)})),function(e){return ee.apply(this,arguments)})},{key:"unlinkIdentity",value:($=_asyncToGenerator(_regenerator().m(function _callee206(e){var _,S=this;return _regenerator().w(function(k){for(;;)switch(k.p=k.n){case 0:return k.p=0,k.n=1,this._useSession(function(){var _=_asyncToGenerator(_regenerator().m(function _callee205(_){var k,E,T,M;return _regenerator().w(function(I){for(;;)switch(I.n){case 0:if(T=_.data,!(M=_.error)){I.n=1;break}throw M;case 1:return I.n=2,_request(S.fetch,"DELETE","".concat(S.url,"/user/identities/").concat(e.identity_id),{headers:S.headers,jwt:null!==(E=null===(k=T.session)||void 0===k?void 0:k.access_token)&&void 0!==E?E:void 0});case 2:return I.a(2,I.v)}},_callee205)}));return function(e){return _.apply(this,arguments)}}());case 1:return k.a(2,k.v);case 2:if(k.p=2,!isAuthError(_=k.v)){k.n=3;break}return k.a(2,{data:null,error:_});case 3:throw _;case 4:return k.a(2)}},_callee206,this,[[0,2]])})),function(e){return $.apply(this,arguments)})},{key:"_refreshAccessToken",value:(Z=_asyncToGenerator(_regenerator().m(function _callee208(e){var _,S,k,E=this;return _regenerator().w(function(T){for(;;)switch(T.p=T.n){case 0:return _="#_refreshAccessToken(".concat(e.substring(0,5),"...)"),this._debug(_,"begin"),T.p=1,S=Date.now(),T.n=2,retryable(function(){var S=_asyncToGenerator(_regenerator().m(function _callee207(S){return _regenerator().w(function(k){for(;;)switch(k.n){case 0:if(!(S>0)){k.n=1;break}return k.n=1,sleep(200*Math.pow(2,S-1));case 1:return E._debug(_,"refreshing attempt",S),k.n=2,_request(E.fetch,"POST","".concat(E.url,"/token?grant_type=refresh_token"),{body:{refresh_token:e},headers:E.headers,xform:_sessionResponse});case 2:return k.a(2,k.v)}},_callee207)}));return function(e){return S.apply(this,arguments)}}(),function(e,_){var k=200*Math.pow(2,e);return _&&isAuthRetryableFetchError(_)&&Date.now()+k-S<tu});case 2:return T.a(2,T.v);case 3:if(T.p=3,k=T.v,this._debug(_,"error",k),!isAuthError(k)){T.n=4;break}return T.a(2,{data:{session:null,user:null},error:k});case 4:throw k;case 5:return T.p=5,this._debug(_,"end"),T.f(5);case 6:return T.a(2)}},_callee208,this,[[1,3,5,6]])})),function(e){return Z.apply(this,arguments)})},{key:"_isValidSession",value:function(e){return"object"===_typeof3(e)&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}},{key:"_handleProviderSignIn",value:(Q=_asyncToGenerator(_regenerator().m(function _callee209(e,_){var S;return _regenerator().w(function(k){for(;;)switch(k.n){case 0:return k.n=1,this._getUrlForProvider("".concat(this.url,"/authorize"),e,{redirectTo:_.redirectTo,scopes:_.scopes,queryParams:_.queryParams});case 1:return S=k.v,this._debug("#_handleProviderSignIn()","provider",e,"options",_,"url",S),isBrowser()&&!_.skipBrowserRedirect&&window.location.assign(S),k.a(2,{data:{provider:e,url:S},error:null})}},_callee209,this)})),function(e,_){return Q.apply(this,arguments)})},{key:"_recoverAndRefresh",value:(J=_asyncToGenerator(_regenerator().m(function _callee210(){var e,_,S,k,E,T,M,I,R,O,D,L,U;return _regenerator().w(function(B){for(;;)switch(B.p=B.n){case 0:return S="#_recoverAndRefresh()",this._debug(S,"begin"),B.p=1,B.n=2,ku(this.storage,this.storageKey);case 2:if(!(k=B.v)||!this.userStorage){B.n=5;break}return B.n=3,ku(this.userStorage,this.storageKey+"-user");case 3:if(E=B.v,this.storage.isServer||!Object.is(this.storage,this.userStorage)||E){B.n=4;break}return E={user:k.user},B.n=4,xu(this.userStorage,this.storageKey+"-user",E);case 4:k.user=null!==(e=null==E?void 0:E.user)&&void 0!==e?e:userNotAvailableProxy(),B.n=10;break;case 5:if(!k||k.user){B.n=10;break}if(k.user){B.n=10;break}return B.n=6,ku(this.storage,this.storageKey+"-user");case 6:if(!(T=B.v)||!(null==T?void 0:T.user)){B.n=9;break}return k.user=T.user,B.n=7,Cu(this.storage,this.storageKey+"-user");case 7:return B.n=8,xu(this.storage,this.storageKey,k);case 8:B.n=10;break;case 9:k.user=userNotAvailableProxy();case 10:if(this._debug(S,"session from storage",k),this._isValidSession(k)){B.n=12;break}if(this._debug(S,"session is not valid"),null===k){B.n=11;break}return B.n=11,this._removeSession();case 11:return B.a(2);case 12:if(M=1e3*(null!==(_=k.expires_at)&&void 0!==_?_:1/0)-Date.now()<ru,this._debug(S,"session has".concat(M?"":" not"," expired with margin of ").concat(ru,"s")),!M){B.n=15;break}if(!this.autoRefreshToken||!k.refresh_token){B.n=14;break}return B.n=13,this._callRefreshToken(k.refresh_token);case 13:if(I=B.v,!(R=I.error)){B.n=14;break}if(isAuthRetryableFetchError(R)){B.n=14;break}return this._debug(S,"refresh failed with a non-retryable error, removing the session",R),B.n=14,this._removeSession();case 14:B.n=25;break;case 15:if(!k.user||!0!==k.user.__isUserNotAvailableProxy){B.n=24;break}return B.p=16,B.n=17,this._getUser(k.access_token);case 17:if(O=B.v,D=O.data,O.error||!(null==D?void 0:D.user)){B.n=20;break}return k.user=D.user,B.n=18,this._saveSession(k);case 18:return B.n=19,this._notifyAllSubscribers("SIGNED_IN",k);case 19:B.n=21;break;case 20:this._debug(S,"could not get user data, skipping SIGNED_IN notification");case 21:B.n=23;break;case 22:B.p=22,L=B.v,this._debug(S,"error getting user data, skipping SIGNED_IN notification",L);case 23:B.n=25;break;case 24:return B.n=25,this._notifyAllSubscribers("SIGNED_IN",k);case 25:B.n=27;break;case 26:return B.p=26,U=B.v,this._debug(S,"error",U),B.a(2);case 27:return B.p=27,this._debug(S,"end"),B.f(27);case 28:return B.a(2)}},_callee210,this,[[16,22],[1,26,27,28]])})),function(){return J.apply(this,arguments)})},{key:"_callRefreshToken",value:(K=_asyncToGenerator(_regenerator().m(function _callee211(e){var _,S,k,E,T,M,I,R,O;return _regenerator().w(function(D){for(;;)switch(D.p=D.n){case 0:if(e){D.n=1;break}throw new hu;case 1:if(!this.refreshingDeferred){D.n=2;break}return D.a(2,this.refreshingDeferred.promise);case 2:return k="#_callRefreshToken(".concat(e.substring(0,5),"...)"),this._debug(k,"begin"),D.p=3,this.refreshingDeferred=new Au,D.n=4,this._refreshAccessToken(e);case 4:if(E=D.v,T=E.data,!(M=E.error)){D.n=5;break}throw M;case 5:if(T.session){D.n=6;break}throw new hu;case 6:return D.n=7,this._saveSession(T.session);case 7:return D.n=8,this._notifyAllSubscribers("TOKEN_REFRESHED",T.session);case 8:return I={data:T.session,error:null},this.refreshingDeferred.resolve(I),D.a(2,I);case 9:if(D.p=9,O=D.v,this._debug(k,"error",O),!isAuthError(O)){D.n=11;break}if(R={data:null,error:O},isAuthRetryableFetchError(O)){D.n=10;break}return D.n=10,this._removeSession();case 10:return null===(_=this.refreshingDeferred)||void 0===_||_.resolve(R),D.a(2,R);case 11:throw null===(S=this.refreshingDeferred)||void 0===S||S.reject(O),O;case 12:return D.p=12,this.refreshingDeferred=null,this._debug(k,"end"),D.f(12);case 13:return D.a(2)}},_callee211,this,[[3,9,12,13]])})),function(e){return K.apply(this,arguments)})},{key:"_notifyAllSubscribers",value:(Y=_asyncToGenerator(_regenerator().m(function _callee213(e,_){var S,k,E,T,M,I=arguments;return _regenerator().w(function(R){for(;;)switch(R.p=R.n){case 0:return S=!(I.length>2&&void 0!==I[2])||I[2],k="#_notifyAllSubscribers(".concat(e,")"),this._debug(k,"begin",_,"broadcast = ".concat(S)),R.p=1,this.broadcastChannel&&S&&this.broadcastChannel.postMessage({event:e,session:_}),E=[],T=Array.from(this.stateChangeEmitters.values()).map(function(){var S=_asyncToGenerator(_regenerator().m(function _callee212(S){var k;return _regenerator().w(function(T){for(;;)switch(T.p=T.n){case 0:return T.p=0,T.n=1,S.callback(e,_);case 1:T.n=3;break;case 2:T.p=2,k=T.v,E.push(k);case 3:return T.a(2)}},_callee212,null,[[0,2]])}));return function(e){return S.apply(this,arguments)}}()),R.n=2,Promise.all(T);case 2:if(!(E.length>0)){R.n=3;break}for(M=0;M<E.length;M+=1);throw E[0];case 3:return R.p=3,this._debug(k,"end"),R.f(3);case 4:return R.a(2)}},_callee213,this,[[1,,3,4]])})),function(e,_){return Y.apply(this,arguments)})},{key:"_saveSession",value:(X=_asyncToGenerator(_regenerator().m(function _callee214(e){var _,S,k,E,T;return _regenerator().w(function(M){for(;;)switch(M.n){case 0:if(this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,_=Object.assign({},e),S=_.user&&!0===_.user.__isUserNotAvailableProxy,!this.userStorage){M.n=3;break}if(S||!_.user){M.n=1;break}return M.n=1,xu(this.userStorage,this.storageKey+"-user",{user:_.user});case 1:return delete(k=Object.assign({},_)).user,E=deepClone(k),M.n=2,xu(this.storage,this.storageKey,E);case 2:M.n=4;break;case 3:return T=deepClone(_),M.n=4,xu(this.storage,this.storageKey,T);case 4:return M.a(2)}},_callee214,this)})),function(e){return X.apply(this,arguments)})},{key:"_removeSession",value:(q=_asyncToGenerator(_regenerator().m(function _callee215(){return _regenerator().w(function(e){for(;;)switch(e.n){case 0:return this._debug("#_removeSession()"),e.n=1,Cu(this.storage,this.storageKey);case 1:return e.n=2,Cu(this.storage,this.storageKey+"-code-verifier");case 2:return e.n=3,Cu(this.storage,this.storageKey+"-user");case 3:if(!this.userStorage){e.n=4;break}return e.n=4,Cu(this.userStorage,this.storageKey+"-user");case 4:return e.n=5,this._notifyAllSubscribers("SIGNED_OUT",null);case 5:return e.a(2)}},_callee215,this)})),function(){return q.apply(this,arguments)})},{key:"_removeVisibilityChangedCallback",value:function(){this._debug("#_removeVisibilityChangedCallback()");var e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&isBrowser()&&(null===window||void 0===window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(fo){}}},{key:"_startAutoRefresh",value:(W=_asyncToGenerator(_regenerator().m(function _callee217(){var e,_=this;return _regenerator().w(function(S){for(;;)switch(S.n){case 0:return S.n=1,this._stopAutoRefresh();case 1:this._debug("#_startAutoRefresh()"),e=setInterval(function(){return _._autoRefreshTokenTick()},tu),this.autoRefreshTicker=e,e&&"object"===_typeof3(e)&&"function"==typeof e.unref?e.unref():"undefined"!=typeof Deno&&"function"==typeof Deno.unrefTimer&&Deno.unrefTimer(e),setTimeout(_asyncToGenerator(_regenerator().m(function _callee216(){return _regenerator().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,_.initializePromise;case 1:return e.n=2,_._autoRefreshTokenTick();case 2:return e.a(2)}},_callee216)})),0);case 2:return S.a(2)}},_callee217,this)})),function(){return W.apply(this,arguments)})},{key:"_stopAutoRefresh",value:(H=_asyncToGenerator(_regenerator().m(function _callee218(){var e;return _regenerator().w(function(_){for(;;)switch(_.n){case 0:this._debug("#_stopAutoRefresh()"),e=this.autoRefreshTicker,this.autoRefreshTicker=null,e&&clearInterval(e);case 1:return _.a(2)}},_callee218,this)})),function(){return H.apply(this,arguments)})},{key:"startAutoRefresh",value:(V=_asyncToGenerator(_regenerator().m(function _callee219(){return _regenerator().w(function(e){for(;;)switch(e.n){case 0:return this._removeVisibilityChangedCallback(),e.n=1,this._startAutoRefresh();case 1:return e.a(2)}},_callee219,this)})),function(){return V.apply(this,arguments)})},{key:"stopAutoRefresh",value:(j=_asyncToGenerator(_regenerator().m(function _callee220(){return _regenerator().w(function(e){for(;;)switch(e.n){case 0:return this._removeVisibilityChangedCallback(),e.n=1,this._stopAutoRefresh();case 1:return e.a(2)}},_callee220,this)})),function(){return j.apply(this,arguments)})},{key:"_autoRefreshTokenTick",value:(G=_asyncToGenerator(_regenerator().m(function _callee223(){var e,_=this;return _regenerator().w(function(S){for(;;)switch(S.p=S.n){case 0:return this._debug("#_autoRefreshTokenTick()","begin"),S.p=1,S.n=2,this._acquireLock(0,_asyncToGenerator(_regenerator().m(function _callee222(){var e;return _regenerator().w(function(S){for(;;)switch(S.p=S.n){case 0:return S.p=0,e=Date.now(),S.p=1,S.n=2,_._useSession(function(){var S=_asyncToGenerator(_regenerator().m(function _callee221(S){var k,E;return _regenerator().w(function(T){for(;;)switch(T.n){case 0:if((k=S.data.session)&&k.refresh_token&&k.expires_at){T.n=1;break}return _._debug("#_autoRefreshTokenTick()","no session"),T.a(2);case 1:if(E=Math.floor((1e3*k.expires_at-e)/tu),_._debug("#_autoRefreshTokenTick()","access token expires in ".concat(E," ticks, a tick lasts ").concat(tu,"ms, refresh threshold is ").concat(3," ticks")),!(E<=3)){T.n=2;break}return T.n=2,_._callRefreshToken(k.refresh_token);case 2:return T.a(2)}},_callee221)}));return function(e){return S.apply(this,arguments)}}());case 2:return S.a(2,S.v);case 3:S.p=3,S.v;case 4:return S.p=4,_._debug("#_autoRefreshTokenTick()","end"),S.f(4);case 5:return S.a(2)}},_callee222,null,[[1,3],[0,,4,5]])})));case 2:S.n=5;break;case 3:if(S.p=3,!((e=S.v).isAcquireTimeout||e instanceof Ou)){S.n=4;break}this._debug("auto refresh token tick lock not available"),S.n=5;break;case 4:throw e;case 5:return S.a(2)}},_callee223,this,[[1,3]])})),function(){return G.apply(this,arguments)})},{key:"_handleVisibilityChange",value:(z=_asyncToGenerator(_regenerator().m(function _callee225(){var e=this;return _regenerator().w(function(_){for(;;)switch(_.p=_.n){case 0:if(this._debug("#_handleVisibilityChange()"),isBrowser()&&(null===window||void 0===window?void 0:window.addEventListener)){_.n=1;break}return this.autoRefreshToken&&this.startAutoRefresh(),_.a(2,!1);case 1:return _.p=1,this.visibilityChangedCallback=_asyncToGenerator(_regenerator().m(function _callee224(){return _regenerator().w(function(_){for(;;)switch(_.n){case 0:return _.n=1,e._onVisibilityChanged(!1);case 1:return _.a(2,_.v)}},_callee224)})),null===window||void 0===window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),_.n=2,this._onVisibilityChanged(!0);case 2:_.n=4;break;case 3:_.p=3,_.v;case 4:return _.a(2)}},_callee225,this,[[1,3]])})),function(){return z.apply(this,arguments)})},{key:"_onVisibilityChanged",value:(B=_asyncToGenerator(_regenerator().m(function _callee227(e){var _,S=this;return _regenerator().w(function(k){for(;;)switch(k.n){case 0:if(_="#_onVisibilityChanged(".concat(e,")"),this._debug(_,"visibilityState",document.visibilityState),"visible"!==document.visibilityState){k.n=3;break}if(this.autoRefreshToken&&this._startAutoRefresh(),e){k.n=2;break}return k.n=1,this.initializePromise;case 1:return k.n=2,this._acquireLock(-1,_asyncToGenerator(_regenerator().m(function _callee226(){return _regenerator().w(function(e){for(;;)switch(e.n){case 0:if("visible"===document.visibilityState){e.n=1;break}return S._debug(_,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting"),e.a(2);case 1:return e.n=2,S._recoverAndRefresh();case 2:return e.a(2)}},_callee226)})));case 2:k.n=4;break;case 3:"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh();case 4:return k.a(2)}},_callee227,this)})),function(e){return B.apply(this,arguments)})},{key:"_getUrlForProvider",value:(U=_asyncToGenerator(_regenerator().m(function _callee228(e,_,S){var k,E,T,M,I,R,O;return _regenerator().w(function(D){for(;;)switch(D.n){case 0:if(k=["provider=".concat(encodeURIComponent(_))],(null==S?void 0:S.redirectTo)&&k.push("redirect_to=".concat(encodeURIComponent(S.redirectTo))),(null==S?void 0:S.scopes)&&k.push("scopes=".concat(encodeURIComponent(S.scopes))),"pkce"!==this.flowType){D.n=2;break}return D.n=1,getCodeChallengeAndMethod(this.storage,this.storageKey);case 1:E=D.v,T=_slicedToArray(E,2),M=T[0],I=T[1],R=new URLSearchParams({code_challenge:"".concat(encodeURIComponent(M)),code_challenge_method:"".concat(encodeURIComponent(I))}),k.push(R.toString());case 2:return(null==S?void 0:S.queryParams)&&(O=new URLSearchParams(S.queryParams),k.push(O.toString())),(null==S?void 0:S.skipBrowserRedirect)&&k.push("skip_http_redirect=".concat(S.skipBrowserRedirect)),D.a(2,"".concat(e,"?").concat(k.join("&")))}},_callee228,this)})),function(e,_,S){return U.apply(this,arguments)})},{key:"_unenroll",value:(L=_asyncToGenerator(_regenerator().m(function _callee230(e){var _,S=this;return _regenerator().w(function(k){for(;;)switch(k.p=k.n){case 0:return k.p=0,k.n=1,this._useSession(function(){var _=_asyncToGenerator(_regenerator().m(function _callee229(_){var k,E,T;return _regenerator().w(function(M){for(;;)switch(M.n){case 0:if(E=_.data,!(T=_.error)){M.n=1;break}return M.a(2,{data:null,error:T});case 1:return M.n=2,_request(S.fetch,"DELETE","".concat(S.url,"/factors/").concat(e.factorId),{headers:S.headers,jwt:null===(k=null==E?void 0:E.session)||void 0===k?void 0:k.access_token});case 2:return M.a(2,M.v)}},_callee229)}));return function(e){return _.apply(this,arguments)}}());case 1:return k.a(2,k.v);case 2:if(k.p=2,!isAuthError(_=k.v)){k.n=3;break}return k.a(2,{data:null,error:_});case 3:throw _;case 4:return k.a(2)}},_callee230,this,[[0,2]])})),function(e){return L.apply(this,arguments)})},{key:"_enroll",value:(D=_asyncToGenerator(_regenerator().m(function _callee232(e){var _,S=this;return _regenerator().w(function(k){for(;;)switch(k.p=k.n){case 0:return k.p=0,k.n=1,this._useSession(function(){var _=_asyncToGenerator(_regenerator().m(function _callee231(_){var k,E,T,M,I,R,O,D;return _regenerator().w(function(L){for(;;)switch(L.n){case 0:if(T=_.data,!(M=_.error)){L.n=1;break}return L.a(2,{data:null,error:M});case 1:return I=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},"phone"===e.factorType?{phone:e.phone}:"totp"===e.factorType?{issuer:e.issuer}:{}),L.n=2,_request(S.fetch,"POST","".concat(S.url,"/factors"),{body:I,headers:S.headers,jwt:null===(k=null==T?void 0:T.session)||void 0===k?void 0:k.access_token});case 2:if(R=L.v,O=R.data,!(D=R.error)){L.n=3;break}return L.a(2,{data:null,error:D});case 3:return"totp"===e.factorType&&"totp"===O.type&&(null===(E=null==O?void 0:O.totp)||void 0===E?void 0:E.qr_code)&&(O.totp.qr_code="data:image/svg+xml;utf-8,".concat(O.totp.qr_code)),L.a(2,{data:O,error:null})}},_callee231)}));return function(e){return _.apply(this,arguments)}}());case 1:return k.a(2,k.v);case 2:if(k.p=2,!isAuthError(_=k.v)){k.n=3;break}return k.a(2,{data:null,error:_});case 3:throw _;case 4:return k.a(2)}},_callee232,this,[[0,2]])})),function(e){return D.apply(this,arguments)})},{key:"_verify",value:(O=_asyncToGenerator(_regenerator().m(function _callee235(e){var _=this;return _regenerator().w(function(S){for(;;)if(0===S.n)return S.a(2,this._acquireLock(-1,_asyncToGenerator(_regenerator().m(function _callee234(){var S;return _regenerator().w(function(k){for(;;)switch(k.p=k.n){case 0:return k.p=0,k.n=1,_._useSession(function(){var S=_asyncToGenerator(_regenerator().m(function _callee233(S){var k,E,T,M,I,R,O;return _regenerator().w(function(D){for(;;)switch(D.n){case 0:if(E=S.data,!(T=S.error)){D.n=1;break}return D.a(2,{data:null,error:T});case 1:return M=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:"create"===e.webauthn.type?serializeCredentialCreationResponse(e.webauthn.credential_response):serializeCredentialRequestResponse(e.webauthn.credential_response)})}:{code:e.code}),D.n=2,_request(_.fetch,"POST","".concat(_.url,"/factors/").concat(e.factorId,"/verify"),{body:M,headers:_.headers,jwt:null===(k=null==E?void 0:E.session)||void 0===k?void 0:k.access_token});case 2:if(I=D.v,R=I.data,!(O=I.error)){D.n=3;break}return D.a(2,{data:null,error:O});case 3:return D.n=4,_._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+R.expires_in},R));case 4:return D.n=5,_._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",R);case 5:return D.a(2,{data:R,error:O})}},_callee233)}));return function(e){return S.apply(this,arguments)}}());case 1:return k.a(2,k.v);case 2:if(k.p=2,!isAuthError(S=k.v)){k.n=3;break}return k.a(2,{data:null,error:S});case 3:throw S;case 4:return k.a(2)}},_callee234,null,[[0,2]])}))))},_callee235,this)})),function(e){return O.apply(this,arguments)})},{key:"_challenge",value:(R=_asyncToGenerator(_regenerator().m(function _callee238(e){var _=this;return _regenerator().w(function(S){for(;;)if(0===S.n)return S.a(2,this._acquireLock(-1,_asyncToGenerator(_regenerator().m(function _callee237(){var S;return _regenerator().w(function(k){for(;;)switch(k.p=k.n){case 0:return k.p=0,k.n=1,_._useSession(function(){var S=_asyncToGenerator(_regenerator().m(function _callee236(S){var k,E,T,M,I,R;return _regenerator().w(function(O){for(;;)switch(O.n){case 0:if(E=S.data,!(T=S.error)){O.n=1;break}return O.a(2,{data:null,error:T});case 1:return O.n=2,_request(_.fetch,"POST","".concat(_.url,"/factors/").concat(e.factorId,"/challenge"),{body:e,headers:_.headers,jwt:null===(k=null==E?void 0:E.session)||void 0===k?void 0:k.access_token});case 2:if(!(M=O.v).error){O.n=3;break}return O.a(2,M);case 3:if("webauthn"===(I=M.data).type){O.n=4;break}return O.a(2,{data:I,error:null});case 4:R=I.webauthn.type,O.n="create"===R?5:"request"===R?6:7;break;case 5:return O.a(2,{data:Object.assign(Object.assign({},I),{webauthn:Object.assign(Object.assign({},I.webauthn),{credential_options:Object.assign(Object.assign({},I.webauthn.credential_options),{publicKey:deserializeCredentialCreationOptions(I.webauthn.credential_options.publicKey)})})}),error:null});case 6:return O.a(2,{data:Object.assign(Object.assign({},I),{webauthn:Object.assign(Object.assign({},I.webauthn),{credential_options:Object.assign(Object.assign({},I.webauthn.credential_options),{publicKey:deserializeCredentialRequestOptions(I.webauthn.credential_options.publicKey)})})}),error:null});case 7:return O.a(2)}},_callee236)}));return function(e){return S.apply(this,arguments)}}());case 1:return k.a(2,k.v);case 2:if(k.p=2,!isAuthError(S=k.v)){k.n=3;break}return k.a(2,{data:null,error:S});case 3:throw S;case 4:return k.a(2)}},_callee237,null,[[0,2]])}))))},_callee238,this)})),function(e){return R.apply(this,arguments)})},{key:"_challengeAndVerify",value:(I=_asyncToGenerator(_regenerator().m(function _callee239(e){var _,S,k;return _regenerator().w(function(E){for(;;)switch(E.n){case 0:return E.n=1,this._challenge({factorId:e.factorId});case 1:if(_=E.v,S=_.data,!(k=_.error)){E.n=2;break}return E.a(2,{data:null,error:k});case 2:return E.n=3,this._verify({factorId:e.factorId,challengeId:S.id,code:e.code});case 3:return E.a(2,E.v)}},_callee239,this)})),function(e){return I.apply(this,arguments)})},{key:"_listFactors",value:(M=_asyncToGenerator(_regenerator().m(function _callee240(){var e,_,S,k,E,T,M,I;return _regenerator().w(function(R){for(;;)switch(R.n){case 0:return R.n=1,this.getUser();case 1:if(_=R.v,S=_.data.user,!(k=_.error)){R.n=2;break}return R.a(2,{data:null,error:k});case 2:E={all:[],phone:[],totp:[],webauthn:[]},T=_createForOfIteratorHelper2(null!==(e=null==S?void 0:S.factors)&&void 0!==e?e:[]);try{for(T.s();!(M=T.n()).done;)I=M.value,E.all.push(I),"verified"===I.status&&E[I.factor_type].push(I)}catch(O){T.e(O)}finally{T.f()}return R.a(2,{data:E,error:null})}},_callee240,this)})),function(){return M.apply(this,arguments)})},{key:"_getAuthenticatorAssuranceLevel",value:(T=_asyncToGenerator(_regenerator().m(function _callee241(){var e,_,S,k,E,T,M,I,R,O;return _regenerator().w(function(D){for(;;)switch(D.n){case 0:return D.n=1,this.getSession();case 1:if(S=D.v,k=S.data.session,!(E=S.error)){D.n=2;break}return D.a(2,{data:null,error:E});case 2:if(k){D.n=3;break}return D.a(2,{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null});case 3:return T=decodeJWT(k.access_token),M=T.payload,I=null,M.aal&&(I=M.aal),R=I,(null!==(_=null===(e=k.user.factors)||void 0===e?void 0:e.filter(function(e){return"verified"===e.status}))&&void 0!==_?_:[]).length>0&&(R="aal2"),O=M.amr||[],D.a(2,{data:{currentLevel:I,nextLevel:R,currentAuthenticationMethods:O},error:null})}},_callee241,this)})),function(){return T.apply(this,arguments)})},{key:"_getAuthorizationDetails",value:(E=_asyncToGenerator(_regenerator().m(function _callee243(e){var _,S=this;return _regenerator().w(function(k){for(;;)switch(k.p=k.n){case 0:return k.p=0,k.n=1,this._useSession(function(){var _=_asyncToGenerator(_regenerator().m(function _callee242(_){var k,E;return _regenerator().w(function(T){for(;;)switch(T.n){case 0:if(k=_.data.session,!(E=_.error)){T.n=1;break}return T.a(2,{data:null,error:E});case 1:if(k){T.n=2;break}return T.a(2,{data:null,error:new hu});case 2:return T.n=3,_request(S.fetch,"GET","".concat(S.url,"/oauth/authorizations/").concat(e),{headers:S.headers,jwt:k.access_token,xform:function(e){return{data:e,error:null}}});case 3:return T.a(2,T.v)}},_callee242)}));return function(e){return _.apply(this,arguments)}}());case 1:return k.a(2,k.v);case 2:if(k.p=2,!isAuthError(_=k.v)){k.n=3;break}return k.a(2,{data:null,error:_});case 3:throw _;case 4:return k.a(2)}},_callee243,this,[[0,2]])})),function(e){return E.apply(this,arguments)})},{key:"_approveAuthorization",value:(k=_asyncToGenerator(_regenerator().m(function _callee245(e,_){var S,k=this;return _regenerator().w(function(E){for(;;)switch(E.p=E.n){case 0:return E.p=0,E.n=1,this._useSession(function(){var S=_asyncToGenerator(_regenerator().m(function _callee244(S){var E,T,M;return _regenerator().w(function(I){for(;;)switch(I.n){case 0:if(E=S.data.session,!(T=S.error)){I.n=1;break}return I.a(2,{data:null,error:T});case 1:if(E){I.n=2;break}return I.a(2,{data:null,error:new hu});case 2:return I.n=3,_request(k.fetch,"POST","".concat(k.url,"/oauth/authorizations/").concat(e,"/consent"),{headers:k.headers,jwt:E.access_token,body:{action:"approve"},xform:function(e){return{data:e,error:null}}});case 3:return(M=I.v).data&&M.data.redirect_url&&isBrowser()&&!(null==_?void 0:_.skipBrowserRedirect)&&window.location.assign(M.data.redirect_url),I.a(2,M)}},_callee244)}));return function(e){return S.apply(this,arguments)}}());case 1:return E.a(2,E.v);case 2:if(E.p=2,!isAuthError(S=E.v)){E.n=3;break}return E.a(2,{data:null,error:S});case 3:throw S;case 4:return E.a(2)}},_callee245,this,[[0,2]])})),function(e,_){return k.apply(this,arguments)})},{key:"_denyAuthorization",value:(S=_asyncToGenerator(_regenerator().m(function _callee247(e,_){var S,k=this;return _regenerator().w(function(E){for(;;)switch(E.p=E.n){case 0:return E.p=0,E.n=1,this._useSession(function(){var S=_asyncToGenerator(_regenerator().m(function _callee246(S){var E,T,M;return _regenerator().w(function(I){for(;;)switch(I.n){case 0:if(E=S.data.session,!(T=S.error)){I.n=1;break}return I.a(2,{data:null,error:T});case 1:if(E){I.n=2;break}return I.a(2,{data:null,error:new hu});case 2:return I.n=3,_request(k.fetch,"POST","".concat(k.url,"/oauth/authorizations/").concat(e,"/consent"),{headers:k.headers,jwt:E.access_token,body:{action:"deny"},xform:function(e){return{data:e,error:null}}});case 3:return(M=I.v).data&&M.data.redirect_url&&isBrowser()&&!(null==_?void 0:_.skipBrowserRedirect)&&window.location.assign(M.data.redirect_url),I.a(2,M)}},_callee246)}));return function(e){return S.apply(this,arguments)}}());case 1:return E.a(2,E.v);case 2:if(E.p=2,!isAuthError(S=E.v)){E.n=3;break}return E.a(2,{data:null,error:S});case 3:throw S;case 4:return E.a(2)}},_callee247,this,[[0,2]])})),function(e,_){return S.apply(this,arguments)})},{key:"fetchJwk",value:(_=_asyncToGenerator(_regenerator().m(function _callee248(e){var _,S,k,E,T,M=arguments;return _regenerator().w(function(I){for(;;)switch(I.n){case 0:if(!(_=(M.length>1&&void 0!==M[1]?M[1]:{keys:[]}).keys.find(function(_){return _.kid===e}))){I.n=1;break}return I.a(2,_);case 1:if(S=Date.now(),!((_=this.jwks.keys.find(function(_){return _.kid===e}))&&this.jwks_cached_at+6e5>S)){I.n=2;break}return I.a(2,_);case 2:return I.n=3,_request(this.fetch,"GET","".concat(this.url,"/.well-known/jwks.json"),{headers:this.headers});case 3:if(k=I.v,E=k.data,!(T=k.error)){I.n=4;break}throw T;case 4:if(E.keys&&0!==E.keys.length){I.n=5;break}return I.a(2,null);case 5:if(this.jwks=E,this.jwks_cached_at=S,_=E.keys.find(function(_){return _.kid===e})){I.n=6;break}return I.a(2,null);case 6:return I.a(2,_)}},_callee248,this)})),function(e){return _.apply(this,arguments)})},{key:"getClaims",value:(e=_asyncToGenerator(_regenerator().m(function _callee249(e){var _,S,k,E,T,M,I,R,O,D,L,U,B,z,G,j,V,H,W,q=arguments;return _regenerator().w(function(X){for(;;)switch(X.p=X.n){case 0:if(_=q.length>1&&void 0!==q[1]?q[1]:{},X.p=1,S=e){X.n=4;break}return X.n=2,this.getSession();case 2:if(k=X.v,E=k.data,!(T=k.error)&&E.session){X.n=3;break}return X.a(2,{data:null,error:T});case 3:S=E.session.access_token;case 4:if(M=decodeJWT(S),I=M.header,R=M.payload,O=M.signature,D=M.raw,L=D.header,U=D.payload,(null==_?void 0:_.allowExpired)||validateExp(R.exp),I.alg&&!I.alg.startsWith("HS")&&I.kid&&"crypto"in globalThis&&"subtle"in globalThis.crypto){X.n=5;break}H=null,X.n=7;break;case 5:return X.n=6,this.fetchJwk(I.kid,(null==_?void 0:_.keys)?{keys:_.keys}:null==_?void 0:_.jwks);case 6:H=X.v;case 7:if(B=H){X.n=10;break}return X.n=8,this.getUser(S);case 8:if(z=X.v,!(G=z.error)){X.n=9;break}throw G;case 9:return X.a(2,{data:{claims:R,header:I,signature:O},error:null});case 10:return j=getAlgorithm(I.alg),X.n=11,crypto.subtle.importKey("jwk",B,j,!0,["verify"]);case 11:return V=X.v,X.n=12,crypto.subtle.verify(j,V,O,stringToUint8Array("".concat(L,".").concat(U)));case 12:if(X.v){X.n=13;break}throw new yu("Invalid JWT signature");case 13:return X.a(2,{data:{claims:R,header:I,signature:O},error:null});case 14:if(X.p=14,!isAuthError(W=X.v)){X.n=15;break}return X.a(2,{data:null,error:W});case 15:throw W;case 16:return X.a(2)}},_callee249,this,[[1,14]])})),function(_){return e.apply(this,arguments)})}]);var e,_,S,k,E,T,M,I,R,O,D,L,U,B,z,G,j,V,H,W,q,X,Y,K,J,Q,Z,$,ee,te,re,ne,ie,ae,oe,se,ue,le,ce,he,de,fe,pe,ve,ge,me,ye,_e,be,Se,we,xe,ke,Ce,Ae,Ee,Te,Me,Ie,Re,Pe,Oe,De,Le,Fe,Ue,Be,Ne}();Vu.nextInstanceID=0;var Hu=function(e){function SupabaseAuthClient(e){return _classCallCheck3(this,SupabaseAuthClient),_callSuper(this,SupabaseAuthClient,[e])}return _inherits(SupabaseAuthClient,e),_createClass3(SupabaseAuthClient)}(Vu),Wu=function(){return _createClass3(function SupabaseClient(e,_,S){var k,E,T;_classCallCheck3(this,SupabaseClient),this.supabaseUrl=e,this.supabaseKey=_;var M=function(e){var _,S=null==e?void 0:e.trim();if(!S)throw new Error("supabaseUrl is required.");if(!S.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL((_=S).endsWith("/")?_:_+"/")}catch(k){throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}(e);if(!_)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",M),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",M),this.storageUrl=new URL("storage/v1",M),this.functionsUrl=new URL("functions/v1",M);var I="sb-".concat(M.hostname.split(".")[0],"-auth-token"),R=function(e,_){var S,k,E,T=e.db,M=e.auth,I=e.realtime,R=e.global,O=_.db,D=_.auth,L=_.realtime,U=_.global,B={db:Object.assign(Object.assign({},O),T),auth:Object.assign(Object.assign({},D),M),realtime:Object.assign(Object.assign({},L),I),storage:{},global:Object.assign(Object.assign(Object.assign({},U),R),{headers:Object.assign(Object.assign({},null!==(S=null==U?void 0:U.headers)&&void 0!==S?S:{}),null!==(k=null==R?void 0:R.headers)&&void 0!==k?k:{})}),accessToken:(E=_asyncToGenerator(_regenerator().m(function _callee111(){return _regenerator().w(function(e){for(;;)if(0===e.n)return e.a(2,"")},_callee111)})),function(){return E.apply(this,arguments)})};return e.accessToken?B.accessToken=e.accessToken:delete B.accessToken,B}(null!=S?S:{},{db:Qs,realtime:$s,auth:Object.assign(Object.assign({},Zs),{storageKey:I}),global:Js});this.storageKey=null!==(k=R.auth.storageKey)&&void 0!==k?k:"",this.headers=null!==(E=R.global.headers)&&void 0!==E?E:{},R.accessToken?(this.accessToken=R.accessToken,this.auth=new Proxy({},{get:function(e,_){throw new Error("@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.".concat(String(_)," is not possible"))}})):this.auth=this._initSupabaseAuthClient(null!==(T=R.auth)&&void 0!==T?T:{},this.headers,R.global.fetch),this.fetch=fetchWithAuth(_,this._getAccessToken.bind(this),R.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},R.realtime)),this.rest=new as(new URL("rest/v1",M).href,{headers:this.headers,schema:R.db.schema,fetch:this.fetch}),this.storage=new Ys(this.storageUrl.href,this.headers,this.fetch,null==S?void 0:S.storage),R.accessToken||this._listenForAuthEvents()},[{key:"functions",get:function(){return new Do(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}},{key:"from",value:function(e){return this.rest.from(e)}},{key:"schema",value:function(e){return this.rest.schema(e)}},{key:"rpc",value:function(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{head:!1,get:!1,count:void 0};return this.rest.rpc(e,_,S)}},{key:"channel",value:function(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}};return this.realtime.channel(e,_)}},{key:"getChannels",value:function(){return this.realtime.getChannels()}},{key:"removeChannel",value:function(e){return this.realtime.removeChannel(e)}},{key:"removeAllChannels",value:function(){return this.realtime.removeAllChannels()}},{key:"_getAccessToken",value:(e=_asyncToGenerator(_regenerator().m(function _callee250(){var e,_,S,k;return _regenerator().w(function(E){for(;;)switch(E.n){case 0:if(!this.accessToken){E.n=2;break}return E.n=1,this.accessToken();case 1:return E.a(2,E.v);case 2:return E.n=3,this.auth.getSession();case 3:return S=E.v,k=S.data,E.a(2,null!==(_=null===(e=k.session)||void 0===e?void 0:e.access_token)&&void 0!==_?_:this.supabaseKey)}},_callee250,this)})),function(){return e.apply(this,arguments)})},{key:"_initSupabaseAuthClient",value:function(e,_,S){var k=e.autoRefreshToken,E=e.persistSession,T=e.detectSessionInUrl,M=e.storage,I=e.userStorage,R=e.storageKey,O=e.flowType,D=e.lock,L=e.debug,U={Authorization:"Bearer ".concat(this.supabaseKey),apikey:"".concat(this.supabaseKey)};return new Hu({url:this.authUrl.href,headers:Object.assign(Object.assign({},U),_),storageKey:R,autoRefreshToken:k,persistSession:E,detectSessionInUrl:T,storage:M,userStorage:I,flowType:O,lock:D,debug:L,fetch:S,hasCustomAuthorizationHeader:Object.keys(this.headers).some(function(e){return"authorization"===e.toLowerCase()})})}},{key:"_initRealtimeClient",value:function(e){return new xs(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null==e?void 0:e.params)}))}},{key:"_listenForAuthEvents",value:function(){var e=this;return this.auth.onAuthStateChange(function(_,S){e._handleTokenChanged(_,"CLIENT",null==S?void 0:S.access_token)})}},{key:"_handleTokenChanged",value:function(e,_,S){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===S?"SIGNED_OUT"===e&&(this.realtime.setAuth(),"STORAGE"==_&&this.auth.signOut(),this.changedAccessToken=void 0):(this.changedAccessToken=S,this.realtime.setAuth(S))}}]);var e}();D("b8",function(e,_,S){return new Wu(e,_,S)});!function(){if("undefined"!=typeof window)return!1;if("undefined"==typeof process)return!1;var e=process.version;if(null==e)return!1;var _=e.match(/^v(\d+)\./);!!_&&parseInt(_[1],10)}();for(var qu,Xu=[],Yu=0;Yu<256;++Yu)Xu.push((Yu+256).toString(16).slice(1));var Ku=new Uint8Array(16);var Ju={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};var Qu="180",Zu=D("au",0),$u=D("at",1),el=D("ar",2),tl=D("as",3),rl=D("bk",1),nl=D("bl",2),il=100,al=204,ol=205,sl=D("ax",0),ul=D("ay",4),ll="attached",cl="detached",hl=300,dl=D("aL",301),fl=302,pl=D("aM",303),vl=304,gl=306,ml=1e3,yl=1001,_l=1002,bl=1003,Sl=1004,wl=1005,xl=1006,kl=1007,Cl=1008,Al=1008,El=D("aD",1009),Tl=1010,Ml=1011,Il=1012,Rl=1013,Pl=1014,Ol=1015,Dl=D("aU",1016),Ll=1017,Fl=1018,Ul=1020,Bl=35902,Nl=35899,zl=1021,Gl=1022,jl=D("aC",1023),Vl=1026,Hl=1027,Wl=1028,ql=1029,Xl=1030,Yl=1031,Kl=1033,Jl=33776,Ql=33777,Zl=33778,$l=33779,ec=35840,tc=35841,rc=35842,nc=35843,ic=36196,ac=37492,oc=37496,sc=37808,uc=37809,lc=37810,cc=37811,hc=37812,dc=37813,fc=37814,pc=37815,vc=37816,gc=37817,mc=37818,yc=37819,_c=37820,bc=37821,Sc=36492,wc=36494,xc=36495,kc=36283,Cc=36284,Ac=36285,Ec=36286,Tc=2300,Mc=2301,Ic=2302,Rc=2400,Pc=2401,Oc=2402,Dc=2500,Lc=2501,Fc=3200,Uc="",Bc=D("aw","srgb"),Nc=D("av","srgb-linear"),zc="linear",Gc="srgb",jc=7680,Vc=35044,Hc="300 es",Wc=2e3,qc=2001,Xc=function(){return _createClass3(function EventDispatcher(){_classCallCheck3(this,EventDispatcher)},[{key:"addEventListener",value:function(e,_){void 0===this._listeners&&(this._listeners={});var S=this._listeners;void 0===S[e]&&(S[e]=[]),-1===S[e].indexOf(_)&&S[e].push(_)}},{key:"hasEventListener",value:function(e,_){var S=this._listeners;return void 0!==S&&(void 0!==S[e]&&-1!==S[e].indexOf(_))}},{key:"removeEventListener",value:function(e,_){var S=this._listeners;if(void 0!==S){var k=S[e];if(void 0!==k){var E=k.indexOf(_);-1!==E&&k.splice(E,1)}}}},{key:"dispatchEvent",value:function(e){var _=this._listeners;if(void 0!==_){var S=_[e.type];if(void 0!==S){e.target=this;for(var k=S.slice(0),E=0,T=k.length;E<T;E++)k[E].call(this,e);e.target=null}}}}])}(),Yc=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],Kc=1234567,Jc=Math.PI/180,Qc=180/Math.PI;function generateUUID(){var e=4294967295*Math.random()|0,_=4294967295*Math.random()|0,S=4294967295*Math.random()|0,k=4294967295*Math.random()|0;return(Yc[255&e]+Yc[e>>8&255]+Yc[e>>16&255]+Yc[e>>24&255]+"-"+Yc[255&_]+Yc[_>>8&255]+"-"+Yc[_>>16&15|64]+Yc[_>>24&255]+"-"+Yc[63&S|128]+Yc[S>>8&255]+"-"+Yc[S>>16&255]+Yc[S>>24&255]+Yc[255&k]+Yc[k>>8&255]+Yc[k>>16&255]+Yc[k>>24&255]).toLowerCase()}function clamp$1(e,_,S){return Math.max(_,Math.min(S,e))}function euclideanModulo(e,_){return(e%_+_)%_}function lerp$1(e,_,S){return(1-S)*e+S*_}function denormalize(e,_){switch(_.constructor){case Float32Array:return e;case Uint32Array:return e/4294967295;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int32Array:return Math.max(e/2147483647,-1);case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}function normalize$6(e,_){switch(_.constructor){case Float32Array:return e;case Uint32Array:return Math.round(4294967295*e);case Uint16Array:return Math.round(65535*e);case Uint8Array:return Math.round(255*e);case Int32Array:return Math.round(2147483647*e);case Int16Array:return Math.round(32767*e);case Int8Array:return Math.round(127*e);default:throw new Error("Invalid component type.")}}var Zc=D("bm",{DEG2RAD:Jc,RAD2DEG:Qc,generateUUID:generateUUID,clamp:clamp$1,euclideanModulo:euclideanModulo,mapLinear:function(e,_,S,k,E){return k+(e-_)*(E-k)/(S-_)},inverseLerp:function(e,_,S){return e!==_?(S-e)/(_-e):0},lerp:lerp$1,damp:function(e,_,S,k){return lerp$1(e,_,1-Math.exp(-S*k))},pingpong:function(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return _-Math.abs(euclideanModulo(e,2*_)-_)},smoothstep:function(e,_,S){return e<=_?0:e>=S?1:(e=(e-_)/(S-_))*e*(3-2*e)},smootherstep:function(e,_,S){return e<=_?0:e>=S?1:(e=(e-_)/(S-_))*e*e*(e*(6*e-15)+10)},randInt:function(e,_){return e+Math.floor(Math.random()*(_-e+1))},randFloat:function(e,_){return e+Math.random()*(_-e)},randFloatSpread:function(e){return e*(.5-Math.random())},seededRandom:function(e){void 0!==e&&(Kc=e);var _=Kc+=1831565813;return _=Math.imul(_^_>>>15,1|_),(((_^=_+Math.imul(_^_>>>7,61|_))^_>>>14)>>>0)/4294967296},degToRad:function(e){return e*Jc},radToDeg:function(e){return e*Qc},isPowerOfTwo:function(e){return!(e&e-1)&&0!==e},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))},setQuaternionFromProperEuler:function(e,_,S,k,E){var T=Math.cos,M=Math.sin,I=T(S/2),R=M(S/2),O=T((_+k)/2),D=M((_+k)/2),L=T((_-k)/2),U=M((_-k)/2),B=T((k-_)/2),z=M((k-_)/2);switch(E){case"XYX":e.set(I*D,R*L,R*U,I*O);break;case"YZY":e.set(R*U,I*D,R*L,I*O);break;case"ZXZ":e.set(R*L,R*U,I*D,I*O);break;case"XZX":e.set(I*D,R*z,R*B,I*O);break;case"YXY":e.set(R*B,I*D,R*z,I*O);break;case"ZYZ":e.set(R*z,R*B,I*D,I*O)}},normalize:normalize$6,denormalize:denormalize}),$c=function(){return _createClass3(function Vector2(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;_classCallCheck3(this,Vector2),Vector2.prototype.isVector2=!0,this.x=e,this.y=_},[{key:"width",get:function(){return this.x},set:function(e){this.x=e}},{key:"height",get:function(){return this.y},set:function(e){this.y=e}},{key:"set",value:function(e,_){return this.x=e,this.y=_,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setComponent",value:function(e,_){switch(e){case 0:this.x=_;break;case 1:this.y=_;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this}},{key:"add",value:function(e){return this.x+=e.x,this.y+=e.y,this}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this}},{key:"addVectors",value:function(e,_){return this.x=e.x+_.x,this.y=e.y+_.y,this}},{key:"addScaledVector",value:function(e,_){return this.x+=e.x*_,this.y+=e.y*_,this}},{key:"sub",value:function(e){return this.x-=e.x,this.y-=e.y,this}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this}},{key:"subVectors",value:function(e,_){return this.x=e.x-_.x,this.y=e.y-_.y,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this}},{key:"divide",value:function(e){return this.x/=e.x,this.y/=e.y,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"applyMatrix3",value:function(e){var _=this.x,S=this.y,k=e.elements;return this.x=k[0]*_+k[3]*S+k[6],this.y=k[1]*_+k[4]*S+k[7],this}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}},{key:"clamp",value:function(e,_){return this.x=clamp$1(this.x,e.x,_.x),this.y=clamp$1(this.y,e.y,_.y),this}},{key:"clampScalar",value:function(e,_){return this.x=clamp$1(this.x,e,_),this.y=clamp$1(this.y,e,_),this}},{key:"clampLength",value:function(e,_){var S=this.length();return this.divideScalar(S||1).multiplyScalar(clamp$1(S,e,_))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},{key:"roundToZero",value:function(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y}},{key:"cross",value:function(e){return this.x*e.y-this.y*e.x}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"angle",value:function(){var e=Math.atan2(-this.y,-this.x)+Math.PI;return e}},{key:"angleTo",value:function(e){var _=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===_)return Math.PI/2;var S=this.dot(e)/_;return Math.acos(clamp$1(S,-1,1))}},{key:"distanceTo",value:function(e){return Math.sqrt(this.distanceToSquared(e))}},{key:"distanceToSquared",value:function(e){var _=this.x-e.x,S=this.y-e.y;return _*_+S*S}},{key:"manhattanDistanceTo",value:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,_){return this.x+=(e.x-this.x)*_,this.y+=(e.y-this.y)*_,this}},{key:"lerpVectors",value:function(e,_,S){return this.x=e.x+(_.x-e.x)*S,this.y=e.y+(_.y-e.y)*S,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y}},{key:"fromArray",value:function(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[_],this.y=e[_+1],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[_]=this.x,e[_+1]=this.y,e}},{key:"fromBufferAttribute",value:function(e,_){return this.x=e.getX(_),this.y=e.getY(_),this}},{key:"rotateAround",value:function(e,_){var S=Math.cos(_),k=Math.sin(_),E=this.x-e.x,T=this.y-e.y;return this.x=E*S-T*k+e.x,this.y=E*k+T*S+e.y,this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this}},{key:Symbol.iterator,value:_regenerator().m(function value(){return _regenerator().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.x;case 1:return e.n=2,this.y;case 2:return e.a(2)}},value,this)})}])}();D("aE",$c);var eh=function(){return _createClass3(function Quaternion(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,k=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;_classCallCheck3(this,Quaternion),this.isQuaternion=!0,this._x=e,this._y=_,this._z=S,this._w=k},[{key:"x",get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},{key:"w",get:function(){return this._w},set:function(e){this._w=e,this._onChangeCallback()}},{key:"set",value:function(e,_,S,k){return this._x=e,this._y=_,this._z=S,this._w=k,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._w)}},{key:"copy",value:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}},{key:"setFromEuler",value:function(e){var _=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],S=e._x,k=e._y,E=e._z,T=e._order,M=Math.cos,I=Math.sin,R=M(S/2),O=M(k/2),D=M(E/2),L=I(S/2),U=I(k/2),B=I(E/2);switch(T){case"XYZ":this._x=L*O*D+R*U*B,this._y=R*U*D-L*O*B,this._z=R*O*B+L*U*D,this._w=R*O*D-L*U*B;break;case"YXZ":this._x=L*O*D+R*U*B,this._y=R*U*D-L*O*B,this._z=R*O*B-L*U*D,this._w=R*O*D+L*U*B;break;case"ZXY":this._x=L*O*D-R*U*B,this._y=R*U*D+L*O*B,this._z=R*O*B+L*U*D,this._w=R*O*D-L*U*B;break;case"ZYX":this._x=L*O*D-R*U*B,this._y=R*U*D+L*O*B,this._z=R*O*B-L*U*D,this._w=R*O*D+L*U*B;break;case"YZX":this._x=L*O*D+R*U*B,this._y=R*U*D+L*O*B,this._z=R*O*B-L*U*D,this._w=R*O*D-L*U*B;break;case"XZY":this._x=L*O*D-R*U*B,this._y=R*U*D-L*O*B,this._z=R*O*B+L*U*D,this._w=R*O*D+L*U*B}return!0===_&&this._onChangeCallback(),this}},{key:"setFromAxisAngle",value:function(e,_){var S=_/2,k=Math.sin(S);return this._x=e.x*k,this._y=e.y*k,this._z=e.z*k,this._w=Math.cos(S),this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(e){var _=e.elements,S=_[0],k=_[4],E=_[8],T=_[1],M=_[5],I=_[9],R=_[2],O=_[6],D=_[10],L=S+M+D;if(L>0){var U=.5/Math.sqrt(L+1);this._w=.25/U,this._x=(O-I)*U,this._y=(E-R)*U,this._z=(T-k)*U}else if(S>M&&S>D){var B=2*Math.sqrt(1+S-M-D);this._w=(O-I)/B,this._x=.25*B,this._y=(k+T)/B,this._z=(E+R)/B}else if(M>D){var z=2*Math.sqrt(1+M-S-D);this._w=(E-R)/z,this._x=(k+T)/z,this._y=.25*z,this._z=(I+O)/z}else{var G=2*Math.sqrt(1+D-S-M);this._w=(T-k)/G,this._x=(E+R)/G,this._y=(I+O)/G,this._z=.25*G}return this._onChangeCallback(),this}},{key:"setFromUnitVectors",value:function(e,_){var S=e.dot(_)+1;return S<1e-8?(S=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=S):(this._x=0,this._y=-e.z,this._z=e.y,this._w=S)):(this._x=e.y*_.z-e.z*_.y,this._y=e.z*_.x-e.x*_.z,this._z=e.x*_.y-e.y*_.x,this._w=S),this.normalize()}},{key:"angleTo",value:function(e){return 2*Math.acos(Math.abs(clamp$1(this.dot(e),-1,1)))}},{key:"rotateTowards",value:function(e,_){var S=this.angleTo(e);if(0===S)return this;var k=Math.min(1,_/S);return this.slerp(e,k),this}},{key:"identity",value:function(){return this.set(0,0,0,1)}},{key:"invert",value:function(){return this.conjugate()}},{key:"conjugate",value:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}},{key:"dot",value:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}},{key:"lengthSq",value:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}},{key:"length",value:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}},{key:"normalize",value:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}},{key:"multiply",value:function(e){return this.multiplyQuaternions(this,e)}},{key:"premultiply",value:function(e){return this.multiplyQuaternions(e,this)}},{key:"multiplyQuaternions",value:function(e,_){var S=e._x,k=e._y,E=e._z,T=e._w,M=_._x,I=_._y,R=_._z,O=_._w;return this._x=S*O+T*M+k*R-E*I,this._y=k*O+T*I+E*M-S*R,this._z=E*O+T*R+S*I-k*M,this._w=T*O-S*M-k*I-E*R,this._onChangeCallback(),this}},{key:"slerp",value:function(e,_){if(0===_)return this;if(1===_)return this.copy(e);var S=this._x,k=this._y,E=this._z,T=this._w,M=T*e._w+S*e._x+k*e._y+E*e._z;if(M<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,M=-M):this.copy(e),M>=1)return this._w=T,this._x=S,this._y=k,this._z=E,this;var I=1-M*M;if(I<=Number.EPSILON){var R=1-_;return this._w=R*T+_*this._w,this._x=R*S+_*this._x,this._y=R*k+_*this._y,this._z=R*E+_*this._z,this.normalize(),this}var O=Math.sqrt(I),D=Math.atan2(O,M),L=Math.sin((1-_)*D)/O,U=Math.sin(_*D)/O;return this._w=T*L+this._w*U,this._x=S*L+this._x*U,this._y=k*L+this._y*U,this._z=E*L+this._z*U,this._onChangeCallback(),this}},{key:"slerpQuaternions",value:function(e,_,S){return this.copy(e).slerp(_,S)}},{key:"random",value:function(){var e=2*Math.PI*Math.random(),_=2*Math.PI*Math.random(),S=Math.random(),k=Math.sqrt(1-S),E=Math.sqrt(S);return this.set(k*Math.sin(e),k*Math.cos(e),E*Math.sin(_),E*Math.cos(_))}},{key:"equals",value:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}},{key:"fromArray",value:function(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._x=e[_],this._y=e[_+1],this._z=e[_+2],this._w=e[_+3],this._onChangeCallback(),this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[_]=this._x,e[_+1]=this._y,e[_+2]=this._z,e[_+3]=this._w,e}},{key:"fromBufferAttribute",value:function(e,_){return this._x=e.getX(_),this._y=e.getY(_),this._z=e.getZ(_),this._w=e.getW(_),this._onChangeCallback(),this}},{key:"toJSON",value:function(){return this.toArray()}},{key:"_onChange",value:function(e){return this._onChangeCallback=e,this}},{key:"_onChangeCallback",value:function(){}},{key:Symbol.iterator,value:_regenerator().m(function value(){return _regenerator().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this._x;case 1:return e.n=2,this._y;case 2:return e.n=3,this._z;case 3:return e.n=4,this._w;case 4:return e.a(2)}},value,this)})}],[{key:"slerpFlat",value:function(e,_,S,k,E,T,M){var I=S[k+0],R=S[k+1],O=S[k+2],D=S[k+3],L=E[T+0],U=E[T+1],B=E[T+2],z=E[T+3];if(0===M)return e[_+0]=I,e[_+1]=R,e[_+2]=O,void(e[_+3]=D);if(1===M)return e[_+0]=L,e[_+1]=U,e[_+2]=B,void(e[_+3]=z);if(D!==z||I!==L||R!==U||O!==B){var G=1-M,j=I*L+R*U+O*B+D*z,V=j>=0?1:-1,H=1-j*j;if(H>Number.EPSILON){var W=Math.sqrt(H),q=Math.atan2(W,j*V);G=Math.sin(G*q)/W,M=Math.sin(M*q)/W}var X=M*V;if(I=I*G+L*X,R=R*G+U*X,O=O*G+B*X,D=D*G+z*X,G===1-M){var Y=1/Math.sqrt(I*I+R*R+O*O+D*D);I*=Y,R*=Y,O*=Y,D*=Y}}e[_]=I,e[_+1]=R,e[_+2]=O,e[_+3]=D}},{key:"multiplyQuaternionsFlat",value:function(e,_,S,k,E,T){var M=S[k],I=S[k+1],R=S[k+2],O=S[k+3],D=E[T],L=E[T+1],U=E[T+2],B=E[T+3];return e[_]=M*B+O*D+I*U-R*L,e[_+1]=I*B+O*L+R*D-M*U,e[_+2]=R*B+O*U+M*L-I*D,e[_+3]=O*B-M*D-I*L-R*U,e}}])}(),th=function(){return _createClass3(function Vector3(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;_classCallCheck3(this,Vector3),Vector3.prototype.isVector3=!0,this.x=e,this.y=_,this.z=S},[{key:"set",value:function(e,_,S){return void 0===S&&(S=this.z),this.x=e,this.y=_,this.z=S,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this.z=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setZ",value:function(e){return this.z=e,this}},{key:"setComponent",value:function(e,_){switch(e){case 0:this.x=_;break;case 1:this.y=_;break;case 2:this.z=_;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}},{key:"add",value:function(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this.z+=e,this}},{key:"addVectors",value:function(e,_){return this.x=e.x+_.x,this.y=e.y+_.y,this.z=e.z+_.z,this}},{key:"addScaledVector",value:function(e,_){return this.x+=e.x*_,this.y+=e.y*_,this.z+=e.z*_,this}},{key:"sub",value:function(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this.z-=e,this}},{key:"subVectors",value:function(e,_){return this.x=e.x-_.x,this.y=e.y-_.y,this.z=e.z-_.z,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this.z*=e,this}},{key:"multiplyVectors",value:function(e,_){return this.x=e.x*_.x,this.y=e.y*_.y,this.z=e.z*_.z,this}},{key:"applyEuler",value:function(e){return this.applyQuaternion(nh.setFromEuler(e))}},{key:"applyAxisAngle",value:function(e,_){return this.applyQuaternion(nh.setFromAxisAngle(e,_))}},{key:"applyMatrix3",value:function(e){var _=this.x,S=this.y,k=this.z,E=e.elements;return this.x=E[0]*_+E[3]*S+E[6]*k,this.y=E[1]*_+E[4]*S+E[7]*k,this.z=E[2]*_+E[5]*S+E[8]*k,this}},{key:"applyNormalMatrix",value:function(e){return this.applyMatrix3(e).normalize()}},{key:"applyMatrix4",value:function(e){var _=this.x,S=this.y,k=this.z,E=e.elements,T=1/(E[3]*_+E[7]*S+E[11]*k+E[15]);return this.x=(E[0]*_+E[4]*S+E[8]*k+E[12])*T,this.y=(E[1]*_+E[5]*S+E[9]*k+E[13])*T,this.z=(E[2]*_+E[6]*S+E[10]*k+E[14])*T,this}},{key:"applyQuaternion",value:function(e){var _=this.x,S=this.y,k=this.z,E=e.x,T=e.y,M=e.z,I=e.w,R=2*(T*k-M*S),O=2*(M*_-E*k),D=2*(E*S-T*_);return this.x=_+I*R+T*D-M*O,this.y=S+I*O+M*R-E*D,this.z=k+I*D+E*O-T*R,this}},{key:"project",value:function(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}},{key:"unproject",value:function(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}},{key:"transformDirection",value:function(e){var _=this.x,S=this.y,k=this.z,E=e.elements;return this.x=E[0]*_+E[4]*S+E[8]*k,this.y=E[1]*_+E[5]*S+E[9]*k,this.z=E[2]*_+E[6]*S+E[10]*k,this.normalize()}},{key:"divide",value:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}},{key:"clamp",value:function(e,_){return this.x=clamp$1(this.x,e.x,_.x),this.y=clamp$1(this.y,e.y,_.y),this.z=clamp$1(this.z,e.z,_.z),this}},{key:"clampScalar",value:function(e,_){return this.x=clamp$1(this.x,e,_),this.y=clamp$1(this.y,e,_),this.z=clamp$1(this.z,e,_),this}},{key:"clampLength",value:function(e,_){var S=this.length();return this.divideScalar(S||1).multiplyScalar(clamp$1(S,e,_))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}},{key:"roundToZero",value:function(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,_){return this.x+=(e.x-this.x)*_,this.y+=(e.y-this.y)*_,this.z+=(e.z-this.z)*_,this}},{key:"lerpVectors",value:function(e,_,S){return this.x=e.x+(_.x-e.x)*S,this.y=e.y+(_.y-e.y)*S,this.z=e.z+(_.z-e.z)*S,this}},{key:"cross",value:function(e){return this.crossVectors(this,e)}},{key:"crossVectors",value:function(e,_){var S=e.x,k=e.y,E=e.z,T=_.x,M=_.y,I=_.z;return this.x=k*I-E*M,this.y=E*T-S*I,this.z=S*M-k*T,this}},{key:"projectOnVector",value:function(e){var _=e.lengthSq();if(0===_)return this.set(0,0,0);var S=e.dot(this)/_;return this.copy(e).multiplyScalar(S)}},{key:"projectOnPlane",value:function(e){return rh.copy(this).projectOnVector(e),this.sub(rh)}},{key:"reflect",value:function(e){return this.sub(rh.copy(e).multiplyScalar(2*this.dot(e)))}},{key:"angleTo",value:function(e){var _=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===_)return Math.PI/2;var S=this.dot(e)/_;return Math.acos(clamp$1(S,-1,1))}},{key:"distanceTo",value:function(e){return Math.sqrt(this.distanceToSquared(e))}},{key:"distanceToSquared",value:function(e){var _=this.x-e.x,S=this.y-e.y,k=this.z-e.z;return _*_+S*S+k*k}},{key:"manhattanDistanceTo",value:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}},{key:"setFromSpherical",value:function(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}},{key:"setFromSphericalCoords",value:function(e,_,S){var k=Math.sin(_)*e;return this.x=k*Math.sin(S),this.y=Math.cos(_)*e,this.z=k*Math.cos(S),this}},{key:"setFromCylindrical",value:function(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}},{key:"setFromCylindricalCoords",value:function(e,_,S){return this.x=e*Math.sin(_),this.y=S,this.z=e*Math.cos(_),this}},{key:"setFromMatrixPosition",value:function(e){var _=e.elements;return this.x=_[12],this.y=_[13],this.z=_[14],this}},{key:"setFromMatrixScale",value:function(e){var _=this.setFromMatrixColumn(e,0).length(),S=this.setFromMatrixColumn(e,1).length(),k=this.setFromMatrixColumn(e,2).length();return this.x=_,this.y=S,this.z=k,this}},{key:"setFromMatrixColumn",value:function(e,_){return this.fromArray(e.elements,4*_)}},{key:"setFromMatrix3Column",value:function(e,_){return this.fromArray(e.elements,3*_)}},{key:"setFromEuler",value:function(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}},{key:"setFromColor",value:function(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}},{key:"fromArray",value:function(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[_],this.y=e[_+1],this.z=e[_+2],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[_]=this.x,e[_+1]=this.y,e[_+2]=this.z,e}},{key:"fromBufferAttribute",value:function(e,_){return this.x=e.getX(_),this.y=e.getY(_),this.z=e.getZ(_),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}},{key:"randomDirection",value:function(){var e=Math.random()*Math.PI*2,_=2*Math.random()-1,S=Math.sqrt(1-_*_);return this.x=S*Math.cos(e),this.y=_,this.z=S*Math.sin(e),this}},{key:Symbol.iterator,value:_regenerator().m(function value(){return _regenerator().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.x;case 1:return e.n=2,this.y;case 2:return e.n=3,this.z;case 3:return e.a(2)}},value,this)})}])}();D("aF",th);var rh=new th,nh=new eh,ih=function(){return _createClass3(function Matrix3(e,_,S,k,E,T,M,I,R){_classCallCheck3(this,Matrix3),Matrix3.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==e&&this.set(e,_,S,k,E,T,M,I,R)},[{key:"set",value:function(e,_,S,k,E,T,M,I,R){var O=this.elements;return O[0]=e,O[1]=k,O[2]=M,O[3]=_,O[4]=E,O[5]=I,O[6]=S,O[7]=T,O[8]=R,this}},{key:"identity",value:function(){return this.set(1,0,0,0,1,0,0,0,1),this}},{key:"copy",value:function(e){var _=this.elements,S=e.elements;return _[0]=S[0],_[1]=S[1],_[2]=S[2],_[3]=S[3],_[4]=S[4],_[5]=S[5],_[6]=S[6],_[7]=S[7],_[8]=S[8],this}},{key:"extractBasis",value:function(e,_,S){return e.setFromMatrix3Column(this,0),_.setFromMatrix3Column(this,1),S.setFromMatrix3Column(this,2),this}},{key:"setFromMatrix4",value:function(e){var _=e.elements;return this.set(_[0],_[4],_[8],_[1],_[5],_[9],_[2],_[6],_[10]),this}},{key:"multiply",value:function(e){return this.multiplyMatrices(this,e)}},{key:"premultiply",value:function(e){return this.multiplyMatrices(e,this)}},{key:"multiplyMatrices",value:function(e,_){var S=e.elements,k=_.elements,E=this.elements,T=S[0],M=S[3],I=S[6],R=S[1],O=S[4],D=S[7],L=S[2],U=S[5],B=S[8],z=k[0],G=k[3],j=k[6],V=k[1],H=k[4],W=k[7],q=k[2],X=k[5],Y=k[8];return E[0]=T*z+M*V+I*q,E[3]=T*G+M*H+I*X,E[6]=T*j+M*W+I*Y,E[1]=R*z+O*V+D*q,E[4]=R*G+O*H+D*X,E[7]=R*j+O*W+D*Y,E[2]=L*z+U*V+B*q,E[5]=L*G+U*H+B*X,E[8]=L*j+U*W+B*Y,this}},{key:"multiplyScalar",value:function(e){var _=this.elements;return _[0]*=e,_[3]*=e,_[6]*=e,_[1]*=e,_[4]*=e,_[7]*=e,_[2]*=e,_[5]*=e,_[8]*=e,this}},{key:"determinant",value:function(){var e=this.elements,_=e[0],S=e[1],k=e[2],E=e[3],T=e[4],M=e[5],I=e[6],R=e[7],O=e[8];return _*T*O-_*M*R-S*E*O+S*M*I+k*E*R-k*T*I}},{key:"invert",value:function(){var e=this.elements,_=e[0],S=e[1],k=e[2],E=e[3],T=e[4],M=e[5],I=e[6],R=e[7],O=e[8],D=O*T-M*R,L=M*I-O*E,U=R*E-T*I,B=_*D+S*L+k*U;if(0===B)return this.set(0,0,0,0,0,0,0,0,0);var z=1/B;return e[0]=D*z,e[1]=(k*R-O*S)*z,e[2]=(M*S-k*T)*z,e[3]=L*z,e[4]=(O*_-k*I)*z,e[5]=(k*E-M*_)*z,e[6]=U*z,e[7]=(S*I-R*_)*z,e[8]=(T*_-S*E)*z,this}},{key:"transpose",value:function(){var e,_=this.elements;return e=_[1],_[1]=_[3],_[3]=e,e=_[2],_[2]=_[6],_[6]=e,e=_[5],_[5]=_[7],_[7]=e,this}},{key:"getNormalMatrix",value:function(e){return this.setFromMatrix4(e).invert().transpose()}},{key:"transposeIntoArray",value:function(e){var _=this.elements;return e[0]=_[0],e[1]=_[3],e[2]=_[6],e[3]=_[1],e[4]=_[4],e[5]=_[7],e[6]=_[2],e[7]=_[5],e[8]=_[8],this}},{key:"setUvTransform",value:function(e,_,S,k,E,T,M){var I=Math.cos(E),R=Math.sin(E);return this.set(S*I,S*R,-S*(I*T+R*M)+T+e,-k*R,k*I,-k*(-R*T+I*M)+M+_,0,0,1),this}},{key:"scale",value:function(e,_){return this.premultiply(ah.makeScale(e,_)),this}},{key:"rotate",value:function(e){return this.premultiply(ah.makeRotation(-e)),this}},{key:"translate",value:function(e,_){return this.premultiply(ah.makeTranslation(e,_)),this}},{key:"makeTranslation",value:function(e,_){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,_,0,0,1),this}},{key:"makeRotation",value:function(e){var _=Math.cos(e),S=Math.sin(e);return this.set(_,-S,0,S,_,0,0,0,1),this}},{key:"makeScale",value:function(e,_){return this.set(e,0,0,0,_,0,0,0,1),this}},{key:"equals",value:function(e){for(var _=this.elements,S=e.elements,k=0;k<9;k++)if(_[k]!==S[k])return!1;return!0}},{key:"fromArray",value:function(e){for(var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,S=0;S<9;S++)this.elements[S]=e[S+_];return this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,S=this.elements;return e[_]=S[0],e[_+1]=S[1],e[_+2]=S[2],e[_+3]=S[3],e[_+4]=S[4],e[_+5]=S[5],e[_+6]=S[6],e[_+7]=S[7],e[_+8]=S[8],e}},{key:"clone",value:function(){return(new this.constructor).fromArray(this.elements)}}])}(),ah=new ih;function arrayNeedsUint32(e){for(var _=e.length-1;_>=0;--_)if(e[_]>=65535)return!0;return!1}var oh={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function getTypedArray(e,_){return new oh[e](_)}function createElementNS(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}function createCanvasElement(){var e=createElementNS("canvas");return e.style.display="block",e}var sh={};function warnOnce(e){e in sh||(sh[e]=!0)}function probeAsync(e,_,S){return new Promise(function(k,E){setTimeout(function probe(){switch(e.clientWaitSync(_,e.SYNC_FLUSH_COMMANDS_BIT,0)){case e.WAIT_FAILED:E();break;case e.TIMEOUT_EXPIRED:setTimeout(probe,S);break;default:k()}},S)})}var uh=(new ih).set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),lh=(new ih).set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function createColorManagement(){var e={enabled:!0,workingColorSpace:Nc,spaces:{},convert:function(e,_,S){return!1!==this.enabled&&_!==S&&_&&S?(this.spaces[_].transfer===Gc&&(e.r=SRGBToLinear(e.r),e.g=SRGBToLinear(e.g),e.b=SRGBToLinear(e.b)),this.spaces[_].primaries!==this.spaces[S].primaries&&(e.applyMatrix3(this.spaces[_].toXYZ),e.applyMatrix3(this.spaces[S].fromXYZ)),this.spaces[S].transfer===Gc&&(e.r=LinearToSRGB(e.r),e.g=LinearToSRGB(e.g),e.b=LinearToSRGB(e.b)),e):e},workingToColorSpace:function(e,_){return this.convert(e,this.workingColorSpace,_)},colorSpaceToWorking:function(e,_){return this.convert(e,_,this.workingColorSpace)},getPrimaries:function(e){return this.spaces[e].primaries},getTransfer:function(e){return e===Uc?zc:this.spaces[e].transfer},getToneMappingMode:function(e){return this.spaces[e].outputColorSpaceConfig.toneMappingMode||"standard"},getLuminanceCoefficients:function(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.workingColorSpace;return e.fromArray(this.spaces[_].luminanceCoefficients)},define:function(e){Object.assign(this.spaces,e)},_getMatrix:function(e,_,S){return e.copy(this.spaces[_].toXYZ).multiply(this.spaces[S].fromXYZ)},_getDrawingBufferColorSpace:function(e){return this.spaces[e].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.workingColorSpace;return this.spaces[e].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(_,S){return warnOnce("THREE.ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),e.workingToColorSpace(_,S)},toWorkingColorSpace:function(_,S){return warnOnce("THREE.ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),e.colorSpaceToWorking(_,S)}},_=[.64,.33,.3,.6,.15,.06],S=[.2126,.7152,.0722],k=[.3127,.329];return e.define(_defineProperty3(_defineProperty3({},Nc,{primaries:_,whitePoint:k,transfer:zc,toXYZ:uh,fromXYZ:lh,luminanceCoefficients:S,workingColorSpaceConfig:{unpackColorSpace:Bc},outputColorSpaceConfig:{drawingBufferColorSpace:Bc}}),Bc,{primaries:_,whitePoint:k,transfer:Gc,toXYZ:uh,fromXYZ:lh,luminanceCoefficients:S,outputColorSpaceConfig:{drawingBufferColorSpace:Bc}})),e}var ch,hh=D("aH",createColorManagement());function SRGBToLinear(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function LinearToSRGB(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}var dh=function(){return _createClass3(function ImageUtils(){_classCallCheck3(this,ImageUtils)},null,[{key:"getDataURL",value:function(e){var _,S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"image/png";if(/^data:/i.test(e.src))return e.src;if("undefined"==typeof HTMLCanvasElement)return e.src;if(e instanceof HTMLCanvasElement)_=e;else{void 0===ch&&(ch=createElementNS("canvas")),ch.width=e.width,ch.height=e.height;var k=ch.getContext("2d");e instanceof ImageData?k.putImageData(e,0,0):k.drawImage(e,0,0,e.width,e.height),_=ch}return _.toDataURL(S)}},{key:"sRGBToLinear",value:function(e){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){var _=createElementNS("canvas");_.width=e.width,_.height=e.height;var S=_.getContext("2d");S.drawImage(e,0,0,e.width,e.height);for(var k=S.getImageData(0,0,e.width,e.height),E=k.data,T=0;T<E.length;T++)E[T]=255*SRGBToLinear(E[T]/255);return S.putImageData(k,0,0),_}if(e.data){for(var M=e.data.slice(0),I=0;I<M.length;I++)M instanceof Uint8Array||M instanceof Uint8ClampedArray?M[I]=Math.floor(255*SRGBToLinear(M[I]/255)):M[I]=SRGBToLinear(M[I]);return{data:M,width:e.width,height:e.height}}return e}}])}(),fh=0,ph=function(){return _createClass3(function Source(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;_classCallCheck3(this,Source),this.isSource=!0,Object.defineProperty(this,"id",{value:fh++}),this.uuid=generateUUID(),this.data=e,this.dataReady=!0,this.version=0},[{key:"getSize",value:function(e){var _=this.data;return"undefined"!=typeof HTMLVideoElement&&_ instanceof HTMLVideoElement?e.set(_.videoWidth,_.videoHeight,0):_ instanceof VideoFrame?e.set(_.displayHeight,_.displayWidth,0):null!==_?e.set(_.width,_.height,_.depth||0):e.set(0,0,0),e}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"toJSON",value:function(e){var _=void 0===e||"string"==typeof e;if(!_&&void 0!==e.images[this.uuid])return e.images[this.uuid];var S={uuid:this.uuid,url:""},k=this.data;if(null!==k){var E;if(Array.isArray(k)){E=[];for(var T=0,M=k.length;T<M;T++)k[T].isDataTexture?E.push(serializeImage(k[T].image)):E.push(serializeImage(k[T]))}else E=serializeImage(k);S.url=E}return _||(e.images[this.uuid]=S),S}}])}();function serializeImage(e){return"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap?dh.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:{}}var vh=0,gh=new th,mh=function(e){function Texture(){var e,_=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Texture.DEFAULT_IMAGE,S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Texture.DEFAULT_MAPPING,k=arguments.length>2&&void 0!==arguments[2]?arguments[2]:yl,E=arguments.length>3&&void 0!==arguments[3]?arguments[3]:yl,T=arguments.length>4&&void 0!==arguments[4]?arguments[4]:xl,M=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Cl,I=arguments.length>6&&void 0!==arguments[6]?arguments[6]:jl,R=arguments.length>7&&void 0!==arguments[7]?arguments[7]:El,O=arguments.length>8&&void 0!==arguments[8]?arguments[8]:Texture.DEFAULT_ANISOTROPY,D=arguments.length>9&&void 0!==arguments[9]?arguments[9]:Uc;return _classCallCheck3(this,Texture),(e=_callSuper(this,Texture)).isTexture=!0,Object.defineProperty(e,"id",{value:vh++}),e.uuid=generateUUID(),e.name="",e.source=new ph(_),e.mipmaps=[],e.mapping=S,e.channel=0,e.wrapS=k,e.wrapT=E,e.magFilter=T,e.minFilter=M,e.anisotropy=O,e.format=I,e.internalFormat=null,e.type=R,e.offset=new $c(0,0),e.repeat=new $c(1,1),e.center=new $c(0,0),e.rotation=0,e.matrixAutoUpdate=!0,e.matrix=new ih,e.generateMipmaps=!0,e.premultiplyAlpha=!1,e.flipY=!0,e.unpackAlignment=4,e.colorSpace=D,e.userData={},e.updateRanges=[],e.version=0,e.onUpdate=null,e.renderTarget=null,e.isRenderTargetTexture=!1,e.isArrayTexture=!!(_&&_.depth&&_.depth>1),e.pmremVersion=0,e}return _inherits(Texture,e),_createClass3(Texture,[{key:"width",get:function(){return this.source.getSize(gh).x}},{key:"height",get:function(){return this.source.getSize(gh).y}},{key:"depth",get:function(){return this.source.getSize(gh).z}},{key:"image",get:function(){return this.source.data},set:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.source.data=e}},{key:"updateMatrix",value:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}},{key:"addUpdateRange",value:function(e,_){this.updateRanges.push({start:e,count:_})}},{key:"clearUpdateRanges",value:function(){this.updateRanges.length=0}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.isArrayTexture=e.isArrayTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}},{key:"setValues",value:function(e){for(var _ in e){var S=e[_];if(void 0!==S){var k=this[_];void 0!==k&&(k&&S&&k.isVector2&&S.isVector2||k&&S&&k.isVector3&&S.isVector3||k&&S&&k.isMatrix3&&S.isMatrix3?k.copy(S):this[_]=S)}}}},{key:"toJSON",value:function(e){var _=void 0===e||"string"==typeof e;if(!_&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];var S={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(S.userData=this.userData),_||(e.textures[this.uuid]=S),S}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}},{key:"transformUv",value:function(e){if(this.mapping!==hl)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case ml:e.x=e.x-Math.floor(e.x);break;case yl:e.x=e.x<0?0:1;break;case _l:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case ml:e.y=e.y-Math.floor(e.y);break;case yl:e.y=e.y<0?0:1;break;case _l:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}},{key:"needsUpdate",set:function(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}},{key:"needsPMREMUpdate",set:function(e){!0===e&&this.pmremVersion++}}])}(Xc);mh.DEFAULT_IMAGE=null,mh.DEFAULT_MAPPING=hl,mh.DEFAULT_ANISOTROPY=1;var yh=function(){return _createClass3(function Vector4(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,k=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;_classCallCheck3(this,Vector4),Vector4.prototype.isVector4=!0,this.x=e,this.y=_,this.z=S,this.w=k},[{key:"width",get:function(){return this.z},set:function(e){this.z=e}},{key:"height",get:function(){return this.w},set:function(e){this.w=e}},{key:"set",value:function(e,_,S,k){return this.x=e,this.y=_,this.z=S,this.w=k,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setZ",value:function(e){return this.z=e,this}},{key:"setW",value:function(e){return this.w=e,this}},{key:"setComponent",value:function(e,_){switch(e){case 0:this.x=_;break;case 1:this.y=_;break;case 2:this.z=_;break;case 3:this.w=_;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z,this.w)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}},{key:"add",value:function(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}},{key:"addVectors",value:function(e,_){return this.x=e.x+_.x,this.y=e.y+_.y,this.z=e.z+_.z,this.w=e.w+_.w,this}},{key:"addScaledVector",value:function(e,_){return this.x+=e.x*_,this.y+=e.y*_,this.z+=e.z*_,this.w+=e.w*_,this}},{key:"sub",value:function(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}},{key:"subVectors",value:function(e,_){return this.x=e.x-_.x,this.y=e.y-_.y,this.z=e.z-_.z,this.w=e.w-_.w,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}},{key:"applyMatrix4",value:function(e){var _=this.x,S=this.y,k=this.z,E=this.w,T=e.elements;return this.x=T[0]*_+T[4]*S+T[8]*k+T[12]*E,this.y=T[1]*_+T[5]*S+T[9]*k+T[13]*E,this.z=T[2]*_+T[6]*S+T[10]*k+T[14]*E,this.w=T[3]*_+T[7]*S+T[11]*k+T[15]*E,this}},{key:"divide",value:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"setAxisAngleFromQuaternion",value:function(e){this.w=2*Math.acos(e.w);var _=Math.sqrt(1-e.w*e.w);return _<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/_,this.y=e.y/_,this.z=e.z/_),this}},{key:"setAxisAngleFromRotationMatrix",value:function(e){var _,S,k,E,T=.01,M=.1,I=e.elements,R=I[0],O=I[4],D=I[8],L=I[1],U=I[5],B=I[9],z=I[2],G=I[6],j=I[10];if(Math.abs(O-L)<T&&Math.abs(D-z)<T&&Math.abs(B-G)<T){if(Math.abs(O+L)<M&&Math.abs(D+z)<M&&Math.abs(B+G)<M&&Math.abs(R+U+j-3)<M)return this.set(1,0,0,0),this;_=Math.PI;var V=(R+1)/2,H=(U+1)/2,W=(j+1)/2,q=(O+L)/4,X=(D+z)/4,Y=(B+G)/4;return V>H&&V>W?V<T?(S=0,k=.707106781,E=.707106781):(k=q/(S=Math.sqrt(V)),E=X/S):H>W?H<T?(S=.707106781,k=0,E=.707106781):(S=q/(k=Math.sqrt(H)),E=Y/k):W<T?(S=.707106781,k=.707106781,E=0):(S=X/(E=Math.sqrt(W)),k=Y/E),this.set(S,k,E,_),this}var K=Math.sqrt((G-B)*(G-B)+(D-z)*(D-z)+(L-O)*(L-O));return Math.abs(K)<.001&&(K=1),this.x=(G-B)/K,this.y=(D-z)/K,this.z=(L-O)/K,this.w=Math.acos((R+U+j-1)/2),this}},{key:"setFromMatrixPosition",value:function(e){var _=e.elements;return this.x=_[12],this.y=_[13],this.z=_[14],this.w=_[15],this}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}},{key:"clamp",value:function(e,_){return this.x=clamp$1(this.x,e.x,_.x),this.y=clamp$1(this.y,e.y,_.y),this.z=clamp$1(this.z,e.z,_.z),this.w=clamp$1(this.w,e.w,_.w),this}},{key:"clampScalar",value:function(e,_){return this.x=clamp$1(this.x,e,_),this.y=clamp$1(this.y,e,_),this.z=clamp$1(this.z,e,_),this.w=clamp$1(this.w,e,_),this}},{key:"clampLength",value:function(e,_){var S=this.length();return this.divideScalar(S||1).multiplyScalar(clamp$1(S,e,_))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}},{key:"roundToZero",value:function(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,_){return this.x+=(e.x-this.x)*_,this.y+=(e.y-this.y)*_,this.z+=(e.z-this.z)*_,this.w+=(e.w-this.w)*_,this}},{key:"lerpVectors",value:function(e,_,S){return this.x=e.x+(_.x-e.x)*S,this.y=e.y+(_.y-e.y)*S,this.z=e.z+(_.z-e.z)*S,this.w=e.w+(_.w-e.w)*S,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}},{key:"fromArray",value:function(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[_],this.y=e[_+1],this.z=e[_+2],this.w=e[_+3],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[_]=this.x,e[_+1]=this.y,e[_+2]=this.z,e[_+3]=this.w,e}},{key:"fromBufferAttribute",value:function(e,_){return this.x=e.getX(_),this.y=e.getY(_),this.z=e.getZ(_),this.w=e.getW(_),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}},{key:Symbol.iterator,value:_regenerator().m(function value(){return _regenerator().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.x;case 1:return e.n=2,this.y;case 2:return e.n=3,this.z;case 3:return e.n=4,this.w;case 4:return e.a(2)}},value,this)})}])}();D("ch",yh);var _h=function(e){function RenderTarget(){var e,_=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,k=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};_classCallCheck3(this,RenderTarget),e=_callSuper(this,RenderTarget),k=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:xl,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},k),e.isRenderTarget=!0,e.width=_,e.height=S,e.depth=k.depth,e.scissor=new yh(0,0,_,S),e.scissorTest=!1,e.viewport=new yh(0,0,_,S);var E={width:_,height:S,depth:k.depth},T=new mh(E);e.textures=[];for(var M=k.count,I=0;I<M;I++)e.textures[I]=T.clone(),e.textures[I].isRenderTargetTexture=!0,e.textures[I].renderTarget=e;return e._setTextureOptions(k),e.depthBuffer=k.depthBuffer,e.stencilBuffer=k.stencilBuffer,e.resolveDepthBuffer=k.resolveDepthBuffer,e.resolveStencilBuffer=k.resolveStencilBuffer,e._depthTexture=null,e.depthTexture=k.depthTexture,e.samples=k.samples,e.multiview=k.multiview,e}return _inherits(RenderTarget,e),_createClass3(RenderTarget,[{key:"_setTextureOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_={minFilter:xl,generateMipmaps:!1,flipY:!1,internalFormat:null};void 0!==e.mapping&&(_.mapping=e.mapping),void 0!==e.wrapS&&(_.wrapS=e.wrapS),void 0!==e.wrapT&&(_.wrapT=e.wrapT),void 0!==e.wrapR&&(_.wrapR=e.wrapR),void 0!==e.magFilter&&(_.magFilter=e.magFilter),void 0!==e.minFilter&&(_.minFilter=e.minFilter),void 0!==e.format&&(_.format=e.format),void 0!==e.type&&(_.type=e.type),void 0!==e.anisotropy&&(_.anisotropy=e.anisotropy),void 0!==e.colorSpace&&(_.colorSpace=e.colorSpace),void 0!==e.flipY&&(_.flipY=e.flipY),void 0!==e.generateMipmaps&&(_.generateMipmaps=e.generateMipmaps),void 0!==e.internalFormat&&(_.internalFormat=e.internalFormat);for(var S=0;S<this.textures.length;S++){this.textures[S].setValues(_)}}},{key:"texture",get:function(){return this.textures[0]},set:function(e){this.textures[0]=e}},{key:"depthTexture",get:function(){return this._depthTexture},set:function(e){null!==this._depthTexture&&(this._depthTexture.renderTarget=null),null!==e&&(e.renderTarget=this),this._depthTexture=e}},{key:"setSize",value:function(e,_){var S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(this.width!==e||this.height!==_||this.depth!==S){this.width=e,this.height=_,this.depth=S;for(var k=0,E=this.textures.length;k<E;k++)this.textures[k].image.width=e,this.textures[k].image.height=_,this.textures[k].image.depth=S,this.textures[k].isArrayTexture=this.textures[k].image.depth>1;this.dispose()}this.viewport.set(0,0,e,_),this.scissor.set(0,0,e,_)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(var _=0,S=e.textures.length;_<S;_++){this.textures[_]=e.textures[_].clone(),this.textures[_].isRenderTargetTexture=!0,this.textures[_].renderTarget=this;var k=Object.assign({},e.textures[_].image);this.textures[_].source=new ph(k)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}])}(Xc),bh=function(e){function WebGLRenderTarget(){var e,_=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,k=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return _classCallCheck3(this,WebGLRenderTarget),(e=_callSuper(this,WebGLRenderTarget,[_,S,k])).isWebGLRenderTarget=!0,e}return _inherits(WebGLRenderTarget,e),_createClass3(WebGLRenderTarget)}(_h),Sh=function(e){function DataArrayTexture(){var e,_=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,k=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,E=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return _classCallCheck3(this,DataArrayTexture),(e=_callSuper(this,DataArrayTexture,[null])).isDataArrayTexture=!0,e.image={data:_,width:S,height:k,depth:E},e.magFilter=bl,e.minFilter=bl,e.wrapR=yl,e.generateMipmaps=!1,e.flipY=!1,e.unpackAlignment=1,e.layerUpdates=new Set,e}return _inherits(DataArrayTexture,e),_createClass3(DataArrayTexture,[{key:"addLayerUpdate",value:function(e){this.layerUpdates.add(e)}},{key:"clearLayerUpdates",value:function(){this.layerUpdates.clear()}}])}(mh),wh=function(e){function WebGLArrayRenderTarget(){var e,_=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,k=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,E=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return _classCallCheck3(this,WebGLArrayRenderTarget),(e=_callSuper(this,WebGLArrayRenderTarget,[_,S,E])).isWebGLArrayRenderTarget=!0,e.depth=k,e.texture=new Sh(null,_,S,k),e._setTextureOptions(E),e.texture.isRenderTargetTexture=!0,e}return _inherits(WebGLArrayRenderTarget,e),_createClass3(WebGLArrayRenderTarget)}(bh),xh=function(e){function Data3DTexture(){var e,_=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,k=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,E=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return _classCallCheck3(this,Data3DTexture),(e=_callSuper(this,Data3DTexture,[null])).isData3DTexture=!0,e.image={data:_,width:S,height:k,depth:E},e.magFilter=bl,e.minFilter=bl,e.wrapR=yl,e.generateMipmaps=!1,e.flipY=!1,e.unpackAlignment=1,e}return _inherits(Data3DTexture,e),_createClass3(Data3DTexture)}(mh),kh=function(e){function WebGL3DRenderTarget(){var e,_=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,k=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,E=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return _classCallCheck3(this,WebGL3DRenderTarget),(e=_callSuper(this,WebGL3DRenderTarget,[_,S,E])).isWebGL3DRenderTarget=!0,e.depth=k,e.texture=new xh(null,_,S,k),e._setTextureOptions(E),e.texture.isRenderTargetTexture=!0,e}return _inherits(WebGL3DRenderTarget,e),_createClass3(WebGL3DRenderTarget)}(bh),Ch=function(){return _createClass3(function Box3(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new th(1/0,1/0,1/0),_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new th(-1/0,-1/0,-1/0);_classCallCheck3(this,Box3),this.isBox3=!0,this.min=e,this.max=_},[{key:"set",value:function(e,_){return this.min.copy(e),this.max.copy(_),this}},{key:"setFromArray",value:function(e){this.makeEmpty();for(var _=0,S=e.length;_<S;_+=3)this.expandByPoint(Eh.fromArray(e,_));return this}},{key:"setFromBufferAttribute",value:function(e){this.makeEmpty();for(var _=0,S=e.count;_<S;_++)this.expandByPoint(Eh.fromBufferAttribute(e,_));return this}},{key:"setFromPoints",value:function(e){this.makeEmpty();for(var _=0,S=e.length;_<S;_++)this.expandByPoint(e[_]);return this}},{key:"setFromCenterAndSize",value:function(e,_){var S=Eh.copy(_).multiplyScalar(.5);return this.min.copy(e).sub(S),this.max.copy(e).add(S),this}},{key:"setFromObject",value:function(e){var _=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.makeEmpty(),this.expandByObject(e,_)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.min.copy(e.min),this.max.copy(e.max),this}},{key:"makeEmpty",value:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}},{key:"isEmpty",value:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}},{key:"getCenter",value:function(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:"getSize",value:function(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}},{key:"expandByPoint",value:function(e){return this.min.min(e),this.max.max(e),this}},{key:"expandByVector",value:function(e){return this.min.sub(e),this.max.add(e),this}},{key:"expandByScalar",value:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this}},{key:"expandByObject",value:function(e){var _=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.updateWorldMatrix(!1,!1);var S=e.geometry;if(void 0!==S){var k=S.getAttribute("position");if(!0===_&&void 0!==k&&!0!==e.isInstancedMesh)for(var E=0,T=k.count;E<T;E++)!0===e.isMesh?e.getVertexPosition(E,Eh):Eh.fromBufferAttribute(k,E),Eh.applyMatrix4(e.matrixWorld),this.expandByPoint(Eh);else void 0!==e.boundingBox?(null===e.boundingBox&&e.computeBoundingBox(),Th.copy(e.boundingBox)):(null===S.boundingBox&&S.computeBoundingBox(),Th.copy(S.boundingBox)),Th.applyMatrix4(e.matrixWorld),this.union(Th)}for(var M=e.children,I=0,R=M.length;I<R;I++)this.expandByObject(M[I],_);return this}},{key:"containsPoint",value:function(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}},{key:"containsBox",value:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}},{key:"getParameter",value:function(e,_){return _.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}},{key:"intersectsBox",value:function(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}},{key:"intersectsSphere",value:function(e){return this.clampPoint(e.center,Eh),Eh.distanceToSquared(e.center)<=e.radius*e.radius}},{key:"intersectsPlane",value:function(e){var _,S;return e.normal.x>0?(_=e.normal.x*this.min.x,S=e.normal.x*this.max.x):(_=e.normal.x*this.max.x,S=e.normal.x*this.min.x),e.normal.y>0?(_+=e.normal.y*this.min.y,S+=e.normal.y*this.max.y):(_+=e.normal.y*this.max.y,S+=e.normal.y*this.min.y),e.normal.z>0?(_+=e.normal.z*this.min.z,S+=e.normal.z*this.max.z):(_+=e.normal.z*this.max.z,S+=e.normal.z*this.min.z),_<=-e.constant&&S>=-e.constant}},{key:"intersectsTriangle",value:function(e){if(this.isEmpty())return!1;this.getCenter(Lh),Fh.subVectors(this.max,Lh),Mh.subVectors(e.a,Lh),Ih.subVectors(e.b,Lh),Rh.subVectors(e.c,Lh),Ph.subVectors(Ih,Mh),Oh.subVectors(Rh,Ih),Dh.subVectors(Mh,Rh);var _=[0,-Ph.z,Ph.y,0,-Oh.z,Oh.y,0,-Dh.z,Dh.y,Ph.z,0,-Ph.x,Oh.z,0,-Oh.x,Dh.z,0,-Dh.x,-Ph.y,Ph.x,0,-Oh.y,Oh.x,0,-Dh.y,Dh.x,0];return!!satForAxes(_,Mh,Ih,Rh,Fh)&&(!!satForAxes(_=[1,0,0,0,1,0,0,0,1],Mh,Ih,Rh,Fh)&&(Uh.crossVectors(Ph,Oh),satForAxes(_=[Uh.x,Uh.y,Uh.z],Mh,Ih,Rh,Fh)))}},{key:"clampPoint",value:function(e,_){return _.copy(e).clamp(this.min,this.max)}},{key:"distanceToPoint",value:function(e){return this.clampPoint(e,Eh).distanceTo(e)}},{key:"getBoundingSphere",value:function(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=.5*this.getSize(Eh).length()),e}},{key:"intersect",value:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}},{key:"union",value:function(e){return this.min.min(e.min),this.max.max(e.max),this}},{key:"applyMatrix4",value:function(e){return this.isEmpty()||(Ah[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Ah[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Ah[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Ah[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Ah[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Ah[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Ah[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Ah[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Ah)),this}},{key:"translate",value:function(e){return this.min.add(e),this.max.add(e),this}},{key:"equals",value:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}},{key:"toJSON",value:function(){return{min:this.min.toArray(),max:this.max.toArray()}}},{key:"fromJSON",value:function(e){return this.min.fromArray(e.min),this.max.fromArray(e.max),this}}])}(),Ah=[new th,new th,new th,new th,new th,new th,new th,new th],Eh=new th,Th=new Ch,Mh=new th,Ih=new th,Rh=new th,Ph=new th,Oh=new th,Dh=new th,Lh=new th,Fh=new th,Uh=new th,Bh=new th;function satForAxes(e,_,S,k,E){for(var T=0,M=e.length-3;T<=M;T+=3){Bh.fromArray(e,T);var I=E.x*Math.abs(Bh.x)+E.y*Math.abs(Bh.y)+E.z*Math.abs(Bh.z),R=_.dot(Bh),O=S.dot(Bh),D=k.dot(Bh);if(Math.max(-Math.max(R,O,D),Math.min(R,O,D))>I)return!1}return!0}var Nh=new Ch,zh=new th,Gh=new th,jh=function(){return _createClass3(function Sphere(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new th,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;_classCallCheck3(this,Sphere),this.isSphere=!0,this.center=e,this.radius=_},[{key:"set",value:function(e,_){return this.center.copy(e),this.radius=_,this}},{key:"setFromPoints",value:function(e,_){var S=this.center;void 0!==_?S.copy(_):Nh.setFromPoints(e).getCenter(S);for(var k=0,E=0,T=e.length;E<T;E++)k=Math.max(k,S.distanceToSquared(e[E]));return this.radius=Math.sqrt(k),this}},{key:"copy",value:function(e){return this.center.copy(e.center),this.radius=e.radius,this}},{key:"isEmpty",value:function(){return this.radius<0}},{key:"makeEmpty",value:function(){return this.center.set(0,0,0),this.radius=-1,this}},{key:"containsPoint",value:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}},{key:"distanceToPoint",value:function(e){return e.distanceTo(this.center)-this.radius}},{key:"intersectsSphere",value:function(e){var _=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=_*_}},{key:"intersectsBox",value:function(e){return e.intersectsSphere(this)}},{key:"intersectsPlane",value:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}},{key:"clampPoint",value:function(e,_){var S=this.center.distanceToSquared(e);return _.copy(e),S>this.radius*this.radius&&(_.sub(this.center).normalize(),_.multiplyScalar(this.radius).add(this.center)),_}},{key:"getBoundingBox",value:function(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}},{key:"applyMatrix4",value:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}},{key:"translate",value:function(e){return this.center.add(e),this}},{key:"expandByPoint",value:function(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;zh.subVectors(e,this.center);var _=zh.lengthSq();if(_>this.radius*this.radius){var S=Math.sqrt(_),k=.5*(S-this.radius);this.center.addScaledVector(zh,k/S),this.radius+=k}return this}},{key:"union",value:function(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(Gh.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(zh.copy(e.center).add(Gh)),this.expandByPoint(zh.copy(e.center).sub(Gh))),this)}},{key:"equals",value:function(e){return e.center.equals(this.center)&&e.radius===this.radius}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"toJSON",value:function(){return{radius:this.radius,center:this.center.toArray()}}},{key:"fromJSON",value:function(e){return this.radius=e.radius,this.center.fromArray(e.center),this}}])}(),Vh=new th,Hh=new th,Wh=new th,qh=new th,Xh=new th,Yh=new th,Kh=new th,Jh=function(){return _createClass3(function Ray(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new th,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new th(0,0,-1);_classCallCheck3(this,Ray),this.origin=e,this.direction=_},[{key:"set",value:function(e,_){return this.origin.copy(e),this.direction.copy(_),this}},{key:"copy",value:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}},{key:"at",value:function(e,_){return _.copy(this.origin).addScaledVector(this.direction,e)}},{key:"lookAt",value:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this}},{key:"recast",value:function(e){return this.origin.copy(this.at(e,Vh)),this}},{key:"closestPointToPoint",value:function(e,_){_.subVectors(e,this.origin);var S=_.dot(this.direction);return S<0?_.copy(this.origin):_.copy(this.origin).addScaledVector(this.direction,S)}},{key:"distanceToPoint",value:function(e){return Math.sqrt(this.distanceSqToPoint(e))}},{key:"distanceSqToPoint",value:function(e){var _=Vh.subVectors(e,this.origin).dot(this.direction);return _<0?this.origin.distanceToSquared(e):(Vh.copy(this.origin).addScaledVector(this.direction,_),Vh.distanceToSquared(e))}},{key:"distanceSqToSegment",value:function(e,_,S,k){Hh.copy(e).add(_).multiplyScalar(.5),Wh.copy(_).sub(e).normalize(),qh.copy(this.origin).sub(Hh);var E,T,M,I,R=.5*e.distanceTo(_),O=-this.direction.dot(Wh),D=qh.dot(this.direction),L=-qh.dot(Wh),U=qh.lengthSq(),B=Math.abs(1-O*O);if(B>0)if(T=O*D-L,I=R*B,(E=O*L-D)>=0)if(T>=-I)if(T<=I){var z=1/B;M=(E*=z)*(E+O*(T*=z)+2*D)+T*(O*E+T+2*L)+U}else T=R,M=-(E=Math.max(0,-(O*T+D)))*E+T*(T+2*L)+U;else T=-R,M=-(E=Math.max(0,-(O*T+D)))*E+T*(T+2*L)+U;else T<=-I?M=-(E=Math.max(0,-(-O*R+D)))*E+(T=E>0?-R:Math.min(Math.max(-R,-L),R))*(T+2*L)+U:T<=I?(E=0,M=(T=Math.min(Math.max(-R,-L),R))*(T+2*L)+U):M=-(E=Math.max(0,-(O*R+D)))*E+(T=E>0?R:Math.min(Math.max(-R,-L),R))*(T+2*L)+U;else T=O>0?-R:R,M=-(E=Math.max(0,-(O*T+D)))*E+T*(T+2*L)+U;return S&&S.copy(this.origin).addScaledVector(this.direction,E),k&&k.copy(Hh).addScaledVector(Wh,T),M}},{key:"intersectSphere",value:function(e,_){Vh.subVectors(e.center,this.origin);var S=Vh.dot(this.direction),k=Vh.dot(Vh)-S*S,E=e.radius*e.radius;if(k>E)return null;var T=Math.sqrt(E-k),M=S-T,I=S+T;return I<0?null:M<0?this.at(I,_):this.at(M,_)}},{key:"intersectsSphere",value:function(e){return!(e.radius<0)&&this.distanceSqToPoint(e.center)<=e.radius*e.radius}},{key:"distanceToPlane",value:function(e){var _=e.normal.dot(this.direction);if(0===_)return 0===e.distanceToPoint(this.origin)?0:null;var S=-(this.origin.dot(e.normal)+e.constant)/_;return S>=0?S:null}},{key:"intersectPlane",value:function(e,_){var S=this.distanceToPlane(e);return null===S?null:this.at(S,_)}},{key:"intersectsPlane",value:function(e){var _=e.distanceToPoint(this.origin);return 0===_||e.normal.dot(this.direction)*_<0}},{key:"intersectBox",value:function(e,_){var S,k,E,T,M,I,R=1/this.direction.x,O=1/this.direction.y,D=1/this.direction.z,L=this.origin;return R>=0?(S=(e.min.x-L.x)*R,k=(e.max.x-L.x)*R):(S=(e.max.x-L.x)*R,k=(e.min.x-L.x)*R),O>=0?(E=(e.min.y-L.y)*O,T=(e.max.y-L.y)*O):(E=(e.max.y-L.y)*O,T=(e.min.y-L.y)*O),S>T||E>k?null:((E>S||isNaN(S))&&(S=E),(T<k||isNaN(k))&&(k=T),D>=0?(M=(e.min.z-L.z)*D,I=(e.max.z-L.z)*D):(M=(e.max.z-L.z)*D,I=(e.min.z-L.z)*D),S>I||M>k?null:((M>S||S!=S)&&(S=M),(I<k||k!=k)&&(k=I),k<0?null:this.at(S>=0?S:k,_)))}},{key:"intersectsBox",value:function(e){return null!==this.intersectBox(e,Vh)}},{key:"intersectTriangle",value:function(e,_,S,k,E){Xh.subVectors(_,e),Yh.subVectors(S,e),Kh.crossVectors(Xh,Yh);var T,M=this.direction.dot(Kh);if(M>0){if(k)return null;T=1}else{if(!(M<0))return null;T=-1,M=-M}qh.subVectors(this.origin,e);var I=T*this.direction.dot(Yh.crossVectors(qh,Yh));if(I<0)return null;var R=T*this.direction.dot(Xh.cross(qh));if(R<0)return null;if(I+R>M)return null;var O=-T*qh.dot(Kh);return O<0?null:this.at(O/M,E)}},{key:"applyMatrix4",value:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}},{key:"equals",value:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}])}(),Qh=function(){function Matrix4(e,_,S,k,E,T,M,I,R,O,D,L,U,B,z,G){_classCallCheck3(this,Matrix4),Matrix4.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==e&&this.set(e,_,S,k,E,T,M,I,R,O,D,L,U,B,z,G)}return _createClass3(Matrix4,[{key:"set",value:function(e,_,S,k,E,T,M,I,R,O,D,L,U,B,z,G){var j=this.elements;return j[0]=e,j[4]=_,j[8]=S,j[12]=k,j[1]=E,j[5]=T,j[9]=M,j[13]=I,j[2]=R,j[6]=O,j[10]=D,j[14]=L,j[3]=U,j[7]=B,j[11]=z,j[15]=G,this}},{key:"identity",value:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}},{key:"clone",value:function(){return(new Matrix4).fromArray(this.elements)}},{key:"copy",value:function(e){var _=this.elements,S=e.elements;return _[0]=S[0],_[1]=S[1],_[2]=S[2],_[3]=S[3],_[4]=S[4],_[5]=S[5],_[6]=S[6],_[7]=S[7],_[8]=S[8],_[9]=S[9],_[10]=S[10],_[11]=S[11],_[12]=S[12],_[13]=S[13],_[14]=S[14],_[15]=S[15],this}},{key:"copyPosition",value:function(e){var _=this.elements,S=e.elements;return _[12]=S[12],_[13]=S[13],_[14]=S[14],this}},{key:"setFromMatrix3",value:function(e){var _=e.elements;return this.set(_[0],_[3],_[6],0,_[1],_[4],_[7],0,_[2],_[5],_[8],0,0,0,0,1),this}},{key:"extractBasis",value:function(e,_,S){return e.setFromMatrixColumn(this,0),_.setFromMatrixColumn(this,1),S.setFromMatrixColumn(this,2),this}},{key:"makeBasis",value:function(e,_,S){return this.set(e.x,_.x,S.x,0,e.y,_.y,S.y,0,e.z,_.z,S.z,0,0,0,0,1),this}},{key:"extractRotation",value:function(e){var _=this.elements,S=e.elements,k=1/Zh.setFromMatrixColumn(e,0).length(),E=1/Zh.setFromMatrixColumn(e,1).length(),T=1/Zh.setFromMatrixColumn(e,2).length();return _[0]=S[0]*k,_[1]=S[1]*k,_[2]=S[2]*k,_[3]=0,_[4]=S[4]*E,_[5]=S[5]*E,_[6]=S[6]*E,_[7]=0,_[8]=S[8]*T,_[9]=S[9]*T,_[10]=S[10]*T,_[11]=0,_[12]=0,_[13]=0,_[14]=0,_[15]=1,this}},{key:"makeRotationFromEuler",value:function(e){var _=this.elements,S=e.x,k=e.y,E=e.z,T=Math.cos(S),M=Math.sin(S),I=Math.cos(k),R=Math.sin(k),O=Math.cos(E),D=Math.sin(E);if("XYZ"===e.order){var L=T*O,U=T*D,B=M*O,z=M*D;_[0]=I*O,_[4]=-I*D,_[8]=R,_[1]=U+B*R,_[5]=L-z*R,_[9]=-M*I,_[2]=z-L*R,_[6]=B+U*R,_[10]=T*I}else if("YXZ"===e.order){var G=I*O,j=I*D,V=R*O,H=R*D;_[0]=G+H*M,_[4]=V*M-j,_[8]=T*R,_[1]=T*D,_[5]=T*O,_[9]=-M,_[2]=j*M-V,_[6]=H+G*M,_[10]=T*I}else if("ZXY"===e.order){var W=I*O,q=I*D,X=R*O,Y=R*D;_[0]=W-Y*M,_[4]=-T*D,_[8]=X+q*M,_[1]=q+X*M,_[5]=T*O,_[9]=Y-W*M,_[2]=-T*R,_[6]=M,_[10]=T*I}else if("ZYX"===e.order){var K=T*O,J=T*D,Q=M*O,Z=M*D;_[0]=I*O,_[4]=Q*R-J,_[8]=K*R+Z,_[1]=I*D,_[5]=Z*R+K,_[9]=J*R-Q,_[2]=-R,_[6]=M*I,_[10]=T*I}else if("YZX"===e.order){var $=T*I,ee=T*R,te=M*I,re=M*R;_[0]=I*O,_[4]=re-$*D,_[8]=te*D+ee,_[1]=D,_[5]=T*O,_[9]=-M*O,_[2]=-R*O,_[6]=ee*D+te,_[10]=$-re*D}else if("XZY"===e.order){var ne=T*I,ie=T*R,ae=M*I,oe=M*R;_[0]=I*O,_[4]=-D,_[8]=R*O,_[1]=ne*D+oe,_[5]=T*O,_[9]=ie*D-ae,_[2]=ae*D-ie,_[6]=M*O,_[10]=oe*D+ne}return _[3]=0,_[7]=0,_[11]=0,_[12]=0,_[13]=0,_[14]=0,_[15]=1,this}},{key:"makeRotationFromQuaternion",value:function(e){return this.compose(ed,e,td)}},{key:"lookAt",value:function(e,_,S){var k=this.elements;return id.subVectors(e,_),0===id.lengthSq()&&(id.z=1),id.normalize(),rd.crossVectors(S,id),0===rd.lengthSq()&&(1===Math.abs(S.z)?id.x+=1e-4:id.z+=1e-4,id.normalize(),rd.crossVectors(S,id)),rd.normalize(),nd.crossVectors(id,rd),k[0]=rd.x,k[4]=nd.x,k[8]=id.x,k[1]=rd.y,k[5]=nd.y,k[9]=id.y,k[2]=rd.z,k[6]=nd.z,k[10]=id.z,this}},{key:"multiply",value:function(e){return this.multiplyMatrices(this,e)}},{key:"premultiply",value:function(e){return this.multiplyMatrices(e,this)}},{key:"multiplyMatrices",value:function(e,_){var S=e.elements,k=_.elements,E=this.elements,T=S[0],M=S[4],I=S[8],R=S[12],O=S[1],D=S[5],L=S[9],U=S[13],B=S[2],z=S[6],G=S[10],j=S[14],V=S[3],H=S[7],W=S[11],q=S[15],X=k[0],Y=k[4],K=k[8],J=k[12],Q=k[1],Z=k[5],$=k[9],ee=k[13],te=k[2],re=k[6],ne=k[10],ie=k[14],ae=k[3],oe=k[7],se=k[11],ue=k[15];return E[0]=T*X+M*Q+I*te+R*ae,E[4]=T*Y+M*Z+I*re+R*oe,E[8]=T*K+M*$+I*ne+R*se,E[12]=T*J+M*ee+I*ie+R*ue,E[1]=O*X+D*Q+L*te+U*ae,E[5]=O*Y+D*Z+L*re+U*oe,E[9]=O*K+D*$+L*ne+U*se,E[13]=O*J+D*ee+L*ie+U*ue,E[2]=B*X+z*Q+G*te+j*ae,E[6]=B*Y+z*Z+G*re+j*oe,E[10]=B*K+z*$+G*ne+j*se,E[14]=B*J+z*ee+G*ie+j*ue,E[3]=V*X+H*Q+W*te+q*ae,E[7]=V*Y+H*Z+W*re+q*oe,E[11]=V*K+H*$+W*ne+q*se,E[15]=V*J+H*ee+W*ie+q*ue,this}},{key:"multiplyScalar",value:function(e){var _=this.elements;return _[0]*=e,_[4]*=e,_[8]*=e,_[12]*=e,_[1]*=e,_[5]*=e,_[9]*=e,_[13]*=e,_[2]*=e,_[6]*=e,_[10]*=e,_[14]*=e,_[3]*=e,_[7]*=e,_[11]*=e,_[15]*=e,this}},{key:"determinant",value:function(){var e=this.elements,_=e[0],S=e[4],k=e[8],E=e[12],T=e[1],M=e[5],I=e[9],R=e[13],O=e[2],D=e[6],L=e[10],U=e[14];return e[3]*(+E*I*D-k*R*D-E*M*L+S*R*L+k*M*U-S*I*U)+e[7]*(+_*I*U-_*R*L+E*T*L-k*T*U+k*R*O-E*I*O)+e[11]*(+_*R*D-_*M*U-E*T*D+S*T*U+E*M*O-S*R*O)+e[15]*(-k*M*O-_*I*D+_*M*L+k*T*D-S*T*L+S*I*O)}},{key:"transpose",value:function(){var e,_=this.elements;return e=_[1],_[1]=_[4],_[4]=e,e=_[2],_[2]=_[8],_[8]=e,e=_[6],_[6]=_[9],_[9]=e,e=_[3],_[3]=_[12],_[12]=e,e=_[7],_[7]=_[13],_[13]=e,e=_[11],_[11]=_[14],_[14]=e,this}},{key:"setPosition",value:function(e,_,S){var k=this.elements;return e.isVector3?(k[12]=e.x,k[13]=e.y,k[14]=e.z):(k[12]=e,k[13]=_,k[14]=S),this}},{key:"invert",value:function(){var e=this.elements,_=e[0],S=e[1],k=e[2],E=e[3],T=e[4],M=e[5],I=e[6],R=e[7],O=e[8],D=e[9],L=e[10],U=e[11],B=e[12],z=e[13],G=e[14],j=e[15],V=D*G*R-z*L*R+z*I*U-M*G*U-D*I*j+M*L*j,H=B*L*R-O*G*R-B*I*U+T*G*U+O*I*j-T*L*j,W=O*z*R-B*D*R+B*M*U-T*z*U-O*M*j+T*D*j,q=B*D*I-O*z*I-B*M*L+T*z*L+O*M*G-T*D*G,X=_*V+S*H+k*W+E*q;if(0===X)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);var Y=1/X;return e[0]=V*Y,e[1]=(z*L*E-D*G*E-z*k*U+S*G*U+D*k*j-S*L*j)*Y,e[2]=(M*G*E-z*I*E+z*k*R-S*G*R-M*k*j+S*I*j)*Y,e[3]=(D*I*E-M*L*E-D*k*R+S*L*R+M*k*U-S*I*U)*Y,e[4]=H*Y,e[5]=(O*G*E-B*L*E+B*k*U-_*G*U-O*k*j+_*L*j)*Y,e[6]=(B*I*E-T*G*E-B*k*R+_*G*R+T*k*j-_*I*j)*Y,e[7]=(T*L*E-O*I*E+O*k*R-_*L*R-T*k*U+_*I*U)*Y,e[8]=W*Y,e[9]=(B*D*E-O*z*E-B*S*U+_*z*U+O*S*j-_*D*j)*Y,e[10]=(T*z*E-B*M*E+B*S*R-_*z*R-T*S*j+_*M*j)*Y,e[11]=(O*M*E-T*D*E-O*S*R+_*D*R+T*S*U-_*M*U)*Y,e[12]=q*Y,e[13]=(O*z*k-B*D*k+B*S*L-_*z*L-O*S*G+_*D*G)*Y,e[14]=(B*M*k-T*z*k-B*S*I+_*z*I+T*S*G-_*M*G)*Y,e[15]=(T*D*k-O*M*k+O*S*I-_*D*I-T*S*L+_*M*L)*Y,this}},{key:"scale",value:function(e){var _=this.elements,S=e.x,k=e.y,E=e.z;return _[0]*=S,_[4]*=k,_[8]*=E,_[1]*=S,_[5]*=k,_[9]*=E,_[2]*=S,_[6]*=k,_[10]*=E,_[3]*=S,_[7]*=k,_[11]*=E,this}},{key:"getMaxScaleOnAxis",value:function(){var e=this.elements,_=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],S=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],k=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(_,S,k))}},{key:"makeTranslation",value:function(e,_,S){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,_,0,0,1,S,0,0,0,1),this}},{key:"makeRotationX",value:function(e){var _=Math.cos(e),S=Math.sin(e);return this.set(1,0,0,0,0,_,-S,0,0,S,_,0,0,0,0,1),this}},{key:"makeRotationY",value:function(e){var _=Math.cos(e),S=Math.sin(e);return this.set(_,0,S,0,0,1,0,0,-S,0,_,0,0,0,0,1),this}},{key:"makeRotationZ",value:function(e){var _=Math.cos(e),S=Math.sin(e);return this.set(_,-S,0,0,S,_,0,0,0,0,1,0,0,0,0,1),this}},{key:"makeRotationAxis",value:function(e,_){var S=Math.cos(_),k=Math.sin(_),E=1-S,T=e.x,M=e.y,I=e.z,R=E*T,O=E*M;return this.set(R*T+S,R*M-k*I,R*I+k*M,0,R*M+k*I,O*M+S,O*I-k*T,0,R*I-k*M,O*I+k*T,E*I*I+S,0,0,0,0,1),this}},{key:"makeScale",value:function(e,_,S){return this.set(e,0,0,0,0,_,0,0,0,0,S,0,0,0,0,1),this}},{key:"makeShear",value:function(e,_,S,k,E,T){return this.set(1,S,E,0,e,1,T,0,_,k,1,0,0,0,0,1),this}},{key:"compose",value:function(e,_,S){var k=this.elements,E=_._x,T=_._y,M=_._z,I=_._w,R=E+E,O=T+T,D=M+M,L=E*R,U=E*O,B=E*D,z=T*O,G=T*D,j=M*D,V=I*R,H=I*O,W=I*D,q=S.x,X=S.y,Y=S.z;return k[0]=(1-(z+j))*q,k[1]=(U+W)*q,k[2]=(B-H)*q,k[3]=0,k[4]=(U-W)*X,k[5]=(1-(L+j))*X,k[6]=(G+V)*X,k[7]=0,k[8]=(B+H)*Y,k[9]=(G-V)*Y,k[10]=(1-(L+z))*Y,k[11]=0,k[12]=e.x,k[13]=e.y,k[14]=e.z,k[15]=1,this}},{key:"decompose",value:function(e,_,S){var k=this.elements,E=Zh.set(k[0],k[1],k[2]).length(),T=Zh.set(k[4],k[5],k[6]).length(),M=Zh.set(k[8],k[9],k[10]).length();this.determinant()<0&&(E=-E),e.x=k[12],e.y=k[13],e.z=k[14],$h.copy(this);var I=1/E,R=1/T,O=1/M;return $h.elements[0]*=I,$h.elements[1]*=I,$h.elements[2]*=I,$h.elements[4]*=R,$h.elements[5]*=R,$h.elements[6]*=R,$h.elements[8]*=O,$h.elements[9]*=O,$h.elements[10]*=O,_.setFromRotationMatrix($h),S.x=E,S.y=T,S.z=M,this}},{key:"makePerspective",value:function(e,_,S,k,E,T){var M,I,R=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Wc,O=arguments.length>7&&void 0!==arguments[7]&&arguments[7],D=this.elements,L=2*E/(_-e),U=2*E/(S-k),B=(_+e)/(_-e),z=(S+k)/(S-k);if(O)M=E/(T-E),I=T*E/(T-E);else if(R===Wc)M=-(T+E)/(T-E),I=-2*T*E/(T-E);else{if(R!==qc)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+R);M=-T/(T-E),I=-T*E/(T-E)}return D[0]=L,D[4]=0,D[8]=B,D[12]=0,D[1]=0,D[5]=U,D[9]=z,D[13]=0,D[2]=0,D[6]=0,D[10]=M,D[14]=I,D[3]=0,D[7]=0,D[11]=-1,D[15]=0,this}},{key:"makeOrthographic",value:function(e,_,S,k,E,T){var M,I,R=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Wc,O=arguments.length>7&&void 0!==arguments[7]&&arguments[7],D=this.elements,L=2/(_-e),U=2/(S-k),B=-(_+e)/(_-e),z=-(S+k)/(S-k);if(O)M=1/(T-E),I=T/(T-E);else if(R===Wc)M=-2/(T-E),I=-(T+E)/(T-E);else{if(R!==qc)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+R);M=-1/(T-E),I=-E/(T-E)}return D[0]=L,D[4]=0,D[8]=0,D[12]=B,D[1]=0,D[5]=U,D[9]=0,D[13]=z,D[2]=0,D[6]=0,D[10]=M,D[14]=I,D[3]=0,D[7]=0,D[11]=0,D[15]=1,this}},{key:"equals",value:function(e){for(var _=this.elements,S=e.elements,k=0;k<16;k++)if(_[k]!==S[k])return!1;return!0}},{key:"fromArray",value:function(e){for(var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,S=0;S<16;S++)this.elements[S]=e[S+_];return this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,S=this.elements;return e[_]=S[0],e[_+1]=S[1],e[_+2]=S[2],e[_+3]=S[3],e[_+4]=S[4],e[_+5]=S[5],e[_+6]=S[6],e[_+7]=S[7],e[_+8]=S[8],e[_+9]=S[9],e[_+10]=S[10],e[_+11]=S[11],e[_+12]=S[12],e[_+13]=S[13],e[_+14]=S[14],e[_+15]=S[15],e}}])}(),Zh=new th,$h=new Qh,ed=new th(0,0,0),td=new th(1,1,1),rd=new th,nd=new th,id=new th,ad=new Qh,od=new eh,sd=function(){return _createClass3(function Euler(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,k=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Euler.DEFAULT_ORDER;_classCallCheck3(this,Euler),this.isEuler=!0,this._x=e,this._y=_,this._z=S,this._order=k},[{key:"x",get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},{key:"order",get:function(){return this._order},set:function(e){this._order=e,this._onChangeCallback()}},{key:"set",value:function(e,_,S){var k=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._order;return this._x=e,this._y=_,this._z=S,this._order=k,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._order)}},{key:"copy",value:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order,S=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],k=e.elements,E=k[0],T=k[4],M=k[8],I=k[1],R=k[5],O=k[9],D=k[2],L=k[6],U=k[10];switch(_){case"XYZ":this._y=Math.asin(clamp$1(M,-1,1)),Math.abs(M)<.9999999?(this._x=Math.atan2(-O,U),this._z=Math.atan2(-T,E)):(this._x=Math.atan2(L,R),this._z=0);break;case"YXZ":this._x=Math.asin(-clamp$1(O,-1,1)),Math.abs(O)<.9999999?(this._y=Math.atan2(M,U),this._z=Math.atan2(I,R)):(this._y=Math.atan2(-D,E),this._z=0);break;case"ZXY":this._x=Math.asin(clamp$1(L,-1,1)),Math.abs(L)<.9999999?(this._y=Math.atan2(-D,U),this._z=Math.atan2(-T,R)):(this._y=0,this._z=Math.atan2(I,E));break;case"ZYX":this._y=Math.asin(-clamp$1(D,-1,1)),Math.abs(D)<.9999999?(this._x=Math.atan2(L,U),this._z=Math.atan2(I,E)):(this._x=0,this._z=Math.atan2(-T,R));break;case"YZX":this._z=Math.asin(clamp$1(I,-1,1)),Math.abs(I)<.9999999?(this._x=Math.atan2(-O,R),this._y=Math.atan2(-D,E)):(this._x=0,this._y=Math.atan2(M,U));break;case"XZY":this._z=Math.asin(-clamp$1(T,-1,1)),Math.abs(T)<.9999999?(this._x=Math.atan2(L,R),this._y=Math.atan2(M,E)):(this._x=Math.atan2(-O,U),this._y=0)}return this._order=_,!0===S&&this._onChangeCallback(),this}},{key:"setFromQuaternion",value:function(e,_,S){return ad.makeRotationFromQuaternion(e),this.setFromRotationMatrix(ad,_,S)}},{key:"setFromVector3",value:function(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order;return this.set(e.x,e.y,e.z,_)}},{key:"reorder",value:function(e){return od.setFromEuler(this),this.setFromQuaternion(od,e)}},{key:"equals",value:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}},{key:"fromArray",value:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[_]=this._x,e[_+1]=this._y,e[_+2]=this._z,e[_+3]=this._order,e}},{key:"_onChange",value:function(e){return this._onChangeCallback=e,this}},{key:"_onChangeCallback",value:function(){}},{key:Symbol.iterator,value:_regenerator().m(function value(){return _regenerator().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this._x;case 1:return e.n=2,this._y;case 2:return e.n=3,this._z;case 3:return e.n=4,this._order;case 4:return e.a(2)}},value,this)})}])}();sd.DEFAULT_ORDER="XYZ";var ud=function(){return _createClass3(function Layers(){_classCallCheck3(this,Layers),this.mask=1},[{key:"set",value:function(e){this.mask=1<<e>>>0}},{key:"enable",value:function(e){this.mask|=1<<e}},{key:"enableAll",value:function(){this.mask=-1}},{key:"toggle",value:function(e){this.mask^=1<<e}},{key:"disable",value:function(e){this.mask&=~(1<<e)}},{key:"disableAll",value:function(){this.mask=0}},{key:"test",value:function(e){return 0!==(this.mask&e.mask)}},{key:"isEnabled",value:function(e){return!!(this.mask&1<<e)}}])}();D("aA",ud);var ld=0,cd=new th,hd=new eh,dd=new Qh,fd=new th,pd=new th,vd=new th,gd=new eh,md=new th(1,0,0),yd=new th(0,1,0),_d=new th(0,0,1),bd={type:"added"},Sd={type:"removed"},wd={type:"childadded",child:null},xd={type:"childremoved",child:null},kd=function(e){function Object3D(){var e;_classCallCheck3(this,Object3D),(e=_callSuper(this,Object3D)).isObject3D=!0,Object.defineProperty(e,"id",{value:ld++}),e.uuid=generateUUID(),e.name="",e.type="Object3D",e.parent=null,e.children=[],e.up=Object3D.DEFAULT_UP.clone();var _=new th,S=new sd,k=new eh,E=new th(1,1,1);return S._onChange(function(){k.setFromEuler(S,!1)}),k._onChange(function(){S.setFromQuaternion(k,void 0,!1)}),Object.defineProperties(e,{position:{configurable:!0,enumerable:!0,value:_},rotation:{configurable:!0,enumerable:!0,value:S},quaternion:{configurable:!0,enumerable:!0,value:k},scale:{configurable:!0,enumerable:!0,value:E},modelViewMatrix:{value:new Qh},normalMatrix:{value:new ih}}),e.matrix=new Qh,e.matrixWorld=new Qh,e.matrixAutoUpdate=Object3D.DEFAULT_MATRIX_AUTO_UPDATE,e.matrixWorldAutoUpdate=Object3D.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,e.matrixWorldNeedsUpdate=!1,e.layers=new ud,e.visible=!0,e.castShadow=!1,e.receiveShadow=!1,e.frustumCulled=!0,e.renderOrder=0,e.animations=[],e.customDepthMaterial=void 0,e.customDistanceMaterial=void 0,e.userData={},e}return _inherits(Object3D,e),_createClass3(Object3D,[{key:"onBeforeShadow",value:function(){}},{key:"onAfterShadow",value:function(){}},{key:"onBeforeRender",value:function(){}},{key:"onAfterRender",value:function(){}},{key:"applyMatrix4",value:function(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}},{key:"applyQuaternion",value:function(e){return this.quaternion.premultiply(e),this}},{key:"setRotationFromAxisAngle",value:function(e,_){this.quaternion.setFromAxisAngle(e,_)}},{key:"setRotationFromEuler",value:function(e){this.quaternion.setFromEuler(e,!0)}},{key:"setRotationFromMatrix",value:function(e){this.quaternion.setFromRotationMatrix(e)}},{key:"setRotationFromQuaternion",value:function(e){this.quaternion.copy(e)}},{key:"rotateOnAxis",value:function(e,_){return hd.setFromAxisAngle(e,_),this.quaternion.multiply(hd),this}},{key:"rotateOnWorldAxis",value:function(e,_){return hd.setFromAxisAngle(e,_),this.quaternion.premultiply(hd),this}},{key:"rotateX",value:function(e){return this.rotateOnAxis(md,e)}},{key:"rotateY",value:function(e){return this.rotateOnAxis(yd,e)}},{key:"rotateZ",value:function(e){return this.rotateOnAxis(_d,e)}},{key:"translateOnAxis",value:function(e,_){return cd.copy(e).applyQuaternion(this.quaternion),this.position.add(cd.multiplyScalar(_)),this}},{key:"translateX",value:function(e){return this.translateOnAxis(md,e)}},{key:"translateY",value:function(e){return this.translateOnAxis(yd,e)}},{key:"translateZ",value:function(e){return this.translateOnAxis(_d,e)}},{key:"localToWorld",value:function(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}},{key:"worldToLocal",value:function(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(dd.copy(this.matrixWorld).invert())}},{key:"lookAt",value:function(e,_,S){e.isVector3?fd.copy(e):fd.set(e,_,S);var k=this.parent;this.updateWorldMatrix(!0,!1),pd.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?dd.lookAt(pd,fd,this.up):dd.lookAt(fd,pd,this.up),this.quaternion.setFromRotationMatrix(dd),k&&(dd.extractRotation(k.matrixWorld),hd.setFromRotationMatrix(dd),this.quaternion.premultiply(hd.invert()))}},{key:"add",value:function(e){if(arguments.length>1){for(var _=0;_<arguments.length;_++)this.add(arguments[_]);return this}return e===this||e&&e.isObject3D&&(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(bd),wd.child=e,this.dispatchEvent(wd),wd.child=null),this}},{key:"remove",value:function(e){if(arguments.length>1){for(var _=0;_<arguments.length;_++)this.remove(arguments[_]);return this}var S=this.children.indexOf(e);return-1!==S&&(e.parent=null,this.children.splice(S,1),e.dispatchEvent(Sd),xd.child=e,this.dispatchEvent(xd),xd.child=null),this}},{key:"removeFromParent",value:function(){var e=this.parent;return null!==e&&e.remove(this),this}},{key:"clear",value:function(){return this.remove.apply(this,_toConsumableArray3(this.children))}},{key:"attach",value:function(e){return this.updateWorldMatrix(!0,!1),dd.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),dd.multiply(e.parent.matrixWorld)),e.applyMatrix4(dd),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(bd),wd.child=e,this.dispatchEvent(wd),wd.child=null,this}},{key:"getObjectById",value:function(e){return this.getObjectByProperty("id",e)}},{key:"getObjectByName",value:function(e){return this.getObjectByProperty("name",e)}},{key:"getObjectByProperty",value:function(e,_){if(this[e]===_)return this;for(var S=0,k=this.children.length;S<k;S++){var E=this.children[S].getObjectByProperty(e,_);if(void 0!==E)return E}}},{key:"getObjectsByProperty",value:function(e,_){var S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];this[e]===_&&S.push(this);for(var k=this.children,E=0,T=k.length;E<T;E++)k[E].getObjectsByProperty(e,_,S);return S}},{key:"getWorldPosition",value:function(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}},{key:"getWorldQuaternion",value:function(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(pd,e,vd),e}},{key:"getWorldScale",value:function(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(pd,gd,e),e}},{key:"getWorldDirection",value:function(e){this.updateWorldMatrix(!0,!1);var _=this.matrixWorld.elements;return e.set(_[8],_[9],_[10]).normalize()}},{key:"raycast",value:function(){}},{key:"traverse",value:function(e){e(this);for(var _=this.children,S=0,k=_.length;S<k;S++)_[S].traverse(e)}},{key:"traverseVisible",value:function(e){if(!1!==this.visible){e(this);for(var _=this.children,S=0,k=_.length;S<k;S++)_[S].traverseVisible(e)}}},{key:"traverseAncestors",value:function(e){var _=this.parent;null!==_&&(e(_),_.traverseAncestors(e))}},{key:"updateMatrix",value:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}},{key:"updateMatrixWorld",value:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);for(var _=this.children,S=0,k=_.length;S<k;S++){_[S].updateMatrixWorld(e)}}},{key:"updateWorldMatrix",value:function(e,_){var S=this.parent;if(!0===e&&null!==S&&S.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),!0===_)for(var k=this.children,E=0,T=k.length;E<T;E++){k[E].updateWorldMatrix(!1,!0)}}},{key:"toJSON",value:function(e){var _=void 0===e||"string"==typeof e,S={};_&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},S.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});var k={};function serialize(_,S){return void 0===_[S.uuid]&&(_[S.uuid]=S.toJSON(e)),S.uuid}if(k.uuid=this.uuid,k.type=this.type,""!==this.name&&(k.name=this.name),!0===this.castShadow&&(k.castShadow=!0),!0===this.receiveShadow&&(k.receiveShadow=!0),!1===this.visible&&(k.visible=!1),!1===this.frustumCulled&&(k.frustumCulled=!1),0!==this.renderOrder&&(k.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(k.userData=this.userData),k.layers=this.layers.mask,k.matrix=this.matrix.toArray(),k.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(k.matrixAutoUpdate=!1),this.isInstancedMesh&&(k.type="InstancedMesh",k.count=this.count,k.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(k.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(k.type="BatchedMesh",k.perObjectFrustumCulled=this.perObjectFrustumCulled,k.sortObjects=this.sortObjects,k.drawRanges=this._drawRanges,k.reservedRanges=this._reservedRanges,k.geometryInfo=this._geometryInfo.map(function(e){return _objectSpread2(_objectSpread2({},e),{},{boundingBox:e.boundingBox?e.boundingBox.toJSON():void 0,boundingSphere:e.boundingSphere?e.boundingSphere.toJSON():void 0})}),k.instanceInfo=this._instanceInfo.map(function(e){return _objectSpread2({},e)}),k.availableInstanceIds=this._availableInstanceIds.slice(),k.availableGeometryIds=this._availableGeometryIds.slice(),k.nextIndexStart=this._nextIndexStart,k.nextVertexStart=this._nextVertexStart,k.geometryCount=this._geometryCount,k.maxInstanceCount=this._maxInstanceCount,k.maxVertexCount=this._maxVertexCount,k.maxIndexCount=this._maxIndexCount,k.geometryInitialized=this._geometryInitialized,k.matricesTexture=this._matricesTexture.toJSON(e),k.indirectTexture=this._indirectTexture.toJSON(e),null!==this._colorsTexture&&(k.colorsTexture=this._colorsTexture.toJSON(e)),null!==this.boundingSphere&&(k.boundingSphere=this.boundingSphere.toJSON()),null!==this.boundingBox&&(k.boundingBox=this.boundingBox.toJSON())),this.isScene)this.background&&(this.background.isColor?k.background=this.background.toJSON():this.background.isTexture&&(k.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(k.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){k.geometry=serialize(e.geometries,this.geometry);var E=this.geometry.parameters;if(void 0!==E&&void 0!==E.shapes){var T=E.shapes;if(Array.isArray(T))for(var M=0,I=T.length;M<I;M++){var R=T[M];serialize(e.shapes,R)}else serialize(e.shapes,T)}}if(this.isSkinnedMesh&&(k.bindMode=this.bindMode,k.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(serialize(e.skeletons,this.skeleton),k.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){for(var O=[],D=0,L=this.material.length;D<L;D++)O.push(serialize(e.materials,this.material[D]));k.material=O}else k.material=serialize(e.materials,this.material);if(this.children.length>0){k.children=[];for(var U=0;U<this.children.length;U++)k.children.push(this.children[U].toJSON(e).object)}if(this.animations.length>0){k.animations=[];for(var B=0;B<this.animations.length;B++){var z=this.animations[B];k.animations.push(serialize(e.animations,z))}}if(_){var G=extractFromCache(e.geometries),j=extractFromCache(e.materials),V=extractFromCache(e.textures),H=extractFromCache(e.images),W=extractFromCache(e.shapes),q=extractFromCache(e.skeletons),X=extractFromCache(e.animations),Y=extractFromCache(e.nodes);G.length>0&&(S.geometries=G),j.length>0&&(S.materials=j),V.length>0&&(S.textures=V),H.length>0&&(S.images=H),W.length>0&&(S.shapes=W),q.length>0&&(S.skeletons=q),X.length>0&&(S.animations=X),Y.length>0&&(S.nodes=Y)}return S.object=k,S;function extractFromCache(e){var _=[];for(var S in e){var k=e[S];delete k.metadata,_.push(k)}return _}}},{key:"clone",value:function(e){return(new this.constructor).copy(this,e)}},{key:"copy",value:function(e){var _=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),!0===_)for(var S=0;S<e.children.length;S++){var k=e.children[S];this.add(k.clone())}return this}}])}(Xc);kd.DEFAULT_UP=new th(0,1,0),kd.DEFAULT_MATRIX_AUTO_UPDATE=!0,kd.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;var Cd=new th,Ad=new th,Ed=new th,Td=new th,Md=new th,Id=new th,Rd=new th,Pd=new th,Od=new th,Dd=new th,Ld=new yh,Fd=new yh,Ud=new yh,Bd=function(){function Triangle(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new th,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new th,S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new th;_classCallCheck3(this,Triangle),this.a=e,this.b=_,this.c=S}return _createClass3(Triangle,[{key:"set",value:function(e,_,S){return this.a.copy(e),this.b.copy(_),this.c.copy(S),this}},{key:"setFromPointsAndIndices",value:function(e,_,S,k){return this.a.copy(e[_]),this.b.copy(e[S]),this.c.copy(e[k]),this}},{key:"setFromAttributeAndIndices",value:function(e,_,S,k){return this.a.fromBufferAttribute(e,_),this.b.fromBufferAttribute(e,S),this.c.fromBufferAttribute(e,k),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}},{key:"getArea",value:function(){return Cd.subVectors(this.c,this.b),Ad.subVectors(this.a,this.b),.5*Cd.cross(Ad).length()}},{key:"getMidpoint",value:function(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}},{key:"getNormal",value:function(e){return Triangle.getNormal(this.a,this.b,this.c,e)}},{key:"getPlane",value:function(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}},{key:"getBarycoord",value:function(e,_){return Triangle.getBarycoord(e,this.a,this.b,this.c,_)}},{key:"getInterpolation",value:function(e,_,S,k,E){return Triangle.getInterpolation(e,this.a,this.b,this.c,_,S,k,E)}},{key:"containsPoint",value:function(e){return Triangle.containsPoint(e,this.a,this.b,this.c)}},{key:"isFrontFacing",value:function(e){return Triangle.isFrontFacing(this.a,this.b,this.c,e)}},{key:"intersectsBox",value:function(e){return e.intersectsTriangle(this)}},{key:"closestPointToPoint",value:function(e,_){var S,k,E=this.a,T=this.b,M=this.c;Md.subVectors(T,E),Id.subVectors(M,E),Pd.subVectors(e,E);var I=Md.dot(Pd),R=Id.dot(Pd);if(I<=0&&R<=0)return _.copy(E);Od.subVectors(e,T);var O=Md.dot(Od),D=Id.dot(Od);if(O>=0&&D<=O)return _.copy(T);var L=I*D-O*R;if(L<=0&&I>=0&&O<=0)return S=I/(I-O),_.copy(E).addScaledVector(Md,S);Dd.subVectors(e,M);var U=Md.dot(Dd),B=Id.dot(Dd);if(B>=0&&U<=B)return _.copy(M);var z=U*R-I*B;if(z<=0&&R>=0&&B<=0)return k=R/(R-B),_.copy(E).addScaledVector(Id,k);var G=O*B-U*D;if(G<=0&&D-O>=0&&U-B>=0)return Rd.subVectors(M,T),k=(D-O)/(D-O+(U-B)),_.copy(T).addScaledVector(Rd,k);var j=1/(G+z+L);return S=z*j,k=L*j,_.copy(E).addScaledVector(Md,S).addScaledVector(Id,k)}},{key:"equals",value:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}],[{key:"getNormal",value:function(e,_,S,k){k.subVectors(S,_),Cd.subVectors(e,_),k.cross(Cd);var E=k.lengthSq();return E>0?k.multiplyScalar(1/Math.sqrt(E)):k.set(0,0,0)}},{key:"getBarycoord",value:function(e,_,S,k,E){Cd.subVectors(k,_),Ad.subVectors(S,_),Ed.subVectors(e,_);var T=Cd.dot(Cd),M=Cd.dot(Ad),I=Cd.dot(Ed),R=Ad.dot(Ad),O=Ad.dot(Ed),D=T*R-M*M;if(0===D)return E.set(0,0,0),null;var L=1/D,U=(R*I-M*O)*L,B=(T*O-M*I)*L;return E.set(1-U-B,B,U)}},{key:"containsPoint",value:function(e,_,S,k){return null!==this.getBarycoord(e,_,S,k,Td)&&(Td.x>=0&&Td.y>=0&&Td.x+Td.y<=1)}},{key:"getInterpolation",value:function(e,_,S,k,E,T,M,I){return null===this.getBarycoord(e,_,S,k,Td)?(I.x=0,I.y=0,"z"in I&&(I.z=0),"w"in I&&(I.w=0),null):(I.setScalar(0),I.addScaledVector(E,Td.x),I.addScaledVector(T,Td.y),I.addScaledVector(M,Td.z),I)}},{key:"getInterpolatedAttribute",value:function(e,_,S,k,E,T){return Ld.setScalar(0),Fd.setScalar(0),Ud.setScalar(0),Ld.fromBufferAttribute(e,_),Fd.fromBufferAttribute(e,S),Ud.fromBufferAttribute(e,k),T.setScalar(0),T.addScaledVector(Ld,E.x),T.addScaledVector(Fd,E.y),T.addScaledVector(Ud,E.z),T}},{key:"isFrontFacing",value:function(e,_,S,k){return Cd.subVectors(S,_),Ad.subVectors(e,_),Cd.cross(Ad).dot(k)<0}}])}(),Nd={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},zd={h:0,s:0,l:0},Gd={h:0,s:0,l:0};function hue2rgb(e,_,S){return S<0&&(S+=1),S>1&&(S-=1),S<1/6?e+6*(_-e)*S:S<.5?_:S<2/3?e+6*(_-e)*(2/3-S):e}var jd=function(){return _createClass3(function Color(e,_,S){return _classCallCheck3(this,Color),this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,_,S)},[{key:"set",value:function(e,_,S){if(void 0===_&&void 0===S){var k=e;k&&k.isColor?this.copy(k):"number"==typeof k?this.setHex(k):"string"==typeof k&&this.setStyle(k)}else this.setRGB(e,_,S);return this}},{key:"setScalar",value:function(e){return this.r=e,this.g=e,this.b=e,this}},{key:"setHex",value:function(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Bc;return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,hh.colorSpaceToWorking(this,_),this}},{key:"setRGB",value:function(e,_,S){var k=arguments.length>3&&void 0!==arguments[3]?arguments[3]:hh.workingColorSpace;return this.r=e,this.g=_,this.b=S,hh.colorSpaceToWorking(this,k),this}},{key:"setHSL",value:function(e,_,S){var k=arguments.length>3&&void 0!==arguments[3]?arguments[3]:hh.workingColorSpace;if(e=euclideanModulo(e,1),_=clamp$1(_,0,1),S=clamp$1(S,0,1),0===_)this.r=this.g=this.b=S;else{var E=S<=.5?S*(1+_):S+_-S*_,T=2*S-E;this.r=hue2rgb(T,E,e+1/3),this.g=hue2rgb(T,E,e),this.b=hue2rgb(T,E,e-1/3)}return hh.colorSpaceToWorking(this,k),this}},{key:"setStyle",value:function(e){var _,S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Bc;function handleAlpha(e){void 0!==e&&parseFloat(e)}if(_=/^(\w+)\(([^\)]*)\)/.exec(e)){var k,E=_[1],T=_[2];switch(E){case"rgb":case"rgba":if(k=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(T))return handleAlpha(k[4]),this.setRGB(Math.min(255,parseInt(k[1],10))/255,Math.min(255,parseInt(k[2],10))/255,Math.min(255,parseInt(k[3],10))/255,S);if(k=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(T))return handleAlpha(k[4]),this.setRGB(Math.min(100,parseInt(k[1],10))/100,Math.min(100,parseInt(k[2],10))/100,Math.min(100,parseInt(k[3],10))/100,S);break;case"hsl":case"hsla":if(k=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(T))return handleAlpha(k[4]),this.setHSL(parseFloat(k[1])/360,parseFloat(k[2])/100,parseFloat(k[3])/100,S)}}else if(_=/^\#([A-Fa-f\d]+)$/.exec(e)){var M=_[1],I=M.length;if(3===I)return this.setRGB(parseInt(M.charAt(0),16)/15,parseInt(M.charAt(1),16)/15,parseInt(M.charAt(2),16)/15,S);if(6===I)return this.setHex(parseInt(M,16),S)}else if(e&&e.length>0)return this.setColorName(e,S);return this}},{key:"setColorName",value:function(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Bc,S=Nd[e.toLowerCase()];return void 0!==S&&this.setHex(S,_),this}},{key:"clone",value:function(){return new this.constructor(this.r,this.g,this.b)}},{key:"copy",value:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}},{key:"copySRGBToLinear",value:function(e){return this.r=SRGBToLinear(e.r),this.g=SRGBToLinear(e.g),this.b=SRGBToLinear(e.b),this}},{key:"copyLinearToSRGB",value:function(e){return this.r=LinearToSRGB(e.r),this.g=LinearToSRGB(e.g),this.b=LinearToSRGB(e.b),this}},{key:"convertSRGBToLinear",value:function(){return this.copySRGBToLinear(this),this}},{key:"convertLinearToSRGB",value:function(){return this.copyLinearToSRGB(this),this}},{key:"getHex",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bc;return hh.workingToColorSpace(Vd.copy(this),e),65536*Math.round(clamp$1(255*Vd.r,0,255))+256*Math.round(clamp$1(255*Vd.g,0,255))+Math.round(clamp$1(255*Vd.b,0,255))}},{key:"getHexString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bc;return("000000"+this.getHex(e).toString(16)).slice(-6)}},{key:"getHSL",value:function(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:hh.workingColorSpace;hh.workingToColorSpace(Vd.copy(this),_);var S,k,E=Vd.r,T=Vd.g,M=Vd.b,I=Math.max(E,T,M),R=Math.min(E,T,M),O=(R+I)/2;if(R===I)S=0,k=0;else{var D=I-R;switch(k=O<=.5?D/(I+R):D/(2-I-R),I){case E:S=(T-M)/D+(T<M?6:0);break;case T:S=(M-E)/D+2;break;case M:S=(E-T)/D+4}S/=6}return e.h=S,e.s=k,e.l=O,e}},{key:"getRGB",value:function(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:hh.workingColorSpace;return hh.workingToColorSpace(Vd.copy(this),_),e.r=Vd.r,e.g=Vd.g,e.b=Vd.b,e}},{key:"getStyle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bc;hh.workingToColorSpace(Vd.copy(this),e);var _=Vd.r,S=Vd.g,k=Vd.b;return e!==Bc?"color(".concat(e," ").concat(_.toFixed(3)," ").concat(S.toFixed(3)," ").concat(k.toFixed(3),")"):"rgb(".concat(Math.round(255*_),",").concat(Math.round(255*S),",").concat(Math.round(255*k),")")}},{key:"offsetHSL",value:function(e,_,S){return this.getHSL(zd),this.setHSL(zd.h+e,zd.s+_,zd.l+S)}},{key:"add",value:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}},{key:"addColors",value:function(e,_){return this.r=e.r+_.r,this.g=e.g+_.g,this.b=e.b+_.b,this}},{key:"addScalar",value:function(e){return this.r+=e,this.g+=e,this.b+=e,this}},{key:"sub",value:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}},{key:"multiply",value:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}},{key:"multiplyScalar",value:function(e){return this.r*=e,this.g*=e,this.b*=e,this}},{key:"lerp",value:function(e,_){return this.r+=(e.r-this.r)*_,this.g+=(e.g-this.g)*_,this.b+=(e.b-this.b)*_,this}},{key:"lerpColors",value:function(e,_,S){return this.r=e.r+(_.r-e.r)*S,this.g=e.g+(_.g-e.g)*S,this.b=e.b+(_.b-e.b)*S,this}},{key:"lerpHSL",value:function(e,_){this.getHSL(zd),e.getHSL(Gd);var S=lerp$1(zd.h,Gd.h,_),k=lerp$1(zd.s,Gd.s,_),E=lerp$1(zd.l,Gd.l,_);return this.setHSL(S,k,E),this}},{key:"setFromVector3",value:function(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}},{key:"applyMatrix3",value:function(e){var _=this.r,S=this.g,k=this.b,E=e.elements;return this.r=E[0]*_+E[3]*S+E[6]*k,this.g=E[1]*_+E[4]*S+E[7]*k,this.b=E[2]*_+E[5]*S+E[8]*k,this}},{key:"equals",value:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}},{key:"fromArray",value:function(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.r=e[_],this.g=e[_+1],this.b=e[_+2],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[_]=this.r,e[_+1]=this.g,e[_+2]=this.b,e}},{key:"fromBufferAttribute",value:function(e,_){return this.r=e.getX(_),this.g=e.getY(_),this.b=e.getZ(_),this}},{key:"toJSON",value:function(){return this.getHex()}},{key:Symbol.iterator,value:_regenerator().m(function value(){return _regenerator().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.r;case 1:return e.n=2,this.g;case 2:return e.n=3,this.b;case 3:return e.a(2)}},value,this)})}])}();D("aB",jd);var Vd=new jd;jd.NAMES=Nd;var Hd=0,Wd=function(e){function Material(){var e;return _classCallCheck3(this,Material),(e=_callSuper(this,Material)).isMaterial=!0,Object.defineProperty(e,"id",{value:Hd++}),e.uuid=generateUUID(),e.name="",e.type="Material",e.blending=1,e.side=0,e.vertexColors=!1,e.opacity=1,e.transparent=!1,e.alphaHash=!1,e.blendSrc=al,e.blendDst=ol,e.blendEquation=il,e.blendSrcAlpha=null,e.blendDstAlpha=null,e.blendEquationAlpha=null,e.blendColor=new jd(0,0,0),e.blendAlpha=0,e.depthFunc=3,e.depthTest=!0,e.depthWrite=!0,e.stencilWriteMask=255,e.stencilFunc=519,e.stencilRef=0,e.stencilFuncMask=255,e.stencilFail=jc,e.stencilZFail=jc,e.stencilZPass=jc,e.stencilWrite=!1,e.clippingPlanes=null,e.clipIntersection=!1,e.clipShadows=!1,e.shadowSide=null,e.colorWrite=!0,e.precision=null,e.polygonOffset=!1,e.polygonOffsetFactor=0,e.polygonOffsetUnits=0,e.dithering=!1,e.alphaToCoverage=!1,e.premultipliedAlpha=!1,e.forceSinglePass=!1,e.allowOverride=!0,e.visible=!0,e.toneMapped=!0,e.userData={},e.version=0,e._alphaTest=0,e}return _inherits(Material,e),_createClass3(Material,[{key:"alphaTest",get:function(){return this._alphaTest},set:function(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}},{key:"onBeforeRender",value:function(){}},{key:"onBeforeCompile",value:function(){}},{key:"customProgramCacheKey",value:function(){return this.onBeforeCompile.toString()}},{key:"setValues",value:function(e){if(void 0!==e)for(var _ in e){var S=e[_];if(void 0!==S){var k=this[_];void 0!==k&&(k&&k.isColor?k.set(S):k&&k.isVector3&&S&&S.isVector3?k.copy(S):this[_]=S)}}}},{key:"toJSON",value:function(e){var _=void 0===e||"string"==typeof e;_&&(e={textures:{},images:{}});var S={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};function extractFromCache(e){var _=[];for(var S in e){var k=e[S];delete k.metadata,_.push(k)}return _}if(S.uuid=this.uuid,S.type=this.type,""!==this.name&&(S.name=this.name),this.color&&this.color.isColor&&(S.color=this.color.getHex()),void 0!==this.roughness&&(S.roughness=this.roughness),void 0!==this.metalness&&(S.metalness=this.metalness),void 0!==this.sheen&&(S.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(S.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(S.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(S.emissive=this.emissive.getHex()),void 0!==this.emissiveIntensity&&1!==this.emissiveIntensity&&(S.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(S.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(S.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(S.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(S.shininess=this.shininess),void 0!==this.clearcoat&&(S.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(S.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(S.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(S.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(S.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,S.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.sheenColorMap&&this.sheenColorMap.isTexture&&(S.sheenColorMap=this.sheenColorMap.toJSON(e).uuid),this.sheenRoughnessMap&&this.sheenRoughnessMap.isTexture&&(S.sheenRoughnessMap=this.sheenRoughnessMap.toJSON(e).uuid),void 0!==this.dispersion&&(S.dispersion=this.dispersion),void 0!==this.iridescence&&(S.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(S.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(S.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(S.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(S.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),void 0!==this.anisotropy&&(S.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(S.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(S.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(S.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(S.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(S.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(S.lightMap=this.lightMap.toJSON(e).uuid,S.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(S.aoMap=this.aoMap.toJSON(e).uuid,S.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(S.bumpMap=this.bumpMap.toJSON(e).uuid,S.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(S.normalMap=this.normalMap.toJSON(e).uuid,S.normalMapType=this.normalMapType,S.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(S.displacementMap=this.displacementMap.toJSON(e).uuid,S.displacementScale=this.displacementScale,S.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(S.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(S.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(S.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(S.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(S.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(S.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(S.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(S.combine=this.combine)),void 0!==this.envMapRotation&&(S.envMapRotation=this.envMapRotation.toArray()),void 0!==this.envMapIntensity&&(S.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(S.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(S.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(S.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(S.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(S.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(S.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(S.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(S.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(S.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(S.size=this.size),null!==this.shadowSide&&(S.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(S.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(S.blending=this.blending),0!==this.side&&(S.side=this.side),!0===this.vertexColors&&(S.vertexColors=!0),this.opacity<1&&(S.opacity=this.opacity),!0===this.transparent&&(S.transparent=!0),this.blendSrc!==al&&(S.blendSrc=this.blendSrc),this.blendDst!==ol&&(S.blendDst=this.blendDst),this.blendEquation!==il&&(S.blendEquation=this.blendEquation),null!==this.blendSrcAlpha&&(S.blendSrcAlpha=this.blendSrcAlpha),null!==this.blendDstAlpha&&(S.blendDstAlpha=this.blendDstAlpha),null!==this.blendEquationAlpha&&(S.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(S.blendColor=this.blendColor.getHex()),0!==this.blendAlpha&&(S.blendAlpha=this.blendAlpha),3!==this.depthFunc&&(S.depthFunc=this.depthFunc),!1===this.depthTest&&(S.depthTest=this.depthTest),!1===this.depthWrite&&(S.depthWrite=this.depthWrite),!1===this.colorWrite&&(S.colorWrite=this.colorWrite),255!==this.stencilWriteMask&&(S.stencilWriteMask=this.stencilWriteMask),519!==this.stencilFunc&&(S.stencilFunc=this.stencilFunc),0!==this.stencilRef&&(S.stencilRef=this.stencilRef),255!==this.stencilFuncMask&&(S.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==jc&&(S.stencilFail=this.stencilFail),this.stencilZFail!==jc&&(S.stencilZFail=this.stencilZFail),this.stencilZPass!==jc&&(S.stencilZPass=this.stencilZPass),!0===this.stencilWrite&&(S.stencilWrite=this.stencilWrite),void 0!==this.rotation&&0!==this.rotation&&(S.rotation=this.rotation),!0===this.polygonOffset&&(S.polygonOffset=!0),0!==this.polygonOffsetFactor&&(S.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(S.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(S.linewidth=this.linewidth),void 0!==this.dashSize&&(S.dashSize=this.dashSize),void 0!==this.gapSize&&(S.gapSize=this.gapSize),void 0!==this.scale&&(S.scale=this.scale),!0===this.dithering&&(S.dithering=!0),this.alphaTest>0&&(S.alphaTest=this.alphaTest),!0===this.alphaHash&&(S.alphaHash=!0),!0===this.alphaToCoverage&&(S.alphaToCoverage=!0),!0===this.premultipliedAlpha&&(S.premultipliedAlpha=!0),!0===this.forceSinglePass&&(S.forceSinglePass=!0),!0===this.wireframe&&(S.wireframe=!0),this.wireframeLinewidth>1&&(S.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(S.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(S.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(S.flatShading=!0),!1===this.visible&&(S.visible=!1),!1===this.toneMapped&&(S.toneMapped=!1),!1===this.fog&&(S.fog=!1),Object.keys(this.userData).length>0&&(S.userData=this.userData),_){var k=extractFromCache(e.textures),E=extractFromCache(e.images);k.length>0&&(S.textures=k),E.length>0&&(S.images=E)}return S}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;var _=e.clippingPlanes,S=null;if(null!==_){var k=_.length;S=new Array(k);for(var E=0;E!==k;++E)S[E]=_[E].clone()}return this.clippingPlanes=S,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}}])}(Xc),qd=function(e){function MeshBasicMaterial(e){var _;return _classCallCheck3(this,MeshBasicMaterial),(_=_callSuper(this,MeshBasicMaterial)).isMeshBasicMaterial=!0,_.type="MeshBasicMaterial",_.color=new jd(16777215),_.map=null,_.lightMap=null,_.lightMapIntensity=1,_.aoMap=null,_.aoMapIntensity=1,_.specularMap=null,_.alphaMap=null,_.envMap=null,_.envMapRotation=new sd,_.combine=0,_.reflectivity=1,_.refractionRatio=.98,_.wireframe=!1,_.wireframeLinewidth=1,_.wireframeLinecap="round",_.wireframeLinejoin="round",_.fog=!0,_.setValues(e),_}return _inherits(MeshBasicMaterial,e),_createClass3(MeshBasicMaterial,[{key:"copy",value:function(e){return _superPropGet(MeshBasicMaterial,"copy",this,3)([e]),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}])}(Wd),Xd=_generateTables();function _generateTables(){for(var e=new ArrayBuffer(4),_=new Float32Array(e),S=new Uint32Array(e),k=new Uint32Array(512),E=new Uint32Array(512),T=0;T<256;++T){var M=T-127;M<-27?(k[T]=0,k[256|T]=32768,E[T]=24,E[256|T]=24):M<-14?(k[T]=1024>>-M-14,k[256|T]=1024>>-M-14|32768,E[T]=-M-1,E[256|T]=-M-1):M<=15?(k[T]=M+15<<10,k[256|T]=M+15<<10|32768,E[T]=13,E[256|T]=13):M<128?(k[T]=31744,k[256|T]=64512,E[T]=24,E[256|T]=24):(k[T]=31744,k[256|T]=64512,E[T]=13,E[256|T]=13)}for(var I=new Uint32Array(2048),R=new Uint32Array(64),O=new Uint32Array(64),D=1;D<1024;++D){for(var L=D<<13,U=0;!(8388608&L);)L<<=1,U-=8388608;L&=-8388609,U+=947912704,I[D]=L|U}for(var B=1024;B<2048;++B)I[B]=939524096+(B-1024<<13);for(var z=1;z<31;++z)R[z]=z<<23;R[31]=1199570944,R[32]=2147483648;for(var G=33;G<63;++G)R[G]=2147483648+(G-32<<23);R[63]=3347054592;for(var j=1;j<64;++j)32!==j&&(O[j]=1024);return{floatView:_,uint32View:S,baseTable:k,shiftTable:E,mantissaTable:I,exponentTable:R,offsetTable:O}}function _toHalfFloat(e){Math.abs(e),e=clamp$1(e,-65504,65504),Xd.floatView[0]=e;var _=Xd.uint32View[0],S=_>>23&511;return Xd.baseTable[S]+((8388607&_)>>Xd.shiftTable[S])}function _fromHalfFloat(e){var _=e>>10;return Xd.uint32View[0]=Xd.mantissaTable[Xd.offsetTable[_]+(1023&e)]+Xd.exponentTable[_],Xd.floatView[0]}var Yd=function(){return _createClass3(function DataUtils(){_classCallCheck3(this,DataUtils)},null,[{key:"toHalfFloat",value:function(e){return _toHalfFloat(e)}},{key:"fromHalfFloat",value:function(e){return _fromHalfFloat(e)}}])}(),Kd=new th,Jd=new $c,Qd=0,Zd=function(){return _createClass3(function BufferAttribute(e,_){var S=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(_classCallCheck3(this,BufferAttribute),Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:Qd++}),this.name="",this.array=e,this.itemSize=_,this.count=void 0!==e?e.length/_:0,this.normalized=S,this.usage=Vc,this.updateRanges=[],this.gpuType=Ol,this.version=0},[{key:"onUploadCallback",value:function(){}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"setUsage",value:function(e){return this.usage=e,this}},{key:"addUpdateRange",value:function(e,_){this.updateRanges.push({start:e,count:_})}},{key:"clearUpdateRanges",value:function(){this.updateRanges.length=0}},{key:"copy",value:function(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}},{key:"copyAt",value:function(e,_,S){e*=this.itemSize,S*=_.itemSize;for(var k=0,E=this.itemSize;k<E;k++)this.array[e+k]=_.array[S+k];return this}},{key:"copyArray",value:function(e){return this.array.set(e),this}},{key:"applyMatrix3",value:function(e){if(2===this.itemSize)for(var _=0,S=this.count;_<S;_++)Jd.fromBufferAttribute(this,_),Jd.applyMatrix3(e),this.setXY(_,Jd.x,Jd.y);else if(3===this.itemSize)for(var k=0,E=this.count;k<E;k++)Kd.fromBufferAttribute(this,k),Kd.applyMatrix3(e),this.setXYZ(k,Kd.x,Kd.y,Kd.z);return this}},{key:"applyMatrix4",value:function(e){for(var _=0,S=this.count;_<S;_++)Kd.fromBufferAttribute(this,_),Kd.applyMatrix4(e),this.setXYZ(_,Kd.x,Kd.y,Kd.z);return this}},{key:"applyNormalMatrix",value:function(e){for(var _=0,S=this.count;_<S;_++)Kd.fromBufferAttribute(this,_),Kd.applyNormalMatrix(e),this.setXYZ(_,Kd.x,Kd.y,Kd.z);return this}},{key:"transformDirection",value:function(e){for(var _=0,S=this.count;_<S;_++)Kd.fromBufferAttribute(this,_),Kd.transformDirection(e),this.setXYZ(_,Kd.x,Kd.y,Kd.z);return this}},{key:"set",value:function(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,_),this}},{key:"getComponent",value:function(e,_){var S=this.array[e*this.itemSize+_];return this.normalized&&(S=denormalize(S,this.array)),S}},{key:"setComponent",value:function(e,_,S){return this.normalized&&(S=normalize$6(S,this.array)),this.array[e*this.itemSize+_]=S,this}},{key:"getX",value:function(e){var _=this.array[e*this.itemSize];return this.normalized&&(_=denormalize(_,this.array)),_}},{key:"setX",value:function(e,_){return this.normalized&&(_=normalize$6(_,this.array)),this.array[e*this.itemSize]=_,this}},{key:"getY",value:function(e){var _=this.array[e*this.itemSize+1];return this.normalized&&(_=denormalize(_,this.array)),_}},{key:"setY",value:function(e,_){return this.normalized&&(_=normalize$6(_,this.array)),this.array[e*this.itemSize+1]=_,this}},{key:"getZ",value:function(e){var _=this.array[e*this.itemSize+2];return this.normalized&&(_=denormalize(_,this.array)),_}},{key:"setZ",value:function(e,_){return this.normalized&&(_=normalize$6(_,this.array)),this.array[e*this.itemSize+2]=_,this}},{key:"getW",value:function(e){var _=this.array[e*this.itemSize+3];return this.normalized&&(_=denormalize(_,this.array)),_}},{key:"setW",value:function(e,_){return this.normalized&&(_=normalize$6(_,this.array)),this.array[e*this.itemSize+3]=_,this}},{key:"setXY",value:function(e,_,S){return e*=this.itemSize,this.normalized&&(_=normalize$6(_,this.array),S=normalize$6(S,this.array)),this.array[e+0]=_,this.array[e+1]=S,this}},{key:"setXYZ",value:function(e,_,S,k){return e*=this.itemSize,this.normalized&&(_=normalize$6(_,this.array),S=normalize$6(S,this.array),k=normalize$6(k,this.array)),this.array[e+0]=_,this.array[e+1]=S,this.array[e+2]=k,this}},{key:"setXYZW",value:function(e,_,S,k,E){return e*=this.itemSize,this.normalized&&(_=normalize$6(_,this.array),S=normalize$6(S,this.array),k=normalize$6(k,this.array),E=normalize$6(E,this.array)),this.array[e+0]=_,this.array[e+1]=S,this.array[e+2]=k,this.array[e+3]=E,this}},{key:"onUpload",value:function(e){return this.onUploadCallback=e,this}},{key:"clone",value:function(){return new this.constructor(this.array,this.itemSize).copy(this)}},{key:"toJSON",value:function(){var e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==Vc&&(e.usage=this.usage),e}}])}();D("bi",Zd);var $d=function(e){function Int8BufferAttribute(e,_,S){return _classCallCheck3(this,Int8BufferAttribute),_callSuper(this,Int8BufferAttribute,[new Int8Array(e),_,S])}return _inherits(Int8BufferAttribute,e),_createClass3(Int8BufferAttribute)}(Zd),ef=function(e){function Uint8BufferAttribute(e,_,S){return _classCallCheck3(this,Uint8BufferAttribute),_callSuper(this,Uint8BufferAttribute,[new Uint8Array(e),_,S])}return _inherits(Uint8BufferAttribute,e),_createClass3(Uint8BufferAttribute)}(Zd),tf=function(e){function Uint8ClampedBufferAttribute(e,_,S){return _classCallCheck3(this,Uint8ClampedBufferAttribute),_callSuper(this,Uint8ClampedBufferAttribute,[new Uint8ClampedArray(e),_,S])}return _inherits(Uint8ClampedBufferAttribute,e),_createClass3(Uint8ClampedBufferAttribute)}(Zd),rf=function(e){function Int16BufferAttribute(e,_,S){return _classCallCheck3(this,Int16BufferAttribute),_callSuper(this,Int16BufferAttribute,[new Int16Array(e),_,S])}return _inherits(Int16BufferAttribute,e),_createClass3(Int16BufferAttribute)}(Zd),nf=function(e){function Uint16BufferAttribute(e,_,S){return _classCallCheck3(this,Uint16BufferAttribute),_callSuper(this,Uint16BufferAttribute,[new Uint16Array(e),_,S])}return _inherits(Uint16BufferAttribute,e),_createClass3(Uint16BufferAttribute)}(Zd),af=function(e){function Int32BufferAttribute(e,_,S){return _classCallCheck3(this,Int32BufferAttribute),_callSuper(this,Int32BufferAttribute,[new Int32Array(e),_,S])}return _inherits(Int32BufferAttribute,e),_createClass3(Int32BufferAttribute)}(Zd),of=function(e){function Uint32BufferAttribute(e,_,S){return _classCallCheck3(this,Uint32BufferAttribute),_callSuper(this,Uint32BufferAttribute,[new Uint32Array(e),_,S])}return _inherits(Uint32BufferAttribute,e),_createClass3(Uint32BufferAttribute)}(Zd),sf=function(e){function Float16BufferAttribute(e,_,S){var k;return _classCallCheck3(this,Float16BufferAttribute),(k=_callSuper(this,Float16BufferAttribute,[new Uint16Array(e),_,S])).isFloat16BufferAttribute=!0,k}return _inherits(Float16BufferAttribute,e),_createClass3(Float16BufferAttribute,[{key:"getX",value:function(e){var _=_fromHalfFloat(this.array[e*this.itemSize]);return this.normalized&&(_=denormalize(_,this.array)),_}},{key:"setX",value:function(e,_){return this.normalized&&(_=normalize$6(_,this.array)),this.array[e*this.itemSize]=_toHalfFloat(_),this}},{key:"getY",value:function(e){var _=_fromHalfFloat(this.array[e*this.itemSize+1]);return this.normalized&&(_=denormalize(_,this.array)),_}},{key:"setY",value:function(e,_){return this.normalized&&(_=normalize$6(_,this.array)),this.array[e*this.itemSize+1]=_toHalfFloat(_),this}},{key:"getZ",value:function(e){var _=_fromHalfFloat(this.array[e*this.itemSize+2]);return this.normalized&&(_=denormalize(_,this.array)),_}},{key:"setZ",value:function(e,_){return this.normalized&&(_=normalize$6(_,this.array)),this.array[e*this.itemSize+2]=_toHalfFloat(_),this}},{key:"getW",value:function(e){var _=_fromHalfFloat(this.array[e*this.itemSize+3]);return this.normalized&&(_=denormalize(_,this.array)),_}},{key:"setW",value:function(e,_){return this.normalized&&(_=normalize$6(_,this.array)),this.array[e*this.itemSize+3]=_toHalfFloat(_),this}},{key:"setXY",value:function(e,_,S){return e*=this.itemSize,this.normalized&&(_=normalize$6(_,this.array),S=normalize$6(S,this.array)),this.array[e+0]=_toHalfFloat(_),this.array[e+1]=_toHalfFloat(S),this}},{key:"setXYZ",value:function(e,_,S,k){return e*=this.itemSize,this.normalized&&(_=normalize$6(_,this.array),S=normalize$6(S,this.array),k=normalize$6(k,this.array)),this.array[e+0]=_toHalfFloat(_),this.array[e+1]=_toHalfFloat(S),this.array[e+2]=_toHalfFloat(k),this}},{key:"setXYZW",value:function(e,_,S,k,E){return e*=this.itemSize,this.normalized&&(_=normalize$6(_,this.array),S=normalize$6(S,this.array),k=normalize$6(k,this.array),E=normalize$6(E,this.array)),this.array[e+0]=_toHalfFloat(_),this.array[e+1]=_toHalfFloat(S),this.array[e+2]=_toHalfFloat(k),this.array[e+3]=_toHalfFloat(E),this}}])}(Zd),uf=function(e){function Float32BufferAttribute(e,_,S){return _classCallCheck3(this,Float32BufferAttribute),_callSuper(this,Float32BufferAttribute,[new Float32Array(e),_,S])}return _inherits(Float32BufferAttribute,e),_createClass3(Float32BufferAttribute)}(Zd),lf=0,cf=new Qh,hf=new kd,df=new th,ff=new Ch,pf=new Ch,vf=new th,gf=function(e){function BufferGeometry(){var e;return _classCallCheck3(this,BufferGeometry),(e=_callSuper(this,BufferGeometry)).isBufferGeometry=!0,Object.defineProperty(e,"id",{value:lf++}),e.uuid=generateUUID(),e.name="",e.type="BufferGeometry",e.index=null,e.indirect=null,e.attributes={},e.morphAttributes={},e.morphTargetsRelative=!1,e.groups=[],e.boundingBox=null,e.boundingSphere=null,e.drawRange={start:0,count:1/0},e.userData={},e}return _inherits(BufferGeometry,e),_createClass3(BufferGeometry,[{key:"getIndex",value:function(){return this.index}},{key:"setIndex",value:function(e){return Array.isArray(e)?this.index=new(arrayNeedsUint32(e)?of:nf)(e,1):this.index=e,this}},{key:"setIndirect",value:function(e){return this.indirect=e,this}},{key:"getIndirect",value:function(){return this.indirect}},{key:"getAttribute",value:function(e){return this.attributes[e]}},{key:"setAttribute",value:function(e,_){return this.attributes[e]=_,this}},{key:"deleteAttribute",value:function(e){return delete this.attributes[e],this}},{key:"hasAttribute",value:function(e){return void 0!==this.attributes[e]}},{key:"addGroup",value:function(e,_){var S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.groups.push({start:e,count:_,materialIndex:S})}},{key:"clearGroups",value:function(){this.groups=[]}},{key:"setDrawRange",value:function(e,_){this.drawRange.start=e,this.drawRange.count=_}},{key:"applyMatrix4",value:function(e){var _=this.attributes.position;void 0!==_&&(_.applyMatrix4(e),_.needsUpdate=!0);var S=this.attributes.normal;if(void 0!==S){var k=(new ih).getNormalMatrix(e);S.applyNormalMatrix(k),S.needsUpdate=!0}var E=this.attributes.tangent;return void 0!==E&&(E.transformDirection(e),E.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}},{key:"applyQuaternion",value:function(e){return cf.makeRotationFromQuaternion(e),this.applyMatrix4(cf),this}},{key:"rotateX",value:function(e){return cf.makeRotationX(e),this.applyMatrix4(cf),this}},{key:"rotateY",value:function(e){return cf.makeRotationY(e),this.applyMatrix4(cf),this}},{key:"rotateZ",value:function(e){return cf.makeRotationZ(e),this.applyMatrix4(cf),this}},{key:"translate",value:function(e,_,S){return cf.makeTranslation(e,_,S),this.applyMatrix4(cf),this}},{key:"scale",value:function(e,_,S){return cf.makeScale(e,_,S),this.applyMatrix4(cf),this}},{key:"lookAt",value:function(e){return hf.lookAt(e),hf.updateMatrix(),this.applyMatrix4(hf.matrix),this}},{key:"center",value:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(df).negate(),this.translate(df.x,df.y,df.z),this}},{key:"setFromPoints",value:function(e){var _=this.getAttribute("position");if(void 0===_){for(var S=[],k=0,E=e.length;k<E;k++){var T=e[k];S.push(T.x,T.y,T.z||0)}this.setAttribute("position",new uf(S,3))}else{for(var M=Math.min(e.length,_.count),I=0;I<M;I++){var R=e[I];_.setXYZ(I,R.x,R.y,R.z||0)}e.length,_.count,_.needsUpdate=!0}return this}},{key:"computeBoundingBox",value:function(){null===this.boundingBox&&(this.boundingBox=new Ch);var e=this.attributes.position,_=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)this.boundingBox.set(new th(-1/0,-1/0,-1/0),new th(1/0,1/0,1/0));else{if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),_)for(var S=0,k=_.length;S<k;S++){var E=_[S];ff.setFromBufferAttribute(E),this.morphTargetsRelative?(vf.addVectors(this.boundingBox.min,ff.min),this.boundingBox.expandByPoint(vf),vf.addVectors(this.boundingBox.max,ff.max),this.boundingBox.expandByPoint(vf)):(this.boundingBox.expandByPoint(ff.min),this.boundingBox.expandByPoint(ff.max))}}else this.boundingBox.makeEmpty();isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z)}}},{key:"computeBoundingSphere",value:function(){null===this.boundingSphere&&(this.boundingSphere=new jh);var e=this.attributes.position,_=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)this.boundingSphere.set(new th,1/0);else if(e){var S=this.boundingSphere.center;if(ff.setFromBufferAttribute(e),_)for(var k=0,E=_.length;k<E;k++){var T=_[k];pf.setFromBufferAttribute(T),this.morphTargetsRelative?(vf.addVectors(ff.min,pf.min),ff.expandByPoint(vf),vf.addVectors(ff.max,pf.max),ff.expandByPoint(vf)):(ff.expandByPoint(pf.min),ff.expandByPoint(pf.max))}ff.getCenter(S);for(var M=0,I=0,R=e.count;I<R;I++)vf.fromBufferAttribute(e,I),M=Math.max(M,S.distanceToSquared(vf));if(_)for(var O=0,D=_.length;O<D;O++)for(var L=_[O],U=this.morphTargetsRelative,B=0,z=L.count;B<z;B++)vf.fromBufferAttribute(L,B),U&&(df.fromBufferAttribute(e,B),vf.add(df)),M=Math.max(M,S.distanceToSquared(vf));this.boundingSphere.radius=Math.sqrt(M),isNaN(this.boundingSphere.radius)}}},{key:"computeTangents",value:function(){var e=this.index,_=this.attributes;if(null!==e&&void 0!==_.position&&void 0!==_.normal&&void 0!==_.uv){var S=_.position,k=_.normal,E=_.uv;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new Zd(new Float32Array(4*S.count),4));for(var T=this.getAttribute("tangent"),M=[],I=[],R=0;R<S.count;R++)M[R]=new th,I[R]=new th;var O=new th,D=new th,L=new th,U=new $c,B=new $c,z=new $c,G=new th,j=new th,V=this.groups;0===V.length&&(V=[{start:0,count:e.count}]);for(var H=0,W=V.length;H<W;++H)for(var q=V[H],X=q.start,Y=X,K=X+q.count;Y<K;Y+=3)handleTriangle(e.getX(Y+0),e.getX(Y+1),e.getX(Y+2));for(var J=new th,Q=new th,Z=new th,$=new th,ee=0,te=V.length;ee<te;++ee)for(var re=V[ee],ne=re.start,ie=ne,ae=ne+re.count;ie<ae;ie+=3)handleVertex(e.getX(ie+0)),handleVertex(e.getX(ie+1)),handleVertex(e.getX(ie+2))}function handleTriangle(e,_,k){O.fromBufferAttribute(S,e),D.fromBufferAttribute(S,_),L.fromBufferAttribute(S,k),U.fromBufferAttribute(E,e),B.fromBufferAttribute(E,_),z.fromBufferAttribute(E,k),D.sub(O),L.sub(O),B.sub(U),z.sub(U);var T=1/(B.x*z.y-z.x*B.y);isFinite(T)&&(G.copy(D).multiplyScalar(z.y).addScaledVector(L,-B.y).multiplyScalar(T),j.copy(L).multiplyScalar(B.x).addScaledVector(D,-z.x).multiplyScalar(T),M[e].add(G),M[_].add(G),M[k].add(G),I[e].add(j),I[_].add(j),I[k].add(j))}function handleVertex(e){Z.fromBufferAttribute(k,e),$.copy(Z);var _=M[e];J.copy(_),J.sub(Z.multiplyScalar(Z.dot(_))).normalize(),Q.crossVectors($,_);var S=Q.dot(I[e])<0?-1:1;T.setXYZW(e,J.x,J.y,J.z,S)}}},{key:"computeVertexNormals",value:function(){var e=this.index,_=this.getAttribute("position");if(void 0!==_){var S=this.getAttribute("normal");if(void 0===S)S=new Zd(new Float32Array(3*_.count),3),this.setAttribute("normal",S);else for(var k=0,E=S.count;k<E;k++)S.setXYZ(k,0,0,0);var T=new th,M=new th,I=new th,R=new th,O=new th,D=new th,L=new th,U=new th;if(e)for(var B=0,z=e.count;B<z;B+=3){var G=e.getX(B+0),j=e.getX(B+1),V=e.getX(B+2);T.fromBufferAttribute(_,G),M.fromBufferAttribute(_,j),I.fromBufferAttribute(_,V),L.subVectors(I,M),U.subVectors(T,M),L.cross(U),R.fromBufferAttribute(S,G),O.fromBufferAttribute(S,j),D.fromBufferAttribute(S,V),R.add(L),O.add(L),D.add(L),S.setXYZ(G,R.x,R.y,R.z),S.setXYZ(j,O.x,O.y,O.z),S.setXYZ(V,D.x,D.y,D.z)}else for(var H=0,W=_.count;H<W;H+=3)T.fromBufferAttribute(_,H+0),M.fromBufferAttribute(_,H+1),I.fromBufferAttribute(_,H+2),L.subVectors(I,M),U.subVectors(T,M),L.cross(U),S.setXYZ(H+0,L.x,L.y,L.z),S.setXYZ(H+1,L.x,L.y,L.z),S.setXYZ(H+2,L.x,L.y,L.z);this.normalizeNormals(),S.needsUpdate=!0}}},{key:"normalizeNormals",value:function(){for(var e=this.attributes.normal,_=0,S=e.count;_<S;_++)vf.fromBufferAttribute(e,_),vf.normalize(),e.setXYZ(_,vf.x,vf.y,vf.z)}},{key:"toNonIndexed",value:function(){function convertBufferAttribute(e,_){for(var S=e.array,k=e.itemSize,E=e.normalized,T=new S.constructor(_.length*k),M=0,I=0,R=0,O=_.length;R<O;R++){M=e.isInterleavedBufferAttribute?_[R]*e.data.stride+e.offset:_[R]*k;for(var D=0;D<k;D++)T[I++]=S[M++]}return new Zd(T,k,E)}if(null===this.index)return this;var e=new BufferGeometry,_=this.index.array,S=this.attributes;for(var k in S){var E=convertBufferAttribute(S[k],_);e.setAttribute(k,E)}var T=this.morphAttributes;for(var M in T){for(var I=[],R=T[M],O=0,D=R.length;O<D;O++){var L=convertBufferAttribute(R[O],_);I.push(L)}e.morphAttributes[M]=I}e.morphTargetsRelative=this.morphTargetsRelative;for(var U=this.groups,B=0,z=U.length;B<z;B++){var G=U[B];e.addGroup(G.start,G.count,G.materialIndex)}return e}},{key:"toJSON",value:function(){var e={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){var _=this.parameters;for(var S in _)void 0!==_[S]&&(e[S]=_[S]);return e}e.data={attributes:{}};var k=this.index;null!==k&&(e.data.index={type:k.array.constructor.name,array:Array.prototype.slice.call(k.array)});var E=this.attributes;for(var T in E){var M=E[T];e.data.attributes[T]=M.toJSON(e.data)}var I={},R=!1;for(var O in this.morphAttributes){for(var D=this.morphAttributes[O],L=[],U=0,B=D.length;U<B;U++){var z=D[U];L.push(z.toJSON(e.data))}L.length>0&&(I[O]=L,R=!0)}R&&(e.data.morphAttributes=I,e.data.morphTargetsRelative=this.morphTargetsRelative);var G=this.groups;G.length>0&&(e.data.groups=JSON.parse(JSON.stringify(G)));var j=this.boundingSphere;return null!==j&&(e.data.boundingSphere=j.toJSON()),e}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;var _={};this.name=e.name;var S=e.index;null!==S&&this.setIndex(S.clone());var k=e.attributes;for(var E in k){var T=k[E];this.setAttribute(E,T.clone(_))}var M=e.morphAttributes;for(var I in M){for(var R=[],O=M[I],D=0,L=O.length;D<L;D++)R.push(O[D].clone(_));this.morphAttributes[I]=R}this.morphTargetsRelative=e.morphTargetsRelative;for(var U=e.groups,B=0,z=U.length;B<z;B++){var G=U[B];this.addGroup(G.start,G.count,G.materialIndex)}var j=e.boundingBox;null!==j&&(this.boundingBox=j.clone());var V=e.boundingSphere;return null!==V&&(this.boundingSphere=V.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}])}(Xc);D("bh",gf);var mf=new Qh,yf=new Jh,_f=new jh,bf=new th,Sf=new th,wf=new th,xf=new th,kf=new th,Cf=new th,Af=new th,Ef=new th,Tf=function(e){function Mesh(){var e,_=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new gf,S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new qd;return _classCallCheck3(this,Mesh),(e=_callSuper(this,Mesh)).isMesh=!0,e.type="Mesh",e.geometry=_,e.material=S,e.morphTargetDictionary=void 0,e.morphTargetInfluences=void 0,e.count=1,e.updateMorphTargets(),e}return _inherits(Mesh,e),_createClass3(Mesh,[{key:"copy",value:function(e,_){return _superPropGet(Mesh,"copy",this,3)([e,_]),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}},{key:"updateMorphTargets",value:function(){var e=this.geometry.morphAttributes,_=Object.keys(e);if(_.length>0){var S=e[_[0]];if(void 0!==S){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var k=0,E=S.length;k<E;k++){var T=S[k].name||String(k);this.morphTargetInfluences.push(0),this.morphTargetDictionary[T]=k}}}}},{key:"getVertexPosition",value:function(e,_){var S=this.geometry,k=S.attributes.position,E=S.morphAttributes.position,T=S.morphTargetsRelative;_.fromBufferAttribute(k,e);var M=this.morphTargetInfluences;if(E&&M){Cf.set(0,0,0);for(var I=0,R=E.length;I<R;I++){var O=M[I],D=E[I];0!==O&&(kf.fromBufferAttribute(D,e),T?Cf.addScaledVector(kf,O):Cf.addScaledVector(kf.sub(_),O))}_.add(Cf)}return _}},{key:"raycast",value:function(e,_){var S=this.geometry,k=this.material,E=this.matrixWorld;if(void 0!==k){if(null===S.boundingSphere&&S.computeBoundingSphere(),_f.copy(S.boundingSphere),_f.applyMatrix4(E),yf.copy(e.ray).recast(e.near),!1===_f.containsPoint(yf.origin)){if(null===yf.intersectSphere(_f,bf))return;if(yf.origin.distanceToSquared(bf)>Math.pow(e.far-e.near,2))return}mf.copy(E).invert(),yf.copy(e.ray).applyMatrix4(mf),null!==S.boundingBox&&!1===yf.intersectsBox(S.boundingBox)||this._computeIntersections(e,_,yf)}}},{key:"_computeIntersections",value:function(e,_,S){var k,E=this.geometry,T=this.material,M=E.index,I=E.attributes.position,R=E.attributes.uv,O=E.attributes.uv1,D=E.attributes.normal,L=E.groups,U=E.drawRange;if(null!==M)if(Array.isArray(T))for(var B=0,z=L.length;B<z;B++)for(var G=L[B],j=T[G.materialIndex],V=Math.max(G.start,U.start),H=Math.min(M.count,Math.min(G.start+G.count,U.start+U.count));V<H;V+=3){(k=checkGeometryIntersection(this,j,e,S,R,O,D,M.getX(V),M.getX(V+1),M.getX(V+2)))&&(k.faceIndex=Math.floor(V/3),k.face.materialIndex=G.materialIndex,_.push(k))}else for(var W=Math.max(0,U.start),q=Math.min(M.count,U.start+U.count);W<q;W+=3){(k=checkGeometryIntersection(this,T,e,S,R,O,D,M.getX(W),M.getX(W+1),M.getX(W+2)))&&(k.faceIndex=Math.floor(W/3),_.push(k))}else if(void 0!==I)if(Array.isArray(T))for(var X=0,Y=L.length;X<Y;X++)for(var K=L[X],J=T[K.materialIndex],Q=Math.max(K.start,U.start),Z=Math.min(I.count,Math.min(K.start+K.count,U.start+U.count));Q<Z;Q+=3){(k=checkGeometryIntersection(this,J,e,S,R,O,D,Q,Q+1,Q+2))&&(k.faceIndex=Math.floor(Q/3),k.face.materialIndex=K.materialIndex,_.push(k))}else for(var $=Math.max(0,U.start),ee=Math.min(I.count,U.start+U.count);$<ee;$+=3){(k=checkGeometryIntersection(this,T,e,S,R,O,D,$,$+1,$+2))&&(k.faceIndex=Math.floor($/3),_.push(k))}}}])}(kd);function checkGeometryIntersection(e,_,S,k,E,T,M,I,R,O){e.getVertexPosition(I,Sf),e.getVertexPosition(R,wf),e.getVertexPosition(O,xf);var D=function(e,_,S,k,E,T,M,I){if(null===(_.side===rl?k.intersectTriangle(M,T,E,!0,I):k.intersectTriangle(E,T,M,0===_.side,I)))return null;Ef.copy(I),Ef.applyMatrix4(e.matrixWorld);var R=S.ray.origin.distanceTo(Ef);return R<S.near||R>S.far?null:{distance:R,point:Ef.clone(),object:e}}(e,_,S,k,Sf,wf,xf,Af);if(D){var L=new th;Bd.getBarycoord(Af,Sf,wf,xf,L),E&&(D.uv=Bd.getInterpolatedAttribute(E,I,R,O,L,new $c)),T&&(D.uv1=Bd.getInterpolatedAttribute(T,I,R,O,L,new $c)),M&&(D.normal=Bd.getInterpolatedAttribute(M,I,R,O,L,new th),D.normal.dot(k.direction)>0&&D.normal.multiplyScalar(-1));var U={a:I,b:R,c:O,normal:new th,materialIndex:0};Bd.getNormal(Sf,wf,xf,U.normal),D.face=U,D.barycoord=L}return D}D("cc",Tf);var Mf=function(e){function BoxGeometry(){var e,_=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,k=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,E=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,T=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,M=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;_classCallCheck3(this,BoxGeometry),(e=_callSuper(this,BoxGeometry)).type="BoxGeometry",e.parameters={width:_,height:S,depth:k,widthSegments:E,heightSegments:T,depthSegments:M};var I=e;E=Math.floor(E),T=Math.floor(T),M=Math.floor(M);var R=[],O=[],D=[],L=[],U=0,B=0;function buildPlane(e,_,S,k,E,T,M,z,G,j,V){for(var H=T/G,W=M/j,q=T/2,X=M/2,Y=z/2,K=G+1,J=j+1,Q=0,Z=0,$=new th,ee=0;ee<J;ee++)for(var te=ee*W-X,re=0;re<K;re++){var ne=re*H-q;$[e]=ne*k,$[_]=te*E,$[S]=Y,O.push($.x,$.y,$.z),$[e]=0,$[_]=0,$[S]=z>0?1:-1,D.push($.x,$.y,$.z),L.push(re/G),L.push(1-ee/j),Q+=1}for(var ie=0;ie<j;ie++)for(var ae=0;ae<G;ae++){var oe=U+ae+K*ie,se=U+ae+K*(ie+1),ue=U+(ae+1)+K*(ie+1),le=U+(ae+1)+K*ie;R.push(oe,se,le),R.push(se,ue,le),Z+=6}I.addGroup(B,Z,V),B+=Z,U+=Q}return buildPlane("z","y","x",-1,-1,k,S,_,M,T,0),buildPlane("z","y","x",1,-1,k,S,-_,M,T,1),buildPlane("x","z","y",1,1,_,k,S,E,M,2),buildPlane("x","z","y",1,-1,_,k,-S,E,M,3),buildPlane("x","y","z",1,-1,_,S,k,E,T,4),buildPlane("x","y","z",-1,-1,_,S,-k,E,T,5),e.setIndex(R),e.setAttribute("position",new uf(O,3)),e.setAttribute("normal",new uf(D,3)),e.setAttribute("uv",new uf(L,2)),e}return _inherits(BoxGeometry,e),_createClass3(BoxGeometry,[{key:"copy",value:function(e){return _superPropGet(BoxGeometry,"copy",this,3)([e]),this.parameters=Object.assign({},e.parameters),this}}],[{key:"fromJSON",value:function(e){return new BoxGeometry(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}])}(gf);function cloneUniforms(e){var _={};for(var S in e)for(var k in _[S]={},e[S]){var E=e[S][k];E&&(E.isColor||E.isMatrix3||E.isMatrix4||E.isVector2||E.isVector3||E.isVector4||E.isTexture||E.isQuaternion)?E.isRenderTargetTexture?_[S][k]=null:_[S][k]=E.clone():Array.isArray(E)?_[S][k]=E.slice():_[S][k]=E}return _}function mergeUniforms(e){for(var _={},S=0;S<e.length;S++){var k=cloneUniforms(e[S]);for(var E in k)_[E]=k[E]}return _}function getUnlitUniformColorSpace(e){var _=e.getRenderTarget();return null===_?e.outputColorSpace:!0===_.isXRRenderTarget?_.texture.colorSpace:hh.workingColorSpace}D("bf",Mf);var If={clone:cloneUniforms,merge:mergeUniforms},Rf=function(e){function ShaderMaterial(e){var _;return _classCallCheck3(this,ShaderMaterial),(_=_callSuper(this,ShaderMaterial)).isShaderMaterial=!0,_.type="ShaderMaterial",_.defines={},_.uniforms={},_.uniformsGroups=[],_.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",_.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",_.linewidth=1,_.wireframe=!1,_.wireframeLinewidth=1,_.fog=!1,_.lights=!1,_.clipping=!1,_.forceSinglePass=!0,_.extensions={clipCullDistance:!1,multiDraw:!1},_.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},_.index0AttributeName=void 0,_.uniformsNeedUpdate=!1,_.glslVersion=null,void 0!==e&&_.setValues(e),_}return _inherits(ShaderMaterial,e),_createClass3(ShaderMaterial,[{key:"copy",value:function(e){return _superPropGet(ShaderMaterial,"copy",this,3)([e]),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=cloneUniforms(e.uniforms),this.uniformsGroups=function(e){for(var _=[],S=0;S<e.length;S++)_.push(e[S].clone());return _}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}},{key:"toJSON",value:function(e){var _=_superPropGet(ShaderMaterial,"toJSON",this,3)([e]);for(var S in _.glslVersion=this.glslVersion,_.uniforms={},this.uniforms){var k=this.uniforms[S].value;k&&k.isTexture?_.uniforms[S]={type:"t",value:k.toJSON(e).uuid}:k&&k.isColor?_.uniforms[S]={type:"c",value:k.getHex()}:k&&k.isVector2?_.uniforms[S]={type:"v2",value:k.toArray()}:k&&k.isVector3?_.uniforms[S]={type:"v3",value:k.toArray()}:k&&k.isVector4?_.uniforms[S]={type:"v4",value:k.toArray()}:k&&k.isMatrix3?_.uniforms[S]={type:"m3",value:k.toArray()}:k&&k.isMatrix4?_.uniforms[S]={type:"m4",value:k.toArray()}:_.uniforms[S]={value:k}}Object.keys(this.defines).length>0&&(_.defines=this.defines),_.vertexShader=this.vertexShader,_.fragmentShader=this.fragmentShader,_.lights=this.lights,_.clipping=this.clipping;var E={};for(var T in this.extensions)!0===this.extensions[T]&&(E[T]=!0);return Object.keys(E).length>0&&(_.extensions=E),_}}])}(Wd);D("ca",Rf);var Pf=function(e){function Camera(){var e;return _classCallCheck3(this,Camera),(e=_callSuper(this,Camera)).isCamera=!0,e.type="Camera",e.matrixWorldInverse=new Qh,e.projectionMatrix=new Qh,e.projectionMatrixInverse=new Qh,e.coordinateSystem=Wc,e._reversedDepth=!1,e}return _inherits(Camera,e),_createClass3(Camera,[{key:"reversedDepth",get:function(){return this._reversedDepth}},{key:"copy",value:function(e,_){return _superPropGet(Camera,"copy",this,3)([e,_]),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}},{key:"getWorldDirection",value:function(e){return _superPropGet(Camera,"getWorldDirection",this,3)([e]).negate()}},{key:"updateMatrixWorld",value:function(e){_superPropGet(Camera,"updateMatrixWorld",this,3)([e]),this.matrixWorldInverse.copy(this.matrixWorld).invert()}},{key:"updateWorldMatrix",value:function(e,_){_superPropGet(Camera,"updateWorldMatrix",this,3)([e,_]),this.matrixWorldInverse.copy(this.matrixWorld).invert()}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}])}(kd),Of=new th,Df=new $c,Lf=new $c,Ff=function(e){function PerspectiveCamera(){var e,_=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,k=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,E=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2e3;return _classCallCheck3(this,PerspectiveCamera),(e=_callSuper(this,PerspectiveCamera)).isPerspectiveCamera=!0,e.type="PerspectiveCamera",e.fov=_,e.zoom=1,e.near=k,e.far=E,e.focus=10,e.aspect=S,e.view=null,e.filmGauge=35,e.filmOffset=0,e.updateProjectionMatrix(),e}return _inherits(PerspectiveCamera,e),_createClass3(PerspectiveCamera,[{key:"copy",value:function(e,_){return _superPropGet(PerspectiveCamera,"copy",this,3)([e,_]),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}},{key:"setFocalLength",value:function(e){var _=.5*this.getFilmHeight()/e;this.fov=2*Qc*Math.atan(_),this.updateProjectionMatrix()}},{key:"getFocalLength",value:function(){var e=Math.tan(.5*Jc*this.fov);return.5*this.getFilmHeight()/e}},{key:"getEffectiveFOV",value:function(){return 2*Qc*Math.atan(Math.tan(.5*Jc*this.fov)/this.zoom)}},{key:"getFilmWidth",value:function(){return this.filmGauge*Math.min(this.aspect,1)}},{key:"getFilmHeight",value:function(){return this.filmGauge/Math.max(this.aspect,1)}},{key:"getViewBounds",value:function(e,_,S){Of.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),_.set(Of.x,Of.y).multiplyScalar(-e/Of.z),Of.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),S.set(Of.x,Of.y).multiplyScalar(-e/Of.z)}},{key:"getViewSize",value:function(e,_){return this.getViewBounds(e,Df,Lf),_.subVectors(Lf,Df)}},{key:"setViewOffset",value:function(e,_,S,k,E,T){this.aspect=e/_,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=_,this.view.offsetX=S,this.view.offsetY=k,this.view.width=E,this.view.height=T,this.updateProjectionMatrix()}},{key:"clearViewOffset",value:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}},{key:"updateProjectionMatrix",value:function(){var e=this.near,_=e*Math.tan(.5*Jc*this.fov)/this.zoom,S=2*_,k=this.aspect*S,E=-.5*k,T=this.view;if(null!==this.view&&this.view.enabled){var M=T.fullWidth,I=T.fullHeight;E+=T.offsetX*k/M,_-=T.offsetY*S/I,k*=T.width/M,S*=T.height/I}var R=this.filmOffset;0!==R&&(E+=e*R/this.getFilmWidth()),this.projectionMatrix.makePerspective(E,E+k,_,_-S,e,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}},{key:"toJSON",value:function(e){var _=_superPropGet(PerspectiveCamera,"toJSON",this,3)([e]);return _.object.fov=this.fov,_.object.zoom=this.zoom,_.object.near=this.near,_.object.far=this.far,_.object.focus=this.focus,_.object.aspect=this.aspect,null!==this.view&&(_.object.view=Object.assign({},this.view)),_.object.filmGauge=this.filmGauge,_.object.filmOffset=this.filmOffset,_}}])}(Pf);D("ap",Ff);var Uf=-90,Bf=function(e){function CubeCamera(e,_,S){var k;_classCallCheck3(this,CubeCamera),(k=_callSuper(this,CubeCamera)).type="CubeCamera",k.renderTarget=S,k.coordinateSystem=null,k.activeMipmapLevel=0;var E=new Ff(Uf,1,e,_);E.layers=k.layers,k.add(E);var T=new Ff(Uf,1,e,_);T.layers=k.layers,k.add(T);var M=new Ff(Uf,1,e,_);M.layers=k.layers,k.add(M);var I=new Ff(Uf,1,e,_);I.layers=k.layers,k.add(I);var R=new Ff(Uf,1,e,_);R.layers=k.layers,k.add(R);var O=new Ff(Uf,1,e,_);return O.layers=k.layers,k.add(O),k}return _inherits(CubeCamera,e),_createClass3(CubeCamera,[{key:"updateCoordinateSystem",value:function(){var e,_=this.coordinateSystem,S=this.children.concat(),k=_slicedToArray(S,6),E=k[0],T=k[1],M=k[2],I=k[3],R=k[4],O=k[5],D=_createForOfIteratorHelper2(S);try{for(D.s();!(e=D.n()).done;){var L=e.value;this.remove(L)}}catch(G){D.e(G)}finally{D.f()}if(_===Wc)E.up.set(0,1,0),E.lookAt(1,0,0),T.up.set(0,1,0),T.lookAt(-1,0,0),M.up.set(0,0,-1),M.lookAt(0,1,0),I.up.set(0,0,1),I.lookAt(0,-1,0),R.up.set(0,1,0),R.lookAt(0,0,1),O.up.set(0,1,0),O.lookAt(0,0,-1);else{if(_!==qc)throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+_);E.up.set(0,-1,0),E.lookAt(-1,0,0),T.up.set(0,-1,0),T.lookAt(1,0,0),M.up.set(0,0,1),M.lookAt(0,1,0),I.up.set(0,0,-1),I.lookAt(0,-1,0),R.up.set(0,-1,0),R.lookAt(0,0,1),O.up.set(0,-1,0),O.lookAt(0,0,-1)}var U,B=_createForOfIteratorHelper2(S);try{for(B.s();!(U=B.n()).done;){var z=U.value;this.add(z),z.updateMatrixWorld()}}catch(G){B.e(G)}finally{B.f()}}},{key:"update",value:function(e,_){null===this.parent&&this.updateMatrixWorld();var S=this.renderTarget,k=this.activeMipmapLevel;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());var E=_slicedToArray(this.children,6),T=E[0],M=E[1],I=E[2],R=E[3],O=E[4],D=E[5],L=e.getRenderTarget(),U=e.getActiveCubeFace(),B=e.getActiveMipmapLevel(),z=e.xr.enabled;e.xr.enabled=!1;var G=S.texture.generateMipmaps;S.texture.generateMipmaps=!1,e.setRenderTarget(S,0,k),e.render(_,T),e.setRenderTarget(S,1,k),e.render(_,M),e.setRenderTarget(S,2,k),e.render(_,I),e.setRenderTarget(S,3,k),e.render(_,R),e.setRenderTarget(S,4,k),e.render(_,O),S.texture.generateMipmaps=G,e.setRenderTarget(S,5,k),e.render(_,D),e.setRenderTarget(L,U,B),e.xr.enabled=z,S.texture.needsPMREMUpdate=!0}}])}(kd),Nf=function(e){function CubeTexture(){var e,_=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:dl,k=arguments.length>2?arguments[2]:void 0,E=arguments.length>3?arguments[3]:void 0,T=arguments.length>4?arguments[4]:void 0,M=arguments.length>5?arguments[5]:void 0,I=arguments.length>6?arguments[6]:void 0,R=arguments.length>7?arguments[7]:void 0,O=arguments.length>8?arguments[8]:void 0,D=arguments.length>9?arguments[9]:void 0;return _classCallCheck3(this,CubeTexture),(e=_callSuper(this,CubeTexture,[_,S,k,E,T,M,I,R,O,D])).isCubeTexture=!0,e.flipY=!1,e}return _inherits(CubeTexture,e),_createClass3(CubeTexture,[{key:"images",get:function(){return this.image},set:function(e){this.image=e}}])}(mh),zf=function(e){function WebGLCubeRenderTarget(){var e,_=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck3(this,WebGLCubeRenderTarget),(e=_callSuper(this,WebGLCubeRenderTarget,[_,_,S])).isWebGLCubeRenderTarget=!0;var k={width:_,height:_,depth:1},E=[k,k,k,k,k,k];return e.texture=new Nf(E),e._setTextureOptions(S),e.texture.isRenderTargetTexture=!0,e}return _inherits(WebGLCubeRenderTarget,e),_createClass3(WebGLCubeRenderTarget,[{key:"fromEquirectangularTexture",value:function(e,_){this.texture.type=_.type,this.texture.colorSpace=_.colorSpace,this.texture.generateMipmaps=_.generateMipmaps,this.texture.minFilter=_.minFilter,this.texture.magFilter=_.magFilter;var S={tEquirect:{value:null}},k="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",E="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",T=new Mf(5,5,5),M=new Rf({name:"CubemapFromEquirect",uniforms:cloneUniforms(S),vertexShader:k,fragmentShader:E,side:rl,blending:0});M.uniforms.tEquirect.value=_;var I=new Tf(T,M),R=_.minFilter;return _.minFilter===Cl&&(_.minFilter=xl),new Bf(1,10,this).update(e,I),_.minFilter=R,I.geometry.dispose(),I.material.dispose(),this}},{key:"clear",value:function(e){for(var _=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],S=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],k=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],E=e.getRenderTarget(),T=0;T<6;T++)e.setRenderTarget(this,T),e.clear(_,S,k);e.setRenderTarget(E)}}])}(bh);D("aT",zf);var Gf=function(e){function Group(){var e;return _classCallCheck3(this,Group),(e=_callSuper(this,Group)).isGroup=!0,e.type="Group",e}return _inherits(Group,e),_createClass3(Group)}(kd),jf={type:"move"},Vf=function(){return _createClass3(function WebXRController(){_classCallCheck3(this,WebXRController),this._targetRay=null,this._grip=null,this._hand=null},[{key:"getHandSpace",value:function(){return null===this._hand&&(this._hand=new Gf,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}},{key:"getTargetRaySpace",value:function(){return null===this._targetRay&&(this._targetRay=new Gf,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new th,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new th),this._targetRay}},{key:"getGripSpace",value:function(){return null===this._grip&&(this._grip=new Gf,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new th,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new th),this._grip}},{key:"dispatchEvent",value:function(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}},{key:"connect",value:function(e){if(e&&e.hand){var _=this._hand;if(_){var S,k=_createForOfIteratorHelper2(e.hand.values());try{for(k.s();!(S=k.n()).done;){var E=S.value;this._getHandJoint(_,E)}}catch(T){k.e(T)}finally{k.f()}}}return this.dispatchEvent({type:"connected",data:e}),this}},{key:"disconnect",value:function(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}},{key:"update",value:function(e,_,S){var k=null,E=null,T=null,M=this._targetRay,I=this._grip,R=this._hand;if(e&&"visible-blurred"!==_.session.visibilityState){if(R&&e.hand){T=!0;var O,D=_createForOfIteratorHelper2(e.hand.values());try{for(D.s();!(O=D.n()).done;){var L=O.value,U=_.getJointPose(L,S),B=this._getHandJoint(R,L);null!==U&&(B.matrix.fromArray(U.transform.matrix),B.matrix.decompose(B.position,B.rotation,B.scale),B.matrixWorldNeedsUpdate=!0,B.jointRadius=U.radius),B.visible=null!==U}}catch(V){D.e(V)}finally{D.f()}var z=R.joints["index-finger-tip"],G=R.joints["thumb-tip"],j=z.position.distanceTo(G.position);R.inputState.pinching&&j>.025?(R.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!R.inputState.pinching&&j<=.015&&(R.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==I&&e.gripSpace&&null!==(E=_.getPose(e.gripSpace,S))&&(I.matrix.fromArray(E.transform.matrix),I.matrix.decompose(I.position,I.rotation,I.scale),I.matrixWorldNeedsUpdate=!0,E.linearVelocity?(I.hasLinearVelocity=!0,I.linearVelocity.copy(E.linearVelocity)):I.hasLinearVelocity=!1,E.angularVelocity?(I.hasAngularVelocity=!0,I.angularVelocity.copy(E.angularVelocity)):I.hasAngularVelocity=!1);null!==M&&(null===(k=_.getPose(e.targetRaySpace,S))&&null!==E&&(k=E),null!==k&&(M.matrix.fromArray(k.transform.matrix),M.matrix.decompose(M.position,M.rotation,M.scale),M.matrixWorldNeedsUpdate=!0,k.linearVelocity?(M.hasLinearVelocity=!0,M.linearVelocity.copy(k.linearVelocity)):M.hasLinearVelocity=!1,k.angularVelocity?(M.hasAngularVelocity=!0,M.angularVelocity.copy(k.angularVelocity)):M.hasAngularVelocity=!1,this.dispatchEvent(jf)))}return null!==M&&(M.visible=null!==k),null!==I&&(I.visible=null!==E),null!==R&&(R.visible=null!==T),this}},{key:"_getHandJoint",value:function(e,_){if(void 0===e.joints[_.jointName]){var S=new Gf;S.matrixAutoUpdate=!1,S.visible=!1,e.joints[_.jointName]=S,e.add(S)}return e.joints[_.jointName]}}])}(),Hf=function(){function FogExp2(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:25e-5;_classCallCheck3(this,FogExp2),this.isFogExp2=!0,this.name="",this.color=new jd(e),this.density=_}return _createClass3(FogExp2,[{key:"clone",value:function(){return new FogExp2(this.color,this.density)}},{key:"toJSON",value:function(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}])}(),Wf=function(){function Fog(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;_classCallCheck3(this,Fog),this.isFog=!0,this.name="",this.color=new jd(e),this.near=_,this.far=S}return _createClass3(Fog,[{key:"clone",value:function(){return new Fog(this.color,this.near,this.far)}},{key:"toJSON",value:function(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}])}();D("c3",Wf);var qf=function(e){function Scene(){var e;return _classCallCheck3(this,Scene),(e=_callSuper(this,Scene)).isScene=!0,e.type="Scene",e.background=null,e.environment=null,e.fog=null,e.backgroundBlurriness=0,e.backgroundIntensity=1,e.backgroundRotation=new sd,e.environmentIntensity=1,e.environmentRotation=new sd,e.overrideMaterial=null,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:e})),e}return _inherits(Scene,e),_createClass3(Scene,[{key:"copy",value:function(e,_){return _superPropGet(Scene,"copy",this,3)([e,_]),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}},{key:"toJSON",value:function(e){var _=_superPropGet(Scene,"toJSON",this,3)([e]);return null!==this.fog&&(_.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(_.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(_.object.backgroundIntensity=this.backgroundIntensity),_.object.backgroundRotation=this.backgroundRotation.toArray(),1!==this.environmentIntensity&&(_.object.environmentIntensity=this.environmentIntensity),_.object.environmentRotation=this.environmentRotation.toArray(),_}}])}(kd);D("aq",qf);var Xf,Yf=function(){return _createClass3(function InterleavedBuffer(e,_){_classCallCheck3(this,InterleavedBuffer),this.isInterleavedBuffer=!0,this.array=e,this.stride=_,this.count=void 0!==e?e.length/_:0,this.usage=Vc,this.updateRanges=[],this.version=0,this.uuid=generateUUID()},[{key:"onUploadCallback",value:function(){}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"setUsage",value:function(e){return this.usage=e,this}},{key:"addUpdateRange",value:function(e,_){this.updateRanges.push({start:e,count:_})}},{key:"clearUpdateRanges",value:function(){this.updateRanges.length=0}},{key:"copy",value:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}},{key:"copyAt",value:function(e,_,S){e*=this.stride,S*=_.stride;for(var k=0,E=this.stride;k<E;k++)this.array[e+k]=_.array[S+k];return this}},{key:"set",value:function(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,_),this}},{key:"clone",value:function(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=generateUUID()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);var _=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),S=new this.constructor(_,this.stride);return S.setUsage(this.usage),S}},{key:"onUpload",value:function(e){return this.onUploadCallback=e,this}},{key:"toJSON",value:function(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=generateUUID()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}])}(),Kf=new th,Jf=function(){function InterleavedBufferAttribute(e,_,S){var k=arguments.length>3&&void 0!==arguments[3]&&arguments[3];_classCallCheck3(this,InterleavedBufferAttribute),this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=_,this.offset=S,this.normalized=k}return _createClass3(InterleavedBufferAttribute,[{key:"count",get:function(){return this.data.count}},{key:"array",get:function(){return this.data.array}},{key:"needsUpdate",set:function(e){this.data.needsUpdate=e}},{key:"applyMatrix4",value:function(e){for(var _=0,S=this.data.count;_<S;_++)Kf.fromBufferAttribute(this,_),Kf.applyMatrix4(e),this.setXYZ(_,Kf.x,Kf.y,Kf.z);return this}},{key:"applyNormalMatrix",value:function(e){for(var _=0,S=this.count;_<S;_++)Kf.fromBufferAttribute(this,_),Kf.applyNormalMatrix(e),this.setXYZ(_,Kf.x,Kf.y,Kf.z);return this}},{key:"transformDirection",value:function(e){for(var _=0,S=this.count;_<S;_++)Kf.fromBufferAttribute(this,_),Kf.transformDirection(e),this.setXYZ(_,Kf.x,Kf.y,Kf.z);return this}},{key:"getComponent",value:function(e,_){var S=this.array[e*this.data.stride+this.offset+_];return this.normalized&&(S=denormalize(S,this.array)),S}},{key:"setComponent",value:function(e,_,S){return this.normalized&&(S=normalize$6(S,this.array)),this.data.array[e*this.data.stride+this.offset+_]=S,this}},{key:"setX",value:function(e,_){return this.normalized&&(_=normalize$6(_,this.array)),this.data.array[e*this.data.stride+this.offset]=_,this}},{key:"setY",value:function(e,_){return this.normalized&&(_=normalize$6(_,this.array)),this.data.array[e*this.data.stride+this.offset+1]=_,this}},{key:"setZ",value:function(e,_){return this.normalized&&(_=normalize$6(_,this.array)),this.data.array[e*this.data.stride+this.offset+2]=_,this}},{key:"setW",value:function(e,_){return this.normalized&&(_=normalize$6(_,this.array)),this.data.array[e*this.data.stride+this.offset+3]=_,this}},{key:"getX",value:function(e){var _=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(_=denormalize(_,this.array)),_}},{key:"getY",value:function(e){var _=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(_=denormalize(_,this.array)),_}},{key:"getZ",value:function(e){var _=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(_=denormalize(_,this.array)),_}},{key:"getW",value:function(e){var _=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(_=denormalize(_,this.array)),_}},{key:"setXY",value:function(e,_,S){return e=e*this.data.stride+this.offset,this.normalized&&(_=normalize$6(_,this.array),S=normalize$6(S,this.array)),this.data.array[e+0]=_,this.data.array[e+1]=S,this}},{key:"setXYZ",value:function(e,_,S,k){return e=e*this.data.stride+this.offset,this.normalized&&(_=normalize$6(_,this.array),S=normalize$6(S,this.array),k=normalize$6(k,this.array)),this.data.array[e+0]=_,this.data.array[e+1]=S,this.data.array[e+2]=k,this}},{key:"setXYZW",value:function(e,_,S,k,E){return e=e*this.data.stride+this.offset,this.normalized&&(_=normalize$6(_,this.array),S=normalize$6(S,this.array),k=normalize$6(k,this.array),E=normalize$6(E,this.array)),this.data.array[e+0]=_,this.data.array[e+1]=S,this.data.array[e+2]=k,this.data.array[e+3]=E,this}},{key:"clone",value:function(e){if(void 0===e){for(var _=[],S=0;S<this.count;S++)for(var k=S*this.data.stride+this.offset,E=0;E<this.itemSize;E++)_.push(this.data.array[k+E]);return new Zd(new this.array.constructor(_),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new InterleavedBufferAttribute(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}},{key:"toJSON",value:function(e){if(void 0===e){for(var _=[],S=0;S<this.count;S++)for(var k=S*this.data.stride+this.offset,E=0;E<this.itemSize;E++)_.push(this.data.array[k+E]);return{itemSize:this.itemSize,type:this.array.constructor.name,array:_,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}])}(),Qf=function(e){function SpriteMaterial(e){var _;return _classCallCheck3(this,SpriteMaterial),(_=_callSuper(this,SpriteMaterial)).isSpriteMaterial=!0,_.type="SpriteMaterial",_.color=new jd(16777215),_.map=null,_.alphaMap=null,_.rotation=0,_.sizeAttenuation=!0,_.transparent=!0,_.fog=!0,_.setValues(e),_}return _inherits(SpriteMaterial,e),_createClass3(SpriteMaterial,[{key:"copy",value:function(e){return _superPropGet(SpriteMaterial,"copy",this,3)([e]),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}])}(Wd),Zf=new th,$f=new th,ep=new th,tp=new $c,rp=new $c,np=new Qh,ip=new th,ap=new th,op=new th,sp=new $c,up=new $c,lp=new $c,cp=function(e){function Sprite(){var e,_=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Qf;if(_classCallCheck3(this,Sprite),(e=_callSuper(this,Sprite)).isSprite=!0,e.type="Sprite",void 0===Xf){Xf=new gf;var S=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),k=new Yf(S,5);Xf.setIndex([0,1,2,0,2,3]),Xf.setAttribute("position",new Jf(k,3,0,!1)),Xf.setAttribute("uv",new Jf(k,2,3,!1))}return e.geometry=Xf,e.material=_,e.center=new $c(.5,.5),e.count=1,e}return _inherits(Sprite,e),_createClass3(Sprite,[{key:"raycast",value:function(e,_){e.camera,$f.setFromMatrixScale(this.matrixWorld),np.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),ep.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&$f.multiplyScalar(-ep.z);var S,k,E=this.material.rotation;0!==E&&(k=Math.cos(E),S=Math.sin(E));var T=this.center;transformVertex(ip.set(-.5,-.5,0),ep,T,$f,S,k),transformVertex(ap.set(.5,-.5,0),ep,T,$f,S,k),transformVertex(op.set(.5,.5,0),ep,T,$f,S,k),sp.set(0,0),up.set(1,0),lp.set(1,1);var M=e.ray.intersectTriangle(ip,ap,op,!1,Zf);if(null!==M||(transformVertex(ap.set(-.5,.5,0),ep,T,$f,S,k),up.set(0,1),null!==(M=e.ray.intersectTriangle(ip,op,ap,!1,Zf)))){var I=e.ray.origin.distanceTo(Zf);I<e.near||I>e.far||_.push({distance:I,point:Zf.clone(),uv:Bd.getInterpolation(Zf,ip,ap,op,sp,up,lp,new $c),face:null,object:this})}}},{key:"copy",value:function(e,_){return _superPropGet(Sprite,"copy",this,3)([e,_]),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}}])}(kd);function transformVertex(e,_,S,k,E,T){tp.subVectors(e,S).addScalar(.5).multiply(k),void 0!==E?(rp.x=T*tp.x-E*tp.y,rp.y=E*tp.x+T*tp.y):rp.copy(tp),e.copy(_),e.x+=rp.x,e.y+=rp.y,e.applyMatrix4(np)}var hp=new th,dp=new th,fp=function(e){function LOD(){var e;return _classCallCheck3(this,LOD),(e=_callSuper(this,LOD)).isLOD=!0,e._currentLevel=0,e.type="LOD",Object.defineProperties(e,{levels:{enumerable:!0,value:[]}}),e.autoUpdate=!0,e}return _inherits(LOD,e),_createClass3(LOD,[{key:"copy",value:function(e){_superPropGet(LOD,"copy",this,3)([e,!1]);for(var _=e.levels,S=0,k=_.length;S<k;S++){var E=_[S];this.addLevel(E.object.clone(),E.distance,E.hysteresis)}return this.autoUpdate=e.autoUpdate,this}},{key:"addLevel",value:function(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;_=Math.abs(_);var k,E=this.levels;for(k=0;k<E.length&&!(_<E[k].distance);k++);return E.splice(k,0,{distance:_,hysteresis:S,object:e}),this.add(e),this}},{key:"removeLevel",value:function(e){for(var _=this.levels,S=0;S<_.length;S++)if(_[S].distance===e){var k=_.splice(S,1);return this.remove(k[0].object),!0}return!1}},{key:"getCurrentLevel",value:function(){return this._currentLevel}},{key:"getObjectForDistance",value:function(e){var _=this.levels;if(_.length>0){var S,k;for(S=1,k=_.length;S<k;S++){var E=_[S].distance;if(_[S].object.visible&&(E-=E*_[S].hysteresis),e<E)break}return _[S-1].object}return null}},{key:"raycast",value:function(e,_){if(this.levels.length>0){hp.setFromMatrixPosition(this.matrixWorld);var S=e.ray.origin.distanceTo(hp);this.getObjectForDistance(S).raycast(e,_)}}},{key:"update",value:function(e){var _=this.levels;if(_.length>1){hp.setFromMatrixPosition(e.matrixWorld),dp.setFromMatrixPosition(this.matrixWorld);var S,k,E=hp.distanceTo(dp)/e.zoom;for(_[0].object.visible=!0,S=1,k=_.length;S<k;S++){var T=_[S].distance;if(_[S].object.visible&&(T-=T*_[S].hysteresis),!(E>=T))break;_[S-1].object.visible=!1,_[S].object.visible=!0}for(this._currentLevel=S-1;S<k;S++)_[S].object.visible=!1}}},{key:"toJSON",value:function(e){var _=_superPropGet(LOD,"toJSON",this,3)([e]);!1===this.autoUpdate&&(_.object.autoUpdate=!1),_.object.levels=[];for(var S=this.levels,k=0,E=S.length;k<E;k++){var T=S[k];_.object.levels.push({object:T.object.uuid,distance:T.distance,hysteresis:T.hysteresis})}return _}}])}(kd),pp=new th,vp=new yh,gp=new yh,mp=new th,yp=new Qh,_p=new th,bp=new jh,Sp=new Qh,wp=new Jh,xp=function(e){function SkinnedMesh(e,_){var S;return _classCallCheck3(this,SkinnedMesh),(S=_callSuper(this,SkinnedMesh,[e,_])).isSkinnedMesh=!0,S.type="SkinnedMesh",S.bindMode=ll,S.bindMatrix=new Qh,S.bindMatrixInverse=new Qh,S.boundingBox=null,S.boundingSphere=null,S}return _inherits(SkinnedMesh,e),_createClass3(SkinnedMesh,[{key:"computeBoundingBox",value:function(){var e=this.geometry;null===this.boundingBox&&(this.boundingBox=new Ch),this.boundingBox.makeEmpty();for(var _=e.getAttribute("position"),S=0;S<_.count;S++)this.getVertexPosition(S,_p),this.boundingBox.expandByPoint(_p)}},{key:"computeBoundingSphere",value:function(){var e=this.geometry;null===this.boundingSphere&&(this.boundingSphere=new jh),this.boundingSphere.makeEmpty();for(var _=e.getAttribute("position"),S=0;S<_.count;S++)this.getVertexPosition(S,_p),this.boundingSphere.expandByPoint(_p)}},{key:"copy",value:function(e,_){return _superPropGet(SkinnedMesh,"copy",this,3)([e,_]),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this}},{key:"raycast",value:function(e,_){var S=this.material,k=this.matrixWorld;void 0!==S&&(null===this.boundingSphere&&this.computeBoundingSphere(),bp.copy(this.boundingSphere),bp.applyMatrix4(k),!1!==e.ray.intersectsSphere(bp)&&(Sp.copy(k).invert(),wp.copy(e.ray).applyMatrix4(Sp),null!==this.boundingBox&&!1===wp.intersectsBox(this.boundingBox)||this._computeIntersections(e,_,wp)))}},{key:"getVertexPosition",value:function(e,_){return _superPropGet(SkinnedMesh,"getVertexPosition",this,3)([e,_]),this.applyBoneTransform(e,_),_}},{key:"bind",value:function(e,_){this.skeleton=e,void 0===_&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),_=this.matrixWorld),this.bindMatrix.copy(_),this.bindMatrixInverse.copy(_).invert()}},{key:"pose",value:function(){this.skeleton.pose()}},{key:"normalizeSkinWeights",value:function(){for(var e=new yh,_=this.geometry.attributes.skinWeight,S=0,k=_.count;S<k;S++){e.fromBufferAttribute(_,S);var E=1/e.manhattanLength();E!==1/0?e.multiplyScalar(E):e.set(1,0,0,0),_.setXYZW(S,e.x,e.y,e.z,e.w)}}},{key:"updateMatrixWorld",value:function(e){_superPropGet(SkinnedMesh,"updateMatrixWorld",this,3)([e]),this.bindMode===ll?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===cl&&this.bindMatrixInverse.copy(this.bindMatrix).invert()}},{key:"applyBoneTransform",value:function(e,_){var S=this.skeleton,k=this.geometry;vp.fromBufferAttribute(k.attributes.skinIndex,e),gp.fromBufferAttribute(k.attributes.skinWeight,e),pp.copy(_).applyMatrix4(this.bindMatrix),_.set(0,0,0);for(var E=0;E<4;E++){var T=gp.getComponent(E);if(0!==T){var M=vp.getComponent(E);yp.multiplyMatrices(S.bones[M].matrixWorld,S.boneInverses[M]),_.addScaledVector(mp.copy(pp).applyMatrix4(yp),T)}}return _.applyMatrix4(this.bindMatrixInverse)}}])}(Tf),kp=function(e){function Bone(){var e;return _classCallCheck3(this,Bone),(e=_callSuper(this,Bone)).isBone=!0,e.type="Bone",e}return _inherits(Bone,e),_createClass3(Bone)}(kd),Cp=function(e){function DataTexture(){var e,_=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,k=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,E=arguments.length>3?arguments[3]:void 0,T=arguments.length>4?arguments[4]:void 0,M=arguments.length>5?arguments[5]:void 0,I=arguments.length>6?arguments[6]:void 0,R=arguments.length>7?arguments[7]:void 0,O=arguments.length>8&&void 0!==arguments[8]?arguments[8]:bl,D=arguments.length>9&&void 0!==arguments[9]?arguments[9]:bl,L=arguments.length>10?arguments[10]:void 0,U=arguments.length>11?arguments[11]:void 0;return _classCallCheck3(this,DataTexture),(e=_callSuper(this,DataTexture,[null,M,I,R,O,D,E,T,L,U])).isDataTexture=!0,e.image={data:_,width:S,height:k},e.generateMipmaps=!1,e.flipY=!1,e.unpackAlignment=1,e}return _inherits(DataTexture,e),_createClass3(DataTexture)}(mh),Ap=new Qh,Ep=new Qh,Tp=function(){function Skeleton(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];_classCallCheck3(this,Skeleton),this.uuid=generateUUID(),this.bones=e.slice(0),this.boneInverses=_,this.boneMatrices=null,this.boneTexture=null,this.init()}return _createClass3(Skeleton,[{key:"init",value:function(){var e=this.bones,_=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===_.length)this.calculateInverses();else if(e.length!==_.length){this.boneInverses=[];for(var S=0,k=this.bones.length;S<k;S++)this.boneInverses.push(new Qh)}}},{key:"calculateInverses",value:function(){this.boneInverses.length=0;for(var e=0,_=this.bones.length;e<_;e++){var S=new Qh;this.bones[e]&&S.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(S)}}},{key:"pose",value:function(){for(var e=0,_=this.bones.length;e<_;e++){var S=this.bones[e];S&&S.matrixWorld.copy(this.boneInverses[e]).invert()}for(var k=0,E=this.bones.length;k<E;k++){var T=this.bones[k];T&&(T.parent&&T.parent.isBone?(T.matrix.copy(T.parent.matrixWorld).invert(),T.matrix.multiply(T.matrixWorld)):T.matrix.copy(T.matrixWorld),T.matrix.decompose(T.position,T.quaternion,T.scale))}}},{key:"update",value:function(){for(var e=this.bones,_=this.boneInverses,S=this.boneMatrices,k=this.boneTexture,E=0,T=e.length;E<T;E++){var M=e[E]?e[E].matrixWorld:Ep;Ap.multiplyMatrices(M,_[E]),Ap.toArray(S,16*E)}null!==k&&(k.needsUpdate=!0)}},{key:"clone",value:function(){return new Skeleton(this.bones,this.boneInverses)}},{key:"computeBoneTexture",value:function(){var e=Math.sqrt(4*this.bones.length);e=4*Math.ceil(e/4),e=Math.max(e,4);var _=new Float32Array(e*e*4);_.set(this.boneMatrices);var S=new Cp(_,e,e,jl,Ol);return S.needsUpdate=!0,this.boneMatrices=_,this.boneTexture=S,this}},{key:"getBoneByName",value:function(e){for(var _=0,S=this.bones.length;_<S;_++){var k=this.bones[_];if(k.name===e)return k}}},{key:"dispose",value:function(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}},{key:"fromJSON",value:function(e,_){this.uuid=e.uuid;for(var S=0,k=e.bones.length;S<k;S++){var E=_[e.bones[S]];void 0===E&&(E=new kp),this.bones.push(E),this.boneInverses.push((new Qh).fromArray(e.boneInverses[S]))}return this.init(),this}},{key:"toJSON",value:function(){var e={metadata:{version:4.7,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;for(var _=this.bones,S=this.boneInverses,k=0,E=_.length;k<E;k++){var T=_[k];e.bones.push(T.uuid);var M=S[k];e.boneInverses.push(M.toArray())}return e}}])}(),Mp=function(e){function InstancedBufferAttribute(e,_,S){var k,E=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return _classCallCheck3(this,InstancedBufferAttribute),(k=_callSuper(this,InstancedBufferAttribute,[e,_,S])).isInstancedBufferAttribute=!0,k.meshPerAttribute=E,k}return _inherits(InstancedBufferAttribute,e),_createClass3(InstancedBufferAttribute,[{key:"copy",value:function(e){return _superPropGet(InstancedBufferAttribute,"copy",this,3)([e]),this.meshPerAttribute=e.meshPerAttribute,this}},{key:"toJSON",value:function(){var e=_superPropGet(InstancedBufferAttribute,"toJSON",this,3)([]);return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}])}(Zd);D("cg",Mp);var Ip=new Qh,Rp=new Qh,Pp=[],Op=new Ch,Dp=new Qh,Lp=new Tf,Fp=new jh,Up=function(e){function InstancedMesh(e,_,S){var k;_classCallCheck3(this,InstancedMesh),(k=_callSuper(this,InstancedMesh,[e,_])).isInstancedMesh=!0,k.instanceMatrix=new Mp(new Float32Array(16*S),16),k.instanceColor=null,k.morphTexture=null,k.count=S,k.boundingBox=null,k.boundingSphere=null;for(var E=0;E<S;E++)k.setMatrixAt(E,Dp);return k}return _inherits(InstancedMesh,e),_createClass3(InstancedMesh,[{key:"computeBoundingBox",value:function(){var e=this.geometry,_=this.count;null===this.boundingBox&&(this.boundingBox=new Ch),null===e.boundingBox&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(var S=0;S<_;S++)this.getMatrixAt(S,Ip),Op.copy(e.boundingBox).applyMatrix4(Ip),this.boundingBox.union(Op)}},{key:"computeBoundingSphere",value:function(){var e=this.geometry,_=this.count;null===this.boundingSphere&&(this.boundingSphere=new jh),null===e.boundingSphere&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(var S=0;S<_;S++)this.getMatrixAt(S,Ip),Fp.copy(e.boundingSphere).applyMatrix4(Ip),this.boundingSphere.union(Fp)}},{key:"copy",value:function(e,_){return _superPropGet(InstancedMesh,"copy",this,3)([e,_]),this.instanceMatrix.copy(e.instanceMatrix),null!==e.morphTexture&&(this.morphTexture=e.morphTexture.clone()),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this}},{key:"getColorAt",value:function(e,_){_.fromArray(this.instanceColor.array,3*e)}},{key:"getMatrixAt",value:function(e,_){_.fromArray(this.instanceMatrix.array,16*e)}},{key:"getMorphAt",value:function(e,_){for(var S=_.morphTargetInfluences,k=this.morphTexture.source.data.data,E=e*(S.length+1)+1,T=0;T<S.length;T++)S[T]=k[E+T]}},{key:"raycast",value:function(e,_){var S=this.matrixWorld,k=this.count;if(Lp.geometry=this.geometry,Lp.material=this.material,void 0!==Lp.material&&(null===this.boundingSphere&&this.computeBoundingSphere(),Fp.copy(this.boundingSphere),Fp.applyMatrix4(S),!1!==e.ray.intersectsSphere(Fp)))for(var E=0;E<k;E++){this.getMatrixAt(E,Ip),Rp.multiplyMatrices(S,Ip),Lp.matrixWorld=Rp,Lp.raycast(e,Pp);for(var T=0,M=Pp.length;T<M;T++){var I=Pp[T];I.instanceId=E,I.object=this,_.push(I)}Pp.length=0}}},{key:"setColorAt",value:function(e,_){null===this.instanceColor&&(this.instanceColor=new Mp(new Float32Array(3*this.instanceMatrix.count).fill(1),3)),_.toArray(this.instanceColor.array,3*e)}},{key:"setMatrixAt",value:function(e,_){_.toArray(this.instanceMatrix.array,16*e)}},{key:"setMorphAt",value:function(e,_){var S=_.morphTargetInfluences,k=S.length+1;null===this.morphTexture&&(this.morphTexture=new Cp(new Float32Array(k*this.count),k,this.count,Wl,Ol));for(var E=this.morphTexture.source.data.data,T=0,M=0;M<S.length;M++)T+=S[M];var I=this.geometry.morphTargetsRelative?1:1-T,R=k*e;E[R]=I,E.set(S,R+1)}},{key:"updateMorphTargets",value:function(){}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"}),null!==this.morphTexture&&(this.morphTexture.dispose(),this.morphTexture=null)}}])}(Tf),Bp=new th,Np=new th,zp=new ih,Gp=function(){return _createClass3(function Plane(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new th(1,0,0),_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;_classCallCheck3(this,Plane),this.isPlane=!0,this.normal=e,this.constant=_},[{key:"set",value:function(e,_){return this.normal.copy(e),this.constant=_,this}},{key:"setComponents",value:function(e,_,S,k){return this.normal.set(e,_,S),this.constant=k,this}},{key:"setFromNormalAndCoplanarPoint",value:function(e,_){return this.normal.copy(e),this.constant=-_.dot(this.normal),this}},{key:"setFromCoplanarPoints",value:function(e,_,S){var k=Bp.subVectors(S,_).cross(Np.subVectors(e,_)).normalize();return this.setFromNormalAndCoplanarPoint(k,e),this}},{key:"copy",value:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this}},{key:"normalize",value:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}},{key:"negate",value:function(){return this.constant*=-1,this.normal.negate(),this}},{key:"distanceToPoint",value:function(e){return this.normal.dot(e)+this.constant}},{key:"distanceToSphere",value:function(e){return this.distanceToPoint(e.center)-e.radius}},{key:"projectPoint",value:function(e,_){return _.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}},{key:"intersectLine",value:function(e,_){var S=e.delta(Bp),k=this.normal.dot(S);if(0===k)return 0===this.distanceToPoint(e.start)?_.copy(e.start):null;var E=-(e.start.dot(this.normal)+this.constant)/k;return E<0||E>1?null:_.copy(e.start).addScaledVector(S,E)}},{key:"intersectsLine",value:function(e){var _=this.distanceToPoint(e.start),S=this.distanceToPoint(e.end);return _<0&&S>0||S<0&&_>0}},{key:"intersectsBox",value:function(e){return e.intersectsPlane(this)}},{key:"intersectsSphere",value:function(e){return e.intersectsPlane(this)}},{key:"coplanarPoint",value:function(e){return e.copy(this.normal).multiplyScalar(-this.constant)}},{key:"applyMatrix4",value:function(e,_){var S=_||zp.getNormalMatrix(e),k=this.coplanarPoint(Bp).applyMatrix4(e),E=this.normal.applyMatrix3(S).normalize();return this.constant=-k.dot(E),this}},{key:"translate",value:function(e){return this.constant-=e.dot(this.normal),this}},{key:"equals",value:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}])}(),jp=new jh,Vp=new $c(.5,.5),Hp=new th,Wp=function(){return _createClass3(function Frustum(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Gp,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Gp,S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Gp,k=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Gp,E=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new Gp,T=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new Gp;_classCallCheck3(this,Frustum),this.planes=[e,_,S,k,E,T]},[{key:"set",value:function(e,_,S,k,E,T){var M=this.planes;return M[0].copy(e),M[1].copy(_),M[2].copy(S),M[3].copy(k),M[4].copy(E),M[5].copy(T),this}},{key:"copy",value:function(e){for(var _=this.planes,S=0;S<6;S++)_[S].copy(e.planes[S]);return this}},{key:"setFromProjectionMatrix",value:function(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Wc,S=arguments.length>2&&void 0!==arguments[2]&&arguments[2],k=this.planes,E=e.elements,T=E[0],M=E[1],I=E[2],R=E[3],O=E[4],D=E[5],L=E[6],U=E[7],B=E[8],z=E[9],G=E[10],j=E[11],V=E[12],H=E[13],W=E[14],q=E[15];if(k[0].setComponents(R-T,U-O,j-B,q-V).normalize(),k[1].setComponents(R+T,U+O,j+B,q+V).normalize(),k[2].setComponents(R+M,U+D,j+z,q+H).normalize(),k[3].setComponents(R-M,U-D,j-z,q-H).normalize(),S)k[4].setComponents(I,L,G,W).normalize(),k[5].setComponents(R-I,U-L,j-G,q-W).normalize();else if(k[4].setComponents(R-I,U-L,j-G,q-W).normalize(),_===Wc)k[5].setComponents(R+I,U+L,j+G,q+W).normalize();else{if(_!==qc)throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+_);k[5].setComponents(I,L,G,W).normalize()}return this}},{key:"intersectsObject",value:function(e){if(void 0!==e.boundingSphere)null===e.boundingSphere&&e.computeBoundingSphere(),jp.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{var _=e.geometry;null===_.boundingSphere&&_.computeBoundingSphere(),jp.copy(_.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(jp)}},{key:"intersectsSprite",value:function(e){jp.center.set(0,0,0);var _=Vp.distanceTo(e.center);return jp.radius=.7071067811865476+_,jp.applyMatrix4(e.matrixWorld),this.intersectsSphere(jp)}},{key:"intersectsSphere",value:function(e){for(var _=this.planes,S=e.center,k=-e.radius,E=0;E<6;E++){if(_[E].distanceToPoint(S)<k)return!1}return!0}},{key:"intersectsBox",value:function(e){for(var _=this.planes,S=0;S<6;S++){var k=_[S];if(Hp.x=k.normal.x>0?e.max.x:e.min.x,Hp.y=k.normal.y>0?e.max.y:e.min.y,Hp.z=k.normal.z>0?e.max.z:e.min.z,k.distanceToPoint(Hp)<0)return!1}return!0}},{key:"containsPoint",value:function(e){for(var _=this.planes,S=0;S<6;S++)if(_[S].distanceToPoint(e)<0)return!1;return!0}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}])}(),qp=new Qh,Xp=new Wp,Yp=function(){function FrustumArray(){_classCallCheck3(this,FrustumArray),this.coordinateSystem=Wc}return _createClass3(FrustumArray,[{key:"intersectsObject",value:function(e,_){if(!_.isArrayCamera||0===_.cameras.length)return!1;for(var S=0;S<_.cameras.length;S++){var k=_.cameras[S];if(qp.multiplyMatrices(k.projectionMatrix,k.matrixWorldInverse),Xp.setFromProjectionMatrix(qp,k.coordinateSystem,k.reversedDepth),Xp.intersectsObject(e))return!0}return!1}},{key:"intersectsSprite",value:function(e,_){if(!_||!_.cameras||0===_.cameras.length)return!1;for(var S=0;S<_.cameras.length;S++){var k=_.cameras[S];if(qp.multiplyMatrices(k.projectionMatrix,k.matrixWorldInverse),Xp.setFromProjectionMatrix(qp,k.coordinateSystem,k.reversedDepth),Xp.intersectsSprite(e))return!0}return!1}},{key:"intersectsSphere",value:function(e,_){if(!_||!_.cameras||0===_.cameras.length)return!1;for(var S=0;S<_.cameras.length;S++){var k=_.cameras[S];if(qp.multiplyMatrices(k.projectionMatrix,k.matrixWorldInverse),Xp.setFromProjectionMatrix(qp,k.coordinateSystem,k.reversedDepth),Xp.intersectsSphere(e))return!0}return!1}},{key:"intersectsBox",value:function(e,_){if(!_||!_.cameras||0===_.cameras.length)return!1;for(var S=0;S<_.cameras.length;S++){var k=_.cameras[S];if(qp.multiplyMatrices(k.projectionMatrix,k.matrixWorldInverse),Xp.setFromProjectionMatrix(qp,k.coordinateSystem,k.reversedDepth),Xp.intersectsBox(e))return!0}return!1}},{key:"containsPoint",value:function(e,_){if(!_||!_.cameras||0===_.cameras.length)return!1;for(var S=0;S<_.cameras.length;S++){var k=_.cameras[S];if(qp.multiplyMatrices(k.projectionMatrix,k.matrixWorldInverse),Xp.setFromProjectionMatrix(qp,k.coordinateSystem,k.reversedDepth),Xp.containsPoint(e))return!0}return!1}},{key:"clone",value:function(){return new FrustumArray}}])}();function ascIdSort(e,_){return e-_}function sortOpaque(e,_){return e.z-_.z}function sortTransparent(e,_){return _.z-e.z}var Kp=function(){return _createClass3(function MultiDrawRenderList(){_classCallCheck3(this,MultiDrawRenderList),this.index=0,this.pool=[],this.list=[]},[{key:"push",value:function(e,_,S,k){var E=this.pool,T=this.list;this.index>=E.length&&E.push({start:-1,count:-1,z:-1,index:-1});var M=E[this.index];T.push(M),this.index++,M.start=e,M.count=_,M.z=S,M.index=k}},{key:"reset",value:function(){this.list.length=0,this.index=0}}])}(),Jp=new Qh,Qp=new jd(1,1,1),Zp=new Wp,$p=new Yp,ev=new Ch,tv=new jh,rv=new th,nv=new th,iv=new th,av=new Kp,ov=new Tf,sv=[];function copyAttributeData(e,_){var S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,k=_.itemSize;if(e.isInterleavedBufferAttribute||e.array.constructor!==_.array.constructor)for(var E=e.count,T=0;T<E;T++)for(var M=0;M<k;M++)_.setComponent(T+S,M,e.getComponent(T,M));else _.array.set(e.array,S*k);_.needsUpdate=!0}function copyArrayContents(e,_){if(e.constructor!==_.constructor)for(var S=Math.min(e.length,_.length),k=0;k<S;k++)_[k]=e[k];else{var E=Math.min(e.length,_.length);_.set(new e.constructor(e.buffer,0,E))}}var uv=function(e){function BatchedMesh(e,_){var S,k=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2*_,E=arguments.length>3?arguments[3]:void 0;return _classCallCheck3(this,BatchedMesh),(S=_callSuper(this,BatchedMesh,[new gf,E])).isBatchedMesh=!0,S.perObjectFrustumCulled=!0,S.sortObjects=!0,S.boundingBox=null,S.boundingSphere=null,S.customSort=null,S._instanceInfo=[],S._geometryInfo=[],S._availableInstanceIds=[],S._availableGeometryIds=[],S._nextIndexStart=0,S._nextVertexStart=0,S._geometryCount=0,S._visibilityChanged=!0,S._geometryInitialized=!1,S._maxInstanceCount=e,S._maxVertexCount=_,S._maxIndexCount=k,S._multiDrawCounts=new Int32Array(e),S._multiDrawStarts=new Int32Array(e),S._multiDrawCount=0,S._multiDrawInstances=null,S._matricesTexture=null,S._indirectTexture=null,S._colorsTexture=null,S._initMatricesTexture(),S._initIndirectTexture(),S}return _inherits(BatchedMesh,e),_createClass3(BatchedMesh,[{key:"maxInstanceCount",get:function(){return this._maxInstanceCount}},{key:"instanceCount",get:function(){return this._instanceInfo.length-this._availableInstanceIds.length}},{key:"unusedVertexCount",get:function(){return this._maxVertexCount-this._nextVertexStart}},{key:"unusedIndexCount",get:function(){return this._maxIndexCount-this._nextIndexStart}},{key:"_initMatricesTexture",value:function(){var e=Math.sqrt(4*this._maxInstanceCount);e=4*Math.ceil(e/4),e=Math.max(e,4);var _=new Float32Array(e*e*4),S=new Cp(_,e,e,jl,Ol);this._matricesTexture=S}},{key:"_initIndirectTexture",value:function(){var e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);var _=new Uint32Array(e*e),S=new Cp(_,e,e,ql,Pl);this._indirectTexture=S}},{key:"_initColorsTexture",value:function(){var e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);var _=new Float32Array(e*e*4).fill(1),S=new Cp(_,e,e,jl,Ol);S.colorSpace=hh.workingColorSpace,this._colorsTexture=S}},{key:"_initializeGeometry",value:function(e){var _=this.geometry,S=this._maxVertexCount,k=this._maxIndexCount;if(!1===this._geometryInitialized){for(var E in e.attributes){var T=e.getAttribute(E),M=T.array,I=T.itemSize,R=T.normalized,O=new M.constructor(S*I),D=new Zd(O,I,R);_.setAttribute(E,D)}if(null!==e.getIndex()){var L=S>65535?new Uint32Array(k):new Uint16Array(k);_.setIndex(new Zd(L,1))}this._geometryInitialized=!0}}},{key:"_validateGeometry",value:function(e){var _=this.geometry;if(Boolean(e.getIndex())!==Boolean(_.getIndex()))throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(var S in _.attributes){if(!e.hasAttribute(S))throw new Error('THREE.BatchedMesh: Added geometry missing "'.concat(S,'". All geometries must have consistent attributes.'));var k=e.getAttribute(S),E=_.getAttribute(S);if(k.itemSize!==E.itemSize||k.normalized!==E.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}},{key:"validateInstanceId",value:function(e){var _=this._instanceInfo;if(e<0||e>=_.length||!1===_[e].active)throw new Error("THREE.BatchedMesh: Invalid instanceId ".concat(e,". Instance is either out of range or has been deleted."))}},{key:"validateGeometryId",value:function(e){var _=this._geometryInfo;if(e<0||e>=_.length||!1===_[e].active)throw new Error("THREE.BatchedMesh: Invalid geometryId ".concat(e,". Geometry is either out of range or has been deleted."))}},{key:"setCustomSort",value:function(e){return this.customSort=e,this}},{key:"computeBoundingBox",value:function(){null===this.boundingBox&&(this.boundingBox=new Ch);var e=this.boundingBox,_=this._instanceInfo;e.makeEmpty();for(var S=0,k=_.length;S<k;S++)if(!1!==_[S].active){var E=_[S].geometryIndex;this.getMatrixAt(S,Jp),this.getBoundingBoxAt(E,ev).applyMatrix4(Jp),e.union(ev)}}},{key:"computeBoundingSphere",value:function(){null===this.boundingSphere&&(this.boundingSphere=new jh);var e=this.boundingSphere,_=this._instanceInfo;e.makeEmpty();for(var S=0,k=_.length;S<k;S++)if(!1!==_[S].active){var E=_[S].geometryIndex;this.getMatrixAt(S,Jp),this.getBoundingSphereAt(E,tv).applyMatrix4(Jp),e.union(tv)}}},{key:"addInstance",value:function(e){if(this._instanceInfo.length>=this.maxInstanceCount&&0===this._availableInstanceIds.length)throw new Error("THREE.BatchedMesh: Maximum item count reached.");var _={visible:!0,active:!0,geometryIndex:e},S=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(ascIdSort),S=this._availableInstanceIds.shift(),this._instanceInfo[S]=_):(S=this._instanceInfo.length,this._instanceInfo.push(_));var k=this._matricesTexture;Jp.identity().toArray(k.image.data,16*S),k.needsUpdate=!0;var E=this._colorsTexture;return E&&(Qp.toArray(E.image.data,4*S),E.needsUpdate=!0),this._visibilityChanged=!0,S}},{key:"addGeometry",value:function(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;this._initializeGeometry(e),this._validateGeometry(e);var k={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},E=this._geometryInfo;k.vertexStart=this._nextVertexStart,k.reservedVertexCount=-1===_?e.getAttribute("position").count:_;var T,M=e.getIndex();if(null!==M&&(k.indexStart=this._nextIndexStart,k.reservedIndexCount=-1===S?M.count:S),-1!==k.indexStart&&k.indexStart+k.reservedIndexCount>this._maxIndexCount||k.vertexStart+k.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(ascIdSort),E[T=this._availableGeometryIds.shift()]=k):(T=this._geometryCount,this._geometryCount++,E.push(k)),this.setGeometryAt(T,e),this._nextIndexStart=k.indexStart+k.reservedIndexCount,this._nextVertexStart=k.vertexStart+k.reservedVertexCount,T}},{key:"setGeometryAt",value:function(e,_){if(e>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(_);var S=this.geometry,k=null!==S.getIndex(),E=S.getIndex(),T=_.getIndex(),M=this._geometryInfo[e];if(k&&T.count>M.reservedIndexCount||_.attributes.position.count>M.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");var I=M.vertexStart,R=M.reservedVertexCount;for(var O in M.vertexCount=_.getAttribute("position").count,S.attributes){var D=_.getAttribute(O),L=S.getAttribute(O);copyAttributeData(D,L,I);for(var U=D.itemSize,B=D.count,z=R;B<z;B++)for(var G=I+B,j=0;j<U;j++)L.setComponent(G,j,0);L.needsUpdate=!0,L.addUpdateRange(I*U,R*U)}if(k){var V=M.indexStart,H=M.reservedIndexCount;M.indexCount=_.getIndex().count;for(var W=0;W<T.count;W++)E.setX(V+W,I+T.getX(W));for(var q=T.count,X=H;q<X;q++)E.setX(V+q,I);E.needsUpdate=!0,E.addUpdateRange(V,M.reservedIndexCount)}return M.start=k?M.indexStart:M.vertexStart,M.count=k?M.indexCount:M.vertexCount,M.boundingBox=null,null!==_.boundingBox&&(M.boundingBox=_.boundingBox.clone()),M.boundingSphere=null,null!==_.boundingSphere&&(M.boundingSphere=_.boundingSphere.clone()),this._visibilityChanged=!0,e}},{key:"deleteGeometry",value:function(e){var _=this._geometryInfo;if(e>=_.length||!1===_[e].active)return this;for(var S=this._instanceInfo,k=0,E=S.length;k<E;k++)S[k].active&&S[k].geometryIndex===e&&this.deleteInstance(k);return _[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}},{key:"deleteInstance",value:function(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}},{key:"optimize",value:function(){for(var e=0,_=0,S=this._geometryInfo,k=S.map(function(e,_){return _}).sort(function(e,_){return S[e].vertexStart-S[_].vertexStart}),E=this.geometry,T=0,M=S.length;T<M;T++){var I=k[T],R=S[I];if(!1!==R.active){if(null!==E.index){if(R.indexStart!==_){for(var O=R.indexStart,D=R.vertexStart,L=R.reservedIndexCount,U=E.index,B=U.array,z=e-D,G=O;G<O+L;G++)B[G]=B[G]+z;U.array.copyWithin(_,O,O+L),U.addUpdateRange(_,L),R.indexStart=_}_+=R.reservedIndexCount}if(R.vertexStart!==e){var j=R.vertexStart,V=R.reservedVertexCount,H=E.attributes;for(var W in H){var q=H[W],X=q.array,Y=q.itemSize;X.copyWithin(e*Y,j*Y,(j+V)*Y),q.addUpdateRange(e*Y,V*Y)}R.vertexStart=e}e+=R.reservedVertexCount,R.start=E.index?R.indexStart:R.vertexStart,this._nextIndexStart=E.index?R.indexStart+R.reservedIndexCount:0,this._nextVertexStart=R.vertexStart+R.reservedVertexCount}}return this}},{key:"getBoundingBoxAt",value:function(e,_){if(e>=this._geometryCount)return null;var S=this.geometry,k=this._geometryInfo[e];if(null===k.boundingBox){for(var E=new Ch,T=S.index,M=S.attributes.position,I=k.start,R=k.start+k.count;I<R;I++){var O=I;T&&(O=T.getX(O)),E.expandByPoint(rv.fromBufferAttribute(M,O))}k.boundingBox=E}return _.copy(k.boundingBox),_}},{key:"getBoundingSphereAt",value:function(e,_){if(e>=this._geometryCount)return null;var S=this.geometry,k=this._geometryInfo[e];if(null===k.boundingSphere){var E=new jh;this.getBoundingBoxAt(e,ev),ev.getCenter(E.center);for(var T=S.index,M=S.attributes.position,I=0,R=k.start,O=k.start+k.count;R<O;R++){var D=R;T&&(D=T.getX(D)),rv.fromBufferAttribute(M,D),I=Math.max(I,E.center.distanceToSquared(rv))}E.radius=Math.sqrt(I),k.boundingSphere=E}return _.copy(k.boundingSphere),_}},{key:"setMatrixAt",value:function(e,_){this.validateInstanceId(e);var S=this._matricesTexture,k=this._matricesTexture.image.data;return _.toArray(k,16*e),S.needsUpdate=!0,this}},{key:"getMatrixAt",value:function(e,_){return this.validateInstanceId(e),_.fromArray(this._matricesTexture.image.data,16*e)}},{key:"setColorAt",value:function(e,_){return this.validateInstanceId(e),null===this._colorsTexture&&this._initColorsTexture(),_.toArray(this._colorsTexture.image.data,4*e),this._colorsTexture.needsUpdate=!0,this}},{key:"getColorAt",value:function(e,_){return this.validateInstanceId(e),_.fromArray(this._colorsTexture.image.data,4*e)}},{key:"setVisibleAt",value:function(e,_){return this.validateInstanceId(e),this._instanceInfo[e].visible===_||(this._instanceInfo[e].visible=_,this._visibilityChanged=!0),this}},{key:"getVisibleAt",value:function(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}},{key:"setGeometryIdAt",value:function(e,_){return this.validateInstanceId(e),this.validateGeometryId(_),this._instanceInfo[e].geometryIndex=_,this}},{key:"getGeometryIdAt",value:function(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}},{key:"getGeometryRangeAt",value:function(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.validateGeometryId(e);var S=this._geometryInfo[e];return _.vertexStart=S.vertexStart,_.vertexCount=S.vertexCount,_.reservedVertexCount=S.reservedVertexCount,_.indexStart=S.indexStart,_.indexCount=S.indexCount,_.reservedIndexCount=S.reservedIndexCount,_.start=S.start,_.count=S.count,_}},{key:"setInstanceCount",value:function(e){var _=this._availableInstanceIds,S=this._instanceInfo;for(_.sort(ascIdSort);_[_.length-1]===S.length-1;)S.pop(),_.pop();if(e<S.length)throw new Error("BatchedMesh: Instance ids outside the range ".concat(e," are being used. Cannot shrink instance count."));var k=new Int32Array(e),E=new Int32Array(e);copyArrayContents(this._multiDrawCounts,k),copyArrayContents(this._multiDrawStarts,E),this._multiDrawCounts=k,this._multiDrawStarts=E,this._maxInstanceCount=e;var T=this._indirectTexture,M=this._matricesTexture,I=this._colorsTexture;T.dispose(),this._initIndirectTexture(),copyArrayContents(T.image.data,this._indirectTexture.image.data),M.dispose(),this._initMatricesTexture(),copyArrayContents(M.image.data,this._matricesTexture.image.data),I&&(I.dispose(),this._initColorsTexture(),copyArrayContents(I.image.data,this._colorsTexture.image.data))}},{key:"setGeometrySize",value:function(e,_){var S=_toConsumableArray3(this._geometryInfo).filter(function(e){return e.active});if(Math.max.apply(Math,_toConsumableArray3(S.map(function(e){return e.vertexStart+e.reservedVertexCount})))>e)throw new Error("BatchedMesh: Geometry vertex values are being used outside the range ".concat(_,". Cannot shrink further."));if(this.geometry.index&&Math.max.apply(Math,_toConsumableArray3(S.map(function(e){return e.indexStart+e.reservedIndexCount})))>_)throw new Error("BatchedMesh: Geometry index values are being used outside the range ".concat(_,". Cannot shrink further."));var k=this.geometry;k.dispose(),this._maxVertexCount=e,this._maxIndexCount=_,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new gf,this._initializeGeometry(k));var E=this.geometry;for(var T in k.index&&copyArrayContents(k.index.array,E.index.array),k.attributes)copyArrayContents(k.attributes[T].array,E.attributes[T].array)}},{key:"raycast",value:function(e,_){var S=this._instanceInfo,k=this._geometryInfo,E=this.matrixWorld,T=this.geometry;ov.material=this.material,ov.geometry.index=T.index,ov.geometry.attributes=T.attributes,null===ov.geometry.boundingBox&&(ov.geometry.boundingBox=new Ch),null===ov.geometry.boundingSphere&&(ov.geometry.boundingSphere=new jh);for(var M=0,I=S.length;M<I;M++)if(S[M].visible&&S[M].active){var R=S[M].geometryIndex,O=k[R];ov.geometry.setDrawRange(O.start,O.count),this.getMatrixAt(M,ov.matrixWorld).premultiply(E),this.getBoundingBoxAt(R,ov.geometry.boundingBox),this.getBoundingSphereAt(R,ov.geometry.boundingSphere),ov.raycast(e,sv);for(var D=0,L=sv.length;D<L;D++){var U=sv[D];U.object=this,U.batchId=M,_.push(U)}sv.length=0}ov.material=null,ov.geometry.index=null,ov.geometry.attributes={},ov.geometry.setDrawRange(0,1/0)}},{key:"copy",value:function(e){return _superPropGet(BatchedMesh,"copy",this,3)([e]),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=null!==e.boundingBox?e.boundingBox.clone():null,this.boundingSphere=null!==e.boundingSphere?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(function(e){return _objectSpread2(_objectSpread2({},e),{},{boundingBox:null!==e.boundingBox?e.boundingBox.clone():null,boundingSphere:null!==e.boundingSphere?e.boundingSphere.clone():null})}),this._instanceInfo=e._instanceInfo.map(function(e){return _objectSpread2({},e)}),this._availableInstanceIds=e._availableInstanceIds.slice(),this._availableGeometryIds=e._availableGeometryIds.slice(),this._nextIndexStart=e._nextIndexStart,this._nextVertexStart=e._nextVertexStart,this._geometryCount=e._geometryCount,this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._indirectTexture=e._indirectTexture.clone(),this._indirectTexture.image.data=this._indirectTexture.image.data.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),null!==this._colorsTexture&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}},{key:"dispose",value:function(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,null!==this._colorsTexture&&(this._colorsTexture.dispose(),this._colorsTexture=null)}},{key:"onBeforeRender",value:function(e,_,S,k,E){if(this._visibilityChanged||this.perObjectFrustumCulled||this.sortObjects){var T=k.getIndex(),M=null===T?1:T.array.BYTES_PER_ELEMENT,I=this._instanceInfo,R=this._multiDrawStarts,O=this._multiDrawCounts,D=this._geometryInfo,L=this.perObjectFrustumCulled,U=this._indirectTexture,B=U.image.data,z=S.isArrayCamera?$p:Zp;L&&!S.isArrayCamera&&(Jp.multiplyMatrices(S.projectionMatrix,S.matrixWorldInverse).multiply(this.matrixWorld),Zp.setFromProjectionMatrix(Jp,S.coordinateSystem,S.reversedDepth));var G=0;if(this.sortObjects){Jp.copy(this.matrixWorld).invert(),rv.setFromMatrixPosition(S.matrixWorld).applyMatrix4(Jp),nv.set(0,0,-1).transformDirection(S.matrixWorld).transformDirection(Jp);for(var j=0,V=I.length;j<V;j++)if(I[j].visible&&I[j].active){var H=I[j].geometryIndex;this.getMatrixAt(j,Jp),this.getBoundingSphereAt(H,tv).applyMatrix4(Jp);var W=!1;if(L&&(W=!z.intersectsSphere(tv,S)),!W){var q=D[H],X=iv.subVectors(tv.center,rv).dot(nv);av.push(q.start,q.count,X,j)}}var Y=av.list,K=this.customSort;null===K?Y.sort(E.transparent?sortTransparent:sortOpaque):K.call(this,Y,S);for(var J=0,Q=Y.length;J<Q;J++){var Z=Y[J];R[G]=Z.start*M,O[G]=Z.count,B[G]=Z.index,G++}av.reset()}else for(var $=0,ee=I.length;$<ee;$++)if(I[$].visible&&I[$].active){var te=I[$].geometryIndex,re=!1;if(L&&(this.getMatrixAt($,Jp),this.getBoundingSphereAt(te,tv).applyMatrix4(Jp),re=!z.intersectsSphere(tv,S)),!re){var ne=D[te];R[G]=ne.start*M,O[G]=ne.count,B[G]=$,G++}}U.needsUpdate=!0,this._multiDrawCount=G,this._visibilityChanged=!1}}},{key:"onBeforeShadow",value:function(e,_,S,k,E,T){this.onBeforeRender(e,null,k,E,T)}}])}(Tf),lv=function(e){function LineBasicMaterial(e){var _;return _classCallCheck3(this,LineBasicMaterial),(_=_callSuper(this,LineBasicMaterial)).isLineBasicMaterial=!0,_.type="LineBasicMaterial",_.color=new jd(16777215),_.map=null,_.linewidth=1,_.linecap="round",_.linejoin="round",_.fog=!0,_.setValues(e),_}return _inherits(LineBasicMaterial,e),_createClass3(LineBasicMaterial,[{key:"copy",value:function(e){return _superPropGet(LineBasicMaterial,"copy",this,3)([e]),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}])}(Wd),cv=new th,hv=new th,dv=new Qh,fv=new Jh,pv=new jh,vv=new th,gv=new th,mv=function(e){function Line(){var e,_=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new gf,S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new lv;return _classCallCheck3(this,Line),(e=_callSuper(this,Line)).isLine=!0,e.type="Line",e.geometry=_,e.material=S,e.morphTargetDictionary=void 0,e.morphTargetInfluences=void 0,e.updateMorphTargets(),e}return _inherits(Line,e),_createClass3(Line,[{key:"copy",value:function(e,_){return _superPropGet(Line,"copy",this,3)([e,_]),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}},{key:"computeLineDistances",value:function(){var e=this.geometry;if(null===e.index){for(var _=e.attributes.position,S=[0],k=1,E=_.count;k<E;k++)cv.fromBufferAttribute(_,k-1),hv.fromBufferAttribute(_,k),S[k]=S[k-1],S[k]+=cv.distanceTo(hv);e.setAttribute("lineDistance",new uf(S,1))}return this}},{key:"raycast",value:function(e,_){var S=this.geometry,k=this.matrixWorld,E=e.params.Line.threshold,T=S.drawRange;if(null===S.boundingSphere&&S.computeBoundingSphere(),pv.copy(S.boundingSphere),pv.applyMatrix4(k),pv.radius+=E,!1!==e.ray.intersectsSphere(pv)){dv.copy(k).invert(),fv.copy(e.ray).applyMatrix4(dv);var M=E/((this.scale.x+this.scale.y+this.scale.z)/3),I=M*M,R=this.isLineSegments?2:1,O=S.index,D=S.attributes.position;if(null!==O){for(var L=Math.max(0,T.start),U=Math.min(O.count,T.start+T.count),B=L,z=U-1;B<z;B+=R){var G=O.getX(B),j=O.getX(B+1),V=checkIntersection(this,e,fv,I,G,j,B);V&&_.push(V)}if(this.isLineLoop){var H=O.getX(U-1),W=O.getX(L),q=checkIntersection(this,e,fv,I,H,W,U-1);q&&_.push(q)}}else{for(var X=Math.max(0,T.start),Y=Math.min(D.count,T.start+T.count),K=X,J=Y-1;K<J;K+=R){var Q=checkIntersection(this,e,fv,I,K,K+1,K);Q&&_.push(Q)}if(this.isLineLoop){var Z=checkIntersection(this,e,fv,I,Y-1,X,Y-1);Z&&_.push(Z)}}}}},{key:"updateMorphTargets",value:function(){var e=this.geometry.morphAttributes,_=Object.keys(e);if(_.length>0){var S=e[_[0]];if(void 0!==S){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var k=0,E=S.length;k<E;k++){var T=S[k].name||String(k);this.morphTargetInfluences.push(0),this.morphTargetDictionary[T]=k}}}}}])}(kd);function checkIntersection(e,_,S,k,E,T,M){var I=e.geometry.attributes.position;if(cv.fromBufferAttribute(I,E),hv.fromBufferAttribute(I,T),!(S.distanceSqToSegment(cv,hv,vv,gv)>k)){vv.applyMatrix4(e.matrixWorld);var R=_.ray.origin.distanceTo(vv);if(!(R<_.near||R>_.far))return{distance:R,point:gv.clone().applyMatrix4(e.matrixWorld),index:M,face:null,faceIndex:null,barycoord:null,object:e}}}var yv=new th,_v=new th,bv=function(e){function LineSegments(e,_){var S;return _classCallCheck3(this,LineSegments),(S=_callSuper(this,LineSegments,[e,_])).isLineSegments=!0,S.type="LineSegments",S}return _inherits(LineSegments,e),_createClass3(LineSegments,[{key:"computeLineDistances",value:function(){var e=this.geometry;if(null===e.index){for(var _=e.attributes.position,S=[],k=0,E=_.count;k<E;k+=2)yv.fromBufferAttribute(_,k),_v.fromBufferAttribute(_,k+1),S[k]=0===k?0:S[k-1],S[k+1]=S[k]+yv.distanceTo(_v);e.setAttribute("lineDistance",new uf(S,1))}return this}}])}(mv),Sv=function(e){function LineLoop(e,_){var S;return _classCallCheck3(this,LineLoop),(S=_callSuper(this,LineLoop,[e,_])).isLineLoop=!0,S.type="LineLoop",S}return _inherits(LineLoop,e),_createClass3(LineLoop)}(mv),wv=function(e){function PointsMaterial(e){var _;return _classCallCheck3(this,PointsMaterial),(_=_callSuper(this,PointsMaterial)).isPointsMaterial=!0,_.type="PointsMaterial",_.color=new jd(16777215),_.map=null,_.alphaMap=null,_.size=1,_.sizeAttenuation=!0,_.fog=!0,_.setValues(e),_}return _inherits(PointsMaterial,e),_createClass3(PointsMaterial,[{key:"copy",value:function(e){return _superPropGet(PointsMaterial,"copy",this,3)([e]),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}])}(Wd);D("bj",wv);var xv=new Qh,kv=new Jh,Cv=new jh,Av=new th,Ev=function(e){function Points(){var e,_=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new gf,S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new wv;return _classCallCheck3(this,Points),(e=_callSuper(this,Points)).isPoints=!0,e.type="Points",e.geometry=_,e.material=S,e.morphTargetDictionary=void 0,e.morphTargetInfluences=void 0,e.updateMorphTargets(),e}return _inherits(Points,e),_createClass3(Points,[{key:"copy",value:function(e,_){return _superPropGet(Points,"copy",this,3)([e,_]),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}},{key:"raycast",value:function(e,_){var S=this.geometry,k=this.matrixWorld,E=e.params.Points.threshold,T=S.drawRange;if(null===S.boundingSphere&&S.computeBoundingSphere(),Cv.copy(S.boundingSphere),Cv.applyMatrix4(k),Cv.radius+=E,!1!==e.ray.intersectsSphere(Cv)){xv.copy(k).invert(),kv.copy(e.ray).applyMatrix4(xv);var M=E/((this.scale.x+this.scale.y+this.scale.z)/3),I=M*M,R=S.index,O=S.attributes.position;if(null!==R)for(var D=Math.max(0,T.start),L=Math.min(R.count,T.start+T.count);D<L;D++){var U=R.getX(D);Av.fromBufferAttribute(O,U),testPoint(Av,U,I,k,e,_,this)}else for(var B=Math.max(0,T.start),z=Math.min(O.count,T.start+T.count);B<z;B++)Av.fromBufferAttribute(O,B),testPoint(Av,B,I,k,e,_,this)}}},{key:"updateMorphTargets",value:function(){var e=this.geometry.morphAttributes,_=Object.keys(e);if(_.length>0){var S=e[_[0]];if(void 0!==S){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var k=0,E=S.length;k<E;k++){var T=S[k].name||String(k);this.morphTargetInfluences.push(0),this.morphTargetDictionary[T]=k}}}}}])}(kd);function testPoint(e,_,S,k,E,T,M){var I=kv.distanceSqToPoint(e);if(I<S){var R=new th;kv.closestPointToPoint(e,R),R.applyMatrix4(k);var O=E.ray.origin.distanceTo(R);if(O<E.near||O>E.far)return;T.push({distance:O,distanceToRay:Math.sqrt(I),point:R,index:_,face:null,faceIndex:null,barycoord:null,object:M})}}var Tv=function(e){function VideoTexture(e,_,S,k){var E,T=arguments.length>4&&void 0!==arguments[4]?arguments[4]:xl,M=arguments.length>5&&void 0!==arguments[5]?arguments[5]:xl,I=arguments.length>6?arguments[6]:void 0,R=arguments.length>7?arguments[7]:void 0,O=arguments.length>8?arguments[8]:void 0;_classCallCheck3(this,VideoTexture),(E=_callSuper(this,VideoTexture,[e,_,S,k,T,M,I,R,O])).isVideoTexture=!0,E.generateMipmaps=!1,E._requestVideoFrameCallbackId=0;var D=E;return"requestVideoFrameCallback"in e&&(E._requestVideoFrameCallbackId=e.requestVideoFrameCallback(function updateVideo(){D.needsUpdate=!0,D._requestVideoFrameCallbackId=e.requestVideoFrameCallback(updateVideo)})),E}return _inherits(VideoTexture,e),_createClass3(VideoTexture,[{key:"clone",value:function(){return new this.constructor(this.image).copy(this)}},{key:"update",value:function(){var e=this.image;!1==="requestVideoFrameCallback"in e&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}},{key:"dispose",value:function(){0!==this._requestVideoFrameCallbackId&&this.source.data.cancelVideoFrameCallback(this._requestVideoFrameCallbackId),_superPropGet(VideoTexture,"dispose",this,3)([])}}])}(mh),Mv=function(e){function VideoFrameTexture(e,_,S,k,E,T,M,I){var R;return _classCallCheck3(this,VideoFrameTexture),(R=_callSuper(this,VideoFrameTexture,[{},e,_,S,k,E,T,M,I])).isVideoFrameTexture=!0,R}return _inherits(VideoFrameTexture,e),_createClass3(VideoFrameTexture,[{key:"update",value:function(){}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"setFrame",value:function(e){this.image=e,this.needsUpdate=!0}}])}(Tv),Iv=function(e){function FramebufferTexture(e,_){var S;return _classCallCheck3(this,FramebufferTexture),(S=_callSuper(this,FramebufferTexture,[{width:e,height:_}])).isFramebufferTexture=!0,S.magFilter=bl,S.minFilter=bl,S.generateMipmaps=!1,S.needsUpdate=!0,S}return _inherits(FramebufferTexture,e),_createClass3(FramebufferTexture)}(mh),Rv=function(e){function CompressedTexture(e,_,S,k,E,T,M,I,R,O,D,L){var U;return _classCallCheck3(this,CompressedTexture),(U=_callSuper(this,CompressedTexture,[null,T,M,I,R,O,k,E,D,L])).isCompressedTexture=!0,U.image={width:_,height:S},U.mipmaps=e,U.flipY=!1,U.generateMipmaps=!1,U}return _inherits(CompressedTexture,e),_createClass3(CompressedTexture)}(mh),Pv=function(e){function CompressedArrayTexture(e,_,S,k,E,T){var M;return _classCallCheck3(this,CompressedArrayTexture),(M=_callSuper(this,CompressedArrayTexture,[e,_,S,E,T])).isCompressedArrayTexture=!0,M.image.depth=k,M.wrapR=yl,M.layerUpdates=new Set,M}return _inherits(CompressedArrayTexture,e),_createClass3(CompressedArrayTexture,[{key:"addLayerUpdate",value:function(e){this.layerUpdates.add(e)}},{key:"clearLayerUpdates",value:function(){this.layerUpdates.clear()}}])}(Rv),Ov=function(e){function CompressedCubeTexture(e,_,S){var k;return _classCallCheck3(this,CompressedCubeTexture),(k=_callSuper(this,CompressedCubeTexture,[void 0,e[0].width,e[0].height,_,S,dl])).isCompressedCubeTexture=!0,k.isCubeTexture=!0,k.image=e,k}return _inherits(CompressedCubeTexture,e),_createClass3(CompressedCubeTexture)}(Rv),Dv=function(e){function CanvasTexture(e,_,S,k,E,T,M,I,R){var O;return _classCallCheck3(this,CanvasTexture),(O=_callSuper(this,CanvasTexture,[e,_,S,k,E,T,M,I,R])).isCanvasTexture=!0,O.needsUpdate=!0,O}return _inherits(CanvasTexture,e),_createClass3(CanvasTexture)}(mh),Lv=function(e){function DepthTexture(e,_){var S,k=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Pl,E=arguments.length>3?arguments[3]:void 0,T=arguments.length>4?arguments[4]:void 0,M=arguments.length>5?arguments[5]:void 0,I=arguments.length>6&&void 0!==arguments[6]?arguments[6]:bl,R=arguments.length>7&&void 0!==arguments[7]?arguments[7]:bl,O=arguments.length>8?arguments[8]:void 0,D=arguments.length>9&&void 0!==arguments[9]?arguments[9]:Vl,L=arguments.length>10&&void 0!==arguments[10]?arguments[10]:1;if(_classCallCheck3(this,DepthTexture),D!==Vl&&D!==Hl)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");return(S=_callSuper(this,DepthTexture,[{width:e,height:_,depth:L},E,T,M,I,R,D,k,O])).isDepthTexture=!0,S.flipY=!1,S.generateMipmaps=!1,S.compareFunction=null,S}return _inherits(DepthTexture,e),_createClass3(DepthTexture,[{key:"copy",value:function(e){return _superPropGet(DepthTexture,"copy",this,3)([e]),this.source=new ph(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}},{key:"toJSON",value:function(e){var _=_superPropGet(DepthTexture,"toJSON",this,3)([e]);return null!==this.compareFunction&&(_.compareFunction=this.compareFunction),_}}])}(mh),Fv=function(e){function ExternalTexture(){var e,_=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return _classCallCheck3(this,ExternalTexture),(e=_callSuper(this,ExternalTexture)).sourceTexture=_,e.isExternalTexture=!0,e}return _inherits(ExternalTexture,e),_createClass3(ExternalTexture,[{key:"copy",value:function(e){return _superPropGet(ExternalTexture,"copy",this,3)([e]),this.sourceTexture=e.sourceTexture,this}}])}(mh),Uv=function(e){function CapsuleGeometry(){var e,_=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,k=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,E=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,T=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;_classCallCheck3(this,CapsuleGeometry),(e=_callSuper(this,CapsuleGeometry)).type="CapsuleGeometry",e.parameters={radius:_,height:S,capSegments:k,radialSegments:E,heightSegments:T},S=Math.max(0,S),k=Math.max(1,Math.floor(k)),E=Math.max(3,Math.floor(E)),T=Math.max(1,Math.floor(T));for(var M=[],I=[],R=[],O=[],D=S/2,L=Math.PI/2*_,U=S,B=2*L+U,z=2*k+T,G=E+1,j=new th,V=new th,H=0;H<=z;H++){var W=0,q=0,X=0,Y=0;if(H<=k){var K=H/k,J=K*Math.PI/2;q=-D-_*Math.cos(J),X=_*Math.sin(J),Y=-_*Math.cos(J),W=K*L}else if(H<=k+T){var Q=(H-k)/T;q=Q*S-D,X=_,Y=0,W=L+Q*U}else{var Z=(H-k-T)/k,$=Z*Math.PI/2;q=D+_*Math.sin($),X=_*Math.cos($),Y=_*Math.sin($),W=L+U+Z*L}var ee=Math.max(0,Math.min(1,W/B)),te=0;0===H?te=.5/E:H===z&&(te=-.5/E);for(var re=0;re<=E;re++){var ne=re/E,ie=ne*Math.PI*2,ae=Math.sin(ie),oe=Math.cos(ie);V.x=-X*oe,V.y=q,V.z=X*ae,I.push(V.x,V.y,V.z),j.set(-X*oe,Y,X*ae),j.normalize(),R.push(j.x,j.y,j.z),O.push(ne+te,ee)}if(H>0)for(var se=(H-1)*G,ue=0;ue<E;ue++){var le=se+ue,ce=se+ue+1,he=H*G+ue,de=H*G+ue+1;M.push(le,ce,he),M.push(ce,de,he)}}return e.setIndex(M),e.setAttribute("position",new uf(I,3)),e.setAttribute("normal",new uf(R,3)),e.setAttribute("uv",new uf(O,2)),e}return _inherits(CapsuleGeometry,e),_createClass3(CapsuleGeometry,[{key:"copy",value:function(e){return _superPropGet(CapsuleGeometry,"copy",this,3)([e]),this.parameters=Object.assign({},e.parameters),this}}],[{key:"fromJSON",value:function(e){return new CapsuleGeometry(e.radius,e.height,e.capSegments,e.radialSegments,e.heightSegments)}}])}(gf),Bv=function(e){function CircleGeometry(){var e,_=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,k=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,E=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2*Math.PI;_classCallCheck3(this,CircleGeometry),(e=_callSuper(this,CircleGeometry)).type="CircleGeometry",e.parameters={radius:_,segments:S,thetaStart:k,thetaLength:E},S=Math.max(3,S);var T=[],M=[],I=[],R=[],O=new th,D=new $c;M.push(0,0,0),I.push(0,0,1),R.push(.5,.5);for(var L=0,U=3;L<=S;L++,U+=3){var B=k+L/S*E;O.x=_*Math.cos(B),O.y=_*Math.sin(B),M.push(O.x,O.y,O.z),I.push(0,0,1),D.x=(M[U]/_+1)/2,D.y=(M[U+1]/_+1)/2,R.push(D.x,D.y)}for(var z=1;z<=S;z++)T.push(z,z+1,0);return e.setIndex(T),e.setAttribute("position",new uf(M,3)),e.setAttribute("normal",new uf(I,3)),e.setAttribute("uv",new uf(R,2)),e}return _inherits(CircleGeometry,e),_createClass3(CircleGeometry,[{key:"copy",value:function(e){return _superPropGet(CircleGeometry,"copy",this,3)([e]),this.parameters=Object.assign({},e.parameters),this}}],[{key:"fromJSON",value:function(e){return new CircleGeometry(e.radius,e.segments,e.thetaStart,e.thetaLength)}}])}(gf),Nv=function(e){function CylinderGeometry(){var e,_=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,k=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,E=arguments.length>3&&void 0!==arguments[3]?arguments[3]:32,T=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,M=arguments.length>5&&void 0!==arguments[5]&&arguments[5],I=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,R=arguments.length>7&&void 0!==arguments[7]?arguments[7]:2*Math.PI;_classCallCheck3(this,CylinderGeometry),(e=_callSuper(this,CylinderGeometry)).type="CylinderGeometry",e.parameters={radiusTop:_,radiusBottom:S,height:k,radialSegments:E,heightSegments:T,openEnded:M,thetaStart:I,thetaLength:R};var O=e;E=Math.floor(E),T=Math.floor(T);var D=[],L=[],U=[],B=[],z=0,G=[],j=k/2,V=0;function generateCap(e){for(var k=z,T=new $c,M=new th,G=0,H=!0===e?_:S,W=!0===e?1:-1,q=1;q<=E;q++)L.push(0,j*W,0),U.push(0,W,0),B.push(.5,.5),z++;for(var X=z,Y=0;Y<=E;Y++){var K=Y/E*R+I,J=Math.cos(K),Q=Math.sin(K);M.x=H*Q,M.y=j*W,M.z=H*J,L.push(M.x,M.y,M.z),U.push(0,W,0),T.x=.5*J+.5,T.y=.5*Q*W+.5,B.push(T.x,T.y),z++}for(var Z=0;Z<E;Z++){var $=k+Z,ee=X+Z;!0===e?D.push(ee,ee+1,$):D.push(ee+1,ee,$),G+=3}O.addGroup(V,G,!0===e?1:2),V+=G}return function(){for(var e=new th,M=new th,H=0,W=(S-_)/k,q=0;q<=T;q++){for(var X=[],Y=q/T,K=Y*(S-_)+_,J=0;J<=E;J++){var Q=J/E,Z=Q*R+I,$=Math.sin(Z),ee=Math.cos(Z);M.x=K*$,M.y=-Y*k+j,M.z=K*ee,L.push(M.x,M.y,M.z),e.set($,W,ee).normalize(),U.push(e.x,e.y,e.z),B.push(Q,1-Y),X.push(z++)}G.push(X)}for(var te=0;te<E;te++)for(var re=0;re<T;re++){var ne=G[re][te],ie=G[re+1][te],ae=G[re+1][te+1],oe=G[re][te+1];(_>0||0!==re)&&(D.push(ne,ie,oe),H+=3),(S>0||re!==T-1)&&(D.push(ie,ae,oe),H+=3)}O.addGroup(V,H,0),V+=H}(),!1===M&&(_>0&&generateCap(!0),S>0&&generateCap(!1)),e.setIndex(D),e.setAttribute("position",new uf(L,3)),e.setAttribute("normal",new uf(U,3)),e.setAttribute("uv",new uf(B,2)),e}return _inherits(CylinderGeometry,e),_createClass3(CylinderGeometry,[{key:"copy",value:function(e){return _superPropGet(CylinderGeometry,"copy",this,3)([e]),this.parameters=Object.assign({},e.parameters),this}}],[{key:"fromJSON",value:function(e){return new CylinderGeometry(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}])}(gf);D("bd",Nv);var zv=function(e){function ConeGeometry(){var e,_=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,k=arguments.length>2&&void 0!==arguments[2]?arguments[2]:32,E=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,T=arguments.length>4&&void 0!==arguments[4]&&arguments[4],M=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,I=arguments.length>6&&void 0!==arguments[6]?arguments[6]:2*Math.PI;return _classCallCheck3(this,ConeGeometry),(e=_callSuper(this,ConeGeometry,[0,_,S,k,E,T,M,I])).type="ConeGeometry",e.parameters={radius:_,height:S,radialSegments:k,heightSegments:E,openEnded:T,thetaStart:M,thetaLength:I},e}return _inherits(ConeGeometry,e),_createClass3(ConeGeometry,null,[{key:"fromJSON",value:function(e){return new ConeGeometry(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}])}(Nv),Gv=function(e){function PolyhedronGeometry(){var e,_=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],k=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,E=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;_classCallCheck3(this,PolyhedronGeometry),(e=_callSuper(this,PolyhedronGeometry)).type="PolyhedronGeometry",e.parameters={vertices:_,indices:S,radius:k,detail:E};var T=[],M=[];function subdivideFace(e,_,S,k){for(var E=k+1,T=[],M=0;M<=E;M++){T[M]=[];for(var I=e.clone().lerp(S,M/E),R=_.clone().lerp(S,M/E),O=E-M,D=0;D<=O;D++)T[M][D]=0===D&&M===E?I:I.clone().lerp(R,D/O)}for(var L=0;L<E;L++)for(var U=0;U<2*(E-L)-1;U++){var B=Math.floor(U/2);U%2==0?(pushVertex(T[L][B+1]),pushVertex(T[L+1][B]),pushVertex(T[L][B])):(pushVertex(T[L][B+1]),pushVertex(T[L+1][B+1]),pushVertex(T[L+1][B]))}}function pushVertex(e){T.push(e.x,e.y,e.z)}function getVertexByIndex(e,S){var k=3*e;S.x=_[k+0],S.y=_[k+1],S.z=_[k+2]}function correctUV(e,_,S,k){k<0&&1===e.x&&(M[_]=e.x-1),0===S.x&&0===S.z&&(M[_]=k/2/Math.PI+.5)}function azimuth(e){return Math.atan2(e.z,-e.x)}function inclination(e){return Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))}return function(e){for(var _=new th,k=new th,E=new th,T=0;T<S.length;T+=3)getVertexByIndex(S[T+0],_),getVertexByIndex(S[T+1],k),getVertexByIndex(S[T+2],E),subdivideFace(_,k,E,e)}(E),function(e){for(var _=new th,S=0;S<T.length;S+=3)_.x=T[S+0],_.y=T[S+1],_.z=T[S+2],_.normalize().multiplyScalar(e),T[S+0]=_.x,T[S+1]=_.y,T[S+2]=_.z}(k),function(){for(var e=new th,_=0;_<T.length;_+=3){e.x=T[_+0],e.y=T[_+1],e.z=T[_+2];var S=azimuth(e)/2/Math.PI+.5,k=inclination(e)/Math.PI+.5;M.push(S,1-k)}(function(){for(var e=new th,_=new th,S=new th,k=new th,E=new $c,I=new $c,R=new $c,O=0,D=0;O<T.length;O+=9,D+=6){e.set(T[O+0],T[O+1],T[O+2]),_.set(T[O+3],T[O+4],T[O+5]),S.set(T[O+6],T[O+7],T[O+8]),E.set(M[D+0],M[D+1]),I.set(M[D+2],M[D+3]),R.set(M[D+4],M[D+5]),k.copy(e).add(_).add(S).divideScalar(3);var L=azimuth(k);correctUV(E,D+0,e,L),correctUV(I,D+2,_,L),correctUV(R,D+4,S,L)}})(),function(){for(var e=0;e<M.length;e+=6){var _=M[e+0],S=M[e+2],k=M[e+4],E=Math.max(_,S,k),T=Math.min(_,S,k);E>.9&&T<.1&&(_<.2&&(M[e+0]+=1),S<.2&&(M[e+2]+=1),k<.2&&(M[e+4]+=1))}}()}(),e.setAttribute("position",new uf(T,3)),e.setAttribute("normal",new uf(T.slice(),3)),e.setAttribute("uv",new uf(M,2)),0===E?e.computeVertexNormals():e.normalizeNormals(),e}return _inherits(PolyhedronGeometry,e),_createClass3(PolyhedronGeometry,[{key:"copy",value:function(e){return _superPropGet(PolyhedronGeometry,"copy",this,3)([e]),this.parameters=Object.assign({},e.parameters),this}}],[{key:"fromJSON",value:function(e){return new PolyhedronGeometry(e.vertices,e.indices,e.radius,e.details)}}])}(gf),jv=function(e){function DodecahedronGeometry(){var e,_=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;_classCallCheck3(this,DodecahedronGeometry);var k=(1+Math.sqrt(5))/2,E=1/k;return(e=_callSuper(this,DodecahedronGeometry,[[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-E,-k,0,-E,k,0,E,-k,0,E,k,-E,-k,0,-E,k,0,E,-k,0,E,k,0,-k,0,-E,k,0,-E,-k,0,E,k,0,E],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],_,S])).type="DodecahedronGeometry",e.parameters={radius:_,detail:S},e}return _inherits(DodecahedronGeometry,e),_createClass3(DodecahedronGeometry,null,[{key:"fromJSON",value:function(e){return new DodecahedronGeometry(e.radius,e.detail)}}])}(Gv),Vv=new th,Hv=new th,Wv=new th,qv=new Bd,Xv=function(e){function EdgesGeometry(){var e,_=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(_classCallCheck3(this,EdgesGeometry),(e=_callSuper(this,EdgesGeometry)).type="EdgesGeometry",e.parameters={geometry:_,thresholdAngle:S},null!==_){for(var k=Math.pow(10,4),E=Math.cos(Jc*S),T=_.getIndex(),M=_.getAttribute("position"),I=T?T.count:M.count,R=[0,0,0],O=["a","b","c"],D=new Array(3),L={},U=[],B=0;B<I;B+=3){T?(R[0]=T.getX(B),R[1]=T.getX(B+1),R[2]=T.getX(B+2)):(R[0]=B,R[1]=B+1,R[2]=B+2);var z=qv.a,G=qv.b,j=qv.c;if(z.fromBufferAttribute(M,R[0]),G.fromBufferAttribute(M,R[1]),j.fromBufferAttribute(M,R[2]),qv.getNormal(Wv),D[0]="".concat(Math.round(z.x*k),",").concat(Math.round(z.y*k),",").concat(Math.round(z.z*k)),D[1]="".concat(Math.round(G.x*k),",").concat(Math.round(G.y*k),",").concat(Math.round(G.z*k)),D[2]="".concat(Math.round(j.x*k),",").concat(Math.round(j.y*k),",").concat(Math.round(j.z*k)),D[0]!==D[1]&&D[1]!==D[2]&&D[2]!==D[0])for(var V=0;V<3;V++){var H=(V+1)%3,W=D[V],q=D[H],X=qv[O[V]],Y=qv[O[H]],K="".concat(W,"_").concat(q),J="".concat(q,"_").concat(W);J in L&&L[J]?(Wv.dot(L[J].normal)<=E&&(U.push(X.x,X.y,X.z),U.push(Y.x,Y.y,Y.z)),L[J]=null):K in L||(L[K]={index0:R[V],index1:R[H],normal:Wv.clone()})}}for(var Q in L)if(L[Q]){var Z=L[Q],$=Z.index0,ee=Z.index1;Vv.fromBufferAttribute(M,$),Hv.fromBufferAttribute(M,ee),U.push(Vv.x,Vv.y,Vv.z),U.push(Hv.x,Hv.y,Hv.z)}e.setAttribute("position",new uf(U,3))}return e}return _inherits(EdgesGeometry,e),_createClass3(EdgesGeometry,[{key:"copy",value:function(e){return _superPropGet(EdgesGeometry,"copy",this,3)([e]),this.parameters=Object.assign({},e.parameters),this}}])}(gf),Yv=function(){return _createClass3(function Curve(){_classCallCheck3(this,Curve),this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null},[{key:"getPoint",value:function(){}},{key:"getPointAt",value:function(e,_){var S=this.getUtoTmapping(e);return this.getPoint(S,_)}},{key:"getPoints",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,_=[],S=0;S<=e;S++)_.push(this.getPoint(S/e));return _}},{key:"getSpacedPoints",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,_=[],S=0;S<=e;S++)_.push(this.getPointAt(S/e));return _}},{key:"getLength",value:function(){var e=this.getLengths();return e[e.length-1]}},{key:"getLengths",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.arcLengthDivisions;if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var _,S=[],k=this.getPoint(0),E=0;S.push(0);for(var T=1;T<=e;T++)E+=(_=this.getPoint(T/e)).distanceTo(k),S.push(E),k=_;return this.cacheArcLengths=S,S}},{key:"updateArcLengths",value:function(){this.needsUpdate=!0,this.getLengths()}},{key:"getUtoTmapping",value:function(e){var _,S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,k=this.getLengths(),E=0,T=k.length;_=S||e*k[T-1];for(var M,I=0,R=T-1;I<=R;)if((M=k[E=Math.floor(I+(R-I)/2)]-_)<0)I=E+1;else{if(!(M>0)){R=E;break}R=E-1}if(k[E=R]===_)return E/(T-1);var O=k[E];return(E+(_-O)/(k[E+1]-O))/(T-1)}},{key:"getTangent",value:function(e,_){var S=1e-4,k=e-S,E=e+S;k<0&&(k=0),E>1&&(E=1);var T=this.getPoint(k),M=this.getPoint(E),I=_||(T.isVector2?new $c:new th);return I.copy(M).sub(T).normalize(),I}},{key:"getTangentAt",value:function(e,_){var S=this.getUtoTmapping(e);return this.getTangent(S,_)}},{key:"computeFrenetFrames",value:function(e){for(var _=arguments.length>1&&void 0!==arguments[1]&&arguments[1],S=new th,k=[],E=[],T=[],M=new th,I=new Qh,R=0;R<=e;R++){var O=R/e;k[R]=this.getTangentAt(O,new th)}E[0]=new th,T[0]=new th;var D=Number.MAX_VALUE,L=Math.abs(k[0].x),U=Math.abs(k[0].y),B=Math.abs(k[0].z);L<=D&&(D=L,S.set(1,0,0)),U<=D&&(D=U,S.set(0,1,0)),B<=D&&S.set(0,0,1),M.crossVectors(k[0],S).normalize(),E[0].crossVectors(k[0],M),T[0].crossVectors(k[0],E[0]);for(var z=1;z<=e;z++){if(E[z]=E[z-1].clone(),T[z]=T[z-1].clone(),M.crossVectors(k[z-1],k[z]),M.length()>Number.EPSILON){M.normalize();var G=Math.acos(clamp$1(k[z-1].dot(k[z]),-1,1));E[z].applyMatrix4(I.makeRotationAxis(M,G))}T[z].crossVectors(k[z],E[z])}if(!0===_){var j=Math.acos(clamp$1(E[0].dot(E[e]),-1,1));j/=e,k[0].dot(M.crossVectors(E[0],E[e]))>0&&(j=-j);for(var V=1;V<=e;V++)E[V].applyMatrix4(I.makeRotationAxis(k[V],j*V)),T[V].crossVectors(k[V],E[V])}return{tangents:k,normals:E,binormals:T}}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}},{key:"toJSON",value:function(){var e={metadata:{version:4.7,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}},{key:"fromJSON",value:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}])}(),Kv=function(e){function EllipseCurve(){var e,_=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,k=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,E=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,T=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,M=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI,I=arguments.length>6&&void 0!==arguments[6]&&arguments[6],R=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0;return _classCallCheck3(this,EllipseCurve),(e=_callSuper(this,EllipseCurve)).isEllipseCurve=!0,e.type="EllipseCurve",e.aX=_,e.aY=S,e.xRadius=k,e.yRadius=E,e.aStartAngle=T,e.aEndAngle=M,e.aClockwise=I,e.aRotation=R,e}return _inherits(EllipseCurve,e),_createClass3(EllipseCurve,[{key:"getPoint",value:function(e){for(var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new $c,S=2*Math.PI,k=this.aEndAngle-this.aStartAngle,E=Math.abs(k)<Number.EPSILON;k<0;)k+=S;for(;k>S;)k-=S;k<Number.EPSILON&&(k=E?0:S),!0!==this.aClockwise||E||(k===S?k=-S:k-=S);var T=this.aStartAngle+e*k,M=this.aX+this.xRadius*Math.cos(T),I=this.aY+this.yRadius*Math.sin(T);if(0!==this.aRotation){var R=Math.cos(this.aRotation),O=Math.sin(this.aRotation),D=M-this.aX,L=I-this.aY;M=D*R-L*O+this.aX,I=D*O+L*R+this.aY}return _.set(M,I)}},{key:"copy",value:function(e){return _superPropGet(EllipseCurve,"copy",this,3)([e]),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}},{key:"toJSON",value:function(){var e=_superPropGet(EllipseCurve,"toJSON",this,3)([]);return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}},{key:"fromJSON",value:function(e){return _superPropGet(EllipseCurve,"fromJSON",this,3)([e]),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}])}(Yv),Jv=function(e){function ArcCurve(e,_,S,k,E,T){var M;return _classCallCheck3(this,ArcCurve),(M=_callSuper(this,ArcCurve,[e,_,S,S,k,E,T])).isArcCurve=!0,M.type="ArcCurve",M}return _inherits(ArcCurve,e),_createClass3(ArcCurve)}(Kv);function CubicPoly(){var e=0,_=0,S=0,k=0;function init(E,T,M,I){e=E,_=M,S=-3*E+3*T-2*M-I,k=2*E-2*T+M+I}return{initCatmullRom:function(e,_,S,k,E){init(_,S,E*(S-e),E*(k-_))},initNonuniformCatmullRom:function(e,_,S,k,E,T,M){var I=(_-e)/E-(S-e)/(E+T)+(S-_)/T,R=(S-_)/T-(k-_)/(T+M)+(k-S)/M;init(_,S,I*=T,R*=T)},calc:function(E){var T=E*E;return e+_*E+S*T+k*(T*E)}}}var Qv=new th,Zv=new CubicPoly,$v=new CubicPoly,eg=new CubicPoly,tg=function(e){function CatmullRomCurve3(){var e,_=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],S=arguments.length>1&&void 0!==arguments[1]&&arguments[1],k=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"centripetal",E=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;return _classCallCheck3(this,CatmullRomCurve3),(e=_callSuper(this,CatmullRomCurve3)).isCatmullRomCurve3=!0,e.type="CatmullRomCurve3",e.points=_,e.closed=S,e.curveType=k,e.tension=E,e}return _inherits(CatmullRomCurve3,e),_createClass3(CatmullRomCurve3,[{key:"getPoint",value:function(e){var _,S,k=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new th,E=this.points,T=E.length,M=(T-(this.closed?0:1))*e,I=Math.floor(M),R=M-I;this.closed?I+=I>0?0:(Math.floor(Math.abs(I)/T)+1)*T:0===R&&I===T-1&&(I=T-2,R=1),this.closed||I>0?_=E[(I-1)%T]:(Qv.subVectors(E[0],E[1]).add(E[0]),_=Qv);var O=E[I%T],D=E[(I+1)%T];if(this.closed||I+2<T?S=E[(I+2)%T]:(Qv.subVectors(E[T-1],E[T-2]).add(E[T-1]),S=Qv),"centripetal"===this.curveType||"chordal"===this.curveType){var L="chordal"===this.curveType?.5:.25,U=Math.pow(_.distanceToSquared(O),L),B=Math.pow(O.distanceToSquared(D),L),z=Math.pow(D.distanceToSquared(S),L);B<1e-4&&(B=1),U<1e-4&&(U=B),z<1e-4&&(z=B),Zv.initNonuniformCatmullRom(_.x,O.x,D.x,S.x,U,B,z),$v.initNonuniformCatmullRom(_.y,O.y,D.y,S.y,U,B,z),eg.initNonuniformCatmullRom(_.z,O.z,D.z,S.z,U,B,z)}else"catmullrom"===this.curveType&&(Zv.initCatmullRom(_.x,O.x,D.x,S.x,this.tension),$v.initCatmullRom(_.y,O.y,D.y,S.y,this.tension),eg.initCatmullRom(_.z,O.z,D.z,S.z,this.tension));return k.set(Zv.calc(R),$v.calc(R),eg.calc(R)),k}},{key:"copy",value:function(e){_superPropGet(CatmullRomCurve3,"copy",this,3)([e]),this.points=[];for(var _=0,S=e.points.length;_<S;_++){var k=e.points[_];this.points.push(k.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}},{key:"toJSON",value:function(){var e=_superPropGet(CatmullRomCurve3,"toJSON",this,3)([]);e.points=[];for(var _=0,S=this.points.length;_<S;_++){var k=this.points[_];e.points.push(k.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}},{key:"fromJSON",value:function(e){_superPropGet(CatmullRomCurve3,"fromJSON",this,3)([e]),this.points=[];for(var _=0,S=e.points.length;_<S;_++){var k=e.points[_];this.points.push((new th).fromArray(k))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}])}(Yv);function CatmullRom(e,_,S,k,E){var T=.5*(k-_),M=.5*(E-S),I=e*e;return(2*S-2*k+T+M)*(e*I)+(-3*S+3*k-2*T-M)*I+T*e+S}function QuadraticBezier(e,_,S,k){return function(e,_){var S=1-e;return S*S*_}(e,_)+function(e,_){return 2*(1-e)*e*_}(e,S)+function(e,_){return e*e*_}(e,k)}function CubicBezier(e,_,S,k,E){return function(e,_){var S=1-e;return S*S*S*_}(e,_)+function(e,_){var S=1-e;return 3*S*S*e*_}(e,S)+function(e,_){return 3*(1-e)*e*e*_}(e,k)+function(e,_){return e*e*e*_}(e,E)}var rg=function(e){function CubicBezierCurve(){var e,_=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new $c,S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new $c,k=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new $c,E=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new $c;return _classCallCheck3(this,CubicBezierCurve),(e=_callSuper(this,CubicBezierCurve)).isCubicBezierCurve=!0,e.type="CubicBezierCurve",e.v0=_,e.v1=S,e.v2=k,e.v3=E,e}return _inherits(CubicBezierCurve,e),_createClass3(CubicBezierCurve,[{key:"getPoint",value:function(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new $c,S=this.v0,k=this.v1,E=this.v2,T=this.v3;return _.set(CubicBezier(e,S.x,k.x,E.x,T.x),CubicBezier(e,S.y,k.y,E.y,T.y)),_}},{key:"copy",value:function(e){return _superPropGet(CubicBezierCurve,"copy",this,3)([e]),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}},{key:"toJSON",value:function(){var e=_superPropGet(CubicBezierCurve,"toJSON",this,3)([]);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}},{key:"fromJSON",value:function(e){return _superPropGet(CubicBezierCurve,"fromJSON",this,3)([e]),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}])}(Yv),ng=function(e){function CubicBezierCurve3(){var e,_=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new th,S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new th,k=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new th,E=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new th;return _classCallCheck3(this,CubicBezierCurve3),(e=_callSuper(this,CubicBezierCurve3)).isCubicBezierCurve3=!0,e.type="CubicBezierCurve3",e.v0=_,e.v1=S,e.v2=k,e.v3=E,e}return _inherits(CubicBezierCurve3,e),_createClass3(CubicBezierCurve3,[{key:"getPoint",value:function(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new th,S=this.v0,k=this.v1,E=this.v2,T=this.v3;return _.set(CubicBezier(e,S.x,k.x,E.x,T.x),CubicBezier(e,S.y,k.y,E.y,T.y),CubicBezier(e,S.z,k.z,E.z,T.z)),_}},{key:"copy",value:function(e){return _superPropGet(CubicBezierCurve3,"copy",this,3)([e]),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}},{key:"toJSON",value:function(){var e=_superPropGet(CubicBezierCurve3,"toJSON",this,3)([]);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}},{key:"fromJSON",value:function(e){return _superPropGet(CubicBezierCurve3,"fromJSON",this,3)([e]),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}])}(Yv),ig=function(e){function LineCurve(){var e,_=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new $c,S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new $c;return _classCallCheck3(this,LineCurve),(e=_callSuper(this,LineCurve)).isLineCurve=!0,e.type="LineCurve",e.v1=_,e.v2=S,e}return _inherits(LineCurve,e),_createClass3(LineCurve,[{key:"getPoint",value:function(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new $c;return 1===e?_.copy(this.v2):(_.copy(this.v2).sub(this.v1),_.multiplyScalar(e).add(this.v1)),_}},{key:"getPointAt",value:function(e,_){return this.getPoint(e,_)}},{key:"getTangent",value:function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:new $c).subVectors(this.v2,this.v1).normalize()}},{key:"getTangentAt",value:function(e,_){return this.getTangent(e,_)}},{key:"copy",value:function(e){return _superPropGet(LineCurve,"copy",this,3)([e]),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=_superPropGet(LineCurve,"toJSON",this,3)([]);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return _superPropGet(LineCurve,"fromJSON",this,3)([e]),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}])}(Yv),ag=function(e){function LineCurve3(){var e,_=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new th,S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new th;return _classCallCheck3(this,LineCurve3),(e=_callSuper(this,LineCurve3)).isLineCurve3=!0,e.type="LineCurve3",e.v1=_,e.v2=S,e}return _inherits(LineCurve3,e),_createClass3(LineCurve3,[{key:"getPoint",value:function(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new th;return 1===e?_.copy(this.v2):(_.copy(this.v2).sub(this.v1),_.multiplyScalar(e).add(this.v1)),_}},{key:"getPointAt",value:function(e,_){return this.getPoint(e,_)}},{key:"getTangent",value:function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:new th).subVectors(this.v2,this.v1).normalize()}},{key:"getTangentAt",value:function(e,_){return this.getTangent(e,_)}},{key:"copy",value:function(e){return _superPropGet(LineCurve3,"copy",this,3)([e]),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=_superPropGet(LineCurve3,"toJSON",this,3)([]);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return _superPropGet(LineCurve3,"fromJSON",this,3)([e]),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}])}(Yv);D("cd",ag);var og=function(e){function QuadraticBezierCurve(){var e,_=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new $c,S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new $c,k=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new $c;return _classCallCheck3(this,QuadraticBezierCurve),(e=_callSuper(this,QuadraticBezierCurve)).isQuadraticBezierCurve=!0,e.type="QuadraticBezierCurve",e.v0=_,e.v1=S,e.v2=k,e}return _inherits(QuadraticBezierCurve,e),_createClass3(QuadraticBezierCurve,[{key:"getPoint",value:function(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new $c,S=this.v0,k=this.v1,E=this.v2;return _.set(QuadraticBezier(e,S.x,k.x,E.x),QuadraticBezier(e,S.y,k.y,E.y)),_}},{key:"copy",value:function(e){return _superPropGet(QuadraticBezierCurve,"copy",this,3)([e]),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=_superPropGet(QuadraticBezierCurve,"toJSON",this,3)([]);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return _superPropGet(QuadraticBezierCurve,"fromJSON",this,3)([e]),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}])}(Yv),sg=function(e){function QuadraticBezierCurve3(){var e,_=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new th,S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new th,k=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new th;return _classCallCheck3(this,QuadraticBezierCurve3),(e=_callSuper(this,QuadraticBezierCurve3)).isQuadraticBezierCurve3=!0,e.type="QuadraticBezierCurve3",e.v0=_,e.v1=S,e.v2=k,e}return _inherits(QuadraticBezierCurve3,e),_createClass3(QuadraticBezierCurve3,[{key:"getPoint",value:function(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new th,S=this.v0,k=this.v1,E=this.v2;return _.set(QuadraticBezier(e,S.x,k.x,E.x),QuadraticBezier(e,S.y,k.y,E.y),QuadraticBezier(e,S.z,k.z,E.z)),_}},{key:"copy",value:function(e){return _superPropGet(QuadraticBezierCurve3,"copy",this,3)([e]),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=_superPropGet(QuadraticBezierCurve3,"toJSON",this,3)([]);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return _superPropGet(QuadraticBezierCurve3,"fromJSON",this,3)([e]),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}])}(Yv),ug=function(e){function SplineCurve(){var e,_=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return _classCallCheck3(this,SplineCurve),(e=_callSuper(this,SplineCurve)).isSplineCurve=!0,e.type="SplineCurve",e.points=_,e}return _inherits(SplineCurve,e),_createClass3(SplineCurve,[{key:"getPoint",value:function(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new $c,S=this.points,k=(S.length-1)*e,E=Math.floor(k),T=k-E,M=S[0===E?E:E-1],I=S[E],R=S[E>S.length-2?S.length-1:E+1],O=S[E>S.length-3?S.length-1:E+2];return _.set(CatmullRom(T,M.x,I.x,R.x,O.x),CatmullRom(T,M.y,I.y,R.y,O.y)),_}},{key:"copy",value:function(e){_superPropGet(SplineCurve,"copy",this,3)([e]),this.points=[];for(var _=0,S=e.points.length;_<S;_++){var k=e.points[_];this.points.push(k.clone())}return this}},{key:"toJSON",value:function(){var e=_superPropGet(SplineCurve,"toJSON",this,3)([]);e.points=[];for(var _=0,S=this.points.length;_<S;_++){var k=this.points[_];e.points.push(k.toArray())}return e}},{key:"fromJSON",value:function(e){_superPropGet(SplineCurve,"fromJSON",this,3)([e]),this.points=[];for(var _=0,S=e.points.length;_<S;_++){var k=e.points[_];this.points.push((new $c).fromArray(k))}return this}}])}(Yv),lg=Object.freeze({__proto__:null,ArcCurve:Jv,CatmullRomCurve3:tg,CubicBezierCurve:rg,CubicBezierCurve3:ng,EllipseCurve:Kv,LineCurve:ig,LineCurve3:ag,QuadraticBezierCurve:og,QuadraticBezierCurve3:sg,SplineCurve:ug}),cg=function(e){function CurvePath(){var e;return _classCallCheck3(this,CurvePath),(e=_callSuper(this,CurvePath)).type="CurvePath",e.curves=[],e.autoClose=!1,e}return _inherits(CurvePath,e),_createClass3(CurvePath,[{key:"add",value:function(e){this.curves.push(e)}},{key:"closePath",value:function(){var e=this.curves[0].getPoint(0),_=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(_)){var S=!0===e.isVector2?"LineCurve":"LineCurve3";this.curves.push(new lg[S](_,e))}return this}},{key:"getPoint",value:function(e,_){for(var S=e*this.getLength(),k=this.getCurveLengths(),E=0;E<k.length;){if(k[E]>=S){var T=k[E]-S,M=this.curves[E],I=M.getLength(),R=0===I?0:1-T/I;return M.getPointAt(R,_)}E++}return null}},{key:"getLength",value:function(){var e=this.getCurveLengths();return e[e.length-1]}},{key:"updateArcLengths",value:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}},{key:"getCurveLengths",value:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],_=0,S=0,k=this.curves.length;S<k;S++)_+=this.curves[S].getLength(),e.push(_);return this.cacheLengths=e,e}},{key:"getSpacedPoints",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:40,_=[],S=0;S<=e;S++)_.push(this.getPoint(S/e));return this.autoClose&&_.push(_[0]),_}},{key:"getPoints",value:function(){for(var e,_=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12,S=[],k=0,E=this.curves;k<E.length;k++)for(var T=E[k],M=T.isEllipseCurve?2*_:T.isLineCurve||T.isLineCurve3?1:T.isSplineCurve?_*T.points.length:_,I=T.getPoints(M),R=0;R<I.length;R++){var O=I[R];e&&e.equals(O)||(S.push(O),e=O)}return this.autoClose&&S.length>1&&!S[S.length-1].equals(S[0])&&S.push(S[0]),S}},{key:"copy",value:function(e){_superPropGet(CurvePath,"copy",this,3)([e]),this.curves=[];for(var _=0,S=e.curves.length;_<S;_++){var k=e.curves[_];this.curves.push(k.clone())}return this.autoClose=e.autoClose,this}},{key:"toJSON",value:function(){var e=_superPropGet(CurvePath,"toJSON",this,3)([]);e.autoClose=this.autoClose,e.curves=[];for(var _=0,S=this.curves.length;_<S;_++){var k=this.curves[_];e.curves.push(k.toJSON())}return e}},{key:"fromJSON",value:function(e){_superPropGet(CurvePath,"fromJSON",this,3)([e]),this.autoClose=e.autoClose,this.curves=[];for(var _=0,S=e.curves.length;_<S;_++){var k=e.curves[_];this.curves.push((new lg[k.type]).fromJSON(k))}return this}}])}(Yv),hg=function(e){function Path(e){var _;return _classCallCheck3(this,Path),(_=_callSuper(this,Path)).type="Path",_.currentPoint=new $c,e&&_.setFromPoints(e),_}return _inherits(Path,e),_createClass3(Path,[{key:"setFromPoints",value:function(e){this.moveTo(e[0].x,e[0].y);for(var _=1,S=e.length;_<S;_++)this.lineTo(e[_].x,e[_].y);return this}},{key:"moveTo",value:function(e,_){return this.currentPoint.set(e,_),this}},{key:"lineTo",value:function(e,_){var S=new ig(this.currentPoint.clone(),new $c(e,_));return this.curves.push(S),this.currentPoint.set(e,_),this}},{key:"quadraticCurveTo",value:function(e,_,S,k){var E=new og(this.currentPoint.clone(),new $c(e,_),new $c(S,k));return this.curves.push(E),this.currentPoint.set(S,k),this}},{key:"bezierCurveTo",value:function(e,_,S,k,E,T){var M=new rg(this.currentPoint.clone(),new $c(e,_),new $c(S,k),new $c(E,T));return this.curves.push(M),this.currentPoint.set(E,T),this}},{key:"splineThru",value:function(e){var _=[this.currentPoint.clone()].concat(e),S=new ug(_);return this.curves.push(S),this.currentPoint.copy(e[e.length-1]),this}},{key:"arc",value:function(e,_,S,k,E,T){var M=this.currentPoint.x,I=this.currentPoint.y;return this.absarc(e+M,_+I,S,k,E,T),this}},{key:"absarc",value:function(e,_,S,k,E,T){return this.absellipse(e,_,S,S,k,E,T),this}},{key:"ellipse",value:function(e,_,S,k,E,T,M,I){var R=this.currentPoint.x,O=this.currentPoint.y;return this.absellipse(e+R,_+O,S,k,E,T,M,I),this}},{key:"absellipse",value:function(e,_,S,k,E,T,M,I){var R=new Kv(e,_,S,k,E,T,M,I);if(this.curves.length>0){var O=R.getPoint(0);O.equals(this.currentPoint)||this.lineTo(O.x,O.y)}this.curves.push(R);var D=R.getPoint(1);return this.currentPoint.copy(D),this}},{key:"copy",value:function(e){return _superPropGet(Path,"copy",this,3)([e]),this.currentPoint.copy(e.currentPoint),this}},{key:"toJSON",value:function(){var e=_superPropGet(Path,"toJSON",this,3)([]);return e.currentPoint=this.currentPoint.toArray(),e}},{key:"fromJSON",value:function(e){return _superPropGet(Path,"fromJSON",this,3)([e]),this.currentPoint.fromArray(e.currentPoint),this}}])}(cg),dg=function(e){function Shape(e){var _;return _classCallCheck3(this,Shape),(_=_callSuper(this,Shape,[e])).uuid=generateUUID(),_.type="Shape",_.holes=[],_}return _inherits(Shape,e),_createClass3(Shape,[{key:"getPointsHoles",value:function(e){for(var _=[],S=0,k=this.holes.length;S<k;S++)_[S]=this.holes[S].getPoints(e);return _}},{key:"extractPoints",value:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}},{key:"copy",value:function(e){_superPropGet(Shape,"copy",this,3)([e]),this.holes=[];for(var _=0,S=e.holes.length;_<S;_++){var k=e.holes[_];this.holes.push(k.clone())}return this}},{key:"toJSON",value:function(){var e=_superPropGet(Shape,"toJSON",this,3)([]);e.uuid=this.uuid,e.holes=[];for(var _=0,S=this.holes.length;_<S;_++){var k=this.holes[_];e.holes.push(k.toJSON())}return e}},{key:"fromJSON",value:function(e){_superPropGet(Shape,"fromJSON",this,3)([e]),this.uuid=e.uuid,this.holes=[];for(var _=0,S=e.holes.length;_<S;_++){var k=e.holes[_];this.holes.push((new hg).fromJSON(k))}return this}}])}(hg);function earcut(e,_){var S,k,E,T=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,M=_&&_.length,I=M?_[0]*T:e.length,R=linkedList(e,0,I,T,!0),O=[];if(!R||R.next===R.prev)return O;if(M&&(R=function(e,_,S,k){for(var E=[],T=0,M=_.length;T<M;T++){var I=linkedList(e,_[T]*k,T<M-1?_[T+1]*k:e.length,k,!1);I===I.next&&(I.steiner=!0),E.push(getLeftmost(I))}E.sort(compareXYSlope);for(var R=0;R<E.length;R++)S=eliminateHole(E[R],S);return S}(e,_,R,T)),e.length>80*T){S=1/0,k=1/0;for(var D=-1/0,L=-1/0,U=T;U<I;U+=T){var B=e[U],z=e[U+1];B<S&&(S=B),z<k&&(k=z),B>D&&(D=B),z>L&&(L=z)}E=0!==(E=Math.max(D-S,L-k))?32767/E:0}return earcutLinked(R,O,T,S,k,E,0),O}function linkedList(e,_,S,k,E){var T;if(E===function(e,_,S,k){for(var E=0,T=_,M=S-k;T<S;T+=k)E+=(e[M]-e[T])*(e[T+1]+e[M+1]),M=T;return E}(e,_,S,k)>0)for(var M=_;M<S;M+=k)T=insertNode(M/k|0,e[M],e[M+1],T);else for(var I=S-k;I>=_;I-=k)T=insertNode(I/k|0,e[I],e[I+1],T);return T&&equals(T,T.next)&&(removeNode(T),T=T.next),T}function filterPoints(e,_){if(!e)return e;_||(_=e);var S,k=e;do{if(S=!1,k.steiner||!equals(k,k.next)&&0!==area(k.prev,k,k.next))k=k.next;else{if(removeNode(k),(k=_=k.prev)===k.next)break;S=!0}}while(S||k!==_);return _}function earcutLinked(e,_,S,k,E,T,M){if(e){!M&&T&&function(e,_,S,k){var E=e;do{0===E.z&&(E.z=zOrder(E.x,E.y,_,S,k)),E.prevZ=E.prev,E.nextZ=E.next,E=E.next}while(E!==e);E.prevZ.nextZ=null,E.prevZ=null,function(e){var _,S=1;do{var k=e,E=void 0;e=null;var T=null;for(_=0;k;){_++;for(var M=k,I=0,R=0;R<S&&(I++,M=M.nextZ);R++);for(var O=S;I>0||O>0&&M;)0!==I&&(0===O||!M||k.z<=M.z)?(E=k,k=k.nextZ,I--):(E=M,M=M.nextZ,O--),T?T.nextZ=E:e=E,E.prevZ=T,T=E;k=M}T.nextZ=null,S*=2}while(_>1)}(E)}(e,k,E,T);for(var I=e;e.prev!==e.next;){var R=e.prev,O=e.next;if(T?isEarHashed(e,k,E,T):isEar(e))_.push(R.i,e.i,O.i),removeNode(e),e=O.next,I=O.next;else if((e=O)===I){M?1===M?earcutLinked(e=cureLocalIntersections(filterPoints(e),_),_,S,k,E,T,2):2===M&&splitEarcut(e,_,S,k,E,T):earcutLinked(filterPoints(e),_,S,k,E,T,1);break}}}}function isEar(e){var _=e.prev,S=e,k=e.next;if(area(_,S,k)>=0)return!1;for(var E=_.x,T=S.x,M=k.x,I=_.y,R=S.y,O=k.y,D=Math.min(E,T,M),L=Math.min(I,R,O),U=Math.max(E,T,M),B=Math.max(I,R,O),z=k.next;z!==_;){if(z.x>=D&&z.x<=U&&z.y>=L&&z.y<=B&&pointInTriangleExceptFirst(E,I,T,R,M,O,z.x,z.y)&&area(z.prev,z,z.next)>=0)return!1;z=z.next}return!0}function isEarHashed(e,_,S,k){var E=e.prev,T=e,M=e.next;if(area(E,T,M)>=0)return!1;for(var I=E.x,R=T.x,O=M.x,D=E.y,L=T.y,U=M.y,B=Math.min(I,R,O),z=Math.min(D,L,U),G=Math.max(I,R,O),j=Math.max(D,L,U),V=zOrder(B,z,_,S,k),H=zOrder(G,j,_,S,k),W=e.prevZ,q=e.nextZ;W&&W.z>=V&&q&&q.z<=H;){if(W.x>=B&&W.x<=G&&W.y>=z&&W.y<=j&&W!==E&&W!==M&&pointInTriangleExceptFirst(I,D,R,L,O,U,W.x,W.y)&&area(W.prev,W,W.next)>=0)return!1;if(W=W.prevZ,q.x>=B&&q.x<=G&&q.y>=z&&q.y<=j&&q!==E&&q!==M&&pointInTriangleExceptFirst(I,D,R,L,O,U,q.x,q.y)&&area(q.prev,q,q.next)>=0)return!1;q=q.nextZ}for(;W&&W.z>=V;){if(W.x>=B&&W.x<=G&&W.y>=z&&W.y<=j&&W!==E&&W!==M&&pointInTriangleExceptFirst(I,D,R,L,O,U,W.x,W.y)&&area(W.prev,W,W.next)>=0)return!1;W=W.prevZ}for(;q&&q.z<=H;){if(q.x>=B&&q.x<=G&&q.y>=z&&q.y<=j&&q!==E&&q!==M&&pointInTriangleExceptFirst(I,D,R,L,O,U,q.x,q.y)&&area(q.prev,q,q.next)>=0)return!1;q=q.nextZ}return!0}function cureLocalIntersections(e,_){var S=e;do{var k=S.prev,E=S.next.next;!equals(k,E)&&intersects(k,S,S.next,E)&&locallyInside(k,E)&&locallyInside(E,k)&&(_.push(k.i,S.i,E.i),removeNode(S),removeNode(S.next),S=e=E),S=S.next}while(S!==e);return filterPoints(S)}function splitEarcut(e,_,S,k,E,T){var M=e;do{for(var I=M.next.next;I!==M.prev;){if(M.i!==I.i&&isValidDiagonal(M,I)){var R=splitPolygon(M,I);return M=filterPoints(M,M.next),R=filterPoints(R,R.next),earcutLinked(M,_,S,k,E,T,0),void earcutLinked(R,_,S,k,E,T,0)}I=I.next}M=M.next}while(M!==e)}function compareXYSlope(e,_){var S=e.x-_.x;0===S&&(0===(S=e.y-_.y)&&(S=(e.next.y-e.y)/(e.next.x-e.x)-(_.next.y-_.y)/(_.next.x-_.x)));return S}function eliminateHole(e,_){var S=function(e,_){var S,k=_,E=e.x,T=e.y,M=-1/0;if(equals(e,k))return k;do{if(equals(e,k.next))return k.next;if(T<=k.y&&T>=k.next.y&&k.next.y!==k.y){var I=k.x+(T-k.y)*(k.next.x-k.x)/(k.next.y-k.y);if(I<=E&&I>M&&(M=I,S=k.x<k.next.x?k:k.next,I===E))return S}k=k.next}while(k!==_);if(!S)return null;var R=S,O=S.x,D=S.y,L=1/0;k=S;do{if(E>=k.x&&k.x>=O&&E!==k.x&&pointInTriangle(T<D?E:M,T,O,D,T<D?M:E,T,k.x,k.y)){var U=Math.abs(T-k.y)/(E-k.x);locallyInside(k,e)&&(U<L||U===L&&(k.x>S.x||k.x===S.x&&sectorContainsSector(S,k)))&&(S=k,L=U)}k=k.next}while(k!==R);return S}(e,_);if(!S)return _;var k=splitPolygon(S,e);return filterPoints(k,k.next),filterPoints(S,S.next)}function sectorContainsSector(e,_){return area(e.prev,e,_.prev)<0&&area(_.next,e,e.next)<0}function zOrder(e,_,S,k,E){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-S)*E|0)|e<<8))|e<<4))|e<<2))|e<<1))|(_=1431655765&((_=858993459&((_=252645135&((_=16711935&((_=(_-k)*E|0)|_<<8))|_<<4))|_<<2))|_<<1))<<1}function getLeftmost(e){var _=e,S=e;do{(_.x<S.x||_.x===S.x&&_.y<S.y)&&(S=_),_=_.next}while(_!==e);return S}function pointInTriangle(e,_,S,k,E,T,M,I){return(E-M)*(_-I)>=(e-M)*(T-I)&&(e-M)*(k-I)>=(S-M)*(_-I)&&(S-M)*(T-I)>=(E-M)*(k-I)}function pointInTriangleExceptFirst(e,_,S,k,E,T,M,I){return!(e===M&&_===I)&&pointInTriangle(e,_,S,k,E,T,M,I)}function isValidDiagonal(e,_){return e.next.i!==_.i&&e.prev.i!==_.i&&!function(e,_){var S=e;do{if(S.i!==e.i&&S.next.i!==e.i&&S.i!==_.i&&S.next.i!==_.i&&intersects(S,S.next,e,_))return!0;S=S.next}while(S!==e);return!1}(e,_)&&(locallyInside(e,_)&&locallyInside(_,e)&&function(e,_){var S=e,k=!1,E=(e.x+_.x)/2,T=(e.y+_.y)/2;do{S.y>T!=S.next.y>T&&S.next.y!==S.y&&E<(S.next.x-S.x)*(T-S.y)/(S.next.y-S.y)+S.x&&(k=!k),S=S.next}while(S!==e);return k}(e,_)&&(area(e.prev,e,_.prev)||area(e,_.prev,_))||equals(e,_)&&area(e.prev,e,e.next)>0&&area(_.prev,_,_.next)>0)}function area(e,_,S){return(_.y-e.y)*(S.x-_.x)-(_.x-e.x)*(S.y-_.y)}function equals(e,_){return e.x===_.x&&e.y===_.y}function intersects(e,_,S,k){var E=sign(area(e,_,S)),T=sign(area(e,_,k)),M=sign(area(S,k,e)),I=sign(area(S,k,_));return E!==T&&M!==I||(!(0!==E||!onSegment(e,S,_))||(!(0!==T||!onSegment(e,k,_))||(!(0!==M||!onSegment(S,e,k))||!(0!==I||!onSegment(S,_,k)))))}function onSegment(e,_,S){return _.x<=Math.max(e.x,S.x)&&_.x>=Math.min(e.x,S.x)&&_.y<=Math.max(e.y,S.y)&&_.y>=Math.min(e.y,S.y)}function sign(e){return e>0?1:e<0?-1:0}function locallyInside(e,_){return area(e.prev,e,e.next)<0?area(e,_,e.next)>=0&&area(e,e.prev,_)>=0:area(e,_,e.prev)<0||area(e,e.next,_)<0}function splitPolygon(e,_){var S=createNode(e.i,e.x,e.y),k=createNode(_.i,_.x,_.y),E=e.next,T=_.prev;return e.next=_,_.prev=e,S.next=E,E.prev=S,k.next=S,S.prev=k,T.next=k,k.prev=T,k}function insertNode(e,_,S,k){var E=createNode(e,_,S);return k?(E.next=k.next,E.prev=k,k.next.prev=E,k.next=E):(E.prev=E,E.next=E),E}function removeNode(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function createNode(e,_,S){return{i:e,x:_,y:S,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}var fg=function(){return _createClass3(function Earcut(){_classCallCheck3(this,Earcut)},null,[{key:"triangulate",value:function(e,_){return earcut(e,_,arguments.length>2&&void 0!==arguments[2]?arguments[2]:2)}}])}(),pg=function(){function ShapeUtils(){_classCallCheck3(this,ShapeUtils)}return _createClass3(ShapeUtils,null,[{key:"area",value:function(e){for(var _=e.length,S=0,k=_-1,E=0;E<_;k=E++)S+=e[k].x*e[E].y-e[E].x*e[k].y;return.5*S}},{key:"isClockWise",value:function(e){return ShapeUtils.area(e)<0}},{key:"triangulateShape",value:function(e,_){var S=[],k=[],E=[];removeDupEndPts(e),addContour(S,e);var T=e.length;_.forEach(removeDupEndPts);for(var M=0;M<_.length;M++)k.push(T),T+=_[M].length,addContour(S,_[M]);for(var I=fg.triangulate(S,k),R=0;R<I.length;R+=3)E.push(I.slice(R,R+3));return E}}])}();function removeDupEndPts(e){var _=e.length;_>2&&e[_-1].equals(e[0])&&e.pop()}function addContour(e,_){for(var S=0;S<_.length;S++)e.push(_[S].x),e.push(_[S].y)}var vg=function(e){function ExtrudeGeometry(){var e,_=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new dg([new $c(.5,.5),new $c(-.5,.5),new $c(-.5,-.5),new $c(.5,-.5)]),S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck3(this,ExtrudeGeometry),(e=_callSuper(this,ExtrudeGeometry)).type="ExtrudeGeometry",e.parameters={shapes:_,options:S},_=Array.isArray(_)?_:[_];for(var k=e,E=[],T=[],M=0,I=_.length;M<I;M++){addShape(_[M])}function addShape(e){var _,M,I,R,O,D=[],L=void 0!==S.curveSegments?S.curveSegments:12,U=void 0!==S.steps?S.steps:1,B=void 0!==S.depth?S.depth:1,z=void 0===S.bevelEnabled||S.bevelEnabled,G=void 0!==S.bevelThickness?S.bevelThickness:.2,j=void 0!==S.bevelSize?S.bevelSize:G-.1,V=void 0!==S.bevelOffset?S.bevelOffset:0,H=void 0!==S.bevelSegments?S.bevelSegments:3,W=S.extrudePath,q=void 0!==S.UVGenerator?S.UVGenerator:gg,X=!1;W&&(_=W.getSpacedPoints(U),X=!0,z=!1,M=W.computeFrenetFrames(U,!1),I=new th,R=new th,O=new th),z||(H=0,G=0,j=0,V=0);var Y=e.extractPoints(L),K=Y.shape,J=Y.holes;if(!pg.isClockWise(K)){K=K.reverse();for(var Q=0,Z=J.length;Q<Z;Q++){var $=J[Q];pg.isClockWise($)&&(J[Q]=$.reverse())}}function mergeOverlappingPoints(e){for(var _=1e-10*1e-10,S=e[0],k=1;k<=e.length;k++){var E=k%e.length,T=e[E],M=T.x-S.x,I=T.y-S.y,R=M*M+I*I,O=Math.max(Math.abs(T.x),Math.abs(T.y),Math.abs(S.x),Math.abs(S.y));R<=_*O*O?(e.splice(E,1),k--):S=T}}mergeOverlappingPoints(K),J.forEach(mergeOverlappingPoints);for(var ee=J.length,te=K,re=0;re<ee;re++){var ne=J[re];K=K.concat(ne)}function scalePt2(e,_,S){return e.clone().addScaledVector(_,S)}var ie=K.length;function getBevelVec(e,_,S){var k,E,T,M=e.x-_.x,I=e.y-_.y,R=S.x-e.x,O=S.y-e.y,D=M*M+I*I,L=M*O-I*R;if(Math.abs(L)>Number.EPSILON){var U=Math.sqrt(D),B=Math.sqrt(R*R+O*O),z=_.x-I/U,G=_.y+M/U,j=((S.x-O/B-z)*O-(S.y+R/B-G)*R)/(M*O-I*R),V=(k=z+M*j-e.x)*k+(E=G+I*j-e.y)*E;if(V<=2)return new $c(k,E);T=Math.sqrt(V/2)}else{var H=!1;M>Number.EPSILON?R>Number.EPSILON&&(H=!0):M<-Number.EPSILON?R<-Number.EPSILON&&(H=!0):Math.sign(I)===Math.sign(O)&&(H=!0),H?(k=-I,E=M,T=Math.sqrt(D)):(k=M,E=I,T=Math.sqrt(D/2))}return new $c(k/T,E/T)}for(var ae=[],oe=0,se=te.length,ue=se-1,le=oe+1;oe<se;oe++,ue++,le++)ue===se&&(ue=0),le===se&&(le=0),ae[oe]=getBevelVec(te[oe],te[ue],te[le]);for(var ce,he,de=[],fe=ae.concat(),pe=0,ve=ee;pe<ve;pe++){var ge=J[pe];ce=[];for(var me=0,ye=ge.length,_e=ye-1,be=me+1;me<ye;me++,_e++,be++)_e===ye&&(_e=0),be===ye&&(be=0),ce[me]=getBevelVec(ge[me],ge[_e],ge[be]);de.push(ce),fe=fe.concat(ce)}if(0===H)he=pg.triangulateShape(te,J);else{for(var Se=[],we=[],xe=0;xe<H;xe++){for(var ke=xe/H,Ce=G*Math.cos(ke*Math.PI/2),Ae=j*Math.sin(ke*Math.PI/2)+V,Ee=0,Te=te.length;Ee<Te;Ee++){var Me=scalePt2(te[Ee],ae[Ee],Ae);v(Me.x,Me.y,-Ce),0===ke&&Se.push(Me)}for(var Ie=0,Re=ee;Ie<Re;Ie++){var Pe=J[Ie];ce=de[Ie];for(var Oe=[],De=0,Le=Pe.length;De<Le;De++){var Fe=scalePt2(Pe[De],ce[De],Ae);v(Fe.x,Fe.y,-Ce),0===ke&&Oe.push(Fe)}0===ke&&we.push(Oe)}}he=pg.triangulateShape(Se,we)}for(var Ue=he.length,Be=j+V,Ne=0;Ne<ie;Ne++){var ze=z?scalePt2(K[Ne],fe[Ne],Be):K[Ne];X?(R.copy(M.normals[0]).multiplyScalar(ze.x),I.copy(M.binormals[0]).multiplyScalar(ze.y),O.copy(_[0]).add(R).add(I),v(O.x,O.y,O.z)):v(ze.x,ze.y,0)}for(var Ge=1;Ge<=U;Ge++)for(var je=0;je<ie;je++){var Ve=z?scalePt2(K[je],fe[je],Be):K[je];X?(R.copy(M.normals[Ge]).multiplyScalar(Ve.x),I.copy(M.binormals[Ge]).multiplyScalar(Ve.y),O.copy(_[Ge]).add(R).add(I),v(O.x,O.y,O.z)):v(Ve.x,Ve.y,B/U*Ge)}for(var He=H-1;He>=0;He--){for(var We=He/H,qe=G*Math.cos(We*Math.PI/2),Xe=j*Math.sin(We*Math.PI/2)+V,Ye=0,Ke=te.length;Ye<Ke;Ye++){var Je=scalePt2(te[Ye],ae[Ye],Xe);v(Je.x,Je.y,B+qe)}for(var Qe=0,Ze=J.length;Qe<Ze;Qe++){var $e=J[Qe];ce=de[Qe];for(var et=0,tt=$e.length;et<tt;et++){var rt=scalePt2($e[et],ce[et],Xe);X?v(rt.x,rt.y+_[U-1].y,_[U-1].x+qe):v(rt.x,rt.y,B+qe)}}}function sidewalls(e,_){for(var S=e.length;--S>=0;){var k=S,E=S-1;E<0&&(E=e.length-1);for(var T=0,M=U+2*H;T<M;T++){var I=ie*T,R=ie*(T+1);f4(_+k+I,_+E+I,_+E+R,_+k+R)}}}function v(e,_,S){D.push(e),D.push(_),D.push(S)}function f3(e,_,S){addVertex(e),addVertex(_),addVertex(S);var T=E.length/3,M=q.generateTopUV(k,E,T-3,T-2,T-1);addUV(M[0]),addUV(M[1]),addUV(M[2])}function f4(e,_,S,T){addVertex(e),addVertex(_),addVertex(T),addVertex(_),addVertex(S),addVertex(T);var M=E.length/3,I=q.generateSideWallUV(k,E,M-6,M-3,M-2,M-1);addUV(I[0]),addUV(I[1]),addUV(I[3]),addUV(I[1]),addUV(I[2]),addUV(I[3])}function addVertex(e){E.push(D[3*e+0]),E.push(D[3*e+1]),E.push(D[3*e+2])}function addUV(e){T.push(e.x),T.push(e.y)}!function(){var e=E.length/3;if(z){for(var _=0,S=ie*_,T=0;T<Ue;T++){var M=he[T];f3(M[2]+S,M[1]+S,M[0]+S)}S=ie*(_=U+2*H);for(var I=0;I<Ue;I++){var R=he[I];f3(R[0]+S,R[1]+S,R[2]+S)}}else{for(var O=0;O<Ue;O++){var D=he[O];f3(D[2],D[1],D[0])}for(var L=0;L<Ue;L++){var B=he[L];f3(B[0]+ie*U,B[1]+ie*U,B[2]+ie*U)}}k.addGroup(e,E.length/3-e,0)}(),function(){var e=E.length/3,_=0;sidewalls(te,_),_+=te.length;for(var S=0,T=J.length;S<T;S++){var M=J[S];sidewalls(M,_),_+=M.length}k.addGroup(e,E.length/3-e,1)}()}return e.setAttribute("position",new uf(E,3)),e.setAttribute("uv",new uf(T,2)),e.computeVertexNormals(),e}return _inherits(ExtrudeGeometry,e),_createClass3(ExtrudeGeometry,[{key:"copy",value:function(e){return _superPropGet(ExtrudeGeometry,"copy",this,3)([e]),this.parameters=Object.assign({},e.parameters),this}},{key:"toJSON",value:function(){var e=_superPropGet(ExtrudeGeometry,"toJSON",this,3)([]);return function(e,_,S){if(S.shapes=[],Array.isArray(e))for(var k=0,E=e.length;k<E;k++){var T=e[k];S.shapes.push(T.uuid)}else S.shapes.push(e.uuid);S.options=Object.assign({},_),void 0!==_.extrudePath&&(S.options.extrudePath=_.extrudePath.toJSON());return S}(this.parameters.shapes,this.parameters.options,e)}}],[{key:"fromJSON",value:function(e,_){for(var S=[],k=0,E=e.shapes.length;k<E;k++){var T=_[e.shapes[k]];S.push(T)}var M=e.options.extrudePath;return void 0!==M&&(e.options.extrudePath=(new lg[M.type]).fromJSON(M)),new ExtrudeGeometry(S,e.options)}}])}(gf),gg={generateTopUV:function(e,_,S,k,E){var T=_[3*S],M=_[3*S+1],I=_[3*k],R=_[3*k+1],O=_[3*E],D=_[3*E+1];return[new $c(T,M),new $c(I,R),new $c(O,D)]},generateSideWallUV:function(e,_,S,k,E,T){var M=_[3*S],I=_[3*S+1],R=_[3*S+2],O=_[3*k],D=_[3*k+1],L=_[3*k+2],U=_[3*E],B=_[3*E+1],z=_[3*E+2],G=_[3*T],j=_[3*T+1],V=_[3*T+2];return Math.abs(I-D)<Math.abs(M-O)?[new $c(M,1-R),new $c(O,1-L),new $c(U,1-z),new $c(G,1-V)]:[new $c(I,1-R),new $c(D,1-L),new $c(B,1-z),new $c(j,1-V)]}};var mg=function(e){function IcosahedronGeometry(){var e,_=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;_classCallCheck3(this,IcosahedronGeometry);var k=(1+Math.sqrt(5))/2;return(e=_callSuper(this,IcosahedronGeometry,[[-1,k,0,1,k,0,-1,-k,0,1,-k,0,0,-1,k,0,1,k,0,-1,-k,0,1,-k,k,0,-1,k,0,1,-k,0,-1,-k,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],_,S])).type="IcosahedronGeometry",e.parameters={radius:_,detail:S},e}return _inherits(IcosahedronGeometry,e),_createClass3(IcosahedronGeometry,null,[{key:"fromJSON",value:function(e){return new IcosahedronGeometry(e.radius,e.detail)}}])}(Gv),yg=function(e){function LatheGeometry(){var e,_=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[new $c(0,-.5),new $c(.5,0),new $c(0,.5)],S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,k=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,E=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2*Math.PI;_classCallCheck3(this,LatheGeometry),(e=_callSuper(this,LatheGeometry)).type="LatheGeometry",e.parameters={points:_,segments:S,phiStart:k,phiLength:E},S=Math.floor(S),E=clamp$1(E,0,2*Math.PI);for(var T=[],M=[],I=[],R=[],O=[],D=1/S,L=new th,U=new $c,B=new th,z=new th,G=new th,j=0,V=0,H=0;H<=_.length-1;H++)switch(H){case 0:j=_[H+1].x-_[H].x,V=_[H+1].y-_[H].y,B.x=1*V,B.y=-j,B.z=0*V,G.copy(B),B.normalize(),R.push(B.x,B.y,B.z);break;case _.length-1:R.push(G.x,G.y,G.z);break;default:j=_[H+1].x-_[H].x,V=_[H+1].y-_[H].y,B.x=1*V,B.y=-j,B.z=0*V,z.copy(B),B.x+=G.x,B.y+=G.y,B.z+=G.z,B.normalize(),R.push(B.x,B.y,B.z),G.copy(z)}for(var W=0;W<=S;W++)for(var q=k+W*D*E,X=Math.sin(q),Y=Math.cos(q),K=0;K<=_.length-1;K++){L.x=_[K].x*X,L.y=_[K].y,L.z=_[K].x*Y,M.push(L.x,L.y,L.z),U.x=W/S,U.y=K/(_.length-1),I.push(U.x,U.y);var J=R[3*K+0]*X,Q=R[3*K+1],Z=R[3*K+0]*Y;O.push(J,Q,Z)}for(var $=0;$<S;$++)for(var ee=0;ee<_.length-1;ee++){var te=ee+$*_.length,re=te,ne=te+_.length,ie=te+_.length+1,ae=te+1;T.push(re,ne,ae),T.push(ie,ae,ne)}return e.setIndex(T),e.setAttribute("position",new uf(M,3)),e.setAttribute("uv",new uf(I,2)),e.setAttribute("normal",new uf(O,3)),e}return _inherits(LatheGeometry,e),_createClass3(LatheGeometry,[{key:"copy",value:function(e){return _superPropGet(LatheGeometry,"copy",this,3)([e]),this.parameters=Object.assign({},e.parameters),this}}],[{key:"fromJSON",value:function(e){return new LatheGeometry(e.points,e.segments,e.phiStart,e.phiLength)}}])}(gf),_g=function(e){function OctahedronGeometry(){var e,_=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;_classCallCheck3(this,OctahedronGeometry);return(e=_callSuper(this,OctahedronGeometry,[[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],_,S])).type="OctahedronGeometry",e.parameters={radius:_,detail:S},e}return _inherits(OctahedronGeometry,e),_createClass3(OctahedronGeometry,null,[{key:"fromJSON",value:function(e){return new OctahedronGeometry(e.radius,e.detail)}}])}(Gv),bg=function(e){function PlaneGeometry(){var e,_=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,k=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,E=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;_classCallCheck3(this,PlaneGeometry),(e=_callSuper(this,PlaneGeometry)).type="PlaneGeometry",e.parameters={width:_,height:S,widthSegments:k,heightSegments:E};for(var T=_/2,M=S/2,I=Math.floor(k),R=Math.floor(E),O=I+1,D=R+1,L=_/I,U=S/R,B=[],z=[],G=[],j=[],V=0;V<D;V++)for(var H=V*U-M,W=0;W<O;W++){var q=W*L-T;z.push(q,-H,0),G.push(0,0,1),j.push(W/I),j.push(1-V/R)}for(var X=0;X<R;X++)for(var Y=0;Y<I;Y++){var K=Y+O*X,J=Y+O*(X+1),Q=Y+1+O*(X+1),Z=Y+1+O*X;B.push(K,J,Z),B.push(J,Q,Z)}return e.setIndex(B),e.setAttribute("position",new uf(z,3)),e.setAttribute("normal",new uf(G,3)),e.setAttribute("uv",new uf(j,2)),e}return _inherits(PlaneGeometry,e),_createClass3(PlaneGeometry,[{key:"copy",value:function(e){return _superPropGet(PlaneGeometry,"copy",this,3)([e]),this.parameters=Object.assign({},e.parameters),this}}],[{key:"fromJSON",value:function(e){return new PlaneGeometry(e.width,e.height,e.widthSegments,e.heightSegments)}}])}(gf);D("be",bg);var Sg=function(e){function RingGeometry(){var e,_=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,k=arguments.length>2&&void 0!==arguments[2]?arguments[2]:32,E=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,T=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,M=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI;_classCallCheck3(this,RingGeometry),(e=_callSuper(this,RingGeometry)).type="RingGeometry",e.parameters={innerRadius:_,outerRadius:S,thetaSegments:k,phiSegments:E,thetaStart:T,thetaLength:M},k=Math.max(3,k);for(var I=[],R=[],O=[],D=[],L=_,U=(S-_)/(E=Math.max(1,E)),B=new th,z=new $c,G=0;G<=E;G++){for(var j=0;j<=k;j++){var V=T+j/k*M;B.x=L*Math.cos(V),B.y=L*Math.sin(V),R.push(B.x,B.y,B.z),O.push(0,0,1),z.x=(B.x/S+1)/2,z.y=(B.y/S+1)/2,D.push(z.x,z.y)}L+=U}for(var H=0;H<E;H++)for(var W=H*(k+1),q=0;q<k;q++){var X=q+W,Y=X,K=X+k+1,J=X+k+2,Q=X+1;I.push(Y,K,Q),I.push(K,J,Q)}return e.setIndex(I),e.setAttribute("position",new uf(R,3)),e.setAttribute("normal",new uf(O,3)),e.setAttribute("uv",new uf(D,2)),e}return _inherits(RingGeometry,e),_createClass3(RingGeometry,[{key:"copy",value:function(e){return _superPropGet(RingGeometry,"copy",this,3)([e]),this.parameters=Object.assign({},e.parameters),this}}],[{key:"fromJSON",value:function(e){return new RingGeometry(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}])}(gf),wg=function(e){function ShapeGeometry(){var e,_=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new dg([new $c(0,.5),new $c(-.5,-.5),new $c(.5,-.5)]),S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;_classCallCheck3(this,ShapeGeometry),(e=_callSuper(this,ShapeGeometry)).type="ShapeGeometry",e.parameters={shapes:_,curveSegments:S};var k=[],E=[],T=[],M=[],I=0,R=0;if(!1===Array.isArray(_))addShape(_);else for(var O=0;O<_.length;O++)addShape(_[O]),e.addGroup(I,R,O),I+=R,R=0;function addShape(e){var _=E.length/3,I=e.extractPoints(S),O=I.shape,D=I.holes;!1===pg.isClockWise(O)&&(O=O.reverse());for(var L=0,U=D.length;L<U;L++){var B=D[L];!0===pg.isClockWise(B)&&(D[L]=B.reverse())}for(var z=pg.triangulateShape(O,D),G=0,j=D.length;G<j;G++){var V=D[G];O=O.concat(V)}for(var H=0,W=O.length;H<W;H++){var q=O[H];E.push(q.x,q.y,0),T.push(0,0,1),M.push(q.x,q.y)}for(var X=0,Y=z.length;X<Y;X++){var K=z[X],J=K[0]+_,Q=K[1]+_,Z=K[2]+_;k.push(J,Q,Z),R+=3}}return e.setIndex(k),e.setAttribute("position",new uf(E,3)),e.setAttribute("normal",new uf(T,3)),e.setAttribute("uv",new uf(M,2)),e}return _inherits(ShapeGeometry,e),_createClass3(ShapeGeometry,[{key:"copy",value:function(e){return _superPropGet(ShapeGeometry,"copy",this,3)([e]),this.parameters=Object.assign({},e.parameters),this}},{key:"toJSON",value:function(){var e=_superPropGet(ShapeGeometry,"toJSON",this,3)([]);return function(e,_){if(_.shapes=[],Array.isArray(e))for(var S=0,k=e.length;S<k;S++){var E=e[S];_.shapes.push(E.uuid)}else _.shapes.push(e.uuid);return _}(this.parameters.shapes,e)}}],[{key:"fromJSON",value:function(e,_){for(var S=[],k=0,E=e.shapes.length;k<E;k++){var T=_[e.shapes[k]];S.push(T)}return new ShapeGeometry(S,e.curveSegments)}}])}(gf);var xg=function(e){function SphereGeometry(){var e,_=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,k=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16,E=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,T=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI,M=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,I=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Math.PI;_classCallCheck3(this,SphereGeometry),(e=_callSuper(this,SphereGeometry)).type="SphereGeometry",e.parameters={radius:_,widthSegments:S,heightSegments:k,phiStart:E,phiLength:T,thetaStart:M,thetaLength:I},S=Math.max(3,Math.floor(S)),k=Math.max(2,Math.floor(k));for(var R=Math.min(M+I,Math.PI),O=0,D=[],L=new th,U=new th,B=[],z=[],G=[],j=[],V=0;V<=k;V++){var H=[],W=V/k,q=0;0===V&&0===M?q=.5/S:V===k&&R===Math.PI&&(q=-.5/S);for(var X=0;X<=S;X++){var Y=X/S;L.x=-_*Math.cos(E+Y*T)*Math.sin(M+W*I),L.y=_*Math.cos(M+W*I),L.z=_*Math.sin(E+Y*T)*Math.sin(M+W*I),z.push(L.x,L.y,L.z),U.copy(L).normalize(),G.push(U.x,U.y,U.z),j.push(Y+q,1-W),H.push(O++)}D.push(H)}for(var K=0;K<k;K++)for(var J=0;J<S;J++){var Q=D[K][J+1],Z=D[K][J],$=D[K+1][J],ee=D[K+1][J+1];(0!==K||M>0)&&B.push(Q,Z,ee),(K!==k-1||R<Math.PI)&&B.push(Z,$,ee)}return e.setIndex(B),e.setAttribute("position",new uf(z,3)),e.setAttribute("normal",new uf(G,3)),e.setAttribute("uv",new uf(j,2)),e}return _inherits(SphereGeometry,e),_createClass3(SphereGeometry,[{key:"copy",value:function(e){return _superPropGet(SphereGeometry,"copy",this,3)([e]),this.parameters=Object.assign({},e.parameters),this}}],[{key:"fromJSON",value:function(e){return new SphereGeometry(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}])}(gf);D("bc",xg);var kg=function(e){function TetrahedronGeometry(){var e,_=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;_classCallCheck3(this,TetrahedronGeometry);return(e=_callSuper(this,TetrahedronGeometry,[[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],_,S])).type="TetrahedronGeometry",e.parameters={radius:_,detail:S},e}return _inherits(TetrahedronGeometry,e),_createClass3(TetrahedronGeometry,null,[{key:"fromJSON",value:function(e){return new TetrahedronGeometry(e.radius,e.detail)}}])}(Gv),Cg=function(e){function TorusGeometry(){var e,_=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4,k=arguments.length>2&&void 0!==arguments[2]?arguments[2]:12,E=arguments.length>3&&void 0!==arguments[3]?arguments[3]:48,T=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI;_classCallCheck3(this,TorusGeometry),(e=_callSuper(this,TorusGeometry)).type="TorusGeometry",e.parameters={radius:_,tube:S,radialSegments:k,tubularSegments:E,arc:T},k=Math.floor(k),E=Math.floor(E);for(var M=[],I=[],R=[],O=[],D=new th,L=new th,U=new th,B=0;B<=k;B++)for(var z=0;z<=E;z++){var G=z/E*T,j=B/k*Math.PI*2;L.x=(_+S*Math.cos(j))*Math.cos(G),L.y=(_+S*Math.cos(j))*Math.sin(G),L.z=S*Math.sin(j),I.push(L.x,L.y,L.z),D.x=_*Math.cos(G),D.y=_*Math.sin(G),U.subVectors(L,D).normalize(),R.push(U.x,U.y,U.z),O.push(z/E),O.push(B/k)}for(var V=1;V<=k;V++)for(var H=1;H<=E;H++){var W=(E+1)*V+H-1,q=(E+1)*(V-1)+H-1,X=(E+1)*(V-1)+H,Y=(E+1)*V+H;M.push(W,q,Y),M.push(q,X,Y)}return e.setIndex(M),e.setAttribute("position",new uf(I,3)),e.setAttribute("normal",new uf(R,3)),e.setAttribute("uv",new uf(O,2)),e}return _inherits(TorusGeometry,e),_createClass3(TorusGeometry,[{key:"copy",value:function(e){return _superPropGet(TorusGeometry,"copy",this,3)([e]),this.parameters=Object.assign({},e.parameters),this}}],[{key:"fromJSON",value:function(e){return new TorusGeometry(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}])}(gf);D("bb",Cg);var Ag=function(e){function TorusKnotGeometry(){var e,_=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4,k=arguments.length>2&&void 0!==arguments[2]?arguments[2]:64,E=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,T=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,M=arguments.length>5&&void 0!==arguments[5]?arguments[5]:3;_classCallCheck3(this,TorusKnotGeometry),(e=_callSuper(this,TorusKnotGeometry)).type="TorusKnotGeometry",e.parameters={radius:_,tube:S,tubularSegments:k,radialSegments:E,p:T,q:M},k=Math.floor(k),E=Math.floor(E);for(var I=[],R=[],O=[],D=[],L=new th,U=new th,B=new th,z=new th,G=new th,j=new th,V=new th,H=0;H<=k;++H){var W=H/k*T*Math.PI*2;calculatePositionOnCurve(W,T,M,_,B),calculatePositionOnCurve(W+.01,T,M,_,z),j.subVectors(z,B),V.addVectors(z,B),G.crossVectors(j,V),V.crossVectors(G,j),G.normalize(),V.normalize();for(var q=0;q<=E;++q){var X=q/E*Math.PI*2,Y=-S*Math.cos(X),K=S*Math.sin(X);L.x=B.x+(Y*V.x+K*G.x),L.y=B.y+(Y*V.y+K*G.y),L.z=B.z+(Y*V.z+K*G.z),R.push(L.x,L.y,L.z),U.subVectors(L,B).normalize(),O.push(U.x,U.y,U.z),D.push(H/k),D.push(q/E)}}for(var J=1;J<=k;J++)for(var Q=1;Q<=E;Q++){var Z=(E+1)*(J-1)+(Q-1),$=(E+1)*J+(Q-1),ee=(E+1)*J+Q,te=(E+1)*(J-1)+Q;I.push(Z,$,te),I.push($,ee,te)}function calculatePositionOnCurve(e,_,S,k,E){var T=Math.cos(e),M=Math.sin(e),I=S/_*e,R=Math.cos(I);E.x=k*(2+R)*.5*T,E.y=k*(2+R)*M*.5,E.z=k*Math.sin(I)*.5}return e.setIndex(I),e.setAttribute("position",new uf(R,3)),e.setAttribute("normal",new uf(O,3)),e.setAttribute("uv",new uf(D,2)),e}return _inherits(TorusKnotGeometry,e),_createClass3(TorusKnotGeometry,[{key:"copy",value:function(e){return _superPropGet(TorusKnotGeometry,"copy",this,3)([e]),this.parameters=Object.assign({},e.parameters),this}}],[{key:"fromJSON",value:function(e){return new TorusKnotGeometry(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}])}(gf),Eg=function(e){function TubeGeometry(){var e,_=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new sg(new th(-1,-1,0),new th(-1,1,0),new th(1,1,0)),S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:64,k=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,E=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,T=arguments.length>4&&void 0!==arguments[4]&&arguments[4];_classCallCheck3(this,TubeGeometry),(e=_callSuper(this,TubeGeometry)).type="TubeGeometry",e.parameters={path:_,tubularSegments:S,radius:k,radialSegments:E,closed:T};var M=_.computeFrenetFrames(S,T);e.tangents=M.tangents,e.normals=M.normals,e.binormals=M.binormals;var I=new th,R=new th,O=new $c,D=new th,L=[],U=[],B=[],z=[];function generateSegment(e){D=_.getPointAt(e/S,D);for(var T=M.normals[e],O=M.binormals[e],B=0;B<=E;B++){var z=B/E*Math.PI*2,G=Math.sin(z),j=-Math.cos(z);R.x=j*T.x+G*O.x,R.y=j*T.y+G*O.y,R.z=j*T.z+G*O.z,R.normalize(),U.push(R.x,R.y,R.z),I.x=D.x+k*R.x,I.y=D.y+k*R.y,I.z=D.z+k*R.z,L.push(I.x,I.y,I.z)}}return function(){for(var e=0;e<S;e++)generateSegment(e);generateSegment(!1===T?S:0),function(){for(var e=0;e<=S;e++)for(var _=0;_<=E;_++)O.x=e/S,O.y=_/E,B.push(O.x,O.y)}(),function(){for(var e=1;e<=S;e++)for(var _=1;_<=E;_++){var k=(E+1)*(e-1)+(_-1),T=(E+1)*e+(_-1),M=(E+1)*e+_,I=(E+1)*(e-1)+_;z.push(k,T,I),z.push(T,M,I)}}()}(),e.setIndex(z),e.setAttribute("position",new uf(L,3)),e.setAttribute("normal",new uf(U,3)),e.setAttribute("uv",new uf(B,2)),e}return _inherits(TubeGeometry,e),_createClass3(TubeGeometry,[{key:"copy",value:function(e){return _superPropGet(TubeGeometry,"copy",this,3)([e]),this.parameters=Object.assign({},e.parameters),this}},{key:"toJSON",value:function(){var e=_superPropGet(TubeGeometry,"toJSON",this,3)([]);return e.path=this.parameters.path.toJSON(),e}}],[{key:"fromJSON",value:function(e){return new TubeGeometry((new lg[e.path.type]).fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}])}(gf);D("ce",Eg);var Tg=function(e){function WireframeGeometry(){var e,_=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(_classCallCheck3(this,WireframeGeometry),(e=_callSuper(this,WireframeGeometry)).type="WireframeGeometry",e.parameters={geometry:_},null!==_){var S=[],k=new Set,E=new th,T=new th;if(null!==_.index){var M=_.attributes.position,I=_.index,R=_.groups;0===R.length&&(R=[{start:0,count:I.count,materialIndex:0}]);for(var O=0,D=R.length;O<D;++O)for(var L=R[O],U=L.start,B=U,z=U+L.count;B<z;B+=3)for(var G=0;G<3;G++){var j=I.getX(B+G),V=I.getX(B+(G+1)%3);E.fromBufferAttribute(M,j),T.fromBufferAttribute(M,V),!0===isUniqueEdge(E,T,k)&&(S.push(E.x,E.y,E.z),S.push(T.x,T.y,T.z))}}else for(var H=_.attributes.position,W=0,q=H.count/3;W<q;W++)for(var X=0;X<3;X++){var Y=3*W+X,K=3*W+(X+1)%3;E.fromBufferAttribute(H,Y),T.fromBufferAttribute(H,K),!0===isUniqueEdge(E,T,k)&&(S.push(E.x,E.y,E.z),S.push(T.x,T.y,T.z))}e.setAttribute("position",new uf(S,3))}return e}return _inherits(WireframeGeometry,e),_createClass3(WireframeGeometry,[{key:"copy",value:function(e){return _superPropGet(WireframeGeometry,"copy",this,3)([e]),this.parameters=Object.assign({},e.parameters),this}}])}(gf);function isUniqueEdge(e,_,S){var k="".concat(e.x,",").concat(e.y,",").concat(e.z,"-").concat(_.x,",").concat(_.y,",").concat(_.z),E="".concat(_.x,",").concat(_.y,",").concat(_.z,"-").concat(e.x,",").concat(e.y,",").concat(e.z);return!0!==S.has(k)&&!0!==S.has(E)&&(S.add(k),S.add(E),!0)}var Mg=Object.freeze({__proto__:null,BoxGeometry:Mf,CapsuleGeometry:Uv,CircleGeometry:Bv,ConeGeometry:zv,CylinderGeometry:Nv,DodecahedronGeometry:jv,EdgesGeometry:Xv,ExtrudeGeometry:vg,IcosahedronGeometry:mg,LatheGeometry:yg,OctahedronGeometry:_g,PlaneGeometry:bg,PolyhedronGeometry:Gv,RingGeometry:Sg,ShapeGeometry:wg,SphereGeometry:xg,TetrahedronGeometry:kg,TorusGeometry:Cg,TorusKnotGeometry:Ag,TubeGeometry:Eg,WireframeGeometry:Tg}),Ig=function(e){function ShadowMaterial(e){var _;return _classCallCheck3(this,ShadowMaterial),(_=_callSuper(this,ShadowMaterial)).isShadowMaterial=!0,_.type="ShadowMaterial",_.color=new jd(0),_.transparent=!0,_.fog=!0,_.setValues(e),_}return _inherits(ShadowMaterial,e),_createClass3(ShadowMaterial,[{key:"copy",value:function(e){return _superPropGet(ShadowMaterial,"copy",this,3)([e]),this.color.copy(e.color),this.fog=e.fog,this}}])}(Wd),Rg=function(e){function RawShaderMaterial(e){var _;return _classCallCheck3(this,RawShaderMaterial),(_=_callSuper(this,RawShaderMaterial,[e])).isRawShaderMaterial=!0,_.type="RawShaderMaterial",_}return _inherits(RawShaderMaterial,e),_createClass3(RawShaderMaterial)}(Rf),Pg=function(e){function MeshStandardMaterial(e){var _;return _classCallCheck3(this,MeshStandardMaterial),(_=_callSuper(this,MeshStandardMaterial)).isMeshStandardMaterial=!0,_.type="MeshStandardMaterial",_.defines={STANDARD:""},_.color=new jd(16777215),_.roughness=1,_.metalness=0,_.map=null,_.lightMap=null,_.lightMapIntensity=1,_.aoMap=null,_.aoMapIntensity=1,_.emissive=new jd(0),_.emissiveIntensity=1,_.emissiveMap=null,_.bumpMap=null,_.bumpScale=1,_.normalMap=null,_.normalMapType=0,_.normalScale=new $c(1,1),_.displacementMap=null,_.displacementScale=1,_.displacementBias=0,_.roughnessMap=null,_.metalnessMap=null,_.alphaMap=null,_.envMap=null,_.envMapRotation=new sd,_.envMapIntensity=1,_.wireframe=!1,_.wireframeLinewidth=1,_.wireframeLinecap="round",_.wireframeLinejoin="round",_.flatShading=!1,_.fog=!0,_.setValues(e),_}return _inherits(MeshStandardMaterial,e),_createClass3(MeshStandardMaterial,[{key:"copy",value:function(e){return _superPropGet(MeshStandardMaterial,"copy",this,3)([e]),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}])}(Wd);D("bg",Pg);var Og=function(e){function MeshPhysicalMaterial(e){var _;return _classCallCheck3(this,MeshPhysicalMaterial),(_=_callSuper(this,MeshPhysicalMaterial)).isMeshPhysicalMaterial=!0,_.defines={STANDARD:"",PHYSICAL:""},_.type="MeshPhysicalMaterial",_.anisotropyRotation=0,_.anisotropyMap=null,_.clearcoatMap=null,_.clearcoatRoughness=0,_.clearcoatRoughnessMap=null,_.clearcoatNormalScale=new $c(1,1),_.clearcoatNormalMap=null,_.ior=1.5,Object.defineProperty(_,"reflectivity",{get:function(){return clamp$1(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),_.iridescenceMap=null,_.iridescenceIOR=1.3,_.iridescenceThicknessRange=[100,400],_.iridescenceThicknessMap=null,_.sheenColor=new jd(0),_.sheenColorMap=null,_.sheenRoughness=1,_.sheenRoughnessMap=null,_.transmissionMap=null,_.thickness=0,_.thicknessMap=null,_.attenuationDistance=1/0,_.attenuationColor=new jd(1,1,1),_.specularIntensity=1,_.specularIntensityMap=null,_.specularColor=new jd(1,1,1),_.specularColorMap=null,_._anisotropy=0,_._clearcoat=0,_._dispersion=0,_._iridescence=0,_._sheen=0,_._transmission=0,_.setValues(e),_}return _inherits(MeshPhysicalMaterial,e),_createClass3(MeshPhysicalMaterial,[{key:"anisotropy",get:function(){return this._anisotropy},set:function(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}},{key:"clearcoat",get:function(){return this._clearcoat},set:function(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}},{key:"iridescence",get:function(){return this._iridescence},set:function(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}},{key:"dispersion",get:function(){return this._dispersion},set:function(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}},{key:"sheen",get:function(){return this._sheen},set:function(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}},{key:"transmission",get:function(){return this._transmission},set:function(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}},{key:"copy",value:function(e){return _superPropGet(MeshPhysicalMaterial,"copy",this,3)([e]),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=_toConsumableArray3(e.iridescenceThicknessRange),this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}])}(Pg),Dg=function(e){function MeshPhongMaterial(e){var _;return _classCallCheck3(this,MeshPhongMaterial),(_=_callSuper(this,MeshPhongMaterial)).isMeshPhongMaterial=!0,_.type="MeshPhongMaterial",_.color=new jd(16777215),_.specular=new jd(1118481),_.shininess=30,_.map=null,_.lightMap=null,_.lightMapIntensity=1,_.aoMap=null,_.aoMapIntensity=1,_.emissive=new jd(0),_.emissiveIntensity=1,_.emissiveMap=null,_.bumpMap=null,_.bumpScale=1,_.normalMap=null,_.normalMapType=0,_.normalScale=new $c(1,1),_.displacementMap=null,_.displacementScale=1,_.displacementBias=0,_.specularMap=null,_.alphaMap=null,_.envMap=null,_.envMapRotation=new sd,_.combine=0,_.reflectivity=1,_.refractionRatio=.98,_.wireframe=!1,_.wireframeLinewidth=1,_.wireframeLinecap="round",_.wireframeLinejoin="round",_.flatShading=!1,_.fog=!0,_.setValues(e),_}return _inherits(MeshPhongMaterial,e),_createClass3(MeshPhongMaterial,[{key:"copy",value:function(e){return _superPropGet(MeshPhongMaterial,"copy",this,3)([e]),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}])}(Wd),Lg=function(e){function MeshToonMaterial(e){var _;return _classCallCheck3(this,MeshToonMaterial),(_=_callSuper(this,MeshToonMaterial)).isMeshToonMaterial=!0,_.defines={TOON:""},_.type="MeshToonMaterial",_.color=new jd(16777215),_.map=null,_.gradientMap=null,_.lightMap=null,_.lightMapIntensity=1,_.aoMap=null,_.aoMapIntensity=1,_.emissive=new jd(0),_.emissiveIntensity=1,_.emissiveMap=null,_.bumpMap=null,_.bumpScale=1,_.normalMap=null,_.normalMapType=0,_.normalScale=new $c(1,1),_.displacementMap=null,_.displacementScale=1,_.displacementBias=0,_.alphaMap=null,_.wireframe=!1,_.wireframeLinewidth=1,_.wireframeLinecap="round",_.wireframeLinejoin="round",_.fog=!0,_.setValues(e),_}return _inherits(MeshToonMaterial,e),_createClass3(MeshToonMaterial,[{key:"copy",value:function(e){return _superPropGet(MeshToonMaterial,"copy",this,3)([e]),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}])}(Wd),Fg=function(e){function MeshNormalMaterial(e){var _;return _classCallCheck3(this,MeshNormalMaterial),(_=_callSuper(this,MeshNormalMaterial)).isMeshNormalMaterial=!0,_.type="MeshNormalMaterial",_.bumpMap=null,_.bumpScale=1,_.normalMap=null,_.normalMapType=0,_.normalScale=new $c(1,1),_.displacementMap=null,_.displacementScale=1,_.displacementBias=0,_.wireframe=!1,_.wireframeLinewidth=1,_.flatShading=!1,_.setValues(e),_}return _inherits(MeshNormalMaterial,e),_createClass3(MeshNormalMaterial,[{key:"copy",value:function(e){return _superPropGet(MeshNormalMaterial,"copy",this,3)([e]),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}])}(Wd),Ug=function(e){function MeshLambertMaterial(e){var _;return _classCallCheck3(this,MeshLambertMaterial),(_=_callSuper(this,MeshLambertMaterial)).isMeshLambertMaterial=!0,_.type="MeshLambertMaterial",_.color=new jd(16777215),_.map=null,_.lightMap=null,_.lightMapIntensity=1,_.aoMap=null,_.aoMapIntensity=1,_.emissive=new jd(0),_.emissiveIntensity=1,_.emissiveMap=null,_.bumpMap=null,_.bumpScale=1,_.normalMap=null,_.normalMapType=0,_.normalScale=new $c(1,1),_.displacementMap=null,_.displacementScale=1,_.displacementBias=0,_.specularMap=null,_.alphaMap=null,_.envMap=null,_.envMapRotation=new sd,_.combine=0,_.reflectivity=1,_.refractionRatio=.98,_.wireframe=!1,_.wireframeLinewidth=1,_.wireframeLinecap="round",_.wireframeLinejoin="round",_.flatShading=!1,_.fog=!0,_.setValues(e),_}return _inherits(MeshLambertMaterial,e),_createClass3(MeshLambertMaterial,[{key:"copy",value:function(e){return _superPropGet(MeshLambertMaterial,"copy",this,3)([e]),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}])}(Wd),Bg=function(e){function MeshDepthMaterial(e){var _;return _classCallCheck3(this,MeshDepthMaterial),(_=_callSuper(this,MeshDepthMaterial)).isMeshDepthMaterial=!0,_.type="MeshDepthMaterial",_.depthPacking=Fc,_.map=null,_.alphaMap=null,_.displacementMap=null,_.displacementScale=1,_.displacementBias=0,_.wireframe=!1,_.wireframeLinewidth=1,_.setValues(e),_}return _inherits(MeshDepthMaterial,e),_createClass3(MeshDepthMaterial,[{key:"copy",value:function(e){return _superPropGet(MeshDepthMaterial,"copy",this,3)([e]),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}])}(Wd),Ng=function(e){function MeshDistanceMaterial(e){var _;return _classCallCheck3(this,MeshDistanceMaterial),(_=_callSuper(this,MeshDistanceMaterial)).isMeshDistanceMaterial=!0,_.type="MeshDistanceMaterial",_.map=null,_.alphaMap=null,_.displacementMap=null,_.displacementScale=1,_.displacementBias=0,_.setValues(e),_}return _inherits(MeshDistanceMaterial,e),_createClass3(MeshDistanceMaterial,[{key:"copy",value:function(e){return _superPropGet(MeshDistanceMaterial,"copy",this,3)([e]),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}])}(Wd),zg=function(e){function MeshMatcapMaterial(e){var _;return _classCallCheck3(this,MeshMatcapMaterial),(_=_callSuper(this,MeshMatcapMaterial)).isMeshMatcapMaterial=!0,_.defines={MATCAP:""},_.type="MeshMatcapMaterial",_.color=new jd(16777215),_.matcap=null,_.map=null,_.bumpMap=null,_.bumpScale=1,_.normalMap=null,_.normalMapType=0,_.normalScale=new $c(1,1),_.displacementMap=null,_.displacementScale=1,_.displacementBias=0,_.alphaMap=null,_.flatShading=!1,_.fog=!0,_.setValues(e),_}return _inherits(MeshMatcapMaterial,e),_createClass3(MeshMatcapMaterial,[{key:"copy",value:function(e){return _superPropGet(MeshMatcapMaterial,"copy",this,3)([e]),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}])}(Wd),Gg=function(e){function LineDashedMaterial(e){var _;return _classCallCheck3(this,LineDashedMaterial),(_=_callSuper(this,LineDashedMaterial)).isLineDashedMaterial=!0,_.type="LineDashedMaterial",_.scale=1,_.dashSize=3,_.gapSize=1,_.setValues(e),_}return _inherits(LineDashedMaterial,e),_createClass3(LineDashedMaterial,[{key:"copy",value:function(e){return _superPropGet(LineDashedMaterial,"copy",this,3)([e]),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}])}(lv);function _convertArray(e,_){return e&&e.constructor!==_?"number"==typeof _.BYTES_PER_ELEMENT?new _(e):Array.prototype.slice.call(e):e}function isTypedArray$1(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function _getKeyframeOrder(e){for(var _=e.length,S=new Array(_),k=0;k!==_;++k)S[k]=k;return S.sort(function(_,S){return e[_]-e[S]}),S}function _sortedArray(e,_,S){for(var k=e.length,E=new e.constructor(k),T=0,M=0;M!==k;++T)for(var I=S[T]*_,R=0;R!==_;++R)E[M++]=e[I+R];return E}function _flattenJSON(e,_,S,k){for(var E=1,T=e[0];void 0!==T&&void 0===T[k];)T=e[E++];if(void 0!==T){var M=T[k];if(void 0!==M)if(Array.isArray(M))do{void 0!==(M=T[k])&&(_.push(T.time),S.push.apply(S,_toConsumableArray3(M))),T=e[E++]}while(void 0!==T);else if(void 0!==M.toArray)do{void 0!==(M=T[k])&&(_.push(T.time),M.toArray(S,S.length)),T=e[E++]}while(void 0!==T);else do{void 0!==(M=T[k])&&(_.push(T.time),S.push(M)),T=e[E++]}while(void 0!==T)}}var jg=function(){return _createClass3(function AnimationUtils(){_classCallCheck3(this,AnimationUtils)},null,[{key:"convertArray",value:function(e,_){return _convertArray(e,_)}},{key:"isTypedArray",value:function(e){return isTypedArray$1(e)}},{key:"getKeyframeOrder",value:function(e){return _getKeyframeOrder(e)}},{key:"sortedArray",value:function(e,_,S){return _sortedArray(e,_,S)}},{key:"flattenJSON",value:function(e,_,S,k){_flattenJSON(e,_,S,k)}},{key:"subclip",value:function(e,_,S,k){return function(e,_,S,k){var E=arguments.length>4&&void 0!==arguments[4]?arguments[4]:30,T=e.clone();T.name=_;for(var M=[],I=0;I<T.tracks.length;++I){for(var R=T.tracks[I],O=R.getValueSize(),D=[],L=[],U=0;U<R.times.length;++U){var B=R.times[U]*E;if(!(B<S||B>=k)){D.push(R.times[U]);for(var z=0;z<O;++z)L.push(R.values[U*O+z])}}0!==D.length&&(R.times=_convertArray(D,R.times.constructor),R.values=_convertArray(L,R.values.constructor),M.push(R))}T.tracks=M;for(var G=1/0,j=0;j<T.tracks.length;++j)G>T.tracks[j].times[0]&&(G=T.tracks[j].times[0]);for(var V=0;V<T.tracks.length;++V)T.tracks[V].shift(-1*G);return T.resetDuration(),T}(e,_,S,k,arguments.length>4&&void 0!==arguments[4]?arguments[4]:30)}},{key:"makeClipAdditive",value:function(e){return function(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,k=arguments.length>3&&void 0!==arguments[3]?arguments[3]:30;k<=0&&(k=30);for(var E=S.tracks.length,T=_/k,_loop9=function(){var _=S.tracks[M],k=_.ValueTypeName;if("bool"===k||"string"===k)return 0;var E=e.tracks.find(function(e){return e.name===_.name&&e.ValueTypeName===k});if(void 0===E)return 0;var I=0,R=_.getValueSize();_.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(I=R/3);var O=0,D=E.getValueSize();E.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(O=D/3);var L,U=_.times.length-1;if(T<=_.times[0]){var B=I,z=R-I;L=_.values.slice(B,z)}else if(T>=_.times[U]){var G=U*R+I,j=G+R-I;L=_.values.slice(G,j)}else{var V=_.createInterpolant(),H=I,W=R-I;V.evaluate(T),L=V.resultBuffer.slice(H,W)}"quaternion"===k&&(new eh).fromArray(L).normalize().conjugate().toArray(L);for(var q=E.times.length,X=0;X<q;++X){var Y=X*D+O;if("quaternion"===k)eh.multiplyQuaternionsFlat(E.values,Y,L,0,E.values,Y);else for(var K=D-2*O,J=0;J<K;++J)E.values[Y+J]-=L[J]}},M=0;M<E;++M)_loop9();return e.blendMode=Lc,e}(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,arguments.length>3&&void 0!==arguments[3]?arguments[3]:30)}}])}(),Vg=function(){return _createClass3(function Interpolant(e,_,S,k){_classCallCheck3(this,Interpolant),this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==k?k:new _.constructor(S),this.sampleValues=_,this.valueSize=S,this.settings=null,this.DefaultSettings_={}},[{key:"evaluate",value:function(e){var _=this.parameterPositions,S=this._cachedIndex,k=_[S],E=_[S-1];e:{t:{var T;r:{n:if(!(e<k)){for(var M=S+2;;){if(void 0===k){if(e<E)break n;return S=_.length,this._cachedIndex=S,this.copySampleValue_(S-1)}if(S===M)break;if(E=k,e<(k=_[++S]))break t}T=_.length;break r}if(e>=E)break e;var I=_[1];e<I&&(S=2,E=I);for(var R=S-2;;){if(void 0===E)return this._cachedIndex=0,this.copySampleValue_(0);if(S===R)break;if(k=E,e>=(E=_[--S-1]))break t}T=S,S=0}for(;S<T;){var O=S+T>>>1;e<_[O]?T=O:S=O+1}if(k=_[S],void 0===(E=_[S-1]))return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===k)return S=_.length,this._cachedIndex=S,this.copySampleValue_(S-1)}this._cachedIndex=S,this.intervalChanged_(S,E,k)}return this.interpolate_(S,E,e,k)}},{key:"getSettings_",value:function(){return this.settings||this.DefaultSettings_}},{key:"copySampleValue_",value:function(e){for(var _=this.resultBuffer,S=this.sampleValues,k=this.valueSize,E=e*k,T=0;T!==k;++T)_[T]=S[E+T];return _}},{key:"interpolate_",value:function(){throw new Error("call to abstract method")}},{key:"intervalChanged_",value:function(){}}])}(),Hg=function(e){function CubicInterpolant(e,_,S,k){var E;return _classCallCheck3(this,CubicInterpolant),(E=_callSuper(this,CubicInterpolant,[e,_,S,k]))._weightPrev=-0,E._offsetPrev=-0,E._weightNext=-0,E._offsetNext=-0,E.DefaultSettings_={endingStart:Rc,endingEnd:Rc},E}return _inherits(CubicInterpolant,e),_createClass3(CubicInterpolant,[{key:"intervalChanged_",value:function(e,_,S){var k=this.parameterPositions,E=e-2,T=e+1,M=k[E],I=k[T];if(void 0===M)switch(this.getSettings_().endingStart){case Pc:E=e,M=2*_-S;break;case Oc:M=_+k[E=k.length-2]-k[E+1];break;default:E=e,M=S}if(void 0===I)switch(this.getSettings_().endingEnd){case Pc:T=e,I=2*S-_;break;case Oc:T=1,I=S+k[1]-k[0];break;default:T=e-1,I=_}var R=.5*(S-_),O=this.valueSize;this._weightPrev=R/(_-M),this._weightNext=R/(I-S),this._offsetPrev=E*O,this._offsetNext=T*O}},{key:"interpolate_",value:function(e,_,S,k){for(var E=this.resultBuffer,T=this.sampleValues,M=this.valueSize,I=e*M,R=I-M,O=this._offsetPrev,D=this._offsetNext,L=this._weightPrev,U=this._weightNext,B=(S-_)/(k-_),z=B*B,G=z*B,j=-L*G+2*L*z-L*B,V=(1+L)*G+(-1.5-2*L)*z+(-.5+L)*B+1,H=(-1-U)*G+(1.5+U)*z+.5*B,W=U*G-U*z,q=0;q!==M;++q)E[q]=j*T[O+q]+V*T[R+q]+H*T[I+q]+W*T[D+q];return E}}])}(Vg),Wg=function(e){function LinearInterpolant(e,_,S,k){return _classCallCheck3(this,LinearInterpolant),_callSuper(this,LinearInterpolant,[e,_,S,k])}return _inherits(LinearInterpolant,e),_createClass3(LinearInterpolant,[{key:"interpolate_",value:function(e,_,S,k){for(var E=this.resultBuffer,T=this.sampleValues,M=this.valueSize,I=e*M,R=I-M,O=(S-_)/(k-_),D=1-O,L=0;L!==M;++L)E[L]=T[R+L]*D+T[I+L]*O;return E}}])}(Vg),qg=function(e){function DiscreteInterpolant(e,_,S,k){return _classCallCheck3(this,DiscreteInterpolant),_callSuper(this,DiscreteInterpolant,[e,_,S,k])}return _inherits(DiscreteInterpolant,e),_createClass3(DiscreteInterpolant,[{key:"interpolate_",value:function(e){return this.copySampleValue_(e-1)}}])}(Vg),Xg=function(){return _createClass3(function KeyframeTrack(e,_,S,k){if(_classCallCheck3(this,KeyframeTrack),void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===_||0===_.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=_convertArray(_,this.TimeBufferType),this.values=_convertArray(S,this.ValueBufferType),this.setInterpolation(k||this.DefaultInterpolation)},[{key:"InterpolantFactoryMethodDiscrete",value:function(e){return new qg(this.times,this.values,this.getValueSize(),e)}},{key:"InterpolantFactoryMethodLinear",value:function(e){return new Wg(this.times,this.values,this.getValueSize(),e)}},{key:"InterpolantFactoryMethodSmooth",value:function(e){return new Hg(this.times,this.values,this.getValueSize(),e)}},{key:"setInterpolation",value:function(e){var _;switch(e){case Tc:_=this.InterpolantFactoryMethodDiscrete;break;case Mc:_=this.InterpolantFactoryMethodLinear;break;case Ic:_=this.InterpolantFactoryMethodSmooth}if(void 0===_){var S="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(S);this.setInterpolation(this.DefaultInterpolation)}return this}return this.createInterpolant=_,this}},{key:"getInterpolation",value:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Tc;case this.InterpolantFactoryMethodLinear:return Mc;case this.InterpolantFactoryMethodSmooth:return Ic}}},{key:"getValueSize",value:function(){return this.values.length/this.times.length}},{key:"shift",value:function(e){if(0!==e)for(var _=this.times,S=0,k=_.length;S!==k;++S)_[S]+=e;return this}},{key:"scale",value:function(e){if(1!==e)for(var _=this.times,S=0,k=_.length;S!==k;++S)_[S]*=e;return this}},{key:"trim",value:function(e,_){for(var S=this.times,k=S.length,E=0,T=k-1;E!==k&&S[E]<e;)++E;for(;-1!==T&&S[T]>_;)--T;if(++T,0!==E||T!==k){E>=T&&(E=(T=Math.max(T,1))-1);var M=this.getValueSize();this.times=S.slice(E,T),this.values=this.values.slice(E*M,T*M)}return this}},{key:"validate",value:function(){var e=!0,_=this.getValueSize();_-Math.floor(_)!==0&&(e=!1);var S=this.times,k=this.values,E=S.length;0===E&&(e=!1);for(var T=null,M=0;M!==E;M++){var I=S[M];if("number"==typeof I&&isNaN(I)){e=!1;break}if(null!==T&&T>I){e=!1;break}T=I}if(void 0!==k&&isTypedArray$1(k))for(var R=0,O=k.length;R!==O;++R){var D=k[R];if(isNaN(D)){e=!1;break}}return e}},{key:"optimize",value:function(){for(var e=this.times.slice(),_=this.values.slice(),S=this.getValueSize(),k=this.getInterpolation()===Ic,E=e.length-1,T=1,M=1;M<E;++M){var I=!1,R=e[M];if(R!==e[M+1]&&(1!==M||R!==e[0]))if(k)I=!0;else for(var O=M*S,D=O-S,L=O+S,U=0;U!==S;++U){var B=_[O+U];if(B!==_[D+U]||B!==_[L+U]){I=!0;break}}if(I){if(M!==T){e[T]=e[M];for(var z=M*S,G=T*S,j=0;j!==S;++j)_[G+j]=_[z+j]}++T}}if(E>0){e[T]=e[E];for(var V=E*S,H=T*S,W=0;W!==S;++W)_[H+W]=_[V+W];++T}return T!==e.length?(this.times=e.slice(0,T),this.values=_.slice(0,T*S)):(this.times=e,this.values=_),this}},{key:"clone",value:function(){var e=this.times.slice(),_=this.values.slice(),S=new(0,this.constructor)(this.name,e,_);return S.createInterpolant=this.createInterpolant,S}}],[{key:"toJSON",value:function(e){var _,S=e.constructor;if(S.toJSON!==this.toJSON)_=S.toJSON(e);else{_={name:e.name,times:_convertArray(e.times,Array),values:_convertArray(e.values,Array)};var k=e.getInterpolation();k!==e.DefaultInterpolation&&(_.interpolation=k)}return _.type=e.ValueTypeName,_}}])}();Xg.prototype.ValueTypeName="",Xg.prototype.TimeBufferType=Float32Array,Xg.prototype.ValueBufferType=Float32Array,Xg.prototype.DefaultInterpolation=Mc;var Yg=function(e){function BooleanKeyframeTrack(e,_,S){return _classCallCheck3(this,BooleanKeyframeTrack),_callSuper(this,BooleanKeyframeTrack,[e,_,S])}return _inherits(BooleanKeyframeTrack,e),_createClass3(BooleanKeyframeTrack)}(Xg);Yg.prototype.ValueTypeName="bool",Yg.prototype.ValueBufferType=Array,Yg.prototype.DefaultInterpolation=Tc,Yg.prototype.InterpolantFactoryMethodLinear=void 0,Yg.prototype.InterpolantFactoryMethodSmooth=void 0;var Kg=function(e){function ColorKeyframeTrack(e,_,S,k){return _classCallCheck3(this,ColorKeyframeTrack),_callSuper(this,ColorKeyframeTrack,[e,_,S,k])}return _inherits(ColorKeyframeTrack,e),_createClass3(ColorKeyframeTrack)}(Xg);Kg.prototype.ValueTypeName="color";var Jg=function(e){function NumberKeyframeTrack(e,_,S,k){return _classCallCheck3(this,NumberKeyframeTrack),_callSuper(this,NumberKeyframeTrack,[e,_,S,k])}return _inherits(NumberKeyframeTrack,e),_createClass3(NumberKeyframeTrack)}(Xg);Jg.prototype.ValueTypeName="number";var Qg=function(e){function QuaternionLinearInterpolant(e,_,S,k){return _classCallCheck3(this,QuaternionLinearInterpolant),_callSuper(this,QuaternionLinearInterpolant,[e,_,S,k])}return _inherits(QuaternionLinearInterpolant,e),_createClass3(QuaternionLinearInterpolant,[{key:"interpolate_",value:function(e,_,S,k){for(var E=this.resultBuffer,T=this.sampleValues,M=this.valueSize,I=(S-_)/(k-_),R=e*M,O=R+M;R!==O;R+=4)eh.slerpFlat(E,0,T,R-M,T,R,I);return E}}])}(Vg),Zg=function(e){function QuaternionKeyframeTrack(e,_,S,k){return _classCallCheck3(this,QuaternionKeyframeTrack),_callSuper(this,QuaternionKeyframeTrack,[e,_,S,k])}return _inherits(QuaternionKeyframeTrack,e),_createClass3(QuaternionKeyframeTrack,[{key:"InterpolantFactoryMethodLinear",value:function(e){return new Qg(this.times,this.values,this.getValueSize(),e)}}])}(Xg);Zg.prototype.ValueTypeName="quaternion",Zg.prototype.InterpolantFactoryMethodSmooth=void 0;var $g=function(e){function StringKeyframeTrack(e,_,S){return _classCallCheck3(this,StringKeyframeTrack),_callSuper(this,StringKeyframeTrack,[e,_,S])}return _inherits(StringKeyframeTrack,e),_createClass3(StringKeyframeTrack)}(Xg);$g.prototype.ValueTypeName="string",$g.prototype.ValueBufferType=Array,$g.prototype.DefaultInterpolation=Tc,$g.prototype.InterpolantFactoryMethodLinear=void 0,$g.prototype.InterpolantFactoryMethodSmooth=void 0;var em=function(e){function VectorKeyframeTrack(e,_,S,k){return _classCallCheck3(this,VectorKeyframeTrack),_callSuper(this,VectorKeyframeTrack,[e,_,S,k])}return _inherits(VectorKeyframeTrack,e),_createClass3(VectorKeyframeTrack)}(Xg);em.prototype.ValueTypeName="vector";var tm=function(){return _createClass3(function AnimationClip(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],k=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Dc;_classCallCheck3(this,AnimationClip),this.name=e,this.tracks=S,this.duration=_,this.blendMode=k,this.uuid=generateUUID(),this.userData={},this.duration<0&&this.resetDuration()},[{key:"resetDuration",value:function(){for(var e=0,_=0,S=this.tracks.length;_!==S;++_){var k=this.tracks[_];e=Math.max(e,k.times[k.times.length-1])}return this.duration=e,this}},{key:"trim",value:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}},{key:"validate",value:function(){for(var e=!0,_=0;_<this.tracks.length;_++)e=e&&this.tracks[_].validate();return e}},{key:"optimize",value:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}},{key:"clone",value:function(){for(var e=[],_=0;_<this.tracks.length;_++)e.push(this.tracks[_].clone());var S=new this.constructor(this.name,this.duration,e,this.blendMode);return S.userData=JSON.parse(JSON.stringify(this.userData)),S}},{key:"toJSON",value:function(){return this.constructor.toJSON(this)}}],[{key:"parse",value:function(e){for(var _=[],S=e.tracks,k=1/(e.fps||1),E=0,T=S.length;E!==T;++E)_.push(parseKeyframeTrack(S[E]).scale(k));var M=new this(e.name,e.duration,_,e.blendMode);return M.uuid=e.uuid,M.userData=JSON.parse(e.userData||"{}"),M}},{key:"toJSON",value:function(e){for(var _=[],S=e.tracks,k={name:e.name,duration:e.duration,tracks:_,uuid:e.uuid,blendMode:e.blendMode,userData:JSON.stringify(e.userData)},E=0,T=S.length;E!==T;++E)_.push(Xg.toJSON(S[E]));return k}},{key:"CreateFromMorphTargetSequence",value:function(e,_,S,k){for(var E=_.length,T=[],M=0;M<E;M++){var I=[],R=[];I.push((M+E-1)%E,M,(M+1)%E),R.push(0,1,0);var O=_getKeyframeOrder(I);I=_sortedArray(I,1,O),R=_sortedArray(R,1,O),k||0!==I[0]||(I.push(E),R.push(R[0])),T.push(new Jg(".morphTargetInfluences["+_[M].name+"]",I,R).scale(1/S))}return new this(e,-1,T)}},{key:"findByName",value:function(e,_){var S=e;if(!Array.isArray(e)){var k=e;S=k.geometry&&k.geometry.animations||k.animations}for(var E=0;E<S.length;E++)if(S[E].name===_)return S[E];return null}},{key:"CreateClipsFromMorphTargetSequences",value:function(e,_,S){for(var k={},E=/^([\w-]*?)([\d]+)$/,T=0,M=e.length;T<M;T++){var I=e[T],R=I.name.match(E);if(R&&R.length>1){var O=R[1],D=k[O];D||(k[O]=D=[]),D.push(I)}}var L=[];for(var U in k)L.push(this.CreateFromMorphTargetSequence(U,k[U],_,S));return L}},{key:"parseAnimation",value:function(e,_){if(!e)return null;for(var addNonemptyTrack=function(e,_,S,k,E){if(0!==S.length){var T=[],M=[];_flattenJSON(S,T,M,k),0!==T.length&&E.push(new e(_,T,M))}},S=[],k=e.name||"default",E=e.fps||30,T=e.blendMode,M=e.length||-1,I=e.hierarchy||[],R=0;R<I.length;R++){var O=I[R].keys;if(O&&0!==O.length)if(O[0].morphTargets){var D={},L=void 0;for(L=0;L<O.length;L++)if(O[L].morphTargets)for(var U=0;U<O[L].morphTargets.length;U++)D[O[L].morphTargets[U]]=-1;for(var B in D){for(var z=[],G=[],j=0;j!==O[L].morphTargets.length;++j){var V=O[L];z.push(V.time),G.push(V.morphTarget===B?1:0)}S.push(new Jg(".morphTargetInfluence["+B+"]",z,G))}M=D.length*E}else{var H=".bones["+_[R].name+"]";addNonemptyTrack(em,H+".position",O,"pos",S),addNonemptyTrack(Zg,H+".quaternion",O,"rot",S),addNonemptyTrack(em,H+".scale",O,"scl",S)}}return 0===S.length?null:new this(k,M,S,T)}}])}();function parseKeyframeTrack(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var _=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Jg;case"vector":case"vector2":case"vector3":case"vector4":return em;case"color":return Kg;case"quaternion":return Zg;case"bool":case"boolean":return Yg;case"string":return $g}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){var S=[],k=[];_flattenJSON(e.keys,S,k,"value"),e.times=S,e.values=k}return void 0!==_.parse?_.parse(e):new _(e.name,e.times,e.values,e.interpolation)}var rm={enabled:!1,files:{},add:function(e,_){!1!==this.enabled&&(this.files[e]=_)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}},nm=_createClass3(function LoadingManager(e,_,S){_classCallCheck3(this,LoadingManager);var k=this,E=!1,T=0,M=0,I=void 0,R=[];this.onStart=void 0,this.onLoad=e,this.onProgress=_,this.onError=S,this.abortController=new AbortController,this.itemStart=function(e){M++,!1===E&&void 0!==k.onStart&&k.onStart(e,T,M),E=!0},this.itemEnd=function(e){T++,void 0!==k.onProgress&&k.onProgress(e,T,M),T===M&&(E=!1,void 0!==k.onLoad&&k.onLoad())},this.itemError=function(e){void 0!==k.onError&&k.onError(e)},this.resolveURL=function(e){return I?I(e):e},this.setURLModifier=function(e){return I=e,this},this.addHandler=function(e,_){return R.push(e,_),this},this.removeHandler=function(e){var _=R.indexOf(e);return-1!==_&&R.splice(_,2),this},this.getHandler=function(e){for(var _=0,S=R.length;_<S;_+=2){var k=R[_],E=R[_+1];if(k.global&&(k.lastIndex=0),k.test(e))return E}return null},this.abort=function(){return this.abortController.abort(),this.abortController=new AbortController,this}});D("c9",nm);var im=new nm,am=function(){return _createClass3(function Loader(e){_classCallCheck3(this,Loader),this.manager=void 0!==e?e:im,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}},[{key:"load",value:function(){}},{key:"loadAsync",value:function(e,_){var S=this;return new Promise(function(k,E){S.load(e,k,_,E)})}},{key:"parse",value:function(){}},{key:"setCrossOrigin",value:function(e){return this.crossOrigin=e,this}},{key:"setWithCredentials",value:function(e){return this.withCredentials=e,this}},{key:"setPath",value:function(e){return this.path=e,this}},{key:"setResourcePath",value:function(e){return this.resourcePath=e,this}},{key:"setRequestHeader",value:function(e){return this.requestHeader=e,this}},{key:"abort",value:function(){return this}}])}();am.DEFAULT_MATERIAL_NAME="__DEFAULT";var om={},sm=function(e){function HttpError(e,_){var S;return _classCallCheck3(this,HttpError),(S=_callSuper(this,HttpError,[e])).response=_,S}return _inherits(HttpError,e),_createClass3(HttpError)}(_wrapNativeSuper(Error)),um=function(e){function FileLoader(e){var _;return _classCallCheck3(this,FileLoader),(_=_callSuper(this,FileLoader,[e])).mimeType="",_.responseType="",_._abortController=new AbortController,_}return _inherits(FileLoader,e),_createClass3(FileLoader,[{key:"load",value:function(e,_,S,k){var E=this;void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var T=rm.get("file:".concat(e));if(void 0!==T)return this.manager.itemStart(e),setTimeout(function(){_&&_(T),E.manager.itemEnd(e)},0),T;if(void 0===om[e]){om[e]=[],om[e].push({onLoad:_,onProgress:S,onError:k});var M=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin",signal:"function"==typeof AbortSignal.any?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal}),I=this.mimeType,R=this.responseType;fetch(M).then(function(_){if(200===_.status||0===_.status){if(_.status,"undefined"==typeof ReadableStream||void 0===_.body||void 0===_.body.getReader)return _;var S=om[e],k=_.body.getReader(),E=_.headers.get("X-File-Size")||_.headers.get("Content-Length"),T=E?parseInt(E):0,M=0!==T,I=0,R=new ReadableStream({start:function(e){!function readData(){k.read().then(function(_){var k=_.done,E=_.value;if(k)e.close();else{I+=E.byteLength;for(var R=new ProgressEvent("progress",{lengthComputable:M,loaded:I,total:T}),O=0,D=S.length;O<D;O++){var L=S[O];L.onProgress&&L.onProgress(R)}e.enqueue(E),readData()}},function(_){e.error(_)})}()}});return new Response(R)}throw new sm('fetch for "'.concat(_.url,'" responded with ').concat(_.status,": ").concat(_.statusText),_)}).then(function(e){switch(R){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"document":return e.text().then(function(e){return(new DOMParser).parseFromString(e,I)});case"json":return e.json();default:if(""===I)return e.text();var _=/charset="?([^;"\s]*)"?/i.exec(I),S=_&&_[1]?_[1].toLowerCase():void 0,k=new TextDecoder(S);return e.arrayBuffer().then(function(e){return k.decode(e)})}}).then(function(_){rm.add("file:".concat(e),_);var S=om[e];delete om[e];for(var k=0,E=S.length;k<E;k++){var T=S[k];T.onLoad&&T.onLoad(_)}}).catch(function(_){var S=om[e];if(void 0===S)throw E.manager.itemError(e),_;delete om[e];for(var k=0,T=S.length;k<T;k++){var M=S[k];M.onError&&M.onError(_)}E.manager.itemError(e)}).finally(function(){E.manager.itemEnd(e)}),this.manager.itemStart(e)}else om[e].push({onLoad:_,onProgress:S,onError:k})}},{key:"setResponseType",value:function(e){return this.responseType=e,this}},{key:"setMimeType",value:function(e){return this.mimeType=e,this}},{key:"abort",value:function(){return this._abortController.abort(),this._abortController=new AbortController,this}}])}(am),lm=function(e){function AnimationLoader(e){return _classCallCheck3(this,AnimationLoader),_callSuper(this,AnimationLoader,[e])}return _inherits(AnimationLoader,e),_createClass3(AnimationLoader,[{key:"load",value:function(e,_,S,k){var E=this,T=new um(this.manager);T.setPath(this.path),T.setRequestHeader(this.requestHeader),T.setWithCredentials(this.withCredentials),T.load(e,function(S){try{_(E.parse(JSON.parse(S)))}catch(fo){k&&k(fo),E.manager.itemError(e)}},S,k)}},{key:"parse",value:function(e){for(var _=[],S=0;S<e.length;S++){var k=tm.parse(e[S]);_.push(k)}return _}}])}(am),cm=function(e){function CompressedTextureLoader(e){return _classCallCheck3(this,CompressedTextureLoader),_callSuper(this,CompressedTextureLoader,[e])}return _inherits(CompressedTextureLoader,e),_createClass3(CompressedTextureLoader,[{key:"load",value:function(e,_,S,k){var E=this,T=[],M=new Rv,I=new um(this.manager);I.setPath(this.path),I.setResponseType("arraybuffer"),I.setRequestHeader(this.requestHeader),I.setWithCredentials(E.withCredentials);var R=0;function loadTexture(O){I.load(e[O],function(e){var S=E.parse(e,!0);T[O]={width:S.width,height:S.height,format:S.format,mipmaps:S.mipmaps},6===(R+=1)&&(1===S.mipmapCount&&(M.minFilter=xl),M.image=T,M.format=S.format,M.needsUpdate=!0,_&&_(M))},S,k)}if(Array.isArray(e))for(var O=0,D=e.length;O<D;++O)loadTexture(O);else I.load(e,function(e){var S=E.parse(e,!0);if(S.isCubemap){for(var k=S.mipmaps.length/S.mipmapCount,I=0;I<k;I++){T[I]={mipmaps:[]};for(var R=0;R<S.mipmapCount;R++)T[I].mipmaps.push(S.mipmaps[I*S.mipmapCount+R]),T[I].format=S.format,T[I].width=S.width,T[I].height=S.height}M.image=T}else M.image.width=S.width,M.image.height=S.height,M.mipmaps=S.mipmaps;1===S.mipmapCount&&(M.minFilter=xl),M.format=S.format,M.needsUpdate=!0,_&&_(M)},S,k);return M}}])}(am),hm=new WeakMap,dm=function(e){function ImageLoader(e){return _classCallCheck3(this,ImageLoader),_callSuper(this,ImageLoader,[e])}return _inherits(ImageLoader,e),_createClass3(ImageLoader,[{key:"load",value:function(e,_,S,k){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var E=this,T=rm.get("image:".concat(e));if(void 0!==T){if(!0===T.complete)E.manager.itemStart(e),setTimeout(function(){_&&_(T),E.manager.itemEnd(e)},0);else{var M=hm.get(T);void 0===M&&(M=[],hm.set(T,M)),M.push({onLoad:_,onError:k})}return T}var I=createElementNS("img");function onImageLoad(){removeEventListeners(),_&&_(this);for(var S=hm.get(this)||[],k=0;k<S.length;k++){var T=S[k];T.onLoad&&T.onLoad(this)}hm.delete(this),E.manager.itemEnd(e)}function onImageError(_){removeEventListeners(),k&&k(_),rm.remove("image:".concat(e));for(var S=hm.get(this)||[],T=0;T<S.length;T++){var M=S[T];M.onError&&M.onError(_)}hm.delete(this),E.manager.itemError(e),E.manager.itemEnd(e)}function removeEventListeners(){I.removeEventListener("load",onImageLoad,!1),I.removeEventListener("error",onImageError,!1)}return I.addEventListener("load",onImageLoad,!1),I.addEventListener("error",onImageError,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(I.crossOrigin=this.crossOrigin),rm.add("image:".concat(e),I),E.manager.itemStart(e),I.src=e,I}}])}(am),fm=function(e){function CubeTextureLoader(e){return _classCallCheck3(this,CubeTextureLoader),_callSuper(this,CubeTextureLoader,[e])}return _inherits(CubeTextureLoader,e),_createClass3(CubeTextureLoader,[{key:"load",value:function(e,_,S,k){var E=new Nf;E.colorSpace=Bc;var T=new dm(this.manager);T.setCrossOrigin(this.crossOrigin),T.setPath(this.path);var M=0;function loadTexture(S){T.load(e[S],function(e){E.images[S]=e,6===++M&&(E.needsUpdate=!0,_&&_(E))},void 0,k)}for(var I=0;I<e.length;++I)loadTexture(I);return E}}])}(am);D("aN",fm);var pm=function(e){function DataTextureLoader(e){return _classCallCheck3(this,DataTextureLoader),_callSuper(this,DataTextureLoader,[e])}return _inherits(DataTextureLoader,e),_createClass3(DataTextureLoader,[{key:"load",value:function(e,_,S,k){var E=this,T=new Cp,M=new um(this.manager);return M.setResponseType("arraybuffer"),M.setRequestHeader(this.requestHeader),M.setPath(this.path),M.setWithCredentials(E.withCredentials),M.load(e,function(e){var S;try{S=E.parse(e)}catch(M){if(void 0===k)return;k(M)}void 0!==S.image?T.image=S.image:void 0!==S.data&&(T.image.width=S.width,T.image.height=S.height,T.image.data=S.data),T.wrapS=void 0!==S.wrapS?S.wrapS:yl,T.wrapT=void 0!==S.wrapT?S.wrapT:yl,T.magFilter=void 0!==S.magFilter?S.magFilter:xl,T.minFilter=void 0!==S.minFilter?S.minFilter:xl,T.anisotropy=void 0!==S.anisotropy?S.anisotropy:1,void 0!==S.colorSpace&&(T.colorSpace=S.colorSpace),void 0!==S.flipY&&(T.flipY=S.flipY),void 0!==S.format&&(T.format=S.format),void 0!==S.type&&(T.type=S.type),void 0!==S.mipmaps&&(T.mipmaps=S.mipmaps,T.minFilter=Cl),1===S.mipmapCount&&(T.minFilter=xl),void 0!==S.generateMipmaps&&(T.generateMipmaps=S.generateMipmaps),T.needsUpdate=!0,_&&_(T,S)},S,k),T}}])}(am),vm=function(e){function TextureLoader(e){return _classCallCheck3(this,TextureLoader),_callSuper(this,TextureLoader,[e])}return _inherits(TextureLoader,e),_createClass3(TextureLoader,[{key:"load",value:function(e,_,S,k){var E=new mh,T=new dm(this.manager);return T.setCrossOrigin(this.crossOrigin),T.setPath(this.path),T.load(e,function(e){E.image=e,E.needsUpdate=!0,void 0!==_&&_(E)},S,k),E}}])}(am),gm=function(e){function Light(e){var _,S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return _classCallCheck3(this,Light),(_=_callSuper(this,Light)).isLight=!0,_.type="Light",_.color=new jd(e),_.intensity=S,_}return _inherits(Light,e),_createClass3(Light,[{key:"dispose",value:function(){}},{key:"copy",value:function(e,_){return _superPropGet(Light,"copy",this,3)([e,_]),this.color.copy(e.color),this.intensity=e.intensity,this}},{key:"toJSON",value:function(e){var _=_superPropGet(Light,"toJSON",this,3)([e]);return _.object.color=this.color.getHex(),_.object.intensity=this.intensity,void 0!==this.groundColor&&(_.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(_.object.distance=this.distance),void 0!==this.angle&&(_.object.angle=this.angle),void 0!==this.decay&&(_.object.decay=this.decay),void 0!==this.penumbra&&(_.object.penumbra=this.penumbra),void 0!==this.shadow&&(_.object.shadow=this.shadow.toJSON()),void 0!==this.target&&(_.object.target=this.target.uuid),_}}])}(kd),mm=function(e){function HemisphereLight(e,_,S){var k;return _classCallCheck3(this,HemisphereLight),(k=_callSuper(this,HemisphereLight,[e,S])).isHemisphereLight=!0,k.type="HemisphereLight",k.position.copy(kd.DEFAULT_UP),k.updateMatrix(),k.groundColor=new jd(_),k}return _inherits(HemisphereLight,e),_createClass3(HemisphereLight,[{key:"copy",value:function(e,_){return _superPropGet(HemisphereLight,"copy",this,3)([e,_]),this.groundColor.copy(e.groundColor),this}}])}(gm),ym=new Qh,_m=new th,bm=new th,Sm=function(){return _createClass3(function LightShadow(e){_classCallCheck3(this,LightShadow),this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new $c(512,512),this.mapType=El,this.map=null,this.mapPass=null,this.matrix=new Qh,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Wp,this._frameExtents=new $c(1,1),this._viewportCount=1,this._viewports=[new yh(0,0,1,1)]},[{key:"getViewportCount",value:function(){return this._viewportCount}},{key:"getFrustum",value:function(){return this._frustum}},{key:"updateMatrices",value:function(e){var _=this.camera,S=this.matrix;_m.setFromMatrixPosition(e.matrixWorld),_.position.copy(_m),bm.setFromMatrixPosition(e.target.matrixWorld),_.lookAt(bm),_.updateMatrixWorld(),ym.multiplyMatrices(_.projectionMatrix,_.matrixWorldInverse),this._frustum.setFromProjectionMatrix(ym,_.coordinateSystem,_.reversedDepth),_.reversedDepth?S.set(.5,0,0,.5,0,.5,0,.5,0,0,1,0,0,0,0,1):S.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),S.multiply(ym)}},{key:"getViewport",value:function(e){return this._viewports[e]}},{key:"getFrameExtents",value:function(){return this._frameExtents}},{key:"dispose",value:function(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}},{key:"copy",value:function(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.autoUpdate=e.autoUpdate,this.needsUpdate=e.needsUpdate,this.normalBias=e.normalBias,this.blurSamples=e.blurSamples,this.mapSize.copy(e.mapSize),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"toJSON",value:function(){var e={};return 1!==this.intensity&&(e.intensity=this.intensity),0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}])}(),wm=function(e){function SpotLightShadow(){var e;return _classCallCheck3(this,SpotLightShadow),(e=_callSuper(this,SpotLightShadow,[new Ff(50,1,.5,500)])).isSpotLightShadow=!0,e.focus=1,e.aspect=1,e}return _inherits(SpotLightShadow,e),_createClass3(SpotLightShadow,[{key:"updateMatrices",value:function(e){var _=this.camera,S=2*Qc*e.angle*this.focus,k=this.mapSize.width/this.mapSize.height*this.aspect,E=e.distance||_.far;S===_.fov&&k===_.aspect&&E===_.far||(_.fov=S,_.aspect=k,_.far=E,_.updateProjectionMatrix()),_superPropGet(SpotLightShadow,"updateMatrices",this,3)([e])}},{key:"copy",value:function(e){return _superPropGet(SpotLightShadow,"copy",this,3)([e]),this.focus=e.focus,this}}])}(Sm),xm=function(e){function SpotLight(e,_){var S,k=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,E=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Math.PI/3,T=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,M=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2;return _classCallCheck3(this,SpotLight),(S=_callSuper(this,SpotLight,[e,_])).isSpotLight=!0,S.type="SpotLight",S.position.copy(kd.DEFAULT_UP),S.updateMatrix(),S.target=new kd,S.distance=k,S.angle=E,S.penumbra=T,S.decay=M,S.map=null,S.shadow=new wm,S}return _inherits(SpotLight,e),_createClass3(SpotLight,[{key:"power",get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}},{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(e,_){return _superPropGet(SpotLight,"copy",this,3)([e,_]),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}])}(gm),km=new Qh,Cm=new th,Am=new th,Em=function(e){function PointLightShadow(){var e;return _classCallCheck3(this,PointLightShadow),(e=_callSuper(this,PointLightShadow,[new Ff(90,1,.5,500)])).isPointLightShadow=!0,e._frameExtents=new $c(4,2),e._viewportCount=6,e._viewports=[new yh(2,1,1,1),new yh(0,1,1,1),new yh(3,1,1,1),new yh(1,1,1,1),new yh(3,0,1,1),new yh(1,0,1,1)],e._cubeDirections=[new th(1,0,0),new th(-1,0,0),new th(0,0,1),new th(0,0,-1),new th(0,1,0),new th(0,-1,0)],e._cubeUps=[new th(0,1,0),new th(0,1,0),new th(0,1,0),new th(0,1,0),new th(0,0,1),new th(0,0,-1)],e}return _inherits(PointLightShadow,e),_createClass3(PointLightShadow,[{key:"updateMatrices",value:function(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,S=this.camera,k=this.matrix,E=e.distance||S.far;E!==S.far&&(S.far=E,S.updateProjectionMatrix()),Cm.setFromMatrixPosition(e.matrixWorld),S.position.copy(Cm),Am.copy(S.position),Am.add(this._cubeDirections[_]),S.up.copy(this._cubeUps[_]),S.lookAt(Am),S.updateMatrixWorld(),k.makeTranslation(-Cm.x,-Cm.y,-Cm.z),km.multiplyMatrices(S.projectionMatrix,S.matrixWorldInverse),this._frustum.setFromProjectionMatrix(km,S.coordinateSystem,S.reversedDepth)}}])}(Sm),Tm=function(e){function PointLight(e,_){var S,k=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,E=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2;return _classCallCheck3(this,PointLight),(S=_callSuper(this,PointLight,[e,_])).isPointLight=!0,S.type="PointLight",S.distance=k,S.decay=E,S.shadow=new Em,S}return _inherits(PointLight,e),_createClass3(PointLight,[{key:"power",get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}},{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(e,_){return _superPropGet(PointLight,"copy",this,3)([e,_]),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}])}(gm),Mm=function(e){function OrthographicCamera(){var e,_=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,k=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,E=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,T=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.1,M=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2e3;return _classCallCheck3(this,OrthographicCamera),(e=_callSuper(this,OrthographicCamera)).isOrthographicCamera=!0,e.type="OrthographicCamera",e.zoom=1,e.view=null,e.left=_,e.right=S,e.top=k,e.bottom=E,e.near=T,e.far=M,e.updateProjectionMatrix(),e}return _inherits(OrthographicCamera,e),_createClass3(OrthographicCamera,[{key:"copy",value:function(e,_){return _superPropGet(OrthographicCamera,"copy",this,3)([e,_]),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}},{key:"setViewOffset",value:function(e,_,S,k,E,T){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=_,this.view.offsetX=S,this.view.offsetY=k,this.view.width=E,this.view.height=T,this.updateProjectionMatrix()}},{key:"clearViewOffset",value:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}},{key:"updateProjectionMatrix",value:function(){var e=(this.right-this.left)/(2*this.zoom),_=(this.top-this.bottom)/(2*this.zoom),S=(this.right+this.left)/2,k=(this.top+this.bottom)/2,E=S-e,T=S+e,M=k+_,I=k-_;if(null!==this.view&&this.view.enabled){var R=(this.right-this.left)/this.view.fullWidth/this.zoom,O=(this.top-this.bottom)/this.view.fullHeight/this.zoom;T=(E+=R*this.view.offsetX)+R*this.view.width,I=(M-=O*this.view.offsetY)-O*this.view.height}this.projectionMatrix.makeOrthographic(E,T,M,I,this.near,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}},{key:"toJSON",value:function(e){var _=_superPropGet(OrthographicCamera,"toJSON",this,3)([e]);return _.object.zoom=this.zoom,_.object.left=this.left,_.object.right=this.right,_.object.top=this.top,_.object.bottom=this.bottom,_.object.near=this.near,_.object.far=this.far,null!==this.view&&(_.object.view=Object.assign({},this.view)),_}}])}(Pf);D("ao",Mm);var Im=function(e){function DirectionalLightShadow(){var e;return _classCallCheck3(this,DirectionalLightShadow),(e=_callSuper(this,DirectionalLightShadow,[new Mm(-5,5,5,-5,.5,500)])).isDirectionalLightShadow=!0,e}return _inherits(DirectionalLightShadow,e),_createClass3(DirectionalLightShadow)}(Sm),Rm=function(e){function DirectionalLight(e,_){var S;return _classCallCheck3(this,DirectionalLight),(S=_callSuper(this,DirectionalLight,[e,_])).isDirectionalLight=!0,S.type="DirectionalLight",S.position.copy(kd.DEFAULT_UP),S.updateMatrix(),S.target=new kd,S.shadow=new Im,S}return _inherits(DirectionalLight,e),_createClass3(DirectionalLight,[{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(e){return _superPropGet(DirectionalLight,"copy",this,3)([e]),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}])}(gm),Pm=function(e){function AmbientLight(e,_){var S;return _classCallCheck3(this,AmbientLight),(S=_callSuper(this,AmbientLight,[e,_])).isAmbientLight=!0,S.type="AmbientLight",S}return _inherits(AmbientLight,e),_createClass3(AmbientLight)}(gm),Om=function(e){function RectAreaLight(e,_){var S,k=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,E=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;return _classCallCheck3(this,RectAreaLight),(S=_callSuper(this,RectAreaLight,[e,_])).isRectAreaLight=!0,S.type="RectAreaLight",S.width=k,S.height=E,S}return _inherits(RectAreaLight,e),_createClass3(RectAreaLight,[{key:"power",get:function(){return this.intensity*this.width*this.height*Math.PI},set:function(e){this.intensity=e/(this.width*this.height*Math.PI)}},{key:"copy",value:function(e){return _superPropGet(RectAreaLight,"copy",this,3)([e]),this.width=e.width,this.height=e.height,this}},{key:"toJSON",value:function(e){var _=_superPropGet(RectAreaLight,"toJSON",this,3)([e]);return _.object.width=this.width,_.object.height=this.height,_}}])}(gm),Dm=function(){return _createClass3(function SphericalHarmonics3(){_classCallCheck3(this,SphericalHarmonics3),this.isSphericalHarmonics3=!0,this.coefficients=[];for(var e=0;e<9;e++)this.coefficients.push(new th)},[{key:"set",value:function(e){for(var _=0;_<9;_++)this.coefficients[_].copy(e[_]);return this}},{key:"zero",value:function(){for(var e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}},{key:"getAt",value:function(e,_){var S=e.x,k=e.y,E=e.z,T=this.coefficients;return _.copy(T[0]).multiplyScalar(.282095),_.addScaledVector(T[1],.488603*k),_.addScaledVector(T[2],.488603*E),_.addScaledVector(T[3],.488603*S),_.addScaledVector(T[4],S*k*1.092548),_.addScaledVector(T[5],k*E*1.092548),_.addScaledVector(T[6],.315392*(3*E*E-1)),_.addScaledVector(T[7],S*E*1.092548),_.addScaledVector(T[8],.546274*(S*S-k*k)),_}},{key:"getIrradianceAt",value:function(e,_){var S=e.x,k=e.y,E=e.z,T=this.coefficients;return _.copy(T[0]).multiplyScalar(.886227),_.addScaledVector(T[1],1.023328*k),_.addScaledVector(T[2],1.023328*E),_.addScaledVector(T[3],1.023328*S),_.addScaledVector(T[4],.858086*S*k),_.addScaledVector(T[5],.858086*k*E),_.addScaledVector(T[6],.743125*E*E-.247708),_.addScaledVector(T[7],.858086*S*E),_.addScaledVector(T[8],.429043*(S*S-k*k)),_}},{key:"add",value:function(e){for(var _=0;_<9;_++)this.coefficients[_].add(e.coefficients[_]);return this}},{key:"addScaledSH",value:function(e,_){for(var S=0;S<9;S++)this.coefficients[S].addScaledVector(e.coefficients[S],_);return this}},{key:"scale",value:function(e){for(var _=0;_<9;_++)this.coefficients[_].multiplyScalar(e);return this}},{key:"lerp",value:function(e,_){for(var S=0;S<9;S++)this.coefficients[S].lerp(e.coefficients[S],_);return this}},{key:"equals",value:function(e){for(var _=0;_<9;_++)if(!this.coefficients[_].equals(e.coefficients[_]))return!1;return!0}},{key:"copy",value:function(e){return this.set(e.coefficients)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"fromArray",value:function(e){for(var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,S=this.coefficients,k=0;k<9;k++)S[k].fromArray(e,_+3*k);return this}},{key:"toArray",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,S=this.coefficients,k=0;k<9;k++)S[k].toArray(e,_+3*k);return e}}],[{key:"getBasisAt",value:function(e,_){var S=e.x,k=e.y,E=e.z;_[0]=.282095,_[1]=.488603*k,_[2]=.488603*E,_[3]=.488603*S,_[4]=1.092548*S*k,_[5]=1.092548*k*E,_[6]=.315392*(3*E*E-1),_[7]=1.092548*S*E,_[8]=.546274*(S*S-k*k)}}])}(),Lm=function(e){function LightProbe(){var e,_=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Dm,S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return _classCallCheck3(this,LightProbe),(e=_callSuper(this,LightProbe,[void 0,S])).isLightProbe=!0,e.sh=_,e}return _inherits(LightProbe,e),_createClass3(LightProbe,[{key:"copy",value:function(e){return _superPropGet(LightProbe,"copy",this,3)([e]),this.sh.copy(e.sh),this}},{key:"fromJSON",value:function(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}},{key:"toJSON",value:function(e){var _=_superPropGet(LightProbe,"toJSON",this,3)([e]);return _.object.sh=this.sh.toArray(),_}}])}(gm),Fm=function(e){function MaterialLoader(e){var _;return _classCallCheck3(this,MaterialLoader),(_=_callSuper(this,MaterialLoader,[e])).textures={},_}return _inherits(MaterialLoader,e),_createClass3(MaterialLoader,[{key:"load",value:function(e,_,S,k){var E=this,T=new um(E.manager);T.setPath(E.path),T.setRequestHeader(E.requestHeader),T.setWithCredentials(E.withCredentials),T.load(e,function(S){try{_(E.parse(JSON.parse(S)))}catch(fo){k&&k(fo),E.manager.itemError(e)}},S,k)}},{key:"parse",value:function(e){var _=this.textures;function getTexture(e){return _[e],_[e]}var S=this.createMaterialFromType(e.type);if(void 0!==e.uuid&&(S.uuid=e.uuid),void 0!==e.name&&(S.name=e.name),void 0!==e.color&&void 0!==S.color&&S.color.setHex(e.color),void 0!==e.roughness&&(S.roughness=e.roughness),void 0!==e.metalness&&(S.metalness=e.metalness),void 0!==e.sheen&&(S.sheen=e.sheen),void 0!==e.sheenColor&&(S.sheenColor=(new jd).setHex(e.sheenColor)),void 0!==e.sheenRoughness&&(S.sheenRoughness=e.sheenRoughness),void 0!==e.emissive&&void 0!==S.emissive&&S.emissive.setHex(e.emissive),void 0!==e.specular&&void 0!==S.specular&&S.specular.setHex(e.specular),void 0!==e.specularIntensity&&(S.specularIntensity=e.specularIntensity),void 0!==e.specularColor&&void 0!==S.specularColor&&S.specularColor.setHex(e.specularColor),void 0!==e.shininess&&(S.shininess=e.shininess),void 0!==e.clearcoat&&(S.clearcoat=e.clearcoat),void 0!==e.clearcoatRoughness&&(S.clearcoatRoughness=e.clearcoatRoughness),void 0!==e.dispersion&&(S.dispersion=e.dispersion),void 0!==e.iridescence&&(S.iridescence=e.iridescence),void 0!==e.iridescenceIOR&&(S.iridescenceIOR=e.iridescenceIOR),void 0!==e.iridescenceThicknessRange&&(S.iridescenceThicknessRange=e.iridescenceThicknessRange),void 0!==e.transmission&&(S.transmission=e.transmission),void 0!==e.thickness&&(S.thickness=e.thickness),void 0!==e.attenuationDistance&&(S.attenuationDistance=e.attenuationDistance),void 0!==e.attenuationColor&&void 0!==S.attenuationColor&&S.attenuationColor.setHex(e.attenuationColor),void 0!==e.anisotropy&&(S.anisotropy=e.anisotropy),void 0!==e.anisotropyRotation&&(S.anisotropyRotation=e.anisotropyRotation),void 0!==e.fog&&(S.fog=e.fog),void 0!==e.flatShading&&(S.flatShading=e.flatShading),void 0!==e.blending&&(S.blending=e.blending),void 0!==e.combine&&(S.combine=e.combine),void 0!==e.side&&(S.side=e.side),void 0!==e.shadowSide&&(S.shadowSide=e.shadowSide),void 0!==e.opacity&&(S.opacity=e.opacity),void 0!==e.transparent&&(S.transparent=e.transparent),void 0!==e.alphaTest&&(S.alphaTest=e.alphaTest),void 0!==e.alphaHash&&(S.alphaHash=e.alphaHash),void 0!==e.depthFunc&&(S.depthFunc=e.depthFunc),void 0!==e.depthTest&&(S.depthTest=e.depthTest),void 0!==e.depthWrite&&(S.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(S.colorWrite=e.colorWrite),void 0!==e.blendSrc&&(S.blendSrc=e.blendSrc),void 0!==e.blendDst&&(S.blendDst=e.blendDst),void 0!==e.blendEquation&&(S.blendEquation=e.blendEquation),void 0!==e.blendSrcAlpha&&(S.blendSrcAlpha=e.blendSrcAlpha),void 0!==e.blendDstAlpha&&(S.blendDstAlpha=e.blendDstAlpha),void 0!==e.blendEquationAlpha&&(S.blendEquationAlpha=e.blendEquationAlpha),void 0!==e.blendColor&&void 0!==S.blendColor&&S.blendColor.setHex(e.blendColor),void 0!==e.blendAlpha&&(S.blendAlpha=e.blendAlpha),void 0!==e.stencilWriteMask&&(S.stencilWriteMask=e.stencilWriteMask),void 0!==e.stencilFunc&&(S.stencilFunc=e.stencilFunc),void 0!==e.stencilRef&&(S.stencilRef=e.stencilRef),void 0!==e.stencilFuncMask&&(S.stencilFuncMask=e.stencilFuncMask),void 0!==e.stencilFail&&(S.stencilFail=e.stencilFail),void 0!==e.stencilZFail&&(S.stencilZFail=e.stencilZFail),void 0!==e.stencilZPass&&(S.stencilZPass=e.stencilZPass),void 0!==e.stencilWrite&&(S.stencilWrite=e.stencilWrite),void 0!==e.wireframe&&(S.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(S.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(S.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(S.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(S.rotation=e.rotation),void 0!==e.linewidth&&(S.linewidth=e.linewidth),void 0!==e.dashSize&&(S.dashSize=e.dashSize),void 0!==e.gapSize&&(S.gapSize=e.gapSize),void 0!==e.scale&&(S.scale=e.scale),void 0!==e.polygonOffset&&(S.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(S.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(S.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.dithering&&(S.dithering=e.dithering),void 0!==e.alphaToCoverage&&(S.alphaToCoverage=e.alphaToCoverage),void 0!==e.premultipliedAlpha&&(S.premultipliedAlpha=e.premultipliedAlpha),void 0!==e.forceSinglePass&&(S.forceSinglePass=e.forceSinglePass),void 0!==e.visible&&(S.visible=e.visible),void 0!==e.toneMapped&&(S.toneMapped=e.toneMapped),void 0!==e.userData&&(S.userData=e.userData),void 0!==e.vertexColors&&("number"==typeof e.vertexColors?S.vertexColors=e.vertexColors>0:S.vertexColors=e.vertexColors),void 0!==e.uniforms)for(var k in e.uniforms){var E=e.uniforms[k];switch(S.uniforms[k]={},E.type){case"t":S.uniforms[k].value=getTexture(E.value);break;case"c":S.uniforms[k].value=(new jd).setHex(E.value);break;case"v2":S.uniforms[k].value=(new $c).fromArray(E.value);break;case"v3":S.uniforms[k].value=(new th).fromArray(E.value);break;case"v4":S.uniforms[k].value=(new yh).fromArray(E.value);break;case"m3":S.uniforms[k].value=(new ih).fromArray(E.value);break;case"m4":S.uniforms[k].value=(new Qh).fromArray(E.value);break;default:S.uniforms[k].value=E.value}}if(void 0!==e.defines&&(S.defines=e.defines),void 0!==e.vertexShader&&(S.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(S.fragmentShader=e.fragmentShader),void 0!==e.glslVersion&&(S.glslVersion=e.glslVersion),void 0!==e.extensions)for(var T in e.extensions)S.extensions[T]=e.extensions[T];if(void 0!==e.lights&&(S.lights=e.lights),void 0!==e.clipping&&(S.clipping=e.clipping),void 0!==e.size&&(S.size=e.size),void 0!==e.sizeAttenuation&&(S.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(S.map=getTexture(e.map)),void 0!==e.matcap&&(S.matcap=getTexture(e.matcap)),void 0!==e.alphaMap&&(S.alphaMap=getTexture(e.alphaMap)),void 0!==e.bumpMap&&(S.bumpMap=getTexture(e.bumpMap)),void 0!==e.bumpScale&&(S.bumpScale=e.bumpScale),void 0!==e.normalMap&&(S.normalMap=getTexture(e.normalMap)),void 0!==e.normalMapType&&(S.normalMapType=e.normalMapType),void 0!==e.normalScale){var M=e.normalScale;!1===Array.isArray(M)&&(M=[M,M]),S.normalScale=(new $c).fromArray(M)}return void 0!==e.displacementMap&&(S.displacementMap=getTexture(e.displacementMap)),void 0!==e.displacementScale&&(S.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(S.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(S.roughnessMap=getTexture(e.roughnessMap)),void 0!==e.metalnessMap&&(S.metalnessMap=getTexture(e.metalnessMap)),void 0!==e.emissiveMap&&(S.emissiveMap=getTexture(e.emissiveMap)),void 0!==e.emissiveIntensity&&(S.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(S.specularMap=getTexture(e.specularMap)),void 0!==e.specularIntensityMap&&(S.specularIntensityMap=getTexture(e.specularIntensityMap)),void 0!==e.specularColorMap&&(S.specularColorMap=getTexture(e.specularColorMap)),void 0!==e.envMap&&(S.envMap=getTexture(e.envMap)),void 0!==e.envMapRotation&&S.envMapRotation.fromArray(e.envMapRotation),void 0!==e.envMapIntensity&&(S.envMapIntensity=e.envMapIntensity),void 0!==e.reflectivity&&(S.reflectivity=e.reflectivity),void 0!==e.refractionRatio&&(S.refractionRatio=e.refractionRatio),void 0!==e.lightMap&&(S.lightMap=getTexture(e.lightMap)),void 0!==e.lightMapIntensity&&(S.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(S.aoMap=getTexture(e.aoMap)),void 0!==e.aoMapIntensity&&(S.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(S.gradientMap=getTexture(e.gradientMap)),void 0!==e.clearcoatMap&&(S.clearcoatMap=getTexture(e.clearcoatMap)),void 0!==e.clearcoatRoughnessMap&&(S.clearcoatRoughnessMap=getTexture(e.clearcoatRoughnessMap)),void 0!==e.clearcoatNormalMap&&(S.clearcoatNormalMap=getTexture(e.clearcoatNormalMap)),void 0!==e.clearcoatNormalScale&&(S.clearcoatNormalScale=(new $c).fromArray(e.clearcoatNormalScale)),void 0!==e.iridescenceMap&&(S.iridescenceMap=getTexture(e.iridescenceMap)),void 0!==e.iridescenceThicknessMap&&(S.iridescenceThicknessMap=getTexture(e.iridescenceThicknessMap)),void 0!==e.transmissionMap&&(S.transmissionMap=getTexture(e.transmissionMap)),void 0!==e.thicknessMap&&(S.thicknessMap=getTexture(e.thicknessMap)),void 0!==e.anisotropyMap&&(S.anisotropyMap=getTexture(e.anisotropyMap)),void 0!==e.sheenColorMap&&(S.sheenColorMap=getTexture(e.sheenColorMap)),void 0!==e.sheenRoughnessMap&&(S.sheenRoughnessMap=getTexture(e.sheenRoughnessMap)),S}},{key:"setTextures",value:function(e){return this.textures=e,this}},{key:"createMaterialFromType",value:function(e){return MaterialLoader.createMaterialFromType(e)}}],[{key:"createMaterialFromType",value:function(e){return new{ShadowMaterial:Ig,SpriteMaterial:Qf,RawShaderMaterial:Rg,ShaderMaterial:Rf,PointsMaterial:wv,MeshPhysicalMaterial:Og,MeshStandardMaterial:Pg,MeshPhongMaterial:Dg,MeshToonMaterial:Lg,MeshNormalMaterial:Fg,MeshLambertMaterial:Ug,MeshDepthMaterial:Bg,MeshDistanceMaterial:Ng,MeshBasicMaterial:qd,MeshMatcapMaterial:zg,LineDashedMaterial:Gg,LineBasicMaterial:lv,Material:Wd}[e]}}])}(am),Um=function(){return _createClass3(function LoaderUtils(){_classCallCheck3(this,LoaderUtils)},null,[{key:"extractUrlBase",value:function(e){var _=e.lastIndexOf("/");return-1===_?"./":e.slice(0,_+1)}},{key:"resolveURL",value:function(e,_){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(_)&&/^\//.test(e)&&(_=_.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:_+e)}}])}(),Bm=function(e){function InstancedBufferGeometry(){var e;return _classCallCheck3(this,InstancedBufferGeometry),(e=_callSuper(this,InstancedBufferGeometry)).isInstancedBufferGeometry=!0,e.type="InstancedBufferGeometry",e.instanceCount=1/0,e}return _inherits(InstancedBufferGeometry,e),_createClass3(InstancedBufferGeometry,[{key:"copy",value:function(e){return _superPropGet(InstancedBufferGeometry,"copy",this,3)([e]),this.instanceCount=e.instanceCount,this}},{key:"toJSON",value:function(){var e=_superPropGet(InstancedBufferGeometry,"toJSON",this,3)([]);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}])}(gf);D("cf",Bm);var Nm,zm=function(e){function BufferGeometryLoader(e){return _classCallCheck3(this,BufferGeometryLoader),_callSuper(this,BufferGeometryLoader,[e])}return _inherits(BufferGeometryLoader,e),_createClass3(BufferGeometryLoader,[{key:"load",value:function(e,_,S,k){var E=this,T=new um(E.manager);T.setPath(E.path),T.setRequestHeader(E.requestHeader),T.setWithCredentials(E.withCredentials),T.load(e,function(S){try{_(E.parse(JSON.parse(S)))}catch(fo){k&&k(fo),E.manager.itemError(e)}},S,k)}},{key:"parse",value:function(e){var _={},S={};function getInterleavedBuffer(e,k){if(void 0!==_[k])return _[k];var E=e.interleavedBuffers[k],T=function(e,_){if(void 0!==S[_])return S[_];var k=e.arrayBuffers,E=k[_],T=new Uint32Array(E).buffer;return S[_]=T,T}(e,E.buffer),M=getTypedArray(E.type,T),I=new Yf(M,E.stride);return I.uuid=E.uuid,_[k]=I,I}var k=e.isInstancedBufferGeometry?new Bm:new gf,E=e.data.index;if(void 0!==E){var T=getTypedArray(E.type,E.array);k.setIndex(new Zd(T,1))}var M=e.data.attributes;for(var I in M){var R=M[I],O=void 0;if(R.isInterleavedBufferAttribute){var D=getInterleavedBuffer(e.data,R.data);O=new Jf(D,R.itemSize,R.offset,R.normalized)}else{var L=getTypedArray(R.type,R.array);O=new(R.isInstancedBufferAttribute?Mp:Zd)(L,R.itemSize,R.normalized)}void 0!==R.name&&(O.name=R.name),void 0!==R.usage&&O.setUsage(R.usage),k.setAttribute(I,O)}var U=e.data.morphAttributes;if(U)for(var B in U){for(var z=U[B],G=[],j=0,V=z.length;j<V;j++){var H=z[j],W=void 0;if(H.isInterleavedBufferAttribute){var q=getInterleavedBuffer(e.data,H.data);W=new Jf(q,H.itemSize,H.offset,H.normalized)}else{var X=getTypedArray(H.type,H.array);W=new Zd(X,H.itemSize,H.normalized)}void 0!==H.name&&(W.name=H.name),G.push(W)}k.morphAttributes[B]=G}e.data.morphTargetsRelative&&(k.morphTargetsRelative=!0);var Y=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==Y)for(var K=0,J=Y.length;K!==J;++K){var Q=Y[K];k.addGroup(Q.start,Q.count,Q.materialIndex)}var Z=e.data.boundingSphere;return void 0!==Z&&(k.boundingSphere=(new jh).fromJSON(Z)),e.name&&(k.name=e.name),e.userData&&(k.userData=e.userData),k}}])}(am),Gm=function(e){function ObjectLoader(e){return _classCallCheck3(this,ObjectLoader),_callSuper(this,ObjectLoader,[e])}return _inherits(ObjectLoader,e),_createClass3(ObjectLoader,[{key:"load",value:function(e,_,S,k){var E=this,T=""===this.path?Um.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||T;var M=new um(this.manager);M.setPath(this.path),M.setRequestHeader(this.requestHeader),M.setWithCredentials(this.withCredentials),M.load(e,function(S){var T=null;try{T=JSON.parse(S)}catch(I){return void(void 0!==k&&k(I))}var M=T.metadata;void 0!==M&&void 0!==M.type&&"geometry"!==M.type.toLowerCase()?E.parse(T,_):void 0!==k&&k(new Error("THREE.ObjectLoader: Can't load "+e))},S,k)}},{key:"loadAsync",value:(k=_asyncToGenerator(_regenerator().m(function _callee251(e,_){var S,k,E,T,M,I;return _regenerator().w(function(R){for(;;)switch(R.n){case 0:return S=this,k=""===this.path?Um.extractUrlBase(e):this.path,this.resourcePath=this.resourcePath||k,(E=new um(this.manager)).setPath(this.path),E.setRequestHeader(this.requestHeader),E.setWithCredentials(this.withCredentials),R.n=1,E.loadAsync(e,_);case 1:if(T=R.v,M=JSON.parse(T),void 0!==(I=M.metadata)&&void 0!==I.type&&"geometry"!==I.type.toLowerCase()){R.n=2;break}throw new Error("THREE.ObjectLoader: Can't load "+e);case 2:return R.n=3,S.parseAsync(M);case 3:return R.a(2,R.v)}},_callee251,this)})),function(e,_){return k.apply(this,arguments)})},{key:"parse",value:function(e,_){var S=this.parseAnimations(e.animations),k=this.parseShapes(e.shapes),E=this.parseGeometries(e.geometries,k),T=this.parseImages(e.images,function(){void 0!==_&&_(R)}),M=this.parseTextures(e.textures,T),I=this.parseMaterials(e.materials,M),R=this.parseObject(e.object,E,I,M,S),O=this.parseSkeletons(e.skeletons,R);if(this.bindSkeletons(R,O),this.bindLightTargets(R),void 0!==_){var D=!1;for(var L in T)if(T[L].data instanceof HTMLImageElement){D=!0;break}!1===D&&_(R)}return R}},{key:"parseAsync",value:(S=_asyncToGenerator(_regenerator().m(function _callee252(e){var _,S,k,E,T,M,I,R;return _regenerator().w(function(O){for(;;)switch(O.n){case 0:return _=this.parseAnimations(e.animations),S=this.parseShapes(e.shapes),k=this.parseGeometries(e.geometries,S),O.n=1,this.parseImagesAsync(e.images);case 1:return E=O.v,T=this.parseTextures(e.textures,E),M=this.parseMaterials(e.materials,T),I=this.parseObject(e.object,k,M,T,_),R=this.parseSkeletons(e.skeletons,I),this.bindSkeletons(I,R),this.bindLightTargets(I),O.a(2,I)}},_callee252,this)})),function(e){return S.apply(this,arguments)})},{key:"parseShapes",value:function(e){var _={};if(void 0!==e)for(var S=0,k=e.length;S<k;S++){var E=(new dg).fromJSON(e[S]);_[E.uuid]=E}return _}},{key:"parseSkeletons",value:function(e,_){var S={},k={};if(_.traverse(function(e){e.isBone&&(k[e.uuid]=e)}),void 0!==e)for(var E=0,T=e.length;E<T;E++){var M=(new Tp).fromJSON(e[E],k);S[M.uuid]=M}return S}},{key:"parseGeometries",value:function(e,_){var S={};if(void 0!==e)for(var k=new zm,E=0,T=e.length;E<T;E++){var M=void 0,I=e[E];switch(I.type){case"BufferGeometry":case"InstancedBufferGeometry":M=k.parse(I);break;default:I.type in Mg&&(M=Mg[I.type].fromJSON(I,_))}M.uuid=I.uuid,void 0!==I.name&&(M.name=I.name),void 0!==I.userData&&(M.userData=I.userData),S[I.uuid]=M}return S}},{key:"parseMaterials",value:function(e,_){var S={},k={};if(void 0!==e){var E=new Fm;E.setTextures(_);for(var T=0,M=e.length;T<M;T++){var I=e[T];void 0===S[I.uuid]&&(S[I.uuid]=E.parse(I)),k[I.uuid]=S[I.uuid]}}return k}},{key:"parseAnimations",value:function(e){var _={};if(void 0!==e)for(var S=0;S<e.length;S++){var k=e[S],E=tm.parse(k);_[E.uuid]=E}return _}},{key:"parseImages",value:function(e,_){var S,k=this,E={};function deserializeImage(e){if("string"==typeof e){var _=e;return function(e){return k.manager.itemStart(e),S.load(e,function(){k.manager.itemEnd(e)},void 0,function(){k.manager.itemError(e),k.manager.itemEnd(e)})}(/^(\/\/)|([a-z]+:(\/\/)?)/i.test(_)?_:k.resourcePath+_)}return e.data?{data:getTypedArray(e.type,e.data),width:e.width,height:e.height}:null}if(void 0!==e&&e.length>0){var T=new nm(_);(S=new dm(T)).setCrossOrigin(this.crossOrigin);for(var M=0,I=e.length;M<I;M++){var R=e[M],O=R.url;if(Array.isArray(O)){for(var D=[],L=0,U=O.length;L<U;L++){var B=deserializeImage(O[L]);null!==B&&(B instanceof HTMLImageElement?D.push(B):D.push(new Cp(B.data,B.width,B.height)))}E[R.uuid]=new ph(D)}else{var z=deserializeImage(R.url);E[R.uuid]=new ph(z)}}}return E}},{key:"parseImagesAsync",value:(_=_asyncToGenerator(_regenerator().m(function _callee254(e){var _,S,k,E,T,M,I,R,O,D,L,U,B,z,G;return _regenerator().w(function(j){for(;;)switch(j.n){case 0:if(T=function(){return T=_asyncToGenerator(_regenerator().m(function _callee253(e){var S,E;return _regenerator().w(function(T){for(;;)switch(T.n){case 0:if("string"!=typeof e){T.n=2;break}return E=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(S=e)?S:_.resourcePath+S,T.n=1,k.loadAsync(E);case 1:return T.a(2,T.v);case 2:if(!e.data){T.n=3;break}return T.a(2,{data:getTypedArray(e.type,e.data),width:e.width,height:e.height});case 3:return T.a(2,null);case 4:return T.a(2)}},_callee253)})),T.apply(this,arguments)},E=function(e){return T.apply(this,arguments)},_=this,S={},!(void 0!==e&&e.length>0)){j.n=9;break}(k=new dm(this.manager)).setCrossOrigin(this.crossOrigin),M=0,I=e.length;case 1:if(!(M<I)){j.n=9;break}if(R=e[M],O=R.url,!Array.isArray(O)){j.n=6;break}D=[],L=0,U=O.length;case 2:if(!(L<U)){j.n=5;break}return B=O[L],j.n=3,E(B);case 3:null!==(z=j.v)&&(z instanceof HTMLImageElement?D.push(z):D.push(new Cp(z.data,z.width,z.height)));case 4:L++,j.n=2;break;case 5:S[R.uuid]=new ph(D),j.n=8;break;case 6:return j.n=7,E(R.url);case 7:G=j.v,S[R.uuid]=new ph(G);case 8:M++,j.n=1;break;case 9:return j.a(2,S)}},_callee254,this)})),function(e){return _.apply(this,arguments)})},{key:"parseTextures",value:function(e,_){function parseConstant(e,_){return"number"==typeof e?e:_[e]}var S={};if(void 0!==e)for(var k=0,E=e.length;k<E;k++){var T=e[k];T.image,_[T.image];var M=_[T.image],I=M.data,R=void 0;Array.isArray(I)?(R=new Nf,6===I.length&&(R.needsUpdate=!0)):(R=I&&I.data?new Cp:new mh,I&&(R.needsUpdate=!0)),R.source=M,R.uuid=T.uuid,void 0!==T.name&&(R.name=T.name),void 0!==T.mapping&&(R.mapping=parseConstant(T.mapping,jm)),void 0!==T.channel&&(R.channel=T.channel),void 0!==T.offset&&R.offset.fromArray(T.offset),void 0!==T.repeat&&R.repeat.fromArray(T.repeat),void 0!==T.center&&R.center.fromArray(T.center),void 0!==T.rotation&&(R.rotation=T.rotation),void 0!==T.wrap&&(R.wrapS=parseConstant(T.wrap[0],Vm),R.wrapT=parseConstant(T.wrap[1],Vm)),void 0!==T.format&&(R.format=T.format),void 0!==T.internalFormat&&(R.internalFormat=T.internalFormat),void 0!==T.type&&(R.type=T.type),void 0!==T.colorSpace&&(R.colorSpace=T.colorSpace),void 0!==T.minFilter&&(R.minFilter=parseConstant(T.minFilter,Hm)),void 0!==T.magFilter&&(R.magFilter=parseConstant(T.magFilter,Hm)),void 0!==T.anisotropy&&(R.anisotropy=T.anisotropy),void 0!==T.flipY&&(R.flipY=T.flipY),void 0!==T.generateMipmaps&&(R.generateMipmaps=T.generateMipmaps),void 0!==T.premultiplyAlpha&&(R.premultiplyAlpha=T.premultiplyAlpha),void 0!==T.unpackAlignment&&(R.unpackAlignment=T.unpackAlignment),void 0!==T.compareFunction&&(R.compareFunction=T.compareFunction),void 0!==T.userData&&(R.userData=T.userData),S[T.uuid]=R}return S}},{key:"parseObject",value:function(e,_,S,k,E){var T,M,I;function getGeometry(e){return _[e],_[e]}function getMaterial(e){if(void 0!==e){if(Array.isArray(e)){for(var _=[],k=0,E=e.length;k<E;k++){var T=e[k];S[T],_.push(S[T])}return _}return S[e],S[e]}}function getTexture(e){return k[e],k[e]}switch(e.type){case"Scene":T=new qf,void 0!==e.background&&(Number.isInteger(e.background)?T.background=new jd(e.background):T.background=getTexture(e.background)),void 0!==e.environment&&(T.environment=getTexture(e.environment)),void 0!==e.fog&&("Fog"===e.fog.type?T.fog=new Wf(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(T.fog=new Hf(e.fog.color,e.fog.density)),""!==e.fog.name&&(T.fog.name=e.fog.name)),void 0!==e.backgroundBlurriness&&(T.backgroundBlurriness=e.backgroundBlurriness),void 0!==e.backgroundIntensity&&(T.backgroundIntensity=e.backgroundIntensity),void 0!==e.backgroundRotation&&T.backgroundRotation.fromArray(e.backgroundRotation),void 0!==e.environmentIntensity&&(T.environmentIntensity=e.environmentIntensity),void 0!==e.environmentRotation&&T.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":T=new Ff(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(T.focus=e.focus),void 0!==e.zoom&&(T.zoom=e.zoom),void 0!==e.filmGauge&&(T.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(T.filmOffset=e.filmOffset),void 0!==e.view&&(T.view=Object.assign({},e.view));break;case"OrthographicCamera":T=new Mm(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(T.zoom=e.zoom),void 0!==e.view&&(T.view=Object.assign({},e.view));break;case"AmbientLight":T=new Pm(e.color,e.intensity);break;case"DirectionalLight":(T=new Rm(e.color,e.intensity)).target=e.target||"";break;case"PointLight":T=new Tm(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":T=new Om(e.color,e.intensity,e.width,e.height);break;case"SpotLight":(T=new xm(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay)).target=e.target||"";break;case"HemisphereLight":T=new mm(e.color,e.groundColor,e.intensity);break;case"LightProbe":T=(new Lm).fromJSON(e);break;case"SkinnedMesh":M=getGeometry(e.geometry),I=getMaterial(e.material),T=new xp(M,I),void 0!==e.bindMode&&(T.bindMode=e.bindMode),void 0!==e.bindMatrix&&T.bindMatrix.fromArray(e.bindMatrix),void 0!==e.skeleton&&(T.skeleton=e.skeleton);break;case"Mesh":M=getGeometry(e.geometry),I=getMaterial(e.material),T=new Tf(M,I);break;case"InstancedMesh":M=getGeometry(e.geometry),I=getMaterial(e.material);var R=e.count,O=e.instanceMatrix,D=e.instanceColor;(T=new Up(M,I,R)).instanceMatrix=new Mp(new Float32Array(O.array),16),void 0!==D&&(T.instanceColor=new Mp(new Float32Array(D.array),D.itemSize));break;case"BatchedMesh":M=getGeometry(e.geometry),I=getMaterial(e.material),(T=new uv(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,I)).geometry=M,T.perObjectFrustumCulled=e.perObjectFrustumCulled,T.sortObjects=e.sortObjects,T._drawRanges=e.drawRanges,T._reservedRanges=e.reservedRanges,T._geometryInfo=e.geometryInfo.map(function(e){var _=null,S=null;return void 0!==e.boundingBox&&(_=(new Ch).fromJSON(e.boundingBox)),void 0!==e.boundingSphere&&(S=(new jh).fromJSON(e.boundingSphere)),_objectSpread2(_objectSpread2({},e),{},{boundingBox:_,boundingSphere:S})}),T._instanceInfo=e.instanceInfo,T._availableInstanceIds=e._availableInstanceIds,T._availableGeometryIds=e._availableGeometryIds,T._nextIndexStart=e.nextIndexStart,T._nextVertexStart=e.nextVertexStart,T._geometryCount=e.geometryCount,T._maxInstanceCount=e.maxInstanceCount,T._maxVertexCount=e.maxVertexCount,T._maxIndexCount=e.maxIndexCount,T._geometryInitialized=e.geometryInitialized,T._matricesTexture=getTexture(e.matricesTexture.uuid),T._indirectTexture=getTexture(e.indirectTexture.uuid),void 0!==e.colorsTexture&&(T._colorsTexture=getTexture(e.colorsTexture.uuid)),void 0!==e.boundingSphere&&(T.boundingSphere=(new jh).fromJSON(e.boundingSphere)),void 0!==e.boundingBox&&(T.boundingBox=(new Ch).fromJSON(e.boundingBox));break;case"LOD":T=new fp;break;case"Line":T=new mv(getGeometry(e.geometry),getMaterial(e.material));break;case"LineLoop":T=new Sv(getGeometry(e.geometry),getMaterial(e.material));break;case"LineSegments":T=new bv(getGeometry(e.geometry),getMaterial(e.material));break;case"PointCloud":case"Points":T=new Ev(getGeometry(e.geometry),getMaterial(e.material));break;case"Sprite":T=new cp(getMaterial(e.material));break;case"Group":T=new Gf;break;case"Bone":T=new kp;break;default:T=new kd}if(T.uuid=e.uuid,void 0!==e.name&&(T.name=e.name),void 0!==e.matrix?(T.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(T.matrixAutoUpdate=e.matrixAutoUpdate),T.matrixAutoUpdate&&T.matrix.decompose(T.position,T.quaternion,T.scale)):(void 0!==e.position&&T.position.fromArray(e.position),void 0!==e.rotation&&T.rotation.fromArray(e.rotation),void 0!==e.quaternion&&T.quaternion.fromArray(e.quaternion),void 0!==e.scale&&T.scale.fromArray(e.scale)),void 0!==e.up&&T.up.fromArray(e.up),void 0!==e.castShadow&&(T.castShadow=e.castShadow),void 0!==e.receiveShadow&&(T.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.intensity&&(T.shadow.intensity=e.shadow.intensity),void 0!==e.shadow.bias&&(T.shadow.bias=e.shadow.bias),void 0!==e.shadow.normalBias&&(T.shadow.normalBias=e.shadow.normalBias),void 0!==e.shadow.radius&&(T.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&T.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(T.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(T.visible=e.visible),void 0!==e.frustumCulled&&(T.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(T.renderOrder=e.renderOrder),void 0!==e.userData&&(T.userData=e.userData),void 0!==e.layers&&(T.layers.mask=e.layers),void 0!==e.children)for(var L=e.children,U=0;U<L.length;U++)T.add(this.parseObject(L[U],_,S,k,E));if(void 0!==e.animations)for(var B=e.animations,z=0;z<B.length;z++){var G=B[z];T.animations.push(E[G])}if("LOD"===e.type){void 0!==e.autoUpdate&&(T.autoUpdate=e.autoUpdate);for(var j=e.levels,V=0;V<j.length;V++){var H=j[V],W=T.getObjectByProperty("uuid",H.object);void 0!==W&&T.addLevel(W,H.distance,H.hysteresis)}}return T}},{key:"bindSkeletons",value:function(e,_){0!==Object.keys(_).length&&e.traverse(function(e){if(!0===e.isSkinnedMesh&&void 0!==e.skeleton){var S=_[e.skeleton];void 0===S||e.bind(S,e.bindMatrix)}})}},{key:"bindLightTargets",value:function(e){e.traverse(function(_){if(_.isDirectionalLight||_.isSpotLight){var S=_.target,k=e.getObjectByProperty("uuid",S);_.target=void 0!==k?k:new kd}})}}]);var _,S,k}(am),jm={UVMapping:hl,CubeReflectionMapping:dl,CubeRefractionMapping:fl,EquirectangularReflectionMapping:pl,EquirectangularRefractionMapping:vl,CubeUVReflectionMapping:gl},Vm={RepeatWrapping:ml,ClampToEdgeWrapping:yl,MirroredRepeatWrapping:_l},Hm={NearestFilter:bl,NearestMipmapNearestFilter:Sl,NearestMipmapLinearFilter:wl,LinearFilter:xl,LinearMipmapNearestFilter:kl,LinearMipmapLinearFilter:Cl},Wm=new WeakMap,qm=function(e){function ImageBitmapLoader(e){var _;return _classCallCheck3(this,ImageBitmapLoader),(_=_callSuper(this,ImageBitmapLoader,[e])).isImageBitmapLoader=!0,_.options={premultiplyAlpha:"none"},_._abortController=new AbortController,_}return _inherits(ImageBitmapLoader,e),_createClass3(ImageBitmapLoader,[{key:"setOptions",value:function(e){return this.options=e,this}},{key:"load",value:function(e,_,S,k){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var E=this,T=rm.get("image-bitmap:".concat(e));if(void 0!==T)return E.manager.itemStart(e),T.then?void T.then(function(S){if(!0!==Wm.has(T))return _&&_(S),E.manager.itemEnd(e),S;k&&k(Wm.get(T)),E.manager.itemError(e),E.manager.itemEnd(e)}):(setTimeout(function(){_&&_(T),E.manager.itemEnd(e)},0),T);var M={};M.credentials="anonymous"===this.crossOrigin?"same-origin":"include",M.headers=this.requestHeader,M.signal="function"==typeof AbortSignal.any?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal;var I=fetch(e,M).then(function(e){return e.blob()}).then(function(e){return createImageBitmap(e,Object.assign(E.options,{colorSpaceConversion:"none"}))}).then(function(S){return rm.add("image-bitmap:".concat(e),S),_&&_(S),E.manager.itemEnd(e),S}).catch(function(_){k&&k(_),Wm.set(I,_),rm.remove("image-bitmap:".concat(e)),E.manager.itemError(e),E.manager.itemEnd(e)});rm.add("image-bitmap:".concat(e),I),E.manager.itemStart(e)}},{key:"abort",value:function(){return this._abortController.abort(),this._abortController=new AbortController,this}}])}(am),Xm=function(){return _createClass3(function AudioContext(){_classCallCheck3(this,AudioContext)},null,[{key:"getContext",value:function(){return void 0===Nm&&(Nm=new(window.AudioContext||window.webkitAudioContext)),Nm}},{key:"setContext",value:function(e){Nm=e}}])}(),Ym=function(e){function AudioLoader(e){return _classCallCheck3(this,AudioLoader),_callSuper(this,AudioLoader,[e])}return _inherits(AudioLoader,e),_createClass3(AudioLoader,[{key:"load",value:function(e,_,S,k){var E=this,T=new um(this.manager);function handleError(_){k&&k(_),E.manager.itemError(e)}T.setResponseType("arraybuffer"),T.setPath(this.path),T.setRequestHeader(this.requestHeader),T.setWithCredentials(this.withCredentials),T.load(e,function(e){try{var S=e.slice(0);Xm.getContext().decodeAudioData(S,function(e){_(e)}).catch(handleError)}catch(fo){handleError(fo)}},S,k)}}])}(am),Km=new Qh,Jm=new Qh,Qm=new Qh,Zm=function(){return _createClass3(function StereoCamera(){_classCallCheck3(this,StereoCamera),this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Ff,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Ff,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}},[{key:"update",value:function(e){var _=this._cache;if(_.focus!==e.focus||_.fov!==e.fov||_.aspect!==e.aspect*this.aspect||_.near!==e.near||_.far!==e.far||_.zoom!==e.zoom||_.eyeSep!==this.eyeSep){_.focus=e.focus,_.fov=e.fov,_.aspect=e.aspect*this.aspect,_.near=e.near,_.far=e.far,_.zoom=e.zoom,_.eyeSep=this.eyeSep,Qm.copy(e.projectionMatrix);var S,k,E=_.eyeSep/2,T=E*_.near/_.focus,M=_.near*Math.tan(Jc*_.fov*.5)/_.zoom;Jm.elements[12]=-E,Km.elements[12]=E,S=-M*_.aspect+T,k=M*_.aspect+T,Qm.elements[0]=2*_.near/(k-S),Qm.elements[8]=(k+S)/(k-S),this.cameraL.projectionMatrix.copy(Qm),S=-M*_.aspect-T,k=M*_.aspect-T,Qm.elements[0]=2*_.near/(k-S),Qm.elements[8]=(k+S)/(k-S),this.cameraR.projectionMatrix.copy(Qm)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(Jm),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(Km)}}])}(),$m=function(e){function ArrayCamera(){var e,_=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return _classCallCheck3(this,ArrayCamera),(e=_callSuper(this,ArrayCamera)).isArrayCamera=!0,e.isMultiViewCamera=!1,e.cameras=_,e}return _inherits(ArrayCamera,e),_createClass3(ArrayCamera)}(Ff),ey=function(){return _createClass3(function Clock(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];_classCallCheck3(this,Clock),this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1},[{key:"start",value:function(){this.startTime=performance.now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}},{key:"stop",value:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}},{key:"getElapsedTime",value:function(){return this.getDelta(),this.elapsedTime}},{key:"getDelta",value:function(){var e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var _=performance.now();e=(_-this.oldTime)/1e3,this.oldTime=_,this.elapsedTime+=e}return e}}])}();D("aG",ey);var ty=new th,ry=new eh,ny=new th,iy=new th,ay=new th,oy=function(e){function AudioListener(){var e;return _classCallCheck3(this,AudioListener),(e=_callSuper(this,AudioListener)).type="AudioListener",e.context=Xm.getContext(),e.gain=e.context.createGain(),e.gain.connect(e.context.destination),e.filter=null,e.timeDelta=0,e._clock=new ey,e}return _inherits(AudioListener,e),_createClass3(AudioListener,[{key:"getInput",value:function(){return this.gain}},{key:"removeFilter",value:function(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}},{key:"getFilter",value:function(){return this.filter}},{key:"setFilter",value:function(e){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}},{key:"getMasterVolume",value:function(){return this.gain.gain.value}},{key:"setMasterVolume",value:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}},{key:"updateMatrixWorld",value:function(e){_superPropGet(AudioListener,"updateMatrixWorld",this,3)([e]);var _=this.context.listener;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(ty,ry,ny),iy.set(0,0,-1).applyQuaternion(ry),ay.set(0,1,0).applyQuaternion(ry),_.positionX){var S=this.context.currentTime+this.timeDelta;_.positionX.linearRampToValueAtTime(ty.x,S),_.positionY.linearRampToValueAtTime(ty.y,S),_.positionZ.linearRampToValueAtTime(ty.z,S),_.forwardX.linearRampToValueAtTime(iy.x,S),_.forwardY.linearRampToValueAtTime(iy.y,S),_.forwardZ.linearRampToValueAtTime(iy.z,S),_.upX.linearRampToValueAtTime(ay.x,S),_.upY.linearRampToValueAtTime(ay.y,S),_.upZ.linearRampToValueAtTime(ay.z,S)}else _.setPosition(ty.x,ty.y,ty.z),_.setOrientation(iy.x,iy.y,iy.z,ay.x,ay.y,ay.z)}}])}(kd),sy=function(e){function Audio(e){var _;return _classCallCheck3(this,Audio),(_=_callSuper(this,Audio)).type="Audio",_.listener=e,_.context=e.context,_.gain=_.context.createGain(),_.gain.connect(e.getInput()),_.autoplay=!1,_.buffer=null,_.detune=0,_.loop=!1,_.loopStart=0,_.loopEnd=0,_.offset=0,_.duration=void 0,_.playbackRate=1,_.isPlaying=!1,_.hasPlaybackControl=!0,_.source=null,_.sourceType="empty",_._startedAt=0,_._progress=0,_._connected=!1,_.filters=[],_}return _inherits(Audio,e),_createClass3(Audio,[{key:"getOutput",value:function(){return this.gain}},{key:"setNodeSource",value:function(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}},{key:"setMediaElementSource",value:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}},{key:"setMediaStreamSource",value:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}},{key:"setBuffer",value:function(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}},{key:"play",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!0!==this.isPlaying&&!1!==this.hasPlaybackControl){this._startedAt=this.context.currentTime+e;var _=this.context.createBufferSource();return _.buffer=this.buffer,_.loop=this.loop,_.loopStart=this.loopStart,_.loopEnd=this.loopEnd,_.onended=this.onEnded.bind(this),_.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=_,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}}},{key:"pause",value:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}},{key:"stop",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!1!==this.hasPlaybackControl)return this._progress=0,null!==this.source&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}},{key:"connect",value:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var e=1,_=this.filters.length;e<_;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}},{key:"disconnect",value:function(){if(!1!==this._connected){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var e=1,_=this.filters.length;e<_;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}},{key:"getFilters",value:function(){return this.filters}},{key:"setFilters",value:function(e){return e||(e=[]),!0===this._connected?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}},{key:"setDetune",value:function(e){return this.detune=e,!0===this.isPlaying&&void 0!==this.source.detune&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}},{key:"getDetune",value:function(){return this.detune}},{key:"getFilter",value:function(){return this.getFilters()[0]}},{key:"setFilter",value:function(e){return this.setFilters(e?[e]:[])}},{key:"setPlaybackRate",value:function(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}},{key:"getPlaybackRate",value:function(){return this.playbackRate}},{key:"onEnded",value:function(){this.isPlaying=!1,this._progress=0}},{key:"getLoop",value:function(){return!1!==this.hasPlaybackControl&&this.loop}},{key:"setLoop",value:function(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this}},{key:"setLoopStart",value:function(e){return this.loopStart=e,this}},{key:"setLoopEnd",value:function(e){return this.loopEnd=e,this}},{key:"getVolume",value:function(){return this.gain.gain.value}},{key:"setVolume",value:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}},{key:"copy",value:function(e,_){return _superPropGet(Audio,"copy",this,3)([e,_]),"buffer"!==e.sourceType||(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice()),this}},{key:"clone",value:function(e){return new this.constructor(this.listener).copy(this,e)}}])}(kd),uy=new th,ly=new eh,cy=new th,hy=new th,dy=function(e){function PositionalAudio(e){var _;return _classCallCheck3(this,PositionalAudio),(_=_callSuper(this,PositionalAudio,[e])).panner=_.context.createPanner(),_.panner.panningModel="HRTF",_.panner.connect(_.gain),_}return _inherits(PositionalAudio,e),_createClass3(PositionalAudio,[{key:"connect",value:function(){return _superPropGet(PositionalAudio,"connect",this,3)([]),this.panner.connect(this.gain),this}},{key:"disconnect",value:function(){return _superPropGet(PositionalAudio,"disconnect",this,3)([]),this.panner.disconnect(this.gain),this}},{key:"getOutput",value:function(){return this.panner}},{key:"getRefDistance",value:function(){return this.panner.refDistance}},{key:"setRefDistance",value:function(e){return this.panner.refDistance=e,this}},{key:"getRolloffFactor",value:function(){return this.panner.rolloffFactor}},{key:"setRolloffFactor",value:function(e){return this.panner.rolloffFactor=e,this}},{key:"getDistanceModel",value:function(){return this.panner.distanceModel}},{key:"setDistanceModel",value:function(e){return this.panner.distanceModel=e,this}},{key:"getMaxDistance",value:function(){return this.panner.maxDistance}},{key:"setMaxDistance",value:function(e){return this.panner.maxDistance=e,this}},{key:"setDirectionalCone",value:function(e,_,S){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=_,this.panner.coneOuterGain=S,this}},{key:"updateMatrixWorld",value:function(e){if(_superPropGet(PositionalAudio,"updateMatrixWorld",this,3)([e]),!0!==this.hasPlaybackControl||!1!==this.isPlaying){this.matrixWorld.decompose(uy,ly,cy),hy.set(0,0,1).applyQuaternion(ly);var _=this.panner;if(_.positionX){var S=this.context.currentTime+this.listener.timeDelta;_.positionX.linearRampToValueAtTime(uy.x,S),_.positionY.linearRampToValueAtTime(uy.y,S),_.positionZ.linearRampToValueAtTime(uy.z,S),_.orientationX.linearRampToValueAtTime(hy.x,S),_.orientationY.linearRampToValueAtTime(hy.y,S),_.orientationZ.linearRampToValueAtTime(hy.z,S)}else _.setPosition(uy.x,uy.y,uy.z),_.setOrientation(hy.x,hy.y,hy.z)}}}])}(sy),fy=function(){return _createClass3(function AudioAnalyser(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2048;_classCallCheck3(this,AudioAnalyser),this.analyser=e.context.createAnalyser(),this.analyser.fftSize=_,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)},[{key:"getFrequencyData",value:function(){return this.analyser.getByteFrequencyData(this.data),this.data}},{key:"getAverageFrequency",value:function(){for(var e=0,_=this.getFrequencyData(),S=0;S<_.length;S++)e+=_[S];return e/_.length}}])}(),py=function(){return _createClass3(function PropertyMixer(e,_,S){var k,E,T;switch(_classCallCheck3(this,PropertyMixer),this.binding=e,this.valueSize=S,_){case"quaternion":k=this._slerp,E=this._slerpAdditive,T=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*S),this._workIndex=5;break;case"string":case"bool":k=this._select,E=this._select,T=this._setAdditiveIdentityOther,this.buffer=new Array(5*S);break;default:k=this._lerp,E=this._lerpAdditive,T=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*S)}this._mixBufferRegion=k,this._mixBufferRegionAdditive=E,this._setIdentity=T,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0},[{key:"accumulate",value:function(e,_){var S=this.buffer,k=this.valueSize,E=e*k+k,T=this.cumulativeWeight;if(0===T){for(var M=0;M!==k;++M)S[E+M]=S[M];T=_}else{var I=_/(T+=_);this._mixBufferRegion(S,E,0,I,k)}this.cumulativeWeight=T}},{key:"accumulateAdditive",value:function(e){var _=this.buffer,S=this.valueSize,k=S*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(_,k,0,e,S),this.cumulativeWeightAdditive+=e}},{key:"apply",value:function(e){var _=this.valueSize,S=this.buffer,k=e*_+_,E=this.cumulativeWeight,T=this.cumulativeWeightAdditive,M=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,E<1){var I=_*this._origIndex;this._mixBufferRegion(S,k,I,1-E,_)}T>0&&this._mixBufferRegionAdditive(S,k,this._addIndex*_,1,_);for(var R=_,O=_+_;R!==O;++R)if(S[R]!==S[R+_]){M.setValue(S,k);break}}},{key:"saveOriginalState",value:function(){var e=this.binding,_=this.buffer,S=this.valueSize,k=S*this._origIndex;e.getValue(_,k);for(var E=S,T=k;E!==T;++E)_[E]=_[k+E%S];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}},{key:"restoreOriginalState",value:function(){var e=3*this.valueSize;this.binding.setValue(this.buffer,e)}},{key:"_setAdditiveIdentityNumeric",value:function(){for(var e=this._addIndex*this.valueSize,_=e+this.valueSize,S=e;S<_;S++)this.buffer[S]=0}},{key:"_setAdditiveIdentityQuaternion",value:function(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}},{key:"_setAdditiveIdentityOther",value:function(){for(var e=this._origIndex*this.valueSize,_=this._addIndex*this.valueSize,S=0;S<this.valueSize;S++)this.buffer[_+S]=this.buffer[e+S]}},{key:"_select",value:function(e,_,S,k,E){if(k>=.5)for(var T=0;T!==E;++T)e[_+T]=e[S+T]}},{key:"_slerp",value:function(e,_,S,k){eh.slerpFlat(e,_,e,_,e,S,k)}},{key:"_slerpAdditive",value:function(e,_,S,k,E){var T=this._workIndex*E;eh.multiplyQuaternionsFlat(e,T,e,_,e,S),eh.slerpFlat(e,_,e,_,e,T,k)}},{key:"_lerp",value:function(e,_,S,k,E){for(var T=1-k,M=0;M!==E;++M){var I=_+M;e[I]=e[I]*T+e[S+M]*k}}},{key:"_lerpAdditive",value:function(e,_,S,k,E){for(var T=0;T!==E;++T){var M=_+T;e[M]=e[M]+e[S+T]*k}}}])}(),vy="\\[\\]\\.:\\/",gy=new RegExp("["+vy+"]","g"),my="[^"+vy+"]",yy="[^"+vy.replace("\\.","")+"]",_y=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",my)+/(WCOD+)?/.source.replace("WCOD",yy)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",my)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",my)+"$"),by=["material","materials","bones","map"],Sy=function(){return _createClass3(function Composite(e,_,S){_classCallCheck3(this,Composite);var k=S||wy.parseTrackName(_);this._targetGroup=e,this._bindings=e.subscribe_(_,k)},[{key:"getValue",value:function(e,_){this.bind();var S=this._targetGroup.nCachedObjects_,k=this._bindings[S];void 0!==k&&k.getValue(e,_)}},{key:"setValue",value:function(e,_){for(var S=this._bindings,k=this._targetGroup.nCachedObjects_,E=S.length;k!==E;++k)S[k].setValue(e,_)}},{key:"bind",value:function(){for(var e=this._bindings,_=this._targetGroup.nCachedObjects_,S=e.length;_!==S;++_)e[_].bind()}},{key:"unbind",value:function(){for(var e=this._bindings,_=this._targetGroup.nCachedObjects_,S=e.length;_!==S;++_)e[_].unbind()}}])}(),wy=function(){function PropertyBinding(e,_,S){_classCallCheck3(this,PropertyBinding),this.path=_,this.parsedPath=S||PropertyBinding.parseTrackName(_),this.node=PropertyBinding.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}return _createClass3(PropertyBinding,[{key:"_getValue_unavailable",value:function(){}},{key:"_setValue_unavailable",value:function(){}},{key:"_getValue_direct",value:function(e,_){e[_]=this.targetObject[this.propertyName]}},{key:"_getValue_array",value:function(e,_){for(var S=this.resolvedProperty,k=0,E=S.length;k!==E;++k)e[_++]=S[k]}},{key:"_getValue_arrayElement",value:function(e,_){e[_]=this.resolvedProperty[this.propertyIndex]}},{key:"_getValue_toArray",value:function(e,_){this.resolvedProperty.toArray(e,_)}},{key:"_setValue_direct",value:function(e,_){this.targetObject[this.propertyName]=e[_]}},{key:"_setValue_direct_setNeedsUpdate",value:function(e,_){this.targetObject[this.propertyName]=e[_],this.targetObject.needsUpdate=!0}},{key:"_setValue_direct_setMatrixWorldNeedsUpdate",value:function(e,_){this.targetObject[this.propertyName]=e[_],this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_array",value:function(e,_){for(var S=this.resolvedProperty,k=0,E=S.length;k!==E;++k)S[k]=e[_++]}},{key:"_setValue_array_setNeedsUpdate",value:function(e,_){for(var S=this.resolvedProperty,k=0,E=S.length;k!==E;++k)S[k]=e[_++];this.targetObject.needsUpdate=!0}},{key:"_setValue_array_setMatrixWorldNeedsUpdate",value:function(e,_){for(var S=this.resolvedProperty,k=0,E=S.length;k!==E;++k)S[k]=e[_++];this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_arrayElement",value:function(e,_){this.resolvedProperty[this.propertyIndex]=e[_]}},{key:"_setValue_arrayElement_setNeedsUpdate",value:function(e,_){this.resolvedProperty[this.propertyIndex]=e[_],this.targetObject.needsUpdate=!0}},{key:"_setValue_arrayElement_setMatrixWorldNeedsUpdate",value:function(e,_){this.resolvedProperty[this.propertyIndex]=e[_],this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_fromArray",value:function(e,_){this.resolvedProperty.fromArray(e,_)}},{key:"_setValue_fromArray_setNeedsUpdate",value:function(e,_){this.resolvedProperty.fromArray(e,_),this.targetObject.needsUpdate=!0}},{key:"_setValue_fromArray_setMatrixWorldNeedsUpdate",value:function(e,_){this.resolvedProperty.fromArray(e,_),this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_getValue_unbound",value:function(e,_){this.bind(),this.getValue(e,_)}},{key:"_setValue_unbound",value:function(e,_){this.bind(),this.setValue(e,_)}},{key:"bind",value:function(){var e=this.node,_=this.parsedPath,S=_.objectName,k=_.propertyName,E=_.propertyIndex;if(e||(e=PropertyBinding.findNode(this.rootNode,_.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,e){if(S){var T=_.objectIndex;switch(S){case"materials":if(!e.material)return;if(!e.material.materials)return;e=e.material.materials;break;case"bones":if(!e.skeleton)return;e=e.skeleton.bones;for(var M=0;M<e.length;M++)if(e[M].name===T){T=M;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material)return;if(!e.material.map)return;e=e.material.map;break;default:if(void 0===e[S])return;e=e[S]}if(void 0!==T){if(void 0===e[T])return;e=e[T]}}var I=e[k];if(void 0!==I){var R=this.Versioning.None;this.targetObject=e,!0===e.isMaterial?R=this.Versioning.NeedsUpdate:!0===e.isObject3D&&(R=this.Versioning.MatrixWorldNeedsUpdate);var O=this.BindingType.Direct;if(void 0!==E){if("morphTargetInfluences"===k){if(!e.geometry)return;if(!e.geometry.morphAttributes)return;void 0!==e.morphTargetDictionary[E]&&(E=e.morphTargetDictionary[E])}O=this.BindingType.ArrayElement,this.resolvedProperty=I,this.propertyIndex=E}else void 0!==I.fromArray&&void 0!==I.toArray?(O=this.BindingType.HasFromToArray,this.resolvedProperty=I):Array.isArray(I)?(O=this.BindingType.EntireArray,this.resolvedProperty=I):this.propertyName=k;this.getValue=this.GetterByBindingType[O],this.setValue=this.SetterByBindingTypeAndVersioning[O][R]}else _.nodeName}}},{key:"unbind",value:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}],[{key:"create",value:function(e,_,S){return e&&e.isAnimationObjectGroup?new PropertyBinding.Composite(e,_,S):new PropertyBinding(e,_,S)}},{key:"sanitizeNodeName",value:function(e){return e.replace(/\s/g,"_").replace(gy,"")}},{key:"parseTrackName",value:function(e){var _=_y.exec(e);if(null===_)throw new Error("PropertyBinding: Cannot parse trackName: "+e);var S={nodeName:_[2],objectName:_[3],objectIndex:_[4],propertyName:_[5],propertyIndex:_[6]},k=S.nodeName&&S.nodeName.lastIndexOf(".");if(void 0!==k&&-1!==k){var E=S.nodeName.substring(k+1);-1!==by.indexOf(E)&&(S.nodeName=S.nodeName.substring(0,k),S.objectName=E)}if(null===S.propertyName||0===S.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return S}},{key:"findNode",value:function(e,_){if(void 0===_||""===_||"."===_||-1===_||_===e.name||_===e.uuid)return e;if(e.skeleton){var S=e.skeleton.getBoneByName(_);if(void 0!==S)return S}if(e.children){var _searchNodeSubtree=function(e){for(var S=0;S<e.length;S++){var k=e[S];if(k.name===_||k.uuid===_)return k;var E=_searchNodeSubtree(k.children);if(E)return E}return null},k=_searchNodeSubtree(e.children);if(k)return k}return null}}])}();wy.Composite=Sy,wy.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},wy.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},wy.prototype.GetterByBindingType=[wy.prototype._getValue_direct,wy.prototype._getValue_array,wy.prototype._getValue_arrayElement,wy.prototype._getValue_toArray],wy.prototype.SetterByBindingTypeAndVersioning=[[wy.prototype._setValue_direct,wy.prototype._setValue_direct_setNeedsUpdate,wy.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[wy.prototype._setValue_array,wy.prototype._setValue_array_setNeedsUpdate,wy.prototype._setValue_array_setMatrixWorldNeedsUpdate],[wy.prototype._setValue_arrayElement,wy.prototype._setValue_arrayElement_setNeedsUpdate,wy.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[wy.prototype._setValue_fromArray,wy.prototype._setValue_fromArray_setNeedsUpdate,wy.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];var xy=function(){return _createClass3(function AnimationObjectGroup(){_classCallCheck3(this,AnimationObjectGroup),this.isAnimationObjectGroup=!0,this.uuid=generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var e={};this._indicesByUUID=e;for(var _=0,S=arguments.length;_!==S;++_)e[arguments[_].uuid]=_;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var k=this;this.stats={objects:{get total(){return k._objects.length},get inUse(){return this.total-k.nCachedObjects_}},get bindingsPerObject(){return k._bindings.length}}},[{key:"add",value:function(){for(var e=this._objects,_=this._indicesByUUID,S=this._paths,k=this._parsedPaths,E=this._bindings,T=E.length,M=e.length,I=this.nCachedObjects_,R=0,O=arguments.length;R!==O;++R){var D=arguments[R],L=D.uuid,U=_[L];if(void 0===U){U=M++,_[L]=U,e.push(D);for(var B=0,z=T;B!==z;++B)E[B].push(new wy(D,S[B],k[B]))}else if(U<I){e[U];var G=--I,j=e[G];_[j.uuid]=U,e[U]=j,_[L]=G,e[G]=D;for(var V=0,H=T;V!==H;++V){var W=E[V],q=W[G],X=W[U];W[U]=q,void 0===X&&(X=new wy(D,S[V],k[V])),W[G]=X}}else e[U]}this.nCachedObjects_=I}},{key:"remove",value:function(){for(var e=this._objects,_=this._indicesByUUID,S=this._bindings,k=S.length,E=this.nCachedObjects_,T=0,M=arguments.length;T!==M;++T){var I=arguments[T],R=I.uuid,O=_[R];if(void 0!==O&&O>=E){var D=E++,L=e[D];_[L.uuid]=O,e[O]=L,_[R]=D,e[D]=I;for(var U=0,B=k;U!==B;++U){var z=S[U],G=z[D],j=z[O];z[O]=G,z[D]=j}}}this.nCachedObjects_=E}},{key:"uncache",value:function(){for(var e=this._objects,_=this._indicesByUUID,S=this._bindings,k=S.length,E=this.nCachedObjects_,T=e.length,M=0,I=arguments.length;M!==I;++M){var R=arguments[M].uuid,O=_[R];if(void 0!==O)if(delete _[R],O<E){var D=--E,L=e[D],U=--T,B=e[U];_[L.uuid]=O,e[O]=L,_[B.uuid]=D,e[D]=B,e.pop();for(var z=0,G=k;z!==G;++z){var j=S[z],V=j[D],H=j[U];j[O]=V,j[D]=H,j.pop()}}else{var W=--T,q=e[W];W>0&&(_[q.uuid]=O),e[O]=q,e.pop();for(var X=0,Y=k;X!==Y;++X){var K=S[X];K[O]=K[W],K.pop()}}}this.nCachedObjects_=E}},{key:"subscribe_",value:function(e,_){var S=this._bindingsIndicesByPath,k=S[e],E=this._bindings;if(void 0!==k)return E[k];var T=this._paths,M=this._parsedPaths,I=this._objects,R=I.length,O=this.nCachedObjects_,D=new Array(R);k=E.length,S[e]=k,T.push(e),M.push(_),E.push(D);for(var L=O,U=I.length;L!==U;++L){var B=I[L];D[L]=new wy(B,e,_)}return D}},{key:"unsubscribe_",value:function(e){var _=this._bindingsIndicesByPath,S=_[e];if(void 0!==S){var k=this._paths,E=this._parsedPaths,T=this._bindings,M=T.length-1,I=T[M];_[e[M]]=S,T[S]=I,T.pop(),E[S]=E[M],E.pop(),k[S]=k[M],k.pop()}}}])}(),ky=function(){return _createClass3(function AnimationAction(e,_){var S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,k=arguments.length>3&&void 0!==arguments[3]?arguments[3]:_.blendMode;_classCallCheck3(this,AnimationAction),this._mixer=e,this._clip=_,this._localRoot=S,this.blendMode=k;for(var E=_.tracks,T=E.length,M=new Array(T),I={endingStart:Rc,endingEnd:Rc},R=0;R!==T;++R){var O=E[R].createInterpolant(null);M[R]=O,O.settings=I}this._interpolantSettings=I,this._interpolants=M,this._propertyBindings=new Array(T),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0},[{key:"play",value:function(){return this._mixer._activateAction(this),this}},{key:"stop",value:function(){return this._mixer._deactivateAction(this),this.reset()}},{key:"reset",value:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}},{key:"isRunning",value:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}},{key:"isScheduled",value:function(){return this._mixer._isActiveAction(this)}},{key:"startAt",value:function(e){return this._startTime=e,this}},{key:"setLoop",value:function(e,_){return this.loop=e,this.repetitions=_,this}},{key:"setEffectiveWeight",value:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}},{key:"getEffectiveWeight",value:function(){return this._effectiveWeight}},{key:"fadeIn",value:function(e){return this._scheduleFading(e,0,1)}},{key:"fadeOut",value:function(e){return this._scheduleFading(e,1,0)}},{key:"crossFadeFrom",value:function(e,_){var S=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e.fadeOut(_),this.fadeIn(_),!0===S){var k=this._clip.duration,E=e._clip.duration,T=E/k,M=k/E;e.warp(1,T,_),this.warp(M,1,_)}return this}},{key:"crossFadeTo",value:function(e,_){var S=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e.crossFadeFrom(this,_,S)}},{key:"stopFading",value:function(){var e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}},{key:"setEffectiveTimeScale",value:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}},{key:"getEffectiveTimeScale",value:function(){return this._effectiveTimeScale}},{key:"setDuration",value:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}},{key:"syncWith",value:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}},{key:"halt",value:function(e){return this.warp(this._effectiveTimeScale,0,e)}},{key:"warp",value:function(e,_,S){var k=this._mixer,E=k.time,T=this.timeScale,M=this._timeScaleInterpolant;null===M&&(M=k._lendControlInterpolant(),this._timeScaleInterpolant=M);var I=M.parameterPositions,R=M.sampleValues;return I[0]=E,I[1]=E+S,R[0]=e/T,R[1]=_/T,this}},{key:"stopWarping",value:function(){var e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}},{key:"getMixer",value:function(){return this._mixer}},{key:"getClip",value:function(){return this._clip}},{key:"getRoot",value:function(){return this._localRoot||this._mixer._root}},{key:"_update",value:function(e,_,S,k){if(this.enabled){var E=this._startTime;if(null!==E){var T=(e-E)*S;T<0||0===S?_=0:(this._startTime=null,_=S*T)}_*=this._updateTimeScale(e);var M=this._updateTime(_),I=this._updateWeight(e);if(I>0){var R=this._interpolants,O=this._propertyBindings;if(this.blendMode===Lc)for(var D=0,L=R.length;D!==L;++D)R[D].evaluate(M),O[D].accumulateAdditive(I);else for(var U=0,B=R.length;U!==B;++U)R[U].evaluate(M),O[U].accumulate(k,I)}}else this._updateWeight(e)}},{key:"_updateWeight",value:function(e){var _=0;if(this.enabled){_=this.weight;var S=this._weightInterpolant;if(null!==S){var k=S.evaluate(e)[0];_*=k,e>S.parameterPositions[1]&&(this.stopFading(),0===k&&(this.enabled=!1))}}return this._effectiveWeight=_,_}},{key:"_updateTimeScale",value:function(e){var _=0;if(!this.paused){_=this.timeScale;var S=this._timeScaleInterpolant;if(null!==S)_*=S.evaluate(e)[0],e>S.parameterPositions[1]&&(this.stopWarping(),0===_?this.paused=!0:this.timeScale=_)}return this._effectiveTimeScale=_,_}},{key:"_updateTime",value:function(e){var _=this._clip.duration,S=this.loop,k=this.time+e,E=this._loopCount,T=2202===S;if(0===e)return-1===E||!T||1&~E?k:_-k;if(2200===S){-1===E&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(k>=_)k=_;else{if(!(k<0)){this.time=k;break e}k=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=k,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===E&&(e>=0?(E=0,this._setEndings(!0,0===this.repetitions,T)):this._setEndings(0===this.repetitions,!0,T)),k>=_||k<0){var M=Math.floor(k/_);k-=_*M,E+=Math.abs(M);var I=this.repetitions-E;if(I<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,k=e>0?_:0,this.time=k,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===I){var R=e<0;this._setEndings(R,!R,T)}else this._setEndings(!1,!1,T);this._loopCount=E,this.time=k,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:M})}}else this.time=k;if(T&&!(1&~E))return _-k}return k}},{key:"_setEndings",value:function(e,_,S){var k=this._interpolantSettings;S?(k.endingStart=Pc,k.endingEnd=Pc):(k.endingStart=e?this.zeroSlopeAtStart?Pc:Rc:Oc,k.endingEnd=_?this.zeroSlopeAtEnd?Pc:Rc:Oc)}},{key:"_scheduleFading",value:function(e,_,S){var k=this._mixer,E=k.time,T=this._weightInterpolant;null===T&&(T=k._lendControlInterpolant(),this._weightInterpolant=T);var M=T.parameterPositions,I=T.sampleValues;return M[0]=E,I[0]=_,M[1]=E+e,I[1]=S,this}}])}(),Cy=new Float32Array(1),Ay=function(e){function AnimationMixer(e){var _;return _classCallCheck3(this,AnimationMixer),(_=_callSuper(this,AnimationMixer))._root=e,_._initMemoryManager(),_._accuIndex=0,_.time=0,_.timeScale=1,_}return _inherits(AnimationMixer,e),_createClass3(AnimationMixer,[{key:"_bindAction",value:function(e,_){var S=e._localRoot||this._root,k=e._clip.tracks,E=k.length,T=e._propertyBindings,M=e._interpolants,I=S.uuid,R=this._bindingsByRootAndName,O=R[I];void 0===O&&(O={},R[I]=O);for(var D=0;D!==E;++D){var L=k[D],U=L.name,B=O[U];if(void 0!==B)++B.referenceCount,T[D]=B;else{if(void 0!==(B=T[D])){null===B._cacheIndex&&(++B.referenceCount,this._addInactiveBinding(B,I,U));continue}var z=_&&_._propertyBindings[D].binding.parsedPath;++(B=new py(wy.create(S,U,z),L.ValueTypeName,L.getValueSize())).referenceCount,this._addInactiveBinding(B,I,U),T[D]=B}M[D].resultBuffer=B.buffer}}},{key:"_activateAction",value:function(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){var _=(e._localRoot||this._root).uuid,S=e._clip.uuid,k=this._actionsByClip[S];this._bindAction(e,k&&k.knownActions[0]),this._addInactiveAction(e,S,_)}for(var E=e._propertyBindings,T=0,M=E.length;T!==M;++T){var I=E[T];0===I.useCount++&&(this._lendBinding(I),I.saveOriginalState())}this._lendAction(e)}}},{key:"_deactivateAction",value:function(e){if(this._isActiveAction(e)){for(var _=e._propertyBindings,S=0,k=_.length;S!==k;++S){var E=_[S];0===--E.useCount&&(E.restoreOriginalState(),this._takeBackBinding(E))}this._takeBackAction(e)}}},{key:"_initMemoryManager",value:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}},{key:"_isActiveAction",value:function(e){var _=e._cacheIndex;return null!==_&&_<this._nActiveActions}},{key:"_addInactiveAction",value:function(e,_,S){var k=this._actions,E=this._actionsByClip,T=E[_];if(void 0===T)T={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,E[_]=T;else{var M=T.knownActions;e._byClipCacheIndex=M.length,M.push(e)}e._cacheIndex=k.length,k.push(e),T.actionByRoot[S]=e}},{key:"_removeInactiveAction",value:function(e){var _=this._actions,S=_[_.length-1],k=e._cacheIndex;S._cacheIndex=k,_[k]=S,_.pop(),e._cacheIndex=null;var E=e._clip.uuid,T=this._actionsByClip,M=T[E],I=M.knownActions,R=I[I.length-1],O=e._byClipCacheIndex;R._byClipCacheIndex=O,I[O]=R,I.pop(),e._byClipCacheIndex=null,delete M.actionByRoot[(e._localRoot||this._root).uuid],0===I.length&&delete T[E],this._removeInactiveBindingsForAction(e)}},{key:"_removeInactiveBindingsForAction",value:function(e){for(var _=e._propertyBindings,S=0,k=_.length;S!==k;++S){var E=_[S];0===--E.referenceCount&&this._removeInactiveBinding(E)}}},{key:"_lendAction",value:function(e){var _=this._actions,S=e._cacheIndex,k=this._nActiveActions++,E=_[k];e._cacheIndex=k,_[k]=e,E._cacheIndex=S,_[S]=E}},{key:"_takeBackAction",value:function(e){var _=this._actions,S=e._cacheIndex,k=--this._nActiveActions,E=_[k];e._cacheIndex=k,_[k]=e,E._cacheIndex=S,_[S]=E}},{key:"_addInactiveBinding",value:function(e,_,S){var k=this._bindingsByRootAndName,E=this._bindings,T=k[_];void 0===T&&(T={},k[_]=T),T[S]=e,e._cacheIndex=E.length,E.push(e)}},{key:"_removeInactiveBinding",value:function(e){var _=this._bindings,S=e.binding,k=S.rootNode.uuid,E=S.path,T=this._bindingsByRootAndName,M=T[k],I=_[_.length-1],R=e._cacheIndex;I._cacheIndex=R,_[R]=I,_.pop(),delete M[E],0===Object.keys(M).length&&delete T[k]}},{key:"_lendBinding",value:function(e){var _=this._bindings,S=e._cacheIndex,k=this._nActiveBindings++,E=_[k];e._cacheIndex=k,_[k]=e,E._cacheIndex=S,_[S]=E}},{key:"_takeBackBinding",value:function(e){var _=this._bindings,S=e._cacheIndex,k=--this._nActiveBindings,E=_[k];e._cacheIndex=k,_[k]=e,E._cacheIndex=S,_[S]=E}},{key:"_lendControlInterpolant",value:function(){var e=this._controlInterpolants,_=this._nActiveControlInterpolants++,S=e[_];return void 0===S&&((S=new Wg(new Float32Array(2),new Float32Array(2),1,Cy)).__cacheIndex=_,e[_]=S),S}},{key:"_takeBackControlInterpolant",value:function(e){var _=this._controlInterpolants,S=e.__cacheIndex,k=--this._nActiveControlInterpolants,E=_[k];e.__cacheIndex=k,_[k]=e,E.__cacheIndex=S,_[S]=E}},{key:"clipAction",value:function(e,_,S){var k=_||this._root,E=k.uuid,T="string"==typeof e?tm.findByName(k,e):e,M=null!==T?T.uuid:e,I=this._actionsByClip[M],R=null;if(void 0===S&&(S=null!==T?T.blendMode:Dc),void 0!==I){var O=I.actionByRoot[E];if(void 0!==O&&O.blendMode===S)return O;R=I.knownActions[0],null===T&&(T=R._clip)}if(null===T)return null;var D=new ky(this,T,_,S);return this._bindAction(D,R),this._addInactiveAction(D,M,E),D}},{key:"existingAction",value:function(e,_){var S=_||this._root,k=S.uuid,E="string"==typeof e?tm.findByName(S,e):e,T=E?E.uuid:e,M=this._actionsByClip[T];return void 0!==M&&M.actionByRoot[k]||null}},{key:"stopAllAction",value:function(){for(var e=this._actions,_=this._nActiveActions-1;_>=0;--_)e[_].stop();return this}},{key:"update",value:function(e){e*=this.timeScale;for(var _=this._actions,S=this._nActiveActions,k=this.time+=e,E=Math.sign(e),T=this._accuIndex^=1,M=0;M!==S;++M){_[M]._update(k,e,E,T)}for(var I=this._bindings,R=this._nActiveBindings,O=0;O!==R;++O)I[O].apply(T);return this}},{key:"setTime",value:function(e){this.time=0;for(var _=0;_<this._actions.length;_++)this._actions[_].time=0;return this.update(e)}},{key:"getRoot",value:function(){return this._root}},{key:"uncacheClip",value:function(e){var _=this._actions,S=e.uuid,k=this._actionsByClip,E=k[S];if(void 0!==E){for(var T=E.knownActions,M=0,I=T.length;M!==I;++M){var R=T[M];this._deactivateAction(R);var O=R._cacheIndex,D=_[_.length-1];R._cacheIndex=null,R._byClipCacheIndex=null,D._cacheIndex=O,_[O]=D,_.pop(),this._removeInactiveBindingsForAction(R)}delete k[S]}}},{key:"uncacheRoot",value:function(e){var _=e.uuid,S=this._actionsByClip;for(var k in S){var E=S[k].actionByRoot[_];void 0!==E&&(this._deactivateAction(E),this._removeInactiveAction(E))}var T=this._bindingsByRootAndName[_];if(void 0!==T)for(var M in T){var I=T[M];I.restoreOriginalState(),this._removeInactiveBinding(I)}}},{key:"uncacheAction",value:function(e,_){var S=this.existingAction(e,_);null!==S&&(this._deactivateAction(S),this._removeInactiveAction(S))}}])}(Xc),Ey=function(e){function RenderTarget3D(){var e,_=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,k=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,E=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return _classCallCheck3(this,RenderTarget3D),(e=_callSuper(this,RenderTarget3D,[_,S,E])).isRenderTarget3D=!0,e.depth=k,e.texture=new xh(null,_,S,k),e._setTextureOptions(E),e.texture.isRenderTargetTexture=!0,e}return _inherits(RenderTarget3D,e),_createClass3(RenderTarget3D)}(_h),Ty=function(){function Uniform(e){_classCallCheck3(this,Uniform),this.value=e}return _createClass3(Uniform,[{key:"clone",value:function(){return new Uniform(void 0===this.value.clone?this.value:this.value.clone())}}])}(),My=0,Iy=function(e){function UniformsGroup(){var e;return _classCallCheck3(this,UniformsGroup),(e=_callSuper(this,UniformsGroup)).isUniformsGroup=!0,Object.defineProperty(e,"id",{value:My++}),e.name="",e.usage=Vc,e.uniforms=[],e}return _inherits(UniformsGroup,e),_createClass3(UniformsGroup,[{key:"add",value:function(e){return this.uniforms.push(e),this}},{key:"remove",value:function(e){var _=this.uniforms.indexOf(e);return-1!==_&&this.uniforms.splice(_,1),this}},{key:"setName",value:function(e){return this.name=e,this}},{key:"setUsage",value:function(e){return this.usage=e,this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}},{key:"copy",value:function(e){this.name=e.name,this.usage=e.usage;var _=e.uniforms;this.uniforms.length=0;for(var S=0,k=_.length;S<k;S++)for(var E=Array.isArray(_[S])?_[S]:[_[S]],T=0;T<E.length;T++)this.uniforms.push(E[T].clone());return this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}])}(Xc),Ry=function(e){function InstancedInterleavedBuffer(e,_){var S,k=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return _classCallCheck3(this,InstancedInterleavedBuffer),(S=_callSuper(this,InstancedInterleavedBuffer,[e,_])).isInstancedInterleavedBuffer=!0,S.meshPerAttribute=k,S}return _inherits(InstancedInterleavedBuffer,e),_createClass3(InstancedInterleavedBuffer,[{key:"copy",value:function(e){return _superPropGet(InstancedInterleavedBuffer,"copy",this,3)([e]),this.meshPerAttribute=e.meshPerAttribute,this}},{key:"clone",value:function(e){var _=_superPropGet(InstancedInterleavedBuffer,"clone",this,3)([e]);return _.meshPerAttribute=this.meshPerAttribute,_}},{key:"toJSON",value:function(e){var _=_superPropGet(InstancedInterleavedBuffer,"toJSON",this,3)([e]);return _.isInstancedInterleavedBuffer=!0,_.meshPerAttribute=this.meshPerAttribute,_}}])}(Yf),Py=function(){return _createClass3(function GLBufferAttribute(e,_,S,k,E){var T=arguments.length>5&&void 0!==arguments[5]&&arguments[5];_classCallCheck3(this,GLBufferAttribute),this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=_,this.itemSize=S,this.elementSize=k,this.count=E,this.normalized=T,this.version=0},[{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"setBuffer",value:function(e){return this.buffer=e,this}},{key:"setType",value:function(e,_){return this.type=e,this.elementSize=_,this}},{key:"setItemSize",value:function(e){return this.itemSize=e,this}},{key:"setCount",value:function(e){return this.count=e,this}}])}(),Oy=new Qh,Dy=function(){return _createClass3(function Raycaster(e,_){var S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,k=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;_classCallCheck3(this,Raycaster),this.ray=new Jh(e,_),this.near=S,this.far=k,this.camera=null,this.layers=new ud,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}},[{key:"set",value:function(e,_){this.ray.set(e,_)}},{key:"setFromCamera",value:function(e,_){_.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(_.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(_).sub(this.ray.origin).normalize(),this.camera=_):_.isOrthographicCamera&&(this.ray.origin.set(e.x,e.y,(_.near+_.far)/(_.near-_.far)).unproject(_),this.ray.direction.set(0,0,-1).transformDirection(_.matrixWorld),this.camera=_)}},{key:"setFromXRController",value:function(e){return Oy.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(Oy),this}},{key:"intersectObject",value:function(e){var _=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return intersect(e,this,_,!(arguments.length>1&&void 0!==arguments[1])||arguments[1]),_.sort(ascSort),_}},{key:"intersectObjects",value:function(e){for(var _=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],k=0,E=e.length;k<E;k++)intersect(e[k],this,S,_);return S.sort(ascSort),S}}])}();function ascSort(e,_){return e.distance-_.distance}function intersect(e,_,S,k){var E=!0;e.layers.test(_.layers)&&(!1===e.raycast(_,S)&&(E=!1));if(!0===E&&!0===k)for(var T=e.children,M=0,I=T.length;M<I;M++)intersect(T[M],_,S,!0)}D("an",Dy);var Ly=function(){return _createClass3(function Timer(){_classCallCheck3(this,Timer),this._previousTime=0,this._currentTime=0,this._startTime=performance.now(),this._delta=0,this._elapsed=0,this._timescale=1,this._document=null,this._pageVisibilityHandler=null},[{key:"connect",value:function(e){this._document=e,void 0!==e.hidden&&(this._pageVisibilityHandler=handleVisibilityChange.bind(this),e.addEventListener("visibilitychange",this._pageVisibilityHandler,!1))}},{key:"disconnect",value:function(){null!==this._pageVisibilityHandler&&(this._document.removeEventListener("visibilitychange",this._pageVisibilityHandler),this._pageVisibilityHandler=null),this._document=null}},{key:"getDelta",value:function(){return this._delta/1e3}},{key:"getElapsed",value:function(){return this._elapsed/1e3}},{key:"getTimescale",value:function(){return this._timescale}},{key:"setTimescale",value:function(e){return this._timescale=e,this}},{key:"reset",value:function(){return this._currentTime=performance.now()-this._startTime,this}},{key:"dispose",value:function(){this.disconnect()}},{key:"update",value:function(e){return null!==this._pageVisibilityHandler&&!0===this._document.hidden?this._delta=0:(this._previousTime=this._currentTime,this._currentTime=(void 0!==e?e:performance.now())-this._startTime,this._delta=(this._currentTime-this._previousTime)*this._timescale,this._elapsed+=this._delta),this}}])}();function handleVisibilityChange(){!1===this._document.hidden&&this.reset()}var Fy=function(){return _createClass3(function Spherical(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;_classCallCheck3(this,Spherical),this.radius=e,this.phi=_,this.theta=S},[{key:"set",value:function(e,_,S){return this.radius=e,this.phi=_,this.theta=S,this}},{key:"copy",value:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}},{key:"makeSafe",value:function(){var e=1e-6;return this.phi=clamp$1(this.phi,e,Math.PI-e),this}},{key:"setFromVector3",value:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}},{key:"setFromCartesianCoords",value:function(e,_,S){return this.radius=Math.sqrt(e*e+_*_+S*S),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,S),this.phi=Math.acos(clamp$1(_/this.radius,-1,1))),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}])}(),Uy=function(){return _createClass3(function Cylindrical(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;_classCallCheck3(this,Cylindrical),this.radius=e,this.theta=_,this.y=S},[{key:"set",value:function(e,_,S){return this.radius=e,this.theta=_,this.y=S,this}},{key:"copy",value:function(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}},{key:"setFromVector3",value:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}},{key:"setFromCartesianCoords",value:function(e,_,S){return this.radius=Math.sqrt(e*e+S*S),this.theta=Math.atan2(e,S),this.y=_,this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}])}(),By=function(){return _createClass3(function Matrix2(e,_,S,k){_classCallCheck3(this,Matrix2),Matrix2.prototype.isMatrix2=!0,this.elements=[1,0,0,1],void 0!==e&&this.set(e,_,S,k)},[{key:"identity",value:function(){return this.set(1,0,0,1),this}},{key:"fromArray",value:function(e){for(var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,S=0;S<4;S++)this.elements[S]=e[S+_];return this}},{key:"set",value:function(e,_,S,k){var E=this.elements;return E[0]=e,E[2]=_,E[1]=S,E[3]=k,this}}])}(),Ny=new $c,zy=function(){return _createClass3(function Box2(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new $c(1/0,1/0),_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new $c(-1/0,-1/0);_classCallCheck3(this,Box2),this.isBox2=!0,this.min=e,this.max=_},[{key:"set",value:function(e,_){return this.min.copy(e),this.max.copy(_),this}},{key:"setFromPoints",value:function(e){this.makeEmpty();for(var _=0,S=e.length;_<S;_++)this.expandByPoint(e[_]);return this}},{key:"setFromCenterAndSize",value:function(e,_){var S=Ny.copy(_).multiplyScalar(.5);return this.min.copy(e).sub(S),this.max.copy(e).add(S),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.min.copy(e.min),this.max.copy(e.max),this}},{key:"makeEmpty",value:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}},{key:"isEmpty",value:function(){return this.max.x<this.min.x||this.max.y<this.min.y}},{key:"getCenter",value:function(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:"getSize",value:function(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}},{key:"expandByPoint",value:function(e){return this.min.min(e),this.max.max(e),this}},{key:"expandByVector",value:function(e){return this.min.sub(e),this.max.add(e),this}},{key:"expandByScalar",value:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this}},{key:"containsPoint",value:function(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}},{key:"containsBox",value:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}},{key:"getParameter",value:function(e,_){return _.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}},{key:"intersectsBox",value:function(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}},{key:"clampPoint",value:function(e,_){return _.copy(e).clamp(this.min,this.max)}},{key:"distanceToPoint",value:function(e){return this.clampPoint(e,Ny).distanceTo(e)}},{key:"intersect",value:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}},{key:"union",value:function(e){return this.min.min(e.min),this.max.max(e.max),this}},{key:"translate",value:function(e){return this.min.add(e),this.max.add(e),this}},{key:"equals",value:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}])}(),Gy=new th,jy=new th,Vy=new th,Hy=new th,Wy=new th,qy=new th,Xy=new th,Yy=function(){return _createClass3(function Line3(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new th,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new th;_classCallCheck3(this,Line3),this.start=e,this.end=_},[{key:"set",value:function(e,_){return this.start.copy(e),this.end.copy(_),this}},{key:"copy",value:function(e){return this.start.copy(e.start),this.end.copy(e.end),this}},{key:"getCenter",value:function(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}},{key:"delta",value:function(e){return e.subVectors(this.end,this.start)}},{key:"distanceSq",value:function(){return this.start.distanceToSquared(this.end)}},{key:"distance",value:function(){return this.start.distanceTo(this.end)}},{key:"at",value:function(e,_){return this.delta(_).multiplyScalar(e).add(this.start)}},{key:"closestPointToPointParameter",value:function(e,_){Gy.subVectors(e,this.start),jy.subVectors(this.end,this.start);var S=jy.dot(jy),k=jy.dot(Gy)/S;return _&&(k=clamp$1(k,0,1)),k}},{key:"closestPointToPoint",value:function(e,_,S){var k=this.closestPointToPointParameter(e,_);return this.delta(S).multiplyScalar(k).add(this.start)}},{key:"distanceSqToLine3",value:function(e){var _,S,k=arguments.length>1&&void 0!==arguments[1]?arguments[1]:qy,E=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Xy,T=1e-8*1e-8,M=this.start,I=e.start,R=this.end,O=e.end;Vy.subVectors(R,M),Hy.subVectors(O,I),Wy.subVectors(M,I);var D=Vy.dot(Vy),L=Hy.dot(Hy),U=Hy.dot(Wy);if(D<=T&&L<=T)return k.copy(M),E.copy(I),k.sub(E),k.dot(k);if(D<=T)_=0,S=clamp$1(S=U/L,0,1);else{var B=Vy.dot(Wy);if(L<=T)S=0,_=clamp$1(-B/D,0,1);else{var z=Vy.dot(Hy),G=D*L-z*z;(S=(z*(_=0!==G?clamp$1((z*U-B*L)/G,0,1):0)+U)/L)<0?(S=0,_=clamp$1(-B/D,0,1)):S>1&&(S=1,_=clamp$1((z-B)/D,0,1))}}return k.copy(M).add(Vy.multiplyScalar(_)),E.copy(I).add(Hy.multiplyScalar(S)),k.sub(E),k.dot(k)}},{key:"applyMatrix4",value:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}},{key:"equals",value:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}])}(),Ky=new th,Jy=function(e){function SpotLightHelper(e,_){var S;_classCallCheck3(this,SpotLightHelper),(S=_callSuper(this,SpotLightHelper)).light=e,S.matrixAutoUpdate=!1,S.color=_,S.type="SpotLightHelper";for(var k=new gf,E=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],T=0,M=1;T<32;T++,M++){var I=T/32*Math.PI*2,R=M/32*Math.PI*2;E.push(Math.cos(I),Math.sin(I),1,Math.cos(R),Math.sin(R),1)}k.setAttribute("position",new uf(E,3));var O=new lv({fog:!1,toneMapped:!1});return S.cone=new bv(k,O),S.add(S.cone),S.update(),S}return _inherits(SpotLightHelper,e),_createClass3(SpotLightHelper,[{key:"dispose",value:function(){this.cone.geometry.dispose(),this.cone.material.dispose()}},{key:"update",value:function(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);var e=this.light.distance?this.light.distance:1e3,_=e*Math.tan(this.light.angle);this.cone.scale.set(_,_,e),Ky.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(Ky),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}])}(kd),Qy=new th,Zy=new Qh,$y=new Qh,e_=function(e){function SkeletonHelper(e){var _;_classCallCheck3(this,SkeletonHelper);for(var S=getBoneList(e),k=new gf,E=[],T=[],M=0;M<S.length;M++){var I=S[M];I.parent&&I.parent.isBone&&(E.push(0,0,0),E.push(0,0,0),T.push(0,0,0),T.push(0,0,0))}k.setAttribute("position",new uf(E,3)),k.setAttribute("color",new uf(T,3)),(_=_callSuper(this,SkeletonHelper,[k,new lv({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})])).isSkeletonHelper=!0,_.type="SkeletonHelper",_.root=e,_.bones=S,_.matrix=e.matrixWorld,_.matrixAutoUpdate=!1;var R=new jd(255),O=new jd(65280);return _.setColors(R,O),_}return _inherits(SkeletonHelper,e),_createClass3(SkeletonHelper,[{key:"updateMatrixWorld",value:function(e){var _=this.bones,S=this.geometry,k=S.getAttribute("position");$y.copy(this.root.matrixWorld).invert();for(var E=0,T=0;E<_.length;E++){var M=_[E];M.parent&&M.parent.isBone&&(Zy.multiplyMatrices($y,M.matrixWorld),Qy.setFromMatrixPosition(Zy),k.setXYZ(T,Qy.x,Qy.y,Qy.z),Zy.multiplyMatrices($y,M.parent.matrixWorld),Qy.setFromMatrixPosition(Zy),k.setXYZ(T+1,Qy.x,Qy.y,Qy.z),T+=2)}S.getAttribute("position").needsUpdate=!0,_superPropGet(SkeletonHelper,"updateMatrixWorld",this,3)([e])}},{key:"setColors",value:function(e,_){for(var S=this.geometry.getAttribute("color"),k=0;k<S.count;k+=2)S.setXYZ(k,e.r,e.g,e.b),S.setXYZ(k+1,_.r,_.g,_.b);return S.needsUpdate=!0,this}},{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}}])}(bv);function getBoneList(e){var _=[];!0===e.isBone&&_.push(e);for(var S=0;S<e.children.length;S++)_.push.apply(_,_toConsumableArray3(getBoneList(e.children[S])));return _}var t_=function(e){function PointLightHelper(e,_,S){var k;return _classCallCheck3(this,PointLightHelper),(k=_callSuper(this,PointLightHelper,[new xg(_,4,2),new qd({wireframe:!0,fog:!1,toneMapped:!1})])).light=e,k.color=S,k.type="PointLightHelper",k.matrix=k.light.matrixWorld,k.matrixAutoUpdate=!1,k.update(),k}return _inherits(PointLightHelper,e),_createClass3(PointLightHelper,[{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}},{key:"update",value:function(){this.light.updateWorldMatrix(!0,!1),void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}])}(Tf),r_=new th,n_=new jd,i_=new jd,a_=function(e){function HemisphereLightHelper(e,_,S){var k;_classCallCheck3(this,HemisphereLightHelper),(k=_callSuper(this,HemisphereLightHelper)).light=e,k.matrix=e.matrixWorld,k.matrixAutoUpdate=!1,k.color=S,k.type="HemisphereLightHelper";var E=new _g(_);E.rotateY(.5*Math.PI),k.material=new qd({wireframe:!0,fog:!1,toneMapped:!1}),void 0===k.color&&(k.material.vertexColors=!0);var T=E.getAttribute("position"),M=new Float32Array(3*T.count);return E.setAttribute("color",new Zd(M,3)),k.add(new Tf(E,k.material)),k.update(),k}return _inherits(HemisphereLightHelper,e),_createClass3(HemisphereLightHelper,[{key:"dispose",value:function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}},{key:"update",value:function(){var e=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var _=e.geometry.getAttribute("color");n_.copy(this.light.color),i_.copy(this.light.groundColor);for(var S=0,k=_.count;S<k;S++){var E=S<k/2?n_:i_;_.setXYZ(S,E.r,E.g,E.b)}_.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(r_.setFromMatrixPosition(this.light.matrixWorld).negate())}}])}(kd),o_=function(e){function GridHelper(){var e,_=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,k=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4473924,E=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8947848;_classCallCheck3(this,GridHelper),k=new jd(k),E=new jd(E);for(var T=S/2,M=_/S,I=_/2,R=[],O=[],D=0,L=0,U=-I;D<=S;D++,U+=M){R.push(-I,0,U,I,0,U),R.push(U,0,-I,U,0,I);var B=D===T?k:E;B.toArray(O,L),L+=3,B.toArray(O,L),L+=3,B.toArray(O,L),L+=3,B.toArray(O,L),L+=3}var z=new gf;return z.setAttribute("position",new uf(R,3)),z.setAttribute("color",new uf(O,3)),(e=_callSuper(this,GridHelper,[z,new lv({vertexColors:!0,toneMapped:!1})])).type="GridHelper",e}return _inherits(GridHelper,e),_createClass3(GridHelper,[{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}}])}(bv),s_=function(e){function PolarGridHelper(){var e,_=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16,k=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,E=arguments.length>3&&void 0!==arguments[3]?arguments[3]:64,T=arguments.length>4&&void 0!==arguments[4]?arguments[4]:4473924,M=arguments.length>5&&void 0!==arguments[5]?arguments[5]:8947848;_classCallCheck3(this,PolarGridHelper),T=new jd(T),M=new jd(M);var I=[],R=[];if(S>1)for(var O=0;O<S;O++){var D=O/S*(2*Math.PI),L=Math.sin(D)*_,U=Math.cos(D)*_;I.push(0,0,0),I.push(L,0,U);var B=1&O?T:M;R.push(B.r,B.g,B.b),R.push(B.r,B.g,B.b)}for(var z=0;z<k;z++)for(var G=1&z?T:M,j=_-_/k*z,V=0;V<E;V++){var H=V/E*(2*Math.PI),W=Math.sin(H)*j,q=Math.cos(H)*j;I.push(W,0,q),R.push(G.r,G.g,G.b),H=(V+1)/E*(2*Math.PI),W=Math.sin(H)*j,q=Math.cos(H)*j,I.push(W,0,q),R.push(G.r,G.g,G.b)}var X=new gf;return X.setAttribute("position",new uf(I,3)),X.setAttribute("color",new uf(R,3)),(e=_callSuper(this,PolarGridHelper,[X,new lv({vertexColors:!0,toneMapped:!1})])).type="PolarGridHelper",e}return _inherits(PolarGridHelper,e),_createClass3(PolarGridHelper,[{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}}])}(bv),u_=new th,l_=new th,c_=new th,h_=function(e){function DirectionalLightHelper(e,_,S){var k;_classCallCheck3(this,DirectionalLightHelper),(k=_callSuper(this,DirectionalLightHelper)).light=e,k.matrix=e.matrixWorld,k.matrixAutoUpdate=!1,k.color=S,k.type="DirectionalLightHelper",void 0===_&&(_=1);var E=new gf;E.setAttribute("position",new uf([-_,_,0,_,_,0,_,-_,0,-_,-_,0,-_,_,0],3));var T=new lv({fog:!1,toneMapped:!1});return k.lightPlane=new mv(E,T),k.add(k.lightPlane),(E=new gf).setAttribute("position",new uf([0,0,0,0,0,1],3)),k.targetLine=new mv(E,T),k.add(k.targetLine),k.update(),k}return _inherits(DirectionalLightHelper,e),_createClass3(DirectionalLightHelper,[{key:"dispose",value:function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}},{key:"update",value:function(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),u_.setFromMatrixPosition(this.light.matrixWorld),l_.setFromMatrixPosition(this.light.target.matrixWorld),c_.subVectors(l_,u_),this.lightPlane.lookAt(l_),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(l_),this.targetLine.scale.z=c_.length()}}])}(kd),d_=new th,f_=new Pf,p_=function(e){function CameraHelper(e){var _;_classCallCheck3(this,CameraHelper);var S=new gf,k=new lv({color:16777215,vertexColors:!0,toneMapped:!1}),E=[],T=[],M={};function addLine(e,_){addPoint(e),addPoint(_)}function addPoint(e){E.push(0,0,0),T.push(0,0,0),void 0===M[e]&&(M[e]=[]),M[e].push(E.length/3-1)}addLine("n1","n2"),addLine("n2","n4"),addLine("n4","n3"),addLine("n3","n1"),addLine("f1","f2"),addLine("f2","f4"),addLine("f4","f3"),addLine("f3","f1"),addLine("n1","f1"),addLine("n2","f2"),addLine("n3","f3"),addLine("n4","f4"),addLine("p","n1"),addLine("p","n2"),addLine("p","n3"),addLine("p","n4"),addLine("u1","u2"),addLine("u2","u3"),addLine("u3","u1"),addLine("c","t"),addLine("p","c"),addLine("cn1","cn2"),addLine("cn3","cn4"),addLine("cf1","cf2"),addLine("cf3","cf4"),S.setAttribute("position",new uf(E,3)),S.setAttribute("color",new uf(T,3)),(_=_callSuper(this,CameraHelper,[S,k])).type="CameraHelper",_.camera=e,_.camera.updateProjectionMatrix&&_.camera.updateProjectionMatrix(),_.matrix=e.matrixWorld,_.matrixAutoUpdate=!1,_.pointMap=M,_.update();var I=new jd(16755200),R=new jd(16711680),O=new jd(43775),D=new jd(16777215),L=new jd(3355443);return _.setColors(I,R,O,D,L),_}return _inherits(CameraHelper,e),_createClass3(CameraHelper,[{key:"setColors",value:function(e,_,S,k,E){var T=this.geometry.getAttribute("color");return T.setXYZ(0,e.r,e.g,e.b),T.setXYZ(1,e.r,e.g,e.b),T.setXYZ(2,e.r,e.g,e.b),T.setXYZ(3,e.r,e.g,e.b),T.setXYZ(4,e.r,e.g,e.b),T.setXYZ(5,e.r,e.g,e.b),T.setXYZ(6,e.r,e.g,e.b),T.setXYZ(7,e.r,e.g,e.b),T.setXYZ(8,e.r,e.g,e.b),T.setXYZ(9,e.r,e.g,e.b),T.setXYZ(10,e.r,e.g,e.b),T.setXYZ(11,e.r,e.g,e.b),T.setXYZ(12,e.r,e.g,e.b),T.setXYZ(13,e.r,e.g,e.b),T.setXYZ(14,e.r,e.g,e.b),T.setXYZ(15,e.r,e.g,e.b),T.setXYZ(16,e.r,e.g,e.b),T.setXYZ(17,e.r,e.g,e.b),T.setXYZ(18,e.r,e.g,e.b),T.setXYZ(19,e.r,e.g,e.b),T.setXYZ(20,e.r,e.g,e.b),T.setXYZ(21,e.r,e.g,e.b),T.setXYZ(22,e.r,e.g,e.b),T.setXYZ(23,e.r,e.g,e.b),T.setXYZ(24,_.r,_.g,_.b),T.setXYZ(25,_.r,_.g,_.b),T.setXYZ(26,_.r,_.g,_.b),T.setXYZ(27,_.r,_.g,_.b),T.setXYZ(28,_.r,_.g,_.b),T.setXYZ(29,_.r,_.g,_.b),T.setXYZ(30,_.r,_.g,_.b),T.setXYZ(31,_.r,_.g,_.b),T.setXYZ(32,S.r,S.g,S.b),T.setXYZ(33,S.r,S.g,S.b),T.setXYZ(34,S.r,S.g,S.b),T.setXYZ(35,S.r,S.g,S.b),T.setXYZ(36,S.r,S.g,S.b),T.setXYZ(37,S.r,S.g,S.b),T.setXYZ(38,k.r,k.g,k.b),T.setXYZ(39,k.r,k.g,k.b),T.setXYZ(40,E.r,E.g,E.b),T.setXYZ(41,E.r,E.g,E.b),T.setXYZ(42,E.r,E.g,E.b),T.setXYZ(43,E.r,E.g,E.b),T.setXYZ(44,E.r,E.g,E.b),T.setXYZ(45,E.r,E.g,E.b),T.setXYZ(46,E.r,E.g,E.b),T.setXYZ(47,E.r,E.g,E.b),T.setXYZ(48,E.r,E.g,E.b),T.setXYZ(49,E.r,E.g,E.b),T.needsUpdate=!0,this}},{key:"update",value:function(){var e,_,S=this.geometry,k=this.pointMap;if(f_.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),!0===this.camera.reversedDepth)e=1,_=0;else if(this.camera.coordinateSystem===Wc)e=-1,_=1;else{if(this.camera.coordinateSystem!==qc)throw new Error("THREE.CameraHelper.update(): Invalid coordinate system: "+this.camera.coordinateSystem);e=0,_=1}setPoint("c",k,S,f_,0,0,e),setPoint("t",k,S,f_,0,0,_),setPoint("n1",k,S,f_,-1,-1,e),setPoint("n2",k,S,f_,1,-1,e),setPoint("n3",k,S,f_,-1,1,e),setPoint("n4",k,S,f_,1,1,e),setPoint("f1",k,S,f_,-1,-1,_),setPoint("f2",k,S,f_,1,-1,_),setPoint("f3",k,S,f_,-1,1,_),setPoint("f4",k,S,f_,1,1,_),setPoint("u1",k,S,f_,.7,1.1,e),setPoint("u2",k,S,f_,-.7,1.1,e),setPoint("u3",k,S,f_,0,2,e),setPoint("cf1",k,S,f_,-1,0,_),setPoint("cf2",k,S,f_,1,0,_),setPoint("cf3",k,S,f_,0,-1,_),setPoint("cf4",k,S,f_,0,1,_),setPoint("cn1",k,S,f_,-1,0,e),setPoint("cn2",k,S,f_,1,0,e),setPoint("cn3",k,S,f_,0,-1,e),setPoint("cn4",k,S,f_,0,1,e),S.getAttribute("position").needsUpdate=!0}},{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}}])}(bv);function setPoint(e,_,S,k,E,T,M){d_.set(E,T,M).unproject(k);var I=_[e];if(void 0!==I)for(var R=S.getAttribute("position"),O=0,D=I.length;O<D;O++)R.setXYZ(I[O],d_.x,d_.y,d_.z)}var v_,g_,m_=new Ch,y_=function(e){function BoxHelper(e){var _,S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16776960;_classCallCheck3(this,BoxHelper);var k=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),E=new Float32Array(24),T=new gf;return T.setIndex(new Zd(k,1)),T.setAttribute("position",new Zd(E,3)),(_=_callSuper(this,BoxHelper,[T,new lv({color:S,toneMapped:!1})])).object=e,_.type="BoxHelper",_.matrixAutoUpdate=!1,_.update(),_}return _inherits(BoxHelper,e),_createClass3(BoxHelper,[{key:"update",value:function(){if(void 0!==this.object&&m_.setFromObject(this.object),!m_.isEmpty()){var e=m_.min,_=m_.max,S=this.geometry.attributes.position,k=S.array;k[0]=_.x,k[1]=_.y,k[2]=_.z,k[3]=e.x,k[4]=_.y,k[5]=_.z,k[6]=e.x,k[7]=e.y,k[8]=_.z,k[9]=_.x,k[10]=e.y,k[11]=_.z,k[12]=_.x,k[13]=_.y,k[14]=e.z,k[15]=e.x,k[16]=_.y,k[17]=e.z,k[18]=e.x,k[19]=e.y,k[20]=e.z,k[21]=_.x,k[22]=e.y,k[23]=e.z,S.needsUpdate=!0,this.geometry.computeBoundingSphere()}}},{key:"setFromObject",value:function(e){return this.object=e,this.update(),this}},{key:"copy",value:function(e,_){return _superPropGet(BoxHelper,"copy",this,3)([e,_]),this.object=e.object,this}},{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}}])}(bv),b_=function(e){function Box3Helper(e){var _,S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16776960;_classCallCheck3(this,Box3Helper);var k=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),E=new gf;return E.setIndex(new Zd(k,1)),E.setAttribute("position",new uf([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),(_=_callSuper(this,Box3Helper,[E,new lv({color:S,toneMapped:!1})])).box=e,_.type="Box3Helper",_.geometry.computeBoundingSphere(),_}return _inherits(Box3Helper,e),_createClass3(Box3Helper,[{key:"updateMatrixWorld",value:function(e){var _=this.box;_.isEmpty()||(_.getCenter(this.position),_.getSize(this.scale),this.scale.multiplyScalar(.5),_superPropGet(Box3Helper,"updateMatrixWorld",this,3)([e]))}},{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}}])}(bv),S_=function(e){function PlaneHelper(e){var _,S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,k=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16776960;_classCallCheck3(this,PlaneHelper);var E=k,T=new gf;T.setAttribute("position",new uf([1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],3)),T.computeBoundingSphere(),(_=_callSuper(this,PlaneHelper,[T,new lv({color:E,toneMapped:!1})])).type="PlaneHelper",_.plane=e,_.size=S;var M=new gf;return M.setAttribute("position",new uf([1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],3)),M.computeBoundingSphere(),_.add(new Tf(M,new qd({color:E,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1}))),_}return _inherits(PlaneHelper,e),_createClass3(PlaneHelper,[{key:"updateMatrixWorld",value:function(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),_superPropGet(PlaneHelper,"updateMatrixWorld",this,3)([e])}},{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}])}(mv),w_=new th,x_=function(e){function ArrowHelper(){var e,_=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new th(0,0,1),S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new th(0,0,0),k=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,E=arguments.length>3&&void 0!==arguments[3]?arguments[3]:16776960,T=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.2*k,M=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.2*T;return _classCallCheck3(this,ArrowHelper),(e=_callSuper(this,ArrowHelper)).type="ArrowHelper",void 0===v_&&((v_=new gf).setAttribute("position",new uf([0,0,0,0,1,0],3)),(g_=new zv(.5,1,5,1)).translate(0,-.5,0)),e.position.copy(S),e.line=new mv(v_,new lv({color:E,toneMapped:!1})),e.line.matrixAutoUpdate=!1,e.add(e.line),e.cone=new Tf(g_,new qd({color:E,toneMapped:!1})),e.cone.matrixAutoUpdate=!1,e.add(e.cone),e.setDirection(_),e.setLength(k,T,M),e}return _inherits(ArrowHelper,e),_createClass3(ArrowHelper,[{key:"setDirection",value:function(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{w_.set(e.z,0,-e.x).normalize();var _=Math.acos(e.y);this.quaternion.setFromAxisAngle(w_,_)}}},{key:"setLength",value:function(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2*e,S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.2*_;this.line.scale.set(1,Math.max(1e-4,e-_),1),this.line.updateMatrix(),this.cone.scale.set(S,_,S),this.cone.position.y=e,this.cone.updateMatrix()}},{key:"setColor",value:function(e){this.line.material.color.set(e),this.cone.material.color.set(e)}},{key:"copy",value:function(e){return _superPropGet(ArrowHelper,"copy",this,3)([e,!1]),this.line.copy(e.line),this.cone.copy(e.cone),this}},{key:"dispose",value:function(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}])}(kd),k_=function(e){function AxesHelper(){var e,_=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;_classCallCheck3(this,AxesHelper);var S=[0,0,0,_,0,0,0,0,0,0,_,0,0,0,0,0,0,_],k=new gf;return k.setAttribute("position",new uf(S,3)),k.setAttribute("color",new uf([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3)),(e=_callSuper(this,AxesHelper,[k,new lv({vertexColors:!0,toneMapped:!1})])).type="AxesHelper",e}return _inherits(AxesHelper,e),_createClass3(AxesHelper,[{key:"setColors",value:function(e,_,S){var k=new jd,E=this.geometry.attributes.color.array;return k.set(e),k.toArray(E,0),k.toArray(E,3),k.set(_),k.toArray(E,6),k.toArray(E,9),k.set(S),k.toArray(E,12),k.toArray(E,15),this.geometry.attributes.color.needsUpdate=!0,this}},{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}}])}(bv),C_=function(){return _createClass3(function ShapePath(){_classCallCheck3(this,ShapePath),this.type="ShapePath",this.color=new jd,this.subPaths=[],this.currentPath=null},[{key:"moveTo",value:function(e,_){return this.currentPath=new hg,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,_),this}},{key:"lineTo",value:function(e,_){return this.currentPath.lineTo(e,_),this}},{key:"quadraticCurveTo",value:function(e,_,S,k){return this.currentPath.quadraticCurveTo(e,_,S,k),this}},{key:"bezierCurveTo",value:function(e,_,S,k,E,T){return this.currentPath.bezierCurveTo(e,_,S,k,E,T),this}},{key:"splineThru",value:function(e){return this.currentPath.splineThru(e),this}},{key:"toShapes",value:function(e){function isPointInsidePolygon(e,_){for(var S=_.length,k=!1,E=S-1,T=0;T<S;E=T++){var M=_[E],I=_[T],R=I.x-M.x,O=I.y-M.y;if(Math.abs(O)>Number.EPSILON){if(O<0&&(M=_[T],R=-R,I=_[E],O=-O),e.y<M.y||e.y>I.y)continue;if(e.y===M.y){if(e.x===M.x)return!0}else{var D=O*(e.x-M.x)-R*(e.y-M.y);if(0===D)return!0;if(D<0)continue;k=!k}}else{if(e.y!==M.y)continue;if(I.x<=e.x&&e.x<=M.x||M.x<=e.x&&e.x<=I.x)return!0}}return k}var _,S,k,E=pg.isClockWise,T=this.subPaths;if(0===T.length)return[];var M=[];if(1===T.length)return S=T[0],(k=new dg).curves=S.curves,M.push(k),M;var I=!E(T[0].getPoints());I=e?!I:I;var R,O,D=[],L=[],U=[],B=0;L[B]=void 0,U[B]=[];for(var z=0,G=T.length;z<G;z++)_=E(R=(S=T[z]).getPoints()),(_=e?!_:_)?(!I&&L[B]&&B++,L[B]={s:new dg,p:R},L[B].s.curves=S.curves,I&&B++,U[B]=[]):U[B].push({h:S,p:R[0]});if(!L[0])return function(e){for(var _=[],S=0,k=e.length;S<k;S++){var E=e[S],T=new dg;T.curves=E.curves,_.push(T)}return _}(T);if(L.length>1){for(var j=!1,V=0,H=0,W=L.length;H<W;H++)D[H]=[];for(var q=0,X=L.length;q<X;q++)for(var Y=U[q],K=0;K<Y.length;K++){for(var J=Y[K],Q=!0,Z=0;Z<L.length;Z++)isPointInsidePolygon(J.p,L[Z].p)&&(q!==Z&&V++,Q?(Q=!1,D[Z].push(J)):j=!0);Q&&D[q].push(J)}V>0&&!1===j&&(U=D)}for(var $=0,ee=L.length;$<ee;$++){k=L[$].s,M.push(k);for(var te=0,re=(O=U[$]).length;te<re;te++)k.holes.push(O[te].h)}return M}}])}(),A_=function(e){function Controls(e){var _,S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return _classCallCheck3(this,Controls),(_=_callSuper(this,Controls)).object=e,_.domElement=S,_.enabled=!0,_.state=-1,_.keys={},_.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},_.touches={ONE:null,TWO:null},_}return _inherits(Controls,e),_createClass3(Controls,[{key:"connect",value:function(e){void 0!==e&&(null!==this.domElement&&this.disconnect(),this.domElement=e)}},{key:"disconnect",value:function(){}},{key:"dispose",value:function(){}},{key:"update",value:function(){}}])}(Xc);function _getByteLength(e,_,S,k){var E=function(e){switch(e){case El:case Tl:return{byteLength:1,components:1};case Il:case Ml:case Dl:return{byteLength:2,components:1};case Ll:case Fl:return{byteLength:2,components:4};case Pl:case Rl:case Ol:return{byteLength:4,components:1};case Bl:case Nl:return{byteLength:4,components:3}}throw new Error("Unknown texture type ".concat(e,"."))}(k);switch(S){case zl:return e*_;case Wl:case ql:return e*_/E.components*E.byteLength;case Xl:case Yl:return e*_*2/E.components*E.byteLength;case Gl:return e*_*3/E.components*E.byteLength;case jl:case Kl:return e*_*4/E.components*E.byteLength;case Jl:case Ql:return Math.floor((e+3)/4)*Math.floor((_+3)/4)*8;case Zl:case $l:return Math.floor((e+3)/4)*Math.floor((_+3)/4)*16;case tc:case nc:return Math.max(e,16)*Math.max(_,8)/4;case ec:case rc:return Math.max(e,8)*Math.max(_,8)/2;case ic:case ac:return Math.floor((e+3)/4)*Math.floor((_+3)/4)*8;case oc:case sc:return Math.floor((e+3)/4)*Math.floor((_+3)/4)*16;case uc:return Math.floor((e+4)/5)*Math.floor((_+3)/4)*16;case lc:return Math.floor((e+4)/5)*Math.floor((_+4)/5)*16;case cc:return Math.floor((e+5)/6)*Math.floor((_+4)/5)*16;case hc:return Math.floor((e+5)/6)*Math.floor((_+5)/6)*16;case dc:return Math.floor((e+7)/8)*Math.floor((_+4)/5)*16;case fc:return Math.floor((e+7)/8)*Math.floor((_+5)/6)*16;case pc:return Math.floor((e+7)/8)*Math.floor((_+7)/8)*16;case vc:return Math.floor((e+9)/10)*Math.floor((_+4)/5)*16;case gc:return Math.floor((e+9)/10)*Math.floor((_+5)/6)*16;case mc:return Math.floor((e+9)/10)*Math.floor((_+7)/8)*16;case yc:return Math.floor((e+9)/10)*Math.floor((_+9)/10)*16;case _c:return Math.floor((e+11)/12)*Math.floor((_+9)/10)*16;case bc:return Math.floor((e+11)/12)*Math.floor((_+11)/12)*16;case Sc:case wc:case xc:return Math.ceil(e/4)*Math.ceil(_/4)*16;case kc:case Cc:return Math.ceil(e/4)*Math.ceil(_/4)*8;case Ac:case Ec:return Math.ceil(e/4)*Math.ceil(_/4)*16}throw new Error("Unable to determine texture byte length for ".concat(S," format."))}var E_=function(){return _createClass3(function TextureUtils(){_classCallCheck3(this,TextureUtils)},null,[{key:"contain",value:function(e,_){return function(e,_){var S=e.image&&e.image.width?e.image.width/e.image.height:1;return S>_?(e.repeat.x=1,e.repeat.y=S/_,e.offset.x=0,e.offset.y=(1-e.repeat.y)/2):(e.repeat.x=_/S,e.repeat.y=1,e.offset.x=(1-e.repeat.x)/2,e.offset.y=0),e}(e,_)}},{key:"cover",value:function(e,_){return function(e,_){var S=e.image&&e.image.width?e.image.width/e.image.height:1;return S>_?(e.repeat.x=_/S,e.repeat.y=1,e.offset.x=(1-e.repeat.x)/2,e.offset.y=0):(e.repeat.x=1,e.repeat.y=S/_,e.offset.x=0,e.offset.y=(1-e.repeat.y)/2),e}(e,_)}},{key:"fill",value:function(e){return function(e){return e.repeat.x=1,e.repeat.y=1,e.offset.x=0,e.offset.y=0,e}(e)}},{key:"getByteLength",value:function(e,_,S,k){return _getByteLength(e,_,S,k)}}])}();
/**
			 * @license
			 * Copyright 2010-2025 Three.js Authors
			 * SPDX-License-Identifier: MIT
			 */
function WebGLAnimation(){var e=null,_=!1,S=null,k=null;function onAnimationFrame(_,E){S(_,E),k=e.requestAnimationFrame(onAnimationFrame)}return{start:function(){!0!==_&&null!==S&&(k=e.requestAnimationFrame(onAnimationFrame),_=!0)},stop:function(){e.cancelAnimationFrame(k),_=!1},setAnimationLoop:function(e){S=e},setContext:function(_){e=_}}}function WebGLAttributes(e){var _=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),_.get(e)},remove:function(S){S.isInterleavedBufferAttribute&&(S=S.data);var k=_.get(S);k&&(e.deleteBuffer(k.buffer),_.delete(S))},update:function(S,k){if(S.isInterleavedBufferAttribute&&(S=S.data),S.isGLBufferAttribute){var E=_.get(S);(!E||E.version<S.version)&&_.set(S,{buffer:S.buffer,type:S.type,bytesPerElement:S.elementSize,version:S.version})}else{var T=_.get(S);if(void 0===T)_.set(S,function(_,S){var k,E=_.array,T=_.usage,M=E.byteLength,I=e.createBuffer();if(e.bindBuffer(S,I),e.bufferData(S,E,T),_.onUploadCallback(),E instanceof Float32Array)k=e.FLOAT;else if("undefined"!=typeof Float16Array&&E instanceof Float16Array)k=e.HALF_FLOAT;else if(E instanceof Uint16Array)k=_.isFloat16BufferAttribute?e.HALF_FLOAT:e.UNSIGNED_SHORT;else if(E instanceof Int16Array)k=e.SHORT;else if(E instanceof Uint32Array)k=e.UNSIGNED_INT;else if(E instanceof Int32Array)k=e.INT;else if(E instanceof Int8Array)k=e.BYTE;else if(E instanceof Uint8Array)k=e.UNSIGNED_BYTE;else{if(!(E instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+E);k=e.UNSIGNED_BYTE}return{buffer:I,type:k,bytesPerElement:E.BYTES_PER_ELEMENT,version:_.version,size:M}}(S,k));else if(T.version<S.version){if(T.size!==S.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");!function(_,S,k){var E=S.array,T=S.updateRanges;if(e.bindBuffer(k,_),0===T.length)e.bufferSubData(k,0,E);else{T.sort(function(e,_){return e.start-_.start});for(var M=0,I=1;I<T.length;I++){var R=T[M],O=T[I];O.start<=R.start+R.count+1?R.count=Math.max(R.count,O.start+O.count-R.start):T[++M]=O}T.length=M+1;for(var D=0,L=T.length;D<L;D++){var U=T[D];e.bufferSubData(k,U.start*E.BYTES_PER_ELEMENT,E,U.start,U.count)}S.clearUpdateRanges()}S.onUploadCallback()}(T.buffer,S,k),T.version=S.version}}}}}"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Qu}})),"undefined"!=typeof window&&(window.__THREE__||(window.__THREE__=Qu));var T_=D("cb",{alphahash_fragment:"#ifdef USE_ALPHAHASH\n\tif ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n#endif",alphahash_pars_fragment:"#ifdef USE_ALPHAHASH\n\tconst float ALPHA_HASH_SCALE = 0.05;\n\tfloat hash2D( vec2 value ) {\n\t\treturn fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n\t}\n\tfloat hash3D( vec3 value ) {\n\t\treturn hash2D( vec2( hash2D( value.xy ), value.z ) );\n\t}\n\tfloat getAlphaHashThreshold( vec3 position ) {\n\t\tfloat maxDeriv = max(\n\t\t\tlength( dFdx( position.xyz ) ),\n\t\t\tlength( dFdy( position.xyz ) )\n\t\t);\n\t\tfloat pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n\t\tvec2 pixScales = vec2(\n\t\t\texp2( floor( log2( pixScale ) ) ),\n\t\t\texp2( ceil( log2( pixScale ) ) )\n\t\t);\n\t\tvec2 alpha = vec2(\n\t\t\thash3D( floor( pixScales.x * position.xyz ) ),\n\t\t\thash3D( floor( pixScales.y * position.xyz ) )\n\t\t);\n\t\tfloat lerpFactor = fract( log2( pixScale ) );\n\t\tfloat x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n\t\tfloat a = min( lerpFactor, 1.0 - lerpFactor );\n\t\tvec3 cases = vec3(\n\t\t\tx * x / ( 2.0 * a * ( 1.0 - a ) ),\n\t\t\t( x - 0.5 * a ) / ( 1.0 - a ),\n\t\t\t1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n\t\t);\n\t\tfloat threshold = ( x < ( 1.0 - a ) )\n\t\t\t? ( ( x < a ) ? cases.x : cases.y )\n\t\t\t: cases.z;\n\t\treturn clamp( threshold , 1.0e-6, 1.0 );\n\t}\n#endif",alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\t#ifdef ALPHA_TO_COVERAGE\n\tdiffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );\n\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\tif ( diffuseColor.a < alphaTest ) discard;\n\t#endif\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_CLEARCOAT ) \n\t\tclearcoatSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_SHEEN ) \n\t\tsheenSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometryNormal, geometryViewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",batching_pars_vertex:"#ifdef USE_BATCHING\n\t#if ! defined( GL_ANGLE_multi_draw )\n\t#define gl_DrawID _gl_DrawID\n\tuniform int _gl_DrawID;\n\t#endif\n\tuniform highp sampler2D batchingTexture;\n\tuniform highp usampler2D batchingIdTexture;\n\tmat4 getBatchingMatrix( const in float i ) {\n\t\tint size = textureSize( batchingTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n\tfloat getIndirectIndex( const in int i ) {\n\t\tint size = textureSize( batchingIdTexture, 0 ).x;\n\t\tint x = i % size;\n\t\tint y = i / size;\n\t\treturn float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );\n\t}\n#endif\n#ifdef USE_BATCHING_COLOR\n\tuniform sampler2D batchingColorTexture;\n\tvec3 getBatchingColor( const in float i ) {\n\t\tint size = textureSize( batchingColorTexture, 0 ).x;\n\t\tint j = int( i );\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\treturn texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;\n\t}\n#endif",batching_vertex:"#ifdef USE_BATCHING\n\tmat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );\n#endif",begin_vertex:"vec3 transformed = vec3( position );\n#ifdef USE_ALPHAHASH\n\tvPosition = vec3( position );\n#endif",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\treturn vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );\n\t\tvec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#ifdef ALPHA_TO_COVERAGE\n\t\tfloat distanceToPlane, distanceGradient;\n\t\tfloat clipOpacity = 1.0;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\tclipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\tif ( clipOpacity == 0.0 ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tfloat unionClipOpacity = 1.0;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\t\tunionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tclipOpacity *= 1.0 - unionClipOpacity;\n\t\t#endif\n\t\tdiffuseColor.a *= clipOpacity;\n\t\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tbool clipped = true;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tif ( clipped ) discard;\n\t\t#endif\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif\n#ifdef USE_BATCHING_COLOR\n\tvec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );\n\tvColor.xyz *= batchingColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n#ifdef USE_ALPHAHASH\n\tvarying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = objectTangent;\n#endif\n#ifdef USE_BATCHING\n\tmat3 bm = mat3( batchingMatrix );\n\ttransformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );\n\ttransformedNormal = bm * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = bm * transformedTangent;\n\t#endif\n#endif\n#ifdef USE_INSTANCING\n\tmat3 im = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );\n\ttransformedNormal = im * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = im * transformedTangent;\n\t#endif\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\ttransformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE\n\t\temissiveColor = sRGBTransferEOTF( emissiveColor );\n\t#endif\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",colorspace_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment:"vec4 LinearTransferOETF( in vec4 value ) {\n\treturn value;\n}\nvec4 sRGBTransferEOTF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 sRGBTransferOETF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform mat3 envMapRotation;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#ifdef USE_ENVMAP\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\t#ifdef USE_ANISOTROPY\n\t\tvec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n\t\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\t\tvec3 bentNormal = cross( bitangent, viewDir );\n\t\t\t\tbentNormal = normalize( cross( bentNormal, bitangent ) );\n\t\t\t\tbentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n\t\t\t\treturn getIBLRadiance( viewDir, bentNormal, roughness );\n\t\t\t#else\n\t\t\t\treturn vec3( 0.0 );\n\t\t\t#endif\n\t\t}\n\t#endif\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\n#if defined( USE_LIGHT_PROBES )\n\tuniform vec3 lightProbe[ 9 ];\n#endif\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif ( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_DISPERSION\n\tmaterial.dispersion = dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\t#ifdef USE_ANISOTROPYMAP\n\t\tmat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n\t\tvec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n\t\tvec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n\t#else\n\t\tvec2 anisotropyV = anisotropyVector;\n\t#endif\n\tmaterial.anisotropy = length( anisotropyV );\n\tif( material.anisotropy == 0.0 ) {\n\t\tanisotropyV = vec2( 1.0, 0.0 );\n\t} else {\n\t\tanisotropyV /= material.anisotropy;\n\t\tmaterial.anisotropy = saturate( material.anisotropy );\n\t}\n\tmaterial.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n\tmaterial.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;\n\tmaterial.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\tfloat dispersion;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat anisotropy;\n\t\tfloat alphaT;\n\t\tvec3 anisotropyT;\n\t\tvec3 anisotropyB;\n\t#endif\n};\nvec3 clearcoatSpecularDirect = vec3( 0.0 );\nvec3 clearcoatSpecularIndirect = vec3( 0.0 );\nvec3 sheenSpecularDirect = vec3( 0.0 );\nvec3 sheenSpecularIndirect = vec3(0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n\tfloat V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n\t\tfloat gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n\t\tfloat gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n\t\tfloat v = 0.5 / ( gv + gl );\n\t\treturn saturate(v);\n\t}\n\tfloat D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n\t\tfloat a2 = alphaT * alphaB;\n\t\thighp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n\t\thighp float v2 = dot( v, v );\n\t\tfloat w2 = a2 / v2;\n\t\treturn RECIPROCAL_PI * a2 * pow2 ( w2 );\n\t}\n#endif\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat dotTL = dot( material.anisotropyT, lightDir );\n\t\tfloat dotTV = dot( material.anisotropyT, viewDir );\n\t\tfloat dotTH = dot( material.anisotropyT, halfDir );\n\t\tfloat dotBL = dot( material.anisotropyB, lightDir );\n\t\tfloat dotBV = dot( material.anisotropyB, viewDir );\n\t\tfloat dotBH = dot( material.anisotropyB, halfDir );\n\t\tfloat V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n\t\tfloat D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n\t#else\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t#endif\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometryNormal;\n\t\tvec3 viewDir = geometryViewDir;\n\t\tvec3 position = geometryPosition;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nvec3 geometryPosition = - vViewPosition;\nvec3 geometryNormal = normal;\nvec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\nvec3 geometryClearcoatNormal = vec3( 0.0 );\n#ifdef USE_CLEARCOAT\n\tgeometryClearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometryViewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometryPosition, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometryPosition, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if defined( USE_LIGHT_PROBES )\n\t\tirradiance += getLightProbeIrradiance( lightProbe, geometryNormal );\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometryNormal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\t#ifdef USE_ANISOTROPY\n\t\tradiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );\n\t#else\n\t\tradiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )\n\tgl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGARITHMIC_DEPTH_BUFFER\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGARITHMIC_DEPTH_BUFFER\n\tvFragDepth = 1.0 + gl_Position.w;\n\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphinstance_vertex:"#ifdef USE_INSTANCING_MORPH\n\tfloat morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\tfloat morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tmorphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;\n\t}\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t}\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_INSTANCING_MORPH\n\t\tuniform float morphTargetBaseInfluence;\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t#endif\n\tuniform sampler2DArray morphTargetsTexture;\n\tuniform ivec2 morphTargetsTextureSize;\n\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t}\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t}\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal,\n\t\t#if defined( USE_NORMALMAP )\n\t\t\tvNormalMapUv\n\t\t#elif defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tvClearcoatNormalMapUv\n\t\t#else\n\t\t\tvUv\n\t\t#endif\n\t\t);\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 nonPerturbedNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = nonPerturbedNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",opaque_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;\nconst float Inv255 = 1. / 255.;\nconst vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );\nconst vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );\nconst vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );\nconst vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );\nvec4 packDepthToRGBA( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec4( 0., 0., 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec4( 1., 1., 1., 1. );\n\tfloat vuf;\n\tfloat af = modf( v * PackFactors.a, vuf );\n\tfloat bf = modf( vuf * ShiftRight8, vuf );\n\tfloat gf = modf( vuf * ShiftRight8, vuf );\n\treturn vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );\n}\nvec3 packDepthToRGB( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec3( 0., 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec3( 1., 1., 1. );\n\tfloat vuf;\n\tfloat bf = modf( v * PackFactors.b, vuf );\n\tfloat gf = modf( vuf * ShiftRight8, vuf );\n\treturn vec3( vuf * Inv255, gf * PackUpscale, bf );\n}\nvec2 packDepthToRG( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec2( 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec2( 1., 1. );\n\tfloat vuf;\n\tfloat gf = modf( v * 256., vuf );\n\treturn vec2( vuf * Inv255, gf );\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors4 );\n}\nfloat unpackRGBToDepth( const in vec3 v ) {\n\treturn dot( v, UnpackFactors3 );\n}\nfloat unpackRGToDepth( const in vec2 v ) {\n\treturn v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;\n}\nvec4 pack2HalfToRGBA( const in vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( const in vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_BATCHING\n\tmvPosition = batchingMatrix * mvPosition;\n#endif\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\tfloat depth = unpackRGBAToDepth( texture2D( depths, uv ) );\n\t\t#ifdef USE_REVERSED_DEPTH_BUFFER\n\t\t\treturn step( depth, compare );\n\t\t#else\n\t\t\treturn step( compare, depth );\n\t\t#endif\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow( sampler2D shadow, vec2 uv, float compare ) {\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\t#ifdef USE_REVERSED_DEPTH_BUFFER\n\t\t\tfloat hard_shadow = step( distribution.x, compare );\n\t\t#else\n\t\t\tfloat hard_shadow = step( compare, distribution.x );\n\t\t#endif\n\t\tif ( hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn mix( 1.0, shadow, shadowIntensity );\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tfloat shadow = 1.0;\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\t\n\t\tfloat lightToPositionLength = length( lightToPosition );\n\t\tif ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {\n\t\t\tfloat dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\t\tdp += shadowBias;\n\t\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\t\tshadow = (\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t\t) * ( 1.0 / 9.0 );\n\t\t\t#else\n\t\t\t\tshadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t\t#endif\n\t\t}\n\t\treturn mix( 1.0, shadow, shadowIntensity );\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tint size = textureSize( boneTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 CineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nconst mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.6605, - 0.1246, - 0.0182 ),\n\tvec3( - 0.5876, 1.1329, - 0.1006 ),\n\tvec3( - 0.0728, - 0.0083, 1.1187 )\n);\nconst mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(\n\tvec3( 0.6274, 0.0691, 0.0164 ),\n\tvec3( 0.3293, 0.9195, 0.0880 ),\n\tvec3( 0.0433, 0.0113, 0.8956 )\n);\nvec3 agxDefaultContrastApprox( vec3 x ) {\n\tvec3 x2 = x * x;\n\tvec3 x4 = x2 * x2;\n\treturn + 15.5 * x4 * x2\n\t\t- 40.14 * x4 * x\n\t\t+ 31.96 * x4\n\t\t- 6.868 * x2 * x\n\t\t+ 0.4298 * x2\n\t\t+ 0.1191 * x\n\t\t- 0.00232;\n}\nvec3 AgXToneMapping( vec3 color ) {\n\tconst mat3 AgXInsetMatrix = mat3(\n\t\tvec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),\n\t\tvec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),\n\t\tvec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )\n\t);\n\tconst mat3 AgXOutsetMatrix = mat3(\n\t\tvec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),\n\t\tvec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),\n\t\tvec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )\n\t);\n\tconst float AgxMinEv = - 12.47393;\tconst float AgxMaxEv = 4.026069;\n\tcolor *= toneMappingExposure;\n\tcolor = LINEAR_SRGB_TO_LINEAR_REC2020 * color;\n\tcolor = AgXInsetMatrix * color;\n\tcolor = max( color, 1e-10 );\tcolor = log2( color );\n\tcolor = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );\n\tcolor = clamp( color, 0.0, 1.0 );\n\tcolor = agxDefaultContrastApprox( color );\n\tcolor = AgXOutsetMatrix * color;\n\tcolor = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );\n\tcolor = LINEAR_REC2020_TO_LINEAR_SRGB * color;\n\tcolor = clamp( color, 0.0, 1.0 );\n\treturn color;\n}\nvec3 NeutralToneMapping( vec3 color ) {\n\tconst float StartCompression = 0.8 - 0.04;\n\tconst float Desaturation = 0.15;\n\tcolor *= toneMappingExposure;\n\tfloat x = min( color.r, min( color.g, color.b ) );\n\tfloat offset = x < 0.08 ? x - 6.25 * x * x : 0.04;\n\tcolor -= offset;\n\tfloat peak = max( color.r, max( color.g, color.b ) );\n\tif ( peak < StartCompression ) return color;\n\tfloat d = 1. - StartCompression;\n\tfloat newPeak = 1. - d * d / ( peak + d - StartCompression );\n\tcolor *= newPeak / peak;\n\tfloat g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );\n\treturn mix( color, vec3( newPeak ), g );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmitted = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn vec3( 1.0 );\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec4 transmittedLight;\n\t\tvec3 transmittance;\n\t\t#ifdef USE_DISPERSION\n\t\t\tfloat halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;\n\t\t\tvec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );\n\t\t\tfor ( int i = 0; i < 3; i ++ ) {\n\t\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );\n\t\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\t\trefractionCoords += 1.0;\n\t\t\t\trefractionCoords /= 2.0;\n\t\t\t\tvec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );\n\t\t\t\ttransmittedLight[ i ] = transmissionSample[ i ];\n\t\t\t\ttransmittedLight.a += transmissionSample.a;\n\t\t\t\ttransmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];\n\t\t\t}\n\t\t\ttransmittedLight.a /= 3.0;\n\t\t#else\n\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\trefractionCoords += 1.0;\n\t\t\trefractionCoords /= 2.0;\n\t\t\ttransmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\t\ttransmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\t#endif\n\t\tvec3 attenuatedColor = transmittance * transmittedLight.rgb;\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\tfloat transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n\t}\n#endif",uv_pars_fragment:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tuniform mat3 anisotropyMapTransform;\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_BATCHING\n\t\tworldPosition = batchingMatrix * worldPosition;\n\t#endif\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nuniform mat3 backgroundRotation;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",depth_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <logdepthbuf_fragment>\n\t#ifdef USE_REVERSED_DEPTH_BUFFER\n\t\tfloat fragCoordZ = vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ];\n\t#else\n\t\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ] + 0.5;\n\t#endif\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#elif DEPTH_PACKING == 3202\n\t\tgl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );\n\t#elif DEPTH_PACKING == 3203\n\t\tgl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_DISPERSION\n\tuniform float dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\tuniform vec2 anisotropyVector;\n\t#ifdef USE_ANISOTROPYMAP\n\t\tuniform sampler2D anisotropyMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;\n\t#endif\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix[ 3 ];\n\tvec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}"}),M_={common:{diffuse:{value:new jd(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new ih},alphaMap:{value:null},alphaMapTransform:{value:new ih},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new ih}},envmap:{envMap:{value:null},envMapRotation:{value:new ih},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new ih}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new ih}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new ih},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new ih},normalScale:{value:new $c(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new ih},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new ih}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new ih}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new ih}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new jd(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new jd(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new ih},alphaTest:{value:0},uvTransform:{value:new ih}},sprite:{diffuse:{value:new jd(16777215)},opacity:{value:1},center:{value:new $c(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new ih},alphaMap:{value:null},alphaMapTransform:{value:new ih},alphaTest:{value:0}}},I_={basic:{uniforms:mergeUniforms([M_.common,M_.specularmap,M_.envmap,M_.aomap,M_.lightmap,M_.fog]),vertexShader:T_.meshbasic_vert,fragmentShader:T_.meshbasic_frag},lambert:{uniforms:mergeUniforms([M_.common,M_.specularmap,M_.envmap,M_.aomap,M_.lightmap,M_.emissivemap,M_.bumpmap,M_.normalmap,M_.displacementmap,M_.fog,M_.lights,{emissive:{value:new jd(0)}}]),vertexShader:T_.meshlambert_vert,fragmentShader:T_.meshlambert_frag},phong:{uniforms:mergeUniforms([M_.common,M_.specularmap,M_.envmap,M_.aomap,M_.lightmap,M_.emissivemap,M_.bumpmap,M_.normalmap,M_.displacementmap,M_.fog,M_.lights,{emissive:{value:new jd(0)},specular:{value:new jd(1118481)},shininess:{value:30}}]),vertexShader:T_.meshphong_vert,fragmentShader:T_.meshphong_frag},standard:{uniforms:mergeUniforms([M_.common,M_.envmap,M_.aomap,M_.lightmap,M_.emissivemap,M_.bumpmap,M_.normalmap,M_.displacementmap,M_.roughnessmap,M_.metalnessmap,M_.fog,M_.lights,{emissive:{value:new jd(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:T_.meshphysical_vert,fragmentShader:T_.meshphysical_frag},toon:{uniforms:mergeUniforms([M_.common,M_.aomap,M_.lightmap,M_.emissivemap,M_.bumpmap,M_.normalmap,M_.displacementmap,M_.gradientmap,M_.fog,M_.lights,{emissive:{value:new jd(0)}}]),vertexShader:T_.meshtoon_vert,fragmentShader:T_.meshtoon_frag},matcap:{uniforms:mergeUniforms([M_.common,M_.bumpmap,M_.normalmap,M_.displacementmap,M_.fog,{matcap:{value:null}}]),vertexShader:T_.meshmatcap_vert,fragmentShader:T_.meshmatcap_frag},points:{uniforms:mergeUniforms([M_.points,M_.fog]),vertexShader:T_.points_vert,fragmentShader:T_.points_frag},dashed:{uniforms:mergeUniforms([M_.common,M_.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:T_.linedashed_vert,fragmentShader:T_.linedashed_frag},depth:{uniforms:mergeUniforms([M_.common,M_.displacementmap]),vertexShader:T_.depth_vert,fragmentShader:T_.depth_frag},normal:{uniforms:mergeUniforms([M_.common,M_.bumpmap,M_.normalmap,M_.displacementmap,{opacity:{value:1}}]),vertexShader:T_.meshnormal_vert,fragmentShader:T_.meshnormal_frag},sprite:{uniforms:mergeUniforms([M_.sprite,M_.fog]),vertexShader:T_.sprite_vert,fragmentShader:T_.sprite_frag},background:{uniforms:{uvTransform:{value:new ih},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:T_.background_vert,fragmentShader:T_.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new ih}},vertexShader:T_.backgroundCube_vert,fragmentShader:T_.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:T_.cube_vert,fragmentShader:T_.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:T_.equirect_vert,fragmentShader:T_.equirect_frag},distanceRGBA:{uniforms:mergeUniforms([M_.common,M_.displacementmap,{referencePosition:{value:new th},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:T_.distanceRGBA_vert,fragmentShader:T_.distanceRGBA_frag},shadow:{uniforms:mergeUniforms([M_.lights,M_.fog,{color:{value:new jd(0)},opacity:{value:1}}]),vertexShader:T_.shadow_vert,fragmentShader:T_.shadow_frag}};I_.physical={uniforms:mergeUniforms([I_.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new ih},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new ih},clearcoatNormalScale:{value:new $c(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new ih},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new ih},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new ih},sheen:{value:0},sheenColor:{value:new jd(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new ih},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new ih},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new ih},transmissionSamplerSize:{value:new $c},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new ih},attenuationDistance:{value:0},attenuationColor:{value:new jd(0)},specularColor:{value:new jd(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new ih},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new ih},anisotropyVector:{value:new $c},anisotropyMap:{value:null},anisotropyMapTransform:{value:new ih}}]),vertexShader:T_.meshphysical_vert,fragmentShader:T_.meshphysical_frag};var R_={r:0,b:0,g:0},P_=new sd,O_=new Qh;function WebGLBackground(e,_,S,k,E,T,M){var I,R,O=new jd(0),D=!0===T?0:1,L=null,U=0,B=null;function getBackground(e){var k=!0===e.isScene?e.background:null;k&&k.isTexture&&(k=(e.backgroundBlurriness>0?S:_).get(k));return k}function setClear(_,S){_.getRGB(R_,getUnlitUniformColorSpace(e)),k.buffers.color.setClear(R_.r,R_.g,R_.b,S,M)}return{getClearColor:function(){return O},setClearColor:function(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;O.set(e),setClear(O,D=_)},getClearAlpha:function(){return D},setClearAlpha:function(e){setClear(O,D=e)},render:function(_){var S=!1,E=getBackground(_);null===E?setClear(O,D):E&&E.isColor&&(setClear(E,1),S=!0);var T=e.xr.getEnvironmentBlendMode();"additive"===T?k.buffers.color.setClear(0,0,0,1,M):"alpha-blend"===T&&k.buffers.color.setClear(0,0,0,0,M),(e.autoClear||S)&&(k.buffers.depth.setTest(!0),k.buffers.depth.setMask(!0),k.buffers.color.setMask(!0),e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil))},addToRenderList:function(_,S){var k=getBackground(S);k&&(k.isCubeTexture||k.mapping===gl)?(void 0===R&&((R=new Tf(new Mf(1,1,1),new Rf({name:"BackgroundCubeMaterial",uniforms:cloneUniforms(I_.backgroundCube.uniforms),vertexShader:I_.backgroundCube.vertexShader,fragmentShader:I_.backgroundCube.fragmentShader,side:rl,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1}))).geometry.deleteAttribute("normal"),R.geometry.deleteAttribute("uv"),R.onBeforeRender=function(e,_,S){this.matrixWorld.copyPosition(S.matrixWorld)},Object.defineProperty(R.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),E.update(R)),P_.copy(S.backgroundRotation),P_.x*=-1,P_.y*=-1,P_.z*=-1,k.isCubeTexture&&!1===k.isRenderTargetTexture&&(P_.y*=-1,P_.z*=-1),R.material.uniforms.envMap.value=k,R.material.uniforms.flipEnvMap.value=k.isCubeTexture&&!1===k.isRenderTargetTexture?-1:1,R.material.uniforms.backgroundBlurriness.value=S.backgroundBlurriness,R.material.uniforms.backgroundIntensity.value=S.backgroundIntensity,R.material.uniforms.backgroundRotation.value.setFromMatrix4(O_.makeRotationFromEuler(P_)),R.material.toneMapped=hh.getTransfer(k.colorSpace)!==Gc,L===k&&U===k.version&&B===e.toneMapping||(R.material.needsUpdate=!0,L=k,U=k.version,B=e.toneMapping),R.layers.enableAll(),_.unshift(R,R.geometry,R.material,0,0,null)):k&&k.isTexture&&(void 0===I&&((I=new Tf(new bg(2,2),new Rf({name:"BackgroundMaterial",uniforms:cloneUniforms(I_.background.uniforms),vertexShader:I_.background.vertexShader,fragmentShader:I_.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1}))).geometry.deleteAttribute("normal"),Object.defineProperty(I.material,"map",{get:function(){return this.uniforms.t2D.value}}),E.update(I)),I.material.uniforms.t2D.value=k,I.material.uniforms.backgroundIntensity.value=S.backgroundIntensity,I.material.toneMapped=hh.getTransfer(k.colorSpace)!==Gc,!0===k.matrixAutoUpdate&&k.updateMatrix(),I.material.uniforms.uvTransform.value.copy(k.matrix),L===k&&U===k.version&&B===e.toneMapping||(I.material.needsUpdate=!0,L=k,U=k.version,B=e.toneMapping),I.layers.enableAll(),_.unshift(I,I.geometry,I.material,0,0,null))},dispose:function(){void 0!==R&&(R.geometry.dispose(),R.material.dispose(),R=void 0),void 0!==I&&(I.geometry.dispose(),I.material.dispose(),I=void 0)}}}function WebGLBindingStates(e,_){var S=e.getParameter(e.MAX_VERTEX_ATTRIBS),k={},E=createBindingState(null),T=E,M=!1;function bindVertexArrayObject(_){return e.bindVertexArray(_)}function deleteVertexArrayObject(_){return e.deleteVertexArray(_)}function createBindingState(e){for(var _=[],k=[],E=[],T=0;T<S;T++)_[T]=0,k[T]=0,E[T]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:_,enabledAttributes:k,attributeDivisors:E,object:e,attributes:{},index:null}}function initAttributes(){for(var e=T.newAttributes,_=0,S=e.length;_<S;_++)e[_]=0}function enableAttribute(e){enableAttributeAndDivisor(e,0)}function enableAttributeAndDivisor(_,S){var k=T.newAttributes,E=T.enabledAttributes,M=T.attributeDivisors;k[_]=1,0===E[_]&&(e.enableVertexAttribArray(_),E[_]=1),M[_]!==S&&(e.vertexAttribDivisor(_,S),M[_]=S)}function disableUnusedAttributes(){for(var _=T.newAttributes,S=T.enabledAttributes,k=0,E=S.length;k<E;k++)S[k]!==_[k]&&(e.disableVertexAttribArray(k),S[k]=0)}function vertexAttribPointer(_,S,k,E,T,M,I){!0===I?e.vertexAttribIPointer(_,S,k,T,M):e.vertexAttribPointer(_,S,k,E,T,M)}function reset(){resetDefaultState(),M=!0,T!==E&&bindVertexArrayObject((T=E).object)}function resetDefaultState(){E.geometry=null,E.program=null,E.wireframe=!1}return{setup:function(S,E,I,R,O){var D,L=function(_,S,E){var T=!0===E.wireframe,M=k[_.id];void 0===M&&(M={},k[_.id]=M);var I=M[S.id];void 0===I&&(I={},M[S.id]=I);var R=I[T];void 0===R&&(R=createBindingState(e.createVertexArray()),I[T]=R);return R}(R,I,E);T!==L&&bindVertexArrayObject((T=L).object),D=function(e,_,S,k){var E=T.attributes,M=_.attributes,I=0,R=S.getAttributes();for(var O in R){if(R[O].location>=0){var D=E[O],L=M[O];if(void 0===L&&("instanceMatrix"===O&&e.instanceMatrix&&(L=e.instanceMatrix),"instanceColor"===O&&e.instanceColor&&(L=e.instanceColor)),void 0===D)return!0;if(D.attribute!==L)return!0;if(L&&D.data!==L.data)return!0;I++}}return T.attributesNum!==I||T.index!==k}(S,R,I,O),D&&function(e,_,S,k){var E={},M=_.attributes,I=0,R=S.getAttributes();for(var O in R){if(R[O].location>=0){var D=M[O];void 0===D&&("instanceMatrix"===O&&e.instanceMatrix&&(D=e.instanceMatrix),"instanceColor"===O&&e.instanceColor&&(D=e.instanceColor));var L={};L.attribute=D,D&&D.data&&(L.data=D.data),E[O]=L,I++}}T.attributes=E,T.attributesNum=I,T.index=k}(S,R,I,O),null!==O&&_.update(O,e.ELEMENT_ARRAY_BUFFER),(D||M)&&(M=!1,function(S,k,E,T){initAttributes();var M=T.attributes,I=E.getAttributes(),R=k.defaultAttributeValues;for(var O in I){var D=I[O];if(D.location>=0){var L=M[O];if(void 0===L&&("instanceMatrix"===O&&S.instanceMatrix&&(L=S.instanceMatrix),"instanceColor"===O&&S.instanceColor&&(L=S.instanceColor)),void 0!==L){var U=L.normalized,B=L.itemSize,z=_.get(L);if(void 0===z)continue;var G=z.buffer,j=z.type,V=z.bytesPerElement,H=j===e.INT||j===e.UNSIGNED_INT||L.gpuType===Rl;if(L.isInterleavedBufferAttribute){var W=L.data,q=W.stride,X=L.offset;if(W.isInstancedInterleavedBuffer){for(var Y=0;Y<D.locationSize;Y++)enableAttributeAndDivisor(D.location+Y,W.meshPerAttribute);!0!==S.isInstancedMesh&&void 0===T._maxInstanceCount&&(T._maxInstanceCount=W.meshPerAttribute*W.count)}else for(var K=0;K<D.locationSize;K++)enableAttribute(D.location+K);e.bindBuffer(e.ARRAY_BUFFER,G);for(var J=0;J<D.locationSize;J++)vertexAttribPointer(D.location+J,B/D.locationSize,j,U,q*V,(X+B/D.locationSize*J)*V,H)}else{if(L.isInstancedBufferAttribute){for(var Q=0;Q<D.locationSize;Q++)enableAttributeAndDivisor(D.location+Q,L.meshPerAttribute);!0!==S.isInstancedMesh&&void 0===T._maxInstanceCount&&(T._maxInstanceCount=L.meshPerAttribute*L.count)}else for(var Z=0;Z<D.locationSize;Z++)enableAttribute(D.location+Z);e.bindBuffer(e.ARRAY_BUFFER,G);for(var $=0;$<D.locationSize;$++)vertexAttribPointer(D.location+$,B/D.locationSize,j,U,B*V,B/D.locationSize*$*V,H)}}else if(void 0!==R){var ee=R[O];if(void 0!==ee)switch(ee.length){case 2:e.vertexAttrib2fv(D.location,ee);break;case 3:e.vertexAttrib3fv(D.location,ee);break;case 4:e.vertexAttrib4fv(D.location,ee);break;default:e.vertexAttrib1fv(D.location,ee)}}}}disableUnusedAttributes()}(S,E,I,R),null!==O&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,_.get(O).buffer))},reset:reset,resetDefaultState:resetDefaultState,dispose:function(){for(var e in reset(),k){var _=k[e];for(var S in _){var E=_[S];for(var T in E)deleteVertexArrayObject(E[T].object),delete E[T];delete _[S]}delete k[e]}},releaseStatesOfGeometry:function(e){if(void 0!==k[e.id]){var _=k[e.id];for(var S in _){var E=_[S];for(var T in E)deleteVertexArrayObject(E[T].object),delete E[T];delete _[S]}delete k[e.id]}},releaseStatesOfProgram:function(e){for(var _ in k){var S=k[_];if(void 0!==S[e.id]){var E=S[e.id];for(var T in E)deleteVertexArrayObject(E[T].object),delete E[T];delete S[e.id]}}},initAttributes:initAttributes,enableAttribute:enableAttribute,disableUnusedAttributes:disableUnusedAttributes}}function WebGLBufferRenderer(e,_,S){var k;function renderInstances(_,E,T){0!==T&&(e.drawArraysInstanced(k,_,E,T),S.update(E,k,T))}this.setMode=function(e){k=e},this.render=function(_,E){e.drawArrays(k,_,E),S.update(E,k,1)},this.renderInstances=renderInstances,this.renderMultiDraw=function(e,E,T){if(0!==T){_.get("WEBGL_multi_draw").multiDrawArraysWEBGL(k,e,0,E,0,T);for(var M=0,I=0;I<T;I++)M+=E[I];S.update(M,k,1)}},this.renderMultiDrawInstances=function(e,E,T,M){if(0!==T){var I=_.get("WEBGL_multi_draw");if(null===I)for(var R=0;R<e.length;R++)renderInstances(e[R],E[R],M[R]);else{I.multiDrawArraysInstancedWEBGL(k,e,0,E,0,M,0,T);for(var O=0,D=0;D<T;D++)O+=E[D]*M[D];S.update(O,k,1)}}}}function WebGLCapabilities(e,_,S,k){var E;function getMaxPrecision(_){if("highp"===_){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0)return"highp";_="mediump"}return"mediump"===_&&e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}var T=void 0!==S.precision?S.precision:"highp",M=getMaxPrecision(T);M!==T&&(T=M);var I=!0===S.logarithmicDepthBuffer,R=!0===S.reversedDepthBuffer&&_.has("EXT_clip_control"),O=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),D=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS);return{isWebGL2:!0,getMaxAnisotropy:function(){if(void 0!==E)return E;if(!0===_.has("EXT_texture_filter_anisotropic")){var S=_.get("EXT_texture_filter_anisotropic");E=e.getParameter(S.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else E=0;return E},getMaxPrecision:getMaxPrecision,textureFormatReadable:function(_){return _===jl||k.convert(_)===e.getParameter(e.IMPLEMENTATION_COLOR_READ_FORMAT)},textureTypeReadable:function(S){var E=S===Dl&&(_.has("EXT_color_buffer_half_float")||_.has("EXT_color_buffer_float"));return!(S!==El&&k.convert(S)!==e.getParameter(e.IMPLEMENTATION_COLOR_READ_TYPE)&&S!==Ol&&!E)},precision:T,logarithmicDepthBuffer:I,reversedDepthBuffer:R,maxTextures:O,maxVertexTextures:D,maxTextureSize:e.getParameter(e.MAX_TEXTURE_SIZE),maxCubemapSize:e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),maxAttributes:e.getParameter(e.MAX_VERTEX_ATTRIBS),maxVertexUniforms:e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),maxVaryings:e.getParameter(e.MAX_VARYING_VECTORS),maxFragmentUniforms:e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),vertexTextures:D>0,maxSamples:e.getParameter(e.MAX_SAMPLES)}}function WebGLClipping(e){var _=this,S=null,k=0,E=!1,T=!1,M=new Gp,I=new ih,R={value:null,needsUpdate:!1};function projectPlanes(e,S,k,E){var T=null!==e?e.length:0,O=null;if(0!==T){if(O=R.value,!0!==E||null===O){var D=k+4*T,L=S.matrixWorldInverse;I.getNormalMatrix(L),(null===O||O.length<D)&&(O=new Float32Array(D));for(var U=0,B=k;U!==T;++U,B+=4)M.copy(e[U]).applyMatrix4(L,I),M.normal.toArray(O,B),O[B+3]=M.constant}R.value=O,R.needsUpdate=!0}return _.numPlanes=T,_.numIntersection=0,O}this.uniform=R,this.numPlanes=0,this.numIntersection=0,this.init=function(e,_){var S=0!==e.length||_||0!==k||E;return E=_,k=e.length,S},this.beginShadows=function(){T=!0,projectPlanes(null)},this.endShadows=function(){T=!1},this.setGlobalState=function(e,_){S=projectPlanes(e,_,0)},this.setState=function(M,I,O){var D=M.clippingPlanes,L=M.clipIntersection,U=M.clipShadows,B=e.get(M);if(!E||null===D||0===D.length||T&&!U)T?projectPlanes(null):function(){R.value!==S&&(R.value=S,R.needsUpdate=k>0);_.numPlanes=k,_.numIntersection=0}();else{var z=T?0:k,G=4*z,j=B.clippingState||null;R.value=j,j=projectPlanes(D,I,G,O);for(var V=0;V!==G;++V)j[V]=S[V];B.clippingState=j,this.numIntersection=L?this.numPlanes:0,this.numPlanes+=z}}}function WebGLCubeMaps(e){var _=new WeakMap;function mapTextureMapping(e,_){return _===pl?e.mapping=dl:_===vl&&(e.mapping=fl),e}function onTextureDispose(e){var S=e.target;S.removeEventListener("dispose",onTextureDispose);var k=_.get(S);void 0!==k&&(_.delete(S),k.dispose())}return{get:function(S){if(S&&S.isTexture){var k=S.mapping;if(k===pl||k===vl){if(_.has(S))return mapTextureMapping(_.get(S).texture,S.mapping);var E=S.image;if(E&&E.height>0){var T=new zf(E.height);return T.fromEquirectangularTexture(e,S),_.set(S,T),S.addEventListener("dispose",onTextureDispose),mapTextureMapping(T.texture,S.mapping)}return null}}return S},dispose:function(){_=new WeakMap}}}var D_=[.125,.215,.35,.446,.526,.582],L_=20,F_=new Mm,U_=new jd,B_=null,N_=0,z_=0,G_=!1,j_=(1+Math.sqrt(5))/2,V_=1/j_,H_=[new th(-j_,V_,0),new th(j_,V_,0),new th(-V_,0,j_),new th(V_,0,j_),new th(0,j_,-V_),new th(0,j_,V_),new th(-1,1,-1),new th(1,1,-1),new th(-1,1,1),new th(1,1,1)],W_=new th,q_=function(){return _createClass3(function PMREMGenerator(e){_classCallCheck3(this,PMREMGenerator),this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)},[{key:"fromScene",value:function(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,k=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100,E=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},T=E.size,M=void 0===T?256:T,I=E.position,R=void 0===I?W_:I;B_=this._renderer.getRenderTarget(),N_=this._renderer.getActiveCubeFace(),z_=this._renderer.getActiveMipmapLevel(),G_=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(M);var O=this._allocateTargets();return O.depthBuffer=!0,this._sceneToCubeUV(e,S,k,O,R),_>0&&this._blur(O,0,0,_),this._applyPMREM(O),this._cleanup(O),O}},{key:"fromEquirectangular",value:function(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(e,_)}},{key:"fromCubemap",value:function(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(e,_)}},{key:"compileCubemapShader",value:function(){null===this._cubemapMaterial&&(this._cubemapMaterial=_getCubemapMaterial(),this._compileMaterial(this._cubemapMaterial))}},{key:"compileEquirectangularShader",value:function(){null===this._equirectMaterial&&(this._equirectMaterial=_getEquirectMaterial(),this._compileMaterial(this._equirectMaterial))}},{key:"dispose",value:function(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}},{key:"_setSize",value:function(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}},{key:"_dispose",value:function(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(var e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}},{key:"_cleanup",value:function(e){this._renderer.setRenderTarget(B_,N_,z_),this._renderer.xr.enabled=G_,e.scissorTest=!1,_setViewport(e,0,0,e.width,e.height)}},{key:"_fromTexture",value:function(e,_){e.mapping===dl||e.mapping===fl?this._setSize(0===e.image.length?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),B_=this._renderer.getRenderTarget(),N_=this._renderer.getActiveCubeFace(),z_=this._renderer.getActiveMipmapLevel(),G_=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;var S=_||this._allocateTargets();return this._textureToCubeUV(e,S),this._applyPMREM(S),this._cleanup(S),S}},{key:"_allocateTargets",value:function(){var e=3*Math.max(this._cubeSize,112),_=4*this._cubeSize,S={magFilter:xl,minFilter:xl,generateMipmaps:!1,type:Dl,format:jl,colorSpace:Nc,depthBuffer:!1},k=_createRenderTarget(e,_,S);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==_){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=_createRenderTarget(e,_,S);var E=this._lodMax,T=function(e){for(var _=[],S=[],k=[],E=e,T=e-4+1+D_.length,M=0;M<T;M++){var I=Math.pow(2,E);S.push(I);var R=1/I;M>e-4?R=D_[M-e+4-1]:0===M&&(R=0),k.push(R);for(var O=1/(I-2),D=-O,L=1+O,U=[D,D,L,D,L,L,D,D,L,L,D,L],B=6,z=6,G=3,j=2,V=1,H=new Float32Array(G*z*B),W=new Float32Array(j*z*B),q=new Float32Array(V*z*B),X=0;X<B;X++){var Y=X%3*2/3-1,K=X>2?0:-1,J=[Y,K,0,Y+2/3,K,0,Y+2/3,K+1,0,Y,K,0,Y+2/3,K+1,0,Y,K+1,0];H.set(J,G*z*X),W.set(U,j*z*X);var Q=[X,X,X,X,X,X];q.set(Q,V*z*X)}var Z=new gf;Z.setAttribute("position",new Zd(H,G)),Z.setAttribute("uv",new Zd(W,j)),Z.setAttribute("faceIndex",new Zd(q,V)),_.push(Z),E>4&&E--}return{lodPlanes:_,sizeLods:S,sigmas:k}}(E);this._sizeLods=T.sizeLods,this._lodPlanes=T.lodPlanes,this._sigmas=T.sigmas,this._blurMaterial=function(e,_,S){var k=new Float32Array(L_),E=new th(0,1,0),T=new Rf({name:"SphericalGaussianBlur",defines:{n:L_,CUBEUV_TEXEL_WIDTH:1/_,CUBEUV_TEXEL_HEIGHT:1/S,CUBEUV_MAX_MIP:"".concat(e,".0")},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:k},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:E}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1});return T}(E,e,_)}return k}},{key:"_compileMaterial",value:function(e){var _=new Tf(this._lodPlanes[0],e);this._renderer.compile(_,F_)}},{key:"_sceneToCubeUV",value:function(e,_,S,k,E){var T=new Ff(90,1,_,S),M=[1,-1,1,1,1,1],I=[1,1,1,-1,-1,-1],R=this._renderer,O=R.autoClear,D=R.toneMapping;R.getClearColor(U_),R.toneMapping=sl,R.autoClear=!1,R.state.buffers.depth.getReversed()&&(R.setRenderTarget(k),R.clearDepth(),R.setRenderTarget(null));var L=new qd({name:"PMREM.Background",side:rl,depthWrite:!1,depthTest:!1}),U=new Tf(new Mf,L),B=!1,z=e.background;z?z.isColor&&(L.color.copy(z),e.background=null,B=!0):(L.color.copy(U_),B=!0);for(var G=0;G<6;G++){var j=G%3;0===j?(T.up.set(0,M[G],0),T.position.set(E.x,E.y,E.z),T.lookAt(E.x+I[G],E.y,E.z)):1===j?(T.up.set(0,0,M[G]),T.position.set(E.x,E.y,E.z),T.lookAt(E.x,E.y+I[G],E.z)):(T.up.set(0,M[G],0),T.position.set(E.x,E.y,E.z),T.lookAt(E.x,E.y,E.z+I[G]));var V=this._cubeSize;_setViewport(k,j*V,G>2?V:0,V,V),R.setRenderTarget(k),B&&R.render(U,T),R.render(e,T)}U.geometry.dispose(),U.material.dispose(),R.toneMapping=D,R.autoClear=O,e.background=z}},{key:"_textureToCubeUV",value:function(e,_){var S=this._renderer,k=e.mapping===dl||e.mapping===fl;k?(null===this._cubemapMaterial&&(this._cubemapMaterial=_getCubemapMaterial()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=_getEquirectMaterial());var E=k?this._cubemapMaterial:this._equirectMaterial,T=new Tf(this._lodPlanes[0],E);E.uniforms.envMap.value=e;var M=this._cubeSize;_setViewport(_,0,0,3*M,2*M),S.setRenderTarget(_),S.render(T,F_)}},{key:"_applyPMREM",value:function(e){var _=this._renderer,S=_.autoClear;_.autoClear=!1;for(var k=this._lodPlanes.length,E=1;E<k;E++){var T=Math.sqrt(this._sigmas[E]*this._sigmas[E]-this._sigmas[E-1]*this._sigmas[E-1]),M=H_[(k-E-1)%H_.length];this._blur(e,E-1,E,T,M)}_.autoClear=S}},{key:"_blur",value:function(e,_,S,k,E){var T=this._pingPongRenderTarget;this._halfBlur(e,T,_,S,k,"latitudinal",E),this._halfBlur(T,e,S,S,k,"longitudinal",E)}},{key:"_halfBlur",value:function(e,_,S,k,E,T,M){for(var I=this._renderer,R=this._blurMaterial,O=new Tf(this._lodPlanes[k],R),D=R.uniforms,L=this._sizeLods[S]-1,U=isFinite(E)?Math.PI/(2*L):2*Math.PI/39,B=E/U,z=isFinite(E)?1+Math.floor(3*B):L_,G=[],j=0,V=0;V<L_;++V){var H=V/B,W=Math.exp(-H*H/2);G.push(W),0===V?j+=W:V<z&&(j+=2*W)}for(var q=0;q<G.length;q++)G[q]=G[q]/j;D.envMap.value=e.texture,D.samples.value=z,D.weights.value=G,D.latitudinal.value="latitudinal"===T,M&&(D.poleAxis.value=M);var X=this._lodMax;D.dTheta.value=U,D.mipInt.value=X-S;var Y=this._sizeLods[k];_setViewport(_,3*Y*(k>X-4?k-X+4:0),4*(this._cubeSize-Y),3*Y,2*Y),I.setRenderTarget(_),I.render(O,F_)}}])}();function _createRenderTarget(e,_,S){var k=new bh(e,_,S);return k.texture.mapping=gl,k.texture.name="PMREM.cubeUv",k.scissorTest=!0,k}function _setViewport(e,_,S,k,E){e.viewport.set(_,S,k,E),e.scissor.set(_,S,k,E)}function _getEquirectMaterial(){return new Rf({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function _getCubemapMaterial(){return new Rf({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function WebGLCubeUVMaps(e){var _=new WeakMap,S=null;function onTextureDispose(e){var S=e.target;S.removeEventListener("dispose",onTextureDispose);var k=_.get(S);void 0!==k&&(_.delete(S),k.dispose())}return{get:function(k){if(k&&k.isTexture){var E=k.mapping,T=E===pl||E===vl,M=E===dl||E===fl;if(T||M){var I=_.get(k),R=void 0!==I?I.texture.pmremVersion:0;if(k.isRenderTargetTexture&&k.pmremVersion!==R)return null===S&&(S=new q_(e)),(I=T?S.fromEquirectangular(k,I):S.fromCubemap(k,I)).texture.pmremVersion=k.pmremVersion,_.set(k,I),I.texture;if(void 0!==I)return I.texture;var O=k.image;return T&&O&&O.height>0||M&&O&&function(e){for(var _=0,S=6,k=0;k<S;k++)void 0!==e[k]&&_++;return _===S}(O)?(null===S&&(S=new q_(e)),(I=T?S.fromEquirectangular(k):S.fromCubemap(k)).texture.pmremVersion=k.pmremVersion,_.set(k,I),k.addEventListener("dispose",onTextureDispose),I.texture):null}}return k},dispose:function(){_=new WeakMap,null!==S&&(S.dispose(),S=null)}}}function WebGLExtensions(e){var _={};function getExtension(S){if(void 0!==_[S])return _[S];var k;switch(S){case"WEBGL_depth_texture":k=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":k=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":k=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":k=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:k=e.getExtension(S)}return _[S]=k,k}return{has:function(e){return null!==getExtension(e)},init:function(){getExtension("EXT_color_buffer_float"),getExtension("WEBGL_clip_cull_distance"),getExtension("OES_texture_float_linear"),getExtension("EXT_color_buffer_half_float"),getExtension("WEBGL_multisampled_render_to_texture"),getExtension("WEBGL_render_shared_exponent")},get:function(e){var _=getExtension(e);return null===_&&warnOnce("THREE.WebGLRenderer: "+e+" extension not supported."),_}}}function WebGLGeometries(e,_,S,k){var E={},T=new WeakMap;function onGeometryDispose(e){var M=e.target;for(var I in null!==M.index&&_.remove(M.index),M.attributes)_.remove(M.attributes[I]);M.removeEventListener("dispose",onGeometryDispose),delete E[M.id];var R=T.get(M);R&&(_.remove(R),T.delete(M)),k.releaseStatesOfGeometry(M),!0===M.isInstancedBufferGeometry&&delete M._maxInstanceCount,S.memory.geometries--}function updateWireframeAttribute(e){var S=[],k=e.index,E=e.attributes.position,M=0;if(null!==k){var I=k.array;M=k.version;for(var R=0,O=I.length;R<O;R+=3){var D=I[R+0],L=I[R+1],U=I[R+2];S.push(D,L,L,U,U,D)}}else{if(void 0===E)return;var B=E.array;M=E.version;for(var z=0,G=B.length/3-1;z<G;z+=3){var j=z+0,V=z+1,H=z+2;S.push(j,V,V,H,H,j)}}var W=new(arrayNeedsUint32(S)?of:nf)(S,1);W.version=M;var q=T.get(e);q&&_.remove(q),T.set(e,W)}return{get:function(e,_){return!0===E[_.id]||(_.addEventListener("dispose",onGeometryDispose),E[_.id]=!0,S.memory.geometries++),_},update:function(S){var k=S.attributes;for(var E in k)_.update(k[E],e.ARRAY_BUFFER)},getWireframeAttribute:function(e){var _=T.get(e);if(_){var S=e.index;null!==S&&_.version<S.version&&updateWireframeAttribute(e)}else updateWireframeAttribute(e);return T.get(e)}}}function WebGLIndexedBufferRenderer(e,_,S){var k,E,T;function renderInstances(_,M,I){0!==I&&(e.drawElementsInstanced(k,M,E,_*T,I),S.update(M,k,I))}this.setMode=function(e){k=e},this.setIndex=function(e){E=e.type,T=e.bytesPerElement},this.render=function(_,M){e.drawElements(k,M,E,_*T),S.update(M,k,1)},this.renderInstances=renderInstances,this.renderMultiDraw=function(e,T,M){if(0!==M){_.get("WEBGL_multi_draw").multiDrawElementsWEBGL(k,T,0,E,e,0,M);for(var I=0,R=0;R<M;R++)I+=T[R];S.update(I,k,1)}},this.renderMultiDrawInstances=function(e,M,I,R){if(0!==I){var O=_.get("WEBGL_multi_draw");if(null===O)for(var D=0;D<e.length;D++)renderInstances(e[D]/T,M[D],R[D]);else{O.multiDrawElementsInstancedWEBGL(k,M,0,E,e,0,R,0,I);for(var L=0,U=0;U<I;U++)L+=M[U]*R[U];S.update(L,k,1)}}}}function WebGLInfo(e){var _={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:_,programs:null,autoReset:!0,reset:function(){_.calls=0,_.triangles=0,_.points=0,_.lines=0},update:function(S,k,E){switch(_.calls++,k){case e.TRIANGLES:_.triangles+=E*(S/3);break;case e.LINES:_.lines+=E*(S/2);break;case e.LINE_STRIP:_.lines+=E*(S-1);break;case e.LINE_LOOP:_.lines+=E*S;break;case e.POINTS:_.points+=E*S}}}}function WebGLMorphtargets(e,_,S){var k=new WeakMap,E=new yh;return{update:function(T,M,I){var R=T.morphTargetInfluences,O=M.morphAttributes.position||M.morphAttributes.normal||M.morphAttributes.color,D=void 0!==O?O.length:0,L=k.get(M);if(void 0===L||L.count!==D){var _disposeTexture=function(){Y.dispose(),k.delete(M),M.removeEventListener("dispose",_disposeTexture)};void 0!==L&&L.texture.dispose();var U=void 0!==M.morphAttributes.position,B=void 0!==M.morphAttributes.normal,z=void 0!==M.morphAttributes.color,G=M.morphAttributes.position||[],j=M.morphAttributes.normal||[],V=M.morphAttributes.color||[],H=0;!0===U&&(H=1),!0===B&&(H=2),!0===z&&(H=3);var W=M.attributes.position.count*H,q=1;W>_.maxTextureSize&&(q=Math.ceil(W/_.maxTextureSize),W=_.maxTextureSize);var X=new Float32Array(W*q*4*D),Y=new Sh(X,W,q,D);Y.type=Ol,Y.needsUpdate=!0;for(var K=4*H,J=0;J<D;J++)for(var Q=G[J],Z=j[J],$=V[J],ee=W*q*4*J,te=0;te<Q.count;te++){var re=te*K;!0===U&&(E.fromBufferAttribute(Q,te),X[ee+re+0]=E.x,X[ee+re+1]=E.y,X[ee+re+2]=E.z,X[ee+re+3]=0),!0===B&&(E.fromBufferAttribute(Z,te),X[ee+re+4]=E.x,X[ee+re+5]=E.y,X[ee+re+6]=E.z,X[ee+re+7]=0),!0===z&&(E.fromBufferAttribute($,te),X[ee+re+8]=E.x,X[ee+re+9]=E.y,X[ee+re+10]=E.z,X[ee+re+11]=4===$.itemSize?E.w:1)}L={count:D,texture:Y,size:new $c(W,q)},k.set(M,L),M.addEventListener("dispose",_disposeTexture)}if(!0===T.isInstancedMesh&&null!==T.morphTexture)I.getUniforms().setValue(e,"morphTexture",T.morphTexture,S);else{for(var ne=0,ie=0;ie<R.length;ie++)ne+=R[ie];var ae=M.morphTargetsRelative?1:1-ne;I.getUniforms().setValue(e,"morphTargetBaseInfluence",ae),I.getUniforms().setValue(e,"morphTargetInfluences",R)}I.getUniforms().setValue(e,"morphTargetsTexture",L.texture,S),I.getUniforms().setValue(e,"morphTargetsTextureSize",L.size)}}}function WebGLObjects(e,_,S,k){var E=new WeakMap;function onInstancedMeshDispose(e){var _=e.target;_.removeEventListener("dispose",onInstancedMeshDispose),S.remove(_.instanceMatrix),null!==_.instanceColor&&S.remove(_.instanceColor)}return{update:function(T){var M=k.render.frame,I=T.geometry,R=_.get(T,I);if(E.get(R)!==M&&(_.update(R),E.set(R,M)),T.isInstancedMesh&&(!1===T.hasEventListener("dispose",onInstancedMeshDispose)&&T.addEventListener("dispose",onInstancedMeshDispose),E.get(T)!==M&&(S.update(T.instanceMatrix,e.ARRAY_BUFFER),null!==T.instanceColor&&S.update(T.instanceColor,e.ARRAY_BUFFER),E.set(T,M))),T.isSkinnedMesh){var O=T.skeleton;E.get(O)!==M&&(O.update(),E.set(O,M))}return R},dispose:function(){E=new WeakMap}}}var X_=new mh,Y_=new Lv(1,1),K_=new Sh,J_=new xh,Q_=new Nf,Z_=[],$_=[],eb=new Float32Array(16),tb=new Float32Array(9),rb=new Float32Array(4);function flatten$1(e,_,S){var k=e[0];if(k<=0||k>0)return e;var E=_*S,T=Z_[E];if(void 0===T&&(T=new Float32Array(E),Z_[E]=T),0!==_){k.toArray(T,0);for(var M=1,I=0;M!==_;++M)I+=S,e[M].toArray(T,I)}return T}function arraysEqual$1(e,_){if(e.length!==_.length)return!1;for(var S=0,k=e.length;S<k;S++)if(e[S]!==_[S])return!1;return!0}function copyArray(e,_){for(var S=0,k=_.length;S<k;S++)e[S]=_[S]}function allocTexUnits(e,_){var S=$_[_];void 0===S&&(S=new Int32Array(_),$_[_]=S);for(var k=0;k!==_;++k)S[k]=e.allocateTextureUnit();return S}function setValueV1f(e,_){var S=this.cache;S[0]!==_&&(e.uniform1f(this.addr,_),S[0]=_)}function setValueV2f(e,_){var S=this.cache;if(void 0!==_.x)S[0]===_.x&&S[1]===_.y||(e.uniform2f(this.addr,_.x,_.y),S[0]=_.x,S[1]=_.y);else{if(arraysEqual$1(S,_))return;e.uniform2fv(this.addr,_),copyArray(S,_)}}function setValueV3f(e,_){var S=this.cache;if(void 0!==_.x)S[0]===_.x&&S[1]===_.y&&S[2]===_.z||(e.uniform3f(this.addr,_.x,_.y,_.z),S[0]=_.x,S[1]=_.y,S[2]=_.z);else if(void 0!==_.r)S[0]===_.r&&S[1]===_.g&&S[2]===_.b||(e.uniform3f(this.addr,_.r,_.g,_.b),S[0]=_.r,S[1]=_.g,S[2]=_.b);else{if(arraysEqual$1(S,_))return;e.uniform3fv(this.addr,_),copyArray(S,_)}}function setValueV4f(e,_){var S=this.cache;if(void 0!==_.x)S[0]===_.x&&S[1]===_.y&&S[2]===_.z&&S[3]===_.w||(e.uniform4f(this.addr,_.x,_.y,_.z,_.w),S[0]=_.x,S[1]=_.y,S[2]=_.z,S[3]=_.w);else{if(arraysEqual$1(S,_))return;e.uniform4fv(this.addr,_),copyArray(S,_)}}function setValueM2(e,_){var S=this.cache,k=_.elements;if(void 0===k){if(arraysEqual$1(S,_))return;e.uniformMatrix2fv(this.addr,!1,_),copyArray(S,_)}else{if(arraysEqual$1(S,k))return;rb.set(k),e.uniformMatrix2fv(this.addr,!1,rb),copyArray(S,k)}}function setValueM3(e,_){var S=this.cache,k=_.elements;if(void 0===k){if(arraysEqual$1(S,_))return;e.uniformMatrix3fv(this.addr,!1,_),copyArray(S,_)}else{if(arraysEqual$1(S,k))return;tb.set(k),e.uniformMatrix3fv(this.addr,!1,tb),copyArray(S,k)}}function setValueM4(e,_){var S=this.cache,k=_.elements;if(void 0===k){if(arraysEqual$1(S,_))return;e.uniformMatrix4fv(this.addr,!1,_),copyArray(S,_)}else{if(arraysEqual$1(S,k))return;eb.set(k),e.uniformMatrix4fv(this.addr,!1,eb),copyArray(S,k)}}function setValueV1i(e,_){var S=this.cache;S[0]!==_&&(e.uniform1i(this.addr,_),S[0]=_)}function setValueV2i(e,_){var S=this.cache;if(void 0!==_.x)S[0]===_.x&&S[1]===_.y||(e.uniform2i(this.addr,_.x,_.y),S[0]=_.x,S[1]=_.y);else{if(arraysEqual$1(S,_))return;e.uniform2iv(this.addr,_),copyArray(S,_)}}function setValueV3i(e,_){var S=this.cache;if(void 0!==_.x)S[0]===_.x&&S[1]===_.y&&S[2]===_.z||(e.uniform3i(this.addr,_.x,_.y,_.z),S[0]=_.x,S[1]=_.y,S[2]=_.z);else{if(arraysEqual$1(S,_))return;e.uniform3iv(this.addr,_),copyArray(S,_)}}function setValueV4i(e,_){var S=this.cache;if(void 0!==_.x)S[0]===_.x&&S[1]===_.y&&S[2]===_.z&&S[3]===_.w||(e.uniform4i(this.addr,_.x,_.y,_.z,_.w),S[0]=_.x,S[1]=_.y,S[2]=_.z,S[3]=_.w);else{if(arraysEqual$1(S,_))return;e.uniform4iv(this.addr,_),copyArray(S,_)}}function setValueV1ui(e,_){var S=this.cache;S[0]!==_&&(e.uniform1ui(this.addr,_),S[0]=_)}function setValueV2ui(e,_){var S=this.cache;if(void 0!==_.x)S[0]===_.x&&S[1]===_.y||(e.uniform2ui(this.addr,_.x,_.y),S[0]=_.x,S[1]=_.y);else{if(arraysEqual$1(S,_))return;e.uniform2uiv(this.addr,_),copyArray(S,_)}}function setValueV3ui(e,_){var S=this.cache;if(void 0!==_.x)S[0]===_.x&&S[1]===_.y&&S[2]===_.z||(e.uniform3ui(this.addr,_.x,_.y,_.z),S[0]=_.x,S[1]=_.y,S[2]=_.z);else{if(arraysEqual$1(S,_))return;e.uniform3uiv(this.addr,_),copyArray(S,_)}}function setValueV4ui(e,_){var S=this.cache;if(void 0!==_.x)S[0]===_.x&&S[1]===_.y&&S[2]===_.z&&S[3]===_.w||(e.uniform4ui(this.addr,_.x,_.y,_.z,_.w),S[0]=_.x,S[1]=_.y,S[2]=_.z,S[3]=_.w);else{if(arraysEqual$1(S,_))return;e.uniform4uiv(this.addr,_),copyArray(S,_)}}function setValueT1(e,_,S){var k,E=this.cache,T=S.allocateTextureUnit();E[0]!==T&&(e.uniform1i(this.addr,T),E[0]=T),this.type===e.SAMPLER_2D_SHADOW?(Y_.compareFunction=515,k=Y_):k=X_,S.setTexture2D(_||k,T)}function setValueT3D1(e,_,S){var k=this.cache,E=S.allocateTextureUnit();k[0]!==E&&(e.uniform1i(this.addr,E),k[0]=E),S.setTexture3D(_||J_,E)}function setValueT6(e,_,S){var k=this.cache,E=S.allocateTextureUnit();k[0]!==E&&(e.uniform1i(this.addr,E),k[0]=E),S.setTextureCube(_||Q_,E)}function setValueT2DArray1(e,_,S){var k=this.cache,E=S.allocateTextureUnit();k[0]!==E&&(e.uniform1i(this.addr,E),k[0]=E),S.setTexture2DArray(_||K_,E)}function setValueV1fArray(e,_){e.uniform1fv(this.addr,_)}function setValueV2fArray(e,_){var S=flatten$1(_,this.size,2);e.uniform2fv(this.addr,S)}function setValueV3fArray(e,_){var S=flatten$1(_,this.size,3);e.uniform3fv(this.addr,S)}function setValueV4fArray(e,_){var S=flatten$1(_,this.size,4);e.uniform4fv(this.addr,S)}function setValueM2Array(e,_){var S=flatten$1(_,this.size,4);e.uniformMatrix2fv(this.addr,!1,S)}function setValueM3Array(e,_){var S=flatten$1(_,this.size,9);e.uniformMatrix3fv(this.addr,!1,S)}function setValueM4Array(e,_){var S=flatten$1(_,this.size,16);e.uniformMatrix4fv(this.addr,!1,S)}function setValueV1iArray(e,_){e.uniform1iv(this.addr,_)}function setValueV2iArray(e,_){e.uniform2iv(this.addr,_)}function setValueV3iArray(e,_){e.uniform3iv(this.addr,_)}function setValueV4iArray(e,_){e.uniform4iv(this.addr,_)}function setValueV1uiArray(e,_){e.uniform1uiv(this.addr,_)}function setValueV2uiArray(e,_){e.uniform2uiv(this.addr,_)}function setValueV3uiArray(e,_){e.uniform3uiv(this.addr,_)}function setValueV4uiArray(e,_){e.uniform4uiv(this.addr,_)}function setValueT1Array(e,_,S){var k=this.cache,E=_.length,T=allocTexUnits(S,E);arraysEqual$1(k,T)||(e.uniform1iv(this.addr,T),copyArray(k,T));for(var M=0;M!==E;++M)S.setTexture2D(_[M]||X_,T[M])}function setValueT3DArray(e,_,S){var k=this.cache,E=_.length,T=allocTexUnits(S,E);arraysEqual$1(k,T)||(e.uniform1iv(this.addr,T),copyArray(k,T));for(var M=0;M!==E;++M)S.setTexture3D(_[M]||J_,T[M])}function setValueT6Array(e,_,S){var k=this.cache,E=_.length,T=allocTexUnits(S,E);arraysEqual$1(k,T)||(e.uniform1iv(this.addr,T),copyArray(k,T));for(var M=0;M!==E;++M)S.setTextureCube(_[M]||Q_,T[M])}function setValueT2DArrayArray(e,_,S){var k=this.cache,E=_.length,T=allocTexUnits(S,E);arraysEqual$1(k,T)||(e.uniform1iv(this.addr,T),copyArray(k,T));for(var M=0;M!==E;++M)S.setTexture2DArray(_[M]||K_,T[M])}var nb=_createClass3(function SingleUniform(e,_,S){_classCallCheck3(this,SingleUniform),this.id=e,this.addr=S,this.cache=[],this.type=_.type,this.setValue=function(e){switch(e){case 5126:return setValueV1f;case 35664:return setValueV2f;case 35665:return setValueV3f;case 35666:return setValueV4f;case 35674:return setValueM2;case 35675:return setValueM3;case 35676:return setValueM4;case 5124:case 35670:return setValueV1i;case 35667:case 35671:return setValueV2i;case 35668:case 35672:return setValueV3i;case 35669:case 35673:return setValueV4i;case 5125:return setValueV1ui;case 36294:return setValueV2ui;case 36295:return setValueV3ui;case 36296:return setValueV4ui;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1;case 35679:case 36299:case 36307:return setValueT3D1;case 35680:case 36300:case 36308:case 36293:return setValueT6;case 36289:case 36303:case 36311:case 36292:return setValueT2DArray1}}(_.type)}),ib=_createClass3(function PureArrayUniform(e,_,S){_classCallCheck3(this,PureArrayUniform),this.id=e,this.addr=S,this.cache=[],this.type=_.type,this.size=_.size,this.setValue=function(e){switch(e){case 5126:return setValueV1fArray;case 35664:return setValueV2fArray;case 35665:return setValueV3fArray;case 35666:return setValueV4fArray;case 35674:return setValueM2Array;case 35675:return setValueM3Array;case 35676:return setValueM4Array;case 5124:case 35670:return setValueV1iArray;case 35667:case 35671:return setValueV2iArray;case 35668:case 35672:return setValueV3iArray;case 35669:case 35673:return setValueV4iArray;case 5125:return setValueV1uiArray;case 36294:return setValueV2uiArray;case 36295:return setValueV3uiArray;case 36296:return setValueV4uiArray;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1Array;case 35679:case 36299:case 36307:return setValueT3DArray;case 35680:case 36300:case 36308:case 36293:return setValueT6Array;case 36289:case 36303:case 36311:case 36292:return setValueT2DArrayArray}}(_.type)}),ab=function(){return _createClass3(function StructuredUniform(e){_classCallCheck3(this,StructuredUniform),this.id=e,this.seq=[],this.map={}},[{key:"setValue",value:function(e,_,S){for(var k=this.seq,E=0,T=k.length;E!==T;++E){var M=k[E];M.setValue(e,_[M.id],S)}}}])}(),ob=/(\w+)(\])?(\[|\.)?/g;function addUniform(e,_){e.seq.push(_),e.map[_.id]=_}function parseUniform(e,_,S){var k=e.name,E=k.length;for(ob.lastIndex=0;;){var T=ob.exec(k),M=ob.lastIndex,I=T[1],R="]"===T[2],O=T[3];if(R&&(I|=0),void 0===O||"["===O&&M+2===E){addUniform(S,void 0===O?new nb(I,e,_):new ib(I,e,_));break}var D=S.map[I];void 0===D&&addUniform(S,D=new ab(I)),S=D}}var sb=function(){return _createClass3(function WebGLUniforms(e,_){_classCallCheck3(this,WebGLUniforms),this.seq=[],this.map={};for(var S=e.getProgramParameter(_,e.ACTIVE_UNIFORMS),k=0;k<S;++k){var E=e.getActiveUniform(_,k);parseUniform(E,e.getUniformLocation(_,E.name),this)}},[{key:"setValue",value:function(e,_,S,k){var E=this.map[_];void 0!==E&&E.setValue(e,S,k)}},{key:"setOptional",value:function(e,_,S){var k=_[S];void 0!==k&&this.setValue(e,S,k)}}],[{key:"upload",value:function(e,_,S,k){for(var E=0,T=_.length;E!==T;++E){var M=_[E],I=S[M.id];!1!==I.needsUpdate&&M.setValue(e,I.value,k)}}},{key:"seqWithValue",value:function(e,_){for(var S=[],k=0,E=e.length;k!==E;++k){var T=e[k];T.id in _&&S.push(T)}return S}}])}();function WebGLShader(e,_,S){var k=e.createShader(_);return e.shaderSource(k,S),e.compileShader(k),k}var ub=0;var lb=new ih;function getShaderErrors(e,_,S){var k=e.getShaderParameter(_,e.COMPILE_STATUS),E=(e.getShaderInfoLog(_)||"").trim();if(k&&""===E)return"";var T=/ERROR: 0:(\d+)/.exec(E);if(T){var M=parseInt(T[1]);return S.toUpperCase()+"\n\n"+E+"\n\n"+function(e,_){for(var S=e.split("\n"),k=[],E=Math.max(_-6,0),T=Math.min(_+6,S.length),M=E;M<T;M++){var I=M+1;k.push("".concat(I===_?">":" "," ").concat(I,": ").concat(S[M]))}return k.join("\n")}(e.getShaderSource(_),M)}return E}function getTexelEncodingFunction(e,_){var S=function(e){hh._getMatrix(lb,hh.workingColorSpace,e);var _="mat3( ".concat(lb.elements.map(function(e){return e.toFixed(4)})," )");switch(hh.getTransfer(e)){case zc:return[_,"LinearTransferOETF"];case Gc:return[_,"sRGBTransferOETF"];default:return[_,"LinearTransferOETF"]}}(_);return["vec4 ".concat(e,"( vec4 value ) {"),"\treturn ".concat(S[1],"( vec4( value.rgb * ").concat(S[0],", value.a ) );"),"}"].join("\n")}function getToneMappingFunction(e,_){var S;switch(_){case 1:S="Linear";break;case 2:S="Reinhard";break;case 3:S="Cineon";break;case ul:S="ACESFilmic";break;case 6:S="AgX";break;case 7:S="Neutral";break;case 5:S="Custom";break;default:S="Linear"}return"vec3 "+e+"( vec3 color ) { return "+S+"ToneMapping( color ); }"}var cb=new th;function getLuminanceFunction(){hh.getLuminanceCoefficients(cb);var e=cb.x.toFixed(4),_=cb.y.toFixed(4),S=cb.z.toFixed(4);return["float luminance( const in vec3 rgb ) {","\tconst vec3 weights = vec3( ".concat(e,", ").concat(_,", ").concat(S," );"),"\treturn dot( weights, rgb );","}"].join("\n")}function filterEmptyLine(e){return""!==e}function replaceLightNums(e,_){var S=_.numSpotLightShadows+_.numSpotLightMaps-_.numSpotLightShadowsWithMaps;return e.replace(/NUM_DIR_LIGHTS/g,_.numDirLights).replace(/NUM_SPOT_LIGHTS/g,_.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,_.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,S).replace(/NUM_RECT_AREA_LIGHTS/g,_.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,_.numPointLights).replace(/NUM_HEMI_LIGHTS/g,_.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,_.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,_.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,_.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,_.numPointLightShadows)}function replaceClippingPlaneNums(e,_){return e.replace(/NUM_CLIPPING_PLANES/g,_.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,_.numClippingPlanes-_.numClipIntersection)}var hb=/^[ \t]*#include +<([\w\d./]+)>/gm;function resolveIncludes(e){return e.replace(hb,includeReplacer)}var db=new Map;function includeReplacer(e,_){var S=T_[_];if(void 0===S){var k=db.get(_);if(void 0===k)throw new Error("Can not resolve #include <"+_+">");S=T_[k]}return resolveIncludes(S)}var fb=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function unrollLoops(e){return e.replace(fb,loopReplacer)}function loopReplacer(e,_,S,k){for(var E="",T=parseInt(_);T<parseInt(S);T++)E+=k.replace(/\[\s*i\s*\]/g,"[ "+T+" ]").replace(/UNROLLED_LOOP_INDEX/g,T);return E}function generatePrecision(e){var _="precision ".concat(e.precision," float;\n\tprecision ").concat(e.precision," int;\n\tprecision ").concat(e.precision," sampler2D;\n\tprecision ").concat(e.precision," samplerCube;\n\tprecision ").concat(e.precision," sampler3D;\n\tprecision ").concat(e.precision," sampler2DArray;\n\tprecision ").concat(e.precision," sampler2DShadow;\n\tprecision ").concat(e.precision," samplerCubeShadow;\n\tprecision ").concat(e.precision," sampler2DArrayShadow;\n\tprecision ").concat(e.precision," isampler2D;\n\tprecision ").concat(e.precision," isampler3D;\n\tprecision ").concat(e.precision," isamplerCube;\n\tprecision ").concat(e.precision," isampler2DArray;\n\tprecision ").concat(e.precision," usampler2D;\n\tprecision ").concat(e.precision," usampler3D;\n\tprecision ").concat(e.precision," usamplerCube;\n\tprecision ").concat(e.precision," usampler2DArray;\n\t");return"highp"===e.precision?_+="\n#define HIGH_PRECISION":"mediump"===e.precision?_+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(_+="\n#define LOW_PRECISION"),_}function WebGLProgram(e,_,S,k){var E,T,M=e.getContext(),I=S.defines,R=S.vertexShader,O=S.fragmentShader,D=function(e){var _="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===$u?_="SHADOWMAP_TYPE_PCF":e.shadowMapType===el?_="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===tl&&(_="SHADOWMAP_TYPE_VSM"),_}(S),L=function(e){var _="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case dl:case fl:_="ENVMAP_TYPE_CUBE";break;case gl:_="ENVMAP_TYPE_CUBE_UV"}return _}(S),U=function(e){var _="ENVMAP_MODE_REFLECTION";e.envMap&&e.envMapMode===fl&&(_="ENVMAP_MODE_REFRACTION");return _}(S),B=function(e){var _="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case 0:_="ENVMAP_BLENDING_MULTIPLY";break;case 1:_="ENVMAP_BLENDING_MIX";break;case 2:_="ENVMAP_BLENDING_ADD"}return _}(S),z=function(e){var _=e.envMapCubeUVHeight;if(null===_)return null;var S=Math.log2(_)-2,k=1/_;return{texelWidth:1/(3*Math.max(Math.pow(2,S),112)),texelHeight:k,maxMip:S}}(S),G=function(e){return[e.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",e.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(filterEmptyLine).join("\n")}(S),j=function(e){var _=[];for(var S in e){var k=e[S];!1!==k&&_.push("#define "+S+" "+k)}return _.join("\n")}(I),V=M.createProgram(),H=S.glslVersion?"#version "+S.glslVersion+"\n":"";S.isRawShaderMaterial?((E=["#define SHADER_TYPE "+S.shaderType,"#define SHADER_NAME "+S.shaderName,j].filter(filterEmptyLine).join("\n")).length>0&&(E+="\n"),(T=["#define SHADER_TYPE "+S.shaderType,"#define SHADER_NAME "+S.shaderName,j].filter(filterEmptyLine).join("\n")).length>0&&(T+="\n")):(E=[generatePrecision(S),"#define SHADER_TYPE "+S.shaderType,"#define SHADER_NAME "+S.shaderName,j,S.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",S.batching?"#define USE_BATCHING":"",S.batchingColor?"#define USE_BATCHING_COLOR":"",S.instancing?"#define USE_INSTANCING":"",S.instancingColor?"#define USE_INSTANCING_COLOR":"",S.instancingMorph?"#define USE_INSTANCING_MORPH":"",S.useFog&&S.fog?"#define USE_FOG":"",S.useFog&&S.fogExp2?"#define FOG_EXP2":"",S.map?"#define USE_MAP":"",S.envMap?"#define USE_ENVMAP":"",S.envMap?"#define "+U:"",S.lightMap?"#define USE_LIGHTMAP":"",S.aoMap?"#define USE_AOMAP":"",S.bumpMap?"#define USE_BUMPMAP":"",S.normalMap?"#define USE_NORMALMAP":"",S.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",S.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",S.displacementMap?"#define USE_DISPLACEMENTMAP":"",S.emissiveMap?"#define USE_EMISSIVEMAP":"",S.anisotropy?"#define USE_ANISOTROPY":"",S.anisotropyMap?"#define USE_ANISOTROPYMAP":"",S.clearcoatMap?"#define USE_CLEARCOATMAP":"",S.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",S.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",S.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",S.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",S.specularMap?"#define USE_SPECULARMAP":"",S.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",S.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",S.roughnessMap?"#define USE_ROUGHNESSMAP":"",S.metalnessMap?"#define USE_METALNESSMAP":"",S.alphaMap?"#define USE_ALPHAMAP":"",S.alphaHash?"#define USE_ALPHAHASH":"",S.transmission?"#define USE_TRANSMISSION":"",S.transmissionMap?"#define USE_TRANSMISSIONMAP":"",S.thicknessMap?"#define USE_THICKNESSMAP":"",S.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",S.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",S.mapUv?"#define MAP_UV "+S.mapUv:"",S.alphaMapUv?"#define ALPHAMAP_UV "+S.alphaMapUv:"",S.lightMapUv?"#define LIGHTMAP_UV "+S.lightMapUv:"",S.aoMapUv?"#define AOMAP_UV "+S.aoMapUv:"",S.emissiveMapUv?"#define EMISSIVEMAP_UV "+S.emissiveMapUv:"",S.bumpMapUv?"#define BUMPMAP_UV "+S.bumpMapUv:"",S.normalMapUv?"#define NORMALMAP_UV "+S.normalMapUv:"",S.displacementMapUv?"#define DISPLACEMENTMAP_UV "+S.displacementMapUv:"",S.metalnessMapUv?"#define METALNESSMAP_UV "+S.metalnessMapUv:"",S.roughnessMapUv?"#define ROUGHNESSMAP_UV "+S.roughnessMapUv:"",S.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+S.anisotropyMapUv:"",S.clearcoatMapUv?"#define CLEARCOATMAP_UV "+S.clearcoatMapUv:"",S.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+S.clearcoatNormalMapUv:"",S.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+S.clearcoatRoughnessMapUv:"",S.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+S.iridescenceMapUv:"",S.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+S.iridescenceThicknessMapUv:"",S.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+S.sheenColorMapUv:"",S.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+S.sheenRoughnessMapUv:"",S.specularMapUv?"#define SPECULARMAP_UV "+S.specularMapUv:"",S.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+S.specularColorMapUv:"",S.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+S.specularIntensityMapUv:"",S.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+S.transmissionMapUv:"",S.thicknessMapUv?"#define THICKNESSMAP_UV "+S.thicknessMapUv:"",S.vertexTangents&&!1===S.flatShading?"#define USE_TANGENT":"",S.vertexColors?"#define USE_COLOR":"",S.vertexAlphas?"#define USE_COLOR_ALPHA":"",S.vertexUv1s?"#define USE_UV1":"",S.vertexUv2s?"#define USE_UV2":"",S.vertexUv3s?"#define USE_UV3":"",S.pointsUvs?"#define USE_POINTS_UV":"",S.flatShading?"#define FLAT_SHADED":"",S.skinning?"#define USE_SKINNING":"",S.morphTargets?"#define USE_MORPHTARGETS":"",S.morphNormals&&!1===S.flatShading?"#define USE_MORPHNORMALS":"",S.morphColors?"#define USE_MORPHCOLORS":"",S.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+S.morphTextureStride:"",S.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+S.morphTargetsCount:"",S.doubleSided?"#define DOUBLE_SIDED":"",S.flipSided?"#define FLIP_SIDED":"",S.shadowMapEnabled?"#define USE_SHADOWMAP":"",S.shadowMapEnabled?"#define "+D:"",S.sizeAttenuation?"#define USE_SIZEATTENUATION":"",S.numLightProbes>0?"#define USE_LIGHT_PROBES":"",S.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",S.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","\tuniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","\tattribute vec2 uv1;","#endif","#ifdef USE_UV2","\tattribute vec2 uv2;","#endif","#ifdef USE_UV3","\tattribute vec2 uv3;","#endif","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(filterEmptyLine).join("\n"),T=[generatePrecision(S),"#define SHADER_TYPE "+S.shaderType,"#define SHADER_NAME "+S.shaderName,j,S.useFog&&S.fog?"#define USE_FOG":"",S.useFog&&S.fogExp2?"#define FOG_EXP2":"",S.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",S.map?"#define USE_MAP":"",S.matcap?"#define USE_MATCAP":"",S.envMap?"#define USE_ENVMAP":"",S.envMap?"#define "+L:"",S.envMap?"#define "+U:"",S.envMap?"#define "+B:"",z?"#define CUBEUV_TEXEL_WIDTH "+z.texelWidth:"",z?"#define CUBEUV_TEXEL_HEIGHT "+z.texelHeight:"",z?"#define CUBEUV_MAX_MIP "+z.maxMip+".0":"",S.lightMap?"#define USE_LIGHTMAP":"",S.aoMap?"#define USE_AOMAP":"",S.bumpMap?"#define USE_BUMPMAP":"",S.normalMap?"#define USE_NORMALMAP":"",S.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",S.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",S.emissiveMap?"#define USE_EMISSIVEMAP":"",S.anisotropy?"#define USE_ANISOTROPY":"",S.anisotropyMap?"#define USE_ANISOTROPYMAP":"",S.clearcoat?"#define USE_CLEARCOAT":"",S.clearcoatMap?"#define USE_CLEARCOATMAP":"",S.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",S.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",S.dispersion?"#define USE_DISPERSION":"",S.iridescence?"#define USE_IRIDESCENCE":"",S.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",S.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",S.specularMap?"#define USE_SPECULARMAP":"",S.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",S.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",S.roughnessMap?"#define USE_ROUGHNESSMAP":"",S.metalnessMap?"#define USE_METALNESSMAP":"",S.alphaMap?"#define USE_ALPHAMAP":"",S.alphaTest?"#define USE_ALPHATEST":"",S.alphaHash?"#define USE_ALPHAHASH":"",S.sheen?"#define USE_SHEEN":"",S.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",S.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",S.transmission?"#define USE_TRANSMISSION":"",S.transmissionMap?"#define USE_TRANSMISSIONMAP":"",S.thicknessMap?"#define USE_THICKNESSMAP":"",S.vertexTangents&&!1===S.flatShading?"#define USE_TANGENT":"",S.vertexColors||S.instancingColor||S.batchingColor?"#define USE_COLOR":"",S.vertexAlphas?"#define USE_COLOR_ALPHA":"",S.vertexUv1s?"#define USE_UV1":"",S.vertexUv2s?"#define USE_UV2":"",S.vertexUv3s?"#define USE_UV3":"",S.pointsUvs?"#define USE_POINTS_UV":"",S.gradientMap?"#define USE_GRADIENTMAP":"",S.flatShading?"#define FLAT_SHADED":"",S.doubleSided?"#define DOUBLE_SIDED":"",S.flipSided?"#define FLIP_SIDED":"",S.shadowMapEnabled?"#define USE_SHADOWMAP":"",S.shadowMapEnabled?"#define "+D:"",S.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",S.numLightProbes>0?"#define USE_LIGHT_PROBES":"",S.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",S.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",S.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",S.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",S.toneMapping!==sl?"#define TONE_MAPPING":"",S.toneMapping!==sl?T_.tonemapping_pars_fragment:"",S.toneMapping!==sl?getToneMappingFunction("toneMapping",S.toneMapping):"",S.dithering?"#define DITHERING":"",S.opaque?"#define OPAQUE":"",T_.colorspace_pars_fragment,getTexelEncodingFunction("linearToOutputTexel",S.outputColorSpace),getLuminanceFunction(),S.useDepthPacking?"#define DEPTH_PACKING "+S.depthPacking:"","\n"].filter(filterEmptyLine).join("\n")),R=replaceClippingPlaneNums(R=replaceLightNums(R=resolveIncludes(R),S),S),O=replaceClippingPlaneNums(O=replaceLightNums(O=resolveIncludes(O),S),S),R=unrollLoops(R),O=unrollLoops(O),!0!==S.isRawShaderMaterial&&(H="#version 300 es\n",E=[G,"#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+E,T=["#define varying in",S.glslVersion===Hc?"":"layout(location = 0) out highp vec4 pc_fragColor;",S.glslVersion===Hc?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+T);var W,q,X=H+E+R,Y=H+T+O,K=WebGLShader(M,M.VERTEX_SHADER,X),J=WebGLShader(M,M.FRAGMENT_SHADER,Y);function onFirstUse(_){if(e.debug.checkShaderErrors){var S=M.getProgramInfoLog(V)||"",k=M.getShaderInfoLog(K)||"",I=M.getShaderInfoLog(J)||"",R=S.trim(),O=k.trim(),D=I.trim(),L=!0,U=!0;if(!1===M.getProgramParameter(V,M.LINK_STATUS))if(L=!1,"function"==typeof e.debug.onShaderError)e.debug.onShaderError(M,V,K,J);else getShaderErrors(M,K,"vertex"),getShaderErrors(M,J,"fragment");else""!==R||""!==O&&""!==D||(U=!1);U&&(_.diagnostics={runnable:L,programLog:R,vertexShader:{log:O,prefix:E},fragmentShader:{log:D,prefix:T}})}M.deleteShader(K),M.deleteShader(J),W=new sb(M,V),q=function(e,_){for(var S={},k=e.getProgramParameter(_,e.ACTIVE_ATTRIBUTES),E=0;E<k;E++){var T=e.getActiveAttrib(_,E),M=T.name,I=1;T.type===e.FLOAT_MAT2&&(I=2),T.type===e.FLOAT_MAT3&&(I=3),T.type===e.FLOAT_MAT4&&(I=4),S[M]={type:T.type,location:e.getAttribLocation(_,M),locationSize:I}}return S}(M,V)}M.attachShader(V,K),M.attachShader(V,J),void 0!==S.index0AttributeName?M.bindAttribLocation(V,0,S.index0AttributeName):!0===S.morphTargets&&M.bindAttribLocation(V,0,"position"),M.linkProgram(V),this.getUniforms=function(){return void 0===W&&onFirstUse(this),W},this.getAttributes=function(){return void 0===q&&onFirstUse(this),q};var Q=!1===S.rendererExtensionParallelShaderCompile;return this.isReady=function(){return!1===Q&&(Q=M.getProgramParameter(V,37297)),Q},this.destroy=function(){k.releaseStatesOfProgram(this),M.deleteProgram(V),this.program=void 0},this.type=S.shaderType,this.name=S.shaderName,this.id=ub++,this.cacheKey=_,this.usedTimes=1,this.program=V,this.vertexShader=K,this.fragmentShader=J,this}var pb=0,vb=function(){return _createClass3(function WebGLShaderCache(){_classCallCheck3(this,WebGLShaderCache),this.shaderCache=new Map,this.materialCache=new Map},[{key:"update",value:function(e){var _=e.vertexShader,S=e.fragmentShader,k=this._getShaderStage(_),E=this._getShaderStage(S),T=this._getShaderCacheForMaterial(e);return!1===T.has(k)&&(T.add(k),k.usedTimes++),!1===T.has(E)&&(T.add(E),E.usedTimes++),this}},{key:"remove",value:function(e){var _,S=_createForOfIteratorHelper2(this.materialCache.get(e));try{for(S.s();!(_=S.n()).done;){var k=_.value;k.usedTimes--,0===k.usedTimes&&this.shaderCache.delete(k.code)}}catch(E){S.e(E)}finally{S.f()}return this.materialCache.delete(e),this}},{key:"getVertexShaderID",value:function(e){return this._getShaderStage(e.vertexShader).id}},{key:"getFragmentShaderID",value:function(e){return this._getShaderStage(e.fragmentShader).id}},{key:"dispose",value:function(){this.shaderCache.clear(),this.materialCache.clear()}},{key:"_getShaderCacheForMaterial",value:function(e){var _=this.materialCache,S=_.get(e);return void 0===S&&(S=new Set,_.set(e,S)),S}},{key:"_getShaderStage",value:function(e){var _=this.shaderCache,S=_.get(e);return void 0===S&&(S=new gb(e),_.set(e,S)),S}}])}(),gb=_createClass3(function WebGLShaderStage(e){_classCallCheck3(this,WebGLShaderStage),this.id=pb++,this.code=e,this.usedTimes=0});function WebGLPrograms(e,_,S,k,E,T,M){var I=new ud,R=new vb,O=new Set,D=[],L=E.logarithmicDepthBuffer,U=E.vertexTextures,B=E.precision,z={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function getChannel(e){return O.add(e),0===e?"uv":"uv".concat(e)}return{getParameters:function(T,I,D,G,j){var V=G.fog,H=j.geometry,W=T.isMeshStandardMaterial?G.environment:null,q=(T.isMeshStandardMaterial?S:_).get(T.envMap||W),X=q&&q.mapping===gl?q.image.height:null,Y=z[T.type];null!==T.precision&&(B=E.getMaxPrecision(T.precision),T.precision);var K,J,Q,Z,$=H.morphAttributes.position||H.morphAttributes.normal||H.morphAttributes.color,ee=void 0!==$?$.length:0,te=0;if(void 0!==H.morphAttributes.position&&(te=1),void 0!==H.morphAttributes.normal&&(te=2),void 0!==H.morphAttributes.color&&(te=3),Y){var re=I_[Y];K=re.vertexShader,J=re.fragmentShader}else K=T.vertexShader,J=T.fragmentShader,R.update(T),Q=R.getVertexShaderID(T),Z=R.getFragmentShaderID(T);var ne=e.getRenderTarget(),ie=e.state.buffers.depth.getReversed(),ae=!0===j.isInstancedMesh,oe=!0===j.isBatchedMesh,se=!!T.map,ue=!!T.matcap,le=!!q,ce=!!T.aoMap,he=!!T.lightMap,de=!!T.bumpMap,fe=!!T.normalMap,pe=!!T.displacementMap,ve=!!T.emissiveMap,ge=!!T.metalnessMap,me=!!T.roughnessMap,ye=T.anisotropy>0,_e=T.clearcoat>0,be=T.dispersion>0,Se=T.iridescence>0,we=T.sheen>0,xe=T.transmission>0,ke=ye&&!!T.anisotropyMap,Ce=_e&&!!T.clearcoatMap,Ae=_e&&!!T.clearcoatNormalMap,Ee=_e&&!!T.clearcoatRoughnessMap,Te=Se&&!!T.iridescenceMap,Me=Se&&!!T.iridescenceThicknessMap,Ie=we&&!!T.sheenColorMap,Re=we&&!!T.sheenRoughnessMap,Pe=!!T.specularMap,Oe=!!T.specularColorMap,De=!!T.specularIntensityMap,Le=xe&&!!T.transmissionMap,Fe=xe&&!!T.thicknessMap,Ue=!!T.gradientMap,Be=!!T.alphaMap,Ne=T.alphaTest>0,ze=!!T.alphaHash,Ge=!!T.extensions,je=sl;T.toneMapped&&(null!==ne&&!0!==ne.isXRRenderTarget||(je=e.toneMapping));var Ve={shaderID:Y,shaderType:T.type,shaderName:T.name,vertexShader:K,fragmentShader:J,defines:T.defines,customVertexShaderID:Q,customFragmentShaderID:Z,isRawShaderMaterial:!0===T.isRawShaderMaterial,glslVersion:T.glslVersion,precision:B,batching:oe,batchingColor:oe&&null!==j._colorsTexture,instancing:ae,instancingColor:ae&&null!==j.instanceColor,instancingMorph:ae&&null!==j.morphTexture,supportsVertexTextures:U,outputColorSpace:null===ne?e.outputColorSpace:!0===ne.isXRRenderTarget?ne.texture.colorSpace:Nc,alphaToCoverage:!!T.alphaToCoverage,map:se,matcap:ue,envMap:le,envMapMode:le&&q.mapping,envMapCubeUVHeight:X,aoMap:ce,lightMap:he,bumpMap:de,normalMap:fe,displacementMap:U&&pe,emissiveMap:ve,normalMapObjectSpace:fe&&1===T.normalMapType,normalMapTangentSpace:fe&&0===T.normalMapType,metalnessMap:ge,roughnessMap:me,anisotropy:ye,anisotropyMap:ke,clearcoat:_e,clearcoatMap:Ce,clearcoatNormalMap:Ae,clearcoatRoughnessMap:Ee,dispersion:be,iridescence:Se,iridescenceMap:Te,iridescenceThicknessMap:Me,sheen:we,sheenColorMap:Ie,sheenRoughnessMap:Re,specularMap:Pe,specularColorMap:Oe,specularIntensityMap:De,transmission:xe,transmissionMap:Le,thicknessMap:Fe,gradientMap:Ue,opaque:!1===T.transparent&&1===T.blending&&!1===T.alphaToCoverage,alphaMap:Be,alphaTest:Ne,alphaHash:ze,combine:T.combine,mapUv:se&&getChannel(T.map.channel),aoMapUv:ce&&getChannel(T.aoMap.channel),lightMapUv:he&&getChannel(T.lightMap.channel),bumpMapUv:de&&getChannel(T.bumpMap.channel),normalMapUv:fe&&getChannel(T.normalMap.channel),displacementMapUv:pe&&getChannel(T.displacementMap.channel),emissiveMapUv:ve&&getChannel(T.emissiveMap.channel),metalnessMapUv:ge&&getChannel(T.metalnessMap.channel),roughnessMapUv:me&&getChannel(T.roughnessMap.channel),anisotropyMapUv:ke&&getChannel(T.anisotropyMap.channel),clearcoatMapUv:Ce&&getChannel(T.clearcoatMap.channel),clearcoatNormalMapUv:Ae&&getChannel(T.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Ee&&getChannel(T.clearcoatRoughnessMap.channel),iridescenceMapUv:Te&&getChannel(T.iridescenceMap.channel),iridescenceThicknessMapUv:Me&&getChannel(T.iridescenceThicknessMap.channel),sheenColorMapUv:Ie&&getChannel(T.sheenColorMap.channel),sheenRoughnessMapUv:Re&&getChannel(T.sheenRoughnessMap.channel),specularMapUv:Pe&&getChannel(T.specularMap.channel),specularColorMapUv:Oe&&getChannel(T.specularColorMap.channel),specularIntensityMapUv:De&&getChannel(T.specularIntensityMap.channel),transmissionMapUv:Le&&getChannel(T.transmissionMap.channel),thicknessMapUv:Fe&&getChannel(T.thicknessMap.channel),alphaMapUv:Be&&getChannel(T.alphaMap.channel),vertexTangents:!!H.attributes.tangent&&(fe||ye),vertexColors:T.vertexColors,vertexAlphas:!0===T.vertexColors&&!!H.attributes.color&&4===H.attributes.color.itemSize,pointsUvs:!0===j.isPoints&&!!H.attributes.uv&&(se||Be),fog:!!V,useFog:!0===T.fog,fogExp2:!!V&&V.isFogExp2,flatShading:!0===T.flatShading&&!1===T.wireframe,sizeAttenuation:!0===T.sizeAttenuation,logarithmicDepthBuffer:L,reversedDepthBuffer:ie,skinning:!0===j.isSkinnedMesh,morphTargets:void 0!==H.morphAttributes.position,morphNormals:void 0!==H.morphAttributes.normal,morphColors:void 0!==H.morphAttributes.color,morphTargetsCount:ee,morphTextureStride:te,numDirLights:I.directional.length,numPointLights:I.point.length,numSpotLights:I.spot.length,numSpotLightMaps:I.spotLightMap.length,numRectAreaLights:I.rectArea.length,numHemiLights:I.hemi.length,numDirLightShadows:I.directionalShadowMap.length,numPointLightShadows:I.pointShadowMap.length,numSpotLightShadows:I.spotShadowMap.length,numSpotLightShadowsWithMaps:I.numSpotLightShadowsWithMaps,numLightProbes:I.numLightProbes,numClippingPlanes:M.numPlanes,numClipIntersection:M.numIntersection,dithering:T.dithering,shadowMapEnabled:e.shadowMap.enabled&&D.length>0,shadowMapType:e.shadowMap.type,toneMapping:je,decodeVideoTexture:se&&!0===T.map.isVideoTexture&&hh.getTransfer(T.map.colorSpace)===Gc,decodeVideoTextureEmissive:ve&&!0===T.emissiveMap.isVideoTexture&&hh.getTransfer(T.emissiveMap.colorSpace)===Gc,premultipliedAlpha:T.premultipliedAlpha,doubleSided:T.side===nl,flipSided:T.side===rl,useDepthPacking:T.depthPacking>=0,depthPacking:T.depthPacking||0,index0AttributeName:T.index0AttributeName,extensionClipCullDistance:Ge&&!0===T.extensions.clipCullDistance&&k.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(Ge&&!0===T.extensions.multiDraw||oe)&&k.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:k.has("KHR_parallel_shader_compile"),customProgramCacheKey:T.customProgramCacheKey()};return Ve.vertexUv1s=O.has(1),Ve.vertexUv2s=O.has(2),Ve.vertexUv3s=O.has(3),O.clear(),Ve},getProgramCacheKey:function(_){var S=[];if(_.shaderID?S.push(_.shaderID):(S.push(_.customVertexShaderID),S.push(_.customFragmentShaderID)),void 0!==_.defines)for(var k in _.defines)S.push(k),S.push(_.defines[k]);return!1===_.isRawShaderMaterial&&(!function(e,_){e.push(_.precision),e.push(_.outputColorSpace),e.push(_.envMapMode),e.push(_.envMapCubeUVHeight),e.push(_.mapUv),e.push(_.alphaMapUv),e.push(_.lightMapUv),e.push(_.aoMapUv),e.push(_.bumpMapUv),e.push(_.normalMapUv),e.push(_.displacementMapUv),e.push(_.emissiveMapUv),e.push(_.metalnessMapUv),e.push(_.roughnessMapUv),e.push(_.anisotropyMapUv),e.push(_.clearcoatMapUv),e.push(_.clearcoatNormalMapUv),e.push(_.clearcoatRoughnessMapUv),e.push(_.iridescenceMapUv),e.push(_.iridescenceThicknessMapUv),e.push(_.sheenColorMapUv),e.push(_.sheenRoughnessMapUv),e.push(_.specularMapUv),e.push(_.specularColorMapUv),e.push(_.specularIntensityMapUv),e.push(_.transmissionMapUv),e.push(_.thicknessMapUv),e.push(_.combine),e.push(_.fogExp2),e.push(_.sizeAttenuation),e.push(_.morphTargetsCount),e.push(_.morphAttributeCount),e.push(_.numDirLights),e.push(_.numPointLights),e.push(_.numSpotLights),e.push(_.numSpotLightMaps),e.push(_.numHemiLights),e.push(_.numRectAreaLights),e.push(_.numDirLightShadows),e.push(_.numPointLightShadows),e.push(_.numSpotLightShadows),e.push(_.numSpotLightShadowsWithMaps),e.push(_.numLightProbes),e.push(_.shadowMapType),e.push(_.toneMapping),e.push(_.numClippingPlanes),e.push(_.numClipIntersection),e.push(_.depthPacking)}(S,_),function(e,_){I.disableAll(),_.supportsVertexTextures&&I.enable(0);_.instancing&&I.enable(1);_.instancingColor&&I.enable(2);_.instancingMorph&&I.enable(3);_.matcap&&I.enable(4);_.envMap&&I.enable(5);_.normalMapObjectSpace&&I.enable(6);_.normalMapTangentSpace&&I.enable(7);_.clearcoat&&I.enable(8);_.iridescence&&I.enable(9);_.alphaTest&&I.enable(10);_.vertexColors&&I.enable(11);_.vertexAlphas&&I.enable(12);_.vertexUv1s&&I.enable(13);_.vertexUv2s&&I.enable(14);_.vertexUv3s&&I.enable(15);_.vertexTangents&&I.enable(16);_.anisotropy&&I.enable(17);_.alphaHash&&I.enable(18);_.batching&&I.enable(19);_.dispersion&&I.enable(20);_.batchingColor&&I.enable(21);_.gradientMap&&I.enable(22);e.push(I.mask),I.disableAll(),_.fog&&I.enable(0);_.useFog&&I.enable(1);_.flatShading&&I.enable(2);_.logarithmicDepthBuffer&&I.enable(3);_.reversedDepthBuffer&&I.enable(4);_.skinning&&I.enable(5);_.morphTargets&&I.enable(6);_.morphNormals&&I.enable(7);_.morphColors&&I.enable(8);_.premultipliedAlpha&&I.enable(9);_.shadowMapEnabled&&I.enable(10);_.doubleSided&&I.enable(11);_.flipSided&&I.enable(12);_.useDepthPacking&&I.enable(13);_.dithering&&I.enable(14);_.transmission&&I.enable(15);_.sheen&&I.enable(16);_.opaque&&I.enable(17);_.pointsUvs&&I.enable(18);_.decodeVideoTexture&&I.enable(19);_.decodeVideoTextureEmissive&&I.enable(20);_.alphaToCoverage&&I.enable(21);e.push(I.mask)}(S,_),S.push(e.outputColorSpace)),S.push(_.customProgramCacheKey),S.join()},getUniforms:function(e){var _,S=z[e.type];if(S){var k=I_[S];_=If.clone(k.uniforms)}else _=e.uniforms;return _},acquireProgram:function(_,S){for(var k,E=0,M=D.length;E<M;E++){var I=D[E];if(I.cacheKey===S){++(k=I).usedTimes;break}}return void 0===k&&(k=new WebGLProgram(e,S,_,T),D.push(k)),k},releaseProgram:function(e){if(0===--e.usedTimes){var _=D.indexOf(e);D[_]=D[D.length-1],D.pop(),e.destroy()}},releaseShaderCache:function(e){R.remove(e)},programs:D,dispose:function(){R.dispose()}}}function WebGLProperties(){var e=new WeakMap;return{has:function(_){return e.has(_)},get:function(_){var S=e.get(_);return void 0===S&&(S={},e.set(_,S)),S},remove:function(_){e.delete(_)},update:function(_,S,k){e.get(_)[S]=k},dispose:function(){e=new WeakMap}}}function painterSortStable(e,_){return e.groupOrder!==_.groupOrder?e.groupOrder-_.groupOrder:e.renderOrder!==_.renderOrder?e.renderOrder-_.renderOrder:e.material.id!==_.material.id?e.material.id-_.material.id:e.z!==_.z?e.z-_.z:e.id-_.id}function reversePainterSortStable(e,_){return e.groupOrder!==_.groupOrder?e.groupOrder-_.groupOrder:e.renderOrder!==_.renderOrder?e.renderOrder-_.renderOrder:e.z!==_.z?_.z-e.z:e.id-_.id}function WebGLRenderList(){var e=[],_=0,S=[],k=[],E=[];function getNextRenderItem(S,k,E,T,M,I){var R=e[_];return void 0===R?(R={id:S.id,object:S,geometry:k,material:E,groupOrder:T,renderOrder:S.renderOrder,z:M,group:I},e[_]=R):(R.id=S.id,R.object=S,R.geometry=k,R.material=E,R.groupOrder=T,R.renderOrder=S.renderOrder,R.z=M,R.group=I),_++,R}return{opaque:S,transmissive:k,transparent:E,init:function(){_=0,S.length=0,k.length=0,E.length=0},push:function(e,_,T,M,I,R){var O=getNextRenderItem(e,_,T,M,I,R);T.transmission>0?k.push(O):!0===T.transparent?E.push(O):S.push(O)},unshift:function(e,_,T,M,I,R){var O=getNextRenderItem(e,_,T,M,I,R);T.transmission>0?k.unshift(O):!0===T.transparent?E.unshift(O):S.unshift(O)},finish:function(){for(var S=_,k=e.length;S<k;S++){var E=e[S];if(null===E.id)break;E.id=null,E.object=null,E.geometry=null,E.material=null,E.group=null}},sort:function(e,_){S.length>1&&S.sort(e||painterSortStable),k.length>1&&k.sort(_||reversePainterSortStable),E.length>1&&E.sort(_||reversePainterSortStable)}}}function WebGLRenderLists(){var e=new WeakMap;return{get:function(_,S){var k,E=e.get(_);return void 0===E?(k=new WebGLRenderList,e.set(_,[k])):S>=E.length?(k=new WebGLRenderList,E.push(k)):k=E[S],k},dispose:function(){e=new WeakMap}}}function UniformsCache(){var e={};return{get:function(_){if(void 0!==e[_.id])return e[_.id];var S;switch(_.type){case"DirectionalLight":S={direction:new th,color:new jd};break;case"SpotLight":S={position:new th,direction:new th,color:new jd,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":S={position:new th,color:new jd,distance:0,decay:0};break;case"HemisphereLight":S={direction:new th,skyColor:new jd,groundColor:new jd};break;case"RectAreaLight":S={color:new jd,position:new th,halfWidth:new th,halfHeight:new th}}return e[_.id]=S,S}}}var mb=0;function shadowCastingAndTexturingLightsFirst(e,_){return(_.castShadow?2:0)-(e.castShadow?2:0)+(_.map?1:0)-(e.map?1:0)}function WebGLLights(e){for(var _,S=new UniformsCache,k=(_={},{get:function(e){if(void 0!==_[e.id])return _[e.id];var S;switch(e.type){case"DirectionalLight":case"SpotLight":S={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new $c};break;case"PointLight":S={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new $c,shadowCameraNear:1,shadowCameraFar:1e3}}return _[e.id]=S,S}}),E={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0},T=0;T<9;T++)E.probe.push(new th);var M=new th,I=new Qh,R=new Qh;return{setup:function(_){for(var T=0,M=0,I=0,R=0;R<9;R++)E.probe[R].set(0,0,0);var O=0,D=0,L=0,U=0,B=0,z=0,G=0,j=0,V=0,H=0,W=0;_.sort(shadowCastingAndTexturingLightsFirst);for(var q=0,X=_.length;q<X;q++){var Y=_[q],K=Y.color,J=Y.intensity,Q=Y.distance,Z=Y.shadow&&Y.shadow.map?Y.shadow.map.texture:null;if(Y.isAmbientLight)T+=K.r*J,M+=K.g*J,I+=K.b*J;else if(Y.isLightProbe){for(var $=0;$<9;$++)E.probe[$].addScaledVector(Y.sh.coefficients[$],J);W++}else if(Y.isDirectionalLight){var ee=S.get(Y);if(ee.color.copy(Y.color).multiplyScalar(Y.intensity),Y.castShadow){var te=Y.shadow,re=k.get(Y);re.shadowIntensity=te.intensity,re.shadowBias=te.bias,re.shadowNormalBias=te.normalBias,re.shadowRadius=te.radius,re.shadowMapSize=te.mapSize,E.directionalShadow[O]=re,E.directionalShadowMap[O]=Z,E.directionalShadowMatrix[O]=Y.shadow.matrix,z++}E.directional[O]=ee,O++}else if(Y.isSpotLight){var ne=S.get(Y);ne.position.setFromMatrixPosition(Y.matrixWorld),ne.color.copy(K).multiplyScalar(J),ne.distance=Q,ne.coneCos=Math.cos(Y.angle),ne.penumbraCos=Math.cos(Y.angle*(1-Y.penumbra)),ne.decay=Y.decay,E.spot[L]=ne;var ie=Y.shadow;if(Y.map&&(E.spotLightMap[V]=Y.map,V++,ie.updateMatrices(Y),Y.castShadow&&H++),E.spotLightMatrix[L]=ie.matrix,Y.castShadow){var ae=k.get(Y);ae.shadowIntensity=ie.intensity,ae.shadowBias=ie.bias,ae.shadowNormalBias=ie.normalBias,ae.shadowRadius=ie.radius,ae.shadowMapSize=ie.mapSize,E.spotShadow[L]=ae,E.spotShadowMap[L]=Z,j++}L++}else if(Y.isRectAreaLight){var oe=S.get(Y);oe.color.copy(K).multiplyScalar(J),oe.halfWidth.set(.5*Y.width,0,0),oe.halfHeight.set(0,.5*Y.height,0),E.rectArea[U]=oe,U++}else if(Y.isPointLight){var se=S.get(Y);if(se.color.copy(Y.color).multiplyScalar(Y.intensity),se.distance=Y.distance,se.decay=Y.decay,Y.castShadow){var ue=Y.shadow,le=k.get(Y);le.shadowIntensity=ue.intensity,le.shadowBias=ue.bias,le.shadowNormalBias=ue.normalBias,le.shadowRadius=ue.radius,le.shadowMapSize=ue.mapSize,le.shadowCameraNear=ue.camera.near,le.shadowCameraFar=ue.camera.far,E.pointShadow[D]=le,E.pointShadowMap[D]=Z,E.pointShadowMatrix[D]=Y.shadow.matrix,G++}E.point[D]=se,D++}else if(Y.isHemisphereLight){var ce=S.get(Y);ce.skyColor.copy(Y.color).multiplyScalar(J),ce.groundColor.copy(Y.groundColor).multiplyScalar(J),E.hemi[B]=ce,B++}}U>0&&(!0===e.has("OES_texture_float_linear")?(E.rectAreaLTC1=M_.LTC_FLOAT_1,E.rectAreaLTC2=M_.LTC_FLOAT_2):(E.rectAreaLTC1=M_.LTC_HALF_1,E.rectAreaLTC2=M_.LTC_HALF_2)),E.ambient[0]=T,E.ambient[1]=M,E.ambient[2]=I;var he=E.hash;he.directionalLength===O&&he.pointLength===D&&he.spotLength===L&&he.rectAreaLength===U&&he.hemiLength===B&&he.numDirectionalShadows===z&&he.numPointShadows===G&&he.numSpotShadows===j&&he.numSpotMaps===V&&he.numLightProbes===W||(E.directional.length=O,E.spot.length=L,E.rectArea.length=U,E.point.length=D,E.hemi.length=B,E.directionalShadow.length=z,E.directionalShadowMap.length=z,E.pointShadow.length=G,E.pointShadowMap.length=G,E.spotShadow.length=j,E.spotShadowMap.length=j,E.directionalShadowMatrix.length=z,E.pointShadowMatrix.length=G,E.spotLightMatrix.length=j+V-H,E.spotLightMap.length=V,E.numSpotLightShadowsWithMaps=H,E.numLightProbes=W,he.directionalLength=O,he.pointLength=D,he.spotLength=L,he.rectAreaLength=U,he.hemiLength=B,he.numDirectionalShadows=z,he.numPointShadows=G,he.numSpotShadows=j,he.numSpotMaps=V,he.numLightProbes=W,E.version=mb++)},setupView:function(e,_){for(var S=0,k=0,T=0,O=0,D=0,L=_.matrixWorldInverse,U=0,B=e.length;U<B;U++){var z=e[U];if(z.isDirectionalLight){var G=E.directional[S];G.direction.setFromMatrixPosition(z.matrixWorld),M.setFromMatrixPosition(z.target.matrixWorld),G.direction.sub(M),G.direction.transformDirection(L),S++}else if(z.isSpotLight){var j=E.spot[T];j.position.setFromMatrixPosition(z.matrixWorld),j.position.applyMatrix4(L),j.direction.setFromMatrixPosition(z.matrixWorld),M.setFromMatrixPosition(z.target.matrixWorld),j.direction.sub(M),j.direction.transformDirection(L),T++}else if(z.isRectAreaLight){var V=E.rectArea[O];V.position.setFromMatrixPosition(z.matrixWorld),V.position.applyMatrix4(L),R.identity(),I.copy(z.matrixWorld),I.premultiply(L),R.extractRotation(I),V.halfWidth.set(.5*z.width,0,0),V.halfHeight.set(0,.5*z.height,0),V.halfWidth.applyMatrix4(R),V.halfHeight.applyMatrix4(R),O++}else if(z.isPointLight){var H=E.point[k];H.position.setFromMatrixPosition(z.matrixWorld),H.position.applyMatrix4(L),k++}else if(z.isHemisphereLight){var W=E.hemi[D];W.direction.setFromMatrixPosition(z.matrixWorld),W.direction.transformDirection(L),D++}}},state:E}}function WebGLRenderState(e){var _=new WebGLLights(e),S=[],k=[];var E={lightsArray:S,shadowsArray:k,camera:null,lights:_,transmissionRenderTarget:{}};return{init:function(e){E.camera=e,S.length=0,k.length=0},state:E,setupLights:function(){_.setup(S)},setupLightsView:function(e){_.setupView(S,e)},pushLight:function(e){S.push(e)},pushShadow:function(e){k.push(e)}}}function WebGLRenderStates(e){var _=new WeakMap;return{get:function(S){var k,E=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,T=_.get(S);return void 0===T?(k=new WebGLRenderState(e),_.set(S,[k])):E>=T.length?(k=new WebGLRenderState(e),T.push(k)):k=T[E],k},dispose:function(){_=new WeakMap}}}function WebGLShadowMap(e,_,S){var k=new Wp,E=new $c,T=new $c,M=new yh,I=new Bg({depthPacking:3201}),R=new Ng,O={},D=S.maxTextureSize,L=_defineProperty3(_defineProperty3(_defineProperty3({},0,rl),rl,0),nl,nl),U=new Rf({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new $c},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),B=U.clone();B.defines.HORIZONTAL_PASS=1;var z=new gf;z.setAttribute("position",new Zd(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var G=new Tf(z,U),j=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=$u;var V=this.type;function VSMPass(S,k){var T=_.update(G);U.defines.VSM_SAMPLES!==S.blurSamples&&(U.defines.VSM_SAMPLES=S.blurSamples,B.defines.VSM_SAMPLES=S.blurSamples,U.needsUpdate=!0,B.needsUpdate=!0),null===S.mapPass&&(S.mapPass=new bh(E.x,E.y)),U.uniforms.shadow_pass.value=S.map.texture,U.uniforms.resolution.value=S.mapSize,U.uniforms.radius.value=S.radius,e.setRenderTarget(S.mapPass),e.clear(),e.renderBufferDirect(k,null,T,U,G,null),B.uniforms.shadow_pass.value=S.mapPass.texture,B.uniforms.resolution.value=S.mapSize,B.uniforms.radius.value=S.radius,e.setRenderTarget(S.map),e.clear(),e.renderBufferDirect(k,null,T,B,G,null)}function getDepthMaterial(_,S,k,E){var T=null,M=!0===k.isPointLight?_.customDistanceMaterial:_.customDepthMaterial;if(void 0!==M)T=M;else if(T=!0===k.isPointLight?R:I,e.localClippingEnabled&&!0===S.clipShadows&&Array.isArray(S.clippingPlanes)&&0!==S.clippingPlanes.length||S.displacementMap&&0!==S.displacementScale||S.alphaMap&&S.alphaTest>0||S.map&&S.alphaTest>0||!0===S.alphaToCoverage){var D=T.uuid,U=S.uuid,B=O[D];void 0===B&&(B={},O[D]=B);var z=B[U];void 0===z&&(z=T.clone(),B[U]=z,S.addEventListener("dispose",onMaterialDispose)),T=z}(T.visible=S.visible,T.wireframe=S.wireframe,T.side=E===tl?null!==S.shadowSide?S.shadowSide:S.side:null!==S.shadowSide?S.shadowSide:L[S.side],T.alphaMap=S.alphaMap,T.alphaTest=!0===S.alphaToCoverage?.5:S.alphaTest,T.map=S.map,T.clipShadows=S.clipShadows,T.clippingPlanes=S.clippingPlanes,T.clipIntersection=S.clipIntersection,T.displacementMap=S.displacementMap,T.displacementScale=S.displacementScale,T.displacementBias=S.displacementBias,T.wireframeLinewidth=S.wireframeLinewidth,T.linewidth=S.linewidth,!0===k.isPointLight&&!0===T.isMeshDistanceMaterial)&&(e.properties.get(T).light=k);return T}function renderObject(S,E,T,M,I){if(!1!==S.visible){if(S.layers.test(E.layers)&&(S.isMesh||S.isLine||S.isPoints)&&(S.castShadow||S.receiveShadow&&I===tl)&&(!S.frustumCulled||k.intersectsObject(S))){S.modelViewMatrix.multiplyMatrices(T.matrixWorldInverse,S.matrixWorld);var R=_.update(S),O=S.material;if(Array.isArray(O))for(var D=R.groups,L=0,U=D.length;L<U;L++){var B=D[L],z=O[B.materialIndex];if(z&&z.visible){var G=getDepthMaterial(S,z,M,I);S.onBeforeShadow(e,S,E,T,R,G,B),e.renderBufferDirect(T,null,R,G,S,B),S.onAfterShadow(e,S,E,T,R,G,B)}}else if(O.visible){var j=getDepthMaterial(S,O,M,I);S.onBeforeShadow(e,S,E,T,R,j,null),e.renderBufferDirect(T,null,R,j,S,null),S.onAfterShadow(e,S,E,T,R,j,null)}}for(var V=S.children,H=0,W=V.length;H<W;H++)renderObject(V[H],E,T,M,I)}}function onMaterialDispose(e){var _=e.target;for(var S in _.removeEventListener("dispose",onMaterialDispose),O){var k=O[S],E=e.target.uuid;if(E in k)k[E].dispose(),delete k[E]}}this.render=function(_,S,I){if(!1!==j.enabled&&(!1!==j.autoUpdate||!1!==j.needsUpdate)&&0!==_.length){var R=e.getRenderTarget(),O=e.getActiveCubeFace(),L=e.getActiveMipmapLevel(),U=e.state;U.setBlending(0),!0===U.buffers.depth.getReversed()?U.buffers.color.setClear(0,0,0,0):U.buffers.color.setClear(1,1,1,1),U.buffers.depth.setTest(!0),U.setScissorTest(!1);for(var B=V!==tl&&this.type===tl,z=V===tl&&this.type!==tl,G=0,H=_.length;G<H;G++){var W=_[G],q=W.shadow;if(void 0!==q&&(!1!==q.autoUpdate||!1!==q.needsUpdate)){E.copy(q.mapSize);var X=q.getFrameExtents();if(E.multiply(X),T.copy(q.mapSize),(E.x>D||E.y>D)&&(E.x>D&&(T.x=Math.floor(D/X.x),E.x=T.x*X.x,q.mapSize.x=T.x),E.y>D&&(T.y=Math.floor(D/X.y),E.y=T.y*X.y,q.mapSize.y=T.y)),null===q.map||!0===B||!0===z){var Y=this.type!==tl?{minFilter:bl,magFilter:bl}:{};null!==q.map&&q.map.dispose(),q.map=new bh(E.x,E.y,Y),q.map.texture.name=W.name+".shadowMap",q.camera.updateProjectionMatrix()}e.setRenderTarget(q.map),e.clear();for(var K=q.getViewportCount(),J=0;J<K;J++){var Q=q.getViewport(J);M.set(T.x*Q.x,T.y*Q.y,T.x*Q.z,T.y*Q.w),U.viewport(M),q.updateMatrices(W,J),k=q.getFrustum(),renderObject(S,I,q.camera,W,this.type)}!0!==q.isPointLightShadow&&this.type===tl&&VSMPass(q,I),q.needsUpdate=!1}}V=this.type,j.needsUpdate=!1,e.setRenderTarget(R,O,L)}}}var yb=_defineProperty3(_defineProperty3(_defineProperty3(_defineProperty3(_defineProperty3(_defineProperty3(_defineProperty3(_defineProperty3({},0,1),2,6),4,7),3,5),1,0),6,2),7,4),5,3);function WebGLState(e,_){var S;var k=new function(){var _=!1,S=new yh,k=null,E=new yh(0,0,0,0);return{setMask:function(S){k===S||_||(e.colorMask(S,S,S,S),k=S)},setLocked:function(e){_=e},setClear:function(_,k,T,M,I){!0===I&&(_*=M,k*=M,T*=M),S.set(_,k,T,M),!1===E.equals(S)&&(e.clearColor(_,k,T,M),E.copy(S))},reset:function(){_=!1,k=null,E.set(-1,0,0,0)}}},E=new function(){var S=!1,k=!1,E=null,T=null,M=null;return{setReversed:function(e){if(k!==e){var S=_.get("EXT_clip_control");e?S.clipControlEXT(S.LOWER_LEFT_EXT,S.ZERO_TO_ONE_EXT):S.clipControlEXT(S.LOWER_LEFT_EXT,S.NEGATIVE_ONE_TO_ONE_EXT),k=e;var E=M;M=null,this.setClear(E)}},getReversed:function(){return k},setTest:function(_){_?enable(e.DEPTH_TEST):disable(e.DEPTH_TEST)},setMask:function(_){E===_||S||(e.depthMask(_),E=_)},setFunc:function(_){if(k&&(_=yb[_]),T!==_){switch(_){case 0:e.depthFunc(e.NEVER);break;case 1:e.depthFunc(e.ALWAYS);break;case 2:e.depthFunc(e.LESS);break;case 3:default:e.depthFunc(e.LEQUAL);break;case 4:e.depthFunc(e.EQUAL);break;case 5:e.depthFunc(e.GEQUAL);break;case 6:e.depthFunc(e.GREATER);break;case 7:e.depthFunc(e.NOTEQUAL)}T=_}},setLocked:function(e){S=e},setClear:function(_){M!==_&&(k&&(_=1-_),e.clearDepth(_),M=_)},reset:function(){S=!1,E=null,T=null,M=null,k=!1}}},T=new function(){var _=!1,S=null,k=null,E=null,T=null,M=null,I=null,R=null,O=null;return{setTest:function(S){_||(S?enable(e.STENCIL_TEST):disable(e.STENCIL_TEST))},setMask:function(k){S===k||_||(e.stencilMask(k),S=k)},setFunc:function(_,S,M){k===_&&E===S&&T===M||(e.stencilFunc(_,S,M),k=_,E=S,T=M)},setOp:function(_,S,k){M===_&&I===S&&R===k||(e.stencilOp(_,S,k),M=_,I=S,R=k)},setLocked:function(e){_=e},setClear:function(_){O!==_&&(e.clearStencil(_),O=_)},reset:function(){_=!1,S=null,k=null,E=null,T=null,M=null,I=null,R=null,O=null}}},M=new WeakMap,I=new WeakMap,R={},O={},D=new WeakMap,L=[],U=null,B=!1,z=null,G=null,j=null,V=null,H=null,W=null,q=null,X=new jd(0,0,0),Y=0,K=!1,J=null,Q=null,Z=null,$=null,ee=null,te=e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS),re=!1,ne=0,ie=e.getParameter(e.VERSION);-1!==ie.indexOf("WebGL")?(ne=parseFloat(/^WebGL (\d)/.exec(ie)[1]),re=ne>=1):-1!==ie.indexOf("OpenGL ES")&&(ne=parseFloat(/^OpenGL ES (\d)/.exec(ie)[1]),re=ne>=2);var ae=null,oe={},se=e.getParameter(e.SCISSOR_BOX),ue=e.getParameter(e.VIEWPORT),le=(new yh).fromArray(se),ce=(new yh).fromArray(ue);function createTexture(_,S,k,E){var T=new Uint8Array(4),M=e.createTexture();e.bindTexture(_,M),e.texParameteri(_,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(_,e.TEXTURE_MAG_FILTER,e.NEAREST);for(var I=0;I<k;I++)_===e.TEXTURE_3D||_===e.TEXTURE_2D_ARRAY?e.texImage3D(S,0,e.RGBA,1,1,E,0,e.RGBA,e.UNSIGNED_BYTE,T):e.texImage2D(S+I,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,T);return M}var he={};function enable(_){!0!==R[_]&&(e.enable(_),R[_]=!0)}function disable(_){!1!==R[_]&&(e.disable(_),R[_]=!1)}he[e.TEXTURE_2D]=createTexture(e.TEXTURE_2D,e.TEXTURE_2D,1),he[e.TEXTURE_CUBE_MAP]=createTexture(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6),he[e.TEXTURE_2D_ARRAY]=createTexture(e.TEXTURE_2D_ARRAY,e.TEXTURE_2D_ARRAY,1,1),he[e.TEXTURE_3D]=createTexture(e.TEXTURE_3D,e.TEXTURE_3D,1,1),k.setClear(0,0,0,1),E.setClear(1),T.setClear(0),enable(e.DEPTH_TEST),E.setFunc(3),setFlipSided(!1),setCullFace(1),enable(e.CULL_FACE),setBlending(0);var de=_defineProperty3(_defineProperty3(_defineProperty3({},il,e.FUNC_ADD),101,e.FUNC_SUBTRACT),102,e.FUNC_REVERSE_SUBTRACT);de[103]=e.MIN,de[104]=e.MAX;var fe=(_defineProperty3(_defineProperty3(_defineProperty3(_defineProperty3(_defineProperty3(_defineProperty3(_defineProperty3(_defineProperty3(_defineProperty3(_defineProperty3(S={},200,e.ZERO),201,e.ONE),202,e.SRC_COLOR),al,e.SRC_ALPHA),210,e.SRC_ALPHA_SATURATE),208,e.DST_COLOR),206,e.DST_ALPHA),203,e.ONE_MINUS_SRC_COLOR),ol,e.ONE_MINUS_SRC_ALPHA),209,e.ONE_MINUS_DST_COLOR),_defineProperty3(_defineProperty3(_defineProperty3(_defineProperty3(_defineProperty3(S,207,e.ONE_MINUS_DST_ALPHA),211,e.CONSTANT_COLOR),212,e.ONE_MINUS_CONSTANT_COLOR),213,e.CONSTANT_ALPHA),214,e.ONE_MINUS_CONSTANT_ALPHA));function setBlending(_,S,k,E,T,M,I,R,O,D){if(0!==_){if(!1===B&&(enable(e.BLEND),B=!0),5===_)T=T||S,M=M||k,I=I||E,S===G&&T===H||(e.blendEquationSeparate(de[S],de[T]),G=S,H=T),k===j&&E===V&&M===W&&I===q||(e.blendFuncSeparate(fe[k],fe[E],fe[M],fe[I]),j=k,V=E,W=M,q=I),!1!==R.equals(X)&&O===Y||(e.blendColor(R.r,R.g,R.b,O),X.copy(R),Y=O),z=_,K=!1;else if(_!==z||D!==K){if(G===il&&H===il||(e.blendEquation(e.FUNC_ADD),G=il,H=il),D)switch(_){case 1:e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case 2:e.blendFunc(e.ONE,e.ONE);break;case 3:e.blendFuncSeparate(e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ZERO,e.ONE);break;case 4:e.blendFuncSeparate(e.DST_COLOR,e.ONE_MINUS_SRC_ALPHA,e.ZERO,e.ONE)}else switch(_){case 1:e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case 2:e.blendFuncSeparate(e.SRC_ALPHA,e.ONE,e.ONE,e.ONE)}j=null,V=null,W=null,q=null,X.set(0,0,0),Y=0,z=_,K=D}}else!0===B&&(disable(e.BLEND),B=!1)}function setFlipSided(_){J!==_&&(_?e.frontFace(e.CW):e.frontFace(e.CCW),J=_)}function setCullFace(_){0!==_?(enable(e.CULL_FACE),_!==Q&&(1===_?e.cullFace(e.BACK):2===_?e.cullFace(e.FRONT):e.cullFace(e.FRONT_AND_BACK))):disable(e.CULL_FACE),Q=_}function setPolygonOffset(_,S,k){_?(enable(e.POLYGON_OFFSET_FILL),$===S&&ee===k||(e.polygonOffset(S,k),$=S,ee=k)):disable(e.POLYGON_OFFSET_FILL)}return{buffers:{color:k,depth:E,stencil:T},enable:enable,disable:disable,bindFramebuffer:function(_,S){return O[_]!==S&&(e.bindFramebuffer(_,S),O[_]=S,_===e.DRAW_FRAMEBUFFER&&(O[e.FRAMEBUFFER]=S),_===e.FRAMEBUFFER&&(O[e.DRAW_FRAMEBUFFER]=S),!0)},drawBuffers:function(_,S){var k=L,E=!1;if(_){void 0===(k=D.get(S))&&(k=[],D.set(S,k));var T=_.textures;if(k.length!==T.length||k[0]!==e.COLOR_ATTACHMENT0){for(var M=0,I=T.length;M<I;M++)k[M]=e.COLOR_ATTACHMENT0+M;k.length=T.length,E=!0}}else k[0]!==e.BACK&&(k[0]=e.BACK,E=!0);E&&e.drawBuffers(k)},useProgram:function(_){return U!==_&&(e.useProgram(_),U=_,!0)},setBlending:setBlending,setMaterial:function(_,S){_.side===nl?disable(e.CULL_FACE):enable(e.CULL_FACE);var M=_.side===rl;S&&(M=!M),setFlipSided(M),1===_.blending&&!1===_.transparent?setBlending(0):setBlending(_.blending,_.blendEquation,_.blendSrc,_.blendDst,_.blendEquationAlpha,_.blendSrcAlpha,_.blendDstAlpha,_.blendColor,_.blendAlpha,_.premultipliedAlpha),E.setFunc(_.depthFunc),E.setTest(_.depthTest),E.setMask(_.depthWrite),k.setMask(_.colorWrite);var I=_.stencilWrite;T.setTest(I),I&&(T.setMask(_.stencilWriteMask),T.setFunc(_.stencilFunc,_.stencilRef,_.stencilFuncMask),T.setOp(_.stencilFail,_.stencilZFail,_.stencilZPass)),setPolygonOffset(_.polygonOffset,_.polygonOffsetFactor,_.polygonOffsetUnits),!0===_.alphaToCoverage?enable(e.SAMPLE_ALPHA_TO_COVERAGE):disable(e.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:setFlipSided,setCullFace:setCullFace,setLineWidth:function(_){_!==Z&&(re&&e.lineWidth(_),Z=_)},setPolygonOffset:setPolygonOffset,setScissorTest:function(_){_?enable(e.SCISSOR_TEST):disable(e.SCISSOR_TEST)},activeTexture:function(_){void 0===_&&(_=e.TEXTURE0+te-1),ae!==_&&(e.activeTexture(_),ae=_)},bindTexture:function(_,S,k){void 0===k&&(k=null===ae?e.TEXTURE0+te-1:ae);var E=oe[k];void 0===E&&(E={type:void 0,texture:void 0},oe[k]=E),E.type===_&&E.texture===S||(ae!==k&&(e.activeTexture(k),ae=k),e.bindTexture(_,S||he[_]),E.type=_,E.texture=S)},unbindTexture:function(){var _=oe[ae];void 0!==_&&void 0!==_.type&&(e.bindTexture(_.type,null),_.type=void 0,_.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(_){}},compressedTexImage3D:function(){try{e.compressedTexImage3D.apply(e,arguments)}catch(_){}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(_){}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(_){}},updateUBOMapping:function(_,S){var k=I.get(S);void 0===k&&(k=new WeakMap,I.set(S,k));var E=k.get(_);void 0===E&&(E=e.getUniformBlockIndex(S,_.name),k.set(_,E))},uniformBlockBinding:function(_,S){var k=I.get(S).get(_);M.get(S)!==k&&(e.uniformBlockBinding(S,k,_.__bindingPointIndex),M.set(S,k))},texStorage2D:function(){try{e.texStorage2D.apply(e,arguments)}catch(_){}},texStorage3D:function(){try{e.texStorage3D.apply(e,arguments)}catch(_){}},texSubImage2D:function(){try{e.texSubImage2D.apply(e,arguments)}catch(_){}},texSubImage3D:function(){try{e.texSubImage3D.apply(e,arguments)}catch(_){}},compressedTexSubImage2D:function(){try{e.compressedTexSubImage2D.apply(e,arguments)}catch(_){}},compressedTexSubImage3D:function(){try{e.compressedTexSubImage3D.apply(e,arguments)}catch(_){}},scissor:function(_){!1===le.equals(_)&&(e.scissor(_.x,_.y,_.z,_.w),le.copy(_))},viewport:function(_){!1===ce.equals(_)&&(e.viewport(_.x,_.y,_.z,_.w),ce.copy(_))},reset:function(){e.disable(e.BLEND),e.disable(e.CULL_FACE),e.disable(e.DEPTH_TEST),e.disable(e.POLYGON_OFFSET_FILL),e.disable(e.SCISSOR_TEST),e.disable(e.STENCIL_TEST),e.disable(e.SAMPLE_ALPHA_TO_COVERAGE),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ZERO),e.blendFuncSeparate(e.ONE,e.ZERO,e.ONE,e.ZERO),e.blendColor(0,0,0,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(e.LESS),E.setReversed(!1),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(e.ALWAYS,0,4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP),e.clearStencil(0),e.cullFace(e.BACK),e.frontFace(e.CCW),e.polygonOffset(0,0),e.activeTexture(e.TEXTURE0),e.bindFramebuffer(e.FRAMEBUFFER,null),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),e.bindFramebuffer(e.READ_FRAMEBUFFER,null),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),R={},ae=null,oe={},O={},D=new WeakMap,L=[],U=null,B=!1,z=null,G=null,j=null,V=null,H=null,W=null,q=null,X=new jd(0,0,0),Y=0,K=!1,J=null,Q=null,Z=null,$=null,ee=null,le.set(0,0,e.canvas.width,e.canvas.height),ce.set(0,0,e.canvas.width,e.canvas.height),k.reset(),E.reset(),T.reset()}}}function WebGLTextures(e,_,S,k,E,T,M){var I,R=_.has("WEBGL_multisampled_render_to_texture")?_.get("WEBGL_multisampled_render_to_texture"):null,O="undefined"!=typeof navigator&&/OculusBrowser/g.test(navigator.userAgent),D=new $c,L=new WeakMap,U=new WeakMap,B=!1;try{B="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(q){}function createCanvas(e,_){return B?new OffscreenCanvas(e,_):createElementNS("canvas")}function resizeImage(e,_,S){var k=1,E=getDimensions(e);if((E.width>S||E.height>S)&&(k=S/Math.max(E.width,E.height)),k<1){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap||"undefined"!=typeof VideoFrame&&e instanceof VideoFrame){var T=Math.floor(k*E.width),M=Math.floor(k*E.height);void 0===I&&(I=createCanvas(T,M));var R=_?createCanvas(T,M):I;return R.width=T,R.height=M,R.getContext("2d").drawImage(e,0,0,T,M),R}return e}return e}function textureNeedsGenerateMipmaps(e){return e.generateMipmaps}function generateMipmap(_){e.generateMipmap(_)}function getTargetType(_){return _.isWebGLCubeRenderTarget?e.TEXTURE_CUBE_MAP:_.isWebGL3DRenderTarget?e.TEXTURE_3D:_.isWebGLArrayRenderTarget||_.isCompressedArrayTexture?e.TEXTURE_2D_ARRAY:e.TEXTURE_2D}function getInternalFormat(S,k,E,T){var M=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(null!==S&&void 0!==e[S])return e[S];var I=k;if(k===e.RED&&(E===e.FLOAT&&(I=e.R32F),E===e.HALF_FLOAT&&(I=e.R16F),E===e.UNSIGNED_BYTE&&(I=e.R8)),k===e.RED_INTEGER&&(E===e.UNSIGNED_BYTE&&(I=e.R8UI),E===e.UNSIGNED_SHORT&&(I=e.R16UI),E===e.UNSIGNED_INT&&(I=e.R32UI),E===e.BYTE&&(I=e.R8I),E===e.SHORT&&(I=e.R16I),E===e.INT&&(I=e.R32I)),k===e.RG&&(E===e.FLOAT&&(I=e.RG32F),E===e.HALF_FLOAT&&(I=e.RG16F),E===e.UNSIGNED_BYTE&&(I=e.RG8)),k===e.RG_INTEGER&&(E===e.UNSIGNED_BYTE&&(I=e.RG8UI),E===e.UNSIGNED_SHORT&&(I=e.RG16UI),E===e.UNSIGNED_INT&&(I=e.RG32UI),E===e.BYTE&&(I=e.RG8I),E===e.SHORT&&(I=e.RG16I),E===e.INT&&(I=e.RG32I)),k===e.RGB_INTEGER&&(E===e.UNSIGNED_BYTE&&(I=e.RGB8UI),E===e.UNSIGNED_SHORT&&(I=e.RGB16UI),E===e.UNSIGNED_INT&&(I=e.RGB32UI),E===e.BYTE&&(I=e.RGB8I),E===e.SHORT&&(I=e.RGB16I),E===e.INT&&(I=e.RGB32I)),k===e.RGBA_INTEGER&&(E===e.UNSIGNED_BYTE&&(I=e.RGBA8UI),E===e.UNSIGNED_SHORT&&(I=e.RGBA16UI),E===e.UNSIGNED_INT&&(I=e.RGBA32UI),E===e.BYTE&&(I=e.RGBA8I),E===e.SHORT&&(I=e.RGBA16I),E===e.INT&&(I=e.RGBA32I)),k===e.RGB&&(E===e.UNSIGNED_INT_5_9_9_9_REV&&(I=e.RGB9_E5),E===e.UNSIGNED_INT_10F_11F_11F_REV&&(I=e.R11F_G11F_B10F)),k===e.RGBA){var R=M?zc:hh.getTransfer(T);E===e.FLOAT&&(I=e.RGBA32F),E===e.HALF_FLOAT&&(I=e.RGBA16F),E===e.UNSIGNED_BYTE&&(I=R===Gc?e.SRGB8_ALPHA8:e.RGBA8),E===e.UNSIGNED_SHORT_4_4_4_4&&(I=e.RGBA4),E===e.UNSIGNED_SHORT_5_5_5_1&&(I=e.RGB5_A1)}return I!==e.R16F&&I!==e.R32F&&I!==e.RG16F&&I!==e.RG32F&&I!==e.RGBA16F&&I!==e.RGBA32F||_.get("EXT_color_buffer_float"),I}function getInternalDepthFormat(_,S){var k;return _?null===S||S===Pl||S===Ul?k=e.DEPTH24_STENCIL8:S===Ol?k=e.DEPTH32F_STENCIL8:S===Il&&(k=e.DEPTH24_STENCIL8):null===S||S===Pl||S===Ul?k=e.DEPTH_COMPONENT24:S===Ol?k=e.DEPTH_COMPONENT32F:S===Il&&(k=e.DEPTH_COMPONENT16),k}function getMipLevels(e,_){return!0===textureNeedsGenerateMipmaps(e)||e.isFramebufferTexture&&e.minFilter!==bl&&e.minFilter!==xl?Math.log2(Math.max(_.width,_.height))+1:void 0!==e.mipmaps&&e.mipmaps.length>0?e.mipmaps.length:e.isCompressedTexture&&Array.isArray(e.image)?_.mipmaps.length:1}function onTextureDispose(e){var _=e.target;_.removeEventListener("dispose",onTextureDispose),function(e){var _=k.get(e);if(void 0===_.__webglInit)return;var S=e.source,E=U.get(S);if(E){var T=E[_.__cacheKey];T.usedTimes--,0===T.usedTimes&&deleteTexture(e),0===Object.keys(E).length&&U.delete(S)}k.remove(e)}(_),_.isVideoTexture&&L.delete(_)}function onRenderTargetDispose(_){var S=_.target;S.removeEventListener("dispose",onRenderTargetDispose),function(_){var S=k.get(_);_.depthTexture&&(_.depthTexture.dispose(),k.remove(_.depthTexture));if(_.isWebGLCubeRenderTarget)for(var E=0;E<6;E++){if(Array.isArray(S.__webglFramebuffer[E]))for(var T=0;T<S.__webglFramebuffer[E].length;T++)e.deleteFramebuffer(S.__webglFramebuffer[E][T]);else e.deleteFramebuffer(S.__webglFramebuffer[E]);S.__webglDepthbuffer&&e.deleteRenderbuffer(S.__webglDepthbuffer[E])}else{if(Array.isArray(S.__webglFramebuffer))for(var I=0;I<S.__webglFramebuffer.length;I++)e.deleteFramebuffer(S.__webglFramebuffer[I]);else e.deleteFramebuffer(S.__webglFramebuffer);if(S.__webglDepthbuffer&&e.deleteRenderbuffer(S.__webglDepthbuffer),S.__webglMultisampledFramebuffer&&e.deleteFramebuffer(S.__webglMultisampledFramebuffer),S.__webglColorRenderbuffer)for(var R=0;R<S.__webglColorRenderbuffer.length;R++)S.__webglColorRenderbuffer[R]&&e.deleteRenderbuffer(S.__webglColorRenderbuffer[R]);S.__webglDepthRenderbuffer&&e.deleteRenderbuffer(S.__webglDepthRenderbuffer)}for(var O=_.textures,D=0,L=O.length;D<L;D++){var U=k.get(O[D]);U.__webglTexture&&(e.deleteTexture(U.__webglTexture),M.memory.textures--),k.remove(O[D])}k.remove(_)}(S)}function deleteTexture(_){var S=k.get(_);e.deleteTexture(S.__webglTexture);var E=_.source;delete U.get(E)[S.__cacheKey],M.memory.textures--}var z=0;function setTexture2D(_,E){var T=k.get(_);if(_.isVideoTexture&&function(e){var _=M.render.frame;L.get(e)!==_&&(L.set(e,_),e.update())}(_),!1===_.isRenderTargetTexture&&!0!==_.isExternalTexture&&_.version>0&&T.__version!==_.version){var I=_.image;if(null===I);else if(!1!==I.complete)return void uploadTexture(T,_,E)}else _.isExternalTexture&&(T.__webglTexture=_.sourceTexture?_.sourceTexture:null);S.bindTexture(e.TEXTURE_2D,T.__webglTexture,e.TEXTURE0+E)}var G=_defineProperty3(_defineProperty3(_defineProperty3({},ml,e.REPEAT),yl,e.CLAMP_TO_EDGE),_l,e.MIRRORED_REPEAT),j=_defineProperty3(_defineProperty3(_defineProperty3(_defineProperty3(_defineProperty3(_defineProperty3({},bl,e.NEAREST),Sl,e.NEAREST_MIPMAP_NEAREST),wl,e.NEAREST_MIPMAP_LINEAR),xl,e.LINEAR),kl,e.LINEAR_MIPMAP_NEAREST),Cl,e.LINEAR_MIPMAP_LINEAR),V=_defineProperty3(_defineProperty3(_defineProperty3(_defineProperty3(_defineProperty3(_defineProperty3(_defineProperty3(_defineProperty3({},512,e.NEVER),519,e.ALWAYS),513,e.LESS),515,e.LEQUAL),514,e.EQUAL),518,e.GEQUAL),516,e.GREATER),517,e.NOTEQUAL);function setTextureParameters(S,T){if(T.type===Ol&&!1===_.has("OES_texture_float_linear")&&(T.magFilter===xl||T.magFilter===kl||T.magFilter===wl||T.magFilter===Cl||T.minFilter===xl||T.minFilter===kl||T.minFilter===wl||T.minFilter),e.texParameteri(S,e.TEXTURE_WRAP_S,G[T.wrapS]),e.texParameteri(S,e.TEXTURE_WRAP_T,G[T.wrapT]),S!==e.TEXTURE_3D&&S!==e.TEXTURE_2D_ARRAY||e.texParameteri(S,e.TEXTURE_WRAP_R,G[T.wrapR]),e.texParameteri(S,e.TEXTURE_MAG_FILTER,j[T.magFilter]),e.texParameteri(S,e.TEXTURE_MIN_FILTER,j[T.minFilter]),T.compareFunction&&(e.texParameteri(S,e.TEXTURE_COMPARE_MODE,e.COMPARE_REF_TO_TEXTURE),e.texParameteri(S,e.TEXTURE_COMPARE_FUNC,V[T.compareFunction])),!0===_.has("EXT_texture_filter_anisotropic")){if(T.magFilter===bl)return;if(T.minFilter!==wl&&T.minFilter!==Cl)return;if(T.type===Ol&&!1===_.has("OES_texture_float_linear"))return;if(T.anisotropy>1||k.get(T).__currentAnisotropy){var M=_.get("EXT_texture_filter_anisotropic");e.texParameterf(S,M.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(T.anisotropy,E.getMaxAnisotropy())),k.get(T).__currentAnisotropy=T.anisotropy}}}function initTexture(_,S){var k=!1;void 0===_.__webglInit&&(_.__webglInit=!0,S.addEventListener("dispose",onTextureDispose));var E=S.source,T=U.get(E);void 0===T&&(T={},U.set(E,T));var I=function(e){var _=[];return _.push(e.wrapS),_.push(e.wrapT),_.push(e.wrapR||0),_.push(e.magFilter),_.push(e.minFilter),_.push(e.anisotropy),_.push(e.internalFormat),_.push(e.format),_.push(e.type),_.push(e.generateMipmaps),_.push(e.premultiplyAlpha),_.push(e.flipY),_.push(e.unpackAlignment),_.push(e.colorSpace),_.join()}(S);if(I!==_.__cacheKey){void 0===T[I]&&(T[I]={texture:e.createTexture(),usedTimes:0},M.memory.textures++,k=!0),T[I].usedTimes++;var R=T[_.__cacheKey];void 0!==R&&(T[_.__cacheKey].usedTimes--,0===R.usedTimes&&deleteTexture(S)),_.__cacheKey=I,_.__webglTexture=T[I].texture}return k}function getRow(e,_,S){return Math.floor(Math.floor(e/S)/_)}function uploadTexture(_,M,I){var R=e.TEXTURE_2D;(M.isDataArrayTexture||M.isCompressedArrayTexture)&&(R=e.TEXTURE_2D_ARRAY),M.isData3DTexture&&(R=e.TEXTURE_3D);var O=initTexture(_,M),D=M.source;S.bindTexture(R,_.__webglTexture,e.TEXTURE0+I);var L=k.get(D);if(D.version!==L.__version||!0===O){S.activeTexture(e.TEXTURE0+I);var U=hh.getPrimaries(hh.workingColorSpace),B=M.colorSpace===Uc?null:hh.getPrimaries(M.colorSpace),z=M.colorSpace===Uc||U===B?e.NONE:e.BROWSER_DEFAULT_WEBGL;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,M.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,M.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,M.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,z);var G=resizeImage(M.image,!1,E.maxTextureSize);G=verifyColorSpace(M,G);var j,V=T.convert(M.format,M.colorSpace),H=T.convert(M.type),W=getInternalFormat(M.internalFormat,V,H,M.colorSpace,M.isVideoTexture);setTextureParameters(R,M);var X=M.mipmaps,Y=!0!==M.isVideoTexture,K=void 0===L.__version||!0===O,J=D.dataReady,Q=getMipLevels(M,G);if(M.isDepthTexture)W=getInternalDepthFormat(M.format===Hl,M.type),K&&(Y?S.texStorage2D(e.TEXTURE_2D,1,W,G.width,G.height):S.texImage2D(e.TEXTURE_2D,0,W,G.width,G.height,0,V,H,null));else if(M.isDataTexture)if(X.length>0){Y&&K&&S.texStorage2D(e.TEXTURE_2D,Q,W,X[0].width,X[0].height);for(var Z=0,$=X.length;Z<$;Z++)j=X[Z],Y?J&&S.texSubImage2D(e.TEXTURE_2D,Z,0,0,j.width,j.height,V,H,j.data):S.texImage2D(e.TEXTURE_2D,Z,W,j.width,j.height,0,V,H,j.data);M.generateMipmaps=!1}else Y?(K&&S.texStorage2D(e.TEXTURE_2D,Q,W,G.width,G.height),J&&function(_,k,E,T){var M=_.updateRanges;if(0===M.length)S.texSubImage2D(e.TEXTURE_2D,0,0,0,k.width,k.height,E,T,k.data);else{M.sort(function(e,_){return e.start-_.start});for(var I=0,R=1;R<M.length;R++){var O=M[I],D=M[R],L=O.start+O.count,U=getRow(D.start,k.width,4),B=getRow(O.start,k.width,4);D.start<=L+1&&U===B&&getRow(D.start+D.count-1,k.width,4)===U?O.count=Math.max(O.count,D.start+D.count-O.start):M[++I]=D}M.length=I+1;var z=e.getParameter(e.UNPACK_ROW_LENGTH),G=e.getParameter(e.UNPACK_SKIP_PIXELS),j=e.getParameter(e.UNPACK_SKIP_ROWS);e.pixelStorei(e.UNPACK_ROW_LENGTH,k.width);for(var V=0,H=M.length;V<H;V++){var W=M[V],q=Math.floor(W.start/4),X=Math.ceil(W.count/4),Y=q%k.width,K=Math.floor(q/k.width),J=X;e.pixelStorei(e.UNPACK_SKIP_PIXELS,Y),e.pixelStorei(e.UNPACK_SKIP_ROWS,K),S.texSubImage2D(e.TEXTURE_2D,0,Y,K,J,1,E,T,k.data)}_.clearUpdateRanges(),e.pixelStorei(e.UNPACK_ROW_LENGTH,z),e.pixelStorei(e.UNPACK_SKIP_PIXELS,G),e.pixelStorei(e.UNPACK_SKIP_ROWS,j)}}(M,G,V,H)):S.texImage2D(e.TEXTURE_2D,0,W,G.width,G.height,0,V,H,G.data);else if(M.isCompressedTexture)if(M.isCompressedArrayTexture){Y&&K&&S.texStorage3D(e.TEXTURE_2D_ARRAY,Q,W,X[0].width,X[0].height,G.depth);for(var ee=0,te=X.length;ee<te;ee++)if(j=X[ee],M.format!==jl){if(null!==V)if(Y){if(J)if(M.layerUpdates.size>0){var re,ne=_getByteLength(j.width,j.height,M.format,M.type),ie=_createForOfIteratorHelper2(M.layerUpdates);try{for(ie.s();!(re=ie.n()).done;){var ae=re.value,oe=j.data.subarray(ae*ne/j.data.BYTES_PER_ELEMENT,(ae+1)*ne/j.data.BYTES_PER_ELEMENT);S.compressedTexSubImage3D(e.TEXTURE_2D_ARRAY,ee,0,0,ae,j.width,j.height,1,V,oe)}}catch(q){ie.e(q)}finally{ie.f()}M.clearLayerUpdates()}else S.compressedTexSubImage3D(e.TEXTURE_2D_ARRAY,ee,0,0,0,j.width,j.height,G.depth,V,j.data)}else S.compressedTexImage3D(e.TEXTURE_2D_ARRAY,ee,W,j.width,j.height,G.depth,0,j.data,0,0)}else Y?J&&S.texSubImage3D(e.TEXTURE_2D_ARRAY,ee,0,0,0,j.width,j.height,G.depth,V,H,j.data):S.texImage3D(e.TEXTURE_2D_ARRAY,ee,W,j.width,j.height,G.depth,0,V,H,j.data)}else{Y&&K&&S.texStorage2D(e.TEXTURE_2D,Q,W,X[0].width,X[0].height);for(var se=0,ue=X.length;se<ue;se++)j=X[se],M.format!==jl?null!==V&&(Y?J&&S.compressedTexSubImage2D(e.TEXTURE_2D,se,0,0,j.width,j.height,V,j.data):S.compressedTexImage2D(e.TEXTURE_2D,se,W,j.width,j.height,0,j.data)):Y?J&&S.texSubImage2D(e.TEXTURE_2D,se,0,0,j.width,j.height,V,H,j.data):S.texImage2D(e.TEXTURE_2D,se,W,j.width,j.height,0,V,H,j.data)}else if(M.isDataArrayTexture)if(Y){if(K&&S.texStorage3D(e.TEXTURE_2D_ARRAY,Q,W,G.width,G.height,G.depth),J)if(M.layerUpdates.size>0){var le,ce=_getByteLength(G.width,G.height,M.format,M.type),he=_createForOfIteratorHelper2(M.layerUpdates);try{for(he.s();!(le=he.n()).done;){var de=le.value,fe=G.data.subarray(de*ce/G.data.BYTES_PER_ELEMENT,(de+1)*ce/G.data.BYTES_PER_ELEMENT);S.texSubImage3D(e.TEXTURE_2D_ARRAY,0,0,0,de,G.width,G.height,1,V,H,fe)}}catch(q){he.e(q)}finally{he.f()}M.clearLayerUpdates()}else S.texSubImage3D(e.TEXTURE_2D_ARRAY,0,0,0,0,G.width,G.height,G.depth,V,H,G.data)}else S.texImage3D(e.TEXTURE_2D_ARRAY,0,W,G.width,G.height,G.depth,0,V,H,G.data);else if(M.isData3DTexture)Y?(K&&S.texStorage3D(e.TEXTURE_3D,Q,W,G.width,G.height,G.depth),J&&S.texSubImage3D(e.TEXTURE_3D,0,0,0,0,G.width,G.height,G.depth,V,H,G.data)):S.texImage3D(e.TEXTURE_3D,0,W,G.width,G.height,G.depth,0,V,H,G.data);else if(M.isFramebufferTexture){if(K)if(Y)S.texStorage2D(e.TEXTURE_2D,Q,W,G.width,G.height);else for(var pe=G.width,ve=G.height,ge=0;ge<Q;ge++)S.texImage2D(e.TEXTURE_2D,ge,W,pe,ve,0,V,H,null),pe>>=1,ve>>=1}else if(X.length>0){if(Y&&K){var me=getDimensions(X[0]);S.texStorage2D(e.TEXTURE_2D,Q,W,me.width,me.height)}for(var ye=0,_e=X.length;ye<_e;ye++)j=X[ye],Y?J&&S.texSubImage2D(e.TEXTURE_2D,ye,0,0,V,H,j):S.texImage2D(e.TEXTURE_2D,ye,W,V,H,j);M.generateMipmaps=!1}else if(Y){if(K){var be=getDimensions(G);S.texStorage2D(e.TEXTURE_2D,Q,W,be.width,be.height)}J&&S.texSubImage2D(e.TEXTURE_2D,0,0,0,V,H,G)}else S.texImage2D(e.TEXTURE_2D,0,W,V,H,G);textureNeedsGenerateMipmaps(M)&&generateMipmap(R),L.__version=D.version,M.onUpdate&&M.onUpdate(M)}_.__version=M.version}function setupFrameBufferTexture(_,E,M,I,O,D){var L=T.convert(M.format,M.colorSpace),U=T.convert(M.type),B=getInternalFormat(M.internalFormat,L,U,M.colorSpace),z=k.get(E),G=k.get(M);if(G.__renderTarget=E,!z.__hasExternalTextures){var j=Math.max(1,E.width>>D),V=Math.max(1,E.height>>D);O===e.TEXTURE_3D||O===e.TEXTURE_2D_ARRAY?S.texImage3D(O,D,B,j,V,E.depth,0,L,U,null):S.texImage2D(O,D,B,j,V,0,L,U,null)}S.bindFramebuffer(e.FRAMEBUFFER,_),useMultisampledRTT(E)?R.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,I,O,G.__webglTexture,0,getRenderTargetSamples(E)):(O===e.TEXTURE_2D||O>=e.TEXTURE_CUBE_MAP_POSITIVE_X&&O<=e.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&e.framebufferTexture2D(e.FRAMEBUFFER,I,O,G.__webglTexture,D),S.bindFramebuffer(e.FRAMEBUFFER,null)}function setupRenderBufferStorage(_,S,k){if(e.bindRenderbuffer(e.RENDERBUFFER,_),S.depthBuffer){var E=S.depthTexture,M=E&&E.isDepthTexture?E.type:null,I=getInternalDepthFormat(S.stencilBuffer,M),O=S.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,D=getRenderTargetSamples(S);useMultisampledRTT(S)?R.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,D,I,S.width,S.height):k?e.renderbufferStorageMultisample(e.RENDERBUFFER,D,I,S.width,S.height):e.renderbufferStorage(e.RENDERBUFFER,I,S.width,S.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,O,e.RENDERBUFFER,_)}else for(var L=S.textures,U=0;U<L.length;U++){var B=L[U],z=T.convert(B.format,B.colorSpace),G=T.convert(B.type),j=getInternalFormat(B.internalFormat,z,G,B.colorSpace),V=getRenderTargetSamples(S);k&&!1===useMultisampledRTT(S)?e.renderbufferStorageMultisample(e.RENDERBUFFER,V,j,S.width,S.height):useMultisampledRTT(S)?R.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,V,j,S.width,S.height):e.renderbufferStorage(e.RENDERBUFFER,j,S.width,S.height)}e.bindRenderbuffer(e.RENDERBUFFER,null)}function setupDepthTexture(_,E){if(E&&E.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(S.bindFramebuffer(e.FRAMEBUFFER,_),!E.depthTexture||!E.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");var T=k.get(E.depthTexture);T.__renderTarget=E,T.__webglTexture&&E.depthTexture.image.width===E.width&&E.depthTexture.image.height===E.height||(E.depthTexture.image.width=E.width,E.depthTexture.image.height=E.height,E.depthTexture.needsUpdate=!0),setTexture2D(E.depthTexture,0);var M=T.__webglTexture,I=getRenderTargetSamples(E);if(E.depthTexture.format===Vl)useMultisampledRTT(E)?R.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,M,0,I):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,M,0);else{if(E.depthTexture.format!==Hl)throw new Error("Unknown depthTexture format");useMultisampledRTT(E)?R.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,M,0,I):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,M,0)}}function setupDepthRenderbuffer(_){var E=k.get(_),T=!0===_.isWebGLCubeRenderTarget;if(E.__boundDepthTexture!==_.depthTexture){var M=_.depthTexture;if(E.__depthDisposeCallback&&E.__depthDisposeCallback(),M){var _disposeEvent=function(){delete E.__boundDepthTexture,delete E.__depthDisposeCallback,M.removeEventListener("dispose",_disposeEvent)};M.addEventListener("dispose",_disposeEvent),E.__depthDisposeCallback=_disposeEvent}E.__boundDepthTexture=M}if(_.depthTexture&&!E.__autoAllocateDepthBuffer){if(T)throw new Error("target.depthTexture not supported in Cube render targets");var I=_.texture.mipmaps;I&&I.length>0?setupDepthTexture(E.__webglFramebuffer[0],_):setupDepthTexture(E.__webglFramebuffer,_)}else if(T){E.__webglDepthbuffer=[];for(var R=0;R<6;R++)if(S.bindFramebuffer(e.FRAMEBUFFER,E.__webglFramebuffer[R]),void 0===E.__webglDepthbuffer[R])E.__webglDepthbuffer[R]=e.createRenderbuffer(),setupRenderBufferStorage(E.__webglDepthbuffer[R],_,!1);else{var O=_.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,D=E.__webglDepthbuffer[R];e.bindRenderbuffer(e.RENDERBUFFER,D),e.framebufferRenderbuffer(e.FRAMEBUFFER,O,e.RENDERBUFFER,D)}}else{var L=_.texture.mipmaps;if(L&&L.length>0?S.bindFramebuffer(e.FRAMEBUFFER,E.__webglFramebuffer[0]):S.bindFramebuffer(e.FRAMEBUFFER,E.__webglFramebuffer),void 0===E.__webglDepthbuffer)E.__webglDepthbuffer=e.createRenderbuffer(),setupRenderBufferStorage(E.__webglDepthbuffer,_,!1);else{var U=_.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,B=E.__webglDepthbuffer;e.bindRenderbuffer(e.RENDERBUFFER,B),e.framebufferRenderbuffer(e.FRAMEBUFFER,U,e.RENDERBUFFER,B)}}S.bindFramebuffer(e.FRAMEBUFFER,null)}var H=[],W=[];function getRenderTargetSamples(e){return Math.min(E.maxSamples,e.samples)}function useMultisampledRTT(e){var S=k.get(e);return e.samples>0&&!0===_.has("WEBGL_multisampled_render_to_texture")&&!1!==S.__useRenderToTexture}function verifyColorSpace(e,_){var S=e.colorSpace;e.format,e.type;return!0===e.isCompressedTexture||!0===e.isVideoTexture||S!==Nc&&S!==Uc&&hh.getTransfer(S),_}function getDimensions(e){return"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement?(D.width=e.naturalWidth||e.width,D.height=e.naturalHeight||e.height):"undefined"!=typeof VideoFrame&&e instanceof VideoFrame?(D.width=e.displayWidth,D.height=e.displayHeight):(D.width=e.width,D.height=e.height),D}this.allocateTextureUnit=function(){var e=z;return E.maxTextures,z+=1,e},this.resetTextureUnits=function(){z=0},this.setTexture2D=setTexture2D,this.setTexture2DArray=function(_,E){var T=k.get(_);!1===_.isRenderTargetTexture&&_.version>0&&T.__version!==_.version?uploadTexture(T,_,E):S.bindTexture(e.TEXTURE_2D_ARRAY,T.__webglTexture,e.TEXTURE0+E)},this.setTexture3D=function(_,E){var T=k.get(_);!1===_.isRenderTargetTexture&&_.version>0&&T.__version!==_.version?uploadTexture(T,_,E):S.bindTexture(e.TEXTURE_3D,T.__webglTexture,e.TEXTURE0+E)},this.setTextureCube=function(_,M){var I=k.get(_);_.version>0&&I.__version!==_.version?function(_,M,I){if(6!==M.image.length)return;var R=initTexture(_,M),O=M.source;S.bindTexture(e.TEXTURE_CUBE_MAP,_.__webglTexture,e.TEXTURE0+I);var D=k.get(O);if(O.version!==D.__version||!0===R){S.activeTexture(e.TEXTURE0+I);var L=hh.getPrimaries(hh.workingColorSpace),U=M.colorSpace===Uc?null:hh.getPrimaries(M.colorSpace),B=M.colorSpace===Uc||L===U?e.NONE:e.BROWSER_DEFAULT_WEBGL;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,M.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,M.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,M.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,B);for(var z=M.isCompressedTexture||M.image[0].isCompressedTexture,G=M.image[0]&&M.image[0].isDataTexture,j=[],V=0;V<6;V++)j[V]=z||G?G?M.image[V].image:M.image[V]:resizeImage(M.image[V],!0,E.maxCubemapSize),j[V]=verifyColorSpace(M,j[V]);var H,W=j[0],q=T.convert(M.format,M.colorSpace),X=T.convert(M.type),Y=getInternalFormat(M.internalFormat,q,X,M.colorSpace),K=!0!==M.isVideoTexture,J=void 0===D.__version||!0===R,Q=O.dataReady,Z=getMipLevels(M,W);if(setTextureParameters(e.TEXTURE_CUBE_MAP,M),z){K&&J&&S.texStorage2D(e.TEXTURE_CUBE_MAP,Z,Y,W.width,W.height);for(var $=0;$<6;$++){H=j[$].mipmaps;for(var ee=0;ee<H.length;ee++){var te=H[ee];M.format!==jl?null!==q&&(K?Q&&S.compressedTexSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+$,ee,0,0,te.width,te.height,q,te.data):S.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+$,ee,Y,te.width,te.height,0,te.data)):K?Q&&S.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+$,ee,0,0,te.width,te.height,q,X,te.data):S.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+$,ee,Y,te.width,te.height,0,q,X,te.data)}}}else{if(H=M.mipmaps,K&&J){H.length>0&&Z++;var re=getDimensions(j[0]);S.texStorage2D(e.TEXTURE_CUBE_MAP,Z,Y,re.width,re.height)}for(var ne=0;ne<6;ne++)if(G){K?Q&&S.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+ne,0,0,0,j[ne].width,j[ne].height,q,X,j[ne].data):S.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+ne,0,Y,j[ne].width,j[ne].height,0,q,X,j[ne].data);for(var ie=0;ie<H.length;ie++){var ae=H[ie].image[ne].image;K?Q&&S.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+ne,ie+1,0,0,ae.width,ae.height,q,X,ae.data):S.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+ne,ie+1,Y,ae.width,ae.height,0,q,X,ae.data)}}else{K?Q&&S.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+ne,0,0,0,q,X,j[ne]):S.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+ne,0,Y,q,X,j[ne]);for(var oe=0;oe<H.length;oe++){var se=H[oe];K?Q&&S.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+ne,oe+1,0,0,q,X,se.image[ne]):S.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+ne,oe+1,Y,q,X,se.image[ne])}}}textureNeedsGenerateMipmaps(M)&&generateMipmap(e.TEXTURE_CUBE_MAP),D.__version=O.version,M.onUpdate&&M.onUpdate(M)}_.__version=M.version}(I,_,M):S.bindTexture(e.TEXTURE_CUBE_MAP,I.__webglTexture,e.TEXTURE0+M)},this.rebindTextures=function(_,S,E){var T=k.get(_);void 0!==S&&setupFrameBufferTexture(T.__webglFramebuffer,_,_.texture,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,0),void 0!==E&&setupDepthRenderbuffer(_)},this.setupRenderTarget=function(_){var E=_.texture,I=k.get(_),R=k.get(E);_.addEventListener("dispose",onRenderTargetDispose);var O=_.textures,D=!0===_.isWebGLCubeRenderTarget,L=O.length>1;if(L||(void 0===R.__webglTexture&&(R.__webglTexture=e.createTexture()),R.__version=E.version,M.memory.textures++),D){I.__webglFramebuffer=[];for(var U=0;U<6;U++)if(E.mipmaps&&E.mipmaps.length>0){I.__webglFramebuffer[U]=[];for(var B=0;B<E.mipmaps.length;B++)I.__webglFramebuffer[U][B]=e.createFramebuffer()}else I.__webglFramebuffer[U]=e.createFramebuffer()}else{if(E.mipmaps&&E.mipmaps.length>0){I.__webglFramebuffer=[];for(var z=0;z<E.mipmaps.length;z++)I.__webglFramebuffer[z]=e.createFramebuffer()}else I.__webglFramebuffer=e.createFramebuffer();if(L)for(var G=0,j=O.length;G<j;G++){var V=k.get(O[G]);void 0===V.__webglTexture&&(V.__webglTexture=e.createTexture(),M.memory.textures++)}if(_.samples>0&&!1===useMultisampledRTT(_)){I.__webglMultisampledFramebuffer=e.createFramebuffer(),I.__webglColorRenderbuffer=[],S.bindFramebuffer(e.FRAMEBUFFER,I.__webglMultisampledFramebuffer);for(var H=0;H<O.length;H++){var W=O[H];I.__webglColorRenderbuffer[H]=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,I.__webglColorRenderbuffer[H]);var q=T.convert(W.format,W.colorSpace),X=T.convert(W.type),Y=getInternalFormat(W.internalFormat,q,X,W.colorSpace,!0===_.isXRRenderTarget),K=getRenderTargetSamples(_);e.renderbufferStorageMultisample(e.RENDERBUFFER,K,Y,_.width,_.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+H,e.RENDERBUFFER,I.__webglColorRenderbuffer[H])}e.bindRenderbuffer(e.RENDERBUFFER,null),_.depthBuffer&&(I.__webglDepthRenderbuffer=e.createRenderbuffer(),setupRenderBufferStorage(I.__webglDepthRenderbuffer,_,!0)),S.bindFramebuffer(e.FRAMEBUFFER,null)}}if(D){S.bindTexture(e.TEXTURE_CUBE_MAP,R.__webglTexture),setTextureParameters(e.TEXTURE_CUBE_MAP,E);for(var J=0;J<6;J++)if(E.mipmaps&&E.mipmaps.length>0)for(var Q=0;Q<E.mipmaps.length;Q++)setupFrameBufferTexture(I.__webglFramebuffer[J][Q],_,E,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+J,Q);else setupFrameBufferTexture(I.__webglFramebuffer[J],_,E,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+J,0);textureNeedsGenerateMipmaps(E)&&generateMipmap(e.TEXTURE_CUBE_MAP),S.unbindTexture()}else if(L){for(var Z=0,$=O.length;Z<$;Z++){var ee=O[Z],te=k.get(ee),re=e.TEXTURE_2D;(_.isWebGL3DRenderTarget||_.isWebGLArrayRenderTarget)&&(re=_.isWebGL3DRenderTarget?e.TEXTURE_3D:e.TEXTURE_2D_ARRAY),S.bindTexture(re,te.__webglTexture),setTextureParameters(re,ee),setupFrameBufferTexture(I.__webglFramebuffer,_,ee,e.COLOR_ATTACHMENT0+Z,re,0),textureNeedsGenerateMipmaps(ee)&&generateMipmap(re)}S.unbindTexture()}else{var ne=e.TEXTURE_2D;if((_.isWebGL3DRenderTarget||_.isWebGLArrayRenderTarget)&&(ne=_.isWebGL3DRenderTarget?e.TEXTURE_3D:e.TEXTURE_2D_ARRAY),S.bindTexture(ne,R.__webglTexture),setTextureParameters(ne,E),E.mipmaps&&E.mipmaps.length>0)for(var ie=0;ie<E.mipmaps.length;ie++)setupFrameBufferTexture(I.__webglFramebuffer[ie],_,E,e.COLOR_ATTACHMENT0,ne,ie);else setupFrameBufferTexture(I.__webglFramebuffer,_,E,e.COLOR_ATTACHMENT0,ne,0);textureNeedsGenerateMipmaps(E)&&generateMipmap(ne),S.unbindTexture()}_.depthBuffer&&setupDepthRenderbuffer(_)},this.updateRenderTargetMipmap=function(e){for(var _=e.textures,E=0,T=_.length;E<T;E++){var M=_[E];if(textureNeedsGenerateMipmaps(M)){var I=getTargetType(e),R=k.get(M).__webglTexture;S.bindTexture(I,R),generateMipmap(I),S.unbindTexture()}}},this.updateMultisampleRenderTarget=function(_){if(_.samples>0)if(!1===useMultisampledRTT(_)){var E=_.textures,T=_.width,M=_.height,I=e.COLOR_BUFFER_BIT,R=_.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,D=k.get(_),L=E.length>1;if(L)for(var U=0;U<E.length;U++)S.bindFramebuffer(e.FRAMEBUFFER,D.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+U,e.RENDERBUFFER,null),S.bindFramebuffer(e.FRAMEBUFFER,D.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+U,e.TEXTURE_2D,null,0);S.bindFramebuffer(e.READ_FRAMEBUFFER,D.__webglMultisampledFramebuffer);var B=_.texture.mipmaps;B&&B.length>0?S.bindFramebuffer(e.DRAW_FRAMEBUFFER,D.__webglFramebuffer[0]):S.bindFramebuffer(e.DRAW_FRAMEBUFFER,D.__webglFramebuffer);for(var z=0;z<E.length;z++){if(_.resolveDepthBuffer&&(_.depthBuffer&&(I|=e.DEPTH_BUFFER_BIT),_.stencilBuffer&&_.resolveStencilBuffer&&(I|=e.STENCIL_BUFFER_BIT)),L){e.framebufferRenderbuffer(e.READ_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,D.__webglColorRenderbuffer[z]);var G=k.get(E[z]).__webglTexture;e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,G,0)}e.blitFramebuffer(0,0,T,M,0,0,T,M,I,e.NEAREST),!0===O&&(H.length=0,W.length=0,H.push(e.COLOR_ATTACHMENT0+z),_.depthBuffer&&!1===_.resolveDepthBuffer&&(H.push(R),W.push(R),e.invalidateFramebuffer(e.DRAW_FRAMEBUFFER,W)),e.invalidateFramebuffer(e.READ_FRAMEBUFFER,H))}if(S.bindFramebuffer(e.READ_FRAMEBUFFER,null),S.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),L)for(var j=0;j<E.length;j++){S.bindFramebuffer(e.FRAMEBUFFER,D.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+j,e.RENDERBUFFER,D.__webglColorRenderbuffer[j]);var V=k.get(E[j]).__webglTexture;S.bindFramebuffer(e.FRAMEBUFFER,D.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+j,e.TEXTURE_2D,V,0)}S.bindFramebuffer(e.DRAW_FRAMEBUFFER,D.__webglMultisampledFramebuffer)}else if(_.depthBuffer&&!1===_.resolveDepthBuffer&&O){var q=_.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT;e.invalidateFramebuffer(e.DRAW_FRAMEBUFFER,[q])}},this.setupDepthRenderbuffer=setupDepthRenderbuffer,this.setupFrameBufferTexture=setupFrameBufferTexture,this.useMultisampledRTT=useMultisampledRTT}function WebGLUtils(e,_){return{convert:function(S){var k,E=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Uc,T=hh.getTransfer(E);if(S===El)return e.UNSIGNED_BYTE;if(S===Ll)return e.UNSIGNED_SHORT_4_4_4_4;if(S===Fl)return e.UNSIGNED_SHORT_5_5_5_1;if(S===Bl)return e.UNSIGNED_INT_5_9_9_9_REV;if(S===Nl)return e.UNSIGNED_INT_10F_11F_11F_REV;if(S===Tl)return e.BYTE;if(S===Ml)return e.SHORT;if(S===Il)return e.UNSIGNED_SHORT;if(S===Rl)return e.INT;if(S===Pl)return e.UNSIGNED_INT;if(S===Ol)return e.FLOAT;if(S===Dl)return e.HALF_FLOAT;if(S===zl)return e.ALPHA;if(S===Gl)return e.RGB;if(S===jl)return e.RGBA;if(S===Vl)return e.DEPTH_COMPONENT;if(S===Hl)return e.DEPTH_STENCIL;if(S===Wl)return e.RED;if(S===ql)return e.RED_INTEGER;if(S===Xl)return e.RG;if(S===Yl)return e.RG_INTEGER;if(S===Kl)return e.RGBA_INTEGER;if(S===Jl||S===Ql||S===Zl||S===$l)if(T===Gc){if(null===(k=_.get("WEBGL_compressed_texture_s3tc_srgb")))return null;if(S===Jl)return k.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(S===Ql)return k.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(S===Zl)return k.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(S===$l)return k.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(null===(k=_.get("WEBGL_compressed_texture_s3tc")))return null;if(S===Jl)return k.COMPRESSED_RGB_S3TC_DXT1_EXT;if(S===Ql)return k.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(S===Zl)return k.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(S===$l)return k.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(S===ec||S===tc||S===rc||S===nc){if(null===(k=_.get("WEBGL_compressed_texture_pvrtc")))return null;if(S===ec)return k.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(S===tc)return k.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(S===rc)return k.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(S===nc)return k.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(S===ic||S===ac||S===oc){if(null===(k=_.get("WEBGL_compressed_texture_etc")))return null;if(S===ic||S===ac)return T===Gc?k.COMPRESSED_SRGB8_ETC2:k.COMPRESSED_RGB8_ETC2;if(S===oc)return T===Gc?k.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:k.COMPRESSED_RGBA8_ETC2_EAC}if(S===sc||S===uc||S===lc||S===cc||S===hc||S===dc||S===fc||S===pc||S===vc||S===gc||S===mc||S===yc||S===_c||S===bc){if(null===(k=_.get("WEBGL_compressed_texture_astc")))return null;if(S===sc)return T===Gc?k.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:k.COMPRESSED_RGBA_ASTC_4x4_KHR;if(S===uc)return T===Gc?k.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:k.COMPRESSED_RGBA_ASTC_5x4_KHR;if(S===lc)return T===Gc?k.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:k.COMPRESSED_RGBA_ASTC_5x5_KHR;if(S===cc)return T===Gc?k.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:k.COMPRESSED_RGBA_ASTC_6x5_KHR;if(S===hc)return T===Gc?k.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:k.COMPRESSED_RGBA_ASTC_6x6_KHR;if(S===dc)return T===Gc?k.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:k.COMPRESSED_RGBA_ASTC_8x5_KHR;if(S===fc)return T===Gc?k.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:k.COMPRESSED_RGBA_ASTC_8x6_KHR;if(S===pc)return T===Gc?k.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:k.COMPRESSED_RGBA_ASTC_8x8_KHR;if(S===vc)return T===Gc?k.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:k.COMPRESSED_RGBA_ASTC_10x5_KHR;if(S===gc)return T===Gc?k.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:k.COMPRESSED_RGBA_ASTC_10x6_KHR;if(S===mc)return T===Gc?k.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:k.COMPRESSED_RGBA_ASTC_10x8_KHR;if(S===yc)return T===Gc?k.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:k.COMPRESSED_RGBA_ASTC_10x10_KHR;if(S===_c)return T===Gc?k.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:k.COMPRESSED_RGBA_ASTC_12x10_KHR;if(S===bc)return T===Gc?k.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:k.COMPRESSED_RGBA_ASTC_12x12_KHR}if(S===Sc||S===wc||S===xc){if(null===(k=_.get("EXT_texture_compression_bptc")))return null;if(S===Sc)return T===Gc?k.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:k.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(S===wc)return k.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(S===xc)return k.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}if(S===kc||S===Cc||S===Ac||S===Ec){if(null===(k=_.get("EXT_texture_compression_rgtc")))return null;if(S===kc)return k.COMPRESSED_RED_RGTC1_EXT;if(S===Cc)return k.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(S===Ac)return k.COMPRESSED_RED_GREEN_RGTC2_EXT;if(S===Ec)return k.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return S===Ul?e.UNSIGNED_INT_24_8:void 0!==e[S]?e[S]:null}}}var _b=function(){return _createClass3(function WebXRDepthSensing(){_classCallCheck3(this,WebXRDepthSensing),this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0},[{key:"init",value:function(e,_){if(null===this.texture){var S=new Fv(e.texture);e.depthNear===_.depthNear&&e.depthFar===_.depthFar||(this.depthNear=e.depthNear,this.depthFar=e.depthFar),this.texture=S}}},{key:"getMesh",value:function(e){if(null!==this.texture&&null===this.mesh){var _=e.cameras[0].viewport,S=new Rf({vertexShader:"\nvoid main() {\n\n\tgl_Position = vec4( position, 1.0 );\n\n}",fragmentShader:"\nuniform sampler2DArray depthColor;\nuniform float depthWidth;\nuniform float depthHeight;\n\nvoid main() {\n\n\tvec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );\n\n\tif ( coord.x >= 1.0 ) {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;\n\n\t} else {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;\n\n\t}\n\n}",uniforms:{depthColor:{value:this.texture},depthWidth:{value:_.z},depthHeight:{value:_.w}}});this.mesh=new Tf(new bg(20,20),S)}return this.mesh}},{key:"reset",value:function(){this.texture=null,this.mesh=null}},{key:"getDepthTexture",value:function(){return this.texture}}])}(),bb=function(e){function WebXRManager(e,_){var S;_classCallCheck3(this,WebXRManager);var k=S=_callSuper(this,WebXRManager),E=null,T=1,M=null,I="local-floor",R=1,O=null,D=null,L=null,U=null,B=null,z=null,G="undefined"!=typeof XRWebGLBinding,j=new _b,V={},H=_.getContextAttributes(),W=null,q=null,X=[],Y=[],K=new $c,J=null,Q=new Ff;Q.viewport=new yh;var Z=new Ff;Z.viewport=new yh;var $=[Q,Z],ee=new $m,te=null,re=null;function onSessionEvent(e){var _=Y.indexOf(e.inputSource);if(-1!==_){var S=X[_];void 0!==S&&(S.update(e.inputSource,e.frame,O||M),S.dispatchEvent({type:e.type,data:e.inputSource}))}}function onSessionEnd(){E.removeEventListener("select",onSessionEvent),E.removeEventListener("selectstart",onSessionEvent),E.removeEventListener("selectend",onSessionEvent),E.removeEventListener("squeeze",onSessionEvent),E.removeEventListener("squeezestart",onSessionEvent),E.removeEventListener("squeezeend",onSessionEvent),E.removeEventListener("end",onSessionEnd),E.removeEventListener("inputsourceschange",onInputSourcesChange);for(var _=0;_<X.length;_++){var S=Y[_];null!==S&&(Y[_]=null,X[_].disconnect(S))}for(var T in te=null,re=null,j.reset(),V)delete V[T];e.setRenderTarget(W),B=null,U=null,L=null,E=null,q=null,oe.stop(),k.isPresenting=!1,e.setPixelRatio(J),e.setSize(K.width,K.height,!1),k.dispatchEvent({type:"sessionend"})}function onInputSourcesChange(e){for(var _=0;_<e.removed.length;_++){var S=e.removed[_],k=Y.indexOf(S);k>=0&&(Y[k]=null,X[k].disconnect(S))}for(var E=0;E<e.added.length;E++){var T=e.added[E],M=Y.indexOf(T);if(-1===M){for(var I=0;I<X.length;I++){if(I>=Y.length){Y.push(T),M=I;break}if(null===Y[I]){Y[I]=T,M=I;break}}if(-1===M)break}var R=X[M];R&&R.connect(T)}}S.cameraAutoUpdate=!0,S.enabled=!1,S.isPresenting=!1,S.getController=function(e){var _=X[e];return void 0===_&&(_=new Vf,X[e]=_),_.getTargetRaySpace()},S.getControllerGrip=function(e){var _=X[e];return void 0===_&&(_=new Vf,X[e]=_),_.getGripSpace()},S.getHand=function(e){var _=X[e];return void 0===_&&(_=new Vf,X[e]=_),_.getHandSpace()},S.setFramebufferScaleFactor=function(e){T=e,k.isPresenting},S.setReferenceSpaceType=function(e){I=e,k.isPresenting},S.getReferenceSpace=function(){return O||M},S.setReferenceSpace=function(e){O=e},S.getBaseLayer=function(){return null!==U?U:B},S.getBinding=function(){return null===L&&G&&(L=new XRWebGLBinding(E,_)),L},S.getFrame=function(){return z},S.getSession=function(){return E},S.setSession=function(){var S=_asyncToGenerator(_regenerator().m(function _callee255(S){var D,z,j,V,X;return _regenerator().w(function(Y){for(;;)switch(Y.n){case 0:if(null===(E=S)){Y.n=3;break}if(W=e.getRenderTarget(),E.addEventListener("select",onSessionEvent),E.addEventListener("selectstart",onSessionEvent),E.addEventListener("selectend",onSessionEvent),E.addEventListener("squeeze",onSessionEvent),E.addEventListener("squeezestart",onSessionEvent),E.addEventListener("squeezeend",onSessionEvent),E.addEventListener("end",onSessionEnd),E.addEventListener("inputsourceschange",onInputSourcesChange),!0===H.xrCompatible){Y.n=1;break}return Y.n=1,_.makeXRCompatible();case 1:return J=e.getPixelRatio(),e.getSize(K),G&&"createProjectionLayer"in XRWebGLBinding.prototype?(z=null,j=null,V=null,H.depth&&(V=H.stencil?_.DEPTH24_STENCIL8:_.DEPTH_COMPONENT24,z=H.stencil?Hl:Vl,j=H.stencil?Ul:Pl),X={colorFormat:_.RGBA8,depthFormat:V,scaleFactor:T},L=this.getBinding(),U=L.createProjectionLayer(X),E.updateRenderState({layers:[U]}),e.setPixelRatio(1),e.setSize(U.textureWidth,U.textureHeight,!1),q=new bh(U.textureWidth,U.textureHeight,{format:jl,type:El,depthTexture:new Lv(U.textureWidth,U.textureHeight,j,void 0,void 0,void 0,void 0,void 0,void 0,z),stencilBuffer:H.stencil,colorSpace:e.outputColorSpace,samples:H.antialias?4:0,resolveDepthBuffer:!1===U.ignoreDepthValues,resolveStencilBuffer:!1===U.ignoreDepthValues})):(D={antialias:H.antialias,alpha:!0,depth:H.depth,stencil:H.stencil,framebufferScaleFactor:T},B=new XRWebGLLayer(E,_,D),E.updateRenderState({baseLayer:B}),e.setPixelRatio(1),e.setSize(B.framebufferWidth,B.framebufferHeight,!1),q=new bh(B.framebufferWidth,B.framebufferHeight,{format:jl,type:El,colorSpace:e.outputColorSpace,stencilBuffer:H.stencil,resolveDepthBuffer:!1===B.ignoreDepthValues,resolveStencilBuffer:!1===B.ignoreDepthValues})),q.isXRRenderTarget=!0,this.setFoveation(R),O=null,Y.n=2,E.requestReferenceSpace(I);case 2:M=Y.v,oe.setContext(E),oe.start(),k.isPresenting=!0,k.dispatchEvent({type:"sessionstart"});case 3:return Y.a(2)}},_callee255,this)}));return function(e){return S.apply(this,arguments)}}(),S.getEnvironmentBlendMode=function(){if(null!==E)return E.environmentBlendMode},S.getDepthTexture=function(){return j.getDepthTexture()};var ne=new th,ie=new th;function updateCamera(e,_){null===_?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(_.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}S.updateCamera=function(e){if(null!==E){var _=e.near,S=e.far;null!==j.texture&&(j.depthNear>0&&(_=j.depthNear),j.depthFar>0&&(S=j.depthFar)),ee.near=Z.near=Q.near=_,ee.far=Z.far=Q.far=S,te===ee.near&&re===ee.far||(E.updateRenderState({depthNear:ee.near,depthFar:ee.far}),te=ee.near,re=ee.far),ee.layers.mask=6|e.layers.mask,Q.layers.mask=3&ee.layers.mask,Z.layers.mask=5&ee.layers.mask;var k=e.parent,T=ee.cameras;updateCamera(ee,k);for(var M=0;M<T.length;M++)updateCamera(T[M],k);2===T.length?function(e,_,S){ne.setFromMatrixPosition(_.matrixWorld),ie.setFromMatrixPosition(S.matrixWorld);var k=ne.distanceTo(ie),E=_.projectionMatrix.elements,T=S.projectionMatrix.elements,M=E[14]/(E[10]-1),I=E[14]/(E[10]+1),R=(E[9]+1)/E[5],O=(E[9]-1)/E[5],D=(E[8]-1)/E[0],L=(T[8]+1)/T[0],U=M*D,B=M*L,z=k/(-D+L),G=z*-D;if(_.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(G),e.translateZ(z),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert(),-1===E[10])e.projectionMatrix.copy(_.projectionMatrix),e.projectionMatrixInverse.copy(_.projectionMatrixInverse);else{var j=M+z,V=I+z,H=U-G,W=B+(k-G),q=R*I/V*j,X=O*I/V*j;e.projectionMatrix.makePerspective(H,W,q,X,j,V),e.projectionMatrixInverse.copy(e.projectionMatrix).invert()}}(ee,Q,Z):ee.projectionMatrix.copy(Q.projectionMatrix),function(e,_,S){null===S?e.matrix.copy(_.matrixWorld):(e.matrix.copy(S.matrixWorld),e.matrix.invert(),e.matrix.multiply(_.matrixWorld));e.matrix.decompose(e.position,e.quaternion,e.scale),e.updateMatrixWorld(!0),e.projectionMatrix.copy(_.projectionMatrix),e.projectionMatrixInverse.copy(_.projectionMatrixInverse),e.isPerspectiveCamera&&(e.fov=2*Qc*Math.atan(1/e.projectionMatrix.elements[5]),e.zoom=1)}(e,ee,k)}},S.getCamera=function(){return ee},S.getFoveation=function(){if(null!==U||null!==B)return R},S.setFoveation=function(e){R=e,null!==U&&(U.fixedFoveation=e),null!==B&&void 0!==B.fixedFoveation&&(B.fixedFoveation=e)},S.hasDepthSensing=function(){return null!==j.texture},S.getDepthSensingMesh=function(){return j.getMesh(ee)},S.getCameraTexture=function(e){return V[e]};var ae=null;var oe=new WebGLAnimation;return oe.setAnimationLoop(function(_,S){if(D=S.getViewerPose(O||M),z=S,null!==D){var T=D.views;null!==B&&(e.setRenderTargetFramebuffer(q,B.framebuffer),e.setRenderTarget(q));var I=!1;T.length!==ee.cameras.length&&(ee.cameras.length=0,I=!0);for(var R=0;R<T.length;R++){var H=T[R],W=null;if(null!==B)W=B.getViewport(H);else{var K=L.getViewSubImage(U,H);W=K.viewport,0===R&&(e.setRenderTargetTextures(q,K.colorTexture,K.depthStencilTexture),e.setRenderTarget(q))}var J=$[R];void 0===J&&((J=new Ff).layers.enable(R),J.viewport=new yh,$[R]=J),J.matrix.fromArray(H.transform.matrix),J.matrix.decompose(J.position,J.quaternion,J.scale),J.projectionMatrix.fromArray(H.projectionMatrix),J.projectionMatrixInverse.copy(J.projectionMatrix).invert(),J.viewport.set(W.x,W.y,W.width,W.height),0===R&&(ee.matrix.copy(J.matrix),ee.matrix.decompose(ee.position,ee.quaternion,ee.scale)),!0===I&&ee.cameras.push(J)}var Q=E.enabledFeatures;if(Q&&Q.includes("depth-sensing")&&"gpu-optimized"==E.depthUsage&&G){var Z=(L=k.getBinding()).getDepthInformation(T[0]);Z&&Z.isValid&&Z.texture&&j.init(Z,E.renderState)}if(Q&&Q.includes("camera-access")&&G){e.state.unbindTexture(),L=k.getBinding();for(var te=0;te<T.length;te++){var re=T[te].camera;if(re){var ne=V[re];ne||(ne=new Fv,V[re]=ne);var ie=L.getCameraImage(re);ne.sourceTexture=ie}}}}for(var oe=0;oe<X.length;oe++){var se=Y[oe],ue=X[oe];null!==se&&void 0!==ue&&ue.update(se,S,O||M)}ae&&ae(_,S),S.detectedPlanes&&k.dispatchEvent({type:"planesdetected",data:S}),z=null}),S.setAnimationLoop=function(e){ae=e},S.dispose=function(){},S}return _inherits(WebXRManager,e),_createClass3(WebXRManager)}(Xc),Sb=new sd,wb=new Qh;function WebGLMaterials(e,_){function refreshTransformUniform(e,_){!0===e.matrixAutoUpdate&&e.updateMatrix(),_.value.copy(e.matrix)}function refreshUniformsCommon(e,S){e.opacity.value=S.opacity,S.color&&e.diffuse.value.copy(S.color),S.emissive&&e.emissive.value.copy(S.emissive).multiplyScalar(S.emissiveIntensity),S.map&&(e.map.value=S.map,refreshTransformUniform(S.map,e.mapTransform)),S.alphaMap&&(e.alphaMap.value=S.alphaMap,refreshTransformUniform(S.alphaMap,e.alphaMapTransform)),S.bumpMap&&(e.bumpMap.value=S.bumpMap,refreshTransformUniform(S.bumpMap,e.bumpMapTransform),e.bumpScale.value=S.bumpScale,S.side===rl&&(e.bumpScale.value*=-1)),S.normalMap&&(e.normalMap.value=S.normalMap,refreshTransformUniform(S.normalMap,e.normalMapTransform),e.normalScale.value.copy(S.normalScale),S.side===rl&&e.normalScale.value.negate()),S.displacementMap&&(e.displacementMap.value=S.displacementMap,refreshTransformUniform(S.displacementMap,e.displacementMapTransform),e.displacementScale.value=S.displacementScale,e.displacementBias.value=S.displacementBias),S.emissiveMap&&(e.emissiveMap.value=S.emissiveMap,refreshTransformUniform(S.emissiveMap,e.emissiveMapTransform)),S.specularMap&&(e.specularMap.value=S.specularMap,refreshTransformUniform(S.specularMap,e.specularMapTransform)),S.alphaTest>0&&(e.alphaTest.value=S.alphaTest);var k=_.get(S),E=k.envMap,T=k.envMapRotation;E&&(e.envMap.value=E,Sb.copy(T),Sb.x*=-1,Sb.y*=-1,Sb.z*=-1,E.isCubeTexture&&!1===E.isRenderTargetTexture&&(Sb.y*=-1,Sb.z*=-1),e.envMapRotation.value.setFromMatrix4(wb.makeRotationFromEuler(Sb)),e.flipEnvMap.value=E.isCubeTexture&&!1===E.isRenderTargetTexture?-1:1,e.reflectivity.value=S.reflectivity,e.ior.value=S.ior,e.refractionRatio.value=S.refractionRatio),S.lightMap&&(e.lightMap.value=S.lightMap,e.lightMapIntensity.value=S.lightMapIntensity,refreshTransformUniform(S.lightMap,e.lightMapTransform)),S.aoMap&&(e.aoMap.value=S.aoMap,e.aoMapIntensity.value=S.aoMapIntensity,refreshTransformUniform(S.aoMap,e.aoMapTransform))}return{refreshFogUniforms:function(_,S){S.color.getRGB(_.fogColor.value,getUnlitUniformColorSpace(e)),S.isFog?(_.fogNear.value=S.near,_.fogFar.value=S.far):S.isFogExp2&&(_.fogDensity.value=S.density)},refreshMaterialUniforms:function(e,S,k,E,T){S.isMeshBasicMaterial||S.isMeshLambertMaterial?refreshUniformsCommon(e,S):S.isMeshToonMaterial?(refreshUniformsCommon(e,S),function(e,_){_.gradientMap&&(e.gradientMap.value=_.gradientMap)}(e,S)):S.isMeshPhongMaterial?(refreshUniformsCommon(e,S),function(e,_){e.specular.value.copy(_.specular),e.shininess.value=Math.max(_.shininess,1e-4)}(e,S)):S.isMeshStandardMaterial?(refreshUniformsCommon(e,S),function(e,_){e.metalness.value=_.metalness,_.metalnessMap&&(e.metalnessMap.value=_.metalnessMap,refreshTransformUniform(_.metalnessMap,e.metalnessMapTransform));e.roughness.value=_.roughness,_.roughnessMap&&(e.roughnessMap.value=_.roughnessMap,refreshTransformUniform(_.roughnessMap,e.roughnessMapTransform));_.envMap&&(e.envMapIntensity.value=_.envMapIntensity)}(e,S),S.isMeshPhysicalMaterial&&function(e,_,S){e.ior.value=_.ior,_.sheen>0&&(e.sheenColor.value.copy(_.sheenColor).multiplyScalar(_.sheen),e.sheenRoughness.value=_.sheenRoughness,_.sheenColorMap&&(e.sheenColorMap.value=_.sheenColorMap,refreshTransformUniform(_.sheenColorMap,e.sheenColorMapTransform)),_.sheenRoughnessMap&&(e.sheenRoughnessMap.value=_.sheenRoughnessMap,refreshTransformUniform(_.sheenRoughnessMap,e.sheenRoughnessMapTransform)));_.clearcoat>0&&(e.clearcoat.value=_.clearcoat,e.clearcoatRoughness.value=_.clearcoatRoughness,_.clearcoatMap&&(e.clearcoatMap.value=_.clearcoatMap,refreshTransformUniform(_.clearcoatMap,e.clearcoatMapTransform)),_.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=_.clearcoatRoughnessMap,refreshTransformUniform(_.clearcoatRoughnessMap,e.clearcoatRoughnessMapTransform)),_.clearcoatNormalMap&&(e.clearcoatNormalMap.value=_.clearcoatNormalMap,refreshTransformUniform(_.clearcoatNormalMap,e.clearcoatNormalMapTransform),e.clearcoatNormalScale.value.copy(_.clearcoatNormalScale),_.side===rl&&e.clearcoatNormalScale.value.negate()));_.dispersion>0&&(e.dispersion.value=_.dispersion);_.iridescence>0&&(e.iridescence.value=_.iridescence,e.iridescenceIOR.value=_.iridescenceIOR,e.iridescenceThicknessMinimum.value=_.iridescenceThicknessRange[0],e.iridescenceThicknessMaximum.value=_.iridescenceThicknessRange[1],_.iridescenceMap&&(e.iridescenceMap.value=_.iridescenceMap,refreshTransformUniform(_.iridescenceMap,e.iridescenceMapTransform)),_.iridescenceThicknessMap&&(e.iridescenceThicknessMap.value=_.iridescenceThicknessMap,refreshTransformUniform(_.iridescenceThicknessMap,e.iridescenceThicknessMapTransform)));_.transmission>0&&(e.transmission.value=_.transmission,e.transmissionSamplerMap.value=S.texture,e.transmissionSamplerSize.value.set(S.width,S.height),_.transmissionMap&&(e.transmissionMap.value=_.transmissionMap,refreshTransformUniform(_.transmissionMap,e.transmissionMapTransform)),e.thickness.value=_.thickness,_.thicknessMap&&(e.thicknessMap.value=_.thicknessMap,refreshTransformUniform(_.thicknessMap,e.thicknessMapTransform)),e.attenuationDistance.value=_.attenuationDistance,e.attenuationColor.value.copy(_.attenuationColor));_.anisotropy>0&&(e.anisotropyVector.value.set(_.anisotropy*Math.cos(_.anisotropyRotation),_.anisotropy*Math.sin(_.anisotropyRotation)),_.anisotropyMap&&(e.anisotropyMap.value=_.anisotropyMap,refreshTransformUniform(_.anisotropyMap,e.anisotropyMapTransform)));e.specularIntensity.value=_.specularIntensity,e.specularColor.value.copy(_.specularColor),_.specularColorMap&&(e.specularColorMap.value=_.specularColorMap,refreshTransformUniform(_.specularColorMap,e.specularColorMapTransform));_.specularIntensityMap&&(e.specularIntensityMap.value=_.specularIntensityMap,refreshTransformUniform(_.specularIntensityMap,e.specularIntensityMapTransform))}(e,S,T)):S.isMeshMatcapMaterial?(refreshUniformsCommon(e,S),function(e,_){_.matcap&&(e.matcap.value=_.matcap)}(e,S)):S.isMeshDepthMaterial?refreshUniformsCommon(e,S):S.isMeshDistanceMaterial?(refreshUniformsCommon(e,S),function(e,S){var k=_.get(S).light;e.referencePosition.value.setFromMatrixPosition(k.matrixWorld),e.nearDistance.value=k.shadow.camera.near,e.farDistance.value=k.shadow.camera.far}(e,S)):S.isMeshNormalMaterial?refreshUniformsCommon(e,S):S.isLineBasicMaterial?(function(e,_){e.diffuse.value.copy(_.color),e.opacity.value=_.opacity,_.map&&(e.map.value=_.map,refreshTransformUniform(_.map,e.mapTransform))}(e,S),S.isLineDashedMaterial&&function(e,_){e.dashSize.value=_.dashSize,e.totalSize.value=_.dashSize+_.gapSize,e.scale.value=_.scale}(e,S)):S.isPointsMaterial?function(e,_,S,k){e.diffuse.value.copy(_.color),e.opacity.value=_.opacity,e.size.value=_.size*S,e.scale.value=.5*k,_.map&&(e.map.value=_.map,refreshTransformUniform(_.map,e.uvTransform));_.alphaMap&&(e.alphaMap.value=_.alphaMap,refreshTransformUniform(_.alphaMap,e.alphaMapTransform));_.alphaTest>0&&(e.alphaTest.value=_.alphaTest)}(e,S,k,E):S.isSpriteMaterial?function(e,_){e.diffuse.value.copy(_.color),e.opacity.value=_.opacity,e.rotation.value=_.rotation,_.map&&(e.map.value=_.map,refreshTransformUniform(_.map,e.mapTransform));_.alphaMap&&(e.alphaMap.value=_.alphaMap,refreshTransformUniform(_.alphaMap,e.alphaMapTransform));_.alphaTest>0&&(e.alphaTest.value=_.alphaTest)}(e,S):S.isShadowMaterial?(e.color.value.copy(S.color),e.opacity.value=S.opacity):S.isShaderMaterial&&(S.uniformsNeedUpdate=!1)}}}function WebGLUniformsGroups(e,_,S,k){var E={},T={},M=[],I=e.getParameter(e.MAX_UNIFORM_BUFFER_BINDINGS);function hasUniformChanged(e,_,S,k){var E=e.value,T=_+"_"+S;if(void 0===k[T])return k[T]="number"==typeof E||"boolean"==typeof E?E:E.clone(),!0;var M=k[T];if("number"==typeof E||"boolean"==typeof E){if(M!==E)return k[T]=E,!0}else if(!1===M.equals(E))return M.copy(E),!0;return!1}function getUniformSize(e){var _={boundary:0,storage:0};return"number"==typeof e||"boolean"==typeof e?(_.boundary=4,_.storage=4):e.isVector2?(_.boundary=8,_.storage=8):e.isVector3||e.isColor?(_.boundary=16,_.storage=12):e.isVector4?(_.boundary=16,_.storage=16):e.isMatrix3?(_.boundary=48,_.storage=48):e.isMatrix4?(_.boundary=64,_.storage=64):e.isTexture,_}function onUniformsGroupsDispose(_){var S=_.target;S.removeEventListener("dispose",onUniformsGroupsDispose);var k=M.indexOf(S.__bindingPointIndex);M.splice(k,1),e.deleteBuffer(E[S.id]),delete E[S.id],delete T[S.id]}return{bind:function(e,_){var S=_.program;k.uniformBlockBinding(e,S)},update:function(S,R){var O=E[S.id];void 0===O&&(!function(e){for(var _=e.uniforms,S=0,k=16,E=0,T=_.length;E<T;E++)for(var M=Array.isArray(_[E])?_[E]:[_[E]],I=0,R=M.length;I<R;I++)for(var O=M[I],D=Array.isArray(O.value)?O.value:[O.value],L=0,U=D.length;L<U;L++){var B=getUniformSize(D[L]),z=S%k,G=z%B.boundary,j=z+G;S+=G,0!==j&&k-j<B.storage&&(S+=k-j),O.__data=new Float32Array(B.storage/Float32Array.BYTES_PER_ELEMENT),O.__offset=S,S+=B.storage}var V=S%k;V>0&&(S+=k-V);e.__size=S,e.__cache={}}(S),O=function(_){var S=function(){for(var e=0;e<I;e++)if(-1===M.indexOf(e))return M.push(e),e;return 0}();_.__bindingPointIndex=S;var k=e.createBuffer(),E=_.__size,T=_.usage;return e.bindBuffer(e.UNIFORM_BUFFER,k),e.bufferData(e.UNIFORM_BUFFER,E,T),e.bindBuffer(e.UNIFORM_BUFFER,null),e.bindBufferBase(e.UNIFORM_BUFFER,S,k),k}(S),E[S.id]=O,S.addEventListener("dispose",onUniformsGroupsDispose));var D=R.program;k.updateUBOMapping(S,D);var L=_.render.frame;T[S.id]!==L&&(!function(_){var S=E[_.id],k=_.uniforms,T=_.__cache;e.bindBuffer(e.UNIFORM_BUFFER,S);for(var M=0,I=k.length;M<I;M++)for(var R=Array.isArray(k[M])?k[M]:[k[M]],O=0,D=R.length;O<D;O++){var L=R[O];if(!0===hasUniformChanged(L,M,O,T)){for(var U=L.__offset,B=Array.isArray(L.value)?L.value:[L.value],z=0,G=0;G<B.length;G++){var j=B[G],V=getUniformSize(j);"number"==typeof j||"boolean"==typeof j?(L.__data[0]=j,e.bufferSubData(e.UNIFORM_BUFFER,U+z,L.__data)):j.isMatrix3?(L.__data[0]=j.elements[0],L.__data[1]=j.elements[1],L.__data[2]=j.elements[2],L.__data[3]=0,L.__data[4]=j.elements[3],L.__data[5]=j.elements[4],L.__data[6]=j.elements[5],L.__data[7]=0,L.__data[8]=j.elements[6],L.__data[9]=j.elements[7],L.__data[10]=j.elements[8],L.__data[11]=0):(j.toArray(L.__data,z),z+=V.storage/Float32Array.BYTES_PER_ELEMENT)}e.bufferSubData(e.UNIFORM_BUFFER,U,L.__data)}}e.bindBuffer(e.UNIFORM_BUFFER,null)}(S),T[S.id]=L)},dispose:function(){for(var _ in E)e.deleteBuffer(E[_]);M=[],E={},T={}}}}var xb=function(){return _createClass3(function WebGLRenderer(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck3(this,WebGLRenderer);var _,S=e.canvas,k=void 0===S?createCanvasElement():S,E=e.context,T=void 0===E?null:E,M=e.depth,I=void 0===M||M,R=e.stencil,O=void 0!==R&&R,D=e.alpha,L=void 0!==D&&D,U=e.antialias,B=void 0!==U&&U,z=e.premultipliedAlpha,G=void 0===z||z,j=e.preserveDrawingBuffer,V=void 0!==j&&j,H=e.powerPreference,W=void 0===H?"default":H,q=e.failIfMajorPerformanceCaveat,X=void 0!==q&&q,Y=e.reversedDepthBuffer,K=void 0!==Y&&Y;if(this.isWebGLRenderer=!0,null!==T){if("undefined"!=typeof WebGLRenderingContext&&T instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");_=T.getContextAttributes().alpha}else _=L;var J=new Uint32Array(4),Q=new Int32Array(4),Z=null,$=null,ee=[],te=[];this.domElement=k,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=sl,this.toneMappingExposure=1,this.transmissionResolutionScale=1;var re=this,ne=!1;this._outputColorSpace=Bc;var ie=0,ae=0,oe=null,se=-1,ue=null,le=new yh,ce=new yh,he=null,de=new jd(0),fe=0,pe=k.width,ve=k.height,ge=1,me=null,ye=null,_e=new yh(0,0,pe,ve),be=new yh(0,0,pe,ve),Se=!1,we=new Wp,xe=!1,ke=!1,Ce=new Qh,Ae=new th,Ee=new yh,Te={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0},Me=!1;function getTargetPixelRatio(){return null===oe?ge:1}var Ie,Re,Pe,Oe,De,Le,Fe,Ue,Be,Ne,ze,Ge,je,Ve,He,We,qe,Xe,Ye,Ke,Je,Qe,Ze,$e,et=T;function getContext(e,_){return k.getContext(e,_)}try{var tt={alpha:!0,depth:I,stencil:O,antialias:B,premultipliedAlpha:G,preserveDrawingBuffer:V,powerPreference:W,failIfMajorPerformanceCaveat:X};if("setAttribute"in k&&k.setAttribute("data-engine","three.js r".concat(Qu)),k.addEventListener("webglcontextlost",onContextLost,!1),k.addEventListener("webglcontextrestored",onContextRestore,!1),k.addEventListener("webglcontextcreationerror",onContextCreationError,!1),null===et){var rt="webgl2";if(null===(et=getContext(rt,tt)))throw getContext(rt)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(lt){throw lt}function initGLContext(){(Ie=new WebGLExtensions(et)).init(),Qe=new WebGLUtils(et,Ie),Re=new WebGLCapabilities(et,Ie,e,Qe),Pe=new WebGLState(et,Ie),Re.reversedDepthBuffer&&K&&Pe.buffers.depth.setReversed(!0),Oe=new WebGLInfo(et),De=new WebGLProperties,Le=new WebGLTextures(et,Ie,Pe,De,Re,Qe,Oe),Fe=new WebGLCubeMaps(re),Ue=new WebGLCubeUVMaps(re),Be=new WebGLAttributes(et),Ze=new WebGLBindingStates(et,Be),Ne=new WebGLGeometries(et,Be,Oe,Ze),ze=new WebGLObjects(et,Ne,Be,Oe),Ye=new WebGLMorphtargets(et,Re,Le),We=new WebGLClipping(De),Ge=new WebGLPrograms(re,Fe,Ue,Ie,Re,Ze,We),je=new WebGLMaterials(re,De),Ve=new WebGLRenderLists,He=new WebGLRenderStates(Ie),Xe=new WebGLBackground(re,Fe,Ue,Pe,ze,_,G),qe=new WebGLShadowMap(re,ze,Re),$e=new WebGLUniformsGroups(et,Oe,Re,Pe),Ke=new WebGLBufferRenderer(et,Ie,Oe),Je=new WebGLIndexedBufferRenderer(et,Ie,Oe),Oe.programs=Ge.programs,re.capabilities=Re,re.extensions=Ie,re.properties=De,re.renderLists=Ve,re.shadowMap=qe,re.state=Pe,re.info=Oe}initGLContext();var nt=new bb(re,et);function onContextLost(e){e.preventDefault(),ne=!0}function onContextRestore(){ne=!1;var e=Oe.autoReset,_=qe.enabled,S=qe.autoUpdate,k=qe.needsUpdate,E=qe.type;initGLContext(),Oe.autoReset=e,qe.enabled=_,qe.autoUpdate=S,qe.needsUpdate=k,qe.type=E}function onContextCreationError(e){}function onMaterialDispose(e){var _=e.target;_.removeEventListener("dispose",onMaterialDispose),function(e){(function(e){var _=De.get(e).programs;void 0!==_&&(_.forEach(function(e){Ge.releaseProgram(e)}),e.isShaderMaterial&&Ge.releaseShaderCache(e))})(e),De.remove(e)}(_)}function prepareMaterial(e,_,S){!0===e.transparent&&e.side===nl&&!1===e.forceSinglePass?(e.side=rl,e.needsUpdate=!0,getProgram(e,_,S),e.side=0,e.needsUpdate=!0,getProgram(e,_,S),e.side=nl):getProgram(e,_,S)}this.xr=nt,this.getContext=function(){return et},this.getContextAttributes=function(){return et.getContextAttributes()},this.forceContextLoss=function(){var e=Ie.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){var e=Ie.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return ge},this.setPixelRatio=function(e){void 0!==e&&(ge=e,this.setSize(pe,ve,!1))},this.getSize=function(e){return e.set(pe,ve)},this.setSize=function(e,_){var S=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];nt.isPresenting||(pe=e,ve=_,k.width=Math.floor(e*ge),k.height=Math.floor(_*ge),!0===S&&(k.style.width=e+"px",k.style.height=_+"px"),this.setViewport(0,0,e,_))},this.getDrawingBufferSize=function(e){return e.set(pe*ge,ve*ge).floor()},this.setDrawingBufferSize=function(e,_,S){pe=e,ve=_,ge=S,k.width=Math.floor(e*S),k.height=Math.floor(_*S),this.setViewport(0,0,e,_)},this.getCurrentViewport=function(e){return e.copy(le)},this.getViewport=function(e){return e.copy(_e)},this.setViewport=function(e,_,S,k){e.isVector4?_e.set(e.x,e.y,e.z,e.w):_e.set(e,_,S,k),Pe.viewport(le.copy(_e).multiplyScalar(ge).round())},this.getScissor=function(e){return e.copy(be)},this.setScissor=function(e,_,S,k){e.isVector4?be.set(e.x,e.y,e.z,e.w):be.set(e,_,S,k),Pe.scissor(ce.copy(be).multiplyScalar(ge).round())},this.getScissorTest=function(){return Se},this.setScissorTest=function(e){Pe.setScissorTest(Se=e)},this.setOpaqueSort=function(e){me=e},this.setTransparentSort=function(e){ye=e},this.getClearColor=function(e){return e.copy(Xe.getClearColor())},this.setClearColor=function(){var e;(e=Xe).setClearColor.apply(e,arguments)},this.getClearAlpha=function(){return Xe.getClearAlpha()},this.setClearAlpha=function(){var e;(e=Xe).setClearAlpha.apply(e,arguments)},this.clear=function(){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],_=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],S=0;if(!(arguments.length>0&&void 0!==arguments[0])||arguments[0]){var k=!1;if(null!==oe){var E=oe.texture.format;k=E===Kl||E===Yl||E===ql}if(k){var T=oe.texture.type,M=T===El||T===Pl||T===Il||T===Ul||T===Ll||T===Fl,I=Xe.getClearColor(),R=Xe.getClearAlpha(),O=I.r,D=I.g,L=I.b;M?(J[0]=O,J[1]=D,J[2]=L,J[3]=R,et.clearBufferuiv(et.COLOR,0,J)):(Q[0]=O,Q[1]=D,Q[2]=L,Q[3]=R,et.clearBufferiv(et.COLOR,0,Q))}else S|=et.COLOR_BUFFER_BIT}e&&(S|=et.DEPTH_BUFFER_BIT),_&&(S|=et.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),et.clear(S)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){k.removeEventListener("webglcontextlost",onContextLost,!1),k.removeEventListener("webglcontextrestored",onContextRestore,!1),k.removeEventListener("webglcontextcreationerror",onContextCreationError,!1),Xe.dispose(),Ve.dispose(),He.dispose(),De.dispose(),Fe.dispose(),Ue.dispose(),ze.dispose(),Ze.dispose(),$e.dispose(),Ge.dispose(),nt.dispose(),nt.removeEventListener("sessionstart",onXRSessionStart),nt.removeEventListener("sessionend",onXRSessionEnd),at.stop()},this.renderBufferDirect=function(e,_,S,k,E,T){null===_&&(_=Te);var M=E.isMesh&&E.matrixWorld.determinant()<0,I=function(e,_,S,k,E){!0!==_.isScene&&(_=Te);Le.resetTextureUnits();var T=_.fog,M=k.isMeshStandardMaterial?_.environment:null,I=null===oe?re.outputColorSpace:!0===oe.isXRRenderTarget?oe.texture.colorSpace:Nc,R=(k.isMeshStandardMaterial?Ue:Fe).get(k.envMap||M),O=!0===k.vertexColors&&!!S.attributes.color&&4===S.attributes.color.itemSize,D=!!S.attributes.tangent&&(!!k.normalMap||k.anisotropy>0),L=!!S.morphAttributes.position,U=!!S.morphAttributes.normal,B=!!S.morphAttributes.color,z=sl;k.toneMapped&&(null!==oe&&!0!==oe.isXRRenderTarget||(z=re.toneMapping));var G=S.morphAttributes.position||S.morphAttributes.normal||S.morphAttributes.color,j=void 0!==G?G.length:0,V=De.get(k),H=$.state.lights;if(!0===xe&&(!0===ke||e!==ue)){var W=e===ue&&k.id===se;We.setState(k,e,W)}var q=!1;k.version===V.__version?V.needsLights&&V.lightsStateVersion!==H.state.version||V.outputColorSpace!==I||E.isBatchedMesh&&!1===V.batching?q=!0:E.isBatchedMesh||!0!==V.batching?E.isBatchedMesh&&!0===V.batchingColor&&null===E.colorTexture||E.isBatchedMesh&&!1===V.batchingColor&&null!==E.colorTexture||E.isInstancedMesh&&!1===V.instancing?q=!0:E.isInstancedMesh||!0!==V.instancing?E.isSkinnedMesh&&!1===V.skinning?q=!0:E.isSkinnedMesh||!0!==V.skinning?E.isInstancedMesh&&!0===V.instancingColor&&null===E.instanceColor||E.isInstancedMesh&&!1===V.instancingColor&&null!==E.instanceColor||E.isInstancedMesh&&!0===V.instancingMorph&&null===E.morphTexture||E.isInstancedMesh&&!1===V.instancingMorph&&null!==E.morphTexture||V.envMap!==R||!0===k.fog&&V.fog!==T?q=!0:void 0===V.numClippingPlanes||V.numClippingPlanes===We.numPlanes&&V.numIntersection===We.numIntersection?(V.vertexAlphas!==O||V.vertexTangents!==D||V.morphTargets!==L||V.morphNormals!==U||V.morphColors!==B||V.toneMapping!==z||V.morphTargetsCount!==j)&&(q=!0):q=!0:q=!0:q=!0:q=!0:(q=!0,V.__version=k.version);var X=V.currentProgram;!0===q&&(X=getProgram(k,_,E));var Y=!1,K=!1,J=!1,Q=X.getUniforms(),Z=V.uniforms;Pe.useProgram(X.program)&&(Y=!0,K=!0,J=!0);k.id!==se&&(se=k.id,K=!0);if(Y||ue!==e){Pe.buffers.depth.getReversed()&&!0!==e.reversedDepth&&(e._reversedDepth=!0,e.updateProjectionMatrix()),Q.setValue(et,"projectionMatrix",e.projectionMatrix),Q.setValue(et,"viewMatrix",e.matrixWorldInverse);var ee=Q.map.cameraPosition;void 0!==ee&&ee.setValue(et,Ae.setFromMatrixPosition(e.matrixWorld)),Re.logarithmicDepthBuffer&&Q.setValue(et,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),(k.isMeshPhongMaterial||k.isMeshToonMaterial||k.isMeshLambertMaterial||k.isMeshBasicMaterial||k.isMeshStandardMaterial||k.isShaderMaterial)&&Q.setValue(et,"isOrthographic",!0===e.isOrthographicCamera),ue!==e&&(ue=e,K=!0,J=!0)}if(E.isSkinnedMesh){Q.setOptional(et,E,"bindMatrix"),Q.setOptional(et,E,"bindMatrixInverse");var te=E.skeleton;te&&(null===te.boneTexture&&te.computeBoneTexture(),Q.setValue(et,"boneTexture",te.boneTexture,Le))}E.isBatchedMesh&&(Q.setOptional(et,E,"batchingTexture"),Q.setValue(et,"batchingTexture",E._matricesTexture,Le),Q.setOptional(et,E,"batchingIdTexture"),Q.setValue(et,"batchingIdTexture",E._indirectTexture,Le),Q.setOptional(et,E,"batchingColorTexture"),null!==E._colorsTexture&&Q.setValue(et,"batchingColorTexture",E._colorsTexture,Le));var ne=S.morphAttributes;void 0===ne.position&&void 0===ne.normal&&void 0===ne.color||Ye.update(E,S,X);(K||V.receiveShadow!==E.receiveShadow)&&(V.receiveShadow=E.receiveShadow,Q.setValue(et,"receiveShadow",E.receiveShadow));k.isMeshGouraudMaterial&&null!==k.envMap&&(Z.envMap.value=R,Z.flipEnvMap.value=R.isCubeTexture&&!1===R.isRenderTargetTexture?-1:1);k.isMeshStandardMaterial&&null===k.envMap&&null!==_.environment&&(Z.envMapIntensity.value=_.environmentIntensity);K&&(Q.setValue(et,"toneMappingExposure",re.toneMappingExposure),V.needsLights&&function(e,_){e.ambientLightColor.needsUpdate=_,e.lightProbe.needsUpdate=_,e.directionalLights.needsUpdate=_,e.directionalLightShadows.needsUpdate=_,e.pointLights.needsUpdate=_,e.pointLightShadows.needsUpdate=_,e.spotLights.needsUpdate=_,e.spotLightShadows.needsUpdate=_,e.rectAreaLights.needsUpdate=_,e.hemisphereLights.needsUpdate=_}(Z,J),T&&!0===k.fog&&je.refreshFogUniforms(Z,T),je.refreshMaterialUniforms(Z,k,ge,ve,$.state.transmissionRenderTarget[e.id]),sb.upload(et,getUniformList(V),Z,Le));k.isShaderMaterial&&!0===k.uniformsNeedUpdate&&(sb.upload(et,getUniformList(V),Z,Le),k.uniformsNeedUpdate=!1);k.isSpriteMaterial&&Q.setValue(et,"center",E.center);if(Q.setValue(et,"modelViewMatrix",E.modelViewMatrix),Q.setValue(et,"normalMatrix",E.normalMatrix),Q.setValue(et,"modelMatrix",E.matrixWorld),k.isShaderMaterial||k.isRawShaderMaterial)for(var ie=k.uniformsGroups,ae=0,le=ie.length;ae<le;ae++){var ce=ie[ae];$e.update(ce,X),$e.bind(ce,X)}return X}(e,_,S,k,E);Pe.setMaterial(k,M);var R=S.index,O=1;if(!0===k.wireframe){if(void 0===(R=Ne.getWireframeAttribute(S)))return;O=2}var D=S.drawRange,L=S.attributes.position,U=D.start*O,B=(D.start+D.count)*O;null!==T&&(U=Math.max(U,T.start*O),B=Math.min(B,(T.start+T.count)*O)),null!==R?(U=Math.max(U,0),B=Math.min(B,R.count)):null!=L&&(U=Math.max(U,0),B=Math.min(B,L.count));var z=B-U;if(!(z<0||z===1/0)){var G;Ze.setup(E,k,I,S,R);var j=Ke;if(null!==R&&(G=Be.get(R),(j=Je).setIndex(G)),E.isMesh)!0===k.wireframe?(Pe.setLineWidth(k.wireframeLinewidth*getTargetPixelRatio()),j.setMode(et.LINES)):j.setMode(et.TRIANGLES);else if(E.isLine){var V=k.linewidth;void 0===V&&(V=1),Pe.setLineWidth(V*getTargetPixelRatio()),E.isLineSegments?j.setMode(et.LINES):E.isLineLoop?j.setMode(et.LINE_LOOP):j.setMode(et.LINE_STRIP)}else E.isPoints?j.setMode(et.POINTS):E.isSprite&&j.setMode(et.TRIANGLES);if(E.isBatchedMesh)if(null!==E._multiDrawInstances)warnOnce("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),j.renderMultiDrawInstances(E._multiDrawStarts,E._multiDrawCounts,E._multiDrawCount,E._multiDrawInstances);else if(Ie.get("WEBGL_multi_draw"))j.renderMultiDraw(E._multiDrawStarts,E._multiDrawCounts,E._multiDrawCount);else for(var H=E._multiDrawStarts,W=E._multiDrawCounts,q=E._multiDrawCount,X=R?Be.get(R).bytesPerElement:1,Y=De.get(k).currentProgram.getUniforms(),K=0;K<q;K++)Y.setValue(et,"_gl_DrawID",K),j.render(H[K]/X,W[K]);else if(E.isInstancedMesh)j.renderInstances(U,z,E.count);else if(S.isInstancedBufferGeometry){var J=void 0!==S._maxInstanceCount?S._maxInstanceCount:1/0,Q=Math.min(S.instanceCount,J);j.renderInstances(U,z,Q)}else j.render(U,z)}},this.compile=function(e,_){var S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;null===S&&(S=e),($=He.get(S)).init(_),te.push($),S.traverseVisible(function(e){e.isLight&&e.layers.test(_.layers)&&($.pushLight(e),e.castShadow&&$.pushShadow(e))}),e!==S&&e.traverseVisible(function(e){e.isLight&&e.layers.test(_.layers)&&($.pushLight(e),e.castShadow&&$.pushShadow(e))}),$.setupLights();var k=new Set;return e.traverse(function(e){if(e.isMesh||e.isPoints||e.isLine||e.isSprite){var _=e.material;if(_)if(Array.isArray(_))for(var E=0;E<_.length;E++){var T=_[E];prepareMaterial(T,S,e),k.add(T)}else prepareMaterial(_,S,e),k.add(_)}}),$=te.pop(),k},this.compileAsync=function(e,_){var S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,k=this.compile(e,_,S);return new Promise(function(_){function checkMaterialsReady(){k.forEach(function(e){De.get(e).currentProgram.isReady()&&k.delete(e)}),0!==k.size?setTimeout(checkMaterialsReady,10):_(e)}null!==Ie.get("KHR_parallel_shader_compile")?checkMaterialsReady():setTimeout(checkMaterialsReady,10)})};var it=null;function onXRSessionStart(){at.stop()}function onXRSessionEnd(){at.start()}var at=new WebGLAnimation;function projectObject(e,_,S,k){if(!1!==e.visible){if(e.layers.test(_.layers))if(e.isGroup)S=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(_);else if(e.isLight)$.pushLight(e),e.castShadow&&$.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||we.intersectsSprite(e)){k&&Ee.setFromMatrixPosition(e.matrixWorld).applyMatrix4(Ce);var E=ze.update(e),T=e.material;T.visible&&Z.push(e,E,T,S,Ee.z,null)}}else if((e.isMesh||e.isLine||e.isPoints)&&(!e.frustumCulled||we.intersectsObject(e))){var M=ze.update(e),I=e.material;if(k&&(void 0!==e.boundingSphere?(null===e.boundingSphere&&e.computeBoundingSphere(),Ee.copy(e.boundingSphere.center)):(null===M.boundingSphere&&M.computeBoundingSphere(),Ee.copy(M.boundingSphere.center)),Ee.applyMatrix4(e.matrixWorld).applyMatrix4(Ce)),Array.isArray(I))for(var R=M.groups,O=0,D=R.length;O<D;O++){var L=R[O],U=I[L.materialIndex];U&&U.visible&&Z.push(e,M,U,S,Ee.z,L)}else I.visible&&Z.push(e,M,I,S,Ee.z,null)}for(var B=e.children,z=0,G=B.length;z<G;z++)projectObject(B[z],_,S,k)}}function renderScene(e,_,S,k){var E=e.opaque,T=e.transmissive,M=e.transparent;$.setupLightsView(S),!0===xe&&We.setGlobalState(re.clippingPlanes,S),k&&Pe.viewport(le.copy(k)),E.length>0&&renderObjects(E,_,S),T.length>0&&renderObjects(T,_,S),M.length>0&&renderObjects(M,_,S),Pe.buffers.depth.setTest(!0),Pe.buffers.depth.setMask(!0),Pe.buffers.color.setMask(!0),Pe.setPolygonOffset(!1)}function renderTransmissionPass(e,_,S,k){if(null===(!0===S.isScene?S.overrideMaterial:null)){void 0===$.state.transmissionRenderTarget[k.id]&&($.state.transmissionRenderTarget[k.id]=new bh(1,1,{generateMipmaps:!0,type:Ie.has("EXT_color_buffer_half_float")||Ie.has("EXT_color_buffer_float")?Dl:El,minFilter:Cl,samples:4,stencilBuffer:O,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:hh.workingColorSpace}));var E=$.state.transmissionRenderTarget[k.id],T=k.viewport||le;E.setSize(T.z*re.transmissionResolutionScale,T.w*re.transmissionResolutionScale);var M=re.getRenderTarget(),I=re.getActiveCubeFace(),R=re.getActiveMipmapLevel();re.setRenderTarget(E),re.getClearColor(de),(fe=re.getClearAlpha())<1&&re.setClearColor(16777215,.5),re.clear(),Me&&Xe.render(S);var D=re.toneMapping;re.toneMapping=sl;var L=k.viewport;if(void 0!==k.viewport&&(k.viewport=void 0),$.setupLightsView(k),!0===xe&&We.setGlobalState(re.clippingPlanes,k),renderObjects(e,S,k),Le.updateMultisampleRenderTarget(E),Le.updateRenderTargetMipmap(E),!1===Ie.has("WEBGL_multisampled_render_to_texture")){for(var U=!1,B=0,z=_.length;B<z;B++){var G=_[B],j=G.object,V=G.geometry,H=G.material,W=G.group;if(H.side===nl&&j.layers.test(k.layers)){var q=H.side;H.side=rl,H.needsUpdate=!0,renderObject(j,S,k,V,H,W),H.side=q,H.needsUpdate=!0,U=!0}}!0===U&&(Le.updateMultisampleRenderTarget(E),Le.updateRenderTargetMipmap(E))}re.setRenderTarget(M,I,R),re.setClearColor(de,fe),void 0!==L&&(k.viewport=L),re.toneMapping=D}}function renderObjects(e,_,S){for(var k=!0===_.isScene?_.overrideMaterial:null,E=0,T=e.length;E<T;E++){var M=e[E],I=M.object,R=M.geometry,O=M.group,D=M.material;!0===D.allowOverride&&null!==k&&(D=k),I.layers.test(S.layers)&&renderObject(I,_,S,R,D,O)}}function renderObject(e,_,S,k,E,T){e.onBeforeRender(re,_,S,k,E,T),e.modelViewMatrix.multiplyMatrices(S.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),E.onBeforeRender(re,_,S,k,e,T),!0===E.transparent&&E.side===nl&&!1===E.forceSinglePass?(E.side=rl,E.needsUpdate=!0,re.renderBufferDirect(S,_,k,E,e,T),E.side=0,E.needsUpdate=!0,re.renderBufferDirect(S,_,k,E,e,T),E.side=nl):re.renderBufferDirect(S,_,k,E,e,T),e.onAfterRender(re,_,S,k,E,T)}function getProgram(e,_,S){!0!==_.isScene&&(_=Te);var k=De.get(e),E=$.state.lights,T=$.state.shadowsArray,M=E.state.version,I=Ge.getParameters(e,E.state,T,_,S),R=Ge.getProgramCacheKey(I),O=k.programs;k.environment=e.isMeshStandardMaterial?_.environment:null,k.fog=_.fog,k.envMap=(e.isMeshStandardMaterial?Ue:Fe).get(e.envMap||k.environment),k.envMapRotation=null!==k.environment&&null===e.envMap?_.environmentRotation:e.envMapRotation,void 0===O&&(e.addEventListener("dispose",onMaterialDispose),O=new Map,k.programs=O);var D=O.get(R);if(void 0!==D){if(k.currentProgram===D&&k.lightsStateVersion===M)return updateCommonMaterialProperties(e,I),D}else I.uniforms=Ge.getUniforms(e),e.onBeforeCompile(I,re),D=Ge.acquireProgram(I,R),O.set(R,D),k.uniforms=I.uniforms;var L=k.uniforms;return(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(L.clippingPlanes=We.uniform),updateCommonMaterialProperties(e,I),k.needsLights=function(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}(e),k.lightsStateVersion=M,k.needsLights&&(L.ambientLightColor.value=E.state.ambient,L.lightProbe.value=E.state.probe,L.directionalLights.value=E.state.directional,L.directionalLightShadows.value=E.state.directionalShadow,L.spotLights.value=E.state.spot,L.spotLightShadows.value=E.state.spotShadow,L.rectAreaLights.value=E.state.rectArea,L.ltc_1.value=E.state.rectAreaLTC1,L.ltc_2.value=E.state.rectAreaLTC2,L.pointLights.value=E.state.point,L.pointLightShadows.value=E.state.pointShadow,L.hemisphereLights.value=E.state.hemi,L.directionalShadowMap.value=E.state.directionalShadowMap,L.directionalShadowMatrix.value=E.state.directionalShadowMatrix,L.spotShadowMap.value=E.state.spotShadowMap,L.spotLightMatrix.value=E.state.spotLightMatrix,L.spotLightMap.value=E.state.spotLightMap,L.pointShadowMap.value=E.state.pointShadowMap,L.pointShadowMatrix.value=E.state.pointShadowMatrix),k.currentProgram=D,k.uniformsList=null,D}function getUniformList(e){if(null===e.uniformsList){var _=e.currentProgram.getUniforms();e.uniformsList=sb.seqWithValue(_.seq,e.uniforms)}return e.uniformsList}function updateCommonMaterialProperties(e,_){var S=De.get(e);S.outputColorSpace=_.outputColorSpace,S.batching=_.batching,S.batchingColor=_.batchingColor,S.instancing=_.instancing,S.instancingColor=_.instancingColor,S.instancingMorph=_.instancingMorph,S.skinning=_.skinning,S.morphTargets=_.morphTargets,S.morphNormals=_.morphNormals,S.morphColors=_.morphColors,S.morphTargetsCount=_.morphTargetsCount,S.numClippingPlanes=_.numClippingPlanes,S.numIntersection=_.numClipIntersection,S.vertexAlphas=_.vertexAlphas,S.vertexTangents=_.vertexTangents,S.toneMapping=_.toneMapping}at.setAnimationLoop(function(e){it&&it(e)}),"undefined"!=typeof self&&at.setContext(self),this.setAnimationLoop=function(e){it=e,nt.setAnimationLoop(e),null===e?at.stop():at.start()},nt.addEventListener("sessionstart",onXRSessionStart),nt.addEventListener("sessionend",onXRSessionEnd),this.render=function(e,_){if((void 0===_||!0===_.isCamera)&&!0!==ne){if(!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),null===_.parent&&!0===_.matrixWorldAutoUpdate&&_.updateMatrixWorld(),!0===nt.enabled&&!0===nt.isPresenting&&(!0===nt.cameraAutoUpdate&&nt.updateCamera(_),_=nt.getCamera()),!0===e.isScene&&e.onBeforeRender(re,e,_,oe),($=He.get(e,te.length)).init(_),te.push($),Ce.multiplyMatrices(_.projectionMatrix,_.matrixWorldInverse),we.setFromProjectionMatrix(Ce,Wc,_.reversedDepth),ke=this.localClippingEnabled,xe=We.init(this.clippingPlanes,ke),(Z=Ve.get(e,ee.length)).init(),ee.push(Z),!0===nt.enabled&&!0===nt.isPresenting){var S=re.xr.getDepthSensingMesh();null!==S&&projectObject(S,_,-1/0,re.sortObjects)}projectObject(e,_,0,re.sortObjects),Z.finish(),!0===re.sortObjects&&Z.sort(me,ye),(Me=!1===nt.enabled||!1===nt.isPresenting||!1===nt.hasDepthSensing())&&Xe.addToRenderList(Z,e),this.info.render.frame++,!0===xe&&We.beginShadows();var k=$.state.shadowsArray;qe.render(k,e,_),!0===xe&&We.endShadows(),!0===this.info.autoReset&&this.info.reset();var E=Z.opaque,T=Z.transmissive;if($.setupLights(),_.isArrayCamera){var M=_.cameras;if(T.length>0)for(var I=0,R=M.length;I<R;I++){renderTransmissionPass(E,T,e,M[I])}Me&&Xe.render(e);for(var O=0,D=M.length;O<D;O++){var L=M[O];renderScene(Z,e,L,L.viewport)}}else T.length>0&&renderTransmissionPass(E,T,e,_),Me&&Xe.render(e),renderScene(Z,e,_);null!==oe&&0===ae&&(Le.updateMultisampleRenderTarget(oe),Le.updateRenderTargetMipmap(oe)),!0===e.isScene&&e.onAfterRender(re,e,_),Ze.resetDefaultState(),se=-1,ue=null,te.pop(),te.length>0?($=te[te.length-1],!0===xe&&We.setGlobalState(re.clippingPlanes,$.state.camera)):$=null,ee.pop(),Z=ee.length>0?ee[ee.length-1]:null}},this.getActiveCubeFace=function(){return ie},this.getActiveMipmapLevel=function(){return ae},this.getRenderTarget=function(){return oe},this.setRenderTargetTextures=function(e,_,S){var k=De.get(e);k.__autoAllocateDepthBuffer=!1===e.resolveDepthBuffer,!1===k.__autoAllocateDepthBuffer&&(k.__useRenderToTexture=!1),De.get(e.texture).__webglTexture=_,De.get(e.depthTexture).__webglTexture=k.__autoAllocateDepthBuffer?void 0:S,k.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(e,_){var S=De.get(e);S.__webglFramebuffer=_,S.__useDefaultFramebuffer=void 0===_};var ot=et.createFramebuffer();this.setRenderTarget=function(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;oe=e,ie=_,ae=S;var k=!0,E=null,T=!1,M=!1;if(e){var I=De.get(e);if(void 0!==I.__useDefaultFramebuffer)Pe.bindFramebuffer(et.FRAMEBUFFER,null),k=!1;else if(void 0===I.__webglFramebuffer)Le.setupRenderTarget(e);else if(I.__hasExternalTextures)Le.rebindTextures(e,De.get(e.texture).__webglTexture,De.get(e.depthTexture).__webglTexture);else if(e.depthBuffer){var R=e.depthTexture;if(I.__boundDepthTexture!==R){if(null!==R&&De.has(R)&&(e.width!==R.image.width||e.height!==R.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");Le.setupDepthRenderbuffer(e)}}var O=e.texture;(O.isData3DTexture||O.isDataArrayTexture||O.isCompressedArrayTexture)&&(M=!0);var D=De.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(E=Array.isArray(D[_])?D[_][S]:D[_],T=!0):E=e.samples>0&&!1===Le.useMultisampledRTT(e)?De.get(e).__webglMultisampledFramebuffer:Array.isArray(D)?D[S]:D,le.copy(e.viewport),ce.copy(e.scissor),he=e.scissorTest}else le.copy(_e).multiplyScalar(ge).floor(),ce.copy(be).multiplyScalar(ge).floor(),he=Se;if(0!==S&&(E=ot),Pe.bindFramebuffer(et.FRAMEBUFFER,E)&&k&&Pe.drawBuffers(e,E),Pe.viewport(le),Pe.scissor(ce),Pe.setScissorTest(he),T){var L=De.get(e.texture);et.framebufferTexture2D(et.FRAMEBUFFER,et.COLOR_ATTACHMENT0,et.TEXTURE_CUBE_MAP_POSITIVE_X+_,L.__webglTexture,S)}else if(M)for(var U=_,B=0;B<e.textures.length;B++){var z=De.get(e.textures[B]);et.framebufferTextureLayer(et.FRAMEBUFFER,et.COLOR_ATTACHMENT0+B,z.__webglTexture,S,U)}else if(null!==e&&0!==S){var G=De.get(e.texture);et.framebufferTexture2D(et.FRAMEBUFFER,et.COLOR_ATTACHMENT0,et.TEXTURE_2D,G.__webglTexture,S)}se=-1},this.readRenderTargetPixels=function(e,_,S,k,E,T,M){var I=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0;if(e&&e.isWebGLRenderTarget){var R=De.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==M&&(R=R[M]),R){Pe.bindFramebuffer(et.FRAMEBUFFER,R);try{var O=e.textures[I],D=O.format,L=O.type;if(!Re.textureFormatReadable(D))return;if(!Re.textureTypeReadable(L))return;_>=0&&_<=e.width-k&&S>=0&&S<=e.height-E&&(e.textures.length>1&&et.readBuffer(et.COLOR_ATTACHMENT0+I),et.readPixels(_,S,k,E,Qe.convert(D),Qe.convert(L),T))}finally{var U=null!==oe?De.get(oe).__webglFramebuffer:null;Pe.bindFramebuffer(et.FRAMEBUFFER,U)}}}},this.readRenderTargetPixelsAsync=function(){var e=_asyncToGenerator(_regenerator().m(function _callee256(e,_,S,k,E,T,M){var I,R,O,D,L,U,B,z,G=arguments;return _regenerator().w(function(j){for(;;)switch(j.n){case 0:if(I=G.length>7&&void 0!==G[7]?G[7]:0,e&&e.isWebGLRenderTarget){j.n=1;break}throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");case 1:if(R=De.get(e).__webglFramebuffer,e.isWebGLCubeRenderTarget&&void 0!==M&&(R=R[M]),!R){j.n=6;break}if(!(_>=0&&_<=e.width-k&&S>=0&&S<=e.height-E)){j.n=5;break}if(Pe.bindFramebuffer(et.FRAMEBUFFER,R),O=e.textures[I],D=O.format,L=O.type,Re.textureFormatReadable(D)){j.n=2;break}throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");case 2:if(Re.textureTypeReadable(L)){j.n=3;break}throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");case 3:return U=et.createBuffer(),et.bindBuffer(et.PIXEL_PACK_BUFFER,U),et.bufferData(et.PIXEL_PACK_BUFFER,T.byteLength,et.STREAM_READ),e.textures.length>1&&et.readBuffer(et.COLOR_ATTACHMENT0+I),et.readPixels(_,S,k,E,Qe.convert(D),Qe.convert(L),0),B=null!==oe?De.get(oe).__webglFramebuffer:null,Pe.bindFramebuffer(et.FRAMEBUFFER,B),z=et.fenceSync(et.SYNC_GPU_COMMANDS_COMPLETE,0),et.flush(),j.n=4,probeAsync(et,z,4);case 4:return et.bindBuffer(et.PIXEL_PACK_BUFFER,U),et.getBufferSubData(et.PIXEL_PACK_BUFFER,0,T),et.deleteBuffer(U),et.deleteSync(z),j.a(2,T);case 5:throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.");case 6:return j.a(2)}},_callee256)}));return function(_,S,k,E,T,M,I){return e.apply(this,arguments)}}(),this.copyFramebufferToTexture=function(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,k=Math.pow(2,-S),E=Math.floor(e.image.width*k),T=Math.floor(e.image.height*k),M=null!==_?_.x:0,I=null!==_?_.y:0;Le.setTexture2D(e,0),et.copyTexSubImage2D(et.TEXTURE_2D,S,0,0,M,I,E,T),Pe.unbindTexture()};var st=et.createFramebuffer(),ut=et.createFramebuffer();this.copyTextureToTexture=function(e,_){var S,k,E,T,M,I,R,O,D,L=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,U=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,B=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,z=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;null===z&&(0!==B?(warnOnce("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),z=B,B=0):z=0);var G=e.isCompressedTexture?e.mipmaps[z]:e.image;if(null!==L)S=L.max.x-L.min.x,k=L.max.y-L.min.y,E=L.isBox3?L.max.z-L.min.z:1,T=L.min.x,M=L.min.y,I=L.isBox3?L.min.z:0;else{var j=Math.pow(2,-B);S=Math.floor(G.width*j),k=Math.floor(G.height*j),E=e.isDataArrayTexture?G.depth:e.isData3DTexture?Math.floor(G.depth*j):1,T=0,M=0,I=0}null!==U?(R=U.x,O=U.y,D=U.z):(R=0,O=0,D=0);var V,H=Qe.convert(_.format),W=Qe.convert(_.type);_.isData3DTexture?(Le.setTexture3D(_,0),V=et.TEXTURE_3D):_.isDataArrayTexture||_.isCompressedArrayTexture?(Le.setTexture2DArray(_,0),V=et.TEXTURE_2D_ARRAY):(Le.setTexture2D(_,0),V=et.TEXTURE_2D),et.pixelStorei(et.UNPACK_FLIP_Y_WEBGL,_.flipY),et.pixelStorei(et.UNPACK_PREMULTIPLY_ALPHA_WEBGL,_.premultiplyAlpha),et.pixelStorei(et.UNPACK_ALIGNMENT,_.unpackAlignment);var q=et.getParameter(et.UNPACK_ROW_LENGTH),X=et.getParameter(et.UNPACK_IMAGE_HEIGHT),Y=et.getParameter(et.UNPACK_SKIP_PIXELS),K=et.getParameter(et.UNPACK_SKIP_ROWS),J=et.getParameter(et.UNPACK_SKIP_IMAGES);et.pixelStorei(et.UNPACK_ROW_LENGTH,G.width),et.pixelStorei(et.UNPACK_IMAGE_HEIGHT,G.height),et.pixelStorei(et.UNPACK_SKIP_PIXELS,T),et.pixelStorei(et.UNPACK_SKIP_ROWS,M),et.pixelStorei(et.UNPACK_SKIP_IMAGES,I);var Q=e.isDataArrayTexture||e.isData3DTexture,Z=_.isDataArrayTexture||_.isData3DTexture;if(e.isDepthTexture){var $=De.get(e),ee=De.get(_),te=De.get($.__renderTarget),re=De.get(ee.__renderTarget);Pe.bindFramebuffer(et.READ_FRAMEBUFFER,te.__webglFramebuffer),Pe.bindFramebuffer(et.DRAW_FRAMEBUFFER,re.__webglFramebuffer);for(var ne=0;ne<E;ne++)Q&&(et.framebufferTextureLayer(et.READ_FRAMEBUFFER,et.COLOR_ATTACHMENT0,De.get(e).__webglTexture,B,I+ne),et.framebufferTextureLayer(et.DRAW_FRAMEBUFFER,et.COLOR_ATTACHMENT0,De.get(_).__webglTexture,z,D+ne)),et.blitFramebuffer(T,M,S,k,R,O,S,k,et.DEPTH_BUFFER_BIT,et.NEAREST);Pe.bindFramebuffer(et.READ_FRAMEBUFFER,null),Pe.bindFramebuffer(et.DRAW_FRAMEBUFFER,null)}else if(0!==B||e.isRenderTargetTexture||De.has(e)){var ie=De.get(e),ae=De.get(_);Pe.bindFramebuffer(et.READ_FRAMEBUFFER,st),Pe.bindFramebuffer(et.DRAW_FRAMEBUFFER,ut);for(var oe=0;oe<E;oe++)Q?et.framebufferTextureLayer(et.READ_FRAMEBUFFER,et.COLOR_ATTACHMENT0,ie.__webglTexture,B,I+oe):et.framebufferTexture2D(et.READ_FRAMEBUFFER,et.COLOR_ATTACHMENT0,et.TEXTURE_2D,ie.__webglTexture,B),Z?et.framebufferTextureLayer(et.DRAW_FRAMEBUFFER,et.COLOR_ATTACHMENT0,ae.__webglTexture,z,D+oe):et.framebufferTexture2D(et.DRAW_FRAMEBUFFER,et.COLOR_ATTACHMENT0,et.TEXTURE_2D,ae.__webglTexture,z),0!==B?et.blitFramebuffer(T,M,S,k,R,O,S,k,et.COLOR_BUFFER_BIT,et.NEAREST):Z?et.copyTexSubImage3D(V,z,R,O,D+oe,T,M,S,k):et.copyTexSubImage2D(V,z,R,O,T,M,S,k);Pe.bindFramebuffer(et.READ_FRAMEBUFFER,null),Pe.bindFramebuffer(et.DRAW_FRAMEBUFFER,null)}else Z?e.isDataTexture||e.isData3DTexture?et.texSubImage3D(V,z,R,O,D,S,k,E,H,W,G.data):_.isCompressedArrayTexture?et.compressedTexSubImage3D(V,z,R,O,D,S,k,E,H,G.data):et.texSubImage3D(V,z,R,O,D,S,k,E,H,W,G):e.isDataTexture?et.texSubImage2D(et.TEXTURE_2D,z,R,O,S,k,H,W,G.data):e.isCompressedTexture?et.compressedTexSubImage2D(et.TEXTURE_2D,z,R,O,G.width,G.height,H,G.data):et.texSubImage2D(et.TEXTURE_2D,z,R,O,S,k,H,W,G);et.pixelStorei(et.UNPACK_ROW_LENGTH,q),et.pixelStorei(et.UNPACK_IMAGE_HEIGHT,X),et.pixelStorei(et.UNPACK_SKIP_PIXELS,Y),et.pixelStorei(et.UNPACK_SKIP_ROWS,K),et.pixelStorei(et.UNPACK_SKIP_IMAGES,J),0===z&&_.generateMipmaps&&et.generateMipmap(V),Pe.unbindTexture()},this.initRenderTarget=function(e){void 0===De.get(e).__webglFramebuffer&&Le.setupRenderTarget(e)},this.initTexture=function(e){e.isCubeTexture?Le.setTextureCube(e,0):e.isData3DTexture?Le.setTexture3D(e,0):e.isDataArrayTexture||e.isCompressedArrayTexture?Le.setTexture2DArray(e,0):Le.setTexture2D(e,0),Pe.unbindTexture()},this.resetState=function(){ie=0,ae=0,oe=null,Pe.reset(),Ze.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))},[{key:"coordinateSystem",get:function(){return Wc}},{key:"outputColorSpace",get:function(){return this._outputColorSpace},set:function(e){this._outputColorSpace=e;var _=this.getContext();_.drawingBufferColorSpace=hh._getDrawingBufferColorSpace(e),_.unpackColorSpace=hh._getUnpackColorSpace()}}])}();D("am",xb);var kb=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:ul,AddEquation:il,AddOperation:2,AdditiveAnimationBlendMode:Lc,AdditiveBlending:2,AgXToneMapping:6,AlphaFormat:zl,AlwaysCompare:519,AlwaysDepth:1,AlwaysStencilFunc:519,AmbientLight:Pm,AnimationAction:ky,AnimationClip:tm,AnimationLoader:lm,AnimationMixer:Ay,AnimationObjectGroup:xy,AnimationUtils:jg,ArcCurve:Jv,ArrayCamera:$m,ArrowHelper:x_,AttachedBindMode:ll,Audio:sy,AudioAnalyser:fy,AudioContext:Xm,AudioListener:oy,AudioLoader:Ym,AxesHelper:k_,BackSide:rl,BasicDepthPacking:Fc,BasicShadowMap:Zu,BatchedMesh:uv,Bone:kp,BooleanKeyframeTrack:Yg,Box2:zy,Box3:Ch,Box3Helper:b_,BoxGeometry:Mf,BoxHelper:y_,BufferAttribute:Zd,BufferGeometry:gf,BufferGeometryLoader:zm,ByteType:Tl,Cache:rm,Camera:Pf,CameraHelper:p_,CanvasTexture:Dv,CapsuleGeometry:Uv,CatmullRomCurve3:tg,CineonToneMapping:3,CircleGeometry:Bv,ClampToEdgeWrapping:yl,Clock:ey,Color:jd,ColorKeyframeTrack:Kg,ColorManagement:hh,CompressedArrayTexture:Pv,CompressedCubeTexture:Ov,CompressedTexture:Rv,CompressedTextureLoader:cm,ConeGeometry:zv,ConstantAlphaFactor:213,ConstantColorFactor:211,Controls:A_,CubeCamera:Bf,CubeReflectionMapping:dl,CubeRefractionMapping:fl,CubeTexture:Nf,CubeTextureLoader:fm,CubeUVReflectionMapping:gl,CubicBezierCurve:rg,CubicBezierCurve3:ng,CubicInterpolant:Hg,CullFaceBack:1,CullFaceFront:2,CullFaceFrontBack:3,CullFaceNone:0,Curve:Yv,CurvePath:cg,CustomBlending:5,CustomToneMapping:5,CylinderGeometry:Nv,Cylindrical:Uy,Data3DTexture:xh,DataArrayTexture:Sh,DataTexture:Cp,DataTextureLoader:pm,DataUtils:Yd,DecrementStencilOp:7683,DecrementWrapStencilOp:34056,DefaultLoadingManager:im,DepthFormat:Vl,DepthStencilFormat:Hl,DepthTexture:Lv,DetachedBindMode:cl,DirectionalLight:Rm,DirectionalLightHelper:h_,DiscreteInterpolant:qg,DodecahedronGeometry:jv,DoubleSide:nl,DstAlphaFactor:206,DstColorFactor:208,DynamicCopyUsage:35050,DynamicDrawUsage:35048,DynamicReadUsage:35049,EdgesGeometry:Xv,EllipseCurve:Kv,EqualCompare:514,EqualDepth:4,EqualStencilFunc:514,EquirectangularReflectionMapping:pl,EquirectangularRefractionMapping:vl,Euler:sd,EventDispatcher:Xc,ExternalTexture:Fv,ExtrudeGeometry:vg,FileLoader:um,Float16BufferAttribute:sf,Float32BufferAttribute:uf,FloatType:Ol,Fog:Wf,FogExp2:Hf,FramebufferTexture:Iv,FrontSide:0,Frustum:Wp,FrustumArray:Yp,GLBufferAttribute:Py,GLSL1:"100",GLSL3:Hc,GreaterCompare:516,GreaterDepth:6,GreaterEqualCompare:518,GreaterEqualDepth:5,GreaterEqualStencilFunc:518,GreaterStencilFunc:516,GridHelper:o_,Group:Gf,HalfFloatType:Dl,HemisphereLight:mm,HemisphereLightHelper:a_,IcosahedronGeometry:mg,ImageBitmapLoader:qm,ImageLoader:dm,ImageUtils:dh,IncrementStencilOp:7682,IncrementWrapStencilOp:34055,InstancedBufferAttribute:Mp,InstancedBufferGeometry:Bm,InstancedInterleavedBuffer:Ry,InstancedMesh:Up,Int16BufferAttribute:rf,Int32BufferAttribute:af,Int8BufferAttribute:$d,IntType:Rl,InterleavedBuffer:Yf,InterleavedBufferAttribute:Jf,Interpolant:Vg,InterpolateDiscrete:Tc,InterpolateLinear:Mc,InterpolateSmooth:Ic,InterpolationSamplingMode:{NORMAL:"normal",CENTROID:"centroid",SAMPLE:"sample",FIRST:"first",EITHER:"either"},InterpolationSamplingType:{PERSPECTIVE:"perspective",LINEAR:"linear",FLAT:"flat"},InvertStencilOp:5386,KeepStencilOp:jc,KeyframeTrack:Xg,LOD:fp,LatheGeometry:yg,Layers:ud,LessCompare:513,LessDepth:2,LessEqualCompare:515,LessEqualDepth:3,LessEqualStencilFunc:515,LessStencilFunc:513,Light:gm,LightProbe:Lm,Line:mv,Line3:Yy,LineBasicMaterial:lv,LineCurve:ig,LineCurve3:ag,LineDashedMaterial:Gg,LineLoop:Sv,LineSegments:bv,LinearFilter:xl,LinearInterpolant:Wg,LinearMipMapLinearFilter:Al,LinearMipMapNearestFilter:1007,LinearMipmapLinearFilter:Cl,LinearMipmapNearestFilter:kl,LinearSRGBColorSpace:Nc,LinearToneMapping:1,LinearTransfer:zc,Loader:am,LoaderUtils:Um,LoadingManager:nm,LoopOnce:2200,LoopPingPong:2202,LoopRepeat:2201,MOUSE:{LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Material:Wd,MaterialLoader:Fm,MathUtils:Zc,Matrix2:By,Matrix3:ih,Matrix4:Qh,MaxEquation:104,Mesh:Tf,MeshBasicMaterial:qd,MeshDepthMaterial:Bg,MeshDistanceMaterial:Ng,MeshLambertMaterial:Ug,MeshMatcapMaterial:zg,MeshNormalMaterial:Fg,MeshPhongMaterial:Dg,MeshPhysicalMaterial:Og,MeshStandardMaterial:Pg,MeshToonMaterial:Lg,MinEquation:103,MirroredRepeatWrapping:_l,MixOperation:1,MultiplyBlending:4,MultiplyOperation:0,NearestFilter:bl,NearestMipMapLinearFilter:1005,NearestMipMapNearestFilter:1004,NearestMipmapLinearFilter:wl,NearestMipmapNearestFilter:Sl,NeutralToneMapping:7,NeverCompare:512,NeverDepth:0,NeverStencilFunc:512,NoBlending:0,NoColorSpace:Uc,NoToneMapping:sl,NormalAnimationBlendMode:Dc,NormalBlending:1,NotEqualCompare:517,NotEqualDepth:7,NotEqualStencilFunc:517,NumberKeyframeTrack:Jg,Object3D:kd,ObjectLoader:Gm,ObjectSpaceNormalMap:1,OctahedronGeometry:_g,OneFactor:201,OneMinusConstantAlphaFactor:214,OneMinusConstantColorFactor:212,OneMinusDstAlphaFactor:207,OneMinusDstColorFactor:209,OneMinusSrcAlphaFactor:ol,OneMinusSrcColorFactor:203,OrthographicCamera:Mm,PCFShadowMap:$u,PCFSoftShadowMap:el,PMREMGenerator:q_,Path:hg,PerspectiveCamera:Ff,Plane:Gp,PlaneGeometry:bg,PlaneHelper:S_,PointLight:Tm,PointLightHelper:t_,Points:Ev,PointsMaterial:wv,PolarGridHelper:s_,PolyhedronGeometry:Gv,PositionalAudio:dy,PropertyBinding:wy,PropertyMixer:py,QuadraticBezierCurve:og,QuadraticBezierCurve3:sg,Quaternion:eh,QuaternionKeyframeTrack:Zg,QuaternionLinearInterpolant:Qg,RED_GREEN_RGTC2_Format:Ac,RED_RGTC1_Format:kc,REVISION:Qu,RGBADepthPacking:3201,RGBAFormat:jl,RGBAIntegerFormat:Kl,RGBA_ASTC_10x10_Format:yc,RGBA_ASTC_10x5_Format:vc,RGBA_ASTC_10x6_Format:gc,RGBA_ASTC_10x8_Format:mc,RGBA_ASTC_12x10_Format:_c,RGBA_ASTC_12x12_Format:bc,RGBA_ASTC_4x4_Format:sc,RGBA_ASTC_5x4_Format:uc,RGBA_ASTC_5x5_Format:lc,RGBA_ASTC_6x5_Format:cc,RGBA_ASTC_6x6_Format:hc,RGBA_ASTC_8x5_Format:dc,RGBA_ASTC_8x6_Format:fc,RGBA_ASTC_8x8_Format:pc,RGBA_BPTC_Format:Sc,RGBA_ETC2_EAC_Format:oc,RGBA_PVRTC_2BPPV1_Format:nc,RGBA_PVRTC_4BPPV1_Format:rc,RGBA_S3TC_DXT1_Format:Ql,RGBA_S3TC_DXT3_Format:Zl,RGBA_S3TC_DXT5_Format:$l,RGBDepthPacking:3202,RGBFormat:Gl,RGBIntegerFormat:1032,RGB_BPTC_SIGNED_Format:wc,RGB_BPTC_UNSIGNED_Format:xc,RGB_ETC1_Format:ic,RGB_ETC2_Format:ac,RGB_PVRTC_2BPPV1_Format:tc,RGB_PVRTC_4BPPV1_Format:ec,RGB_S3TC_DXT1_Format:Jl,RGDepthPacking:3203,RGFormat:Xl,RGIntegerFormat:Yl,RawShaderMaterial:Rg,Ray:Jh,Raycaster:Dy,RectAreaLight:Om,RedFormat:Wl,RedIntegerFormat:ql,ReinhardToneMapping:2,RenderTarget:_h,RenderTarget3D:Ey,RepeatWrapping:ml,ReplaceStencilOp:7681,ReverseSubtractEquation:102,RingGeometry:Sg,SIGNED_RED_GREEN_RGTC2_Format:Ec,SIGNED_RED_RGTC1_Format:Cc,SRGBColorSpace:Bc,SRGBTransfer:Gc,Scene:qf,ShaderChunk:T_,ShaderLib:I_,ShaderMaterial:Rf,ShadowMaterial:Ig,Shape:dg,ShapeGeometry:wg,ShapePath:C_,ShapeUtils:pg,ShortType:Ml,Skeleton:Tp,SkeletonHelper:e_,SkinnedMesh:xp,Source:ph,Sphere:jh,SphereGeometry:xg,Spherical:Fy,SphericalHarmonics3:Dm,SplineCurve:ug,SpotLight:xm,SpotLightHelper:Jy,Sprite:cp,SpriteMaterial:Qf,SrcAlphaFactor:al,SrcAlphaSaturateFactor:210,SrcColorFactor:202,StaticCopyUsage:35046,StaticDrawUsage:Vc,StaticReadUsage:35045,StereoCamera:Zm,StreamCopyUsage:35042,StreamDrawUsage:35040,StreamReadUsage:35041,StringKeyframeTrack:$g,SubtractEquation:101,SubtractiveBlending:3,TOUCH:{ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},TangentSpaceNormalMap:0,TetrahedronGeometry:kg,Texture:mh,TextureLoader:vm,TextureUtils:E_,Timer:Ly,TimestampQuery:{COMPUTE:"compute",RENDER:"render"},TorusGeometry:Cg,TorusKnotGeometry:Ag,Triangle:Bd,TriangleFanDrawMode:2,TriangleStripDrawMode:1,TrianglesDrawMode:0,TubeGeometry:Eg,UVMapping:hl,Uint16BufferAttribute:nf,Uint32BufferAttribute:of,Uint8BufferAttribute:ef,Uint8ClampedBufferAttribute:tf,Uniform:Ty,UniformsGroup:Iy,UniformsLib:M_,UniformsUtils:If,UnsignedByteType:El,UnsignedInt101111Type:Nl,UnsignedInt248Type:Ul,UnsignedInt5999Type:Bl,UnsignedIntType:Pl,UnsignedShort4444Type:Ll,UnsignedShort5551Type:Fl,UnsignedShortType:Il,VSMShadowMap:tl,Vector2:$c,Vector3:th,Vector4:yh,VectorKeyframeTrack:em,VideoFrameTexture:Mv,VideoTexture:Tv,WebGL3DRenderTarget:kh,WebGLArrayRenderTarget:wh,WebGLCoordinateSystem:Wc,WebGLCubeRenderTarget:zf,WebGLRenderTarget:bh,WebGLRenderer:xb,WebGLUtils:WebGLUtils,WebGPUCoordinateSystem:qc,WebXRController:Vf,WireframeGeometry:Tg,WrapAroundEnding:Oc,ZeroCurvatureEnding:Rc,ZeroFactor:200,ZeroSlopeEnding:Pc,ZeroStencilOp:0,createCanvasElement:createCanvasElement},Symbol.toStringTag,{value:"Module"}));D("aK",kb);var Cb,Ab,Eb,Tb,Mb={exports:{}},Ib={},Rb={exports:{}},Pb={};function requireShim(){return Ab||(Ab=1,Rb.exports=function(){if(Cb)return Pb;Cb=1;var e=U(),_="function"==typeof Object.is?Object.is:function(e,_){return e===_&&(0!==e||1/e==1/_)||e!=e&&_!=_},S=e.useState,k=e.useEffect,E=e.useLayoutEffect,T=e.useDebugValue;function checkIfSnapshotChanged(e){var S=e.getSnapshot;e=e.value;try{var k=S();return!_(e,k)}catch(E){return!0}}var M="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,_){return _()}:function(e,_){var M=_(),I=S({inst:{value:M,getSnapshot:_}}),R=I[0].inst,O=I[1];return E(function(){R.value=M,R.getSnapshot=_,checkIfSnapshotChanged(R)&&O({inst:R})},[e,M,_]),k(function(){return checkIfSnapshotChanged(R)&&O({inst:R}),e(function(){checkIfSnapshotChanged(R)&&O({inst:R})})},[e]),T(M),M};return Pb.useSyncExternalStore=void 0!==e.useSyncExternalStore?e.useSyncExternalStore:M,Pb}()),Rb.exports}
/**
			 * @license React
			 * use-sync-external-store-shim/with-selector.production.js
			 *
			 * Copyright (c) Meta Platforms, Inc. and affiliates.
			 *
			 * This source code is licensed under the MIT license found in the
			 * LICENSE file in the root directory of this source tree.
			 */var Ob=(Tb||(Tb=1,Mb.exports=function(){if(Eb)return Ib;Eb=1;var e=U(),_=requireShim(),S="function"==typeof Object.is?Object.is:function(e,_){return e===_&&(0!==e||1/e==1/_)||e!=e&&_!=_},k=_.useSyncExternalStore,E=e.useRef,T=e.useEffect,M=e.useMemo,I=e.useDebugValue;return Ib.useSyncExternalStoreWithSelector=function(e,_,R,O,D){var L=E(null);if(null===L.current){var U={hasValue:!1,value:null};L.current=U}else U=L.current;L=M(function(){function memoizedSelector(_){if(!E){if(E=!0,e=_,_=O(_),void 0!==D&&U.hasValue){var T=U.value;if(D(T,_))return k=T}return k=_}if(T=k,S(e,_))return T;var M=O(_);return void 0!==D&&D(T,M)?(e=_,T):(e=_,k=M)}var e,k,E=!1,T=void 0===R?null:R;return[function(){return memoizedSelector(_())},null===T?void 0:function(){return memoizedSelector(T())}]},[_,R,O,D]);var B=k(e,L[0],L[1]);return T(function(){U.hasValue=!0,U.value=B},[B]),I(B),B},Ib}()),Mb.exports),createStoreImpl=function(e){var _,S=new Set,setState=function(e,k){var E="function"==typeof e?e(_):e;if(!Object.is(E,_)){var T=_;_=(null!=k?k:"object"!==_typeof3(E)||null===E)?E:Object.assign({},_,E),S.forEach(function(e){return e(_,T)})}},getState=function(){return _},k={setState:setState,getState:getState,getInitialState:function(){return E},subscribe:function(e){return S.add(e),function(){return S.delete(e)}}},E=_=e(setState,getState,k);return k},Db=getDefaultExportFromCjs(Ob).useSyncExternalStoreWithSelector,identity$3=function(e){return e};var Lb,Fb,createWithEqualityFnImpl=function(e,_){var S=function(e){return e?createStoreImpl(e):createStoreImpl}(e),useBoundStoreWithEqualityFn=function(e){return function(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:identity$3,S=arguments.length>2?arguments[2]:void 0,k=Db(e.subscribe,e.getState,e.getInitialState,_,S);return B.useDebugValue(k),k}(S,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:_)};return Object.assign(useBoundStoreWithEqualityFn,S),useBoundStoreWithEqualityFn},Ub=(D("az",function(e,_){return e?createWithEqualityFnImpl(e,_):createWithEqualityFnImpl}),{exports:{}}),Bb={};function requireScheduler(){return Fb||(Fb=1,Ub.exports=(Lb||(Lb=1,function(e){function push(e,_){var S=e.length;e.push(_);e:for(;0<S;){var k=S-1>>>1,E=e[k];if(!(0<compare(E,_)))break e;e[k]=_,e[S]=E,S=k}}function peek(e){return 0===e.length?null:e[0]}function pop(e){if(0===e.length)return null;var _=e[0],S=e.pop();if(S!==_){e[0]=S;e:for(var k=0,E=e.length,T=E>>>1;k<T;){var M=2*(k+1)-1,I=e[M],R=M+1,O=e[R];if(0>compare(I,S))R<E&&0>compare(O,I)?(e[k]=O,e[R]=S,k=R):(e[k]=I,e[M]=S,k=M);else{if(!(R<E&&0>compare(O,S)))break e;e[k]=O,e[R]=S,k=R}}}return _}function compare(e,_){var S=e.sortIndex-_.sortIndex;return 0!==S?S:e.id-_.id}if(e.unstable_now=void 0,"object"===("undefined"==typeof performance?"undefined":_typeof3(performance))&&"function"==typeof performance.now){var _=performance;e.unstable_now=function(){return _.now()}}else{var S=Date,k=S.now();e.unstable_now=function(){return S.now()-k}}var E=[],T=[],M=1,I=null,R=3,O=!1,D=!1,L=!1,U="function"==typeof setTimeout?setTimeout:null,B="function"==typeof clearTimeout?clearTimeout:null,z="undefined"!=typeof setImmediate?setImmediate:null;function advanceTimers(e){for(var _=peek(T);null!==_;){if(null===_.callback)pop(T);else{if(!(_.startTime<=e))break;pop(T),_.sortIndex=_.expirationTime,push(E,_)}_=peek(T)}}function handleTimeout(e){if(L=!1,advanceTimers(e),!D)if(null!==peek(E))D=!0,requestHostCallback();else{var _=peek(T);null!==_&&requestHostTimeout(handleTimeout,_.startTime-e)}}var G,j=!1,V=-1,H=5,W=-1;function shouldYieldToHost(){return!(e.unstable_now()-W<H)}function performWorkUntilDeadline(){if(j){var _=e.unstable_now();W=_;var S=!0;try{e:{D=!1,L&&(L=!1,B(V),V=-1),O=!0;var k=R;try{t:{for(advanceTimers(_),I=peek(E);null!==I&&!(I.expirationTime>_&&shouldYieldToHost());){var M=I.callback;if("function"==typeof M){I.callback=null,R=I.priorityLevel;var U=M(I.expirationTime<=_);if(_=e.unstable_now(),"function"==typeof U){I.callback=U,advanceTimers(_),S=!0;break t}I===peek(E)&&pop(E),advanceTimers(_)}else pop(E);I=peek(E)}if(null!==I)S=!0;else{var z=peek(T);null!==z&&requestHostTimeout(handleTimeout,z.startTime-_),S=!1}}break e}finally{I=null,R=k,O=!1}S=void 0}}finally{S?G():j=!1}}}if("function"==typeof z)G=function(){z(performWorkUntilDeadline)};else if("undefined"!=typeof MessageChannel){var q=new MessageChannel,X=q.port2;q.port1.onmessage=performWorkUntilDeadline,G=function(){X.postMessage(null)}}else G=function(){U(performWorkUntilDeadline,0)};function requestHostCallback(){j||(j=!0,G())}function requestHostTimeout(_,S){V=U(function(){_(e.unstable_now())},S)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_continueExecution=function(){D||O||(D=!0,requestHostCallback())},e.unstable_forceFrameRate=function(e){0>e||125<e||(H=0<e?Math.floor(1e3/e):5)},e.unstable_getCurrentPriorityLevel=function(){return R},e.unstable_getFirstCallbackNode=function(){return peek(E)},e.unstable_next=function(e){switch(R){case 1:case 2:case 3:var _=3;break;default:_=R}var S=R;R=_;try{return e()}finally{R=S}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(e,_){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var S=R;R=e;try{return _()}finally{R=S}},e.unstable_scheduleCallback=function(_,S,k){var I=e.unstable_now();switch(k="object"===_typeof3(k)&&null!==k&&"number"==typeof(k=k.delay)&&0<k?I+k:I,_){case 1:var R=-1;break;case 2:R=250;break;case 5:R=1073741823;break;case 4:R=1e4;break;default:R=5e3}return _={id:M++,callback:S,priorityLevel:_,startTime:k,expirationTime:R=k+R,sortIndex:-1},k>I?(_.sortIndex=k,push(T,_),null===peek(E)&&_===peek(T)&&(L?(B(V),V=-1):L=!0,requestHostTimeout(handleTimeout,k-I))):(_.sortIndex=R,push(E,_),D||O||(D=!0,requestHostCallback())),_},e.unstable_shouldYield=shouldYieldToHost,e.unstable_wrapCallback=function(e){var _=R;return function(){var S=R;R=_;try{return e.apply(this,arguments)}finally{R=S}}}}(Bb)),Bb)),Ub.exports}D("aI",requireScheduler());function i$1(e,_,S){if(e){if(!0===S(e))return e;for(var k=_?e.return:e.child;k;){var E=i$1(k,_,S);if(E)return E;k=_?null:k.sibling}}}function l(e){try{return Object.defineProperties(e,{_currentRenderer:{get:function(){return null},set:function(){}},_currentRenderer2:{get:function(){return null},set:function(){}}})}catch(t){return e}}var Nb=l(z.createContext(null)),zb=function(e){function m(){return _classCallCheck3(this,m),_callSuper(this,m,arguments)}return _inherits(m,e),_createClass3(m,[{key:"render",value:function(){return z.createElement(Nb.Provider,{value:this._reactInternals},this.props.children)}}])}(z.Component);function c(){var e=z.useContext(Nb);if(null===e)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");var _=z.useId();return z.useMemo(function(){for(var S=0,k=[e,null==e?void 0:e.alternate];S<k.length;S++){var E=k[S];if(E){var T=i$1(E,!1,function(e){for(var S=e.memoizedState;S;){if(S.memoizedState===_)return!0;S=S.next}});if(T)return T}}},[e,_])}D("aJ",zb);var Gb=Symbol.for("react.context"),b=function(e){return null!==e&&"object"==_typeof3(e)&&"$$typeof"in e&&e.$$typeof===Gb};function _extends(){return D("aS",_extends=Object.assign?Object.assign.bind():function(e){for(var _=1;_<arguments.length;_++){var S=arguments[_];for(var k in S)({}).hasOwnProperty.call(S,k)&&(e[k]=S[k])}return e}),_extends.apply(null,arguments)}var jb=function(){return parseInt(Qu.replace(/\D+/g,""))}(),Vb=Uint8Array,Hb=Uint16Array,Wb=Uint32Array,qb=new Vb([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Xb=new Vb([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Yb=new Vb([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),freb=function(e,_){for(var S=new Hb(31),k=0;k<31;++k)S[k]=_+=1<<e[k-1];var E=new Wb(S[30]);for(k=1;k<30;++k)for(var T=S[k];T<S[k+1];++T)E[T]=T-S[k]<<5|k;return[S,E]},Kb=freb(qb,2),Jb=Kb[0],Qb=Kb[1];Jb[28]=258,Qb[258]=28;for(var Zb=freb(Xb,0)[0],$b=new Hb(32768),eS=0;eS<32768;++eS){var tS=(43690&eS)>>>1|(21845&eS)<<1;tS=(61680&(tS=(52428&tS)>>>2|(13107&tS)<<2))>>>4|(3855&tS)<<4,$b[eS]=((65280&tS)>>>8|(255&tS)<<8)>>>1}var hMap=function(e,_,S){for(var k=e.length,E=0,T=new Hb(_);E<k;++E)++T[e[E]-1];var M,I=new Hb(_);for(E=0;E<_;++E)I[E]=I[E-1]+T[E-1]<<1;if(S){M=new Hb(1<<_);var R=15-_;for(E=0;E<k;++E)if(e[E])for(var O=E<<4|e[E],D=_-e[E],L=I[e[E]-1]++<<D,U=L|(1<<D)-1;L<=U;++L)M[$b[L]>>>R]=O}else for(M=new Hb(k),E=0;E<k;++E)e[E]&&(M[E]=$b[I[e[E]-1]++]>>>15-e[E]);return M},rS=new Vb(288);for(eS=0;eS<144;++eS)rS[eS]=8;for(eS=144;eS<256;++eS)rS[eS]=9;for(eS=256;eS<280;++eS)rS[eS]=7;for(eS=280;eS<288;++eS)rS[eS]=8;var nS=new Vb(32);for(eS=0;eS<32;++eS)nS[eS]=5;var iS=hMap(rS,9,1),aS=hMap(nS,5,1),max=function(e){for(var _=e[0],S=1;S<e.length;++S)e[S]>_&&(_=e[S]);return _},bits=function(e,_,S){var k=_/8|0;return(e[k]|e[k+1]<<8)>>(7&_)&S},bits16=function(e,_){var S=_/8|0;return(e[S]|e[S+1]<<8|e[S+2]<<16)>>(7&_)},shft=function(e){return(e/8|0)+(7&e&&1)},inflt=function(e,_,S){var k=e.length;if(!k||S&&!S.l&&k<5)return _||new Vb(0);var E=!_||S,T=!S||S.i;S||(S={}),_||(_=new Vb(3*k));var cbuf=function(e){var S=_.length;if(e>S){var k=new Vb(Math.max(2*S,e));k.set(_),_=k}},M=S.f||0,I=S.p||0,R=S.b||0,O=S.l,D=S.d,L=S.m,U=S.n,B=8*k;do{if(!O){S.f=M=bits(e,I,1);var z=bits(e,I+1,3);if(I+=3,!z){var G=e[(Z=shft(I)+4)-4]|e[Z-3]<<8,j=Z+G;if(j>k){if(T)throw"unexpected EOF";break}E&&cbuf(R+G),_.set(e.subarray(Z,j),R),S.b=R+=G,S.p=I=8*j;continue}if(1==z)O=iS,D=aS,L=9,U=5;else{if(2!=z)throw"invalid block type";var V=bits(e,I,31)+257,H=bits(e,I+10,15)+4,W=V+bits(e,I+5,31)+1;I+=14;for(var q=new Vb(W),X=new Vb(19),Y=0;Y<H;++Y)X[Yb[Y]]=bits(e,I+3*Y,7);I+=3*H;var K=max(X),J=(1<<K)-1,Q=hMap(X,K,1);for(Y=0;Y<W;){var Z,$=Q[bits(e,I,J)];if(I+=15&$,(Z=$>>>4)<16)q[Y++]=Z;else{var ee=0,te=0;for(16==Z?(te=3+bits(e,I,3),I+=2,ee=q[Y-1]):17==Z?(te=3+bits(e,I,7),I+=3):18==Z&&(te=11+bits(e,I,127),I+=7);te--;)q[Y++]=ee}}var re=q.subarray(0,V),ne=q.subarray(V);L=max(re),U=max(ne),O=hMap(re,L,1),D=hMap(ne,U,1)}if(I>B){if(T)throw"unexpected EOF";break}}E&&cbuf(R+131072);for(var ie=(1<<L)-1,ae=(1<<U)-1,oe=I;;oe=I){var se=(ee=O[bits16(e,I)&ie])>>>4;if((I+=15&ee)>B){if(T)throw"unexpected EOF";break}if(!ee)throw"invalid length/literal";if(se<256)_[R++]=se;else{if(256==se){oe=I,O=null;break}var ue=se-254;if(se>264){var le=qb[Y=se-257];ue=bits(e,I,(1<<le)-1)+Jb[Y],I+=le}var ce=D[bits16(e,I)&ae],he=ce>>>4;if(!ce)throw"invalid distance";I+=15&ce;ne=Zb[he];if(he>3){le=Xb[he];ne+=bits16(e,I)&(1<<le)-1,I+=le}if(I>B){if(T)throw"unexpected EOF";break}E&&cbuf(R+131072);for(var de=R+ue;R<de;R+=4)_[R]=_[R-ne],_[R+1]=_[R+1-ne],_[R+2]=_[R+2-ne],_[R+3]=_[R+3-ne];R=de}}S.l=O,S.p=oe,S.b=R,O&&(M=1,S.m=L,S.d=D,S.n=U)}while(!M);return R==_.length?_:function(e,_,S){(null==S||S>e.length)&&(S=e.length);var k=new(e instanceof Hb?Hb:e instanceof Wb?Wb:Vb)(S-_);return k.set(e.subarray(_,S)),k}(_,0,R)},oS=new Vb(0);function unzlibSync(e,_){return inflt((function(e){if(8!=(15&e[0])||e[0]>>>4>7||(e[0]<<8|e[1])%31)throw"invalid zlib data";if(32&e[1])throw"invalid zlib data: preset dictionaries not supported"}(e),e.subarray(2,-4)),_)}var sS="undefined"!=typeof TextDecoder&&new TextDecoder;try{sS.decode(oS,{stream:!0})}catch(fo){}var uS=function(e){function GroundProjectedEnv(e,_){var S,k;_classCallCheck3(this,GroundProjectedEnv);var E,T=(E=e)&&E.isCubeTexture,M=(null!=(k=T?null==(S=e.image[0])?void 0:S.width:e.image.width)?k:1024)/4,I=Math.floor(Math.log2(M)),R=Math.pow(2,I),O=3*Math.max(R,112),D=4*R,L=[T?"#define ENVMAP_TYPE_CUBE":"","#define CUBEUV_TEXEL_WIDTH ".concat(1/O),"#define CUBEUV_TEXEL_HEIGHT ".concat(1/D),"#define CUBEUV_MAX_MIP ".concat(I,".0")].join("\n")+"\n        #define ENVMAP_TYPE_CUBE_UV\n        varying vec3 vWorldPosition;\n        uniform float radius;\n        uniform float height;\n        uniform float angle;\n        #ifdef ENVMAP_TYPE_CUBE\n            uniform samplerCube map;\n        #else\n            uniform sampler2D map;\n        #endif\n        // From: https://www.shadertoy.com/view/4tsBD7\n        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) \n        {\n            float d = dot ( rd, n );\n            \n            if( d > 0.0 ) { return 1e6; }\n            \n            vec3  o = ro - c;\n            float t = - dot( n, o ) / d;\n            vec3  q = o + rd * t;\n            \n            return ( dot( q, q ) < r * r ) ? t : 1e6;\n        }\n        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm\n        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) \n        {\n            vec3 oc = ro - ce;\n            float b = dot( oc, rd );\n            float c = dot( oc, oc ) - ra * ra;\n            float h = b * b - c;\n            \n            if( h < 0.0 ) { return -1.0; }\n            \n            h = sqrt( h );\n            \n            return - b + h;\n        }\n        vec3 project() \n        {\n            vec3 p = normalize( vWorldPosition );\n            vec3 camPos = cameraPosition;\n            camPos.y -= height;\n            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );\n            if( intersection > 0.0 ) {\n                \n                vec3 h = vec3( 0.0, - height, 0.0 );\n                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );\n                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;\n            } else {\n                p = vec3( 0.0, 1.0, 0.0 );\n            }\n            return p;\n        }\n        #include <common>\n        #include <cube_uv_reflection_fragment>\n        void main() \n        {\n            vec3 projectedWorldPosition = project();\n            \n            #ifdef ENVMAP_TYPE_CUBE\n                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;\n            #else\n                vec3 direction = normalize( projectedWorldPosition );\n                vec2 uv = equirectUv( direction );\n                vec3 outcolor = texture2D( map, uv ).rgb;\n            #endif\n            gl_FragColor = vec4( outcolor, 1.0 );\n            #include <tonemapping_fragment>\n            #include <".concat(jb>=154?"colorspace_fragment":"encodings_fragment",">\n        }\n        "),U={map:{value:e},height:{value:(null==_?void 0:_.height)||15},radius:{value:(null==_?void 0:_.radius)||100}};return _callSuper(this,GroundProjectedEnv,[new mg(1,16),new Rf({uniforms:U,fragmentShader:L,vertexShader:"\n        varying vec3 vWorldPosition;\n        void main() \n        {\n            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );\n            vWorldPosition = worldPosition.xyz;\n            \n            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n        }\n        ",side:nl})])}return _inherits(GroundProjectedEnv,e),_createClass3(GroundProjectedEnv,[{key:"radius",get:function(){return this.material.uniforms.radius.value},set:function(e){this.material.uniforms.radius.value=e}},{key:"height",get:function(){return this.material.uniforms.height.value},set:function(e){this.material.uniforms.height.value=e}}])}(Tf);D("aV",uS);var lS=function(e){function RGBELoader(e){var _;return _classCallCheck3(this,RGBELoader),(_=_callSuper(this,RGBELoader,[e])).type=Dl,_}return _inherits(RGBELoader,e),_createClass3(RGBELoader,[{key:"parse",value:function(e){var rgbe_error=function(e,_){switch(e){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(_||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(_||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(_||""));default:throw new Error("THREE.RGBELoader: Memory Error: "+(_||""))}},fgets=function(e,_,S){_=_||1024;for(var k=e.pos,E=-1,T=0,M="",I=String.fromCharCode.apply(null,new Uint16Array(e.subarray(k,k+128)));0>(E=I.indexOf("\n"))&&T<_&&k<e.byteLength;)M+=I,T+=I.length,k+=128,I+=String.fromCharCode.apply(null,new Uint16Array(e.subarray(k,k+128)));return-1<E&&(e.pos+=T+E+1,M+I.slice(0,E))},RGBEByteToRGBFloat=function(e,_,S,k){var E=e[_+3],T=Math.pow(2,E-128)/255;S[k+0]=e[_+0]*T,S[k+1]=e[_+1]*T,S[k+2]=e[_+2]*T,S[k+3]=1},RGBEByteToRGBHalf=function(e,_,S,k){var E=e[_+3],T=Math.pow(2,E-128)/255;S[k+0]=Yd.toHalfFloat(Math.min(e[_+0]*T,65504)),S[k+1]=Yd.toHalfFloat(Math.min(e[_+1]*T,65504)),S[k+2]=Yd.toHalfFloat(Math.min(e[_+2]*T,65504)),S[k+3]=Yd.toHalfFloat(1)},_=new Uint8Array(e);_.pos=0;var S,k,E,T=function(e){var _,S,k=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,E=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,T=/^\s*FORMAT=(\S+)\s*$/,M=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,I={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};for((e.pos>=e.byteLength||!(_=fgets(e)))&&rgbe_error(1,"no header found"),(S=_.match(/^#\?(\S+)/))||rgbe_error(3,"bad initial token"),I.valid|=1,I.programtype=S[1],I.string+=_+"\n";!1!==(_=fgets(e));)if(I.string+=_+"\n","#"!==_.charAt(0)){if((S=_.match(k))&&(I.gamma=parseFloat(S[1])),(S=_.match(E))&&(I.exposure=parseFloat(S[1])),(S=_.match(T))&&(I.valid|=2,I.format=S[1]),(S=_.match(M))&&(I.valid|=4,I.height=parseInt(S[1],10),I.width=parseInt(S[2],10)),2&I.valid&&4&I.valid)break}else I.comments+=_+"\n";return 2&I.valid||rgbe_error(3,"missing format specifier"),4&I.valid||rgbe_error(3,"missing image size specifier"),I}(_),M=T.width,I=T.height,R=function(e,_,S){var k=_;if(k<8||k>32767||2!==e[0]||2!==e[1]||128&e[2])return new Uint8Array(e);k!==(e[2]<<8|e[3])&&rgbe_error(3,"wrong scanline width");var E=new Uint8Array(4*_*S);E.length||rgbe_error(4,"unable to allocate buffer space");for(var T=0,M=0,I=4*k,R=new Uint8Array(4),O=new Uint8Array(I),D=S;D>0&&M<e.byteLength;){M+4>e.byteLength&&rgbe_error(1),R[0]=e[M++],R[1]=e[M++],R[2]=e[M++],R[3]=e[M++],2==R[0]&&2==R[1]&&(R[2]<<8|R[3])==k||rgbe_error(3,"bad rgbe scanline format");for(var L=0,U=void 0;L<I&&M<e.byteLength;){var B=(U=e[M++])>128;if(B&&(U-=128),(0===U||L+U>I)&&rgbe_error(3,"bad scanline data"),B)for(var z=e[M++],G=0;G<U;G++)O[L++]=z;else O.set(e.subarray(M,M+U),L),L+=U,M+=U}for(var j=k,V=0;V<j;V++){var H=0;E[T]=O[V+H],H+=k,E[T+1]=O[V+H],H+=k,E[T+2]=O[V+H],H+=k,E[T+3]=O[V+H],T+=4}D--}return E}(_.subarray(_.pos),M,I);switch(this.type){case Ol:E=R.length/4;for(var O=new Float32Array(4*E),D=0;D<E;D++)RGBEByteToRGBFloat(R,4*D,O,4*D);S=O,k=Ol;break;case Dl:E=R.length/4;for(var L=new Uint16Array(4*E),U=0;U<E;U++)RGBEByteToRGBHalf(R,4*U,L,4*U);S=L,k=Dl;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:M,height:I,data:S,header:T.string,gamma:T.gamma,exposure:T.exposure,type:k}}},{key:"setDataType",value:function(e){return this.type=e,this}},{key:"load",value:function(e,_,S,k){return _superPropGet(RGBELoader,"load",this,3)([e,function(e,S){switch(e.type){case Ol:case Dl:"colorSpace"in e?e.colorSpace="srgb-linear":e.encoding=3e3,e.minFilter=xl,e.magFilter=xl,e.generateMipmaps=!1,e.flipY=!0}_&&_(e,S)},S,k])}}])}(pm);D("aO",lS);var cS=jb>=152,hS=function(e){function EXRLoader(e){var _;return _classCallCheck3(this,EXRLoader),(_=_callSuper(this,EXRLoader,[e])).type=Dl,_}return _inherits(EXRLoader,e),_createClass3(EXRLoader,[{key:"parse",value:function(e){var _=65536,S=14,k=65537,E=16384,T=Math.pow(2.7182818,2.2);var M={l:0,c:0,lc:0};function getBits(e,_,S,k,E){for(;S<e;)_=_<<8|parseUint8Array(k,E),S+=8;S-=e,M.l=_>>S&(1<<e)-1,M.c=_,M.lc=S}var I=new Array(59);function hufUnpackEncTable(e,_,S,E,T,R,O){for(var D=S,L=0,U=0;T<=R;T++){if(D.value-S.value>E)return!1;getBits(6,L,U,e,D);var B=M.l;if(L=M.c,U=M.lc,O[T]=B,63==B){if(D.value-S.value>E)throw"Something wrong with hufUnpackEncTable";getBits(8,L,U,e,D);var z=M.l+6;if(L=M.c,U=M.lc,T+z>R+1)throw"Something wrong with hufUnpackEncTable";for(;z--;)O[T++]=0;T--}else if(B>=59){if(T+(z=B-59+2)>R+1)throw"Something wrong with hufUnpackEncTable";for(;z--;)O[T++]=0;T--}}!function(e){for(var _=0;_<=58;++_)I[_]=0;for(_=0;_<k;++_)I[e[_]]+=1;var S=0;for(_=58;_>0;--_){var E=S+I[_]>>1;I[_]=S,S=E}for(_=0;_<k;++_){var T=e[_];T>0&&(e[_]=T|I[T]++<<6)}}(O)}function hufLength(e){return 63&e}function hufCode(e){return e>>6}var R={c:0,lc:0};function getChar(e,_,S,k){e=e<<8|parseUint8Array(S,k),_+=8,R.c=e,R.lc=_}var O={c:0,lc:0};function getCode(e,_,S,k,E,T,M,I,D,L){if(e==_){k<8&&(getChar(S,k,E,M),S=R.c,k=R.lc);var U=S>>(k-=8);U=new Uint8Array([U])[0];if(D.value+U>L)return!1;for(var B=I[D.value-1];U-- >0;)I[D.value++]=B}else{if(!(D.value<L))return!1;I[D.value++]=e}O.c=S,O.lc=k}function UInt16(e){return 65535&e}function Int16(e){var _=UInt16(e);return _>32767?_-65536:_}var D={a:0,b:0};function wdec14(e,_){var S=Int16(e),k=Int16(_),E=S+(1&k)+(k>>1),T=E,M=E-k;D.a=T,D.b=M}function wdec16(e,_){var S=UInt16(e),k=UInt16(_),E=S-(k>>1)&65535,T=k+E-32768&65535;D.a=T,D.b=E}function wav2Decode(e,_,S,k,E,T,M){for(var I,R=M<16384,O=S>E?E:S,L=1;L<=O;)L<<=1;for(I=L>>=1,L>>=1;L>=1;){for(var U,B,z,G,j=0,V=j+T*(E-I),H=T*L,W=T*I,q=k*L,X=k*I;j<=V;j+=W){for(var Y=j,K=j+k*(S-I);Y<=K;Y+=X){var J=Y+q,Q=(Z=Y+H)+q;R?(wdec14(e[Y+_],e[Z+_]),U=D.a,z=D.b,wdec14(e[J+_],e[Q+_]),B=D.a,G=D.b,wdec14(U,B),e[Y+_]=D.a,e[J+_]=D.b,wdec14(z,G),e[Z+_]=D.a,e[Q+_]=D.b):(wdec16(e[Y+_],e[Z+_]),U=D.a,z=D.b,wdec16(e[J+_],e[Q+_]),B=D.a,G=D.b,wdec16(U,B),e[Y+_]=D.a,e[J+_]=D.b,wdec16(z,G),e[Z+_]=D.a,e[Q+_]=D.b)}if(S&L){var Z=Y+H;R?wdec14(e[Y+_],e[Z+_]):wdec16(e[Y+_],e[Z+_]),U=D.a,e[Z+_]=D.b,e[Y+_]=U}}if(E&L)for(Y=j,K=j+k*(S-I);Y<=K;Y+=X){J=Y+q;R?wdec14(e[Y+_],e[J+_]):wdec16(e[Y+_],e[J+_]),U=D.a,e[J+_]=D.b,e[Y+_]=U}I=L,L>>=1}return j}function hufUncompress(e,_,T,M,I,D){var L=T.value,U=parseUint32(_,T),B=parseUint32(_,T);T.value+=4;var z=parseUint32(_,T);if(T.value+=4,U<0||U>=k||B<0||B>=k)throw"Something wrong with HUF_ENCSIZE";var G=new Array(k),j=new Array(E);if(function(e){for(var _=0;_<E;_++)e[_]={},e[_].len=0,e[_].lit=0,e[_].p=null}(j),hufUnpackEncTable(e,0,T,M-(T.value-L),U,B,G),z>8*(M-(T.value-L)))throw"Something wrong with hufUncompress";!function(e,_,k,E){for(;_<=k;_++){var T=hufCode(e[_]),M=hufLength(e[_]);if(T>>M)throw"Invalid table entry";if(M>S){if((D=E[T>>M-S]).len)throw"Invalid table entry";if(D.lit++,D.p){var I=D.p;D.p=new Array(D.lit);for(var R=0;R<D.lit-1;++R)D.p[R]=I[R]}else D.p=new Array(1);D.p[D.lit-1]=_}else if(M){var O=0;for(R=1<<S-M;R>0;R--){var D;if((D=E[(T<<S-M)+O]).len||D.p)throw"Invalid table entry";D.len=M,D.lit=_,O++}}}}(G,U,B,j),function(e,_,k,E,T,M,I,D,L,U){for(var B=0,z=0,G=D,j=Math.trunc(T.value+(M+7)/8);T.value<j;)for(getChar(B,z,k,T),B=R.c,z=R.lc;z>=S;)if((q=_[B>>z-S&16383]).len)z-=q.len,getCode(q.lit,I,B,z,k,0,T,L,U,G),B=O.c,z=O.lc;else{if(!q.p)throw"hufDecode issues";var V;for(V=0;V<q.lit;V++){for(var H=hufLength(e[q.p[V]]);z<H&&T.value<j;)getChar(B,z,k,T),B=R.c,z=R.lc;if(z>=H&&hufCode(e[q.p[V]])==(B>>z-H&(1<<H)-1)){z-=H,getCode(q.p[V],I,B,z,k,0,T,L,U,G),B=O.c,z=O.lc;break}}if(V==q.lit)throw"hufDecode issues"}var W=8-M&7;for(B>>=W,z-=W;z>0;){var q;if(!(q=_[B<<S-z&16383]).len)throw"hufDecode issues";z-=q.len,getCode(q.lit,I,B,z,k,0,T,L,U,G),B=O.c,z=O.lc}}(G,j,e,0,T,z,B,D,I,{value:0})}function predictor(e){for(var _=1;_<e.length;_++){var S=e[_-1]+e[_]-128;e[_]=S}}function interleaveScalar(e,_){for(var S=0,k=Math.floor((e.length+1)/2),E=0,T=e.length-1;!(E>T||(_[E++]=e[S++],E>T));)_[E++]=e[k++]}function decodeRunLength(e){for(var _=e.byteLength,S=new Array,k=0,E=new DataView(e);_>0;){var T=E.getInt8(k++);if(T<0){_-=(I=-T)+1;for(var M=0;M<I;M++)S.push(E.getUint8(k++))}else{var I=T;_-=2;var R=E.getUint8(k++);for(M=0;M<I+1;M++)S.push(R)}}return S}function unRleAC(e,_,S){for(var k,E=1;E<64;)65280==(k=_[e.value])?E=64:k>>8==255?E+=255&k:(S[E]=k,E++),e.value++}function unZigZag(e,_){_[0]=decodeFloat16(e[0]),_[1]=decodeFloat16(e[1]),_[2]=decodeFloat16(e[5]),_[3]=decodeFloat16(e[6]),_[4]=decodeFloat16(e[14]),_[5]=decodeFloat16(e[15]),_[6]=decodeFloat16(e[27]),_[7]=decodeFloat16(e[28]),_[8]=decodeFloat16(e[2]),_[9]=decodeFloat16(e[4]),_[10]=decodeFloat16(e[7]),_[11]=decodeFloat16(e[13]),_[12]=decodeFloat16(e[16]),_[13]=decodeFloat16(e[26]),_[14]=decodeFloat16(e[29]),_[15]=decodeFloat16(e[42]),_[16]=decodeFloat16(e[3]),_[17]=decodeFloat16(e[8]),_[18]=decodeFloat16(e[12]),_[19]=decodeFloat16(e[17]),_[20]=decodeFloat16(e[25]),_[21]=decodeFloat16(e[30]),_[22]=decodeFloat16(e[41]),_[23]=decodeFloat16(e[43]),_[24]=decodeFloat16(e[9]),_[25]=decodeFloat16(e[11]),_[26]=decodeFloat16(e[18]),_[27]=decodeFloat16(e[24]),_[28]=decodeFloat16(e[31]),_[29]=decodeFloat16(e[40]),_[30]=decodeFloat16(e[44]),_[31]=decodeFloat16(e[53]),_[32]=decodeFloat16(e[10]),_[33]=decodeFloat16(e[19]),_[34]=decodeFloat16(e[23]),_[35]=decodeFloat16(e[32]),_[36]=decodeFloat16(e[39]),_[37]=decodeFloat16(e[45]),_[38]=decodeFloat16(e[52]),_[39]=decodeFloat16(e[54]),_[40]=decodeFloat16(e[20]),_[41]=decodeFloat16(e[22]),_[42]=decodeFloat16(e[33]),_[43]=decodeFloat16(e[38]),_[44]=decodeFloat16(e[46]),_[45]=decodeFloat16(e[51]),_[46]=decodeFloat16(e[55]),_[47]=decodeFloat16(e[60]),_[48]=decodeFloat16(e[21]),_[49]=decodeFloat16(e[34]),_[50]=decodeFloat16(e[37]),_[51]=decodeFloat16(e[47]),_[52]=decodeFloat16(e[50]),_[53]=decodeFloat16(e[56]),_[54]=decodeFloat16(e[59]),_[55]=decodeFloat16(e[61]),_[56]=decodeFloat16(e[35]),_[57]=decodeFloat16(e[36]),_[58]=decodeFloat16(e[48]),_[59]=decodeFloat16(e[49]),_[60]=decodeFloat16(e[57]),_[61]=decodeFloat16(e[58]),_[62]=decodeFloat16(e[62]),_[63]=decodeFloat16(e[63])}function dctInverse(e){for(var _=.5*Math.cos(.7853975),S=.5*Math.cos(3.14159/16),k=.5*Math.cos(3.14159/8),E=.5*Math.cos(3*3.14159/16),T=.5*Math.cos(.981746875),M=.5*Math.cos(3*3.14159/8),I=.5*Math.cos(1.374445625),R=new Array(4),O=new Array(4),D=new Array(4),L=new Array(4),U=0;U<8;++U){var B=8*U;R[0]=k*e[B+2],R[1]=M*e[B+2],R[2]=k*e[B+6],R[3]=M*e[B+6],O[0]=S*e[B+1]+E*e[B+3]+T*e[B+5]+I*e[B+7],O[1]=E*e[B+1]-I*e[B+3]-S*e[B+5]-T*e[B+7],O[2]=T*e[B+1]-S*e[B+3]+I*e[B+5]+E*e[B+7],O[3]=I*e[B+1]-T*e[B+3]+E*e[B+5]-S*e[B+7],D[0]=_*(e[B+0]+e[B+4]),D[3]=_*(e[B+0]-e[B+4]),D[1]=R[0]+R[3],D[2]=R[1]-R[2],L[0]=D[0]+D[1],L[1]=D[3]+D[2],L[2]=D[3]-D[2],L[3]=D[0]-D[1],e[B+0]=L[0]+O[0],e[B+1]=L[1]+O[1],e[B+2]=L[2]+O[2],e[B+3]=L[3]+O[3],e[B+4]=L[3]-O[3],e[B+5]=L[2]-O[2],e[B+6]=L[1]-O[1],e[B+7]=L[0]-O[0]}for(var z=0;z<8;++z)R[0]=k*e[16+z],R[1]=M*e[16+z],R[2]=k*e[48+z],R[3]=M*e[48+z],O[0]=S*e[8+z]+E*e[24+z]+T*e[40+z]+I*e[56+z],O[1]=E*e[8+z]-I*e[24+z]-S*e[40+z]-T*e[56+z],O[2]=T*e[8+z]-S*e[24+z]+I*e[40+z]+E*e[56+z],O[3]=I*e[8+z]-T*e[24+z]+E*e[40+z]-S*e[56+z],D[0]=_*(e[z]+e[32+z]),D[3]=_*(e[z]-e[32+z]),D[1]=R[0]+R[3],D[2]=R[1]-R[2],L[0]=D[0]+D[1],L[1]=D[3]+D[2],L[2]=D[3]-D[2],L[3]=D[0]-D[1],e[0+z]=L[0]+O[0],e[8+z]=L[1]+O[1],e[16+z]=L[2]+O[2],e[24+z]=L[3]+O[3],e[32+z]=L[3]-O[3],e[40+z]=L[2]-O[2],e[48+z]=L[1]-O[1],e[56+z]=L[0]-O[0]}function csc709Inverse(e){for(var _=0;_<64;++_){var S=e[0][_],k=e[1][_],E=e[2][_];e[0][_]=S+1.5747*E,e[1][_]=S-.1873*k-.4682*E,e[2][_]=S+1.8556*k}}function convertToHalf(e,_,S){for(var k=0;k<64;++k)_[S+k]=Yd.toHalfFloat(toLinear(e[k]))}function toLinear(e){return e<=1?Math.sign(e)*Math.pow(Math.abs(e),2.2):Math.sign(e)*Math.pow(T,Math.abs(e)-1)}function uncompressRAW(e){return new DataView(e.array.buffer,e.offset.value,e.size)}function uncompressRLE(e){var _=e.viewer.buffer.slice(e.offset.value,e.offset.value+e.size),S=new Uint8Array(decodeRunLength(_)),k=new Uint8Array(S.length);return predictor(S),interleaveScalar(S,k),new DataView(k.buffer)}function uncompressZIP(e){var _=unzlibSync(e.array.slice(e.offset.value,e.offset.value+e.size)),S=new Uint8Array(_.length);return predictor(_),interleaveScalar(_,S),new DataView(S.buffer)}function uncompressPIZ(e){for(var S=e.viewer,k={value:e.offset.value},E=new Uint16Array(e.width*e.scanlineBlockSize*(e.channels*e.type)),T=new Uint8Array(8192),M=0,I=new Array(e.channels),R=0;R<e.channels;R++)I[R]={},I[R].start=M,I[R].end=I[R].start,I[R].nx=e.width,I[R].ny=e.lines,I[R].size=e.type,M+=I[R].nx*I[R].ny*I[R].size;var O=parseUint16(S,k),D=parseUint16(S,k);if(D>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(O<=D)for(R=0;R<D-O+1;R++)T[R+O]=parseUint8(S,k);var L=new Uint16Array(_),U=function(e,S){for(var k=0,E=0;E<_;++E)(0==E||e[E>>3]&1<<(7&E))&&(S[k++]=E);for(var T=k-1;k<_;)S[k++]=0;return T}(T,L),B=parseUint32(S,k);hufUncompress(e.array,S,k,B,E,M);for(R=0;R<e.channels;++R)for(var z=I[R],G=0;G<I[R].size;++G)wav2Decode(E,z.start+G,z.nx,z.size,z.ny,z.nx*z.size,U);!function(e,_,S){for(var k=0;k<S;++k)_[k]=e[_[k]]}(L,E,M);for(var j=0,V=new Uint8Array(E.buffer.byteLength),H=0;H<e.lines;H++)for(var W=0;W<e.channels;W++){var q=(z=I[W]).nx*z.size,X=new Uint8Array(E.buffer,2*z.end,2*q);V.set(X,j),j+=2*q,z.end+=q}return new DataView(V.buffer)}function uncompressPXR(e){for(var _=unzlibSync(e.array.slice(e.offset.value,e.offset.value+e.size)),S=e.lines*e.channels*e.width,k=1==e.type?new Uint16Array(S):new Uint32Array(S),E=0,T=0,M=new Array(4),I=0;I<e.lines;I++)for(var R=0;R<e.channels;R++){var O=0;switch(e.type){case 1:M[0]=E,M[1]=M[0]+e.width,E=M[1]+e.width;for(var D=0;D<e.width;++D){O+=_[M[0]++]<<8|_[M[1]++],k[T]=O,T++}break;case 2:M[0]=E,M[1]=M[0]+e.width,M[2]=M[1]+e.width,E=M[2]+e.width;for(var L=0;L<e.width;++L){O+=_[M[0]++]<<24|_[M[1]++]<<16|_[M[2]++]<<8,k[T]=O,T++}}}return new DataView(k.buffer)}function uncompressDWA(e){var _=e.viewer,S={value:e.offset.value},k=new Uint8Array(e.width*e.lines*(e.channels*e.type*2)),E={version:parseInt64(_,S),unknownUncompressedSize:parseInt64(_,S),unknownCompressedSize:parseInt64(_,S),acCompressedSize:parseInt64(_,S),dcCompressedSize:parseInt64(_,S),rleCompressedSize:parseInt64(_,S),rleUncompressedSize:parseInt64(_,S),rleRawSize:parseInt64(_,S),totalAcUncompressedCount:parseInt64(_,S),totalDcUncompressedCount:parseInt64(_,S),acCompression:parseInt64(_,S)};if(E.version<2)throw"EXRLoader.parse: "+z.compression+" version "+E.version+" is unsupported";for(var T=new Array,M=parseUint16(_,S)-2;M>0;){var I=parseNullTerminatedString(_.buffer,S),R=parseUint8(_,S),O=R>>2&3,D=new Int8Array([(R>>4)-1])[0],L=parseUint8(_,S);T.push({name:I,index:D,type:L,compression:O}),M-=I.length+3}for(var U=z.channels,B=new Array(e.channels),G=0;G<e.channels;++G){var j=B[G]={},V=U[G];j.name=V.name,j.compression=0,j.decoded=!1,j.type=V.pixelType,j.pLinear=V.pLinear,j.width=e.width,j.height=e.lines}for(var H={idx:new Array(3)},W=0;W<e.channels;++W)for(j=B[W],G=0;G<T.length;++G){var q=T[G];j.name==q.name&&(j.compression=q.compression,q.index>=0&&(H.idx[q.index]=W),j.offset=W)}if(E.acCompressedSize>0)switch(E.acCompression){case 0:var X=new Uint16Array(E.totalAcUncompressedCount);hufUncompress(e.array,_,S,E.acCompressedSize,X,E.totalAcUncompressedCount);break;case 1:var Y=unzlibSync(e.array.slice(S.value,S.value+E.totalAcUncompressedCount));X=new Uint16Array(Y.buffer);S.value+=E.totalAcUncompressedCount}if(E.dcCompressedSize>0){var K={array:e.array,offset:S,size:E.dcCompressedSize},J=new Uint16Array(uncompressZIP(K).buffer);S.value+=E.dcCompressedSize}if(E.rleRawSize>0){var Q=decodeRunLength((Y=unzlibSync(e.array.slice(S.value,S.value+E.rleCompressedSize))).buffer);S.value+=E.rleCompressedSize}var Z=0,$=new Array(B.length);for(G=0;G<$.length;++G)$[G]=new Array;for(var ee=0;ee<e.lines;++ee)for(var te=0;te<B.length;++te)$[te].push(Z),Z+=B[te].width*e.type*2;!function(e,_,S,k,E,T){for(var M=new DataView(T.buffer),I=S[e.idx[0]].width,R=S[e.idx[0]].height,O=Math.floor(I/8),D=Math.ceil(I/8),L=Math.ceil(R/8),U=I-8*(D-1),B=R-8*(L-1),z={value:0},G=new Array(3),j=new Array(3),V=new Array(3),H=new Array(3),W=new Array(3),q=0;q<3;++q)W[q]=_[e.idx[q]],G[q]=q<1?0:G[q-1]+D*L,j[q]=new Float32Array(64),V[q]=new Uint16Array(64),H[q]=new Uint16Array(64*D);for(var X=0;X<L;++X){var Y=8;X==L-1&&(Y=B);for(var K=8,J=0;J<D;++J){J==D-1&&(K=U);for(var Q=0;Q<3;++Q)V[Q].fill(0),V[Q][0]=E[G[Q]++],unRleAC(z,k,V[Q]),unZigZag(V[Q],j[Q]),dctInverse(j[Q]);csc709Inverse(j);for(var Z=0;Z<3;++Z)convertToHalf(j[Z],H[Z],64*J)}for(var $=0,ee=0;ee<3;++ee){for(var te=S[e.idx[ee]].type,re=8*X;re<8*X+Y;++re){$=W[ee][re];for(var ne=0;ne<O;++ne){var ie=64*ne+8*(7&re);M.setUint16($+0*te,H[ee][ie+0],!0),M.setUint16($+2*te,H[ee][ie+1],!0),M.setUint16($+4*te,H[ee][ie+2],!0),M.setUint16($+6*te,H[ee][ie+3],!0),M.setUint16($+8*te,H[ee][ie+4],!0),M.setUint16($+10*te,H[ee][ie+5],!0),M.setUint16($+12*te,H[ee][ie+6],!0),M.setUint16($+14*te,H[ee][ie+7],!0),$+=16*te}}if(O!=D)for(var ae=8*X;ae<8*X+Y;++ae)for(var oe=W[ee][ae]+8*O*2*te,se=64*O+8*(7&ae),ue=0;ue<K;++ue)M.setUint16(oe+2*ue*te,H[ee][se+ue],!0)}}for(var le=new Uint16Array(I),ce=(M=new DataView(T.buffer),0);ce<3;++ce){S[e.idx[ce]].decoded=!0;var he=S[e.idx[ce]].type;if(2==S[ce].type)for(var de=0;de<R;++de){for(var fe=W[ce][de],pe=0;pe<I;++pe)le[pe]=M.getUint16(fe+2*pe*he,!0);for(pe=0;pe<I;++pe)M.setFloat32(fe+2*pe*he,decodeFloat16(le[pe]),!0)}}}(H,$,B,X,J,k);for(G=0;G<B.length;++G){if(!(j=B[G]).decoded){if(2!==j.compression)throw"EXRLoader.parse: unsupported channel compression";var re=0,ne=0;for(ee=0;ee<e.lines;++ee){for(var ie=$[G][re],ae=0;ae<j.width;++ae){for(var oe=0;oe<2*j.type;++oe)k[ie++]=Q[ne+oe*j.width*j.height];ne++}re++}}}return new DataView(k.buffer)}function parseNullTerminatedString(e,_){for(var S=new Uint8Array(e),k=0;0!=S[_.value+k];)k+=1;var E=(new TextDecoder).decode(S.slice(_.value,_.value+k));return _.value=_.value+k+1,E}function parseInt32(e,_){var S=e.getInt32(_.value,!0);return _.value=_.value+4,S}function parseUint32(e,_){var S=e.getUint32(_.value,!0);return _.value=_.value+4,S}function parseUint8Array(e,_){var S=e[_.value];return _.value=_.value+1,S}function parseUint8(e,_){var S=e.getUint8(_.value);return _.value=_.value+1,S}var parseInt64=function(e,_){var S;return S="getBigInt64"in DataView.prototype?Number(e.getBigInt64(_.value,!0)):e.getUint32(_.value+4,!0)+Number(e.getUint32(_.value,!0)<<32),_.value+=8,S};function parseFloat32(e,_){var S=e.getFloat32(_.value,!0);return _.value+=4,S}function decodeFloat32(e,_){return Yd.toHalfFloat(parseFloat32(e,_))}function decodeFloat16(e){var _=(31744&e)>>10,S=1023&e;return(e>>15?-1:1)*(_?31===_?S?NaN:1/0:Math.pow(2,_-15)*(1+S/1024):S/1024*6103515625e-14)}function parseUint16(e,_){var S=e.getUint16(_.value,!0);return _.value+=2,S}function parseFloat16(e,_){return decodeFloat16(parseUint16(e,_))}function parseValue(e,_,S,k,E){return"string"===k||"stringvector"===k||"iccProfile"===k?function(e,_,S){var k=(new TextDecoder).decode(new Uint8Array(e).slice(_.value,_.value+S));return _.value=_.value+S,k}(_,S,E):"chlist"===k?function(e,_,S,k){for(var E=S.value,T=[];S.value<E+k-1;){var M=parseNullTerminatedString(_,S),I=parseInt32(e,S),R=parseUint8(e,S);S.value+=3;var O=parseInt32(e,S),D=parseInt32(e,S);T.push({name:M,pixelType:I,pLinear:R,xSampling:O,ySampling:D})}return S.value+=1,T}(e,_,S,E):"chromaticities"===k?function(e,_){return{redX:parseFloat32(e,_),redY:parseFloat32(e,_),greenX:parseFloat32(e,_),greenY:parseFloat32(e,_),blueX:parseFloat32(e,_),blueY:parseFloat32(e,_),whiteX:parseFloat32(e,_),whiteY:parseFloat32(e,_)}}(e,S):"compression"===k?function(e,_){return["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"][parseUint8(e,_)]}(e,S):"box2i"===k?function(e,_){return{xMin:parseUint32(e,_),yMin:parseUint32(e,_),xMax:parseUint32(e,_),yMax:parseUint32(e,_)}}(e,S):"lineOrder"===k?function(e,_){return["INCREASING_Y"][parseUint8(e,_)]}(e,S):"float"===k?parseFloat32(e,S):"v2f"===k?function(e,_){return[parseFloat32(e,_),parseFloat32(e,_)]}(e,S):"v3f"===k?function(e,_){return[parseFloat32(e,_),parseFloat32(e,_),parseFloat32(e,_)]}(e,S):"int"===k?parseInt32(e,S):"rational"===k?function(e,_){return[parseInt32(e,_),parseUint32(e,_)]}(e,S):"timecode"===k?function(e,_){return[parseUint32(e,_),parseUint32(e,_)]}(e,S):"preview"===k?(S.value+=E,"skipped"):void(S.value+=E)}for(var L=new DataView(e),U=new Uint8Array(e),B={value:0},z=function(e,_,S){var k={};if(20000630!=e.getUint32(0,!0))throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";k.version=e.getUint8(4);var E=e.getUint8(5);k.spec={singleTile:!!(2&E),longName:!!(4&E),deepFormat:!!(8&E),multiPart:!!(16&E)},S.value=8;for(var T=!0;T;){var M=parseNullTerminatedString(_,S);if(0==M)T=!1;else{var I=parseValue(e,_,S,parseNullTerminatedString(_,S),parseUint32(e,S));void 0===I||(k[M]=I)}}if(-5&E)throw"THREE.EXRLoader: provided file is currently unsupported.";return k}(L,e,B),G=function(e,_,S,k,E){var T=_defineProperty3({size:0,viewer:_,array:S,offset:k,width:e.dataWindow.xMax-e.dataWindow.xMin+1,height:e.dataWindow.yMax-e.dataWindow.yMin+1,channels:e.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:e.channels[0].pixelType,uncompress:null,getter:null,format:null},cS?"colorSpace":"encoding",null);switch(e.compression){case"NO_COMPRESSION":T.lines=1,T.uncompress=uncompressRAW;break;case"RLE_COMPRESSION":T.lines=1,T.uncompress=uncompressRLE;break;case"ZIPS_COMPRESSION":T.lines=1,T.uncompress=uncompressZIP;break;case"ZIP_COMPRESSION":T.lines=16,T.uncompress=uncompressZIP;break;case"PIZ_COMPRESSION":T.lines=32,T.uncompress=uncompressPIZ;break;case"PXR24_COMPRESSION":T.lines=16,T.uncompress=uncompressPXR;break;case"DWAA_COMPRESSION":T.lines=32,T.uncompress=uncompressDWA;break;case"DWAB_COMPRESSION":T.lines=256,T.uncompress=uncompressDWA;break;default:throw"EXRLoader.parse: "+e.compression+" is unsupported"}if(T.scanlineBlockSize=T.lines,1==T.type)switch(E){case Ol:T.getter=parseFloat16,T.inputSize=2;break;case Dl:T.getter=parseUint16,T.inputSize=2}else{if(2!=T.type)throw"EXRLoader.parse: unsupported pixelType "+T.type+" for "+e.compression+".";switch(E){case Ol:T.getter=parseFloat32,T.inputSize=4;break;case Dl:T.getter=decodeFloat32,T.inputSize=4}}T.blockCount=(e.dataWindow.yMax+1)/T.scanlineBlockSize;for(var M=0;M<T.blockCount;M++)parseInt64(_,k);T.outputChannels=3==T.channels?4:T.channels;var I=T.width*T.height*T.outputChannels;switch(E){case Ol:T.byteArray=new Float32Array(I),T.channels<T.outputChannels&&T.byteArray.fill(1,0,I);break;case Dl:T.byteArray=new Uint16Array(I),T.channels<T.outputChannels&&T.byteArray.fill(15360,0,I)}return T.bytesPerLine=T.width*T.inputSize*T.channels,4==T.outputChannels?T.format=jl:T.format=Wl,cS?T.colorSpace="srgb-linear":T.encoding=3e3,T}(z,L,U,B,this.type),j={value:0},V={R:0,G:1,B:2,A:3,Y:0},H=0;H<G.height/G.scanlineBlockSize;H++){var W=parseUint32(L,B);G.size=parseUint32(L,B),G.lines=W+G.scanlineBlockSize>G.height?G.height-W:G.scanlineBlockSize;var q=G.size<G.lines*G.bytesPerLine?G.uncompress(G):uncompressRAW(G);B.value+=G.size;for(var X=0;X<G.scanlineBlockSize;X++){var Y=X+H*G.scanlineBlockSize;if(Y>=G.height)break;for(var K=0;K<G.channels;K++)for(var J=V[z.channels[K].name],Q=0;Q<G.width;Q++){j.value=(X*(G.channels*G.width)+K*G.width+Q)*G.inputSize;var Z=(G.height-1-Y)*(G.width*G.outputChannels)+Q*G.outputChannels+J;G.byteArray[Z]=G.getter(q,j)}}}return _defineProperty3(_defineProperty3({header:z,width:G.width,height:G.height,data:G.byteArray,format:G.format},cS?"colorSpace":"encoding",G[cS?"colorSpace":"encoding"]),"type",this.type)}},{key:"setDataType",value:function(e){return this.type=e,this}},{key:"load",value:function(e,_,S,k){return _superPropGet(EXRLoader,"load",this,3)([e,function(e,S){cS?e.colorSpace=S.colorSpace:e.encoding=S.encoding,e.minFilter=xl,e.magFilter=xl,e.generateMipmaps=!1,e.flipY=!1,_&&_(e,S)},S,k])}}])}(pm);D("aP",hS);var dS,getBufferForType=function(e,_,S){var k;switch(e){case El:k=new Uint8ClampedArray(_*S*4);break;case Dl:k=new Uint16Array(_*S*4);break;case Pl:k=new Uint32Array(_*S*4);break;case Tl:k=new Int8Array(_*S*4);break;case Ml:k=new Int16Array(_*S*4);break;case Rl:k=new Int32Array(_*S*4);break;case Ol:k=new Float32Array(_*S*4);break;default:throw new Error("Unsupported data type")}return k},fS=function(){return _createClass3(function QuadRenderer(e){var _,S,k,E,T,M,I,R,O,D,L,U,B,z,G,j,V=this;_classCallCheck3(this,QuadRenderer),this._rendererIsDisposable=!1,this._supportsReadPixels=!0,this.render=function(){V._renderer.setRenderTarget(V._renderTarget);try{V._renderer.render(V._scene,V._camera)}catch(fo){throw V._renderer.setRenderTarget(null),fo}V._renderer.setRenderTarget(null)},this._width=e.width,this._height=e.height,this._type=e.type,this._colorSpace=e.colorSpace;var H={format:jl,depthBuffer:!1,stencilBuffer:!1,type:this._type,colorSpace:this._colorSpace,anisotropy:void 0!==(null===(_=e.renderTargetOptions)||void 0===_?void 0:_.anisotropy)?null===(S=e.renderTargetOptions)||void 0===S?void 0:S.anisotropy:1,generateMipmaps:void 0!==(null===(k=e.renderTargetOptions)||void 0===k?void 0:k.generateMipmaps)&&(null===(E=e.renderTargetOptions)||void 0===E?void 0:E.generateMipmaps),magFilter:void 0!==(null===(T=e.renderTargetOptions)||void 0===T?void 0:T.magFilter)?null===(M=e.renderTargetOptions)||void 0===M?void 0:M.magFilter:xl,minFilter:void 0!==(null===(I=e.renderTargetOptions)||void 0===I?void 0:I.minFilter)?null===(R=e.renderTargetOptions)||void 0===R?void 0:R.minFilter:xl,samples:void 0!==(null===(O=e.renderTargetOptions)||void 0===O?void 0:O.samples)?null===(D=e.renderTargetOptions)||void 0===D?void 0:D.samples:void 0,wrapS:void 0!==(null===(L=e.renderTargetOptions)||void 0===L?void 0:L.wrapS)?null===(U=e.renderTargetOptions)||void 0===U?void 0:U.wrapS:yl,wrapT:void 0!==(null===(B=e.renderTargetOptions)||void 0===B?void 0:B.wrapT)?null===(z=e.renderTargetOptions)||void 0===z?void 0:z.wrapT:yl};if(this._material=e.material,e.renderer?this._renderer=e.renderer:(this._renderer=QuadRenderer.instantiateRenderer(),this._rendererIsDisposable=!0),this._scene=new qf,this._camera=new Mm,this._camera.position.set(0,0,10),this._camera.left=-.5,this._camera.right=.5,this._camera.top=.5,this._camera.bottom=-.5,this._camera.updateProjectionMatrix(),!function(e,_,S,k){if(void 0!==dS)return dS;var E=new bh(1,1,k);_.setRenderTarget(E);var T=new Tf(new bg,new qd({color:16777215}));_.render(T,S),_.setRenderTarget(null);var M=getBufferForType(e,E.width,E.height);return _.readRenderTargetPixels(E,0,0,E.width,E.height,M),E.dispose(),T.geometry.dispose(),T.material.dispose(),dS=0!==M[0]}(this._type,this._renderer,this._camera,H)){var W;if(this._type===Dl)W=this._renderer.extensions.has("EXT_color_buffer_float")?Ol:void 0;void 0!==W?this._type=W:this._supportsReadPixels=!1}this._quad=new Tf(new bg,this._material),this._quad.geometry.computeBoundingBox(),this._scene.add(this._quad),this._renderTarget=new bh(this.width,this.height,H),this._renderTarget.texture.mapping=void 0!==(null===(G=e.renderTargetOptions)||void 0===G?void 0:G.mapping)?null===(j=e.renderTargetOptions)||void 0===j?void 0:j.mapping:hl},[{key:"toArray",value:function(){if(!this._supportsReadPixels)throw new Error("Can't read pixels in this browser");var e=getBufferForType(this._type,this._width,this._height);return this._renderer.readRenderTargetPixels(this._renderTarget,0,0,this._width,this._height,e),e}},{key:"toDataTexture",value:function(e){var _=new Cp(this.toArray(),this.width,this.height,jl,this._type,(null==e?void 0:e.mapping)||hl,(null==e?void 0:e.wrapS)||yl,(null==e?void 0:e.wrapT)||yl,(null==e?void 0:e.magFilter)||xl,(null==e?void 0:e.minFilter)||xl,(null==e?void 0:e.anisotropy)||1,Nc);return _.generateMipmaps=void 0!==(null==e?void 0:e.generateMipmaps)&&(null==e?void 0:e.generateMipmaps),_}},{key:"disposeOnDemandRenderer",value:function(){this._renderer.setRenderTarget(null),this._rendererIsDisposable&&(this._renderer.dispose(),this._renderer.forceContextLoss())}},{key:"dispose",value:function(e){this.disposeOnDemandRenderer(),e&&this.renderTarget.dispose(),this.material instanceof Rf&&Object.values(this.material.uniforms).forEach(function(e){e.value instanceof mh&&e.value.dispose()}),Object.values(this.material).forEach(function(e){e instanceof mh&&e.dispose()}),this.material.dispose(),this._quad.geometry.dispose()}},{key:"width",get:function(){return this._width},set:function(e){this._width=e,this._renderTarget.setSize(this._width,this._height)}},{key:"height",get:function(){return this._height},set:function(e){this._height=e,this._renderTarget.setSize(this._width,this._height)}},{key:"renderer",get:function(){return this._renderer}},{key:"renderTarget",get:function(){return this._renderTarget},set:function(e){this._renderTarget=e,this._width=e.width,this._height=e.height}},{key:"material",get:function(){return this._material}},{key:"type",get:function(){return this._type}},{key:"colorSpace",get:function(){return this._colorSpace}}],[{key:"instantiateRenderer",value:function(){var e=new xb;return e.setSize(128,128),e}}])}(),pS=function(e){function GainMapDecoderMaterial(e){var _,S=e.gamma,k=e.offsetHdr,E=e.offsetSdr,T=e.gainMapMin,M=e.gainMapMax,I=e.maxDisplayBoost,R=e.hdrCapacityMin,O=e.hdrCapacityMax,D=e.sdr,L=e.gainMap;return _classCallCheck3(this,GainMapDecoderMaterial),(_=_callSuper(this,GainMapDecoderMaterial,[{name:"GainMapDecoderMaterial",vertexShader:"\nvarying vec2 vUv;\n\nvoid main() {\n  vUv = uv;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}\n",fragmentShader:"\n// min half float value\n#define HALF_FLOAT_MIN vec3( -65504, -65504, -65504 )\n// max half float value\n#define HALF_FLOAT_MAX vec3( 65504, 65504, 65504 )\n\nuniform sampler2D sdr;\nuniform sampler2D gainMap;\nuniform vec3 gamma;\nuniform vec3 offsetHdr;\nuniform vec3 offsetSdr;\nuniform vec3 gainMapMin;\nuniform vec3 gainMapMax;\nuniform float weightFactor;\n\nvarying vec2 vUv;\n\nvoid main() {\n  vec3 rgb = texture2D( sdr, vUv ).rgb;\n  vec3 recovery = texture2D( gainMap, vUv ).rgb;\n  vec3 logRecovery = pow( recovery, gamma );\n  vec3 logBoost = gainMapMin * ( 1.0 - logRecovery ) + gainMapMax * logRecovery;\n  vec3 hdrColor = (rgb + offsetSdr) * exp2( logBoost * weightFactor ) - offsetHdr;\n  vec3 clampedHdrColor = max( HALF_FLOAT_MIN, min( HALF_FLOAT_MAX, hdrColor ));\n  gl_FragColor = vec4( clampedHdrColor , 1.0 );\n}\n",uniforms:{sdr:{value:D},gainMap:{value:L},gamma:{value:new th(1/S[0],1/S[1],1/S[2])},offsetHdr:{value:(new th).fromArray(k)},offsetSdr:{value:(new th).fromArray(E)},gainMapMin:{value:(new th).fromArray(T)},gainMapMax:{value:(new th).fromArray(M)},weightFactor:{value:(Math.log2(I)-R)/(O-R)}},blending:0,depthTest:!1,depthWrite:!1}]))._maxDisplayBoost=I,_._hdrCapacityMin=R,_._hdrCapacityMax=O,_.needsUpdate=!0,_.uniformsNeedUpdate=!0,_}return _inherits(GainMapDecoderMaterial,e),_createClass3(GainMapDecoderMaterial,[{key:"sdr",get:function(){return this.uniforms.sdr.value},set:function(e){this.uniforms.sdr.value=e}},{key:"gainMap",get:function(){return this.uniforms.gainMap.value},set:function(e){this.uniforms.gainMap.value=e}},{key:"offsetHdr",get:function(){return this.uniforms.offsetHdr.value.toArray()},set:function(e){this.uniforms.offsetHdr.value.fromArray(e)}},{key:"offsetSdr",get:function(){return this.uniforms.offsetSdr.value.toArray()},set:function(e){this.uniforms.offsetSdr.value.fromArray(e)}},{key:"gainMapMin",get:function(){return this.uniforms.gainMapMin.value.toArray()},set:function(e){this.uniforms.gainMapMin.value.fromArray(e)}},{key:"gainMapMax",get:function(){return this.uniforms.gainMapMax.value.toArray()},set:function(e){this.uniforms.gainMapMax.value.fromArray(e)}},{key:"gamma",get:function(){var e=this.uniforms.gamma.value;return[1/e.x,1/e.y,1/e.z]},set:function(e){var _=this.uniforms.gamma.value;_.x=1/e[0],_.y=1/e[1],_.z=1/e[2]}},{key:"hdrCapacityMin",get:function(){return this._hdrCapacityMin},set:function(e){this._hdrCapacityMin=e,this.calculateWeight()}},{key:"hdrCapacityMax",get:function(){return this._hdrCapacityMax},set:function(e){this._hdrCapacityMax=e,this.calculateWeight()}},{key:"maxDisplayBoost",get:function(){return this._maxDisplayBoost},set:function(e){this._maxDisplayBoost=Math.max(1,Math.min(65504,e)),this.calculateWeight()}},{key:"calculateWeight",value:function(){var e=(Math.log2(this._maxDisplayBoost)-this._hdrCapacityMin)/(this._hdrCapacityMax-this._hdrCapacityMin);this.uniforms.weightFactor.value=Math.max(0,Math.min(1,e))}}])}(Rf),vS=function(e){function GainMapNotFoundError(){return _classCallCheck3(this,GainMapNotFoundError),_callSuper(this,GainMapNotFoundError,arguments)}return _inherits(GainMapNotFoundError,e),_createClass3(GainMapNotFoundError)}(_wrapNativeSuper(Error)),gS=function(e){function XMPMetadataNotFoundError(){return _classCallCheck3(this,XMPMetadataNotFoundError),_callSuper(this,XMPMetadataNotFoundError,arguments)}return _inherits(XMPMetadataNotFoundError,e),_createClass3(XMPMetadataNotFoundError)}(_wrapNativeSuper(Error)),getXMLValue=function(e,_,S){var k=new RegExp("".concat(_,'="([^"]*)"'),"i").exec(e);if(k)return k[1];var E=new RegExp("<".concat(_,"[^>]*>([\\s\\S]*?)</").concat(_,">"),"i").exec(e);if(E){var T=E[1].match(/<rdf:li>([^<]*)<\/rdf:li>/g);return T&&3===T.length?T.map(function(e){return e.replace(/<\/?rdf:li>/g,"")}):E[1].trim()}if(void 0!==S)return S;throw new Error("Can't find ".concat(_," in gainmap metadata"))},extractXMP=function(e){for(var _,S=(_="undefined"!=typeof TextDecoder?(new TextDecoder).decode(e):e.toString()).indexOf("<x:xmpmeta");-1!==S;){var k=_.indexOf("x:xmpmeta>",S),E=_.slice(S,k+10);try{var T=getXMLValue(E,"hdrgm:GainMapMin","0"),M=getXMLValue(E,"hdrgm:GainMapMax"),I=getXMLValue(E,"hdrgm:Gamma","1"),R=getXMLValue(E,"hdrgm:OffsetSDR","0.015625"),O=getXMLValue(E,"hdrgm:OffsetHDR","0.015625"),D=/hdrgm:HDRCapacityMin="([^"]*)"/.exec(E),L=D?D[1]:"0",U=/hdrgm:HDRCapacityMax="([^"]*)"/.exec(E);if(!U)throw new Error("Incomplete gainmap metadata");var B=U[1];return{gainMapMin:Array.isArray(T)?T.map(function(e){return parseFloat(e)}):[parseFloat(T),parseFloat(T),parseFloat(T)],gainMapMax:Array.isArray(M)?M.map(function(e){return parseFloat(e)}):[parseFloat(M),parseFloat(M),parseFloat(M)],gamma:Array.isArray(I)?I.map(function(e){return parseFloat(e)}):[parseFloat(I),parseFloat(I),parseFloat(I)],offsetSdr:Array.isArray(R)?R.map(function(e){return parseFloat(e)}):[parseFloat(R),parseFloat(R),parseFloat(R)],offsetHdr:Array.isArray(O)?O.map(function(e){return parseFloat(e)}):[parseFloat(O),parseFloat(O),parseFloat(O)],hdrCapacityMin:parseFloat(L),hdrCapacityMax:parseFloat(B)}}catch(fo){}S=_.indexOf("<x:xmpmeta",k)}},mS=function(){return _createClass3(function MPFExtractor(e){_classCallCheck3(this,MPFExtractor),this.options={debug:!(!e||void 0===e.debug)&&e.debug,extractFII:!e||void 0===e.extractFII||e.extractFII,extractNonFII:!e||void 0===e.extractNonFII||e.extractNonFII}},[{key:"extract",value:function(e){var _=this;return new Promise(function(S,k){_.options.debug;var E=new DataView(e.buffer);if(65496===E.getUint16(0))for(var T=E.byteLength,M=2,I=0;M<T;){if(++I>250)return void k(new Error("Found no marker after ".concat(I," loops ")));if(255!==E.getUint8(M))return void k(new Error("Not a valid marker at offset 0x".concat(M.toString(16),", found: 0x").concat(E.getUint8(M).toString(16))));if(226===E.getUint8(M+1)){var R=M+4;if(1297106432===E.getUint32(R)){var O=R+4,D=void 0;if(18761===E.getUint16(O))D=!1;else{if(19789!==E.getUint16(O))return void k(new Error("No valid endianness marker found in TIFF header"));D=!0}if(42!==E.getUint16(O+2,!D))return void k(new Error("Not valid TIFF data! (no 0x002A marker)"));var L=E.getUint32(O+4,!D);if(L<8)return void k(new Error("Not valid TIFF data! (First offset less than 8)"));for(var U=O+L,B=E.getUint16(U,!D),z=U+2,G=0,j=z;j<z+12*B;j+=12)45057===E.getUint16(j,!D)&&(G=E.getUint32(j+8,!D));for(var V=U+2+12*B+4,H=[],W=V;W<V+16*G;W+=16){var q={MPType:E.getUint32(W,!D),size:E.getUint32(W+4,!D),dataOffset:E.getUint32(W+8,!D),dependantImages:E.getUint32(W+12,!D),start:-1,end:-1,isFII:!1};q.dataOffset?(q.start=O+q.dataOffset,q.isFII=!1):(q.start=0,q.isFII=!0),q.end=q.start+q.size,H.push(q)}if(_.options.extractNonFII&&H.length){var X,Y=new Blob([E]),K=[],J=_createForOfIteratorHelper2(H);try{for(J.s();!(X=J.n()).done;){var Q=X.value;if(!Q.isFII||_.options.extractFII){var Z=Y.slice(Q.start,Q.end+1,"image/jpeg");K.push(Z)}}}catch($){J.e($)}finally{J.f()}S(K)}}}M+=2+E.getUint16(M+2)}else k(new Error("Not a valid jpeg"))})}}])}(),yS=function(){var e=_asyncToGenerator(_regenerator().m(function _callee257(e){var _,S,k,E,T,M,I,R,O,D;return _regenerator().w(function(L){for(;;)switch(L.n){case 0:if(_=extractXMP(e)){L.n=1;break}throw new gS("Gain map XMP metadata not found");case 1:return S=new mS({extractFII:!0,extractNonFII:!0}),L.n=2,S.extract(e);case 2:if(2===(k=L.v).length){L.n=3;break}throw new vS("Gain map recovery image not found");case 3:return E=Uint8Array,L.n=4,k[0].arrayBuffer();case 4:return T=L.v,M=new E(T),I=Uint8Array,L.n=5,k[1].arrayBuffer();case 5:return R=L.v,O=new I(R),D=_,L.a(2,{sdr:M,gainMap:O,metadata:D})}},_callee257)}));return function(_){return e.apply(this,arguments)}}(),getHTMLImageFromBlob=function(e){return new Promise(function(_,S){var k=document.createElement("img");k.onload=function(){_(k)},k.onerror=function(e){S(e)},k.src=URL.createObjectURL(e)})},_S=function(e){function LoaderBase(e,_){var S;return _classCallCheck3(this,LoaderBase),S=_callSuper(this,LoaderBase,[_]),e&&(S._renderer=e),S._internalLoadingManager=new nm,S}return _inherits(LoaderBase,e),_createClass3(LoaderBase,[{key:"setRenderer",value:function(e){return this._renderer=e,this}},{key:"setRenderTargetOptions",value:function(e){return this._renderTargetOptions=e,this}},{key:"prepareQuadRenderer",value:function(){this._renderer;var e=new pS({gainMapMax:[1,1,1],gainMapMin:[0,0,0],gamma:[1,1,1],offsetHdr:[1,1,1],offsetSdr:[1,1,1],hdrCapacityMax:1,hdrCapacityMin:0,maxDisplayBoost:1,gainMap:new mh,sdr:new mh});return new fS({width:16,height:16,type:Dl,colorSpace:Nc,material:e,renderer:this._renderer,renderTargetOptions:this._renderTargetOptions})}},{key:"render",value:(_=_asyncToGenerator(_regenerator().m(function _callee258(e,_,S,k){var E,T,M,I,R,O,D,L,U;return _regenerator().w(function(B){for(;;)switch(B.n){case 0:if(E=k?new Blob([k],{type:"image/jpeg"}):void 0,T=new Blob([S],{type:"image/jpeg"}),R=!1,"undefined"!=typeof createImageBitmap){B.n=2;break}return B.n=1,Promise.all([E?getHTMLImageFromBlob(E):Promise.resolve(void 0),getHTMLImageFromBlob(T)]);case 1:O=B.v,I=O[0],M=O[1],R=!0,B.n=4;break;case 2:return B.n=3,Promise.all([E?createImageBitmap(E,{imageOrientation:"flipY"}):Promise.resolve(void 0),createImageBitmap(T,{imageOrientation:"flipY"})]);case 3:D=B.v,I=D[0],M=D[1];case 4:(L=new mh(I||new ImageData(2,2),hl,yl,yl,xl,Al,jl,El,1,Nc)).flipY=R,L.needsUpdate=!0,(U=new mh(M,hl,yl,yl,xl,Al,jl,El,1,Bc)).flipY=R,U.needsUpdate=!0,e.width=M.width,e.height=M.height,e.material.gainMap=L,e.material.sdr=U,e.material.gainMapMin=_.gainMapMin,e.material.gainMapMax=_.gainMapMax,e.material.offsetHdr=_.offsetHdr,e.material.offsetSdr=_.offsetSdr,e.material.gamma=_.gamma,e.material.hdrCapacityMin=_.hdrCapacityMin,e.material.hdrCapacityMax=_.hdrCapacityMax,e.material.maxDisplayBoost=Math.pow(2,_.hdrCapacityMax),e.material.needsUpdate=!0,e.render();case 5:return B.a(2)}},_callee258)})),function(e,S,k,E){return _.apply(this,arguments)})}]);var _}(am),bS=function(e){function GainMapLoader(){return _classCallCheck3(this,GainMapLoader),_callSuper(this,GainMapLoader,arguments)}return _inherits(GainMapLoader,e),_createClass3(GainMapLoader,[{key:"load",value:function(e,_,S,k){var E,T,M,I=this,R=_slicedToArray(e,3),O=R[0],D=R[1],L=R[2],U=this.prepareQuadRenderer(),B=function(){var e=_asyncToGenerator(_regenerator().m(function _callee259(){var e;return _regenerator().w(function(S){for(;;)switch(S.p=S.n){case 0:if(!(E&&T&&M)){S.n=5;break}return S.p=1,S.n=2,I.render(U,M,E,T);case 2:S.n=4;break;case 3:return S.p=3,e=S.v,I.manager.itemError(O),I.manager.itemError(D),I.manager.itemError(L),"function"==typeof k&&k(e),U.disposeOnDemandRenderer(),S.a(2);case 4:"function"==typeof _&&_(U),I.manager.itemEnd(O),I.manager.itemEnd(D),I.manager.itemEnd(L),U.disposeOnDemandRenderer();case 5:return S.a(2)}},_callee259,null,[[1,3]])}));return function(){return e.apply(this,arguments)}}(),z=!0,G=0,j=0,V=!0,H=0,W=0,q=!0,X=0,Y=0,progressHandler=function(){"function"==typeof S&&S(new ProgressEvent("progress",{lengthComputable:z&&V&&q,loaded:j+W+Y,total:G+H+X}))};this.manager.itemStart(O),this.manager.itemStart(D),this.manager.itemStart(L);var K=new um(this._internalLoadingManager);K.setResponseType("arraybuffer"),K.setRequestHeader(this.requestHeader),K.setPath(this.path),K.setWithCredentials(this.withCredentials),K.load(O,function(){var e=_asyncToGenerator(_regenerator().m(function _callee260(e){return _regenerator().w(function(_){for(;;)switch(_.n){case 0:if("string"!=typeof e){_.n=1;break}throw new Error("Invalid sdr buffer");case 1:return E=e,_.n=2,B();case 2:return _.a(2)}},_callee260)}));return function(_){return e.apply(this,arguments)}}(),function(e){z=e.lengthComputable,j=e.loaded,G=e.total,progressHandler()},function(e){I.manager.itemError(O),"function"==typeof k&&k(e)});var J=new um(this._internalLoadingManager);J.setResponseType("arraybuffer"),J.setRequestHeader(this.requestHeader),J.setPath(this.path),J.setWithCredentials(this.withCredentials),J.load(D,function(){var e=_asyncToGenerator(_regenerator().m(function _callee261(e){return _regenerator().w(function(_){for(;;)switch(_.n){case 0:if("string"!=typeof e){_.n=1;break}throw new Error("Invalid gainmap buffer");case 1:return T=e,_.n=2,B();case 2:return _.a(2)}},_callee261)}));return function(_){return e.apply(this,arguments)}}(),function(e){V=e.lengthComputable,W=e.loaded,H=e.total,progressHandler()},function(e){I.manager.itemError(D),"function"==typeof k&&k(e)});var Q=new um(this._internalLoadingManager);return Q.setRequestHeader(this.requestHeader),Q.setPath(this.path),Q.setWithCredentials(this.withCredentials),Q.load(L,function(){var e=_asyncToGenerator(_regenerator().m(function _callee262(e){return _regenerator().w(function(_){for(;;)switch(_.n){case 0:if("string"==typeof e){_.n=1;break}throw new Error("Invalid metadata string");case 1:return M=JSON.parse(e),_.n=2,B();case 2:return _.a(2)}},_callee262)}));return function(_){return e.apply(this,arguments)}}(),function(e){q=e.lengthComputable,Y=e.loaded,X=e.total,progressHandler()},function(e){I.manager.itemError(L),"function"==typeof k&&k(e)}),U}}])}(_S);D("aR",bS);var SS=function(e){function HDRJPGLoader(){return _classCallCheck3(this,HDRJPGLoader),_callSuper(this,HDRJPGLoader,arguments)}return _inherits(HDRJPGLoader,e),_createClass3(HDRJPGLoader,[{key:"load",value:function(e,_,S,k){var E=this,T=this.prepareQuadRenderer(),M=new um(this._internalLoadingManager);return M.setResponseType("arraybuffer"),M.setRequestHeader(this.requestHeader),M.setPath(this.path),M.setWithCredentials(this.withCredentials),this.manager.itemStart(e),M.load(e,function(){var S=_asyncToGenerator(_regenerator().m(function _callee263(S){var M,I,R,O,D,L,U;return _regenerator().w(function(B){for(;;)switch(B.p=B.n){case 0:if("string"!=typeof S){B.n=1;break}throw new Error("Invalid buffer, received [string], was expecting [ArrayBuffer]");case 1:return M=new Uint8Array(S),B.p=2,B.n=3,yS(M);case 3:D=B.v,I=D.sdr,R=D.gainMap,O=D.metadata,B.n=6;break;case 4:if(B.p=4,!((L=B.v)instanceof gS||L instanceof vS)){B.n=5;break}O={gainMapMin:[0,0,0],gainMapMax:[1,1,1],gamma:[1,1,1],hdrCapacityMin:0,hdrCapacityMax:1,offsetHdr:[0,0,0],offsetSdr:[0,0,0]},I=M,B.n=6;break;case 5:throw L;case 6:return B.p=6,B.n=7,E.render(T,O,I,R);case 7:B.n=9;break;case 8:return B.p=8,U=B.v,E.manager.itemError(e),"function"==typeof k&&k(U),T.disposeOnDemandRenderer(),B.a(2);case 9:"function"==typeof _&&_(T),E.manager.itemEnd(e),T.disposeOnDemandRenderer();case 10:return B.a(2)}},_callee263,null,[[6,8],[2,4]])}));return function(e){return S.apply(this,arguments)}}(),S,function(_){E.manager.itemError(e),"function"==typeof k&&k(_)}),T}}])}(_S);function addUniqueItem(e,_){-1===e.indexOf(_)&&e.push(_)}function removeItem(e,_){var S=e.indexOf(_);S>-1&&e.splice(S,1)}D("aQ",SS);var wS=D("H",function(e,_,S){return S>_?_:S<e?e:S}),xS=D("a1",function(){}),kS=D("M",{}),CS=D("j",function(e){return/^-?(?:[0-9]+(?:\.[0-9]+)?|\.[0-9]+)$/.test(e)});function isObject$1(e){return"object"===_typeof3(e)&&null!==e}var AS=D("k",function(e){return/^0(?:[\0-\x08\x0E-\x1F!-\x2D\/-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+$/.test(e)});function memo(e){var _;return function(){return void 0===_&&(_=e()),_}}var ES=D("N",function(e){return e}),combineFunctions=function(e,_){return function(S){return _(e(S))}},TS=D("E",function(){for(var e=arguments.length,_=new Array(e),S=0;S<e;S++)_[S]=arguments[S];return _.reduce(combineFunctions)}),MS=D("G",function(e,_,S){var k=_-e;return 0===k?1:(S-e)/k}),IS=function(){return _createClass3(function SubscriptionManager(){_classCallCheck3(this,SubscriptionManager),this.subscriptions=[]},[{key:"add",value:function(e){var _=this;return addUniqueItem(this.subscriptions,e),function(){return removeItem(_.subscriptions,e)}}},{key:"notify",value:function(e,_,S){var k=this.subscriptions.length;if(k)if(1===k)this.subscriptions[0](e,_,S);else for(var E=0;E<k;E++){var T=this.subscriptions[E];T&&T(e,_,S)}}},{key:"getSize",value:function(){return this.subscriptions.length}},{key:"clear",value:function(){this.subscriptions.length=0}}])}();D("S",IS);var RS=D("x",function(e){return 1e3*e}),PS=D("F",function(e){return e/1e3});function velocityPerSecond(e,_){return _?e*(1e3/_):0}var calcBezier=function(e,_,S){return(((1-3*S+3*_)*e+(3*S-6*_))*e+3*_)*e};function cubicBezier(e,_,S,k){if(e===_&&S===k)return ES;var getTForX=function(_){return function(e,_,S,k,E){var T,M,I=0;do{(T=calcBezier(M=_+(S-_)/2,k,E)-e)>0?S=M:_=M}while(Math.abs(T)>1e-7&&++I<12);return M}(_,0,1,e,S)};return function(e){return 0===e||1===e?e:calcBezier(getTForX(e),_,k)}}var mirrorEasing=function(e){return function(_){return _<=.5?e(2*_)/2:(2-e(2*(1-_)))/2}},reverseEasing=function(e){return function(_){return 1-e(1-_)}},OS=cubicBezier(.33,1.53,.69,.99),DS=reverseEasing(OS),LS=mirrorEasing(DS),anticipate=function(e){return(e*=2)<1?.5*DS(e):.5*(2-Math.pow(2,-10*(e-1)))},circIn=function(e){return 1-Math.sin(Math.acos(e))},FS=D("Q",reverseEasing(circIn)),US=mirrorEasing(circIn),BS=cubicBezier(.42,0,1,1),NS=cubicBezier(0,0,.58,1),zS=cubicBezier(.42,0,.58,1),isBezierDefinition=function(e){return Array.isArray(e)&&"number"==typeof e[0]},GS={linear:ES,easeIn:BS,easeInOut:zS,easeOut:NS,circIn:circIn,circInOut:US,circOut:FS,backIn:DS,backInOut:LS,backOut:OS,anticipate:anticipate},easingDefinitionToFunction=function(e){if(isBezierDefinition(e)){xS(4===e.length);var _=_slicedToArray(e,4);return cubicBezier(_[0],_[1],_[2],_[3])}return"string"==typeof e?GS[e]:e},jS=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function createRenderBatcher(e,_){var S=!1,k=!0,E={delta:0,timestamp:0,isProcessing:!1},flagRunNextFrame=function(){return S=!0},T=jS.reduce(function(e,_){return e[_]=function(e){var _=new Set,S=new Set,k=!1,E=!1,T=new WeakSet,M={delta:0,timestamp:0,isProcessing:!1};function triggerCallback(_){T.has(_)&&(I.schedule(_),e()),_(M)}var I={schedule:function(e){var E=arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&k?_:S;return arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&T.add(e),E.has(e)||E.add(e),e},cancel:function(e){S.delete(e),T.delete(e)},process:function(e){if(M=e,k)E=!0;else{k=!0;var T=[S,_];S=T[1],(_=T[0]).forEach(triggerCallback),_.clear(),k=!1,E&&(E=!1,I.process(e))}}};return I}(flagRunNextFrame),e},{}),M=T.setup,I=T.read,R=T.resolveKeyframes,O=T.preUpdate,D=T.update,L=T.preRender,U=T.render,B=T.postRender,_processBatch=function(){var T=kS.useManualTiming?E.timestamp:performance.now();S=!1,kS.useManualTiming||(E.delta=k?1e3/60:Math.max(Math.min(T-E.timestamp,40),1)),E.timestamp=T,E.isProcessing=!0,M.process(E),I.process(E),R.process(E),O.process(E),D.process(E),L.process(E),U.process(E),B.process(E),E.isProcessing=!1,S&&_&&(k=!1,e(_processBatch))},z=jS.reduce(function(_,M){var I=T[M];return _[M]=function(_){var T=arguments.length>1&&void 0!==arguments[1]&&arguments[1],M=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return S||(S=!0,k=!0,E.isProcessing||e(_processBatch)),I.schedule(_,T,M)},_},{});return{schedule:z,cancel:function(e){for(var _=0;_<jS.length;_++)T[jS[_]].cancel(e)},state:E,steps:T}}var VS,HS=createRenderBatcher("undefined"!=typeof requestAnimationFrame?requestAnimationFrame:ES,!0),WS=HS.schedule,qS=HS.cancel,XS=HS.state,YS=HS.steps;function clearTime(){VS=void 0}D({f:WS,h:qS,C:XS,U:YS});var KS=D("e",{now:function(){return void 0===VS&&KS.set(XS.isProcessing||kS.useManualTiming?XS.timestamp:performance.now()),VS},set:function(e){VS=e,queueMicrotask(clearTime)}}),checkStringStartsWith=function(e){return function(_){return"string"==typeof _&&_.startsWith(e)}},JS=(D("a",checkStringStartsWith("--")),checkStringStartsWith("var(--")),isCSSVariableToken=function(e){return!!JS(e)&&QS.test(e.split("/*")[0].trim())},QS=/var\(--(?:[\x2D0-9A-Z_a-z\u017F\u212A]+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*|[\x2D0-9A-Z_a-z\u017F\u212A]+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*,(?:[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:(?![\t-\r \(\)\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uD800-\uDFFF\uFEFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])|[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*\((?:(?:(?![\(\)\uD800-\uDFFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])|\((?:(?![\(\)\uD800-\uDFFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])*\))*\))+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)\)$/i,ZS={test:function(e){return"number"==typeof e},parse:parseFloat,transform:function(e){return e}},$S=_objectSpread2(_objectSpread2({},ZS),{},{transform:function(e){return wS(0,1,e)}}),ew=_objectSpread2(_objectSpread2({},ZS),{},{default:1}),sanitize=function(e){return Math.round(1e5*e)/1e5},tw=/-?(?:[0-9]+(?:\.[0-9]+)?|\.[0-9]+)/g;var rw=/^(?:#[0-9a-f]{3,8}|(?:rgb|h[s\u017F]l)a?\((?:-?[\.0-9]+%?[\t-\r ,\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+){2}-?[\.0-9]+%?[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:[,\/][\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)?(?:\b[0-9]+(?:\.[0-9]+)?|\.[0-9]+)?%?\))$/i,isColorString=function(e,_){return function(S){return Boolean("string"==typeof S&&rw.test(S)&&S.startsWith(e)||_&&!function(e){return null==e}(S)&&Object.prototype.hasOwnProperty.call(S,_))}},splitColor=function(e,_,S){return function(k){if("string"!=typeof k)return k;var E=_slicedToArray(k.match(tw),4),T=E[0],M=E[1],I=E[2],R=E[3];return _defineProperty3(_defineProperty3(_defineProperty3(_defineProperty3({},e,parseFloat(T)),_,parseFloat(M)),S,parseFloat(I)),"alpha",void 0!==R?parseFloat(R):1)}},nw=_objectSpread2(_objectSpread2({},ZS),{},{transform:function(e){return Math.round(function(e){return wS(0,255,e)}(e))}}),iw={test:isColorString("rgb","red"),parse:splitColor("red","green","blue"),transform:function(e){var _=e.red,S=e.green,k=e.blue,E=e.alpha,T=void 0===E?1:E;return"rgba("+nw.transform(_)+", "+nw.transform(S)+", "+nw.transform(k)+", "+sanitize($S.transform(T))+")"}};var aw={test:isColorString("#"),parse:function(e){var _="",S="",k="",E="";return e.length>5?(_=e.substring(1,3),S=e.substring(3,5),k=e.substring(5,7),E=e.substring(7,9)):(_=e.substring(1,2),S=e.substring(2,3),k=e.substring(3,4),E=e.substring(4,5),_+=_,S+=S,k+=k,E+=E),{red:parseInt(_,16),green:parseInt(S,16),blue:parseInt(k,16),alpha:E?parseInt(E,16)/255:1}},transform:iw.transform},createUnitType=function(e){return{test:function(_){return"string"==typeof _&&_.endsWith(e)&&1===_.split(" ").length},parse:parseFloat,transform:function(_){return"".concat(_).concat(e)}}},ow=createUnitType("deg"),sw=D("L",createUnitType("%")),uw=D("p",createUnitType("px")),lw=createUnitType("vh"),cw=createUnitType("vw"),hw=function(){return _objectSpread2(_objectSpread2({},sw),{},{parse:function(e){return sw.parse(e)/100},transform:function(e){return sw.transform(100*e)}})}(),dw={test:isColorString("hsl","hue"),parse:splitColor("hue","saturation","lightness"),transform:function(e){var _=e.hue,S=e.saturation,k=e.lightness,E=e.alpha,T=void 0===E?1:E;return"hsla("+Math.round(_)+", "+sw.transform(sanitize(S))+", "+sw.transform(sanitize(k))+", "+sanitize($S.transform(T))+")"}},fw={test:function(e){return iw.test(e)||aw.test(e)||dw.test(e)},parse:function(e){return iw.test(e)?iw.parse(e):dw.test(e)?dw.parse(e):aw.parse(e)},transform:function(e){return"string"==typeof e?e:e.hasOwnProperty("red")?iw.transform(e):dw.transform(e)},getAnimatableNone:function(e){var _=fw.parse(e);return _.alpha=0,fw.transform(_)}},pw=/(?:#[0-9a-f]{3,8}|(?:rgb|h[s\u017F]l)a?\((?:-?[\.0-9]+%?[\t-\r ,\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+){2}-?[\.0-9]+%?[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:[,\/][\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)?(?:\b[0-9]+(?:\.[0-9]+)?|\.[0-9]+)?%?\))/gi;var vw="number",gw="color",mw=/var[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*\([\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*--(?:[\x2D0-9A-Z_a-z\u017F\u212A]+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*|[\x2D0-9A-Z_a-z\u017F\u212A]+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*,(?:[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:(?![\t-\r \(\)\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uD800-\uDFFF\uFEFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])|[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*\((?:(?:(?![\(\)\uD800-\uDFFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])|\((?:(?![\(\)\uD800-\uDFFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])*\))*\))+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)\)|#[0-9a-f]{3,8}|(?:rgb|h[s\u017F]l)a?\((?:-?[\.0-9]+%?[\t-\r ,\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+){2}-?[\.0-9]+%?[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:[,\/][\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)?(?:\b[0-9]+(?:\.[0-9]+)?|\.[0-9]+)?%?\)|-?(?:[0-9]+(?:\.[0-9]+)?|\.[0-9]+)/gi;function analyseComplexValue(e){var _=e.toString(),S=[],k={color:[],number:[],var:[]},E=[],T=0,M=_.replace(mw,function(e){return fw.test(e)?(k.color.push(T),E.push(gw),S.push(fw.parse(e))):e.startsWith("var(")?(k.var.push(T),E.push("var"),S.push(e)):(k.number.push(T),E.push(vw),S.push(parseFloat(e))),++T,"${}"}).split("${}");return{values:S,split:M,indexes:k,types:E}}function parseComplexValue(e){return analyseComplexValue(e).values}function createTransformer(e){var _=analyseComplexValue(e),S=_.split,k=_.types,E=S.length;return function(e){for(var _="",T=0;T<E;T++)if(_+=S[T],void 0!==e[T]){var M=k[T];_+=M===vw?sanitize(e[T]):M===gw?fw.transform(e[T]):e[T]}return _}}var convertNumbersToZero=function(e){return"number"==typeof e?0:fw.test(e)?fw.getAnimatableNone(e):e};var yw=D("o",{test:function(e){var _,S;return isNaN(e)&&"string"==typeof e&&((null===(_=e.match(tw))||void 0===_?void 0:_.length)||0)+((null===(S=e.match(pw))||void 0===S?void 0:S.length)||0)>0},parse:parseComplexValue,createTransformer:createTransformer,getAnimatableNone:function(e){var _=parseComplexValue(e);return createTransformer(e)(_.map(convertNumbersToZero))}});function hueToRgb(e,_,S){return S<0&&(S+=1),S>1&&(S-=1),S<1/6?e+6*(_-e)*S:S<.5?_:S<2/3?e+(_-e)*(2/3-S)*6:e}function mixImmediate(e,_){return function(S){return S>0?_:e}}var _w=D("m",function(e,_,S){return e+(_-e)*S}),mixLinearColor=function(e,_,S){var k=e*e,E=S*(_*_-k)+k;return E<0?0:Math.sqrt(E)},bw=[aw,iw,dw];function asRGBA(e){var _,S=(_=e,bw.find(function(e){return e.test(_)}));if(!Boolean(S))return!1;var k=S.parse(e);return S===dw&&(k=function(e){var _=e.hue,S=e.saturation,k=e.lightness,E=e.alpha;_/=360,k/=100;var T=0,M=0,I=0;if(S/=100){var R=k<.5?k*(1+S):k+S-k*S,O=2*k-R;T=hueToRgb(O,R,_+1/3),M=hueToRgb(O,R,_),I=hueToRgb(O,R,_-1/3)}else T=M=I=k;return{red:Math.round(255*T),green:Math.round(255*M),blue:Math.round(255*I),alpha:E}}(k)),k}var mixColor=function(e,_){var S=asRGBA(e),k=asRGBA(_);if(!S||!k)return mixImmediate(e,_);var E=_objectSpread2({},S);return function(e){return E.red=mixLinearColor(S.red,k.red,e),E.green=mixLinearColor(S.green,k.green,e),E.blue=mixLinearColor(S.blue,k.blue,e),E.alpha=_w(S.alpha,k.alpha,e),iw.transform(E)}},Sw=new Set(["none","hidden"]);function mixNumber(e,_){return function(S){return _w(e,_,S)}}function getMixer(e){return"number"==typeof e?mixNumber:"string"==typeof e?isCSSVariableToken(e)?mixImmediate:fw.test(e)?mixColor:mixComplex:Array.isArray(e)?mixArray:"object"===_typeof3(e)?fw.test(e)?mixColor:mixObject:mixImmediate}function mixArray(e,_){var S=_toConsumableArray3(e),k=S.length,E=e.map(function(e,S){return getMixer(e)(e,_[S])});return function(e){for(var _=0;_<k;_++)S[_]=E[_](e);return S}}function mixObject(e,_){var S=_objectSpread2(_objectSpread2({},e),_),k={};for(var E in S)void 0!==e[E]&&void 0!==_[E]&&(k[E]=getMixer(e[E])(e[E],_[E]));return function(e){for(var _ in k)S[_]=k[_](e);return S}}var mixComplex=function(e,_){var S=yw.createTransformer(_),k=analyseComplexValue(e),E=analyseComplexValue(_);return k.indexes.var.length===E.indexes.var.length&&k.indexes.color.length===E.indexes.color.length&&k.indexes.number.length>=E.indexes.number.length?Sw.has(e)&&!E.values.length||Sw.has(_)&&!k.values.length?function(e,_){return Sw.has(e)?function(S){return S<=0?e:_}:function(S){return S>=1?_:e}}(e,_):TS(mixArray(function(e,_){for(var S=[],k={color:0,var:0,number:0},E=0;E<_.values.length;E++){var T,M=_.types[E],I=e.indexes[M][k[M]],R=null!==(T=e.values[I])&&void 0!==T?T:0;S[E]=R,k[M]++}return S}(k,E),E.values),S):mixImmediate(e,_)};function mix(e,_,S){return"number"==typeof e&&"number"==typeof _&&"number"==typeof S?_w(e,_,S):getMixer(e)(e,_)}var frameloopDriver=function(e){var passTimestamp=function(_){var S=_.timestamp;return e(S)};return{start:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return WS.update(passTimestamp,e)},stop:function(){return qS(passTimestamp)},now:function(){return XS.isProcessing?XS.timestamp:KS.now()}}},generateLinearEasing=function(e,_){for(var S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,k="",E=Math.max(Math.round(_/S),2),T=0;T<E;T++)k+=Math.round(1e4*e(T/(E-1)))/1e4+", ";return"linear(".concat(k.substring(0,k.length-2),")")},ww=2e4;function calcGeneratorDuration(e){for(var _=0,S=e.next(_);!S.done&&_<ww;)_+=50,S=e.next(_);return _>=ww?1/0:_}function calcGeneratorVelocity(e,_,S){var k=Math.max(_-5,0);return velocityPerSecond(S-e(k),_-k)}var xw=100,kw=10,Cw=1,Aw=0,Ew=800,Tw=.3,Mw=.3,Iw={granular:.01,default:2},Rw={granular:.005,default:.5},Pw=.01,Ow=10,Dw=.05,Lw=1,Fw=.001;function findSpring(e){var _,S,k=e.duration,E=void 0===k?Ew:k,T=e.bounce,M=void 0===T?Tw:T,I=e.velocity,R=void 0===I?Aw:I,O=e.mass,D=void 0===O?Cw:O,L=1-M;L=wS(Dw,Lw,L),E=wS(Pw,Ow,PS(E)),L<1?(_=function(e){var _=e*L,S=_*E,k=_-R,T=calcAngularFreq(e,L),M=Math.exp(-S);return Fw-k/T*M},S=function(e){var S=e*L*E,k=S*R+R,T=Math.pow(L,2)*Math.pow(e,2)*E,M=Math.exp(-S),I=calcAngularFreq(Math.pow(e,2),L);return(-_(e)+Fw>0?-1:1)*((k-T)*M)/I}):(_=function(e){return Math.exp(-e*E)*((e-R)*E+1)-.001},S=function(e){return Math.exp(-e*E)*(E*E*(R-e))});var U=function(e,_,S){for(var k=S,E=1;E<Uw;E++)k-=e(k)/_(k);return k}(_,S,5/E);if(E=RS(E),isNaN(U))return{stiffness:xw,damping:kw,duration:E};var B=Math.pow(U,2)*D;return{stiffness:B,damping:2*L*Math.sqrt(D*B),duration:E}}var Uw=12;function calcAngularFreq(e,_){return e*Math.sqrt(1-_*_)}var Bw=["duration","bounce"],Nw=["stiffness","damping","mass"];function isSpringType(e,_){return _.some(function(_){return void 0!==e[_]})}function spring(){var e,_=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Mw,S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Tw,k="object"!==_typeof3(_)?{visualDuration:_,keyframes:[0,1],bounce:S}:_,E=k.restSpeed,T=k.restDelta,M=k.keyframes[0],I=k.keyframes[k.keyframes.length-1],R={done:!1,value:M},O=function(e){var _=_objectSpread2({velocity:Aw,stiffness:xw,damping:kw,mass:Cw,isResolvedFromDuration:!1},e);if(!isSpringType(e,Nw)&&isSpringType(e,Bw))if(e.visualDuration){var S=e.visualDuration,k=2*Math.PI/(1.2*S),E=k*k,T=2*wS(.05,1,1-(e.bounce||0))*Math.sqrt(E);_=_objectSpread2(_objectSpread2({},_),{},{mass:Cw,stiffness:E,damping:T})}else{var M=findSpring(e);(_=_objectSpread2(_objectSpread2(_objectSpread2({},_),M),{},{mass:Cw})).isResolvedFromDuration=!0}return _}(_objectSpread2(_objectSpread2({},k),{},{velocity:-PS(k.velocity||0)})),D=O.stiffness,L=O.damping,U=O.mass,B=O.duration,z=O.velocity,G=O.isResolvedFromDuration,j=z||0,V=L/(2*Math.sqrt(D*U)),H=I-M,W=PS(Math.sqrt(D/U)),q=Math.abs(H)<5;if(E||(E=q?Iw.granular:Iw.default),T||(T=q?Rw.granular:Rw.default),V<1){var X=calcAngularFreq(W,V);e=function(e){var _=Math.exp(-V*W*e);return I-_*((j+V*W*H)/X*Math.sin(X*e)+H*Math.cos(X*e))}}else if(1===V)e=function(e){return I-Math.exp(-W*e)*(H+(j+W*H)*e)};else{var Y=W*Math.sqrt(V*V-1);e=function(e){var _=Math.exp(-V*W*e),S=Math.min(Y*e,300);return I-_*((j+V*W*H)*Math.sinh(S)+Y*H*Math.cosh(S))/Y}}var K={calculatedDuration:G&&B||null,next:function(_){var S=e(_);if(G)R.done=_>=B;else{var k=0===_?j:0;V<1&&(k=0===_?RS(j):calcGeneratorVelocity(e,_,S));var M=Math.abs(k)<=E,O=Math.abs(I-S)<=T;R.done=M&&O}return R.value=R.done?I:S,R},toString:function(){var e=Math.min(calcGeneratorDuration(K),ww),_=generateLinearEasing(function(_){return K.next(e*_).value},e,30);return e+"ms "+_},toTransition:function(){}};return K}function inertia(e){var _=e.keyframes,S=e.velocity,k=void 0===S?0:S,E=e.power,T=void 0===E?.8:E,M=e.timeConstant,I=void 0===M?325:M,R=e.bounceDamping,O=void 0===R?10:R,D=e.bounceStiffness,L=void 0===D?500:D,U=e.modifyTarget,B=e.min,z=e.max,G=e.restDelta,j=void 0===G?.5:G,V=e.restSpeed,H=_[0],W={done:!1,value:H},nearestBoundary=function(e){return void 0===B?z:void 0===z||Math.abs(B-e)<Math.abs(z-e)?B:z},q=T*k,X=H+q,Y=void 0===U?X:U(X);Y!==X&&(q=Y-H);var K,J,calcDelta=function(e){return-q*Math.exp(-e/I)},calcLatest=function(e){return Y+calcDelta(e)},applyFriction=function(e){var _=calcDelta(e),S=calcLatest(e);W.done=Math.abs(_)<=j,W.value=W.done?Y:S},checkCatchBoundary=function(e){var _;(_=W.value,void 0!==B&&_<B||void 0!==z&&_>z)&&(K=e,J=spring({keyframes:[W.value,nearestBoundary(W.value)],velocity:calcGeneratorVelocity(calcLatest,e,W.value),damping:O,stiffness:L,restDelta:j,restSpeed:V}))};return checkCatchBoundary(0),{calculatedDuration:null,next:function(e){var _=!1;return J||void 0!==K||(_=!0,applyFriction(e),checkCatchBoundary(e)),void 0!==K&&e>=K?J.next(e-K):(!_&&applyFriction(e),W)}}}function interpolate(e,_){var S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},k=S.clamp,E=void 0===k||k,T=S.ease,M=S.mixer,I=e.length;if(xS(I===_.length),1===I)return function(){return _[0]};if(2===I&&_[0]===_[1])return function(){return _[1]};var R=e[0]===e[1];e[0]>e[I-1]&&(e=_toConsumableArray3(e).reverse(),_=_toConsumableArray3(_).reverse());var O=function(e,_,S){for(var k=[],E=S||kS.mix||mix,T=e.length-1,M=0;M<T;M++){var I=E(e[M],e[M+1]);if(_){var R=Array.isArray(_)?_[M]||ES:_;I=TS(R,I)}k.push(I)}return k}(_,T,M),D=O.length,interpolator=function(S){if(R&&S<e[0])return _[0];var k=0;if(D>1)for(;k<e.length-2&&!(S<e[k+1]);k++);var E=MS(e[k],e[k+1],S);return O[k](E)};return E?function(_){return interpolator(wS(e[0],e[I-1],_))}:interpolator}function defaultOffset(e){var _=[0];return function(e,_){for(var S=e[e.length-1],k=1;k<=_;k++){var E=MS(0,_,k);e.push(_w(S,1,E))}}(_,e.length-1),_}function keyframes(e){var _,S,k=e.duration,E=void 0===k?300:k,T=e.keyframes,M=e.times,I=e.ease,R=void 0===I?"easeInOut":I,O=function(e){return Array.isArray(e)&&"number"!=typeof e[0]}(R)?R.map(easingDefinitionToFunction):easingDefinitionToFunction(R),D={done:!1,value:T[0]},L=function(e,_){return e.map(function(e){return e*_})}(M&&M.length===T.length?M:defaultOffset(T),E),U=interpolate(L,T,{ease:Array.isArray(O)?O:(_=T,S=O,_.map(function(){return S||zS}).splice(0,_.length-1))});return{calculatedDuration:E,next:function(e){return D.value=U(e),D.done=e>=E,D}}}spring.applyToOptions=function(e){var _=function(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,S=(arguments.length>2?arguments[2]:void 0)(_objectSpread2(_objectSpread2({},e),{},{keyframes:[0,_]})),k=Math.min(calcGeneratorDuration(S),ww);return{type:"keyframes",ease:function(e){return S.next(k*e).value/_},duration:PS(k)}}(e,100,spring);return e.ease=_.ease,e.duration=RS(_.duration),e.type="keyframes",e};var isNotNull=function(e){return null!==e};function getFinalKeyframe(e,_,S){var k=_.repeat,E=_.repeatType,T=void 0===E?"loop":E,M=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,I=e.filter(isNotNull),R=M<0||k&&"loop"!==T&&k%2==1?0:I.length-1;return R&&void 0!==S?S:I[R]}var zw={decay:inertia,inertia:inertia,tween:keyframes,keyframes:keyframes,spring:spring};function replaceTransitionType(e){"string"==typeof e.type&&(e.type=zw[e.type])}var Gw=function(){return _createClass3(function WithPromise(){_classCallCheck3(this,WithPromise),this.updateFinished()},[{key:"finished",get:function(){return this._finished}},{key:"updateFinished",value:function(){var e=this;this._finished=new Promise(function(_){e.resolve=_})}},{key:"notifyFinished",value:function(){this.resolve()}},{key:"then",value:function(e,_){return this.finished.then(e,_)}}])}(),percentToProgress=function(e){return e/100},jw=function(e){function JSAnimation(e){var _;return _classCallCheck3(this,JSAnimation),(_=_callSuper(this,JSAnimation)).state="idle",_.startTime=null,_.isStopped=!1,_.currentTime=0,_.holdTime=null,_.playbackSpeed=1,_.stop=function(){var e,S,k=_.options.motionValue;k&&k.updatedAt!==KS.now()&&_.tick(KS.now()),_.isStopped=!0,"idle"!==_.state&&(_.teardown(),null===(e=(S=_.options).onStop)||void 0===e||e.call(S))},_.options=e,_.initAnimation(),_.play(),!1===e.autoplay&&_.pause(),_}return _inherits(JSAnimation,e),_createClass3(JSAnimation,[{key:"initAnimation",value:function(){var e=this.options;replaceTransitionType(e);var _=e.type,S=void 0===_?keyframes:_,k=e.repeat,E=void 0===k?0:k,T=e.repeatDelay,M=void 0===T?0:T,I=e.repeatType,R=e.velocity,O=void 0===R?0:R,D=e.keyframes,L=S||keyframes;L!==keyframes&&"number"!=typeof D[0]&&(this.mixKeyframes=TS(percentToProgress,mix(D[0],D[1])),D=[0,100]);var U=L(_objectSpread2(_objectSpread2({},e),{},{keyframes:D}));"mirror"===I&&(this.mirroredGenerator=L(_objectSpread2(_objectSpread2({},e),{},{keyframes:_toConsumableArray3(D).reverse(),velocity:-O}))),null===U.calculatedDuration&&(U.calculatedDuration=calcGeneratorDuration(U));var B=U.calculatedDuration;this.calculatedDuration=B,this.resolvedDuration=B+M,this.totalDuration=this.resolvedDuration*(E+1)-M,this.generator=U}},{key:"updateTime",value:function(e){var _=Math.round(e-this.startTime)*this.playbackSpeed;null!==this.holdTime?this.currentTime=this.holdTime:this.currentTime=_}},{key:"tick",value:function(e){var _=arguments.length>1&&void 0!==arguments[1]&&arguments[1],S=this.generator,k=this.totalDuration,E=this.mixKeyframes,T=this.mirroredGenerator,M=this.resolvedDuration,I=this.calculatedDuration;if(null===this.startTime)return S.next(0);var R=this.options,O=R.delay,D=void 0===O?0:O,L=R.keyframes,U=R.repeat,B=R.repeatType,z=R.repeatDelay,G=R.type,j=R.onUpdate,V=R.finalKeyframe;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-k/this.speed,this.startTime)),_?this.currentTime=e:this.updateTime(e);var H=this.currentTime-D*(this.playbackSpeed>=0?1:-1),W=this.playbackSpeed>=0?H<0:H>k;this.currentTime=Math.max(H,0),"finished"===this.state&&null===this.holdTime&&(this.currentTime=k);var q=this.currentTime,X=S;if(U){var Y=Math.min(this.currentTime,k)/M,K=Math.floor(Y),J=Y%1;!J&&Y>=1&&(J=1),1===J&&K--,K=Math.min(K,U+1),Boolean(K%2)&&("reverse"===B?(J=1-J,z&&(J-=z/M)):"mirror"===B&&(X=T)),q=wS(0,1,J)*M}var Q=W?{done:!1,value:L[0]}:X.next(q);E&&(Q.value=E(Q.value));var Z=Q.done;W||null===I||(Z=this.playbackSpeed>=0?this.currentTime>=k:this.currentTime<=0);var $=null===this.holdTime&&("finished"===this.state||"running"===this.state&&Z);return $&&G!==inertia&&(Q.value=getFinalKeyframe(L,this.options,V,this.speed)),j&&j(Q.value),$&&this.finish(),Q}},{key:"then",value:function(e,_){return this.finished.then(e,_)}},{key:"duration",get:function(){return PS(this.calculatedDuration)}},{key:"iterationDuration",get:function(){var e=(this.options||{}).delay,_=void 0===e?0:e;return this.duration+PS(_)}},{key:"time",get:function(){return PS(this.currentTime)},set:function(e){var _;e=RS(e),this.currentTime=e,null===this.startTime||null!==this.holdTime||0===this.playbackSpeed?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),null===(_=this.driver)||void 0===_||_.start(!1)}},{key:"speed",get:function(){return this.playbackSpeed},set:function(e){this.updateTime(KS.now());var _=this.playbackSpeed!==e;this.playbackSpeed=e,_&&(this.time=PS(this.currentTime))}},{key:"play",value:function(){var e,_,S=this;if(!this.isStopped){var k=this.options,E=k.driver,T=void 0===E?frameloopDriver:E,M=k.startTime;this.driver||(this.driver=T(function(e){return S.tick(e)})),null===(e=(_=this.options).onPlay)||void 0===e||e.call(_);var I=this.driver.now();"finished"===this.state?(this.updateFinished(),this.startTime=I):null!==this.holdTime?this.startTime=I-this.holdTime:this.startTime||(this.startTime=null!=M?M:I),"finished"===this.state&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}}},{key:"pause",value:function(){this.state="paused",this.updateTime(KS.now()),this.holdTime=this.currentTime}},{key:"complete",value:function(){"running"!==this.state&&this.play(),this.state="finished",this.holdTime=null}},{key:"finish",value:function(){var e,_;this.notifyFinished(),this.teardown(),this.state="finished",null===(e=(_=this.options).onComplete)||void 0===e||e.call(_)}},{key:"cancel",value:function(){var e,_;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),null===(e=(_=this.options).onCancel)||void 0===e||e.call(_)}},{key:"teardown",value:function(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}},{key:"stopDriver",value:function(){this.driver&&(this.driver.stop(),this.driver=void 0)}},{key:"sample",value:function(e){return this.startTime=0,this.tick(e,!0)}},{key:"attachTimeline",value:function(e){var _;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),null===(_=this.driver)||void 0===_||_.stop(),e.observe(this)}}])}(Gw);D("J",jw);var radToDeg=function(e){return 180*e/Math.PI},rotate$2=function(e){var _=radToDeg(Math.atan2(e[1],e[0]));return rebaseAngle(_)},Vw={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:function(e){return(Math.abs(e[0])+Math.abs(e[3]))/2},rotate:rotate$2,rotateZ:rotate$2,skewX:function(e){return radToDeg(Math.atan(e[1]))},skewY:function(e){return radToDeg(Math.atan(e[2]))},skew:function(e){return(Math.abs(e[1])+Math.abs(e[2]))/2}},rebaseAngle=function(e){return(e%=360)<0&&(e+=360),e},scaleX=function(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])},scaleY=function(e){return Math.sqrt(e[4]*e[4]+e[5]*e[5])},Hw={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:scaleX,scaleY:scaleY,scale:function(e){return(scaleX(e)+scaleY(e))/2},rotateX:function(e){return rebaseAngle(radToDeg(Math.atan2(e[6],e[5])))},rotateY:function(e){return rebaseAngle(radToDeg(Math.atan2(-e[2],e[0])))},rotateZ:rotate$2,rotate:rotate$2,skewX:function(e){return radToDeg(Math.atan(e[4]))},skewY:function(e){return radToDeg(Math.atan(e[1]))},skew:function(e){return(Math.abs(e[1])+Math.abs(e[4]))/2}};function defaultTransformValue(e){return e.includes("scale")?1:0}function parseValueFromTransform(e,_){if(!e||"none"===e)return defaultTransformValue(_);var S,k,E=e.match(/^matrix3d\(([\t-\r ,-\.0-9e\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+)\)$/);if(E)S=Hw,k=E;else{var T=e.match(/^matrix\(([\t-\r ,-\.0-9e\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+)\)$/);S=Vw,k=T}if(!k)return defaultTransformValue(_);var M=S[_],I=k[1].split(",").map(convertTransformToNumber);return"function"==typeof M?M(I):I[M]}D("u",function(e,_){var S=getComputedStyle(e).transform;return parseValueFromTransform(void 0===S?"none":S,_)});function convertTransformToNumber(e){return parseFloat(e.trim())}var Ww=D("b",["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"]),qw=(D("t",function(){return new Set(Ww)}()),function(e){return e===ZS||e===uw}),Xw=new Set(["x","y","z"]),Yw=Ww.filter(function(e){return!Xw.has(e)});var Kw={width:function(e,_){var S=e.x,k=_.paddingLeft,E=void 0===k?"0":k,T=_.paddingRight,M=void 0===T?"0":T;return S.max-S.min-parseFloat(E)-parseFloat(M)},height:function(e,_){var S=e.y,k=_.paddingTop,E=void 0===k?"0":k,T=_.paddingBottom,M=void 0===T?"0":T;return S.max-S.min-parseFloat(E)-parseFloat(M)},top:function(e,_){var S=_.top;return parseFloat(S)},left:function(e,_){var S=_.left;return parseFloat(S)},bottom:function(e,_){var S=e.y,k=_.top;return parseFloat(k)+(S.max-S.min)},right:function(e,_){var S=e.x,k=_.left;return parseFloat(k)+(S.max-S.min)},x:function(e,_){return parseValueFromTransform(_.transform,"x")},y:function(e,_){return parseValueFromTransform(_.transform,"y")}};Kw.translateX=Kw.x,Kw.translateY=Kw.y;var Jw=new Set,Qw=!1,Zw=!1,$w=!1;function measureAllKeyframes(){if(Zw){var e=Array.from(Jw).filter(function(e){return e.needsMeasurement}),_=new Set(e.map(function(e){return e.element})),S=new Map;_.forEach(function(e){var _=function(e){var _=[];return Yw.forEach(function(S){var k=e.getValue(S);void 0!==k&&(_.push([S,k.get()]),k.set(S.startsWith("scale")?1:0))}),_}(e);_.length&&(S.set(e,_),e.render())}),e.forEach(function(e){return e.measureInitialState()}),_.forEach(function(e){e.render();var _=S.get(e);_&&_.forEach(function(_){var S,k=_slicedToArray(_,2),E=k[0],T=k[1];null===(S=e.getValue(E))||void 0===S||S.set(T)})}),e.forEach(function(e){return e.measureEndState()}),e.forEach(function(e){void 0!==e.suspendedScrollY&&window.scrollTo(0,e.suspendedScrollY)})}Zw=!1,Qw=!1,Jw.forEach(function(e){return e.complete($w)}),Jw.clear()}function readAllKeyframes(){Jw.forEach(function(e){e.readKeyframes(),e.needsMeasurement&&(Zw=!0)})}var ex=function(){return _createClass3(function KeyframeResolver(e,_,S,k,E){var T=arguments.length>5&&void 0!==arguments[5]&&arguments[5];_classCallCheck3(this,KeyframeResolver),this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=_toConsumableArray3(e),this.onComplete=_,this.name=S,this.motionValue=k,this.element=E,this.isAsync=T},[{key:"scheduleResolve",value:function(){this.state="scheduled",this.isAsync?(Jw.add(this),Qw||(Qw=!0,WS.read(readAllKeyframes),WS.resolveKeyframes(measureAllKeyframes))):(this.readKeyframes(),this.complete())}},{key:"readKeyframes",value:function(){var e=this.unresolvedKeyframes,_=this.name,S=this.element,k=this.motionValue;if(null===e[0]){var E=null==k?void 0:k.get(),T=e[e.length-1];if(void 0!==E)e[0]=E;else if(S&&_){var M=S.readValue(_,T);null!=M&&(e[0]=M)}void 0===e[0]&&(e[0]=T),k&&void 0===E&&k.set(e[0])}!function(e){for(var _=1;_<e.length;_++){var S;null!==(S=e[_])&&void 0!==S||(e[_]=e[_-1])}}(e)}},{key:"setFinalKeyframe",value:function(){}},{key:"measureInitialState",value:function(){}},{key:"renderEndStyles",value:function(){}},{key:"measureEndState",value:function(){}},{key:"complete",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Jw.delete(this)}},{key:"cancel",value:function(){"scheduled"===this.state&&(Jw.delete(this),this.state="pending")}},{key:"resume",value:function(){"pending"===this.state&&this.scheduleResolve()}}])}();D("K",ex);var tx=D("$",memo(function(){return void 0!==window.ScrollTimeline})),rx={};function memoSupports(e,_){var S=memo(e);return function(){var e;return null!==(e=rx[_])&&void 0!==e?e:S()}}var nx=memoSupports(function(){try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch(fo){return!1}return!0},"linearEasing"),cubicBezierAsString=function(e){var _=_slicedToArray(e,4),S=_[0],k=_[1],E=_[2],T=_[3];return"cubic-bezier(".concat(S,", ").concat(k,", ").concat(E,", ").concat(T,")")},ix={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:cubicBezierAsString([0,.65,.55,1]),circOut:cubicBezierAsString([.55,0,1,.45]),backIn:cubicBezierAsString([.31,.01,.66,-.59]),backOut:cubicBezierAsString([.33,1.53,.69,.99])};function mapEasingToNativeEasing(e,_){return e?"function"==typeof e?nx()?generateLinearEasing(e,_):"ease-out":isBezierDefinition(e)?cubicBezierAsString(e):Array.isArray(e)?e.map(function(e){return mapEasingToNativeEasing(e,_)||ix.easeOut}):ix[e]:void 0}function startWaapiAnimation(e,_,S){var k=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},E=k.delay,T=void 0===E?0:E,M=k.duration,I=void 0===M?300:M,R=k.repeat,O=void 0===R?0:R,D=k.repeatType,L=void 0===D?"loop":D,U=k.ease,B=void 0===U?"easeOut":U,z=k.times,G=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,j=_defineProperty3({},_,S);z&&(j.offset=z);var V=mapEasingToNativeEasing(B,I);Array.isArray(V)&&(j.easing=V);var H={delay:T,duration:I,easing:Array.isArray(V)?"linear":V,fill:"both",iterations:O+1,direction:"reverse"===L?"alternate":"normal"};return G&&(H.pseudoElement=G),e.animate(j,H)}function isGenerator(e){return"function"==typeof e&&"applyToOptions"in e}var ax=function(e){function NativeAnimation(e){var _;if(_classCallCheck3(this,NativeAnimation),(_=_callSuper(this,NativeAnimation)).finishedTime=null,_.isStopped=!1,!e)return _possibleConstructorReturn(_);var S=e.element,k=e.name,E=e.keyframes,T=e.pseudoElement,I=e.allowFlatten,R=void 0!==I&&I,O=e.finalKeyframe,D=e.onComplete;_.isPseudoElement=Boolean(T),_.allowFlatten=R,_.options=e,xS("string"!=typeof e.type);var L=function(e){var _,S,k=e.type,E=_objectWithoutProperties3(e,M);return isGenerator(k)&&nx()?k.applyToOptions(E):(null!==(_=E.duration)&&void 0!==_||(E.duration=300),null!==(S=E.ease)&&void 0!==S||(E.ease="easeOut"),E)}(e);return _.animation=startWaapiAnimation(S,k,E,L,T),!1===L.autoplay&&_.animation.pause(),_.animation.onfinish=function(){if(_.finishedTime=_.time,!T){var e=getFinalKeyframe(E,_.options,O,_.speed);_.updateMotionValue?_.updateMotionValue(e):function(e,_,S){!function(e){return e.startsWith("--")}(_)?e.style[_]=S:e.style.setProperty(_,S)}(S,k,e),_.animation.cancel()}null==D||D(),_.notifyFinished()},_}return _inherits(NativeAnimation,e),_createClass3(NativeAnimation,[{key:"play",value:function(){this.isStopped||(this.animation.play(),"finished"===this.state&&this.updateFinished())}},{key:"pause",value:function(){this.animation.pause()}},{key:"complete",value:function(){var e,_;null===(e=(_=this.animation).finish)||void 0===e||e.call(_)}},{key:"cancel",value:function(){try{this.animation.cancel()}catch(fo){}}},{key:"stop",value:function(){if(!this.isStopped){this.isStopped=!0;var e=this.state;"idle"!==e&&"finished"!==e&&(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}}},{key:"commitStyles",value:function(){var e,_;this.isPseudoElement||(null===(e=(_=this.animation).commitStyles)||void 0===e||e.call(_))}},{key:"duration",get:function(){var e,_,S=(null===(e=this.animation.effect)||void 0===e||null===(_=e.getComputedTiming)||void 0===_?void 0:_.call(e).duration)||0;return PS(Number(S))}},{key:"iterationDuration",get:function(){var e=(this.options||{}).delay,_=void 0===e?0:e;return this.duration+PS(_)}},{key:"time",get:function(){return PS(Number(this.animation.currentTime)||0)},set:function(e){this.finishedTime=null,this.animation.currentTime=RS(e)}},{key:"speed",get:function(){return this.animation.playbackRate},set:function(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}},{key:"state",get:function(){return null!==this.finishedTime?"finished":this.animation.playState}},{key:"startTime",get:function(){return Number(this.animation.startTime)},set:function(e){this.animation.startTime=e}},{key:"attachTimeline",value:function(e){var _,S=e.timeline,k=e.observe;this.allowFlatten&&(null===(_=this.animation.effect)||void 0===_||_.updateTiming({easing:"linear"}));return this.animation.onfinish=null,S&&tx()?(this.animation.timeline=S,ES):k(this)}}])}(Gw),ox={anticipate:anticipate,backInOut:LS,circInOut:US};function replaceStringEasing(e){"string"==typeof e.ease&&e.ease in ox&&(e.ease=ox[e.ease])}var sx=function(e){function NativeAnimationExtended(e){var _;return _classCallCheck3(this,NativeAnimationExtended),replaceStringEasing(e),replaceTransitionType(e),_=_callSuper(this,NativeAnimationExtended,[e]),e.startTime&&(_.startTime=e.startTime),_.options=e,_}return _inherits(NativeAnimationExtended,e),_createClass3(NativeAnimationExtended,[{key:"updateMotionValue",value:function(e){var _,S=this.options,k=S.motionValue,E=(S.onUpdate,S.onComplete,S.element,_objectWithoutProperties3(S,I));if(k)if(void 0===e){var T=new jw(_objectSpread2(_objectSpread2({},E),{},{autoplay:!1})),M=RS(null!==(_=this.finishedTime)&&void 0!==_?_:this.time);k.setWithVelocity(T.sample(M-10).value,T.sample(M).value,10),T.stop()}else k.set(e)}}])}(ax),isAnimatable=function(e,_){return"zIndex"!==_&&(!("number"!=typeof e&&!Array.isArray(e))||!("string"!=typeof e||!yw.test(e)&&"0"!==e||e.startsWith("url(")))};function makeAnimationInstant(e){e.duration=0,e.type="keyframes"}var ux=new Set(["opacity","clipPath","filter","transform"]),lx=memo(function(){return Object.hasOwnProperty.call(Element.prototype,"animate")});var cx=function(e){function AsyncMotionValueAnimation(e){var _,S,k=e.autoplay,E=void 0===k||k,T=e.delay,M=void 0===T?0:T,I=e.type,O=void 0===I?"keyframes":I,D=e.repeat,L=void 0===D?0:D,U=e.repeatDelay,B=void 0===U?0:U,z=e.repeatType,G=void 0===z?"loop":z,j=e.keyframes,V=e.name,H=e.motionValue,W=e.element,q=_objectWithoutProperties3(e,R);_classCallCheck3(this,AsyncMotionValueAnimation),(S=_callSuper(this,AsyncMotionValueAnimation)).stop=function(){var e,_,k;S._animation&&(S._animation.stop(),null===(_=(k=S).stopTimeline)||void 0===_||_.call(k));null===(e=S.keyframeResolver)||void 0===e||e.cancel()},S.createdAt=KS.now();var X=_objectSpread2({autoplay:E,delay:M,type:O,repeat:L,repeatDelay:B,repeatType:G,name:V,motionValue:H,element:W},q),Y=(null==W?void 0:W.KeyframeResolver)||ex;return S.keyframeResolver=new Y(j,function(e,_,k){return S.onKeyframesResolved(e,_,X,!k)},V,H,W),null===(_=S.keyframeResolver)||void 0===_||_.scheduleResolve(),S}return _inherits(AsyncMotionValueAnimation,e),_createClass3(AsyncMotionValueAnimation,[{key:"onKeyframesResolved",value:function(e,_,S,k){var E=this;this.keyframeResolver=void 0;var T=S.name,M=S.type,I=S.velocity,R=S.delay,O=S.isHandoff,D=S.onUpdate;this.resolvedAt=KS.now(),function(e,_,S,k){var E=e[0];if(null===E)return!1;if("display"===_||"visibility"===_)return!0;var T=e[e.length-1],M=isAnimatable(E,_),I=isAnimatable(T,_);return!(!M||!I)&&(function(e){var _=e[0];if(1===e.length)return!0;for(var S=0;S<e.length;S++)if(e[S]!==_)return!0}(e)||("spring"===S||isGenerator(S))&&k)}(e,T,M,I)||(!kS.instantAnimations&&R||null==D||D(getFinalKeyframe(e,S,_)),e[0]=e[e.length-1],makeAnimationInstant(S),S.repeat=0);var L=_objectSpread2(_objectSpread2({startTime:k?this.resolvedAt&&this.resolvedAt-this.createdAt>40?this.resolvedAt:this.createdAt:void 0,finalKeyframe:_},S),{},{keyframes:e}),U=!O&&function(e){var _,S=e.motionValue,k=e.name,E=e.repeatDelay,T=e.repeatType,M=e.damping,I=e.type;if(!((null==S||null===(_=S.owner)||void 0===_?void 0:_.current)instanceof HTMLElement))return!1;var R=S.owner.getProps(),O=R.onUpdate,D=R.transformTemplate;return lx()&&k&&ux.has(k)&&("transform"!==k||!D)&&!O&&!E&&"mirror"!==T&&0!==M&&"inertia"!==I}(L)?new sx(_objectSpread2(_objectSpread2({},L),{},{element:L.motionValue.owner.current})):new jw(L);U.finished.then(function(){return E.notifyFinished()}).catch(ES),this.pendingTimeline&&(this.stopTimeline=U.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=U}},{key:"finished",get:function(){return this._animation?this.animation.finished:this._finished}},{key:"then",value:function(e,_){return this.finished.finally(e).then(function(){})}},{key:"animation",get:function(){var e;this._animation||(null===(e=this.keyframeResolver)||void 0===e||e.resume(),$w=!0,readAllKeyframes(),measureAllKeyframes(),$w=!1);return this._animation}},{key:"duration",get:function(){return this.animation.duration}},{key:"iterationDuration",get:function(){return this.animation.iterationDuration}},{key:"time",get:function(){return this.animation.time},set:function(e){this.animation.time=e}},{key:"speed",get:function(){return this.animation.speed},set:function(e){this.animation.speed=e}},{key:"state",get:function(){return this.animation.state}},{key:"startTime",get:function(){return this.animation.startTime}},{key:"attachTimeline",value:function(e){var _=this;return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,function(){return _.stop()}}},{key:"play",value:function(){this.animation.play()}},{key:"pause",value:function(){this.animation.pause()}},{key:"complete",value:function(){this.animation.complete()}},{key:"cancel",value:function(){var e;this._animation&&this.animation.cancel(),null===(e=this.keyframeResolver)||void 0===e||e.cancel()}}])}(Gw);D("A",cx);var hx=/^var\(--(?:([\x2D0-9A-Z_a-z]+)|([\x2D0-9A-Z_a-z]+), ?([ #%\(\),-\.0-9A-Za-z]+))\)/;function getVariableValue(e,_){var S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,k=function(e){var _=hx.exec(e);if(!_)return[,];var S=_slicedToArray(_,4),k=S[1],E=S[2],T=S[3];return["--".concat(null!=k?k:E),T]}(e),E=_slicedToArray(k,2),T=E[0],M=E[1];if(T){var I=window.getComputedStyle(_).getPropertyValue(T);if(I){var R=I.trim();return CS(R)?parseFloat(R):R}return isCSSVariableToken(M)?getVariableValue(M,_,S+1):M}}var dx=D("z",new Set(["width","height","top","left","right","bottom"].concat(_toConsumableArray3(Ww)))),testValueType=function(e){return function(_){return _.test(e)}},fx=[ZS,uw,sw,ow,cw,lw,{test:function(e){return"auto"===e},parse:function(e){return e}}],findDimensionValueType=function(e){return fx.find(testValueType(e))};function isNone(e){return"number"==typeof e?0===e:null===e||("none"===e||"0"===e||AS(e))}var px=new Set(["brightness","contrast","saturate","opacity"]);function applyDefaultFilter(e){var _=_slicedToArray(e.slice(0,-1).split("("),2),S=_[0],k=_[1];if("drop-shadow"===S)return e;var E=_slicedToArray(k.match(tw)||[],1)[0];if(!E)return e;var T=k.replace(E,""),M=px.has(S)?1:0;return E!==k&&(M*=100),S+"("+M+T+")"}var vx=/\b([\x2Da-z]*)\((?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?\)/g,gx=_objectSpread2(_objectSpread2({},yw),{},{getAnimatableNone:function(e){var _=e.match(vx);return _?_.map(applyDefaultFilter).join(" "):e}}),mx=_objectSpread2(_objectSpread2({},ZS),{},{transform:Math.round}),yx=D("n",_objectSpread2(_objectSpread2({borderWidth:uw,borderTopWidth:uw,borderRightWidth:uw,borderBottomWidth:uw,borderLeftWidth:uw,borderRadius:uw,radius:uw,borderTopLeftRadius:uw,borderTopRightRadius:uw,borderBottomRightRadius:uw,borderBottomLeftRadius:uw,width:uw,maxWidth:uw,height:uw,maxHeight:uw,top:uw,right:uw,bottom:uw,left:uw,padding:uw,paddingTop:uw,paddingRight:uw,paddingBottom:uw,paddingLeft:uw,margin:uw,marginTop:uw,marginRight:uw,marginBottom:uw,marginLeft:uw,backgroundPositionX:uw,backgroundPositionY:uw},{rotate:ow,rotateX:ow,rotateY:ow,rotateZ:ow,scale:ew,scaleX:ew,scaleY:ew,scaleZ:ew,skew:ow,skewX:ow,skewY:ow,distance:uw,translateX:uw,translateY:uw,translateZ:uw,x:uw,y:uw,z:uw,perspective:uw,transformPerspective:uw,opacity:$S,originX:hw,originY:hw,originZ:uw}),{},{zIndex:mx,fillOpacity:$S,strokeOpacity:$S,numOctaves:mx})),_x=_objectSpread2(_objectSpread2({},yx),{},{color:fw,backgroundColor:fw,outlineColor:fw,fill:fw,stroke:fw,borderColor:fw,borderTopColor:fw,borderRightColor:fw,borderBottomColor:fw,borderLeftColor:fw,filter:gx,WebkitFilter:gx}),bx=D("v",function(e){return _x[e]});function getAnimatableNone(e,_){var S=bx(e);return S!==gx&&(S=yw),S.getAnimatableNone?S.getAnimatableNone(_):void 0}var Sx=new Set(["auto","none","0"]);var wx=function(e){function DOMKeyframesResolver(e,_,S,k,E){return _classCallCheck3(this,DOMKeyframesResolver),_callSuper(this,DOMKeyframesResolver,[e,_,S,k,E,!0])}return _inherits(DOMKeyframesResolver,e),_createClass3(DOMKeyframesResolver,[{key:"readKeyframes",value:function(){var e=this.unresolvedKeyframes,_=this.element,S=this.name;if(_&&_.current){_superPropGet(DOMKeyframesResolver,"readKeyframes",this,3)([]);for(var k=0;k<e.length;k++){var E=e[k];if("string"==typeof E&&(E=E.trim(),isCSSVariableToken(E))){var T=getVariableValue(E,_.current);void 0!==T&&(e[k]=T),k===e.length-1&&(this.finalKeyframe=E)}}if(this.resolveNoneKeyframes(),dx.has(S)&&2===e.length){var M=_slicedToArray(e,2),I=M[0],R=M[1],O=findDimensionValueType(I),D=findDimensionValueType(R);if(O!==D)if(qw(O)&&qw(D))for(var L=0;L<e.length;L++){var U=e[L];"string"==typeof U&&(e[L]=parseFloat(U))}else Kw[S]&&(this.needsMeasurement=!0)}}}},{key:"resolveNoneKeyframes",value:function(){for(var e=this.unresolvedKeyframes,_=this.name,S=[],k=0;k<e.length;k++)(null===e[k]||isNone(e[k]))&&S.push(k);S.length&&function(e,_,S){for(var k=0,E=void 0;k<e.length&&!E;){var T=e[k];"string"==typeof T&&!Sx.has(T)&&analyseComplexValue(T).values.length&&(E=e[k]),k++}if(E&&S){var M,I=_createForOfIteratorHelper2(_);try{for(I.s();!(M=I.n()).done;)e[M.value]=getAnimatableNone(S,E)}catch(R){I.e(R)}finally{I.f()}}}(e,S,_)}},{key:"measureInitialState",value:function(){var e=this.element,_=this.unresolvedKeyframes,S=this.name;if(e&&e.current){"height"===S&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Kw[S](e.measureViewportBox(),window.getComputedStyle(e.current)),_[0]=this.measuredOrigin;var k=_[_.length-1];void 0!==k&&e.getValue(S,k).jump(k,!1)}}},{key:"measureEndState",value:function(){var e,_=this.element,S=this.name,k=this.unresolvedKeyframes;if(_&&_.current){var E=_.getValue(S);E&&E.jump(this.measuredOrigin,!1);var T=k.length-1,M=k[T];k[T]=Kw[S](_.measureViewportBox(),window.getComputedStyle(_.current)),null!==M&&void 0===this.finalKeyframe&&(this.finalKeyframe=M),null!==(e=this.removedTransforms)&&void 0!==e&&e.length&&this.removedTransforms.forEach(function(e){var S=_slicedToArray(e,2),k=S[0],E=S[1];_.getValue(k).set(E)}),this.resolveNoneKeyframes()}}}])}(ex);function resolveElements(e,_,S){if(e instanceof EventTarget)return[e];if("string"==typeof e){var k=document.querySelectorAll(e);return k?Array.from(k):[]}return Array.from(e)}D("D",wx);D("g",function(e,_){return _&&"number"==typeof e?_.transform(e):e});function isHTMLElement(e){return isObject$1(e)&&"offsetHeight"in e}var xx=D("a2",{current:void 0}),kx=function(){return _createClass3(function MotionValue(e){var _=this,S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck3(this,MotionValue),this.canTrackVelocity=null,this.events={},this.updateAndNotify=function(e){var S,k=KS.now();if((_.updatedAt!==k&&_.setPrevFrameValue(),_.prev=_.current,_.setCurrent(e),_.current!==_.prev)&&(null===(S=_.events.change)||void 0===S||S.notify(_.current),_.dependents)){var E,T=_createForOfIteratorHelper2(_.dependents);try{for(T.s();!(E=T.n()).done;){E.value.dirty()}}catch(M){T.e(M)}finally{T.f()}}},this.hasAnimated=!1,this.setCurrent(e),this.owner=S.owner},[{key:"setCurrent",value:function(e){var _;this.current=e,this.updatedAt=KS.now(),null===this.canTrackVelocity&&void 0!==e&&(this.canTrackVelocity=(_=this.current,!isNaN(parseFloat(_))))}},{key:"setPrevFrameValue",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.current;this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}},{key:"onChange",value:function(e){return this.on("change",e)}},{key:"on",value:function(e,_){var S=this;this.events[e]||(this.events[e]=new IS);var k=this.events[e].add(_);return"change"===e?function(){k(),WS.read(function(){S.events.change.getSize()||S.stop()})}:k}},{key:"clearListeners",value:function(){for(var e in this.events)this.events[e].clear()}},{key:"attach",value:function(e,_){this.passiveEffect=e,this.stopPassiveEffect=_}},{key:"set",value:function(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}},{key:"setWithVelocity",value:function(e,_,S){this.set(_),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-S}},{key:"jump",value:function(e){var _=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,_&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}},{key:"dirty",value:function(){var e;null===(e=this.events.change)||void 0===e||e.notify(this.current)}},{key:"addDependent",value:function(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}},{key:"removeDependent",value:function(e){this.dependents&&this.dependents.delete(e)}},{key:"get",value:function(){return xx.current&&xx.current.push(this),this.current}},{key:"getPrevious",value:function(){return this.prev}},{key:"getVelocity",value:function(){var e=KS.now();if(!this.canTrackVelocity||void 0===this.prevFrameValue||e-this.updatedAt>30)return 0;var _=Math.min(this.updatedAt-this.prevUpdatedAt,30);return velocityPerSecond(parseFloat(this.current)-parseFloat(this.prevFrameValue),_)}},{key:"start",value:function(e){var _=this;return this.stop(),new Promise(function(S){_.hasAnimated=!0,_.animation=e(S),_.events.animationStart&&_.events.animationStart.notify()}).then(function(){_.events.animationComplete&&_.events.animationComplete.notify(),_.clearAnimation()})}},{key:"stop",value:function(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}},{key:"isAnimating",value:function(){return!!this.animation}},{key:"clearAnimation",value:function(){delete this.animation}},{key:"destroy",value:function(){var e,_;null===(e=this.dependents)||void 0===e||e.clear(),null===(_=this.events.destroy)||void 0===_||_.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}])}();var Cx=createRenderBatcher(queueMicrotask,!1).schedule;D("r",Cx);var Ax={x:!1,y:!1};function isDragActive(){return Ax.x||Ax.y}function setupGesture(e,_){var S=resolveElements(e),k=new AbortController;return[S,_objectSpread2(_objectSpread2({passive:!0},_),{},{signal:k.signal}),function(){return k.abort()}]}function isValidHover(e){return!("touch"===e.pointerType||isDragActive())}var _isNodeOrChild=function(e,_){return!!_&&(e===_||_isNodeOrChild(e,_.parentElement))},Ex=D("B",function(e){return"mouse"===e.pointerType?"number"!=typeof e.button||e.button<=0:!1!==e.isPrimary}),Tx=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);var Mx=new WeakSet;function filterEvents(e){return function(_){"Enter"===_.key&&e(_)}}function firePointerEvent(e,_){e.dispatchEvent(new PointerEvent("pointer"+_,{isPrimary:!0,bubbles:!0}))}var enableKeyboardPress=function(e,_){var S=e.currentTarget;if(S){var k=filterEvents(function(){if(!Mx.has(S)){firePointerEvent(S,"down");var e=filterEvents(function(){firePointerEvent(S,"up")});S.addEventListener("keyup",e,_),S.addEventListener("blur",function(){return firePointerEvent(S,"cancel")},_)}});S.addEventListener("keydown",k,_),S.addEventListener("blur",function(){return S.removeEventListener("keydown",k)},_)}};function isValidPressEvent(e){return Ex(e)&&!isDragActive()}function isSVGElement(e){return isObject$1(e)&&"ownerSVGElement"in e}var Ix,Rx=new WeakMap,getSize=function(e,_,S){return function(k,E){return E&&E[0]?E[0][e+"Size"]:isSVGElement(k)&&"getBBox"in k?k.getBBox()[_]:k[S]}},Px=getSize("inline","width","offsetWidth"),Ox=getSize("block","height","offsetHeight");function notifyTarget(e){var _,S=e.target,k=e.borderBoxSize;null===(_=Rx.get(S))||void 0===_||_.forEach(function(e){e(S,{get width(){return Px(S,k)},get height(){return Ox(S,k)}})})}function notifyAll(e){e.forEach(notifyTarget)}var Dx,Lx=new Set;var Fx=D("c",function(e){return Boolean(e&&e.getVelocity)});function parseValue(e,_){return _?e+_:e}function asNumber(e){return"number"==typeof e?e:parseFloat(e)}var Ux=[].concat(fx,[fw,yw]);D("l",function(e){return Ux.find(testValueType(e))});function assignRef(e,_){return"function"==typeof e?e(_):e&&(e.current=_),e}var Bx="undefined"!=typeof window?z.useLayoutEffect:z.useEffect,Nx=new WeakMap;function ItoI(e){return e}var SideCar=function(e){var _=e.sideCar,S=__rest(e,["sideCar"]);if(!_)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var k=_.read();if(!k)throw new Error("Sidecar medium not found");return z.createElement(k,go({},S))};SideCar.isSideCarExport=!0;D("a$",function(){if("undefined"!=typeof __webpack_nonce__)return __webpack_nonce__});var zx=new WeakMap,Gx=new WeakMap,jx={},Vx=0,_unwrapHost=function(e){return e&&(e.host||_unwrapHost(e.parentNode))},applyAttributeToOthers=function(e,_,S,k){var E=function(e,_){return _.map(function(_){if(e.contains(_))return _;var S=_unwrapHost(_);return S&&e.contains(S)?S:null}).filter(function(e){return Boolean(e)})}(_,Array.isArray(e)?e:[e]);jx[S]||(jx[S]=new WeakMap);var T=jx[S],M=[],I=new Set,R=new Set(E),_keep=function(e){e&&!I.has(e)&&(I.add(e),_keep(e.parentNode))};E.forEach(_keep);var _deep=function(e){e&&!R.has(e)&&Array.prototype.forEach.call(e.children,function(e){if(I.has(e))_deep(e);else try{var _=e.getAttribute(k),E=null!==_&&"false"!==_,R=(zx.get(e)||0)+1,O=(T.get(e)||0)+1;zx.set(e,R),T.set(e,O),M.push(e),1===R&&E&&Gx.set(e,!0),1===O&&e.setAttribute(S,"true"),E||e.setAttribute(k,"true")}catch(fo){}})};return _deep(_),I.clear(),Vx++,function(){M.forEach(function(e){var _=zx.get(e)-1,E=T.get(e)-1;zx.set(e,_),T.set(e,E),_||(Gx.has(e)||e.removeAttribute(k),Gx.delete(e)),E||e.removeAttribute(S)}),--Vx||(zx=new WeakMap,zx=new WeakMap,Gx=new WeakMap,jx={})}},Hx=(D("b2",function(e,_,S){void 0===S&&(S="data-aria-hidden");var k=Array.from(Array.isArray(e)?e:[e]),E=function(e){return"undefined"==typeof document?null:(Array.isArray(e)?e[0]:e).ownerDocument.body}(e);return E?(k.push.apply(k,Array.from(E.querySelectorAll("[aria-live], script"))),applyAttributeToOthers(k,E,S,"aria-hidden")):function(){return null}}),1e-6),Wx="undefined"!=typeof Float32Array?Float32Array:Array;D("bC",function(e,_,S,k,E){var T=1/Math.tan(_/2);if(e[0]=T/S,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=T,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=E&&E!==1/0){var M=1/(k-E);e[10]=(E+k)*M,e[14]=2*E*k*M}else e[10]=-1,e[14]=-2*k;return e});function create$3(){var e=new Wx(3);return Wx!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function fromValues$1(e,_,S){var k=new Wx(3);return k[0]=e,k[1]=_,k[2]=S,k}function normalize$5(e,_){var S=_[0],k=_[1],E=_[2],T=S*S+k*k+E*E;return T>0&&(T=1/Math.sqrt(T)),e[0]=_[0]*T,e[1]=_[1]*T,e[2]=_[2]*T,e}function dot$3(e,_){return e[0]*_[0]+e[1]*_[1]+e[2]*_[2]}function cross$1(e,_,S){var k=_[0],E=_[1],T=_[2],M=S[0],I=S[1],R=S[2];return e[0]=E*R-T*I,e[1]=T*M-k*R,e[2]=k*I-E*M,e}function create$1(){var e=new Wx(4);return Wx!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function setAxisAngle$1(e,_,S){S*=.5;var k=Math.sin(S);return e[0]=k*_[0],e[1]=k*_[1],e[2]=k*_[2],e[3]=Math.cos(S),e}function slerp$1(e,_,S,k){var E,T,M,I,R,O=_[0],D=_[1],L=_[2],U=_[3],B=S[0],z=S[1],G=S[2],j=S[3];return(T=O*B+D*z+L*G+U*j)<0&&(T=-T,B=-B,z=-z,G=-G,j=-j),1-T>Hx?(E=Math.acos(T),M=Math.sin(E),I=Math.sin((1-k)*E)/M,R=Math.sin(k*E)/M):(I=1-k,R=k),e[0]=I*O+R*B,e[1]=I*D+R*z,e[2]=I*L+R*G,e[3]=I*U+R*j,e}create$3(),function(){var e,_=(e=new Wx(4),Wx!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e)}();var qx;D("bP",function(e,_){var S=_[0],k=_[1],E=_[2],T=_[3],M=S*S+k*k+E*E+T*T;return M>0&&(M=1/Math.sqrt(M)),e[0]=S*M,e[1]=k*M,e[2]=E*M,e[3]=T*M,e});function create(){var e=new Wx(2);return Wx!=Float32Array&&(e[0]=0,e[1]=0),e}create$3(),fromValues$1(1,0,0),fromValues$1(0,1,0),create$1(),create$1(),qx=new Wx(9),Wx!=Float32Array&&(qx[1]=0,qx[2]=0,qx[3]=0,qx[5]=0,qx[6]=0,qx[7]=0),qx[0]=1,qx[4]=1,qx[8]=1;D("bI",function(e,_,S){return e[0]=_[0]-S[0],e[1]=_[1]-S[1],e}),D("bK",function(e){var _=e[0],S=e[1];return _*_+S*S});function bind(e,_){return function(){return e.apply(_,arguments)}}!function(){var e=create()}();var Xx,Yx=Object.prototype.toString,Kx=Object.getPrototypeOf,Jx=Symbol.iterator,Qx=Symbol.toStringTag,Zx=(Xx=Object.create(null),function(e){var _=Yx.call(e);return Xx[_]||(Xx[_]=_.slice(8,-1).toLowerCase())}),kindOfTest=function(e){return e=e.toLowerCase(),function(_){return Zx(_)===e}},typeOfTest=function(e){return function(_){return _typeof3(_)===e}},$x=Array.isArray,ek=typeOfTest("undefined");function isBuffer(e){return null!==e&&!ek(e)&&null!==e.constructor&&!ek(e.constructor)&&nk(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}var tk=kindOfTest("ArrayBuffer");var rk=typeOfTest("string"),nk=typeOfTest("function"),ik=typeOfTest("number"),isObject=function(e){return null!==e&&"object"===_typeof3(e)},isPlainObject=function(e){if("object"!==Zx(e))return!1;var _=Kx(e);return!(null!==_&&_!==Object.prototype&&null!==Object.getPrototypeOf(_)||Qx in e||Jx in e)},ak=kindOfTest("Date"),ok=kindOfTest("File"),sk=kindOfTest("Blob"),uk=kindOfTest("FileList"),lk=kindOfTest("URLSearchParams"),ck=_slicedToArray(["ReadableStream","Request","Response","Headers"].map(kindOfTest),4),hk=ck[0],dk=ck[1],fk=ck[2],pk=ck[3];function forEach(e,_){var S,k,E=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).allOwnKeys,T=void 0!==E&&E;if(null!=e)if("object"!==_typeof3(e)&&(e=[e]),$x(e))for(S=0,k=e.length;S<k;S++)_.call(null,e[S],S,e);else{if(isBuffer(e))return;var M,I=T?Object.getOwnPropertyNames(e):Object.keys(e),R=I.length;for(S=0;S<R;S++)M=I[S],_.call(null,e[M],M,e)}}function findKey(e,_){if(isBuffer(e))return null;_=_.toLowerCase();for(var S,k=Object.keys(e),E=k.length;E-- >0;)if(_===(S=k[E]).toLowerCase())return S;return null}var vk="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,isContextDefined=function(e){return!ek(e)&&e!==vk};var gk,mk=(gk="undefined"!=typeof Uint8Array&&Kx(Uint8Array),function(e){return gk&&e instanceof gk}),yk=kindOfTest("HTMLFormElement"),_k=function(){var e=Object.prototype.hasOwnProperty;return function(_,S){return e.call(_,S)}}(),bk=kindOfTest("RegExp"),reduceDescriptors=function(e,_){var S=Object.getOwnPropertyDescriptors(e),k={};forEach(S,function(S,E){var T;!1!==(T=_(S,E,e))&&(k[E]=T||S)}),Object.defineProperties(e,k)};var Sk,wk,xk,kk,Ck=kindOfTest("AsyncFunction"),Ak=(Sk="function"==typeof setImmediate,wk=nk(vk.postMessage),Sk?setImmediate:wk?(xk="axios@".concat(Math.random()),kk=[],vk.addEventListener("message",function(e){var _=e.source,S=e.data;_===vk&&S===xk&&kk.length&&kk.shift()()},!1),function(e){kk.push(e),vk.postMessage(xk,"*")}):function(e){return setTimeout(e)}),Ek="undefined"!=typeof queueMicrotask?queueMicrotask.bind(vk):"undefined"!=typeof process&&process.nextTick||Ak,Tk={isArray:$x,isArrayBuffer:tk,isBuffer:isBuffer,isFormData:function(e){var _;return e&&("function"==typeof FormData&&e instanceof FormData||nk(e.append)&&("formdata"===(_=Zx(e))||"object"===_&&nk(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&tk(e.buffer)},isString:rk,isNumber:ik,isBoolean:function(e){return!0===e||!1===e},isObject:isObject,isPlainObject:isPlainObject,isEmptyObject:function(e){if(!isObject(e)||isBuffer(e))return!1;try{return 0===Object.keys(e).length&&Object.getPrototypeOf(e)===Object.prototype}catch(fo){return!1}},isReadableStream:hk,isRequest:dk,isResponse:fk,isHeaders:pk,isUndefined:ek,isDate:ak,isFile:ok,isBlob:sk,isRegExp:bk,isFunction:nk,isStream:function(e){return isObject(e)&&nk(e.pipe)},isURLSearchParams:lk,isTypedArray:mk,isFileList:uk,forEach:forEach,merge:function merge(){for(var e=isContextDefined(this)&&this||{},_=e.caseless,S=e.skipUndefined,k={},assignValue=function(e,E){var T=_&&findKey(k,E)||E;isPlainObject(k[T])&&isPlainObject(e)?k[T]=merge(k[T],e):isPlainObject(e)?k[T]=merge({},e):$x(e)?k[T]=e.slice():S&&ek(e)||(k[T]=e)},E=0,T=arguments.length;E<T;E++)arguments[E]&&forEach(arguments[E],assignValue);return k},extend:function(e,_,S){return forEach(_,function(_,k){S&&nk(_)?e[k]=bind(_,S):e[k]=_},{allOwnKeys:(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).allOwnKeys}),e},trim:function(e){return e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e},inherits:function(e,_,S,k){e.prototype=Object.create(_.prototype,k),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:_.prototype}),S&&Object.assign(e.prototype,S)},toFlatObject:function(e,_,S,k){var E,T,M,I={};if(_=_||{},null==e)return _;do{for(T=(E=Object.getOwnPropertyNames(e)).length;T-- >0;)M=E[T],k&&!k(M,e,_)||I[M]||(_[M]=e[M],I[M]=!0);e=!1!==S&&Kx(e)}while(e&&(!S||S(e,_))&&e!==Object.prototype);return _},kindOf:Zx,kindOfTest:kindOfTest,endsWith:function(e,_,S){e=String(e),(void 0===S||S>e.length)&&(S=e.length),S-=_.length;var k=e.indexOf(_,S);return-1!==k&&k===S},toArray:function(e){if(!e)return null;if($x(e))return e;var _=e.length;if(!ik(_))return null;for(var S=new Array(_);_-- >0;)S[_]=e[_];return S},forEachEntry:function(e,_){for(var S,k=(e&&e[Jx]).call(e);(S=k.next())&&!S.done;){var E=S.value;_.call(e,E[0],E[1])}},matchAll:function(e,_){for(var S,k=[];null!==(S=e.exec(_));)k.push(S);return k},isHTMLForm:yk,hasOwnProperty:_k,hasOwnProp:_k,reduceDescriptors:reduceDescriptors,freezeMethods:function(e){reduceDescriptors(e,function(_,S){if(nk(e)&&-1!==["arguments","caller","callee"].indexOf(S))return!1;var k=e[S];nk(k)&&(_.enumerable=!1,"writable"in _?_.writable=!1:_.set||(_.set=function(){throw Error("Can not rewrite read-only method '"+S+"'")}))})},toObjectSet:function(e,_){var S={},define=function(e){e.forEach(function(e){S[e]=!0})};return $x(e)?define(e):define(String(e).split(_)),S},toCamelCase:function(e){return e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,_,S){return _.toUpperCase()+S})},noop:function(){},toFiniteNumber:function(e,_){return null!=e&&Number.isFinite(e=+e)?e:_},findKey:findKey,global:vk,isContextDefined:isContextDefined,isSpecCompliantForm:function(e){return!!(e&&nk(e.append)&&"FormData"===e[Qx]&&e[Jx])},toJSONObject:function(e){var _=new Array(10),_visit=function(e,S){if(isObject(e)){if(_.indexOf(e)>=0)return;if(isBuffer(e))return e;if(!("toJSON"in e)){_[S]=e;var k=$x(e)?[]:{};return forEach(e,function(e,_){var E=_visit(e,S+1);!ek(E)&&(k[_]=E)}),_[S]=void 0,k}}return e};return _visit(e,0)},isAsyncFn:Ck,isThenable:function(e){return e&&(isObject(e)||nk(e))&&nk(e.then)&&nk(e.catch)},setImmediate:Ak,asap:Ek,isIterable:function(e){return null!=e&&nk(e[Jx])}};function AxiosError$1(e,_,S,k,E){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",_&&(this.code=_),S&&(this.config=S),k&&(this.request=k),E&&(this.response=E,this.status=E.status?E.status:null)}Tk.inherits(AxiosError$1,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Tk.toJSONObject(this.config),code:this.code,status:this.status}}});var Mk=AxiosError$1.prototype,Ik={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(function(e){Ik[e]={value:e}}),Object.defineProperties(AxiosError$1,Ik),Object.defineProperty(Mk,"isAxiosError",{value:!0}),AxiosError$1.from=function(e,_,S,k,E,T){var M=Object.create(Mk);Tk.toFlatObject(e,M,function(e){return e!==Error.prototype},function(e){return"isAxiosError"!==e});var I=e&&e.message?e.message:"Error",R=null==_&&e?e.code:_;return AxiosError$1.call(M,I,R,S,k,E),e&&null==M.cause&&Object.defineProperty(M,"cause",{value:e,configurable:!0}),M.name=e&&e.name||"Error",T&&Object.assign(M,T),M};function isVisitable(e){return Tk.isPlainObject(e)||Tk.isArray(e)}function removeBrackets(e){return Tk.endsWith(e,"[]")?e.slice(0,-2):e}function renderKey(e,_,S){return e?e.concat(_).map(function(e,_){return e=removeBrackets(e),!S&&_?"["+e+"]":e}).join(S?".":""):_}var Rk=Tk.toFlatObject(Tk,{},null,function(e){return/^is[A-Z]/.test(e)});function toFormData$1(e,_,S){if(!Tk.isObject(e))throw new TypeError("target must be an object");_=_||new FormData;var k=(S=Tk.toFlatObject(S,{metaTokens:!0,dots:!1,indexes:!1},!1,function(e,_){return!Tk.isUndefined(_[e])})).metaTokens,E=S.visitor||defaultVisitor,T=S.dots,M=S.indexes,I=(S.Blob||"undefined"!=typeof Blob&&Blob)&&Tk.isSpecCompliantForm(_);if(!Tk.isFunction(E))throw new TypeError("visitor must be a function");function convertValue(e){if(null===e)return"";if(Tk.isDate(e))return e.toISOString();if(Tk.isBoolean(e))return e.toString();if(!I&&Tk.isBlob(e))throw new AxiosError$1("Blob is not supported. Use a Buffer instead.");return Tk.isArrayBuffer(e)||Tk.isTypedArray(e)?I&&"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}function defaultVisitor(e,S,E){var I=e;if(e&&!E&&"object"===_typeof3(e))if(Tk.endsWith(S,"{}"))S=k?S:S.slice(0,-2),e=JSON.stringify(e);else if(Tk.isArray(e)&&function(e){return Tk.isArray(e)&&!e.some(isVisitable)}(e)||(Tk.isFileList(e)||Tk.endsWith(S,"[]"))&&(I=Tk.toArray(e)))return S=removeBrackets(S),I.forEach(function(e,k){!Tk.isUndefined(e)&&null!==e&&_.append(!0===M?renderKey([S],k,T):null===M?S:S+"[]",convertValue(e))}),!1;return!!isVisitable(e)||(_.append(renderKey(E,S,T),convertValue(e)),!1)}var R=[],O=Object.assign(Rk,{defaultVisitor:defaultVisitor,convertValue:convertValue,isVisitable:isVisitable});if(!Tk.isObject(e))throw new TypeError("data must be an object");return function build(e,S){if(!Tk.isUndefined(e)){if(-1!==R.indexOf(e))throw Error("Circular reference detected in "+S.join("."));R.push(e),Tk.forEach(e,function(e,k){!0===(!(Tk.isUndefined(e)||null===e)&&E.call(_,e,Tk.isString(k)?k.trim():k,S,O))&&build(e,S?S.concat(k):[k])}),R.pop()}}(e),_}function encode$1(e){var _={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(e){return _[e]})}function AxiosURLSearchParams(e,_){this._pairs=[],e&&toFormData$1(e,this,_)}var Pk=AxiosURLSearchParams.prototype;function encode(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function buildURL(e,_,S){if(!_)return e;var k=S&&S.encode||encode;Tk.isFunction(S)&&(S={serialize:S});var E,T=S&&S.serialize;if(E=T?T(_,S):Tk.isURLSearchParams(_)?_.toString():new AxiosURLSearchParams(_,S).toString(k)){var M=e.indexOf("#");-1!==M&&(e=e.slice(0,M)),e+=(-1===e.indexOf("?")?"?":"&")+E}return e}Pk.append=function(e,_){this._pairs.push([e,_])},Pk.toString=function(e){var _=e?function(_){return e.call(this,_,encode$1)}:encode$1;return this._pairs.map(function(e){return _(e[0])+"="+_(e[1])},"").join("&")};var Ok=function(){return _createClass3(function InterceptorManager(){_classCallCheck3(this,InterceptorManager),this.handlers=[]},[{key:"use",value:function(e,_,S){return this.handlers.push({fulfilled:e,rejected:_,synchronous:!!S&&S.synchronous,runWhen:S?S.runWhen:null}),this.handlers.length-1}},{key:"eject",value:function(e){this.handlers[e]&&(this.handlers[e]=null)}},{key:"clear",value:function(){this.handlers&&(this.handlers=[])}},{key:"forEach",value:function(e){Tk.forEach(this.handlers,function(_){null!==_&&e(_)})}}])}(),Dk={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Lk={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:AxiosURLSearchParams,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},Fk="undefined"!=typeof window&&"undefined"!=typeof document,Uk="object"===("undefined"==typeof navigator?"undefined":_typeof3(navigator))&&navigator||void 0,Bk=Fk&&(!Uk||["ReactNative","NativeScript","NS"].indexOf(Uk.product)<0),Nk="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,zk=Fk&&window.location.href||"http://localhost",Gk=_objectSpread2(_objectSpread2({},Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Fk,hasStandardBrowserEnv:Bk,hasStandardBrowserWebWorkerEnv:Nk,navigator:Uk,origin:zk},Symbol.toStringTag,{value:"Module"}))),Lk);function formDataToJSON(e){function buildPath(e,_,S,k){var E=e[k++];if("__proto__"===E)return!0;var T=Number.isFinite(+E),M=k>=e.length;return E=!E&&Tk.isArray(S)?S.length:E,M?(Tk.hasOwnProp(S,E)?S[E]=[S[E],_]:S[E]=_,!T):(S[E]&&Tk.isObject(S[E])||(S[E]=[]),buildPath(e,_,S[E],k)&&Tk.isArray(S[E])&&(S[E]=function(e){var _,S,k={},E=Object.keys(e),T=E.length;for(_=0;_<T;_++)k[S=E[_]]=e[S];return k}(S[E])),!T)}if(Tk.isFormData(e)&&Tk.isFunction(e.entries)){var _={};return Tk.forEachEntry(e,function(e,S){buildPath(function(e){return Tk.matchAll(/\w+|\[(\w*)]/g,e).map(function(e){return"[]"===e[0]?"":e[1]||e[0]})}(e),S,_,0)}),_}return null}var jk={transitional:Dk,adapter:["xhr","http","fetch"],transformRequest:[function(e,_){var S,k=_.getContentType()||"",E=k.indexOf("application/json")>-1,T=Tk.isObject(e);if(T&&Tk.isHTMLForm(e)&&(e=new FormData(e)),Tk.isFormData(e))return E?JSON.stringify(formDataToJSON(e)):e;if(Tk.isArrayBuffer(e)||Tk.isBuffer(e)||Tk.isStream(e)||Tk.isFile(e)||Tk.isBlob(e)||Tk.isReadableStream(e))return e;if(Tk.isArrayBufferView(e))return e.buffer;if(Tk.isURLSearchParams(e))return _.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();if(T){if(k.indexOf("application/x-www-form-urlencoded")>-1)return function(e,_){return toFormData$1(e,new Gk.classes.URLSearchParams,_objectSpread2({visitor:function(e,_,S,k){return Gk.isNode&&Tk.isBuffer(e)?(this.append(_,e.toString("base64")),!1):k.defaultVisitor.apply(this,arguments)}},_))}(e,this.formSerializer).toString();if((S=Tk.isFileList(e))||k.indexOf("multipart/form-data")>-1){var M=this.env&&this.env.FormData;return toFormData$1(S?{"files[]":e}:e,M&&new M,this.formSerializer)}}return T||E?(_.setContentType("application/json",!1),function(e,_,S){if(Tk.isString(e))try{return(_||JSON.parse)(e),Tk.trim(e)}catch(fo){if("SyntaxError"!==fo.name)throw fo}return(S||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var _=this.transitional||jk.transitional,S=_&&_.forcedJSONParsing,k="json"===this.responseType;if(Tk.isResponse(e)||Tk.isReadableStream(e))return e;if(e&&Tk.isString(e)&&(S&&!this.responseType||k)){var E=!(_&&_.silentJSONParsing)&&k;try{return JSON.parse(e,this.parseReviver)}catch(fo){if(E){if("SyntaxError"===fo.name)throw AxiosError$1.from(fo,AxiosError$1.ERR_BAD_RESPONSE,this,null,this.response);throw fo}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Gk.classes.FormData,Blob:Gk.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Tk.forEach(["delete","get","head","post","put","patch"],function(e){jk.headers[e]={}});var Vk=Tk.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Hk=Symbol("internals");function normalizeHeader(e){return e&&String(e).trim().toLowerCase()}function normalizeValue(e){return!1===e||null==e?e:Tk.isArray(e)?e.map(normalizeValue):String(e)}function matchHeaderValue(e,_,S,k,E){return Tk.isFunction(k)?k.call(this,_,S):(E&&(_=S),Tk.isString(_)?Tk.isString(k)?-1!==_.indexOf(k):Tk.isRegExp(k)?k.test(_):void 0:void 0)}var Wk=function(){return _createClass3(function AxiosHeaders(e){_classCallCheck3(this,AxiosHeaders),e&&this.set(e)},[{key:"set",value:function(e,_,S){var k=this;function setHeader(e,_,S){var E=normalizeHeader(_);if(!E)throw new Error("header name must be a non-empty string");var T=Tk.findKey(k,E);(!T||void 0===k[T]||!0===S||void 0===S&&!1!==k[T])&&(k[T||_]=normalizeValue(e))}var setHeaders=function(e,_){return Tk.forEach(e,function(e,S){return setHeader(e,S,_)})};if(Tk.isPlainObject(e)||e instanceof this.constructor)setHeaders(e,_);else if(Tk.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))setHeaders(function(e){var _,S,k,E={};return e&&e.split("\n").forEach(function(e){k=e.indexOf(":"),_=e.substring(0,k).trim().toLowerCase(),S=e.substring(k+1).trim(),!_||E[_]&&Vk[_]||("set-cookie"===_?E[_]?E[_].push(S):E[_]=[S]:E[_]=E[_]?E[_]+", "+S:S)}),E}(e),_);else if(Tk.isObject(e)&&Tk.isIterable(e)){var E,T,M,I={},R=_createForOfIteratorHelper2(e);try{for(R.s();!(M=R.n()).done;){var O=M.value;if(!Tk.isArray(O))throw TypeError("Object iterator must return a key-value pair");I[T=O[0]]=(E=I[T])?Tk.isArray(E)?[].concat(_toConsumableArray3(E),[O[1]]):[E,O[1]]:O[1]}}catch(D){R.e(D)}finally{R.f()}setHeaders(I,_)}else null!=e&&setHeader(_,e,S);return this}},{key:"get",value:function(e,_){if(e=normalizeHeader(e)){var S=Tk.findKey(this,e);if(S){var k=this[S];if(!_)return k;if(!0===_)return function(e){for(var _,S=Object.create(null),k=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;_=k.exec(e);)S[_[1]]=_[2];return S}(k);if(Tk.isFunction(_))return _.call(this,k,S);if(Tk.isRegExp(_))return _.exec(k);throw new TypeError("parser must be boolean|regexp|function")}}}},{key:"has",value:function(e,_){if(e=normalizeHeader(e)){var S=Tk.findKey(this,e);return!(!S||void 0===this[S]||_&&!matchHeaderValue(0,this[S],S,_))}return!1}},{key:"delete",value:function(e,_){var S=this,k=!1;function deleteHeader(e){if(e=normalizeHeader(e)){var E=Tk.findKey(S,e);!E||_&&!matchHeaderValue(0,S[E],E,_)||(delete S[E],k=!0)}}return Tk.isArray(e)?e.forEach(deleteHeader):deleteHeader(e),k}},{key:"clear",value:function(e){for(var _=Object.keys(this),S=_.length,k=!1;S--;){var E=_[S];e&&!matchHeaderValue(0,this[E],E,e,!0)||(delete this[E],k=!0)}return k}},{key:"normalize",value:function(e){var _=this,S={};return Tk.forEach(this,function(k,E){var T=Tk.findKey(S,E);if(T)return _[T]=normalizeValue(k),void delete _[E];var M=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,function(e,_,S){return _.toUpperCase()+S})}(E):String(E).trim();M!==E&&delete _[E],_[M]=normalizeValue(k),S[M]=!0}),this}},{key:"concat",value:function(){for(var e,_=arguments.length,S=new Array(_),k=0;k<_;k++)S[k]=arguments[k];return(e=this.constructor).concat.apply(e,[this].concat(S))}},{key:"toJSON",value:function(e){var _=Object.create(null);return Tk.forEach(this,function(S,k){null!=S&&!1!==S&&(_[k]=e&&Tk.isArray(S)?S.join(", "):S)}),_}},{key:Symbol.iterator,value:function(){return Object.entries(this.toJSON())[Symbol.iterator]()}},{key:"toString",value:function(){return Object.entries(this.toJSON()).map(function(e){var _=_slicedToArray(e,2);return _[0]+": "+_[1]}).join("\n")}},{key:"getSetCookie",value:function(){return this.get("set-cookie")||[]}},{key:Symbol.toStringTag,get:function(){return"AxiosHeaders"}}],[{key:"from",value:function(e){return e instanceof this?e:new this(e)}},{key:"concat",value:function(e){for(var _=new this(e),S=arguments.length,k=new Array(S>1?S-1:0),E=1;E<S;E++)k[E-1]=arguments[E];return k.forEach(function(e){return _.set(e)}),_}},{key:"accessor",value:function(e){var _=(this[Hk]=this[Hk]={accessors:{}}).accessors,S=this.prototype;function defineAccessor(e){var k=normalizeHeader(e);_[k]||(!function(e,_){var S=Tk.toCamelCase(" "+_);["get","set","has"].forEach(function(k){Object.defineProperty(e,k+S,{value:function(e,S,E){return this[k].call(this,_,e,S,E)},configurable:!0})})}(S,e),_[k]=!0)}return Tk.isArray(e)?e.forEach(defineAccessor):defineAccessor(e),this}}])}();function transformData(e,_){var S=this||jk,k=_||S,E=Wk.from(k.headers),T=k.data;return Tk.forEach(e,function(e){T=e.call(S,T,E.normalize(),_?_.status:void 0)}),E.normalize(),T}function isCancel$1(e){return!(!e||!e.__CANCEL__)}function CanceledError$1(e,_,S){AxiosError$1.call(this,null==e?"canceled":e,AxiosError$1.ERR_CANCELED,_,S),this.name="CanceledError"}function settle(e,_,S){var k=S.config.validateStatus;S.status&&k&&!k(S.status)?_(new AxiosError$1("Request failed with status code "+S.status,[AxiosError$1.ERR_BAD_REQUEST,AxiosError$1.ERR_BAD_RESPONSE][Math.floor(S.status/100)-4],S.config,S.request,S)):e(S)}Wk.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),Tk.reduceDescriptors(Wk.prototype,function(e,_){var S=e.value,k=_[0].toUpperCase()+_.slice(1);return{get:function(){return S},set:function(e){this[k]=e}}}),Tk.freezeMethods(Wk),Tk.inherits(CanceledError$1,AxiosError$1,{__CANCEL__:!0});var progressEventReducer=function(e,_){var S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,k=0,E=function(e,_){e=e||10;var S,k=new Array(e),E=new Array(e),T=0,M=0;return _=void 0!==_?_:1e3,function(I){var R=Date.now(),O=E[M];S||(S=R),k[T]=I,E[T]=R;for(var D=M,L=0;D!==T;)L+=k[D++],D%=e;if((T=(T+1)%e)===M&&(M=(M+1)%e),!(R-S<_)){var U=O&&R-O;return U?Math.round(1e3*L/U):void 0}}}(50,250);return function(e,_){var S,k,E=0,T=1e3/_,invoke=function(_){var T=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();E=T,S=null,k&&(clearTimeout(k),k=null),e.apply(void 0,_toConsumableArray3(_))};return[function(){for(var e=Date.now(),_=e-E,M=arguments.length,I=new Array(M),R=0;R<M;R++)I[R]=arguments[R];_>=T?invoke(I,e):(S=I,k||(k=setTimeout(function(){k=null,invoke(S)},T-_)))},function(){return S&&invoke(S)}]}(function(S){var T=S.loaded,M=S.lengthComputable?S.total:void 0,I=T-k,R=E(I);k=T;var O=_defineProperty3({loaded:T,total:M,progress:M?T/M:void 0,bytes:I,rate:R||void 0,estimated:R&&M&&T<=M?(M-T)/R:void 0,event:S,lengthComputable:null!=M},_?"download":"upload",!0);e(O)},S)},progressEventDecorator=function(e,_){var S=null!=e;return[function(k){return _[0]({lengthComputable:S,total:e,loaded:k})},_[1]]},asyncDecorator=function(e){return function(){for(var _=arguments.length,S=new Array(_),k=0;k<_;k++)S[k]=arguments[k];return Tk.asap(function(){return e.apply(void 0,S)})}},qk=Gk.hasStandardBrowserEnv?function(e,_){return function(S){return S=new URL(S,Gk.origin),e.protocol===S.protocol&&e.host===S.host&&(_||e.port===S.port)}}(new URL(Gk.origin),Gk.navigator&&/(msie|trident)/i.test(Gk.navigator.userAgent)):function(){return!0},Xk=Gk.hasStandardBrowserEnv?{write:function(e,_,S,k,E,T,M){if("undefined"!=typeof document){var I=["".concat(e,"=").concat(encodeURIComponent(_))];Tk.isNumber(S)&&I.push("expires=".concat(new Date(S).toUTCString())),Tk.isString(k)&&I.push("path=".concat(k)),Tk.isString(E)&&I.push("domain=".concat(E)),!0===T&&I.push("secure"),Tk.isString(M)&&I.push("SameSite=".concat(M)),document.cookie=I.join("; ")}},read:function(e){if("undefined"==typeof document)return null;var _=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return _?decodeURIComponent(_[1]):null},remove:function(e){this.write(e,"",Date.now()-864e5,"/")}}:{write:function(){},read:function(){return null},remove:function(){}};function buildFullPath(e,_,S){var k=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(_);return e&&(k||0==S)?function(e,_){return _?e.replace(/\/?\/$/,"")+"/"+_.replace(/^\/+/,""):e}(e,_):_}var headersToObject=function(e){return e instanceof Wk?_objectSpread2({},e):e};function mergeConfig$1(e,_){_=_||{};var S={};function getMergedValue(e,_,S,k){return Tk.isPlainObject(e)&&Tk.isPlainObject(_)?Tk.merge.call({caseless:k},e,_):Tk.isPlainObject(_)?Tk.merge({},_):Tk.isArray(_)?_.slice():_}function mergeDeepProperties(e,_,S,k){return Tk.isUndefined(_)?Tk.isUndefined(e)?void 0:getMergedValue(void 0,e,0,k):getMergedValue(e,_,0,k)}function valueFromConfig2(e,_){if(!Tk.isUndefined(_))return getMergedValue(void 0,_)}function defaultToConfig2(e,_){return Tk.isUndefined(_)?Tk.isUndefined(e)?void 0:getMergedValue(void 0,e):getMergedValue(void 0,_)}function mergeDirectKeys(S,k,E){return E in _?getMergedValue(S,k):E in e?getMergedValue(void 0,S):void 0}var k={url:valueFromConfig2,method:valueFromConfig2,data:valueFromConfig2,baseURL:defaultToConfig2,transformRequest:defaultToConfig2,transformResponse:defaultToConfig2,paramsSerializer:defaultToConfig2,timeout:defaultToConfig2,timeoutMessage:defaultToConfig2,withCredentials:defaultToConfig2,withXSRFToken:defaultToConfig2,adapter:defaultToConfig2,responseType:defaultToConfig2,xsrfCookieName:defaultToConfig2,xsrfHeaderName:defaultToConfig2,onUploadProgress:defaultToConfig2,onDownloadProgress:defaultToConfig2,decompress:defaultToConfig2,maxContentLength:defaultToConfig2,maxBodyLength:defaultToConfig2,beforeRedirect:defaultToConfig2,transport:defaultToConfig2,httpAgent:defaultToConfig2,httpsAgent:defaultToConfig2,cancelToken:defaultToConfig2,socketPath:defaultToConfig2,responseEncoding:defaultToConfig2,validateStatus:mergeDirectKeys,headers:function(e,_,S){return mergeDeepProperties(headersToObject(e),headersToObject(_),0,!0)}};return Tk.forEach(Object.keys(_objectSpread2(_objectSpread2({},e),_)),function(E){var T=k[E]||mergeDeepProperties,M=T(e[E],_[E],E);Tk.isUndefined(M)&&T!==mergeDirectKeys||(S[E]=M)}),S}var Yk,resolveConfig=function(e){var _=mergeConfig$1({},e),S=_.data,k=_.withXSRFToken,E=_.xsrfHeaderName,T=_.xsrfCookieName,M=_.headers,I=_.auth;if(_.headers=M=Wk.from(M),_.url=buildURL(buildFullPath(_.baseURL,_.url,_.allowAbsoluteUrls),e.params,e.paramsSerializer),I&&M.set("Authorization","Basic "+btoa((I.username||"")+":"+(I.password?unescape(encodeURIComponent(I.password)):""))),Tk.isFormData(S))if(Gk.hasStandardBrowserEnv||Gk.hasStandardBrowserWebWorkerEnv)M.setContentType(void 0);else if(Tk.isFunction(S.getHeaders)){var R=S.getHeaders(),O=["content-type","content-length"];Object.entries(R).forEach(function(e){var _=_slicedToArray(e,2),S=_[0],k=_[1];O.includes(S.toLowerCase())&&M.set(S,k)})}if(Gk.hasStandardBrowserEnv&&(k&&Tk.isFunction(k)&&(k=k(_)),k||!1!==k&&qk(_.url))){var D=E&&T&&Xk.read(T);D&&M.set(E,D)}return _},Kk="undefined"!=typeof XMLHttpRequest&&function(e){return new Promise(function(_,S){var k,E,T,M,I,R=resolveConfig(e),O=R.data,D=Wk.from(R.headers).normalize(),L=R.responseType,U=R.onUploadProgress,B=R.onDownloadProgress;function done(){M&&M(),I&&I(),R.cancelToken&&R.cancelToken.unsubscribe(k),R.signal&&R.signal.removeEventListener("abort",k)}var z=new XMLHttpRequest;function onloadend(){if(z){var k=Wk.from("getAllResponseHeaders"in z&&z.getAllResponseHeaders());settle(function(e){_(e),done()},function(e){S(e),done()},{data:L&&"text"!==L&&"json"!==L?z.response:z.responseText,status:z.status,statusText:z.statusText,headers:k,config:e,request:z}),z=null}}if(z.open(R.method.toUpperCase(),R.url,!0),z.timeout=R.timeout,"onloadend"in z?z.onloadend=onloadend:z.onreadystatechange=function(){z&&4===z.readyState&&(0!==z.status||z.responseURL&&0===z.responseURL.indexOf("file:"))&&setTimeout(onloadend)},z.onabort=function(){z&&(S(new AxiosError$1("Request aborted",AxiosError$1.ECONNABORTED,e,z)),z=null)},z.onerror=function(_){var k=new AxiosError$1(_&&_.message?_.message:"Network Error",AxiosError$1.ERR_NETWORK,e,z);k.event=_||null,S(k),z=null},z.ontimeout=function(){var _=R.timeout?"timeout of "+R.timeout+"ms exceeded":"timeout exceeded",k=R.transitional||Dk;R.timeoutErrorMessage&&(_=R.timeoutErrorMessage),S(new AxiosError$1(_,k.clarifyTimeoutError?AxiosError$1.ETIMEDOUT:AxiosError$1.ECONNABORTED,e,z)),z=null},void 0===O&&D.setContentType(null),"setRequestHeader"in z&&Tk.forEach(D.toJSON(),function(e,_){z.setRequestHeader(_,e)}),Tk.isUndefined(R.withCredentials)||(z.withCredentials=!!R.withCredentials),L&&"json"!==L&&(z.responseType=R.responseType),B){var G=_slicedToArray(progressEventReducer(B,!0),2);T=G[0],I=G[1],z.addEventListener("progress",T)}if(U&&z.upload){var j=_slicedToArray(progressEventReducer(U),2);E=j[0],M=j[1],z.upload.addEventListener("progress",E),z.upload.addEventListener("loadend",M)}(R.cancelToken||R.signal)&&(k=function(_){z&&(S(!_||_.type?new CanceledError$1(null,e,z):_),z.abort(),z=null)},R.cancelToken&&R.cancelToken.subscribe(k),R.signal&&(R.signal.aborted?k():R.signal.addEventListener("abort",k)));var V,H,W=(V=R.url,(H=/^([-+\w]{1,25})(:?\/\/|:)/.exec(V))&&H[1]||"");W&&-1===Gk.protocols.indexOf(W)?S(new AxiosError$1("Unsupported protocol "+W+":",AxiosError$1.ERR_BAD_REQUEST,e)):z.send(O||null)})},composeSignals=function(e,_){var S=(e=e?e.filter(Boolean):[]).length;if(_||S){var k,E=new AbortController,onabort=function(e){if(!k){k=!0,unsubscribe();var _=e instanceof Error?e:this.reason;E.abort(_ instanceof AxiosError$1?_:new CanceledError$1(_ instanceof Error?_.message:_))}},T=_&&setTimeout(function(){T=null,onabort(new AxiosError$1("timeout ".concat(_," of ms exceeded"),AxiosError$1.ETIMEDOUT))},_),unsubscribe=function(){e&&(T&&clearTimeout(T),T=null,e.forEach(function(e){e.unsubscribe?e.unsubscribe(onabort):e.removeEventListener("abort",onabort)}),e=null)};e.forEach(function(e){return e.addEventListener("abort",onabort)});var M=E.signal;return M.unsubscribe=function(){return Tk.asap(unsubscribe)},M}},Jk=_regenerator().m(function streamChunk(e,_){var S,k,E;return _regenerator().w(function(T){for(;;)switch(T.n){case 0:if(!((S=e.byteLength)<_)){T.n=2;break}return T.n=1,e;case 1:return T.a(2);case 2:k=0;case 3:if(!(k<S)){T.n=5;break}return E=k+_,T.n=4,e.slice(k,E);case 4:k=E,T.n=3;break;case 5:return T.a(2)}},streamChunk)}),Qk=function(){var e=_wrapAsyncGenerator(_regenerator().m(function _callee264(e,_){var S,k,E,T,M,I,R;return _regenerator().w(function(O){for(;;)switch(O.p=O.n){case 0:S=!1,k=!1,O.p=1,T=_asyncIterator(Zk(e));case 2:return O.n=3,_awaitAsyncGenerator(T.next());case 3:if(!(S=!(M=O.v).done)){O.n=5;break}return I=M.value,O.d(_regeneratorValues(_asyncGeneratorDelegate(_asyncIterator(Jk(I,_)))),4);case 4:S=!1,O.n=2;break;case 5:O.n=7;break;case 6:O.p=6,R=O.v,k=!0,E=R;case 7:if(O.p=7,O.p=8,!S||null==T.return){O.n=9;break}return O.n=9,_awaitAsyncGenerator(T.return());case 9:if(O.p=9,!k){O.n=10;break}throw E;case 10:return O.f(9);case 11:return O.f(7);case 12:return O.a(2)}},_callee264,null,[[8,,9,11],[1,6,7,12]])}));return function(_,S){return e.apply(this,arguments)}}(),Zk=function(){var e=_wrapAsyncGenerator(_regenerator().m(function _callee265(e){var _,S,k,E;return _regenerator().w(function(T){for(;;)switch(T.p=T.n){case 0:if(!e[Symbol.asyncIterator]){T.n=2;break}return T.d(_regeneratorValues(_asyncGeneratorDelegate(_asyncIterator(e))),1);case 1:return T.a(2);case 2:_=e.getReader(),T.p=3;case 4:return T.n=5,_awaitAsyncGenerator(_.read());case 5:if(S=T.v,k=S.done,E=S.value,!k){T.n=6;break}return T.a(3,8);case 6:return T.n=7,E;case 7:T.n=4;break;case 8:return T.p=8,T.n=9,_awaitAsyncGenerator(_.cancel());case 9:return T.f(8);case 10:return T.a(2)}},_callee265,null,[[3,,8,10]])}));return function(_){return e.apply(this,arguments)}}(),trackStream=function(e,_,S,k){var E,T=Qk(e,_),M=0,_onFinish=function(e){E||(E=!0,k&&k(e))};return new ReadableStream({pull:function(e){return _asyncToGenerator(_regenerator().m(function _callee266(){var _,k,E,I,R,O;return _regenerator().w(function(D){for(;;)switch(D.p=D.n){case 0:return D.p=0,D.n=1,T.next();case 1:if(_=D.v,k=_.done,E=_.value,!k){D.n=2;break}return _onFinish(),e.close(),D.a(2);case 2:I=E.byteLength,S&&(R=M+=I,S(R)),e.enqueue(new Uint8Array(E)),D.n=4;break;case 3:throw D.p=3,O=D.v,_onFinish(O),O;case 4:return D.a(2)}},_callee266,null,[[0,3]])}))()},cancel:function(e){return _onFinish(e),T.return()}},{highWaterMark:2})},$k=Tk.isFunction,eC={Request:(Yk=Tk.global).Request,Response:Yk.Response},tC=Tk.global,rC=tC.ReadableStream,nC=tC.TextEncoder,test=function(e){try{for(var _=arguments.length,S=new Array(_>1?_-1:0),k=1;k<_;k++)S[k-1]=arguments[k];return!!e.apply(void 0,S)}catch(fo){return!1}},factory=function(e){var _=e=Tk.merge.call({skipUndefined:!0},eC,e),S=_.fetch,k=_.Request,E=_.Response,T=S?$k(S):"function"==typeof fetch,M=$k(k),I=$k(E);if(!T)return!1;var R,O=T&&$k(rC),D=T&&("function"==typeof nC?(R=new nC,function(e){return R.encode(e)}):function(){var e=_asyncToGenerator(_regenerator().m(function _callee267(e){var _,S;return _regenerator().w(function(E){for(;;)switch(E.n){case 0:return _=Uint8Array,E.n=1,new k(e).arrayBuffer();case 1:return S=E.v,E.a(2,new _(S))}},_callee267)}));return function(_){return e.apply(this,arguments)}}()),L=M&&O&&test(function(){var e=!1,_=new k(Gk.origin,{body:new rC,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!_}),U=I&&O&&test(function(){return Tk.isReadableStream(new E("").body)}),B={stream:U&&function(e){return e.body}};T&&["text","arrayBuffer","blob","formData","stream"].forEach(function(e){!B[e]&&(B[e]=function(_,S){var k=_&&_[e];if(k)return k.call(_);throw new AxiosError$1("Response type '".concat(e,"' is not supported"),AxiosError$1.ERR_NOT_SUPPORT,S)})});var z=function(){var e=_asyncToGenerator(_regenerator().m(function _callee268(e){var _;return _regenerator().w(function(S){for(;;)switch(S.n){case 0:if(null!=e){S.n=1;break}return S.a(2,0);case 1:if(!Tk.isBlob(e)){S.n=2;break}return S.a(2,e.size);case 2:if(!Tk.isSpecCompliantForm(e)){S.n=4;break}return _=new k(Gk.origin,{method:"POST",body:e}),S.n=3,_.arrayBuffer();case 3:case 6:return S.a(2,S.v.byteLength);case 4:if(!Tk.isArrayBufferView(e)&&!Tk.isArrayBuffer(e)){S.n=5;break}return S.a(2,e.byteLength);case 5:if(Tk.isURLSearchParams(e)&&(e+=""),!Tk.isString(e)){S.n=7;break}return S.n=6,D(e);case 7:return S.a(2)}},_callee268)}));return function(_){return e.apply(this,arguments)}}(),G=function(){var e=_asyncToGenerator(_regenerator().m(function _callee269(e,_){var S;return _regenerator().w(function(k){for(;;)if(0===k.n)return S=Tk.toFiniteNumber(e.getContentLength()),k.a(2,null==S?z(_):S)},_callee269)}));return function(_,S){return e.apply(this,arguments)}}();return function(){var e=_asyncToGenerator(_regenerator().m(function _callee270(e){var _,T,I,R,O,D,z,j,V,H,W,q,X,Y,K,J,Q,Z,$,ee,te,re,ne,ie,ae,oe,se,ue,le,ce,he,de,fe,pe,ve,ge,me,ye,_e;return _regenerator().w(function(be){for(;;)switch(be.p=be.n){case 0:if(_=resolveConfig(e),T=_.url,I=_.method,R=_.data,O=_.signal,D=_.cancelToken,z=_.timeout,j=_.onDownloadProgress,V=_.onUploadProgress,H=_.responseType,W=_.headers,q=_.withCredentials,X=void 0===q?"same-origin":q,Y=_.fetchOptions,K=S||fetch,H=H?(H+"").toLowerCase():"text",J=composeSignals([O,D&&D.toAbortSignal()],z),Q=null,Z=J&&J.unsubscribe&&function(){J.unsubscribe()},be.p=1,!(me=V&&L&&"get"!==I&&"head"!==I)){be.n=3;break}return be.n=2,G(W,R);case 2:ye=$=be.v,me=0!==ye;case 3:if(!me){be.n=4;break}ee=new k(T,{method:"POST",body:R,duplex:"half"}),Tk.isFormData(R)&&(te=ee.headers.get("content-type"))&&W.setContentType(te),ee.body&&(re=progressEventDecorator($,progressEventReducer(asyncDecorator(V))),ne=_slicedToArray(re,2),ie=ne[0],ae=ne[1],R=trackStream(ee.body,65536,ie,ae));case 4:return Tk.isString(X)||(X=X?"include":"omit"),oe=M&&"credentials"in k.prototype,se=_objectSpread2(_objectSpread2({},Y),{},{signal:J,method:I.toUpperCase(),headers:W.normalize().toJSON(),body:R,duplex:"half",credentials:oe?X:void 0}),Q=M&&new k(T,se),be.n=5,M?K(Q,Y):K(T,se);case 5:return ue=be.v,le=U&&("stream"===H||"response"===H),U&&(j||le&&Z)&&(ce={},["status","statusText","headers"].forEach(function(e){ce[e]=ue[e]}),he=Tk.toFiniteNumber(ue.headers.get("content-length")),de=j&&progressEventDecorator(he,progressEventReducer(asyncDecorator(j),!0))||[],fe=_slicedToArray(de,2),pe=fe[0],ve=fe[1],ue=new E(trackStream(ue.body,65536,pe,function(){ve&&ve(),Z&&Z()}),ce)),H=H||"text",be.n=6,B[Tk.findKey(B,H)||"text"](ue,e);case 6:return ge=be.v,!le&&Z&&Z(),be.n=7,new Promise(function(_,S){settle(_,S,{data:ge,headers:Wk.from(ue.headers),status:ue.status,statusText:ue.statusText,config:e,request:Q})});case 7:return be.a(2,be.v);case 8:if(be.p=8,_e=be.v,Z&&Z(),!_e||"TypeError"!==_e.name||!/Load failed|fetch/i.test(_e.message)){be.n=9;break}throw Object.assign(new AxiosError$1("Network Error",AxiosError$1.ERR_NETWORK,e,Q),{cause:_e.cause||_e});case 9:throw AxiosError$1.from(_e,_e&&_e.code,e,Q);case 10:return be.a(2)}},_callee270,null,[[1,8]])}));return function(_){return e.apply(this,arguments)}}()},iC=new Map,getFetch=function(e){for(var _,S,k=e&&e.env||{},E=k.fetch,T=[k.Request,k.Response,E],M=T.length,I=iC;M--;)_=T[M],void 0===(S=I.get(_))&&I.set(_,S=M?new Map:factory(k)),I=S;return S};getFetch();var aC={http:null,xhr:Kk,fetch:{get:getFetch}};Tk.forEach(aC,function(e,_){if(e){try{Object.defineProperty(e,"name",{value:_})}catch(fo){}Object.defineProperty(e,"adapterName",{value:_})}});var renderReason=function(e){return"- ".concat(e)},isResolvedHandle=function(e){return Tk.isFunction(e)||null===e||!1===e};var oC={getAdapter:function(e,_){for(var S,k,E=(e=Tk.isArray(e)?e:[e]).length,T={},M=0;M<E;M++){var I=void 0;if(k=S=e[M],!isResolvedHandle(S)&&void 0===(k=aC[(I=String(S)).toLowerCase()]))throw new AxiosError$1("Unknown adapter '".concat(I,"'"));if(k&&(Tk.isFunction(k)||(k=k.get(_))))break;T[I||"#"+M]=k}if(!k){var R=Object.entries(T).map(function(e){var _=_slicedToArray(e,2),S=_[0],k=_[1];return"adapter ".concat(S," ")+(!1===k?"is not supported by the environment":"is not available in the build")});throw new AxiosError$1("There is no suitable adapter to dispatch the request "+(E?R.length>1?"since :\n"+R.map(renderReason).join("\n"):" "+renderReason(R[0]):"as no adapter specified"),"ERR_NOT_SUPPORT")}return k},adapters:aC};function throwIfCancellationRequested(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new CanceledError$1(null,e)}function dispatchRequest(e){return throwIfCancellationRequested(e),e.headers=Wk.from(e.headers),e.data=transformData.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1),oC.getAdapter(e.adapter||jk.adapter,e)(e).then(function(_){return throwIfCancellationRequested(e),_.data=transformData.call(e,e.transformResponse,_),_.headers=Wk.from(_.headers),_},function(_){return isCancel$1(_)||(throwIfCancellationRequested(e),_&&_.response&&(_.response.data=transformData.call(e,e.transformResponse,_.response),_.response.headers=Wk.from(_.response.headers))),Promise.reject(_)})}var sC="1.13.1",uC={};["object","boolean","number","function","string","symbol"].forEach(function(e,_){uC[e]=function(S){return _typeof3(S)===e||"a"+(_<1?"n ":" ")+e}});var lC={};uC.transitional=function(e,_,S){return function(k,E,T){if(!1===e)throw new AxiosError$1(function(e,_){return"[Axios v"+sC+"] Transitional option '"+e+"'"+_+(S?". "+S:"")}(E," has been removed"+(_?" in "+_:"")),AxiosError$1.ERR_DEPRECATED);return _&&!lC[E]&&(lC[E]=!0),!e||e(k,E,T)}},uC.spelling=function(e){return function(e,_){return!0}};var cC={assertOptions:function(e,_,S){if("object"!==_typeof3(e))throw new AxiosError$1("options must be an object",AxiosError$1.ERR_BAD_OPTION_VALUE);for(var k=Object.keys(e),E=k.length;E-- >0;){var T=k[E],M=_[T];if(M){var I=e[T],R=void 0===I||M(I,T,e);if(!0!==R)throw new AxiosError$1("option "+T+" must be "+R,AxiosError$1.ERR_BAD_OPTION_VALUE)}else if(!0!==S)throw new AxiosError$1("Unknown option "+T,AxiosError$1.ERR_BAD_OPTION)}},validators:uC},hC=cC.validators,dC=function(){return _createClass3(function Axios(e){_classCallCheck3(this,Axios),this.defaults=e||{},this.interceptors={request:new Ok,response:new Ok}},[{key:"request",value:(e=_asyncToGenerator(_regenerator().m(function _callee271(e,_){var S,k,E;return _regenerator().w(function(T){for(;;)switch(T.p=T.n){case 0:return T.p=0,T.n=1,this._request(e,_);case 1:return T.a(2,T.v);case 2:if(T.p=2,(E=T.v)instanceof Error){S={},Error.captureStackTrace?Error.captureStackTrace(S):S=new Error,k=S.stack?S.stack.replace(/^.+\n/,""):"";try{E.stack?k&&!String(E.stack).endsWith(k.replace(/^.+\n.+\n/,""))&&(E.stack+="\n"+k):E.stack=k}catch(fo){}}throw E;case 3:return T.a(2)}},_callee271,this,[[0,2]])})),function(_,S){return e.apply(this,arguments)})},{key:"_request",value:function(e,_){"string"==typeof e?(_=_||{}).url=e:_=e||{};var S=_=mergeConfig$1(this.defaults,_),k=S.transitional,E=S.paramsSerializer,T=S.headers;void 0!==k&&cC.assertOptions(k,{silentJSONParsing:hC.transitional(hC.boolean),forcedJSONParsing:hC.transitional(hC.boolean),clarifyTimeoutError:hC.transitional(hC.boolean)},!1),null!=E&&(Tk.isFunction(E)?_.paramsSerializer={serialize:E}:cC.assertOptions(E,{encode:hC.function,serialize:hC.function},!0)),void 0!==_.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?_.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:_.allowAbsoluteUrls=!0),cC.assertOptions(_,{baseUrl:hC.spelling("baseURL"),withXsrfToken:hC.spelling("withXSRFToken")},!0),_.method=(_.method||this.defaults.method||"get").toLowerCase();var M=T&&Tk.merge(T.common,T[_.method]);T&&Tk.forEach(["delete","get","head","post","put","patch","common"],function(e){delete T[e]}),_.headers=Wk.concat(M,T);var I=[],R=!0;this.interceptors.request.forEach(function(e){"function"==typeof e.runWhen&&!1===e.runWhen(_)||(R=R&&e.synchronous,I.unshift(e.fulfilled,e.rejected))});var O,D=[];this.interceptors.response.forEach(function(e){D.push(e.fulfilled,e.rejected)});var L,U=0;if(!R){var B=[dispatchRequest.bind(this),void 0];for(B.unshift.apply(B,I),B.push.apply(B,D),L=B.length,O=Promise.resolve(_);U<L;)O=O.then(B[U++],B[U++]);return O}L=I.length;for(var z=_;U<L;){var G=I[U++],j=I[U++];try{z=G(z)}catch(V){j.call(this,V);break}}try{O=dispatchRequest.call(this,z)}catch(V){return Promise.reject(V)}for(U=0,L=D.length;U<L;)O=O.then(D[U++],D[U++]);return O}},{key:"getUri",value:function(e){return buildURL(buildFullPath((e=mergeConfig$1(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}]);var e}();Tk.forEach(["delete","get","head","options"],function(e){dC.prototype[e]=function(_,S){return this.request(mergeConfig$1(S||{},{method:e,url:_,data:(S||{}).data}))}}),Tk.forEach(["post","put","patch"],function(e){function generateHTTPMethod(_){return function(S,k,E){return this.request(mergeConfig$1(E||{},{method:e,headers:_?{"Content-Type":"multipart/form-data"}:{},url:S,data:k}))}}dC.prototype[e]=generateHTTPMethod(),dC.prototype[e+"Form"]=generateHTTPMethod(!0)});var fC=function(){function CancelToken(e){if(_classCallCheck3(this,CancelToken),"function"!=typeof e)throw new TypeError("executor must be a function.");var _;this.promise=new Promise(function(e){_=e});var S=this;this.promise.then(function(e){if(S._listeners){for(var _=S._listeners.length;_-- >0;)S._listeners[_](e);S._listeners=null}}),this.promise.then=function(e){var _,k=new Promise(function(e){S.subscribe(e),_=e}).then(e);return k.cancel=function(){S.unsubscribe(_)},k},e(function(e,k,E){S.reason||(S.reason=new CanceledError$1(e,k,E),_(S.reason))})}return _createClass3(CancelToken,[{key:"throwIfRequested",value:function(){if(this.reason)throw this.reason}},{key:"subscribe",value:function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}},{key:"unsubscribe",value:function(e){if(this._listeners){var _=this._listeners.indexOf(e);-1!==_&&this._listeners.splice(_,1)}}},{key:"toAbortSignal",value:function(){var e=this,_=new AbortController,abort=function(e){_.abort(e)};return this.subscribe(abort),_.signal.unsubscribe=function(){return e.unsubscribe(abort)},_.signal}}],[{key:"source",value:function(){var e,_=new CancelToken(function(_){e=_});return{token:_,cancel:e}}}])}();var pC={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(pC).forEach(function(e){var _=_slicedToArray(e,2),S=_[0],k=_[1];pC[k]=S});var vC=D("bT",function createInstance(e){var _=new dC(e),S=bind(dC.prototype.request,_);return Tk.extend(S,dC.prototype,_,{allOwnKeys:!0}),Tk.extend(S,_,null,{allOwnKeys:!0}),S.create=function(_){return createInstance(mergeConfig$1(e,_))},S}(jk));vC.Axios=dC,vC.CanceledError=CanceledError$1,vC.CancelToken=fC,vC.isCancel=isCancel$1,vC.VERSION=sC,vC.toFormData=toFormData$1,vC.AxiosError=AxiosError$1,vC.Cancel=vC.CanceledError,vC.all=function(e){return Promise.all(e)},vC.spread=function(e){return function(_){return e.apply(null,_)}},vC.isAxiosError=function(e){return Tk.isObject(e)&&!0===e.isAxiosError},vC.mergeConfig=mergeConfig$1,vC.AxiosHeaders=Wk,vC.formToJSON=function(e){return formDataToJSON(Tk.isHTMLForm(e)?new FormData(e):e)},vC.getAdapter=oC.getAdapter,vC.HttpStatusCode=pC,vC.default=vC;vC.Axios,vC.AxiosError,vC.CanceledError,vC.isCancel,vC.CancelToken,vC.VERSION,vC.all,vC.Cancel,vC.isAxiosError,vC.spread,vC.toFormData,vC.AxiosHeaders,vC.HttpStatusCode,vC.formToJSON,vC.getAdapter,vC.mergeConfig;function length(e){var _=e[0],S=e[1],k=e[2];return Math.sqrt(_*_+S*S+k*k)}function copy$4(e,_){return e[0]=_[0],e[1]=_[1],e[2]=_[2],e}function add$1(e,_,S){return e[0]=_[0]+S[0],e[1]=_[1]+S[1],e[2]=_[2]+S[2],e}function subtract$1(e,_,S){return e[0]=_[0]-S[0],e[1]=_[1]-S[1],e[2]=_[2]-S[2],e}function scale$2(e,_,S){return e[0]=_[0]*S,e[1]=_[1]*S,e[2]=_[2]*S,e}function squaredLength(e){var _=e[0],S=e[1],k=e[2];return _*_+S*S+k*k}function normalize$2(e,_){var S=_[0],k=_[1],E=_[2],T=S*S+k*k+E*E;return T>0&&(T=1/Math.sqrt(T)),e[0]=_[0]*T,e[1]=_[1]*T,e[2]=_[2]*T,e}function dot$2(e,_){return e[0]*_[0]+e[1]*_[1]+e[2]*_[2]}function _cross(e,_,S){var k=_[0],E=_[1],T=_[2],M=S[0],I=S[1],R=S[2];return e[0]=E*R-T*I,e[1]=T*M-k*R,e[2]=k*I-E*M,e}var gC,mC,yC=(gC=[0,0,0],mC=[0,0,0],function(e,_){copy$4(gC,e),copy$4(mC,_),normalize$2(gC,gC),normalize$2(mC,mC);var S=dot$2(gC,mC);return S>1?0:S<-1?Math.PI:Math.acos(S)});var _C=function(e){function Vec3(){var e,_=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_,k=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_;return _classCallCheck3(this,Vec3),_possibleConstructorReturn(e=_callSuper(this,Vec3,[_,S,k]),e)}return _inherits(Vec3,e),_createClass3(Vec3,[{key:"x",get:function(){return this[0]},set:function(e){this[0]=e}},{key:"y",get:function(){return this[1]},set:function(e){this[1]=e}},{key:"z",get:function(){return this[2]},set:function(e){this[2]=e}},{key:"set",value:function(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;return e.length?this.copy(e):(function(e,_,S,k){e[0]=_,e[1]=S,e[2]=k}(this,e,_,S),this)}},{key:"copy",value:function(e){return copy$4(this,e),this}},{key:"add",value:function(e,_){return _?add$1(this,e,_):add$1(this,this,e),this}},{key:"sub",value:function(e,_){return _?subtract$1(this,e,_):subtract$1(this,this,e),this}},{key:"multiply",value:function(e){return e.length?function(e,_,S){e[0]=_[0]*S[0],e[1]=_[1]*S[1],e[2]=_[2]*S[2]}(this,this,e):scale$2(this,this,e),this}},{key:"divide",value:function(e){return e.length?function(e,_,S){e[0]=_[0]/S[0],e[1]=_[1]/S[1],e[2]=_[2]/S[2]}(this,this,e):scale$2(this,this,1/e),this}},{key:"inverse",value:function(){return function(e,_){e[0]=1/_[0],e[1]=1/_[1],e[2]=1/_[2]}(this,arguments.length>0&&void 0!==arguments[0]?arguments[0]:this),this}},{key:"len",value:function(){return length(this)}},{key:"distance",value:function(e){return e?function(e,_){var S=_[0]-e[0],k=_[1]-e[1],E=_[2]-e[2];return Math.sqrt(S*S+k*k+E*E)}(this,e):length(this)}},{key:"squaredLen",value:function(){return squaredLength(this)}},{key:"squaredDistance",value:function(e){return e?function(e,_){var S=_[0]-e[0],k=_[1]-e[1],E=_[2]-e[2];return S*S+k*k+E*E}(this,e):squaredLength(this)}},{key:"negate",value:function(){return function(e,_){e[0]=-_[0],e[1]=-_[1],e[2]=-_[2]}(this,arguments.length>0&&void 0!==arguments[0]?arguments[0]:this),this}},{key:"cross",value:function(e,_){return _?_cross(this,e,_):_cross(this,this,e),this}},{key:"scale",value:function(e){return scale$2(this,this,e),this}},{key:"normalize",value:function(){return normalize$2(this,this),this}},{key:"dot",value:function(e){return dot$2(this,e)}},{key:"equals",value:function(e){return function(e,_){return e[0]===_[0]&&e[1]===_[1]&&e[2]===_[2]}(this,e)}},{key:"applyMatrix3",value:function(e){return function(e,_,S){var k=_[0],E=_[1],T=_[2];e[0]=k*S[0]+E*S[3]+T*S[6],e[1]=k*S[1]+E*S[4]+T*S[7],e[2]=k*S[2]+E*S[5]+T*S[8]}(this,this,e),this}},{key:"applyMatrix4",value:function(e){return function(e,_,S){var k=_[0],E=_[1],T=_[2],M=S[3]*k+S[7]*E+S[11]*T+S[15];M=M||1,e[0]=(S[0]*k+S[4]*E+S[8]*T+S[12])/M,e[1]=(S[1]*k+S[5]*E+S[9]*T+S[13])/M,e[2]=(S[2]*k+S[6]*E+S[10]*T+S[14])/M}(this,this,e),this}},{key:"scaleRotateMatrix4",value:function(e){return function(e,_,S){var k=_[0],E=_[1],T=_[2],M=S[3]*k+S[7]*E+S[11]*T+S[15];M=M||1,e[0]=(S[0]*k+S[4]*E+S[8]*T)/M,e[1]=(S[1]*k+S[5]*E+S[9]*T)/M,e[2]=(S[2]*k+S[6]*E+S[10]*T)/M}(this,this,e),this}},{key:"applyQuaternion",value:function(e){return function(e,_,S){var k=_[0],E=_[1],T=_[2],M=S[0],I=S[1],R=S[2],O=I*T-R*E,D=R*k-M*T,L=M*E-I*k,U=I*L-R*D,B=R*O-M*L,z=M*D-I*O,G=2*S[3];O*=G,D*=G,L*=G,U*=2,B*=2,z*=2,e[0]=k+O+U,e[1]=E+D+B,e[2]=T+L+z}(this,this,e),this}},{key:"angle",value:function(e){return yC(this,e)}},{key:"lerp",value:function(e,_){return function(e,_,S,k){var E=_[0],T=_[1],M=_[2];e[0]=E+k*(S[0]-E),e[1]=T+k*(S[1]-T),e[2]=M+k*(S[2]-M)}(this,this,e,_),this}},{key:"smoothLerp",value:function(e,_,S){return function(e,_,S,k,E){var T=Math.exp(-k*E),M=_[0],I=_[1],R=_[2];e[0]=S[0]+(M-S[0])*T,e[1]=S[1]+(I-S[1])*T,e[2]=S[2]+(R-S[2])*T}(this,this,e,_,S),this}},{key:"clone",value:function(){return new Vec3(this[0],this[1],this[2])}},{key:"fromArray",value:function(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this[0]=e[_],this[1]=e[_+1],this[2]=e[_+2],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[_]=this[0],e[_+1]=this[1],e[_+2]=this[2],e}},{key:"transformDirection",value:function(e){var _=this[0],S=this[1],k=this[2];return this[0]=e[0]*_+e[4]*S+e[8]*k,this[1]=e[1]*_+e[5]*S+e[9]*k,this[2]=e[2]*_+e[6]*S+e[10]*k,this.normalize()}}])}(_wrapNativeSuper(Array)),bC=new _C,SC=1,wC=1,xC=!1,kC=function(){return _createClass3(function Geometry(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(var S in _classCallCheck3(this,Geometry),e.canvas,this.gl=e,this.attributes=_,this.id=SC++,this.VAOs={},this.drawRange={start:0,count:0},this.instancedCount=0,this.gl.renderer.bindVertexArray(null),this.gl.renderer.currentGeometry=null,this.glState=this.gl.renderer.state,_)this.addAttribute(S,_[S])},[{key:"addAttribute",value:function(e,_){if(this.attributes[e]=_,_.id=wC++,_.size=_.size||1,_.type=_.type||(_.data.constructor===Float32Array?this.gl.FLOAT:_.data.constructor===Uint16Array?this.gl.UNSIGNED_SHORT:this.gl.UNSIGNED_INT),_.target="index"===e?this.gl.ELEMENT_ARRAY_BUFFER:this.gl.ARRAY_BUFFER,_.normalized=_.normalized||!1,_.stride=_.stride||0,_.offset=_.offset||0,_.count=_.count||(_.stride?_.data.byteLength/_.stride:_.data.length/_.size),_.divisor=_.instanced||0,_.needsUpdate=!1,_.usage=_.usage||this.gl.STATIC_DRAW,_.buffer||this.updateAttribute(_),_.divisor){if(this.isInstanced=!0,this.instancedCount&&this.instancedCount!==_.count*_.divisor)return this.instancedCount=Math.min(this.instancedCount,_.count*_.divisor);this.instancedCount=_.count*_.divisor}else"index"===e?this.drawRange.count=_.count:this.attributes.index||(this.drawRange.count=Math.max(this.drawRange.count,_.count))}},{key:"updateAttribute",value:function(e){var _=!e.buffer;_&&(e.buffer=this.gl.createBuffer()),this.glState.boundBuffer!==e.buffer&&(this.gl.bindBuffer(e.target,e.buffer),this.glState.boundBuffer=e.buffer),_?this.gl.bufferData(e.target,e.data,e.usage):this.gl.bufferSubData(e.target,0,e.data),e.needsUpdate=!1}},{key:"setIndex",value:function(e){this.addAttribute("index",e)}},{key:"setDrawRange",value:function(e,_){this.drawRange.start=e,this.drawRange.count=_}},{key:"setInstancedCount",value:function(e){this.instancedCount=e}},{key:"createVAO",value:function(e){this.VAOs[e.attributeOrder]=this.gl.renderer.createVertexArray(),this.gl.renderer.bindVertexArray(this.VAOs[e.attributeOrder]),this.bindAttributes(e)}},{key:"bindAttributes",value:function(e){var _=this;e.attributeLocations.forEach(function(e,S){var k=S.name,E=S.type;if(_.attributes[k]){var T=_.attributes[k];_.gl.bindBuffer(T.target,T.buffer),_.glState.boundBuffer=T.buffer;var M=1;35674===E&&(M=2),35675===E&&(M=3),35676===E&&(M=4);for(var I=T.size/M,R=1===M?0:M*M*4,O=1===M?0:4*M,D=0;D<M;D++)_.gl.vertexAttribPointer(e+D,I,T.type,T.normalized,T.stride+R,T.offset+D*O),_.gl.enableVertexAttribArray(e+D),_.gl.renderer.vertexAttribDivisor(e+D,T.divisor)}}),this.attributes.index&&this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.attributes.index.buffer)}},{key:"draw",value:function(e){var _,S=this,k=e.program,E=e.mode,T=void 0===E?this.gl.TRIANGLES:E;this.gl.renderer.currentGeometry!=="".concat(this.id,"_").concat(k.attributeOrder)&&(this.VAOs[k.attributeOrder]||this.createVAO(k),this.gl.renderer.bindVertexArray(this.VAOs[k.attributeOrder]),this.gl.renderer.currentGeometry="".concat(this.id,"_").concat(k.attributeOrder)),k.attributeLocations.forEach(function(e,_){var k=_.name,E=S.attributes[k];E.needsUpdate&&S.updateAttribute(E)});var M=2;(null===(_=this.attributes.index)||void 0===_?void 0:_.type)===this.gl.UNSIGNED_INT&&(M=4),this.isInstanced?this.attributes.index?this.gl.renderer.drawElementsInstanced(T,this.drawRange.count,this.attributes.index.type,this.attributes.index.offset+this.drawRange.start*M,this.instancedCount):this.gl.renderer.drawArraysInstanced(T,this.drawRange.start,this.drawRange.count,this.instancedCount):this.attributes.index?this.gl.drawElements(T,this.drawRange.count,this.attributes.index.type,this.attributes.index.offset+this.drawRange.start*M):this.gl.drawArrays(T,this.drawRange.start,this.drawRange.count)}},{key:"getPosition",value:function(){var e=this.attributes.position;return e.data?e:xC?void 0:xC=!0}},{key:"computeBoundingBox",value:function(e){e||(e=this.getPosition());var _=e.data,S=e.size;this.bounds||(this.bounds={min:new _C,max:new _C,center:new _C,scale:new _C,radius:1/0});var k=this.bounds.min,E=this.bounds.max,T=this.bounds.center,M=this.bounds.scale;k.set(1/0),E.set(-1/0);for(var I=0,R=_.length;I<R;I+=S){var O=_[I],D=_[I+1],L=_[I+2];k.x=Math.min(O,k.x),k.y=Math.min(D,k.y),k.z=Math.min(L,k.z),E.x=Math.max(O,E.x),E.y=Math.max(D,E.y),E.z=Math.max(L,E.z)}M.sub(E,k),T.add(k,E).divide(2)}},{key:"computeBoundingSphere",value:function(e){e||(e=this.getPosition());var _=e.data,S=e.size;this.bounds||this.computeBoundingBox(e);for(var k=0,E=0,T=_.length;E<T;E+=S)bC.fromArray(_,E),k=Math.max(k,this.bounds.center.squaredDistance(bC));this.bounds.radius=Math.sqrt(k)}},{key:"remove",value:function(){for(var e in this.VAOs)this.gl.renderer.deleteVertexArray(this.VAOs[e]),delete this.VAOs[e];for(var _ in this.attributes)this.gl.deleteBuffer(this.attributes[_].buffer),delete this.attributes[_]}}])}(),CC=1,AC={},EC=function(){return _createClass3(function Program(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},S=_.vertex,k=_.fragment,E=_.uniforms,T=void 0===E?{}:E,M=_.transparent,I=void 0!==M&&M,R=_.cullFace,O=void 0===R?e.BACK:R,D=_.frontFace,L=void 0===D?e.CCW:D,U=_.depthTest,B=void 0===U||U,z=_.depthWrite,G=void 0===z||z,j=_.depthFunc,V=void 0===j?e.LEQUAL:j;_classCallCheck3(this,Program),e.canvas,this.gl=e,this.uniforms=T,this.id=CC++,this.transparent=I,this.cullFace=O,this.frontFace=L,this.depthTest=B,this.depthWrite=G,this.depthFunc=V,this.blendFunc={},this.blendEquation={},this.stencilFunc={},this.stencilOp={},this.transparent&&!this.blendFunc.src&&(this.gl.renderer.premultipliedAlpha?this.setBlendFunc(this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA):this.setBlendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA)),this.vertexShader=e.createShader(e.VERTEX_SHADER),this.fragmentShader=e.createShader(e.FRAGMENT_SHADER),this.program=e.createProgram(),e.attachShader(this.program,this.vertexShader),e.attachShader(this.program,this.fragmentShader),this.setShaders({vertex:S,fragment:k})},[{key:"setShaders",value:function(e){var _=e.vertex,S=e.fragment;if(_&&(this.gl.shaderSource(this.vertexShader,_),this.gl.compileShader(this.vertexShader),this.gl.getShaderInfoLog(this.vertexShader)),S&&(this.gl.shaderSource(this.fragmentShader,S),this.gl.compileShader(this.fragmentShader),this.gl.getShaderInfoLog(this.fragmentShader)),this.gl.linkProgram(this.program),this.gl.getProgramParameter(this.program,this.gl.LINK_STATUS)){this.uniformLocations=new Map;for(var k=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_UNIFORMS),E=0;E<k;E++){var T=this.gl.getActiveUniform(this.program,E);this.uniformLocations.set(T,this.gl.getUniformLocation(this.program,T.name));var M=T.name.match(/(\w+)/g);T.uniformName=M[0],T.nameComponents=M.slice(1)}this.attributeLocations=new Map;for(var I=[],R=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),O=0;O<R;O++){var D=this.gl.getActiveAttrib(this.program,O),L=this.gl.getAttribLocation(this.program,D.name);-1!==L&&(I[L]=D.name,this.attributeLocations.set(D,L))}this.attributeOrder=I.join("")}}},{key:"setBlendFunc",value:function(e,_,S,k){this.blendFunc.src=e,this.blendFunc.dst=_,this.blendFunc.srcAlpha=S,this.blendFunc.dstAlpha=k,e&&(this.transparent=!0)}},{key:"setBlendEquation",value:function(e,_){this.blendEquation.modeRGB=e,this.blendEquation.modeAlpha=_}},{key:"setStencilFunc",value:function(e,_,S){this.stencilRef=_,this.stencilFunc.func=e,this.stencilFunc.ref=_,this.stencilFunc.mask=S}},{key:"setStencilOp",value:function(e,_,S){this.stencilOp.stencilFail=e,this.stencilOp.depthFail=_,this.stencilOp.depthPass=S}},{key:"applyState",value:function(){this.depthTest?this.gl.renderer.enable(this.gl.DEPTH_TEST):this.gl.renderer.disable(this.gl.DEPTH_TEST),this.cullFace?this.gl.renderer.enable(this.gl.CULL_FACE):this.gl.renderer.disable(this.gl.CULL_FACE),this.blendFunc.src?this.gl.renderer.enable(this.gl.BLEND):this.gl.renderer.disable(this.gl.BLEND),this.cullFace&&this.gl.renderer.setCullFace(this.cullFace),this.gl.renderer.setFrontFace(this.frontFace),this.gl.renderer.setDepthMask(this.depthWrite),this.gl.renderer.setDepthFunc(this.depthFunc),this.blendFunc.src&&this.gl.renderer.setBlendFunc(this.blendFunc.src,this.blendFunc.dst,this.blendFunc.srcAlpha,this.blendFunc.dstAlpha),this.gl.renderer.setBlendEquation(this.blendEquation.modeRGB,this.blendEquation.modeAlpha),this.stencilFunc.func||this.stencilOp.stencilFail?this.gl.renderer.enable(this.gl.STENCIL_TEST):this.gl.renderer.disable(this.gl.STENCIL_TEST),this.gl.renderer.setStencilFunc(this.stencilFunc.func,this.stencilFunc.ref,this.stencilFunc.mask),this.gl.renderer.setStencilOp(this.stencilOp.stencilFail,this.stencilOp.depthFail,this.stencilOp.depthPass)}},{key:"use",value:function(){var e=this,_=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).flipFaces,S=void 0!==_&&_,k=-1;this.gl.renderer.state.currentProgram===this.id||(this.gl.useProgram(this.program),this.gl.renderer.state.currentProgram=this.id),this.uniformLocations.forEach(function(_,S){var E,T=e.uniforms[S.uniformName],M=_createForOfIteratorHelper2(S.nameComponents);try{for(M.s();!(E=M.n()).done;){var I=E.value;if(!T)break;if(!(I in T)){if(Array.isArray(T.value))break;T=void 0;break}T=T[I]}}catch(O){M.e(O)}finally{M.f()}if(!T)return warn("Active uniform ".concat(S.name," has not been supplied"));if(T&&void 0===T.value)return warn("".concat(S.name," uniform is missing a value parameter"));if(T.value.texture)return k+=1,T.value.update(k),setUniform(e.gl,S.type,_,k);if(T.value.length&&T.value[0].texture){var R=[];return T.value.forEach(function(e){k+=1,e.update(k),R.push(k)}),setUniform(e.gl,S.type,_,R)}setUniform(e.gl,S.type,_,T.value)}),this.applyState(),S&&this.gl.renderer.setFrontFace(this.frontFace===this.gl.CCW?this.gl.CW:this.gl.CCW)}},{key:"remove",value:function(){this.gl.deleteProgram(this.program)}}])}();function setUniform(e,_,S,k){k=k.length?function(e){var _=e.length,S=e[0].length;if(void 0===S)return e;var k=_*S,E=AC[k];E||(AC[k]=E=new Float32Array(k));for(var T=0;T<_;T++)E.set(e[T],T*S);return E}(k):k;var E=e.renderer.state.uniformLocations.get(S);if(k.length)if(void 0===E||E.length!==k.length)e.renderer.state.uniformLocations.set(S,k.slice(0));else{if(function(e,_){if(e.length!==_.length)return!1;for(var S=0,k=e.length;S<k;S++)if(e[S]!==_[S])return!1;return!0}(E,k))return;E.set?E.set(k):function(e,_){for(var S=0,k=e.length;S<k;S++)e[S]=_[S]}(E,k),e.renderer.state.uniformLocations.set(S,E)}else{if(E===k)return;e.renderer.state.uniformLocations.set(S,k)}switch(_){case 5126:return k.length?e.uniform1fv(S,k):e.uniform1f(S,k);case 35664:return e.uniform2fv(S,k);case 35665:return e.uniform3fv(S,k);case 35666:return e.uniform4fv(S,k);case 35670:case 5124:case 35678:case 36306:case 35680:case 36289:return k.length?e.uniform1iv(S,k):e.uniform1i(S,k);case 35671:case 35667:return e.uniform2iv(S,k);case 35672:case 35668:return e.uniform3iv(S,k);case 35673:case 35669:return e.uniform4iv(S,k);case 35674:return e.uniformMatrix2fv(S,!1,k);case 35675:return e.uniformMatrix3fv(S,!1,k);case 35676:return e.uniformMatrix4fv(S,!1,k)}}D("b$",EC);var TC=0;function warn(e){TC>100||TC++}var MC=new _C,IC=1,RC=function(){return _createClass3(function Renderer(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_=e.canvas,S=void 0===_?document.createElement("canvas"):_,k=e.width,E=void 0===k?300:k,T=e.height,M=void 0===T?150:T,I=e.dpr,R=void 0===I?1:I,O=e.alpha,D=void 0!==O&&O,L=e.depth,U=void 0===L||L,B=e.stencil,z=void 0!==B&&B,G=e.antialias,j=void 0!==G&&G,V=e.premultipliedAlpha,H=void 0!==V&&V,W=e.preserveDrawingBuffer,q=void 0!==W&&W,X=e.powerPreference,Y=void 0===X?"default":X,K=e.autoClear,J=void 0===K||K,Q=e.webgl,Z=void 0===Q?2:Q;_classCallCheck3(this,Renderer);var $={alpha:D,depth:U,stencil:z,antialias:j,premultipliedAlpha:H,preserveDrawingBuffer:q,powerPreference:Y};this.dpr=R,this.alpha=D,this.color=!0,this.depth=U,this.stencil=z,this.premultipliedAlpha=H,this.autoClear=J,this.id=IC++,2===Z&&(this.gl=S.getContext("webgl2",$)),this.isWebgl2=!!this.gl,this.gl||(this.gl=S.getContext("webgl",$)),this.gl,this.gl.renderer=this,this.setSize(E,M),this.state={},this.state.blendFunc={src:this.gl.ONE,dst:this.gl.ZERO},this.state.blendEquation={modeRGB:this.gl.FUNC_ADD},this.state.cullFace=!1,this.state.frontFace=this.gl.CCW,this.state.depthMask=!0,this.state.depthFunc=this.gl.LEQUAL,this.state.premultiplyAlpha=!1,this.state.flipY=!1,this.state.unpackAlignment=4,this.state.framebuffer=null,this.state.viewport={x:0,y:0,width:null,height:null},this.state.textureUnits=[],this.state.activeTextureUnit=0,this.state.boundBuffer=null,this.state.uniformLocations=new Map,this.state.currentProgram=null,this.extensions={},this.isWebgl2?(this.getExtension("EXT_color_buffer_float"),this.getExtension("OES_texture_float_linear")):(this.getExtension("OES_texture_float"),this.getExtension("OES_texture_float_linear"),this.getExtension("OES_texture_half_float"),this.getExtension("OES_texture_half_float_linear"),this.getExtension("OES_element_index_uint"),this.getExtension("OES_standard_derivatives"),this.getExtension("EXT_sRGB"),this.getExtension("WEBGL_depth_texture"),this.getExtension("WEBGL_draw_buffers")),this.getExtension("WEBGL_compressed_texture_astc"),this.getExtension("EXT_texture_compression_bptc"),this.getExtension("WEBGL_compressed_texture_s3tc"),this.getExtension("WEBGL_compressed_texture_etc1"),this.getExtension("WEBGL_compressed_texture_pvrtc"),this.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),this.vertexAttribDivisor=this.getExtension("ANGLE_instanced_arrays","vertexAttribDivisor","vertexAttribDivisorANGLE"),this.drawArraysInstanced=this.getExtension("ANGLE_instanced_arrays","drawArraysInstanced","drawArraysInstancedANGLE"),this.drawElementsInstanced=this.getExtension("ANGLE_instanced_arrays","drawElementsInstanced","drawElementsInstancedANGLE"),this.createVertexArray=this.getExtension("OES_vertex_array_object","createVertexArray","createVertexArrayOES"),this.bindVertexArray=this.getExtension("OES_vertex_array_object","bindVertexArray","bindVertexArrayOES"),this.deleteVertexArray=this.getExtension("OES_vertex_array_object","deleteVertexArray","deleteVertexArrayOES"),this.drawBuffers=this.getExtension("WEBGL_draw_buffers","drawBuffers","drawBuffersWEBGL"),this.parameters={},this.parameters.maxTextureUnits=this.gl.getParameter(this.gl.MAX_COMBINED_TEXTURE_IMAGE_UNITS),this.parameters.maxAnisotropy=this.getExtension("EXT_texture_filter_anisotropic")?this.gl.getParameter(this.getExtension("EXT_texture_filter_anisotropic").MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},[{key:"setSize",value:function(e,_){this.width=e,this.height=_,this.gl.canvas.width=e*this.dpr,this.gl.canvas.height=_*this.dpr,this.gl.canvas.style&&Object.assign(this.gl.canvas.style,{width:e+"px",height:_+"px"})}},{key:"setViewport",value:function(e,_){var S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,k=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.state.viewport.width===e&&this.state.viewport.height===_||(this.state.viewport.width=e,this.state.viewport.height=_,this.state.viewport.x=S,this.state.viewport.y=k,this.gl.viewport(S,k,e,_))}},{key:"setScissor",value:function(e,_){var S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,k=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.gl.scissor(S,k,e,_)}},{key:"enable",value:function(e){!0!==this.state[e]&&(this.gl.enable(e),this.state[e]=!0)}},{key:"disable",value:function(e){!1!==this.state[e]&&(this.gl.disable(e),this.state[e]=!1)}},{key:"setBlendFunc",value:function(e,_,S,k){this.state.blendFunc.src===e&&this.state.blendFunc.dst===_&&this.state.blendFunc.srcAlpha===S&&this.state.blendFunc.dstAlpha===k||(this.state.blendFunc.src=e,this.state.blendFunc.dst=_,this.state.blendFunc.srcAlpha=S,this.state.blendFunc.dstAlpha=k,void 0!==S?this.gl.blendFuncSeparate(e,_,S,k):this.gl.blendFunc(e,_))}},{key:"setBlendEquation",value:function(e,_){e=e||this.gl.FUNC_ADD,this.state.blendEquation.modeRGB===e&&this.state.blendEquation.modeAlpha===_||(this.state.blendEquation.modeRGB=e,this.state.blendEquation.modeAlpha=_,void 0!==_?this.gl.blendEquationSeparate(e,_):this.gl.blendEquation(e))}},{key:"setCullFace",value:function(e){this.state.cullFace!==e&&(this.state.cullFace=e,this.gl.cullFace(e))}},{key:"setFrontFace",value:function(e){this.state.frontFace!==e&&(this.state.frontFace=e,this.gl.frontFace(e))}},{key:"setDepthMask",value:function(e){this.state.depthMask!==e&&(this.state.depthMask=e,this.gl.depthMask(e))}},{key:"setDepthFunc",value:function(e){this.state.depthFunc!==e&&(this.state.depthFunc=e,this.gl.depthFunc(e))}},{key:"setStencilMask",value:function(e){this.state.stencilMask!==e&&(this.state.stencilMask=e,this.gl.stencilMask(e))}},{key:"setStencilFunc",value:function(e,_,S){this.state.stencilFunc===e&&this.state.stencilRef===_&&this.state.stencilFuncMask===S||(this.state.stencilFunc=e||this.gl.ALWAYS,this.state.stencilRef=_||0,this.state.stencilFuncMask=S||0,this.gl.stencilFunc(e||this.gl.ALWAYS,_||0,S||0))}},{key:"setStencilOp",value:function(e,_,S){this.state.stencilFail===e&&this.state.stencilDepthFail===_&&this.state.stencilDepthPass===S||(this.state.stencilFail=e,this.state.stencilDepthFail=_,this.state.stencilDepthPass=S,this.gl.stencilOp(e,_,S))}},{key:"activeTexture",value:function(e){this.state.activeTextureUnit!==e&&(this.state.activeTextureUnit=e,this.gl.activeTexture(this.gl.TEXTURE0+e))}},{key:"bindFramebuffer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_=e.target,S=void 0===_?this.gl.FRAMEBUFFER:_,k=e.buffer,E=void 0===k?null:k;this.state.framebuffer!==E&&(this.state.framebuffer=E,this.gl.bindFramebuffer(S,E))}},{key:"getExtension",value:function(e,_,S){return _&&this.gl[_]?this.gl[_].bind(this.gl):(this.extensions[e]||(this.extensions[e]=this.gl.getExtension(e)),_?this.extensions[e]?this.extensions[e][S].bind(this.extensions[e]):null:this.extensions[e])}},{key:"sortOpaque",value:function(e,_){return e.renderOrder!==_.renderOrder?e.renderOrder-_.renderOrder:e.program.id!==_.program.id?e.program.id-_.program.id:e.zDepth!==_.zDepth?e.zDepth-_.zDepth:_.id-e.id}},{key:"sortTransparent",value:function(e,_){return e.renderOrder!==_.renderOrder?e.renderOrder-_.renderOrder:e.zDepth!==_.zDepth?_.zDepth-e.zDepth:_.id-e.id}},{key:"sortUI",value:function(e,_){return e.renderOrder!==_.renderOrder?e.renderOrder-_.renderOrder:e.program.id!==_.program.id?e.program.id-_.program.id:_.id-e.id}},{key:"getRenderList",value:function(e){var _=e.scene,S=e.camera,k=e.frustumCull,E=e.sort,T=[];if(S&&k&&S.updateFrustum(),_.traverse(function(e){if(!e.visible)return!0;e.draw&&(k&&e.frustumCulled&&S&&!S.frustumIntersectsMesh(e)||T.push(e))}),E){var M=[],I=[],R=[];T.forEach(function(e){e.program.transparent?e.program.depthTest?I.push(e):R.push(e):M.push(e),e.zDepth=0,0===e.renderOrder&&e.program.depthTest&&S&&(e.worldMatrix.getTranslation(MC),MC.applyMatrix4(S.projectionViewMatrix),e.zDepth=MC.z)}),M.sort(this.sortOpaque),I.sort(this.sortTransparent),R.sort(this.sortUI),T=M.concat(I,R)}return T}},{key:"render",value:function(e){var _=e.scene,S=e.camera,k=e.target,E=void 0===k?null:k,T=e.update,M=void 0===T||T,I=e.sort,R=void 0===I||I,O=e.frustumCull,D=void 0===O||O,L=e.clear;null===E?(this.bindFramebuffer(),this.setViewport(this.width*this.dpr,this.height*this.dpr)):(this.bindFramebuffer(E),this.setViewport(E.width,E.height)),(L||this.autoClear&&!1!==L)&&(!this.depth||E&&!E.depth||(this.enable(this.gl.DEPTH_TEST),this.setDepthMask(!0)),(this.stencil||!E||E.stencil)&&(this.enable(this.gl.STENCIL_TEST),this.setStencilMask(255)),this.gl.clear((this.color?this.gl.COLOR_BUFFER_BIT:0)|(this.depth?this.gl.DEPTH_BUFFER_BIT:0)|(this.stencil?this.gl.STENCIL_BUFFER_BIT:0))),M&&_.updateMatrixWorld(),S&&S.updateMatrixWorld(),this.getRenderList({scene:_,camera:S,frustumCull:D,sort:R}).forEach(function(e){e.draw({camera:S})})}}])}();function multiply$2(e,_,S){var k=_[0],E=_[1],T=_[2],M=_[3],I=S[0],R=S[1],O=S[2],D=S[3];return e[0]=k*D+M*I+E*O-T*R,e[1]=E*D+M*R+T*I-k*O,e[2]=T*D+M*O+k*R-E*I,e[3]=M*D-k*I-E*R-T*O,e}D("bW",RC);var copy$2=function(e,_){return e[0]=_[0],e[1]=_[1],e[2]=_[2],e[3]=_[3],e},set$2=function(e,_,S,k,E){return e[0]=_,e[1]=S,e[2]=k,e[3]=E,e},_dot=function(e,_){return e[0]*_[0]+e[1]*_[1]+e[2]*_[2]+e[3]*_[3]},_normalize=function(e,_){var S=_[0],k=_[1],E=_[2],T=_[3],M=S*S+k*k+E*E+T*T;return M>0&&(M=1/Math.sqrt(M)),e[0]=S*M,e[1]=k*M,e[2]=E*M,e[3]=T*M,e},PC=function(e){function Quat(){var e,_=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,k=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,E=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;_classCallCheck3(this,Quat),(e=_callSuper(this,Quat,[_,S,k,E])).onChange=function(){},e._target=e;var T=["0","1","2","3"];return _possibleConstructorReturn(e,new Proxy(e,{set:function(e,_){var S=Reflect.set.apply(Reflect,arguments);return S&&T.includes(_)&&e.onChange(),S}}))}return _inherits(Quat,e),_createClass3(Quat,[{key:"x",get:function(){return this[0]},set:function(e){this._target[0]=e,this.onChange()}},{key:"y",get:function(){return this[1]},set:function(e){this._target[1]=e,this.onChange()}},{key:"z",get:function(){return this[2]},set:function(e){this._target[2]=e,this.onChange()}},{key:"w",get:function(){return this[3]},set:function(e){this._target[3]=e,this.onChange()}},{key:"identity",value:function(){return function(e){e[0]=0,e[1]=0,e[2]=0,e[3]=1}(this._target),this.onChange(),this}},{key:"set",value:function(e,_,S,k){return e.length?this.copy(e):(set$2(this._target,e,_,S,k),this.onChange(),this)}},{key:"rotateX",value:function(e){return function(e,_,S){S*=.5;var k=_[0],E=_[1],T=_[2],M=_[3],I=Math.sin(S),R=Math.cos(S);e[0]=k*R+M*I,e[1]=E*R+T*I,e[2]=T*R-E*I,e[3]=M*R-k*I}(this._target,this._target,e),this.onChange(),this}},{key:"rotateY",value:function(e){return function(e,_,S){S*=.5;var k=_[0],E=_[1],T=_[2],M=_[3],I=Math.sin(S),R=Math.cos(S);e[0]=k*R-T*I,e[1]=E*R+M*I,e[2]=T*R+k*I,e[3]=M*R-E*I}(this._target,this._target,e),this.onChange(),this}},{key:"rotateZ",value:function(e){return function(e,_,S){S*=.5;var k=_[0],E=_[1],T=_[2],M=_[3],I=Math.sin(S),R=Math.cos(S);e[0]=k*R+E*I,e[1]=E*R-k*I,e[2]=T*R+M*I,e[3]=M*R-T*I}(this._target,this._target,e),this.onChange(),this}},{key:"inverse",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._target;return function(e,_){var S=_[0],k=_[1],E=_[2],T=_[3],M=S*S+k*k+E*E+T*T,I=M?1/M:0;e[0]=-S*I,e[1]=-k*I,e[2]=-E*I,e[3]=T*I}(this._target,e),this.onChange(),this}},{key:"conjugate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._target;return function(e,_){e[0]=-_[0],e[1]=-_[1],e[2]=-_[2],e[3]=_[3]}(this._target,e),this.onChange(),this}},{key:"copy",value:function(e){return copy$2(this._target,e),this.onChange(),this}},{key:"normalize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._target;return _normalize(this._target,e),this.onChange(),this}},{key:"multiply",value:function(e,_){return _?multiply$2(this._target,e,_):multiply$2(this._target,this._target,e),this.onChange(),this}},{key:"dot",value:function(e){return _dot(this._target,e)}},{key:"fromMatrix3",value:function(e){return function(e,_){var S,k=_[0]+_[4]+_[8];if(k>0)S=Math.sqrt(k+1),e[3]=.5*S,S=.5/S,e[0]=(_[5]-_[7])*S,e[1]=(_[6]-_[2])*S,e[2]=(_[1]-_[3])*S;else{var E=0;_[4]>_[0]&&(E=1),_[8]>_[3*E+E]&&(E=2);var T=(E+1)%3,M=(E+2)%3;S=Math.sqrt(_[3*E+E]-_[3*T+T]-_[3*M+M]+1),e[E]=.5*S,S=.5/S,e[3]=(_[3*T+M]-_[3*M+T])*S,e[T]=(_[3*T+E]+_[3*E+T])*S,e[M]=(_[3*M+E]+_[3*E+M])*S}}(this._target,e),this.onChange(),this}},{key:"fromEuler",value:function(e,_){return function(e,_){var S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"YXZ",k=Math.sin(.5*_[0]),E=Math.cos(.5*_[0]),T=Math.sin(.5*_[1]),M=Math.cos(.5*_[1]),I=Math.sin(.5*_[2]),R=Math.cos(.5*_[2]);"XYZ"===S?(e[0]=k*M*R+E*T*I,e[1]=E*T*R-k*M*I,e[2]=E*M*I+k*T*R,e[3]=E*M*R-k*T*I):"YXZ"===S?(e[0]=k*M*R+E*T*I,e[1]=E*T*R-k*M*I,e[2]=E*M*I-k*T*R,e[3]=E*M*R+k*T*I):"ZXY"===S?(e[0]=k*M*R-E*T*I,e[1]=E*T*R+k*M*I,e[2]=E*M*I+k*T*R,e[3]=E*M*R-k*T*I):"ZYX"===S?(e[0]=k*M*R-E*T*I,e[1]=E*T*R+k*M*I,e[2]=E*M*I-k*T*R,e[3]=E*M*R+k*T*I):"YZX"===S?(e[0]=k*M*R+E*T*I,e[1]=E*T*R+k*M*I,e[2]=E*M*I-k*T*R,e[3]=E*M*R-k*T*I):"XZY"===S&&(e[0]=k*M*R-E*T*I,e[1]=E*T*R-k*M*I,e[2]=E*M*I+k*T*R,e[3]=E*M*R+k*T*I)}(this._target,e,e.order),_||this.onChange(),this}},{key:"fromAxisAngle",value:function(e,_){return function(e,_,S){S*=.5;var k=Math.sin(S);e[0]=k*_[0],e[1]=k*_[1],e[2]=k*_[2],e[3]=Math.cos(S)}(this._target,e,_),this.onChange(),this}},{key:"slerp",value:function(e,_){return function(e,_,S,k){var E,T,M,I,R,O=_[0],D=_[1],L=_[2],U=_[3],B=S[0],z=S[1],G=S[2],j=S[3];(T=O*B+D*z+L*G+U*j)<0&&(T=-T,B=-B,z=-z,G=-G,j=-j),1-T>1e-6?(E=Math.acos(T),M=Math.sin(E),I=Math.sin((1-k)*E)/M,R=Math.sin(k*E)/M):(I=1-k,R=k),e[0]=I*O+R*B,e[1]=I*D+R*z,e[2]=I*L+R*G,e[3]=I*U+R*j}(this._target,this._target,e,_),this.onChange(),this}},{key:"fromArray",value:function(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._target[0]=e[_],this._target[1]=e[_+1],this._target[2]=e[_+2],this._target[3]=e[_+3],this.onChange(),this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[_]=this[0],e[_+1]=this[1],e[_+2]=this[2],e[_+3]=this[3],e}}])}(_wrapNativeSuper(Array));function _determinant(e){var _=e[0],S=e[1],k=e[2],E=e[3],T=e[4],M=e[5],I=e[6],R=e[7],O=e[8],D=e[9],L=e[10],U=e[11],B=e[12],z=e[13],G=e[14],j=e[15];return(_*M-S*T)*(L*j-U*G)-(_*I-k*T)*(D*j-U*z)+(_*R-E*T)*(D*G-L*z)+(S*I-k*M)*(O*j-U*B)-(S*R-E*M)*(O*G-L*B)+(k*R-E*I)*(O*z-D*B)}function multiply$1(e,_,S){var k=_[0],E=_[1],T=_[2],M=_[3],I=_[4],R=_[5],O=_[6],D=_[7],L=_[8],U=_[9],B=_[10],z=_[11],G=_[12],j=_[13],V=_[14],H=_[15],W=S[0],q=S[1],X=S[2],Y=S[3];return e[0]=W*k+q*I+X*L+Y*G,e[1]=W*E+q*R+X*U+Y*j,e[2]=W*T+q*O+X*B+Y*V,e[3]=W*M+q*D+X*z+Y*H,W=S[4],q=S[5],X=S[6],Y=S[7],e[4]=W*k+q*I+X*L+Y*G,e[5]=W*E+q*R+X*U+Y*j,e[6]=W*T+q*O+X*B+Y*V,e[7]=W*M+q*D+X*z+Y*H,W=S[8],q=S[9],X=S[10],Y=S[11],e[8]=W*k+q*I+X*L+Y*G,e[9]=W*E+q*R+X*U+Y*j,e[10]=W*T+q*O+X*B+Y*V,e[11]=W*M+q*D+X*z+Y*H,W=S[12],q=S[13],X=S[14],Y=S[15],e[12]=W*k+q*I+X*L+Y*G,e[13]=W*E+q*R+X*U+Y*j,e[14]=W*T+q*O+X*B+Y*V,e[15]=W*M+q*D+X*z+Y*H,e}function _getScaling(e,_){var S=_[0],k=_[1],E=_[2],T=_[4],M=_[5],I=_[6],R=_[8],O=_[9],D=_[10];return e[0]=Math.hypot(S,k,E),e[1]=Math.hypot(T,M,I),e[2]=Math.hypot(R,O,D),e}var OC,DC=(OC=[1,1,1],function(e,_){var S=OC;_getScaling(S,_);var k=1/S[0],E=1/S[1],T=1/S[2],M=_[0]*k,I=_[1]*E,R=_[2]*T,O=_[4]*k,D=_[5]*E,L=_[6]*T,U=_[8]*k,B=_[9]*E,z=_[10]*T,G=M+D+z,j=0;return G>0?(j=2*Math.sqrt(G+1),e[3]=.25*j,e[0]=(L-B)/j,e[1]=(U-R)/j,e[2]=(I-O)/j):M>D&&M>z?(j=2*Math.sqrt(1+M-D-z),e[3]=(L-B)/j,e[0]=.25*j,e[1]=(I+O)/j,e[2]=(U+R)/j):D>z?(j=2*Math.sqrt(1+D-M-z),e[3]=(U-R)/j,e[0]=(I+O)/j,e[1]=.25*j,e[2]=(L+B)/j):(j=2*Math.sqrt(1+z-M-D),e[3]=(I-O)/j,e[0]=(U+R)/j,e[1]=(L+B)/j,e[2]=.25*j),e});function _add(e,_,S){return e[0]=_[0]+S[0],e[1]=_[1]+S[1],e[2]=_[2]+S[2],e[3]=_[3]+S[3],e[4]=_[4]+S[4],e[5]=_[5]+S[5],e[6]=_[6]+S[6],e[7]=_[7]+S[7],e[8]=_[8]+S[8],e[9]=_[9]+S[9],e[10]=_[10]+S[10],e[11]=_[11]+S[11],e[12]=_[12]+S[12],e[13]=_[13]+S[13],e[14]=_[14]+S[14],e[15]=_[15]+S[15],e}function subtract(e,_,S){return e[0]=_[0]-S[0],e[1]=_[1]-S[1],e[2]=_[2]-S[2],e[3]=_[3]-S[3],e[4]=_[4]-S[4],e[5]=_[5]-S[5],e[6]=_[6]-S[6],e[7]=_[7]-S[7],e[8]=_[8]-S[8],e[9]=_[9]-S[9],e[10]=_[10]-S[10],e[11]=_[11]-S[11],e[12]=_[12]-S[12],e[13]=_[13]-S[13],e[14]=_[14]-S[14],e[15]=_[15]-S[15],e}var LC=function(e){function Mat4(){var e,_=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,k=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,E=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,T=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,M=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,I=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,R=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,O=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,D=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,L=arguments.length>10&&void 0!==arguments[10]?arguments[10]:1,U=arguments.length>11&&void 0!==arguments[11]?arguments[11]:0,B=arguments.length>12&&void 0!==arguments[12]?arguments[12]:0,z=arguments.length>13&&void 0!==arguments[13]?arguments[13]:0,G=arguments.length>14&&void 0!==arguments[14]?arguments[14]:0,j=arguments.length>15&&void 0!==arguments[15]?arguments[15]:1;return _classCallCheck3(this,Mat4),_possibleConstructorReturn(e=_callSuper(this,Mat4,[_,S,k,E,T,M,I,R,O,D,L,U,B,z,G,j]),e)}return _inherits(Mat4,e),_createClass3(Mat4,[{key:"x",get:function(){return this[12]},set:function(e){this[12]=e}},{key:"y",get:function(){return this[13]},set:function(e){this[13]=e}},{key:"z",get:function(){return this[14]},set:function(e){this[14]=e}},{key:"w",get:function(){return this[15]},set:function(e){this[15]=e}},{key:"set",value:function(e,_,S,k,E,T,M,I,R,O,D,L,U,B,z,G){return e.length?this.copy(e):(function(e,_,S,k,E,T,M,I,R,O,D,L,U,B,z,G,j){e[0]=_,e[1]=S,e[2]=k,e[3]=E,e[4]=T,e[5]=M,e[6]=I,e[7]=R,e[8]=O,e[9]=D,e[10]=L,e[11]=U,e[12]=B,e[13]=z,e[14]=G,e[15]=j}(this,e,_,S,k,E,T,M,I,R,O,D,L,U,B,z,G),this)}},{key:"translate",value:function(e){return function(e,_,S){var k,E,T,M,I,R,O,D,L,U,B,z,G=S[0],j=S[1],V=S[2];_===e?(e[12]=_[0]*G+_[4]*j+_[8]*V+_[12],e[13]=_[1]*G+_[5]*j+_[9]*V+_[13],e[14]=_[2]*G+_[6]*j+_[10]*V+_[14],e[15]=_[3]*G+_[7]*j+_[11]*V+_[15]):(k=_[0],E=_[1],T=_[2],M=_[3],I=_[4],R=_[5],O=_[6],D=_[7],L=_[8],U=_[9],B=_[10],z=_[11],e[0]=k,e[1]=E,e[2]=T,e[3]=M,e[4]=I,e[5]=R,e[6]=O,e[7]=D,e[8]=L,e[9]=U,e[10]=B,e[11]=z,e[12]=k*G+I*j+L*V+_[12],e[13]=E*G+R*j+U*V+_[13],e[14]=T*G+O*j+B*V+_[14],e[15]=M*G+D*j+z*V+_[15])}(this,arguments.length>1&&void 0!==arguments[1]?arguments[1]:this,e),this}},{key:"rotate",value:function(e,_){return function(e,_,S,k){var E,T,M,I,R,O,D,L,U,B,z,G,j,V,H,W,q,X,Y,K,J,Q,Z,$,ee=k[0],te=k[1],re=k[2],ne=Math.hypot(ee,te,re);Math.abs(ne)<1e-6||(ee*=ne=1/ne,te*=ne,re*=ne,E=Math.sin(S),M=1-(T=Math.cos(S)),I=_[0],R=_[1],O=_[2],D=_[3],L=_[4],U=_[5],B=_[6],z=_[7],G=_[8],j=_[9],V=_[10],H=_[11],W=ee*ee*M+T,q=te*ee*M+re*E,X=re*ee*M-te*E,Y=ee*te*M-re*E,K=te*te*M+T,J=re*te*M+ee*E,Q=ee*re*M+te*E,Z=te*re*M-ee*E,$=re*re*M+T,e[0]=I*W+L*q+G*X,e[1]=R*W+U*q+j*X,e[2]=O*W+B*q+V*X,e[3]=D*W+z*q+H*X,e[4]=I*Y+L*K+G*J,e[5]=R*Y+U*K+j*J,e[6]=O*Y+B*K+V*J,e[7]=D*Y+z*K+H*J,e[8]=I*Q+L*Z+G*$,e[9]=R*Q+U*Z+j*$,e[10]=O*Q+B*Z+V*$,e[11]=D*Q+z*Z+H*$,_!==e&&(e[12]=_[12],e[13]=_[13],e[14]=_[14],e[15]=_[15]))}(this,arguments.length>2&&void 0!==arguments[2]?arguments[2]:this,e,_),this}},{key:"scale",value:function(e){return function(e,_,S){var k=S[0],E=S[1],T=S[2];e[0]=_[0]*k,e[1]=_[1]*k,e[2]=_[2]*k,e[3]=_[3]*k,e[4]=_[4]*E,e[5]=_[5]*E,e[6]=_[6]*E,e[7]=_[7]*E,e[8]=_[8]*T,e[9]=_[9]*T,e[10]=_[10]*T,e[11]=_[11]*T,e[12]=_[12],e[13]=_[13],e[14]=_[14],e[15]=_[15]}(this,arguments.length>1&&void 0!==arguments[1]?arguments[1]:this,"number"==typeof e?[e,e,e]:e),this}},{key:"add",value:function(e,_){return _?_add(this,e,_):_add(this,this,e),this}},{key:"sub",value:function(e,_){return _?subtract(this,e,_):subtract(this,this,e),this}},{key:"multiply",value:function(e,_){return e.length?_?multiply$1(this,e,_):multiply$1(this,this,e):function(e,_,S){e[0]=_[0]*S,e[1]=_[1]*S,e[2]=_[2]*S,e[3]=_[3]*S,e[4]=_[4]*S,e[5]=_[5]*S,e[6]=_[6]*S,e[7]=_[7]*S,e[8]=_[8]*S,e[9]=_[9]*S,e[10]=_[10]*S,e[11]=_[11]*S,e[12]=_[12]*S,e[13]=_[13]*S,e[14]=_[14]*S,e[15]=_[15]*S}(this,this,e),this}},{key:"identity",value:function(){return function(e){e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1}(this),this}},{key:"copy",value:function(e){return function(e,_){e[0]=_[0],e[1]=_[1],e[2]=_[2],e[3]=_[3],e[4]=_[4],e[5]=_[5],e[6]=_[6],e[7]=_[7],e[8]=_[8],e[9]=_[9],e[10]=_[10],e[11]=_[11],e[12]=_[12],e[13]=_[13],e[14]=_[14],e[15]=_[15]}(this,e),this}},{key:"fromPerspective",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,_,S,k,E){var T=1/Math.tan(_/2),M=1/(k-E);e[0]=T/S,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=T,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(E+k)*M,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*E*k*M,e[15]=0}(this,e.fov,e.aspect,e.near,e.far),this}},{key:"fromOrthogonal",value:function(e){return function(e,_,S,k,E,T,M){var I=1/(_-S),R=1/(k-E),O=1/(T-M);e[0]=-2*I,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*R,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*O,e[11]=0,e[12]=(_+S)*I,e[13]=(E+k)*R,e[14]=(M+T)*O,e[15]=1}(this,e.left,e.right,e.bottom,e.top,e.near,e.far),this}},{key:"fromQuaternion",value:function(e){return function(e,_){var S=_[0],k=_[1],E=_[2],T=_[3],M=S+S,I=k+k,R=E+E,O=S*M,D=k*M,L=k*I,U=E*M,B=E*I,z=E*R,G=T*M,j=T*I,V=T*R;e[0]=1-L-z,e[1]=D+V,e[2]=U-j,e[3]=0,e[4]=D-V,e[5]=1-O-z,e[6]=B+G,e[7]=0,e[8]=U+j,e[9]=B-G,e[10]=1-O-L,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1}(this,e),this}},{key:"setPosition",value:function(e){return this.x=e[0],this.y=e[1],this.z=e[2],this}},{key:"inverse",value:function(){return function(e,_){var S=_[0],k=_[1],E=_[2],T=_[3],M=_[4],I=_[5],R=_[6],O=_[7],D=_[8],L=_[9],U=_[10],B=_[11],z=_[12],G=_[13],j=_[14],V=_[15],H=S*I-k*M,W=S*R-E*M,q=S*O-T*M,X=k*R-E*I,Y=k*O-T*I,K=E*O-T*R,J=D*G-L*z,Q=D*j-U*z,Z=D*V-B*z,$=L*j-U*G,ee=L*V-B*G,te=U*V-B*j,re=H*te-W*ee+q*$+X*Z-Y*Q+K*J;re&&(re=1/re,e[0]=(I*te-R*ee+O*$)*re,e[1]=(E*ee-k*te-T*$)*re,e[2]=(G*K-j*Y+V*X)*re,e[3]=(U*Y-L*K-B*X)*re,e[4]=(R*Z-M*te-O*Q)*re,e[5]=(S*te-E*Z+T*Q)*re,e[6]=(j*q-z*K-V*W)*re,e[7]=(D*K-U*q+B*W)*re,e[8]=(M*ee-I*Z+O*J)*re,e[9]=(k*Z-S*ee-T*J)*re,e[10]=(z*Y-G*q+V*H)*re,e[11]=(L*q-D*Y-B*H)*re,e[12]=(I*Q-M*$-R*J)*re,e[13]=(S*$-k*Q+E*J)*re,e[14]=(G*W-z*X-j*H)*re,e[15]=(D*X-L*W+U*H)*re)}(this,arguments.length>0&&void 0!==arguments[0]?arguments[0]:this),this}},{key:"compose",value:function(e,_,S){return function(e,_,S,k){var E=e,T=_[0],M=_[1],I=_[2],R=_[3],O=T+T,D=M+M,L=I+I,U=T*O,B=T*D,z=T*L,G=M*D,j=M*L,V=I*L,H=R*O,W=R*D,q=R*L,X=k[0],Y=k[1],K=k[2];E[0]=(1-(G+V))*X,E[1]=(B+q)*X,E[2]=(z-W)*X,E[3]=0,E[4]=(B-q)*Y,E[5]=(1-(U+V))*Y,E[6]=(j+H)*Y,E[7]=0,E[8]=(z+W)*K,E[9]=(j-H)*K,E[10]=(1-(U+G))*K,E[11]=0,E[12]=S[0],E[13]=S[1],E[14]=S[2],E[15]=1}(this,e,_,S),this}},{key:"decompose",value:function(e,_,S){return function(e,_,S,k){var E=length([e[0],e[1],e[2]]),T=length([e[4],e[5],e[6]]),M=length([e[8],e[9],e[10]]);_determinant(e)<0&&(E=-E),S[0]=e[12],S[1]=e[13],S[2]=e[14];var I=e.slice(),R=1/E,O=1/T,D=1/M;I[0]*=R,I[1]*=R,I[2]*=R,I[4]*=O,I[5]*=O,I[6]*=O,I[8]*=D,I[9]*=D,I[10]*=D,DC(_,I),k[0]=E,k[1]=T,k[2]=M}(this,e,_,S),this}},{key:"getRotation",value:function(e){return DC(e,this),this}},{key:"getTranslation",value:function(e){return function(e,_){e[0]=_[12],e[1]=_[13],e[2]=_[14]}(e,this),this}},{key:"getScaling",value:function(e){return _getScaling(e,this),this}},{key:"getMaxScaleOnAxis",value:function(){return function(e){var _=e[0],S=e[1],k=e[2],E=e[4],T=e[5],M=e[6],I=e[8],R=e[9],O=e[10],D=_*_+S*S+k*k,L=E*E+T*T+M*M,U=I*I+R*R+O*O;return Math.sqrt(Math.max(D,L,U))}(this)}},{key:"lookAt",value:function(e,_,S){return function(e,_,S,k){var E=_[0],T=_[1],M=_[2],I=k[0],R=k[1],O=k[2],D=E-S[0],L=T-S[1],U=M-S[2],B=D*D+L*L+U*U;0===B?U=1:(D*=B=1/Math.sqrt(B),L*=B,U*=B);var z=R*U-O*L,G=O*D-I*U,j=I*L-R*D;0===(B=z*z+G*G+j*j)&&(O?I+=1e-6:R?O+=1e-6:R+=1e-6,B=(z=R*U-O*L)*z+(G=O*D-I*U)*G+(j=I*L-R*D)*j),z*=B=1/Math.sqrt(B),G*=B,j*=B,e[0]=z,e[1]=G,e[2]=j,e[3]=0,e[4]=L*j-U*G,e[5]=U*z-D*j,e[6]=D*G-L*z,e[7]=0,e[8]=D,e[9]=L,e[10]=U,e[11]=0,e[12]=E,e[13]=T,e[14]=M,e[15]=1}(this,e,_,S),this}},{key:"determinant",value:function(){return _determinant(this)}},{key:"fromArray",value:function(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this[0]=e[_],this[1]=e[_+1],this[2]=e[_+2],this[3]=e[_+3],this[4]=e[_+4],this[5]=e[_+5],this[6]=e[_+6],this[7]=e[_+7],this[8]=e[_+8],this[9]=e[_+9],this[10]=e[_+10],this[11]=e[_+11],this[12]=e[_+12],this[13]=e[_+13],this[14]=e[_+14],this[15]=e[_+15],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[_]=this[0],e[_+1]=this[1],e[_+2]=this[2],e[_+3]=this[3],e[_+4]=this[4],e[_+5]=this[5],e[_+6]=this[6],e[_+7]=this[7],e[_+8]=this[8],e[_+9]=this[9],e[_+10]=this[10],e[_+11]=this[11],e[_+12]=this[12],e[_+13]=this[13],e[_+14]=this[14],e[_+15]=this[15],e}}])}(_wrapNativeSuper(Array));var FC=new LC,UC=function(e){function Euler(){var e,_=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_,k=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_,E=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"YXZ";_classCallCheck3(this,Euler),(e=_callSuper(this,Euler,[_,S,k])).order=E,e.onChange=function(){},e._target=e;var T=["0","1","2"];return _possibleConstructorReturn(e,new Proxy(e,{set:function(e,_){var S=Reflect.set.apply(Reflect,arguments);return S&&T.includes(_)&&e.onChange(),S}}))}return _inherits(Euler,e),_createClass3(Euler,[{key:"x",get:function(){return this[0]},set:function(e){this._target[0]=e,this.onChange()}},{key:"y",get:function(){return this[1]},set:function(e){this._target[1]=e,this.onChange()}},{key:"z",get:function(){return this[2]},set:function(e){this._target[2]=e,this.onChange()}},{key:"set",value:function(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;return e.length?this.copy(e):(this._target[0]=e,this._target[1]=_,this._target[2]=S,this.onChange(),this)}},{key:"copy",value:function(e){return this._target[0]=e[0],this._target[1]=e[1],this._target[2]=e[2],this.onChange(),this}},{key:"reorder",value:function(e){return this._target.order=e,this.onChange(),this}},{key:"fromRotationMatrix",value:function(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.order;return function(e,_){var S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"YXZ";"XYZ"===S?(e[1]=Math.asin(Math.min(Math.max(_[8],-1),1)),Math.abs(_[8])<.99999?(e[0]=Math.atan2(-_[9],_[10]),e[2]=Math.atan2(-_[4],_[0])):(e[0]=Math.atan2(_[6],_[5]),e[2]=0)):"YXZ"===S?(e[0]=Math.asin(-Math.min(Math.max(_[9],-1),1)),Math.abs(_[9])<.99999?(e[1]=Math.atan2(_[8],_[10]),e[2]=Math.atan2(_[1],_[5])):(e[1]=Math.atan2(-_[2],_[0]),e[2]=0)):"ZXY"===S?(e[0]=Math.asin(Math.min(Math.max(_[6],-1),1)),Math.abs(_[6])<.99999?(e[1]=Math.atan2(-_[2],_[10]),e[2]=Math.atan2(-_[4],_[5])):(e[1]=0,e[2]=Math.atan2(_[1],_[0]))):"ZYX"===S?(e[1]=Math.asin(-Math.min(Math.max(_[2],-1),1)),Math.abs(_[2])<.99999?(e[0]=Math.atan2(_[6],_[10]),e[2]=Math.atan2(_[1],_[0])):(e[0]=0,e[2]=Math.atan2(-_[4],_[5]))):"YZX"===S?(e[2]=Math.asin(Math.min(Math.max(_[1],-1),1)),Math.abs(_[1])<.99999?(e[0]=Math.atan2(-_[9],_[5]),e[1]=Math.atan2(-_[2],_[0])):(e[0]=0,e[1]=Math.atan2(_[8],_[10]))):"XZY"===S&&(e[2]=Math.asin(-Math.min(Math.max(_[4],-1),1)),Math.abs(_[4])<.99999?(e[0]=Math.atan2(_[6],_[5]),e[1]=Math.atan2(_[8],_[0])):(e[0]=Math.atan2(-_[9],_[10]),e[1]=0))}(this._target,e,_),this.onChange(),this}},{key:"fromQuaternion",value:function(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.order,S=arguments.length>2?arguments[2]:void 0;return FC.fromQuaternion(e),this._target.fromRotationMatrix(FC,_),S||this.onChange(),this}},{key:"fromArray",value:function(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._target[0]=e[_],this._target[1]=e[_+1],this._target[2]=e[_+2],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[_]=this[0],e[_+1]=this[1],e[_+2]=this[2],e}}])}(_wrapNativeSuper(Array)),BC=function(){return _createClass3(function Transform(){var e=this;_classCallCheck3(this,Transform),this.parent=null,this.children=[],this.visible=!0,this.matrix=new LC,this.worldMatrix=new LC,this.matrixAutoUpdate=!0,this.worldMatrixNeedsUpdate=!1,this.position=new _C,this.quaternion=new PC,this.scale=new _C(1),this.rotation=new UC,this.up=new _C(0,1,0),this.rotation._target.onChange=function(){return e.quaternion.fromEuler(e.rotation,!0)},this.quaternion._target.onChange=function(){return e.rotation.fromQuaternion(e.quaternion,void 0,!0)}},[{key:"setParent",value:function(e){var _=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.parent&&e!==this.parent&&this.parent.removeChild(this,!1),this.parent=e,_&&e&&e.addChild(this,!1)}},{key:"addChild",value:function(e){var _=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];~this.children.indexOf(e)||this.children.push(e),_&&e.setParent(this,!1)}},{key:"removeChild",value:function(e){var _=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];~this.children.indexOf(e)&&this.children.splice(this.children.indexOf(e),1),_&&e.setParent(null,!1)}},{key:"updateMatrixWorld",value:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.worldMatrixNeedsUpdate||e)&&(null===this.parent?this.worldMatrix.copy(this.matrix):this.worldMatrix.multiply(this.parent.worldMatrix,this.matrix),this.worldMatrixNeedsUpdate=!1,e=!0);for(var _=0,S=this.children.length;_<S;_++)this.children[_].updateMatrixWorld(e)}},{key:"updateMatrix",value:function(){this.matrix.compose(this.quaternion,this.position,this.scale),this.worldMatrixNeedsUpdate=!0}},{key:"traverse",value:function(e){if(!e(this))for(var _=0,S=this.children.length;_<S;_++)this.children[_].traverse(e)}},{key:"decompose",value:function(){this.matrix.decompose(this.quaternion._target,this.position,this.scale),this.rotation.fromQuaternion(this.quaternion)}},{key:"lookAt",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]?this.matrix.lookAt(this.position,e,this.up):this.matrix.lookAt(e,this.position,this.up),this.matrix.getRotation(this.quaternion._target),this.rotation.fromQuaternion(this.quaternion)}}])}();D("bY",BC);var NC=new LC,zC=new _C,GC=new _C,jC=function(e){function Camera(e){var _,S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},k=S.near,E=void 0===k?.1:k,T=S.far,M=void 0===T?100:T,I=S.fov,R=void 0===I?45:I,O=S.aspect,D=void 0===O?1:O,L=S.left,U=S.right,B=S.bottom,z=S.top,G=S.zoom,j=void 0===G?1:G;return _classCallCheck3(this,Camera),_=_callSuper(this,Camera),Object.assign(_,{near:E,far:M,fov:R,aspect:D,left:L,right:U,bottom:B,top:z,zoom:j}),_.projectionMatrix=new LC,_.viewMatrix=new LC,_.projectionViewMatrix=new LC,_.worldPosition=new _C,_.type=L||U?"orthographic":"perspective","orthographic"===_.type?_.orthographic():_.perspective(),_}return _inherits(Camera,e),_createClass3(Camera,[{key:"perspective",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_=e.near,S=void 0===_?this.near:_,k=e.far,E=void 0===k?this.far:k,T=e.fov,M=void 0===T?this.fov:T,I=e.aspect,R=void 0===I?this.aspect:I;return Object.assign(this,{near:S,far:E,fov:M,aspect:R}),this.projectionMatrix.fromPerspective({fov:M*(Math.PI/180),aspect:R,near:S,far:E}),this.type="perspective",this}},{key:"orthographic",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_=e.near,S=void 0===_?this.near:_,k=e.far,E=void 0===k?this.far:k,T=e.left,M=void 0===T?this.left||-1:T,I=e.right,R=void 0===I?this.right||1:I,O=e.bottom,D=void 0===O?this.bottom||-1:O,L=e.top,U=void 0===L?this.top||1:L,B=e.zoom,z=void 0===B?this.zoom:B;return Object.assign(this,{near:S,far:E,left:M,right:R,bottom:D,top:U,zoom:z}),M/=z,R/=z,D/=z,U/=z,this.projectionMatrix.fromOrthogonal({left:M,right:R,bottom:D,top:U,near:S,far:E}),this.type="orthographic",this}},{key:"updateMatrixWorld",value:function(){return _superPropGet(Camera,"updateMatrixWorld",this,3)([]),this.viewMatrix.inverse(this.worldMatrix),this.worldMatrix.getTranslation(this.worldPosition),this.projectionViewMatrix.multiply(this.projectionMatrix,this.viewMatrix),this}},{key:"updateProjectionMatrix",value:function(){return"perspective"===this.type?this.perspective():this.orthographic()}},{key:"lookAt",value:function(e){return _superPropGet(Camera,"lookAt",this,3)([e,!0]),this}},{key:"project",value:function(e){return e.applyMatrix4(this.viewMatrix),e.applyMatrix4(this.projectionMatrix),this}},{key:"unproject",value:function(e){return e.applyMatrix4(NC.inverse(this.projectionMatrix)),e.applyMatrix4(this.worldMatrix),this}},{key:"updateFrustum",value:function(){this.frustum||(this.frustum=[new _C,new _C,new _C,new _C,new _C,new _C]);var e=this.projectionViewMatrix;this.frustum[0].set(e[3]-e[0],e[7]-e[4],e[11]-e[8]).constant=e[15]-e[12],this.frustum[1].set(e[3]+e[0],e[7]+e[4],e[11]+e[8]).constant=e[15]+e[12],this.frustum[2].set(e[3]+e[1],e[7]+e[5],e[11]+e[9]).constant=e[15]+e[13],this.frustum[3].set(e[3]-e[1],e[7]-e[5],e[11]-e[9]).constant=e[15]-e[13],this.frustum[4].set(e[3]-e[2],e[7]-e[6],e[11]-e[10]).constant=e[15]-e[14],this.frustum[5].set(e[3]+e[2],e[7]+e[6],e[11]+e[10]).constant=e[15]+e[14];for(var _=0;_<6;_++){var S=1/this.frustum[_].distance();this.frustum[_].multiply(S),this.frustum[_].constant*=S}}},{key:"frustumIntersectsMesh",value:function(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.worldMatrix;if(!e.geometry.attributes.position)return!0;if(e.geometry.bounds&&e.geometry.bounds.radius!==1/0||e.geometry.computeBoundingSphere(),!e.geometry.bounds)return!0;var S=zC;S.copy(e.geometry.bounds.center),S.applyMatrix4(_);var k=e.geometry.bounds.radius*_.getMaxScaleOnAxis();return this.frustumIntersectsSphere(S,k)}},{key:"frustumIntersectsSphere",value:function(e,_){for(var S=GC,k=0;k<6;k++){var E=this.frustum[k];if(S.copy(E).dot(e)+E.constant<-_)return!1}return!0}}])}(BC);function _multiply(e,_,S){var k=_[0],E=_[1],T=_[2],M=_[3],I=_[4],R=_[5],O=_[6],D=_[7],L=_[8],U=S[0],B=S[1],z=S[2],G=S[3],j=S[4],V=S[5],H=S[6],W=S[7],q=S[8];return e[0]=U*k+B*M+z*O,e[1]=U*E+B*I+z*D,e[2]=U*T+B*R+z*L,e[3]=G*k+j*M+V*O,e[4]=G*E+j*I+V*D,e[5]=G*T+j*R+V*L,e[6]=H*k+W*M+q*O,e[7]=H*E+W*I+q*D,e[8]=H*T+W*R+q*L,e}D("bX",jC);var VC=function(e){function Mat3(){var e,_=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,k=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,E=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,T=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,M=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,I=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,R=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,O=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1;return _classCallCheck3(this,Mat3),_possibleConstructorReturn(e=_callSuper(this,Mat3,[_,S,k,E,T,M,I,R,O]),e)}return _inherits(Mat3,e),_createClass3(Mat3,[{key:"set",value:function(e,_,S,k,E,T,M,I,R){return e.length?this.copy(e):(function(e,_,S,k,E,T,M,I,R,O){e[0]=_,e[1]=S,e[2]=k,e[3]=E,e[4]=T,e[5]=M,e[6]=I,e[7]=R,e[8]=O}(this,e,_,S,k,E,T,M,I,R),this)}},{key:"translate",value:function(e){return function(e,_,S){var k=_[0],E=_[1],T=_[2],M=_[3],I=_[4],R=_[5],O=_[6],D=_[7],L=_[8],U=S[0],B=S[1];e[0]=k,e[1]=E,e[2]=T,e[3]=M,e[4]=I,e[5]=R,e[6]=U*k+B*M+O,e[7]=U*E+B*I+D,e[8]=U*T+B*R+L}(this,arguments.length>1&&void 0!==arguments[1]?arguments[1]:this,e),this}},{key:"rotate",value:function(e){return function(e,_,S){var k=_[0],E=_[1],T=_[2],M=_[3],I=_[4],R=_[5],O=_[6],D=_[7],L=_[8],U=Math.sin(S),B=Math.cos(S);e[0]=B*k+U*M,e[1]=B*E+U*I,e[2]=B*T+U*R,e[3]=B*M-U*k,e[4]=B*I-U*E,e[5]=B*R-U*T,e[6]=O,e[7]=D,e[8]=L}(this,arguments.length>1&&void 0!==arguments[1]?arguments[1]:this,e),this}},{key:"scale",value:function(e){return function(e,_,S){var k=S[0],E=S[1];e[0]=k*_[0],e[1]=k*_[1],e[2]=k*_[2],e[3]=E*_[3],e[4]=E*_[4],e[5]=E*_[5],e[6]=_[6],e[7]=_[7],e[8]=_[8]}(this,arguments.length>1&&void 0!==arguments[1]?arguments[1]:this,e),this}},{key:"multiply",value:function(e,_){return _?_multiply(this,e,_):_multiply(this,this,e),this}},{key:"identity",value:function(){return function(e){e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1}(this),this}},{key:"copy",value:function(e){return function(e,_){e[0]=_[0],e[1]=_[1],e[2]=_[2],e[3]=_[3],e[4]=_[4],e[5]=_[5],e[6]=_[6],e[7]=_[7],e[8]=_[8]}(this,e),this}},{key:"fromMatrix4",value:function(e){return function(e,_){e[0]=_[0],e[1]=_[1],e[2]=_[2],e[3]=_[4],e[4]=_[5],e[5]=_[6],e[6]=_[8],e[7]=_[9],e[8]=_[10]}(this,e),this}},{key:"fromQuaternion",value:function(e){return function(e,_){var S=_[0],k=_[1],E=_[2],T=_[3],M=S+S,I=k+k,R=E+E,O=S*M,D=k*M,L=k*I,U=E*M,B=E*I,z=E*R,G=T*M,j=T*I,V=T*R;e[0]=1-L-z,e[3]=D-V,e[6]=U+j,e[1]=D+V,e[4]=1-O-z,e[7]=B-G,e[2]=U-j,e[5]=B+G,e[8]=1-O-L}(this,e),this}},{key:"fromBasis",value:function(e,_,S){return this.set(e[0],e[1],e[2],_[0],_[1],_[2],S[0],S[1],S[2]),this}},{key:"inverse",value:function(){return function(e,_){var S=_[0],k=_[1],E=_[2],T=_[3],M=_[4],I=_[5],R=_[6],O=_[7],D=_[8],L=D*M-I*O,U=-D*T+I*R,B=O*T-M*R,z=S*L+k*U+E*B;z&&(z=1/z,e[0]=L*z,e[1]=(-D*k+E*O)*z,e[2]=(I*k-E*M)*z,e[3]=U*z,e[4]=(D*S-E*R)*z,e[5]=(-I*S+E*T)*z,e[6]=B*z,e[7]=(-O*S+k*R)*z,e[8]=(M*S-k*T)*z)}(this,arguments.length>0&&void 0!==arguments[0]?arguments[0]:this),this}},{key:"getNormalMatrix",value:function(e){return function(e,_){var S=_[0],k=_[1],E=_[2],T=_[3],M=_[4],I=_[5],R=_[6],O=_[7],D=_[8],L=_[9],U=_[10],B=_[11],z=_[12],G=_[13],j=_[14],V=_[15],H=S*I-k*M,W=S*R-E*M,q=S*O-T*M,X=k*R-E*I,Y=k*O-T*I,K=E*O-T*R,J=D*G-L*z,Q=D*j-U*z,Z=D*V-B*z,$=L*j-U*G,ee=L*V-B*G,te=U*V-B*j,re=H*te-W*ee+q*$+X*Z-Y*Q+K*J;re&&(re=1/re,e[0]=(I*te-R*ee+O*$)*re,e[1]=(R*Z-M*te-O*Q)*re,e[2]=(M*ee-I*Z+O*J)*re,e[3]=(E*ee-k*te-T*$)*re,e[4]=(S*te-E*Z+T*Q)*re,e[5]=(k*Z-S*ee-T*J)*re,e[6]=(G*K-j*Y+V*X)*re,e[7]=(j*q-z*K-V*W)*re,e[8]=(z*Y-G*q+V*H)*re)}(this,e),this}}])}(_wrapNativeSuper(Array)),HC=0,WC=function(e){function Mesh(e){var _,S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},k=S.geometry,E=S.program,T=S.mode,M=void 0===T?e.TRIANGLES:T,I=S.frustumCulled,R=void 0===I||I,O=S.renderOrder,D=void 0===O?0:O;return _classCallCheck3(this,Mesh),_=_callSuper(this,Mesh),e.canvas,_.gl=e,_.id=HC++,_.geometry=k,_.program=E,_.mode=M,_.frustumCulled=R,_.renderOrder=D,_.modelViewMatrix=new LC,_.normalMatrix=new VC,_.beforeRenderCallbacks=[],_.afterRenderCallbacks=[],_}return _inherits(Mesh,e),_createClass3(Mesh,[{key:"onBeforeRender",value:function(e){return this.beforeRenderCallbacks.push(e),this}},{key:"onAfterRender",value:function(e){return this.afterRenderCallbacks.push(e),this}},{key:"draw",value:function(){var e=this,_=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).camera;_&&(this.program.uniforms.modelMatrix||Object.assign(this.program.uniforms,{modelMatrix:{value:null},viewMatrix:{value:null},modelViewMatrix:{value:null},normalMatrix:{value:null},projectionMatrix:{value:null},cameraPosition:{value:null}}),this.program.uniforms.projectionMatrix.value=_.projectionMatrix,this.program.uniforms.cameraPosition.value=_.worldPosition,this.program.uniforms.viewMatrix.value=_.viewMatrix,this.modelViewMatrix.multiply(_.viewMatrix,this.worldMatrix),this.normalMatrix.getNormalMatrix(this.modelViewMatrix),this.program.uniforms.modelMatrix.value=this.worldMatrix,this.program.uniforms.modelViewMatrix.value=this.modelViewMatrix,this.program.uniforms.normalMatrix.value=this.normalMatrix),this.beforeRenderCallbacks.forEach(function(S){return S&&S({mesh:e,camera:_})});var S=this.program.cullFace&&this.worldMatrix.determinant()<0;this.program.use({flipFaces:S}),this.geometry.draw({mode:this.mode,program:this.program}),this.afterRenderCallbacks.forEach(function(S){return S&&S({mesh:e,camera:_})})}}])}(BC);D("c0",WC);var qC=new Uint8Array(4);function isPowerOf2(e){return!(e&e-1)}var XC=1,YC=function(){return _createClass3(function Texture(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},S=_.image,k=_.target,E=void 0===k?e.TEXTURE_2D:k,T=_.type,M=void 0===T?e.UNSIGNED_BYTE:T,I=_.format,R=void 0===I?e.RGBA:I,O=_.internalFormat,D=void 0===O?R:O,L=_.wrapS,U=void 0===L?e.CLAMP_TO_EDGE:L,B=_.wrapT,z=void 0===B?e.CLAMP_TO_EDGE:B,G=_.wrapR,j=void 0===G?e.CLAMP_TO_EDGE:G,V=_.generateMipmaps,H=void 0===V?E===(e.TEXTURE_2D||e.TEXTURE_CUBE_MAP):V,W=_.minFilter,q=void 0===W?H?e.NEAREST_MIPMAP_LINEAR:e.LINEAR:W,X=_.magFilter,Y=void 0===X?e.LINEAR:X,K=_.premultiplyAlpha,J=void 0!==K&&K,Q=_.unpackAlignment,Z=void 0===Q?4:Q,$=_.flipY,ee=void 0===$?E==(e.TEXTURE_2D||e.TEXTURE_3D):$,te=_.anisotropy,re=void 0===te?0:te,ne=_.level,ie=void 0===ne?0:ne,ae=_.width,oe=_.height,se=void 0===oe?ae:oe,ue=_.length,le=void 0===ue?1:ue;_classCallCheck3(this,Texture),this.gl=e,this.id=XC++,this.image=S,this.target=E,this.type=M,this.format=R,this.internalFormat=D,this.minFilter=q,this.magFilter=Y,this.wrapS=U,this.wrapT=z,this.wrapR=j,this.generateMipmaps=H,this.premultiplyAlpha=J,this.unpackAlignment=Z,this.flipY=ee,this.anisotropy=Math.min(re,this.gl.renderer.parameters.maxAnisotropy),this.level=ie,this.width=ae,this.height=se,this.length=le,this.texture=this.gl.createTexture(),this.store={image:null},this.glState=this.gl.renderer.state,this.state={},this.state.minFilter=this.gl.NEAREST_MIPMAP_LINEAR,this.state.magFilter=this.gl.LINEAR,this.state.wrapS=this.gl.REPEAT,this.state.wrapT=this.gl.REPEAT,this.state.anisotropy=0},[{key:"bind",value:function(){this.glState.textureUnits[this.glState.activeTextureUnit]!==this.id&&(this.gl.bindTexture(this.target,this.texture),this.glState.textureUnits[this.glState.activeTextureUnit]=this.id)}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,_=!(this.image===this.store.image&&!this.needsUpdate);if((_||this.glState.textureUnits[e]!==this.id)&&(this.gl.renderer.activeTexture(e),this.bind()),_){if(this.needsUpdate=!1,this.flipY!==this.glState.flipY&&(this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,this.flipY),this.glState.flipY=this.flipY),this.premultiplyAlpha!==this.glState.premultiplyAlpha&&(this.gl.pixelStorei(this.gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),this.glState.premultiplyAlpha=this.premultiplyAlpha),this.unpackAlignment!==this.glState.unpackAlignment&&(this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT,this.unpackAlignment),this.glState.unpackAlignment=this.unpackAlignment),this.minFilter!==this.state.minFilter&&(this.gl.texParameteri(this.target,this.gl.TEXTURE_MIN_FILTER,this.minFilter),this.state.minFilter=this.minFilter),this.magFilter!==this.state.magFilter&&(this.gl.texParameteri(this.target,this.gl.TEXTURE_MAG_FILTER,this.magFilter),this.state.magFilter=this.magFilter),this.wrapS!==this.state.wrapS&&(this.gl.texParameteri(this.target,this.gl.TEXTURE_WRAP_S,this.wrapS),this.state.wrapS=this.wrapS),this.wrapT!==this.state.wrapT&&(this.gl.texParameteri(this.target,this.gl.TEXTURE_WRAP_T,this.wrapT),this.state.wrapT=this.wrapT),this.wrapR!==this.state.wrapR&&(this.gl.texParameteri(this.target,this.gl.TEXTURE_WRAP_R,this.wrapR),this.state.wrapR=this.wrapR),this.anisotropy&&this.anisotropy!==this.state.anisotropy&&(this.gl.texParameterf(this.target,this.gl.renderer.getExtension("EXT_texture_filter_anisotropic").TEXTURE_MAX_ANISOTROPY_EXT,this.anisotropy),this.state.anisotropy=this.anisotropy),this.image){if(this.image.width&&(this.width=this.image.width,this.height=this.image.height),this.target===this.gl.TEXTURE_CUBE_MAP)for(var S=0;S<6;S++)this.gl.texImage2D(this.gl.TEXTURE_CUBE_MAP_POSITIVE_X+S,this.level,this.internalFormat,this.format,this.type,this.image[S]);else if(ArrayBuffer.isView(this.image))this.target===this.gl.TEXTURE_2D?this.gl.texImage2D(this.target,this.level,this.internalFormat,this.width,this.height,0,this.format,this.type,this.image):this.target!==this.gl.TEXTURE_2D_ARRAY&&this.target!==this.gl.TEXTURE_3D||this.gl.texImage3D(this.target,this.level,this.internalFormat,this.width,this.height,this.length,0,this.format,this.type,this.image);else if(this.image.isCompressedTexture)for(var k=0;k<this.image.length;k++)this.gl.compressedTexImage2D(this.target,k,this.internalFormat,this.image[k].width,this.image[k].height,0,this.image[k].data);else this.target===this.gl.TEXTURE_2D?this.gl.texImage2D(this.target,this.level,this.internalFormat,this.format,this.type,this.image):this.gl.texImage3D(this.target,this.level,this.internalFormat,this.width,this.height,this.length,0,this.format,this.type,this.image);this.generateMipmaps&&(this.gl.renderer.isWebgl2||isPowerOf2(this.image.width)&&isPowerOf2(this.image.height)?this.gl.generateMipmap(this.target):(this.generateMipmaps=!1,this.wrapS=this.wrapT=this.gl.CLAMP_TO_EDGE,this.minFilter=this.gl.LINEAR)),this.onUpdate&&this.onUpdate()}else if(this.target===this.gl.TEXTURE_CUBE_MAP)for(var E=0;E<6;E++)this.gl.texImage2D(this.gl.TEXTURE_CUBE_MAP_POSITIVE_X+E,0,this.gl.RGBA,1,1,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,qC);else this.width?this.target===this.gl.TEXTURE_2D?this.gl.texImage2D(this.target,this.level,this.internalFormat,this.width,this.height,0,this.format,this.type,null):this.gl.texImage3D(this.target,this.level,this.internalFormat,this.width,this.height,this.length,0,this.format,this.type,null):this.gl.texImage2D(this.target,0,this.gl.RGBA,1,1,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,qC);this.store.image=this.image}}}])}();D("b_",YC);var KC=function(e){function Plane(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},S=_.width,k=void 0===S?1:S,E=_.height,T=void 0===E?1:E,M=_.widthSegments,I=void 0===M?1:M,R=_.heightSegments,O=void 0===R?1:R,D=_.attributes,L=void 0===D?{}:D;_classCallCheck3(this,Plane);var U=I,B=O,z=(U+1)*(B+1),G=U*B*6,j=new Float32Array(3*z),V=new Float32Array(3*z),H=new Float32Array(2*z),W=G>65536?new Uint32Array(G):new Uint16Array(G);return Plane.buildPlane(j,V,H,W,k,T,0,U,B),Object.assign(L,{position:{size:3,data:j},normal:{size:3,data:V},uv:{size:2,data:H},index:{data:W}}),_callSuper(this,Plane,[e,L])}return _inherits(Plane,e),_createClass3(Plane,null,[{key:"buildPlane",value:function(e,_,S,k,E,T,M,I,R){for(var O=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,D=arguments.length>10&&void 0!==arguments[10]?arguments[10]:1,L=arguments.length>11&&void 0!==arguments[11]?arguments[11]:2,U=arguments.length>12&&void 0!==arguments[12]?arguments[12]:1,B=arguments.length>13&&void 0!==arguments[13]?arguments[13]:-1,z=arguments.length>14&&void 0!==arguments[14]?arguments[14]:0,G=arguments.length>15&&void 0!==arguments[15]?arguments[15]:0,j=z,V=E/I,H=T/R,W=0;W<=R;W++)for(var q=W*H-T/2,X=0;X<=I;X++,z++){var Y=X*V-E/2;if(e[3*z+O]=Y*U,e[3*z+D]=q*B,e[3*z+L]=M/2,_[3*z+O]=0,_[3*z+D]=0,_[3*z+L]=M>=0?1:-1,S[2*z]=X/I,S[2*z+1]=1-W/R,W!==R&&X!==I){var K=j+X+W*(I+1),J=j+X+(W+1)*(I+1),Q=j+X+(W+1)*(I+1)+1,Z=j+X+W*(I+1)+1;k[6*G]=K,k[6*G+1]=J,k[6*G+2]=Z,k[6*G+3]=J,k[6*G+4]=Q,k[6*G+5]=Z,G++}}}}])}(kC);D("bZ",KC);var falsyToString=function(e){return"boolean"==typeof e?"".concat(e):0===e?"0":e},JC=clsx,QC=(D("c1",function(e,_){return function(S){var k;if(null==(null==_?void 0:_.variants))return JC(e,null==S?void 0:S.class,null==S?void 0:S.className);var E=_.variants,T=_.defaultVariants,M=Object.keys(E).map(function(e){var _=null==S?void 0:S[e],k=null==T?void 0:T[e];if(null===_)return null;var M=falsyToString(_)||falsyToString(k);return E[e][M]}),I=S&&Object.entries(S).reduce(function(e,_){var S=_slicedToArray(_,2),k=S[0],E=S[1];return void 0===E||(e[k]=E),e},{}),R=null==_||null===(k=_.compoundVariants)||void 0===k?void 0:k.reduce(function(e,_){var S=_.class,k=_.className,E=_objectWithoutProperties3(_,O);return Object.entries(E).every(function(e){var _=_slicedToArray(e,2),S=_[0],k=_[1];return Array.isArray(k)?k.includes(_objectSpread2(_objectSpread2({},T),I)[S]):_objectSpread2(_objectSpread2({},T),I)[S]===k})?[].concat(_toConsumableArray3(e),[S,k]):e},[]);return JC(e,M,R,null==S?void 0:S.class,null==S?void 0:S.className)}}),.001),ZC=function(){return _createClass3(function Timer(){_classCallCheck3(this,Timer),this.startTime=performance.now(),this.previousTime=0,this.currentTime=0,this._delta=0,this._elapsed=0,this._fixedDelta=1e3/60,this.timescale=1,this.useFixedDelta=!1,this._autoReset=!1},[{key:"autoReset",get:function(){return this._autoReset},set:function(e){"undefined"!=typeof document&&void 0!==document.hidden&&(e?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this),this._autoReset=e)}},{key:"delta",get:function(){return this._delta*QC}},{key:"fixedDelta",get:function(){return this._fixedDelta*QC},set:function(e){this._fixedDelta=1e3*e}},{key:"elapsed",get:function(){return this._elapsed*QC}},{key:"update",value:function(e){this.useFixedDelta?this._delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=(void 0!==e?e:performance.now())-this.startTime,this._delta=this.currentTime-this.previousTime),this._delta*=this.timescale,this._elapsed+=this._delta}},{key:"reset",value:function(){this._delta=0,this._elapsed=0,this.currentTime=performance.now()-this.startTime}},{key:"getDelta",value:function(){return this.delta}},{key:"getElapsed",value:function(){return this.elapsed}},{key:"handleEvent",value:function(e){document.hidden||(this.currentTime=performance.now()-this.startTime)}},{key:"dispose",value:function(){this.autoReset=!1}}])}(),$C=function(){var e=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),_=new Float32Array([0,0,2,0,0,2]),S=new gf;return S.setAttribute("position",new Zd(e,3)),S.setAttribute("uv",new Zd(_,2)),S}(),eA=function(){function _Pass(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Pass",_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new qf,S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Pf;_classCallCheck3(this,_Pass),this.name=e,this.renderer=null,this.scene=_,this.camera=S,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}return _createClass3(_Pass,[{key:"renderToScreen",get:function(){return!this.rtt},set:function(e){if(this.rtt===e){var _=this.fullscreenMaterial;null!==_&&(_.needsUpdate=!0),this.rtt=!e}}},{key:"mainScene",set:function(e){}},{key:"mainCamera",set:function(e){}},{key:"setRenderer",value:function(e){this.renderer=e}},{key:"isEnabled",value:function(){return this.enabled}},{key:"setEnabled",value:function(e){this.enabled=e}},{key:"fullscreenMaterial",get:function(){return null!==this.screen?this.screen.material:null},set:function(e){var _=this.screen;null!==_?_.material=e:((_=new Tf(_Pass.fullscreenGeometry,e)).frustumCulled=!1,null===this.scene&&(this.scene=new qf),this.scene.add(_),this.screen=_)}},{key:"getFullscreenMaterial",value:function(){return this.fullscreenMaterial}},{key:"setFullscreenMaterial",value:function(e){this.fullscreenMaterial=e}},{key:"getDepthTexture",value:function(){return null}},{key:"setDepthTexture",value:function(e){}},{key:"render",value:function(e,_,S,k,E){throw new Error("Render method not implemented!")}},{key:"setSize",value:function(e,_){}},{key:"initialize",value:function(e,_,S){}},{key:"dispose",value:function(){for(var e=0,_=Object.keys(this);e<_.length;e++){var S=_[e],k=this[S];(k instanceof bh||k instanceof Wd||k instanceof mh||k instanceof _Pass)&&this[S].dispose()}null!==this.fullscreenMaterial&&this.fullscreenMaterial.dispose()}}],[{key:"fullscreenGeometry",get:function(){return $C}}])}(),tA=function(e){function ClearMaskPass(){var e;return _classCallCheck3(this,ClearMaskPass),(e=_callSuper(this,ClearMaskPass,["ClearMaskPass",null,null])).needsSwap=!1,e}return _inherits(ClearMaskPass,e),_createClass3(ClearMaskPass,[{key:"render",value:function(e,_,S,k,E){var T=e.state.buffers.stencil;T.setLocked(!1),T.setTest(!1)}}])}(eA),rA="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",nA=function(e){function CopyMaterial(){return _classCallCheck3(this,CopyMaterial),_callSuper(this,CopyMaterial,[{name:"CopyMaterial",uniforms:{inputBuffer:new Ty(null),opacity:new Ty(1)},blending:0,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:"#include <common>\n#include <dithering_pars_fragment>\n#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\nuniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;\n#include <colorspace_fragment>\n#include <dithering_fragment>\n}",vertexShader:rA}])}return _inherits(CopyMaterial,e),_createClass3(CopyMaterial,[{key:"inputBuffer",set:function(e){this.uniforms.inputBuffer.value=e}},{key:"setInputBuffer",value:function(e){this.uniforms.inputBuffer.value=e}},{key:"getOpacity",value:function(e){return this.uniforms.opacity.value}},{key:"setOpacity",value:function(e){this.uniforms.opacity.value=e}}])}(Rf),iA=function(e){function CopyPass(e){var _,S=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return _classCallCheck3(this,CopyPass),(_=_callSuper(this,CopyPass,["CopyPass"])).fullscreenMaterial=new nA,_.needsSwap=!1,_.renderTarget=e,void 0===e&&(_.renderTarget=new bh(1,1,{minFilter:xl,magFilter:xl,stencilBuffer:!1,depthBuffer:!1}),_.renderTarget.texture.name="CopyPass.Target"),_.autoResize=S,_}return _inherits(CopyPass,e),_createClass3(CopyPass,[{key:"resize",get:function(){return this.autoResize},set:function(e){this.autoResize=e}},{key:"texture",get:function(){return this.renderTarget.texture}},{key:"getTexture",value:function(){return this.renderTarget.texture}},{key:"setAutoResizeEnabled",value:function(e){this.autoResize=e}},{key:"render",value:function(e,_,S,k,E){this.fullscreenMaterial.inputBuffer=_.texture,e.setRenderTarget(this.renderToScreen?null:this.renderTarget),e.render(this.scene,this.camera)}},{key:"setSize",value:function(e,_){this.autoResize&&this.renderTarget.setSize(e,_)}},{key:"initialize",value:function(e,_,S){void 0!==S&&(this.renderTarget.texture.type=S,S!==El?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":null!==e&&e.outputColorSpace===Bc&&(this.renderTarget.texture.colorSpace=Bc))}}])}(eA),aA=new jd,oA=function(e){function ClearPass(){var e,_=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],S=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],k=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return _classCallCheck3(this,ClearPass),(e=_callSuper(this,ClearPass,["ClearPass",null,null])).needsSwap=!1,e.color=_,e.depth=S,e.stencil=k,e.overrideClearColor=null,e.overrideClearAlpha=-1,e}return _inherits(ClearPass,e),_createClass3(ClearPass,[{key:"setClearFlags",value:function(e,_,S){this.color=e,this.depth=_,this.stencil=S}},{key:"getOverrideClearColor",value:function(){return this.overrideClearColor}},{key:"setOverrideClearColor",value:function(e){this.overrideClearColor=e}},{key:"getOverrideClearAlpha",value:function(){return this.overrideClearAlpha}},{key:"setOverrideClearAlpha",value:function(e){this.overrideClearAlpha=e}},{key:"render",value:function(e,_,S,k,E){var T=this.overrideClearColor,M=this.overrideClearAlpha,I=e.getClearAlpha(),R=null!==T,O=M>=0;R?(e.getClearColor(aA),e.setClearColor(T,O?M:I)):O&&e.setClearAlpha(M),e.setRenderTarget(this.renderToScreen?null:_),e.clear(this.color,this.depth,this.stencil),R?e.setClearColor(aA,I):O&&e.setClearAlpha(I)}}])}(eA),sA=function(e){function MaskPass(e,_){var S;return _classCallCheck3(this,MaskPass),(S=_callSuper(this,MaskPass,["MaskPass",e,_])).needsSwap=!1,S.clearPass=new oA(!1,!1,!0),S.inverse=!1,S}return _inherits(MaskPass,e),_createClass3(MaskPass,[{key:"mainScene",set:function(e){this.scene=e}},{key:"mainCamera",set:function(e){this.camera=e}},{key:"inverted",get:function(){return this.inverse},set:function(e){this.inverse=e}},{key:"clear",get:function(){return this.clearPass.enabled},set:function(e){this.clearPass.enabled=e}},{key:"getClearPass",value:function(){return this.clearPass}},{key:"isInverted",value:function(){return this.inverted}},{key:"setInverted",value:function(e){this.inverted=e}},{key:"render",value:function(e,_,S,k,E){var T=e.getContext(),M=e.state.buffers,I=this.scene,R=this.camera,O=this.clearPass,D=this.inverted?0:1,L=1-D;M.color.setMask(!1),M.depth.setMask(!1),M.color.setLocked(!0),M.depth.setLocked(!0),M.stencil.setTest(!0),M.stencil.setOp(T.REPLACE,T.REPLACE,T.REPLACE),M.stencil.setFunc(T.ALWAYS,D,4294967295),M.stencil.setClear(L),M.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?O.render(e,null):(O.render(e,_),O.render(e,S))),this.renderToScreen?(e.setRenderTarget(null),e.render(I,R)):(e.setRenderTarget(_),e.render(I,R),e.setRenderTarget(S),e.render(I,R)),M.color.setLocked(!1),M.depth.setLocked(!1),M.stencil.setLocked(!1),M.stencil.setFunc(T.EQUAL,1,4294967295),M.stencil.setOp(T.KEEP,T.KEEP,T.KEEP),M.stencil.setLocked(!0)}}])}(eA),uA=(D("c2",function(){return _createClass3(function _class(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},S=_.depthBuffer,k=void 0===S||S,E=_.stencilBuffer,T=void 0!==E&&E,M=_.multisampling,I=void 0===M?0:M,R=_.frameBufferType;_classCallCheck3(this,_class),this.renderer=null,this.inputBuffer=this.createBuffer(k,T,R,I),this.outputBuffer=this.inputBuffer.clone(),this.copyPass=new iA,this.depthTexture=null,this.passes=[],this.timer=new ZC,this.autoRenderToScreen=!0,this.setRenderer(e)},[{key:"multisampling",get:function(){return this.inputBuffer.samples||0},set:function(e){var _=this.inputBuffer,S=this.multisampling;S>0&&e>0?(this.inputBuffer.samples=e,this.outputBuffer.samples=e,this.inputBuffer.dispose(),this.outputBuffer.dispose()):S!==e&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),this.inputBuffer=this.createBuffer(_.depthBuffer,_.stencilBuffer,_.texture.type,e),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}},{key:"getTimer",value:function(){return this.timer}},{key:"getRenderer",value:function(){return this.renderer}},{key:"setRenderer",value:function(e){if(this.renderer=e,null!==e){var _=e.getSize(new $c),S=e.getContext().getContextAttributes().alpha,k=this.inputBuffer.texture.type;k===El&&e.outputColorSpace===Bc&&(this.inputBuffer.texture.colorSpace=Bc,this.outputBuffer.texture.colorSpace=Bc,this.inputBuffer.dispose(),this.outputBuffer.dispose()),e.autoClear=!1,this.setSize(_.width,_.height);var E,T=_createForOfIteratorHelper2(this.passes);try{for(T.s();!(E=T.n()).done;){E.value.initialize(e,S,k)}}catch(M){T.e(M)}finally{T.f()}}}},{key:"replaceRenderer",value:function(e){var _=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],S=this.renderer,k=S.domElement.parentNode;return this.setRenderer(e),_&&null!==k&&(k.removeChild(S.domElement),k.appendChild(e.domElement)),S}},{key:"createDepthTexture",value:function(){var e=this.depthTexture=new Lv;return this.inputBuffer.depthTexture=e,this.inputBuffer.dispose(),this.inputBuffer.stencilBuffer?(e.format=Hl,e.type=Ul):e.type=Pl,e}},{key:"deleteDepthTexture",value:function(){if(null!==this.depthTexture){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();var e,_=_createForOfIteratorHelper2(this.passes);try{for(_.s();!(e=_.n()).done;){e.value.setDepthTexture(null)}}catch(S){_.e(S)}finally{_.f()}}}},{key:"createBuffer",value:function(e,_,S,k){var E=this.renderer,T=null===E?new $c:E.getDrawingBufferSize(new $c),M={minFilter:xl,magFilter:xl,stencilBuffer:_,depthBuffer:e,type:S},I=new bh(T.width,T.height,M);return k>0&&(I.ignoreDepthForMultisampleCopy=!1,I.samples=k),S===El&&null!==E&&E.outputColorSpace===Bc&&(I.texture.colorSpace=Bc),I.texture.name="EffectComposer.Buffer",I.texture.generateMipmaps=!1,I}},{key:"setMainScene",value:function(e){var _,S=_createForOfIteratorHelper2(this.passes);try{for(S.s();!(_=S.n()).done;){_.value.mainScene=e}}catch(k){S.e(k)}finally{S.f()}}},{key:"setMainCamera",value:function(e){var _,S=_createForOfIteratorHelper2(this.passes);try{for(S.s();!(_=S.n()).done;){_.value.mainCamera=e}}catch(k){S.e(k)}finally{S.f()}}},{key:"addPass",value:function(e,_){var S=this.passes,k=this.renderer,E=k.getDrawingBufferSize(new $c),T=k.getContext().getContextAttributes().alpha,M=this.inputBuffer.texture.type;if(e.setRenderer(k),e.setSize(E.width,E.height),e.initialize(k,T,M),this.autoRenderToScreen&&(S.length>0&&(S[S.length-1].renderToScreen=!1),e.renderToScreen&&(this.autoRenderToScreen=!1)),void 0!==_?S.splice(_,0,e):S.push(e),this.autoRenderToScreen&&(S[S.length-1].renderToScreen=!0),e.needsDepthTexture||null!==this.depthTexture)if(null===this.depthTexture){var I,R=this.createDepthTexture(),O=_createForOfIteratorHelper2(S);try{for(O.s();!(I=O.n()).done;)(e=I.value).setDepthTexture(R)}catch(D){O.e(D)}finally{O.f()}}else e.setDepthTexture(this.depthTexture)}},{key:"removePass",value:function(e){var _=this.passes,S=_.indexOf(e);if(-1!==S&&_.splice(S,1).length>0){if(null!==this.depthTexture){var k=_.reduce(function(e,_){return e||_.needsDepthTexture},!1);k||(e.getDepthTexture()===this.depthTexture&&e.setDepthTexture(null),this.deleteDepthTexture())}this.autoRenderToScreen&&S===_.length&&(e.renderToScreen=!1,_.length>0&&(_[_.length-1].renderToScreen=!0))}}},{key:"removeAllPasses",value:function(){var e=this.passes;this.deleteDepthTexture(),e.length>0&&(this.autoRenderToScreen&&(e[e.length-1].renderToScreen=!1),this.passes=[])}},{key:"render",value:function(e){var _,S,k,E=this.renderer,T=this.copyPass,M=this.inputBuffer,I=this.outputBuffer,R=!1;void 0===e&&(this.timer.update(),e=this.timer.getDelta());var O,D=_createForOfIteratorHelper2(this.passes);try{for(D.s();!(O=D.n()).done;){var L=O.value;L.enabled&&(L.render(E,M,I,e,R),L.needsSwap&&(R&&(T.renderToScreen=L.renderToScreen,_=E.getContext(),(S=E.state.buffers.stencil).setFunc(_.NOTEQUAL,1,4294967295),T.render(E,M,I,e,R),S.setFunc(_.EQUAL,1,4294967295)),k=M,M=I,I=k),L instanceof sA?R=!0:L instanceof tA&&(R=!1))}}catch(U){D.e(U)}finally{D.f()}}},{key:"setSize",value:function(e,_,S){var k=this.renderer,E=k.getSize(new $c);void 0!==e&&void 0!==_||(e=E.width,_=E.height),E.width===e&&E.height===_||k.setSize(e,_,S);var T=k.getDrawingBufferSize(new $c);this.inputBuffer.setSize(T.width,T.height),this.outputBuffer.setSize(T.width,T.height);var M,I=_createForOfIteratorHelper2(this.passes);try{for(I.s();!(M=I.n()).done;){M.value.setSize(T.width,T.height)}}catch(R){I.e(R)}finally{I.f()}}},{key:"reset",value:function(){this.dispose(),this.autoRenderToScreen=!0}},{key:"dispose",value:function(){var e,_=_createForOfIteratorHelper2(this.passes);try{for(_.s();!(e=_.n()).done;){e.value.dispose()}}catch(S){_.e(S)}finally{_.f()}this.passes=[],null!==this.inputBuffer&&this.inputBuffer.dispose(),null!==this.outputBuffer&&this.outputBuffer.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose(),eA.fullscreenGeometry.dispose()}}])}()),0),lA=1,cA=2,hA={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},dA=_createClass3(function EffectShaderData(){_classCallCheck3(this,EffectShaderData),this.shaderParts=new Map([[hA.FRAGMENT_HEAD,null],[hA.FRAGMENT_MAIN_UV,null],[hA.FRAGMENT_MAIN_IMAGE,null],[hA.VERTEX_HEAD,null],[hA.VERTEX_MAIN_SUPPORT,null]]),this.defines=new Map,this.uniforms=new Map,this.blendModes=new Map,this.extensions=new Set,this.attributes=uA,this.varyings=new Set,this.uvTransformation=!1,this.readDepth=!1,this.colorSpace=Nc}),fA=!1,pA=function(){return _createClass3(function OverrideMaterialManager(){var e=this,_=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;_classCallCheck3(this,OverrideMaterialManager),this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(_),this.meshCount=0,this.replaceMaterial=function(_){if(_.isMesh){var S;if(_.material.flatShading)switch(_.material.side){case nl:S=e.materialsFlatShadedDoubleSide;break;case rl:S=e.materialsFlatShadedBackSide;break;default:S=e.materialsFlatShaded}else switch(_.material.side){case nl:S=e.materialsDoubleSide;break;case rl:S=e.materialsBackSide;break;default:S=e.materials}e.originalMaterials.set(_,_.material),_.isSkinnedMesh?_.material=S[2]:_.isInstancedMesh?_.material=S[1]:_.material=S[0],++e.meshCount}}},[{key:"cloneMaterial",value:function(e){if(!(e instanceof Rf))return e.clone();var _=e.uniforms,S=new Map;for(var k in _){var E=_[k].value;E.isRenderTargetTexture&&(_[k].value=null,S.set(k,E))}var T,M=e.clone(),I=_createForOfIteratorHelper2(S);try{for(I.s();!(T=I.n()).done;){var R=T.value;_[R[0]].value=R[1],M.uniforms[R[0]].value=R[1]}}catch(O){I.e(O)}finally{I.f()}return M}},{key:"setMaterial",value:function(e){var _=this;if(this.disposeMaterials(),this.material=e,null!==e){for(var S=this.materials=[this.cloneMaterial(e),this.cloneMaterial(e),this.cloneMaterial(e)],k=0,E=S;k<E.length;k++){var T=E[k];T.uniforms=Object.assign({},e.uniforms),T.side=0}S[2].skinning=!0,this.materialsBackSide=S.map(function(S){var k=_.cloneMaterial(S);return k.uniforms=Object.assign({},e.uniforms),k.side=rl,k}),this.materialsDoubleSide=S.map(function(S){var k=_.cloneMaterial(S);return k.uniforms=Object.assign({},e.uniforms),k.side=nl,k}),this.materialsFlatShaded=S.map(function(S){var k=_.cloneMaterial(S);return k.uniforms=Object.assign({},e.uniforms),k.flatShading=!0,k}),this.materialsFlatShadedBackSide=S.map(function(S){var k=_.cloneMaterial(S);return k.uniforms=Object.assign({},e.uniforms),k.flatShading=!0,k.side=rl,k}),this.materialsFlatShadedDoubleSide=S.map(function(S){var k=_.cloneMaterial(S);return k.uniforms=Object.assign({},e.uniforms),k.flatShading=!0,k.side=nl,k})}}},{key:"render",value:function(e,_,S){var k=e.shadowMap.enabled;if(e.shadowMap.enabled=!1,fA){var E=this.originalMaterials;this.meshCount=0,_.traverse(this.replaceMaterial),e.render(_,S);var T,M=_createForOfIteratorHelper2(E);try{for(M.s();!(T=M.n()).done;){var I=T.value;I[0].material=I[1]}}catch(O){M.e(O)}finally{M.f()}this.meshCount!==E.size&&E.clear()}else{var R=_.overrideMaterial;_.overrideMaterial=this.material,e.render(_,S),_.overrideMaterial=R}e.shadowMap.enabled=k}},{key:"disposeMaterials",value:function(){if(null!==this.material){var e,_=_createForOfIteratorHelper2(this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide));try{for(_.s();!(e=_.n()).done;){e.value.dispose()}}catch(S){_.e(S)}finally{_.f()}}}},{key:"dispose",value:function(){this.originalMaterials.clear(),this.disposeMaterials()}}],[{key:"workaroundEnabled",get:function(){return fA},set:function(e){fA=e}}])}(),vA=-1,gA=function(e){function Resolution(e){var _,S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:vA,k=arguments.length>2&&void 0!==arguments[2]?arguments[2]:vA,E=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return _classCallCheck3(this,Resolution),(_=_callSuper(this,Resolution)).resizable=e,_.baseSize=new $c(1,1),_.preferredSize=new $c(S,k),_.target=_.preferredSize,_.s=E,_.effectiveSize=new $c,_.addEventListener("change",function(){return _.updateEffectiveSize()}),_.updateEffectiveSize(),_}return _inherits(Resolution,e),_createClass3(Resolution,[{key:"updateEffectiveSize",value:function(){var e=this.baseSize,_=this.preferredSize,S=this.effectiveSize,k=this.scale;_.width!==vA?S.width=_.width:_.height!==vA?S.width=Math.round(_.height*(e.width/Math.max(e.height,1))):S.width=Math.round(e.width*k),_.height!==vA?S.height=_.height:_.width!==vA?S.height=Math.round(_.width/Math.max(e.width/Math.max(e.height,1),1)):S.height=Math.round(e.height*k)}},{key:"width",get:function(){return this.effectiveSize.width},set:function(e){this.preferredWidth=e}},{key:"height",get:function(){return this.effectiveSize.height},set:function(e){this.preferredHeight=e}},{key:"getWidth",value:function(){return this.width}},{key:"getHeight",value:function(){return this.height}},{key:"scale",get:function(){return this.s},set:function(e){this.s!==e&&(this.s=e,this.preferredSize.setScalar(vA),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}},{key:"getScale",value:function(){return this.scale}},{key:"setScale",value:function(e){this.scale=e}},{key:"baseWidth",get:function(){return this.baseSize.width},set:function(e){this.baseSize.width!==e&&(this.baseSize.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}},{key:"getBaseWidth",value:function(){return this.baseWidth}},{key:"setBaseWidth",value:function(e){this.baseWidth=e}},{key:"baseHeight",get:function(){return this.baseSize.height},set:function(e){this.baseSize.height!==e&&(this.baseSize.height=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}},{key:"getBaseHeight",value:function(){return this.baseHeight}},{key:"setBaseHeight",value:function(e){this.baseHeight=e}},{key:"setBaseSize",value:function(e,_){this.baseSize.width===e&&this.baseSize.height===_||(this.baseSize.set(e,_),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}},{key:"preferredWidth",get:function(){return this.preferredSize.width},set:function(e){this.preferredSize.width!==e&&(this.preferredSize.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}},{key:"getPreferredWidth",value:function(){return this.preferredWidth}},{key:"setPreferredWidth",value:function(e){this.preferredWidth=e}},{key:"preferredHeight",get:function(){return this.preferredSize.height},set:function(e){this.preferredSize.height!==e&&(this.preferredSize.height=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}},{key:"getPreferredHeight",value:function(){return this.preferredHeight}},{key:"setPreferredHeight",value:function(e){this.preferredHeight=e}},{key:"setPreferredSize",value:function(e,_){this.preferredSize.width===e&&this.preferredSize.height===_||(this.preferredSize.set(e,_),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}},{key:"copy",value:function(e){this.s=e.scale,this.baseSize.set(e.baseWidth,e.baseHeight),this.preferredSize.set(e.preferredWidth,e.preferredHeight),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height)}}],[{key:"AUTO_SIZE",get:function(){return vA}}])}(Xc),mA=9,yA=23,_A=28,bA=30,SA=new Map([[0,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(x.rgb+y.rgb,y.a),opacity);}"],[1,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,y.a*opacity);}"],[2,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4((x.rgb+y.rgb)*0.5,y.a),opacity);}"],[3,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.xy,xHSL.z));return mix(x,vec4(z,y.a),opacity);}"],[4,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 a=x.rgb,b=y.rgb;vec3 z=mix(step(0.0,b)*(1.0-min(vec3(1.0),(1.0-a)/b)),vec3(1.0),step(1.0,a));return mix(x,vec4(z,y.a),opacity);}"],[5,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 a=x.rgb,b=y.rgb;vec3 z=step(0.0,a)*mix(min(vec3(1.0),a/max(1.0-b,1e-9)),vec3(1.0),step(1.0,b));return mix(x,vec4(z,y.a),opacity);}"],[6,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(min(x.rgb,y.rgb),y.a),opacity);}"],[7,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(abs(x.rgb-y.rgb),y.a),opacity);}"],[8,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(x.rgb/max(y.rgb,1e-12),y.a),opacity);}"],[mA,null],[10,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4((x.rgb+y.rgb-2.0*x.rgb*y.rgb),y.a),opacity);}"],[11,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 a=min(x.rgb,1.0);vec3 b=min(y.rgb,1.0);vec3 z=mix(2.0*a*b,1.0-2.0*(1.0-a)*(1.0-b),step(0.5,b));return mix(x,vec4(z,y.a),opacity);}"],[12,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(step(1.0,x.rgb+y.rgb),y.a),opacity);}"],[13,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.x,xHSL.yz));return mix(x,vec4(z,y.a),opacity);}"],[14,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(1.0-y.rgb,y.a),opacity);}"],[15,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(y.rgb*(1.0-x.rgb),y.a),opacity);}"],[16,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(max(x.rgb,y.rgb),y.a),opacity);}"],[17,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(clamp(y.rgb+x.rgb-1.0,0.0,1.0),y.a),opacity);}"],[18,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(min(x.rgb+y.rgb,1.0),y.a),opacity);}"],[19,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(clamp(2.0*y.rgb+x.rgb-1.0,0.0,1.0),y.a),opacity);}"],[20,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.xy,yHSL.z));return mix(x,vec4(z,y.a),opacity);}"],[21,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(x.rgb*y.rgb,y.a),opacity);}"],[22,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(1.0-abs(1.0-x.rgb-y.rgb),y.a),opacity);}"],[yA,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,opacity);}"],[24,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 z=mix(2.0*y.rgb*x.rgb,1.0-2.0*(1.0-y.rgb)*(1.0-x.rgb),step(0.5,x.rgb));return mix(x,vec4(z,y.a),opacity);}"],[25,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 y2=2.0*y.rgb;vec3 z=mix(mix(y2,x.rgb,step(0.5*x.rgb,y.rgb)),max(y2-1.0,vec3(0.0)),step(x.rgb,y2-1.0));return mix(x,vec4(z,y.a),opacity);}"],[26,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 z=mix(min(x.rgb*x.rgb/max(1.0-y.rgb,1e-12),1.0),y.rgb,step(1.0,y.rgb));return mix(x,vec4(z,y.a),opacity);}"],[27,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.x,yHSL.y,xHSL.z));return mix(x,vec4(z,y.a),opacity);}"],[_A,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(x.rgb+y.rgb-min(x.rgb*y.rgb,1.0),y.a),opacity);}"],[29,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 a=x.rgb;vec3 b=y.rgb;vec3 y2=2.0*b;vec3 w=step(0.5,b);vec3 c=a-(1.0-y2)*a*(1.0-a);vec3 d=mix(a+(y2-1.0)*(sqrt(a)-a),a+(y2-1.0)*a*((16.0*a-12.0)*a+3.0),w*(1.0-step(0.25,a)));vec3 z=mix(c,d,w);return mix(x,vec4(z,y.a),opacity);}"],[bA,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y;}"],[31,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(max(x.rgb+y.rgb-1.0,0.0),y.a),opacity);}"],[32,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 z=mix(max(1.0-min((1.0-x.rgb)/(2.0*y.rgb),1.0),0.0),min(x.rgb/(2.0*(1.0-y.rgb)),1.0),step(0.5,y.rgb));return mix(x,vec4(z,y.a),opacity);}"]]),wA=function(e){function BlendMode(e){var _,S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return _classCallCheck3(this,BlendMode),(_=_callSuper(this,BlendMode))._blendFunction=e,_.opacity=new Ty(S),_}return _inherits(BlendMode,e),_createClass3(BlendMode,[{key:"getOpacity",value:function(){return this.opacity.value}},{key:"setOpacity",value:function(e){this.opacity.value=e}},{key:"blendFunction",get:function(){return this._blendFunction},set:function(e){this._blendFunction=e,this.dispatchEvent({type:"change"})}},{key:"getBlendFunction",value:function(){return this.blendFunction}},{key:"setBlendFunction",value:function(e){this.blendFunction=e}},{key:"getShaderCode",value:function(){return SA.get(this.blendFunction)}}])}(Xc),xA=function(e){function Effect(e,_){var S,k=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},E=k.attributes,T=void 0===E?uA:E,M=k.blendFunction,I=void 0===M?yA:M,R=k.defines,O=void 0===R?new Map:R,D=k.uniforms,L=void 0===D?new Map:D,U=k.extensions,B=void 0===U?null:U,z=k.vertexShader,G=void 0===z?null:z;return _classCallCheck3(this,Effect),(S=_callSuper(this,Effect)).name=e,S.renderer=null,S.attributes=T,S.fragmentShader=_,S.vertexShader=G,S.defines=O,S.uniforms=L,S.extensions=B,S.blendMode=new wA(I),S.blendMode.addEventListener("change",function(e){return S.setChanged()}),S._inputColorSpace=Nc,S._outputColorSpace=Uc,S}return _inherits(Effect,e),_createClass3(Effect,[{key:"inputColorSpace",get:function(){return this._inputColorSpace},set:function(e){this._inputColorSpace=e,this.setChanged()}},{key:"outputColorSpace",get:function(){return this._outputColorSpace},set:function(e){this._outputColorSpace=e,this.setChanged()}},{key:"mainScene",set:function(e){}},{key:"mainCamera",set:function(e){}},{key:"getName",value:function(){return this.name}},{key:"setRenderer",value:function(e){this.renderer=e}},{key:"getDefines",value:function(){return this.defines}},{key:"getUniforms",value:function(){return this.uniforms}},{key:"getExtensions",value:function(){return this.extensions}},{key:"getBlendMode",value:function(){return this.blendMode}},{key:"getAttributes",value:function(){return this.attributes}},{key:"setAttributes",value:function(e){this.attributes=e,this.setChanged()}},{key:"getFragmentShader",value:function(){return this.fragmentShader}},{key:"setFragmentShader",value:function(e){this.fragmentShader=e,this.setChanged()}},{key:"getVertexShader",value:function(){return this.vertexShader}},{key:"setVertexShader",value:function(e){this.vertexShader=e,this.setChanged()}},{key:"setChanged",value:function(){this.dispatchEvent({type:"change"})}},{key:"setDepthTexture",value:function(e){}},{key:"update",value:function(e,_,S){}},{key:"setSize",value:function(e,_){}},{key:"initialize",value:function(e,_,S){}},{key:"dispose",value:function(){for(var e=0,_=Object.keys(this);e<_.length;e++){var S=_[e],k=this[S];(k instanceof bh||k instanceof Wd||k instanceof mh||k instanceof eA)&&this[S].dispose()}}}])}(Xc),kA=2,CA=3,AA=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],EA=function(e){function KawaseBlurMaterial(){var e,_=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new yh;return _classCallCheck3(this,KawaseBlurMaterial),(e=_callSuper(this,KawaseBlurMaterial,[{name:"KawaseBlurMaterial",uniforms:{inputBuffer:new Ty(null),texelSize:new Ty(new yh),scale:new Ty(1),kernel:new Ty(0)},blending:0,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:"#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\nvarying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;\n#include <colorspace_fragment>\n}",vertexShader:"uniform vec4 texelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize.xy*vec2(kernel)+texelSize.zw)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}"}])).setTexelSize(_.x,_.y),e.kernelSize=kA,e}return _inherits(KawaseBlurMaterial,e),_createClass3(KawaseBlurMaterial,[{key:"inputBuffer",set:function(e){this.uniforms.inputBuffer.value=e}},{key:"setInputBuffer",value:function(e){this.inputBuffer=e}},{key:"kernelSequence",get:function(){return AA[this.kernelSize]}},{key:"scale",get:function(){return this.uniforms.scale.value},set:function(e){this.uniforms.scale.value=e}},{key:"getScale",value:function(){return this.uniforms.scale.value}},{key:"setScale",value:function(e){this.uniforms.scale.value=e}},{key:"getKernel",value:function(){return null}},{key:"kernel",get:function(){return this.uniforms.kernel.value},set:function(e){this.uniforms.kernel.value=e}},{key:"setKernel",value:function(e){this.kernel=e}},{key:"setTexelSize",value:function(e,_){this.uniforms.texelSize.value.set(e,_,.5*e,.5*_)}},{key:"setSize",value:function(e,_){var S=1/e,k=1/_;this.uniforms.texelSize.value.set(S,k,.5*S,.5*k)}}])}(Rf),TA=function(e){function KawaseBlurPass(){var e,_=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},S=_.kernelSize,k=void 0===S?kA:S,E=_.resolutionScale,T=void 0===E?.5:E,M=_.width,I=void 0===M?gA.AUTO_SIZE:M,R=_.height,O=void 0===R?gA.AUTO_SIZE:R,D=_.resolutionX,L=void 0===D?I:D,U=_.resolutionY,B=void 0===U?O:U;_classCallCheck3(this,KawaseBlurPass),(e=_callSuper(this,KawaseBlurPass,["KawaseBlurPass"])).renderTargetA=new bh(1,1,{depthBuffer:!1}),e.renderTargetA.texture.name="Blur.Target.A",e.renderTargetB=e.renderTargetA.clone(),e.renderTargetB.texture.name="Blur.Target.B";var z=e.resolution=new gA(e,L,B,T);return z.addEventListener("change",function(_){return e.setSize(z.baseWidth,z.baseHeight)}),e._blurMaterial=new EA,e._blurMaterial.kernelSize=k,e.copyMaterial=new nA,e}return _inherits(KawaseBlurPass,e),_createClass3(KawaseBlurPass,[{key:"getResolution",value:function(){return this.resolution}},{key:"blurMaterial",get:function(){return this._blurMaterial},set:function(e){this._blurMaterial=e}},{key:"dithering",get:function(){return this.copyMaterial.dithering},set:function(e){this.copyMaterial.dithering=e}},{key:"kernelSize",get:function(){return this.blurMaterial.kernelSize},set:function(e){this.blurMaterial.kernelSize=e}},{key:"width",get:function(){return this.resolution.width},set:function(e){this.resolution.preferredWidth=e}},{key:"height",get:function(){return this.resolution.height},set:function(e){this.resolution.preferredHeight=e}},{key:"scale",get:function(){return this.blurMaterial.scale},set:function(e){this.blurMaterial.scale=e}},{key:"getScale",value:function(){return this.blurMaterial.scale}},{key:"setScale",value:function(e){this.blurMaterial.scale=e}},{key:"getKernelSize",value:function(){return this.kernelSize}},{key:"setKernelSize",value:function(e){this.kernelSize=e}},{key:"getResolutionScale",value:function(){return this.resolution.scale}},{key:"setResolutionScale",value:function(e){this.resolution.scale=e}},{key:"render",value:function(e,_,S,k,E){var T=this.scene,M=this.camera,I=this.renderTargetA,R=this.renderTargetB,O=this.blurMaterial,D=O.kernelSequence,L=_;this.fullscreenMaterial=O;for(var U=0,B=D.length;U<B;++U){var z=1&U?R:I;O.kernel=D[U],O.inputBuffer=L.texture,e.setRenderTarget(z),e.render(T,M),L=z}this.fullscreenMaterial=this.copyMaterial,this.copyMaterial.inputBuffer=L.texture,e.setRenderTarget(this.renderToScreen?null:S),e.render(T,M)}},{key:"setSize",value:function(e,_){var S=this.resolution;S.setBaseSize(e,_);var k=S.width,E=S.height;this.renderTargetA.setSize(k,E),this.renderTargetB.setSize(k,E),this.blurMaterial.setSize(e,_)}},{key:"initialize",value:function(e,_,S){void 0!==S&&(this.renderTargetA.texture.type=S,this.renderTargetB.texture.type=S,S!==El?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.copyMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):null!==e&&e.outputColorSpace===Bc&&(this.renderTargetA.texture.colorSpace=Bc,this.renderTargetB.texture.colorSpace=Bc))}}],[{key:"AUTO_SIZE",get:function(){return gA.AUTO_SIZE}}])}(eA),MA=function(e){function LuminanceMaterial(){var e,_=arguments.length>0&&void 0!==arguments[0]&&arguments[0],S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return _classCallCheck3(this,LuminanceMaterial),(e=_callSuper(this,LuminanceMaterial,[{name:"LuminanceMaterial",defines:{THREE_REVISION:Qu.replace(/\D+/g,"")},uniforms:{inputBuffer:new Ty(null),threshold:new Ty(0),smoothing:new Ty(1),range:new Ty(null)},blending:0,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:"#include <common>\n#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\n#ifdef RANGE\nuniform vec2 range;\n#elif defined(THRESHOLD)\nuniform float threshold;uniform float smoothing;\n#endif\nvarying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);float l=luminance(texel.rgb);float mask=1.0;\n#ifdef RANGE\nfloat low=step(range.x,l);float high=step(l,range.y);mask=low*high;\n#elif defined(THRESHOLD)\nmask=smoothstep(threshold,threshold+smoothing,l);\n#endif\n#ifdef COLOR\ngl_FragColor=texel*mask;\n#else\ngl_FragColor=vec4(l*mask);\n#endif\n}",vertexShader:rA}])).colorOutput=_,e.luminanceRange=S,e}return _inherits(LuminanceMaterial,e),_createClass3(LuminanceMaterial,[{key:"inputBuffer",set:function(e){this.uniforms.inputBuffer.value=e}},{key:"setInputBuffer",value:function(e){this.uniforms.inputBuffer.value=e}},{key:"threshold",get:function(){return this.uniforms.threshold.value},set:function(e){this.smoothing>0||e>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.threshold.value=e}},{key:"getThreshold",value:function(){return this.threshold}},{key:"setThreshold",value:function(e){this.threshold=e}},{key:"smoothing",get:function(){return this.uniforms.smoothing.value},set:function(e){this.threshold>0||e>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.smoothing.value=e}},{key:"getSmoothingFactor",value:function(){return this.smoothing}},{key:"setSmoothingFactor",value:function(e){this.smoothing=e}},{key:"useThreshold",get:function(){return this.threshold>0||this.smoothing>0},set:function(e){}},{key:"colorOutput",get:function(){return void 0!==this.defines.COLOR},set:function(e){e?this.defines.COLOR="1":delete this.defines.COLOR,this.needsUpdate=!0}},{key:"isColorOutputEnabled",value:function(e){return this.colorOutput}},{key:"setColorOutputEnabled",value:function(e){this.colorOutput=e}},{key:"useRange",get:function(){return null!==this.luminanceRange},set:function(e){this.luminanceRange=null}},{key:"luminanceRange",get:function(){return this.uniforms.range.value},set:function(e){null!==e?this.defines.RANGE="1":delete this.defines.RANGE,this.uniforms.range.value=e,this.needsUpdate=!0}},{key:"getLuminanceRange",value:function(){return this.luminanceRange}},{key:"setLuminanceRange",value:function(e){this.luminanceRange=e}}])}(Rf),IA=function(e){function LuminancePass(){var e,_=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},S=_.renderTarget,k=_.luminanceRange,E=_.colorOutput,T=_.resolutionScale,M=void 0===T?1:T,I=_.width,R=void 0===I?gA.AUTO_SIZE:I,O=_.height,D=void 0===O?gA.AUTO_SIZE:O,L=_.resolutionX,U=void 0===L?R:L,B=_.resolutionY,z=void 0===B?D:B;_classCallCheck3(this,LuminancePass),(e=_callSuper(this,LuminancePass,["LuminancePass"])).fullscreenMaterial=new MA(E,k),e.needsSwap=!1,e.renderTarget=S,void 0===e.renderTarget&&(e.renderTarget=new bh(1,1,{depthBuffer:!1}),e.renderTarget.texture.name="LuminancePass.Target");var G=e.resolution=new gA(e,U,z,M);return G.addEventListener("change",function(_){return e.setSize(G.baseWidth,G.baseHeight)}),e}return _inherits(LuminancePass,e),_createClass3(LuminancePass,[{key:"texture",get:function(){return this.renderTarget.texture}},{key:"getTexture",value:function(){return this.renderTarget.texture}},{key:"getResolution",value:function(){return this.resolution}},{key:"render",value:function(e,_,S,k,E){this.fullscreenMaterial.inputBuffer=_.texture,e.setRenderTarget(this.renderToScreen?null:this.renderTarget),e.render(this.scene,this.camera)}},{key:"setSize",value:function(e,_){var S=this.resolution;S.setBaseSize(e,_),this.renderTarget.setSize(S.width,S.height)}},{key:"initialize",value:function(e,_,S){void 0!==S&&S!==El&&(this.renderTarget.texture.type=S,this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}}])}(eA),RA=function(e){function DownsamplingMaterial(){return _classCallCheck3(this,DownsamplingMaterial),_callSuper(this,DownsamplingMaterial,[{name:"DownsamplingMaterial",uniforms:{inputBuffer:new Ty(null),texelSize:new Ty(new $c)},blending:0,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:"#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\n#define WEIGHT_INNER 0.125\n#define WEIGHT_OUTER 0.0555555\nvarying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;float clampToBorder(const in vec2 uv){return float(uv.s>=0.0&&uv.s<=1.0&&uv.t>=0.0&&uv.t<=1.0);}void main(){vec4 c=vec4(0.0);vec4 w=WEIGHT_INNER*vec4(clampToBorder(vUv00),clampToBorder(vUv01),clampToBorder(vUv02),clampToBorder(vUv03));c+=w.x*texture2D(inputBuffer,vUv00);c+=w.y*texture2D(inputBuffer,vUv01);c+=w.z*texture2D(inputBuffer,vUv02);c+=w.w*texture2D(inputBuffer,vUv03);w=WEIGHT_OUTER*vec4(clampToBorder(vUv04),clampToBorder(vUv05),clampToBorder(vUv06),clampToBorder(vUv07));c+=w.x*texture2D(inputBuffer,vUv04);c+=w.y*texture2D(inputBuffer,vUv05);c+=w.z*texture2D(inputBuffer,vUv06);c+=w.w*texture2D(inputBuffer,vUv07);w=WEIGHT_OUTER*vec4(clampToBorder(vUv08),clampToBorder(vUv09),clampToBorder(vUv10),clampToBorder(vUv11));c+=w.x*texture2D(inputBuffer,vUv08);c+=w.y*texture2D(inputBuffer,vUv09);c+=w.z*texture2D(inputBuffer,vUv10);c+=w.w*texture2D(inputBuffer,vUv11);c+=WEIGHT_OUTER*texture2D(inputBuffer,vUv);gl_FragColor=c;\n#include <colorspace_fragment>\n}",vertexShader:"uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;void main(){vUv=position.xy*0.5+0.5;vUv00=vUv+texelSize*vec2(-1.0,1.0);vUv01=vUv+texelSize*vec2(1.0,1.0);vUv02=vUv+texelSize*vec2(-1.0,-1.0);vUv03=vUv+texelSize*vec2(1.0,-1.0);vUv04=vUv+texelSize*vec2(-2.0,2.0);vUv05=vUv+texelSize*vec2(0.0,2.0);vUv06=vUv+texelSize*vec2(2.0,2.0);vUv07=vUv+texelSize*vec2(-2.0,0.0);vUv08=vUv+texelSize*vec2(2.0,0.0);vUv09=vUv+texelSize*vec2(-2.0,-2.0);vUv10=vUv+texelSize*vec2(0.0,-2.0);vUv11=vUv+texelSize*vec2(2.0,-2.0);gl_Position=vec4(position.xy,1.0,1.0);}"}])}return _inherits(DownsamplingMaterial,e),_createClass3(DownsamplingMaterial,[{key:"inputBuffer",set:function(e){this.uniforms.inputBuffer.value=e}},{key:"setSize",value:function(e,_){this.uniforms.texelSize.value.set(1/e,1/_)}}])}(Rf),PA=function(e){function UpsamplingMaterial(){return _classCallCheck3(this,UpsamplingMaterial),_callSuper(this,UpsamplingMaterial,[{name:"UpsamplingMaterial",uniforms:{inputBuffer:new Ty(null),supportBuffer:new Ty(null),texelSize:new Ty(new $c),radius:new Ty(.85)},blending:0,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:"#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;uniform mediump sampler2D supportBuffer;\n#else\nuniform lowp sampler2D inputBuffer;uniform lowp sampler2D supportBuffer;\n#endif\nuniform float radius;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vec4 c=vec4(0.0);c+=texture2D(inputBuffer,vUv0)*0.0625;c+=texture2D(inputBuffer,vUv1)*0.125;c+=texture2D(inputBuffer,vUv2)*0.0625;c+=texture2D(inputBuffer,vUv3)*0.125;c+=texture2D(inputBuffer,vUv)*0.25;c+=texture2D(inputBuffer,vUv4)*0.125;c+=texture2D(inputBuffer,vUv5)*0.0625;c+=texture2D(inputBuffer,vUv6)*0.125;c+=texture2D(inputBuffer,vUv7)*0.0625;vec4 baseColor=texture2D(supportBuffer,vUv);gl_FragColor=mix(baseColor,c,radius);\n#include <colorspace_fragment>\n}",vertexShader:"uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,1.0);vUv1=vUv+texelSize*vec2(0.0,1.0);vUv2=vUv+texelSize*vec2(1.0,1.0);vUv3=vUv+texelSize*vec2(-1.0,0.0);vUv4=vUv+texelSize*vec2(1.0,0.0);vUv5=vUv+texelSize*vec2(-1.0,-1.0);vUv6=vUv+texelSize*vec2(0.0,-1.0);vUv7=vUv+texelSize*vec2(1.0,-1.0);gl_Position=vec4(position.xy,1.0,1.0);}"}])}return _inherits(UpsamplingMaterial,e),_createClass3(UpsamplingMaterial,[{key:"inputBuffer",set:function(e){this.uniforms.inputBuffer.value=e}},{key:"supportBuffer",set:function(e){this.uniforms.supportBuffer.value=e}},{key:"radius",get:function(){return this.uniforms.radius.value},set:function(e){this.uniforms.radius.value=e}},{key:"setSize",value:function(e,_){this.uniforms.texelSize.value.set(1/e,1/_)}}])}(Rf),OA=function(e){function MipmapBlurPass(){var e;return _classCallCheck3(this,MipmapBlurPass),(e=_callSuper(this,MipmapBlurPass,["MipmapBlurPass"])).needsSwap=!1,e.renderTarget=new bh(1,1,{depthBuffer:!1}),e.renderTarget.texture.name="Upsampling.Mipmap0",e.downsamplingMipmaps=[],e.upsamplingMipmaps=[],e.downsamplingMaterial=new RA,e.upsamplingMaterial=new PA,e.resolution=new $c,e}return _inherits(MipmapBlurPass,e),_createClass3(MipmapBlurPass,[{key:"texture",get:function(){return this.renderTarget.texture}},{key:"levels",get:function(){return this.downsamplingMipmaps.length},set:function(e){if(this.levels!==e){var _=this.renderTarget;this.dispose(),this.downsamplingMipmaps=[],this.upsamplingMipmaps=[];for(var S=0;S<e;++S){var k=_.clone();k.texture.name="Downsampling.Mipmap"+S,this.downsamplingMipmaps.push(k)}this.upsamplingMipmaps.push(_);for(var E=1,T=e-1;E<T;++E){var M=_.clone();M.texture.name="Upsampling.Mipmap"+E,this.upsamplingMipmaps.push(M)}this.setSize(this.resolution.x,this.resolution.y)}}},{key:"radius",get:function(){return this.upsamplingMaterial.radius},set:function(e){this.upsamplingMaterial.radius=e}},{key:"render",value:function(e,_,S,k,E){var T=this.scene,M=this.camera,I=this.downsamplingMaterial,R=this.upsamplingMaterial,O=this.downsamplingMipmaps,D=this.upsamplingMipmaps,L=_;this.fullscreenMaterial=I;for(var U=0,B=O.length;U<B;++U){var z=O[U];I.setSize(L.width,L.height),I.inputBuffer=L.texture,e.setRenderTarget(z),e.render(T,M),L=z}this.fullscreenMaterial=R;for(var G=D.length-1;G>=0;--G){var j=D[G];R.setSize(L.width,L.height),R.inputBuffer=L.texture,R.supportBuffer=O[G].texture,e.setRenderTarget(j),e.render(T,M),L=j}}},{key:"setSize",value:function(e,_){var S=this.resolution;S.set(e,_);for(var k=S.width,E=S.height,T=0,M=this.downsamplingMipmaps.length;T<M;++T)k=Math.round(.5*k),E=Math.round(.5*E),this.downsamplingMipmaps[T].setSize(k,E),T<this.upsamplingMipmaps.length&&this.upsamplingMipmaps[T].setSize(k,E)}},{key:"initialize",value:function(e,_,S){if(void 0!==S){var k,E=this.downsamplingMipmaps.concat(this.upsamplingMipmaps),T=_createForOfIteratorHelper2(E);try{for(T.s();!(k=T.n()).done;){k.value.texture.type=S}}catch(R){T.e(R)}finally{T.f()}if(S!==El)this.downsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.upsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1";else if(null!==e&&e.outputColorSpace===Bc){var M,I=_createForOfIteratorHelper2(E);try{for(I.s();!(M=I.n()).done;){M.value.texture.colorSpace=Bc}}catch(R){I.e(R)}finally{I.f()}}}}},{key:"dispose",value:function(){_superPropGet(MipmapBlurPass,"dispose",this,3)([]);var e,_=_createForOfIteratorHelper2(this.downsamplingMipmaps.concat(this.upsamplingMipmaps));try{for(_.s();!(e=_.n()).done;){e.value.dispose()}}catch(S){_.e(S)}finally{_.f()}}}])}(eA),DA=(D("c6",function(e){function _class2(){var e,_=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},S=_.blendFunction,k=void 0===S?_A:S,E=_.luminanceThreshold,T=void 0===E?1:E,M=_.luminanceSmoothing,I=void 0===M?.03:M,R=_.mipmapBlur,O=void 0===R||R,D=_.intensity,L=void 0===D?1:D,U=_.radius,B=void 0===U?.85:U,z=_.levels,G=void 0===z?8:z,j=_.kernelSize,V=void 0===j?CA:j,H=_.resolutionScale,W=void 0===H?.5:H,q=_.width,X=void 0===q?gA.AUTO_SIZE:q,Y=_.height,K=void 0===Y?gA.AUTO_SIZE:Y,J=_.resolutionX,Q=void 0===J?X:J,Z=_.resolutionY,$=void 0===Z?K:Z;_classCallCheck3(this,_class2),(e=_callSuper(this,_class2,["BloomEffect","#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D map;\n#else\nuniform lowp sampler2D map;\n#endif\nuniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec4 texel=texture2D(map,uv);outputColor=vec4(texel.rgb*intensity,max(inputColor.a,texel.a));}",{blendFunction:k,uniforms:new Map([["map",new Ty(null)],["intensity",new Ty(L)]])}])).renderTarget=new bh(1,1,{depthBuffer:!1}),e.renderTarget.texture.name="Bloom.Target",e.blurPass=new TA({kernelSize:V}),e.luminancePass=new IA({colorOutput:!0}),e.luminanceMaterial.threshold=T,e.luminanceMaterial.smoothing=I,e.mipmapBlurPass=new OA,e.mipmapBlurPass.enabled=O,e.mipmapBlurPass.radius=B,e.mipmapBlurPass.levels=G,e.uniforms.get("map").value=O?e.mipmapBlurPass.texture:e.renderTarget.texture;var ee=e.resolution=new gA(e,Q,$,W);return ee.addEventListener("change",function(_){return e.setSize(ee.baseWidth,ee.baseHeight)}),e}return _inherits(_class2,e),_createClass3(_class2,[{key:"texture",get:function(){return this.mipmapBlurPass.enabled?this.mipmapBlurPass.texture:this.renderTarget.texture}},{key:"getTexture",value:function(){return this.texture}},{key:"getResolution",value:function(){return this.resolution}},{key:"getBlurPass",value:function(){return this.blurPass}},{key:"getLuminancePass",value:function(){return this.luminancePass}},{key:"luminanceMaterial",get:function(){return this.luminancePass.fullscreenMaterial}},{key:"getLuminanceMaterial",value:function(){return this.luminancePass.fullscreenMaterial}},{key:"width",get:function(){return this.resolution.width},set:function(e){this.resolution.preferredWidth=e}},{key:"height",get:function(){return this.resolution.height},set:function(e){this.resolution.preferredHeight=e}},{key:"dithering",get:function(){return this.blurPass.dithering},set:function(e){this.blurPass.dithering=e}},{key:"kernelSize",get:function(){return this.blurPass.kernelSize},set:function(e){this.blurPass.kernelSize=e}},{key:"distinction",get:function(){return 1},set:function(e){}},{key:"intensity",get:function(){return this.uniforms.get("intensity").value},set:function(e){this.uniforms.get("intensity").value=e}},{key:"getIntensity",value:function(){return this.intensity}},{key:"setIntensity",value:function(e){this.intensity=e}},{key:"getResolutionScale",value:function(){return this.resolution.scale}},{key:"setResolutionScale",value:function(e){this.resolution.scale=e}},{key:"update",value:function(e,_,S){var k=this.renderTarget,E=this.luminancePass;E.enabled?(E.render(e,_),this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(e,E.renderTarget):this.blurPass.render(e,E.renderTarget,k)):this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(e,_):this.blurPass.render(e,_,k)}},{key:"setSize",value:function(e,_){var S=this.resolution;S.setBaseSize(e,_),this.renderTarget.setSize(S.width,S.height),this.blurPass.resolution.copy(S),this.luminancePass.setSize(e,_),this.mipmapBlurPass.setSize(e,_)}},{key:"initialize",value:function(e,_,S){this.blurPass.initialize(e,_,S),this.luminancePass.initialize(e,_,S),this.mipmapBlurPass.initialize(e,_,S),void 0!==S&&(this.renderTarget.texture.type=S,null!==e&&e.outputColorSpace===Bc&&(this.renderTarget.texture.colorSpace=Bc))}}])}(xA)),function(e){function ShaderPass(e){var _,S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"inputBuffer";return _classCallCheck3(this,ShaderPass),(_=_callSuper(this,ShaderPass,["ShaderPass"])).fullscreenMaterial=e,_.input=S,_}return _inherits(ShaderPass,e),_createClass3(ShaderPass,[{key:"setInput",value:function(e){this.input=e}},{key:"render",value:function(e,_,S,k,E){var T=this.fullscreenMaterial.uniforms;null!==_&&void 0!==T&&void 0!==T[this.input]&&(T[this.input].value=_.texture),e.setRenderTarget(this.renderToScreen?null:S),e.render(this.scene,this.camera)}},{key:"initialize",value:function(e,_,S){void 0!==S&&S!==El&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}}])}(eA)),LA=(D("c4",function(e){function _class3(e,_){var S,k=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return _classCallCheck3(this,_class3),(S=_callSuper(this,_class3,["RenderPass",e,_])).needsSwap=!1,S.clearPass=new oA,S.overrideMaterialManager=null===k?null:new pA(k),S.ignoreBackground=!1,S.skipShadowMapUpdate=!1,S.selection=null,S}return _inherits(_class3,e),_createClass3(_class3,[{key:"mainScene",set:function(e){this.scene=e}},{key:"mainCamera",set:function(e){this.camera=e}},{key:"renderToScreen",get:function(){return _superPropGet(_class3,"renderToScreen",this,1)},set:function(e){_superPropSet(_class3,"renderToScreen",e,this,1,1),this.clearPass.renderToScreen=e}},{key:"overrideMaterial",get:function(){var e=this.overrideMaterialManager;return null!==e?e.material:null},set:function(e){var _=this.overrideMaterialManager;null!==e?null!==_?_.setMaterial(e):this.overrideMaterialManager=new pA(e):null!==_&&(_.dispose(),this.overrideMaterialManager=null)}},{key:"getOverrideMaterial",value:function(){return this.overrideMaterial}},{key:"setOverrideMaterial",value:function(e){this.overrideMaterial=e}},{key:"clear",get:function(){return this.clearPass.enabled},set:function(e){this.clearPass.enabled=e}},{key:"getSelection",value:function(){return this.selection}},{key:"setSelection",value:function(e){this.selection=e}},{key:"isBackgroundDisabled",value:function(){return this.ignoreBackground}},{key:"setBackgroundDisabled",value:function(e){this.ignoreBackground=e}},{key:"isShadowMapDisabled",value:function(){return this.skipShadowMapUpdate}},{key:"setShadowMapDisabled",value:function(e){this.skipShadowMapUpdate=e}},{key:"getClearPass",value:function(){return this.clearPass}},{key:"render",value:function(e,_,S,k,E){var T=this.scene,M=this.camera,I=this.selection,R=M.layers.mask,O=T.background,D=e.shadowMap.autoUpdate,L=this.renderToScreen?null:_;null!==I&&M.layers.set(I.getLayer()),this.skipShadowMapUpdate&&(e.shadowMap.autoUpdate=!1),(this.ignoreBackground||null!==this.clearPass.overrideClearColor)&&(T.background=null),this.clearPass.enabled&&this.clearPass.render(e,_),e.setRenderTarget(L),null!==this.overrideMaterialManager?this.overrideMaterialManager.render(e,T,M):e.render(T,M),M.layers.mask=R,T.background=O,e.shadowMap.autoUpdate=D}}])}(eA)),2),FA=0,UA=D("c8",{LOW:0,MEDIUM:1,HIGH:2,ULTRA:3}),BA=function(e){function EdgeDetectionMaterial(){var e,_=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new $c,S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:LA;return _classCallCheck3(this,EdgeDetectionMaterial),(e=_callSuper(this,EdgeDetectionMaterial,[{name:"EdgeDetectionMaterial",defines:{THREE_REVISION:Qu.replace(/\D+/g,""),LOCAL_CONTRAST_ADAPTATION_FACTOR:"2.0",EDGE_THRESHOLD:"0.1",DEPTH_THRESHOLD:"0.01",PREDICATION_MODE:"0",PREDICATION_THRESHOLD:"0.01",PREDICATION_SCALE:"2.0",PREDICATION_STRENGTH:"1.0",DEPTH_PACKING:"0"},uniforms:{inputBuffer:new Ty(null),depthBuffer:new Ty(null),predicationBuffer:new Ty(null),texelSize:new Ty(_)},blending:0,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:"varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;\n#if EDGE_DETECTION_MODE != 0\nvarying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;\n#endif\n#if EDGE_DETECTION_MODE == 1\n#include <common>\n#endif\n#if EDGE_DETECTION_MODE == 0 || PREDICATION_MODE == 1\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nuniform highp sampler2D depthBuffer;\n#else\nuniform mediump sampler2D depthBuffer;\n#endif\nfloat readDepth(const in vec2 uv){\n#if DEPTH_PACKING == 3201\nreturn unpackRGBAToDepth(texture2D(depthBuffer,uv));\n#else\nreturn texture2D(depthBuffer,uv).r;\n#endif\n}vec3 gatherNeighbors(){float p=readDepth(vUv);float pLeft=readDepth(vUv0);float pTop=readDepth(vUv1);return vec3(p,pLeft,pTop);}\n#elif PREDICATION_MODE == 2\nuniform sampler2D predicationBuffer;vec3 gatherNeighbors(){float p=texture2D(predicationBuffer,vUv).r;float pLeft=texture2D(predicationBuffer,vUv0).r;float pTop=texture2D(predicationBuffer,vUv1).r;return vec3(p,pLeft,pTop);}\n#endif\n#if PREDICATION_MODE != 0\nvec2 calculatePredicatedThreshold(){vec3 neighbours=gatherNeighbors();vec2 delta=abs(neighbours.xx-neighbours.yz);vec2 edges=step(PREDICATION_THRESHOLD,delta);return PREDICATION_SCALE*EDGE_THRESHOLD*(1.0-PREDICATION_STRENGTH*edges);}\n#endif\n#if EDGE_DETECTION_MODE != 0\nuniform sampler2D inputBuffer;\n#endif\nvoid main(){\n#if EDGE_DETECTION_MODE == 0\nconst vec2 threshold=vec2(DEPTH_THRESHOLD);\n#elif PREDICATION_MODE != 0\nvec2 threshold=calculatePredicatedThreshold();\n#else\nconst vec2 threshold=vec2(EDGE_THRESHOLD);\n#endif\n#if EDGE_DETECTION_MODE == 0\nvec3 neighbors=gatherNeighbors();vec2 delta=abs(neighbors.xx-vec2(neighbors.y,neighbors.z));vec2 edges=step(threshold,delta);if(dot(edges,vec2(1.0))==0.0){discard;}gl_FragColor=vec4(edges,0.0,1.0);\n#elif EDGE_DETECTION_MODE == 1\nfloat l=luminance(texture2D(inputBuffer,vUv).rgb);float lLeft=luminance(texture2D(inputBuffer,vUv0).rgb);float lTop=luminance(texture2D(inputBuffer,vUv1).rgb);vec4 delta;delta.xy=abs(l-vec2(lLeft,lTop));vec2 edges=step(threshold,delta.xy);if(dot(edges,vec2(1.0))==0.0){discard;}float lRight=luminance(texture2D(inputBuffer,vUv2).rgb);float lBottom=luminance(texture2D(inputBuffer,vUv3).rgb);delta.zw=abs(l-vec2(lRight,lBottom));vec2 maxDelta=max(delta.xy,delta.zw);float lLeftLeft=luminance(texture2D(inputBuffer,vUv4).rgb);float lTopTop=luminance(texture2D(inputBuffer,vUv5).rgb);delta.zw=abs(vec2(lLeft,lTop)-vec2(lLeftLeft,lTopTop));maxDelta=max(maxDelta.xy,delta.zw);float finalDelta=max(maxDelta.x,maxDelta.y);edges.xy*=step(finalDelta,LOCAL_CONTRAST_ADAPTATION_FACTOR*delta.xy);gl_FragColor=vec4(edges,0.0,1.0);\n#elif EDGE_DETECTION_MODE == 2\nvec4 delta;vec3 c=texture2D(inputBuffer,vUv).rgb;vec3 cLeft=texture2D(inputBuffer,vUv0).rgb;vec3 t=abs(c-cLeft);delta.x=max(max(t.r,t.g),t.b);vec3 cTop=texture2D(inputBuffer,vUv1).rgb;t=abs(c-cTop);delta.y=max(max(t.r,t.g),t.b);vec2 edges=step(threshold,delta.xy);if(dot(edges,vec2(1.0))==0.0){discard;}vec3 cRight=texture2D(inputBuffer,vUv2).rgb;t=abs(c-cRight);delta.z=max(max(t.r,t.g),t.b);vec3 cBottom=texture2D(inputBuffer,vUv3).rgb;t=abs(c-cBottom);delta.w=max(max(t.r,t.g),t.b);vec2 maxDelta=max(delta.xy,delta.zw);vec3 cLeftLeft=texture2D(inputBuffer,vUv4).rgb;t=abs(c-cLeftLeft);delta.z=max(max(t.r,t.g),t.b);vec3 cTopTop=texture2D(inputBuffer,vUv5).rgb;t=abs(c-cTopTop);delta.w=max(max(t.r,t.g),t.b);maxDelta=max(maxDelta.xy,delta.zw);float finalDelta=max(maxDelta.x,maxDelta.y);edges*=step(finalDelta,LOCAL_CONTRAST_ADAPTATION_FACTOR*delta.xy);gl_FragColor=vec4(edges,0.0,1.0);\n#endif\n}",vertexShader:"uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;\n#if EDGE_DETECTION_MODE != 0\nvarying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;\n#endif\nvoid main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,0.0);vUv1=vUv+texelSize*vec2(0.0,-1.0);\n#if EDGE_DETECTION_MODE != 0\nvUv2=vUv+texelSize*vec2(1.0,0.0);vUv3=vUv+texelSize*vec2(0.0,1.0);vUv4=vUv+texelSize*vec2(-2.0,0.0);vUv5=vUv+texelSize*vec2(0.0,-2.0);\n#endif\ngl_Position=vec4(position.xy,1.0,1.0);}"}])).edgeDetectionMode=S,e}return _inherits(EdgeDetectionMaterial,e),_createClass3(EdgeDetectionMaterial,[{key:"depthBuffer",set:function(e){this.uniforms.depthBuffer.value=e}},{key:"depthPacking",set:function(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}},{key:"setDepthBuffer",value:function(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Fc;this.depthBuffer=e,this.depthPacking=_}},{key:"edgeDetectionMode",get:function(){return Number(this.defines.EDGE_DETECTION_MODE)},set:function(e){this.defines.EDGE_DETECTION_MODE=e.toFixed(0),this.needsUpdate=!0}},{key:"getEdgeDetectionMode",value:function(){return this.edgeDetectionMode}},{key:"setEdgeDetectionMode",value:function(e){this.edgeDetectionMode=e}},{key:"localContrastAdaptationFactor",get:function(){return Number(this.defines.LOCAL_CONTRAST_ADAPTATION_FACTOR)},set:function(e){this.defines.LOCAL_CONTRAST_ADAPTATION_FACTOR=e.toFixed("6"),this.needsUpdate=!0}},{key:"getLocalContrastAdaptationFactor",value:function(){return this.localContrastAdaptationFactor}},{key:"setLocalContrastAdaptationFactor",value:function(e){this.localContrastAdaptationFactor=e}},{key:"edgeDetectionThreshold",get:function(){return Number(this.defines.EDGE_THRESHOLD)},set:function(e){this.defines.EDGE_THRESHOLD=e.toFixed("6"),this.defines.DEPTH_THRESHOLD=(.1*e).toFixed("6"),this.needsUpdate=!0}},{key:"getEdgeDetectionThreshold",value:function(){return this.edgeDetectionThreshold}},{key:"setEdgeDetectionThreshold",value:function(e){this.edgeDetectionThreshold=e}},{key:"predicationMode",get:function(){return Number(this.defines.PREDICATION_MODE)},set:function(e){this.defines.PREDICATION_MODE=e.toFixed(0),this.needsUpdate=!0}},{key:"getPredicationMode",value:function(){return this.predicationMode}},{key:"setPredicationMode",value:function(e){this.predicationMode=e}},{key:"predicationBuffer",set:function(e){this.uniforms.predicationBuffer.value=e}},{key:"setPredicationBuffer",value:function(e){this.uniforms.predicationBuffer.value=e}},{key:"predicationThreshold",get:function(){return Number(this.defines.PREDICATION_THRESHOLD)},set:function(e){this.defines.PREDICATION_THRESHOLD=e.toFixed("6"),this.needsUpdate=!0}},{key:"getPredicationThreshold",value:function(){return this.predicationThreshold}},{key:"setPredicationThreshold",value:function(e){this.predicationThreshold=e}},{key:"predicationScale",get:function(){return Number(this.defines.PREDICATION_SCALE)},set:function(e){this.defines.PREDICATION_SCALE=e.toFixed("6"),this.needsUpdate=!0}},{key:"getPredicationScale",value:function(){return this.predicationScale}},{key:"setPredicationScale",value:function(e){this.predicationScale=e}},{key:"predicationStrength",get:function(){return Number(this.defines.PREDICATION_STRENGTH)},set:function(e){this.defines.PREDICATION_STRENGTH=e.toFixed("6"),this.needsUpdate=!0}},{key:"getPredicationStrength",value:function(){return this.predicationStrength}},{key:"setPredicationStrength",value:function(e){this.predicationStrength=e}},{key:"setSize",value:function(e,_){this.uniforms.texelSize.value.set(1/e,1/_)}}])}(Rf),NA=function(e){function SMAAWeightsMaterial(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new $c,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new $c;return _classCallCheck3(this,SMAAWeightsMaterial),_callSuper(this,SMAAWeightsMaterial,[{name:"SMAAWeightsMaterial",defines:{MAX_SEARCH_STEPS_INT:"16",MAX_SEARCH_STEPS_FLOAT:"16.0",MAX_SEARCH_STEPS_DIAG_INT:"8",MAX_SEARCH_STEPS_DIAG_FLOAT:"8.0",CORNER_ROUNDING:"25",CORNER_ROUNDING_NORM:"0.25",AREATEX_MAX_DISTANCE:"16.0",AREATEX_MAX_DISTANCE_DIAG:"20.0",AREATEX_PIXEL_SIZE:"(1.0 / vec2(160.0, 560.0))",AREATEX_SUBTEX_SIZE:"(1.0 / 7.0)",SEARCHTEX_SIZE:"vec2(66.0, 33.0)",SEARCHTEX_PACKED_SIZE:"vec2(64.0, 16.0)"},uniforms:{inputBuffer:new Ty(null),searchTexture:new Ty(null),areaTexture:new Ty(null),resolution:new Ty(_),texelSize:new Ty(e)},blending:0,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:"#define sampleLevelZeroOffset(t, coord, offset) texture2D(t, coord + offset * texelSize)\n#if __VERSION__ < 300\n#define round(v) floor(v + 0.5)\n#endif\n#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\nuniform lowp sampler2D areaTexture;uniform lowp sampler2D searchTexture;uniform vec2 texelSize;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixCoord;void movec(const in bvec2 c,inout vec2 variable,const in vec2 value){if(c.x){variable.x=value.x;}if(c.y){variable.y=value.y;}}void movec(const in bvec4 c,inout vec4 variable,const in vec4 value){movec(c.xy,variable.xy,value.xy);movec(c.zw,variable.zw,value.zw);}vec2 decodeDiagBilinearAccess(in vec2 e){e.r=e.r*abs(5.0*e.r-5.0*0.75);return round(e);}vec4 decodeDiagBilinearAccess(in vec4 e){e.rb=e.rb*abs(5.0*e.rb-5.0*0.75);return round(e);}vec2 searchDiag1(const in vec2 texCoord,const in vec2 dir,out vec2 e){vec4 coord=vec4(texCoord,-1.0,1.0);vec3 t=vec3(texelSize,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(coord.z<float(MAX_SEARCH_STEPS_DIAG_INT-1)&&coord.w>0.9)){break;}coord.xyz=t*vec3(dir,1.0)+coord.xyz;e=texture2D(inputBuffer,coord.xy).rg;coord.w=dot(e,vec2(0.5));}return coord.zw;}vec2 searchDiag2(const in vec2 texCoord,const in vec2 dir,out vec2 e){vec4 coord=vec4(texCoord,-1.0,1.0);coord.x+=0.25*texelSize.x;vec3 t=vec3(texelSize,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(coord.z<float(MAX_SEARCH_STEPS_DIAG_INT-1)&&coord.w>0.9)){break;}coord.xyz=t*vec3(dir,1.0)+coord.xyz;e=texture2D(inputBuffer,coord.xy).rg;e=decodeDiagBilinearAccess(e);coord.w=dot(e,vec2(0.5));}return coord.zw;}vec2 areaDiag(const in vec2 dist,const in vec2 e,const in float offset){vec2 texCoord=vec2(AREATEX_MAX_DISTANCE_DIAG,AREATEX_MAX_DISTANCE_DIAG)*e+dist;texCoord=AREATEX_PIXEL_SIZE*texCoord+0.5*AREATEX_PIXEL_SIZE;texCoord.x+=0.5;texCoord.y+=AREATEX_SUBTEX_SIZE*offset;return texture2D(areaTexture,texCoord).rg;}vec2 calculateDiagWeights(const in vec2 texCoord,const in vec2 e,const in vec4 subsampleIndices){vec2 weights=vec2(0.0);vec4 d;vec2 end;if(e.r>0.0){d.xz=searchDiag1(texCoord,vec2(-1.0,1.0),end);d.x+=float(end.y>0.9);}else{d.xz=vec2(0.0);}d.yw=searchDiag1(texCoord,vec2(1.0,-1.0),end);if(d.x+d.y>2.0){vec4 coords=vec4(-d.x+0.25,d.x,d.y,-d.y-0.25)*texelSize.xyxy+texCoord.xyxy;vec4 c;c.xy=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(-1,0)).rg;c.zw=sampleLevelZeroOffset(inputBuffer,coords.zw,vec2(1,0)).rg;c.yxwz=decodeDiagBilinearAccess(c.xyzw);vec2 cc=vec2(2.0)*c.xz+c.yw;movec(bvec2(step(0.9,d.zw)),cc,vec2(0.0));weights+=areaDiag(d.xy,cc,subsampleIndices.z);}d.xz=searchDiag2(texCoord,vec2(-1.0,-1.0),end);if(sampleLevelZeroOffset(inputBuffer,texCoord,vec2(1,0)).r>0.0){d.yw=searchDiag2(texCoord,vec2(1.0),end);d.y+=float(end.y>0.9);}else{d.yw=vec2(0.0);}if(d.x+d.y>2.0){vec4 coords=vec4(-d.x,-d.x,d.y,d.y)*texelSize.xyxy+texCoord.xyxy;vec4 c;c.x=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(-1,0)).g;c.y=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(0,-1)).r;c.zw=sampleLevelZeroOffset(inputBuffer,coords.zw,vec2(1,0)).gr;vec2 cc=vec2(2.0)*c.xz+c.yw;movec(bvec2(step(0.9,d.zw)),cc,vec2(0.0));weights+=areaDiag(d.xy,cc,subsampleIndices.w).gr;}return weights;}float searchLength(const in vec2 e,const in float offset){vec2 scale=SEARCHTEX_SIZE*vec2(0.5,-1.0);vec2 bias=SEARCHTEX_SIZE*vec2(offset,1.0);scale+=vec2(-1.0,1.0);bias+=vec2(0.5,-0.5);scale*=1.0/SEARCHTEX_PACKED_SIZE;bias*=1.0/SEARCHTEX_PACKED_SIZE;return texture2D(searchTexture,scale*e+bias).r;}float searchXLeft(in vec2 texCoord,const in float end){vec2 e=vec2(0.0,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.x>end&&e.g>0.8281&&e.r==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(-2.0,0.0)*texelSize+texCoord;}float offset=-(255.0/127.0)*searchLength(e,0.0)+3.25;return texelSize.x*offset+texCoord.x;}float searchXRight(vec2 texCoord,const in float end){vec2 e=vec2(0.0,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.x<end&&e.g>0.8281&&e.r==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(2.0,0.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e,0.5)+3.25;return-texelSize.x*offset+texCoord.x;}float searchYUp(vec2 texCoord,const in float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.y>end&&e.r>0.8281&&e.g==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=-vec2(0.0,2.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e.gr,0.0)+3.25;return texelSize.y*offset+texCoord.y;}float searchYDown(vec2 texCoord,const in float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;i++){if(!(texCoord.y<end&&e.r>0.8281&&e.g==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(0.0,2.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e.gr,0.5)+3.25;return-texelSize.y*offset+texCoord.y;}vec2 area(const in vec2 dist,const in float e1,const in float e2,const in float offset){vec2 texCoord=vec2(AREATEX_MAX_DISTANCE)*round(4.0*vec2(e1,e2))+dist;texCoord=AREATEX_PIXEL_SIZE*texCoord+0.5*AREATEX_PIXEL_SIZE;texCoord.y=AREATEX_SUBTEX_SIZE*offset+texCoord.y;return texture2D(areaTexture,texCoord).rg;}void detectHorizontalCornerPattern(inout vec2 weights,const in vec4 texCoord,const in vec2 d){\n#if !defined(DISABLE_CORNER_DETECTION)\nvec2 leftRight=step(d.xy,d.yx);vec2 rounding=(1.0-CORNER_ROUNDING_NORM)*leftRight;rounding/=leftRight.x+leftRight.y;vec2 factor=vec2(1.0);factor.x-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(0,1)).r;factor.x-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,1)).r;factor.y-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(0,-2)).r;factor.y-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,-2)).r;weights*=clamp(factor,0.0,1.0);\n#endif\n}void detectVerticalCornerPattern(inout vec2 weights,const in vec4 texCoord,const in vec2 d){\n#if !defined(DISABLE_CORNER_DETECTION)\nvec2 leftRight=step(d.xy,d.yx);vec2 rounding=(1.0-CORNER_ROUNDING_NORM)*leftRight;rounding/=leftRight.x+leftRight.y;vec2 factor=vec2(1.0);factor.x-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(1,0)).g;factor.x-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,1)).g;factor.y-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(-2,0)).g;factor.y-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(-2,1)).g;weights*=clamp(factor,0.0,1.0);\n#endif\n}void main(){vec4 weights=vec4(0.0);vec4 subsampleIndices=vec4(0.0);vec2 e=texture2D(inputBuffer,vUv).rg;if(e.g>0.0){\n#if !defined(DISABLE_DIAG_DETECTION)\nweights.rg=calculateDiagWeights(vUv,e,subsampleIndices);if(weights.r==-weights.g){\n#endif\nvec2 d;vec3 coords;coords.x=searchXLeft(vOffset[0].xy,vOffset[2].x);coords.y=vOffset[1].y;d.x=coords.x;float e1=texture2D(inputBuffer,coords.xy).r;coords.z=searchXRight(vOffset[0].zw,vOffset[2].y);d.y=coords.z;d=round(resolution.xx*d+-vPixCoord.xx);vec2 sqrtD=sqrt(abs(d));float e2=sampleLevelZeroOffset(inputBuffer,coords.zy,vec2(1,0)).r;weights.rg=area(sqrtD,e1,e2,subsampleIndices.y);coords.y=vUv.y;detectHorizontalCornerPattern(weights.rg,coords.xyzy,d);\n#if !defined(DISABLE_DIAG_DETECTION)\n}else{e.r=0.0;}\n#endif\n}if(e.r>0.0){vec2 d;vec3 coords;coords.y=searchYUp(vOffset[1].xy,vOffset[2].z);coords.x=vOffset[0].x;d.x=coords.y;float e1=texture2D(inputBuffer,coords.xy).g;coords.z=searchYDown(vOffset[1].zw,vOffset[2].w);d.y=coords.z;d=round(resolution.yy*d-vPixCoord.yy);vec2 sqrtD=sqrt(abs(d));float e2=sampleLevelZeroOffset(inputBuffer,coords.xz,vec2(0,1)).g;weights.ba=area(sqrtD,e1,e2,subsampleIndices.x);coords.x=vUv.x;detectVerticalCornerPattern(weights.ba,coords.xyxz,d);}gl_FragColor=weights;}",vertexShader:"uniform vec2 texelSize;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixCoord;void main(){vUv=position.xy*0.5+0.5;vPixCoord=vUv*resolution;vOffset[0]=vUv.xyxy+texelSize.xyxy*vec4(-0.25,-0.125,1.25,-0.125);vOffset[1]=vUv.xyxy+texelSize.xyxy*vec4(-0.125,-0.25,-0.125,1.25);vOffset[2]=vec4(vOffset[0].xz,vOffset[1].yw)+vec4(-2.0,2.0,-2.0,2.0)*texelSize.xxyy*MAX_SEARCH_STEPS_FLOAT;gl_Position=vec4(position.xy,1.0,1.0);}"}])}return _inherits(SMAAWeightsMaterial,e),_createClass3(SMAAWeightsMaterial,[{key:"inputBuffer",set:function(e){this.uniforms.inputBuffer.value=e}},{key:"setInputBuffer",value:function(e){this.uniforms.inputBuffer.value=e}},{key:"searchTexture",get:function(){return this.uniforms.searchTexture.value},set:function(e){this.uniforms.searchTexture.value=e}},{key:"areaTexture",get:function(){return this.uniforms.areaTexture.value},set:function(e){this.uniforms.areaTexture.value=e}},{key:"setLookupTextures",value:function(e,_){this.searchTexture=e,this.areaTexture=_}},{key:"orthogonalSearchSteps",get:function(){return Number(this.defines.MAX_SEARCH_STEPS_INT)},set:function(e){var _=Math.min(Math.max(e,0),112);this.defines.MAX_SEARCH_STEPS_INT=_.toFixed("0"),this.defines.MAX_SEARCH_STEPS_FLOAT=_.toFixed("1"),this.needsUpdate=!0}},{key:"setOrthogonalSearchSteps",value:function(e){this.orthogonalSearchSteps=e}},{key:"diagonalSearchSteps",get:function(){return Number(this.defines.MAX_SEARCH_STEPS_DIAG_INT)},set:function(e){var _=Math.min(Math.max(e,0),20);this.defines.MAX_SEARCH_STEPS_DIAG_INT=_.toFixed("0"),this.defines.MAX_SEARCH_STEPS_DIAG_FLOAT=_.toFixed("1"),this.needsUpdate=!0}},{key:"setDiagonalSearchSteps",value:function(e){this.diagonalSearchSteps=e}},{key:"diagonalDetection",get:function(){return void 0===this.defines.DISABLE_DIAG_DETECTION},set:function(e){e?delete this.defines.DISABLE_DIAG_DETECTION:this.defines.DISABLE_DIAG_DETECTION="1",this.needsUpdate=!0}},{key:"isDiagonalDetectionEnabled",value:function(){return this.diagonalDetection}},{key:"setDiagonalDetectionEnabled",value:function(e){this.diagonalDetection=e}},{key:"cornerRounding",get:function(){return Number(this.defines.CORNER_ROUNDING)},set:function(e){var _=Math.min(Math.max(e,0),100);this.defines.CORNER_ROUNDING=_.toFixed("4"),this.defines.CORNER_ROUNDING_NORM=(_/100).toFixed("4"),this.needsUpdate=!0}},{key:"setCornerRounding",value:function(e){this.cornerRounding=e}},{key:"cornerDetection",get:function(){return void 0===this.defines.DISABLE_CORNER_DETECTION},set:function(e){e?delete this.defines.DISABLE_CORNER_DETECTION:this.defines.DISABLE_CORNER_DETECTION="1",this.needsUpdate=!0}},{key:"isCornerRoundingEnabled",value:function(){return this.cornerDetection}},{key:"setCornerRoundingEnabled",value:function(e){this.cornerDetection=e}},{key:"setSize",value:function(e,_){var S=this.uniforms;S.texelSize.value.set(1/e,1/_),S.resolution.value.set(e,_)}}])}(Rf),zA="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAQCAYAAACm53kpAAAAeElEQVRYR+2XSwqAMAxEJ168ePEqwRSKhIIiuHjJqiU0gWE+1CQdApcVAMUAuARaMGCX1MIL/Ow13++9lW2s3mW9MWvsnWc/2fvGygwPAN4E8QzAA4CXAB6AHjG4JTHYI1ey3pcx6FHnEfhLDOIBKAmUBK6/ANUDTlROXAHd9EC1AAAAAElFTkSuQmCC",GA="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAAIwCAYAAAABNmBHAAAgAElEQVR4Xuy9CbhlV1ktOvbpq09DkiIkUBI6kxASIH0DlAQiIK1wRfSJTx+i4JX7vKIigs8HXpXvqVcvrcC9agQ7IDTSSWgqCQQliDRBJKkkhDSkqVPNqVOnP+8b//rH3P+eZ+199tlznVTlvVrft7+1T7OaueZY42/m37QALKNk2wHg1pITlB17mC+Pp11W3X/LHyT32vhg48/5SOv+PnwpsHA70JoGlueB1iKApeqzvOzn44GatTB76Xzhd7suBR7+WWADgDEAwwCG/L54b/poDLrHuvvm70Z2Avhsc+PVcxscBU8F8C8ADg5+ipIjD/PlGwfgju8B924E5seARUfLsiNmqQW0IjL8+7L2NYD/7COBzfcCm+aB8SVgdAkYIRCXKyDax4EdAanL5PuNPllNvXDlAHwFgP8AcC2AhRIoDXbsYb48dl5WkVFTE3LGDcC9m4CZCWBuFFgeAZaGAYJQQCRqDHT+McJrVb8zwATUXH02MHYfMHEIGFsAxgjApQqACYQORjtd/B7Axt/z79sC0+cMPgjjlwPwVwHcA+DfAHzTxcVgWBroqMN8+cYBeM71wH0TwKExYHYUWCIAHYRLTlkCYgcIBcAgU/n3qy8GRu4HRgnAOWBkERhddPAJhGJDBxkvw7cqimr+zFM/ZLnZF64cgL8BYD+AWwB8x/dlWuWagHiYL984AJ/0RWBy1AE4AizyM1yxYAcTigW55xMbAkxEiwEdkJ/ZCQxPAiOHgBECcKEC4TBZcKkSv+mTieNcNPNC26mLNsj45QD8LQDTAO4GcJt/7iw2bfoG4WG+vAGwm9ExiEg69zpg/wgwPQLMjgALzn4E4aIzoJjQ9g4024uygkj+pyuAoX0VAIfngOH5NgCHMhAm8Sv2y3XDZeBhNIp8OzJE8OsBzAKYBHAXgDt8/4O+MVT0j4f58o0D8Pxrgf3DwMwIMEPQEYRkNwfgsuuDZLskip0No0gWMD/9HGDoADAkAC4Aw/wsAgZAgs2Z0ABI0GU6IVmKv+f28KDnHxkA/G0A8y6G73N9kOCjXnh/Ebb6OvgwX75xAF5wLTA1VIHPADgMLDj4yIA5AAm6aCUnv4oz46eeDwxNAUMzwJAz4BABSNDFTwSfg7DDKHE23MG5PqIY8A1u/dINs9dBdy8AgnGPM2NfUBrsnw7z5RsH4IXXAAcJviFgluAbygBINnSLWOAjGxJ4pgOKDV0v/OSLKp8iGXBovhLBBOCQM2ACoTOhnYrAdItYbCij5JFzRyIAqRccAnDAQUjg6UNQ7hsMXP0cRQAexss3DsCLCECCLwCQzMcPwUi2MwAScAKbfnY/YRLFQ8DHX+IAJAMSfDkAF13kLvleIjhjQQHxUVS3jjgGpKeeNzYVQEjgUS8k+PghONdhIwAP4+XXBYCHKIJbwJyDTgaIAdCBJx3Q2M8tYAHP9m4df/ylQOsQ0JqtRLCx30K1wtLBggScQOgsKBGcWHAJeOwRC0BSM1mQIKRbhh+Bj98JQP6t4U0APEyXXxcAEnxkQAFwoVUxID9kvQg+c1C7vidRbIDkc24B//hTQGumDcCWA5DgMxASdNIFBUI5pCML8v8API5zfEQx4BudgqiczviSnJhQwCP4BMCGl+wO8+U7AJi/W4O4YS6+pmK/2ciADsAOBhTIIiAJnPB7AvNjP+0AnANaYkAHX2JBAc+tYaJXOqBZv24Vc386XW5dtkHGW+4HFAJonpOe+YYQZAShgKjv3PNvPQaxVoI8zJdfFwASfPzMUwS3Kt1v0UFIlos6oDFdAGFcliMAP/ryAEAGNwQRnDOgLbdlIEwrIs6AZ/QgkMMHQF6ZAKQcJAsSYPwIeAIk9wJgoPK1gi7+PwF4GC/fOAAvIQPSs0URTPBJ/Pp3GSEGRHfBCIQ0xowBtUbcAj7ys5X4Jfu1HIAGQrIgQRXEsAFQIORDFhiDY/rMHmrU4QUgR08AkgUjCAW6CD6CkwBsAIQC4GG6fPMA3OXiNzCg2I9gNCMksmAAoemDzoimFwL48M85AKkiuQVMAAp8CYRRDAt8GQiJ67N6GJODAXAHlsGguscA2AJg1IPGYmxOpBxFWkRN9LsATgIwXnNs/v/5z/9XCf8BO3YAtxbc/46/KDt+5+ea1Yku2VUxHz/z0v24FwMGK1gWsK2OUUxHHdCBeRUB6OxHABr4ZICIBd0QWSF+XRdMTAjgCdTrG9cBNwE4F8CpDkICyYLGsuhFt6zs+gISwUen8zEAjgMw4cfx2H6O/90yAFo84Cbg4ID3/9TfLTt+5+ebnRABkODjx0SwPi5ec/FrYpmqSAxM8Dn60CsqAFI6GfhqAMiDE/gokmvEr0C4PgDkBQm40wE8zMFEUDKEVoxIMLl/KS73mE7H9d+vcKHQQcjwW0Yu9nP8m8sAmOIBuWY6wP2/4s0ezjjg8TuvaR6ABJ70vxUApGrm7EbGE+i472BAB+WHfqHS/eoAaEwY2E9+wLSXTqhI7CXgnB6LCoOJ4BiST+hTnG0HcCwAglCx3ARoZEVFXnBPp/O/A/hXACc7CPs9/i1lAOyIB+RDX+P9/+pbQjjjAMfv/PL6AFDs1wFAgs/9fgKfgdE/ZEpuiQlbwAde6QAMBgiRmsSwA9BY0JfjovGRDBMH4TlcXGhcBOc6HkF0gjPhZgchxTLZMAci/04W/B6Ab3t09EPXcPyflgFwRTwgJ2MN9/8bf5qFM67x+B/aW4XQz42FeL0YrRyikztUFw0704mf9kXgxhOAqc3AAsPyRxxQCs/PdXOFY0W1KHy3QIUGtx+6vdnx1vsB+dsTncm2AogglFgVEAlUWrOMB2RyEmMCGQ/Y7/HvKns6tfGAnJQ+r/9b76oJZ1zD8WdyQjYBh8aBhVEHjELouQ8ukQ7VRSCJAALwkr+sALhnGzDD3JAJYJHg9uhoi4bx8ytkWUtvHT/7+Zc4dw1uZ3612fH2dkQf7yxIEEockwkJQn4IQoq8unhAhmPRKKFx0uv4K8ueTs94wD7u//VX9ghn7OP4c+4G7h8HpseB+dF2AKlFLwuAIZ8jD6NPrOhAffmfA9/ZBuzZCkyRWSeqBCWyoYGQ5yQrBpDbum/ME1HoPo0XEkSD2zlfbna8q6+EUJcTCxKEtHL5EQjP6BEPyIgYAZBvYt3xHyx7OqvGA65y/7/9wVXCGVc5/sl7qxD66dEqiYgRzAqhN1A4CBNAAlDyAFI+iZ9/N3DLJuC+jcDUBmCWyUnOrmTYCMIOkNclLg0B8/RsNLg9+UvNjnd1APLmmQpFHyEBROuWACQT8nN+H/GAvY7/VNnT6SsesMf13/CpahGnZzhjj+PPmwX2MYdDIfQexWyBAwEUOQDrRDN/98p3A7dvAO6fAA5sqHJDBEAyoUVGkwEd6HR12XU4kwzfl6fCXTZzjy57vvnR513X7Hj7AyDvggAUi9EyFgiZqNxPQF6345nOWbD1HQ/Y5fpvuLa/2+82/vNHgAPDFQDnhoF5j2C2qBWCI8bw1eRw5CL5l94L3DEOTI4DB8Y9OWmsEu/zBJ3rgsaybqBob/7A4C7jtWcooRrczr+u2fH2D0AOQgAUCxKEP7aGgLy64+m6KdjWFA9Yc/03/Osa4glrjr+AupqHz1sEs0cxG0BC9HIePLoit9eNkVf9L+DuUWByDJgaq4ybGYLPAWgiXmLedUE7dwC7saL7CqfPKXi4NYdaykCD410bAHlDEsNiwZ9wAPYbkJcfz6T2gm3N8YDZ9d/wHxUA+739fPwXPrSKYGb+BuP3jAFDElFH9HIWwbzCIGkBr/or4J4RYO8oMOW6ZVcAuvi1Cgoha04BCwT5gfMKHm7NoRde2+x41w5A3hQZkADk5+cGiAeMx3+/7AENFA8Yrv/G71cAXFM4Yzj+otOAaQLQA0gZxaIIZtMDFTigKJV8H9Iq6aZ59ZXAvSPAvpEKgBTtBODcSCWCZeRYtpzrmLyeGNCAyFl1v+Hei8qeb370Rdc2O97BAMi7EgB/2QG41nhAHU9LuWAbOB7Qr//GPRUA13r7Gv9FZwIMoVcEswEwfDoimEP0shKKtIphaZQAXv1+YM+wA3DEdcvRKkGJADQQEsQuhi1Tjt95vBsh5nx2IO59SsHDrTmUOStNjndwAAqEry0IyCMICkOyiuIBNwBvPFQQT7gBuPjc9oRYAIHyOEL4vIFEYVNaOou5vCGE/tV/A0wOVcnpzI47NOri3QFIBpSeaSDUdYLOSWvYImSGgftpJDa4MWJbAGxivGUA5MAOc0Be6eVLj7/4Mk+hzCOYPYpZDBiNkLh+G/M3yFyv/ltgL3W3YQfgcFUhgRY2PwY+Z7/EhAR1SFyXCOb57r28QfQBsJQBMn5D4y0HYLPje9Cd7RIC0PM3EiMofF4gVCBp1P840ix/gyz56r+vAMjk9Gl375iB4+CzveuZdLkkEPJ8ZEfX/6R73vOjzT5Si9hucLxHAVg4PwJgRwh9CKOXK8YA4ZEqKZXSQWh5P+5AftXfA/uGKvYjCKn72cctbFrZNECka5L5CPwIPtMH3TVz17MLB5gdLgA2Nd6jACycHwLQxFEUSR5ASvARDB0h9AQb9bXIgCGk6lUfAPYTgEPAITKgg1BObk58srTJgG58WMkWMaAbQQT1nc8rHGANAJsc71EAFs4PAagQestgC1lsBJ4BMCSOK6dDUcwqqaFiQr/0QeAAAdjy+jBiQQeeMSBZT3nCPUDIa9z+/MIB1gCwyfEeBWDh/BCAeQSzgkjFfGLBBD5nxQ4DxN0wv3hVxX5TBGDwL5obxvVA5YqYL5BeMLd66YYxJpRB0gK+96LCAdYAsMnxHgVg4fwIgMrhUPKQ2C+Bz0PmBTqBMQehAbDlIjj4F80KJguSVZ0FuXpjoCOgXawLjALhbT9eOMAuAGxqvEcBWDg/l1IE05Ed0ygZnyHdz0VwCqEPIfNyx0QQvvLDFQCp+8nfZk5und8tXwIgWcHSNX0N2CJmnAl3v6RwgNnhl17T7HiPArBwfghAS7mV/hey2JS9FvM3BLpUUi1YwDRMXvkRYJoAlAh2l0dcZ04s6JUTDIjyBcrl4yDc/dLCAdYAsMnxHgVg4fxwKVwJgGEJNmWtxpQMpX9on2eRhVA+O56AjMfnP+e3Xvf3NwG4xIPTleiY55bpGh6UbafNU0l0z0p+5Jh5HqYJ6b51nP6XP8cx12XNHQVgIQB/bFPVg2OC7Q+WgVFWng/FvtWLI06uWh5oguKEcXVS/9sEAF//VGD7t4ETDgJbF4CNi8CGZWBs2fPL/H6Vwp2KEtVk4fJ+v/EIYPN9wKa5qu+IncfPwXHVZe/aOL3EbwS7xv8A1rQvnO0j8PArTgTGZ4BxFv9mIxhOCGsv+0OPYDRghcLfkWkEuq0+G00x4OtfDGz+d2DbHmDLjL8si8AYP/7CGIAiEEMTG92zXqSbH+d9R2aA0XnvO+JjthiIrOVDHHPOkBrzUQAWAPsZp3oPDpa/Xag6EVkLBK+5rAnJC3/nYk/APD704WiEAV8OTHwX2LQH2DgFbJgFNrBhjd8r79deGoEwsllgNBOzy8CdjweG9wBj08AIAci2D6HafmyAk4/Z7SJ72hGYRwFYAMDLTwOGp4FRFgD3HhzqRGQiyeurqOdG6r0Rm8IEZjzRlkiqCWoEgK8Axm4BJu4HJhyAbFhDxmbDGnZO4j0SgLGDkpibgEq66TJw/1nA0F5gdLpq+zDqFfd5LMeWqu5HNST0uJOIllg+qgMWgI+HPv0xwLA3gWHpW2sC441gCECbmKziaGrnUdMO4aHeh6MxAP4SMHI7ML4HGD8AjHvHJGNAgpDgY/ck3stipRemvVhc+uASMPUEYGh/9dIRgGx8Y+MNbR/00uVtH0wEx94j/v0oAxaA8Ed+GBieAYZZg5kADC0QWGOFzGJlcGPzl1BxNLXD8sk4xftwNAbA/wwM3wGMUmxOOQBnHXzetIYvibonmSiuYTNjriVg7glAiwBk0fNZH6+PmX9P6kfNmCXGpftJ7TgKwBIAnln14BAAYxMYm5C6RjCyCoOyr0qkD/c+HI0B8DXA8N3AyCQwesD1VQKH7EcASm1Q+y4CkN9pUKiVF5nLvy+fBbTUd8QBaH1HvNBROiZvfsNnrF4kcvPwpdsBLBeU18Nf7AB23Dp4ecHC8oBgUlJJecLS+7+WOpE3gbE+HKw+yoevCYkMGKqPJrdEKARutaFYRs1fiEZ0wP8CDN8LDO8FRqYq3W10pgKgfYLaYCzootgA6KXaTA90y374TKB1sBozy77xHFZ536utRgAmEaw6g5kUSFZwSXnA330qsOlfgHMPDlZesLA8IOjoLypPWHj/11EnCiVwkz7kAExtsGraYUWdSDX5TmsagL8KDBGA7Bd30JsW0oWivnEOQNP7yGTSBR101AlZSUtGyfgZDkCWY1HnJdcBVe6325hTvelg2CQjZNDygG/2An0j1wKnL6y9vGBheUC8prQ8YeH9X39OVQSc7Mc6fCaKvAeHdCIVf4yMYCynTpX+nb97NJmlSQb8r8DQHm9YOFUZTKOzoXGhs6AxF0HIexcLBvWBuiHN8s2ne98R3qc6L4Vyb2oBVjfm9MIFHbjDCh6kPOBbQoG+oW8CO5bWVl6wsDwgfr20PGHh/X/1iaEIuDcCTIW/1Q4rFv8OnYiW3c+W2iKwUjKbyjQNwL1uuR6sAEgDgq1brXOmV81PxhNB6DUDBSYzQJwFtz623XcktX1Q1VWKaTF/zZhVazBVYA1tX5MazsGvobwe/jQr0Ne6BTh5uf/ygoXlAfG60vKEhff/rSe1i4DnTWDUACY1guFTDqLYdCBvf6DJYSMYATBfOx1kLfj1v1axH10nQ3Sd0GUkBnTfpemtBJgseIKQAHLQcVxa2TnuMW0Aqui5es8xBIegVdVVE8VhzHnLh65WMB9An+X18K6aAn2tO4ETl6vqbKuVFywsDwhevqg8YeH93/Rk70JE90nowxZbIJjvS3WYNSGUwGHJTpPxwwcbBuBrgRYBeKACn7VtpdUu/c0NJxO9BIxcKu4TTODzbkonPLoaL0vyUQRb2y8HsL1ckfWzMeuFi40Qezqi+yiPhyt7FOjr6/gCFwgP7Xb5vssTFt7/nQRg6MGRWmDRoeyTlpgw68GRTwgZgo1gGmXAX6/8dtaylSKY/koyID9BhzML3q1gAos2AcOrZYSoq/pJp1VtODRm9Z3LS/7WjVkvXOzEtOpKyGrlAT+4SoG+VY8vBGCvy/dVnrDw/vee65NBJiAjBIVcAJQjOm+DkCZEeiGAMw6sAwDZsJrAdhFM9rPGhd4904Co5oVuCZPV6kD40Ec6+9W8dBTBsfdc3nkpvnB82fp2RPcs79dHgb51LA9ofsDV6vut5/3PnxcAmLVBiDqgevDaJLkYrpuQxzcNwN8AWgIgRbB8loEBzXDwl4cGiDGft58SCOWGedgjvOJ+bPvgRkiuA+ZjzhnQQOiFNVbloa7l/fos0LdO5QENgEXlCfs8Qbf7HyMA3QVjYihYhLENgjX9y/qwxQmRU/asfd0ZcLU2CHVGyusJQLKfVi98CS12T5f7iECkHpsMkAhCF8+nshWH2I/jXsOYO144GV/9ApAIrS3vt4YCfetQHtAA2G+/4PW4/2PPbzMgmUMi2NoeSCRxIt2/FvuxWURIWCXg357gfTjEDNIHnTRXRCpH5ugKwGl3HpMBXQc0v6WLYVm/5limj04rG762K2uYY9jBkr9+rI03NL5ZbczS/dJ+LQyoga4o77fGAn0NlwdMAOy3vl/T938KAcj121z8Bn+Y9eWQJRz8Y6kNagDh2ey5EvxjxQD8TWdAuneCCO4An1vw5vdzQMmdktwq7pLZQR+dM34+ZumAxvY1Y04uqOAJ6FsExzeto7zfAAX6GiwPaLWR1lrfr8n7f/Rl3QGzmsis+/uO71V9OFgP2gpPhgr7TGRqRUT6dyvr4aIs/pm/2zVUNbBSv6G8e5pEv0Cvec7Po7+bTtjlBRlkvAMBkDeQyvsNWKCvofKACYBrre/X1P0/oWEAnnFD1YdjhtXxR73mX10FfCHHE9pVWcGAI/S0gKsfA2y+twrFZw6Hxf/F0Pk8Ri/kpGSnMuDx5T0iACgQHioo0NdAecBUHW6QdsV2/cL7v/Cyqr5gnc42CCOcfX1VIZ/V8We9IDmTzVXwPDJiXuKXPxtDBma8+lzP4WAgKkPxCUAPE4v5GzEuMX0PYJPLhB6FJsc7MAMmkVxaYC/K9gG+F1++8AQ7Gwbgk78I7GFpXgIwFiRXOwaJZPUbiR0yCUDRk+cHf+YpwMj9HgfI8ClGPyvsSiH0WSKRuYlitLb/zHM/JOSs5C/YIC9cMQDZr/dwxgOW9gtGYUBi0wA8l304vDQvAchilFbpIBQhZ7Ejq6ZQ0/Yhil8y4j89Axie9DAsD6FX9HOK3QtROTFkviN83kG4felIY8DCeLrSeMDSfsEovAECUFsTjHD+tcB+tkFgcXKvBRir7qtFl9owmO4Xy/1G3bAFfPrZHorFNWBFwHjQAFctIghj2kBarw06If/+MM9ZqTN6DgsDojCerjQesLRfMApvoGkAWh8Ob/tgAPSKWCp8ngNQtadjmTdltvNvn3peFYhgQQgh+iUmEaUAUoXM1yRLmWuFLaE9Z+XIAWBhPF1pPGBpv2AU3kDTALzwmqo6qtVh9kJErAudABia38TC5wJgS2xIhAwBn3yhByL4EhzXfRXxYsDTJ4IvrNN2JFMxZcBzVo4cABbG05XGA5b2C0bhDTQNQLZBYH1AVsQSAAU+imI1obHyblnjG/kJk3U8BHz8xVUQAhnQIl5CyNgKAGp5LKSSCoAySh5Jj79vTagcxUaIBeRNe79g9gq+DXig4wGzy+PONfT7RWFA4noAkGXZVAhcBckJQgNgrLiaNb3paIDo1vHHX+oA9LQBi4DxJcOUPJUnTgU2NJUyROs8irGARxQAC+PpCtsFd40H/AEf0gMQkLgeACT41PiGoLOKqyrJq3K/Ya9mNyr5FusN/uPLPIeDa8Bc+w3rtyl4VFHaMZc3i9RWBM9jjzgAFsbTFbYLRmm/YBTeQNMAtD4cBKDXBTQGdAB2MGBo8SCLmEuS1AFVAJ3A/NhPt0PoCcA8bSDG76XI7aySg6JYuGfKwJHFgH0E5B3ueMCe/Y4L+xVHAOZ+9EHcEgQgwbeiEYx6jwTdz4qfu7EhEJqxGqruf/RnHIAEnxgwBM0aC8aUAYWNBRCmoIll4HTqO122QcZbrgMWxtMVtgvuOx6wa7/jwhtoGoDWh4MBJ16WN4lfr8AqI0TVV1O1fa9BbQzovkAy4Ed+NgCQUSxZCFWvCOaOFREXyUwZOPIA2GdA3uGOB6wPaOz+QPv5S+MA3OXiN9aclghW+d3IgupBF2pPqxcxGenDPxfSRh2ASiKKiVP2PaZScvAKoA0VDc6cOlIB2GdA3uGOB1zR77iwX/F6AFB9ONSOQW0frA50sILVcckWJyIDSgwPAVcJgFbYuZ3FJvAlEHbJ3IsgJLGedeBIA+AAAXmHOx6wo99xYb/i9QKg2iAIfDJEJHqj4SExbEty0gkdhB/6P9oZbBZIGiKYVb9GKaN50lRHBLOvhDxh/5EKwDUG5B3ueMB2QGM/grb7/6wHAPNGMAY+GSGUjC52VX2f2CD4+HO0gqkZfegXKgBaHkcWtS0AWii9xG1ImrLlN5XR8L8fmQD05BVrmEENmpYSP9QX+KHiqj2/82+HqqDWwnbBRfGATdzAegGwru2DpRq7Mzq2fpAf0Nq0Rl2wBXzglZ4yUAPAmDSVWDBPHQjLcgTqOZ6zUvdKHh4ruDCerox/Dnu7YqwXAC1NI/QcEQuK6WK/kdgCTGC0PYAP/KIDMBgglq+hIkrOfsaCviLSofcJgJ5AdM7kkSaCj/HqQKVIGvD4swF8bcBjmzjsaQ2H5D/6acBd9wALB4DFWWB5AVherMp4GKIYEOp7+26UF0aSfT/xYuDG7wDjrIpAERytXf2vajj7ueryQXSFl10K/ON3gIWDwCLvjfGB8Z54O+Ee4ve6513uB2R1yzsqC+twbC8HcNVhfAeaBuDP/TvwtS3A/ePAIfYFVlPq2HHTuyulZCTlhbjhETF5yxTQGgPGhoHhIWC4VSXGD3n0tLkMHXHxu+YyB+MlPwDuZs5K6FlsbCzdVO9DuKfkHM8AEkP7B8fOkwDcD+B7np42+JkGOvKdAL4E4K8P0zvQdET0b14D3DgB3D0B7B8HZka9WzrD88N6sFm+YcUjrn7E1ZDvMtF9DBgeAYaHgSGB0PNHCD4BLwLRsByAyX/ij0/dDUxuqlIG5hix7eFhvLcOVUAtyPSydAFmOQNe6EYGV/9ZESiKgIEgtbaD/gHALQC4ovY5r5KwtjOU/XfTAHzzLuCmIeDuMWDvKHBwpMoN0WQzNtAaYSs0K4ZlOSAjGG9kPjCBRwZ0ABKEBJexYAZEAU3A7Oi1BeDym4EDnjQ1TwCGWMW8MXcKks0YOyZNlQOQjcgYIUHllEzYQ0ktm+r6oz8G4F4AXwXwRd8/kO9A0wB8y65KmPxgGJgcqYJTKYpTv2CCzyddQJRDOjKivn+Deh8BF8BnwBtaCUA+YYEyAU8h+c6Az9gNHHRmrgOgmDA3jHQ+iWupCeUAvNSrA9HNwqx+muk9nJVNg/CTfrmbAPwbgK8D+PcHkIibjob5o13A3XypWsAkG1cPA9PDFQDZM1id0i1KxsWfOrKnAFXlifCFFMMRcASigOcs2MGAIfE9iWXplS6On7UbmPaUUTXQrgsVMzcRj5Folg2V5ayUA5BWYKwOxKUafnosWjcJwk+7W5F2EKvlE3xcXaNYfiCYsGkA/smuqug6hcleAnAImPbO6YwRpMgjCAVAm/yQmKTv5hNsAf/i7SyNBSl2a8Qv/4/M1yF+BZSYlNQCnnVrpbC+mToAACAASURBVJcaI7sOSEY2NpaDXLqpR+vE/OVksDgImgGgghHoYJbTWc7oJtFWc65/cg2AYvh2ALsB3AzgVv95nS/f4QdsIkT9T3cBrGtITWZfC5hqtQHInsEGQn3UDDvEDEY/ICf7SxMOrAg8T+c00JGkvHGd2DABUYZIAONzCUDppCFhSukCBsLQrFtZe/IixYQpSyEoJoqnuPWrVRAubQh83HNlZB23z7j1ywmj6CIIqUPxw2Xeu9bx2jx10wz4Z7sqTYZaDD8EIDuoE3hMVEphWg66JIp90k0sBxBcy+iPIIaT1RtEsHS/yIAqw+VSNPWQfe5tlVEk8auXgVa5BUsEJuT5uoliAbE5AGotmIAjCPnR9xDG3TQernYAUupTdBGEFMf83OkApHG+XlvTAPwfuyrgSZOhas3u6cwTsUBVn2gTwyFMi8wjHZAA1M9fYGHDULJD1m8Cpa8fRxDad+l+Ykf/3XNvd11U+qiL39SxXevSsshdDFvgbI1O2AwAtRZMZzTBRuDFjxe1Xg8QEIB8yyj5yYIUxfQIkfkIRnmHCM712JoG4FsdgHHp3ACoMH2G6jM4lWzoQarSvwQ6MSB/vporVaFkh+mCLlpVR8Z+dqDZLoDOpHSiQeAFDkBjPrlgCHgCUaFifg67H/9uYjn4Ai1vpTERTAASBaoQJBAKeNqHlL6mwPDZYAOROag/EYRkPX34MwHIvzW9rQcA+TLpI22G7EcQKlJGsYIJhC6ClUMiXfBTbFUQAej6nPS/OuAl9pOOqIc2BLzg++3VmWgIEUz82cRuCAtLIHQQm0gO52uOAb22sC3JEWgRfPpZf2sQBQIgLydPEIFGwPEj8MlF2bSbsulghLftqsCXq9HGgHysznrGgi5qzTUTFH8FLhAUn3hIJwCN0HLncw37qaF2zoYvuKNivmQIuUNc7GvWt6sHNs26twA6vhyq8NEMAHlyntFrDCcQehyaPTl+FwAbXDcmAKMRThakEk8Q8kPg8SPL0qzLBl+A9QCgR6uZGs3vfHz8TtBZvkgGQrEPBVAUg2Sij50QAOjiVKI3saADJRm7dSLYWfSFDkCem/dhZeMy9pPY5QvSDYQyUJoDIK8qMezh3wY6fSL49PcGgCAA8pScJLIgAUYQEmz8RPA17StvGoBv39W24eREiBoNQSgWNI1HBkdgxJSw1AI+dFIbgOYmkjimQ1r6XXC3rAbCHycAgytohf8vsB/r2KRaRq7zpZ+D37HMX0s3DDcCUGLYaw53MJ4YUODzusqlGCQAOQCejuxA8UULUkxIwAmMAp8Wa3qkN/R9W+sBwOhIEPjk5SLr8HeKFbTQfb77csPIMHGl/4MPbReslPhNe4+MiTpi9AFGV4nI7MfvagNQLh/pfrYnDAS8aJQ42A2w4em2cAyWQUuJVQTGWLs1uL7DG9J1RjhA+jvYk4t3KXeMqijpzrud4At9z3XtP16yGfjKZmCGooYh1tZzvv8xXPFl4PoJYC97k9FlwZWD+Azi/deMZWeP13eQCGEyoERudChIjbb3mJYwH7V0QIKuCwj/gfMj0asn2I0FXRSHXfL/iRkNgLyeVj8ccMY//J1fyxzTAXT2+xoQViKYD/1hDqLxPiYxTgSvQrphphG97tz4Slqafnj7uk1kIQDZrvWTw8B3jwEW+RLxPgSiCERdPwPR7+wCPg/gulFgfruDkOMQkFc5x84e708JAMmCuRNBXi4TIg5CGRzGiBGE/D4E/C2r2vcAYJoify62i0aJSMhB+2IHoNwu0fkcjQ85pu3ack5nIBREqneYFyWLkAXIJHESe00Cyx5QyeL6F/tyEcDcrOW2n7fX8df0mME+/vQ/PQjhoy3gzo3AISYf80MQaQx1peH9wb7v2mrtmCBkIMMejp3jIJD1MsaxaMZ8v5N/67INAsB3BAYU4JL4DSo1J15AFPAEwuQHZJzkKfUAtOHLJSOQRWndBYQvCQA01cfnNopfsaCJaD2baBn79QjSTiOEP1EcawIpkq2kegBTNgHWEpOKF8Uwq2NRFPM4AqCf46/rA2U9/uVDvurB01zvAJpiiwOl3fEeciCGF+Ij11f+QkbSfMPfIzqw57mEFZ9Dl3Ps5HXWAYByHJAJKV7N+s0cCQQhwSlfm4lGZ0KB8C/rABgZUS6ZHITBSEhCowUYAAksF7cStWREyxRwtuPpOlgw+5s9sq6OaIJIIlUgEhA1edoTgHxa9HVw5jibZNF+j/9yGQA/7pbujZ4bwv2+cWB6tFo0NzYnkxFA+cvEAo43VBoEo2e+48EMXEOmD9F6xhCE8RwZEJ80VblKvDlmzwicfqy93/o+8K8TwB2jVSgW138FrJQTXBNlnJgmrjZwanow9CBP/rL9wF0jwAGWDtFyoN9PHutnIHT05mPXz93dMGQAPniJsjiBXiTbxDZFMF9NLUPQxKR5qezz1Y6/YZDH0D6GkdAkYJIvRalAdHAMmPZoYhb6NhDWvEyf/ma737CXN7R1ZC7hUbPgcFgqt/ZZjADnM1xqEVhYBpb4CUk5UsL7jQvj///5buDrLeCOEeD+YQchYwG9VIfyg1NaZszFiCH6DkRGLze5/dgk8IMWcMCjdCiCzR8od1B8OTwvJM8JEShFut1fzMhi+eRJr6LI7hYP2M/xVLwKNoZjUTwRMAQQmYyhWGQxsSADOflZ4kukj7PhZ75bETjBpkAGahMkcrGgwhsXeCyBHBj1wmOBQwvAwqKzoFeRV8ZaerjKYAuirmPY/o9X7q5Cyr7fAvYMAftCPGAEoYlBiVtFwLjtp2U4irj7yOANbi+crHyrfCbTquJV44O0F1FrwQGIMZFqdQDyP/gGSZ8TC0ZRRsOlVzzgasd/u+zpMByLehAfCgMQCDyGZJHFCCgLZ2f8mgI5qauEcVx9e5vACTgCTwEMWr5TdIpWKJb5MvrnoocDswvAPAG4VLGg6UKeqmi4iuDz4er30oX0FP7u5moMvIf7W8B+jwlUNAzFnlZCIhvGFRCeWzrgXSSIBreXTFZSgVLHAp4UHOFuociEEsn2PJwl/XEk0dzfSojeerFg1IOo5BKAveIBex1P67lgUzgWQaJwLAKRH04i14ItgDKEtGsRnWx49b2Vkk9wUefTGrKCF7R0JxZMqxN8cmPAxWcAcxGABKEAKPA5u9lEaAbCmKMI+sDN1X3z+ro24wEZFc0VEE64ABgT180PF9ZdBcDb6JpqcPtPk+1ACbmKjJnllwyuILunEAWjZHkBsrsRUnfD0qEiC5IJfyisgMhzWhcP2O14Ro4WbASgAMQJ48SJwchmBCDFa8qpyBbSP7OvU4PQ0p2W7+LSnSJUFOrI4V7w5IoBTQQTfJ6oTSYk2mQcpGRyH2syGjIF6EM3V/fM++C1CfwUExhCsmzCaQT43lZC3e1hBpEHh36XEqrB7Scmq5dV0XZxmV8WuDFzAF9iwhow9seAGoBcGtKjqAc+1l9rLb/1igesO55ysmCrC8ei6IxRMAKTWNBi6Xw98xNTFUi0jEcmpYgRAPhddpVi9OIEPP5cYD4CcLkCooHPwaW9kV+iwWrQHT8uA1fd3F7DFvgUHUP2k8jTiogAqLoxFpDgbMj9jXSuN7i9dLIdaxzBp5XVBMIMgFEnFAPKT9qPd6A9BIGI7MfPmf4U+40HzI8nWgq2PBxL4FEkjKJixGRRFyQQPzzd1iAUzCAQas1YOmAEoFjwkecDC/PAwhKw6CxIkCXwOdVJLxTobMjBdyIgfvimNvNJ7Evf4jWtdnRYD1YNGVuG93VWuWs4Jf+mlZCCZxwP/cnJ6mXVKk2+tK8lQQVHRTGc64SDAZB3Ey3JcxyACkToJx4wHl+YwqloGDICmYmTFgMQFBET8yyYzyAG/AfWX8mCGQg0BTRoHwt9KVaPE/HQ890AIfgWK+CRAaMRYnVdxHbhdY8Wslw1V93UDsmPIj9GxgiAioRRMIJNvoti+SW/Ikd0gwAU8+XxJcbGITJPDvI6XdCFREFSknTB83xka40H1PGF9dnycCxFwygkK0bASJQSVAbAYeD98xUAe5U3jKIwBosSgNsuABYogl3/IwgFPrOIg1Xc4ZrpAsSrvruykl2ucykapkMMh4CExD5DwJfWAYAxwk4MKPAJgOIjGSEGwuCakRhemw6Yv0UUwRf7L00L9pnsNx6Qx4feY4O8pDEcixOjsoTKKpMYjSFYYjOC8Eq3Wnnr0YYS+0Tmi2HysrPGLqwASNYzBnT2Mz2QD91laxLB0gs12GAh81cf/o/OcHyJ+qj0S/zxnhUZbSyYWaL8+Rq2S29wowiWkJPan4MvgrDDGAlRe7KIywDIgR3meEDWg9HbJgApNTkXo8o0i7oVgxnEgFr8F7jEdnU5GvqfJQKQKyEOPlsNIQvyvupAGHS/Okv4qv9oh+PHxMLk8ggBCRxvAmEN+AiEzz2iQfQBeNmkh4K52hJBKOaNe/FSLobLRXCz43rQnu2yi9oMSMDxs2jo8303ERz1wsCGZECF4kd3DwEYYwJjhoNlQrgIjlYodbBPrwMAZfEmyzcIv27gs6XDzC/IR1DOgA9a6DRz4wZAsZ+LYXvQYsHoD4ziOFklna6YD3+nnU6dZ7bGDAcBUImIAmEUw/zbJ1i/scGNDJiLXmle3RhQ+l/aq57gUQCWzwwBKPeLsZ/LFrGg/ShRXAe64Ajkv30kALAjF8R11Dy3K7KRwJcsUTaqWScARou3w/INVnCH+A36n8RvM3nB5XP4oD6DATBYwGb5ajlOLOh6X8JaBKRG77+7ygGYp1bn+V25/01AzBnwQ1ypanD7KWfA1QDYC3zJIj7KgOUzc9nFbetX/r+O5biwNhyX5uSEDr5o0xsJwLp8/m4A7GaJUv/j3/5+HQFYJ3oFPPkho/hNeqBcMkcB2BAA6XrxmMBkfFAci/m0JpwzXw0TXvXtzrz+PKc/Ml/ugzM9MDqCAbz/keVjjGcQA/YLvjoguo1mRslRI6RwfsiA5nqhL5D6nscF8gfTdfxpS+/hLzvWfzMQCoB1Fq/8b3VWaPIDZqsRV64DALsZHVHs1gEvsqFAeBSApQC8pHK90Oql4UEAyvCwNeGcBXNLOPMLftgZsI75ouUr9ousp2TEyIJ/sU4AzC1e+WIFshyAHPZREVwItrrD3wGAhibTYBhxVpe/xePyrNBuWaoNp3DgFwC81O+RAepK/a5Lfe51jxr7JwA83nPXYgq1asl0yX5N48+f4VEGLATlK1vAo5YB1gBSRmsM+NFE57lcfPD5pPFWCJImtyvGgGfOAacBYO59zFglgHgPefZsXV6/gPXBYeC0RVgyJNOGYuJjPka9eHWgjL9bWzhWk0/n/wPn+k8bgFNmgYcsVflZnBRmIShtJM/m7JGibGBoOIIez9wKPP4AcNpylfbNlGfdI+9NjBjz8JVzppckZuJ+dBw4aQ44drk6j1LIY9JkPD7P4s2lwVEGLHwJnncscNIh4Nh5YMsSsHm5ndOu1BGFThJ8/K6JrZtoslST2+XHA6ftB05ZAE5crgAups5TfaL6EF+UyIif3gAcOwtsXep82eIYY9JkXpMgMp/AeZQBC2b8OduBYw8C2+aALQvARgJwGZhY7swEzbNa88IRvAVO1qkF91J36DNOBE7eD2yfB45fqphLnevzdGeBKBfL8UX5/CZgyyyweRHYsFwxYHzRNK6oetSBMDLjUQAWTPqPngpsnQK2zgKbCMAlYMMSME4ALrcnR6JYQIwsoUnjpDRstOLy7cBJB4CHUGwuAtuW2nUDVH1EFUhycSwWjGD64mZg0xywcaECoI0z5P3X5P6nWlHdgHgUgAUAfOYOYMtBYNMssHEe2LgITBCADkIzSJZXpCOnIg25uPrhgnupO/TyhwLHHwSOmwW2LVSik2pCrDsQskzNIBGIpBdGI+VfNgMb5oENCxX4yPRjPj4xaJ0+WGeEHRXBDUz2Mx4FbDoIbJypADixUAFwzAFI8KUJChMV2SUaAGc1cE/xFJef3FYRti64nkqWDrqqEhbrsm5zvZCdPCd8nHzJOLZuABRz9hTHZwPL7LnLnoNMIY2VyaKcjtZLHOAbNgNPngKe4BacfGF1pnydD+hphQ/8XV5UiEueLGnDN1tWXj/3/4cTwAUzwGPcRcFJiDpPt3FLmf5vjwE2HAQ2zPrEzDv7OQg5OSM+ScYQy5Xbo8465u/ZfLTJ7fKHAdumKxVh8wKwealSE6inEoSy2MWCdbUHIghv3AqMzwHji9VLZuDzD8cXxxWZs5c7apmW0fMBnIHKn5X7d6I5npvRz94O7LgXuGIReJSb+Xl1tzqflybwRwqf9i97BQRWomWJQ7oZVFtJoqDX/b/oGODsvcBTATB9gsfGqmzdjtVz+G+PAyamgYmZCoDjFE2anCVg1CeJwOMnTRB/DmUINVkkgia3y08BtkwDW+YqAFJFMD1VAAw6XG61R31O9/fdrcDYPDDmY0zjc1UjivBuAMx1QdMB+WAYXU8dhEU16dOSkppbcHFSrng8MHwnsGMPcN5ypURHp2xMIa7zDz2z8Gn/kVe0YomO0wEwBYKujL7v/zHA6C3AxfOVh58g5AsZxx4fZM7sf3h6BcDxWWeGBZ+cMEFiwGEHHRnDzun7ONHs/djkRgBunql0VDOSHIDU3cxSD4aEajhFXS4H4S1bgVGN0V8we7E0Fh9jVDG6Obr1LJMRwn+kOCaTEYT0dsfqZHXl/p7PrLi9wIY7gO0H2yAgCAWCWCowKrYE8nMLn/a7PQn9X7zIJPPkCcK+758y7x7guNsB6l98gZjLLYet3Ay5n0sv4R+fCYxPA2MOwLEAQLIDPyP8uBg2cRYmzFweAYilKkn+OC8/Fdh0CNhEA4nGA40kd6FES13WLO8v1qHKAfh9B+DoYjU2Ak/js/8NAIwg7OUb7LCC+WAfB4CpBJoIiTRNRmS1l13kqWh3Adv2A8cdqqp1MB+aIOSxWv6pq5D2kkIAvt8rF7BLJksN/jMqfa7v+7/Ak4B3A6ceqpasKMq5akAmlLWY37t8ZW97PDB2qALg2BxgAFwANEGcnI5JcrDZRPlkaXL4u1KJUAfAjbTQ59x6dSvdLPXAgGYshZWR6JIRaXB/NwFI8C1WwLMXzMeSwLfcXuKrA2G+wrLCDcN/IIg4ERRn0qvyySAQX6mG1XuA4fuAbTOVwktRRr2MLCoQyvEZ/UY/WwjAj3jtFJZkU79g1ghkgEBf98+0Umb/3A2M3lkBl/fOcdMok2EjkZyv8773LAfgHDDKjwNwxEUw9yailpwdxBAEYhBbAuGzG3aKkQEJwAkCkOCjlb7Y6SYyf2UwlAS+vKYnAXjfNmDEX7DEfA5CjUcsnzvbu1nDtUMmCDkRZEEyGdlAk6G6lQTSa6m0MP6HuY73AxNTlcJLZ6WOJYC5/CNxLpHMgdKIKNl69Qvu6/75AjHOiTU87gKOOViJb748BKCWrnK/maTA+58AjM0Ao7PA6Lx/xBAupoYDC9okBRAmPdBZ47lNA/DhwMRsxX7mPgl+SrmK5EaRNRslXFQ9CKB9DkADn79cZtkHFkysJ103eBbqlh97DpmTQTYgk9VNxu+xYbXKU3lhFoJPOgdFGY+lPkgQxokkgF9Xgj4AvfoFs84eX4Ke9x9fIC+tRfDxvvniif358sSir2LCj5wNjBKAc8CIi2AxxLCzIAGY9L7AhGIKgpATw4l8wToB0JjPrfTkp+SLQbHrOqm5jNyajS6VCMIpApDAWwQ4LrGgXqzIfnq5cv0vN0ZXHTInME5GBNLb1DGdOYQsI7AfGKFjlgqve8wJwG4T+fuFAFytXzCLb+VgWnH/fIGYfc46Hs7iHC8ZkPcdXx4VfVXJw8+cA4wIgM6AHSLKWZCTESfLfg7WsIyRF3ckiRQ+HACXkwHptyP4KHrpJvKVGnOhRF9eBF9wE0mUEogz2wC+WGI/vVxiQQIxAs9+rmHA6E1YFYB8DJwQMZl0OrLZ++i7sfT8zroYHLS9df4RACWKxSZvLXzG/fQLZqk2gqn2/vUCUQ9UZaM9wDaPeSPrC4A5C1KV+NITKwCS/SiCR/jRBDlLmP7nHynsxno1IPwJSyRpbiMADXzuPDYfZfBTEoAmcuVQdiaW0zwXwQsCYDYmMaDA1wG8TBSvaoR0G77EcGSET6hjOvVApfRPAUN0zjr45JzVcSqiTxD+VeGzXku/4Nr7JwDJOkxFIwt6j6+RqUrlkO4bXzp1gCAAv04AzgLDDsBhKugLFUvQUhTwCEKbnKCw14HwJ9cDgGQ9WegRgDI8XEcVEDvAl7lVlglAgi+I4CR+Zf1mLGgMmDFhBGFfDCicRJFERviSABjLS7FC0MFKMU+07wOPE0kGvaoQgGvtF9z1/iODkwn3VWoEXxres5ib9xx1wZufBAwLgAQexbAD0JiQwJOuJBA68/H3Zhk6+3CifqqwWNMKN8wjKgbk6gWJgC+FMaBb5vJVmsUbV2vCqo3cRWZcCIACoax53+ulkqNd7iqOcU1WcC9cxEm5kQBUdZ+sTnSL/jEtTWngi21jhJNJBivZBukXvOL+yYBkcOqxKjJ4AGgxzMrBVwdAMmHrZOAYF2l6y/mwV6xD17zmWo6MbRyeWtOHwxJ91IIhr6rqZS70DPPLXDVUrfBwzHKr1EUp6/h0T/6L/GcCqslt4IhoTcwdAqDSs7I60WQH6R329pHuFyuXDJmEjuOSbdB+wSvuP5bGUjmsA5XoUvcvBXKKAQnApUdXwah0b8jXR2YzJTsC0ZHB33FL+2yiX3h/1YeD1fFZGT81g/H6yqkVa9YEpqMhTADle8erHA6t7Mh6j4ZBXdBGjFyO4CSIm9wGBiBvgqxwIAJQlXIyEJLyI/i0SkAG/FbhaEr6BXfcv+5dLKhCg4z1C1HEBJ8+BODQGZXfk/quAZC6ketAZEQCTWAU8PIJt0fgwHzZvVWNaKqi7JLOmtDWFy42g1FxH/XfqGkII0C+a0tnDkfsGxQjn3VPsk7tXmuy+Xp0JhtoJosAaFcUAJUYKiYJxcqHqKAH9rPlG2cMrmCUbMX9guMLpGTcCMKDlZGhMK8IPnPIn1X5PA2AwegwEEYmDGBMjOI5whGQP3NPBT7VJlRNaKvF4t2IWHbDErtDlSk1p4lJ7/zd246tglGZryIfrFhQ7pU8WCAX0ZENG+57U14Z4YrCeLrSxXdev6TfLwrbxT7znMrfKQXfHLQCnyvmRIv0Q3430ezMmL98P393G3wqz6am1NYzzoGn+svqRmTAU2citctqAX/2EI8F9ACEmLHXLZGoFxtSl2xyK2bAYwrj6Xr12+1noL/jUTCD9vvFrn6u0v1/nvGkaoVBAQi0eummMAuXQHMWJAA7gCixG8U0gFfcXdlBKk4Z6zELgAJfZEKrxpC1xOIl/+Sk7jkcdYlSco90y9+gK6vJrRiADD0piad7RuFo3udNCgft94vCdrGXn+tujgV3QAcHLcFnroelivHkchEL8ue0uQ74S3eubAITS3IQhKkMRjBMokgWG3L//2z3VSnP4VDgQWxUEEUxAZFHL0eR3HDfm3IRbDHkBfF0zy4EIKNhSvr9goGEBdvTz/MIYQLQdVsTwRTFDj5jQmdArRDYJQNDSs961R3tPhx5NXoVgoxleHnarjohgLec3D2HI492yQNvIwvqO9fJm9zKGbAwnu6FhaP5pFuMg/b7tTbpBdvTz68cz/zI8azVj8iAHTqgmFHXDUB89R2dtaC7tUGw4kDOgFb0R2wYRDGZ8g9O8aU4XwPOczhiwGlMjqqLWiFYGu570wADFsbTvaxg8nkow7E8nM/atfKzln6/1mS4YHv6BQ4+Z0BbqHcd0NwwYbVD3+1yWhXJxPBrbq8AqE/XApSqAxiBV2MZ/54DMOZwKE00rnDUWcR5KiV/brjtSAMALIyn+/mCyeehjIYp6fdrvVELth8RAClyHXxmhPi6r1m8FM0ucgk8+y4RHC1kAK/5XgW+2hZYofafWcPq1B5AqDqEYsQ3nepR2gqhV2yiol1COkD0C+aOaoGx4aL7DQCwMJ7uVwomn4fm7VrX2u/XAlELth+5sHPtN+l/Ap6sX2dCsZ/phZkIJgv9l++1wbcq+2WFv2NXIjNKAPzuw7MUAV8DTuynFIEsQy83RgTAhiv+NgBABaQOGE/3mwWTLwAqHnaQfr9GnwUbARgDNBUlkpzQboyYCyYDYdILdf0l4NduW9kGoa4geNdazLElKoA3Prx7DofiETtC6XvE7hGEzJlpcis3Qgrj6d5UOJoYDcMglrX2+y0NPtl5UZUjkfx/Hqbecoe0OZzdF1gHQrln9Bhee4s3f3Zxm4MvAk9VSFdUIw0i+Q2PaBtISiBSSFgCYMjMW00MP7pwvvLDmwFgQTzdHxcOSGvBg/b7ZRZByWYAlOERluKM3Ra9CKWc0q73dTBhMFT4ZwIw9l5Lrpes+HjeBiGCUOKXeuBvPcKTiEIOR0f+RhDBMYi0Lhea4GTaa5NbOQAVDzhgPB1La5RssV3rIP1+7yy5OAADoAchEHBkFbKfGRpiweAPtMs5IFNokyOGk/7rAYC9OhBFwNXVY1at5tftCBHaWVS2AJdEcEinrDNC+Lumiyc1B8AB4+muLARAXTDCWvr93lR4/Z0Xt6ODFQkj8WtumEwHTKDLQejAfN3uds/dfjoQdatGLxb8jQBAYz6/boxiFgAVudzNIc2/s3xLk1szAORoB4yn+2DhaATAGJCtbpkCYq9+v4V+aBgAQ4i66XtaC85YkDog/zdZvzUgfN1N7a633Xqv6fe9msDIHfNaB6Ay2JRE1AHAEDIfI5nzZCLeN4Nbm9yaA+CA8XSsul6yqV0rJ2WQfr+splCyCYBR/HJyKX4phs0PKBZ0lqOYTpvniAiUAmAd+HKjo1cvDjHgr+3wPJQsVCymUZrPMuRsRBDG4AQCsunyJtFGHwAAIABJREFUcc0BUJlxQoH62q8ST8cggpKNAFRGwCD9fkuvbwAkyGgJE3C+Nz1P1q9/T3F1EZBxvZh50s6AEYC5yyUHXt5/Q8zI5/KrAmAIkkipkyGPYwXz1aRT8v5ZO6jJrRyAvKOvNXlLazsXs9bo/ztc29Pohgotp5J49Rcj/pzfIwGS//3OM4CNd1dpntQpFUmjEH4LYIgnyn/OLjL8FeDGhwJbNgFjI8DIEDA8BAy1PFK7FSKf43cNKrvHx+8C/vmxwMgmYHgEaA35J0StpvvzL/nP8RbLAfhyT207TChgDRiu/ZL9DsfWNABvYzbhCDBKoBAk/pEobGWTqp819hzQ1/0k0PoaMDEJbJjxVZFgDad0SaUO5LksWVj+XScDmw5UEUDJ6U4d0nVbC91S3ovfVHp5al64cgC+k7mZAP768KCA0WD3A/ieLz090CDceVmlAuhBljLgrfcAw6PAyDAwPFwBkCAbItM4a/FiNtERjBl76W9ffD2AbwJDdwFj+6syImRXrd5Y2FjIYcnzWPLEqnsfC0zsr6qBMQmfIDR/pyJ6xMhKyMrSDiKD2xja6TADTt0/AGAs1KcAUCFrOLF6tbtiRVFavT/wuMCa7MfVTlH098YBeBcwNAIMEYAUlS4uBULOmK3LCnwOPANlEIOSoF9+C4DvVoWXhvdWZVOYqWgi3vOXDUQhgieB0EElViMYJ08HxqeqnG8D4IIDkAzo51DKQQJvBKUmKACzbM4+5hUivwrgiwC4LzvjmgCh6nBcgiMTcv9Abo0D8E6g5eCjfpUA6AxoQIzgi8ALmWwC4z//DxcPPwBak8DQFDB8yJPpPZHeGCyC0KN5DFCByfh9/+OAsekKgEzCTwD047X0SCPM1IYQjCv2E/MJoGVwUUQoPboq0MdqkWVn7RtDDMahB4g+P6qhXFpjVtkDtRGA2nKjos7IyOyHFUbIrXe0FXsTuzIYfNb4O2M3ATGIYQOmPn6hG6gi3eUkQQAeAIYOAUOzALMVh2pAlESqGFBAXAYOMQVjxll03iO/yYKRAT0FQXkwZkjp1pz51LO2XAT3KtD3AIAwj4Wg05kfiuUHYlsXAJLVnP0INLM0OYFx78AzcRySeTsw2AJueI+Dj2Fne4EWKz5MA0MzDkCCkAByUWqsJzarEanzj2zXwjEGFHuGY+pYsMojzZL1G9EBexXou339IRBrC3lJGmNDuSHX+w7WC4Cm6wWxm8DngLTImgC8pBcGBuTXf/1fXnyTugnFwxTQOgi0CECyIFlsvvJfEnh0mhsYI/s5uxFYi1xZof7oOqSAawwYjRGBzYGXbtWXaCIrlvHUagX6SP/ruMVYCEbEqECXAMjfree2HgA0ESur1/0vtnNwGSsG0RsZME20/+/XWH6Mugk/yngPAGy5GDYALjiIHIgRUIrsZjM7Ax+BSx1S4pfffQVIep8dL7dMDsTGjJB+CvQxTHmdtrw4l0CovFruC2NOe975egDQsCXRK/eK634JhBK90q2C7I1i+Gt0jxF40k1cPJAB7UP2m3MGJAAFQrGei9iUTH9yBUDTHfU3B5+BOIKQ43BWtNtPcWIOzEZE8FoK9K0DCGNxLi3FqaKA9gTgeoFwPQAoI0OulWT11oEwiFz7cwbErzNxWtEYBB+VY76Vh4DWrH8IOoGQ7Ocg1CqMRLPltmxvs1/SHaP4dcAJePYyyUCRIzrTB8tE8FoL9DUMwl61kQQ87Rmy2PS2rgB0a1ci18RudEJH57OsY02y/+83/sZdBKr4FXQTApBvprGgQCg9UEAM+h9F6ugJDkC3gJPBEvRGrYoYCBX9IxEcS5K4i6cZAHIw8oXQ4mLBb35YH5d7OekadtTV1UZSjaEIPH4nQzYNwgjAHNwDuWGYpZc7lzPfX1cQur5oBorfzDf+zi0yVTuSkuxBI2Q+PhQDIUEnMLo1TBCZLufGw/ixbQa0KB8CTODjPohdY78IQmfDjmW7Yo/doAX6GqIiAtDHaYswSmeMubV81kp11L6hy2PdAcgblfslOKC1IiKRmyRxZgV/8++DS8BFrxXi5Hd/U6MeSKdqEsEKhpBRsgRMbAtuG4KU/+9ry5brzP/lPVMv1EPOQegharrVcgZUhVHFxNPcp9VFtlOWkL437C0WABWypFRGsV0sb5Hn2zYBwvUGoKl10v1knDgo0y7XA8Pfv0UACnjaK33Co9gJQAOe64FkNvtZAHQdjz9v2Nz2GSa3jYej2W3KGuZ9ixGdIVSoKT13B2s5AHkGheST6qn0erHv5AIgAAU+LVfw/wq3CEAV7clBKDDGZG9/5oVXx/oyYARczcqH5GyH8eFplTawFvAtrtXLGpNrQDGbejupB3omlIHQGc/ErzOcGSRs8zrhAbbuL1Tco/JfbLlNwHOmi2kIcs3owbdwNpYtynDQhsFcgvuG9/YapGFvYX22zZcAU0/GwA2LJ/4AmGF9mwEbBu98Y3cMF+uAGQCj2HVp3BbPuo3IlqxAy5wHAq4OfARmEBXGfNIBa0BIsG0ecwC67merHgRpZLwocrWaovuTxew/V0txJQ2DWeae3WAGbdhb2DB4+wRw7w5g8Qpv88liyGtoWHzMi4C9fAEHbBi8kwUKu2xNAdBxaGBLbJdZux1LwAGECYAEm6wyfpelJrEgFnRDxESwgyUxIUsVMwjVy5AYO0bG89Auu1/5BF38KqjBHlUAYXsteNCGwTeWNuwtk4JMkrlzGNizA1hm69g1Nix+zDOBW0aBeRZZGqBh8M4emfWNADDT+zqMjQyESdQFHfDbZECCLRgdHeCTe8CBaKJY1rDnBRCIAuGW4TYAZeFG8ZuMkGiQ1IEwGCJtHZBmy1obBsvVMnDD3jIAerti3LEBOMjGcOpa3WfD4ic9t6oveDtLfw7QMHjnH6wPAybW6yaG4+8D4HIQfvtDIVtLejpBFsVvUI7NIBHw3DUjRzL3rDVtsYPOkAScuX3coNDynT2VYJCkn+PjqvUD8hVbS8NgjphGxcANe8sAGNoVY/824BCBtIaGxRe8pLKZdpMkTvXiJ2toGHzSNHDPScAyq3er4qPyGaNc7JCRXWLT2TjwGmCOeQashq6+qSpZmp8vojQpheF58ncdZVjLnjWPHr4VWKTKxrHGUqq97qXu3jp0wPy+eEC/DYNZsZAO6IEb9pY9lNCuGPcNV830ZmkM9dmw+OKfbdcXvJMPdY0Ng0/7GnDXKcDMccBS7MwdKz8KCAKQIgY0MWGCtr4TOHAasMwOkTqf6unyuLykfd254nkb7qsw/iVg7jhgmSX31Vpd9yRHeLx+zRhjEGRbB6wDYT8NdymyubzDzCCGfpMJWfSRYfr9HP/aMgBm7YoxNQHMbQHm+ID6aFh8yS93tAvGQb7da2gYfPoXgbtPAqaPA+a3AEubgGU1RM6B060fgkRoCzj+TcD+04CFE4BldZdRc4/YxlxgjJMewSiwN1zWfsOngdljq3EmY08vm5i/7j5yIMqpvupKyGoNg9lngYosl9wY/0dZdrMzYl8Ne8sAWNOu2MA3zw/F2CoNiy99XbvftrcLriz6PhsGn3U9cM9xMODObQYWCMANwPJ49UliuW6SaqqBn/gGYP8pwPyJwNIxwDK76ahDeN6uXYCuYyABkEza4LbpY5WEWdSLxjF26/dQB0SJ6r4ByAN6NQxmkWcqrnQ00x1DEDJFjR8CcNWGvWVPp6ZdMQ6OVOCb3wAscPJ6NCy+7PerkP5Q3tBY1PrT9tEw+JwbgPu2AlNbgVkCcCOwtAFYcgAuiwWlM/XqDjMEbP9t4MB2YO54YJFMo/5gHIcALV1TRZ17FXOhPtvgtvkqf9H4kvHDlyKK4l6VzvVSBF22uwjOb7pbw+CfcwBSkyeFEHAUx/yw9JTyEbo27C17Ol3aFWNuAlgIn9QxO2tYfNlbK6MvaxeMRYquvL9rTcPgJ30TuH8LcHAzMOugX3QALo21WXBZLEHwRF1OgHS2eOgbgIPHA7PHAezNu7QFWFZ7JnXJ5rnqxHEulvlzwyVNN3+wern5Yovl7SXLGwvn4riLWO4fgMRJXcPd/+pmOymELEhRzBxJAo9gVL4kwVnbsLccgHEpWi3epocCAMeBRU5eTcPiy/6qtl0wpvhA+2gYfO7NwOQm4OBGYGaDs+5ExYDGgqP+ccAkINaVpB8GTv4d4OBxwNw2YGFrxYCmV0YxLNYheCXau7EhV3ga3Lb8g4+R45uoGLADgHWqhsBXA8K1AZADyRvuvtkBSArh+i9DsQhCOtf0UUgW/7aiYW/Z0+nRrhizoxXwFhyAi5y4rGHxU66qAFhT3rDSIVdpGHzencDejcDBDcDsBDBP1uX1CMJRwFiQIBzxieL3KIY1YW5MPOxNwLRb8gs0aghAss1GZ1O+SFHsdRPt0i/PLHu++dFb/x4mXfhcbWxhfCtYMFr/uWvKxfDaAcg7ipPCvFOVpuo3HrCjYW/ZA+rRrti6TS6MVQ+L4NPH2nx698GnXF0BsKa8Iab4dFZpGHz+JLBvApieqAA4J8CPOQuOBBAOV0CUYbIskRkAecrvAdNbXc/aDCxSpyT4CEIyTgRgneiLIp3nP6fs+a4A4N8B8/48CUC+ZGJA29fpuLmxJW+5h5kNFg2jiWHSi0r0Uv4pCoZsxw8DUfnhd4Vk0XGdGvaWPaBV2hVjdjgA0BlpkQ/K9bmn/HOVqtClvKEBqlfD4AtmgP3jDsBxB6DA7tdbcvYzJvQJkii2n4NOeMpbgJktbYPGACiF3wFoEx1ZMNe/4jnPLXu+KwD4t/5SO/iMBcXuesHylyACMBPDgzGg7opM8mEHIGdwrfGA1rC37AH10a64Yr4APvvOSdwEPOVbKxu+K2pdKRTmdI3dqkPPVgbSTBGAY8AsATjWniBdx0QxJylOFCcr6HBiw1P/CDgU3EgEIMW52M8YkLolQRddIN1AyKWiBretf9MJQN6HsaCPxe4rvgDdHOcOxDIAcmDFDXvLnk4f7Yqt63gEIB/Yoj+4p9xaAbBHeUPM8qF2aRh84QQwNQYcGgdmx4C50WqCFngNsgSvQ+Dxu4MuiawhwIAXVk1O+e/A7CZgThY1dcno1nHL2oDIyZULpBsAFTBZ9pjT0QQgn2V6ufRicS8QRgbs5ZYpEsENDejBfpoLrwAOjgIzZMBRZ0AHoUC+SOA56xJwNlEyTFw5FxBPeWvlzpnbANCdQ1eSGTRybMuydgMggVBsKmtYoC6Mt8znZxsZMLzAxoAOvsh+ydDqtXx4FIDl8L/omQ7A0QqA82S/ERdTI22mNfaTuBIIxR4BhKe+y61punQC+MytI/Zz/c9EuvyBeetLAfGZ5WOMZ9j2/gqABB1fMLsHAVBqhfTcyH5d9MByEdzs+B50Z7voGZX+NzNSsd8cwUcG5ASRKYbdHRNYwhhDIHRgGmO0gFP+HJh15jOXjnyKblVT5Cbfoq+yJOszF8P8+VnNPlICkMAzds/YLxlYznrJwIpO6egTPMqA5ZNDAB6iCCYAyYBcBqTRQ0e4630SxZyQJQIvMJ8mSeLrYe+p/GzGfnTpEIBy6US/out+K1wg+brs88rHmDOgAVCMnrEfxxMte1Mt6j7u9zzKgIXzczEBOJIB0BnCJoqgIfDEhM58SWzJEPGJe9hfVH42un/Mfxl9bgSiBySIBWnAJBDGEDAB8QWFA8wO3/a+wH4+rg4RLPYLul8tCI8CsJmJMQAOuwFC9qMI9g9Z0CxhZz65K0wfFBPqu7PEyVdWAOTHVlTcpxhXHZLz1w0ZA6EDLhkCskRf0sw4dRYC0PQ/vVSRAYPo7QCdj7GqVOSMeBSAzUzMxZcDMwLgcKX/zbv45SQlHXDIgagJc+bjZBqAWhUoH/Y+B2D0J7rFa6LYDRmzomsAaOeKqxEvbWacHQB08JkRIteSXiSBLYJOLB+X4xrzAzY7vgfd2S4RAKkDDgPzNEAIxMASSWF38WsgkuXLyXTRSRCe/DduSZMBMwe6ObTd8JBj24Aot07uDObPP9XsIzUGFPs5+JJ/M6oT4buxHv9X7BeY8KgOWDg/Z58GTC9Xq5FxTXOw9c3Cm6k5fPcjgbHbgAlvVG2tH1T3Oavoq6BlniZ+12n5u/2sDbOvasqoFg8x2Lnbcd1GdhSAhXN+7qMrAC4sA8sORJ6yHwD28z+Ft4fdv8UyqUDrDmCEBcpZ39kLS6aq9l4D2rLb/KYsFTPWdfbvh86vQu2s1K/K+zIjTsXIVQ9a59Egs4Y6sZfIA/EcSp/jEXv8BWcAhxaA+SVgSQAkGAMICcwVlNLlqTc9Gbv/HAA7MrL4+f1VlXwrUq7SvCoyGcrrWpGhuur2fNGYwM8YT67hT3s1LaZvqn5MLM0bzmHMmIFSgdFNj/mIBct63NhFZwEzDsBFgpDPeanNgATfCtGsX9TIKwNrg9tuVkhlng7TI/YArX1VkXKrEe1l2SynN1RCsFJsqnQv3UIMxhwIRjU5AGN9QUteVz3BUAvahuNgjC3HxLAND7nBp/cgONXF5wCz8xUDGgCjKPbvevlzcKUHH2ag6cnYzepYBB9Zi2FxDJdjoXJv1WDFiLJ6MKqKZUzoQFTfj2HmwTKcTpVWvcxHKm6kKgoORAEvVclPD6NdzLXpMT8IYNPcLV7yJGB2AVhYrAC4SNA5AxKM9ryDPE5fs6eeVKWGZ2M3S3MQfEyJUKV8L1ZpJXpVJ9pLilmlAxWkVJHKwIhjjD9TtVXVm1HdOy/pJiaMFRWM+bo0rWl4yM1N7oPhTJecC8wRgAttBjQWdBBGESwgSiV0Pb9DRgu0TY19N+M1mRKh8niqFx3rRDsLqjgl9yaGXT80vcL1wnE252PAZCzAHQCoiqoW3yYWFIt664fUpKaREr1NPakH6XkuOQ+YDwy4FMSwgU8GSRSz0UJx3Vx/5vFNbrs/EiLRY+v4ACITww6iJEodQKwBIyBRv9vwhKzUW6z66TUGEwhDS3ezqusAyNxnJn8xa1KRPSFts9YfFB/QDZcAm78CnDBT5U8rCqjfc3yh8Gn/hGd/MsKf1+QzYJ4891Jye13iy1cAE9cDJ+6FpYrEkidxDN3OtXR+FwBGMezoMmxJLOumAuD4J4rxJrfdH/XCoLGFVKiUbw+LAPQqWWaMMLrd6/+JycSIm85w9lOpt1j1MwAwFTiqAWEUxeYH5ENn/jInUVHeMXQ/f/jRePvCa4DhTwLHfBc4frGqqaNJzLPw6iZxV+HTplFGvZrXZT45N39+HW3TujlZv8D6fp8HRq8Dts9XIOR5YtakgBgdrrrt5Qsq8Ssd0BhQ4HMwmVitAWHAY/LbLDQNQDaTVJ8Q6W4qVB51OOqDZDPVB3TLOBepW5jmqaLbec3jGgBGMSxvvemDYkQ9GoKF1ShUCSKCqBeQrvmfVZPC1keBjXcCmw911tTJ8q5XgOLaQgA+x/OdWA2EGZ98gbjleTHdQHQN+2iwls3nK3/Zhj3VeQhovYzdxmArSwQgDRA3QiSCJUrTnjfl4KozRCSCCeYmt90EoJJbVCk/1+FiCwFZxLk4dRfLFia6x8LbYkD9v9cXtLG6+O4AYQRfrgPygVIcqyhTXcWFOJH8fh3rz7EKwnUArq8mcGwK2MCC1i7WY7Zenh56feHT/jE3yliE4TZncd636gPFCKWavGhcRx2J+cvs9MlSw0Ty3cCm+c7n0G0MExdW4BMIbTXE9UCynvyCCX+Ovm4gbByA/xisVgJPpXrzLj4EoRJjJIZrWHArS9iprK+KcefgiyB0XVKGjOmCmW9xhRVMUSyRFnNeFGEdI2q+/HFXclkp9WsAbgTG9wGj08CI64WxRk/OTDcUAvBHXSLQxcVCDMQSWbzv+1e7WVbz+k5w2tJtsbcCYV6WJY7hmAsDA7r1Sz3OgOgoM+KTOJbcjSI5yGIaNE1uuwlAAU/MF+tF5/0sIghVLdVdM2S0bSzHx2Mi+FTxXf8X925NC4BycK8QwfmgVX1LlcFiykEMcL2BndJJ7aQfijKfxLGDwAhByM7aC5U4qwPzNwufNnNuOH4VZaCPlPo2AahqFqoPVFc14ga2m+WEEL0cAz9kdPrOmMu8r1o/rTsXz7f9oswFs+jO6LAqkvC3Ggg5Fg6mwW03CUI6X12h8lyfcz3QHqr3DIl64DbqaQKc9mI87QXACD6vpJqY0EVxz2CEyCI5eMSGX2e7VtI5J4yTRyZhscrvt1nQuivOAaNLlYESwcySgiVbr37Bfd0/u31yEgg2FVaiPCeVOguqAfGov0iR0R9JABJ0bnwk9nMxw+fOh55EbgRhzozrBUA1polN9CLwok5HEEUQBjFMQB7D+j656PW+IrJ8O/bBCo4sGFdGejqiyYCx3mKe9/JtTiBvmI5OFiTisg9LtJFF7gZGDrUbHKs79+hyu5hSaUvh1foFr3r/6vZJCiXgCDwVVFJ7MVmRLsrGltuFCc68yFdACMDAflwR4QM3HPoKgIExt4gz42SuaQb8hBOE2oZmlu+KFlKR3QSssMJxDPWbbjpfLoJrxG8CYT8MKGZSVTCxYFTIb84nkCxCIPLDiby30gXFghaF4c2ReR466Uu2fvoFr3r/fKAEFxvpqMcd9yonIrkuK5LLV7MVCM+/uDJCyIC2J8a0z1iwqyESgMl15Sa33QKgmtPEBnp11mwuXgO70Ud4DHWzfgDYC3zBEOk7HlA6XKyHQzb8HgGoCSQLqsxorIy1Bxie7Wx0rFaf+wr9Xv32C+56/7HbJ5VHtRYT+GJrsehHcya57PyKAQk6+vBkBZPpjPEExlwU59awg3C24W6KBsC6tqHR+MidyVG3i3rdAnAsH2T093XT+zLr197MTA80h3SfsZP2UqpCrPQ46oF317VrpeiKXTJ9MhMLkgGdCacKG/mupV9w1/vnwyGgCDCKWzJe3lqsyzLWZWe6/kc/oKzgKH4jC7oolhdC4jiuzM0WPo+cPQ2AsX1obFCTO5Jzn566PwbReiwnfTWjI4KvDoh1juh+aT+WKSYD3i8Aql2rJk+VsVQly5kkddv2FvHT61icqO7Fr71/IkLNXOi0FQjV0046oBy6wZ922Q95ICqDEaL4XWw3COcf9Mw73DFB9AqE6wZAAS8XuzGQIDKf+oVkqxt00ttAc+YT0PJ9qRFSB8xoye5Xu1ZVeCSgCLbYLVNswoncHxoeLwCzBGjBNki/4BX3z9lXgUCyIIGmhova83cRgO5Te9yLgP3MfmsBS8xs8/U67ePQOqy9umBUruDchqo8sHSd3PMfT5ifo+ack8eFHI6QEcnT5GvdOnVdXof+ptJ+BVPWceiaRHA8Us/nkACo8mzqlqmWrbFDppT5A5UIZm7CPA2Vgm3QfsEd909kKIqB1qJAKCBG8ZstZz3xHOAAiwmpDIdng1maZQAkZzsHZ537YfQrwNyxoQ+HakrnS0h1mUA1C96TdJTmORyhC3oeqdwROi+GDhkFI6bYNrcNDEDeAkXwQizPRpmnIs3OdqZPSaRFUcbchHlgie6agq2kX7Dd/+d8lUJVXuUzk8ERmS+2vfd4uvN2VOV5rSwb0y3JhgIh9wJeN3YMQCIgR78Q+nDEVYBYZUrUpbXFnM7COSdf7N4IPvtDnT2BY/h8Chh10MXQeYGS+7GGjaQiABpuNIFiECnzdWJMIUHcazLptC7YivsF8/7FgLFMqpiQL5TuNbKfA/DC46rqqAbAwIKWK+timRUBEiNGsOQsyQm+Gpjd4n046hbT84KPuYjOmHHyp92gcgDS2OoIuVIeh/xyUkaVwyEWdLrewHE3uBUDcKIwnq40HpDXL+n3CzbaKdguel5VnFJl2awaghLQBTzteZ0cjLq2A2n0M6EPh2pC57Wg41poLzZsAZNso0Hw6eVR/J8bF9YjWGmVCpGKwQLBRCcrbiSxNLgVAxCF8XSl8YDHHFPW7xeFBRwv/rGqOKUBkODzqgdWPYAM53vTASMQu4Bx9J+69OHIF+N71F1O1gUB+AsBfFqKC+4Wi4BWX+CYgOTAU36wdMVNVKka3MoBWBhPxyiuko3xkSX9fvGMkqsDlzzHC1N6SQ4DoINOe7KelWWTheziObeKCdARApD1AdVnRH048gKUAmAEYi6Oh4DJV4VoGDWqjq4XLbO5o1jBoimEPhPJmwu9FvnTLgdgYTwd2wyXbMyRKen3i2eXXB245FlVYUpVxUpGiLtmGBlrTEhVUwV8dEkVKAq3MHJ1uzRbRx+OOgDWFX6MsXJU/36lJoEoA2AKvw8+uwTEDIBbStdOs8ddDsDCeDom7ZdszBIs6fcL9ror2C75US9IxJJsEsHdGFBil4yYuUwknofJgF4XcEUfjrz+X7fKo4EJJ//PkMORO6FrVjQMeL5kJhZMMXzLwNZCt1nzDFgYT8cQwpLt4hDON0i/X7ys5OrAJVe0S/ISgFY7j9ZvnQ7I3+lyqpYaL98CWp/N+nDkZdhi6bW8An1kP3fRTLKVWlwF6RZCH2L4zDDR0k1IqeTNb2OQSYNbOQMWxtMxeqtkY6I+ny9VEz6btfb7xc+XXB249AoXv85+tIBVgJJ6n4lf6oV+mfjdDJNMH0wAVFX90GMk1f5TxlS3Fggh92DyN0IORy5665KIfCktsl+K3VsGtpVOWOMiuDCerlSnjQ2rB+n3C+pIBdulz8wqonrNPLKgwKaC5B3s53qhXVq6oDNg6sOhqvqhEr3V2VNLBjmnSSNdrOLJ1zkAu6VPRjFcFz4fXDJ8i45hG94Gt3IGjOFYA8TTlQZ/qGH1oP1+8ZtlT1MAtHK8mQg25zOZUSCLIliWcbw8wfW5Ln04ssqnHX04euiCk6/3de66MPpuAQVZAEFkw2MKFw6a1wEL4+lSBvmAOMhD8vkOkFX77feLNw14YT/ssmc4A6oOdHBEkwXlgjH2k4Nal6wB4fIuX9LzZjAmorNeHMo5Tc0OewHwDTUh9HXxfGJsYkAbAAAgAElEQVS/uvCpoAcew6zBBrdyBlQwwoDxdLZWXLDFkHyF8xGE/fb7xR8XXByAAVC1oB18HQYIT+8uGfP75SCUs1o64he8v4j6cIQ+IqkPhxrBCHjdjBH6AblQkAeY1ondukSiELmsUPpjbyp7XuvDgAXxdNZVvWCLIfmKg6Bbhrjup98v3lVwcQLw8gqA5v9zC9jErutltg8gMxDWWMBaMVkmANWFyEV6R0uH2I1IzW7ypbkQOTP5f2ch9KsFkwp0kQlDAOmxzHpscGuGAQvi6VD4RgmAg/b7xZVlT5MATNXwqQc6KGwf2U2uGV2uzg3D4ua7fDnPwZcKgIdq9GaIBPZb0YdD7hgyIFWMXiH0eQ5vXS5HcMkc++9lz2t9GLAgns7KxxZsCkgdtN8vWD+vYDMAUpcja7lOR9eLVcIP4tcuob/3AOHCdW02VTX62ApB4Mv1v24gnPy9HiH03fJ366KYHYTHsgBBg1s5AxbG0+HLZaOp65i+ln6/YM5EwdYBwGj1cmUkE7+8THLNdAHhwrUOXtcrO/pwhF4cct2oN68BMDCfmsJM/n6PEPoYPp8bH3kCkbtjji2tJJA962YAWBBPZ0WBCrbYsFoOf9pDAiENk179fkuvf9nTXewKcBSjsn7ldonWbgQpx+26otaLIwAlfi2QQSJY3Yjy5i9dmsFM/oEDMM/Z7Uf0RiYUA7J+ToNbOQC3e0WBBm9qLad6HICG1ZK1XB5PoxnuOOIcxSXe/Of8xHV/P+FpwN47gKUpYHmuSve0pKZgCKSq5wqniWE1WZz/xouBm74KTMwBI17lVBXwtWSs+8/vL45Ff3vhpcAnvwos8d48DZX3M2hx9XIAnu0IIO0chu35AOgLL0yuG/jOmwbg028G/mNz1YWdETbm4I5BrFlov+EtD2wIo7l+Atg8D2xY7iw3V5diEqO54mnj6XdMAYcU+6gon7A3NSO2qFjlyZYDkAX6uD5Iam44YaUfVNDNxaJcLIPXcGGpfi6PnZdVD1wPspQBX/wl4OaNwN6Jqg+xwrxslcVFuYJblehkcYYZGPS3L20BxueBcS8nwg5H5kZkx6TQSbXFZcCQKadx5Cz5mPurAFxrRaa17pAR2PFC+ElSHKQ/0QjQcgCyGyM9v3SnsDBRJgL6msWCf6IfWeUJac8UFlpY8500DcCfvgb43hiwZwyYVhd2D/VSrKGAmIDnBkiafEcN9cprHgKMzgNjS1V7rRjRlceyrqif6KAkMgXIM+6tAnDl+zSL36O9+U8p9jGHQo285/2XA/AnXeNnKAorDXH/AILwbSvLEz6Ql2+cAf/3XcCdw8DkKHBwpOpFbE2wadzIdyh3jjNQirYWEwYq+/zJwMh8pf+xKNSwM6DZMmzNRRbM2K+2Ii6TlFrAWfd5V3i/F7IgT2LBF5LbIdkqxLPWvtzlAGQ3RpU3Y7AiixMxLOUB2t7pKQ8M0qCTnp8HkojJgNqaMEJesQv4AR3Iw8DB4QqAs+6SWRiqgJgY0HVDAdBA4Ba4xN7ndlSFAAjAYX4IPO5dBDMAdS2i+Jx7XTf1eEdTDfgAQnR34p/wQkRmjNAoByDT/ugFphXAmjAEn8qaPQAgZCs0lSckCNmVigEbFMsPBBE3DcBX7gLuawH7hoAD7EM8DMw48AhATrjtQwiXoqkTEwWd7LOneXNCbz6Tiq/TInb2M8ZzIFrTQbGiy92oGz7pXl/7jvdAJnb2470IbB3T77Sai+hyAP5voTqW6sKwFAc/TAdc5+3dvcsTrvPVYSK4SQb8xV3+6IaAqSHg0FDVh3iOIFTIFxtit9orL5Z/LD1Q4s+B8OnHVuXwhhdd5DoLGsgCCJ04q66X/Ju/vSaeAxDPvbdtmdtKDV90gVEPIl/xySkviOhmAEjrlzSkwj40SlQZYZ39I+8JBMx8mZryhOsKwqYB+KpdVSDFvhYwPVR9BD7uyX4SwRS59nNI+bRck/DzJ05v12M0nY8fAk8iWL5BB5qASPGRCi8EVjzv3mqpkC9ACrrwhKukB67GhpqRRowQMqCiYbj8oOoHeUWpdYIBAUj8c8WjrjyhNIJ1unzjDPjqXdUjJAAP8TMEzLYq9uOHICQALe/EwWe+QgddAqCzzD8+vgIgg0qp+5nYjaDzCgjmnCYone0klqP4JSgvvK+6LoFPoFMlkPGh+0rPWta4RHTNJJQz4M8EAGoNTPVU8opS64CC9zoAWTFChcq7lCdch6s3L4J/2QFIEBKA1P9mHIBmhPh3Ai354RyAAmWsR/PRs6vOR8Z8FMPS97yxtIlYgVB/I7jC0rIKSfLXF1EEB+BFFjQ3jCLA49OWsRTTEPzvzQEwry7VrZ5KwzAQAPssT9jw1dcHgCrORQCS/bgn+1HsCYQSveaHkzvGv1scgU/6R55Y1YIxhvOm1EZekQWl8wVDxJgwc88QiJc6AKX/meHDawX9z16M/Em7bO8Q08GBP/jEkAEVjMBoAFWXUjRA3KtNwOBXW3EkAZhrALktpC6lKtTV4OU7RHB+3kHWgv/zrnYZl2kCkF4uF8MGQGc+MqEYUCA0n1tkwxbw4ScHAHr71Q7W4++c8czwcBAmHVB/c7Bcek9b3FuwbdD/kjGWgzJjQ3thGmVA3jhfOyU+RxB6FamOFp8NrhsTgLy8Cpzm5QlVptAU+6CiNgXCaIQ0BcDYV8b0P4pi30vfIxD5+w72C9aliegW8MHzqrmh/meuFhYi0pKbs6D9fsh/n1XFMrYMbPgUByCZz6J+uEknDA9AornWFRb01WZEsACoHhOqyC7wdetT0QAK2KqOb5MCUvPyhLE0oQxzqaYNXL5xBvyVXe12vByLADjXAvgxBvSPGFGMIjCmJbEW8HfntxtQmxT0cmxp9UPAdKAZ1upA6EB7qgDo6oCUxXRtPVSpAwJpnUhuxAqWCCYK1MBExZljY5S8SYr+pxAFAuBayhNG26jw8usCQLX0SAAkwwcAEngyQizaXoziIli+Oe7/9kJvNk1LmBMe9ECO3XRB7aPeF0EYHNVPdT8gj016YBcWtBfBVYJuz7mF7VgGY/pO8f5WdQ1/7U67nIKNS7j0wIbDPFZsyNHHY7od/xdlEHj8CcC3TgCWHgGAPSxiSdt4312u/8SPAl8/Dlh4pDeZW2PD4J1c9+uyDaIDkgEJQKnTfG/N8nUAmu5HUnMW5ARbPfEuIHy/ACjRK7FL5pOR4RaxgTHofKl8r/S1ZWBnAGDKefbn3AFIPRPXB7sFiVQimKVgGdl5ooNwLQ1/1U+DQGSXQ9r5Evy1q9rZbP1lGQDZsPpzI8APHgXgod7qUx11YtBbFzC+/C+BL7SAWwhgdoLkONSLqy5oLogYft3ZI1F7EAC+phsAnekokhP4HIzml/PvthQWmPB9LJ7jxkcSr14jWj4/0wFlgJD5eoDw6fe4DzAYPHokWhHJZ3TFSkn4h7YOSOBwEtiMTv1aY0uktFYTmI2/43EMQmCuAJmUE0gmVD8EFdPpdnxhVhqzDr8F4NMtYM9Jfg98EVTeNu9Q2OFZBX7vr9vtgm/lcezczZ61ZNN8DCvilYCdPXqNDQpAlfGTKm0M6AA0PTAyoMSx64cRfPQHXsniOTI+fEWDFGp+Qb9BeySRBV2kpl0QxxGAlHDmkI56X6z+EP7UDYSdRgh/IouwIZ36lHabBE0GJ0r10Rgb/xA/tt/j/6aMAf+7R4CxzuBXWRGULwBfIrY6UNfpvLae7n0I+LO/reoLMqiVMbW38oUhkNkQIzZO7tIweGePcmWlAFTjAYHPVGwXxWoLYblEDkLuTT8MDPhXLJ4jALpaJB+ggU6xfgJknT7IKXIQXh4Y0FZCog+wxiUTwSkXUbSMV1rB/A31OXWuFpPUda/mRHKi1e6U+hA7Zq7l+A+UAfDtHg/LrptkQpZ727cRWOL9542Pa3rOvuOqagUltgtmJM08j4/PILbIDKz6w5PAHsbraTnMGdZWIwIzxIfeK0rn578J3LAVuH8CODRahV/FFQ/1IumIvXP1QudNfyNT8oVqcHviPcBd48A0g2RDuoDqHdb2SalZAdG9dnfDkAE0gXnH5ijWCDbKCq5/MRiV0QD8HgHQ63jG0hdsLGxA3x9Bw1Asli7hO3BwApgng/Gjvq01IHrXJ7q3Cz7E++YziF2rs1ZLZ+8H9jJsSoECWXj6igmR87aLgfbGq4GvbgLu2gjsHwdmCEIPSI1h+SkCRjpfUC3iNWcpoRrcnrYbuGsUOMBo7QBCxSTG/igxVcBIVGPWM1h1JYQPnyKNExGZMDIJ9b66eEBGxPDY1Y5nv+GCjfGAxD+DDpiawphABWZPjwNzNLAEIH4XCH0M7/5c93bBfI8Yk2cgVAdvdT10ifDkBWC/r9lGH51NhIsnsWHOfPmEUKT94WeAG8eAO8aAfWPAwVEHISNQlKQUglJjJExqC+H6Nq93kOpUg9szbwLuHa66QzFWkaFieXxi6hgVHOMCYGRuJ+5V4jYJIDKI9KlsAvFDq8QDrnb8NWVPh9EwdFkQ79TlSMIsN0Mi5s9MoOGno4U6f3YAvefL7Y7rvdoFLxOANSA8f7xSgWmd0kCQbmZ6mTLEnJ0UqWLhUkxlrBn6n3wWuGkYuGukCsufGq2iojnRFpafsU7MDxErJuZhYCsJosHtWTcBe1oeq+hxigJgXBrMmTBPnJKLrr+VED54ibHYvZos8sO+DNcrHrDX8YVVyglAKud0LtMjFPtNMz6QLDY7VomLJd671AEH4Xu+3g7nWq28ISvX58/hguOBg8vtFQvV/hEzxfqOevuTfpjri8vAWz8L3NYCfjBc6ZYHmBcitnFd06pxyb8W4gPlgonBqffTtdTg9pybqiVNBssyUsdUD7eGO9amnf3sXtxQipl7Wg/sD4A8AwHIyZMYky50Tp/xgN2OL8y051qw2hXzwRCEdT2nmck1RxHG+w5jeO9NFQBpR6ldMIMXlFWgVndqF2dVFsJzuOgRwMElB6DcI6rznemD0RnbwQiSRS3g7Z+tVIl7PC9kahiYZm6IizuLigliT/VoUog+p8P9l3wJ7qGEanB77k3VczroUToWLCsABud4ypaLCUoxf9i/9w9ADiICULrQRWuIB6w7nuZrwaZwLBGwClSqSyz3AhHbaRGEFGOmC44D72UVgjW2C2Z4lIF4ArjodODQcqUGqAxfcpG4mJVuVqcL5tbs2z/veV0tYK/nhTAqesYNHdO5PCJZos+WuzxHJIViuXFyJxupNLg976ZK2lizUKodilGUgzyGhokF8yw5Mf+qRkjdjfuDtwkkm7DTkNaBaQ2ox1q3eMD8+B6O3H6em8Kx1Ccx9ptWl9iYIUAAWrI3I3nHgPdOtsO5eOuxXXBdj0V1vOL/so3Cxef60tlSpYwveKf0pAu6ohfdJ8k4CUqgvr5jV6VGTBKALeCAh+VbZLTnh5gu6D44A6H8cVlkNK95O1WkBrfn31R5HSy+JCwPplAxRegE/2T+AloGncNmbQyogUQx/KwB4gHj8YWNTwRAOW0FIIIndoqNkTAxz/bd09XDGLBdMM6/pLKi5whAX60gCK2ujxzEAqGL2pQ1Jis5AJEAFHvTujYAKjRf+SEugm1d2COQLU/DAwQ44caEw8AtZzSIPgAvuKkdrWMM6M7xCMBoiBn4YpCE2NCfxWAA5MEuwvCCEICwlnhAHV+YORfDsWJGgPpMKwg1b9QpFnzHbD2BK2JGul9s8KkYW17vLALQRTCBpzXZpS4gtCXXMAkduuAy8E7PijPWprXJ5CR38ygw1fJDohh2BlRAgq2OeN7uTWc1D0AFNtmL54ESBsCaJcLkDajxj5ZXRiCIGA0waDwgjy8sk5+HY+X9ppUbJSCp6TnFCMXwny1WAFQ8rUAc2wUrRL6mXTAefWnFfnz3FpbagQKLAqAzoZjAKkkpXkNO5GCEvOMLFXOnnC4xIKOjnQGNdWSM+GqHQGd7JSsxUf+JzQLwhTdV4je1nQvr1MkPGtlf9yP2Dy+gAqZ6rQytfvdHSDxgLwBF8AmAYjHWluEDiKGMiqOVvtejXTBOuRSYJwDJAARgZAGWL9Nk+IM3SzgTydE4eec1nZHbtDaNAf1Dpd/SMx2END6kD0oXtFhBXmcY+OY6AFChnKnzl7NfdMR3qCAae2B+VVMYXASvDs3/X/zHJZcB84vuiqABEo0QPnhnwqQLyRURmZBPytnwHde0M1vN2lR6picoKULaxHDIEdHkW2iWg4/7b5zb7DSQAVd0/griV2JYojfpwRGEYsGBrOBmx/OgP5sAKANkcbFzNWTRnX/GSGImMYH/LYlk+gGvdT+bW+SWH+Ig1GqL5QeTtR2EYj5LVHfjw/ZDwL8yJ6TB7UU3VVoTjTYxYDK+Ivv7dzNAZIxpZSiU8jjKgIWTcykZkBawDBBnQdMr5QeTKI5iWCB09AmEb7+ucnOQ/aTPWn6wuzyS4u+R0Ob6CUGqJpIDA97AdqINbgRgBJ69CG4Jp6q/ckjXqB/RKla4WpkO2ODgHoynigA0JiLwaNiEt95YQKJ4FRC+7brKzRH9jZbN6iJYuSHm9I5iOAOhHNJfZkh+gxsBKPbLu3+JgaWDdojhMO5kkDWSlNTg4B6MpyIAjf3IggJgMD4MCARjFMU9QCgAykhSKnUCYHB9JB0wy5aTRUxmup4h+Q1uAmDs+hpXgFLnB6ULONOn5xACNJqxghsc3IPxVBGAiQG9aLeilWUJW1FvVXEN0TKp1C6At19TMSCBpz1dHtT/JH7N9yaxp6QkF73KBxYIr10nAMproB44qQGTj6sjUrtOFPtLeFQHLES9AdDFrq1E6M13MaxVCTNAXNFThIylLcor40zxtgDAPKuVwDMrOKw+SBTbtR2MND7sZwC7Qvm4wqHa4T/uIrhb+7n0EgbQdTijoyg+agWXT8llDsAFWr/B8qP1K7bT0pvtVwHhW6+t2C/m8svvZlawi2CKe37nhFtapkDnILRqBQA+v04AjMyn79EIkXO/DnzyCBwVweX4wxs9B4rRZgyPVFqykgDd+5JSpBU5r0vHyHz+jsc3ub0KABsZMCyQgeExKyFPVIz3lmcM6OfPAGCADYPE67Jfs6h7G0o+xvi7oyK4cLZfOgpsXwC2Lq9MwuuVERonKn4nSJrcXnQKcM7dwMMXgYcsVxkSebJgzOWPqdB1ad2f3gpsnwK2LXWeR9m3danUIV1lBSCPArBwtp+7DThuBti6UDWDmWA/DvXk8LRptfPtNUlihYZTOPCi04GH3wFsnwGOW6iAs5n3GeJJ+KLoE+9VDClQ8R6vOQHYegDYwuY3S6H/iJ8jb11ck0q9Qhoc9QMWgPBZJwFbpoFN88DGRWBiqQIgWyJY3lPozaGJ1KTEPh36zpTkJrcXPRE44S7g+Cng2DlgyyKwaclfFoIwvCwx9Zn3Q1DmIPx/2/sSaMuusszvjfXq1ZRUElJkKsBEGQyYhJCBSkUqAW1tsBdpuxEVaBzowXZqe1g90G2LotjQdmMjKqtBxQERdAWUAkUlZNBGkQRNyIAEMAkxpFKpqjfUG3t9//m/c/+737njPq9uVeqcte66b7jnnn32/s6///3v//++Tz0dmD0KzC4DM6vAFpd/0L3Gh6yTDgnvLwKzAWDGiH/ThcC2OWDrErB1pRgQisIQhAa+AED+HEEY6uNLyrRnZLSl6tSbrgLOeBQ44yiw8ziwfaV4UGbdegmA5QMTLFlqsfn7XecDW+eAmePAltXiXnkuZSBkRcm4UGXtU2uo3xsAZgz6y54JzMwDWzkgBOAqMMVBCSAUObh8QuN/CiTgcWAuyWhL1amvvBbY+VgxbW477paa7gIBqCnUrbUBiQuhAKDUot13IbBlDtiyBEyvtO5VDxvvVfxW/JkWNFrCeK8NAGsY7BsvKQC4hQCkJNaKy2LRIsg6SJ3IQSe1onKKC2CsOYMeN+0Dtj0ObDsGbFsEZmWp5S74g2Ir2uA22BScAJGA+dJFwPQ8ML0ETAUAkgDTPq9zdK/+sMWpPF19NxYwA4g3PtsHxAE4SQC6FdSgmGWRRIJLZJll8EGKjHiX1jwaN10HzD4BbD0GzC4WrsKMW2pNobZoCu6CLCDfCTqzgg6sr+wFphaAKQfgZHKvpRSYg7HN5XCL2AbAZwPrZGaj6ippXhgn0kqmU1woxnHedg5AATuWHig2FE1uVRwoxoX+Wcbg89S3AqCKPONcCi8oPtVP+9++G3j+oSK2xRBFDElUxbTS+3nvc4FpDsjxllXQoJg8FgdCQoGJJTTicLcQ6vPL6wbg9cDM4cJv27oAzFA5ky9/UOSvmg8oP86n0dICBn25JwjARWDSAUgBHN6vfdbv10AbARh8X91vDM2ss+NvAECKPVLCsHoyUgRqrlbnRwB933OBc+4DXrIC0IEmiLnE75di8HsyAcjzWUVGUi6uICMpVwwJVMXdeOk3XAxc+Hng+vV2esAYw+sWoP31r3eLcLwQBeQUrEHh4Jo2h4vDmJPuAyMLGAeEn7uqbgB+I7DlSWBGCwe31Gb9aL20kGDb/EGRxY6WTz8f2wtM8l4pgL1SgM8esHCvsuylME4nn9cfQLtldg6TZ0kUKorAfij23vAPCmqp3fcCl60XFINid1PlZrf41/dnApB6wSQjutUfIDJR8CGIQOwWEH7DywpKrWc8CFzqRLHkVYrB2jS2FQH5vkuBycXCAlIUUAAkCM2iRBA6+ARCe7DjYmQduLYTleiQ/XTTS4DpI+6nLhZW2nzVCEBaMLd+soIGqjD1ampdugiYWCpeBKA9bBJC9ActAk8LES26SqsftInLZ44dQif4Igdhym5WLrPDyuYH/7HTCNwDnPko8LXrBccjQaioe6BiKad3+QY/MGTH6rS3OBvCnQDuAIyqhiDkQ9RX+29yE3on8IwjxQPI8zkTiApGU3oVkD/4fGDieAuAdMw5MFQjEgg1DYsUku+a3uI0TGBfV7PotwHwaOEmbHEATvuDIutni6UAQoFRIFRYhfe/dhEw7tbe9Of0Si1g8HkrwRcevDajz07gIJ7n05rYyWIpb4ya/7vv8PRdFpj/LXDmkQLAnA4jCCOlTBRN/rFMAJKgkkVHpGUjySSBSFeg7/azqk8EgbSEq8UDRACLKDXSyaQ7Br//DcA4LSCtwnKhTEkQcmAIQhtM+Uaajl0uS9NatITXWzpzfcdNB4DpY+6nBgDaCtanYLN6fCj4u1ay0QIqtML/EYC61wSA9tAJeP6eWsAoDysFpg1eB0HIQRCIIkVeCqQf/05P3WCB+UPA+CPAzvmCaFWDKEuYcl1yMN+Y2dckqGTeHPEvvWDSNhOAfbefX0A6rS8CUw8X9066bFIfdqMHJID++DJgLACQumyc3gyAEYRRKFCLD1eu5ODLF6QvXedx0w3A1BwwxdAJLTXjd8seQnGrZ9bPFxLyA7WIKON63tYtCQBN/sv9QPm6BkLp0vl9t/m6ietR6fbyBA4gnXtORwRRpNnTtPpW6gWLH83lKqcOFTEnDiKtoHwy8RNFhrefyeztbnrBfbWfgttsP+kIyO32ELD1cHHvInrlvWs6TsnB7qAUlg/suFtAWkE55zYQ0QpqcALoNCXTEt7A3KoaDwGQfqoAOEUBa7fUbKctltwCajVbxvSiyvoasM0BaBKwwdKb9fN7NfcqBWGiSWykWXER0umeacUEonQgCKRfIgDFjya5yq8Wfsfs8dYgiuMxgpAg/vnMzu6mF0z6Zj5APdvPQec0TEosnvQosGOhaLuIYvnwEYSithE52F1XFAA0p5yigD4otCqygFKnpHUpLYP0OcKURYv6Mj4MNR433QhM0gL6QongawOg+6rl9CswKoSkEIxPyTsuAPigCYBmAXVfYcVf+n0SRYw6dP1YwNgHsgSajiJP429RrpWOM6cxDiJB6NINM4w7LbUGMQUwB/M9mZ3dSy+YVG0EoBiDBST5ddZ+PkCsAiIlQZDa3LVatJ0WXG2PbL98AB+4omB3oP/HgTUhmGgBfRqWf2TTrUSjExDSP/qWzQDgfAFAWyzR8rkFtDAKX75jo6nUguZxZ8NByHbvvqBQ36T1swcsBaBAGGRg40Ir+rt9WUDhQ5ZAU7Es2e9LLzglqHRxNkbeuW+oQRRls5jaMjnK0a9ecNf2R4LAwO829kQB3LTtEYQPUwzQAWgW0AGo8AQH0ljp/V17pm0KRcEifGuNOnocO1rACQbKPXhs8TtNwVr5uh+n6Zf3wDgu29g2FdMtOc8B6PdpFj08ZFrplw+ZA5FTvAQQ0/BT36FPDkRqBT9Jag7xYlQItY0f88j78sZzCcKPZlrAQfSCK9uvB4h577SCotUiEJ8opq8IQFl/PUBPEoBLxbRE62LSqG4dFB8r5bHcOtiOQSqT5T7RKzYDgJx+BUCCTxZQCwhaQc9oKcEnEBKknj5FsJ1LAPo9xoWWPWDy+6IIoqbeaO0VA+zHB0zxIQDKkn1GgtXiRxMIAx0Vn0Db+lkuFjLRCt5WEwD71Qvu2H5OfekD5FaciQay/GIbFgBXriwAyGmJADR1ck3DwTE3TQ4B0LetzBJErTYAr2BBSI3HTS8tLKBZPo/fWQDZp197Z3scjGb5BDp/L3+njMweB6B83Gj9wj3atOsPWin9WgXCFlVO/3ctf4iD8XkBkH5USlAZlNPZAQqARr5vxu1yjmH0givbX0UQKI63o0Wun/xHuR8E4VnPK5JQLd4VNttTBvK2uoiKOUf/f+GjwMNBh0NMV6J0c0NpcRv7mrYv3kh8/uHxYp+bVpwLp3R7sts2YzouSq3KGa+q7+x7Co4nazAerRKsVlV1QitF59dyyFZaYY0HMu9mWL3gtvZXMbymBIFMZ1ov2h0B+LTLisxgW+Eq5uU92iZ72ud9vvR+4JFp4NjkRh2ONi0OB1/UBCkvEYRhfuNs4OmhhiPKnFQlx6aAjMnSXJUAACAASURBVPjmz1w41nnwO4cCIBvBwZgTAOUHRq3gyDExD4zRGVYEnpm5LqmQc0M5esFt7acFl0SlHiBxuTkYxxdaihUC4QVXFu5FCUD5QtJl85sjGA0ziQxqeu/fem+hw0F2fLLQGxFlYMRvo7v1WmIVtpt1DFkXvOR7LwJ2HSkyoZmEypoVVe8p7b6qEMnidGG/Vl/L2aPOIwuA1pAIQE3DAmFa4j9f7CPaFpCHKujr5xzZesGdHqAqKz5X+FLRAl58le+jui+kTBALMcgZ73CDBkpN2/7+bfcWOhwUyCEAjQTcAVhKdjkPc2RajewKyu/n1//qJcA2uhBMRGXQOcn9U6JIOjXHQqSYOsVoQp1HNgAvz8yny80H5PVz9H6RqVd849WtXQ/zA0Ow2ayGLJ474L0G79vvbulwkJi8BGCg4S01SKqofoNvSIC+5zkhFUupV8rUTpJN06KpaBkFQm5M1HlkA3AyM5/u9Zl38zrk6f0iU6/4hmscgK5ISUtCTowyDqb7UxwsqFJW3fo/vbuIBJEZ1YRgyHwQKNi0KEl1OKTCZJdxtPDn//v8ooaDaVgqFyiTD2IKfcjZS4Fo+7g+HXOPv84jG4DIzKfLzQf8KVfI/FNKrQ6h94tfz+vOA9cGAAbrpylY2SDlVTTt+uCnV3/V3a7DQQAysJAwobZJgUXi78Qayhd812WeiOAZzEyUiAkHMeu5BF5FwZQAWLPwknkLQy9CrPMy8+lIHZFzvN3T+YbV+8X7c64OHHix74V6zIxB+RJ0wQ+UU992tYoFy3fcXcTDxQkoPsCUhFIczKVCegSg5B8A/PILN9ZwxBSxtiKiUAOi7JW0dLTustF8AGbm0/1o3vjjnSGdj+lYlGwdRO8XN+c1wABIoHk6k61yuSCJITq3jDY9Vx0BqK++uwAfX6JkI/hME0SC1EGguiQ+isqcQRLrF6/0jO2w+6FMnZhyZYsQ1W50qOHgPX1NXndtODsfgMwHzMin+0+ZN0S9YOllMzWfLwKQSS396P3iY3kNOLDPM1y065H4gOW3p4uTDkB8zWdb7FgbdDhEgJkCUDRvogTmd/vPv3BVAUBuvylNzAAYi4hisVQnEHoIqWblrxqm4Mx8ujfljT+YjsWBYgIOc0oJPsq1slCpH71fKybJOEoAuuVTRSCnYlmU6P/Z4iSJEcbLv+Yu9/1EAh7JKEXDKxq4ChUiKymRbwjgHdcUWTARgLYXHSr2LOU+BV7MVwzxwOfkOWybYAGZD5iRT0edjpxD6VhcOQ6j94tP51wdOHBdMeXa9OqWRcmWXA1XLUIUH6zyCwlAs3z+YBkfs1u+VIejJEF3ckrjI9T0y/aMA2+/tgAg08VURKT8vbKMUgAMIGzzAcOi5HknHQAz8+l+MW/829KxhtH7tTz+jIMAJPCYMULAWd6fvi+EY9ouoZBM/Kx/4LUBgFLgNC5o16FrE8JJVJgkiFhaQQBv3+dVbMrWVsC8UxFRkjjaVsW2DtRdOJ/vAyohVYK7A+bTvTdj8HlqTMcaRu/XxHkzjgNkIOWuDr8jnYYDKDutgpUhra0uAlAyCCUAK8BXcjBXgLCk/h0D/hcByDxFAdAzoFUqUBYRJTUcMWdPP7ONL6i5bLQeALJRQ+bT/W7G4AuAOXq/lsGdcRgAY+glLkYclJVTsa6ptCX3uQjAKINQstFrAZKIwWxQIhIJuovB/Nx+r2LzFCwlj8Y0evl/MYk0kieVtcvrwGUnHQCVjjVkPl3mItQsIPuElx9G79dOzDgMgGkAWlNyBJn8xKprBRC+zgEo4LWRgcdVcOCjjlNvmx84DrzNAahaFZWLygKWxUNibIhTcPD9BMLLa65bzreAMSGVoXvJ/Cgh1WUfO+XTZS5CDYDs9GH1fnOrIDcAkABTTDCCLYK0Cwi/586WcKJUiEpC8CCBYDsiiSplqUIUmOjf+o2tIiKVUJbgU5uSWl4DWwX4+PcXnrQATBNS+8yny1yEopdcay+930y5YhgAg+9n2OoUeI5TdQer+32fdhmGoOBZanBo+g1yEKU4dYgFSvqB//vZBIBt9RshkTbW8ZZZ2hUgvDL3iU3uux4LSBM0ZD7dPRnTH08VAIfV+2XAOucQAMuVcKfFSD/+IAABsEoGwYAoHZIKEEYxRIHwLS8pUuhjFVs6/ZZhIVWyxVKBBIRXnbQATBNS+8ynI4tBzkEACv+chlUVIKE/5cRGsWmlKfIzudc3APLQSlg3E2OCyVRc1kpU3DgBmKoQsWtlBcswjPu+nfTYtBL+GQdgOf16GCZW6pXlBCqWSgqJypoOAFfXXDifbwFJLvi5HAjlnUsiIe6AjOp4iQNQHRlT2PlgJCUbbc2s+v/hFwFb/q7gm6HlYpBbmTV2sscQyy/qFBj2v0/cAdz/HGD7NDA1AUyOOU+1CwWOewNjKj6/O03F1/WuugW4/XJgfBoYmwDGdH7IxB5kLPIB+I8AfNwZgga5ck2fJbEm8V9zNWPfrasbgMuPAcuseJ8Exsb9FdBhA+7gaQNKB6TfcgCYug+YJT+g89aoBDMmIMScP12uTKj13uDv8zsKig/uJ1uQOsnojm3qB5P5ACRBH3OhPuzzRN9DV88HqQLEWPJnvTy5nm/t/1s4BcuSpRZtGAu4fi+wtBVYEyccrYwn6hF8/FkJp9bKxAKVFsn/d8urgbHPA9NPOEOWl4+2cfoFHhfVrJTZPKHSj5daOtup6JyCpPx8rHWRVQ7WOlrYCMx8AHIzlxkALPD9c0VB+x/A3E/+E2fUYHXdF7KTGwdvTd0AHP9r4PgWYG0KWBdfsBdsMPfPrKKsoL9XAVLAvO2fFylCE4cKliyrDVZNcGS1CqEYhWFiAZV+XntaURdTLmpCEbpchTYLqi6NrkMCzLzt5Xc4HwyJmmkJ+Z73jQOh4NWeDUZiK1K08f0EXt7CMHVawIk7gaVpYJUA9LI1Ao8bzKX1cytoFtFfpdCIWz7rgzHgth8u0oPGDwETc8CEMySUzFaikgtlpW1Ta8JqNba7lVljSRgW+Q6ZP/57WQvj6fydBjXfAjKbgEvMLwWCvhNoipgNpnQshlS4IGFWzIk6ylWwAz93ETLxGWB5ClidLABoIOS7pmGfG+33YAG5mND0G8F4678vkiPJczNOAC4UyQm2N8w94kirFlfIAl7i402d6dbPWWAtrsjOFiuCvAJZOQE0pHTFsckHYDeCvhNgipQNxoAz8/8IPr5nbvH2jd+6AThJAE4AqwTdZKEBLDoDgU4+YVkPHIBoPwareOt/BkDexsMFAFnbzNJYm0IDnVwbt4uyur1kwL7Tp+iZM/08WT9Rc7DHUmuYTr/x+6o4ovvu9fjBbgR9JyA+omwwxvZI5ULg6ZW7y9FPf9QNwKm/CgCcKABovh8ByVy/UCtJq2f+X1yYJPGU27lIZLbuEWDsWBHesZeDz4iURLUWa1TE47LqK12fZmd3OXidFctqm92KatVs1jAEsNv6sdymaa2g8+xUL4I+Pn2beCgbLGWHI/h8G3oTr45iK86POlbBU9yKI/AcfLR+ouQwH9BfmmbLlTHboOnZ/T9+5vaf8FUaAThXsFOQ45mUcgZCWTAxe0UQ+urYMO1/37GtxQmoLCBtRSp30LrDp2SFdzYMgk/R+VNwvwR9mwQDsaspGSfJgYDYNTbp8psCQFJxEIBkQjDrxt8dXCUIY+COH5MVFPi8SOn2n/QYLZ9Gp0cxANIP5IvAkzVzxivRydnKNzBa8fddM84b6AFyAriMF2pajk9kYIeoClXmA3AQgr5NQEHMBqMVFMNaIOayNRL/vhlH3RZwmhbQQUcAasrVVGz4EtjCu/3dfb/ID3PbT7uKAZ/MhcIC0vqRTo4W0IBIEAmEtFwCYqjW03bcmdwBYeoWgetUbrR8snrloiR2drpACf+rD4D9EvTVjIJu7HBV+781X752Czj9lwUZkTEgcPoNPp5Nv4oBRhCG6dd+1DkMz1JIhR1BAHJ7zwqO3fIRRM5tmDK5CoQKsSgOeBYBKFZULTqcB9r6Ni5KYmd3WKDUA0BlhNLM8EbT1QBXBU72aI5ZjUcVOxz7WLkQ8d37vsart/uA6RcPsxNSAtAXHDYNC1AEpf9s01kKwuBwGU7HgVt/1jtD1e60fgQigSe/j5bQp+KYpGB+H62jT7P8/ZypBIC8Dhcx8eY9wF015abhmnoAyJ5WSrKeNgKO9SHxnT/LSasJBim5lRjWBEIVeROInKL1qunybRawLgASdEy74qjaNNzJCgqEEYzBGvK0297mAFSHEIB6ebKDgc8J1ksmV8t29f1en6L5v6cxIK5iK6Xne/5jCTiFcTqVn/r/tWDPWwXnEPTVgIKUHU7ljASawKefIwDpMdRxRB+wFgD+RREDJABpwSzz2c0LfxczVjkVKwaYgtBBezu3SvX08d39P5uO3QKahXMQciourZRAGKZWar/YZ1xXRPe8wQr2AUK7TvbOVTZBXx4MBECRnConUBSFEXT6mf/TK+/qmzAF/0UBOPqBZYF52HrTFCw2LH5G8UCzJEko5nZqmRnPh/uCXmpnVpDTsIPPwKApOaSA2QLDLSHf97iPx0tpISLfz7bl4iFfsUsnj+HZWEeOYDCDnDmCvZkEgedcCjxGseIhBYt3vx049HwMLRh8gA9gh2MoH9ABqKJzxf0McO7XlSAU4HzhYYFq+5D7hwBu/98OQLlIBCKnW39SlXNY+nqeiq2dkQg+gnGPb9/ZpT0lq6MV5D96gLCwgDmCwbdnCvZmCgY/dxy47xxg5SWuUjigYPHFbwA+fyGwfr2rXrMvPB+vp3L3GHCgi9JOHQCkRVPppeUBigXLFymyejYTB4YsgfA20ofRAlYB0FfAlvQqP0/TsX5PLOB5DNu471cmIwiBaRww/F01J+mz2pqChxUMZvpJlmBv3iTocsW4dzewfhkGFix+2febXDAeJO/YEILBB7pU1g8LQFo98QASVGYNQ6DZfEG3fnEqrgLhbf/HV15anbkFNCvohWSl9XPQ2XTM/2s3I4DwPIZwBEDfgitH0Ek6N6x+u/iD7T4g/YdBBYPpWHEaHlqwNw+AQa4Yj54JrJO+aQDB4pt+oCAyYvOPEIQDCgYfeF/9U3AbAMX7ItAlVtAspKZdz5SOlvA2pstxjES3wJ+92NgAGK2gwi78QoVfEhBeQACqNNP1RdoA18kKdgDhxkUI/zKIYDCnqyzB3jwAJnLFOEIW7QEEi1/1Y21ywVglCAcQDD5/Efj7M4CVrZ5AKlkhxeQUaxBI4nvFzxf8IfCVC4HV7cC6ZEX5nen3VX1vAGLZq8ysrvHY+QBwbGfI2E6JpLvdX+ksthpUvQrmX/sVDGZVUJZgb17vJHLFeGQcmCdVb5+Cxd/5xjZ6QzzMLOQBBIOfTV2Ps4HFHQ7CLQUQmUrV0rgKJMsCjsxGAqTn/hzw0EXA4tnAyg5gbTYBorKkUyLnkB9YVhTxu+kT13iccwtwdBewPAus+b2ar9xJAafqfgMQO4dh+J9+BHe5gqZZZzYok1JJUcpaR6bp93P+W/N6p0KuGIemgEWKgPQhWPxdP7NBLhiHKYHUp2DwpZ8rLOD8tmJQVplOLxAqmbRKC6EDYC7/CeCRPcCx3cDSrsISrs04CPm9ArZk55UvKAspYLqPaPdR4/H0g8DRHcDyVr/X6VabLHk2PhjpPVZY7d5xwF6CwS9y/4LbbVyQsEKIufGiKe0p2JvXOx3kinF0GjhOQY+oNRtljji9TQPf/fOV9IZY4Gq4D8Hgy/4W+Oo2YG5bUUy04vUcLCqSJVRWszJbNgxSmMau+q/Ao2cBR88EjtOqbgNWWaTkIFz3YiWrF4nAjtN0nBZrJnU+/8PA3CxwfMYB6LUra3oglL0tps6wlVha5rLiqd9AdDfB4Je6U0s/0BXTDYh80Sr2FOzNA2AXuWIszABL1JaKWq1R+nwGeM17OsoFY5XTVw/B4Cv+Djg0C8xvLYqJCECzgsxmZlq9T8e0XGUyaUizavPtxoFr/zvw2BnA0Z3A8e2FVV3x6c4sqwObckeyhiXAowUSADhD1XhceDMwx37lvU4XxVN2n3rJIocygkr/Vbs7fe+EdBLcfaXXQ3IPWIrpBB6XlnwpR76jYG9e7/SQKzarxM7qJFj8mg8UarMV9IZ4gvNDD8HgKx8HDs8A8zMFAFnPYQPDl0Co2g4fpDZLqKCxT0/7fhJ4fCdwbFvhRiwRgJruCOwUgCpeCvUjZmEFxhfk9W969kW/B8xvKQqnVgg+B6CB0MsI7P70AHgmd2n1NQ0rv7FvALIlVYK73MnQCDLThSGZoDpuP7uCeuX5n8zroB5yxThGnQ0CgyBMxY63Aq/5aBHG6EBviDlOLV0Eg1+0AByZLgbl+HRxnZXJoqqttA4ODovlJZVuSjTQFtq+NwNPbHMAzramdVpVs6wEoPtdNg37wJfvsYiJP9NFqvHY+7vAwjSwxAeNxVO8T6aNVRRRlT6hHrJ0Ovaw0WDJCKng7g86APvNB9wg2JvXO33IFWOBgn8EIf2nRLD4tbe1+AU7yAWbZeskGHwVdd2mgAUCcNKnJgLQrZ/V9/Jnn5JUYmnAE3hCmv3+t8AWQfSzyPK/POOgJgDdsgqA5nfJAvLdLV+bz0kK4RqPZ3wQWJxyAPqDVhZQyQr7gyaXI9axWCFVAGLvRUhV46PgLnUWBs0HbBPszeudPuWKsTRZAJDTo8l8ui/42juL5veQC7ZpsEow+OrZQlqVVuH4FLA8WVyDAOTAmHUQCAWQkOlsQAwDt/9/AE8SgPQpNa07+AhAA6HLXbb5Xr4IaAMfv/eGvP5NzyYA7UGjBWTWjh40v9fSyscHLtaxhJWxFVsNNAXH1khw983+DYPmA5aCvXkdNIBccemfceooAfhAAcA+6A2xLuAGucxrzgKOMexDfV9OwbS2BB/BEoqLSrBoYGgJ3E8qLcIEsP/ngCPuUy7S13L3wb6PU56/m/Xj4Ps0TKCXQA6AXuNeZY3HMz5QANAeND1kwcKXlj6wOZQ+b7R+Pi0PD0DeFAfk590CKg8qncfoFzIRVWVqfFfBhgn25vXOAHLFWCDbvPstBsJZ4LUPt+jdesgFg+qVptWq11bg2gtgfuLiRAAgQeg+oEmsOujsXb5SsAoCIN/3vx04OlNM6Yv0tdx1MKvK7/TFjVmeCD4HQQQhf159eV7/pmc/kwCcKABoeYvR0oept7SEoZQ0Tr1lPuPQFlAtO0nyAcWhpzw/FSjFzGjLx+RGvxzoSeC1hwsA9klvaFN5FAy+9mJgnhaQ0qqagglADo4c9AhCDpJPl5ZommQ8738HcGw6AJBW1VecZv0cePwOY0/wl1lAD/WUCx0mMlDLr8bjmb+Dwp3x4nkDYbD0thIO5aNtfmDi/xGEeRawxhs7Vb/q2huABQJwAlhyy2cC0xoggjAAUCWWAkksOiIY978TmOOqeqqwqAx3WGhHK06n7TDwOcAV/iipPAKjwgrZm2o8nkUA0gKmAHTrp+o9MTrEYvq44o9pZIOtgmu8mafCV72YAKT/RwAy5OPOuVlAAk9Oule6xQRTWUKlWtkU/IvAHAHti5oIwDK841ZPFtCmdr0U8PaC9hVultd4CIC8P2Ztt/m5/qC11TJXlJDGGpfGAmYODgFoCxACkLpuWh3KCgqE8gNVZK4KtxgjJAB/2X1Krao1rfN7CWZf3LSBT4uAEIyWBVpipL7GgwA0AW25GbGENBTRx3rm1M2w39mmrFVwjTd1Kn+VAZALEE5LtIDyMWUBvbLNLGHgd5H/V07BDp7r3uU+Jadgn3ptxekA5MBri0/Wp4wzBjDbCnkMWMqVpE8GJwLQqvfc0pqbkVj5aNk7gbCxgJno30cAjntowtXNaZ1suvSKNhsYTcVKmw9F5xGE+94dfEoP+JYhD/8OC8eIPUsUHokVVKB78XszbzAF4Pvd//PCKVGIpOAr78mn4DZOm8YC1jco+w6EFTDDPJqeCEBZBa5GffVbhmQ8DtZW5TYOvPhXip0GTuu22lTMLSw+aAVl9QhEWjurI/aQiLJkTMLsX9R3r/ymZ73fp1+37OU9hunXSkdl7T3QrhKCtlCM59k2i5CMMSIAGdqxEIwrmptzTsCEut5yilKoJLAcxCq3fe8tLCDBFwO+tKjyuxSCMdYEXoeDrHcHvu0tTwLzmwHA4N/Gh6zNCqqeOSxC2lb8tQSiMwbuqXIqAcjFh2JjBKGJyShQG6ygVbfJegULWBYcMR3rvb6oCRaQwFPgl1M5rR7/JtBZOIZWx/0+s4QeY5z/1/X2tFnAxPpFELaVkdLN8MWGVr4pCBsfMHN8bmTKfCjZ0Ncp456/x58zLzfw6Qf3ABd8pUgEYmqk5bGyek06IQl1bkXScnlN/u8L24Gdx1qVq91KQvrpgwaAAw9p+wnXPw1YjyWMGtDo2ASOFGMU7SIEUzdYD34vMPmXwLbHgdkFYAtlGiim6DpxJtvq9LtlVr/aWKEB8pUXAOOPAFPzwBTZ9r04vdQ9Ts4pAZ3cd+yHxgfMAOH+vcA69/9Uxijmz/AerYpdar1lNSMYzV+vWY/34I8DY58Gph8Bpo8A04vAFEFIknIHohGVR62QhFRSYjQE6qFri2z3iaPAhHNNlxKwArI0Q1IAxwfReacbC5gBPp66/5ICgLKCtqnsrKKlrFZUFPKOr7osMTtdsxzqQRZ93Q1MPARMPllohUxRqkEK6gShOP0S+dY2hlRv99y+ovRi7IiTnTvLqmg6xDPYpqAUgRgsoR7MxgJmgHD/c4E1FXu7FRRbvEgd7evXWlbPpp9EgUjiJpwe6zwOMlvpAWCMVusJYPIYMOlSDZRpoGiNxKzbdIQlXONMWJbGtw4svdgz3El47nzTRvPrrKptAJT6ZrzfintvAJgx4vsvdQvIXK5VYF3sUZxmJUvgA1FOvwF8spKyBtM1y6EepI4LqVMedbEaTp0EIKdPKh5FqYYqSxgo2jgFr13j6XXHnOiSZOeBVSvyC8qC2r05FVvVw9cAMAOA178AWPMp2LJaaekiCPXExwHw660n1oB/niGQazwOkkSepbJ/72I1x4CJ+cJ6lYI1riccrVicUuVSmIW82pkwnHHVOKbFsOozQGkFkwewnBES37ABYMaAX39ZAUCCb82nIlo+40p2gNnvsoKunxH1xGwA/LOzdQOQJPIuHzV2GBg7Cow7AI0l33XfjOsv6oVodes6ISbBsAZMX+kJxU56KY7pkmFVhOciuvTzSt05v0+ryuT/9gDrZNe4wPMsI7VJP3GcP7gUOOdvgL1rRYJ0ZI5IV3hV4/wrGYPPU3/AiRhYusy2K7mU999P+z90ObD7LuBZK0Xdkeq9NSX2+o4HLwfWlopFCC0fgciBMtAFC8CGrYXVoVjnU2G7rTXrzh4kfRzLY1kyGwBoeiGcPiXb5eAzdXWnazPCSScb4j3xfmav8Cx2p50lAMW0VXINitCogl2r9H2dcctWwQxQsn6ZTBbMNtcgdKIbiZj51VcBk38CXPxoQcfCUg8pjcYgZScw/momACnXyr4leBhs5QaBTHpf7X8dMPYJYO8XgAv9e8QJlAZZq8D4xSuANYKPJQn0AR2AHKy1MACKe9nfFI6IEqduEWoHIJ9wlsVKLekoMCa9EAegSTYQeM4TXco2SEMkAHEbBZoj4bbYtdyCVrFqGXgTSxgXYTZeHLi9AMjEQRCVUXP/n4KUaaT8vVTi+Rtg7GPAuYcAWlMCgUVkQfJ2Q12yBvPXMwHImhDWwf81imsTiLSEvHZkr+jY/p9CQRD4p8DOBwteItai05qn31FFdfLlFxYWgCDUIkRkj/TxbCEi/89jfPZ3X2VqYSJQbmUNQY3HQT7hbv2sLoerVwKQHNEEoCsm8R4MhPRjXUGzVEIKIoY7yaEYuY4dgGb5RXruoSgtSCLLarkICQ9f6QNykGjFdjsIBaI4kGlt8W+Rg5g0HJ8qAp47nihAzFpuWtPIMBZJlASILvR6fQ0DCVbJCkJOJCqnk4pGpb99tZ8MopyiKDX7WWDiwYKXiEQOehCrgKh+eJQ+EQHo1Lby/zRlyf8TIbf9XS5ftIb8I92YugH4ay2pLusorl7dAoonWtMwQSTdOFuQSLTGHyIC8kxSIQuA4hwU2WUAoO4/grBcDbsfWElSzg+JCoYDoEGM1ixSkHzgF/wG7y8sIa3J7JPAGWuFJSQIaU01iJHUiYP4e33BrPOHmG/JMaOfTZVYRhwGav87vWKPJ9/rSH4IOGO5sITqg/ggxXs4TOaBAECbeoOsgfl+DrQShFqcEIhyyt0MbMusEkx76iAZXKM8BvXiZAGlF+KaIbaadYpem4aDgpJZQz6YJABV5VcHAJZ0v4FxX6KG5UpYs0KnqjhRuagEVgPglYAl9ciHf8mdUrJh0Qx9vkDBzBywfbkYQIGwahA/kglATsHsDzKA0BATiPyZ4NEDwIeoa/uFYKKXL2f24nQoIgd9R3yQCMTFqwIAfdBWI7+yB5ZLECYLETd85YJl+2YAUNosLIel/xYlu4Jsl6bhNhD6it4WJCvA2Zc4Gxo73RcgJeOqFmGR6rcChLYACyGojmEYdj59KnZ+tIQRhH9IvWA2hiREjDeRI9Cly7fMF3EtWRFawhQIf5IJwE56wdTIYdt7tp9ys1K8JnoJvod9Wn682PNkP4hUy1ndWgstAtBDMLYN5/6PAc5DGNoF4SrZfN+4+IhT8jqwg2Cp8ThIJ5vfSWBXAVCrWN9SMxDK+skaOvhoAc8me654pmUB3f0wyt+E8FyRAGmPlOEoiSD2qgvmAKoOm52fAuiTDHSyIRxx+lI0QxxADubfF5vffMmSajrWlP7nmZ3dSy+4r/ZzAUEHnQ8R70HsXlK+PgJsW68G4XYGZj0EY2EYATCAT6tAhmE0DXcC4faapcwMgAIfLb0kuzT9Qmw5uwAAIABJREFUSi+EfeALkSrpBovbrQDnkm8wAo8/E3i+CCsZ98NCpAp8cUekZyBavI4ET/TnaAk/RQCyAXy6uNSPA0i+wMeB6ePA5HFgZq2wpNGK3FUDAHmv3fSCe7afX8CB4UNEEOolVi/3obastNwJ9cO5BOBKEQMsAcifHWzRAigWWAlCn5K2bQYAOe1KMjTIR2kRUhKVS7IrLia0v+3xwHMZMCbYNP0KfG79zAqK5DxOvyEuWu6VD5KSHy2YAEQAfpaRdl5UkuUctIpBnCIIl4psD03FtIIP1ADAlBuJM47EqqUX3LX9kSBQcuuyftK78xUkHyQ+RLqHZ3Fv1KcgLj5kAQ1s0Qo6IA1nHhNLQzA8ZxvBXuNx8DcS5UYpNnoYxsCnUIqvZo0F3wPTMa7Hv53HOJVbS/l+5bumX7d+5WLE44hxIRJB2NMCqj9ixwuE90svWCaIA6bAp959EKeWChAyA0PTOV2unGMQveCO7bfqHbcS4rJR7Ewqnw5AWhLuImg2uFQAXAVs8RGmntW4+g2hB3P79L/EJ9zGvqrxOPibiVihAOgrWQOf/EBfBcsPNBBqW9Hv6zzGqFzmoXz3B9AePgXiq6bgiv4YOB9QHS8AfpkAFMMjrWAcQA0iO9XJiQyAnos2vV7ESHOOQfWCO7Zf7F40mZFQScRKAYBaSU6vAVcTgN7xXHiUFpDTMK2dFh56912BTiDcvpkATIXzCL4g3WXTZ4jpGfjoF/oihL+fx+0yWUABLwIwtYKKIabgCzHQvi2ggBKn0McEQDaKT5cGkIOo6SuyYzEfjQB0EM5nZgAPoxe8of3sgSqCQM3jkdFLvpRvR13+7UVRuhUFSavNO6otwp88ZZ3+t4M6HLtch6OT9AG/q9cmtf//gV1JDYcnQ2zY6/YakfSrU+Pg1M45NqPt3IEtoM7WFHokyrWKkooglCMWLYjiUXMtK3g8Uzd1WL3gDe3vRRCoUEYCwGtYFxxqgA2E/jI20F5hhmQod98BHNnlxOTig1aGiDanO21yV4DygWuB8YeB6fnC9WEtiKVVKeE0ZGiXWczeJoWMIig5a9V5DA1ANoKDeDylZ9NSXxyAsiKawrQqmCv2HVf5e8aRoxfc1n7xs+khItAUvojvyWryxVcWJZksVSyZoQRA3dcAoHzax4Gj2wtu6FVKM7gMgti02jbV476oUJJs1j/AbA1mQ3Pm8eTRsoZDtR+xZKCiEKmMXTIeXHPGdhYArX8FwG4DGMEnAHIK4yvT58nWC2b73cexaZgWWaEKgU1gjNbPP7PvOYGsUSBkv3hBtmRWNzxjTk9RWktvxp6POj0vARjY9sWkFel8RWxegjIF4RjwAOnZWMPBTGjqvHmszxJOBUD3xyznL2bqROvoP3N3q84jG4C7M/PpcvMBef0cvV9k6hXv+2Yno5QfGArRbaCC0mWv2YtF3ecerNDhkNZIIsXQRv5dlTtGADJSz2gEE1EJQM//026HdIEZLC8B6A0tk0g1Ja8DuzJdphS82QBEZj5dbj7gxZN5er/IZI+67pscgE7QaDOUMyC0Wb8+gXjuR4F5J6YsaXnFhBoAGEVvUhb60jISgCQnoh/OLBgvIrL8v7DdFkEYM5dtNg97tvz5zJqzdfIBmJlPl5sP+DJP5xtW7xffnzeh7H+Z+3+RpkyWT1YxuURJYVtx6T0fCTocouQV85VkHRIGegEuEv/YKpkA/JceVmL8kv6t5/9pu62tfiPWcFQVEa0DZ9WcLJEPwMx8uvfnjT9IgZyj94t/ldeA/S9tMaGa9SNdmsIxbvVscVJ1GScoMt4UPwhAsmMZ0aXzQBsvdGRBjQz0FUpEJRAJQOq4KAnBdz+sfiPJ3bOYn8fsykyVWMfiN3BOzckS+QDMzKe7OW/88aqQzsfE5kH1fvGjeQ0wADodmVGwOeiMsUqHrGOnS4UFy9P/wAEojkEnI+IqOIJQNLgpCXhcmLAtD/D+kgQE235L93tj+YBqgTX9BiCeW/NedT4AmQ+YkU/3sbzxBymQuZhm8g1T+QbV+wWFdjKO/Te2mEFNlCb6gPF708VJ1TXHgKd91GnZpDfi1k/gM2vqU3DUnCuBmNQe3P9vw6pe229KOvB0K1k+ZS+rnrfM2AlA3JMZtah/EZKZT3drxuDz1O/yxAwu9JgJxr3lQfR+8aa8Buy/wdWQZAVl+ZzCrG3q9c/YrkmHy3IRYryAAqAkEBIlopJxNNUbER+fA/H+/+AAdP9PmS9dazicJybm7mlB8nR2dI1HvgVkOlZGPt2nM29GCamcGZjAwlQ+vvrV+8X/zGsAAUiLVPp/wd+zaTMFWw+/kAA0GQQnpCw5mDsAMIrcRB5mC/+MAffTwgfwKY2KfmCZ6ZIkUShrxXxBX4yYaV8Hzmcn13jUA8CMfDqWYeQcSkhVOl8U6uxH7xekrsg49h8oiCENgC5TUG5vKxxT8f2aRtOtcAKQ1s8soPuOVUIwpchNlEEIOyNSIrrvv3hwnckWIZPZsnbcDyzTpvg3lU8mpZQqozyfK74aj3wAKh1LgrsD5tMxiz/nkGD1sHq/YNFOxkEAcuW7oqmXlisuQOT7VV2jwi/kTgj1RkoZhBje8Z83SCAEEJZW0C3gff8tADCt4VASaWIBK0HI9q8BF5yUAMzIp8tNx5Jg9bB6v/jdDPSRns0BWIZeUitIo9IhHmhXTvzCPQddccnZ76U1V/IvC4SBCFyg26DFNg7c++Mhhb6qiCikT7WVUmr6lYn2nRKyrdZ51GMBlZIc07GUBdMjny6XCiUmpA6j94vMZbgBMFo552pu27PXAqXTyAUQcitOQjAm9xX0N9pIwIPmSCmH5QuPqER0L4kDYgp9zOUL6fYxkbZcFceyAreAF3GlV+NRDwAz8uksnT3jiILVSmpWNlhMze+k94vMZfgGAPJeHDjpCrgM01Tdry9OzvmYAzAqLVWIwEShwzbRwwSEn+MqP6bQK5tZlWyhjCCCsC19Xv7gOnBRbgp7cu/5AOyVjqVMmA75dJZ9nHF0yohWNlhMxKnS+0XmMtwAmFq4imnYbrEqNJPc+9kfd62RKh0On8qV9hXZ9askEPgAfI56ziocUgVbzGT28lEtRMoKtg7lBHtznfZNA+CQ+XQWM8k4uglWK/NLYKzS+8U9GReXD0g/Tyvh4Ne17Yb4Zbr6g6y7/aNWcoPpjKRTsJIags5IJwkEAv6en05S6GUBfRWsUExZyVZVQCQwrgN7Wfdd41GPBczIp8ODeXfTSbBa6YYxlY8/p3q/udc3C+jTbtvqt2oadnB2m4oNgMn0W0p+hYWHWbwg9yU/0Kb9EIy+5y2hiCit4UgKyTeAkN8Valk4Le/ldlONRz4AWWBRM6fdIPfHstw/G+SE5rMnVQ/kA5AkLHS0ak7V7reXfhgACaBqDtD3e/nmc5k9kA/A80JReq+U38zGVp3ObJo/BvAOD3dtwiWar9zEHsgHIGlFubqSx7+Jja36anLLcDvvgwA+NDpDfILv+qlzuXwAXuSjrkKemlO2e3U1uWUYnL8dwB/5e2apca9LNv+vsQfyAUheX4VguB+mzIsaG9ntqxhF4Xbe3QD+n7/uHLAW9wQ1tblMRQ/UA0CaHC7plXEh+q4T0OWcfhleYTSHBK0EH/mi+fcRuKQn4I6fWpeoB4AevCz3HOOm9yb3F5mBlZBNclYCj1aRfyfrbgPCTR6AzK+vD4CyglX7jpmN7HY66d1E0ctdIrEEE4wEIMlam+Pk7YF6AMj7EwAVbU82vTerCwhAXopJN9zVI+AYrOeULLZgErY2x8nZA/kAJGWr0naUWdFpy2cT+oCWjpdjLFxE5UzYIBBpEUX5nLnlvAktb76SPVAfAOUHpiAMm96bsVtCAMaKALICMyxDq6cXfycA+b/mOLl6oF4AiqBRIEzBp7/X2Af0+fi1XIioMIlAI+AIPIGPmeROWV3j1Zuvyu2B+gHoFfZiDS2lC0LiY52WUADkQoTTMH1BFSYRdHoRfKSu5v9qrizMHYPT+vx6ARhSuDcAzzmDo5ZGHT1PAKYMwQxME2jiSo/gEwBrrq+u41ZOy++oD4BaCcsXTPiSI3ey8s4KGoG8QwCMFM+0ggQhLR0BF19SXuD/ayakz7uR0/TsMcxg3SjfqWNA0hsrga/ojaq/8WPcC+YIk4Ke4CMSuB2XVht1Oj8zIfXlU8BtU8DhmYRXWdfrdF1fgr3+S8At48CD04DVjXQSDO70PTUnaJ5uOCwsIIFHSSFy1pKPWCDsZxCpw8UVgKSPxLXM937OzxxAljzcPAbcswU4Qh4V3UN8mKoeKm/bu78IfKJQa8VD48CylHQiL3O3/qg5Rf30BKACMtJXjXKQcfBSK8Dfqc3KVCwuN2VFGRnm/yKZtq4Re5ifyQQgM2A+BeB3GHaZBo5MAIue0l7Kt3cC4xhw+5eL7TuCkJk1jBtyerbUfYG5ExjZ/pqrxE5fAOrOq5SmowVIrRp1IyT2R6+fg0bgVYG4CsyZe2UsaiOGKXr4Sfp9k8CxCYAFSKyvXeY1o1BxQux91yMtfsHPutgnnyUuUvhc0ZsgUXib+nVkq6+ZKaABIHsgVZnuwD9sVo66rrR4ImdhLGSQ8zPL/JgBQxeU1ouWkO9PTgDzbgmXxrzMkatl3keivfG5x4r4IRcz5BfkO5vEZ0kgpIfBZ8yKjlL17syy0tMNcOn9dl4Fy6dLFabj1Mpvow9Ify+I4Nlo9Xt+ZqU9VdJpqZh4QDDyxUyYOYJwHDg+DhgI/WUVZl7aSEt93+GO9Ia2iuZKOfA7lhp9JpvAVy61w2mOwO5hmCgMHC1H9O24gu6UD9jP+ZmbtLRaSsei9SL4XDPbAEh/kGQ/pSUcc0lbApFWb67lQUhpVnLBsoKqqZclFMmUtrxPcwxl3X7vOCAtYLSCcugFQmqhdssH7HU+RznjiOlYXA8wqkOfkItTAom+oKygca4ES8jY+N3z7fSG4hfUtp3ihUHruVSsFy1iRvNP+1N7A5BdJACmVpAgZPhGOyCigEjlPLudn7kvFtOxuB4g6OjD8UWLRkCZFRwrLCEXJQQhp2K+37lQeBCRX1A7KPQto1prFEmSYn2mB9EAsO+kYfk8KQhZF8yjVz5gp/MztyOUjiW9bCUhEBhKRCCgSis45uQ/PhX/xfFWMgOnWu2gxB0TF/o0kEZ/kCDM1Ts+3RHYnwVUL6XhDFrAswfIB6w6P1MrTulY0sum1VICglKwCEACqvQFCUK3gHcsFQCM/ILayqP1k9JshVqrncMalOYYvgcGAyCvIwuod8YBJQmZpmGJeyRwkGw4n8jJOJQNw3idLFhMRNB0SgASTJyKoy/4ieXCeFfJBUeV2SoAclFyR0bbm1OHTUiN0/DTAwD7zQeM52dqj8VsGEkVE2jKetG7AEhQ0frJAv6RC0trC1skl+IWlNinGLbSaZg7Mc0xfA8MbgF1LQV1z08A2G8+oM7PVF9Ms2GUE0gQyp+Lwu2yagLgR9ZaYpkSypQ6a6Q2DCqzpkvietXIFdoZfuieGmcOD0DeP0HEbBhNwYPmA/L8zJQsATAKnguEqS+XTqkE4YfWWwCUFZTksYAYwZfIBeN9Tw0cjOwu8gDIZqsoSSvhEeQDiiGYFoyWiSDRypWgi69UP5sc5fIcquSCNeXqe2X9ZAHfM7Khe2pcOB+AT41+aO5iRD3QAHBEHd9ctuiBBoANEkbaAw0AR9r9zcUbADYYGGkPNAAcafc3F28A2GBgpD3QAHCk3d9cvAFgg4GR9kADwJF2f3PxBoANBkbaAw0AR9r9zcUbADYYGGkPNAAcafc3F28A2GBgpD3QAHCk3d9cfOxqYJ2au9RdPtdp/khoEOlglDYT39V1PzQFXLsMXAlgt9PCxJKPbufyf8/KHIPfBPAZABf79Xc5XQ0ZQ1Q7360NbxoHrlsDvs5ZRsgo0une06by6X1mZvtP99PNAp4F4LsBXA5gjw8EGTeqaGF4QhzQF80CX7cAvGIdeDYAfhdZ2sTKUcVrpE7nd31N5gj8e2dIo2osk7NZpMdK0Z19tv+bJ4F9K8D1ACj8yfNSikHeg+5Z969m57Y/8/ZP+dPLKZhP/rcA+AYAF7g1oRUhEMUzFMt6eSJfX78b2DkPfM0i8GIAX+uWlAMppreUUErn8p2gzTl+2flg/sDbTkvIOik+CP20//mzwAXzwDcCuNTPJeFXpEpM6QEjIHm/zTF8D7T5gATYNQCe69aAloRTGulfBESBSYNyxR5g/Bhw7hKwZwl4vk9LnM5JmsBzUyDGAX3B8G23Mz/g9BuUa/0IiutfMkj7zwKmngAuXSvOpUvAWYBtF4BTnspIj/O8zPaf7qdvWITw6eZA0JLQEhKEGgxZhUj/dz3NzSKwbR44exnYvVKcy+mM5Km0JhxInUtrGkmzCPicg3W5LMGkQiZZTm9xS9Z3+4m2o8C5c4X15pTKW2Lb+fCx7WLtjYxzqiql29Icw/dA5SqYf6RTTilg+lYCIXmICKQ4IK9wxfSJY8AZK8CuFWDnanEua9ZTAMsaCog3Dt92O/MvnRGBtGwkqKRmMEkqCaa+2k+0LQDTh4rP88UHj74kF1WaATo9QHQ7mmP4HugYhtEKj4PB6ZQ+FS0hQahpldPya1kXTOqNY8DscgG+HavAttUCvBxInitrkgL4lcO33c7spBdM3kAuSnq2nx9gQfAh4JyVwvrxwel2z3p4aMlzH6DM2z/lT+8aB+Q/OT4EEqckWQSBkGD6EQKQnDCLwBSnYgcf32fXioGUFawC4esyu7CXXnDP9tOCsyD4KLB1rmgvX7zfbu2WG/Jtme0/3U/vKxBNAMoi0KcjkATCN3HOEr3UAjDrwOP71rXixYEkeKMFlSX8ocwR6KUXTJ7AaNE2tF8WfA4Ye7Kw1mwvX/yZn+eKnvcrfzC6IK/ObP/pfnpfAGQnySoISBqUXyAASS1AK0JfagWYcRDOrAF66TxZQU7jBOEbM0egH71gcgXSFZAV54NQtj9YcNIpbONCyh8Ygi8CVospApDuB63g92W2/3Q/vW8AsqM4gLIKBBIH8bcJwMCNMX68BTqBb8s6sGWtsIA6jwDk662ZI9CvXjA5A6NVa2t/IAicnC/aGV+8T74IQPm/AmGuBc+8/VP+9IEAyLslAKMV/LgAyIUInfnjwPQqMOOgI/DstQ5Mr7UAqMF8V2YXDqoXXNl+EQQ6N9v29aKdesUpWJZbAPyPme0/3U8fGIDssDid/pUASCvCaXgJmFguAEfgEXT27gDkuwaUg/nbmSMwjF7whvbLhSDL5TwwvdRqo9oqHzACkCB8U2b7T/fThwIgO01T1IMCoAZxGRhbKoAXQUcQTjkI+a4B5e5FzjGsXvCG9gdqrLGFYrpVG/UuHzBOw2/LaXxzbh43DKeoJwlAHqLndSs4udoCoIBHQE45EPk3DuitmYOQoxdctp8+rFwIWsGFYiFFoLGNchcEQC6e+OJC5J2Z7T/dTx/aApYdJ37AyJK/DIwvFxYvWr0IwEn/H1Opco5sveDUhSAAF4HJpQJkWixp6k2n4IYfMGf0amDHev2I8+l4/UbvNw8Eozw72wJePOJ8und7EkKj9ztKGA1/7WwATo44n45pWI3e7/AAGPWZ2QBkYHCU+XTMfGGQmYIxjd7vqOE0+PXzATjifDrKtTZ6v4MP/MlyRj4AR5xPF+VaqZLJF1UzKdPV6P2eLDDr3I58AI44n07ZMARbo/d78gMubWE+AEecT8e9YOn2Uheu0fs9tUCYD8AR59MpG6bR+z21gKfW1gNAz4geRT5dTEZo9H5PPRDmAzBmRM8BJzqfLiYjSKKr0fs9dYBYDwBHmE9XtRfMsIz04aQZ1+j9npygrA+Akqs8wfl0BCCTWRq935MTYL1aVQ8Ao1zlAnAi8+kEQGZTNXq/vYb75Pt/fQAcUT5dBGCj93vyAaxXi+oDoFLyT3A+3Rcavd9eY3xS/z8fgCQX/LPR3SOzkon55jg1eyAfgD8M4NcAPD6aDmBtB1e4NMDNcer1QD4AbwbwxwDe4UvRE9wHZG1gNSXDLlwLNcep1QP5APxzzwj9IIAPnXhT5ORc5EYCA9HNcWr1QD4AmRH6FQBMTSZZH98ZmD5Bh5g1FopiNns1x6nTA/kAvAfAEwDudnI+EvQxPfkEzYfaCXRSBluQMB7YHKdGD+QDsBNBH/9+AkAobqTADGK7Inw1x8nfA/kA7EXQt8kgrGAGMfBxZ5Cv5ji5eyAfgL0I+r68uR0QmUFoBQU8vfNvzXHy9kA9AORoMw7CdGQCjoUZDwL4kv/+8OZ1gJhBIjGDgMh3vTavBc035/RAPgD7JegjODfhiMwgoqeJwNPPTaB6Ezq/hq+sB4AcXeXEP+ZhGVo9vRimIQD5v5oPAZCupgDI9wg8/qz/1Xz55usyeyAfgMMQ9GU2Op4eAchpOIJQQEz/VuPlm6/K7IH6AMjgGzdl6QtyX5jWjpQFevF3lq3xf6yhrOlIAUgQCojR8gmE+l9Nl2++JrMH6gEgR5UA5KYsc+AZmCbQCDi+IvgEQMob1XBEAHIajgBMLV+0kCdws6aGu3zqfkV9AGTwjftg3JRVVRAtHQEXX/wbAcoXP5d5CID8GoJKvqDAloKOoIz/y7x8c3pmD4zhaqwjRzCYyQg5gr2ZgsFTLweWr8XQgsXjbwLWrnNtMlKgNoLBmZAa7PTCAuYIBlMvlWQswwr2UlUw45jdDSx8HbD+Ctd+HVCwePKbgJV9aASDM8Yg59TWFDysYPBtmYK91IbNOHaPA/M7gUXKXA4hWDz79cA8+W0aweCMURj+1HYfcBjBYO54MMY3tGDv8I3nmWSHOzYOLJ0LLPGXAQWLz3oB8MQUsEa16kYwOG8whjh74yJkUMFgbsNlCfYO0epwissVY34bsHw2sEIRkAEEi/dcU0SP5qhF1ggG5w3GEGdXr4L5134Fg4kAjuDQgr1DtDqcUmZETwArZwAru4BVqsv0KVh8/o3F4v0QXZBGMDhvMIY4u3MYhv95Zh+Cu1xBcxuOU/HfeDIq5cv7FuwdotXhlCBXjOXZAnyrO4BV6in0IVh8wStLuWCsUAyvEQzOG5ABz+4eB+R/ewnu/kOP/3G/l4kJTERlljQtIot2e53/IwO2OPl4FLtcnCqAp9cahT56CBZf+LpSLhhz1N5qBIPzBmTAs/sLRHcTDKbiNHdBGGymOC/3hglEvgjAnoK9A7Y4+XgiV4zVWYDAs/etxaubYPFFP1QkLtCIP8neaASD8wZkwLP7AyC/tJNg8L/xLNBu+YBdBXsHbHEFAINcMVamgdWZAoRrfPdXm8KitLdmgYveWAq+2y7iMqfuRjA4b1AGOLt/APJLqwSD3+y5T1yI0AoSbAxMMzGV1o8/My2ro2DvAK2t+GgiV4zj4+3AIwDXtwBrVJeuECze+9aW4Dut4PxkIhYsdetGMDhvoDqcPRgA+SWp4O4veQ5Uv/mAGwR78+6rQq4Yq9PAOi2fA4/vBkKudKVU7VZw77uKvWFuZbtcMNb5v0YwOG9g+jx7cADyi6Pg7gccgIxlcA5TKhaD01yYKBmVFpBZMfx/m2Bvny3t8LGqoqTliZbVI+gMgHwnMAnCIFi897cLAAZ6QyzFzzSCwXkD1OPs4QDIL5XgLmk5JHk/SD5gKdibd38VcsVYGmuBTaAzEHLHgyCcaokB7/1IkUET5IKxwF5pBIPzBqbPs4cHIC/AaeqvPL9pmHxAE+zts6VdLCD/lcgVY3UyWD0Bj1ZwqgCggXA7sPfWAoAJvaEtZBrB4Lyx6efsPADyCtmCvf00s/NnOsgVY3m8BTRZPZuGBUACdArY+5lWDqGmYbIrLHEx0ggG5w1OH2fnA7CPizQfaXqgUw80AGywMdIeaAA40u5vLt4AsMHASHugAeBIu7+5eAPABgMj7YEGgCPt/ubiDQAbDIy0BxoAjrT7m4s3AGwwMNIeaAA40u5vLt4AsMHASHugAeBIu7+5eAPABgMj7YEGgCPt/ubiDQAbDIy0B8ZYNMbkX+ZekpuIiOQrPar+xs889HJg6jZg5jAwvVZ8B+ll9PlO5/Fc/o+ECjnHfi8zYfkvM5ulmp4qJXVqx5deD4zfAkw/CGxdAZgoHfuh131QkaI5hu8Bs4Ds8B0AWLnIRGCBsFfn87JffDMwdjOw5R5g8giwZa34jnQQUwDo99wBfJ4TM7COiNdlaj2rA/jeV/vfDeATAP4UGH8I2Lrc6gc+SHqY4oMZ74VSKM0xfA+UUzB/oBUUCKMl6zSQ/PsXqZD5KQC/A0w/DEwcAcYXgYnVwppwADuBkefnCim90FmBWXwnK87Uen53BI8sbuwqaz9p5UgnQhBS+ZN1zE8Ak0utviCwq8DI8/nx5hi+Bzb4gJzKZE1SEFZZgS9/2pWR/gTAJ4HJQ8DEMWB8ARhfBsaWCwDquwQKvvNgHXvOcYVbPFJPkw+dDxC/W1Y4tWDpw/Rlgo4lo1T4/KxTihDNpJwj3/UiMLXemprjffC7eWpzDN8DlYsQDiKtVxzEqoHkyX9HRizW+nIgaQnvAiaeBCbmC0s4tgSMu2rMePAR9X252jXklaTFU108K0MHav/nvJ6ZxVVk9OI7GR2IZoGQNc/HgbHgIwqILIVujuF7oOMqWFawCoRxkfEIB5CWgkREBCNf9wMTc8A4QciBWyoGz16rwNgaML5eWKpctYZL3N+TWLX0gvtuP0HHk2n16JDyxXmVhfU0qywbJbr5GSuXKxA/sV5Y9UYWdnjwyS3qKKgarWA69Wg6fjQOIK0HadnIjPVFB+AiME4AuiUkCFnESyCSkmAuU7Cjm15wX+2X2ifBRn9A8mKcW2UFjULVQcgVDl80u40SYh763FfvquhLCxitoBYUsoJfjXKttByMq9CKcHn4sPuCbgXNJwyWkECcz5Q376UX3LNncZyQAAADEklEQVT9fFgIJs6lBBwtn3Tt6FpIz4RWnuQxPh2XIGzm4CwQ9hWIFgBTK0gQHiIAJddKq0ELQh+KL1qUR4MvSEsoENIKrgALHNiMox+94K7tl9qnnMio8MSf6SNwGpYVjCDk/Ju7isq496fCqX0BkDeqlWwKwic1gAQSpzGREnFgREz01eALLvvq2Kfi45m6cf3qBXdsfxRbJMho8dimqOhEK8cXQRr9QVpvPoDNMXQP9A3ACELFxPh+jACkP0fLIKFCCRRqKuPUdqjlC9o07JZwKVNHeBC94DQcZO0XAAkmgotAk9QYrR9f/BvByYfMSATDVMzwTXMM3QMDAVAgVHCZ7/MaQK4QZUHiNCbBQlqUw74YCb7gcmYkelC9YFlwvVv7RRAorTuBkECU9asCID9/x9B935zYzyKkqpfiNHxcA0gLQgvBAaPVkCqm3h2AtC5m/RyEqzw/4xhGL3hD++MmslgqCbgUfLKAcRrmTlBzDN0DA1tAXUlWcDm1IOIIJAjlT/Fd05lbFQFwjdtgGcewesFt7Rc/Gx8iWjUCjGCT1YvWT1MwgUqrf3NG45tTbcu0aximWx9xENcEQHGbcYAEwtSXSqY0gnCdgeuMI0cvuGx/FUGgFhwEYrR80QckWN+X0fjm1DwAWv8RgJFilJZBznz0pQg+AZAAlVWh1GvGka0XzB0cCQi30aSGVa9AF62fLOB7MhrfnJoPwPER59Px+o3e76mL5Kwp2G57xPl0kxc3er+nLvyKtLmhfUC78RHn081ONnq/pzcAR5xPR9mRRu/31IVgvgUccT4dNaobvd/TGYAjzqejumqj93s6A3DE+XRUg2VSCjdaGr3fUw+I+VPwiPPpqJjO8J1Nw43e7ymHwHoAKMFd7QErAeEE5NNJMb3R+z3lsGcNzgfgiPPpomJ6o/d76oGwPgCOKJ8uKqY3er+nKwBHmE+noqRG7/fUA199U/AI8+kEwEbv93QHoEhZTnA+nYqSGr3fBoAtaiqBUImdm5hPJwA2er+nKwBHnE+X1gUzSbnR+z11wPj/AeCpPDD3t7rvAAAAAElFTkSuQmCC",jA=(D("c7",function(e){function _class4(){var e,_,S,k=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},E=k.blendFunction,T=void 0===E?bA:E,M=k.preset,I=void 0===M?UA.MEDIUM:M,R=k.edgeDetectionMode,O=void 0===R?LA:R,D=k.predicationMode,L=void 0===D?FA:D;_classCallCheck3(this,_class4),e=_callSuper(this,_class4,["SMAAEffect","uniform sampler2D weightMap;varying vec2 vOffset0;varying vec2 vOffset1;void movec(const in bvec2 c,inout vec2 variable,const in vec2 value){if(c.x){variable.x=value.x;}if(c.y){variable.y=value.y;}}void movec(const in bvec4 c,inout vec4 variable,const in vec4 value){movec(c.xy,variable.xy,value.xy);movec(c.zw,variable.zw,value.zw);}void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec4 a;a.x=texture2D(weightMap,vOffset0).a;a.y=texture2D(weightMap,vOffset1).g;a.wz=texture2D(weightMap,uv).rb;vec4 color=inputColor;if(dot(a,vec4(1.0))>=1e-5){bool h=max(a.x,a.z)>max(a.y,a.w);vec4 blendingOffset=vec4(0.0,a.y,0.0,a.w);vec2 blendingWeight=a.yw;movec(bvec4(h),blendingOffset,vec4(a.x,0.0,a.z,0.0));movec(bvec2(h),blendingWeight,a.xz);blendingWeight/=dot(blendingWeight,vec2(1.0));vec4 blendingCoord=blendingOffset*vec4(texelSize,-texelSize)+uv.xyxy;color=blendingWeight.x*texture2D(inputBuffer,blendingCoord.xy);color+=blendingWeight.y*texture2D(inputBuffer,blendingCoord.zw);}outputColor=color;}",{vertexShader:"varying vec2 vOffset0;varying vec2 vOffset1;void mainSupport(const in vec2 uv){vOffset0=uv+texelSize*vec2(1.0,0.0);vOffset1=uv+texelSize*vec2(0.0,1.0);}",blendFunction:T,attributes:cA|lA,uniforms:new Map([["weightMap",new Ty(null)]])}]),arguments.length>1&&(_=arguments[0],S=arguments[1],arguments.length>2&&(I=arguments[2]),arguments.length>3&&(O=arguments[3])),e.renderTargetEdges=new bh(1,1,{depthBuffer:!1}),e.renderTargetEdges.texture.name="SMAA.Edges",e.renderTargetWeights=e.renderTargetEdges.clone(),e.renderTargetWeights.texture.name="SMAA.Weights",e.uniforms.get("weightMap").value=e.renderTargetWeights.texture,e.clearPass=new oA(!0,!1,!1),e.clearPass.overrideClearColor=new jd(0),e.clearPass.overrideClearAlpha=1,e.edgeDetectionPass=new DA(new BA),e.edgeDetectionMaterial.edgeDetectionMode=O,e.edgeDetectionMaterial.predicationMode=L,e.weightsPass=new DA(new NA);var U=new nm;return U.onLoad=function(){var k=new mh(_);k.name="SMAA.Search",k.magFilter=bl,k.minFilter=bl,k.generateMipmaps=!1,k.needsUpdate=!0,k.flipY=!0,e.weightsMaterial.searchTexture=k;var E=new mh(S);E.name="SMAA.Area",E.magFilter=xl,E.minFilter=xl,E.generateMipmaps=!1,E.needsUpdate=!0,E.flipY=!1,e.weightsMaterial.areaTexture=E,e.dispatchEvent({type:"load"})},U.itemStart("search"),U.itemStart("area"),void 0!==_&&void 0!==S?(U.itemEnd("search"),U.itemEnd("area")):"undefined"!=typeof Image&&(_=new Image,S=new Image,_.addEventListener("load",function(){return U.itemEnd("search")}),S.addEventListener("load",function(){return U.itemEnd("area")}),_.src=zA,S.src=GA),e.applyPreset(I),e}return _inherits(_class4,e),_createClass3(_class4,[{key:"edgesTexture",get:function(){return this.renderTargetEdges.texture}},{key:"getEdgesTexture",value:function(){return this.edgesTexture}},{key:"weightsTexture",get:function(){return this.renderTargetWeights.texture}},{key:"getWeightsTexture",value:function(){return this.weightsTexture}},{key:"edgeDetectionMaterial",get:function(){return this.edgeDetectionPass.fullscreenMaterial}},{key:"colorEdgesMaterial",get:function(){return this.edgeDetectionMaterial}},{key:"getEdgeDetectionMaterial",value:function(){return this.edgeDetectionMaterial}},{key:"weightsMaterial",get:function(){return this.weightsPass.fullscreenMaterial}},{key:"getWeightsMaterial",value:function(){return this.weightsMaterial}},{key:"setEdgeDetectionThreshold",value:function(e){this.edgeDetectionMaterial.edgeDetectionThreshold=e}},{key:"setOrthogonalSearchSteps",value:function(e){this.weightsMaterial.orthogonalSearchSteps=e}},{key:"applyPreset",value:function(e){var _=this.edgeDetectionMaterial,S=this.weightsMaterial;switch(e){case UA.LOW:_.edgeDetectionThreshold=.15,S.orthogonalSearchSteps=4,S.diagonalDetection=!1,S.cornerDetection=!1;break;case UA.MEDIUM:_.edgeDetectionThreshold=.1,S.orthogonalSearchSteps=8,S.diagonalDetection=!1,S.cornerDetection=!1;break;case UA.HIGH:_.edgeDetectionThreshold=.1,S.orthogonalSearchSteps=16,S.diagonalSearchSteps=8,S.cornerRounding=25,S.diagonalDetection=!0,S.cornerDetection=!0;break;case UA.ULTRA:_.edgeDetectionThreshold=.05,S.orthogonalSearchSteps=32,S.diagonalSearchSteps=16,S.cornerRounding=25,S.diagonalDetection=!0,S.cornerDetection=!0}}},{key:"setDepthTexture",value:function(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Fc;this.edgeDetectionMaterial.depthBuffer=e,this.edgeDetectionMaterial.depthPacking=_}},{key:"update",value:function(e,_,S){this.clearPass.render(e,this.renderTargetEdges),this.edgeDetectionPass.render(e,_,this.renderTargetEdges),this.weightsPass.render(e,this.renderTargetEdges,this.renderTargetWeights)}},{key:"setSize",value:function(e,_){this.edgeDetectionMaterial.setSize(e,_),this.weightsMaterial.setSize(e,_),this.renderTargetEdges.setSize(e,_),this.renderTargetWeights.setSize(e,_)}},{key:"dispose",value:function(){var e=this.weightsMaterial,_=e.searchTexture,S=e.areaTexture;null!==_&&null!==S&&(_.dispose(),S.dispose()),_superPropGet(_class4,"dispose",this,3)([])}}],[{key:"searchImageDataURL",get:function(){return zA}},{key:"areaImageDataURL",get:function(){return GA}}])}(xA)),function(e){function EffectMaterial(e,_,S,k){var E,T=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return _classCallCheck3(this,EffectMaterial),E=_callSuper(this,EffectMaterial,[{name:"EffectMaterial",defines:{THREE_REVISION:Qu.replace(/\D+/g,""),DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new Ty(null),depthBuffer:new Ty(null),resolution:new Ty(new $c),texelSize:new Ty(new $c),cameraNear:new Ty(.3),cameraFar:new Ty(1e3),aspect:new Ty(1),time:new Ty(0)},blending:0,toneMapped:!1,depthWrite:!1,depthTest:!1,dithering:T}]),e&&E.setShaderParts(e),_&&E.setDefines(_),S&&E.setUniforms(S),E.copyCameraSettings(k),E}return _inherits(EffectMaterial,e),_createClass3(EffectMaterial,[{key:"inputBuffer",set:function(e){this.uniforms.inputBuffer.value=e}},{key:"setInputBuffer",value:function(e){this.uniforms.inputBuffer.value=e}},{key:"depthBuffer",get:function(){return this.uniforms.depthBuffer.value},set:function(e){this.uniforms.depthBuffer.value=e}},{key:"depthPacking",get:function(){return Number(this.defines.DEPTH_PACKING)},set:function(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}},{key:"setDepthBuffer",value:function(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Fc;this.depthBuffer=e,this.depthPacking=_}},{key:"setShaderData",value:function(e){this.setShaderParts(e.shaderParts),this.setDefines(e.defines),this.setUniforms(e.uniforms),this.setExtensions(e.extensions)}},{key:"setShaderParts",value:function(e){return this.fragmentShader="#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#define packFloatToRGBA(v) packDepthToRGBA(v)\n#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)\n#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\n#if DEPTH_PACKING == 3201\nuniform lowp sampler2D depthBuffer;\n#elif defined(GL_FRAGMENT_PRECISION_HIGH)\nuniform highp sampler2D depthBuffer;\n#else\nuniform mediump sampler2D depthBuffer;\n#endif\nuniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;vec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}float readDepth(const in vec2 uv){\n#if DEPTH_PACKING == 3201\nreturn unpackRGBAToDepth(texture2D(depthBuffer,uv));\n#else\nreturn texture2D(depthBuffer,uv).r;\n#endif\n}float getViewZ(const in float depth){\n#ifdef PERSPECTIVE_CAMERA\nreturn perspectiveDepthToViewZ(depth,cameraNear,cameraFar);\n#else\nreturn orthographicDepthToViewZ(depth,cameraNear,cameraFar);\n#endif\n}vec3 RGBToHCV(const in vec3 RGB){vec4 P=mix(vec4(RGB.bg,-1.0,2.0/3.0),vec4(RGB.gb,0.0,-1.0/3.0),step(RGB.b,RGB.g));vec4 Q=mix(vec4(P.xyw,RGB.r),vec4(RGB.r,P.yzx),step(P.x,RGB.r));float C=Q.x-min(Q.w,Q.y);float H=abs((Q.w-Q.y)/(6.0*C+EPSILON)+Q.z);return vec3(H,C,Q.x);}vec3 RGBToHSL(const in vec3 RGB){vec3 HCV=RGBToHCV(RGB);float L=HCV.z-HCV.y*0.5;float S=HCV.y/(1.0-abs(L*2.0-1.0)+EPSILON);return vec3(HCV.x,S,L);}vec3 HueToRGB(const in float H){float R=abs(H*6.0-3.0)-1.0;float G=2.0-abs(H*6.0-2.0);float B=2.0-abs(H*6.0-4.0);return clamp(vec3(R,G,B),0.0,1.0);}vec3 HSLToRGB(const in vec3 HSL){vec3 RGB=HueToRGB(HSL.x);float C=(1.0-abs(2.0*HSL.z-1.0))*HSL.y;return(RGB-0.5)*C+HSL.z;}FRAGMENT_HEAD void main(){FRAGMENT_MAIN_UV vec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGE color0.a=clamp(color0.a,0.0,1.0);gl_FragColor=color0;\n#ifdef ENCODE_OUTPUT\n#include <colorspace_fragment>\n#endif\n#include <dithering_fragment>\n}".replace(hA.FRAGMENT_HEAD,e.get(hA.FRAGMENT_HEAD)||"").replace(hA.FRAGMENT_MAIN_UV,e.get(hA.FRAGMENT_MAIN_UV)||"").replace(hA.FRAGMENT_MAIN_IMAGE,e.get(hA.FRAGMENT_MAIN_IMAGE)||""),this.vertexShader="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEAD void main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORT gl_Position=vec4(position.xy,1.0,1.0);}".replace(hA.VERTEX_HEAD,e.get(hA.VERTEX_HEAD)||"").replace(hA.VERTEX_MAIN_SUPPORT,e.get(hA.VERTEX_MAIN_SUPPORT)||""),this.needsUpdate=!0,this}},{key:"setDefines",value:function(e){var _,S=_createForOfIteratorHelper2(e.entries());try{for(S.s();!(_=S.n()).done;){var k=_.value;this.defines[k[0]]=k[1]}}catch(E){S.e(E)}finally{S.f()}return this.needsUpdate=!0,this}},{key:"setUniforms",value:function(e){var _,S=_createForOfIteratorHelper2(e.entries());try{for(S.s();!(_=S.n()).done;){var k=_.value;this.uniforms[k[0]]=k[1]}}catch(E){S.e(E)}finally{S.f()}return this}},{key:"setExtensions",value:function(e){this.extensions={};var _,S=_createForOfIteratorHelper2(e);try{for(S.s();!(_=S.n()).done;){var k=_.value;this.extensions[k]=!0}}catch(E){S.e(E)}finally{S.f()}return this}},{key:"encodeOutput",get:function(){return void 0!==this.defines.ENCODE_OUTPUT},set:function(e){this.encodeOutput!==e&&(e?this.defines.ENCODE_OUTPUT="1":delete this.defines.ENCODE_OUTPUT,this.needsUpdate=!0)}},{key:"isOutputEncodingEnabled",value:function(e){return this.encodeOutput}},{key:"setOutputEncodingEnabled",value:function(e){this.encodeOutput=e}},{key:"time",get:function(){return this.uniforms.time.value},set:function(e){this.uniforms.time.value=e}},{key:"setDeltaTime",value:function(e){this.uniforms.time.value+=e}},{key:"adoptCameraSettings",value:function(e){this.copyCameraSettings(e)}},{key:"copyCameraSettings",value:function(e){e&&(this.uniforms.cameraNear.value=e.near,this.uniforms.cameraFar.value=e.far,e instanceof Ff?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}},{key:"setSize",value:function(e,_){var S=this.uniforms;S.resolution.value.set(e,_),S.texelSize.value.set(1/e,1/_),S.aspect.value=e/_}}],[{key:"Section",get:function(){return hA}}])}(Rf));function prefixSubstrings(e,_,S){var k,E=_createForOfIteratorHelper2(_);try{for(E.s();!(k=E.n()).done;){var T,M=k.value,I="$1"+e+M.charAt(0).toUpperCase()+M.slice(1),R=new RegExp("([^\\.])(\\b"+M+"\\b)","g"),O=_createForOfIteratorHelper2(S.entries());try{for(O.s();!(T=O.n()).done;){var D=T.value;null!==D[1]&&S.set(D[0],D[1].replace(R,I))}}catch(L){O.e(L)}finally{O.f()}}}catch(L){E.e(L)}finally{E.f()}}function integrateEffect(e,_,S){var k=_.getFragmentShader(),E=_.getVertexShader(),T=void 0!==k&&/mainImage/.test(k),M=void 0!==k&&/mainUv/.test(k);if(S.attributes|=_.getAttributes(),void 0===k)throw new Error("Missing fragment shader (".concat(_.name,")"));if(M&&0!==(S.attributes&cA))throw new Error("Effects that transform UVs are incompatible with convolution effects (".concat(_.name,")"));if(!T&&!M)throw new Error("Could not find mainImage or mainUv function (".concat(_.name,")"));var I=/\w+\s+(\w+)\([\w\s,]*\)\s*{/g,R=S.shaderParts,O=R.get(hA.FRAGMENT_HEAD)||"",D=R.get(hA.FRAGMENT_MAIN_UV)||"",L=R.get(hA.FRAGMENT_MAIN_IMAGE)||"",U=R.get(hA.VERTEX_HEAD)||"",B=R.get(hA.VERTEX_MAIN_SUPPORT)||"",z=new Set,G=new Set;if(M&&(D+="\t".concat(e,"MainUv(UV);\n"),S.uvTransformation=!0),null!==E&&/mainSupport/.test(E)){var j=/mainSupport *\([\w\s]*?uv\s*?\)/.test(E);B+="\t".concat(e,"MainSupport("),B+=j?"vUv);\n":");\n";var V,H=_createForOfIteratorHelper2(E.matchAll(/(?:varying\s+\w+\s+([\S\s]*?);)/g));try{for(H.s();!(V=H.n()).done;){var W,q=_createForOfIteratorHelper2(V.value[1].split(/\s*,\s*/));try{for(q.s();!(W=q.n()).done;){var X=W.value;S.varyings.add(X),z.add(X),G.add(X)}}catch(de){q.e(de)}finally{q.f()}}}catch(de){H.e(de)}finally{H.f()}var Y,K=_createForOfIteratorHelper2(E.matchAll(I));try{for(K.s();!(Y=K.n()).done;){var J=Y.value;G.add(J[1])}}catch(de){K.e(de)}finally{K.f()}}var Q,Z=_createForOfIteratorHelper2(k.matchAll(I));try{for(Z.s();!(Q=Z.n()).done;){var $=Q.value;G.add($[1])}}catch(de){Z.e(de)}finally{Z.f()}var ee,te=_createForOfIteratorHelper2(_.defines.keys());try{for(te.s();!(ee=te.n()).done;){var re=ee.value;G.add(re.replace(/\([\w\s,]*\)/g,""))}}catch(de){te.e(de)}finally{te.f()}var ne,ie=_createForOfIteratorHelper2(_.uniforms.keys());try{for(ie.s();!(ne=ie.n()).done;){var ae=ne.value;G.add(ae)}}catch(de){ie.e(de)}finally{ie.f()}G.delete("while"),G.delete("for"),G.delete("if"),_.uniforms.forEach(function(_,k){return S.uniforms.set(e+k.charAt(0).toUpperCase()+k.slice(1),_)}),_.defines.forEach(function(_,k){return S.defines.set(e+k.charAt(0).toUpperCase()+k.slice(1),_)});var oe=new Map([["fragment",k],["vertex",E]]);prefixSubstrings(e,G,S.defines),prefixSubstrings(e,G,oe),k=oe.get("fragment"),E=oe.get("vertex");var se=_.blendMode;if(S.blendModes.set(se.blendFunction,se),T){null!==_.inputColorSpace&&_.inputColorSpace!==S.colorSpace&&(L+=_.inputColorSpace===Bc?"color0 = sRGBTransferOETF(color0);\n\t":"color0 = sRGBToLinear(color0);\n\t"),_.outputColorSpace!==Uc?S.colorSpace=_.outputColorSpace:null!==_.inputColorSpace&&(S.colorSpace=_.inputColorSpace);L+="".concat(e,"MainImage(color0, UV, "),0!==(S.attributes&lA)&&/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/.test(k)&&(L+="depth, ",S.readDepth=!0),L+="color1);\n\t";var ue=e+"BlendOpacity";S.uniforms.set(ue,se.opacity),L+="color0 = blend".concat(se.blendFunction,"(color0, color1, ").concat(ue,");\n\n\t"),O+="uniform float ".concat(ue,";\n\n")}if(O+=k+"\n",null!==E&&(U+=E+"\n"),R.set(hA.FRAGMENT_HEAD,O),R.set(hA.FRAGMENT_MAIN_UV,D),R.set(hA.FRAGMENT_MAIN_IMAGE,L),R.set(hA.VERTEX_HEAD,U),R.set(hA.VERTEX_MAIN_SUPPORT,B),null!==_.extensions){var le,ce=_createForOfIteratorHelper2(_.extensions);try{for(ce.s();!(le=ce.n()).done;){var he=le.value;S.extensions.add(he)}}catch(de){ce.e(de)}finally{ce.f()}}}D("c5",function(e){function _class5(e){var _;_classCallCheck3(this,_class5),(_=_callSuper(this,_class5,["EffectPass"])).fullscreenMaterial=new jA(null,null,null,e),_.listener=function(e){return _.handleEvent(e)},_.effects=[];for(var S=arguments.length,k=new Array(S>1?S-1:0),E=1;E<S;E++)k[E-1]=arguments[E];return _.setEffects(k),_.skipRendering=!1,_.minTime=1,_.maxTime=Number.POSITIVE_INFINITY,_.timeScale=1,_}return _inherits(_class5,e),_createClass3(_class5,[{key:"mainScene",set:function(e){var _,S=_createForOfIteratorHelper2(this.effects);try{for(S.s();!(_=S.n()).done;){_.value.mainScene=e}}catch(k){S.e(k)}finally{S.f()}}},{key:"mainCamera",set:function(e){this.fullscreenMaterial.copyCameraSettings(e);var _,S=_createForOfIteratorHelper2(this.effects);try{for(S.s();!(_=S.n()).done;){_.value.mainCamera=e}}catch(k){S.e(k)}finally{S.f()}}},{key:"encodeOutput",get:function(){return this.fullscreenMaterial.encodeOutput},set:function(e){this.fullscreenMaterial.encodeOutput=e}},{key:"dithering",get:function(){return this.fullscreenMaterial.dithering},set:function(e){var _=this.fullscreenMaterial;_.dithering=e,_.needsUpdate=!0}},{key:"setEffects",value:function(e){var _,S=_createForOfIteratorHelper2(this.effects);try{for(S.s();!(_=S.n()).done;){_.value.removeEventListener("change",this.listener)}}catch(T){S.e(T)}finally{S.f()}this.effects=e.sort(function(e,_){return _.attributes-e.attributes});var k,E=_createForOfIteratorHelper2(this.effects);try{for(E.s();!(k=E.n()).done;){k.value.addEventListener("change",this.listener)}}catch(T){E.e(T)}finally{E.f()}}},{key:"updateMaterial",value:function(){var e,_=new dA,S=0,k=_createForOfIteratorHelper2(this.effects);try{for(k.s();!(e=k.n()).done;){var E=e.value;if(E.blendMode.blendFunction===mA)_.attributes|=E.getAttributes()&lA;else{if(0!==(_.attributes&E.getAttributes()&cA))throw new Error("Convolution effects cannot be merged (".concat(E.name,")"));integrateEffect("e"+S++,E,_)}}}catch(V){k.e(V)}finally{k.f()}var T,M=_.shaderParts.get(hA.FRAGMENT_HEAD),I=_.shaderParts.get(hA.FRAGMENT_MAIN_IMAGE),R=_.shaderParts.get(hA.FRAGMENT_MAIN_UV),O=/\bblend\b/g,D=_createForOfIteratorHelper2(_.blendModes.values());try{for(D.s();!(T=D.n()).done;){var L=T.value;M+=L.getShaderCode().replace(O,"blend".concat(L.blendFunction))+"\n"}}catch(V){D.e(V)}finally{D.f()}0!==(_.attributes&lA)?(_.readDepth&&(I="float depth = readDepth(UV);\n\n\t"+I),this.needsDepthTexture=null===this.getDepthTexture()):this.needsDepthTexture=!1,_.colorSpace===Bc&&(I+="color0 = sRGBToLinear(color0);\n\t"),_.uvTransformation?(R="vec2 transformedUv = vUv;\n"+R,_.defines.set("UV","transformedUv")):_.defines.set("UV","vUv"),_.shaderParts.set(hA.FRAGMENT_HEAD,M),_.shaderParts.set(hA.FRAGMENT_MAIN_IMAGE,I),_.shaderParts.set(hA.FRAGMENT_MAIN_UV,R);var U,B=_createForOfIteratorHelper2(_.shaderParts);try{for(B.s();!(U=B.n()).done;){var z=_slicedToArray(U.value,2),G=z[0],j=z[1];null!==j&&_.shaderParts.set(G,j.trim().replace(/^#/,"\n#"))}}catch(V){B.e(V)}finally{B.f()}this.skipRendering=0===S,this.needsSwap=!this.skipRendering,this.fullscreenMaterial.setShaderData(_)}},{key:"recompile",value:function(){this.updateMaterial()}},{key:"getDepthTexture",value:function(){return this.fullscreenMaterial.depthBuffer}},{key:"setDepthTexture",value:function(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Fc;this.fullscreenMaterial.depthBuffer=e,this.fullscreenMaterial.depthPacking=_;var S,k=_createForOfIteratorHelper2(this.effects);try{for(k.s();!(S=k.n()).done;){S.value.setDepthTexture(e,_)}}catch(E){k.e(E)}finally{k.f()}}},{key:"render",value:function(e,_,S,k,E){var T,M=_createForOfIteratorHelper2(this.effects);try{for(M.s();!(T=M.n()).done;){T.value.update(e,_,k)}}catch(R){M.e(R)}finally{M.f()}if(!this.skipRendering||this.renderToScreen){var I=this.fullscreenMaterial;I.inputBuffer=_.texture,I.time+=k*this.timeScale,e.setRenderTarget(this.renderToScreen?null:S),e.render(this.scene,this.camera)}}},{key:"setSize",value:function(e,_){this.fullscreenMaterial.setSize(e,_);var S,k=_createForOfIteratorHelper2(this.effects);try{for(k.s();!(S=k.n()).done;){S.value.setSize(e,_)}}catch(E){k.e(E)}finally{k.f()}}},{key:"initialize",value:function(e,_,S){this.renderer=e;var k,E=_createForOfIteratorHelper2(this.effects);try{for(E.s();!(k=E.n()).done;){k.value.initialize(e,_,S)}}catch(T){E.e(T)}finally{E.f()}this.updateMaterial(),void 0!==S&&S!==El&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},{key:"dispose",value:function(){_superPropGet(_class5,"dispose",this,3)([]);var e,_=_createForOfIteratorHelper2(this.effects);try{for(_.s();!(e=_.n()).done;){var S=e.value;S.removeEventListener("change",this.listener),S.dispose()}}catch(k){_.e(k)}finally{_.f()}}},{key:"handleEvent",value:function(e){if("change"===e.type)this.recompile()}}])}(eA))}}})}();
