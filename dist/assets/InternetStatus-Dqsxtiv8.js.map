{"version":3,"file":"InternetStatus-Dqsxtiv8.js","sources":["../../src/components/InternetStatus.jsx"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport { X } from 'lucide-react';\n\nconst InternetStatus = () => {\n  const [isOnline, setIsOnline] = useState(navigator.onLine);\n  const [checking, setChecking] = useState(false);\n  const [visible, setVisible] = useState(!navigator.onLine);\n\n  // ✅ stable handler to prevent unnecessary re-renders\n  const updateStatus = useCallback(() => {\n    const online = navigator.onLine;\n    setIsOnline(online);\n    setVisible(!online);\n  }, []);\n\n  useEffect(() => {\n    window.addEventListener('online', updateStatus);\n    window.addEventListener('offline', updateStatus);\n\n    return () => {\n      window.removeEventListener('online', updateStatus);\n      window.removeEventListener('offline', updateStatus);\n    };\n  }, [updateStatus]);\n\n  // ✅ Retry connectivity with lightweight HEAD request\n  const handleRetry = async () => {\n    setChecking(true);\n    try {\n      const controller = new AbortController();\n      const timeout = setTimeout(() => controller.abort(), 4000); // safety timeout\n      const response = await fetch('https://www.google.com/favicon.ico', {\n        method: 'HEAD',\n        cache: 'no-store',\n        signal: controller.signal,\n      });\n      clearTimeout(timeout);\n\n      if (response.ok) {\n        setIsOnline(true);\n        setTimeout(() => setVisible(false), 300);\n      } else {\n        throw new Error('No network');\n      }\n    } catch {\n      setIsOnline(false);\n      setVisible(true);\n    } finally {\n      setChecking(false);\n    }\n  };\n\n  if (!visible) return null;\n\n  return (\n    <div\n      role=\"alert\"\n      aria-live=\"assertive\"\n      className={`fixed bottom-6 left-1/2 -translate-x-1/2 w-[calc(100%-2rem)] max-w-md bg-gradient-to-r from-red-600 to-red-500 text-white px-5 py-3 rounded-xl shadow-lg font-medium z-[9999] flex items-center gap-3 transition-all duration-300 ${\n        visible\n          ? 'opacity-100 scale-100'\n          : 'opacity-0 scale-95 pointer-events-none'\n      }`}\n    >\n      <span className=\"text-lg animate-pulse select-none\">⚠️</span>\n      <div className=\"flex flex-col text-sm\">\n        <span className=\"font-semibold\">\n          {isOnline ? 'Reconnected' : 'You’re offline'}\n        </span>\n        <span className=\"opacity-90\">\n          {isOnline\n            ? 'Connection restored.'\n            : 'Check your connection or retry.'}\n        </span>\n      </div>\n\n      {/* Retry button */}\n      {!isOnline && (\n        <button\n          onClick={handleRetry}\n          disabled={checking}\n          className={`ml-auto px-3 py-1.5 rounded-md text-sm font-semibold transition-colors ${\n            checking\n              ? 'bg-gray-500 cursor-not-allowed'\n              : 'bg-white text-red-600 hover:bg-red-100'\n          }`}\n        >\n          {checking ? 'Checking...' : 'Retry'}\n        </button>\n      )}\n\n      {/* Close button */}\n      <button\n        onClick={() => setVisible(false)}\n        aria-label=\"Close notification\"\n        className=\"p-1 -mr-2 rounded-full hover:bg-white/20 transition-colors\"\n      >\n        <X size={18} />\n      </button>\n    </div>\n  );\n};\n\nexport default InternetStatus;\n"],"names":["InternetStatus","isOnline","setIsOnline","useState","checking","setChecking","visible","setVisible","updateStatus","useCallback","online","useEffect","handleRetry","controller","timeout","response","jsxs","jsx","X"],"mappings":"iIAGA,MAAMA,EAAiB,IAAM,CAC3B,KAAM,CAACC,EAAUC,CAAW,EAAIC,EAAAA,SAAS,UAAU,MAAM,EACnD,CAACC,EAAUC,CAAW,EAAIF,EAAAA,SAAS,EAAK,EACxC,CAACG,EAASC,CAAU,EAAIJ,EAAAA,SAAS,CAAC,UAAU,MAAM,EAGlDK,EAAeC,EAAAA,YAAY,IAAM,CACrC,MAAMC,EAAS,UAAU,OACzBR,EAAYQ,CAAM,EAClBH,EAAW,CAACG,CAAM,CACpB,EAAG,CAAA,CAAE,EAELC,EAAAA,UAAU,KACR,OAAO,iBAAiB,SAAUH,CAAY,EAC9C,OAAO,iBAAiB,UAAWA,CAAY,EAExC,IAAM,CACX,OAAO,oBAAoB,SAAUA,CAAY,EACjD,OAAO,oBAAoB,UAAWA,CAAY,CACpD,GACC,CAACA,CAAY,CAAC,EAGjB,MAAMI,EAAc,SAAY,CAC9BP,EAAY,EAAI,EAChB,GAAI,CACF,MAAMQ,EAAa,IAAI,gBACjBC,EAAU,WAAW,IAAMD,EAAW,MAAA,EAAS,GAAI,EACnDE,EAAW,MAAM,MAAM,qCAAsC,CACjE,OAAQ,OACR,MAAO,WACP,OAAQF,EAAW,MAAA,CACpB,EAGD,GAFA,aAAaC,CAAO,EAEhBC,EAAS,GACXb,EAAY,EAAI,EAChB,WAAW,IAAMK,EAAW,EAAK,EAAG,GAAG,MAEvC,OAAM,IAAI,MAAM,YAAY,CAEhC,MAAQ,CACNL,EAAY,EAAK,EACjBK,EAAW,EAAI,CACjB,QAAA,CACEF,EAAY,EAAK,CACnB,CACF,EAEA,OAAKC,EAGHU,EAAAA,KAAC,MAAA,CACC,KAAK,QACL,YAAU,YACV,UAAW,qOACTV,EACI,wBACA,wCACN,GAEA,SAAA,CAAAW,EAAAA,IAAC,OAAA,CAAK,UAAU,oCAAoC,SAAA,KAAE,EACtDD,EAAAA,KAAC,MAAA,CAAI,UAAU,wBACb,SAAA,CAAAC,MAAC,OAAA,CAAK,UAAU,gBACb,SAAAhB,EAAW,cAAgB,iBAC9B,QACC,OAAA,CAAK,UAAU,aACb,SAAAA,EACG,uBACA,iCAAA,CACN,CAAA,EACF,EAGC,CAACA,GACAgB,EAAAA,IAAC,SAAA,CACC,QAASL,EACT,SAAUR,EACV,UAAW,0EACTA,EACI,iCACA,wCACN,GAEC,WAAW,cAAgB,OAAA,CAAA,EAKhCa,EAAAA,IAAC,SAAA,CACC,QAAS,IAAMV,EAAW,EAAK,EAC/B,aAAW,qBACX,UAAU,6DAEV,SAAAU,EAAAA,IAACC,EAAA,CAAE,KAAM,EAAA,CAAI,CAAA,CAAA,CACf,CAAA,CAAA,EA9CiB,IAiDvB"}