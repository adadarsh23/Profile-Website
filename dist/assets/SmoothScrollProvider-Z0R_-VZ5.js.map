{"version":3,"file":"SmoothScrollProvider-Z0R_-VZ5.js","sources":["../../src/components/SmoothScrollProvider.jsx"],"sourcesContent":["import React, { useEffect, useRef } from 'react';\nimport Lenis from '@studio-freight/lenis';\n\nexport default function SmoothScrollProvider({ children }) {\n  const lenisRef = useRef(null);\n  const progressRef = useRef(null);\n  const rafRef = useRef(null);\n  const parallaxElementsRef = useRef([]);\n\n  const debounce = (func, wait) => {\n    let timeout;\n    return function executedFunction(...args) {\n      const later = () => {\n        clearTimeout(timeout);\n        func(...args);\n      };\n      clearTimeout(timeout);\n      timeout = setTimeout(later, wait);\n    };\n  };\n\n  useEffect(() => {\n    const isTouchDevice = 'ontouchstart' in window;\n\n    if (!isTouchDevice) {\n      // Initialize Lenis for non-touch devices\n      const lenis = new Lenis({\n        duration: 0.6,\n        easing: (t) => t,\n        smoothWheel: true,\n        smoothTouch: false, // Disable for touch devices\n        orientation: 'vertical',\n      });\n      lenisRef.current = lenis;\n    }\n\n    // Find parallax elements once\n    const parallaxElements = document.querySelectorAll('[data-parallax]');\n    parallaxElements.forEach((el) => {\n      // Hint to the browser to optimize for transform changes\n      el.style.willChange = 'transform';\n    });\n    parallaxElementsRef.current = parallaxElements;\n\n    // Main animation frame loop\n    const rafLoop = (time) => {\n      const lenis = lenisRef.current;\n      if (lenis) {\n        lenis.raf(time);\n      }\n\n      const scroll = lenis ? lenis.scroll : window.scrollY;\n\n      // 1. Update scroll progress bar\n      if (progressRef.current) {\n        const scrollHeight = document.body.scrollHeight - window.innerHeight;\n        const progress = scrollHeight > 0 ? (scroll / scrollHeight) * 100 : 0;\n        progressRef.current.style.width = `${progress}%`;\n        progressRef.current.style.opacity = scroll > 10 ? '1' : '0';\n      }\n\n      // 2. Apply parallax effect\n      for (let i = 0; i < parallaxElementsRef.current.length; i++) {\n        const el = parallaxElementsRef.current[i];\n        const speed = parseFloat(el.getAttribute('data-parallax')) || 0.1;\n        const rect = el.getBoundingClientRect();\n        // Only apply transform if element is visible for performance\n        if (rect.bottom >= 0 && rect.top <= window.innerHeight) {\n          el.style.transform = `translateY(${scroll * speed}px)`;\n        }\n      }\n\n      // Continue the loop\n      rafRef.current = requestAnimationFrame(rafLoop);\n    };\n\n    // Start the loop\n    rafRef.current = requestAnimationFrame(rafLoop);\n\n    // Debounce the resize handler for better performance\n    const debouncedResizeHandler = debounce(() => {\n      // No need to restart the loop, it will self-adjust.\n      // We just need to ensure calculations are correct on the next frame.\n    }, 100);\n    window.addEventListener('resize', debouncedResizeHandler);\n\n    return () => {\n      if (lenisRef.current) {\n        lenisRef.current.destroy();\n      }\n      if (rafRef.current) {\n        cancelAnimationFrame(rafRef.current);\n      }\n      window.removeEventListener('resize', debouncedResizeHandler);\n    };\n  }, []); // Empty dependency array ensures this runs only once on mount\n\n  return (\n    <>\n      {/* Progress Bar */}\n      <div\n        ref={progressRef}\n        style={{\n          position: 'fixed',\n          top: 0,\n          left: 0,\n          width: '0%',\n          height: '4px',\n          maxHeight: '8px',\n          background: 'linear-gradient(270deg, #ffffff, #e0e0e0, #ffffff)', // subtle shimmer\n          backgroundSize: '200% 100%', // for moving shimmer effect\n          boxShadow:\n            '0 0 20px rgba(255,255,255,0.8), 0 0 35px rgba(255,255,255,0.5), 0 0 50px rgba(255,255,255,0.25)',\n          borderRadius: '999px',\n          zIndex: 9999,\n          pointerEvents: 'none',\n          transition:\n            'width 0.15s ease-out, opacity 0.35s ease, transform 0.25s ease, box-shadow 0.25s ease',\n          opacity: 0,\n          transform: 'scaleY(1)',\n          willChange:\n            'width, opacity, transform, box-shadow, background-position',\n          backdropFilter: 'blur(3px)',\n          animation: 'shimmer 2s linear infinite', // shimmer animation\n        }}\n      />\n      {children}\n    </>\n  );\n}\n"],"names":["SmoothScrollProvider","children","lenisRef","useRef","progressRef","rafRef","parallaxElementsRef","debounce","func","wait","timeout","args","later","useEffect","lenis","Lenis","t","parallaxElements","el","rafLoop","time","scroll","scrollHeight","progress","i","speed","rect","debouncedResizeHandler","jsxs","Fragment","jsx"],"mappings":"uIAGA,SAAwBA,EAAqB,CAAE,SAAAC,GAAY,CACzD,MAAMC,EAAWC,EAAAA,OAAO,IAAI,EACtBC,EAAcD,EAAAA,OAAO,IAAI,EACzBE,EAASF,EAAAA,OAAO,IAAI,EACpBG,EAAsBH,EAAAA,OAAO,EAAE,EAE/BI,EAAW,CAACC,EAAMC,IAAS,CAC/B,IAAIC,EACJ,OAAO,YAA6BC,EAAM,CACxC,MAAMC,EAAQ,IAAM,CAClB,aAAaF,CAAO,EACpBF,EAAK,GAAGG,CAAI,CACd,EACA,aAAaD,CAAO,EACpBA,EAAU,WAAWE,EAAOH,CAAI,CAClC,CACF,EAEAI,OAAAA,EAAAA,UAAU,IAAM,CAGd,GAAI,EAFkB,iBAAkB,QAEpB,CAElB,MAAMC,EAAQ,IAAIC,EAAM,CACtB,SAAU,GACV,OAASC,GAAMA,EACf,YAAa,GACb,YAAa,GACb,YAAa,UAAA,CACd,EACDd,EAAS,QAAUY,CACrB,CAGA,MAAMG,EAAmB,SAAS,iBAAiB,iBAAiB,EACpEA,EAAiB,QAASC,GAAO,CAE/BA,EAAG,MAAM,WAAa,WACxB,CAAC,EACDZ,EAAoB,QAAUW,EAG9B,MAAME,EAAWC,GAAS,CACxB,MAAMN,EAAQZ,EAAS,QACnBY,GACFA,EAAM,IAAIM,CAAI,EAGhB,MAAMC,EAASP,EAAQA,EAAM,OAAS,OAAO,QAG7C,GAAIV,EAAY,QAAS,CACvB,MAAMkB,EAAe,SAAS,KAAK,aAAe,OAAO,YACnDC,EAAWD,EAAe,EAAKD,EAASC,EAAgB,IAAM,EACpElB,EAAY,QAAQ,MAAM,MAAQ,GAAGmB,CAAQ,IAC7CnB,EAAY,QAAQ,MAAM,QAAUiB,EAAS,GAAK,IAAM,GAC1D,CAGA,QAASG,EAAI,EAAGA,EAAIlB,EAAoB,QAAQ,OAAQkB,IAAK,CAC3D,MAAMN,EAAKZ,EAAoB,QAAQkB,CAAC,EAClCC,EAAQ,WAAWP,EAAG,aAAa,eAAe,CAAC,GAAK,GACxDQ,EAAOR,EAAG,sBAAA,EAEZQ,EAAK,QAAU,GAAKA,EAAK,KAAO,OAAO,cACzCR,EAAG,MAAM,UAAY,cAAcG,EAASI,CAAK,MAErD,CAGApB,EAAO,QAAU,sBAAsBc,CAAO,CAChD,EAGAd,EAAO,QAAU,sBAAsBc,CAAO,EAG9C,MAAMQ,EAAyBpB,EAAS,IAAM,CAG9C,EAAG,GAAG,EACN,cAAO,iBAAiB,SAAUoB,CAAsB,EAEjD,IAAM,CACPzB,EAAS,SACXA,EAAS,QAAQ,QAAA,EAEfG,EAAO,SACT,qBAAqBA,EAAO,OAAO,EAErC,OAAO,oBAAoB,SAAUsB,CAAsB,CAC7D,CACF,EAAG,CAAA,CAAE,EAGHC,EAAAA,KAAAC,WAAA,CAEE,SAAA,CAAAC,EAAAA,IAAC,MAAA,CACC,IAAK1B,EACL,MAAO,CACL,SAAU,QACV,IAAK,EACL,KAAM,EACN,MAAO,KACP,OAAQ,MACR,UAAW,MACX,WAAY,qDACZ,eAAgB,YAChB,UACE,kGACF,aAAc,QACd,OAAQ,KACR,cAAe,OACf,WACE,wFACF,QAAS,EACT,UAAW,YACX,WACE,6DACF,eAAgB,YAChB,UAAW,4BAAA,CACb,CAAA,EAEDH,CAAA,EACH,CAEJ"}