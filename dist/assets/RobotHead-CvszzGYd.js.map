{"version":3,"file":"RobotHead-CvszzGYd.js","sources":["../../src/components/RobotHead.jsx"],"sourcesContent":["import React, { useRef, useState, useEffect, useMemo } from 'react';\nimport { useFrame } from '@react-three/fiber';\nimport * as THREE from 'three';\n\n// Ultra-Enhanced Config (unchanged)\nconst CONFIG = {\n  head: { lerp: 0.08, idleAmp: 0.05, idleSpeed: 0.8, bounceAmp: 0.03 },\n  eyes: {\n    lerp: 0.15,\n    blinkInterval: [1800, 4000],\n    blinkDuration: 100,\n    xRange: 0.18,\n    yRange: 0.15,\n    lookAroundInterval: 3000,\n  },\n  antenna: { wobbleAmp: 0.2, wobbleSpeed: 2.8, signalSpeed: 4 },\n  emotions: {\n    neutral: {\n      eyeColor: '#00ffff',\n      secondaryColor: '#0088ff',\n      mouthIntensity: 1.5,\n      headTilt: 0,\n      eyeScale: 1,\n      mouthCurve: 0,\n      pulseSpeed: 1,\n      eyebrowAngle: 0,\n      energyLevel: 0.5,\n      particleCount: 20,\n    },\n    happy: {\n      eyeColor: '#00ffcc',\n      secondaryColor: '#00ff88',\n      mouthIntensity: 3.5,\n      headTilt: 0.15,\n      eyeScale: 1.3,\n      mouthCurve: 0.2,\n      pulseSpeed: 1.8,\n      eyebrowAngle: 0.25,\n      energyLevel: 0.8,\n      particleCount: 40,\n    },\n    excited: {\n      eyeColor: '#ff00ff',\n      secondaryColor: '#ff0088',\n      mouthIntensity: 4.5,\n      headTilt: -0.1,\n      eyeScale: 1.5,\n      mouthCurve: 0.3,\n      pulseSpeed: 3,\n      eyebrowAngle: 0.35,\n      energyLevel: 1,\n      particleCount: 60,\n    },\n    thinking: {\n      eyeColor: '#ffaa00',\n      secondaryColor: '#ff8800',\n      mouthIntensity: 1.2,\n      headTilt: 0.35,\n      eyeScale: 0.75,\n      mouthCurve: -0.05,\n      pulseSpeed: 0.6,\n      eyebrowAngle: 0.2,\n      energyLevel: 0.4,\n      particleCount: 15,\n    },\n    confused: {\n      eyeColor: '#ff6600',\n      secondaryColor: '#ff9900',\n      mouthIntensity: 2,\n      headTilt: -0.28,\n      eyeScale: 0.95,\n      mouthCurve: -0.12,\n      pulseSpeed: 1.3,\n      eyebrowAngle: -0.25,\n      energyLevel: 0.6,\n      particleCount: 25,\n    },\n    surprised: {\n      eyeColor: '#ffff00',\n      secondaryColor: '#ffcc00',\n      mouthIntensity: 4,\n      headTilt: 0,\n      eyeScale: 1.7,\n      mouthCurve: 0.35,\n      pulseSpeed: 3.5,\n      eyebrowAngle: 0.45,\n      energyLevel: 0.9,\n      particleCount: 50,\n    },\n    sad: {\n      eyeColor: '#0099ff',\n      secondaryColor: '#0066cc',\n      mouthIntensity: 0.7,\n      headTilt: -0.25,\n      eyeScale: 0.65,\n      mouthCurve: -0.25,\n      pulseSpeed: 0.4,\n      eyebrowAngle: -0.35,\n      energyLevel: 0.2,\n      particleCount: 10,\n    },\n    angry: {\n      eyeColor: '#ff0000',\n      secondaryColor: '#cc0000',\n      mouthIntensity: 3,\n      headTilt: 0.12,\n      eyeScale: 1.15,\n      mouthCurve: -0.18,\n      pulseSpeed: 2.2,\n      eyebrowAngle: -0.45,\n      energyLevel: 0.85,\n      particleCount: 35,\n    },\n    love: {\n      eyeColor: '#ff69b4',\n      secondaryColor: '#ff1493',\n      mouthIntensity: 3.3,\n      headTilt: 0.22,\n      eyeScale: 1.35,\n      mouthCurve: 0.22,\n      pulseSpeed: 2,\n      eyebrowAngle: 0.28,\n      energyLevel: 0.75,\n      particleCount: 45,\n    },\n    sleepy: {\n      eyeColor: '#8866ff',\n      secondaryColor: '#6644cc',\n      mouthIntensity: 0.8,\n      headTilt: -0.15,\n      eyeScale: 0.5,\n      mouthCurve: 0.05,\n      pulseSpeed: 0.3,\n      eyebrowAngle: -0.2,\n      energyLevel: 0.1,\n      particleCount: 5,\n    },\n    focused: {\n      eyeColor: '#00ff00',\n      secondaryColor: '#00cc00',\n      mouthIntensity: 1.8,\n      headTilt: 0.05,\n      eyeScale: 1.1,\n      mouthCurve: 0,\n      pulseSpeed: 1.2,\n      eyebrowAngle: 0.1,\n      energyLevel: 0.7,\n      particleCount: 30,\n    },\n  },\n};\n\nexport default function RobotHead({ cursor, isHovered }) {\n  const headRef = useRef();\n  const leftEyeRef = useRef();\n  const rightEyeRef = useRef();\n  const antennaRef = useRef();\n  const leftEyebrowRef = useRef();\n  const rightEyebrowRef = useRef();\n  const glowRef = useRef();\n  const outerGlowRef = useRef();\n  const particlesRef = useRef();\n  const scanLineRef = useRef();\n  const energyRingRefs = useRef([]);\n  const hologramRef = useRef();\n  const mouthRef = useRef();\n  const leftPupilRef = useRef();\n  const rightPupilRef = useRef();\n\n  const [blinkState, setBlinkState] = useState(1);\n  const [emotion, setEmotion] = useState('neutral');\n  const [isNodding, setIsNodding] = useState(false);\n  const [isShaking, setIsShaking] = useState(false);\n  const [isBouncing, setIsBouncing] = useState(false);\n  const [pulseIntensity, setPulseIntensity] = useState(1);\n  const [isSpeaking, setIsSpeaking] = useState(false);\n  const [isLookingAround, setIsLookingAround] = useState(false);\n  const [lookTarget, setLookTarget] = useState({ x: 0, y: 0 });\n  const [screenEffect, setScreenEffect] = useState(0);\n  const [waveEffect, setWaveEffect] = useState(0);\n\n  // === Enhanced Blink Logic ===\n  useEffect(() => {\n    let mounted = true;\n    const blinkLoop = () => {\n      if (!mounted) return;\n      const emotionData = CONFIG.emotions[emotion];\n      const blinkIntensity =\n        emotion === 'sleepy' ? 0.3 : emotion === 'surprised' ? 0.5 : 0.1;\n      setBlinkState(blinkIntensity);\n      setTimeout(() => setBlinkState(1), CONFIG.eyes.blinkDuration);\n      const nextBlink =\n        Math.random() *\n          (CONFIG.eyes.blinkInterval[1] - CONFIG.eyes.blinkInterval[0]) +\n        CONFIG.eyes.blinkInterval[0];\n      setTimeout(blinkLoop, nextBlink * (emotion === 'sleepy' ? 0.5 : 1));\n    };\n    blinkLoop();\n    return () => {\n      mounted = false;\n    };\n  }, [emotion]);\n\n  // === Look Around Behavior ===\n  useEffect(() => {\n    let mounted = true;\n    const lookAround = () => {\n      if (!mounted) return;\n      if (Math.random() > 0.4) {\n        setIsLookingAround(true);\n        setLookTarget({\n          x: (Math.random() - 0.5) * 1.5,\n          y: (Math.random() - 0.5) * 1,\n        });\n        setTimeout(\n          () => setIsLookingAround(false),\n          1500 + Math.random() * 1000\n        );\n      }\n      setTimeout(\n        lookAround,\n        CONFIG.eyes.lookAroundInterval + Math.random() * 2000\n      );\n    };\n    lookAround();\n    return () => {\n      mounted = false;\n    };\n  }, []);\n\n  // === Ultra-Enhanced Emotion Cycle ===\n  useEffect(() => {\n    const emotions = Object.keys(CONFIG.emotions);\n    let i = 0;\n    const cycle = setInterval(() => {\n      setEmotion(emotions[i]);\n      i = (i + 1) % emotions.length;\n\n      // Trigger animations based on next emotion (i is already incremented)\n      const nextEmotion = emotions[i];\n      if (\n        nextEmotion === 'happy' ||\n        nextEmotion === 'excited' ||\n        nextEmotion === 'love'\n      ) {\n        setIsNodding(true);\n        setIsBouncing(true);\n        setTimeout(() => {\n          setIsNodding(false);\n          setIsBouncing(false);\n        }, 1800);\n      }\n      if (nextEmotion === 'confused' || nextEmotion === 'thinking') {\n        setIsShaking(true);\n        setTimeout(() => setIsShaking(false), 1500);\n      }\n      if (nextEmotion === 'surprised') {\n        setScreenEffect(1);\n        setTimeout(() => setScreenEffect(0), 800);\n      }\n      if (nextEmotion === 'angry') {\n        setWaveEffect(1);\n        setTimeout(() => setWaveEffect(0), 1000);\n      }\n\n      // Random speaking\n      if (Math.random() > 0.5) {\n        setIsSpeaking(true);\n        setTimeout(() => setIsSpeaking(false), 1500 + Math.random() * 1000);\n      }\n    }, 4000);\n    return () => clearInterval(cycle);\n  }, []);\n\n  // === Memoized geometry & materials ===\n  const geo = useMemo(\n    () => ({\n      head: new THREE.BoxGeometry(1.5, 1.2, 1.2, 4, 4, 4),\n      face: new THREE.PlaneGeometry(1.2, 0.8),\n      eye: new THREE.SphereGeometry(0.12, 32, 32),\n      antenna: new THREE.CylinderGeometry(0.04, 0.06, 0.6, 16),\n      antennaTip: new THREE.SphereGeometry(0.09, 32, 32),\n      energyRing: new THREE.TorusGeometry(0.15, 0.02, 16, 32),\n    }),\n    []\n  );\n\n  const mat = useMemo(\n    () => ({\n      head: new THREE.MeshStandardMaterial({\n        color: '#0a0a0a',\n        metalness: 0.98,\n        roughness: 0.12,\n        emissive: '#001a1a',\n        emissiveIntensity: 0.4,\n      }),\n      face: new THREE.MeshStandardMaterial({\n        color: '#0a1a1a',\n        metalness: 0.85,\n        roughness: 0.25,\n      }),\n      side: new THREE.MeshStandardMaterial({\n        color: '#00ffff',\n        emissive: '#00ffff',\n        emissiveIntensity: 1.2,\n      }),\n    }),\n    []\n  );\n\n  // Enhanced particle system\n  const particles = useMemo(() => {\n    const count = 80;\n    const positions = new Float32Array(count * 3);\n    const velocities = new Float32Array(count * 3);\n    for (let i = 0; i < count; i++) {\n      const radius = 0.8 + Math.random() * 0.5;\n      const theta = Math.random() * Math.PI * 2;\n      const phi = Math.random() * Math.PI;\n      positions[i * 3] = radius * Math.sin(phi) * Math.cos(theta);\n      positions[i * 3 + 1] = radius * Math.sin(phi) * Math.sin(theta);\n      positions[i * 3 + 2] = radius * Math.cos(phi);\n      velocities[i * 3] = (Math.random() - 0.5) * 0.02;\n      velocities[i * 3 + 1] = (Math.random() - 0.5) * 0.02;\n      velocities[i * 3 + 2] = (Math.random() - 0.5) * 0.02;\n    }\n    return { positions, velocities, count };\n  }, []);\n\n  // Initialize particles geometry once\n  useEffect(() => {\n    if (!particlesRef.current) {\n      // nothing to do yet\n      return;\n    }\n    const geom = new THREE.BufferGeometry();\n    geom.setAttribute(\n      'position',\n      new THREE.BufferAttribute(particles.positions, 3)\n    );\n    particlesRef.current.geometry = geom;\n    particlesRef.current.material = new THREE.PointsMaterial({\n      size: 0.02,\n      transparent: true,\n      opacity: 0.8,\n      depthWrite: false,\n      // color will be updated each frame via material.color.set\n    });\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []); // run once\n\n  // === ULTRA-ENHANCED ANIMATIONS ===\n  useFrame((state) => {\n    const t = state.clock.getElapsedTime();\n    if (!headRef.current) return;\n\n    const emotionData = CONFIG.emotions[emotion];\n    const hoverBoost = isHovered ? 1.3 : 1;\n\n    // === HEAD ANIMATIONS ===\n    const breathingAmp =\n      CONFIG.head.idleAmp * emotionData.energyLevel * hoverBoost;\n    const breathingSpeed = CONFIG.head.idleSpeed * emotionData.pulseSpeed;\n    const primaryBreath = Math.sin(t * breathingSpeed) * breathingAmp;\n    const secondaryBreath =\n      Math.sin(t * breathingSpeed * 0.5) * breathingAmp * 0.3;\n    headRef.current.position.y = primaryBreath + secondaryBreath;\n\n    if (isBouncing) {\n      headRef.current.position.y +=\n        Math.abs(Math.sin(t * 6)) * CONFIG.head.bounceAmp;\n    }\n\n    const targetTilt = emotionData.headTilt * (isHovered ? 1.2 : 1);\n    headRef.current.rotation.z = THREE.MathUtils.lerp(\n      headRef.current.rotation.z,\n      targetTilt,\n      0.06\n    );\n\n    if (isNodding) {\n      headRef.current.rotation.x +=\n        Math.sin(t * 7) * 0.35 * Math.cos(t * 3) * 0.5;\n    }\n\n    if (isShaking) {\n      headRef.current.rotation.y +=\n        Math.sin(t * 12) * 0.18 * Math.cos(t * 5) * 0.3;\n    }\n\n    if (!isNodding && !isShaking) {\n      headRef.current.position.x =\n        Math.sin(t * 0.4) * 0.02 + Math.cos(t * 0.7) * 0.015;\n      headRef.current.position.z = Math.cos(t * 0.5) * 0.015;\n      headRef.current.rotation.z += Math.sin(t * 0.25) * 0.008;\n    }\n\n    const cursorTarget = isLookingAround ? lookTarget : cursor.current;\n    const sensitivity = emotionData.energyLevel * (isHovered ? 1.2 : 0.8);\n    const tx = cursorTarget.x * sensitivity * 0.7;\n    const ty = -cursorTarget.y * sensitivity * 0.5;\n\n    if (!isNodding && !isShaking) {\n      const lerpSpeed = emotion === 'sleepy' ? 0.03 : CONFIG.head.lerp;\n      headRef.current.rotation.y = THREE.MathUtils.lerp(\n        headRef.current.rotation.y,\n        tx,\n        lerpSpeed\n      );\n      headRef.current.rotation.x = THREE.MathUtils.lerp(\n        headRef.current.rotation.x,\n        ty,\n        lerpSpeed\n      );\n    }\n\n    // === EYE ANIMATIONS ===\n    const eyes = [\n      { mesh: leftEyeRef.current, pupil: leftPupilRef.current },\n      { mesh: rightEyeRef.current, pupil: rightPupilRef.current },\n    ];\n\n    eyes.forEach(({ mesh: eye, pupil }, i) => {\n      if (!eye) return;\n      const offset = i === 0 ? -0.4 : 0.4;\n      const eyeX = THREE.MathUtils.clamp(\n        cursorTarget.x * 0.25,\n        -CONFIG.eyes.xRange,\n        CONFIG.eyes.xRange\n      );\n      const eyeY = THREE.MathUtils.clamp(\n        -cursorTarget.y * 0.18,\n        -CONFIG.eyes.yRange,\n        CONFIG.eyes.yRange\n      );\n\n      eye.position.x = THREE.MathUtils.lerp(\n        eye.position.x,\n        offset + eyeX,\n        CONFIG.eyes.lerp\n      );\n      eye.position.y = THREE.MathUtils.lerp(\n        eye.position.y,\n        0.2 + eyeY,\n        CONFIG.eyes.lerp\n      );\n\n      const blinkScale = THREE.MathUtils.lerp(eye.scale.y, blinkState, 0.25);\n      eye.scale.y = blinkScale;\n      eye.scale.x = THREE.MathUtils.lerp(\n        eye.scale.x,\n        1 + (1 - blinkScale) * 0.1,\n        0.2\n      );\n\n      const targetScale = emotionData.eyeScale * (isHovered ? 1.1 : 1);\n      eye.scale.x = THREE.MathUtils.lerp(eye.scale.x, targetScale, 0.06);\n      eye.scale.z = THREE.MathUtils.lerp(eye.scale.z, targetScale, 0.06);\n\n      if (pupil) {\n        const pupilScale =\n          emotion === 'surprised'\n            ? 1.3\n            : emotion === 'angry'\n              ? 0.6\n              : emotion === 'love'\n                ? 1.2\n                : 1;\n        pupil.scale.setScalar(\n          THREE.MathUtils.lerp(pupil.scale.x, pupilScale, 0.05)\n        );\n      }\n\n      if (emotion === 'angry') {\n        eye.position.y += Math.sin(t * 4) * 0.015;\n      }\n      if (emotion === 'excited') {\n        eye.position.x += Math.sin(t * 6 + i * Math.PI) * 0.015;\n        eye.position.y += Math.cos(t * 5 + i * Math.PI) * 0.01;\n      }\n      if (emotion === 'sleepy') {\n        eye.position.y -= 0.03;\n      }\n    });\n\n    // === EYEBROW ANIMATIONS ===\n    const eyebrows = [leftEyebrowRef.current, rightEyebrowRef.current];\n    eyebrows.forEach((brow, i) => {\n      if (!brow) return;\n      const offset = i === 0 ? -1 : 1;\n      const targetAngle =\n        emotionData.eyebrowAngle * offset * (isHovered ? 1.2 : 1);\n      brow.rotation.z = THREE.MathUtils.lerp(brow.rotation.z, targetAngle, 0.1);\n\n      if (emotion === 'surprised') {\n        brow.position.y = 0.42 + Math.abs(Math.sin(t * 5)) * 0.08;\n      } else if (emotion === 'confused') {\n        brow.position.x += Math.sin(t * 3 + i * Math.PI) * 0.02;\n      } else if (emotion === 'angry') {\n        brow.position.y = THREE.MathUtils.lerp(brow.position.y, 0.38, 0.05);\n      } else {\n        brow.position.y = THREE.MathUtils.lerp(brow.position.y, 0.42, 0.05);\n      }\n    });\n\n    // === MOUTH ANIMATIONS ===\n    if (mouthRef.current) {\n      const mouthCurve = emotionData.mouthCurve * (isHovered ? 1.15 : 1);\n      mouthRef.current.rotation.z = THREE.MathUtils.lerp(\n        mouthRef.current.rotation.z,\n        mouthCurve * 0.6,\n        0.08\n      );\n\n      if (isSpeaking) {\n        mouthRef.current.scale.x = 1 + Math.sin(t * 15) * 0.15;\n        mouthRef.current.scale.y = 1 + Math.abs(Math.sin(t * 15)) * 0.2;\n      } else {\n        mouthRef.current.scale.x = THREE.MathUtils.lerp(\n          mouthRef.current.scale.x,\n          1,\n          0.1\n        );\n        mouthRef.current.scale.y = THREE.MathUtils.lerp(\n          mouthRef.current.scale.y,\n          1,\n          0.1\n        );\n      }\n\n      mouthRef.current.scale.x +=\n        Math.sin(t * emotionData.pulseSpeed * 2) * 0.05;\n    }\n\n    // === ANTENNA ANIMATIONS ===\n    if (antennaRef.current) {\n      const wobbleIntensity = emotionData.energyLevel * (isHovered ? 1.4 : 1);\n\n      antennaRef.current.rotation.z =\n        Math.sin(t * CONFIG.antenna.wobbleSpeed) *\n          CONFIG.antenna.wobbleAmp *\n          wobbleIntensity +\n        Math.cos(t * CONFIG.antenna.wobbleSpeed * 0.6) * 0.08 * wobbleIntensity;\n      antennaRef.current.rotation.x =\n        Math.sin(t * 1.8) * 0.12 * wobbleIntensity +\n        Math.cos(t * 2.3) * 0.06 * wobbleIntensity;\n\n      if (emotion === 'thinking') {\n        antennaRef.current.position.x = Math.sin(t * 2.5) * 0.15;\n        antennaRef.current.position.z = Math.cos(t * 2.5) * 0.15;\n      } else if (emotion === 'excited') {\n        antennaRef.current.position.y = 0.9 + Math.abs(Math.sin(t * 4)) * 0.05;\n      } else {\n        antennaRef.current.position.x = THREE.MathUtils.lerp(\n          antennaRef.current.position.x,\n          0,\n          0.1\n        );\n        antennaRef.current.position.z = THREE.MathUtils.lerp(\n          antennaRef.current.position.z,\n          0,\n          0.1\n        );\n        antennaRef.current.position.y = THREE.MathUtils.lerp(\n          antennaRef.current.position.y,\n          0.9,\n          0.1\n        );\n      }\n    }\n\n    // === GLOW EFFECTS ===\n    if (glowRef.current) {\n      const pulseValue =\n        0.09 +\n        Math.sin(t * emotionData.pulseSpeed * 2.5) *\n          0.06 *\n          emotionData.energyLevel;\n      glowRef.current.material.opacity = pulseValue * hoverBoost;\n      glowRef.current.scale.setScalar(\n        1.03 + Math.sin(t * emotionData.pulseSpeed * 1.5) * 0.015\n      );\n    }\n\n    if (outerGlowRef.current) {\n      outerGlowRef.current.material.opacity =\n        0.04 + Math.sin(t * emotionData.pulseSpeed) * 0.03;\n      outerGlowRef.current.scale.setScalar(\n        1.08 + Math.cos(t * emotionData.pulseSpeed * 0.8) * 0.02\n      );\n    }\n\n    // === ENERGY RINGS ===\n    energyRingRefs.current.forEach((ring, i) => {\n      if (!ring) return;\n      ring.rotation.x = t * (0.5 + i * 0.3) * emotionData.pulseSpeed;\n      ring.rotation.y = t * (0.3 + i * 0.2) * emotionData.pulseSpeed;\n      ring.scale.setScalar(\n        1 + Math.sin(t * 2 + i) * 0.1 * emotionData.energyLevel\n      );\n      ring.material.opacity =\n        (0.3 + Math.sin(t * 3 + i) * 0.2) * emotionData.energyLevel;\n    });\n\n    // === SCAN LINE ===\n    if (scanLineRef.current) {\n      scanLineRef.current.position.y = -0.5 + ((t * 0.8) % 1.5);\n      scanLineRef.current.material.opacity =\n        0.6 - Math.abs(scanLineRef.current.position.y) * 0.3;\n    }\n\n    // === HOLOGRAM EFFECT ===\n    if (hologramRef.current) {\n      hologramRef.current.rotation.y = t * 0.5;\n      hologramRef.current.material.opacity = 0.15 + Math.sin(t * 2) * 0.1;\n    }\n\n    // === PARTICLE SYSTEM ===\n    if (particlesRef.current && particlesRef.current.geometry) {\n      particlesRef.current.rotation.y = t * 0.3 * emotionData.pulseSpeed;\n      const positionAttribute =\n        particlesRef.current.geometry.attributes.position;\n      const positions = positionAttribute?.array;\n      const velocities = particles.velocities;\n\n      if (positions)\n        for (let i = 0; i < positions.length; i += 3) {\n          positions[i] += velocities[i] * emotionData.energyLevel;\n          positions[i + 1] +=\n            velocities[i + 1] * emotionData.energyLevel +\n            Math.sin(t + i) * 0.005;\n          positions[i + 2] += velocities[i + 2] * emotionData.energyLevel;\n\n          const distance = Math.sqrt(\n            positions[i] ** 2 + positions[i + 1] ** 2 + positions[i + 2] ** 2\n          );\n          if (distance > 2) {\n            const radius = 0.8;\n            const theta = Math.random() * Math.PI * 2;\n            const phi = Math.random() * Math.PI;\n            positions[i] = radius * Math.sin(phi) * Math.cos(theta);\n            positions[i + 1] = radius * Math.sin(phi) * Math.sin(theta);\n            positions[i + 2] = radius * Math.cos(phi);\n          }\n        }\n      if (particlesRef.current.geometry.attributes.position)\n        particlesRef.current.geometry.attributes.position.needsUpdate = true;\n\n      // update particle color/opacity with emotion\n      if (particlesRef.current.material) {\n        particlesRef.current.material.opacity =\n          0.25 + 0.75 * emotionData.energyLevel;\n        particlesRef.current.material.color.set(emotionData.eyeColor);\n      }\n    }\n\n    // === PULSE INTENSITY ===\n    const pulseValue =\n      1 +\n      Math.sin(t * emotionData.pulseSpeed * 3) * 0.35 * emotionData.energyLevel;\n    setPulseIntensity(pulseValue * hoverBoost);\n  });\n\n  const emotionData = CONFIG.emotions[emotion];\n\n  return (\n    <group ref={headRef}>\n      {/* Head Core with segments */}\n      <mesh geometry={geo.head} material={mat.head} castShadow receiveShadow />\n\n      {/* Multi-layer glow system */}\n      <mesh ref={glowRef} scale={1.03}>\n        <boxGeometry args={[1.5, 1.2, 1.2]} />\n        <meshBasicMaterial\n          color={emotionData.eyeColor}\n          transparent\n          opacity={0.12}\n          side={THREE.BackSide}\n        />\n      </mesh>\n\n      <mesh ref={outerGlowRef} scale={1.08}>\n        <boxGeometry args={[1.5, 1.2, 1.2]} />\n        <meshBasicMaterial\n          color={emotionData.secondaryColor}\n          transparent\n          opacity={0.06}\n          side={THREE.BackSide}\n        />\n      </mesh>\n\n      {/* Face panel */}\n      <mesh geometry={geo.face} position={[0, 0, 0.61]} material={mat.face} />\n\n      {/* Hologram display */}\n      <mesh ref={hologramRef} position={[0, 0, 0.63]}>\n        <planeGeometry args={[1.1, 0.7]} />\n        <meshBasicMaterial\n          color={emotionData.eyeColor}\n          transparent\n          opacity={0.15}\n          side={THREE.DoubleSide}\n        />\n      </mesh>\n\n      {/* Scan line effect */}\n      <mesh ref={scanLineRef} position={[0, 0, 0.62]}>\n        <planeGeometry args={[1.2, 0.02]} />\n        <meshBasicMaterial\n          color={emotionData.eyeColor}\n          transparent\n          opacity={0.6}\n        />\n      </mesh>\n\n      {/* Eyes with enhanced details */}\n      {[\n        { ref: leftEyeRef, pupilRef: leftPupilRef, x: -0.4 },\n        { ref: rightEyeRef, pupilRef: rightPupilRef, x: 0.4 },\n      ].map(({ ref, pupilRef, x }, i) => (\n        <group key={i}>\n          {/* Eye sphere */}\n          <mesh ref={ref} position={[x, 0.2, 0.65]}>\n            <sphereGeometry args={[0.12, 32, 32]} />\n            <meshStandardMaterial\n              emissive={emotionData.eyeColor}\n              emissiveIntensity={(isHovered ? 4.2 : 3) * pulseIntensity}\n              color={emotionData.eyeColor}\n              metalness={0.7}\n              roughness={0.2}\n            />\n          </mesh>\n\n          {/* Eye glow */}\n          <mesh position={[x, 0.2, 0.65]} scale={1.6}>\n            <sphereGeometry args={[0.12, 16, 16]} />\n            <meshBasicMaterial\n              color={emotionData.eyeColor}\n              transparent\n              opacity={0.4 * pulseIntensity}\n              side={THREE.BackSide}\n            />\n          </mesh>\n\n          {/* Secondary glow */}\n          <mesh position={[x, 0.2, 0.65]} scale={2}>\n            <sphereGeometry args={[0.12, 16, 16]} />\n            <meshBasicMaterial\n              color={emotionData.secondaryColor}\n              transparent\n              opacity={0.2 * pulseIntensity}\n              side={THREE.BackSide}\n            />\n          </mesh>\n\n          {/* Reflection highlight (completed) */}\n          <mesh position={[x + 0.04, 0.24, 0.72]} scale={0.35}>\n            <sphereGeometry args={[0.06, 8, 8]} />\n            <meshBasicMaterial color={'#ffffff'} transparent opacity={0.85} />\n          </mesh>\n\n          {/* Pupil (small inner sphere) */}\n          <mesh ref={pupilRef} position={[x, 0.2, 0.78]}>\n            <sphereGeometry args={[0.035, 16, 16]} />\n            <meshStandardMaterial\n              color={'#000000'}\n              metalness={0.1}\n              roughness={0.6}\n            />\n          </mesh>\n\n          {/* Simple eyelid rim for a bit more silhouette */}\n          <mesh position={[x, 0.16, 0.74]}>\n            <ringGeometry args={[0.12, 0.14, 32]} />\n            <meshBasicMaterial color={'#000000'} transparent opacity={0.15} />\n          </mesh>\n        </group>\n      ))}\n\n      {/* Eyebrows */}\n      <mesh\n        ref={leftEyebrowRef}\n        position={[-0.45, 0.42, 0.72]}\n        rotation={[0, 0, 0]}\n      >\n        <boxGeometry args={[0.35, 0.06, 0.02]} />\n        <meshStandardMaterial\n          color={emotionData.secondaryColor}\n          metalness={0.2}\n          roughness={0.6}\n        />\n      </mesh>\n\n      <mesh\n        ref={rightEyebrowRef}\n        position={[0.45, 0.42, 0.72]}\n        rotation={[0, 0, 0]}\n      >\n        <boxGeometry args={[0.35, 0.06, 0.02]} />\n        <meshStandardMaterial\n          color={emotionData.secondaryColor}\n          metalness={0.2}\n          roughness={0.6}\n        />\n      </mesh>\n\n      {/* Antenna */}\n      <group ref={antennaRef} position={[0, 0.7, 0.15]}>\n        <mesh geometry={geo.antenna} position={[0, 0, 0]}>\n          <meshStandardMaterial\n            color={'#222222'}\n            metalness={0.9}\n            roughness={0.25}\n          />\n        </mesh>\n        <mesh geometry={geo.antennaTip} position={[0, 0.33, 0]}>\n          <meshStandardMaterial\n            emissive={emotionData.eyeColor}\n            emissiveIntensity={1.6}\n            color={emotionData.eyeColor}\n          />\n        </mesh>\n        {/* antenna signal glow */}\n        <mesh position={[0, 0.46, 0]} scale={0.9}>\n          <sphereGeometry args={[0.12, 12, 12]} />\n          <meshBasicMaterial\n            color={emotionData.secondaryColor}\n            transparent\n            opacity={0.25}\n          />\n        </mesh>\n      </group>\n\n      {/* Mouth (simple rounded plane) */}\n      <group ref={mouthRef} position={[0, -0.18, 0.73]}>\n        <mesh>\n          <planeGeometry args={[0.45, 0.14, 8, 1]} />\n          <meshStandardMaterial\n            color={emotionData.secondaryColor}\n            emissive={emotionData.eyeColor}\n            emissiveIntensity={0.6}\n            transparent\n            opacity={0.95}\n          />\n        </mesh>\n      </group>\n\n      {/* Energy Rings */}\n      {[0, 1, 2].map((i) => (\n        <mesh\n          key={i}\n          ref={(el) => (energyRingRefs.current[i] = el)}\n          position={[0, 0, 0.6 - i * 0.02]}\n          rotation={[Math.PI / 2, 0, 0]}\n          scale={1 + i * 0.08}\n        >\n          <torusGeometry args={[0.24 + i * 0.06, 0.01 + i * 0.005, 8, 64]} />\n          <meshBasicMaterial\n            color={emotionData.eyeColor}\n            transparent\n            opacity={0.25}\n            side={THREE.DoubleSide}\n          />\n        </mesh>\n      ))}\n\n      {/* Particles (Points) */}\n      <points ref={particlesRef} position={[0, 0, 0.6]}>\n        <bufferGeometry />\n        {/* geometry & material are created in useEffect; placeholder to satisfy JSX */}\n      </points>\n    </group>\n  );\n}\n"],"names":["CONFIG","RobotHead","cursor","isHovered","headRef","useRef","leftEyeRef","rightEyeRef","antennaRef","leftEyebrowRef","rightEyebrowRef","glowRef","outerGlowRef","particlesRef","scanLineRef","energyRingRefs","hologramRef","mouthRef","leftPupilRef","rightPupilRef","blinkState","setBlinkState","useState","emotion","setEmotion","isNodding","setIsNodding","isShaking","setIsShaking","isBouncing","setIsBouncing","pulseIntensity","setPulseIntensity","isSpeaking","setIsSpeaking","isLookingAround","setIsLookingAround","lookTarget","setLookTarget","screenEffect","setScreenEffect","waveEffect","setWaveEffect","useEffect","mounted","blinkLoop","nextBlink","lookAround","emotions","i","cycle","nextEmotion","geo","useMemo","THREE.BoxGeometry","THREE.PlaneGeometry","THREE.SphereGeometry","THREE.CylinderGeometry","THREE.TorusGeometry","mat","THREE.MeshStandardMaterial","particles","positions","velocities","radius","theta","phi","geom","THREE.BufferGeometry","THREE.BufferAttribute","THREE.PointsMaterial","useFrame","state","t","emotionData","hoverBoost","breathingAmp","breathingSpeed","primaryBreath","secondaryBreath","targetTilt","THREE.MathUtils","cursorTarget","sensitivity","tx","ty","lerpSpeed","eye","pupil","offset","eyeX","eyeY","blinkScale","targetScale","pupilScale","brow","targetAngle","mouthCurve","wobbleIntensity","pulseValue","ring","jsxs","jsx","THREE.BackSide","THREE.DoubleSide","ref","pupilRef","x","el"],"mappings":"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"}