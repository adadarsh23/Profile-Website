!function(){var e=["inputs"],l=["inputId"],_=["inputs"],S=["inputId"],k=["type"],E=["type"],T=["motionValue","onUpdate","onComplete","element"],M=["autoplay","delay","type","repeat","repeatDelay","repeatType","keyframes","name","motionValue","element"],R=["class","className"];function _superPropSet(e,l,_,S,k,E){return function(e,l,_,S,k){if(!set(e,l,_,S||e)&&k)throw new TypeError("failed to set property");return _}(_getPrototypeOf(E?e.prototype:e),l,_,S,k)}function set(e,l,_,S){return set="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(e,l,_,S){var k,E=_superPropBase(e,l);if(E){if((k=Object.getOwnPropertyDescriptor(E,l)).set)return k.set.call(S,_),!0;if(!k.writable)return!1}if(k=Object.getOwnPropertyDescriptor(S,l)){if(!k.writable)return!1;k.value=_,Object.defineProperty(S,l,k)}else _defineProperty3(S,l,_);return!0},set(e,l,_,S)}function _objectWithoutProperties3(e,l){if(null==e)return{};var _,S,k=function(e,l){if(null==e)return{};var _={};for(var S in e)if({}.hasOwnProperty.call(e,S)){if(-1!==l.indexOf(S))continue;_[S]=e[S]}return _}(e,l);if(Object.getOwnPropertySymbols){var E=Object.getOwnPropertySymbols(e);for(S=0;S<E.length;S++)_=E[S],-1===l.indexOf(_)&&{}.propertyIsEnumerable.call(e,_)&&(k[_]=e[_])}return k}function _regeneratorValues(e){if(null!=e){var l=e["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],_=0;if(l)return l.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return{next:function(){return e&&_>=e.length&&(e=void 0),{value:e&&e[_++],done:!e}}}}throw new TypeError(_typeof3(e)+" is not iterable")}function asyncGeneratorStep(e,l,_,S,k,E,T){try{var M=e[E](T),R=M.value}catch(e){return void _(e)}M.done?l(R):Promise.resolve(R).then(S,k)}function _asyncToGenerator(e){return function(){var l=this,_=arguments;return new Promise(function(S,k){var E=e.apply(l,_);function _next(e){asyncGeneratorStep(E,S,k,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(E,S,k,_next,_throw,"throw",e)}_next(void 0)})}}function _wrapNativeSuper(e){var l="function"==typeof Map?new Map:void 0;return _wrapNativeSuper=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(l){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==l){if(l.has(e))return l.get(e);l.set(e,Wrapper)}function Wrapper(){return function(e,l,_){if(_isNativeReflectConstruct())return Reflect.construct.apply(null,arguments);var S=[null];S.push.apply(S,l);var k=new(e.bind.apply(e,S));return _&&_setPrototypeOf(k,_.prototype),k}(e,arguments,_getPrototypeOf(this).constructor)}return Wrapper.prototype=Object.create(e.prototype,{constructor:{value:Wrapper,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(Wrapper,e)},_wrapNativeSuper(e)}function _superPropGet(e,l,_,S){var k=_get2(_getPrototypeOf(1&S?e.prototype:e),l,_);return 2&S&&"function"==typeof k?function(e){return k.apply(_,e)}:k}function _get2(){return _get2="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,l,_){var S=_superPropBase(e,l);if(S){var k=Object.getOwnPropertyDescriptor(S,l);return k.get?k.get.call(arguments.length<3?e:_):k.value}},_get2.apply(null,arguments)}function _superPropBase(e,l){for(;!{}.hasOwnProperty.call(e,l)&&null!==(e=_getPrototypeOf(e)););return e}function _callSuper(e,l,_){return l=_getPrototypeOf(l),_possibleConstructorReturn(e,_isNativeReflectConstruct()?Reflect.construct(l,_||[],_getPrototypeOf(e).constructor):l.apply(e,_))}function _possibleConstructorReturn(e,l){if(l&&("object"==_typeof3(l)||"function"==typeof l))return l;if(void 0!==l)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(_isNativeReflectConstruct=function(){return!!e})()}function _getPrototypeOf(e){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_getPrototypeOf(e)}function _inherits(e,l){if("function"!=typeof l&&null!==l)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(l&&l.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),l&&_setPrototypeOf(e,l)}function _setPrototypeOf(e,l){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,l){return e.__proto__=l,e},_setPrototypeOf(e,l)}function _regenerator(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,l,_="function"==typeof Symbol?Symbol:{},S=_.iterator||"@@iterator",k=_.toStringTag||"@@toStringTag";function i(_,S,k,T){var M=S&&S.prototype instanceof Generator?S:Generator,R=Object.create(M.prototype);return _regeneratorDefine2(R,"_invoke",function(_,S,k){var T,M,R,I=0,D=k||[],O=!1,L={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function(l,_){return T=l,M=0,R=e,L.n=_,E}};function d(_,S){for(M=_,R=S,l=0;!O&&I&&!k&&l<D.length;l++){var k,T=D[l],U=L.p,B=T[2];_>3?(k=B===S)&&(R=T[(M=T[4])?5:(M=3,3)],T[4]=T[5]=e):T[0]<=U&&((k=_<2&&U<T[1])?(M=0,L.v=S,L.n=T[1]):U<B&&(k=_<3||T[0]>S||S>B)&&(T[4]=_,T[5]=S,L.n=B,M=0))}if(k||_>1)return E;throw O=!0,S}return function(k,D,U){if(I>1)throw TypeError("Generator is already running");for(O&&1===D&&d(D,U),M=D,R=U;(l=M<2?e:R)||!O;){T||(M?M<3?(M>1&&(L.n=-1),d(M,R)):L.n=R:L.v=R);try{if(I=2,T){if(M||(k="next"),l=T[k]){if(!(l=l.call(T,R)))throw TypeError("iterator result is not an object");if(!l.done)return l;R=l.value,M<2&&(M=0)}else 1===M&&(l=T.return)&&l.call(T),M<2&&(R=TypeError("The iterator does not provide a '"+k+"' method"),M=1);T=e}else if((l=(O=L.n<0)?R:_.call(S,L))!==E)break}catch(l){T=e,M=1,R=l}finally{I=1}}return{value:l,done:O}}}(_,k,T),!0),R}var E={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}l=Object.getPrototypeOf;var T=[][S]?l(l([][S]())):(_regeneratorDefine2(l={},S,function(){return this}),l),M=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(T);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,GeneratorFunctionPrototype):(e.__proto__=GeneratorFunctionPrototype,_regeneratorDefine2(e,k,"GeneratorFunction")),e.prototype=Object.create(M),e}return GeneratorFunction.prototype=GeneratorFunctionPrototype,_regeneratorDefine2(M,"constructor",GeneratorFunctionPrototype),_regeneratorDefine2(GeneratorFunctionPrototype,"constructor",GeneratorFunction),GeneratorFunction.displayName="GeneratorFunction",_regeneratorDefine2(GeneratorFunctionPrototype,k,"GeneratorFunction"),_regeneratorDefine2(M),_regeneratorDefine2(M,k,"Generator"),_regeneratorDefine2(M,S,function(){return this}),_regeneratorDefine2(M,"toString",function(){return"[object Generator]"}),(_regenerator=function(){return{w:i,m:f}})()}function _regeneratorDefine2(e,l,_,S){var k=Object.defineProperty;try{k({},"",{})}catch(e){k=0}_regeneratorDefine2=function(e,l,_,S){function o(l,_){_regeneratorDefine2(e,l,function(e){return this._invoke(l,_,e)})}l?k?k(e,l,{value:_,enumerable:!S,configurable:!S,writable:!S}):e[l]=_:(o("next",0),o("throw",1),o("return",2))},_regeneratorDefine2(e,l,_,S)}function _slicedToArray(e,l){return function(e){if(Array.isArray(e))return e}(e)||function(e,l){var _=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=_){var S,k,E,T,M=[],R=!0,I=!1;try{if(E=(_=_.call(e)).next,0===l){if(Object(_)!==_)return;R=!1}else for(;!(R=(S=E.call(_)).done)&&(M.push(S.value),M.length!==l);R=!0);}catch(e){I=!0,k=e}finally{try{if(!R&&null!=_.return&&(T=_.return(),Object(T)!==T))return}finally{if(I)throw k}}return M}}(e,l)||_unsupportedIterableToArray2(e,l)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _toConsumableArray3(e){return function(e){if(Array.isArray(e))return _arrayLikeToArray2(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||_unsupportedIterableToArray2(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _classCallCheck3(e,l){if(!(e instanceof l))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,l){for(var _=0;_<l.length;_++){var S=l[_];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(e,_toPropertyKey2(S.key),S)}}function _createClass3(e,l,_){return l&&_defineProperties(e.prototype,l),_&&_defineProperties(e,_),Object.defineProperty(e,"prototype",{writable:!1}),e}function ownKeys(e,l){var _=Object.keys(e);if(Object.getOwnPropertySymbols){var S=Object.getOwnPropertySymbols(e);l&&(S=S.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),_.push.apply(_,S)}return _}function _objectSpread2(e){for(var l=1;l<arguments.length;l++){var _=null!=arguments[l]?arguments[l]:{};l%2?ownKeys(Object(_),!0).forEach(function(l){_defineProperty3(e,l,_[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(_)):ownKeys(Object(_)).forEach(function(l){Object.defineProperty(e,l,Object.getOwnPropertyDescriptor(_,l))})}return e}function _defineProperty3(e,l,_){return(l=_toPropertyKey2(l))in e?Object.defineProperty(e,l,{value:_,enumerable:!0,configurable:!0,writable:!0}):e[l]=_,e}function _toPropertyKey2(e){var l=function(e,l){if("object"!=_typeof3(e)||!e)return e;var _=e[Symbol.toPrimitive];if(void 0!==_){var S=_.call(e,l||"default");if("object"!=_typeof3(S))return S;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===l?String:Number)(e)}(e,"string");return"symbol"==_typeof3(l)?l:l+""}function _createForOfIteratorHelper2(e,l){var _="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!_){if(Array.isArray(e)||(_=_unsupportedIterableToArray2(e))||l&&e&&"number"==typeof e.length){_&&(e=_);var S=0,F=function(){};return{s:F,n:function(){return S>=e.length?{done:!0}:{done:!1,value:e[S++]}},e:function(e){throw e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var k,E=!0,T=!1;return{s:function(){_=_.call(e)},n:function(){var e=_.next();return E=e.done,e},e:function(e){T=!0,k=e},f:function(){try{E||null==_.return||_.return()}finally{if(T)throw k}}}}function _unsupportedIterableToArray2(e,l){if(e){if("string"==typeof e)return _arrayLikeToArray2(e,l);var _={}.toString.call(e).slice(8,-1);return"Object"===_&&e.constructor&&(_=e.constructor.name),"Map"===_||"Set"===_?Array.from(e):"Arguments"===_||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(_)?_arrayLikeToArray2(e,l):void 0}}function _arrayLikeToArray2(e,l){(null==l||l>e.length)&&(l=e.length);for(var _=0,S=Array(l);_<l;_++)S[_]=e[_];return S}function _typeof3(e){return _typeof3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof3(e)}function _wrapAsyncGenerator(e){return function(){return new AsyncGenerator(e.apply(this,arguments))}}function AsyncGenerator(e){var l,_;function resume(l,_){try{var S=e[l](_),k=S.value,E=k instanceof _OverloadYield;Promise.resolve(E?k.v:k).then(function(_){if(E){var T="return"===l?"return":"next";if(!k.k||_.done)return resume(T,_);_=e[T](_).value}settle(S.done?"return":"normal",_)},function(e){resume("throw",e)})}catch(e){settle("throw",e)}}function settle(e,S){switch(e){case"return":l.resolve({value:S,done:!0});break;case"throw":l.reject(S);break;default:l.resolve({value:S,done:!1})}(l=l.next)?resume(l.key,l.arg):_=null}this._invoke=function(e,S){return new Promise(function(k,E){var T={key:e,arg:S,resolve:k,reject:E,next:null};_?_=_.next=T:(l=_=T,resume(e,S))})},"function"!=typeof e.return&&(this.return=void 0)}function _awaitAsyncGenerator(e){return new _OverloadYield(e,0)}function _asyncGeneratorDelegate(e){var l={},_=!1;function pump(l,S){return _=!0,S=new Promise(function(_){_(e[l](S))}),{done:!1,value:new _OverloadYield(S,1)}}return l["undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},l.next=function(e){return _?(_=!1,e):pump("next",e)},"function"==typeof e.throw&&(l.throw=function(e){if(_)throw _=!1,e;return pump("throw",e)}),"function"==typeof e.return&&(l.return=function(e){return _?(_=!1,e):pump("return",e)}),l}function _OverloadYield(e,l){this.v=e,this.k=l}function _asyncIterator(e){var l,_,S,k=2;for("undefined"!=typeof Symbol&&(_=Symbol.asyncIterator,S=Symbol.iterator);k--;){if(_&&null!=(l=e[_]))return l.call(e);if(S&&null!=(l=e[S]))return new AsyncFromSyncIterator(l.call(e));_="@@asyncIterator",S="@@iterator"}throw new TypeError("Object is not async iterable")}function AsyncFromSyncIterator(e){function AsyncFromSyncIteratorContinuation(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var l=e.done;return Promise.resolve(e.value).then(function(e){return{value:e,done:l}})}return AsyncFromSyncIterator=function(e){this.s=e,this.n=e.next},AsyncFromSyncIterator.prototype={s:null,n:null,next:function(){return AsyncFromSyncIteratorContinuation(this.n.apply(this.s,arguments))},return:function(e){var l=this.s.return;return void 0===l?Promise.resolve({value:e,done:!0}):AsyncFromSyncIteratorContinuation(l.apply(this.s,arguments))},throw:function(e){var l=this.s.return;return void 0===l?Promise.reject(e):AsyncFromSyncIteratorContinuation(l.apply(this.s,arguments))}},new AsyncFromSyncIterator(e)}AsyncGenerator.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},AsyncGenerator.prototype.next=function(e){return this._invoke("next",e)},AsyncGenerator.prototype.throw=function(e){return this._invoke("throw",e)},AsyncGenerator.prototype.return=function(e){return this._invoke("return",e)},System.register([],function(I,D){"use strict";return{execute:function(){I({I:function(e){return"x"===e||"y"===e?wl[e]?null:(wl[e]=!0,function(){wl[e]=!1}):wl.x||wl.y?null:(wl.x=wl.y=!0,function(){wl.x=wl.y=!1})},O:addUniqueItem,P:removeItem,R:isSVGElement,T:function(e){return isSVGElement(e)&&"svg"===e.tagName},V:function(e,l){var _=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},S=_slicedToArray(setupGesture(e,_),3),k=S[0],E=S[1],T=S[2],onPointerEnter=function(e){if(isValidHover(e)){var _=e.target,S=l(_,e);if("function"==typeof S&&_){var _onPointerLeave=function(e){isValidHover(e)&&(S(e),_.removeEventListener("pointerleave",_onPointerLeave))};_.addEventListener("pointerleave",_onPointerLeave,E)}}};return k.forEach(function(e){e.addEventListener("pointerenter",onPointerEnter,E)}),T},W:function(e,l){var _=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},S=_slicedToArray(setupGesture(e,_),3),k=S[0],E=S[1],T=S[2],startPress=function(e){var S=e.currentTarget;if(isValidPressEvent(e)){Al.add(S);var k=l(S,e),onPointerEnd=function(e,l){window.removeEventListener("pointerup",onPointerUp),window.removeEventListener("pointercancel",onPointerCancel),Al.has(S)&&Al.delete(S),isValidPressEvent(e)&&"function"==typeof k&&k(e,{success:l})},onPointerUp=function(e){onPointerEnd(e,S===window||S===document||_.useGlobalTarget||_isNodeOrChild(S,e.target))},onPointerCancel=function(e){onPointerEnd(e,!1)};window.addEventListener("pointerup",onPointerUp,E),window.addEventListener("pointercancel",onPointerCancel,E)}};return k.forEach(function(e){var l;(_.useGlobalTarget?window:e).addEventListener("pointerdown",startPress,E),isHTMLElement(e)&&(e.addEventListener("focus",function(e){return enableKeyboardPress(e,E)}),l=e,kl.has(l.tagName)||-1!==l.tabIndex||e.hasAttribute("tabindex")||(e.tabIndex=0))}),T},X:velocityPerSecond,Y:interpolate,Z:defaultOffset,_:function(e,l){return"function"==typeof e?function(e){Il.add(e),Rl||(Rl=function(){var e={get width(){return window.innerWidth},get height(){return window.innerHeight}};Il.forEach(function(l){return l(e)})},window.addEventListener("resize",Rl));return function(){Il.delete(e),Il.size||"function"!=typeof Rl||(window.removeEventListener("resize",Rl),Rl=void 0)}}(e):function(e,l){El||function(){if("undefined"==typeof ResizeObserver)return;El=new ResizeObserver(notifyAll)}();var _=resolveElements(e);return _.forEach(function(e){var _,S=Cl.get(e);S||(S=new Set,Cl.set(e,S)),S.add(l),null===(_=El)||void 0===_||_.observe(e)}),function(){_.forEach(function(e){var _,S=Cl.get(e);(null==S||S.delete(l),null!=S&&S.size)||(null===(_=El)||void 0===_||_.unobserve(e))})}}(e,l)},a0:function(e,l){var _,onFrame=function(){var S=l.currentTime,k=(null===S?0:S.value)/100;_!==k&&e(k),_=k};return Gs.preUpdate(onFrame,!0),function(){return js(onFrame)}},a3:function(){var e=!Array.isArray(arguments.length<=0?void 0:arguments[0]),l=e?0:-1,_=0+l<0||arguments.length<=0+l?void 0:arguments[0+l],S=1+l<0||arguments.length<=1+l?void 0:arguments[1+l],k=2+l<0||arguments.length<=2+l?void 0:arguments[2+l],E=3+l<0||arguments.length<=3+l?void 0:arguments[3+l],T=interpolate(S,k,E);return e?T(_):T},a4:function(e,l,_){var S,k=e.get(),E=null,T=k,M="string"==typeof k?k.replace(/[\d.-]/g,""):void 0,stopAnimation=function(){E&&(E.stop(),E=null)},startAnimation=function(){stopAnimation(),E=new Nu(_objectSpread2(_objectSpread2({keyframes:[asNumber(e.get()),asNumber(T)],velocity:e.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01},_),{},{onUpdate:S}))};if(e.attach(function(l,_){return T=l,S=function(e){return _(parseValue(e,M))},Gs.postRender(startAnimation),e.get()},stopAnimation),Pl(l)){var R=l.on("change",function(l){return e.set(parseValue(l,M))}),I=e.on("destroy",R);return function(){R(),I()}}return stopAnimation},a5:getDefaultExportFromCjs,a6:function(e){switch(q.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object WebAssembly.Exception]":return!0;default:return function(e,l){try{return e instanceof l}catch(_){return!1}}(e,Error)}},a7:function(){for(var e=getAsyncContextStrategy(getMainCarrier()),l=arguments.length,_=new Array(l),S=0;S<l;S++)_[S]=arguments[S];if(2===_.length){var k=_[0],E=_[1];return k?e.withSetScope(k,E):e.withScope(E)}return e.withScope(_[0])},a8:function(e,l){return getCurrentScope().captureException(e,function(e){if(!e)return;if(function(e){return e instanceof Y||"function"==typeof e}(e))return{captureContext:e};if(function(e){return Object.keys(e).some(function(e){return Z.includes(e)})}(e))return{captureContext:e};return e}(l))},a9:getClient,aA:function(e,l){return e[0]=l[0],e[1]=l[1],e[2]=l[2],e[3]=l[3],e[4]=l[4],e[5]=l[5],e[6]=l[6],e[7]=l[7],e[8]=l[8],e[9]=l[9],e[10]=l[10],e[11]=l[11],e[12]=l[12],e[13]=l[13],e[14]=l[14],e[15]=l[15],e},aB:function(e,l){var _=l[0],S=l[1],k=l[2],E=l[3],T=l[4],M=l[5],R=l[6],I=l[7],D=l[8],O=l[9],L=l[10],U=l[11],B=l[12],z=l[13],G=l[14],j=l[15],H=_*M-S*T,V=_*R-k*T,W=_*I-E*T,q=S*R-k*M,X=S*I-E*M,K=k*I-E*R,Y=D*z-O*B,Q=D*G-L*B,J=D*j-U*B,Z=O*G-L*z,$=O*j-U*z,ee=L*j-U*G,te=H*ee-V*$+W*Z+q*J-X*Q+K*Y;if(!te)return null;return te=1/te,e[0]=(M*ee-R*$+I*Z)*te,e[1]=(k*$-S*ee-E*Z)*te,e[2]=(z*K-G*X+j*q)*te,e[3]=(L*X-O*K-U*q)*te,e[4]=(R*J-T*ee-I*Q)*te,e[5]=(_*ee-k*J+E*Q)*te,e[6]=(G*W-B*K-j*V)*te,e[7]=(D*K-L*W+U*V)*te,e[8]=(T*$-M*J+I*Y)*te,e[9]=(S*J-_*$-E*Y)*te,e[10]=(B*X-z*W+j*H)*te,e[11]=(O*W-D*X-U*H)*te,e[12]=(M*Q-T*Z-R*Y)*te,e[13]=(_*Z-S*Q+k*Y)*te,e[14]=(z*V-B*q-G*H)*te,e[15]=(D*q-O*V+L*H)*te,e},aD:normalize$6,aE:function(e,l){return e[0]=-l[0],e[1]=-l[1],e[2]=-l[2],e[3]=l[3],e},aF:create$1,aG:dot$3,aH:function(e,l){return e[0]=l[0],e[1]=l[1],e},aJ:function(e,l,_){return e[0]=l[0]*_,e[1]=l[1]*_,e},aL:function(e,l,_){return e[0]=l[0]+_[0],e[1]=l[1]+_[1],e},aM:slerp$1,aN:function(e,l){var _=l[0]-e[0],S=l[1]-e[1],k=l[2]-e[2];return _*_+S*S+k*k},aO:function(e,l,_){var S=l[0],k=l[1],E=l[2],T=l[3],M=_[0],R=_[1],I=_[2],D=_[3];return e[0]=S*D+T*M+k*I-E*R,e[1]=k*D+T*R+E*M-S*I,e[2]=E*D+T*I+S*R-k*M,e[3]=T*D-S*M-k*R-E*I,e},aQ:cross$1,aR:setAxisAngle$1,aS:function(e,l,_){return e[0]=l[0]*_,e[1]=l[1]*_,e[2]=l[2]*_,e},aa:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=$.document,_=(null==l?void 0:l.head)||(null==l?void 0:l.body);if(!_)return void(ee&&W.error("[showReportDialog] Global document not defined"));var S=getCurrentScope(),k=getClient(),E=null==k?void 0:k.getDsn();if(!E)return void(ee&&W.error("[showReportDialog] DSN not configured"));var T=_objectSpread2(_objectSpread2({},e),{},{user:_objectSpread2(_objectSpread2({},S.getUser()),e.user),eventId:e.eventId||(R=getMainCarrier(),I=getAsyncContextStrategy(R),I.getIsolationScope()).lastEventId()}),M=$.document.createElement("script");var R,I;M.async=!0,M.crossOrigin="anonymous",M.src=function(e,l){var _=function(e){var l="string"==typeof e?function(e){var l=J.exec(e);if(!l)return void consoleSandbox(function(){});var _=_slicedToArray(l.slice(1),6),S=_[0],k=_[1],E=_[2],T=void 0===E?"":E,M=_[3],R=void 0===M?"":M,I=_[4],D=void 0===I?"":I,O=_[5],L="",U=void 0===O?"":O,B=U.split("/");B.length>1&&(L=B.slice(0,-1).join("/"),U=B.pop());if(U){var z=U.match(/^\d+/);z&&(U=z[0])}return dsnFromComponents({host:R,pass:T,path:L,projectId:U,port:D,protocol:S,publicKey:k})}(e):dsnFromComponents(e);if(!l||!function(e){if(!G)return!0;var l=e.port,_=e.projectId,S=e.protocol,k=["protocol","publicKey","host","projectId"].find(function(l){return!e[l]&&(W.error("Invalid Sentry Dsn: ".concat(l," missing")),!0)});if(k)return!1;if(!_.match(/^\d+$/))return W.error("Invalid Sentry Dsn: Invalid projectId ".concat(_)),!1;if(!function(e){return"http"===e||"https"===e}(S))return W.error("Invalid Sentry Dsn: Invalid protocol ".concat(S)),!1;if(l&&isNaN(parseInt(l,10)))return W.error("Invalid Sentry Dsn: Invalid port ".concat(l)),!1;return!0}(l))return;return l}(e);if(!_)return"";var S="".concat(function(e){var l=e.protocol?"".concat(e.protocol,":"):"",_=e.port?":".concat(e.port):"";return"".concat(l,"//").concat(e.host).concat(_).concat(e.path?"/".concat(e.path):"","/api/")}(_),"embed/error-page/"),k="dsn=".concat(function(e){var l=arguments.length>1&&void 0!==arguments[1]&&arguments[1],_=e.host,S=e.path,k=e.pass,E=e.port,T=e.projectId,M=e.protocol,R=e.publicKey;return"".concat(M,"://").concat(R).concat(l&&k?":".concat(k):"")+"@".concat(_).concat(E?":".concat(E):"","/").concat(S?"".concat(S,"/"):S).concat(T)}(_));for(var E in l)if("dsn"!==E&&"onClose"!==E)if("user"===E){var T=l.user;if(!T)continue;T.name&&(k+="&name=".concat(encodeURIComponent(T.name))),T.email&&(k+="&email=".concat(encodeURIComponent(T.email)))}else k+="&".concat(encodeURIComponent(E),"=").concat(encodeURIComponent(l[E]));return"".concat(S,"?").concat(k)}(E,T);var D=T.onLoad,O=T.onClose;D&&(M.onload=D);if(O){var _reportDialogClosedMessageHandler=function(e){if("__sentry_reportdialog_closed__"===e.data)try{O()}finally{$.removeEventListener("message",_reportDialogClosedMessageHandler)}};$.addEventListener("message",_reportDialogClosedMessageHandler)}_.appendChild(M)},ad:requireSrc$3,ae:requireSrc$2,af:function(){return L||(L=1,U.exports=requireScheduler_production()),U.exports},am:function(e,l,_){if(ms.randomUUID&&!e)return ms.randomUUID();return function(e){var l,_,S,k;e=e||{};var E=null!==(l=null!==(_=e.random)&&void 0!==_?_:null===(S=(k=e).rng)||void 0===S?void 0:S.call(k))&&void 0!==l?l:function(){if(!fs){if("undefined"==typeof crypto||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");fs=crypto.getRandomValues.bind(crypto)}return fs(gs)}();if(E.length<16)throw new Error("Random bytes length must be >= 16");return E[6]=15&E[6]|64,E[8]=63&E[8]|128,function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(ps[e[l+0]]+ps[e[l+1]]+ps[e[l+2]]+ps[e[l+3]]+"-"+ps[e[l+4]]+ps[e[l+5]]+"-"+ps[e[l+6]]+ps[e[l+7]]+"-"+ps[e[l+8]]+ps[e[l+9]]+"-"+ps[e[l+10]]+ps[e[l+11]]+ps[e[l+12]]+ps[e[l+13]]+ps[e[l+14]]+ps[e[l+15]]).toLowerCase()}(E)}(e)},an:function(){var e=new Ll(16);Ll!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0);return e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},ao:fromValues$1,ap:function(e,l,_){return e[0]=l,e[1]=_,e},aq:create,ar:function(e,l){var _=new Ll(2);return _[0]=e,_[1]=l,_},as:function(e){var l=new Ll(2);return l[0]=e[0],l[1]=e[1],l},at:function(e,l,_){var S=_[0],k=_[1],E=_[2],T=_[3],M=l[0],R=l[1],I=l[2],D=k*I-E*R,O=E*M-S*I,L=S*R-k*M;return D+=D,O+=O,L+=L,e[0]=M+T*D+k*L-E*O,e[1]=R+T*O+E*D-S*L,e[2]=I+T*L+S*O-k*D,e},au:create$3,av:function(e,l,_){var S=l[0],k=l[1],E=l[2],T=l[3],M=l[4],R=l[5],I=l[6],D=l[7],O=l[8],L=l[9],U=l[10],B=l[11],z=l[12],G=l[13],j=l[14],H=l[15],V=_[0],W=_[1],q=_[2],X=_[3];return e[0]=V*S+W*M+q*O+X*z,e[1]=V*k+W*R+q*L+X*G,e[2]=V*E+W*I+q*U+X*j,e[3]=V*T+W*D+q*B+X*H,V=_[4],W=_[5],q=_[6],X=_[7],e[4]=V*S+W*M+q*O+X*z,e[5]=V*k+W*R+q*L+X*G,e[6]=V*E+W*I+q*U+X*j,e[7]=V*T+W*D+q*B+X*H,V=_[8],W=_[9],q=_[10],X=_[11],e[8]=V*S+W*M+q*O+X*z,e[9]=V*k+W*R+q*L+X*G,e[10]=V*E+W*I+q*U+X*j,e[11]=V*T+W*D+q*B+X*H,V=_[12],W=_[13],q=_[14],X=_[15],e[12]=V*S+W*M+q*O+X*z,e[13]=V*k+W*R+q*L+X*G,e[14]=V*E+W*I+q*U+X*j,e[15]=V*T+W*D+q*B+X*H,e},aw:function(e,l){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=l[0],e[13]=l[1],e[14]=l[2],e[15]=1,e},ax:function(e,l){return e[0]=-l[0],e[1]=-l[1],e[2]=-l[2],e},ay:function(e,l,_,S){var k=l[0],E=l[1],T=l[2],M=S[0],R=S[1],I=S[2],D=k-_[0],O=E-_[1],L=T-_[2],U=D*D+O*O+L*L;U>0&&(D*=U=1/Math.sqrt(U),O*=U,L*=U);var B=R*L-I*O,z=I*D-M*L,G=M*O-R*D;U=B*B+z*z+G*G,U>0&&(B*=U=1/Math.sqrt(U),z*=U,G*=U);return e[0]=B,e[1]=z,e[2]=G,e[3]=0,e[4]=O*G-L*z,e[5]=L*B-D*G,e[6]=D*z-O*B,e[7]=0,e[8]=D,e[9]=O,e[10]=L,e[11]=0,e[12]=k,e[13]=E,e[14]=T,e[15]=1,e},az:function(e,l){return e[0]=l[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=l[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=l[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},b1:clsx,d:function(e,l){return new bl(e,l)},i:isHTMLElement,q:getAnimatableNone,s:defaultTransformValue,w:function(e,l){var _,S;return null!==(_=null!==(S=null==e?void 0:e[l])&&void 0!==S?S:null==e?void 0:e.default)&&void 0!==_?_:e},y:makeAnimationInstant});var D="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function getAugmentedNamespace(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var l=e.default;if("function"==typeof l){var _=function a(){var e=!1;try{e=this instanceof a}catch(_){}return e?Reflect.construct(l,arguments,this.constructor):l.apply(this,arguments)};_.prototype=l.prototype}else _={};return Object.defineProperty(_,"__esModule",{value:!0}),Object.keys(e).forEach(function(l){var S=Object.getOwnPropertyDescriptor(e,l);Object.defineProperty(_,l,S.get?S:{enumerable:!0,get:function(){return e[l]}})}),_}var O,L,U={exports:{}},B={};function requireScheduler_production(){return O||(O=1,function(e){function push(e,l){var _=e.length;e.push(l);e:for(;0<_;){var S=_-1>>>1,k=e[S];if(!(0<compare(k,l)))break e;e[S]=l,e[_]=k,_=S}}function peek(e){return 0===e.length?null:e[0]}function pop(e){if(0===e.length)return null;var l=e[0],_=e.pop();if(_!==l){e[0]=_;e:for(var S=0,k=e.length,E=k>>>1;S<E;){var T=2*(S+1)-1,M=e[T],R=T+1,I=e[R];if(0>compare(M,_))R<k&&0>compare(I,M)?(e[S]=I,e[R]=_,S=R):(e[S]=M,e[T]=_,S=T);else{if(!(R<k&&0>compare(I,_)))break e;e[S]=I,e[R]=_,S=R}}}return l}function compare(e,l){var _=e.sortIndex-l.sortIndex;return 0!==_?_:e.id-l.id}if(e.unstable_now=void 0,"object"===("undefined"==typeof performance?"undefined":_typeof3(performance))&&"function"==typeof performance.now){var l=performance;e.unstable_now=function(){return l.now()}}else{var _=Date,S=_.now();e.unstable_now=function(){return _.now()-S}}var k=[],E=[],T=1,M=null,R=3,I=!1,D=!1,O=!1,L=!1,U="function"==typeof setTimeout?setTimeout:null,B="function"==typeof clearTimeout?clearTimeout:null,z="undefined"!=typeof setImmediate?setImmediate:null;function advanceTimers(e){for(var l=peek(E);null!==l;){if(null===l.callback)pop(E);else{if(!(l.startTime<=e))break;pop(E),l.sortIndex=l.expirationTime,push(k,l)}l=peek(E)}}function handleTimeout(e){if(O=!1,advanceTimers(e),!D)if(null!==peek(k))D=!0,j||(j=!0,G());else{var l=peek(E);null!==l&&requestHostTimeout(handleTimeout,l.startTime-e)}}var G,j=!1,H=-1,V=5,W=-1;function shouldYieldToHost(){return!!L||!(e.unstable_now()-W<V)}function performWorkUntilDeadline(){if(L=!1,j){var l=e.unstable_now();W=l;var _=!0;try{e:{D=!1,O&&(O=!1,B(H),H=-1),I=!0;var S=R;try{t:{for(advanceTimers(l),M=peek(k);null!==M&&!(M.expirationTime>l&&shouldYieldToHost());){var T=M.callback;if("function"==typeof T){M.callback=null,R=M.priorityLevel;var U=T(M.expirationTime<=l);if(l=e.unstable_now(),"function"==typeof U){M.callback=U,advanceTimers(l),_=!0;break t}M===peek(k)&&pop(k),advanceTimers(l)}else pop(k);M=peek(k)}if(null!==M)_=!0;else{var z=peek(E);null!==z&&requestHostTimeout(handleTimeout,z.startTime-l),_=!1}}break e}finally{M=null,R=S,I=!1}_=void 0}}finally{_?G():j=!1}}}if("function"==typeof z)G=function(){z(performWorkUntilDeadline)};else if("undefined"!=typeof MessageChannel){var q=new MessageChannel,X=q.port2;q.port1.onmessage=performWorkUntilDeadline,G=function(){X.postMessage(null)}}else G=function(){U(performWorkUntilDeadline,0)};function requestHostTimeout(l,_){H=U(function(){l(e.unstable_now())},_)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_forceFrameRate=function(e){0>e||125<e||(V=0<e?Math.floor(1e3/e):5)},e.unstable_getCurrentPriorityLevel=function(){return R},e.unstable_next=function(e){switch(R){case 1:case 2:case 3:var l=3;break;default:l=R}var _=R;R=l;try{return e()}finally{R=_}},e.unstable_requestPaint=function(){L=!0},e.unstable_runWithPriority=function(e,l){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var _=R;R=e;try{return l()}finally{R=_}},e.unstable_scheduleCallback=function(l,_,S){var M=e.unstable_now();switch("object"===_typeof3(S)&&null!==S?S="number"==typeof(S=S.delay)&&0<S?M+S:M:S=M,l){case 1:var R=-1;break;case 2:R=250;break;case 5:R=1073741823;break;case 4:R=1e4;break;default:R=5e3}return l={id:T++,callback:_,priorityLevel:l,startTime:S,expirationTime:R=S+R,sortIndex:-1},S>M?(l.sortIndex=S,push(E,l),null===peek(k)&&l===peek(E)&&(O?(B(H),H=-1):O=!0,requestHostTimeout(handleTimeout,S-M))):(l.sortIndex=R,push(k,l),D||I||(D=!0,j||(j=!0,G()))),l},e.unstable_shouldYield=shouldYieldToHost,e.unstable_wrapCallback=function(e){var l=R;return function(){var _=R;R=l;try{return e.apply(this,arguments)}finally{R=_}}}}(B)),B}var z=I("ag",function(e,l,_){var S=Promise.resolve();function handlePreloadError(e){var l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=e,window.dispatchEvent(l),!l.defaultPrevented)throw e}return S.then(function(l){var _,S=_createForOfIteratorHelper2(l||[]);try{for(S.s();!(_=S.n()).done;){var k=_.value;"rejected"===k.status&&handlePreloadError(k.reason)}}catch(E){S.e(E)}finally{S.f()}return e().catch(handlePreloadError)})}),G="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,j=globalThis,H="10.18.0";function getMainCarrier(){return getSentryCarrier(j),j}function getSentryCarrier(e){var l=e.__SENTRY__=e.__SENTRY__||{};return l.version=l.version||H,l[H]=l[H]||{}}function getGlobalSingleton(e,l){var _=arguments.length>2&&void 0!==arguments[2]?arguments[2]:j,S=_.__SENTRY__=_.__SENTRY__||{},k=S[H]=S[H]||{};return k[e]||(k[e]=l())}var V={};function consoleSandbox(e){if(!("console"in j))return e();var l=j.console,_={},S=Object.keys(V);S.forEach(function(e){var S=V[e];_[e]=l[e],l[e]=S});try{return e()}finally{S.forEach(function(e){l[e]=_[e]})}}function isEnabled(){return _getLoggerSettings().enabled}function _maybeLog(e){for(var l=arguments.length,_=new Array(l>1?l-1:0),S=1;S<l;S++)_[S-1]=arguments[S];G&&isEnabled()&&consoleSandbox(function(){var l;(l=j.console)[e].apply(l,["".concat("Sentry Logger ","[").concat(e,"]:")].concat(_))})}function _getLoggerSettings(){return G?getGlobalSingleton("loggerSettings",function(){return{enabled:!1}}):{enabled:!1}}var W=I("ab",{enable:function(){_getLoggerSettings().enabled=!0},disable:function(){_getLoggerSettings().enabled=!1},isEnabled:isEnabled,log:function(){for(var e=arguments.length,l=new Array(e),_=0;_<e;_++)l[_]=arguments[_];_maybeLog.apply(void 0,["log"].concat(l))},warn:function(){for(var e=arguments.length,l=new Array(e),_=0;_<e;_++)l[_]=arguments[_];_maybeLog.apply(void 0,["warn"].concat(l))},error:function(){for(var e=arguments.length,l=new Array(e),_=0;_<e;_++)l[_]=arguments[_];_maybeLog.apply(void 0,["error"].concat(l))}}),q=Object.prototype.toString;function isPlainObject$2(e){return function(e,l){return q.call(e)==="[object ".concat(l,"]")}(e,"Object")}function truncate(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return"string"!=typeof e||0===l||e.length<=l?e:"".concat(e.slice(0,l),"...")}function uuid4(){var e,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(e=j).crypto||e.msCrypto,getRandomByte=function(){return 16*Math.random()};try{if(null!=l&&l.randomUUID)return l.randomUUID().replace(/-/g,"");null!=l&&l.getRandomValues&&(getRandomByte=function(){var e=new Uint8Array(1);return l.getRandomValues(e),e[0]})}catch(_){}return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,function(e){return(e^(15&getRandomByte())>>e/4).toString(16)})}var X;function dateTimestampInSeconds(){return Date.now()/1e3}function timestampInSeconds(){return(null!=X?X:X=function(){var e=j.performance;if(null==e||!e.now||!e.timeOrigin)return dateTimestampInSeconds;var l=e.timeOrigin;return function(){return(l+e.now())/1e3}}())()}function merge$1(e,l){var _=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;if(!l||"object"!==_typeof3(l)||_<=0)return l;if(e&&0===Object.keys(l).length)return e;var S=_objectSpread2({},e);for(var k in l)Object.prototype.hasOwnProperty.call(l,k)&&(S[k]=merge$1(S[k],l[k],_-1));return S}function generateTraceId(){return uuid4()}var K="_sentrySpan";function _setSpanForScope(e,l){l?function(e,l,_){try{Object.defineProperty(e,l,{value:_,writable:!0,configurable:!0})}catch(S){G&&W.log('Failed to add non-enumerable property "'.concat(l,'" to object'),e)}}(e,K,l):delete e[K]}function _getSpanForScope(e){return e[K]}var Y=function(){function Scope(){_classCallCheck3(this,Scope),this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:generateTraceId(),sampleRand:Math.random()}}return _createClass3(Scope,[{key:"clone",value:function(){var e=new Scope;return e._breadcrumbs=_toConsumableArray3(this._breadcrumbs),e._tags=_objectSpread2({},this._tags),e._extra=_objectSpread2({},this._extra),e._contexts=_objectSpread2({},this._contexts),this._contexts.flags&&(e._contexts.flags={values:_toConsumableArray3(this._contexts.flags.values)}),e._user=this._user,e._level=this._level,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=_toConsumableArray3(this._eventProcessors),e._attachments=_toConsumableArray3(this._attachments),e._sdkProcessingMetadata=_objectSpread2({},this._sdkProcessingMetadata),e._propagationContext=_objectSpread2({},this._propagationContext),e._client=this._client,e._lastEventId=this._lastEventId,_setSpanForScope(e,_getSpanForScope(this)),e}},{key:"setClient",value:function(e){this._client=e}},{key:"setLastEventId",value:function(e){this._lastEventId=e}},{key:"getClient",value:function(){return this._client}},{key:"lastEventId",value:function(){return this._lastEventId}},{key:"addScopeListener",value:function(e){this._scopeListeners.push(e)}},{key:"addEventProcessor",value:function(e){return this._eventProcessors.push(e),this}},{key:"setUser",value:function(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(l.user&&(!e.ipAddress&&l.user.ip_address&&(e.ipAddress=l.user.ip_address),e.did||l.did||(e.did=l.user.id||l.user.email||l.user.username)),e.timestamp=l.timestamp||timestampInSeconds(),l.abnormal_mechanism&&(e.abnormal_mechanism=l.abnormal_mechanism),l.ignoreDuration&&(e.ignoreDuration=l.ignoreDuration),l.sid&&(e.sid=32===l.sid.length?l.sid:uuid4()),void 0!==l.init&&(e.init=l.init),!e.did&&l.did&&(e.did="".concat(l.did)),"number"==typeof l.started&&(e.started=l.started),e.ignoreDuration)e.duration=void 0;else if("number"==typeof l.duration)e.duration=l.duration;else{var _=e.timestamp-e.started;e.duration=_>=0?_:0}l.release&&(e.release=l.release),l.environment&&(e.environment=l.environment),!e.ipAddress&&l.ipAddress&&(e.ipAddress=l.ipAddress),!e.userAgent&&l.userAgent&&(e.userAgent=l.userAgent),"number"==typeof l.errors&&(e.errors=l.errors),l.status&&(e.status=l.status)}(this._session,{user:e}),this._notifyScopeListeners(),this}},{key:"getUser",value:function(){return this._user}},{key:"setTags",value:function(e){return this._tags=_objectSpread2(_objectSpread2({},this._tags),e),this._notifyScopeListeners(),this}},{key:"setTag",value:function(e,l){return this._tags=_objectSpread2(_objectSpread2({},this._tags),{},_defineProperty3({},e,l)),this._notifyScopeListeners(),this}},{key:"setExtras",value:function(e){return this._extra=_objectSpread2(_objectSpread2({},this._extra),e),this._notifyScopeListeners(),this}},{key:"setExtra",value:function(e,l){return this._extra=_objectSpread2(_objectSpread2({},this._extra),{},_defineProperty3({},e,l)),this._notifyScopeListeners(),this}},{key:"setFingerprint",value:function(e){return this._fingerprint=e,this._notifyScopeListeners(),this}},{key:"setLevel",value:function(e){return this._level=e,this._notifyScopeListeners(),this}},{key:"setTransactionName",value:function(e){return this._transactionName=e,this._notifyScopeListeners(),this}},{key:"setContext",value:function(e,l){return null===l?delete this._contexts[e]:this._contexts[e]=l,this._notifyScopeListeners(),this}},{key:"setSession",value:function(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}},{key:"getSession",value:function(){return this._session}},{key:"update",value:function(e){if(!e)return this;var l="function"==typeof e?e(this):e,_=(l instanceof Scope?l.getScopeData():isPlainObject$2(l)?e:void 0)||{},S=_.tags,k=_.extra,E=_.user,T=_.contexts,M=_.level,R=_.fingerprint,I=void 0===R?[]:R,D=_.propagationContext;return this._tags=_objectSpread2(_objectSpread2({},this._tags),S),this._extra=_objectSpread2(_objectSpread2({},this._extra),k),this._contexts=_objectSpread2(_objectSpread2({},this._contexts),T),E&&Object.keys(E).length&&(this._user=E),M&&(this._level=M),I.length&&(this._fingerprint=I),D&&(this._propagationContext=D),this}},{key:"clear",value:function(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._session=void 0,_setSpanForScope(this,void 0),this._attachments=[],this.setPropagationContext({traceId:generateTraceId(),sampleRand:Math.random()}),this._notifyScopeListeners(),this}},{key:"addBreadcrumb",value:function(e,l){var _="number"==typeof l?l:100;if(_<=0)return this;var S,k=_objectSpread2(_objectSpread2({timestamp:dateTimestampInSeconds()},e),{},{message:e.message?truncate(e.message,2048):e.message});(this._breadcrumbs.push(k),this._breadcrumbs.length>_)&&(this._breadcrumbs=this._breadcrumbs.slice(-_),null===(S=this._client)||void 0===S||S.recordDroppedEvent("buffer_overflow","log_item"));return this._notifyScopeListeners(),this}},{key:"getLastBreadcrumb",value:function(){return this._breadcrumbs[this._breadcrumbs.length-1]}},{key:"clearBreadcrumbs",value:function(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}},{key:"addAttachment",value:function(e){return this._attachments.push(e),this}},{key:"clearAttachments",value:function(){return this._attachments=[],this}},{key:"getScopeData",value:function(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:_getSpanForScope(this)}}},{key:"setSDKProcessingMetadata",value:function(e){return this._sdkProcessingMetadata=merge$1(this._sdkProcessingMetadata,e,2),this}},{key:"setPropagationContext",value:function(e){return this._propagationContext=e,this}},{key:"getPropagationContext",value:function(){return this._propagationContext}},{key:"captureException",value:function(e,l){var _=(null==l?void 0:l.event_id)||uuid4();if(!this._client)return G&&W.warn("No client configured on scope - will not capture exception!"),_;var S=new Error("Sentry syntheticException");return this._client.captureException(e,_objectSpread2(_objectSpread2({originalException:e,syntheticException:S},l),{},{event_id:_}),this),_}},{key:"captureMessage",value:function(e,l,_){var S=(null==_?void 0:_.event_id)||uuid4();if(!this._client)return G&&W.warn("No client configured on scope - will not capture message!"),S;var k=new Error(e);return this._client.captureMessage(e,l,_objectSpread2(_objectSpread2({originalException:e,syntheticException:k},_),{},{event_id:S}),this),S}},{key:"captureEvent",value:function(e,l){var _=(null==l?void 0:l.event_id)||uuid4();return this._client?(this._client.captureEvent(e,_objectSpread2(_objectSpread2({},l),{},{event_id:_}),this),_):(G&&W.warn("No client configured on scope - will not capture event!"),_)}},{key:"_notifyScopeListeners",value:function(){var e=this;this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(function(l){l(e)}),this._notifyingListeners=!1)}}])}();var Q=function(){return _createClass3(function AsyncContextStack(e,l){var _,S;_classCallCheck3(this,AsyncContextStack),_=e||new Y,S=l||new Y,this._stack=[{scope:_}],this._isolationScope=S},[{key:"withScope",value:function(e){var l,_,S=this,k=this._pushScope();try{l=e(k)}catch(ta){throw this._popScope(),ta}return _=l,Boolean((null==_?void 0:_.then)&&"function"==typeof _.then)?l.then(function(e){return S._popScope(),e},function(e){throw S._popScope(),e}):(this._popScope(),l)}},{key:"getClient",value:function(){return this.getStackTop().client}},{key:"getScope",value:function(){return this.getStackTop().scope}},{key:"getIsolationScope",value:function(){return this._isolationScope}},{key:"getStackTop",value:function(){return this._stack[this._stack.length-1]}},{key:"_pushScope",value:function(){var e=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:e}),e}},{key:"_popScope",value:function(){return!(this._stack.length<=1)&&!!this._stack.pop()}}])}();function getAsyncContextStack(){var e=getSentryCarrier(getMainCarrier());return e.stack=e.stack||new Q(getGlobalSingleton("defaultCurrentScope",function(){return new Y}),getGlobalSingleton("defaultIsolationScope",function(){return new Y}))}function withScope$1(e){return getAsyncContextStack().withScope(e)}function withSetScope(e,l){var _=getAsyncContextStack();return _.withScope(function(){return _.getStackTop().scope=e,l(e)})}function withIsolationScope(e){return getAsyncContextStack().withScope(function(){return e(getAsyncContextStack().getIsolationScope())})}function getAsyncContextStrategy(e){var l=getSentryCarrier(e);return l.acs?l.acs:{withIsolationScope:withIsolationScope,withScope:withScope$1,withSetScope:withSetScope,withSetIsolationScope:function(e,l){return withIsolationScope(l)},getCurrentScope:function(){return getAsyncContextStack().getScope()},getIsolationScope:function(){return getAsyncContextStack().getIsolationScope()}}}function getCurrentScope(){return getAsyncContextStrategy(getMainCarrier()).getCurrentScope()}function getClient(){return getCurrentScope().getClient()}var J=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function dsnFromComponents(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}var Z=["user","level","extra","contexts","tags","fingerprint","propagationContext"];var $=j,ee="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;var te,re={exports:{}};function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _inheritsLoose(e,l){e.prototype=Object.create(l.prototype),e.prototype.constructor=e,e.__proto__=l}
/*!
			 * GSAP 3.13.0
			 * https://gsap.com
			 *
			 * @license Copyright 2008-2025, GreenSock. All rights reserved.
			 * Subject to the terms at https://gsap.com/standard-license
			 * @author: Jack Doyle, jack@greensock.com
			*/te||(te=1,function(e){!function(l,_){e.exports=_()}(0,function(){return function(){var e={"./packages/@logrocket/console/src/index.js":
/*!**************************************************!*\
					  !*** ./packages/@logrocket/console/src/index.js ***!
					  \**************************************************/function(e,l,_){var S=_(/*! @babel/runtime/helpers/interopRequireDefault */"./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var k=S(_(/*! ./registerConsole */"./packages/@logrocket/console/src/registerConsole.js")).default;l.default=k},"./packages/@logrocket/console/src/registerConsole.js":
/*!************************************************************!*\
					  !*** ./packages/@logrocket/console/src/registerConsole.js ***!
					  \************************************************************/function(e,l,_){var S=_(/*! @babel/runtime/helpers/interopRequireDefault */"./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(l,"__esModule",{value:!0}),l.default=function(e){var l=[];return["log","warn","info","error","debug"].forEach(function(_){l.push((0,E.default)(console,_,function(){for(var l=arguments.length,S=new Array(l),E=0;E<l;E++)S[E]=arguments[E];e.addEvent("lr.core.LogEvent",function(){var l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},E=l.isEnabled;if("object"===(0,k.default)(E)&&!1===E[_]||!1===E)return null;if("error"===_&&l.shouldAggregateConsoleErrors)if(S&&S.length>=2&&"ERROR"===S[0]){var M="";try{M=" ".concat(S[1])}catch(R){}T.Capture.captureMessage(e,"".concat(S[0]).concat(M),S,{},!0)}else T.Capture.captureMessage(e,S[0],S,{},!0);return{logLevel:_.toUpperCase(),args:S}})}))}),function(){l.forEach(function(e){return e()})}};var k=S(_(/*! @babel/runtime/helpers/typeof */"./node_modules/@babel/runtime/helpers/typeof.js")),E=S(_(/*! @logrocket/utils/src/enhanceFunc */"./packages/@logrocket/utils/src/enhanceFunc.ts")),T=_(/*! @logrocket/exceptions */"./packages/@logrocket/exceptions/src/index.js")},"./packages/@logrocket/exceptions/src/Capture.js":
/*!*******************************************************!*\
					  !*** ./packages/@logrocket/exceptions/src/Capture.js ***!
					  \*******************************************************/function(e,l,_){var S=_(/*! @babel/runtime/helpers/interopRequireDefault */"./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(l,"__esModule",{value:!0}),l.captureMessage=function(e,l,_){var S=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},E=arguments.length>4&&void 0!==arguments[4]&&arguments[4],T={exceptionType:E?"CONSOLE":"MESSAGE",message:l,messageArgs:_,browserHref:window.location?window.location.href:""};(0,k.scrubException)(T,S),e.addEvent("lr.core.Exception",function(){return T})},l.captureException=function(e,l){var _=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},S=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,M=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"WINDOW",R=S||E.default.computeStackTrace(l),I={exceptionType:M,errorType:R.name,message:R.message,browserHref:window.location?window.location.href:""};(0,k.scrubException)(I,_);var D={_stackTrace:(0,T.default)(R)};e.addEvent("lr.core.Exception",function(){return I},D)};var k=_(/*! @logrocket/utils/src/scrubException */"./packages/@logrocket/utils/src/scrubException.ts"),E=S(_(/*! @logrocket/utils/src/TraceKit */"./packages/@logrocket/utils/src/TraceKit.js")),T=S(_(/*! ./stackTraceFromError */"./packages/@logrocket/exceptions/src/stackTraceFromError.js"))},"./packages/@logrocket/exceptions/src/index.js":
/*!*****************************************************!*\
					  !*** ./packages/@logrocket/exceptions/src/index.js ***!
					  \*****************************************************/function(e,l,_){var S=_(/*! @babel/runtime/helpers/interopRequireDefault */"./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),k=_(/*! @babel/runtime/helpers/typeof */"./node_modules/@babel/runtime/helpers/typeof.js");Object.defineProperty(l,"__esModule",{value:!0}),Object.defineProperty(l,"registerExceptions",{enumerable:!0,get:function(){return E.default}}),l.Capture=void 0;var E=S(_(/*! ./registerExceptions */"./packages/@logrocket/exceptions/src/registerExceptions.js")),T=function(e,l){if(e&&e.__esModule)return e;if(null===e||"object"!==k(e)&&"function"!=typeof e)return{default:e};var _=_getRequireWildcardCache(l);if(_&&_.has(e))return _.get(e);var S={},E=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var T in e)if("default"!==T&&Object.prototype.hasOwnProperty.call(e,T)){var M=E?Object.getOwnPropertyDescriptor(e,T):null;M&&(M.get||M.set)?Object.defineProperty(S,T,M):S[T]=e[T]}return S.default=e,_&&_.set(e,S),S}(_(/*! ./Capture */"./packages/@logrocket/exceptions/src/Capture.js"));function _getRequireWildcardCache(e){if("function"!=typeof WeakMap)return null;var l=new WeakMap,_=new WeakMap;return(_getRequireWildcardCache=function(e){return e?_:l})(e)}l.Capture=T},"./packages/@logrocket/exceptions/src/raven/raven.js":
/*!***********************************************************!*\
					  !*** ./packages/@logrocket/exceptions/src/raven/raven.js ***!
					  \***********************************************************/function(e,l,_){var S=_(/*! @babel/runtime/helpers/interopRequireDefault */"./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var k=S(_(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js")),E=S(_(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js")),T=S(_(/*! @logrocket/utils/src/TraceKit */"./packages/@logrocket/utils/src/TraceKit.js")),M=Object.prototype;function isFunction(e){return"function"==typeof e}function hasKey(e,l){return M.hasOwnProperty.call(e,l)}function fill(e,l,_,S){var k=e[l];e[l]=_(k),S&&S.push([e,l,k])}var R="undefined"!=typeof window?window:void 0!==_.g?_.g:"undefined"!=typeof self?self:{};R.document;var I=function(){function Handler(e){var l=e.captureException;(0,k.default)(this,Handler),this._errorHandler=this._errorHandler.bind(this),this._ignoreOnError=0,this._wrappedBuiltIns=[],this.captureException=l,T.default.report.subscribe(this._errorHandler),this._instrumentTryCatch()}return(0,E.default)(Handler,[{key:"uninstall",value:function(){var e;for(T.default.report.unsubscribe(this._errorHandler);this._wrappedBuiltIns.length;){var l=(e=this._wrappedBuiltIns.shift())[0],_=e[1],S=e[2];l[_]=S}}},{key:"_errorHandler",value:function(e){this._ignoreOnError||this.captureException(e)}},{key:"_ignoreNextOnError",value:function(){var e=this;this._ignoreOnError+=1,setTimeout(function(){e._ignoreOnError-=1})}},{key:"context",value:function(e,l,_){return isFunction(e)&&(_=l||[],l=e,e=void 0),this.wrap(e,l).apply(this,_)}},{key:"wrap",value:function(e,l,_){var S=this;if(void 0===l&&!isFunction(e))return e;if(isFunction(e)&&(l=e,e=void 0),!isFunction(l))return l;try{if(l.__lr__)return l;if(l.__lr_wrapper__)return l.__lr_wrapper__;if(!Object.isExtensible(l))return l}catch(ta){return l}function wrapped(){var k=[],E=arguments.length,M=!e||e&&!1!==e.deep;for(_&&isFunction(_)&&_.apply(this,arguments);E--;)k[E]=M?S.wrap(e,arguments[E]):arguments[E];try{return l.apply(this,k)}catch(ta){throw S._ignoreNextOnError(),S.captureException(T.default.computeStackTrace(ta),e),ta}}for(var k in l)hasKey(l,k)&&(wrapped[k]=l[k]);return wrapped.prototype=l.prototype,l.__lr_wrapper__=wrapped,wrapped.__lr__=!0,wrapped.__inner__=l,wrapped}},{key:"_instrumentTryCatch",value:function(){var e=this,l=e._wrappedBuiltIns;function wrapTimeFn(l){return function(_,S){for(var k=new Array(arguments.length),E=0;E<k.length;++E)k[E]=arguments[E];var T=k[0];return isFunction(T)&&(k[0]=e.wrap(T)),l.apply?l.apply(this,k):l(k[0],k[1])}}function wrapEventTarget(_){var S=R[_]&&R[_].prototype;S&&S.hasOwnProperty&&S.hasOwnProperty("addEventListener")&&(fill(S,"addEventListener",function(l){return function(_,S,k,E){try{S&&S.handleEvent&&(S.handleEvent=e.wrap(S.handleEvent))}catch(T){}return l.call(this,_,e.wrap(S,void 0,void 0),k,E)}},l),fill(S,"removeEventListener",function(e){return function(l,_,S,k){try{var E=null==_?void 0:_.__lr_wrapper__;E&&e.call(this,l,E,S,k)}catch(ta){}return e.call(this,l,_,S,k)}},void 0))}fill(R,"setTimeout",wrapTimeFn,l),fill(R,"setInterval",wrapTimeFn,l),R.requestAnimationFrame&&fill(R,"requestAnimationFrame",function(l){return function(_){return l(e.wrap(_))}},l);for(var _=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],S=0;S<_.length;S++)wrapEventTarget(_[S]);var k=R.jQuery||R.$;k&&k.fn&&k.fn.ready&&fill(k.fn,"ready",function(l){return function(_){return l.call(this,e.wrap(_))}},l)}}]),Handler}();l.default=I},"./packages/@logrocket/exceptions/src/registerExceptions.js":
/*!******************************************************************!*\
					  !*** ./packages/@logrocket/exceptions/src/registerExceptions.js ***!
					  \******************************************************************/function(e,l,_){var S=_(/*! @babel/runtime/helpers/interopRequireDefault */"./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),k=_(/*! @babel/runtime/helpers/typeof */"./node_modules/@babel/runtime/helpers/typeof.js");Object.defineProperty(l,"__esModule",{value:!0}),l.default=function(e){var l=new E.default({captureException:function(l){T.captureException(e,null,null,l)}}),rejectionHandler=function(l){l.reason instanceof Error?T.captureException(e,l.reason,null,null,"UNHANDLED_REJECTION"):e.addEvent("lr.core.Exception",function(){return{exceptionType:"UNHANDLED_REJECTION",message:l.reason||"Unhandled Promise rejection"}})};return window.addEventListener("unhandledrejection",rejectionHandler),function(){window.removeEventListener("unhandledrejection",rejectionHandler),l.uninstall()}};var E=S(_(/*! ./raven/raven */"./packages/@logrocket/exceptions/src/raven/raven.js")),T=function(e,l){if(e&&e.__esModule)return e;if(null===e||"object"!==k(e)&&"function"!=typeof e)return{default:e};var _=_getRequireWildcardCache(l);if(_&&_.has(e))return _.get(e);var S={},E=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var T in e)if("default"!==T&&Object.prototype.hasOwnProperty.call(e,T)){var M=E?Object.getOwnPropertyDescriptor(e,T):null;M&&(M.get||M.set)?Object.defineProperty(S,T,M):S[T]=e[T]}return S.default=e,_&&_.set(e,S),S}(_(/*! ./Capture */"./packages/@logrocket/exceptions/src/Capture.js"));function _getRequireWildcardCache(e){if("function"!=typeof WeakMap)return null;var l=new WeakMap,_=new WeakMap;return(_getRequireWildcardCache=function(e){return e?_:l})(e)}},"./packages/@logrocket/exceptions/src/stackTraceFromError.js":
/*!*******************************************************************!*\
					  !*** ./packages/@logrocket/exceptions/src/stackTraceFromError.js ***!
					  \*******************************************************************/function(e,l){Object.defineProperty(l,"__esModule",{value:!0}),l.default=function(e){function makeNotNull(e){return null===e?void 0:e}return e.stack?e.stack.map(function(e){return{lineNumber:makeNotNull(e.line),columnNumber:makeNotNull(e.column),fileName:makeNotNull(e.url),functionName:makeNotNull(e.func)}}):void 0}},"./packages/@logrocket/network/src/fetchIntercept.js":
/*!***********************************************************!*\
					  !*** ./packages/@logrocket/network/src/fetchIntercept.js ***!
					  \***********************************************************/function(e,l,_){var S=_(/*! @babel/runtime/helpers/interopRequireDefault */"./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var k=S(_(/*! @babel/runtime/helpers/toConsumableArray */"./node_modules/@babel/runtime/helpers/toConsumableArray.js")),E=_(/*! ./registerXHR */"./packages/@logrocket/network/src/registerXHR.js"),T=[];function makeInterceptor(e,l){for(var _=T.reduce(function(e,l){return[l].concat(e)},[]),S=arguments.length,M=new Array(S>2?S-2:0),R=2;R<S;R++)M[R-2]=arguments[R];var I=Promise.resolve(M);return _.forEach(function(e){var _=e.request,S=e.requestError;(_||S)&&(I=I.then(function(e){return _.apply(void 0,[l].concat((0,k.default)(e)))},function(e){return S.apply(void 0,[l].concat((0,k.default)(e)))}))}),I=I.then(function(l){var _,S;(0,E.setActive)(!1);try{_=e.apply(void 0,(0,k.default)(l))}catch(T){S=T}if((0,E.setActive)(!0),S)throw S;return _}),_.forEach(function(e){var _=e.response,S=e.responseError;(_||S)&&(I=I.then(function(e){return _(l,e)},function(e){return S&&S(l,e)}))}),I}function attach(e){if(e.fetch&&e.Promise){var l=e.fetch.polyfill;e.fetch=function(e){var l=0;return function(){for(var _=arguments.length,S=new Array(_),k=0;k<_;k++)S[k]=arguments[k];return makeInterceptor.apply(void 0,[e,l++].concat(S))}}(e.fetch),l&&(e.fetch.polyfill=l)}}var M=!1,R={register:function(e){return M||(M=!0,attach(window)),T.push(e),function(){var l=T.indexOf(e);l>=0&&T.splice(l,1)}},clear:function(){T=[]}};l.default=R},"./packages/@logrocket/network/src/index.js":
/*!**************************************************!*\
					  !*** ./packages/@logrocket/network/src/index.js ***!
					  \**************************************************/function(e,l,_){var S=_(/*! @babel/runtime/helpers/interopRequireDefault */"./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(l,"__esModule",{value:!0}),l.default=function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{isReactNative:!1,isDisabled:!1};if(!0===(null==l?void 0:l.isDisabled))return function(){};var _=l.isReactNative,S=l.shouldAugmentNPS,k=l.shouldParseXHRBlob,O={},truncate=function(e){var l=e;if("object"===(0,E.default)(e)&&null!=e){var _=Object.getPrototypeOf(e);_!==Object.prototype&&null!==_||(l=JSON.stringify(e))}if(l&&l.length&&l.length>4096e3&&"string"==typeof l){var S=l.substring(0,1e3);return"".concat(S," ... LogRocket truncating to first 1000 characters.\n      Keep data under 4MB to prevent truncation. https://docs.logrocket.com/reference/network")}return e},addRequest=function(l,_){var S=_.method;e.addEvent("lr.network.RequestEvent",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},k=e.isEnabled,E=void 0===k||k,T=e.requestSanitizer,M=void 0===T?function(e){return e}:T;if(!E)return null;var R=null;try{R=M(_objectSpread(_objectSpread({},_),{},{reqId:l}))}catch(U){}if(R){var I=R.url;if("undefined"!=typeof document&&"function"==typeof document.createElement){var L=document.createElement("a");L.href=R.url,I=L.href}return{reqId:l,url:I,headers:(0,D.default)(R.headers,function(e){return"".concat(e)}),body:truncate(R.body),method:S,referrer:R.referrer||void 0,mode:R.mode||void 0,credentials:R.credentials||void 0}}return O[l]=!0,null})},addResponse=function(l,_){var S=_.method,k=_.status,E=_.responseType;e.addEvent("lr.network.ResponseEvent",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},T=e.isEnabled,M=void 0===T||T,R=e.responseSanitizer,I=void 0===R?function(e){return e}:R;if(!M)return null;if(O[l])return delete O[l],null;var L=null;try{L=I(_objectSpread(_objectSpread({},_),{},{reqId:l}))}catch(U){}return L?{reqId:l,responseType:E,status:L.status,headers:(0,D.default)(L.headers,function(e){return"".concat(e)}),body:truncate(L.body),method:S}:{reqId:l,responseType:E,status:k,headers:{},body:null,method:S}})},isIgnored=function(l){return e.isDisabled||!0===O[l]},L=(0,T.default)({addRequest:addRequest,addResponse:addResponse,isIgnored:isIgnored}),U=(0,I.default)({addRequest:addRequest,addResponse:addResponse,isIgnored:isIgnored,logger:e,shouldAugmentNPS:S,shouldParseXHRBlob:k}),B=(0,M.registerIonic)({addRequest:addRequest,addResponse:addResponse,isIgnored:isIgnored}),z=_?function(){}:(0,R.default)(e);return function(){z(),L(),U(),B()}};var k=S(_(/*! @babel/runtime/helpers/defineProperty */"./node_modules/@babel/runtime/helpers/defineProperty.js")),E=S(_(/*! @babel/runtime/helpers/typeof */"./node_modules/@babel/runtime/helpers/typeof.js")),T=S(_(/*! ./registerFetch */"./packages/@logrocket/network/src/registerFetch.js")),M=_(/*! ./registerIonic */"./packages/@logrocket/network/src/registerIonic.ts"),R=S(_(/*! ./registerNetworkInformation */"./packages/@logrocket/network/src/registerNetworkInformation.js")),I=S(_(/*! ./registerXHR */"./packages/@logrocket/network/src/registerXHR.js")),D=S(_(/*! @logrocket/utils/src/mapValues */"./packages/@logrocket/utils/src/mapValues.ts"));function ownKeys(e,l){var _=Object.keys(e);if(Object.getOwnPropertySymbols){var S=Object.getOwnPropertySymbols(e);l&&(S=S.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),_.push.apply(_,S)}return _}function _objectSpread(e){for(var l=1;l<arguments.length;l++){var _=null!=arguments[l]?arguments[l]:{};l%2?ownKeys(Object(_),!0).forEach(function(l){(0,k.default)(e,l,_[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(_)):ownKeys(Object(_)).forEach(function(l){Object.defineProperty(e,l,Object.getOwnPropertyDescriptor(_,l))})}return e}},"./packages/@logrocket/network/src/registerFetch.js":
/*!**********************************************************!*\
					  !*** ./packages/@logrocket/network/src/registerFetch.js ***!
					  \**********************************************************/function(e,l,_){var S=_(/*! @babel/runtime/helpers/interopRequireDefault */"./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(l,"__esModule",{value:!0}),l.default=function(e){var l=e.addRequest,_=e.addResponse,S=e.isIgnored,k="fetch-",E={},M=T.default.register({request:function(e){for(var _=arguments.length,S=new Array(_>1?_-1:0),T=1;T<_;T++)S[T-1]=arguments[T];var M;if("undefined"!=typeof Request&&S[0]instanceof Request){var R;try{R=S[0].clone().text()}catch(I){R=Promise.resolve("LogRocket fetch error: ".concat(I.message))}M=R.then(function(e){return _objectSpread(_objectSpread({},pluckFetchFields(S[0])),{},{body:e})},function(e){return _objectSpread(_objectSpread({},pluckFetchFields(S[0])),{},{body:"LogRocket fetch error: ".concat(e.message)})})}else M=Promise.resolve(_objectSpread(_objectSpread({},pluckFetchFields(S[1])),{},{url:"".concat(S[0]),body:(S[1]||{}).body}));return M.then(function(_){return E[e]=_.method,l("".concat(k).concat(e),_),S})},requestError:function(e,l){return Promise.reject(l)},response:function(e,l){var T,M;if(S("".concat(k).concat(e)))return l;if("text/event-stream"===l.headers.get("content-type"))M=Promise.resolve("LogRocket skipped consuming an event-stream body.");else{try{T=l.clone()}catch(L){var R={url:l.url,responseType:l.type.toUpperCase(),status:l.status,headers:stringifyHeaders(l.headers),body:"LogRocket fetch error: ".concat(L.message),method:E[e]};return delete E[e],_("".concat(k).concat(e),R),l}try{if(window.TextDecoder&&T.body){var I=T.body.getReader(),D=new window.TextDecoder("utf-8"),O="";M=I.read().then(function readResponseBody(e){var l=e.done,_=e.value;if(l)return O;var S=_?D.decode(_,{stream:!0}):"";return O+=S,I.read().then(readResponseBody)})}else M=T.text()}catch(U){M=Promise.resolve("LogRocket error reading body: ".concat(U.message))}}return M.catch(function(e){if(!("AbortError"===e.name&&e instanceof DOMException))return"LogRocket error reading body: ".concat(e.message)}).then(function(S){var T={url:l.url,responseType:l.type.toUpperCase(),status:l.status,headers:stringifyHeaders(l.headers),body:S,method:E[e]};delete E[e],_("".concat(k).concat(e),T)}),l},responseError:function(e,l){var S={url:void 0,status:0,headers:{},body:"".concat(l)};return _("".concat(k).concat(e),S),Promise.reject(l)}});return M};var k=S(_(/*! @babel/runtime/helpers/defineProperty */"./node_modules/@babel/runtime/helpers/defineProperty.js")),E=S(_(/*! @logrocket/utils/src/mapValues */"./packages/@logrocket/utils/src/mapValues.ts")),T=S(_(/*! ./fetchIntercept */"./packages/@logrocket/network/src/fetchIntercept.js"));function ownKeys(e,l){var _=Object.keys(e);if(Object.getOwnPropertySymbols){var S=Object.getOwnPropertySymbols(e);l&&(S=S.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),_.push.apply(_,S)}return _}function _objectSpread(e){for(var l=1;l<arguments.length;l++){var _=null!=arguments[l]?arguments[l]:{};l%2?ownKeys(Object(_),!0).forEach(function(l){(0,k.default)(e,l,_[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(_)):ownKeys(Object(_)).forEach(function(l){Object.defineProperty(e,l,Object.getOwnPropertyDescriptor(_,l))})}return e}var stringifyHeaders=function(e){return(0,E.default)(function(e){if(null==e||"function"!=typeof e.forEach)return e;var l={};return e.forEach(function(e,_){l[_]?l[_]="".concat(l[_],",").concat(e):l[_]="".concat(e)}),l}(e),function(e){return"".concat(e)})};function pluckFetchFields(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{url:e.url,headers:stringifyHeaders(e.headers),method:e.method&&e.method.toUpperCase(),referrer:e.referrer||void 0,mode:e.mode||void 0,credentials:e.credentials||void 0}}},"./packages/@logrocket/network/src/registerIonic.ts":
/*!**********************************************************!*\
					  !*** ./packages/@logrocket/network/src/registerIonic.ts ***!
					  \**********************************************************/function(e,l,_){var S=_(/*! @babel/runtime/helpers/interopRequireDefault */"./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(l,"__esModule",{value:!0}),l.mergeHeaders=mergeHeaders,l.serializeQueryParams=function(e,l){return serializeObject("",e,l)},l.appendQueryParamsString=appendQueryParamsString,l.processData=processData,l.registerIonic=function(e){var l,_,S,k=e.addRequest,E=e.addResponse,T=e.isIgnored,U=null===(l=window.cordova)||void 0===l||null===(_=l.plugin)||void 0===_?void 0:_.http,B={},j=!1;if(void 0===U)return function(){};var V=null===(S=window.ionic)||void 0===S?void 0:S.platforms;if(void 0!==V&&"function"==typeof V.some&&V.some(function(e){return L.has(e)}))return function(){};var W=U.sendRequest,q=(0,M.default)(function(e,l,_){if(!T("".concat(O).concat(_)))try{var S={url:e.url||"",status:e.status<600&&e.status>=100?e.status:0,headers:e.headers||{},body:l?e.data:e.error,method:B[_].toUpperCase()};E("".concat(O).concat(_),S)}catch(M){var k={url:e.url||"",status:e.status<600&&e.status>=100?e.status:0,headers:e.headers||{},body:"LogRocket fetch error: ".concat(M.message),method:B[_].toUpperCase()};E("".concat(O).concat(_),k)}});return U.sendRequest=function(e,l,_,S){var E=++H;if(!j)try{var T=function(e,l){var _,S=(e=e||{}).data;try{_=checkForValidStringValue(I,e.serializer||l.getDataSerializer(),"serializer / data payload type")}catch(k){_=checkForValidStringValue(D,e.serializer||l.getDataSerializer(),"serializer / data payload type"),S={}}return{data:S,filePath:e.filePath,followRedirect:e.followRedirect,headers:checkKeyValuePairObject(e.headers||{},z,"Invalid header type, must be string"),method:checkForValidStringValue(R,e.method||R[0],"method"),name:e.name,params:checkKeyValuePairObject(e.params||{},G,"Invalid param, must be of type string or array"),responseType:e.responseType,serializer:_,connectTimeout:e.connectTimeout,readTimeout:e.readTimeout,timeout:e.timeout}}(l,U),M=appendQueryParamsString(e,serializeObject("",T.params,!0)),L=function(e,l,_){var S=_.getHeaders("*")||{},k=function(e,l){var _=new URL(e),S=_.host;return l.getHeaders(S)||null}(e,_)||{};return mergeHeaders(mergeHeaders(S,k),l)}(e,T.headers,U),V=T.method||"get";B[E]=V;var X={url:M,method:V.toUpperCase(),headers:L||{},body:processData(T.data||{},T.serializer)};k("".concat(O).concat(E),X)}catch(Y){var K={url:e,method:(l.method||"get").toUpperCase(),headers:{},body:"LogRocket fetch error: ".concat(Y.message)};k("".concat(O).concat(E),K)}return W(e,l,function(e){j||(q(e,!0,E),delete B[E]),_(e)},function(e){j||(q(e,!1,E),delete B[E]),S(e)})},function(){j=!0,U.sendRequest=W,B={}}};var k=S(_(/*! @babel/runtime/helpers/defineProperty */"./node_modules/@babel/runtime/helpers/defineProperty.js")),E=S(_(/*! @babel/runtime/helpers/typeof */"./node_modules/@babel/runtime/helpers/typeof.js")),T=S(_(/*! @babel/runtime/helpers/toConsumableArray */"./node_modules/@babel/runtime/helpers/toConsumableArray.js")),M=S(_(/*! @logrocket/utils/src/protectFunc */"./packages/@logrocket/utils/src/protectFunc.ts"));function _createForOfIteratorHelper(e,l){var _="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!_){if(Array.isArray(e)||(_=function(e,l){if(e){if("string"==typeof e)return _arrayLikeToArray(e,l);var _=Object.prototype.toString.call(e).slice(8,-1);return"Object"===_&&e.constructor&&(_=e.constructor.name),"Map"===_||"Set"===_?Array.from(e):"Arguments"===_||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(_)?_arrayLikeToArray(e,l):void 0}}(e))||l){_&&(e=_);var S=0,F=function(){};return{s:F,n:function(){return S>=e.length?{done:!0}:{done:!1,value:e[S++]}},e:function(e){throw e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var k,E=!0,T=!1;return{s:function(){_=_.call(e)},n:function(){var e=_.next();return E=e.done,e},e:function(e){T=!0,k=e},f:function(){try{E||null==_.return||_.return()}finally{if(T)throw k}}}}function _arrayLikeToArray(e,l){(null==l||l>e.length)&&(l=e.length);for(var _=0,S=new Array(l);_<l;_++)S[_]=e[_];return S}function ownKeys(e,l){var _=Object.keys(e);if(Object.getOwnPropertySymbols){var S=Object.getOwnPropertySymbols(e);l&&(S=S.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),_.push.apply(_,S)}return _}function _objectSpread(e){for(var l=1;l<arguments.length;l++){var _=null!=arguments[l]?arguments[l]:{};l%2?ownKeys(Object(_),!0).forEach(function(l){(0,k.default)(e,l,_[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(_)):ownKeys(Object(_)).forEach(function(l){Object.defineProperty(e,l,Object.getOwnPropertyDescriptor(_,l))})}return e}var R=new Set(["get","put","post","patch","head","delete","options","upload","download"]),I=new Set(["urlencoded","json","utf8"]),D=new Set(["raw","multipart"]),O="ionic-",L=new Set(["desktop","mobileweb","pwa"]),U=new Set(["FormData"]),B=new Set,z=new Set(["string"]),G=new Set(["string","array"]),j={utf8:z,urlencoded:new Set(["object"]),json:new Set(["array","object"]),raw:new Set(["Uint8Array","ArrayBuffer"]),default:B};function checkForValidStringValue(e,l,_){if("string"!=typeof l)throw new Error("".concat(_," must be one of: ").concat((0,T.default)(e).join(", ")));if(l=l.trim().toLowerCase(),!e.has(l))throw new Error("".concat(_," must be one of: ").concat((0,T.default)(e).join(", ")));return l}function checkKeyValuePairObject(e,l,_){if("object"!==(0,E.default)(e))throw new Error(_);for(var S=0,k=Object.keys(e);S<k.length;S++){var T=k[S];if(!l.has((0,E.default)(e[T])))throw new Error(_)}return e}function mergeHeaders(e,l){return _objectSpread(_objectSpread({},e),l)}function serializeValue(e,l){return l?encodeURIComponent(e):e}function serializeIdentifier(e,l,_){return e.length?_?"".concat(encodeURIComponent(e),"[").concat(encodeURIComponent(l),"]"):"".concat(e,"[").concat(l,"]"):_?encodeURIComponent(l):l}function serializeArray(e,l,_){var S,k=[],T=_createForOfIteratorHelper(l);try{for(T.s();!(S=T.n()).done;){var M=S.value;Array.isArray(M)?k.push(serializeArray("".concat(e,"[]"),M,_)):"object"!==(0,E.default)(M)?k.push("".concat(serializeIdentifier(e,"",_),"=").concat(serializeValue(M,_))):k.push(serializeObject("".concat(e,"[]").concat(M),_,void 0))}}catch(R){T.e(R)}finally{T.f()}return k.join("&")}function serializeObject(e,l,_){var S=[];for(var k in l)if(l.hasOwnProperty(k)){var T=e.length?"".concat(e,"[").concat(k,"]"):k;Array.isArray(l[k])?S.push(serializeArray(T,l[k],_)):"object"!==(0,E.default)(l[k])||null===l[k]?S.push("".concat(serializeIdentifier(e,k,_),"=").concat(serializeValue(l[k],_))):S.push(serializeObject(T,l[k],_))}return S.join("&")}function appendQueryParamsString(e,l){if(!e.length||!l.length)return e;var _=new URL(e),S=_.host,k=_.pathname,E=_.search,T=_.hash,M=_.protocol;return"".concat(M,"//").concat(S).concat(k).concat(E.length?"".concat(E,"&").concat(l):"?".concat(l)).concat(T)}function processData(e,l){var S=(0,E.default)(e),k=function(e){return j[e]||j.default}(l),M=function(e){return"multipart"===e?U:B}(l);if(M.size>0){var R=!1;if(M.forEach(function(l){_.g[l]&&e instanceof _.g[l]&&(R=!0)}),!R)throw new Error("INSTANCE_TYPE_MISMATCH_DATA ".concat((0,T.default)(M).join(", ")))}if(0===M.size&&!k.has(S))throw new Error("TYPE_MISMATCH_DATA ".concat((0,T.default)(k).join(", ")));return"utf8"===l?e:JSON.stringify(e,void 0,2)}var H=0},"./packages/@logrocket/network/src/registerNetworkInformation.js":
/*!***********************************************************************!*\
					  !*** ./packages/@logrocket/network/src/registerNetworkInformation.js ***!
					  \***********************************************************************/function(e,l){Object.defineProperty(l,"__esModule",{value:!0}),l.default=function(e){var l=void 0;function sendNetworkInformation(){var S={online:window.navigator.onLine,effectiveType:"UNKOWN"};window.navigator.onLine?window.navigator.connection&&window.navigator.connection.effectiveType&&(S.effectiveType=_[window.navigator.connection.effectiveType]||"UNKNOWN"):S.effectiveType="NONE",l&&S.online===l.online&&S.effectiveType===l.effectiveType||(l=S,e.addEvent("lr.network.NetworkStatusEvent",function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).isEnabled;return void 0===e||e?S:null}))}return setTimeout(sendNetworkInformation),window.navigator.connection&&"function"==typeof window.navigator.connection.addEventListener&&window.navigator.connection.addEventListener("change",sendNetworkInformation),window.addEventListener("online",sendNetworkInformation),window.addEventListener("offline",sendNetworkInformation),function(){window.removeEventListener("offline",sendNetworkInformation),window.removeEventListener("online",sendNetworkInformation),window.navigator.connection&&"function"==typeof window.navigator.connection.removeEventListener&&window.navigator.connection.removeEventListener("change",sendNetworkInformation)}};var _={"slow-2g":"SLOW2G","2g":"TWOG","3g":"THREEG","4g":"FOURG"}},"./packages/@logrocket/network/src/registerXHR.js":
/*!********************************************************!*\
					  !*** ./packages/@logrocket/network/src/registerXHR.js ***!
					  \********************************************************/function(e,l,_){var S=_(/*! @babel/runtime/helpers/interopRequireDefault */"./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(l,"__esModule",{value:!0}),l.setActive=function(e){D=e},l.default=function(e){var l=e.addRequest,_=e.addResponse,S=e.isIgnored,L=e.logger,U=e.shouldAugmentNPS,B=void 0===U||U,z=e.shouldParseXHRBlob,G=void 0!==z&&z,j=XMLHttpRequest,H=new WeakMap,V=!1,W="xhr-";return window._lrXMLHttpRequest=XMLHttpRequest,XMLHttpRequest=function(e,U){var z=new j(e,U);if(!D)return z;H.set(z,{xhrId:++O,requestHeaders:{},sent:!1,done:!1});var q=z.open,X=z.send;B&&(z.open=function(){for(var e=arguments.length,l=new Array(e),_=0;_<e;_++)l[_]=arguments[_];try{var S=l[1];if(window.URL&&"function"==typeof window.URL&&0===S.search(R.WOOTRIC_RESPONSES_REGEX)){var k=new window.URL(L.recordingURL);k.searchParams.set("nps","wootric");var E=new window.URL(S),T=E.searchParams.get("response[text]"),M=T?"".concat(T,"\n\n"):"";E.searchParams.set("response[text]","".concat(M,"<").concat(k.href,"|View LogRocket session>")),l[1]=E.href}}catch(ta){}return q.apply(this,l)},z.send=function(){for(var e=arguments.length,l=new Array(e),_=0;_<e;_++)l[_]=arguments[_];try{var S=H.get(z);if(window.URL&&"function"==typeof window.URL&&S&&S.url&&0===S.url.search(R.DELIGHTED_RESPONSES_REGEX)&&l.length&&-1!==l[0].indexOf(R.DELIGHTED_FEEDBACK_PREFIX)){var k=new window.URL(L.recordingURL);k.searchParams.set("nps","delighted");var E=encodeURIComponent(k.href),T=l[0].split("&").map(function(e){if((0,M.default)(e,R.DELIGHTED_FEEDBACK_PREFIX)){var l=e===R.DELIGHTED_FEEDBACK_PREFIX;return"".concat(e).concat(l?"":"\n\n","<").concat(E,"|View LogRocket session>")}return e}).join("&");l[0]=T}}catch(ta){}return X.apply(this,l)});var captureResponse=function(){var e;if(!V){var l=H.get(z);if(l&&!S("".concat(W).concat(l.xhrId))&&l.sent&&l.done){var k=l.status||I.XHR_CUSTOM_STATUS_CODES.error;k===I.XHR_CUSTOM_STATUS_CODES.error&&!1===(null===(e=window.navigator)||void 0===e?void 0:e.onLine)&&(k=I.XHR_CUSTOM_STATUS_CODES.offline);var E={url:l.url,status:k,headers:l.responseHeaders,body:l.responseBody,method:(l.method||"").toUpperCase()};if(G&&E.body instanceof Blob){var T=new FileReader;T.readAsText(E.body),T.onload=function(){try{E.body=JSON.parse(T.result)}catch(e){}_("".concat(W).concat(l.xhrId),E)}}else _("".concat(W).concat(l.xhrId),E)}}};(0,E.default)(z,"open",(0,T.default)(function(e,l){if(!V){var _=H.get(z);_.method=e,_.url=l}})),(0,E.default)(z,"send",(0,T.default)(function(e){if(!V){var _=H.get(z);if(_){var S={url:_.url,method:_.method&&_.method.toUpperCase(),headers:(0,k.default)(_.requestHeaders||{},function(e){return e.join(", ")}),body:e};l("".concat(W).concat(_.xhrId),S),_.sent=!0,captureResponse()}}})),(0,E.default)(z,"setRequestHeader",(0,T.default)(function(e,l){if(!V){var _=H.get(z);_&&(_.requestHeaders=_.requestHeaders||{},_.requestHeaders[e]=_.requestHeaders[e]||[],_.requestHeaders[e].push(l))}}));var K={readystatechange:(0,T.default)(function(){if(!V&&4===z.readyState){var e=H.get(z);if(!e)return;if(S("".concat(W).concat(e.xhrId)))return;var l,_=z.getAllResponseHeaders()||"";e.responseHeaders=_.split(/[\r\n]+/).reduce(function(e,l){var _=e,S=l.split(": ");if(S.length>0){var k=S.shift(),E=S.join(": ");e[k]?_[k]+=", ".concat(E):_[k]=E}return _},{});try{switch(z.responseType){case"json":l=L._shouldCloneResponse?JSON.parse(JSON.stringify(z.response)):z.response;break;case"arraybuffer":case"blob":l=z.response;break;case"document":l=z.responseXML;break;case"text":case"":l=z.responseText;break;default:l=""}}catch(k){l="LogRocket: Error accessing response."}e.responseBody=l,e.status=z.status,e.done=!0}}),abort:(0,T.default)(function(){var e=H.get(z);e&&(e.status=I.XHR_CUSTOM_STATUS_CODES.aborted)}),timeout:(0,T.default)(function(){var e=H.get(z);e&&(e.status=I.XHR_CUSTOM_STATUS_CODES.timeout)}),loadend:(0,T.default)(function(){captureResponse()})};return Object.keys(K).forEach(function(e){z.addEventListener(e,K[e])}),z},XMLHttpRequest.prototype=j.prototype,["UNSENT","OPENED","HEADERS_RECEIVED","LOADING","DONE"].forEach(function(e){XMLHttpRequest[e]=j[e]}),function(){V=!0,XMLHttpRequest=j}};var k=S(_(/*! @logrocket/utils/src/mapValues */"./packages/@logrocket/utils/src/mapValues.ts")),E=S(_(/*! @logrocket/utils/src/enhanceFunc */"./packages/@logrocket/utils/src/enhanceFunc.ts")),T=S(_(/*! @logrocket/utils/src/protectFunc */"./packages/@logrocket/utils/src/protectFunc.ts")),M=S(_(/*! @logrocket/utils/src/startsWith */"./packages/@logrocket/utils/src/startsWith.js")),R=_(/*! @logrocket/utils/src/constants/nps */"./packages/@logrocket/utils/src/constants/nps.js"),I=_(/*! @logrocket/utils/src/constants/statusCodes */"./packages/@logrocket/utils/src/constants/statusCodes.ts"),D=!0,O=0},"./packages/@logrocket/now/src/index.js":
/*!**********************************************!*\
					  !*** ./packages/@logrocket/now/src/index.js ***!
					  \**********************************************/function(e,l){Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var _=Date.now.bind(Date),S=_(),k="undefined"!=typeof performance&&performance.now?performance.now.bind(performance):function(){return _()-S};l.default=k},"./packages/@logrocket/redux/src/createEnhancer.js":
/*!*********************************************************!*\
					  !*** ./packages/@logrocket/redux/src/createEnhancer.js ***!
					  \*********************************************************/function(e,l,_){var S=_(/*! @babel/runtime/helpers/interopRequireDefault */"./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(l,"__esModule",{value:!0}),l.default=function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_=l.stateSanitizer,S=void 0===_?function(e){return e}:_,k=l.actionSanitizer,M=void 0===k?function(e){return e}:k;return function(l){return function(_,k,R){var I=l(_,k,R),D=I.dispatch,O=T++;return e.addEvent("lr.redux.InitialState",function(){var e;try{e=S(I.getState())}catch(l){}return{state:e,storeId:O}}),_objectSpread(_objectSpread({},I),{},{dispatch:function(l){var _,k,T=(0,E.default)();try{k=D(l)}catch(L){_=L}finally{var R=(0,E.default)()-T;e.addEvent("lr.redux.ReduxAction",function(){var e=null,k=null;try{e=S(I.getState()),k=M(l)}catch(_){}return e&&k?{storeId:O,action:k,duration:R,stateDelta:e}:null})}if(_)throw _;return k}})}}};var k=S(_(/*! @babel/runtime/helpers/defineProperty */"./node_modules/@babel/runtime/helpers/defineProperty.js")),E=S(_(/*! @logrocket/now */"./packages/@logrocket/now/src/index.js"));function ownKeys(e,l){var _=Object.keys(e);if(Object.getOwnPropertySymbols){var S=Object.getOwnPropertySymbols(e);l&&(S=S.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),_.push.apply(_,S)}return _}function _objectSpread(e){for(var l=1;l<arguments.length;l++){var _=null!=arguments[l]?arguments[l]:{};l%2?ownKeys(Object(_),!0).forEach(function(l){(0,k.default)(e,l,_[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(_)):ownKeys(Object(_)).forEach(function(l){Object.defineProperty(e,l,Object.getOwnPropertyDescriptor(_,l))})}return e}var T=0},"./packages/@logrocket/redux/src/createMiddleware.js":
/*!***********************************************************!*\
					  !*** ./packages/@logrocket/redux/src/createMiddleware.js ***!
					  \***********************************************************/function(e,l,_){var S=_(/*! @babel/runtime/helpers/interopRequireDefault */"./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(l,"__esModule",{value:!0}),l.default=function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_=l.stateSanitizer,S=void 0===_?function(e){return e}:_,T=l.actionSanitizer,M=void 0===T?function(e){return e}:T;return function(l){var _=E++;return e.addEvent("lr.redux.InitialState",function(){var e;try{e=S(l.getState())}catch(k){}return{state:e,storeId:_}}),function(E){return function(T){var R,I,D=(0,k.default)();try{I=E(T)}catch(L){R=L}finally{var O=(0,k.default)()-D;e.addEvent("lr.redux.ReduxAction",function(){var e=null,k=null;try{e=S(l.getState()),k=M(T)}catch(R){}return e&&k?{storeId:_,action:k,duration:O,stateDelta:e}:null})}if(R)throw R;return I}}}};var k=S(_(/*! @logrocket/now */"./packages/@logrocket/now/src/index.js")),E=0},"./packages/@logrocket/redux/src/index.js":
/*!************************************************!*\
					  !*** ./packages/@logrocket/redux/src/index.js ***!
					  \************************************************/function(e,l,_){var S=_(/*! @babel/runtime/helpers/interopRequireDefault */"./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(l,"__esModule",{value:!0}),Object.defineProperty(l,"createEnhancer",{enumerable:!0,get:function(){return k.default}}),Object.defineProperty(l,"createMiddleware",{enumerable:!0,get:function(){return E.default}});var k=S(_(/*! ./createEnhancer */"./packages/@logrocket/redux/src/createEnhancer.js")),E=S(_(/*! ./createMiddleware */"./packages/@logrocket/redux/src/createMiddleware.js"))},"./packages/@logrocket/utils/src/TraceKit.js":
/*!***************************************************!*\
					  !*** ./packages/@logrocket/utils/src/TraceKit.js ***!
					  \***************************************************/function(e,l,_){Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var S={collectWindowErrors:!0,debug:!1},k="undefined"!=typeof window?window:void 0!==_.g?_.g:"undefined"!=typeof self?self:{},E=[].slice,T="?",M=/^(?:Uncaught (?:exception: )?)?((?:Eval|Internal|Range|Reference|Syntax|Type|URI)Error): ?(.*)$/;function getLocationHref(){return"undefined"==typeof document||void 0===document.location?"":document.location.href}S.report=function(){var e,l,_=[],R=null,I=null,D=null;function notifyHandlers(e,l){var k=null;if(!l||S.collectWindowErrors){for(var T in _)if(_.hasOwnProperty(T))try{_[T].apply(null,[e].concat(E.call(arguments,2)))}catch(M){k=M}if(k)throw k}}function traceKitWindowOnError(l,_,k,E,R){if(D)S.computeStackTrace.augmentStackTraceWithInitialElement(D,_,k,l),processLastException();else if(R)notifyHandlers(S.computeStackTrace(R),!0);else{var I,O={url:_,line:k,column:E},L=void 0,U=l;"[object String]"==={}.toString.call(l)&&(I=l.match(M))&&(L=I[1],U=I[2]),O.func=T,notifyHandlers({name:L,message:U,url:getLocationHref(),stack:[O]},!0)}return!!e&&e.apply(this,arguments)}function processLastException(){var e=D,l=R;R=null,D=null,I=null,notifyHandlers.apply(null,[e,!1].concat(l))}function report(e,l){var _=E.call(arguments,1);if(D){if(I===e)return;processLastException()}var k=S.computeStackTrace(e);if(D=k,I=e,R=_,setTimeout(function(){I===e&&processLastException()},k.incomplete?2e3:0),!1!==l)throw e}return report.subscribe=function(S){l||(e=k.onerror,k.onerror=traceKitWindowOnError,l=!0),_.push(S)},report.unsubscribe=function(e){for(var l=_.length-1;l>=0;--l)_[l]===e&&_.splice(l,1)},report.uninstall=function(){l&&(k.onerror=e,l=!1,e=void 0),_=[]},report}(),S.computeStackTrace=function(){function computeStackTraceFromStackProp(e){if(void 0!==e.stack&&e.stack){var l,_,S=/^\s*at (.*?) ?\(((?:file|https?|blob|chrome-extension|native|eval|<anonymous>).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,k=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|resource|\[native).*?)(?::(\d+))?(?::(\d+))?\s*$/i,E=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,M=e.stack.split("\n"),R=[];/^(.*) is undefined$/.exec(e.message);for(var I=0,D=M.length;I<D;++I){if(l=S.exec(M[I])){var O=l[2]&&-1!==l[2].indexOf("native");_={url:O?null:l[2],func:l[1]||T,args:O?[l[2]]:[],line:l[3]?+l[3]:null,column:l[4]?+l[4]:null}}else if(l=E.exec(M[I]))_={url:l[2],func:l[1]||T,args:[],line:+l[3],column:l[4]?+l[4]:null};else{if(!(l=k.exec(M[I])))continue;_={url:l[3],func:l[1]||T,args:l[2]?l[2].split(","):[],line:l[4]?+l[4]:null,column:l[5]?+l[5]:null}}!_.func&&_.line&&(_.func=T),R.push(_)}return R.length?(R[0].column||void 0===e.columnNumber||(R[0].column=e.columnNumber+1),{name:e.name,message:e.message,url:getLocationHref(),stack:R}):null}}function augmentStackTraceWithInitialElement(e,l,_,S){var k={url:l,line:_};if(k.url&&k.line){if(e.incomplete=!1,k.func||(k.func=T),e.stack.length>0&&e.stack[0].url===k.url){if(e.stack[0].line===k.line)return!1;if(!e.stack[0].line&&e.stack[0].func===k.func)return e.stack[0].line=k.line,!1}return e.stack.unshift(k),e.partial=!0,!0}return e.incomplete=!0,!1}function computeStackTraceByWalkingCallerChain(e,l){for(var _,k,E=/function\s+([_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*)?\s*\(/i,M=[],R={},I=!1,D=computeStackTraceByWalkingCallerChain.caller;D&&!I;D=D.caller)if(D!==computeStackTrace&&D!==S.report){if(k={url:null,func:T,line:null,column:null},D.name?k.func=D.name:(_=E.exec(D.toString()))&&(k.func=_[1]),void 0===k.func)try{k.func=_.input.substring(0,_.input.indexOf("{"))}catch(ta){}R[""+D]?I=!0:R[""+D]=!0,M.push(k)}l&&M.splice(0,l);var O={name:e.name,message:e.message,url:getLocationHref(),stack:M};return augmentStackTraceWithInitialElement(O,e.sourceURL||e.fileName,e.line||e.lineNumber,e.message||e.description),O}function computeStackTrace(e,l){var _=null;l=null==l?0:+l;try{if(_=computeStackTraceFromStackProp(e))return _}catch(ta){if(S.debug)throw ta}try{if(_=computeStackTraceByWalkingCallerChain(e,l+1))return _}catch(ta){if(S.debug)throw ta}return{name:e.name,message:e.message,url:getLocationHref()}}return computeStackTrace.augmentStackTraceWithInitialElement=augmentStackTraceWithInitialElement,computeStackTrace.computeStackTraceFromStackProp=computeStackTraceFromStackProp,computeStackTrace}();var R=S;l.default=R},"./packages/@logrocket/utils/src/constants/nps.js":
/*!********************************************************!*\
					  !*** ./packages/@logrocket/utils/src/constants/nps.js ***!
					  \********************************************************/function(e,l){Object.defineProperty(l,"__esModule",{value:!0}),l.DELIGHTED_FEEDBACK_PREFIX=l.DELIGHTED_RESPONSES_REGEX=l.WOOTRIC_RESPONSES_REGEX=void 0,l.WOOTRIC_RESPONSES_REGEX=/^https:\/\/production.wootric.com\/responses/,l.DELIGHTED_RESPONSES_REGEX=/^https:\/\/web.delighted.com\/e\/[a-zA-Z-]*\/c/,l.DELIGHTED_FEEDBACK_PREFIX="comment="},"./packages/@logrocket/utils/src/constants/statusCodes.ts":
/*!****************************************************************!*\
					  !*** ./packages/@logrocket/utils/src/constants/statusCodes.ts ***!
					  \****************************************************************/function(e,l,_){var S=_(/*! @babel/runtime/helpers/interopRequireDefault */"./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(l,"__esModule",{value:!0}),l.getStatusText=function(e){return T[String(e)]},l.XHR_CUSTOM_FAILURE_STATUSES=l.XHR_CUSTOM_STATUS_CODES=l.STATUS_CODES=void 0;var k,E=S(_(/*! @babel/runtime/helpers/defineProperty */"./node_modules/@babel/runtime/helpers/defineProperty.js")),T={0:"",100:"Continue",101:"Switching Protocol",102:"Processing",103:"Early Hints",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",306:"unused",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Too Early",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",510:"Not Extended",511:"Network Authentication Required"};l.STATUS_CODES=T;var M={error:0,timeout:444,aborted:499,offline:1001};l.XHR_CUSTOM_STATUS_CODES=M;var R=(k={},(0,E.default)(k,M.error,"Error"),(0,E.default)(k,M.timeout,"Timeout"),(0,E.default)(k,M.aborted,"Aborted"),(0,E.default)(k,M.offline,"Offline"),k);l.XHR_CUSTOM_FAILURE_STATUSES=R},"./packages/@logrocket/utils/src/createUnsubListener.ts":
/*!**************************************************************!*\
					  !*** ./packages/@logrocket/utils/src/createUnsubListener.ts ***!
					  \**************************************************************/function(e,l,_){var S=_(/*! @babel/runtime/helpers/interopRequireDefault */"./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(l,"__esModule",{value:!0}),l.createUnsubListener=function(e){return function(){e.clear()}},l.Handler=void 0;var k=S(_(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js")),E=S(_(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js")),T=function(){function Handler(e){(0,k.default)(this,Handler),this._value=void 0,this._value=e}return(0,E.default)(Handler,[{key:"get",value:function(){return this._value}},{key:"clear",value:function(){this._value=void 0}}]),Handler}();l.Handler=T},"./packages/@logrocket/utils/src/enhanceFunc.ts":
/*!******************************************************!*\
					  !*** ./packages/@logrocket/utils/src/enhanceFunc.ts ***!
					  \******************************************************/function(e,l,_){Object.defineProperty(l,"__esModule",{value:!0}),l.default=function(e,l,_){if("function"!=typeof e[l])return NO_OP_UNREGISTER;try{var shim=function(){for(var e,l=arguments.length,_=new Array(l),S=0;S<l;S++)_[S]=arguments[S];var T=k.apply(this,_);return null===(e=E.get())||void 0===e||e.apply(this,_),T},k=e[l],E=new S.Handler(_);return e[l]=shim,function(){E.clear(),e[l]===shim&&(e[l]=k)}}catch(T){return NO_OP_UNREGISTER}};var S=_(/*! ./createUnsubListener */"./packages/@logrocket/utils/src/createUnsubListener.ts"),NO_OP_UNREGISTER=function(){}},"./packages/@logrocket/utils/src/logError.js":
/*!***************************************************!*\
					  !*** ./packages/@logrocket/utils/src/logError.js ***!
					  \***************************************************/function(e,l){Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var _="undefined"!=typeof console&&console.error&&console.error.bind?function(){}.bind():function(){};l.default=_},"./packages/@logrocket/utils/src/mapValues.ts":
/*!****************************************************!*\
					  !*** ./packages/@logrocket/utils/src/mapValues.ts ***!
					  \****************************************************/function(e,l){Object.defineProperty(l,"__esModule",{value:!0}),l.default=function(e,l){if(null==e)return{};var _={};return Object.keys(e).forEach(function(S){_[S]=l(e[S])}),_}},"./packages/@logrocket/utils/src/protectFunc.ts":
/*!******************************************************!*\
					  !*** ./packages/@logrocket/utils/src/protectFunc.ts ***!
					  \******************************************************/function(e,l,_){var S=_(/*! @babel/runtime/helpers/interopRequireDefault */"./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(l,"__esModule",{value:!0}),l.default=function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};return function(){var _;try{_=e.apply(void 0,arguments)}catch(T){if("undefined"!=typeof window&&window._lrdebug)throw T;var S=l(T);(0,E.default)("LogRocket",T),(0,k.default)(T,S)}return _}};var k=S(_(/*! ./sendTelemetryData */"./packages/@logrocket/utils/src/sendTelemetryData.js")),E=S(_(/*! ./logError */"./packages/@logrocket/utils/src/logError.js"))},"./packages/@logrocket/utils/src/scrubException.ts":
/*!*********************************************************!*\
					  !*** ./packages/@logrocket/utils/src/scrubException.ts ***!
					  \*********************************************************/function(e,l,_){var S=_(/*! @babel/runtime/helpers/interopRequireDefault */"./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(l,"__esModule",{value:!0}),l.scrubException=function(e,l){if(l){var _,S=_createForOfIteratorHelper(E);try{for(S.s();!(_=S.n()).done;){var k=_.value,M=l[k];isScalar(M)&&(e[k]=M.toString())}}catch(j){S.e(j)}finally{S.f()}var R,I=_createForOfIteratorHelper(T);try{for(I.s();!(R=I.n()).done;){for(var D=R.value,O=l[D]||{},L={},U=0,B=Object.keys(O);U<B.length;U++){var z=B[U],G=O[z];isScalar(G)&&(L[z.toString()]=G.toString())}e[D]=L}}catch(j){I.e(j)}finally{I.f()}}};var k=S(_(/*! @babel/runtime/helpers/typeof */"./node_modules/@babel/runtime/helpers/typeof.js"));function _createForOfIteratorHelper(e,l){var _="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!_){if(Array.isArray(e)||(_=function(e,l){if(e){if("string"==typeof e)return _arrayLikeToArray(e,l);var _=Object.prototype.toString.call(e).slice(8,-1);return"Object"===_&&e.constructor&&(_=e.constructor.name),"Map"===_||"Set"===_?Array.from(e):"Arguments"===_||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(_)?_arrayLikeToArray(e,l):void 0}}(e))||l){_&&(e=_);var S=0,F=function(){};return{s:F,n:function(){return S>=e.length?{done:!0}:{done:!1,value:e[S++]}},e:function(e){throw e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var k,E=!0,T=!1;return{s:function(){_=_.call(e)},n:function(){var e=_.next();return E=e.done,e},e:function(e){T=!0,k=e},f:function(){try{E||null==_.return||_.return()}finally{if(T)throw k}}}}function _arrayLikeToArray(e,l){(null==l||l>e.length)&&(l=e.length);for(var _=0,S=new Array(l);_<l;_++)S[_]=e[_];return S}function isScalar(e){return/boolean|number|string/.test((0,k.default)(e))}var E=["level","logger"],T=["tags","extra"]},"./packages/@logrocket/utils/src/sendTelemetryData.js":
/*!************************************************************!*\
					  !*** ./packages/@logrocket/utils/src/sendTelemetryData.js ***!
					  \************************************************************/function(e,l,_){var S=_(/*! @babel/runtime/helpers/interopRequireDefault */"./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(l,"__esModule",{value:!0}),l.sendTelemetry=function(e,l){"undefined"!=typeof window&&window._lrdebug?(0,E.default)(e):l&&l.extra&&l.extra.appID&&"function"==typeof l.extra.appID.indexOf&&0===l.extra.appID.indexOf("au2drp/")&&Math.random()>=.25||_sendToSentry(_objectSpread({message:e},l))},l.default=function(e,l){try{var _,S,k=e.message;try{_=JSON.stringify(l).slice(0,1e3)}catch(e){try{_="Could not stringify payload: ".concat(Object.prototype.toString.call(l))}catch(e){}}try{S=T.default.computeStackTrace(e).stack.map(function(e){return{filename:e.url,lineno:e.line,colno:e.column,function:e.func||"?"}})}catch(e){}_sendToSentry({message:k,extra:{stringPayload:_},exception:{values:[{type:e.type,value:k,stacktrace:{frames:S}}]}})}catch(e){(0,E.default)("Failed to send",e)}};var k=S(_(/*! @babel/runtime/helpers/defineProperty */"./node_modules/@babel/runtime/helpers/defineProperty.js")),E=S(_(/*! ./logError */"./packages/@logrocket/utils/src/logError.js")),T=S(_(/*! ./TraceKit */"./packages/@logrocket/utils/src/TraceKit.js"));function ownKeys(e,l){var _=Object.keys(e);if(Object.getOwnPropertySymbols){var S=Object.getOwnPropertySymbols(e);l&&(S=S.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),_.push.apply(_,S)}return _}function _objectSpread(e){for(var l=1;l<arguments.length;l++){var _=null!=arguments[l]?arguments[l]:{};l%2?ownKeys(Object(_),!0).forEach(function(l){(0,k.default)(e,l,_[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(_)):ownKeys(Object(_)).forEach(function(l){Object.defineProperty(e,l,Object.getOwnPropertyDescriptor(_,l))})}return e}var M="8304d923ee86bbba88df4d491ccbc1c75ecfbe70";function _sendToSentry(e){try{var l,_,S=e.message,k="https://e.logrocket.com/api/3/store/?sentry_version=7&sentry_client=http%2F3.8.0&sentry_key=b64162b4187a4c5caae8a68a7e291793",T=JSON.stringify(_objectSpread({message:S,logger:"javascript",platform:"javascript",request:{headers:{"User-Agent":"undefined"!=typeof navigator&&navigator.userAgent},url:"undefined"!=typeof location&&location.href},release:M,environment:(null===(l=window)||void 0===l||null===(_=l.__SDKCONFIG__)||void 0===_?void 0:_.scriptEnv)||"prod"},e));if("undefined"!=typeof window){var R=new(window._lrXMLHttpRequest||XMLHttpRequest);R.open("POST",k),R.send(T)}else"undefined"!=typeof fetch&&fetch(k,{method:"POST",body:T}).catch(function(e){(0,E.default)("Failed to send via fetch",e)})}catch(I){(0,E.default)("Failed to send",I)}}},"./packages/@logrocket/utils/src/startsWith.js":
/*!*****************************************************!*\
					  !*** ./packages/@logrocket/utils/src/startsWith.js ***!
					  \*****************************************************/function(e,l){Object.defineProperty(l,"__esModule",{value:!0}),l.default=function(e,l){var _=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return e&&l&&e.substring(_,_+l.length)===l}},"./packages/logrocket/src/LogRocket.js":
/*!*********************************************!*\
					  !*** ./packages/logrocket/src/LogRocket.js ***!
					  \*********************************************/function(e,l,_){var S=_(/*! @babel/runtime/helpers/interopRequireDefault */"./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(l,"__esModule",{value:!0}),l.default=l.MAX_QUEUE_SIZE=void 0;var k=S(_(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js")),E=S(_(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js")),T=S(_(/*! @babel/runtime/helpers/defineProperty */"./node_modules/@babel/runtime/helpers/defineProperty.js")),M=S(_(/*! @babel/runtime/helpers/objectWithoutProperties */"./node_modules/@babel/runtime/helpers/objectWithoutProperties.js")),R=S(_(/*! @logrocket/network */"./packages/@logrocket/network/src/index.js")),I=_(/*! @logrocket/exceptions */"./packages/@logrocket/exceptions/src/index.js"),D=S(_(/*! @logrocket/console */"./packages/@logrocket/console/src/index.js")),O=_(/*! @logrocket/redux */"./packages/@logrocket/redux/src/index.js");function ownKeys(e,l){var _=Object.keys(e);if(Object.getOwnPropertySymbols){var S=Object.getOwnPropertySymbols(e);l&&(S=S.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),_.push.apply(_,S)}return _}function _objectSpread(e){for(var l=1;l<arguments.length;l++){var _=null!=arguments[l]?arguments[l]:{};l%2?ownKeys(Object(_),!0).forEach(function(l){(0,T.default)(e,l,_[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(_)):ownKeys(Object(_)).forEach(function(l){Object.defineProperty(e,l,Object.getOwnPropertyDescriptor(_,l))})}return e}l.MAX_QUEUE_SIZE=1e3;var L=function(){function LogRocket(){var e=this;(0,k.default)(this,LogRocket),this._buffer=[],["log","info","warn","error","debug"].forEach(function(l){e[l]=function(){for(var _=arguments.length,S=new Array(_),k=0;k<_;k++)S[k]=arguments[k];e.addEvent("lr.core.LogEvent",function(){return"error"===l&&(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).shouldAggregateConsoleErrors&&I.Capture.captureMessage(e,S[0],S,{},!0),{logLevel:l.toUpperCase(),args:S}},{shouldCaptureStackTrace:!0})}}),this._isInitialized=!1,this._installed=[],window._lr_surl_cb=this.getSessionURL.bind(this)}return(0,E.default)(LogRocket,[{key:"addEvent",value:function(e,l){var _=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},S=Date.now();this._run(function(k){k.addEvent(e,l,_objectSpread(_objectSpread({},_),{},{timeOverride:S}))})}},{key:"onLogger",value:function(e){for(this._logger=e;this._buffer.length>0;)this._buffer.shift()(this._logger)}},{key:"_run",value:function(e){if(!this._isDisabled)if(this._logger)e(this._logger);else{if(this._buffer.length>=1e3)return this._isDisabled=!0,void this.uninstall();this._buffer.push(e.bind(this))}}},{key:"init",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this._isInitialized){var _,S=l.shouldAugmentNPS,k=void 0===S||S,E=l.shouldParseXHRBlob,T=void 0!==E&&E,O=l.shouldDetectExceptions;(void 0===O||O)&&this._installed.push((0,I.registerExceptions)(this)),this._installed.push((0,R.default)(this,{shouldAugmentNPS:!!k,shouldParseXHRBlob:!!T,isDisabled:!1===(null==l||null===(_=l.network)||void 0===_?void 0:_.isEnabled)})),this._installed.push((0,D.default)(this)),this._isInitialized=!0,this._run(function(_){_.init(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=e.ingestServer,_=(0,M.default)(e,["ingestServer"]);return l?_objectSpread({serverURL:"".concat(l,"/i"),statsURL:"".concat(l,"/s")},_):_}(l))})}}},{key:"start",value:function(){this._run(function(e){e.start()})}},{key:"uninstall",value:function(){this._installed.forEach(function(e){return e()}),this._buffer=[],this._run(function(e){e.uninstall()})}},{key:"identify",value:function(e,l){this._run(function(_){_.identify(e,l)})}},{key:"startNewSession",value:function(){this._run(function(e){e.startNewSession()})}},{key:"track",value:function(e,l){this._run(function(_){_.track(e,l)})}},{key:"getSessionURL",value:function(e){if("function"!=typeof e)throw new Error("LogRocket: must pass callback to getSessionURL()");this._run(function(l){l.getSessionURL?l.getSessionURL(e):e(l.recordingURL)})}},{key:"trackScrollEvent",value:function(e){this._logger&&this._logger.trackScrollEvent(e)}},{key:"getVersion",value:function(e){this._run(function(l){e(l.version)})}},{key:"captureMessage",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};I.Capture.captureMessage(this,e,[e],l)}},{key:"captureException",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};I.Capture.captureException(this,e,l)}},{key:"version",get:function(){return this._logger&&this._logger.version}},{key:"sessionURL",get:function(){return this._logger&&this._logger.recordingURL}},{key:"recordingURL",get:function(){return this._logger&&this._logger.recordingURL}},{key:"recordingID",get:function(){return this._logger&&this._logger.recordingID}},{key:"threadID",get:function(){return this._logger&&this._logger.threadID}},{key:"tabID",get:function(){return this._logger&&this._logger.tabID}},{key:"reduxEnhancer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,O.createEnhancer)(this,e)}},{key:"reduxMiddleware",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,O.createMiddleware)(this,e)}},{key:"isDisabled",get:function(){return!!(this._isDisabled||this._logger&&this._logger._isDisabled)}}]),LogRocket}();l.default=L},"./packages/logrocket/src/makeLogRocket.js":
/*!*************************************************!*\
					  !*** ./packages/logrocket/src/makeLogRocket.js ***!
					  \*************************************************/function(e,l,_){var S=_(/*! @babel/runtime/helpers/interopRequireDefault */"./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(l,"__esModule",{value:!0}),l.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:makeNoopPolyfill,_=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return new k.default};if("undefined"!=typeof navigator&&"ReactNative"===navigator.product)throw new Error(E);if("undefined"!=typeof window){if(window._disableLogRocket)return l();if(window.MutationObserver&&window.WeakMap){window._lrMutationObserver=window.MutationObserver;var S=_();return e(S),S}}return makeNoopPolyfill()};var k=S(_(/*! ./LogRocket */"./packages/logrocket/src/LogRocket.js")),E="LogRocket on React Native requires the LogRocket React Native specific SDK. See setup guide here https://docs.logrocket.com/reference/react-native.",makeNoopPolyfill=function(){return{init:function(){},uninstall:function(){},log:function(){},info:function(){},warn:function(){},error:function(){},debug:function(){},addEvent:function(){},identify:function(){},start:function(){},get threadID(){return null},get recordingID(){return null},get recordingURL(){return null},reduxEnhancer:function(){return function(e){return function(){return e.apply(void 0,arguments)}}},reduxMiddleware:function(){return function(){return function(e){return function(l){return e(l)}}}},track:function(){},getSessionURL:function(){},getVersion:function(){},startNewSession:function(){},onLogger:function(){},setClock:function(){},captureMessage:function(){},captureException:function(){}}}},"./packages/logrocket/src/setup.js":
/*!*****************************************!*\
					  !*** ./packages/logrocket/src/setup.js ***!
					  \*****************************************/function(e,l,_){var S=_(/*! @babel/runtime/helpers/interopRequireDefault */"./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(l,"__esModule",{value:!0}),l.getDomainsAndEnv=getDomainsAndEnv,l.setupBaseSDKCONFIG=setupBaseSDKCONFIG,l.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=e.enterpriseServer,_=e.sdkVersion,S=void 0===_?"10.1.0":_,T=(0,k.default)(e,["enterpriseServer","sdkVersion"]),M=getDomainsAndEnv(S),R=M.scriptEnv,I=M.scriptOrigin,D=M.scriptIngest,O=T.sdkServer||l,L=T.ingestServer||l||D,U=(0,E.default)(function(){var e=document.createElement("script");L&&(setupBaseSDKCONFIG(L),window.__SDKCONFIG__.scriptEnv=R),O?e.src="".concat(O,"/logger.min.js"):window.__SDKCONFIG__&&window.__SDKCONFIG__.loggerURL?e.src=window.__SDKCONFIG__.loggerURL:window._lrAsyncScript?e.src=window._lrAsyncScript:e.src="".concat(I,"/logger-1.min.js"),e.async=!0,document.head.appendChild(e),e.onload=function(){"function"==typeof window._LRLogger?setTimeout(function(){U.onLogger(new window._LRLogger({sdkVersion:S}))}):U.uninstall()},e.onerror=function(){U.uninstall()}});return U};var k=S(_(/*! @babel/runtime/helpers/objectWithoutProperties */"./node_modules/@babel/runtime/helpers/objectWithoutProperties.js")),E=S(_(/*! ./makeLogRocket */"./packages/logrocket/src/makeLogRocket.js")),T={"cdn.logrocket.com":"https://r.logrocket.io","cdn.logrocket.io":"https://r.logrocket.io","cdn.lr-ingest.io":"https://r.lr-ingest.io","cdn.lr-in.com":"https://r.lr-in.com","cdn.lr-in-prod.com":"https://r.lr-in-prod.com","cdn.lr-ingest.com":"https://r.lr-ingest.com","cdn.ingest-lr.com":"https://r.ingest-lr.com","cdn.lr-intake.com":"https://r.lr-intake.com","cdn.intake-lr.com":"https://r.intake-lr.com","cdn.logr-ingest.com":"https://r.logr-ingest.com","cdn.lrkt-in.com":"https://r.lrkt-in.com","cdn.lgrckt-in.com":"https://r.lgrckt-in.com","cdn-staging.logrocket.io":"https://staging-i.logrocket.io","cdn-staging.lr-ingest.io":"https://staging-i.lr-ingest.io","cdn-staging.lr-in.com":"https://staging-i.lr-in.com","cdn-staging.lr-in-prod.com":"https://staging-i.lr-in-prod.com","cdn-staging.lr-ingest.com":"https://staging-i.lr-ingest.com","cdn-staging.ingest-lr.com":"https://staging-i.ingest-lr.com","cdn-staging.lr-intake.com":"https://staging-i.lr-intake.com","cdn-staging.intake-lr.com":"https://staging-i.intake-lr.com","cdn-staging.logr-ingest.com":"https://staging-i.logr-ingest.com","cdn-staging.lrkt-in.com":"https://staging-i.lrkt-in.com","cdn-staging.lgrckt-in.com":"https://staging-i.lgrckt-in.com"};function getDomainsAndEnv(e){if("script"===e||"shopify-pixel"===e){try{var l=document.currentScript.src.match(/^(https?:\/\/([^\\]+))\/.+$/),_=l&&l[2];if(_&&T[_])return{scriptEnv:(S=_,S.startsWith("cdn-staging")?"staging":S.startsWith("localhost")?"development":"prod"),scriptOrigin:l&&l[1],scriptIngest:T[_]}}catch(k){}return{scriptEnv:"prod",scriptOrigin:"https://cdn.logrocket.io"}}return{scriptEnv:void 0,scriptOrigin:"https://cdn.lgrckt-in.com",scriptIngest:"https://r.lgrckt-in.com"};var S}function setupBaseSDKCONFIG(e){void 0===window.__SDKCONFIG__&&(window.__SDKCONFIG__={}),window.__SDKCONFIG__.serverURL="".concat(e,"/i"),window.__SDKCONFIG__.statsURL="".concat(e,"/s")}},"./node_modules/@babel/runtime/helpers/arrayLikeToArray.js":
/*!*****************************************************************!*\
					  !*** ./node_modules/@babel/runtime/helpers/arrayLikeToArray.js ***!
					  \*****************************************************************/function(e){e.exports=function(e,l){(null==l||l>e.length)&&(l=e.length);for(var _=0,S=new Array(l);_<l;_++)S[_]=e[_];return S},e.exports.__esModule=!0,e.exports.default=e.exports},"./node_modules/@babel/runtime/helpers/arrayWithoutHoles.js":
/*!******************************************************************!*\
					  !*** ./node_modules/@babel/runtime/helpers/arrayWithoutHoles.js ***!
					  \******************************************************************/function(e,l,_){var S=_(/*! ./arrayLikeToArray.js */"./node_modules/@babel/runtime/helpers/arrayLikeToArray.js");e.exports=function(e){if(Array.isArray(e))return S(e)},e.exports.__esModule=!0,e.exports.default=e.exports},"./node_modules/@babel/runtime/helpers/classCallCheck.js":
/*!***************************************************************!*\
					  !*** ./node_modules/@babel/runtime/helpers/classCallCheck.js ***!
					  \***************************************************************/function(e){e.exports=function(e,l){if(!(e instanceof l))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},"./node_modules/@babel/runtime/helpers/createClass.js":
/*!************************************************************!*\
					  !*** ./node_modules/@babel/runtime/helpers/createClass.js ***!
					  \************************************************************/function(e,l,_){var S=_(/*! ./toPropertyKey.js */"./node_modules/@babel/runtime/helpers/toPropertyKey.js");function _defineProperties(e,l){for(var _=0;_<l.length;_++){var k=l[_];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(e,S(k.key),k)}}e.exports=function(e,l,_){return l&&_defineProperties(e.prototype,l),_&&_defineProperties(e,_),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},"./node_modules/@babel/runtime/helpers/defineProperty.js":
/*!***************************************************************!*\
					  !*** ./node_modules/@babel/runtime/helpers/defineProperty.js ***!
					  \***************************************************************/function(e,l,_){var S=_(/*! ./toPropertyKey.js */"./node_modules/@babel/runtime/helpers/toPropertyKey.js");e.exports=function(e,l,_){return(l=S(l))in e?Object.defineProperty(e,l,{value:_,enumerable:!0,configurable:!0,writable:!0}):e[l]=_,e},e.exports.__esModule=!0,e.exports.default=e.exports},"./node_modules/@babel/runtime/helpers/interopRequireDefault.js":
/*!**********************************************************************!*\
					  !*** ./node_modules/@babel/runtime/helpers/interopRequireDefault.js ***!
					  \**********************************************************************/function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},"./node_modules/@babel/runtime/helpers/iterableToArray.js":
/*!****************************************************************!*\
					  !*** ./node_modules/@babel/runtime/helpers/iterableToArray.js ***!
					  \****************************************************************/function(e){e.exports=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.__esModule=!0,e.exports.default=e.exports},"./node_modules/@babel/runtime/helpers/nonIterableSpread.js":
/*!******************************************************************!*\
					  !*** ./node_modules/@babel/runtime/helpers/nonIterableSpread.js ***!
					  \******************************************************************/function(e){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},"./node_modules/@babel/runtime/helpers/objectWithoutProperties.js":
/*!************************************************************************!*\
					  !*** ./node_modules/@babel/runtime/helpers/objectWithoutProperties.js ***!
					  \************************************************************************/function(e,l,_){var S=_(/*! ./objectWithoutPropertiesLoose.js */"./node_modules/@babel/runtime/helpers/objectWithoutPropertiesLoose.js");e.exports=function(e,l){if(null==e)return{};var _,k,E=S(e,l);if(Object.getOwnPropertySymbols){var T=Object.getOwnPropertySymbols(e);for(k=0;k<T.length;k++)_=T[k],l.indexOf(_)>=0||Object.prototype.propertyIsEnumerable.call(e,_)&&(E[_]=e[_])}return E},e.exports.__esModule=!0,e.exports.default=e.exports},"./node_modules/@babel/runtime/helpers/objectWithoutPropertiesLoose.js":
/*!*****************************************************************************!*\
					  !*** ./node_modules/@babel/runtime/helpers/objectWithoutPropertiesLoose.js ***!
					  \*****************************************************************************/function(e){e.exports=function(e,l){if(null==e)return{};var _,S,k={},E=Object.keys(e);for(S=0;S<E.length;S++)_=E[S],l.indexOf(_)>=0||(k[_]=e[_]);return k},e.exports.__esModule=!0,e.exports.default=e.exports},"./node_modules/@babel/runtime/helpers/toConsumableArray.js":
/*!******************************************************************!*\
					  !*** ./node_modules/@babel/runtime/helpers/toConsumableArray.js ***!
					  \******************************************************************/function(e,l,_){var S=_(/*! ./arrayWithoutHoles.js */"./node_modules/@babel/runtime/helpers/arrayWithoutHoles.js"),k=_(/*! ./iterableToArray.js */"./node_modules/@babel/runtime/helpers/iterableToArray.js"),E=_(/*! ./unsupportedIterableToArray.js */"./node_modules/@babel/runtime/helpers/unsupportedIterableToArray.js"),T=_(/*! ./nonIterableSpread.js */"./node_modules/@babel/runtime/helpers/nonIterableSpread.js");e.exports=function(e){return S(e)||k(e)||E(e)||T()},e.exports.__esModule=!0,e.exports.default=e.exports},"./node_modules/@babel/runtime/helpers/toPrimitive.js":
/*!************************************************************!*\
					  !*** ./node_modules/@babel/runtime/helpers/toPrimitive.js ***!
					  \************************************************************/function(e,l,_){var S=_(/*! ./typeof.js */"./node_modules/@babel/runtime/helpers/typeof.js").default;e.exports=function(e,l){if("object"!==S(e)||null===e)return e;var _=e[Symbol.toPrimitive];if(void 0!==_){var k=_.call(e,l||"default");if("object"!==S(k))return k;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===l?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},"./node_modules/@babel/runtime/helpers/toPropertyKey.js":
/*!**************************************************************!*\
					  !*** ./node_modules/@babel/runtime/helpers/toPropertyKey.js ***!
					  \**************************************************************/function(e,l,_){var S=_(/*! ./typeof.js */"./node_modules/@babel/runtime/helpers/typeof.js").default,k=_(/*! ./toPrimitive.js */"./node_modules/@babel/runtime/helpers/toPrimitive.js");e.exports=function(e){var l=k(e,"string");return"symbol"===S(l)?l:String(l)},e.exports.__esModule=!0,e.exports.default=e.exports},"./node_modules/@babel/runtime/helpers/typeof.js":
/*!*******************************************************!*\
					  !*** ./node_modules/@babel/runtime/helpers/typeof.js ***!
					  \*******************************************************/function(e){function _typeof(l){return e.exports=_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,_typeof(l)}e.exports=_typeof,e.exports.__esModule=!0,e.exports.default=e.exports},"./node_modules/@babel/runtime/helpers/unsupportedIterableToArray.js":
/*!***************************************************************************!*\
					  !*** ./node_modules/@babel/runtime/helpers/unsupportedIterableToArray.js ***!
					  \***************************************************************************/function(e,l,_){var S=_(/*! ./arrayLikeToArray.js */"./node_modules/@babel/runtime/helpers/arrayLikeToArray.js");e.exports=function(e,l){if(e){if("string"==typeof e)return S(e,l);var _=Object.prototype.toString.call(e).slice(8,-1);return"Object"===_&&e.constructor&&(_=e.constructor.name),"Map"===_||"Set"===_?Array.from(e):"Arguments"===_||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(_)?S(e,l):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports}},l={};function __webpack_require__(_){var S=l[_];if(void 0!==S)return S.exports;var k=l[_]={exports:{}};return e[_](k,k.exports,__webpack_require__),k.exports}__webpack_require__.g=function(){if("object"===("undefined"==typeof globalThis?"undefined":_typeof3(globalThis)))return globalThis;try{return this||new Function("return this")()}catch(ta){if("object"===("undefined"==typeof window?"undefined":_typeof3(window)))return window}}();var _={};return function(){var e=_,l=__webpack_require__(/*! @babel/runtime/helpers/interopRequireDefault */"./node_modules/@babel/runtime/helpers/interopRequireDefault.js");
/*!**********************************************!*\
					  !*** ./packages/logrocket/src/module-npm.js ***!
					  \**********************************************/Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var S=(0,l(__webpack_require__(/*! ./setup */"./packages/logrocket/src/setup.js")).default)();e.default=S}(),_=_.default}()})}(re));var ne,ie,ae,oe,se,ue,le,ce,he,de,fe,pe={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},ve={duration:.5,overwrite:!1,delay:0},ge=1e8,me=1e-8,ye=2*Math.PI,_e=ye/4,be=0,Se=Math.sqrt,we=Math.cos,xe=Math.sin,_isString=function(e){return"string"==typeof e},_isFunction=function(e){return"function"==typeof e},_isNumber=function(e){return"number"==typeof e},_isUndefined=function(e){return void 0===e},_isObject=function(e){return"object"===_typeof3(e)},_isNotFalse=function(e){return!1!==e},_windowExists$1=function(){return"undefined"!=typeof window},_isFuncOrString=function(e){return _isFunction(e)||_isString(e)},ke="function"==typeof ArrayBuffer&&ArrayBuffer.isView||function(){},Ae=Array.isArray,Ee=/(?:-?\.?\d|\.)+/gi,Ce=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,Te=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,Me=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,Re=/[+-]=-?[.\d]+/,Ie=/[^,'"\[\]\s]+/gi,Pe=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,De={},Oe={},_install=function(e){return(Oe=_merge(e,De))&&Ct},_missingPlugin=function(e,l){},_warn=function(e,l){return!l&&void 0},_addGlobal=function(e,l){return e&&(De[e]=l)&&Oe&&(Oe[e]=l)||De},_emptyFunc=function(){return 0},Le={suppressEvents:!0,isStart:!0,kill:!1},Ue={suppressEvents:!0,kill:!1},Fe={suppressEvents:!0},Ne={},Be=[],ze={},Ge={},je={},He=30,Ve=[],We="",_harness=function(e){var l,_,S=e[0];if(_isObject(S)||_isFunction(S)||(e=[e]),!(l=(S._gsap||{}).harness)){for(_=Ve.length;_--&&!Ve[_].targetTest(S););l=Ve[_]}for(_=e.length;_--;)e[_]&&(e[_]._gsap||(e[_]._gsap=new GSCache(e[_],l)))||e.splice(_,1);return e},_getCache=function(e){return e._gsap||_harness(toArray$2(e))[0]._gsap},_getProperty=function(e,l,_){return(_=e[l])&&_isFunction(_)?e[l]():_isUndefined(_)&&e.getAttribute&&e.getAttribute(l)||_},_forEachName=function(e,l){return(e=e.split(",")).forEach(l)||e},_round=function(e){return Math.round(1e5*e)/1e5||0},_roundPrecise=function(e){return Math.round(1e7*e)/1e7||0},_parseRelative=function(e,l){var _=l.charAt(0),S=parseFloat(l.substr(2));return e=parseFloat(e),"+"===_?e+S:"-"===_?e-S:"*"===_?e*S:e/S},_arrayContainsAny=function(e,l){for(var _=l.length,S=0;e.indexOf(l[S])<0&&++S<_;);return S<_},_lazyRender=function(){var e,l,_=Be.length,S=Be.slice(0);for(ze={},Be.length=0,e=0;e<_;e++)(l=S[e])&&l._lazy&&(l.render(l._lazy[0],l._lazy[1],!0)._lazy=0)},_isRevertWorthy=function(e){return!!(e._initted||e._startAt||e.add)},_lazySafeRender=function(e,l,_,S){Be.length&&!ie&&_lazyRender(),e.render(l,_,!!(ie&&l<0&&_isRevertWorthy(e))),Be.length&&!ie&&_lazyRender()},_numericIfPossible=function(e){var l=parseFloat(e);return(l||0===l)&&(e+"").match(Ie).length<2?l:_isString(e)?e.trim():e},_passThrough=function(e){return e},_setDefaults=function(e,l){for(var _ in l)_ in e||(e[_]=l[_]);return e},_merge=function(e,l){for(var _ in l)e[_]=l[_];return e},qe=function _mergeDeep(e,l){for(var _ in l)"__proto__"!==_&&"constructor"!==_&&"prototype"!==_&&(e[_]=_isObject(l[_])?_mergeDeep(e[_]||(e[_]={}),l[_]):l[_]);return e},_copyExcluding=function(e,l){var _,S={};for(_ in e)_ in l||(S[_]=e[_]);return S},_inheritDefaults=function(e){var l,_=e.parent||oe,S=e.keyframes?(l=Ae(e.keyframes),function(e,_){for(var S in _)S in e||"duration"===S&&l||"ease"===S||(e[S]=_[S])}):_setDefaults;if(_isNotFalse(e.inherit))for(;_;)S(e,_.vars.defaults),_=_.parent||_._dp;return e},_addLinkedListItem=function(e,l,_,S,k){var E,T=e[S];if(k)for(E=l[k];T&&T[k]>E;)T=T._prev;return T?(l._next=T._next,T._next=l):(l._next=e[_],e[_]=l),l._next?l._next._prev=l:e[S]=l,l._prev=T,l.parent=l._dp=e,l},_removeLinkedListItem=function(e,l,_,S){void 0===_&&(_="_first"),void 0===S&&(S="_last");var k=l._prev,E=l._next;k?k._next=E:e[_]===l&&(e[_]=E),E?E._prev=k:e[S]===l&&(e[S]=k),l._next=l._prev=l.parent=null},_removeFromParent=function(e,l){e.parent&&(!l||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},_uncache=function(e,l){if(e&&(!l||l._end>e._dur||l._start<0))for(var _=e;_;)_._dirty=1,_=_.parent;return e},_rewindStartAt=function(e,l,_,S){return e._startAt&&(ie?e._startAt.revert(Ue):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(l,!0,S))},Xe=function _hasNoPausedAncestors(e){return!e||e._ts&&_hasNoPausedAncestors(e.parent)},_elapsedCycleDuration=function(e){return e._repeat?_animationCycle(e._tTime,e=e.duration()+e._rDelay)*e:0},_animationCycle=function(e,l){var _=Math.floor(e=_roundPrecise(e/l));return e&&_===e?_-1:_},_parentToChildTotalTime=function(e,l){return(e-l._start)*l._ts+(l._ts>=0?0:l._dirty?l.totalDuration():l._tDur)},_setEnd=function(e){return e._end=_roundPrecise(e._start+(e._tDur/Math.abs(e._ts||e._rts||me)||0))},_alignPlayhead=function(e,l){var _=e._dp;return _&&_.smoothChildTiming&&e._ts&&(e._start=_roundPrecise(_._time-(e._ts>0?l/e._ts:((e._dirty?e.totalDuration():e._tDur)-l)/-e._ts)),_setEnd(e),_._dirty||_uncache(_,e)),e},_postAddChecks=function(e,l){var _;if((l._time||!l._dur&&l._initted||l._start<e._time&&(l._dur||!l.add))&&(_=_parentToChildTotalTime(e.rawTime(),l),(!l._dur||_clamp(0,l.totalDuration(),_)-l._tTime>me)&&l.render(_,!0)),_uncache(e,l)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(_=e;_._dp;)_.rawTime()>=0&&_.totalTime(_._tTime),_=_._dp;e._zTime=-1e-8}},_addToTimeline=function(e,l,_,S){return l.parent&&_removeFromParent(l),l._start=_roundPrecise((_isNumber(_)?_:_||e!==oe?Qe(e,_,l):e._time)+l._delay),l._end=_roundPrecise(l._start+(l.totalDuration()/Math.abs(l.timeScale())||0)),_addLinkedListItem(e,l,"_first","_last",e._sort?"_start":0),_isFromOrFromStart(l)||(e._recent=l),S||_postAddChecks(e,l),e._ts<0&&_alignPlayhead(e,e._tTime),e},_scrollTrigger=function(e,l){return De.ScrollTrigger?De.ScrollTrigger.create(l,e):void 0},_attemptInitTween=function(e,l,_,S,k){return pt(e,l,k),e._initted?!_&&e._pt&&!ie&&(e._dur&&!1!==e.vars.lazy||!e._dur&&e.vars.lazy)&&he!==nt.frame?(Be.push(e),e._lazy=[k,S],1):void 0:1},Ke=function _parentPlayheadIsBeforeStart(e){var l=e.parent;return l&&l._ts&&l._initted&&!l._lock&&(l.rawTime()<0||_parentPlayheadIsBeforeStart(l))},_isFromOrFromStart=function(e){var l=e.data;return"isFromStart"===l||"isStart"===l},_setDuration=function(e,l,_,S){var k=e._repeat,E=_roundPrecise(l)||0,T=e._tTime/e._tDur;return T&&!S&&(e._time*=E/e._dur),e._dur=E,e._tDur=k?k<0?1e10:_roundPrecise(E*(k+1)+e._rDelay*k):E,T>0&&!S&&_alignPlayhead(e,e._tTime=e._tDur*T),e.parent&&_setEnd(e),_||_uncache(e.parent,e),e},_onUpdateTotalDuration=function(e){return e instanceof ht?_uncache(e):_setDuration(e,e._dur)},Ye={_start:0,endTime:_emptyFunc,totalDuration:_emptyFunc},Qe=function _parsePosition(e,l,_){var S,k,E,T=e.labels,M=e._recent||Ye,R=e.duration()>=ge?M.endTime(!1):e._dur;return _isString(l)&&(isNaN(l)||l in T)?(k=l.charAt(0),E="%"===l.substr(-1),S=l.indexOf("="),"<"===k||">"===k?(S>=0&&(l=l.replace(/=/,"")),("<"===k?M._start:M.endTime(M._repeat>=0))+(parseFloat(l.substr(1))||0)*(E?(S<0?M:_).totalDuration()/100:1)):S<0?(l in T||(T[l]=R),T[l]):(k=parseFloat(l.charAt(S-1)+l.substr(S+1)),E&&_&&(k=k/100*(Ae(_)?_[0]:_).totalDuration()),S>1?_parsePosition(e,l.substr(0,S-1),_)+k:R+k)):null==l?R:+l},_createTweenType=function(e,l,_){var S,k,E=_isNumber(l[1]),T=(E?2:1)+(e<2?0:1),M=l[T];if(E&&(M.duration=l[1]),M.parent=_,e){for(S=M,k=_;k&&!("immediateRender"in S);)S=k.vars.defaults||{},k=_isNotFalse(k.vars.inherit)&&k.parent;M.immediateRender=_isNotFalse(S.immediateRender),e<2?M.runBackwards=1:M.startAt=l[T-1]}return new mt(l[0],M,l[T+1])},_conditionalReturn=function(e,l){return e||0===e?l(e):l},_clamp=function(e,l,_){return _<e?e:_>l?l:_},getUnit=function(e,l){return _isString(e)&&(l=Pe.exec(e))?l[1]:""},Je=[].slice,_isArrayLike=function(e,l){return e&&_isObject(e)&&"length"in e&&(!l&&!e.length||e.length-1 in e&&_isObject(e[0]))&&!e.nodeType&&e!==se},toArray$2=function(e,l,_){return ae&&!l&&ae.selector?ae.selector(e):!_isString(e)||_||!ue&&_wake()?Ae(e)?function(e,l,_){return void 0===_&&(_=[]),e.forEach(function(e){var S;return _isString(e)&&!l||_isArrayLike(e,1)?(S=_).push.apply(S,toArray$2(e)):_.push(e)})||_}(e,_):_isArrayLike(e)?Je.call(e,0):e?[e]:[]:Je.call((l||le).querySelectorAll(e),0)},selector=function(e){return e=toArray$2(e)[0]||_warn()||{},function(l){var _=e.current||e.nativeElement||e;return toArray$2(l,_.querySelectorAll?_:_===e?_warn()||le.createElement("div"):e)}},shuffle=function(e){return e.sort(function(){return.5-Math.random()})},distribute=function(e){if(_isFunction(e))return e;var l=_isObject(e)?e:{each:e},_=_parseEase(l.ease),S=l.from||0,k=parseFloat(l.base)||0,E={},T=S>0&&S<1,M=isNaN(S)||T,R=l.axis,I=S,D=S;return _isString(S)?I=D={center:.5,edges:.5,end:1}[S]||0:!T&&M&&(I=S[0],D=S[1]),function(e,T,O){var L,U,B,z,G,j,H,V,W,q=(O||l).length,X=E[q];if(!X){if(!(W="auto"===l.grid?0:(l.grid||[1,ge])[1])){for(H=-1e8;H<(H=O[W++].getBoundingClientRect().left)&&W<q;);W<q&&W--}for(X=E[q]=[],L=M?Math.min(W,q)*I-.5:S%W,U=W===ge?0:M?q*D/W-.5:S/W|0,H=0,V=ge,j=0;j<q;j++)B=j%W-L,z=U-(j/W|0),X[j]=G=R?Math.abs("y"===R?z:B):Se(B*B+z*z),G>H&&(H=G),G<V&&(V=G);"random"===S&&shuffle(X),X.max=H-V,X.min=V,X.v=q=(parseFloat(l.amount)||parseFloat(l.each)*(W>q?q-1:R?"y"===R?q/W:W:Math.max(W,q/W))||0)*("edges"===S?-1:1),X.b=q<0?k-q:k,X.u=getUnit(l.amount||l.each)||0,_=_&&q<0?_invertEase(_):_}return q=(X[e]-X.min)/X.max||0,_roundPrecise(X.b+(_?_(q):q)*X.v)+X.u}},_roundModifier=function(e){var l=Math.pow(10,((e+"").split(".")[1]||"").length);return function(_){var S=_roundPrecise(Math.round(parseFloat(_)/e)*e*l);return(S-S%1)/l+(_isNumber(_)?0:getUnit(_))}},snap=function(e,l){var _,S,k=Ae(e);return!k&&_isObject(e)&&(_=k=e.radius||ge,e.values?(e=toArray$2(e.values),(S=!_isNumber(e[0]))&&(_*=_)):e=_roundModifier(e.increment)),_conditionalReturn(l,k?_isFunction(e)?function(l){return S=e(l),Math.abs(S-l)<=_?S:l}:function(l){for(var k,E,T=parseFloat(S?l.x:l),M=parseFloat(S?l.y:0),R=ge,I=0,D=e.length;D--;)(k=S?(k=e[D].x-T)*k+(E=e[D].y-M)*E:Math.abs(e[D]-T))<R&&(R=k,I=D);return I=!_||R<=_?e[I]:l,S||I===l||_isNumber(l)?I:I+getUnit(l)}:_roundModifier(e))},random=function(e,l,_,S){return _conditionalReturn(Ae(e)?!l:!0===_?!!(_=0):!S,function(){return Ae(e)?e[~~(Math.random()*e.length)]:(_=_||1e-5)&&(S=_<1?Math.pow(10,(_+"").length-2):1)&&Math.floor(Math.round((e-_/2+Math.random()*(l-e+.99*_))/_)*_*S)/S})},_wrapArray=function(e,l,_){return _conditionalReturn(_,function(_){return e[~~l(_)]})},_replaceRandom=function(e){for(var l,_,S,k,E=0,T="";~(l=e.indexOf("random(",E));)S=e.indexOf(")",l),k="["===e.charAt(l+7),_=e.substr(l+7,S-l-7).match(k?Ie:Ee),T+=e.substr(E,l-E)+random(k?_:+_[0],k?0:+_[1],+_[2]||1e-5),E=S+1;return T+e.substr(E,e.length-E)},mapRange=function(e,l,_,S,k){var E=l-e,T=S-_;return _conditionalReturn(k,function(l){return _+((l-e)/E*T||0)})},_getLabelInDirection=function(e,l,_){var S,k,E,T=e.labels,M=ge;for(S in T)(k=T[S]-l)<0==!!_&&k&&M>(k=Math.abs(k))&&(E=S,M=k);return E},_callback=function(e,l,_){var S,k,E,T=e.vars,M=T[l],R=ae,I=e._ctx;if(M)return S=T[l+"Params"],k=T.callbackScope||e,_&&Be.length&&_lazyRender(),I&&(ae=I),E=S?M.apply(k,S):M.call(k),ae=R,E},_interrupt=function(e){return _removeFromParent(e),e.scrollTrigger&&e.scrollTrigger.kill(!!ie),e.progress()<1&&_callback(e,"onInterrupt"),e},Ze=[],_createPlugin=function(e){if(e)if(e=!e.name&&e.default||e,_windowExists$1()||e.headless){var l=e.name,_=_isFunction(e),S=l&&!_&&e.init?function(){this._props=[]}:e,k={init:_emptyFunc,render:_renderPropTweens,add:_addPropTween,kill:_killPropTweensOf,modifier:_addPluginModifier,rawVars:0},E={targetTest:0,get:0,getSetter:_getSetter,aliases:{},register:0};if(_wake(),e!==S){if(Ge[l])return;_setDefaults(S,_setDefaults(_copyExcluding(e,k),E)),_merge(S.prototype,_merge(k,_copyExcluding(e,E))),Ge[S.prop=l]=S,e.targetTest&&(Ve.push(S),Ne[l]=1),l=("css"===l?"CSS":l.charAt(0).toUpperCase()+l.substr(1))+"Plugin"}_addGlobal(l,S),e.register&&e.register(Ct,S,yt)}else Ze.push(e)},$e=255,et={aqua:[0,$e,$e],lime:[0,$e,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,$e],navy:[0,0,128],white:[$e,$e,$e],olive:[128,128,0],yellow:[$e,$e,0],orange:[$e,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[$e,0,0],pink:[$e,192,203],cyan:[0,$e,$e],transparent:[$e,$e,$e,0]},_hue=function(e,l,_){return(6*(e+=e<0?1:e>1?-1:0)<1?l+(_-l)*e*6:e<.5?_:3*e<2?l+(_-l)*(2/3-e)*6:l)*$e+.5|0},splitColor$1=function(e,l,_){var S,k,E,T,M,R,I,D,O,L,U=e?_isNumber(e)?[e>>16,e>>8&$e,e&$e]:0:et.black;if(!U){if(","===e.substr(-1)&&(e=e.substr(0,e.length-1)),et[e])U=et[e];else if("#"===e.charAt(0)){if(e.length<6&&(S=e.charAt(1),k=e.charAt(2),E=e.charAt(3),e="#"+S+S+k+k+E+E+(5===e.length?e.charAt(4)+e.charAt(4):"")),9===e.length)return[(U=parseInt(e.substr(1,6),16))>>16,U>>8&$e,U&$e,parseInt(e.substr(7),16)/255];U=[(e=parseInt(e.substr(1),16))>>16,e>>8&$e,e&$e]}else if("hsl"===e.substr(0,3))if(U=L=e.match(Ee),l){if(~e.indexOf("="))return U=e.match(Ce),_&&U.length<4&&(U[3]=1),U}else T=+U[0]%360/360,M=+U[1]/100,S=2*(R=+U[2]/100)-(k=R<=.5?R*(M+1):R+M-R*M),U.length>3&&(U[3]*=1),U[0]=_hue(T+1/3,S,k),U[1]=_hue(T,S,k),U[2]=_hue(T-1/3,S,k);else U=e.match(Ee)||et.transparent;U=U.map(Number)}return l&&!L&&(S=U[0]/$e,k=U[1]/$e,E=U[2]/$e,R=((I=Math.max(S,k,E))+(D=Math.min(S,k,E)))/2,I===D?T=M=0:(O=I-D,M=R>.5?O/(2-I-D):O/(I+D),T=I===S?(k-E)/O+(k<E?6:0):I===k?(E-S)/O+2:(S-k)/O+4,T*=60),U[0]=~~(T+.5),U[1]=~~(100*M+.5),U[2]=~~(100*R+.5)),_&&U.length<4&&(U[3]=1),U},_colorOrderData=function(e){var l=[],_=[],S=-1;return e.split(tt).forEach(function(e){var k=e.match(Te)||[];l.push.apply(l,k),_.push(S+=k.length+1)}),l.c=_,l},_formatColors=function(e,l,_){var S,k,E,T,M="",R=(e+M).match(tt),I=l?"hsla(":"rgba(",D=0;if(!R)return e;if(R=R.map(function(e){return(e=splitColor$1(e,l,1))&&I+(l?e[0]+","+e[1]+"%,"+e[2]+"%,"+e[3]:e.join(","))+")"}),_&&(E=_colorOrderData(e),(S=_.c).join(M)!==E.c.join(M)))for(T=(k=e.replace(tt,"1").split(Te)).length-1;D<T;D++)M+=k[D]+(~S.indexOf(D)?R.shift()||I+"0,0,0,0)":(E.length?E:R.length?R:_).shift());if(!k)for(T=(k=e.split(tt)).length-1;D<T;D++)M+=k[D]+R[D];return M+k[T]},tt=function(){var e,l="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b";for(e in et)l+="|"+e+"\\b";return new RegExp(l+")","gi")}(),rt=/hsl[a]?\(/,_colorStringFilter=function(e){var l,_=e.join(" ");if(tt.lastIndex=0,tt.test(_))return l=rt.test(_),e[1]=_formatColors(e[1],l),e[0]=_formatColors(e[0],l,_colorOrderData(e[1])),!0},nt=function(){var e,l,_,S,k,E,T=Date.now,M=500,R=33,I=T(),D=I,O=1e3/240,L=O,U=[],B=function _tick(_){var B,z,G,j,H=T()-D,V=!0===_;if((H>M||H<0)&&(I+=H-R),((B=(G=(D+=H)-I)-L)>0||V)&&(j=++S.frame,k=G-1e3*S.time,S.time=G/=1e3,L+=B+(B>=O?4:O-B),z=1),V||(e=l(_tick)),z)for(E=0;E<U.length;E++)U[E](G,k,j,_)};return S={time:0,frame:0,tick:function(){B(!0)},deltaRatio:function(e){return k/(1e3/(e||60))},wake:function(){ce&&(!ue&&_windowExists$1()&&(se=ue=window,le=se.document||{},De.gsap=Ct,(se.gsapVersions||(se.gsapVersions=[])).push(Ct.version),_install(Oe||se.GreenSockGlobals||!se.gsap&&se||{}),Ze.forEach(_createPlugin)),_="undefined"!=typeof requestAnimationFrame&&requestAnimationFrame,e&&S.sleep(),l=_||function(e){return setTimeout(e,L-1e3*S.time+1|0)},fe=1,B(2))},sleep:function(){(_?cancelAnimationFrame:clearTimeout)(e),fe=0,l=_emptyFunc},lagSmoothing:function(e,l){M=e||1/0,R=Math.min(l||33,M)},fps:function(e){O=1e3/(e||240),L=1e3*S.time+O},add:function(e,l,_){var k=l?function(l,_,E,T){e(l,_,E,T),S.remove(k)}:e;return S.remove(e),U[_?"unshift":"push"](k),_wake(),k},remove:function(e,l){~(l=U.indexOf(e))&&U.splice(l,1)&&E>=l&&E--},_listeners:U},S}(),_wake=function(){return!fe&&nt.wake()},it={},at=/^[\d.\-M][\d.\-,\s]/,ot=/["']/g,_parseObjectInString=function(e){for(var l,_,S,k={},E=e.substr(1,e.length-3).split(":"),T=E[0],M=1,R=E.length;M<R;M++)_=E[M],l=M!==R-1?_.lastIndexOf(","):_.length,S=_.substr(0,l),k[T]=isNaN(S)?S.replace(ot,"").trim():+S,T=_.substr(l+1).trim();return k},_invertEase=function(e){return function(l){return 1-e(1-l)}},st=function _propagateYoyoEase(e,l){for(var _,S=e._first;S;)S instanceof ht?_propagateYoyoEase(S,l):!S.vars.yoyoEase||S._yoyo&&S._repeat||S._yoyo===l||(S.timeline?_propagateYoyoEase(S.timeline,l):(_=S._ease,S._ease=S._yEase,S._yEase=_,S._yoyo=l)),S=S._next},_parseEase=function(e,l){return e&&(_isFunction(e)?e:it[e]||function(e){var l,_,S,k,E=(e+"").split("("),T=it[E[0]];return T&&E.length>1&&T.config?T.config.apply(null,~e.indexOf("{")?[_parseObjectInString(E[1])]:(l=e,_=l.indexOf("(")+1,S=l.indexOf(")"),k=l.indexOf("(",_),l.substring(_,~k&&k<S?l.indexOf(")",S+1):S)).split(",").map(_numericIfPossible)):it._CE&&at.test(e)?it._CE("",e):T}(e))||l},_insertEase=function(e,l,_,S){void 0===_&&(_=function(e){return 1-l(1-e)}),void 0===S&&(S=function(e){return e<.5?l(2*e)/2:1-l(2*(1-e))/2});var k,E={easeIn:l,easeOut:_,easeInOut:S};return _forEachName(e,function(e){for(var l in it[e]=De[e]=E,it[k=e.toLowerCase()]=_,E)it[k+("easeIn"===l?".in":"easeOut"===l?".out":".inOut")]=it[e+"."+l]=E[l]}),E},_easeInOutFromOut=function(e){return function(l){return l<.5?(1-e(1-2*l))/2:.5+e(2*(l-.5))/2}},ut=function _configElastic(e,l,_){var S=l>=1?l:1,k=(_||(e?.3:.45))/(l<1?l:1),E=k/ye*(Math.asin(1/S)||0),easeOut=function(e){return 1===e?1:S*Math.pow(2,-10*e)*xe((e-E)*k)+1},T="out"===e?easeOut:"in"===e?function(e){return 1-easeOut(1-e)}:_easeInOutFromOut(easeOut);return k=ye/k,T.config=function(l,_){return _configElastic(e,l,_)},T},lt=function _configBack(e,l){void 0===l&&(l=1.70158);var easeOut=function(e){return e?--e*e*((l+1)*e+l)+1:0},_="out"===e?easeOut:"in"===e?function(e){return 1-easeOut(1-e)}:_easeInOutFromOut(easeOut);return _.config=function(l){return _configBack(e,l)},_};_forEachName("Linear,Quad,Cubic,Quart,Quint,Strong",function(e,l){var _=l<5?l+1:l;_insertEase(e+",Power"+(_-1),l?function(e){return Math.pow(e,_)}:function(e){return e},function(e){return 1-Math.pow(1-e,_)},function(e){return e<.5?Math.pow(2*e,_)/2:1-Math.pow(2*(1-e),_)/2})}),it.Linear.easeNone=it.none=it.Linear.easeIn,_insertEase("Elastic",ut("in"),ut("out"),ut()),function(e,l){var _=1/l,S=2*_,k=2.5*_,easeOut=function(E){return E<_?e*E*E:E<S?e*Math.pow(E-1.5/l,2)+.75:E<k?e*(E-=2.25/l)*E+.9375:e*Math.pow(E-2.625/l,2)+.984375};_insertEase("Bounce",function(e){return 1-easeOut(1-e)},easeOut)}(7.5625,2.75),_insertEase("Expo",function(e){return Math.pow(2,10*(e-1))*e+e*e*e*e*e*e*(1-e)}),_insertEase("Circ",function(e){return-(Se(1-e*e)-1)}),_insertEase("Sine",function(e){return 1===e?1:1-we(e*_e)}),_insertEase("Back",lt("in"),lt("out"),lt()),it.SteppedEase=it.steps=De.SteppedEase={config:function(e,l){void 0===e&&(e=1);var _=1/e,S=e+(l?0:1),k=l?1:0;return function(e){return((S*_clamp(0,.99999999,e)|0)+k)*_}}},ve.ease=it["quad.out"],_forEachName("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(e){return We+=e+","+e+"Params,"});var GSCache=function(e,l){this.id=be++,e._gsap=this,this.target=e,this.harness=l,this.get=l?l.get:_getProperty,this.set=l?l.getSetter:_getSetter},ct=function(){function Animation(e){this.vars=e,this._delay=+e.delay||0,(this._repeat=e.repeat===1/0?-2:e.repeat||0)&&(this._rDelay=e.repeatDelay||0,this._yoyo=!!e.yoyo||!!e.yoyoEase),this._ts=1,_setDuration(this,+e.duration,1,1),this.data=e.data,ae&&(this._ctx=ae,ae.data.push(this)),fe||nt.wake()}var e=Animation.prototype;return e.delay=function(e){return e||0===e?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+e-this._delay),this._delay=e,this):this._delay},e.duration=function(e){return arguments.length?this.totalDuration(this._repeat>0?e+(e+this._rDelay)*this._repeat:e):this.totalDuration()&&this._dur},e.totalDuration=function(e){return arguments.length?(this._dirty=0,_setDuration(this,this._repeat<0?e:(e-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(e,l){if(_wake(),!arguments.length)return this._tTime;var _=this._dp;if(_&&_.smoothChildTiming&&this._ts){for(_alignPlayhead(this,e),!_._dp||_.parent||_postAddChecks(_,this);_&&_.parent;)_.parent._time!==_._start+(_._ts>=0?_._tTime/_._ts:(_.totalDuration()-_._tTime)/-_._ts)&&_.totalTime(_._tTime,!0),_=_.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&e<this._tDur||this._ts<0&&e>0||!this._tDur&&!e)&&_addToTimeline(this._dp,this,this._start-this._delay)}return(this._tTime!==e||!this._dur&&!l||this._initted&&Math.abs(this._zTime)===me||!e&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=e),_lazySafeRender(this,e,l)),this},e.time=function(e,l){return arguments.length?this.totalTime(Math.min(this.totalDuration(),e+_elapsedCycleDuration(this))%(this._dur+this._rDelay)||(e?this._dur:0),l):this._time},e.totalProgress=function(e,l){return arguments.length?this.totalTime(this.totalDuration()*e,l):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},e.progress=function(e,l){return arguments.length?this.totalTime(this.duration()*(!this._yoyo||1&this.iteration()?e:1-e)+_elapsedCycleDuration(this),l):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},e.iteration=function(e,l){var _=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(e-1)*_,l):this._repeat?_animationCycle(this._tTime,_)+1:1},e.timeScale=function(e,l){if(!arguments.length)return-1e-8===this._rts?0:this._rts;if(this._rts===e)return this;var _=this.parent&&this._ts?_parentToChildTotalTime(this.parent._time,this):this._tTime;return this._rts=+e||0,this._ts=this._ps||-1e-8===e?0:this._rts,this.totalTime(_clamp(-Math.abs(this._delay),this.totalDuration(),_),!1!==l),_setEnd(this),function(e){for(var l=e.parent;l&&l.parent;)l._dirty=1,l.totalDuration(),l=l.parent;return e}(this)},e.paused=function(e){return arguments.length?(this._ps!==e&&(this._ps=e,e?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(_wake(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,1===this.progress()&&Math.abs(this._zTime)!==me&&(this._tTime-=me)))),this):this._ps},e.startTime=function(e){if(arguments.length){this._start=e;var l=this.parent||this._dp;return l&&(l._sort||!this.parent)&&_addToTimeline(l,this,e-this._delay),this}return this._start},e.endTime=function(e){return this._start+(_isNotFalse(e)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(e){var l=this.parent||this._dp;return l?e&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?_parentToChildTotalTime(l.rawTime(e),this):this._tTime:this._tTime},e.revert=function(e){void 0===e&&(e=Fe);var l=ie;return ie=e,_isRevertWorthy(this)&&(this.timeline&&this.timeline.revert(e),this.totalTime(-.01,e.suppressEvents)),"nested"!==this.data&&!1!==e.kill&&this.kill(),ie=l,this},e.globalTime=function(e){for(var l=this,_=arguments.length?e:l.rawTime();l;)_=l._start+_/(Math.abs(l._ts)||1),l=l._dp;return!this.parent&&this._sat?this._sat.globalTime(e):_},e.repeat=function(e){return arguments.length?(this._repeat=e===1/0?-2:e,_onUpdateTotalDuration(this)):-2===this._repeat?1/0:this._repeat},e.repeatDelay=function(e){if(arguments.length){var l=this._time;return this._rDelay=e,_onUpdateTotalDuration(this),l?this.time(l):this}return this._rDelay},e.yoyo=function(e){return arguments.length?(this._yoyo=e,this):this._yoyo},e.seek=function(e,l){return this.totalTime(Qe(this,e),_isNotFalse(l))},e.restart=function(e,l){return this.play().totalTime(e?-this._delay:0,_isNotFalse(l)),this._dur||(this._zTime=-1e-8),this},e.play=function(e,l){return null!=e&&this.seek(e,l),this.reversed(!1).paused(!1)},e.reverse=function(e,l){return null!=e&&this.seek(e||this.totalDuration(),l),this.reversed(!0).paused(!1)},e.pause=function(e,l){return null!=e&&this.seek(e,l),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(e){return arguments.length?(!!e!==this.reversed()&&this.timeScale(-this._rts||(e?-1e-8:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-1e-8,this},e.isActive=function(){var e,l=this.parent||this._dp,_=this._start;return!(l&&!(this._ts&&this._initted&&l.isActive()&&(e=l.rawTime(!0))>=_&&e<this.endTime(!0)-me))},e.eventCallback=function(e,l,_){var S=this.vars;return arguments.length>1?(l?(S[e]=l,_&&(S[e+"Params"]=_),"onUpdate"===e&&(this._onUpdate=l)):delete S[e],this):S[e]},e.then=function(e){var l=this;return new Promise(function(_){var S=_isFunction(e)?e:_passThrough,_resolve=function(){var e=l.then;l.then=null,_isFunction(S)&&(S=S(l))&&(S.then||S===l)&&(l.then=e),_(S),l.then=e};l._initted&&1===l.totalProgress()&&l._ts>=0||!l._tTime&&l._ts<0?_resolve():l._prom=_resolve})},e.kill=function(){_interrupt(this)},Animation}();_setDefaults(ct.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-1e-8,_prom:0,_ps:!1,_rts:1});var ht=function(e){function Timeline(l,_){var S;return void 0===l&&(l={}),(S=e.call(this,l)||this).labels={},S.smoothChildTiming=!!l.smoothChildTiming,S.autoRemoveChildren=!!l.autoRemoveChildren,S._sort=_isNotFalse(l.sortChildren),oe&&_addToTimeline(l.parent||oe,_assertThisInitialized(S),_),l.reversed&&S.reverse(),l.paused&&S.paused(!0),l.scrollTrigger&&_scrollTrigger(_assertThisInitialized(S),l.scrollTrigger),S}_inheritsLoose(Timeline,e);var l=Timeline.prototype;return l.to=function(e,l,_){return _createTweenType(0,arguments,this),this},l.from=function(e,l,_){return _createTweenType(1,arguments,this),this},l.fromTo=function(e,l,_,S){return _createTweenType(2,arguments,this),this},l.set=function(e,l,_){return l.duration=0,l.parent=this,_inheritDefaults(l).repeatDelay||(l.repeat=0),l.immediateRender=!!l.immediateRender,new mt(e,l,Qe(this,_),1),this},l.call=function(e,l,_){return _addToTimeline(this,mt.delayedCall(0,e,l),_)},l.staggerTo=function(e,l,_,S,k,E,T){return _.duration=l,_.stagger=_.stagger||S,_.onComplete=E,_.onCompleteParams=T,_.parent=this,new mt(e,_,Qe(this,k)),this},l.staggerFrom=function(e,l,_,S,k,E,T){return _.runBackwards=1,_inheritDefaults(_).immediateRender=_isNotFalse(_.immediateRender),this.staggerTo(e,l,_,S,k,E,T)},l.staggerFromTo=function(e,l,_,S,k,E,T,M){return S.startAt=_,_inheritDefaults(S).immediateRender=_isNotFalse(S.immediateRender),this.staggerTo(e,l,S,k,E,T,M)},l.render=function(e,l,_){var S,k,E,T,M,R,I,D,O,L,U,B,z=this._time,G=this._dirty?this.totalDuration():this._tDur,j=this._dur,H=e<=0?0:_roundPrecise(e),V=this._zTime<0!=e<0&&(this._initted||!j);if(this!==oe&&H>G&&e>=0&&(H=G),H!==this._tTime||_||V){if(z!==this._time&&j&&(H+=this._time-z,e+=this._time-z),S=H,O=this._start,R=!(D=this._ts),V&&(j||(z=this._zTime),(e||!l)&&(this._zTime=e)),this._repeat){if(U=this._yoyo,M=j+this._rDelay,this._repeat<-1&&e<0)return this.totalTime(100*M+e,l,_);if(S=_roundPrecise(H%M),H===G?(T=this._repeat,S=j):((T=~~(L=_roundPrecise(H/M)))&&T===L&&(S=j,T--),S>j&&(S=j)),L=_animationCycle(this._tTime,M),!z&&this._tTime&&L!==T&&this._tTime-L*M-this._dur<=0&&(L=T),U&&1&T&&(S=j-S,B=1),T!==L&&!this._lock){var W=U&&1&L,q=W===(U&&1&T);if(T<L&&(W=!W),z=W?0:H%j?j:H,this._lock=1,this.render(z||(B?0:_roundPrecise(T*M)),l,!j)._lock=0,this._tTime=H,!l&&this.parent&&_callback(this,"onRepeat"),this.vars.repeatRefresh&&!B&&(this.invalidate()._lock=1),z&&z!==this._time||R!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(j=this._dur,G=this._tDur,q&&(this._lock=2,z=W?j:-1e-4,this.render(z,!0),this.vars.repeatRefresh&&!B&&this.invalidate()),this._lock=0,!this._ts&&!R)return this;st(this,B)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(I=function(e,l,_){var S;if(_>l)for(S=e._first;S&&S._start<=_;){if("isPause"===S.data&&S._start>l)return S;S=S._next}else for(S=e._last;S&&S._start>=_;){if("isPause"===S.data&&S._start<l)return S;S=S._prev}}(this,_roundPrecise(z),_roundPrecise(S)),I&&(H-=S-(S=I._start))),this._tTime=H,this._time=S,this._act=!D,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=e,z=0),!z&&H&&!l&&!L&&(_callback(this,"onStart"),this._tTime!==H))return this;if(S>=z&&e>=0)for(k=this._first;k;){if(E=k._next,(k._act||S>=k._start)&&k._ts&&I!==k){if(k.parent!==this)return this.render(e,l,_);if(k.render(k._ts>0?(S-k._start)*k._ts:(k._dirty?k.totalDuration():k._tDur)+(S-k._start)*k._ts,l,_),S!==this._time||!this._ts&&!R){I=0,E&&(H+=this._zTime=-1e-8);break}}k=E}else{k=this._last;for(var X=e<0?e:S;k;){if(E=k._prev,(k._act||X<=k._end)&&k._ts&&I!==k){if(k.parent!==this)return this.render(e,l,_);if(k.render(k._ts>0?(X-k._start)*k._ts:(k._dirty?k.totalDuration():k._tDur)+(X-k._start)*k._ts,l,_||ie&&_isRevertWorthy(k)),S!==this._time||!this._ts&&!R){I=0,E&&(H+=this._zTime=X?-1e-8:me);break}}k=E}}if(I&&!l&&(this.pause(),I.render(S>=z?0:-1e-8)._zTime=S>=z?1:-1,this._ts))return this._start=O,_setEnd(this),this.render(e,l,_);this._onUpdate&&!l&&_callback(this,"onUpdate",!0),(H===G&&this._tTime>=this.totalDuration()||!H&&z)&&(O!==this._start&&Math.abs(D)===Math.abs(this._ts)||this._lock||((e||!j)&&(H===G&&this._ts>0||!H&&this._ts<0)&&_removeFromParent(this,1),l||e<0&&!z||!H&&!z&&G||(_callback(this,H===G&&e>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(H<G&&this.timeScale()>0)&&this._prom())))}return this},l.add=function(e,l){var _=this;if(_isNumber(l)||(l=Qe(this,l,e)),!(e instanceof ct)){if(Ae(e))return e.forEach(function(e){return _.add(e,l)}),this;if(_isString(e))return this.addLabel(e,l);if(!_isFunction(e))return this;e=mt.delayedCall(0,e)}return this!==e?_addToTimeline(this,e,l):this},l.getChildren=function(e,l,_,S){void 0===e&&(e=!0),void 0===l&&(l=!0),void 0===_&&(_=!0),void 0===S&&(S=-1e8);for(var k=[],E=this._first;E;)E._start>=S&&(E instanceof mt?l&&k.push(E):(_&&k.push(E),e&&k.push.apply(k,E.getChildren(!0,l,_)))),E=E._next;return k},l.getById=function(e){for(var l=this.getChildren(1,1,1),_=l.length;_--;)if(l[_].vars.id===e)return l[_]},l.remove=function(e){return _isString(e)?this.removeLabel(e):_isFunction(e)?this.killTweensOf(e):(e.parent===this&&_removeLinkedListItem(this,e),e===this._recent&&(this._recent=this._last),_uncache(this))},l.totalTime=function(l,_){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=_roundPrecise(nt.time-(this._ts>0?l/this._ts:(this.totalDuration()-l)/-this._ts))),e.prototype.totalTime.call(this,l,_),this._forcing=0,this):this._tTime},l.addLabel=function(e,l){return this.labels[e]=Qe(this,l),this},l.removeLabel=function(e){return delete this.labels[e],this},l.addPause=function(e,l,_){var S=mt.delayedCall(0,l||_emptyFunc,_);return S.data="isPause",this._hasPause=1,_addToTimeline(this,S,Qe(this,e))},l.removePause=function(e){var l=this._first;for(e=Qe(this,e);l;)l._start===e&&"isPause"===l.data&&_removeFromParent(l),l=l._next},l.killTweensOf=function(e,l,_){for(var S=this.getTweensOf(e,_),k=S.length;k--;)dt!==S[k]&&S[k].kill(e,l);return this},l.getTweensOf=function(e,l){for(var _,S=[],k=toArray$2(e),E=this._first,T=_isNumber(l);E;)E instanceof mt?_arrayContainsAny(E._targets,k)&&(T?(!dt||E._initted&&E._ts)&&E.globalTime(0)<=l&&E.globalTime(E.totalDuration())>l:!l||E.isActive())&&S.push(E):(_=E.getTweensOf(k,l)).length&&S.push.apply(S,_),E=E._next;return S},l.tweenTo=function(e,l){l=l||{};var _,S=this,k=Qe(S,e),E=l,T=E.startAt,M=E.onStart,R=E.onStartParams,I=E.immediateRender,D=mt.to(S,_setDefaults({ease:l.ease||"none",lazy:!1,immediateRender:!1,time:k,overwrite:"auto",duration:l.duration||Math.abs((k-(T&&"time"in T?T.time:S._time))/S.timeScale())||me,onStart:function(){if(S.pause(),!_){var e=l.duration||Math.abs((k-(T&&"time"in T?T.time:S._time))/S.timeScale());D._dur!==e&&_setDuration(D,e,0,1).render(D._time,!0,!0),_=1}M&&M.apply(D,R||[])}},l));return I?D.render(0):D},l.tweenFromTo=function(e,l,_){return this.tweenTo(l,_setDefaults({startAt:{time:Qe(this,e)}},_))},l.recent=function(){return this._recent},l.nextLabel=function(e){return void 0===e&&(e=this._time),_getLabelInDirection(this,Qe(this,e))},l.previousLabel=function(e){return void 0===e&&(e=this._time),_getLabelInDirection(this,Qe(this,e),1)},l.currentLabel=function(e){return arguments.length?this.seek(e,!0):this.previousLabel(this._time+me)},l.shiftChildren=function(e,l,_){void 0===_&&(_=0);for(var S,k=this._first,E=this.labels;k;)k._start>=_&&(k._start+=e,k._end+=e),k=k._next;if(l)for(S in E)E[S]>=_&&(E[S]+=e);return _uncache(this)},l.invalidate=function(l){var _=this._first;for(this._lock=0;_;)_.invalidate(l),_=_._next;return e.prototype.invalidate.call(this,l)},l.clear=function(e){void 0===e&&(e=!0);for(var l,_=this._first;_;)l=_._next,this.remove(_),_=l;return this._dp&&(this._time=this._tTime=this._pTime=0),e&&(this.labels={}),_uncache(this)},l.totalDuration=function(e){var l,_,S,k=0,E=this,T=E._last,M=ge;if(arguments.length)return E.timeScale((E._repeat<0?E.duration():E.totalDuration())/(E.reversed()?-e:e));if(E._dirty){for(S=E.parent;T;)l=T._prev,T._dirty&&T.totalDuration(),(_=T._start)>M&&E._sort&&T._ts&&!E._lock?(E._lock=1,_addToTimeline(E,T,_-T._delay,1)._lock=0):M=_,_<0&&T._ts&&(k-=_,(!S&&!E._dp||S&&S.smoothChildTiming)&&(E._start+=_/E._ts,E._time-=_,E._tTime-=_),E.shiftChildren(-_,!1,-1/0),M=0),T._end>k&&T._ts&&(k=T._end),T=l;_setDuration(E,E===oe&&E._time>k?E._time:k,1,1),E._dirty=0}return E._tDur},Timeline.updateRoot=function(e){if(oe._ts&&(_lazySafeRender(oe,_parentToChildTotalTime(e,oe)),he=nt.frame),nt.frame>=He){He+=pe.autoSleep||120;var l=oe._first;if((!l||!l._ts)&&pe.autoSleep&&nt._listeners.length<2){for(;l&&!l._ts;)l=l._next;l||nt.sleep()}}},Timeline}(ct);_setDefaults(ht.prototype,{_lock:0,_hasPause:0,_forcing:0});var dt,ft,_addComplexStringPropTween=function(e,l,_,S,k,E,T){var M,R,I,D,O,L,U,B,z=new yt(this._pt,e,l,0,1,_renderComplexString,null,k),G=0,j=0;for(z.b=_,z.e=S,_+="",(U=~(S+="").indexOf("random("))&&(S=_replaceRandom(S)),E&&(E(B=[_,S],e,l),_=B[0],S=B[1]),R=_.match(Me)||[];M=Me.exec(S);)D=M[0],O=S.substring(G,M.index),I?I=(I+1)%5:"rgba("===O.substr(-5)&&(I=1),D!==R[j++]&&(L=parseFloat(R[j-1])||0,z._pt={_next:z._pt,p:O||1===j?O:",",s:L,c:"="===D.charAt(1)?_parseRelative(L,D)-L:parseFloat(D)-L,m:I&&I<4?Math.round:0},G=Me.lastIndex);return z.c=G<S.length?S.substring(G,S.length):"",z.fp=T,(Re.test(S)||U)&&(z.e=0),this._pt=z,z},_addPropTween=function(e,l,_,S,k,E,T,M,R,I){_isFunction(S)&&(S=S(k||0,e,E));var D,O=e[l],L="get"!==_?_:_isFunction(O)?R?e[l.indexOf("set")||!_isFunction(e["get"+l.substr(3)])?l:"get"+l.substr(3)](R):e[l]():O,U=_isFunction(O)?R?_setterFuncWithParam:_setterFunc:_setterPlain;if(_isString(S)&&(~S.indexOf("random(")&&(S=_replaceRandom(S)),"="===S.charAt(1)&&((D=_parseRelative(L,S)+(getUnit(L)||0))||0===D)&&(S=D)),!I||L!==S||ft)return isNaN(L*S)||""===S?_addComplexStringPropTween.call(this,e,l,L,S,U,M||pe.stringFilter,R):(D=new yt(this._pt,e,l,+L||0,S-(L||0),"boolean"==typeof O?_renderBoolean:_renderPlain,0,U),R&&(D.fp=R),T&&D.modifier(T,this,e),this._pt=D)},_checkPlugin=function(e,l,_,S,k,E){var T,M,R,I;if(Ge[e]&&!1!==(T=new Ge[e]).init(k,T.rawVars?l[e]:function(e,l,_,S,k){if(_isFunction(e)&&(e=_parseFuncOrString(e,k,l,_,S)),!_isObject(e)||e.style&&e.nodeType||Ae(e)||ke(e))return _isString(e)?_parseFuncOrString(e,k,l,_,S):e;var E,T={};for(E in e)T[E]=_parseFuncOrString(e[E],k,l,_,S);return T}(l[e],S,k,E,_),_,S,E)&&(_._pt=M=new yt(_._pt,k,e,0,1,T.render,T,0,T.priority),_!==de))for(R=_._ptLookup[_._targets.indexOf(k)],I=T._props.length;I--;)R[T._props[I]]=M;return T},pt=function _initTween(e,l,_){var S,k,E,T,M,R,I,D,O,L,U,B,z,G=e.vars,j=G.ease,H=G.startAt,V=G.immediateRender,W=G.lazy,q=G.onUpdate,X=G.runBackwards,K=G.yoyoEase,Y=G.keyframes,Q=G.autoRevert,J=e._dur,Z=e._startAt,$=e._targets,ee=e.parent,te=ee&&"nested"===ee.data?ee.vars.targets:$,re="auto"===e._overwrite&&!ne,ae=e.timeline;if(ae&&(!Y||!j)&&(j="none"),e._ease=_parseEase(j,ve.ease),e._yEase=K?_invertEase(_parseEase(!0===K?j:K,ve.ease)):0,K&&e._yoyo&&!e._repeat&&(K=e._yEase,e._yEase=e._ease,e._ease=K),e._from=!ae&&!!G.runBackwards,!ae||Y&&!G.stagger){if(B=(D=$[0]?_getCache($[0]).harness:0)&&G[D.prop],S=_copyExcluding(G,Ne),Z&&(Z._zTime<0&&Z.progress(1),l<0&&X&&V&&!Q?Z.render(-1,!0):Z.revert(X&&J?Ue:Le),Z._lazy=0),H){if(_removeFromParent(e._startAt=mt.set($,_setDefaults({data:"isStart",overwrite:!1,parent:ee,immediateRender:!0,lazy:!Z&&_isNotFalse(W),startAt:null,delay:0,onUpdate:q&&function(){return _callback(e,"onUpdate")},stagger:0},H))),e._startAt._dp=0,e._startAt._sat=e,l<0&&(ie||!V&&!Q)&&e._startAt.revert(Ue),V&&J&&l<=0&&_<=0)return void(l&&(e._zTime=l))}else if(X&&J&&!Z)if(l&&(V=!1),E=_setDefaults({overwrite:!1,data:"isFromStart",lazy:V&&!Z&&_isNotFalse(W),immediateRender:V,stagger:0,parent:ee},S),B&&(E[D.prop]=B),_removeFromParent(e._startAt=mt.set($,E)),e._startAt._dp=0,e._startAt._sat=e,l<0&&(ie?e._startAt.revert(Ue):e._startAt.render(-1,!0)),e._zTime=l,V){if(!l)return}else _initTween(e._startAt,me,me);for(e._pt=e._ptCache=0,W=J&&_isNotFalse(W)||W&&!J,k=0;k<$.length;k++){if(I=(M=$[k])._gsap||_harness($)[k]._gsap,e._ptLookup[k]=L={},ze[I.id]&&Be.length&&_lazyRender(),U=te===$?k:te.indexOf(M),D&&!1!==(O=new D).init(M,B||S,e,U,te)&&(e._pt=T=new yt(e._pt,M,O.name,0,1,O.render,O,0,O.priority),O._props.forEach(function(e){L[e]=T}),O.priority&&(R=1)),!D||B)for(E in S)Ge[E]&&(O=_checkPlugin(E,S,e,U,M,te))?O.priority&&(R=1):L[E]=T=_addPropTween.call(e,M,E,"get",S[E],U,te,0,G.stringFilter);e._op&&e._op[k]&&e.kill(M,e._op[k]),re&&e._pt&&(dt=e,oe.killTweensOf(M,L,e.globalTime(l)),z=!e.parent,dt=0),e._pt&&W&&(ze[I.id]=1)}R&&_sortPropTweensByPriority(e),e._onInit&&e._onInit(e)}e._onUpdate=q,e._initted=(!e._op||e._pt)&&!z,Y&&l<=0&&ae.render(ge,!0,!0)},_parseKeyframe=function(e,l,_,S){var k,E,T=l.ease||S||"power1.inOut";if(Ae(l))E=_[e]||(_[e]=[]),l.forEach(function(e,_){return E.push({t:_/(l.length-1)*100,v:e,e:T})});else for(k in l)E=_[k]||(_[k]=[]),"ease"===k||E.push({t:parseFloat(e),v:l[k],e:T})},_parseFuncOrString=function(e,l,_,S,k){return _isFunction(e)?e.call(l,_,S,k):_isString(e)&&~e.indexOf("random(")?_replaceRandom(e):e},vt=We+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",gt={};_forEachName(vt+",id,stagger,delay,duration,paused,scrollTrigger",function(e){return gt[e]=1});var mt=function(e){function Tween(l,_,S,k){var E;"number"==typeof _&&(S.duration=_,_=S,S=null);var T,M,R,I,D,O,L,U,B=(E=e.call(this,k?_:_inheritDefaults(_))||this).vars,z=B.duration,G=B.delay,j=B.immediateRender,H=B.stagger,V=B.overwrite,W=B.keyframes,q=B.defaults,X=B.scrollTrigger,K=B.yoyoEase,Y=_.parent||oe,Q=(Ae(l)||ke(l)?_isNumber(l[0]):"length"in _)?[l]:toArray$2(l);if(E._targets=Q.length?_harness(Q):_warn(0,!pe.nullTargetWarn)||[],E._ptLookup=[],E._overwrite=V,W||H||_isFuncOrString(z)||_isFuncOrString(G)){if(_=E.vars,(T=E.timeline=new ht({data:"nested",defaults:q||{},targets:Y&&"nested"===Y.data?Y.vars.targets:Q})).kill(),T.parent=T._dp=_assertThisInitialized(E),T._start=0,H||_isFuncOrString(z)||_isFuncOrString(G)){if(I=Q.length,L=H&&distribute(H),_isObject(H))for(D in H)~vt.indexOf(D)&&(U||(U={}),U[D]=H[D]);for(M=0;M<I;M++)(R=_copyExcluding(_,gt)).stagger=0,K&&(R.yoyoEase=K),U&&_merge(R,U),O=Q[M],R.duration=+_parseFuncOrString(z,_assertThisInitialized(E),M,O,Q),R.delay=(+_parseFuncOrString(G,_assertThisInitialized(E),M,O,Q)||0)-E._delay,!H&&1===I&&R.delay&&(E._delay=G=R.delay,E._start+=G,R.delay=0),T.to(O,R,L?L(M,O,Q):0),T._ease=it.none;T.duration()?z=G=0:E.timeline=0}else if(W){_inheritDefaults(_setDefaults(T.vars.defaults,{ease:"none"})),T._ease=_parseEase(W.ease||_.ease||"none");var J,Z,$,ee=0;if(Ae(W))W.forEach(function(e){return T.to(Q,e,">")}),T.duration();else{for(D in R={},W)"ease"===D||"easeEach"===D||_parseKeyframe(D,W[D],R,W.easeEach);for(D in R)for(J=R[D].sort(function(e,l){return e.t-l.t}),ee=0,M=0;M<J.length;M++)($={ease:(Z=J[M]).e,duration:(Z.t-(M?J[M-1].t:0))/100*z})[D]=Z.v,T.to(Q,$,ee),ee+=$.duration;T.duration()<z&&T.to({},{duration:z-T.duration()})}}z||E.duration(z=T.duration())}else E.timeline=0;return!0!==V||ne||(dt=_assertThisInitialized(E),oe.killTweensOf(Q),dt=0),_addToTimeline(Y,_assertThisInitialized(E),S),_.reversed&&E.reverse(),_.paused&&E.paused(!0),(j||!z&&!W&&E._start===_roundPrecise(Y._time)&&_isNotFalse(j)&&Xe(_assertThisInitialized(E))&&"nested"!==Y.data)&&(E._tTime=-1e-8,E.render(Math.max(0,-G)||0)),X&&_scrollTrigger(_assertThisInitialized(E),X),E}_inheritsLoose(Tween,e);var l=Tween.prototype;return l.render=function(e,l,_){var S,k,E,T,M,R,I,D,O,L=this._time,U=this._tDur,B=this._dur,z=e<0,G=e>U-me&&!z?U:e<me?0:e;if(B){if(G!==this._tTime||!e||_||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==z||this._lazy){if(S=G,D=this.timeline,this._repeat){if(T=B+this._rDelay,this._repeat<-1&&z)return this.totalTime(100*T+e,l,_);if(S=_roundPrecise(G%T),G===U?(E=this._repeat,S=B):(E=~~(M=_roundPrecise(G/T)))&&E===M?(S=B,E--):S>B&&(S=B),(R=this._yoyo&&1&E)&&(O=this._yEase,S=B-S),M=_animationCycle(this._tTime,T),S===L&&!_&&this._initted&&E===M)return this._tTime=G,this;E!==M&&(D&&this._yEase&&st(D,R),this.vars.repeatRefresh&&!R&&!this._lock&&S!==T&&this._initted&&(this._lock=_=1,this.render(_roundPrecise(T*E),!0).invalidate()._lock=0))}if(!this._initted){if(_attemptInitTween(this,z?e:S,_,l,G))return this._tTime=0,this;if(!(L===this._time||_&&this.vars.repeatRefresh&&E!==M))return this;if(B!==this._dur)return this.render(e,l,_)}if(this._tTime=G,this._time=S,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=I=(O||this._ease)(S/B),this._from&&(this.ratio=I=1-I),!L&&G&&!l&&!M&&(_callback(this,"onStart"),this._tTime!==G))return this;for(k=this._pt;k;)k.r(I,k.d),k=k._next;D&&D.render(e<0?e:D._dur*D._ease(S/this._dur),l,_)||this._startAt&&(this._zTime=e),this._onUpdate&&!l&&(z&&_rewindStartAt(this,e,0,_),_callback(this,"onUpdate")),this._repeat&&E!==M&&this.vars.onRepeat&&!l&&this.parent&&_callback(this,"onRepeat"),G!==this._tDur&&G||this._tTime!==G||(z&&!this._onUpdate&&_rewindStartAt(this,e,0,!0),(e||!B)&&(G===this._tDur&&this._ts>0||!G&&this._ts<0)&&_removeFromParent(this,1),l||z&&!L||!(G||L||R)||(_callback(this,G===U?"onComplete":"onReverseComplete",!0),this._prom&&!(G<U&&this.timeScale()>0)&&this._prom()))}}else!function(e,l,_,S){var k,E,T,M=e.ratio,R=l<0||!l&&(!e._start&&Ke(e)&&(e._initted||!_isFromOrFromStart(e))||(e._ts<0||e._dp._ts<0)&&!_isFromOrFromStart(e))?0:1,I=e._rDelay,D=0;if(I&&e._repeat&&(D=_clamp(0,e._tDur,l),E=_animationCycle(D,I),e._yoyo&&1&E&&(R=1-R),E!==_animationCycle(e._tTime,I)&&(M=1-R,e.vars.repeatRefresh&&e._initted&&e.invalidate())),R!==M||ie||S||e._zTime===me||!l&&e._zTime){if(!e._initted&&_attemptInitTween(e,l,S,_,D))return;for(T=e._zTime,e._zTime=l||(_?me:0),_||(_=l&&!T),e.ratio=R,e._from&&(R=1-R),e._time=0,e._tTime=D,k=e._pt;k;)k.r(R,k.d),k=k._next;l<0&&_rewindStartAt(e,l,0,!0),e._onUpdate&&!_&&_callback(e,"onUpdate"),D&&e._repeat&&!_&&e.parent&&_callback(e,"onRepeat"),(l>=e._tDur||l<0)&&e.ratio===R&&(R&&_removeFromParent(e,1),_||ie||(_callback(e,R?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=l)}(this,e,l,_);return this},l.targets=function(){return this._targets},l.invalidate=function(l){return(!l||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(l),e.prototype.invalidate.call(this,l)},l.resetTo=function(e,l,_,S,k){fe||nt.wake(),this._ts||this.play();var E=Math.min(this._dur,(this._dp._time-this._start)*this._ts);return this._initted||pt(this,E),function(e,l,_,S,k,E,T,M){var R,I,D,O,L=(e._pt&&e._ptCache||(e._ptCache={}))[l];if(!L)for(L=e._ptCache[l]=[],D=e._ptLookup,O=e._targets.length;O--;){if((R=D[O][l])&&R.d&&R.d._pt)for(R=R.d._pt;R&&R.p!==l&&R.fp!==l;)R=R._next;if(!R)return ft=1,e.vars[l]="+=0",pt(e,T),ft=0,M?_warn():1;L.push(R)}for(O=L.length;O--;)(R=(I=L[O])._pt||I).s=!S&&0!==S||k?R.s+(S||0)+E*R.c:S,R.c=_-R.s,I.e&&(I.e=_round(_)+getUnit(I.e)),I.b&&(I.b=R.s+getUnit(I.b))}(this,e,l,_,S,this._ease(E/this._dur),E,k)?this.resetTo(e,l,_,S,1):(_alignPlayhead(this,0),this.parent||_addLinkedListItem(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},l.kill=function(e,l){if(void 0===l&&(l="all"),!(e||l&&"all"!==l))return this._lazy=this._pt=0,this.parent?_interrupt(this):this.scrollTrigger&&this.scrollTrigger.kill(!!ie),this;if(this.timeline){var _=this.timeline.totalDuration();return this.timeline.killTweensOf(e,l,dt&&!0!==dt.vars.overwrite)._first||_interrupt(this),this.parent&&_!==this.timeline.totalDuration()&&_setDuration(this,this._dur*this.timeline._tDur/_,0,1),this}var S,k,E,T,M,R,I,D=this._targets,O=e?toArray$2(e):D,L=this._ptLookup,U=this._pt;if((!l||"all"===l)&&function(e,l){for(var _=e.length,S=_===l.length;S&&_--&&e[_]===l[_];);return _<0}(D,O))return"all"===l&&(this._pt=0),_interrupt(this);for(S=this._op=this._op||[],"all"!==l&&(_isString(l)&&(M={},_forEachName(l,function(e){return M[e]=1}),l=M),l=function(e,l){var _,S,k,E,T=e[0]?_getCache(e[0]).harness:0,M=T&&T.aliases;if(!M)return l;for(S in _=_merge({},l),M)if(S in _)for(k=(E=M[S].split(",")).length;k--;)_[E[k]]=_[S];return _}(D,l)),I=D.length;I--;)if(~O.indexOf(D[I]))for(M in k=L[I],"all"===l?(S[I]=l,T=k,E={}):(E=S[I]=S[I]||{},T=l),T)(R=k&&k[M])&&("kill"in R.d&&!0!==R.d.kill(M)||_removeLinkedListItem(this,R,"_pt"),delete k[M]),"all"!==E&&(E[M]=1);return this._initted&&!this._pt&&U&&_interrupt(this),this},Tween.to=function(e,l){return new Tween(e,l,arguments[2])},Tween.from=function(e,l){return _createTweenType(1,arguments)},Tween.delayedCall=function(e,l,_,S){return new Tween(l,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:e,onComplete:l,onReverseComplete:l,onCompleteParams:_,onReverseCompleteParams:_,callbackScope:S})},Tween.fromTo=function(e,l,_){return _createTweenType(2,arguments)},Tween.set=function(e,l){return l.duration=0,l.repeatDelay||(l.repeat=0),new Tween(e,l)},Tween.killTweensOf=function(e,l,_){return oe.killTweensOf(e,l,_)},Tween}(ct);_setDefaults(mt.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),_forEachName("staggerTo,staggerFrom,staggerFromTo",function(e){mt[e]=function(){var l=new ht,_=Je.call(arguments,0);return _.splice("staggerFromTo"===e?5:4,0,0),l[e].apply(l,_)}});var _setterPlain=function(e,l,_){return e[l]=_},_setterFunc=function(e,l,_){return e[l](_)},_setterFuncWithParam=function(e,l,_,S){return e[l](S.fp,_)},_setterAttribute=function(e,l,_){return e.setAttribute(l,_)},_getSetter=function(e,l){return _isFunction(e[l])?_setterFunc:_isUndefined(e[l])&&e.setAttribute?_setterAttribute:_setterPlain},_renderPlain=function(e,l){return l.set(l.t,l.p,Math.round(1e6*(l.s+l.c*e))/1e6,l)},_renderBoolean=function(e,l){return l.set(l.t,l.p,!!(l.s+l.c*e),l)},_renderComplexString=function(e,l){var _=l._pt,S="";if(!e&&l.b)S=l.b;else if(1===e&&l.e)S=l.e;else{for(;_;)S=_.p+(_.m?_.m(_.s+_.c*e):Math.round(1e4*(_.s+_.c*e))/1e4)+S,_=_._next;S+=l.c}l.set(l.t,l.p,S,l)},_renderPropTweens=function(e,l){for(var _=l._pt;_;)_.r(e,_.d),_=_._next},_addPluginModifier=function(e,l,_,S){for(var k,E=this._pt;E;)k=E._next,E.p===S&&E.modifier(e,l,_),E=k},_killPropTweensOf=function(e){for(var l,_,S=this._pt;S;)_=S._next,S.p===e&&!S.op||S.op===e?_removeLinkedListItem(this,S,"_pt"):S.dep||(l=1),S=_;return!l},_setterWithModifier=function(e,l,_,S){S.mSet(e,l,S.m.call(S.tween,_,S.mt),S)},_sortPropTweensByPriority=function(e){for(var l,_,S,k,E=e._pt;E;){for(l=E._next,_=S;_&&_.pr>E.pr;)_=_._next;(E._prev=_?_._prev:k)?E._prev._next=E:S=E,(E._next=_)?_._prev=E:k=E,E=l}e._pt=S},yt=function(){function PropTween(e,l,_,S,k,E,T,M,R){this.t=l,this.s=S,this.c=k,this.p=_,this.r=E||_renderPlain,this.d=T||this,this.set=M||_setterPlain,this.pr=R||0,this._next=e,e&&(e._prev=this)}return PropTween.prototype.modifier=function(e,l,_){this.mSet=this.mSet||this.set,this.set=_setterWithModifier,this.m=e,this.mt=_,this.tween=l},PropTween}();_forEachName(We+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(e){return Ne[e]=1}),De.TweenMax=De.TweenLite=mt,De.TimelineLite=De.TimelineMax=ht,oe=new ht({sortChildren:!1,defaults:ve,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),pe.stringFilter=_colorStringFilter;var _t=[],bt={},St=[],wt=0,xt=0,_dispatch=function(e){return(bt[e]||St).map(function(e){return e()})},_onMediaChange=function(){var e=Date.now(),l=[];e-wt>2&&(_dispatch("matchMediaInit"),_t.forEach(function(e){var _,S,k,E,T=e.queries,M=e.conditions;for(S in T)(_=se.matchMedia(T[S]).matches)&&(k=1),_!==M[S]&&(M[S]=_,E=1);E&&(e.revert(),k&&l.push(e))}),_dispatch("matchMediaRevert"),l.forEach(function(e){return e.onMatch(e,function(l){return e.add(null,l)})}),wt=e,_dispatch("matchMedia"))},kt=function(){function Context(e,l){this.selector=l&&selector(l),this.data=[],this._r=[],this.isReverted=!1,this.id=xt++,e&&this.add(e)}var e=Context.prototype;return e.add=function(e,l,_){_isFunction(e)&&(_=l,l=e,e=_isFunction);var S=this,f=function(){var e,k=ae,E=S.selector;return k&&k!==S&&k.data.push(S),_&&(S.selector=selector(_)),ae=S,e=l.apply(S,arguments),_isFunction(e)&&S._r.push(e),ae=k,S.selector=E,S.isReverted=!1,e};return S.last=f,e===_isFunction?f(S,function(e){return S.add(null,e)}):e?S[e]=f:f},e.ignore=function(e){var l=ae;ae=null,e(this),ae=l},e.getTweens=function(){var e=[];return this.data.forEach(function(l){return l instanceof Context?e.push.apply(e,l.getTweens()):l instanceof mt&&!(l.parent&&"nested"===l.parent.data)&&e.push(l)}),e},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(e,l){var _=this;if(e?function(){for(var l,S=_.getTweens(),k=_.data.length;k--;)"isFlip"===(l=_.data[k]).data&&(l.revert(),l.getChildren(!0,!0,!1).forEach(function(e){return S.splice(S.indexOf(e),1)}));for(S.map(function(e){return{g:e._dur||e._delay||e._sat&&!e._sat.vars.immediateRender?e.globalTime(0):-1/0,t:e}}).sort(function(e,l){return l.g-e.g||-1/0}).forEach(function(l){return l.t.revert(e)}),k=_.data.length;k--;)(l=_.data[k])instanceof ht?"nested"!==l.data&&(l.scrollTrigger&&l.scrollTrigger.revert(),l.kill()):!(l instanceof mt)&&l.revert&&l.revert(e);_._r.forEach(function(l){return l(e,_)}),_.isReverted=!0}():this.data.forEach(function(e){return e.kill&&e.kill()}),this.clear(),l)for(var S=_t.length;S--;)_t[S].id===this.id&&_t.splice(S,1)},e.revert=function(e){this.kill(e||{})},Context}(),At=function(){function MatchMedia(e){this.contexts=[],this.scope=e,ae&&ae.data.push(this)}var e=MatchMedia.prototype;return e.add=function(e,l,_){_isObject(e)||(e={matches:e});var S,k,E,T=new kt(0,_||this.scope),M=T.conditions={};for(k in ae&&!T.selector&&(T.selector=ae.selector),this.contexts.push(T),l=T.add("onMatch",l),T.queries=e,e)"all"===k?E=1:(S=se.matchMedia(e[k]))&&(_t.indexOf(T)<0&&_t.push(T),(M[k]=S.matches)&&(E=1),S.addListener?S.addListener(_onMediaChange):S.addEventListener("change",_onMediaChange));return E&&l(T,function(e){return T.add(null,e)}),this},e.revert=function(e){this.kill(e||{})},e.kill=function(e){this.contexts.forEach(function(l){return l.kill(e,!0)})},MatchMedia}(),Et={registerPlugin:function(){for(var e=arguments.length,l=new Array(e),_=0;_<e;_++)l[_]=arguments[_];l.forEach(function(e){return _createPlugin(e)})},timeline:function(e){return new ht(e)},getTweensOf:function(e,l){return oe.getTweensOf(e,l)},getProperty:function(e,l,_,S){_isString(e)&&(e=toArray$2(e)[0]);var k=_getCache(e||{}).get,E=_?_passThrough:_numericIfPossible;return"native"===_&&(_=""),e?l?E((Ge[l]&&Ge[l].get||k)(e,l,_,S)):function(l,_,S){return E((Ge[l]&&Ge[l].get||k)(e,l,_,S))}:e},quickSetter:function(e,l,_){if((e=toArray$2(e)).length>1){var S=e.map(function(e){return Ct.quickSetter(e,l,_)}),k=S.length;return function(e){for(var l=k;l--;)S[l](e)}}e=e[0]||{};var E=Ge[l],T=_getCache(e),M=T.harness&&(T.harness.aliases||{})[l]||l,R=E?function(l){var S=new E;de._pt=0,S.init(e,_?l+_:l,de,0,[e]),S.render(1,S),de._pt&&_renderPropTweens(1,de)}:T.set(e,M);return E?R:function(l){return R(e,M,_?l+_:l,T,1)}},quickTo:function(e,l,_){var S,k=Ct.to(e,_setDefaults(((S={})[l]="+=0.1",S.paused=!0,S.stagger=0,S),_||{})),func=function(e,_,S){return k.resetTo(l,e,_,S)};return func.tween=k,func},isTweening:function(e){return oe.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=_parseEase(e.ease,ve.ease)),qe(ve,e||{})},config:function(e){return qe(pe,e||{})},registerEffect:function(e){var l=e.name,_=e.effect,S=e.plugins,k=e.defaults,E=e.extendTimeline;(S||"").split(",").forEach(function(e){return e&&!Ge[e]&&!De[e]&&_warn()}),je[l]=function(e,l,S){return _(toArray$2(e),_setDefaults(l||{},k),S)},E&&(ht.prototype[l]=function(e,_,S){return this.add(je[l](e,_isObject(_)?_:(S=_)&&{},this),S)})},registerEase:function(e,l){it[e]=_parseEase(l)},parseEase:function(e,l){return arguments.length?_parseEase(e,l):it},getById:function(e){return oe.getById(e)},exportRoot:function(e,l){void 0===e&&(e={});var _,S,k=new ht(e);for(k.smoothChildTiming=_isNotFalse(e.smoothChildTiming),oe.remove(k),k._dp=0,k._time=k._tTime=oe._time,_=oe._first;_;)S=_._next,!l&&!_._dur&&_ instanceof mt&&_.vars.onComplete===_._targets[0]||_addToTimeline(k,_,_._start-_._delay),_=S;return _addToTimeline(oe,k,0),k},context:function(e,l){return e?new kt(e,l):ae},matchMedia:function(e){return new At(e)},matchMediaRefresh:function(){return _t.forEach(function(e){var l,_,S=e.conditions;for(_ in S)S[_]&&(S[_]=!1,l=1);l&&e.revert()})||_onMediaChange()},addEventListener:function(e,l){var _=bt[e]||(bt[e]=[]);~_.indexOf(l)||_.push(l)},removeEventListener:function(e,l){var _=bt[e],S=_&&_.indexOf(l);S>=0&&_.splice(S,1)},utils:{wrap:function wrap(e,l,_){var S=l-e;return Ae(e)?_wrapArray(e,wrap(0,e.length),l):_conditionalReturn(_,function(l){return(S+(l-e)%S)%S+e})},wrapYoyo:function wrapYoyo(e,l,_){var S=l-e,k=2*S;return Ae(e)?_wrapArray(e,wrapYoyo(0,e.length-1),l):_conditionalReturn(_,function(l){return e+((l=(k+(l-e)%k)%k||0)>S?k-l:l)})},distribute:distribute,random:random,snap:snap,normalize:function(e,l,_){return mapRange(e,l,0,1,_)},getUnit:getUnit,clamp:function(e,l,_){return _conditionalReturn(_,function(_){return _clamp(e,l,_)})},splitColor:splitColor$1,toArray:toArray$2,selector:selector,mapRange:mapRange,pipe:function(){for(var e=arguments.length,l=new Array(e),_=0;_<e;_++)l[_]=arguments[_];return function(e){return l.reduce(function(e,l){return l(e)},e)}},unitize:function(e,l){return function(_){return e(parseFloat(_))+(l||getUnit(_))}},interpolate:function interpolate(e,l,_,S){var k=isNaN(e+l)?0:function(_){return(1-_)*e+_*l};if(!k){var E,T,M,R,I,D=_isString(e),O={};if(!0===_&&(S=1)&&(_=null),D)e={p:e},l={p:l};else if(Ae(e)&&!Ae(l)){for(M=[],R=e.length,I=R-2,T=1;T<R;T++)M.push(interpolate(e[T-1],e[T]));R--,k=function(e){e*=R;var l=Math.min(I,~~e);return M[l](e-l)},_=l}else S||(e=_merge(Ae(e)?[]:{},e));if(!M){for(E in l)_addPropTween.call(O,e,E,"get",l[E]);k=function(l){return _renderPropTweens(l,O)||(D?e.p:e)}}}return _conditionalReturn(_,k)},shuffle:shuffle},install:_install,effects:je,ticker:nt,updateRoot:ht.updateRoot,plugins:Ge,globalTimeline:oe,core:{PropTween:yt,globals:_addGlobal,Tween:mt,Timeline:ht,Animation:ct,getCache:_getCache,_removeLinkedListItem:_removeLinkedListItem,reverting:function(){return ie},context:function(e){return e&&ae&&(ae.data.push(e),e._ctx=ae),ae},suppressOverwrites:function(e){return ne=e}}};_forEachName("to,from,fromTo,delayedCall,set,killTweensOf",function(e){return Et[e]=mt[e]}),nt.add(ht.updateRoot),de=Et.to({},{duration:0});var _getPluginPropTween=function(e,l){for(var _=e._pt;_&&_.p!==l&&_.op!==l&&_.fp!==l;)_=_._next;return _},_buildModifierPlugin=function(e,l){return{name:e,headless:1,rawVars:1,init:function(e,_,S){S._onInit=function(e){var S,k;if(_isString(_)&&(S={},_forEachName(_,function(e){return S[e]=1}),_=S),l){for(k in S={},_)S[k]=l(_[k]);_=S}!function(e,l){var _,S,k,E=e._targets;for(_ in l)for(S=E.length;S--;)(k=e._ptLookup[S][_])&&(k=k.d)&&(k._pt&&(k=_getPluginPropTween(k,_)),k&&k.modifier&&k.modifier(l[_],e,E[S],_))}(e,_)}}}},Ct=Et.registerPlugin({name:"attr",init:function(e,l,_,S,k){var E,T,M;for(E in this.tween=_,l)M=e.getAttribute(E)||"",(T=this.add(e,"setAttribute",(M||0)+"",l[E],S,k,0,0,E)).op=E,T.b=M,this._props.push(E)},render:function(e,l){for(var _=l._pt;_;)ie?_.set(_.t,_.p,_.b,_):_.r(e,_.d),_=_._next}},{name:"endArray",headless:1,init:function(e,l){for(var _=l.length;_--;)this.add(e,_,e[_]||0,l[_],0,0,0,0,0,1)}},_buildModifierPlugin("roundProps",_roundModifier),_buildModifierPlugin("modifiers"),_buildModifierPlugin("snap",snap))||Et;mt.version=ht.version=Ct.version="3.13.0",ce=1,_windowExists$1()&&_wake(),it.Power0,it.Power1,it.Power2,it.Power3,it.Power4,it.Linear,it.Quad,it.Cubic,it.Quart,it.Quint,it.Strong,it.Elastic,it.Back,it.SteppedEase,it.Bounce,it.Sine,it.Expo,it.Circ;
/*!
			 * CSSPlugin 3.13.0
			 * https://gsap.com
			 *
			 * Copyright 2008-2025, GreenSock. All rights reserved.
			 * Subject to the terms at https://gsap.com/standard-license
			 * @author: Jack Doyle, jack@greensock.com
			*/
var Tt,Mt,Rt,It,Pt,Dt,Ot,Lt,Ut={},Ft=180/Math.PI,Nt=Math.PI/180,Bt=Math.atan2,zt=/([A-Z])/g,Gt=/(left|right|width|margin|padding|x)/i,jt=/[\s,\(]\S/,Ht={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},_renderCSSProp=function(e,l){return l.set(l.t,l.p,Math.round(1e4*(l.s+l.c*e))/1e4+l.u,l)},_renderPropWithEnd=function(e,l){return l.set(l.t,l.p,1===e?l.e:Math.round(1e4*(l.s+l.c*e))/1e4+l.u,l)},_renderCSSPropWithBeginning=function(e,l){return l.set(l.t,l.p,e?Math.round(1e4*(l.s+l.c*e))/1e4+l.u:l.b,l)},_renderRoundedCSSProp=function(e,l){var _=l.s+l.c*e;l.set(l.t,l.p,~~(_+(_<0?-.5:.5))+l.u,l)},_renderNonTweeningValue=function(e,l){return l.set(l.t,l.p,e?l.e:l.b,l)},_renderNonTweeningValueOnlyAtEnd=function(e,l){return l.set(l.t,l.p,1!==e?l.b:l.e,l)},_setterCSSStyle=function(e,l,_){return e.style[l]=_},_setterCSSProp=function(e,l,_){return e.style.setProperty(l,_)},_setterTransform=function(e,l,_){return e._gsap[l]=_},_setterScale=function(e,l,_){return e._gsap.scaleX=e._gsap.scaleY=_},_setterScaleWithRender=function(e,l,_,S,k){var E=e._gsap;E.scaleX=E.scaleY=_,E.renderTransform(k,E)},_setterTransformWithRender=function(e,l,_,S,k){var E=e._gsap;E[l]=_,E.renderTransform(k,E)},Vt="transform",Wt=Vt+"Origin",qt=function _saveStyle(e,l){var _=this,S=this.target,k=S.style,E=S._gsap;if(e in Ut&&k){if(this.tfm=this.tfm||{},"transform"===e)return Ht.transform.split(",").forEach(function(e){return _saveStyle.call(_,e,l)});if(~(e=Ht[e]||e).indexOf(",")?e.split(",").forEach(function(e){return _.tfm[e]=_get(S,e)}):this.tfm[e]=E.x?E[e]:_get(S,e),e===Wt&&(this.tfm.zOrigin=E.zOrigin),this.props.indexOf(Vt)>=0)return;E.svg&&(this.svgo=S.getAttribute("data-svg-origin"),this.props.push(Wt,l,"")),e=Vt}(k||l)&&this.props.push(e,l,k[e])},_removeIndependentTransforms=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},_revertStyle=function(){var e,l,_=this.props,S=this.target,k=S.style,E=S._gsap;for(e=0;e<_.length;e+=3)_[e+1]?2===_[e+1]?S[_[e]](_[e+2]):S[_[e]]=_[e+2]:_[e+2]?k[_[e]]=_[e+2]:k.removeProperty("--"===_[e].substr(0,2)?_[e]:_[e].replace(zt,"-$1").toLowerCase());if(this.tfm){for(l in this.tfm)E[l]=this.tfm[l];E.svg&&(E.renderTransform(),S.setAttribute("data-svg-origin",this.svgo||"")),(e=Ot())&&e.isStart||k[Vt]||(_removeIndependentTransforms(k),E.zOrigin&&k[Wt]&&(k[Wt]+=" "+E.zOrigin+"px",E.zOrigin=0,E.renderTransform()),E.uncache=1)}},_getStyleSaver=function(e,l){var _={target:e,props:[],revert:_revertStyle,save:qt};return e._gsap||Ct.core.getCache(e),l&&e.style&&e.nodeType&&l.split(",").forEach(function(e){return _.save(e)}),_},_createElement=function(e,l){var _=Mt.createElementNS?Mt.createElementNS((l||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):Mt.createElement(e);return _&&_.style?_:Mt.createElement(e)},Xt=function _getComputedProperty(e,l,_){var S=getComputedStyle(e);return S[l]||S.getPropertyValue(l.replace(zt,"-$1").toLowerCase())||S.getPropertyValue(l)||!_&&_getComputedProperty(e,_checkPropPrefix(l)||l,1)||""},Kt="O,Moz,ms,Ms,Webkit".split(","),_checkPropPrefix=function(e,l,_){var S=(l||Pt).style,k=5;if(e in S&&!_)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);k--&&!(Kt[k]+e in S););return k<0?null:(3===k?"ms":k>=0?Kt[k]:"")+e},_initCore=function(){"undefined"!=typeof window&&window.document&&(Tt=window,Mt=Tt.document,Rt=Mt.documentElement,Pt=_createElement("div")||{style:{}},_createElement("div"),Vt=_checkPropPrefix(Vt),Wt=Vt+"Origin",Pt.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",Lt=!!_checkPropPrefix("perspective"),Ot=Ct.core.reverting,It=1)},_getReparentedCloneBBox=function(e){var l,_=e.ownerSVGElement,S=_createElement("svg",_&&_.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),k=e.cloneNode(!0);k.style.display="block",S.appendChild(k),Rt.appendChild(S);try{l=k.getBBox()}catch(ta){}return S.removeChild(k),Rt.removeChild(S),l},_getAttributeFallbacks=function(e,l){for(var _=l.length;_--;)if(e.hasAttribute(l[_]))return e.getAttribute(l[_])},_getBBox=function(e){var l,_;try{l=e.getBBox()}catch(S){l=_getReparentedCloneBBox(e),_=1}return l&&(l.width||l.height)||_||(l=_getReparentedCloneBBox(e)),!l||l.width||l.x||l.y?l:{x:+_getAttributeFallbacks(e,["x","cx","x1"])||0,y:+_getAttributeFallbacks(e,["y","cy","y1"])||0,width:0,height:0}},_isSVG=function(e){return!(!e.getCTM||e.parentNode&&!e.ownerSVGElement||!_getBBox(e))},_removeProperty=function(e,l){if(l){var _,S=e.style;l in Ut&&l!==Wt&&(l=Vt),S.removeProperty?("ms"!==(_=l.substr(0,2))&&"webkit"!==l.substr(0,6)||(l="-"+l),S.removeProperty("--"===_?l:l.replace(zt,"-$1").toLowerCase())):S.removeAttribute(l)}},_addNonTweeningPT=function(e,l,_,S,k,E){var T=new yt(e._pt,l,_,0,1,E?_renderNonTweeningValueOnlyAtEnd:_renderNonTweeningValue);return e._pt=T,T.b=S,T.e=k,e._props.push(_),T},Yt={deg:1,rad:1,turn:1},Qt={grid:1,flex:1},Jt=function _convertToUnit(e,l,_,S){var k,E,T,M,R=parseFloat(_)||0,I=(_+"").trim().substr((R+"").length)||"px",D=Pt.style,O=Gt.test(l),L="svg"===e.tagName.toLowerCase(),U=(L?"client":"offset")+(O?"Width":"Height"),B=100,z="px"===S,G="%"===S;if(S===I||!R||Yt[S]||Yt[I])return R;if("px"!==I&&!z&&(R=_convertToUnit(e,l,_,"px")),M=e.getCTM&&_isSVG(e),(G||"%"===I)&&(Ut[l]||~l.indexOf("adius")))return k=M?e.getBBox()[O?"width":"height"]:e[U],_round(G?R/k*B:R/100*k);if(D[O?"width":"height"]=B+(z?I:S),E="rem"!==S&&~l.indexOf("adius")||"em"===S&&e.appendChild&&!L?e:e.parentNode,M&&(E=(e.ownerSVGElement||{}).parentNode),E&&E!==Mt&&E.appendChild||(E=Mt.body),(T=E._gsap)&&G&&T.width&&O&&T.time===nt.time&&!T.uncache)return _round(R/T.width*B);if(!G||"height"!==l&&"width"!==l)(G||"%"===I)&&!Qt[Xt(E,"display")]&&(D.position=Xt(e,"position")),E===e&&(D.position="static"),E.appendChild(Pt),k=Pt[U],E.removeChild(Pt),D.position="absolute";else{var j=e.style[l];e.style[l]=B+S,k=e[U],j?e.style[l]=j:_removeProperty(e,l)}return O&&G&&((T=_getCache(E)).time=nt.time,T.width=E[U]),_round(z?k*R/B:k&&R?B/k*R:0)},_get=function(e,l,_,S){var k;return It||_initCore(),l in Ht&&"transform"!==l&&~(l=Ht[l]).indexOf(",")&&(l=l.split(",")[0]),Ut[l]&&"transform"!==l?(k=_parseTransform(e,S),k="transformOrigin"!==l?k[l]:k.svg?k.origin:_firstTwoOnly(Xt(e,Wt))+" "+k.zOrigin+"px"):(!(k=e.style[l])||"auto"===k||S||~(k+"").indexOf("calc("))&&(k=$t[l]&&$t[l](e,l,_)||Xt(e,l)||_getProperty(e,l)||("opacity"===l?1:0)),_&&!~(k+"").trim().indexOf(" ")?Jt(e,l,k,_)+_:k},_tweenComplexCSSString=function(e,l,_,S){if(!_||"none"===_){var k=_checkPropPrefix(l,e,1),E=k&&Xt(e,k,1);E&&E!==_?(l=k,_=E):"borderColor"===l&&(_=Xt(e,"borderTopColor"))}var T,M,R,I,D,O,L,U,B,z,G,j=new yt(this._pt,e.style,l,0,1,_renderComplexString),H=0,V=0;if(j.b=_,j.e=S,_+="","var(--"===(S+="").substring(0,6)&&(S=Xt(e,S.substring(4,S.indexOf(")")))),"auto"===S&&(O=e.style[l],e.style[l]=S,S=Xt(e,l)||S,O?e.style[l]=O:_removeProperty(e,l)),_colorStringFilter(T=[_,S]),S=T[1],R=(_=T[0]).match(Te)||[],(S.match(Te)||[]).length){for(;M=Te.exec(S);)L=M[0],B=S.substring(H,M.index),D?D=(D+1)%5:"rgba("!==B.substr(-5)&&"hsla("!==B.substr(-5)||(D=1),L!==(O=R[V++]||"")&&(I=parseFloat(O)||0,G=O.substr((I+"").length),"="===L.charAt(1)&&(L=_parseRelative(I,L)+G),U=parseFloat(L),z=L.substr((U+"").length),H=Te.lastIndex-z.length,z||(z=z||pe.units[l]||G,H===S.length&&(S+=z,j.e+=z)),G!==z&&(I=Jt(e,l,O,z)||0),j._pt={_next:j._pt,p:B||1===V?B:",",s:I,c:U-I,m:D&&D<4||"zIndex"===l?Math.round:0});j.c=H<S.length?S.substring(H,S.length):""}else j.r="display"===l&&"none"===S?_renderNonTweeningValueOnlyAtEnd:_renderNonTweeningValue;return Re.test(S)&&(j.e=0),this._pt=j,j},Zt={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},_convertKeywordsToPercentages=function(e){var l=e.split(" "),_=l[0],S=l[1]||"50%";return"top"!==_&&"bottom"!==_&&"left"!==S&&"right"!==S||(e=_,_=S,S=e),l[0]=Zt[_]||_,l[1]=Zt[S]||S,l.join(" ")},_renderClearProps=function(e,l){if(l.tween&&l.tween._time===l.tween._dur){var _,S,k,E=l.t,T=E.style,M=l.u,R=E._gsap;if("all"===M||!0===M)T.cssText="",S=1;else for(k=(M=M.split(",")).length;--k>-1;)_=M[k],Ut[_]&&(S=1,_="transformOrigin"===_?Wt:Vt),_removeProperty(E,_);S&&(_removeProperty(E,Vt),R&&(R.svg&&E.removeAttribute("transform"),T.scale=T.rotate=T.translate="none",_parseTransform(E,1),R.uncache=1,_removeIndependentTransforms(T)))}},$t={clearProps:function(e,l,_,S,k){if("isFromStart"!==k.data){var E=e._pt=new yt(e._pt,l,_,0,0,_renderClearProps);return E.u=S,E.pr=-10,E.tween=k,e._props.push(_),1}}},er=[1,0,0,1,0,0],tr={},_isNullTransform=function(e){return"matrix(1, 0, 0, 1, 0, 0)"===e||"none"===e||!e},_getComputedTransformMatrixAsArray=function(e){var l=Xt(e,Vt);return _isNullTransform(l)?er:l.substr(7).match(Ce).map(_round)},_getMatrix=function(e,l){var _,S,k,E,T=e._gsap||_getCache(e),M=e.style,R=_getComputedTransformMatrixAsArray(e);return T.svg&&e.getAttribute("transform")?"1,0,0,1,0,0"===(R=[(k=e.transform.baseVal.consolidate().matrix).a,k.b,k.c,k.d,k.e,k.f]).join(",")?er:R:(R!==er||e.offsetParent||e===Rt||T.svg||(k=M.display,M.display="block",(_=e.parentNode)&&(e.offsetParent||e.getBoundingClientRect().width)||(E=1,S=e.nextElementSibling,Rt.appendChild(e)),R=_getComputedTransformMatrixAsArray(e),k?M.display=k:_removeProperty(e,"display"),E&&(S?_.insertBefore(e,S):_?_.appendChild(e):Rt.removeChild(e))),l&&R.length>6?[R[0],R[1],R[4],R[5],R[12],R[13]]:R)},_applySVGOrigin=function(e,l,_,S,k,E){var T,M,R,I=e._gsap,D=k||_getMatrix(e,!0),O=I.xOrigin||0,L=I.yOrigin||0,U=I.xOffset||0,B=I.yOffset||0,z=D[0],G=D[1],j=D[2],H=D[3],V=D[4],W=D[5],q=l.split(" "),X=parseFloat(q[0])||0,K=parseFloat(q[1])||0;_?D!==er&&(M=z*H-G*j)&&(R=X*(-G/M)+K*(z/M)-(z*W-G*V)/M,X=X*(H/M)+K*(-j/M)+(j*W-H*V)/M,K=R):(X=(T=_getBBox(e)).x+(~q[0].indexOf("%")?X/100*T.width:X),K=T.y+(~(q[1]||q[0]).indexOf("%")?K/100*T.height:K)),S||!1!==S&&I.smooth?(V=X-O,W=K-L,I.xOffset=U+(V*z+W*j)-V,I.yOffset=B+(V*G+W*H)-W):I.xOffset=I.yOffset=0,I.xOrigin=X,I.yOrigin=K,I.smooth=!!S,I.origin=l,I.originIsAbsolute=!!_,e.style[Wt]="0px 0px",E&&(_addNonTweeningPT(E,I,"xOrigin",O,X),_addNonTweeningPT(E,I,"yOrigin",L,K),_addNonTweeningPT(E,I,"xOffset",U,I.xOffset),_addNonTweeningPT(E,I,"yOffset",B,I.yOffset)),e.setAttribute("data-svg-origin",X+" "+K)},_parseTransform=function(e,l){var _=e._gsap||new GSCache(e);if("x"in _&&!l&&!_.uncache)return _;var S,k,E,T,M,R,I,D,O,L,U,B,z,G,j,H,V,W,q,X,K,Y,Q,J,Z,$,ee,te,re,ne,ie,ae,oe=e.style,se=_.scaleX<0,ue="px",le="deg",ce=getComputedStyle(e),he=Xt(e,Wt)||"0";return S=k=E=R=I=D=O=L=U=0,T=M=1,_.svg=!(!e.getCTM||!_isSVG(e)),ce.translate&&("none"===ce.translate&&"none"===ce.scale&&"none"===ce.rotate||(oe[Vt]=("none"!==ce.translate?"translate3d("+(ce.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+("none"!==ce.rotate?"rotate("+ce.rotate+") ":"")+("none"!==ce.scale?"scale("+ce.scale.split(" ").join(",")+") ":"")+("none"!==ce[Vt]?ce[Vt]:"")),oe.scale=oe.rotate=oe.translate="none"),G=_getMatrix(e,_.svg),_.svg&&(_.uncache?(Z=e.getBBox(),he=_.xOrigin-Z.x+"px "+(_.yOrigin-Z.y)+"px",J=""):J=!l&&e.getAttribute("data-svg-origin"),_applySVGOrigin(e,J||he,!!J||_.originIsAbsolute,!1!==_.smooth,G)),B=_.xOrigin||0,z=_.yOrigin||0,G!==er&&(W=G[0],q=G[1],X=G[2],K=G[3],S=Y=G[4],k=Q=G[5],6===G.length?(T=Math.sqrt(W*W+q*q),M=Math.sqrt(K*K+X*X),R=W||q?Bt(q,W)*Ft:0,(O=X||K?Bt(X,K)*Ft+R:0)&&(M*=Math.abs(Math.cos(O*Nt))),_.svg&&(S-=B-(B*W+z*X),k-=z-(B*q+z*K))):(ae=G[6],ne=G[7],ee=G[8],te=G[9],re=G[10],ie=G[11],S=G[12],k=G[13],E=G[14],I=(j=Bt(ae,re))*Ft,j&&(J=Y*(H=Math.cos(-j))+ee*(V=Math.sin(-j)),Z=Q*H+te*V,$=ae*H+re*V,ee=Y*-V+ee*H,te=Q*-V+te*H,re=ae*-V+re*H,ie=ne*-V+ie*H,Y=J,Q=Z,ae=$),D=(j=Bt(-X,re))*Ft,j&&(H=Math.cos(-j),ie=K*(V=Math.sin(-j))+ie*H,W=J=W*H-ee*V,q=Z=q*H-te*V,X=$=X*H-re*V),R=(j=Bt(q,W))*Ft,j&&(J=W*(H=Math.cos(j))+q*(V=Math.sin(j)),Z=Y*H+Q*V,q=q*H-W*V,Q=Q*H-Y*V,W=J,Y=Z),I&&Math.abs(I)+Math.abs(R)>359.9&&(I=R=0,D=180-D),T=_round(Math.sqrt(W*W+q*q+X*X)),M=_round(Math.sqrt(Q*Q+ae*ae)),j=Bt(Y,Q),O=Math.abs(j)>2e-4?j*Ft:0,U=ie?1/(ie<0?-ie:ie):0),_.svg&&(J=e.getAttribute("transform"),_.forceCSS=e.setAttribute("transform","")||!_isNullTransform(Xt(e,Vt)),J&&e.setAttribute("transform",J))),Math.abs(O)>90&&Math.abs(O)<270&&(se?(T*=-1,O+=R<=0?180:-180,R+=R<=0?180:-180):(M*=-1,O+=O<=0?180:-180)),l=l||_.uncache,_.x=S-((_.xPercent=S&&(!l&&_.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-S)?-50:0)))?e.offsetWidth*_.xPercent/100:0)+ue,_.y=k-((_.yPercent=k&&(!l&&_.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-k)?-50:0)))?e.offsetHeight*_.yPercent/100:0)+ue,_.z=E+ue,_.scaleX=_round(T),_.scaleY=_round(M),_.rotation=_round(R)+le,_.rotationX=_round(I)+le,_.rotationY=_round(D)+le,_.skewX=O+le,_.skewY=L+le,_.transformPerspective=U+ue,(_.zOrigin=parseFloat(he.split(" ")[2])||!l&&_.zOrigin||0)&&(oe[Wt]=_firstTwoOnly(he)),_.xOffset=_.yOffset=0,_.force3D=pe.force3D,_.renderTransform=_.svg?_renderSVGTransforms:Lt?_renderCSSTransforms:_renderNon3DTransforms,_.uncache=0,_},_firstTwoOnly=function(e){return(e=e.split(" "))[0]+" "+e[1]},_addPxTranslate=function(e,l,_){var S=getUnit(l);return _round(parseFloat(l)+parseFloat(Jt(e,"x",_+"px",S)))+S},_renderNon3DTransforms=function(e,l){l.z="0px",l.rotationY=l.rotationX="0deg",l.force3D=0,_renderCSSTransforms(e,l)},rr="0deg",nr="0px",ir=") ",_renderCSSTransforms=function(e,l){var _=l||this,S=_.xPercent,k=_.yPercent,E=_.x,T=_.y,M=_.z,R=_.rotation,I=_.rotationY,D=_.rotationX,O=_.skewX,L=_.skewY,U=_.scaleX,B=_.scaleY,z=_.transformPerspective,G=_.force3D,j=_.target,H=_.zOrigin,V="",W="auto"===G&&e&&1!==e||!0===G;if(H&&(D!==rr||I!==rr)){var q,X=parseFloat(I)*Nt,K=Math.sin(X),Y=Math.cos(X);X=parseFloat(D)*Nt,q=Math.cos(X),E=_addPxTranslate(j,E,K*q*-H),T=_addPxTranslate(j,T,-Math.sin(X)*-H),M=_addPxTranslate(j,M,Y*q*-H+H)}z!==nr&&(V+="perspective("+z+ir),(S||k)&&(V+="translate("+S+"%, "+k+"%) "),(W||E!==nr||T!==nr||M!==nr)&&(V+=M!==nr||W?"translate3d("+E+", "+T+", "+M+") ":"translate("+E+", "+T+ir),R!==rr&&(V+="rotate("+R+ir),I!==rr&&(V+="rotateY("+I+ir),D!==rr&&(V+="rotateX("+D+ir),O===rr&&L===rr||(V+="skew("+O+", "+L+ir),1===U&&1===B||(V+="scale("+U+", "+B+ir),j.style[Vt]=V||"translate(0, 0)"},_renderSVGTransforms=function(e,l){var _,S,k,E,T,M=l||this,R=M.xPercent,I=M.yPercent,D=M.x,O=M.y,L=M.rotation,U=M.skewX,B=M.skewY,z=M.scaleX,G=M.scaleY,j=M.target,H=M.xOrigin,V=M.yOrigin,W=M.xOffset,q=M.yOffset,X=M.forceCSS,K=parseFloat(D),Y=parseFloat(O);L=parseFloat(L),U=parseFloat(U),(B=parseFloat(B))&&(U+=B=parseFloat(B),L+=B),L||U?(L*=Nt,U*=Nt,_=Math.cos(L)*z,S=Math.sin(L)*z,k=Math.sin(L-U)*-G,E=Math.cos(L-U)*G,U&&(B*=Nt,T=Math.tan(U-B),k*=T=Math.sqrt(1+T*T),E*=T,B&&(T=Math.tan(B),_*=T=Math.sqrt(1+T*T),S*=T)),_=_round(_),S=_round(S),k=_round(k),E=_round(E)):(_=z,E=G,S=k=0),(K&&!~(D+"").indexOf("px")||Y&&!~(O+"").indexOf("px"))&&(K=Jt(j,"x",D,"px"),Y=Jt(j,"y",O,"px")),(H||V||W||q)&&(K=_round(K+H-(H*_+V*k)+W),Y=_round(Y+V-(H*S+V*E)+q)),(R||I)&&(T=j.getBBox(),K=_round(K+R/100*T.width),Y=_round(Y+I/100*T.height)),T="matrix("+_+","+S+","+k+","+E+","+K+","+Y+")",j.setAttribute("transform",T),X&&(j.style[Vt]=T)},_addRotationalPropTween=function(e,l,_,S,k){var E,T,M=360,R=_isString(k),I=parseFloat(k)*(R&&~k.indexOf("rad")?Ft:1)-S,D=S+I+"deg";return R&&("short"===(E=k.split("_")[1])&&(I%=M)!==I%180&&(I+=I<0?M:-360),"cw"===E&&I<0?I=(I+36e9)%M-~~(I/M)*M:"ccw"===E&&I>0&&(I=(I-36e9)%M-~~(I/M)*M)),e._pt=T=new yt(e._pt,l,_,S,I,_renderPropWithEnd),T.e=D,T.u="deg",e._props.push(_),T},_assign=function(e,l){for(var _ in l)e[_]=l[_];return e},_addRawTransformPTs=function(e,l,_){var S,k,E,T,M,R,I,D=_assign({},_._gsap),O=_.style;for(k in D.svg?(E=_.getAttribute("transform"),_.setAttribute("transform",""),O[Vt]=l,S=_parseTransform(_,1),_removeProperty(_,Vt),_.setAttribute("transform",E)):(E=getComputedStyle(_)[Vt],O[Vt]=l,S=_parseTransform(_,1),O[Vt]=E),Ut)(E=D[k])!==(T=S[k])&&"perspective,force3D,transformOrigin,svgOrigin".indexOf(k)<0&&(M=getUnit(E)!==(I=getUnit(T))?Jt(_,k,E,I):parseFloat(E),R=parseFloat(T),e._pt=new yt(e._pt,S,k,M,R-M,_renderCSSProp),e._pt.u=I||0,e._props.push(k));_assign(S,D)};_forEachName("padding,margin,Width,Radius",function(e,l){var _="Top",S="Right",k="Bottom",E="Left",T=(l<3?[_,S,k,E]:[_+E,_+S,k+S,k+E]).map(function(_){return l<2?e+_:"border"+_+e});$t[l>1?"border"+e:e]=function(e,l,_,S,k){var E,M;if(arguments.length<4)return E=T.map(function(l){return _get(e,l,_)}),5===(M=E.join(" ")).split(E[0]).length?E[0]:M;E=(S+"").split(" "),M={},T.forEach(function(e,l){return M[e]=E[l]=E[l]||E[(l-1)/2|0]}),e.init(l,M,k)}});var ar={name:"css",register:_initCore,targetTest:function(e){return e.style&&e.nodeType},init:function(e,l,_,S,k){var E,T,M,R,I,D,O,L,U,B,z,G,j,H,V,W,q=this._props,X=e.style,K=_.vars.startAt;for(O in It||_initCore(),this.styles=this.styles||_getStyleSaver(e),W=this.styles.props,this.tween=_,l)if("autoRound"!==O&&(T=l[O],!Ge[O]||!_checkPlugin(O,l,_,S,e,k)))if(I=_typeof3(T),D=$t[O],"function"===I&&(I=_typeof3(T=T.call(_,S,e,k))),"string"===I&&~T.indexOf("random(")&&(T=_replaceRandom(T)),D)D(this,e,O,T,_)&&(V=1);else if("--"===O.substr(0,2))E=(getComputedStyle(e).getPropertyValue(O)+"").trim(),T+="",tt.lastIndex=0,tt.test(E)||(L=getUnit(E),U=getUnit(T)),U?L!==U&&(E=Jt(e,O,E,U)+U):L&&(T+=L),this.add(X,"setProperty",E,T,S,k,0,0,O),q.push(O),W.push(O,0,X[O]);else if("undefined"!==I){if(K&&O in K?(E="function"==typeof K[O]?K[O].call(_,S,e,k):K[O],_isString(E)&&~E.indexOf("random(")&&(E=_replaceRandom(E)),getUnit(E+"")||"auto"===E||(E+=pe.units[O]||getUnit(_get(e,O))||""),"="===(E+"").charAt(1)&&(E=_get(e,O))):E=_get(e,O),R=parseFloat(E),(B="string"===I&&"="===T.charAt(1)&&T.substr(0,2))&&(T=T.substr(2)),M=parseFloat(T),O in Ht&&("autoAlpha"===O&&(1===R&&"hidden"===_get(e,"visibility")&&M&&(R=0),W.push("visibility",0,X.visibility),_addNonTweeningPT(this,X,"visibility",R?"inherit":"hidden",M?"inherit":"hidden",!M)),"scale"!==O&&"transform"!==O&&~(O=Ht[O]).indexOf(",")&&(O=O.split(",")[0])),z=O in Ut)if(this.styles.save(O),"string"===I&&"var(--"===T.substring(0,6)&&(T=Xt(e,T.substring(4,T.indexOf(")"))),M=parseFloat(T)),G||((j=e._gsap).renderTransform&&!l.parseTransform||_parseTransform(e,l.parseTransform),H=!1!==l.smoothOrigin&&j.smooth,(G=this._pt=new yt(this._pt,X,Vt,0,1,j.renderTransform,j,0,-1)).dep=1),"scale"===O)this._pt=new yt(this._pt,j,"scaleY",j.scaleY,(B?_parseRelative(j.scaleY,B+M):M)-j.scaleY||0,_renderCSSProp),this._pt.u=0,q.push("scaleY",O),O+="X";else{if("transformOrigin"===O){W.push(Wt,0,X[Wt]),T=_convertKeywordsToPercentages(T),j.svg?_applySVGOrigin(e,T,0,H,0,this):((U=parseFloat(T.split(" ")[2])||0)!==j.zOrigin&&_addNonTweeningPT(this,j,"zOrigin",j.zOrigin,U),_addNonTweeningPT(this,X,O,_firstTwoOnly(E),_firstTwoOnly(T)));continue}if("svgOrigin"===O){_applySVGOrigin(e,T,1,H,0,this);continue}if(O in tr){_addRotationalPropTween(this,j,O,R,B?_parseRelative(R,B+T):T);continue}if("smoothOrigin"===O){_addNonTweeningPT(this,j,"smooth",j.smooth,T);continue}if("force3D"===O){j[O]=T;continue}if("transform"===O){_addRawTransformPTs(this,T,e);continue}}else O in X||(O=_checkPropPrefix(O)||O);if(z||(M||0===M)&&(R||0===R)&&!jt.test(T)&&O in X)M||(M=0),(L=(E+"").substr((R+"").length))!==(U=getUnit(T)||(O in pe.units?pe.units[O]:L))&&(R=Jt(e,O,E,U)),this._pt=new yt(this._pt,z?j:X,O,R,(B?_parseRelative(R,B+M):M)-R,z||"px"!==U&&"zIndex"!==O||!1===l.autoRound?_renderCSSProp:_renderRoundedCSSProp),this._pt.u=U||0,L!==U&&"%"!==U&&(this._pt.b=E,this._pt.r=_renderCSSPropWithBeginning);else if(O in X)_tweenComplexCSSString.call(this,e,O,E,B?B+T:T);else if(O in e)this.add(e,O,E||e[O],B?B+T:T,S,k);else if("parseTransform"!==O){_missingPlugin();continue}z||(O in X?W.push(O,0,X[O]):"function"==typeof e[O]?W.push(O,2,e[O]()):W.push(O,1,E||e[O])),q.push(O)}V&&_sortPropTweensByPriority(this)},render:function(e,l){if(l.tween._time||!Ot())for(var _=l._pt;_;)_.r(e,_.d),_=_._next;else l.styles.revert()},get:_get,aliases:Ht,getSetter:function(e,l,_){var S=Ht[l];return S&&S.indexOf(",")<0&&(l=S),l in Ut&&l!==Wt&&(e._gsap.x||_get(e,"x"))?_&&Dt===_?"scale"===l?_setterScale:_setterTransform:(Dt=_||{})&&("scale"===l?_setterScaleWithRender:_setterTransformWithRender):e.style&&!_isUndefined(e.style[l])?_setterCSSStyle:~l.indexOf("-")?_setterCSSProp:_getSetter(e,l)},core:{_removeProperty:_removeProperty,_getMatrix:_getMatrix}};function r(e){var l,_,S="";if("string"==typeof e||"number"==typeof e)S+=e;else if("object"==_typeof3(e))if(Array.isArray(e)){var k=e.length;for(l=0;l<k;l++)e[l]&&(_=r(e[l]))&&(S&&(S+=" "),S+=_)}else for(_ in e)e[_]&&(S&&(S+=" "),S+=_);return S}function clsx(){for(var e,l,_=0,S="",k=arguments.length;_<k;_++)(e=arguments[_])&&(l=r(e))&&(S&&(S+=" "),S+=l);return S}Ct.utils.checkPrefix=_checkPropPrefix,Ct.core.getStyleSaver=_getStyleSaver,function(e,l){var _=_forEachName(e+","+l+",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective",function(e){Ut[e]=1});_forEachName(l,function(e){pe.units[e]="deg",tr[e]=1}),Ht[_[13]]=e+","+l,_forEachName("0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY",function(e){var l=e.split(":");Ht[l[1]]=_[l[0]]})}("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY"),_forEachName("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(e){pe.units[e]="px"}),Ct.registerPlugin(ar),I("ac",Ct.registerPlugin(ar)||Ct).core.Tween;var _getGroupRecursive=function(e,l){var _;if(0===e.length)return l.classGroupId;var S=e[0],k=l.nextPart.get(S),E=k?_getGroupRecursive(e.slice(1),k):void 0;if(E)return E;if(0!==l.validators.length){var T=e.join("-");return null===(_=l.validators.find(function(e){return(0,e.validator)(T)}))||void 0===_?void 0:_.classGroupId}},or=/^\[(.+)\]$/,getGroupIdForArbitraryProperty=function(e){if(or.test(e)){var l=or.exec(e)[1],_=null==l?void 0:l.substring(0,l.indexOf(":"));if(_)return"arbitrary.."+_}},createClassMap=function(e){var l=e.theme,_=e.classGroups,S={nextPart:new Map,validators:[]};for(var k in _)_processClassesRecursively(_[k],S,k,l);return S},_processClassesRecursively=function(e,l,_,S){e.forEach(function(e){if("string"!=typeof e){if("function"==typeof e)return isThemeGetter(e)?void _processClassesRecursively(e(S),l,_,S):void l.validators.push({validator:e,classGroupId:_});Object.entries(e).forEach(function(e){var k=_slicedToArray(e,2),E=k[0],T=k[1];_processClassesRecursively(T,getPart(l,E),_,S)})}else{(""===e?l:getPart(l,e)).classGroupId=_}})},getPart=function(e,l){var _=e;return l.split("-").forEach(function(e){_.nextPart.has(e)||_.nextPart.set(e,{nextPart:new Map,validators:[]}),_=_.nextPart.get(e)}),_},isThemeGetter=function(e){return e.isThemeGetter},createLruCache=function(e){if(e<1)return{get:function(){},set:function(){}};var l=0,_=new Map,S=new Map,update=function(k,E){_.set(k,E),++l>e&&(l=0,S=_,_=new Map)};return{get:function(e){var l=_.get(e);return void 0!==l?l:void 0!==(l=S.get(e))?(update(e,l),l):void 0},set:function(e,l){_.has(e)?_.set(e,l):update(e,l)}}},createParseClassName=function(e){var l=e.prefix,_=e.experimentalParseClassName,parseClassName=function(e){for(var l,_=[],S=0,k=0,E=0,T=0;T<e.length;T++){var M=e[T];if(0===S&&0===k){if(":"===M){_.push(e.slice(E,T)),E=T+1;continue}if("/"===M){l=T;continue}}"["===M?S++:"]"===M?S--:"("===M?k++:")"===M&&k--}var R=0===_.length?e:e.substring(E),I=stripImportantModifier(R);return{modifiers:_,hasImportantModifier:I!==R,baseClassName:I,maybePostfixModifierPosition:l&&l>E?l-E:void 0}};if(l){var S=l+":",k=parseClassName;parseClassName=function(e){return e.startsWith(S)?k(e.substring(S.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:e,maybePostfixModifierPosition:void 0}}}if(_){var E=parseClassName;parseClassName=function(e){return _({className:e,parseClassName:E})}}return parseClassName},stripImportantModifier=function(e){return e.endsWith("!")?e.substring(0,e.length-1):e.startsWith("!")?e.substring(1):e},createSortModifiers=function(e){var l=Object.fromEntries(e.orderSensitiveModifiers.map(function(e){return[e,!0]}));return function(e){if(e.length<=1)return e;var _=[],S=[];return e.forEach(function(e){"["===e[0]||l[e]?(_.push.apply(_,_toConsumableArray3(S.sort()).concat([e])),S=[]):S.push(e)}),_.push.apply(_,_toConsumableArray3(S.sort())),_}},createConfigUtils=function(e){return _objectSpread2({cache:createLruCache(e.cacheSize),parseClassName:createParseClassName(e),sortModifiers:createSortModifiers(e)},function(e){var l=createClassMap(e),_=e.conflictingClassGroups,S=e.conflictingClassGroupModifiers;return{getClassGroupId:function(e){var _=e.split("-");return""===_[0]&&1!==_.length&&_.shift(),_getGroupRecursive(_,l)||getGroupIdForArbitraryProperty(e)},getConflictingClassGroupIds:function(e,l){var k=_[e]||[];return l&&S[e]?[].concat(_toConsumableArray3(k),_toConsumableArray3(S[e])):k}}}(e))},sr=/\s+/;function twJoin(){for(var e,l,_=0,S="";_<arguments.length;)(e=arguments[_++])&&(l=_toValue(e))&&(S&&(S+=" "),S+=l);return S}var _toValue=function(e){if("string"==typeof e)return e;for(var l,_="",S=0;S<e.length;S++)e[S]&&(l=_toValue(e[S]))&&(_&&(_+=" "),_+=l);return _};function createTailwindMerge(e){for(var l=arguments.length,_=new Array(l>1?l-1:0),S=1;S<l;S++)_[S-1]=arguments[S];var k,E,T,functionToCall=function(l){var S=_.reduce(function(e,l){return l(e)},e());return k=createConfigUtils(S),E=k.cache.get,T=k.cache.set,functionToCall=tailwindMerge,tailwindMerge(l)};function tailwindMerge(e){var l=E(e);if(l)return l;var _=function(e,l){for(var _=l.parseClassName,S=l.getClassGroupId,k=l.getConflictingClassGroupIds,E=l.sortModifiers,T=[],M=e.trim().split(sr),R="",I=M.length-1;I>=0;I-=1){var D=M[I],O=_(D),L=O.isExternal,U=O.modifiers,B=O.hasImportantModifier,z=O.baseClassName,G=O.maybePostfixModifierPosition;if(L)R=D+(R.length>0?" "+R:R);else{var j=!!G,H=S(j?z.substring(0,G):z);if(!H){if(!j){R=D+(R.length>0?" "+R:R);continue}if(!(H=S(z))){R=D+(R.length>0?" "+R:R);continue}j=!1}var V=E(U).join(":"),W=B?V+"!":V,q=W+H;if(!T.includes(q)){T.push(q);for(var X=k(H,j),K=0;K<X.length;++K){var Y=X[K];T.push(W+Y)}R=D+(R.length>0?" "+R:R)}}}return R}(e,k);return T(e,_),_}return function(){return functionToCall(twJoin.apply(null,arguments))}}var ur,lr,fromTheme=function(e){var themeGetter=function(l){return l[e]||[]};return themeGetter.isThemeGetter=!0,themeGetter},cr=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,hr=/^\((?:(\w[\w-]*):)?(.+)\)$/i,dr=/^\d+\/\d+$/,fr=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,pr=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,vr=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,gr=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,mr=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,isFraction=function(e){return dr.test(e)},isNumber$1=function(e){return!!e&&!Number.isNaN(Number(e))},isInteger=function(e){return!!e&&Number.isInteger(Number(e))},isPercent=function(e){return e.endsWith("%")&&isNumber$1(e.slice(0,-1))},isTshirtSize=function(e){return fr.test(e)},isAny=function(){return!0},isLengthOnly=function(e){return pr.test(e)&&!vr.test(e)},isNever=function(){return!1},isShadow=function(e){return gr.test(e)},isImage=function(e){return mr.test(e)},isAnyNonArbitrary=function(e){return!isArbitraryValue(e)&&!isArbitraryVariable(e)},isArbitrarySize=function(e){return getIsArbitraryValue(e,isLabelSize,isNever)},isArbitraryValue=function(e){return cr.test(e)},isArbitraryLength=function(e){return getIsArbitraryValue(e,isLabelLength,isLengthOnly)},isArbitraryNumber=function(e){return getIsArbitraryValue(e,isLabelNumber,isNumber$1)},isArbitraryPosition=function(e){return getIsArbitraryValue(e,isLabelPosition,isNever)},isArbitraryImage=function(e){return getIsArbitraryValue(e,isLabelImage,isImage)},isArbitraryShadow=function(e){return getIsArbitraryValue(e,isLabelShadow,isShadow)},isArbitraryVariable=function(e){return hr.test(e)},isArbitraryVariableLength=function(e){return getIsArbitraryVariable(e,isLabelLength)},isArbitraryVariableFamilyName=function(e){return getIsArbitraryVariable(e,isLabelFamilyName)},isArbitraryVariablePosition=function(e){return getIsArbitraryVariable(e,isLabelPosition)},isArbitraryVariableSize=function(e){return getIsArbitraryVariable(e,isLabelSize)},isArbitraryVariableImage=function(e){return getIsArbitraryVariable(e,isLabelImage)},isArbitraryVariableShadow=function(e){return getIsArbitraryVariable(e,isLabelShadow,!0)},getIsArbitraryValue=function(e,l,_){var S=cr.exec(e);return!!S&&(S[1]?l(S[1]):_(S[2]))},getIsArbitraryVariable=function(e,l){var _=arguments.length>2&&void 0!==arguments[2]&&arguments[2],S=hr.exec(e);return!!S&&(S[1]?l(S[1]):_)},isLabelPosition=function(e){return"position"===e||"percentage"===e},isLabelImage=function(e){return"image"===e||"url"===e},isLabelSize=function(e){return"length"===e||"size"===e||"bg-size"===e},isLabelLength=function(e){return"length"===e},isLabelNumber=function(e){return"number"===e},isLabelFamilyName=function(e){return"family-name"===e},isLabelShadow=function(e){return"shadow"===e},yr=(I("b0",createTailwindMerge(function(){var e=fromTheme("color"),l=fromTheme("font"),_=fromTheme("text"),S=fromTheme("font-weight"),k=fromTheme("tracking"),E=fromTheme("leading"),T=fromTheme("breakpoint"),M=fromTheme("container"),R=fromTheme("spacing"),I=fromTheme("radius"),D=fromTheme("shadow"),O=fromTheme("inset-shadow"),L=fromTheme("text-shadow"),U=fromTheme("drop-shadow"),B=fromTheme("blur"),z=fromTheme("perspective"),G=fromTheme("aspect"),j=fromTheme("ease"),H=fromTheme("animate"),scalePositionWithArbitrary=function(){return[].concat(_toConsumableArray3(["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"]),[isArbitraryVariable,isArbitraryValue])},scaleUnambiguousSpacing=function(){return[isArbitraryVariable,isArbitraryValue,R]},scaleInset=function(){return[isFraction,"full","auto"].concat(_toConsumableArray3(scaleUnambiguousSpacing()))},scaleGridTemplateColsRows=function(){return[isInteger,"none","subgrid",isArbitraryVariable,isArbitraryValue]},scaleGridColRowStartAndEnd=function(){return["auto",{span:["full",isInteger,isArbitraryVariable,isArbitraryValue]},isInteger,isArbitraryVariable,isArbitraryValue]},scaleGridColRowStartOrEnd=function(){return[isInteger,"auto",isArbitraryVariable,isArbitraryValue]},scaleGridAutoColsRows=function(){return["auto","min","max","fr",isArbitraryVariable,isArbitraryValue]},scaleMargin=function(){return["auto"].concat(_toConsumableArray3(scaleUnambiguousSpacing()))},scaleSizing=function(){return[isFraction,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit"].concat(_toConsumableArray3(scaleUnambiguousSpacing()))},scaleColor=function(){return[e,isArbitraryVariable,isArbitraryValue]},scaleBgPosition=function(){return[].concat(_toConsumableArray3(["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"]),[isArbitraryVariablePosition,isArbitraryPosition,{position:[isArbitraryVariable,isArbitraryValue]}])},scaleBgSize=function(){return["auto","cover","contain",isArbitraryVariableSize,isArbitrarySize,{size:[isArbitraryVariable,isArbitraryValue]}]},scaleGradientStopPosition=function(){return[isPercent,isArbitraryVariableLength,isArbitraryLength]},scaleRadius=function(){return["","none","full",I,isArbitraryVariable,isArbitraryValue]},scaleBorderWidth=function(){return["",isNumber$1,isArbitraryVariableLength,isArbitraryLength]},scaleMaskImagePosition=function(){return[isNumber$1,isPercent,isArbitraryVariablePosition,isArbitraryPosition]},scaleBlur=function(){return["","none",B,isArbitraryVariable,isArbitraryValue]},scaleRotate=function(){return["none",isNumber$1,isArbitraryVariable,isArbitraryValue]},scaleScale=function(){return["none",isNumber$1,isArbitraryVariable,isArbitraryValue]},scaleSkew=function(){return[isNumber$1,isArbitraryVariable,isArbitraryValue]},scaleTranslate=function(){return[isFraction,"full"].concat(_toConsumableArray3(scaleUnambiguousSpacing()))};return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[isTshirtSize],breakpoint:[isTshirtSize],color:[isAny],container:[isTshirtSize],"drop-shadow":[isTshirtSize],ease:["in","out","in-out"],font:[isAnyNonArbitrary],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[isTshirtSize],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[isTshirtSize],shadow:[isTshirtSize],spacing:["px",isNumber$1],text:[isTshirtSize],"text-shadow":[isTshirtSize],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",isFraction,isArbitraryValue,isArbitraryVariable,G]}],container:["container"],columns:[{columns:[isNumber$1,isArbitraryValue,isArbitraryVariable,M]}],"break-after":[{"break-after":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-before":[{"break-before":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:scalePositionWithArbitrary()}],overflow:[{overflow:["auto","hidden","clip","visible","scroll"]}],"overflow-x":[{"overflow-x":["auto","hidden","clip","visible","scroll"]}],"overflow-y":[{"overflow-y":["auto","hidden","clip","visible","scroll"]}],overscroll:[{overscroll:["auto","contain","none"]}],"overscroll-x":[{"overscroll-x":["auto","contain","none"]}],"overscroll-y":[{"overscroll-y":["auto","contain","none"]}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:scaleInset()}],"inset-x":[{"inset-x":scaleInset()}],"inset-y":[{"inset-y":scaleInset()}],start:[{start:scaleInset()}],end:[{end:scaleInset()}],top:[{top:scaleInset()}],right:[{right:scaleInset()}],bottom:[{bottom:scaleInset()}],left:[{left:scaleInset()}],visibility:["visible","invisible","collapse"],z:[{z:[isInteger,"auto",isArbitraryVariable,isArbitraryValue]}],basis:[{basis:[isFraction,"full","auto",M].concat(_toConsumableArray3(scaleUnambiguousSpacing()))}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[isNumber$1,isFraction,"auto","initial","none",isArbitraryValue]}],grow:[{grow:["",isNumber$1,isArbitraryVariable,isArbitraryValue]}],shrink:[{shrink:["",isNumber$1,isArbitraryVariable,isArbitraryValue]}],order:[{order:[isInteger,"first","last","none",isArbitraryVariable,isArbitraryValue]}],"grid-cols":[{"grid-cols":scaleGridTemplateColsRows()}],"col-start-end":[{col:scaleGridColRowStartAndEnd()}],"col-start":[{"col-start":scaleGridColRowStartOrEnd()}],"col-end":[{"col-end":scaleGridColRowStartOrEnd()}],"grid-rows":[{"grid-rows":scaleGridTemplateColsRows()}],"row-start-end":[{row:scaleGridColRowStartAndEnd()}],"row-start":[{"row-start":scaleGridColRowStartOrEnd()}],"row-end":[{"row-end":scaleGridColRowStartOrEnd()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":scaleGridAutoColsRows()}],"auto-rows":[{"auto-rows":scaleGridAutoColsRows()}],gap:[{gap:scaleUnambiguousSpacing()}],"gap-x":[{"gap-x":scaleUnambiguousSpacing()}],"gap-y":[{"gap-y":scaleUnambiguousSpacing()}],"justify-content":[{justify:[].concat(_toConsumableArray3(["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"]),["normal"])}],"justify-items":[{"justify-items":[].concat(_toConsumableArray3(["start","end","center","stretch","center-safe","end-safe"]),["normal"])}],"justify-self":[{"justify-self":["auto"].concat(_toConsumableArray3(["start","end","center","stretch","center-safe","end-safe"]))}],"align-content":[{content:["normal"].concat(_toConsumableArray3(["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"]))}],"align-items":[{items:[].concat(_toConsumableArray3(["start","end","center","stretch","center-safe","end-safe"]),[{baseline:["","last"]}])}],"align-self":[{self:["auto"].concat(_toConsumableArray3(["start","end","center","stretch","center-safe","end-safe"]),[{baseline:["","last"]}])}],"place-content":[{"place-content":["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"]}],"place-items":[{"place-items":[].concat(_toConsumableArray3(["start","end","center","stretch","center-safe","end-safe"]),["baseline"])}],"place-self":[{"place-self":["auto"].concat(_toConsumableArray3(["start","end","center","stretch","center-safe","end-safe"]))}],p:[{p:scaleUnambiguousSpacing()}],px:[{px:scaleUnambiguousSpacing()}],py:[{py:scaleUnambiguousSpacing()}],ps:[{ps:scaleUnambiguousSpacing()}],pe:[{pe:scaleUnambiguousSpacing()}],pt:[{pt:scaleUnambiguousSpacing()}],pr:[{pr:scaleUnambiguousSpacing()}],pb:[{pb:scaleUnambiguousSpacing()}],pl:[{pl:scaleUnambiguousSpacing()}],m:[{m:scaleMargin()}],mx:[{mx:scaleMargin()}],my:[{my:scaleMargin()}],ms:[{ms:scaleMargin()}],me:[{me:scaleMargin()}],mt:[{mt:scaleMargin()}],mr:[{mr:scaleMargin()}],mb:[{mb:scaleMargin()}],ml:[{ml:scaleMargin()}],"space-x":[{"space-x":scaleUnambiguousSpacing()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":scaleUnambiguousSpacing()}],"space-y-reverse":["space-y-reverse"],size:[{size:scaleSizing()}],w:[{w:[M,"screen"].concat(_toConsumableArray3(scaleSizing()))}],"min-w":[{"min-w":[M,"screen","none"].concat(_toConsumableArray3(scaleSizing()))}],"max-w":[{"max-w":[M,"screen","none","prose",{screen:[T]}].concat(_toConsumableArray3(scaleSizing()))}],h:[{h:["screen","lh"].concat(_toConsumableArray3(scaleSizing()))}],"min-h":[{"min-h":["screen","lh","none"].concat(_toConsumableArray3(scaleSizing()))}],"max-h":[{"max-h":["screen","lh"].concat(_toConsumableArray3(scaleSizing()))}],"font-size":[{text:["base",_,isArbitraryVariableLength,isArbitraryLength]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[S,isArbitraryVariable,isArbitraryNumber]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",isPercent,isArbitraryValue]}],"font-family":[{font:[isArbitraryVariableFamilyName,isArbitraryValue,l]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[k,isArbitraryVariable,isArbitraryValue]}],"line-clamp":[{"line-clamp":[isNumber$1,"none",isArbitraryVariable,isArbitraryNumber]}],leading:[{leading:[E].concat(_toConsumableArray3(scaleUnambiguousSpacing()))}],"list-image":[{"list-image":["none",isArbitraryVariable,isArbitraryValue]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",isArbitraryVariable,isArbitraryValue]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:scaleColor()}],"text-color":[{text:scaleColor()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[].concat(_toConsumableArray3(["solid","dashed","dotted","double"]),["wavy"])}],"text-decoration-thickness":[{decoration:[isNumber$1,"from-font","auto",isArbitraryVariable,isArbitraryLength]}],"text-decoration-color":[{decoration:scaleColor()}],"underline-offset":[{"underline-offset":[isNumber$1,"auto",isArbitraryVariable,isArbitraryValue]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:scaleUnambiguousSpacing()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",isArbitraryVariable,isArbitraryValue]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",isArbitraryVariable,isArbitraryValue]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:scaleBgPosition()}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","space","round"]}]}],"bg-size":[{bg:scaleBgSize()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},isInteger,isArbitraryVariable,isArbitraryValue],radial:["",isArbitraryVariable,isArbitraryValue],conic:[isInteger,isArbitraryVariable,isArbitraryValue]},isArbitraryVariableImage,isArbitraryImage]}],"bg-color":[{bg:scaleColor()}],"gradient-from-pos":[{from:scaleGradientStopPosition()}],"gradient-via-pos":[{via:scaleGradientStopPosition()}],"gradient-to-pos":[{to:scaleGradientStopPosition()}],"gradient-from":[{from:scaleColor()}],"gradient-via":[{via:scaleColor()}],"gradient-to":[{to:scaleColor()}],rounded:[{rounded:scaleRadius()}],"rounded-s":[{"rounded-s":scaleRadius()}],"rounded-e":[{"rounded-e":scaleRadius()}],"rounded-t":[{"rounded-t":scaleRadius()}],"rounded-r":[{"rounded-r":scaleRadius()}],"rounded-b":[{"rounded-b":scaleRadius()}],"rounded-l":[{"rounded-l":scaleRadius()}],"rounded-ss":[{"rounded-ss":scaleRadius()}],"rounded-se":[{"rounded-se":scaleRadius()}],"rounded-ee":[{"rounded-ee":scaleRadius()}],"rounded-es":[{"rounded-es":scaleRadius()}],"rounded-tl":[{"rounded-tl":scaleRadius()}],"rounded-tr":[{"rounded-tr":scaleRadius()}],"rounded-br":[{"rounded-br":scaleRadius()}],"rounded-bl":[{"rounded-bl":scaleRadius()}],"border-w":[{border:scaleBorderWidth()}],"border-w-x":[{"border-x":scaleBorderWidth()}],"border-w-y":[{"border-y":scaleBorderWidth()}],"border-w-s":[{"border-s":scaleBorderWidth()}],"border-w-e":[{"border-e":scaleBorderWidth()}],"border-w-t":[{"border-t":scaleBorderWidth()}],"border-w-r":[{"border-r":scaleBorderWidth()}],"border-w-b":[{"border-b":scaleBorderWidth()}],"border-w-l":[{"border-l":scaleBorderWidth()}],"divide-x":[{"divide-x":scaleBorderWidth()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":scaleBorderWidth()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[].concat(_toConsumableArray3(["solid","dashed","dotted","double"]),["hidden","none"])}],"divide-style":[{divide:[].concat(_toConsumableArray3(["solid","dashed","dotted","double"]),["hidden","none"])}],"border-color":[{border:scaleColor()}],"border-color-x":[{"border-x":scaleColor()}],"border-color-y":[{"border-y":scaleColor()}],"border-color-s":[{"border-s":scaleColor()}],"border-color-e":[{"border-e":scaleColor()}],"border-color-t":[{"border-t":scaleColor()}],"border-color-r":[{"border-r":scaleColor()}],"border-color-b":[{"border-b":scaleColor()}],"border-color-l":[{"border-l":scaleColor()}],"divide-color":[{divide:scaleColor()}],"outline-style":[{outline:[].concat(_toConsumableArray3(["solid","dashed","dotted","double"]),["none","hidden"])}],"outline-offset":[{"outline-offset":[isNumber$1,isArbitraryVariable,isArbitraryValue]}],"outline-w":[{outline:["",isNumber$1,isArbitraryVariableLength,isArbitraryLength]}],"outline-color":[{outline:scaleColor()}],shadow:[{shadow:["","none",D,isArbitraryVariableShadow,isArbitraryShadow]}],"shadow-color":[{shadow:scaleColor()}],"inset-shadow":[{"inset-shadow":["none",O,isArbitraryVariableShadow,isArbitraryShadow]}],"inset-shadow-color":[{"inset-shadow":scaleColor()}],"ring-w":[{ring:scaleBorderWidth()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:scaleColor()}],"ring-offset-w":[{"ring-offset":[isNumber$1,isArbitraryLength]}],"ring-offset-color":[{"ring-offset":scaleColor()}],"inset-ring-w":[{"inset-ring":scaleBorderWidth()}],"inset-ring-color":[{"inset-ring":scaleColor()}],"text-shadow":[{"text-shadow":["none",L,isArbitraryVariableShadow,isArbitraryShadow]}],"text-shadow-color":[{"text-shadow":scaleColor()}],opacity:[{opacity:[isNumber$1,isArbitraryVariable,isArbitraryValue]}],"mix-blend":[{"mix-blend":[].concat(_toConsumableArray3(["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]),["plus-darker","plus-lighter"])}],"bg-blend":[{"bg-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[isNumber$1]}],"mask-image-linear-from-pos":[{"mask-linear-from":scaleMaskImagePosition()}],"mask-image-linear-to-pos":[{"mask-linear-to":scaleMaskImagePosition()}],"mask-image-linear-from-color":[{"mask-linear-from":scaleColor()}],"mask-image-linear-to-color":[{"mask-linear-to":scaleColor()}],"mask-image-t-from-pos":[{"mask-t-from":scaleMaskImagePosition()}],"mask-image-t-to-pos":[{"mask-t-to":scaleMaskImagePosition()}],"mask-image-t-from-color":[{"mask-t-from":scaleColor()}],"mask-image-t-to-color":[{"mask-t-to":scaleColor()}],"mask-image-r-from-pos":[{"mask-r-from":scaleMaskImagePosition()}],"mask-image-r-to-pos":[{"mask-r-to":scaleMaskImagePosition()}],"mask-image-r-from-color":[{"mask-r-from":scaleColor()}],"mask-image-r-to-color":[{"mask-r-to":scaleColor()}],"mask-image-b-from-pos":[{"mask-b-from":scaleMaskImagePosition()}],"mask-image-b-to-pos":[{"mask-b-to":scaleMaskImagePosition()}],"mask-image-b-from-color":[{"mask-b-from":scaleColor()}],"mask-image-b-to-color":[{"mask-b-to":scaleColor()}],"mask-image-l-from-pos":[{"mask-l-from":scaleMaskImagePosition()}],"mask-image-l-to-pos":[{"mask-l-to":scaleMaskImagePosition()}],"mask-image-l-from-color":[{"mask-l-from":scaleColor()}],"mask-image-l-to-color":[{"mask-l-to":scaleColor()}],"mask-image-x-from-pos":[{"mask-x-from":scaleMaskImagePosition()}],"mask-image-x-to-pos":[{"mask-x-to":scaleMaskImagePosition()}],"mask-image-x-from-color":[{"mask-x-from":scaleColor()}],"mask-image-x-to-color":[{"mask-x-to":scaleColor()}],"mask-image-y-from-pos":[{"mask-y-from":scaleMaskImagePosition()}],"mask-image-y-to-pos":[{"mask-y-to":scaleMaskImagePosition()}],"mask-image-y-from-color":[{"mask-y-from":scaleColor()}],"mask-image-y-to-color":[{"mask-y-to":scaleColor()}],"mask-image-radial":[{"mask-radial":[isArbitraryVariable,isArbitraryValue]}],"mask-image-radial-from-pos":[{"mask-radial-from":scaleMaskImagePosition()}],"mask-image-radial-to-pos":[{"mask-radial-to":scaleMaskImagePosition()}],"mask-image-radial-from-color":[{"mask-radial-from":scaleColor()}],"mask-image-radial-to-color":[{"mask-radial-to":scaleColor()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"]}],"mask-image-conic-pos":[{"mask-conic":[isNumber$1]}],"mask-image-conic-from-pos":[{"mask-conic-from":scaleMaskImagePosition()}],"mask-image-conic-to-pos":[{"mask-conic-to":scaleMaskImagePosition()}],"mask-image-conic-from-color":[{"mask-conic-from":scaleColor()}],"mask-image-conic-to-color":[{"mask-conic-to":scaleColor()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:scaleBgPosition()}],"mask-repeat":[{mask:["no-repeat",{repeat:["","x","y","space","round"]}]}],"mask-size":[{mask:scaleBgSize()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",isArbitraryVariable,isArbitraryValue]}],filter:[{filter:["","none",isArbitraryVariable,isArbitraryValue]}],blur:[{blur:scaleBlur()}],brightness:[{brightness:[isNumber$1,isArbitraryVariable,isArbitraryValue]}],contrast:[{contrast:[isNumber$1,isArbitraryVariable,isArbitraryValue]}],"drop-shadow":[{"drop-shadow":["","none",U,isArbitraryVariableShadow,isArbitraryShadow]}],"drop-shadow-color":[{"drop-shadow":scaleColor()}],grayscale:[{grayscale:["",isNumber$1,isArbitraryVariable,isArbitraryValue]}],"hue-rotate":[{"hue-rotate":[isNumber$1,isArbitraryVariable,isArbitraryValue]}],invert:[{invert:["",isNumber$1,isArbitraryVariable,isArbitraryValue]}],saturate:[{saturate:[isNumber$1,isArbitraryVariable,isArbitraryValue]}],sepia:[{sepia:["",isNumber$1,isArbitraryVariable,isArbitraryValue]}],"backdrop-filter":[{"backdrop-filter":["","none",isArbitraryVariable,isArbitraryValue]}],"backdrop-blur":[{"backdrop-blur":scaleBlur()}],"backdrop-brightness":[{"backdrop-brightness":[isNumber$1,isArbitraryVariable,isArbitraryValue]}],"backdrop-contrast":[{"backdrop-contrast":[isNumber$1,isArbitraryVariable,isArbitraryValue]}],"backdrop-grayscale":[{"backdrop-grayscale":["",isNumber$1,isArbitraryVariable,isArbitraryValue]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[isNumber$1,isArbitraryVariable,isArbitraryValue]}],"backdrop-invert":[{"backdrop-invert":["",isNumber$1,isArbitraryVariable,isArbitraryValue]}],"backdrop-opacity":[{"backdrop-opacity":[isNumber$1,isArbitraryVariable,isArbitraryValue]}],"backdrop-saturate":[{"backdrop-saturate":[isNumber$1,isArbitraryVariable,isArbitraryValue]}],"backdrop-sepia":[{"backdrop-sepia":["",isNumber$1,isArbitraryVariable,isArbitraryValue]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":scaleUnambiguousSpacing()}],"border-spacing-x":[{"border-spacing-x":scaleUnambiguousSpacing()}],"border-spacing-y":[{"border-spacing-y":scaleUnambiguousSpacing()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",isArbitraryVariable,isArbitraryValue]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[isNumber$1,"initial",isArbitraryVariable,isArbitraryValue]}],ease:[{ease:["linear","initial",j,isArbitraryVariable,isArbitraryValue]}],delay:[{delay:[isNumber$1,isArbitraryVariable,isArbitraryValue]}],animate:[{animate:["none",H,isArbitraryVariable,isArbitraryValue]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[z,isArbitraryVariable,isArbitraryValue]}],"perspective-origin":[{"perspective-origin":scalePositionWithArbitrary()}],rotate:[{rotate:scaleRotate()}],"rotate-x":[{"rotate-x":scaleRotate()}],"rotate-y":[{"rotate-y":scaleRotate()}],"rotate-z":[{"rotate-z":scaleRotate()}],scale:[{scale:scaleScale()}],"scale-x":[{"scale-x":scaleScale()}],"scale-y":[{"scale-y":scaleScale()}],"scale-z":[{"scale-z":scaleScale()}],"scale-3d":["scale-3d"],skew:[{skew:scaleSkew()}],"skew-x":[{"skew-x":scaleSkew()}],"skew-y":[{"skew-y":scaleSkew()}],transform:[{transform:[isArbitraryVariable,isArbitraryValue,"","none","gpu","cpu"]}],"transform-origin":[{origin:scalePositionWithArbitrary()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:scaleTranslate()}],"translate-x":[{"translate-x":scaleTranslate()}],"translate-y":[{"translate-y":scaleTranslate()}],"translate-z":[{"translate-z":scaleTranslate()}],"translate-none":["translate-none"],accent:[{accent:scaleColor()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:scaleColor()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",isArbitraryVariable,isArbitraryValue]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":scaleUnambiguousSpacing()}],"scroll-mx":[{"scroll-mx":scaleUnambiguousSpacing()}],"scroll-my":[{"scroll-my":scaleUnambiguousSpacing()}],"scroll-ms":[{"scroll-ms":scaleUnambiguousSpacing()}],"scroll-me":[{"scroll-me":scaleUnambiguousSpacing()}],"scroll-mt":[{"scroll-mt":scaleUnambiguousSpacing()}],"scroll-mr":[{"scroll-mr":scaleUnambiguousSpacing()}],"scroll-mb":[{"scroll-mb":scaleUnambiguousSpacing()}],"scroll-ml":[{"scroll-ml":scaleUnambiguousSpacing()}],"scroll-p":[{"scroll-p":scaleUnambiguousSpacing()}],"scroll-px":[{"scroll-px":scaleUnambiguousSpacing()}],"scroll-py":[{"scroll-py":scaleUnambiguousSpacing()}],"scroll-ps":[{"scroll-ps":scaleUnambiguousSpacing()}],"scroll-pe":[{"scroll-pe":scaleUnambiguousSpacing()}],"scroll-pt":[{"scroll-pt":scaleUnambiguousSpacing()}],"scroll-pr":[{"scroll-pr":scaleUnambiguousSpacing()}],"scroll-pb":[{"scroll-pb":scaleUnambiguousSpacing()}],"scroll-pl":[{"scroll-pl":scaleUnambiguousSpacing()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",isArbitraryVariable,isArbitraryValue]}],fill:[{fill:["none"].concat(_toConsumableArray3(scaleColor()))}],"stroke-w":[{stroke:[isNumber$1,isArbitraryVariableLength,isArbitraryLength,isArbitraryNumber]}],stroke:[{stroke:["none"].concat(_toConsumableArray3(scaleColor()))}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}})),{}),_r={},br={};function requireLog(){return ur||(ur=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Log=e.LogLevel=void 0;var l=" DEBUG ",_="  INFO ",S="  WARN ",k=" ERROR ";function addTag(e){return e.unshift("[Statsig]"),e}e.LogLevel={None:0,Error:1,Warn:2,Info:3,Debug:4};var E=function(){function Log(){_classCallCheck3(this,Log)}return _createClass3(Log,null,[{key:"info",value:function(){if(Log.level>=e.LogLevel.Info){for(var l,S=arguments.length,k=new Array(S),E=0;E<S;E++)k[E]=arguments[E];(l=console).info.apply(l,[_].concat(_toConsumableArray3(addTag(k))))}}},{key:"debug",value:function(){if(Log.level>=e.LogLevel.Debug){for(var _,S=arguments.length,k=new Array(S),E=0;E<S;E++)k[E]=arguments[E];(_=console).debug.apply(_,[l].concat(_toConsumableArray3(addTag(k))))}}},{key:"warn",value:function(){if(Log.level>=e.LogLevel.Warn){for(var l,_=arguments.length,k=new Array(_),E=0;E<_;E++)k[E]=arguments[E];(l=console).warn.apply(l,[S].concat(_toConsumableArray3(addTag(k))))}}},{key:"error",value:function(){if(Log.level>=e.LogLevel.Error){for(var l,_=arguments.length,S=new Array(_),E=0;E<_;E++)S[E]=arguments[E];(l=console).error.apply(l,[k].concat(_toConsumableArray3(addTag(S))))}}}])}();e.Log=E,E.level=e.LogLevel.Warn}(br)),br}function require$_StatsigGlobal(){return lr||(lr=1,function(e){var l,_,S;Object.defineProperty(e,"__esModule",{value:!0}),e._getInstance=e._getStatsigGlobalFlag=e._getStatsigGlobal=void 0;var k=requireLog();e._getStatsigGlobal=function(){try{return"undefined"!=typeof __STATSIG__?__STATSIG__:I}catch(ta){return I}};e._getStatsigGlobalFlag=function(l){return(0,e._getStatsigGlobal)()[l]};e._getInstance=function(l){var _=(0,e._getStatsigGlobal)();return l?_.instances&&_.instances[l]:(_.instances&&Object.keys(_.instances).length>1&&k.Log.warn("Call made to Statsig global instance without an SDK key but there is more than one client instance. If you are using mulitple clients, please specify the SDK key."),_.firstInstance)};var E="__STATSIG__",T="undefined"!=typeof window?window:{},M=void 0!==D?D:{},R="undefined"!=typeof globalThis?globalThis:{},I=null!==(S=null!==(_=null!==(l=T[E])&&void 0!==l?l:M[E])&&void 0!==_?_:R[E])&&void 0!==S?S:{instance:e._getInstance};T[E]=I,M[E]=I,R[E]=I}(_r)),_r}var Sr,wr={};function requireDiagnostics(){return Sr||(Sr=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Diagnostics=void 0;var l=new Map,_="start",S="end",k="statsig::diagnostics";function _createMarker(e,l,_,S){return Object.assign({key:_,action:l,step:S,timestamp:Date.now()},e)}function _addMarker(e,_){var S,k=null!==(S=l.get(e))&&void 0!==S?S:[];k.push(_),l.set(e,k)}function _safeGetField(e,l){if(l in e)return e[l]}e.Diagnostics={_getMarkers:function(e){return l.get(e)},_markInitOverallStart:function(e){_addMarker(e,_createMarker({},_,"overall"))},_markInitOverallEnd:function(e,l,_){_addMarker(e,_createMarker({success:l,error:l?void 0:{name:"InitializeError",message:"Failed to initialize"},evaluationDetails:_},S,"overall"))},_markInitNetworkReqStart:function(e,l){_addMarker(e,_createMarker(l,_,"initialize","network_request"))},_markInitNetworkReqEnd:function(e,l){_addMarker(e,_createMarker(l,S,"initialize","network_request"))},_markInitProcessStart:function(e){_addMarker(e,_createMarker({},_,"initialize","process"))},_markInitProcessEnd:function(e,l){_addMarker(e,_createMarker(l,S,"initialize","process"))},_clearMarkers:function(e){l.delete(e)},_formatError:function(e){if(e&&"object"===_typeof3(e))return{code:_safeGetField(e,"code"),name:_safeGetField(e,"name"),message:_safeGetField(e,"message")}},_getDiagnosticsData:function(l,_,S,k){var E;return{success:!0===(null==l?void 0:l.ok),statusCode:null==l?void 0:l.status,sdkRegion:null===(E=null==l?void 0:l.headers)||void 0===E?void 0:E.get("x-statsig-region"),isDelta:!0===S.includes('"is_delta":true')||void 0,attempt:_,error:e.Diagnostics._formatError(k)}},_enqueueDiagnosticsEvent:function(l,_,S,E){var T=e.Diagnostics._getMarkers(S);if(null==T||T.length<=0)return-1;var M=T[T.length-1].timestamp-T[0].timestamp;e.Diagnostics._clearMarkers(S);var R=function(e,l){var _={eventName:k,user:e,value:null,metadata:l,time:Date.now()};return _}(l,{context:"initialize",markers:T.slice(),statsigOptions:E});return _.enqueue(R),M}}}(wr)),wr}var xr,kr,Ar,Er={},Cr={},Tr={},Mr={};function requireTypingUtils(){if(xr)return Mr;return xr=1,Object.defineProperty(Mr,"__esModule",{value:!0}),Mr._isTypeMatch=Mr._typeOf=void 0,Mr._typeOf=function(e){return Array.isArray(e)?"array":_typeof3(e)},Mr._isTypeMatch=function(e,l){var typeOf=function(e){return Array.isArray(e)?"array":null===e?"null":_typeof3(e)};return typeOf(e)===typeOf(l)},Mr}function requireHashing(){return kr||(kr=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e._getSortedObject=e._DJB2Object=e._DJB2=void 0;var l=requireTypingUtils();e._DJB2=function(e){for(var l=0,_=0;_<e.length;_++){l=(l<<5)-l+e.charCodeAt(_),l&=l}return String(l>>>0)};e._DJB2Object=function(l,_){return(0,e._DJB2)(JSON.stringify((0,e._getSortedObject)(l,_)))};e._getSortedObject=function(_,S){if(null==_)return null;var k=Object.keys(_).sort(),E={};return k.forEach(function(k){var T=_[k];0!==S&&"object"===(0,l._typeOf)(T)?E[k]=(0,e._getSortedObject)(T,null!=S?S-1:S):E[k]=T}),E}}(Tr)),Tr}function requireCacheKey(){if(Ar)return Cr;Ar=1,Object.defineProperty(Cr,"__esModule",{value:!0}),Cr._getStorageKey=Cr._getUserStorageKey=void 0;var e=requireHashing();function _getUserStorageKey(l,_,S){var k;if(S)return S(l,_);var E=_&&_.customIDs?_.customIDs:{},T=["uid:".concat(null!==(k=null==_?void 0:_.userID)&&void 0!==k?k:""),"cids:".concat(Object.keys(E).sort(function(e,l){return e.localeCompare(l)}).map(function(e){return"".concat(e,"-").concat(E[e])}).join(",")),"k:".concat(l)];return(0,e._DJB2)(T.join("|"))}return Cr._getUserStorageKey=_getUserStorageKey,Cr._getStorageKey=function(l,_,S){return _?_getUserStorageKey(l,_,S):(0,e._DJB2)("k:".concat(l))},Cr}var Rr,Ir={};function requireNetworkConfig(){return Rr||(Rr=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.NetworkParam=e.NetworkDefault=e.Endpoint=void 0,e.Endpoint={_initialize:"initialize",_rgstr:"rgstr",_download_config_specs:"download_config_specs"},e.NetworkDefault=_defineProperty3(_defineProperty3(_defineProperty3({},e.Endpoint._rgstr,"https://prodregistryv2.org/v1"),e.Endpoint._initialize,"https://featureassets.org/v1"),e.Endpoint._download_config_specs,"https://api.statsigcdn.com/v1"),e.NetworkParam={EventCount:"ec",SdkKey:"k",SdkType:"st",SdkVersion:"sv",Time:"t",SessionID:"sid",StatsigEncoded:"se",IsGzipped:"gz"}}(Ir)),Ir}var Pr,Dr={};function requireSafeJs(){return Pr||(Pr=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e._getUnloadEvent=e._getCurrentPageUrlSafe=e._addDocumentEventListenerSafe=e._addWindowEventListenerSafe=e._isServerEnv=e._getDocumentSafe=e._getWindowSafe=void 0;e._getWindowSafe=function(){return"undefined"!=typeof window?window:null};e._getDocumentSafe=function(){var l,_=(0,e._getWindowSafe)();return null!==(l=null==_?void 0:_.document)&&void 0!==l?l:null};e._isServerEnv=function(){if(null!==(0,e._getDocumentSafe)())return!1;var l="undefined"!=typeof process&&null!=process.versions&&null!=process.versions.node;return"string"==typeof EdgeRuntime||l};e._addWindowEventListenerSafe=function(l,_){var S=(0,e._getWindowSafe)();"function"==typeof(null==S?void 0:S.addEventListener)&&S.addEventListener(l,_)};e._addDocumentEventListenerSafe=function(l,_){var S=(0,e._getDocumentSafe)();"function"==typeof(null==S?void 0:S.addEventListener)&&S.addEventListener(l,_)};e._getCurrentPageUrlSafe=function(){var l;try{return null===(l=(0,e._getWindowSafe)())||void 0===l?void 0:l.location.href.split(/[?#]/)[0]}catch(_){return}};e._getUnloadEvent=function(){var l=(0,e._getWindowSafe)();return l&&"onpagehide"in l?"pagehide":"beforeunload"}}(Dr)),Dr}var Or,Lr={};function requireStatsigEvent(){if(Or)return Lr;Or=1,Object.defineProperty(Lr,"__esModule",{value:!0}),Lr._createLayerParameterExposure=Lr._createConfigExposure=Lr._mapExposures=Lr._createGateExposure=Lr._isExposureEvent=void 0;var e="statsig::config_exposure",l="statsig::gate_exposure",_="statsig::layer_exposure",_createExposure=function(e,l,_,S,k){return _.bootstrapMetadata&&(S.bootstrapMetadata=_.bootstrapMetadata),{eventName:e,user:l,value:null,metadata:_addEvaluationDetailsToMetadata(_,S),secondaryExposures:k,time:Date.now()}};Lr._isExposureEvent=function(S){var k=S.eventName;return k===l||k===e||k===_};function _mapExposures(e,l){return e.map(function(e){return"string"==typeof e?(null!=l?l:{})[e]:e}).filter(function(e){return null!=e})}Lr._createGateExposure=function(e,_,S){var k,E,T,M={gate:_.name,gateValue:String(_.value),ruleID:_.ruleID};return null!=(null===(k=_.__evaluation)||void 0===k?void 0:k.version)&&(M.configVersion=_.__evaluation.version),_createExposure(l,e,_.details,M,_mapExposures(null!==(T=null===(E=_.__evaluation)||void 0===E?void 0:E.secondary_exposures)&&void 0!==T?T:[],S))},Lr._mapExposures=_mapExposures;Lr._createConfigExposure=function(l,_,S){var k,E,T,M,R={config:_.name,ruleID:_.ruleID};return null!=(null===(k=_.__evaluation)||void 0===k?void 0:k.version)&&(R.configVersion=_.__evaluation.version),null!=(null===(E=_.__evaluation)||void 0===E?void 0:E.passed)&&(R.rulePassed=String(_.__evaluation.passed)),_createExposure(e,l,_.details,R,_mapExposures(null!==(M=null===(T=_.__evaluation)||void 0===T?void 0:T.secondary_exposures)&&void 0!==M?M:[],S))};Lr._createLayerParameterExposure=function(e,l,S,k){var E,T,M,R,I,D,O,L=l.__evaluation,U=!0===(null===(E=null==L?void 0:L.explicit_parameters)||void 0===E?void 0:E.includes(S)),B="",z=null!==(T=null==L?void 0:L.undelegated_secondary_exposures)&&void 0!==T?T:[];U&&(B=null!==(M=L.allocated_experiment_name)&&void 0!==M?M:"",z=null!==(R=L.secondary_exposures)&&void 0!==R?R:[]);var G=null===(I=l.__evaluation)||void 0===I?void 0:I.parameter_rule_ids,j={config:l.name,parameterName:S,ruleID:null!==(D=null==G?void 0:G[S])&&void 0!==D?D:l.ruleID,allocatedExperiment:B,isExplicitParameter:String(U)};return null!=(null===(O=l.__evaluation)||void 0===O?void 0:O.version)&&(j.configVersion=l.__evaluation.version),_createExposure(_,e,l.details,j,_mapExposures(z,k))};var _addEvaluationDetailsToMetadata=function(e,l){return l.reason=e.reason,e.lcut&&(l.lcut=String(e.lcut)),e.receivedAt&&(l.receivedAt=String(e.receivedAt)),l};return Lr}var Ur,Fr={};function requireStatsigOptionsCommon(){return Ur||(Ur=1,Object.defineProperty(Fr,"__esModule",{value:!0}),Fr.LoggingEnabledOption=Fr.LogEventCompressionMode=void 0,Fr.LogEventCompressionMode={Disabled:"d",Enabled:"e",Forced:"f"},Fr.LoggingEnabledOption={disabled:"disabled",browserOnly:"browser-only",always:"always"}),Fr}var Nr,Br={};function requireStorageProvider(){return Nr||(Nr=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e._setObjectInStorage=e._getObjectFromStorage=e.Storage=void 0;var l=requireLog(),_=requireSafeJs(),S={},k={isReady:function(){return!0},isReadyResolver:function(){return null},getProviderName:function(){return"InMemory"},getItem:function(e){return S[e]?S[e]:null},setItem:function(e,l){S[e]=l},removeItem:function(e){delete S[e]},getAllKeys:function(){return Object.keys(S)}},E=null;try{var T=(0,_._getWindowSafe)();T&&T.localStorage&&"function"==typeof T.localStorage.getItem&&(E={isReady:function(){return!0},isReadyResolver:function(){return null},getProviderName:function(){return"LocalStorage"},getItem:function(e){return T.localStorage.getItem(e)},setItem:function(e,l){return T.localStorage.setItem(e,l)},removeItem:function(e){return T.localStorage.removeItem(e)},getAllKeys:function(){return Object.keys(T.localStorage)}})}catch(I){l.Log.warn("Failed to setup localStorageProvider.")}var M=null!=E?E:k,R=M;function _inMemoryBreaker(l){try{return l()}catch(I){if(I instanceof Error&&"SecurityError"===I.name)return e.Storage._setProvider(k),null;if(I instanceof Error&&"QuotaExceededError"===I.name){var _=e.Storage.getAllKeys().filter(function(e){return e.startsWith("statsig.")});I.message="".concat(I.message,". Statsig Keys: ").concat(_.length)}throw I}}e.Storage={isReady:function(){return R.isReady()},isReadyResolver:function(){return R.isReadyResolver()},getProviderName:function(){return R.getProviderName()},getItem:function(e){return _inMemoryBreaker(function(){return R.getItem(e)})},setItem:function(e,l){return _inMemoryBreaker(function(){return R.setItem(e,l)})},removeItem:function(e){return R.removeItem(e)},getAllKeys:function(){return R.getAllKeys()},_setProvider:function(e){M=e,R=e},_setDisabled:function(e){R=e?k:M}},e._getObjectFromStorage=function(l){var _=e.Storage.getItem(l);return JSON.parse(null!=_?_:"null")},e._setObjectInStorage=function(l,_){e.Storage.setItem(l,JSON.stringify(_))}}(Br)),Br}var zr,Gr={};function requireUrlConfiguration(){if(zr)return Gr;zr=1,Object.defineProperty(Gr,"__esModule",{value:!0}),Gr.UrlConfiguration=void 0;var e=requireHashing(),l=requireNetworkConfig(),_=_defineProperty3(_defineProperty3(_defineProperty3({},l.Endpoint._initialize,"i"),l.Endpoint._rgstr,"e"),l.Endpoint._download_config_specs,"d"),S=function(){return _createClass3(function UrlConfiguration(e,S,k,E){_classCallCheck3(this,UrlConfiguration),this.customUrl=null,this.fallbackUrls=null,this.endpoint=e,this.endpointDnsKey=_[e],S&&(this.customUrl=S),!S&&k&&(this.customUrl=k.endsWith("/")?"".concat(k).concat(e):"".concat(k,"/").concat(e)),E&&(this.fallbackUrls=E);var T=l.NetworkDefault[e];this.defaultUrl="".concat(T,"/").concat(e)},[{key:"getUrl",value:function(){var e;return null!==(e=this.customUrl)&&void 0!==e?e:this.defaultUrl}},{key:"getChecksum",value:function(){var l,_=(null!==(l=this.fallbackUrls)&&void 0!==l?l:[]).sort().join(",");return(0,e._DJB2)(this.customUrl+_)}}])}();return Gr.UrlConfiguration=S,Gr}var jr,Hr,Vr={};function requireVisibilityObserving(){return jr||(jr=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e._notifyVisibilityChanged=e._subscribeToVisiblityChanged=e._isUnloading=e._isCurrentlyVisible=void 0;var l=requireSafeJs(),_="foreground",S="background",k=[],E=_,T=!1;e._isCurrentlyVisible=function(){return E===_};e._isUnloading=function(){return T};e._subscribeToVisiblityChanged=function(e){k.unshift(e)};e._notifyVisibilityChanged=function(e){e!==E&&(E=e,k.forEach(function(l){return l(e)}))},(0,l._addWindowEventListenerSafe)("focus",function(){T=!1,(0,e._notifyVisibilityChanged)(_)}),(0,l._addWindowEventListenerSafe)("blur",function(){return(0,e._notifyVisibilityChanged)(S)}),(0,l._addDocumentEventListenerSafe)("visibilitychange",function(){(0,e._notifyVisibilityChanged)("visible"===document.visibilityState?_:S)}),(0,l._addWindowEventListenerSafe)((0,l._getUnloadEvent)(),function(){T=!0,(0,e._notifyVisibilityChanged)(S)})}(Vr)),Vr}function requireEventLogger(){if(Hr)return Er;Hr=1;var e=Er&&Er.__awaiter||function(e,l,_,S){return new(_||(_=Promise))(function(k,E){function fulfilled(e){try{step(S.next(e))}catch(ta){E(ta)}}function rejected(e){try{step(S.throw(e))}catch(ta){E(ta)}}function step(e){var l;e.done?k(e.value):(l=e.value,l instanceof _?l:new _(function(e){e(l)})).then(fulfilled,rejected)}step((S=S.apply(e,l||[])).next())})};Object.defineProperty(Er,"__esModule",{value:!0}),Er.EventLogger=void 0;var l=requireCacheKey(),_=requireHashing(),S=requireLog(),k=requireNetworkConfig(),E=requireSafeJs(),T=requireStatsigEvent(),M=requireStatsigOptionsCommon(),R=requireStorageProvider(),I=requireUrlConfiguration(),D=requireVisibilityObserving(),O={},L="startup",U="gained_focus",B=function(){function EventLogger(e,l,_,E){var T,R;_classCallCheck3(this,EventLogger),this._sdkKey=e,this._emitter=l,this._network=_,this._options=E,this._queue=[],this._lastExposureTimeMap={},this._nonExposedChecks={},this._hasRunQuickFlush=!1,this._creationTime=Date.now(),this._loggingEnabled=null!==(T=null==E?void 0:E.loggingEnabled)&&void 0!==T?T:!0===(null==E?void 0:E.disableLogging)?M.LoggingEnabledOption.disabled:M.LoggingEnabledOption.browserOnly,(null==E?void 0:E.loggingEnabled)&&void 0!==E.disableLogging&&S.Log.warn("Detected both loggingEnabled and disableLogging options. loggingEnabled takes precedence - please remove disableLogging."),this._maxQueueSize=null!==(R=null==E?void 0:E.loggingBufferMaxSize)&&void 0!==R?R:100;var D=null==E?void 0:E.networkConfig;this._logEventUrlConfig=new I.UrlConfiguration(k.Endpoint._rgstr,null==D?void 0:D.logEventUrl,null==D?void 0:D.api,null==D?void 0:D.logEventFallbackUrls)}return _createClass3(EventLogger,[{key:"setLogEventCompressionMode",value:function(e){this._network.setLogEventCompressionMode(e)}},{key:"setLoggingEnabled",value:function(e){if("disabled"===this._loggingEnabled&&"disabled"!==e){var l,_=this._getStorageKey(),S=(0,R._getObjectFromStorage)(_);if(S)(l=this._queue).push.apply(l,_toConsumableArray3(S));R.Storage.removeItem(_)}this._loggingEnabled=e}},{key:"enqueue",value:function(e){this._shouldLogEvent(e)&&(this._normalizeAndAppendEvent(e),this._quickFlushIfNeeded(),this._queue.length>this._maxQueueSize&&EventLogger._safeFlushAndForget(this._sdkKey))}},{key:"incrementNonExposureCount",value:function(e){var l,_=null!==(l=this._nonExposedChecks[e])&&void 0!==l?l:0;this._nonExposedChecks[e]=_+1}},{key:"reset",value:function(){this.flush().catch(function(){}),this._lastExposureTimeMap={}}},{key:"start",value:function(){var e,l=this,_=(0,E._isServerEnv)();_&&"always"!==(null===(e=this._options)||void 0===e?void 0:e.loggingEnabled)||(O[this._sdkKey]=this,_||(0,D._subscribeToVisiblityChanged)(function(e){"background"===e?EventLogger._safeFlushAndForget(l._sdkKey):"foreground"===e&&EventLogger._safeRetryFailedLogs(l._sdkKey)}),this._retryFailedLogs(L),this._startBackgroundFlushInterval())}},{key:"stop",value:function(){return e(this,void 0,void 0,_regenerator().m(function _callee(){return _regenerator().w(function(e){for(;;)switch(e.n){case 0:return this._flushIntervalId&&(clearInterval(this._flushIntervalId),this._flushIntervalId=null),delete O[this._sdkKey],e.n=1,this.flush();case 1:return e.a(2)}},_callee,this)}))}},{key:"flush",value:function(){return e(this,void 0,void 0,_regenerator().m(function _callee2(){var e;return _regenerator().w(function(l){for(;;)switch(l.n){case 0:if(this._appendAndResetNonExposedChecks(),0!==this._queue.length){l.n=1;break}return l.a(2);case 1:return e=this._queue,this._queue=[],l.n=2,this._sendEvents(e);case 2:return l.a(2)}},_callee2,this)}))}},{key:"_quickFlushIfNeeded",value:function(){var e=this;this._hasRunQuickFlush||(this._hasRunQuickFlush=!0,Date.now()-this._creationTime>200||setTimeout(function(){return EventLogger._safeFlushAndForget(e._sdkKey)},200))}},{key:"_shouldLogEvent",value:function(e){var _;if("always"!==(null===(_=this._options)||void 0===_?void 0:_.loggingEnabled)&&(0,E._isServerEnv)())return!1;if(!(0,T._isExposureEvent)(e))return!0;var S=e.user?e.user:{statsigEnvironment:void 0},k=(0,l._getUserStorageKey)(this._sdkKey,S),M=e.metadata?e.metadata:{},R=[e.eventName,k,M.gate,M.config,M.ruleID,M.allocatedExperiment,M.parameterName,String(M.isExplicitParameter),M.reason].join("|"),I=this._lastExposureTimeMap[R],D=Date.now();return!(I&&D-I<6e5)&&(Object.keys(this._lastExposureTimeMap).length>1e3&&(this._lastExposureTimeMap={}),this._lastExposureTimeMap[R]=D,!0)}},{key:"_sendEvents",value:function(l){return e(this,void 0,void 0,_regenerator().m(function _callee3(){var e,_,k,E,T;return _regenerator().w(function(M){for(;;)switch(M.p=M.n){case 0:if("disabled"!==this._loggingEnabled){M.n=1;break}return this._saveFailedLogsToStorage(l),M.a(2,!1);case 1:if(M.p=1,k=(0,D._isUnloading)(),E=k&&this._network.isBeaconSupported()&&null==(null===(_=null===(e=this._options)||void 0===e?void 0:e.networkConfig)||void 0===_?void 0:_.networkOverrideFunc),this._emitter({name:"pre_logs_flushed",events:l}),!E){M.n=2;break}T=this._sendEventsViaBeacon(l),M.n=4;break;case 2:return M.n=3,this._sendEventsViaPost(l);case 3:T=M.v;case 4:if(!T.success){M.n=5;break}return this._emitter({name:"logs_flushed",events:l}),M.a(2,!0);case 5:return S.Log.warn("Failed to flush events."),this._saveFailedLogsToStorage(l),M.a(2,!1);case 6:M.n=8;break;case 7:return M.p=7,M.v,S.Log.warn("Failed to flush events."),M.a(2,!1);case 8:return M.a(2)}},_callee3,this,[[1,7]])}))}},{key:"_sendEventsViaPost",value:function(l){return e(this,void 0,void 0,_regenerator().m(function _callee4(){var e,_,S;return _regenerator().w(function(k){for(;;)switch(k.n){case 0:return k.n=1,this._network.post(this._getRequestData(l));case 1:return _=k.v,S=null!==(e=null==_?void 0:_.code)&&void 0!==e?e:-1,k.a(2,{success:S>=200&&S<300})}},_callee4,this)}))}},{key:"_sendEventsViaBeacon",value:function(e){return{success:this._network.beacon(this._getRequestData(e))}}},{key:"_getRequestData",value:function(e){return{sdkKey:this._sdkKey,data:{events:e},urlConfig:this._logEventUrlConfig,retries:3,isCompressable:!0,params:_defineProperty3({},k.NetworkParam.EventCount,String(e.length)),credentials:"same-origin"}}},{key:"_saveFailedLogsToStorage",value:function(e){for(;e.length>500;)e.shift();var l=this._getStorageKey();try{var _=this._getFailedLogsFromStorage(l);(0,R._setObjectInStorage)(l,[].concat(_toConsumableArray3(_),_toConsumableArray3(e)))}catch(k){S.Log.warn("Unable to save failed logs to storage")}}},{key:"_getFailedLogsFromStorage",value:function(e){var l=[];try{var _=(0,R._getObjectFromStorage)(e);return Array.isArray(_)&&(l=_),l}catch(S){return[]}}},{key:"_retryFailedLogs",value:function(l){var _=this,k=this._getStorageKey();e(_,void 0,void 0,_regenerator().m(function _callee5(){var e;return _regenerator().w(function(_){for(;;)switch(_.n){case 0:if(R.Storage.isReady()){_.n=1;break}return _.n=1,R.Storage.isReadyResolver();case 1:if(e=(0,R._getObjectFromStorage)(k)){_.n=2;break}return _.a(2);case 2:return l===L&&R.Storage.removeItem(k),_.n=3,this._sendEvents(e);case 3:_.v&&l===U&&R.Storage.removeItem(k);case 4:return _.a(2)}},_callee5,this)})).catch(function(){S.Log.warn("Failed to flush stored logs")})}},{key:"_getStorageKey",value:function(){return"statsig.failed_logs.".concat((0,_._DJB2)(this._sdkKey))}},{key:"_normalizeAndAppendEvent",value:function(e){e.user&&(e.user=Object.assign({},e.user),delete e.user.privateAttributes);var l={},_=this._getCurrentPageUrl();_&&(l.statsigMetadata={currentPage:_});var k=Object.assign(Object.assign({},e),l);S.Log.debug("Enqueued Event:",k),this._queue.push(k)}},{key:"_appendAndResetNonExposedChecks",value:function(){0!==Object.keys(this._nonExposedChecks).length&&(this._normalizeAndAppendEvent({eventName:"statsig::non_exposed_checks",user:null,time:Date.now(),metadata:{checks:Object.assign({},this._nonExposedChecks)}}),this._nonExposedChecks={})}},{key:"_getCurrentPageUrl",value:function(){var e;if(!1!==(null===(e=this._options)||void 0===e?void 0:e.includeCurrentPageUrlWithEvents))return(0,E._getCurrentPageUrlSafe)()}},{key:"_startBackgroundFlushInterval",value:function(){var e,l,_=this,S=null!==(l=null===(e=this._options)||void 0===e?void 0:e.loggingIntervalMs)&&void 0!==l?l:1e4,k=setInterval(function(){var e=O[_._sdkKey];e&&e._flushIntervalId===k?EventLogger._safeFlushAndForget(_._sdkKey):clearInterval(k)},S);this._flushIntervalId=k}}],[{key:"_safeFlushAndForget",value:function(e){var l;null===(l=O[e])||void 0===l||l.flush().catch(function(){})}},{key:"_safeRetryFailedLogs",value:function(e){var l;null===(l=O[e])||void 0===l||l._retryFailedLogs(U)}}])}();return Er.EventLogger=B,Er}var Wr,qr={};function requireStatsigMetadata(){return Wr||(Wr=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.StatsigMetadataProvider=e.SDK_VERSION=void 0,e.SDK_VERSION="3.26.0";var l={sdkVersion:e.SDK_VERSION,sdkType:"js-mono"};e.StatsigMetadataProvider={get:function(){return l},add:function(e){l=Object.assign(Object.assign({},l),e)}}}(qr)),qr}var Xr,Kr={};var Yr,Qr,Jr={},Zr={},$r={};function requireUUID(){if(Yr)return $r;return Yr=1,Object.defineProperty($r,"__esModule",{value:!0}),$r.getUUID=void 0,$r.getUUID=function(){if("undefined"!=typeof crypto&&"function"==typeof crypto.randomUUID)return crypto.randomUUID();var e=(new Date).getTime(),l="undefined"!=typeof performance&&performance.now&&1e3*performance.now()||0,_="89ab"[Math.floor(4*Math.random())];return"xxxxxxxx-xxxx-4xxx-".concat(_,"xxx-xxxxxxxxxxxx").replace(/[xy]/g,function(_){var S=16*Math.random();return e>0?(S=(e+S)%16|0,e=Math.floor(e/16)):(S=(l+S)%16|0,l=Math.floor(l/16)),("x"===_?S:7&S|8).toString(16)})},$r}function requireStableID(){if(Qr)return Zr;Qr=1,Object.defineProperty(Zr,"__esModule",{value:!0}),Zr.getCookieName=Zr.StableID=void 0;var e=requireCacheKey(),l=requireLog(),_=requireSafeJs(),S=requireStorageProvider(),k=requireUUID(),E={},T={},M={};function _getStableIDStorageKey(l){return"statsig.stable_id.".concat((0,e._getStorageKey)(l))}function _persistToStorage(e,_){var k=_getStableIDStorageKey(_);try{(0,S._setObjectInStorage)(k,e)}catch(ta){l.Log.warn("Failed to save StableID to storage")}}function _persistToCookie(e,l){if(T[l]&&null!=(0,_._getDocumentSafe)()){var S=new Date;S.setFullYear(S.getFullYear()+1),document.cookie="".concat(getCookieName(l),"=").concat(encodeURIComponent(e),"; expires=").concat(S.toUTCString(),"; path=/")}}function getCookieName(l){return"statsig.stable_id.".concat((0,e._getStorageKey)(l))}return Zr.StableID={cookiesEnabled:!1,randomID:Math.random().toString(36),get:function(e){if(M[e])return null;if(null!=E[e])return E[e];var l=null;return l=function(e){if(!T[e]||null==(0,_._getDocumentSafe)())return null;var l,S=document.cookie.split(";"),k=_createForOfIteratorHelper2(S);try{for(k.s();!(l=k.n()).done;){var E=_slicedToArray(l.value.trim().split("="),2),M=E[0],R=E[1];if(M===getCookieName(e))return decodeURIComponent(R)}}catch(I){k.e(I)}finally{k.f()}return null}(e),null!=l?(E[e]=l,_persistToStorage(l,e),l):(l=function(e){var l=_getStableIDStorageKey(e);return(0,S._getObjectFromStorage)(l)}(e),null==l&&(l=(0,k.getUUID)()),_persistToStorage(l,e),_persistToCookie(l,e),E[e]=l,l)},setOverride:function(e,l){E[l]=e,_persistToStorage(e,l),_persistToCookie(e,l)},_setCookiesEnabled:function(e,l){T[e]=l},_setDisabled:function(e,l){M[e]=l}},Zr.getCookieName=getCookieName,Zr}var en,tn={};function requireStatsigUser(){if(en)return tn;en=1,Object.defineProperty(tn,"__esModule",{value:!0}),tn._getFullUserHash=tn._normalizeUser=void 0;var e=requireHashing(),l=requireLog();return tn._normalizeUser=function(e,_,S){try{var k=JSON.parse(JSON.stringify(e));return null!=_&&null!=_.environment?k.statsigEnvironment=_.environment:null!=S&&(k.statsigEnvironment={tier:S}),k}catch(E){return l.Log.error("Failed to JSON.stringify user"),{statsigEnvironment:void 0}}},tn._getFullUserHash=function(l){return l?(0,e._DJB2Object)(l):null},tn}var rn,nn,an={};function requireTypedJsonParse(){if(rn)return an;rn=1,Object.defineProperty(an,"__esModule",{value:!0}),an._typedJsonParse=void 0;var e=requireLog();return an._typedJsonParse=function(l,_,S){try{var k=JSON.parse(l);if(k&&"object"===_typeof3(k)&&_ in k)return k}catch(E){}return e.Log.error("Failed to parse ".concat(S)),null},an}function requireDataAdapterCore(){if(nn)return Jr;nn=1;var e=Jr&&Jr.__awaiter||function(e,l,_,S){return new(_||(_=Promise))(function(k,E){function fulfilled(e){try{step(S.next(e))}catch(ta){E(ta)}}function rejected(e){try{step(S.throw(e))}catch(ta){E(ta)}}function step(e){var l;e.done?k(e.value):(l=e.value,l instanceof _?l:new _(function(e){e(l)})).then(fulfilled,rejected)}step((S=S.apply(e,l||[])).next())})};Object.defineProperty(Jr,"__esModule",{value:!0}),Jr._makeDataAdapterResult=Jr.DataAdapterCore=void 0;var l=requireLog(),_=requireStableID(),S=requireStatsigUser(),k=requireStorageProvider(),E=requireTypedJsonParse(),T=function(){return _createClass3(function DataAdapterCore(e,l){_classCallCheck3(this,DataAdapterCore),this._adapterName=e,this._cacheSuffix=l,this._options=null,this._sdkKey=null,this._cacheLimit=10,this._lastModifiedStoreKey="statsig.last_modified_time.".concat(l),this._inMemoryCache=new M},[{key:"attach",value:function(e,l,_){this._sdkKey=e,this._options=l}},{key:"getDataSync",value:function(e){var l=e&&(0,S._normalizeUser)(e,this._options),_=this._getCacheKey(l),k=this._inMemoryCache.get(_,l);if(k&&this._getIsCacheValueValid(k))return k;var E=this._loadFromCache(_);return E&&this._getIsCacheValueValid(E)?(this._inMemoryCache.add(_,E,this._cacheLimit),this._inMemoryCache.get(_,l)):null}},{key:"setData",value:function(e,l){var _=l&&(0,S._normalizeUser)(l,this._options),k=this._getCacheKey(_);this._inMemoryCache.add(k,_makeDataAdapterResult("Bootstrap",e,null,_),this._cacheLimit)}},{key:"_getIsCacheValueValid",value:function(e){return null==e.stableID||e.stableID===_.StableID.get(this._getSdkKey())}},{key:"_getDataAsyncImpl",value:function(_,S,E){return e(this,void 0,void 0,_regenerator().m(function _callee6(){var e,T;return _regenerator().w(function(M){for(;;)switch(M.n){case 0:if(k.Storage.isReady()){M.n=1;break}return M.n=1,k.Storage.isReadyResolver();case 1:return e=null!=_?_:this.getDataSync(S),T=[this._fetchAndPrepFromNetwork(e,S,E)],(null==E?void 0:E.timeoutMs)&&T.push(new Promise(function(e){return setTimeout(e,E.timeoutMs)}).then(function(){return l.Log.debug("Fetching latest value timed out"),null})),M.n=2,Promise.race(T);case 2:return M.a(2,M.v)}},_callee6,this)}))}},{key:"_prefetchDataImpl",value:function(l,_){return e(this,void 0,void 0,_regenerator().m(function _callee7(){var e,k,E;return _regenerator().w(function(T){for(;;)switch(T.n){case 0:return e=l&&(0,S._normalizeUser)(l,this._options),k=this._getCacheKey(e),T.n=1,this._getDataAsyncImpl(null,e,_);case 1:(E=T.v)&&this._inMemoryCache.add(k,Object.assign(Object.assign({},E),{source:"Prefetch"}),this._cacheLimit);case 2:return T.a(2)}},_callee7,this)}))}},{key:"_fetchAndPrepFromNetwork",value:function(S,k,T){return e(this,void 0,void 0,_regenerator().m(function _callee8(){var e,M,R,I,D,O,L,U,B;return _regenerator().w(function(z){for(;;)switch(z.n){case 0:return M=null!==(e=null==S?void 0:S.data)&&void 0!==e?e:null,R=null!=S&&this._isCachedResultValidFor204(S,k),z.n=1,this._fetchFromNetwork(M,k,T,R);case 1:if(I=z.v){z.n=2;break}return l.Log.debug("No response returned for latest value"),z.a(2,null);case 2:if(D=(0,E._typedJsonParse)(I,"has_updates","Response"),O=this._getSdkKey(),L=_.StableID.get(O),U=null,!0!==(null==D?void 0:D.has_updates)){z.n=3;break}U=_makeDataAdapterResult("Network",I,L,k),z.n=5;break;case 3:if(!M||!1!==(null==D?void 0:D.has_updates)){z.n=4;break}U=_makeDataAdapterResult("NetworkNotModified",M,L,k),z.n=5;break;case 4:return z.a(2,null);case 5:return B=this._getCacheKey(k),this._inMemoryCache.add(B,U,this._cacheLimit),this._writeToCache(B,U),z.a(2,U)}},_callee8,this)}))}},{key:"_getSdkKey",value:function(){return null!=this._sdkKey?this._sdkKey:(l.Log.error("".concat(this._adapterName," is not attached to a Client")),"")}},{key:"_loadFromCache",value:function(e){var l,_=null===(l=k.Storage.getItem)||void 0===l?void 0:l.call(k.Storage,e);if(null==_)return null;var S=(0,E._typedJsonParse)(_,"source","Cached Result");return S?Object.assign(Object.assign({},S),{source:"Cache"}):null}},{key:"_writeToCache",value:function(e,l){for(var _=JSON.stringify(l),S=0;S<8;S++)try{k.Storage.setItem(e,_);break}catch(E){if(!(E instanceof Error)||"QuotaExceededError"!==E.name||this._cacheLimit<=1)throw E;this._cacheLimit=Math.ceil(this._cacheLimit/2),this._runLocalStorageCacheEviction(e,this._cacheLimit-1)}this._runLocalStorageCacheEviction(e)}},{key:"_runLocalStorageCacheEviction",value:function(e){var l,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._cacheLimit,S=null!==(l=(0,k._getObjectFromStorage)(this._lastModifiedStoreKey))&&void 0!==l?l:{};S[e]=Date.now();var E,T=_createForOfIteratorHelper2(_getEvictableKeys(S,_));try{for(T.s();!(E=T.n()).done;){var M=E.value;delete S[M],k.Storage.removeItem(M)}}catch(R){T.e(R)}finally{T.f()}(0,k._setObjectInStorage)(this._lastModifiedStoreKey,S)}}])}();function _makeDataAdapterResult(e,l,_,k){return{source:e,data:l,receivedAt:Date.now(),stableID:_,fullUserHash:(0,S._getFullUserHash)(k)}}Jr.DataAdapterCore=T,Jr._makeDataAdapterResult=_makeDataAdapterResult;var M=function(){return _createClass3(function InMemoryCache(){_classCallCheck3(this,InMemoryCache),this._data={}},[{key:"get",value:function(e,_){var S,k=this._data[e],E=null==k?void 0:k.stableID,T=null===(S=null==_?void 0:_.customIDs)||void 0===S?void 0:S.stableID;return T&&E&&T!==E?(l.Log.warn("'StatsigUser.customIDs.stableID' mismatch"),null):k}},{key:"add",value:function(e,l,_){var S,k=_createForOfIteratorHelper2(_getEvictableKeys(this._data,_-1));try{for(k.s();!(S=k.n()).done;){var E=S.value;delete this._data[E]}}catch(T){k.e(T)}finally{k.f()}this._data[e]=l}},{key:"merge",value:function(e){this._data=Object.assign(Object.assign({},this._data),e)}}])}();function _getEvictableKeys(e,l){var _=Object.keys(e);return _.length<=l?[]:0===l?_:_.sort(function(l,_){var S=e[l],k=e[_];return"object"===_typeof3(S)&&"object"===_typeof3(k)?S.receivedAt-k.receivedAt:S-k}).slice(0,_.length-l)}return Jr}var sn,un={};var ln,cn,hn={},dn={};function requireSDKType(){if(ln)return dn;ln=1,Object.defineProperty(dn,"__esModule",{value:!0}),dn.SDKType=void 0;var e,l={};return dn.SDKType={_get:function(_){var S;return(null!==(S=l[_])&&void 0!==S?S:"js-mono")+(null!=e?e:"")},_setClientType:function(e,_){l[e]=_},_setBindingType:function(l){e&&"-react"!==e||(e="-"+l)}},dn}function requireErrorBoundary(){return cn||(cn=1,function(e){var l=hn&&hn.__awaiter||function(e,l,_,S){return new(_||(_=Promise))(function(k,E){function fulfilled(e){try{step(S.next(e))}catch(ta){E(ta)}}function rejected(e){try{step(S.throw(e))}catch(ta){E(ta)}}function step(e){var l;e.done?k(e.value):(l=e.value,l instanceof _?l:new _(function(e){e(l)})).then(fulfilled,rejected)}step((S=S.apply(e,l||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0}),e.ErrorBoundary=e.EXCEPTION_ENDPOINT=void 0;var _=requireLog(),S=requireSDKType(),k=requireStatsigMetadata();e.EXCEPTION_ENDPOINT="https://statsigapi.net/v1/sdk_exception";var E="[Statsig] UnknownError",T=function(){return _createClass3(function ErrorBoundary(e,l,_,S){_classCallCheck3(this,ErrorBoundary),this._sdkKey=e,this._options=l,this._emitter=_,this._lastSeenError=S,this._seen=new Set},[{key:"wrap",value:function(e,l){var _=this;try{var S=e;(function(e){var l=new Set,_=Object.getPrototypeOf(e);for(;_&&_!==Object.prototype;)Object.getOwnPropertyNames(_).filter(function(e){return"function"==typeof(null==_?void 0:_[e])}).forEach(function(e){return l.add(e)}),_=Object.getPrototypeOf(_);return Array.from(l)})(S).forEach(function(k){var E=S[k];"$EB"in E||(S[k]=function(){for(var S=arguments.length,T=new Array(S),M=0;M<S;M++)T[M]=arguments[M];return _._capture(l?"".concat(l,":").concat(k):k,function(){return E.apply(e,T)})},S[k].$EB=!0)})}catch(k){this._onError("eb:wrap",k)}}},{key:"logError",value:function(e,l){this._onError(e,l)}},{key:"getLastSeenErrorAndReset",value:function(){var e=this._lastSeenError;return this._lastSeenError=void 0,null!=e?e:null}},{key:"attachErrorIfNoneExists",value:function(e){this._lastSeenError||(this._lastSeenError=_resolveError(e))}},{key:"_capture",value:function(e,l){var _=this;try{var S=l();return S&&S instanceof Promise?S.catch(function(l){return _._onError(e,l)}):S}catch(k){return this._onError(e,k),null}}},{key:"_onError",value:function(T,M){var R=this;try{_.Log.warn("Caught error in ".concat(T),{error:M});l(R,void 0,void 0,_regenerator().m(function _callee9(){var l,_,R,I,D,O,L,U,B,z,G,j,H,V,W,q;return _regenerator().w(function(X){for(;;)switch(X.n){case 0:if(U=M||Error(E),B=U instanceof Error,z=B?U.name:"No Name",G=_resolveError(U),this._lastSeenError=G,!this._seen.has(z)){X.n=1;break}return X.a(2);case 1:if(this._seen.add(z),!(null===(_=null===(l=this._options)||void 0===l?void 0:l.networkConfig)||void 0===_?void 0:_.preventAllNetworkTraffic)){X.n=2;break}return null===(R=this._emitter)||void 0===R||R.call(this,{name:"error",error:M,tag:T}),X.a(2);case 2:return j=S.SDKType._get(this._sdkKey),H=k.StatsigMetadataProvider.get(),V=B?U.stack:_getDescription(U),W=Object.assign({tag:T,exception:z,info:V,statsigOptions:_getStatsigOptionLoggingCopy(this._options)},Object.assign(Object.assign({},H),{sdkType:j})),q=null!==(O=null===(D=null===(I=this._options)||void 0===I?void 0:I.networkConfig)||void 0===D?void 0:D.networkOverrideFunc)&&void 0!==O?O:fetch,X.n=3,q(e.EXCEPTION_ENDPOINT,{method:"POST",headers:{"STATSIG-API-KEY":this._sdkKey,"STATSIG-SDK-TYPE":String(j),"STATSIG-SDK-VERSION":String(H.sdkVersion),"Content-Type":"application/json"},body:JSON.stringify(W)});case 3:null===(L=this._emitter)||void 0===L||L.call(this,{name:"error",error:M,tag:T});case 4:return X.a(2)}},_callee9,this)})).then(function(){}).catch(function(){})}catch(I){}}}])}();function _resolveError(e){return e instanceof Error?e:"string"==typeof e?new Error(e):new Error("An unknown error occurred.")}function _getDescription(e){try{return JSON.stringify(e)}catch(l){return E}}function _getStatsigOptionLoggingCopy(e){if(!e)return{};var l={};return Object.keys(e).forEach(function(_){var S=_,k=e[S];switch(_typeof3(k)){case"number":case"bigint":case"boolean":l[String(S)]=k;break;case"string":k.length<50?l[String(S)]=k:l[String(S)]="set";break;case"object":"environment"===S?l.environment=k:"networkConfig"===S?l.networkConfig=k:l[String(S)]=null!=k?"set":"unset"}}),l}e.ErrorBoundary=T}(hn)),hn}var fn,pn={};var vn,gn={};var mn,yn={};var _n,bn={};function requireMemoKey(){if(_n)return bn;_n=1,Object.defineProperty(bn,"__esModule",{value:!0}),bn.createMemoKey=bn.MemoPrefix=void 0,bn.MemoPrefix={_gate:"g",_dynamicConfig:"c",_experiment:"e",_configList:"cl",_layer:"l",_paramStore:"p"};var e=new Set([]),l=new Set(["userPersistedValues"]);return bn.createMemoKey=function(_,S,k){var E="".concat(_,"|").concat(S);if(!k)return E;for(var T=0,M=Object.keys(k);T<M.length;T++){var R=M[T];if(l.has(R))return;e.has(R)?E+="|".concat(R,"=true"):E+="|".concat(R,"=").concat(k[R])}return E},bn}var Sn,wn,xn={},kn={},An={};function requireDnsTxtQuery(){if(Sn)return An;Sn=1;var e=An&&An.__awaiter||function(e,l,_,S){return new(_||(_=Promise))(function(k,E){function fulfilled(e){try{step(S.next(e))}catch(ta){E(ta)}}function rejected(e){try{step(S.throw(e))}catch(ta){E(ta)}}function step(e){var l;e.done?k(e.value):(l=e.value,l instanceof _?l:new _(function(e){e(l)})).then(fulfilled,rejected)}step((S=S.apply(e,l||[])).next())})};Object.defineProperty(An,"__esModule",{value:!0}),An._fetchTxtRecords=void 0;var l=new Uint8Array([0,0,1,0,0,1,0,0,0,0,0,0,13,102,101,97,116,117,114,101,97,115,115,101,116,115,3,111,114,103,0,0,16,0,1]),_=["i","e","d"];function _parseDnsResponse(e){var l=e.findIndex(function(l,S){return S<200&&"="===String.fromCharCode(l)&&_.includes(String.fromCharCode(e[S-1]))});if(-1===l){var S=new Error("Failed to parse TXT records from DNS");throw S.name="DnsTxtParseError",S}for(var k="",E=l-1;E<e.length;E++)k+=String.fromCharCode(e[E]);return k.split(",")}return An._fetchTxtRecords=function(_){return e(this,void 0,void 0,_regenerator().m(function _callee0(){var e,S,k,E;return _regenerator().w(function(T){for(;;)switch(T.n){case 0:return T.n=1,_("https://cloudflare-dns.com/dns-query",{method:"POST",headers:{"Content-Type":"application/dns-message",Accept:"application/dns-message"},body:l});case 1:if((e=T.v).ok){T.n=2;break}throw(S=new Error("Failed to fetch TXT records from DNS")).name="DnsTxtFetchError",S;case 2:return T.n=3,e.arrayBuffer();case 3:return k=T.v,E=new Uint8Array(k),T.a(2,_parseDnsResponse(E))}},_callee0)}))},An}function requireNetworkFallbackResolver(){if(wn)return kn;wn=1;var e=kn&&kn.__awaiter||function(e,l,_,S){return new(_||(_=Promise))(function(k,E){function fulfilled(e){try{step(S.next(e))}catch(ta){E(ta)}}function rejected(e){try{step(S.throw(e))}catch(ta){E(ta)}}function step(e){var l;e.done?k(e.value):(l=e.value,l instanceof _?l:new _(function(e){e(l)})).then(fulfilled,rejected)}step((S=S.apply(e,l||[])).next())})};Object.defineProperty(kn,"__esModule",{value:!0}),kn._isDomainFailure=kn.NetworkFallbackResolver=void 0;var l=requireDnsTxtQuery(),_=requireHashing(),S=requireLog(),k=requireStorageProvider(),E=6048e5,T=function(){return _createClass3(function NetworkFallbackResolver(e){var l;_classCallCheck3(this,NetworkFallbackResolver),this._fallbackInfo=null,this._errorBoundary=null,this._dnsQueryCooldowns={},this._networkOverrideFunc=null===(l=e.networkConfig)||void 0===l?void 0:l.networkOverrideFunc},[{key:"setErrorBoundary",value:function(e){this._errorBoundary=e}},{key:"tryBumpExpiryTime",value:function(e,l){var _,S=null===(_=this._fallbackInfo)||void 0===_?void 0:_[l.endpoint];S&&(S.expiryTime=Date.now()+E,_tryWriteFallbackInfoToCache(e,Object.assign(Object.assign({},this._fallbackInfo),_defineProperty3({},l.endpoint,S))))}},{key:"getActiveFallbackUrl",value:function(e,l){var _,E;if(null!=l.customUrl&&null!=l.fallbackUrls)return null;var T=this._fallbackInfo;null==T&&(T=null!==(_=function(e){var l=_getFallbackInfoStorageKey(e),E=k.Storage.getItem(l);if(!E)return null;try{return JSON.parse(E)}catch(_){return S.Log.error("Failed to parse FallbackInfo"),null}}(e))&&void 0!==_?_:{},this._fallbackInfo=T);var M=T[l.endpoint];return!M||Date.now()>(null!==(E=M.expiryTime)&&void 0!==E?E:0)||l.getChecksum()!==M.urlConfigChecksum?(delete T[l.endpoint],this._fallbackInfo=T,_tryWriteFallbackInfoToCache(e,this._fallbackInfo),null):M.url?M.url:null}},{key:"tryFetchUpdatedFallbackInfo",value:function(l,_,S,k){return e(this,void 0,void 0,_regenerator().m(function _callee1(){var e,E,T,M,R,I;return _regenerator().w(function(D){for(;;)switch(D.p=D.n){case 0:if(D.p=0,_isDomainFailure(S,k)){D.n=1;break}return D.a(2,!1);case 1:if(!(null==_.customUrl&&null==_.fallbackUrls)){D.n=3;break}return D.n=2,this._tryFetchFallbackUrlsFromNetwork(_);case 2:R=D.v,D.n=4;break;case 3:R=_.fallbackUrls;case 4:if(T=R,M=this._pickNewFallbackUrl(null===(e=this._fallbackInfo)||void 0===e?void 0:e[_.endpoint],T)){D.n=5;break}return D.a(2,!1);case 5:return this._updateFallbackInfoWithNewUrl(l,_,M),D.a(2,!0);case 6:return D.p=6,I=D.v,null===(E=this._errorBoundary)||void 0===E||E.logError("tryFetchUpdatedFallbackInfo",I),D.a(2,!1)}},_callee1,this,[[0,6]])}))}},{key:"_updateFallbackInfoWithNewUrl",value:function(e,l,_){var S,k,T,M,R={urlConfigChecksum:l.getChecksum(),url:_,expiryTime:Date.now()+E,previous:[]},I=l.endpoint,D=null===(S=this._fallbackInfo)||void 0===S?void 0:S[I];D&&(M=R.previous).push.apply(M,_toConsumableArray3(D.previous));R.previous.length>10&&(R.previous=[]);var O=null===(T=null===(k=this._fallbackInfo)||void 0===k?void 0:k[I])||void 0===T?void 0:T.url;null!=O&&R.previous.push(O),this._fallbackInfo=Object.assign(Object.assign({},this._fallbackInfo),_defineProperty3({},I,R)),_tryWriteFallbackInfoToCache(e,this._fallbackInfo)}},{key:"_tryFetchFallbackUrlsFromNetwork",value:function(_){return e(this,void 0,void 0,_regenerator().m(function _callee10(){var e,S,k,E,T,M,R,I,D,O,L;return _regenerator().w(function(U){for(;;)switch(U.p=U.n){case 0:if(!((S=this._dnsQueryCooldowns[_.endpoint])&&Date.now()<S)){U.n=1;break}return U.a(2,null);case 1:return this._dnsQueryCooldowns[_.endpoint]=Date.now()+144e5,k=[],U.n=2,(0,l._fetchTxtRecords)(null!==(e=this._networkOverrideFunc)&&void 0!==e?e:fetch);case 2:E=U.v,T=_extractPathFromUrl(_.defaultUrl),M=_createForOfIteratorHelper2(E),U.p=3,M.s();case 4:if((R=M.n()).done){U.n=7;break}if((I=R.value).startsWith(_.endpointDnsKey+"=")){U.n=5;break}return U.a(3,6);case 5:(D=I.split("=")).length>1&&((O=D[1]).endsWith("/")&&(O=O.slice(0,-1)),k.push("https://".concat(O).concat(T)));case 6:U.n=4;break;case 7:U.n=9;break;case 8:U.p=8,L=U.v,M.e(L);case 9:return U.p=9,M.f(),U.f(9);case 10:return U.a(2,k)}},_callee10,this,[[3,8,9,10]])}))}},{key:"_pickNewFallbackUrl",value:function(e,l){var _;if(null==l)return null;var S,k=new Set(null!==(_=null==e?void 0:e.previous)&&void 0!==_?_:[]),E=null==e?void 0:e.url,T=null,M=_createForOfIteratorHelper2(l);try{for(M.s();!(S=M.n()).done;){var R=S.value,I=R.endsWith("/")?R.slice(0,-1):R;if(!k.has(R)&&I!==E){T=I;break}}}catch(D){M.e(D)}finally{M.f()}return T}}])}();function _isDomainFailure(e,l){var _,S=null!==(_=null==e?void 0:e.toLowerCase())&&void 0!==_?_:"";return l||S.includes("uncaught exception")||S.includes("failed to fetch")||S.includes("networkerror when attempting to fetch resource")}function _getFallbackInfoStorageKey(e){return"statsig.network_fallback.".concat((0,_._DJB2)(e))}function _tryWriteFallbackInfoToCache(e,l){var _=_getFallbackInfoStorageKey(e);l&&0!==Object.keys(l).length?k.Storage.setItem(_,JSON.stringify(l)):k.Storage.removeItem(_)}function _extractPathFromUrl(e){try{return new URL(e).pathname}catch(l){return null}}return kn.NetworkFallbackResolver=T,kn._isDomainFailure=_isDomainFailure,kn}var En,Cn={};function requireSDKFlags(){if(En)return Cn;En=1,Object.defineProperty(Cn,"__esModule",{value:!0}),Cn.SDKFlags=void 0;var e={};return Cn.SDKFlags={setFlags:function(l,_){e[l]=_},get:function(l,_){var S,k;return null!==(k=null===(S=e[l])||void 0===S?void 0:S[_])&&void 0!==k&&k}},Cn}var Tn,Mn={};function requireSessionID(){return Tn||(Tn=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.StatsigSession=e.SessionID=void 0;var l=require$_StatsigGlobal(),_=requireCacheKey(),S=requireLog(),k=requireStorageProvider(),E=requireUUID(),T=18e5,M=144e5,R={};function _createSessionTimeout(e,_){return setTimeout(function(){var _,S=null===(_=(0,l._getStatsigGlobal)())||void 0===_?void 0:_.instance(e);S&&S.$emt({name:"session_expired"})},_)}function _getSessionIDStorageKey(e){return"statsig.session_id.".concat((0,_._getStorageKey)(e))}e.SessionID={get:function(l){return e.StatsigSession.get(l).data.sessionID}},e.StatsigSession={get:function(e){return null==R[e]&&(R[e]=function(e){var l=function(e){var l=_getSessionIDStorageKey(e);return(0,k._getObjectFromStorage)(l)}(e),_=Date.now();l||(l={sessionID:(0,E.getUUID)(),startTime:_,lastUpdate:_});return{data:l,sdkKey:e}}(e)),function(e){var l=Date.now(),_=e.data,R=e.sdkKey;if(L=_,U=L.lastUpdate,Date.now()-U>T||(D=_,O=D.startTime,Date.now()-O>M)){_.sessionID=(0,E.getUUID)(),_.startTime=l;var I=null===__STATSIG__||void 0===__STATSIG__?void 0:__STATSIG__.instance(R);I&&I.$emt({name:"session_expired"})}var D,O;var L,U;_.lastUpdate=l,function(e,l){var _=_getSessionIDStorageKey(l);try{(0,k._setObjectInStorage)(_,e)}catch(ta){S.Log.warn("Failed to save SessionID")}}(_,e.sdkKey),clearTimeout(e.idleTimeoutID),clearTimeout(e.ageTimeoutID);var B=l-_.startTime;return e.idleTimeoutID=_createSessionTimeout(R,T),e.ageTimeoutID=_createSessionTimeout(R,M-B),e}(R[e])},overrideInitialSessionID:function(e,l){R[l]=function(e,l){var _=Date.now();return{data:{sessionID:e,startTime:_,lastUpdate:_},sdkKey:l}}(e,l)}}}(Mn)),Mn}var Rn,In,Pn={};function requireStatsigClientEventEmitter(){return Rn||(Rn=1,Object.defineProperty(Pn,"__esModule",{value:!0}),Pn.ErrorTag=void 0,Pn.ErrorTag={NetworkError:"NetworkError"}),Pn}function requireNetworkCore(){if(In)return xn;In=1;var e=xn&&xn.__awaiter||function(e,l,_,S){return new(_||(_=Promise))(function(k,E){function fulfilled(e){try{step(S.next(e))}catch(ta){E(ta)}}function rejected(e){try{step(S.throw(e))}catch(ta){E(ta)}}function step(e){var l;e.done?k(e.value):(l=e.value,l instanceof _?l:new _(function(e){e(l)})).then(fulfilled,rejected)}step((S=S.apply(e,l||[])).next())})};Object.defineProperty(xn,"__esModule",{value:!0}),xn.NetworkCore=void 0,require$_StatsigGlobal();var l=require$_StatsigGlobal(),_=requireDiagnostics(),S=requireLog(),k=requireNetworkConfig(),E=requireNetworkFallbackResolver(),T=requireSDKFlags(),M=requireSDKType(),R=requireSafeJs(),I=requireSessionID(),D=requireStableID(),O=requireStatsigClientEventEmitter(),L=requireStatsigMetadata(),U=requireStatsigOptionsCommon(),B=requireVisibilityObserving(),z=new Set([408,500,502,503,504,522,524,599]),G=function(){return _createClass3(function NetworkCore(e,l){_classCallCheck3(this,NetworkCore),this._emitter=l,this._errorBoundary=null,this._timeout=1e4,this._netConfig={},this._options={},this._leakyBucket={},this._lastUsedInitUrl=null,e&&(this._options=e),this._options.networkConfig&&(this._netConfig=this._options.networkConfig),this._netConfig.networkTimeoutMs&&(this._timeout=this._netConfig.networkTimeoutMs),this._fallbackResolver=new E.NetworkFallbackResolver(this._options),this.setLogEventCompressionMode(this._getLogEventCompressionMode(e))},[{key:"setLogEventCompressionMode",value:function(e){this._options.logEventCompressionMode=e}},{key:"setErrorBoundary",value:function(e){this._errorBoundary=e,this._errorBoundary.wrap(this),this._errorBoundary.wrap(this._fallbackResolver),this._fallbackResolver.setErrorBoundary(e)}},{key:"isBeaconSupported",value:function(){return"undefined"!=typeof navigator&&"function"==typeof navigator.sendBeacon}},{key:"getLastUsedInitUrlAndReset",value:function(){var e=this._lastUsedInitUrl;return this._lastUsedInitUrl=null,e}},{key:"beacon",value:function(e){if(!_ensureValidSdkKey(e))return!1;var l=this._getInternalRequestArgs("POST",e),_=this._getPopulatedURL(l),S=navigator;return S.sendBeacon.bind(S)(_,l.body)}},{key:"post",value:function(l){return e(this,void 0,void 0,_regenerator().m(function _callee11(){var e;return _regenerator().w(function(_){for(;;)switch(_.n){case 0:return e=this._getInternalRequestArgs("POST",l),this._tryEncodeBody(e),_.n=1,this._tryToCompressBody(e);case 1:return _.a(2,this._sendRequest(e))}},_callee11,this)}))}},{key:"get",value:function(e){var l=this._getInternalRequestArgs("GET",e);return this._sendRequest(l)}},{key:"_sendRequest",value:function(l){return e(this,void 0,void 0,_regenerator().m(function _callee12(){var e,_,k,E,T,M,R,I,D,L,U,G,j,H,V,W,q,X,K,Y,Q,J,Z,$,ee,te=this;return _regenerator().w(function(re){for(;;)switch(re.p=re.n){case 0:if(_ensureValidSdkKey(l)){re.n=1;break}return re.a(2,null);case 1:if(!this._netConfig.preventAllNetworkTraffic){re.n=2;break}return re.a(2,null);case 2:if(T=l.method,M=l.body,R=l.retries,I=l.attempt,D=l.urlConfig.endpoint,!this._isRateLimited(D)){re.n=3;break}return S.Log.warn("Request to ".concat(D," was blocked because you are making requests too frequently.")),re.a(2,null);case 3:return L=null!=I?I:1,U=!1,G=this._getPopulatedURL(l),j=null,H=(0,B._isUnloading)(),re.p=4,V={method:T,body:M,headers:Object.assign({},l.headers),priority:l.priority,keepalive:H},_tryMarkInitStart(l,L),(W=this._leakyBucket[D])&&(W.lastRequestTime=Date.now(),this._leakyBucket[D]=W),q=null!==(e=this._netConfig.networkOverrideFunc)&&void 0!==e?e:fetch,re.n=5,Promise.race([q(G,V).finally(function(){return clearTimeout(X)}),new Promise(function(e,l){X=setTimeout(function(){U=!0,l(new Error("Timeout of ".concat(te._timeout,"ms expired.")))},te._timeout)})]);case 5:if((j=re.v).ok){re.n=7;break}return re.n=6,j.text().catch(function(){return"No Text"});case 6:throw K=re.v,(Y=new Error("NetworkError: ".concat(G," ").concat(K))).name="NetworkError",Y;case 7:return re.n=8,j.text();case 8:return Q=re.v,_tryMarkInitEnd(l,j,L,Q),this._fallbackResolver.tryBumpExpiryTime(l.sdkKey,l.urlConfig),re.a(2,{body:Q,code:j.status});case 9:return re.p=9,ee=re.v,J=_getErrorMessage(ee),Z=_didTimeout(null!=J?J:"",U),_tryMarkInitEnd(l,j,L,"",ee),re.n=10,this._fallbackResolver.tryFetchUpdatedFallbackInfo(l.sdkKey,l.urlConfig,J,Z);case 10:if(re.v&&(l.fallbackUrl=this._fallbackResolver.getActiveFallbackUrl(l.sdkKey,l.urlConfig)),R&&!(L>R)&&z.has(null!==(_=null==j?void 0:j.status)&&void 0!==_?_:500)){re.n=11;break}return null===(k=this._emitter)||void 0===k||k.call(this,{name:"error",error:ee,tag:O.ErrorTag.NetworkError,requestArgs:l}),$="A networking error occurred during ".concat(T," request to ").concat(G,"."),S.Log.error($,J,ee),null===(E=this._errorBoundary)||void 0===E||E.attachErrorIfNoneExists($),re.a(2,null);case 11:return re.n=12,_exponentialBackoff(L);case 12:return re.a(2,this._sendRequest(Object.assign(Object.assign({},l),{retries:R,attempt:L+1})))}},_callee12,this,[[4,9]])}))}},{key:"_getLogEventCompressionMode",value:function(e){var l=null==e?void 0:e.logEventCompressionMode;return l||!0!==(null==e?void 0:e.disableCompression)||(l=U.LogEventCompressionMode.Disabled),l||(l=U.LogEventCompressionMode.Enabled),l}},{key:"_isRateLimited",value:function(e){var l,_=Date.now(),S=null!==(l=this._leakyBucket[e])&&void 0!==l?l:{count:0,lastRequestTime:_},k=_-S.lastRequestTime,E=Math.floor(.05*k);return S.count=Math.max(0,S.count-E),S.count>=50||(S.count+=1,S.lastRequestTime=_,this._leakyBucket[e]=S,!1)}},{key:"_getPopulatedURL",value:function(e){var l,_=null!==(l=e.fallbackUrl)&&void 0!==l?l:e.urlConfig.getUrl();e.urlConfig.endpoint!==k.Endpoint._initialize&&e.urlConfig.endpoint!==k.Endpoint._download_config_specs||(this._lastUsedInitUrl=_);var S=Object.assign(_defineProperty3(_defineProperty3(_defineProperty3(_defineProperty3(_defineProperty3({},k.NetworkParam.SdkKey,e.sdkKey),k.NetworkParam.SdkType,M.SDKType._get(e.sdkKey)),k.NetworkParam.SdkVersion,L.SDK_VERSION),k.NetworkParam.Time,String(Date.now())),k.NetworkParam.SessionID,I.SessionID.get(e.sdkKey)),e.params),E=Object.keys(S).map(function(e){return"".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(S[e]))}).join("&");return"".concat(_).concat(E?"?".concat(E):"")}},{key:"_tryEncodeBody",value:function(e){var _,E=(0,R._getWindowSafe)(),T=e.body;if(e.isStatsigEncodable&&!this._options.disableStatsigEncoding&&"string"==typeof T&&null==(0,l._getStatsigGlobalFlag)("no-encode")&&(null==E?void 0:E.btoa))try{e.body=E.btoa(T).split("").reverse().join(""),e.params=Object.assign(Object.assign({},null!==(_=e.params)&&void 0!==_?_:{}),_defineProperty3({},k.NetworkParam.StatsigEncoded,"1"))}catch(ta){S.Log.warn("Request encoding failed for ".concat(e.urlConfig.getUrl()),ta)}}},{key:"_tryToCompressBody",value:function(l){return e(this,void 0,void 0,_regenerator().m(function _callee13(){var e,_,E,T,M,R,I,D,O,L,U,B,z,G,j;return _regenerator().w(function(H){for(;;)switch(H.p=H.n){case 0:if("string"==typeof(_=l.body)&&_allowCompression(l,this._options)){H.n=1;break}return H.a(2);case 1:H.p=1,E=(new TextEncoder).encode(_),T=new CompressionStream("gzip"),(M=T.writable.getWriter()).write(E).catch(S.Log.error),M.close().catch(S.Log.error),R=T.readable.getReader(),I=[];case 2:return H.n=3,R.read();case 3:if((D=H.v).done){H.n=4;break}I.push(D.value),H.n=2;break;case 4:for(O=I.reduce(function(e,l){return e+l.length},0),L=new Uint8Array(O),U=0,B=0,z=I;B<z.length;B++)G=z[B],L.set(G,U),U+=G.length;l.body=L,l.params=Object.assign(Object.assign({},null!==(e=l.params)&&void 0!==e?e:{}),_defineProperty3({},k.NetworkParam.IsGzipped,"1")),H.n=6;break;case 5:H.p=5,j=H.v,S.Log.warn("Request compression failed for ".concat(l.urlConfig.getUrl()),j);case 6:return H.a(2)}},_callee13,this,[[1,5]])}))}},{key:"_getInternalRequestArgs",value:function(e,l){var _=this._fallbackResolver.getActiveFallbackUrl(l.sdkKey,l.urlConfig),S=Object.assign(Object.assign({},l),{method:e,fallbackUrl:_});return"data"in l&&_populateRequestBody(S,l.data),S}}])}();xn.NetworkCore=G;var _ensureValidSdkKey=function(e){return!!e.sdkKey||(S.Log.warn("Unable to make request without an SDK key"),!1)},_populateRequestBody=function(e,l){var _=e.sdkKey,S=e.fallbackUrl,k=D.StableID.get(_),E=I.SessionID.get(_),T=M.SDKType._get(_);e.body=JSON.stringify(Object.assign(Object.assign({},l),{statsigMetadata:Object.assign(Object.assign({},L.StatsigMetadataProvider.get()),{stableID:k,sessionID:E,sdkType:T,fallbackUrl:S})}))};function _allowCompression(e,_){if(!e.isCompressable)return!1;if(null!=(0,l._getStatsigGlobalFlag)("no-compress")||"undefined"==typeof CompressionStream||"undefined"==typeof TextEncoder)return!1;var S=null!=e.urlConfig.customUrl||null!=e.urlConfig.fallbackUrls,k=!0===T.SDKFlags.get(e.sdkKey,"enable_log_event_compression");switch(_.logEventCompressionMode){case U.LogEventCompressionMode.Disabled:return!1;case U.LogEventCompressionMode.Enabled:return!(S&&!k);case U.LogEventCompressionMode.Forced:return!0;default:return!1}}function _getErrorMessage(e){return"string"==typeof e?e:e instanceof Error?"".concat(e.name,": ").concat(e.message):"Unknown Error"}function _didTimeout(e,l){return e.includes("Timeout")||l}function _tryMarkInitStart(e,l){e.urlConfig.endpoint===k.Endpoint._initialize&&_.Diagnostics._markInitNetworkReqStart(e.sdkKey,{attempt:l})}function _tryMarkInitEnd(e,l,S,E,T){e.urlConfig.endpoint===k.Endpoint._initialize&&_.Diagnostics._markInitNetworkReqEnd(e.sdkKey,_.Diagnostics._getDiagnosticsData(l,S,E,T))}function _exponentialBackoff(l){return e(this,void 0,void 0,_regenerator().m(function _callee14(){return _regenerator().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,new Promise(function(e){return setTimeout(e,Math.min(l*l*500,3e4))});case 1:return e.a(2)}},_callee14)}))}return xn}var Dn,On={};var Ln,Un={};var Fn,Nn={};var Bn,zn={};function requireStatsigClientBase(){if(Bn)return zn;Bn=1;var e=zn&&zn.__awaiter||function(e,l,_,S){return new(_||(_=Promise))(function(k,E){function fulfilled(e){try{step(S.next(e))}catch(ta){E(ta)}}function rejected(e){try{step(S.throw(e))}catch(ta){E(ta)}}function step(e){var l;e.done?k(e.value):(l=e.value,l instanceof _?l:new _(function(e){e(l)})).then(fulfilled,rejected)}step((S=S.apply(e,l||[])).next())})};Object.defineProperty(zn,"__esModule",{value:!0}),zn.StatsigClientBase=void 0,require$_StatsigGlobal();var l=require$_StatsigGlobal(),_=requireErrorBoundary(),S=requireEventLogger(),k=requireLog(),E=requireMemoKey(),T=requireSafeJs(),M=requireSessionID(),R=requireStableID(),I=requireStatsigOptionsCommon(),D=requireStorageProvider(),O=function(){return _createClass3(function StatsigClientBase(e,E,I,O){var L,U,B,z,G=this;_classCallCheck3(this,StatsigClientBase),this.loadingStatus="Uninitialized",this._initializePromise=null,this._listeners={};var j=this.$emt.bind(this);null!=(null==O?void 0:O.logLevel)&&(k.Log.level=O.logLevel),(null==O?void 0:O.disableStorage)&&D.Storage._setDisabled(!0),(null==O?void 0:O.initialSessionID)&&M.StatsigSession.overrideInitialSessionID(O.initialSessionID,e),(null==O?void 0:O.storageProvider)&&D.Storage._setProvider(O.storageProvider),(null==O?void 0:O.enableCookies)&&R.StableID._setCookiesEnabled(e,O.enableCookies),(null==O?void 0:O.disableStableID)&&R.StableID._setDisabled(e,!0),this._sdkKey=e,this._options=null!=O?O:{},this._memoCache={},this.overrideAdapter=null!==(L=null==O?void 0:O.overrideAdapter)&&void 0!==L?L:null,this._logger=new S.EventLogger(e,j,I,O),this._errorBoundary=new _.ErrorBoundary(e,O,j),this._errorBoundary.wrap(this),this._errorBoundary.wrap(E),this._errorBoundary.wrap(this._logger),I.setErrorBoundary(this._errorBoundary),this.dataAdapter=E,this.dataAdapter.attach(e,O,I),this.storageProvider=D.Storage,null===(z=null===(B=null===(U=this.overrideAdapter)||void 0===U?void 0:U.loadFromStorage)||void 0===B?void 0:B.call(U))||void 0===z||z.catch(function(e){return G._errorBoundary.logError("OA::loadFromStorage",e)}),this._primeReadyRipcord(),function(e,_){var S;if((0,T._isServerEnv)())return;var E=(0,l._getStatsigGlobal)(),M=null!==(S=E.instances)&&void 0!==S?S:{},R=_;null!=M[e]&&k.Log.warn("Creating multiple Statsig clients with the same SDK key can lead to unexpected behavior. Multi-instance support requires different SDK keys.");M[e]=R,E.firstInstance||(E.firstInstance=R);E.instances=M,__STATSIG__=E}(e,this)},[{key:"updateRuntimeOptions",value:function(e){e.loggingEnabled?(this._options.loggingEnabled=e.loggingEnabled,this._logger.setLoggingEnabled(e.loggingEnabled)):null!=e.disableLogging&&(this._options.disableLogging=e.disableLogging,this._logger.setLoggingEnabled(e.disableLogging?"disabled":"browser-only")),null!=e.disableStorage&&(this._options.disableStorage=e.disableStorage,D.Storage._setDisabled(e.disableStorage)),null!=e.enableCookies&&(this._options.enableCookies=e.enableCookies,R.StableID._setCookiesEnabled(this._sdkKey,e.enableCookies)),e.logEventCompressionMode?this._logger.setLogEventCompressionMode(e.logEventCompressionMode):e.disableCompression&&this._logger.setLogEventCompressionMode(I.LogEventCompressionMode.Disabled)}},{key:"flush",value:function(){return this._logger.flush()}},{key:"shutdown",value:function(){return e(this,void 0,void 0,_regenerator().m(function _callee15(){return _regenerator().w(function(e){for(;;)switch(e.n){case 0:return this.$emt({name:"pre_shutdown"}),this._setStatus("Uninitialized",null),this._initializePromise=null,e.n=1,this._logger.stop();case 1:return e.a(2)}},_callee15,this)}))}},{key:"on",value:function(e,l){this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].push(l)}},{key:"off",value:function(e,l){if(this._listeners[e]){var _=this._listeners[e].indexOf(l);-1!==_&&this._listeners[e].splice(_,1)}}},{key:"$on",value:function(e,l){l.__isInternal=!0,this.on(e,l)}},{key:"$emt",value:function(e){var l,_=this,barrier=function(l){try{l(e)}catch(S){if(!0===l.__isInternal)return void _._errorBoundary.logError("__emit:".concat(e.name),S);k.Log.error("An error occurred in a StatsigClientEvent listener. This is not an issue with Statsig.",e)}};this._listeners[e.name]&&this._listeners[e.name].forEach(function(e){return barrier(e)}),null===(l=this._listeners["*"])||void 0===l||l.forEach(barrier)}},{key:"_setStatus",value:function(e,l){this.loadingStatus=e,this._memoCache={},this.$emt({name:"values_updated",status:e,values:l})}},{key:"_enqueueExposure",value:function(e,l,_){!0!==(null==_?void 0:_.disableExposureLog)?this._logger.enqueue(l):this._logger.incrementNonExposureCount(e)}},{key:"_memoize",value:function(e,l){var _=this;return function(S,k){if(_._options.disableEvaluationMemoization)return l(S,k);var T=(0,E.createMemoKey)(e,S,k);return T?(T in _._memoCache||(Object.keys(_._memoCache).length>=3e3&&(_._memoCache={}),_._memoCache[T]=l(S,k)),_._memoCache[T]):l(S,k)}}}])}();return zn.StatsigClientBase=O,zn}var Gn,jn={};var Hn,Vn={};var Wn,qn={};var Xn,Kn={};var Yn,Qn,Jn={};function requireSrc$3(){return Qn||(Qn=1,function(e){var l=yr&&yr.__createBinding||(Object.create?function(e,l,_,S){void 0===S&&(S=_);var k=Object.getOwnPropertyDescriptor(l,_);k&&!("get"in k?!l.__esModule:k.writable||k.configurable)||(k={enumerable:!0,get:function(){return l[_]}}),Object.defineProperty(e,S,k)}:function(e,l,_,S){void 0===S&&(S=_),e[S]=l[_]}),_=yr&&yr.__exportStar||function(e,_){for(var S in e)"default"===S||Object.prototype.hasOwnProperty.call(_,S)||l(_,e,S)};Object.defineProperty(e,"__esModule",{value:!0}),e.Storage=e.Log=e.EventLogger=e.Diagnostics=void 0,require$_StatsigGlobal();var S=require$_StatsigGlobal(),k=requireDiagnostics();Object.defineProperty(e,"Diagnostics",{enumerable:!0,get:function(){return k.Diagnostics}});var E=requireEventLogger();Object.defineProperty(e,"EventLogger",{enumerable:!0,get:function(){return E.EventLogger}});var T=requireLog();Object.defineProperty(e,"Log",{enumerable:!0,get:function(){return T.Log}});var M=requireStatsigMetadata(),R=requireStorageProvider();Object.defineProperty(e,"Storage",{enumerable:!0,get:function(){return R.Storage}}),_(require$_StatsigGlobal(),e),_(requireCacheKey(),e),_((Xr||(Xr=1,Object.defineProperty(Kr,"__esModule",{value:!0})),Kr),e),_(requireDataAdapterCore(),e),_(requireDiagnostics(),e),_((sn||(sn=1,Object.defineProperty(un,"__esModule",{value:!0})),un),e),_(requireErrorBoundary(),e),_((fn||(fn=1,Object.defineProperty(pn,"__esModule",{value:!0})),pn),e),_((vn||(vn=1,Object.defineProperty(gn,"__esModule",{value:!0})),gn),e),_(requireHashing(),e),_((mn||(mn=1,Object.defineProperty(yn,"__esModule",{value:!0})),yn),e),_(requireLog(),e),_(requireMemoKey(),e),_(requireNetworkConfig(),e),_(requireNetworkCore(),e),_((Dn||(Dn=1,Object.defineProperty(On,"__esModule",{value:!0})),On),e),_((Ln||(Ln=1,Object.defineProperty(Un,"__esModule",{value:!0})),Un),e),_(requireSafeJs(),e),_(requireSDKType(),e),_(requireSessionID(),e),_((Fn||(Fn=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e._fastApproxSizeOf=void 0,e._fastApproxSizeOf=function(l,_){for(var S=0,k=Object.keys(l),E=0;E<k.length;E++){var T=k[E],M=l[T];if(S+=T.length,"object"===_typeof3(M)&&null!==M?S+=(0,e._fastApproxSizeOf)(M,_)+2:S+=String(M).length+1,S>=_)return S}return S}}(Nn)),Nn),e),_(requireStableID(),e),_(requireStatsigClientBase(),e),_(requireStatsigClientEventEmitter(),e),_((Gn||(Gn=1,Object.defineProperty(jn,"__esModule",{value:!0}),jn.DataAdapterCachePrefix=void 0,jn.DataAdapterCachePrefix="statsig.cached"),jn),e),_(requireStatsigEvent(),e),_(requireStatsigMetadata(),e),_(requireStatsigOptionsCommon(),e),_((Hn||(Hn=1,Object.defineProperty(Vn,"__esModule",{value:!0})),Vn),e),_(function(){if(Wn)return qn;Wn=1,Object.defineProperty(qn,"__esModule",{value:!0}),qn._makeTypedGet=qn._mergeOverride=qn._makeLayer=qn._makeExperiment=qn._makeDynamicConfig=qn._makeFeatureGate=void 0;var e=requireLog(),l=requireTypingUtils();function _makeEvaluation(e,l,_,S){var k;return{name:e,details:l,ruleID:null!==(k=null==_?void 0:_.rule_id)&&void 0!==k?k:"",__evaluation:_,value:S}}function _makeDynamicConfig(e,l,_){var S,k=null!==(S=null==_?void 0:_.value)&&void 0!==S?S:{};return Object.assign(Object.assign({},_makeEvaluation(e,l,_,k)),{get:_makeTypedGet(e,null==_?void 0:_.value)})}function _makeTypedGet(_,S,k){return function(E,T){var M,R=null!==(M=null==S?void 0:S[E])&&void 0!==M?M:null;return null==R?null!=T?T:null:null==T||(0,l._isTypeMatch)(R,T)?(null==k||k(E),R):(e.Log.warn("Parameter type mismatch. '".concat(_,".").concat(E,"' was found to be type '").concat(_typeof3(R),"' but fallback/return type is '").concat(_typeof3(T),"'. See https://docs.statsig.com/client/javascript-sdk/#typed-getters")),null!=T?T:null)}}return qn._makeFeatureGate=function(e,l,_){var S;return Object.assign(Object.assign({},_makeEvaluation(e,l,_,!0===(null==_?void 0:_.value))),{idType:null!==(S=null==_?void 0:_.id_type)&&void 0!==S?S:null})},qn._makeDynamicConfig=_makeDynamicConfig,qn._makeExperiment=function(e,l,_){var S,k=_makeDynamicConfig(e,l,_);return Object.assign(Object.assign({},k),{groupName:null!==(S=null==_?void 0:_.group_name)&&void 0!==S?S:null})},qn._makeLayer=function(e,l,_,S){var k,E;return Object.assign(Object.assign({},_makeEvaluation(e,l,_,void 0)),{get:_makeTypedGet(e,null==_?void 0:_.value,S),groupName:null!==(k=null==_?void 0:_.group_name)&&void 0!==k?k:null,__value:null!==(E=null==_?void 0:_.value)&&void 0!==E?E:{}})},qn._mergeOverride=function(e,l,_,S){return Object.assign(Object.assign(Object.assign({},e),l),{get:_makeTypedGet(e.name,_,S)})},qn._makeTypedGet=_makeTypedGet,qn}(),e),_((Xn||(Xn=1,Object.defineProperty(Kn,"__esModule",{value:!0})),Kn),e),_(requireStatsigUser(),e),_(requireStorageProvider(),e),_(requireTypedJsonParse(),e),_(requireTypingUtils(),e),_(requireUrlConfiguration(),e),_(requireUUID(),e),_(requireVisibilityObserving(),e),_((Yn||(Yn=1,Object.defineProperty(Jn,"__esModule",{value:!0}),Jn.UPDATE_DETAIL_ERROR_MESSAGES=Jn.createUpdateDetails=void 0,Jn.createUpdateDetails=function(e,l,_,S,k,E){return{duration:_,source:l,success:e,error:S,sourceUrl:k,warnings:E}},Jn.UPDATE_DETAIL_ERROR_MESSAGES={NO_NETWORK_DATA:"No data was returned from the network. This may be due to a network timeout if a timeout value was specified in the options or ad blocker error."}),Jn),e),_(requireSDKFlags(),e),Object.assign((0,S._getStatsigGlobal)(),{Log:T.Log,SDK_VERSION:M.SDK_VERSION})}(yr)),yr}var Zn,$n={},ei={},ti={};var ri,ni,ii={},ai={};function requireEvaluationResponseDeltas(){if(ri)return ai;ri=1,Object.defineProperty(ai,"__esModule",{value:!0}),ai._resolveDeltasResponse=void 0;var e=requireSrc$3();function _deleteEntriesInRecord(e,l){null==e||e.forEach(function(e){delete l[e]})}return ai._resolveDeltasResponse=function(l,_){var S=(0,e._typedJsonParse)(_,"checksum","DeltasEvaluationResponse");if(!S)return{hadBadDeltaChecksum:!0};var k=function(e){var l=e;return _deleteEntriesInRecord(e.deleted_gates,l.feature_gates),delete l.deleted_gates,_deleteEntriesInRecord(e.deleted_configs,l.dynamic_configs),delete l.deleted_configs,_deleteEntriesInRecord(e.deleted_layers,l.layer_configs),delete l.deleted_layers,l}(function(e,l){return Object.assign(Object.assign(Object.assign({},e),l),{feature_gates:Object.assign(Object.assign({},e.feature_gates),l.feature_gates),layer_configs:Object.assign(Object.assign({},e.layer_configs),l.layer_configs),dynamic_configs:Object.assign(Object.assign({},e.dynamic_configs),l.dynamic_configs)})}(l,S)),E=(0,e._DJB2Object)({feature_gates:k.feature_gates,dynamic_configs:k.dynamic_configs,layer_configs:k.layer_configs},2);return E===S.checksumV2?JSON.stringify(k):{hadBadDeltaChecksum:!0,badChecksum:E,badMergedConfigs:k,badFullResponse:S.deltas_full_response}},ai}function requireNetwork(){if(ni)return ii;ni=1;var e=ii&&ii.__awaiter||function(e,l,_,S){return new(_||(_=Promise))(function(k,E){function fulfilled(e){try{step(S.next(e))}catch(ta){E(ta)}}function rejected(e){try{step(S.throw(e))}catch(ta){E(ta)}}function step(e){var l;e.done?k(e.value):(l=e.value,l instanceof _?l:new _(function(e){e(l)})).then(fulfilled,rejected)}step((S=S.apply(e,l||[])).next())})};Object.defineProperty(ii,"__esModule",{value:!0});var l=requireSrc$3(),_=requireEvaluationResponseDeltas(),S=function(S){function StatsigNetwork(e,_){var S;_classCallCheck3(this,StatsigNetwork),S=_callSuper(this,StatsigNetwork,[e,_]);var k=null==e?void 0:e.networkConfig;return S._option=e,S._initializeUrlConfig=new l.UrlConfiguration(l.Endpoint._initialize,null==k?void 0:k.initializeUrl,null==k?void 0:k.api,null==k?void 0:k.initializeFallbackUrls),S}return _inherits(StatsigNetwork,S),_createClass3(StatsigNetwork,[{key:"fetchEvaluations",value:function(_,S,k,E,T){return e(this,void 0,void 0,_regenerator().m(function _callee16(){var e,M,R,I,D,O,L,U,B;return _regenerator().w(function(z){for(;;)if(0===z.n)return L=S?(0,l._typedJsonParse)(S,"has_updates","InitializeResponse"):null,U={user:E,hash:null!==(R=null===(M=null===(e=this._option)||void 0===e?void 0:e.networkConfig)||void 0===M?void 0:M.initializeHashAlgorithm)&&void 0!==R?R:"djb2",deltasResponseRequested:!1,full_checksum:null},(null==L?void 0:L.has_updates)&&(B=(null==L?void 0:L.hash_used)!==(null!==(O=null===(D=null===(I=this._option)||void 0===I?void 0:I.networkConfig)||void 0===D?void 0:D.initializeHashAlgorithm)&&void 0!==O?O:"djb2"),U=Object.assign(Object.assign({},U),{sinceTime:T&&!B?L.time:0,previousDerivedFields:"derived_fields"in L&&T?L.derived_fields:{},deltasResponseRequested:!0,full_checksum:L.full_checksum,partialUserMatchSinceTime:B?0:L.time})),z.a(2,this._fetchEvaluations(_,L,U,k))},_callee16,this)}))}},{key:"_fetchEvaluations",value:function(l,S,k,E){return e(this,void 0,void 0,_regenerator().m(function _callee17(){var e,T,M,R;return _regenerator().w(function(I){for(;;)switch(I.n){case 0:return I.n=1,this.post({sdkKey:l,urlConfig:this._initializeUrlConfig,data:k,retries:2,isStatsigEncodable:!0,priority:E});case 1:if(204!==(null==(M=I.v)?void 0:M.code)){I.n=2;break}return I.a(2,'{"has_updates": false}');case 2:if(200===(null==M?void 0:M.code)){I.n=3;break}return I.a(2,null!==(e=null==M?void 0:M.body)&&void 0!==e?e:null);case 3:if(!0===(null==S?void 0:S.has_updates)&&!0===(null===(T=M.body)||void 0===T?void 0:T.includes('"is_delta":true'))&&!0===k.deltasResponseRequested){I.n=4;break}return I.a(2,M.body);case 4:if("string"!=typeof(R=(0,_._resolveDeltasResponse)(S,M.body))){I.n=5;break}return I.a(2,R);case 5:return I.a(2,this._fetchEvaluations(l,S,Object.assign(Object.assign(Object.assign({},k),R),{deltasResponseRequested:!1}),E))}},_callee17,this)}))}}])}(l.NetworkCore);return ii.default=S,ii}var oi,si={};function requireParamStoreGetterFactory(){if(oi)return si;oi=1,Object.defineProperty(si,"__esModule",{value:!0}),si._makeParamStoreGetter=void 0;var e=requireSrc$3(),l={disableExposureLog:!0};function _shouldLogExposure(e){return null==e||!1===e.disableExposureLog}function _shouldReturnFallback(l,_){return null!=_&&!(0,e._isTypeMatch)(l,_)}return si._makeParamStoreGetter=function(_,S,k){return function(E,T){if(null==S)return T;var M=S[E];if(null==M||null!=T&&(0,e._typeOf)(T)!==M.param_type)return T;switch(M.ref_type){case"static":return function(e){return e.value}(M);case"gate":return function(e,_,S){return e.getFeatureGate(_.gate_name,_shouldLogExposure(S)?void 0:l).value?_.pass_value:_.fail_value}(_,M,k);case"dynamic_config":return function(e,_,S,k){var E=e.getDynamicConfig(_.config_name,_shouldLogExposure(k)?void 0:l).get(_.param_name);return _shouldReturnFallback(E,S)?S:E}(_,M,T,k);case"experiment":return function(e,_,S,k){var E=e.getExperiment(_.experiment_name,_shouldLogExposure(k)?void 0:l).get(_.param_name);return _shouldReturnFallback(E,S)?S:E}(_,M,T,k);case"layer":return function(e,_,S,k){var E=e.getLayer(_.layer_name,_shouldLogExposure(k)?void 0:l).get(_.param_name);return _shouldReturnFallback(E,S)?S:E}(_,M,T,k);default:return T}}},si}var ui,li,ci,hi={};function requireStatsigEvaluationsDataAdapter(){if(ui)return hi;ui=1;var e=hi&&hi.__awaiter||function(e,l,_,S){return new(_||(_=Promise))(function(k,E){function fulfilled(e){try{step(S.next(e))}catch(ta){E(ta)}}function rejected(e){try{step(S.throw(e))}catch(ta){E(ta)}}function step(e){var l;e.done?k(e.value):(l=e.value,l instanceof _?l:new _(function(e){e(l)})).then(fulfilled,rejected)}step((S=S.apply(e,l||[])).next())})};Object.defineProperty(hi,"__esModule",{value:!0}),hi.StatsigEvaluationsDataAdapter=void 0;var l=requireSrc$3(),_=requireNetwork(),S=function(S){function StatsigEvaluationsDataAdapter(){var e;return _classCallCheck3(this,StatsigEvaluationsDataAdapter),(e=_callSuper(this,StatsigEvaluationsDataAdapter,["EvaluationsDataAdapter","evaluations"]))._network=null,e._options=null,e}return _inherits(StatsigEvaluationsDataAdapter,S),_createClass3(StatsigEvaluationsDataAdapter,[{key:"attach",value:function(e,l,S){_superPropGet(StatsigEvaluationsDataAdapter,"attach",this,3)([e,l,S]),null!==S&&S instanceof _.default?this._network=S:this._network=new _.default(null!=l?l:{})}},{key:"getDataAsync",value:function(e,_,S){return this._getDataAsyncImpl(e,(0,l._normalizeUser)(_,this._options),S)}},{key:"prefetchData",value:function(e,l){return this._prefetchDataImpl(e,l)}},{key:"setData",value:function(e){var _=(0,l._typedJsonParse)(e,"has_updates","data");_&&"user"in _?_superPropGet(StatsigEvaluationsDataAdapter,"setData",this,3)([e,_.user]):l.Log.error("StatsigUser not found. You may be using an older server SDK version. Please upgrade your SDK or use setDataLegacy.")}},{key:"setDataLegacy",value:function(e,l){_superPropGet(StatsigEvaluationsDataAdapter,"setData",this,3)([e,l])}},{key:"_fetchFromNetwork",value:function(l,_,S,k){return e(this,void 0,void 0,_regenerator().m(function _callee18(){var e,E;return _regenerator().w(function(T){for(;;)switch(T.n){case 0:return T.n=1,null===(e=this._network)||void 0===e?void 0:e.fetchEvaluations(this._getSdkKey(),l,null==S?void 0:S.priority,_,k);case 1:return E=T.v,T.a(2,null!=E?E:null)}},_callee18,this)}))}},{key:"_getCacheKey",value:function(e){var _,S=(0,l._getStorageKey)(this._getSdkKey(),e,null===(_=this._options)||void 0===_?void 0:_.customUserCacheKeyFunc);return"".concat(l.DataAdapterCachePrefix,".").concat(this._cacheSuffix,".").concat(S)}},{key:"_isCachedResultValidFor204",value:function(e,_){return null!=e.fullUserHash&&e.fullUserHash===(0,l._getFullUserHash)(_)}}])}(l.DataAdapterCore);return hi.StatsigEvaluationsDataAdapter=S,hi}function requireStatsigClient(){if(li)return ei;li=1;var e=ei&&ei.__awaiter||function(e,l,_,S){return new(_||(_=Promise))(function(k,E){function fulfilled(e){try{step(S.next(e))}catch(ta){E(ta)}}function rejected(e){try{step(S.throw(e))}catch(ta){E(ta)}}function step(e){var l;e.done?k(e.value):(l=e.value,l instanceof _?l:new _(function(e){e(l)})).then(fulfilled,rejected)}step((S=S.apply(e,l||[])).next())})};Object.defineProperty(ei,"__esModule",{value:!0});var l=requireSrc$3(),_=function(){if(Zn)return ti;Zn=1,Object.defineProperty(ti,"__esModule",{value:!0});var e=requireSrc$3(),l=function(){return _createClass3(function EvaluationStore(e){_classCallCheck3(this,EvaluationStore),this._sdkKey=e,this._rawValues=null,this._values=null,this._source="Uninitialized",this._lcut=0,this._receivedAt=0,this._bootstrapMetadata=null,this._warnings=new Set},[{key:"reset",value:function(){this._values=null,this._rawValues=null,this._source="Loading",this._lcut=0,this._receivedAt=0,this._bootstrapMetadata=null,this._warnings.clear()}},{key:"finalize",value:function(){this._values||(this._source="NoValues")}},{key:"getValues",value:function(){return this._rawValues?(0,e._typedJsonParse)(this._rawValues,"has_updates","EvaluationStoreValues"):null}},{key:"setValues",value:function(l,_){var S,k;if(!l)return!1;var E=(0,e._typedJsonParse)(l.data,"has_updates","EvaluationResponse");return null!=E&&(this._source=l.source,!0!==(null==E?void 0:E.has_updates)||(null!==(S=E.time)&&void 0!==S?S:0)<this._lcut||(this._rawValues=l.data,this._lcut=E.time,this._receivedAt=l.receivedAt,this._values=E,this._bootstrapMetadata=this._extractBootstrapMetadata(l.source,E),l.source&&E.user&&this._setWarningState(_,E),e.SDKFlags.setFlags(this._sdkKey,null!==(k=E.sdk_flags)&&void 0!==k?k:{})),!0)}},{key:"getWarnings",value:function(){if(0!==this._warnings.size)return Array.from(this._warnings)}},{key:"getGate",value:function(e){var l;return this._getDetailedStoreResult(null===(l=this._values)||void 0===l?void 0:l.feature_gates,e)}},{key:"getConfig",value:function(e){var l;return this._getDetailedStoreResult(null===(l=this._values)||void 0===l?void 0:l.dynamic_configs,e)}},{key:"getConfigList",value:function(){var e;return(null===(e=this._values)||void 0===e?void 0:e.dynamic_configs)?Object.values(this._values.dynamic_configs).map(function(e){return e.name}):[]}},{key:"getLayer",value:function(e){var l;return this._getDetailedStoreResult(null===(l=this._values)||void 0===l?void 0:l.layer_configs,e)}},{key:"getParamStore",value:function(e){var l;return this._getDetailedStoreResult(null===(l=this._values)||void 0===l?void 0:l.param_stores,e)}},{key:"getSource",value:function(){return this._source}},{key:"getExposureMapping",value:function(){var e;return null===(e=this._values)||void 0===e?void 0:e.exposures}},{key:"_extractBootstrapMetadata",value:function(e,l){if("Bootstrap"!==e)return null;var _={};return l.user&&(_.user=l.user),l.sdkInfo&&(_.generatorSDKInfo=l.sdkInfo),_.lcut=l.time,_}},{key:"_getDetailedStoreResult",value:function(l,_){var S=null;return l&&(S=l[_]?l[_]:l[(0,e._DJB2)(_)]),{result:S,details:this._getDetails(null==S)}}},{key:"_setWarningState",value:function(l,_){var S,k,E=e.StableID.get(this._sdkKey);if((null===(S=l.customIDs)||void 0===S?void 0:S.stableID)===E||!(null===(k=l.customIDs)||void 0===k?void 0:k.stableID)&&!E){if("user"in _){var T=_.user,M=Object.assign(Object.assign({},l),{analyticsOnlyMetadata:void 0,privateAttributes:void 0});(0,e._getFullUserHash)(M)!==(0,e._getFullUserHash)(T)&&this._warnings.add("PartialUserMatch")}}else this._warnings.add("StableIDMismatch")}},{key:"getCurrentSourceDetails",value:function(){if("Uninitialized"===this._source||"NoValues"===this._source)return{reason:this._source};var e={reason:this._source,lcut:this._lcut,receivedAt:this._receivedAt};return this._warnings.size>0&&(e.warnings=Array.from(this._warnings)),e}},{key:"_getDetails",value:function(e){var l,_,S=this.getCurrentSourceDetails(),k=S.reason,E=null!==(l=S.warnings)&&void 0!==l?l:[];if("Bootstrap"===this._source&&E.length>0&&(k+=E[0]),"Uninitialized"!==k&&"NoValues"!==k){var T=e?"Unrecognized":"Recognized";k="".concat(k,":").concat(T)}var M="Bootstrap"===this._source&&null!==(_=this._bootstrapMetadata)&&void 0!==_?_:void 0;return M&&(S.bootstrapMetadata=M),Object.assign(Object.assign({},S),{reason:k})}}])}();return ti.default=l,ti}(),S=requireNetwork(),k=requireParamStoreGetterFactory(),E=requireStatsigEvaluationsDataAdapter(),T=function(T){function StatsigClient(e,k){var T,M,R,I=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;_classCallCheck3(this,StatsigClient),l.SDKType._setClientType(e,"javascript-client");var D=new S.default(I,function(e){T.$emt(e)});(T=_callSuper(this,StatsigClient,[e,null!==(M=null==I?void 0:I.dataAdapter)&&void 0!==M?M:new E.StatsigEvaluationsDataAdapter,D,I]))._possibleFirstTouchMetadata={},T.getFeatureGate=T._memoize(l.MemoPrefix._gate,T._getFeatureGateImpl.bind(T)),T.getDynamicConfig=T._memoize(l.MemoPrefix._dynamicConfig,T._getDynamicConfigImpl.bind(T)),T.getExperiment=T._memoize(l.MemoPrefix._experiment,T._getExperimentImpl.bind(T)),T.getConfigList=T._memoize(l.MemoPrefix._configList,T._getConfigListImpl.bind(T)),T.getLayer=T._memoize(l.MemoPrefix._layer,T._getLayerImpl.bind(T)),T.getParameterStore=T._memoize(l.MemoPrefix._paramStore,T._getParameterStoreImpl.bind(T)),T._store=new _.default(e),T._network=D,T._user=T._configureUser(k,I),T._sdkInstanceID=(0,l.getUUID)();var O,L=_createForOfIteratorHelper2(null!==(R=null==I?void 0:I.plugins)&&void 0!==R?R:[]);try{for(L.s();!(O=L.n()).done;){O.value.bind(T)}}catch(U){L.e(U)}finally{L.f()}return T}return _inherits(StatsigClient,T),_createClass3(StatsigClient,[{key:"initializeSync",value:function(e){var _;return"Uninitialized"!==this.loadingStatus?(0,l.createUpdateDetails)(!0,this._store.getSource(),-1,null,null,["MultipleInitializations"].concat(_toConsumableArray3(null!==(_=this._store.getWarnings())&&void 0!==_?_:[]))):(this._logger.start(),this.updateUserSync(this._user,e))}},{key:"initializeAsync",value:function(l){return e(this,void 0,void 0,_regenerator().m(function _callee19(){return _regenerator().w(function(e){for(;;)switch(e.n){case 0:if(!this._initializePromise){e.n=1;break}return e.a(2,this._initializePromise);case 1:return this._initializePromise=this._initializeAsyncImpl(l),e.a(2,this._initializePromise)}},_callee19,this)}))}},{key:"updateUserSync",value:function(e,l){var _=performance.now();try{return this._updateUserSyncImpl(e,l,_)}catch(ta){var S=ta instanceof Error?ta:new Error(String(ta));return this._createErrorUpdateDetails(S,_)}}},{key:"_updateUserSyncImpl",value:function(e,_,S){var k,E=_toConsumableArray3(null!==(k=this._store.getWarnings())&&void 0!==k?k:[]);this._resetForUser(e);var T=this.dataAdapter.getDataSync(this._user);null==T&&E.push("NoCachedValues"),this._store.setValues(T,this._user),this._finalizeUpdate(T);var M=null==_?void 0:_.disableBackgroundCacheRefresh;return!0===M||null==M&&"Bootstrap"===(null==T?void 0:T.source)||this._runPostUpdate(null!=T?T:null,this._user),(0,l.createUpdateDetails)(!0,this._store.getSource(),performance.now()-S,this._errorBoundary.getLastSeenErrorAndReset(),this._network.getLastUsedInitUrlAndReset(),E)}},{key:"updateUserAsync",value:function(l,_){return e(this,void 0,void 0,_regenerator().m(function _callee20(){var e,S,k;return _regenerator().w(function(E){for(;;)switch(E.p=E.n){case 0:return e=performance.now(),E.p=1,E.n=2,this._updateUserAsyncImpl(l,_);case 2:return E.a(2,E.v);case 3:return E.p=3,k=E.v,S=k instanceof Error?k:new Error(String(k)),E.a(2,this._createErrorUpdateDetails(S,e))}},_callee20,this,[[1,3]])}))}},{key:"_updateUserAsyncImpl",value:function(_,S){return e(this,void 0,void 0,_regenerator().m(function _callee21(){var e,k,E,T;return _regenerator().w(function(M){for(;;)switch(M.n){case 0:return this._resetForUser(_),e=this._user,l.Diagnostics._markInitOverallStart(this._sdkKey),k=this.dataAdapter.getDataSync(e),this._store.setValues(k,this._user),this._setStatus("Loading",k),M.n=1,this.dataAdapter.getDataAsync(k,e,S);case 1:if(k=M.v,e===this._user){M.n=2;break}return M.a(2,(0,l.createUpdateDetails)(!1,this._store.getSource(),-1,new Error("User changed during update"),this._network.getLastUsedInitUrlAndReset()));case 2:return E=!1,null!=k&&(l.Diagnostics._markInitProcessStart(this._sdkKey),E=this._store.setValues(k,this._user),l.Diagnostics._markInitProcessEnd(this._sdkKey,{success:E})),this._finalizeUpdate(k),E||(this._errorBoundary.attachErrorIfNoneExists(l.UPDATE_DETAIL_ERROR_MESSAGES.NO_NETWORK_DATA),this.$emt({name:"initialization_failure"})),l.Diagnostics._markInitOverallEnd(this._sdkKey,E,this._store.getCurrentSourceDetails()),T=l.Diagnostics._enqueueDiagnosticsEvent(this._user,this._logger,this._sdkKey,this._options),M.a(2,(0,l.createUpdateDetails)(E,this._store.getSource(),T,this._errorBoundary.getLastSeenErrorAndReset(),this._network.getLastUsedInitUrlAndReset(),this._store.getWarnings()))}},_callee21,this)}))}},{key:"getContext",value:function(){return{sdkKey:this._sdkKey,options:this._options,values:this._store.getValues(),user:JSON.parse(JSON.stringify(this._user)),errorBoundary:this._errorBoundary,session:l.StatsigSession.get(this._sdkKey),stableID:l.StableID.get(this._sdkKey),sdkInstanceID:this._sdkInstanceID}}},{key:"checkGate",value:function(e,l){return this.getFeatureGate(e,l).value}},{key:"logEvent",value:function(e,l,_){var S="string"==typeof e?{eventName:e,value:l,metadata:_}:e;this.$emt({name:"log_event_called",event:S}),this._logger.enqueue(Object.assign(Object.assign({},S),{user:this._user,time:Date.now()}))}},{key:"updateUserWithAnalyticsOnlyMetadata",value:function(e){this._user=this._configureUser(Object.assign(Object.assign({},this._user),{analyticsOnlyMetadata:e}),this._options)}},{key:"_primeReadyRipcord",value:function(){var e=this;this.$on("error",function(){"Loading"===e.loadingStatus&&e._finalizeUpdate(null)})}},{key:"_initializeAsyncImpl",value:function(_){return e(this,void 0,void 0,_regenerator().m(function _callee22(){return _regenerator().w(function(e){for(;;)switch(e.n){case 0:if(l.Storage.isReady()){e.n=1;break}return e.n=1,l.Storage.isReadyResolver();case 1:return this._logger.start(),e.a(2,this.updateUserAsync(this._user,_))}},_callee22,this)}))}},{key:"_createErrorUpdateDetails",value:function(e,_){var S;return(0,l.createUpdateDetails)(!1,this._store.getSource(),performance.now()-_,e,null,_toConsumableArray3(null!==(S=this._store.getWarnings())&&void 0!==S?S:[]))}},{key:"_finalizeUpdate",value:function(e){this._store.finalize(),this._setStatus("Ready",e)}},{key:"_runPostUpdate",value:function(e,_){this.dataAdapter.getDataAsync(e,_,{priority:"low"}).catch(function(e){l.Log.error("An error occurred after update.",e)})}},{key:"_resetForUser",value:function(e){this._logger.reset(),this._store.reset(),this._user=this._configureUser(e,this._options)}},{key:"_configureUser",value:function(e,_){var S,k,E,T=this,M=(0,l._normalizeUser)(e,_),R=null===(S=M.customIDs)||void 0===S?void 0:S.stableID;if(R){var I=null===(E=(k=this.storageProvider).isReadyResolver)||void 0===E?void 0:E.call(k);I?I.then(function(){return l.StableID.setOverride(R,T._sdkKey)},function(){return l.StableID.setOverride(R,T._sdkKey)}):l.StableID.setOverride(R,this._sdkKey)}return Object.keys(this._possibleFirstTouchMetadata).length>0&&(M.analyticsOnlyMetadata=Object.assign(Object.assign({},M.analyticsOnlyMetadata),this._possibleFirstTouchMetadata)),M}},{key:"_getFeatureGateImpl",value:function(e,_){var S,k,E=this._store.getGate(e),T=E.result,M=E.details,R=(0,l._makeFeatureGate)(e,M,T),I=null===(k=null===(S=this.overrideAdapter)||void 0===S?void 0:S.getGateOverride)||void 0===k?void 0:k.call(S,R,this._user,_),D=null!=I?I:R;return this._enqueueExposure(e,(0,l._createGateExposure)(this._user,D,this._store.getExposureMapping()),_),this.$emt({name:"gate_evaluation",gate:D}),D}},{key:"_getDynamicConfigImpl",value:function(e,_){var S,k,E=this._store.getConfig(e),T=E.result,M=E.details,R=(0,l._makeDynamicConfig)(e,M,T),I=null===(k=null===(S=this.overrideAdapter)||void 0===S?void 0:S.getDynamicConfigOverride)||void 0===k?void 0:k.call(S,R,this._user,_),D=null!=I?I:R;return this._enqueueExposure(e,(0,l._createConfigExposure)(this._user,D,this._store.getExposureMapping()),_),this.$emt({name:"dynamic_config_evaluation",dynamicConfig:D}),D}},{key:"_getExperimentImpl",value:function(e,_){var S,k,E,T,M=this._store.getConfig(e),R=M.result,I=M.details,D=(0,l._makeExperiment)(e,I,R);null!=D.__evaluation&&(D.__evaluation.secondary_exposures=(0,l._mapExposures)(null!==(k=null===(S=D.__evaluation)||void 0===S?void 0:S.secondary_exposures)&&void 0!==k?k:[],this._store.getExposureMapping()));var O=null===(T=null===(E=this.overrideAdapter)||void 0===E?void 0:E.getExperimentOverride)||void 0===T?void 0:T.call(E,D,this._user,_),L=null!=O?O:D;return this._enqueueExposure(e,(0,l._createConfigExposure)(this._user,L,this._store.getExposureMapping()),_),this.$emt({name:"experiment_evaluation",experiment:L}),L}},{key:"_getConfigListImpl",value:function(){return this._store.getConfigList()}},{key:"_getLayerImpl",value:function(e,_){var S,k,E,T=this,M=this._store.getLayer(e),R=M.result,I=M.details,D=(0,l._makeLayer)(e,I,R),O=null===(k=null===(S=this.overrideAdapter)||void 0===S?void 0:S.getLayerOverride)||void 0===k?void 0:k.call(S,D,this._user,_);(null==_?void 0:_.disableExposureLog)&&this._logger.incrementNonExposureCount(e);var L=(0,l._mergeOverride)(D,O,null!==(E=null==O?void 0:O.__value)&&void 0!==E?E:D.__value,function(S){(null==_?void 0:_.disableExposureLog)||T._enqueueExposure(e,(0,l._createLayerParameterExposure)(T._user,L,S,T._store.getExposureMapping()),_)});return this.$emt({name:"layer_evaluation",layer:L}),L}},{key:"_getParameterStoreImpl",value:function(e,l){var _,S,E=this._store.getParamStore(e),T=E.result,M=E.details;this._logger.incrementNonExposureCount(e);var R={name:e,details:M,__configuration:T,get:(0,k._makeParamStoreGetter)(this,T,l)},I=null===(S=null===(_=this.overrideAdapter)||void 0===_?void 0:_.getParamStoreOverride)||void 0===S?void 0:S.call(_,R,l);return null!=I&&(R.__configuration=I.config,R.details=I.details,R.get=(0,k._makeParamStoreGetter)(this,I.config,l)),R}}],[{key:"instance",value:function(e){var _=(0,l._getStatsigGlobal)().instance(e);return _ instanceof StatsigClient?_:(l.Log.warn((0,l._isServerEnv)()?"StatsigClient.instance is not supported in server environments":"Unable to find StatsigClient instance"),new StatsigClient(null!=e?e:"",{}))}}])}(l.StatsigClientBase);return ei.default=T,ei}function requireSrc$2(){return ci||(ci=1,function(e){var l=$n&&$n.__createBinding||(Object.create?function(e,l,_,S){void 0===S&&(S=_);var k=Object.getOwnPropertyDescriptor(l,_);k&&!("get"in k?!l.__esModule:k.writable||k.configurable)||(k={enumerable:!0,get:function(){return l[_]}}),Object.defineProperty(e,S,k)}:function(e,l,_,S){void 0===S&&(S=_),e[S]=l[_]}),_=$n&&$n.__exportStar||function(e,_){for(var S in e)"default"===S||Object.prototype.hasOwnProperty.call(_,S)||l(_,e,S)};Object.defineProperty(e,"__esModule",{value:!0}),e.StatsigClient=void 0;var S=requireSrc$3(),k=requireStatsigClient();e.StatsigClient=k.default,_(requireSrc$3(),e);var E=Object.assign((0,S._getStatsigGlobal)(),{StatsigClient:k.default});e.default=E}($n)),$n}I("ah",requireSrc$2());var di,fi,pi={},vi={},gi={},mi={},yi={};function requireRecord(){return di||(di=1,function(E){var T={};Object.defineProperty(E,Symbol.toStringTag,{value:"Module"});var M,R=Object.defineProperty,__publicField=function(e,l,_){return function(e,l,_){return l in e?R(e,l,{enumerable:!0,configurable:!0,writable:!0,value:_}):e[l]=_}(e,"symbol"!==_typeof3(l)?l+"":l,_)},I=Object.defineProperty,__publicField$1=function(e,l,_){return function(e,l,_){return l in e?I(e,l,{enumerable:!0,configurable:!0,writable:!0,value:_}):e[l]=_}(e,"symbol"!==_typeof3(l)?l+"":l,_)},D=function(e){return e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment",e}(D||{}),O={Node:["childNodes","parentNode","parentElement","textContent"],ShadowRoot:["host","styleSheets"],Element:["shadowRoot","querySelector","querySelectorAll"],MutationObserver:[]},L={Node:["contains","getRootNode"],ShadowRoot:["getSelection"],Element:[],MutationObserver:["constructor"]},U={};function getUntaintedPrototype$1(e){if(U[e])return U[e];var l=globalThis[e],_=l.prototype,S=e in O?O[e]:void 0,k=Boolean(S&&S.every(function(e){var l,S;return Boolean(null==(S=null==(l=Object.getOwnPropertyDescriptor(_,e))?void 0:l.get)?void 0:S.toString().includes("[native code]"))})),E=e in L?L[e]:void 0,T=Boolean(E&&E.every(function(e){var l;return"function"==typeof _[e]&&(null==(l=_[e])?void 0:l.toString().includes("[native code]"))}));if(k&&T)return U[e]=l.prototype,l.prototype;try{var M=document.createElement("iframe");document.body.appendChild(M);var R=M.contentWindow;if(!R)return l.prototype;var I=R[e].prototype;return document.body.removeChild(M),I?U[e]=I:_}catch(D){return _}}var B={};function getUntaintedAccessor$1(e,l,_){var S,k="".concat(e,".").concat(String(_));if(B[k])return B[k].call(l);var E=getUntaintedPrototype$1(e),T=null==(S=Object.getOwnPropertyDescriptor(E,_))?void 0:S.get;return T?(B[k]=T,T.call(l)):l[_]}var z={};function getUntaintedMethod$1(e,l,_){var S="".concat(e,".").concat(String(_));if(z[S])return z[S].bind(l);var k=getUntaintedPrototype$1(e)[_];return"function"!=typeof k?l[_]:(z[S]=k,k.bind(l))}var G={childNodes:function(e){return getUntaintedAccessor$1("Node",e,"childNodes")},parentNode:function(e){return getUntaintedAccessor$1("Node",e,"parentNode")},parentElement:function(e){return getUntaintedAccessor$1("Node",e,"parentElement")},textContent:function(e){return getUntaintedAccessor$1("Node",e,"textContent")},contains:function(e,l){return getUntaintedMethod$1("Node",e,"contains")(l)},getRootNode:function(e){return getUntaintedMethod$1("Node",e,"getRootNode")()},host:function(e){return e&&"host"in e?getUntaintedAccessor$1("ShadowRoot",e,"host"):null},styleSheets:function(e){return e.styleSheets},shadowRoot:function(e){return e&&"shadowRoot"in e?getUntaintedAccessor$1("Element",e,"shadowRoot"):null},querySelector:function(e,l){return getUntaintedAccessor$1("Element",e,"querySelector")(l)},querySelectorAll:function(e,l){return getUntaintedAccessor$1("Element",e,"querySelectorAll")(l)},mutationObserver:function(){return getUntaintedPrototype$1("MutationObserver").constructor}};function isElement(e){return e.nodeType===e.ELEMENT_NODE}function isShadowRoot(e){var l=e&&"host"in e&&"mode"in e&&G.host(e)||null;return Boolean(l&&"shadowRoot"in l&&G.shadowRoot(l)===e)}function isNativeShadowDom(e){return"[object ShadowRoot]"===Object.prototype.toString.call(e)}function stringifyStylesheet(e){try{var l=e.rules||e.cssRules;if(!l)return null;var _=Array.from(l,function(l){return stringifyRule(l,e.href)}).join("");return(S=_).includes(" background-clip: text;")&&!S.includes(" -webkit-background-clip: text;")&&(S=S.replace(/\sbackground-clip:\s*text;/g," -webkit-background-clip: text; background-clip: text;")),S}catch(k){return null}var S}function stringifyRule(e,l){if(function(e){return"styleSheet"in e}(e)){var _;try{_=stringifyStylesheet(e.styleSheet)||function(e){var l=e.cssText;if(l.split('"').length<3)return l;var _=["@import","url(".concat(JSON.stringify(e.href),")")];return""===e.layerName?_.push("layer"):e.layerName&&_.push("layer(".concat(e.layerName,")")),e.supportsText&&_.push("supports(".concat(e.supportsText,")")),e.media.length&&_.push(e.media.mediaText),_.join(" ")+";"}(e)}catch(E){_=e.cssText}return e.styleSheet.href?absolutifyURLs(_,e.styleSheet.href):_}var S,k=e.cssText;return function(e){return"selectorText"in e}(e)&&e.selectorText.includes(":")&&(S=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm,k=k.replace(S,"$1\\$2")),l?absolutifyURLs(k,l):k}var j=function(){return _createClass3(function Mirror(){_classCallCheck3(this,Mirror),__publicField$1(this,"idNodeMap",new Map),__publicField$1(this,"nodeMetaMap",new WeakMap)},[{key:"getId",value:function(e){var l;if(!e)return-1;var _=null==(l=this.getMeta(e))?void 0:l.id;return null!=_?_:-1}},{key:"getNode",value:function(e){return this.idNodeMap.get(e)||null}},{key:"getIds",value:function(){return Array.from(this.idNodeMap.keys())}},{key:"getMeta",value:function(e){return this.nodeMetaMap.get(e)||null}},{key:"removeNodeFromMap",value:function(e){var l=this,_=this.getId(e);this.idNodeMap.delete(_),e.childNodes&&e.childNodes.forEach(function(e){return l.removeNodeFromMap(e)})}},{key:"has",value:function(e){return this.idNodeMap.has(e)}},{key:"hasNode",value:function(e){return this.nodeMetaMap.has(e)}},{key:"add",value:function(e,l){var _=l.id;this.idNodeMap.set(_,e),this.nodeMetaMap.set(e,l)}},{key:"replace",value:function(e,l){var _=this.getNode(e);if(_){var S=this.nodeMetaMap.get(_);S&&this.nodeMetaMap.set(l,S)}this.idNodeMap.set(e,l)}},{key:"reset",value:function(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}])}();function maskInputValue(e){var l=e.element,_=e.maskInputOptions,S=e.tagName,k=e.type,E=e.value,T=e.maskInputFn,M=E||"",R=k&&toLowerCase(k);return(_[S.toLowerCase()]||R&&_[R])&&(M=T?T(M,l):"*".repeat(M.length)),M}function toLowerCase(e){return e.toLowerCase()}var H="__rrweb_original__";function getInputType(e){var l=e.type;return e.hasAttribute("data-rr-is-password")?"password":l?toLowerCase(l):null}function extractFileExtension(e,l){var _,S;try{S=new URL(e,null!=l?l:window.location.href)}catch(E){return null}var k=S.pathname.match(/\.([0-9a-z]+)(?:$)/i);return null!==(_=null==k?void 0:k[1])&&void 0!==_?_:null}var V=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,W=/^(?:[a-z+]+:)?\/\//i,q=/^www\..*/i,X=/^(data:)([^,]*),(.*)/i;function absolutifyURLs(e,l){return(e||"").replace(V,function(e,_,S,k,E,T){var M,R=S||E||T,I=_||k||"";if(!R)return e;if(W.test(R)||q.test(R))return"url(".concat(I).concat(R).concat(I,")");if(X.test(R))return"url(".concat(I).concat(R).concat(I,")");if("/"===R[0])return"url(".concat(I).concat((M=l,(M.indexOf("//")>-1?M.split("/").slice(0,3).join("/"):M.split("/")[0]).split("?")[0]+R)).concat(I,")");var D=l.split("/"),O=R.split("/");D.pop();var L,U=_createForOfIteratorHelper2(O);try{for(U.s();!(L=U.n()).done;){var B=L.value;"."!==B&&(".."===B?D.pop():D.push(B))}}catch(z){U.e(z)}finally{U.f()}return"url(".concat(I).concat(D.join("/")).concat(I,")")})}var K,Y,Q=1,J=new RegExp("[^a-z0-9-_:]");function genId(){return Q++}var Z=/^[^ \t\n\r\u000c]+/,$=/^[, \t\n\r\u000c]+/;var ee=new WeakMap;function absoluteToDoc(e,l){return l&&""!==l.trim()?getHref(e,l):l}function isSVGElement(e){return Boolean("svg"===e.tagName||e.ownerSVGElement)}function getHref(e,l){var _=ee.get(e);if(_||(_=e.createElement("a"),ee.set(e,_)),l){if(l.startsWith("blob:")||l.startsWith("data:"))return l}else l="";return _.setAttribute("href",l),_.href}function transformAttribute(e,l,_,S){return S?"src"===_||"href"===_&&("use"!==l||"#"!==S[0])||"xlink:href"===_&&"#"!==S[0]?absoluteToDoc(e,S):"background"!==_||"table"!==l&&"td"!==l&&"th"!==l?"srcset"===_?function(e,l){if(""===l.trim())return l;var _=0;function collectCharacters(e){var S,k=e.exec(l.substring(_));return k?(S=k[0],_+=S.length,S):""}for(var S=[];collectCharacters($),!(_>=l.length);){var k=collectCharacters(Z);if(","===k.slice(-1))k=absoluteToDoc(e,k.substring(0,k.length-1)),S.push(k);else{var E="";k=absoluteToDoc(e,k);for(var T=!1;;){var M=l.charAt(_);if(""===M){S.push((k+E).trim());break}if(T)")"===M&&(T=!1);else{if(","===M){_+=1,S.push((k+E).trim());break}"("===M&&(T=!0)}E+=M,_+=1}}}return S.join(", ")}(e,S):"style"===_?absolutifyURLs(S,getHref(e)):"object"===l&&"data"===_?absoluteToDoc(e,S):S:absoluteToDoc(e,S):S}function ignoreAttribute(e,l,_){return("video"===e||"audio"===e)&&"autoplay"===l}function classMatchesRegex(e,l,_){if(!e)return!1;if(e.nodeType!==e.ELEMENT_NODE)return!!_&&classMatchesRegex(G.parentNode(e),l,_);for(var S=e.classList.length;S--;){var k=e.classList[S];if(l.test(k))return!0}return!!_&&classMatchesRegex(G.parentNode(e),l,_)}function needMaskingText(e,l,_,S){var k;if(isElement(e)){if(k=e,!G.childNodes(k).length)return!1}else{if(null===G.parentElement(e))return!1;k=G.parentElement(e)}try{if("string"==typeof l){if(S){if(k.closest(".".concat(l)))return!0}else if(k.classList.contains(l))return!0}else if(classMatchesRegex(k,l,S))return!0;if(_)if(S){if(k.closest(_))return!0}else if(k.matches(_))return!0}catch(E){}return!1}function serializeNode(e,l){var _=l.doc,S=l.mirror,k=l.blockClass,E=l.blockSelector,T=l.needsMask,M=l.inlineStylesheet,R=l.maskInputOptions,I=void 0===R?{}:R,O=l.maskTextFn,L=l.maskInputFn,U=l.dataURLOptions,B=void 0===U?{}:U,z=l.inlineImages,j=l.recordCanvas,V=l.keepIframeSrcFn,W=l.newlyAddedElement,q=void 0!==W&&W,X=function(e,l){if(!l.hasNode(e))return;var _=l.getId(e);return 1===_?void 0:_}(_,S);switch(e.nodeType){case e.DOCUMENT_NODE:return"CSS1Compat"!==e.compatMode?{type:D.Document,childNodes:[],compatMode:e.compatMode}:{type:D.Document,childNodes:[]};case e.DOCUMENT_TYPE_NODE:return{type:D.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:X};case e.ELEMENT_NODE:return function(e,l){for(var _,S=l.doc,k=l.blockClass,E=l.blockSelector,T=l.inlineStylesheet,M=l.maskInputOptions,R=void 0===M?{}:M,I=l.maskInputFn,O=l.dataURLOptions,L=void 0===O?{}:O,U=l.inlineImages,B=l.recordCanvas,z=l.keepIframeSrcFn,j=l.newlyAddedElement,V=void 0!==j&&j,W=l.rootId,q=function(e,l,_){try{if("string"==typeof l){if(e.classList.contains(l))return!0}else for(var S=e.classList.length;S--;){var k=e.classList[S];if(l.test(k))return!0}if(_)return e.matches(_)}catch(E){}return!1}(e,k,E),X=function(e){if(e instanceof HTMLFormElement)return"form";var l=toLowerCase(e.tagName);return J.test(l)?"div":l}(e),Q={},Z=e.attributes.length,$=0;$<Z;$++){var ee=e.attributes[$];ignoreAttribute(X,ee.name,ee.value)||(Q[ee.name]=transformAttribute(S,X,toLowerCase(ee.name),ee.value))}if("link"===X&&T){var te=Array.from(S.styleSheets).find(function(l){return l.href===e.href}),re=null;te&&(re=stringifyStylesheet(te)),re&&(delete Q.rel,delete Q.href,Q._cssText=re)}if("style"===X&&e.sheet&&!(e.innerText||G.textContent(e)||"").trim().length){var ne=stringifyStylesheet(e.sheet);ne&&(Q._cssText=ne)}if("input"===X||"textarea"===X||"select"===X){var ie=e.value,ae=e.checked;"radio"!==Q.type&&"checkbox"!==Q.type&&"submit"!==Q.type&&"button"!==Q.type&&ie?Q.value=maskInputValue({element:e,type:getInputType(e),tagName:X,value:ie,maskInputOptions:R,maskInputFn:I}):ae&&(Q.checked=ae)}"option"===X&&(e.selected&&!R.select?Q.selected=!0:delete Q.selected);"dialog"===X&&e.open&&(Q.rr_open_mode=e.matches("dialog:modal")?"modal":"non-modal");if("canvas"===X&&B)if("2d"===e.__context)(function(e){var l=e.getContext("2d");if(!l)return!0;for(var _=0;_<e.width;_+=50)for(var S=0;S<e.height;S+=50){var k=l.getImageData,E=H in k?k[H]:k;if(new Uint32Array(E.call(l,_,S,Math.min(50,e.width-_),Math.min(50,e.height-S)).data.buffer).some(function(e){return 0!==e}))return!1}return!0})(e)||(Q.rr_dataURL=e.toDataURL(L.type,L.quality));else if(!("__context"in e)){var oe=e.toDataURL(L.type,L.quality),se=S.createElement("canvas");se.width=e.width,se.height=e.height,oe!==se.toDataURL(L.type,L.quality)&&(Q.rr_dataURL=oe)}if("img"===X&&U){K||(K=S.createElement("canvas"),Y=K.getContext("2d"));var ue=e,le=(ue.currentSrc||ue.getAttribute("src"),ue.crossOrigin),_recordInlineImage=function(){ue.removeEventListener("load",_recordInlineImage);try{K.width=ue.naturalWidth,K.height=ue.naturalHeight,Y.drawImage(ue,0,0),Q.rr_dataURL=K.toDataURL(L.type,L.quality)}catch(e){if("anonymous"!==ue.crossOrigin)return ue.crossOrigin="anonymous",void(ue.complete&&0!==ue.naturalWidth?_recordInlineImage():ue.addEventListener("load",_recordInlineImage))}"anonymous"===ue.crossOrigin&&(le?Q.crossOrigin=le:ue.removeAttribute("crossorigin"))};ue.complete&&0!==ue.naturalWidth?_recordInlineImage():ue.addEventListener("load",_recordInlineImage)}if("audio"===X||"video"===X){var ce=Q;ce.rr_mediaState=e.paused?"paused":"played",ce.rr_mediaCurrentTime=e.currentTime,ce.rr_mediaPlaybackRate=e.playbackRate,ce.rr_mediaMuted=e.muted,ce.rr_mediaLoop=e.loop,ce.rr_mediaVolume=e.volume}V||(e.scrollLeft&&(Q.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(Q.rr_scrollTop=e.scrollTop));if(q){var he=e.getBoundingClientRect(),de=he.width,fe=he.height;Q={class:Q.class,rr_width:"".concat(de,"px"),rr_height:"".concat(fe,"px")}}"iframe"!==X||z(Q.src)||(e.contentDocument||(Q.rr_src=Q.src),delete Q.src);try{customElements.get(X)&&(_=!0)}catch(pe){}return{type:D.Element,tagName:X,attributes:Q,childNodes:[],isSVG:isSVGElement(e)||void 0,needBlock:q,rootId:W,isCustom:_}}(e,{doc:_,blockClass:k,blockSelector:E,inlineStylesheet:M,maskInputOptions:I,maskInputFn:L,dataURLOptions:B,inlineImages:z,recordCanvas:j,keepIframeSrcFn:V,newlyAddedElement:q,rootId:X});case e.TEXT_NODE:return function(e,l){var _,S=l.needsMask,k=l.maskTextFn,E=l.rootId,T=G.parentNode(e),M=T&&T.tagName,R=G.textContent(e),I="STYLE"===M||void 0,O="SCRIPT"===M||void 0;if(I&&R){try{e.nextSibling||e.previousSibling||(null==(_=T.sheet)?void 0:_.cssRules)&&(R=stringifyStylesheet(T.sheet))}catch(L){}R=absolutifyURLs(R,getHref(l.doc))}O&&(R="SCRIPT_PLACEHOLDER");!I&&!O&&R&&S&&(R=k?k(R,G.parentElement(e)):R.replace(/[\S]/g,"*"));return{type:D.Text,textContent:R||"",isStyle:I,rootId:E}}(e,{doc:_,needsMask:T,maskTextFn:O,rootId:X});case e.CDATA_SECTION_NODE:return{type:D.CDATA,textContent:"",rootId:X};case e.COMMENT_NODE:return{type:D.Comment,textContent:G.textContent(e)||"",rootId:X};default:return!1}}function lowerIfExists(e){return null==e?"":e.toLowerCase()}function serializeNodeWithId(e,l){var _=l.doc,S=l.mirror,k=l.blockClass,E=l.blockSelector,T=l.maskTextClass,M=l.maskTextSelector,R=l.skipChild,I=void 0!==R&&R,O=l.inlineStylesheet,L=void 0===O||O,U=l.maskInputOptions,B=void 0===U?{}:U,z=l.maskTextFn,j=l.maskInputFn,H=l.slimDOMOptions,V=l.dataURLOptions,W=void 0===V?{}:V,q=l.inlineImages,X=void 0!==q&&q,K=l.recordCanvas,Y=void 0!==K&&K,Q=l.onSerialize,J=l.onIframeLoad,Z=l.iframeLoadTimeout,$=void 0===Z?5e3:Z,ee=l.onStylesheetLoad,te=l.stylesheetLoadTimeout,re=void 0===te?5e3:te,ne=l.keepIframeSrcFn,ie=void 0===ne?function(){return!1}:ne,ae=l.newlyAddedElement,oe=void 0!==ae&&ae,se=l.needsMask,ue=l.preserveWhiteSpace,le=void 0===ue||ue;se||(se=needMaskingText(e,T,M,void 0===se));var ce,he=serializeNode(e,{doc:_,mirror:S,blockClass:k,blockSelector:E,needsMask:se,inlineStylesheet:L,maskInputOptions:B,maskTextFn:z,maskInputFn:j,dataURLOptions:W,inlineImages:X,recordCanvas:Y,keepIframeSrcFn:ie,newlyAddedElement:oe});if(!he)return null;ce=S.hasNode(e)?S.getId(e):!function(e,l){if(l.comment&&e.type===D.Comment)return!0;if(e.type===D.Element){if(l.script&&("script"===e.tagName||"link"===e.tagName&&("preload"===e.attributes.rel||"modulepreload"===e.attributes.rel)&&"script"===e.attributes.as||"link"===e.tagName&&"prefetch"===e.attributes.rel&&"string"==typeof e.attributes.href&&"js"===extractFileExtension(e.attributes.href)))return!0;if(l.headFavicon&&("link"===e.tagName&&"shortcut icon"===e.attributes.rel||"meta"===e.tagName&&(lowerIfExists(e.attributes.name).match(/^msapplication-tile(image|color)$/)||"application-name"===lowerIfExists(e.attributes.name)||"icon"===lowerIfExists(e.attributes.rel)||"apple-touch-icon"===lowerIfExists(e.attributes.rel)||"shortcut icon"===lowerIfExists(e.attributes.rel))))return!0;if("meta"===e.tagName){if(l.headMetaDescKeywords&&lowerIfExists(e.attributes.name).match(/^description|keywords$/))return!0;if(l.headMetaSocial&&(lowerIfExists(e.attributes.property).match(/^(og|twitter|fb):/)||lowerIfExists(e.attributes.name).match(/^(og|twitter):/)||"pinterest"===lowerIfExists(e.attributes.name)))return!0;if(l.headMetaRobots&&("robots"===lowerIfExists(e.attributes.name)||"googlebot"===lowerIfExists(e.attributes.name)||"bingbot"===lowerIfExists(e.attributes.name)))return!0;if(l.headMetaHttpEquiv&&void 0!==e.attributes["http-equiv"])return!0;if(l.headMetaAuthorship&&("author"===lowerIfExists(e.attributes.name)||"generator"===lowerIfExists(e.attributes.name)||"framework"===lowerIfExists(e.attributes.name)||"publisher"===lowerIfExists(e.attributes.name)||"progid"===lowerIfExists(e.attributes.name)||lowerIfExists(e.attributes.property).match(/^article:/)||lowerIfExists(e.attributes.property).match(/^product:/)))return!0;if(l.headMetaVerification&&("google-site-verification"===lowerIfExists(e.attributes.name)||"yandex-verification"===lowerIfExists(e.attributes.name)||"csrf-token"===lowerIfExists(e.attributes.name)||"p:domain_verify"===lowerIfExists(e.attributes.name)||"verify-v1"===lowerIfExists(e.attributes.name)||"verification"===lowerIfExists(e.attributes.name)||"shopify-checkout-api-token"===lowerIfExists(e.attributes.name)))return!0}}return!1}(he,H)&&(le||he.type!==D.Text||he.isStyle||he.textContent.replace(/^\s+|\s+$/gm,"").length)?genId():-2;var de=Object.assign(he,{id:ce});if(S.add(e,de),-2===ce)return null;Q&&Q(e);var fe=!I;if(de.type===D.Element){fe=fe&&!de.needBlock,delete de.needBlock;var pe=G.shadowRoot(e);pe&&isNativeShadowDom(pe)&&(de.isShadowHost=!0)}if((de.type===D.Document||de.type===D.Element)&&fe){H.headWhitespace&&de.type===D.Element&&"head"===de.tagName&&(le=!1);var ve={doc:_,mirror:S,blockClass:k,blockSelector:E,needsMask:se,maskTextClass:T,maskTextSelector:M,skipChild:I,inlineStylesheet:L,maskInputOptions:B,maskTextFn:z,maskInputFn:j,slimDOMOptions:H,dataURLOptions:W,inlineImages:X,recordCanvas:Y,preserveWhiteSpace:le,onSerialize:Q,onIframeLoad:J,iframeLoadTimeout:$,onStylesheetLoad:ee,stylesheetLoadTimeout:re,keepIframeSrcFn:ie};if(de.type===D.Element&&"textarea"===de.tagName&&void 0!==de.attributes.value);else for(var ge=0,me=Array.from(G.childNodes(e));ge<me.length;ge++){var ye=serializeNodeWithId(me[ge],ve);ye&&de.childNodes.push(ye)}var _e=null;if(isElement(e)&&(_e=G.shadowRoot(e)))for(var be=0,Se=Array.from(G.childNodes(_e));be<Se.length;be++){var we=serializeNodeWithId(Se[be],ve);we&&(isNativeShadowDom(_e)&&(we.isShadow=!0),de.childNodes.push(we))}}var xe=G.parentNode(e);return xe&&isShadowRoot(xe)&&isNativeShadowDom(xe)&&(de.isShadow=!0),de.type===D.Element&&"iframe"===de.tagName&&function(e,l,_){var S=e.contentWindow;if(S){var k,E=!1;try{k=S.document.readyState}catch(R){return}if("complete"===k){var T="about:blank";if(S.location.href!==T||e.src===T||""===e.src)return setTimeout(l,0),e.addEventListener("load",l);e.addEventListener("load",l)}else{var M=setTimeout(function(){E||(l(),E=!0)},_);e.addEventListener("load",function(){clearTimeout(M),E=!0,l()})}}}(e,function(){var l=e.contentDocument;if(l&&J){var _=serializeNodeWithId(l,{doc:l,mirror:S,blockClass:k,blockSelector:E,needsMask:se,maskTextClass:T,maskTextSelector:M,skipChild:!1,inlineStylesheet:L,maskInputOptions:B,maskTextFn:z,maskInputFn:j,slimDOMOptions:H,dataURLOptions:W,inlineImages:X,recordCanvas:Y,preserveWhiteSpace:le,onSerialize:Q,onIframeLoad:J,iframeLoadTimeout:$,onStylesheetLoad:ee,stylesheetLoadTimeout:re,keepIframeSrcFn:ie});_&&J(e,_)}},$),de.type===D.Element&&"link"===de.tagName&&"string"==typeof de.attributes.rel&&("stylesheet"===de.attributes.rel||"preload"===de.attributes.rel&&"string"==typeof de.attributes.href&&"css"===extractFileExtension(de.attributes.href))&&function(e,l,_){var S,k=!1;try{S=e.sheet}catch(T){return}if(!S){var E=setTimeout(function(){k||(l(),k=!0)},_);e.addEventListener("load",function(){clearTimeout(E),k=!0,l()})}}(e,function(){if(ee){var l=serializeNodeWithId(e,{doc:_,mirror:S,blockClass:k,blockSelector:E,needsMask:se,maskTextClass:T,maskTextSelector:M,skipChild:!1,inlineStylesheet:L,maskInputOptions:B,maskTextFn:z,maskInputFn:j,slimDOMOptions:H,dataURLOptions:W,inlineImages:X,recordCanvas:Y,preserveWhiteSpace:le,onSerialize:Q,onIframeLoad:J,iframeLoadTimeout:$,onStylesheetLoad:ee,stylesheetLoadTimeout:re,keepIframeSrcFn:ie});l&&ee(e,l)}},re),de}function getDefaultExportFromCjs$1(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function getAugmentedNamespace$1(e){if(e.__esModule)return e;var l=e.default;if("function"==typeof l){var _=function a22(){return this instanceof a22?Reflect.construct(l,arguments,this.constructor):l.apply(this,arguments)};_.prototype=l.prototype}else _={};return Object.defineProperty(_,"__esModule",{value:!0}),Object.keys(e).forEach(function(l){var S=Object.getOwnPropertyDescriptor(e,l);Object.defineProperty(_,l,S.get?S:{enumerable:!0,get:function(){return e[l]}})}),_}var te={exports:{}},re=String,create$1=function(){return{isColorSupported:!1,reset:re,bold:re,dim:re,italic:re,underline:re,inverse:re,hidden:re,strikethrough:re,black:re,red:re,green:re,yellow:re,blue:re,magenta:re,cyan:re,white:re,gray:re,bgBlack:re,bgRed:re,bgGreen:re,bgYellow:re,bgBlue:re,bgMagenta:re,bgCyan:re,bgWhite:re}};te.exports=create$1(),te.exports.createColors=create$1;var ne=te.exports,ie=getAugmentedNamespace$1(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"}))),ae=ne,oe=ie,se=function(e){function CssSyntaxError(e,l,_,S,k,E){var T;return _classCallCheck3(this,CssSyntaxError),(T=_callSuper(this,CssSyntaxError,[e])).name="CssSyntaxError",T.reason=e,k&&(T.file=k),S&&(T.source=S),E&&(T.plugin=E),void 0!==l&&void 0!==_&&("number"==typeof l?(T.line=l,T.column=_):(T.line=l.line,T.column=l.column,T.endLine=_.line,T.endColumn=_.column)),T.setMessage(),Error.captureStackTrace&&Error.captureStackTrace(T,CssSyntaxError),T}return _inherits(CssSyntaxError,e),_createClass3(CssSyntaxError,[{key:"setMessage",value:function(){this.message=this.plugin?this.plugin+": ":"",this.message+=this.file?this.file:"<css input>",void 0!==this.line&&(this.message+=":"+this.line+":"+this.column),this.message+=": "+this.reason}},{key:"showSourceCode",value:function(e){var l=this;if(!this.source)return"";var _=this.source;null==e&&(e=ae.isColorSupported),oe&&e&&(_=oe(_));var S,k,E=_.split(/\r?\n/),T=Math.max(this.line-3,0),M=Math.min(this.line+2,E.length),R=String(M).length;if(e){var I=ae.createColors(!0),D=I.bold,O=I.gray,L=I.red;S=function(e){return D(L(e))},k=function(e){return O(e)}}else S=k=function(e){return e};return E.slice(T,M).map(function(e,_){var E=T+1+_,M=" "+(" "+E).slice(-R)+" | ";if(E===l.line){var I=k(M.replace(/\d/g," "))+e.slice(0,l.column-1).replace(/[^\t]/g," ");return S(">")+k(M)+e+"\n "+I+S("^")}return" "+k(M)+e}).join("\n")}},{key:"toString",value:function(){var e=this.showSourceCode();return e&&(e="\n\n"+e+"\n"),this.name+": "+this.message+e}}])}(_wrapNativeSuper(Error)),ue=se;se.default=se;var le={};le.isClean=Symbol("isClean"),le.my=Symbol("my");var ce={after:"\n",beforeClose:"\n",beforeComment:"\n",beforeDecl:"\n",beforeOpen:" ",beforeRule:"\n",colon:": ",commentLeft:" ",commentRight:" ",emptyBody:"",indent:"    ",semicolon:!1};var he=function(){return _createClass3(function Stringifier(e){_classCallCheck3(this,Stringifier),this.builder=e},[{key:"atrule",value:function(e,l){var _="@"+e.name,S=e.params?this.rawValue(e,"params"):"";if(void 0!==e.raws.afterName?_+=e.raws.afterName:S&&(_+=" "),e.nodes)this.block(e,_+S);else{var k=(e.raws.between||"")+(l?";":"");this.builder(_+S+k,e)}}},{key:"beforeAfter",value:function(e,l){var _;_="decl"===e.type?this.raw(e,null,"beforeDecl"):"comment"===e.type?this.raw(e,null,"beforeComment"):"before"===l?this.raw(e,null,"beforeRule"):this.raw(e,null,"beforeClose");for(var S=e.parent,k=0;S&&"root"!==S.type;)k+=1,S=S.parent;if(_.includes("\n")){var E=this.raw(e,null,"indent");if(E.length)for(var T=0;T<k;T++)_+=E}return _}},{key:"block",value:function(e,l){var _,S=this.raw(e,"between","beforeOpen");this.builder(l+S+"{",e,"start"),e.nodes&&e.nodes.length?(this.body(e),_=this.raw(e,"after")):_=this.raw(e,"after","emptyBody"),_&&this.builder(_),this.builder("}",e,"end")}},{key:"body",value:function(e){for(var l=e.nodes.length-1;l>0&&"comment"===e.nodes[l].type;)l-=1;for(var _=this.raw(e,"semicolon"),S=0;S<e.nodes.length;S++){var k=e.nodes[S],E=this.raw(k,"before");E&&this.builder(E),this.stringify(k,l!==S||_)}}},{key:"comment",value:function(e){var l=this.raw(e,"left","commentLeft"),_=this.raw(e,"right","commentRight");this.builder("/*"+l+e.text+_+"*/",e)}},{key:"decl",value:function(e,l){var _=this.raw(e,"between","colon"),S=e.prop+_+this.rawValue(e,"value");e.important&&(S+=e.raws.important||" !important"),l&&(S+=";"),this.builder(S,e)}},{key:"document",value:function(e){this.body(e)}},{key:"raw",value:function(e,l,_){var S;if(_||(_=l),l&&void 0!==(S=e.raws[l]))return S;var k=e.parent;if("before"===_){if(!k||"root"===k.type&&k.first===e)return"";if(k&&"document"===k.type)return""}if(!k)return ce[_];var E=e.root();if(E.rawCache||(E.rawCache={}),void 0!==E.rawCache[_])return E.rawCache[_];if("before"===_||"after"===_)return this.beforeAfter(e,_);var T,M="raw"+((T=_)[0].toUpperCase()+T.slice(1));return this[M]?S=this[M](E,e):E.walk(function(e){if(void 0!==(S=e.raws[l]))return!1}),void 0===S&&(S=ce[_]),E.rawCache[_]=S,S}},{key:"rawBeforeClose",value:function(e){var l;return e.walk(function(e){if(e.nodes&&e.nodes.length>0&&void 0!==e.raws.after)return(l=e.raws.after).includes("\n")&&(l=l.replace(/[^\n]+$/,"")),!1}),l&&(l=l.replace(/\S/g,"")),l}},{key:"rawBeforeComment",value:function(e,l){var _;return e.walkComments(function(e){if(void 0!==e.raws.before)return(_=e.raws.before).includes("\n")&&(_=_.replace(/[^\n]+$/,"")),!1}),void 0===_?_=this.raw(l,null,"beforeDecl"):_&&(_=_.replace(/\S/g,"")),_}},{key:"rawBeforeDecl",value:function(e,l){var _;return e.walkDecls(function(e){if(void 0!==e.raws.before)return(_=e.raws.before).includes("\n")&&(_=_.replace(/[^\n]+$/,"")),!1}),void 0===_?_=this.raw(l,null,"beforeRule"):_&&(_=_.replace(/\S/g,"")),_}},{key:"rawBeforeOpen",value:function(e){var l;return e.walk(function(e){if("decl"!==e.type&&void 0!==(l=e.raws.between))return!1}),l}},{key:"rawBeforeRule",value:function(e){var l;return e.walk(function(_){if(_.nodes&&(_.parent!==e||e.first!==_)&&void 0!==_.raws.before)return(l=_.raws.before).includes("\n")&&(l=l.replace(/[^\n]+$/,"")),!1}),l&&(l=l.replace(/\S/g,"")),l}},{key:"rawColon",value:function(e){var l;return e.walkDecls(function(e){if(void 0!==e.raws.between)return l=e.raws.between.replace(/[^\s:]/g,""),!1}),l}},{key:"rawEmptyBody",value:function(e){var l;return e.walk(function(e){if(e.nodes&&0===e.nodes.length&&void 0!==(l=e.raws.after))return!1}),l}},{key:"rawIndent",value:function(e){return e.raws.indent?e.raws.indent:(e.walk(function(_){var S=_.parent;if(S&&S!==e&&S.parent&&S.parent===e&&void 0!==_.raws.before){var k=_.raws.before.split("\n");return l=(l=k[k.length-1]).replace(/\S/g,""),!1}}),l);var l}},{key:"rawSemicolon",value:function(e){var l;return e.walk(function(e){if(e.nodes&&e.nodes.length&&"decl"===e.last.type&&void 0!==(l=e.raws.semicolon))return!1}),l}},{key:"rawValue",value:function(e,l){var _=e[l],S=e.raws[l];return S&&S.value===_?S.raw:_}},{key:"root",value:function(e){this.body(e),e.raws.after&&this.builder(e.raws.after)}},{key:"rule",value:function(e){this.block(e,this.rawValue(e,"selector")),e.raws.ownSemicolon&&this.builder(e.raws.ownSemicolon,e,"end")}},{key:"stringify",value:function(e,l){if(!this[e.type])throw new Error("Unknown AST node type "+e.type+". Maybe you need to change PostCSS stringifier.");this[e.type](e,l)}}])}(),de=he;he.default=he;var fe=de;function stringify$4$1(e,l){new fe(l).stringify(e)}var pe=stringify$4$1;stringify$4$1.default=stringify$4$1;var ve=le.isClean,ge=le.my,me=ue,ye=de,_e=pe;function cloneNode$1(e,l){var _=new e.constructor;for(var S in e)if(Object.prototype.hasOwnProperty.call(e,S)&&"proxyCache"!==S){var k=e[S],E=_typeof3(k);"parent"===S&&"object"===E?l&&(_[S]=l):"source"===S?_[S]=k:Array.isArray(k)?_[S]=k.map(function(e){return cloneNode$1(e,_)}):("object"===E&&null!==k&&(k=cloneNode$1(k)),_[S]=k)}return _}var be=function(){return _createClass3(function Node2(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(var l in _classCallCheck3(this,Node2),this.raws={},this[ve]=!1,this[ge]=!0,e)if("nodes"===l){this.nodes=[];var _,S=_createForOfIteratorHelper2(e[l]);try{for(S.s();!(_=S.n()).done;){var k=_.value;"function"==typeof k.clone?this.append(k.clone()):this.append(k)}}catch(E){S.e(E)}finally{S.f()}}else this[l]=e[l]},[{key:"addToError",value:function(e){if(e.postcssNode=this,e.stack&&this.source&&/\n\s{4}at /.test(e.stack)){var l=this.source;e.stack=e.stack.replace(/\n\s{4}at /,"$&".concat(l.input.from,":").concat(l.start.line,":").concat(l.start.column,"$&"))}return e}},{key:"after",value:function(e){return this.parent.insertAfter(this,e),this}},{key:"assign",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(var l in e)this[l]=e[l];return this}},{key:"before",value:function(e){return this.parent.insertBefore(this,e),this}},{key:"cleanRaws",value:function(e){delete this.raws.before,delete this.raws.after,e||delete this.raws.between}},{key:"clone",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=cloneNode$1(this);for(var _ in e)l[_]=e[_];return l}},{key:"cloneAfter",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=this.clone(e);return this.parent.insertAfter(this,l),l}},{key:"cloneBefore",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=this.clone(e);return this.parent.insertBefore(this,l),l}},{key:"error",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.source){var _=this.rangeBy(l),S=_.end,k=_.start;return this.source.input.error(e,{column:k.column,line:k.line},{column:S.column,line:S.line},l)}return new me(e)}},{key:"getProxyProcessor",value:function(){return{get:function(e,l){return"proxyOf"===l?e:"root"===l?function(){return e.root().toProxy()}:e[l]},set:function(e,l,_){return e[l]===_||(e[l]=_,"prop"!==l&&"value"!==l&&"name"!==l&&"params"!==l&&"important"!==l&&"text"!==l||e.markDirty()),!0}}}},{key:"markDirty",value:function(){if(this[ve]){this[ve]=!1;for(var e=this;e=e.parent;)e[ve]=!1}}},{key:"next",value:function(){if(this.parent){var e=this.parent.index(this);return this.parent.nodes[e+1]}}},{key:"positionBy",value:function(e,l){var _=this.source.start;if(e.index)_=this.positionInside(e.index,l);else if(e.word){var S=(l=this.toString()).indexOf(e.word);-1!==S&&(_=this.positionInside(S,l))}return _}},{key:"positionInside",value:function(e,l){for(var _=l||this.toString(),S=this.source.start.column,k=this.source.start.line,E=0;E<e;E++)"\n"===_[E]?(S=1,k+=1):S+=1;return{column:S,line:k}}},{key:"prev",value:function(){if(this.parent){var e=this.parent.index(this);return this.parent.nodes[e-1]}}},{key:"rangeBy",value:function(e){var l={column:this.source.start.column,line:this.source.start.line},_=this.source.end?{column:this.source.end.column+1,line:this.source.end.line}:{column:l.column+1,line:l.line};if(e.word){var S=this.toString(),k=S.indexOf(e.word);-1!==k&&(l=this.positionInside(k,S),_=this.positionInside(k+e.word.length,S))}else e.start?l={column:e.start.column,line:e.start.line}:e.index&&(l=this.positionInside(e.index)),e.end?_={column:e.end.column,line:e.end.line}:"number"==typeof e.endIndex?_=this.positionInside(e.endIndex):e.index&&(_=this.positionInside(e.index+1));return(_.line<l.line||_.line===l.line&&_.column<=l.column)&&(_={column:l.column+1,line:l.line}),{end:_,start:l}}},{key:"raw",value:function(e,l){return(new ye).raw(this,e,l)}},{key:"remove",value:function(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this}},{key:"replaceWith",value:function(){if(this.parent){for(var e=this,l=!1,_=arguments.length,S=new Array(_),k=0;k<_;k++)S[k]=arguments[k];for(var E=0,T=S;E<T.length;E++){var M=T[E];M===this?l=!0:l?(this.parent.insertAfter(e,M),e=M):this.parent.insertBefore(e,M)}l||this.remove()}return this}},{key:"root",value:function(){for(var e=this;e.parent&&"document"!==e.parent.type;)e=e.parent;return e}},{key:"toJSON",value:function(e,l){var _={},S=null==l;l=l||new Map;var k=0;for(var E in this)if(Object.prototype.hasOwnProperty.call(this,E)&&"parent"!==E&&"proxyCache"!==E){var T=this[E];if(Array.isArray(T))_[E]=T.map(function(e){return"object"===_typeof3(e)&&e.toJSON?e.toJSON(null,l):e});else if("object"===_typeof3(T)&&T.toJSON)_[E]=T.toJSON(null,l);else if("source"===E){var M=l.get(T.input);null==M&&(M=k,l.set(T.input,k),k++),_[E]={end:T.end,inputId:M,start:T.start}}else _[E]=T}return S&&(_.inputs=_toConsumableArray3(l.keys()).map(function(e){return e.toJSON()})),_}},{key:"toProxy",value:function(){return this.proxyCache||(this.proxyCache=new Proxy(this,this.getProxyProcessor())),this.proxyCache}},{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_e;e.stringify&&(e=e.stringify);var l="";return e(this,function(e){l+=e}),l}},{key:"warn",value:function(e,l,_){var S={node:this};for(var k in _)S[k]=_[k];return e.warn(l,S)}},{key:"proxyOf",get:function(){return this}}])}(),Se=be;be.default=be;var we=function(e){function Declaration(e){var l;return _classCallCheck3(this,Declaration),e&&void 0!==e.value&&"string"!=typeof e.value&&(e=_objectSpread2(_objectSpread2({},e),{},{value:String(e.value)})),(l=_callSuper(this,Declaration,[e])).type="decl",l}return _inherits(Declaration,e),_createClass3(Declaration,[{key:"variable",get:function(){return this.prop.startsWith("--")||"$"===this.prop[0]}}])}(Se),xe=we;we.default=we;var nonSecure$1_nanoid=function(){for(var e="",l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:21;l--;)e+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[64*Math.random()|0];return e},ke=ie.SourceMapConsumer,Ae=ie.SourceMapGenerator,Ee=ie.existsSync,Ce=ie.readFileSync,Te=ie.dirname,Me=ie.join;var Re=function(){return _createClass3(function PreviousMap(e,l){if(_classCallCheck3(this,PreviousMap),!1!==l.map){this.loadAnnotation(e),this.inline=this.startWith(this.annotation,"data:");var _=l.map?l.map.prev:void 0,S=this.loadMap(l.from,_);!this.mapFile&&l.from&&(this.mapFile=l.from),this.mapFile&&(this.root=Te(this.mapFile)),S&&(this.text=S)}},[{key:"consumer",value:function(){return this.consumerCache||(this.consumerCache=new ke(this.text)),this.consumerCache}},{key:"decodeInline",value:function(e){var l;if(/^data:application\/json;charset=utf-?8,/.test(e)||/^data:application\/json,/.test(e))return decodeURIComponent(e.substr(RegExp.lastMatch.length));if(/^data:application\/json;charset=utf-?8;base64,/.test(e)||/^data:application\/json;base64,/.test(e))return l=e.substr(RegExp.lastMatch.length),Buffer?Buffer.from(l,"base64").toString():window.atob(l);var _=e.match(/data:application\/json;([^,]+),/)[1];throw new Error("Unsupported source map encoding "+_)}},{key:"getAnnotationURL",value:function(e){return e.replace(/^\/\*\s*# sourceMappingURL=/,"").trim()}},{key:"isMap",value:function(e){return"object"===_typeof3(e)&&("string"==typeof e.mappings||"string"==typeof e._mappings||Array.isArray(e.sections))}},{key:"loadAnnotation",value:function(e){var l=e.match(/\/\*\s*# sourceMappingURL=/gm);if(l){var _=e.lastIndexOf(l.pop()),S=e.indexOf("*/",_);_>-1&&S>-1&&(this.annotation=this.getAnnotationURL(e.substring(_,S)))}}},{key:"loadFile",value:function(e){if(this.root=Te(e),Ee(e))return this.mapFile=e,Ce(e,"utf-8").toString().trim()}},{key:"loadMap",value:function(e,l){if(!1===l)return!1;if(l){if("string"==typeof l)return l;if("function"!=typeof l){if(l instanceof ke)return Ae.fromSourceMap(l).toString();if(l instanceof Ae)return l.toString();if(this.isMap(l))return JSON.stringify(l);throw new Error("Unsupported previous source map format: "+l.toString())}var _=l(e);if(_){var S=this.loadFile(_);if(!S)throw new Error("Unable to load previous source map: "+_.toString());return S}}else{if(this.inline)return this.decodeInline(this.annotation);if(this.annotation){var k=this.annotation;return e&&(k=Me(Te(e),k)),this.loadFile(k)}}}},{key:"startWith",value:function(e,l){return!!e&&e.substr(0,l.length)===l}},{key:"withContent",value:function(){return!!(this.consumer().sourcesContent&&this.consumer().sourcesContent.length>0)}}])}(),Ie=Re;Re.default=Re;var Pe=ie.SourceMapConsumer,De=ie.SourceMapGenerator,Oe=ie.fileURLToPath,Le=ie.pathToFileURL,Ue=ie.isAbsolute,Fe=ie.resolve,Ne=nonSecure$1_nanoid,Be=ie,ze=ue,Ge=Ie,je=Symbol("fromOffsetCache"),He=Boolean(Pe&&De),Ve=Boolean(Fe&&Ue),We=function(){return _createClass3(function Input(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(_classCallCheck3(this,Input),null==e||"object"===_typeof3(e)&&!e.toString)throw new Error("PostCSS received ".concat(e," instead of CSS string"));if(this.css=e.toString(),"\ufeff"===this.css[0]||""===this.css[0]?(this.hasBOM=!0,this.css=this.css.slice(1)):this.hasBOM=!1,l.from&&(!Ve||/^\w+:\/\//.test(l.from)||Ue(l.from)?this.file=l.from:this.file=Fe(l.from)),Ve&&He){var _=new Ge(this.css,l);if(_.text){this.map=_;var S=_.consumer().file;!this.file&&S&&(this.file=this.mapResolve(S))}}this.file||(this.id="<input css "+Ne(6)+">"),this.map&&(this.map.file=this.from)},[{key:"error",value:function(e,l,_){var S,k,E,T=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(l&&"object"===_typeof3(l)){var M=l,R=_;if("number"==typeof M.offset){var I=this.fromOffset(M.offset);l=I.line,_=I.col}else l=M.line,_=M.column;if("number"==typeof R.offset){var D=this.fromOffset(R.offset);k=D.line,E=D.col}else k=R.line,E=R.column}else if(!_){var O=this.fromOffset(l);l=O.line,_=O.col}var L=this.origin(l,_,k,E);return(S=L?new ze(e,void 0===L.endLine?L.line:{column:L.column,line:L.line},void 0===L.endLine?L.column:{column:L.endColumn,line:L.endLine},L.source,L.file,T.plugin):new ze(e,void 0===k?l:{column:_,line:l},void 0===k?_:{column:E,line:k},this.css,this.file,T.plugin)).input={column:_,endColumn:E,endLine:k,line:l,source:this.css},this.file&&(Le&&(S.input.url=Le(this.file).toString()),S.input.file=this.file),S}},{key:"fromOffset",value:function(e){var l;if(this[je])l=this[je];else{var _=this.css.split("\n");l=new Array(_.length);for(var S=0,k=0,E=_.length;k<E;k++)l[k]=S,S+=_[k].length+1;this[je]=l}var T=0;if(e>=l[l.length-1])T=l.length-1;else for(var M,R=l.length-2;T<R;)if(e<l[M=T+(R-T>>1)])R=M-1;else{if(!(e>=l[M+1])){T=M;break}T=M+1}return{col:e-l[T]+1,line:T+1}}},{key:"mapResolve",value:function(e){return/^\w+:\/\//.test(e)?e:Fe(this.map.consumer().sourceRoot||this.map.root||".",e)}},{key:"origin",value:function(e,l,_,S){if(!this.map)return!1;var k,E,T=this.map.consumer(),M=T.originalPositionFor({column:l,line:e});if(!M.source)return!1;"number"==typeof _&&(k=T.originalPositionFor({column:S,line:_})),E=Ue(M.source)?Le(M.source):new URL(M.source,this.map.consumer().sourceRoot||Le(this.map.mapFile));var R={column:M.column,endColumn:k&&k.column,endLine:k&&k.line,line:M.line,url:E.toString()};if("file:"===E.protocol){if(!Oe)throw new Error("file: protocol is not available in this PostCSS build");R.file=Oe(E)}var I=T.sourceContentFor(M.source);return I&&(R.source=I),R}},{key:"toJSON",value:function(){for(var e={},l=0,_=["hasBOM","css","file","id"];l<_.length;l++){var S=_[l];null!=this[S]&&(e[S]=this[S])}return this.map&&(e.map=_objectSpread2({},this.map),e.map.consumerCache&&(e.map.consumerCache=void 0)),e}},{key:"from",get:function(){return this.file||this.id}}])}(),qe=We;We.default=We,Be&&Be.registerInput&&Be.registerInput(We);var Xe=ie.SourceMapConsumer,Ke=ie.SourceMapGenerator,Ye=ie.dirname,Qe=ie.relative,Je=ie.resolve,Ze=ie.sep,$e=ie.pathToFileURL,et=qe,tt=Boolean(Xe&&Ke),rt=Boolean(Ye&&Je&&Qe&&Ze),nt=function(){return _createClass3(function MapGenerator(e,l,_,S){_classCallCheck3(this,MapGenerator),this.stringify=e,this.mapOpts=_.map||{},this.root=l,this.opts=_,this.css=S,this.originalCSS=S,this.usesFileUrls=!this.mapOpts.from&&this.mapOpts.absolute,this.memoizedFileURLs=new Map,this.memoizedPaths=new Map,this.memoizedURLs=new Map},[{key:"addAnnotation",value:function(){var e;e=this.isInline()?"data:application/json;base64,"+this.toBase64(this.map.toString()):"string"==typeof this.mapOpts.annotation?this.mapOpts.annotation:"function"==typeof this.mapOpts.annotation?this.mapOpts.annotation(this.opts.to,this.root):this.outputFile()+".map";var l="\n";this.css.includes("\r\n")&&(l="\r\n"),this.css+=l+"/*# sourceMappingURL="+e+" */"}},{key:"applyPrevMaps",value:function(){var e,l=_createForOfIteratorHelper2(this.previous());try{for(l.s();!(e=l.n()).done;){var _=e.value,S=this.toUrl(this.path(_.file)),k=_.root||Ye(_.file),E=void 0;!1===this.mapOpts.sourcesContent?(E=new Xe(_.text)).sourcesContent&&(E.sourcesContent=null):E=_.consumer(),this.map.applySourceMap(E,S,this.toUrl(this.path(k)))}}catch(T){l.e(T)}finally{l.f()}}},{key:"clearAnnotation",value:function(){if(!1!==this.mapOpts.annotation)if(this.root)for(var e,l=this.root.nodes.length-1;l>=0;l--)"comment"===(e=this.root.nodes[l]).type&&0===e.text.indexOf("# sourceMappingURL=")&&this.root.removeChild(l);else this.css&&(this.css=this.css.replace(/\n*?\/\*#[\S\s]*?\*\/$/gm,""))}},{key:"generate",value:function(){if(this.clearAnnotation(),rt&&tt&&this.isMap())return this.generateMap();var e="";return this.stringify(this.root,function(l){e+=l}),[e]}},{key:"generateMap",value:function(){if(this.root)this.generateString();else if(1===this.previous().length){var e=this.previous()[0].consumer();e.file=this.outputFile(),this.map=Ke.fromSourceMap(e,{ignoreInvalidMapping:!0})}else this.map=new Ke({file:this.outputFile(),ignoreInvalidMapping:!0}),this.map.addMapping({generated:{column:0,line:1},original:{column:0,line:1},source:this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>"});return this.isSourcesContent()&&this.setSourcesContent(),this.root&&this.previous().length>0&&this.applyPrevMaps(),this.isAnnotation()&&this.addAnnotation(),this.isInline()?[this.css]:[this.css,this.map]}},{key:"generateString",value:function(){var e=this;this.css="",this.map=new Ke({file:this.outputFile(),ignoreInvalidMapping:!0});var l,_,S=1,k=1,E="<no source>",T={generated:{column:0,line:0},original:{column:0,line:0},source:""};this.stringify(this.root,function(M,R,I){if(e.css+=M,R&&"end"!==I&&(T.generated.line=S,T.generated.column=k-1,R.source&&R.source.start?(T.source=e.sourcePath(R),T.original.line=R.source.start.line,T.original.column=R.source.start.column-1,e.map.addMapping(T)):(T.source=E,T.original.line=1,T.original.column=0,e.map.addMapping(T))),(l=M.match(/\n/g))?(S+=l.length,_=M.lastIndexOf("\n"),k=M.length-_):k+=M.length,R&&"start"!==I){var D=R.parent||{raws:{}};("decl"===R.type||"atrule"===R.type&&!R.nodes)&&R===D.last&&!D.raws.semicolon||(R.source&&R.source.end?(T.source=e.sourcePath(R),T.original.line=R.source.end.line,T.original.column=R.source.end.column-1,T.generated.line=S,T.generated.column=k-2,e.map.addMapping(T)):(T.source=E,T.original.line=1,T.original.column=0,T.generated.line=S,T.generated.column=k-1,e.map.addMapping(T)))}})}},{key:"isAnnotation",value:function(){return!!this.isInline()||(void 0!==this.mapOpts.annotation?this.mapOpts.annotation:!this.previous().length||this.previous().some(function(e){return e.annotation}))}},{key:"isInline",value:function(){if(void 0!==this.mapOpts.inline)return this.mapOpts.inline;var e=this.mapOpts.annotation;return(void 0===e||!0===e)&&(!this.previous().length||this.previous().some(function(e){return e.inline}))}},{key:"isMap",value:function(){return void 0!==this.opts.map?!!this.opts.map:this.previous().length>0}},{key:"isSourcesContent",value:function(){return void 0!==this.mapOpts.sourcesContent?this.mapOpts.sourcesContent:!this.previous().length||this.previous().some(function(e){return e.withContent()})}},{key:"outputFile",value:function(){return this.opts.to?this.path(this.opts.to):this.opts.from?this.path(this.opts.from):"to.css"}},{key:"path",value:function(e){if(this.mapOpts.absolute)return e;if(60===e.charCodeAt(0))return e;if(/^\w+:\/\//.test(e))return e;var l=this.memoizedPaths.get(e);if(l)return l;var _=this.opts.to?Ye(this.opts.to):".";"string"==typeof this.mapOpts.annotation&&(_=Ye(Je(_,this.mapOpts.annotation)));var S=Qe(_,e);return this.memoizedPaths.set(e,S),S}},{key:"previous",value:function(){var e=this;if(!this.previousMaps)if(this.previousMaps=[],this.root)this.root.walk(function(l){if(l.source&&l.source.input.map){var _=l.source.input.map;e.previousMaps.includes(_)||e.previousMaps.push(_)}});else{var l=new et(this.originalCSS,this.opts);l.map&&this.previousMaps.push(l.map)}return this.previousMaps}},{key:"setSourcesContent",value:function(){var e=this,l={};if(this.root)this.root.walk(function(_){if(_.source){var S=_.source.input.from;if(S&&!l[S]){l[S]=!0;var k=e.usesFileUrls?e.toFileUrl(S):e.toUrl(e.path(S));e.map.setSourceContent(k,_.source.input.css)}}});else if(this.css){var _=this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>";this.map.setSourceContent(_,this.css)}}},{key:"sourcePath",value:function(e){return this.mapOpts.from?this.toUrl(this.mapOpts.from):this.usesFileUrls?this.toFileUrl(e.source.input.from):this.toUrl(this.path(e.source.input.from))}},{key:"toBase64",value:function(e){return Buffer?Buffer.from(e).toString("base64"):window.btoa(unescape(encodeURIComponent(e)))}},{key:"toFileUrl",value:function(e){var l=this.memoizedFileURLs.get(e);if(l)return l;if($e){var _=$e(e).toString();return this.memoizedFileURLs.set(e,_),_}throw new Error("`map.absolute` option is not available in this PostCSS build")}},{key:"toUrl",value:function(e){var l=this.memoizedURLs.get(e);if(l)return l;"\\"===Ze&&(e=e.replace(/\\/g,"/"));var _=encodeURI(e).replace(/[#?]/g,encodeURIComponent);return this.memoizedURLs.set(e,_),_}}])}(),it=function(e){function Comment(e){var l;return _classCallCheck3(this,Comment),(l=_callSuper(this,Comment,[e])).type="comment",l}return _inherits(Comment,e),_createClass3(Comment)}(Se),at=it;it.default=it;var ot,st,ut,lt,ct=le.isClean,ht=le.my,dt=xe,ft=at;function cleanSource$1(e){return e.map(function(e){return e.nodes&&(e.nodes=cleanSource$1(e.nodes)),delete e.source,e})}function markDirtyUp$1(e){if(e[ct]=!1,e.proxyOf.nodes){var l,_=_createForOfIteratorHelper2(e.proxyOf.nodes);try{for(_.s();!(l=_.n()).done;){markDirtyUp$1(l.value)}}catch(S){_.e(S)}finally{_.f()}}}var pt=function(e){function Container(){return _classCallCheck3(this,Container),_callSuper(this,Container,arguments)}return _inherits(Container,e),_createClass3(Container,[{key:"append",value:function(){for(var e=arguments.length,l=new Array(e),_=0;_<e;_++)l[_]=arguments[_];for(var S=0,k=l;S<k.length;S++){var E,T=k[S],M=_createForOfIteratorHelper2(this.normalize(T,this.last));try{for(M.s();!(E=M.n()).done;){var R=E.value;this.proxyOf.nodes.push(R)}}catch(I){M.e(I)}finally{M.f()}}return this.markDirty(),this}},{key:"cleanRaws",value:function(e){if(_superPropGet(Container,"cleanRaws",this,3)([e]),this.nodes){var l,_=_createForOfIteratorHelper2(this.nodes);try{for(_.s();!(l=_.n()).done;){l.value.cleanRaws(e)}}catch(S){_.e(S)}finally{_.f()}}}},{key:"each",value:function(e){if(this.proxyOf.nodes){for(var l,_,S=this.getIterator();this.indexes[S]<this.proxyOf.nodes.length&&(l=this.indexes[S],!1!==(_=e(this.proxyOf.nodes[l],l)));)this.indexes[S]+=1;return delete this.indexes[S],_}}},{key:"every",value:function(e){return this.nodes.every(e)}},{key:"getIterator",value:function(){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={}),this.lastEach+=1;var e=this.lastEach;return this.indexes[e]=0,e}},{key:"getProxyProcessor",value:function(){return{get:function(e,l){return"proxyOf"===l?e:e[l]?"each"===l||"string"==typeof l&&l.startsWith("walk")?function(){for(var _=arguments.length,S=new Array(_),k=0;k<_;k++)S[k]=arguments[k];return e[l].apply(e,_toConsumableArray3(S.map(function(e){return"function"==typeof e?function(l,_){return e(l.toProxy(),_)}:e})))}:"every"===l||"some"===l?function(_){return e[l](function(e){for(var l=arguments.length,S=new Array(l>1?l-1:0),k=1;k<l;k++)S[k-1]=arguments[k];return _.apply(void 0,[e.toProxy()].concat(S))})}:"root"===l?function(){return e.root().toProxy()}:"nodes"===l?e.nodes.map(function(e){return e.toProxy()}):"first"===l||"last"===l?e[l].toProxy():e[l]:e[l]},set:function(e,l,_){return e[l]===_||(e[l]=_,"name"!==l&&"params"!==l&&"selector"!==l||e.markDirty()),!0}}}},{key:"index",value:function(e){return"number"==typeof e?e:(e.proxyOf&&(e=e.proxyOf),this.proxyOf.nodes.indexOf(e))}},{key:"insertAfter",value:function(e,l){var _=this.index(e),S=this.normalize(l,this.proxyOf.nodes[_]).reverse();_=this.index(e);var k,E,T=_createForOfIteratorHelper2(S);try{for(T.s();!(k=T.n()).done;){var M=k.value;this.proxyOf.nodes.splice(_+1,0,M)}}catch(I){T.e(I)}finally{T.f()}for(var R in this.indexes)_<(E=this.indexes[R])&&(this.indexes[R]=E+S.length);return this.markDirty(),this}},{key:"insertBefore",value:function(e,l){var _=this.index(e),S=0===_&&"prepend",k=this.normalize(l,this.proxyOf.nodes[_],S).reverse();_=this.index(e);var E,T,M=_createForOfIteratorHelper2(k);try{for(M.s();!(E=M.n()).done;){var R=E.value;this.proxyOf.nodes.splice(_,0,R)}}catch(D){M.e(D)}finally{M.f()}for(var I in this.indexes)_<=(T=this.indexes[I])&&(this.indexes[I]=T+k.length);return this.markDirty(),this}},{key:"normalize",value:function(e,l){var _=this;if("string"==typeof e)e=cleanSource$1(ot(e).nodes);else if(void 0===e)e=[];else if(Array.isArray(e)){var S,k=_createForOfIteratorHelper2(e=e.slice(0));try{for(k.s();!(S=k.n()).done;){var E=S.value;E.parent&&E.parent.removeChild(E,"ignore")}}catch(D){k.e(D)}finally{k.f()}}else if("root"===e.type&&"document"!==this.type){var T,M=_createForOfIteratorHelper2(e=e.nodes.slice(0));try{for(M.s();!(T=M.n()).done;){var R=T.value;R.parent&&R.parent.removeChild(R,"ignore")}}catch(D){M.e(D)}finally{M.f()}}else if(e.type)e=[e];else if(e.prop){if(void 0===e.value)throw new Error("Value field is missed in node creation");"string"!=typeof e.value&&(e.value=String(e.value)),e=[new dt(e)]}else if(e.selector)e=[new st(e)];else if(e.name)e=[new ut(e)];else{if(!e.text)throw new Error("Unknown node type in node creation");e=[new ft(e)]}var I=e.map(function(e){return e[ht]||Container.rebuild(e),(e=e.proxyOf).parent&&e.parent.removeChild(e),e[ct]&&markDirtyUp$1(e),void 0===e.raws.before&&l&&void 0!==l.raws.before&&(e.raws.before=l.raws.before.replace(/\S/g,"")),e.parent=_.proxyOf,e});return I}},{key:"prepend",value:function(){for(var e=arguments.length,l=new Array(e),_=0;_<e;_++)l[_]=arguments[_];var S,k=_createForOfIteratorHelper2(l=l.reverse());try{for(k.s();!(S=k.n()).done;){var E,T=S.value,M=this.normalize(T,this.first,"prepend").reverse(),R=_createForOfIteratorHelper2(M);try{for(R.s();!(E=R.n()).done;){var I=E.value;this.proxyOf.nodes.unshift(I)}}catch(O){R.e(O)}finally{R.f()}for(var D in this.indexes)this.indexes[D]=this.indexes[D]+M.length}}catch(O){k.e(O)}finally{k.f()}return this.markDirty(),this}},{key:"push",value:function(e){return e.parent=this,this.proxyOf.nodes.push(e),this}},{key:"removeAll",value:function(){var e,l=_createForOfIteratorHelper2(this.proxyOf.nodes);try{for(l.s();!(e=l.n()).done;){e.value.parent=void 0}}catch(_){l.e(_)}finally{l.f()}return this.proxyOf.nodes=[],this.markDirty(),this}},{key:"removeChild",value:function(e){var l;for(var _ in e=this.index(e),this.proxyOf.nodes[e].parent=void 0,this.proxyOf.nodes.splice(e,1),this.indexes)(l=this.indexes[_])>=e&&(this.indexes[_]=l-1);return this.markDirty(),this}},{key:"replaceValues",value:function(e,l,_){return _||(_=l,l={}),this.walkDecls(function(S){l.props&&!l.props.includes(S.prop)||l.fast&&!S.value.includes(l.fast)||(S.value=S.value.replace(e,_))}),this.markDirty(),this}},{key:"some",value:function(e){return this.nodes.some(e)}},{key:"walk",value:function(e){return this.each(function(l,_){var S;try{S=e(l,_)}catch(k){throw l.addToError(k)}return!1!==S&&l.walk&&(S=l.walk(e)),S})}},{key:"walkAtRules",value:function(e,l){return l?e instanceof RegExp?this.walk(function(_,S){if("atrule"===_.type&&e.test(_.name))return l(_,S)}):this.walk(function(_,S){if("atrule"===_.type&&_.name===e)return l(_,S)}):(l=e,this.walk(function(e,_){if("atrule"===e.type)return l(e,_)}))}},{key:"walkComments",value:function(e){return this.walk(function(l,_){if("comment"===l.type)return e(l,_)})}},{key:"walkDecls",value:function(e,l){return l?e instanceof RegExp?this.walk(function(_,S){if("decl"===_.type&&e.test(_.prop))return l(_,S)}):this.walk(function(_,S){if("decl"===_.type&&_.prop===e)return l(_,S)}):(l=e,this.walk(function(e,_){if("decl"===e.type)return l(e,_)}))}},{key:"walkRules",value:function(e,l){return l?e instanceof RegExp?this.walk(function(_,S){if("rule"===_.type&&e.test(_.selector))return l(_,S)}):this.walk(function(_,S){if("rule"===_.type&&_.selector===e)return l(_,S)}):(l=e,this.walk(function(e,_){if("rule"===e.type)return l(e,_)}))}},{key:"first",get:function(){if(this.proxyOf.nodes)return this.proxyOf.nodes[0]}},{key:"last",get:function(){if(this.proxyOf.nodes)return this.proxyOf.nodes[this.proxyOf.nodes.length-1]}}])}(Se);pt.registerParse=function(e){ot=e},pt.registerRule=function(e){st=e},pt.registerAtRule=function(e){ut=e},pt.registerRoot=function(e){lt=e};var vt=pt;pt.default=pt,pt.rebuild=function(e){"atrule"===e.type?Object.setPrototypeOf(e,ut.prototype):"rule"===e.type?Object.setPrototypeOf(e,st.prototype):"decl"===e.type?Object.setPrototypeOf(e,dt.prototype):"comment"===e.type?Object.setPrototypeOf(e,ft.prototype):"root"===e.type&&Object.setPrototypeOf(e,lt.prototype),e[ht]=!0,e.nodes&&e.nodes.forEach(function(e){pt.rebuild(e)})};var gt,mt,yt=function(e){function Document2(e){var l;return _classCallCheck3(this,Document2),(l=_callSuper(this,Document2,[_objectSpread2({type:"document"},e)])).nodes||(l.nodes=[]),l}return _inherits(Document2,e),_createClass3(Document2,[{key:"toResult",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new gt(new mt,this,e).stringify()}}])}(vt);yt.registerLazyResult=function(e){gt=e},yt.registerProcessor=function(e){mt=e};var _t=yt;yt.default=yt;var bt=function(){return _createClass3(function Warning(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(_classCallCheck3(this,Warning),this.type="warning",this.text=e,l.node&&l.node.source){var _=l.node.rangeBy(l);this.line=_.start.line,this.column=_.start.column,this.endLine=_.end.line,this.endColumn=_.end.column}for(var S in l)this[S]=l[S]},[{key:"toString",value:function(){return this.node?this.node.error(this.text,{index:this.index,plugin:this.plugin,word:this.word}).message:this.plugin?this.plugin+": "+this.text:this.text}}])}(),St=bt;bt.default=bt;var wt=St,xt=function(){return _createClass3(function Result(e,l,_){_classCallCheck3(this,Result),this.processor=e,this.messages=[],this.root=l,this.opts=_,this.css=void 0,this.map=void 0},[{key:"toString",value:function(){return this.css}},{key:"warn",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};l.plugin||this.lastPlugin&&this.lastPlugin.postcssPlugin&&(l.plugin=this.lastPlugin.postcssPlugin);var _=new wt(e,l);return this.messages.push(_),_}},{key:"warnings",value:function(){return this.messages.filter(function(e){return"warning"===e.type})}},{key:"content",get:function(){return this.css}}])}(),kt=xt;xt.default=xt;var At="'".charCodeAt(0),Et='"'.charCodeAt(0),Ct="\\".charCodeAt(0),Tt="/".charCodeAt(0),Mt="\n".charCodeAt(0),Rt=" ".charCodeAt(0),It="\f".charCodeAt(0),Pt="\t".charCodeAt(0),Dt="\r".charCodeAt(0),Ot="[".charCodeAt(0),Lt="]".charCodeAt(0),Ut="(".charCodeAt(0),Ft=")".charCodeAt(0),Nt="{".charCodeAt(0),Bt="}".charCodeAt(0),zt=";".charCodeAt(0),Gt="*".charCodeAt(0),jt=":".charCodeAt(0),Ht="@".charCodeAt(0),Vt=/[\t\n\f\r "#'()/;[\\\]{}]/g,Wt=/[\t\n\f\r !"#'():;@[\\\]{}]|\/(?=\*)/g,qt=/.[\r\n"'(/\\]/,Xt=/[\da-f]/i,Kt=vt,Yt=function(e){function AtRule(e){var l;return _classCallCheck3(this,AtRule),(l=_callSuper(this,AtRule,[e])).type="atrule",l}return _inherits(AtRule,e),_createClass3(AtRule,[{key:"append",value:function(){this.proxyOf.nodes||(this.nodes=[]);for(var e=arguments.length,l=new Array(e),_=0;_<e;_++)l[_]=arguments[_];return _superPropGet(AtRule,"append",this,3)(l)}},{key:"prepend",value:function(){this.proxyOf.nodes||(this.nodes=[]);for(var e=arguments.length,l=new Array(e),_=0;_<e;_++)l[_]=arguments[_];return _superPropGet(AtRule,"prepend",this,3)(l)}}])}(Kt),Qt=Yt;Yt.default=Yt,Kt.registerAtRule(Yt);var Jt,Zt,$t=vt,er=function(e){function Root(e){var l;return _classCallCheck3(this,Root),(l=_callSuper(this,Root,[e])).type="root",l.nodes||(l.nodes=[]),l}return _inherits(Root,e),_createClass3(Root,[{key:"normalize",value:function(e,l,_){var S=_superPropGet(Root,"normalize",this,3)([e]);if(l)if("prepend"===_)this.nodes.length>1?l.raws.before=this.nodes[1].raws.before:delete l.raws.before;else if(this.first!==l){var k,E=_createForOfIteratorHelper2(S);try{for(E.s();!(k=E.n()).done;){k.value.raws.before=l.raws.before}}catch(T){E.e(T)}finally{E.f()}}return S}},{key:"removeChild",value:function(e,l){var _=this.index(e);return!l&&0===_&&this.nodes.length>1&&(this.nodes[1].raws.before=this.nodes[_].raws.before),_superPropGet(Root,"removeChild",this,3)([e])}},{key:"toResult",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Jt(new Zt,this,e).stringify()}}])}($t);er.registerLazyResult=function(e){Jt=e},er.registerProcessor=function(e){Zt=e};var tr=er;er.default=er,$t.registerRoot(er);var rr={comma:function(e){return rr.split(e,[","],!0)},space:function(e){return rr.split(e,[" ","\n","\t"])},split:function(e,l,_){var S,k=[],E="",T=!1,M=0,R=!1,I="",D=!1,O=_createForOfIteratorHelper2(e);try{for(O.s();!(S=O.n()).done;){var L=S.value;D?D=!1:"\\"===L?D=!0:R?L===I&&(R=!1):'"'===L||"'"===L?(R=!0,I=L):"("===L?M+=1:")"===L?M>0&&(M-=1):0===M&&l.includes(L)&&(T=!0),T?(""!==E&&k.push(E.trim()),E="",T=!1):E+=L}}catch(U){O.e(U)}finally{O.f()}return(_||""!==E)&&k.push(E.trim()),k}},nr=rr;rr.default=rr;var ir=vt,ar=nr,or=function(e){function Rule(e){var l;return _classCallCheck3(this,Rule),(l=_callSuper(this,Rule,[e])).type="rule",l.nodes||(l.nodes=[]),l}return _inherits(Rule,e),_createClass3(Rule,[{key:"selectors",get:function(){return ar.comma(this.selector)},set:function(e){var l=this.selector?this.selector.match(/,\s*/):null,_=l?l[0]:","+this.raw("between","beforeOpen");this.selector=e.join(_)}}])}(ir),sr=or;or.default=or,ir.registerRule(or);var ur=xe,tokenizer2$1=function(e){var l,_,S,k,E,T,M,R,I,D,O=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},L=e.css.valueOf(),U=O.ignoreErrors,B=L.length,z=0,G=[],j=[];function unclosed(l){throw e.error("Unclosed "+l,z)}return{back:function(e){j.push(e)},endOfFile:function(){return 0===j.length&&z>=B},nextToken:function(e){if(j.length)return j.pop();if(!(z>=B)){var O=!!e&&e.ignoreUnclosed;switch(l=L.charCodeAt(z)){case Mt:case Rt:case Pt:case Dt:case It:_=z;do{_+=1,l=L.charCodeAt(_)}while(l===Rt||l===Mt||l===Pt||l===Dt||l===It);D=["space",L.slice(z,_)],z=_-1;break;case Ot:case Lt:case Nt:case Bt:case jt:case zt:case Ft:var H=String.fromCharCode(l);D=[H,H,z];break;case Ut:if(R=G.length?G.pop()[1]:"",I=L.charCodeAt(z+1),"url"===R&&I!==At&&I!==Et&&I!==Rt&&I!==Mt&&I!==Pt&&I!==It&&I!==Dt){_=z;do{if(T=!1,-1===(_=L.indexOf(")",_+1))){if(U||O){_=z;break}unclosed("bracket")}for(M=_;L.charCodeAt(M-1)===Ct;)M-=1,T=!T}while(T);D=["brackets",L.slice(z,_+1),z,_],z=_}else _=L.indexOf(")",z+1),k=L.slice(z,_+1),-1===_||qt.test(k)?D=["(","(",z]:(D=["brackets",k,z,_],z=_);break;case At:case Et:S=l===At?"'":'"',_=z;do{if(T=!1,-1===(_=L.indexOf(S,_+1))){if(U||O){_=z+1;break}unclosed("string")}for(M=_;L.charCodeAt(M-1)===Ct;)M-=1,T=!T}while(T);D=["string",L.slice(z,_+1),z,_],z=_;break;case Ht:Vt.lastIndex=z+1,Vt.test(L),_=0===Vt.lastIndex?L.length-1:Vt.lastIndex-2,D=["at-word",L.slice(z,_+1),z,_],z=_;break;case Ct:for(_=z,E=!0;L.charCodeAt(_+1)===Ct;)_+=1,E=!E;if(l=L.charCodeAt(_+1),E&&l!==Tt&&l!==Rt&&l!==Mt&&l!==Pt&&l!==Dt&&l!==It&&(_+=1,Xt.test(L.charAt(_)))){for(;Xt.test(L.charAt(_+1));)_+=1;L.charCodeAt(_+1)===Rt&&(_+=1)}D=["word",L.slice(z,_+1),z,_],z=_;break;default:l===Tt&&L.charCodeAt(z+1)===Gt?(0===(_=L.indexOf("*/",z+2)+1)&&(U||O?_=L.length:unclosed("comment")),D=["comment",L.slice(z,_+1),z,_],z=_):(Wt.lastIndex=z+1,Wt.test(L),_=0===Wt.lastIndex?L.length-1:Wt.lastIndex-2,D=["word",L.slice(z,_+1),z,_],G.push(D),z=_)}return z++,D}},position:function(){return z}}},lr=at,cr=Qt,hr=tr,dr=sr,fr={empty:!0,space:!0};var pr=function(){return _createClass3(function Parser(e){_classCallCheck3(this,Parser),this.input=e,this.root=new hr,this.current=this.root,this.spaces="",this.semicolon=!1,this.createTokenizer(),this.root.source={input:e,start:{column:1,line:1,offset:0}}},[{key:"atrule",value:function(e){var l,_,S,k=new cr;k.name=e[1].slice(1),""===k.name&&this.unnamedAtrule(k,e),this.init(k,e[2]);for(var E=!1,T=!1,M=[],R=[];!this.tokenizer.endOfFile();){if("("===(l=(e=this.tokenizer.nextToken())[0])||"["===l?R.push("("===l?")":"]"):"{"===l&&R.length>0?R.push("}"):l===R[R.length-1]&&R.pop(),0===R.length){if(";"===l){k.source.end=this.getPosition(e[2]),k.source.end.offset++,this.semicolon=!0;break}if("{"===l){T=!0;break}if("}"===l){if(M.length>0){for(_=M[S=M.length-1];_&&"space"===_[0];)_=M[--S];_&&(k.source.end=this.getPosition(_[3]||_[2]),k.source.end.offset++)}this.end(e);break}M.push(e)}else M.push(e);if(this.tokenizer.endOfFile()){E=!0;break}}k.raws.between=this.spacesAndCommentsFromEnd(M),M.length?(k.raws.afterName=this.spacesAndCommentsFromStart(M),this.raw(k,"params",M),E&&(e=M[M.length-1],k.source.end=this.getPosition(e[3]||e[2]),k.source.end.offset++,this.spaces=k.raws.between,k.raws.between="")):(k.raws.afterName="",k.params=""),T&&(k.nodes=[],this.current=k)}},{key:"checkMissedSemicolon",value:function(e){var l=this.colon(e);if(!1!==l){for(var _,S=0,k=l-1;k>=0&&("space"===(_=e[k])[0]||2!==(S+=1));k--);throw this.input.error("Missed semicolon","word"===_[0]?_[3]+1:_[2])}}},{key:"colon",value:function(e){var l,_,S,k,E=0,T=_createForOfIteratorHelper2(e.entries());try{for(T.s();!(k=T.n()).done;){var M=_slicedToArray(k.value,2),R=M[0];if("("===(_=(l=M[1])[0])&&(E+=1),")"===_&&(E-=1),0===E&&":"===_){if(S){if("word"===S[0]&&"progid"===S[1])continue;return R}this.doubleColon(l)}S=l}}catch(I){T.e(I)}finally{T.f()}return!1}},{key:"comment",value:function(e){var l=new lr;this.init(l,e[2]),l.source.end=this.getPosition(e[3]||e[2]),l.source.end.offset++;var _=e[1].slice(2,-2);if(/^\s*$/.test(_))l.text="",l.raws.left=_,l.raws.right="";else{var S=_.match(/^(\s*)([^]*\S)(\s*)$/);l.text=S[2],l.raws.left=S[1],l.raws.right=S[3]}}},{key:"createTokenizer",value:function(){this.tokenizer=tokenizer2$1(this.input)}},{key:"decl",value:function(e,l){var _=new ur;this.init(_,e[0][2]);var S,k=e[e.length-1];for(";"===k[0]&&(this.semicolon=!0,e.pop()),_.source.end=this.getPosition(k[3]||k[2]||function(e){for(var l=e.length-1;l>=0;l--){var _=e[l],S=_[3]||_[2];if(S)return S}}(e)),_.source.end.offset++;"word"!==e[0][0];)1===e.length&&this.unknownWord(e),_.raws.before+=e.shift()[1];for(_.source.start=this.getPosition(e[0][2]),_.prop="";e.length;){var E=e[0][0];if(":"===E||"space"===E||"comment"===E)break;_.prop+=e.shift()[1]}for(_.raws.between="";e.length;){if(":"===(S=e.shift())[0]){_.raws.between+=S[1];break}"word"===S[0]&&/\w/.test(S[1])&&this.unknownWord([S]),_.raws.between+=S[1]}"_"!==_.prop[0]&&"*"!==_.prop[0]||(_.raws.before+=_.prop[0],_.prop=_.prop.slice(1));for(var T,M=[];e.length&&("space"===(T=e[0][0])||"comment"===T);)M.push(e.shift());this.precheckMissedSemicolon(e);for(var R=e.length-1;R>=0;R--){if("!important"===(S=e[R])[1].toLowerCase()){_.important=!0;var I=this.stringFrom(e,R);" !important"!==(I=this.spacesFromEnd(e)+I)&&(_.raws.important=I);break}if("important"===S[1].toLowerCase()){for(var D=e.slice(0),O="",L=R;L>0;L--){var U=D[L][0];if(0===O.trim().indexOf("!")&&"space"!==U)break;O=D.pop()[1]+O}0===O.trim().indexOf("!")&&(_.important=!0,_.raws.important=O,e=D)}if("space"!==S[0]&&"comment"!==S[0])break}var B=e.some(function(e){return"space"!==e[0]&&"comment"!==e[0]});B&&(_.raws.between+=M.map(function(e){return e[1]}).join(""),M=[]),this.raw(_,"value",M.concat(e),l),_.value.includes(":")&&!l&&this.checkMissedSemicolon(e)}},{key:"doubleColon",value:function(e){throw this.input.error("Double colon",{offset:e[2]},{offset:e[2]+e[1].length})}},{key:"emptyRule",value:function(e){var l=new dr;this.init(l,e[2]),l.selector="",l.raws.between="",this.current=l}},{key:"end",value:function(e){this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.semicolon=!1,this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.spaces="",this.current.parent?(this.current.source.end=this.getPosition(e[2]),this.current.source.end.offset++,this.current=this.current.parent):this.unexpectedClose(e)}},{key:"endFile",value:function(){this.current.parent&&this.unclosedBlock(),this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.root.source.end=this.getPosition(this.tokenizer.position())}},{key:"freeSemicolon",value:function(e){if(this.spaces+=e[1],this.current.nodes){var l=this.current.nodes[this.current.nodes.length-1];l&&"rule"===l.type&&!l.raws.ownSemicolon&&(l.raws.ownSemicolon=this.spaces,this.spaces="")}}},{key:"getPosition",value:function(e){var l=this.input.fromOffset(e);return{column:l.col,line:l.line,offset:e}}},{key:"init",value:function(e,l){this.current.push(e),e.source={input:this.input,start:this.getPosition(l)},e.raws.before=this.spaces,this.spaces="","comment"!==e.type&&(this.semicolon=!1)}},{key:"other",value:function(e){for(var l=!1,_=null,S=!1,k=null,E=[],T=e[1].startsWith("--"),M=[],R=e;R;){if(_=R[0],M.push(R),"("===_||"["===_)k||(k=R),E.push("("===_?")":"]");else if(T&&S&&"{"===_)k||(k=R),E.push("}");else if(0===E.length){if(";"===_){if(S)return void this.decl(M,T);break}if("{"===_)return void this.rule(M);if("}"===_){this.tokenizer.back(M.pop()),l=!0;break}":"===_&&(S=!0)}else _===E[E.length-1]&&(E.pop(),0===E.length&&(k=null));R=this.tokenizer.nextToken()}if(this.tokenizer.endOfFile()&&(l=!0),E.length>0&&this.unclosedBracket(k),l&&S){if(!T)for(;M.length&&("space"===(R=M[M.length-1][0])||"comment"===R);)this.tokenizer.back(M.pop());this.decl(M,T)}else this.unknownWord(M)}},{key:"parse",value:function(){for(var e;!this.tokenizer.endOfFile();)switch((e=this.tokenizer.nextToken())[0]){case"space":this.spaces+=e[1];break;case";":this.freeSemicolon(e);break;case"}":this.end(e);break;case"comment":this.comment(e);break;case"at-word":this.atrule(e);break;case"{":this.emptyRule(e);break;default:this.other(e)}this.endFile()}},{key:"precheckMissedSemicolon",value:function(){}},{key:"raw",value:function(e,l,_,S){for(var k,E,T,M,R=_.length,I="",D=!0,O=0;O<R;O+=1)"space"!==(E=(k=_[O])[0])||O!==R-1||S?"comment"===E?(M=_[O-1]?_[O-1][0]:"empty",T=_[O+1]?_[O+1][0]:"empty",fr[M]||fr[T]||","===I.slice(-1)?D=!1:I+=k[1]):I+=k[1]:D=!1;if(!D){var L=_.reduce(function(e,l){return e+l[1]},"");e.raws[l]={raw:L,value:I}}e[l]=I}},{key:"rule",value:function(e){e.pop();var l=new dr;this.init(l,e[0][2]),l.raws.between=this.spacesAndCommentsFromEnd(e),this.raw(l,"selector",e),this.current=l}},{key:"spacesAndCommentsFromEnd",value:function(e){for(var l,_="";e.length&&("space"===(l=e[e.length-1][0])||"comment"===l);)_=e.pop()[1]+_;return _}},{key:"spacesAndCommentsFromStart",value:function(e){for(var l,_="";e.length&&("space"===(l=e[0][0])||"comment"===l);)_+=e.shift()[1];return _}},{key:"spacesFromEnd",value:function(e){for(var l="";e.length&&"space"===e[e.length-1][0];)l=e.pop()[1]+l;return l}},{key:"stringFrom",value:function(e,l){for(var _="",S=l;S<e.length;S++)_+=e[S][1];return e.splice(l,e.length-l),_}},{key:"unclosedBlock",value:function(){var e=this.current.source.start;throw this.input.error("Unclosed block",e.line,e.column)}},{key:"unclosedBracket",value:function(e){throw this.input.error("Unclosed bracket",{offset:e[2]},{offset:e[2]+1})}},{key:"unexpectedClose",value:function(e){throw this.input.error("Unexpected }",{offset:e[2]},{offset:e[2]+1})}},{key:"unknownWord",value:function(e){throw this.input.error("Unknown word",{offset:e[0][2]},{offset:e[0][2]+e[0][1].length})}},{key:"unnamedAtrule",value:function(e,l){throw this.input.error("At-rule without name",{offset:l[2]},{offset:l[2]+l[1].length})}}])}(),vr=vt,gr=pr,mr=qe;function parse$3$1(e,l){var _=new mr(e,l),S=new gr(_);try{S.parse()}catch(k){throw k}return S.root}var yr=parse$3$1;parse$3$1.default=parse$3$1,vr.registerParse(parse$3$1);var _r=le.isClean,br=le.my,Sr=nt,wr=pe,xr=vt,kr=_t,Ar=kt,Er=yr,Cr=tr,Tr={atrule:"AtRule",comment:"Comment",decl:"Declaration",document:"Document",root:"Root",rule:"Rule"},Mr={AtRule:!0,AtRuleExit:!0,Comment:!0,CommentExit:!0,Declaration:!0,DeclarationExit:!0,Document:!0,DocumentExit:!0,Once:!0,OnceExit:!0,postcssPlugin:!0,prepare:!0,Root:!0,RootExit:!0,Rule:!0,RuleExit:!0},Rr={Once:!0,postcssPlugin:!0,prepare:!0};function isPromise$1(e){return"object"===_typeof3(e)&&"function"==typeof e.then}function getEvents$1(e){var l=!1,_=Tr[e.type];return"decl"===e.type?l=e.prop.toLowerCase():"atrule"===e.type&&(l=e.name.toLowerCase()),l&&e.append?[_,_+"-"+l,0,_+"Exit",_+"Exit-"+l]:l?[_,_+"-"+l,_+"Exit",_+"Exit-"+l]:e.append?[_,0,_+"Exit"]:[_,_+"Exit"]}function toStack$1(e){return{eventIndex:0,events:"document"===e.type?["Document",0,"DocumentExit"]:"root"===e.type?["Root",0,"RootExit"]:getEvents$1(e),iterator:0,node:e,visitorIndex:0,visitors:[]}}function cleanMarks$1(e){return e[_r]=!1,e.nodes&&e.nodes.forEach(function(e){return cleanMarks$1(e)}),e}var Ir={},Pr=function(){return _createClass3(function LazyResult(e,l,_){var S,k=this;if(_classCallCheck3(this,LazyResult),this.stringified=!1,this.processed=!1,"object"!==_typeof3(l)||null===l||"root"!==l.type&&"document"!==l.type)if(l instanceof LazyResult||l instanceof Ar)S=cleanMarks$1(l.root),l.map&&(void 0===_.map&&(_.map={}),_.map.inline||(_.map.inline=!1),_.map.prev=l.map);else{var E=Er;_.syntax&&(E=_.syntax.parse),_.parser&&(E=_.parser),E.parse&&(E=E.parse);try{S=E(l,_)}catch(T){this.processed=!0,this.error=T}S&&!S[br]&&xr.rebuild(S)}else S=cleanMarks$1(l);this.result=new Ar(e,S,_),this.helpers=_objectSpread2(_objectSpread2({},Ir),{},{postcss:Ir,result:this.result}),this.plugins=this.processor.plugins.map(function(e){return"object"===_typeof3(e)&&e.prepare?_objectSpread2(_objectSpread2({},e),e.prepare(k.result)):e})},[{key:"async",value:function(){return this.error?Promise.reject(this.error):this.processed?Promise.resolve(this.result):(this.processing||(this.processing=this.runAsync()),this.processing)}},{key:"catch",value:function(e){return this.async().catch(e)}},{key:"finally",value:function(e){return this.async().then(e,e)}},{key:"getAsyncError",value:function(){throw new Error("Use process(css).then(cb) to work with async plugins")}},{key:"handleError",value:function(e,l){var _=this.result.lastPlugin;try{l&&l.addToError(e),this.error=e,"CssSyntaxError"!==e.name||e.plugin?_.postcssVersion:(e.plugin=_.postcssPlugin,e.setMessage())}catch(S){console&&console.error}return e}},{key:"prepareVisitors",value:function(){var e=this;this.listeners={};var l,add=function(l,_,S){e.listeners[_]||(e.listeners[_]=[]),e.listeners[_].push([l,S])},_=_createForOfIteratorHelper2(this.plugins);try{for(_.s();!(l=_.n()).done;){var S=l.value;if("object"===_typeof3(S))for(var k in S){if(!Mr[k]&&/^[A-Z]/.test(k))throw new Error("Unknown event ".concat(k," in ").concat(S.postcssPlugin,". Try to update PostCSS (").concat(this.processor.version," now)."));if(!Rr[k])if("object"===_typeof3(S[k]))for(var E in S[k])add(S,"*"===E?k:k+"-"+E.toLowerCase(),S[k][E]);else"function"==typeof S[k]&&add(S,k,S[k])}}}catch(T){_.e(T)}finally{_.f()}this.hasListener=Object.keys(this.listeners).length>0}},{key:"runAsync",value:(e=_asyncToGenerator(_regenerator().m(function _callee23(){var e,l,_,S,k,E,T,M,R,I,D,O,L,U=this;return _regenerator().w(function(B){for(;;)switch(B.p=B.n){case 0:this.plugin=0,e=0;case 1:if(!(e<this.plugins.length)){B.n=6;break}if(l=this.plugins[e],!isPromise$1(_=this.runOnRoot(l))){B.n=5;break}return B.p=2,B.n=3,_;case 3:B.n=5;break;case 4:throw B.p=4,D=B.v,this.handleError(D);case 5:e++,B.n=1;break;case 6:if(this.prepareVisitors(),!this.hasListener){B.n=21;break}S=this.result.root;case 7:if(S[_r]){B.n=14;break}S[_r]=!0,k=[toStack$1(S)];case 8:if(!(k.length>0)){B.n=13;break}if(!isPromise$1(E=this.visitTick(k))){B.n=12;break}return B.p=9,B.n=10,E;case 10:B.n=12;break;case 11:throw B.p=11,O=B.v,T=k[k.length-1].node,this.handleError(O,T);case 12:B.n=8;break;case 13:B.n=7;break;case 14:if(!this.listeners.OnceExit){B.n=21;break}M=_createForOfIteratorHelper2(this.listeners.OnceExit),B.p=15,I=_regenerator().m(function _loop(){var e,l,_,k,E;return _regenerator().w(function(T){for(;;)switch(T.p=T.n){case 0:if(e=_slicedToArray(R.value,2),l=e[0],_=e[1],U.result.lastPlugin=l,T.p=1,"document"!==S.type){T.n=3;break}return k=S.nodes.map(function(e){return _(e,U.helpers)}),T.n=2,Promise.all(k);case 2:T.n=4;break;case 3:return T.n=4,_(S,U.helpers);case 4:T.n=6;break;case 5:throw T.p=5,E=T.v,U.handleError(E);case 6:return T.a(2)}},_loop,null,[[1,5]])}),M.s();case 16:if((R=M.n()).done){B.n=18;break}return B.d(_regeneratorValues(I()),17);case 17:B.n=16;break;case 18:B.n=20;break;case 19:B.p=19,L=B.v,M.e(L);case 20:return B.p=20,M.f(),B.f(20);case 21:return this.processed=!0,B.a(2,this.stringify())}},_callee23,this,[[15,19,20,21],[9,11],[2,4]])})),function(){return e.apply(this,arguments)})},{key:"runOnRoot",value:function(e){var l=this;this.result.lastPlugin=e;try{if("object"===_typeof3(e)&&e.Once){if("document"===this.result.root.type){var _=this.result.root.nodes.map(function(_){return e.Once(_,l.helpers)});return isPromise$1(_[0])?Promise.all(_):_}return e.Once(this.result.root,this.helpers)}if("function"==typeof e)return e(this.result.root,this.result)}catch(S){throw this.handleError(S)}}},{key:"stringify",value:function(){if(this.error)throw this.error;if(this.stringified)return this.result;this.stringified=!0,this.sync();var e=this.result.opts,l=wr;e.syntax&&(l=e.syntax.stringify),e.stringifier&&(l=e.stringifier),l.stringify&&(l=l.stringify);var _=new Sr(l,this.result.root,this.result.opts).generate();return this.result.css=_[0],this.result.map=_[1],this.result}},{key:"sync",value:function(){if(this.error)throw this.error;if(this.processed)return this.result;if(this.processed=!0,this.processing)throw this.getAsyncError();var e,l=_createForOfIteratorHelper2(this.plugins);try{for(l.s();!(e=l.n()).done;){var _=e.value;if(isPromise$1(this.runOnRoot(_)))throw this.getAsyncError()}}catch(M){l.e(M)}finally{l.f()}if(this.prepareVisitors(),this.hasListener){for(var S=this.result.root;!S[_r];)S[_r]=!0,this.walkSync(S);if(this.listeners.OnceExit)if("document"===S.type){var k,E=_createForOfIteratorHelper2(S.nodes);try{for(E.s();!(k=E.n()).done;){var T=k.value;this.visitSync(this.listeners.OnceExit,T)}}catch(M){E.e(M)}finally{E.f()}}else this.visitSync(this.listeners.OnceExit,S)}return this.result}},{key:"then",value:function(e,l){return this.async().then(e,l)}},{key:"toString",value:function(){return this.css}},{key:"visitSync",value:function(e,l){var _,S=_createForOfIteratorHelper2(e);try{for(S.s();!(_=S.n()).done;){var k=_slicedToArray(_.value,2),E=k[0],T=k[1];this.result.lastPlugin=E;var M=void 0;try{M=T(l,this.helpers)}catch(R){throw this.handleError(R,l.proxyOf)}if("root"!==l.type&&"document"!==l.type&&!l.parent)return!0;if(isPromise$1(M))throw this.getAsyncError()}}catch(I){S.e(I)}finally{S.f()}}},{key:"visitTick",value:function(e){var l=e[e.length-1],_=l.node,S=l.visitors;if("root"===_.type||"document"===_.type||_.parent){if(S.length>0&&l.visitorIndex<S.length){var k=_slicedToArray(S[l.visitorIndex],2),E=k[0],T=k[1];l.visitorIndex+=1,l.visitorIndex===S.length&&(l.visitors=[],l.visitorIndex=0),this.result.lastPlugin=E;try{return T(_.toProxy(),this.helpers)}catch(O){throw this.handleError(O,_)}}if(0!==l.iterator){for(var M,R=l.iterator;M=_.nodes[_.indexes[R]];)if(_.indexes[R]+=1,!M[_r])return M[_r]=!0,void e.push(toStack$1(M));l.iterator=0,delete _.indexes[R]}for(var I=l.events;l.eventIndex<I.length;){var D=I[l.eventIndex];if(l.eventIndex+=1,0===D)return void(_.nodes&&_.nodes.length&&(_[_r]=!0,l.iterator=_.getIterator()));if(this.listeners[D])return void(l.visitors=this.listeners[D])}e.pop()}else e.pop()}},{key:"walkSync",value:function(e){var l=this;e[_r]=!0;var _,S=_createForOfIteratorHelper2(getEvents$1(e));try{for(S.s();!(_=S.n()).done;){var k=_.value;if(0===k)e.nodes&&e.each(function(e){e[_r]||l.walkSync(e)});else{var E=this.listeners[k];if(E&&this.visitSync(E,e.toProxy()))return}}}catch(T){S.e(T)}finally{S.f()}}},{key:"warnings",value:function(){return this.sync().warnings()}},{key:"content",get:function(){return this.stringify().content}},{key:"css",get:function(){return this.stringify().css}},{key:"map",get:function(){return this.stringify().map}},{key:"messages",get:function(){return this.sync().messages}},{key:"opts",get:function(){return this.result.opts}},{key:"processor",get:function(){return this.result.processor}},{key:"root",get:function(){return this.sync().root}},{key:Symbol.toStringTag,get:function(){return"LazyResult"}}]);var e}();Pr.registerPostcss=function(e){Ir=e};var Dr=Pr;Pr.default=Pr,Cr.registerLazyResult(Pr),kr.registerLazyResult(Pr);var Or=nt,Lr=pe,Ur=yr,Fr=kt,Nr=function(){return _createClass3(function NoWorkResult(e,l,_){var S;_classCallCheck3(this,NoWorkResult),l=l.toString(),this.stringified=!1,this._processor=e,this._css=l,this._opts=_,this._map=void 0;var k=Lr;this.result=new Fr(this._processor,S,this._opts),this.result.css=l;var E=this;Object.defineProperty(this.result,"root",{get:function(){return E.root}});var T=new Or(k,S,this._opts,l);if(T.isMap()){var M=_slicedToArray(T.generate(),2),R=M[0],I=M[1];R&&(this.result.css=R),I&&(this.result.map=I)}else T.clearAnnotation(),this.result.css=T.css},[{key:"async",value:function(){return this.error?Promise.reject(this.error):Promise.resolve(this.result)}},{key:"catch",value:function(e){return this.async().catch(e)}},{key:"finally",value:function(e){return this.async().then(e,e)}},{key:"sync",value:function(){if(this.error)throw this.error;return this.result}},{key:"then",value:function(e,l){return this.async().then(e,l)}},{key:"toString",value:function(){return this._css}},{key:"warnings",value:function(){return[]}},{key:"content",get:function(){return this.result.css}},{key:"css",get:function(){return this.result.css}},{key:"map",get:function(){return this.result.map}},{key:"messages",get:function(){return[]}},{key:"opts",get:function(){return this.result.opts}},{key:"processor",get:function(){return this.result.processor}},{key:"root",get:function(){if(this._root)return this._root;var e,l=Ur;try{e=l(this._css,this._opts)}catch(_){this.error=_}if(this.error)throw this.error;return this._root=e,e}},{key:Symbol.toStringTag,get:function(){return"NoWorkResult"}}])}(),Br=Nr;Nr.default=Nr;var zr=Br,Gr=Dr,jr=_t,Hr=tr,Vr=function(){return _createClass3(function Processor(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];_classCallCheck3(this,Processor),this.version="8.4.38",this.plugins=this.normalize(e)},[{key:"normalize",value:function(e){var l,_=[],S=_createForOfIteratorHelper2(e);try{for(S.s();!(l=S.n()).done;){var k=l.value;if(!0===k.postcss?k=k():k.postcss&&(k=k.postcss),"object"===_typeof3(k)&&Array.isArray(k.plugins))_=_.concat(k.plugins);else if("object"===_typeof3(k)&&k.postcssPlugin)_.push(k);else if("function"==typeof k)_.push(k);else if("object"!==_typeof3(k)||!k.parse&&!k.stringify)throw new Error(k+" is not a PostCSS plugin")}}catch(E){S.e(E)}finally{S.f()}return _}},{key:"process",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.plugins.length||l.parser||l.stringifier||l.syntax?new Gr(this,e,l):new zr(this,e,l)}},{key:"use",value:function(e){return this.plugins=this.plugins.concat(this.normalize([e])),this}}])}(),Wr=Vr;Vr.default=Vr,Hr.registerProcessor(Vr),jr.registerProcessor(Vr);var qr=xe,Xr=Ie,Kr=at,Yr=Qt,Qr=qe,Jr=tr,Zr=sr;function fromJSON$1$1(_,S){if(Array.isArray(_))return _.map(function(e){return fromJSON$1$1(e)});var k=_.inputs,E=_objectWithoutProperties3(_,e);if(k){S=[];var T,M=_createForOfIteratorHelper2(k);try{for(M.s();!(T=M.n()).done;){var R=_objectSpread2(_objectSpread2({},T.value),{},{__proto__:Qr.prototype});R.map&&(R.map=_objectSpread2(_objectSpread2({},R.map),{},{__proto__:Xr.prototype})),S.push(R)}}catch(L){M.e(L)}finally{M.f()}}if(E.nodes&&(E.nodes=_.nodes.map(function(e){return fromJSON$1$1(e,S)})),E.source){var I=E.source,D=I.inputId,O=_objectWithoutProperties3(I,l);E.source=O,null!=D&&(E.source.input=S[D])}if("root"===E.type)return new Jr(E);if("decl"===E.type)return new qr(E);if("rule"===E.type)return new Zr(E);if("comment"===E.type)return new Kr(E);if("atrule"===E.type)return new Yr(E);throw new Error("Unknown node type: "+_.type)}var $r=fromJSON$1$1;fromJSON$1$1.default=fromJSON$1$1;var en=ue,tn=xe,rn=Dr,nn=vt,an=Wr,sn=pe,un=$r,ln=_t,cn=St,hn=at,dn=Qt,fn=kt,pn=qe,vn=yr,gn=nr,mn=sr,yn=tr,_n=Se;function postcss$3(){for(var e=arguments.length,l=new Array(e),_=0;_<e;_++)l[_]=arguments[_];return 1===l.length&&Array.isArray(l[0])&&(l=l[0]),new an(l)}postcss$3.plugin=function(e,l){var _,S=!1;function creator(){console&&console.warn&&!S&&(S=!0,T.LANG&&T.LANG.startsWith("cn"));var _=l.apply(void 0,arguments);return _.postcssPlugin=e,_.postcssVersion=(new an).version,_}return Object.defineProperty(creator,"postcss",{get:function(){return _||(_=creator()),_}}),creator.process=function(e,l,_){return postcss$3([creator(_)]).process(e,l)},creator},postcss$3.stringify=sn,postcss$3.parse=vn,postcss$3.fromJSON=un,postcss$3.list=gn,postcss$3.comment=function(e){return new hn(e)},postcss$3.atRule=function(e){return new dn(e)},postcss$3.decl=function(e){return new tn(e)},postcss$3.rule=function(e){return new mn(e)},postcss$3.root=function(e){return new yn(e)},postcss$3.document=function(e){return new ln(e)},postcss$3.CssSyntaxError=en,postcss$3.Declaration=tn,postcss$3.Container=nn,postcss$3.Processor=an,postcss$3.Document=ln,postcss$3.Comment=hn,postcss$3.Warning=cn,postcss$3.AtRule=dn,postcss$3.Result=fn,postcss$3.Input=pn,postcss$3.Rule=mn,postcss$3.Root=yn,postcss$3.Node=_n,rn.registerPostcss(postcss$3);var bn=postcss$3;postcss$3.default=postcss$3;var Sn=getDefaultExportFromCjs$1(bn);Sn.stringify,Sn.fromJSON,Sn.plugin,Sn.parse,Sn.list,Sn.document,Sn.comment,Sn.atRule,Sn.rule,Sn.decl,Sn.root,Sn.CssSyntaxError,Sn.Declaration,Sn.Container,Sn.Processor,Sn.Document,Sn.Comment,Sn.Warning,Sn.AtRule,Sn.Result,Sn.Input,Sn.Rule,Sn.Root,Sn.Node;var wn=Object.defineProperty,__publicField2=function(e,l,_){return function(e,l,_){return l in e?wn(e,l,{enumerable:!0,configurable:!0,writable:!0,value:_}):e[l]=_}(e,"symbol"!==_typeof3(l)?l+"":l,_)};function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function getAugmentedNamespace(e){if(e.__esModule)return e;var l=e.default;if("function"==typeof l){var _=function a22(){return this instanceof a22?Reflect.construct(l,arguments,this.constructor):l.apply(this,arguments)};_.prototype=l.prototype}else _={};return Object.defineProperty(_,"__esModule",{value:!0}),Object.keys(e).forEach(function(l){var S=Object.getOwnPropertyDescriptor(e,l);Object.defineProperty(_,l,S.get?S:{enumerable:!0,get:function(){return e[l]}})}),_}var xn={exports:{}},kn=String,create=function(){return{isColorSupported:!1,reset:kn,bold:kn,dim:kn,italic:kn,underline:kn,inverse:kn,hidden:kn,strikethrough:kn,black:kn,red:kn,green:kn,yellow:kn,blue:kn,magenta:kn,cyan:kn,white:kn,gray:kn,bgBlack:kn,bgRed:kn,bgGreen:kn,bgYellow:kn,bgBlue:kn,bgMagenta:kn,bgCyan:kn,bgWhite:kn}};xn.exports=create(),xn.exports.createColors=create;var An=xn.exports,En=getAugmentedNamespace(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"}))),Cn=An,Tn=En,Mn=function(e){function CssSyntaxError2(e,l,_,S,k,E){var T;return _classCallCheck3(this,CssSyntaxError2),(T=_callSuper(this,CssSyntaxError2,[e])).name="CssSyntaxError",T.reason=e,k&&(T.file=k),S&&(T.source=S),E&&(T.plugin=E),void 0!==l&&void 0!==_&&("number"==typeof l?(T.line=l,T.column=_):(T.line=l.line,T.column=l.column,T.endLine=_.line,T.endColumn=_.column)),T.setMessage(),Error.captureStackTrace&&Error.captureStackTrace(T,CssSyntaxError2),T}return _inherits(CssSyntaxError2,e),_createClass3(CssSyntaxError2,[{key:"setMessage",value:function(){this.message=this.plugin?this.plugin+": ":"",this.message+=this.file?this.file:"<css input>",void 0!==this.line&&(this.message+=":"+this.line+":"+this.column),this.message+=": "+this.reason}},{key:"showSourceCode",value:function(e){var l=this;if(!this.source)return"";var _=this.source;null==e&&(e=Cn.isColorSupported),Tn&&e&&(_=Tn(_));var S,k,E=_.split(/\r?\n/),T=Math.max(this.line-3,0),M=Math.min(this.line+2,E.length),R=String(M).length;if(e){var I=Cn.createColors(!0),D=I.bold,O=I.gray,L=I.red;S=function(e){return D(L(e))},k=function(e){return O(e)}}else S=k=function(e){return e};return E.slice(T,M).map(function(e,_){var E=T+1+_,M=" "+(" "+E).slice(-R)+" | ";if(E===l.line){var I=k(M.replace(/\d/g," "))+e.slice(0,l.column-1).replace(/[^\t]/g," ");return S(">")+k(M)+e+"\n "+I+S("^")}return" "+k(M)+e}).join("\n")}},{key:"toString",value:function(){var e=this.showSourceCode();return e&&(e="\n\n"+e+"\n"),this.name+": "+this.message+e}}])}(_wrapNativeSuper(Error)),Rn=Mn;Mn.default=Mn;var In={};In.isClean=Symbol("isClean"),In.my=Symbol("my");var Pn={after:"\n",beforeClose:"\n",beforeComment:"\n",beforeDecl:"\n",beforeOpen:" ",beforeRule:"\n",colon:": ",commentLeft:" ",commentRight:" ",emptyBody:"",indent:"    ",semicolon:!1};var Dn=function(){return _createClass3(function Stringifier2(e){_classCallCheck3(this,Stringifier2),this.builder=e},[{key:"atrule",value:function(e,l){var _="@"+e.name,S=e.params?this.rawValue(e,"params"):"";if(void 0!==e.raws.afterName?_+=e.raws.afterName:S&&(_+=" "),e.nodes)this.block(e,_+S);else{var k=(e.raws.between||"")+(l?";":"");this.builder(_+S+k,e)}}},{key:"beforeAfter",value:function(e,l){var _;_="decl"===e.type?this.raw(e,null,"beforeDecl"):"comment"===e.type?this.raw(e,null,"beforeComment"):"before"===l?this.raw(e,null,"beforeRule"):this.raw(e,null,"beforeClose");for(var S=e.parent,k=0;S&&"root"!==S.type;)k+=1,S=S.parent;if(_.includes("\n")){var E=this.raw(e,null,"indent");if(E.length)for(var T=0;T<k;T++)_+=E}return _}},{key:"block",value:function(e,l){var _,S=this.raw(e,"between","beforeOpen");this.builder(l+S+"{",e,"start"),e.nodes&&e.nodes.length?(this.body(e),_=this.raw(e,"after")):_=this.raw(e,"after","emptyBody"),_&&this.builder(_),this.builder("}",e,"end")}},{key:"body",value:function(e){for(var l=e.nodes.length-1;l>0&&"comment"===e.nodes[l].type;)l-=1;for(var _=this.raw(e,"semicolon"),S=0;S<e.nodes.length;S++){var k=e.nodes[S],E=this.raw(k,"before");E&&this.builder(E),this.stringify(k,l!==S||_)}}},{key:"comment",value:function(e){var l=this.raw(e,"left","commentLeft"),_=this.raw(e,"right","commentRight");this.builder("/*"+l+e.text+_+"*/",e)}},{key:"decl",value:function(e,l){var _=this.raw(e,"between","colon"),S=e.prop+_+this.rawValue(e,"value");e.important&&(S+=e.raws.important||" !important"),l&&(S+=";"),this.builder(S,e)}},{key:"document",value:function(e){this.body(e)}},{key:"raw",value:function(e,l,_){var S;if(_||(_=l),l&&void 0!==(S=e.raws[l]))return S;var k=e.parent;if("before"===_){if(!k||"root"===k.type&&k.first===e)return"";if(k&&"document"===k.type)return""}if(!k)return Pn[_];var E=e.root();if(E.rawCache||(E.rawCache={}),void 0!==E.rawCache[_])return E.rawCache[_];if("before"===_||"after"===_)return this.beforeAfter(e,_);var T,M="raw"+((T=_)[0].toUpperCase()+T.slice(1));return this[M]?S=this[M](E,e):E.walk(function(e){if(void 0!==(S=e.raws[l]))return!1}),void 0===S&&(S=Pn[_]),E.rawCache[_]=S,S}},{key:"rawBeforeClose",value:function(e){var l;return e.walk(function(e){if(e.nodes&&e.nodes.length>0&&void 0!==e.raws.after)return(l=e.raws.after).includes("\n")&&(l=l.replace(/[^\n]+$/,"")),!1}),l&&(l=l.replace(/\S/g,"")),l}},{key:"rawBeforeComment",value:function(e,l){var _;return e.walkComments(function(e){if(void 0!==e.raws.before)return(_=e.raws.before).includes("\n")&&(_=_.replace(/[^\n]+$/,"")),!1}),void 0===_?_=this.raw(l,null,"beforeDecl"):_&&(_=_.replace(/\S/g,"")),_}},{key:"rawBeforeDecl",value:function(e,l){var _;return e.walkDecls(function(e){if(void 0!==e.raws.before)return(_=e.raws.before).includes("\n")&&(_=_.replace(/[^\n]+$/,"")),!1}),void 0===_?_=this.raw(l,null,"beforeRule"):_&&(_=_.replace(/\S/g,"")),_}},{key:"rawBeforeOpen",value:function(e){var l;return e.walk(function(e){if("decl"!==e.type&&void 0!==(l=e.raws.between))return!1}),l}},{key:"rawBeforeRule",value:function(e){var l;return e.walk(function(_){if(_.nodes&&(_.parent!==e||e.first!==_)&&void 0!==_.raws.before)return(l=_.raws.before).includes("\n")&&(l=l.replace(/[^\n]+$/,"")),!1}),l&&(l=l.replace(/\S/g,"")),l}},{key:"rawColon",value:function(e){var l;return e.walkDecls(function(e){if(void 0!==e.raws.between)return l=e.raws.between.replace(/[^\s:]/g,""),!1}),l}},{key:"rawEmptyBody",value:function(e){var l;return e.walk(function(e){if(e.nodes&&0===e.nodes.length&&void 0!==(l=e.raws.after))return!1}),l}},{key:"rawIndent",value:function(e){return e.raws.indent?e.raws.indent:(e.walk(function(_){var S=_.parent;if(S&&S!==e&&S.parent&&S.parent===e&&void 0!==_.raws.before){var k=_.raws.before.split("\n");return l=(l=k[k.length-1]).replace(/\S/g,""),!1}}),l);var l}},{key:"rawSemicolon",value:function(e){var l;return e.walk(function(e){if(e.nodes&&e.nodes.length&&"decl"===e.last.type&&void 0!==(l=e.raws.semicolon))return!1}),l}},{key:"rawValue",value:function(e,l){var _=e[l],S=e.raws[l];return S&&S.value===_?S.raw:_}},{key:"root",value:function(e){this.body(e),e.raws.after&&this.builder(e.raws.after)}},{key:"rule",value:function(e){this.block(e,this.rawValue(e,"selector")),e.raws.ownSemicolon&&this.builder(e.raws.ownSemicolon,e,"end")}},{key:"stringify",value:function(e,l){if(!this[e.type])throw new Error("Unknown AST node type "+e.type+". Maybe you need to change PostCSS stringifier.");this[e.type](e,l)}}])}(),On=Dn;Dn.default=Dn;var Ln=On;function stringify$4(e,l){new Ln(l).stringify(e)}var Un=stringify$4;stringify$4.default=stringify$4;var Fn=In.isClean,Nn=In.my,Bn=Rn,zn=On,Gn=Un;function cloneNode(e,l){var _=new e.constructor;for(var S in e)if(Object.prototype.hasOwnProperty.call(e,S)&&"proxyCache"!==S){var k=e[S],E=_typeof3(k);"parent"===S&&"object"===E?l&&(_[S]=l):"source"===S?_[S]=k:Array.isArray(k)?_[S]=k.map(function(e){return cloneNode(e,_)}):("object"===E&&null!==k&&(k=cloneNode(k)),_[S]=k)}return _}var jn=function(){return _createClass3(function Node3(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(var l in _classCallCheck3(this,Node3),this.raws={},this[Fn]=!1,this[Nn]=!0,e)if("nodes"===l){this.nodes=[];var _,S=_createForOfIteratorHelper2(e[l]);try{for(S.s();!(_=S.n()).done;){var k=_.value;"function"==typeof k.clone?this.append(k.clone()):this.append(k)}}catch(E){S.e(E)}finally{S.f()}}else this[l]=e[l]},[{key:"addToError",value:function(e){if(e.postcssNode=this,e.stack&&this.source&&/\n\s{4}at /.test(e.stack)){var l=this.source;e.stack=e.stack.replace(/\n\s{4}at /,"$&".concat(l.input.from,":").concat(l.start.line,":").concat(l.start.column,"$&"))}return e}},{key:"after",value:function(e){return this.parent.insertAfter(this,e),this}},{key:"assign",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(var l in e)this[l]=e[l];return this}},{key:"before",value:function(e){return this.parent.insertBefore(this,e),this}},{key:"cleanRaws",value:function(e){delete this.raws.before,delete this.raws.after,e||delete this.raws.between}},{key:"clone",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=cloneNode(this);for(var _ in e)l[_]=e[_];return l}},{key:"cloneAfter",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=this.clone(e);return this.parent.insertAfter(this,l),l}},{key:"cloneBefore",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=this.clone(e);return this.parent.insertBefore(this,l),l}},{key:"error",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.source){var _=this.rangeBy(l),S=_.end,k=_.start;return this.source.input.error(e,{column:k.column,line:k.line},{column:S.column,line:S.line},l)}return new Bn(e)}},{key:"getProxyProcessor",value:function(){return{get:function(e,l){return"proxyOf"===l?e:"root"===l?function(){return e.root().toProxy()}:e[l]},set:function(e,l,_){return e[l]===_||(e[l]=_,"prop"!==l&&"value"!==l&&"name"!==l&&"params"!==l&&"important"!==l&&"text"!==l||e.markDirty()),!0}}}},{key:"markDirty",value:function(){if(this[Fn]){this[Fn]=!1;for(var e=this;e=e.parent;)e[Fn]=!1}}},{key:"next",value:function(){if(this.parent){var e=this.parent.index(this);return this.parent.nodes[e+1]}}},{key:"positionBy",value:function(e,l){var _=this.source.start;if(e.index)_=this.positionInside(e.index,l);else if(e.word){var S=(l=this.toString()).indexOf(e.word);-1!==S&&(_=this.positionInside(S,l))}return _}},{key:"positionInside",value:function(e,l){for(var _=l||this.toString(),S=this.source.start.column,k=this.source.start.line,E=0;E<e;E++)"\n"===_[E]?(S=1,k+=1):S+=1;return{column:S,line:k}}},{key:"prev",value:function(){if(this.parent){var e=this.parent.index(this);return this.parent.nodes[e-1]}}},{key:"rangeBy",value:function(e){var l={column:this.source.start.column,line:this.source.start.line},_=this.source.end?{column:this.source.end.column+1,line:this.source.end.line}:{column:l.column+1,line:l.line};if(e.word){var S=this.toString(),k=S.indexOf(e.word);-1!==k&&(l=this.positionInside(k,S),_=this.positionInside(k+e.word.length,S))}else e.start?l={column:e.start.column,line:e.start.line}:e.index&&(l=this.positionInside(e.index)),e.end?_={column:e.end.column,line:e.end.line}:"number"==typeof e.endIndex?_=this.positionInside(e.endIndex):e.index&&(_=this.positionInside(e.index+1));return(_.line<l.line||_.line===l.line&&_.column<=l.column)&&(_={column:l.column+1,line:l.line}),{end:_,start:l}}},{key:"raw",value:function(e,l){return(new zn).raw(this,e,l)}},{key:"remove",value:function(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this}},{key:"replaceWith",value:function(){if(this.parent){for(var e=this,l=!1,_=arguments.length,S=new Array(_),k=0;k<_;k++)S[k]=arguments[k];for(var E=0,T=S;E<T.length;E++){var M=T[E];M===this?l=!0:l?(this.parent.insertAfter(e,M),e=M):this.parent.insertBefore(e,M)}l||this.remove()}return this}},{key:"root",value:function(){for(var e=this;e.parent&&"document"!==e.parent.type;)e=e.parent;return e}},{key:"toJSON",value:function(e,l){var _={},S=null==l;l=l||new Map;var k=0;for(var E in this)if(Object.prototype.hasOwnProperty.call(this,E)&&"parent"!==E&&"proxyCache"!==E){var T=this[E];if(Array.isArray(T))_[E]=T.map(function(e){return"object"===_typeof3(e)&&e.toJSON?e.toJSON(null,l):e});else if("object"===_typeof3(T)&&T.toJSON)_[E]=T.toJSON(null,l);else if("source"===E){var M=l.get(T.input);null==M&&(M=k,l.set(T.input,k),k++),_[E]={end:T.end,inputId:M,start:T.start}}else _[E]=T}return S&&(_.inputs=_toConsumableArray3(l.keys()).map(function(e){return e.toJSON()})),_}},{key:"toProxy",value:function(){return this.proxyCache||(this.proxyCache=new Proxy(this,this.getProxyProcessor())),this.proxyCache}},{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gn;e.stringify&&(e=e.stringify);var l="";return e(this,function(e){l+=e}),l}},{key:"warn",value:function(e,l,_){var S={node:this};for(var k in _)S[k]=_[k];return e.warn(l,S)}},{key:"proxyOf",get:function(){return this}}])}(),Hn=jn;jn.default=jn;var Vn=function(e){function Declaration2(e){var l;return _classCallCheck3(this,Declaration2),e&&void 0!==e.value&&"string"!=typeof e.value&&(e=_objectSpread2(_objectSpread2({},e),{},{value:String(e.value)})),(l=_callSuper(this,Declaration2,[e])).type="decl",l}return _inherits(Declaration2,e),_createClass3(Declaration2,[{key:"variable",get:function(){return this.prop.startsWith("--")||"$"===this.prop[0]}}])}(Hn),Wn=Vn;Vn.default=Vn;var nonSecure_nanoid=function(){for(var e="",l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:21;l--;)e+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[64*Math.random()|0];return e},qn=En.SourceMapConsumer,Xn=En.SourceMapGenerator,Kn=En.existsSync,Yn=En.readFileSync,Qn=En.dirname,Jn=En.join;var Zn=function(){return _createClass3(function PreviousMap2(e,l){if(_classCallCheck3(this,PreviousMap2),!1!==l.map){this.loadAnnotation(e),this.inline=this.startWith(this.annotation,"data:");var _=l.map?l.map.prev:void 0,S=this.loadMap(l.from,_);!this.mapFile&&l.from&&(this.mapFile=l.from),this.mapFile&&(this.root=Qn(this.mapFile)),S&&(this.text=S)}},[{key:"consumer",value:function(){return this.consumerCache||(this.consumerCache=new qn(this.text)),this.consumerCache}},{key:"decodeInline",value:function(e){var l;if(/^data:application\/json;charset=utf-?8,/.test(e)||/^data:application\/json,/.test(e))return decodeURIComponent(e.substr(RegExp.lastMatch.length));if(/^data:application\/json;charset=utf-?8;base64,/.test(e)||/^data:application\/json;base64,/.test(e))return l=e.substr(RegExp.lastMatch.length),Buffer?Buffer.from(l,"base64").toString():window.atob(l);var _=e.match(/data:application\/json;([^,]+),/)[1];throw new Error("Unsupported source map encoding "+_)}},{key:"getAnnotationURL",value:function(e){return e.replace(/^\/\*\s*# sourceMappingURL=/,"").trim()}},{key:"isMap",value:function(e){return"object"===_typeof3(e)&&("string"==typeof e.mappings||"string"==typeof e._mappings||Array.isArray(e.sections))}},{key:"loadAnnotation",value:function(e){var l=e.match(/\/\*\s*# sourceMappingURL=/gm);if(l){var _=e.lastIndexOf(l.pop()),S=e.indexOf("*/",_);_>-1&&S>-1&&(this.annotation=this.getAnnotationURL(e.substring(_,S)))}}},{key:"loadFile",value:function(e){if(this.root=Qn(e),Kn(e))return this.mapFile=e,Yn(e,"utf-8").toString().trim()}},{key:"loadMap",value:function(e,l){if(!1===l)return!1;if(l){if("string"==typeof l)return l;if("function"!=typeof l){if(l instanceof qn)return Xn.fromSourceMap(l).toString();if(l instanceof Xn)return l.toString();if(this.isMap(l))return JSON.stringify(l);throw new Error("Unsupported previous source map format: "+l.toString())}var _=l(e);if(_){var S=this.loadFile(_);if(!S)throw new Error("Unable to load previous source map: "+_.toString());return S}}else{if(this.inline)return this.decodeInline(this.annotation);if(this.annotation){var k=this.annotation;return e&&(k=Jn(Qn(e),k)),this.loadFile(k)}}}},{key:"startWith",value:function(e,l){return!!e&&e.substr(0,l.length)===l}},{key:"withContent",value:function(){return!!(this.consumer().sourcesContent&&this.consumer().sourcesContent.length>0)}}])}(),$n=Zn;Zn.default=Zn;var ei=En.SourceMapConsumer,ti=En.SourceMapGenerator,ri=En.fileURLToPath,ni=En.pathToFileURL,ii=En.isAbsolute,ai=En.resolve,oi=nonSecure_nanoid,si=En,ui=Rn,li=$n,ci=Symbol("fromOffsetCache"),hi=Boolean(ei&&ti),di=Boolean(ai&&ii),fi=function(){return _createClass3(function Input2(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(_classCallCheck3(this,Input2),null==e||"object"===_typeof3(e)&&!e.toString)throw new Error("PostCSS received ".concat(e," instead of CSS string"));if(this.css=e.toString(),"\ufeff"===this.css[0]||""===this.css[0]?(this.hasBOM=!0,this.css=this.css.slice(1)):this.hasBOM=!1,l.from&&(!di||/^\w+:\/\//.test(l.from)||ii(l.from)?this.file=l.from:this.file=ai(l.from)),di&&hi){var _=new li(this.css,l);if(_.text){this.map=_;var S=_.consumer().file;!this.file&&S&&(this.file=this.mapResolve(S))}}this.file||(this.id="<input css "+oi(6)+">"),this.map&&(this.map.file=this.from)},[{key:"error",value:function(e,l,_){var S,k,E,T=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(l&&"object"===_typeof3(l)){var M=l,R=_;if("number"==typeof M.offset){var I=this.fromOffset(M.offset);l=I.line,_=I.col}else l=M.line,_=M.column;if("number"==typeof R.offset){var D=this.fromOffset(R.offset);k=D.line,E=D.col}else k=R.line,E=R.column}else if(!_){var O=this.fromOffset(l);l=O.line,_=O.col}var L=this.origin(l,_,k,E);return(S=L?new ui(e,void 0===L.endLine?L.line:{column:L.column,line:L.line},void 0===L.endLine?L.column:{column:L.endColumn,line:L.endLine},L.source,L.file,T.plugin):new ui(e,void 0===k?l:{column:_,line:l},void 0===k?_:{column:E,line:k},this.css,this.file,T.plugin)).input={column:_,endColumn:E,endLine:k,line:l,source:this.css},this.file&&(ni&&(S.input.url=ni(this.file).toString()),S.input.file=this.file),S}},{key:"fromOffset",value:function(e){var l;if(this[ci])l=this[ci];else{var _=this.css.split("\n");l=new Array(_.length);for(var S=0,k=0,E=_.length;k<E;k++)l[k]=S,S+=_[k].length+1;this[ci]=l}var T=0;if(e>=l[l.length-1])T=l.length-1;else for(var M,R=l.length-2;T<R;)if(e<l[M=T+(R-T>>1)])R=M-1;else{if(!(e>=l[M+1])){T=M;break}T=M+1}return{col:e-l[T]+1,line:T+1}}},{key:"mapResolve",value:function(e){return/^\w+:\/\//.test(e)?e:ai(this.map.consumer().sourceRoot||this.map.root||".",e)}},{key:"origin",value:function(e,l,_,S){if(!this.map)return!1;var k,E,T=this.map.consumer(),M=T.originalPositionFor({column:l,line:e});if(!M.source)return!1;"number"==typeof _&&(k=T.originalPositionFor({column:S,line:_})),E=ii(M.source)?ni(M.source):new URL(M.source,this.map.consumer().sourceRoot||ni(this.map.mapFile));var R={column:M.column,endColumn:k&&k.column,endLine:k&&k.line,line:M.line,url:E.toString()};if("file:"===E.protocol){if(!ri)throw new Error("file: protocol is not available in this PostCSS build");R.file=ri(E)}var I=T.sourceContentFor(M.source);return I&&(R.source=I),R}},{key:"toJSON",value:function(){for(var e={},l=0,_=["hasBOM","css","file","id"];l<_.length;l++){var S=_[l];null!=this[S]&&(e[S]=this[S])}return this.map&&(e.map=_objectSpread2({},this.map),e.map.consumerCache&&(e.map.consumerCache=void 0)),e}},{key:"from",get:function(){return this.file||this.id}}])}(),pi=fi;fi.default=fi,si&&si.registerInput&&si.registerInput(fi);var vi=En.SourceMapConsumer,gi=En.SourceMapGenerator,mi=En.dirname,yi=En.relative,_i=En.resolve,bi=En.sep,Si=En.pathToFileURL,wi=pi,xi=Boolean(vi&&gi),ki=Boolean(mi&&_i&&yi&&bi),Ai=function(){return _createClass3(function MapGenerator2(e,l,_,S){_classCallCheck3(this,MapGenerator2),this.stringify=e,this.mapOpts=_.map||{},this.root=l,this.opts=_,this.css=S,this.originalCSS=S,this.usesFileUrls=!this.mapOpts.from&&this.mapOpts.absolute,this.memoizedFileURLs=new Map,this.memoizedPaths=new Map,this.memoizedURLs=new Map},[{key:"addAnnotation",value:function(){var e;e=this.isInline()?"data:application/json;base64,"+this.toBase64(this.map.toString()):"string"==typeof this.mapOpts.annotation?this.mapOpts.annotation:"function"==typeof this.mapOpts.annotation?this.mapOpts.annotation(this.opts.to,this.root):this.outputFile()+".map";var l="\n";this.css.includes("\r\n")&&(l="\r\n"),this.css+=l+"/*# sourceMappingURL="+e+" */"}},{key:"applyPrevMaps",value:function(){var e,l=_createForOfIteratorHelper2(this.previous());try{for(l.s();!(e=l.n()).done;){var _=e.value,S=this.toUrl(this.path(_.file)),k=_.root||mi(_.file),E=void 0;!1===this.mapOpts.sourcesContent?(E=new vi(_.text)).sourcesContent&&(E.sourcesContent=null):E=_.consumer(),this.map.applySourceMap(E,S,this.toUrl(this.path(k)))}}catch(T){l.e(T)}finally{l.f()}}},{key:"clearAnnotation",value:function(){if(!1!==this.mapOpts.annotation)if(this.root)for(var e,l=this.root.nodes.length-1;l>=0;l--)"comment"===(e=this.root.nodes[l]).type&&0===e.text.indexOf("# sourceMappingURL=")&&this.root.removeChild(l);else this.css&&(this.css=this.css.replace(/\n*?\/\*#[\S\s]*?\*\/$/gm,""))}},{key:"generate",value:function(){if(this.clearAnnotation(),ki&&xi&&this.isMap())return this.generateMap();var e="";return this.stringify(this.root,function(l){e+=l}),[e]}},{key:"generateMap",value:function(){if(this.root)this.generateString();else if(1===this.previous().length){var e=this.previous()[0].consumer();e.file=this.outputFile(),this.map=gi.fromSourceMap(e,{ignoreInvalidMapping:!0})}else this.map=new gi({file:this.outputFile(),ignoreInvalidMapping:!0}),this.map.addMapping({generated:{column:0,line:1},original:{column:0,line:1},source:this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>"});return this.isSourcesContent()&&this.setSourcesContent(),this.root&&this.previous().length>0&&this.applyPrevMaps(),this.isAnnotation()&&this.addAnnotation(),this.isInline()?[this.css]:[this.css,this.map]}},{key:"generateString",value:function(){var e=this;this.css="",this.map=new gi({file:this.outputFile(),ignoreInvalidMapping:!0});var l,_,S=1,k=1,E="<no source>",T={generated:{column:0,line:0},original:{column:0,line:0},source:""};this.stringify(this.root,function(M,R,I){if(e.css+=M,R&&"end"!==I&&(T.generated.line=S,T.generated.column=k-1,R.source&&R.source.start?(T.source=e.sourcePath(R),T.original.line=R.source.start.line,T.original.column=R.source.start.column-1,e.map.addMapping(T)):(T.source=E,T.original.line=1,T.original.column=0,e.map.addMapping(T))),(l=M.match(/\n/g))?(S+=l.length,_=M.lastIndexOf("\n"),k=M.length-_):k+=M.length,R&&"start"!==I){var D=R.parent||{raws:{}};("decl"===R.type||"atrule"===R.type&&!R.nodes)&&R===D.last&&!D.raws.semicolon||(R.source&&R.source.end?(T.source=e.sourcePath(R),T.original.line=R.source.end.line,T.original.column=R.source.end.column-1,T.generated.line=S,T.generated.column=k-2,e.map.addMapping(T)):(T.source=E,T.original.line=1,T.original.column=0,T.generated.line=S,T.generated.column=k-1,e.map.addMapping(T)))}})}},{key:"isAnnotation",value:function(){return!!this.isInline()||(void 0!==this.mapOpts.annotation?this.mapOpts.annotation:!this.previous().length||this.previous().some(function(e){return e.annotation}))}},{key:"isInline",value:function(){if(void 0!==this.mapOpts.inline)return this.mapOpts.inline;var e=this.mapOpts.annotation;return(void 0===e||!0===e)&&(!this.previous().length||this.previous().some(function(e){return e.inline}))}},{key:"isMap",value:function(){return void 0!==this.opts.map?!!this.opts.map:this.previous().length>0}},{key:"isSourcesContent",value:function(){return void 0!==this.mapOpts.sourcesContent?this.mapOpts.sourcesContent:!this.previous().length||this.previous().some(function(e){return e.withContent()})}},{key:"outputFile",value:function(){return this.opts.to?this.path(this.opts.to):this.opts.from?this.path(this.opts.from):"to.css"}},{key:"path",value:function(e){if(this.mapOpts.absolute)return e;if(60===e.charCodeAt(0))return e;if(/^\w+:\/\//.test(e))return e;var l=this.memoizedPaths.get(e);if(l)return l;var _=this.opts.to?mi(this.opts.to):".";"string"==typeof this.mapOpts.annotation&&(_=mi(_i(_,this.mapOpts.annotation)));var S=yi(_,e);return this.memoizedPaths.set(e,S),S}},{key:"previous",value:function(){var e=this;if(!this.previousMaps)if(this.previousMaps=[],this.root)this.root.walk(function(l){if(l.source&&l.source.input.map){var _=l.source.input.map;e.previousMaps.includes(_)||e.previousMaps.push(_)}});else{var l=new wi(this.originalCSS,this.opts);l.map&&this.previousMaps.push(l.map)}return this.previousMaps}},{key:"setSourcesContent",value:function(){var e=this,l={};if(this.root)this.root.walk(function(_){if(_.source){var S=_.source.input.from;if(S&&!l[S]){l[S]=!0;var k=e.usesFileUrls?e.toFileUrl(S):e.toUrl(e.path(S));e.map.setSourceContent(k,_.source.input.css)}}});else if(this.css){var _=this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>";this.map.setSourceContent(_,this.css)}}},{key:"sourcePath",value:function(e){return this.mapOpts.from?this.toUrl(this.mapOpts.from):this.usesFileUrls?this.toFileUrl(e.source.input.from):this.toUrl(this.path(e.source.input.from))}},{key:"toBase64",value:function(e){return Buffer?Buffer.from(e).toString("base64"):window.btoa(unescape(encodeURIComponent(e)))}},{key:"toFileUrl",value:function(e){var l=this.memoizedFileURLs.get(e);if(l)return l;if(Si){var _=Si(e).toString();return this.memoizedFileURLs.set(e,_),_}throw new Error("`map.absolute` option is not available in this PostCSS build")}},{key:"toUrl",value:function(e){var l=this.memoizedURLs.get(e);if(l)return l;"\\"===bi&&(e=e.replace(/\\/g,"/"));var _=encodeURI(e).replace(/[#?]/g,encodeURIComponent);return this.memoizedURLs.set(e,_),_}}])}(),Ei=function(e){function Comment2(e){var l;return _classCallCheck3(this,Comment2),(l=_callSuper(this,Comment2,[e])).type="comment",l}return _inherits(Comment2,e),_createClass3(Comment2)}(Hn),Ci=Ei;Ei.default=Ei;var Ti,Mi,Ri,Ii,Pi=In.isClean,Di=In.my,Oi=Wn,Li=Ci;function cleanSource(e){return e.map(function(e){return e.nodes&&(e.nodes=cleanSource(e.nodes)),delete e.source,e})}function markDirtyUp(e){if(e[Pi]=!1,e.proxyOf.nodes){var l,_=_createForOfIteratorHelper2(e.proxyOf.nodes);try{for(_.s();!(l=_.n()).done;){markDirtyUp(l.value)}}catch(S){_.e(S)}finally{_.f()}}}var Ui=function(e){function Container2(){return _classCallCheck3(this,Container2),_callSuper(this,Container2,arguments)}return _inherits(Container2,e),_createClass3(Container2,[{key:"append",value:function(){for(var e=arguments.length,l=new Array(e),_=0;_<e;_++)l[_]=arguments[_];for(var S=0,k=l;S<k.length;S++){var E,T=k[S],M=_createForOfIteratorHelper2(this.normalize(T,this.last));try{for(M.s();!(E=M.n()).done;){var R=E.value;this.proxyOf.nodes.push(R)}}catch(I){M.e(I)}finally{M.f()}}return this.markDirty(),this}},{key:"cleanRaws",value:function(e){if(_superPropGet(Container2,"cleanRaws",this,3)([e]),this.nodes){var l,_=_createForOfIteratorHelper2(this.nodes);try{for(_.s();!(l=_.n()).done;){l.value.cleanRaws(e)}}catch(S){_.e(S)}finally{_.f()}}}},{key:"each",value:function(e){if(this.proxyOf.nodes){for(var l,_,S=this.getIterator();this.indexes[S]<this.proxyOf.nodes.length&&(l=this.indexes[S],!1!==(_=e(this.proxyOf.nodes[l],l)));)this.indexes[S]+=1;return delete this.indexes[S],_}}},{key:"every",value:function(e){return this.nodes.every(e)}},{key:"getIterator",value:function(){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={}),this.lastEach+=1;var e=this.lastEach;return this.indexes[e]=0,e}},{key:"getProxyProcessor",value:function(){return{get:function(e,l){return"proxyOf"===l?e:e[l]?"each"===l||"string"==typeof l&&l.startsWith("walk")?function(){for(var _=arguments.length,S=new Array(_),k=0;k<_;k++)S[k]=arguments[k];return e[l].apply(e,_toConsumableArray3(S.map(function(e){return"function"==typeof e?function(l,_){return e(l.toProxy(),_)}:e})))}:"every"===l||"some"===l?function(_){return e[l](function(e){for(var l=arguments.length,S=new Array(l>1?l-1:0),k=1;k<l;k++)S[k-1]=arguments[k];return _.apply(void 0,[e.toProxy()].concat(S))})}:"root"===l?function(){return e.root().toProxy()}:"nodes"===l?e.nodes.map(function(e){return e.toProxy()}):"first"===l||"last"===l?e[l].toProxy():e[l]:e[l]},set:function(e,l,_){return e[l]===_||(e[l]=_,"name"!==l&&"params"!==l&&"selector"!==l||e.markDirty()),!0}}}},{key:"index",value:function(e){return"number"==typeof e?e:(e.proxyOf&&(e=e.proxyOf),this.proxyOf.nodes.indexOf(e))}},{key:"insertAfter",value:function(e,l){var _=this.index(e),S=this.normalize(l,this.proxyOf.nodes[_]).reverse();_=this.index(e);var k,E,T=_createForOfIteratorHelper2(S);try{for(T.s();!(k=T.n()).done;){var M=k.value;this.proxyOf.nodes.splice(_+1,0,M)}}catch(I){T.e(I)}finally{T.f()}for(var R in this.indexes)_<(E=this.indexes[R])&&(this.indexes[R]=E+S.length);return this.markDirty(),this}},{key:"insertBefore",value:function(e,l){var _=this.index(e),S=0===_&&"prepend",k=this.normalize(l,this.proxyOf.nodes[_],S).reverse();_=this.index(e);var E,T,M=_createForOfIteratorHelper2(k);try{for(M.s();!(E=M.n()).done;){var R=E.value;this.proxyOf.nodes.splice(_,0,R)}}catch(D){M.e(D)}finally{M.f()}for(var I in this.indexes)_<=(T=this.indexes[I])&&(this.indexes[I]=T+k.length);return this.markDirty(),this}},{key:"normalize",value:function(e,l){var _=this;if("string"==typeof e)e=cleanSource(Ti(e).nodes);else if(void 0===e)e=[];else if(Array.isArray(e)){var S,k=_createForOfIteratorHelper2(e=e.slice(0));try{for(k.s();!(S=k.n()).done;){var E=S.value;E.parent&&E.parent.removeChild(E,"ignore")}}catch(D){k.e(D)}finally{k.f()}}else if("root"===e.type&&"document"!==this.type){var T,M=_createForOfIteratorHelper2(e=e.nodes.slice(0));try{for(M.s();!(T=M.n()).done;){var R=T.value;R.parent&&R.parent.removeChild(R,"ignore")}}catch(D){M.e(D)}finally{M.f()}}else if(e.type)e=[e];else if(e.prop){if(void 0===e.value)throw new Error("Value field is missed in node creation");"string"!=typeof e.value&&(e.value=String(e.value)),e=[new Oi(e)]}else if(e.selector)e=[new Mi(e)];else if(e.name)e=[new Ri(e)];else{if(!e.text)throw new Error("Unknown node type in node creation");e=[new Li(e)]}var I=e.map(function(e){return e[Di]||Container2.rebuild(e),(e=e.proxyOf).parent&&e.parent.removeChild(e),e[Pi]&&markDirtyUp(e),void 0===e.raws.before&&l&&void 0!==l.raws.before&&(e.raws.before=l.raws.before.replace(/\S/g,"")),e.parent=_.proxyOf,e});return I}},{key:"prepend",value:function(){for(var e=arguments.length,l=new Array(e),_=0;_<e;_++)l[_]=arguments[_];var S,k=_createForOfIteratorHelper2(l=l.reverse());try{for(k.s();!(S=k.n()).done;){var E,T=S.value,M=this.normalize(T,this.first,"prepend").reverse(),R=_createForOfIteratorHelper2(M);try{for(R.s();!(E=R.n()).done;){var I=E.value;this.proxyOf.nodes.unshift(I)}}catch(O){R.e(O)}finally{R.f()}for(var D in this.indexes)this.indexes[D]=this.indexes[D]+M.length}}catch(O){k.e(O)}finally{k.f()}return this.markDirty(),this}},{key:"push",value:function(e){return e.parent=this,this.proxyOf.nodes.push(e),this}},{key:"removeAll",value:function(){var e,l=_createForOfIteratorHelper2(this.proxyOf.nodes);try{for(l.s();!(e=l.n()).done;){e.value.parent=void 0}}catch(_){l.e(_)}finally{l.f()}return this.proxyOf.nodes=[],this.markDirty(),this}},{key:"removeChild",value:function(e){var l;for(var _ in e=this.index(e),this.proxyOf.nodes[e].parent=void 0,this.proxyOf.nodes.splice(e,1),this.indexes)(l=this.indexes[_])>=e&&(this.indexes[_]=l-1);return this.markDirty(),this}},{key:"replaceValues",value:function(e,l,_){return _||(_=l,l={}),this.walkDecls(function(S){l.props&&!l.props.includes(S.prop)||l.fast&&!S.value.includes(l.fast)||(S.value=S.value.replace(e,_))}),this.markDirty(),this}},{key:"some",value:function(e){return this.nodes.some(e)}},{key:"walk",value:function(e){return this.each(function(l,_){var S;try{S=e(l,_)}catch(k){throw l.addToError(k)}return!1!==S&&l.walk&&(S=l.walk(e)),S})}},{key:"walkAtRules",value:function(e,l){return l?e instanceof RegExp?this.walk(function(_,S){if("atrule"===_.type&&e.test(_.name))return l(_,S)}):this.walk(function(_,S){if("atrule"===_.type&&_.name===e)return l(_,S)}):(l=e,this.walk(function(e,_){if("atrule"===e.type)return l(e,_)}))}},{key:"walkComments",value:function(e){return this.walk(function(l,_){if("comment"===l.type)return e(l,_)})}},{key:"walkDecls",value:function(e,l){return l?e instanceof RegExp?this.walk(function(_,S){if("decl"===_.type&&e.test(_.prop))return l(_,S)}):this.walk(function(_,S){if("decl"===_.type&&_.prop===e)return l(_,S)}):(l=e,this.walk(function(e,_){if("decl"===e.type)return l(e,_)}))}},{key:"walkRules",value:function(e,l){return l?e instanceof RegExp?this.walk(function(_,S){if("rule"===_.type&&e.test(_.selector))return l(_,S)}):this.walk(function(_,S){if("rule"===_.type&&_.selector===e)return l(_,S)}):(l=e,this.walk(function(e,_){if("rule"===e.type)return l(e,_)}))}},{key:"first",get:function(){if(this.proxyOf.nodes)return this.proxyOf.nodes[0]}},{key:"last",get:function(){if(this.proxyOf.nodes)return this.proxyOf.nodes[this.proxyOf.nodes.length-1]}}])}(Hn);Ui.registerParse=function(e){Ti=e},Ui.registerRule=function(e){Mi=e},Ui.registerAtRule=function(e){Ri=e},Ui.registerRoot=function(e){Ii=e};var Fi=Ui;Ui.default=Ui,Ui.rebuild=function(e){"atrule"===e.type?Object.setPrototypeOf(e,Ri.prototype):"rule"===e.type?Object.setPrototypeOf(e,Mi.prototype):"decl"===e.type?Object.setPrototypeOf(e,Oi.prototype):"comment"===e.type?Object.setPrototypeOf(e,Li.prototype):"root"===e.type&&Object.setPrototypeOf(e,Ii.prototype),e[Di]=!0,e.nodes&&e.nodes.forEach(function(e){Ui.rebuild(e)})};var Ni,Bi,zi=function(e){function Document23(e){var l;return _classCallCheck3(this,Document23),(l=_callSuper(this,Document23,[_objectSpread2({type:"document"},e)])).nodes||(l.nodes=[]),l}return _inherits(Document23,e),_createClass3(Document23,[{key:"toResult",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Ni(new Bi,this,e).stringify()}}])}(Fi);zi.registerLazyResult=function(e){Ni=e},zi.registerProcessor=function(e){Bi=e};var Gi=zi;zi.default=zi;var ji=function(){return _createClass3(function Warning2(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(_classCallCheck3(this,Warning2),this.type="warning",this.text=e,l.node&&l.node.source){var _=l.node.rangeBy(l);this.line=_.start.line,this.column=_.start.column,this.endLine=_.end.line,this.endColumn=_.end.column}for(var S in l)this[S]=l[S]},[{key:"toString",value:function(){return this.node?this.node.error(this.text,{index:this.index,plugin:this.plugin,word:this.word}).message:this.plugin?this.plugin+": "+this.text:this.text}}])}(),Hi=ji;ji.default=ji;var Vi=Hi,Wi=function(){return _createClass3(function Result2(e,l,_){_classCallCheck3(this,Result2),this.processor=e,this.messages=[],this.root=l,this.opts=_,this.css=void 0,this.map=void 0},[{key:"toString",value:function(){return this.css}},{key:"warn",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};l.plugin||this.lastPlugin&&this.lastPlugin.postcssPlugin&&(l.plugin=this.lastPlugin.postcssPlugin);var _=new Vi(e,l);return this.messages.push(_),_}},{key:"warnings",value:function(){return this.messages.filter(function(e){return"warning"===e.type})}},{key:"content",get:function(){return this.css}}])}(),qi=Wi;Wi.default=Wi;var Xi="'".charCodeAt(0),Ki='"'.charCodeAt(0),Yi="\\".charCodeAt(0),Qi="/".charCodeAt(0),Ji="\n".charCodeAt(0),Zi=" ".charCodeAt(0),$i="\f".charCodeAt(0),ea="\t".charCodeAt(0),ta="\r".charCodeAt(0),ra="[".charCodeAt(0),na="]".charCodeAt(0),ia="(".charCodeAt(0),aa=")".charCodeAt(0),oa="{".charCodeAt(0),sa="}".charCodeAt(0),ua=";".charCodeAt(0),la="*".charCodeAt(0),ca=":".charCodeAt(0),ha="@".charCodeAt(0),da=/[\t\n\f\r "#'()/;[\\\]{}]/g,fa=/[\t\n\f\r !"#'():;@[\\\]{}]|\/(?=\*)/g,pa=/.[\r\n"'(/\\]/,va=/[\da-f]/i,ga=Fi,ma=function(e){function AtRule2(e){var l;return _classCallCheck3(this,AtRule2),(l=_callSuper(this,AtRule2,[e])).type="atrule",l}return _inherits(AtRule2,e),_createClass3(AtRule2,[{key:"append",value:function(){this.proxyOf.nodes||(this.nodes=[]);for(var e=arguments.length,l=new Array(e),_=0;_<e;_++)l[_]=arguments[_];return _superPropGet(AtRule2,"append",this,3)(l)}},{key:"prepend",value:function(){this.proxyOf.nodes||(this.nodes=[]);for(var e=arguments.length,l=new Array(e),_=0;_<e;_++)l[_]=arguments[_];return _superPropGet(AtRule2,"prepend",this,3)(l)}}])}(ga),ya=ma;ma.default=ma,ga.registerAtRule(ma);var _a,ba,Sa=Fi,wa=function(e){function Root2(e){var l;return _classCallCheck3(this,Root2),(l=_callSuper(this,Root2,[e])).type="root",l.nodes||(l.nodes=[]),l}return _inherits(Root2,e),_createClass3(Root2,[{key:"normalize",value:function(e,l,_){var S=_superPropGet(Root2,"normalize",this,3)([e]);if(l)if("prepend"===_)this.nodes.length>1?l.raws.before=this.nodes[1].raws.before:delete l.raws.before;else if(this.first!==l){var k,E=_createForOfIteratorHelper2(S);try{for(E.s();!(k=E.n()).done;){k.value.raws.before=l.raws.before}}catch(T){E.e(T)}finally{E.f()}}return S}},{key:"removeChild",value:function(e,l){var _=this.index(e);return!l&&0===_&&this.nodes.length>1&&(this.nodes[1].raws.before=this.nodes[_].raws.before),_superPropGet(Root2,"removeChild",this,3)([e])}},{key:"toResult",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new _a(new ba,this,e).stringify()}}])}(Sa);wa.registerLazyResult=function(e){_a=e},wa.registerProcessor=function(e){ba=e};var xa=wa;wa.default=wa,Sa.registerRoot(wa);var ka={comma:function(e){return ka.split(e,[","],!0)},space:function(e){return ka.split(e,[" ","\n","\t"])},split:function(e,l,_){var S,k=[],E="",T=!1,M=0,R=!1,I="",D=!1,O=_createForOfIteratorHelper2(e);try{for(O.s();!(S=O.n()).done;){var L=S.value;D?D=!1:"\\"===L?D=!0:R?L===I&&(R=!1):'"'===L||"'"===L?(R=!0,I=L):"("===L?M+=1:")"===L?M>0&&(M-=1):0===M&&l.includes(L)&&(T=!0),T?(""!==E&&k.push(E.trim()),E="",T=!1):E+=L}}catch(U){O.e(U)}finally{O.f()}return(_||""!==E)&&k.push(E.trim()),k}},Aa=ka;ka.default=ka;var Ea=Fi,Ca=Aa,Ta=function(e){function Rule2(e){var l;return _classCallCheck3(this,Rule2),(l=_callSuper(this,Rule2,[e])).type="rule",l.nodes||(l.nodes=[]),l}return _inherits(Rule2,e),_createClass3(Rule2,[{key:"selectors",get:function(){return Ca.comma(this.selector)},set:function(e){var l=this.selector?this.selector.match(/,\s*/):null,_=l?l[0]:","+this.raw("between","beforeOpen");this.selector=e.join(_)}}])}(Ea),Ma=Ta;Ta.default=Ta,Ea.registerRule(Ta);var Ra=Wn,tokenizer22=function(e){var l,_,S,k,E,T,M,R,I,D,O=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},L=e.css.valueOf(),U=O.ignoreErrors,B=L.length,z=0,G=[],j=[];function unclosed(l){throw e.error("Unclosed "+l,z)}return{back:function(e){j.push(e)},endOfFile:function(){return 0===j.length&&z>=B},nextToken:function(e){if(j.length)return j.pop();if(!(z>=B)){var O=!!e&&e.ignoreUnclosed;switch(l=L.charCodeAt(z)){case Ji:case Zi:case ea:case ta:case $i:_=z;do{_+=1,l=L.charCodeAt(_)}while(l===Zi||l===Ji||l===ea||l===ta||l===$i);D=["space",L.slice(z,_)],z=_-1;break;case ra:case na:case oa:case sa:case ca:case ua:case aa:var H=String.fromCharCode(l);D=[H,H,z];break;case ia:if(R=G.length?G.pop()[1]:"",I=L.charCodeAt(z+1),"url"===R&&I!==Xi&&I!==Ki&&I!==Zi&&I!==Ji&&I!==ea&&I!==$i&&I!==ta){_=z;do{if(T=!1,-1===(_=L.indexOf(")",_+1))){if(U||O){_=z;break}unclosed("bracket")}for(M=_;L.charCodeAt(M-1)===Yi;)M-=1,T=!T}while(T);D=["brackets",L.slice(z,_+1),z,_],z=_}else _=L.indexOf(")",z+1),k=L.slice(z,_+1),-1===_||pa.test(k)?D=["(","(",z]:(D=["brackets",k,z,_],z=_);break;case Xi:case Ki:S=l===Xi?"'":'"',_=z;do{if(T=!1,-1===(_=L.indexOf(S,_+1))){if(U||O){_=z+1;break}unclosed("string")}for(M=_;L.charCodeAt(M-1)===Yi;)M-=1,T=!T}while(T);D=["string",L.slice(z,_+1),z,_],z=_;break;case ha:da.lastIndex=z+1,da.test(L),_=0===da.lastIndex?L.length-1:da.lastIndex-2,D=["at-word",L.slice(z,_+1),z,_],z=_;break;case Yi:for(_=z,E=!0;L.charCodeAt(_+1)===Yi;)_+=1,E=!E;if(l=L.charCodeAt(_+1),E&&l!==Qi&&l!==Zi&&l!==Ji&&l!==ea&&l!==ta&&l!==$i&&(_+=1,va.test(L.charAt(_)))){for(;va.test(L.charAt(_+1));)_+=1;L.charCodeAt(_+1)===Zi&&(_+=1)}D=["word",L.slice(z,_+1),z,_],z=_;break;default:l===Qi&&L.charCodeAt(z+1)===la?(0===(_=L.indexOf("*/",z+2)+1)&&(U||O?_=L.length:unclosed("comment")),D=["comment",L.slice(z,_+1),z,_],z=_):(fa.lastIndex=z+1,fa.test(L),_=0===fa.lastIndex?L.length-1:fa.lastIndex-2,D=["word",L.slice(z,_+1),z,_],G.push(D),z=_)}return z++,D}},position:function(){return z}}},Ia=Ci,Pa=ya,Da=xa,Oa=Ma,La={empty:!0,space:!0};var Ua=function(){return _createClass3(function Parser2(e){_classCallCheck3(this,Parser2),this.input=e,this.root=new Da,this.current=this.root,this.spaces="",this.semicolon=!1,this.createTokenizer(),this.root.source={input:e,start:{column:1,line:1,offset:0}}},[{key:"atrule",value:function(e){var l,_,S,k=new Pa;k.name=e[1].slice(1),""===k.name&&this.unnamedAtrule(k,e),this.init(k,e[2]);for(var E=!1,T=!1,M=[],R=[];!this.tokenizer.endOfFile();){if("("===(l=(e=this.tokenizer.nextToken())[0])||"["===l?R.push("("===l?")":"]"):"{"===l&&R.length>0?R.push("}"):l===R[R.length-1]&&R.pop(),0===R.length){if(";"===l){k.source.end=this.getPosition(e[2]),k.source.end.offset++,this.semicolon=!0;break}if("{"===l){T=!0;break}if("}"===l){if(M.length>0){for(_=M[S=M.length-1];_&&"space"===_[0];)_=M[--S];_&&(k.source.end=this.getPosition(_[3]||_[2]),k.source.end.offset++)}this.end(e);break}M.push(e)}else M.push(e);if(this.tokenizer.endOfFile()){E=!0;break}}k.raws.between=this.spacesAndCommentsFromEnd(M),M.length?(k.raws.afterName=this.spacesAndCommentsFromStart(M),this.raw(k,"params",M),E&&(e=M[M.length-1],k.source.end=this.getPosition(e[3]||e[2]),k.source.end.offset++,this.spaces=k.raws.between,k.raws.between="")):(k.raws.afterName="",k.params=""),T&&(k.nodes=[],this.current=k)}},{key:"checkMissedSemicolon",value:function(e){var l=this.colon(e);if(!1!==l){for(var _,S=0,k=l-1;k>=0&&("space"===(_=e[k])[0]||2!==(S+=1));k--);throw this.input.error("Missed semicolon","word"===_[0]?_[3]+1:_[2])}}},{key:"colon",value:function(e){var l,_,S,k,E=0,T=_createForOfIteratorHelper2(e.entries());try{for(T.s();!(k=T.n()).done;){var M=_slicedToArray(k.value,2),R=M[0];if("("===(_=(l=M[1])[0])&&(E+=1),")"===_&&(E-=1),0===E&&":"===_){if(S){if("word"===S[0]&&"progid"===S[1])continue;return R}this.doubleColon(l)}S=l}}catch(I){T.e(I)}finally{T.f()}return!1}},{key:"comment",value:function(e){var l=new Ia;this.init(l,e[2]),l.source.end=this.getPosition(e[3]||e[2]),l.source.end.offset++;var _=e[1].slice(2,-2);if(/^\s*$/.test(_))l.text="",l.raws.left=_,l.raws.right="";else{var S=_.match(/^(\s*)([^]*\S)(\s*)$/);l.text=S[2],l.raws.left=S[1],l.raws.right=S[3]}}},{key:"createTokenizer",value:function(){this.tokenizer=tokenizer22(this.input)}},{key:"decl",value:function(e,l){var _=new Ra;this.init(_,e[0][2]);var S,k=e[e.length-1];for(";"===k[0]&&(this.semicolon=!0,e.pop()),_.source.end=this.getPosition(k[3]||k[2]||function(e){for(var l=e.length-1;l>=0;l--){var _=e[l],S=_[3]||_[2];if(S)return S}}(e)),_.source.end.offset++;"word"!==e[0][0];)1===e.length&&this.unknownWord(e),_.raws.before+=e.shift()[1];for(_.source.start=this.getPosition(e[0][2]),_.prop="";e.length;){var E=e[0][0];if(":"===E||"space"===E||"comment"===E)break;_.prop+=e.shift()[1]}for(_.raws.between="";e.length;){if(":"===(S=e.shift())[0]){_.raws.between+=S[1];break}"word"===S[0]&&/\w/.test(S[1])&&this.unknownWord([S]),_.raws.between+=S[1]}"_"!==_.prop[0]&&"*"!==_.prop[0]||(_.raws.before+=_.prop[0],_.prop=_.prop.slice(1));for(var T,M=[];e.length&&("space"===(T=e[0][0])||"comment"===T);)M.push(e.shift());this.precheckMissedSemicolon(e);for(var R=e.length-1;R>=0;R--){if("!important"===(S=e[R])[1].toLowerCase()){_.important=!0;var I=this.stringFrom(e,R);" !important"!==(I=this.spacesFromEnd(e)+I)&&(_.raws.important=I);break}if("important"===S[1].toLowerCase()){for(var D=e.slice(0),O="",L=R;L>0;L--){var U=D[L][0];if(0===O.trim().indexOf("!")&&"space"!==U)break;O=D.pop()[1]+O}0===O.trim().indexOf("!")&&(_.important=!0,_.raws.important=O,e=D)}if("space"!==S[0]&&"comment"!==S[0])break}var B=e.some(function(e){return"space"!==e[0]&&"comment"!==e[0]});B&&(_.raws.between+=M.map(function(e){return e[1]}).join(""),M=[]),this.raw(_,"value",M.concat(e),l),_.value.includes(":")&&!l&&this.checkMissedSemicolon(e)}},{key:"doubleColon",value:function(e){throw this.input.error("Double colon",{offset:e[2]},{offset:e[2]+e[1].length})}},{key:"emptyRule",value:function(e){var l=new Oa;this.init(l,e[2]),l.selector="",l.raws.between="",this.current=l}},{key:"end",value:function(e){this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.semicolon=!1,this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.spaces="",this.current.parent?(this.current.source.end=this.getPosition(e[2]),this.current.source.end.offset++,this.current=this.current.parent):this.unexpectedClose(e)}},{key:"endFile",value:function(){this.current.parent&&this.unclosedBlock(),this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.root.source.end=this.getPosition(this.tokenizer.position())}},{key:"freeSemicolon",value:function(e){if(this.spaces+=e[1],this.current.nodes){var l=this.current.nodes[this.current.nodes.length-1];l&&"rule"===l.type&&!l.raws.ownSemicolon&&(l.raws.ownSemicolon=this.spaces,this.spaces="")}}},{key:"getPosition",value:function(e){var l=this.input.fromOffset(e);return{column:l.col,line:l.line,offset:e}}},{key:"init",value:function(e,l){this.current.push(e),e.source={input:this.input,start:this.getPosition(l)},e.raws.before=this.spaces,this.spaces="","comment"!==e.type&&(this.semicolon=!1)}},{key:"other",value:function(e){for(var l=!1,_=null,S=!1,k=null,E=[],T=e[1].startsWith("--"),M=[],R=e;R;){if(_=R[0],M.push(R),"("===_||"["===_)k||(k=R),E.push("("===_?")":"]");else if(T&&S&&"{"===_)k||(k=R),E.push("}");else if(0===E.length){if(";"===_){if(S)return void this.decl(M,T);break}if("{"===_)return void this.rule(M);if("}"===_){this.tokenizer.back(M.pop()),l=!0;break}":"===_&&(S=!0)}else _===E[E.length-1]&&(E.pop(),0===E.length&&(k=null));R=this.tokenizer.nextToken()}if(this.tokenizer.endOfFile()&&(l=!0),E.length>0&&this.unclosedBracket(k),l&&S){if(!T)for(;M.length&&("space"===(R=M[M.length-1][0])||"comment"===R);)this.tokenizer.back(M.pop());this.decl(M,T)}else this.unknownWord(M)}},{key:"parse",value:function(){for(var e;!this.tokenizer.endOfFile();)switch((e=this.tokenizer.nextToken())[0]){case"space":this.spaces+=e[1];break;case";":this.freeSemicolon(e);break;case"}":this.end(e);break;case"comment":this.comment(e);break;case"at-word":this.atrule(e);break;case"{":this.emptyRule(e);break;default:this.other(e)}this.endFile()}},{key:"precheckMissedSemicolon",value:function(){}},{key:"raw",value:function(e,l,_,S){for(var k,E,T,M,R=_.length,I="",D=!0,O=0;O<R;O+=1)"space"!==(E=(k=_[O])[0])||O!==R-1||S?"comment"===E?(M=_[O-1]?_[O-1][0]:"empty",T=_[O+1]?_[O+1][0]:"empty",La[M]||La[T]||","===I.slice(-1)?D=!1:I+=k[1]):I+=k[1]:D=!1;if(!D){var L=_.reduce(function(e,l){return e+l[1]},"");e.raws[l]={raw:L,value:I}}e[l]=I}},{key:"rule",value:function(e){e.pop();var l=new Oa;this.init(l,e[0][2]),l.raws.between=this.spacesAndCommentsFromEnd(e),this.raw(l,"selector",e),this.current=l}},{key:"spacesAndCommentsFromEnd",value:function(e){for(var l,_="";e.length&&("space"===(l=e[e.length-1][0])||"comment"===l);)_=e.pop()[1]+_;return _}},{key:"spacesAndCommentsFromStart",value:function(e){for(var l,_="";e.length&&("space"===(l=e[0][0])||"comment"===l);)_+=e.shift()[1];return _}},{key:"spacesFromEnd",value:function(e){for(var l="";e.length&&"space"===e[e.length-1][0];)l=e.pop()[1]+l;return l}},{key:"stringFrom",value:function(e,l){for(var _="",S=l;S<e.length;S++)_+=e[S][1];return e.splice(l,e.length-l),_}},{key:"unclosedBlock",value:function(){var e=this.current.source.start;throw this.input.error("Unclosed block",e.line,e.column)}},{key:"unclosedBracket",value:function(e){throw this.input.error("Unclosed bracket",{offset:e[2]},{offset:e[2]+1})}},{key:"unexpectedClose",value:function(e){throw this.input.error("Unexpected }",{offset:e[2]},{offset:e[2]+1})}},{key:"unknownWord",value:function(e){throw this.input.error("Unknown word",{offset:e[0][2]},{offset:e[0][2]+e[0][1].length})}},{key:"unnamedAtrule",value:function(e,l){throw this.input.error("At-rule without name",{offset:l[2]},{offset:l[2]+l[1].length})}}])}(),Fa=Fi,Na=Ua,Ba=pi;function parse$3(e,l){var _=new Ba(e,l),S=new Na(_);try{S.parse()}catch(k){throw k}return S.root}var za=parse$3;parse$3.default=parse$3,Fa.registerParse(parse$3);var Ga=In.isClean,ja=In.my,Ha=Ai,Va=Un,Wa=Fi,qa=Gi,Xa=qi,Ka=za,Ya=xa,Qa={atrule:"AtRule",comment:"Comment",decl:"Declaration",document:"Document",root:"Root",rule:"Rule"},Ja={AtRule:!0,AtRuleExit:!0,Comment:!0,CommentExit:!0,Declaration:!0,DeclarationExit:!0,Document:!0,DocumentExit:!0,Once:!0,OnceExit:!0,postcssPlugin:!0,prepare:!0,Root:!0,RootExit:!0,Rule:!0,RuleExit:!0},Za={Once:!0,postcssPlugin:!0,prepare:!0};function isPromise(e){return"object"===_typeof3(e)&&"function"==typeof e.then}function getEvents(e){var l=!1,_=Qa[e.type];return"decl"===e.type?l=e.prop.toLowerCase():"atrule"===e.type&&(l=e.name.toLowerCase()),l&&e.append?[_,_+"-"+l,0,_+"Exit",_+"Exit-"+l]:l?[_,_+"-"+l,_+"Exit",_+"Exit-"+l]:e.append?[_,0,_+"Exit"]:[_,_+"Exit"]}function toStack(e){return{eventIndex:0,events:"document"===e.type?["Document",0,"DocumentExit"]:"root"===e.type?["Root",0,"RootExit"]:getEvents(e),iterator:0,node:e,visitorIndex:0,visitors:[]}}function cleanMarks(e){return e[Ga]=!1,e.nodes&&e.nodes.forEach(function(e){return cleanMarks(e)}),e}var $a={},eo=function(){return _createClass3(function LazyResult2(e,l,_){var S,k=this;if(_classCallCheck3(this,LazyResult2),this.stringified=!1,this.processed=!1,"object"!==_typeof3(l)||null===l||"root"!==l.type&&"document"!==l.type)if(l instanceof LazyResult2||l instanceof Xa)S=cleanMarks(l.root),l.map&&(void 0===_.map&&(_.map={}),_.map.inline||(_.map.inline=!1),_.map.prev=l.map);else{var E=Ka;_.syntax&&(E=_.syntax.parse),_.parser&&(E=_.parser),E.parse&&(E=E.parse);try{S=E(l,_)}catch(T){this.processed=!0,this.error=T}S&&!S[ja]&&Wa.rebuild(S)}else S=cleanMarks(l);this.result=new Xa(e,S,_),this.helpers=_objectSpread2(_objectSpread2({},$a),{},{postcss:$a,result:this.result}),this.plugins=this.processor.plugins.map(function(e){return"object"===_typeof3(e)&&e.prepare?_objectSpread2(_objectSpread2({},e),e.prepare(k.result)):e})},[{key:"async",value:function(){return this.error?Promise.reject(this.error):this.processed?Promise.resolve(this.result):(this.processing||(this.processing=this.runAsync()),this.processing)}},{key:"catch",value:function(e){return this.async().catch(e)}},{key:"finally",value:function(e){return this.async().then(e,e)}},{key:"getAsyncError",value:function(){throw new Error("Use process(css).then(cb) to work with async plugins")}},{key:"handleError",value:function(e,l){var _=this.result.lastPlugin;try{l&&l.addToError(e),this.error=e,"CssSyntaxError"!==e.name||e.plugin?_.postcssVersion:(e.plugin=_.postcssPlugin,e.setMessage())}catch(S){console&&console.error}return e}},{key:"prepareVisitors",value:function(){var e=this;this.listeners={};var l,add=function(l,_,S){e.listeners[_]||(e.listeners[_]=[]),e.listeners[_].push([l,S])},_=_createForOfIteratorHelper2(this.plugins);try{for(_.s();!(l=_.n()).done;){var S=l.value;if("object"===_typeof3(S))for(var k in S){if(!Ja[k]&&/^[A-Z]/.test(k))throw new Error("Unknown event ".concat(k," in ").concat(S.postcssPlugin,". Try to update PostCSS (").concat(this.processor.version," now)."));if(!Za[k])if("object"===_typeof3(S[k]))for(var E in S[k])add(S,"*"===E?k:k+"-"+E.toLowerCase(),S[k][E]);else"function"==typeof S[k]&&add(S,k,S[k])}}}catch(T){_.e(T)}finally{_.f()}this.hasListener=Object.keys(this.listeners).length>0}},{key:"runAsync",value:(e=_asyncToGenerator(_regenerator().m(function _callee24(){var e,l,_,S,k,E,T,M,R,I,D,O,L,U=this;return _regenerator().w(function(B){for(;;)switch(B.p=B.n){case 0:this.plugin=0,e=0;case 1:if(!(e<this.plugins.length)){B.n=6;break}if(l=this.plugins[e],!isPromise(_=this.runOnRoot(l))){B.n=5;break}return B.p=2,B.n=3,_;case 3:B.n=5;break;case 4:throw B.p=4,D=B.v,this.handleError(D);case 5:e++,B.n=1;break;case 6:if(this.prepareVisitors(),!this.hasListener){B.n=21;break}S=this.result.root;case 7:if(S[Ga]){B.n=14;break}S[Ga]=!0,k=[toStack(S)];case 8:if(!(k.length>0)){B.n=13;break}if(!isPromise(E=this.visitTick(k))){B.n=12;break}return B.p=9,B.n=10,E;case 10:B.n=12;break;case 11:throw B.p=11,O=B.v,T=k[k.length-1].node,this.handleError(O,T);case 12:B.n=8;break;case 13:B.n=7;break;case 14:if(!this.listeners.OnceExit){B.n=21;break}M=_createForOfIteratorHelper2(this.listeners.OnceExit),B.p=15,I=_regenerator().m(function _loop2(){var e,l,_,k,E;return _regenerator().w(function(T){for(;;)switch(T.p=T.n){case 0:if(e=_slicedToArray(R.value,2),l=e[0],_=e[1],U.result.lastPlugin=l,T.p=1,"document"!==S.type){T.n=3;break}return k=S.nodes.map(function(e){return _(e,U.helpers)}),T.n=2,Promise.all(k);case 2:T.n=4;break;case 3:return T.n=4,_(S,U.helpers);case 4:T.n=6;break;case 5:throw T.p=5,E=T.v,U.handleError(E);case 6:return T.a(2)}},_loop2,null,[[1,5]])}),M.s();case 16:if((R=M.n()).done){B.n=18;break}return B.d(_regeneratorValues(I()),17);case 17:B.n=16;break;case 18:B.n=20;break;case 19:B.p=19,L=B.v,M.e(L);case 20:return B.p=20,M.f(),B.f(20);case 21:return this.processed=!0,B.a(2,this.stringify())}},_callee24,this,[[15,19,20,21],[9,11],[2,4]])})),function(){return e.apply(this,arguments)})},{key:"runOnRoot",value:function(e){var l=this;this.result.lastPlugin=e;try{if("object"===_typeof3(e)&&e.Once){if("document"===this.result.root.type){var _=this.result.root.nodes.map(function(_){return e.Once(_,l.helpers)});return isPromise(_[0])?Promise.all(_):_}return e.Once(this.result.root,this.helpers)}if("function"==typeof e)return e(this.result.root,this.result)}catch(S){throw this.handleError(S)}}},{key:"stringify",value:function(){if(this.error)throw this.error;if(this.stringified)return this.result;this.stringified=!0,this.sync();var e=this.result.opts,l=Va;e.syntax&&(l=e.syntax.stringify),e.stringifier&&(l=e.stringifier),l.stringify&&(l=l.stringify);var _=new Ha(l,this.result.root,this.result.opts).generate();return this.result.css=_[0],this.result.map=_[1],this.result}},{key:"sync",value:function(){if(this.error)throw this.error;if(this.processed)return this.result;if(this.processed=!0,this.processing)throw this.getAsyncError();var e,l=_createForOfIteratorHelper2(this.plugins);try{for(l.s();!(e=l.n()).done;){var _=e.value;if(isPromise(this.runOnRoot(_)))throw this.getAsyncError()}}catch(M){l.e(M)}finally{l.f()}if(this.prepareVisitors(),this.hasListener){for(var S=this.result.root;!S[Ga];)S[Ga]=!0,this.walkSync(S);if(this.listeners.OnceExit)if("document"===S.type){var k,E=_createForOfIteratorHelper2(S.nodes);try{for(E.s();!(k=E.n()).done;){var T=k.value;this.visitSync(this.listeners.OnceExit,T)}}catch(M){E.e(M)}finally{E.f()}}else this.visitSync(this.listeners.OnceExit,S)}return this.result}},{key:"then",value:function(e,l){return this.async().then(e,l)}},{key:"toString",value:function(){return this.css}},{key:"visitSync",value:function(e,l){var _,S=_createForOfIteratorHelper2(e);try{for(S.s();!(_=S.n()).done;){var k=_slicedToArray(_.value,2),E=k[0],T=k[1];this.result.lastPlugin=E;var M=void 0;try{M=T(l,this.helpers)}catch(R){throw this.handleError(R,l.proxyOf)}if("root"!==l.type&&"document"!==l.type&&!l.parent)return!0;if(isPromise(M))throw this.getAsyncError()}}catch(I){S.e(I)}finally{S.f()}}},{key:"visitTick",value:function(e){var l=e[e.length-1],_=l.node,S=l.visitors;if("root"===_.type||"document"===_.type||_.parent){if(S.length>0&&l.visitorIndex<S.length){var k=_slicedToArray(S[l.visitorIndex],2),E=k[0],T=k[1];l.visitorIndex+=1,l.visitorIndex===S.length&&(l.visitors=[],l.visitorIndex=0),this.result.lastPlugin=E;try{return T(_.toProxy(),this.helpers)}catch(O){throw this.handleError(O,_)}}if(0!==l.iterator){for(var M,R=l.iterator;M=_.nodes[_.indexes[R]];)if(_.indexes[R]+=1,!M[Ga])return M[Ga]=!0,void e.push(toStack(M));l.iterator=0,delete _.indexes[R]}for(var I=l.events;l.eventIndex<I.length;){var D=I[l.eventIndex];if(l.eventIndex+=1,0===D)return void(_.nodes&&_.nodes.length&&(_[Ga]=!0,l.iterator=_.getIterator()));if(this.listeners[D])return void(l.visitors=this.listeners[D])}e.pop()}else e.pop()}},{key:"walkSync",value:function(e){var l=this;e[Ga]=!0;var _,S=_createForOfIteratorHelper2(getEvents(e));try{for(S.s();!(_=S.n()).done;){var k=_.value;if(0===k)e.nodes&&e.each(function(e){e[Ga]||l.walkSync(e)});else{var E=this.listeners[k];if(E&&this.visitSync(E,e.toProxy()))return}}}catch(T){S.e(T)}finally{S.f()}}},{key:"warnings",value:function(){return this.sync().warnings()}},{key:"content",get:function(){return this.stringify().content}},{key:"css",get:function(){return this.stringify().css}},{key:"map",get:function(){return this.stringify().map}},{key:"messages",get:function(){return this.sync().messages}},{key:"opts",get:function(){return this.result.opts}},{key:"processor",get:function(){return this.result.processor}},{key:"root",get:function(){return this.sync().root}},{key:Symbol.toStringTag,get:function(){return"LazyResult"}}]);var e}();eo.registerPostcss=function(e){$a=e};var to=eo;eo.default=eo,Ya.registerLazyResult(eo),qa.registerLazyResult(eo);var ro=Ai,no=Un,io=za,ao=qi,oo=function(){return _createClass3(function NoWorkResult2(e,l,_){var S;_classCallCheck3(this,NoWorkResult2),l=l.toString(),this.stringified=!1,this._processor=e,this._css=l,this._opts=_,this._map=void 0;var k=no;this.result=new ao(this._processor,S,this._opts),this.result.css=l;var E=this;Object.defineProperty(this.result,"root",{get:function(){return E.root}});var T=new ro(k,S,this._opts,l);if(T.isMap()){var M=_slicedToArray(T.generate(),2),R=M[0],I=M[1];R&&(this.result.css=R),I&&(this.result.map=I)}else T.clearAnnotation(),this.result.css=T.css},[{key:"async",value:function(){return this.error?Promise.reject(this.error):Promise.resolve(this.result)}},{key:"catch",value:function(e){return this.async().catch(e)}},{key:"finally",value:function(e){return this.async().then(e,e)}},{key:"sync",value:function(){if(this.error)throw this.error;return this.result}},{key:"then",value:function(e,l){return this.async().then(e,l)}},{key:"toString",value:function(){return this._css}},{key:"warnings",value:function(){return[]}},{key:"content",get:function(){return this.result.css}},{key:"css",get:function(){return this.result.css}},{key:"map",get:function(){return this.result.map}},{key:"messages",get:function(){return[]}},{key:"opts",get:function(){return this.result.opts}},{key:"processor",get:function(){return this.result.processor}},{key:"root",get:function(){if(this._root)return this._root;var e,l=io;try{e=l(this._css,this._opts)}catch(_){this.error=_}if(this.error)throw this.error;return this._root=e,e}},{key:Symbol.toStringTag,get:function(){return"NoWorkResult"}}])}(),so=oo;oo.default=oo;var uo=so,lo=to,co=Gi,ho=xa,fo=function(){return _createClass3(function Processor2(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];_classCallCheck3(this,Processor2),this.version="8.4.38",this.plugins=this.normalize(e)},[{key:"normalize",value:function(e){var l,_=[],S=_createForOfIteratorHelper2(e);try{for(S.s();!(l=S.n()).done;){var k=l.value;if(!0===k.postcss?k=k():k.postcss&&(k=k.postcss),"object"===_typeof3(k)&&Array.isArray(k.plugins))_=_.concat(k.plugins);else if("object"===_typeof3(k)&&k.postcssPlugin)_.push(k);else if("function"==typeof k)_.push(k);else if("object"!==_typeof3(k)||!k.parse&&!k.stringify)throw new Error(k+" is not a PostCSS plugin")}}catch(E){S.e(E)}finally{S.f()}return _}},{key:"process",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.plugins.length||l.parser||l.stringifier||l.syntax?new lo(this,e,l):new uo(this,e,l)}},{key:"use",value:function(e){return this.plugins=this.plugins.concat(this.normalize([e])),this}}])}(),po=fo;fo.default=fo,ho.registerProcessor(fo),co.registerProcessor(fo);var vo=Wn,go=$n,mo=Ci,yo=ya,_o=pi,bo=xa,So=Ma;function fromJSON$1(e,l){if(Array.isArray(e))return e.map(function(e){return fromJSON$1(e)});var k=e.inputs,E=_objectWithoutProperties3(e,_);if(k){l=[];var T,M=_createForOfIteratorHelper2(k);try{for(M.s();!(T=M.n()).done;){var R=_objectSpread2(_objectSpread2({},T.value),{},{__proto__:_o.prototype});R.map&&(R.map=_objectSpread2(_objectSpread2({},R.map),{},{__proto__:go.prototype})),l.push(R)}}catch(L){M.e(L)}finally{M.f()}}if(E.nodes&&(E.nodes=e.nodes.map(function(e){return fromJSON$1(e,l)})),E.source){var I=E.source,D=I.inputId,O=_objectWithoutProperties3(I,S);E.source=O,null!=D&&(E.source.input=l[D])}if("root"===E.type)return new bo(E);if("decl"===E.type)return new vo(E);if("rule"===E.type)return new So(E);if("comment"===E.type)return new mo(E);if("atrule"===E.type)return new yo(E);throw new Error("Unknown node type: "+e.type)}var wo=fromJSON$1;fromJSON$1.default=fromJSON$1;var xo=Rn,ko=Wn,Ao=to,Eo=Fi,Co=po,To=Un,Mo=wo,Ro=Gi,Io=Hi,Po=Ci,Do=ya,Oo=qi,Lo=pi,Uo=za,Fo=Aa,No=Ma,Bo=xa,zo=Hn;function postcss(){for(var e=arguments.length,l=new Array(e),_=0;_<e;_++)l[_]=arguments[_];return 1===l.length&&Array.isArray(l[0])&&(l=l[0]),new Co(l)}postcss.plugin=function(e,l){var _,S=!1;function creator(){console&&console.warn&&!S&&(S=!0,T.LANG&&T.LANG.startsWith("cn"));var _=l.apply(void 0,arguments);return _.postcssPlugin=e,_.postcssVersion=(new Co).version,_}return Object.defineProperty(creator,"postcss",{get:function(){return _||(_=creator()),_}}),creator.process=function(e,l,_){return postcss([creator(_)]).process(e,l)},creator},postcss.stringify=To,postcss.parse=Uo,postcss.fromJSON=Mo,postcss.list=Fo,postcss.comment=function(e){return new Po(e)},postcss.atRule=function(e){return new Do(e)},postcss.decl=function(e){return new ko(e)},postcss.rule=function(e){return new No(e)},postcss.root=function(e){return new Bo(e)},postcss.document=function(e){return new Ro(e)},postcss.CssSyntaxError=xo,postcss.Declaration=ko,postcss.Container=Eo,postcss.Processor=Co,postcss.Document=Ro,postcss.Comment=Po,postcss.Warning=Io,postcss.AtRule=Do,postcss.Result=Oo,postcss.Input=Lo,postcss.Rule=No,postcss.Root=Bo,postcss.Node=zo,Ao.registerPostcss(postcss);var Go=postcss;postcss.default=postcss;var jo=getDefaultExportFromCjs(Go);jo.stringify,jo.fromJSON,jo.plugin,jo.parse,jo.list,jo.document,jo.comment,jo.atRule,jo.rule,jo.decl,jo.root,jo.CssSyntaxError,jo.Declaration,jo.Container,jo.Processor,jo.Document,jo.Comment,jo.Warning,jo.AtRule,jo.Result,jo.Input,jo.Rule,jo.Root,jo.Node;var Ho=function(){function BaseRRNode(){_classCallCheck3(this,BaseRRNode),__publicField2(this,"parentElement",null),__publicField2(this,"parentNode",null),__publicField2(this,"ownerDocument"),__publicField2(this,"firstChild",null),__publicField2(this,"lastChild",null),__publicField2(this,"previousSibling",null),__publicField2(this,"nextSibling",null),__publicField2(this,"ELEMENT_NODE",1),__publicField2(this,"TEXT_NODE",3),__publicField2(this,"nodeType"),__publicField2(this,"nodeName"),__publicField2(this,"RRNodeType")}return _createClass3(BaseRRNode,[{key:"childNodes",get:function(){for(var e=[],l=this.firstChild;l;)e.push(l),l=l.nextSibling;return e}},{key:"contains",value:function(e){if(!(e instanceof BaseRRNode))return!1;if(e.ownerDocument!==this.ownerDocument)return!1;if(e===this)return!0;for(;e.parentNode;){if(e.parentNode===this)return!0;e=e.parentNode}return!1}},{key:"appendChild",value:function(e){throw new Error("RRDomException: Failed to execute 'appendChild' on 'RRNode': This RRNode type does not support this method.")}},{key:"insertBefore",value:function(e,l){throw new Error("RRDomException: Failed to execute 'insertBefore' on 'RRNode': This RRNode type does not support this method.")}},{key:"removeChild",value:function(e){throw new Error("RRDomException: Failed to execute 'removeChild' on 'RRNode': This RRNode type does not support this method.")}},{key:"toString",value:function(){return"RRNode"}}])}(),Vo={Node:["childNodes","parentNode","parentElement","textContent"],ShadowRoot:["host","styleSheets"],Element:["shadowRoot","querySelector","querySelectorAll"],MutationObserver:[]},Wo={Node:["contains","getRootNode"],ShadowRoot:["getSelection"],Element:[],MutationObserver:["constructor"]},qo={};function getUntaintedPrototype(e){if(qo[e])return qo[e];var l=globalThis[e],_=l.prototype,S=e in Vo?Vo[e]:void 0,k=Boolean(S&&S.every(function(e){var l,S;return Boolean(null==(S=null==(l=Object.getOwnPropertyDescriptor(_,e))?void 0:l.get)?void 0:S.toString().includes("[native code]"))})),E=e in Wo?Wo[e]:void 0,T=Boolean(E&&E.every(function(e){var l;return"function"==typeof _[e]&&(null==(l=_[e])?void 0:l.toString().includes("[native code]"))}));if(k&&T)return qo[e]=l.prototype,l.prototype;try{var M=document.createElement("iframe");document.body.appendChild(M);var R=M.contentWindow;if(!R)return l.prototype;var I=R[e].prototype;return document.body.removeChild(M),I?qo[e]=I:_}catch(D){return _}}var Xo={};function getUntaintedAccessor(e,l,_){var S,k="".concat(e,".").concat(String(_));if(Xo[k])return Xo[k].call(l);var E=getUntaintedPrototype(e),T=null==(S=Object.getOwnPropertyDescriptor(E,_))?void 0:S.get;return T?(Xo[k]=T,T.call(l)):l[_]}var Ko={};function getUntaintedMethod(e,l,_){var S="".concat(e,".").concat(String(_));if(Ko[S])return Ko[S].bind(l);var k=getUntaintedPrototype(e)[_];return"function"!=typeof k?l[_]:(Ko[S]=k,k.bind(l))}function mutationObserverCtor(){return getUntaintedPrototype("MutationObserver").constructor}var Yo={childNodes:function(e){return getUntaintedAccessor("Node",e,"childNodes")},parentNode:function(e){return getUntaintedAccessor("Node",e,"parentNode")},parentElement:function(e){return getUntaintedAccessor("Node",e,"parentElement")},textContent:function(e){return getUntaintedAccessor("Node",e,"textContent")},contains:function(e,l){return getUntaintedMethod("Node",e,"contains")(l)},getRootNode:function(e){return getUntaintedMethod("Node",e,"getRootNode")()},host:function(e){return e&&"host"in e?getUntaintedAccessor("ShadowRoot",e,"host"):null},styleSheets:function(e){return e.styleSheets},shadowRoot:function(e){return e&&"shadowRoot"in e?getUntaintedAccessor("Element",e,"shadowRoot"):null},querySelector:function(e,l){return getUntaintedAccessor("Element",e,"querySelector")(l)},querySelectorAll:function(e,l){return getUntaintedAccessor("Element",e,"querySelectorAll")(l)},mutationObserver:mutationObserverCtor};function on(e,l){var _=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document,S={capture:!0,passive:!0};return _.addEventListener(e,l,S),function(){return _.removeEventListener(e,l,S)}}var Qo={map:{},getId:function(){return-1},getNode:function(){return null},removeNodeFromMap:function(){},has:function(){return!1},reset:function(){}};function throttle(e,l){var _=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},S=null,k=0;return function(){for(var E=arguments.length,T=new Array(E),M=0;M<E;M++)T[M]=arguments[M];var R=Date.now();k||!1!==_.leading||(k=R);var I=l-(R-k),D=this;I<=0||I>l?(S&&(clearTimeout(S),S=null),k=R,e.apply(D,T)):S||!1===_.trailing||(S=setTimeout(function(){k=!1===_.leading?0:Date.now(),S=null,e.apply(D,T)},I))}}function hookSetter(e,l,_,S){var k=arguments.length>4&&void 0!==arguments[4]?arguments[4]:window,E=k.Object.getOwnPropertyDescriptor(e,l);return k.Object.defineProperty(e,l,S?_:{set:function(e){var l=this;setTimeout(function(){_.set.call(l,e)},0),E&&E.set&&E.set.call(this,e)}}),function(){return hookSetter(e,l,E||{},!0)}}function patch(e,l,_){try{if(!(l in e))return function(){};var S=e[l],k=_(S);return"function"==typeof k&&(k.prototype=k.prototype||{},Object.defineProperties(k,{__rrweb_original__:{enumerable:!1,value:S}})),e[l]=k,function(){e[l]=S}}catch(E){return function(){}}}"undefined"!=typeof window&&window.Proxy&&window.Reflect&&(Qo=new Proxy(Qo,{get:function(e,l,_){return Reflect.get(e,l,_)}}));var Jo=Date.now;function getWindowScroll(e){var l,_,S,k,E=e.document;return{left:E.scrollingElement?E.scrollingElement.scrollLeft:void 0!==e.pageXOffset?e.pageXOffset:E.documentElement.scrollLeft||(null==E?void 0:E.body)&&(null==(l=Yo.parentElement(E.body))?void 0:l.scrollLeft)||(null==(_=null==E?void 0:E.body)?void 0:_.scrollLeft)||0,top:E.scrollingElement?E.scrollingElement.scrollTop:void 0!==e.pageYOffset?e.pageYOffset:(null==E?void 0:E.documentElement.scrollTop)||(null==E?void 0:E.body)&&(null==(S=Yo.parentElement(E.body))?void 0:S.scrollTop)||(null==(k=null==E?void 0:E.body)?void 0:k.scrollTop)||0}}function getWindowHeight(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function getWindowWidth(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function closestElementOfNode(e){return e?e.nodeType===e.ELEMENT_NODE?e:Yo.parentElement(e):null}function isBlocked(e,l,_,S){if(!e)return!1;var k=closestElementOfNode(e);if(!k)return!1;try{if("string"==typeof l){if(k.classList.contains(l))return!0;if(S&&null!==k.closest("."+l))return!0}else if(classMatchesRegex(k,l,S))return!0}catch(E){}if(_){if(k.matches(_))return!0;if(S&&null!==k.closest(_))return!0}return!1}function isIgnored(e,l,_){return!("TITLE"!==e.tagName||!_.headTitleMutations)||-2===l.getId(e)}function isAncestorRemoved(e,l){if(isShadowRoot(e))return!1;var _=l.getId(e);if(!l.has(_))return!0;var S=Yo.parentNode(e);return(!S||S.nodeType!==e.DOCUMENT_NODE)&&(!S||isAncestorRemoved(S,l))}function legacy_isTouchEvent(e){return Boolean(e.changedTouches)}function isSerializedIframe(e,l){return Boolean("IFRAME"===e.nodeName&&l.getMeta(e))}function isSerializedStylesheet(e,l){return Boolean("LINK"===e.nodeName&&e.nodeType===e.ELEMENT_NODE&&e.getAttribute&&"stylesheet"===e.getAttribute("rel")&&l.getMeta(e))}function hasShadowRoot(e){return!!e&&(e instanceof Ho&&"shadowRoot"in e?Boolean(e.shadowRoot):Boolean(Yo.shadowRoot(e)))}/[1-9][0-9]{12}/.test(Date.now().toString())||(Jo=function(){return(new Date).getTime()});var Zo=function(){return _createClass3(function StyleSheetMirror(){_classCallCheck3(this,StyleSheetMirror),__publicField(this,"id",1),__publicField(this,"styleIDMap",new WeakMap),__publicField(this,"idStyleMap",new Map)},[{key:"getId",value:function(e){var l;return null!==(l=this.styleIDMap.get(e))&&void 0!==l?l:-1}},{key:"has",value:function(e){return this.styleIDMap.has(e)}},{key:"add",value:function(e,l){return this.has(e)?this.getId(e):(_=void 0===l?this.id++:l,this.styleIDMap.set(e,_),this.idStyleMap.set(_,e),_);var _}},{key:"getStyle",value:function(e){return this.idStyleMap.get(e)||null}},{key:"reset",value:function(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}},{key:"generateId",value:function(){return this.id++}}])}();function getShadowHost(e){var l,_=null;return"getRootNode"in e&&(null==(l=Yo.getRootNode(e))?void 0:l.nodeType)===Node.DOCUMENT_FRAGMENT_NODE&&Yo.host(Yo.getRootNode(e))&&(_=Yo.host(Yo.getRootNode(e))),_}function shadowHostInDom(e){var l=e.ownerDocument;if(!l)return!1;var _=function(e){for(var l,_=e;l=getShadowHost(_);)_=l;return _}(e);return Yo.contains(l,_)}function inDom(e){var l=e.ownerDocument;return!!l&&(Yo.contains(l,e)||shadowHostInDom(e))}var $o=function(e){return e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e}($o||{}),es=function(e){return e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e[e.CustomElement=16]="CustomElement",e}(es||{}),ts=function(e){return e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel",e}(ts||{}),rs=function(e){return e[e.Mouse=0]="Mouse",e[e.Pen=1]="Pen",e[e.Touch=2]="Touch",e}(rs||{}),ns=function(e){return e[e["2D"]=0]="2D",e[e.WebGL=1]="WebGL",e[e.WebGL2=2]="WebGL2",e}(ns||{}),is=function(e){return e[e.Play=0]="Play",e[e.Pause=1]="Pause",e[e.Seeked=2]="Seeked",e[e.VolumeChange=3]="VolumeChange",e[e.RateChange=4]="RateChange",e}(is||{});function isNodeInLinkedList(e){return"__ln"in e}var as,os=function(){return _createClass3(function DoubleLinkedList(){_classCallCheck3(this,DoubleLinkedList),__publicField(this,"length",0),__publicField(this,"head",null),__publicField(this,"tail",null)},[{key:"get",value:function(e){if(e>=this.length)throw new Error("Position outside of list range");for(var l=this.head,_=0;_<e;_++)l=(null==l?void 0:l.next)||null;return l}},{key:"addNode",value:function(e){var l={value:e,previous:null,next:null};if(e.__ln=l,e.previousSibling&&isNodeInLinkedList(e.previousSibling)){var _=e.previousSibling.__ln.next;l.next=_,l.previous=e.previousSibling.__ln,e.previousSibling.__ln.next=l,_&&(_.previous=l)}else if(e.nextSibling&&isNodeInLinkedList(e.nextSibling)&&e.nextSibling.__ln.previous){var S=e.nextSibling.__ln.previous;l.previous=S,l.next=e.nextSibling.__ln,e.nextSibling.__ln.previous=l,S&&(S.next=l)}else this.head&&(this.head.previous=l),l.next=this.head,this.head=l;null===l.next&&(this.tail=l),this.length++}},{key:"removeNode",value:function(e){var l=e.__ln;this.head&&(l.previous?(l.previous.next=l.next,l.next?l.next.previous=l.previous:this.tail=l.previous):(this.head=l.next,this.head?this.head.previous=null:this.tail=null),e.__ln&&delete e.__ln,this.length--)}}])}(),moveKey=function(e,l){return"".concat(e,"@").concat(l)},ss=function(){return _createClass3(function MutationBuffer(){var e=this;_classCallCheck3(this,MutationBuffer),__publicField(this,"frozen",!1),__publicField(this,"locked",!1),__publicField(this,"texts",[]),__publicField(this,"attributes",[]),__publicField(this,"attributeMap",new WeakMap),__publicField(this,"removes",[]),__publicField(this,"mapRemoves",[]),__publicField(this,"movedMap",{}),__publicField(this,"addedSet",new Set),__publicField(this,"movedSet",new Set),__publicField(this,"droppedSet",new Set),__publicField(this,"mutationCb"),__publicField(this,"blockClass"),__publicField(this,"blockSelector"),__publicField(this,"maskTextClass"),__publicField(this,"maskTextSelector"),__publicField(this,"inlineStylesheet"),__publicField(this,"maskInputOptions"),__publicField(this,"maskTextFn"),__publicField(this,"maskInputFn"),__publicField(this,"keepIframeSrcFn"),__publicField(this,"recordCanvas"),__publicField(this,"inlineImages"),__publicField(this,"slimDOMOptions"),__publicField(this,"dataURLOptions"),__publicField(this,"doc"),__publicField(this,"mirror"),__publicField(this,"iframeManager"),__publicField(this,"stylesheetManager"),__publicField(this,"shadowDomManager"),__publicField(this,"canvasManager"),__publicField(this,"processedNodeManager"),__publicField(this,"unattachedDoc"),__publicField(this,"processMutations",function(l){l.forEach(e.processMutation),e.emit()}),__publicField(this,"emit",function(){if(!e.frozen&&!e.locked){for(var l=[],_=new Set,S=new os,getNextId=function(l){for(var _=l,S=-2;-2===S;)S=(_=_&&_.nextSibling)&&e.mirror.getId(_);return S},pushAdd=function(k){var E=Yo.parentNode(k);if(E&&inDom(k)&&"TEXTAREA"!==E.tagName){var T=isShadowRoot(E)?e.mirror.getId(getShadowHost(k)):e.mirror.getId(E),M=getNextId(k);if(-1===T||-1===M)return S.addNode(k);var R=serializeNodeWithId(k,{doc:e.doc,mirror:e.mirror,blockClass:e.blockClass,blockSelector:e.blockSelector,maskTextClass:e.maskTextClass,maskTextSelector:e.maskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:e.inlineStylesheet,maskInputOptions:e.maskInputOptions,maskTextFn:e.maskTextFn,maskInputFn:e.maskInputFn,slimDOMOptions:e.slimDOMOptions,dataURLOptions:e.dataURLOptions,recordCanvas:e.recordCanvas,inlineImages:e.inlineImages,onSerialize:function(l){isSerializedIframe(l,e.mirror)&&e.iframeManager.addIframe(l),isSerializedStylesheet(l,e.mirror)&&e.stylesheetManager.trackLinkElement(l),hasShadowRoot(k)&&e.shadowDomManager.addShadowRoot(Yo.shadowRoot(k),e.doc)},onIframeLoad:function(l,_){e.iframeManager.attachIframe(l,_),e.shadowDomManager.observeAttachShadow(l)},onStylesheetLoad:function(l,_){e.stylesheetManager.attachLinkElement(l,_)}});R&&(l.push({parentId:T,nextId:M,node:R}),_.add(R.id))}};e.mapRemoves.length;)e.mirror.removeNodeFromMap(e.mapRemoves.shift());var k,E=_createForOfIteratorHelper2(e.movedSet);try{for(E.s();!(k=E.n()).done;){var T=k.value;isParentRemoved(e.removes,T,e.mirror)&&!e.movedSet.has(Yo.parentNode(T))||pushAdd(T)}}catch(q){E.e(q)}finally{E.f()}var M,R=_createForOfIteratorHelper2(e.addedSet);try{for(R.s();!(M=R.n()).done;){var I=M.value;isAncestorInSet(e.droppedSet,I)||isParentRemoved(e.removes,I,e.mirror)?isAncestorInSet(e.movedSet,I)?pushAdd(I):e.droppedSet.add(I):pushAdd(I)}}catch(q){R.e(q)}finally{R.f()}for(var D=null;S.length;){var O=null;if(D){var L=e.mirror.getId(Yo.parentNode(D.value)),U=getNextId(D.value);-1!==L&&-1!==U&&(O=D)}if(!O)for(var B=S.tail;B;){var z=B;if(B=B.previous,z){var G=e.mirror.getId(Yo.parentNode(z.value));if(-1===getNextId(z.value))continue;if(-1!==G){O=z;break}var j=z.value,H=Yo.parentNode(j);if(H&&H.nodeType===Node.DOCUMENT_FRAGMENT_NODE){var V=Yo.host(H);if(-1!==e.mirror.getId(V)){O=z;break}}}}if(!O){for(;S.head;)S.removeNode(S.head.value);break}D=O.previous,S.removeNode(O.value),pushAdd(O.value)}var W={texts:e.texts.map(function(l){var _=l.node,S=Yo.parentNode(_);return S&&"TEXTAREA"===S.tagName&&e.genTextAreaValueMutation(S),{id:e.mirror.getId(_),value:l.value}}).filter(function(e){return!_.has(e.id)}).filter(function(l){return e.mirror.has(l.id)}),attributes:e.attributes.map(function(l){var _=l.attributes;if("string"==typeof _.style){var S=JSON.stringify(l.styleDiff),k=JSON.stringify(l._unchangedStyles);S.length<_.style.length&&(S+k).split("var(").length===_.style.split("var(").length&&(_.style=l.styleDiff)}return{id:e.mirror.getId(l.node),attributes:_}}).filter(function(e){return!_.has(e.id)}).filter(function(l){return e.mirror.has(l.id)}),removes:e.removes,adds:l};(W.texts.length||W.attributes.length||W.removes.length||W.adds.length)&&(e.texts=[],e.attributes=[],e.attributeMap=new WeakMap,e.removes=[],e.addedSet=new Set,e.movedSet=new Set,e.droppedSet=new Set,e.movedMap={},e.mutationCb(W))}}),__publicField(this,"genTextAreaValueMutation",function(l){var _=e.attributeMap.get(l);_||(_={node:l,attributes:{},styleDiff:{},_unchangedStyles:{}},e.attributes.push(_),e.attributeMap.set(l,_)),_.attributes.value=Array.from(Yo.childNodes(l),function(e){return Yo.textContent(e)||""}).join("")}),__publicField(this,"processMutation",function(l){if(!isIgnored(l.target,e.mirror,e.slimDOMOptions))switch(l.type){case"characterData":var _=Yo.textContent(l.target);isBlocked(l.target,e.blockClass,e.blockSelector,!1)||_===l.oldValue||e.texts.push({value:needMaskingText(l.target,e.maskTextClass,e.maskTextSelector,!0)&&_?e.maskTextFn?e.maskTextFn(_,closestElementOfNode(l.target)):_.replace(/[\S]/g,"*"):_,node:l.target});break;case"attributes":var S=l.target,k=l.attributeName,E=l.target.getAttribute(k);if("value"===k){var T=getInputType(S);E=maskInputValue({element:S,maskInputOptions:e.maskInputOptions,tagName:S.tagName,type:T,value:E,maskInputFn:e.maskInputFn})}if(isBlocked(l.target,e.blockClass,e.blockSelector,!1)||E===l.oldValue)return;var M=e.attributeMap.get(l.target);if("IFRAME"===S.tagName&&"src"===k&&!e.keepIframeSrcFn(E)){if(S.contentDocument)return;k="rr_src"}if(M||(M={node:l.target,attributes:{},styleDiff:{},_unchangedStyles:{}},e.attributes.push(M),e.attributeMap.set(l.target,M)),"type"===k&&"INPUT"===S.tagName&&"password"===(l.oldValue||"").toLowerCase()&&S.setAttribute("data-rr-is-password","true"),!ignoreAttribute(S.tagName,k))if(M.attributes[k]=transformAttribute(e.doc,toLowerCase(S.tagName),toLowerCase(k),E),"style"===k){if(!e.unattachedDoc)try{e.unattachedDoc=document.implementation.createHTMLDocument()}catch(j){e.unattachedDoc=e.doc}var R=e.unattachedDoc.createElement("span");l.oldValue&&R.setAttribute("style",l.oldValue);for(var I=0,D=Array.from(S.style);I<D.length;I++){var O=D[I],L=S.style.getPropertyValue(O),U=S.style.getPropertyPriority(O);L!==R.style.getPropertyValue(O)||U!==R.style.getPropertyPriority(O)?M.styleDiff[O]=""===U?L:[L,U]:M._unchangedStyles[O]=[L,U]}for(var B=0,z=Array.from(R.style);B<z.length;B++){var G=z[B];""===S.style.getPropertyValue(G)&&(M.styleDiff[G]=!1)}}else"open"===k&&"DIALOG"===S.tagName&&(S.matches("dialog:modal")?M.attributes.rr_open_mode="modal":M.attributes.rr_open_mode="non-modal");break;case"childList":if(isBlocked(l.target,e.blockClass,e.blockSelector,!0))return;if("TEXTAREA"===l.target.tagName)return void e.genTextAreaValueMutation(l.target);l.addedNodes.forEach(function(_){return e.genAdds(_,l.target)}),l.removedNodes.forEach(function(_){var S=e.mirror.getId(_),k=isShadowRoot(l.target)?e.mirror.getId(Yo.host(l.target)):e.mirror.getId(l.target);isBlocked(l.target,e.blockClass,e.blockSelector,!1)||isIgnored(_,e.mirror,e.slimDOMOptions)||!function(e,l){return-1!==l.getId(e)}(_,e.mirror)||(e.addedSet.has(_)?(deepDelete(e.addedSet,_),e.droppedSet.add(_)):e.addedSet.has(l.target)&&-1===S||isAncestorRemoved(l.target,e.mirror)||(e.movedSet.has(_)&&e.movedMap[moveKey(S,k)]?deepDelete(e.movedSet,_):e.removes.push({parentId:k,id:S,isShadow:!(!isShadowRoot(l.target)||!isNativeShadowDom(l.target))||void 0})),e.mapRemoves.push(_))})}}),__publicField(this,"genAdds",function(l,_){if(!e.processedNodeManager.inOtherBuffer(l,e)&&!e.addedSet.has(l)&&!e.movedSet.has(l)){if(e.mirror.hasNode(l)){if(isIgnored(l,e.mirror,e.slimDOMOptions))return;e.movedSet.add(l);var S=null;_&&e.mirror.hasNode(_)&&(S=e.mirror.getId(_)),S&&-1!==S&&(e.movedMap[moveKey(e.mirror.getId(l),S)]=!0)}else e.addedSet.add(l),e.droppedSet.delete(l);isBlocked(l,e.blockClass,e.blockSelector,!1)||(Yo.childNodes(l).forEach(function(l){return e.genAdds(l)}),hasShadowRoot(l)&&Yo.childNodes(Yo.shadowRoot(l)).forEach(function(_){e.processedNodeManager.add(_,e),e.genAdds(_,l)}))}})},[{key:"init",value:function(e){var l=this;["mutationCb","blockClass","blockSelector","maskTextClass","maskTextSelector","inlineStylesheet","maskInputOptions","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach(function(_){l[_]=e[_]})}},{key:"freeze",value:function(){this.frozen=!0,this.canvasManager.freeze()}},{key:"unfreeze",value:function(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}},{key:"isFrozen",value:function(){return this.frozen}},{key:"lock",value:function(){this.locked=!0,this.canvasManager.lock()}},{key:"unlock",value:function(){this.locked=!1,this.canvasManager.unlock(),this.emit()}},{key:"reset",value:function(){this.shadowDomManager.reset(),this.canvasManager.reset()}}])}();function deepDelete(e,l){e.delete(l),Yo.childNodes(l).forEach(function(l){return deepDelete(e,l)})}function isParentRemoved(e,l,_){return 0!==e.length&&function(e,l,_){var S,k=Yo.parentNode(l),_loop3=function(){var l=_.getId(k);if(e.some(function(e){return e.id===l}))return{v:!0};k=Yo.parentNode(k)};for(;k;)if(S=_loop3())return S.v;return!1}(e,l,_)}function isAncestorInSet(e,l){return 0!==e.size&&_isAncestorInSet(e,l)}function _isAncestorInSet(e,l){var _=Yo.parentNode(l);return!!_&&(!!e.has(_)||_isAncestorInSet(e,_))}var callbackWrapper=function(e){if(!as)return e;return function(){try{return e.apply(void 0,arguments)}catch(l){if(as&&!0===as(l))return;throw l}}},us=[];function getEventTarget(e){try{if("composedPath"in e){var l=e.composedPath();if(l.length)return l[0]}else if("path"in e&&e.path.length)return e.path[0]}catch(_){}return e&&e.target}function initMutationObserver(e,l){var _=new ss;us.push(_),_.init(e);var S=new(mutationObserverCtor())(callbackWrapper(_.processMutations.bind(_)));return S.observe(l,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),S}function initMouseInteractionObserver(e){var l=e.mouseInteractionCb,_=e.doc,S=e.mirror,k=e.blockClass,E=e.blockSelector,T=e.sampling;if(!1===T.mouseInteraction)return function(){};var M=!0===T.mouseInteraction||void 0===T.mouseInteraction?{}:T.mouseInteraction,R=[],I=null;return Object.keys(ts).filter(function(e){return Number.isNaN(Number(e))&&!e.endsWith("_Departed")&&!1!==M[e]}).forEach(function(e){var T=toLowerCase(e),M=function(e){return function(_){var T=getEventTarget(_);if(!isBlocked(T,k,E,!0)){var M=null,R=e;if("pointerType"in _){switch(_.pointerType){case"mouse":M=rs.Mouse;break;case"touch":M=rs.Touch;break;case"pen":M=rs.Pen}M===rs.Touch?ts[e]===ts.MouseDown?R="TouchStart":ts[e]===ts.MouseUp&&(R="TouchEnd"):rs.Pen}else legacy_isTouchEvent(_)&&(M=rs.Touch);null!==M?(I=M,(R.startsWith("Touch")&&M===rs.Touch||R.startsWith("Mouse")&&M===rs.Mouse)&&(M=null)):ts[e]===ts.Click&&(M=I,I=null);var D=legacy_isTouchEvent(_)?_.changedTouches[0]:_;if(D){var O=S.getId(T),L=D.clientX,U=D.clientY;callbackWrapper(l)(_objectSpread2({type:ts[R],id:O,x:L,y:U},null!==M&&{pointerType:M}))}}}}(e);if(window.PointerEvent)switch(ts[e]){case ts.MouseDown:case ts.MouseUp:T=T.replace("mouse","pointer");break;case ts.TouchStart:case ts.TouchEnd:return}R.push(on(T,M,_))}),callbackWrapper(function(){R.forEach(function(e){return e()})})}function initScrollObserver(e){var l=e.scrollCb,_=e.doc,S=e.mirror,k=e.blockClass,E=e.blockSelector,T=e.sampling;return on("scroll",callbackWrapper(throttle(callbackWrapper(function(e){var T=getEventTarget(e);if(T&&!isBlocked(T,k,E,!0)){var M=S.getId(T);if(T===_&&_.defaultView){var R=getWindowScroll(_.defaultView);l({id:M,x:R.left,y:R.top})}else l({id:M,x:T.scrollLeft,y:T.scrollTop})}}),T.scroll||100)),_)}var ls=["INPUT","TEXTAREA","SELECT"],cs=new WeakMap;function getNestedCSSRulePositions(e){return function(e,l){if(hasNestedCSSRule("CSSGroupingRule")&&e.parentRule instanceof CSSGroupingRule||hasNestedCSSRule("CSSMediaRule")&&e.parentRule instanceof CSSMediaRule||hasNestedCSSRule("CSSSupportsRule")&&e.parentRule instanceof CSSSupportsRule||hasNestedCSSRule("CSSConditionRule")&&e.parentRule instanceof CSSConditionRule){var _=Array.from(e.parentRule.cssRules).indexOf(e);l.unshift(_)}else if(e.parentStyleSheet){var S=Array.from(e.parentStyleSheet.cssRules).indexOf(e);l.unshift(S)}return l}(e,[])}function getIdAndStyleId(e,l,_){var S,k;return e?(e.ownerNode?S=l.getId(e.ownerNode):k=_.getId(e),{styleId:k,id:S}):{}}function initAdoptedStyleSheetObserver(e,l){var _,S,k,E=e.mirror,T=e.stylesheetManager,M=null;M="#document"===l.nodeName?E.getId(l):E.getId(Yo.host(l));var R="#document"===l.nodeName?null==(_=l.defaultView)?void 0:_.Document:null==(k=null==(S=l.ownerDocument)?void 0:S.defaultView)?void 0:k.ShadowRoot,I=(null==R?void 0:R.prototype)?Object.getOwnPropertyDescriptor(null==R?void 0:R.prototype,"adoptedStyleSheets"):void 0;return null!==M&&-1!==M&&R&&I?(Object.defineProperty(l,"adoptedStyleSheets",{configurable:I.configurable,enumerable:I.enumerable,get:function(){var e;return null==(e=I.get)?void 0:e.call(this)},set:function(e){var l,_=null==(l=I.set)?void 0:l.call(this,e);if(null!==M&&-1!==M)try{T.adoptStyleSheets(e,M)}catch(S){}return _}}),callbackWrapper(function(){Object.defineProperty(l,"adoptedStyleSheets",{configurable:I.configurable,enumerable:I.enumerable,get:I.get,set:I.set})})):function(){}}function initObservers(e){var l,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},S=e.doc.defaultView;if(!S)return function(){};!function(e,l){var _=e.mutationCb,S=e.mousemoveCb,k=e.mouseInteractionCb,E=e.scrollCb,T=e.viewportResizeCb,M=e.inputCb,R=e.mediaInteractionCb,I=e.styleSheetRuleCb,D=e.styleDeclarationCb,O=e.canvasMutationCb,L=e.fontCb,U=e.selectionCb,B=e.customElementCb;e.mutationCb=function(){l.mutation&&l.mutation.apply(l,arguments),_.apply(void 0,arguments)},e.mousemoveCb=function(){l.mousemove&&l.mousemove.apply(l,arguments),S.apply(void 0,arguments)},e.mouseInteractionCb=function(){l.mouseInteraction&&l.mouseInteraction.apply(l,arguments),k.apply(void 0,arguments)},e.scrollCb=function(){l.scroll&&l.scroll.apply(l,arguments),E.apply(void 0,arguments)},e.viewportResizeCb=function(){l.viewportResize&&l.viewportResize.apply(l,arguments),T.apply(void 0,arguments)},e.inputCb=function(){l.input&&l.input.apply(l,arguments),M.apply(void 0,arguments)},e.mediaInteractionCb=function(){l.mediaInteaction&&l.mediaInteaction.apply(l,arguments),R.apply(void 0,arguments)},e.styleSheetRuleCb=function(){l.styleSheetRule&&l.styleSheetRule.apply(l,arguments),I.apply(void 0,arguments)},e.styleDeclarationCb=function(){l.styleDeclaration&&l.styleDeclaration.apply(l,arguments),D.apply(void 0,arguments)},e.canvasMutationCb=function(){l.canvasMutation&&l.canvasMutation.apply(l,arguments),O.apply(void 0,arguments)},e.fontCb=function(){l.font&&l.font.apply(l,arguments),L.apply(void 0,arguments)},e.selectionCb=function(){l.selection&&l.selection.apply(l,arguments),U.apply(void 0,arguments)},e.customElementCb=function(){l.customElement&&l.customElement.apply(l,arguments),B.apply(void 0,arguments)}}(e,_),e.recordDOM&&(l=initMutationObserver(e,e.doc));var k,E,T,M,R,I,D,O,L,U,B,z,G,j,H=function(e){var l=e.mousemoveCb,_=e.sampling,S=e.doc,k=e.mirror;if(!1===_.mousemove)return function(){};var E,T="number"==typeof _.mousemove?_.mousemove:50,M="number"==typeof _.mousemoveCallback?_.mousemoveCallback:500,R=[],I=throttle(callbackWrapper(function(e){var _=Date.now()-E;l(R.map(function(e){return e.timeOffset-=_,e}),e),R=[],E=null}),M),D=callbackWrapper(throttle(callbackWrapper(function(e){var l=getEventTarget(e),_=legacy_isTouchEvent(e)?e.changedTouches[0]:e,S=_.clientX,T=_.clientY;E||(E=Jo()),R.push({x:S,y:T,id:k.getId(l),timeOffset:Jo()-E}),I("undefined"!=typeof DragEvent&&e instanceof DragEvent?es.Drag:e instanceof MouseEvent?es.MouseMove:es.TouchMove)}),T,{trailing:!1})),O=[on("mousemove",D,S),on("touchmove",D,S),on("drag",D,S)];return callbackWrapper(function(){O.forEach(function(e){return e()})})}(e),V=initMouseInteractionObserver(e),W=initScrollObserver(e),q=(k={win:S},E=e.viewportResizeCb,T=k.win,M=-1,R=-1,on("resize",callbackWrapper(throttle(callbackWrapper(function(){var e=getWindowHeight(),l=getWindowWidth();M===e&&R===l||(E({width:Number(l),height:Number(e)}),M=e,R=l)}),200)),T)),X=function(e){var l=e.inputCb,_=e.doc,S=e.mirror,k=e.blockClass,E=e.blockSelector,T=e.ignoreClass,M=e.ignoreSelector,R=e.maskInputOptions,I=e.maskInputFn,D=e.sampling,O=e.userTriggeredOnInput;function eventHandler(e){var l=getEventTarget(e),S=e.isTrusted,D=l&&l.tagName;if(l&&"OPTION"===D&&(l=Yo.parentElement(l)),l&&D&&!(ls.indexOf(D)<0)&&!isBlocked(l,k,E,!0)&&!(l.classList.contains(T)||M&&l.matches(M))){var L=l.value,U=!1,B=getInputType(l)||"";"radio"===B||"checkbox"===B?U=l.checked:(R[D.toLowerCase()]||R[B])&&(L=maskInputValue({element:l,maskInputOptions:R,tagName:D,type:B,value:L,maskInputFn:I})),cbWithDedup(l,O?{text:L,isChecked:U,userTriggered:S}:{text:L,isChecked:U});var z=l.name;"radio"===B&&z&&U&&_.querySelectorAll('input[type="radio"][name="'.concat(z,'"]')).forEach(function(e){if(e!==l){var _=e.value;cbWithDedup(e,O?{text:_,isChecked:!U,userTriggered:!1}:{text:_,isChecked:!U})}})}}function cbWithDedup(e,_){var k=cs.get(e);if(!k||k.text!==_.text||k.isChecked!==_.isChecked){cs.set(e,_);var E=S.getId(e);callbackWrapper(l)(_objectSpread2(_objectSpread2({},_),{},{id:E}))}}var L=("last"===D.input?["change"]:["input","change"]).map(function(e){return on(e,callbackWrapper(eventHandler),_)}),U=_.defaultView;if(!U)return function(){L.forEach(function(e){return e()})};var B=U.Object.getOwnPropertyDescriptor(U.HTMLInputElement.prototype,"value"),z=[[U.HTMLInputElement.prototype,"value"],[U.HTMLInputElement.prototype,"checked"],[U.HTMLSelectElement.prototype,"value"],[U.HTMLTextAreaElement.prototype,"value"],[U.HTMLSelectElement.prototype,"selectedIndex"],[U.HTMLOptionElement.prototype,"selected"]];return B&&B.set&&L.push.apply(L,_toConsumableArray3(z.map(function(e){return hookSetter(e[0],e[1],{set:function(){callbackWrapper(eventHandler)({target:this,isTrusted:!1})}},!1,U)}))),callbackWrapper(function(){L.forEach(function(e){return e()})})}(e),K=(D=(I=e).mediaInteractionCb,O=I.blockClass,L=I.blockSelector,U=I.mirror,B=I.sampling,z=I.doc,G=callbackWrapper(function(e){return throttle(callbackWrapper(function(l){var _=getEventTarget(l);if(_&&!isBlocked(_,O,L,!0)){var S=_.currentTime,k=_.volume,E=_.muted,T=_.playbackRate,M=_.loop;D({type:e,id:U.getId(_),currentTime:S,volume:k,muted:E,playbackRate:T,loop:M})}}),B.media||500)}),j=[on("play",G(is.Play),z),on("pause",G(is.Pause),z),on("seeked",G(is.Seeked),z),on("volumechange",G(is.VolumeChange),z),on("ratechange",G(is.RateChange),z)],callbackWrapper(function(){j.forEach(function(e){return e()})})),styleSheetObserver=function(){},adoptedStyleSheetObserver=function(){},styleDeclarationObserver=function(){},fontObserver=function(){};e.recordDOM&&(styleSheetObserver=function(e,l){var _=e.styleSheetRuleCb,S=e.mirror,k=e.stylesheetManager,E=l.win;if(!E.CSSStyleSheet||!E.CSSStyleSheet.prototype)return function(){};var T=E.CSSStyleSheet.prototype.insertRule;E.CSSStyleSheet.prototype.insertRule=new Proxy(T,{apply:callbackWrapper(function(e,l,E){var T=_slicedToArray(E,2),M=T[0],R=T[1],I=getIdAndStyleId(l,S,k.styleMirror),D=I.id,O=I.styleId;return(D&&-1!==D||O&&-1!==O)&&_({id:D,styleId:O,adds:[{rule:M,index:R}]}),e.apply(l,E)})}),E.CSSStyleSheet.prototype.addRule=function(e,l){var _=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.cssRules.length,S="".concat(e," { ").concat(l," }");return E.CSSStyleSheet.prototype.insertRule.apply(this,[S,_])};var M,R,I=E.CSSStyleSheet.prototype.deleteRule;E.CSSStyleSheet.prototype.deleteRule=new Proxy(I,{apply:callbackWrapper(function(e,l,E){var T=_slicedToArray(E,1)[0],M=getIdAndStyleId(l,S,k.styleMirror),R=M.id,I=M.styleId;return(R&&-1!==R||I&&-1!==I)&&_({id:R,styleId:I,removes:[{index:T}]}),e.apply(l,E)})}),E.CSSStyleSheet.prototype.removeRule=function(e){return E.CSSStyleSheet.prototype.deleteRule.apply(this,[e])},E.CSSStyleSheet.prototype.replace&&(M=E.CSSStyleSheet.prototype.replace,E.CSSStyleSheet.prototype.replace=new Proxy(M,{apply:callbackWrapper(function(e,l,E){var T=_slicedToArray(E,1)[0],M=getIdAndStyleId(l,S,k.styleMirror),R=M.id,I=M.styleId;return(R&&-1!==R||I&&-1!==I)&&_({id:R,styleId:I,replace:T}),e.apply(l,E)})})),E.CSSStyleSheet.prototype.replaceSync&&(R=E.CSSStyleSheet.prototype.replaceSync,E.CSSStyleSheet.prototype.replaceSync=new Proxy(R,{apply:callbackWrapper(function(e,l,E){var T=_slicedToArray(E,1)[0],M=getIdAndStyleId(l,S,k.styleMirror),R=M.id,I=M.styleId;return(R&&-1!==R||I&&-1!==I)&&_({id:R,styleId:I,replaceSync:T}),e.apply(l,E)})}));var D={};canMonkeyPatchNestedCSSRule("CSSGroupingRule")?D.CSSGroupingRule=E.CSSGroupingRule:(canMonkeyPatchNestedCSSRule("CSSMediaRule")&&(D.CSSMediaRule=E.CSSMediaRule),canMonkeyPatchNestedCSSRule("CSSConditionRule")&&(D.CSSConditionRule=E.CSSConditionRule),canMonkeyPatchNestedCSSRule("CSSSupportsRule")&&(D.CSSSupportsRule=E.CSSSupportsRule));var O={};return Object.entries(D).forEach(function(e){var l=_slicedToArray(e,2),E=l[0],T=l[1];O[E]={insertRule:T.prototype.insertRule,deleteRule:T.prototype.deleteRule},T.prototype.insertRule=new Proxy(O[E].insertRule,{apply:callbackWrapper(function(e,l,E){var T=_slicedToArray(E,2),M=T[0],R=T[1],I=getIdAndStyleId(l.parentStyleSheet,S,k.styleMirror),D=I.id,O=I.styleId;return(D&&-1!==D||O&&-1!==O)&&_({id:D,styleId:O,adds:[{rule:M,index:[].concat(_toConsumableArray3(getNestedCSSRulePositions(l)),[R||0])}]}),e.apply(l,E)})}),T.prototype.deleteRule=new Proxy(O[E].deleteRule,{apply:callbackWrapper(function(e,l,E){var T=_slicedToArray(E,1)[0],M=getIdAndStyleId(l.parentStyleSheet,S,k.styleMirror),R=M.id,I=M.styleId;return(R&&-1!==R||I&&-1!==I)&&_({id:R,styleId:I,removes:[{index:[].concat(_toConsumableArray3(getNestedCSSRulePositions(l)),[T])}]}),e.apply(l,E)})})}),callbackWrapper(function(){E.CSSStyleSheet.prototype.insertRule=T,E.CSSStyleSheet.prototype.deleteRule=I,M&&(E.CSSStyleSheet.prototype.replace=M),R&&(E.CSSStyleSheet.prototype.replaceSync=R),Object.entries(D).forEach(function(e){var l=_slicedToArray(e,2),_=l[0],S=l[1];S.prototype.insertRule=O[_].insertRule,S.prototype.deleteRule=O[_].deleteRule})})}(e,{win:S}),adoptedStyleSheetObserver=initAdoptedStyleSheetObserver(e,e.doc),styleDeclarationObserver=function(e,l){var _=e.styleDeclarationCb,S=e.mirror,k=e.ignoreCSSAttributes,E=e.stylesheetManager,T=l.win,M=T.CSSStyleDeclaration.prototype.setProperty;T.CSSStyleDeclaration.prototype.setProperty=new Proxy(M,{apply:callbackWrapper(function(e,l,T){var R,I=_slicedToArray(T,3),D=I[0],O=I[1],L=I[2];if(k.has(D))return M.apply(l,[D,O,L]);var U=getIdAndStyleId(null==(R=l.parentRule)?void 0:R.parentStyleSheet,S,E.styleMirror),B=U.id,z=U.styleId;return(B&&-1!==B||z&&-1!==z)&&_({id:B,styleId:z,set:{property:D,value:O,priority:L},index:getNestedCSSRulePositions(l.parentRule)}),e.apply(l,T)})});var R=T.CSSStyleDeclaration.prototype.removeProperty;return T.CSSStyleDeclaration.prototype.removeProperty=new Proxy(R,{apply:callbackWrapper(function(e,l,T){var M,I=_slicedToArray(T,1)[0];if(k.has(I))return R.apply(l,[I]);var D=getIdAndStyleId(null==(M=l.parentRule)?void 0:M.parentStyleSheet,S,E.styleMirror),O=D.id,L=D.styleId;return(O&&-1!==O||L&&-1!==L)&&_({id:O,styleId:L,remove:{property:I},index:getNestedCSSRulePositions(l.parentRule)}),e.apply(l,T)})}),callbackWrapper(function(){T.CSSStyleDeclaration.prototype.setProperty=M,T.CSSStyleDeclaration.prototype.removeProperty=R})}(e,{win:S}),e.collectFonts&&(fontObserver=function(e){var l=e.fontCb,_=e.doc,S=_.defaultView;if(!S)return function(){};var k=[],E=new WeakMap,T=S.FontFace;S.FontFace=function(e,l,_){var S=new T(e,l,_);return E.set(S,{family:e,buffer:"string"!=typeof l,descriptors:_,fontSource:"string"==typeof l?l:JSON.stringify(Array.from(new Uint8Array(l)))}),S};var M=patch(_.fonts,"add",function(e){return function(_){return setTimeout(callbackWrapper(function(){var e=E.get(_);e&&(l(e),E.delete(_))}),0),e.apply(this,[_])}});return k.push(function(){S.FontFace=T}),k.push(M),callbackWrapper(function(){k.forEach(function(e){return e()})})}(e)));var Y,Q=function(e){var l=e.doc,_=e.mirror,S=e.blockClass,k=e.blockSelector,E=e.selectionCb,T=!0,M=callbackWrapper(function(){var e=l.getSelection();if(!(!e||T&&(null==e?void 0:e.isCollapsed))){T=e.isCollapsed||!1;for(var M=[],R=e.rangeCount||0,I=0;I<R;I++){var D=e.getRangeAt(I),O=D.startContainer,L=D.startOffset,U=D.endContainer,B=D.endOffset;isBlocked(O,S,k,!0)||isBlocked(U,S,k,!0)||M.push({start:_.getId(O),startOffset:L,end:_.getId(U),endOffset:B})}E({ranges:M})}});return M(),on("selectionchange",M)}(e),J=function(e){var l=e.doc,_=e.customElementCb,S=l.defaultView;return S&&S.customElements?patch(S.customElements,"define",function(e){return function(l,S,k){try{_({define:{name:l}})}catch(E){}return e.apply(this,[l,S,k])}}):function(){}}(e),Z=[],$=_createForOfIteratorHelper2(e.plugins);try{for($.s();!(Y=$.n()).done;){var ee=Y.value;Z.push(ee.observer(ee.callback,S,ee.options))}}catch(te){$.e(te)}finally{$.f()}return callbackWrapper(function(){us.forEach(function(e){return e.reset()}),null==l||l.disconnect(),H(),V(),W(),q(),X(),K(),styleSheetObserver(),adoptedStyleSheetObserver(),styleDeclarationObserver(),fontObserver(),Q(),J(),Z.forEach(function(e){return e()})})}function hasNestedCSSRule(e){return void 0!==window[e]}function canMonkeyPatchNestedCSSRule(e){return Boolean(void 0!==window[e]&&window[e].prototype&&"insertRule"in window[e].prototype&&"deleteRule"in window[e].prototype)}for(var hs=function(){return _createClass3(function CrossOriginIframeMirror(e){_classCallCheck3(this,CrossOriginIframeMirror),__publicField(this,"iframeIdToRemoteIdMap",new WeakMap),__publicField(this,"iframeRemoteIdToIdMap",new WeakMap),this.generateIdFn=e},[{key:"getId",value:function(e,l,_,S){var k=_||this.getIdToRemoteIdMap(e),E=S||this.getRemoteIdToIdMap(e),T=k.get(l);return T||(T=this.generateIdFn(),k.set(l,T),E.set(T,l)),T}},{key:"getIds",value:function(e,l){var _=this,S=this.getIdToRemoteIdMap(e),k=this.getRemoteIdToIdMap(e);return l.map(function(l){return _.getId(e,l,S,k)})}},{key:"getRemoteId",value:function(e,l,_){var S=_||this.getRemoteIdToIdMap(e);if("number"!=typeof l)return l;var k=S.get(l);return k||-1}},{key:"getRemoteIds",value:function(e,l){var _=this,S=this.getRemoteIdToIdMap(e);return l.map(function(l){return _.getRemoteId(e,l,S)})}},{key:"reset",value:function(e){if(!e)return this.iframeIdToRemoteIdMap=new WeakMap,void(this.iframeRemoteIdToIdMap=new WeakMap);this.iframeIdToRemoteIdMap.delete(e),this.iframeRemoteIdToIdMap.delete(e)}},{key:"getIdToRemoteIdMap",value:function(e){var l=this.iframeIdToRemoteIdMap.get(e);return l||(l=new Map,this.iframeIdToRemoteIdMap.set(e,l)),l}},{key:"getRemoteIdToIdMap",value:function(e){var l=this.iframeRemoteIdToIdMap.get(e);return l||(l=new Map,this.iframeRemoteIdToIdMap.set(e,l)),l}}])}(),ds=function(){return _createClass3(function IframeManager(e){_classCallCheck3(this,IframeManager),__publicField(this,"iframes",new WeakMap),__publicField(this,"crossOriginIframeMap",new WeakMap),__publicField(this,"crossOriginIframeMirror",new hs(genId)),__publicField(this,"crossOriginIframeStyleMirror"),__publicField(this,"crossOriginIframeRootIdMap",new WeakMap),__publicField(this,"mirror"),__publicField(this,"mutationCb"),__publicField(this,"wrappedEmit"),__publicField(this,"loadListener"),__publicField(this,"stylesheetManager"),__publicField(this,"recordCrossOriginIframes"),this.mutationCb=e.mutationCb,this.wrappedEmit=e.wrappedEmit,this.stylesheetManager=e.stylesheetManager,this.recordCrossOriginIframes=e.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new hs(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=e.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))},[{key:"addIframe",value:function(e){this.iframes.set(e,!0),e.contentWindow&&this.crossOriginIframeMap.set(e.contentWindow,e)}},{key:"addLoadListener",value:function(e){this.loadListener=e}},{key:"attachIframe",value:function(e,l){var _,S;this.mutationCb({adds:[{parentId:this.mirror.getId(e),nextId:null,node:l}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),this.recordCrossOriginIframes&&(null==(_=e.contentWindow)||_.addEventListener("message",this.handleMessage.bind(this))),null==(S=this.loadListener)||S.call(this,e),e.contentDocument&&e.contentDocument.adoptedStyleSheets&&e.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(e.contentDocument.adoptedStyleSheets,this.mirror.getId(e.contentDocument))}},{key:"handleMessage",value:function(e){var l=e;if("rrweb"===l.data.type&&l.origin===l.data.origin&&e.source){var _=this.crossOriginIframeMap.get(e.source);if(_){var S=this.transformCrossOriginEvent(_,l.data.event);S&&this.wrappedEmit(S,l.data.isCheckout)}}}},{key:"transformCrossOriginEvent",value:function(e,l){var _,S=this;switch(l.type){case $o.FullSnapshot:this.crossOriginIframeMirror.reset(e),this.crossOriginIframeStyleMirror.reset(e),this.replaceIdOnNode(l.data.node,e);var k=l.data.node.id;return this.crossOriginIframeRootIdMap.set(e,k),this.patchRootIdOnNode(l.data.node,k),{timestamp:l.timestamp,type:$o.IncrementalSnapshot,data:{source:es.Mutation,adds:[{parentId:this.mirror.getId(e),nextId:null,node:l.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}};case $o.Meta:case $o.Load:case $o.DomContentLoaded:return!1;case $o.Plugin:return l;case $o.Custom:return this.replaceIds(l.data.payload,e,["id","parentId","previousId","nextId"]),l;case $o.IncrementalSnapshot:switch(l.data.source){case es.Mutation:return l.data.adds.forEach(function(l){S.replaceIds(l,e,["parentId","nextId","previousId"]),S.replaceIdOnNode(l.node,e);var _=S.crossOriginIframeRootIdMap.get(e);_&&S.patchRootIdOnNode(l.node,_)}),l.data.removes.forEach(function(l){S.replaceIds(l,e,["parentId","id"])}),l.data.attributes.forEach(function(l){S.replaceIds(l,e,["id"])}),l.data.texts.forEach(function(l){S.replaceIds(l,e,["id"])}),l;case es.Drag:case es.TouchMove:case es.MouseMove:return l.data.positions.forEach(function(l){S.replaceIds(l,e,["id"])}),l;case es.ViewportResize:return!1;case es.MediaInteraction:case es.MouseInteraction:case es.Scroll:case es.CanvasMutation:case es.Input:return this.replaceIds(l.data,e,["id"]),l;case es.StyleSheetRule:case es.StyleDeclaration:return this.replaceIds(l.data,e,["id"]),this.replaceStyleIds(l.data,e,["styleId"]),l;case es.Font:return l;case es.Selection:return l.data.ranges.forEach(function(l){S.replaceIds(l,e,["start","end"])}),l;case es.AdoptedStyleSheet:return this.replaceIds(l.data,e,["id"]),this.replaceStyleIds(l.data,e,["styleIds"]),null==(_=l.data.styles)||_.forEach(function(l){S.replaceStyleIds(l,e,["styleId"])}),l}}return!1}},{key:"replace",value:function(e,l,_,S){var k,E=_createForOfIteratorHelper2(S);try{for(E.s();!(k=E.n()).done;){var T=k.value;(Array.isArray(l[T])||"number"==typeof l[T])&&(Array.isArray(l[T])?l[T]=e.getIds(_,l[T]):l[T]=e.getId(_,l[T]))}}catch(M){E.e(M)}finally{E.f()}return l}},{key:"replaceIds",value:function(e,l,_){return this.replace(this.crossOriginIframeMirror,e,l,_)}},{key:"replaceStyleIds",value:function(e,l,_){return this.replace(this.crossOriginIframeStyleMirror,e,l,_)}},{key:"replaceIdOnNode",value:function(e,l){var _=this;this.replaceIds(e,l,["id","rootId"]),"childNodes"in e&&e.childNodes.forEach(function(e){_.replaceIdOnNode(e,l)})}},{key:"patchRootIdOnNode",value:function(e,l){var _=this;e.type===D.Document||e.rootId||(e.rootId=l),"childNodes"in e&&e.childNodes.forEach(function(e){_.patchRootIdOnNode(e,l)})}}])}(),fs=function(){return _createClass3(function ShadowDomManager(e){_classCallCheck3(this,ShadowDomManager),__publicField(this,"shadowDoms",new WeakSet),__publicField(this,"mutationCb"),__publicField(this,"scrollCb"),__publicField(this,"bypassOptions"),__publicField(this,"mirror"),__publicField(this,"restoreHandlers",[]),this.mutationCb=e.mutationCb,this.scrollCb=e.scrollCb,this.bypassOptions=e.bypassOptions,this.mirror=e.mirror,this.init()},[{key:"init",value:function(){this.reset(),this.patchAttachShadow(Element,document)}},{key:"addShadowRoot",value:function(e,l){var _=this;if(isNativeShadowDom(e)&&!this.shadowDoms.has(e)){this.shadowDoms.add(e);var S=initMutationObserver(_objectSpread2(_objectSpread2({},this.bypassOptions),{},{doc:l,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this}),e);this.restoreHandlers.push(function(){return S.disconnect()}),this.restoreHandlers.push(initScrollObserver(_objectSpread2(_objectSpread2({},this.bypassOptions),{},{scrollCb:this.scrollCb,doc:e,mirror:this.mirror}))),setTimeout(function(){e.adoptedStyleSheets&&e.adoptedStyleSheets.length>0&&_.bypassOptions.stylesheetManager.adoptStyleSheets(e.adoptedStyleSheets,_.mirror.getId(Yo.host(e))),_.restoreHandlers.push(initAdoptedStyleSheetObserver({mirror:_.mirror,stylesheetManager:_.bypassOptions.stylesheetManager},e))},0)}}},{key:"observeAttachShadow",value:function(e){e.contentWindow&&e.contentDocument&&this.patchAttachShadow(e.contentWindow.Element,e.contentDocument)}},{key:"patchAttachShadow",value:function(e,l){var _=this;this.restoreHandlers.push(patch(e.prototype,"attachShadow",function(e){return function(S){var k=e.call(this,S),E=Yo.shadowRoot(this);return E&&inDom(this)&&_.addShadowRoot(E,l),k}}))}},{key:"reset",value:function(){this.restoreHandlers.forEach(function(e){try{e()}catch(l){}}),this.restoreHandlers=[],this.shadowDoms=new WeakSet}}])}(),ps="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",vs="undefined"==typeof Uint8Array?[]:new Uint8Array(256),gs=0;gs<64;gs++)vs[ps.charCodeAt(gs)]=gs;var ms=new Map;var saveWebGLVar=function(e,l,_){if(e&&(isInstanceOfWebGLObject(e,l)||"object"===_typeof3(e))){var S=function(e,l){var _=ms.get(e);return _||(_=new Map,ms.set(e,_)),_.has(l)||_.set(l,[]),_.get(l)}(_,e.constructor.name),k=S.indexOf(e);return-1===k&&(k=S.length,S.push(e)),k}};function serializeArg(e,l,_){if(e instanceof Array)return e.map(function(e){return serializeArg(e,l,_)});if(null===e)return e;if(e instanceof Float32Array||e instanceof Float64Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Int16Array||e instanceof Int8Array||e instanceof Uint8ClampedArray)return{rr_type:e.constructor.name,args:[Object.values(e)]};if(e instanceof ArrayBuffer){var S=e.constructor.name,k=function(e){var l,_=new Uint8Array(e),S=_.length,k="";for(l=0;l<S;l+=3)k+=ps[_[l]>>2],k+=ps[(3&_[l])<<4|_[l+1]>>4],k+=ps[(15&_[l+1])<<2|_[l+2]>>6],k+=ps[63&_[l+2]];return S%3==2?k=k.substring(0,k.length-1)+"=":S%3==1&&(k=k.substring(0,k.length-2)+"=="),k}(e);return{rr_type:S,base64:k}}if(e instanceof DataView)return{rr_type:e.constructor.name,args:[serializeArg(e.buffer,l,_),e.byteOffset,e.byteLength]};if(e instanceof HTMLImageElement)return{rr_type:e.constructor.name,src:e.src};if(e instanceof HTMLCanvasElement){return{rr_type:"HTMLImageElement",src:e.toDataURL()}}return e instanceof ImageData?{rr_type:e.constructor.name,args:[serializeArg(e.data,l,_),e.width,e.height]}:isInstanceOfWebGLObject(e,l)||"object"===_typeof3(e)?{rr_type:e.constructor.name,index:saveWebGLVar(e,l,_)}:e}var serializeArgs=function(e,l,_){return e.map(function(e){return serializeArg(e,l,_)})},isInstanceOfWebGLObject=function(e,l){var _=["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter(function(e){return"function"==typeof l[e]});return Boolean(_.find(function(_){return e instanceof l[_]}))};function initCanvasContextObserver(e,l,_,S){var k=[];try{var E=patch(e.HTMLCanvasElement.prototype,"getContext",function(e){return function(k){for(var E=arguments.length,T=new Array(E>1?E-1:0),M=1;M<E;M++)T[M-1]=arguments[M];if(!isBlocked(this,l,_,!0)){var R=function(e){return"experimental-webgl"===e?"webgl":e}(k);if("__context"in this||(this.__context=R),S&&["webgl","webgl2"].includes(R))if(T[0]&&"object"===_typeof3(T[0])){var I=T[0];I.preserveDrawingBuffer||(I.preserveDrawingBuffer=!0)}else T.splice(0,1,{preserveDrawingBuffer:!0})}return e.apply(this,[k].concat(T))}});k.push(E)}catch(T){}return function(){k.forEach(function(e){return e()})}}function patchGLPrototype(e,l,_,S,k,E){var T,M=[],R=_createForOfIteratorHelper2(Object.getOwnPropertyNames(e));try{var _loop5=function(){var R=T.value;if(["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(R))return 0;try{if("function"!=typeof e[R])return 0;var I=patch(e,R,function(e){return function(){for(var T=arguments.length,M=new Array(T),I=0;I<T;I++)M[I]=arguments[I];var D=e.apply(this,M);if(saveWebGLVar(D,E,this),"tagName"in this.canvas&&!isBlocked(this.canvas,S,k,!0)){var O=serializeArgs(M,E,this),L={type:l,property:R,args:O};_(this.canvas,L)}return D}});M.push(I)}catch(O){var D=hookSetter(e,R,{set:function(e){_(this.canvas,{type:l,property:R,args:[e],setter:!0})}});M.push(D)}};for(R.s();!(T=R.n()).done;)_loop5()}catch(I){R.e(I)}finally{R.f()}return M}var ys,_s="KGZ1bmN0aW9uKCkgewogICJ1c2Ugc3RyaWN0IjsKICB2YXIgY2hhcnMgPSAiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyI7CiAgdmFyIGxvb2t1cCA9IHR5cGVvZiBVaW50OEFycmF5ID09PSAidW5kZWZpbmVkIiA/IFtdIDogbmV3IFVpbnQ4QXJyYXkoMjU2KTsKICBmb3IgKHZhciBpID0gMDsgaSA8IGNoYXJzLmxlbmd0aDsgaSsrKSB7CiAgICBsb29rdXBbY2hhcnMuY2hhckNvZGVBdChpKV0gPSBpOwogIH0KICB2YXIgZW5jb2RlID0gZnVuY3Rpb24oYXJyYXlidWZmZXIpIHsKICAgIHZhciBieXRlcyA9IG5ldyBVaW50OEFycmF5KGFycmF5YnVmZmVyKSwgaTIsIGxlbiA9IGJ5dGVzLmxlbmd0aCwgYmFzZTY0ID0gIiI7CiAgICBmb3IgKGkyID0gMDsgaTIgPCBsZW47IGkyICs9IDMpIHsKICAgICAgYmFzZTY0ICs9IGNoYXJzW2J5dGVzW2kyXSA+PiAyXTsKICAgICAgYmFzZTY0ICs9IGNoYXJzWyhieXRlc1tpMl0gJiAzKSA8PCA0IHwgYnl0ZXNbaTIgKyAxXSA+PiA0XTsKICAgICAgYmFzZTY0ICs9IGNoYXJzWyhieXRlc1tpMiArIDFdICYgMTUpIDw8IDIgfCBieXRlc1tpMiArIDJdID4+IDZdOwogICAgICBiYXNlNjQgKz0gY2hhcnNbYnl0ZXNbaTIgKyAyXSAmIDYzXTsKICAgIH0KICAgIGlmIChsZW4gJSAzID09PSAyKSB7CiAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDEpICsgIj0iOwogICAgfSBlbHNlIGlmIChsZW4gJSAzID09PSAxKSB7CiAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDIpICsgIj09IjsKICAgIH0KICAgIHJldHVybiBiYXNlNjQ7CiAgfTsKICBjb25zdCBsYXN0QmxvYk1hcCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7CiAgY29uc3QgdHJhbnNwYXJlbnRCbG9iTWFwID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTsKICBhc3luYyBmdW5jdGlvbiBnZXRUcmFuc3BhcmVudEJsb2JGb3Iod2lkdGgsIGhlaWdodCwgZGF0YVVSTE9wdGlvbnMpIHsKICAgIGNvbnN0IGlkID0gYCR7d2lkdGh9LSR7aGVpZ2h0fWA7CiAgICBpZiAoIk9mZnNjcmVlbkNhbnZhcyIgaW4gZ2xvYmFsVGhpcykgewogICAgICBpZiAodHJhbnNwYXJlbnRCbG9iTWFwLmhhcyhpZCkpIHJldHVybiB0cmFuc3BhcmVudEJsb2JNYXAuZ2V0KGlkKTsKICAgICAgY29uc3Qgb2Zmc2NyZWVuID0gbmV3IE9mZnNjcmVlbkNhbnZhcyh3aWR0aCwgaGVpZ2h0KTsKICAgICAgb2Zmc2NyZWVuLmdldENvbnRleHQoIjJkIik7CiAgICAgIGNvbnN0IGJsb2IgPSBhd2FpdCBvZmZzY3JlZW4uY29udmVydFRvQmxvYihkYXRhVVJMT3B0aW9ucyk7CiAgICAgIGNvbnN0IGFycmF5QnVmZmVyID0gYXdhaXQgYmxvYi5hcnJheUJ1ZmZlcigpOwogICAgICBjb25zdCBiYXNlNjQgPSBlbmNvZGUoYXJyYXlCdWZmZXIpOwogICAgICB0cmFuc3BhcmVudEJsb2JNYXAuc2V0KGlkLCBiYXNlNjQpOwogICAgICByZXR1cm4gYmFzZTY0OwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuICIiOwogICAgfQogIH0KICBjb25zdCB3b3JrZXIgPSBzZWxmOwogIHdvcmtlci5vbm1lc3NhZ2UgPSBhc3luYyBmdW5jdGlvbihlKSB7CiAgICBpZiAoIk9mZnNjcmVlbkNhbnZhcyIgaW4gZ2xvYmFsVGhpcykgewogICAgICBjb25zdCB7IGlkLCBiaXRtYXAsIHdpZHRoLCBoZWlnaHQsIGRhdGFVUkxPcHRpb25zIH0gPSBlLmRhdGE7CiAgICAgIGNvbnN0IHRyYW5zcGFyZW50QmFzZTY0ID0gZ2V0VHJhbnNwYXJlbnRCbG9iRm9yKAogICAgICAgIHdpZHRoLAogICAgICAgIGhlaWdodCwKICAgICAgICBkYXRhVVJMT3B0aW9ucwogICAgICApOwogICAgICBjb25zdCBvZmZzY3JlZW4gPSBuZXcgT2Zmc2NyZWVuQ2FudmFzKHdpZHRoLCBoZWlnaHQpOwogICAgICBjb25zdCBjdHggPSBvZmZzY3JlZW4uZ2V0Q29udGV4dCgiMmQiKTsKICAgICAgY3R4LmRyYXdJbWFnZShiaXRtYXAsIDAsIDApOwogICAgICBiaXRtYXAuY2xvc2UoKTsKICAgICAgY29uc3QgYmxvYiA9IGF3YWl0IG9mZnNjcmVlbi5jb252ZXJ0VG9CbG9iKGRhdGFVUkxPcHRpb25zKTsKICAgICAgY29uc3QgdHlwZSA9IGJsb2IudHlwZTsKICAgICAgY29uc3QgYXJyYXlCdWZmZXIgPSBhd2FpdCBibG9iLmFycmF5QnVmZmVyKCk7CiAgICAgIGNvbnN0IGJhc2U2NCA9IGVuY29kZShhcnJheUJ1ZmZlcik7CiAgICAgIGlmICghbGFzdEJsb2JNYXAuaGFzKGlkKSAmJiBhd2FpdCB0cmFuc3BhcmVudEJhc2U2NCA9PT0gYmFzZTY0KSB7CiAgICAgICAgbGFzdEJsb2JNYXAuc2V0KGlkLCBiYXNlNjQpOwogICAgICAgIHJldHVybiB3b3JrZXIucG9zdE1lc3NhZ2UoeyBpZCB9KTsKICAgICAgfQogICAgICBpZiAobGFzdEJsb2JNYXAuZ2V0KGlkKSA9PT0gYmFzZTY0KSByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQgfSk7CiAgICAgIHdvcmtlci5wb3N0TWVzc2FnZSh7CiAgICAgICAgaWQsCiAgICAgICAgdHlwZSwKICAgICAgICBiYXNlNjQsCiAgICAgICAgd2lkdGgsCiAgICAgICAgaGVpZ2h0CiAgICAgIH0pOwogICAgICBsYXN0QmxvYk1hcC5zZXQoaWQsIGJhc2U2NCk7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQ6IGUuZGF0YS5pZCB9KTsKICAgIH0KICB9Owp9KSgpOwovLyMgc291cmNlTWFwcGluZ1VSTD1pbWFnZS1iaXRtYXAtZGF0YS11cmwtd29ya2VyLUlKcEM3Z19iLmpzLm1hcAo=",bs="undefined"!=typeof window&&window.Blob&&new Blob([(ys=_s,Uint8Array.from(atob(ys),function(e){return e.charCodeAt(0)}))],{type:"text/javascript;charset=utf-8"});function WorkerWrapper(e){var l;try{if(!(l=bs&&(window.URL||window.webkitURL).createObjectURL(bs)))throw"";var _=new Worker(l,{name:null==e?void 0:e.name});return _.addEventListener("error",function(){(window.URL||window.webkitURL).revokeObjectURL(l)}),_}catch(S){return new Worker("data:text/javascript;base64,"+_s,{name:null==e?void 0:e.name})}finally{l&&(window.URL||window.webkitURL).revokeObjectURL(l)}}var Ss,ws,xs,ks=function(){return _createClass3(function CanvasManager(e){var l=this;_classCallCheck3(this,CanvasManager),__publicField(this,"pendingCanvasMutations",new Map),__publicField(this,"rafStamps",{latestId:0,invokeId:null}),__publicField(this,"mirror"),__publicField(this,"mutationCb"),__publicField(this,"resetObservers"),__publicField(this,"frozen",!1),__publicField(this,"locked",!1),__publicField(this,"processMutation",function(e,_){!(l.rafStamps.invokeId&&l.rafStamps.latestId!==l.rafStamps.invokeId)&&l.rafStamps.invokeId||(l.rafStamps.invokeId=l.rafStamps.latestId),l.pendingCanvasMutations.has(e)||l.pendingCanvasMutations.set(e,[]),l.pendingCanvasMutations.get(e).push(_)});var _=e.sampling,S=void 0===_?"all":_,k=e.win,E=e.blockClass,T=e.blockSelector,M=e.recordCanvas,R=e.dataURLOptions;this.mutationCb=e.mutationCb,this.mirror=e.mirror,M&&"all"===S&&this.initCanvasMutationObserver(k,E,T),M&&"number"==typeof S&&this.initCanvasFPSObserver(S,k,E,T,{dataURLOptions:R})},[{key:"reset",value:function(){this.pendingCanvasMutations.clear(),this.resetObservers&&this.resetObservers()}},{key:"freeze",value:function(){this.frozen=!0}},{key:"unfreeze",value:function(){this.frozen=!1}},{key:"lock",value:function(){this.locked=!0}},{key:"unlock",value:function(){this.locked=!1}},{key:"initCanvasFPSObserver",value:function(e,l,_,S,k){var E=this,T=initCanvasContextObserver(l,_,S,!0),M=new Map,R=new WorkerWrapper;R.onmessage=function(e){var l=e.data.id;if(M.set(l,!1),"base64"in e.data){var _=e.data,S=_.base64,k=_.type,T=_.width,R=_.height;E.mutationCb({id:l,type:ns["2D"],commands:[{property:"clearRect",args:[0,0,T,R]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:S}],type:k}]},0,0]}]})}};var I,D=1e3/e,O=0,_takeCanvasSnapshots=function(e){var T;O&&e-O<D?I=requestAnimationFrame(_takeCanvasSnapshots):(O=e,(T=[],l.document.querySelectorAll("canvas").forEach(function(e){isBlocked(e,_,S,!0)||T.push(e)}),T).forEach(function(){var e=_asyncToGenerator(_regenerator().m(function _callee25(e){var l,_,S,T;return _regenerator().w(function(I){for(;;)switch(I.n){case 0:if(_=E.mirror.getId(e),!M.get(_)){I.n=1;break}return I.a(2);case 1:if(0!==e.width&&0!==e.height){I.n=2;break}return I.a(2);case 2:return M.set(_,!0),["webgl","webgl2"].includes(e.__context)&&(S=e.getContext(e.__context),!1===(null==(l=null==S?void 0:S.getContextAttributes())?void 0:l.preserveDrawingBuffer)&&S.clear(S.COLOR_BUFFER_BIT)),I.n=3,createImageBitmap(e);case 3:T=I.v,R.postMessage({id:_,bitmap:T,width:e.width,height:e.height,dataURLOptions:k.dataURLOptions},[T]);case 4:return I.a(2)}},_callee25)}));return function(l){return e.apply(this,arguments)}}()),I=requestAnimationFrame(_takeCanvasSnapshots))};I=requestAnimationFrame(_takeCanvasSnapshots),this.resetObservers=function(){T(),cancelAnimationFrame(I)}}},{key:"initCanvasMutationObserver",value:function(e,l,_){this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher();var S=initCanvasContextObserver(e,l,_,!1),k=function(e,l,_,S){var k,E=[],T=_createForOfIteratorHelper2(Object.getOwnPropertyNames(l.CanvasRenderingContext2D.prototype));try{var _loop4=function(){var T=k.value;try{if("function"!=typeof l.CanvasRenderingContext2D.prototype[T])return 1;var M=patch(l.CanvasRenderingContext2D.prototype,T,function(k){return function(){for(var E=this,M=arguments.length,R=new Array(M),I=0;I<M;I++)R[I]=arguments[I];return isBlocked(this.canvas,_,S,!0)||setTimeout(function(){var _=serializeArgs(R,l,E);e(E.canvas,{type:ns["2D"],property:T,args:_})},0),k.apply(this,R)}});E.push(M)}catch(I){var R=hookSetter(l.CanvasRenderingContext2D.prototype,T,{set:function(l){e(this.canvas,{type:ns["2D"],property:T,args:[l],setter:!0})}});E.push(R)}};for(T.s();!(k=T.n()).done;)_loop4()}catch(M){T.e(M)}finally{T.f()}return function(){E.forEach(function(e){return e()})}}(this.processMutation.bind(this),e,l,_),E=function(e,l,_,S){var k=[];return k.push.apply(k,_toConsumableArray3(patchGLPrototype(l.WebGLRenderingContext.prototype,ns.WebGL,e,_,S,l))),void 0!==l.WebGL2RenderingContext&&k.push.apply(k,_toConsumableArray3(patchGLPrototype(l.WebGL2RenderingContext.prototype,ns.WebGL2,e,_,S,l))),function(){k.forEach(function(e){return e()})}}(this.processMutation.bind(this),e,l,_);this.resetObservers=function(){S(),k(),E()}}},{key:"startPendingCanvasMutationFlusher",value:function(){var e=this;requestAnimationFrame(function(){return e.flushPendingCanvasMutations()})}},{key:"startRAFTimestamping",value:function(){var e=this,_setLatestRAFTimestamp=function(l){e.rafStamps.latestId=l,requestAnimationFrame(_setLatestRAFTimestamp)};requestAnimationFrame(_setLatestRAFTimestamp)}},{key:"flushPendingCanvasMutations",value:function(){var e=this;this.pendingCanvasMutations.forEach(function(l,_){var S=e.mirror.getId(_);e.flushPendingCanvasMutationFor(_,S)}),requestAnimationFrame(function(){return e.flushPendingCanvasMutations()})}},{key:"flushPendingCanvasMutationFor",value:function(e,l){if(!this.frozen&&!this.locked){var _=this.pendingCanvasMutations.get(e);if(_&&-1!==l){var S=_.map(function(e){e.type;return _objectWithoutProperties3(e,k)}),E=_[0].type;this.mutationCb({id:l,type:E,commands:S}),this.pendingCanvasMutations.delete(e)}}}}])}(),As=function(){return _createClass3(function StylesheetManager(e){_classCallCheck3(this,StylesheetManager),__publicField(this,"trackedLinkElements",new WeakSet),__publicField(this,"mutationCb"),__publicField(this,"adoptedStyleSheetCb"),__publicField(this,"styleMirror",new Zo),this.mutationCb=e.mutationCb,this.adoptedStyleSheetCb=e.adoptedStyleSheetCb},[{key:"attachLinkElement",value:function(e,l){"_cssText"in l.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:l.id,attributes:l.attributes}]}),this.trackLinkElement(e)}},{key:"trackLinkElement",value:function(e){this.trackedLinkElements.has(e)||(this.trackedLinkElements.add(e),this.trackStylesheetInLinkElement(e))}},{key:"adoptStyleSheets",value:function(e,l){var _=this;if(0!==e.length){var S,k={id:l,styleIds:[]},E=[],T=_createForOfIteratorHelper2(e);try{var _loop6=function(){var e,l=S.value;_.styleMirror.has(l)?e=_.styleMirror.getId(l):(e=_.styleMirror.add(l),E.push({styleId:e,rules:Array.from(l.rules||CSSRule,function(e,_){return{rule:stringifyRule(e,l.href),index:_}})})),k.styleIds.push(e)};for(T.s();!(S=T.n()).done;)_loop6()}catch(M){T.e(M)}finally{T.f()}E.length>0&&(k.styles=E),this.adoptedStyleSheetCb(k)}}},{key:"reset",value:function(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}},{key:"trackStylesheetInLinkElement",value:function(e){}}])}(),Es=function(){return _createClass3(function ProcessedNodeManager(){_classCallCheck3(this,ProcessedNodeManager),__publicField(this,"nodeMap",new WeakMap),__publicField(this,"active",!1)},[{key:"inOtherBuffer",value:function(e,l){var _=this.nodeMap.get(e);return _&&Array.from(_).some(function(e){return e!==l})}},{key:"add",value:function(e,l){var _=this;this.active||(this.active=!0,requestAnimationFrame(function(){_.nodeMap=new WeakMap,_.active=!1})),this.nodeMap.set(e,(this.nodeMap.get(e)||new Set).add(l))}},{key:"destroy",value:function(){}}])}(),Cs=!1;try{if(2!==Array.from([1],function(e){return 2*e})[0]){var Ts=document.createElement("iframe");document.body.appendChild(Ts),Array.from=(null==(M=Ts.contentWindow)?void 0:M.Array.from)||Array.from,document.body.removeChild(Ts)}}catch(Ps){}var Ms,Rs,Is=new j;function record(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=e.emit,_=e.checkoutEveryNms,S=e.checkoutEveryNth,k=e.blockClass,E=void 0===k?"rr-block":k,T=e.blockSelector,M=void 0===T?null:T,R=e.ignoreClass,I=void 0===R?"rr-ignore":R,D=e.ignoreSelector,O=void 0===D?null:D,L=e.maskTextClass,U=void 0===L?"rr-mask":L,B=e.maskTextSelector,z=void 0===B?null:B,G=e.inlineStylesheet,H=void 0===G||G,V=e.maskAllInputs,W=e.maskInputOptions,q=e.slimDOMOptions,X=e.maskInputFn,K=e.maskTextFn,Y=e.hooks,Q=e.packFn,J=e.sampling,Z=void 0===J?{}:J,$=e.dataURLOptions,ee=void 0===$?{}:$,te=e.mousemoveWait,re=e.recordDOM,ne=void 0===re||re,ie=e.recordCanvas,ae=void 0!==ie&&ie,oe=e.recordCrossOriginIframes,se=void 0!==oe&&oe,ue=e.recordAfter,le=void 0===ue?"DOMContentLoaded"===e.recordAfter?e.recordAfter:"load":ue,ce=e.userTriggeredOnInput,he=void 0!==ce&&ce,de=e.collectFonts,fe=void 0!==de&&de,pe=e.inlineImages,ve=void 0!==pe&&pe,ge=e.plugins,me=e.keepIframeSrcFn,ye=void 0===me?function(){return!1}:me,_e=e.ignoreCSSAttributes,be=void 0===_e?new Set([]):_e,Se=e.errorHandler;as=Se;var we=!se||window.parent===window,xe=!1;if(!we)try{window.parent.document&&(xe=!1)}catch(Ue){xe=!0}if(we&&!l)throw new Error("emit function is required");if(!we&&!xe)return function(){};void 0!==te&&void 0===Z.mousemove&&(Z.mousemove=te),Is.reset();var ke,Ae=!0===V?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:void 0!==W?W:{password:!0},Ee=!0===q||"all"===q?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:"all"===q,headMetaDescKeywords:"all"===q,headTitleMutations:"all"===q}:q||{};!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;"NodeList"in e&&!e.NodeList.prototype.forEach&&(e.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in e&&!e.DOMTokenList.prototype.forEach&&(e.DOMTokenList.prototype.forEach=Array.prototype.forEach)}();var Ce=0,eventProcessor=function(e){var l,_=_createForOfIteratorHelper2(ge||[]);try{for(_.s();!(l=_.n()).done;){var S=l.value;S.eventProcessor&&(e=S.eventProcessor(e))}}catch(Ps){_.e(Ps)}finally{_.f()}return Q&&!xe&&(e=Q(e)),e};Ss=function(e,k){var E,T=e;if(T.timestamp=Jo(),!(null==(E=us[0])?void 0:E.isFrozen())||T.type===$o.FullSnapshot||T.type===$o.IncrementalSnapshot&&T.data.source===es.Mutation||us.forEach(function(e){return e.unfreeze()}),we)null==l||l(eventProcessor(T),k);else if(xe){var M={type:"rrweb",event:eventProcessor(T),origin:window.location.origin,isCheckout:k};window.parent.postMessage(M,"*")}if(T.type===$o.FullSnapshot)ke=T,Ce=0;else if(T.type===$o.IncrementalSnapshot){if(T.data.source===es.Mutation&&T.data.isAttachIframe)return;Ce++;var R=S&&Ce>=S,I=_&&T.timestamp-ke.timestamp>_;(R||I)&&ws(!0)}};var Te,wrappedMutationEmit=function(e){Ss({type:$o.IncrementalSnapshot,data:_objectSpread2({source:es.Mutation},e)})},wrappedScrollEmit=function(e){return Ss({type:$o.IncrementalSnapshot,data:_objectSpread2({source:es.Scroll},e)})},wrappedCanvasMutationEmit=function(e){return Ss({type:$o.IncrementalSnapshot,data:_objectSpread2({source:es.CanvasMutation},e)})},Me=new As({mutationCb:wrappedMutationEmit,adoptedStyleSheetCb:function(e){return Ss({type:$o.IncrementalSnapshot,data:_objectSpread2({source:es.AdoptedStyleSheet},e)})}}),Re=new ds({mirror:Is,mutationCb:wrappedMutationEmit,stylesheetManager:Me,recordCrossOriginIframes:se,wrappedEmit:Ss}),Ie=_createForOfIteratorHelper2(ge||[]);try{for(Ie.s();!(Te=Ie.n()).done;){var Pe=Te.value;Pe.getMirror&&Pe.getMirror({nodeMirror:Is,crossOriginIframeMirror:Re.crossOriginIframeMirror,crossOriginIframeStyleMirror:Re.crossOriginIframeStyleMirror})}}catch(Ps){Ie.e(Ps)}finally{Ie.f()}var De=new Es;xs=new ks({recordCanvas:ae,mutationCb:wrappedCanvasMutationEmit,win:window,blockClass:E,blockSelector:M,mirror:Is,sampling:Z.canvas,dataURLOptions:ee});var Oe=new fs({mutationCb:wrappedMutationEmit,scrollCb:wrappedScrollEmit,bypassOptions:{blockClass:E,blockSelector:M,maskTextClass:U,maskTextSelector:z,inlineStylesheet:H,maskInputOptions:Ae,dataURLOptions:ee,maskTextFn:K,maskInputFn:X,recordCanvas:ae,inlineImages:ve,sampling:Z,slimDOMOptions:Ee,iframeManager:Re,stylesheetManager:Me,canvasManager:xs,keepIframeSrcFn:ye,processedNodeManager:De},mirror:Is});ws=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(ne){Ss({type:$o.Meta,data:{href:window.location.href,width:getWindowWidth(),height:getWindowHeight()}},e),Me.reset(),Oe.init(),us.forEach(function(e){return e.lock()});var l=function(e,l){var _=l||{},S=_.mirror,k=void 0===S?new j:S,E=_.blockClass,T=void 0===E?"rr-block":E,M=_.blockSelector,R=void 0===M?null:M,I=_.maskTextClass,D=void 0===I?"rr-mask":I,O=_.maskTextSelector,L=void 0===O?null:O,U=_.inlineStylesheet,B=void 0===U||U,z=_.inlineImages,G=void 0!==z&&z,H=_.recordCanvas,V=void 0!==H&&H,W=_.maskAllInputs,q=void 0!==W&&W,X=_.maskTextFn,K=_.maskInputFn,Y=_.slimDOM,Q=void 0!==Y&&Y,J=_.dataURLOptions,Z=_.preserveWhiteSpace,$=_.onSerialize,ee=_.onIframeLoad,te=_.iframeLoadTimeout,re=_.onStylesheetLoad,ne=_.stylesheetLoadTimeout,ie=_.keepIframeSrcFn;return serializeNodeWithId(e,{doc:e,mirror:k,blockClass:T,blockSelector:R,maskTextClass:D,maskTextSelector:L,skipChild:!1,inlineStylesheet:B,maskInputOptions:!0===q?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:!1===q?{password:!0}:q,maskTextFn:X,maskInputFn:K,slimDOMOptions:!0===Q||"all"===Q?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:"all"===Q,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:!1===Q?{}:Q,dataURLOptions:J,inlineImages:G,recordCanvas:V,preserveWhiteSpace:Z,onSerialize:$,onIframeLoad:ee,iframeLoadTimeout:te,onStylesheetLoad:re,stylesheetLoadTimeout:ne,keepIframeSrcFn:void 0===ie?function(){return!1}:ie,newlyAddedElement:!1})}(document,{mirror:Is,blockClass:E,blockSelector:M,maskTextClass:U,maskTextSelector:z,inlineStylesheet:H,maskAllInputs:Ae,maskTextFn:K,maskInputFn:X,slimDOM:Ee,dataURLOptions:ee,recordCanvas:ae,inlineImages:ve,onSerialize:function(e){isSerializedIframe(e,Is)&&Re.addIframe(e),isSerializedStylesheet(e,Is)&&Me.trackLinkElement(e),hasShadowRoot(e)&&Oe.addShadowRoot(Yo.shadowRoot(e),document)},onIframeLoad:function(e,l){Re.attachIframe(e,l),Oe.observeAttachShadow(e)},onStylesheetLoad:function(e,l){Me.attachLinkElement(e,l)},keepIframeSrcFn:ye});l&&(Ss({type:$o.FullSnapshot,data:{node:l,initialOffset:getWindowScroll(window)}},e),us.forEach(function(e){return e.unlock()}),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&Me.adoptStyleSheets(document.adoptedStyleSheets,Is.getId(document)))}};try{var Le=[],observe=function(e){var l;return callbackWrapper(initObservers)({mutationCb:wrappedMutationEmit,mousemoveCb:function(e,l){return Ss({type:$o.IncrementalSnapshot,data:{source:l,positions:e}})},mouseInteractionCb:function(e){return Ss({type:$o.IncrementalSnapshot,data:_objectSpread2({source:es.MouseInteraction},e)})},scrollCb:wrappedScrollEmit,viewportResizeCb:function(e){return Ss({type:$o.IncrementalSnapshot,data:_objectSpread2({source:es.ViewportResize},e)})},inputCb:function(e){return Ss({type:$o.IncrementalSnapshot,data:_objectSpread2({source:es.Input},e)})},mediaInteractionCb:function(e){return Ss({type:$o.IncrementalSnapshot,data:_objectSpread2({source:es.MediaInteraction},e)})},styleSheetRuleCb:function(e){return Ss({type:$o.IncrementalSnapshot,data:_objectSpread2({source:es.StyleSheetRule},e)})},styleDeclarationCb:function(e){return Ss({type:$o.IncrementalSnapshot,data:_objectSpread2({source:es.StyleDeclaration},e)})},canvasMutationCb:wrappedCanvasMutationEmit,fontCb:function(e){return Ss({type:$o.IncrementalSnapshot,data:_objectSpread2({source:es.Font},e)})},selectionCb:function(e){Ss({type:$o.IncrementalSnapshot,data:_objectSpread2({source:es.Selection},e)})},customElementCb:function(e){Ss({type:$o.IncrementalSnapshot,data:_objectSpread2({source:es.CustomElement},e)})},blockClass:E,ignoreClass:I,ignoreSelector:O,maskTextClass:U,maskTextSelector:z,maskInputOptions:Ae,inlineStylesheet:H,sampling:Z,recordDOM:ne,recordCanvas:ae,inlineImages:ve,userTriggeredOnInput:he,collectFonts:fe,doc:e,maskInputFn:X,maskTextFn:K,keepIframeSrcFn:ye,blockSelector:M,slimDOMOptions:Ee,dataURLOptions:ee,mirror:Is,iframeManager:Re,stylesheetManager:Me,shadowDomManager:Oe,processedNodeManager:De,canvasManager:xs,ignoreCSSAttributes:be,plugins:(null==(l=null==ge?void 0:ge.filter(function(e){return e.observer}))?void 0:l.map(function(e){return{observer:e.observer,options:e.options,callback:function(l){return Ss({type:$o.Plugin,data:{plugin:e.name,payload:l}})}}}))||[]},Y)};Re.addLoadListener(function(e){try{Le.push(observe(e.contentDocument))}catch(l){}});var init=function(){ws(),Le.push(observe(document)),Cs=!0};return"interactive"===document.readyState||"complete"===document.readyState?init():(Le.push(on("DOMContentLoaded",function(){Ss({type:$o.DomContentLoaded,data:{}}),"DOMContentLoaded"===le&&init()})),Le.push(on("load",function(){Ss({type:$o.Load,data:{}}),"load"===le&&init()},window))),function(){Le.forEach(function(e){return e()}),De.destroy(),Cs=!1,as=void 0}}catch(Fe){}}record.addCustomEvent=function(e,l){if(!Cs)throw new Error("please add custom event after start recording");Ss({type:$o.Custom,data:{tag:e,payload:l}})},record.freezePage=function(){us.forEach(function(e){return e.freeze()})},record.takeFullSnapshot=function(e){if(!Cs)throw new Error("please take full snapshot after start recording");ws(e)},record.mirror=Is,(Rs=Ms||(Ms={}))[Rs.NotStarted=0]="NotStarted",Rs[Rs.Running=1]="Running",Rs[Rs.Stopped=2]="Stopped",E.record=record}(yi)),yi}function requireSessionReplayClient(){if(fi)return mi;fi=1,Object.defineProperty(mi,"__esModule",{value:!0}),mi.SessionReplayClient=void 0;var e=requireRecord(),l=requireSrc$3(),_=function(){return _createClass3(function SessionReplayClient(){_classCallCheck3(this,SessionReplayClient),this._startTimestamp=null,this._endTimestamp=null},[{key:"record",value:function(_,S,k){var E=this,T=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(null!=(0,l._getDocumentSafe)()&&(this._startTimestamp=null,this._endTimestamp=null,this._stopCallback=k,!this._stopFn)){this._stopFn=function(l,_,S){return S?(0,e.record)(Object.assign(Object.assign({},_),{emit:l,checkoutEveryNms:3e4})):(0,e.record)(Object.assign(Object.assign({},_),{emit:l}))}(function(e,l){var S,k,M;T?E._startTimestamp=l?e.timestamp:null!==(S=E._startTimestamp)&&void 0!==S?S:e.timestamp:null!==(k=E._startTimestamp)&&void 0!==k||(E._startTimestamp=e.timestamp),E._endTimestamp=e.timestamp;var R=0;(function(e){return 3===e.type&&2===e.data.source&&(2===e.data.type||4===e.data.type)})(e)&&R++,_(Object.assign(Object.assign({},e),{eventIndex:0}),{startTime:E._startTimestamp,endTime:E._endTimestamp,clickCount:R},null!=l&&l),E._endTimestamp-E._startTimestamp>144e5&&(null===(M=E._stopFn)||void 0===M||M.call(E),E._stopCallback&&E._stopCallback())},S,T)}}},{key:"stop",value:function(){this._stopFn&&(this._stopFn(),this._stopFn=void 0)}},{key:"isRecording",value:function(){return null!=this._stopFn}}])}();return mi.SessionReplayClient=_,mi}var _i,bi,Si,wi={};function requireSessionReplayUtils(){if(_i)return wi;_i=1,Object.defineProperty(wi,"__esModule",{value:!0}),wi._appendSlicedMetadata=wi._slicePayload=wi._makeLoggableRrwebEvent=wi.MAX_LOGS=wi.MAX_INDIVIDUAL_EVENT_BYTES=wi.REPLAY_ENQUEUE_TRIGGER_BYTES=void 0;var e=requireSrc$3(),l=1048576;return wi.REPLAY_ENQUEUE_TRIGGER_BYTES=10240,wi.MAX_INDIVIDUAL_EVENT_BYTES=10485760,wi.MAX_LOGS=1e4,wi._makeLoggableRrwebEvent=function(l,_,S,k,E){return{eventName:"statsig::session_recording",value:S,metadata:{session_start_ts:String(k.startTime),session_end_ts:String(k.endTime),clicks_captured_cumulative:String(k.clickCount),rrweb_events:l,rrweb_payload_size:String(_.length),session_replay_sdk_version:e.SDK_VERSION,sdk_instance_id:E}}},wi._slicePayload=function(e){for(var _=[],S=0;S<e.length;S+=l)_.push(e.slice(S,S+l));return _},wi._appendSlicedMetadata=function(e,l,_,S,k){e.sliced_id=l,e.slice_index=String(_),e.slice_count=String(S),e.slice_byte_size=String(k)},wi}function requireSessionReplayBase(){if(bi)return gi;bi=1,Object.defineProperty(gi,"__esModule",{value:!0}),gi.SessionReplayBase=gi.forceStartRecording=gi.startRecording=gi.stopRecording=void 0;var e=requireSrc$3(),l=requireSessionReplayClient(),_=requireSessionReplayUtils();function _getInstanceFromSdkKey(l){var _,k,E=null==l?(0,e._getStatsigGlobal)().firstSRInstance:null===(k=null===(_=(0,e._getStatsigGlobal)())||void 0===_?void 0:_.srInstances)||void 0===k?void 0:k[l];return E instanceof S?E:null}gi.stopRecording=function(e){var l;null===(l=_getInstanceFromSdkKey(e))||void 0===l||l.stopRecording()},gi.startRecording=function(e){var l;null===(l=_getInstanceFromSdkKey(e))||void 0===l||l.startRecording()},gi.forceStartRecording=function(e){var l;null===(l=_getInstanceFromSdkKey(e))||void 0===l||l.forceStartRecording()};var S=function(){function SessionReplayBase(_,S){var k=this;_classCallCheck3(this,SessionReplayBase),this._sessionData={startTime:-1,endTime:0,clickCount:0},this._events=[],this._wasStopped=!1,this._currentEventIndex=0,this._totalLogs=0,this._client=_,this._options=S;var E=this._client.getContext(),T=E.sdkKey,M=E.errorBoundary;if(this._errorBoundary=M,this._errorBoundary.wrap(this),this._replayer=new l.SessionReplayClient,this._client.$on("pre_shutdown",function(){return k._shutdown()}),this._client.on("session_expired",function(){k._shutdown("session_expired")}),!(0,e._isServerEnv)()){var R=(0,e._getStatsigGlobal)();R.srInstances=Object.assign(Object.assign({},R.srInstances),_defineProperty3({},T,this)),R.firstSRInstance||(R.firstSRInstance=this)}this._currentSessionID=this._getSessionIdFromClient(),this._subscribeToVisibilityChanged()}return _createClass3(SessionReplayBase,[{key:"forceStartRecording",value:function(){this._wasStopped=!1,this._attemptToStartRecording(!0)}},{key:"stopRecording",value:function(){this._wasStopped=!0,this._shutdown()}},{key:"startRecording",value:function(){var e;this._wasStopped=!1,this._attemptToStartRecording(null===(e=this._options)||void 0===e?void 0:e.forceRecording)}},{key:"isRecording",value:function(){return this._replayer.isRecording()}},{key:"_logRecording",value:function(l){0!==this._events.length&&(l=(0,e._isUnloading)()?"is_leaving_page":l,this._logRecordingWithSessionID(this._currentSessionID,l))}},{key:"_onVisibilityChanged",value:function(e){var l=this;"background"===e&&(this._logRecording(),this._client.flush().catch(function(e){l._errorBoundary.logError("SR::visibility",e)}))}},{key:"_subscribeToVisibilityChanged",value:function(){var l=this._client.getContext().sdkKey;(0,e._subscribeToVisiblityChanged)(function(_){var S,k,E=null===(k=null===(S=(0,e._getStatsigGlobal)())||void 0===S?void 0:S.srInstances)||void 0===k?void 0:k[l];E instanceof SessionReplayBase&&E._onVisibilityChanged(_)})}},{key:"_logRecordingWithSessionID",value:function(l,S){var k=this._sessionData;if(0!==this._events.length){for(var E=JSON.stringify(this._events),T=(0,_._slicePayload)(E),M=T.length>1?(0,e.getUUID)():null,R=0;R<T.length;R++){var I=T[R],D=(0,_._makeLoggableRrwebEvent)(I,E,l,k,this._client.getContext().sdkInstanceID);null!=M&&(0,_._appendSlicedMetadata)(D.metadata,M,R,T.length,I.length),S&&(D.metadata[S]="true"),this._totalLogs++,this._client.logEvent(D),null!=M&&this._client.flush().catch(function(l){e.Log.error(l)})}this._events=[],this._totalLogs>_.MAX_LOGS&&this._shutdown()}}},{key:"_bumpSessionIdleTimerAndLogRecording",value:function(){this._getSessionIdFromClient(),this._logRecording()}},{key:"_getSessionIdFromClient",value:function(){return this._client.getContext().session.data.sessionID}},{key:"_shutdownImpl",value:function(l){var _=this;if(this._replayer.isRecording()){this._replayer.stop();var _handler=function(){e.StatsigMetadataProvider.add({isRecordingSession:"false"}),_._client.off("logs_flushed",_handler)};this._client.$on("logs_flushed",_handler)}0!==this._events.length?(this._logRecording(l),"session_expired"===l&&(this._currentEventIndex=0,this._sessionData=this._makeEmptySessionData())):"session_expired"===l&&(this._currentEventIndex=0,this._sessionData=this._makeEmptySessionData())}},{key:"_makeEmptySessionData",value:function(){return{startTime:-1,endTime:0,clickCount:0}}},{key:"_onRecordingEvent",value:function(l,S){if(this._currentSessionID===this._getSessionIdFromClient())if(this._totalLogs>=_.MAX_LOGS)this._shutdown();else{l.eventIndex=this._currentEventIndex++,this._sessionData.clickCount+=S.clickCount,this._sessionData.startTime=-1===this._sessionData.startTime?S.startTime:Math.min(this._sessionData.startTime,S.startTime),this._sessionData.endTime=Math.max(this._sessionData.endTime,S.endTime);var k=(0,e._fastApproxSizeOf)(l,_.MAX_INDIVIDUAL_EVENT_BYTES);if(k>_.MAX_INDIVIDUAL_EVENT_BYTES)e.Log.warn("SessionReplay event is too large (~".concat(k," bytes) and will not be logged"),l);else{var E=(0,e._fastApproxSizeOf)(this._events,_.REPLAY_ENQUEUE_TRIGGER_BYTES);this._events.push(l),E+k<_.REPLAY_ENQUEUE_TRIGGER_BYTES||((0,e._isCurrentlyVisible)()?this._bumpSessionIdleTimerAndLogRecording():this._logRecording())}}else this._shutdown("session_expired")}}])}();return gi.SessionReplayBase=S,gi}var xi,ki,Ai={};I("ai",(ki||(ki=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.forceStartRecording=e.stopRecording=e.startRecording=e.StatsigTriggeredSessionReplayPlugin=e.StatsigSessionReplayPlugin=e.runStatsigTriggeredSessionReplay=e.runStatsigSessionReplay=e.SessionReplay=e.SessionReplayClient=void 0;var l=requireSrc$3(),_=function(){if(Si)return vi;Si=1,Object.defineProperty(vi,"__esModule",{value:!0}),vi.SessionReplay=vi.runStatsigSessionReplay=vi.StatsigSessionReplayPlugin=void 0;var e=requireSrc$3(),l=requireSessionReplayBase(),_=requireSessionReplayUtils(),S=function(){return _createClass3(function StatsigSessionReplayPlugin(e){_classCallCheck3(this,StatsigSessionReplayPlugin),this.options=e,this.__plugin="session-replay"},[{key:"bind",value:function(e){runStatsigSessionReplay(e,this.options)}}])}();function runStatsigSessionReplay(e,l){new k(e,l)}vi.StatsigSessionReplayPlugin=S,vi.runStatsigSessionReplay=runStatsigSessionReplay;var k=function(l){function SessionReplay(e,l){var _,S;return _classCallCheck3(this,SessionReplay),(_=_callSuper(this,SessionReplay,[e,l]))._client.$on("values_updated",function(){var e;_._wasStopped||_._attemptToStartRecording(null===(e=_._options)||void 0===e?void 0:e.forceRecording)}),_._attemptToStartRecording(null===(S=_._options)||void 0===S?void 0:S.forceRecording),_}return _inherits(SessionReplay,l),_createClass3(SessionReplay,[{key:"_shutdown",value:function(e){_superPropGet(SessionReplay,"_shutdownImpl",this,3)([e])}},{key:"_attemptToStartRecording",value:function(){var l,S,k=this,E=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!(this._totalLogs>=_.MAX_LOGS)){var T=this._client.getContext().values;!0===(null==T?void 0:T.recording_blocked)||!E&&!0!==(null==T?void 0:T.can_record_session)||!1===(null==T?void 0:T.passes_session_recording_targeting)?this._shutdown():this._replayer.isRecording()||(this._wasStopped=!1,e.StatsigMetadataProvider.add({isRecordingSession:"true"}),this._replayer.record(function(e,l){return k._onRecordingEvent(e,l)},null!==(S=null===(l=this._options)||void 0===l?void 0:l.rrwebConfig)&&void 0!==S?S:{},function(){k._shutdown()}))}}}])}(l.SessionReplayBase);return vi.SessionReplay=k,vi}();Object.defineProperty(e,"SessionReplay",{enumerable:!0,get:function(){return _.SessionReplay}}),Object.defineProperty(e,"StatsigSessionReplayPlugin",{enumerable:!0,get:function(){return _.StatsigSessionReplayPlugin}}),Object.defineProperty(e,"runStatsigSessionReplay",{enumerable:!0,get:function(){return _.runStatsigSessionReplay}});var S=requireSessionReplayBase();Object.defineProperty(e,"forceStartRecording",{enumerable:!0,get:function(){return S.forceStartRecording}}),Object.defineProperty(e,"startRecording",{enumerable:!0,get:function(){return S.startRecording}}),Object.defineProperty(e,"stopRecording",{enumerable:!0,get:function(){return S.stopRecording}});var k=requireSessionReplayClient();Object.defineProperty(e,"SessionReplayClient",{enumerable:!0,get:function(){return k.SessionReplayClient}});var E=function(){if(xi)return Ai;xi=1,Object.defineProperty(Ai,"__esModule",{value:!0}),Ai.TriggeredSessionReplay=Ai.runStatsigTriggeredSessionReplay=Ai.StatsigTriggeredSessionReplayPlugin=void 0;var e=requireSrc$3(),l=requireSessionReplayBase(),_=requireSessionReplayUtils(),S=function(){return _createClass3(function StatsigTriggeredSessionReplayPlugin(e){_classCallCheck3(this,StatsigTriggeredSessionReplayPlugin),this.options=e,this.__plugin="triggered-session-replay"},[{key:"bind",value:function(e){runStatsigTriggeredSessionReplay(e,this.options)}}])}();function runStatsigTriggeredSessionReplay(e,l){new k(e,l)}Ai.StatsigTriggeredSessionReplayPlugin=S,Ai.runStatsigTriggeredSessionReplay=runStatsigTriggeredSessionReplay;var k=function(l){function TriggeredSessionReplay(e,l){var _,S;return _classCallCheck3(this,TriggeredSessionReplay),(_=_callSuper(this,TriggeredSessionReplay,[e,l]))._runningEventData=[],_._isActiveRecording=!1,_._subscribeToClientEvents(l),(null==l?void 0:l.autoStartRecording)?_._attemptToStartRecording(null===(S=_._options)||void 0===S?void 0:S.forceRecording):(null==l?void 0:l.keepRollingWindow)&&_._attemptToStartRollingWindow(),_}return _inherits(TriggeredSessionReplay,l),_createClass3(TriggeredSessionReplay,[{key:"_subscribeToClientEvents",value:function(e){this._subscribeToValuesUpdated(e),this._subscribeToLogEventCalled(),this._subscribeToGateEvaluation(),this._subscribeToExperimentEvaluation()}},{key:"_subscribeToValuesUpdated",value:function(e){var l=this;this._client.$on("values_updated",function(){var _;l._wasStopped||((null==e?void 0:e.autoStartRecording)?l._attemptToStartRecording(null===(_=l._options)||void 0===_?void 0:_.forceRecording):(null==e?void 0:e.keepRollingWindow)&&l._attemptToStartRollingWindow())})}},{key:"_subscribeToLogEventCalled",value:function(){var e=this;this._client.$on("log_event_called",function(l){var _;if(!e._wasStopped){var S=e._client.getContext().values;if(!1!==(null==S?void 0:S.passes_session_recording_targeting)&&null!=(null==S?void 0:S.session_recording_event_triggers)){var k=S.session_recording_event_triggers[l.event.eventName];if(null!=k&&!1!==k.passes_sampling){var E=k.values;null!=E?E.includes(String(null!==(_=l.event.value)&&void 0!==_?_:""))&&e._attemptToStartRecording(!0):e._attemptToStartRecording(!0)}}}})}},{key:"_subscribeToGateEvaluation",value:function(){var e=this;this._client.$on("gate_evaluation",function(l){e._tryStartExposureRecording(l.gate.name,String(l.gate.value))})}},{key:"_subscribeToExperimentEvaluation",value:function(){var e=this;this._client.$on("experiment_evaluation",function(l){var _;e._tryStartExposureRecording(l.experiment.name,null!==(_=l.experiment.groupName)&&void 0!==_?_:"")})}},{key:"_tryStartExposureRecording",value:function(l,_){var S;if(!this._wasStopped){var k=this._client.getContext().values;if(!1!==(null==k?void 0:k.passes_session_recording_targeting)&&null!=(null==k?void 0:k.session_recording_exposure_triggers)){var E=null!==(S=k.session_recording_exposure_triggers[l])&&void 0!==S?S:k.session_recording_exposure_triggers[(0,e._DJB2)(l)];if(null!=E&&!1!==E.passes_sampling){var T=E.values;null!=T?T.includes(_)&&this._attemptToStartRecording(!0):this._attemptToStartRecording(!0)}}}}},{key:"forceStartRecording",value:function(){_superPropGet(TriggeredSessionReplay,"forceStartRecording",this,3)([])}},{key:"stopRecording",value:function(){this._isActiveRecording=!1,this._runningEventData=[],_superPropGet(TriggeredSessionReplay,"stopRecording",this,3)([])}},{key:"_handleStartActiveRecording",value:function(){if(this._isActiveRecording=!0,0!==this._runningEventData.length){for(var l=this._runningEventData.map(function(e){return e.events}).flat(),_=0;_<l.length;_++)l[_].event.eventIndex=_,this._sessionData.clickCount+=l[_].data.clickCount,this._sessionData.startTime=-1===this._sessionData.startTime?l[_].data.startTime:Math.min(this._sessionData.startTime,l[_].data.startTime),this._sessionData.endTime=Math.max(this._sessionData.endTime,l[_].data.endTime);this._events=l.map(function(e){return e.event}),this._currentEventIndex=l.length,(0,e._isCurrentlyVisible)()?this._bumpSessionIdleTimerAndLogRecording():this._logRecording(),this._replayer.stop()}}},{key:"_shutdown",value:function(e){this._isActiveRecording=!1,this._runningEventData=[],_superPropGet(TriggeredSessionReplay,"_shutdownImpl",this,3)([e])}},{key:"_onRecordingEvent",value:function(e,l,_){if(!this._isActiveRecording)return this._currentSessionID!==this._getSessionIdFromClient()?void this._shutdown("session_expired"):void(_&&4===e.type||0===this._runningEventData.length?(this._runningEventData.length>1&&this._runningEventData.shift(),this._runningEventData.push({events:[{event:e,data:l}]})):this._runningEventData[this._runningEventData.length-1].events.push({event:e,data:l}));_superPropGet(TriggeredSessionReplay,"_onRecordingEvent",this,3)([e,l])}},{key:"_attemptToStartRollingWindow",value:function(){var e,l,_=this,S=this._client.getContext().values;!1!==(null==S?void 0:S.passes_session_recording_targeting)?this._replayer.isRecording()||this._replayer.record(function(e,l,S){return _._onRecordingEvent(e,l,S)},null!==(l=null===(e=this._options)||void 0===e?void 0:e.rrwebConfig)&&void 0!==l?l:{},function(){_._shutdown()},!0):this._shutdown()}},{key:"_attemptToStartRecording",value:function(){var l,S,k=this,E=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!(this._totalLogs>=_.MAX_LOGS)){var T=this._client.getContext().values;!0===(null==T?void 0:T.recording_blocked)||!E&&!0!==(null==T?void 0:T.can_record_session)||!1===(null==T?void 0:T.passes_session_recording_targeting)?this._shutdown():(this._handleStartActiveRecording(),this._wasStopped=!1,e.StatsigMetadataProvider.add({isRecordingSession:"true"}),this._replayer.isRecording()||this._replayer.record(function(e,l,_){return k._onRecordingEvent(e,l,_)},null!==(S=null===(l=this._options)||void 0===l?void 0:l.rrwebConfig)&&void 0!==S?S:{},function(){k._shutdown()}))}}}])}(l.SessionReplayBase);return Ai.TriggeredSessionReplay=k,Ai}();Object.defineProperty(e,"StatsigTriggeredSessionReplayPlugin",{enumerable:!0,get:function(){return E.StatsigTriggeredSessionReplayPlugin}}),Object.defineProperty(e,"runStatsigTriggeredSessionReplay",{enumerable:!0,get:function(){return E.runStatsigTriggeredSessionReplay}}),Object.assign((0,l._getStatsigGlobal)(),{SessionReplayClient:k.SessionReplayClient,SessionReplay:_.SessionReplay,runStatsigSessionReplay:_.runStatsigSessionReplay,runStatsigTriggeredSessionReplay:E.runStatsigTriggeredSessionReplay,StatsigSessionReplayPlugin:_.StatsigSessionReplayPlugin,StatsigTriggeredSessionReplayPlugin:E.StatsigTriggeredSessionReplayPlugin,startRecording:S.startRecording,stopRecording:S.stopRecording,forceStartRecording:S.forceStartRecording})}(pi)),pi));var Ei,Ci={},Ti={},Mi={};function requireAutoCaptureEvent(){return Ei||(Ei=1,Object.defineProperty(Mi,"__esModule",{value:!0}),Mi.AutoCaptureEventName=void 0,Mi.AutoCaptureEventName={PAGE_VIEW:"auto_capture::page_view",PAGE_VIEW_END:"auto_capture::page_view_end",ERROR:"auto_capture::error",SESSION_START:"auto_capture::session_start",PERFORMANCE:"auto_capture::performance",FORM_SUBMIT:"auto_capture::form_submit",CLICK:"auto_capture::click",RAGE_CLICK:"auto_capture::rage_click",WEB_VITALS:"auto_capture::web_vitals",DEAD_CLICK:"auto_capture::dead_click",COPY:"auto_capture::copy",CONSOLE_LOG:"statsig::log_line"}),Mi}var Ri,Ii={},Pi={};function requireCommonUtils(){return Ri||(Ri=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.wrapFunctionWithRestore=e.throttle=e._sanitizeString=e._getAnchorNodeInHierarchy=e._getSafeTimezoneOffset=e._getSafeTimezone=e._getSafeNetworkInformation=e._registerEventHandler=e._getSanitizedPageUrl=e._getSafeUrlString=e._getSafeUrl=e._shouldLogEvent=e._getTargetNode=e._stripEmptyValues=e.interactiveElements=void 0;var l=requireSrc$3(),_=new RegExp("^(?:".concat("(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11})",")$")),S=new RegExp("^(".concat("\\d{3}-?\\d{2}-?\\d{4}",")$"));function _getSafeUrl(){var e,_,S,k,E=null!==(S=null===(_=null===(e=(0,l._getWindowSafe)())||void 0===e?void 0:e.location)||void 0===_?void 0:_.href)&&void 0!==S?S:"";try{k=new URL(E)}catch(ta){k=new URL("error:")}return k}function _getAnchorNodeInHierarchy(e){if(!e)return null;for(var l=e;l;){var _=l.tagName.toLowerCase();if(["body","document"].includes(_))return null;if("a"===l.tagName.toLowerCase())return l;l=l.parentElement}return null}e.interactiveElements=["button","a","input","select","textarea","form","select","label"],e._stripEmptyValues=function(e){return Object.fromEntries(Object.entries(e).filter(function(e){var l=_slicedToArray(e,2),_=(l[0],l[1]);return null!=_&&""!==_&&void 0!==_}))},e._getTargetNode=function(e){if(!e)return null;var l=e.target||e.srcElement;return l&&l instanceof Element?(3===l.nodeType&&(l=l.parentNode||null),l):null},e._shouldLogEvent=function(l,_){var S=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!l||!_||1!==_.nodeType)return!1;var k=_.tagName.toLowerCase(),E=l.type.toLowerCase();if(_.classList.contains("statsig-no-capture"))return!1;if(S)return!0;switch(k){case"html":return!1;case"form":return["submit"].indexOf(E)>=0;case"input":case"select":case"textarea":return["change","click"].indexOf(E)>=0;default:if("click"===E){var T=window.getComputedStyle(_);if(T&&"pointer"===T.getPropertyValue("cursor"))return!0;if(e.interactiveElements.includes(k))return!0;if("true"===_.getAttribute("contenteditable"))return!0;if(_getAnchorNodeInHierarchy(_))return!0}return!1}},e._getSafeUrl=_getSafeUrl,e._getSafeUrlString=function(){var e=_getSafeUrl().toString();return e.startsWith("error:")?"":e},e._getSanitizedPageUrl=function(){return(0,l._getCurrentPageUrlSafe)()||""},e._registerEventHandler=function(e,l,_){e&&e.addEventListener&&e.addEventListener(l,_,!0)},e._getSafeNetworkInformation=function(){var e=(0,l._getWindowSafe)();if(!e||!e.navigator)return null;var _=e.navigator.connection;return _||null},e._getSafeTimezone=function(){try{return Intl.DateTimeFormat().resolvedOptions().timeZone}catch(ta){return null}},e._getSafeTimezoneOffset=function(){try{return(new Date).getTimezoneOffset()}catch(ta){return null}},e._getAnchorNodeInHierarchy=_getAnchorNodeInHierarchy,e._sanitizeString=function(e){return e?e.replace(/<[^>]*>/g,"").trim().split(/(\s+)/).filter(function(e){return function(e){if(_.test((e||"").replace(/[- ]/g,"")))return!1;if(S.test((e||"").replace(/[- ]/g,"")))return!1;return!0}(e)}).join("").replace(/[\r\n]/g," ").replace(/[ ]+/g," ").substring(0,255):null},e.throttle=function(e,l){var _=0;return function(){var S=Date.now();S-_>=l&&(_=S,e.apply(void 0,arguments))}},e.wrapFunctionWithRestore=function(e,l,_){var S=e[l];if("function"!=typeof S)return function(){};try{var k=_(S);return Object.defineProperty(k,"__statsig_original__",{enumerable:!1,value:S}),e[l]=k,function(){e[l]=S}}catch(E){return function(){}}}}(Pi)),Pi}var Di,Oi={};function requireConsoleLogsUtils(){if(Di)return Oi;function _truncateString(e,l){return e.length<=l?e:e.slice(0,l)+"..."}function _isObjectTooDeep(e,l){return l<=0||"object"===_typeof3(e)&&null!==e&&Object.keys(e).some(function(_){return _isObjectTooDeep(e[_],l-1)})}return Di=1,Object.defineProperty(Oi,"__esModule",{value:!0}),Oi._getStackTrace=Oi._safeStringify=void 0,Oi._safeStringify=function(e,l,_,S){try{return function(e,l,_){if(S=e,"[object Object]"===Object.prototype.toString.call(S)){if(Object.keys(e).length>l)return!0;if(_isObjectTooDeep(e,_))return!0}var S;if("function"==typeof e)return!0;return!1}(e,l,_)?function(e,l){return _truncateString(e.toString(),l)}(e,S):"string"==typeof e?_truncateString(e,S):"object"===_typeof3(e)&&null!==e?_truncateString(JSON.stringify(e),S):_truncateString(String(e),S)}catch(k){return _truncateString("[Unserializable]",S)}},Oi._getStackTrace=function(){var e,l;try{return null!==(l=null===(e=(new Error).stack)||void 0===e?void 0:e.split("\n").slice(2))&&void 0!==l?l:[]}catch(_){return[]}},Oi}var Li,Ui,Fi={};function requireMetadataUtils(){if(Li)return Fi;Li=1,Object.defineProperty(Fi,"__esModule",{value:!0}),Fi._getPossibleFirstTouchMetadata=Fi._getNetworkInfo=Fi._gatherAllMetadata=Fi._gatherCommonMetadata=void 0;var e=requireSrc$3(),l=requireCommonUtils();function _gatherCommonMetadata(_){var S,k,E,T,M,R,I,D,O=(0,e._getDocumentSafe)(),L=(0,e._getWindowSafe)();return(0,l._stripEmptyValues)(Object.assign({title:null==O?void 0:O.title,current_url:null===(S=null==L?void 0:L.location)||void 0===S?void 0:S.href,user_agent:(null===(k=null==L?void 0:L.navigator)||void 0===k?void 0:k.userAgent)&&(null===(T=null===(E=null==L?void 0:L.navigator)||void 0===E?void 0:E.userAgent)||void 0===T?void 0:T.length)>200?L.navigator.userAgent.substring(0,200):null===(M=null==L?void 0:L.navigator)||void 0===M?void 0:M.userAgent,locale:null===(R=null==L?void 0:L.navigator)||void 0===R?void 0:R.language,hostname:_.hostname,pathname:_.pathname,screen_width:null===(I=null==L?void 0:L.screen)||void 0===I?void 0:I.width,screen_height:null===(D=null==L?void 0:L.screen)||void 0===D?void 0:D.height,viewport_width:null==L?void 0:L.innerWidth,viewport_height:null==L?void 0:L.innerHeight,viewport:"".concat(null==L?void 0:L.innerWidth,"x").concat(null==L?void 0:L.innerHeight),timestamp:Date.now(),timezone:(0,l._getSafeTimezone)(),timezone_offset:(0,l._getSafeTimezoneOffset)()},_getNetworkInfo()))}function _getNetworkInfo(){var e=(0,l._getSafeNetworkInformation)(),_={};return void 0!==(null==e?void 0:e.effectiveType)&&(_.effective_connection_type=e.effectiveType),void 0!==(null==e?void 0:e.rtt)&&(_.rtt_ms=e.rtt),void 0!==(null==e?void 0:e.downlink)&&(_.downlink_mbps=e.downlink,_.downlink_kbps=1e3*e.downlink),void 0!==(null==e?void 0:e.saveData)&&(_.save_data=e.saveData),_}function getReferrerInfo(e){var l=(null==e?void 0:e.referrer)||"";if(!l)return{referrer:null,referrer_domain:null,referrer_path:null,searchEngine:"",searchQuery:""};try{var _=new URL(l),S=_.hostname,k=["google","bing","yahoo","duckduckgo","baidu"].find(function(e){return S.includes(e+".")})||"",E=_.searchParams.get("yahoo"===k?"p":"q")||"";return{referrer:l,referrer_domain:_.hostname,referrer_path:_.pathname,searchEngine:k,searchQuery:E}}catch(ta){return{referrer:null,referrer_domain:null,referrer_path:null,searchEngine:"",searchQuery:""}}}function getCampaignParams(e){var l=e.searchParams,_={};return["utm_source","utm_medium","utm_campaign","utm_term","utm_content","msclkid","dclid","fbclid","gad_source","gclid","gclsrc","wbraid","utm_id","irclid","igshid","_kx","li_fat_id","mc_cid","mc_eid","epik","qclid","rdt_cid","sccid","ttc","ttclid","ttc_id","twclid"].forEach(function(e){var S=l.get(e);S&&(_[e]=S)}),_}return Fi._gatherCommonMetadata=_gatherCommonMetadata,Fi._gatherAllMetadata=function(_){var S=(0,e._getDocumentSafe)(),k=(0,e._getWindowSafe)();if(!S||!k)return{};var E=getReferrerInfo(S),T=_gatherCommonMetadata(_),M=getCampaignParams(_),R={};return _.searchParams.forEach(function(e,l){R[l]=e}),Object.assign(Object.assign({},T),(0,l._stripEmptyValues)(Object.assign(Object.assign(Object.assign({},E),M),R)))},Fi._getNetworkInfo=_getNetworkInfo,Fi._getPossibleFirstTouchMetadata=function(_){var S=(0,e._getDocumentSafe)(),k=(0,e._getWindowSafe)();if(!S||!k)return{};for(var E=getReferrerInfo(S),T=getCampaignParams(_),M=(0,l._stripEmptyValues)(Object.assign(Object.assign({},E),T)),R={},I=0,D=Object.entries(M);I<D.length;I++){var O=_slicedToArray(D[I],2),L=O[0],U=O[1];R["$s_".concat(L)]=U}return R},Fi}var Ni,Bi,zi={},Gi={};function requireEventUtils(){if(Ni)return Gi;Ni=1,Object.defineProperty(Gi,"__esModule",{value:!0}),Gi._getMetadataFromElement=Gi._gatherCopyEventData=Gi._gatherEventData=void 0;var e=requireSrc$3(),l=requireCommonUtils(),_=1e3;function _truncateString(e,l){return e?e.length>l?e.substring(0,l)+"...":e:null}function _getSafeMetadataAttributes(e){var l={};return l.class=(_truncateString(e.getAttribute("class"),_)||"").replace(/\s+/g," ").trim(),l.id=_truncateString(e.getAttribute("id"),_),l.ariaLabel=_truncateString(e.getAttribute("aria-label"),_),l.name=_truncateString(e.getAttribute("name"),_),l}function _getMetadataFromElement(e){var l={},_=_getSafeMetadataAttributes(e);Object.assign(l,_);var S=Array.from(e.classList);return l.classList=S.length>0?S.slice(0,100):null,l.selector=function(e){if(!e)return"";if(!e.parentNode){var l=e.tagName.toLowerCase();if(e.id)return"#".concat(e.id);var _=l;if(e.className&&"string"==typeof e.className){var S=e.className.trim().split(/\s+/);S.length>0&&""!==S[0]&&(_+="."+S.join("."))}return _}var k=[],E=e,T=0;for(;E&&E.nodeType===Node.ELEMENT_NODE&&T<50;){var M=getElementSelector(E);if(k.unshift(M),E.id)break;if((E=E.parentElement)&&"body"===E.tagName.toLowerCase())break;T++}return k.join(" > ")}(e),l}function getElementSelector(e){var l=e.tagName.toLowerCase();if(e.id)return"#".concat(e.id);var _=l;if(e.className&&"string"==typeof e.className){var S=e.className.trim().split(/\s+/);S.length>0&&""!==S[0]&&(_+="."+S.join("."))}var k=e.parentElement;if(k&&k.children.length>1){for(var E=1,T=1,M=e.previousElementSibling;M;)E++,M.tagName===e.tagName&&T++,M=M.previousElementSibling;_+=":nth-child(".concat(E,")"),(T>1||function(e){for(var l=e.nextElementSibling;l;){if(l.tagName===e.tagName)return!0;l=l.nextElementSibling}return!1}(e))&&(_+=":nth-of-type(".concat(T,")"))}return _}return Gi._gatherEventData=function(e){var _=(0,l._getSanitizedPageUrl)()||"",S=e.tagName.toLowerCase();if(function(e){return"input"===e.tagName.toLowerCase()&&["button","checkbox","submit","reset"].includes(e.getAttribute("type")||"")||"textarea"===e.tagName.toLowerCase()||"select"===e.tagName.toLowerCase()||"true"===e.getAttribute("contenteditable")}(e))return{value:_,metadata:_getSafeMetadataAttributes(e)};var k={};k.tagName=S;var E=_getMetadataFromElement(e);Object.assign(k,E),"form"===S&&Object.assign(k,function(e){var l,_={};return _.action=e.getAttribute("action"),_.method=null!==(l=e.getAttribute("method"))&&void 0!==l?l:"GET",_.formName=e.getAttribute("name"),_.formId=e.getAttribute("id"),_}(e)),"input"===S&&Object.assign(k,function(e){var l={};return l.content=e.value,l.inputName=e.getAttribute("name"),l}(e));var T=(0,l._getAnchorNodeInHierarchy)(e);return T&&Object.assign(k,function(e){var l={};return l.href=e.getAttribute("href"),l}(T)),("button"===S||T)&&Object.assign(k,function(e){var l={};l.content=(e.textContent||"").trim();var _=function(e){var l={};if(!e)return l;var _=null==e?void 0:e.dataset;if(!_)return l;for(var S in _)l["data-".concat(S)]=_[S]||"";return l}(e);return Object.assign(l,_),l}(T||e)),function(e){var _;if(Array.isArray(e.classList)&&(null===(_=e.classList)||void 0===_?void 0:_.includes("statsig-ctr-capture")))return!0;var S=e.href;if(S)try{var k=(0,l._getSafeUrl)(),E=new URL(S);return k.host!==E.host}catch(T){return!1}return!1}(k)&&(k.isOutbound="true"),{value:_,metadata:k}},Gi._gatherCopyEventData=function(_){var S,k,E=null===(k=null===(S=(0,e._getWindowSafe)())||void 0===S?void 0:S.getSelection())||void 0===k?void 0:k.toString(),T={};T.selectedText=(0,l._sanitizeString)(E);var M=_.type||"clipboard";return T.clipType=M,T},Gi._getMetadataFromElement=_getMetadataFromElement,Gi}var ji,Hi={};var Vi,Wi={};var qi,Xi,Ki,Yi,Qi={},Ji={exports:{}};function requireWebVitals_umd(){return qi||(qi=1,function(e,l){!function(e){var l=-1,n=function(e){addEventListener("pageshow",function(_){_.persisted&&(l=_.timeStamp,e(_))},!0)},i=function(e,l,_,S){var k,E;return function(T){l.value>=0&&(T||S)&&((E=l.value-(null!=k?k:0))||void 0===k)&&(k=l.value,l.delta=E,l.rating=function(e,l){return e>l[1]?"poor":e>l[0]?"needs-improvement":"good"}(l.value,_),e(l))}},o=function(e){requestAnimationFrame(function(){return requestAnimationFrame(function(){return e()})})},s=function(){var e=performance.getEntriesByType("navigation")[0];if(e&&e.responseStart>0&&e.responseStart<performance.now())return e},r=function(){var e,l=s();return null!==(e=null==l?void 0:l.activationStart)&&void 0!==e?e:0},c=function(e){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,S=s(),k="navigate";return l>=0?k="back-forward-cache":S&&(document.prerendering||r()>0?k="prerender":document.wasDiscarded?k="restore":S.type&&(k=S.type.replace(/_/g,"-"))),{name:e,value:_,rating:"good",delta:0,entries:[],id:"v5-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:k}},_=new WeakMap;function d(e,l){return _.get(e)||_.set(e,new l),_.get(e)}var S,k=function(){function h(){_classCallCheck3(this,h),_defineProperty3(this,"t",void 0),_defineProperty3(this,"i",0),_defineProperty3(this,"o",[])}return _createClass3(h,[{key:"h",value:function(e){var l;if(!e.hadRecentInput){var _=this.o[0],S=this.o.at(-1);this.i&&_&&S&&e.startTime-S.startTime<1e3&&e.startTime-_.startTime<5e3?(this.i+=e.value,this.o.push(e)):(this.i=e.value,this.o=[e]),null===(l=this.t)||void 0===l||l.call(this,e)}}}])}(),f=function(e,l){var _=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var S=new PerformanceObserver(function(e){Promise.resolve().then(function(){l(e.getEntries())})});return S.observe(_objectSpread2({type:e,buffered:!0},_)),S}}catch(k){}},u=function(e){var l=!1;return function(){l||(e(),l=!0)}},E=-1,m=function(){return"hidden"!==document.visibilityState||document.prerendering?1/0:0},p=function(e){"hidden"===document.visibilityState&&E>-1&&(E="visibilitychange"===e.type?e.timeStamp:0,v())},g=function(){addEventListener("visibilitychange",p,!0),addEventListener("prerenderingchange",p,!0)},v=function(){removeEventListener("visibilitychange",p,!0),removeEventListener("prerenderingchange",p,!0)},y=function(){if(E<0){var e,l=r(),_=document.prerendering||null===(e=globalThis.performance.getEntriesByType("visibility-state").filter(function(e){return"hidden"===e.name&&e.startTime>l})[0])||void 0===e?void 0:e.startTime;E=null!=_?_:m(),g(),n(function(){setTimeout(function(){E=m(),g()})})}return{get firstHiddenTime(){return E}}},b=function(e){document.prerendering?addEventListener("prerenderingchange",function(){return e()},!0):e()},T=[1800,3e3],P=function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};b(function(){var _,S=y(),k=c("FCP"),E=f("paint",function(e){var l,T=_createForOfIteratorHelper2(e);try{for(T.s();!(l=T.n()).done;){var M=l.value;"first-contentful-paint"===M.name&&(E.disconnect(),M.startTime<S.firstHiddenTime&&(k.value=Math.max(M.startTime-r(),0),k.entries.push(M),_(!0)))}}catch(R){T.e(R)}finally{T.f()}});E&&(_=i(e,k,T,l.reportAllChanges),n(function(S){k=c("FCP"),_=i(e,k,T,l.reportAllChanges),o(function(){k.value=performance.now()-S.timeStamp,_(!0)})}))})},M=[.1,.25],R=0,I=1/0,D=0,C=function(e){var l,_=_createForOfIteratorHelper2(e);try{for(_.s();!(l=_.n()).done;){var S=l.value;S.interactionId&&(I=Math.min(I,S.interactionId),D=Math.max(D,S.interactionId),R=D?(D-I)/7+1:0)}}catch(k){_.e(k)}finally{_.f()}},w=function(){var e;return S?R:null!==(e=performance.interactionCount)&&void 0!==e?e:0},F=function(){"interactionCount"in performance||S||(S=f("event",C,{type:"event",buffered:!0,durationThreshold:0}))},O=0,L=function(){function x(){_classCallCheck3(this,x),_defineProperty3(this,"u",[]),_defineProperty3(this,"l",new Map),_defineProperty3(this,"m",void 0),_defineProperty3(this,"p",void 0)}return _createClass3(x,[{key:"v",value:function(){O=w(),this.u.length=0,this.l.clear()}},{key:"T",value:function(){var e=Math.min(this.u.length-1,Math.floor((w()-O)/50));return this.u[e]}},{key:"h",value:function(e){var l;if(null!==(l=this.m)&&void 0!==l&&l.call(this,e),e.interactionId||"first-input"===e.entryType){var _=this.u.at(-1),S=this.l.get(e.interactionId);if(S||this.u.length<10||e.duration>_.P){var k;if(S?e.duration>S.P?(S.entries=[e],S.P=e.duration):e.duration===S.P&&e.startTime===S.entries[0].startTime&&S.entries.push(e):(S={id:e.interactionId,entries:[e],P:e.duration},this.l.set(S.id,S),this.u.push(S)),this.u.sort(function(e,l){return l.P-e.P}),this.u.length>10){var E,T=_createForOfIteratorHelper2(this.u.splice(10));try{for(T.s();!(E=T.n()).done;){var M=E.value;this.l.delete(M.id)}}catch(R){T.e(R)}finally{T.f()}}null===(k=this.p)||void 0===k||k.call(this,S)}}}}])}(),A=function(e){var l=globalThis.requestIdleCallback||setTimeout;"hidden"===document.visibilityState?e():(e=u(e),document.addEventListener("visibilitychange",e,{once:!0}),l(function(){e(),document.removeEventListener("visibilitychange",e)}))},U=[200,500],B=function(){function N(){_classCallCheck3(this,N),_defineProperty3(this,"m",void 0)}return _createClass3(N,[{key:"h",value:function(e){var l;null===(l=this.m)||void 0===l||l.call(this,e)}}])}(),z=[2500,4e3],G=[800,1800],_O=function(e){document.prerendering?b(function(){return _O(e)}):"complete"!==document.readyState?addEventListener("load",function(){return _O(e)},!0):setTimeout(e)};e.CLSThresholds=M,e.FCPThresholds=T,e.INPThresholds=U,e.LCPThresholds=z,e.TTFBThresholds=G,e.onCLS=function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};P(u(function(){var _,S=c("CLS",0),E=d(l,k),u=function(e){var l,k=_createForOfIteratorHelper2(e);try{for(k.s();!(l=k.n()).done;){var T=l.value;E.h(T)}}catch(M){k.e(M)}finally{k.f()}E.i>S.value&&(S.value=E.i,S.entries=E.o,_())},T=f("layout-shift",u);T&&(_=i(e,S,M,l.reportAllChanges),document.addEventListener("visibilitychange",function(){"hidden"===document.visibilityState&&(u(T.takeRecords()),_(!0))}),n(function(){E.i=0,S=c("CLS",0),_=i(e,S,M,l.reportAllChanges),o(function(){return _()})}),setTimeout(_))}))},e.onFCP=P,e.onINP=function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};globalThis.PerformanceEventTiming&&"interactionId"in PerformanceEventTiming.prototype&&b(function(){var _;F();var S,k=c("INP"),E=d(l,L),a=function(e){A(function(){var l,_=_createForOfIteratorHelper2(e);try{for(_.s();!(l=_.n()).done;){var T=l.value;E.h(T)}}catch(R){_.e(R)}finally{_.f()}var M=E.T();M&&M.P!==k.value&&(k.value=M.P,k.entries=M.entries,S())})},T=f("event",a,{durationThreshold:null!==(_=l.durationThreshold)&&void 0!==_?_:40});S=i(e,k,U,l.reportAllChanges),T&&(T.observe({type:"first-input",buffered:!0}),document.addEventListener("visibilitychange",function(){"hidden"===document.visibilityState&&(a(T.takeRecords()),S(!0))}),n(function(){E.v(),k=c("INP"),S=i(e,k,U,l.reportAllChanges)}))})},e.onLCP=function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};b(function(){var _,S=y(),k=c("LCP"),E=d(l,B),m=function(e){l.reportAllChanges||(e=e.slice(-1));var T,M=_createForOfIteratorHelper2(e);try{for(M.s();!(T=M.n()).done;){var R=T.value;E.h(R),R.startTime<S.firstHiddenTime&&(k.value=Math.max(R.startTime-r(),0),k.entries=[R],_())}}catch(I){M.e(I)}finally{M.f()}},T=f("largest-contentful-paint",m);if(T){_=i(e,k,z,l.reportAllChanges);for(var M=u(function(){m(T.takeRecords()),T.disconnect(),_(!0)}),R=0,I=["keydown","click","visibilitychange"];R<I.length;R++){var D=I[R];addEventListener(D,function(){return A(M)},{capture:!0,once:!0})}n(function(S){k=c("LCP"),_=i(e,k,z,l.reportAllChanges),o(function(){k.value=performance.now()-S.timeStamp,_(!0)})})}})},e.onTTFB=function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_=c("TTFB"),S=i(e,_,G,l.reportAllChanges);_O(function(){var k=s();k&&(_.value=Math.max(k.responseStart-r(),0),_.entries=[k],S(!0),n(function(){_=c("TTFB",0),(S=i(e,_,G,l.reportAllChanges))(!0)}))})}}(l)}(0,Ji.exports)),Ji.exports}function requireAutoCapture(){if(Ki)return Ti;Ki=1,Object.defineProperty(Ti,"__esModule",{value:!0}),Ti.AutoCapture=Ti.runStatsigAutoCapture=Ti.StatsigAutoCapturePlugin=void 0;var e=requireSrc$3(),l=requireAutoCaptureEvent(),_=function(){if(Ui)return Ii;Ui=1,Object.defineProperty(Ii,"__esModule",{value:!0}),Ii.ConsoleLogManager=void 0;var e=requireSrc$3(),l=requireAutoCaptureEvent(),_=requireCommonUtils(),S=requireConsoleLogsUtils(),k=requireMetadataUtils(),E={trace:10,debug:20,log:30,info:30,warn:40,error:50},T=function(){return _createClass3(function ConsoleLogManager(e,l,_){var S,k,E,T;_classCallCheck3(this,ConsoleLogManager),this._enqueueFn=e,this._errorBoundary=l,this._options=_,this._restoreFns=[],this._isTracking=!1,this._logLevel="info",this.__source="js-auto-capture",this._logLevel=null!==(S=this._options.logLevel)&&void 0!==S?S:"info",this._maxKeys=null!==(k=this._options.maxKeys)&&void 0!==k?k:10,this._maxDepth=null!==(E=this._options.maxDepth)&&void 0!==E?E:10,this._maxStringLength=null!==(T=this._options.maxStringLength)&&void 0!==T?T:500},[{key:"startTracking",value:function(){try{if(this._isTracking||!this._options.enabled)return;if(!(0,e._getWindowSafe)())return;this._patchConsole(),this._isTracking=!0}catch(l){e.Log.error("Error starting console log tracking",l),this._errorBoundary.logError("autoCapture:ConsoleLogManager",l)}}},{key:"stopTracking",value:function(){this._isTracking&&(this._restoreFns.forEach(function(e){return e()}),this._restoreFns=[],this._isTracking=!1)}},{key:"_patchConsole",value:function(){var e=this;Object.entries(E).forEach(function(l){var k=_slicedToArray(l,2),T=k[0];if(!(k[1]<E[e._logLevel])&&console[T]){var M=function(){}.bind(),R=!1,I=(0,_.wrapFunctionWithRestore)(console,T,function(l){return function(){for(var _=arguments.length,k=new Array(_),E=0;E<_;E++)k[E]=arguments[E];if(l.apply(void 0,k),!R){R=!0;try{var I=k.map(function(l){return(0,S._safeStringify)(l,e._maxKeys,e._maxDepth,e._maxStringLength)}),D=(0,S._getStackTrace)();e._enqueueConsoleLog(T,I,D)}catch(O){M.apply(void 0,["console observer error:",O].concat(k)),e._errorBoundary.logError("autoCapture:ConsoleLogManager",O)}finally{R=!1}}}});e._restoreFns.push(I)}})}},{key:"_enqueueConsoleLog",value:function(e,S,E){if(this._shouldLog()){var T=Object.assign({status:"log"===e?"info":e,log_level:e,payload:S,trace:E,timestamp:Date.now(),source:this.__source},(0,k._gatherAllMetadata)((0,_._getSafeUrl)()));this._enqueueFn(l.AutoCaptureEventName.CONSOLE_LOG,S.join(" "),T)}}},{key:"_shouldLog",value:function(){return!this._options.sampleRate||"number"!=typeof this._options.sampleRate||this._options.sampleRate<=0||this._options.sampleRate>=1||Math.random()<this._options.sampleRate}}])}();return Ii.ConsoleLogManager=T,Ii}(),S=(Bi||(Bi=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DeadClickConfig=void 0;var l=requireSrc$3(),_=requireAutoCaptureEvent(),S=requireCommonUtils(),k=requireEventUtils(),E=requireMetadataUtils();e.DeadClickConfig={CLICK_CHECK_TIMEOUT:1e3,SCROLL_DELAY_MS:100,SELECTION_CHANGE_DELAY_MS:100,MUTATION_DELAY_MS:2500,ABSOLUTE_DEAD_CLICK_TIMEOUT:2750};var T=function(){return _createClass3(function DeadClickManager(l,_){var k=this;_classCallCheck3(this,DeadClickManager),this._enqueueFn=l,this._errorBoundary=_,this._lastMutationTime=0,this._lastSelectionChangeTime=0,this._clicks=[],this._deadClickConfig=e.DeadClickConfig,this._handleScroll=(0,S.throttle)(function(){var e=Date.now();k._clicks.forEach(function(l){l.scrollDelayMs||(l.scrollDelayMs=e-l.timestamp)})},50)},[{key:"startTracking",value:function(){var e=this;try{var _=(0,l._getWindowSafe)();if(!_)return;_.addEventListener("click",function(l){return e._handleClick(l)},{capture:!0}),_.addEventListener("scroll",function(){return e._handleScroll()},{capture:!0,passive:!0}),_.addEventListener("selectionchange",function(){return e._handleSelectionChange()}),this._setupMutationObserver()}catch(S){l.Log.error("Error starting dead click tracking",S),this._errorBoundary.logError("autoCapture:DeadClickManager",S)}}},{key:"_handleClick",value:function(e){var _,k,E=this,T=e.target;if(T){var M={timestamp:Date.now(),eventTarget:T};S.interactiveElements.includes(null===(_=null==T?void 0:T.tagName)||void 0===_?void 0:_.toLowerCase())||this._clicks.push(M),this._clicks.length&&!this._clickCheckTimer&&(this._clickCheckTimer=null===(k=(0,l._getWindowSafe)())||void 0===k?void 0:k.setTimeout(function(){E._checkForDeadClick()},this._deadClickConfig.CLICK_CHECK_TIMEOUT))}}},{key:"_handleSelectionChange",value:function(){this._lastSelectionChangeTime=Date.now()}},{key:"_setupMutationObserver",value:function(){var e=this,_=(0,l._getDocumentSafe)();_&&(this._observer=new MutationObserver(function(){e._lastMutationTime=Date.now()}),this._observer.observe(_.body,{childList:!0,subtree:!0,attributes:!0,characterData:!0}))}},{key:"_checkForDeadClick",value:function(){var e,_=this;if(this._clicks.length){clearTimeout(this._clickCheckTimer),this._clickCheckTimer=void 0;var S=this._clicks;this._clicks=[];var k,E=_createForOfIteratorHelper2(S);try{for(E.s();!(k=E.n()).done;){var T=k.value;this._updateClickDelayMs(T);var M=null!=T.scrollDelayMs&&T.scrollDelayMs<this._deadClickConfig.SCROLL_DELAY_MS,R=null!=T.selectionChangeDelayMs&&T.selectionChangeDelayMs<this._deadClickConfig.SELECTION_CHANGE_DELAY_MS,I=null!=T.mutationDelayMs&&T.mutationDelayMs<this._deadClickConfig.MUTATION_DELAY_MS;if(!(M||R||I)){var D=null!=T.scrollDelayMs&&T.scrollDelayMs>this._deadClickConfig.SCROLL_DELAY_MS,O=null!=T.selectionChangeDelayMs&&T.selectionChangeDelayMs>this._deadClickConfig.SELECTION_CHANGE_DELAY_MS,L=null!=T.mutationDelayMs&&T.mutationDelayMs>this._deadClickConfig.MUTATION_DELAY_MS,U=null!=T.absoluteDelayMs&&T.absoluteDelayMs>this._deadClickConfig.ABSOLUTE_DEAD_CLICK_TIMEOUT;D||O||L||U?this._logDeadClick(T,{scrollTimeout:D,selectionChangeTimeout:O,mutationTimeout:L,absoluteTimeout:U}):null!=T.absoluteDelayMs&&T.absoluteDelayMs<this._deadClickConfig.ABSOLUTE_DEAD_CLICK_TIMEOUT&&this._clicks.push(T)}}}catch(B){E.e(B)}finally{E.f()}this._clicks.length&&!this._clickCheckTimer&&(this._clickCheckTimer=null===(e=(0,l._getWindowSafe)())||void 0===e?void 0:e.setTimeout(function(){_._checkForDeadClick()},this._deadClickConfig.CLICK_CHECK_TIMEOUT))}}},{key:"_logDeadClick",value:function(e,l){var T=(0,k._gatherEventData)(e.eventTarget),M=T.value,R=T.metadata;M&&this._enqueueFn(_.AutoCaptureEventName.DEAD_CLICK,M,Object.assign(Object.assign(Object.assign(Object.assign({},R),l),(0,E._gatherCommonMetadata)((0,S._getSafeUrl)())),{scrollDelayMs:e.scrollDelayMs,selectionChangeDelayMs:e.selectionChangeDelayMs,mutationDelayMs:e.mutationDelayMs,absoluteDelayMs:e.absoluteDelayMs}))}},{key:"_updateClickDelayMs",value:function(e){!e.mutationDelayMs&&this._lastMutationTime>0&&e.timestamp<=this._lastMutationTime&&(e.mutationDelayMs=Date.now()-this._lastMutationTime),!e.selectionChangeDelayMs&&this._lastSelectionChangeTime>0&&e.timestamp<=this._lastSelectionChangeTime&&(e.selectionChangeDelayMs=Date.now()-this._lastSelectionChangeTime),e.absoluteDelayMs=Date.now()-e.timestamp}}])}();e.default=T}(zi)),zi),k=function(){if(ji)return Hi;ji=1,Object.defineProperty(Hi,"__esModule",{value:!0}),Hi.EngagementManager=void 0;var e=requireSrc$3(),l=function(){return _createClass3(function EngagementManager(){_classCallCheck3(this,EngagementManager),this._lastScrollY=0,this._maxScrollY=0,this._lastScrollPercentage=0,this._maxScrollPercentage=0,this._lastPageViewTime=Date.now(),this._inactiveTimer=null,this._onInactivityCallback=null,this._meaningfulEngagementOccurred=!1,this._initializeScrollTracking()},[{key:"_initializeScrollTracking",value:function(){var l=this,_=(0,e._getWindowSafe)();_&&(_.addEventListener("scroll",function(){return l._handleScroll()}),_.addEventListener("scrollend",function(){return l._handleScroll()}),_.addEventListener("resize",function(){return l._handleScroll()}))}},{key:"_handleScroll",value:function(){var l=(0,e._getWindowSafe)(),_=(0,e._getDocumentSafe)();if(l&&_){var S=_.body.scrollHeight,k=l.scrollY||_.documentElement.scrollTop||0,E=l.innerHeight;this._lastScrollY=k,this._maxScrollY=Math.max(this._maxScrollY,k);var T=Math.min(100,Math.round((k+E)/S*100));this._lastScrollPercentage=T,this._maxScrollPercentage=Math.max(this._maxScrollPercentage,T),this.bumpInactiveTimer()}}},{key:"getScrollMetrics",value:function(){return{lastScrollY:this._lastScrollY,maxScrollY:this._maxScrollY,lastScrollPercentage:this._lastScrollPercentage,maxScrollPercentage:this._maxScrollPercentage,scrollDepth:this._maxScrollPercentage}}},{key:"getPageViewLength",value:function(){return Date.now()-this._lastPageViewTime}},{key:"setLastPageViewTime",value:function(e){this._lastPageViewTime=e}},{key:"startInactivityTracking",value:function(e){this._onInactivityCallback=e}},{key:"bumpInactiveTimer",value:function(){var l=this,_=(0,e._getWindowSafe)();_&&(this._inactiveTimer&&clearTimeout(this._inactiveTimer),this._inactiveTimer=_.setTimeout(function(){l._onInactivityCallback&&l._onInactivityCallback()},6e5))}},{key:"setMeaningfulEngagementOccurred",value:function(e){this._meaningfulEngagementOccurred=e}},{key:"getPageViewEndMetadata",value:function(){var e=Object.assign(Object.assign({},this.getScrollMetrics()),{pageViewLength:this.getPageViewLength(),meaningfulEngagementOccurred:this._meaningfulEngagementOccurred});return this.setMeaningfulEngagementOccurred(!1),e}}])}();return Hi.EngagementManager=l,Hi}(),E=function(){if(Vi)return Wi;Vi=1,Object.defineProperty(Wi,"__esModule",{value:!0});var e=function(){return _createClass3(function RageClickManager(){_classCallCheck3(this,RageClickManager),this._clicks=[]},[{key:"isRageClick",value:function(e,l,_){var S,k,E;return this._clicks=this._clicks.filter(function(e){return _-e.timestamp<1e3}),this._clicks.length>0&&(k=e-(S=this._clicks[this._clicks.length-1]).x,E=l-S.y,!(Math.abs(k)+Math.abs(E)<=30))&&(this._clicks=[]),this._clicks.push({x:e,y:l,timestamp:_}),this._clicks.length>=3}}])}();return Wi.default=e,Wi}(),T=function(){if(Xi)return Qi;Xi=1,Object.defineProperty(Qi,"__esModule",{value:!0}),Qi.WebVitalsManager=void 0;var e=requireWebVitals_umd(),l=requireSrc$3(),_=requireAutoCaptureEvent(),S=requireCommonUtils(),k=["CLS","FCP","INP","LCP","TTFB"],E=function(){return _createClass3(function WebVitalsManager(e,l){_classCallCheck3(this,WebVitalsManager),this._enqueueFn=e,this._errorBoundary=l,this._isInitialized=!1,this._metricEvent={url:(0,S._getSafeUrlString)(),sanitizedUrl:(0,S._getSanitizedPageUrl)(),metrics:[],firstMetricTimestamp:void 0}},[{key:"startTracking",value:function(){var _,S,k=this;try{if(this._isInitialized)return;var E=null===(S=null===(_=(0,l._getWindowSafe)())||void 0===_?void 0:_.location)||void 0===S?void 0:S.protocol;if("https:"!==E&&"http:"!==E)return;(0,e.onCLS)(function(e){return k._handleMetric(e)}),(0,e.onFCP)(function(e){return k._handleMetric(e)}),(0,e.onINP)(function(e){return k._handleMetric(e)}),(0,e.onLCP)(function(e){return k._handleMetric(e)}),(0,e.onTTFB)(function(e){return k._handleMetric(e)}),this._isInitialized=!0}catch(T){l.Log.error("Error starting web vitals tracking",T),this._errorBoundary.logError("autoCapture:WebVitalsManager",T)}}},{key:"_handleMetric",value:function(e){if(void 0===this._metricEvent.firstMetricTimestamp&&(this._metricEvent.firstMetricTimestamp=Date.now()),void 0!==e&&void 0!==(null==e?void 0:e.name)){var l=(0,S._getSafeUrlString)();if(""!==l&&k.includes(e.name)){l!==this._metricEvent.url&&(this._enqueueWebVitalsAutoCaptureEvent(),this._metricEvent.url=l);var _=e;this._metricEvent.metrics.push({name:_.name,value:_.value,delta:_.delta,id:_.id}),this._metricEvent.metrics.length===k.length&&this._enqueueWebVitalsAutoCaptureEvent()}}}},{key:"_enqueueWebVitalsAutoCaptureEvent",value:function(){if(""!==this._metricEvent.url&&0!==this._metricEvent.metrics.length){var e={};this._metricEvent.metrics.forEach(function(l){var _=l.name.toLowerCase();e["".concat(_,"_value")]=l.value,e["".concat(_,"_delta")]=l.delta,e["".concat(_,"_id")]=l.id}),this._enqueueFn(_.AutoCaptureEventName.WEB_VITALS,this._metricEvent.sanitizedUrl,Object.assign(Object.assign({},e),{first_metric_timestamp:this._metricEvent.firstMetricTimestamp})),this._metricEvent={url:(0,S._getSafeUrlString)(),sanitizedUrl:(0,S._getSanitizedPageUrl)(),metrics:[],firstMetricTimestamp:void 0}}}}])}();return Qi.WebVitalsManager=E,Qi}(),M=requireCommonUtils(),R=requireEventUtils(),I=requireMetadataUtils(),D={submit:l.AutoCaptureEventName.FORM_SUBMIT,click:l.AutoCaptureEventName.CLICK,copy:l.AutoCaptureEventName.COPY,cut:l.AutoCaptureEventName.COPY},O=function(){return _createClass3(function StatsigAutoCapturePlugin(e){_classCallCheck3(this,StatsigAutoCapturePlugin),this._options=e,this.__plugin="auto-capture"},[{key:"bind",value:function(e){runStatsigAutoCapture(e,this._options)}}])}();function runStatsigAutoCapture(l,_){var S,k=l.getContext().sdkKey;if(!(0,e._isServerEnv)()){var E=null!==(S=(0,e._getStatsigGlobal)().acInstances)&&void 0!==S?S:{};if(E[k])return E[k]}return new L(l,_)}Ti.StatsigAutoCapturePlugin=O,Ti.runStatsigAutoCapture=runStatsigAutoCapture;var L=function(){return _createClass3(function AutoCapture(l,M){var R,I,D,O,L=this;_classCallCheck3(this,AutoCapture),this._client=l,this._disabledEvents={},this._previousLoggedPageViewUrl=null,this._hasLoggedPageViewEnd=!1,this._pageViewLogged=!1;var U=l.getContext(),B=U.sdkKey,z=U.errorBoundary,G=U.values;this._options=M,this._disabledEvents=null!==(I=null===(R=null==G?void 0:G.auto_capture_settings)||void 0===R?void 0:R.disabled_events)&&void 0!==I?I:{},this._errorBoundary=z,this._errorBoundary.wrap(this,"autoCapture:"),this._client.$on("values_updated",function(){var e,l,_=L._client.getContext().values;L._disabledEvents=null!==(l=null===(e=null==_?void 0:_.auto_capture_settings)||void 0===e?void 0:e.disabled_events)&&void 0!==l?l:L._disabledEvents}),this._engagementManager=new k.EngagementManager,this._rageClickManager=new E.default,this._webVitalsManager=new T.WebVitalsManager(this._enqueueAutoCapture.bind(this),z),this._deadClickManager=new S.default(this._enqueueAutoCapture.bind(this),z),this._consoleLogManager=new _.ConsoleLogManager(this._enqueueAutoCapture.bind(this),z,null!==(D=null==M?void 0:M.consoleLogAutoCaptureSettings)&&void 0!==D?D:{enabled:!1}),this._eventFilterFunc=null==M?void 0:M.eventFilterFunc;var j=(0,e._getDocumentSafe)();if(!(0,e._isServerEnv)()){__STATSIG__=(0,e._getStatsigGlobal)();var H=null!==(O=__STATSIG__.acInstances)&&void 0!==O?O:{};H[B]=this,__STATSIG__.acInstances=H}"loading"!==(null==j?void 0:j.readyState)?this._initialize():j.addEventListener("DOMContentLoaded",function(){return L._initialize()})},[{key:"_addEventHandlers",value:function(){var l=this,_=(0,e._getWindowSafe)(),S=(0,e._getDocumentSafe)();if(_&&S){var eventHandler=function(_){var S,k=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],E=_||(null===(S=(0,e._getWindowSafe)())||void 0===S?void 0:S.event);(l._autoLogEvent(E),k&&l._engagementManager.bumpInactiveTimer(),"click"===E.type&&E instanceof MouseEvent)&&(l._rageClickManager.isRageClick(E.clientX,E.clientY,Date.now())&&l._logRageClick(E))};(0,M._registerEventHandler)(S,"click",function(e){return eventHandler(e)}),(0,M._registerEventHandler)(S,"submit",function(e){return eventHandler(e)}),(0,M._registerEventHandler)(S,"copy",function(e){return eventHandler(e)}),(0,M._registerEventHandler)(S,"cut",function(e){return eventHandler(e)}),(0,M._registerEventHandler)(_,"error",function(e){return eventHandler(e,!1)}),(0,M._registerEventHandler)(_,"pagehide",function(){return l._tryLogPageViewEnd()}),(0,M._registerEventHandler)(_,"beforeunload",function(){return l._tryLogPageViewEnd()})}}},{key:"_addPageViewTracking",value:function(){var l=this,_=(0,e._getWindowSafe)(),S=(0,e._getDocumentSafe)();_&&S&&((0,M._registerEventHandler)(_,"popstate",function(){return l._tryLogPageView("popstate")}),window.history.pushState=new Proxy(window.history.pushState,{apply:function(e,_,S){var k=_slicedToArray(S,3),E=k[0],T=k[1],M=k[2];e.apply(_,[E,T,M]),l._tryLogPageView("pushstate")}}),window.history.replaceState=new Proxy(window.history.replaceState,{apply:function(e,_,S){var k=_slicedToArray(S,3),E=k[0],T=k[1],M=k[2];e.apply(_,[E,T,M]),l._tryLogPageView("replacestate")}}),this._tryLogPageView())}},{key:"_autoLogEvent",value:function(_){var S,k,E,T,O=null===(S=_.type)||void 0===S?void 0:S.toLowerCase();if("error"===O&&_ instanceof ErrorEvent)this._logError(_);else{var L=(0,M._getTargetNode)(_);if(L){var U=D[O];if(U){var B=U===l.AutoCaptureEventName.COPY;if((0,M._shouldLogEvent)(_,L,B)){var z={};if(B){var G=null===(E=null===(k=(0,e._getWindowSafe)())||void 0===k?void 0:k.getSelection())||void 0===E?void 0:E.toString();if(!G)return;(null===(T=this._options)||void 0===T?void 0:T.captureCopyText)&&(z.selectedText=(0,M._sanitizeString)(G));var j=_.type||"clipboard";z.clipType=j}var H=(0,R._gatherEventData)(L),V=H.value,W=H.metadata;W.isOutbound&&this._engagementManager.setMeaningfulEngagementOccurred(!0),Object.assign(z,W);var q=(0,I._gatherAllMetadata)((0,M._getSafeUrl)());this._enqueueAutoCapture(U,V,Object.assign(Object.assign({},q),z))}}}}}},{key:"_initialize",value:function(){var e=this;this._webVitalsManager.startTracking(),this._deadClickManager.startTracking(),this._consoleLogManager.startTracking(),this._engagementManager.startInactivityTracking(function(){return e._tryLogPageViewEnd(!0)}),this._addEventHandlers(),this._addPageViewTracking(),this._logSessionStart(),this._logPerformance()}},{key:"_logError",value:function(e){var _=(null==e?void 0:e.error)||{},S=_;if("object"===_typeof3(_))try{S=JSON.stringify(_)}catch(ta){S="function"==typeof(null==_?void 0:_.toString)?_.toString():"Unknown Error"}this._enqueueAutoCapture(l.AutoCaptureEventName.ERROR,e.message,{message:e.message,filename:e.filename,lineno:e.lineno,colno:e.colno,error_str:S})}},{key:"_logSessionStart",value:function(){var e=this._getSessionFromClient();try{if(!this._isNewSession(e))return;this._enqueueAutoCapture(l.AutoCaptureEventName.SESSION_START,(0,M._getSanitizedPageUrl)(),Object.assign({sessionID:e.data.sessionID},(0,I._gatherAllMetadata)((0,M._getSafeUrl)())),{flushImmediately:!0})}catch(_){this._errorBoundary.logError("AC::logSession",_)}}},{key:"_tryLogPageView",value:function(e){var _=(0,M._getSafeUrl)(),S=this._previousLoggedPageViewUrl;if(!S||_.pathname!==S.pathname){this._engagementManager.setLastPageViewTime(Date.now()),this._hasLoggedPageViewEnd=!1;var k=(0,I._gatherAllMetadata)(_);e&&(k.navigation_type=e),this._previousLoggedPageViewUrl&&(k.last_page_view_url=this._previousLoggedPageViewUrl.href),this._pageViewLogged||(this._updateClientWithPossibleFirstTouchMetadata(),this._pageViewLogged=!0),this._enqueueAutoCapture(l.AutoCaptureEventName.PAGE_VIEW,(0,M._getSanitizedPageUrl)(),k,{flushImmediately:!0,addNewSessionMetadata:!0}),this._previousLoggedPageViewUrl=_,this._engagementManager.bumpInactiveTimer()}}},{key:"_tryLogPageViewEnd",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._hasLoggedPageViewEnd||(this._hasLoggedPageViewEnd=!0,this._enqueueAutoCapture(l.AutoCaptureEventName.PAGE_VIEW_END,(0,M._getSanitizedPageUrl)(),Object.assign(Object.assign({},this._engagementManager.getPageViewEndMetadata()),{dueToInactivity:e}),{flushImmediately:!0}))}},{key:"_logRageClick",value:function(e){if((0,M._shouldLogEvent)(e,e.target)){var _=(0,R._gatherEventData)(e.target),S=_.value,k=_.metadata;this._enqueueAutoCapture(l.AutoCaptureEventName.RAGE_CLICK,S,Object.assign(Object.assign({x:e.clientX,y:e.clientY,timestamp:Date.now()},(0,I._gatherAllMetadata)((0,M._getSafeUrl)())),k))}}},{key:"_logPerformance",value:function(){var _=this,S=(0,e._getWindowSafe)();S&&S.performance&&void 0!==(null==S?void 0:S.performance)&&"function"==typeof S.performance.getEntriesByType&&"function"==typeof S.performance.getEntriesByName&&setTimeout(function(){var e={},k=S.performance.getEntriesByType("navigation");if(k&&k.length>0&&k[0]instanceof PerformanceNavigationTiming){var E=k[0];e.load_time_ms=E.duration,e.dom_interactive_time_ms=E.domInteractive-E.startTime,e.redirect_count=E.redirectCount,e.transfer_bytes=E.transferSize}var T=S.performance.getEntriesByName("first-contentful-paint");T&&T.length>0&&T[0]instanceof PerformancePaintTiming&&(e.first_contentful_paint_time_ms=T[0].startTime),_._enqueueAutoCapture(l.AutoCaptureEventName.PERFORMANCE,(0,M._getSanitizedPageUrl)(),Object.assign(Object.assign({},e),(0,I._getNetworkInfo)()))},1)}},{key:"_enqueueAutoCapture",value:function(l,_,S,k){var E,T,M;if(_){var R=l.slice(14);if(!this._disabledEvents[l]&&!this._disabledEvents[R]){var I=this._getSessionFromClient();try{var D=Object.assign({sessionID:I.data.sessionID,page_url:null!==(M=null===(T=null===(E=(0,e._getWindowSafe)())||void 0===E?void 0:E.location)||void 0===T?void 0:T.href)&&void 0!==M?M:""},S);(null==k?void 0:k.addNewSessionMetadata)&&(D.isNewSession=String(this._isNewSession(I)));var O={eventName:l,value:_,metadata:D};if(this._eventFilterFunc&&!this._eventFilterFunc(O))return;this._client.logEvent(O),(null==k?void 0:k.flushImmediately)&&this._flushImmediately()}catch(L){this._errorBoundary.logError("AC::enqueue",L)}}}}},{key:"_updateClientWithPossibleFirstTouchMetadata",value:function(){var e=this._client;e._possibleFirstTouchMetadata=(0,I._getPossibleFirstTouchMetadata)((0,M._getSafeUrl)()),Object.keys(e._possibleFirstTouchMetadata).length>0&&(e._user=Object.assign(Object.assign({},e._user),{analyticsOnlyMetadata:Object.assign(Object.assign({},e._possibleFirstTouchMetadata),e._user.analyticsOnlyMetadata)}))}},{key:"_flushImmediately",value:function(){this._client.flush().catch(function(l){e.Log.error(l)})}},{key:"_isNewSession",value:function(e){return Math.abs(e.data.startTime-Date.now())<1e3}},{key:"_getSessionFromClient",value:function(){return this._client.getContext().session}}],[{key:"getAllMetadata",value:function(){return(0,I._gatherAllMetadata)((0,M._getSafeUrl)())}}])}();return Ti.AutoCapture=L,Ti}I("aj",(Yi||(Yi=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.StatsigAutoCapturePlugin=e.runStatsigAutoCapture=e.AutoCapture=e.AutoCaptureEventName=void 0;var l=requireSrc$3(),_=requireAutoCapture();Object.defineProperty(e,"AutoCapture",{enumerable:!0,get:function(){return _.AutoCapture}}),Object.defineProperty(e,"StatsigAutoCapturePlugin",{enumerable:!0,get:function(){return _.StatsigAutoCapturePlugin}}),Object.defineProperty(e,"runStatsigAutoCapture",{enumerable:!0,get:function(){return _.runStatsigAutoCapture}});var S=requireAutoCaptureEvent();Object.defineProperty(e,"AutoCaptureEventName",{enumerable:!0,get:function(){return S.AutoCaptureEventName}});var k=Object.assign((0,l._getStatsigGlobal)(),{AutoCapture:_.AutoCapture,runStatsigAutoCapture:_.runStatsigAutoCapture,StatsigAutoCapturePlugin:_.StatsigAutoCapturePlugin});e.default=k}(Ci)),Ci));function t(e,l,_){return Math.max(e,Math.min(l,_))}var Zi=function(){return _createClass3(function Animate(){_classCallCheck3(this,Animate)},[{key:"advance",value:function(e){var l;if(this.isRunning){var _,S,k,E,T=!1;if(this.lerp)this.value=(_=this.value,S=this.to,k=60*this.lerp,E=e,function(e,l,_){return(1-_)*e+_*l}(_,S,1-Math.exp(-k*E))),Math.round(this.value)===this.to&&(this.value=this.to,T=!0);else{this.currentTime+=e;var M=t(0,this.currentTime/this.duration,1),R=(T=M>=1)?1:this.easing(M);this.value=this.from+(this.to-this.from)*R}null!==(l=this.onUpdate)&&void 0!==l&&l.call(this,this.value,T),T&&this.stop()}}},{key:"stop",value:function(){this.isRunning=!1}},{key:"fromTo",value:function(e,l,_){var S=_.lerp,k=void 0===S?.1:S,E=_.duration,T=void 0===E?1:E,M=_.easing,R=void 0===M?function(e){return e}:M,I=_.onStart,D=_.onUpdate;this.from=this.value=e,this.to=l,this.lerp=k,this.duration=T,this.easing=R,this.currentTime=0,this.isRunning=!0,null!=I&&I(),this.onUpdate=D}}])}(),$i=function(){return _createClass3(function Dimensions(){var e=this,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_=l.wrapper,S=l.content,k=l.autoResize,E=void 0===k||k,T=l.debounce,M=void 0===T?250:T;_classCallCheck3(this,Dimensions),_defineProperty3(this,"resize",function(){e.onWrapperResize(),e.onContentResize()}),_defineProperty3(this,"onWrapperResize",function(){e.wrapper===window?(e.width=window.innerWidth,e.height=window.innerHeight):(e.width=e.wrapper.clientWidth,e.height=e.wrapper.clientHeight)}),_defineProperty3(this,"onContentResize",function(){e.wrapper===window?(e.scrollHeight=e.content.scrollHeight,e.scrollWidth=e.content.scrollWidth):(e.scrollHeight=e.wrapper.scrollHeight,e.scrollWidth=e.wrapper.scrollWidth)}),this.wrapper=_,this.content=S,E&&(this.debouncedResize=function(e,l){var _;return function(){var S=arguments,k=this;clearTimeout(_),_=setTimeout(function(){e.apply(k,S)},l)}}(this.resize,M),this.wrapper===window?window.addEventListener("resize",this.debouncedResize,!1):(this.wrapperResizeObserver=new ResizeObserver(this.debouncedResize),this.wrapperResizeObserver.observe(this.wrapper)),this.contentResizeObserver=new ResizeObserver(this.debouncedResize),this.contentResizeObserver.observe(this.content)),this.resize()},[{key:"destroy",value:function(){var e,l;null!==(e=this.wrapperResizeObserver)&&void 0!==e&&e.disconnect(),null!==(l=this.contentResizeObserver)&&void 0!==l&&l.disconnect(),window.removeEventListener("resize",this.debouncedResize,!1)}},{key:"limit",get:function(){return{x:this.scrollWidth-this.width,y:this.scrollHeight-this.height}}}])}(),ea=function(){return _createClass3(function Emitter(){_classCallCheck3(this,Emitter),this.events={}},[{key:"emit",value:function(e){for(var l=this.events[e]||[],_=arguments.length,S=new Array(_>1?_-1:0),k=1;k<_;k++)S[k-1]=arguments[k];for(var E=0,T=l.length;E<T;E++)l[E].apply(l,S)}},{key:"on",value:function(e,l){var _,S=this;return null!==(_=this.events[e])&&void 0!==_&&_.push(l)||(this.events[e]=[l]),function(){var _;S.events[e]=null===(_=S.events[e])||void 0===_?void 0:_.filter(function(e){return l!==e})}}},{key:"off",value:function(e,l){var _;this.events[e]=null===(_=this.events[e])||void 0===_?void 0:_.filter(function(e){return l!==e})}},{key:"destroy",value:function(){this.events={}}}])}(),ta=100/6,ra=function(){return _createClass3(function VirtualScroll(e,l){var _=this,S=l.wheelMultiplier,k=void 0===S?1:S,E=l.touchMultiplier,T=void 0===E?1:E;_classCallCheck3(this,VirtualScroll),_defineProperty3(this,"onTouchStart",function(e){var l=e.targetTouches?e.targetTouches[0]:e,S=l.clientX,k=l.clientY;_.touchStart.x=S,_.touchStart.y=k,_.lastDelta={x:0,y:0},_.emitter.emit("scroll",{deltaX:0,deltaY:0,event:e})}),_defineProperty3(this,"onTouchMove",function(e){var l=e.targetTouches?e.targetTouches[0]:e,S=l.clientX,k=l.clientY,E=-(S-_.touchStart.x)*_.touchMultiplier,T=-(k-_.touchStart.y)*_.touchMultiplier;_.touchStart.x=S,_.touchStart.y=k,_.lastDelta={x:E,y:T},_.emitter.emit("scroll",{deltaX:E,deltaY:T,event:e})}),_defineProperty3(this,"onTouchEnd",function(e){_.emitter.emit("scroll",{deltaX:_.lastDelta.x,deltaY:_.lastDelta.y,event:e})}),_defineProperty3(this,"onWheel",function(e){var l=e.deltaX,S=e.deltaY,k=e.deltaMode;l*=1===k?ta:2===k?_.windowWidth:1,S*=1===k?ta:2===k?_.windowHeight:1,l*=_.wheelMultiplier,S*=_.wheelMultiplier,_.emitter.emit("scroll",{deltaX:l,deltaY:S,event:e})}),_defineProperty3(this,"onWindowResize",function(){_.windowWidth=window.innerWidth,_.windowHeight=window.innerHeight}),this.element=e,this.wheelMultiplier=k,this.touchMultiplier=T,this.touchStart={x:null,y:null},this.emitter=new ea,window.addEventListener("resize",this.onWindowResize,!1),this.onWindowResize(),this.element.addEventListener("wheel",this.onWheel,{passive:!1}),this.element.addEventListener("touchstart",this.onTouchStart,{passive:!1}),this.element.addEventListener("touchmove",this.onTouchMove,{passive:!1}),this.element.addEventListener("touchend",this.onTouchEnd,{passive:!1})},[{key:"on",value:function(e,l){return this.emitter.on(e,l)}},{key:"destroy",value:function(){this.emitter.destroy(),window.removeEventListener("resize",this.onWindowResize,!1),this.element.removeEventListener("wheel",this.onWheel,{passive:!1}),this.element.removeEventListener("touchstart",this.onTouchStart,{passive:!1}),this.element.removeEventListener("touchmove",this.onTouchMove,{passive:!1}),this.element.removeEventListener("touchend",this.onTouchEnd,{passive:!1})}}])}(),na=function(){return _createClass3(function Lenis(){var e=this,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_=l.wrapper,S=void 0===_?window:_,k=l.content,E=void 0===k?document.documentElement:k,T=l.wheelEventsTarget,M=void 0===T?S:T,R=l.eventsTarget,I=void 0===R?M:R,D=l.smoothWheel,O=void 0===D||D,L=l.syncTouch,U=void 0!==L&&L,B=l.syncTouchLerp,z=void 0===B?.075:B,G=l.touchInertiaMultiplier,j=void 0===G?35:G,H=l.duration,V=l.easing,W=void 0===V?function(e){return Math.min(1,1.001-Math.pow(2,-10*e))}:V,q=l.lerp,X=void 0===q?!H&&.1:q,K=l.infinite,Y=void 0!==K&&K,Q=l.orientation,J=void 0===Q?"vertical":Q,Z=l.gestureOrientation,$=void 0===Z?"vertical":Z,ee=l.touchMultiplier,te=void 0===ee?1:ee,re=l.wheelMultiplier,ne=void 0===re?1:re,ie=l.autoResize,ae=void 0===ie||ie,oe=l.__experimental__naiveDimensions,se=void 0!==oe&&oe;_classCallCheck3(this,Lenis),this.__isSmooth=!1,this.__isScrolling=!1,this.__isStopped=!1,this.__isLocked=!1,this.onVirtualScroll=function(l){var _=l.deltaX,S=l.deltaY,k=l.event;if(!k.ctrlKey){var E=k.type.includes("touch"),T=k.type.includes("wheel");if(!e.options.syncTouch||!E||"touchstart"!==k.type||e.isStopped||e.isLocked){var M=0===_&&0===S,R="vertical"===e.options.gestureOrientation&&0===S||"horizontal"===e.options.gestureOrientation&&0===_;if(!M&&!R){var I=k.composedPath();if(!(I=I.slice(0,I.indexOf(e.rootElement))).find(function(e){var l,_,S,k,M;return(null===(l=e.hasAttribute)||void 0===l?void 0:l.call(e,"data-lenis-prevent"))||E&&(null===(_=e.hasAttribute)||void 0===_?void 0:_.call(e,"data-lenis-prevent-touch"))||T&&(null===(S=e.hasAttribute)||void 0===S?void 0:S.call(e,"data-lenis-prevent-wheel"))||(null===(k=e.classList)||void 0===k?void 0:k.contains("lenis"))&&!(null===(M=e.classList)||void 0===M?void 0:M.contains("lenis-stopped"))}))if(e.isStopped||e.isLocked)k.preventDefault();else{if(e.isSmooth=e.options.syncTouch&&E||e.options.smoothWheel&&T,!e.isSmooth)return e.isScrolling=!1,void e.animate.stop();k.preventDefault();var D=S;"both"===e.options.gestureOrientation?D=Math.abs(S)>Math.abs(_)?S:_:"horizontal"===e.options.gestureOrientation&&(D=_);var O=E&&e.options.syncTouch,L=E&&"touchend"===k.type&&Math.abs(D)>5;L&&(D=e.velocity*e.options.touchInertiaMultiplier),e.scrollTo(e.targetScroll+D,Object.assign({programmatic:!1},O?{lerp:L?e.options.syncTouchLerp:1}:{lerp:e.options.lerp,duration:e.options.duration,easing:e.options.easing}))}}}else e.reset()}},this.onNativeScroll=function(){if(!e.__preventNextScrollEvent&&!e.isScrolling){var l=e.animatedScroll;e.animatedScroll=e.targetScroll=e.actualScroll,e.velocity=0,e.direction=Math.sign(e.animatedScroll-l),e.emit()}},window.lenisVersion="1.0.42",S!==document.documentElement&&S!==document.body||(S=window),this.options={wrapper:S,content:E,wheelEventsTarget:M,eventsTarget:I,smoothWheel:O,syncTouch:U,syncTouchLerp:z,touchInertiaMultiplier:j,duration:H,easing:W,lerp:X,infinite:Y,gestureOrientation:$,orientation:J,touchMultiplier:te,wheelMultiplier:ne,autoResize:ae,__experimental__naiveDimensions:se},this.animate=new Zi,this.emitter=new ea,this.dimensions=new $i({wrapper:S,content:E,autoResize:ae}),this.toggleClassName("lenis",!0),this.velocity=0,this.isLocked=!1,this.isStopped=!1,this.isSmooth=U||O,this.isScrolling=!1,this.targetScroll=this.animatedScroll=this.actualScroll,this.options.wrapper.addEventListener("scroll",this.onNativeScroll,!1),this.virtualScroll=new ra(I,{touchMultiplier:te,wheelMultiplier:ne}),this.virtualScroll.on("scroll",this.onVirtualScroll)},[{key:"destroy",value:function(){this.emitter.destroy(),this.options.wrapper.removeEventListener("scroll",this.onNativeScroll,!1),this.virtualScroll.destroy(),this.dimensions.destroy(),this.toggleClassName("lenis",!1),this.toggleClassName("lenis-smooth",!1),this.toggleClassName("lenis-scrolling",!1),this.toggleClassName("lenis-stopped",!1),this.toggleClassName("lenis-locked",!1)}},{key:"on",value:function(e,l){return this.emitter.on(e,l)}},{key:"off",value:function(e,l){return this.emitter.off(e,l)}},{key:"setScroll",value:function(e){this.isHorizontal?this.rootElement.scrollLeft=e:this.rootElement.scrollTop=e}},{key:"resize",value:function(){this.dimensions.resize()}},{key:"emit",value:function(){this.emitter.emit("scroll",this)}},{key:"reset",value:function(){this.isLocked=!1,this.isScrolling=!1,this.animatedScroll=this.targetScroll=this.actualScroll,this.velocity=0,this.animate.stop()}},{key:"start",value:function(){this.isStopped&&(this.isStopped=!1,this.reset())}},{key:"stop",value:function(){this.isStopped||(this.isStopped=!0,this.animate.stop(),this.reset())}},{key:"raf",value:function(e){var l=e-(this.time||e);this.time=e,this.animate.advance(.001*l)}},{key:"scrollTo",value:function(e){var l=this,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},S=_.offset,k=void 0===S?0:S,E=_.immediate,T=void 0!==E&&E,M=_.lock,R=void 0!==M&&M,I=_.duration,D=void 0===I?this.options.duration:I,O=_.easing,L=void 0===O?this.options.easing:O,U=_.lerp,B=void 0===U?!D&&this.options.lerp:U,z=_.onComplete,G=_.force,j=void 0!==G&&G,H=_.programmatic,V=void 0===H||H;if(!this.isStopped&&!this.isLocked||j){if(["top","left","start"].includes(e))e=0;else if(["bottom","right","end"].includes(e))e=this.limit;else{var W;if("string"==typeof e?W=document.querySelector(e):(null==e?void 0:e.nodeType)&&(W=e),W){if(this.options.wrapper!==window){var q=this.options.wrapper.getBoundingClientRect();k-=this.isHorizontal?q.left:q.top}var X=W.getBoundingClientRect();e=(this.isHorizontal?X.left:X.top)+this.animatedScroll}}if("number"==typeof e){if(e+=k,e=Math.round(e),this.options.infinite?V&&(this.targetScroll=this.animatedScroll=this.scroll):e=t(0,e,this.limit),T)return this.animatedScroll=this.targetScroll=e,this.setScroll(this.scroll),this.reset(),void(null==z||z(this));if(!V){if(e===this.targetScroll)return;this.targetScroll=e}this.animate.fromTo(this.animatedScroll,e,{duration:D,easing:L,lerp:B,onStart:function(){R&&(l.isLocked=!0),l.isScrolling=!0},onUpdate:function(e,_){l.isScrolling=!0,l.velocity=e-l.animatedScroll,l.direction=Math.sign(l.velocity),l.animatedScroll=e,l.setScroll(l.scroll),V&&(l.targetScroll=e),_||l.emit(),_&&(l.reset(),l.emit(),null==z||z(l),l.__preventNextScrollEvent=!0,requestAnimationFrame(function(){delete l.__preventNextScrollEvent}))}})}}}},{key:"rootElement",get:function(){return this.options.wrapper===window?document.documentElement:this.options.wrapper}},{key:"limit",get:function(){return this.options.__experimental__naiveDimensions?this.isHorizontal?this.rootElement.scrollWidth-this.rootElement.clientWidth:this.rootElement.scrollHeight-this.rootElement.clientHeight:this.dimensions.limit[this.isHorizontal?"x":"y"]}},{key:"isHorizontal",get:function(){return"horizontal"===this.options.orientation}},{key:"actualScroll",get:function(){return this.isHorizontal?this.rootElement.scrollLeft:this.rootElement.scrollTop}},{key:"scroll",get:function(){return this.options.infinite?(this.animatedScroll%(e=this.limit)+e)%e:this.animatedScroll;var e}},{key:"progress",get:function(){return 0===this.limit?1:this.scroll/this.limit}},{key:"isSmooth",get:function(){return this.__isSmooth},set:function(e){this.__isSmooth!==e&&(this.__isSmooth=e,this.toggleClassName("lenis-smooth",e))}},{key:"isScrolling",get:function(){return this.__isScrolling},set:function(e){this.__isScrolling!==e&&(this.__isScrolling=e,this.toggleClassName("lenis-scrolling",e))}},{key:"isStopped",get:function(){return this.__isStopped},set:function(e){this.__isStopped!==e&&(this.__isStopped=e,this.toggleClassName("lenis-stopped",e))}},{key:"isLocked",get:function(){return this.__isLocked},set:function(e){this.__isLocked!==e&&(this.__isLocked=e,this.toggleClassName("lenis-locked",e))}},{key:"className",get:function(){var e="lenis";return this.isStopped&&(e+=" lenis-stopped"),this.isLocked&&(e+=" lenis-locked"),this.isScrolling&&(e+=" lenis-scrolling"),this.isSmooth&&(e+=" lenis-smooth"),e}},{key:"toggleClassName",value:function(e,l){this.rootElement.classList.toggle(e,l),this.emitter.emit("className change",this)}}])}();I("ak",na);var ia,aa=function(e){function FunctionsError(e){var l,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"FunctionsError",S=arguments.length>2?arguments[2]:void 0;return _classCallCheck3(this,FunctionsError),(l=_callSuper(this,FunctionsError,[e])).name=_,l.context=S,l}return _inherits(FunctionsError,e),_createClass3(FunctionsError)}(_wrapNativeSuper(Error)),oa=function(e){function FunctionsFetchError(e){return _classCallCheck3(this,FunctionsFetchError),_callSuper(this,FunctionsFetchError,["Failed to send a request to the Edge Function","FunctionsFetchError",e])}return _inherits(FunctionsFetchError,e),_createClass3(FunctionsFetchError)}(aa),sa=function(e){function FunctionsRelayError(e){return _classCallCheck3(this,FunctionsRelayError),_callSuper(this,FunctionsRelayError,["Relay Error invoking the Edge Function","FunctionsRelayError",e])}return _inherits(FunctionsRelayError,e),_createClass3(FunctionsRelayError)}(aa),ua=function(e){function FunctionsHttpError(e){return _classCallCheck3(this,FunctionsHttpError),_callSuper(this,FunctionsHttpError,["Edge Function returned a non-2xx status code","FunctionsHttpError",e])}return _inherits(FunctionsHttpError,e),_createClass3(FunctionsHttpError)}(aa);!function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"}(ia||(ia={}));var la,ca,ha,da,fa,pa,va,__awaiter$9=function(e,l,_,S){return new(_||(_=Promise))(function(k,E){function fulfilled(e){try{step(S.next(e))}catch(ta){E(ta)}}function rejected(e){try{step(S.throw(e))}catch(ta){E(ta)}}function step(e){var l;e.done?k(e.value):(l=e.value,l instanceof _?l:new _(function(e){e(l)})).then(fulfilled,rejected)}step((S=S.apply(e,l||[])).next())})},ga=function(){return _createClass3(function FunctionsClient(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_=l.headers,S=void 0===_?{}:_,k=l.customFetch,E=l.region,T=void 0===E?ia.Any:E;_classCallCheck3(this,FunctionsClient),this.url=e,this.headers=S,this.region=T,this.fetch=function(e){var l;return l=e||("undefined"==typeof fetch?function(){for(var e=arguments.length,l=new Array(e),_=0;_<e;_++)l[_]=arguments[_];return z(_asyncToGenerator(_regenerator().m(function _callee26(){var e,l;return _regenerator().w(function(_){for(;;)switch(_.n){case 0:return _.n=1,Promise.resolve().then(function(){return Ma});case 1:return e=_.v,l=e.default,_.a(2,{default:l})}},_callee26)})),void 0).then(function(e){return e.default.apply(void 0,l)})}:fetch),function(){return l.apply(void 0,arguments)}}(k)},[{key:"setAuth",value:function(e){this.headers.Authorization="Bearer ".concat(e)}},{key:"invoke",value:function(e){return __awaiter$9(this,arguments,void 0,function(e){var l=this,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return _regenerator().m(function _callee27(){var S,k,E,T,M,R,I,D,O,L,U,B,z,G;return _regenerator().w(function(j){for(;;)switch(j.p=j.n){case 0:return j.p=0,k=_.headers,E=_.method,T=_.body,M=_.signal,R={},(I=_.region)||(I=l.region),D=new URL("".concat(l.url,"/").concat(e)),I&&"any"!==I&&(R["x-region"]=I,D.searchParams.set("forceFunctionRegion",I)),T&&(k&&!Object.prototype.hasOwnProperty.call(k,"Content-Type")||!k)&&("undefined"!=typeof Blob&&T instanceof Blob||T instanceof ArrayBuffer?(R["Content-Type"]="application/octet-stream",O=T):"string"==typeof T?(R["Content-Type"]="text/plain",O=T):"undefined"!=typeof FormData&&T instanceof FormData?O=T:(R["Content-Type"]="application/json",O=JSON.stringify(T))),j.n=1,l.fetch(D.toString(),{method:E||"POST",headers:Object.assign(Object.assign(Object.assign({},R),l.headers),k),body:O,signal:M}).catch(function(e){if("AbortError"===e.name)throw e;throw new oa(e)});case 1:if(L=j.v,!(U=L.headers.get("x-relay-error"))||"true"!==U){j.n=2;break}throw new sa(L);case 2:if(L.ok){j.n=3;break}throw new ua(L);case 3:if("application/json"!==(B=(null!==(S=L.headers.get("Content-Type"))&&void 0!==S?S:"text/plain").split(";")[0].trim())){j.n=5;break}return j.n=4,L.json();case 4:z=j.v,j.n=12;break;case 5:if("application/octet-stream"!==B){j.n=7;break}return j.n=6,L.blob();case 6:z=j.v,j.n=12;break;case 7:if("text/event-stream"!==B){j.n=8;break}z=L,j.n=12;break;case 8:if("multipart/form-data"!==B){j.n=10;break}return j.n=9,L.formData();case 9:z=j.v,j.n=12;break;case 10:return j.n=11,L.text();case 11:z=j.v;case 12:return j.a(2,{data:z,error:null,response:L});case 13:if(j.p=13,!((G=j.v)instanceof Error&&"AbortError"===G.name)){j.n=14;break}return j.a(2,{data:null,error:new oa(G)});case 14:return j.a(2,{data:null,error:G,response:G instanceof ua||G instanceof sa?G.context:void 0})}},_callee27,null,[[0,13]])})()})}}])}(),ma={},ya={},_a={},ba={},Sa={},wa={},xa=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")}(),ka=xa.fetch,Aa=xa.fetch.bind(xa),Ea=xa.Headers,Ca=xa.Request,Ta=xa.Response,Ma=Object.freeze(Object.defineProperty({__proto__:null,Headers:Ea,Request:Ca,Response:Ta,default:Aa,fetch:ka},Symbol.toStringTag,{value:"Module"})),Ra=getAugmentedNamespace(Ma),Ia={};function requirePostgrestError(){if(la)return Ia;la=1,Object.defineProperty(Ia,"__esModule",{value:!0});var e=function(e){function PostgrestError(e){var l;return _classCallCheck3(this,PostgrestError),(l=_callSuper(this,PostgrestError,[e.message])).name="PostgrestError",l.details=e.details,l.hint=e.hint,l.code=e.code,l}return _inherits(PostgrestError,e),_createClass3(PostgrestError)}(_wrapNativeSuper(Error));return Ia.default=e,Ia}function requirePostgrestBuilder(){if(ca)return wa;ca=1;var e=wa&&wa.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(wa,"__esModule",{value:!0});var l=e(Ra),_=e(requirePostgrestError()),S=function(){return _createClass3(function PostgrestBuilder(e){var _,S;_classCallCheck3(this,PostgrestBuilder),this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=null!==(_=e.shouldThrowOnError)&&void 0!==_&&_,this.signal=e.signal,this.isMaybeSingle=null!==(S=e.isMaybeSingle)&&void 0!==S&&S,e.fetch?this.fetch=e.fetch:"undefined"==typeof fetch?this.fetch=l.default:this.fetch=fetch},[{key:"throwOnError",value:function(){return this.shouldThrowOnError=!0,this}},{key:"setHeader",value:function(e,l){return this.headers=new Headers(this.headers),this.headers.set(e,l),this}},{key:"then",value:function(e,l){var S=this;void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),"GET"!==this.method&&"HEAD"!==this.method&&this.headers.set("Content-Type","application/json");var k=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(function(){var e=_asyncToGenerator(_regenerator().m(function _callee28(e){var l,k,E,T,M,R,I,D,O,L,U,B,z,G;return _regenerator().w(function(j){for(;;)switch(j.n){case 0:if(M=null,R=null,I=null,D=e.status,O=e.statusText,!e.ok){j.n=3;break}if("HEAD"===S.method){j.n=2;break}return j.n=1,e.text();case 1:""===(L=j.v)||(R="text/csv"===S.headers.get("Accept")||S.headers.get("Accept")&&(null===(l=S.headers.get("Accept"))||void 0===l?void 0:l.includes("application/vnd.pgrst.plan+text"))?L:JSON.parse(L));case 2:U=null===(k=S.headers.get("Prefer"))||void 0===k?void 0:k.match(/count=(exact|planned|estimated)/),B=null===(E=e.headers.get("content-range"))||void 0===E?void 0:E.split("/"),U&&B&&B.length>1&&(I=parseInt(B[1])),S.isMaybeSingle&&"GET"===S.method&&Array.isArray(R)&&(R.length>1?(M={code:"PGRST116",details:"Results contain ".concat(R.length," rows, application/vnd.pgrst.object+json requires 1 row"),hint:null,message:"JSON object requested, multiple (or no) rows returned"},R=null,I=null,D=406,O="Not Acceptable"):R=1===R.length?R[0]:null),j.n=5;break;case 3:return j.n=4,e.text();case 4:z=j.v;try{M=JSON.parse(z),Array.isArray(M)&&404===e.status&&(R=[],M=null,D=200,O="OK")}catch(H){404===e.status&&""===z?(D=204,O="No Content"):M={message:z}}if(M&&S.isMaybeSingle&&(null===(T=null==M?void 0:M.details)||void 0===T?void 0:T.includes("0 rows"))&&(M=null,D=200,O="OK"),!M||!S.shouldThrowOnError){j.n=5;break}throw new _.default(M);case 5:return G={error:M,data:R,count:I,status:D,statusText:O},j.a(2,G)}},_callee28)}));return function(l){return e.apply(this,arguments)}}());return this.shouldThrowOnError||(k=k.catch(function(e){var l,_,S;return{error:{message:"".concat(null!==(l=null==e?void 0:e.name)&&void 0!==l?l:"FetchError",": ").concat(null==e?void 0:e.message),details:"".concat(null!==(_=null==e?void 0:e.stack)&&void 0!==_?_:""),hint:"",code:"".concat(null!==(S=null==e?void 0:e.code)&&void 0!==S?S:"")},data:null,count:null,status:0,statusText:""}})),k.then(e,l)}},{key:"returns",value:function(){return this}},{key:"overrideTypes",value:function(){return this}}])}();return wa.default=S,wa}function requirePostgrestTransformBuilder(){if(ha)return Sa;ha=1;var e=Sa&&Sa.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Sa,"__esModule",{value:!0});var l=function(e){function PostgrestTransformBuilder(){return _classCallCheck3(this,PostgrestTransformBuilder),_callSuper(this,PostgrestTransformBuilder,arguments)}return _inherits(PostgrestTransformBuilder,e),_createClass3(PostgrestTransformBuilder,[{key:"select",value:function(e){var l=!1,_=(null!=e?e:"*").split("").map(function(e){return/\s/.test(e)&&!l?"":('"'===e&&(l=!l),e)}).join("");return this.url.searchParams.set("select",_),this.headers.append("Prefer","return=representation"),this}},{key:"order",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_=l.ascending,S=void 0===_||_,k=l.nullsFirst,E=l.foreignTable,T=l.referencedTable,M=void 0===T?E:T,R=M?"".concat(M,".order"):"order",I=this.url.searchParams.get(R);return this.url.searchParams.set(R,"".concat(I?"".concat(I,","):"").concat(e,".").concat(S?"asc":"desc").concat(void 0===k?"":k?".nullsfirst":".nullslast")),this}},{key:"limit",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_=l.foreignTable,S=l.referencedTable,k=void 0===S?_:S,E=void 0===k?"limit":"".concat(k,".limit");return this.url.searchParams.set(E,"".concat(e)),this}},{key:"range",value:function(e,l){var _=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},S=_.foreignTable,k=_.referencedTable,E=void 0===k?S:k,T=void 0===E?"offset":"".concat(E,".offset"),M=void 0===E?"limit":"".concat(E,".limit");return this.url.searchParams.set(T,"".concat(e)),this.url.searchParams.set(M,"".concat(l-e+1)),this}},{key:"abortSignal",value:function(e){return this.signal=e,this}},{key:"single",value:function(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}},{key:"maybeSingle",value:function(){return"GET"===this.method?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}},{key:"csv",value:function(){return this.headers.set("Accept","text/csv"),this}},{key:"geojson",value:function(){return this.headers.set("Accept","application/geo+json"),this}},{key:"explain",value:function(){var e,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_=l.analyze,S=void 0!==_&&_,k=l.verbose,E=void 0!==k&&k,T=l.settings,M=void 0!==T&&T,R=l.buffers,I=void 0!==R&&R,D=l.wal,O=void 0!==D&&D,L=l.format,U=void 0===L?"text":L,B=[S?"analyze":null,E?"verbose":null,M?"settings":null,I?"buffers":null,O?"wal":null].filter(Boolean).join("|"),z=null!==(e=this.headers.get("Accept"))&&void 0!==e?e:"application/json";return this.headers.set("Accept","application/vnd.pgrst.plan+".concat(U,'; for="').concat(z,'"; options=').concat(B,";")),this}},{key:"rollback",value:function(){return this.headers.append("Prefer","tx=rollback"),this}},{key:"returns",value:function(){return this}},{key:"maxAffected",value:function(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer","max-affected=".concat(e)),this}}])}(e(requirePostgrestBuilder()).default);return Sa.default=l,Sa}function requirePostgrestFilterBuilder(){if(da)return ba;da=1;var e=ba&&ba.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ba,"__esModule",{value:!0});var l=function(e){function PostgrestFilterBuilder(){return _classCallCheck3(this,PostgrestFilterBuilder),_callSuper(this,PostgrestFilterBuilder,arguments)}return _inherits(PostgrestFilterBuilder,e),_createClass3(PostgrestFilterBuilder,[{key:"eq",value:function(e,l){return this.url.searchParams.append(e,"eq.".concat(l)),this}},{key:"neq",value:function(e,l){return this.url.searchParams.append(e,"neq.".concat(l)),this}},{key:"gt",value:function(e,l){return this.url.searchParams.append(e,"gt.".concat(l)),this}},{key:"gte",value:function(e,l){return this.url.searchParams.append(e,"gte.".concat(l)),this}},{key:"lt",value:function(e,l){return this.url.searchParams.append(e,"lt.".concat(l)),this}},{key:"lte",value:function(e,l){return this.url.searchParams.append(e,"lte.".concat(l)),this}},{key:"like",value:function(e,l){return this.url.searchParams.append(e,"like.".concat(l)),this}},{key:"likeAllOf",value:function(e,l){return this.url.searchParams.append(e,"like(all).{".concat(l.join(","),"}")),this}},{key:"likeAnyOf",value:function(e,l){return this.url.searchParams.append(e,"like(any).{".concat(l.join(","),"}")),this}},{key:"ilike",value:function(e,l){return this.url.searchParams.append(e,"ilike.".concat(l)),this}},{key:"ilikeAllOf",value:function(e,l){return this.url.searchParams.append(e,"ilike(all).{".concat(l.join(","),"}")),this}},{key:"ilikeAnyOf",value:function(e,l){return this.url.searchParams.append(e,"ilike(any).{".concat(l.join(","),"}")),this}},{key:"is",value:function(e,l){return this.url.searchParams.append(e,"is.".concat(l)),this}},{key:"in",value:function(e,l){var _=Array.from(new Set(l)).map(function(e){return"string"==typeof e&&new RegExp("[,()]").test(e)?'"'.concat(e,'"'):"".concat(e)}).join(",");return this.url.searchParams.append(e,"in.(".concat(_,")")),this}},{key:"contains",value:function(e,l){return"string"==typeof l?this.url.searchParams.append(e,"cs.".concat(l)):Array.isArray(l)?this.url.searchParams.append(e,"cs.{".concat(l.join(","),"}")):this.url.searchParams.append(e,"cs.".concat(JSON.stringify(l))),this}},{key:"containedBy",value:function(e,l){return"string"==typeof l?this.url.searchParams.append(e,"cd.".concat(l)):Array.isArray(l)?this.url.searchParams.append(e,"cd.{".concat(l.join(","),"}")):this.url.searchParams.append(e,"cd.".concat(JSON.stringify(l))),this}},{key:"rangeGt",value:function(e,l){return this.url.searchParams.append(e,"sr.".concat(l)),this}},{key:"rangeGte",value:function(e,l){return this.url.searchParams.append(e,"nxl.".concat(l)),this}},{key:"rangeLt",value:function(e,l){return this.url.searchParams.append(e,"sl.".concat(l)),this}},{key:"rangeLte",value:function(e,l){return this.url.searchParams.append(e,"nxr.".concat(l)),this}},{key:"rangeAdjacent",value:function(e,l){return this.url.searchParams.append(e,"adj.".concat(l)),this}},{key:"overlaps",value:function(e,l){return"string"==typeof l?this.url.searchParams.append(e,"ov.".concat(l)):this.url.searchParams.append(e,"ov.{".concat(l.join(","),"}")),this}},{key:"textSearch",value:function(e,l){var _=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},S=_.config,k=_.type,E="";"plain"===k?E="pl":"phrase"===k?E="ph":"websearch"===k&&(E="w");var T=void 0===S?"":"(".concat(S,")");return this.url.searchParams.append(e,"".concat(E,"fts").concat(T,".").concat(l)),this}},{key:"match",value:function(e){var l=this;return Object.entries(e).forEach(function(e){var _=_slicedToArray(e,2),S=_[0],k=_[1];l.url.searchParams.append(S,"eq.".concat(k))}),this}},{key:"not",value:function(e,l,_){return this.url.searchParams.append(e,"not.".concat(l,".").concat(_)),this}},{key:"or",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_=l.foreignTable,S=l.referencedTable,k=void 0===S?_:S,E=k?"".concat(k,".or"):"or";return this.url.searchParams.append(E,"(".concat(e,")")),this}},{key:"filter",value:function(e,l,_){return this.url.searchParams.append(e,"".concat(l,".").concat(_)),this}}])}(e(requirePostgrestTransformBuilder()).default);return ba.default=l,ba}function requirePostgrestQueryBuilder(){if(fa)return _a;fa=1;var e=_a&&_a.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(_a,"__esModule",{value:!0});var l=e(requirePostgrestFilterBuilder()),_=function(){return _createClass3(function PostgrestQueryBuilder(e,l){var _=l.headers,S=void 0===_?{}:_,k=l.schema,E=l.fetch;_classCallCheck3(this,PostgrestQueryBuilder),this.url=e,this.headers=new Headers(S),this.schema=k,this.fetch=E},[{key:"select",value:function(e,_){var S=null!=_?_:{},k=S.head,E=void 0!==k&&k,T=S.count,M=E?"HEAD":"GET",R=!1,I=(null!=e?e:"*").split("").map(function(e){return/\s/.test(e)&&!R?"":('"'===e&&(R=!R),e)}).join("");return this.url.searchParams.set("select",I),T&&this.headers.append("Prefer","count=".concat(T)),new l.default({method:M,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}},{key:"insert",value:function(e){var _,S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},k=S.count,E=S.defaultToNull,T=void 0===E||E;if(k&&this.headers.append("Prefer","count=".concat(k)),T||this.headers.append("Prefer","missing=default"),Array.isArray(e)){var M=e.reduce(function(e,l){return e.concat(Object.keys(l))},[]);if(M.length>0){var R=_toConsumableArray3(new Set(M)).map(function(e){return'"'.concat(e,'"')});this.url.searchParams.set("columns",R.join(","))}}return new l.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(_=this.fetch)&&void 0!==_?_:fetch})}},{key:"upsert",value:function(e){var _,S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},k=S.onConflict,E=S.ignoreDuplicates,T=void 0!==E&&E,M=S.count,R=S.defaultToNull,I=void 0===R||R;if(this.headers.append("Prefer","resolution=".concat(T?"ignore":"merge","-duplicates")),void 0!==k&&this.url.searchParams.set("on_conflict",k),M&&this.headers.append("Prefer","count=".concat(M)),I||this.headers.append("Prefer","missing=default"),Array.isArray(e)){var D=e.reduce(function(e,l){return e.concat(Object.keys(l))},[]);if(D.length>0){var O=_toConsumableArray3(new Set(D)).map(function(e){return'"'.concat(e,'"')});this.url.searchParams.set("columns",O.join(","))}}return new l.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(_=this.fetch)&&void 0!==_?_:fetch})}},{key:"update",value:function(e){var _,S=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).count;return S&&this.headers.append("Prefer","count=".concat(S)),new l.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(_=this.fetch)&&void 0!==_?_:fetch})}},{key:"delete",value:function(){var e,_=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).count;return _&&this.headers.append("Prefer","count=".concat(_)),new l.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:null!==(e=this.fetch)&&void 0!==e?e:fetch})}}])}();return _a.default=_,_a}var Pa,Da,Oa,La,Ua,Fa=function(){if(va)return ma;va=1;var e=ma&&ma.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ma,"__esModule",{value:!0}),ma.PostgrestError=ma.PostgrestBuilder=ma.PostgrestTransformBuilder=ma.PostgrestFilterBuilder=ma.PostgrestQueryBuilder=ma.PostgrestClient=void 0;var l=e(function(){if(pa)return ya;pa=1;var e=ya&&ya.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ya,"__esModule",{value:!0});var l=e(requirePostgrestQueryBuilder()),_=e(requirePostgrestFilterBuilder()),S=function(){function PostgrestClient(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_=l.headers,S=void 0===_?{}:_,k=l.schema,E=l.fetch;_classCallCheck3(this,PostgrestClient),this.url=e,this.headers=new Headers(S),this.schemaName=k,this.fetch=E}return _createClass3(PostgrestClient,[{key:"from",value:function(e){var _=new URL("".concat(this.url,"/").concat(e));return new l.default(_,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}},{key:"schema",value:function(e){return new PostgrestClient(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}},{key:"rpc",value:function(e){var l,S,k,E=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},T=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},M=T.head,R=void 0!==M&&M,I=T.get,D=void 0!==I&&I,O=T.count,L=new URL("".concat(this.url,"/rpc/").concat(e));R||D?(S=R?"HEAD":"GET",Object.entries(E).filter(function(e){var l=_slicedToArray(e,2);return l[0],void 0!==l[1]}).map(function(e){var l=_slicedToArray(e,2),_=l[0],S=l[1];return[_,Array.isArray(S)?"{".concat(S.join(","),"}"):"".concat(S)]}).forEach(function(e){var l=_slicedToArray(e,2),_=l[0],S=l[1];L.searchParams.append(_,S)})):(S="POST",k=E);var U=new Headers(this.headers);return O&&U.set("Prefer","count=".concat(O)),new _.default({method:S,url:L,headers:U,schema:this.schemaName,body:k,fetch:null!==(l=this.fetch)&&void 0!==l?l:fetch})}}])}();return ya.default=S,ya}());ma.PostgrestClient=l.default;var _=e(requirePostgrestQueryBuilder());ma.PostgrestQueryBuilder=_.default;var S=e(requirePostgrestFilterBuilder());ma.PostgrestFilterBuilder=S.default;var k=e(requirePostgrestTransformBuilder());ma.PostgrestTransformBuilder=k.default;var E=e(requirePostgrestBuilder());ma.PostgrestBuilder=E.default;var T=e(requirePostgrestError());return ma.PostgrestError=T.default,ma.default={PostgrestClient:l.default,PostgrestQueryBuilder:_.default,PostgrestFilterBuilder:S.default,PostgrestTransformBuilder:k.default,PostgrestBuilder:E.default,PostgrestError:T.default},ma}(),Na=getDefaultExportFromCjs(Fa),Ba=Na.PostgrestClient,za=(Na.PostgrestQueryBuilder,Na.PostgrestFilterBuilder,Na.PostgrestTransformBuilder,Na.PostgrestBuilder,Na.PostgrestError,function(){return _createClass3(function WebSocketFactory(){_classCallCheck3(this,WebSocketFactory)},null,[{key:"detectEnvironment",value:function(){var e;if("undefined"!=typeof WebSocket)return{type:"native",constructor:WebSocket};if("undefined"!=typeof globalThis&&void 0!==globalThis.WebSocket)return{type:"native",constructor:globalThis.WebSocket};if("undefined"!=typeof global&&void 0!==global.WebSocket)return{type:"native",constructor:global.WebSocket};if("undefined"!=typeof globalThis&&void 0!==globalThis.WebSocketPair&&void 0===globalThis.WebSocket)return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if("undefined"!=typeof globalThis&&globalThis.EdgeRuntime||"undefined"!=typeof navigator&&(null===(e=navigator.userAgent)||void 0===e?void 0:e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if("undefined"!=typeof process){var l=process.versions;if(l&&l.node){var _=l.node,S=parseInt(_.replace(/^v/,"").split(".")[0]);return S>=22?void 0!==globalThis.WebSocket?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:"Node.js ".concat(S," detected but native WebSocket not found."),workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:"Node.js ".concat(S," detected without native WebSocket support."),workaround:'For Node.js < 22, install "ws" package and provide it via the transport option:\nimport ws from "ws"\nnew RealtimeClient(url, { transport: ws })'}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}},{key:"getWebSocketConstructor",value:function(){var e=this.detectEnvironment();if(e.constructor)return e.constructor;var l=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(l+="\n\nSuggested solution: ".concat(e.workaround)),new Error(l)}},{key:"createWebSocket",value:function(e,l){return new(this.getWebSocketConstructor())(e,l)}},{key:"isWebSocketSupported",value:function(){try{var e=this.detectEnvironment();return"native"===e.type||"ws"===e.type}catch(l){return!1}}}])}()),Ga="realtime-js/".concat("2.75.0"),ja=1e4;!function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"}(Pa||(Pa={})),function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"}(Da||(Da={})),function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"}(Oa||(Oa={})),function(e){e.websocket="websocket"}(La||(La={})),function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"}(Ua||(Ua={}));var Ha,Va=function(){return _createClass3(function Serializer(){_classCallCheck3(this,Serializer),this.HEADER_LENGTH=1},[{key:"decode",value:function(e,l){return e.constructor===ArrayBuffer?l(this._binaryDecode(e)):l("string"==typeof e?JSON.parse(e):{})}},{key:"_binaryDecode",value:function(e){var l=new DataView(e),_=new TextDecoder;return this._decodeBroadcast(e,l,_)}},{key:"_decodeBroadcast",value:function(e,l,_){var S=l.getUint8(1),k=l.getUint8(2),E=this.HEADER_LENGTH+2,T=_.decode(e.slice(E,E+S));E+=S;var M=_.decode(e.slice(E,E+k));return E+=k,{ref:null,topic:T,event:M,payload:JSON.parse(_.decode(e.slice(E,e.byteLength)))}}}])}(),Wa=function(){return _createClass3(function Timer(e,l){_classCallCheck3(this,Timer),this.callback=e,this.timerCalc=l,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=l},[{key:"reset",value:function(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}},{key:"scheduleTimeout",value:function(){var e=this;clearTimeout(this.timer),this.timer=setTimeout(function(){e.tries=e.tries+1,e.callback()},this.timerCalc(this.tries+1))}}])}();!function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"}(Ha||(Ha={}));var qa,convertChangeData=function(e,l){var _,S=null!==(_=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).skipTypes)&&void 0!==_?_:[];return l?Object.keys(l).reduce(function(_,k){return _[k]=convertColumn(k,e,l,S),_},{}):{}},convertColumn=function(e,l,_,S){var k=l.find(function(l){return l.name===e}),E=null==k?void 0:k.type,T=_[e];return E&&!S.includes(E)?convertCell(E,T):noop$3(T)},convertCell=function(e,l){if("_"===e.charAt(0)){var _=e.slice(1,e.length);return toArray$1(l,_)}switch(e){case Ha.bool:return toBoolean(l);case Ha.float4:case Ha.float8:case Ha.int2:case Ha.int4:case Ha.int8:case Ha.numeric:case Ha.oid:return toNumber(l);case Ha.json:case Ha.jsonb:return toJson(l);case Ha.timestamp:return toTimestampString(l);case Ha.abstime:case Ha.date:case Ha.daterange:case Ha.int4range:case Ha.int8range:case Ha.money:case Ha.reltime:case Ha.text:case Ha.time:case Ha.timestamptz:case Ha.timetz:case Ha.tsrange:case Ha.tstzrange:default:return noop$3(l)}},noop$3=function(e){return e},toBoolean=function(e){switch(e){case"t":return!0;case"f":return!1;default:return e}},toNumber=function(e){if("string"==typeof e){var l=parseFloat(e);if(!Number.isNaN(l))return l}return e},toJson=function(e){if("string"==typeof e)try{return JSON.parse(e)}catch(l){return e}return e},toArray$1=function(e,l){if("string"!=typeof e)return e;var _=e.length-1,S=e[_];if("{"===e[0]&&"}"===S){var k,E=e.slice(1,_);try{k=JSON.parse("["+E+"]")}catch(T){k=E?E.split(","):[]}return k.map(function(e){return convertCell(l,e)})}return e},toTimestampString=function(e){return"string"==typeof e?e.replace(" ","T"):e},httpEndpointURL=function(e){var l=e;return(l=(l=l.replace(/^ws/i,"http")).replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,"")).replace(/\/+$/,"")+"/api/broadcast"},Xa=function(){return _createClass3(function Push(e,l){var _=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},S=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ja;_classCallCheck3(this,Push),this.channel=e,this.event=l,this.payload=_,this.timeout=S,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null},[{key:"resend",value:function(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}},{key:"send",value:function(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}},{key:"updatePayload",value:function(e){this.payload=Object.assign(Object.assign({},this.payload),e)}},{key:"receive",value:function(e,l){var _;return this._hasReceived(e)&&l(null===(_=this.receivedResp)||void 0===_?void 0:_.response),this.recHooks.push({status:e,callback:l}),this}},{key:"startTimeout",value:function(){var e=this;if(!this.timeoutTimer){this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);this.channel._on(this.refEvent,{},function(l){e._cancelRefEvent(),e._cancelTimeout(),e.receivedResp=l,e._matchReceive(l)}),this.timeoutTimer=setTimeout(function(){e.trigger("timeout",{})},this.timeout)}}},{key:"trigger",value:function(e,l){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:l})}},{key:"destroy",value:function(){this._cancelRefEvent(),this._cancelTimeout()}},{key:"_cancelRefEvent",value:function(){this.refEvent&&this.channel._off(this.refEvent,{})}},{key:"_cancelTimeout",value:function(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}},{key:"_matchReceive",value:function(e){var l=e.status,_=e.response;this.recHooks.filter(function(e){return e.status===l}).forEach(function(e){return e.callback(_)})}},{key:"_hasReceived",value:function(e){return this.receivedResp&&this.receivedResp.status===e}}])}();!function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"}(qa||(qa={}));var Ka,Ya,Qa,Ja=function(){return _createClass3(function RealtimePresence(e,l){var _=this;_classCallCheck3(this,RealtimePresence),this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:function(){},onLeave:function(){},onSync:function(){}};var S=(null==l?void 0:l.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(S.state,{},function(e){var l=_.caller,S=l.onJoin,k=l.onLeave,E=l.onSync;_.joinRef=_.channel._joinRef(),_.state=RealtimePresence.syncState(_.state,e,S,k),_.pendingDiffs.forEach(function(e){_.state=RealtimePresence.syncDiff(_.state,e,S,k)}),_.pendingDiffs=[],E()}),this.channel._on(S.diff,{},function(e){var l=_.caller,S=l.onJoin,k=l.onLeave,E=l.onSync;_.inPendingSyncState()?_.pendingDiffs.push(e):(_.state=RealtimePresence.syncDiff(_.state,e,S,k),E())}),this.onJoin(function(e,l,S){_.channel._trigger("presence",{event:"join",key:e,currentPresences:l,newPresences:S})}),this.onLeave(function(e,l,S){_.channel._trigger("presence",{event:"leave",key:e,currentPresences:l,leftPresences:S})}),this.onSync(function(){_.channel._trigger("presence",{event:"sync"})})},[{key:"onJoin",value:function(e){this.caller.onJoin=e}},{key:"onLeave",value:function(e){this.caller.onLeave=e}},{key:"onSync",value:function(e){this.caller.onSync=e}},{key:"inPendingSyncState",value:function(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}],[{key:"syncState",value:function(e,l,_,S){var k=this.cloneDeep(e),E=this.transformState(l),T={},M={};return this.map(k,function(e,l){E[e]||(M[e]=l)}),this.map(E,function(e,l){var _=k[e];if(_){var S=l.map(function(e){return e.presence_ref}),E=_.map(function(e){return e.presence_ref}),R=l.filter(function(e){return E.indexOf(e.presence_ref)<0}),I=_.filter(function(e){return S.indexOf(e.presence_ref)<0});R.length>0&&(T[e]=R),I.length>0&&(M[e]=I)}else T[e]=l}),this.syncDiff(k,{joins:T,leaves:M},_,S)}},{key:"syncDiff",value:function(e,l,_,S){var k=this,E={joins:this.transformState(l.joins),leaves:this.transformState(l.leaves)},T=E.joins,M=E.leaves;return _||(_=function(){}),S||(S=function(){}),this.map(T,function(l,S){var E,T=null!==(E=e[l])&&void 0!==E?E:[];if(e[l]=k.cloneDeep(S),T.length>0){var M,R=e[l].map(function(e){return e.presence_ref}),I=T.filter(function(e){return R.indexOf(e.presence_ref)<0});(M=e[l]).unshift.apply(M,_toConsumableArray3(I))}_(l,T,S)}),this.map(M,function(l,_){var k=e[l];if(k){var E=_.map(function(e){return e.presence_ref});k=k.filter(function(e){return E.indexOf(e.presence_ref)<0}),e[l]=k,S(l,k,_),0===k.length&&delete e[l]}}),e}},{key:"map",value:function(e,l){return Object.getOwnPropertyNames(e).map(function(_){return l(_,e[_])})}},{key:"transformState",value:function(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce(function(l,_){var S=e[_];return l[_]="metas"in S?S.metas.map(function(e){return e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e}):S,l},{})}},{key:"cloneDeep",value:function(e){return JSON.parse(JSON.stringify(e))}}])}();!function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"}(Ka||(Ka={})),function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"}(Ya||(Ya={})),function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"}(Qa||(Qa={}));var Za=function(){function RealtimeChannel(e){var l,_,S=this,k=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}},E=arguments.length>2?arguments[2]:void 0;if(_classCallCheck3(this,RealtimeChannel),this.topic=e,this.params=k,this.socket=E,this.bindings={},this.state=Da.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},k.config),this.timeout=this.socket.timeout,this.joinPush=new Xa(this,Oa.join,this.params,this.timeout),this.rejoinTimer=new Wa(function(){return S._rejoinUntilConnected()},this.socket.reconnectAfterMs),this.joinPush.receive("ok",function(){S.state=Da.joined,S.rejoinTimer.reset(),S.pushBuffer.forEach(function(e){return e.send()}),S.pushBuffer=[]}),this._onClose(function(){S.rejoinTimer.reset(),S.socket.log("channel","close ".concat(S.topic," ").concat(S._joinRef())),S.state=Da.closed,S.socket._remove(S)}),this._onError(function(e){S._isLeaving()||S._isClosed()||(S.socket.log("channel","error ".concat(S.topic),e),S.state=Da.errored,S.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",function(){S._isJoining()&&(S.socket.log("channel","timeout ".concat(S.topic),S.joinPush.timeout),S.state=Da.errored,S.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",function(e){S._isLeaving()||S._isClosed()||(S.socket.log("channel","error ".concat(S.topic),e),S.state=Da.errored,S.rejoinTimer.scheduleTimeout())}),this._on(Oa.reply,{},function(e,l){S._trigger(S._replyEventName(l),e)}),this.presence=new Ja(this),this.broadcastEndpointURL=httpEndpointURL(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(null===(_=null===(l=this.params.config)||void 0===l?void 0:l.broadcast)||void 0===_?void 0:_.replay))throw"tried to use replay on public channel '".concat(this.topic,"'. It must be a private channel.")}return _createClass3(RealtimeChannel,[{key:"subscribe",value:function(e){var l,_,S,k=this,E=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.timeout;if(this.socket.isConnected()||this.socket.connect(),this.state==Da.closed){var T=this.params.config,M=T.broadcast,R=T.presence,I=T.private,D=null!==(_=null===(l=this.bindings.postgres_changes)||void 0===l?void 0:l.map(function(e){return e.filter}))&&void 0!==_?_:[],O=!!this.bindings[Ya.PRESENCE]&&this.bindings[Ya.PRESENCE].length>0||!0===(null===(S=this.params.config.presence)||void 0===S?void 0:S.enabled),L={},U={broadcast:M,presence:Object.assign(Object.assign({},R),{enabled:O}),postgres_changes:D,private:I};this.socket.accessTokenValue&&(L.access_token=this.socket.accessTokenValue),this._onError(function(l){return null==e?void 0:e(Qa.CHANNEL_ERROR,l)}),this._onClose(function(){return null==e?void 0:e(Qa.CLOSED)}),this.updateJoinPayload(Object.assign({config:U},L)),this.joinedOnce=!0,this._rejoin(E),this.joinPush.receive("ok",function(){var l=_asyncToGenerator(_regenerator().m(function _callee29(l){var _,S,E,T,M,R,I,D,O,L,U,B,z;return _regenerator().w(function(G){for(;;)switch(G.n){case 0:if(_=l.postgres_changes,k.socket.setAuth(),void 0!==_){G.n=1;break}return null==e||e(Qa.SUBSCRIBED),G.a(2);case 1:E=k.bindings.postgres_changes,T=null!==(S=null==E?void 0:E.length)&&void 0!==S?S:0,M=[],R=0;case 2:if(!(R<T)){G.n=5;break}if(I=E[R],D=I.filter,O=D.event,L=D.schema,U=D.table,B=D.filter,!(z=_&&_[R])||z.event!==O||z.schema!==L||z.table!==U||z.filter!==B){G.n=3;break}M.push(Object.assign(Object.assign({},I),{id:z.id})),G.n=4;break;case 3:return k.unsubscribe(),k.state=Da.errored,null==e||e(Qa.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes")),G.a(2);case 4:R++,G.n=2;break;case 5:return k.bindings.postgres_changes=M,e&&e(Qa.SUBSCRIBED),G.a(2);case 6:return G.a(2)}},_callee29)}));return function(e){return l.apply(this,arguments)}}()).receive("error",function(l){k.state=Da.errored,null==e||e(Qa.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(l).join(", ")||"error")))}).receive("timeout",function(){null==e||e(Qa.TIMED_OUT)})}return this}},{key:"presenceState",value:function(){return this.presence.state}},{key:"track",value:(S=_asyncToGenerator(_regenerator().m(function _callee30(e){var l,_=arguments;return _regenerator().w(function(S){for(;;)switch(S.n){case 0:return l=_.length>1&&void 0!==_[1]?_[1]:{},S.n=1,this.send({type:"presence",event:"track",payload:e},l.timeout||this.timeout);case 1:return S.a(2,S.v)}},_callee30,this)})),function(e){return S.apply(this,arguments)})},{key:"untrack",value:(_=_asyncToGenerator(_regenerator().m(function _callee31(){var e,l=arguments;return _regenerator().w(function(_){for(;;)switch(_.n){case 0:return e=l.length>0&&void 0!==l[0]?l[0]:{},_.n=1,this.send({type:"presence",event:"untrack"},e);case 1:return _.a(2,_.v)}},_callee31,this)})),function(){return _.apply(this,arguments)})},{key:"on",value:function(e,l,_){var S=this;return this.state===Da.joined&&e===Ya.PRESENCE&&(this.socket.log("channel","resubscribe to ".concat(this.topic," due to change in presence callbacks on joined channel")),this.unsubscribe().then(function(){return S.subscribe()})),this._on(e,l,_)}},{key:"send",value:(l=_asyncToGenerator(_regenerator().m(function _callee32(e){var l,_,S,k,E,T,M,R,I=this,D=arguments;return _regenerator().w(function(O){for(;;)switch(O.p=O.n){case 0:if(l=D.length>1&&void 0!==D[1]?D[1]:{},this._canPush()||"broadcast"!==e.type){O.n=7;break}return k=e.event,E=e.payload,T=this.socket.accessTokenValue?"Bearer ".concat(this.socket.accessTokenValue):"",M={method:"POST",headers:{Authorization:T,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:k,payload:E,private:this.private}]})},O.p=1,O.n=2,this._fetchWithTimeout(this.broadcastEndpointURL,M,null!==(_=l.timeout)&&void 0!==_?_:this.timeout);case 2:return R=O.v,O.n=3,null===(S=R.body)||void 0===S?void 0:S.cancel();case 3:return O.a(2,R.ok?"ok":"error");case 4:if(O.p=4,"AbortError"!==O.v.name){O.n=5;break}return O.a(2,"timed out");case 5:return O.a(2,"error");case 6:O.n=8;break;case 7:return O.a(2,new Promise(function(_){var S,k,E,T=I._push(e.type,e,l.timeout||I.timeout);"broadcast"!==e.type||(null===(E=null===(k=null===(S=I.params)||void 0===S?void 0:S.config)||void 0===k?void 0:k.broadcast)||void 0===E?void 0:E.ack)||_("ok"),T.receive("ok",function(){return _("ok")}),T.receive("error",function(){return _("error")}),T.receive("timeout",function(){return _("timed out")})}));case 8:return O.a(2)}},_callee32,this,[[1,4]])})),function(e){return l.apply(this,arguments)})},{key:"updateJoinPayload",value:function(e){this.joinPush.updatePayload(e)}},{key:"unsubscribe",value:function(){var e=this,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this.state=Da.leaving;var onClose=function(){e.socket.log("channel","leave ".concat(e.topic)),e._trigger(Oa.close,"leave",e._joinRef())};this.joinPush.destroy();var _=null;return new Promise(function(S){(_=new Xa(e,Oa.leave,{},l)).receive("ok",function(){onClose(),S("ok")}).receive("timeout",function(){onClose(),S("timed out")}).receive("error",function(){S("error")}),_.send(),e._canPush()||_.trigger("ok",{})}).finally(function(){null==_||_.destroy()})}},{key:"teardown",value:function(){this.pushBuffer.forEach(function(e){return e.destroy()}),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Da.closed,this.bindings={}}},{key:"_fetchWithTimeout",value:(e=_asyncToGenerator(_regenerator().m(function _callee33(e,l,_){var S,k,E;return _regenerator().w(function(T){for(;;)switch(T.n){case 0:return S=new AbortController,k=setTimeout(function(){return S.abort()},_),T.n=1,this.socket.fetch(e,Object.assign(Object.assign({},l),{signal:S.signal}));case 1:return E=T.v,clearTimeout(k),T.a(2,E)}},_callee33,this)})),function(l,_,S){return e.apply(this,arguments)})},{key:"_push",value:function(e,l){var _=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.timeout;if(!this.joinedOnce)throw"tried to push '".concat(e,"' to '").concat(this.topic,"' before joining. Use channel.subscribe() before pushing events");var S=new Xa(this,e,l,_);return this._canPush()?S.send():this._addToPushBuffer(S),S}},{key:"_addToPushBuffer",value:function(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>100){var l=this.pushBuffer.shift();l&&(l.destroy(),this.socket.log("channel","discarded push due to buffer overflow: ".concat(l.event),l.payload))}}},{key:"_onMessage",value:function(e,l,_){return l}},{key:"_isMember",value:function(e){return this.topic===e}},{key:"_joinRef",value:function(){return this.joinPush.ref}},{key:"_trigger",value:function(e,l,_){var S,k,E=this,T=e.toLocaleLowerCase(),M=Oa,R=M.close,I=M.error,D=M.leave,O=M.join;if(!(_&&[R,I,D,O].indexOf(T)>=0&&_!==this._joinRef())){var L=this._onMessage(T,l,_);if(l&&!L)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(T)?null===(S=this.bindings.postgres_changes)||void 0===S||S.filter(function(e){var l,_,S;return"*"===(null===(l=e.filter)||void 0===l?void 0:l.event)||(null===(S=null===(_=e.filter)||void 0===_?void 0:_.event)||void 0===S?void 0:S.toLocaleLowerCase())===T}).map(function(e){return e.callback(L,_)}):null===(k=this.bindings[T])||void 0===k||k.filter(function(e){var _,S,k,E,M,R;if(["broadcast","presence","postgres_changes"].includes(T)){if("id"in e){var I=e.id,D=null===(_=e.filter)||void 0===_?void 0:_.event;return I&&(null===(S=l.ids)||void 0===S?void 0:S.includes(I))&&("*"===D||(null==D?void 0:D.toLocaleLowerCase())===(null===(k=l.data)||void 0===k?void 0:k.type.toLocaleLowerCase()))}var O=null===(M=null===(E=null==e?void 0:e.filter)||void 0===E?void 0:E.event)||void 0===M?void 0:M.toLocaleLowerCase();return"*"===O||O===(null===(R=null==l?void 0:l.event)||void 0===R?void 0:R.toLocaleLowerCase())}return e.type.toLocaleLowerCase()===T}).map(function(e){if("object"===_typeof3(L)&&"ids"in L){var l=L.data,S={schema:l.schema,table:l.table,commit_timestamp:l.commit_timestamp,eventType:l.type,new:{},old:{},errors:l.errors};L=Object.assign(Object.assign({},S),E._getPayloadRecords(l))}e.callback(L,_)})}}},{key:"_isClosed",value:function(){return this.state===Da.closed}},{key:"_isJoined",value:function(){return this.state===Da.joined}},{key:"_isJoining",value:function(){return this.state===Da.joining}},{key:"_isLeaving",value:function(){return this.state===Da.leaving}},{key:"_replyEventName",value:function(e){return"chan_reply_".concat(e)}},{key:"_on",value:function(e,l,_){var S=e.toLocaleLowerCase(),k={type:S,filter:l,callback:_};return this.bindings[S]?this.bindings[S].push(k):this.bindings[S]=[k],this}},{key:"_off",value:function(e,l){var _=e.toLocaleLowerCase();return this.bindings[_]&&(this.bindings[_]=this.bindings[_].filter(function(e){var S;return!((null===(S=e.type)||void 0===S?void 0:S.toLocaleLowerCase())===_&&RealtimeChannel.isEqual(e.filter,l))})),this}},{key:"_rejoinUntilConnected",value:function(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}},{key:"_onClose",value:function(e){this._on(Oa.close,{},e)}},{key:"_onError",value:function(e){this._on(Oa.error,{},function(l){return e(l)})}},{key:"_canPush",value:function(){return this.socket.isConnected()&&this._isJoined()}},{key:"_rejoin",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Da.joining,this.joinPush.resend(e))}},{key:"_getPayloadRecords",value:function(e){var l={new:{},old:{}};return"INSERT"!==e.type&&"UPDATE"!==e.type||(l.new=convertChangeData(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(l.old=convertChangeData(e.columns,e.old_record)),l}}],[{key:"isEqual",value:function(e,l){if(Object.keys(e).length!==Object.keys(l).length)return!1;for(var _ in e)if(e[_]!==l[_])return!1;return!0}}]);var e,l,_,S}(),noop$2=function(){},$a=25e3,eo=10,to=100,ro=[1e3,2e3,5e3,1e4],no=function(){return _createClass3(function RealtimeClient(e,l){var _;if(_classCallCheck3(this,RealtimeClient),this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=ja,this.transport=null,this.heartbeatIntervalMs=$a,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=noop$2,this.ref=0,this.reconnectTimer=null,this.logger=noop$2,this.conn=null,this.sendBuffer=[],this.serializer=new Va,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=function(e){var l;return l=e||("undefined"==typeof fetch?function(){for(var e=arguments.length,l=new Array(e),_=0;_<e;_++)l[_]=arguments[_];return z(_asyncToGenerator(_regenerator().m(function _callee34(){var e,l;return _regenerator().w(function(_){for(;;)switch(_.n){case 0:return _.n=1,Promise.resolve().then(function(){return Ma});case 1:return e=_.v,l=e.default,_.a(2,{default:l})}},_callee34)})),void 0).then(function(e){return e.default.apply(void 0,l)}).catch(function(e){throw new Error("Failed to load @supabase/node-fetch: ".concat(e.message,". ")+"This is required for HTTP requests in Node.js environments without native fetch.")})}:fetch),function(){return l.apply(void 0,arguments)}},!(null===(_=null==l?void 0:l.params)||void 0===_?void 0:_.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=l.params.apikey,this.endPoint="".concat(e,"/").concat(La.websocket),this.httpEndpoint=httpEndpointURL(e),this._initializeOptions(l),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(null==l?void 0:l.fetch)},[{key:"connect",value:function(){if(!(this.isConnecting()||this.isDisconnecting()||null!==this.conn&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=za.createWebSocket(this.endpointURL())}catch(l){this._setConnectionState("disconnected");var e=l.message;if(e.includes("Node.js"))throw new Error("".concat(e,"\n\n")+'To use Realtime in Node.js, you need to provide a WebSocket implementation:\n\nOption 1: Use Node.js 22+ which has native WebSocket support\nOption 2: Install and provide the "ws" package:\n\n  npm install ws\n\n  import ws from "ws"\n  const client = new RealtimeClient(url, {\n    ...options,\n    transport: ws\n  })');throw new Error("WebSocket not available: ".concat(e))}this._setupConnectionHandlers()}}},{key:"endpointURL",value:function(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}},{key:"disconnect",value:function(e,l){var _=this;if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){var S=setTimeout(function(){_._setConnectionState("disconnected")},100);this.conn.onclose=function(){clearTimeout(S),_._setConnectionState("disconnected")},e?this.conn.close(e,null!=l?l:""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}},{key:"getChannels",value:function(){return this.channels}},{key:"removeChannel",value:(E=_asyncToGenerator(_regenerator().m(function _callee35(e){var l;return _regenerator().w(function(_){for(;;)switch(_.n){case 0:return _.n=1,e.unsubscribe();case 1:return l=_.v,0===this.channels.length&&this.disconnect(),_.a(2,l)}},_callee35,this)})),function(e){return E.apply(this,arguments)})},{key:"removeAllChannels",value:(k=_asyncToGenerator(_regenerator().m(function _callee36(){var e;return _regenerator().w(function(l){for(;;)switch(l.n){case 0:return l.n=1,Promise.all(this.channels.map(function(e){return e.unsubscribe()}));case 1:return e=l.v,this.channels=[],this.disconnect(),l.a(2,e)}},_callee36,this)})),function(){return k.apply(this,arguments)})},{key:"log",value:function(e,l,_){this.logger(e,l,_)}},{key:"connectionState",value:function(){switch(this.conn&&this.conn.readyState){case Pa.connecting:return Ua.Connecting;case Pa.open:return Ua.Open;case Pa.closing:return Ua.Closing;default:return Ua.Closed}}},{key:"isConnected",value:function(){return this.connectionState()===Ua.Open}},{key:"isConnecting",value:function(){return"connecting"===this._connectionState}},{key:"isDisconnecting",value:function(){return"disconnecting"===this._connectionState}},{key:"channel",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}},_="realtime:".concat(e),S=this.getChannels().find(function(e){return e.topic===_});if(S)return S;var k=new Za("realtime:".concat(e),l,this);return this.channels.push(k),k}},{key:"push",value:function(e){var l=this,_=e.topic,S=e.event,k=e.payload,E=e.ref,callback=function(){l.encode(e,function(e){var _;null===(_=l.conn)||void 0===_||_.send(e)})};this.log("push","".concat(_," ").concat(S," (").concat(E,")"),k),this.isConnected()?callback():this.sendBuffer.push(callback)}},{key:"setAuth",value:(S=_asyncToGenerator(_regenerator().m(function _callee37(){var e,l=arguments;return _regenerator().w(function(_){for(;;)switch(_.p=_.n){case 0:return e=l.length>0&&void 0!==l[0]?l[0]:null,this._authPromise=this._performAuth(e),_.p=1,_.n=2,this._authPromise;case 2:return _.p=2,this._authPromise=null,_.f(2);case 3:return _.a(2)}},_callee37,this,[[1,,2,3]])})),function(){return S.apply(this,arguments)})},{key:"sendHeartbeat",value:(_=_asyncToGenerator(_regenerator().m(function _callee38(){var e,l=this;return _regenerator().w(function(_){for(;;)switch(_.n){case 0:if(this.isConnected()){_.n=1;break}try{this.heartbeatCallback("disconnected")}catch(ta){this.log("error","error in heartbeat callback",ta)}return _.a(2);case 1:if(!this.pendingHeartbeatRef){_.n=2;break}this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(ta){this.log("error","error in heartbeat callback",ta)}return this._wasManualDisconnect=!1,null===(e=this.conn)||void 0===e||e.close(1e3,"heartbeat timeout"),setTimeout(function(){var e;l.isConnected()||null===(e=l.reconnectTimer)||void 0===e||e.scheduleTimeout()},to),_.a(2);case 2:this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(ta){this.log("error","error in heartbeat callback",ta)}this._setAuthSafely("heartbeat");case 3:return _.a(2)}},_callee38,this)})),function(){return _.apply(this,arguments)})},{key:"onHeartbeat",value:function(e){this.heartbeatCallback=e}},{key:"flushSendBuffer",value:function(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(function(e){return e()}),this.sendBuffer=[])}},{key:"_makeRef",value:function(){var e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}},{key:"_leaveOpenTopic",value:function(e){var l=this.channels.find(function(l){return l.topic===e&&(l._isJoined()||l._isJoining())});l&&(this.log("transport",'leaving duplicate topic "'.concat(e,'"')),l.unsubscribe())}},{key:"_remove",value:function(e){this.channels=this.channels.filter(function(l){return l.topic!==e.topic})}},{key:"_onConnMessage",value:function(e){var l=this;this.decode(e.data,function(e){if("phoenix"===e.topic&&"phx_reply"===e.event)try{l.heartbeatCallback("ok"===e.payload.status?"ok":"error")}catch(ta){l.log("error","error in heartbeat callback",ta)}e.ref&&e.ref===l.pendingHeartbeatRef&&(l.pendingHeartbeatRef=null);var _=e.topic,S=e.event,k=e.payload,E=e.ref,T=E?"(".concat(E,")"):"",M=k.status||"";l.log("receive","".concat(M," ").concat(_," ").concat(S," ").concat(T).trim(),k),l.channels.filter(function(e){return e._isMember(_)}).forEach(function(e){return e._trigger(S,k,E)}),l._triggerStateCallbacks("message",e)})}},{key:"_clearTimer",value:function(e){var l;"heartbeat"===e&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):"reconnect"===e&&(null===(l=this.reconnectTimer)||void 0===l||l.reset())}},{key:"_clearAllTimers",value:function(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}},{key:"_setupConnectionHandlers",value:function(){var e=this;this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=function(){return e._onConnOpen()},this.conn.onerror=function(l){return e._onConnError(l)},this.conn.onmessage=function(l){return e._onConnMessage(l)},this.conn.onclose=function(l){return e._onConnClose(l)})}},{key:"_teardownConnection",value:function(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(function(e){return e.teardown()})}},{key:"_onConnOpen",value:function(){this._setConnectionState("connected"),this.log("transport","connected to ".concat(this.endpointURL())),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}},{key:"_startHeartbeat",value:function(){var e=this;this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(function(){return e.sendHeartbeat()},this.heartbeatIntervalMs)}},{key:"_startWorkerHeartbeat",value:function(){var e=this;this.workerUrl?this.log("worker","starting worker for from ".concat(this.workerUrl)):this.log("worker","starting default worker");var l=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(l),this.workerRef.onerror=function(l){e.log("worker","worker error",l.message),e.workerRef.terminate()},this.workerRef.onmessage=function(l){"keepAlive"===l.data.event&&e.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}},{key:"_onConnClose",value:function(e){var l;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||null===(l=this.reconnectTimer)||void 0===l||l.scheduleTimeout(),this._triggerStateCallbacks("close",e)}},{key:"_onConnError",value:function(e){this._setConnectionState("disconnected"),this.log("transport","".concat(e)),this._triggerChanError(),this._triggerStateCallbacks("error",e)}},{key:"_triggerChanError",value:function(){this.channels.forEach(function(e){return e._trigger(Oa.error)})}},{key:"_appendParams",value:function(e,l){if(0===Object.keys(l).length)return e;var _=e.match(/\?/)?"&":"?",S=new URLSearchParams(l);return"".concat(e).concat(_).concat(S)}},{key:"_workerObjectUrl",value:function(e){var l;if(e)l=e;else{var _=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});l=URL.createObjectURL(_)}return l}},{key:"_setConnectionState",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._connectionState=e,"connecting"===e?this._wasManualDisconnect=!1:"disconnecting"===e&&(this._wasManualDisconnect=l)}},{key:"_performAuth",value:(l=_asyncToGenerator(_regenerator().m(function _callee39(){var e,l,_=arguments;return _regenerator().w(function(S){for(;;)switch(S.n){case 0:if(!(e=_.length>0&&void 0!==_[0]?_[0]:null)){S.n=1;break}l=e,S.n=4;break;case 1:if(!this.accessToken){S.n=3;break}return S.n=2,this.accessToken();case 2:l=S.v,S.n=4;break;case 3:l=this.accessTokenValue;case 4:this.accessTokenValue!=l&&(this.accessTokenValue=l,this.channels.forEach(function(e){var _={access_token:l,version:Ga};l&&e.updateJoinPayload(_),e.joinedOnce&&e._isJoined()&&e._push(Oa.access_token,{access_token:l})}));case 5:return S.a(2)}},_callee39,this)})),function(){return l.apply(this,arguments)})},{key:"_waitForAuthIfNeeded",value:(e=_asyncToGenerator(_regenerator().m(function _callee40(){return _regenerator().w(function(e){for(;;)switch(e.n){case 0:if(!this._authPromise){e.n=1;break}return e.n=1,this._authPromise;case 1:return e.a(2)}},_callee40,this)})),function(){return e.apply(this,arguments)})},{key:"_setAuthSafely",value:function(){var e=this,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"general";this.setAuth().catch(function(_){e.log("error","error setting auth in ".concat(l),_)})}},{key:"_triggerStateCallbacks",value:function(e,l){var _=this;try{this.stateChangeCallbacks[e].forEach(function(S){try{S(l)}catch(ta){_.log("error","error in ".concat(e," callback"),ta)}})}catch(ta){this.log("error","error triggering ".concat(e," callbacks"),ta)}}},{key:"_setupReconnectionTimer",value:function(){var e=this;this.reconnectTimer=new Wa(_asyncToGenerator(_regenerator().m(function _callee42(){return _regenerator().w(function(l){for(;;)switch(l.n){case 0:setTimeout(_asyncToGenerator(_regenerator().m(function _callee41(){return _regenerator().w(function(l){for(;;)switch(l.n){case 0:return l.n=1,e._waitForAuthIfNeeded();case 1:e.isConnected()||e.connect();case 2:return l.a(2)}},_callee41)})),eo);case 1:return l.a(2)}},_callee42)})),this.reconnectAfterMs)}},{key:"_initializeOptions",value:function(e){var l,_,S,k,E,T,M,R,I;if(this.transport=null!==(l=null==e?void 0:e.transport)&&void 0!==l?l:null,this.timeout=null!==(_=null==e?void 0:e.timeout)&&void 0!==_?_:ja,this.heartbeatIntervalMs=null!==(S=null==e?void 0:e.heartbeatIntervalMs)&&void 0!==S?S:$a,this.worker=null!==(k=null==e?void 0:e.worker)&&void 0!==k&&k,this.accessToken=null!==(E=null==e?void 0:e.accessToken)&&void 0!==E?E:null,this.heartbeatCallback=null!==(T=null==e?void 0:e.heartbeatCallback)&&void 0!==T?T:noop$2,(null==e?void 0:e.params)&&(this.params=e.params),(null==e?void 0:e.logger)&&(this.logger=e.logger),((null==e?void 0:e.logLevel)||(null==e?void 0:e.log_level))&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=null!==(M=null==e?void 0:e.reconnectAfterMs)&&void 0!==M?M:function(e){return ro[e-1]||1e4},this.encode=null!==(R=null==e?void 0:e.encode)&&void 0!==R?R:function(e,l){return l(JSON.stringify(e))},this.decode=null!==(I=null==e?void 0:e.decode)&&void 0!==I?I:this.serializer.decode.bind(this.serializer),this.worker){if("undefined"!=typeof window&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=null==e?void 0:e.workerUrl}}}]);var e,l,_,S,k,E}(),io=function(e){function StorageError(e){var l;return _classCallCheck3(this,StorageError),(l=_callSuper(this,StorageError,[e])).__isStorageError=!0,l.name="StorageError",l}return _inherits(StorageError,e),_createClass3(StorageError)}(_wrapNativeSuper(Error));function isStorageError(e){return"object"===_typeof3(e)&&null!==e&&"__isStorageError"in e}var ao=function(e){function StorageApiError(e,l,_){var S;return _classCallCheck3(this,StorageApiError),(S=_callSuper(this,StorageApiError,[e])).name="StorageApiError",S.status=l,S.statusCode=_,S}return _inherits(StorageApiError,e),_createClass3(StorageApiError,[{key:"toJSON",value:function(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}])}(io),oo=function(e){function StorageUnknownError(e,l){var _;return _classCallCheck3(this,StorageUnknownError),(_=_callSuper(this,StorageUnknownError,[e])).name="StorageUnknownError",_.originalError=l,_}return _inherits(StorageUnknownError,e),_createClass3(StorageUnknownError)}(io),__awaiter$8=function(e,l,_,S){return new(_||(_=Promise))(function(k,E){function fulfilled(e){try{step(S.next(e))}catch(ta){E(ta)}}function rejected(e){try{step(S.throw(e))}catch(ta){E(ta)}}function step(e){var l;e.done?k(e.value):(l=e.value,l instanceof _?l:new _(function(e){e(l)})).then(fulfilled,rejected)}step((S=S.apply(e,l||[])).next())})},resolveFetch$2=function(e){var l;return l=e||("undefined"==typeof fetch?function(){for(var e=arguments.length,l=new Array(e),_=0;_<e;_++)l[_]=arguments[_];return z(_asyncToGenerator(_regenerator().m(function _callee43(){var e,l;return _regenerator().w(function(_){for(;;)switch(_.n){case 0:return _.n=1,Promise.resolve().then(function(){return Ma});case 1:return e=_.v,l=e.default,_.a(2,{default:l})}},_callee43)})),void 0).then(function(e){return e.default.apply(void 0,l)})}:fetch),function(){return l.apply(void 0,arguments)}},resolveResponse=function(){return __awaiter$8(void 0,void 0,void 0,_regenerator().m(function _callee44(){return _regenerator().w(function(e){for(;;)switch(e.n){case 0:if("undefined"!=typeof Response){e.n=2;break}return e.n=1,z(function(){return Promise.resolve().then(function(){return Ma})},void 0);case 1:return e.a(2,e.v.Response);case 2:return e.a(2,Response)}},_callee44)}))},_recursiveToCamel=function(e){if(Array.isArray(e))return e.map(function(e){return _recursiveToCamel(e)});if("function"==typeof e||e!==Object(e))return e;var l={};return Object.entries(e).forEach(function(e){var _=_slicedToArray(e,2),S=_[0],k=_[1],E=S.replace(/([-_][a-z])/gi,function(e){return e.toUpperCase().replace(/[-_]/g,"")});l[E]=_recursiveToCamel(k)}),l},__awaiter$7=function(e,l,_,S){return new(_||(_=Promise))(function(k,E){function fulfilled(e){try{step(S.next(e))}catch(ta){E(ta)}}function rejected(e){try{step(S.throw(e))}catch(ta){E(ta)}}function step(e){var l;e.done?k(e.value):(l=e.value,l instanceof _?l:new _(function(e){e(l)})).then(fulfilled,rejected)}step((S=S.apply(e,l||[])).next())})},_getErrorMessage$1=function(e){return e.msg||e.message||e.error_description||e.error||JSON.stringify(e)},handleError$1=function(e,l,_){return __awaiter$7(void 0,void 0,void 0,_regenerator().m(function _callee45(){var S;return _regenerator().w(function(k){for(;;)switch(k.n){case 0:return k.n=1,resolveResponse();case 1:S=k.v,e instanceof S&&!(null==_?void 0:_.noResolveJson)?e.json().then(function(_){var S=e.status||500,k=(null==_?void 0:_.statusCode)||S+"";l(new ao(_getErrorMessage$1(_),S,k))}).catch(function(e){l(new oo(_getErrorMessage$1(e),e))}):l(new oo(_getErrorMessage$1(e),e));case 2:return k.a(2)}},_callee45)}))},_getRequestParams$1=function(e,l,_,S){var k={method:e,headers:(null==l?void 0:l.headers)||{}};return"GET"!==e&&S?(!function(e){if("object"!==_typeof3(e)||null===e)return!1;var l=Object.getPrototypeOf(e);return!(null!==l&&l!==Object.prototype&&null!==Object.getPrototypeOf(l)||Symbol.toStringTag in e||Symbol.iterator in e)}(S)?k.body=S:(k.headers=Object.assign({"Content-Type":"application/json"},null==l?void 0:l.headers),k.body=JSON.stringify(S)),(null==l?void 0:l.duplex)&&(k.duplex=l.duplex),Object.assign(Object.assign({},k),_)):k};function _handleRequest$1(e,l,_,S,k,E){return __awaiter$7(this,void 0,void 0,_regenerator().m(function _callee46(){return _regenerator().w(function(T){for(;;)if(0===T.n)return T.a(2,new Promise(function(T,M){e(_,_getRequestParams$1(l,S,k,E)).then(function(e){if(!e.ok)throw e;return(null==S?void 0:S.noResolveJson)?e:e.json()}).then(function(e){return T(e)}).catch(function(e){return handleError$1(e,M,S)})}))},_callee46)}))}function get(e,l,_,S){return __awaiter$7(this,void 0,void 0,_regenerator().m(function _callee47(){return _regenerator().w(function(k){for(;;)if(0===k.n)return k.a(2,_handleRequest$1(e,"GET",l,_,S))},_callee47)}))}function post(e,l,_,S,k){return __awaiter$7(this,void 0,void 0,_regenerator().m(function _callee48(){return _regenerator().w(function(E){for(;;)if(0===E.n)return E.a(2,_handleRequest$1(e,"POST",l,S,k,_))},_callee48)}))}function put(e,l,_,S,k){return __awaiter$7(this,void 0,void 0,_regenerator().m(function _callee49(){return _regenerator().w(function(E){for(;;)if(0===E.n)return E.a(2,_handleRequest$1(e,"PUT",l,S,k,_))},_callee49)}))}function head(e,l,_,S){return __awaiter$7(this,void 0,void 0,_regenerator().m(function _callee50(){return _regenerator().w(function(k){for(;;)if(0===k.n)return k.a(2,_handleRequest$1(e,"HEAD",l,Object.assign(Object.assign({},_),{noResolveJson:!0}),S))},_callee50)}))}function _remove2(e,l,_,S,k){return __awaiter$7(this,void 0,void 0,_regenerator().m(function _callee51(){return _regenerator().w(function(E){for(;;)if(0===E.n)return E.a(2,_handleRequest$1(e,"DELETE",l,S,k,_))},_callee51)}))}var __awaiter$6=function(e,l,_,S){return new(_||(_=Promise))(function(k,E){function fulfilled(e){try{step(S.next(e))}catch(ta){E(ta)}}function rejected(e){try{step(S.throw(e))}catch(ta){E(ta)}}function step(e){var l;e.done?k(e.value):(l=e.value,l instanceof _?l:new _(function(e){e(l)})).then(fulfilled,rejected)}step((S=S.apply(e,l||[])).next())})},so=function(){return _createClass3(function StreamDownloadBuilder(e,l){_classCallCheck3(this,StreamDownloadBuilder),this.downloadFn=e,this.shouldThrowOnError=l},[{key:"then",value:function(e,l){return this.execute().then(e,l)}},{key:"execute",value:function(){return __awaiter$6(this,void 0,void 0,_regenerator().m(function _callee52(){var e,l;return _regenerator().w(function(_){for(;;)switch(_.p=_.n){case 0:return _.p=0,_.n=1,this.downloadFn();case 1:return e=_.v,_.a(2,{data:e.body,error:null});case 2:if(_.p=2,l=_.v,!this.shouldThrowOnError){_.n=3;break}throw l;case 3:if(!isStorageError(l)){_.n=4;break}return _.a(2,{data:null,error:l});case 4:throw l;case 5:return _.a(2)}},_callee52,this,[[0,2]])}))}}])}(),__awaiter$5=function(e,l,_,S){return new(_||(_=Promise))(function(k,E){function fulfilled(e){try{step(S.next(e))}catch(ta){E(ta)}}function rejected(e){try{step(S.throw(e))}catch(ta){E(ta)}}function step(e){var l;e.done?k(e.value):(l=e.value,l instanceof _?l:new _(function(e){e(l)})).then(fulfilled,rejected)}step((S=S.apply(e,l||[])).next())})},uo=function(){return _createClass3(function BlobDownloadBuilder(e,l){_classCallCheck3(this,BlobDownloadBuilder),this.downloadFn=e,this.shouldThrowOnError=l},[{key:"asStream",value:function(){return new so(this.downloadFn,this.shouldThrowOnError)}},{key:"then",value:function(e,l){return this.execute().then(e,l)}},{key:"execute",value:function(){return __awaiter$5(this,void 0,void 0,_regenerator().m(function _callee53(){var e,l,_;return _regenerator().w(function(S){for(;;)switch(S.p=S.n){case 0:return S.p=0,S.n=1,this.downloadFn();case 1:return e=S.v,S.n=2,e.blob();case 2:return l=S.v,S.a(2,{data:l,error:null});case 3:if(S.p=3,_=S.v,!this.shouldThrowOnError){S.n=4;break}throw _;case 4:if(!isStorageError(_)){S.n=5;break}return S.a(2,{data:null,error:_});case 5:throw _;case 6:return S.a(2)}},_callee53,this,[[0,3]])}))}}])}(),__awaiter$4=function(e,l,_,S){return new(_||(_=Promise))(function(k,E){function fulfilled(e){try{step(S.next(e))}catch(ta){E(ta)}}function rejected(e){try{step(S.throw(e))}catch(ta){E(ta)}}function step(e){var l;e.done?k(e.value):(l=e.value,l instanceof _?l:new _(function(e){e(l)})).then(fulfilled,rejected)}step((S=S.apply(e,l||[])).next())})},lo={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},co={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1},ho=function(){return _createClass3(function StorageFileApi(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_=arguments.length>2?arguments[2]:void 0,S=arguments.length>3?arguments[3]:void 0;_classCallCheck3(this,StorageFileApi),this.shouldThrowOnError=!1,this.url=e,this.headers=l,this.bucketId=_,this.fetch=resolveFetch$2(S)},[{key:"throwOnError",value:function(){return this.shouldThrowOnError=!0,this}},{key:"uploadOrUpdate",value:function(e,l,_,S){return __awaiter$4(this,void 0,void 0,_regenerator().m(function _callee54(){var k,E,T,M,R,I,D,O;return _regenerator().w(function(L){for(;;)switch(L.p=L.n){case 0:return L.p=0,E=Object.assign(Object.assign({},co),S),T=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(E.upsert)}),M=E.metadata,"undefined"!=typeof Blob&&_ instanceof Blob?((k=new FormData).append("cacheControl",E.cacheControl),M&&k.append("metadata",this.encodeMetadata(M)),k.append("",_)):"undefined"!=typeof FormData&&_ instanceof FormData?((k=_).append("cacheControl",E.cacheControl),M&&k.append("metadata",this.encodeMetadata(M))):(k=_,T["cache-control"]="max-age=".concat(E.cacheControl),T["content-type"]=E.contentType,M&&(T["x-metadata"]=this.toBase64(this.encodeMetadata(M)))),(null==S?void 0:S.headers)&&(T=Object.assign(Object.assign({},T),S.headers)),R=this._removeEmptyFolders(l),I=this._getFinalPath(R),L.n=1,("PUT"==e?put:post)(this.fetch,"".concat(this.url,"/object/").concat(I),k,Object.assign({headers:T},(null==E?void 0:E.duplex)?{duplex:E.duplex}:{}));case 1:return D=L.v,L.a(2,{data:{path:R,id:D.Id,fullPath:D.Key},error:null});case 2:if(L.p=2,O=L.v,!this.shouldThrowOnError){L.n=3;break}throw O;case 3:if(!isStorageError(O)){L.n=4;break}return L.a(2,{data:null,error:O});case 4:throw O;case 5:return L.a(2)}},_callee54,this,[[0,2]])}))}},{key:"upload",value:function(e,l,_){return __awaiter$4(this,void 0,void 0,_regenerator().m(function _callee55(){return _regenerator().w(function(S){for(;;)if(0===S.n)return S.a(2,this.uploadOrUpdate("POST",e,l,_))},_callee55,this)}))}},{key:"uploadToSignedUrl",value:function(e,l,_,S){return __awaiter$4(this,void 0,void 0,_regenerator().m(function _callee56(){var k,E,T,M,R,I,D,O;return _regenerator().w(function(L){for(;;)switch(L.p=L.n){case 0:return k=this._removeEmptyFolders(e),E=this._getFinalPath(k),(T=new URL(this.url+"/object/upload/sign/".concat(E))).searchParams.set("token",l),L.p=1,R=Object.assign({upsert:co.upsert},S),I=Object.assign(Object.assign({},this.headers),{"x-upsert":String(R.upsert)}),"undefined"!=typeof Blob&&_ instanceof Blob?((M=new FormData).append("cacheControl",R.cacheControl),M.append("",_)):"undefined"!=typeof FormData&&_ instanceof FormData?(M=_).append("cacheControl",R.cacheControl):(M=_,I["cache-control"]="max-age=".concat(R.cacheControl),I["content-type"]=R.contentType),L.n=2,put(this.fetch,T.toString(),M,{headers:I});case 2:return D=L.v,L.a(2,{data:{path:k,fullPath:D.Key},error:null});case 3:if(L.p=3,O=L.v,!this.shouldThrowOnError){L.n=4;break}throw O;case 4:if(!isStorageError(O)){L.n=5;break}return L.a(2,{data:null,error:O});case 5:throw O;case 6:return L.a(2)}},_callee56,this,[[1,3]])}))}},{key:"createSignedUploadUrl",value:function(e,l){return __awaiter$4(this,void 0,void 0,_regenerator().m(function _callee57(){var _,S,k,E,T,M;return _regenerator().w(function(R){for(;;)switch(R.p=R.n){case 0:return R.p=0,_=this._getFinalPath(e),S=Object.assign({},this.headers),(null==l?void 0:l.upsert)&&(S["x-upsert"]="true"),R.n=1,post(this.fetch,"".concat(this.url,"/object/upload/sign/").concat(_),{},{headers:S});case 1:if(k=R.v,E=new URL(this.url+k.url),T=E.searchParams.get("token")){R.n=2;break}throw new io("No token returned by API");case 2:return R.a(2,{data:{signedUrl:E.toString(),path:e,token:T},error:null});case 3:if(R.p=3,M=R.v,!this.shouldThrowOnError){R.n=4;break}throw M;case 4:if(!isStorageError(M)){R.n=5;break}return R.a(2,{data:null,error:M});case 5:throw M;case 6:return R.a(2)}},_callee57,this,[[0,3]])}))}},{key:"update",value:function(e,l,_){return __awaiter$4(this,void 0,void 0,_regenerator().m(function _callee58(){return _regenerator().w(function(S){for(;;)if(0===S.n)return S.a(2,this.uploadOrUpdate("PUT",e,l,_))},_callee58,this)}))}},{key:"move",value:function(e,l,_){return __awaiter$4(this,void 0,void 0,_regenerator().m(function _callee59(){var S,k;return _regenerator().w(function(E){for(;;)switch(E.p=E.n){case 0:return E.p=0,E.n=1,post(this.fetch,"".concat(this.url,"/object/move"),{bucketId:this.bucketId,sourceKey:e,destinationKey:l,destinationBucket:null==_?void 0:_.destinationBucket},{headers:this.headers});case 1:return S=E.v,E.a(2,{data:S,error:null});case 2:if(E.p=2,k=E.v,!this.shouldThrowOnError){E.n=3;break}throw k;case 3:if(!isStorageError(k)){E.n=4;break}return E.a(2,{data:null,error:k});case 4:throw k;case 5:return E.a(2)}},_callee59,this,[[0,2]])}))}},{key:"copy",value:function(e,l,_){return __awaiter$4(this,void 0,void 0,_regenerator().m(function _callee60(){var S,k;return _regenerator().w(function(E){for(;;)switch(E.p=E.n){case 0:return E.p=0,E.n=1,post(this.fetch,"".concat(this.url,"/object/copy"),{bucketId:this.bucketId,sourceKey:e,destinationKey:l,destinationBucket:null==_?void 0:_.destinationBucket},{headers:this.headers});case 1:return S=E.v,E.a(2,{data:{path:S.Key},error:null});case 2:if(E.p=2,k=E.v,!this.shouldThrowOnError){E.n=3;break}throw k;case 3:if(!isStorageError(k)){E.n=4;break}return E.a(2,{data:null,error:k});case 4:throw k;case 5:return E.a(2)}},_callee60,this,[[0,2]])}))}},{key:"createSignedUrl",value:function(e,l,_){return __awaiter$4(this,void 0,void 0,_regenerator().m(function _callee61(){var S,k,E,T,M;return _regenerator().w(function(R){for(;;)switch(R.p=R.n){case 0:return R.p=0,S=this._getFinalPath(e),R.n=1,post(this.fetch,"".concat(this.url,"/object/sign/").concat(S),Object.assign({expiresIn:l},(null==_?void 0:_.transform)?{transform:_.transform}:{}),{headers:this.headers});case 1:return k=R.v,E=(null==_?void 0:_.download)?"&download=".concat(!0===_.download?"":_.download):"",T=encodeURI("".concat(this.url).concat(k.signedURL).concat(E)),k={signedUrl:T},R.a(2,{data:k,error:null});case 2:if(R.p=2,M=R.v,!this.shouldThrowOnError){R.n=3;break}throw M;case 3:if(!isStorageError(M)){R.n=4;break}return R.a(2,{data:null,error:M});case 4:throw M;case 5:return R.a(2)}},_callee61,this,[[0,2]])}))}},{key:"createSignedUrls",value:function(e,l,_){return __awaiter$4(this,void 0,void 0,_regenerator().m(function _callee62(){var S,k,E,T=this;return _regenerator().w(function(M){for(;;)switch(M.p=M.n){case 0:return M.p=0,M.n=1,post(this.fetch,"".concat(this.url,"/object/sign/").concat(this.bucketId),{expiresIn:l,paths:e},{headers:this.headers});case 1:return S=M.v,k=(null==_?void 0:_.download)?"&download=".concat(!0===_.download?"":_.download):"",M.a(2,{data:S.map(function(e){return Object.assign(Object.assign({},e),{signedUrl:e.signedURL?encodeURI("".concat(T.url).concat(e.signedURL).concat(k)):null})}),error:null});case 2:if(M.p=2,E=M.v,!this.shouldThrowOnError){M.n=3;break}throw E;case 3:if(!isStorageError(E)){M.n=4;break}return M.a(2,{data:null,error:E});case 4:throw E;case 5:return M.a(2)}},_callee62,this,[[0,2]])}))}},{key:"download",value:function(e,l){var _=this,S=void 0!==(null==l?void 0:l.transform)?"render/image/authenticated":"object",k=this.transformOptsToQueryString((null==l?void 0:l.transform)||{}),E=k?"?".concat(k):"",T=this._getFinalPath(e);return new uo(function(){return get(_.fetch,"".concat(_.url,"/").concat(S,"/").concat(T).concat(E),{headers:_.headers,noResolveJson:!0})},this.shouldThrowOnError)}},{key:"info",value:function(e){return __awaiter$4(this,void 0,void 0,_regenerator().m(function _callee63(){var l,_,S;return _regenerator().w(function(k){for(;;)switch(k.p=k.n){case 0:return l=this._getFinalPath(e),k.p=1,k.n=2,get(this.fetch,"".concat(this.url,"/object/info/").concat(l),{headers:this.headers});case 2:return _=k.v,k.a(2,{data:_recursiveToCamel(_),error:null});case 3:if(k.p=3,S=k.v,!this.shouldThrowOnError){k.n=4;break}throw S;case 4:if(!isStorageError(S)){k.n=5;break}return k.a(2,{data:null,error:S});case 5:throw S;case 6:return k.a(2)}},_callee63,this,[[1,3]])}))}},{key:"exists",value:function(e){return __awaiter$4(this,void 0,void 0,_regenerator().m(function _callee64(){var l,_,S;return _regenerator().w(function(k){for(;;)switch(k.p=k.n){case 0:return l=this._getFinalPath(e),k.p=1,k.n=2,head(this.fetch,"".concat(this.url,"/object/").concat(l),{headers:this.headers});case 2:return k.a(2,{data:!0,error:null});case 3:if(k.p=3,S=k.v,!this.shouldThrowOnError){k.n=4;break}throw S;case 4:if(!(isStorageError(S)&&S instanceof oo)){k.n=5;break}if(_=S.originalError,![400,404].includes(null==_?void 0:_.status)){k.n=5;break}return k.a(2,{data:!1,error:S});case 5:throw S;case 6:return k.a(2)}},_callee64,this,[[1,3]])}))}},{key:"getPublicUrl",value:function(e,l){var _=this._getFinalPath(e),S=[],k=(null==l?void 0:l.download)?"download=".concat(!0===l.download?"":l.download):"";""!==k&&S.push(k);var E=void 0!==(null==l?void 0:l.transform)?"render/image":"object",T=this.transformOptsToQueryString((null==l?void 0:l.transform)||{});""!==T&&S.push(T);var M=S.join("&");return""!==M&&(M="?".concat(M)),{data:{publicUrl:encodeURI("".concat(this.url,"/").concat(E,"/public/").concat(_).concat(M))}}}},{key:"remove",value:function(e){return __awaiter$4(this,void 0,void 0,_regenerator().m(function _callee65(){var l,_;return _regenerator().w(function(S){for(;;)switch(S.p=S.n){case 0:return S.p=0,S.n=1,_remove2(this.fetch,"".concat(this.url,"/object/").concat(this.bucketId),{prefixes:e},{headers:this.headers});case 1:return l=S.v,S.a(2,{data:l,error:null});case 2:if(S.p=2,_=S.v,!this.shouldThrowOnError){S.n=3;break}throw _;case 3:if(!isStorageError(_)){S.n=4;break}return S.a(2,{data:null,error:_});case 4:throw _;case 5:return S.a(2)}},_callee65,this,[[0,2]])}))}},{key:"list",value:function(e,l,_){return __awaiter$4(this,void 0,void 0,_regenerator().m(function _callee66(){var S,k,E;return _regenerator().w(function(T){for(;;)switch(T.p=T.n){case 0:return T.p=0,S=Object.assign(Object.assign(Object.assign({},lo),l),{prefix:e||""}),T.n=1,post(this.fetch,"".concat(this.url,"/object/list/").concat(this.bucketId),S,{headers:this.headers},_);case 1:return k=T.v,T.a(2,{data:k,error:null});case 2:if(T.p=2,E=T.v,!this.shouldThrowOnError){T.n=3;break}throw E;case 3:if(!isStorageError(E)){T.n=4;break}return T.a(2,{data:null,error:E});case 4:throw E;case 5:return T.a(2)}},_callee66,this,[[0,2]])}))}},{key:"listV2",value:function(e,l){return __awaiter$4(this,void 0,void 0,_regenerator().m(function _callee67(){var _,S,k;return _regenerator().w(function(E){for(;;)switch(E.p=E.n){case 0:return E.p=0,_=Object.assign({},e),E.n=1,post(this.fetch,"".concat(this.url,"/object/list-v2/").concat(this.bucketId),_,{headers:this.headers},l);case 1:return S=E.v,E.a(2,{data:S,error:null});case 2:if(E.p=2,k=E.v,!this.shouldThrowOnError){E.n=3;break}throw k;case 3:if(!isStorageError(k)){E.n=4;break}return E.a(2,{data:null,error:k});case 4:throw k;case 5:return E.a(2)}},_callee67,this,[[0,2]])}))}},{key:"encodeMetadata",value:function(e){return JSON.stringify(e)}},{key:"toBase64",value:function(e){return"undefined"!=typeof Buffer?Buffer.from(e).toString("base64"):btoa(e)}},{key:"_getFinalPath",value:function(e){return"".concat(this.bucketId,"/").concat(e.replace(/^\/+/,""))}},{key:"_removeEmptyFolders",value:function(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}},{key:"transformOptsToQueryString",value:function(e){var l=[];return e.width&&l.push("width=".concat(e.width)),e.height&&l.push("height=".concat(e.height)),e.resize&&l.push("resize=".concat(e.resize)),e.format&&l.push("format=".concat(e.format)),e.quality&&l.push("quality=".concat(e.quality)),l.join("&")}}])}(),fo={"X-Client-Info":"storage-js/".concat("2.75.0")},__awaiter$3=function(e,l,_,S){return new(_||(_=Promise))(function(k,E){function fulfilled(e){try{step(S.next(e))}catch(ta){E(ta)}}function rejected(e){try{step(S.throw(e))}catch(ta){E(ta)}}function step(e){var l;e.done?k(e.value):(l=e.value,l instanceof _?l:new _(function(e){e(l)})).then(fulfilled,rejected)}step((S=S.apply(e,l||[])).next())})},po=function(){return _createClass3(function StorageBucketApi(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_=arguments.length>2?arguments[2]:void 0,S=arguments.length>3?arguments[3]:void 0;_classCallCheck3(this,StorageBucketApi),this.shouldThrowOnError=!1;var k=new URL(e);(null==S?void 0:S.useNewHostname)&&/supabase\.(co|in|red)$/.test(k.hostname)&&!k.hostname.includes("storage.supabase.")&&(k.hostname=k.hostname.replace("supabase.","storage.supabase.")),this.url=k.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},fo),l),this.fetch=resolveFetch$2(_)},[{key:"throwOnError",value:function(){return this.shouldThrowOnError=!0,this}},{key:"listBuckets",value:function(){return __awaiter$3(this,void 0,void 0,_regenerator().m(function _callee68(){var e,l;return _regenerator().w(function(_){for(;;)switch(_.p=_.n){case 0:return _.p=0,_.n=1,get(this.fetch,"".concat(this.url,"/bucket"),{headers:this.headers});case 1:return e=_.v,_.a(2,{data:e,error:null});case 2:if(_.p=2,l=_.v,!this.shouldThrowOnError){_.n=3;break}throw l;case 3:if(!isStorageError(l)){_.n=4;break}return _.a(2,{data:null,error:l});case 4:throw l;case 5:return _.a(2)}},_callee68,this,[[0,2]])}))}},{key:"getBucket",value:function(e){return __awaiter$3(this,void 0,void 0,_regenerator().m(function _callee69(){var l,_;return _regenerator().w(function(S){for(;;)switch(S.p=S.n){case 0:return S.p=0,S.n=1,get(this.fetch,"".concat(this.url,"/bucket/").concat(e),{headers:this.headers});case 1:return l=S.v,S.a(2,{data:l,error:null});case 2:if(S.p=2,_=S.v,!this.shouldThrowOnError){S.n=3;break}throw _;case 3:if(!isStorageError(_)){S.n=4;break}return S.a(2,{data:null,error:_});case 4:throw _;case 5:return S.a(2)}},_callee69,this,[[0,2]])}))}},{key:"createBucket",value:function(e){return __awaiter$3(this,arguments,void 0,function(e){var l=this,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{public:!1};return _regenerator().m(function _callee70(){var S,k;return _regenerator().w(function(E){for(;;)switch(E.p=E.n){case 0:return E.p=0,E.n=1,post(l.fetch,"".concat(l.url,"/bucket"),{id:e,name:e,type:_.type,public:_.public,file_size_limit:_.fileSizeLimit,allowed_mime_types:_.allowedMimeTypes},{headers:l.headers});case 1:return S=E.v,E.a(2,{data:S,error:null});case 2:if(E.p=2,k=E.v,!l.shouldThrowOnError){E.n=3;break}throw k;case 3:if(!isStorageError(k)){E.n=4;break}return E.a(2,{data:null,error:k});case 4:throw k;case 5:return E.a(2)}},_callee70,null,[[0,2]])})()})}},{key:"updateBucket",value:function(e,l){return __awaiter$3(this,void 0,void 0,_regenerator().m(function _callee71(){var _,S;return _regenerator().w(function(k){for(;;)switch(k.p=k.n){case 0:return k.p=0,k.n=1,put(this.fetch,"".concat(this.url,"/bucket/").concat(e),{id:e,name:e,public:l.public,file_size_limit:l.fileSizeLimit,allowed_mime_types:l.allowedMimeTypes},{headers:this.headers});case 1:return _=k.v,k.a(2,{data:_,error:null});case 2:if(k.p=2,S=k.v,!this.shouldThrowOnError){k.n=3;break}throw S;case 3:if(!isStorageError(S)){k.n=4;break}return k.a(2,{data:null,error:S});case 4:throw S;case 5:return k.a(2)}},_callee71,this,[[0,2]])}))}},{key:"emptyBucket",value:function(e){return __awaiter$3(this,void 0,void 0,_regenerator().m(function _callee72(){var l,_;return _regenerator().w(function(S){for(;;)switch(S.p=S.n){case 0:return S.p=0,S.n=1,post(this.fetch,"".concat(this.url,"/bucket/").concat(e,"/empty"),{},{headers:this.headers});case 1:return l=S.v,S.a(2,{data:l,error:null});case 2:if(S.p=2,_=S.v,!this.shouldThrowOnError){S.n=3;break}throw _;case 3:if(!isStorageError(_)){S.n=4;break}return S.a(2,{data:null,error:_});case 4:throw _;case 5:return S.a(2)}},_callee72,this,[[0,2]])}))}},{key:"deleteBucket",value:function(e){return __awaiter$3(this,void 0,void 0,_regenerator().m(function _callee73(){var l,_;return _regenerator().w(function(S){for(;;)switch(S.p=S.n){case 0:return S.p=0,S.n=1,_remove2(this.fetch,"".concat(this.url,"/bucket/").concat(e),{},{headers:this.headers});case 1:return l=S.v,S.a(2,{data:l,error:null});case 2:if(S.p=2,_=S.v,!this.shouldThrowOnError){S.n=3;break}throw _;case 3:if(!isStorageError(_)){S.n=4;break}return S.a(2,{data:null,error:_});case 4:throw _;case 5:return S.a(2)}},_callee73,this,[[0,2]])}))}}])}(),vo=function(e){function StorageClient(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_=arguments.length>2?arguments[2]:void 0,S=arguments.length>3?arguments[3]:void 0;return _classCallCheck3(this,StorageClient),_callSuper(this,StorageClient,[e,l,_,S])}return _inherits(StorageClient,e),_createClass3(StorageClient,[{key:"from",value:function(e){return new ho(this.url,this.headers,e,this.fetch)}}])}(po),go="";go="undefined"!=typeof Deno?"deno":"undefined"!=typeof document?"web":"undefined"!=typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";var mo={headers:{"X-Client-Info":"supabase-js-".concat(go,"/").concat("2.75.0")}},yo={schema:"public"},_o={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},bo={},__awaiter$2=function(e,l,_,S){return new(_||(_=Promise))(function(k,E){function fulfilled(e){try{step(S.next(e))}catch(ta){E(ta)}}function rejected(e){try{step(S.throw(e))}catch(ta){E(ta)}}function step(e){var l;e.done?k(e.value):(l=e.value,l instanceof _?l:new _(function(e){e(l)})).then(fulfilled,rejected)}step((S=S.apply(e,l||[])).next())})},resolveFetch$1=function(e){var l;return l=e||("undefined"==typeof fetch?Aa:fetch),function(){return l.apply(void 0,arguments)}},fetchWithAuth=function(e,l,_){var S=resolveFetch$1(_),k="undefined"==typeof Headers?Ea:Headers;return function(_,E){return __awaiter$2(void 0,void 0,void 0,_regenerator().m(function _callee74(){var T,M,R,I,D,O;return _regenerator().w(function(L){for(;;)switch(L.n){case 0:return L.n=1,l();case 1:if(D=T=L.v,!(I=null!==D)){L.n=2;break}I=void 0!==T;case 2:if(!I){L.n=3;break}O=T,L.n=4;break;case 3:O=e;case 4:return M=O,(R=new k(null==E?void 0:E.headers)).has("apikey")||R.set("apikey",e),R.has("Authorization")||R.set("Authorization","Bearer ".concat(M)),L.a(2,S(_,Object.assign(Object.assign({},E),{headers:R})))}},_callee74)}))}},__awaiter$1=function(e,l,_,S){return new(_||(_=Promise))(function(k,E){function fulfilled(e){try{step(S.next(e))}catch(ta){E(ta)}}function rejected(e){try{step(S.throw(e))}catch(ta){E(ta)}}function step(e){var l;e.done?k(e.value):(l=e.value,l instanceof _?l:new _(function(e){e(l)})).then(fulfilled,rejected)}step((S=S.apply(e,l||[])).next())})};var So="2.75.0",wo=3e4,xo=9e4,ko={"X-Client-Info":"gotrue-js/".concat(So)},Ao="X-Supabase-Api-Version",Eo={timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"},Co=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,To=function(e){function AuthError(e,l,_){var S;return _classCallCheck3(this,AuthError),(S=_callSuper(this,AuthError,[e])).__isAuthError=!0,S.name="AuthError",S.status=l,S.code=_,S}return _inherits(AuthError,e),_createClass3(AuthError)}(_wrapNativeSuper(Error));function isAuthError(e){return"object"===_typeof3(e)&&null!==e&&"__isAuthError"in e}var Mo=function(e){function AuthApiError(e,l,_){var S;return _classCallCheck3(this,AuthApiError),(S=_callSuper(this,AuthApiError,[e,l,_])).name="AuthApiError",S.status=l,S.code=_,S}return _inherits(AuthApiError,e),_createClass3(AuthApiError)}(To);function isAuthApiError(e){return isAuthError(e)&&"AuthApiError"===e.name}var Ro=function(e){function AuthUnknownError(e,l){var _;return _classCallCheck3(this,AuthUnknownError),(_=_callSuper(this,AuthUnknownError,[e])).name="AuthUnknownError",_.originalError=l,_}return _inherits(AuthUnknownError,e),_createClass3(AuthUnknownError)}(To),Io=function(e){function CustomAuthError(e,l,_,S){var k;return _classCallCheck3(this,CustomAuthError),(k=_callSuper(this,CustomAuthError,[e,_,S])).name=l,k.status=_,k}return _inherits(CustomAuthError,e),_createClass3(CustomAuthError)}(To),Po=function(e){function AuthSessionMissingError(){return _classCallCheck3(this,AuthSessionMissingError),_callSuper(this,AuthSessionMissingError,["Auth session missing!","AuthSessionMissingError",400,void 0])}return _inherits(AuthSessionMissingError,e),_createClass3(AuthSessionMissingError)}(Io);function isAuthSessionMissingError(e){return isAuthError(e)&&"AuthSessionMissingError"===e.name}var Do=function(e){function AuthInvalidTokenResponseError(){return _classCallCheck3(this,AuthInvalidTokenResponseError),_callSuper(this,AuthInvalidTokenResponseError,["Auth session or user missing","AuthInvalidTokenResponseError",500,void 0])}return _inherits(AuthInvalidTokenResponseError,e),_createClass3(AuthInvalidTokenResponseError)}(Io),Oo=function(e){function AuthInvalidCredentialsError(e){return _classCallCheck3(this,AuthInvalidCredentialsError),_callSuper(this,AuthInvalidCredentialsError,[e,"AuthInvalidCredentialsError",400,void 0])}return _inherits(AuthInvalidCredentialsError,e),_createClass3(AuthInvalidCredentialsError)}(Io),Lo=function(e){function AuthImplicitGrantRedirectError(e){var l,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return _classCallCheck3(this,AuthImplicitGrantRedirectError),(l=_callSuper(this,AuthImplicitGrantRedirectError,[e,"AuthImplicitGrantRedirectError",500,void 0])).details=null,l.details=_,l}return _inherits(AuthImplicitGrantRedirectError,e),_createClass3(AuthImplicitGrantRedirectError,[{key:"toJSON",value:function(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}])}(Io);function isAuthImplicitGrantRedirectError(e){return isAuthError(e)&&"AuthImplicitGrantRedirectError"===e.name}var Uo=function(e){function AuthPKCEGrantCodeExchangeError(e){var l,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return _classCallCheck3(this,AuthPKCEGrantCodeExchangeError),(l=_callSuper(this,AuthPKCEGrantCodeExchangeError,[e,"AuthPKCEGrantCodeExchangeError",500,void 0])).details=null,l.details=_,l}return _inherits(AuthPKCEGrantCodeExchangeError,e),_createClass3(AuthPKCEGrantCodeExchangeError,[{key:"toJSON",value:function(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}])}(Io),Fo=function(e){function AuthRetryableFetchError(e,l){return _classCallCheck3(this,AuthRetryableFetchError),_callSuper(this,AuthRetryableFetchError,[e,"AuthRetryableFetchError",l,void 0])}return _inherits(AuthRetryableFetchError,e),_createClass3(AuthRetryableFetchError)}(Io);function isAuthRetryableFetchError(e){return isAuthError(e)&&"AuthRetryableFetchError"===e.name}var No=function(e){function AuthWeakPasswordError(e,l,_){var S;return _classCallCheck3(this,AuthWeakPasswordError),(S=_callSuper(this,AuthWeakPasswordError,[e,"AuthWeakPasswordError",l,"weak_password"])).reasons=_,S}return _inherits(AuthWeakPasswordError,e),_createClass3(AuthWeakPasswordError)}(Io),Bo=function(e){function AuthInvalidJwtError(e){return _classCallCheck3(this,AuthInvalidJwtError),_callSuper(this,AuthInvalidJwtError,[e,"AuthInvalidJwtError",400,"invalid_jwt"])}return _inherits(AuthInvalidJwtError,e),_createClass3(AuthInvalidJwtError)}(Io),zo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Go=" \t\n\r=".split(""),jo=function(){for(var e=new Array(128),l=0;l<e.length;l+=1)e[l]=-1;for(var _=0;_<Go.length;_+=1)e[Go[_].charCodeAt(0)]=-2;for(var S=0;S<zo.length;S+=1)e[zo[S].charCodeAt(0)]=S;return e}();function byteToBase64URL(e,l,_){if(null!==e)for(l.queue=l.queue<<8|e,l.queuedBits+=8;l.queuedBits>=6;){var S=l.queue>>l.queuedBits-6&63;_(zo[S]),l.queuedBits-=6}else if(l.queuedBits>0)for(l.queue=l.queue<<6-l.queuedBits,l.queuedBits=6;l.queuedBits>=6;){var k=l.queue>>l.queuedBits-6&63;_(zo[k]),l.queuedBits-=6}}function byteFromBase64URL(e,l,_){var S=jo[e];if(!(S>-1)){if(-2===S)return;throw new Error('Invalid Base64-URL character "'.concat(String.fromCharCode(e),'"'))}for(l.queue=l.queue<<6|S,l.queuedBits+=6;l.queuedBits>=8;)_(l.queue>>l.queuedBits-8&255),l.queuedBits-=8}function stringFromBase64URL(e){for(var l=[],utf8Emit=function(e){l.push(String.fromCodePoint(e))},_={utf8seq:0,codepoint:0},S={queue:0,queuedBits:0},byteEmit=function(e){!function(e,l,_){if(0===l.utf8seq){if(e<=127)return void _(e);for(var S=1;S<6;S+=1)if(!(e>>7-S&1)){l.utf8seq=S;break}if(2===l.utf8seq)l.codepoint=31&e;else if(3===l.utf8seq)l.codepoint=15&e;else{if(4!==l.utf8seq)throw new Error("Invalid UTF-8 sequence");l.codepoint=7&e}l.utf8seq-=1}else if(l.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");l.codepoint=l.codepoint<<6|63&e,l.utf8seq-=1,0===l.utf8seq&&_(l.codepoint)}}(e,_,utf8Emit)},k=0;k<e.length;k+=1)byteFromBase64URL(e.charCodeAt(k),S,byteEmit);return l.join("")}function codepointToUTF8(e,l){if(!(e<=127)){if(e<=2047)return l(192|e>>6),void l(128|63&e);if(e<=65535)return l(224|e>>12),l(128|e>>6&63),void l(128|63&e);if(e<=1114111)return l(240|e>>18),l(128|e>>12&63),l(128|e>>6&63),void l(128|63&e);throw new Error("Unrecognized Unicode codepoint: ".concat(e.toString(16)))}l(e)}function base64UrlToUint8Array(e){for(var l=[],_={queue:0,queuedBits:0},onByte=function(e){l.push(e)},S=0;S<e.length;S+=1)byteFromBase64URL(e.charCodeAt(S),_,onByte);return new Uint8Array(l)}function stringToUint8Array(e){var l=[];return function(e,l){for(var _=0;_<e.length;_+=1){var S=e.charCodeAt(_);if(S>55295&&S<=56319){var k=1024*(S-55296)&65535;S=65536+(e.charCodeAt(_+1)-56320&65535|k),_+=1}codepointToUTF8(S,l)}}(e,function(e){return l.push(e)}),new Uint8Array(l)}function bytesToBase64URL(e){var l=[],_={queue:0,queuedBits:0},onChar=function(e){l.push(e)};return e.forEach(function(e){return byteToBase64URL(e,_,onChar)}),byteToBase64URL(null,_,onChar),l.join("")}var isBrowser=function(){return"undefined"!=typeof window&&"undefined"!=typeof document},Ho={tested:!1,writable:!1},supportsLocalStorage=function(){if(!isBrowser())return!1;try{if("object"!==_typeof3(globalThis.localStorage))return!1}catch(ta){return!1}if(Ho.tested)return Ho.writable;var e="lswt-".concat(Math.random()).concat(Math.random());try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Ho.tested=!0,Ho.writable=!0}catch(ta){Ho.tested=!0,Ho.writable=!1}return Ho.writable};function parseParametersFromURL(e){var l={},_=new URL(e);if(_.hash&&"#"===_.hash[0])try{new URLSearchParams(_.hash.substring(1)).forEach(function(e,_){l[_]=e})}catch(ta){}return _.searchParams.forEach(function(e,_){l[_]=e}),l}var resolveFetch=function(e){var l;return l=e||("undefined"==typeof fetch?function(){for(var e=arguments.length,l=new Array(e),_=0;_<e;_++)l[_]=arguments[_];return z(_asyncToGenerator(_regenerator().m(function _callee76(){var e,l;return _regenerator().w(function(_){for(;;)switch(_.n){case 0:return _.n=1,Promise.resolve().then(function(){return Ma});case 1:return e=_.v,l=e.default,_.a(2,{default:l})}},_callee76)})),void 0).then(function(e){return e.default.apply(void 0,l)})}:fetch),function(){return l.apply(void 0,arguments)}},looksLikeFetchResponse=function(e){return"object"===_typeof3(e)&&null!==e&&"status"in e&&"ok"in e&&"json"in e&&"function"==typeof e.json},Vo=function(){var e=_asyncToGenerator(_regenerator().m(function _callee77(e,l,_){return _regenerator().w(function(S){for(;;)switch(S.n){case 0:return S.n=1,e.setItem(l,JSON.stringify(_));case 1:return S.a(2)}},_callee77)}));return function(l,_,S){return e.apply(this,arguments)}}(),Wo=function(){var e=_asyncToGenerator(_regenerator().m(function _callee78(e,l){var _;return _regenerator().w(function(S){for(;;)switch(S.p=S.n){case 0:return S.n=1,e.getItem(l);case 1:if(_=S.v){S.n=2;break}return S.a(2,null);case 2:return S.p=2,S.a(2,JSON.parse(_));case 3:return S.p=3,S.v,S.a(2,_)}},_callee78,null,[[2,3]])}));return function(l,_){return e.apply(this,arguments)}}(),qo=function(){var e=_asyncToGenerator(_regenerator().m(function _callee79(e,l){return _regenerator().w(function(_){for(;;)switch(_.n){case 0:return _.n=1,e.removeItem(l);case 1:return _.a(2)}},_callee79)}));return function(l,_){return e.apply(this,arguments)}}(),Xo=_createClass3(function Deferred(){var e=this;_classCallCheck3(this,Deferred),this.promise=new Deferred.promiseConstructor(function(l,_){e.resolve=l,e.reject=_})});function decodeJWT(e){var l=e.split(".");if(3!==l.length)throw new Bo("Invalid JWT structure");for(var _=0;_<l.length;_++)if(!Co.test(l[_]))throw new Bo("JWT not in base64url format");return{header:JSON.parse(stringFromBase64URL(l[0])),payload:JSON.parse(stringFromBase64URL(l[1])),signature:base64UrlToUint8Array(l[2]),raw:{header:l[0],payload:l[1]}}}function sleep(e){return _sleep.apply(this,arguments)}function _sleep(){return _sleep=_asyncToGenerator(_regenerator().m(function _callee220(e){return _regenerator().w(function(l){for(;;)switch(l.n){case 0:return l.n=1,new Promise(function(l){setTimeout(function(){return l(null)},e)});case 1:return l.a(2,l.v)}},_callee220)})),_sleep.apply(this,arguments)}function retryable(e,l){return new Promise(function(_,S){_asyncToGenerator(_regenerator().m(function _callee80(){var k,E,T;return _regenerator().w(function(M){for(;;)switch(M.p=M.n){case 0:k=0;case 1:if(!(k<1/0)){M.n=7;break}return M.p=2,M.n=3,e(k);case 3:if(E=M.v,l(k,null,E)){M.n=4;break}return _(E),M.a(2);case 4:M.n=6;break;case 5:if(M.p=5,T=M.v,l(k,T)){M.n=6;break}return S(T),M.a(2);case 6:k++,M.n=1;break;case 7:return M.a(2)}},_callee80,null,[[2,5]])}))()})}function dec2hex(e){return("0"+e.toString(16)).substr(-2)}function generatePKCEVerifier(){var e=new Uint32Array(56);if("undefined"==typeof crypto){for(var l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",_="",S=0;S<56;S++)_+=l.charAt(Math.floor(66*Math.random()));return _}return crypto.getRandomValues(e),Array.from(e,dec2hex).join("")}function sha256(e){return _sha.apply(this,arguments)}function _sha(){return(_sha=_asyncToGenerator(_regenerator().m(function _callee221(e){var l,_,S,k;return _regenerator().w(function(E){for(;;)switch(E.n){case 0:return l=new TextEncoder,_=l.encode(e),E.n=1,crypto.subtle.digest("SHA-256",_);case 1:return S=E.v,k=new Uint8Array(S),E.a(2,Array.from(k).map(function(e){return String.fromCharCode(e)}).join(""))}},_callee221)}))).apply(this,arguments)}function generatePKCEChallenge(e){return _generatePKCEChallenge.apply(this,arguments)}function _generatePKCEChallenge(){return(_generatePKCEChallenge=_asyncToGenerator(_regenerator().m(function _callee222(e){var l;return _regenerator().w(function(_){for(;;)switch(_.n){case 0:if("undefined"!=typeof crypto&&void 0!==crypto.subtle&&"undefined"!=typeof TextEncoder){_.n=1;break}return _.a(2,e);case 1:return _.n=2,sha256(e);case 2:return l=_.v,_.a(2,btoa(l).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,""))}},_callee222)}))).apply(this,arguments)}function getCodeChallengeAndMethod(e,l){return _getCodeChallengeAndMethod.apply(this,arguments)}function _getCodeChallengeAndMethod(){return _getCodeChallengeAndMethod=_asyncToGenerator(_regenerator().m(function _callee223(e,l){var _,S,k,E,T,M=arguments;return _regenerator().w(function(R){for(;;)switch(R.n){case 0:return _=M.length>2&&void 0!==M[2]&&M[2],S=generatePKCEVerifier(),k=S,_&&(k+="/PASSWORD_RECOVERY"),R.n=1,Vo(e,"".concat(l,"-code-verifier"),k);case 1:return R.n=2,generatePKCEChallenge(S);case 2:return E=R.v,T=S===E?"plain":"s256",R.a(2,[E,T])}},_callee223)})),_getCodeChallengeAndMethod.apply(this,arguments)}Xo.promiseConstructor=Promise;var Ko=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function parseResponseAPIVersion(e){var l=e.headers.get(Ao);if(!l)return null;if(!l.match(Ko))return null;try{return new Date("".concat(l,"T00:00:00.0Z"))}catch(ta){return null}}function validateExp(e){if(!e)throw new Error("Missing exp claim");if(e<=Math.floor(Date.now()/1e3))throw new Error("JWT has expired")}function getAlgorithm(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var Yo=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function validateUUID(e){if(!Yo.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function userNotAvailableProxy(){return new Proxy({},{get:function(e,l){if("__isUserNotAvailableProxy"===l)return!0;if("symbol"===_typeof3(l)){var _=l.toString();if("Symbol(Symbol.toPrimitive)"===_||"Symbol(Symbol.toStringTag)"===_||"Symbol(util.inspect.custom)"===_)return}throw new Error('@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "'.concat(l,'" property of the session object is not supported. Please use getUser() instead.'))},set:function(e,l){throw new Error('@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "'.concat(l,'" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.'))},deleteProperty:function(e,l){throw new Error('@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "'.concat(l,'" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.'))}})}function deepClone(e){return JSON.parse(JSON.stringify(e))}var __rest$2=function(e,l){var _={};for(var S in e)Object.prototype.hasOwnProperty.call(e,S)&&l.indexOf(S)<0&&(_[S]=e[S]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var k=0;for(S=Object.getOwnPropertySymbols(e);k<S.length;k++)l.indexOf(S[k])<0&&Object.prototype.propertyIsEnumerable.call(e,S[k])&&(_[S[k]]=e[S[k]])}return _},_getErrorMessage=function(e){return e.msg||e.message||e.error_description||e.error||JSON.stringify(e)},Qo=[502,503,504];function handleError(e){return _handleError.apply(this,arguments)}function _handleError(){return _handleError=_asyncToGenerator(_regenerator().m(function _callee224(e){var l,_,S,k,E;return _regenerator().w(function(T){for(;;)switch(T.p=T.n){case 0:if(looksLikeFetchResponse(e)){T.n=1;break}throw new Fo(_getErrorMessage(e),0);case 1:if(!Qo.includes(e.status)){T.n=2;break}throw new Fo(_getErrorMessage(e),e.status);case 2:return T.p=2,T.n=3,e.json();case 3:_=T.v,T.n=5;break;case 4:throw T.p=4,E=T.v,new Ro(_getErrorMessage(E),E);case 5:if(S=void 0,(k=parseResponseAPIVersion(e))&&k.getTime()>=Eo.timestamp&&"object"===_typeof3(_)&&_&&"string"==typeof _.code?S=_.code:"object"===_typeof3(_)&&_&&"string"==typeof _.error_code&&(S=_.error_code),S){T.n=7;break}if(!("object"===_typeof3(_)&&_&&"object"===_typeof3(_.weak_password)&&_.weak_password&&Array.isArray(_.weak_password.reasons)&&_.weak_password.reasons.length&&_.weak_password.reasons.reduce(function(e,l){return e&&"string"==typeof l},!0))){T.n=6;break}throw new No(_getErrorMessage(_),e.status,_.weak_password.reasons);case 6:T.n=9;break;case 7:if("weak_password"!==S){T.n=8;break}throw new No(_getErrorMessage(_),e.status,(null===(l=_.weak_password)||void 0===l?void 0:l.reasons)||[]);case 8:if("session_not_found"!==S){T.n=9;break}throw new Po;case 9:throw new Mo(_getErrorMessage(_),e.status||500,S);case 10:return T.a(2)}},_callee224,null,[[2,4]])})),_handleError.apply(this,arguments)}var _getRequestParams=function(e,l,_,S){var k={method:e,headers:(null==l?void 0:l.headers)||{}};return"GET"===e?k:(k.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null==l?void 0:l.headers),k.body=JSON.stringify(S),Object.assign(Object.assign({},k),_))};function _request(e,l,_,S){return _request2.apply(this,arguments)}function _request2(){return(_request2=_asyncToGenerator(_regenerator().m(function _callee225(e,l,_,S){var k,E,T,M,R;return _regenerator().w(function(I){for(;;)switch(I.n){case 0:return(E=Object.assign({},null==S?void 0:S.headers))[Ao]||(E[Ao]=Eo.name),(null==S?void 0:S.jwt)&&(E.Authorization="Bearer ".concat(S.jwt)),T=null!==(k=null==S?void 0:S.query)&&void 0!==k?k:{},(null==S?void 0:S.redirectTo)&&(T.redirect_to=S.redirectTo),M=Object.keys(T).length?"?"+new URLSearchParams(T).toString():"",I.n=1,_handleRequest(e,l,_+M,{headers:E,noResolveJson:null==S?void 0:S.noResolveJson},{},null==S?void 0:S.body);case 1:return R=I.v,I.a(2,(null==S?void 0:S.xform)?null==S?void 0:S.xform(R):{data:Object.assign({},R),error:null})}},_callee225)}))).apply(this,arguments)}function _handleRequest(e,l,_,S,k,E){return _handleRequest2.apply(this,arguments)}function _handleRequest2(){return(_handleRequest2=_asyncToGenerator(_regenerator().m(function _callee226(e,l,_,S,k,E){var T,M,R,I;return _regenerator().w(function(D){for(;;)switch(D.p=D.n){case 0:return T=_getRequestParams(l,S,k,E),D.p=1,D.n=2,e(_,Object.assign({},T));case 2:M=D.v,D.n=4;break;case 3:throw D.p=3,R=D.v,new Fo(_getErrorMessage(R),0);case 4:if(M.ok){D.n=5;break}return D.n=5,handleError(M);case 5:if(!(null==S?void 0:S.noResolveJson)){D.n=6;break}return D.a(2,M);case 6:return D.p=6,D.n=7,M.json();case 7:return D.a(2,D.v);case 8:return D.p=8,I=D.v,D.n=9,handleError(I);case 9:return D.a(2)}},_callee226,null,[[6,8],[1,3]])}))).apply(this,arguments)}function _sessionResponse(e){var l,_,S=null;return function(e){return e.access_token&&e.refresh_token&&e.expires_in}(e)&&(S=Object.assign({},e),e.expires_at||(S.expires_at=(_=e.expires_in,Math.round(Date.now()/1e3)+_))),{data:{session:S,user:null!==(l=e.user)&&void 0!==l?l:e},error:null}}function _sessionResponsePassword(e){var l=_sessionResponse(e);return!l.error&&e.weak_password&&"object"===_typeof3(e.weak_password)&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&"string"==typeof e.weak_password.message&&e.weak_password.reasons.reduce(function(e,l){return e&&"string"==typeof l},!0)&&(l.data.weak_password=e.weak_password),l}function _userResponse(e){var l;return{data:{user:null!==(l=e.user)&&void 0!==l?l:e},error:null}}function _ssoResponse(e){return{data:e,error:null}}function _generateLinkResponse(e){var l=e.action_link,_=e.email_otp,S=e.hashed_token,k=e.redirect_to,E=e.verification_type,T=__rest$2(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:l,email_otp:_,hashed_token:S,redirect_to:k,verification_type:E},user:Object.assign({},T)},error:null}}function _noResolveJsonResponse(e){return e}var Jo=["global","local","others"],__rest$1=function(e,l){var _={};for(var S in e)Object.prototype.hasOwnProperty.call(e,S)&&l.indexOf(S)<0&&(_[S]=e[S]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var k=0;for(S=Object.getOwnPropertySymbols(e);k<S.length;k++)l.indexOf(S[k])<0&&Object.prototype.propertyIsEnumerable.call(e,S[k])&&(_[S[k]]=e[S[k]])}return _},Zo=function(){return _createClass3(function GoTrueAdminApi(e){var l=e.url,_=void 0===l?"":l,S=e.headers,k=void 0===S?{}:S,E=e.fetch;_classCallCheck3(this,GoTrueAdminApi),this.url=_,this.headers=k,this.fetch=resolveFetch(E),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}},[{key:"signOut",value:(B=_asyncToGenerator(_regenerator().m(function _callee81(e){var l,_,S=arguments;return _regenerator().w(function(k){for(;;)switch(k.p=k.n){case 0:if(l=S.length>1&&void 0!==S[1]?S[1]:Jo[0],!(Jo.indexOf(l)<0)){k.n=1;break}throw new Error("@supabase/auth-js: Parameter scope must be one of ".concat(Jo.join(", ")));case 1:return k.p=1,k.n=2,_request(this.fetch,"POST","".concat(this.url,"/logout?scope=").concat(l),{headers:this.headers,jwt:e,noResolveJson:!0});case 2:return k.a(2,{data:null,error:null});case 3:if(k.p=3,!isAuthError(_=k.v)){k.n=4;break}return k.a(2,{data:null,error:_});case 4:throw _;case 5:return k.a(2)}},_callee81,this,[[1,3]])})),function(e){return B.apply(this,arguments)})},{key:"inviteUserByEmail",value:(U=_asyncToGenerator(_regenerator().m(function _callee82(e){var l,_,S=arguments;return _regenerator().w(function(k){for(;;)switch(k.p=k.n){case 0:return l=S.length>1&&void 0!==S[1]?S[1]:{},k.p=1,k.n=2,_request(this.fetch,"POST","".concat(this.url,"/invite"),{body:{email:e,data:l.data},headers:this.headers,redirectTo:l.redirectTo,xform:_userResponse});case 2:return k.a(2,k.v);case 3:if(k.p=3,!isAuthError(_=k.v)){k.n=4;break}return k.a(2,{data:{user:null},error:_});case 4:throw _;case 5:return k.a(2)}},_callee82,this,[[1,3]])})),function(e){return U.apply(this,arguments)})},{key:"generateLink",value:(L=_asyncToGenerator(_regenerator().m(function _callee83(e){var l,_,S,k;return _regenerator().w(function(E){for(;;)switch(E.p=E.n){case 0:return E.p=0,l=e.options,_=__rest$1(e,["options"]),S=Object.assign(Object.assign({},_),l),"newEmail"in _&&(S.new_email=null==_?void 0:_.newEmail,delete S.newEmail),E.n=1,_request(this.fetch,"POST","".concat(this.url,"/admin/generate_link"),{body:S,headers:this.headers,xform:_generateLinkResponse,redirectTo:null==l?void 0:l.redirectTo});case 1:return E.a(2,E.v);case 2:if(E.p=2,!isAuthError(k=E.v)){E.n=3;break}return E.a(2,{data:{properties:null,user:null},error:k});case 3:throw k;case 4:return E.a(2)}},_callee83,this,[[0,2]])})),function(e){return L.apply(this,arguments)})},{key:"createUser",value:(O=_asyncToGenerator(_regenerator().m(function _callee84(e){var l;return _regenerator().w(function(_){for(;;)switch(_.p=_.n){case 0:return _.p=0,_.n=1,_request(this.fetch,"POST","".concat(this.url,"/admin/users"),{body:e,headers:this.headers,xform:_userResponse});case 1:return _.a(2,_.v);case 2:if(_.p=2,!isAuthError(l=_.v)){_.n=3;break}return _.a(2,{data:{user:null},error:l});case 3:throw l;case 4:return _.a(2)}},_callee84,this,[[0,2]])})),function(e){return O.apply(this,arguments)})},{key:"listUsers",value:(D=_asyncToGenerator(_regenerator().m(function _callee85(e){var l,_,S,k,E,T,M,R,I,D,O,L,U;return _regenerator().w(function(B){for(;;)switch(B.p=B.n){case 0:return B.p=0,R={nextPage:null,lastPage:0,total:0},B.n=1,_request(this.fetch,"GET","".concat(this.url,"/admin/users"),{headers:this.headers,noResolveJson:!0,query:{page:null!==(_=null===(l=null==e?void 0:e.page)||void 0===l?void 0:l.toString())&&void 0!==_?_:"",per_page:null!==(k=null===(S=null==e?void 0:e.perPage)||void 0===S?void 0:S.toString())&&void 0!==k?k:""},xform:_noResolveJsonResponse});case 1:if(!(I=B.v).error){B.n=2;break}throw I.error;case 2:return B.n=3,I.json();case 3:return D=B.v,O=null!==(E=I.headers.get("x-total-count"))&&void 0!==E?E:0,(L=null!==(M=null===(T=I.headers.get("link"))||void 0===T?void 0:T.split(","))&&void 0!==M?M:[]).length>0&&(L.forEach(function(e){var l=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(e.split(";")[1].split("=")[1]);R["".concat(_,"Page")]=l}),R.total=parseInt(O)),B.a(2,{data:Object.assign(Object.assign({},D),R),error:null});case 4:if(B.p=4,!isAuthError(U=B.v)){B.n=5;break}return B.a(2,{data:{users:[]},error:U});case 5:throw U;case 6:return B.a(2)}},_callee85,this,[[0,4]])})),function(e){return D.apply(this,arguments)})},{key:"getUserById",value:(I=_asyncToGenerator(_regenerator().m(function _callee86(e){var l;return _regenerator().w(function(_){for(;;)switch(_.p=_.n){case 0:return validateUUID(e),_.p=1,_.n=2,_request(this.fetch,"GET","".concat(this.url,"/admin/users/").concat(e),{headers:this.headers,xform:_userResponse});case 2:return _.a(2,_.v);case 3:if(_.p=3,!isAuthError(l=_.v)){_.n=4;break}return _.a(2,{data:{user:null},error:l});case 4:throw l;case 5:return _.a(2)}},_callee86,this,[[1,3]])})),function(e){return I.apply(this,arguments)})},{key:"updateUserById",value:(R=_asyncToGenerator(_regenerator().m(function _callee87(e,l){var _;return _regenerator().w(function(S){for(;;)switch(S.p=S.n){case 0:return validateUUID(e),S.p=1,S.n=2,_request(this.fetch,"PUT","".concat(this.url,"/admin/users/").concat(e),{body:l,headers:this.headers,xform:_userResponse});case 2:return S.a(2,S.v);case 3:if(S.p=3,!isAuthError(_=S.v)){S.n=4;break}return S.a(2,{data:{user:null},error:_});case 4:throw _;case 5:return S.a(2)}},_callee87,this,[[1,3]])})),function(e,l){return R.apply(this,arguments)})},{key:"deleteUser",value:(M=_asyncToGenerator(_regenerator().m(function _callee88(e){var l,_,S=arguments;return _regenerator().w(function(k){for(;;)switch(k.p=k.n){case 0:return l=S.length>1&&void 0!==S[1]&&S[1],validateUUID(e),k.p=1,k.n=2,_request(this.fetch,"DELETE","".concat(this.url,"/admin/users/").concat(e),{headers:this.headers,body:{should_soft_delete:l},xform:_userResponse});case 2:return k.a(2,k.v);case 3:if(k.p=3,!isAuthError(_=k.v)){k.n=4;break}return k.a(2,{data:{user:null},error:_});case 4:throw _;case 5:return k.a(2)}},_callee88,this,[[1,3]])})),function(e){return M.apply(this,arguments)})},{key:"_listFactors",value:(T=_asyncToGenerator(_regenerator().m(function _callee89(e){var l,_,S,k;return _regenerator().w(function(E){for(;;)switch(E.p=E.n){case 0:return validateUUID(e.userId),E.p=1,E.n=2,_request(this.fetch,"GET","".concat(this.url,"/admin/users/").concat(e.userId,"/factors"),{headers:this.headers,xform:function(e){return{data:{factors:e},error:null}}});case 2:return l=E.v,_=l.data,S=l.error,E.a(2,{data:_,error:S});case 3:if(E.p=3,!isAuthError(k=E.v)){E.n=4;break}return E.a(2,{data:null,error:k});case 4:throw k;case 5:return E.a(2)}},_callee89,this,[[1,3]])})),function(e){return T.apply(this,arguments)})},{key:"_deleteFactor",value:(E=_asyncToGenerator(_regenerator().m(function _callee90(e){var l,_;return _regenerator().w(function(S){for(;;)switch(S.p=S.n){case 0:return validateUUID(e.userId),validateUUID(e.id),S.p=1,S.n=2,_request(this.fetch,"DELETE","".concat(this.url,"/admin/users/").concat(e.userId,"/factors/").concat(e.id),{headers:this.headers});case 2:return l=S.v,S.a(2,{data:l,error:null});case 3:if(S.p=3,!isAuthError(_=S.v)){S.n=4;break}return S.a(2,{data:null,error:_});case 4:throw _;case 5:return S.a(2)}},_callee90,this,[[1,3]])})),function(e){return E.apply(this,arguments)})},{key:"_listOAuthClients",value:(k=_asyncToGenerator(_regenerator().m(function _callee91(e){var l,_,S,k,E,T,M,R,I,D,O,L,U;return _regenerator().w(function(B){for(;;)switch(B.p=B.n){case 0:return B.p=0,R={nextPage:null,lastPage:0,total:0},B.n=1,_request(this.fetch,"GET","".concat(this.url,"/admin/oauth/clients"),{headers:this.headers,noResolveJson:!0,query:{page:null!==(_=null===(l=null==e?void 0:e.page)||void 0===l?void 0:l.toString())&&void 0!==_?_:"",per_page:null!==(k=null===(S=null==e?void 0:e.perPage)||void 0===S?void 0:S.toString())&&void 0!==k?k:""},xform:_noResolveJsonResponse});case 1:if(!(I=B.v).error){B.n=2;break}throw I.error;case 2:return B.n=3,I.json();case 3:return D=B.v,O=null!==(E=I.headers.get("x-total-count"))&&void 0!==E?E:0,(L=null!==(M=null===(T=I.headers.get("link"))||void 0===T?void 0:T.split(","))&&void 0!==M?M:[]).length>0&&(L.forEach(function(e){var l=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(e.split(";")[1].split("=")[1]);R["".concat(_,"Page")]=l}),R.total=parseInt(O)),B.a(2,{data:Object.assign(Object.assign({},D),R),error:null});case 4:if(B.p=4,!isAuthError(U=B.v)){B.n=5;break}return B.a(2,{data:{clients:[]},error:U});case 5:throw U;case 6:return B.a(2)}},_callee91,this,[[0,4]])})),function(e){return k.apply(this,arguments)})},{key:"_createOAuthClient",value:(S=_asyncToGenerator(_regenerator().m(function _callee92(e){var l;return _regenerator().w(function(_){for(;;)switch(_.p=_.n){case 0:return _.p=0,_.n=1,_request(this.fetch,"POST","".concat(this.url,"/admin/oauth/clients"),{body:e,headers:this.headers,xform:function(e){return{data:e,error:null}}});case 1:return _.a(2,_.v);case 2:if(_.p=2,!isAuthError(l=_.v)){_.n=3;break}return _.a(2,{data:null,error:l});case 3:throw l;case 4:return _.a(2)}},_callee92,this,[[0,2]])})),function(e){return S.apply(this,arguments)})},{key:"_getOAuthClient",value:(_=_asyncToGenerator(_regenerator().m(function _callee93(e){var l;return _regenerator().w(function(_){for(;;)switch(_.p=_.n){case 0:return _.p=0,_.n=1,_request(this.fetch,"GET","".concat(this.url,"/admin/oauth/clients/").concat(e),{headers:this.headers,xform:function(e){return{data:e,error:null}}});case 1:return _.a(2,_.v);case 2:if(_.p=2,!isAuthError(l=_.v)){_.n=3;break}return _.a(2,{data:null,error:l});case 3:throw l;case 4:return _.a(2)}},_callee93,this,[[0,2]])})),function(e){return _.apply(this,arguments)})},{key:"_deleteOAuthClient",value:(l=_asyncToGenerator(_regenerator().m(function _callee94(e){var l;return _regenerator().w(function(_){for(;;)switch(_.p=_.n){case 0:return _.p=0,_.n=1,_request(this.fetch,"DELETE","".concat(this.url,"/admin/oauth/clients/").concat(e),{headers:this.headers,xform:function(e){return{data:e,error:null}}});case 1:return _.a(2,_.v);case 2:if(_.p=2,!isAuthError(l=_.v)){_.n=3;break}return _.a(2,{data:null,error:l});case 3:throw l;case 4:return _.a(2)}},_callee94,this,[[0,2]])})),function(e){return l.apply(this,arguments)})},{key:"_regenerateOAuthClientSecret",value:(e=_asyncToGenerator(_regenerator().m(function _callee95(e){var l;return _regenerator().w(function(_){for(;;)switch(_.p=_.n){case 0:return _.p=0,_.n=1,_request(this.fetch,"POST","".concat(this.url,"/admin/oauth/clients/").concat(e,"/regenerate_secret"),{headers:this.headers,xform:function(e){return{data:e,error:null}}});case 1:return _.a(2,_.v);case 2:if(_.p=2,!isAuthError(l=_.v)){_.n=3;break}return _.a(2,{data:null,error:l});case 3:throw l;case 4:return _.a(2)}},_callee95,this,[[0,2]])})),function(l){return e.apply(this,arguments)})}]);var e,l,_,S,k,E,T,M,R,I,D,O,L,U,B}();function memoryLocalStorageAdapter(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{getItem:function(l){return e[l]||null},setItem:function(l,_){e[l]=_},removeItem:function(l){delete e[l]}}}var $o=!!(globalThis&&supportsLocalStorage()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")),es=function(e){function LockAcquireTimeoutError(e){var l;return _classCallCheck3(this,LockAcquireTimeoutError),(l=_callSuper(this,LockAcquireTimeoutError,[e])).isAcquireTimeout=!0,l}return _inherits(LockAcquireTimeoutError,e),_createClass3(LockAcquireTimeoutError)}(_wrapNativeSuper(Error)),ts=function(e){function NavigatorLockAcquireTimeoutError(){return _classCallCheck3(this,NavigatorLockAcquireTimeoutError),_callSuper(this,NavigatorLockAcquireTimeoutError,arguments)}return _inherits(NavigatorLockAcquireTimeoutError,e),_createClass3(NavigatorLockAcquireTimeoutError)}(es);function navigatorLock(e,l,_){return _navigatorLock.apply(this,arguments)}function _navigatorLock(){return _navigatorLock=_asyncToGenerator(_regenerator().m(function _callee228(e,l,_){var S;return _regenerator().w(function(k){for(;;)switch(k.n){case 0:return S=new globalThis.AbortController,l>0&&setTimeout(function(){S.abort()},l),k.n=1,Promise.resolve().then(function(){return globalThis.navigator.locks.request(e,0===l?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:S.signal},function(){var S=_asyncToGenerator(_regenerator().m(function _callee227(S){return _regenerator().w(function(k){for(;;)switch(k.p=k.n){case 0:if(!S){k.n=5;break}return k.p=1,k.n=2,_();case 2:return k.a(2,k.v);case 3:return k.p=3,k.f(3);case 4:k.n=12;break;case 5:if(0!==l){k.n=6;break}throw new ts('Acquiring an exclusive Navigator LockManager lock "'.concat(e,'" immediately failed'));case 6:if(!$o){k.n=10;break}return k.p=7,k.n=8,globalThis.navigator.locks.query();case 8:k.v,k.n=10;break;case 9:k.p=9,k.v;case 10:return k.n=11,_();case 11:return k.a(2,k.v);case 12:return k.a(2)}},_callee227,null,[[7,9],[1,,3,4]])}));return function(e){return S.apply(this,arguments)}}())});case 1:return k.a(2,k.v)}},_callee228)})),_navigatorLock.apply(this,arguments)}function getAddress(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error('@supabase/auth-js: Address "'.concat(e,'" is invalid.'));return e.toLowerCase()}function fromHex(e){return parseInt(e,16)}function toHex(e){var l=(new TextEncoder).encode(e);return"0x"+Array.from(l,function(e){return e.toString(16).padStart(2,"0")}).join("")}function createSiweMessage(e){var l,_=e.chainId,S=e.domain,k=e.expirationTime,E=e.issuedAt,T=void 0===E?new Date:E,M=e.nonce,R=e.notBefore,I=e.requestId,D=e.resources,O=e.scheme,L=e.uri,U=e.version;if(!Number.isInteger(_))throw new Error('@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: '.concat(_));if(!S)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(M&&M.length<8)throw new Error('@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: '.concat(M));if(!L)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if("1"!==U)throw new Error("@supabase/auth-js: Invalid SIWE message field \"version\". Version must be '1'. Provided value: ".concat(U));if(null===(l=e.statement)||void 0===l?void 0:l.includes("\n"))throw new Error("@supabase/auth-js: Invalid SIWE message field \"statement\". Statement must not include '\\n'. Provided value: ".concat(e.statement));var B=getAddress(e.address),z=O?"".concat(O,"://").concat(S):S,G=e.statement?"".concat(e.statement,"\n"):"",j="".concat(z," wants you to sign in with your Ethereum account:\n").concat(B,"\n\n").concat(G),H="URI: ".concat(L,"\nVersion: ").concat(U,"\nChain ID: ").concat(_).concat(M?"\nNonce: ".concat(M):"","\nIssued At: ").concat(T.toISOString());if(k&&(H+="\nExpiration Time: ".concat(k.toISOString())),R&&(H+="\nNot Before: ".concat(R.toISOString())),I&&(H+="\nRequest ID: ".concat(I)),D){var V,W="\nResources:",q=_createForOfIteratorHelper2(D);try{for(q.s();!(V=q.n()).done;){var X=V.value;if(!X||"string"!=typeof X)throw new Error('@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: '.concat(X));W+="\n- ".concat(X)}}catch(K){q.e(K)}finally{q.f()}H+=W}return"".concat(j,"\n").concat(H)}var rs=function(e){function WebAuthnError(e){var l,_,S=e.message,k=e.code,E=e.cause,T=e.name;return _classCallCheck3(this,WebAuthnError),(l=_callSuper(this,WebAuthnError,[S,{cause:E}])).__isWebAuthnError=!0,l.name=null!==(_=null!=T?T:E instanceof Error?E.name:void 0)&&void 0!==_?_:"Unknown Error",l.code=k,l}return _inherits(WebAuthnError,e),_createClass3(WebAuthnError)}(_wrapNativeSuper(Error)),ns=function(e){function WebAuthnUnknownError(e,l){var _;return _classCallCheck3(this,WebAuthnUnknownError),(_=_callSuper(this,WebAuthnUnknownError,[{code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:l,message:e}])).name="WebAuthnUnknownError",_.originalError=l,_}return _inherits(WebAuthnUnknownError,e),_createClass3(WebAuthnUnknownError)}(rs);function identifyRegistrationError(e){var l,_,S,k=e.error,E=e.options,T=E.publicKey;if(!T)throw Error("options was missing required publicKey property");if("AbortError"===k.name){if(E.signal instanceof AbortSignal)return new rs({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:k})}else if("ConstraintError"===k.name){if(!0===(null===(l=T.authenticatorSelection)||void 0===l?void 0:l.requireResidentKey))return new rs({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:k});if("conditional"===E.mediation&&"required"===(null===(_=T.authenticatorSelection)||void 0===_?void 0:_.userVerification))return new rs({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:k});if("required"===(null===(S=T.authenticatorSelection)||void 0===S?void 0:S.userVerification))return new rs({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:k})}else{if("InvalidStateError"===k.name)return new rs({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:k});if("NotAllowedError"===k.name)return new rs({message:k.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:k});if("NotSupportedError"===k.name)return 0===T.pubKeyCredParams.filter(function(e){return"public-key"===e.type}).length?new rs({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:k}):new rs({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:k});if("SecurityError"===k.name){var M=window.location.hostname;if(!isValidDomain(M))return new rs({message:"".concat(window.location.hostname," is an invalid domain"),code:"ERROR_INVALID_DOMAIN",cause:k});if(T.rp.id!==M)return new rs({message:'The RP ID "'.concat(T.rp.id,'" is invalid for this domain'),code:"ERROR_INVALID_RP_ID",cause:k})}else if("TypeError"===k.name){if(T.user.id.byteLength<1||T.user.id.byteLength>64)return new rs({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:k})}else if("UnknownError"===k.name)return new rs({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:k})}return new rs({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:k})}function identifyAuthenticationError(e){var l=e.error,_=e.options,S=_.publicKey;if(!S)throw Error("options was missing required publicKey property");if("AbortError"===l.name){if(_.signal instanceof AbortSignal)return new rs({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:l})}else{if("NotAllowedError"===l.name)return new rs({message:l.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:l});if("SecurityError"===l.name){var k=window.location.hostname;if(!isValidDomain(k))return new rs({message:"".concat(window.location.hostname," is an invalid domain"),code:"ERROR_INVALID_DOMAIN",cause:l});if(S.rpId!==k)return new rs({message:'The RP ID "'.concat(S.rpId,'" is invalid for this domain'),code:"ERROR_INVALID_RP_ID",cause:l})}else if("UnknownError"===l.name)return new rs({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:l})}return new rs({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:l})}var __rest=function(e,l){var _={};for(var S in e)Object.prototype.hasOwnProperty.call(e,S)&&l.indexOf(S)<0&&(_[S]=e[S]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var k=0;for(S=Object.getOwnPropertySymbols(e);k<S.length;k++)l.indexOf(S[k])<0&&Object.prototype.propertyIsEnumerable.call(e,S[k])&&(_[S[k]]=e[S[k]])}return _},is=new(function(){return _createClass3(function WebAuthnAbortService(){_classCallCheck3(this,WebAuthnAbortService)},[{key:"createNewAbortSignal",value:function(){if(this.controller){var e=new Error("Cancelling existing WebAuthn API call for new one");e.name="AbortError",this.controller.abort(e)}var l=new AbortController;return this.controller=l,l.signal}},{key:"cancelCeremony",value:function(){if(this.controller){var e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}])}());function deserializeCredentialCreationOptions(e){if(!e)throw new Error("Credential creation options are required");if("undefined"!=typeof PublicKeyCredential&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&"function"==typeof PublicKeyCredential.parseCreationOptionsFromJSON)return PublicKeyCredential.parseCreationOptionsFromJSON(e);var l=e.challenge,_=e.user,S=e.excludeCredentials,k=__rest(e,["challenge","user","excludeCredentials"]),E=base64UrlToUint8Array(l).buffer,T=Object.assign(Object.assign({},_),{id:base64UrlToUint8Array(_.id).buffer}),M=Object.assign(Object.assign({},k),{challenge:E,user:T});if(S&&S.length>0){M.excludeCredentials=new Array(S.length);for(var R=0;R<S.length;R++){var I=S[R];M.excludeCredentials[R]=Object.assign(Object.assign({},I),{id:base64UrlToUint8Array(I.id).buffer,type:I.type||"public-key",transports:I.transports})}}return M}function deserializeCredentialRequestOptions(e){if(!e)throw new Error("Credential request options are required");if("undefined"!=typeof PublicKeyCredential&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&"function"==typeof PublicKeyCredential.parseRequestOptionsFromJSON)return PublicKeyCredential.parseRequestOptionsFromJSON(e);var l=e.challenge,_=e.allowCredentials,S=__rest(e,["challenge","allowCredentials"]),k=base64UrlToUint8Array(l).buffer,E=Object.assign(Object.assign({},S),{challenge:k});if(_&&_.length>0){E.allowCredentials=new Array(_.length);for(var T=0;T<_.length;T++){var M=_[T];E.allowCredentials[T]=Object.assign(Object.assign({},M),{id:base64UrlToUint8Array(M.id).buffer,type:M.type||"public-key",transports:M.transports})}}return E}function serializeCredentialCreationResponse(e){var l;if("toJSON"in e&&"function"==typeof e.toJSON)return e.toJSON();var _=e;return{id:e.id,rawId:e.id,response:{attestationObject:bytesToBase64URL(new Uint8Array(e.response.attestationObject)),clientDataJSON:bytesToBase64URL(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:null!==(l=_.authenticatorAttachment)&&void 0!==l?l:void 0}}function serializeCredentialRequestResponse(e){var l;if("toJSON"in e&&"function"==typeof e.toJSON)return e.toJSON();var _=e,S=e.getClientExtensionResults(),k=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:bytesToBase64URL(new Uint8Array(k.authenticatorData)),clientDataJSON:bytesToBase64URL(new Uint8Array(k.clientDataJSON)),signature:bytesToBase64URL(new Uint8Array(k.signature)),userHandle:k.userHandle?bytesToBase64URL(new Uint8Array(k.userHandle)):void 0},type:"public-key",clientExtensionResults:S,authenticatorAttachment:null!==(l=_.authenticatorAttachment)&&void 0!==l?l:void 0}}function isValidDomain(e){return"localhost"===e||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function browserSupportsWebAuthn(){var e,l;return!!(isBrowser()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&"function"==typeof(null===(e=null===navigator||void 0===navigator?void 0:navigator.credentials)||void 0===e?void 0:e.create)&&"function"==typeof(null===(l=null===navigator||void 0===navigator?void 0:navigator.credentials)||void 0===l?void 0:l.get))}function createCredential(e){return _createCredential.apply(this,arguments)}function _createCredential(){return(_createCredential=_asyncToGenerator(_regenerator().m(function _callee229(e){var l,_;return _regenerator().w(function(S){for(;;)switch(S.p=S.n){case 0:return S.p=0,S.n=1,navigator.credentials.create(e);case 1:if(l=S.v){S.n=2;break}return S.a(2,{data:null,error:new ns("Empty credential response",l)});case 2:if(l instanceof PublicKeyCredential){S.n=3;break}return S.a(2,{data:null,error:new ns("Browser returned unexpected credential type",l)});case 3:return S.a(2,{data:l,error:null});case 4:return S.p=4,_=S.v,S.a(2,{data:null,error:identifyRegistrationError({error:_,options:e})})}},_callee229,null,[[0,4]])}))).apply(this,arguments)}function getCredential(e){return _getCredential.apply(this,arguments)}function _getCredential(){return(_getCredential=_asyncToGenerator(_regenerator().m(function _callee230(e){var l,_;return _regenerator().w(function(S){for(;;)switch(S.p=S.n){case 0:return S.p=0,S.n=1,navigator.credentials.get(e);case 1:if(l=S.v){S.n=2;break}return S.a(2,{data:null,error:new ns("Empty credential response",l)});case 2:if(l instanceof PublicKeyCredential){S.n=3;break}return S.a(2,{data:null,error:new ns("Browser returned unexpected credential type",l)});case 3:return S.a(2,{data:l,error:null});case 4:return S.p=4,_=S.v,S.a(2,{data:null,error:identifyAuthenticationError({error:_,options:e})})}},_callee230,null,[[0,4]])}))).apply(this,arguments)}var as={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},os={userVerification:"preferred",hints:["security-key"]};function deepMerge(){for(var isObject=function(e){return null!==e&&"object"===_typeof3(e)&&!Array.isArray(e)},isArrayBufferLike=function(e){return e instanceof ArrayBuffer||ArrayBuffer.isView(e)},e={},l=arguments.length,_=new Array(l),S=0;S<l;S++)_[S]=arguments[S];for(var k=0,E=_;k<E.length;k++){var T=E[k];if(T)for(var M in T){var R=T[M];if(void 0!==R)if(Array.isArray(R))e[M]=R;else if(isArrayBufferLike(R))e[M]=R;else if(isObject(R)){var I=e[M];isObject(I)?e[M]=deepMerge(I,R):e[M]=deepMerge(R)}else e[M]=R}}return e}function mergeCredentialCreationOptions(e,l){return deepMerge(as,e,l||{})}function mergeCredentialRequestOptions(e,l){return deepMerge(os,e,l||{})}var ss=function(){return _createClass3(function WebAuthnApi(e){_classCallCheck3(this,WebAuthnApi),this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)},[{key:"_enroll",value:(k=_asyncToGenerator(_regenerator().m(function _callee96(e){return _regenerator().w(function(l){for(;;)if(0===l.n)return l.a(2,this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"})))},_callee96,this)})),function(e){return k.apply(this,arguments)})},{key:"_challenge",value:(S=_asyncToGenerator(_regenerator().m(function _callee97(e,l){var _,S,k,E,T,M,R,I,D,O,L,U,B,z,G,j,H,V,W;return _regenerator().w(function(q){for(;;)switch(q.p=q.n){case 0:return _=e.factorId,S=e.webauthn,k=e.friendlyName,E=e.signal,q.p=1,q.n=2,this.client.mfa.challenge({factorId:_,webauthn:S});case 2:if(T=q.v,M=T.data,R=T.error,M){q.n=3;break}return q.a(2,{data:null,error:R});case 3:I=null!=E?E:is.createNewAbortSignal(),"create"===M.webauthn.type&&((D=M.webauthn.credential_options.publicKey.user).name||(D.name="".concat(D.id,":").concat(k)),D.displayName||(D.displayName=D.name)),V=M.webauthn.type,q.n="create"===V?4:"request"===V?7:10;break;case 4:return O=mergeCredentialCreationOptions(M.webauthn.credential_options.publicKey,null==l?void 0:l.create),q.n=5,createCredential({publicKey:O,signal:I});case 5:if(L=q.v,U=L.data,B=L.error,!U){q.n=6;break}return q.a(2,{data:{factorId:_,challengeId:M.id,webauthn:{type:M.webauthn.type,credential_response:U}},error:null});case 6:return q.a(2,{data:null,error:B});case 7:return z=mergeCredentialRequestOptions(M.webauthn.credential_options.publicKey,null==l?void 0:l.request),q.n=8,getCredential(Object.assign(Object.assign({},M.webauthn.credential_options),{publicKey:z,signal:I}));case 8:if(G=q.v,j=G.data,H=G.error,!j){q.n=9;break}return q.a(2,{data:{factorId:_,challengeId:M.id,webauthn:{type:M.webauthn.type,credential_response:j}},error:null});case 9:return q.a(2,{data:null,error:H});case 10:q.n=13;break;case 11:if(q.p=11,!isAuthError(W=q.v)){q.n=12;break}return q.a(2,{data:null,error:W});case 12:return q.a(2,{data:null,error:new Ro("Unexpected error in challenge",W)});case 13:return q.a(2)}},_callee97,this,[[1,11]])})),function(e,l){return S.apply(this,arguments)})},{key:"_verify",value:(_=_asyncToGenerator(_regenerator().m(function _callee98(e){var l,_,S;return _regenerator().w(function(k){for(;;)if(0===k.n)return l=e.challengeId,_=e.factorId,S=e.webauthn,k.a(2,this.client.mfa.verify({factorId:_,challengeId:l,webauthn:S}))},_callee98,this)})),function(e){return _.apply(this,arguments)})},{key:"_authenticate",value:(l=_asyncToGenerator(_regenerator().m(function _callee99(e,l){var _,S,k,E,T,M,R,I,D,O,L,U;return _regenerator().w(function(B){for(;;)switch(B.p=B.n){case 0:if(_=e.factorId,S=e.webauthn,k=S.rpId,E=void 0===k?"undefined"!=typeof window?window.location.hostname:void 0:k,T=S.rpOrigins,M=void 0===T?"undefined"!=typeof window?[window.location.origin]:void 0:T,R=S.signal,E){B.n=1;break}return B.a(2,{data:null,error:new To("rpId is required for WebAuthn authentication")});case 1:if(B.p=1,browserSupportsWebAuthn()){B.n=2;break}return B.a(2,{data:null,error:new Ro("Browser does not support WebAuthn",null)});case 2:return B.n=3,this.challenge({factorId:_,webauthn:{rpId:E,rpOrigins:M},signal:R},{request:l});case 3:if(I=B.v,D=I.data,O=I.error,D){B.n=4;break}return B.a(2,{data:null,error:O});case 4:return L=D.webauthn,B.a(2,this._verify({factorId:_,challengeId:D.challengeId,webauthn:{type:L.type,rpId:E,rpOrigins:M,credential_response:L.credential_response}}));case 5:if(B.p=5,!isAuthError(U=B.v)){B.n=6;break}return B.a(2,{data:null,error:U});case 6:return B.a(2,{data:null,error:new Ro("Unexpected error in authenticate",U)})}},_callee99,this,[[1,5]])})),function(e,_){return l.apply(this,arguments)})},{key:"_register",value:(e=_asyncToGenerator(_regenerator().m(function _callee100(e,l){var _,S,k,E,T,M,R,I,D,O,L,U,B,z=this;return _regenerator().w(function(G){for(;;)switch(G.p=G.n){case 0:if(_=e.friendlyName,S=e.rpId,k=void 0===S?"undefined"!=typeof window?window.location.hostname:void 0:S,E=e.rpOrigins,T=void 0===E?"undefined"!=typeof window?[window.location.origin]:void 0:E,M=e.signal,k){G.n=1;break}return G.a(2,{data:null,error:new To("rpId is required for WebAuthn registration")});case 1:if(G.p=1,browserSupportsWebAuthn()){G.n=2;break}return G.a(2,{data:null,error:new Ro("Browser does not support WebAuthn",null)});case 2:return G.n=3,this._enroll({friendlyName:_});case 3:if(R=G.v,I=R.data,D=R.error,I){G.n=5;break}return G.n=4,this.client.mfa.listFactors().then(function(e){var l;return null===(l=e.data)||void 0===l?void 0:l.all.find(function(e){return"webauthn"===e.factor_type&&e.friendly_name===_&&"unverified"!==e.status})}).then(function(e){return e?z.client.mfa.unenroll({factorId:null==e?void 0:e.id}):void 0});case 4:return G.a(2,{data:null,error:D});case 5:return G.n=6,this._challenge({factorId:I.id,friendlyName:I.friendly_name,webauthn:{rpId:k,rpOrigins:T},signal:M},{create:l});case 6:if(O=G.v,L=O.data,U=O.error,L){G.n=7;break}return G.a(2,{data:null,error:U});case 7:return G.a(2,this._verify({factorId:I.id,challengeId:L.challengeId,webauthn:{rpId:k,rpOrigins:T,type:L.webauthn.type,credential_response:L.webauthn.credential_response}}));case 8:if(G.p=8,!isAuthError(B=G.v)){G.n=9;break}return G.a(2,{data:null,error:B});case 9:return G.a(2,{data:null,error:new Ro("Unexpected error in register",B)})}},_callee100,this,[[1,8]])})),function(l,_){return e.apply(this,arguments)})}]);var e,l,_,S,k}();!function(){if("object"!==("undefined"==typeof globalThis?"undefined":_typeof3(globalThis)))try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(ta){"undefined"!=typeof self&&(self.globalThis=self)}}();var us={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:ko,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};function lockNoOp(e,l,_){return _lockNoOp.apply(this,arguments)}function _lockNoOp(){return(_lockNoOp=_asyncToGenerator(_regenerator().m(function _callee231(e,l,_){return _regenerator().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,_();case 1:return e.a(2,e.v)}},_callee231)}))).apply(this,arguments)}var ls={},cs=function(){return _createClass3(function GoTrueClient(e){var l,_,S=this;_classCallCheck3(this,GoTrueClient),this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=GoTrueClient.nextInstanceID,GoTrueClient.nextInstanceID+=1,this.instanceID>0&&isBrowser();var k=Object.assign(Object.assign({},us),e);if(this.logDebugMessages=!!k.debug,"function"==typeof k.debug&&(this.logger=k.debug),this.persistSession=k.persistSession,this.storageKey=k.storageKey,this.autoRefreshToken=k.autoRefreshToken,this.admin=new Zo({url:k.url,headers:k.headers,fetch:k.fetch}),this.url=k.url,this.headers=k.headers,this.fetch=resolveFetch(k.fetch),this.lock=k.lock||lockNoOp,this.detectSessionInUrl=k.detectSessionInUrl,this.flowType=k.flowType,this.hasCustomAuthorizationHeader=k.hasCustomAuthorizationHeader,k.lock?this.lock=k.lock:isBrowser()&&(null===(l=null===globalThis||void 0===globalThis?void 0:globalThis.navigator)||void 0===l?void 0:l.locks)?this.lock=navigatorLock:this.lock=lockNoOp,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new ss(this)},this.persistSession?(k.storage?this.storage=k.storage:supportsLocalStorage()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=memoryLocalStorageAdapter(this.memoryStorage)),k.userStorage&&(this.userStorage=k.userStorage)):(this.memoryStorage={},this.storage=memoryLocalStorageAdapter(this.memoryStorage)),isBrowser()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(ta){}null===(_=this.broadcastChannel)||void 0===_||_.addEventListener("message",function(){var e=_asyncToGenerator(_regenerator().m(function _callee101(e){return _regenerator().w(function(l){for(;;)switch(l.n){case 0:return S._debug("received broadcast notification from other tab or client",e),l.n=1,S._notifyAllSubscribers(e.data.event,e.data.session,!1);case 1:return l.a(2)}},_callee101)}));return function(l){return e.apply(this,arguments)}}())}this.initialize()},[{key:"jwks",get:function(){var e,l;return null!==(l=null===(e=ls[this.storageKey])||void 0===e?void 0:e.jwks)&&void 0!==l?l:{keys:[]}},set:function(e){ls[this.storageKey]=Object.assign(Object.assign({},ls[this.storageKey]),{jwks:e})}},{key:"jwks_cached_at",get:function(){var e,l;return null!==(l=null===(e=ls[this.storageKey])||void 0===e?void 0:e.cachedAt)&&void 0!==l?l:Number.MIN_SAFE_INTEGER},set:function(e){ls[this.storageKey]=Object.assign(Object.assign({},ls[this.storageKey]),{cachedAt:e})}},{key:"_debug",value:function(){if(this.logDebugMessages){for(var e=arguments.length,l=new Array(e),_=0;_<e;_++)l[_]=arguments[_];this.logger.apply(this,["GoTrueClient@".concat(this.instanceID," (").concat(So,") ").concat((new Date).toISOString())].concat(l))}return this}},{key:"initialize",value:(Le=_asyncToGenerator(_regenerator().m(function _callee104(){var e=this;return _regenerator().w(function(l){for(;;)switch(l.n){case 0:if(!this.initializePromise){l.n=2;break}return l.n=1,this.initializePromise;case 1:case 3:return l.a(2,l.v);case 2:return this.initializePromise=_asyncToGenerator(_regenerator().m(function _callee103(){return _regenerator().w(function(l){for(;;)switch(l.n){case 0:return l.n=1,e._acquireLock(-1,_asyncToGenerator(_regenerator().m(function _callee102(){return _regenerator().w(function(l){for(;;)switch(l.n){case 0:return l.n=1,e._initialize();case 1:return l.a(2,l.v)}},_callee102)})));case 1:return l.a(2,l.v)}},_callee103)}))(),l.n=3,this.initializePromise}},_callee104,this)})),function(){return Le.apply(this,arguments)})},{key:"_initialize",value:(Oe=_asyncToGenerator(_regenerator().m(function _callee106(){var e,l,_,S,k,E,T,M,R,I,D=this;return _regenerator().w(function(O){for(;;)switch(O.p=O.n){case 0:if(O.p=0,l=parseParametersFromURL(window.location.href),_="none",!this._isImplicitGrantCallback(l)){O.n=1;break}_="implicit",O.n=3;break;case 1:return O.n=2,this._isPKCECallback(l);case 2:if(!O.v){O.n=3;break}_="pkce";case 3:if(!isBrowser()||!this.detectSessionInUrl||"none"===_){O.n=9;break}return O.n=4,this._getSessionFromURL(l,_);case 4:if(S=O.v,k=S.data,!(E=S.error)){O.n=7;break}if(this._debug("#_initialize()","error detecting session from URL",E),!isAuthImplicitGrantRedirectError(E)){O.n=5;break}if("identity_already_exists"!==(T=null===(e=E.details)||void 0===e?void 0:e.code)&&"identity_not_found"!==T&&"single_identity_not_deletable"!==T){O.n=5;break}return O.a(2,{error:E});case 5:return O.n=6,this._removeSession();case 6:return O.a(2,{error:E});case 7:return M=k.session,R=k.redirectType,this._debug("#_initialize()","detected session in URL",M,"redirect type",R),O.n=8,this._saveSession(M);case 8:return setTimeout(_asyncToGenerator(_regenerator().m(function _callee105(){return _regenerator().w(function(e){for(;;)switch(e.n){case 0:if("recovery"!==R){e.n=2;break}return e.n=1,D._notifyAllSubscribers("PASSWORD_RECOVERY",M);case 1:e.n=3;break;case 2:return e.n=3,D._notifyAllSubscribers("SIGNED_IN",M);case 3:return e.a(2)}},_callee105)})),0),O.a(2,{error:null});case 9:return O.n=10,this._recoverAndRefresh();case 10:return O.a(2,{error:null});case 11:if(O.p=11,!isAuthError(I=O.v)){O.n=12;break}return O.a(2,{error:I});case 12:return O.a(2,{error:new Ro("Unexpected error during initialization",I)});case 13:return O.p=13,O.n=14,this._handleVisibilityChange();case 14:return this._debug("#_initialize()","end"),O.f(13);case 15:return O.a(2)}},_callee106,this,[[0,11,13,15]])})),function(){return Oe.apply(this,arguments)})},{key:"signInAnonymously",value:(De=_asyncToGenerator(_regenerator().m(function _callee107(e){var l,_,S,k,E,T,M,R,I;return _regenerator().w(function(D){for(;;)switch(D.p=D.n){case 0:return D.p=0,D.n=1,_request(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,body:{data:null!==(_=null===(l=null==e?void 0:e.options)||void 0===l?void 0:l.data)&&void 0!==_?_:{},gotrue_meta_security:{captcha_token:null===(S=null==e?void 0:e.options)||void 0===S?void 0:S.captchaToken}},xform:_sessionResponse});case 1:if(k=D.v,E=k.data,!(T=k.error)&&E){D.n=2;break}return D.a(2,{data:{user:null,session:null},error:T});case 2:if(M=E.session,R=E.user,!E.session){D.n=4;break}return D.n=3,this._saveSession(E.session);case 3:return D.n=4,this._notifyAllSubscribers("SIGNED_IN",M);case 4:return D.a(2,{data:{user:R,session:M},error:null});case 5:if(D.p=5,!isAuthError(I=D.v)){D.n=6;break}return D.a(2,{data:{user:null,session:null},error:I});case 6:throw I;case 7:return D.a(2)}},_callee107,this,[[0,5]])})),function(e){return De.apply(this,arguments)})},{key:"signUp",value:(Pe=_asyncToGenerator(_regenerator().m(function _callee108(e){var l,_,S,k,E,T,M,R,I,D,O,L,U,B,z,G,j,H,V,W;return _regenerator().w(function(q){for(;;)switch(q.p=q.n){case 0:if(q.p=0,!("email"in e)){q.n=4;break}if(E=e.email,T=e.password,M=e.options,R=null,I=null,"pkce"!==this.flowType){q.n=2;break}return q.n=1,getCodeChallengeAndMethod(this.storage,this.storageKey);case 1:D=q.v,O=_slicedToArray(D,2),R=O[0],I=O[1];case 2:return q.n=3,_request(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,redirectTo:null==M?void 0:M.emailRedirectTo,body:{email:E,password:T,data:null!==(l=null==M?void 0:M.data)&&void 0!==l?l:{},gotrue_meta_security:{captcha_token:null==M?void 0:M.captchaToken},code_challenge:R,code_challenge_method:I},xform:_sessionResponse});case 3:k=q.v,q.n=7;break;case 4:if(!("phone"in e)){q.n=6;break}return L=e.phone,U=e.password,B=e.options,q.n=5,_request(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,body:{phone:L,password:U,data:null!==(_=null==B?void 0:B.data)&&void 0!==_?_:{},channel:null!==(S=null==B?void 0:B.channel)&&void 0!==S?S:"sms",gotrue_meta_security:{captcha_token:null==B?void 0:B.captchaToken}},xform:_sessionResponse});case 5:k=q.v,q.n=7;break;case 6:throw new Oo("You must provide either an email or phone number and a password");case 7:if(G=(z=k).data,!(j=z.error)&&G){q.n=8;break}return q.a(2,{data:{user:null,session:null},error:j});case 8:if(H=G.session,V=G.user,!G.session){q.n=10;break}return q.n=9,this._saveSession(G.session);case 9:return q.n=10,this._notifyAllSubscribers("SIGNED_IN",H);case 10:return q.a(2,{data:{user:V,session:H},error:null});case 11:if(q.p=11,!isAuthError(W=q.v)){q.n=12;break}return q.a(2,{data:{user:null,session:null},error:W});case 12:throw W;case 13:return q.a(2)}},_callee108,this,[[0,11]])})),function(e){return Pe.apply(this,arguments)})},{key:"signInWithPassword",value:(Ie=_asyncToGenerator(_regenerator().m(function _callee109(e){var l,_,S,k,E,T,M,R,I,D,O;return _regenerator().w(function(L){for(;;)switch(L.p=L.n){case 0:if(L.p=0,!("email"in e)){L.n=2;break}return _=e.email,S=e.password,k=e.options,L.n=1,_request(this.fetch,"POST","".concat(this.url,"/token?grant_type=password"),{headers:this.headers,body:{email:_,password:S,gotrue_meta_security:{captcha_token:null==k?void 0:k.captchaToken}},xform:_sessionResponsePassword});case 1:case 3:l=L.v,L.n=5;break;case 2:if(!("phone"in e)){L.n=4;break}return E=e.phone,T=e.password,M=e.options,L.n=3,_request(this.fetch,"POST","".concat(this.url,"/token?grant_type=password"),{headers:this.headers,body:{phone:E,password:T,gotrue_meta_security:{captcha_token:null==M?void 0:M.captchaToken}},xform:_sessionResponsePassword});case 4:throw new Oo("You must provide either an email or phone number and a password");case 5:if(I=(R=l).data,!(D=R.error)){L.n=6;break}return L.a(2,{data:{user:null,session:null},error:D});case 6:if(I&&I.session&&I.user){L.n=7;break}return L.a(2,{data:{user:null,session:null},error:new Do});case 7:if(!I.session){L.n=9;break}return L.n=8,this._saveSession(I.session);case 8:return L.n=9,this._notifyAllSubscribers("SIGNED_IN",I.session);case 9:return L.a(2,{data:Object.assign({user:I.user,session:I.session},I.weak_password?{weakPassword:I.weak_password}:null),error:D});case 10:if(L.p=10,!isAuthError(O=L.v)){L.n=11;break}return L.a(2,{data:{user:null,session:null},error:O});case 11:throw O;case 12:return L.a(2)}},_callee109,this,[[0,10]])})),function(e){return Ie.apply(this,arguments)})},{key:"signInWithOAuth",value:(Re=_asyncToGenerator(_regenerator().m(function _callee110(e){var l,_,S,k;return _regenerator().w(function(E){for(;;)switch(E.n){case 0:return E.n=1,this._handleProviderSignIn(e.provider,{redirectTo:null===(l=e.options)||void 0===l?void 0:l.redirectTo,scopes:null===(_=e.options)||void 0===_?void 0:_.scopes,queryParams:null===(S=e.options)||void 0===S?void 0:S.queryParams,skipBrowserRedirect:null===(k=e.options)||void 0===k?void 0:k.skipBrowserRedirect});case 1:return E.a(2,E.v)}},_callee110,this)})),function(e){return Re.apply(this,arguments)})},{key:"exchangeCodeForSession",value:(Me=_asyncToGenerator(_regenerator().m(function _callee112(e){var l=this;return _regenerator().w(function(_){for(;;)switch(_.n){case 0:return _.n=1,this.initializePromise;case 1:return _.a(2,this._acquireLock(-1,_asyncToGenerator(_regenerator().m(function _callee111(){return _regenerator().w(function(_){for(;;)if(0===_.n)return _.a(2,l._exchangeCodeForSession(e))},_callee111)}))))}},_callee112,this)})),function(e){return Me.apply(this,arguments)})},{key:"signInWithWeb3",value:(Te=_asyncToGenerator(_regenerator().m(function _callee113(e){var l,_;return _regenerator().w(function(S){for(;;)switch(S.n){case 0:l=e.chain,_=l,S.n="ethereum"===_?1:"solana"===_?3:5;break;case 1:return S.n=2,this.signInWithEthereum(e);case 2:case 4:return S.a(2,S.v);case 3:return S.n=4,this.signInWithSolana(e);case 5:throw new Error('@supabase/auth-js: Unsupported chain "'.concat(l,'"'));case 6:return S.a(2)}},_callee113,this)})),function(e){return Te.apply(this,arguments)})},{key:"signInWithEthereum",value:(Ce=_asyncToGenerator(_regenerator().m(function _callee114(e){var l,_,S,k,E,T,M,R,I,D,O,L,U,B,z,G,j,H,V,W,q,X,K,Y,Q,J,Z,$;return _regenerator().w(function(ee){for(;;)switch(ee.p=ee.n){case 0:if(!("message"in e)){ee.n=1;break}L=e.message,U=e.signature,ee.n=12;break;case 1:if(e.chain,B=e.wallet,z=e.statement,G=e.options,isBrowser()){ee.n=3;break}if("object"===_typeof3(B)&&(null==G?void 0:G.url)){ee.n=2;break}throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");case 2:j=B,ee.n=6;break;case 3:if("object"!==_typeof3(B)){ee.n=4;break}j=B,ee.n=6;break;case 4:if(!("ethereum"in(H=window))||"object"!==_typeof3(H.ethereum)||!("request"in H.ethereum)||"function"!=typeof H.ethereum.request){ee.n=5;break}j=H.ethereum,ee.n=6;break;case 5:throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.");case 6:return V=new URL(null!==(l=null==G?void 0:G.url)&&void 0!==l?l:window.location.href),ee.n=7,j.request({method:"eth_requestAccounts"}).then(function(e){return e}).catch(function(){throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});case 7:if((W=ee.v)&&0!==W.length){ee.n=8;break}throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");case 8:if(q=getAddress(W[0]),X=null===(_=null==G?void 0:G.signInWithEthereum)||void 0===_?void 0:_.chainId){ee.n=10;break}return ee.n=9,j.request({method:"eth_chainId"});case 9:K=ee.v,X=fromHex(K);case 10:return Y={domain:V.host,address:q,statement:z,uri:V.href,version:"1",chainId:X,nonce:null===(S=null==G?void 0:G.signInWithEthereum)||void 0===S?void 0:S.nonce,issuedAt:null!==(E=null===(k=null==G?void 0:G.signInWithEthereum)||void 0===k?void 0:k.issuedAt)&&void 0!==E?E:new Date,expirationTime:null===(T=null==G?void 0:G.signInWithEthereum)||void 0===T?void 0:T.expirationTime,notBefore:null===(M=null==G?void 0:G.signInWithEthereum)||void 0===M?void 0:M.notBefore,requestId:null===(R=null==G?void 0:G.signInWithEthereum)||void 0===R?void 0:R.requestId,resources:null===(I=null==G?void 0:G.signInWithEthereum)||void 0===I?void 0:I.resources},L=createSiweMessage(Y),ee.n=11,j.request({method:"personal_sign",params:[toHex(L),q]});case 11:U=ee.v;case 12:return ee.p=12,ee.n=13,_request(this.fetch,"POST","".concat(this.url,"/token?grant_type=web3"),{headers:this.headers,body:Object.assign({chain:"ethereum",message:L,signature:U},(null===(D=e.options)||void 0===D?void 0:D.captchaToken)?{gotrue_meta_security:{captcha_token:null===(O=e.options)||void 0===O?void 0:O.captchaToken}}:null),xform:_sessionResponse});case 13:if(Q=ee.v,J=Q.data,!(Z=Q.error)){ee.n=14;break}throw Z;case 14:if(J&&J.session&&J.user){ee.n=15;break}return ee.a(2,{data:{user:null,session:null},error:new Do});case 15:if(!J.session){ee.n=17;break}return ee.n=16,this._saveSession(J.session);case 16:return ee.n=17,this._notifyAllSubscribers("SIGNED_IN",J.session);case 17:return ee.a(2,{data:Object.assign({},J),error:Z});case 18:if(ee.p=18,!isAuthError($=ee.v)){ee.n=19;break}return ee.a(2,{data:{user:null,session:null},error:$});case 19:throw $;case 20:return ee.a(2)}},_callee114,this,[[12,18]])})),function(e){return Ce.apply(this,arguments)})},{key:"signInWithSolana",value:(Ee=_asyncToGenerator(_regenerator().m(function _callee115(e){var l,_,S,k,E,T,M,R,I,D,O,L,U,B,z,G,j,H,V,W,q,X,K,Y,Q,J,Z;return _regenerator().w(function($){for(;;)switch($.p=$.n){case 0:if(!("message"in e)){$.n=1;break}U=e.message,B=e.signature,$.n=17;break;case 1:if(e.chain,z=e.wallet,G=e.statement,j=e.options,isBrowser()){$.n=3;break}if("object"===_typeof3(z)&&(null==j?void 0:j.url)){$.n=2;break}throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");case 2:H=z,$.n=6;break;case 3:if("object"!==_typeof3(z)){$.n=4;break}H=z,$.n=6;break;case 4:if(!("solana"in(V=window))||"object"!==_typeof3(V.solana)||!("signIn"in V.solana&&"function"==typeof V.solana.signIn||"signMessage"in V.solana&&"function"==typeof V.solana.signMessage)){$.n=5;break}H=V.solana,$.n=6;break;case 5:throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.");case 6:if(W=new URL(null!==(l=null==j?void 0:j.url)&&void 0!==l?l:window.location.href),!("signIn"in H)||!H.signIn){$.n=13;break}return $.n=7,H.signIn(Object.assign(Object.assign(Object.assign({issuedAt:(new Date).toISOString()},null==j?void 0:j.signInWithSolana),{version:"1",domain:W.host,uri:W.href}),G?{statement:G}:null));case 7:if(q=$.v,!Array.isArray(q)||!q[0]||"object"!==_typeof3(q[0])){$.n=8;break}X=q[0],$.n=10;break;case 8:if(!(q&&"object"===_typeof3(q)&&"signedMessage"in q&&"signature"in q)){$.n=9;break}X=q,$.n=10;break;case 9:throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");case 10:if(!("signedMessage"in X&&"signature"in X&&("string"==typeof X.signedMessage||X.signedMessage instanceof Uint8Array)&&X.signature instanceof Uint8Array)){$.n=11;break}U="string"==typeof X.signedMessage?X.signedMessage:(new TextDecoder).decode(X.signedMessage),B=X.signature,$.n=12;break;case 11:throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields");case 12:$.n=17;break;case 13:if("signMessage"in H&&"function"==typeof H.signMessage&&"publicKey"in H&&"object"===_typeof3(H)&&H.publicKey&&"toBase58"in H.publicKey&&"function"==typeof H.publicKey.toBase58){$.n=14;break}throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");case 14:return U=["".concat(W.host," wants you to sign in with your Solana account:"),H.publicKey.toBase58()].concat(_toConsumableArray3(G?["",G,""]:[""]),["Version: 1","URI: ".concat(W.href),"Issued At: ".concat(null!==(S=null===(_=null==j?void 0:j.signInWithSolana)||void 0===_?void 0:_.issuedAt)&&void 0!==S?S:(new Date).toISOString())],_toConsumableArray3((null===(k=null==j?void 0:j.signInWithSolana)||void 0===k?void 0:k.notBefore)?["Not Before: ".concat(j.signInWithSolana.notBefore)]:[]),_toConsumableArray3((null===(E=null==j?void 0:j.signInWithSolana)||void 0===E?void 0:E.expirationTime)?["Expiration Time: ".concat(j.signInWithSolana.expirationTime)]:[]),_toConsumableArray3((null===(T=null==j?void 0:j.signInWithSolana)||void 0===T?void 0:T.chainId)?["Chain ID: ".concat(j.signInWithSolana.chainId)]:[]),_toConsumableArray3((null===(M=null==j?void 0:j.signInWithSolana)||void 0===M?void 0:M.nonce)?["Nonce: ".concat(j.signInWithSolana.nonce)]:[]),_toConsumableArray3((null===(R=null==j?void 0:j.signInWithSolana)||void 0===R?void 0:R.requestId)?["Request ID: ".concat(j.signInWithSolana.requestId)]:[]),_toConsumableArray3((null===(D=null===(I=null==j?void 0:j.signInWithSolana)||void 0===I?void 0:I.resources)||void 0===D?void 0:D.length)?["Resources"].concat(_toConsumableArray3(j.signInWithSolana.resources.map(function(e){return"- ".concat(e)}))):[])).join("\n"),$.n=15,H.signMessage((new TextEncoder).encode(U),"utf8");case 15:if((K=$.v)&&K instanceof Uint8Array){$.n=16;break}throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");case 16:B=K;case 17:return $.p=17,$.n=18,_request(this.fetch,"POST","".concat(this.url,"/token?grant_type=web3"),{headers:this.headers,body:Object.assign({chain:"solana",message:U,signature:bytesToBase64URL(B)},(null===(O=e.options)||void 0===O?void 0:O.captchaToken)?{gotrue_meta_security:{captcha_token:null===(L=e.options)||void 0===L?void 0:L.captchaToken}}:null),xform:_sessionResponse});case 18:if(Y=$.v,Q=Y.data,!(J=Y.error)){$.n=19;break}throw J;case 19:if(Q&&Q.session&&Q.user){$.n=20;break}return $.a(2,{data:{user:null,session:null},error:new Do});case 20:if(!Q.session){$.n=22;break}return $.n=21,this._saveSession(Q.session);case 21:return $.n=22,this._notifyAllSubscribers("SIGNED_IN",Q.session);case 22:return $.a(2,{data:Object.assign({},Q),error:J});case 23:if($.p=23,!isAuthError(Z=$.v)){$.n=24;break}return $.a(2,{data:{user:null,session:null},error:Z});case 24:throw Z;case 25:return $.a(2)}},_callee115,this,[[17,23]])})),function(e){return Ee.apply(this,arguments)})},{key:"_exchangeCodeForSession",value:(Ae=_asyncToGenerator(_regenerator().m(function _callee116(e){var l,_,S,k,E,T,M,R,I;return _regenerator().w(function(D){for(;;)switch(D.p=D.n){case 0:return D.n=1,Wo(this.storage,"".concat(this.storageKey,"-code-verifier"));case 1:return l=D.v,_=(null!=l?l:"").split("/"),S=_slicedToArray(_,2),k=S[0],E=S[1],D.p=2,D.n=3,_request(this.fetch,"POST","".concat(this.url,"/token?grant_type=pkce"),{headers:this.headers,body:{auth_code:e,code_verifier:k},xform:_sessionResponse});case 3:return T=D.v,M=T.data,R=T.error,D.n=4,qo(this.storage,"".concat(this.storageKey,"-code-verifier"));case 4:if(!R){D.n=5;break}throw R;case 5:if(M&&M.session&&M.user){D.n=6;break}return D.a(2,{data:{user:null,session:null,redirectType:null},error:new Do});case 6:if(!M.session){D.n=8;break}return D.n=7,this._saveSession(M.session);case 7:return D.n=8,this._notifyAllSubscribers("SIGNED_IN",M.session);case 8:return D.a(2,{data:Object.assign(Object.assign({},M),{redirectType:null!=E?E:null}),error:R});case 9:if(D.p=9,!isAuthError(I=D.v)){D.n=10;break}return D.a(2,{data:{user:null,session:null,redirectType:null},error:I});case 10:throw I;case 11:return D.a(2)}},_callee116,this,[[2,9]])})),function(e){return Ae.apply(this,arguments)})},{key:"signInWithIdToken",value:(ke=_asyncToGenerator(_regenerator().m(function _callee117(e){var l,_,S,k,E,T,M,R,I;return _regenerator().w(function(D){for(;;)switch(D.p=D.n){case 0:return D.p=0,l=e.options,_=e.provider,S=e.token,k=e.access_token,E=e.nonce,D.n=1,_request(this.fetch,"POST","".concat(this.url,"/token?grant_type=id_token"),{headers:this.headers,body:{provider:_,id_token:S,access_token:k,nonce:E,gotrue_meta_security:{captcha_token:null==l?void 0:l.captchaToken}},xform:_sessionResponse});case 1:if(T=D.v,M=T.data,!(R=T.error)){D.n=2;break}return D.a(2,{data:{user:null,session:null},error:R});case 2:if(M&&M.session&&M.user){D.n=3;break}return D.a(2,{data:{user:null,session:null},error:new Do});case 3:if(!M.session){D.n=5;break}return D.n=4,this._saveSession(M.session);case 4:return D.n=5,this._notifyAllSubscribers("SIGNED_IN",M.session);case 5:return D.a(2,{data:M,error:R});case 6:if(D.p=6,!isAuthError(I=D.v)){D.n=7;break}return D.a(2,{data:{user:null,session:null},error:I});case 7:throw I;case 8:return D.a(2)}},_callee117,this,[[0,6]])})),function(e){return ke.apply(this,arguments)})},{key:"signInWithOtp",value:(xe=_asyncToGenerator(_regenerator().m(function _callee118(e){var l,_,S,k,E,T,M,R,I,D,O,L,U,B,z,G,j,H,V;return _regenerator().w(function(W){for(;;)switch(W.p=W.n){case 0:if(W.p=0,!("email"in e)){W.n=4;break}if(T=e.email,M=e.options,R=null,I=null,"pkce"!==this.flowType){W.n=2;break}return W.n=1,getCodeChallengeAndMethod(this.storage,this.storageKey);case 1:D=W.v,O=_slicedToArray(D,2),R=O[0],I=O[1];case 2:return W.n=3,_request(this.fetch,"POST","".concat(this.url,"/otp"),{headers:this.headers,body:{email:T,data:null!==(l=null==M?void 0:M.data)&&void 0!==l?l:{},create_user:null===(_=null==M?void 0:M.shouldCreateUser)||void 0===_||_,gotrue_meta_security:{captcha_token:null==M?void 0:M.captchaToken},code_challenge:R,code_challenge_method:I},redirectTo:null==M?void 0:M.emailRedirectTo});case 3:return L=W.v,U=L.error,W.a(2,{data:{user:null,session:null},error:U});case 4:if(!("phone"in e)){W.n=6;break}return B=e.phone,z=e.options,W.n=5,_request(this.fetch,"POST","".concat(this.url,"/otp"),{headers:this.headers,body:{phone:B,data:null!==(S=null==z?void 0:z.data)&&void 0!==S?S:{},create_user:null===(k=null==z?void 0:z.shouldCreateUser)||void 0===k||k,gotrue_meta_security:{captcha_token:null==z?void 0:z.captchaToken},channel:null!==(E=null==z?void 0:z.channel)&&void 0!==E?E:"sms"}});case 5:return G=W.v,j=G.data,H=G.error,W.a(2,{data:{user:null,session:null,messageId:null==j?void 0:j.message_id},error:H});case 6:throw new Oo("You must provide either an email or phone number.");case 7:if(W.p=7,!isAuthError(V=W.v)){W.n=8;break}return W.a(2,{data:{user:null,session:null},error:V});case 8:throw V;case 9:return W.a(2)}},_callee118,this,[[0,7]])})),function(e){return xe.apply(this,arguments)})},{key:"verifyOtp",value:(we=_asyncToGenerator(_regenerator().m(function _callee119(e){var l,_,S,k,E,T,M,R,I,D;return _regenerator().w(function(O){for(;;)switch(O.p=O.n){case 0:return O.p=0,S=void 0,k=void 0,"options"in e&&(S=null===(l=e.options)||void 0===l?void 0:l.redirectTo,k=null===(_=e.options)||void 0===_?void 0:_.captchaToken),O.n=1,_request(this.fetch,"POST","".concat(this.url,"/verify"),{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:k}}),redirectTo:S,xform:_sessionResponse});case 1:if(E=O.v,T=E.data,!(M=E.error)){O.n=2;break}throw M;case 2:if(T){O.n=3;break}throw new Error("An error occurred on token verification.");case 3:if(R=T.session,I=T.user,!(null==R?void 0:R.access_token)){O.n=5;break}return O.n=4,this._saveSession(R);case 4:return O.n=5,this._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",R);case 5:return O.a(2,{data:{user:I,session:R},error:null});case 6:if(O.p=6,!isAuthError(D=O.v)){O.n=7;break}return O.a(2,{data:{user:null,session:null},error:D});case 7:throw D;case 8:return O.a(2)}},_callee119,this,[[0,6]])})),function(e){return we.apply(this,arguments)})},{key:"signInWithSSO",value:(Se=_asyncToGenerator(_regenerator().m(function _callee120(e){var l,_,S,k,E,T,M,R;return _regenerator().w(function(I){for(;;)switch(I.p=I.n){case 0:if(I.p=0,k=null,E=null,"pkce"!==this.flowType){I.n=2;break}return I.n=1,getCodeChallengeAndMethod(this.storage,this.storageKey);case 1:T=I.v,M=_slicedToArray(T,2),k=M[0],E=M[1];case 2:return I.n=3,_request(this.fetch,"POST","".concat(this.url,"/sso"),{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(_=null===(l=e.options)||void 0===l?void 0:l.redirectTo)&&void 0!==_?_:void 0}),(null===(S=null==e?void 0:e.options)||void 0===S?void 0:S.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:k,code_challenge_method:E}),headers:this.headers,xform:_ssoResponse});case 3:return I.a(2,I.v);case 4:if(I.p=4,!isAuthError(R=I.v)){I.n=5;break}return I.a(2,{data:null,error:R});case 5:throw R;case 6:return I.a(2)}},_callee120,this,[[0,4]])})),function(e){return Se.apply(this,arguments)})},{key:"reauthenticate",value:(be=_asyncToGenerator(_regenerator().m(function _callee122(){var e=this;return _regenerator().w(function(l){for(;;)switch(l.n){case 0:return l.n=1,this.initializePromise;case 1:return l.n=2,this._acquireLock(-1,_asyncToGenerator(_regenerator().m(function _callee121(){return _regenerator().w(function(l){for(;;)switch(l.n){case 0:return l.n=1,e._reauthenticate();case 1:return l.a(2,l.v)}},_callee121)})));case 2:return l.a(2,l.v)}},_callee122,this)})),function(){return be.apply(this,arguments)})},{key:"_reauthenticate",value:(_e=_asyncToGenerator(_regenerator().m(function _callee124(){var e,l=this;return _regenerator().w(function(_){for(;;)switch(_.p=_.n){case 0:return _.p=0,_.n=1,this._useSession(function(){var e=_asyncToGenerator(_regenerator().m(function _callee123(e){var _,S,k,E;return _regenerator().w(function(T){for(;;)switch(T.n){case 0:if(_=e.data.session,!(S=e.error)){T.n=1;break}throw S;case 1:if(_){T.n=2;break}throw new Po;case 2:return T.n=3,_request(l.fetch,"GET","".concat(l.url,"/reauthenticate"),{headers:l.headers,jwt:_.access_token});case 3:return k=T.v,E=k.error,T.a(2,{data:{user:null,session:null},error:E})}},_callee123)}));return function(l){return e.apply(this,arguments)}}());case 1:return _.a(2,_.v);case 2:if(_.p=2,!isAuthError(e=_.v)){_.n=3;break}return _.a(2,{data:{user:null,session:null},error:e});case 3:throw e;case 4:return _.a(2)}},_callee124,this,[[0,2]])})),function(){return _e.apply(this,arguments)})},{key:"resend",value:(ye=_asyncToGenerator(_regenerator().m(function _callee125(e){var l,_,S,k,E,T,M,R,I,D,O,L,U;return _regenerator().w(function(B){for(;;)switch(B.p=B.n){case 0:if(B.p=0,l="".concat(this.url,"/resend"),!("email"in e)){B.n=2;break}return _=e.email,S=e.type,k=e.options,B.n=1,_request(this.fetch,"POST",l,{headers:this.headers,body:{email:_,type:S,gotrue_meta_security:{captcha_token:null==k?void 0:k.captchaToken}},redirectTo:null==k?void 0:k.emailRedirectTo});case 1:return E=B.v,T=E.error,B.a(2,{data:{user:null,session:null},error:T});case 2:if(!("phone"in e)){B.n=4;break}return M=e.phone,R=e.type,I=e.options,B.n=3,_request(this.fetch,"POST",l,{headers:this.headers,body:{phone:M,type:R,gotrue_meta_security:{captcha_token:null==I?void 0:I.captchaToken}}});case 3:return D=B.v,O=D.data,L=D.error,B.a(2,{data:{user:null,session:null,messageId:null==O?void 0:O.message_id},error:L});case 4:throw new Oo("You must provide either an email or phone number and a type");case 5:if(B.p=5,!isAuthError(U=B.v)){B.n=6;break}return B.a(2,{data:{user:null,session:null},error:U});case 6:throw U;case 7:return B.a(2)}},_callee125,this,[[0,5]])})),function(e){return ye.apply(this,arguments)})},{key:"getSession",value:(me=_asyncToGenerator(_regenerator().m(function _callee128(){var e,l=this;return _regenerator().w(function(_){for(;;)switch(_.n){case 0:return _.n=1,this.initializePromise;case 1:return _.n=2,this._acquireLock(-1,_asyncToGenerator(_regenerator().m(function _callee127(){return _regenerator().w(function(e){for(;;)if(0===e.n)return e.a(2,l._useSession(function(){var e=_asyncToGenerator(_regenerator().m(function _callee126(e){return _regenerator().w(function(l){for(;;)if(0===l.n)return l.a(2,e)},_callee126)}));return function(l){return e.apply(this,arguments)}}()))},_callee127)})));case 2:return e=_.v,_.a(2,e)}},_callee128,this)})),function(){return me.apply(this,arguments)})},{key:"_acquireLock",value:(ge=_asyncToGenerator(_regenerator().m(function _callee133(e,l){var _,S,k=this;return _regenerator().w(function(E){for(;;)switch(E.p=E.n){case 0:if(this._debug("#_acquireLock","begin",e),E.p=1,!this.lockAcquired){E.n=2;break}return _=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),S=_asyncToGenerator(_regenerator().m(function _callee129(){return _regenerator().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,_;case 1:return e.n=2,l();case 2:return e.a(2,e.v)}},_callee129)}))(),this.pendingInLock.push(_asyncToGenerator(_regenerator().m(function _callee130(){return _regenerator().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,S;case 1:e.n=3;break;case 2:e.p=2,e.v;case 3:return e.a(2)}},_callee130,null,[[0,2]])}))()),E.a(2,S);case 2:return E.n=3,this.lock("lock:".concat(this.storageKey),e,_asyncToGenerator(_regenerator().m(function _callee132(){var e,_;return _regenerator().w(function(S){for(;;)switch(S.p=S.n){case 0:return k._debug("#_acquireLock","lock acquired for storage key",k.storageKey),S.p=1,k.lockAcquired=!0,e=l(),k.pendingInLock.push(_asyncToGenerator(_regenerator().m(function _callee131(){return _regenerator().w(function(l){for(;;)switch(l.p=l.n){case 0:return l.p=0,l.n=1,e;case 1:l.n=3;break;case 2:l.p=2,l.v;case 3:return l.a(2)}},_callee131,null,[[0,2]])}))()),S.n=2,e;case 2:if(!k.pendingInLock.length){S.n=4;break}return _=_toConsumableArray3(k.pendingInLock),S.n=3,Promise.all(_);case 3:k.pendingInLock.splice(0,_.length),S.n=2;break;case 4:return S.n=5,e;case 5:return S.a(2,S.v);case 6:return S.p=6,k._debug("#_acquireLock","lock released for storage key",k.storageKey),k.lockAcquired=!1,S.f(6);case 7:return S.a(2)}},_callee132,null,[[1,,6,7]])})));case 3:return E.a(2,E.v);case 4:return E.p=4,this._debug("#_acquireLock","end"),E.f(4);case 5:return E.a(2)}},_callee133,this,[[1,,4,5]])})),function(e,l){return ge.apply(this,arguments)})},{key:"_useSession",value:(ve=_asyncToGenerator(_regenerator().m(function _callee134(e){var l;return _regenerator().w(function(_){for(;;)switch(_.p=_.n){case 0:return this._debug("#_useSession","begin"),_.p=1,_.n=2,this.__loadSession();case 2:return l=_.v,_.n=3,e(l);case 3:return _.a(2,_.v);case 4:return _.p=4,this._debug("#_useSession","end"),_.f(4);case 5:return _.a(2)}},_callee134,this,[[1,,4,5]])})),function(e){return ve.apply(this,arguments)})},{key:"__loadSession",value:(pe=_asyncToGenerator(_regenerator().m(function _callee135(){var e,l,_,S,k,E,T,M,R,I=this;return _regenerator().w(function(D){for(;;)switch(D.p=D.n){case 0:return this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack),D.p=1,e=null,D.n=2,Wo(this.storage,this.storageKey);case 2:if(l=D.v,this._debug("#getSession()","session from storage",l),null===l){D.n=4;break}if(!this._isValidSession(l)){D.n=3;break}e=l,D.n=4;break;case 3:return this._debug("#getSession()","session from storage is not valid"),D.n=4,this._removeSession();case 4:if(e){D.n=5;break}return D.a(2,{data:{session:null},error:null});case 5:if(_=!!e.expires_at&&1e3*e.expires_at-Date.now()<xo,this._debug("#__loadSession()","session has".concat(_?"":" not"," expired"),"expires_at",e.expires_at),_){D.n=8;break}if(!this.userStorage){D.n=7;break}return D.n=6,Wo(this.userStorage,this.storageKey+"-user");case 6:(null==(S=D.v)?void 0:S.user)?e.user=S.user:e.user=userNotAvailableProxy();case 7:return this.storage.isServer&&e.user&&(k=this.suppressGetSessionWarning,E=new Proxy(e,{get:function(e,l,_){return k||"user"!==l||(k=!0,I.suppressGetSessionWarning=!0),Reflect.get(e,l,_)}}),e=E),D.a(2,{data:{session:e},error:null});case 8:return D.n=9,this._callRefreshToken(e.refresh_token);case 9:if(T=D.v,M=T.data,!(R=T.error)){D.n=10;break}return D.a(2,{data:{session:null},error:R});case 10:return D.a(2,{data:{session:M},error:null});case 11:return D.p=11,this._debug("#__loadSession()","end"),D.f(11);case 12:return D.a(2)}},_callee135,this,[[1,,11,12]])})),function(){return pe.apply(this,arguments)})},{key:"getUser",value:(fe=_asyncToGenerator(_regenerator().m(function _callee137(e){var l,_=this;return _regenerator().w(function(S){for(;;)switch(S.n){case 0:if(!e){S.n=2;break}return S.n=1,this._getUser(e);case 1:return S.a(2,S.v);case 2:return S.n=3,this.initializePromise;case 3:return S.n=4,this._acquireLock(-1,_asyncToGenerator(_regenerator().m(function _callee136(){return _regenerator().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,_._getUser();case 1:return e.a(2,e.v)}},_callee136)})));case 4:return l=S.v,S.a(2,l)}},_callee137,this)})),function(e){return fe.apply(this,arguments)})},{key:"_getUser",value:(de=_asyncToGenerator(_regenerator().m(function _callee139(e){var l,_=this;return _regenerator().w(function(S){for(;;)switch(S.p=S.n){case 0:if(S.p=0,!e){S.n=2;break}return S.n=1,_request(this.fetch,"GET","".concat(this.url,"/user"),{headers:this.headers,jwt:e,xform:_userResponse});case 1:case 3:return S.a(2,S.v);case 2:return S.n=3,this._useSession(function(){var e=_asyncToGenerator(_regenerator().m(function _callee138(e){var l,S,k,E,T;return _regenerator().w(function(M){for(;;)switch(M.n){case 0:if(E=e.data,!(T=e.error)){M.n=1;break}throw T;case 1:if((null===(l=E.session)||void 0===l?void 0:l.access_token)||_.hasCustomAuthorizationHeader){M.n=2;break}return M.a(2,{data:{user:null},error:new Po});case 2:return M.n=3,_request(_.fetch,"GET","".concat(_.url,"/user"),{headers:_.headers,jwt:null!==(k=null===(S=E.session)||void 0===S?void 0:S.access_token)&&void 0!==k?k:void 0,xform:_userResponse});case 3:return M.a(2,M.v)}},_callee138)}));return function(l){return e.apply(this,arguments)}}());case 4:if(S.p=4,!isAuthError(l=S.v)){S.n=7;break}if(!isAuthSessionMissingError(l)){S.n=6;break}return S.n=5,this._removeSession();case 5:return S.n=6,qo(this.storage,"".concat(this.storageKey,"-code-verifier"));case 6:return S.a(2,{data:{user:null},error:l});case 7:throw l;case 8:return S.a(2)}},_callee139,this,[[0,4]])})),function(e){return de.apply(this,arguments)})},{key:"updateUser",value:(he=_asyncToGenerator(_regenerator().m(function _callee141(e){var l,_=this,S=arguments;return _regenerator().w(function(k){for(;;)switch(k.n){case 0:return l=S.length>1&&void 0!==S[1]?S[1]:{},k.n=1,this.initializePromise;case 1:return k.n=2,this._acquireLock(-1,_asyncToGenerator(_regenerator().m(function _callee140(){return _regenerator().w(function(S){for(;;)switch(S.n){case 0:return S.n=1,_._updateUser(e,l);case 1:return S.a(2,S.v)}},_callee140)})));case 2:return k.a(2,k.v)}},_callee141,this)})),function(e){return he.apply(this,arguments)})},{key:"_updateUser",value:(ce=_asyncToGenerator(_regenerator().m(function _callee143(e){var l,_,S=this,k=arguments;return _regenerator().w(function(E){for(;;)switch(E.p=E.n){case 0:return l=k.length>1&&void 0!==k[1]?k[1]:{},E.p=1,E.n=2,this._useSession(function(){var _=_asyncToGenerator(_regenerator().m(function _callee142(_){var k,E,T,M,R,I,D,O,L,U;return _regenerator().w(function(B){for(;;)switch(B.n){case 0:if(k=_.data,!(E=_.error)){B.n=1;break}throw E;case 1:if(k.session){B.n=2;break}throw new Po;case 2:if(T=k.session,M=null,R=null,"pkce"!==S.flowType||null==e.email){B.n=4;break}return B.n=3,getCodeChallengeAndMethod(S.storage,S.storageKey);case 3:I=B.v,D=_slicedToArray(I,2),M=D[0],R=D[1];case 4:return B.n=5,_request(S.fetch,"PUT","".concat(S.url,"/user"),{headers:S.headers,redirectTo:null==l?void 0:l.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:M,code_challenge_method:R}),jwt:T.access_token,xform:_userResponse});case 5:if(O=B.v,L=O.data,!(U=O.error)){B.n=6;break}throw U;case 6:return T.user=L.user,B.n=7,S._saveSession(T);case 7:return B.n=8,S._notifyAllSubscribers("USER_UPDATED",T);case 8:return B.a(2,{data:{user:T.user},error:null})}},_callee142)}));return function(e){return _.apply(this,arguments)}}());case 2:return E.a(2,E.v);case 3:if(E.p=3,!isAuthError(_=E.v)){E.n=4;break}return E.a(2,{data:{user:null},error:_});case 4:throw _;case 5:return E.a(2)}},_callee143,this,[[1,3]])})),function(e){return ce.apply(this,arguments)})},{key:"setSession",value:(le=_asyncToGenerator(_regenerator().m(function _callee145(e){var l=this;return _regenerator().w(function(_){for(;;)switch(_.n){case 0:return _.n=1,this.initializePromise;case 1:return _.n=2,this._acquireLock(-1,_asyncToGenerator(_regenerator().m(function _callee144(){return _regenerator().w(function(_){for(;;)switch(_.n){case 0:return _.n=1,l._setSession(e);case 1:return _.a(2,_.v)}},_callee144)})));case 2:return _.a(2,_.v)}},_callee145,this)})),function(e){return le.apply(this,arguments)})},{key:"_setSession",value:(ue=_asyncToGenerator(_regenerator().m(function _callee146(e){var l,_,S,k,E,T,M,R,I,D,O,L,U;return _regenerator().w(function(B){for(;;)switch(B.p=B.n){case 0:if(B.p=0,e.access_token&&e.refresh_token){B.n=1;break}throw new Po;case 1:if(l=Date.now()/1e3,_=l,S=!0,k=null,E=decodeJWT(e.access_token),(T=E.payload).exp&&(_=T.exp,S=_<=l),!S){B.n=5;break}return B.n=2,this._callRefreshToken(e.refresh_token);case 2:if(M=B.v,R=M.data,!(I=M.error)){B.n=3;break}return B.a(2,{data:{user:null,session:null},error:I});case 3:if(R){B.n=4;break}return B.a(2,{data:{user:null,session:null},error:null});case 4:k=R,B.n=9;break;case 5:return B.n=6,this._getUser(e.access_token);case 6:if(D=B.v,O=D.data,!(L=D.error)){B.n=7;break}throw L;case 7:return k={access_token:e.access_token,refresh_token:e.refresh_token,user:O.user,token_type:"bearer",expires_in:_-l,expires_at:_},B.n=8,this._saveSession(k);case 8:return B.n=9,this._notifyAllSubscribers("SIGNED_IN",k);case 9:return B.a(2,{data:{user:k.user,session:k},error:null});case 10:if(B.p=10,!isAuthError(U=B.v)){B.n=11;break}return B.a(2,{data:{session:null,user:null},error:U});case 11:throw U;case 12:return B.a(2)}},_callee146,this,[[0,10]])})),function(e){return ue.apply(this,arguments)})},{key:"refreshSession",value:(se=_asyncToGenerator(_regenerator().m(function _callee148(e){var l=this;return _regenerator().w(function(_){for(;;)switch(_.n){case 0:return _.n=1,this.initializePromise;case 1:return _.n=2,this._acquireLock(-1,_asyncToGenerator(_regenerator().m(function _callee147(){return _regenerator().w(function(_){for(;;)switch(_.n){case 0:return _.n=1,l._refreshSession(e);case 1:return _.a(2,_.v)}},_callee147)})));case 2:return _.a(2,_.v)}},_callee148,this)})),function(e){return se.apply(this,arguments)})},{key:"_refreshSession",value:(oe=_asyncToGenerator(_regenerator().m(function _callee150(e){var l,_=this;return _regenerator().w(function(S){for(;;)switch(S.p=S.n){case 0:return S.p=0,S.n=1,this._useSession(function(){var l=_asyncToGenerator(_regenerator().m(function _callee149(l){var S,k,E,T,M,R;return _regenerator().w(function(I){for(;;)switch(I.n){case 0:if(e){I.n=2;break}if(k=l.data,!(E=l.error)){I.n=1;break}throw E;case 1:e=null!==(S=k.session)&&void 0!==S?S:void 0;case 2:if(null==e?void 0:e.refresh_token){I.n=3;break}throw new Po;case 3:return I.n=4,_._callRefreshToken(e.refresh_token);case 4:if(T=I.v,M=T.data,!(R=T.error)){I.n=5;break}return I.a(2,{data:{user:null,session:null},error:R});case 5:if(M){I.n=6;break}return I.a(2,{data:{user:null,session:null},error:null});case 6:return I.a(2,{data:{user:M.user,session:M},error:null})}},_callee149)}));return function(e){return l.apply(this,arguments)}}());case 1:return S.a(2,S.v);case 2:if(S.p=2,!isAuthError(l=S.v)){S.n=3;break}return S.a(2,{data:{user:null,session:null},error:l});case 3:throw l;case 4:return S.a(2)}},_callee150,this,[[0,2]])})),function(e){return oe.apply(this,arguments)})},{key:"_getSessionFromURL",value:(ae=_asyncToGenerator(_regenerator().m(function _callee151(e,l){var _,S,k,E,T,M,R,I,D,O,L,U,B,z,G,j,H,V,W,q;return _regenerator().w(function(X){for(;;)switch(X.p=X.n){case 0:if(X.p=0,isBrowser()){X.n=1;break}throw new Lo("No browser detected.");case 1:if(!(e.error||e.error_description||e.error_code)){X.n=2;break}throw new Lo(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});case 2:W=l,X.n="implicit"===W?3:"pkce"===W?5:7;break;case 3:if("pkce"!==this.flowType){X.n=4;break}throw new Uo("Not a valid PKCE flow url.");case 4:case 6:return X.a(3,7);case 5:if("implicit"!==this.flowType){X.n=6;break}throw new Lo("Not a valid implicit grant flow url.");case 7:if("pkce"!==l){X.n=11;break}if(this._debug("#_initialize()","begin","is PKCE flow",!0),e.code){X.n=8;break}throw new Uo("No code detected.");case 8:return X.n=9,this._exchangeCodeForSession(e.code);case 9:if(_=X.v,S=_.data,!(k=_.error)){X.n=10;break}throw k;case 10:return(E=new URL(window.location.href)).searchParams.delete("code"),window.history.replaceState(window.history.state,"",E.toString()),X.a(2,{data:{session:S.session,redirectType:null},error:null});case 11:if(T=e.provider_token,M=e.provider_refresh_token,R=e.access_token,I=e.refresh_token,D=e.expires_in,O=e.expires_at,L=e.token_type,R&&D&&I&&L){X.n=12;break}throw new Lo("No session defined in URL");case 12:return U=Math.round(Date.now()/1e3),B=parseInt(D),z=U+B,O&&(z=parseInt(O)),X.n=13,this._getUser(R);case 13:if(G=X.v,j=G.data,!(H=G.error)){X.n=14;break}throw H;case 14:return V={provider_token:T,provider_refresh_token:M,access_token:R,expires_in:B,expires_at:z,refresh_token:I,token_type:L,user:j.user},window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),X.a(2,{data:{session:V,redirectType:e.type},error:null});case 15:if(X.p=15,!isAuthError(q=X.v)){X.n=16;break}return X.a(2,{data:{session:null,redirectType:null},error:q});case 16:throw q;case 17:return X.a(2)}},_callee151,this,[[0,15]])})),function(e,l){return ae.apply(this,arguments)})},{key:"_isImplicitGrantCallback",value:function(e){return Boolean(e.access_token||e.error_description)}},{key:"_isPKCECallback",value:(ie=_asyncToGenerator(_regenerator().m(function _callee152(e){var l;return _regenerator().w(function(_){for(;;)switch(_.n){case 0:return _.n=1,Wo(this.storage,"".concat(this.storageKey,"-code-verifier"));case 1:return l=_.v,_.a(2,!(!e.code||!l))}},_callee152,this)})),function(e){return ie.apply(this,arguments)})},{key:"signOut",value:(ne=_asyncToGenerator(_regenerator().m(function _callee154(){var e,l=this,_=arguments;return _regenerator().w(function(S){for(;;)switch(S.n){case 0:return e=_.length>0&&void 0!==_[0]?_[0]:{scope:"global"},S.n=1,this.initializePromise;case 1:return S.n=2,this._acquireLock(-1,_asyncToGenerator(_regenerator().m(function _callee153(){return _regenerator().w(function(_){for(;;)switch(_.n){case 0:return _.n=1,l._signOut(e);case 1:return _.a(2,_.v)}},_callee153)})));case 2:return S.a(2,S.v)}},_callee154,this)})),function(){return ne.apply(this,arguments)})},{key:"_signOut",value:(re=_asyncToGenerator(_regenerator().m(function _callee156(){var e,l=this,_=arguments;return _regenerator().w(function(S){for(;;)switch(S.n){case 0:return e=(_.length>0&&void 0!==_[0]?_[0]:{scope:"global"}).scope,S.n=1,this._useSession(function(){var _=_asyncToGenerator(_regenerator().m(function _callee155(_){var S,k,E,T,M,R;return _regenerator().w(function(I){for(;;)switch(I.n){case 0:if(k=_.data,!(E=_.error)){I.n=1;break}return I.a(2,{error:E});case 1:if(!(T=null===(S=k.session)||void 0===S?void 0:S.access_token)){I.n=3;break}return I.n=2,l.admin.signOut(T,e);case 2:if(M=I.v,!(R=M.error)){I.n=3;break}if(isAuthApiError(R)&&(404===R.status||401===R.status||403===R.status)){I.n=3;break}return I.a(2,{error:R});case 3:if("others"===e){I.n=5;break}return I.n=4,l._removeSession();case 4:return I.n=5,qo(l.storage,"".concat(l.storageKey,"-code-verifier"));case 5:return I.a(2,{error:null})}},_callee155)}));return function(e){return _.apply(this,arguments)}}());case 1:return S.a(2,S.v)}},_callee156,this)})),function(){return re.apply(this,arguments)})},{key:"onAuthStateChange",value:function(e){var l=this,_="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var l=16*Math.random()|0;return("x"==e?l:3&l|8).toString(16)}),S={id:_,callback:e,unsubscribe:function(){l._debug("#unsubscribe()","state change callback with id removed",_),l.stateChangeEmitters.delete(_)}};return this._debug("#onAuthStateChange()","registered callback with id",_),this.stateChangeEmitters.set(_,S),_asyncToGenerator(_regenerator().m(function _callee158(){return _regenerator().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,l.initializePromise;case 1:return e.n=2,l._acquireLock(-1,_asyncToGenerator(_regenerator().m(function _callee157(){return _regenerator().w(function(e){for(;;)switch(e.n){case 0:l._emitInitialSession(_);case 1:return e.a(2)}},_callee157)})));case 2:return e.a(2)}},_callee158)}))(),{data:{subscription:S}}}},{key:"_emitInitialSession",value:(te=_asyncToGenerator(_regenerator().m(function _callee160(e){var l=this;return _regenerator().w(function(_){for(;;)switch(_.n){case 0:return _.n=1,this._useSession(function(){var _=_asyncToGenerator(_regenerator().m(function _callee159(_){var S,k,E,T,M;return _regenerator().w(function(R){for(;;)switch(R.p=R.n){case 0:if(R.p=0,E=_.data.session,!(T=_.error)){R.n=1;break}throw T;case 1:return R.n=2,null===(S=l.stateChangeEmitters.get(e))||void 0===S?void 0:S.callback("INITIAL_SESSION",E);case 2:l._debug("INITIAL_SESSION","callback id",e,"session",E),R.n=5;break;case 3:return R.p=3,M=R.v,R.n=4,null===(k=l.stateChangeEmitters.get(e))||void 0===k?void 0:k.callback("INITIAL_SESSION",null);case 4:l._debug("INITIAL_SESSION","callback id",e,"error",M);case 5:return R.a(2)}},_callee159,null,[[0,3]])}));return function(e){return _.apply(this,arguments)}}());case 1:return _.a(2,_.v)}},_callee160,this)})),function(e){return te.apply(this,arguments)})},{key:"resetPasswordForEmail",value:(ee=_asyncToGenerator(_regenerator().m(function _callee161(e){var l,_,S,k,E,T,M=arguments;return _regenerator().w(function(R){for(;;)switch(R.p=R.n){case 0:if(l=M.length>1&&void 0!==M[1]?M[1]:{},_=null,S=null,"pkce"!==this.flowType){R.n=2;break}return R.n=1,getCodeChallengeAndMethod(this.storage,this.storageKey,!0);case 1:k=R.v,E=_slicedToArray(k,2),_=E[0],S=E[1];case 2:return R.p=2,R.n=3,_request(this.fetch,"POST","".concat(this.url,"/recover"),{body:{email:e,code_challenge:_,code_challenge_method:S,gotrue_meta_security:{captcha_token:l.captchaToken}},headers:this.headers,redirectTo:l.redirectTo});case 3:return R.a(2,R.v);case 4:if(R.p=4,!isAuthError(T=R.v)){R.n=5;break}return R.a(2,{data:null,error:T});case 5:throw T;case 6:return R.a(2)}},_callee161,this,[[2,4]])})),function(e){return ee.apply(this,arguments)})},{key:"getUserIdentities",value:($=_asyncToGenerator(_regenerator().m(function _callee162(){var e,l,_,S,k;return _regenerator().w(function(E){for(;;)switch(E.p=E.n){case 0:return E.p=0,E.n=1,this.getUser();case 1:if(l=E.v,_=l.data,!(S=l.error)){E.n=2;break}throw S;case 2:return E.a(2,{data:{identities:null!==(e=_.user.identities)&&void 0!==e?e:[]},error:null});case 3:if(E.p=3,!isAuthError(k=E.v)){E.n=4;break}return E.a(2,{data:null,error:k});case 4:throw k;case 5:return E.a(2)}},_callee162,this,[[0,3]])})),function(){return $.apply(this,arguments)})},{key:"linkIdentity",value:(Z=_asyncToGenerator(_regenerator().m(function _callee163(e){return _regenerator().w(function(l){for(;;)switch(l.n){case 0:if(!("token"in e)){l.n=1;break}return l.a(2,this.linkIdentityIdToken(e));case 1:return l.a(2,this.linkIdentityOAuth(e))}},_callee163,this)})),function(e){return Z.apply(this,arguments)})},{key:"linkIdentityOAuth",value:(J=_asyncToGenerator(_regenerator().m(function _callee165(e){var l,_,S,k,E,T=this;return _regenerator().w(function(M){for(;;)switch(M.p=M.n){case 0:return M.p=0,M.n=1,this._useSession(function(){var l=_asyncToGenerator(_regenerator().m(function _callee164(l){var _,S,k,E,M,R,I,D;return _regenerator().w(function(O){for(;;)switch(O.n){case 0:if(R=l.data,!(I=l.error)){O.n=1;break}throw I;case 1:return O.n=2,T._getUrlForProvider("".concat(T.url,"/user/identities/authorize"),e.provider,{redirectTo:null===(_=e.options)||void 0===_?void 0:_.redirectTo,scopes:null===(S=e.options)||void 0===S?void 0:S.scopes,queryParams:null===(k=e.options)||void 0===k?void 0:k.queryParams,skipBrowserRedirect:!0});case 2:return D=O.v,O.n=3,_request(T.fetch,"GET",D,{headers:T.headers,jwt:null!==(M=null===(E=R.session)||void 0===E?void 0:E.access_token)&&void 0!==M?M:void 0});case 3:return O.a(2,O.v)}},_callee164)}));return function(e){return l.apply(this,arguments)}}());case 1:if(_=M.v,S=_.data,!(k=_.error)){M.n=2;break}throw k;case 2:return isBrowser()&&!(null===(l=e.options)||void 0===l?void 0:l.skipBrowserRedirect)&&window.location.assign(null==S?void 0:S.url),M.a(2,{data:{provider:e.provider,url:null==S?void 0:S.url},error:null});case 3:if(M.p=3,!isAuthError(E=M.v)){M.n=4;break}return M.a(2,{data:{provider:e.provider,url:null},error:E});case 4:throw E;case 5:return M.a(2)}},_callee165,this,[[0,3]])})),function(e){return J.apply(this,arguments)})},{key:"linkIdentityIdToken",value:(Q=_asyncToGenerator(_regenerator().m(function _callee167(e){var l=this;return _regenerator().w(function(_){for(;;)switch(_.n){case 0:return _.n=1,this._useSession(function(){var _=_asyncToGenerator(_regenerator().m(function _callee166(_){var S,k,E,T,M,R,I,D,O,L,U,B;return _regenerator().w(function(z){for(;;)switch(z.p=z.n){case 0:if(z.p=0,k=_.error,E=_.data.session,!k){z.n=1;break}throw k;case 1:return T=e.options,M=e.provider,R=e.token,I=e.access_token,D=e.nonce,z.n=2,_request(l.fetch,"POST","".concat(l.url,"/token?grant_type=id_token"),{headers:l.headers,jwt:null!==(S=null==E?void 0:E.access_token)&&void 0!==S?S:void 0,body:{provider:M,id_token:R,access_token:I,nonce:D,link_identity:!0,gotrue_meta_security:{captcha_token:null==T?void 0:T.captchaToken}},xform:_sessionResponse});case 2:if(O=z.v,L=O.data,!(U=O.error)){z.n=3;break}return z.a(2,{data:{user:null,session:null},error:U});case 3:if(L&&L.session&&L.user){z.n=4;break}return z.a(2,{data:{user:null,session:null},error:new Do});case 4:if(!L.session){z.n=6;break}return z.n=5,l._saveSession(L.session);case 5:return z.n=6,l._notifyAllSubscribers("USER_UPDATED",L.session);case 6:return z.a(2,{data:L,error:U});case 7:if(z.p=7,!isAuthError(B=z.v)){z.n=8;break}return z.a(2,{data:{user:null,session:null},error:B});case 8:throw B;case 9:return z.a(2)}},_callee166,null,[[0,7]])}));return function(e){return _.apply(this,arguments)}}());case 1:return _.a(2,_.v)}},_callee167,this)})),function(e){return Q.apply(this,arguments)})},{key:"unlinkIdentity",value:(Y=_asyncToGenerator(_regenerator().m(function _callee169(e){var l,_=this;return _regenerator().w(function(S){for(;;)switch(S.p=S.n){case 0:return S.p=0,S.n=1,this._useSession(function(){var l=_asyncToGenerator(_regenerator().m(function _callee168(l){var S,k,E,T;return _regenerator().w(function(M){for(;;)switch(M.n){case 0:if(E=l.data,!(T=l.error)){M.n=1;break}throw T;case 1:return M.n=2,_request(_.fetch,"DELETE","".concat(_.url,"/user/identities/").concat(e.identity_id),{headers:_.headers,jwt:null!==(k=null===(S=E.session)||void 0===S?void 0:S.access_token)&&void 0!==k?k:void 0});case 2:return M.a(2,M.v)}},_callee168)}));return function(e){return l.apply(this,arguments)}}());case 1:return S.a(2,S.v);case 2:if(S.p=2,!isAuthError(l=S.v)){S.n=3;break}return S.a(2,{data:null,error:l});case 3:throw l;case 4:return S.a(2)}},_callee169,this,[[0,2]])})),function(e){return Y.apply(this,arguments)})},{key:"_refreshAccessToken",value:(K=_asyncToGenerator(_regenerator().m(function _callee171(e){var l,_,S,k=this;return _regenerator().w(function(E){for(;;)switch(E.p=E.n){case 0:return l="#_refreshAccessToken(".concat(e.substring(0,5),"...)"),this._debug(l,"begin"),E.p=1,_=Date.now(),E.n=2,retryable(function(){var _=_asyncToGenerator(_regenerator().m(function _callee170(_){return _regenerator().w(function(S){for(;;)switch(S.n){case 0:if(!(_>0)){S.n=1;break}return S.n=1,sleep(200*Math.pow(2,_-1));case 1:return k._debug(l,"refreshing attempt",_),S.n=2,_request(k.fetch,"POST","".concat(k.url,"/token?grant_type=refresh_token"),{body:{refresh_token:e},headers:k.headers,xform:_sessionResponse});case 2:return S.a(2,S.v)}},_callee170)}));return function(e){return _.apply(this,arguments)}}(),function(e,l){var S=200*Math.pow(2,e);return l&&isAuthRetryableFetchError(l)&&Date.now()+S-_<wo});case 2:return E.a(2,E.v);case 3:if(E.p=3,S=E.v,this._debug(l,"error",S),!isAuthError(S)){E.n=4;break}return E.a(2,{data:{session:null,user:null},error:S});case 4:throw S;case 5:return E.p=5,this._debug(l,"end"),E.f(5);case 6:return E.a(2)}},_callee171,this,[[1,3,5,6]])})),function(e){return K.apply(this,arguments)})},{key:"_isValidSession",value:function(e){return"object"===_typeof3(e)&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}},{key:"_handleProviderSignIn",value:(X=_asyncToGenerator(_regenerator().m(function _callee172(e,l){var _;return _regenerator().w(function(S){for(;;)switch(S.n){case 0:return S.n=1,this._getUrlForProvider("".concat(this.url,"/authorize"),e,{redirectTo:l.redirectTo,scopes:l.scopes,queryParams:l.queryParams});case 1:return _=S.v,this._debug("#_handleProviderSignIn()","provider",e,"options",l,"url",_),isBrowser()&&!l.skipBrowserRedirect&&window.location.assign(_),S.a(2,{data:{provider:e,url:_},error:null})}},_callee172,this)})),function(e,l){return X.apply(this,arguments)})},{key:"_recoverAndRefresh",value:(q=_asyncToGenerator(_regenerator().m(function _callee173(){var e,l,_,S,k,E,T,M,R,I,D,O,L;return _regenerator().w(function(U){for(;;)switch(U.p=U.n){case 0:return _="#_recoverAndRefresh()",this._debug(_,"begin"),U.p=1,U.n=2,Wo(this.storage,this.storageKey);case 2:if(!(S=U.v)||!this.userStorage){U.n=5;break}return U.n=3,Wo(this.userStorage,this.storageKey+"-user");case 3:if(k=U.v,this.storage.isServer||!Object.is(this.storage,this.userStorage)||k){U.n=4;break}return k={user:S.user},U.n=4,Vo(this.userStorage,this.storageKey+"-user",k);case 4:S.user=null!==(e=null==k?void 0:k.user)&&void 0!==e?e:userNotAvailableProxy(),U.n=10;break;case 5:if(!S||S.user){U.n=10;break}if(S.user){U.n=10;break}return U.n=6,Wo(this.storage,this.storageKey+"-user");case 6:if(!(E=U.v)||!(null==E?void 0:E.user)){U.n=9;break}return S.user=E.user,U.n=7,qo(this.storage,this.storageKey+"-user");case 7:return U.n=8,Vo(this.storage,this.storageKey,S);case 8:U.n=10;break;case 9:S.user=userNotAvailableProxy();case 10:if(this._debug(_,"session from storage",S),this._isValidSession(S)){U.n=12;break}if(this._debug(_,"session is not valid"),null===S){U.n=11;break}return U.n=11,this._removeSession();case 11:return U.a(2);case 12:if(T=1e3*(null!==(l=S.expires_at)&&void 0!==l?l:1/0)-Date.now()<xo,this._debug(_,"session has".concat(T?"":" not"," expired with margin of ").concat(xo,"s")),!T){U.n=15;break}if(!this.autoRefreshToken||!S.refresh_token){U.n=14;break}return U.n=13,this._callRefreshToken(S.refresh_token);case 13:if(M=U.v,!(R=M.error)){U.n=14;break}if(isAuthRetryableFetchError(R)){U.n=14;break}return this._debug(_,"refresh failed with a non-retryable error, removing the session",R),U.n=14,this._removeSession();case 14:U.n=25;break;case 15:if(!S.user||!0!==S.user.__isUserNotAvailableProxy){U.n=24;break}return U.p=16,U.n=17,this._getUser(S.access_token);case 17:if(I=U.v,D=I.data,I.error||!(null==D?void 0:D.user)){U.n=20;break}return S.user=D.user,U.n=18,this._saveSession(S);case 18:return U.n=19,this._notifyAllSubscribers("SIGNED_IN",S);case 19:U.n=21;break;case 20:this._debug(_,"could not get user data, skipping SIGNED_IN notification");case 21:U.n=23;break;case 22:U.p=22,O=U.v,this._debug(_,"error getting user data, skipping SIGNED_IN notification",O);case 23:U.n=25;break;case 24:return U.n=25,this._notifyAllSubscribers("SIGNED_IN",S);case 25:U.n=27;break;case 26:return U.p=26,L=U.v,this._debug(_,"error",L),U.a(2);case 27:return U.p=27,this._debug(_,"end"),U.f(27);case 28:return U.a(2)}},_callee173,this,[[16,22],[1,26,27,28]])})),function(){return q.apply(this,arguments)})},{key:"_callRefreshToken",value:(W=_asyncToGenerator(_regenerator().m(function _callee174(e){var l,_,S,k,E,T,M,R,I;return _regenerator().w(function(D){for(;;)switch(D.p=D.n){case 0:if(e){D.n=1;break}throw new Po;case 1:if(!this.refreshingDeferred){D.n=2;break}return D.a(2,this.refreshingDeferred.promise);case 2:return S="#_callRefreshToken(".concat(e.substring(0,5),"...)"),this._debug(S,"begin"),D.p=3,this.refreshingDeferred=new Xo,D.n=4,this._refreshAccessToken(e);case 4:if(k=D.v,E=k.data,!(T=k.error)){D.n=5;break}throw T;case 5:if(E.session){D.n=6;break}throw new Po;case 6:return D.n=7,this._saveSession(E.session);case 7:return D.n=8,this._notifyAllSubscribers("TOKEN_REFRESHED",E.session);case 8:return M={data:E.session,error:null},this.refreshingDeferred.resolve(M),D.a(2,M);case 9:if(D.p=9,I=D.v,this._debug(S,"error",I),!isAuthError(I)){D.n=11;break}if(R={data:null,error:I},isAuthRetryableFetchError(I)){D.n=10;break}return D.n=10,this._removeSession();case 10:return null===(l=this.refreshingDeferred)||void 0===l||l.resolve(R),D.a(2,R);case 11:throw null===(_=this.refreshingDeferred)||void 0===_||_.reject(I),I;case 12:return D.p=12,this.refreshingDeferred=null,this._debug(S,"end"),D.f(12);case 13:return D.a(2)}},_callee174,this,[[3,9,12,13]])})),function(e){return W.apply(this,arguments)})},{key:"_notifyAllSubscribers",value:(V=_asyncToGenerator(_regenerator().m(function _callee176(e,l){var _,S,k,E,T,M=arguments;return _regenerator().w(function(R){for(;;)switch(R.p=R.n){case 0:return _=!(M.length>2&&void 0!==M[2])||M[2],S="#_notifyAllSubscribers(".concat(e,")"),this._debug(S,"begin",l,"broadcast = ".concat(_)),R.p=1,this.broadcastChannel&&_&&this.broadcastChannel.postMessage({event:e,session:l}),k=[],E=Array.from(this.stateChangeEmitters.values()).map(function(){var _=_asyncToGenerator(_regenerator().m(function _callee175(_){var S;return _regenerator().w(function(E){for(;;)switch(E.p=E.n){case 0:return E.p=0,E.n=1,_.callback(e,l);case 1:E.n=3;break;case 2:E.p=2,S=E.v,k.push(S);case 3:return E.a(2)}},_callee175,null,[[0,2]])}));return function(e){return _.apply(this,arguments)}}()),R.n=2,Promise.all(E);case 2:if(!(k.length>0)){R.n=3;break}for(T=0;T<k.length;T+=1);throw k[0];case 3:return R.p=3,this._debug(S,"end"),R.f(3);case 4:return R.a(2)}},_callee176,this,[[1,,3,4]])})),function(e,l){return V.apply(this,arguments)})},{key:"_saveSession",value:(H=_asyncToGenerator(_regenerator().m(function _callee177(e){var l,_,S,k,E;return _regenerator().w(function(T){for(;;)switch(T.n){case 0:if(this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,l=Object.assign({},e),_=l.user&&!0===l.user.__isUserNotAvailableProxy,!this.userStorage){T.n=3;break}if(_||!l.user){T.n=1;break}return T.n=1,Vo(this.userStorage,this.storageKey+"-user",{user:l.user});case 1:return delete(S=Object.assign({},l)).user,k=deepClone(S),T.n=2,Vo(this.storage,this.storageKey,k);case 2:T.n=4;break;case 3:return E=deepClone(l),T.n=4,Vo(this.storage,this.storageKey,E);case 4:return T.a(2)}},_callee177,this)})),function(e){return H.apply(this,arguments)})},{key:"_removeSession",value:(j=_asyncToGenerator(_regenerator().m(function _callee178(){return _regenerator().w(function(e){for(;;)switch(e.n){case 0:return this._debug("#_removeSession()"),e.n=1,qo(this.storage,this.storageKey);case 1:return e.n=2,qo(this.storage,this.storageKey+"-code-verifier");case 2:return e.n=3,qo(this.storage,this.storageKey+"-user");case 3:if(!this.userStorage){e.n=4;break}return e.n=4,qo(this.userStorage,this.storageKey+"-user");case 4:return e.n=5,this._notifyAllSubscribers("SIGNED_OUT",null);case 5:return e.a(2)}},_callee178,this)})),function(){return j.apply(this,arguments)})},{key:"_removeVisibilityChangedCallback",value:function(){this._debug("#_removeVisibilityChangedCallback()");var e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&isBrowser()&&(null===window||void 0===window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(ta){}}},{key:"_startAutoRefresh",value:(G=_asyncToGenerator(_regenerator().m(function _callee180(){var e,l=this;return _regenerator().w(function(_){for(;;)switch(_.n){case 0:return _.n=1,this._stopAutoRefresh();case 1:this._debug("#_startAutoRefresh()"),e=setInterval(function(){return l._autoRefreshTokenTick()},wo),this.autoRefreshTicker=e,e&&"object"===_typeof3(e)&&"function"==typeof e.unref?e.unref():"undefined"!=typeof Deno&&"function"==typeof Deno.unrefTimer&&Deno.unrefTimer(e),setTimeout(_asyncToGenerator(_regenerator().m(function _callee179(){return _regenerator().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,l.initializePromise;case 1:return e.n=2,l._autoRefreshTokenTick();case 2:return e.a(2)}},_callee179)})),0);case 2:return _.a(2)}},_callee180,this)})),function(){return G.apply(this,arguments)})},{key:"_stopAutoRefresh",value:(z=_asyncToGenerator(_regenerator().m(function _callee181(){var e;return _regenerator().w(function(l){for(;;)switch(l.n){case 0:this._debug("#_stopAutoRefresh()"),e=this.autoRefreshTicker,this.autoRefreshTicker=null,e&&clearInterval(e);case 1:return l.a(2)}},_callee181,this)})),function(){return z.apply(this,arguments)})},{key:"startAutoRefresh",value:(B=_asyncToGenerator(_regenerator().m(function _callee182(){return _regenerator().w(function(e){for(;;)switch(e.n){case 0:return this._removeVisibilityChangedCallback(),e.n=1,this._startAutoRefresh();case 1:return e.a(2)}},_callee182,this)})),function(){return B.apply(this,arguments)})},{key:"stopAutoRefresh",value:(U=_asyncToGenerator(_regenerator().m(function _callee183(){return _regenerator().w(function(e){for(;;)switch(e.n){case 0:return this._removeVisibilityChangedCallback(),e.n=1,this._stopAutoRefresh();case 1:return e.a(2)}},_callee183,this)})),function(){return U.apply(this,arguments)})},{key:"_autoRefreshTokenTick",value:(L=_asyncToGenerator(_regenerator().m(function _callee186(){var e,l=this;return _regenerator().w(function(_){for(;;)switch(_.p=_.n){case 0:return this._debug("#_autoRefreshTokenTick()","begin"),_.p=1,_.n=2,this._acquireLock(0,_asyncToGenerator(_regenerator().m(function _callee185(){var e;return _regenerator().w(function(_){for(;;)switch(_.p=_.n){case 0:return _.p=0,e=Date.now(),_.p=1,_.n=2,l._useSession(function(){var _=_asyncToGenerator(_regenerator().m(function _callee184(_){var S,k;return _regenerator().w(function(E){for(;;)switch(E.n){case 0:if((S=_.data.session)&&S.refresh_token&&S.expires_at){E.n=1;break}return l._debug("#_autoRefreshTokenTick()","no session"),E.a(2);case 1:if(k=Math.floor((1e3*S.expires_at-e)/wo),l._debug("#_autoRefreshTokenTick()","access token expires in ".concat(k," ticks, a tick lasts ").concat(wo,"ms, refresh threshold is ").concat(3," ticks")),!(k<=3)){E.n=2;break}return E.n=2,l._callRefreshToken(S.refresh_token);case 2:return E.a(2)}},_callee184)}));return function(e){return _.apply(this,arguments)}}());case 2:return _.a(2,_.v);case 3:_.p=3,_.v;case 4:return _.p=4,l._debug("#_autoRefreshTokenTick()","end"),_.f(4);case 5:return _.a(2)}},_callee185,null,[[1,3],[0,,4,5]])})));case 2:_.n=5;break;case 3:if(_.p=3,!((e=_.v).isAcquireTimeout||e instanceof es)){_.n=4;break}this._debug("auto refresh token tick lock not available"),_.n=5;break;case 4:throw e;case 5:return _.a(2)}},_callee186,this,[[1,3]])})),function(){return L.apply(this,arguments)})},{key:"_handleVisibilityChange",value:(O=_asyncToGenerator(_regenerator().m(function _callee188(){var e=this;return _regenerator().w(function(l){for(;;)switch(l.p=l.n){case 0:if(this._debug("#_handleVisibilityChange()"),isBrowser()&&(null===window||void 0===window?void 0:window.addEventListener)){l.n=1;break}return this.autoRefreshToken&&this.startAutoRefresh(),l.a(2,!1);case 1:return l.p=1,this.visibilityChangedCallback=_asyncToGenerator(_regenerator().m(function _callee187(){return _regenerator().w(function(l){for(;;)switch(l.n){case 0:return l.n=1,e._onVisibilityChanged(!1);case 1:return l.a(2,l.v)}},_callee187)})),null===window||void 0===window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),l.n=2,this._onVisibilityChanged(!0);case 2:l.n=4;break;case 3:l.p=3,l.v;case 4:return l.a(2)}},_callee188,this,[[1,3]])})),function(){return O.apply(this,arguments)})},{key:"_onVisibilityChanged",value:(D=_asyncToGenerator(_regenerator().m(function _callee190(e){var l,_=this;return _regenerator().w(function(S){for(;;)switch(S.n){case 0:if(l="#_onVisibilityChanged(".concat(e,")"),this._debug(l,"visibilityState",document.visibilityState),"visible"!==document.visibilityState){S.n=3;break}if(this.autoRefreshToken&&this._startAutoRefresh(),e){S.n=2;break}return S.n=1,this.initializePromise;case 1:return S.n=2,this._acquireLock(-1,_asyncToGenerator(_regenerator().m(function _callee189(){return _regenerator().w(function(e){for(;;)switch(e.n){case 0:if("visible"===document.visibilityState){e.n=1;break}return _._debug(l,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting"),e.a(2);case 1:return e.n=2,_._recoverAndRefresh();case 2:return e.a(2)}},_callee189)})));case 2:S.n=4;break;case 3:"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh();case 4:return S.a(2)}},_callee190,this)})),function(e){return D.apply(this,arguments)})},{key:"_getUrlForProvider",value:(I=_asyncToGenerator(_regenerator().m(function _callee191(e,l,_){var S,k,E,T,M,R,I;return _regenerator().w(function(D){for(;;)switch(D.n){case 0:if(S=["provider=".concat(encodeURIComponent(l))],(null==_?void 0:_.redirectTo)&&S.push("redirect_to=".concat(encodeURIComponent(_.redirectTo))),(null==_?void 0:_.scopes)&&S.push("scopes=".concat(encodeURIComponent(_.scopes))),"pkce"!==this.flowType){D.n=2;break}return D.n=1,getCodeChallengeAndMethod(this.storage,this.storageKey);case 1:k=D.v,E=_slicedToArray(k,2),T=E[0],M=E[1],R=new URLSearchParams({code_challenge:"".concat(encodeURIComponent(T)),code_challenge_method:"".concat(encodeURIComponent(M))}),S.push(R.toString());case 2:return(null==_?void 0:_.queryParams)&&(I=new URLSearchParams(_.queryParams),S.push(I.toString())),(null==_?void 0:_.skipBrowserRedirect)&&S.push("skip_http_redirect=".concat(_.skipBrowserRedirect)),D.a(2,"".concat(e,"?").concat(S.join("&")))}},_callee191,this)})),function(e,l,_){return I.apply(this,arguments)})},{key:"_unenroll",value:(R=_asyncToGenerator(_regenerator().m(function _callee193(e){var l,_=this;return _regenerator().w(function(S){for(;;)switch(S.p=S.n){case 0:return S.p=0,S.n=1,this._useSession(function(){var l=_asyncToGenerator(_regenerator().m(function _callee192(l){var S,k,E;return _regenerator().w(function(T){for(;;)switch(T.n){case 0:if(k=l.data,!(E=l.error)){T.n=1;break}return T.a(2,{data:null,error:E});case 1:return T.n=2,_request(_.fetch,"DELETE","".concat(_.url,"/factors/").concat(e.factorId),{headers:_.headers,jwt:null===(S=null==k?void 0:k.session)||void 0===S?void 0:S.access_token});case 2:return T.a(2,T.v)}},_callee192)}));return function(e){return l.apply(this,arguments)}}());case 1:return S.a(2,S.v);case 2:if(S.p=2,!isAuthError(l=S.v)){S.n=3;break}return S.a(2,{data:null,error:l});case 3:throw l;case 4:return S.a(2)}},_callee193,this,[[0,2]])})),function(e){return R.apply(this,arguments)})},{key:"_enroll",value:(M=_asyncToGenerator(_regenerator().m(function _callee195(e){var l,_=this;return _regenerator().w(function(S){for(;;)switch(S.p=S.n){case 0:return S.p=0,S.n=1,this._useSession(function(){var l=_asyncToGenerator(_regenerator().m(function _callee194(l){var S,k,E,T,M,R,I,D;return _regenerator().w(function(O){for(;;)switch(O.n){case 0:if(E=l.data,!(T=l.error)){O.n=1;break}return O.a(2,{data:null,error:T});case 1:return M=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},"phone"===e.factorType?{phone:e.phone}:"totp"===e.factorType?{issuer:e.issuer}:{}),O.n=2,_request(_.fetch,"POST","".concat(_.url,"/factors"),{body:M,headers:_.headers,jwt:null===(S=null==E?void 0:E.session)||void 0===S?void 0:S.access_token});case 2:if(R=O.v,I=R.data,!(D=R.error)){O.n=3;break}return O.a(2,{data:null,error:D});case 3:return"totp"===e.factorType&&"totp"===I.type&&(null===(k=null==I?void 0:I.totp)||void 0===k?void 0:k.qr_code)&&(I.totp.qr_code="data:image/svg+xml;utf-8,".concat(I.totp.qr_code)),O.a(2,{data:I,error:null})}},_callee194)}));return function(e){return l.apply(this,arguments)}}());case 1:return S.a(2,S.v);case 2:if(S.p=2,!isAuthError(l=S.v)){S.n=3;break}return S.a(2,{data:null,error:l});case 3:throw l;case 4:return S.a(2)}},_callee195,this,[[0,2]])})),function(e){return M.apply(this,arguments)})},{key:"_verify",value:(T=_asyncToGenerator(_regenerator().m(function _callee198(e){var l=this;return _regenerator().w(function(_){for(;;)if(0===_.n)return _.a(2,this._acquireLock(-1,_asyncToGenerator(_regenerator().m(function _callee197(){var _;return _regenerator().w(function(S){for(;;)switch(S.p=S.n){case 0:return S.p=0,S.n=1,l._useSession(function(){var _=_asyncToGenerator(_regenerator().m(function _callee196(_){var S,k,E,T,M,R,I;return _regenerator().w(function(D){for(;;)switch(D.n){case 0:if(k=_.data,!(E=_.error)){D.n=1;break}return D.a(2,{data:null,error:E});case 1:return T=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:"create"===e.webauthn.type?serializeCredentialCreationResponse(e.webauthn.credential_response):serializeCredentialRequestResponse(e.webauthn.credential_response)})}:{code:e.code}),D.n=2,_request(l.fetch,"POST","".concat(l.url,"/factors/").concat(e.factorId,"/verify"),{body:T,headers:l.headers,jwt:null===(S=null==k?void 0:k.session)||void 0===S?void 0:S.access_token});case 2:if(M=D.v,R=M.data,!(I=M.error)){D.n=3;break}return D.a(2,{data:null,error:I});case 3:return D.n=4,l._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+R.expires_in},R));case 4:return D.n=5,l._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",R);case 5:return D.a(2,{data:R,error:I})}},_callee196)}));return function(e){return _.apply(this,arguments)}}());case 1:return S.a(2,S.v);case 2:if(S.p=2,!isAuthError(_=S.v)){S.n=3;break}return S.a(2,{data:null,error:_});case 3:throw _;case 4:return S.a(2)}},_callee197,null,[[0,2]])}))))},_callee198,this)})),function(e){return T.apply(this,arguments)})},{key:"_challenge",value:(E=_asyncToGenerator(_regenerator().m(function _callee201(e){var l=this;return _regenerator().w(function(_){for(;;)if(0===_.n)return _.a(2,this._acquireLock(-1,_asyncToGenerator(_regenerator().m(function _callee200(){var _;return _regenerator().w(function(S){for(;;)switch(S.p=S.n){case 0:return S.p=0,S.n=1,l._useSession(function(){var _=_asyncToGenerator(_regenerator().m(function _callee199(_){var S,k,E,T,M,R;return _regenerator().w(function(I){for(;;)switch(I.n){case 0:if(k=_.data,!(E=_.error)){I.n=1;break}return I.a(2,{data:null,error:E});case 1:return I.n=2,_request(l.fetch,"POST","".concat(l.url,"/factors/").concat(e.factorId,"/challenge"),{body:e,headers:l.headers,jwt:null===(S=null==k?void 0:k.session)||void 0===S?void 0:S.access_token});case 2:if(!(T=I.v).error){I.n=3;break}return I.a(2,T);case 3:if("webauthn"===(M=T.data).type){I.n=4;break}return I.a(2,{data:M,error:null});case 4:R=M.webauthn.type,I.n="create"===R?5:"request"===R?6:7;break;case 5:return I.a(2,{data:Object.assign(Object.assign({},M),{webauthn:Object.assign(Object.assign({},M.webauthn),{credential_options:Object.assign(Object.assign({},M.webauthn.credential_options),{publicKey:deserializeCredentialCreationOptions(M.webauthn.credential_options.publicKey)})})}),error:null});case 6:return I.a(2,{data:Object.assign(Object.assign({},M),{webauthn:Object.assign(Object.assign({},M.webauthn),{credential_options:Object.assign(Object.assign({},M.webauthn.credential_options),{publicKey:deserializeCredentialRequestOptions(M.webauthn.credential_options.publicKey)})})}),error:null});case 7:return I.a(2)}},_callee199)}));return function(e){return _.apply(this,arguments)}}());case 1:return S.a(2,S.v);case 2:if(S.p=2,!isAuthError(_=S.v)){S.n=3;break}return S.a(2,{data:null,error:_});case 3:throw _;case 4:return S.a(2)}},_callee200,null,[[0,2]])}))))},_callee201,this)})),function(e){return E.apply(this,arguments)})},{key:"_challengeAndVerify",value:(k=_asyncToGenerator(_regenerator().m(function _callee202(e){var l,_,S;return _regenerator().w(function(k){for(;;)switch(k.n){case 0:return k.n=1,this._challenge({factorId:e.factorId});case 1:if(l=k.v,_=l.data,!(S=l.error)){k.n=2;break}return k.a(2,{data:null,error:S});case 2:return k.n=3,this._verify({factorId:e.factorId,challengeId:_.id,code:e.code});case 3:return k.a(2,k.v)}},_callee202,this)})),function(e){return k.apply(this,arguments)})},{key:"_listFactors",value:(S=_asyncToGenerator(_regenerator().m(function _callee203(){var e,l,_,S,k,E,T,M;return _regenerator().w(function(R){for(;;)switch(R.n){case 0:return R.n=1,this.getUser();case 1:if(l=R.v,_=l.data.user,!(S=l.error)){R.n=2;break}return R.a(2,{data:null,error:S});case 2:k={all:[],phone:[],totp:[],webauthn:[]},E=_createForOfIteratorHelper2(null!==(e=null==_?void 0:_.factors)&&void 0!==e?e:[]);try{for(E.s();!(T=E.n()).done;)M=T.value,k.all.push(M),"verified"===M.status&&k[M.factor_type].push(M)}catch(I){E.e(I)}finally{E.f()}return R.a(2,{data:k,error:null})}},_callee203,this)})),function(){return S.apply(this,arguments)})},{key:"_getAuthenticatorAssuranceLevel",value:(_=_asyncToGenerator(_regenerator().m(function _callee206(){var e=this;return _regenerator().w(function(l){for(;;)if(0===l.n)return l.a(2,this._acquireLock(-1,_asyncToGenerator(_regenerator().m(function _callee205(){return _regenerator().w(function(l){for(;;)switch(l.n){case 0:return l.n=1,e._useSession(function(){var e=_asyncToGenerator(_regenerator().m(function _callee204(e){var l,_,S,k,E,T,M,R,I;return _regenerator().w(function(D){for(;;)switch(D.n){case 0:if(S=e.data.session,!(k=e.error)){D.n=1;break}return D.a(2,{data:null,error:k});case 1:if(S){D.n=2;break}return D.a(2,{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null});case 2:return E=decodeJWT(S.access_token),T=E.payload,M=null,T.aal&&(M=T.aal),R=M,(null!==(_=null===(l=S.user.factors)||void 0===l?void 0:l.filter(function(e){return"verified"===e.status}))&&void 0!==_?_:[]).length>0&&(R="aal2"),I=T.amr||[],D.a(2,{data:{currentLevel:M,nextLevel:R,currentAuthenticationMethods:I},error:null})}},_callee204)}));return function(l){return e.apply(this,arguments)}}());case 1:return l.a(2,l.v)}},_callee205)}))))},_callee206,this)})),function(){return _.apply(this,arguments)})},{key:"fetchJwk",value:(l=_asyncToGenerator(_regenerator().m(function _callee207(e){var l,_,S,k,E,T=arguments;return _regenerator().w(function(M){for(;;)switch(M.n){case 0:if(!(l=(T.length>1&&void 0!==T[1]?T[1]:{keys:[]}).keys.find(function(l){return l.kid===e}))){M.n=1;break}return M.a(2,l);case 1:if(_=Date.now(),!((l=this.jwks.keys.find(function(l){return l.kid===e}))&&this.jwks_cached_at+6e5>_)){M.n=2;break}return M.a(2,l);case 2:return M.n=3,_request(this.fetch,"GET","".concat(this.url,"/.well-known/jwks.json"),{headers:this.headers});case 3:if(S=M.v,k=S.data,!(E=S.error)){M.n=4;break}throw E;case 4:if(k.keys&&0!==k.keys.length){M.n=5;break}return M.a(2,null);case 5:if(this.jwks=k,this.jwks_cached_at=_,l=k.keys.find(function(l){return l.kid===e})){M.n=6;break}return M.a(2,null);case 6:return M.a(2,l)}},_callee207,this)})),function(e){return l.apply(this,arguments)})},{key:"getClaims",value:(e=_asyncToGenerator(_regenerator().m(function _callee208(e){var l,_,S,k,E,T,M,R,I,D,O,L,U,B,z,G,j,H,V,W=arguments;return _regenerator().w(function(q){for(;;)switch(q.p=q.n){case 0:if(l=W.length>1&&void 0!==W[1]?W[1]:{},q.p=1,_=e){q.n=4;break}return q.n=2,this.getSession();case 2:if(S=q.v,k=S.data,!(E=S.error)&&k.session){q.n=3;break}return q.a(2,{data:null,error:E});case 3:_=k.session.access_token;case 4:if(T=decodeJWT(_),M=T.header,R=T.payload,I=T.signature,D=T.raw,O=D.header,L=D.payload,(null==l?void 0:l.allowExpired)||validateExp(R.exp),M.alg&&!M.alg.startsWith("HS")&&M.kid&&"crypto"in globalThis&&"subtle"in globalThis.crypto){q.n=5;break}H=null,q.n=7;break;case 5:return q.n=6,this.fetchJwk(M.kid,(null==l?void 0:l.keys)?{keys:l.keys}:null==l?void 0:l.jwks);case 6:H=q.v;case 7:if(U=H){q.n=10;break}return q.n=8,this.getUser(_);case 8:if(B=q.v,!(z=B.error)){q.n=9;break}throw z;case 9:return q.a(2,{data:{claims:R,header:M,signature:I},error:null});case 10:return G=getAlgorithm(M.alg),q.n=11,crypto.subtle.importKey("jwk",U,G,!0,["verify"]);case 11:return j=q.v,q.n=12,crypto.subtle.verify(G,j,I,stringToUint8Array("".concat(O,".").concat(L)));case 12:if(q.v){q.n=13;break}throw new Bo("Invalid JWT signature");case 13:return q.a(2,{data:{claims:R,header:M,signature:I},error:null});case 14:if(q.p=14,!isAuthError(V=q.v)){q.n=15;break}return q.a(2,{data:null,error:V});case 15:throw V;case 16:return q.a(2)}},_callee208,this,[[1,14]])})),function(l){return e.apply(this,arguments)})}]);var e,l,_,S,k,E,T,M,R,I,D,O,L,U,B,z,G,j,H,V,W,q,X,K,Y,Q,J,Z,$,ee,te,re,ne,ie,ae,oe,se,ue,le,ce,he,de,fe,pe,ve,ge,me,ye,_e,be,Se,we,xe,ke,Ae,Ee,Ce,Te,Me,Re,Ie,Pe,De,Oe,Le}();cs.nextInstanceID=0;var hs=function(e){function SupabaseAuthClient(e){return _classCallCheck3(this,SupabaseAuthClient),_callSuper(this,SupabaseAuthClient,[e])}return _inherits(SupabaseAuthClient,e),_createClass3(SupabaseAuthClient)}(cs),__awaiter=function(e,l,_,S){return new(_||(_=Promise))(function(k,E){function fulfilled(e){try{step(S.next(e))}catch(ta){E(ta)}}function rejected(e){try{step(S.throw(e))}catch(ta){E(ta)}}function step(e){var l;e.done?k(e.value):(l=e.value,l instanceof _?l:new _(function(e){e(l)})).then(fulfilled,rejected)}step((S=S.apply(e,l||[])).next())})},ds=function(){return _createClass3(function SupabaseClient(e,l,_){var S,k,E;_classCallCheck3(this,SupabaseClient),this.supabaseUrl=e,this.supabaseKey=l;var T=function(e){var l,_=null==e?void 0:e.trim();if(!_)throw new Error("supabaseUrl is required.");if(!_.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL((l=_).endsWith("/")?l:l+"/")}catch(S){throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}(e);if(!l)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",T),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",T),this.storageUrl=new URL("storage/v1",T),this.functionsUrl=new URL("functions/v1",T);var M="sb-".concat(T.hostname.split(".")[0],"-auth-token"),R=function(e,l){var _,S,k=this,E=e.db,T=e.auth,M=e.realtime,R=e.global,I=l.db,D=l.auth,O=l.realtime,L=l.global,U={db:Object.assign(Object.assign({},I),E),auth:Object.assign(Object.assign({},D),T),realtime:Object.assign(Object.assign({},O),M),storage:{},global:Object.assign(Object.assign(Object.assign({},L),R),{headers:Object.assign(Object.assign({},null!==(_=null==L?void 0:L.headers)&&void 0!==_?_:{}),null!==(S=null==R?void 0:R.headers)&&void 0!==S?S:{})}),accessToken:function(){return __awaiter$1(k,void 0,void 0,_regenerator().m(function _callee75(){return _regenerator().w(function(e){for(;;)if(0===e.n)return e.a(2,"")},_callee75)}))}};return e.accessToken?U.accessToken=e.accessToken:delete U.accessToken,U}(null!=_?_:{},{db:yo,realtime:bo,auth:Object.assign(Object.assign({},_o),{storageKey:M}),global:mo});this.storageKey=null!==(S=R.auth.storageKey)&&void 0!==S?S:"",this.headers=null!==(k=R.global.headers)&&void 0!==k?k:{},R.accessToken?(this.accessToken=R.accessToken,this.auth=new Proxy({},{get:function(e,l){throw new Error("@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.".concat(String(l)," is not possible"))}})):this.auth=this._initSupabaseAuthClient(null!==(E=R.auth)&&void 0!==E?E:{},this.headers,R.global.fetch),this.fetch=fetchWithAuth(l,this._getAccessToken.bind(this),R.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},R.realtime)),this.rest=new Ba(new URL("rest/v1",T).href,{headers:this.headers,schema:R.db.schema,fetch:this.fetch}),this.storage=new vo(this.storageUrl.href,this.headers,this.fetch,null==_?void 0:_.storage),R.accessToken||this._listenForAuthEvents()},[{key:"functions",get:function(){return new ga(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}},{key:"from",value:function(e){return this.rest.from(e)}},{key:"schema",value:function(e){return this.rest.schema(e)}},{key:"rpc",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{head:!1,get:!1,count:void 0};return this.rest.rpc(e,l,_)}},{key:"channel",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}};return this.realtime.channel(e,l)}},{key:"getChannels",value:function(){return this.realtime.getChannels()}},{key:"removeChannel",value:function(e){return this.realtime.removeChannel(e)}},{key:"removeAllChannels",value:function(){return this.realtime.removeAllChannels()}},{key:"_getAccessToken",value:function(){return __awaiter(this,void 0,void 0,_regenerator().m(function _callee209(){var e,l,_,S;return _regenerator().w(function(k){for(;;)switch(k.n){case 0:if(!this.accessToken){k.n=2;break}return k.n=1,this.accessToken();case 1:return k.a(2,k.v);case 2:return k.n=3,this.auth.getSession();case 3:return _=k.v,S=_.data,k.a(2,null!==(l=null===(e=S.session)||void 0===e?void 0:e.access_token)&&void 0!==l?l:this.supabaseKey)}},_callee209,this)}))}},{key:"_initSupabaseAuthClient",value:function(e,l,_){var S=e.autoRefreshToken,k=e.persistSession,E=e.detectSessionInUrl,T=e.storage,M=e.userStorage,R=e.storageKey,I=e.flowType,D=e.lock,O=e.debug,L={Authorization:"Bearer ".concat(this.supabaseKey),apikey:"".concat(this.supabaseKey)};return new hs({url:this.authUrl.href,headers:Object.assign(Object.assign({},L),l),storageKey:R,autoRefreshToken:S,persistSession:k,detectSessionInUrl:E,storage:T,userStorage:M,flowType:I,lock:D,debug:O,fetch:_,hasCustomAuthorizationHeader:Object.keys(this.headers).some(function(e){return"authorization"===e.toLowerCase()})})}},{key:"_initRealtimeClient",value:function(e){return new no(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null==e?void 0:e.params)}))}},{key:"_listenForAuthEvents",value:function(){var e=this;return this.auth.onAuthStateChange(function(l,_){e._handleTokenChanged(l,"CLIENT",null==_?void 0:_.access_token)})}},{key:"_handleTokenChanged",value:function(e,l,_){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===_?"SIGNED_OUT"===e&&(this.realtime.setAuth(),"STORAGE"==l&&this.auth.signOut(),this.changedAccessToken=void 0):(this.changedAccessToken=_,this.realtime.setAuth(_))}}])}();I("al",function(e,l,_){return new ds(e,l,_)});!function(){if("undefined"!=typeof window)return!1;if("undefined"==typeof process)return!1;var e=process.version;if(null==e)return!1;var l=e.match(/^v(\d+)\./);!!l&&parseInt(l[1],10)}();for(var fs,ps=[],vs=0;vs<256;++vs)ps.push((vs+256).toString(16).slice(1));var gs=new Uint8Array(16);var ms={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function addUniqueItem(e,l){-1===e.indexOf(l)&&e.push(l)}function removeItem(e,l){var _=e.indexOf(l);_>-1&&e.splice(_,1)}var ys=I("H",function(e,l,_){return _>l?l:_<e?e:_}),_s=I("a1",function(){}),bs=I("M",{}),Ss=I("j",function(e){return/^-?(?:[0-9]+(?:\.[0-9]+)?|\.[0-9]+)$/.test(e)});function isObject$1(e){return"object"===_typeof3(e)&&null!==e}var ws=I("k",function(e){return/^0(?:[\0-\x08\x0E-\x1F!-\x2D\/-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+$/.test(e)});function memo(e){var l;return function(){return void 0===l&&(l=e()),l}}var xs=I("N",function(e){return e}),combineFunctions=function(e,l){return function(_){return l(e(_))}},ks=I("E",function(){for(var e=arguments.length,l=new Array(e),_=0;_<e;_++)l[_]=arguments[_];return l.reduce(combineFunctions)}),As=I("G",function(e,l,_){var S=l-e;return 0===S?1:(_-e)/S}),Es=function(){return _createClass3(function SubscriptionManager(){_classCallCheck3(this,SubscriptionManager),this.subscriptions=[]},[{key:"add",value:function(e){var l=this;return addUniqueItem(this.subscriptions,e),function(){return removeItem(l.subscriptions,e)}}},{key:"notify",value:function(e,l,_){var S=this.subscriptions.length;if(S)if(1===S)this.subscriptions[0](e,l,_);else for(var k=0;k<S;k++){var E=this.subscriptions[k];E&&E(e,l,_)}}},{key:"getSize",value:function(){return this.subscriptions.length}},{key:"clear",value:function(){this.subscriptions.length=0}}])}();I("S",Es);var Cs=I("x",function(e){return 1e3*e}),Ts=I("F",function(e){return e/1e3});function velocityPerSecond(e,l){return l?e*(1e3/l):0}var calcBezier=function(e,l,_){return(((1-3*_+3*l)*e+(3*_-6*l))*e+3*l)*e};function cubicBezier(e,l,_,S){if(e===l&&_===S)return xs;var getTForX=function(l){return function(e,l,_,S,k){var E,T,M=0;do{(E=calcBezier(T=l+(_-l)/2,S,k)-e)>0?_=T:l=T}while(Math.abs(E)>1e-7&&++M<12);return T}(l,0,1,e,_)};return function(e){return 0===e||1===e?e:calcBezier(getTForX(e),l,S)}}var mirrorEasing=function(e){return function(l){return l<=.5?e(2*l)/2:(2-e(2*(1-l)))/2}},reverseEasing=function(e){return function(l){return 1-e(1-l)}},Ms=cubicBezier(.33,1.53,.69,.99),Rs=reverseEasing(Ms),Is=mirrorEasing(Rs),anticipate=function(e){return(e*=2)<1?.5*Rs(e):.5*(2-Math.pow(2,-10*(e-1)))},circIn=function(e){return 1-Math.sin(Math.acos(e))},Ps=I("Q",reverseEasing(circIn)),Ds=mirrorEasing(circIn),Os=cubicBezier(.42,0,1,1),Ls=cubicBezier(0,0,.58,1),Us=cubicBezier(.42,0,.58,1),isBezierDefinition=function(e){return Array.isArray(e)&&"number"==typeof e[0]},Fs={linear:xs,easeIn:Os,easeInOut:Us,easeOut:Ls,circIn:circIn,circInOut:Ds,circOut:Ps,backIn:Rs,backInOut:Is,backOut:Ms,anticipate:anticipate},easingDefinitionToFunction=function(e){if(isBezierDefinition(e)){_s(4===e.length);var l=_slicedToArray(e,4);return cubicBezier(l[0],l[1],l[2],l[3])}return"string"==typeof e?Fs[e]:e},Ns=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function createRenderBatcher(e,l){var _=!1,S=!0,k={delta:0,timestamp:0,isProcessing:!1},flagRunNextFrame=function(){return _=!0},E=Ns.reduce(function(e,l){return e[l]=function(e){var l=new Set,_=new Set,S=!1,k=!1,E=new WeakSet,T={delta:0,timestamp:0,isProcessing:!1};function triggerCallback(l){E.has(l)&&(M.schedule(l),e()),l(T)}var M={schedule:function(e){var k=arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&S?l:_;return arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&E.add(e),k.has(e)||k.add(e),e},cancel:function(e){_.delete(e),E.delete(e)},process:function(e){if(T=e,S)k=!0;else{S=!0;var E=[_,l];_=E[1],(l=E[0]).forEach(triggerCallback),l.clear(),S=!1,k&&(k=!1,M.process(e))}}};return M}(flagRunNextFrame),e},{}),T=E.setup,M=E.read,R=E.resolveKeyframes,I=E.preUpdate,D=E.update,O=E.preRender,L=E.render,U=E.postRender,_processBatch=function(){var E=bs.useManualTiming?k.timestamp:performance.now();_=!1,bs.useManualTiming||(k.delta=S?1e3/60:Math.max(Math.min(E-k.timestamp,40),1)),k.timestamp=E,k.isProcessing=!0,T.process(k),M.process(k),R.process(k),I.process(k),D.process(k),O.process(k),L.process(k),U.process(k),k.isProcessing=!1,_&&l&&(S=!1,e(_processBatch))},B=Ns.reduce(function(l,T){var M=E[T];return l[T]=function(l){var E=arguments.length>1&&void 0!==arguments[1]&&arguments[1],T=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return _||(_=!0,S=!0,k.isProcessing||e(_processBatch)),M.schedule(l,E,T)},l},{});return{schedule:B,cancel:function(e){for(var l=0;l<Ns.length;l++)E[Ns[l]].cancel(e)},state:k,steps:E}}var Bs,zs=createRenderBatcher("undefined"!=typeof requestAnimationFrame?requestAnimationFrame:xs,!0),Gs=zs.schedule,js=zs.cancel,Hs=zs.state,Vs=zs.steps;function clearTime(){Bs=void 0}I({f:Gs,h:js,C:Hs,U:Vs});var Ws=I("e",{now:function(){return void 0===Bs&&Ws.set(Hs.isProcessing||bs.useManualTiming?Hs.timestamp:performance.now()),Bs},set:function(e){Bs=e,queueMicrotask(clearTime)}}),checkStringStartsWith=function(e){return function(l){return"string"==typeof l&&l.startsWith(e)}},qs=(I("a",checkStringStartsWith("--")),checkStringStartsWith("var(--")),isCSSVariableToken=function(e){return!!qs(e)&&Xs.test(e.split("/*")[0].trim())},Xs=/var\(--(?:[\x2D0-9A-Z_a-z\u017F\u212A]+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*|[\x2D0-9A-Z_a-z\u017F\u212A]+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*,(?:[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:(?![\t-\r \(\)\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uD800-\uDFFF\uFEFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])|[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*\((?:(?:(?![\(\)\uD800-\uDFFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])|\((?:(?![\(\)\uD800-\uDFFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])*\))*\))+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)\)$/i,Ks={test:function(e){return"number"==typeof e},parse:parseFloat,transform:function(e){return e}},Ys=_objectSpread2(_objectSpread2({},Ks),{},{transform:function(e){return ys(0,1,e)}}),Qs=_objectSpread2(_objectSpread2({},Ks),{},{default:1}),sanitize=function(e){return Math.round(1e5*e)/1e5},Js=/-?(?:[0-9]+(?:\.[0-9]+)?|\.[0-9]+)/g;var Zs=/^(?:#[0-9a-f]{3,8}|(?:rgb|h[s\u017F]l)a?\((?:-?[\.0-9]+%?[\t-\r ,\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+){2}-?[\.0-9]+%?[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:[,\/][\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)?(?:\b[0-9]+(?:\.[0-9]+)?|\.[0-9]+)?%?\))$/i,isColorString=function(e,l){return function(_){return Boolean("string"==typeof _&&Zs.test(_)&&_.startsWith(e)||l&&!function(e){return null==e}(_)&&Object.prototype.hasOwnProperty.call(_,l))}},splitColor=function(e,l,_){return function(S){if("string"!=typeof S)return S;var k=_slicedToArray(S.match(Js),4),E=k[0],T=k[1],M=k[2],R=k[3];return _defineProperty3(_defineProperty3(_defineProperty3(_defineProperty3({},e,parseFloat(E)),l,parseFloat(T)),_,parseFloat(M)),"alpha",void 0!==R?parseFloat(R):1)}},$s=_objectSpread2(_objectSpread2({},Ks),{},{transform:function(e){return Math.round(function(e){return ys(0,255,e)}(e))}}),eu={test:isColorString("rgb","red"),parse:splitColor("red","green","blue"),transform:function(e){var l=e.red,_=e.green,S=e.blue,k=e.alpha,E=void 0===k?1:k;return"rgba("+$s.transform(l)+", "+$s.transform(_)+", "+$s.transform(S)+", "+sanitize(Ys.transform(E))+")"}};var tu={test:isColorString("#"),parse:function(e){var l="",_="",S="",k="";return e.length>5?(l=e.substring(1,3),_=e.substring(3,5),S=e.substring(5,7),k=e.substring(7,9)):(l=e.substring(1,2),_=e.substring(2,3),S=e.substring(3,4),k=e.substring(4,5),l+=l,_+=_,S+=S,k+=k),{red:parseInt(l,16),green:parseInt(_,16),blue:parseInt(S,16),alpha:k?parseInt(k,16)/255:1}},transform:eu.transform},createUnitType=function(e){return{test:function(l){return"string"==typeof l&&l.endsWith(e)&&1===l.split(" ").length},parse:parseFloat,transform:function(l){return"".concat(l).concat(e)}}},ru=createUnitType("deg"),nu=I("L",createUnitType("%")),iu=I("p",createUnitType("px")),au=createUnitType("vh"),ou=createUnitType("vw"),su=function(){return _objectSpread2(_objectSpread2({},nu),{},{parse:function(e){return nu.parse(e)/100},transform:function(e){return nu.transform(100*e)}})}(),uu={test:isColorString("hsl","hue"),parse:splitColor("hue","saturation","lightness"),transform:function(e){var l=e.hue,_=e.saturation,S=e.lightness,k=e.alpha,E=void 0===k?1:k;return"hsla("+Math.round(l)+", "+nu.transform(sanitize(_))+", "+nu.transform(sanitize(S))+", "+sanitize(Ys.transform(E))+")"}},lu={test:function(e){return eu.test(e)||tu.test(e)||uu.test(e)},parse:function(e){return eu.test(e)?eu.parse(e):uu.test(e)?uu.parse(e):tu.parse(e)},transform:function(e){return"string"==typeof e?e:e.hasOwnProperty("red")?eu.transform(e):uu.transform(e)},getAnimatableNone:function(e){var l=lu.parse(e);return l.alpha=0,lu.transform(l)}},cu=/(?:#[0-9a-f]{3,8}|(?:rgb|h[s\u017F]l)a?\((?:-?[\.0-9]+%?[\t-\r ,\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+){2}-?[\.0-9]+%?[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:[,\/][\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)?(?:\b[0-9]+(?:\.[0-9]+)?|\.[0-9]+)?%?\))/gi;var hu="number",du="color",fu=/var[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*\([\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*--(?:[\x2D0-9A-Z_a-z\u017F\u212A]+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*|[\x2D0-9A-Z_a-z\u017F\u212A]+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*,(?:[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:(?![\t-\r \(\)\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uD800-\uDFFF\uFEFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])|[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*\((?:(?:(?![\(\)\uD800-\uDFFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])|\((?:(?![\(\)\uD800-\uDFFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])*\))*\))+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)\)|#[0-9a-f]{3,8}|(?:rgb|h[s\u017F]l)a?\((?:-?[\.0-9]+%?[\t-\r ,\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+){2}-?[\.0-9]+%?[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:[,\/][\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)?(?:\b[0-9]+(?:\.[0-9]+)?|\.[0-9]+)?%?\)|-?(?:[0-9]+(?:\.[0-9]+)?|\.[0-9]+)/gi;function analyseComplexValue(e){var l=e.toString(),_=[],S={color:[],number:[],var:[]},k=[],E=0,T=l.replace(fu,function(e){return lu.test(e)?(S.color.push(E),k.push(du),_.push(lu.parse(e))):e.startsWith("var(")?(S.var.push(E),k.push("var"),_.push(e)):(S.number.push(E),k.push(hu),_.push(parseFloat(e))),++E,"${}"}).split("${}");return{values:_,split:T,indexes:S,types:k}}function parseComplexValue(e){return analyseComplexValue(e).values}function createTransformer(e){var l=analyseComplexValue(e),_=l.split,S=l.types,k=_.length;return function(e){for(var l="",E=0;E<k;E++)if(l+=_[E],void 0!==e[E]){var T=S[E];l+=T===hu?sanitize(e[E]):T===du?lu.transform(e[E]):e[E]}return l}}var convertNumbersToZero=function(e){return"number"==typeof e?0:lu.test(e)?lu.getAnimatableNone(e):e};var pu=I("o",{test:function(e){var l,_;return isNaN(e)&&"string"==typeof e&&((null===(l=e.match(Js))||void 0===l?void 0:l.length)||0)+((null===(_=e.match(cu))||void 0===_?void 0:_.length)||0)>0},parse:parseComplexValue,createTransformer:createTransformer,getAnimatableNone:function(e){var l=parseComplexValue(e);return createTransformer(e)(l.map(convertNumbersToZero))}});function hueToRgb(e,l,_){return _<0&&(_+=1),_>1&&(_-=1),_<1/6?e+6*(l-e)*_:_<.5?l:_<2/3?e+(l-e)*(2/3-_)*6:e}function mixImmediate(e,l){return function(_){return _>0?l:e}}var vu=I("m",function(e,l,_){return e+(l-e)*_}),mixLinearColor=function(e,l,_){var S=e*e,k=_*(l*l-S)+S;return k<0?0:Math.sqrt(k)},gu=[tu,eu,uu];function asRGBA(e){var l,_=(l=e,gu.find(function(e){return e.test(l)}));if(!Boolean(_))return!1;var S=_.parse(e);return _===uu&&(S=function(e){var l=e.hue,_=e.saturation,S=e.lightness,k=e.alpha;l/=360,S/=100;var E=0,T=0,M=0;if(_/=100){var R=S<.5?S*(1+_):S+_-S*_,I=2*S-R;E=hueToRgb(I,R,l+1/3),T=hueToRgb(I,R,l),M=hueToRgb(I,R,l-1/3)}else E=T=M=S;return{red:Math.round(255*E),green:Math.round(255*T),blue:Math.round(255*M),alpha:k}}(S)),S}var mixColor=function(e,l){var _=asRGBA(e),S=asRGBA(l);if(!_||!S)return mixImmediate(e,l);var k=_objectSpread2({},_);return function(e){return k.red=mixLinearColor(_.red,S.red,e),k.green=mixLinearColor(_.green,S.green,e),k.blue=mixLinearColor(_.blue,S.blue,e),k.alpha=vu(_.alpha,S.alpha,e),eu.transform(k)}},mu=new Set(["none","hidden"]);function mixNumber(e,l){return function(_){return vu(e,l,_)}}function getMixer(e){return"number"==typeof e?mixNumber:"string"==typeof e?isCSSVariableToken(e)?mixImmediate:lu.test(e)?mixColor:mixComplex:Array.isArray(e)?mixArray:"object"===_typeof3(e)?lu.test(e)?mixColor:mixObject:mixImmediate}function mixArray(e,l){var _=_toConsumableArray3(e),S=_.length,k=e.map(function(e,_){return getMixer(e)(e,l[_])});return function(e){for(var l=0;l<S;l++)_[l]=k[l](e);return _}}function mixObject(e,l){var _=_objectSpread2(_objectSpread2({},e),l),S={};for(var k in _)void 0!==e[k]&&void 0!==l[k]&&(S[k]=getMixer(e[k])(e[k],l[k]));return function(e){for(var l in S)_[l]=S[l](e);return _}}var mixComplex=function(e,l){var _=pu.createTransformer(l),S=analyseComplexValue(e),k=analyseComplexValue(l);return S.indexes.var.length===k.indexes.var.length&&S.indexes.color.length===k.indexes.color.length&&S.indexes.number.length>=k.indexes.number.length?mu.has(e)&&!k.values.length||mu.has(l)&&!S.values.length?function(e,l){return mu.has(e)?function(_){return _<=0?e:l}:function(_){return _>=1?l:e}}(e,l):ks(mixArray(function(e,l){for(var _=[],S={color:0,var:0,number:0},k=0;k<l.values.length;k++){var E,T=l.types[k],M=e.indexes[T][S[T]],R=null!==(E=e.values[M])&&void 0!==E?E:0;_[k]=R,S[T]++}return _}(S,k),k.values),_):mixImmediate(e,l)};function mix(e,l,_){return"number"==typeof e&&"number"==typeof l&&"number"==typeof _?vu(e,l,_):getMixer(e)(e,l)}var frameloopDriver=function(e){var passTimestamp=function(l){var _=l.timestamp;return e(_)};return{start:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return Gs.update(passTimestamp,e)},stop:function(){return js(passTimestamp)},now:function(){return Hs.isProcessing?Hs.timestamp:Ws.now()}}},generateLinearEasing=function(e,l){for(var _=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,S="",k=Math.max(Math.round(l/_),2),E=0;E<k;E++)S+=Math.round(1e4*e(E/(k-1)))/1e4+", ";return"linear(".concat(S.substring(0,S.length-2),")")},yu=2e4;function calcGeneratorDuration(e){for(var l=0,_=e.next(l);!_.done&&l<yu;)l+=50,_=e.next(l);return l>=yu?1/0:l}function calcGeneratorVelocity(e,l,_){var S=Math.max(l-5,0);return velocityPerSecond(_-e(S),l-S)}var _u=100,bu=10,Su=1,wu=0,xu=800,ku=.3,Au=.3,Eu={granular:.01,default:2},Cu={granular:.005,default:.5},Tu=.01,Mu=10,Ru=.05,Iu=1,Pu=.001;function findSpring(e){var l,_,S=e.duration,k=void 0===S?xu:S,E=e.bounce,T=void 0===E?ku:E,M=e.velocity,R=void 0===M?wu:M,I=e.mass,D=void 0===I?Su:I,O=1-T;O=ys(Ru,Iu,O),k=ys(Tu,Mu,Ts(k)),O<1?(l=function(e){var l=e*O,_=l*k,S=l-R,E=calcAngularFreq(e,O),T=Math.exp(-_);return Pu-S/E*T},_=function(e){var _=e*O*k,S=_*R+R,E=Math.pow(O,2)*Math.pow(e,2)*k,T=Math.exp(-_),M=calcAngularFreq(Math.pow(e,2),O);return(-l(e)+Pu>0?-1:1)*((S-E)*T)/M}):(l=function(e){return Math.exp(-e*k)*((e-R)*k+1)-.001},_=function(e){return Math.exp(-e*k)*(k*k*(R-e))});var L=function(e,l,_){for(var S=_,k=1;k<Du;k++)S-=e(S)/l(S);return S}(l,_,5/k);if(k=Cs(k),isNaN(L))return{stiffness:_u,damping:bu,duration:k};var U=Math.pow(L,2)*D;return{stiffness:U,damping:2*O*Math.sqrt(D*U),duration:k}}var Du=12;function calcAngularFreq(e,l){return e*Math.sqrt(1-l*l)}var Ou=["duration","bounce"],Lu=["stiffness","damping","mass"];function isSpringType(e,l){return l.some(function(l){return void 0!==e[l]})}function spring(){var e,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Au,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ku,S="object"!==_typeof3(l)?{visualDuration:l,keyframes:[0,1],bounce:_}:l,k=S.restSpeed,E=S.restDelta,T=S.keyframes[0],M=S.keyframes[S.keyframes.length-1],R={done:!1,value:T},I=function(e){var l=_objectSpread2({velocity:wu,stiffness:_u,damping:bu,mass:Su,isResolvedFromDuration:!1},e);if(!isSpringType(e,Lu)&&isSpringType(e,Ou))if(e.visualDuration){var _=e.visualDuration,S=2*Math.PI/(1.2*_),k=S*S,E=2*ys(.05,1,1-(e.bounce||0))*Math.sqrt(k);l=_objectSpread2(_objectSpread2({},l),{},{mass:Su,stiffness:k,damping:E})}else{var T=findSpring(e);(l=_objectSpread2(_objectSpread2(_objectSpread2({},l),T),{},{mass:Su})).isResolvedFromDuration=!0}return l}(_objectSpread2(_objectSpread2({},S),{},{velocity:-Ts(S.velocity||0)})),D=I.stiffness,O=I.damping,L=I.mass,U=I.duration,B=I.velocity,z=I.isResolvedFromDuration,G=B||0,j=O/(2*Math.sqrt(D*L)),H=M-T,V=Ts(Math.sqrt(D/L)),W=Math.abs(H)<5;if(k||(k=W?Eu.granular:Eu.default),E||(E=W?Cu.granular:Cu.default),j<1){var q=calcAngularFreq(V,j);e=function(e){var l=Math.exp(-j*V*e);return M-l*((G+j*V*H)/q*Math.sin(q*e)+H*Math.cos(q*e))}}else if(1===j)e=function(e){return M-Math.exp(-V*e)*(H+(G+V*H)*e)};else{var X=V*Math.sqrt(j*j-1);e=function(e){var l=Math.exp(-j*V*e),_=Math.min(X*e,300);return M-l*((G+j*V*H)*Math.sinh(_)+X*H*Math.cosh(_))/X}}var K={calculatedDuration:z&&U||null,next:function(l){var _=e(l);if(z)R.done=l>=U;else{var S=0===l?G:0;j<1&&(S=0===l?Cs(G):calcGeneratorVelocity(e,l,_));var T=Math.abs(S)<=k,I=Math.abs(M-_)<=E;R.done=T&&I}return R.value=R.done?M:_,R},toString:function(){var e=Math.min(calcGeneratorDuration(K),yu),l=generateLinearEasing(function(l){return K.next(e*l).value},e,30);return e+"ms "+l},toTransition:function(){}};return K}function inertia(e){var l=e.keyframes,_=e.velocity,S=void 0===_?0:_,k=e.power,E=void 0===k?.8:k,T=e.timeConstant,M=void 0===T?325:T,R=e.bounceDamping,I=void 0===R?10:R,D=e.bounceStiffness,O=void 0===D?500:D,L=e.modifyTarget,U=e.min,B=e.max,z=e.restDelta,G=void 0===z?.5:z,j=e.restSpeed,H=l[0],V={done:!1,value:H},nearestBoundary=function(e){return void 0===U?B:void 0===B||Math.abs(U-e)<Math.abs(B-e)?U:B},W=E*S,q=H+W,X=void 0===L?q:L(q);X!==q&&(W=X-H);var K,Y,calcDelta=function(e){return-W*Math.exp(-e/M)},calcLatest=function(e){return X+calcDelta(e)},applyFriction=function(e){var l=calcDelta(e),_=calcLatest(e);V.done=Math.abs(l)<=G,V.value=V.done?X:_},checkCatchBoundary=function(e){var l;(l=V.value,void 0!==U&&l<U||void 0!==B&&l>B)&&(K=e,Y=spring({keyframes:[V.value,nearestBoundary(V.value)],velocity:calcGeneratorVelocity(calcLatest,e,V.value),damping:I,stiffness:O,restDelta:G,restSpeed:j}))};return checkCatchBoundary(0),{calculatedDuration:null,next:function(e){var l=!1;return Y||void 0!==K||(l=!0,applyFriction(e),checkCatchBoundary(e)),void 0!==K&&e>=K?Y.next(e-K):(!l&&applyFriction(e),V)}}}function interpolate(e,l){var _=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},S=_.clamp,k=void 0===S||S,E=_.ease,T=_.mixer,M=e.length;if(_s(M===l.length),1===M)return function(){return l[0]};if(2===M&&l[0]===l[1])return function(){return l[1]};var R=e[0]===e[1];e[0]>e[M-1]&&(e=_toConsumableArray3(e).reverse(),l=_toConsumableArray3(l).reverse());var I=function(e,l,_){for(var S=[],k=_||bs.mix||mix,E=e.length-1,T=0;T<E;T++){var M=k(e[T],e[T+1]);if(l){var R=Array.isArray(l)?l[T]||xs:l;M=ks(R,M)}S.push(M)}return S}(l,E,T),D=I.length,interpolator=function(_){if(R&&_<e[0])return l[0];var S=0;if(D>1)for(;S<e.length-2&&!(_<e[S+1]);S++);var k=As(e[S],e[S+1],_);return I[S](k)};return k?function(l){return interpolator(ys(e[0],e[M-1],l))}:interpolator}function defaultOffset(e){var l=[0];return function(e,l){for(var _=e[e.length-1],S=1;S<=l;S++){var k=As(0,l,S);e.push(vu(_,1,k))}}(l,e.length-1),l}function keyframes(e){var l,_,S=e.duration,k=void 0===S?300:S,E=e.keyframes,T=e.times,M=e.ease,R=void 0===M?"easeInOut":M,I=function(e){return Array.isArray(e)&&"number"!=typeof e[0]}(R)?R.map(easingDefinitionToFunction):easingDefinitionToFunction(R),D={done:!1,value:E[0]},O=function(e,l){return e.map(function(e){return e*l})}(T&&T.length===E.length?T:defaultOffset(E),k),L=interpolate(O,E,{ease:Array.isArray(I)?I:(l=E,_=I,l.map(function(){return _||Us}).splice(0,l.length-1))});return{calculatedDuration:k,next:function(e){return D.value=L(e),D.done=e>=k,D}}}spring.applyToOptions=function(e){var l=function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,_=(arguments.length>2?arguments[2]:void 0)(_objectSpread2(_objectSpread2({},e),{},{keyframes:[0,l]})),S=Math.min(calcGeneratorDuration(_),yu);return{type:"keyframes",ease:function(e){return _.next(S*e).value/l},duration:Ts(S)}}(e,100,spring);return e.ease=l.ease,e.duration=Cs(l.duration),e.type="keyframes",e};var isNotNull=function(e){return null!==e};function getFinalKeyframe(e,l,_){var S=l.repeat,k=l.repeatType,E=void 0===k?"loop":k,T=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,M=e.filter(isNotNull),R=T<0||S&&"loop"!==E&&S%2==1?0:M.length-1;return R&&void 0!==_?_:M[R]}var Uu={decay:inertia,inertia:inertia,tween:keyframes,keyframes:keyframes,spring:spring};function replaceTransitionType(e){"string"==typeof e.type&&(e.type=Uu[e.type])}var Fu=function(){return _createClass3(function WithPromise(){_classCallCheck3(this,WithPromise),this.updateFinished()},[{key:"finished",get:function(){return this._finished}},{key:"updateFinished",value:function(){var e=this;this._finished=new Promise(function(l){e.resolve=l})}},{key:"notifyFinished",value:function(){this.resolve()}},{key:"then",value:function(e,l){return this.finished.then(e,l)}}])}(),percentToProgress=function(e){return e/100},Nu=function(e){function JSAnimation(e){var l;return _classCallCheck3(this,JSAnimation),(l=_callSuper(this,JSAnimation)).state="idle",l.startTime=null,l.isStopped=!1,l.currentTime=0,l.holdTime=null,l.playbackSpeed=1,l.stop=function(){var e,_,S=l.options.motionValue;S&&S.updatedAt!==Ws.now()&&l.tick(Ws.now()),l.isStopped=!0,"idle"!==l.state&&(l.teardown(),null===(e=(_=l.options).onStop)||void 0===e||e.call(_))},l.options=e,l.initAnimation(),l.play(),!1===e.autoplay&&l.pause(),l}return _inherits(JSAnimation,e),_createClass3(JSAnimation,[{key:"initAnimation",value:function(){var e=this.options;replaceTransitionType(e);var l=e.type,_=void 0===l?keyframes:l,S=e.repeat,k=void 0===S?0:S,E=e.repeatDelay,T=void 0===E?0:E,M=e.repeatType,R=e.velocity,I=void 0===R?0:R,D=e.keyframes,O=_||keyframes;O!==keyframes&&"number"!=typeof D[0]&&(this.mixKeyframes=ks(percentToProgress,mix(D[0],D[1])),D=[0,100]);var L=O(_objectSpread2(_objectSpread2({},e),{},{keyframes:D}));"mirror"===M&&(this.mirroredGenerator=O(_objectSpread2(_objectSpread2({},e),{},{keyframes:_toConsumableArray3(D).reverse(),velocity:-I}))),null===L.calculatedDuration&&(L.calculatedDuration=calcGeneratorDuration(L));var U=L.calculatedDuration;this.calculatedDuration=U,this.resolvedDuration=U+T,this.totalDuration=this.resolvedDuration*(k+1)-T,this.generator=L}},{key:"updateTime",value:function(e){var l=Math.round(e-this.startTime)*this.playbackSpeed;null!==this.holdTime?this.currentTime=this.holdTime:this.currentTime=l}},{key:"tick",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]&&arguments[1],_=this.generator,S=this.totalDuration,k=this.mixKeyframes,E=this.mirroredGenerator,T=this.resolvedDuration,M=this.calculatedDuration;if(null===this.startTime)return _.next(0);var R=this.options,I=R.delay,D=void 0===I?0:I,O=R.keyframes,L=R.repeat,U=R.repeatType,B=R.repeatDelay,z=R.type,G=R.onUpdate,j=R.finalKeyframe;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-S/this.speed,this.startTime)),l?this.currentTime=e:this.updateTime(e);var H=this.currentTime-D*(this.playbackSpeed>=0?1:-1),V=this.playbackSpeed>=0?H<0:H>S;this.currentTime=Math.max(H,0),"finished"===this.state&&null===this.holdTime&&(this.currentTime=S);var W=this.currentTime,q=_;if(L){var X=Math.min(this.currentTime,S)/T,K=Math.floor(X),Y=X%1;!Y&&X>=1&&(Y=1),1===Y&&K--,K=Math.min(K,L+1),Boolean(K%2)&&("reverse"===U?(Y=1-Y,B&&(Y-=B/T)):"mirror"===U&&(q=E)),W=ys(0,1,Y)*T}var Q=V?{done:!1,value:O[0]}:q.next(W);k&&(Q.value=k(Q.value));var J=Q.done;V||null===M||(J=this.playbackSpeed>=0?this.currentTime>=S:this.currentTime<=0);var Z=null===this.holdTime&&("finished"===this.state||"running"===this.state&&J);return Z&&z!==inertia&&(Q.value=getFinalKeyframe(O,this.options,j,this.speed)),G&&G(Q.value),Z&&this.finish(),Q}},{key:"then",value:function(e,l){return this.finished.then(e,l)}},{key:"duration",get:function(){return Ts(this.calculatedDuration)}},{key:"iterationDuration",get:function(){var e=(this.options||{}).delay,l=void 0===e?0:e;return this.duration+Ts(l)}},{key:"time",get:function(){return Ts(this.currentTime)},set:function(e){var l;e=Cs(e),this.currentTime=e,null===this.startTime||null!==this.holdTime||0===this.playbackSpeed?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),null===(l=this.driver)||void 0===l||l.start(!1)}},{key:"speed",get:function(){return this.playbackSpeed},set:function(e){this.updateTime(Ws.now());var l=this.playbackSpeed!==e;this.playbackSpeed=e,l&&(this.time=Ts(this.currentTime))}},{key:"play",value:function(){var e,l,_=this;if(!this.isStopped){var S=this.options,k=S.driver,E=void 0===k?frameloopDriver:k,T=S.startTime;this.driver||(this.driver=E(function(e){return _.tick(e)})),null===(e=(l=this.options).onPlay)||void 0===e||e.call(l);var M=this.driver.now();"finished"===this.state?(this.updateFinished(),this.startTime=M):null!==this.holdTime?this.startTime=M-this.holdTime:this.startTime||(this.startTime=null!=T?T:M),"finished"===this.state&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}}},{key:"pause",value:function(){this.state="paused",this.updateTime(Ws.now()),this.holdTime=this.currentTime}},{key:"complete",value:function(){"running"!==this.state&&this.play(),this.state="finished",this.holdTime=null}},{key:"finish",value:function(){var e,l;this.notifyFinished(),this.teardown(),this.state="finished",null===(e=(l=this.options).onComplete)||void 0===e||e.call(l)}},{key:"cancel",value:function(){var e,l;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),null===(e=(l=this.options).onCancel)||void 0===e||e.call(l)}},{key:"teardown",value:function(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}},{key:"stopDriver",value:function(){this.driver&&(this.driver.stop(),this.driver=void 0)}},{key:"sample",value:function(e){return this.startTime=0,this.tick(e,!0)}},{key:"attachTimeline",value:function(e){var l;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),null===(l=this.driver)||void 0===l||l.stop(),e.observe(this)}}])}(Fu);I("J",Nu);var radToDeg=function(e){return 180*e/Math.PI},rotate$2=function(e){var l=radToDeg(Math.atan2(e[1],e[0]));return rebaseAngle(l)},Bu={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:function(e){return(Math.abs(e[0])+Math.abs(e[3]))/2},rotate:rotate$2,rotateZ:rotate$2,skewX:function(e){return radToDeg(Math.atan(e[1]))},skewY:function(e){return radToDeg(Math.atan(e[2]))},skew:function(e){return(Math.abs(e[1])+Math.abs(e[2]))/2}},rebaseAngle=function(e){return(e%=360)<0&&(e+=360),e},scaleX=function(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])},scaleY=function(e){return Math.sqrt(e[4]*e[4]+e[5]*e[5])},zu={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:scaleX,scaleY:scaleY,scale:function(e){return(scaleX(e)+scaleY(e))/2},rotateX:function(e){return rebaseAngle(radToDeg(Math.atan2(e[6],e[5])))},rotateY:function(e){return rebaseAngle(radToDeg(Math.atan2(-e[2],e[0])))},rotateZ:rotate$2,rotate:rotate$2,skewX:function(e){return radToDeg(Math.atan(e[4]))},skewY:function(e){return radToDeg(Math.atan(e[1]))},skew:function(e){return(Math.abs(e[1])+Math.abs(e[4]))/2}};function defaultTransformValue(e){return e.includes("scale")?1:0}function parseValueFromTransform(e,l){if(!e||"none"===e)return defaultTransformValue(l);var _,S,k=e.match(/^matrix3d\(([\t-\r ,-\.0-9e\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+)\)$/);if(k)_=zu,S=k;else{var E=e.match(/^matrix\(([\t-\r ,-\.0-9e\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+)\)$/);_=Bu,S=E}if(!S)return defaultTransformValue(l);var T=_[l],M=S[1].split(",").map(convertTransformToNumber);return"function"==typeof T?T(M):M[T]}I("u",function(e,l){var _=getComputedStyle(e).transform;return parseValueFromTransform(void 0===_?"none":_,l)});function convertTransformToNumber(e){return parseFloat(e.trim())}var Gu=I("b",["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"]),ju=(I("t",function(){return new Set(Gu)}()),function(e){return e===Ks||e===iu}),Hu=new Set(["x","y","z"]),Vu=Gu.filter(function(e){return!Hu.has(e)});var Wu={width:function(e,l){var _=e.x,S=l.paddingLeft,k=void 0===S?"0":S,E=l.paddingRight,T=void 0===E?"0":E;return _.max-_.min-parseFloat(k)-parseFloat(T)},height:function(e,l){var _=e.y,S=l.paddingTop,k=void 0===S?"0":S,E=l.paddingBottom,T=void 0===E?"0":E;return _.max-_.min-parseFloat(k)-parseFloat(T)},top:function(e,l){var _=l.top;return parseFloat(_)},left:function(e,l){var _=l.left;return parseFloat(_)},bottom:function(e,l){var _=e.y,S=l.top;return parseFloat(S)+(_.max-_.min)},right:function(e,l){var _=e.x,S=l.left;return parseFloat(S)+(_.max-_.min)},x:function(e,l){return parseValueFromTransform(l.transform,"x")},y:function(e,l){return parseValueFromTransform(l.transform,"y")}};Wu.translateX=Wu.x,Wu.translateY=Wu.y;var qu=new Set,Xu=!1,Ku=!1,Yu=!1;function measureAllKeyframes(){if(Ku){var e=Array.from(qu).filter(function(e){return e.needsMeasurement}),l=new Set(e.map(function(e){return e.element})),_=new Map;l.forEach(function(e){var l=function(e){var l=[];return Vu.forEach(function(_){var S=e.getValue(_);void 0!==S&&(l.push([_,S.get()]),S.set(_.startsWith("scale")?1:0))}),l}(e);l.length&&(_.set(e,l),e.render())}),e.forEach(function(e){return e.measureInitialState()}),l.forEach(function(e){e.render();var l=_.get(e);l&&l.forEach(function(l){var _,S=_slicedToArray(l,2),k=S[0],E=S[1];null===(_=e.getValue(k))||void 0===_||_.set(E)})}),e.forEach(function(e){return e.measureEndState()}),e.forEach(function(e){void 0!==e.suspendedScrollY&&window.scrollTo(0,e.suspendedScrollY)})}Ku=!1,Xu=!1,qu.forEach(function(e){return e.complete(Yu)}),qu.clear()}function readAllKeyframes(){qu.forEach(function(e){e.readKeyframes(),e.needsMeasurement&&(Ku=!0)})}var Qu=function(){return _createClass3(function KeyframeResolver(e,l,_,S,k){var E=arguments.length>5&&void 0!==arguments[5]&&arguments[5];_classCallCheck3(this,KeyframeResolver),this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=_toConsumableArray3(e),this.onComplete=l,this.name=_,this.motionValue=S,this.element=k,this.isAsync=E},[{key:"scheduleResolve",value:function(){this.state="scheduled",this.isAsync?(qu.add(this),Xu||(Xu=!0,Gs.read(readAllKeyframes),Gs.resolveKeyframes(measureAllKeyframes))):(this.readKeyframes(),this.complete())}},{key:"readKeyframes",value:function(){var e=this.unresolvedKeyframes,l=this.name,_=this.element,S=this.motionValue;if(null===e[0]){var k=null==S?void 0:S.get(),E=e[e.length-1];if(void 0!==k)e[0]=k;else if(_&&l){var T=_.readValue(l,E);null!=T&&(e[0]=T)}void 0===e[0]&&(e[0]=E),S&&void 0===k&&S.set(e[0])}!function(e){for(var l=1;l<e.length;l++){var _;null!==(_=e[l])&&void 0!==_||(e[l]=e[l-1])}}(e)}},{key:"setFinalKeyframe",value:function(){}},{key:"measureInitialState",value:function(){}},{key:"renderEndStyles",value:function(){}},{key:"measureEndState",value:function(){}},{key:"complete",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),qu.delete(this)}},{key:"cancel",value:function(){"scheduled"===this.state&&(qu.delete(this),this.state="pending")}},{key:"resume",value:function(){"pending"===this.state&&this.scheduleResolve()}}])}();I("K",Qu);var Ju=I("$",memo(function(){return void 0!==window.ScrollTimeline})),Zu={};function memoSupports(e,l){var _=memo(e);return function(){var e;return null!==(e=Zu[l])&&void 0!==e?e:_()}}var $u=memoSupports(function(){try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch(ta){return!1}return!0},"linearEasing"),cubicBezierAsString=function(e){var l=_slicedToArray(e,4),_=l[0],S=l[1],k=l[2],E=l[3];return"cubic-bezier(".concat(_,", ").concat(S,", ").concat(k,", ").concat(E,")")},el={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:cubicBezierAsString([0,.65,.55,1]),circOut:cubicBezierAsString([.55,0,1,.45]),backIn:cubicBezierAsString([.31,.01,.66,-.59]),backOut:cubicBezierAsString([.33,1.53,.69,.99])};function mapEasingToNativeEasing(e,l){return e?"function"==typeof e?$u()?generateLinearEasing(e,l):"ease-out":isBezierDefinition(e)?cubicBezierAsString(e):Array.isArray(e)?e.map(function(e){return mapEasingToNativeEasing(e,l)||el.easeOut}):el[e]:void 0}function startWaapiAnimation(e,l,_){var S=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},k=S.delay,E=void 0===k?0:k,T=S.duration,M=void 0===T?300:T,R=S.repeat,I=void 0===R?0:R,D=S.repeatType,O=void 0===D?"loop":D,L=S.ease,U=void 0===L?"easeOut":L,B=S.times,z=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,G=_defineProperty3({},l,_);B&&(G.offset=B);var j=mapEasingToNativeEasing(U,M);Array.isArray(j)&&(G.easing=j);var H={delay:E,duration:M,easing:Array.isArray(j)?"linear":j,fill:"both",iterations:I+1,direction:"reverse"===O?"alternate":"normal"};return z&&(H.pseudoElement=z),e.animate(G,H)}function isGenerator(e){return"function"==typeof e&&"applyToOptions"in e}var tl=function(e){function NativeAnimation(e){var l;if(_classCallCheck3(this,NativeAnimation),(l=_callSuper(this,NativeAnimation)).finishedTime=null,l.isStopped=!1,!e)return _possibleConstructorReturn(l);var _=e.element,S=e.name,k=e.keyframes,T=e.pseudoElement,M=e.allowFlatten,R=void 0!==M&&M,I=e.finalKeyframe,D=e.onComplete;l.isPseudoElement=Boolean(T),l.allowFlatten=R,l.options=e,_s("string"!=typeof e.type);var O=function(e){var l,_,S=e.type,k=_objectWithoutProperties3(e,E);return isGenerator(S)&&$u()?S.applyToOptions(k):(null!==(l=k.duration)&&void 0!==l||(k.duration=300),null!==(_=k.ease)&&void 0!==_||(k.ease="easeOut"),k)}(e);return l.animation=startWaapiAnimation(_,S,k,O,T),!1===O.autoplay&&l.animation.pause(),l.animation.onfinish=function(){if(l.finishedTime=l.time,!T){var e=getFinalKeyframe(k,l.options,I,l.speed);l.updateMotionValue?l.updateMotionValue(e):function(e,l,_){!function(e){return e.startsWith("--")}(l)?e.style[l]=_:e.style.setProperty(l,_)}(_,S,e),l.animation.cancel()}null==D||D(),l.notifyFinished()},l}return _inherits(NativeAnimation,e),_createClass3(NativeAnimation,[{key:"play",value:function(){this.isStopped||(this.animation.play(),"finished"===this.state&&this.updateFinished())}},{key:"pause",value:function(){this.animation.pause()}},{key:"complete",value:function(){var e,l;null===(e=(l=this.animation).finish)||void 0===e||e.call(l)}},{key:"cancel",value:function(){try{this.animation.cancel()}catch(ta){}}},{key:"stop",value:function(){if(!this.isStopped){this.isStopped=!0;var e=this.state;"idle"!==e&&"finished"!==e&&(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}}},{key:"commitStyles",value:function(){var e,l;this.isPseudoElement||(null===(e=(l=this.animation).commitStyles)||void 0===e||e.call(l))}},{key:"duration",get:function(){var e,l,_=(null===(e=this.animation.effect)||void 0===e||null===(l=e.getComputedTiming)||void 0===l?void 0:l.call(e).duration)||0;return Ts(Number(_))}},{key:"iterationDuration",get:function(){var e=(this.options||{}).delay,l=void 0===e?0:e;return this.duration+Ts(l)}},{key:"time",get:function(){return Ts(Number(this.animation.currentTime)||0)},set:function(e){this.finishedTime=null,this.animation.currentTime=Cs(e)}},{key:"speed",get:function(){return this.animation.playbackRate},set:function(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}},{key:"state",get:function(){return null!==this.finishedTime?"finished":this.animation.playState}},{key:"startTime",get:function(){return Number(this.animation.startTime)},set:function(e){this.animation.startTime=e}},{key:"attachTimeline",value:function(e){var l,_=e.timeline,S=e.observe;this.allowFlatten&&(null===(l=this.animation.effect)||void 0===l||l.updateTiming({easing:"linear"}));return this.animation.onfinish=null,_&&Ju()?(this.animation.timeline=_,xs):S(this)}}])}(Fu),rl={anticipate:anticipate,backInOut:Is,circInOut:Ds};function replaceStringEasing(e){"string"==typeof e.ease&&e.ease in rl&&(e.ease=rl[e.ease])}var nl=function(e){function NativeAnimationExtended(e){var l;return _classCallCheck3(this,NativeAnimationExtended),replaceStringEasing(e),replaceTransitionType(e),l=_callSuper(this,NativeAnimationExtended,[e]),e.startTime&&(l.startTime=e.startTime),l.options=e,l}return _inherits(NativeAnimationExtended,e),_createClass3(NativeAnimationExtended,[{key:"updateMotionValue",value:function(e){var l,_=this.options,S=_.motionValue,k=(_.onUpdate,_.onComplete,_.element,_objectWithoutProperties3(_,T));if(S)if(void 0===e){var E=new Nu(_objectSpread2(_objectSpread2({},k),{},{autoplay:!1})),M=Cs(null!==(l=this.finishedTime)&&void 0!==l?l:this.time);S.setWithVelocity(E.sample(M-10).value,E.sample(M).value,10),E.stop()}else S.set(e)}}])}(tl),isAnimatable=function(e,l){return"zIndex"!==l&&(!("number"!=typeof e&&!Array.isArray(e))||!("string"!=typeof e||!pu.test(e)&&"0"!==e||e.startsWith("url(")))};function makeAnimationInstant(e){e.duration=0,e.type="keyframes"}var il=new Set(["opacity","clipPath","filter","transform"]),al=memo(function(){return Object.hasOwnProperty.call(Element.prototype,"animate")});var ol=function(e){function AsyncMotionValueAnimation(e){var l,_,S=e.autoplay,k=void 0===S||S,E=e.delay,T=void 0===E?0:E,R=e.type,I=void 0===R?"keyframes":R,D=e.repeat,O=void 0===D?0:D,L=e.repeatDelay,U=void 0===L?0:L,B=e.repeatType,z=void 0===B?"loop":B,G=e.keyframes,j=e.name,H=e.motionValue,V=e.element,W=_objectWithoutProperties3(e,M);_classCallCheck3(this,AsyncMotionValueAnimation),(_=_callSuper(this,AsyncMotionValueAnimation)).stop=function(){var e,l,S;_._animation&&(_._animation.stop(),null===(l=(S=_).stopTimeline)||void 0===l||l.call(S));null===(e=_.keyframeResolver)||void 0===e||e.cancel()},_.createdAt=Ws.now();var q=_objectSpread2({autoplay:k,delay:T,type:I,repeat:O,repeatDelay:U,repeatType:z,name:j,motionValue:H,element:V},W),X=(null==V?void 0:V.KeyframeResolver)||Qu;return _.keyframeResolver=new X(G,function(e,l,S){return _.onKeyframesResolved(e,l,q,!S)},j,H,V),null===(l=_.keyframeResolver)||void 0===l||l.scheduleResolve(),_}return _inherits(AsyncMotionValueAnimation,e),_createClass3(AsyncMotionValueAnimation,[{key:"onKeyframesResolved",value:function(e,l,_,S){var k=this;this.keyframeResolver=void 0;var E=_.name,T=_.type,M=_.velocity,R=_.delay,I=_.isHandoff,D=_.onUpdate;this.resolvedAt=Ws.now(),function(e,l,_,S){var k=e[0];if(null===k)return!1;if("display"===l||"visibility"===l)return!0;var E=e[e.length-1],T=isAnimatable(k,l),M=isAnimatable(E,l);return!(!T||!M)&&(function(e){var l=e[0];if(1===e.length)return!0;for(var _=0;_<e.length;_++)if(e[_]!==l)return!0}(e)||("spring"===_||isGenerator(_))&&S)}(e,E,T,M)||(!bs.instantAnimations&&R||null==D||D(getFinalKeyframe(e,_,l)),e[0]=e[e.length-1],makeAnimationInstant(_),_.repeat=0);var O=_objectSpread2(_objectSpread2({startTime:S?this.resolvedAt&&this.resolvedAt-this.createdAt>40?this.resolvedAt:this.createdAt:void 0,finalKeyframe:l},_),{},{keyframes:e}),L=!I&&function(e){var l,_=e.motionValue,S=e.name,k=e.repeatDelay,E=e.repeatType,T=e.damping,M=e.type;if(!((null==_||null===(l=_.owner)||void 0===l?void 0:l.current)instanceof HTMLElement))return!1;var R=_.owner.getProps(),I=R.onUpdate,D=R.transformTemplate;return al()&&S&&il.has(S)&&("transform"!==S||!D)&&!I&&!k&&"mirror"!==E&&0!==T&&"inertia"!==M}(O)?new nl(_objectSpread2(_objectSpread2({},O),{},{element:O.motionValue.owner.current})):new Nu(O);L.finished.then(function(){return k.notifyFinished()}).catch(xs),this.pendingTimeline&&(this.stopTimeline=L.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=L}},{key:"finished",get:function(){return this._animation?this.animation.finished:this._finished}},{key:"then",value:function(e,l){return this.finished.finally(e).then(function(){})}},{key:"animation",get:function(){var e;this._animation||(null===(e=this.keyframeResolver)||void 0===e||e.resume(),Yu=!0,readAllKeyframes(),measureAllKeyframes(),Yu=!1);return this._animation}},{key:"duration",get:function(){return this.animation.duration}},{key:"iterationDuration",get:function(){return this.animation.iterationDuration}},{key:"time",get:function(){return this.animation.time},set:function(e){this.animation.time=e}},{key:"speed",get:function(){return this.animation.speed},set:function(e){this.animation.speed=e}},{key:"state",get:function(){return this.animation.state}},{key:"startTime",get:function(){return this.animation.startTime}},{key:"attachTimeline",value:function(e){var l=this;return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,function(){return l.stop()}}},{key:"play",value:function(){this.animation.play()}},{key:"pause",value:function(){this.animation.pause()}},{key:"complete",value:function(){this.animation.complete()}},{key:"cancel",value:function(){var e;this._animation&&this.animation.cancel(),null===(e=this.keyframeResolver)||void 0===e||e.cancel()}}])}(Fu);I("A",ol);var sl=/^var\(--(?:([\x2D0-9A-Z_a-z]+)|([\x2D0-9A-Z_a-z]+), ?([ #%\(\),-\.0-9A-Za-z]+))\)/;function getVariableValue(e,l){var _=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,S=function(e){var l=sl.exec(e);if(!l)return[,];var _=_slicedToArray(l,4),S=_[1],k=_[2],E=_[3];return["--".concat(null!=S?S:k),E]}(e),k=_slicedToArray(S,2),E=k[0],T=k[1];if(E){var M=window.getComputedStyle(l).getPropertyValue(E);if(M){var R=M.trim();return Ss(R)?parseFloat(R):R}return isCSSVariableToken(T)?getVariableValue(T,l,_+1):T}}var ul=I("z",new Set(["width","height","top","left","right","bottom"].concat(_toConsumableArray3(Gu)))),testValueType=function(e){return function(l){return l.test(e)}},ll=[Ks,iu,nu,ru,ou,au,{test:function(e){return"auto"===e},parse:function(e){return e}}],findDimensionValueType=function(e){return ll.find(testValueType(e))};function isNone(e){return"number"==typeof e?0===e:null===e||("none"===e||"0"===e||ws(e))}var cl=new Set(["brightness","contrast","saturate","opacity"]);function applyDefaultFilter(e){var l=_slicedToArray(e.slice(0,-1).split("("),2),_=l[0],S=l[1];if("drop-shadow"===_)return e;var k=_slicedToArray(S.match(Js)||[],1)[0];if(!k)return e;var E=S.replace(k,""),T=cl.has(_)?1:0;return k!==S&&(T*=100),_+"("+T+E+")"}var hl=/\b([\x2Da-z]*)\((?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?\)/g,dl=_objectSpread2(_objectSpread2({},pu),{},{getAnimatableNone:function(e){var l=e.match(hl);return l?l.map(applyDefaultFilter).join(" "):e}}),fl=_objectSpread2(_objectSpread2({},Ks),{},{transform:Math.round}),pl=I("n",_objectSpread2(_objectSpread2({borderWidth:iu,borderTopWidth:iu,borderRightWidth:iu,borderBottomWidth:iu,borderLeftWidth:iu,borderRadius:iu,radius:iu,borderTopLeftRadius:iu,borderTopRightRadius:iu,borderBottomRightRadius:iu,borderBottomLeftRadius:iu,width:iu,maxWidth:iu,height:iu,maxHeight:iu,top:iu,right:iu,bottom:iu,left:iu,padding:iu,paddingTop:iu,paddingRight:iu,paddingBottom:iu,paddingLeft:iu,margin:iu,marginTop:iu,marginRight:iu,marginBottom:iu,marginLeft:iu,backgroundPositionX:iu,backgroundPositionY:iu},{rotate:ru,rotateX:ru,rotateY:ru,rotateZ:ru,scale:Qs,scaleX:Qs,scaleY:Qs,scaleZ:Qs,skew:ru,skewX:ru,skewY:ru,distance:iu,translateX:iu,translateY:iu,translateZ:iu,x:iu,y:iu,z:iu,perspective:iu,transformPerspective:iu,opacity:Ys,originX:su,originY:su,originZ:iu}),{},{zIndex:fl,fillOpacity:Ys,strokeOpacity:Ys,numOctaves:fl})),vl=_objectSpread2(_objectSpread2({},pl),{},{color:lu,backgroundColor:lu,outlineColor:lu,fill:lu,stroke:lu,borderColor:lu,borderTopColor:lu,borderRightColor:lu,borderBottomColor:lu,borderLeftColor:lu,filter:dl,WebkitFilter:dl}),gl=I("v",function(e){return vl[e]});function getAnimatableNone(e,l){var _=gl(e);return _!==dl&&(_=pu),_.getAnimatableNone?_.getAnimatableNone(l):void 0}var ml=new Set(["auto","none","0"]);var yl=function(e){function DOMKeyframesResolver(e,l,_,S,k){return _classCallCheck3(this,DOMKeyframesResolver),_callSuper(this,DOMKeyframesResolver,[e,l,_,S,k,!0])}return _inherits(DOMKeyframesResolver,e),_createClass3(DOMKeyframesResolver,[{key:"readKeyframes",value:function(){var e=this.unresolvedKeyframes,l=this.element,_=this.name;if(l&&l.current){_superPropGet(DOMKeyframesResolver,"readKeyframes",this,3)([]);for(var S=0;S<e.length;S++){var k=e[S];if("string"==typeof k&&(k=k.trim(),isCSSVariableToken(k))){var E=getVariableValue(k,l.current);void 0!==E&&(e[S]=E),S===e.length-1&&(this.finalKeyframe=k)}}if(this.resolveNoneKeyframes(),ul.has(_)&&2===e.length){var T=_slicedToArray(e,2),M=T[0],R=T[1],I=findDimensionValueType(M),D=findDimensionValueType(R);if(I!==D)if(ju(I)&&ju(D))for(var O=0;O<e.length;O++){var L=e[O];"string"==typeof L&&(e[O]=parseFloat(L))}else Wu[_]&&(this.needsMeasurement=!0)}}}},{key:"resolveNoneKeyframes",value:function(){for(var e=this.unresolvedKeyframes,l=this.name,_=[],S=0;S<e.length;S++)(null===e[S]||isNone(e[S]))&&_.push(S);_.length&&function(e,l,_){for(var S=0,k=void 0;S<e.length&&!k;){var E=e[S];"string"==typeof E&&!ml.has(E)&&analyseComplexValue(E).values.length&&(k=e[S]),S++}if(k&&_){var T,M=_createForOfIteratorHelper2(l);try{for(M.s();!(T=M.n()).done;)e[T.value]=getAnimatableNone(_,k)}catch(R){M.e(R)}finally{M.f()}}}(e,_,l)}},{key:"measureInitialState",value:function(){var e=this.element,l=this.unresolvedKeyframes,_=this.name;if(e&&e.current){"height"===_&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Wu[_](e.measureViewportBox(),window.getComputedStyle(e.current)),l[0]=this.measuredOrigin;var S=l[l.length-1];void 0!==S&&e.getValue(_,S).jump(S,!1)}}},{key:"measureEndState",value:function(){var e,l=this.element,_=this.name,S=this.unresolvedKeyframes;if(l&&l.current){var k=l.getValue(_);k&&k.jump(this.measuredOrigin,!1);var E=S.length-1,T=S[E];S[E]=Wu[_](l.measureViewportBox(),window.getComputedStyle(l.current)),null!==T&&void 0===this.finalKeyframe&&(this.finalKeyframe=T),null!==(e=this.removedTransforms)&&void 0!==e&&e.length&&this.removedTransforms.forEach(function(e){var _=_slicedToArray(e,2),S=_[0],k=_[1];l.getValue(S).set(k)}),this.resolveNoneKeyframes()}}}])}(Qu);function resolveElements(e,l,_){if(e instanceof EventTarget)return[e];if("string"==typeof e){var S=document.querySelectorAll(e);return S?Array.from(S):[]}return Array.from(e)}I("D",yl);I("g",function(e,l){return l&&"number"==typeof e?l.transform(e):e});function isHTMLElement(e){return isObject$1(e)&&"offsetHeight"in e}var _l=I("a2",{current:void 0}),bl=function(){return _createClass3(function MotionValue(e){var l=this,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck3(this,MotionValue),this.canTrackVelocity=null,this.events={},this.updateAndNotify=function(e){var _,S=Ws.now();if((l.updatedAt!==S&&l.setPrevFrameValue(),l.prev=l.current,l.setCurrent(e),l.current!==l.prev)&&(null===(_=l.events.change)||void 0===_||_.notify(l.current),l.dependents)){var k,E=_createForOfIteratorHelper2(l.dependents);try{for(E.s();!(k=E.n()).done;){k.value.dirty()}}catch(T){E.e(T)}finally{E.f()}}},this.hasAnimated=!1,this.setCurrent(e),this.owner=_.owner},[{key:"setCurrent",value:function(e){var l;this.current=e,this.updatedAt=Ws.now(),null===this.canTrackVelocity&&void 0!==e&&(this.canTrackVelocity=(l=this.current,!isNaN(parseFloat(l))))}},{key:"setPrevFrameValue",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.current;this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}},{key:"onChange",value:function(e){return this.on("change",e)}},{key:"on",value:function(e,l){var _=this;this.events[e]||(this.events[e]=new Es);var S=this.events[e].add(l);return"change"===e?function(){S(),Gs.read(function(){_.events.change.getSize()||_.stop()})}:S}},{key:"clearListeners",value:function(){for(var e in this.events)this.events[e].clear()}},{key:"attach",value:function(e,l){this.passiveEffect=e,this.stopPassiveEffect=l}},{key:"set",value:function(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}},{key:"setWithVelocity",value:function(e,l,_){this.set(l),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-_}},{key:"jump",value:function(e){var l=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,l&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}},{key:"dirty",value:function(){var e;null===(e=this.events.change)||void 0===e||e.notify(this.current)}},{key:"addDependent",value:function(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}},{key:"removeDependent",value:function(e){this.dependents&&this.dependents.delete(e)}},{key:"get",value:function(){return _l.current&&_l.current.push(this),this.current}},{key:"getPrevious",value:function(){return this.prev}},{key:"getVelocity",value:function(){var e=Ws.now();if(!this.canTrackVelocity||void 0===this.prevFrameValue||e-this.updatedAt>30)return 0;var l=Math.min(this.updatedAt-this.prevUpdatedAt,30);return velocityPerSecond(parseFloat(this.current)-parseFloat(this.prevFrameValue),l)}},{key:"start",value:function(e){var l=this;return this.stop(),new Promise(function(_){l.hasAnimated=!0,l.animation=e(_),l.events.animationStart&&l.events.animationStart.notify()}).then(function(){l.events.animationComplete&&l.events.animationComplete.notify(),l.clearAnimation()})}},{key:"stop",value:function(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}},{key:"isAnimating",value:function(){return!!this.animation}},{key:"clearAnimation",value:function(){delete this.animation}},{key:"destroy",value:function(){var e,l;null===(e=this.dependents)||void 0===e||e.clear(),null===(l=this.events.destroy)||void 0===l||l.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}])}();var Sl=createRenderBatcher(queueMicrotask,!1).schedule;I("r",Sl);var wl={x:!1,y:!1};function isDragActive(){return wl.x||wl.y}function setupGesture(e,l){var _=resolveElements(e),S=new AbortController;return[_,_objectSpread2(_objectSpread2({passive:!0},l),{},{signal:S.signal}),function(){return S.abort()}]}function isValidHover(e){return!("touch"===e.pointerType||isDragActive())}var _isNodeOrChild=function(e,l){return!!l&&(e===l||_isNodeOrChild(e,l.parentElement))},xl=I("B",function(e){return"mouse"===e.pointerType?"number"!=typeof e.button||e.button<=0:!1!==e.isPrimary}),kl=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);var Al=new WeakSet;function filterEvents(e){return function(l){"Enter"===l.key&&e(l)}}function firePointerEvent(e,l){e.dispatchEvent(new PointerEvent("pointer"+l,{isPrimary:!0,bubbles:!0}))}var enableKeyboardPress=function(e,l){var _=e.currentTarget;if(_){var S=filterEvents(function(){if(!Al.has(_)){firePointerEvent(_,"down");var e=filterEvents(function(){firePointerEvent(_,"up")});_.addEventListener("keyup",e,l),_.addEventListener("blur",function(){return firePointerEvent(_,"cancel")},l)}});_.addEventListener("keydown",S,l),_.addEventListener("blur",function(){return _.removeEventListener("keydown",S)},l)}};function isValidPressEvent(e){return xl(e)&&!isDragActive()}function isSVGElement(e){return isObject$1(e)&&"ownerSVGElement"in e}var El,Cl=new WeakMap,getSize=function(e,l,_){return function(S,k){return k&&k[0]?k[0][e+"Size"]:isSVGElement(S)&&"getBBox"in S?S.getBBox()[l]:S[_]}},Tl=getSize("inline","width","offsetWidth"),Ml=getSize("block","height","offsetHeight");function notifyTarget(e){var l,_=e.target,S=e.borderBoxSize;null===(l=Cl.get(_))||void 0===l||l.forEach(function(e){e(_,{get width(){return Tl(_,S)},get height(){return Ml(_,S)}})})}function notifyAll(e){e.forEach(notifyTarget)}var Rl,Il=new Set;var Pl=I("c",function(e){return Boolean(e&&e.getVelocity)});function parseValue(e,l){return l?e+l:e}function asNumber(e){return"number"==typeof e?e:parseFloat(e)}var Dl=[].concat(ll,[lu,pu]),Ol=(I("l",function(e){return Dl.find(testValueType(e))}),1e-6),Ll="undefined"!=typeof Float32Array?Float32Array:Array;I("aC",function(e,l,_,S,k){var E=1/Math.tan(l/2);if(e[0]=E/_,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=E,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=k&&k!==1/0){var T=1/(S-k);e[10]=(k+S)*T,e[14]=2*k*S*T}else e[10]=-1,e[14]=-2*S;return e});function create$3(){var e=new Ll(3);return Ll!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function fromValues$1(e,l,_){var S=new Ll(3);return S[0]=e,S[1]=l,S[2]=_,S}function normalize$6(e,l){var _=l[0],S=l[1],k=l[2],E=_*_+S*S+k*k;return E>0&&(E=1/Math.sqrt(E)),e[0]=l[0]*E,e[1]=l[1]*E,e[2]=l[2]*E,e}function dot$3(e,l){return e[0]*l[0]+e[1]*l[1]+e[2]*l[2]}function cross$1(e,l,_){var S=l[0],k=l[1],E=l[2],T=_[0],M=_[1],R=_[2];return e[0]=k*R-E*M,e[1]=E*T-S*R,e[2]=S*M-k*T,e}function create$1(){var e=new Ll(4);return Ll!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function setAxisAngle$1(e,l,_){_*=.5;var S=Math.sin(_);return e[0]=S*l[0],e[1]=S*l[1],e[2]=S*l[2],e[3]=Math.cos(_),e}function slerp$1(e,l,_,S){var k,E,T,M,R,I=l[0],D=l[1],O=l[2],L=l[3],U=_[0],B=_[1],z=_[2],G=_[3];return(E=I*U+D*B+O*z+L*G)<0&&(E=-E,U=-U,B=-B,z=-z,G=-G),1-E>Ol?(k=Math.acos(E),T=Math.sin(k),M=Math.sin((1-S)*k)/T,R=Math.sin(S*k)/T):(M=1-S,R=S),e[0]=M*I+R*U,e[1]=M*D+R*B,e[2]=M*O+R*z,e[3]=M*L+R*G,e}create$3(),function(){var e,l=(e=new Ll(4),Ll!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e)}();var Ul;I("aP",function(e,l){var _=l[0],S=l[1],k=l[2],E=l[3],T=_*_+S*S+k*k+E*E;return T>0&&(T=1/Math.sqrt(T)),e[0]=_*T,e[1]=S*T,e[2]=k*T,e[3]=E*T,e});function create(){var e=new Ll(2);return Ll!=Float32Array&&(e[0]=0,e[1]=0),e}create$3(),fromValues$1(1,0,0),fromValues$1(0,1,0),create$1(),create$1(),Ul=new Ll(9),Ll!=Float32Array&&(Ul[1]=0,Ul[2]=0,Ul[3]=0,Ul[5]=0,Ul[6]=0,Ul[7]=0),Ul[0]=1,Ul[4]=1,Ul[8]=1;I("aI",function(e,l,_){return e[0]=l[0]-_[0],e[1]=l[1]-_[1],e}),I("aK",function(e){var l=e[0],_=e[1];return l*l+_*_});function bind(e,l){return function(){return e.apply(l,arguments)}}!function(){var e=create()}();var Fl,Nl=Object.prototype.toString,Bl=Object.getPrototypeOf,zl=Symbol.iterator,Gl=Symbol.toStringTag,jl=(Fl=Object.create(null),function(e){var l=Nl.call(e);return Fl[l]||(Fl[l]=l.slice(8,-1).toLowerCase())}),kindOfTest=function(e){return e=e.toLowerCase(),function(l){return jl(l)===e}},typeOfTest=function(e){return function(l){return _typeof3(l)===e}},Hl=Array.isArray,Vl=typeOfTest("undefined");function isBuffer(e){return null!==e&&!Vl(e)&&null!==e.constructor&&!Vl(e.constructor)&&Xl(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}var Wl=kindOfTest("ArrayBuffer");var ql=typeOfTest("string"),Xl=typeOfTest("function"),Kl=typeOfTest("number"),isObject=function(e){return null!==e&&"object"===_typeof3(e)},isPlainObject=function(e){if("object"!==jl(e))return!1;var l=Bl(e);return!(null!==l&&l!==Object.prototype&&null!==Object.getPrototypeOf(l)||Gl in e||zl in e)},Yl=kindOfTest("Date"),Ql=kindOfTest("File"),Jl=kindOfTest("Blob"),Zl=kindOfTest("FileList"),$l=kindOfTest("URLSearchParams"),ec=_slicedToArray(["ReadableStream","Request","Response","Headers"].map(kindOfTest),4),tc=ec[0],rc=ec[1],nc=ec[2],ic=ec[3];function forEach(e,l){var _,S,k=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).allOwnKeys,E=void 0!==k&&k;if(null!=e)if("object"!==_typeof3(e)&&(e=[e]),Hl(e))for(_=0,S=e.length;_<S;_++)l.call(null,e[_],_,e);else{if(isBuffer(e))return;var T,M=E?Object.getOwnPropertyNames(e):Object.keys(e),R=M.length;for(_=0;_<R;_++)T=M[_],l.call(null,e[T],T,e)}}function findKey(e,l){if(isBuffer(e))return null;l=l.toLowerCase();for(var _,S=Object.keys(e),k=S.length;k-- >0;)if(l===(_=S[k]).toLowerCase())return _;return null}var ac="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,isContextDefined=function(e){return!Vl(e)&&e!==ac};var oc,sc=(oc="undefined"!=typeof Uint8Array&&Bl(Uint8Array),function(e){return oc&&e instanceof oc}),uc=kindOfTest("HTMLFormElement"),lc=function(){var e=Object.prototype.hasOwnProperty;return function(l,_){return e.call(l,_)}}(),cc=kindOfTest("RegExp"),reduceDescriptors=function(e,l){var _=Object.getOwnPropertyDescriptors(e),S={};forEach(_,function(_,k){var E;!1!==(E=l(_,k,e))&&(S[k]=E||_)}),Object.defineProperties(e,S)};var hc,dc,fc,pc,vc=kindOfTest("AsyncFunction"),gc=(hc="function"==typeof setImmediate,dc=Xl(ac.postMessage),hc?setImmediate:dc?(fc="axios@".concat(Math.random()),pc=[],ac.addEventListener("message",function(e){var l=e.source,_=e.data;l===ac&&_===fc&&pc.length&&pc.shift()()},!1),function(e){pc.push(e),ac.postMessage(fc,"*")}):function(e){return setTimeout(e)}),mc="undefined"!=typeof queueMicrotask?queueMicrotask.bind(ac):"undefined"!=typeof process&&process.nextTick||gc,yc={isArray:Hl,isArrayBuffer:Wl,isBuffer:isBuffer,isFormData:function(e){var l;return e&&("function"==typeof FormData&&e instanceof FormData||Xl(e.append)&&("formdata"===(l=jl(e))||"object"===l&&Xl(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&Wl(e.buffer)},isString:ql,isNumber:Kl,isBoolean:function(e){return!0===e||!1===e},isObject:isObject,isPlainObject:isPlainObject,isEmptyObject:function(e){if(!isObject(e)||isBuffer(e))return!1;try{return 0===Object.keys(e).length&&Object.getPrototypeOf(e)===Object.prototype}catch(ta){return!1}},isReadableStream:tc,isRequest:rc,isResponse:nc,isHeaders:ic,isUndefined:Vl,isDate:Yl,isFile:Ql,isBlob:Jl,isRegExp:cc,isFunction:Xl,isStream:function(e){return isObject(e)&&Xl(e.pipe)},isURLSearchParams:$l,isTypedArray:sc,isFileList:Zl,forEach:forEach,merge:function merge(){for(var e=isContextDefined(this)&&this||{},l=e.caseless,_=e.skipUndefined,S={},assignValue=function(e,k){var E=l&&findKey(S,k)||k;isPlainObject(S[E])&&isPlainObject(e)?S[E]=merge(S[E],e):isPlainObject(e)?S[E]=merge({},e):Hl(e)?S[E]=e.slice():_&&Vl(e)||(S[E]=e)},k=0,E=arguments.length;k<E;k++)arguments[k]&&forEach(arguments[k],assignValue);return S},extend:function(e,l,_){return forEach(l,function(l,S){_&&Xl(l)?e[S]=bind(l,_):e[S]=l},{allOwnKeys:(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).allOwnKeys}),e},trim:function(e){return e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e},inherits:function(e,l,_,S){e.prototype=Object.create(l.prototype,S),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:l.prototype}),_&&Object.assign(e.prototype,_)},toFlatObject:function(e,l,_,S){var k,E,T,M={};if(l=l||{},null==e)return l;do{for(E=(k=Object.getOwnPropertyNames(e)).length;E-- >0;)T=k[E],S&&!S(T,e,l)||M[T]||(l[T]=e[T],M[T]=!0);e=!1!==_&&Bl(e)}while(e&&(!_||_(e,l))&&e!==Object.prototype);return l},kindOf:jl,kindOfTest:kindOfTest,endsWith:function(e,l,_){e=String(e),(void 0===_||_>e.length)&&(_=e.length),_-=l.length;var S=e.indexOf(l,_);return-1!==S&&S===_},toArray:function(e){if(!e)return null;if(Hl(e))return e;var l=e.length;if(!Kl(l))return null;for(var _=new Array(l);l-- >0;)_[l]=e[l];return _},forEachEntry:function(e,l){for(var _,S=(e&&e[zl]).call(e);(_=S.next())&&!_.done;){var k=_.value;l.call(e,k[0],k[1])}},matchAll:function(e,l){for(var _,S=[];null!==(_=e.exec(l));)S.push(_);return S},isHTMLForm:uc,hasOwnProperty:lc,hasOwnProp:lc,reduceDescriptors:reduceDescriptors,freezeMethods:function(e){reduceDescriptors(e,function(l,_){if(Xl(e)&&-1!==["arguments","caller","callee"].indexOf(_))return!1;var S=e[_];Xl(S)&&(l.enumerable=!1,"writable"in l?l.writable=!1:l.set||(l.set=function(){throw Error("Can not rewrite read-only method '"+_+"'")}))})},toObjectSet:function(e,l){var _={},define=function(e){e.forEach(function(e){_[e]=!0})};return Hl(e)?define(e):define(String(e).split(l)),_},toCamelCase:function(e){return e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,l,_){return l.toUpperCase()+_})},noop:function(){},toFiniteNumber:function(e,l){return null!=e&&Number.isFinite(e=+e)?e:l},findKey:findKey,global:ac,isContextDefined:isContextDefined,isSpecCompliantForm:function(e){return!!(e&&Xl(e.append)&&"FormData"===e[Gl]&&e[zl])},toJSONObject:function(e){var l=new Array(10),_visit=function(e,_){if(isObject(e)){if(l.indexOf(e)>=0)return;if(isBuffer(e))return e;if(!("toJSON"in e)){l[_]=e;var S=Hl(e)?[]:{};return forEach(e,function(e,l){var k=_visit(e,_+1);!Vl(k)&&(S[l]=k)}),l[_]=void 0,S}}return e};return _visit(e,0)},isAsyncFn:vc,isThenable:function(e){return e&&(isObject(e)||Xl(e))&&Xl(e.then)&&Xl(e.catch)},setImmediate:gc,asap:mc,isIterable:function(e){return null!=e&&Xl(e[zl])}};function AxiosError$1(e,l,_,S,k){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",l&&(this.code=l),_&&(this.config=_),S&&(this.request=S),k&&(this.response=k,this.status=k.status?k.status:null)}yc.inherits(AxiosError$1,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:yc.toJSONObject(this.config),code:this.code,status:this.status}}});var _c=AxiosError$1.prototype,bc={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(function(e){bc[e]={value:e}}),Object.defineProperties(AxiosError$1,bc),Object.defineProperty(_c,"isAxiosError",{value:!0}),AxiosError$1.from=function(e,l,_,S,k,E){var T=Object.create(_c);yc.toFlatObject(e,T,function(e){return e!==Error.prototype},function(e){return"isAxiosError"!==e});var M=e&&e.message?e.message:"Error",R=null==l&&e?e.code:l;return AxiosError$1.call(T,M,R,_,S,k),e&&null==T.cause&&Object.defineProperty(T,"cause",{value:e,configurable:!0}),T.name=e&&e.name||"Error",E&&Object.assign(T,E),T};function isVisitable(e){return yc.isPlainObject(e)||yc.isArray(e)}function removeBrackets(e){return yc.endsWith(e,"[]")?e.slice(0,-2):e}function renderKey(e,l,_){return e?e.concat(l).map(function(e,l){return e=removeBrackets(e),!_&&l?"["+e+"]":e}).join(_?".":""):l}var Sc=yc.toFlatObject(yc,{},null,function(e){return/^is[A-Z]/.test(e)});function toFormData$1(e,l,_){if(!yc.isObject(e))throw new TypeError("target must be an object");l=l||new FormData;var S=(_=yc.toFlatObject(_,{metaTokens:!0,dots:!1,indexes:!1},!1,function(e,l){return!yc.isUndefined(l[e])})).metaTokens,k=_.visitor||defaultVisitor,E=_.dots,T=_.indexes,M=(_.Blob||"undefined"!=typeof Blob&&Blob)&&yc.isSpecCompliantForm(l);if(!yc.isFunction(k))throw new TypeError("visitor must be a function");function convertValue(e){if(null===e)return"";if(yc.isDate(e))return e.toISOString();if(yc.isBoolean(e))return e.toString();if(!M&&yc.isBlob(e))throw new AxiosError$1("Blob is not supported. Use a Buffer instead.");return yc.isArrayBuffer(e)||yc.isTypedArray(e)?M&&"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}function defaultVisitor(e,_,k){var M=e;if(e&&!k&&"object"===_typeof3(e))if(yc.endsWith(_,"{}"))_=S?_:_.slice(0,-2),e=JSON.stringify(e);else if(yc.isArray(e)&&function(e){return yc.isArray(e)&&!e.some(isVisitable)}(e)||(yc.isFileList(e)||yc.endsWith(_,"[]"))&&(M=yc.toArray(e)))return _=removeBrackets(_),M.forEach(function(e,S){!yc.isUndefined(e)&&null!==e&&l.append(!0===T?renderKey([_],S,E):null===T?_:_+"[]",convertValue(e))}),!1;return!!isVisitable(e)||(l.append(renderKey(k,_,E),convertValue(e)),!1)}var R=[],I=Object.assign(Sc,{defaultVisitor:defaultVisitor,convertValue:convertValue,isVisitable:isVisitable});if(!yc.isObject(e))throw new TypeError("data must be an object");return function build(e,_){if(!yc.isUndefined(e)){if(-1!==R.indexOf(e))throw Error("Circular reference detected in "+_.join("."));R.push(e),yc.forEach(e,function(e,S){!0===(!(yc.isUndefined(e)||null===e)&&k.call(l,e,yc.isString(S)?S.trim():S,_,I))&&build(e,_?_.concat(S):[S])}),R.pop()}}(e),l}function encode$1(e){var l={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(e){return l[e]})}function AxiosURLSearchParams(e,l){this._pairs=[],e&&toFormData$1(e,this,l)}var wc=AxiosURLSearchParams.prototype;function encode(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function buildURL(e,l,_){if(!l)return e;var S=_&&_.encode||encode;yc.isFunction(_)&&(_={serialize:_});var k,E=_&&_.serialize;if(k=E?E(l,_):yc.isURLSearchParams(l)?l.toString():new AxiosURLSearchParams(l,_).toString(S)){var T=e.indexOf("#");-1!==T&&(e=e.slice(0,T)),e+=(-1===e.indexOf("?")?"?":"&")+k}return e}wc.append=function(e,l){this._pairs.push([e,l])},wc.toString=function(e){var l=e?function(l){return e.call(this,l,encode$1)}:encode$1;return this._pairs.map(function(e){return l(e[0])+"="+l(e[1])},"").join("&")};var xc=function(){return _createClass3(function InterceptorManager(){_classCallCheck3(this,InterceptorManager),this.handlers=[]},[{key:"use",value:function(e,l,_){return this.handlers.push({fulfilled:e,rejected:l,synchronous:!!_&&_.synchronous,runWhen:_?_.runWhen:null}),this.handlers.length-1}},{key:"eject",value:function(e){this.handlers[e]&&(this.handlers[e]=null)}},{key:"clear",value:function(){this.handlers&&(this.handlers=[])}},{key:"forEach",value:function(e){yc.forEach(this.handlers,function(l){null!==l&&e(l)})}}])}(),kc={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Ac={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:AxiosURLSearchParams,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},Ec="undefined"!=typeof window&&"undefined"!=typeof document,Cc="object"===("undefined"==typeof navigator?"undefined":_typeof3(navigator))&&navigator||void 0,Tc=Ec&&(!Cc||["ReactNative","NativeScript","NS"].indexOf(Cc.product)<0),Mc="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,Rc=Ec&&window.location.href||"http://localhost",Ic=_objectSpread2(_objectSpread2({},Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Ec,hasStandardBrowserEnv:Tc,hasStandardBrowserWebWorkerEnv:Mc,navigator:Cc,origin:Rc},Symbol.toStringTag,{value:"Module"}))),Ac);function formDataToJSON(e){function buildPath(e,l,_,S){var k=e[S++];if("__proto__"===k)return!0;var E=Number.isFinite(+k),T=S>=e.length;return k=!k&&yc.isArray(_)?_.length:k,T?(yc.hasOwnProp(_,k)?_[k]=[_[k],l]:_[k]=l,!E):(_[k]&&yc.isObject(_[k])||(_[k]=[]),buildPath(e,l,_[k],S)&&yc.isArray(_[k])&&(_[k]=function(e){var l,_,S={},k=Object.keys(e),E=k.length;for(l=0;l<E;l++)S[_=k[l]]=e[_];return S}(_[k])),!E)}if(yc.isFormData(e)&&yc.isFunction(e.entries)){var l={};return yc.forEachEntry(e,function(e,_){buildPath(function(e){return yc.matchAll(/\w+|\[(\w*)]/g,e).map(function(e){return"[]"===e[0]?"":e[1]||e[0]})}(e),_,l,0)}),l}return null}var Pc={transitional:kc,adapter:["xhr","http","fetch"],transformRequest:[function(e,l){var _,S=l.getContentType()||"",k=S.indexOf("application/json")>-1,E=yc.isObject(e);if(E&&yc.isHTMLForm(e)&&(e=new FormData(e)),yc.isFormData(e))return k?JSON.stringify(formDataToJSON(e)):e;if(yc.isArrayBuffer(e)||yc.isBuffer(e)||yc.isStream(e)||yc.isFile(e)||yc.isBlob(e)||yc.isReadableStream(e))return e;if(yc.isArrayBufferView(e))return e.buffer;if(yc.isURLSearchParams(e))return l.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();if(E){if(S.indexOf("application/x-www-form-urlencoded")>-1)return function(e,l){return toFormData$1(e,new Ic.classes.URLSearchParams,_objectSpread2({visitor:function(e,l,_,S){return Ic.isNode&&yc.isBuffer(e)?(this.append(l,e.toString("base64")),!1):S.defaultVisitor.apply(this,arguments)}},l))}(e,this.formSerializer).toString();if((_=yc.isFileList(e))||S.indexOf("multipart/form-data")>-1){var T=this.env&&this.env.FormData;return toFormData$1(_?{"files[]":e}:e,T&&new T,this.formSerializer)}}return E||k?(l.setContentType("application/json",!1),function(e,l,_){if(yc.isString(e))try{return(l||JSON.parse)(e),yc.trim(e)}catch(ta){if("SyntaxError"!==ta.name)throw ta}return(_||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var l=this.transitional||Pc.transitional,_=l&&l.forcedJSONParsing,S="json"===this.responseType;if(yc.isResponse(e)||yc.isReadableStream(e))return e;if(e&&yc.isString(e)&&(_&&!this.responseType||S)){var k=!(l&&l.silentJSONParsing)&&S;try{return JSON.parse(e,this.parseReviver)}catch(ta){if(k){if("SyntaxError"===ta.name)throw AxiosError$1.from(ta,AxiosError$1.ERR_BAD_RESPONSE,this,null,this.response);throw ta}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ic.classes.FormData,Blob:Ic.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};yc.forEach(["delete","get","head","post","put","patch"],function(e){Pc.headers[e]={}});var Dc=yc.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Oc=Symbol("internals");function normalizeHeader(e){return e&&String(e).trim().toLowerCase()}function normalizeValue(e){return!1===e||null==e?e:yc.isArray(e)?e.map(normalizeValue):String(e)}function matchHeaderValue(e,l,_,S,k){return yc.isFunction(S)?S.call(this,l,_):(k&&(l=_),yc.isString(l)?yc.isString(S)?-1!==l.indexOf(S):yc.isRegExp(S)?S.test(l):void 0:void 0)}var Lc=function(){return _createClass3(function AxiosHeaders(e){_classCallCheck3(this,AxiosHeaders),e&&this.set(e)},[{key:"set",value:function(e,l,_){var S=this;function setHeader(e,l,_){var k=normalizeHeader(l);if(!k)throw new Error("header name must be a non-empty string");var E=yc.findKey(S,k);(!E||void 0===S[E]||!0===_||void 0===_&&!1!==S[E])&&(S[E||l]=normalizeValue(e))}var setHeaders=function(e,l){return yc.forEach(e,function(e,_){return setHeader(e,_,l)})};if(yc.isPlainObject(e)||e instanceof this.constructor)setHeaders(e,l);else if(yc.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))setHeaders(function(e){var l,_,S,k={};return e&&e.split("\n").forEach(function(e){S=e.indexOf(":"),l=e.substring(0,S).trim().toLowerCase(),_=e.substring(S+1).trim(),!l||k[l]&&Dc[l]||("set-cookie"===l?k[l]?k[l].push(_):k[l]=[_]:k[l]=k[l]?k[l]+", "+_:_)}),k}(e),l);else if(yc.isObject(e)&&yc.isIterable(e)){var k,E,T,M={},R=_createForOfIteratorHelper2(e);try{for(R.s();!(T=R.n()).done;){var I=T.value;if(!yc.isArray(I))throw TypeError("Object iterator must return a key-value pair");M[E=I[0]]=(k=M[E])?yc.isArray(k)?[].concat(_toConsumableArray3(k),[I[1]]):[k,I[1]]:I[1]}}catch(D){R.e(D)}finally{R.f()}setHeaders(M,l)}else null!=e&&setHeader(l,e,_);return this}},{key:"get",value:function(e,l){if(e=normalizeHeader(e)){var _=yc.findKey(this,e);if(_){var S=this[_];if(!l)return S;if(!0===l)return function(e){for(var l,_=Object.create(null),S=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;l=S.exec(e);)_[l[1]]=l[2];return _}(S);if(yc.isFunction(l))return l.call(this,S,_);if(yc.isRegExp(l))return l.exec(S);throw new TypeError("parser must be boolean|regexp|function")}}}},{key:"has",value:function(e,l){if(e=normalizeHeader(e)){var _=yc.findKey(this,e);return!(!_||void 0===this[_]||l&&!matchHeaderValue(0,this[_],_,l))}return!1}},{key:"delete",value:function(e,l){var _=this,S=!1;function deleteHeader(e){if(e=normalizeHeader(e)){var k=yc.findKey(_,e);!k||l&&!matchHeaderValue(0,_[k],k,l)||(delete _[k],S=!0)}}return yc.isArray(e)?e.forEach(deleteHeader):deleteHeader(e),S}},{key:"clear",value:function(e){for(var l=Object.keys(this),_=l.length,S=!1;_--;){var k=l[_];e&&!matchHeaderValue(0,this[k],k,e,!0)||(delete this[k],S=!0)}return S}},{key:"normalize",value:function(e){var l=this,_={};return yc.forEach(this,function(S,k){var E=yc.findKey(_,k);if(E)return l[E]=normalizeValue(S),void delete l[k];var T=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,function(e,l,_){return l.toUpperCase()+_})}(k):String(k).trim();T!==k&&delete l[k],l[T]=normalizeValue(S),_[T]=!0}),this}},{key:"concat",value:function(){for(var e,l=arguments.length,_=new Array(l),S=0;S<l;S++)_[S]=arguments[S];return(e=this.constructor).concat.apply(e,[this].concat(_))}},{key:"toJSON",value:function(e){var l=Object.create(null);return yc.forEach(this,function(_,S){null!=_&&!1!==_&&(l[S]=e&&yc.isArray(_)?_.join(", "):_)}),l}},{key:Symbol.iterator,value:function(){return Object.entries(this.toJSON())[Symbol.iterator]()}},{key:"toString",value:function(){return Object.entries(this.toJSON()).map(function(e){var l=_slicedToArray(e,2);return l[0]+": "+l[1]}).join("\n")}},{key:"getSetCookie",value:function(){return this.get("set-cookie")||[]}},{key:Symbol.toStringTag,get:function(){return"AxiosHeaders"}}],[{key:"from",value:function(e){return e instanceof this?e:new this(e)}},{key:"concat",value:function(e){for(var l=new this(e),_=arguments.length,S=new Array(_>1?_-1:0),k=1;k<_;k++)S[k-1]=arguments[k];return S.forEach(function(e){return l.set(e)}),l}},{key:"accessor",value:function(e){var l=(this[Oc]=this[Oc]={accessors:{}}).accessors,_=this.prototype;function defineAccessor(e){var S=normalizeHeader(e);l[S]||(!function(e,l){var _=yc.toCamelCase(" "+l);["get","set","has"].forEach(function(S){Object.defineProperty(e,S+_,{value:function(e,_,k){return this[S].call(this,l,e,_,k)},configurable:!0})})}(_,e),l[S]=!0)}return yc.isArray(e)?e.forEach(defineAccessor):defineAccessor(e),this}}])}();function transformData(e,l){var _=this||Pc,S=l||_,k=Lc.from(S.headers),E=S.data;return yc.forEach(e,function(e){E=e.call(_,E,k.normalize(),l?l.status:void 0)}),k.normalize(),E}function isCancel$1(e){return!(!e||!e.__CANCEL__)}function CanceledError$1(e,l,_){AxiosError$1.call(this,null==e?"canceled":e,AxiosError$1.ERR_CANCELED,l,_),this.name="CanceledError"}function settle(e,l,_){var S=_.config.validateStatus;_.status&&S&&!S(_.status)?l(new AxiosError$1("Request failed with status code "+_.status,[AxiosError$1.ERR_BAD_REQUEST,AxiosError$1.ERR_BAD_RESPONSE][Math.floor(_.status/100)-4],_.config,_.request,_)):e(_)}Lc.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),yc.reduceDescriptors(Lc.prototype,function(e,l){var _=e.value,S=l[0].toUpperCase()+l.slice(1);return{get:function(){return _},set:function(e){this[S]=e}}}),yc.freezeMethods(Lc),yc.inherits(CanceledError$1,AxiosError$1,{__CANCEL__:!0});var progressEventReducer=function(e,l){var _=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,S=0,k=function(e,l){e=e||10;var _,S=new Array(e),k=new Array(e),E=0,T=0;return l=void 0!==l?l:1e3,function(M){var R=Date.now(),I=k[T];_||(_=R),S[E]=M,k[E]=R;for(var D=T,O=0;D!==E;)O+=S[D++],D%=e;if((E=(E+1)%e)===T&&(T=(T+1)%e),!(R-_<l)){var L=I&&R-I;return L?Math.round(1e3*O/L):void 0}}}(50,250);return function(e,l){var _,S,k=0,E=1e3/l,invoke=function(l){var E=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();k=E,_=null,S&&(clearTimeout(S),S=null),e.apply(void 0,_toConsumableArray3(l))};return[function(){for(var e=Date.now(),l=e-k,T=arguments.length,M=new Array(T),R=0;R<T;R++)M[R]=arguments[R];l>=E?invoke(M,e):(_=M,S||(S=setTimeout(function(){S=null,invoke(_)},E-l)))},function(){return _&&invoke(_)}]}(function(_){var E=_.loaded,T=_.lengthComputable?_.total:void 0,M=E-S,R=k(M);S=E;var I=_defineProperty3({loaded:E,total:T,progress:T?E/T:void 0,bytes:M,rate:R||void 0,estimated:R&&T&&E<=T?(T-E)/R:void 0,event:_,lengthComputable:null!=T},l?"download":"upload",!0);e(I)},_)},progressEventDecorator=function(e,l){var _=null!=e;return[function(S){return l[0]({lengthComputable:_,total:e,loaded:S})},l[1]]},asyncDecorator=function(e){return function(){for(var l=arguments.length,_=new Array(l),S=0;S<l;S++)_[S]=arguments[S];return yc.asap(function(){return e.apply(void 0,_)})}},Uc=Ic.hasStandardBrowserEnv?function(e,l){return function(_){return _=new URL(_,Ic.origin),e.protocol===_.protocol&&e.host===_.host&&(l||e.port===_.port)}}(new URL(Ic.origin),Ic.navigator&&/(msie|trident)/i.test(Ic.navigator.userAgent)):function(){return!0},Fc=Ic.hasStandardBrowserEnv?{write:function(e,l,_,S,k,E){var T=[e+"="+encodeURIComponent(l)];yc.isNumber(_)&&T.push("expires="+new Date(_).toGMTString()),yc.isString(S)&&T.push("path="+S),yc.isString(k)&&T.push("domain="+k),!0===E&&T.push("secure"),document.cookie=T.join("; ")},read:function(e){var l=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return l?decodeURIComponent(l[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}};function buildFullPath(e,l,_){var S=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(l);return e&&(S||0==_)?function(e,l){return l?e.replace(/\/?\/$/,"")+"/"+l.replace(/^\/+/,""):e}(e,l):l}var headersToObject=function(e){return e instanceof Lc?_objectSpread2({},e):e};function mergeConfig$1(e,l){l=l||{};var _={};function getMergedValue(e,l,_,S){return yc.isPlainObject(e)&&yc.isPlainObject(l)?yc.merge.call({caseless:S},e,l):yc.isPlainObject(l)?yc.merge({},l):yc.isArray(l)?l.slice():l}function mergeDeepProperties(e,l,_,S){return yc.isUndefined(l)?yc.isUndefined(e)?void 0:getMergedValue(void 0,e,0,S):getMergedValue(e,l,0,S)}function valueFromConfig2(e,l){if(!yc.isUndefined(l))return getMergedValue(void 0,l)}function defaultToConfig2(e,l){return yc.isUndefined(l)?yc.isUndefined(e)?void 0:getMergedValue(void 0,e):getMergedValue(void 0,l)}function mergeDirectKeys(_,S,k){return k in l?getMergedValue(_,S):k in e?getMergedValue(void 0,_):void 0}var S={url:valueFromConfig2,method:valueFromConfig2,data:valueFromConfig2,baseURL:defaultToConfig2,transformRequest:defaultToConfig2,transformResponse:defaultToConfig2,paramsSerializer:defaultToConfig2,timeout:defaultToConfig2,timeoutMessage:defaultToConfig2,withCredentials:defaultToConfig2,withXSRFToken:defaultToConfig2,adapter:defaultToConfig2,responseType:defaultToConfig2,xsrfCookieName:defaultToConfig2,xsrfHeaderName:defaultToConfig2,onUploadProgress:defaultToConfig2,onDownloadProgress:defaultToConfig2,decompress:defaultToConfig2,maxContentLength:defaultToConfig2,maxBodyLength:defaultToConfig2,beforeRedirect:defaultToConfig2,transport:defaultToConfig2,httpAgent:defaultToConfig2,httpsAgent:defaultToConfig2,cancelToken:defaultToConfig2,socketPath:defaultToConfig2,responseEncoding:defaultToConfig2,validateStatus:mergeDirectKeys,headers:function(e,l,_){return mergeDeepProperties(headersToObject(e),headersToObject(l),0,!0)}};return yc.forEach(Object.keys(_objectSpread2(_objectSpread2({},e),l)),function(k){var E=S[k]||mergeDeepProperties,T=E(e[k],l[k],k);yc.isUndefined(T)&&E!==mergeDirectKeys||(_[k]=T)}),_}var Nc,resolveConfig=function(e){var l=mergeConfig$1({},e),_=l.data,S=l.withXSRFToken,k=l.xsrfHeaderName,E=l.xsrfCookieName,T=l.headers,M=l.auth;if(l.headers=T=Lc.from(T),l.url=buildURL(buildFullPath(l.baseURL,l.url,l.allowAbsoluteUrls),e.params,e.paramsSerializer),M&&T.set("Authorization","Basic "+btoa((M.username||"")+":"+(M.password?unescape(encodeURIComponent(M.password)):""))),yc.isFormData(_))if(Ic.hasStandardBrowserEnv||Ic.hasStandardBrowserWebWorkerEnv)T.setContentType(void 0);else if(yc.isFunction(_.getHeaders)){var R=_.getHeaders(),I=["content-type","content-length"];Object.entries(R).forEach(function(e){var l=_slicedToArray(e,2),_=l[0],S=l[1];I.includes(_.toLowerCase())&&T.set(_,S)})}if(Ic.hasStandardBrowserEnv&&(S&&yc.isFunction(S)&&(S=S(l)),S||!1!==S&&Uc(l.url))){var D=k&&E&&Fc.read(E);D&&T.set(k,D)}return l},Bc="undefined"!=typeof XMLHttpRequest&&function(e){return new Promise(function(l,_){var S,k,E,T,M,R=resolveConfig(e),I=R.data,D=Lc.from(R.headers).normalize(),O=R.responseType,L=R.onUploadProgress,U=R.onDownloadProgress;function done(){T&&T(),M&&M(),R.cancelToken&&R.cancelToken.unsubscribe(S),R.signal&&R.signal.removeEventListener("abort",S)}var B=new XMLHttpRequest;function onloadend(){if(B){var S=Lc.from("getAllResponseHeaders"in B&&B.getAllResponseHeaders());settle(function(e){l(e),done()},function(e){_(e),done()},{data:O&&"text"!==O&&"json"!==O?B.response:B.responseText,status:B.status,statusText:B.statusText,headers:S,config:e,request:B}),B=null}}if(B.open(R.method.toUpperCase(),R.url,!0),B.timeout=R.timeout,"onloadend"in B?B.onloadend=onloadend:B.onreadystatechange=function(){B&&4===B.readyState&&(0!==B.status||B.responseURL&&0===B.responseURL.indexOf("file:"))&&setTimeout(onloadend)},B.onabort=function(){B&&(_(new AxiosError$1("Request aborted",AxiosError$1.ECONNABORTED,e,B)),B=null)},B.onerror=function(l){var S=new AxiosError$1(l&&l.message?l.message:"Network Error",AxiosError$1.ERR_NETWORK,e,B);S.event=l||null,_(S),B=null},B.ontimeout=function(){var l=R.timeout?"timeout of "+R.timeout+"ms exceeded":"timeout exceeded",S=R.transitional||kc;R.timeoutErrorMessage&&(l=R.timeoutErrorMessage),_(new AxiosError$1(l,S.clarifyTimeoutError?AxiosError$1.ETIMEDOUT:AxiosError$1.ECONNABORTED,e,B)),B=null},void 0===I&&D.setContentType(null),"setRequestHeader"in B&&yc.forEach(D.toJSON(),function(e,l){B.setRequestHeader(l,e)}),yc.isUndefined(R.withCredentials)||(B.withCredentials=!!R.withCredentials),O&&"json"!==O&&(B.responseType=R.responseType),U){var z=_slicedToArray(progressEventReducer(U,!0),2);E=z[0],M=z[1],B.addEventListener("progress",E)}if(L&&B.upload){var G=_slicedToArray(progressEventReducer(L),2);k=G[0],T=G[1],B.upload.addEventListener("progress",k),B.upload.addEventListener("loadend",T)}(R.cancelToken||R.signal)&&(S=function(l){B&&(_(!l||l.type?new CanceledError$1(null,e,B):l),B.abort(),B=null)},R.cancelToken&&R.cancelToken.subscribe(S),R.signal&&(R.signal.aborted?S():R.signal.addEventListener("abort",S)));var j,H,V=(j=R.url,(H=/^([-+\w]{1,25})(:?\/\/|:)/.exec(j))&&H[1]||"");V&&-1===Ic.protocols.indexOf(V)?_(new AxiosError$1("Unsupported protocol "+V+":",AxiosError$1.ERR_BAD_REQUEST,e)):B.send(I||null)})},composeSignals=function(e,l){var _=(e=e?e.filter(Boolean):[]).length;if(l||_){var S,k=new AbortController,onabort=function(e){if(!S){S=!0,unsubscribe();var l=e instanceof Error?e:this.reason;k.abort(l instanceof AxiosError$1?l:new CanceledError$1(l instanceof Error?l.message:l))}},E=l&&setTimeout(function(){E=null,onabort(new AxiosError$1("timeout ".concat(l," of ms exceeded"),AxiosError$1.ETIMEDOUT))},l),unsubscribe=function(){e&&(E&&clearTimeout(E),E=null,e.forEach(function(e){e.unsubscribe?e.unsubscribe(onabort):e.removeEventListener("abort",onabort)}),e=null)};e.forEach(function(e){return e.addEventListener("abort",onabort)});var T=k.signal;return T.unsubscribe=function(){return yc.asap(unsubscribe)},T}},zc=_regenerator().m(function streamChunk(e,l){var _,S,k;return _regenerator().w(function(E){for(;;)switch(E.n){case 0:if(!((_=e.byteLength)<l)){E.n=2;break}return E.n=1,e;case 1:return E.a(2);case 2:S=0;case 3:if(!(S<_)){E.n=5;break}return k=S+l,E.n=4,e.slice(S,k);case 4:S=k,E.n=3;break;case 5:return E.a(2)}},streamChunk)}),Gc=function(){var e=_wrapAsyncGenerator(_regenerator().m(function _callee210(e,l){var _,S,k,E,T,M,R;return _regenerator().w(function(I){for(;;)switch(I.p=I.n){case 0:_=!1,S=!1,I.p=1,E=_asyncIterator(jc(e));case 2:return I.n=3,_awaitAsyncGenerator(E.next());case 3:if(!(_=!(T=I.v).done)){I.n=5;break}return M=T.value,I.d(_regeneratorValues(_asyncGeneratorDelegate(_asyncIterator(zc(M,l)))),4);case 4:_=!1,I.n=2;break;case 5:I.n=7;break;case 6:I.p=6,R=I.v,S=!0,k=R;case 7:if(I.p=7,I.p=8,!_||null==E.return){I.n=9;break}return I.n=9,_awaitAsyncGenerator(E.return());case 9:if(I.p=9,!S){I.n=10;break}throw k;case 10:return I.f(9);case 11:return I.f(7);case 12:return I.a(2)}},_callee210,null,[[8,,9,11],[1,6,7,12]])}));return function(l,_){return e.apply(this,arguments)}}(),jc=function(){var e=_wrapAsyncGenerator(_regenerator().m(function _callee211(e){var l,_,S,k;return _regenerator().w(function(E){for(;;)switch(E.p=E.n){case 0:if(!e[Symbol.asyncIterator]){E.n=2;break}return E.d(_regeneratorValues(_asyncGeneratorDelegate(_asyncIterator(e))),1);case 1:return E.a(2);case 2:l=e.getReader(),E.p=3;case 4:return E.n=5,_awaitAsyncGenerator(l.read());case 5:if(_=E.v,S=_.done,k=_.value,!S){E.n=6;break}return E.a(3,8);case 6:return E.n=7,k;case 7:E.n=4;break;case 8:return E.p=8,E.n=9,_awaitAsyncGenerator(l.cancel());case 9:return E.f(8);case 10:return E.a(2)}},_callee211,null,[[3,,8,10]])}));return function(l){return e.apply(this,arguments)}}(),trackStream=function(e,l,_,S){var k,E=Gc(e,l),T=0,_onFinish=function(e){k||(k=!0,S&&S(e))};return new ReadableStream({pull:function(e){return _asyncToGenerator(_regenerator().m(function _callee212(){var l,S,k,M,R,I;return _regenerator().w(function(D){for(;;)switch(D.p=D.n){case 0:return D.p=0,D.n=1,E.next();case 1:if(l=D.v,S=l.done,k=l.value,!S){D.n=2;break}return _onFinish(),e.close(),D.a(2);case 2:M=k.byteLength,_&&(R=T+=M,_(R)),e.enqueue(new Uint8Array(k)),D.n=4;break;case 3:throw D.p=3,I=D.v,_onFinish(I),I;case 4:return D.a(2)}},_callee212,null,[[0,3]])}))()},cancel:function(e){return _onFinish(e),E.return()}},{highWaterMark:2})},Hc=yc.isFunction,Vc={Request:(Nc=yc.global).Request,Response:Nc.Response},Wc=yc.global,qc=Wc.ReadableStream,Xc=Wc.TextEncoder,test=function(e){try{for(var l=arguments.length,_=new Array(l>1?l-1:0),S=1;S<l;S++)_[S-1]=arguments[S];return!!e.apply(void 0,_)}catch(ta){return!1}},factory=function(e){var l=e=yc.merge.call({skipUndefined:!0},Vc,e),_=l.fetch,S=l.Request,k=l.Response,E=_?Hc(_):"function"==typeof fetch,T=Hc(S),M=Hc(k);if(!E)return!1;var R,I=E&&Hc(qc),D=E&&("function"==typeof Xc?(R=new Xc,function(e){return R.encode(e)}):function(){var e=_asyncToGenerator(_regenerator().m(function _callee213(e){var l,_;return _regenerator().w(function(k){for(;;)switch(k.n){case 0:return l=Uint8Array,k.n=1,new S(e).arrayBuffer();case 1:return _=k.v,k.a(2,new l(_))}},_callee213)}));return function(l){return e.apply(this,arguments)}}()),O=T&&I&&test(function(){var e=!1,l=new S(Ic.origin,{body:new qc,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!l}),L=M&&I&&test(function(){return yc.isReadableStream(new k("").body)}),U={stream:L&&function(e){return e.body}};E&&["text","arrayBuffer","blob","formData","stream"].forEach(function(e){!U[e]&&(U[e]=function(l,_){var S=l&&l[e];if(S)return S.call(l);throw new AxiosError$1("Response type '".concat(e,"' is not supported"),AxiosError$1.ERR_NOT_SUPPORT,_)})});var B=function(){var e=_asyncToGenerator(_regenerator().m(function _callee214(e){var l;return _regenerator().w(function(_){for(;;)switch(_.n){case 0:if(null!=e){_.n=1;break}return _.a(2,0);case 1:if(!yc.isBlob(e)){_.n=2;break}return _.a(2,e.size);case 2:if(!yc.isSpecCompliantForm(e)){_.n=4;break}return l=new S(Ic.origin,{method:"POST",body:e}),_.n=3,l.arrayBuffer();case 3:case 6:return _.a(2,_.v.byteLength);case 4:if(!yc.isArrayBufferView(e)&&!yc.isArrayBuffer(e)){_.n=5;break}return _.a(2,e.byteLength);case 5:if(yc.isURLSearchParams(e)&&(e+=""),!yc.isString(e)){_.n=7;break}return _.n=6,D(e);case 7:return _.a(2)}},_callee214)}));return function(l){return e.apply(this,arguments)}}(),z=function(){var e=_asyncToGenerator(_regenerator().m(function _callee215(e,l){var _;return _regenerator().w(function(S){for(;;)if(0===S.n)return _=yc.toFiniteNumber(e.getContentLength()),S.a(2,null==_?B(l):_)},_callee215)}));return function(l,_){return e.apply(this,arguments)}}();return function(){var e=_asyncToGenerator(_regenerator().m(function _callee216(e){var l,E,M,R,I,D,B,G,j,H,V,W,q,X,K,Y,Q,J,Z,$,ee,te,re,ne,ie,ae,oe,se,ue,le,ce,he,de,fe,pe,ve,ge,me,ye;return _regenerator().w(function(_e){for(;;)switch(_e.p=_e.n){case 0:if(l=resolveConfig(e),E=l.url,M=l.method,R=l.data,I=l.signal,D=l.cancelToken,B=l.timeout,G=l.onDownloadProgress,j=l.onUploadProgress,H=l.responseType,V=l.headers,W=l.withCredentials,q=void 0===W?"same-origin":W,X=l.fetchOptions,K=_||fetch,H=H?(H+"").toLowerCase():"text",Y=composeSignals([I,D&&D.toAbortSignal()],B),Q=null,J=Y&&Y.unsubscribe&&function(){Y.unsubscribe()},_e.p=1,!(ge=j&&O&&"get"!==M&&"head"!==M)){_e.n=3;break}return _e.n=2,z(V,R);case 2:me=Z=_e.v,ge=0!==me;case 3:if(!ge){_e.n=4;break}$=new S(E,{method:"POST",body:R,duplex:"half"}),yc.isFormData(R)&&(ee=$.headers.get("content-type"))&&V.setContentType(ee),$.body&&(te=progressEventDecorator(Z,progressEventReducer(asyncDecorator(j))),re=_slicedToArray(te,2),ne=re[0],ie=re[1],R=trackStream($.body,65536,ne,ie));case 4:return yc.isString(q)||(q=q?"include":"omit"),ae=T&&"credentials"in S.prototype,oe=_objectSpread2(_objectSpread2({},X),{},{signal:Y,method:M.toUpperCase(),headers:V.normalize().toJSON(),body:R,duplex:"half",credentials:ae?q:void 0}),Q=T&&new S(E,oe),_e.n=5,T?K(Q,X):K(E,oe);case 5:return se=_e.v,ue=L&&("stream"===H||"response"===H),L&&(G||ue&&J)&&(le={},["status","statusText","headers"].forEach(function(e){le[e]=se[e]}),ce=yc.toFiniteNumber(se.headers.get("content-length")),he=G&&progressEventDecorator(ce,progressEventReducer(asyncDecorator(G),!0))||[],de=_slicedToArray(he,2),fe=de[0],pe=de[1],se=new k(trackStream(se.body,65536,fe,function(){pe&&pe(),J&&J()}),le)),H=H||"text",_e.n=6,U[yc.findKey(U,H)||"text"](se,e);case 6:return ve=_e.v,!ue&&J&&J(),_e.n=7,new Promise(function(l,_){settle(l,_,{data:ve,headers:Lc.from(se.headers),status:se.status,statusText:se.statusText,config:e,request:Q})});case 7:return _e.a(2,_e.v);case 8:if(_e.p=8,ye=_e.v,J&&J(),!ye||"TypeError"!==ye.name||!/Load failed|fetch/i.test(ye.message)){_e.n=9;break}throw Object.assign(new AxiosError$1("Network Error",AxiosError$1.ERR_NETWORK,e,Q),{cause:ye.cause||ye});case 9:throw AxiosError$1.from(ye,ye&&ye.code,e,Q);case 10:return _e.a(2)}},_callee216,null,[[1,8]])}));return function(l){return e.apply(this,arguments)}}()},Kc=new Map,getFetch=function(e){for(var l,_,S=e?e.env:{},k=S.fetch,E=[S.Request,S.Response,k],T=E.length,M=Kc;T--;)l=E[T],void 0===(_=M.get(l))&&M.set(l,_=T?new Map:factory(S)),M=_;return _};getFetch();var Yc={http:null,xhr:Bc,fetch:{get:getFetch}};yc.forEach(Yc,function(e,l){if(e){try{Object.defineProperty(e,"name",{value:l})}catch(ta){}Object.defineProperty(e,"adapterName",{value:l})}});var renderReason=function(e){return"- ".concat(e)},isResolvedHandle=function(e){return yc.isFunction(e)||null===e||!1===e},adapters_getAdapter=function(e,l){for(var _,S,k=(e=yc.isArray(e)?e:[e]).length,E={},T=0;T<k;T++){var M=void 0;if(S=_=e[T],!isResolvedHandle(_)&&void 0===(S=Yc[(M=String(_)).toLowerCase()]))throw new AxiosError$1("Unknown adapter '".concat(M,"'"));if(S&&(yc.isFunction(S)||(S=S.get(l))))break;E[M||"#"+T]=S}if(!S){var R=Object.entries(E).map(function(e){var l=_slicedToArray(e,2),_=l[0],S=l[1];return"adapter ".concat(_," ")+(!1===S?"is not supported by the environment":"is not available in the build")});throw new AxiosError$1("There is no suitable adapter to dispatch the request "+(k?R.length>1?"since :\n"+R.map(renderReason).join("\n"):" "+renderReason(R[0]):"as no adapter specified"),"ERR_NOT_SUPPORT")}return S};function throwIfCancellationRequested(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new CanceledError$1(null,e)}function dispatchRequest(e){return throwIfCancellationRequested(e),e.headers=Lc.from(e.headers),e.data=transformData.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1),adapters_getAdapter(e.adapter||Pc.adapter,e)(e).then(function(l){return throwIfCancellationRequested(e),l.data=transformData.call(e,e.transformResponse,l),l.headers=Lc.from(l.headers),l},function(l){return isCancel$1(l)||(throwIfCancellationRequested(e),l&&l.response&&(l.response.data=transformData.call(e,e.transformResponse,l.response),l.response.headers=Lc.from(l.response.headers))),Promise.reject(l)})}var Qc="1.12.2",Jc={};["object","boolean","number","function","string","symbol"].forEach(function(e,l){Jc[e]=function(_){return _typeof3(_)===e||"a"+(l<1?"n ":" ")+e}});var Zc={};Jc.transitional=function(e,l,_){return function(S,k,E){if(!1===e)throw new AxiosError$1(function(e,l){return"[Axios v"+Qc+"] Transitional option '"+e+"'"+l+(_?". "+_:"")}(k," has been removed"+(l?" in "+l:"")),AxiosError$1.ERR_DEPRECATED);return l&&!Zc[k]&&(Zc[k]=!0),!e||e(S,k,E)}},Jc.spelling=function(e){return function(e,l){return!0}};var $c={assertOptions:function(e,l,_){if("object"!==_typeof3(e))throw new AxiosError$1("options must be an object",AxiosError$1.ERR_BAD_OPTION_VALUE);for(var S=Object.keys(e),k=S.length;k-- >0;){var E=S[k],T=l[E];if(T){var M=e[E],R=void 0===M||T(M,E,e);if(!0!==R)throw new AxiosError$1("option "+E+" must be "+R,AxiosError$1.ERR_BAD_OPTION_VALUE)}else if(!0!==_)throw new AxiosError$1("Unknown option "+E,AxiosError$1.ERR_BAD_OPTION)}},validators:Jc},eh=$c.validators,th=function(){return _createClass3(function Axios(e){_classCallCheck3(this,Axios),this.defaults=e||{},this.interceptors={request:new xc,response:new xc}},[{key:"request",value:(e=_asyncToGenerator(_regenerator().m(function _callee217(e,l){var _,S,k;return _regenerator().w(function(E){for(;;)switch(E.p=E.n){case 0:return E.p=0,E.n=1,this._request(e,l);case 1:return E.a(2,E.v);case 2:if(E.p=2,(k=E.v)instanceof Error){_={},Error.captureStackTrace?Error.captureStackTrace(_):_=new Error,S=_.stack?_.stack.replace(/^.+\n/,""):"";try{k.stack?S&&!String(k.stack).endsWith(S.replace(/^.+\n.+\n/,""))&&(k.stack+="\n"+S):k.stack=S}catch(ta){}}throw k;case 3:return E.a(2)}},_callee217,this,[[0,2]])})),function(l,_){return e.apply(this,arguments)})},{key:"_request",value:function(e,l){"string"==typeof e?(l=l||{}).url=e:l=e||{};var _=l=mergeConfig$1(this.defaults,l),S=_.transitional,k=_.paramsSerializer,E=_.headers;void 0!==S&&$c.assertOptions(S,{silentJSONParsing:eh.transitional(eh.boolean),forcedJSONParsing:eh.transitional(eh.boolean),clarifyTimeoutError:eh.transitional(eh.boolean)},!1),null!=k&&(yc.isFunction(k)?l.paramsSerializer={serialize:k}:$c.assertOptions(k,{encode:eh.function,serialize:eh.function},!0)),void 0!==l.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?l.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:l.allowAbsoluteUrls=!0),$c.assertOptions(l,{baseUrl:eh.spelling("baseURL"),withXsrfToken:eh.spelling("withXSRFToken")},!0),l.method=(l.method||this.defaults.method||"get").toLowerCase();var T=E&&yc.merge(E.common,E[l.method]);E&&yc.forEach(["delete","get","head","post","put","patch","common"],function(e){delete E[e]}),l.headers=Lc.concat(T,E);var M=[],R=!0;this.interceptors.request.forEach(function(e){"function"==typeof e.runWhen&&!1===e.runWhen(l)||(R=R&&e.synchronous,M.unshift(e.fulfilled,e.rejected))});var I,D=[];this.interceptors.response.forEach(function(e){D.push(e.fulfilled,e.rejected)});var O,L=0;if(!R){var U=[dispatchRequest.bind(this),void 0];for(U.unshift.apply(U,M),U.push.apply(U,D),O=U.length,I=Promise.resolve(l);L<O;)I=I.then(U[L++],U[L++]);return I}O=M.length;for(var B=l;L<O;){var z=M[L++],G=M[L++];try{B=z(B)}catch(j){G.call(this,j);break}}try{I=dispatchRequest.call(this,B)}catch(j){return Promise.reject(j)}for(L=0,O=D.length;L<O;)I=I.then(D[L++],D[L++]);return I}},{key:"getUri",value:function(e){return buildURL(buildFullPath((e=mergeConfig$1(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}]);var e}();yc.forEach(["delete","get","head","options"],function(e){th.prototype[e]=function(l,_){return this.request(mergeConfig$1(_||{},{method:e,url:l,data:(_||{}).data}))}}),yc.forEach(["post","put","patch"],function(e){function generateHTTPMethod(l){return function(_,S,k){return this.request(mergeConfig$1(k||{},{method:e,headers:l?{"Content-Type":"multipart/form-data"}:{},url:_,data:S}))}}th.prototype[e]=generateHTTPMethod(),th.prototype[e+"Form"]=generateHTTPMethod(!0)});var rh=function(){function CancelToken(e){if(_classCallCheck3(this,CancelToken),"function"!=typeof e)throw new TypeError("executor must be a function.");var l;this.promise=new Promise(function(e){l=e});var _=this;this.promise.then(function(e){if(_._listeners){for(var l=_._listeners.length;l-- >0;)_._listeners[l](e);_._listeners=null}}),this.promise.then=function(e){var l,S=new Promise(function(e){_.subscribe(e),l=e}).then(e);return S.cancel=function(){_.unsubscribe(l)},S},e(function(e,S,k){_.reason||(_.reason=new CanceledError$1(e,S,k),l(_.reason))})}return _createClass3(CancelToken,[{key:"throwIfRequested",value:function(){if(this.reason)throw this.reason}},{key:"subscribe",value:function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}},{key:"unsubscribe",value:function(e){if(this._listeners){var l=this._listeners.indexOf(e);-1!==l&&this._listeners.splice(l,1)}}},{key:"toAbortSignal",value:function(){var e=this,l=new AbortController,abort=function(e){l.abort(e)};return this.subscribe(abort),l.signal.unsubscribe=function(){return e.unsubscribe(abort)},l.signal}}],[{key:"source",value:function(){var e;return{token:new CancelToken(function(l){e=l}),cancel:e}}}])}();var nh={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(nh).forEach(function(e){var l=_slicedToArray(e,2),_=l[0],S=l[1];nh[S]=_});var ih=I("aT",function createInstance(e){var l=new th(e),_=bind(th.prototype.request,l);return yc.extend(_,th.prototype,l,{allOwnKeys:!0}),yc.extend(_,l,null,{allOwnKeys:!0}),_.create=function(l){return createInstance(mergeConfig$1(e,l))},_}(Pc));ih.Axios=th,ih.CanceledError=CanceledError$1,ih.CancelToken=rh,ih.isCancel=isCancel$1,ih.VERSION=Qc,ih.toFormData=toFormData$1,ih.AxiosError=AxiosError$1,ih.Cancel=ih.CanceledError,ih.all=function(e){return Promise.all(e)},ih.spread=function(e){return function(l){return e.apply(null,l)}},ih.isAxiosError=function(e){return yc.isObject(e)&&!0===e.isAxiosError},ih.mergeConfig=mergeConfig$1,ih.AxiosHeaders=Lc,ih.formToJSON=function(e){return formDataToJSON(yc.isHTMLForm(e)?new FormData(e):e)},ih.getAdapter=adapters_getAdapter,ih.HttpStatusCode=nh,ih.default=ih;ih.Axios,ih.AxiosError,ih.CanceledError,ih.isCancel,ih.CancelToken,ih.VERSION,ih.all,ih.Cancel,ih.isAxiosError,ih.spread,ih.toFormData,ih.AxiosHeaders,ih.HttpStatusCode,ih.formToJSON,ih.getAdapter,ih.mergeConfig;function length(e){var l=e[0],_=e[1],S=e[2];return Math.sqrt(l*l+_*_+S*S)}function copy$4(e,l){return e[0]=l[0],e[1]=l[1],e[2]=l[2],e}function add$1(e,l,_){return e[0]=l[0]+_[0],e[1]=l[1]+_[1],e[2]=l[2]+_[2],e}function subtract$1(e,l,_){return e[0]=l[0]-_[0],e[1]=l[1]-_[1],e[2]=l[2]-_[2],e}function scale$2(e,l,_){return e[0]=l[0]*_,e[1]=l[1]*_,e[2]=l[2]*_,e}function squaredLength(e){var l=e[0],_=e[1],S=e[2];return l*l+_*_+S*S}function normalize$3(e,l){var _=l[0],S=l[1],k=l[2],E=_*_+S*S+k*k;return E>0&&(E=1/Math.sqrt(E)),e[0]=l[0]*E,e[1]=l[1]*E,e[2]=l[2]*E,e}function dot$2(e,l){return e[0]*l[0]+e[1]*l[1]+e[2]*l[2]}function _cross(e,l,_){var S=l[0],k=l[1],E=l[2],T=_[0],M=_[1],R=_[2];return e[0]=k*R-E*M,e[1]=E*T-S*R,e[2]=S*M-k*T,e}var ah,oh,sh=(ah=[0,0,0],oh=[0,0,0],function(e,l){copy$4(ah,e),copy$4(oh,l),normalize$3(ah,ah),normalize$3(oh,oh);var _=dot$2(ah,oh);return _>1?0:_<-1?Math.PI:Math.acos(_)});var uh=function(e){function Vec3(){var e,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l,S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l;return _classCallCheck3(this,Vec3),_possibleConstructorReturn(e=_callSuper(this,Vec3,[l,_,S]),e)}return _inherits(Vec3,e),_createClass3(Vec3,[{key:"x",get:function(){return this[0]},set:function(e){this[0]=e}},{key:"y",get:function(){return this[1]},set:function(e){this[1]=e}},{key:"z",get:function(){return this[2]},set:function(e){this[2]=e}},{key:"set",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,_=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;return e.length?this.copy(e):(function(e,l,_,S){e[0]=l,e[1]=_,e[2]=S}(this,e,l,_),this)}},{key:"copy",value:function(e){return copy$4(this,e),this}},{key:"add",value:function(e,l){return l?add$1(this,e,l):add$1(this,this,e),this}},{key:"sub",value:function(e,l){return l?subtract$1(this,e,l):subtract$1(this,this,e),this}},{key:"multiply",value:function(e){return e.length?function(e,l,_){e[0]=l[0]*_[0],e[1]=l[1]*_[1],e[2]=l[2]*_[2]}(this,this,e):scale$2(this,this,e),this}},{key:"divide",value:function(e){return e.length?function(e,l,_){e[0]=l[0]/_[0],e[1]=l[1]/_[1],e[2]=l[2]/_[2]}(this,this,e):scale$2(this,this,1/e),this}},{key:"inverse",value:function(){return function(e,l){e[0]=1/l[0],e[1]=1/l[1],e[2]=1/l[2]}(this,arguments.length>0&&void 0!==arguments[0]?arguments[0]:this),this}},{key:"len",value:function(){return length(this)}},{key:"distance",value:function(e){return e?(l=this,S=(_=e)[0]-l[0],k=_[1]-l[1],E=_[2]-l[2],Math.sqrt(S*S+k*k+E*E)):length(this);var l,_,S,k,E}},{key:"squaredLen",value:function(){return squaredLength(this)}},{key:"squaredDistance",value:function(e){return e?(l=this,S=(_=e)[0]-l[0],k=_[1]-l[1],E=_[2]-l[2],S*S+k*k+E*E):squaredLength(this);var l,_,S,k,E}},{key:"negate",value:function(){return function(e,l){e[0]=-l[0],e[1]=-l[1],e[2]=-l[2]}(this,arguments.length>0&&void 0!==arguments[0]?arguments[0]:this),this}},{key:"cross",value:function(e,l){return l?_cross(this,e,l):_cross(this,this,e),this}},{key:"scale",value:function(e){return scale$2(this,this,e),this}},{key:"normalize",value:function(){return normalize$3(this,this),this}},{key:"dot",value:function(e){return dot$2(this,e)}},{key:"equals",value:function(e){return _=e,(l=this)[0]===_[0]&&l[1]===_[1]&&l[2]===_[2];var l,_}},{key:"applyMatrix3",value:function(e){return function(e,l,_){var S=l[0],k=l[1],E=l[2];e[0]=S*_[0]+k*_[3]+E*_[6],e[1]=S*_[1]+k*_[4]+E*_[7],e[2]=S*_[2]+k*_[5]+E*_[8]}(this,this,e),this}},{key:"applyMatrix4",value:function(e){return function(e,l,_){var S=l[0],k=l[1],E=l[2],T=_[3]*S+_[7]*k+_[11]*E+_[15];T=T||1,e[0]=(_[0]*S+_[4]*k+_[8]*E+_[12])/T,e[1]=(_[1]*S+_[5]*k+_[9]*E+_[13])/T,e[2]=(_[2]*S+_[6]*k+_[10]*E+_[14])/T}(this,this,e),this}},{key:"scaleRotateMatrix4",value:function(e){return function(e,l,_){var S=l[0],k=l[1],E=l[2],T=_[3]*S+_[7]*k+_[11]*E+_[15];T=T||1,e[0]=(_[0]*S+_[4]*k+_[8]*E)/T,e[1]=(_[1]*S+_[5]*k+_[9]*E)/T,e[2]=(_[2]*S+_[6]*k+_[10]*E)/T}(this,this,e),this}},{key:"applyQuaternion",value:function(e){return function(e,l,_){var S=l[0],k=l[1],E=l[2],T=_[0],M=_[1],R=_[2],I=M*E-R*k,D=R*S-T*E,O=T*k-M*S,L=M*O-R*D,U=R*I-T*O,B=T*D-M*I,z=2*_[3];I*=z,D*=z,O*=z,L*=2,U*=2,B*=2,e[0]=S+I+L,e[1]=k+D+U,e[2]=E+O+B}(this,this,e),this}},{key:"angle",value:function(e){return sh(this,e)}},{key:"lerp",value:function(e,l){return function(e,l,_,S){var k=l[0],E=l[1],T=l[2];e[0]=k+S*(_[0]-k),e[1]=E+S*(_[1]-E),e[2]=T+S*(_[2]-T)}(this,this,e,l),this}},{key:"smoothLerp",value:function(e,l,_){return function(e,l,_,S,k){var E=Math.exp(-S*k),T=l[0],M=l[1],R=l[2];e[0]=_[0]+(T-_[0])*E,e[1]=_[1]+(M-_[1])*E,e[2]=_[2]+(R-_[2])*E}(this,this,e,l,_),this}},{key:"clone",value:function(){return new Vec3(this[0],this[1],this[2])}},{key:"fromArray",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this[0]=e[l],this[1]=e[l+1],this[2]=e[l+2],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[l]=this[0],e[l+1]=this[1],e[l+2]=this[2],e}},{key:"transformDirection",value:function(e){var l=this[0],_=this[1],S=this[2];return this[0]=e[0]*l+e[4]*_+e[8]*S,this[1]=e[1]*l+e[5]*_+e[9]*S,this[2]=e[2]*l+e[6]*_+e[10]*S,this.normalize()}}])}(_wrapNativeSuper(Array)),lh=new uh,ch=1,hh=1,dh=!1,fh=function(){return _createClass3(function Geometry(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(var _ in _classCallCheck3(this,Geometry),e.canvas,this.gl=e,this.attributes=l,this.id=ch++,this.VAOs={},this.drawRange={start:0,count:0},this.instancedCount=0,this.gl.renderer.bindVertexArray(null),this.gl.renderer.currentGeometry=null,this.glState=this.gl.renderer.state,l)this.addAttribute(_,l[_])},[{key:"addAttribute",value:function(e,l){if(this.attributes[e]=l,l.id=hh++,l.size=l.size||1,l.type=l.type||(l.data.constructor===Float32Array?this.gl.FLOAT:l.data.constructor===Uint16Array?this.gl.UNSIGNED_SHORT:this.gl.UNSIGNED_INT),l.target="index"===e?this.gl.ELEMENT_ARRAY_BUFFER:this.gl.ARRAY_BUFFER,l.normalized=l.normalized||!1,l.stride=l.stride||0,l.offset=l.offset||0,l.count=l.count||(l.stride?l.data.byteLength/l.stride:l.data.length/l.size),l.divisor=l.instanced||0,l.needsUpdate=!1,l.usage=l.usage||this.gl.STATIC_DRAW,l.buffer||this.updateAttribute(l),l.divisor){if(this.isInstanced=!0,this.instancedCount&&this.instancedCount!==l.count*l.divisor)return this.instancedCount=Math.min(this.instancedCount,l.count*l.divisor);this.instancedCount=l.count*l.divisor}else"index"===e?this.drawRange.count=l.count:this.attributes.index||(this.drawRange.count=Math.max(this.drawRange.count,l.count))}},{key:"updateAttribute",value:function(e){var l=!e.buffer;l&&(e.buffer=this.gl.createBuffer()),this.glState.boundBuffer!==e.buffer&&(this.gl.bindBuffer(e.target,e.buffer),this.glState.boundBuffer=e.buffer),l?this.gl.bufferData(e.target,e.data,e.usage):this.gl.bufferSubData(e.target,0,e.data),e.needsUpdate=!1}},{key:"setIndex",value:function(e){this.addAttribute("index",e)}},{key:"setDrawRange",value:function(e,l){this.drawRange.start=e,this.drawRange.count=l}},{key:"setInstancedCount",value:function(e){this.instancedCount=e}},{key:"createVAO",value:function(e){this.VAOs[e.attributeOrder]=this.gl.renderer.createVertexArray(),this.gl.renderer.bindVertexArray(this.VAOs[e.attributeOrder]),this.bindAttributes(e)}},{key:"bindAttributes",value:function(e){var l=this;e.attributeLocations.forEach(function(e,_){var S=_.name,k=_.type;if(l.attributes[S]){var E=l.attributes[S];l.gl.bindBuffer(E.target,E.buffer),l.glState.boundBuffer=E.buffer;var T=1;35674===k&&(T=2),35675===k&&(T=3),35676===k&&(T=4);for(var M=E.size/T,R=1===T?0:T*T*4,I=1===T?0:4*T,D=0;D<T;D++)l.gl.vertexAttribPointer(e+D,M,E.type,E.normalized,E.stride+R,E.offset+D*I),l.gl.enableVertexAttribArray(e+D),l.gl.renderer.vertexAttribDivisor(e+D,E.divisor)}}),this.attributes.index&&this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.attributes.index.buffer)}},{key:"draw",value:function(e){var l,_=this,S=e.program,k=e.mode,E=void 0===k?this.gl.TRIANGLES:k;this.gl.renderer.currentGeometry!=="".concat(this.id,"_").concat(S.attributeOrder)&&(this.VAOs[S.attributeOrder]||this.createVAO(S),this.gl.renderer.bindVertexArray(this.VAOs[S.attributeOrder]),this.gl.renderer.currentGeometry="".concat(this.id,"_").concat(S.attributeOrder)),S.attributeLocations.forEach(function(e,l){var S=l.name,k=_.attributes[S];k.needsUpdate&&_.updateAttribute(k)});var T=2;(null===(l=this.attributes.index)||void 0===l?void 0:l.type)===this.gl.UNSIGNED_INT&&(T=4),this.isInstanced?this.attributes.index?this.gl.renderer.drawElementsInstanced(E,this.drawRange.count,this.attributes.index.type,this.attributes.index.offset+this.drawRange.start*T,this.instancedCount):this.gl.renderer.drawArraysInstanced(E,this.drawRange.start,this.drawRange.count,this.instancedCount):this.attributes.index?this.gl.drawElements(E,this.drawRange.count,this.attributes.index.type,this.attributes.index.offset+this.drawRange.start*T):this.gl.drawArrays(E,this.drawRange.start,this.drawRange.count)}},{key:"getPosition",value:function(){var e=this.attributes.position;return e.data?e:dh?void 0:dh=!0}},{key:"computeBoundingBox",value:function(e){e||(e=this.getPosition());var l=e.data,_=e.size;this.bounds||(this.bounds={min:new uh,max:new uh,center:new uh,scale:new uh,radius:1/0});var S=this.bounds.min,k=this.bounds.max,E=this.bounds.center,T=this.bounds.scale;S.set(1/0),k.set(-1/0);for(var M=0,R=l.length;M<R;M+=_){var I=l[M],D=l[M+1],O=l[M+2];S.x=Math.min(I,S.x),S.y=Math.min(D,S.y),S.z=Math.min(O,S.z),k.x=Math.max(I,k.x),k.y=Math.max(D,k.y),k.z=Math.max(O,k.z)}T.sub(k,S),E.add(S,k).divide(2)}},{key:"computeBoundingSphere",value:function(e){e||(e=this.getPosition());var l=e.data,_=e.size;this.bounds||this.computeBoundingBox(e);for(var S=0,k=0,E=l.length;k<E;k+=_)lh.fromArray(l,k),S=Math.max(S,this.bounds.center.squaredDistance(lh));this.bounds.radius=Math.sqrt(S)}},{key:"remove",value:function(){for(var e in this.VAOs)this.gl.renderer.deleteVertexArray(this.VAOs[e]),delete this.VAOs[e];for(var l in this.attributes)this.gl.deleteBuffer(this.attributes[l].buffer),delete this.attributes[l]}}])}(),ph=1,vh={},gh=function(){return _createClass3(function Program(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_=l.vertex,S=l.fragment,k=l.uniforms,E=void 0===k?{}:k,T=l.transparent,M=void 0!==T&&T,R=l.cullFace,I=void 0===R?e.BACK:R,D=l.frontFace,O=void 0===D?e.CCW:D,L=l.depthTest,U=void 0===L||L,B=l.depthWrite,z=void 0===B||B,G=l.depthFunc,j=void 0===G?e.LEQUAL:G;_classCallCheck3(this,Program),e.canvas,this.gl=e,this.uniforms=E,this.id=ph++,this.transparent=M,this.cullFace=I,this.frontFace=O,this.depthTest=U,this.depthWrite=z,this.depthFunc=j,this.blendFunc={},this.blendEquation={},this.stencilFunc={},this.stencilOp={},this.transparent&&!this.blendFunc.src&&(this.gl.renderer.premultipliedAlpha?this.setBlendFunc(this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA):this.setBlendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA)),this.vertexShader=e.createShader(e.VERTEX_SHADER),this.fragmentShader=e.createShader(e.FRAGMENT_SHADER),this.program=e.createProgram(),e.attachShader(this.program,this.vertexShader),e.attachShader(this.program,this.fragmentShader),this.setShaders({vertex:_,fragment:S})},[{key:"setShaders",value:function(e){var l=e.vertex,_=e.fragment;if(l&&(this.gl.shaderSource(this.vertexShader,l),this.gl.compileShader(this.vertexShader),this.gl.getShaderInfoLog(this.vertexShader)),_&&(this.gl.shaderSource(this.fragmentShader,_),this.gl.compileShader(this.fragmentShader),this.gl.getShaderInfoLog(this.fragmentShader)),this.gl.linkProgram(this.program),this.gl.getProgramParameter(this.program,this.gl.LINK_STATUS)){this.uniformLocations=new Map;for(var S=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_UNIFORMS),k=0;k<S;k++){var E=this.gl.getActiveUniform(this.program,k);this.uniformLocations.set(E,this.gl.getUniformLocation(this.program,E.name));var T=E.name.match(/(\w+)/g);E.uniformName=T[0],E.nameComponents=T.slice(1)}this.attributeLocations=new Map;for(var M=[],R=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),I=0;I<R;I++){var D=this.gl.getActiveAttrib(this.program,I),O=this.gl.getAttribLocation(this.program,D.name);-1!==O&&(M[O]=D.name,this.attributeLocations.set(D,O))}this.attributeOrder=M.join("")}}},{key:"setBlendFunc",value:function(e,l,_,S){this.blendFunc.src=e,this.blendFunc.dst=l,this.blendFunc.srcAlpha=_,this.blendFunc.dstAlpha=S,e&&(this.transparent=!0)}},{key:"setBlendEquation",value:function(e,l){this.blendEquation.modeRGB=e,this.blendEquation.modeAlpha=l}},{key:"setStencilFunc",value:function(e,l,_){this.stencilRef=l,this.stencilFunc.func=e,this.stencilFunc.ref=l,this.stencilFunc.mask=_}},{key:"setStencilOp",value:function(e,l,_){this.stencilOp.stencilFail=e,this.stencilOp.depthFail=l,this.stencilOp.depthPass=_}},{key:"applyState",value:function(){this.depthTest?this.gl.renderer.enable(this.gl.DEPTH_TEST):this.gl.renderer.disable(this.gl.DEPTH_TEST),this.cullFace?this.gl.renderer.enable(this.gl.CULL_FACE):this.gl.renderer.disable(this.gl.CULL_FACE),this.blendFunc.src?this.gl.renderer.enable(this.gl.BLEND):this.gl.renderer.disable(this.gl.BLEND),this.cullFace&&this.gl.renderer.setCullFace(this.cullFace),this.gl.renderer.setFrontFace(this.frontFace),this.gl.renderer.setDepthMask(this.depthWrite),this.gl.renderer.setDepthFunc(this.depthFunc),this.blendFunc.src&&this.gl.renderer.setBlendFunc(this.blendFunc.src,this.blendFunc.dst,this.blendFunc.srcAlpha,this.blendFunc.dstAlpha),this.gl.renderer.setBlendEquation(this.blendEquation.modeRGB,this.blendEquation.modeAlpha),this.stencilFunc.func||this.stencilOp.stencilFail?this.gl.renderer.enable(this.gl.STENCIL_TEST):this.gl.renderer.disable(this.gl.STENCIL_TEST),this.gl.renderer.setStencilFunc(this.stencilFunc.func,this.stencilFunc.ref,this.stencilFunc.mask),this.gl.renderer.setStencilOp(this.stencilOp.stencilFail,this.stencilOp.depthFail,this.stencilOp.depthPass)}},{key:"use",value:function(){var e=this,l=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).flipFaces,_=void 0!==l&&l,S=-1;this.gl.renderer.state.currentProgram===this.id||(this.gl.useProgram(this.program),this.gl.renderer.state.currentProgram=this.id),this.uniformLocations.forEach(function(l,_){var k,E=e.uniforms[_.uniformName],T=_createForOfIteratorHelper2(_.nameComponents);try{for(T.s();!(k=T.n()).done;){var M=k.value;if(!E)break;if(!(M in E)){if(Array.isArray(E.value))break;E=void 0;break}E=E[M]}}catch(I){T.e(I)}finally{T.f()}if(!E)return warn("Active uniform ".concat(_.name," has not been supplied"));if(E&&void 0===E.value)return warn("".concat(_.name," uniform is missing a value parameter"));if(E.value.texture)return S+=1,E.value.update(S),setUniform(e.gl,_.type,l,S);if(E.value.length&&E.value[0].texture){var R=[];return E.value.forEach(function(e){S+=1,e.update(S),R.push(S)}),setUniform(e.gl,_.type,l,R)}setUniform(e.gl,_.type,l,E.value)}),this.applyState(),_&&this.gl.renderer.setFrontFace(this.frontFace===this.gl.CCW?this.gl.CW:this.gl.CCW)}},{key:"remove",value:function(){this.gl.deleteProgram(this.program)}}])}();function setUniform(e,l,_,S){S=S.length?function(e){var l=e.length,_=e[0].length;if(void 0===_)return e;var S=l*_,k=vh[S];k||(vh[S]=k=new Float32Array(S));for(var E=0;E<l;E++)k.set(e[E],E*_);return k}(S):S;var k=e.renderer.state.uniformLocations.get(_);if(S.length)if(void 0===k||k.length!==S.length)e.renderer.state.uniformLocations.set(_,S.slice(0));else{if(function(e,l){if(e.length!==l.length)return!1;for(var _=0,S=e.length;_<S;_++)if(e[_]!==l[_])return!1;return!0}(k,S))return;k.set?k.set(S):function(e,l){for(var _=0,S=e.length;_<S;_++)e[_]=l[_]}(k,S),e.renderer.state.uniformLocations.set(_,k)}else{if(k===S)return;e.renderer.state.uniformLocations.set(_,S)}switch(l){case 5126:return S.length?e.uniform1fv(_,S):e.uniform1f(_,S);case 35664:return e.uniform2fv(_,S);case 35665:return e.uniform3fv(_,S);case 35666:return e.uniform4fv(_,S);case 35670:case 5124:case 35678:case 36306:case 35680:case 36289:return S.length?e.uniform1iv(_,S):e.uniform1i(_,S);case 35671:case 35667:return e.uniform2iv(_,S);case 35672:case 35668:return e.uniform3iv(_,S);case 35673:case 35669:return e.uniform4iv(_,S);case 35674:return e.uniformMatrix2fv(_,!1,S);case 35675:return e.uniformMatrix3fv(_,!1,S);case 35676:return e.uniformMatrix4fv(_,!1,S)}}I("aZ",gh);var mh=0;function warn(e){mh>100||mh++}var yh=new uh,_h=1,bh=function(){return _createClass3(function Renderer(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=e.canvas,_=void 0===l?document.createElement("canvas"):l,S=e.width,k=void 0===S?300:S,E=e.height,T=void 0===E?150:E,M=e.dpr,R=void 0===M?1:M,I=e.alpha,D=void 0!==I&&I,O=e.depth,L=void 0===O||O,U=e.stencil,B=void 0!==U&&U,z=e.antialias,G=void 0!==z&&z,j=e.premultipliedAlpha,H=void 0!==j&&j,V=e.preserveDrawingBuffer,W=void 0!==V&&V,q=e.powerPreference,X=void 0===q?"default":q,K=e.autoClear,Y=void 0===K||K,Q=e.webgl,J=void 0===Q?2:Q;_classCallCheck3(this,Renderer);var Z={alpha:D,depth:L,stencil:B,antialias:G,premultipliedAlpha:H,preserveDrawingBuffer:W,powerPreference:X};this.dpr=R,this.alpha=D,this.color=!0,this.depth=L,this.stencil=B,this.premultipliedAlpha=H,this.autoClear=Y,this.id=_h++,2===J&&(this.gl=_.getContext("webgl2",Z)),this.isWebgl2=!!this.gl,this.gl||(this.gl=_.getContext("webgl",Z)),this.gl,this.gl.renderer=this,this.setSize(k,T),this.state={},this.state.blendFunc={src:this.gl.ONE,dst:this.gl.ZERO},this.state.blendEquation={modeRGB:this.gl.FUNC_ADD},this.state.cullFace=!1,this.state.frontFace=this.gl.CCW,this.state.depthMask=!0,this.state.depthFunc=this.gl.LEQUAL,this.state.premultiplyAlpha=!1,this.state.flipY=!1,this.state.unpackAlignment=4,this.state.framebuffer=null,this.state.viewport={x:0,y:0,width:null,height:null},this.state.textureUnits=[],this.state.activeTextureUnit=0,this.state.boundBuffer=null,this.state.uniformLocations=new Map,this.state.currentProgram=null,this.extensions={},this.isWebgl2?(this.getExtension("EXT_color_buffer_float"),this.getExtension("OES_texture_float_linear")):(this.getExtension("OES_texture_float"),this.getExtension("OES_texture_float_linear"),this.getExtension("OES_texture_half_float"),this.getExtension("OES_texture_half_float_linear"),this.getExtension("OES_element_index_uint"),this.getExtension("OES_standard_derivatives"),this.getExtension("EXT_sRGB"),this.getExtension("WEBGL_depth_texture"),this.getExtension("WEBGL_draw_buffers")),this.getExtension("WEBGL_compressed_texture_astc"),this.getExtension("EXT_texture_compression_bptc"),this.getExtension("WEBGL_compressed_texture_s3tc"),this.getExtension("WEBGL_compressed_texture_etc1"),this.getExtension("WEBGL_compressed_texture_pvrtc"),this.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),this.vertexAttribDivisor=this.getExtension("ANGLE_instanced_arrays","vertexAttribDivisor","vertexAttribDivisorANGLE"),this.drawArraysInstanced=this.getExtension("ANGLE_instanced_arrays","drawArraysInstanced","drawArraysInstancedANGLE"),this.drawElementsInstanced=this.getExtension("ANGLE_instanced_arrays","drawElementsInstanced","drawElementsInstancedANGLE"),this.createVertexArray=this.getExtension("OES_vertex_array_object","createVertexArray","createVertexArrayOES"),this.bindVertexArray=this.getExtension("OES_vertex_array_object","bindVertexArray","bindVertexArrayOES"),this.deleteVertexArray=this.getExtension("OES_vertex_array_object","deleteVertexArray","deleteVertexArrayOES"),this.drawBuffers=this.getExtension("WEBGL_draw_buffers","drawBuffers","drawBuffersWEBGL"),this.parameters={},this.parameters.maxTextureUnits=this.gl.getParameter(this.gl.MAX_COMBINED_TEXTURE_IMAGE_UNITS),this.parameters.maxAnisotropy=this.getExtension("EXT_texture_filter_anisotropic")?this.gl.getParameter(this.getExtension("EXT_texture_filter_anisotropic").MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},[{key:"setSize",value:function(e,l){this.width=e,this.height=l,this.gl.canvas.width=e*this.dpr,this.gl.canvas.height=l*this.dpr,this.gl.canvas.style&&Object.assign(this.gl.canvas.style,{width:e+"px",height:l+"px"})}},{key:"setViewport",value:function(e,l){var _=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,S=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.state.viewport.width===e&&this.state.viewport.height===l||(this.state.viewport.width=e,this.state.viewport.height=l,this.state.viewport.x=_,this.state.viewport.y=S,this.gl.viewport(_,S,e,l))}},{key:"setScissor",value:function(e,l){var _=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,S=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.gl.scissor(_,S,e,l)}},{key:"enable",value:function(e){!0!==this.state[e]&&(this.gl.enable(e),this.state[e]=!0)}},{key:"disable",value:function(e){!1!==this.state[e]&&(this.gl.disable(e),this.state[e]=!1)}},{key:"setBlendFunc",value:function(e,l,_,S){this.state.blendFunc.src===e&&this.state.blendFunc.dst===l&&this.state.blendFunc.srcAlpha===_&&this.state.blendFunc.dstAlpha===S||(this.state.blendFunc.src=e,this.state.blendFunc.dst=l,this.state.blendFunc.srcAlpha=_,this.state.blendFunc.dstAlpha=S,void 0!==_?this.gl.blendFuncSeparate(e,l,_,S):this.gl.blendFunc(e,l))}},{key:"setBlendEquation",value:function(e,l){e=e||this.gl.FUNC_ADD,this.state.blendEquation.modeRGB===e&&this.state.blendEquation.modeAlpha===l||(this.state.blendEquation.modeRGB=e,this.state.blendEquation.modeAlpha=l,void 0!==l?this.gl.blendEquationSeparate(e,l):this.gl.blendEquation(e))}},{key:"setCullFace",value:function(e){this.state.cullFace!==e&&(this.state.cullFace=e,this.gl.cullFace(e))}},{key:"setFrontFace",value:function(e){this.state.frontFace!==e&&(this.state.frontFace=e,this.gl.frontFace(e))}},{key:"setDepthMask",value:function(e){this.state.depthMask!==e&&(this.state.depthMask=e,this.gl.depthMask(e))}},{key:"setDepthFunc",value:function(e){this.state.depthFunc!==e&&(this.state.depthFunc=e,this.gl.depthFunc(e))}},{key:"setStencilMask",value:function(e){this.state.stencilMask!==e&&(this.state.stencilMask=e,this.gl.stencilMask(e))}},{key:"setStencilFunc",value:function(e,l,_){this.state.stencilFunc===e&&this.state.stencilRef===l&&this.state.stencilFuncMask===_||(this.state.stencilFunc=e||this.gl.ALWAYS,this.state.stencilRef=l||0,this.state.stencilFuncMask=_||0,this.gl.stencilFunc(e||this.gl.ALWAYS,l||0,_||0))}},{key:"setStencilOp",value:function(e,l,_){this.state.stencilFail===e&&this.state.stencilDepthFail===l&&this.state.stencilDepthPass===_||(this.state.stencilFail=e,this.state.stencilDepthFail=l,this.state.stencilDepthPass=_,this.gl.stencilOp(e,l,_))}},{key:"activeTexture",value:function(e){this.state.activeTextureUnit!==e&&(this.state.activeTextureUnit=e,this.gl.activeTexture(this.gl.TEXTURE0+e))}},{key:"bindFramebuffer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=e.target,_=void 0===l?this.gl.FRAMEBUFFER:l,S=e.buffer,k=void 0===S?null:S;this.state.framebuffer!==k&&(this.state.framebuffer=k,this.gl.bindFramebuffer(_,k))}},{key:"getExtension",value:function(e,l,_){return l&&this.gl[l]?this.gl[l].bind(this.gl):(this.extensions[e]||(this.extensions[e]=this.gl.getExtension(e)),l?this.extensions[e]?this.extensions[e][_].bind(this.extensions[e]):null:this.extensions[e])}},{key:"sortOpaque",value:function(e,l){return e.renderOrder!==l.renderOrder?e.renderOrder-l.renderOrder:e.program.id!==l.program.id?e.program.id-l.program.id:e.zDepth!==l.zDepth?e.zDepth-l.zDepth:l.id-e.id}},{key:"sortTransparent",value:function(e,l){return e.renderOrder!==l.renderOrder?e.renderOrder-l.renderOrder:e.zDepth!==l.zDepth?l.zDepth-e.zDepth:l.id-e.id}},{key:"sortUI",value:function(e,l){return e.renderOrder!==l.renderOrder?e.renderOrder-l.renderOrder:e.program.id!==l.program.id?e.program.id-l.program.id:l.id-e.id}},{key:"getRenderList",value:function(e){var l=e.scene,_=e.camera,S=e.frustumCull,k=e.sort,E=[];if(_&&S&&_.updateFrustum(),l.traverse(function(e){if(!e.visible)return!0;e.draw&&(S&&e.frustumCulled&&_&&!_.frustumIntersectsMesh(e)||E.push(e))}),k){var T=[],M=[],R=[];E.forEach(function(e){e.program.transparent?e.program.depthTest?M.push(e):R.push(e):T.push(e),e.zDepth=0,0===e.renderOrder&&e.program.depthTest&&_&&(e.worldMatrix.getTranslation(yh),yh.applyMatrix4(_.projectionViewMatrix),e.zDepth=yh.z)}),T.sort(this.sortOpaque),M.sort(this.sortTransparent),R.sort(this.sortUI),E=T.concat(M,R)}return E}},{key:"render",value:function(e){var l=e.scene,_=e.camera,S=e.target,k=void 0===S?null:S,E=e.update,T=void 0===E||E,M=e.sort,R=void 0===M||M,I=e.frustumCull,D=void 0===I||I,O=e.clear;null===k?(this.bindFramebuffer(),this.setViewport(this.width*this.dpr,this.height*this.dpr)):(this.bindFramebuffer(k),this.setViewport(k.width,k.height)),(O||this.autoClear&&!1!==O)&&(!this.depth||k&&!k.depth||(this.enable(this.gl.DEPTH_TEST),this.setDepthMask(!0)),(this.stencil||!k||k.stencil)&&(this.enable(this.gl.STENCIL_TEST),this.setStencilMask(255)),this.gl.clear((this.color?this.gl.COLOR_BUFFER_BIT:0)|(this.depth?this.gl.DEPTH_BUFFER_BIT:0)|(this.stencil?this.gl.STENCIL_BUFFER_BIT:0))),T&&l.updateMatrixWorld(),_&&_.updateMatrixWorld(),this.getRenderList({scene:l,camera:_,frustumCull:D,sort:R}).forEach(function(e){e.draw({camera:_})})}}])}();function multiply$2(e,l,_){var S=l[0],k=l[1],E=l[2],T=l[3],M=_[0],R=_[1],I=_[2],D=_[3];return e[0]=S*D+T*M+k*I-E*R,e[1]=k*D+T*R+E*M-S*I,e[2]=E*D+T*I+S*R-k*M,e[3]=T*D-S*M-k*R-E*I,e}I("aU",bh);var copy$2=function(e,l){return e[0]=l[0],e[1]=l[1],e[2]=l[2],e[3]=l[3],e},set$2=function(e,l,_,S,k){return e[0]=l,e[1]=_,e[2]=S,e[3]=k,e},_dot=function(e,l){return e[0]*l[0]+e[1]*l[1]+e[2]*l[2]+e[3]*l[3]},normalize$1=function(e,l){var _=l[0],S=l[1],k=l[2],E=l[3],T=_*_+S*S+k*k+E*E;return T>0&&(T=1/Math.sqrt(T)),e[0]=_*T,e[1]=S*T,e[2]=k*T,e[3]=E*T,e},Sh=function(e){function Quat(){var e,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,k=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;_classCallCheck3(this,Quat),(e=_callSuper(this,Quat,[l,_,S,k])).onChange=function(){},e._target=e;var E=["0","1","2","3"];return _possibleConstructorReturn(e,new Proxy(e,{set:function(e,l){var _=Reflect.set.apply(Reflect,arguments);return _&&E.includes(l)&&e.onChange(),_}}))}return _inherits(Quat,e),_createClass3(Quat,[{key:"x",get:function(){return this[0]},set:function(e){this._target[0]=e,this.onChange()}},{key:"y",get:function(){return this[1]},set:function(e){this._target[1]=e,this.onChange()}},{key:"z",get:function(){return this[2]},set:function(e){this._target[2]=e,this.onChange()}},{key:"w",get:function(){return this[3]},set:function(e){this._target[3]=e,this.onChange()}},{key:"identity",value:function(){return function(e){e[0]=0,e[1]=0,e[2]=0,e[3]=1}(this._target),this.onChange(),this}},{key:"set",value:function(e,l,_,S){return e.length?this.copy(e):(set$2(this._target,e,l,_,S),this.onChange(),this)}},{key:"rotateX",value:function(e){return function(e,l,_){_*=.5;var S=l[0],k=l[1],E=l[2],T=l[3],M=Math.sin(_),R=Math.cos(_);e[0]=S*R+T*M,e[1]=k*R+E*M,e[2]=E*R-k*M,e[3]=T*R-S*M}(this._target,this._target,e),this.onChange(),this}},{key:"rotateY",value:function(e){return function(e,l,_){_*=.5;var S=l[0],k=l[1],E=l[2],T=l[3],M=Math.sin(_),R=Math.cos(_);e[0]=S*R-E*M,e[1]=k*R+T*M,e[2]=E*R+S*M,e[3]=T*R-k*M}(this._target,this._target,e),this.onChange(),this}},{key:"rotateZ",value:function(e){return function(e,l,_){_*=.5;var S=l[0],k=l[1],E=l[2],T=l[3],M=Math.sin(_),R=Math.cos(_);e[0]=S*R+k*M,e[1]=k*R-S*M,e[2]=E*R+T*M,e[3]=T*R-E*M}(this._target,this._target,e),this.onChange(),this}},{key:"inverse",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._target;return function(e,l){var _=l[0],S=l[1],k=l[2],E=l[3],T=_*_+S*S+k*k+E*E,M=T?1/T:0;e[0]=-_*M,e[1]=-S*M,e[2]=-k*M,e[3]=E*M}(this._target,e),this.onChange(),this}},{key:"conjugate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._target;return function(e,l){e[0]=-l[0],e[1]=-l[1],e[2]=-l[2],e[3]=l[3]}(this._target,e),this.onChange(),this}},{key:"copy",value:function(e){return copy$2(this._target,e),this.onChange(),this}},{key:"normalize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._target;return normalize$1(this._target,e),this.onChange(),this}},{key:"multiply",value:function(e,l){return l?multiply$2(this._target,e,l):multiply$2(this._target,this._target,e),this.onChange(),this}},{key:"dot",value:function(e){return _dot(this._target,e)}},{key:"fromMatrix3",value:function(e){return function(e,l){var _,S=l[0]+l[4]+l[8];if(S>0)_=Math.sqrt(S+1),e[3]=.5*_,_=.5/_,e[0]=(l[5]-l[7])*_,e[1]=(l[6]-l[2])*_,e[2]=(l[1]-l[3])*_;else{var k=0;l[4]>l[0]&&(k=1),l[8]>l[3*k+k]&&(k=2);var E=(k+1)%3,T=(k+2)%3;_=Math.sqrt(l[3*k+k]-l[3*E+E]-l[3*T+T]+1),e[k]=.5*_,_=.5/_,e[3]=(l[3*E+T]-l[3*T+E])*_,e[E]=(l[3*E+k]+l[3*k+E])*_,e[T]=(l[3*T+k]+l[3*k+T])*_}}(this._target,e),this.onChange(),this}},{key:"fromEuler",value:function(e,l){return function(e,l){var _=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"YXZ",S=Math.sin(.5*l[0]),k=Math.cos(.5*l[0]),E=Math.sin(.5*l[1]),T=Math.cos(.5*l[1]),M=Math.sin(.5*l[2]),R=Math.cos(.5*l[2]);"XYZ"===_?(e[0]=S*T*R+k*E*M,e[1]=k*E*R-S*T*M,e[2]=k*T*M+S*E*R,e[3]=k*T*R-S*E*M):"YXZ"===_?(e[0]=S*T*R+k*E*M,e[1]=k*E*R-S*T*M,e[2]=k*T*M-S*E*R,e[3]=k*T*R+S*E*M):"ZXY"===_?(e[0]=S*T*R-k*E*M,e[1]=k*E*R+S*T*M,e[2]=k*T*M+S*E*R,e[3]=k*T*R-S*E*M):"ZYX"===_?(e[0]=S*T*R-k*E*M,e[1]=k*E*R+S*T*M,e[2]=k*T*M-S*E*R,e[3]=k*T*R+S*E*M):"YZX"===_?(e[0]=S*T*R+k*E*M,e[1]=k*E*R+S*T*M,e[2]=k*T*M-S*E*R,e[3]=k*T*R-S*E*M):"XZY"===_&&(e[0]=S*T*R-k*E*M,e[1]=k*E*R-S*T*M,e[2]=k*T*M+S*E*R,e[3]=k*T*R+S*E*M)}(this._target,e,e.order),l||this.onChange(),this}},{key:"fromAxisAngle",value:function(e,l){return function(e,l,_){_*=.5;var S=Math.sin(_);e[0]=S*l[0],e[1]=S*l[1],e[2]=S*l[2],e[3]=Math.cos(_)}(this._target,e,l),this.onChange(),this}},{key:"slerp",value:function(e,l){return function(e,l,_,S){var k,E,T,M,R,I=l[0],D=l[1],O=l[2],L=l[3],U=_[0],B=_[1],z=_[2],G=_[3];(E=I*U+D*B+O*z+L*G)<0&&(E=-E,U=-U,B=-B,z=-z,G=-G),1-E>1e-6?(k=Math.acos(E),T=Math.sin(k),M=Math.sin((1-S)*k)/T,R=Math.sin(S*k)/T):(M=1-S,R=S),e[0]=M*I+R*U,e[1]=M*D+R*B,e[2]=M*O+R*z,e[3]=M*L+R*G}(this._target,this._target,e,l),this.onChange(),this}},{key:"fromArray",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._target[0]=e[l],this._target[1]=e[l+1],this._target[2]=e[l+2],this._target[3]=e[l+3],this.onChange(),this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[l]=this[0],e[l+1]=this[1],e[l+2]=this[2],e[l+3]=this[3],e}}])}(_wrapNativeSuper(Array));function _determinant(e){var l=e[0],_=e[1],S=e[2],k=e[3],E=e[4],T=e[5],M=e[6],R=e[7],I=e[8],D=e[9],O=e[10],L=e[11],U=e[12],B=e[13],z=e[14],G=e[15];return(l*T-_*E)*(O*G-L*z)-(l*M-S*E)*(D*G-L*B)+(l*R-k*E)*(D*z-O*B)+(_*M-S*T)*(I*G-L*U)-(_*R-k*T)*(I*z-O*U)+(S*R-k*M)*(I*B-D*U)}function multiply$1(e,l,_){var S=l[0],k=l[1],E=l[2],T=l[3],M=l[4],R=l[5],I=l[6],D=l[7],O=l[8],L=l[9],U=l[10],B=l[11],z=l[12],G=l[13],j=l[14],H=l[15],V=_[0],W=_[1],q=_[2],X=_[3];return e[0]=V*S+W*M+q*O+X*z,e[1]=V*k+W*R+q*L+X*G,e[2]=V*E+W*I+q*U+X*j,e[3]=V*T+W*D+q*B+X*H,V=_[4],W=_[5],q=_[6],X=_[7],e[4]=V*S+W*M+q*O+X*z,e[5]=V*k+W*R+q*L+X*G,e[6]=V*E+W*I+q*U+X*j,e[7]=V*T+W*D+q*B+X*H,V=_[8],W=_[9],q=_[10],X=_[11],e[8]=V*S+W*M+q*O+X*z,e[9]=V*k+W*R+q*L+X*G,e[10]=V*E+W*I+q*U+X*j,e[11]=V*T+W*D+q*B+X*H,V=_[12],W=_[13],q=_[14],X=_[15],e[12]=V*S+W*M+q*O+X*z,e[13]=V*k+W*R+q*L+X*G,e[14]=V*E+W*I+q*U+X*j,e[15]=V*T+W*D+q*B+X*H,e}function _getScaling(e,l){var _=l[0],S=l[1],k=l[2],E=l[4],T=l[5],M=l[6],R=l[8],I=l[9],D=l[10];return e[0]=Math.hypot(_,S,k),e[1]=Math.hypot(E,T,M),e[2]=Math.hypot(R,I,D),e}var wh,xh=(wh=[1,1,1],function(e,l){var _=wh;_getScaling(_,l);var S=1/_[0],k=1/_[1],E=1/_[2],T=l[0]*S,M=l[1]*k,R=l[2]*E,I=l[4]*S,D=l[5]*k,O=l[6]*E,L=l[8]*S,U=l[9]*k,B=l[10]*E,z=T+D+B,G=0;return z>0?(G=2*Math.sqrt(z+1),e[3]=.25*G,e[0]=(O-U)/G,e[1]=(L-R)/G,e[2]=(M-I)/G):T>D&&T>B?(G=2*Math.sqrt(1+T-D-B),e[3]=(O-U)/G,e[0]=.25*G,e[1]=(M+I)/G,e[2]=(L+R)/G):D>B?(G=2*Math.sqrt(1+D-T-B),e[3]=(L-R)/G,e[0]=(M+I)/G,e[1]=.25*G,e[2]=(O+U)/G):(G=2*Math.sqrt(1+B-T-D),e[3]=(M-I)/G,e[0]=(L+R)/G,e[1]=(O+U)/G,e[2]=.25*G),e});function _add(e,l,_){return e[0]=l[0]+_[0],e[1]=l[1]+_[1],e[2]=l[2]+_[2],e[3]=l[3]+_[3],e[4]=l[4]+_[4],e[5]=l[5]+_[5],e[6]=l[6]+_[6],e[7]=l[7]+_[7],e[8]=l[8]+_[8],e[9]=l[9]+_[9],e[10]=l[10]+_[10],e[11]=l[11]+_[11],e[12]=l[12]+_[12],e[13]=l[13]+_[13],e[14]=l[14]+_[14],e[15]=l[15]+_[15],e}function subtract(e,l,_){return e[0]=l[0]-_[0],e[1]=l[1]-_[1],e[2]=l[2]-_[2],e[3]=l[3]-_[3],e[4]=l[4]-_[4],e[5]=l[5]-_[5],e[6]=l[6]-_[6],e[7]=l[7]-_[7],e[8]=l[8]-_[8],e[9]=l[9]-_[9],e[10]=l[10]-_[10],e[11]=l[11]-_[11],e[12]=l[12]-_[12],e[13]=l[13]-_[13],e[14]=l[14]-_[14],e[15]=l[15]-_[15],e}var kh=function(e){function Mat4(){var e,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,k=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,E=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,T=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,M=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,R=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,I=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,D=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,O=arguments.length>10&&void 0!==arguments[10]?arguments[10]:1,L=arguments.length>11&&void 0!==arguments[11]?arguments[11]:0,U=arguments.length>12&&void 0!==arguments[12]?arguments[12]:0,B=arguments.length>13&&void 0!==arguments[13]?arguments[13]:0,z=arguments.length>14&&void 0!==arguments[14]?arguments[14]:0,G=arguments.length>15&&void 0!==arguments[15]?arguments[15]:1;return _classCallCheck3(this,Mat4),_possibleConstructorReturn(e=_callSuper(this,Mat4,[l,_,S,k,E,T,M,R,I,D,O,L,U,B,z,G]),e)}return _inherits(Mat4,e),_createClass3(Mat4,[{key:"x",get:function(){return this[12]},set:function(e){this[12]=e}},{key:"y",get:function(){return this[13]},set:function(e){this[13]=e}},{key:"z",get:function(){return this[14]},set:function(e){this[14]=e}},{key:"w",get:function(){return this[15]},set:function(e){this[15]=e}},{key:"set",value:function(e,l,_,S,k,E,T,M,R,I,D,O,L,U,B,z){return e.length?this.copy(e):(function(e,l,_,S,k,E,T,M,R,I,D,O,L,U,B,z,G){e[0]=l,e[1]=_,e[2]=S,e[3]=k,e[4]=E,e[5]=T,e[6]=M,e[7]=R,e[8]=I,e[9]=D,e[10]=O,e[11]=L,e[12]=U,e[13]=B,e[14]=z,e[15]=G}(this,e,l,_,S,k,E,T,M,R,I,D,O,L,U,B,z),this)}},{key:"translate",value:function(e){return function(e,l,_){var S,k,E,T,M,R,I,D,O,L,U,B,z=_[0],G=_[1],j=_[2];l===e?(e[12]=l[0]*z+l[4]*G+l[8]*j+l[12],e[13]=l[1]*z+l[5]*G+l[9]*j+l[13],e[14]=l[2]*z+l[6]*G+l[10]*j+l[14],e[15]=l[3]*z+l[7]*G+l[11]*j+l[15]):(S=l[0],k=l[1],E=l[2],T=l[3],M=l[4],R=l[5],I=l[6],D=l[7],O=l[8],L=l[9],U=l[10],B=l[11],e[0]=S,e[1]=k,e[2]=E,e[3]=T,e[4]=M,e[5]=R,e[6]=I,e[7]=D,e[8]=O,e[9]=L,e[10]=U,e[11]=B,e[12]=S*z+M*G+O*j+l[12],e[13]=k*z+R*G+L*j+l[13],e[14]=E*z+I*G+U*j+l[14],e[15]=T*z+D*G+B*j+l[15])}(this,arguments.length>1&&void 0!==arguments[1]?arguments[1]:this,e),this}},{key:"rotate",value:function(e,l){return function(e,l,_,S){var k,E,T,M,R,I,D,O,L,U,B,z,G,j,H,V,W,q,X,K,Y,Q,J,Z,$=S[0],ee=S[1],te=S[2],re=Math.hypot($,ee,te);Math.abs(re)<1e-6||($*=re=1/re,ee*=re,te*=re,k=Math.sin(_),T=1-(E=Math.cos(_)),M=l[0],R=l[1],I=l[2],D=l[3],O=l[4],L=l[5],U=l[6],B=l[7],z=l[8],G=l[9],j=l[10],H=l[11],V=$*$*T+E,W=ee*$*T+te*k,q=te*$*T-ee*k,X=$*ee*T-te*k,K=ee*ee*T+E,Y=te*ee*T+$*k,Q=$*te*T+ee*k,J=ee*te*T-$*k,Z=te*te*T+E,e[0]=M*V+O*W+z*q,e[1]=R*V+L*W+G*q,e[2]=I*V+U*W+j*q,e[3]=D*V+B*W+H*q,e[4]=M*X+O*K+z*Y,e[5]=R*X+L*K+G*Y,e[6]=I*X+U*K+j*Y,e[7]=D*X+B*K+H*Y,e[8]=M*Q+O*J+z*Z,e[9]=R*Q+L*J+G*Z,e[10]=I*Q+U*J+j*Z,e[11]=D*Q+B*J+H*Z,l!==e&&(e[12]=l[12],e[13]=l[13],e[14]=l[14],e[15]=l[15]))}(this,arguments.length>2&&void 0!==arguments[2]?arguments[2]:this,e,l),this}},{key:"scale",value:function(e){return function(e,l,_){var S=_[0],k=_[1],E=_[2];e[0]=l[0]*S,e[1]=l[1]*S,e[2]=l[2]*S,e[3]=l[3]*S,e[4]=l[4]*k,e[5]=l[5]*k,e[6]=l[6]*k,e[7]=l[7]*k,e[8]=l[8]*E,e[9]=l[9]*E,e[10]=l[10]*E,e[11]=l[11]*E,e[12]=l[12],e[13]=l[13],e[14]=l[14],e[15]=l[15]}(this,arguments.length>1&&void 0!==arguments[1]?arguments[1]:this,"number"==typeof e?[e,e,e]:e),this}},{key:"add",value:function(e,l){return l?_add(this,e,l):_add(this,this,e),this}},{key:"sub",value:function(e,l){return l?subtract(this,e,l):subtract(this,this,e),this}},{key:"multiply",value:function(e,l){return e.length?l?multiply$1(this,e,l):multiply$1(this,this,e):function(e,l,_){e[0]=l[0]*_,e[1]=l[1]*_,e[2]=l[2]*_,e[3]=l[3]*_,e[4]=l[4]*_,e[5]=l[5]*_,e[6]=l[6]*_,e[7]=l[7]*_,e[8]=l[8]*_,e[9]=l[9]*_,e[10]=l[10]*_,e[11]=l[11]*_,e[12]=l[12]*_,e[13]=l[13]*_,e[14]=l[14]*_,e[15]=l[15]*_}(this,this,e),this}},{key:"identity",value:function(){return function(e){e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1}(this),this}},{key:"copy",value:function(e){return function(e,l){e[0]=l[0],e[1]=l[1],e[2]=l[2],e[3]=l[3],e[4]=l[4],e[5]=l[5],e[6]=l[6],e[7]=l[7],e[8]=l[8],e[9]=l[9],e[10]=l[10],e[11]=l[11],e[12]=l[12],e[13]=l[13],e[14]=l[14],e[15]=l[15]}(this,e),this}},{key:"fromPerspective",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,l,_,S,k){var E=1/Math.tan(l/2),T=1/(S-k);e[0]=E/_,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=E,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(k+S)*T,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*k*S*T,e[15]=0}(this,e.fov,e.aspect,e.near,e.far),this}},{key:"fromOrthogonal",value:function(e){return function(e,l,_,S,k,E,T){var M=1/(l-_),R=1/(S-k),I=1/(E-T);e[0]=-2*M,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*R,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*I,e[11]=0,e[12]=(l+_)*M,e[13]=(k+S)*R,e[14]=(T+E)*I,e[15]=1}(this,e.left,e.right,e.bottom,e.top,e.near,e.far),this}},{key:"fromQuaternion",value:function(e){return function(e,l){var _=l[0],S=l[1],k=l[2],E=l[3],T=_+_,M=S+S,R=k+k,I=_*T,D=S*T,O=S*M,L=k*T,U=k*M,B=k*R,z=E*T,G=E*M,j=E*R;e[0]=1-O-B,e[1]=D+j,e[2]=L-G,e[3]=0,e[4]=D-j,e[5]=1-I-B,e[6]=U+z,e[7]=0,e[8]=L+G,e[9]=U-z,e[10]=1-I-O,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1}(this,e),this}},{key:"setPosition",value:function(e){return this.x=e[0],this.y=e[1],this.z=e[2],this}},{key:"inverse",value:function(){return function(e,l){var _=l[0],S=l[1],k=l[2],E=l[3],T=l[4],M=l[5],R=l[6],I=l[7],D=l[8],O=l[9],L=l[10],U=l[11],B=l[12],z=l[13],G=l[14],j=l[15],H=_*M-S*T,V=_*R-k*T,W=_*I-E*T,q=S*R-k*M,X=S*I-E*M,K=k*I-E*R,Y=D*z-O*B,Q=D*G-L*B,J=D*j-U*B,Z=O*G-L*z,$=O*j-U*z,ee=L*j-U*G,te=H*ee-V*$+W*Z+q*J-X*Q+K*Y;te&&(te=1/te,e[0]=(M*ee-R*$+I*Z)*te,e[1]=(k*$-S*ee-E*Z)*te,e[2]=(z*K-G*X+j*q)*te,e[3]=(L*X-O*K-U*q)*te,e[4]=(R*J-T*ee-I*Q)*te,e[5]=(_*ee-k*J+E*Q)*te,e[6]=(G*W-B*K-j*V)*te,e[7]=(D*K-L*W+U*V)*te,e[8]=(T*$-M*J+I*Y)*te,e[9]=(S*J-_*$-E*Y)*te,e[10]=(B*X-z*W+j*H)*te,e[11]=(O*W-D*X-U*H)*te,e[12]=(M*Q-T*Z-R*Y)*te,e[13]=(_*Z-S*Q+k*Y)*te,e[14]=(z*V-B*q-G*H)*te,e[15]=(D*q-O*V+L*H)*te)}(this,arguments.length>0&&void 0!==arguments[0]?arguments[0]:this),this}},{key:"compose",value:function(e,l,_){var S,k,E,T,M,R,I,D,O,L,U,B,z,G,j,H,V,W,q,X,K,Y,Q;return k=l,E=_,T=this,M=(S=e)[0],R=S[1],I=S[2],D=S[3],B=M*(O=M+M),z=M*(L=R+R),G=M*(U=I+I),j=R*L,H=R*U,V=I*U,W=D*O,q=D*L,X=D*U,K=E[0],Y=E[1],Q=E[2],T[0]=(1-(j+V))*K,T[1]=(z+X)*K,T[2]=(G-q)*K,T[3]=0,T[4]=(z-X)*Y,T[5]=(1-(B+V))*Y,T[6]=(H+W)*Y,T[7]=0,T[8]=(G+q)*Q,T[9]=(H-W)*Q,T[10]=(1-(B+j))*Q,T[11]=0,T[12]=k[0],T[13]=k[1],T[14]=k[2],T[15]=1,this}},{key:"decompose",value:function(e,l,_){return function(e,l,_,S){var k=length([e[0],e[1],e[2]]),E=length([e[4],e[5],e[6]]),T=length([e[8],e[9],e[10]]);_determinant(e)<0&&(k=-k),_[0]=e[12],_[1]=e[13],_[2]=e[14];var M=e.slice(),R=1/k,I=1/E,D=1/T;M[0]*=R,M[1]*=R,M[2]*=R,M[4]*=I,M[5]*=I,M[6]*=I,M[8]*=D,M[9]*=D,M[10]*=D,xh(l,M),S[0]=k,S[1]=E,S[2]=T}(this,e,l,_),this}},{key:"getRotation",value:function(e){return xh(e,this),this}},{key:"getTranslation",value:function(e){return function(e,l){e[0]=l[12],e[1]=l[13],e[2]=l[14]}(e,this),this}},{key:"getScaling",value:function(e){return _getScaling(e,this),this}},{key:"getMaxScaleOnAxis",value:function(){return l=(e=this)[0],_=e[1],S=e[2],k=e[4],E=e[5],T=e[6],M=e[8],R=e[9],I=e[10],D=l*l+_*_+S*S,O=k*k+E*E+T*T,L=M*M+R*R+I*I,Math.sqrt(Math.max(D,O,L));var e,l,_,S,k,E,T,M,R,I,D,O,L}},{key:"lookAt",value:function(e,l,_){return function(e,l,_,S){var k=l[0],E=l[1],T=l[2],M=S[0],R=S[1],I=S[2],D=k-_[0],O=E-_[1],L=T-_[2],U=D*D+O*O+L*L;0===U?L=1:(D*=U=1/Math.sqrt(U),O*=U,L*=U);var B=R*L-I*O,z=I*D-M*L,G=M*O-R*D;0===(U=B*B+z*z+G*G)&&(I?M+=1e-6:R?I+=1e-6:R+=1e-6,U=(B=R*L-I*O)*B+(z=I*D-M*L)*z+(G=M*O-R*D)*G),B*=U=1/Math.sqrt(U),z*=U,G*=U,e[0]=B,e[1]=z,e[2]=G,e[3]=0,e[4]=O*G-L*z,e[5]=L*B-D*G,e[6]=D*z-O*B,e[7]=0,e[8]=D,e[9]=O,e[10]=L,e[11]=0,e[12]=k,e[13]=E,e[14]=T,e[15]=1}(this,e,l,_),this}},{key:"determinant",value:function(){return _determinant(this)}},{key:"fromArray",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this[0]=e[l],this[1]=e[l+1],this[2]=e[l+2],this[3]=e[l+3],this[4]=e[l+4],this[5]=e[l+5],this[6]=e[l+6],this[7]=e[l+7],this[8]=e[l+8],this[9]=e[l+9],this[10]=e[l+10],this[11]=e[l+11],this[12]=e[l+12],this[13]=e[l+13],this[14]=e[l+14],this[15]=e[l+15],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[l]=this[0],e[l+1]=this[1],e[l+2]=this[2],e[l+3]=this[3],e[l+4]=this[4],e[l+5]=this[5],e[l+6]=this[6],e[l+7]=this[7],e[l+8]=this[8],e[l+9]=this[9],e[l+10]=this[10],e[l+11]=this[11],e[l+12]=this[12],e[l+13]=this[13],e[l+14]=this[14],e[l+15]=this[15],e}}])}(_wrapNativeSuper(Array));var Ah=new kh,Eh=function(e){function Euler(){var e,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l,S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l,k=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"YXZ";_classCallCheck3(this,Euler),(e=_callSuper(this,Euler,[l,_,S])).order=k,e.onChange=function(){},e._target=e;var E=["0","1","2"];return _possibleConstructorReturn(e,new Proxy(e,{set:function(e,l){var _=Reflect.set.apply(Reflect,arguments);return _&&E.includes(l)&&e.onChange(),_}}))}return _inherits(Euler,e),_createClass3(Euler,[{key:"x",get:function(){return this[0]},set:function(e){this._target[0]=e,this.onChange()}},{key:"y",get:function(){return this[1]},set:function(e){this._target[1]=e,this.onChange()}},{key:"z",get:function(){return this[2]},set:function(e){this._target[2]=e,this.onChange()}},{key:"set",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,_=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;return e.length?this.copy(e):(this._target[0]=e,this._target[1]=l,this._target[2]=_,this.onChange(),this)}},{key:"copy",value:function(e){return this._target[0]=e[0],this._target[1]=e[1],this._target[2]=e[2],this.onChange(),this}},{key:"reorder",value:function(e){return this._target.order=e,this.onChange(),this}},{key:"fromRotationMatrix",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.order;return function(e,l){var _=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"YXZ";"XYZ"===_?(e[1]=Math.asin(Math.min(Math.max(l[8],-1),1)),Math.abs(l[8])<.99999?(e[0]=Math.atan2(-l[9],l[10]),e[2]=Math.atan2(-l[4],l[0])):(e[0]=Math.atan2(l[6],l[5]),e[2]=0)):"YXZ"===_?(e[0]=Math.asin(-Math.min(Math.max(l[9],-1),1)),Math.abs(l[9])<.99999?(e[1]=Math.atan2(l[8],l[10]),e[2]=Math.atan2(l[1],l[5])):(e[1]=Math.atan2(-l[2],l[0]),e[2]=0)):"ZXY"===_?(e[0]=Math.asin(Math.min(Math.max(l[6],-1),1)),Math.abs(l[6])<.99999?(e[1]=Math.atan2(-l[2],l[10]),e[2]=Math.atan2(-l[4],l[5])):(e[1]=0,e[2]=Math.atan2(l[1],l[0]))):"ZYX"===_?(e[1]=Math.asin(-Math.min(Math.max(l[2],-1),1)),Math.abs(l[2])<.99999?(e[0]=Math.atan2(l[6],l[10]),e[2]=Math.atan2(l[1],l[0])):(e[0]=0,e[2]=Math.atan2(-l[4],l[5]))):"YZX"===_?(e[2]=Math.asin(Math.min(Math.max(l[1],-1),1)),Math.abs(l[1])<.99999?(e[0]=Math.atan2(-l[9],l[5]),e[1]=Math.atan2(-l[2],l[0])):(e[0]=0,e[1]=Math.atan2(l[8],l[10]))):"XZY"===_&&(e[2]=Math.asin(-Math.min(Math.max(l[4],-1),1)),Math.abs(l[4])<.99999?(e[0]=Math.atan2(l[6],l[5]),e[1]=Math.atan2(l[8],l[0])):(e[0]=Math.atan2(-l[9],l[10]),e[1]=0))}(this._target,e,l),this.onChange(),this}},{key:"fromQuaternion",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.order,_=arguments.length>2?arguments[2]:void 0;return Ah.fromQuaternion(e),this._target.fromRotationMatrix(Ah,l),_||this.onChange(),this}},{key:"fromArray",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._target[0]=e[l],this._target[1]=e[l+1],this._target[2]=e[l+2],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[l]=this[0],e[l+1]=this[1],e[l+2]=this[2],e}}])}(_wrapNativeSuper(Array)),Ch=function(){return _createClass3(function Transform(){var e=this;_classCallCheck3(this,Transform),this.parent=null,this.children=[],this.visible=!0,this.matrix=new kh,this.worldMatrix=new kh,this.matrixAutoUpdate=!0,this.worldMatrixNeedsUpdate=!1,this.position=new uh,this.quaternion=new Sh,this.scale=new uh(1),this.rotation=new Eh,this.up=new uh(0,1,0),this.rotation._target.onChange=function(){return e.quaternion.fromEuler(e.rotation,!0)},this.quaternion._target.onChange=function(){return e.rotation.fromQuaternion(e.quaternion,void 0,!0)}},[{key:"setParent",value:function(e){var l=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.parent&&e!==this.parent&&this.parent.removeChild(this,!1),this.parent=e,l&&e&&e.addChild(this,!1)}},{key:"addChild",value:function(e){var l=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];~this.children.indexOf(e)||this.children.push(e),l&&e.setParent(this,!1)}},{key:"removeChild",value:function(e){var l=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];~this.children.indexOf(e)&&this.children.splice(this.children.indexOf(e),1),l&&e.setParent(null,!1)}},{key:"updateMatrixWorld",value:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.worldMatrixNeedsUpdate||e)&&(null===this.parent?this.worldMatrix.copy(this.matrix):this.worldMatrix.multiply(this.parent.worldMatrix,this.matrix),this.worldMatrixNeedsUpdate=!1,e=!0);for(var l=0,_=this.children.length;l<_;l++)this.children[l].updateMatrixWorld(e)}},{key:"updateMatrix",value:function(){this.matrix.compose(this.quaternion,this.position,this.scale),this.worldMatrixNeedsUpdate=!0}},{key:"traverse",value:function(e){if(!e(this))for(var l=0,_=this.children.length;l<_;l++)this.children[l].traverse(e)}},{key:"decompose",value:function(){this.matrix.decompose(this.quaternion._target,this.position,this.scale),this.rotation.fromQuaternion(this.quaternion)}},{key:"lookAt",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]?this.matrix.lookAt(this.position,e,this.up):this.matrix.lookAt(e,this.position,this.up),this.matrix.getRotation(this.quaternion._target),this.rotation.fromQuaternion(this.quaternion)}}])}();I("aW",Ch);var Th=new kh,Mh=new uh,Rh=new uh,Ih=function(e){function Camera(e){var l,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},S=_.near,k=void 0===S?.1:S,E=_.far,T=void 0===E?100:E,M=_.fov,R=void 0===M?45:M,I=_.aspect,D=void 0===I?1:I,O=_.left,L=_.right,U=_.bottom,B=_.top,z=_.zoom,G=void 0===z?1:z;return _classCallCheck3(this,Camera),l=_callSuper(this,Camera),Object.assign(l,{near:k,far:T,fov:R,aspect:D,left:O,right:L,bottom:U,top:B,zoom:G}),l.projectionMatrix=new kh,l.viewMatrix=new kh,l.projectionViewMatrix=new kh,l.worldPosition=new uh,l.type=O||L?"orthographic":"perspective","orthographic"===l.type?l.orthographic():l.perspective(),l}return _inherits(Camera,e),_createClass3(Camera,[{key:"perspective",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=e.near,_=void 0===l?this.near:l,S=e.far,k=void 0===S?this.far:S,E=e.fov,T=void 0===E?this.fov:E,M=e.aspect,R=void 0===M?this.aspect:M;return Object.assign(this,{near:_,far:k,fov:T,aspect:R}),this.projectionMatrix.fromPerspective({fov:T*(Math.PI/180),aspect:R,near:_,far:k}),this.type="perspective",this}},{key:"orthographic",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=e.near,_=void 0===l?this.near:l,S=e.far,k=void 0===S?this.far:S,E=e.left,T=void 0===E?this.left||-1:E,M=e.right,R=void 0===M?this.right||1:M,I=e.bottom,D=void 0===I?this.bottom||-1:I,O=e.top,L=void 0===O?this.top||1:O,U=e.zoom,B=void 0===U?this.zoom:U;return Object.assign(this,{near:_,far:k,left:T,right:R,bottom:D,top:L,zoom:B}),T/=B,R/=B,D/=B,L/=B,this.projectionMatrix.fromOrthogonal({left:T,right:R,bottom:D,top:L,near:_,far:k}),this.type="orthographic",this}},{key:"updateMatrixWorld",value:function(){return _superPropGet(Camera,"updateMatrixWorld",this,3)([]),this.viewMatrix.inverse(this.worldMatrix),this.worldMatrix.getTranslation(this.worldPosition),this.projectionViewMatrix.multiply(this.projectionMatrix,this.viewMatrix),this}},{key:"updateProjectionMatrix",value:function(){return"perspective"===this.type?this.perspective():this.orthographic()}},{key:"lookAt",value:function(e){return _superPropGet(Camera,"lookAt",this,3)([e,!0]),this}},{key:"project",value:function(e){return e.applyMatrix4(this.viewMatrix),e.applyMatrix4(this.projectionMatrix),this}},{key:"unproject",value:function(e){return e.applyMatrix4(Th.inverse(this.projectionMatrix)),e.applyMatrix4(this.worldMatrix),this}},{key:"updateFrustum",value:function(){this.frustum||(this.frustum=[new uh,new uh,new uh,new uh,new uh,new uh]);var e=this.projectionViewMatrix;this.frustum[0].set(e[3]-e[0],e[7]-e[4],e[11]-e[8]).constant=e[15]-e[12],this.frustum[1].set(e[3]+e[0],e[7]+e[4],e[11]+e[8]).constant=e[15]+e[12],this.frustum[2].set(e[3]+e[1],e[7]+e[5],e[11]+e[9]).constant=e[15]+e[13],this.frustum[3].set(e[3]-e[1],e[7]-e[5],e[11]-e[9]).constant=e[15]-e[13],this.frustum[4].set(e[3]-e[2],e[7]-e[6],e[11]-e[10]).constant=e[15]-e[14],this.frustum[5].set(e[3]+e[2],e[7]+e[6],e[11]+e[10]).constant=e[15]+e[14];for(var l=0;l<6;l++){var _=1/this.frustum[l].distance();this.frustum[l].multiply(_),this.frustum[l].constant*=_}}},{key:"frustumIntersectsMesh",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.worldMatrix;if(!e.geometry.attributes.position)return!0;if(e.geometry.bounds&&e.geometry.bounds.radius!==1/0||e.geometry.computeBoundingSphere(),!e.geometry.bounds)return!0;var _=Mh;_.copy(e.geometry.bounds.center),_.applyMatrix4(l);var S=e.geometry.bounds.radius*l.getMaxScaleOnAxis();return this.frustumIntersectsSphere(_,S)}},{key:"frustumIntersectsSphere",value:function(e,l){for(var _=Rh,S=0;S<6;S++){var k=this.frustum[S];if(_.copy(k).dot(e)+k.constant<-l)return!1}return!0}}])}(Ch);function _multiply(e,l,_){var S=l[0],k=l[1],E=l[2],T=l[3],M=l[4],R=l[5],I=l[6],D=l[7],O=l[8],L=_[0],U=_[1],B=_[2],z=_[3],G=_[4],j=_[5],H=_[6],V=_[7],W=_[8];return e[0]=L*S+U*T+B*I,e[1]=L*k+U*M+B*D,e[2]=L*E+U*R+B*O,e[3]=z*S+G*T+j*I,e[4]=z*k+G*M+j*D,e[5]=z*E+G*R+j*O,e[6]=H*S+V*T+W*I,e[7]=H*k+V*M+W*D,e[8]=H*E+V*R+W*O,e}I("aV",Ih);var Ph=function(e){function Mat3(){var e,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,k=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,E=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,T=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,M=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,R=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,I=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1;return _classCallCheck3(this,Mat3),_possibleConstructorReturn(e=_callSuper(this,Mat3,[l,_,S,k,E,T,M,R,I]),e)}return _inherits(Mat3,e),_createClass3(Mat3,[{key:"set",value:function(e,l,_,S,k,E,T,M,R){return e.length?this.copy(e):(function(e,l,_,S,k,E,T,M,R,I){e[0]=l,e[1]=_,e[2]=S,e[3]=k,e[4]=E,e[5]=T,e[6]=M,e[7]=R,e[8]=I}(this,e,l,_,S,k,E,T,M,R),this)}},{key:"translate",value:function(e){return function(e,l,_){var S=l[0],k=l[1],E=l[2],T=l[3],M=l[4],R=l[5],I=l[6],D=l[7],O=l[8],L=_[0],U=_[1];e[0]=S,e[1]=k,e[2]=E,e[3]=T,e[4]=M,e[5]=R,e[6]=L*S+U*T+I,e[7]=L*k+U*M+D,e[8]=L*E+U*R+O}(this,arguments.length>1&&void 0!==arguments[1]?arguments[1]:this,e),this}},{key:"rotate",value:function(e){return function(e,l,_){var S=l[0],k=l[1],E=l[2],T=l[3],M=l[4],R=l[5],I=l[6],D=l[7],O=l[8],L=Math.sin(_),U=Math.cos(_);e[0]=U*S+L*T,e[1]=U*k+L*M,e[2]=U*E+L*R,e[3]=U*T-L*S,e[4]=U*M-L*k,e[5]=U*R-L*E,e[6]=I,e[7]=D,e[8]=O}(this,arguments.length>1&&void 0!==arguments[1]?arguments[1]:this,e),this}},{key:"scale",value:function(e){return function(e,l,_){var S=_[0],k=_[1];e[0]=S*l[0],e[1]=S*l[1],e[2]=S*l[2],e[3]=k*l[3],e[4]=k*l[4],e[5]=k*l[5],e[6]=l[6],e[7]=l[7],e[8]=l[8]}(this,arguments.length>1&&void 0!==arguments[1]?arguments[1]:this,e),this}},{key:"multiply",value:function(e,l){return l?_multiply(this,e,l):_multiply(this,this,e),this}},{key:"identity",value:function(){return function(e){e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1}(this),this}},{key:"copy",value:function(e){return function(e,l){e[0]=l[0],e[1]=l[1],e[2]=l[2],e[3]=l[3],e[4]=l[4],e[5]=l[5],e[6]=l[6],e[7]=l[7],e[8]=l[8]}(this,e),this}},{key:"fromMatrix4",value:function(e){return function(e,l){e[0]=l[0],e[1]=l[1],e[2]=l[2],e[3]=l[4],e[4]=l[5],e[5]=l[6],e[6]=l[8],e[7]=l[9],e[8]=l[10]}(this,e),this}},{key:"fromQuaternion",value:function(e){return function(e,l){var _=l[0],S=l[1],k=l[2],E=l[3],T=_+_,M=S+S,R=k+k,I=_*T,D=S*T,O=S*M,L=k*T,U=k*M,B=k*R,z=E*T,G=E*M,j=E*R;e[0]=1-O-B,e[3]=D-j,e[6]=L+G,e[1]=D+j,e[4]=1-I-B,e[7]=U-z,e[2]=L-G,e[5]=U+z,e[8]=1-I-O}(this,e),this}},{key:"fromBasis",value:function(e,l,_){return this.set(e[0],e[1],e[2],l[0],l[1],l[2],_[0],_[1],_[2]),this}},{key:"inverse",value:function(){return function(e,l){var _=l[0],S=l[1],k=l[2],E=l[3],T=l[4],M=l[5],R=l[6],I=l[7],D=l[8],O=D*T-M*I,L=-D*E+M*R,U=I*E-T*R,B=_*O+S*L+k*U;B&&(B=1/B,e[0]=O*B,e[1]=(-D*S+k*I)*B,e[2]=(M*S-k*T)*B,e[3]=L*B,e[4]=(D*_-k*R)*B,e[5]=(-M*_+k*E)*B,e[6]=U*B,e[7]=(-I*_+S*R)*B,e[8]=(T*_-S*E)*B)}(this,arguments.length>0&&void 0!==arguments[0]?arguments[0]:this),this}},{key:"getNormalMatrix",value:function(e){return function(e,l){var _=l[0],S=l[1],k=l[2],E=l[3],T=l[4],M=l[5],R=l[6],I=l[7],D=l[8],O=l[9],L=l[10],U=l[11],B=l[12],z=l[13],G=l[14],j=l[15],H=_*M-S*T,V=_*R-k*T,W=_*I-E*T,q=S*R-k*M,X=S*I-E*M,K=k*I-E*R,Y=D*z-O*B,Q=D*G-L*B,J=D*j-U*B,Z=O*G-L*z,$=O*j-U*z,ee=L*j-U*G,te=H*ee-V*$+W*Z+q*J-X*Q+K*Y;te&&(te=1/te,e[0]=(M*ee-R*$+I*Z)*te,e[1]=(R*J-T*ee-I*Q)*te,e[2]=(T*$-M*J+I*Y)*te,e[3]=(k*$-S*ee-E*Z)*te,e[4]=(_*ee-k*J+E*Q)*te,e[5]=(S*J-_*$-E*Y)*te,e[6]=(z*K-G*X+j*q)*te,e[7]=(G*W-B*K-j*V)*te,e[8]=(B*X-z*W+j*H)*te)}(this,e),this}}])}(_wrapNativeSuper(Array)),Dh=0,Oh=function(e){function Mesh(e){var l,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},S=_.geometry,k=_.program,E=_.mode,T=void 0===E?e.TRIANGLES:E,M=_.frustumCulled,R=void 0===M||M,I=_.renderOrder,D=void 0===I?0:I;return _classCallCheck3(this,Mesh),l=_callSuper(this,Mesh),e.canvas,l.gl=e,l.id=Dh++,l.geometry=S,l.program=k,l.mode=T,l.frustumCulled=R,l.renderOrder=D,l.modelViewMatrix=new kh,l.normalMatrix=new Ph,l.beforeRenderCallbacks=[],l.afterRenderCallbacks=[],l}return _inherits(Mesh,e),_createClass3(Mesh,[{key:"onBeforeRender",value:function(e){return this.beforeRenderCallbacks.push(e),this}},{key:"onAfterRender",value:function(e){return this.afterRenderCallbacks.push(e),this}},{key:"draw",value:function(){var e=this,l=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).camera;l&&(this.program.uniforms.modelMatrix||Object.assign(this.program.uniforms,{modelMatrix:{value:null},viewMatrix:{value:null},modelViewMatrix:{value:null},normalMatrix:{value:null},projectionMatrix:{value:null},cameraPosition:{value:null}}),this.program.uniforms.projectionMatrix.value=l.projectionMatrix,this.program.uniforms.cameraPosition.value=l.worldPosition,this.program.uniforms.viewMatrix.value=l.viewMatrix,this.modelViewMatrix.multiply(l.viewMatrix,this.worldMatrix),this.normalMatrix.getNormalMatrix(this.modelViewMatrix),this.program.uniforms.modelMatrix.value=this.worldMatrix,this.program.uniforms.modelViewMatrix.value=this.modelViewMatrix,this.program.uniforms.normalMatrix.value=this.normalMatrix),this.beforeRenderCallbacks.forEach(function(_){return _&&_({mesh:e,camera:l})});var _=this.program.cullFace&&this.worldMatrix.determinant()<0;this.program.use({flipFaces:_}),this.geometry.draw({mode:this.mode,program:this.program}),this.afterRenderCallbacks.forEach(function(_){return _&&_({mesh:e,camera:l})})}}])}(Ch);I("a_",Oh);var Lh=new Uint8Array(4);function isPowerOf2(e){return!(e&e-1)}var Uh=1,Fh=function(){return _createClass3(function Texture(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_=l.image,S=l.target,k=void 0===S?e.TEXTURE_2D:S,E=l.type,T=void 0===E?e.UNSIGNED_BYTE:E,M=l.format,R=void 0===M?e.RGBA:M,I=l.internalFormat,D=void 0===I?R:I,O=l.wrapS,L=void 0===O?e.CLAMP_TO_EDGE:O,U=l.wrapT,B=void 0===U?e.CLAMP_TO_EDGE:U,z=l.wrapR,G=void 0===z?e.CLAMP_TO_EDGE:z,j=l.generateMipmaps,H=void 0===j?k===(e.TEXTURE_2D||e.TEXTURE_CUBE_MAP):j,V=l.minFilter,W=void 0===V?H?e.NEAREST_MIPMAP_LINEAR:e.LINEAR:V,q=l.magFilter,X=void 0===q?e.LINEAR:q,K=l.premultiplyAlpha,Y=void 0!==K&&K,Q=l.unpackAlignment,J=void 0===Q?4:Q,Z=l.flipY,$=void 0===Z?k==(e.TEXTURE_2D||e.TEXTURE_3D):Z,ee=l.anisotropy,te=void 0===ee?0:ee,re=l.level,ne=void 0===re?0:re,ie=l.width,ae=l.height,oe=void 0===ae?ie:ae,se=l.length,ue=void 0===se?1:se;_classCallCheck3(this,Texture),this.gl=e,this.id=Uh++,this.image=_,this.target=k,this.type=T,this.format=R,this.internalFormat=D,this.minFilter=W,this.magFilter=X,this.wrapS=L,this.wrapT=B,this.wrapR=G,this.generateMipmaps=H,this.premultiplyAlpha=Y,this.unpackAlignment=J,this.flipY=$,this.anisotropy=Math.min(te,this.gl.renderer.parameters.maxAnisotropy),this.level=ne,this.width=ie,this.height=oe,this.length=ue,this.texture=this.gl.createTexture(),this.store={image:null},this.glState=this.gl.renderer.state,this.state={},this.state.minFilter=this.gl.NEAREST_MIPMAP_LINEAR,this.state.magFilter=this.gl.LINEAR,this.state.wrapS=this.gl.REPEAT,this.state.wrapT=this.gl.REPEAT,this.state.anisotropy=0},[{key:"bind",value:function(){this.glState.textureUnits[this.glState.activeTextureUnit]!==this.id&&(this.gl.bindTexture(this.target,this.texture),this.glState.textureUnits[this.glState.activeTextureUnit]=this.id)}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,l=!(this.image===this.store.image&&!this.needsUpdate);if((l||this.glState.textureUnits[e]!==this.id)&&(this.gl.renderer.activeTexture(e),this.bind()),l){if(this.needsUpdate=!1,this.flipY!==this.glState.flipY&&(this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,this.flipY),this.glState.flipY=this.flipY),this.premultiplyAlpha!==this.glState.premultiplyAlpha&&(this.gl.pixelStorei(this.gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),this.glState.premultiplyAlpha=this.premultiplyAlpha),this.unpackAlignment!==this.glState.unpackAlignment&&(this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT,this.unpackAlignment),this.glState.unpackAlignment=this.unpackAlignment),this.minFilter!==this.state.minFilter&&(this.gl.texParameteri(this.target,this.gl.TEXTURE_MIN_FILTER,this.minFilter),this.state.minFilter=this.minFilter),this.magFilter!==this.state.magFilter&&(this.gl.texParameteri(this.target,this.gl.TEXTURE_MAG_FILTER,this.magFilter),this.state.magFilter=this.magFilter),this.wrapS!==this.state.wrapS&&(this.gl.texParameteri(this.target,this.gl.TEXTURE_WRAP_S,this.wrapS),this.state.wrapS=this.wrapS),this.wrapT!==this.state.wrapT&&(this.gl.texParameteri(this.target,this.gl.TEXTURE_WRAP_T,this.wrapT),this.state.wrapT=this.wrapT),this.wrapR!==this.state.wrapR&&(this.gl.texParameteri(this.target,this.gl.TEXTURE_WRAP_R,this.wrapR),this.state.wrapR=this.wrapR),this.anisotropy&&this.anisotropy!==this.state.anisotropy&&(this.gl.texParameterf(this.target,this.gl.renderer.getExtension("EXT_texture_filter_anisotropic").TEXTURE_MAX_ANISOTROPY_EXT,this.anisotropy),this.state.anisotropy=this.anisotropy),this.image){if(this.image.width&&(this.width=this.image.width,this.height=this.image.height),this.target===this.gl.TEXTURE_CUBE_MAP)for(var _=0;_<6;_++)this.gl.texImage2D(this.gl.TEXTURE_CUBE_MAP_POSITIVE_X+_,this.level,this.internalFormat,this.format,this.type,this.image[_]);else if(ArrayBuffer.isView(this.image))this.target===this.gl.TEXTURE_2D?this.gl.texImage2D(this.target,this.level,this.internalFormat,this.width,this.height,0,this.format,this.type,this.image):this.target!==this.gl.TEXTURE_2D_ARRAY&&this.target!==this.gl.TEXTURE_3D||this.gl.texImage3D(this.target,this.level,this.internalFormat,this.width,this.height,this.length,0,this.format,this.type,this.image);else if(this.image.isCompressedTexture)for(var S=0;S<this.image.length;S++)this.gl.compressedTexImage2D(this.target,S,this.internalFormat,this.image[S].width,this.image[S].height,0,this.image[S].data);else this.target===this.gl.TEXTURE_2D?this.gl.texImage2D(this.target,this.level,this.internalFormat,this.format,this.type,this.image):this.gl.texImage3D(this.target,this.level,this.internalFormat,this.width,this.height,this.length,0,this.format,this.type,this.image);this.generateMipmaps&&(this.gl.renderer.isWebgl2||isPowerOf2(this.image.width)&&isPowerOf2(this.image.height)?this.gl.generateMipmap(this.target):(this.generateMipmaps=!1,this.wrapS=this.wrapT=this.gl.CLAMP_TO_EDGE,this.minFilter=this.gl.LINEAR)),this.onUpdate&&this.onUpdate()}else if(this.target===this.gl.TEXTURE_CUBE_MAP)for(var k=0;k<6;k++)this.gl.texImage2D(this.gl.TEXTURE_CUBE_MAP_POSITIVE_X+k,0,this.gl.RGBA,1,1,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,Lh);else this.width?this.target===this.gl.TEXTURE_2D?this.gl.texImage2D(this.target,this.level,this.internalFormat,this.width,this.height,0,this.format,this.type,null):this.gl.texImage3D(this.target,this.level,this.internalFormat,this.width,this.height,this.length,0,this.format,this.type,null):this.gl.texImage2D(this.target,0,this.gl.RGBA,1,1,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,Lh);this.store.image=this.image}}}])}();I("aY",Fh);var Nh=function(e){function Plane(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_=l.width,S=void 0===_?1:_,k=l.height,E=void 0===k?1:k,T=l.widthSegments,M=void 0===T?1:T,R=l.heightSegments,I=void 0===R?1:R,D=l.attributes,O=void 0===D?{}:D;_classCallCheck3(this,Plane);var L=M,U=I,B=(L+1)*(U+1),z=L*U*6,G=new Float32Array(3*B),j=new Float32Array(3*B),H=new Float32Array(2*B),V=z>65536?new Uint32Array(z):new Uint16Array(z);return Plane.buildPlane(G,j,H,V,S,E,0,L,U),Object.assign(O,{position:{size:3,data:G},normal:{size:3,data:j},uv:{size:2,data:H},index:{data:V}}),_callSuper(this,Plane,[e,O])}return _inherits(Plane,e),_createClass3(Plane,null,[{key:"buildPlane",value:function(e,l,_,S,k,E,T,M,R){for(var I=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,D=arguments.length>10&&void 0!==arguments[10]?arguments[10]:1,O=arguments.length>11&&void 0!==arguments[11]?arguments[11]:2,L=arguments.length>12&&void 0!==arguments[12]?arguments[12]:1,U=arguments.length>13&&void 0!==arguments[13]?arguments[13]:-1,B=arguments.length>14&&void 0!==arguments[14]?arguments[14]:0,z=arguments.length>15&&void 0!==arguments[15]?arguments[15]:0,G=B,j=k/M,H=E/R,V=0;V<=R;V++)for(var W=V*H-E/2,q=0;q<=M;q++,B++){var X=q*j-k/2;if(e[3*B+I]=X*L,e[3*B+D]=W*U,e[3*B+O]=T/2,l[3*B+I]=0,l[3*B+D]=0,l[3*B+O]=T>=0?1:-1,_[2*B]=q/M,_[2*B+1]=1-V/R,V!==R&&q!==M){var K=G+q+V*(M+1),Y=G+q+(V+1)*(M+1),Q=G+q+(V+1)*(M+1)+1,J=G+q+V*(M+1)+1;S[6*z]=K,S[6*z+1]=Y,S[6*z+2]=J,S[6*z+3]=Y,S[6*z+4]=Q,S[6*z+5]=J,z++}}}}])}(fh);I("aX",Nh);var falsyToString=function(e){return"boolean"==typeof e?"".concat(e):0===e?"0":e},Bh=clsx,zh=(I("a$",function(e,l){return function(_){var S;if(null==(null==l?void 0:l.variants))return Bh(e,null==_?void 0:_.class,null==_?void 0:_.className);var k=l.variants,E=l.defaultVariants,T=Object.keys(k).map(function(e){var l=null==_?void 0:_[e],S=null==E?void 0:E[e];if(null===l)return null;var T=falsyToString(l)||falsyToString(S);return k[e][T]}),M=_&&Object.entries(_).reduce(function(e,l){var _=_slicedToArray(l,2),S=_[0],k=_[1];return void 0===k||(e[S]=k),e},{}),I=null==l||null===(S=l.compoundVariants)||void 0===S?void 0:S.reduce(function(e,l){var _=l.class,S=l.className,k=_objectWithoutProperties3(l,R);return Object.entries(k).every(function(e){var l=_slicedToArray(e,2),_=l[0],S=l[1];return Array.isArray(S)?S.includes(_objectSpread2(_objectSpread2({},E),M)[_]):_objectSpread2(_objectSpread2({},E),M)[_]===S})?[].concat(_toConsumableArray3(e),[_,S]):e},[]);return Bh(e,T,I,null==_?void 0:_.class,null==_?void 0:_.className)}}),"180"),Gh=I("bj",2),jh=100,Hh=301,Vh=302,Wh=306,qh=1e3,Xh=1001,Kh=1002,Yh=1003,Qh=1005,Jh=1006,Zh=1007,$h=1008,ed=1009,td=1010,rd=1011,nd=1012,id=1013,ad=1014,od=1015,sd=1016,ud=1017,ld=1018,cd=1020,hd=35902,dd=35899,fd=1023,pd=1026,vd=1027,gd=1029,md=1031,yd=1033,_d=33776,bd=33777,Sd=33778,wd=33779,xd=35840,kd=35841,Ad=35842,Ed=35843,Cd=36196,Td=37492,Md=37496,Rd=37808,Id=37809,Pd=37810,Dd=37811,Od=37812,Ld=37813,Ud=37814,Fd=37815,Nd=37816,Bd=37817,zd=37818,Gd=37819,jd=37820,Hd=37821,Vd=36492,Wd=36494,qd=36495,Xd=36283,Kd=36284,Yd=36285,Qd=36286,Jd=3200,Zd="",$d="srgb",ef="srgb-linear",tf="linear",rf="srgb",nf=7680,af="300 es",of=2e3,sf=2001,uf=function(){return _createClass3(function EventDispatcher(){_classCallCheck3(this,EventDispatcher)},[{key:"addEventListener",value:function(e,l){void 0===this._listeners&&(this._listeners={});var _=this._listeners;void 0===_[e]&&(_[e]=[]),-1===_[e].indexOf(l)&&_[e].push(l)}},{key:"hasEventListener",value:function(e,l){var _=this._listeners;return void 0!==_&&(void 0!==_[e]&&-1!==_[e].indexOf(l))}},{key:"removeEventListener",value:function(e,l){var _=this._listeners;if(void 0!==_){var S=_[e];if(void 0!==S){var k=S.indexOf(l);-1!==k&&S.splice(k,1)}}}},{key:"dispatchEvent",value:function(e){var l=this._listeners;if(void 0!==l){var _=l[e.type];if(void 0!==_){e.target=this;for(var S=_.slice(0),k=0,E=S.length;k<E;k++)S[k].call(this,e);e.target=null}}}}])}(),lf=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],cf=Math.PI/180,hf=180/Math.PI;function generateUUID(){var e=4294967295*Math.random()|0,l=4294967295*Math.random()|0,_=4294967295*Math.random()|0,S=4294967295*Math.random()|0;return(lf[255&e]+lf[e>>8&255]+lf[e>>16&255]+lf[e>>24&255]+"-"+lf[255&l]+lf[l>>8&255]+"-"+lf[l>>16&15|64]+lf[l>>24&255]+"-"+lf[63&_|128]+lf[_>>8&255]+"-"+lf[_>>16&255]+lf[_>>24&255]+lf[255&S]+lf[S>>8&255]+lf[S>>16&255]+lf[S>>24&255]).toLowerCase()}function _clamp2(e,l,_){return Math.max(l,Math.min(_,e))}function lerp(e,l,_){return(1-_)*e+_*l}function denormalize(e,l){switch(l.constructor){case Float32Array:return e;case Uint32Array:return e/4294967295;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int32Array:return Math.max(e/2147483647,-1);case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}function normalize(e,l){switch(l.constructor){case Float32Array:return e;case Uint32Array:return Math.round(4294967295*e);case Uint16Array:return Math.round(65535*e);case Uint8Array:return Math.round(255*e);case Int32Array:return Math.round(2147483647*e);case Int16Array:return Math.round(32767*e);case Int8Array:return Math.round(127*e);default:throw new Error("Invalid component type.")}}var df=function(){return _createClass3(function Vector2(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;_classCallCheck3(this,Vector2),Vector2.prototype.isVector2=!0,this.x=e,this.y=l},[{key:"width",get:function(){return this.x},set:function(e){this.x=e}},{key:"height",get:function(){return this.y},set:function(e){this.y=e}},{key:"set",value:function(e,l){return this.x=e,this.y=l,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setComponent",value:function(e,l){switch(e){case 0:this.x=l;break;case 1:this.y=l;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this}},{key:"add",value:function(e){return this.x+=e.x,this.y+=e.y,this}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this}},{key:"addVectors",value:function(e,l){return this.x=e.x+l.x,this.y=e.y+l.y,this}},{key:"addScaledVector",value:function(e,l){return this.x+=e.x*l,this.y+=e.y*l,this}},{key:"sub",value:function(e){return this.x-=e.x,this.y-=e.y,this}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this}},{key:"subVectors",value:function(e,l){return this.x=e.x-l.x,this.y=e.y-l.y,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this}},{key:"divide",value:function(e){return this.x/=e.x,this.y/=e.y,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"applyMatrix3",value:function(e){var l=this.x,_=this.y,S=e.elements;return this.x=S[0]*l+S[3]*_+S[6],this.y=S[1]*l+S[4]*_+S[7],this}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}},{key:"clamp",value:function(e,l){return this.x=_clamp2(this.x,e.x,l.x),this.y=_clamp2(this.y,e.y,l.y),this}},{key:"clampScalar",value:function(e,l){return this.x=_clamp2(this.x,e,l),this.y=_clamp2(this.y,e,l),this}},{key:"clampLength",value:function(e,l){var _=this.length();return this.divideScalar(_||1).multiplyScalar(_clamp2(_,e,l))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},{key:"roundToZero",value:function(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y}},{key:"cross",value:function(e){return this.x*e.y-this.y*e.x}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"angle",value:function(){var e=Math.atan2(-this.y,-this.x)+Math.PI;return e}},{key:"angleTo",value:function(e){var l=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===l)return Math.PI/2;var _=this.dot(e)/l;return Math.acos(_clamp2(_,-1,1))}},{key:"distanceTo",value:function(e){return Math.sqrt(this.distanceToSquared(e))}},{key:"distanceToSquared",value:function(e){var l=this.x-e.x,_=this.y-e.y;return l*l+_*_}},{key:"manhattanDistanceTo",value:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,l){return this.x+=(e.x-this.x)*l,this.y+=(e.y-this.y)*l,this}},{key:"lerpVectors",value:function(e,l,_){return this.x=e.x+(l.x-e.x)*_,this.y=e.y+(l.y-e.y)*_,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y}},{key:"fromArray",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[l],this.y=e[l+1],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[l]=this.x,e[l+1]=this.y,e}},{key:"fromBufferAttribute",value:function(e,l){return this.x=e.getX(l),this.y=e.getY(l),this}},{key:"rotateAround",value:function(e,l){var _=Math.cos(l),S=Math.sin(l),k=this.x-e.x,E=this.y-e.y;return this.x=k*_-E*S+e.x,this.y=k*S+E*_+e.y,this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this}},{key:Symbol.iterator,value:_regenerator().m(function value(){return _regenerator().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.x;case 1:return e.n=2,this.y;case 2:return e.a(2)}},value,this)})}])}();I("b2",df);var ff=function(){return _createClass3(function Quaternion(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,_=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,S=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;_classCallCheck3(this,Quaternion),this.isQuaternion=!0,this._x=e,this._y=l,this._z=_,this._w=S},[{key:"x",get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},{key:"w",get:function(){return this._w},set:function(e){this._w=e,this._onChangeCallback()}},{key:"set",value:function(e,l,_,S){return this._x=e,this._y=l,this._z=_,this._w=S,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._w)}},{key:"copy",value:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}},{key:"setFromEuler",value:function(e){var l=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],_=e._x,S=e._y,k=e._z,E=e._order,T=Math.cos,M=Math.sin,R=T(_/2),I=T(S/2),D=T(k/2),O=M(_/2),L=M(S/2),U=M(k/2);switch(E){case"XYZ":this._x=O*I*D+R*L*U,this._y=R*L*D-O*I*U,this._z=R*I*U+O*L*D,this._w=R*I*D-O*L*U;break;case"YXZ":this._x=O*I*D+R*L*U,this._y=R*L*D-O*I*U,this._z=R*I*U-O*L*D,this._w=R*I*D+O*L*U;break;case"ZXY":this._x=O*I*D-R*L*U,this._y=R*L*D+O*I*U,this._z=R*I*U+O*L*D,this._w=R*I*D-O*L*U;break;case"ZYX":this._x=O*I*D-R*L*U,this._y=R*L*D+O*I*U,this._z=R*I*U-O*L*D,this._w=R*I*D+O*L*U;break;case"YZX":this._x=O*I*D+R*L*U,this._y=R*L*D+O*I*U,this._z=R*I*U-O*L*D,this._w=R*I*D-O*L*U;break;case"XZY":this._x=O*I*D-R*L*U,this._y=R*L*D-O*I*U,this._z=R*I*U+O*L*D,this._w=R*I*D+O*L*U}return!0===l&&this._onChangeCallback(),this}},{key:"setFromAxisAngle",value:function(e,l){var _=l/2,S=Math.sin(_);return this._x=e.x*S,this._y=e.y*S,this._z=e.z*S,this._w=Math.cos(_),this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(e){var l=e.elements,_=l[0],S=l[4],k=l[8],E=l[1],T=l[5],M=l[9],R=l[2],I=l[6],D=l[10],O=_+T+D;if(O>0){var L=.5/Math.sqrt(O+1);this._w=.25/L,this._x=(I-M)*L,this._y=(k-R)*L,this._z=(E-S)*L}else if(_>T&&_>D){var U=2*Math.sqrt(1+_-T-D);this._w=(I-M)/U,this._x=.25*U,this._y=(S+E)/U,this._z=(k+R)/U}else if(T>D){var B=2*Math.sqrt(1+T-_-D);this._w=(k-R)/B,this._x=(S+E)/B,this._y=.25*B,this._z=(M+I)/B}else{var z=2*Math.sqrt(1+D-_-T);this._w=(E-S)/z,this._x=(k+R)/z,this._y=(M+I)/z,this._z=.25*z}return this._onChangeCallback(),this}},{key:"setFromUnitVectors",value:function(e,l){var _=e.dot(l)+1;return _<1e-8?(_=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=_):(this._x=0,this._y=-e.z,this._z=e.y,this._w=_)):(this._x=e.y*l.z-e.z*l.y,this._y=e.z*l.x-e.x*l.z,this._z=e.x*l.y-e.y*l.x,this._w=_),this.normalize()}},{key:"angleTo",value:function(e){return 2*Math.acos(Math.abs(_clamp2(this.dot(e),-1,1)))}},{key:"rotateTowards",value:function(e,l){var _=this.angleTo(e);if(0===_)return this;var S=Math.min(1,l/_);return this.slerp(e,S),this}},{key:"identity",value:function(){return this.set(0,0,0,1)}},{key:"invert",value:function(){return this.conjugate()}},{key:"conjugate",value:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}},{key:"dot",value:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}},{key:"lengthSq",value:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}},{key:"length",value:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}},{key:"normalize",value:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}},{key:"multiply",value:function(e){return this.multiplyQuaternions(this,e)}},{key:"premultiply",value:function(e){return this.multiplyQuaternions(e,this)}},{key:"multiplyQuaternions",value:function(e,l){var _=e._x,S=e._y,k=e._z,E=e._w,T=l._x,M=l._y,R=l._z,I=l._w;return this._x=_*I+E*T+S*R-k*M,this._y=S*I+E*M+k*T-_*R,this._z=k*I+E*R+_*M-S*T,this._w=E*I-_*T-S*M-k*R,this._onChangeCallback(),this}},{key:"slerp",value:function(e,l){if(0===l)return this;if(1===l)return this.copy(e);var _=this._x,S=this._y,k=this._z,E=this._w,T=E*e._w+_*e._x+S*e._y+k*e._z;if(T<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,T=-T):this.copy(e),T>=1)return this._w=E,this._x=_,this._y=S,this._z=k,this;var M=1-T*T;if(M<=Number.EPSILON){var R=1-l;return this._w=R*E+l*this._w,this._x=R*_+l*this._x,this._y=R*S+l*this._y,this._z=R*k+l*this._z,this.normalize(),this}var I=Math.sqrt(M),D=Math.atan2(I,T),O=Math.sin((1-l)*D)/I,L=Math.sin(l*D)/I;return this._w=E*O+this._w*L,this._x=_*O+this._x*L,this._y=S*O+this._y*L,this._z=k*O+this._z*L,this._onChangeCallback(),this}},{key:"slerpQuaternions",value:function(e,l,_){return this.copy(e).slerp(l,_)}},{key:"random",value:function(){var e=2*Math.PI*Math.random(),l=2*Math.PI*Math.random(),_=Math.random(),S=Math.sqrt(1-_),k=Math.sqrt(_);return this.set(S*Math.sin(e),S*Math.cos(e),k*Math.sin(l),k*Math.cos(l))}},{key:"equals",value:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}},{key:"fromArray",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._x=e[l],this._y=e[l+1],this._z=e[l+2],this._w=e[l+3],this._onChangeCallback(),this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[l]=this._x,e[l+1]=this._y,e[l+2]=this._z,e[l+3]=this._w,e}},{key:"fromBufferAttribute",value:function(e,l){return this._x=e.getX(l),this._y=e.getY(l),this._z=e.getZ(l),this._w=e.getW(l),this._onChangeCallback(),this}},{key:"toJSON",value:function(){return this.toArray()}},{key:"_onChange",value:function(e){return this._onChangeCallback=e,this}},{key:"_onChangeCallback",value:function(){}},{key:Symbol.iterator,value:_regenerator().m(function value(){return _regenerator().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this._x;case 1:return e.n=2,this._y;case 2:return e.n=3,this._z;case 3:return e.n=4,this._w;case 4:return e.a(2)}},value,this)})}],[{key:"slerpFlat",value:function(e,l,_,S,k,E,T){var M=_[S+0],R=_[S+1],I=_[S+2],D=_[S+3],O=k[E+0],L=k[E+1],U=k[E+2],B=k[E+3];if(0===T)return e[l+0]=M,e[l+1]=R,e[l+2]=I,void(e[l+3]=D);if(1===T)return e[l+0]=O,e[l+1]=L,e[l+2]=U,void(e[l+3]=B);if(D!==B||M!==O||R!==L||I!==U){var z=1-T,G=M*O+R*L+I*U+D*B,j=G>=0?1:-1,H=1-G*G;if(H>Number.EPSILON){var V=Math.sqrt(H),W=Math.atan2(V,G*j);z=Math.sin(z*W)/V,T=Math.sin(T*W)/V}var q=T*j;if(M=M*z+O*q,R=R*z+L*q,I=I*z+U*q,D=D*z+B*q,z===1-T){var X=1/Math.sqrt(M*M+R*R+I*I+D*D);M*=X,R*=X,I*=X,D*=X}}e[l]=M,e[l+1]=R,e[l+2]=I,e[l+3]=D}},{key:"multiplyQuaternionsFlat",value:function(e,l,_,S,k,E){var T=_[S],M=_[S+1],R=_[S+2],I=_[S+3],D=k[E],O=k[E+1],L=k[E+2],U=k[E+3];return e[l]=T*U+I*D+M*L-R*O,e[l+1]=M*U+I*O+R*D-T*L,e[l+2]=R*U+I*L+T*O-M*D,e[l+3]=I*U-T*D-M*O-R*L,e}}])}(),pf=function(){return _createClass3(function Vector3(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,_=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;_classCallCheck3(this,Vector3),Vector3.prototype.isVector3=!0,this.x=e,this.y=l,this.z=_},[{key:"set",value:function(e,l,_){return void 0===_&&(_=this.z),this.x=e,this.y=l,this.z=_,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this.z=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setZ",value:function(e){return this.z=e,this}},{key:"setComponent",value:function(e,l){switch(e){case 0:this.x=l;break;case 1:this.y=l;break;case 2:this.z=l;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}},{key:"add",value:function(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this.z+=e,this}},{key:"addVectors",value:function(e,l){return this.x=e.x+l.x,this.y=e.y+l.y,this.z=e.z+l.z,this}},{key:"addScaledVector",value:function(e,l){return this.x+=e.x*l,this.y+=e.y*l,this.z+=e.z*l,this}},{key:"sub",value:function(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this.z-=e,this}},{key:"subVectors",value:function(e,l){return this.x=e.x-l.x,this.y=e.y-l.y,this.z=e.z-l.z,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this.z*=e,this}},{key:"multiplyVectors",value:function(e,l){return this.x=e.x*l.x,this.y=e.y*l.y,this.z=e.z*l.z,this}},{key:"applyEuler",value:function(e){return this.applyQuaternion(gf.setFromEuler(e))}},{key:"applyAxisAngle",value:function(e,l){return this.applyQuaternion(gf.setFromAxisAngle(e,l))}},{key:"applyMatrix3",value:function(e){var l=this.x,_=this.y,S=this.z,k=e.elements;return this.x=k[0]*l+k[3]*_+k[6]*S,this.y=k[1]*l+k[4]*_+k[7]*S,this.z=k[2]*l+k[5]*_+k[8]*S,this}},{key:"applyNormalMatrix",value:function(e){return this.applyMatrix3(e).normalize()}},{key:"applyMatrix4",value:function(e){var l=this.x,_=this.y,S=this.z,k=e.elements,E=1/(k[3]*l+k[7]*_+k[11]*S+k[15]);return this.x=(k[0]*l+k[4]*_+k[8]*S+k[12])*E,this.y=(k[1]*l+k[5]*_+k[9]*S+k[13])*E,this.z=(k[2]*l+k[6]*_+k[10]*S+k[14])*E,this}},{key:"applyQuaternion",value:function(e){var l=this.x,_=this.y,S=this.z,k=e.x,E=e.y,T=e.z,M=e.w,R=2*(E*S-T*_),I=2*(T*l-k*S),D=2*(k*_-E*l);return this.x=l+M*R+E*D-T*I,this.y=_+M*I+T*R-k*D,this.z=S+M*D+k*I-E*R,this}},{key:"project",value:function(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}},{key:"unproject",value:function(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}},{key:"transformDirection",value:function(e){var l=this.x,_=this.y,S=this.z,k=e.elements;return this.x=k[0]*l+k[4]*_+k[8]*S,this.y=k[1]*l+k[5]*_+k[9]*S,this.z=k[2]*l+k[6]*_+k[10]*S,this.normalize()}},{key:"divide",value:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}},{key:"clamp",value:function(e,l){return this.x=_clamp2(this.x,e.x,l.x),this.y=_clamp2(this.y,e.y,l.y),this.z=_clamp2(this.z,e.z,l.z),this}},{key:"clampScalar",value:function(e,l){return this.x=_clamp2(this.x,e,l),this.y=_clamp2(this.y,e,l),this.z=_clamp2(this.z,e,l),this}},{key:"clampLength",value:function(e,l){var _=this.length();return this.divideScalar(_||1).multiplyScalar(_clamp2(_,e,l))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}},{key:"roundToZero",value:function(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,l){return this.x+=(e.x-this.x)*l,this.y+=(e.y-this.y)*l,this.z+=(e.z-this.z)*l,this}},{key:"lerpVectors",value:function(e,l,_){return this.x=e.x+(l.x-e.x)*_,this.y=e.y+(l.y-e.y)*_,this.z=e.z+(l.z-e.z)*_,this}},{key:"cross",value:function(e){return this.crossVectors(this,e)}},{key:"crossVectors",value:function(e,l){var _=e.x,S=e.y,k=e.z,E=l.x,T=l.y,M=l.z;return this.x=S*M-k*T,this.y=k*E-_*M,this.z=_*T-S*E,this}},{key:"projectOnVector",value:function(e){var l=e.lengthSq();if(0===l)return this.set(0,0,0);var _=e.dot(this)/l;return this.copy(e).multiplyScalar(_)}},{key:"projectOnPlane",value:function(e){return vf.copy(this).projectOnVector(e),this.sub(vf)}},{key:"reflect",value:function(e){return this.sub(vf.copy(e).multiplyScalar(2*this.dot(e)))}},{key:"angleTo",value:function(e){var l=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===l)return Math.PI/2;var _=this.dot(e)/l;return Math.acos(_clamp2(_,-1,1))}},{key:"distanceTo",value:function(e){return Math.sqrt(this.distanceToSquared(e))}},{key:"distanceToSquared",value:function(e){var l=this.x-e.x,_=this.y-e.y,S=this.z-e.z;return l*l+_*_+S*S}},{key:"manhattanDistanceTo",value:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}},{key:"setFromSpherical",value:function(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}},{key:"setFromSphericalCoords",value:function(e,l,_){var S=Math.sin(l)*e;return this.x=S*Math.sin(_),this.y=Math.cos(l)*e,this.z=S*Math.cos(_),this}},{key:"setFromCylindrical",value:function(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}},{key:"setFromCylindricalCoords",value:function(e,l,_){return this.x=e*Math.sin(l),this.y=_,this.z=e*Math.cos(l),this}},{key:"setFromMatrixPosition",value:function(e){var l=e.elements;return this.x=l[12],this.y=l[13],this.z=l[14],this}},{key:"setFromMatrixScale",value:function(e){var l=this.setFromMatrixColumn(e,0).length(),_=this.setFromMatrixColumn(e,1).length(),S=this.setFromMatrixColumn(e,2).length();return this.x=l,this.y=_,this.z=S,this}},{key:"setFromMatrixColumn",value:function(e,l){return this.fromArray(e.elements,4*l)}},{key:"setFromMatrix3Column",value:function(e,l){return this.fromArray(e.elements,3*l)}},{key:"setFromEuler",value:function(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}},{key:"setFromColor",value:function(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}},{key:"fromArray",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[l],this.y=e[l+1],this.z=e[l+2],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[l]=this.x,e[l+1]=this.y,e[l+2]=this.z,e}},{key:"fromBufferAttribute",value:function(e,l){return this.x=e.getX(l),this.y=e.getY(l),this.z=e.getZ(l),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}},{key:"randomDirection",value:function(){var e=Math.random()*Math.PI*2,l=2*Math.random()-1,_=Math.sqrt(1-l*l);return this.x=_*Math.cos(e),this.y=l,this.z=_*Math.sin(e),this}},{key:Symbol.iterator,value:_regenerator().m(function value(){return _regenerator().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.x;case 1:return e.n=2,this.y;case 2:return e.n=3,this.z;case 3:return e.a(2)}},value,this)})}])}();I("bf",pf);var vf=new pf,gf=new ff,mf=function(){return _createClass3(function Matrix3(e,l,_,S,k,E,T,M,R){_classCallCheck3(this,Matrix3),Matrix3.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==e&&this.set(e,l,_,S,k,E,T,M,R)},[{key:"set",value:function(e,l,_,S,k,E,T,M,R){var I=this.elements;return I[0]=e,I[1]=S,I[2]=T,I[3]=l,I[4]=k,I[5]=M,I[6]=_,I[7]=E,I[8]=R,this}},{key:"identity",value:function(){return this.set(1,0,0,0,1,0,0,0,1),this}},{key:"copy",value:function(e){var l=this.elements,_=e.elements;return l[0]=_[0],l[1]=_[1],l[2]=_[2],l[3]=_[3],l[4]=_[4],l[5]=_[5],l[6]=_[6],l[7]=_[7],l[8]=_[8],this}},{key:"extractBasis",value:function(e,l,_){return e.setFromMatrix3Column(this,0),l.setFromMatrix3Column(this,1),_.setFromMatrix3Column(this,2),this}},{key:"setFromMatrix4",value:function(e){var l=e.elements;return this.set(l[0],l[4],l[8],l[1],l[5],l[9],l[2],l[6],l[10]),this}},{key:"multiply",value:function(e){return this.multiplyMatrices(this,e)}},{key:"premultiply",value:function(e){return this.multiplyMatrices(e,this)}},{key:"multiplyMatrices",value:function(e,l){var _=e.elements,S=l.elements,k=this.elements,E=_[0],T=_[3],M=_[6],R=_[1],I=_[4],D=_[7],O=_[2],L=_[5],U=_[8],B=S[0],z=S[3],G=S[6],j=S[1],H=S[4],V=S[7],W=S[2],q=S[5],X=S[8];return k[0]=E*B+T*j+M*W,k[3]=E*z+T*H+M*q,k[6]=E*G+T*V+M*X,k[1]=R*B+I*j+D*W,k[4]=R*z+I*H+D*q,k[7]=R*G+I*V+D*X,k[2]=O*B+L*j+U*W,k[5]=O*z+L*H+U*q,k[8]=O*G+L*V+U*X,this}},{key:"multiplyScalar",value:function(e){var l=this.elements;return l[0]*=e,l[3]*=e,l[6]*=e,l[1]*=e,l[4]*=e,l[7]*=e,l[2]*=e,l[5]*=e,l[8]*=e,this}},{key:"determinant",value:function(){var e=this.elements,l=e[0],_=e[1],S=e[2],k=e[3],E=e[4],T=e[5],M=e[6],R=e[7],I=e[8];return l*E*I-l*T*R-_*k*I+_*T*M+S*k*R-S*E*M}},{key:"invert",value:function(){var e=this.elements,l=e[0],_=e[1],S=e[2],k=e[3],E=e[4],T=e[5],M=e[6],R=e[7],I=e[8],D=I*E-T*R,O=T*M-I*k,L=R*k-E*M,U=l*D+_*O+S*L;if(0===U)return this.set(0,0,0,0,0,0,0,0,0);var B=1/U;return e[0]=D*B,e[1]=(S*R-I*_)*B,e[2]=(T*_-S*E)*B,e[3]=O*B,e[4]=(I*l-S*M)*B,e[5]=(S*k-T*l)*B,e[6]=L*B,e[7]=(_*M-R*l)*B,e[8]=(E*l-_*k)*B,this}},{key:"transpose",value:function(){var e,l=this.elements;return e=l[1],l[1]=l[3],l[3]=e,e=l[2],l[2]=l[6],l[6]=e,e=l[5],l[5]=l[7],l[7]=e,this}},{key:"getNormalMatrix",value:function(e){return this.setFromMatrix4(e).invert().transpose()}},{key:"transposeIntoArray",value:function(e){var l=this.elements;return e[0]=l[0],e[1]=l[3],e[2]=l[6],e[3]=l[1],e[4]=l[4],e[5]=l[7],e[6]=l[2],e[7]=l[5],e[8]=l[8],this}},{key:"setUvTransform",value:function(e,l,_,S,k,E,T){var M=Math.cos(k),R=Math.sin(k);return this.set(_*M,_*R,-_*(M*E+R*T)+E+e,-S*R,S*M,-S*(-R*E+M*T)+T+l,0,0,1),this}},{key:"scale",value:function(e,l){return this.premultiply(yf.makeScale(e,l)),this}},{key:"rotate",value:function(e){return this.premultiply(yf.makeRotation(-e)),this}},{key:"translate",value:function(e,l){return this.premultiply(yf.makeTranslation(e,l)),this}},{key:"makeTranslation",value:function(e,l){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,l,0,0,1),this}},{key:"makeRotation",value:function(e){var l=Math.cos(e),_=Math.sin(e);return this.set(l,-_,0,_,l,0,0,0,1),this}},{key:"makeScale",value:function(e,l){return this.set(e,0,0,0,l,0,0,0,1),this}},{key:"equals",value:function(e){for(var l=this.elements,_=e.elements,S=0;S<9;S++)if(l[S]!==_[S])return!1;return!0}},{key:"fromArray",value:function(e){for(var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,_=0;_<9;_++)this.elements[_]=e[_+l];return this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,_=this.elements;return e[l]=_[0],e[l+1]=_[1],e[l+2]=_[2],e[l+3]=_[3],e[l+4]=_[4],e[l+5]=_[5],e[l+6]=_[6],e[l+7]=_[7],e[l+8]=_[8],e}},{key:"clone",value:function(){return(new this.constructor).fromArray(this.elements)}}])}(),yf=new mf;function arrayNeedsUint32(e){for(var l=e.length-1;l>=0;--l)if(e[l]>=65535)return!0;return!1}function createElementNS(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}var _f={};function warnOnce(e){e in _f||(_f[e]=!0)}function probeAsync(e,l,_){return new Promise(function(S,k){setTimeout(function probe(){switch(e.clientWaitSync(l,e.SYNC_FLUSH_COMMANDS_BIT,0)){case e.WAIT_FAILED:k();break;case e.TIMEOUT_EXPIRED:setTimeout(probe,_);break;default:S()}},_)})}var bf=(new mf).set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),Sf=(new mf).set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function createColorManagement(){var e={enabled:!0,workingColorSpace:ef,spaces:{},convert:function(e,l,_){return!1!==this.enabled&&l!==_&&l&&_?(this.spaces[l].transfer===rf&&(e.r=SRGBToLinear(e.r),e.g=SRGBToLinear(e.g),e.b=SRGBToLinear(e.b)),this.spaces[l].primaries!==this.spaces[_].primaries&&(e.applyMatrix3(this.spaces[l].toXYZ),e.applyMatrix3(this.spaces[_].fromXYZ)),this.spaces[_].transfer===rf&&(e.r=LinearToSRGB(e.r),e.g=LinearToSRGB(e.g),e.b=LinearToSRGB(e.b)),e):e},workingToColorSpace:function(e,l){return this.convert(e,this.workingColorSpace,l)},colorSpaceToWorking:function(e,l){return this.convert(e,l,this.workingColorSpace)},getPrimaries:function(e){return this.spaces[e].primaries},getTransfer:function(e){return e===Zd?tf:this.spaces[e].transfer},getToneMappingMode:function(e){return this.spaces[e].outputColorSpaceConfig.toneMappingMode||"standard"},getLuminanceCoefficients:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.workingColorSpace;return e.fromArray(this.spaces[l].luminanceCoefficients)},define:function(e){Object.assign(this.spaces,e)},_getMatrix:function(e,l,_){return e.copy(this.spaces[l].toXYZ).multiply(this.spaces[_].fromXYZ)},_getDrawingBufferColorSpace:function(e){return this.spaces[e].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.workingColorSpace;return this.spaces[e].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(l,_){return warnOnce("THREE.ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),e.workingToColorSpace(l,_)},toWorkingColorSpace:function(l,_){return warnOnce("THREE.ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),e.colorSpaceToWorking(l,_)}},l=[.64,.33,.3,.6,.15,.06],_=[.2126,.7152,.0722],S=[.3127,.329];return e.define(_defineProperty3(_defineProperty3({},ef,{primaries:l,whitePoint:S,transfer:tf,toXYZ:bf,fromXYZ:Sf,luminanceCoefficients:_,workingColorSpaceConfig:{unpackColorSpace:$d},outputColorSpaceConfig:{drawingBufferColorSpace:$d}}),$d,{primaries:l,whitePoint:S,transfer:rf,toXYZ:bf,fromXYZ:Sf,luminanceCoefficients:_,outputColorSpaceConfig:{drawingBufferColorSpace:$d}})),e}var wf,xf=createColorManagement();function SRGBToLinear(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function LinearToSRGB(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}var kf=function(){return _createClass3(function ImageUtils(){_classCallCheck3(this,ImageUtils)},null,[{key:"getDataURL",value:function(e){var l,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"image/png";if(/^data:/i.test(e.src))return e.src;if("undefined"==typeof HTMLCanvasElement)return e.src;if(e instanceof HTMLCanvasElement)l=e;else{void 0===wf&&(wf=createElementNS("canvas")),wf.width=e.width,wf.height=e.height;var S=wf.getContext("2d");e instanceof ImageData?S.putImageData(e,0,0):S.drawImage(e,0,0,e.width,e.height),l=wf}return l.toDataURL(_)}},{key:"sRGBToLinear",value:function(e){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){var l=createElementNS("canvas");l.width=e.width,l.height=e.height;var _=l.getContext("2d");_.drawImage(e,0,0,e.width,e.height);for(var S=_.getImageData(0,0,e.width,e.height),k=S.data,E=0;E<k.length;E++)k[E]=255*SRGBToLinear(k[E]/255);return _.putImageData(S,0,0),l}if(e.data){for(var T=e.data.slice(0),M=0;M<T.length;M++)T instanceof Uint8Array||T instanceof Uint8ClampedArray?T[M]=Math.floor(255*SRGBToLinear(T[M]/255)):T[M]=SRGBToLinear(T[M]);return{data:T,width:e.width,height:e.height}}return e}}])}(),Af=0,Ef=function(){return _createClass3(function Source(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;_classCallCheck3(this,Source),this.isSource=!0,Object.defineProperty(this,"id",{value:Af++}),this.uuid=generateUUID(),this.data=e,this.dataReady=!0,this.version=0},[{key:"getSize",value:function(e){var l=this.data;return"undefined"!=typeof HTMLVideoElement&&l instanceof HTMLVideoElement?e.set(l.videoWidth,l.videoHeight,0):l instanceof VideoFrame?e.set(l.displayHeight,l.displayWidth,0):null!==l?e.set(l.width,l.height,l.depth||0):e.set(0,0,0),e}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"toJSON",value:function(e){var l=void 0===e||"string"==typeof e;if(!l&&void 0!==e.images[this.uuid])return e.images[this.uuid];var _={uuid:this.uuid,url:""},S=this.data;if(null!==S){var k;if(Array.isArray(S)){k=[];for(var E=0,T=S.length;E<T;E++)S[E].isDataTexture?k.push(serializeImage(S[E].image)):k.push(serializeImage(S[E]))}else k=serializeImage(S);_.url=k}return l||(e.images[this.uuid]=_),_}}])}();function serializeImage(e){return"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap?kf.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:{}}var Cf=0,Tf=new pf,Mf=function(e){function Texture(){var e,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Texture.DEFAULT_IMAGE,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Texture.DEFAULT_MAPPING,S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Xh,k=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Xh,E=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Jh,T=arguments.length>5&&void 0!==arguments[5]?arguments[5]:$h,M=arguments.length>6&&void 0!==arguments[6]?arguments[6]:fd,R=arguments.length>7&&void 0!==arguments[7]?arguments[7]:ed,I=arguments.length>8&&void 0!==arguments[8]?arguments[8]:Texture.DEFAULT_ANISOTROPY,D=arguments.length>9&&void 0!==arguments[9]?arguments[9]:Zd;return _classCallCheck3(this,Texture),(e=_callSuper(this,Texture)).isTexture=!0,Object.defineProperty(e,"id",{value:Cf++}),e.uuid=generateUUID(),e.name="",e.source=new Ef(l),e.mipmaps=[],e.mapping=_,e.channel=0,e.wrapS=S,e.wrapT=k,e.magFilter=E,e.minFilter=T,e.anisotropy=I,e.format=M,e.internalFormat=null,e.type=R,e.offset=new df(0,0),e.repeat=new df(1,1),e.center=new df(0,0),e.rotation=0,e.matrixAutoUpdate=!0,e.matrix=new mf,e.generateMipmaps=!0,e.premultiplyAlpha=!1,e.flipY=!0,e.unpackAlignment=4,e.colorSpace=D,e.userData={},e.updateRanges=[],e.version=0,e.onUpdate=null,e.renderTarget=null,e.isRenderTargetTexture=!1,e.isArrayTexture=!!(l&&l.depth&&l.depth>1),e.pmremVersion=0,e}return _inherits(Texture,e),_createClass3(Texture,[{key:"width",get:function(){return this.source.getSize(Tf).x}},{key:"height",get:function(){return this.source.getSize(Tf).y}},{key:"depth",get:function(){return this.source.getSize(Tf).z}},{key:"image",get:function(){return this.source.data},set:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.source.data=e}},{key:"updateMatrix",value:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}},{key:"addUpdateRange",value:function(e,l){this.updateRanges.push({start:e,count:l})}},{key:"clearUpdateRanges",value:function(){this.updateRanges.length=0}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.isArrayTexture=e.isArrayTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}},{key:"setValues",value:function(e){for(var l in e){var _=e[l];if(void 0!==_){var S=this[l];void 0!==S&&(S&&_&&S.isVector2&&_.isVector2||S&&_&&S.isVector3&&_.isVector3||S&&_&&S.isMatrix3&&_.isMatrix3?S.copy(_):this[l]=_)}}}},{key:"toJSON",value:function(e){var l=void 0===e||"string"==typeof e;if(!l&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];var _={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(_.userData=this.userData),l||(e.textures[this.uuid]=_),_}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}},{key:"transformUv",value:function(e){if(300!==this.mapping)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case qh:e.x=e.x-Math.floor(e.x);break;case Xh:e.x=e.x<0?0:1;break;case Kh:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case qh:e.y=e.y-Math.floor(e.y);break;case Xh:e.y=e.y<0?0:1;break;case Kh:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}},{key:"needsUpdate",set:function(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}},{key:"needsPMREMUpdate",set:function(e){!0===e&&this.pmremVersion++}}])}(uf);Mf.DEFAULT_IMAGE=null,Mf.DEFAULT_MAPPING=300,Mf.DEFAULT_ANISOTROPY=1;var Rf=function(){return _createClass3(function Vector4(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,_=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,S=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;_classCallCheck3(this,Vector4),Vector4.prototype.isVector4=!0,this.x=e,this.y=l,this.z=_,this.w=S},[{key:"width",get:function(){return this.z},set:function(e){this.z=e}},{key:"height",get:function(){return this.w},set:function(e){this.w=e}},{key:"set",value:function(e,l,_,S){return this.x=e,this.y=l,this.z=_,this.w=S,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setZ",value:function(e){return this.z=e,this}},{key:"setW",value:function(e){return this.w=e,this}},{key:"setComponent",value:function(e,l){switch(e){case 0:this.x=l;break;case 1:this.y=l;break;case 2:this.z=l;break;case 3:this.w=l;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z,this.w)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}},{key:"add",value:function(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}},{key:"addVectors",value:function(e,l){return this.x=e.x+l.x,this.y=e.y+l.y,this.z=e.z+l.z,this.w=e.w+l.w,this}},{key:"addScaledVector",value:function(e,l){return this.x+=e.x*l,this.y+=e.y*l,this.z+=e.z*l,this.w+=e.w*l,this}},{key:"sub",value:function(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}},{key:"subVectors",value:function(e,l){return this.x=e.x-l.x,this.y=e.y-l.y,this.z=e.z-l.z,this.w=e.w-l.w,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}},{key:"applyMatrix4",value:function(e){var l=this.x,_=this.y,S=this.z,k=this.w,E=e.elements;return this.x=E[0]*l+E[4]*_+E[8]*S+E[12]*k,this.y=E[1]*l+E[5]*_+E[9]*S+E[13]*k,this.z=E[2]*l+E[6]*_+E[10]*S+E[14]*k,this.w=E[3]*l+E[7]*_+E[11]*S+E[15]*k,this}},{key:"divide",value:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"setAxisAngleFromQuaternion",value:function(e){this.w=2*Math.acos(e.w);var l=Math.sqrt(1-e.w*e.w);return l<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/l,this.y=e.y/l,this.z=e.z/l),this}},{key:"setAxisAngleFromRotationMatrix",value:function(e){var l,_,S,k,E=.01,T=.1,M=e.elements,R=M[0],I=M[4],D=M[8],O=M[1],L=M[5],U=M[9],B=M[2],z=M[6],G=M[10];if(Math.abs(I-O)<E&&Math.abs(D-B)<E&&Math.abs(U-z)<E){if(Math.abs(I+O)<T&&Math.abs(D+B)<T&&Math.abs(U+z)<T&&Math.abs(R+L+G-3)<T)return this.set(1,0,0,0),this;l=Math.PI;var j=(R+1)/2,H=(L+1)/2,V=(G+1)/2,W=(I+O)/4,q=(D+B)/4,X=(U+z)/4;return j>H&&j>V?j<E?(_=0,S=.707106781,k=.707106781):(S=W/(_=Math.sqrt(j)),k=q/_):H>V?H<E?(_=.707106781,S=0,k=.707106781):(_=W/(S=Math.sqrt(H)),k=X/S):V<E?(_=.707106781,S=.707106781,k=0):(_=q/(k=Math.sqrt(V)),S=X/k),this.set(_,S,k,l),this}var K=Math.sqrt((z-U)*(z-U)+(D-B)*(D-B)+(O-I)*(O-I));return Math.abs(K)<.001&&(K=1),this.x=(z-U)/K,this.y=(D-B)/K,this.z=(O-I)/K,this.w=Math.acos((R+L+G-1)/2),this}},{key:"setFromMatrixPosition",value:function(e){var l=e.elements;return this.x=l[12],this.y=l[13],this.z=l[14],this.w=l[15],this}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}},{key:"clamp",value:function(e,l){return this.x=_clamp2(this.x,e.x,l.x),this.y=_clamp2(this.y,e.y,l.y),this.z=_clamp2(this.z,e.z,l.z),this.w=_clamp2(this.w,e.w,l.w),this}},{key:"clampScalar",value:function(e,l){return this.x=_clamp2(this.x,e,l),this.y=_clamp2(this.y,e,l),this.z=_clamp2(this.z,e,l),this.w=_clamp2(this.w,e,l),this}},{key:"clampLength",value:function(e,l){var _=this.length();return this.divideScalar(_||1).multiplyScalar(_clamp2(_,e,l))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}},{key:"roundToZero",value:function(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,l){return this.x+=(e.x-this.x)*l,this.y+=(e.y-this.y)*l,this.z+=(e.z-this.z)*l,this.w+=(e.w-this.w)*l,this}},{key:"lerpVectors",value:function(e,l,_){return this.x=e.x+(l.x-e.x)*_,this.y=e.y+(l.y-e.y)*_,this.z=e.z+(l.z-e.z)*_,this.w=e.w+(l.w-e.w)*_,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}},{key:"fromArray",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[l],this.y=e[l+1],this.z=e[l+2],this.w=e[l+3],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[l]=this.x,e[l+1]=this.y,e[l+2]=this.z,e[l+3]=this.w,e}},{key:"fromBufferAttribute",value:function(e,l){return this.x=e.getX(l),this.y=e.getY(l),this.z=e.getZ(l),this.w=e.getW(l),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}},{key:Symbol.iterator,value:_regenerator().m(function value(){return _regenerator().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.x;case 1:return e.n=2,this.y;case 2:return e.n=3,this.z;case 3:return e.n=4,this.w;case 4:return e.a(2)}},value,this)})}])}();I("bq",Rf);var If=function(e){function RenderTarget(){var e,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};_classCallCheck3(this,RenderTarget),e=_callSuper(this,RenderTarget),S=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Jh,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},S),e.isRenderTarget=!0,e.width=l,e.height=_,e.depth=S.depth,e.scissor=new Rf(0,0,l,_),e.scissorTest=!1,e.viewport=new Rf(0,0,l,_);var k={width:l,height:_,depth:S.depth},E=new Mf(k);e.textures=[];for(var T=S.count,M=0;M<T;M++)e.textures[M]=E.clone(),e.textures[M].isRenderTargetTexture=!0,e.textures[M].renderTarget=e;return e._setTextureOptions(S),e.depthBuffer=S.depthBuffer,e.stencilBuffer=S.stencilBuffer,e.resolveDepthBuffer=S.resolveDepthBuffer,e.resolveStencilBuffer=S.resolveStencilBuffer,e._depthTexture=null,e.depthTexture=S.depthTexture,e.samples=S.samples,e.multiview=S.multiview,e}return _inherits(RenderTarget,e),_createClass3(RenderTarget,[{key:"_setTextureOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l={minFilter:Jh,generateMipmaps:!1,flipY:!1,internalFormat:null};void 0!==e.mapping&&(l.mapping=e.mapping),void 0!==e.wrapS&&(l.wrapS=e.wrapS),void 0!==e.wrapT&&(l.wrapT=e.wrapT),void 0!==e.wrapR&&(l.wrapR=e.wrapR),void 0!==e.magFilter&&(l.magFilter=e.magFilter),void 0!==e.minFilter&&(l.minFilter=e.minFilter),void 0!==e.format&&(l.format=e.format),void 0!==e.type&&(l.type=e.type),void 0!==e.anisotropy&&(l.anisotropy=e.anisotropy),void 0!==e.colorSpace&&(l.colorSpace=e.colorSpace),void 0!==e.flipY&&(l.flipY=e.flipY),void 0!==e.generateMipmaps&&(l.generateMipmaps=e.generateMipmaps),void 0!==e.internalFormat&&(l.internalFormat=e.internalFormat);for(var _=0;_<this.textures.length;_++){this.textures[_].setValues(l)}}},{key:"texture",get:function(){return this.textures[0]},set:function(e){this.textures[0]=e}},{key:"depthTexture",get:function(){return this._depthTexture},set:function(e){null!==this._depthTexture&&(this._depthTexture.renderTarget=null),null!==e&&(e.renderTarget=this),this._depthTexture=e}},{key:"setSize",value:function(e,l){var _=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(this.width!==e||this.height!==l||this.depth!==_){this.width=e,this.height=l,this.depth=_;for(var S=0,k=this.textures.length;S<k;S++)this.textures[S].image.width=e,this.textures[S].image.height=l,this.textures[S].image.depth=_,this.textures[S].isArrayTexture=this.textures[S].image.depth>1;this.dispose()}this.viewport.set(0,0,e,l),this.scissor.set(0,0,e,l)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(var l=0,_=e.textures.length;l<_;l++){this.textures[l]=e.textures[l].clone(),this.textures[l].isRenderTargetTexture=!0,this.textures[l].renderTarget=this;var S=Object.assign({},e.textures[l].image);this.textures[l].source=new Ef(S)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}])}(uf),Pf=function(e){function WebGLRenderTarget(){var e,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return _classCallCheck3(this,WebGLRenderTarget),(e=_callSuper(this,WebGLRenderTarget,[l,_,S])).isWebGLRenderTarget=!0,e}return _inherits(WebGLRenderTarget,e),_createClass3(WebGLRenderTarget)}(If),Df=function(e){function DataArrayTexture(){var e,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,k=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return _classCallCheck3(this,DataArrayTexture),(e=_callSuper(this,DataArrayTexture,[null])).isDataArrayTexture=!0,e.image={data:l,width:_,height:S,depth:k},e.magFilter=Yh,e.minFilter=Yh,e.wrapR=Xh,e.generateMipmaps=!1,e.flipY=!1,e.unpackAlignment=1,e.layerUpdates=new Set,e}return _inherits(DataArrayTexture,e),_createClass3(DataArrayTexture,[{key:"addLayerUpdate",value:function(e){this.layerUpdates.add(e)}},{key:"clearLayerUpdates",value:function(){this.layerUpdates.clear()}}])}(Mf),Of=function(e){function Data3DTexture(){var e,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,k=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return _classCallCheck3(this,Data3DTexture),(e=_callSuper(this,Data3DTexture,[null])).isData3DTexture=!0,e.image={data:l,width:_,height:S,depth:k},e.magFilter=Yh,e.minFilter=Yh,e.wrapR=Xh,e.generateMipmaps=!1,e.flipY=!1,e.unpackAlignment=1,e}return _inherits(Data3DTexture,e),_createClass3(Data3DTexture)}(Mf),Lf=function(){return _createClass3(function Box3(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new pf(1/0,1/0,1/0),l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new pf(-1/0,-1/0,-1/0);_classCallCheck3(this,Box3),this.isBox3=!0,this.min=e,this.max=l},[{key:"set",value:function(e,l){return this.min.copy(e),this.max.copy(l),this}},{key:"setFromArray",value:function(e){this.makeEmpty();for(var l=0,_=e.length;l<_;l+=3)this.expandByPoint(Ff.fromArray(e,l));return this}},{key:"setFromBufferAttribute",value:function(e){this.makeEmpty();for(var l=0,_=e.count;l<_;l++)this.expandByPoint(Ff.fromBufferAttribute(e,l));return this}},{key:"setFromPoints",value:function(e){this.makeEmpty();for(var l=0,_=e.length;l<_;l++)this.expandByPoint(e[l]);return this}},{key:"setFromCenterAndSize",value:function(e,l){var _=Ff.copy(l).multiplyScalar(.5);return this.min.copy(e).sub(_),this.max.copy(e).add(_),this}},{key:"setFromObject",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.makeEmpty(),this.expandByObject(e,l)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.min.copy(e.min),this.max.copy(e.max),this}},{key:"makeEmpty",value:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}},{key:"isEmpty",value:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}},{key:"getCenter",value:function(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:"getSize",value:function(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}},{key:"expandByPoint",value:function(e){return this.min.min(e),this.max.max(e),this}},{key:"expandByVector",value:function(e){return this.min.sub(e),this.max.add(e),this}},{key:"expandByScalar",value:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this}},{key:"expandByObject",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.updateWorldMatrix(!1,!1);var _=e.geometry;if(void 0!==_){var S=_.getAttribute("position");if(!0===l&&void 0!==S&&!0!==e.isInstancedMesh)for(var k=0,E=S.count;k<E;k++)!0===e.isMesh?e.getVertexPosition(k,Ff):Ff.fromBufferAttribute(S,k),Ff.applyMatrix4(e.matrixWorld),this.expandByPoint(Ff);else void 0!==e.boundingBox?(null===e.boundingBox&&e.computeBoundingBox(),Nf.copy(e.boundingBox)):(null===_.boundingBox&&_.computeBoundingBox(),Nf.copy(_.boundingBox)),Nf.applyMatrix4(e.matrixWorld),this.union(Nf)}for(var T=e.children,M=0,R=T.length;M<R;M++)this.expandByObject(T[M],l);return this}},{key:"containsPoint",value:function(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}},{key:"containsBox",value:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}},{key:"getParameter",value:function(e,l){return l.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}},{key:"intersectsBox",value:function(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}},{key:"intersectsSphere",value:function(e){return this.clampPoint(e.center,Ff),Ff.distanceToSquared(e.center)<=e.radius*e.radius}},{key:"intersectsPlane",value:function(e){var l,_;return e.normal.x>0?(l=e.normal.x*this.min.x,_=e.normal.x*this.max.x):(l=e.normal.x*this.max.x,_=e.normal.x*this.min.x),e.normal.y>0?(l+=e.normal.y*this.min.y,_+=e.normal.y*this.max.y):(l+=e.normal.y*this.max.y,_+=e.normal.y*this.min.y),e.normal.z>0?(l+=e.normal.z*this.min.z,_+=e.normal.z*this.max.z):(l+=e.normal.z*this.max.z,_+=e.normal.z*this.min.z),l<=-e.constant&&_>=-e.constant}},{key:"intersectsTriangle",value:function(e){if(this.isEmpty())return!1;this.getCenter(Wf),qf.subVectors(this.max,Wf),Bf.subVectors(e.a,Wf),zf.subVectors(e.b,Wf),Gf.subVectors(e.c,Wf),jf.subVectors(zf,Bf),Hf.subVectors(Gf,zf),Vf.subVectors(Bf,Gf);var l=[0,-jf.z,jf.y,0,-Hf.z,Hf.y,0,-Vf.z,Vf.y,jf.z,0,-jf.x,Hf.z,0,-Hf.x,Vf.z,0,-Vf.x,-jf.y,jf.x,0,-Hf.y,Hf.x,0,-Vf.y,Vf.x,0];return!!satForAxes(l,Bf,zf,Gf,qf)&&(!!satForAxes(l=[1,0,0,0,1,0,0,0,1],Bf,zf,Gf,qf)&&(Xf.crossVectors(jf,Hf),satForAxes(l=[Xf.x,Xf.y,Xf.z],Bf,zf,Gf,qf)))}},{key:"clampPoint",value:function(e,l){return l.copy(e).clamp(this.min,this.max)}},{key:"distanceToPoint",value:function(e){return this.clampPoint(e,Ff).distanceTo(e)}},{key:"getBoundingSphere",value:function(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=.5*this.getSize(Ff).length()),e}},{key:"intersect",value:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}},{key:"union",value:function(e){return this.min.min(e.min),this.max.max(e.max),this}},{key:"applyMatrix4",value:function(e){return this.isEmpty()||(Uf[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Uf[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Uf[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Uf[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Uf[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Uf[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Uf[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Uf[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Uf)),this}},{key:"translate",value:function(e){return this.min.add(e),this.max.add(e),this}},{key:"equals",value:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}},{key:"toJSON",value:function(){return{min:this.min.toArray(),max:this.max.toArray()}}},{key:"fromJSON",value:function(e){return this.min.fromArray(e.min),this.max.fromArray(e.max),this}}])}(),Uf=[new pf,new pf,new pf,new pf,new pf,new pf,new pf,new pf],Ff=new pf,Nf=new Lf,Bf=new pf,zf=new pf,Gf=new pf,jf=new pf,Hf=new pf,Vf=new pf,Wf=new pf,qf=new pf,Xf=new pf,Kf=new pf;function satForAxes(e,l,_,S,k){for(var E=0,T=e.length-3;E<=T;E+=3){Kf.fromArray(e,E);var M=k.x*Math.abs(Kf.x)+k.y*Math.abs(Kf.y)+k.z*Math.abs(Kf.z),R=l.dot(Kf),I=_.dot(Kf),D=S.dot(Kf);if(Math.max(-Math.max(R,I,D),Math.min(R,I,D))>M)return!1}return!0}var Yf=new Lf,Qf=new pf,Jf=new pf,Zf=function(){return _createClass3(function Sphere(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new pf,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;_classCallCheck3(this,Sphere),this.isSphere=!0,this.center=e,this.radius=l},[{key:"set",value:function(e,l){return this.center.copy(e),this.radius=l,this}},{key:"setFromPoints",value:function(e,l){var _=this.center;void 0!==l?_.copy(l):Yf.setFromPoints(e).getCenter(_);for(var S=0,k=0,E=e.length;k<E;k++)S=Math.max(S,_.distanceToSquared(e[k]));return this.radius=Math.sqrt(S),this}},{key:"copy",value:function(e){return this.center.copy(e.center),this.radius=e.radius,this}},{key:"isEmpty",value:function(){return this.radius<0}},{key:"makeEmpty",value:function(){return this.center.set(0,0,0),this.radius=-1,this}},{key:"containsPoint",value:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}},{key:"distanceToPoint",value:function(e){return e.distanceTo(this.center)-this.radius}},{key:"intersectsSphere",value:function(e){var l=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=l*l}},{key:"intersectsBox",value:function(e){return e.intersectsSphere(this)}},{key:"intersectsPlane",value:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}},{key:"clampPoint",value:function(e,l){var _=this.center.distanceToSquared(e);return l.copy(e),_>this.radius*this.radius&&(l.sub(this.center).normalize(),l.multiplyScalar(this.radius).add(this.center)),l}},{key:"getBoundingBox",value:function(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}},{key:"applyMatrix4",value:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}},{key:"translate",value:function(e){return this.center.add(e),this}},{key:"expandByPoint",value:function(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Qf.subVectors(e,this.center);var l=Qf.lengthSq();if(l>this.radius*this.radius){var _=Math.sqrt(l),S=.5*(_-this.radius);this.center.addScaledVector(Qf,S/_),this.radius+=S}return this}},{key:"union",value:function(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(Jf.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Qf.copy(e.center).add(Jf)),this.expandByPoint(Qf.copy(e.center).sub(Jf))),this)}},{key:"equals",value:function(e){return e.center.equals(this.center)&&e.radius===this.radius}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"toJSON",value:function(){return{radius:this.radius,center:this.center.toArray()}}},{key:"fromJSON",value:function(e){return this.radius=e.radius,this.center.fromArray(e.center),this}}])}(),$f=new pf,ep=new pf,tp=new pf,rp=new pf,np=new pf,ip=new pf,ap=new pf,op=function(){return _createClass3(function Ray(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new pf,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new pf(0,0,-1);_classCallCheck3(this,Ray),this.origin=e,this.direction=l},[{key:"set",value:function(e,l){return this.origin.copy(e),this.direction.copy(l),this}},{key:"copy",value:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}},{key:"at",value:function(e,l){return l.copy(this.origin).addScaledVector(this.direction,e)}},{key:"lookAt",value:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this}},{key:"recast",value:function(e){return this.origin.copy(this.at(e,$f)),this}},{key:"closestPointToPoint",value:function(e,l){l.subVectors(e,this.origin);var _=l.dot(this.direction);return _<0?l.copy(this.origin):l.copy(this.origin).addScaledVector(this.direction,_)}},{key:"distanceToPoint",value:function(e){return Math.sqrt(this.distanceSqToPoint(e))}},{key:"distanceSqToPoint",value:function(e){var l=$f.subVectors(e,this.origin).dot(this.direction);return l<0?this.origin.distanceToSquared(e):($f.copy(this.origin).addScaledVector(this.direction,l),$f.distanceToSquared(e))}},{key:"distanceSqToSegment",value:function(e,l,_,S){ep.copy(e).add(l).multiplyScalar(.5),tp.copy(l).sub(e).normalize(),rp.copy(this.origin).sub(ep);var k,E,T,M,R=.5*e.distanceTo(l),I=-this.direction.dot(tp),D=rp.dot(this.direction),O=-rp.dot(tp),L=rp.lengthSq(),U=Math.abs(1-I*I);if(U>0)if(E=I*D-O,M=R*U,(k=I*O-D)>=0)if(E>=-M)if(E<=M){var B=1/U;T=(k*=B)*(k+I*(E*=B)+2*D)+E*(I*k+E+2*O)+L}else E=R,T=-(k=Math.max(0,-(I*E+D)))*k+E*(E+2*O)+L;else E=-R,T=-(k=Math.max(0,-(I*E+D)))*k+E*(E+2*O)+L;else E<=-M?T=-(k=Math.max(0,-(-I*R+D)))*k+(E=k>0?-R:Math.min(Math.max(-R,-O),R))*(E+2*O)+L:E<=M?(k=0,T=(E=Math.min(Math.max(-R,-O),R))*(E+2*O)+L):T=-(k=Math.max(0,-(I*R+D)))*k+(E=k>0?R:Math.min(Math.max(-R,-O),R))*(E+2*O)+L;else E=I>0?-R:R,T=-(k=Math.max(0,-(I*E+D)))*k+E*(E+2*O)+L;return _&&_.copy(this.origin).addScaledVector(this.direction,k),S&&S.copy(ep).addScaledVector(tp,E),T}},{key:"intersectSphere",value:function(e,l){$f.subVectors(e.center,this.origin);var _=$f.dot(this.direction),S=$f.dot($f)-_*_,k=e.radius*e.radius;if(S>k)return null;var E=Math.sqrt(k-S),T=_-E,M=_+E;return M<0?null:T<0?this.at(M,l):this.at(T,l)}},{key:"intersectsSphere",value:function(e){return!(e.radius<0)&&this.distanceSqToPoint(e.center)<=e.radius*e.radius}},{key:"distanceToPlane",value:function(e){var l=e.normal.dot(this.direction);if(0===l)return 0===e.distanceToPoint(this.origin)?0:null;var _=-(this.origin.dot(e.normal)+e.constant)/l;return _>=0?_:null}},{key:"intersectPlane",value:function(e,l){var _=this.distanceToPlane(e);return null===_?null:this.at(_,l)}},{key:"intersectsPlane",value:function(e){var l=e.distanceToPoint(this.origin);return 0===l||e.normal.dot(this.direction)*l<0}},{key:"intersectBox",value:function(e,l){var _,S,k,E,T,M,R=1/this.direction.x,I=1/this.direction.y,D=1/this.direction.z,O=this.origin;return R>=0?(_=(e.min.x-O.x)*R,S=(e.max.x-O.x)*R):(_=(e.max.x-O.x)*R,S=(e.min.x-O.x)*R),I>=0?(k=(e.min.y-O.y)*I,E=(e.max.y-O.y)*I):(k=(e.max.y-O.y)*I,E=(e.min.y-O.y)*I),_>E||k>S?null:((k>_||isNaN(_))&&(_=k),(E<S||isNaN(S))&&(S=E),D>=0?(T=(e.min.z-O.z)*D,M=(e.max.z-O.z)*D):(T=(e.max.z-O.z)*D,M=(e.min.z-O.z)*D),_>M||T>S?null:((T>_||_!=_)&&(_=T),(M<S||S!=S)&&(S=M),S<0?null:this.at(_>=0?_:S,l)))}},{key:"intersectsBox",value:function(e){return null!==this.intersectBox(e,$f)}},{key:"intersectTriangle",value:function(e,l,_,S,k){np.subVectors(l,e),ip.subVectors(_,e),ap.crossVectors(np,ip);var E,T=this.direction.dot(ap);if(T>0){if(S)return null;E=1}else{if(!(T<0))return null;E=-1,T=-T}rp.subVectors(this.origin,e);var M=E*this.direction.dot(ip.crossVectors(rp,ip));if(M<0)return null;var R=E*this.direction.dot(np.cross(rp));if(R<0)return null;if(M+R>T)return null;var I=-E*rp.dot(ap);return I<0?null:this.at(I/T,k)}},{key:"applyMatrix4",value:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}},{key:"equals",value:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}])}(),sp=function(){function Matrix4(e,l,_,S,k,E,T,M,R,I,D,O,L,U,B,z){_classCallCheck3(this,Matrix4),Matrix4.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==e&&this.set(e,l,_,S,k,E,T,M,R,I,D,O,L,U,B,z)}return _createClass3(Matrix4,[{key:"set",value:function(e,l,_,S,k,E,T,M,R,I,D,O,L,U,B,z){var G=this.elements;return G[0]=e,G[4]=l,G[8]=_,G[12]=S,G[1]=k,G[5]=E,G[9]=T,G[13]=M,G[2]=R,G[6]=I,G[10]=D,G[14]=O,G[3]=L,G[7]=U,G[11]=B,G[15]=z,this}},{key:"identity",value:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}},{key:"clone",value:function(){return(new Matrix4).fromArray(this.elements)}},{key:"copy",value:function(e){var l=this.elements,_=e.elements;return l[0]=_[0],l[1]=_[1],l[2]=_[2],l[3]=_[3],l[4]=_[4],l[5]=_[5],l[6]=_[6],l[7]=_[7],l[8]=_[8],l[9]=_[9],l[10]=_[10],l[11]=_[11],l[12]=_[12],l[13]=_[13],l[14]=_[14],l[15]=_[15],this}},{key:"copyPosition",value:function(e){var l=this.elements,_=e.elements;return l[12]=_[12],l[13]=_[13],l[14]=_[14],this}},{key:"setFromMatrix3",value:function(e){var l=e.elements;return this.set(l[0],l[3],l[6],0,l[1],l[4],l[7],0,l[2],l[5],l[8],0,0,0,0,1),this}},{key:"extractBasis",value:function(e,l,_){return e.setFromMatrixColumn(this,0),l.setFromMatrixColumn(this,1),_.setFromMatrixColumn(this,2),this}},{key:"makeBasis",value:function(e,l,_){return this.set(e.x,l.x,_.x,0,e.y,l.y,_.y,0,e.z,l.z,_.z,0,0,0,0,1),this}},{key:"extractRotation",value:function(e){var l=this.elements,_=e.elements,S=1/up.setFromMatrixColumn(e,0).length(),k=1/up.setFromMatrixColumn(e,1).length(),E=1/up.setFromMatrixColumn(e,2).length();return l[0]=_[0]*S,l[1]=_[1]*S,l[2]=_[2]*S,l[3]=0,l[4]=_[4]*k,l[5]=_[5]*k,l[6]=_[6]*k,l[7]=0,l[8]=_[8]*E,l[9]=_[9]*E,l[10]=_[10]*E,l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,this}},{key:"makeRotationFromEuler",value:function(e){var l=this.elements,_=e.x,S=e.y,k=e.z,E=Math.cos(_),T=Math.sin(_),M=Math.cos(S),R=Math.sin(S),I=Math.cos(k),D=Math.sin(k);if("XYZ"===e.order){var O=E*I,L=E*D,U=T*I,B=T*D;l[0]=M*I,l[4]=-M*D,l[8]=R,l[1]=L+U*R,l[5]=O-B*R,l[9]=-T*M,l[2]=B-O*R,l[6]=U+L*R,l[10]=E*M}else if("YXZ"===e.order){var z=M*I,G=M*D,j=R*I,H=R*D;l[0]=z+H*T,l[4]=j*T-G,l[8]=E*R,l[1]=E*D,l[5]=E*I,l[9]=-T,l[2]=G*T-j,l[6]=H+z*T,l[10]=E*M}else if("ZXY"===e.order){var V=M*I,W=M*D,q=R*I,X=R*D;l[0]=V-X*T,l[4]=-E*D,l[8]=q+W*T,l[1]=W+q*T,l[5]=E*I,l[9]=X-V*T,l[2]=-E*R,l[6]=T,l[10]=E*M}else if("ZYX"===e.order){var K=E*I,Y=E*D,Q=T*I,J=T*D;l[0]=M*I,l[4]=Q*R-Y,l[8]=K*R+J,l[1]=M*D,l[5]=J*R+K,l[9]=Y*R-Q,l[2]=-R,l[6]=T*M,l[10]=E*M}else if("YZX"===e.order){var Z=E*M,$=E*R,ee=T*M,te=T*R;l[0]=M*I,l[4]=te-Z*D,l[8]=ee*D+$,l[1]=D,l[5]=E*I,l[9]=-T*I,l[2]=-R*I,l[6]=$*D+ee,l[10]=Z-te*D}else if("XZY"===e.order){var re=E*M,ne=E*R,ie=T*M,ae=T*R;l[0]=M*I,l[4]=-D,l[8]=R*I,l[1]=re*D+ae,l[5]=E*I,l[9]=ne*D-ie,l[2]=ie*D-ne,l[6]=T*I,l[10]=ae*D+re}return l[3]=0,l[7]=0,l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,this}},{key:"makeRotationFromQuaternion",value:function(e){return this.compose(cp,e,hp)}},{key:"lookAt",value:function(e,l,_){var S=this.elements;return pp.subVectors(e,l),0===pp.lengthSq()&&(pp.z=1),pp.normalize(),dp.crossVectors(_,pp),0===dp.lengthSq()&&(1===Math.abs(_.z)?pp.x+=1e-4:pp.z+=1e-4,pp.normalize(),dp.crossVectors(_,pp)),dp.normalize(),fp.crossVectors(pp,dp),S[0]=dp.x,S[4]=fp.x,S[8]=pp.x,S[1]=dp.y,S[5]=fp.y,S[9]=pp.y,S[2]=dp.z,S[6]=fp.z,S[10]=pp.z,this}},{key:"multiply",value:function(e){return this.multiplyMatrices(this,e)}},{key:"premultiply",value:function(e){return this.multiplyMatrices(e,this)}},{key:"multiplyMatrices",value:function(e,l){var _=e.elements,S=l.elements,k=this.elements,E=_[0],T=_[4],M=_[8],R=_[12],I=_[1],D=_[5],O=_[9],L=_[13],U=_[2],B=_[6],z=_[10],G=_[14],j=_[3],H=_[7],V=_[11],W=_[15],q=S[0],X=S[4],K=S[8],Y=S[12],Q=S[1],J=S[5],Z=S[9],$=S[13],ee=S[2],te=S[6],re=S[10],ne=S[14],ie=S[3],ae=S[7],oe=S[11],se=S[15];return k[0]=E*q+T*Q+M*ee+R*ie,k[4]=E*X+T*J+M*te+R*ae,k[8]=E*K+T*Z+M*re+R*oe,k[12]=E*Y+T*$+M*ne+R*se,k[1]=I*q+D*Q+O*ee+L*ie,k[5]=I*X+D*J+O*te+L*ae,k[9]=I*K+D*Z+O*re+L*oe,k[13]=I*Y+D*$+O*ne+L*se,k[2]=U*q+B*Q+z*ee+G*ie,k[6]=U*X+B*J+z*te+G*ae,k[10]=U*K+B*Z+z*re+G*oe,k[14]=U*Y+B*$+z*ne+G*se,k[3]=j*q+H*Q+V*ee+W*ie,k[7]=j*X+H*J+V*te+W*ae,k[11]=j*K+H*Z+V*re+W*oe,k[15]=j*Y+H*$+V*ne+W*se,this}},{key:"multiplyScalar",value:function(e){var l=this.elements;return l[0]*=e,l[4]*=e,l[8]*=e,l[12]*=e,l[1]*=e,l[5]*=e,l[9]*=e,l[13]*=e,l[2]*=e,l[6]*=e,l[10]*=e,l[14]*=e,l[3]*=e,l[7]*=e,l[11]*=e,l[15]*=e,this}},{key:"determinant",value:function(){var e=this.elements,l=e[0],_=e[4],S=e[8],k=e[12],E=e[1],T=e[5],M=e[9],R=e[13],I=e[2],D=e[6],O=e[10],L=e[14];return e[3]*(+k*M*D-S*R*D-k*T*O+_*R*O+S*T*L-_*M*L)+e[7]*(+l*M*L-l*R*O+k*E*O-S*E*L+S*R*I-k*M*I)+e[11]*(+l*R*D-l*T*L-k*E*D+_*E*L+k*T*I-_*R*I)+e[15]*(-S*T*I-l*M*D+l*T*O+S*E*D-_*E*O+_*M*I)}},{key:"transpose",value:function(){var e,l=this.elements;return e=l[1],l[1]=l[4],l[4]=e,e=l[2],l[2]=l[8],l[8]=e,e=l[6],l[6]=l[9],l[9]=e,e=l[3],l[3]=l[12],l[12]=e,e=l[7],l[7]=l[13],l[13]=e,e=l[11],l[11]=l[14],l[14]=e,this}},{key:"setPosition",value:function(e,l,_){var S=this.elements;return e.isVector3?(S[12]=e.x,S[13]=e.y,S[14]=e.z):(S[12]=e,S[13]=l,S[14]=_),this}},{key:"invert",value:function(){var e=this.elements,l=e[0],_=e[1],S=e[2],k=e[3],E=e[4],T=e[5],M=e[6],R=e[7],I=e[8],D=e[9],O=e[10],L=e[11],U=e[12],B=e[13],z=e[14],G=e[15],j=D*z*R-B*O*R+B*M*L-T*z*L-D*M*G+T*O*G,H=U*O*R-I*z*R-U*M*L+E*z*L+I*M*G-E*O*G,V=I*B*R-U*D*R+U*T*L-E*B*L-I*T*G+E*D*G,W=U*D*M-I*B*M-U*T*O+E*B*O+I*T*z-E*D*z,q=l*j+_*H+S*V+k*W;if(0===q)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);var X=1/q;return e[0]=j*X,e[1]=(B*O*k-D*z*k-B*S*L+_*z*L+D*S*G-_*O*G)*X,e[2]=(T*z*k-B*M*k+B*S*R-_*z*R-T*S*G+_*M*G)*X,e[3]=(D*M*k-T*O*k-D*S*R+_*O*R+T*S*L-_*M*L)*X,e[4]=H*X,e[5]=(I*z*k-U*O*k+U*S*L-l*z*L-I*S*G+l*O*G)*X,e[6]=(U*M*k-E*z*k-U*S*R+l*z*R+E*S*G-l*M*G)*X,e[7]=(E*O*k-I*M*k+I*S*R-l*O*R-E*S*L+l*M*L)*X,e[8]=V*X,e[9]=(U*D*k-I*B*k-U*_*L+l*B*L+I*_*G-l*D*G)*X,e[10]=(E*B*k-U*T*k+U*_*R-l*B*R-E*_*G+l*T*G)*X,e[11]=(I*T*k-E*D*k-I*_*R+l*D*R+E*_*L-l*T*L)*X,e[12]=W*X,e[13]=(I*B*S-U*D*S+U*_*O-l*B*O-I*_*z+l*D*z)*X,e[14]=(U*T*S-E*B*S-U*_*M+l*B*M+E*_*z-l*T*z)*X,e[15]=(E*D*S-I*T*S+I*_*M-l*D*M-E*_*O+l*T*O)*X,this}},{key:"scale",value:function(e){var l=this.elements,_=e.x,S=e.y,k=e.z;return l[0]*=_,l[4]*=S,l[8]*=k,l[1]*=_,l[5]*=S,l[9]*=k,l[2]*=_,l[6]*=S,l[10]*=k,l[3]*=_,l[7]*=S,l[11]*=k,this}},{key:"getMaxScaleOnAxis",value:function(){var e=this.elements,l=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],_=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],S=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(l,_,S))}},{key:"makeTranslation",value:function(e,l,_){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,l,0,0,1,_,0,0,0,1),this}},{key:"makeRotationX",value:function(e){var l=Math.cos(e),_=Math.sin(e);return this.set(1,0,0,0,0,l,-_,0,0,_,l,0,0,0,0,1),this}},{key:"makeRotationY",value:function(e){var l=Math.cos(e),_=Math.sin(e);return this.set(l,0,_,0,0,1,0,0,-_,0,l,0,0,0,0,1),this}},{key:"makeRotationZ",value:function(e){var l=Math.cos(e),_=Math.sin(e);return this.set(l,-_,0,0,_,l,0,0,0,0,1,0,0,0,0,1),this}},{key:"makeRotationAxis",value:function(e,l){var _=Math.cos(l),S=Math.sin(l),k=1-_,E=e.x,T=e.y,M=e.z,R=k*E,I=k*T;return this.set(R*E+_,R*T-S*M,R*M+S*T,0,R*T+S*M,I*T+_,I*M-S*E,0,R*M-S*T,I*M+S*E,k*M*M+_,0,0,0,0,1),this}},{key:"makeScale",value:function(e,l,_){return this.set(e,0,0,0,0,l,0,0,0,0,_,0,0,0,0,1),this}},{key:"makeShear",value:function(e,l,_,S,k,E){return this.set(1,_,k,0,e,1,E,0,l,S,1,0,0,0,0,1),this}},{key:"compose",value:function(e,l,_){var S=this.elements,k=l._x,E=l._y,T=l._z,M=l._w,R=k+k,I=E+E,D=T+T,O=k*R,L=k*I,U=k*D,B=E*I,z=E*D,G=T*D,j=M*R,H=M*I,V=M*D,W=_.x,q=_.y,X=_.z;return S[0]=(1-(B+G))*W,S[1]=(L+V)*W,S[2]=(U-H)*W,S[3]=0,S[4]=(L-V)*q,S[5]=(1-(O+G))*q,S[6]=(z+j)*q,S[7]=0,S[8]=(U+H)*X,S[9]=(z-j)*X,S[10]=(1-(O+B))*X,S[11]=0,S[12]=e.x,S[13]=e.y,S[14]=e.z,S[15]=1,this}},{key:"decompose",value:function(e,l,_){var S=this.elements,k=up.set(S[0],S[1],S[2]).length(),E=up.set(S[4],S[5],S[6]).length(),T=up.set(S[8],S[9],S[10]).length();this.determinant()<0&&(k=-k),e.x=S[12],e.y=S[13],e.z=S[14],lp.copy(this);var M=1/k,R=1/E,I=1/T;return lp.elements[0]*=M,lp.elements[1]*=M,lp.elements[2]*=M,lp.elements[4]*=R,lp.elements[5]*=R,lp.elements[6]*=R,lp.elements[8]*=I,lp.elements[9]*=I,lp.elements[10]*=I,l.setFromRotationMatrix(lp),_.x=k,_.y=E,_.z=T,this}},{key:"makePerspective",value:function(e,l,_,S,k,E){var T,M,R=arguments.length>6&&void 0!==arguments[6]?arguments[6]:of,I=arguments.length>7&&void 0!==arguments[7]&&arguments[7],D=this.elements,O=2*k/(l-e),L=2*k/(_-S),U=(l+e)/(l-e),B=(_+S)/(_-S);if(I)T=k/(E-k),M=E*k/(E-k);else if(R===of)T=-(E+k)/(E-k),M=-2*E*k/(E-k);else{if(R!==sf)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+R);T=-E/(E-k),M=-E*k/(E-k)}return D[0]=O,D[4]=0,D[8]=U,D[12]=0,D[1]=0,D[5]=L,D[9]=B,D[13]=0,D[2]=0,D[6]=0,D[10]=T,D[14]=M,D[3]=0,D[7]=0,D[11]=-1,D[15]=0,this}},{key:"makeOrthographic",value:function(e,l,_,S,k,E){var T,M,R=arguments.length>6&&void 0!==arguments[6]?arguments[6]:of,I=arguments.length>7&&void 0!==arguments[7]&&arguments[7],D=this.elements,O=2/(l-e),L=2/(_-S),U=-(l+e)/(l-e),B=-(_+S)/(_-S);if(I)T=1/(E-k),M=E/(E-k);else if(R===of)T=-2/(E-k),M=-(E+k)/(E-k);else{if(R!==sf)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+R);T=-1/(E-k),M=-k/(E-k)}return D[0]=O,D[4]=0,D[8]=0,D[12]=U,D[1]=0,D[5]=L,D[9]=0,D[13]=B,D[2]=0,D[6]=0,D[10]=T,D[14]=M,D[3]=0,D[7]=0,D[11]=0,D[15]=1,this}},{key:"equals",value:function(e){for(var l=this.elements,_=e.elements,S=0;S<16;S++)if(l[S]!==_[S])return!1;return!0}},{key:"fromArray",value:function(e){for(var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,_=0;_<16;_++)this.elements[_]=e[_+l];return this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,_=this.elements;return e[l]=_[0],e[l+1]=_[1],e[l+2]=_[2],e[l+3]=_[3],e[l+4]=_[4],e[l+5]=_[5],e[l+6]=_[6],e[l+7]=_[7],e[l+8]=_[8],e[l+9]=_[9],e[l+10]=_[10],e[l+11]=_[11],e[l+12]=_[12],e[l+13]=_[13],e[l+14]=_[14],e[l+15]=_[15],e}}])}(),up=new pf,lp=new sp,cp=new pf(0,0,0),hp=new pf(1,1,1),dp=new pf,fp=new pf,pp=new pf,vp=new sp,gp=new ff,mp=function(){return _createClass3(function Euler(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,_=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,S=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Euler.DEFAULT_ORDER;_classCallCheck3(this,Euler),this.isEuler=!0,this._x=e,this._y=l,this._z=_,this._order=S},[{key:"x",get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},{key:"order",get:function(){return this._order},set:function(e){this._order=e,this._onChangeCallback()}},{key:"set",value:function(e,l,_){var S=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._order;return this._x=e,this._y=l,this._z=_,this._order=S,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._order)}},{key:"copy",value:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order,_=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],S=e.elements,k=S[0],E=S[4],T=S[8],M=S[1],R=S[5],I=S[9],D=S[2],O=S[6],L=S[10];switch(l){case"XYZ":this._y=Math.asin(_clamp2(T,-1,1)),Math.abs(T)<.9999999?(this._x=Math.atan2(-I,L),this._z=Math.atan2(-E,k)):(this._x=Math.atan2(O,R),this._z=0);break;case"YXZ":this._x=Math.asin(-_clamp2(I,-1,1)),Math.abs(I)<.9999999?(this._y=Math.atan2(T,L),this._z=Math.atan2(M,R)):(this._y=Math.atan2(-D,k),this._z=0);break;case"ZXY":this._x=Math.asin(_clamp2(O,-1,1)),Math.abs(O)<.9999999?(this._y=Math.atan2(-D,L),this._z=Math.atan2(-E,R)):(this._y=0,this._z=Math.atan2(M,k));break;case"ZYX":this._y=Math.asin(-_clamp2(D,-1,1)),Math.abs(D)<.9999999?(this._x=Math.atan2(O,L),this._z=Math.atan2(M,k)):(this._x=0,this._z=Math.atan2(-E,R));break;case"YZX":this._z=Math.asin(_clamp2(M,-1,1)),Math.abs(M)<.9999999?(this._x=Math.atan2(-I,R),this._y=Math.atan2(-D,k)):(this._x=0,this._y=Math.atan2(T,L));break;case"XZY":this._z=Math.asin(-_clamp2(E,-1,1)),Math.abs(E)<.9999999?(this._x=Math.atan2(O,R),this._y=Math.atan2(T,k)):(this._x=Math.atan2(-I,L),this._y=0)}return this._order=l,!0===_&&this._onChangeCallback(),this}},{key:"setFromQuaternion",value:function(e,l,_){return vp.makeRotationFromQuaternion(e),this.setFromRotationMatrix(vp,l,_)}},{key:"setFromVector3",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order;return this.set(e.x,e.y,e.z,l)}},{key:"reorder",value:function(e){return gp.setFromEuler(this),this.setFromQuaternion(gp,e)}},{key:"equals",value:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}},{key:"fromArray",value:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[l]=this._x,e[l+1]=this._y,e[l+2]=this._z,e[l+3]=this._order,e}},{key:"_onChange",value:function(e){return this._onChangeCallback=e,this}},{key:"_onChangeCallback",value:function(){}},{key:Symbol.iterator,value:_regenerator().m(function value(){return _regenerator().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this._x;case 1:return e.n=2,this._y;case 2:return e.n=3,this._z;case 3:return e.n=4,this._order;case 4:return e.a(2)}},value,this)})}])}();mp.DEFAULT_ORDER="XYZ";var yp=function(){return _createClass3(function Layers(){_classCallCheck3(this,Layers),this.mask=1},[{key:"set",value:function(e){this.mask=1<<e>>>0}},{key:"enable",value:function(e){this.mask|=1<<e}},{key:"enableAll",value:function(){this.mask=-1}},{key:"toggle",value:function(e){this.mask^=1<<e}},{key:"disable",value:function(e){this.mask&=~(1<<e)}},{key:"disableAll",value:function(){this.mask=0}},{key:"test",value:function(e){return 0!==(this.mask&e.mask)}},{key:"isEnabled",value:function(e){return!!(this.mask&1<<e)}}])}(),_p=0,bp=new pf,Sp=new ff,wp=new sp,xp=new pf,kp=new pf,Ap=new pf,Ep=new ff,Cp=new pf(1,0,0),Tp=new pf(0,1,0),Mp=new pf(0,0,1),Rp={type:"added"},Ip={type:"removed"},Pp={type:"childadded",child:null},Dp={type:"childremoved",child:null},Op=function(e){function Object3D(){var e;_classCallCheck3(this,Object3D),(e=_callSuper(this,Object3D)).isObject3D=!0,Object.defineProperty(e,"id",{value:_p++}),e.uuid=generateUUID(),e.name="",e.type="Object3D",e.parent=null,e.children=[],e.up=Object3D.DEFAULT_UP.clone();var l=new pf,_=new mp,S=new ff,k=new pf(1,1,1);return _._onChange(function(){S.setFromEuler(_,!1)}),S._onChange(function(){_.setFromQuaternion(S,void 0,!1)}),Object.defineProperties(e,{position:{configurable:!0,enumerable:!0,value:l},rotation:{configurable:!0,enumerable:!0,value:_},quaternion:{configurable:!0,enumerable:!0,value:S},scale:{configurable:!0,enumerable:!0,value:k},modelViewMatrix:{value:new sp},normalMatrix:{value:new mf}}),e.matrix=new sp,e.matrixWorld=new sp,e.matrixAutoUpdate=Object3D.DEFAULT_MATRIX_AUTO_UPDATE,e.matrixWorldAutoUpdate=Object3D.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,e.matrixWorldNeedsUpdate=!1,e.layers=new yp,e.visible=!0,e.castShadow=!1,e.receiveShadow=!1,e.frustumCulled=!0,e.renderOrder=0,e.animations=[],e.customDepthMaterial=void 0,e.customDistanceMaterial=void 0,e.userData={},e}return _inherits(Object3D,e),_createClass3(Object3D,[{key:"onBeforeShadow",value:function(){}},{key:"onAfterShadow",value:function(){}},{key:"onBeforeRender",value:function(){}},{key:"onAfterRender",value:function(){}},{key:"applyMatrix4",value:function(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}},{key:"applyQuaternion",value:function(e){return this.quaternion.premultiply(e),this}},{key:"setRotationFromAxisAngle",value:function(e,l){this.quaternion.setFromAxisAngle(e,l)}},{key:"setRotationFromEuler",value:function(e){this.quaternion.setFromEuler(e,!0)}},{key:"setRotationFromMatrix",value:function(e){this.quaternion.setFromRotationMatrix(e)}},{key:"setRotationFromQuaternion",value:function(e){this.quaternion.copy(e)}},{key:"rotateOnAxis",value:function(e,l){return Sp.setFromAxisAngle(e,l),this.quaternion.multiply(Sp),this}},{key:"rotateOnWorldAxis",value:function(e,l){return Sp.setFromAxisAngle(e,l),this.quaternion.premultiply(Sp),this}},{key:"rotateX",value:function(e){return this.rotateOnAxis(Cp,e)}},{key:"rotateY",value:function(e){return this.rotateOnAxis(Tp,e)}},{key:"rotateZ",value:function(e){return this.rotateOnAxis(Mp,e)}},{key:"translateOnAxis",value:function(e,l){return bp.copy(e).applyQuaternion(this.quaternion),this.position.add(bp.multiplyScalar(l)),this}},{key:"translateX",value:function(e){return this.translateOnAxis(Cp,e)}},{key:"translateY",value:function(e){return this.translateOnAxis(Tp,e)}},{key:"translateZ",value:function(e){return this.translateOnAxis(Mp,e)}},{key:"localToWorld",value:function(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}},{key:"worldToLocal",value:function(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(wp.copy(this.matrixWorld).invert())}},{key:"lookAt",value:function(e,l,_){e.isVector3?xp.copy(e):xp.set(e,l,_);var S=this.parent;this.updateWorldMatrix(!0,!1),kp.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?wp.lookAt(kp,xp,this.up):wp.lookAt(xp,kp,this.up),this.quaternion.setFromRotationMatrix(wp),S&&(wp.extractRotation(S.matrixWorld),Sp.setFromRotationMatrix(wp),this.quaternion.premultiply(Sp.invert()))}},{key:"add",value:function(e){if(arguments.length>1){for(var l=0;l<arguments.length;l++)this.add(arguments[l]);return this}return e===this||e&&e.isObject3D&&(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(Rp),Pp.child=e,this.dispatchEvent(Pp),Pp.child=null),this}},{key:"remove",value:function(e){if(arguments.length>1){for(var l=0;l<arguments.length;l++)this.remove(arguments[l]);return this}var _=this.children.indexOf(e);return-1!==_&&(e.parent=null,this.children.splice(_,1),e.dispatchEvent(Ip),Dp.child=e,this.dispatchEvent(Dp),Dp.child=null),this}},{key:"removeFromParent",value:function(){var e=this.parent;return null!==e&&e.remove(this),this}},{key:"clear",value:function(){return this.remove.apply(this,_toConsumableArray3(this.children))}},{key:"attach",value:function(e){return this.updateWorldMatrix(!0,!1),wp.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),wp.multiply(e.parent.matrixWorld)),e.applyMatrix4(wp),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(Rp),Pp.child=e,this.dispatchEvent(Pp),Pp.child=null,this}},{key:"getObjectById",value:function(e){return this.getObjectByProperty("id",e)}},{key:"getObjectByName",value:function(e){return this.getObjectByProperty("name",e)}},{key:"getObjectByProperty",value:function(e,l){if(this[e]===l)return this;for(var _=0,S=this.children.length;_<S;_++){var k=this.children[_].getObjectByProperty(e,l);if(void 0!==k)return k}}},{key:"getObjectsByProperty",value:function(e,l){var _=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];this[e]===l&&_.push(this);for(var S=this.children,k=0,E=S.length;k<E;k++)S[k].getObjectsByProperty(e,l,_);return _}},{key:"getWorldPosition",value:function(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}},{key:"getWorldQuaternion",value:function(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(kp,e,Ap),e}},{key:"getWorldScale",value:function(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(kp,Ep,e),e}},{key:"getWorldDirection",value:function(e){this.updateWorldMatrix(!0,!1);var l=this.matrixWorld.elements;return e.set(l[8],l[9],l[10]).normalize()}},{key:"raycast",value:function(){}},{key:"traverse",value:function(e){e(this);for(var l=this.children,_=0,S=l.length;_<S;_++)l[_].traverse(e)}},{key:"traverseVisible",value:function(e){if(!1!==this.visible){e(this);for(var l=this.children,_=0,S=l.length;_<S;_++)l[_].traverseVisible(e)}}},{key:"traverseAncestors",value:function(e){var l=this.parent;null!==l&&(e(l),l.traverseAncestors(e))}},{key:"updateMatrix",value:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}},{key:"updateMatrixWorld",value:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);for(var l=this.children,_=0,S=l.length;_<S;_++){l[_].updateMatrixWorld(e)}}},{key:"updateWorldMatrix",value:function(e,l){var _=this.parent;if(!0===e&&null!==_&&_.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),!0===l)for(var S=this.children,k=0,E=S.length;k<E;k++){S[k].updateWorldMatrix(!1,!0)}}},{key:"toJSON",value:function(e){var l=void 0===e||"string"==typeof e,_={};l&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},_.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});var S={};function serialize(l,_){return void 0===l[_.uuid]&&(l[_.uuid]=_.toJSON(e)),_.uuid}if(S.uuid=this.uuid,S.type=this.type,""!==this.name&&(S.name=this.name),!0===this.castShadow&&(S.castShadow=!0),!0===this.receiveShadow&&(S.receiveShadow=!0),!1===this.visible&&(S.visible=!1),!1===this.frustumCulled&&(S.frustumCulled=!1),0!==this.renderOrder&&(S.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(S.userData=this.userData),S.layers=this.layers.mask,S.matrix=this.matrix.toArray(),S.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(S.matrixAutoUpdate=!1),this.isInstancedMesh&&(S.type="InstancedMesh",S.count=this.count,S.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(S.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(S.type="BatchedMesh",S.perObjectFrustumCulled=this.perObjectFrustumCulled,S.sortObjects=this.sortObjects,S.drawRanges=this._drawRanges,S.reservedRanges=this._reservedRanges,S.geometryInfo=this._geometryInfo.map(function(e){return _objectSpread2(_objectSpread2({},e),{},{boundingBox:e.boundingBox?e.boundingBox.toJSON():void 0,boundingSphere:e.boundingSphere?e.boundingSphere.toJSON():void 0})}),S.instanceInfo=this._instanceInfo.map(function(e){return _objectSpread2({},e)}),S.availableInstanceIds=this._availableInstanceIds.slice(),S.availableGeometryIds=this._availableGeometryIds.slice(),S.nextIndexStart=this._nextIndexStart,S.nextVertexStart=this._nextVertexStart,S.geometryCount=this._geometryCount,S.maxInstanceCount=this._maxInstanceCount,S.maxVertexCount=this._maxVertexCount,S.maxIndexCount=this._maxIndexCount,S.geometryInitialized=this._geometryInitialized,S.matricesTexture=this._matricesTexture.toJSON(e),S.indirectTexture=this._indirectTexture.toJSON(e),null!==this._colorsTexture&&(S.colorsTexture=this._colorsTexture.toJSON(e)),null!==this.boundingSphere&&(S.boundingSphere=this.boundingSphere.toJSON()),null!==this.boundingBox&&(S.boundingBox=this.boundingBox.toJSON())),this.isScene)this.background&&(this.background.isColor?S.background=this.background.toJSON():this.background.isTexture&&(S.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(S.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){S.geometry=serialize(e.geometries,this.geometry);var k=this.geometry.parameters;if(void 0!==k&&void 0!==k.shapes){var E=k.shapes;if(Array.isArray(E))for(var T=0,M=E.length;T<M;T++){var R=E[T];serialize(e.shapes,R)}else serialize(e.shapes,E)}}if(this.isSkinnedMesh&&(S.bindMode=this.bindMode,S.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(serialize(e.skeletons,this.skeleton),S.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){for(var I=[],D=0,O=this.material.length;D<O;D++)I.push(serialize(e.materials,this.material[D]));S.material=I}else S.material=serialize(e.materials,this.material);if(this.children.length>0){S.children=[];for(var L=0;L<this.children.length;L++)S.children.push(this.children[L].toJSON(e).object)}if(this.animations.length>0){S.animations=[];for(var U=0;U<this.animations.length;U++){var B=this.animations[U];S.animations.push(serialize(e.animations,B))}}if(l){var z=extractFromCache(e.geometries),G=extractFromCache(e.materials),j=extractFromCache(e.textures),H=extractFromCache(e.images),V=extractFromCache(e.shapes),W=extractFromCache(e.skeletons),q=extractFromCache(e.animations),X=extractFromCache(e.nodes);z.length>0&&(_.geometries=z),G.length>0&&(_.materials=G),j.length>0&&(_.textures=j),H.length>0&&(_.images=H),V.length>0&&(_.shapes=V),W.length>0&&(_.skeletons=W),q.length>0&&(_.animations=q),X.length>0&&(_.nodes=X)}return _.object=S,_;function extractFromCache(e){var l=[];for(var _ in e){var S=e[_];delete S.metadata,l.push(S)}return l}}},{key:"clone",value:function(e){return(new this.constructor).copy(this,e)}},{key:"copy",value:function(e){var l=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),!0===l)for(var _=0;_<e.children.length;_++){var S=e.children[_];this.add(S.clone())}return this}}])}(uf);Op.DEFAULT_UP=new pf(0,1,0),Op.DEFAULT_MATRIX_AUTO_UPDATE=!0,Op.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;var Lp=new pf,Up=new pf,Fp=new pf,Np=new pf,Bp=new pf,zp=new pf,Gp=new pf,jp=new pf,Hp=new pf,Vp=new pf,Wp=new Rf,qp=new Rf,Xp=new Rf,Kp=function(){function Triangle(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new pf,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new pf,_=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new pf;_classCallCheck3(this,Triangle),this.a=e,this.b=l,this.c=_}return _createClass3(Triangle,[{key:"set",value:function(e,l,_){return this.a.copy(e),this.b.copy(l),this.c.copy(_),this}},{key:"setFromPointsAndIndices",value:function(e,l,_,S){return this.a.copy(e[l]),this.b.copy(e[_]),this.c.copy(e[S]),this}},{key:"setFromAttributeAndIndices",value:function(e,l,_,S){return this.a.fromBufferAttribute(e,l),this.b.fromBufferAttribute(e,_),this.c.fromBufferAttribute(e,S),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}},{key:"getArea",value:function(){return Lp.subVectors(this.c,this.b),Up.subVectors(this.a,this.b),.5*Lp.cross(Up).length()}},{key:"getMidpoint",value:function(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}},{key:"getNormal",value:function(e){return Triangle.getNormal(this.a,this.b,this.c,e)}},{key:"getPlane",value:function(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}},{key:"getBarycoord",value:function(e,l){return Triangle.getBarycoord(e,this.a,this.b,this.c,l)}},{key:"getInterpolation",value:function(e,l,_,S,k){return Triangle.getInterpolation(e,this.a,this.b,this.c,l,_,S,k)}},{key:"containsPoint",value:function(e){return Triangle.containsPoint(e,this.a,this.b,this.c)}},{key:"isFrontFacing",value:function(e){return Triangle.isFrontFacing(this.a,this.b,this.c,e)}},{key:"intersectsBox",value:function(e){return e.intersectsTriangle(this)}},{key:"closestPointToPoint",value:function(e,l){var _,S,k=this.a,E=this.b,T=this.c;Bp.subVectors(E,k),zp.subVectors(T,k),jp.subVectors(e,k);var M=Bp.dot(jp),R=zp.dot(jp);if(M<=0&&R<=0)return l.copy(k);Hp.subVectors(e,E);var I=Bp.dot(Hp),D=zp.dot(Hp);if(I>=0&&D<=I)return l.copy(E);var O=M*D-I*R;if(O<=0&&M>=0&&I<=0)return _=M/(M-I),l.copy(k).addScaledVector(Bp,_);Vp.subVectors(e,T);var L=Bp.dot(Vp),U=zp.dot(Vp);if(U>=0&&L<=U)return l.copy(T);var B=L*R-M*U;if(B<=0&&R>=0&&U<=0)return S=R/(R-U),l.copy(k).addScaledVector(zp,S);var z=I*U-L*D;if(z<=0&&D-I>=0&&L-U>=0)return Gp.subVectors(T,E),S=(D-I)/(D-I+(L-U)),l.copy(E).addScaledVector(Gp,S);var G=1/(z+B+O);return _=B*G,S=O*G,l.copy(k).addScaledVector(Bp,_).addScaledVector(zp,S)}},{key:"equals",value:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}],[{key:"getNormal",value:function(e,l,_,S){S.subVectors(_,l),Lp.subVectors(e,l),S.cross(Lp);var k=S.lengthSq();return k>0?S.multiplyScalar(1/Math.sqrt(k)):S.set(0,0,0)}},{key:"getBarycoord",value:function(e,l,_,S,k){Lp.subVectors(S,l),Up.subVectors(_,l),Fp.subVectors(e,l);var E=Lp.dot(Lp),T=Lp.dot(Up),M=Lp.dot(Fp),R=Up.dot(Up),I=Up.dot(Fp),D=E*R-T*T;if(0===D)return k.set(0,0,0),null;var O=1/D,L=(R*M-T*I)*O,U=(E*I-T*M)*O;return k.set(1-L-U,U,L)}},{key:"containsPoint",value:function(e,l,_,S){return null!==this.getBarycoord(e,l,_,S,Np)&&(Np.x>=0&&Np.y>=0&&Np.x+Np.y<=1)}},{key:"getInterpolation",value:function(e,l,_,S,k,E,T,M){return null===this.getBarycoord(e,l,_,S,Np)?(M.x=0,M.y=0,"z"in M&&(M.z=0),"w"in M&&(M.w=0),null):(M.setScalar(0),M.addScaledVector(k,Np.x),M.addScaledVector(E,Np.y),M.addScaledVector(T,Np.z),M)}},{key:"getInterpolatedAttribute",value:function(e,l,_,S,k,E){return Wp.setScalar(0),qp.setScalar(0),Xp.setScalar(0),Wp.fromBufferAttribute(e,l),qp.fromBufferAttribute(e,_),Xp.fromBufferAttribute(e,S),E.setScalar(0),E.addScaledVector(Wp,k.x),E.addScaledVector(qp,k.y),E.addScaledVector(Xp,k.z),E}},{key:"isFrontFacing",value:function(e,l,_,S){return Lp.subVectors(_,l),Up.subVectors(e,l),Lp.cross(Up).dot(S)<0}}])}(),Yp={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Qp={h:0,s:0,l:0},Jp={h:0,s:0,l:0};function hue2rgb(e,l,_){return _<0&&(_+=1),_>1&&(_-=1),_<1/6?e+6*(l-e)*_:_<.5?l:_<2/3?e+6*(l-e)*(2/3-_):e}var Zp=function(){return _createClass3(function Color(e,l,_){return _classCallCheck3(this,Color),this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,l,_)},[{key:"set",value:function(e,l,_){if(void 0===l&&void 0===_){var S=e;S&&S.isColor?this.copy(S):"number"==typeof S?this.setHex(S):"string"==typeof S&&this.setStyle(S)}else this.setRGB(e,l,_);return this}},{key:"setScalar",value:function(e){return this.r=e,this.g=e,this.b=e,this}},{key:"setHex",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$d;return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,xf.colorSpaceToWorking(this,l),this}},{key:"setRGB",value:function(e,l,_){var S=arguments.length>3&&void 0!==arguments[3]?arguments[3]:xf.workingColorSpace;return this.r=e,this.g=l,this.b=_,xf.colorSpaceToWorking(this,S),this}},{key:"setHSL",value:function(e,l,_){var S,k=arguments.length>3&&void 0!==arguments[3]?arguments[3]:xf.workingColorSpace;if(e=(e%(S=1)+S)%S,l=_clamp2(l,0,1),_=_clamp2(_,0,1),0===l)this.r=this.g=this.b=_;else{var E=_<=.5?_*(1+l):_+l-_*l,T=2*_-E;this.r=hue2rgb(T,E,e+1/3),this.g=hue2rgb(T,E,e),this.b=hue2rgb(T,E,e-1/3)}return xf.colorSpaceToWorking(this,k),this}},{key:"setStyle",value:function(e){var l,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$d;function handleAlpha(e){void 0!==e&&parseFloat(e)}if(l=/^(\w+)\(([^\)]*)\)/.exec(e)){var S,k=l[1],E=l[2];switch(k){case"rgb":case"rgba":if(S=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(E))return handleAlpha(S[4]),this.setRGB(Math.min(255,parseInt(S[1],10))/255,Math.min(255,parseInt(S[2],10))/255,Math.min(255,parseInt(S[3],10))/255,_);if(S=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(E))return handleAlpha(S[4]),this.setRGB(Math.min(100,parseInt(S[1],10))/100,Math.min(100,parseInt(S[2],10))/100,Math.min(100,parseInt(S[3],10))/100,_);break;case"hsl":case"hsla":if(S=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(E))return handleAlpha(S[4]),this.setHSL(parseFloat(S[1])/360,parseFloat(S[2])/100,parseFloat(S[3])/100,_)}}else if(l=/^\#([A-Fa-f\d]+)$/.exec(e)){var T=l[1],M=T.length;if(3===M)return this.setRGB(parseInt(T.charAt(0),16)/15,parseInt(T.charAt(1),16)/15,parseInt(T.charAt(2),16)/15,_);if(6===M)return this.setHex(parseInt(T,16),_)}else if(e&&e.length>0)return this.setColorName(e,_);return this}},{key:"setColorName",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$d,_=Yp[e.toLowerCase()];return void 0!==_&&this.setHex(_,l),this}},{key:"clone",value:function(){return new this.constructor(this.r,this.g,this.b)}},{key:"copy",value:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}},{key:"copySRGBToLinear",value:function(e){return this.r=SRGBToLinear(e.r),this.g=SRGBToLinear(e.g),this.b=SRGBToLinear(e.b),this}},{key:"copyLinearToSRGB",value:function(e){return this.r=LinearToSRGB(e.r),this.g=LinearToSRGB(e.g),this.b=LinearToSRGB(e.b),this}},{key:"convertSRGBToLinear",value:function(){return this.copySRGBToLinear(this),this}},{key:"convertLinearToSRGB",value:function(){return this.copyLinearToSRGB(this),this}},{key:"getHex",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$d;return xf.workingToColorSpace($p.copy(this),e),65536*Math.round(_clamp2(255*$p.r,0,255))+256*Math.round(_clamp2(255*$p.g,0,255))+Math.round(_clamp2(255*$p.b,0,255))}},{key:"getHexString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$d;return("000000"+this.getHex(e).toString(16)).slice(-6)}},{key:"getHSL",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:xf.workingColorSpace;xf.workingToColorSpace($p.copy(this),l);var _,S,k=$p.r,E=$p.g,T=$p.b,M=Math.max(k,E,T),R=Math.min(k,E,T),I=(R+M)/2;if(R===M)_=0,S=0;else{var D=M-R;switch(S=I<=.5?D/(M+R):D/(2-M-R),M){case k:_=(E-T)/D+(E<T?6:0);break;case E:_=(T-k)/D+2;break;case T:_=(k-E)/D+4}_/=6}return e.h=_,e.s=S,e.l=I,e}},{key:"getRGB",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:xf.workingColorSpace;return xf.workingToColorSpace($p.copy(this),l),e.r=$p.r,e.g=$p.g,e.b=$p.b,e}},{key:"getStyle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$d;xf.workingToColorSpace($p.copy(this),e);var l=$p.r,_=$p.g,S=$p.b;return e!==$d?"color(".concat(e," ").concat(l.toFixed(3)," ").concat(_.toFixed(3)," ").concat(S.toFixed(3),")"):"rgb(".concat(Math.round(255*l),",").concat(Math.round(255*_),",").concat(Math.round(255*S),")")}},{key:"offsetHSL",value:function(e,l,_){return this.getHSL(Qp),this.setHSL(Qp.h+e,Qp.s+l,Qp.l+_)}},{key:"add",value:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}},{key:"addColors",value:function(e,l){return this.r=e.r+l.r,this.g=e.g+l.g,this.b=e.b+l.b,this}},{key:"addScalar",value:function(e){return this.r+=e,this.g+=e,this.b+=e,this}},{key:"sub",value:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}},{key:"multiply",value:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}},{key:"multiplyScalar",value:function(e){return this.r*=e,this.g*=e,this.b*=e,this}},{key:"lerp",value:function(e,l){return this.r+=(e.r-this.r)*l,this.g+=(e.g-this.g)*l,this.b+=(e.b-this.b)*l,this}},{key:"lerpColors",value:function(e,l,_){return this.r=e.r+(l.r-e.r)*_,this.g=e.g+(l.g-e.g)*_,this.b=e.b+(l.b-e.b)*_,this}},{key:"lerpHSL",value:function(e,l){this.getHSL(Qp),e.getHSL(Jp);var _=lerp(Qp.h,Jp.h,l),S=lerp(Qp.s,Jp.s,l),k=lerp(Qp.l,Jp.l,l);return this.setHSL(_,S,k),this}},{key:"setFromVector3",value:function(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}},{key:"applyMatrix3",value:function(e){var l=this.r,_=this.g,S=this.b,k=e.elements;return this.r=k[0]*l+k[3]*_+k[6]*S,this.g=k[1]*l+k[4]*_+k[7]*S,this.b=k[2]*l+k[5]*_+k[8]*S,this}},{key:"equals",value:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}},{key:"fromArray",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.r=e[l],this.g=e[l+1],this.b=e[l+2],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[l]=this.r,e[l+1]=this.g,e[l+2]=this.b,e}},{key:"fromBufferAttribute",value:function(e,l){return this.r=e.getX(l),this.g=e.getY(l),this.b=e.getZ(l),this}},{key:"toJSON",value:function(){return this.getHex()}},{key:Symbol.iterator,value:_regenerator().m(function value(){return _regenerator().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.r;case 1:return e.n=2,this.g;case 2:return e.n=3,this.b;case 3:return e.a(2)}},value,this)})}])}();I("bh",Zp);var $p=new Zp;Zp.NAMES=Yp;var ev=0,tv=function(e){function Material(){var e;return _classCallCheck3(this,Material),(e=_callSuper(this,Material)).isMaterial=!0,Object.defineProperty(e,"id",{value:ev++}),e.uuid=generateUUID(),e.name="",e.type="Material",e.blending=1,e.side=0,e.vertexColors=!1,e.opacity=1,e.transparent=!1,e.alphaHash=!1,e.blendSrc=204,e.blendDst=205,e.blendEquation=jh,e.blendSrcAlpha=null,e.blendDstAlpha=null,e.blendEquationAlpha=null,e.blendColor=new Zp(0,0,0),e.blendAlpha=0,e.depthFunc=3,e.depthTest=!0,e.depthWrite=!0,e.stencilWriteMask=255,e.stencilFunc=519,e.stencilRef=0,e.stencilFuncMask=255,e.stencilFail=nf,e.stencilZFail=nf,e.stencilZPass=nf,e.stencilWrite=!1,e.clippingPlanes=null,e.clipIntersection=!1,e.clipShadows=!1,e.shadowSide=null,e.colorWrite=!0,e.precision=null,e.polygonOffset=!1,e.polygonOffsetFactor=0,e.polygonOffsetUnits=0,e.dithering=!1,e.alphaToCoverage=!1,e.premultipliedAlpha=!1,e.forceSinglePass=!1,e.allowOverride=!0,e.visible=!0,e.toneMapped=!0,e.userData={},e.version=0,e._alphaTest=0,e}return _inherits(Material,e),_createClass3(Material,[{key:"alphaTest",get:function(){return this._alphaTest},set:function(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}},{key:"onBeforeRender",value:function(){}},{key:"onBeforeCompile",value:function(){}},{key:"customProgramCacheKey",value:function(){return this.onBeforeCompile.toString()}},{key:"setValues",value:function(e){if(void 0!==e)for(var l in e){var _=e[l];if(void 0!==_){var S=this[l];void 0!==S&&(S&&S.isColor?S.set(_):S&&S.isVector3&&_&&_.isVector3?S.copy(_):this[l]=_)}}}},{key:"toJSON",value:function(e){var l=void 0===e||"string"==typeof e;l&&(e={textures:{},images:{}});var _={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};function extractFromCache(e){var l=[];for(var _ in e){var S=e[_];delete S.metadata,l.push(S)}return l}if(_.uuid=this.uuid,_.type=this.type,""!==this.name&&(_.name=this.name),this.color&&this.color.isColor&&(_.color=this.color.getHex()),void 0!==this.roughness&&(_.roughness=this.roughness),void 0!==this.metalness&&(_.metalness=this.metalness),void 0!==this.sheen&&(_.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(_.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(_.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(_.emissive=this.emissive.getHex()),void 0!==this.emissiveIntensity&&1!==this.emissiveIntensity&&(_.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(_.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(_.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(_.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(_.shininess=this.shininess),void 0!==this.clearcoat&&(_.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(_.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(_.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(_.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(_.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,_.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.sheenColorMap&&this.sheenColorMap.isTexture&&(_.sheenColorMap=this.sheenColorMap.toJSON(e).uuid),this.sheenRoughnessMap&&this.sheenRoughnessMap.isTexture&&(_.sheenRoughnessMap=this.sheenRoughnessMap.toJSON(e).uuid),void 0!==this.dispersion&&(_.dispersion=this.dispersion),void 0!==this.iridescence&&(_.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(_.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(_.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(_.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(_.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),void 0!==this.anisotropy&&(_.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(_.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(_.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(_.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(_.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(_.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(_.lightMap=this.lightMap.toJSON(e).uuid,_.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(_.aoMap=this.aoMap.toJSON(e).uuid,_.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(_.bumpMap=this.bumpMap.toJSON(e).uuid,_.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(_.normalMap=this.normalMap.toJSON(e).uuid,_.normalMapType=this.normalMapType,_.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(_.displacementMap=this.displacementMap.toJSON(e).uuid,_.displacementScale=this.displacementScale,_.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(_.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(_.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(_.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(_.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(_.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(_.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(_.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(_.combine=this.combine)),void 0!==this.envMapRotation&&(_.envMapRotation=this.envMapRotation.toArray()),void 0!==this.envMapIntensity&&(_.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(_.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(_.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(_.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(_.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(_.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(_.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(_.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(_.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(_.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(_.size=this.size),null!==this.shadowSide&&(_.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(_.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(_.blending=this.blending),0!==this.side&&(_.side=this.side),!0===this.vertexColors&&(_.vertexColors=!0),this.opacity<1&&(_.opacity=this.opacity),!0===this.transparent&&(_.transparent=!0),204!==this.blendSrc&&(_.blendSrc=this.blendSrc),205!==this.blendDst&&(_.blendDst=this.blendDst),this.blendEquation!==jh&&(_.blendEquation=this.blendEquation),null!==this.blendSrcAlpha&&(_.blendSrcAlpha=this.blendSrcAlpha),null!==this.blendDstAlpha&&(_.blendDstAlpha=this.blendDstAlpha),null!==this.blendEquationAlpha&&(_.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(_.blendColor=this.blendColor.getHex()),0!==this.blendAlpha&&(_.blendAlpha=this.blendAlpha),3!==this.depthFunc&&(_.depthFunc=this.depthFunc),!1===this.depthTest&&(_.depthTest=this.depthTest),!1===this.depthWrite&&(_.depthWrite=this.depthWrite),!1===this.colorWrite&&(_.colorWrite=this.colorWrite),255!==this.stencilWriteMask&&(_.stencilWriteMask=this.stencilWriteMask),519!==this.stencilFunc&&(_.stencilFunc=this.stencilFunc),0!==this.stencilRef&&(_.stencilRef=this.stencilRef),255!==this.stencilFuncMask&&(_.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==nf&&(_.stencilFail=this.stencilFail),this.stencilZFail!==nf&&(_.stencilZFail=this.stencilZFail),this.stencilZPass!==nf&&(_.stencilZPass=this.stencilZPass),!0===this.stencilWrite&&(_.stencilWrite=this.stencilWrite),void 0!==this.rotation&&0!==this.rotation&&(_.rotation=this.rotation),!0===this.polygonOffset&&(_.polygonOffset=!0),0!==this.polygonOffsetFactor&&(_.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(_.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(_.linewidth=this.linewidth),void 0!==this.dashSize&&(_.dashSize=this.dashSize),void 0!==this.gapSize&&(_.gapSize=this.gapSize),void 0!==this.scale&&(_.scale=this.scale),!0===this.dithering&&(_.dithering=!0),this.alphaTest>0&&(_.alphaTest=this.alphaTest),!0===this.alphaHash&&(_.alphaHash=!0),!0===this.alphaToCoverage&&(_.alphaToCoverage=!0),!0===this.premultipliedAlpha&&(_.premultipliedAlpha=!0),!0===this.forceSinglePass&&(_.forceSinglePass=!0),!0===this.wireframe&&(_.wireframe=!0),this.wireframeLinewidth>1&&(_.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(_.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(_.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(_.flatShading=!0),!1===this.visible&&(_.visible=!1),!1===this.toneMapped&&(_.toneMapped=!1),!1===this.fog&&(_.fog=!1),Object.keys(this.userData).length>0&&(_.userData=this.userData),l){var S=extractFromCache(e.textures),k=extractFromCache(e.images);S.length>0&&(_.textures=S),k.length>0&&(_.images=k)}return _}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;var l=e.clippingPlanes,_=null;if(null!==l){var S=l.length;_=new Array(S);for(var k=0;k!==S;++k)_[k]=l[k].clone()}return this.clippingPlanes=_,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}}])}(uf),rv=function(e){function MeshBasicMaterial(e){var l;return _classCallCheck3(this,MeshBasicMaterial),(l=_callSuper(this,MeshBasicMaterial)).isMeshBasicMaterial=!0,l.type="MeshBasicMaterial",l.color=new Zp(16777215),l.map=null,l.lightMap=null,l.lightMapIntensity=1,l.aoMap=null,l.aoMapIntensity=1,l.specularMap=null,l.alphaMap=null,l.envMap=null,l.envMapRotation=new mp,l.combine=0,l.reflectivity=1,l.refractionRatio=.98,l.wireframe=!1,l.wireframeLinewidth=1,l.wireframeLinecap="round",l.wireframeLinejoin="round",l.fog=!0,l.setValues(e),l}return _inherits(MeshBasicMaterial,e),_createClass3(MeshBasicMaterial,[{key:"copy",value:function(e){return _superPropGet(MeshBasicMaterial,"copy",this,3)([e]),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}])}(tv),nv=new pf,iv=new df,av=0,ov=function(){return _createClass3(function BufferAttribute(e,l){var _=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(_classCallCheck3(this,BufferAttribute),Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:av++}),this.name="",this.array=e,this.itemSize=l,this.count=void 0!==e?e.length/l:0,this.normalized=_,this.usage=35044,this.updateRanges=[],this.gpuType=od,this.version=0},[{key:"onUploadCallback",value:function(){}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"setUsage",value:function(e){return this.usage=e,this}},{key:"addUpdateRange",value:function(e,l){this.updateRanges.push({start:e,count:l})}},{key:"clearUpdateRanges",value:function(){this.updateRanges.length=0}},{key:"copy",value:function(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}},{key:"copyAt",value:function(e,l,_){e*=this.itemSize,_*=l.itemSize;for(var S=0,k=this.itemSize;S<k;S++)this.array[e+S]=l.array[_+S];return this}},{key:"copyArray",value:function(e){return this.array.set(e),this}},{key:"applyMatrix3",value:function(e){if(2===this.itemSize)for(var l=0,_=this.count;l<_;l++)iv.fromBufferAttribute(this,l),iv.applyMatrix3(e),this.setXY(l,iv.x,iv.y);else if(3===this.itemSize)for(var S=0,k=this.count;S<k;S++)nv.fromBufferAttribute(this,S),nv.applyMatrix3(e),this.setXYZ(S,nv.x,nv.y,nv.z);return this}},{key:"applyMatrix4",value:function(e){for(var l=0,_=this.count;l<_;l++)nv.fromBufferAttribute(this,l),nv.applyMatrix4(e),this.setXYZ(l,nv.x,nv.y,nv.z);return this}},{key:"applyNormalMatrix",value:function(e){for(var l=0,_=this.count;l<_;l++)nv.fromBufferAttribute(this,l),nv.applyNormalMatrix(e),this.setXYZ(l,nv.x,nv.y,nv.z);return this}},{key:"transformDirection",value:function(e){for(var l=0,_=this.count;l<_;l++)nv.fromBufferAttribute(this,l),nv.transformDirection(e),this.setXYZ(l,nv.x,nv.y,nv.z);return this}},{key:"set",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,l),this}},{key:"getComponent",value:function(e,l){var _=this.array[e*this.itemSize+l];return this.normalized&&(_=denormalize(_,this.array)),_}},{key:"setComponent",value:function(e,l,_){return this.normalized&&(_=normalize(_,this.array)),this.array[e*this.itemSize+l]=_,this}},{key:"getX",value:function(e){var l=this.array[e*this.itemSize];return this.normalized&&(l=denormalize(l,this.array)),l}},{key:"setX",value:function(e,l){return this.normalized&&(l=normalize(l,this.array)),this.array[e*this.itemSize]=l,this}},{key:"getY",value:function(e){var l=this.array[e*this.itemSize+1];return this.normalized&&(l=denormalize(l,this.array)),l}},{key:"setY",value:function(e,l){return this.normalized&&(l=normalize(l,this.array)),this.array[e*this.itemSize+1]=l,this}},{key:"getZ",value:function(e){var l=this.array[e*this.itemSize+2];return this.normalized&&(l=denormalize(l,this.array)),l}},{key:"setZ",value:function(e,l){return this.normalized&&(l=normalize(l,this.array)),this.array[e*this.itemSize+2]=l,this}},{key:"getW",value:function(e){var l=this.array[e*this.itemSize+3];return this.normalized&&(l=denormalize(l,this.array)),l}},{key:"setW",value:function(e,l){return this.normalized&&(l=normalize(l,this.array)),this.array[e*this.itemSize+3]=l,this}},{key:"setXY",value:function(e,l,_){return e*=this.itemSize,this.normalized&&(l=normalize(l,this.array),_=normalize(_,this.array)),this.array[e+0]=l,this.array[e+1]=_,this}},{key:"setXYZ",value:function(e,l,_,S){return e*=this.itemSize,this.normalized&&(l=normalize(l,this.array),_=normalize(_,this.array),S=normalize(S,this.array)),this.array[e+0]=l,this.array[e+1]=_,this.array[e+2]=S,this}},{key:"setXYZW",value:function(e,l,_,S,k){return e*=this.itemSize,this.normalized&&(l=normalize(l,this.array),_=normalize(_,this.array),S=normalize(S,this.array),k=normalize(k,this.array)),this.array[e+0]=l,this.array[e+1]=_,this.array[e+2]=S,this.array[e+3]=k,this}},{key:"onUpload",value:function(e){return this.onUploadCallback=e,this}},{key:"clone",value:function(){return new this.constructor(this.array,this.itemSize).copy(this)}},{key:"toJSON",value:function(){var e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),35044!==this.usage&&(e.usage=this.usage),e}}])}(),sv=function(e){function Uint16BufferAttribute(e,l,_){return _classCallCheck3(this,Uint16BufferAttribute),_callSuper(this,Uint16BufferAttribute,[new Uint16Array(e),l,_])}return _inherits(Uint16BufferAttribute,e),_createClass3(Uint16BufferAttribute)}(ov),uv=function(e){function Uint32BufferAttribute(e,l,_){return _classCallCheck3(this,Uint32BufferAttribute),_callSuper(this,Uint32BufferAttribute,[new Uint32Array(e),l,_])}return _inherits(Uint32BufferAttribute,e),_createClass3(Uint32BufferAttribute)}(ov),lv=function(e){function Float32BufferAttribute(e,l,_){return _classCallCheck3(this,Float32BufferAttribute),_callSuper(this,Float32BufferAttribute,[new Float32Array(e),l,_])}return _inherits(Float32BufferAttribute,e),_createClass3(Float32BufferAttribute)}(ov),cv=0,hv=new sp,dv=new Op,fv=new pf,pv=new Lf,vv=new Lf,gv=new pf,mv=function(e){function BufferGeometry(){var e;return _classCallCheck3(this,BufferGeometry),(e=_callSuper(this,BufferGeometry)).isBufferGeometry=!0,Object.defineProperty(e,"id",{value:cv++}),e.uuid=generateUUID(),e.name="",e.type="BufferGeometry",e.index=null,e.indirect=null,e.attributes={},e.morphAttributes={},e.morphTargetsRelative=!1,e.groups=[],e.boundingBox=null,e.boundingSphere=null,e.drawRange={start:0,count:1/0},e.userData={},e}return _inherits(BufferGeometry,e),_createClass3(BufferGeometry,[{key:"getIndex",value:function(){return this.index}},{key:"setIndex",value:function(e){return Array.isArray(e)?this.index=new(arrayNeedsUint32(e)?uv:sv)(e,1):this.index=e,this}},{key:"setIndirect",value:function(e){return this.indirect=e,this}},{key:"getIndirect",value:function(){return this.indirect}},{key:"getAttribute",value:function(e){return this.attributes[e]}},{key:"setAttribute",value:function(e,l){return this.attributes[e]=l,this}},{key:"deleteAttribute",value:function(e){return delete this.attributes[e],this}},{key:"hasAttribute",value:function(e){return void 0!==this.attributes[e]}},{key:"addGroup",value:function(e,l){var _=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.groups.push({start:e,count:l,materialIndex:_})}},{key:"clearGroups",value:function(){this.groups=[]}},{key:"setDrawRange",value:function(e,l){this.drawRange.start=e,this.drawRange.count=l}},{key:"applyMatrix4",value:function(e){var l=this.attributes.position;void 0!==l&&(l.applyMatrix4(e),l.needsUpdate=!0);var _=this.attributes.normal;if(void 0!==_){var S=(new mf).getNormalMatrix(e);_.applyNormalMatrix(S),_.needsUpdate=!0}var k=this.attributes.tangent;return void 0!==k&&(k.transformDirection(e),k.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}},{key:"applyQuaternion",value:function(e){return hv.makeRotationFromQuaternion(e),this.applyMatrix4(hv),this}},{key:"rotateX",value:function(e){return hv.makeRotationX(e),this.applyMatrix4(hv),this}},{key:"rotateY",value:function(e){return hv.makeRotationY(e),this.applyMatrix4(hv),this}},{key:"rotateZ",value:function(e){return hv.makeRotationZ(e),this.applyMatrix4(hv),this}},{key:"translate",value:function(e,l,_){return hv.makeTranslation(e,l,_),this.applyMatrix4(hv),this}},{key:"scale",value:function(e,l,_){return hv.makeScale(e,l,_),this.applyMatrix4(hv),this}},{key:"lookAt",value:function(e){return dv.lookAt(e),dv.updateMatrix(),this.applyMatrix4(dv.matrix),this}},{key:"center",value:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(fv).negate(),this.translate(fv.x,fv.y,fv.z),this}},{key:"setFromPoints",value:function(e){var l=this.getAttribute("position");if(void 0===l){for(var _=[],S=0,k=e.length;S<k;S++){var E=e[S];_.push(E.x,E.y,E.z||0)}this.setAttribute("position",new lv(_,3))}else{for(var T=Math.min(e.length,l.count),M=0;M<T;M++){var R=e[M];l.setXYZ(M,R.x,R.y,R.z||0)}e.length,l.count,l.needsUpdate=!0}return this}},{key:"computeBoundingBox",value:function(){null===this.boundingBox&&(this.boundingBox=new Lf);var e=this.attributes.position,l=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)this.boundingBox.set(new pf(-1/0,-1/0,-1/0),new pf(1/0,1/0,1/0));else{if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),l)for(var _=0,S=l.length;_<S;_++){var k=l[_];pv.setFromBufferAttribute(k),this.morphTargetsRelative?(gv.addVectors(this.boundingBox.min,pv.min),this.boundingBox.expandByPoint(gv),gv.addVectors(this.boundingBox.max,pv.max),this.boundingBox.expandByPoint(gv)):(this.boundingBox.expandByPoint(pv.min),this.boundingBox.expandByPoint(pv.max))}}else this.boundingBox.makeEmpty();isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z)}}},{key:"computeBoundingSphere",value:function(){null===this.boundingSphere&&(this.boundingSphere=new Zf);var e=this.attributes.position,l=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)this.boundingSphere.set(new pf,1/0);else if(e){var _=this.boundingSphere.center;if(pv.setFromBufferAttribute(e),l)for(var S=0,k=l.length;S<k;S++){var E=l[S];vv.setFromBufferAttribute(E),this.morphTargetsRelative?(gv.addVectors(pv.min,vv.min),pv.expandByPoint(gv),gv.addVectors(pv.max,vv.max),pv.expandByPoint(gv)):(pv.expandByPoint(vv.min),pv.expandByPoint(vv.max))}pv.getCenter(_);for(var T=0,M=0,R=e.count;M<R;M++)gv.fromBufferAttribute(e,M),T=Math.max(T,_.distanceToSquared(gv));if(l)for(var I=0,D=l.length;I<D;I++)for(var O=l[I],L=this.morphTargetsRelative,U=0,B=O.count;U<B;U++)gv.fromBufferAttribute(O,U),L&&(fv.fromBufferAttribute(e,U),gv.add(fv)),T=Math.max(T,_.distanceToSquared(gv));this.boundingSphere.radius=Math.sqrt(T),isNaN(this.boundingSphere.radius)}}},{key:"computeTangents",value:function(){var e=this.index,l=this.attributes;if(null!==e&&void 0!==l.position&&void 0!==l.normal&&void 0!==l.uv){var _=l.position,S=l.normal,k=l.uv;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new ov(new Float32Array(4*_.count),4));for(var E=this.getAttribute("tangent"),T=[],M=[],R=0;R<_.count;R++)T[R]=new pf,M[R]=new pf;var I=new pf,D=new pf,O=new pf,L=new df,U=new df,B=new df,z=new pf,G=new pf,j=this.groups;0===j.length&&(j=[{start:0,count:e.count}]);for(var H=0,V=j.length;H<V;++H)for(var W=j[H],q=W.start,X=q,K=q+W.count;X<K;X+=3)handleTriangle(e.getX(X+0),e.getX(X+1),e.getX(X+2));for(var Y=new pf,Q=new pf,J=new pf,Z=new pf,$=0,ee=j.length;$<ee;++$)for(var te=j[$],re=te.start,ne=re,ie=re+te.count;ne<ie;ne+=3)handleVertex(e.getX(ne+0)),handleVertex(e.getX(ne+1)),handleVertex(e.getX(ne+2))}function handleTriangle(e,l,S){I.fromBufferAttribute(_,e),D.fromBufferAttribute(_,l),O.fromBufferAttribute(_,S),L.fromBufferAttribute(k,e),U.fromBufferAttribute(k,l),B.fromBufferAttribute(k,S),D.sub(I),O.sub(I),U.sub(L),B.sub(L);var E=1/(U.x*B.y-B.x*U.y);isFinite(E)&&(z.copy(D).multiplyScalar(B.y).addScaledVector(O,-U.y).multiplyScalar(E),G.copy(O).multiplyScalar(U.x).addScaledVector(D,-B.x).multiplyScalar(E),T[e].add(z),T[l].add(z),T[S].add(z),M[e].add(G),M[l].add(G),M[S].add(G))}function handleVertex(e){J.fromBufferAttribute(S,e),Z.copy(J);var l=T[e];Y.copy(l),Y.sub(J.multiplyScalar(J.dot(l))).normalize(),Q.crossVectors(Z,l);var _=Q.dot(M[e])<0?-1:1;E.setXYZW(e,Y.x,Y.y,Y.z,_)}}},{key:"computeVertexNormals",value:function(){var e=this.index,l=this.getAttribute("position");if(void 0!==l){var _=this.getAttribute("normal");if(void 0===_)_=new ov(new Float32Array(3*l.count),3),this.setAttribute("normal",_);else for(var S=0,k=_.count;S<k;S++)_.setXYZ(S,0,0,0);var E=new pf,T=new pf,M=new pf,R=new pf,I=new pf,D=new pf,O=new pf,L=new pf;if(e)for(var U=0,B=e.count;U<B;U+=3){var z=e.getX(U+0),G=e.getX(U+1),j=e.getX(U+2);E.fromBufferAttribute(l,z),T.fromBufferAttribute(l,G),M.fromBufferAttribute(l,j),O.subVectors(M,T),L.subVectors(E,T),O.cross(L),R.fromBufferAttribute(_,z),I.fromBufferAttribute(_,G),D.fromBufferAttribute(_,j),R.add(O),I.add(O),D.add(O),_.setXYZ(z,R.x,R.y,R.z),_.setXYZ(G,I.x,I.y,I.z),_.setXYZ(j,D.x,D.y,D.z)}else for(var H=0,V=l.count;H<V;H+=3)E.fromBufferAttribute(l,H+0),T.fromBufferAttribute(l,H+1),M.fromBufferAttribute(l,H+2),O.subVectors(M,T),L.subVectors(E,T),O.cross(L),_.setXYZ(H+0,O.x,O.y,O.z),_.setXYZ(H+1,O.x,O.y,O.z),_.setXYZ(H+2,O.x,O.y,O.z);this.normalizeNormals(),_.needsUpdate=!0}}},{key:"normalizeNormals",value:function(){for(var e=this.attributes.normal,l=0,_=e.count;l<_;l++)gv.fromBufferAttribute(e,l),gv.normalize(),e.setXYZ(l,gv.x,gv.y,gv.z)}},{key:"toNonIndexed",value:function(){function convertBufferAttribute(e,l){for(var _=e.array,S=e.itemSize,k=e.normalized,E=new _.constructor(l.length*S),T=0,M=0,R=0,I=l.length;R<I;R++){T=e.isInterleavedBufferAttribute?l[R]*e.data.stride+e.offset:l[R]*S;for(var D=0;D<S;D++)E[M++]=_[T++]}return new ov(E,S,k)}if(null===this.index)return this;var e=new BufferGeometry,l=this.index.array,_=this.attributes;for(var S in _){var k=convertBufferAttribute(_[S],l);e.setAttribute(S,k)}var E=this.morphAttributes;for(var T in E){for(var M=[],R=E[T],I=0,D=R.length;I<D;I++){var O=convertBufferAttribute(R[I],l);M.push(O)}e.morphAttributes[T]=M}e.morphTargetsRelative=this.morphTargetsRelative;for(var L=this.groups,U=0,B=L.length;U<B;U++){var z=L[U];e.addGroup(z.start,z.count,z.materialIndex)}return e}},{key:"toJSON",value:function(){var e={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){var l=this.parameters;for(var _ in l)void 0!==l[_]&&(e[_]=l[_]);return e}e.data={attributes:{}};var S=this.index;null!==S&&(e.data.index={type:S.array.constructor.name,array:Array.prototype.slice.call(S.array)});var k=this.attributes;for(var E in k){var T=k[E];e.data.attributes[E]=T.toJSON(e.data)}var M={},R=!1;for(var I in this.morphAttributes){for(var D=this.morphAttributes[I],O=[],L=0,U=D.length;L<U;L++){var B=D[L];O.push(B.toJSON(e.data))}O.length>0&&(M[I]=O,R=!0)}R&&(e.data.morphAttributes=M,e.data.morphTargetsRelative=this.morphTargetsRelative);var z=this.groups;z.length>0&&(e.data.groups=JSON.parse(JSON.stringify(z)));var G=this.boundingSphere;return null!==G&&(e.data.boundingSphere=G.toJSON()),e}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;var l={};this.name=e.name;var _=e.index;null!==_&&this.setIndex(_.clone());var S=e.attributes;for(var k in S){var E=S[k];this.setAttribute(k,E.clone(l))}var T=e.morphAttributes;for(var M in T){for(var R=[],I=T[M],D=0,O=I.length;D<O;D++)R.push(I[D].clone(l));this.morphAttributes[M]=R}this.morphTargetsRelative=e.morphTargetsRelative;for(var L=e.groups,U=0,B=L.length;U<B;U++){var z=L[U];this.addGroup(z.start,z.count,z.materialIndex)}var G=e.boundingBox;null!==G&&(this.boundingBox=G.clone());var j=e.boundingSphere;return null!==j&&(this.boundingSphere=j.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}])}(uf),yv=new sp,_v=new op,bv=new Zf,Sv=new pf,wv=new pf,xv=new pf,kv=new pf,Av=new pf,Ev=new pf,Cv=new pf,Tv=new pf,Mv=function(e){function Mesh(){var e,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new mv,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new rv;return _classCallCheck3(this,Mesh),(e=_callSuper(this,Mesh)).isMesh=!0,e.type="Mesh",e.geometry=l,e.material=_,e.morphTargetDictionary=void 0,e.morphTargetInfluences=void 0,e.count=1,e.updateMorphTargets(),e}return _inherits(Mesh,e),_createClass3(Mesh,[{key:"copy",value:function(e,l){return _superPropGet(Mesh,"copy",this,3)([e,l]),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}},{key:"updateMorphTargets",value:function(){var e=this.geometry.morphAttributes,l=Object.keys(e);if(l.length>0){var _=e[l[0]];if(void 0!==_){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var S=0,k=_.length;S<k;S++){var E=_[S].name||String(S);this.morphTargetInfluences.push(0),this.morphTargetDictionary[E]=S}}}}},{key:"getVertexPosition",value:function(e,l){var _=this.geometry,S=_.attributes.position,k=_.morphAttributes.position,E=_.morphTargetsRelative;l.fromBufferAttribute(S,e);var T=this.morphTargetInfluences;if(k&&T){Ev.set(0,0,0);for(var M=0,R=k.length;M<R;M++){var I=T[M],D=k[M];0!==I&&(Av.fromBufferAttribute(D,e),E?Ev.addScaledVector(Av,I):Ev.addScaledVector(Av.sub(l),I))}l.add(Ev)}return l}},{key:"raycast",value:function(e,l){var _=this.geometry,S=this.material,k=this.matrixWorld;if(void 0!==S){if(null===_.boundingSphere&&_.computeBoundingSphere(),bv.copy(_.boundingSphere),bv.applyMatrix4(k),_v.copy(e.ray).recast(e.near),!1===bv.containsPoint(_v.origin)){if(null===_v.intersectSphere(bv,Sv))return;if(_v.origin.distanceToSquared(Sv)>Math.pow(e.far-e.near,2))return}yv.copy(k).invert(),_v.copy(e.ray).applyMatrix4(yv),null!==_.boundingBox&&!1===_v.intersectsBox(_.boundingBox)||this._computeIntersections(e,l,_v)}}},{key:"_computeIntersections",value:function(e,l,_){var S,k=this.geometry,E=this.material,T=k.index,M=k.attributes.position,R=k.attributes.uv,I=k.attributes.uv1,D=k.attributes.normal,O=k.groups,L=k.drawRange;if(null!==T)if(Array.isArray(E))for(var U=0,B=O.length;U<B;U++)for(var z=O[U],G=E[z.materialIndex],j=Math.max(z.start,L.start),H=Math.min(T.count,Math.min(z.start+z.count,L.start+L.count));j<H;j+=3){(S=checkGeometryIntersection(this,G,e,_,R,I,D,T.getX(j),T.getX(j+1),T.getX(j+2)))&&(S.faceIndex=Math.floor(j/3),S.face.materialIndex=z.materialIndex,l.push(S))}else for(var V=Math.max(0,L.start),W=Math.min(T.count,L.start+L.count);V<W;V+=3){(S=checkGeometryIntersection(this,E,e,_,R,I,D,T.getX(V),T.getX(V+1),T.getX(V+2)))&&(S.faceIndex=Math.floor(V/3),l.push(S))}else if(void 0!==M)if(Array.isArray(E))for(var q=0,X=O.length;q<X;q++)for(var K=O[q],Y=E[K.materialIndex],Q=Math.max(K.start,L.start),J=Math.min(M.count,Math.min(K.start+K.count,L.start+L.count));Q<J;Q+=3){(S=checkGeometryIntersection(this,Y,e,_,R,I,D,Q,Q+1,Q+2))&&(S.faceIndex=Math.floor(Q/3),S.face.materialIndex=K.materialIndex,l.push(S))}else for(var Z=Math.max(0,L.start),$=Math.min(M.count,L.start+L.count);Z<$;Z+=3){(S=checkGeometryIntersection(this,E,e,_,R,I,D,Z,Z+1,Z+2))&&(S.faceIndex=Math.floor(Z/3),l.push(S))}}}])}(Op);function checkGeometryIntersection(e,l,_,S,k,E,T,M,R,I){e.getVertexPosition(M,wv),e.getVertexPosition(R,xv),e.getVertexPosition(I,kv);var D=function(e,l,_,S,k,E,T,M){if(null===(1===l.side?S.intersectTriangle(T,E,k,!0,M):S.intersectTriangle(k,E,T,0===l.side,M)))return null;Tv.copy(M),Tv.applyMatrix4(e.matrixWorld);var R=_.ray.origin.distanceTo(Tv);return R<_.near||R>_.far?null:{distance:R,point:Tv.clone(),object:e}}(e,l,_,S,wv,xv,kv,Cv);if(D){var O=new pf;Kp.getBarycoord(Cv,wv,xv,kv,O),k&&(D.uv=Kp.getInterpolatedAttribute(k,M,R,I,O,new df)),E&&(D.uv1=Kp.getInterpolatedAttribute(E,M,R,I,O,new df)),T&&(D.normal=Kp.getInterpolatedAttribute(T,M,R,I,O,new pf),D.normal.dot(S.direction)>0&&D.normal.multiplyScalar(-1));var L={a:M,b:R,c:I,normal:new pf,materialIndex:0};Kp.getNormal(wv,xv,kv,L.normal),D.face=L,D.barycoord=O}return D}I("bl",Mv);var Rv=function(e){function BoxGeometry(){var e,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,k=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,E=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,T=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;_classCallCheck3(this,BoxGeometry),(e=_callSuper(this,BoxGeometry)).type="BoxGeometry",e.parameters={width:l,height:_,depth:S,widthSegments:k,heightSegments:E,depthSegments:T};var M=e;k=Math.floor(k),E=Math.floor(E),T=Math.floor(T);var R=[],I=[],D=[],O=[],L=0,U=0;function buildPlane(e,l,_,S,k,E,T,B,z,G,j){for(var H=E/z,V=T/G,W=E/2,q=T/2,X=B/2,K=z+1,Y=G+1,Q=0,J=0,Z=new pf,$=0;$<Y;$++)for(var ee=$*V-q,te=0;te<K;te++){var re=te*H-W;Z[e]=re*S,Z[l]=ee*k,Z[_]=X,I.push(Z.x,Z.y,Z.z),Z[e]=0,Z[l]=0,Z[_]=B>0?1:-1,D.push(Z.x,Z.y,Z.z),O.push(te/z),O.push(1-$/G),Q+=1}for(var ne=0;ne<G;ne++)for(var ie=0;ie<z;ie++){var ae=L+ie+K*ne,oe=L+ie+K*(ne+1),se=L+(ie+1)+K*(ne+1),ue=L+(ie+1)+K*ne;R.push(ae,oe,ue),R.push(oe,se,ue),J+=6}M.addGroup(U,J,j),U+=J,L+=Q}return buildPlane("z","y","x",-1,-1,S,_,l,T,E,0),buildPlane("z","y","x",1,-1,S,_,-l,T,E,1),buildPlane("x","z","y",1,1,l,S,_,k,T,2),buildPlane("x","z","y",1,-1,l,S,-_,k,T,3),buildPlane("x","y","z",1,-1,l,_,S,k,E,4),buildPlane("x","y","z",-1,-1,l,_,-S,k,E,5),e.setIndex(R),e.setAttribute("position",new lv(I,3)),e.setAttribute("normal",new lv(D,3)),e.setAttribute("uv",new lv(O,2)),e}return _inherits(BoxGeometry,e),_createClass3(BoxGeometry,[{key:"copy",value:function(e){return _superPropGet(BoxGeometry,"copy",this,3)([e]),this.parameters=Object.assign({},e.parameters),this}}],[{key:"fromJSON",value:function(e){return new BoxGeometry(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}])}(mv);function cloneUniforms(e){var l={};for(var _ in e)for(var S in l[_]={},e[_]){var k=e[_][S];k&&(k.isColor||k.isMatrix3||k.isMatrix4||k.isVector2||k.isVector3||k.isVector4||k.isTexture||k.isQuaternion)?k.isRenderTargetTexture?l[_][S]=null:l[_][S]=k.clone():Array.isArray(k)?l[_][S]=k.slice():l[_][S]=k}return l}function mergeUniforms(e){for(var l={},_=0;_<e.length;_++){var S=cloneUniforms(e[_]);for(var k in S)l[k]=S[k]}return l}function getUnlitUniformColorSpace(e){var l=e.getRenderTarget();return null===l?e.outputColorSpace:!0===l.isXRRenderTarget?l.texture.colorSpace:xf.workingColorSpace}var Iv={clone:cloneUniforms,merge:mergeUniforms},Pv=function(e){function ShaderMaterial(e){var l;return _classCallCheck3(this,ShaderMaterial),(l=_callSuper(this,ShaderMaterial)).isShaderMaterial=!0,l.type="ShaderMaterial",l.defines={},l.uniforms={},l.uniformsGroups=[],l.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",l.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",l.linewidth=1,l.wireframe=!1,l.wireframeLinewidth=1,l.fog=!1,l.lights=!1,l.clipping=!1,l.forceSinglePass=!0,l.extensions={clipCullDistance:!1,multiDraw:!1},l.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},l.index0AttributeName=void 0,l.uniformsNeedUpdate=!1,l.glslVersion=null,void 0!==e&&l.setValues(e),l}return _inherits(ShaderMaterial,e),_createClass3(ShaderMaterial,[{key:"copy",value:function(e){return _superPropGet(ShaderMaterial,"copy",this,3)([e]),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=cloneUniforms(e.uniforms),this.uniformsGroups=function(e){for(var l=[],_=0;_<e.length;_++)l.push(e[_].clone());return l}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}},{key:"toJSON",value:function(e){var l=_superPropGet(ShaderMaterial,"toJSON",this,3)([e]);for(var _ in l.glslVersion=this.glslVersion,l.uniforms={},this.uniforms){var S=this.uniforms[_].value;S&&S.isTexture?l.uniforms[_]={type:"t",value:S.toJSON(e).uuid}:S&&S.isColor?l.uniforms[_]={type:"c",value:S.getHex()}:S&&S.isVector2?l.uniforms[_]={type:"v2",value:S.toArray()}:S&&S.isVector3?l.uniforms[_]={type:"v3",value:S.toArray()}:S&&S.isVector4?l.uniforms[_]={type:"v4",value:S.toArray()}:S&&S.isMatrix3?l.uniforms[_]={type:"m3",value:S.toArray()}:S&&S.isMatrix4?l.uniforms[_]={type:"m4",value:S.toArray()}:l.uniforms[_]={value:S}}Object.keys(this.defines).length>0&&(l.defines=this.defines),l.vertexShader=this.vertexShader,l.fragmentShader=this.fragmentShader,l.lights=this.lights,l.clipping=this.clipping;var k={};for(var E in this.extensions)!0===this.extensions[E]&&(k[E]=!0);return Object.keys(k).length>0&&(l.extensions=k),l}}])}(tv);I("bi",Pv);var Dv=function(e){function Camera(){var e;return _classCallCheck3(this,Camera),(e=_callSuper(this,Camera)).isCamera=!0,e.type="Camera",e.matrixWorldInverse=new sp,e.projectionMatrix=new sp,e.projectionMatrixInverse=new sp,e.coordinateSystem=of,e._reversedDepth=!1,e}return _inherits(Camera,e),_createClass3(Camera,[{key:"reversedDepth",get:function(){return this._reversedDepth}},{key:"copy",value:function(e,l){return _superPropGet(Camera,"copy",this,3)([e,l]),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}},{key:"getWorldDirection",value:function(e){return _superPropGet(Camera,"getWorldDirection",this,3)([e]).negate()}},{key:"updateMatrixWorld",value:function(e){_superPropGet(Camera,"updateMatrixWorld",this,3)([e]),this.matrixWorldInverse.copy(this.matrixWorld).invert()}},{key:"updateWorldMatrix",value:function(e,l){_superPropGet(Camera,"updateWorldMatrix",this,3)([e,l]),this.matrixWorldInverse.copy(this.matrixWorld).invert()}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}])}(Op),Ov=new pf,Lv=new df,Uv=new df,Fv=function(e){function PerspectiveCamera(){var e,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,k=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2e3;return _classCallCheck3(this,PerspectiveCamera),(e=_callSuper(this,PerspectiveCamera)).isPerspectiveCamera=!0,e.type="PerspectiveCamera",e.fov=l,e.zoom=1,e.near=S,e.far=k,e.focus=10,e.aspect=_,e.view=null,e.filmGauge=35,e.filmOffset=0,e.updateProjectionMatrix(),e}return _inherits(PerspectiveCamera,e),_createClass3(PerspectiveCamera,[{key:"copy",value:function(e,l){return _superPropGet(PerspectiveCamera,"copy",this,3)([e,l]),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}},{key:"setFocalLength",value:function(e){var l=.5*this.getFilmHeight()/e;this.fov=2*hf*Math.atan(l),this.updateProjectionMatrix()}},{key:"getFocalLength",value:function(){var e=Math.tan(.5*cf*this.fov);return.5*this.getFilmHeight()/e}},{key:"getEffectiveFOV",value:function(){return 2*hf*Math.atan(Math.tan(.5*cf*this.fov)/this.zoom)}},{key:"getFilmWidth",value:function(){return this.filmGauge*Math.min(this.aspect,1)}},{key:"getFilmHeight",value:function(){return this.filmGauge/Math.max(this.aspect,1)}},{key:"getViewBounds",value:function(e,l,_){Ov.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),l.set(Ov.x,Ov.y).multiplyScalar(-e/Ov.z),Ov.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),_.set(Ov.x,Ov.y).multiplyScalar(-e/Ov.z)}},{key:"getViewSize",value:function(e,l){return this.getViewBounds(e,Lv,Uv),l.subVectors(Uv,Lv)}},{key:"setViewOffset",value:function(e,l,_,S,k,E){this.aspect=e/l,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=l,this.view.offsetX=_,this.view.offsetY=S,this.view.width=k,this.view.height=E,this.updateProjectionMatrix()}},{key:"clearViewOffset",value:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}},{key:"updateProjectionMatrix",value:function(){var e=this.near,l=e*Math.tan(.5*cf*this.fov)/this.zoom,_=2*l,S=this.aspect*_,k=-.5*S,E=this.view;if(null!==this.view&&this.view.enabled){var T=E.fullWidth,M=E.fullHeight;k+=E.offsetX*S/T,l-=E.offsetY*_/M,S*=E.width/T,_*=E.height/M}var R=this.filmOffset;0!==R&&(k+=e*R/this.getFilmWidth()),this.projectionMatrix.makePerspective(k,k+S,l,l-_,e,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}},{key:"toJSON",value:function(e){var l=_superPropGet(PerspectiveCamera,"toJSON",this,3)([e]);return l.object.fov=this.fov,l.object.zoom=this.zoom,l.object.near=this.near,l.object.far=this.far,l.object.focus=this.focus,l.object.aspect=this.aspect,null!==this.view&&(l.object.view=Object.assign({},this.view)),l.object.filmGauge=this.filmGauge,l.object.filmOffset=this.filmOffset,l}}])}(Dv);I("b5",Fv);var Nv=-90,Bv=function(e){function CubeCamera(e,l,_){var S;_classCallCheck3(this,CubeCamera),(S=_callSuper(this,CubeCamera)).type="CubeCamera",S.renderTarget=_,S.coordinateSystem=null,S.activeMipmapLevel=0;var k=new Fv(Nv,1,e,l);k.layers=S.layers,S.add(k);var E=new Fv(Nv,1,e,l);E.layers=S.layers,S.add(E);var T=new Fv(Nv,1,e,l);T.layers=S.layers,S.add(T);var M=new Fv(Nv,1,e,l);M.layers=S.layers,S.add(M);var R=new Fv(Nv,1,e,l);R.layers=S.layers,S.add(R);var I=new Fv(Nv,1,e,l);return I.layers=S.layers,S.add(I),S}return _inherits(CubeCamera,e),_createClass3(CubeCamera,[{key:"updateCoordinateSystem",value:function(){var e,l=this.coordinateSystem,_=this.children.concat(),S=_slicedToArray(_,6),k=S[0],E=S[1],T=S[2],M=S[3],R=S[4],I=S[5],D=_createForOfIteratorHelper2(_);try{for(D.s();!(e=D.n()).done;){var O=e.value;this.remove(O)}}catch(z){D.e(z)}finally{D.f()}if(l===of)k.up.set(0,1,0),k.lookAt(1,0,0),E.up.set(0,1,0),E.lookAt(-1,0,0),T.up.set(0,0,-1),T.lookAt(0,1,0),M.up.set(0,0,1),M.lookAt(0,-1,0),R.up.set(0,1,0),R.lookAt(0,0,1),I.up.set(0,1,0),I.lookAt(0,0,-1);else{if(l!==sf)throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+l);k.up.set(0,-1,0),k.lookAt(-1,0,0),E.up.set(0,-1,0),E.lookAt(1,0,0),T.up.set(0,0,1),T.lookAt(0,1,0),M.up.set(0,0,-1),M.lookAt(0,-1,0),R.up.set(0,-1,0),R.lookAt(0,0,1),I.up.set(0,-1,0),I.lookAt(0,0,-1)}var L,U=_createForOfIteratorHelper2(_);try{for(U.s();!(L=U.n()).done;){var B=L.value;this.add(B),B.updateMatrixWorld()}}catch(z){U.e(z)}finally{U.f()}}},{key:"update",value:function(e,l){null===this.parent&&this.updateMatrixWorld();var _=this.renderTarget,S=this.activeMipmapLevel;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());var k=_slicedToArray(this.children,6),E=k[0],T=k[1],M=k[2],R=k[3],I=k[4],D=k[5],O=e.getRenderTarget(),L=e.getActiveCubeFace(),U=e.getActiveMipmapLevel(),B=e.xr.enabled;e.xr.enabled=!1;var z=_.texture.generateMipmaps;_.texture.generateMipmaps=!1,e.setRenderTarget(_,0,S),e.render(l,E),e.setRenderTarget(_,1,S),e.render(l,T),e.setRenderTarget(_,2,S),e.render(l,M),e.setRenderTarget(_,3,S),e.render(l,R),e.setRenderTarget(_,4,S),e.render(l,I),_.texture.generateMipmaps=z,e.setRenderTarget(_,5,S),e.render(l,D),e.setRenderTarget(O,L,U),e.xr.enabled=B,_.texture.needsPMREMUpdate=!0}}])}(Op),zv=function(e){function CubeTexture(){var e,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Hh,S=arguments.length>2?arguments[2]:void 0,k=arguments.length>3?arguments[3]:void 0,E=arguments.length>4?arguments[4]:void 0,T=arguments.length>5?arguments[5]:void 0,M=arguments.length>6?arguments[6]:void 0,R=arguments.length>7?arguments[7]:void 0,I=arguments.length>8?arguments[8]:void 0,D=arguments.length>9?arguments[9]:void 0;return _classCallCheck3(this,CubeTexture),(e=_callSuper(this,CubeTexture,[l,_,S,k,E,T,M,R,I,D])).isCubeTexture=!0,e.flipY=!1,e}return _inherits(CubeTexture,e),_createClass3(CubeTexture,[{key:"images",get:function(){return this.image},set:function(e){this.image=e}}])}(Mf),Gv=function(e){function WebGLCubeRenderTarget(){var e,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck3(this,WebGLCubeRenderTarget),(e=_callSuper(this,WebGLCubeRenderTarget,[l,l,_])).isWebGLCubeRenderTarget=!0;var S={width:l,height:l,depth:1},k=[S,S,S,S,S,S];return e.texture=new zv(k),e._setTextureOptions(_),e.texture.isRenderTargetTexture=!0,e}return _inherits(WebGLCubeRenderTarget,e),_createClass3(WebGLCubeRenderTarget,[{key:"fromEquirectangularTexture",value:function(e,l){this.texture.type=l.type,this.texture.colorSpace=l.colorSpace,this.texture.generateMipmaps=l.generateMipmaps,this.texture.minFilter=l.minFilter,this.texture.magFilter=l.magFilter;var _={tEquirect:{value:null}},S="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",k="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",E=new Rv(5,5,5),T=new Pv({name:"CubemapFromEquirect",uniforms:cloneUniforms(_),vertexShader:S,fragmentShader:k,side:1,blending:0});T.uniforms.tEquirect.value=l;var M=new Mv(E,T),R=l.minFilter;return l.minFilter===$h&&(l.minFilter=Jh),new Bv(1,10,this).update(e,M),l.minFilter=R,M.geometry.dispose(),M.material.dispose(),this}},{key:"clear",value:function(e){for(var l=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],_=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],S=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],k=e.getRenderTarget(),E=0;E<6;E++)e.setRenderTarget(this,E),e.clear(l,_,S);e.setRenderTarget(k)}}])}(Pf),jv=function(e){function Group(){var e;return _classCallCheck3(this,Group),(e=_callSuper(this,Group)).isGroup=!0,e.type="Group",e}return _inherits(Group,e),_createClass3(Group)}(Op),Hv={type:"move"},Vv=function(){return _createClass3(function WebXRController(){_classCallCheck3(this,WebXRController),this._targetRay=null,this._grip=null,this._hand=null},[{key:"getHandSpace",value:function(){return null===this._hand&&(this._hand=new jv,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}},{key:"getTargetRaySpace",value:function(){return null===this._targetRay&&(this._targetRay=new jv,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new pf,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new pf),this._targetRay}},{key:"getGripSpace",value:function(){return null===this._grip&&(this._grip=new jv,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new pf,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new pf),this._grip}},{key:"dispatchEvent",value:function(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}},{key:"connect",value:function(e){if(e&&e.hand){var l=this._hand;if(l){var _,S=_createForOfIteratorHelper2(e.hand.values());try{for(S.s();!(_=S.n()).done;){var k=_.value;this._getHandJoint(l,k)}}catch(E){S.e(E)}finally{S.f()}}}return this.dispatchEvent({type:"connected",data:e}),this}},{key:"disconnect",value:function(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}},{key:"update",value:function(e,l,_){var S=null,k=null,E=null,T=this._targetRay,M=this._grip,R=this._hand;if(e&&"visible-blurred"!==l.session.visibilityState){if(R&&e.hand){E=!0;var I,D=_createForOfIteratorHelper2(e.hand.values());try{for(D.s();!(I=D.n()).done;){var O=I.value,L=l.getJointPose(O,_),U=this._getHandJoint(R,O);null!==L&&(U.matrix.fromArray(L.transform.matrix),U.matrix.decompose(U.position,U.rotation,U.scale),U.matrixWorldNeedsUpdate=!0,U.jointRadius=L.radius),U.visible=null!==L}}catch(j){D.e(j)}finally{D.f()}var B=R.joints["index-finger-tip"],z=R.joints["thumb-tip"],G=B.position.distanceTo(z.position);R.inputState.pinching&&G>.025?(R.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!R.inputState.pinching&&G<=.015&&(R.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==M&&e.gripSpace&&null!==(k=l.getPose(e.gripSpace,_))&&(M.matrix.fromArray(k.transform.matrix),M.matrix.decompose(M.position,M.rotation,M.scale),M.matrixWorldNeedsUpdate=!0,k.linearVelocity?(M.hasLinearVelocity=!0,M.linearVelocity.copy(k.linearVelocity)):M.hasLinearVelocity=!1,k.angularVelocity?(M.hasAngularVelocity=!0,M.angularVelocity.copy(k.angularVelocity)):M.hasAngularVelocity=!1);null!==T&&(null===(S=l.getPose(e.targetRaySpace,_))&&null!==k&&(S=k),null!==S&&(T.matrix.fromArray(S.transform.matrix),T.matrix.decompose(T.position,T.rotation,T.scale),T.matrixWorldNeedsUpdate=!0,S.linearVelocity?(T.hasLinearVelocity=!0,T.linearVelocity.copy(S.linearVelocity)):T.hasLinearVelocity=!1,S.angularVelocity?(T.hasAngularVelocity=!0,T.angularVelocity.copy(S.angularVelocity)):T.hasAngularVelocity=!1,this.dispatchEvent(Hv)))}return null!==T&&(T.visible=null!==S),null!==M&&(M.visible=null!==k),null!==R&&(R.visible=null!==E),this}},{key:"_getHandJoint",value:function(e,l){if(void 0===e.joints[l.jointName]){var _=new jv;_.matrixAutoUpdate=!1,_.visible=!1,e.joints[l.jointName]=_,e.add(_)}return e.joints[l.jointName]}}])}(),Wv=function(){function Fog(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,_=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;_classCallCheck3(this,Fog),this.isFog=!0,this.name="",this.color=new Zp(e),this.near=l,this.far=_}return _createClass3(Fog,[{key:"clone",value:function(){return new Fog(this.color,this.near,this.far)}},{key:"toJSON",value:function(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}])}();I("b7",Wv);var qv=function(e){function Scene(){var e;return _classCallCheck3(this,Scene),(e=_callSuper(this,Scene)).isScene=!0,e.type="Scene",e.background=null,e.environment=null,e.fog=null,e.backgroundBlurriness=0,e.backgroundIntensity=1,e.backgroundRotation=new mp,e.environmentIntensity=1,e.environmentRotation=new mp,e.overrideMaterial=null,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:e})),e}return _inherits(Scene,e),_createClass3(Scene,[{key:"copy",value:function(e,l){return _superPropGet(Scene,"copy",this,3)([e,l]),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}},{key:"toJSON",value:function(e){var l=_superPropGet(Scene,"toJSON",this,3)([e]);return null!==this.fog&&(l.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(l.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(l.object.backgroundIntensity=this.backgroundIntensity),l.object.backgroundRotation=this.backgroundRotation.toArray(),1!==this.environmentIntensity&&(l.object.environmentIntensity=this.environmentIntensity),l.object.environmentRotation=this.environmentRotation.toArray(),l}}])}(Op);I("b6",qv);var Xv=function(e){function InstancedBufferAttribute(e,l,_){var S,k=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return _classCallCheck3(this,InstancedBufferAttribute),(S=_callSuper(this,InstancedBufferAttribute,[e,l,_])).isInstancedBufferAttribute=!0,S.meshPerAttribute=k,S}return _inherits(InstancedBufferAttribute,e),_createClass3(InstancedBufferAttribute,[{key:"copy",value:function(e){return _superPropGet(InstancedBufferAttribute,"copy",this,3)([e]),this.meshPerAttribute=e.meshPerAttribute,this}},{key:"toJSON",value:function(){var e=_superPropGet(InstancedBufferAttribute,"toJSON",this,3)([]);return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}])}(ov);I("bp",Xv);var Kv=new pf,Yv=new pf,Qv=new mf,Jv=function(){return _createClass3(function Plane(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new pf(1,0,0),l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;_classCallCheck3(this,Plane),this.isPlane=!0,this.normal=e,this.constant=l},[{key:"set",value:function(e,l){return this.normal.copy(e),this.constant=l,this}},{key:"setComponents",value:function(e,l,_,S){return this.normal.set(e,l,_),this.constant=S,this}},{key:"setFromNormalAndCoplanarPoint",value:function(e,l){return this.normal.copy(e),this.constant=-l.dot(this.normal),this}},{key:"setFromCoplanarPoints",value:function(e,l,_){var S=Kv.subVectors(_,l).cross(Yv.subVectors(e,l)).normalize();return this.setFromNormalAndCoplanarPoint(S,e),this}},{key:"copy",value:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this}},{key:"normalize",value:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}},{key:"negate",value:function(){return this.constant*=-1,this.normal.negate(),this}},{key:"distanceToPoint",value:function(e){return this.normal.dot(e)+this.constant}},{key:"distanceToSphere",value:function(e){return this.distanceToPoint(e.center)-e.radius}},{key:"projectPoint",value:function(e,l){return l.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}},{key:"intersectLine",value:function(e,l){var _=e.delta(Kv),S=this.normal.dot(_);if(0===S)return 0===this.distanceToPoint(e.start)?l.copy(e.start):null;var k=-(e.start.dot(this.normal)+this.constant)/S;return k<0||k>1?null:l.copy(e.start).addScaledVector(_,k)}},{key:"intersectsLine",value:function(e){var l=this.distanceToPoint(e.start),_=this.distanceToPoint(e.end);return l<0&&_>0||_<0&&l>0}},{key:"intersectsBox",value:function(e){return e.intersectsPlane(this)}},{key:"intersectsSphere",value:function(e){return e.intersectsPlane(this)}},{key:"coplanarPoint",value:function(e){return e.copy(this.normal).multiplyScalar(-this.constant)}},{key:"applyMatrix4",value:function(e,l){var _=l||Qv.getNormalMatrix(e),S=this.coplanarPoint(Kv).applyMatrix4(e),k=this.normal.applyMatrix3(_).normalize();return this.constant=-S.dot(k),this}},{key:"translate",value:function(e){return this.constant-=e.dot(this.normal),this}},{key:"equals",value:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}])}(),Zv=new Zf,$v=new df(.5,.5),eg=new pf,tg=function(){return _createClass3(function Frustum(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Jv,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Jv,_=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Jv,S=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Jv,k=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new Jv,E=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new Jv;_classCallCheck3(this,Frustum),this.planes=[e,l,_,S,k,E]},[{key:"set",value:function(e,l,_,S,k,E){var T=this.planes;return T[0].copy(e),T[1].copy(l),T[2].copy(_),T[3].copy(S),T[4].copy(k),T[5].copy(E),this}},{key:"copy",value:function(e){for(var l=this.planes,_=0;_<6;_++)l[_].copy(e.planes[_]);return this}},{key:"setFromProjectionMatrix",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:of,_=arguments.length>2&&void 0!==arguments[2]&&arguments[2],S=this.planes,k=e.elements,E=k[0],T=k[1],M=k[2],R=k[3],I=k[4],D=k[5],O=k[6],L=k[7],U=k[8],B=k[9],z=k[10],G=k[11],j=k[12],H=k[13],V=k[14],W=k[15];if(S[0].setComponents(R-E,L-I,G-U,W-j).normalize(),S[1].setComponents(R+E,L+I,G+U,W+j).normalize(),S[2].setComponents(R+T,L+D,G+B,W+H).normalize(),S[3].setComponents(R-T,L-D,G-B,W-H).normalize(),_)S[4].setComponents(M,O,z,V).normalize(),S[5].setComponents(R-M,L-O,G-z,W-V).normalize();else if(S[4].setComponents(R-M,L-O,G-z,W-V).normalize(),l===of)S[5].setComponents(R+M,L+O,G+z,W+V).normalize();else{if(l!==sf)throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+l);S[5].setComponents(M,O,z,V).normalize()}return this}},{key:"intersectsObject",value:function(e){if(void 0!==e.boundingSphere)null===e.boundingSphere&&e.computeBoundingSphere(),Zv.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{var l=e.geometry;null===l.boundingSphere&&l.computeBoundingSphere(),Zv.copy(l.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Zv)}},{key:"intersectsSprite",value:function(e){Zv.center.set(0,0,0);var l=$v.distanceTo(e.center);return Zv.radius=.7071067811865476+l,Zv.applyMatrix4(e.matrixWorld),this.intersectsSphere(Zv)}},{key:"intersectsSphere",value:function(e){for(var l=this.planes,_=e.center,S=-e.radius,k=0;k<6;k++){if(l[k].distanceToPoint(_)<S)return!1}return!0}},{key:"intersectsBox",value:function(e){for(var l=this.planes,_=0;_<6;_++){var S=l[_];if(eg.x=S.normal.x>0?e.max.x:e.min.x,eg.y=S.normal.y>0?e.max.y:e.min.y,eg.z=S.normal.z>0?e.max.z:e.min.z,S.distanceToPoint(eg)<0)return!1}return!0}},{key:"containsPoint",value:function(e){for(var l=this.planes,_=0;_<6;_++)if(l[_].distanceToPoint(e)<0)return!1;return!0}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}])}(),rg=function(e){function DepthTexture(e,l){var _,S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ad,k=arguments.length>3?arguments[3]:void 0,E=arguments.length>4?arguments[4]:void 0,T=arguments.length>5?arguments[5]:void 0,M=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Yh,R=arguments.length>7&&void 0!==arguments[7]?arguments[7]:Yh,I=arguments.length>8?arguments[8]:void 0,D=arguments.length>9&&void 0!==arguments[9]?arguments[9]:pd,O=arguments.length>10&&void 0!==arguments[10]?arguments[10]:1;if(_classCallCheck3(this,DepthTexture),D!==pd&&D!==vd)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");return(_=_callSuper(this,DepthTexture,[{width:e,height:l,depth:O},k,E,T,M,R,D,S,I])).isDepthTexture=!0,_.flipY=!1,_.generateMipmaps=!1,_.compareFunction=null,_}return _inherits(DepthTexture,e),_createClass3(DepthTexture,[{key:"copy",value:function(e){return _superPropGet(DepthTexture,"copy",this,3)([e]),this.source=new Ef(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}},{key:"toJSON",value:function(e){var l=_superPropGet(DepthTexture,"toJSON",this,3)([e]);return null!==this.compareFunction&&(l.compareFunction=this.compareFunction),l}}])}(Mf),ng=function(e){function ExternalTexture(){var e,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return _classCallCheck3(this,ExternalTexture),(e=_callSuper(this,ExternalTexture)).sourceTexture=l,e.isExternalTexture=!0,e}return _inherits(ExternalTexture,e),_createClass3(ExternalTexture,[{key:"copy",value:function(e){return _superPropGet(ExternalTexture,"copy",this,3)([e]),this.sourceTexture=e.sourceTexture,this}}])}(Mf),ig=function(){return _createClass3(function Curve(){_classCallCheck3(this,Curve),this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null},[{key:"getPoint",value:function(){}},{key:"getPointAt",value:function(e,l){var _=this.getUtoTmapping(e);return this.getPoint(_,l)}},{key:"getPoints",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,l=[],_=0;_<=e;_++)l.push(this.getPoint(_/e));return l}},{key:"getSpacedPoints",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,l=[],_=0;_<=e;_++)l.push(this.getPointAt(_/e));return l}},{key:"getLength",value:function(){var e=this.getLengths();return e[e.length-1]}},{key:"getLengths",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.arcLengthDivisions;if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var l,_=[],S=this.getPoint(0),k=0;_.push(0);for(var E=1;E<=e;E++)k+=(l=this.getPoint(E/e)).distanceTo(S),_.push(k),S=l;return this.cacheArcLengths=_,_}},{key:"updateArcLengths",value:function(){this.needsUpdate=!0,this.getLengths()}},{key:"getUtoTmapping",value:function(e){var l,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,S=this.getLengths(),k=0,E=S.length;l=_||e*S[E-1];for(var T,M=0,R=E-1;M<=R;)if((T=S[k=Math.floor(M+(R-M)/2)]-l)<0)M=k+1;else{if(!(T>0)){R=k;break}R=k-1}if(S[k=R]===l)return k/(E-1);var I=S[k];return(k+(l-I)/(S[k+1]-I))/(E-1)}},{key:"getTangent",value:function(e,l){var _=1e-4,S=e-_,k=e+_;S<0&&(S=0),k>1&&(k=1);var E=this.getPoint(S),T=this.getPoint(k),M=l||(E.isVector2?new df:new pf);return M.copy(T).sub(E).normalize(),M}},{key:"getTangentAt",value:function(e,l){var _=this.getUtoTmapping(e);return this.getTangent(_,l)}},{key:"computeFrenetFrames",value:function(e){for(var l=arguments.length>1&&void 0!==arguments[1]&&arguments[1],_=new pf,S=[],k=[],E=[],T=new pf,M=new sp,R=0;R<=e;R++){var I=R/e;S[R]=this.getTangentAt(I,new pf)}k[0]=new pf,E[0]=new pf;var D=Number.MAX_VALUE,O=Math.abs(S[0].x),L=Math.abs(S[0].y),U=Math.abs(S[0].z);O<=D&&(D=O,_.set(1,0,0)),L<=D&&(D=L,_.set(0,1,0)),U<=D&&_.set(0,0,1),T.crossVectors(S[0],_).normalize(),k[0].crossVectors(S[0],T),E[0].crossVectors(S[0],k[0]);for(var B=1;B<=e;B++){if(k[B]=k[B-1].clone(),E[B]=E[B-1].clone(),T.crossVectors(S[B-1],S[B]),T.length()>Number.EPSILON){T.normalize();var z=Math.acos(_clamp2(S[B-1].dot(S[B]),-1,1));k[B].applyMatrix4(M.makeRotationAxis(T,z))}E[B].crossVectors(S[B],k[B])}if(!0===l){var G=Math.acos(_clamp2(k[0].dot(k[e]),-1,1));G/=e,S[0].dot(T.crossVectors(k[0],k[e]))>0&&(G=-G);for(var j=1;j<=e;j++)k[j].applyMatrix4(M.makeRotationAxis(S[j],G*j)),E[j].crossVectors(S[j],k[j])}return{tangents:S,normals:k,binormals:E}}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}},{key:"toJSON",value:function(){var e={metadata:{version:4.7,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}},{key:"fromJSON",value:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}])}(),ag=function(e){function EllipseCurve(){var e,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,k=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,E=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,T=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI,M=arguments.length>6&&void 0!==arguments[6]&&arguments[6],R=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0;return _classCallCheck3(this,EllipseCurve),(e=_callSuper(this,EllipseCurve)).isEllipseCurve=!0,e.type="EllipseCurve",e.aX=l,e.aY=_,e.xRadius=S,e.yRadius=k,e.aStartAngle=E,e.aEndAngle=T,e.aClockwise=M,e.aRotation=R,e}return _inherits(EllipseCurve,e),_createClass3(EllipseCurve,[{key:"getPoint",value:function(e){for(var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new df,_=2*Math.PI,S=this.aEndAngle-this.aStartAngle,k=Math.abs(S)<Number.EPSILON;S<0;)S+=_;for(;S>_;)S-=_;S<Number.EPSILON&&(S=k?0:_),!0!==this.aClockwise||k||(S===_?S=-_:S-=_);var E=this.aStartAngle+e*S,T=this.aX+this.xRadius*Math.cos(E),M=this.aY+this.yRadius*Math.sin(E);if(0!==this.aRotation){var R=Math.cos(this.aRotation),I=Math.sin(this.aRotation),D=T-this.aX,O=M-this.aY;T=D*R-O*I+this.aX,M=D*I+O*R+this.aY}return l.set(T,M)}},{key:"copy",value:function(e){return _superPropGet(EllipseCurve,"copy",this,3)([e]),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}},{key:"toJSON",value:function(){var e=_superPropGet(EllipseCurve,"toJSON",this,3)([]);return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}},{key:"fromJSON",value:function(e){return _superPropGet(EllipseCurve,"fromJSON",this,3)([e]),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}])}(ig),og=function(e){function ArcCurve(e,l,_,S,k,E){var T;return _classCallCheck3(this,ArcCurve),(T=_callSuper(this,ArcCurve,[e,l,_,_,S,k,E])).isArcCurve=!0,T.type="ArcCurve",T}return _inherits(ArcCurve,e),_createClass3(ArcCurve)}(ag);function CubicPoly(){var e=0,l=0,_=0,S=0;function init(k,E,T,M){e=k,l=T,_=-3*k+3*E-2*T-M,S=2*k-2*E+T+M}return{initCatmullRom:function(e,l,_,S,k){init(l,_,k*(_-e),k*(S-l))},initNonuniformCatmullRom:function(e,l,_,S,k,E,T){var M=(l-e)/k-(_-e)/(k+E)+(_-l)/E,R=(_-l)/E-(S-l)/(E+T)+(S-_)/T;init(l,_,M*=E,R*=E)},calc:function(k){var E=k*k;return e+l*k+_*E+S*(E*k)}}}var sg=new pf,ug=new CubicPoly,lg=new CubicPoly,cg=new CubicPoly,hg=function(e){function CatmullRomCurve3(){var e,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],_=arguments.length>1&&void 0!==arguments[1]&&arguments[1],S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"centripetal",k=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;return _classCallCheck3(this,CatmullRomCurve3),(e=_callSuper(this,CatmullRomCurve3)).isCatmullRomCurve3=!0,e.type="CatmullRomCurve3",e.points=l,e.closed=_,e.curveType=S,e.tension=k,e}return _inherits(CatmullRomCurve3,e),_createClass3(CatmullRomCurve3,[{key:"getPoint",value:function(e){var l,_,S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new pf,k=this.points,E=k.length,T=(E-(this.closed?0:1))*e,M=Math.floor(T),R=T-M;this.closed?M+=M>0?0:(Math.floor(Math.abs(M)/E)+1)*E:0===R&&M===E-1&&(M=E-2,R=1),this.closed||M>0?l=k[(M-1)%E]:(sg.subVectors(k[0],k[1]).add(k[0]),l=sg);var I=k[M%E],D=k[(M+1)%E];if(this.closed||M+2<E?_=k[(M+2)%E]:(sg.subVectors(k[E-1],k[E-2]).add(k[E-1]),_=sg),"centripetal"===this.curveType||"chordal"===this.curveType){var O="chordal"===this.curveType?.5:.25,L=Math.pow(l.distanceToSquared(I),O),U=Math.pow(I.distanceToSquared(D),O),B=Math.pow(D.distanceToSquared(_),O);U<1e-4&&(U=1),L<1e-4&&(L=U),B<1e-4&&(B=U),ug.initNonuniformCatmullRom(l.x,I.x,D.x,_.x,L,U,B),lg.initNonuniformCatmullRom(l.y,I.y,D.y,_.y,L,U,B),cg.initNonuniformCatmullRom(l.z,I.z,D.z,_.z,L,U,B)}else"catmullrom"===this.curveType&&(ug.initCatmullRom(l.x,I.x,D.x,_.x,this.tension),lg.initCatmullRom(l.y,I.y,D.y,_.y,this.tension),cg.initCatmullRom(l.z,I.z,D.z,_.z,this.tension));return S.set(ug.calc(R),lg.calc(R),cg.calc(R)),S}},{key:"copy",value:function(e){_superPropGet(CatmullRomCurve3,"copy",this,3)([e]),this.points=[];for(var l=0,_=e.points.length;l<_;l++){var S=e.points[l];this.points.push(S.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}},{key:"toJSON",value:function(){var e=_superPropGet(CatmullRomCurve3,"toJSON",this,3)([]);e.points=[];for(var l=0,_=this.points.length;l<_;l++){var S=this.points[l];e.points.push(S.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}},{key:"fromJSON",value:function(e){_superPropGet(CatmullRomCurve3,"fromJSON",this,3)([e]),this.points=[];for(var l=0,_=e.points.length;l<_;l++){var S=e.points[l];this.points.push((new pf).fromArray(S))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}])}(ig);function CatmullRom(e,l,_,S,k){var E=.5*(S-l),T=.5*(k-_),M=e*e;return(2*_-2*S+E+T)*(e*M)+(-3*_+3*S-2*E-T)*M+E*e+_}function QuadraticBezier(e,l,_,S){return function(e,l){var _=1-e;return _*_*l}(e,l)+function(e,l){return 2*(1-e)*e*l}(e,_)+function(e,l){return e*e*l}(e,S)}function CubicBezier(e,l,_,S,k){return function(e,l){var _=1-e;return _*_*_*l}(e,l)+function(e,l){var _=1-e;return 3*_*_*e*l}(e,_)+function(e,l){return 3*(1-e)*e*e*l}(e,S)+function(e,l){return e*e*e*l}(e,k)}var dg=function(e){function CubicBezierCurve(){var e,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new df,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new df,S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new df,k=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new df;return _classCallCheck3(this,CubicBezierCurve),(e=_callSuper(this,CubicBezierCurve)).isCubicBezierCurve=!0,e.type="CubicBezierCurve",e.v0=l,e.v1=_,e.v2=S,e.v3=k,e}return _inherits(CubicBezierCurve,e),_createClass3(CubicBezierCurve,[{key:"getPoint",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new df,_=this.v0,S=this.v1,k=this.v2,E=this.v3;return l.set(CubicBezier(e,_.x,S.x,k.x,E.x),CubicBezier(e,_.y,S.y,k.y,E.y)),l}},{key:"copy",value:function(e){return _superPropGet(CubicBezierCurve,"copy",this,3)([e]),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}},{key:"toJSON",value:function(){var e=_superPropGet(CubicBezierCurve,"toJSON",this,3)([]);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}},{key:"fromJSON",value:function(e){return _superPropGet(CubicBezierCurve,"fromJSON",this,3)([e]),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}])}(ig),fg=function(e){function CubicBezierCurve3(){var e,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new pf,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new pf,S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new pf,k=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new pf;return _classCallCheck3(this,CubicBezierCurve3),(e=_callSuper(this,CubicBezierCurve3)).isCubicBezierCurve3=!0,e.type="CubicBezierCurve3",e.v0=l,e.v1=_,e.v2=S,e.v3=k,e}return _inherits(CubicBezierCurve3,e),_createClass3(CubicBezierCurve3,[{key:"getPoint",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new pf,_=this.v0,S=this.v1,k=this.v2,E=this.v3;return l.set(CubicBezier(e,_.x,S.x,k.x,E.x),CubicBezier(e,_.y,S.y,k.y,E.y),CubicBezier(e,_.z,S.z,k.z,E.z)),l}},{key:"copy",value:function(e){return _superPropGet(CubicBezierCurve3,"copy",this,3)([e]),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}},{key:"toJSON",value:function(){var e=_superPropGet(CubicBezierCurve3,"toJSON",this,3)([]);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}},{key:"fromJSON",value:function(e){return _superPropGet(CubicBezierCurve3,"fromJSON",this,3)([e]),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}])}(ig),pg=function(e){function LineCurve(){var e,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new df,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new df;return _classCallCheck3(this,LineCurve),(e=_callSuper(this,LineCurve)).isLineCurve=!0,e.type="LineCurve",e.v1=l,e.v2=_,e}return _inherits(LineCurve,e),_createClass3(LineCurve,[{key:"getPoint",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new df;return 1===e?l.copy(this.v2):(l.copy(this.v2).sub(this.v1),l.multiplyScalar(e).add(this.v1)),l}},{key:"getPointAt",value:function(e,l){return this.getPoint(e,l)}},{key:"getTangent",value:function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:new df).subVectors(this.v2,this.v1).normalize()}},{key:"getTangentAt",value:function(e,l){return this.getTangent(e,l)}},{key:"copy",value:function(e){return _superPropGet(LineCurve,"copy",this,3)([e]),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=_superPropGet(LineCurve,"toJSON",this,3)([]);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return _superPropGet(LineCurve,"fromJSON",this,3)([e]),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}])}(ig),vg=function(e){function LineCurve3(){var e,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new pf,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new pf;return _classCallCheck3(this,LineCurve3),(e=_callSuper(this,LineCurve3)).isLineCurve3=!0,e.type="LineCurve3",e.v1=l,e.v2=_,e}return _inherits(LineCurve3,e),_createClass3(LineCurve3,[{key:"getPoint",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new pf;return 1===e?l.copy(this.v2):(l.copy(this.v2).sub(this.v1),l.multiplyScalar(e).add(this.v1)),l}},{key:"getPointAt",value:function(e,l){return this.getPoint(e,l)}},{key:"getTangent",value:function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:new pf).subVectors(this.v2,this.v1).normalize()}},{key:"getTangentAt",value:function(e,l){return this.getTangent(e,l)}},{key:"copy",value:function(e){return _superPropGet(LineCurve3,"copy",this,3)([e]),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=_superPropGet(LineCurve3,"toJSON",this,3)([]);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return _superPropGet(LineCurve3,"fromJSON",this,3)([e]),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}])}(ig);I("bm",vg);var gg=function(e){function QuadraticBezierCurve(){var e,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new df,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new df,S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new df;return _classCallCheck3(this,QuadraticBezierCurve),(e=_callSuper(this,QuadraticBezierCurve)).isQuadraticBezierCurve=!0,e.type="QuadraticBezierCurve",e.v0=l,e.v1=_,e.v2=S,e}return _inherits(QuadraticBezierCurve,e),_createClass3(QuadraticBezierCurve,[{key:"getPoint",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new df,_=this.v0,S=this.v1,k=this.v2;return l.set(QuadraticBezier(e,_.x,S.x,k.x),QuadraticBezier(e,_.y,S.y,k.y)),l}},{key:"copy",value:function(e){return _superPropGet(QuadraticBezierCurve,"copy",this,3)([e]),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=_superPropGet(QuadraticBezierCurve,"toJSON",this,3)([]);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return _superPropGet(QuadraticBezierCurve,"fromJSON",this,3)([e]),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}])}(ig),mg=function(e){function QuadraticBezierCurve3(){var e,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new pf,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new pf,S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new pf;return _classCallCheck3(this,QuadraticBezierCurve3),(e=_callSuper(this,QuadraticBezierCurve3)).isQuadraticBezierCurve3=!0,e.type="QuadraticBezierCurve3",e.v0=l,e.v1=_,e.v2=S,e}return _inherits(QuadraticBezierCurve3,e),_createClass3(QuadraticBezierCurve3,[{key:"getPoint",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new pf,_=this.v0,S=this.v1,k=this.v2;return l.set(QuadraticBezier(e,_.x,S.x,k.x),QuadraticBezier(e,_.y,S.y,k.y),QuadraticBezier(e,_.z,S.z,k.z)),l}},{key:"copy",value:function(e){return _superPropGet(QuadraticBezierCurve3,"copy",this,3)([e]),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=_superPropGet(QuadraticBezierCurve3,"toJSON",this,3)([]);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return _superPropGet(QuadraticBezierCurve3,"fromJSON",this,3)([e]),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}])}(ig),yg=function(e){function SplineCurve(){var e,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return _classCallCheck3(this,SplineCurve),(e=_callSuper(this,SplineCurve)).isSplineCurve=!0,e.type="SplineCurve",e.points=l,e}return _inherits(SplineCurve,e),_createClass3(SplineCurve,[{key:"getPoint",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new df,_=this.points,S=(_.length-1)*e,k=Math.floor(S),E=S-k,T=_[0===k?k:k-1],M=_[k],R=_[k>_.length-2?_.length-1:k+1],I=_[k>_.length-3?_.length-1:k+2];return l.set(CatmullRom(E,T.x,M.x,R.x,I.x),CatmullRom(E,T.y,M.y,R.y,I.y)),l}},{key:"copy",value:function(e){_superPropGet(SplineCurve,"copy",this,3)([e]),this.points=[];for(var l=0,_=e.points.length;l<_;l++){var S=e.points[l];this.points.push(S.clone())}return this}},{key:"toJSON",value:function(){var e=_superPropGet(SplineCurve,"toJSON",this,3)([]);e.points=[];for(var l=0,_=this.points.length;l<_;l++){var S=this.points[l];e.points.push(S.toArray())}return e}},{key:"fromJSON",value:function(e){_superPropGet(SplineCurve,"fromJSON",this,3)([e]),this.points=[];for(var l=0,_=e.points.length;l<_;l++){var S=e.points[l];this.points.push((new df).fromArray(S))}return this}}])}(ig),_g=Object.freeze({__proto__:null,ArcCurve:og,CatmullRomCurve3:hg,CubicBezierCurve:dg,CubicBezierCurve3:fg,EllipseCurve:ag,LineCurve:pg,LineCurve3:vg,QuadraticBezierCurve:gg,QuadraticBezierCurve3:mg,SplineCurve:yg}),bg=function(e){function PlaneGeometry(){var e,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,k=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;_classCallCheck3(this,PlaneGeometry),(e=_callSuper(this,PlaneGeometry)).type="PlaneGeometry",e.parameters={width:l,height:_,widthSegments:S,heightSegments:k};for(var E=l/2,T=_/2,M=Math.floor(S),R=Math.floor(k),I=M+1,D=R+1,O=l/M,L=_/R,U=[],B=[],z=[],G=[],j=0;j<D;j++)for(var H=j*L-T,V=0;V<I;V++){var W=V*O-E;B.push(W,-H,0),z.push(0,0,1),G.push(V/M),G.push(1-j/R)}for(var q=0;q<R;q++)for(var X=0;X<M;X++){var K=X+I*q,Y=X+I*(q+1),Q=X+1+I*(q+1),J=X+1+I*q;U.push(K,Y,J),U.push(Y,Q,J)}return e.setIndex(U),e.setAttribute("position",new lv(B,3)),e.setAttribute("normal",new lv(z,3)),e.setAttribute("uv",new lv(G,2)),e}return _inherits(PlaneGeometry,e),_createClass3(PlaneGeometry,[{key:"copy",value:function(e){return _superPropGet(PlaneGeometry,"copy",this,3)([e]),this.parameters=Object.assign({},e.parameters),this}}],[{key:"fromJSON",value:function(e){return new PlaneGeometry(e.width,e.height,e.widthSegments,e.heightSegments)}}])}(mv);I("bg",bg);var Sg=function(e){function TubeGeometry(){var e,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new mg(new pf(-1,-1,0),new pf(-1,1,0),new pf(1,1,0)),_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:64,S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,k=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,E=arguments.length>4&&void 0!==arguments[4]&&arguments[4];_classCallCheck3(this,TubeGeometry),(e=_callSuper(this,TubeGeometry)).type="TubeGeometry",e.parameters={path:l,tubularSegments:_,radius:S,radialSegments:k,closed:E};var T=l.computeFrenetFrames(_,E);e.tangents=T.tangents,e.normals=T.normals,e.binormals=T.binormals;var M=new pf,R=new pf,I=new df,D=new pf,O=[],L=[],U=[],B=[];function generateSegment(e){D=l.getPointAt(e/_,D);for(var E=T.normals[e],I=T.binormals[e],U=0;U<=k;U++){var B=U/k*Math.PI*2,z=Math.sin(B),G=-Math.cos(B);R.x=G*E.x+z*I.x,R.y=G*E.y+z*I.y,R.z=G*E.z+z*I.z,R.normalize(),L.push(R.x,R.y,R.z),M.x=D.x+S*R.x,M.y=D.y+S*R.y,M.z=D.z+S*R.z,O.push(M.x,M.y,M.z)}}return function(){for(var e=0;e<_;e++)generateSegment(e);generateSegment(!1===E?_:0),function(){for(var e=0;e<=_;e++)for(var l=0;l<=k;l++)I.x=e/_,I.y=l/k,U.push(I.x,I.y)}(),function(){for(var e=1;e<=_;e++)for(var l=1;l<=k;l++){var S=(k+1)*(e-1)+(l-1),E=(k+1)*e+(l-1),T=(k+1)*e+l,M=(k+1)*(e-1)+l;B.push(S,E,M),B.push(E,T,M)}}()}(),e.setIndex(B),e.setAttribute("position",new lv(O,3)),e.setAttribute("normal",new lv(L,3)),e.setAttribute("uv",new lv(U,2)),e}return _inherits(TubeGeometry,e),_createClass3(TubeGeometry,[{key:"copy",value:function(e){return _superPropGet(TubeGeometry,"copy",this,3)([e]),this.parameters=Object.assign({},e.parameters),this}},{key:"toJSON",value:function(){var e=_superPropGet(TubeGeometry,"toJSON",this,3)([]);return e.path=this.parameters.path.toJSON(),e}}],[{key:"fromJSON",value:function(e){return new TubeGeometry((new _g[e.path.type]).fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}])}(mv);I("bn",Sg);var wg=function(e){function MeshDepthMaterial(e){var l;return _classCallCheck3(this,MeshDepthMaterial),(l=_callSuper(this,MeshDepthMaterial)).isMeshDepthMaterial=!0,l.type="MeshDepthMaterial",l.depthPacking=Jd,l.map=null,l.alphaMap=null,l.displacementMap=null,l.displacementScale=1,l.displacementBias=0,l.wireframe=!1,l.wireframeLinewidth=1,l.setValues(e),l}return _inherits(MeshDepthMaterial,e),_createClass3(MeshDepthMaterial,[{key:"copy",value:function(e){return _superPropGet(MeshDepthMaterial,"copy",this,3)([e]),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}])}(tv),xg=function(e){function MeshDistanceMaterial(e){var l;return _classCallCheck3(this,MeshDistanceMaterial),(l=_callSuper(this,MeshDistanceMaterial)).isMeshDistanceMaterial=!0,l.type="MeshDistanceMaterial",l.map=null,l.alphaMap=null,l.displacementMap=null,l.displacementScale=1,l.displacementBias=0,l.setValues(e),l}return _inherits(MeshDistanceMaterial,e),_createClass3(MeshDistanceMaterial,[{key:"copy",value:function(e){return _superPropGet(MeshDistanceMaterial,"copy",this,3)([e]),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}])}(tv),kg=_createClass3(function LoadingManager(e,l,_){_classCallCheck3(this,LoadingManager);var S=this,k=!1,E=0,T=0,M=void 0,R=[];this.onStart=void 0,this.onLoad=e,this.onProgress=l,this.onError=_,this.abortController=new AbortController,this.itemStart=function(e){T++,!1===k&&void 0!==S.onStart&&S.onStart(e,E,T),k=!0},this.itemEnd=function(e){E++,void 0!==S.onProgress&&S.onProgress(e,E,T),E===T&&(k=!1,void 0!==S.onLoad&&S.onLoad())},this.itemError=function(e){void 0!==S.onError&&S.onError(e)},this.resolveURL=function(e){return M?M(e):e},this.setURLModifier=function(e){return M=e,this},this.addHandler=function(e,l){return R.push(e,l),this},this.removeHandler=function(e){var l=R.indexOf(e);return-1!==l&&R.splice(l,2),this},this.getHandler=function(e){for(var l=0,_=R.length;l<_;l+=2){var S=R[l],k=R[l+1];if(S.global&&(S.lastIndex=0),S.test(e))return k}return null},this.abort=function(){return this.abortController.abort(),this.abortController=new AbortController,this}});I("be",kg);var Ag=function(e){function OrthographicCamera(){var e,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,k=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,E=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.1,T=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2e3;return _classCallCheck3(this,OrthographicCamera),(e=_callSuper(this,OrthographicCamera)).isOrthographicCamera=!0,e.type="OrthographicCamera",e.zoom=1,e.view=null,e.left=l,e.right=_,e.top=S,e.bottom=k,e.near=E,e.far=T,e.updateProjectionMatrix(),e}return _inherits(OrthographicCamera,e),_createClass3(OrthographicCamera,[{key:"copy",value:function(e,l){return _superPropGet(OrthographicCamera,"copy",this,3)([e,l]),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}},{key:"setViewOffset",value:function(e,l,_,S,k,E){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=l,this.view.offsetX=_,this.view.offsetY=S,this.view.width=k,this.view.height=E,this.updateProjectionMatrix()}},{key:"clearViewOffset",value:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}},{key:"updateProjectionMatrix",value:function(){var e=(this.right-this.left)/(2*this.zoom),l=(this.top-this.bottom)/(2*this.zoom),_=(this.right+this.left)/2,S=(this.top+this.bottom)/2,k=_-e,E=_+e,T=S+l,M=S-l;if(null!==this.view&&this.view.enabled){var R=(this.right-this.left)/this.view.fullWidth/this.zoom,I=(this.top-this.bottom)/this.view.fullHeight/this.zoom;E=(k+=R*this.view.offsetX)+R*this.view.width,M=(T-=I*this.view.offsetY)-I*this.view.height}this.projectionMatrix.makeOrthographic(k,E,T,M,this.near,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}},{key:"toJSON",value:function(e){var l=_superPropGet(OrthographicCamera,"toJSON",this,3)([e]);return l.object.zoom=this.zoom,l.object.left=this.left,l.object.right=this.right,l.object.top=this.top,l.object.bottom=this.bottom,l.object.near=this.near,l.object.far=this.far,null!==this.view&&(l.object.view=Object.assign({},this.view)),l}}])}(Dv);I("bo",function(e){function InstancedBufferGeometry(){var e;return _classCallCheck3(this,InstancedBufferGeometry),(e=_callSuper(this,InstancedBufferGeometry)).isInstancedBufferGeometry=!0,e.type="InstancedBufferGeometry",e.instanceCount=1/0,e}return _inherits(InstancedBufferGeometry,e),_createClass3(InstancedBufferGeometry,[{key:"copy",value:function(e){return _superPropGet(InstancedBufferGeometry,"copy",this,3)([e]),this.instanceCount=e.instanceCount,this}},{key:"toJSON",value:function(){var e=_superPropGet(InstancedBufferGeometry,"toJSON",this,3)([]);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}])}(mv));var Eg=function(e){function ArrayCamera(){var e,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return _classCallCheck3(this,ArrayCamera),(e=_callSuper(this,ArrayCamera)).isArrayCamera=!0,e.isMultiViewCamera=!1,e.cameras=l,e}return _inherits(ArrayCamera,e),_createClass3(ArrayCamera)}(Fv),Cg=function(){return _createClass3(function Clock(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];_classCallCheck3(this,Clock),this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1},[{key:"start",value:function(){this.startTime=performance.now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}},{key:"stop",value:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}},{key:"getElapsedTime",value:function(){return this.getDelta(),this.elapsedTime}},{key:"getDelta",value:function(){var e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var l=performance.now();e=(l-this.oldTime)/1e3,this.oldTime=l,this.elapsedTime+=e}return e}}])}();I("b8",Cg);var Tg=function(){function Uniform(e){_classCallCheck3(this,Uniform),this.value=e}return _createClass3(Uniform,[{key:"clone",value:function(){return new Uniform(void 0===this.value.clone?this.value:this.value.clone())}}])}();function getByteLength(e,l,_,S){var k=function(e){switch(e){case ed:case td:return{byteLength:1,components:1};case nd:case rd:case sd:return{byteLength:2,components:1};case ud:case ld:return{byteLength:2,components:4};case ad:case id:case od:return{byteLength:4,components:1};case hd:case dd:return{byteLength:4,components:3}}throw new Error("Unknown texture type ".concat(e,"."))}(S);switch(_){case 1021:return e*l;case 1028:case gd:return e*l/k.components*k.byteLength;case 1030:case md:return e*l*2/k.components*k.byteLength;case 1022:return e*l*3/k.components*k.byteLength;case fd:case yd:return e*l*4/k.components*k.byteLength;case _d:case bd:return Math.floor((e+3)/4)*Math.floor((l+3)/4)*8;case Sd:case wd:return Math.floor((e+3)/4)*Math.floor((l+3)/4)*16;case kd:case Ed:return Math.max(e,16)*Math.max(l,8)/4;case xd:case Ad:return Math.max(e,8)*Math.max(l,8)/2;case Cd:case Td:return Math.floor((e+3)/4)*Math.floor((l+3)/4)*8;case Md:case Rd:return Math.floor((e+3)/4)*Math.floor((l+3)/4)*16;case Id:return Math.floor((e+4)/5)*Math.floor((l+3)/4)*16;case Pd:return Math.floor((e+4)/5)*Math.floor((l+4)/5)*16;case Dd:return Math.floor((e+5)/6)*Math.floor((l+4)/5)*16;case Od:return Math.floor((e+5)/6)*Math.floor((l+5)/6)*16;case Ld:return Math.floor((e+7)/8)*Math.floor((l+4)/5)*16;case Ud:return Math.floor((e+7)/8)*Math.floor((l+5)/6)*16;case Fd:return Math.floor((e+7)/8)*Math.floor((l+7)/8)*16;case Nd:return Math.floor((e+9)/10)*Math.floor((l+4)/5)*16;case Bd:return Math.floor((e+9)/10)*Math.floor((l+5)/6)*16;case zd:return Math.floor((e+9)/10)*Math.floor((l+7)/8)*16;case Gd:return Math.floor((e+9)/10)*Math.floor((l+9)/10)*16;case jd:return Math.floor((e+11)/12)*Math.floor((l+9)/10)*16;case Hd:return Math.floor((e+11)/12)*Math.floor((l+11)/12)*16;case Vd:case Wd:case qd:return Math.ceil(e/4)*Math.ceil(l/4)*16;case Xd:case Kd:return Math.ceil(e/4)*Math.ceil(l/4)*8;case Yd:case Qd:return Math.ceil(e/4)*Math.ceil(l/4)*16}throw new Error("Unable to determine texture byte length for ".concat(_," format."))}
/**
			 * @license
			 * Copyright 2010-2025 Three.js Authors
			 * SPDX-License-Identifier: MIT
			 */
function WebGLAnimation(){var e=null,l=!1,_=null,S=null;function onAnimationFrame(l,k){_(l,k),S=e.requestAnimationFrame(onAnimationFrame)}return{start:function(){!0!==l&&null!==_&&(S=e.requestAnimationFrame(onAnimationFrame),l=!0)},stop:function(){e.cancelAnimationFrame(S),l=!1},setAnimationLoop:function(e){_=e},setContext:function(l){e=l}}}function WebGLAttributes(e){var l=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),l.get(e)},remove:function(_){_.isInterleavedBufferAttribute&&(_=_.data);var S=l.get(_);S&&(e.deleteBuffer(S.buffer),l.delete(_))},update:function(_,S){if(_.isInterleavedBufferAttribute&&(_=_.data),_.isGLBufferAttribute){var k=l.get(_);(!k||k.version<_.version)&&l.set(_,{buffer:_.buffer,type:_.type,bytesPerElement:_.elementSize,version:_.version})}else{var E=l.get(_);if(void 0===E)l.set(_,function(l,_){var S,k=l.array,E=l.usage,T=k.byteLength,M=e.createBuffer();if(e.bindBuffer(_,M),e.bufferData(_,k,E),l.onUploadCallback(),k instanceof Float32Array)S=e.FLOAT;else if("undefined"!=typeof Float16Array&&k instanceof Float16Array)S=e.HALF_FLOAT;else if(k instanceof Uint16Array)S=l.isFloat16BufferAttribute?e.HALF_FLOAT:e.UNSIGNED_SHORT;else if(k instanceof Int16Array)S=e.SHORT;else if(k instanceof Uint32Array)S=e.UNSIGNED_INT;else if(k instanceof Int32Array)S=e.INT;else if(k instanceof Int8Array)S=e.BYTE;else if(k instanceof Uint8Array)S=e.UNSIGNED_BYTE;else{if(!(k instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+k);S=e.UNSIGNED_BYTE}return{buffer:M,type:S,bytesPerElement:k.BYTES_PER_ELEMENT,version:l.version,size:T}}(_,S));else if(E.version<_.version){if(E.size!==_.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");!function(l,_,S){var k=_.array,E=_.updateRanges;if(e.bindBuffer(S,l),0===E.length)e.bufferSubData(S,0,k);else{E.sort(function(e,l){return e.start-l.start});for(var T=0,M=1;M<E.length;M++){var R=E[T],I=E[M];I.start<=R.start+R.count+1?R.count=Math.max(R.count,I.start+I.count-R.start):E[++T]=I}E.length=T+1;for(var D=0,O=E.length;D<O;D++){var L=E[D];e.bufferSubData(S,L.start*k.BYTES_PER_ELEMENT,k,L.start,L.count)}_.clearUpdateRanges()}_.onUploadCallback()}(E.buffer,_,S),E.version=_.version}}}}}"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:zh}})),"undefined"!=typeof window&&(window.__THREE__||(window.__THREE__=zh));var Mg=I("bk",{alphahash_fragment:"#ifdef USE_ALPHAHASH\n\tif ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n#endif",alphahash_pars_fragment:"#ifdef USE_ALPHAHASH\n\tconst float ALPHA_HASH_SCALE = 0.05;\n\tfloat hash2D( vec2 value ) {\n\t\treturn fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n\t}\n\tfloat hash3D( vec3 value ) {\n\t\treturn hash2D( vec2( hash2D( value.xy ), value.z ) );\n\t}\n\tfloat getAlphaHashThreshold( vec3 position ) {\n\t\tfloat maxDeriv = max(\n\t\t\tlength( dFdx( position.xyz ) ),\n\t\t\tlength( dFdy( position.xyz ) )\n\t\t);\n\t\tfloat pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n\t\tvec2 pixScales = vec2(\n\t\t\texp2( floor( log2( pixScale ) ) ),\n\t\t\texp2( ceil( log2( pixScale ) ) )\n\t\t);\n\t\tvec2 alpha = vec2(\n\t\t\thash3D( floor( pixScales.x * position.xyz ) ),\n\t\t\thash3D( floor( pixScales.y * position.xyz ) )\n\t\t);\n\t\tfloat lerpFactor = fract( log2( pixScale ) );\n\t\tfloat x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n\t\tfloat a = min( lerpFactor, 1.0 - lerpFactor );\n\t\tvec3 cases = vec3(\n\t\t\tx * x / ( 2.0 * a * ( 1.0 - a ) ),\n\t\t\t( x - 0.5 * a ) / ( 1.0 - a ),\n\t\t\t1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n\t\t);\n\t\tfloat threshold = ( x < ( 1.0 - a ) )\n\t\t\t? ( ( x < a ) ? cases.x : cases.y )\n\t\t\t: cases.z;\n\t\treturn clamp( threshold , 1.0e-6, 1.0 );\n\t}\n#endif",alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\t#ifdef ALPHA_TO_COVERAGE\n\tdiffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );\n\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\tif ( diffuseColor.a < alphaTest ) discard;\n\t#endif\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_CLEARCOAT ) \n\t\tclearcoatSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_SHEEN ) \n\t\tsheenSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometryNormal, geometryViewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",batching_pars_vertex:"#ifdef USE_BATCHING\n\t#if ! defined( GL_ANGLE_multi_draw )\n\t#define gl_DrawID _gl_DrawID\n\tuniform int _gl_DrawID;\n\t#endif\n\tuniform highp sampler2D batchingTexture;\n\tuniform highp usampler2D batchingIdTexture;\n\tmat4 getBatchingMatrix( const in float i ) {\n\t\tint size = textureSize( batchingTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n\tfloat getIndirectIndex( const in int i ) {\n\t\tint size = textureSize( batchingIdTexture, 0 ).x;\n\t\tint x = i % size;\n\t\tint y = i / size;\n\t\treturn float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );\n\t}\n#endif\n#ifdef USE_BATCHING_COLOR\n\tuniform sampler2D batchingColorTexture;\n\tvec3 getBatchingColor( const in float i ) {\n\t\tint size = textureSize( batchingColorTexture, 0 ).x;\n\t\tint j = int( i );\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\treturn texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;\n\t}\n#endif",batching_vertex:"#ifdef USE_BATCHING\n\tmat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );\n#endif",begin_vertex:"vec3 transformed = vec3( position );\n#ifdef USE_ALPHAHASH\n\tvPosition = vec3( position );\n#endif",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\treturn vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );\n\t\tvec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#ifdef ALPHA_TO_COVERAGE\n\t\tfloat distanceToPlane, distanceGradient;\n\t\tfloat clipOpacity = 1.0;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\tclipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\tif ( clipOpacity == 0.0 ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tfloat unionClipOpacity = 1.0;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\t\tunionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tclipOpacity *= 1.0 - unionClipOpacity;\n\t\t#endif\n\t\tdiffuseColor.a *= clipOpacity;\n\t\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tbool clipped = true;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tif ( clipped ) discard;\n\t\t#endif\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif\n#ifdef USE_BATCHING_COLOR\n\tvec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );\n\tvColor.xyz *= batchingColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n#ifdef USE_ALPHAHASH\n\tvarying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = objectTangent;\n#endif\n#ifdef USE_BATCHING\n\tmat3 bm = mat3( batchingMatrix );\n\ttransformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );\n\ttransformedNormal = bm * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = bm * transformedTangent;\n\t#endif\n#endif\n#ifdef USE_INSTANCING\n\tmat3 im = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );\n\ttransformedNormal = im * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = im * transformedTangent;\n\t#endif\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\ttransformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE\n\t\temissiveColor = sRGBTransferEOTF( emissiveColor );\n\t#endif\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",colorspace_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment:"vec4 LinearTransferOETF( in vec4 value ) {\n\treturn value;\n}\nvec4 sRGBTransferEOTF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 sRGBTransferOETF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform mat3 envMapRotation;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#ifdef USE_ENVMAP\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\t#ifdef USE_ANISOTROPY\n\t\tvec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n\t\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\t\tvec3 bentNormal = cross( bitangent, viewDir );\n\t\t\t\tbentNormal = normalize( cross( bentNormal, bitangent ) );\n\t\t\t\tbentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n\t\t\t\treturn getIBLRadiance( viewDir, bentNormal, roughness );\n\t\t\t#else\n\t\t\t\treturn vec3( 0.0 );\n\t\t\t#endif\n\t\t}\n\t#endif\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\n#if defined( USE_LIGHT_PROBES )\n\tuniform vec3 lightProbe[ 9 ];\n#endif\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif ( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_DISPERSION\n\tmaterial.dispersion = dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\t#ifdef USE_ANISOTROPYMAP\n\t\tmat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n\t\tvec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n\t\tvec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n\t#else\n\t\tvec2 anisotropyV = anisotropyVector;\n\t#endif\n\tmaterial.anisotropy = length( anisotropyV );\n\tif( material.anisotropy == 0.0 ) {\n\t\tanisotropyV = vec2( 1.0, 0.0 );\n\t} else {\n\t\tanisotropyV /= material.anisotropy;\n\t\tmaterial.anisotropy = saturate( material.anisotropy );\n\t}\n\tmaterial.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n\tmaterial.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;\n\tmaterial.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\tfloat dispersion;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat anisotropy;\n\t\tfloat alphaT;\n\t\tvec3 anisotropyT;\n\t\tvec3 anisotropyB;\n\t#endif\n};\nvec3 clearcoatSpecularDirect = vec3( 0.0 );\nvec3 clearcoatSpecularIndirect = vec3( 0.0 );\nvec3 sheenSpecularDirect = vec3( 0.0 );\nvec3 sheenSpecularIndirect = vec3(0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n\tfloat V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n\t\tfloat gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n\t\tfloat gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n\t\tfloat v = 0.5 / ( gv + gl );\n\t\treturn saturate(v);\n\t}\n\tfloat D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n\t\tfloat a2 = alphaT * alphaB;\n\t\thighp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n\t\thighp float v2 = dot( v, v );\n\t\tfloat w2 = a2 / v2;\n\t\treturn RECIPROCAL_PI * a2 * pow2 ( w2 );\n\t}\n#endif\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat dotTL = dot( material.anisotropyT, lightDir );\n\t\tfloat dotTV = dot( material.anisotropyT, viewDir );\n\t\tfloat dotTH = dot( material.anisotropyT, halfDir );\n\t\tfloat dotBL = dot( material.anisotropyB, lightDir );\n\t\tfloat dotBV = dot( material.anisotropyB, viewDir );\n\t\tfloat dotBH = dot( material.anisotropyB, halfDir );\n\t\tfloat V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n\t\tfloat D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n\t#else\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t#endif\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometryNormal;\n\t\tvec3 viewDir = geometryViewDir;\n\t\tvec3 position = geometryPosition;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nvec3 geometryPosition = - vViewPosition;\nvec3 geometryNormal = normal;\nvec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\nvec3 geometryClearcoatNormal = vec3( 0.0 );\n#ifdef USE_CLEARCOAT\n\tgeometryClearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometryViewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometryPosition, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometryPosition, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if defined( USE_LIGHT_PROBES )\n\t\tirradiance += getLightProbeIrradiance( lightProbe, geometryNormal );\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometryNormal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\t#ifdef USE_ANISOTROPY\n\t\tradiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );\n\t#else\n\t\tradiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )\n\tgl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGARITHMIC_DEPTH_BUFFER\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGARITHMIC_DEPTH_BUFFER\n\tvFragDepth = 1.0 + gl_Position.w;\n\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphinstance_vertex:"#ifdef USE_INSTANCING_MORPH\n\tfloat morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\tfloat morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tmorphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;\n\t}\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t}\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_INSTANCING_MORPH\n\t\tuniform float morphTargetBaseInfluence;\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t#endif\n\tuniform sampler2DArray morphTargetsTexture;\n\tuniform ivec2 morphTargetsTextureSize;\n\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t}\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t}\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal,\n\t\t#if defined( USE_NORMALMAP )\n\t\t\tvNormalMapUv\n\t\t#elif defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tvClearcoatNormalMapUv\n\t\t#else\n\t\t\tvUv\n\t\t#endif\n\t\t);\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 nonPerturbedNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = nonPerturbedNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",opaque_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;\nconst float Inv255 = 1. / 255.;\nconst vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );\nconst vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );\nconst vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );\nconst vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );\nvec4 packDepthToRGBA( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec4( 0., 0., 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec4( 1., 1., 1., 1. );\n\tfloat vuf;\n\tfloat af = modf( v * PackFactors.a, vuf );\n\tfloat bf = modf( vuf * ShiftRight8, vuf );\n\tfloat gf = modf( vuf * ShiftRight8, vuf );\n\treturn vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );\n}\nvec3 packDepthToRGB( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec3( 0., 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec3( 1., 1., 1. );\n\tfloat vuf;\n\tfloat bf = modf( v * PackFactors.b, vuf );\n\tfloat gf = modf( vuf * ShiftRight8, vuf );\n\treturn vec3( vuf * Inv255, gf * PackUpscale, bf );\n}\nvec2 packDepthToRG( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec2( 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec2( 1., 1. );\n\tfloat vuf;\n\tfloat gf = modf( v * 256., vuf );\n\treturn vec2( vuf * Inv255, gf );\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors4 );\n}\nfloat unpackRGBToDepth( const in vec3 v ) {\n\treturn dot( v, UnpackFactors3 );\n}\nfloat unpackRGToDepth( const in vec2 v ) {\n\treturn v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;\n}\nvec4 pack2HalfToRGBA( const in vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( const in vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_BATCHING\n\tmvPosition = batchingMatrix * mvPosition;\n#endif\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\tfloat depth = unpackRGBAToDepth( texture2D( depths, uv ) );\n\t\t#ifdef USE_REVERSED_DEPTH_BUFFER\n\t\t\treturn step( depth, compare );\n\t\t#else\n\t\t\treturn step( compare, depth );\n\t\t#endif\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow( sampler2D shadow, vec2 uv, float compare ) {\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\t#ifdef USE_REVERSED_DEPTH_BUFFER\n\t\t\tfloat hard_shadow = step( distribution.x, compare );\n\t\t#else\n\t\t\tfloat hard_shadow = step( compare, distribution.x );\n\t\t#endif\n\t\tif ( hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn mix( 1.0, shadow, shadowIntensity );\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tfloat shadow = 1.0;\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\t\n\t\tfloat lightToPositionLength = length( lightToPosition );\n\t\tif ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {\n\t\t\tfloat dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\t\tdp += shadowBias;\n\t\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\t\tshadow = (\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t\t) * ( 1.0 / 9.0 );\n\t\t\t#else\n\t\t\t\tshadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t\t#endif\n\t\t}\n\t\treturn mix( 1.0, shadow, shadowIntensity );\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tint size = textureSize( boneTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 CineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nconst mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.6605, - 0.1246, - 0.0182 ),\n\tvec3( - 0.5876, 1.1329, - 0.1006 ),\n\tvec3( - 0.0728, - 0.0083, 1.1187 )\n);\nconst mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(\n\tvec3( 0.6274, 0.0691, 0.0164 ),\n\tvec3( 0.3293, 0.9195, 0.0880 ),\n\tvec3( 0.0433, 0.0113, 0.8956 )\n);\nvec3 agxDefaultContrastApprox( vec3 x ) {\n\tvec3 x2 = x * x;\n\tvec3 x4 = x2 * x2;\n\treturn + 15.5 * x4 * x2\n\t\t- 40.14 * x4 * x\n\t\t+ 31.96 * x4\n\t\t- 6.868 * x2 * x\n\t\t+ 0.4298 * x2\n\t\t+ 0.1191 * x\n\t\t- 0.00232;\n}\nvec3 AgXToneMapping( vec3 color ) {\n\tconst mat3 AgXInsetMatrix = mat3(\n\t\tvec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),\n\t\tvec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),\n\t\tvec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )\n\t);\n\tconst mat3 AgXOutsetMatrix = mat3(\n\t\tvec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),\n\t\tvec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),\n\t\tvec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )\n\t);\n\tconst float AgxMinEv = - 12.47393;\tconst float AgxMaxEv = 4.026069;\n\tcolor *= toneMappingExposure;\n\tcolor = LINEAR_SRGB_TO_LINEAR_REC2020 * color;\n\tcolor = AgXInsetMatrix * color;\n\tcolor = max( color, 1e-10 );\tcolor = log2( color );\n\tcolor = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );\n\tcolor = clamp( color, 0.0, 1.0 );\n\tcolor = agxDefaultContrastApprox( color );\n\tcolor = AgXOutsetMatrix * color;\n\tcolor = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );\n\tcolor = LINEAR_REC2020_TO_LINEAR_SRGB * color;\n\tcolor = clamp( color, 0.0, 1.0 );\n\treturn color;\n}\nvec3 NeutralToneMapping( vec3 color ) {\n\tconst float StartCompression = 0.8 - 0.04;\n\tconst float Desaturation = 0.15;\n\tcolor *= toneMappingExposure;\n\tfloat x = min( color.r, min( color.g, color.b ) );\n\tfloat offset = x < 0.08 ? x - 6.25 * x * x : 0.04;\n\tcolor -= offset;\n\tfloat peak = max( color.r, max( color.g, color.b ) );\n\tif ( peak < StartCompression ) return color;\n\tfloat d = 1. - StartCompression;\n\tfloat newPeak = 1. - d * d / ( peak + d - StartCompression );\n\tcolor *= newPeak / peak;\n\tfloat g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );\n\treturn mix( color, vec3( newPeak ), g );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmitted = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn vec3( 1.0 );\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec4 transmittedLight;\n\t\tvec3 transmittance;\n\t\t#ifdef USE_DISPERSION\n\t\t\tfloat halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;\n\t\t\tvec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );\n\t\t\tfor ( int i = 0; i < 3; i ++ ) {\n\t\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );\n\t\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\t\trefractionCoords += 1.0;\n\t\t\t\trefractionCoords /= 2.0;\n\t\t\t\tvec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );\n\t\t\t\ttransmittedLight[ i ] = transmissionSample[ i ];\n\t\t\t\ttransmittedLight.a += transmissionSample.a;\n\t\t\t\ttransmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];\n\t\t\t}\n\t\t\ttransmittedLight.a /= 3.0;\n\t\t#else\n\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\trefractionCoords += 1.0;\n\t\t\trefractionCoords /= 2.0;\n\t\t\ttransmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\t\ttransmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\t#endif\n\t\tvec3 attenuatedColor = transmittance * transmittedLight.rgb;\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\tfloat transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n\t}\n#endif",uv_pars_fragment:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tuniform mat3 anisotropyMapTransform;\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_BATCHING\n\t\tworldPosition = batchingMatrix * worldPosition;\n\t#endif\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nuniform mat3 backgroundRotation;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",depth_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <logdepthbuf_fragment>\n\t#ifdef USE_REVERSED_DEPTH_BUFFER\n\t\tfloat fragCoordZ = vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ];\n\t#else\n\t\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ] + 0.5;\n\t#endif\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#elif DEPTH_PACKING == 3202\n\t\tgl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );\n\t#elif DEPTH_PACKING == 3203\n\t\tgl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_DISPERSION\n\tuniform float dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\tuniform vec2 anisotropyVector;\n\t#ifdef USE_ANISOTROPYMAP\n\t\tuniform sampler2D anisotropyMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;\n\t#endif\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix[ 3 ];\n\tvec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}"}),Rg={common:{diffuse:{value:new Zp(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new mf},alphaMap:{value:null},alphaMapTransform:{value:new mf},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new mf}},envmap:{envMap:{value:null},envMapRotation:{value:new mf},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new mf}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new mf}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new mf},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new mf},normalScale:{value:new df(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new mf},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new mf}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new mf}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new mf}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Zp(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Zp(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new mf},alphaTest:{value:0},uvTransform:{value:new mf}},sprite:{diffuse:{value:new Zp(16777215)},opacity:{value:1},center:{value:new df(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new mf},alphaMap:{value:null},alphaMapTransform:{value:new mf},alphaTest:{value:0}}},Ig={basic:{uniforms:mergeUniforms([Rg.common,Rg.specularmap,Rg.envmap,Rg.aomap,Rg.lightmap,Rg.fog]),vertexShader:Mg.meshbasic_vert,fragmentShader:Mg.meshbasic_frag},lambert:{uniforms:mergeUniforms([Rg.common,Rg.specularmap,Rg.envmap,Rg.aomap,Rg.lightmap,Rg.emissivemap,Rg.bumpmap,Rg.normalmap,Rg.displacementmap,Rg.fog,Rg.lights,{emissive:{value:new Zp(0)}}]),vertexShader:Mg.meshlambert_vert,fragmentShader:Mg.meshlambert_frag},phong:{uniforms:mergeUniforms([Rg.common,Rg.specularmap,Rg.envmap,Rg.aomap,Rg.lightmap,Rg.emissivemap,Rg.bumpmap,Rg.normalmap,Rg.displacementmap,Rg.fog,Rg.lights,{emissive:{value:new Zp(0)},specular:{value:new Zp(1118481)},shininess:{value:30}}]),vertexShader:Mg.meshphong_vert,fragmentShader:Mg.meshphong_frag},standard:{uniforms:mergeUniforms([Rg.common,Rg.envmap,Rg.aomap,Rg.lightmap,Rg.emissivemap,Rg.bumpmap,Rg.normalmap,Rg.displacementmap,Rg.roughnessmap,Rg.metalnessmap,Rg.fog,Rg.lights,{emissive:{value:new Zp(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Mg.meshphysical_vert,fragmentShader:Mg.meshphysical_frag},toon:{uniforms:mergeUniforms([Rg.common,Rg.aomap,Rg.lightmap,Rg.emissivemap,Rg.bumpmap,Rg.normalmap,Rg.displacementmap,Rg.gradientmap,Rg.fog,Rg.lights,{emissive:{value:new Zp(0)}}]),vertexShader:Mg.meshtoon_vert,fragmentShader:Mg.meshtoon_frag},matcap:{uniforms:mergeUniforms([Rg.common,Rg.bumpmap,Rg.normalmap,Rg.displacementmap,Rg.fog,{matcap:{value:null}}]),vertexShader:Mg.meshmatcap_vert,fragmentShader:Mg.meshmatcap_frag},points:{uniforms:mergeUniforms([Rg.points,Rg.fog]),vertexShader:Mg.points_vert,fragmentShader:Mg.points_frag},dashed:{uniforms:mergeUniforms([Rg.common,Rg.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Mg.linedashed_vert,fragmentShader:Mg.linedashed_frag},depth:{uniforms:mergeUniforms([Rg.common,Rg.displacementmap]),vertexShader:Mg.depth_vert,fragmentShader:Mg.depth_frag},normal:{uniforms:mergeUniforms([Rg.common,Rg.bumpmap,Rg.normalmap,Rg.displacementmap,{opacity:{value:1}}]),vertexShader:Mg.meshnormal_vert,fragmentShader:Mg.meshnormal_frag},sprite:{uniforms:mergeUniforms([Rg.sprite,Rg.fog]),vertexShader:Mg.sprite_vert,fragmentShader:Mg.sprite_frag},background:{uniforms:{uvTransform:{value:new mf},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Mg.background_vert,fragmentShader:Mg.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new mf}},vertexShader:Mg.backgroundCube_vert,fragmentShader:Mg.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Mg.cube_vert,fragmentShader:Mg.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Mg.equirect_vert,fragmentShader:Mg.equirect_frag},distanceRGBA:{uniforms:mergeUniforms([Rg.common,Rg.displacementmap,{referencePosition:{value:new pf},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Mg.distanceRGBA_vert,fragmentShader:Mg.distanceRGBA_frag},shadow:{uniforms:mergeUniforms([Rg.lights,Rg.fog,{color:{value:new Zp(0)},opacity:{value:1}}]),vertexShader:Mg.shadow_vert,fragmentShader:Mg.shadow_frag}};Ig.physical={uniforms:mergeUniforms([Ig.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new mf},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new mf},clearcoatNormalScale:{value:new df(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new mf},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new mf},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new mf},sheen:{value:0},sheenColor:{value:new Zp(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new mf},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new mf},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new mf},transmissionSamplerSize:{value:new df},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new mf},attenuationDistance:{value:0},attenuationColor:{value:new Zp(0)},specularColor:{value:new Zp(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new mf},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new mf},anisotropyVector:{value:new df},anisotropyMap:{value:null},anisotropyMapTransform:{value:new mf}}]),vertexShader:Mg.meshphysical_vert,fragmentShader:Mg.meshphysical_frag};var Pg={r:0,b:0,g:0},Dg=new mp,Og=new sp;function WebGLBackground(e,l,_,S,k,E,T){var M,R,I=new Zp(0),D=!0===E?0:1,O=null,L=0,U=null;function getBackground(e){var S=!0===e.isScene?e.background:null;S&&S.isTexture&&(S=(e.backgroundBlurriness>0?_:l).get(S));return S}function setClear(l,_){l.getRGB(Pg,getUnlitUniformColorSpace(e)),S.buffers.color.setClear(Pg.r,Pg.g,Pg.b,_,T)}return{getClearColor:function(){return I},setClearColor:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;I.set(e),setClear(I,D=l)},getClearAlpha:function(){return D},setClearAlpha:function(e){setClear(I,D=e)},render:function(l){var _=!1,k=getBackground(l);null===k?setClear(I,D):k&&k.isColor&&(setClear(k,1),_=!0);var E=e.xr.getEnvironmentBlendMode();"additive"===E?S.buffers.color.setClear(0,0,0,1,T):"alpha-blend"===E&&S.buffers.color.setClear(0,0,0,0,T),(e.autoClear||_)&&(S.buffers.depth.setTest(!0),S.buffers.depth.setMask(!0),S.buffers.color.setMask(!0),e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil))},addToRenderList:function(l,_){var S=getBackground(_);S&&(S.isCubeTexture||S.mapping===Wh)?(void 0===R&&((R=new Mv(new Rv(1,1,1),new Pv({name:"BackgroundCubeMaterial",uniforms:cloneUniforms(Ig.backgroundCube.uniforms),vertexShader:Ig.backgroundCube.vertexShader,fragmentShader:Ig.backgroundCube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1}))).geometry.deleteAttribute("normal"),R.geometry.deleteAttribute("uv"),R.onBeforeRender=function(e,l,_){this.matrixWorld.copyPosition(_.matrixWorld)},Object.defineProperty(R.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),k.update(R)),Dg.copy(_.backgroundRotation),Dg.x*=-1,Dg.y*=-1,Dg.z*=-1,S.isCubeTexture&&!1===S.isRenderTargetTexture&&(Dg.y*=-1,Dg.z*=-1),R.material.uniforms.envMap.value=S,R.material.uniforms.flipEnvMap.value=S.isCubeTexture&&!1===S.isRenderTargetTexture?-1:1,R.material.uniforms.backgroundBlurriness.value=_.backgroundBlurriness,R.material.uniforms.backgroundIntensity.value=_.backgroundIntensity,R.material.uniforms.backgroundRotation.value.setFromMatrix4(Og.makeRotationFromEuler(Dg)),R.material.toneMapped=xf.getTransfer(S.colorSpace)!==rf,O===S&&L===S.version&&U===e.toneMapping||(R.material.needsUpdate=!0,O=S,L=S.version,U=e.toneMapping),R.layers.enableAll(),l.unshift(R,R.geometry,R.material,0,0,null)):S&&S.isTexture&&(void 0===M&&((M=new Mv(new bg(2,2),new Pv({name:"BackgroundMaterial",uniforms:cloneUniforms(Ig.background.uniforms),vertexShader:Ig.background.vertexShader,fragmentShader:Ig.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1}))).geometry.deleteAttribute("normal"),Object.defineProperty(M.material,"map",{get:function(){return this.uniforms.t2D.value}}),k.update(M)),M.material.uniforms.t2D.value=S,M.material.uniforms.backgroundIntensity.value=_.backgroundIntensity,M.material.toneMapped=xf.getTransfer(S.colorSpace)!==rf,!0===S.matrixAutoUpdate&&S.updateMatrix(),M.material.uniforms.uvTransform.value.copy(S.matrix),O===S&&L===S.version&&U===e.toneMapping||(M.material.needsUpdate=!0,O=S,L=S.version,U=e.toneMapping),M.layers.enableAll(),l.unshift(M,M.geometry,M.material,0,0,null))},dispose:function(){void 0!==R&&(R.geometry.dispose(),R.material.dispose(),R=void 0),void 0!==M&&(M.geometry.dispose(),M.material.dispose(),M=void 0)}}}function WebGLBindingStates(e,l){var _=e.getParameter(e.MAX_VERTEX_ATTRIBS),S={},k=createBindingState(null),E=k,T=!1;function bindVertexArrayObject(l){return e.bindVertexArray(l)}function deleteVertexArrayObject(l){return e.deleteVertexArray(l)}function createBindingState(e){for(var l=[],S=[],k=[],E=0;E<_;E++)l[E]=0,S[E]=0,k[E]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:l,enabledAttributes:S,attributeDivisors:k,object:e,attributes:{},index:null}}function initAttributes(){for(var e=E.newAttributes,l=0,_=e.length;l<_;l++)e[l]=0}function enableAttribute(e){enableAttributeAndDivisor(e,0)}function enableAttributeAndDivisor(l,_){var S=E.newAttributes,k=E.enabledAttributes,T=E.attributeDivisors;S[l]=1,0===k[l]&&(e.enableVertexAttribArray(l),k[l]=1),T[l]!==_&&(e.vertexAttribDivisor(l,_),T[l]=_)}function disableUnusedAttributes(){for(var l=E.newAttributes,_=E.enabledAttributes,S=0,k=_.length;S<k;S++)_[S]!==l[S]&&(e.disableVertexAttribArray(S),_[S]=0)}function vertexAttribPointer(l,_,S,k,E,T,M){!0===M?e.vertexAttribIPointer(l,_,S,E,T):e.vertexAttribPointer(l,_,S,k,E,T)}function reset(){resetDefaultState(),T=!0,E!==k&&bindVertexArrayObject((E=k).object)}function resetDefaultState(){k.geometry=null,k.program=null,k.wireframe=!1}return{setup:function(_,k,M,R,I){var D,O=function(l,_,k){var E=!0===k.wireframe,T=S[l.id];void 0===T&&(T={},S[l.id]=T);var M=T[_.id];void 0===M&&(M={},T[_.id]=M);var R=M[E];void 0===R&&(R=createBindingState(e.createVertexArray()),M[E]=R);return R}(R,M,k);E!==O&&bindVertexArrayObject((E=O).object),D=function(e,l,_,S){var k=E.attributes,T=l.attributes,M=0,R=_.getAttributes();for(var I in R){if(R[I].location>=0){var D=k[I],O=T[I];if(void 0===O&&("instanceMatrix"===I&&e.instanceMatrix&&(O=e.instanceMatrix),"instanceColor"===I&&e.instanceColor&&(O=e.instanceColor)),void 0===D)return!0;if(D.attribute!==O)return!0;if(O&&D.data!==O.data)return!0;M++}}return E.attributesNum!==M||E.index!==S}(_,R,M,I),D&&function(e,l,_,S){var k={},T=l.attributes,M=0,R=_.getAttributes();for(var I in R){if(R[I].location>=0){var D=T[I];void 0===D&&("instanceMatrix"===I&&e.instanceMatrix&&(D=e.instanceMatrix),"instanceColor"===I&&e.instanceColor&&(D=e.instanceColor));var O={};O.attribute=D,D&&D.data&&(O.data=D.data),k[I]=O,M++}}E.attributes=k,E.attributesNum=M,E.index=S}(_,R,M,I),null!==I&&l.update(I,e.ELEMENT_ARRAY_BUFFER),(D||T)&&(T=!1,function(_,S,k,E){initAttributes();var T=E.attributes,M=k.getAttributes(),R=S.defaultAttributeValues;for(var I in M){var D=M[I];if(D.location>=0){var O=T[I];if(void 0===O&&("instanceMatrix"===I&&_.instanceMatrix&&(O=_.instanceMatrix),"instanceColor"===I&&_.instanceColor&&(O=_.instanceColor)),void 0!==O){var L=O.normalized,U=O.itemSize,B=l.get(O);if(void 0===B)continue;var z=B.buffer,G=B.type,j=B.bytesPerElement,H=G===e.INT||G===e.UNSIGNED_INT||O.gpuType===id;if(O.isInterleavedBufferAttribute){var V=O.data,W=V.stride,q=O.offset;if(V.isInstancedInterleavedBuffer){for(var X=0;X<D.locationSize;X++)enableAttributeAndDivisor(D.location+X,V.meshPerAttribute);!0!==_.isInstancedMesh&&void 0===E._maxInstanceCount&&(E._maxInstanceCount=V.meshPerAttribute*V.count)}else for(var K=0;K<D.locationSize;K++)enableAttribute(D.location+K);e.bindBuffer(e.ARRAY_BUFFER,z);for(var Y=0;Y<D.locationSize;Y++)vertexAttribPointer(D.location+Y,U/D.locationSize,G,L,W*j,(q+U/D.locationSize*Y)*j,H)}else{if(O.isInstancedBufferAttribute){for(var Q=0;Q<D.locationSize;Q++)enableAttributeAndDivisor(D.location+Q,O.meshPerAttribute);!0!==_.isInstancedMesh&&void 0===E._maxInstanceCount&&(E._maxInstanceCount=O.meshPerAttribute*O.count)}else for(var J=0;J<D.locationSize;J++)enableAttribute(D.location+J);e.bindBuffer(e.ARRAY_BUFFER,z);for(var Z=0;Z<D.locationSize;Z++)vertexAttribPointer(D.location+Z,U/D.locationSize,G,L,U*j,U/D.locationSize*Z*j,H)}}else if(void 0!==R){var $=R[I];if(void 0!==$)switch($.length){case 2:e.vertexAttrib2fv(D.location,$);break;case 3:e.vertexAttrib3fv(D.location,$);break;case 4:e.vertexAttrib4fv(D.location,$);break;default:e.vertexAttrib1fv(D.location,$)}}}}disableUnusedAttributes()}(_,k,M,R),null!==I&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,l.get(I).buffer))},reset:reset,resetDefaultState:resetDefaultState,dispose:function(){for(var e in reset(),S){var l=S[e];for(var _ in l){var k=l[_];for(var E in k)deleteVertexArrayObject(k[E].object),delete k[E];delete l[_]}delete S[e]}},releaseStatesOfGeometry:function(e){if(void 0!==S[e.id]){var l=S[e.id];for(var _ in l){var k=l[_];for(var E in k)deleteVertexArrayObject(k[E].object),delete k[E];delete l[_]}delete S[e.id]}},releaseStatesOfProgram:function(e){for(var l in S){var _=S[l];if(void 0!==_[e.id]){var k=_[e.id];for(var E in k)deleteVertexArrayObject(k[E].object),delete k[E];delete _[e.id]}}},initAttributes:initAttributes,enableAttribute:enableAttribute,disableUnusedAttributes:disableUnusedAttributes}}function WebGLBufferRenderer(e,l,_){var S;function renderInstances(l,k,E){0!==E&&(e.drawArraysInstanced(S,l,k,E),_.update(k,S,E))}this.setMode=function(e){S=e},this.render=function(l,k){e.drawArrays(S,l,k),_.update(k,S,1)},this.renderInstances=renderInstances,this.renderMultiDraw=function(e,k,E){if(0!==E){l.get("WEBGL_multi_draw").multiDrawArraysWEBGL(S,e,0,k,0,E);for(var T=0,M=0;M<E;M++)T+=k[M];_.update(T,S,1)}},this.renderMultiDrawInstances=function(e,k,E,T){if(0!==E){var M=l.get("WEBGL_multi_draw");if(null===M)for(var R=0;R<e.length;R++)renderInstances(e[R],k[R],T[R]);else{M.multiDrawArraysInstancedWEBGL(S,e,0,k,0,T,0,E);for(var I=0,D=0;D<E;D++)I+=k[D]*T[D];_.update(I,S,1)}}}}function WebGLCapabilities(e,l,_,S){var k;function getMaxPrecision(l){if("highp"===l){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0)return"highp";l="mediump"}return"mediump"===l&&e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}var E=void 0!==_.precision?_.precision:"highp",T=getMaxPrecision(E);T!==E&&(E=T);var M=!0===_.logarithmicDepthBuffer,R=!0===_.reversedDepthBuffer&&l.has("EXT_clip_control"),I=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),D=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS);return{isWebGL2:!0,getMaxAnisotropy:function(){if(void 0!==k)return k;if(!0===l.has("EXT_texture_filter_anisotropic")){var _=l.get("EXT_texture_filter_anisotropic");k=e.getParameter(_.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else k=0;return k},getMaxPrecision:getMaxPrecision,textureFormatReadable:function(l){return l===fd||S.convert(l)===e.getParameter(e.IMPLEMENTATION_COLOR_READ_FORMAT)},textureTypeReadable:function(_){var k=_===sd&&(l.has("EXT_color_buffer_half_float")||l.has("EXT_color_buffer_float"));return!(_!==ed&&S.convert(_)!==e.getParameter(e.IMPLEMENTATION_COLOR_READ_TYPE)&&_!==od&&!k)},precision:E,logarithmicDepthBuffer:M,reversedDepthBuffer:R,maxTextures:I,maxVertexTextures:D,maxTextureSize:e.getParameter(e.MAX_TEXTURE_SIZE),maxCubemapSize:e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),maxAttributes:e.getParameter(e.MAX_VERTEX_ATTRIBS),maxVertexUniforms:e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),maxVaryings:e.getParameter(e.MAX_VARYING_VECTORS),maxFragmentUniforms:e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),vertexTextures:D>0,maxSamples:e.getParameter(e.MAX_SAMPLES)}}function WebGLClipping(e){var l=this,_=null,S=0,k=!1,E=!1,T=new Jv,M=new mf,R={value:null,needsUpdate:!1};function projectPlanes(e,_,S,k){var E=null!==e?e.length:0,I=null;if(0!==E){if(I=R.value,!0!==k||null===I){var D=S+4*E,O=_.matrixWorldInverse;M.getNormalMatrix(O),(null===I||I.length<D)&&(I=new Float32Array(D));for(var L=0,U=S;L!==E;++L,U+=4)T.copy(e[L]).applyMatrix4(O,M),T.normal.toArray(I,U),I[U+3]=T.constant}R.value=I,R.needsUpdate=!0}return l.numPlanes=E,l.numIntersection=0,I}this.uniform=R,this.numPlanes=0,this.numIntersection=0,this.init=function(e,l){var _=0!==e.length||l||0!==S||k;return k=l,S=e.length,_},this.beginShadows=function(){E=!0,projectPlanes(null)},this.endShadows=function(){E=!1},this.setGlobalState=function(e,l){_=projectPlanes(e,l,0)},this.setState=function(T,M,I){var D=T.clippingPlanes,O=T.clipIntersection,L=T.clipShadows,U=e.get(T);if(!k||null===D||0===D.length||E&&!L)E?projectPlanes(null):function(){R.value!==_&&(R.value=_,R.needsUpdate=S>0);l.numPlanes=S,l.numIntersection=0}();else{var B=E?0:S,z=4*B,G=U.clippingState||null;R.value=G,G=projectPlanes(D,M,z,I);for(var j=0;j!==z;++j)G[j]=_[j];U.clippingState=G,this.numIntersection=O?this.numPlanes:0,this.numPlanes+=B}}}function WebGLCubeMaps(e){var l=new WeakMap;function mapTextureMapping(e,l){return 303===l?e.mapping=Hh:304===l&&(e.mapping=Vh),e}function onTextureDispose(e){var _=e.target;_.removeEventListener("dispose",onTextureDispose);var S=l.get(_);void 0!==S&&(l.delete(_),S.dispose())}return{get:function(_){if(_&&_.isTexture){var S=_.mapping;if(303===S||304===S){if(l.has(_))return mapTextureMapping(l.get(_).texture,_.mapping);var k=_.image;if(k&&k.height>0){var E=new Gv(k.height);return E.fromEquirectangularTexture(e,_),l.set(_,E),_.addEventListener("dispose",onTextureDispose),mapTextureMapping(E.texture,_.mapping)}return null}}return _},dispose:function(){l=new WeakMap}}}var Lg=[.125,.215,.35,.446,.526,.582],Ug=20,Fg=new Ag,Ng=new Zp,Bg=null,zg=0,Gg=0,jg=!1,Hg=(1+Math.sqrt(5))/2,Vg=1/Hg,Wg=[new pf(-Hg,Vg,0),new pf(Hg,Vg,0),new pf(-Vg,0,Hg),new pf(Vg,0,Hg),new pf(0,Hg,-Vg),new pf(0,Hg,Vg),new pf(-1,1,-1),new pf(1,1,-1),new pf(-1,1,1),new pf(1,1,1)],qg=new pf,Xg=function(){return _createClass3(function PMREMGenerator(e){_classCallCheck3(this,PMREMGenerator),this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)},[{key:"fromScene",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,_=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,S=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100,k=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},E=k.size,T=void 0===E?256:E,M=k.position,R=void 0===M?qg:M;Bg=this._renderer.getRenderTarget(),zg=this._renderer.getActiveCubeFace(),Gg=this._renderer.getActiveMipmapLevel(),jg=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(T);var I=this._allocateTargets();return I.depthBuffer=!0,this._sceneToCubeUV(e,_,S,I,R),l>0&&this._blur(I,0,0,l),this._applyPMREM(I),this._cleanup(I),I}},{key:"fromEquirectangular",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(e,l)}},{key:"fromCubemap",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(e,l)}},{key:"compileCubemapShader",value:function(){null===this._cubemapMaterial&&(this._cubemapMaterial=_getCubemapMaterial(),this._compileMaterial(this._cubemapMaterial))}},{key:"compileEquirectangularShader",value:function(){null===this._equirectMaterial&&(this._equirectMaterial=_getEquirectMaterial(),this._compileMaterial(this._equirectMaterial))}},{key:"dispose",value:function(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}},{key:"_setSize",value:function(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}},{key:"_dispose",value:function(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(var e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}},{key:"_cleanup",value:function(e){this._renderer.setRenderTarget(Bg,zg,Gg),this._renderer.xr.enabled=jg,e.scissorTest=!1,_setViewport(e,0,0,e.width,e.height)}},{key:"_fromTexture",value:function(e,l){e.mapping===Hh||e.mapping===Vh?this._setSize(0===e.image.length?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),Bg=this._renderer.getRenderTarget(),zg=this._renderer.getActiveCubeFace(),Gg=this._renderer.getActiveMipmapLevel(),jg=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;var _=l||this._allocateTargets();return this._textureToCubeUV(e,_),this._applyPMREM(_),this._cleanup(_),_}},{key:"_allocateTargets",value:function(){var e=3*Math.max(this._cubeSize,112),l=4*this._cubeSize,_={magFilter:Jh,minFilter:Jh,generateMipmaps:!1,type:sd,format:fd,colorSpace:ef,depthBuffer:!1},S=_createRenderTarget(e,l,_);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==l){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=_createRenderTarget(e,l,_);var k=this._lodMax,E=function(e){for(var l=[],_=[],S=[],k=e,E=e-4+1+Lg.length,T=0;T<E;T++){var M=Math.pow(2,k);_.push(M);var R=1/M;T>e-4?R=Lg[T-e+4-1]:0===T&&(R=0),S.push(R);for(var I=1/(M-2),D=-I,O=1+I,L=[D,D,O,D,O,O,D,D,O,O,D,O],U=6,B=6,z=3,G=2,j=1,H=new Float32Array(z*B*U),V=new Float32Array(G*B*U),W=new Float32Array(j*B*U),q=0;q<U;q++){var X=q%3*2/3-1,K=q>2?0:-1,Y=[X,K,0,X+2/3,K,0,X+2/3,K+1,0,X,K,0,X+2/3,K+1,0,X,K+1,0];H.set(Y,z*B*q),V.set(L,G*B*q);var Q=[q,q,q,q,q,q];W.set(Q,j*B*q)}var J=new mv;J.setAttribute("position",new ov(H,z)),J.setAttribute("uv",new ov(V,G)),J.setAttribute("faceIndex",new ov(W,j)),l.push(J),k>4&&k--}return{lodPlanes:l,sizeLods:_,sigmas:S}}(k);this._sizeLods=E.sizeLods,this._lodPlanes=E.lodPlanes,this._sigmas=E.sigmas,this._blurMaterial=function(e,l,_){var S=new Float32Array(Ug),k=new pf(0,1,0),E=new Pv({name:"SphericalGaussianBlur",defines:{n:Ug,CUBEUV_TEXEL_WIDTH:1/l,CUBEUV_TEXEL_HEIGHT:1/_,CUBEUV_MAX_MIP:"".concat(e,".0")},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:S},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:k}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1});return E}(k,e,l)}return S}},{key:"_compileMaterial",value:function(e){var l=new Mv(this._lodPlanes[0],e);this._renderer.compile(l,Fg)}},{key:"_sceneToCubeUV",value:function(e,l,_,S,k){var E=new Fv(90,1,l,_),T=[1,-1,1,1,1,1],M=[1,1,1,-1,-1,-1],R=this._renderer,I=R.autoClear,D=R.toneMapping;R.getClearColor(Ng),R.toneMapping=0,R.autoClear=!1,R.state.buffers.depth.getReversed()&&(R.setRenderTarget(S),R.clearDepth(),R.setRenderTarget(null));var O=new rv({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),L=new Mv(new Rv,O),U=!1,B=e.background;B?B.isColor&&(O.color.copy(B),e.background=null,U=!0):(O.color.copy(Ng),U=!0);for(var z=0;z<6;z++){var G=z%3;0===G?(E.up.set(0,T[z],0),E.position.set(k.x,k.y,k.z),E.lookAt(k.x+M[z],k.y,k.z)):1===G?(E.up.set(0,0,T[z]),E.position.set(k.x,k.y,k.z),E.lookAt(k.x,k.y+M[z],k.z)):(E.up.set(0,T[z],0),E.position.set(k.x,k.y,k.z),E.lookAt(k.x,k.y,k.z+M[z]));var j=this._cubeSize;_setViewport(S,G*j,z>2?j:0,j,j),R.setRenderTarget(S),U&&R.render(L,E),R.render(e,E)}L.geometry.dispose(),L.material.dispose(),R.toneMapping=D,R.autoClear=I,e.background=B}},{key:"_textureToCubeUV",value:function(e,l){var _=this._renderer,S=e.mapping===Hh||e.mapping===Vh;S?(null===this._cubemapMaterial&&(this._cubemapMaterial=_getCubemapMaterial()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=_getEquirectMaterial());var k=S?this._cubemapMaterial:this._equirectMaterial,E=new Mv(this._lodPlanes[0],k);k.uniforms.envMap.value=e;var T=this._cubeSize;_setViewport(l,0,0,3*T,2*T),_.setRenderTarget(l),_.render(E,Fg)}},{key:"_applyPMREM",value:function(e){var l=this._renderer,_=l.autoClear;l.autoClear=!1;for(var S=this._lodPlanes.length,k=1;k<S;k++){var E=Math.sqrt(this._sigmas[k]*this._sigmas[k]-this._sigmas[k-1]*this._sigmas[k-1]),T=Wg[(S-k-1)%Wg.length];this._blur(e,k-1,k,E,T)}l.autoClear=_}},{key:"_blur",value:function(e,l,_,S,k){var E=this._pingPongRenderTarget;this._halfBlur(e,E,l,_,S,"latitudinal",k),this._halfBlur(E,e,_,_,S,"longitudinal",k)}},{key:"_halfBlur",value:function(e,l,_,S,k,E,T){for(var M=this._renderer,R=this._blurMaterial,I=new Mv(this._lodPlanes[S],R),D=R.uniforms,O=this._sizeLods[_]-1,L=isFinite(k)?Math.PI/(2*O):2*Math.PI/39,U=k/L,B=isFinite(k)?1+Math.floor(3*U):Ug,z=[],G=0,j=0;j<Ug;++j){var H=j/U,V=Math.exp(-H*H/2);z.push(V),0===j?G+=V:j<B&&(G+=2*V)}for(var W=0;W<z.length;W++)z[W]=z[W]/G;D.envMap.value=e.texture,D.samples.value=B,D.weights.value=z,D.latitudinal.value="latitudinal"===E,T&&(D.poleAxis.value=T);var q=this._lodMax;D.dTheta.value=L,D.mipInt.value=q-_;var X=this._sizeLods[S];_setViewport(l,3*X*(S>q-4?S-q+4:0),4*(this._cubeSize-X),3*X,2*X),M.setRenderTarget(l),M.render(I,Fg)}}])}();function _createRenderTarget(e,l,_){var S=new Pf(e,l,_);return S.texture.mapping=Wh,S.texture.name="PMREM.cubeUv",S.scissorTest=!0,S}function _setViewport(e,l,_,S,k){e.viewport.set(l,_,S,k),e.scissor.set(l,_,S,k)}function _getEquirectMaterial(){return new Pv({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function _getCubemapMaterial(){return new Pv({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function WebGLCubeUVMaps(e){var l=new WeakMap,_=null;function onTextureDispose(e){var _=e.target;_.removeEventListener("dispose",onTextureDispose);var S=l.get(_);void 0!==S&&(l.delete(_),S.dispose())}return{get:function(S){if(S&&S.isTexture){var k=S.mapping,E=303===k||304===k,T=k===Hh||k===Vh;if(E||T){var M=l.get(S),R=void 0!==M?M.texture.pmremVersion:0;if(S.isRenderTargetTexture&&S.pmremVersion!==R)return null===_&&(_=new Xg(e)),(M=E?_.fromEquirectangular(S,M):_.fromCubemap(S,M)).texture.pmremVersion=S.pmremVersion,l.set(S,M),M.texture;if(void 0!==M)return M.texture;var I=S.image;return E&&I&&I.height>0||T&&I&&function(e){for(var l=0,_=6,S=0;S<_;S++)void 0!==e[S]&&l++;return l===_}(I)?(null===_&&(_=new Xg(e)),(M=E?_.fromEquirectangular(S):_.fromCubemap(S)).texture.pmremVersion=S.pmremVersion,l.set(S,M),S.addEventListener("dispose",onTextureDispose),M.texture):null}}return S},dispose:function(){l=new WeakMap,null!==_&&(_.dispose(),_=null)}}}function WebGLExtensions(e){var l={};function getExtension(_){if(void 0!==l[_])return l[_];var S;switch(_){case"WEBGL_depth_texture":S=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":S=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":S=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":S=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:S=e.getExtension(_)}return l[_]=S,S}return{has:function(e){return null!==getExtension(e)},init:function(){getExtension("EXT_color_buffer_float"),getExtension("WEBGL_clip_cull_distance"),getExtension("OES_texture_float_linear"),getExtension("EXT_color_buffer_half_float"),getExtension("WEBGL_multisampled_render_to_texture"),getExtension("WEBGL_render_shared_exponent")},get:function(e){var l=getExtension(e);return null===l&&warnOnce("THREE.WebGLRenderer: "+e+" extension not supported."),l}}}function WebGLGeometries(e,l,_,S){var k={},E=new WeakMap;function onGeometryDispose(e){var T=e.target;for(var M in null!==T.index&&l.remove(T.index),T.attributes)l.remove(T.attributes[M]);T.removeEventListener("dispose",onGeometryDispose),delete k[T.id];var R=E.get(T);R&&(l.remove(R),E.delete(T)),S.releaseStatesOfGeometry(T),!0===T.isInstancedBufferGeometry&&delete T._maxInstanceCount,_.memory.geometries--}function updateWireframeAttribute(e){var _=[],S=e.index,k=e.attributes.position,T=0;if(null!==S){var M=S.array;T=S.version;for(var R=0,I=M.length;R<I;R+=3){var D=M[R+0],O=M[R+1],L=M[R+2];_.push(D,O,O,L,L,D)}}else{if(void 0===k)return;var U=k.array;T=k.version;for(var B=0,z=U.length/3-1;B<z;B+=3){var G=B+0,j=B+1,H=B+2;_.push(G,j,j,H,H,G)}}var V=new(arrayNeedsUint32(_)?uv:sv)(_,1);V.version=T;var W=E.get(e);W&&l.remove(W),E.set(e,V)}return{get:function(e,l){return!0===k[l.id]||(l.addEventListener("dispose",onGeometryDispose),k[l.id]=!0,_.memory.geometries++),l},update:function(_){var S=_.attributes;for(var k in S)l.update(S[k],e.ARRAY_BUFFER)},getWireframeAttribute:function(e){var l=E.get(e);if(l){var _=e.index;null!==_&&l.version<_.version&&updateWireframeAttribute(e)}else updateWireframeAttribute(e);return E.get(e)}}}function WebGLIndexedBufferRenderer(e,l,_){var S,k,E;function renderInstances(l,T,M){0!==M&&(e.drawElementsInstanced(S,T,k,l*E,M),_.update(T,S,M))}this.setMode=function(e){S=e},this.setIndex=function(e){k=e.type,E=e.bytesPerElement},this.render=function(l,T){e.drawElements(S,T,k,l*E),_.update(T,S,1)},this.renderInstances=renderInstances,this.renderMultiDraw=function(e,E,T){if(0!==T){l.get("WEBGL_multi_draw").multiDrawElementsWEBGL(S,E,0,k,e,0,T);for(var M=0,R=0;R<T;R++)M+=E[R];_.update(M,S,1)}},this.renderMultiDrawInstances=function(e,T,M,R){if(0!==M){var I=l.get("WEBGL_multi_draw");if(null===I)for(var D=0;D<e.length;D++)renderInstances(e[D]/E,T[D],R[D]);else{I.multiDrawElementsInstancedWEBGL(S,T,0,k,e,0,R,0,M);for(var O=0,L=0;L<M;L++)O+=T[L]*R[L];_.update(O,S,1)}}}}function WebGLInfo(e){var l={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:l,programs:null,autoReset:!0,reset:function(){l.calls=0,l.triangles=0,l.points=0,l.lines=0},update:function(_,S,k){switch(l.calls++,S){case e.TRIANGLES:l.triangles+=k*(_/3);break;case e.LINES:l.lines+=k*(_/2);break;case e.LINE_STRIP:l.lines+=k*(_-1);break;case e.LINE_LOOP:l.lines+=k*_;break;case e.POINTS:l.points+=k*_}}}}function WebGLMorphtargets(e,l,_){var S=new WeakMap,k=new Rf;return{update:function(E,T,M){var R=E.morphTargetInfluences,I=T.morphAttributes.position||T.morphAttributes.normal||T.morphAttributes.color,D=void 0!==I?I.length:0,O=S.get(T);if(void 0===O||O.count!==D){var _disposeTexture=function(){X.dispose(),S.delete(T),T.removeEventListener("dispose",_disposeTexture)};void 0!==O&&O.texture.dispose();var L=void 0!==T.morphAttributes.position,U=void 0!==T.morphAttributes.normal,B=void 0!==T.morphAttributes.color,z=T.morphAttributes.position||[],G=T.morphAttributes.normal||[],j=T.morphAttributes.color||[],H=0;!0===L&&(H=1),!0===U&&(H=2),!0===B&&(H=3);var V=T.attributes.position.count*H,W=1;V>l.maxTextureSize&&(W=Math.ceil(V/l.maxTextureSize),V=l.maxTextureSize);var q=new Float32Array(V*W*4*D),X=new Df(q,V,W,D);X.type=od,X.needsUpdate=!0;for(var K=4*H,Y=0;Y<D;Y++)for(var Q=z[Y],J=G[Y],Z=j[Y],$=V*W*4*Y,ee=0;ee<Q.count;ee++){var te=ee*K;!0===L&&(k.fromBufferAttribute(Q,ee),q[$+te+0]=k.x,q[$+te+1]=k.y,q[$+te+2]=k.z,q[$+te+3]=0),!0===U&&(k.fromBufferAttribute(J,ee),q[$+te+4]=k.x,q[$+te+5]=k.y,q[$+te+6]=k.z,q[$+te+7]=0),!0===B&&(k.fromBufferAttribute(Z,ee),q[$+te+8]=k.x,q[$+te+9]=k.y,q[$+te+10]=k.z,q[$+te+11]=4===Z.itemSize?k.w:1)}O={count:D,texture:X,size:new df(V,W)},S.set(T,O),T.addEventListener("dispose",_disposeTexture)}if(!0===E.isInstancedMesh&&null!==E.morphTexture)M.getUniforms().setValue(e,"morphTexture",E.morphTexture,_);else{for(var re=0,ne=0;ne<R.length;ne++)re+=R[ne];var ie=T.morphTargetsRelative?1:1-re;M.getUniforms().setValue(e,"morphTargetBaseInfluence",ie),M.getUniforms().setValue(e,"morphTargetInfluences",R)}M.getUniforms().setValue(e,"morphTargetsTexture",O.texture,_),M.getUniforms().setValue(e,"morphTargetsTextureSize",O.size)}}}function WebGLObjects(e,l,_,S){var k=new WeakMap;function onInstancedMeshDispose(e){var l=e.target;l.removeEventListener("dispose",onInstancedMeshDispose),_.remove(l.instanceMatrix),null!==l.instanceColor&&_.remove(l.instanceColor)}return{update:function(E){var T=S.render.frame,M=E.geometry,R=l.get(E,M);if(k.get(R)!==T&&(l.update(R),k.set(R,T)),E.isInstancedMesh&&(!1===E.hasEventListener("dispose",onInstancedMeshDispose)&&E.addEventListener("dispose",onInstancedMeshDispose),k.get(E)!==T&&(_.update(E.instanceMatrix,e.ARRAY_BUFFER),null!==E.instanceColor&&_.update(E.instanceColor,e.ARRAY_BUFFER),k.set(E,T))),E.isSkinnedMesh){var I=E.skeleton;k.get(I)!==T&&(I.update(),k.set(I,T))}return R},dispose:function(){k=new WeakMap}}}var Kg=new Mf,Yg=new rg(1,1),Qg=new Df,Jg=new Of,Zg=new zv,$g=[],em=[],tm=new Float32Array(16),rm=new Float32Array(9),nm=new Float32Array(4);function flatten(e,l,_){var S=e[0];if(S<=0||S>0)return e;var k=l*_,E=$g[k];if(void 0===E&&(E=new Float32Array(k),$g[k]=E),0!==l){S.toArray(E,0);for(var T=1,M=0;T!==l;++T)M+=_,e[T].toArray(E,M)}return E}function arraysEqual(e,l){if(e.length!==l.length)return!1;for(var _=0,S=e.length;_<S;_++)if(e[_]!==l[_])return!1;return!0}function copyArray(e,l){for(var _=0,S=l.length;_<S;_++)e[_]=l[_]}function allocTexUnits(e,l){var _=em[l];void 0===_&&(_=new Int32Array(l),em[l]=_);for(var S=0;S!==l;++S)_[S]=e.allocateTextureUnit();return _}function setValueV1f(e,l){var _=this.cache;_[0]!==l&&(e.uniform1f(this.addr,l),_[0]=l)}function setValueV2f(e,l){var _=this.cache;if(void 0!==l.x)_[0]===l.x&&_[1]===l.y||(e.uniform2f(this.addr,l.x,l.y),_[0]=l.x,_[1]=l.y);else{if(arraysEqual(_,l))return;e.uniform2fv(this.addr,l),copyArray(_,l)}}function setValueV3f(e,l){var _=this.cache;if(void 0!==l.x)_[0]===l.x&&_[1]===l.y&&_[2]===l.z||(e.uniform3f(this.addr,l.x,l.y,l.z),_[0]=l.x,_[1]=l.y,_[2]=l.z);else if(void 0!==l.r)_[0]===l.r&&_[1]===l.g&&_[2]===l.b||(e.uniform3f(this.addr,l.r,l.g,l.b),_[0]=l.r,_[1]=l.g,_[2]=l.b);else{if(arraysEqual(_,l))return;e.uniform3fv(this.addr,l),copyArray(_,l)}}function setValueV4f(e,l){var _=this.cache;if(void 0!==l.x)_[0]===l.x&&_[1]===l.y&&_[2]===l.z&&_[3]===l.w||(e.uniform4f(this.addr,l.x,l.y,l.z,l.w),_[0]=l.x,_[1]=l.y,_[2]=l.z,_[3]=l.w);else{if(arraysEqual(_,l))return;e.uniform4fv(this.addr,l),copyArray(_,l)}}function setValueM2(e,l){var _=this.cache,S=l.elements;if(void 0===S){if(arraysEqual(_,l))return;e.uniformMatrix2fv(this.addr,!1,l),copyArray(_,l)}else{if(arraysEqual(_,S))return;nm.set(S),e.uniformMatrix2fv(this.addr,!1,nm),copyArray(_,S)}}function setValueM3(e,l){var _=this.cache,S=l.elements;if(void 0===S){if(arraysEqual(_,l))return;e.uniformMatrix3fv(this.addr,!1,l),copyArray(_,l)}else{if(arraysEqual(_,S))return;rm.set(S),e.uniformMatrix3fv(this.addr,!1,rm),copyArray(_,S)}}function setValueM4(e,l){var _=this.cache,S=l.elements;if(void 0===S){if(arraysEqual(_,l))return;e.uniformMatrix4fv(this.addr,!1,l),copyArray(_,l)}else{if(arraysEqual(_,S))return;tm.set(S),e.uniformMatrix4fv(this.addr,!1,tm),copyArray(_,S)}}function setValueV1i(e,l){var _=this.cache;_[0]!==l&&(e.uniform1i(this.addr,l),_[0]=l)}function setValueV2i(e,l){var _=this.cache;if(void 0!==l.x)_[0]===l.x&&_[1]===l.y||(e.uniform2i(this.addr,l.x,l.y),_[0]=l.x,_[1]=l.y);else{if(arraysEqual(_,l))return;e.uniform2iv(this.addr,l),copyArray(_,l)}}function setValueV3i(e,l){var _=this.cache;if(void 0!==l.x)_[0]===l.x&&_[1]===l.y&&_[2]===l.z||(e.uniform3i(this.addr,l.x,l.y,l.z),_[0]=l.x,_[1]=l.y,_[2]=l.z);else{if(arraysEqual(_,l))return;e.uniform3iv(this.addr,l),copyArray(_,l)}}function setValueV4i(e,l){var _=this.cache;if(void 0!==l.x)_[0]===l.x&&_[1]===l.y&&_[2]===l.z&&_[3]===l.w||(e.uniform4i(this.addr,l.x,l.y,l.z,l.w),_[0]=l.x,_[1]=l.y,_[2]=l.z,_[3]=l.w);else{if(arraysEqual(_,l))return;e.uniform4iv(this.addr,l),copyArray(_,l)}}function setValueV1ui(e,l){var _=this.cache;_[0]!==l&&(e.uniform1ui(this.addr,l),_[0]=l)}function setValueV2ui(e,l){var _=this.cache;if(void 0!==l.x)_[0]===l.x&&_[1]===l.y||(e.uniform2ui(this.addr,l.x,l.y),_[0]=l.x,_[1]=l.y);else{if(arraysEqual(_,l))return;e.uniform2uiv(this.addr,l),copyArray(_,l)}}function setValueV3ui(e,l){var _=this.cache;if(void 0!==l.x)_[0]===l.x&&_[1]===l.y&&_[2]===l.z||(e.uniform3ui(this.addr,l.x,l.y,l.z),_[0]=l.x,_[1]=l.y,_[2]=l.z);else{if(arraysEqual(_,l))return;e.uniform3uiv(this.addr,l),copyArray(_,l)}}function setValueV4ui(e,l){var _=this.cache;if(void 0!==l.x)_[0]===l.x&&_[1]===l.y&&_[2]===l.z&&_[3]===l.w||(e.uniform4ui(this.addr,l.x,l.y,l.z,l.w),_[0]=l.x,_[1]=l.y,_[2]=l.z,_[3]=l.w);else{if(arraysEqual(_,l))return;e.uniform4uiv(this.addr,l),copyArray(_,l)}}function setValueT1(e,l,_){var S,k=this.cache,E=_.allocateTextureUnit();k[0]!==E&&(e.uniform1i(this.addr,E),k[0]=E),this.type===e.SAMPLER_2D_SHADOW?(Yg.compareFunction=515,S=Yg):S=Kg,_.setTexture2D(l||S,E)}function setValueT3D1(e,l,_){var S=this.cache,k=_.allocateTextureUnit();S[0]!==k&&(e.uniform1i(this.addr,k),S[0]=k),_.setTexture3D(l||Jg,k)}function setValueT6(e,l,_){var S=this.cache,k=_.allocateTextureUnit();S[0]!==k&&(e.uniform1i(this.addr,k),S[0]=k),_.setTextureCube(l||Zg,k)}function setValueT2DArray1(e,l,_){var S=this.cache,k=_.allocateTextureUnit();S[0]!==k&&(e.uniform1i(this.addr,k),S[0]=k),_.setTexture2DArray(l||Qg,k)}function setValueV1fArray(e,l){e.uniform1fv(this.addr,l)}function setValueV2fArray(e,l){var _=flatten(l,this.size,2);e.uniform2fv(this.addr,_)}function setValueV3fArray(e,l){var _=flatten(l,this.size,3);e.uniform3fv(this.addr,_)}function setValueV4fArray(e,l){var _=flatten(l,this.size,4);e.uniform4fv(this.addr,_)}function setValueM2Array(e,l){var _=flatten(l,this.size,4);e.uniformMatrix2fv(this.addr,!1,_)}function setValueM3Array(e,l){var _=flatten(l,this.size,9);e.uniformMatrix3fv(this.addr,!1,_)}function setValueM4Array(e,l){var _=flatten(l,this.size,16);e.uniformMatrix4fv(this.addr,!1,_)}function setValueV1iArray(e,l){e.uniform1iv(this.addr,l)}function setValueV2iArray(e,l){e.uniform2iv(this.addr,l)}function setValueV3iArray(e,l){e.uniform3iv(this.addr,l)}function setValueV4iArray(e,l){e.uniform4iv(this.addr,l)}function setValueV1uiArray(e,l){e.uniform1uiv(this.addr,l)}function setValueV2uiArray(e,l){e.uniform2uiv(this.addr,l)}function setValueV3uiArray(e,l){e.uniform3uiv(this.addr,l)}function setValueV4uiArray(e,l){e.uniform4uiv(this.addr,l)}function setValueT1Array(e,l,_){var S=this.cache,k=l.length,E=allocTexUnits(_,k);arraysEqual(S,E)||(e.uniform1iv(this.addr,E),copyArray(S,E));for(var T=0;T!==k;++T)_.setTexture2D(l[T]||Kg,E[T])}function setValueT3DArray(e,l,_){var S=this.cache,k=l.length,E=allocTexUnits(_,k);arraysEqual(S,E)||(e.uniform1iv(this.addr,E),copyArray(S,E));for(var T=0;T!==k;++T)_.setTexture3D(l[T]||Jg,E[T])}function setValueT6Array(e,l,_){var S=this.cache,k=l.length,E=allocTexUnits(_,k);arraysEqual(S,E)||(e.uniform1iv(this.addr,E),copyArray(S,E));for(var T=0;T!==k;++T)_.setTextureCube(l[T]||Zg,E[T])}function setValueT2DArrayArray(e,l,_){var S=this.cache,k=l.length,E=allocTexUnits(_,k);arraysEqual(S,E)||(e.uniform1iv(this.addr,E),copyArray(S,E));for(var T=0;T!==k;++T)_.setTexture2DArray(l[T]||Qg,E[T])}var im=_createClass3(function SingleUniform(e,l,_){_classCallCheck3(this,SingleUniform),this.id=e,this.addr=_,this.cache=[],this.type=l.type,this.setValue=function(e){switch(e){case 5126:return setValueV1f;case 35664:return setValueV2f;case 35665:return setValueV3f;case 35666:return setValueV4f;case 35674:return setValueM2;case 35675:return setValueM3;case 35676:return setValueM4;case 5124:case 35670:return setValueV1i;case 35667:case 35671:return setValueV2i;case 35668:case 35672:return setValueV3i;case 35669:case 35673:return setValueV4i;case 5125:return setValueV1ui;case 36294:return setValueV2ui;case 36295:return setValueV3ui;case 36296:return setValueV4ui;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1;case 35679:case 36299:case 36307:return setValueT3D1;case 35680:case 36300:case 36308:case 36293:return setValueT6;case 36289:case 36303:case 36311:case 36292:return setValueT2DArray1}}(l.type)}),am=_createClass3(function PureArrayUniform(e,l,_){_classCallCheck3(this,PureArrayUniform),this.id=e,this.addr=_,this.cache=[],this.type=l.type,this.size=l.size,this.setValue=function(e){switch(e){case 5126:return setValueV1fArray;case 35664:return setValueV2fArray;case 35665:return setValueV3fArray;case 35666:return setValueV4fArray;case 35674:return setValueM2Array;case 35675:return setValueM3Array;case 35676:return setValueM4Array;case 5124:case 35670:return setValueV1iArray;case 35667:case 35671:return setValueV2iArray;case 35668:case 35672:return setValueV3iArray;case 35669:case 35673:return setValueV4iArray;case 5125:return setValueV1uiArray;case 36294:return setValueV2uiArray;case 36295:return setValueV3uiArray;case 36296:return setValueV4uiArray;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1Array;case 35679:case 36299:case 36307:return setValueT3DArray;case 35680:case 36300:case 36308:case 36293:return setValueT6Array;case 36289:case 36303:case 36311:case 36292:return setValueT2DArrayArray}}(l.type)}),om=function(){return _createClass3(function StructuredUniform(e){_classCallCheck3(this,StructuredUniform),this.id=e,this.seq=[],this.map={}},[{key:"setValue",value:function(e,l,_){for(var S=this.seq,k=0,E=S.length;k!==E;++k){var T=S[k];T.setValue(e,l[T.id],_)}}}])}(),sm=/(\w+)(\])?(\[|\.)?/g;function addUniform(e,l){e.seq.push(l),e.map[l.id]=l}function parseUniform(e,l,_){var S=e.name,k=S.length;for(sm.lastIndex=0;;){var E=sm.exec(S),T=sm.lastIndex,M=E[1],R="]"===E[2],I=E[3];if(R&&(M|=0),void 0===I||"["===I&&T+2===k){addUniform(_,void 0===I?new im(M,e,l):new am(M,e,l));break}var D=_.map[M];void 0===D&&addUniform(_,D=new om(M)),_=D}}var um=function(){return _createClass3(function WebGLUniforms(e,l){_classCallCheck3(this,WebGLUniforms),this.seq=[],this.map={};for(var _=e.getProgramParameter(l,e.ACTIVE_UNIFORMS),S=0;S<_;++S){var k=e.getActiveUniform(l,S);parseUniform(k,e.getUniformLocation(l,k.name),this)}},[{key:"setValue",value:function(e,l,_,S){var k=this.map[l];void 0!==k&&k.setValue(e,_,S)}},{key:"setOptional",value:function(e,l,_){var S=l[_];void 0!==S&&this.setValue(e,_,S)}}],[{key:"upload",value:function(e,l,_,S){for(var k=0,E=l.length;k!==E;++k){var T=l[k],M=_[T.id];!1!==M.needsUpdate&&T.setValue(e,M.value,S)}}},{key:"seqWithValue",value:function(e,l){for(var _=[],S=0,k=e.length;S!==k;++S){var E=e[S];E.id in l&&_.push(E)}return _}}])}();function WebGLShader(e,l,_){var S=e.createShader(l);return e.shaderSource(S,_),e.compileShader(S),S}var lm=0;var cm=new mf;function getShaderErrors(e,l,_){var S=e.getShaderParameter(l,e.COMPILE_STATUS),k=(e.getShaderInfoLog(l)||"").trim();if(S&&""===k)return"";var E=/ERROR: 0:(\d+)/.exec(k);if(E){var T=parseInt(E[1]);return _.toUpperCase()+"\n\n"+k+"\n\n"+function(e,l){for(var _=e.split("\n"),S=[],k=Math.max(l-6,0),E=Math.min(l+6,_.length),T=k;T<E;T++){var M=T+1;S.push("".concat(M===l?">":" "," ").concat(M,": ").concat(_[T]))}return S.join("\n")}(e.getShaderSource(l),T)}return k}function getTexelEncodingFunction(e,l){var _=function(e){xf._getMatrix(cm,xf.workingColorSpace,e);var l="mat3( ".concat(cm.elements.map(function(e){return e.toFixed(4)})," )");switch(xf.getTransfer(e)){case tf:return[l,"LinearTransferOETF"];case rf:return[l,"sRGBTransferOETF"];default:return[l,"LinearTransferOETF"]}}(l);return["vec4 ".concat(e,"( vec4 value ) {"),"\treturn ".concat(_[1],"( vec4( value.rgb * ").concat(_[0],", value.a ) );"),"}"].join("\n")}function getToneMappingFunction(e,l){var _;switch(l){case 1:default:_="Linear";break;case 2:_="Reinhard";break;case 3:_="Cineon";break;case 4:_="ACESFilmic";break;case 6:_="AgX";break;case 7:_="Neutral";break;case 5:_="Custom"}return"vec3 "+e+"( vec3 color ) { return "+_+"ToneMapping( color ); }"}var hm=new pf;function getLuminanceFunction(){xf.getLuminanceCoefficients(hm);var e=hm.x.toFixed(4),l=hm.y.toFixed(4),_=hm.z.toFixed(4);return["float luminance( const in vec3 rgb ) {","\tconst vec3 weights = vec3( ".concat(e,", ").concat(l,", ").concat(_," );"),"\treturn dot( weights, rgb );","}"].join("\n")}function filterEmptyLine(e){return""!==e}function replaceLightNums(e,l){var _=l.numSpotLightShadows+l.numSpotLightMaps-l.numSpotLightShadowsWithMaps;return e.replace(/NUM_DIR_LIGHTS/g,l.numDirLights).replace(/NUM_SPOT_LIGHTS/g,l.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,l.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,_).replace(/NUM_RECT_AREA_LIGHTS/g,l.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,l.numPointLights).replace(/NUM_HEMI_LIGHTS/g,l.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,l.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,l.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,l.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,l.numPointLightShadows)}function replaceClippingPlaneNums(e,l){return e.replace(/NUM_CLIPPING_PLANES/g,l.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,l.numClippingPlanes-l.numClipIntersection)}var dm=/^[ \t]*#include +<([\w\d./]+)>/gm;function resolveIncludes(e){return e.replace(dm,includeReplacer)}var fm=new Map;function includeReplacer(e,l){var _=Mg[l];if(void 0===_){var S=fm.get(l);if(void 0===S)throw new Error("Can not resolve #include <"+l+">");_=Mg[S]}return resolveIncludes(_)}var pm=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function unrollLoops(e){return e.replace(pm,loopReplacer)}function loopReplacer(e,l,_,S){for(var k="",E=parseInt(l);E<parseInt(_);E++)k+=S.replace(/\[\s*i\s*\]/g,"[ "+E+" ]").replace(/UNROLLED_LOOP_INDEX/g,E);return k}function generatePrecision(e){var l="precision ".concat(e.precision," float;\n\tprecision ").concat(e.precision," int;\n\tprecision ").concat(e.precision," sampler2D;\n\tprecision ").concat(e.precision," samplerCube;\n\tprecision ").concat(e.precision," sampler3D;\n\tprecision ").concat(e.precision," sampler2DArray;\n\tprecision ").concat(e.precision," sampler2DShadow;\n\tprecision ").concat(e.precision," samplerCubeShadow;\n\tprecision ").concat(e.precision," sampler2DArrayShadow;\n\tprecision ").concat(e.precision," isampler2D;\n\tprecision ").concat(e.precision," isampler3D;\n\tprecision ").concat(e.precision," isamplerCube;\n\tprecision ").concat(e.precision," isampler2DArray;\n\tprecision ").concat(e.precision," usampler2D;\n\tprecision ").concat(e.precision," usampler3D;\n\tprecision ").concat(e.precision," usamplerCube;\n\tprecision ").concat(e.precision," usampler2DArray;\n\t");return"highp"===e.precision?l+="\n#define HIGH_PRECISION":"mediump"===e.precision?l+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(l+="\n#define LOW_PRECISION"),l}function WebGLProgram(e,l,_,S){var k,E,T=e.getContext(),M=_.defines,R=_.vertexShader,I=_.fragmentShader,D=function(e){var l="SHADOWMAP_TYPE_BASIC";return 1===e.shadowMapType?l="SHADOWMAP_TYPE_PCF":2===e.shadowMapType?l="SHADOWMAP_TYPE_PCF_SOFT":3===e.shadowMapType&&(l="SHADOWMAP_TYPE_VSM"),l}(_),O=function(e){var l="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case Hh:case Vh:l="ENVMAP_TYPE_CUBE";break;case Wh:l="ENVMAP_TYPE_CUBE_UV"}return l}(_),L=function(e){var l="ENVMAP_MODE_REFLECTION";e.envMap&&e.envMapMode===Vh&&(l="ENVMAP_MODE_REFRACTION");return l}(_),U=function(e){var l="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case 0:l="ENVMAP_BLENDING_MULTIPLY";break;case 1:l="ENVMAP_BLENDING_MIX";break;case 2:l="ENVMAP_BLENDING_ADD"}return l}(_),B=function(e){var l=e.envMapCubeUVHeight;if(null===l)return null;var _=Math.log2(l)-2,S=1/l;return{texelWidth:1/(3*Math.max(Math.pow(2,_),112)),texelHeight:S,maxMip:_}}(_),z=function(e){return[e.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",e.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(filterEmptyLine).join("\n")}(_),G=function(e){var l=[];for(var _ in e){var S=e[_];!1!==S&&l.push("#define "+_+" "+S)}return l.join("\n")}(M),j=T.createProgram(),H=_.glslVersion?"#version "+_.glslVersion+"\n":"";_.isRawShaderMaterial?((k=["#define SHADER_TYPE "+_.shaderType,"#define SHADER_NAME "+_.shaderName,G].filter(filterEmptyLine).join("\n")).length>0&&(k+="\n"),(E=["#define SHADER_TYPE "+_.shaderType,"#define SHADER_NAME "+_.shaderName,G].filter(filterEmptyLine).join("\n")).length>0&&(E+="\n")):(k=[generatePrecision(_),"#define SHADER_TYPE "+_.shaderType,"#define SHADER_NAME "+_.shaderName,G,_.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",_.batching?"#define USE_BATCHING":"",_.batchingColor?"#define USE_BATCHING_COLOR":"",_.instancing?"#define USE_INSTANCING":"",_.instancingColor?"#define USE_INSTANCING_COLOR":"",_.instancingMorph?"#define USE_INSTANCING_MORPH":"",_.useFog&&_.fog?"#define USE_FOG":"",_.useFog&&_.fogExp2?"#define FOG_EXP2":"",_.map?"#define USE_MAP":"",_.envMap?"#define USE_ENVMAP":"",_.envMap?"#define "+L:"",_.lightMap?"#define USE_LIGHTMAP":"",_.aoMap?"#define USE_AOMAP":"",_.bumpMap?"#define USE_BUMPMAP":"",_.normalMap?"#define USE_NORMALMAP":"",_.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",_.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",_.displacementMap?"#define USE_DISPLACEMENTMAP":"",_.emissiveMap?"#define USE_EMISSIVEMAP":"",_.anisotropy?"#define USE_ANISOTROPY":"",_.anisotropyMap?"#define USE_ANISOTROPYMAP":"",_.clearcoatMap?"#define USE_CLEARCOATMAP":"",_.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",_.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",_.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",_.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",_.specularMap?"#define USE_SPECULARMAP":"",_.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",_.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",_.roughnessMap?"#define USE_ROUGHNESSMAP":"",_.metalnessMap?"#define USE_METALNESSMAP":"",_.alphaMap?"#define USE_ALPHAMAP":"",_.alphaHash?"#define USE_ALPHAHASH":"",_.transmission?"#define USE_TRANSMISSION":"",_.transmissionMap?"#define USE_TRANSMISSIONMAP":"",_.thicknessMap?"#define USE_THICKNESSMAP":"",_.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",_.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",_.mapUv?"#define MAP_UV "+_.mapUv:"",_.alphaMapUv?"#define ALPHAMAP_UV "+_.alphaMapUv:"",_.lightMapUv?"#define LIGHTMAP_UV "+_.lightMapUv:"",_.aoMapUv?"#define AOMAP_UV "+_.aoMapUv:"",_.emissiveMapUv?"#define EMISSIVEMAP_UV "+_.emissiveMapUv:"",_.bumpMapUv?"#define BUMPMAP_UV "+_.bumpMapUv:"",_.normalMapUv?"#define NORMALMAP_UV "+_.normalMapUv:"",_.displacementMapUv?"#define DISPLACEMENTMAP_UV "+_.displacementMapUv:"",_.metalnessMapUv?"#define METALNESSMAP_UV "+_.metalnessMapUv:"",_.roughnessMapUv?"#define ROUGHNESSMAP_UV "+_.roughnessMapUv:"",_.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+_.anisotropyMapUv:"",_.clearcoatMapUv?"#define CLEARCOATMAP_UV "+_.clearcoatMapUv:"",_.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+_.clearcoatNormalMapUv:"",_.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+_.clearcoatRoughnessMapUv:"",_.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+_.iridescenceMapUv:"",_.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+_.iridescenceThicknessMapUv:"",_.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+_.sheenColorMapUv:"",_.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+_.sheenRoughnessMapUv:"",_.specularMapUv?"#define SPECULARMAP_UV "+_.specularMapUv:"",_.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+_.specularColorMapUv:"",_.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+_.specularIntensityMapUv:"",_.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+_.transmissionMapUv:"",_.thicknessMapUv?"#define THICKNESSMAP_UV "+_.thicknessMapUv:"",_.vertexTangents&&!1===_.flatShading?"#define USE_TANGENT":"",_.vertexColors?"#define USE_COLOR":"",_.vertexAlphas?"#define USE_COLOR_ALPHA":"",_.vertexUv1s?"#define USE_UV1":"",_.vertexUv2s?"#define USE_UV2":"",_.vertexUv3s?"#define USE_UV3":"",_.pointsUvs?"#define USE_POINTS_UV":"",_.flatShading?"#define FLAT_SHADED":"",_.skinning?"#define USE_SKINNING":"",_.morphTargets?"#define USE_MORPHTARGETS":"",_.morphNormals&&!1===_.flatShading?"#define USE_MORPHNORMALS":"",_.morphColors?"#define USE_MORPHCOLORS":"",_.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+_.morphTextureStride:"",_.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+_.morphTargetsCount:"",_.doubleSided?"#define DOUBLE_SIDED":"",_.flipSided?"#define FLIP_SIDED":"",_.shadowMapEnabled?"#define USE_SHADOWMAP":"",_.shadowMapEnabled?"#define "+D:"",_.sizeAttenuation?"#define USE_SIZEATTENUATION":"",_.numLightProbes>0?"#define USE_LIGHT_PROBES":"",_.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",_.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","\tuniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","\tattribute vec2 uv1;","#endif","#ifdef USE_UV2","\tattribute vec2 uv2;","#endif","#ifdef USE_UV3","\tattribute vec2 uv3;","#endif","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(filterEmptyLine).join("\n"),E=[generatePrecision(_),"#define SHADER_TYPE "+_.shaderType,"#define SHADER_NAME "+_.shaderName,G,_.useFog&&_.fog?"#define USE_FOG":"",_.useFog&&_.fogExp2?"#define FOG_EXP2":"",_.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",_.map?"#define USE_MAP":"",_.matcap?"#define USE_MATCAP":"",_.envMap?"#define USE_ENVMAP":"",_.envMap?"#define "+O:"",_.envMap?"#define "+L:"",_.envMap?"#define "+U:"",B?"#define CUBEUV_TEXEL_WIDTH "+B.texelWidth:"",B?"#define CUBEUV_TEXEL_HEIGHT "+B.texelHeight:"",B?"#define CUBEUV_MAX_MIP "+B.maxMip+".0":"",_.lightMap?"#define USE_LIGHTMAP":"",_.aoMap?"#define USE_AOMAP":"",_.bumpMap?"#define USE_BUMPMAP":"",_.normalMap?"#define USE_NORMALMAP":"",_.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",_.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",_.emissiveMap?"#define USE_EMISSIVEMAP":"",_.anisotropy?"#define USE_ANISOTROPY":"",_.anisotropyMap?"#define USE_ANISOTROPYMAP":"",_.clearcoat?"#define USE_CLEARCOAT":"",_.clearcoatMap?"#define USE_CLEARCOATMAP":"",_.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",_.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",_.dispersion?"#define USE_DISPERSION":"",_.iridescence?"#define USE_IRIDESCENCE":"",_.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",_.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",_.specularMap?"#define USE_SPECULARMAP":"",_.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",_.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",_.roughnessMap?"#define USE_ROUGHNESSMAP":"",_.metalnessMap?"#define USE_METALNESSMAP":"",_.alphaMap?"#define USE_ALPHAMAP":"",_.alphaTest?"#define USE_ALPHATEST":"",_.alphaHash?"#define USE_ALPHAHASH":"",_.sheen?"#define USE_SHEEN":"",_.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",_.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",_.transmission?"#define USE_TRANSMISSION":"",_.transmissionMap?"#define USE_TRANSMISSIONMAP":"",_.thicknessMap?"#define USE_THICKNESSMAP":"",_.vertexTangents&&!1===_.flatShading?"#define USE_TANGENT":"",_.vertexColors||_.instancingColor||_.batchingColor?"#define USE_COLOR":"",_.vertexAlphas?"#define USE_COLOR_ALPHA":"",_.vertexUv1s?"#define USE_UV1":"",_.vertexUv2s?"#define USE_UV2":"",_.vertexUv3s?"#define USE_UV3":"",_.pointsUvs?"#define USE_POINTS_UV":"",_.gradientMap?"#define USE_GRADIENTMAP":"",_.flatShading?"#define FLAT_SHADED":"",_.doubleSided?"#define DOUBLE_SIDED":"",_.flipSided?"#define FLIP_SIDED":"",_.shadowMapEnabled?"#define USE_SHADOWMAP":"",_.shadowMapEnabled?"#define "+D:"",_.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",_.numLightProbes>0?"#define USE_LIGHT_PROBES":"",_.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",_.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",_.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",_.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==_.toneMapping?"#define TONE_MAPPING":"",0!==_.toneMapping?Mg.tonemapping_pars_fragment:"",0!==_.toneMapping?getToneMappingFunction("toneMapping",_.toneMapping):"",_.dithering?"#define DITHERING":"",_.opaque?"#define OPAQUE":"",Mg.colorspace_pars_fragment,getTexelEncodingFunction("linearToOutputTexel",_.outputColorSpace),getLuminanceFunction(),_.useDepthPacking?"#define DEPTH_PACKING "+_.depthPacking:"","\n"].filter(filterEmptyLine).join("\n")),R=replaceClippingPlaneNums(R=replaceLightNums(R=resolveIncludes(R),_),_),I=replaceClippingPlaneNums(I=replaceLightNums(I=resolveIncludes(I),_),_),R=unrollLoops(R),I=unrollLoops(I),!0!==_.isRawShaderMaterial&&(H="#version 300 es\n",k=[z,"#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+k,E=["#define varying in",_.glslVersion===af?"":"layout(location = 0) out highp vec4 pc_fragColor;",_.glslVersion===af?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+E);var V,W,q=H+k+R,X=H+E+I,K=WebGLShader(T,T.VERTEX_SHADER,q),Y=WebGLShader(T,T.FRAGMENT_SHADER,X);function onFirstUse(l){if(e.debug.checkShaderErrors){var _=T.getProgramInfoLog(j)||"",S=T.getShaderInfoLog(K)||"",M=T.getShaderInfoLog(Y)||"",R=_.trim(),I=S.trim(),D=M.trim(),O=!0,L=!0;if(!1===T.getProgramParameter(j,T.LINK_STATUS))if(O=!1,"function"==typeof e.debug.onShaderError)e.debug.onShaderError(T,j,K,Y);else getShaderErrors(T,K,"vertex"),getShaderErrors(T,Y,"fragment");else""!==R||""!==I&&""!==D||(L=!1);L&&(l.diagnostics={runnable:O,programLog:R,vertexShader:{log:I,prefix:k},fragmentShader:{log:D,prefix:E}})}T.deleteShader(K),T.deleteShader(Y),V=new um(T,j),W=function(e,l){for(var _={},S=e.getProgramParameter(l,e.ACTIVE_ATTRIBUTES),k=0;k<S;k++){var E=e.getActiveAttrib(l,k),T=E.name,M=1;E.type===e.FLOAT_MAT2&&(M=2),E.type===e.FLOAT_MAT3&&(M=3),E.type===e.FLOAT_MAT4&&(M=4),_[T]={type:E.type,location:e.getAttribLocation(l,T),locationSize:M}}return _}(T,j)}T.attachShader(j,K),T.attachShader(j,Y),void 0!==_.index0AttributeName?T.bindAttribLocation(j,0,_.index0AttributeName):!0===_.morphTargets&&T.bindAttribLocation(j,0,"position"),T.linkProgram(j),this.getUniforms=function(){return void 0===V&&onFirstUse(this),V},this.getAttributes=function(){return void 0===W&&onFirstUse(this),W};var Q=!1===_.rendererExtensionParallelShaderCompile;return this.isReady=function(){return!1===Q&&(Q=T.getProgramParameter(j,37297)),Q},this.destroy=function(){S.releaseStatesOfProgram(this),T.deleteProgram(j),this.program=void 0},this.type=_.shaderType,this.name=_.shaderName,this.id=lm++,this.cacheKey=l,this.usedTimes=1,this.program=j,this.vertexShader=K,this.fragmentShader=Y,this}var vm=0,gm=function(){return _createClass3(function WebGLShaderCache(){_classCallCheck3(this,WebGLShaderCache),this.shaderCache=new Map,this.materialCache=new Map},[{key:"update",value:function(e){var l=e.vertexShader,_=e.fragmentShader,S=this._getShaderStage(l),k=this._getShaderStage(_),E=this._getShaderCacheForMaterial(e);return!1===E.has(S)&&(E.add(S),S.usedTimes++),!1===E.has(k)&&(E.add(k),k.usedTimes++),this}},{key:"remove",value:function(e){var l,_=_createForOfIteratorHelper2(this.materialCache.get(e));try{for(_.s();!(l=_.n()).done;){var S=l.value;S.usedTimes--,0===S.usedTimes&&this.shaderCache.delete(S.code)}}catch(k){_.e(k)}finally{_.f()}return this.materialCache.delete(e),this}},{key:"getVertexShaderID",value:function(e){return this._getShaderStage(e.vertexShader).id}},{key:"getFragmentShaderID",value:function(e){return this._getShaderStage(e.fragmentShader).id}},{key:"dispose",value:function(){this.shaderCache.clear(),this.materialCache.clear()}},{key:"_getShaderCacheForMaterial",value:function(e){var l=this.materialCache,_=l.get(e);return void 0===_&&(_=new Set,l.set(e,_)),_}},{key:"_getShaderStage",value:function(e){var l=this.shaderCache,_=l.get(e);return void 0===_&&(_=new mm(e),l.set(e,_)),_}}])}(),mm=_createClass3(function WebGLShaderStage(e){_classCallCheck3(this,WebGLShaderStage),this.id=vm++,this.code=e,this.usedTimes=0});function WebGLPrograms(e,l,_,S,k,E,T){var M=new yp,R=new gm,I=new Set,D=[],O=k.logarithmicDepthBuffer,L=k.vertexTextures,U=k.precision,B={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function getChannel(e){return I.add(e),0===e?"uv":"uv".concat(e)}return{getParameters:function(E,M,D,z,G){var j=z.fog,H=G.geometry,V=E.isMeshStandardMaterial?z.environment:null,W=(E.isMeshStandardMaterial?_:l).get(E.envMap||V),q=W&&W.mapping===Wh?W.image.height:null,X=B[E.type];null!==E.precision&&(U=k.getMaxPrecision(E.precision),E.precision);var K,Y,Q,J,Z=H.morphAttributes.position||H.morphAttributes.normal||H.morphAttributes.color,$=void 0!==Z?Z.length:0,ee=0;if(void 0!==H.morphAttributes.position&&(ee=1),void 0!==H.morphAttributes.normal&&(ee=2),void 0!==H.morphAttributes.color&&(ee=3),X){var te=Ig[X];K=te.vertexShader,Y=te.fragmentShader}else K=E.vertexShader,Y=E.fragmentShader,R.update(E),Q=R.getVertexShaderID(E),J=R.getFragmentShaderID(E);var re=e.getRenderTarget(),ne=e.state.buffers.depth.getReversed(),ie=!0===G.isInstancedMesh,ae=!0===G.isBatchedMesh,oe=!!E.map,se=!!E.matcap,ue=!!W,le=!!E.aoMap,ce=!!E.lightMap,he=!!E.bumpMap,de=!!E.normalMap,fe=!!E.displacementMap,pe=!!E.emissiveMap,ve=!!E.metalnessMap,ge=!!E.roughnessMap,me=E.anisotropy>0,ye=E.clearcoat>0,_e=E.dispersion>0,be=E.iridescence>0,Se=E.sheen>0,we=E.transmission>0,xe=me&&!!E.anisotropyMap,ke=ye&&!!E.clearcoatMap,Ae=ye&&!!E.clearcoatNormalMap,Ee=ye&&!!E.clearcoatRoughnessMap,Ce=be&&!!E.iridescenceMap,Te=be&&!!E.iridescenceThicknessMap,Me=Se&&!!E.sheenColorMap,Re=Se&&!!E.sheenRoughnessMap,Ie=!!E.specularMap,Pe=!!E.specularColorMap,De=!!E.specularIntensityMap,Oe=we&&!!E.transmissionMap,Le=we&&!!E.thicknessMap,Ue=!!E.gradientMap,Fe=!!E.alphaMap,Ne=E.alphaTest>0,Be=!!E.alphaHash,ze=!!E.extensions,Ge=0;E.toneMapped&&(null!==re&&!0!==re.isXRRenderTarget||(Ge=e.toneMapping));var je={shaderID:X,shaderType:E.type,shaderName:E.name,vertexShader:K,fragmentShader:Y,defines:E.defines,customVertexShaderID:Q,customFragmentShaderID:J,isRawShaderMaterial:!0===E.isRawShaderMaterial,glslVersion:E.glslVersion,precision:U,batching:ae,batchingColor:ae&&null!==G._colorsTexture,instancing:ie,instancingColor:ie&&null!==G.instanceColor,instancingMorph:ie&&null!==G.morphTexture,supportsVertexTextures:L,outputColorSpace:null===re?e.outputColorSpace:!0===re.isXRRenderTarget?re.texture.colorSpace:ef,alphaToCoverage:!!E.alphaToCoverage,map:oe,matcap:se,envMap:ue,envMapMode:ue&&W.mapping,envMapCubeUVHeight:q,aoMap:le,lightMap:ce,bumpMap:he,normalMap:de,displacementMap:L&&fe,emissiveMap:pe,normalMapObjectSpace:de&&1===E.normalMapType,normalMapTangentSpace:de&&0===E.normalMapType,metalnessMap:ve,roughnessMap:ge,anisotropy:me,anisotropyMap:xe,clearcoat:ye,clearcoatMap:ke,clearcoatNormalMap:Ae,clearcoatRoughnessMap:Ee,dispersion:_e,iridescence:be,iridescenceMap:Ce,iridescenceThicknessMap:Te,sheen:Se,sheenColorMap:Me,sheenRoughnessMap:Re,specularMap:Ie,specularColorMap:Pe,specularIntensityMap:De,transmission:we,transmissionMap:Oe,thicknessMap:Le,gradientMap:Ue,opaque:!1===E.transparent&&1===E.blending&&!1===E.alphaToCoverage,alphaMap:Fe,alphaTest:Ne,alphaHash:Be,combine:E.combine,mapUv:oe&&getChannel(E.map.channel),aoMapUv:le&&getChannel(E.aoMap.channel),lightMapUv:ce&&getChannel(E.lightMap.channel),bumpMapUv:he&&getChannel(E.bumpMap.channel),normalMapUv:de&&getChannel(E.normalMap.channel),displacementMapUv:fe&&getChannel(E.displacementMap.channel),emissiveMapUv:pe&&getChannel(E.emissiveMap.channel),metalnessMapUv:ve&&getChannel(E.metalnessMap.channel),roughnessMapUv:ge&&getChannel(E.roughnessMap.channel),anisotropyMapUv:xe&&getChannel(E.anisotropyMap.channel),clearcoatMapUv:ke&&getChannel(E.clearcoatMap.channel),clearcoatNormalMapUv:Ae&&getChannel(E.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Ee&&getChannel(E.clearcoatRoughnessMap.channel),iridescenceMapUv:Ce&&getChannel(E.iridescenceMap.channel),iridescenceThicknessMapUv:Te&&getChannel(E.iridescenceThicknessMap.channel),sheenColorMapUv:Me&&getChannel(E.sheenColorMap.channel),sheenRoughnessMapUv:Re&&getChannel(E.sheenRoughnessMap.channel),specularMapUv:Ie&&getChannel(E.specularMap.channel),specularColorMapUv:Pe&&getChannel(E.specularColorMap.channel),specularIntensityMapUv:De&&getChannel(E.specularIntensityMap.channel),transmissionMapUv:Oe&&getChannel(E.transmissionMap.channel),thicknessMapUv:Le&&getChannel(E.thicknessMap.channel),alphaMapUv:Fe&&getChannel(E.alphaMap.channel),vertexTangents:!!H.attributes.tangent&&(de||me),vertexColors:E.vertexColors,vertexAlphas:!0===E.vertexColors&&!!H.attributes.color&&4===H.attributes.color.itemSize,pointsUvs:!0===G.isPoints&&!!H.attributes.uv&&(oe||Fe),fog:!!j,useFog:!0===E.fog,fogExp2:!!j&&j.isFogExp2,flatShading:!0===E.flatShading&&!1===E.wireframe,sizeAttenuation:!0===E.sizeAttenuation,logarithmicDepthBuffer:O,reversedDepthBuffer:ne,skinning:!0===G.isSkinnedMesh,morphTargets:void 0!==H.morphAttributes.position,morphNormals:void 0!==H.morphAttributes.normal,morphColors:void 0!==H.morphAttributes.color,morphTargetsCount:$,morphTextureStride:ee,numDirLights:M.directional.length,numPointLights:M.point.length,numSpotLights:M.spot.length,numSpotLightMaps:M.spotLightMap.length,numRectAreaLights:M.rectArea.length,numHemiLights:M.hemi.length,numDirLightShadows:M.directionalShadowMap.length,numPointLightShadows:M.pointShadowMap.length,numSpotLightShadows:M.spotShadowMap.length,numSpotLightShadowsWithMaps:M.numSpotLightShadowsWithMaps,numLightProbes:M.numLightProbes,numClippingPlanes:T.numPlanes,numClipIntersection:T.numIntersection,dithering:E.dithering,shadowMapEnabled:e.shadowMap.enabled&&D.length>0,shadowMapType:e.shadowMap.type,toneMapping:Ge,decodeVideoTexture:oe&&!0===E.map.isVideoTexture&&xf.getTransfer(E.map.colorSpace)===rf,decodeVideoTextureEmissive:pe&&!0===E.emissiveMap.isVideoTexture&&xf.getTransfer(E.emissiveMap.colorSpace)===rf,premultipliedAlpha:E.premultipliedAlpha,doubleSided:E.side===Gh,flipSided:1===E.side,useDepthPacking:E.depthPacking>=0,depthPacking:E.depthPacking||0,index0AttributeName:E.index0AttributeName,extensionClipCullDistance:ze&&!0===E.extensions.clipCullDistance&&S.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(ze&&!0===E.extensions.multiDraw||ae)&&S.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:S.has("KHR_parallel_shader_compile"),customProgramCacheKey:E.customProgramCacheKey()};return je.vertexUv1s=I.has(1),je.vertexUv2s=I.has(2),je.vertexUv3s=I.has(3),I.clear(),je},getProgramCacheKey:function(l){var _=[];if(l.shaderID?_.push(l.shaderID):(_.push(l.customVertexShaderID),_.push(l.customFragmentShaderID)),void 0!==l.defines)for(var S in l.defines)_.push(S),_.push(l.defines[S]);return!1===l.isRawShaderMaterial&&(!function(e,l){e.push(l.precision),e.push(l.outputColorSpace),e.push(l.envMapMode),e.push(l.envMapCubeUVHeight),e.push(l.mapUv),e.push(l.alphaMapUv),e.push(l.lightMapUv),e.push(l.aoMapUv),e.push(l.bumpMapUv),e.push(l.normalMapUv),e.push(l.displacementMapUv),e.push(l.emissiveMapUv),e.push(l.metalnessMapUv),e.push(l.roughnessMapUv),e.push(l.anisotropyMapUv),e.push(l.clearcoatMapUv),e.push(l.clearcoatNormalMapUv),e.push(l.clearcoatRoughnessMapUv),e.push(l.iridescenceMapUv),e.push(l.iridescenceThicknessMapUv),e.push(l.sheenColorMapUv),e.push(l.sheenRoughnessMapUv),e.push(l.specularMapUv),e.push(l.specularColorMapUv),e.push(l.specularIntensityMapUv),e.push(l.transmissionMapUv),e.push(l.thicknessMapUv),e.push(l.combine),e.push(l.fogExp2),e.push(l.sizeAttenuation),e.push(l.morphTargetsCount),e.push(l.morphAttributeCount),e.push(l.numDirLights),e.push(l.numPointLights),e.push(l.numSpotLights),e.push(l.numSpotLightMaps),e.push(l.numHemiLights),e.push(l.numRectAreaLights),e.push(l.numDirLightShadows),e.push(l.numPointLightShadows),e.push(l.numSpotLightShadows),e.push(l.numSpotLightShadowsWithMaps),e.push(l.numLightProbes),e.push(l.shadowMapType),e.push(l.toneMapping),e.push(l.numClippingPlanes),e.push(l.numClipIntersection),e.push(l.depthPacking)}(_,l),function(e,l){M.disableAll(),l.supportsVertexTextures&&M.enable(0);l.instancing&&M.enable(1);l.instancingColor&&M.enable(2);l.instancingMorph&&M.enable(3);l.matcap&&M.enable(4);l.envMap&&M.enable(5);l.normalMapObjectSpace&&M.enable(6);l.normalMapTangentSpace&&M.enable(7);l.clearcoat&&M.enable(8);l.iridescence&&M.enable(9);l.alphaTest&&M.enable(10);l.vertexColors&&M.enable(11);l.vertexAlphas&&M.enable(12);l.vertexUv1s&&M.enable(13);l.vertexUv2s&&M.enable(14);l.vertexUv3s&&M.enable(15);l.vertexTangents&&M.enable(16);l.anisotropy&&M.enable(17);l.alphaHash&&M.enable(18);l.batching&&M.enable(19);l.dispersion&&M.enable(20);l.batchingColor&&M.enable(21);l.gradientMap&&M.enable(22);e.push(M.mask),M.disableAll(),l.fog&&M.enable(0);l.useFog&&M.enable(1);l.flatShading&&M.enable(2);l.logarithmicDepthBuffer&&M.enable(3);l.reversedDepthBuffer&&M.enable(4);l.skinning&&M.enable(5);l.morphTargets&&M.enable(6);l.morphNormals&&M.enable(7);l.morphColors&&M.enable(8);l.premultipliedAlpha&&M.enable(9);l.shadowMapEnabled&&M.enable(10);l.doubleSided&&M.enable(11);l.flipSided&&M.enable(12);l.useDepthPacking&&M.enable(13);l.dithering&&M.enable(14);l.transmission&&M.enable(15);l.sheen&&M.enable(16);l.opaque&&M.enable(17);l.pointsUvs&&M.enable(18);l.decodeVideoTexture&&M.enable(19);l.decodeVideoTextureEmissive&&M.enable(20);l.alphaToCoverage&&M.enable(21);e.push(M.mask)}(_,l),_.push(e.outputColorSpace)),_.push(l.customProgramCacheKey),_.join()},getUniforms:function(e){var l,_=B[e.type];if(_){var S=Ig[_];l=Iv.clone(S.uniforms)}else l=e.uniforms;return l},acquireProgram:function(l,_){for(var S,k=0,T=D.length;k<T;k++){var M=D[k];if(M.cacheKey===_){++(S=M).usedTimes;break}}return void 0===S&&(S=new WebGLProgram(e,_,l,E),D.push(S)),S},releaseProgram:function(e){if(0===--e.usedTimes){var l=D.indexOf(e);D[l]=D[D.length-1],D.pop(),e.destroy()}},releaseShaderCache:function(e){R.remove(e)},programs:D,dispose:function(){R.dispose()}}}function WebGLProperties(){var e=new WeakMap;return{has:function(l){return e.has(l)},get:function(l){var _=e.get(l);return void 0===_&&(_={},e.set(l,_)),_},remove:function(l){e.delete(l)},update:function(l,_,S){e.get(l)[_]=S},dispose:function(){e=new WeakMap}}}function painterSortStable(e,l){return e.groupOrder!==l.groupOrder?e.groupOrder-l.groupOrder:e.renderOrder!==l.renderOrder?e.renderOrder-l.renderOrder:e.material.id!==l.material.id?e.material.id-l.material.id:e.z!==l.z?e.z-l.z:e.id-l.id}function reversePainterSortStable(e,l){return e.groupOrder!==l.groupOrder?e.groupOrder-l.groupOrder:e.renderOrder!==l.renderOrder?e.renderOrder-l.renderOrder:e.z!==l.z?l.z-e.z:e.id-l.id}function WebGLRenderList(){var e=[],l=0,_=[],S=[],k=[];function getNextRenderItem(_,S,k,E,T,M){var R=e[l];return void 0===R?(R={id:_.id,object:_,geometry:S,material:k,groupOrder:E,renderOrder:_.renderOrder,z:T,group:M},e[l]=R):(R.id=_.id,R.object=_,R.geometry=S,R.material=k,R.groupOrder=E,R.renderOrder=_.renderOrder,R.z=T,R.group=M),l++,R}return{opaque:_,transmissive:S,transparent:k,init:function(){l=0,_.length=0,S.length=0,k.length=0},push:function(e,l,E,T,M,R){var I=getNextRenderItem(e,l,E,T,M,R);E.transmission>0?S.push(I):!0===E.transparent?k.push(I):_.push(I)},unshift:function(e,l,E,T,M,R){var I=getNextRenderItem(e,l,E,T,M,R);E.transmission>0?S.unshift(I):!0===E.transparent?k.unshift(I):_.unshift(I)},finish:function(){for(var _=l,S=e.length;_<S;_++){var k=e[_];if(null===k.id)break;k.id=null,k.object=null,k.geometry=null,k.material=null,k.group=null}},sort:function(e,l){_.length>1&&_.sort(e||painterSortStable),S.length>1&&S.sort(l||reversePainterSortStable),k.length>1&&k.sort(l||reversePainterSortStable)}}}function WebGLRenderLists(){var e=new WeakMap;return{get:function(l,_){var S,k=e.get(l);return void 0===k?(S=new WebGLRenderList,e.set(l,[S])):_>=k.length?(S=new WebGLRenderList,k.push(S)):S=k[_],S},dispose:function(){e=new WeakMap}}}function UniformsCache(){var e={};return{get:function(l){if(void 0!==e[l.id])return e[l.id];var _;switch(l.type){case"DirectionalLight":_={direction:new pf,color:new Zp};break;case"SpotLight":_={position:new pf,direction:new pf,color:new Zp,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":_={position:new pf,color:new Zp,distance:0,decay:0};break;case"HemisphereLight":_={direction:new pf,skyColor:new Zp,groundColor:new Zp};break;case"RectAreaLight":_={color:new Zp,position:new pf,halfWidth:new pf,halfHeight:new pf}}return e[l.id]=_,_}}}var ym=0;function shadowCastingAndTexturingLightsFirst(e,l){return(l.castShadow?2:0)-(e.castShadow?2:0)+(l.map?1:0)-(e.map?1:0)}function WebGLLights(e){for(var l,_=new UniformsCache,S=(l={},{get:function(e){if(void 0!==l[e.id])return l[e.id];var _;switch(e.type){case"DirectionalLight":case"SpotLight":_={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new df};break;case"PointLight":_={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new df,shadowCameraNear:1,shadowCameraFar:1e3}}return l[e.id]=_,_}}),k={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0},E=0;E<9;E++)k.probe.push(new pf);var T=new pf,M=new sp,R=new sp;return{setup:function(l){for(var E=0,T=0,M=0,R=0;R<9;R++)k.probe[R].set(0,0,0);var I=0,D=0,O=0,L=0,U=0,B=0,z=0,G=0,j=0,H=0,V=0;l.sort(shadowCastingAndTexturingLightsFirst);for(var W=0,q=l.length;W<q;W++){var X=l[W],K=X.color,Y=X.intensity,Q=X.distance,J=X.shadow&&X.shadow.map?X.shadow.map.texture:null;if(X.isAmbientLight)E+=K.r*Y,T+=K.g*Y,M+=K.b*Y;else if(X.isLightProbe){for(var Z=0;Z<9;Z++)k.probe[Z].addScaledVector(X.sh.coefficients[Z],Y);V++}else if(X.isDirectionalLight){var $=_.get(X);if($.color.copy(X.color).multiplyScalar(X.intensity),X.castShadow){var ee=X.shadow,te=S.get(X);te.shadowIntensity=ee.intensity,te.shadowBias=ee.bias,te.shadowNormalBias=ee.normalBias,te.shadowRadius=ee.radius,te.shadowMapSize=ee.mapSize,k.directionalShadow[I]=te,k.directionalShadowMap[I]=J,k.directionalShadowMatrix[I]=X.shadow.matrix,B++}k.directional[I]=$,I++}else if(X.isSpotLight){var re=_.get(X);re.position.setFromMatrixPosition(X.matrixWorld),re.color.copy(K).multiplyScalar(Y),re.distance=Q,re.coneCos=Math.cos(X.angle),re.penumbraCos=Math.cos(X.angle*(1-X.penumbra)),re.decay=X.decay,k.spot[O]=re;var ne=X.shadow;if(X.map&&(k.spotLightMap[j]=X.map,j++,ne.updateMatrices(X),X.castShadow&&H++),k.spotLightMatrix[O]=ne.matrix,X.castShadow){var ie=S.get(X);ie.shadowIntensity=ne.intensity,ie.shadowBias=ne.bias,ie.shadowNormalBias=ne.normalBias,ie.shadowRadius=ne.radius,ie.shadowMapSize=ne.mapSize,k.spotShadow[O]=ie,k.spotShadowMap[O]=J,G++}O++}else if(X.isRectAreaLight){var ae=_.get(X);ae.color.copy(K).multiplyScalar(Y),ae.halfWidth.set(.5*X.width,0,0),ae.halfHeight.set(0,.5*X.height,0),k.rectArea[L]=ae,L++}else if(X.isPointLight){var oe=_.get(X);if(oe.color.copy(X.color).multiplyScalar(X.intensity),oe.distance=X.distance,oe.decay=X.decay,X.castShadow){var se=X.shadow,ue=S.get(X);ue.shadowIntensity=se.intensity,ue.shadowBias=se.bias,ue.shadowNormalBias=se.normalBias,ue.shadowRadius=se.radius,ue.shadowMapSize=se.mapSize,ue.shadowCameraNear=se.camera.near,ue.shadowCameraFar=se.camera.far,k.pointShadow[D]=ue,k.pointShadowMap[D]=J,k.pointShadowMatrix[D]=X.shadow.matrix,z++}k.point[D]=oe,D++}else if(X.isHemisphereLight){var le=_.get(X);le.skyColor.copy(X.color).multiplyScalar(Y),le.groundColor.copy(X.groundColor).multiplyScalar(Y),k.hemi[U]=le,U++}}L>0&&(!0===e.has("OES_texture_float_linear")?(k.rectAreaLTC1=Rg.LTC_FLOAT_1,k.rectAreaLTC2=Rg.LTC_FLOAT_2):(k.rectAreaLTC1=Rg.LTC_HALF_1,k.rectAreaLTC2=Rg.LTC_HALF_2)),k.ambient[0]=E,k.ambient[1]=T,k.ambient[2]=M;var ce=k.hash;ce.directionalLength===I&&ce.pointLength===D&&ce.spotLength===O&&ce.rectAreaLength===L&&ce.hemiLength===U&&ce.numDirectionalShadows===B&&ce.numPointShadows===z&&ce.numSpotShadows===G&&ce.numSpotMaps===j&&ce.numLightProbes===V||(k.directional.length=I,k.spot.length=O,k.rectArea.length=L,k.point.length=D,k.hemi.length=U,k.directionalShadow.length=B,k.directionalShadowMap.length=B,k.pointShadow.length=z,k.pointShadowMap.length=z,k.spotShadow.length=G,k.spotShadowMap.length=G,k.directionalShadowMatrix.length=B,k.pointShadowMatrix.length=z,k.spotLightMatrix.length=G+j-H,k.spotLightMap.length=j,k.numSpotLightShadowsWithMaps=H,k.numLightProbes=V,ce.directionalLength=I,ce.pointLength=D,ce.spotLength=O,ce.rectAreaLength=L,ce.hemiLength=U,ce.numDirectionalShadows=B,ce.numPointShadows=z,ce.numSpotShadows=G,ce.numSpotMaps=j,ce.numLightProbes=V,k.version=ym++)},setupView:function(e,l){for(var _=0,S=0,E=0,I=0,D=0,O=l.matrixWorldInverse,L=0,U=e.length;L<U;L++){var B=e[L];if(B.isDirectionalLight){var z=k.directional[_];z.direction.setFromMatrixPosition(B.matrixWorld),T.setFromMatrixPosition(B.target.matrixWorld),z.direction.sub(T),z.direction.transformDirection(O),_++}else if(B.isSpotLight){var G=k.spot[E];G.position.setFromMatrixPosition(B.matrixWorld),G.position.applyMatrix4(O),G.direction.setFromMatrixPosition(B.matrixWorld),T.setFromMatrixPosition(B.target.matrixWorld),G.direction.sub(T),G.direction.transformDirection(O),E++}else if(B.isRectAreaLight){var j=k.rectArea[I];j.position.setFromMatrixPosition(B.matrixWorld),j.position.applyMatrix4(O),R.identity(),M.copy(B.matrixWorld),M.premultiply(O),R.extractRotation(M),j.halfWidth.set(.5*B.width,0,0),j.halfHeight.set(0,.5*B.height,0),j.halfWidth.applyMatrix4(R),j.halfHeight.applyMatrix4(R),I++}else if(B.isPointLight){var H=k.point[S];H.position.setFromMatrixPosition(B.matrixWorld),H.position.applyMatrix4(O),S++}else if(B.isHemisphereLight){var V=k.hemi[D];V.direction.setFromMatrixPosition(B.matrixWorld),V.direction.transformDirection(O),D++}}},state:k}}function WebGLRenderState(e){var l=new WebGLLights(e),_=[],S=[];var k={lightsArray:_,shadowsArray:S,camera:null,lights:l,transmissionRenderTarget:{}};return{init:function(e){k.camera=e,_.length=0,S.length=0},state:k,setupLights:function(){l.setup(_)},setupLightsView:function(e){l.setupView(_,e)},pushLight:function(e){_.push(e)},pushShadow:function(e){S.push(e)}}}function WebGLRenderStates(e){var l=new WeakMap;return{get:function(_){var S,k=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,E=l.get(_);return void 0===E?(S=new WebGLRenderState(e),l.set(_,[S])):k>=E.length?(S=new WebGLRenderState(e),E.push(S)):S=E[k],S},dispose:function(){l=new WeakMap}}}function WebGLShadowMap(e,l,_){var S=new tg,k=new df,E=new df,T=new Rf,M=new wg({depthPacking:3201}),R=new xg,I={},D=_.maxTextureSize,O=_defineProperty3(_defineProperty3(_defineProperty3({},0,1),1,0),Gh,Gh),L=new Pv({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new df},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),U=L.clone();U.defines.HORIZONTAL_PASS=1;var B=new mv;B.setAttribute("position",new ov(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var z=new Mv(B,L),G=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1;var j=this.type;function VSMPass(_,S){var E=l.update(z);L.defines.VSM_SAMPLES!==_.blurSamples&&(L.defines.VSM_SAMPLES=_.blurSamples,U.defines.VSM_SAMPLES=_.blurSamples,L.needsUpdate=!0,U.needsUpdate=!0),null===_.mapPass&&(_.mapPass=new Pf(k.x,k.y)),L.uniforms.shadow_pass.value=_.map.texture,L.uniforms.resolution.value=_.mapSize,L.uniforms.radius.value=_.radius,e.setRenderTarget(_.mapPass),e.clear(),e.renderBufferDirect(S,null,E,L,z,null),U.uniforms.shadow_pass.value=_.mapPass.texture,U.uniforms.resolution.value=_.mapSize,U.uniforms.radius.value=_.radius,e.setRenderTarget(_.map),e.clear(),e.renderBufferDirect(S,null,E,U,z,null)}function getDepthMaterial(l,_,S,k){var E=null,T=!0===S.isPointLight?l.customDistanceMaterial:l.customDepthMaterial;if(void 0!==T)E=T;else if(E=!0===S.isPointLight?R:M,e.localClippingEnabled&&!0===_.clipShadows&&Array.isArray(_.clippingPlanes)&&0!==_.clippingPlanes.length||_.displacementMap&&0!==_.displacementScale||_.alphaMap&&_.alphaTest>0||_.map&&_.alphaTest>0||!0===_.alphaToCoverage){var D=E.uuid,L=_.uuid,U=I[D];void 0===U&&(U={},I[D]=U);var B=U[L];void 0===B&&(B=E.clone(),U[L]=B,_.addEventListener("dispose",onMaterialDispose)),E=B}(E.visible=_.visible,E.wireframe=_.wireframe,E.side=3===k?null!==_.shadowSide?_.shadowSide:_.side:null!==_.shadowSide?_.shadowSide:O[_.side],E.alphaMap=_.alphaMap,E.alphaTest=!0===_.alphaToCoverage?.5:_.alphaTest,E.map=_.map,E.clipShadows=_.clipShadows,E.clippingPlanes=_.clippingPlanes,E.clipIntersection=_.clipIntersection,E.displacementMap=_.displacementMap,E.displacementScale=_.displacementScale,E.displacementBias=_.displacementBias,E.wireframeLinewidth=_.wireframeLinewidth,E.linewidth=_.linewidth,!0===S.isPointLight&&!0===E.isMeshDistanceMaterial)&&(e.properties.get(E).light=S);return E}function renderObject(_,k,E,T,M){if(!1!==_.visible){if(_.layers.test(k.layers)&&(_.isMesh||_.isLine||_.isPoints)&&(_.castShadow||_.receiveShadow&&3===M)&&(!_.frustumCulled||S.intersectsObject(_))){_.modelViewMatrix.multiplyMatrices(E.matrixWorldInverse,_.matrixWorld);var R=l.update(_),I=_.material;if(Array.isArray(I))for(var D=R.groups,O=0,L=D.length;O<L;O++){var U=D[O],B=I[U.materialIndex];if(B&&B.visible){var z=getDepthMaterial(_,B,T,M);_.onBeforeShadow(e,_,k,E,R,z,U),e.renderBufferDirect(E,null,R,z,_,U),_.onAfterShadow(e,_,k,E,R,z,U)}}else if(I.visible){var G=getDepthMaterial(_,I,T,M);_.onBeforeShadow(e,_,k,E,R,G,null),e.renderBufferDirect(E,null,R,G,_,null),_.onAfterShadow(e,_,k,E,R,G,null)}}for(var j=_.children,H=0,V=j.length;H<V;H++)renderObject(j[H],k,E,T,M)}}function onMaterialDispose(e){var l=e.target;for(var _ in l.removeEventListener("dispose",onMaterialDispose),I){var S=I[_],k=e.target.uuid;if(k in S)S[k].dispose(),delete S[k]}}this.render=function(l,_,M){if(!1!==G.enabled&&(!1!==G.autoUpdate||!1!==G.needsUpdate)&&0!==l.length){var R=e.getRenderTarget(),I=e.getActiveCubeFace(),O=e.getActiveMipmapLevel(),L=e.state;L.setBlending(0),!0===L.buffers.depth.getReversed()?L.buffers.color.setClear(0,0,0,0):L.buffers.color.setClear(1,1,1,1),L.buffers.depth.setTest(!0),L.setScissorTest(!1);for(var U=3!==j&&3===this.type,B=3===j&&3!==this.type,z=0,H=l.length;z<H;z++){var V=l[z],W=V.shadow;if(void 0!==W&&(!1!==W.autoUpdate||!1!==W.needsUpdate)){k.copy(W.mapSize);var q=W.getFrameExtents();if(k.multiply(q),E.copy(W.mapSize),(k.x>D||k.y>D)&&(k.x>D&&(E.x=Math.floor(D/q.x),k.x=E.x*q.x,W.mapSize.x=E.x),k.y>D&&(E.y=Math.floor(D/q.y),k.y=E.y*q.y,W.mapSize.y=E.y)),null===W.map||!0===U||!0===B){var X=3!==this.type?{minFilter:Yh,magFilter:Yh}:{};null!==W.map&&W.map.dispose(),W.map=new Pf(k.x,k.y,X),W.map.texture.name=V.name+".shadowMap",W.camera.updateProjectionMatrix()}e.setRenderTarget(W.map),e.clear();for(var K=W.getViewportCount(),Y=0;Y<K;Y++){var Q=W.getViewport(Y);T.set(E.x*Q.x,E.y*Q.y,E.x*Q.z,E.y*Q.w),L.viewport(T),W.updateMatrices(V,Y),S=W.getFrustum(),renderObject(_,M,W.camera,V,this.type)}!0!==W.isPointLightShadow&&3===this.type&&VSMPass(W,M),W.needsUpdate=!1}}j=this.type,G.needsUpdate=!1,e.setRenderTarget(R,I,O)}}}var _m=_defineProperty3(_defineProperty3(_defineProperty3(_defineProperty3(_defineProperty3(_defineProperty3(_defineProperty3(_defineProperty3({},0,1),2,6),4,7),3,5),1,0),6,2),7,4),5,3);function WebGLState(e,l){var _;var S=new function(){var l=!1,_=new Rf,S=null,k=new Rf(0,0,0,0);return{setMask:function(_){S===_||l||(e.colorMask(_,_,_,_),S=_)},setLocked:function(e){l=e},setClear:function(l,S,E,T,M){!0===M&&(l*=T,S*=T,E*=T),_.set(l,S,E,T),!1===k.equals(_)&&(e.clearColor(l,S,E,T),k.copy(_))},reset:function(){l=!1,S=null,k.set(-1,0,0,0)}}},k=new function(){var _=!1,S=!1,k=null,E=null,T=null;return{setReversed:function(e){if(S!==e){var _=l.get("EXT_clip_control");e?_.clipControlEXT(_.LOWER_LEFT_EXT,_.ZERO_TO_ONE_EXT):_.clipControlEXT(_.LOWER_LEFT_EXT,_.NEGATIVE_ONE_TO_ONE_EXT),S=e;var k=T;T=null,this.setClear(k)}},getReversed:function(){return S},setTest:function(l){l?enable(e.DEPTH_TEST):disable(e.DEPTH_TEST)},setMask:function(l){k===l||_||(e.depthMask(l),k=l)},setFunc:function(l){if(S&&(l=_m[l]),E!==l){switch(l){case 0:e.depthFunc(e.NEVER);break;case 1:e.depthFunc(e.ALWAYS);break;case 2:e.depthFunc(e.LESS);break;case 3:default:e.depthFunc(e.LEQUAL);break;case 4:e.depthFunc(e.EQUAL);break;case 5:e.depthFunc(e.GEQUAL);break;case 6:e.depthFunc(e.GREATER);break;case 7:e.depthFunc(e.NOTEQUAL)}E=l}},setLocked:function(e){_=e},setClear:function(l){T!==l&&(S&&(l=1-l),e.clearDepth(l),T=l)},reset:function(){_=!1,k=null,E=null,T=null,S=!1}}},E=new function(){var l=!1,_=null,S=null,k=null,E=null,T=null,M=null,R=null,I=null;return{setTest:function(_){l||(_?enable(e.STENCIL_TEST):disable(e.STENCIL_TEST))},setMask:function(S){_===S||l||(e.stencilMask(S),_=S)},setFunc:function(l,_,T){S===l&&k===_&&E===T||(e.stencilFunc(l,_,T),S=l,k=_,E=T)},setOp:function(l,_,S){T===l&&M===_&&R===S||(e.stencilOp(l,_,S),T=l,M=_,R=S)},setLocked:function(e){l=e},setClear:function(l){I!==l&&(e.clearStencil(l),I=l)},reset:function(){l=!1,_=null,S=null,k=null,E=null,T=null,M=null,R=null,I=null}}},T=new WeakMap,M=new WeakMap,R={},I={},D=new WeakMap,O=[],L=null,U=!1,B=null,z=null,G=null,j=null,H=null,V=null,W=null,q=new Zp(0,0,0),X=0,K=!1,Y=null,Q=null,J=null,Z=null,$=null,ee=e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS),te=!1,re=0,ne=e.getParameter(e.VERSION);-1!==ne.indexOf("WebGL")?(re=parseFloat(/^WebGL (\d)/.exec(ne)[1]),te=re>=1):-1!==ne.indexOf("OpenGL ES")&&(re=parseFloat(/^OpenGL ES (\d)/.exec(ne)[1]),te=re>=2);var ie=null,ae={},oe=e.getParameter(e.SCISSOR_BOX),se=e.getParameter(e.VIEWPORT),ue=(new Rf).fromArray(oe),le=(new Rf).fromArray(se);function createTexture(l,_,S,k){var E=new Uint8Array(4),T=e.createTexture();e.bindTexture(l,T),e.texParameteri(l,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(l,e.TEXTURE_MAG_FILTER,e.NEAREST);for(var M=0;M<S;M++)l===e.TEXTURE_3D||l===e.TEXTURE_2D_ARRAY?e.texImage3D(_,0,e.RGBA,1,1,k,0,e.RGBA,e.UNSIGNED_BYTE,E):e.texImage2D(_+M,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,E);return T}var ce={};function enable(l){!0!==R[l]&&(e.enable(l),R[l]=!0)}function disable(l){!1!==R[l]&&(e.disable(l),R[l]=!1)}ce[e.TEXTURE_2D]=createTexture(e.TEXTURE_2D,e.TEXTURE_2D,1),ce[e.TEXTURE_CUBE_MAP]=createTexture(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6),ce[e.TEXTURE_2D_ARRAY]=createTexture(e.TEXTURE_2D_ARRAY,e.TEXTURE_2D_ARRAY,1,1),ce[e.TEXTURE_3D]=createTexture(e.TEXTURE_3D,e.TEXTURE_3D,1,1),S.setClear(0,0,0,1),k.setClear(1),E.setClear(0),enable(e.DEPTH_TEST),k.setFunc(3),setFlipSided(!1),setCullFace(1),enable(e.CULL_FACE),setBlending(0);var he=_defineProperty3(_defineProperty3(_defineProperty3({},jh,e.FUNC_ADD),101,e.FUNC_SUBTRACT),102,e.FUNC_REVERSE_SUBTRACT);he[103]=e.MIN,he[104]=e.MAX;var de=(_defineProperty3(_defineProperty3(_defineProperty3(_defineProperty3(_defineProperty3(_defineProperty3(_defineProperty3(_defineProperty3(_defineProperty3(_defineProperty3(_={},200,e.ZERO),201,e.ONE),202,e.SRC_COLOR),204,e.SRC_ALPHA),210,e.SRC_ALPHA_SATURATE),208,e.DST_COLOR),206,e.DST_ALPHA),203,e.ONE_MINUS_SRC_COLOR),205,e.ONE_MINUS_SRC_ALPHA),209,e.ONE_MINUS_DST_COLOR),_defineProperty3(_defineProperty3(_defineProperty3(_defineProperty3(_defineProperty3(_,207,e.ONE_MINUS_DST_ALPHA),211,e.CONSTANT_COLOR),212,e.ONE_MINUS_CONSTANT_COLOR),213,e.CONSTANT_ALPHA),214,e.ONE_MINUS_CONSTANT_ALPHA));function setBlending(l,_,S,k,E,T,M,R,I,D){if(0!==l){if(!1===U&&(enable(e.BLEND),U=!0),5===l)E=E||_,T=T||S,M=M||k,_===z&&E===H||(e.blendEquationSeparate(he[_],he[E]),z=_,H=E),S===G&&k===j&&T===V&&M===W||(e.blendFuncSeparate(de[S],de[k],de[T],de[M]),G=S,j=k,V=T,W=M),!1!==R.equals(q)&&I===X||(e.blendColor(R.r,R.g,R.b,I),q.copy(R),X=I),B=l,K=!1;else if(l!==B||D!==K){if(z===jh&&H===jh||(e.blendEquation(e.FUNC_ADD),z=jh,H=jh),D)switch(l){case 1:e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case 2:e.blendFunc(e.ONE,e.ONE);break;case 3:e.blendFuncSeparate(e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ZERO,e.ONE);break;case 4:e.blendFuncSeparate(e.DST_COLOR,e.ONE_MINUS_SRC_ALPHA,e.ZERO,e.ONE)}else switch(l){case 1:e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case 2:e.blendFuncSeparate(e.SRC_ALPHA,e.ONE,e.ONE,e.ONE)}G=null,j=null,V=null,W=null,q.set(0,0,0),X=0,B=l,K=D}}else!0===U&&(disable(e.BLEND),U=!1)}function setFlipSided(l){Y!==l&&(l?e.frontFace(e.CW):e.frontFace(e.CCW),Y=l)}function setCullFace(l){0!==l?(enable(e.CULL_FACE),l!==Q&&(1===l?e.cullFace(e.BACK):2===l?e.cullFace(e.FRONT):e.cullFace(e.FRONT_AND_BACK))):disable(e.CULL_FACE),Q=l}function setPolygonOffset(l,_,S){l?(enable(e.POLYGON_OFFSET_FILL),Z===_&&$===S||(e.polygonOffset(_,S),Z=_,$=S)):disable(e.POLYGON_OFFSET_FILL)}return{buffers:{color:S,depth:k,stencil:E},enable:enable,disable:disable,bindFramebuffer:function(l,_){return I[l]!==_&&(e.bindFramebuffer(l,_),I[l]=_,l===e.DRAW_FRAMEBUFFER&&(I[e.FRAMEBUFFER]=_),l===e.FRAMEBUFFER&&(I[e.DRAW_FRAMEBUFFER]=_),!0)},drawBuffers:function(l,_){var S=O,k=!1;if(l){void 0===(S=D.get(_))&&(S=[],D.set(_,S));var E=l.textures;if(S.length!==E.length||S[0]!==e.COLOR_ATTACHMENT0){for(var T=0,M=E.length;T<M;T++)S[T]=e.COLOR_ATTACHMENT0+T;S.length=E.length,k=!0}}else S[0]!==e.BACK&&(S[0]=e.BACK,k=!0);k&&e.drawBuffers(S)},useProgram:function(l){return L!==l&&(e.useProgram(l),L=l,!0)},setBlending:setBlending,setMaterial:function(l,_){l.side===Gh?disable(e.CULL_FACE):enable(e.CULL_FACE);var T=1===l.side;_&&(T=!T),setFlipSided(T),1===l.blending&&!1===l.transparent?setBlending(0):setBlending(l.blending,l.blendEquation,l.blendSrc,l.blendDst,l.blendEquationAlpha,l.blendSrcAlpha,l.blendDstAlpha,l.blendColor,l.blendAlpha,l.premultipliedAlpha),k.setFunc(l.depthFunc),k.setTest(l.depthTest),k.setMask(l.depthWrite),S.setMask(l.colorWrite);var M=l.stencilWrite;E.setTest(M),M&&(E.setMask(l.stencilWriteMask),E.setFunc(l.stencilFunc,l.stencilRef,l.stencilFuncMask),E.setOp(l.stencilFail,l.stencilZFail,l.stencilZPass)),setPolygonOffset(l.polygonOffset,l.polygonOffsetFactor,l.polygonOffsetUnits),!0===l.alphaToCoverage?enable(e.SAMPLE_ALPHA_TO_COVERAGE):disable(e.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:setFlipSided,setCullFace:setCullFace,setLineWidth:function(l){l!==J&&(te&&e.lineWidth(l),J=l)},setPolygonOffset:setPolygonOffset,setScissorTest:function(l){l?enable(e.SCISSOR_TEST):disable(e.SCISSOR_TEST)},activeTexture:function(l){void 0===l&&(l=e.TEXTURE0+ee-1),ie!==l&&(e.activeTexture(l),ie=l)},bindTexture:function(l,_,S){void 0===S&&(S=null===ie?e.TEXTURE0+ee-1:ie);var k=ae[S];void 0===k&&(k={type:void 0,texture:void 0},ae[S]=k),k.type===l&&k.texture===_||(ie!==S&&(e.activeTexture(S),ie=S),e.bindTexture(l,_||ce[l]),k.type=l,k.texture=_)},unbindTexture:function(){var l=ae[ie];void 0!==l&&void 0!==l.type&&(e.bindTexture(l.type,null),l.type=void 0,l.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(l){}},compressedTexImage3D:function(){try{e.compressedTexImage3D.apply(e,arguments)}catch(l){}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(l){}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(l){}},updateUBOMapping:function(l,_){var S=M.get(_);void 0===S&&(S=new WeakMap,M.set(_,S));var k=S.get(l);void 0===k&&(k=e.getUniformBlockIndex(_,l.name),S.set(l,k))},uniformBlockBinding:function(l,_){var S=M.get(_).get(l);T.get(_)!==S&&(e.uniformBlockBinding(_,S,l.__bindingPointIndex),T.set(_,S))},texStorage2D:function(){try{e.texStorage2D.apply(e,arguments)}catch(l){}},texStorage3D:function(){try{e.texStorage3D.apply(e,arguments)}catch(l){}},texSubImage2D:function(){try{e.texSubImage2D.apply(e,arguments)}catch(l){}},texSubImage3D:function(){try{e.texSubImage3D.apply(e,arguments)}catch(l){}},compressedTexSubImage2D:function(){try{e.compressedTexSubImage2D.apply(e,arguments)}catch(l){}},compressedTexSubImage3D:function(){try{e.compressedTexSubImage3D.apply(e,arguments)}catch(l){}},scissor:function(l){!1===ue.equals(l)&&(e.scissor(l.x,l.y,l.z,l.w),ue.copy(l))},viewport:function(l){!1===le.equals(l)&&(e.viewport(l.x,l.y,l.z,l.w),le.copy(l))},reset:function(){e.disable(e.BLEND),e.disable(e.CULL_FACE),e.disable(e.DEPTH_TEST),e.disable(e.POLYGON_OFFSET_FILL),e.disable(e.SCISSOR_TEST),e.disable(e.STENCIL_TEST),e.disable(e.SAMPLE_ALPHA_TO_COVERAGE),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ZERO),e.blendFuncSeparate(e.ONE,e.ZERO,e.ONE,e.ZERO),e.blendColor(0,0,0,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(e.LESS),k.setReversed(!1),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(e.ALWAYS,0,4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP),e.clearStencil(0),e.cullFace(e.BACK),e.frontFace(e.CCW),e.polygonOffset(0,0),e.activeTexture(e.TEXTURE0),e.bindFramebuffer(e.FRAMEBUFFER,null),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),e.bindFramebuffer(e.READ_FRAMEBUFFER,null),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),R={},ie=null,ae={},I={},D=new WeakMap,O=[],L=null,U=!1,B=null,z=null,G=null,j=null,H=null,V=null,W=null,q=new Zp(0,0,0),X=0,K=!1,Y=null,Q=null,J=null,Z=null,$=null,ue.set(0,0,e.canvas.width,e.canvas.height),le.set(0,0,e.canvas.width,e.canvas.height),S.reset(),k.reset(),E.reset()}}}function WebGLTextures(e,l,_,S,k,E,T){var M,R=l.has("WEBGL_multisampled_render_to_texture")?l.get("WEBGL_multisampled_render_to_texture"):null,I="undefined"!=typeof navigator&&/OculusBrowser/g.test(navigator.userAgent),D=new df,O=new WeakMap,L=new WeakMap,U=!1;try{U="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(W){}function createCanvas(e,l){return U?new OffscreenCanvas(e,l):createElementNS("canvas")}function resizeImage(e,l,_){var S=1,k=getDimensions(e);if((k.width>_||k.height>_)&&(S=_/Math.max(k.width,k.height)),S<1){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap||"undefined"!=typeof VideoFrame&&e instanceof VideoFrame){var E=Math.floor(S*k.width),T=Math.floor(S*k.height);void 0===M&&(M=createCanvas(E,T));var R=l?createCanvas(E,T):M;return R.width=E,R.height=T,R.getContext("2d").drawImage(e,0,0,E,T),R}return e}return e}function textureNeedsGenerateMipmaps(e){return e.generateMipmaps}function generateMipmap(l){e.generateMipmap(l)}function getTargetType(l){return l.isWebGLCubeRenderTarget?e.TEXTURE_CUBE_MAP:l.isWebGL3DRenderTarget?e.TEXTURE_3D:l.isWebGLArrayRenderTarget||l.isCompressedArrayTexture?e.TEXTURE_2D_ARRAY:e.TEXTURE_2D}function getInternalFormat(_,S,k,E){var T=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(null!==_&&void 0!==e[_])return e[_];var M=S;if(S===e.RED&&(k===e.FLOAT&&(M=e.R32F),k===e.HALF_FLOAT&&(M=e.R16F),k===e.UNSIGNED_BYTE&&(M=e.R8)),S===e.RED_INTEGER&&(k===e.UNSIGNED_BYTE&&(M=e.R8UI),k===e.UNSIGNED_SHORT&&(M=e.R16UI),k===e.UNSIGNED_INT&&(M=e.R32UI),k===e.BYTE&&(M=e.R8I),k===e.SHORT&&(M=e.R16I),k===e.INT&&(M=e.R32I)),S===e.RG&&(k===e.FLOAT&&(M=e.RG32F),k===e.HALF_FLOAT&&(M=e.RG16F),k===e.UNSIGNED_BYTE&&(M=e.RG8)),S===e.RG_INTEGER&&(k===e.UNSIGNED_BYTE&&(M=e.RG8UI),k===e.UNSIGNED_SHORT&&(M=e.RG16UI),k===e.UNSIGNED_INT&&(M=e.RG32UI),k===e.BYTE&&(M=e.RG8I),k===e.SHORT&&(M=e.RG16I),k===e.INT&&(M=e.RG32I)),S===e.RGB_INTEGER&&(k===e.UNSIGNED_BYTE&&(M=e.RGB8UI),k===e.UNSIGNED_SHORT&&(M=e.RGB16UI),k===e.UNSIGNED_INT&&(M=e.RGB32UI),k===e.BYTE&&(M=e.RGB8I),k===e.SHORT&&(M=e.RGB16I),k===e.INT&&(M=e.RGB32I)),S===e.RGBA_INTEGER&&(k===e.UNSIGNED_BYTE&&(M=e.RGBA8UI),k===e.UNSIGNED_SHORT&&(M=e.RGBA16UI),k===e.UNSIGNED_INT&&(M=e.RGBA32UI),k===e.BYTE&&(M=e.RGBA8I),k===e.SHORT&&(M=e.RGBA16I),k===e.INT&&(M=e.RGBA32I)),S===e.RGB&&(k===e.UNSIGNED_INT_5_9_9_9_REV&&(M=e.RGB9_E5),k===e.UNSIGNED_INT_10F_11F_11F_REV&&(M=e.R11F_G11F_B10F)),S===e.RGBA){var R=T?tf:xf.getTransfer(E);k===e.FLOAT&&(M=e.RGBA32F),k===e.HALF_FLOAT&&(M=e.RGBA16F),k===e.UNSIGNED_BYTE&&(M=R===rf?e.SRGB8_ALPHA8:e.RGBA8),k===e.UNSIGNED_SHORT_4_4_4_4&&(M=e.RGBA4),k===e.UNSIGNED_SHORT_5_5_5_1&&(M=e.RGB5_A1)}return M!==e.R16F&&M!==e.R32F&&M!==e.RG16F&&M!==e.RG32F&&M!==e.RGBA16F&&M!==e.RGBA32F||l.get("EXT_color_buffer_float"),M}function getInternalDepthFormat(l,_){var S;return l?null===_||_===ad||_===cd?S=e.DEPTH24_STENCIL8:_===od?S=e.DEPTH32F_STENCIL8:_===nd&&(S=e.DEPTH24_STENCIL8):null===_||_===ad||_===cd?S=e.DEPTH_COMPONENT24:_===od?S=e.DEPTH_COMPONENT32F:_===nd&&(S=e.DEPTH_COMPONENT16),S}function getMipLevels(e,l){return!0===textureNeedsGenerateMipmaps(e)||e.isFramebufferTexture&&e.minFilter!==Yh&&e.minFilter!==Jh?Math.log2(Math.max(l.width,l.height))+1:void 0!==e.mipmaps&&e.mipmaps.length>0?e.mipmaps.length:e.isCompressedTexture&&Array.isArray(e.image)?l.mipmaps.length:1}function onTextureDispose(e){var l=e.target;l.removeEventListener("dispose",onTextureDispose),function(e){var l=S.get(e);if(void 0===l.__webglInit)return;var _=e.source,k=L.get(_);if(k){var E=k[l.__cacheKey];E.usedTimes--,0===E.usedTimes&&deleteTexture(e),0===Object.keys(k).length&&L.delete(_)}S.remove(e)}(l),l.isVideoTexture&&O.delete(l)}function onRenderTargetDispose(l){var _=l.target;_.removeEventListener("dispose",onRenderTargetDispose),function(l){var _=S.get(l);l.depthTexture&&(l.depthTexture.dispose(),S.remove(l.depthTexture));if(l.isWebGLCubeRenderTarget)for(var k=0;k<6;k++){if(Array.isArray(_.__webglFramebuffer[k]))for(var E=0;E<_.__webglFramebuffer[k].length;E++)e.deleteFramebuffer(_.__webglFramebuffer[k][E]);else e.deleteFramebuffer(_.__webglFramebuffer[k]);_.__webglDepthbuffer&&e.deleteRenderbuffer(_.__webglDepthbuffer[k])}else{if(Array.isArray(_.__webglFramebuffer))for(var M=0;M<_.__webglFramebuffer.length;M++)e.deleteFramebuffer(_.__webglFramebuffer[M]);else e.deleteFramebuffer(_.__webglFramebuffer);if(_.__webglDepthbuffer&&e.deleteRenderbuffer(_.__webglDepthbuffer),_.__webglMultisampledFramebuffer&&e.deleteFramebuffer(_.__webglMultisampledFramebuffer),_.__webglColorRenderbuffer)for(var R=0;R<_.__webglColorRenderbuffer.length;R++)_.__webglColorRenderbuffer[R]&&e.deleteRenderbuffer(_.__webglColorRenderbuffer[R]);_.__webglDepthRenderbuffer&&e.deleteRenderbuffer(_.__webglDepthRenderbuffer)}for(var I=l.textures,D=0,O=I.length;D<O;D++){var L=S.get(I[D]);L.__webglTexture&&(e.deleteTexture(L.__webglTexture),T.memory.textures--),S.remove(I[D])}S.remove(l)}(_)}function deleteTexture(l){var _=S.get(l);e.deleteTexture(_.__webglTexture);var k=l.source;delete L.get(k)[_.__cacheKey],T.memory.textures--}var B=0;function setTexture2D(l,k){var E=S.get(l);if(l.isVideoTexture&&function(e){var l=T.render.frame;O.get(e)!==l&&(O.set(e,l),e.update())}(l),!1===l.isRenderTargetTexture&&!0!==l.isExternalTexture&&l.version>0&&E.__version!==l.version){var M=l.image;if(null===M);else if(!1!==M.complete)return void uploadTexture(E,l,k)}else l.isExternalTexture&&(E.__webglTexture=l.sourceTexture?l.sourceTexture:null);_.bindTexture(e.TEXTURE_2D,E.__webglTexture,e.TEXTURE0+k)}var z=_defineProperty3(_defineProperty3(_defineProperty3({},qh,e.REPEAT),Xh,e.CLAMP_TO_EDGE),Kh,e.MIRRORED_REPEAT),G=_defineProperty3(_defineProperty3(_defineProperty3(_defineProperty3(_defineProperty3(_defineProperty3({},Yh,e.NEAREST),1004,e.NEAREST_MIPMAP_NEAREST),Qh,e.NEAREST_MIPMAP_LINEAR),Jh,e.LINEAR),Zh,e.LINEAR_MIPMAP_NEAREST),$h,e.LINEAR_MIPMAP_LINEAR),j=_defineProperty3(_defineProperty3(_defineProperty3(_defineProperty3(_defineProperty3(_defineProperty3(_defineProperty3(_defineProperty3({},512,e.NEVER),519,e.ALWAYS),513,e.LESS),515,e.LEQUAL),514,e.EQUAL),518,e.GEQUAL),516,e.GREATER),517,e.NOTEQUAL);function setTextureParameters(_,E){if(E.type===od&&!1===l.has("OES_texture_float_linear")&&(E.magFilter===Jh||E.magFilter===Zh||E.magFilter===Qh||E.magFilter===$h||E.minFilter===Jh||E.minFilter===Zh||E.minFilter===Qh||E.minFilter),e.texParameteri(_,e.TEXTURE_WRAP_S,z[E.wrapS]),e.texParameteri(_,e.TEXTURE_WRAP_T,z[E.wrapT]),_!==e.TEXTURE_3D&&_!==e.TEXTURE_2D_ARRAY||e.texParameteri(_,e.TEXTURE_WRAP_R,z[E.wrapR]),e.texParameteri(_,e.TEXTURE_MAG_FILTER,G[E.magFilter]),e.texParameteri(_,e.TEXTURE_MIN_FILTER,G[E.minFilter]),E.compareFunction&&(e.texParameteri(_,e.TEXTURE_COMPARE_MODE,e.COMPARE_REF_TO_TEXTURE),e.texParameteri(_,e.TEXTURE_COMPARE_FUNC,j[E.compareFunction])),!0===l.has("EXT_texture_filter_anisotropic")){if(E.magFilter===Yh)return;if(E.minFilter!==Qh&&E.minFilter!==$h)return;if(E.type===od&&!1===l.has("OES_texture_float_linear"))return;if(E.anisotropy>1||S.get(E).__currentAnisotropy){var T=l.get("EXT_texture_filter_anisotropic");e.texParameterf(_,T.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(E.anisotropy,k.getMaxAnisotropy())),S.get(E).__currentAnisotropy=E.anisotropy}}}function initTexture(l,_){var S=!1;void 0===l.__webglInit&&(l.__webglInit=!0,_.addEventListener("dispose",onTextureDispose));var k=_.source,E=L.get(k);void 0===E&&(E={},L.set(k,E));var M=function(e){var l=[];return l.push(e.wrapS),l.push(e.wrapT),l.push(e.wrapR||0),l.push(e.magFilter),l.push(e.minFilter),l.push(e.anisotropy),l.push(e.internalFormat),l.push(e.format),l.push(e.type),l.push(e.generateMipmaps),l.push(e.premultiplyAlpha),l.push(e.flipY),l.push(e.unpackAlignment),l.push(e.colorSpace),l.join()}(_);if(M!==l.__cacheKey){void 0===E[M]&&(E[M]={texture:e.createTexture(),usedTimes:0},T.memory.textures++,S=!0),E[M].usedTimes++;var R=E[l.__cacheKey];void 0!==R&&(E[l.__cacheKey].usedTimes--,0===R.usedTimes&&deleteTexture(_)),l.__cacheKey=M,l.__webglTexture=E[M].texture}return S}function getRow(e,l,_){return Math.floor(Math.floor(e/_)/l)}function uploadTexture(l,T,M){var R=e.TEXTURE_2D;(T.isDataArrayTexture||T.isCompressedArrayTexture)&&(R=e.TEXTURE_2D_ARRAY),T.isData3DTexture&&(R=e.TEXTURE_3D);var I=initTexture(l,T),D=T.source;_.bindTexture(R,l.__webglTexture,e.TEXTURE0+M);var O=S.get(D);if(D.version!==O.__version||!0===I){_.activeTexture(e.TEXTURE0+M);var L=xf.getPrimaries(xf.workingColorSpace),U=T.colorSpace===Zd?null:xf.getPrimaries(T.colorSpace),B=T.colorSpace===Zd||L===U?e.NONE:e.BROWSER_DEFAULT_WEBGL;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,T.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,T.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,T.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,B);var z=resizeImage(T.image,!1,k.maxTextureSize);z=verifyColorSpace(T,z);var G,j=E.convert(T.format,T.colorSpace),H=E.convert(T.type),V=getInternalFormat(T.internalFormat,j,H,T.colorSpace,T.isVideoTexture);setTextureParameters(R,T);var q=T.mipmaps,X=!0!==T.isVideoTexture,K=void 0===O.__version||!0===I,Y=D.dataReady,Q=getMipLevels(T,z);if(T.isDepthTexture)V=getInternalDepthFormat(T.format===vd,T.type),K&&(X?_.texStorage2D(e.TEXTURE_2D,1,V,z.width,z.height):_.texImage2D(e.TEXTURE_2D,0,V,z.width,z.height,0,j,H,null));else if(T.isDataTexture)if(q.length>0){X&&K&&_.texStorage2D(e.TEXTURE_2D,Q,V,q[0].width,q[0].height);for(var J=0,Z=q.length;J<Z;J++)G=q[J],X?Y&&_.texSubImage2D(e.TEXTURE_2D,J,0,0,G.width,G.height,j,H,G.data):_.texImage2D(e.TEXTURE_2D,J,V,G.width,G.height,0,j,H,G.data);T.generateMipmaps=!1}else X?(K&&_.texStorage2D(e.TEXTURE_2D,Q,V,z.width,z.height),Y&&function(l,S,k,E){var T=l.updateRanges;if(0===T.length)_.texSubImage2D(e.TEXTURE_2D,0,0,0,S.width,S.height,k,E,S.data);else{T.sort(function(e,l){return e.start-l.start});for(var M=0,R=1;R<T.length;R++){var I=T[M],D=T[R],O=I.start+I.count,L=getRow(D.start,S.width,4),U=getRow(I.start,S.width,4);D.start<=O+1&&L===U&&getRow(D.start+D.count-1,S.width,4)===L?I.count=Math.max(I.count,D.start+D.count-I.start):T[++M]=D}T.length=M+1;var B=e.getParameter(e.UNPACK_ROW_LENGTH),z=e.getParameter(e.UNPACK_SKIP_PIXELS),G=e.getParameter(e.UNPACK_SKIP_ROWS);e.pixelStorei(e.UNPACK_ROW_LENGTH,S.width);for(var j=0,H=T.length;j<H;j++){var V=T[j],W=Math.floor(V.start/4),q=Math.ceil(V.count/4),X=W%S.width,K=Math.floor(W/S.width),Y=q;e.pixelStorei(e.UNPACK_SKIP_PIXELS,X),e.pixelStorei(e.UNPACK_SKIP_ROWS,K),_.texSubImage2D(e.TEXTURE_2D,0,X,K,Y,1,k,E,S.data)}l.clearUpdateRanges(),e.pixelStorei(e.UNPACK_ROW_LENGTH,B),e.pixelStorei(e.UNPACK_SKIP_PIXELS,z),e.pixelStorei(e.UNPACK_SKIP_ROWS,G)}}(T,z,j,H)):_.texImage2D(e.TEXTURE_2D,0,V,z.width,z.height,0,j,H,z.data);else if(T.isCompressedTexture)if(T.isCompressedArrayTexture){X&&K&&_.texStorage3D(e.TEXTURE_2D_ARRAY,Q,V,q[0].width,q[0].height,z.depth);for(var $=0,ee=q.length;$<ee;$++)if(G=q[$],T.format!==fd){if(null!==j)if(X){if(Y)if(T.layerUpdates.size>0){var te,re=getByteLength(G.width,G.height,T.format,T.type),ne=_createForOfIteratorHelper2(T.layerUpdates);try{for(ne.s();!(te=ne.n()).done;){var ie=te.value,ae=G.data.subarray(ie*re/G.data.BYTES_PER_ELEMENT,(ie+1)*re/G.data.BYTES_PER_ELEMENT);_.compressedTexSubImage3D(e.TEXTURE_2D_ARRAY,$,0,0,ie,G.width,G.height,1,j,ae)}}catch(W){ne.e(W)}finally{ne.f()}T.clearLayerUpdates()}else _.compressedTexSubImage3D(e.TEXTURE_2D_ARRAY,$,0,0,0,G.width,G.height,z.depth,j,G.data)}else _.compressedTexImage3D(e.TEXTURE_2D_ARRAY,$,V,G.width,G.height,z.depth,0,G.data,0,0)}else X?Y&&_.texSubImage3D(e.TEXTURE_2D_ARRAY,$,0,0,0,G.width,G.height,z.depth,j,H,G.data):_.texImage3D(e.TEXTURE_2D_ARRAY,$,V,G.width,G.height,z.depth,0,j,H,G.data)}else{X&&K&&_.texStorage2D(e.TEXTURE_2D,Q,V,q[0].width,q[0].height);for(var oe=0,se=q.length;oe<se;oe++)G=q[oe],T.format!==fd?null!==j&&(X?Y&&_.compressedTexSubImage2D(e.TEXTURE_2D,oe,0,0,G.width,G.height,j,G.data):_.compressedTexImage2D(e.TEXTURE_2D,oe,V,G.width,G.height,0,G.data)):X?Y&&_.texSubImage2D(e.TEXTURE_2D,oe,0,0,G.width,G.height,j,H,G.data):_.texImage2D(e.TEXTURE_2D,oe,V,G.width,G.height,0,j,H,G.data)}else if(T.isDataArrayTexture)if(X){if(K&&_.texStorage3D(e.TEXTURE_2D_ARRAY,Q,V,z.width,z.height,z.depth),Y)if(T.layerUpdates.size>0){var ue,le=getByteLength(z.width,z.height,T.format,T.type),ce=_createForOfIteratorHelper2(T.layerUpdates);try{for(ce.s();!(ue=ce.n()).done;){var he=ue.value,de=z.data.subarray(he*le/z.data.BYTES_PER_ELEMENT,(he+1)*le/z.data.BYTES_PER_ELEMENT);_.texSubImage3D(e.TEXTURE_2D_ARRAY,0,0,0,he,z.width,z.height,1,j,H,de)}}catch(W){ce.e(W)}finally{ce.f()}T.clearLayerUpdates()}else _.texSubImage3D(e.TEXTURE_2D_ARRAY,0,0,0,0,z.width,z.height,z.depth,j,H,z.data)}else _.texImage3D(e.TEXTURE_2D_ARRAY,0,V,z.width,z.height,z.depth,0,j,H,z.data);else if(T.isData3DTexture)X?(K&&_.texStorage3D(e.TEXTURE_3D,Q,V,z.width,z.height,z.depth),Y&&_.texSubImage3D(e.TEXTURE_3D,0,0,0,0,z.width,z.height,z.depth,j,H,z.data)):_.texImage3D(e.TEXTURE_3D,0,V,z.width,z.height,z.depth,0,j,H,z.data);else if(T.isFramebufferTexture){if(K)if(X)_.texStorage2D(e.TEXTURE_2D,Q,V,z.width,z.height);else for(var fe=z.width,pe=z.height,ve=0;ve<Q;ve++)_.texImage2D(e.TEXTURE_2D,ve,V,fe,pe,0,j,H,null),fe>>=1,pe>>=1}else if(q.length>0){if(X&&K){var ge=getDimensions(q[0]);_.texStorage2D(e.TEXTURE_2D,Q,V,ge.width,ge.height)}for(var me=0,ye=q.length;me<ye;me++)G=q[me],X?Y&&_.texSubImage2D(e.TEXTURE_2D,me,0,0,j,H,G):_.texImage2D(e.TEXTURE_2D,me,V,j,H,G);T.generateMipmaps=!1}else if(X){if(K){var _e=getDimensions(z);_.texStorage2D(e.TEXTURE_2D,Q,V,_e.width,_e.height)}Y&&_.texSubImage2D(e.TEXTURE_2D,0,0,0,j,H,z)}else _.texImage2D(e.TEXTURE_2D,0,V,j,H,z);textureNeedsGenerateMipmaps(T)&&generateMipmap(R),O.__version=D.version,T.onUpdate&&T.onUpdate(T)}l.__version=T.version}function setupFrameBufferTexture(l,k,T,M,I,D){var O=E.convert(T.format,T.colorSpace),L=E.convert(T.type),U=getInternalFormat(T.internalFormat,O,L,T.colorSpace),B=S.get(k),z=S.get(T);if(z.__renderTarget=k,!B.__hasExternalTextures){var G=Math.max(1,k.width>>D),j=Math.max(1,k.height>>D);I===e.TEXTURE_3D||I===e.TEXTURE_2D_ARRAY?_.texImage3D(I,D,U,G,j,k.depth,0,O,L,null):_.texImage2D(I,D,U,G,j,0,O,L,null)}_.bindFramebuffer(e.FRAMEBUFFER,l),useMultisampledRTT(k)?R.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,M,I,z.__webglTexture,0,getRenderTargetSamples(k)):(I===e.TEXTURE_2D||I>=e.TEXTURE_CUBE_MAP_POSITIVE_X&&I<=e.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&e.framebufferTexture2D(e.FRAMEBUFFER,M,I,z.__webglTexture,D),_.bindFramebuffer(e.FRAMEBUFFER,null)}function setupRenderBufferStorage(l,_,S){if(e.bindRenderbuffer(e.RENDERBUFFER,l),_.depthBuffer){var k=_.depthTexture,T=k&&k.isDepthTexture?k.type:null,M=getInternalDepthFormat(_.stencilBuffer,T),I=_.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,D=getRenderTargetSamples(_);useMultisampledRTT(_)?R.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,D,M,_.width,_.height):S?e.renderbufferStorageMultisample(e.RENDERBUFFER,D,M,_.width,_.height):e.renderbufferStorage(e.RENDERBUFFER,M,_.width,_.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,I,e.RENDERBUFFER,l)}else for(var O=_.textures,L=0;L<O.length;L++){var U=O[L],B=E.convert(U.format,U.colorSpace),z=E.convert(U.type),G=getInternalFormat(U.internalFormat,B,z,U.colorSpace),j=getRenderTargetSamples(_);S&&!1===useMultisampledRTT(_)?e.renderbufferStorageMultisample(e.RENDERBUFFER,j,G,_.width,_.height):useMultisampledRTT(_)?R.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,j,G,_.width,_.height):e.renderbufferStorage(e.RENDERBUFFER,G,_.width,_.height)}e.bindRenderbuffer(e.RENDERBUFFER,null)}function setupDepthTexture(l,k){if(k&&k.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(_.bindFramebuffer(e.FRAMEBUFFER,l),!k.depthTexture||!k.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");var E=S.get(k.depthTexture);E.__renderTarget=k,E.__webglTexture&&k.depthTexture.image.width===k.width&&k.depthTexture.image.height===k.height||(k.depthTexture.image.width=k.width,k.depthTexture.image.height=k.height,k.depthTexture.needsUpdate=!0),setTexture2D(k.depthTexture,0);var T=E.__webglTexture,M=getRenderTargetSamples(k);if(k.depthTexture.format===pd)useMultisampledRTT(k)?R.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,T,0,M):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,T,0);else{if(k.depthTexture.format!==vd)throw new Error("Unknown depthTexture format");useMultisampledRTT(k)?R.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,T,0,M):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,T,0)}}function setupDepthRenderbuffer(l){var k=S.get(l),E=!0===l.isWebGLCubeRenderTarget;if(k.__boundDepthTexture!==l.depthTexture){var T=l.depthTexture;if(k.__depthDisposeCallback&&k.__depthDisposeCallback(),T){var _disposeEvent=function(){delete k.__boundDepthTexture,delete k.__depthDisposeCallback,T.removeEventListener("dispose",_disposeEvent)};T.addEventListener("dispose",_disposeEvent),k.__depthDisposeCallback=_disposeEvent}k.__boundDepthTexture=T}if(l.depthTexture&&!k.__autoAllocateDepthBuffer){if(E)throw new Error("target.depthTexture not supported in Cube render targets");var M=l.texture.mipmaps;M&&M.length>0?setupDepthTexture(k.__webglFramebuffer[0],l):setupDepthTexture(k.__webglFramebuffer,l)}else if(E){k.__webglDepthbuffer=[];for(var R=0;R<6;R++)if(_.bindFramebuffer(e.FRAMEBUFFER,k.__webglFramebuffer[R]),void 0===k.__webglDepthbuffer[R])k.__webglDepthbuffer[R]=e.createRenderbuffer(),setupRenderBufferStorage(k.__webglDepthbuffer[R],l,!1);else{var I=l.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,D=k.__webglDepthbuffer[R];e.bindRenderbuffer(e.RENDERBUFFER,D),e.framebufferRenderbuffer(e.FRAMEBUFFER,I,e.RENDERBUFFER,D)}}else{var O=l.texture.mipmaps;if(O&&O.length>0?_.bindFramebuffer(e.FRAMEBUFFER,k.__webglFramebuffer[0]):_.bindFramebuffer(e.FRAMEBUFFER,k.__webglFramebuffer),void 0===k.__webglDepthbuffer)k.__webglDepthbuffer=e.createRenderbuffer(),setupRenderBufferStorage(k.__webglDepthbuffer,l,!1);else{var L=l.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,U=k.__webglDepthbuffer;e.bindRenderbuffer(e.RENDERBUFFER,U),e.framebufferRenderbuffer(e.FRAMEBUFFER,L,e.RENDERBUFFER,U)}}_.bindFramebuffer(e.FRAMEBUFFER,null)}var H=[],V=[];function getRenderTargetSamples(e){return Math.min(k.maxSamples,e.samples)}function useMultisampledRTT(e){var _=S.get(e);return e.samples>0&&!0===l.has("WEBGL_multisampled_render_to_texture")&&!1!==_.__useRenderToTexture}function verifyColorSpace(e,l){var _=e.colorSpace;e.format,e.type;return!0===e.isCompressedTexture||!0===e.isVideoTexture||_!==ef&&_!==Zd&&xf.getTransfer(_),l}function getDimensions(e){return"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement?(D.width=e.naturalWidth||e.width,D.height=e.naturalHeight||e.height):"undefined"!=typeof VideoFrame&&e instanceof VideoFrame?(D.width=e.displayWidth,D.height=e.displayHeight):(D.width=e.width,D.height=e.height),D}this.allocateTextureUnit=function(){var e=B;return k.maxTextures,B+=1,e},this.resetTextureUnits=function(){B=0},this.setTexture2D=setTexture2D,this.setTexture2DArray=function(l,k){var E=S.get(l);!1===l.isRenderTargetTexture&&l.version>0&&E.__version!==l.version?uploadTexture(E,l,k):_.bindTexture(e.TEXTURE_2D_ARRAY,E.__webglTexture,e.TEXTURE0+k)},this.setTexture3D=function(l,k){var E=S.get(l);!1===l.isRenderTargetTexture&&l.version>0&&E.__version!==l.version?uploadTexture(E,l,k):_.bindTexture(e.TEXTURE_3D,E.__webglTexture,e.TEXTURE0+k)},this.setTextureCube=function(l,T){var M=S.get(l);l.version>0&&M.__version!==l.version?function(l,T,M){if(6!==T.image.length)return;var R=initTexture(l,T),I=T.source;_.bindTexture(e.TEXTURE_CUBE_MAP,l.__webglTexture,e.TEXTURE0+M);var D=S.get(I);if(I.version!==D.__version||!0===R){_.activeTexture(e.TEXTURE0+M);var O=xf.getPrimaries(xf.workingColorSpace),L=T.colorSpace===Zd?null:xf.getPrimaries(T.colorSpace),U=T.colorSpace===Zd||O===L?e.NONE:e.BROWSER_DEFAULT_WEBGL;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,T.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,T.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,T.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,U);for(var B=T.isCompressedTexture||T.image[0].isCompressedTexture,z=T.image[0]&&T.image[0].isDataTexture,G=[],j=0;j<6;j++)G[j]=B||z?z?T.image[j].image:T.image[j]:resizeImage(T.image[j],!0,k.maxCubemapSize),G[j]=verifyColorSpace(T,G[j]);var H,V=G[0],W=E.convert(T.format,T.colorSpace),q=E.convert(T.type),X=getInternalFormat(T.internalFormat,W,q,T.colorSpace),K=!0!==T.isVideoTexture,Y=void 0===D.__version||!0===R,Q=I.dataReady,J=getMipLevels(T,V);if(setTextureParameters(e.TEXTURE_CUBE_MAP,T),B){K&&Y&&_.texStorage2D(e.TEXTURE_CUBE_MAP,J,X,V.width,V.height);for(var Z=0;Z<6;Z++){H=G[Z].mipmaps;for(var $=0;$<H.length;$++){var ee=H[$];T.format!==fd?null!==W&&(K?Q&&_.compressedTexSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+Z,$,0,0,ee.width,ee.height,W,ee.data):_.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+Z,$,X,ee.width,ee.height,0,ee.data)):K?Q&&_.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+Z,$,0,0,ee.width,ee.height,W,q,ee.data):_.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+Z,$,X,ee.width,ee.height,0,W,q,ee.data)}}}else{if(H=T.mipmaps,K&&Y){H.length>0&&J++;var te=getDimensions(G[0]);_.texStorage2D(e.TEXTURE_CUBE_MAP,J,X,te.width,te.height)}for(var re=0;re<6;re++)if(z){K?Q&&_.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+re,0,0,0,G[re].width,G[re].height,W,q,G[re].data):_.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+re,0,X,G[re].width,G[re].height,0,W,q,G[re].data);for(var ne=0;ne<H.length;ne++){var ie=H[ne].image[re].image;K?Q&&_.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+re,ne+1,0,0,ie.width,ie.height,W,q,ie.data):_.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+re,ne+1,X,ie.width,ie.height,0,W,q,ie.data)}}else{K?Q&&_.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+re,0,0,0,W,q,G[re]):_.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+re,0,X,W,q,G[re]);for(var ae=0;ae<H.length;ae++){var oe=H[ae];K?Q&&_.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+re,ae+1,0,0,W,q,oe.image[re]):_.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+re,ae+1,X,W,q,oe.image[re])}}}textureNeedsGenerateMipmaps(T)&&generateMipmap(e.TEXTURE_CUBE_MAP),D.__version=I.version,T.onUpdate&&T.onUpdate(T)}l.__version=T.version}(M,l,T):_.bindTexture(e.TEXTURE_CUBE_MAP,M.__webglTexture,e.TEXTURE0+T)},this.rebindTextures=function(l,_,k){var E=S.get(l);void 0!==_&&setupFrameBufferTexture(E.__webglFramebuffer,l,l.texture,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,0),void 0!==k&&setupDepthRenderbuffer(l)},this.setupRenderTarget=function(l){var k=l.texture,M=S.get(l),R=S.get(k);l.addEventListener("dispose",onRenderTargetDispose);var I=l.textures,D=!0===l.isWebGLCubeRenderTarget,O=I.length>1;if(O||(void 0===R.__webglTexture&&(R.__webglTexture=e.createTexture()),R.__version=k.version,T.memory.textures++),D){M.__webglFramebuffer=[];for(var L=0;L<6;L++)if(k.mipmaps&&k.mipmaps.length>0){M.__webglFramebuffer[L]=[];for(var U=0;U<k.mipmaps.length;U++)M.__webglFramebuffer[L][U]=e.createFramebuffer()}else M.__webglFramebuffer[L]=e.createFramebuffer()}else{if(k.mipmaps&&k.mipmaps.length>0){M.__webglFramebuffer=[];for(var B=0;B<k.mipmaps.length;B++)M.__webglFramebuffer[B]=e.createFramebuffer()}else M.__webglFramebuffer=e.createFramebuffer();if(O)for(var z=0,G=I.length;z<G;z++){var j=S.get(I[z]);void 0===j.__webglTexture&&(j.__webglTexture=e.createTexture(),T.memory.textures++)}if(l.samples>0&&!1===useMultisampledRTT(l)){M.__webglMultisampledFramebuffer=e.createFramebuffer(),M.__webglColorRenderbuffer=[],_.bindFramebuffer(e.FRAMEBUFFER,M.__webglMultisampledFramebuffer);for(var H=0;H<I.length;H++){var V=I[H];M.__webglColorRenderbuffer[H]=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,M.__webglColorRenderbuffer[H]);var W=E.convert(V.format,V.colorSpace),q=E.convert(V.type),X=getInternalFormat(V.internalFormat,W,q,V.colorSpace,!0===l.isXRRenderTarget),K=getRenderTargetSamples(l);e.renderbufferStorageMultisample(e.RENDERBUFFER,K,X,l.width,l.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+H,e.RENDERBUFFER,M.__webglColorRenderbuffer[H])}e.bindRenderbuffer(e.RENDERBUFFER,null),l.depthBuffer&&(M.__webglDepthRenderbuffer=e.createRenderbuffer(),setupRenderBufferStorage(M.__webglDepthRenderbuffer,l,!0)),_.bindFramebuffer(e.FRAMEBUFFER,null)}}if(D){_.bindTexture(e.TEXTURE_CUBE_MAP,R.__webglTexture),setTextureParameters(e.TEXTURE_CUBE_MAP,k);for(var Y=0;Y<6;Y++)if(k.mipmaps&&k.mipmaps.length>0)for(var Q=0;Q<k.mipmaps.length;Q++)setupFrameBufferTexture(M.__webglFramebuffer[Y][Q],l,k,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+Y,Q);else setupFrameBufferTexture(M.__webglFramebuffer[Y],l,k,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+Y,0);textureNeedsGenerateMipmaps(k)&&generateMipmap(e.TEXTURE_CUBE_MAP),_.unbindTexture()}else if(O){for(var J=0,Z=I.length;J<Z;J++){var $=I[J],ee=S.get($),te=e.TEXTURE_2D;(l.isWebGL3DRenderTarget||l.isWebGLArrayRenderTarget)&&(te=l.isWebGL3DRenderTarget?e.TEXTURE_3D:e.TEXTURE_2D_ARRAY),_.bindTexture(te,ee.__webglTexture),setTextureParameters(te,$),setupFrameBufferTexture(M.__webglFramebuffer,l,$,e.COLOR_ATTACHMENT0+J,te,0),textureNeedsGenerateMipmaps($)&&generateMipmap(te)}_.unbindTexture()}else{var re=e.TEXTURE_2D;if((l.isWebGL3DRenderTarget||l.isWebGLArrayRenderTarget)&&(re=l.isWebGL3DRenderTarget?e.TEXTURE_3D:e.TEXTURE_2D_ARRAY),_.bindTexture(re,R.__webglTexture),setTextureParameters(re,k),k.mipmaps&&k.mipmaps.length>0)for(var ne=0;ne<k.mipmaps.length;ne++)setupFrameBufferTexture(M.__webglFramebuffer[ne],l,k,e.COLOR_ATTACHMENT0,re,ne);else setupFrameBufferTexture(M.__webglFramebuffer,l,k,e.COLOR_ATTACHMENT0,re,0);textureNeedsGenerateMipmaps(k)&&generateMipmap(re),_.unbindTexture()}l.depthBuffer&&setupDepthRenderbuffer(l)},this.updateRenderTargetMipmap=function(e){for(var l=e.textures,k=0,E=l.length;k<E;k++){var T=l[k];if(textureNeedsGenerateMipmaps(T)){var M=getTargetType(e),R=S.get(T).__webglTexture;_.bindTexture(M,R),generateMipmap(M),_.unbindTexture()}}},this.updateMultisampleRenderTarget=function(l){if(l.samples>0)if(!1===useMultisampledRTT(l)){var k=l.textures,E=l.width,T=l.height,M=e.COLOR_BUFFER_BIT,R=l.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,D=S.get(l),O=k.length>1;if(O)for(var L=0;L<k.length;L++)_.bindFramebuffer(e.FRAMEBUFFER,D.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+L,e.RENDERBUFFER,null),_.bindFramebuffer(e.FRAMEBUFFER,D.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+L,e.TEXTURE_2D,null,0);_.bindFramebuffer(e.READ_FRAMEBUFFER,D.__webglMultisampledFramebuffer);var U=l.texture.mipmaps;U&&U.length>0?_.bindFramebuffer(e.DRAW_FRAMEBUFFER,D.__webglFramebuffer[0]):_.bindFramebuffer(e.DRAW_FRAMEBUFFER,D.__webglFramebuffer);for(var B=0;B<k.length;B++){if(l.resolveDepthBuffer&&(l.depthBuffer&&(M|=e.DEPTH_BUFFER_BIT),l.stencilBuffer&&l.resolveStencilBuffer&&(M|=e.STENCIL_BUFFER_BIT)),O){e.framebufferRenderbuffer(e.READ_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,D.__webglColorRenderbuffer[B]);var z=S.get(k[B]).__webglTexture;e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,z,0)}e.blitFramebuffer(0,0,E,T,0,0,E,T,M,e.NEAREST),!0===I&&(H.length=0,V.length=0,H.push(e.COLOR_ATTACHMENT0+B),l.depthBuffer&&!1===l.resolveDepthBuffer&&(H.push(R),V.push(R),e.invalidateFramebuffer(e.DRAW_FRAMEBUFFER,V)),e.invalidateFramebuffer(e.READ_FRAMEBUFFER,H))}if(_.bindFramebuffer(e.READ_FRAMEBUFFER,null),_.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),O)for(var G=0;G<k.length;G++){_.bindFramebuffer(e.FRAMEBUFFER,D.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+G,e.RENDERBUFFER,D.__webglColorRenderbuffer[G]);var j=S.get(k[G]).__webglTexture;_.bindFramebuffer(e.FRAMEBUFFER,D.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+G,e.TEXTURE_2D,j,0)}_.bindFramebuffer(e.DRAW_FRAMEBUFFER,D.__webglMultisampledFramebuffer)}else if(l.depthBuffer&&!1===l.resolveDepthBuffer&&I){var W=l.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT;e.invalidateFramebuffer(e.DRAW_FRAMEBUFFER,[W])}},this.setupDepthRenderbuffer=setupDepthRenderbuffer,this.setupFrameBufferTexture=setupFrameBufferTexture,this.useMultisampledRTT=useMultisampledRTT}function WebGLUtils(e,l){return{convert:function(_){var S,k=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Zd,E=xf.getTransfer(k);if(_===ed)return e.UNSIGNED_BYTE;if(_===ud)return e.UNSIGNED_SHORT_4_4_4_4;if(_===ld)return e.UNSIGNED_SHORT_5_5_5_1;if(_===hd)return e.UNSIGNED_INT_5_9_9_9_REV;if(_===dd)return e.UNSIGNED_INT_10F_11F_11F_REV;if(_===td)return e.BYTE;if(_===rd)return e.SHORT;if(_===nd)return e.UNSIGNED_SHORT;if(_===id)return e.INT;if(_===ad)return e.UNSIGNED_INT;if(_===od)return e.FLOAT;if(_===sd)return e.HALF_FLOAT;if(1021===_)return e.ALPHA;if(1022===_)return e.RGB;if(_===fd)return e.RGBA;if(_===pd)return e.DEPTH_COMPONENT;if(_===vd)return e.DEPTH_STENCIL;if(1028===_)return e.RED;if(_===gd)return e.RED_INTEGER;if(1030===_)return e.RG;if(_===md)return e.RG_INTEGER;if(_===yd)return e.RGBA_INTEGER;if(_===_d||_===bd||_===Sd||_===wd)if(E===rf){if(null===(S=l.get("WEBGL_compressed_texture_s3tc_srgb")))return null;if(_===_d)return S.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(_===bd)return S.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(_===Sd)return S.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(_===wd)return S.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(null===(S=l.get("WEBGL_compressed_texture_s3tc")))return null;if(_===_d)return S.COMPRESSED_RGB_S3TC_DXT1_EXT;if(_===bd)return S.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(_===Sd)return S.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(_===wd)return S.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(_===xd||_===kd||_===Ad||_===Ed){if(null===(S=l.get("WEBGL_compressed_texture_pvrtc")))return null;if(_===xd)return S.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(_===kd)return S.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(_===Ad)return S.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(_===Ed)return S.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(_===Cd||_===Td||_===Md){if(null===(S=l.get("WEBGL_compressed_texture_etc")))return null;if(_===Cd||_===Td)return E===rf?S.COMPRESSED_SRGB8_ETC2:S.COMPRESSED_RGB8_ETC2;if(_===Md)return E===rf?S.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:S.COMPRESSED_RGBA8_ETC2_EAC}if(_===Rd||_===Id||_===Pd||_===Dd||_===Od||_===Ld||_===Ud||_===Fd||_===Nd||_===Bd||_===zd||_===Gd||_===jd||_===Hd){if(null===(S=l.get("WEBGL_compressed_texture_astc")))return null;if(_===Rd)return E===rf?S.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:S.COMPRESSED_RGBA_ASTC_4x4_KHR;if(_===Id)return E===rf?S.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:S.COMPRESSED_RGBA_ASTC_5x4_KHR;if(_===Pd)return E===rf?S.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:S.COMPRESSED_RGBA_ASTC_5x5_KHR;if(_===Dd)return E===rf?S.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:S.COMPRESSED_RGBA_ASTC_6x5_KHR;if(_===Od)return E===rf?S.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:S.COMPRESSED_RGBA_ASTC_6x6_KHR;if(_===Ld)return E===rf?S.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:S.COMPRESSED_RGBA_ASTC_8x5_KHR;if(_===Ud)return E===rf?S.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:S.COMPRESSED_RGBA_ASTC_8x6_KHR;if(_===Fd)return E===rf?S.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:S.COMPRESSED_RGBA_ASTC_8x8_KHR;if(_===Nd)return E===rf?S.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:S.COMPRESSED_RGBA_ASTC_10x5_KHR;if(_===Bd)return E===rf?S.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:S.COMPRESSED_RGBA_ASTC_10x6_KHR;if(_===zd)return E===rf?S.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:S.COMPRESSED_RGBA_ASTC_10x8_KHR;if(_===Gd)return E===rf?S.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:S.COMPRESSED_RGBA_ASTC_10x10_KHR;if(_===jd)return E===rf?S.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:S.COMPRESSED_RGBA_ASTC_12x10_KHR;if(_===Hd)return E===rf?S.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:S.COMPRESSED_RGBA_ASTC_12x12_KHR}if(_===Vd||_===Wd||_===qd){if(null===(S=l.get("EXT_texture_compression_bptc")))return null;if(_===Vd)return E===rf?S.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:S.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(_===Wd)return S.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(_===qd)return S.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}if(_===Xd||_===Kd||_===Yd||_===Qd){if(null===(S=l.get("EXT_texture_compression_rgtc")))return null;if(_===Xd)return S.COMPRESSED_RED_RGTC1_EXT;if(_===Kd)return S.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(_===Yd)return S.COMPRESSED_RED_GREEN_RGTC2_EXT;if(_===Qd)return S.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return _===cd?e.UNSIGNED_INT_24_8:void 0!==e[_]?e[_]:null}}}var bm=function(){return _createClass3(function WebXRDepthSensing(){_classCallCheck3(this,WebXRDepthSensing),this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0},[{key:"init",value:function(e,l){if(null===this.texture){var _=new ng(e.texture);e.depthNear===l.depthNear&&e.depthFar===l.depthFar||(this.depthNear=e.depthNear,this.depthFar=e.depthFar),this.texture=_}}},{key:"getMesh",value:function(e){if(null!==this.texture&&null===this.mesh){var l=e.cameras[0].viewport,_=new Pv({vertexShader:"\nvoid main() {\n\n\tgl_Position = vec4( position, 1.0 );\n\n}",fragmentShader:"\nuniform sampler2DArray depthColor;\nuniform float depthWidth;\nuniform float depthHeight;\n\nvoid main() {\n\n\tvec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );\n\n\tif ( coord.x >= 1.0 ) {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;\n\n\t} else {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;\n\n\t}\n\n}",uniforms:{depthColor:{value:this.texture},depthWidth:{value:l.z},depthHeight:{value:l.w}}});this.mesh=new Mv(new bg(20,20),_)}return this.mesh}},{key:"reset",value:function(){this.texture=null,this.mesh=null}},{key:"getDepthTexture",value:function(){return this.texture}}])}(),Sm=function(e){function WebXRManager(e,l){var _;_classCallCheck3(this,WebXRManager);var S=_=_callSuper(this,WebXRManager),k=null,E=1,T=null,M="local-floor",R=1,I=null,D=null,O=null,L=null,U=null,B=null,z="undefined"!=typeof XRWebGLBinding,G=new bm,j={},H=l.getContextAttributes(),V=null,W=null,q=[],X=[],K=new df,Y=null,Q=new Fv;Q.viewport=new Rf;var J=new Fv;J.viewport=new Rf;var Z=[Q,J],$=new Eg,ee=null,te=null;function onSessionEvent(e){var l=X.indexOf(e.inputSource);if(-1!==l){var _=q[l];void 0!==_&&(_.update(e.inputSource,e.frame,I||T),_.dispatchEvent({type:e.type,data:e.inputSource}))}}function onSessionEnd(){k.removeEventListener("select",onSessionEvent),k.removeEventListener("selectstart",onSessionEvent),k.removeEventListener("selectend",onSessionEvent),k.removeEventListener("squeeze",onSessionEvent),k.removeEventListener("squeezestart",onSessionEvent),k.removeEventListener("squeezeend",onSessionEvent),k.removeEventListener("end",onSessionEnd),k.removeEventListener("inputsourceschange",onInputSourcesChange);for(var l=0;l<q.length;l++){var _=X[l];null!==_&&(X[l]=null,q[l].disconnect(_))}for(var E in ee=null,te=null,G.reset(),j)delete j[E];e.setRenderTarget(V),U=null,L=null,O=null,k=null,W=null,ae.stop(),S.isPresenting=!1,e.setPixelRatio(Y),e.setSize(K.width,K.height,!1),S.dispatchEvent({type:"sessionend"})}function onInputSourcesChange(e){for(var l=0;l<e.removed.length;l++){var _=e.removed[l],S=X.indexOf(_);S>=0&&(X[S]=null,q[S].disconnect(_))}for(var k=0;k<e.added.length;k++){var E=e.added[k],T=X.indexOf(E);if(-1===T){for(var M=0;M<q.length;M++){if(M>=X.length){X.push(E),T=M;break}if(null===X[M]){X[M]=E,T=M;break}}if(-1===T)break}var R=q[T];R&&R.connect(E)}}_.cameraAutoUpdate=!0,_.enabled=!1,_.isPresenting=!1,_.getController=function(e){var l=q[e];return void 0===l&&(l=new Vv,q[e]=l),l.getTargetRaySpace()},_.getControllerGrip=function(e){var l=q[e];return void 0===l&&(l=new Vv,q[e]=l),l.getGripSpace()},_.getHand=function(e){var l=q[e];return void 0===l&&(l=new Vv,q[e]=l),l.getHandSpace()},_.setFramebufferScaleFactor=function(e){E=e,S.isPresenting},_.setReferenceSpaceType=function(e){M=e,S.isPresenting},_.getReferenceSpace=function(){return I||T},_.setReferenceSpace=function(e){I=e},_.getBaseLayer=function(){return null!==L?L:U},_.getBinding=function(){return null===O&&z&&(O=new XRWebGLBinding(k,l)),O},_.getFrame=function(){return B},_.getSession=function(){return k},_.setSession=function(){var _=_asyncToGenerator(_regenerator().m(function _callee218(_){var D,B,G,j,q;return _regenerator().w(function(X){for(;;)switch(X.n){case 0:if(null===(k=_)){X.n=3;break}if(V=e.getRenderTarget(),k.addEventListener("select",onSessionEvent),k.addEventListener("selectstart",onSessionEvent),k.addEventListener("selectend",onSessionEvent),k.addEventListener("squeeze",onSessionEvent),k.addEventListener("squeezestart",onSessionEvent),k.addEventListener("squeezeend",onSessionEvent),k.addEventListener("end",onSessionEnd),k.addEventListener("inputsourceschange",onInputSourcesChange),!0===H.xrCompatible){X.n=1;break}return X.n=1,l.makeXRCompatible();case 1:return Y=e.getPixelRatio(),e.getSize(K),z&&"createProjectionLayer"in XRWebGLBinding.prototype?(B=null,G=null,j=null,H.depth&&(j=H.stencil?l.DEPTH24_STENCIL8:l.DEPTH_COMPONENT24,B=H.stencil?vd:pd,G=H.stencil?cd:ad),q={colorFormat:l.RGBA8,depthFormat:j,scaleFactor:E},O=this.getBinding(),L=O.createProjectionLayer(q),k.updateRenderState({layers:[L]}),e.setPixelRatio(1),e.setSize(L.textureWidth,L.textureHeight,!1),W=new Pf(L.textureWidth,L.textureHeight,{format:fd,type:ed,depthTexture:new rg(L.textureWidth,L.textureHeight,G,void 0,void 0,void 0,void 0,void 0,void 0,B),stencilBuffer:H.stencil,colorSpace:e.outputColorSpace,samples:H.antialias?4:0,resolveDepthBuffer:!1===L.ignoreDepthValues,resolveStencilBuffer:!1===L.ignoreDepthValues})):(D={antialias:H.antialias,alpha:!0,depth:H.depth,stencil:H.stencil,framebufferScaleFactor:E},U=new XRWebGLLayer(k,l,D),k.updateRenderState({baseLayer:U}),e.setPixelRatio(1),e.setSize(U.framebufferWidth,U.framebufferHeight,!1),W=new Pf(U.framebufferWidth,U.framebufferHeight,{format:fd,type:ed,colorSpace:e.outputColorSpace,stencilBuffer:H.stencil,resolveDepthBuffer:!1===U.ignoreDepthValues,resolveStencilBuffer:!1===U.ignoreDepthValues})),W.isXRRenderTarget=!0,this.setFoveation(R),I=null,X.n=2,k.requestReferenceSpace(M);case 2:T=X.v,ae.setContext(k),ae.start(),S.isPresenting=!0,S.dispatchEvent({type:"sessionstart"});case 3:return X.a(2)}},_callee218,this)}));return function(e){return _.apply(this,arguments)}}(),_.getEnvironmentBlendMode=function(){if(null!==k)return k.environmentBlendMode},_.getDepthTexture=function(){return G.getDepthTexture()};var re=new pf,ne=new pf;function updateCamera(e,l){null===l?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(l.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}_.updateCamera=function(e){if(null!==k){var l=e.near,_=e.far;null!==G.texture&&(G.depthNear>0&&(l=G.depthNear),G.depthFar>0&&(_=G.depthFar)),$.near=J.near=Q.near=l,$.far=J.far=Q.far=_,ee===$.near&&te===$.far||(k.updateRenderState({depthNear:$.near,depthFar:$.far}),ee=$.near,te=$.far),$.layers.mask=6|e.layers.mask,Q.layers.mask=3&$.layers.mask,J.layers.mask=5&$.layers.mask;var S=e.parent,E=$.cameras;updateCamera($,S);for(var T=0;T<E.length;T++)updateCamera(E[T],S);2===E.length?function(e,l,_){re.setFromMatrixPosition(l.matrixWorld),ne.setFromMatrixPosition(_.matrixWorld);var S=re.distanceTo(ne),k=l.projectionMatrix.elements,E=_.projectionMatrix.elements,T=k[14]/(k[10]-1),M=k[14]/(k[10]+1),R=(k[9]+1)/k[5],I=(k[9]-1)/k[5],D=(k[8]-1)/k[0],O=(E[8]+1)/E[0],L=T*D,U=T*O,B=S/(-D+O),z=B*-D;if(l.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(z),e.translateZ(B),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert(),-1===k[10])e.projectionMatrix.copy(l.projectionMatrix),e.projectionMatrixInverse.copy(l.projectionMatrixInverse);else{var G=T+B,j=M+B,H=L-z,V=U+(S-z),W=R*M/j*G,q=I*M/j*G;e.projectionMatrix.makePerspective(H,V,W,q,G,j),e.projectionMatrixInverse.copy(e.projectionMatrix).invert()}}($,Q,J):$.projectionMatrix.copy(Q.projectionMatrix),function(e,l,_){null===_?e.matrix.copy(l.matrixWorld):(e.matrix.copy(_.matrixWorld),e.matrix.invert(),e.matrix.multiply(l.matrixWorld));e.matrix.decompose(e.position,e.quaternion,e.scale),e.updateMatrixWorld(!0),e.projectionMatrix.copy(l.projectionMatrix),e.projectionMatrixInverse.copy(l.projectionMatrixInverse),e.isPerspectiveCamera&&(e.fov=2*hf*Math.atan(1/e.projectionMatrix.elements[5]),e.zoom=1)}(e,$,S)}},_.getCamera=function(){return $},_.getFoveation=function(){if(null!==L||null!==U)return R},_.setFoveation=function(e){R=e,null!==L&&(L.fixedFoveation=e),null!==U&&void 0!==U.fixedFoveation&&(U.fixedFoveation=e)},_.hasDepthSensing=function(){return null!==G.texture},_.getDepthSensingMesh=function(){return G.getMesh($)},_.getCameraTexture=function(e){return j[e]};var ie=null;var ae=new WebGLAnimation;return ae.setAnimationLoop(function(l,_){if(D=_.getViewerPose(I||T),B=_,null!==D){var E=D.views;null!==U&&(e.setRenderTargetFramebuffer(W,U.framebuffer),e.setRenderTarget(W));var M=!1;E.length!==$.cameras.length&&($.cameras.length=0,M=!0);for(var R=0;R<E.length;R++){var H=E[R],V=null;if(null!==U)V=U.getViewport(H);else{var K=O.getViewSubImage(L,H);V=K.viewport,0===R&&(e.setRenderTargetTextures(W,K.colorTexture,K.depthStencilTexture),e.setRenderTarget(W))}var Y=Z[R];void 0===Y&&((Y=new Fv).layers.enable(R),Y.viewport=new Rf,Z[R]=Y),Y.matrix.fromArray(H.transform.matrix),Y.matrix.decompose(Y.position,Y.quaternion,Y.scale),Y.projectionMatrix.fromArray(H.projectionMatrix),Y.projectionMatrixInverse.copy(Y.projectionMatrix).invert(),Y.viewport.set(V.x,V.y,V.width,V.height),0===R&&($.matrix.copy(Y.matrix),$.matrix.decompose($.position,$.quaternion,$.scale)),!0===M&&$.cameras.push(Y)}var Q=k.enabledFeatures;if(Q&&Q.includes("depth-sensing")&&"gpu-optimized"==k.depthUsage&&z){var J=(O=S.getBinding()).getDepthInformation(E[0]);J&&J.isValid&&J.texture&&G.init(J,k.renderState)}if(Q&&Q.includes("camera-access")&&z){e.state.unbindTexture(),O=S.getBinding();for(var ee=0;ee<E.length;ee++){var te=E[ee].camera;if(te){var re=j[te];re||(re=new ng,j[te]=re);var ne=O.getCameraImage(te);re.sourceTexture=ne}}}}for(var ae=0;ae<q.length;ae++){var oe=X[ae],se=q[ae];null!==oe&&void 0!==se&&se.update(oe,_,I||T)}ie&&ie(l,_),_.detectedPlanes&&S.dispatchEvent({type:"planesdetected",data:_}),B=null}),_.setAnimationLoop=function(e){ie=e},_.dispose=function(){},_}return _inherits(WebXRManager,e),_createClass3(WebXRManager)}(uf),wm=new mp,xm=new sp;function WebGLMaterials(e,l){function refreshTransformUniform(e,l){!0===e.matrixAutoUpdate&&e.updateMatrix(),l.value.copy(e.matrix)}function refreshUniformsCommon(e,_){e.opacity.value=_.opacity,_.color&&e.diffuse.value.copy(_.color),_.emissive&&e.emissive.value.copy(_.emissive).multiplyScalar(_.emissiveIntensity),_.map&&(e.map.value=_.map,refreshTransformUniform(_.map,e.mapTransform)),_.alphaMap&&(e.alphaMap.value=_.alphaMap,refreshTransformUniform(_.alphaMap,e.alphaMapTransform)),_.bumpMap&&(e.bumpMap.value=_.bumpMap,refreshTransformUniform(_.bumpMap,e.bumpMapTransform),e.bumpScale.value=_.bumpScale,1===_.side&&(e.bumpScale.value*=-1)),_.normalMap&&(e.normalMap.value=_.normalMap,refreshTransformUniform(_.normalMap,e.normalMapTransform),e.normalScale.value.copy(_.normalScale),1===_.side&&e.normalScale.value.negate()),_.displacementMap&&(e.displacementMap.value=_.displacementMap,refreshTransformUniform(_.displacementMap,e.displacementMapTransform),e.displacementScale.value=_.displacementScale,e.displacementBias.value=_.displacementBias),_.emissiveMap&&(e.emissiveMap.value=_.emissiveMap,refreshTransformUniform(_.emissiveMap,e.emissiveMapTransform)),_.specularMap&&(e.specularMap.value=_.specularMap,refreshTransformUniform(_.specularMap,e.specularMapTransform)),_.alphaTest>0&&(e.alphaTest.value=_.alphaTest);var S=l.get(_),k=S.envMap,E=S.envMapRotation;k&&(e.envMap.value=k,wm.copy(E),wm.x*=-1,wm.y*=-1,wm.z*=-1,k.isCubeTexture&&!1===k.isRenderTargetTexture&&(wm.y*=-1,wm.z*=-1),e.envMapRotation.value.setFromMatrix4(xm.makeRotationFromEuler(wm)),e.flipEnvMap.value=k.isCubeTexture&&!1===k.isRenderTargetTexture?-1:1,e.reflectivity.value=_.reflectivity,e.ior.value=_.ior,e.refractionRatio.value=_.refractionRatio),_.lightMap&&(e.lightMap.value=_.lightMap,e.lightMapIntensity.value=_.lightMapIntensity,refreshTransformUniform(_.lightMap,e.lightMapTransform)),_.aoMap&&(e.aoMap.value=_.aoMap,e.aoMapIntensity.value=_.aoMapIntensity,refreshTransformUniform(_.aoMap,e.aoMapTransform))}return{refreshFogUniforms:function(l,_){_.color.getRGB(l.fogColor.value,getUnlitUniformColorSpace(e)),_.isFog?(l.fogNear.value=_.near,l.fogFar.value=_.far):_.isFogExp2&&(l.fogDensity.value=_.density)},refreshMaterialUniforms:function(e,_,S,k,E){_.isMeshBasicMaterial||_.isMeshLambertMaterial?refreshUniformsCommon(e,_):_.isMeshToonMaterial?(refreshUniformsCommon(e,_),function(e,l){l.gradientMap&&(e.gradientMap.value=l.gradientMap)}(e,_)):_.isMeshPhongMaterial?(refreshUniformsCommon(e,_),function(e,l){e.specular.value.copy(l.specular),e.shininess.value=Math.max(l.shininess,1e-4)}(e,_)):_.isMeshStandardMaterial?(refreshUniformsCommon(e,_),function(e,l){e.metalness.value=l.metalness,l.metalnessMap&&(e.metalnessMap.value=l.metalnessMap,refreshTransformUniform(l.metalnessMap,e.metalnessMapTransform));e.roughness.value=l.roughness,l.roughnessMap&&(e.roughnessMap.value=l.roughnessMap,refreshTransformUniform(l.roughnessMap,e.roughnessMapTransform));l.envMap&&(e.envMapIntensity.value=l.envMapIntensity)}(e,_),_.isMeshPhysicalMaterial&&function(e,l,_){e.ior.value=l.ior,l.sheen>0&&(e.sheenColor.value.copy(l.sheenColor).multiplyScalar(l.sheen),e.sheenRoughness.value=l.sheenRoughness,l.sheenColorMap&&(e.sheenColorMap.value=l.sheenColorMap,refreshTransformUniform(l.sheenColorMap,e.sheenColorMapTransform)),l.sheenRoughnessMap&&(e.sheenRoughnessMap.value=l.sheenRoughnessMap,refreshTransformUniform(l.sheenRoughnessMap,e.sheenRoughnessMapTransform)));l.clearcoat>0&&(e.clearcoat.value=l.clearcoat,e.clearcoatRoughness.value=l.clearcoatRoughness,l.clearcoatMap&&(e.clearcoatMap.value=l.clearcoatMap,refreshTransformUniform(l.clearcoatMap,e.clearcoatMapTransform)),l.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=l.clearcoatRoughnessMap,refreshTransformUniform(l.clearcoatRoughnessMap,e.clearcoatRoughnessMapTransform)),l.clearcoatNormalMap&&(e.clearcoatNormalMap.value=l.clearcoatNormalMap,refreshTransformUniform(l.clearcoatNormalMap,e.clearcoatNormalMapTransform),e.clearcoatNormalScale.value.copy(l.clearcoatNormalScale),1===l.side&&e.clearcoatNormalScale.value.negate()));l.dispersion>0&&(e.dispersion.value=l.dispersion);l.iridescence>0&&(e.iridescence.value=l.iridescence,e.iridescenceIOR.value=l.iridescenceIOR,e.iridescenceThicknessMinimum.value=l.iridescenceThicknessRange[0],e.iridescenceThicknessMaximum.value=l.iridescenceThicknessRange[1],l.iridescenceMap&&(e.iridescenceMap.value=l.iridescenceMap,refreshTransformUniform(l.iridescenceMap,e.iridescenceMapTransform)),l.iridescenceThicknessMap&&(e.iridescenceThicknessMap.value=l.iridescenceThicknessMap,refreshTransformUniform(l.iridescenceThicknessMap,e.iridescenceThicknessMapTransform)));l.transmission>0&&(e.transmission.value=l.transmission,e.transmissionSamplerMap.value=_.texture,e.transmissionSamplerSize.value.set(_.width,_.height),l.transmissionMap&&(e.transmissionMap.value=l.transmissionMap,refreshTransformUniform(l.transmissionMap,e.transmissionMapTransform)),e.thickness.value=l.thickness,l.thicknessMap&&(e.thicknessMap.value=l.thicknessMap,refreshTransformUniform(l.thicknessMap,e.thicknessMapTransform)),e.attenuationDistance.value=l.attenuationDistance,e.attenuationColor.value.copy(l.attenuationColor));l.anisotropy>0&&(e.anisotropyVector.value.set(l.anisotropy*Math.cos(l.anisotropyRotation),l.anisotropy*Math.sin(l.anisotropyRotation)),l.anisotropyMap&&(e.anisotropyMap.value=l.anisotropyMap,refreshTransformUniform(l.anisotropyMap,e.anisotropyMapTransform)));e.specularIntensity.value=l.specularIntensity,e.specularColor.value.copy(l.specularColor),l.specularColorMap&&(e.specularColorMap.value=l.specularColorMap,refreshTransformUniform(l.specularColorMap,e.specularColorMapTransform));l.specularIntensityMap&&(e.specularIntensityMap.value=l.specularIntensityMap,refreshTransformUniform(l.specularIntensityMap,e.specularIntensityMapTransform))}(e,_,E)):_.isMeshMatcapMaterial?(refreshUniformsCommon(e,_),function(e,l){l.matcap&&(e.matcap.value=l.matcap)}(e,_)):_.isMeshDepthMaterial?refreshUniformsCommon(e,_):_.isMeshDistanceMaterial?(refreshUniformsCommon(e,_),function(e,_){var S=l.get(_).light;e.referencePosition.value.setFromMatrixPosition(S.matrixWorld),e.nearDistance.value=S.shadow.camera.near,e.farDistance.value=S.shadow.camera.far}(e,_)):_.isMeshNormalMaterial?refreshUniformsCommon(e,_):_.isLineBasicMaterial?(function(e,l){e.diffuse.value.copy(l.color),e.opacity.value=l.opacity,l.map&&(e.map.value=l.map,refreshTransformUniform(l.map,e.mapTransform))}(e,_),_.isLineDashedMaterial&&function(e,l){e.dashSize.value=l.dashSize,e.totalSize.value=l.dashSize+l.gapSize,e.scale.value=l.scale}(e,_)):_.isPointsMaterial?function(e,l,_,S){e.diffuse.value.copy(l.color),e.opacity.value=l.opacity,e.size.value=l.size*_,e.scale.value=.5*S,l.map&&(e.map.value=l.map,refreshTransformUniform(l.map,e.uvTransform));l.alphaMap&&(e.alphaMap.value=l.alphaMap,refreshTransformUniform(l.alphaMap,e.alphaMapTransform));l.alphaTest>0&&(e.alphaTest.value=l.alphaTest)}(e,_,S,k):_.isSpriteMaterial?function(e,l){e.diffuse.value.copy(l.color),e.opacity.value=l.opacity,e.rotation.value=l.rotation,l.map&&(e.map.value=l.map,refreshTransformUniform(l.map,e.mapTransform));l.alphaMap&&(e.alphaMap.value=l.alphaMap,refreshTransformUniform(l.alphaMap,e.alphaMapTransform));l.alphaTest>0&&(e.alphaTest.value=l.alphaTest)}(e,_):_.isShadowMaterial?(e.color.value.copy(_.color),e.opacity.value=_.opacity):_.isShaderMaterial&&(_.uniformsNeedUpdate=!1)}}}function WebGLUniformsGroups(e,l,_,S){var k={},E={},T=[],M=e.getParameter(e.MAX_UNIFORM_BUFFER_BINDINGS);function hasUniformChanged(e,l,_,S){var k=e.value,E=l+"_"+_;if(void 0===S[E])return S[E]="number"==typeof k||"boolean"==typeof k?k:k.clone(),!0;var T=S[E];if("number"==typeof k||"boolean"==typeof k){if(T!==k)return S[E]=k,!0}else if(!1===T.equals(k))return T.copy(k),!0;return!1}function getUniformSize(e){var l={boundary:0,storage:0};return"number"==typeof e||"boolean"==typeof e?(l.boundary=4,l.storage=4):e.isVector2?(l.boundary=8,l.storage=8):e.isVector3||e.isColor?(l.boundary=16,l.storage=12):e.isVector4?(l.boundary=16,l.storage=16):e.isMatrix3?(l.boundary=48,l.storage=48):e.isMatrix4?(l.boundary=64,l.storage=64):e.isTexture,l}function onUniformsGroupsDispose(l){var _=l.target;_.removeEventListener("dispose",onUniformsGroupsDispose);var S=T.indexOf(_.__bindingPointIndex);T.splice(S,1),e.deleteBuffer(k[_.id]),delete k[_.id],delete E[_.id]}return{bind:function(e,l){var _=l.program;S.uniformBlockBinding(e,_)},update:function(_,R){var I=k[_.id];void 0===I&&(!function(e){for(var l=e.uniforms,_=0,S=16,k=0,E=l.length;k<E;k++)for(var T=Array.isArray(l[k])?l[k]:[l[k]],M=0,R=T.length;M<R;M++)for(var I=T[M],D=Array.isArray(I.value)?I.value:[I.value],O=0,L=D.length;O<L;O++){var U=getUniformSize(D[O]),B=_%S,z=B%U.boundary,G=B+z;_+=z,0!==G&&S-G<U.storage&&(_+=S-G),I.__data=new Float32Array(U.storage/Float32Array.BYTES_PER_ELEMENT),I.__offset=_,_+=U.storage}var j=_%S;j>0&&(_+=S-j);e.__size=_,e.__cache={}}(_),I=function(l){var _=function(){for(var e=0;e<M;e++)if(-1===T.indexOf(e))return T.push(e),e;return 0}();l.__bindingPointIndex=_;var S=e.createBuffer(),k=l.__size,E=l.usage;return e.bindBuffer(e.UNIFORM_BUFFER,S),e.bufferData(e.UNIFORM_BUFFER,k,E),e.bindBuffer(e.UNIFORM_BUFFER,null),e.bindBufferBase(e.UNIFORM_BUFFER,_,S),S}(_),k[_.id]=I,_.addEventListener("dispose",onUniformsGroupsDispose));var D=R.program;S.updateUBOMapping(_,D);var O=l.render.frame;E[_.id]!==O&&(!function(l){var _=k[l.id],S=l.uniforms,E=l.__cache;e.bindBuffer(e.UNIFORM_BUFFER,_);for(var T=0,M=S.length;T<M;T++)for(var R=Array.isArray(S[T])?S[T]:[S[T]],I=0,D=R.length;I<D;I++){var O=R[I];if(!0===hasUniformChanged(O,T,I,E)){for(var L=O.__offset,U=Array.isArray(O.value)?O.value:[O.value],B=0,z=0;z<U.length;z++){var G=U[z],j=getUniformSize(G);"number"==typeof G||"boolean"==typeof G?(O.__data[0]=G,e.bufferSubData(e.UNIFORM_BUFFER,L+B,O.__data)):G.isMatrix3?(O.__data[0]=G.elements[0],O.__data[1]=G.elements[1],O.__data[2]=G.elements[2],O.__data[3]=0,O.__data[4]=G.elements[3],O.__data[5]=G.elements[4],O.__data[6]=G.elements[5],O.__data[7]=0,O.__data[8]=G.elements[6],O.__data[9]=G.elements[7],O.__data[10]=G.elements[8],O.__data[11]=0):(G.toArray(O.__data,B),B+=j.storage/Float32Array.BYTES_PER_ELEMENT)}e.bufferSubData(e.UNIFORM_BUFFER,L,O.__data)}}e.bindBuffer(e.UNIFORM_BUFFER,null)}(_),E[_.id]=O)},dispose:function(){for(var l in k)e.deleteBuffer(k[l]);T=[],k={},E={}}}}var km=function(){return _createClass3(function WebGLRenderer(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck3(this,WebGLRenderer);var l,_=e.canvas,S=void 0===_?function(){var e=createElementNS("canvas");return e.style.display="block",e}():_,k=e.context,E=void 0===k?null:k,T=e.depth,M=void 0===T||T,R=e.stencil,I=void 0!==R&&R,D=e.alpha,O=void 0!==D&&D,L=e.antialias,U=void 0!==L&&L,B=e.premultipliedAlpha,z=void 0===B||B,G=e.preserveDrawingBuffer,j=void 0!==G&&G,H=e.powerPreference,V=void 0===H?"default":H,W=e.failIfMajorPerformanceCaveat,q=void 0!==W&&W,X=e.reversedDepthBuffer,K=void 0!==X&&X;if(this.isWebGLRenderer=!0,null!==E){if("undefined"!=typeof WebGLRenderingContext&&E instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");l=E.getContextAttributes().alpha}else l=O;var Y=new Uint32Array(4),Q=new Int32Array(4),J=null,Z=null,$=[],ee=[];this.domElement=S,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=0,this.toneMappingExposure=1,this.transmissionResolutionScale=1;var te=this,re=!1;this._outputColorSpace=$d;var ne=0,ie=0,ae=null,oe=-1,se=null,ue=new Rf,le=new Rf,ce=null,he=new Zp(0),de=0,fe=S.width,pe=S.height,ve=1,ge=null,me=null,ye=new Rf(0,0,fe,pe),_e=new Rf(0,0,fe,pe),be=!1,Se=new tg,we=!1,xe=!1,ke=new sp,Ae=new pf,Ee=new Rf,Ce={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0},Te=!1;function getTargetPixelRatio(){return null===ae?ve:1}var Me,Re,Ie,Pe,De,Oe,Le,Ue,Fe,Ne,Be,ze,Ge,je,He,Ve,We,qe,Xe,Ke,Ye,Qe,Je,Ze,$e=E;function getContext(e,l){return S.getContext(e,l)}try{var et={alpha:!0,depth:M,stencil:I,antialias:U,premultipliedAlpha:z,preserveDrawingBuffer:j,powerPreference:V,failIfMajorPerformanceCaveat:q};if("setAttribute"in S&&S.setAttribute("data-engine","three.js r".concat(zh)),S.addEventListener("webglcontextlost",onContextLost,!1),S.addEventListener("webglcontextrestored",onContextRestore,!1),S.addEventListener("webglcontextcreationerror",onContextCreationError,!1),null===$e){var tt="webgl2";if(null===($e=getContext(tt,et)))throw getContext(tt)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(ut){throw ut}function initGLContext(){(Me=new WebGLExtensions($e)).init(),Qe=new WebGLUtils($e,Me),Re=new WebGLCapabilities($e,Me,e,Qe),Ie=new WebGLState($e,Me),Re.reversedDepthBuffer&&K&&Ie.buffers.depth.setReversed(!0),Pe=new WebGLInfo($e),De=new WebGLProperties,Oe=new WebGLTextures($e,Me,Ie,De,Re,Qe,Pe),Le=new WebGLCubeMaps(te),Ue=new WebGLCubeUVMaps(te),Fe=new WebGLAttributes($e),Je=new WebGLBindingStates($e,Fe),Ne=new WebGLGeometries($e,Fe,Pe,Je),Be=new WebGLObjects($e,Ne,Fe,Pe),Xe=new WebGLMorphtargets($e,Re,Oe),Ve=new WebGLClipping(De),ze=new WebGLPrograms(te,Le,Ue,Me,Re,Je,Ve),Ge=new WebGLMaterials(te,De),je=new WebGLRenderLists,He=new WebGLRenderStates(Me),qe=new WebGLBackground(te,Le,Ue,Ie,Be,l,z),We=new WebGLShadowMap(te,Be,Re),Ze=new WebGLUniformsGroups($e,Pe,Re,Ie),Ke=new WebGLBufferRenderer($e,Me,Pe),Ye=new WebGLIndexedBufferRenderer($e,Me,Pe),Pe.programs=ze.programs,te.capabilities=Re,te.extensions=Me,te.properties=De,te.renderLists=je,te.shadowMap=We,te.state=Ie,te.info=Pe}initGLContext();var rt=new Sm(te,$e);function onContextLost(e){e.preventDefault(),re=!0}function onContextRestore(){re=!1;var e=Pe.autoReset,l=We.enabled,_=We.autoUpdate,S=We.needsUpdate,k=We.type;initGLContext(),Pe.autoReset=e,We.enabled=l,We.autoUpdate=_,We.needsUpdate=S,We.type=k}function onContextCreationError(e){}function onMaterialDispose(e){var l=e.target;l.removeEventListener("dispose",onMaterialDispose),function(e){(function(e){var l=De.get(e).programs;void 0!==l&&(l.forEach(function(e){ze.releaseProgram(e)}),e.isShaderMaterial&&ze.releaseShaderCache(e))})(e),De.remove(e)}(l)}function prepareMaterial(e,l,_){!0===e.transparent&&e.side===Gh&&!1===e.forceSinglePass?(e.side=1,e.needsUpdate=!0,getProgram(e,l,_),e.side=0,e.needsUpdate=!0,getProgram(e,l,_),e.side=Gh):getProgram(e,l,_)}this.xr=rt,this.getContext=function(){return $e},this.getContextAttributes=function(){return $e.getContextAttributes()},this.forceContextLoss=function(){var e=Me.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){var e=Me.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return ve},this.setPixelRatio=function(e){void 0!==e&&(ve=e,this.setSize(fe,pe,!1))},this.getSize=function(e){return e.set(fe,pe)},this.setSize=function(e,l){var _=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];rt.isPresenting||(fe=e,pe=l,S.width=Math.floor(e*ve),S.height=Math.floor(l*ve),!0===_&&(S.style.width=e+"px",S.style.height=l+"px"),this.setViewport(0,0,e,l))},this.getDrawingBufferSize=function(e){return e.set(fe*ve,pe*ve).floor()},this.setDrawingBufferSize=function(e,l,_){fe=e,pe=l,ve=_,S.width=Math.floor(e*_),S.height=Math.floor(l*_),this.setViewport(0,0,e,l)},this.getCurrentViewport=function(e){return e.copy(ue)},this.getViewport=function(e){return e.copy(ye)},this.setViewport=function(e,l,_,S){e.isVector4?ye.set(e.x,e.y,e.z,e.w):ye.set(e,l,_,S),Ie.viewport(ue.copy(ye).multiplyScalar(ve).round())},this.getScissor=function(e){return e.copy(_e)},this.setScissor=function(e,l,_,S){e.isVector4?_e.set(e.x,e.y,e.z,e.w):_e.set(e,l,_,S),Ie.scissor(le.copy(_e).multiplyScalar(ve).round())},this.getScissorTest=function(){return be},this.setScissorTest=function(e){Ie.setScissorTest(be=e)},this.setOpaqueSort=function(e){ge=e},this.setTransparentSort=function(e){me=e},this.getClearColor=function(e){return e.copy(qe.getClearColor())},this.setClearColor=function(){var e;(e=qe).setClearColor.apply(e,arguments)},this.getClearAlpha=function(){return qe.getClearAlpha()},this.setClearAlpha=function(){var e;(e=qe).setClearAlpha.apply(e,arguments)},this.clear=function(){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],l=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],_=0;if(!(arguments.length>0&&void 0!==arguments[0])||arguments[0]){var S=!1;if(null!==ae){var k=ae.texture.format;S=k===yd||k===md||k===gd}if(S){var E=ae.texture.type,T=E===ed||E===ad||E===nd||E===cd||E===ud||E===ld,M=qe.getClearColor(),R=qe.getClearAlpha(),I=M.r,D=M.g,O=M.b;T?(Y[0]=I,Y[1]=D,Y[2]=O,Y[3]=R,$e.clearBufferuiv($e.COLOR,0,Y)):(Q[0]=I,Q[1]=D,Q[2]=O,Q[3]=R,$e.clearBufferiv($e.COLOR,0,Q))}else _|=$e.COLOR_BUFFER_BIT}e&&(_|=$e.DEPTH_BUFFER_BIT),l&&(_|=$e.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),$e.clear(_)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){S.removeEventListener("webglcontextlost",onContextLost,!1),S.removeEventListener("webglcontextrestored",onContextRestore,!1),S.removeEventListener("webglcontextcreationerror",onContextCreationError,!1),qe.dispose(),je.dispose(),He.dispose(),De.dispose(),Le.dispose(),Ue.dispose(),Be.dispose(),Je.dispose(),Ze.dispose(),ze.dispose(),rt.dispose(),rt.removeEventListener("sessionstart",onXRSessionStart),rt.removeEventListener("sessionend",onXRSessionEnd),it.stop()},this.renderBufferDirect=function(e,l,_,S,k,E){null===l&&(l=Ce);var T=k.isMesh&&k.matrixWorld.determinant()<0,M=function(e,l,_,S,k){!0!==l.isScene&&(l=Ce);Oe.resetTextureUnits();var E=l.fog,T=S.isMeshStandardMaterial?l.environment:null,M=null===ae?te.outputColorSpace:!0===ae.isXRRenderTarget?ae.texture.colorSpace:ef,R=(S.isMeshStandardMaterial?Ue:Le).get(S.envMap||T),I=!0===S.vertexColors&&!!_.attributes.color&&4===_.attributes.color.itemSize,D=!!_.attributes.tangent&&(!!S.normalMap||S.anisotropy>0),O=!!_.morphAttributes.position,L=!!_.morphAttributes.normal,U=!!_.morphAttributes.color,B=0;S.toneMapped&&(null!==ae&&!0!==ae.isXRRenderTarget||(B=te.toneMapping));var z=_.morphAttributes.position||_.morphAttributes.normal||_.morphAttributes.color,G=void 0!==z?z.length:0,j=De.get(S),H=Z.state.lights;if(!0===we&&(!0===xe||e!==se)){var V=e===se&&S.id===oe;Ve.setState(S,e,V)}var W=!1;S.version===j.__version?j.needsLights&&j.lightsStateVersion!==H.state.version||j.outputColorSpace!==M||k.isBatchedMesh&&!1===j.batching?W=!0:k.isBatchedMesh||!0!==j.batching?k.isBatchedMesh&&!0===j.batchingColor&&null===k.colorTexture||k.isBatchedMesh&&!1===j.batchingColor&&null!==k.colorTexture||k.isInstancedMesh&&!1===j.instancing?W=!0:k.isInstancedMesh||!0!==j.instancing?k.isSkinnedMesh&&!1===j.skinning?W=!0:k.isSkinnedMesh||!0!==j.skinning?k.isInstancedMesh&&!0===j.instancingColor&&null===k.instanceColor||k.isInstancedMesh&&!1===j.instancingColor&&null!==k.instanceColor||k.isInstancedMesh&&!0===j.instancingMorph&&null===k.morphTexture||k.isInstancedMesh&&!1===j.instancingMorph&&null!==k.morphTexture||j.envMap!==R||!0===S.fog&&j.fog!==E?W=!0:void 0===j.numClippingPlanes||j.numClippingPlanes===Ve.numPlanes&&j.numIntersection===Ve.numIntersection?(j.vertexAlphas!==I||j.vertexTangents!==D||j.morphTargets!==O||j.morphNormals!==L||j.morphColors!==U||j.toneMapping!==B||j.morphTargetsCount!==G)&&(W=!0):W=!0:W=!0:W=!0:W=!0:(W=!0,j.__version=S.version);var q=j.currentProgram;!0===W&&(q=getProgram(S,l,k));var X=!1,K=!1,Y=!1,Q=q.getUniforms(),J=j.uniforms;Ie.useProgram(q.program)&&(X=!0,K=!0,Y=!0);S.id!==oe&&(oe=S.id,K=!0);if(X||se!==e){Ie.buffers.depth.getReversed()&&!0!==e.reversedDepth&&(e._reversedDepth=!0,e.updateProjectionMatrix()),Q.setValue($e,"projectionMatrix",e.projectionMatrix),Q.setValue($e,"viewMatrix",e.matrixWorldInverse);var $=Q.map.cameraPosition;void 0!==$&&$.setValue($e,Ae.setFromMatrixPosition(e.matrixWorld)),Re.logarithmicDepthBuffer&&Q.setValue($e,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),(S.isMeshPhongMaterial||S.isMeshToonMaterial||S.isMeshLambertMaterial||S.isMeshBasicMaterial||S.isMeshStandardMaterial||S.isShaderMaterial)&&Q.setValue($e,"isOrthographic",!0===e.isOrthographicCamera),se!==e&&(se=e,K=!0,Y=!0)}if(k.isSkinnedMesh){Q.setOptional($e,k,"bindMatrix"),Q.setOptional($e,k,"bindMatrixInverse");var ee=k.skeleton;ee&&(null===ee.boneTexture&&ee.computeBoneTexture(),Q.setValue($e,"boneTexture",ee.boneTexture,Oe))}k.isBatchedMesh&&(Q.setOptional($e,k,"batchingTexture"),Q.setValue($e,"batchingTexture",k._matricesTexture,Oe),Q.setOptional($e,k,"batchingIdTexture"),Q.setValue($e,"batchingIdTexture",k._indirectTexture,Oe),Q.setOptional($e,k,"batchingColorTexture"),null!==k._colorsTexture&&Q.setValue($e,"batchingColorTexture",k._colorsTexture,Oe));var re=_.morphAttributes;void 0===re.position&&void 0===re.normal&&void 0===re.color||Xe.update(k,_,q);(K||j.receiveShadow!==k.receiveShadow)&&(j.receiveShadow=k.receiveShadow,Q.setValue($e,"receiveShadow",k.receiveShadow));S.isMeshGouraudMaterial&&null!==S.envMap&&(J.envMap.value=R,J.flipEnvMap.value=R.isCubeTexture&&!1===R.isRenderTargetTexture?-1:1);S.isMeshStandardMaterial&&null===S.envMap&&null!==l.environment&&(J.envMapIntensity.value=l.environmentIntensity);K&&(Q.setValue($e,"toneMappingExposure",te.toneMappingExposure),j.needsLights&&function(e,l){e.ambientLightColor.needsUpdate=l,e.lightProbe.needsUpdate=l,e.directionalLights.needsUpdate=l,e.directionalLightShadows.needsUpdate=l,e.pointLights.needsUpdate=l,e.pointLightShadows.needsUpdate=l,e.spotLights.needsUpdate=l,e.spotLightShadows.needsUpdate=l,e.rectAreaLights.needsUpdate=l,e.hemisphereLights.needsUpdate=l}(J,Y),E&&!0===S.fog&&Ge.refreshFogUniforms(J,E),Ge.refreshMaterialUniforms(J,S,ve,pe,Z.state.transmissionRenderTarget[e.id]),um.upload($e,getUniformList(j),J,Oe));S.isShaderMaterial&&!0===S.uniformsNeedUpdate&&(um.upload($e,getUniformList(j),J,Oe),S.uniformsNeedUpdate=!1);S.isSpriteMaterial&&Q.setValue($e,"center",k.center);if(Q.setValue($e,"modelViewMatrix",k.modelViewMatrix),Q.setValue($e,"normalMatrix",k.normalMatrix),Q.setValue($e,"modelMatrix",k.matrixWorld),S.isShaderMaterial||S.isRawShaderMaterial)for(var ne=S.uniformsGroups,ie=0,ue=ne.length;ie<ue;ie++){var le=ne[ie];Ze.update(le,q),Ze.bind(le,q)}return q}(e,l,_,S,k);Ie.setMaterial(S,T);var R=_.index,I=1;if(!0===S.wireframe){if(void 0===(R=Ne.getWireframeAttribute(_)))return;I=2}var D=_.drawRange,O=_.attributes.position,L=D.start*I,U=(D.start+D.count)*I;null!==E&&(L=Math.max(L,E.start*I),U=Math.min(U,(E.start+E.count)*I)),null!==R?(L=Math.max(L,0),U=Math.min(U,R.count)):null!=O&&(L=Math.max(L,0),U=Math.min(U,O.count));var B=U-L;if(!(B<0||B===1/0)){var z;Je.setup(k,S,M,_,R);var G=Ke;if(null!==R&&(z=Fe.get(R),(G=Ye).setIndex(z)),k.isMesh)!0===S.wireframe?(Ie.setLineWidth(S.wireframeLinewidth*getTargetPixelRatio()),G.setMode($e.LINES)):G.setMode($e.TRIANGLES);else if(k.isLine){var j=S.linewidth;void 0===j&&(j=1),Ie.setLineWidth(j*getTargetPixelRatio()),k.isLineSegments?G.setMode($e.LINES):k.isLineLoop?G.setMode($e.LINE_LOOP):G.setMode($e.LINE_STRIP)}else k.isPoints?G.setMode($e.POINTS):k.isSprite&&G.setMode($e.TRIANGLES);if(k.isBatchedMesh)if(null!==k._multiDrawInstances)warnOnce("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),G.renderMultiDrawInstances(k._multiDrawStarts,k._multiDrawCounts,k._multiDrawCount,k._multiDrawInstances);else if(Me.get("WEBGL_multi_draw"))G.renderMultiDraw(k._multiDrawStarts,k._multiDrawCounts,k._multiDrawCount);else for(var H=k._multiDrawStarts,V=k._multiDrawCounts,W=k._multiDrawCount,q=R?Fe.get(R).bytesPerElement:1,X=De.get(S).currentProgram.getUniforms(),K=0;K<W;K++)X.setValue($e,"_gl_DrawID",K),G.render(H[K]/q,V[K]);else if(k.isInstancedMesh)G.renderInstances(L,B,k.count);else if(_.isInstancedBufferGeometry){var Y=void 0!==_._maxInstanceCount?_._maxInstanceCount:1/0,Q=Math.min(_.instanceCount,Y);G.renderInstances(L,B,Q)}else G.render(L,B)}},this.compile=function(e,l){var _=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;null===_&&(_=e),(Z=He.get(_)).init(l),ee.push(Z),_.traverseVisible(function(e){e.isLight&&e.layers.test(l.layers)&&(Z.pushLight(e),e.castShadow&&Z.pushShadow(e))}),e!==_&&e.traverseVisible(function(e){e.isLight&&e.layers.test(l.layers)&&(Z.pushLight(e),e.castShadow&&Z.pushShadow(e))}),Z.setupLights();var S=new Set;return e.traverse(function(e){if(e.isMesh||e.isPoints||e.isLine||e.isSprite){var l=e.material;if(l)if(Array.isArray(l))for(var k=0;k<l.length;k++){var E=l[k];prepareMaterial(E,_,e),S.add(E)}else prepareMaterial(l,_,e),S.add(l)}}),Z=ee.pop(),S},this.compileAsync=function(e,l){var _=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,S=this.compile(e,l,_);return new Promise(function(l){function checkMaterialsReady(){S.forEach(function(e){De.get(e).currentProgram.isReady()&&S.delete(e)}),0!==S.size?setTimeout(checkMaterialsReady,10):l(e)}null!==Me.get("KHR_parallel_shader_compile")?checkMaterialsReady():setTimeout(checkMaterialsReady,10)})};var nt=null;function onXRSessionStart(){it.stop()}function onXRSessionEnd(){it.start()}var it=new WebGLAnimation;function projectObject(e,l,_,S){if(!1!==e.visible){if(e.layers.test(l.layers))if(e.isGroup)_=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(l);else if(e.isLight)Z.pushLight(e),e.castShadow&&Z.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||Se.intersectsSprite(e)){S&&Ee.setFromMatrixPosition(e.matrixWorld).applyMatrix4(ke);var k=Be.update(e),E=e.material;E.visible&&J.push(e,k,E,_,Ee.z,null)}}else if((e.isMesh||e.isLine||e.isPoints)&&(!e.frustumCulled||Se.intersectsObject(e))){var T=Be.update(e),M=e.material;if(S&&(void 0!==e.boundingSphere?(null===e.boundingSphere&&e.computeBoundingSphere(),Ee.copy(e.boundingSphere.center)):(null===T.boundingSphere&&T.computeBoundingSphere(),Ee.copy(T.boundingSphere.center)),Ee.applyMatrix4(e.matrixWorld).applyMatrix4(ke)),Array.isArray(M))for(var R=T.groups,I=0,D=R.length;I<D;I++){var O=R[I],L=M[O.materialIndex];L&&L.visible&&J.push(e,T,L,_,Ee.z,O)}else M.visible&&J.push(e,T,M,_,Ee.z,null)}for(var U=e.children,B=0,z=U.length;B<z;B++)projectObject(U[B],l,_,S)}}function renderScene(e,l,_,S){var k=e.opaque,E=e.transmissive,T=e.transparent;Z.setupLightsView(_),!0===we&&Ve.setGlobalState(te.clippingPlanes,_),S&&Ie.viewport(ue.copy(S)),k.length>0&&renderObjects(k,l,_),E.length>0&&renderObjects(E,l,_),T.length>0&&renderObjects(T,l,_),Ie.buffers.depth.setTest(!0),Ie.buffers.depth.setMask(!0),Ie.buffers.color.setMask(!0),Ie.setPolygonOffset(!1)}function renderTransmissionPass(e,l,_,S){if(null===(!0===_.isScene?_.overrideMaterial:null)){void 0===Z.state.transmissionRenderTarget[S.id]&&(Z.state.transmissionRenderTarget[S.id]=new Pf(1,1,{generateMipmaps:!0,type:Me.has("EXT_color_buffer_half_float")||Me.has("EXT_color_buffer_float")?sd:ed,minFilter:$h,samples:4,stencilBuffer:I,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:xf.workingColorSpace}));var k=Z.state.transmissionRenderTarget[S.id],E=S.viewport||ue;k.setSize(E.z*te.transmissionResolutionScale,E.w*te.transmissionResolutionScale);var T=te.getRenderTarget(),M=te.getActiveCubeFace(),R=te.getActiveMipmapLevel();te.setRenderTarget(k),te.getClearColor(he),(de=te.getClearAlpha())<1&&te.setClearColor(16777215,.5),te.clear(),Te&&qe.render(_);var D=te.toneMapping;te.toneMapping=0;var O=S.viewport;if(void 0!==S.viewport&&(S.viewport=void 0),Z.setupLightsView(S),!0===we&&Ve.setGlobalState(te.clippingPlanes,S),renderObjects(e,_,S),Oe.updateMultisampleRenderTarget(k),Oe.updateRenderTargetMipmap(k),!1===Me.has("WEBGL_multisampled_render_to_texture")){for(var L=!1,U=0,B=l.length;U<B;U++){var z=l[U],G=z.object,j=z.geometry,H=z.material,V=z.group;if(H.side===Gh&&G.layers.test(S.layers)){var W=H.side;H.side=1,H.needsUpdate=!0,renderObject(G,_,S,j,H,V),H.side=W,H.needsUpdate=!0,L=!0}}!0===L&&(Oe.updateMultisampleRenderTarget(k),Oe.updateRenderTargetMipmap(k))}te.setRenderTarget(T,M,R),te.setClearColor(he,de),void 0!==O&&(S.viewport=O),te.toneMapping=D}}function renderObjects(e,l,_){for(var S=!0===l.isScene?l.overrideMaterial:null,k=0,E=e.length;k<E;k++){var T=e[k],M=T.object,R=T.geometry,I=T.group,D=T.material;!0===D.allowOverride&&null!==S&&(D=S),M.layers.test(_.layers)&&renderObject(M,l,_,R,D,I)}}function renderObject(e,l,_,S,k,E){e.onBeforeRender(te,l,_,S,k,E),e.modelViewMatrix.multiplyMatrices(_.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),k.onBeforeRender(te,l,_,S,e,E),!0===k.transparent&&k.side===Gh&&!1===k.forceSinglePass?(k.side=1,k.needsUpdate=!0,te.renderBufferDirect(_,l,S,k,e,E),k.side=0,k.needsUpdate=!0,te.renderBufferDirect(_,l,S,k,e,E),k.side=Gh):te.renderBufferDirect(_,l,S,k,e,E),e.onAfterRender(te,l,_,S,k,E)}function getProgram(e,l,_){!0!==l.isScene&&(l=Ce);var S=De.get(e),k=Z.state.lights,E=Z.state.shadowsArray,T=k.state.version,M=ze.getParameters(e,k.state,E,l,_),R=ze.getProgramCacheKey(M),I=S.programs;S.environment=e.isMeshStandardMaterial?l.environment:null,S.fog=l.fog,S.envMap=(e.isMeshStandardMaterial?Ue:Le).get(e.envMap||S.environment),S.envMapRotation=null!==S.environment&&null===e.envMap?l.environmentRotation:e.envMapRotation,void 0===I&&(e.addEventListener("dispose",onMaterialDispose),I=new Map,S.programs=I);var D=I.get(R);if(void 0!==D){if(S.currentProgram===D&&S.lightsStateVersion===T)return updateCommonMaterialProperties(e,M),D}else M.uniforms=ze.getUniforms(e),e.onBeforeCompile(M,te),D=ze.acquireProgram(M,R),I.set(R,D),S.uniforms=M.uniforms;var O=S.uniforms;return(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(O.clippingPlanes=Ve.uniform),updateCommonMaterialProperties(e,M),S.needsLights=function(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}(e),S.lightsStateVersion=T,S.needsLights&&(O.ambientLightColor.value=k.state.ambient,O.lightProbe.value=k.state.probe,O.directionalLights.value=k.state.directional,O.directionalLightShadows.value=k.state.directionalShadow,O.spotLights.value=k.state.spot,O.spotLightShadows.value=k.state.spotShadow,O.rectAreaLights.value=k.state.rectArea,O.ltc_1.value=k.state.rectAreaLTC1,O.ltc_2.value=k.state.rectAreaLTC2,O.pointLights.value=k.state.point,O.pointLightShadows.value=k.state.pointShadow,O.hemisphereLights.value=k.state.hemi,O.directionalShadowMap.value=k.state.directionalShadowMap,O.directionalShadowMatrix.value=k.state.directionalShadowMatrix,O.spotShadowMap.value=k.state.spotShadowMap,O.spotLightMatrix.value=k.state.spotLightMatrix,O.spotLightMap.value=k.state.spotLightMap,O.pointShadowMap.value=k.state.pointShadowMap,O.pointShadowMatrix.value=k.state.pointShadowMatrix),S.currentProgram=D,S.uniformsList=null,D}function getUniformList(e){if(null===e.uniformsList){var l=e.currentProgram.getUniforms();e.uniformsList=um.seqWithValue(l.seq,e.uniforms)}return e.uniformsList}function updateCommonMaterialProperties(e,l){var _=De.get(e);_.outputColorSpace=l.outputColorSpace,_.batching=l.batching,_.batchingColor=l.batchingColor,_.instancing=l.instancing,_.instancingColor=l.instancingColor,_.instancingMorph=l.instancingMorph,_.skinning=l.skinning,_.morphTargets=l.morphTargets,_.morphNormals=l.morphNormals,_.morphColors=l.morphColors,_.morphTargetsCount=l.morphTargetsCount,_.numClippingPlanes=l.numClippingPlanes,_.numIntersection=l.numClipIntersection,_.vertexAlphas=l.vertexAlphas,_.vertexTangents=l.vertexTangents,_.toneMapping=l.toneMapping}it.setAnimationLoop(function(e){nt&&nt(e)}),"undefined"!=typeof self&&it.setContext(self),this.setAnimationLoop=function(e){nt=e,rt.setAnimationLoop(e),null===e?it.stop():it.start()},rt.addEventListener("sessionstart",onXRSessionStart),rt.addEventListener("sessionend",onXRSessionEnd),this.render=function(e,l){if((void 0===l||!0===l.isCamera)&&!0!==re){if(!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),null===l.parent&&!0===l.matrixWorldAutoUpdate&&l.updateMatrixWorld(),!0===rt.enabled&&!0===rt.isPresenting&&(!0===rt.cameraAutoUpdate&&rt.updateCamera(l),l=rt.getCamera()),!0===e.isScene&&e.onBeforeRender(te,e,l,ae),(Z=He.get(e,ee.length)).init(l),ee.push(Z),ke.multiplyMatrices(l.projectionMatrix,l.matrixWorldInverse),Se.setFromProjectionMatrix(ke,of,l.reversedDepth),xe=this.localClippingEnabled,we=Ve.init(this.clippingPlanes,xe),(J=je.get(e,$.length)).init(),$.push(J),!0===rt.enabled&&!0===rt.isPresenting){var _=te.xr.getDepthSensingMesh();null!==_&&projectObject(_,l,-1/0,te.sortObjects)}projectObject(e,l,0,te.sortObjects),J.finish(),!0===te.sortObjects&&J.sort(ge,me),(Te=!1===rt.enabled||!1===rt.isPresenting||!1===rt.hasDepthSensing())&&qe.addToRenderList(J,e),this.info.render.frame++,!0===we&&Ve.beginShadows();var S=Z.state.shadowsArray;We.render(S,e,l),!0===we&&Ve.endShadows(),!0===this.info.autoReset&&this.info.reset();var k=J.opaque,E=J.transmissive;if(Z.setupLights(),l.isArrayCamera){var T=l.cameras;if(E.length>0)for(var M=0,R=T.length;M<R;M++){renderTransmissionPass(k,E,e,T[M])}Te&&qe.render(e);for(var I=0,D=T.length;I<D;I++){var O=T[I];renderScene(J,e,O,O.viewport)}}else E.length>0&&renderTransmissionPass(k,E,e,l),Te&&qe.render(e),renderScene(J,e,l);null!==ae&&0===ie&&(Oe.updateMultisampleRenderTarget(ae),Oe.updateRenderTargetMipmap(ae)),!0===e.isScene&&e.onAfterRender(te,e,l),Je.resetDefaultState(),oe=-1,se=null,ee.pop(),ee.length>0?(Z=ee[ee.length-1],!0===we&&Ve.setGlobalState(te.clippingPlanes,Z.state.camera)):Z=null,$.pop(),J=$.length>0?$[$.length-1]:null}},this.getActiveCubeFace=function(){return ne},this.getActiveMipmapLevel=function(){return ie},this.getRenderTarget=function(){return ae},this.setRenderTargetTextures=function(e,l,_){var S=De.get(e);S.__autoAllocateDepthBuffer=!1===e.resolveDepthBuffer,!1===S.__autoAllocateDepthBuffer&&(S.__useRenderToTexture=!1),De.get(e.texture).__webglTexture=l,De.get(e.depthTexture).__webglTexture=S.__autoAllocateDepthBuffer?void 0:_,S.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(e,l){var _=De.get(e);_.__webglFramebuffer=l,_.__useDefaultFramebuffer=void 0===l};var at=$e.createFramebuffer();this.setRenderTarget=function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,_=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;ae=e,ne=l,ie=_;var S=!0,k=null,E=!1,T=!1;if(e){var M=De.get(e);if(void 0!==M.__useDefaultFramebuffer)Ie.bindFramebuffer($e.FRAMEBUFFER,null),S=!1;else if(void 0===M.__webglFramebuffer)Oe.setupRenderTarget(e);else if(M.__hasExternalTextures)Oe.rebindTextures(e,De.get(e.texture).__webglTexture,De.get(e.depthTexture).__webglTexture);else if(e.depthBuffer){var R=e.depthTexture;if(M.__boundDepthTexture!==R){if(null!==R&&De.has(R)&&(e.width!==R.image.width||e.height!==R.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");Oe.setupDepthRenderbuffer(e)}}var I=e.texture;(I.isData3DTexture||I.isDataArrayTexture||I.isCompressedArrayTexture)&&(T=!0);var D=De.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(k=Array.isArray(D[l])?D[l][_]:D[l],E=!0):k=e.samples>0&&!1===Oe.useMultisampledRTT(e)?De.get(e).__webglMultisampledFramebuffer:Array.isArray(D)?D[_]:D,ue.copy(e.viewport),le.copy(e.scissor),ce=e.scissorTest}else ue.copy(ye).multiplyScalar(ve).floor(),le.copy(_e).multiplyScalar(ve).floor(),ce=be;if(0!==_&&(k=at),Ie.bindFramebuffer($e.FRAMEBUFFER,k)&&S&&Ie.drawBuffers(e,k),Ie.viewport(ue),Ie.scissor(le),Ie.setScissorTest(ce),E){var O=De.get(e.texture);$e.framebufferTexture2D($e.FRAMEBUFFER,$e.COLOR_ATTACHMENT0,$e.TEXTURE_CUBE_MAP_POSITIVE_X+l,O.__webglTexture,_)}else if(T)for(var L=l,U=0;U<e.textures.length;U++){var B=De.get(e.textures[U]);$e.framebufferTextureLayer($e.FRAMEBUFFER,$e.COLOR_ATTACHMENT0+U,B.__webglTexture,_,L)}else if(null!==e&&0!==_){var z=De.get(e.texture);$e.framebufferTexture2D($e.FRAMEBUFFER,$e.COLOR_ATTACHMENT0,$e.TEXTURE_2D,z.__webglTexture,_)}oe=-1},this.readRenderTargetPixels=function(e,l,_,S,k,E,T){var M=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0;if(e&&e.isWebGLRenderTarget){var R=De.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==T&&(R=R[T]),R){Ie.bindFramebuffer($e.FRAMEBUFFER,R);try{var I=e.textures[M],D=I.format,O=I.type;if(!Re.textureFormatReadable(D))return;if(!Re.textureTypeReadable(O))return;l>=0&&l<=e.width-S&&_>=0&&_<=e.height-k&&(e.textures.length>1&&$e.readBuffer($e.COLOR_ATTACHMENT0+M),$e.readPixels(l,_,S,k,Qe.convert(D),Qe.convert(O),E))}finally{var L=null!==ae?De.get(ae).__webglFramebuffer:null;Ie.bindFramebuffer($e.FRAMEBUFFER,L)}}}},this.readRenderTargetPixelsAsync=function(){var e=_asyncToGenerator(_regenerator().m(function _callee219(e,l,_,S,k,E,T){var M,R,I,D,O,L,U,B,z=arguments;return _regenerator().w(function(G){for(;;)switch(G.n){case 0:if(M=z.length>7&&void 0!==z[7]?z[7]:0,e&&e.isWebGLRenderTarget){G.n=1;break}throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");case 1:if(R=De.get(e).__webglFramebuffer,e.isWebGLCubeRenderTarget&&void 0!==T&&(R=R[T]),!R){G.n=6;break}if(!(l>=0&&l<=e.width-S&&_>=0&&_<=e.height-k)){G.n=5;break}if(Ie.bindFramebuffer($e.FRAMEBUFFER,R),I=e.textures[M],D=I.format,O=I.type,Re.textureFormatReadable(D)){G.n=2;break}throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");case 2:if(Re.textureTypeReadable(O)){G.n=3;break}throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");case 3:return L=$e.createBuffer(),$e.bindBuffer($e.PIXEL_PACK_BUFFER,L),$e.bufferData($e.PIXEL_PACK_BUFFER,E.byteLength,$e.STREAM_READ),e.textures.length>1&&$e.readBuffer($e.COLOR_ATTACHMENT0+M),$e.readPixels(l,_,S,k,Qe.convert(D),Qe.convert(O),0),U=null!==ae?De.get(ae).__webglFramebuffer:null,Ie.bindFramebuffer($e.FRAMEBUFFER,U),B=$e.fenceSync($e.SYNC_GPU_COMMANDS_COMPLETE,0),$e.flush(),G.n=4,probeAsync($e,B,4);case 4:return $e.bindBuffer($e.PIXEL_PACK_BUFFER,L),$e.getBufferSubData($e.PIXEL_PACK_BUFFER,0,E),$e.deleteBuffer(L),$e.deleteSync(B),G.a(2,E);case 5:throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.");case 6:return G.a(2)}},_callee219)}));return function(l,_,S,k,E,T,M){return e.apply(this,arguments)}}(),this.copyFramebufferToTexture=function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,_=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,S=Math.pow(2,-_),k=Math.floor(e.image.width*S),E=Math.floor(e.image.height*S),T=null!==l?l.x:0,M=null!==l?l.y:0;Oe.setTexture2D(e,0),$e.copyTexSubImage2D($e.TEXTURE_2D,_,0,0,T,M,k,E),Ie.unbindTexture()};var ot=$e.createFramebuffer(),st=$e.createFramebuffer();this.copyTextureToTexture=function(e,l){var _,S,k,E,T,M,R,I,D,O=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,L=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,U=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,B=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;null===B&&(0!==U?(warnOnce("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),B=U,U=0):B=0);var z=e.isCompressedTexture?e.mipmaps[B]:e.image;if(null!==O)_=O.max.x-O.min.x,S=O.max.y-O.min.y,k=O.isBox3?O.max.z-O.min.z:1,E=O.min.x,T=O.min.y,M=O.isBox3?O.min.z:0;else{var G=Math.pow(2,-U);_=Math.floor(z.width*G),S=Math.floor(z.height*G),k=e.isDataArrayTexture?z.depth:e.isData3DTexture?Math.floor(z.depth*G):1,E=0,T=0,M=0}null!==L?(R=L.x,I=L.y,D=L.z):(R=0,I=0,D=0);var j,H=Qe.convert(l.format),V=Qe.convert(l.type);l.isData3DTexture?(Oe.setTexture3D(l,0),j=$e.TEXTURE_3D):l.isDataArrayTexture||l.isCompressedArrayTexture?(Oe.setTexture2DArray(l,0),j=$e.TEXTURE_2D_ARRAY):(Oe.setTexture2D(l,0),j=$e.TEXTURE_2D),$e.pixelStorei($e.UNPACK_FLIP_Y_WEBGL,l.flipY),$e.pixelStorei($e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,l.premultiplyAlpha),$e.pixelStorei($e.UNPACK_ALIGNMENT,l.unpackAlignment);var W=$e.getParameter($e.UNPACK_ROW_LENGTH),q=$e.getParameter($e.UNPACK_IMAGE_HEIGHT),X=$e.getParameter($e.UNPACK_SKIP_PIXELS),K=$e.getParameter($e.UNPACK_SKIP_ROWS),Y=$e.getParameter($e.UNPACK_SKIP_IMAGES);$e.pixelStorei($e.UNPACK_ROW_LENGTH,z.width),$e.pixelStorei($e.UNPACK_IMAGE_HEIGHT,z.height),$e.pixelStorei($e.UNPACK_SKIP_PIXELS,E),$e.pixelStorei($e.UNPACK_SKIP_ROWS,T),$e.pixelStorei($e.UNPACK_SKIP_IMAGES,M);var Q=e.isDataArrayTexture||e.isData3DTexture,J=l.isDataArrayTexture||l.isData3DTexture;if(e.isDepthTexture){var Z=De.get(e),$=De.get(l),ee=De.get(Z.__renderTarget),te=De.get($.__renderTarget);Ie.bindFramebuffer($e.READ_FRAMEBUFFER,ee.__webglFramebuffer),Ie.bindFramebuffer($e.DRAW_FRAMEBUFFER,te.__webglFramebuffer);for(var re=0;re<k;re++)Q&&($e.framebufferTextureLayer($e.READ_FRAMEBUFFER,$e.COLOR_ATTACHMENT0,De.get(e).__webglTexture,U,M+re),$e.framebufferTextureLayer($e.DRAW_FRAMEBUFFER,$e.COLOR_ATTACHMENT0,De.get(l).__webglTexture,B,D+re)),$e.blitFramebuffer(E,T,_,S,R,I,_,S,$e.DEPTH_BUFFER_BIT,$e.NEAREST);Ie.bindFramebuffer($e.READ_FRAMEBUFFER,null),Ie.bindFramebuffer($e.DRAW_FRAMEBUFFER,null)}else if(0!==U||e.isRenderTargetTexture||De.has(e)){var ne=De.get(e),ie=De.get(l);Ie.bindFramebuffer($e.READ_FRAMEBUFFER,ot),Ie.bindFramebuffer($e.DRAW_FRAMEBUFFER,st);for(var ae=0;ae<k;ae++)Q?$e.framebufferTextureLayer($e.READ_FRAMEBUFFER,$e.COLOR_ATTACHMENT0,ne.__webglTexture,U,M+ae):$e.framebufferTexture2D($e.READ_FRAMEBUFFER,$e.COLOR_ATTACHMENT0,$e.TEXTURE_2D,ne.__webglTexture,U),J?$e.framebufferTextureLayer($e.DRAW_FRAMEBUFFER,$e.COLOR_ATTACHMENT0,ie.__webglTexture,B,D+ae):$e.framebufferTexture2D($e.DRAW_FRAMEBUFFER,$e.COLOR_ATTACHMENT0,$e.TEXTURE_2D,ie.__webglTexture,B),0!==U?$e.blitFramebuffer(E,T,_,S,R,I,_,S,$e.COLOR_BUFFER_BIT,$e.NEAREST):J?$e.copyTexSubImage3D(j,B,R,I,D+ae,E,T,_,S):$e.copyTexSubImage2D(j,B,R,I,E,T,_,S);Ie.bindFramebuffer($e.READ_FRAMEBUFFER,null),Ie.bindFramebuffer($e.DRAW_FRAMEBUFFER,null)}else J?e.isDataTexture||e.isData3DTexture?$e.texSubImage3D(j,B,R,I,D,_,S,k,H,V,z.data):l.isCompressedArrayTexture?$e.compressedTexSubImage3D(j,B,R,I,D,_,S,k,H,z.data):$e.texSubImage3D(j,B,R,I,D,_,S,k,H,V,z):e.isDataTexture?$e.texSubImage2D($e.TEXTURE_2D,B,R,I,_,S,H,V,z.data):e.isCompressedTexture?$e.compressedTexSubImage2D($e.TEXTURE_2D,B,R,I,z.width,z.height,H,z.data):$e.texSubImage2D($e.TEXTURE_2D,B,R,I,_,S,H,V,z);$e.pixelStorei($e.UNPACK_ROW_LENGTH,W),$e.pixelStorei($e.UNPACK_IMAGE_HEIGHT,q),$e.pixelStorei($e.UNPACK_SKIP_PIXELS,X),$e.pixelStorei($e.UNPACK_SKIP_ROWS,K),$e.pixelStorei($e.UNPACK_SKIP_IMAGES,Y),0===B&&l.generateMipmaps&&$e.generateMipmap(j),Ie.unbindTexture()},this.initRenderTarget=function(e){void 0===De.get(e).__webglFramebuffer&&Oe.setupRenderTarget(e)},this.initTexture=function(e){e.isCubeTexture?Oe.setTextureCube(e,0):e.isData3DTexture?Oe.setTexture3D(e,0):e.isDataArrayTexture||e.isCompressedArrayTexture?Oe.setTexture2DArray(e,0):Oe.setTexture2D(e,0),Ie.unbindTexture()},this.resetState=function(){ne=0,ie=0,ae=null,Ie.reset(),Je.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))},[{key:"coordinateSystem",get:function(){return of}},{key:"outputColorSpace",get:function(){return this._outputColorSpace},set:function(e){this._outputColorSpace=e;var l=this.getContext();l.drawingBufferColorSpace=xf._getDrawingBufferColorSpace(e),l.unpackColorSpace=xf._getUnpackColorSpace()}}])}();I("b3",km);
/**
			 * postprocessing v6.37.8 build Fri Sep 12 2025
			 * https://github.com/pmndrs/postprocessing
			 * Copyright 2015-2025 Raoul van Rschen
			 * @license Zlib
			 */
var Am=.001,Em=function(){return _createClass3(function Timer(){_classCallCheck3(this,Timer),this.startTime=performance.now(),this.previousTime=0,this.currentTime=0,this._delta=0,this._elapsed=0,this._fixedDelta=1e3/60,this.timescale=1,this.useFixedDelta=!1,this._autoReset=!1},[{key:"autoReset",get:function(){return this._autoReset},set:function(e){"undefined"!=typeof document&&void 0!==document.hidden&&(e?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this),this._autoReset=e)}},{key:"delta",get:function(){return this._delta*Am}},{key:"fixedDelta",get:function(){return this._fixedDelta*Am},set:function(e){this._fixedDelta=1e3*e}},{key:"elapsed",get:function(){return this._elapsed*Am}},{key:"update",value:function(e){this.useFixedDelta?this._delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=(void 0!==e?e:performance.now())-this.startTime,this._delta=this.currentTime-this.previousTime),this._delta*=this.timescale,this._elapsed+=this._delta}},{key:"reset",value:function(){this._delta=0,this._elapsed=0,this.currentTime=performance.now()-this.startTime}},{key:"getDelta",value:function(){return this.delta}},{key:"getElapsed",value:function(){return this.elapsed}},{key:"handleEvent",value:function(e){document.hidden||(this.currentTime=performance.now()-this.startTime)}},{key:"dispose",value:function(){this.autoReset=!1}}])}(),Cm=function(){var e=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),l=new Float32Array([0,0,2,0,0,2]),_=new mv;return _.setAttribute("position",new ov(e,3)),_.setAttribute("uv",new ov(l,2)),_}(),Tm=function(){function _Pass(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Pass",l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new qv,_=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Dv;_classCallCheck3(this,_Pass),this.name=e,this.renderer=null,this.scene=l,this.camera=_,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}return _createClass3(_Pass,[{key:"renderToScreen",get:function(){return!this.rtt},set:function(e){if(this.rtt===e){var l=this.fullscreenMaterial;null!==l&&(l.needsUpdate=!0),this.rtt=!e}}},{key:"mainScene",set:function(e){}},{key:"mainCamera",set:function(e){}},{key:"setRenderer",value:function(e){this.renderer=e}},{key:"isEnabled",value:function(){return this.enabled}},{key:"setEnabled",value:function(e){this.enabled=e}},{key:"fullscreenMaterial",get:function(){return null!==this.screen?this.screen.material:null},set:function(e){var l=this.screen;null!==l?l.material=e:((l=new Mv(_Pass.fullscreenGeometry,e)).frustumCulled=!1,null===this.scene&&(this.scene=new qv),this.scene.add(l),this.screen=l)}},{key:"getFullscreenMaterial",value:function(){return this.fullscreenMaterial}},{key:"setFullscreenMaterial",value:function(e){this.fullscreenMaterial=e}},{key:"getDepthTexture",value:function(){return null}},{key:"setDepthTexture",value:function(e){}},{key:"render",value:function(e,l,_,S,k){throw new Error("Render method not implemented!")}},{key:"setSize",value:function(e,l){}},{key:"initialize",value:function(e,l,_){}},{key:"dispose",value:function(){for(var e=0,l=Object.keys(this);e<l.length;e++){var _=l[e],S=this[_];(S instanceof Pf||S instanceof tv||S instanceof Mf||S instanceof _Pass)&&this[_].dispose()}null!==this.fullscreenMaterial&&this.fullscreenMaterial.dispose()}}],[{key:"fullscreenGeometry",get:function(){return Cm}}])}(),Mm=function(e){function ClearMaskPass(){var e;return _classCallCheck3(this,ClearMaskPass),(e=_callSuper(this,ClearMaskPass,["ClearMaskPass",null,null])).needsSwap=!1,e}return _inherits(ClearMaskPass,e),_createClass3(ClearMaskPass,[{key:"render",value:function(e,l,_,S,k){var E=e.state.buffers.stencil;E.setLocked(!1),E.setTest(!1)}}])}(Tm),Rm="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",Im=function(e){function CopyMaterial(){return _classCallCheck3(this,CopyMaterial),_callSuper(this,CopyMaterial,[{name:"CopyMaterial",uniforms:{inputBuffer:new Tg(null),opacity:new Tg(1)},blending:0,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:"#include <common>\n#include <dithering_pars_fragment>\n#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\nuniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;\n#include <colorspace_fragment>\n#include <dithering_fragment>\n}",vertexShader:Rm}])}return _inherits(CopyMaterial,e),_createClass3(CopyMaterial,[{key:"inputBuffer",set:function(e){this.uniforms.inputBuffer.value=e}},{key:"setInputBuffer",value:function(e){this.uniforms.inputBuffer.value=e}},{key:"getOpacity",value:function(e){return this.uniforms.opacity.value}},{key:"setOpacity",value:function(e){this.uniforms.opacity.value=e}}])}(Pv),Pm=function(e){function CopyPass(e){var l,_=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return _classCallCheck3(this,CopyPass),(l=_callSuper(this,CopyPass,["CopyPass"])).fullscreenMaterial=new Im,l.needsSwap=!1,l.renderTarget=e,void 0===e&&(l.renderTarget=new Pf(1,1,{minFilter:Jh,magFilter:Jh,stencilBuffer:!1,depthBuffer:!1}),l.renderTarget.texture.name="CopyPass.Target"),l.autoResize=_,l}return _inherits(CopyPass,e),_createClass3(CopyPass,[{key:"resize",get:function(){return this.autoResize},set:function(e){this.autoResize=e}},{key:"texture",get:function(){return this.renderTarget.texture}},{key:"getTexture",value:function(){return this.renderTarget.texture}},{key:"setAutoResizeEnabled",value:function(e){this.autoResize=e}},{key:"render",value:function(e,l,_,S,k){this.fullscreenMaterial.inputBuffer=l.texture,e.setRenderTarget(this.renderToScreen?null:this.renderTarget),e.render(this.scene,this.camera)}},{key:"setSize",value:function(e,l){this.autoResize&&this.renderTarget.setSize(e,l)}},{key:"initialize",value:function(e,l,_){void 0!==_&&(this.renderTarget.texture.type=_,_!==ed?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":null!==e&&e.outputColorSpace===$d&&(this.renderTarget.texture.colorSpace=$d))}}])}(Tm),Dm=new Zp,Om=function(e){function ClearPass(){var e,l=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],_=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],S=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return _classCallCheck3(this,ClearPass),(e=_callSuper(this,ClearPass,["ClearPass",null,null])).needsSwap=!1,e.color=l,e.depth=_,e.stencil=S,e.overrideClearColor=null,e.overrideClearAlpha=-1,e}return _inherits(ClearPass,e),_createClass3(ClearPass,[{key:"setClearFlags",value:function(e,l,_){this.color=e,this.depth=l,this.stencil=_}},{key:"getOverrideClearColor",value:function(){return this.overrideClearColor}},{key:"setOverrideClearColor",value:function(e){this.overrideClearColor=e}},{key:"getOverrideClearAlpha",value:function(){return this.overrideClearAlpha}},{key:"setOverrideClearAlpha",value:function(e){this.overrideClearAlpha=e}},{key:"render",value:function(e,l,_,S,k){var E=this.overrideClearColor,T=this.overrideClearAlpha,M=e.getClearAlpha(),R=null!==E,I=T>=0;R?(e.getClearColor(Dm),e.setClearColor(E,I?T:M)):I&&e.setClearAlpha(T),e.setRenderTarget(this.renderToScreen?null:l),e.clear(this.color,this.depth,this.stencil),R?e.setClearColor(Dm,M):I&&e.setClearAlpha(M)}}])}(Tm),Lm=function(e){function MaskPass(e,l){var _;return _classCallCheck3(this,MaskPass),(_=_callSuper(this,MaskPass,["MaskPass",e,l])).needsSwap=!1,_.clearPass=new Om(!1,!1,!0),_.inverse=!1,_}return _inherits(MaskPass,e),_createClass3(MaskPass,[{key:"mainScene",set:function(e){this.scene=e}},{key:"mainCamera",set:function(e){this.camera=e}},{key:"inverted",get:function(){return this.inverse},set:function(e){this.inverse=e}},{key:"clear",get:function(){return this.clearPass.enabled},set:function(e){this.clearPass.enabled=e}},{key:"getClearPass",value:function(){return this.clearPass}},{key:"isInverted",value:function(){return this.inverted}},{key:"setInverted",value:function(e){this.inverted=e}},{key:"render",value:function(e,l,_,S,k){var E=e.getContext(),T=e.state.buffers,M=this.scene,R=this.camera,I=this.clearPass,D=this.inverted?0:1,O=1-D;T.color.setMask(!1),T.depth.setMask(!1),T.color.setLocked(!0),T.depth.setLocked(!0),T.stencil.setTest(!0),T.stencil.setOp(E.REPLACE,E.REPLACE,E.REPLACE),T.stencil.setFunc(E.ALWAYS,D,4294967295),T.stencil.setClear(O),T.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?I.render(e,null):(I.render(e,l),I.render(e,_))),this.renderToScreen?(e.setRenderTarget(null),e.render(M,R)):(e.setRenderTarget(l),e.render(M,R),e.setRenderTarget(_),e.render(M,R)),T.color.setLocked(!1),T.depth.setLocked(!1),T.stencil.setLocked(!1),T.stencil.setFunc(E.EQUAL,1,4294967295),T.stencil.setOp(E.KEEP,E.KEEP,E.KEEP),T.stencil.setLocked(!0)}}])}(Tm),Um=(I("b4",function(){return _createClass3(function _class(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_=l.depthBuffer,S=void 0===_||_,k=l.stencilBuffer,E=void 0!==k&&k,T=l.multisampling,M=void 0===T?0:T,R=l.frameBufferType;_classCallCheck3(this,_class),this.renderer=null,this.inputBuffer=this.createBuffer(S,E,R,M),this.outputBuffer=this.inputBuffer.clone(),this.copyPass=new Pm,this.depthTexture=null,this.passes=[],this.timer=new Em,this.autoRenderToScreen=!0,this.setRenderer(e)},[{key:"multisampling",get:function(){return this.inputBuffer.samples||0},set:function(e){var l=this.inputBuffer,_=this.multisampling;_>0&&e>0?(this.inputBuffer.samples=e,this.outputBuffer.samples=e,this.inputBuffer.dispose(),this.outputBuffer.dispose()):_!==e&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),this.inputBuffer=this.createBuffer(l.depthBuffer,l.stencilBuffer,l.texture.type,e),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}},{key:"getTimer",value:function(){return this.timer}},{key:"getRenderer",value:function(){return this.renderer}},{key:"setRenderer",value:function(e){if(this.renderer=e,null!==e){var l=e.getSize(new df),_=e.getContext().getContextAttributes().alpha,S=this.inputBuffer.texture.type;S===ed&&e.outputColorSpace===$d&&(this.inputBuffer.texture.colorSpace=$d,this.outputBuffer.texture.colorSpace=$d,this.inputBuffer.dispose(),this.outputBuffer.dispose()),e.autoClear=!1,this.setSize(l.width,l.height);var k,E=_createForOfIteratorHelper2(this.passes);try{for(E.s();!(k=E.n()).done;){k.value.initialize(e,_,S)}}catch(T){E.e(T)}finally{E.f()}}}},{key:"replaceRenderer",value:function(e){var l=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],_=this.renderer,S=_.domElement.parentNode;return this.setRenderer(e),l&&null!==S&&(S.removeChild(_.domElement),S.appendChild(e.domElement)),_}},{key:"createDepthTexture",value:function(){var e=this.depthTexture=new rg;return this.inputBuffer.depthTexture=e,this.inputBuffer.dispose(),this.inputBuffer.stencilBuffer?(e.format=vd,e.type=cd):e.type=ad,e}},{key:"deleteDepthTexture",value:function(){if(null!==this.depthTexture){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();var e,l=_createForOfIteratorHelper2(this.passes);try{for(l.s();!(e=l.n()).done;){e.value.setDepthTexture(null)}}catch(_){l.e(_)}finally{l.f()}}}},{key:"createBuffer",value:function(e,l,_,S){var k=this.renderer,E=null===k?new df:k.getDrawingBufferSize(new df),T={minFilter:Jh,magFilter:Jh,stencilBuffer:l,depthBuffer:e,type:_},M=new Pf(E.width,E.height,T);return S>0&&(M.ignoreDepthForMultisampleCopy=!1,M.samples=S),_===ed&&null!==k&&k.outputColorSpace===$d&&(M.texture.colorSpace=$d),M.texture.name="EffectComposer.Buffer",M.texture.generateMipmaps=!1,M}},{key:"setMainScene",value:function(e){var l,_=_createForOfIteratorHelper2(this.passes);try{for(_.s();!(l=_.n()).done;){l.value.mainScene=e}}catch(S){_.e(S)}finally{_.f()}}},{key:"setMainCamera",value:function(e){var l,_=_createForOfIteratorHelper2(this.passes);try{for(_.s();!(l=_.n()).done;){l.value.mainCamera=e}}catch(S){_.e(S)}finally{_.f()}}},{key:"addPass",value:function(e,l){var _=this.passes,S=this.renderer,k=S.getDrawingBufferSize(new df),E=S.getContext().getContextAttributes().alpha,T=this.inputBuffer.texture.type;if(e.setRenderer(S),e.setSize(k.width,k.height),e.initialize(S,E,T),this.autoRenderToScreen&&(_.length>0&&(_[_.length-1].renderToScreen=!1),e.renderToScreen&&(this.autoRenderToScreen=!1)),void 0!==l?_.splice(l,0,e):_.push(e),this.autoRenderToScreen&&(_[_.length-1].renderToScreen=!0),e.needsDepthTexture||null!==this.depthTexture)if(null===this.depthTexture){var M,R=this.createDepthTexture(),I=_createForOfIteratorHelper2(_);try{for(I.s();!(M=I.n()).done;)(e=M.value).setDepthTexture(R)}catch(D){I.e(D)}finally{I.f()}}else e.setDepthTexture(this.depthTexture)}},{key:"removePass",value:function(e){var l=this.passes,_=l.indexOf(e);if(-1!==_&&l.splice(_,1).length>0){if(null!==this.depthTexture){l.reduce(function(e,l){return e||l.needsDepthTexture},!1)||(e.getDepthTexture()===this.depthTexture&&e.setDepthTexture(null),this.deleteDepthTexture())}this.autoRenderToScreen&&_===l.length&&(e.renderToScreen=!1,l.length>0&&(l[l.length-1].renderToScreen=!0))}}},{key:"removeAllPasses",value:function(){var e=this.passes;this.deleteDepthTexture(),e.length>0&&(this.autoRenderToScreen&&(e[e.length-1].renderToScreen=!1),this.passes=[])}},{key:"render",value:function(e){var l,_,S,k=this.renderer,E=this.copyPass,T=this.inputBuffer,M=this.outputBuffer,R=!1;void 0===e&&(this.timer.update(),e=this.timer.getDelta());var I,D=_createForOfIteratorHelper2(this.passes);try{for(D.s();!(I=D.n()).done;){var O=I.value;O.enabled&&(O.render(k,T,M,e,R),O.needsSwap&&(R&&(E.renderToScreen=O.renderToScreen,l=k.getContext(),(_=k.state.buffers.stencil).setFunc(l.NOTEQUAL,1,4294967295),E.render(k,T,M,e,R),_.setFunc(l.EQUAL,1,4294967295)),S=T,T=M,M=S),O instanceof Lm?R=!0:O instanceof Mm&&(R=!1))}}catch(L){D.e(L)}finally{D.f()}}},{key:"setSize",value:function(e,l,_){var S=this.renderer,k=S.getSize(new df);void 0!==e&&void 0!==l||(e=k.width,l=k.height),k.width===e&&k.height===l||S.setSize(e,l,_);var E=S.getDrawingBufferSize(new df);this.inputBuffer.setSize(E.width,E.height),this.outputBuffer.setSize(E.width,E.height);var T,M=_createForOfIteratorHelper2(this.passes);try{for(M.s();!(T=M.n()).done;){T.value.setSize(E.width,E.height)}}catch(R){M.e(R)}finally{M.f()}}},{key:"reset",value:function(){this.dispose(),this.autoRenderToScreen=!0}},{key:"dispose",value:function(){var e,l=_createForOfIteratorHelper2(this.passes);try{for(l.s();!(e=l.n()).done;){e.value.dispose()}}catch(_){l.e(_)}finally{l.f()}this.passes=[],null!==this.inputBuffer&&this.inputBuffer.dispose(),null!==this.outputBuffer&&this.outputBuffer.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose(),Tm.fullscreenGeometry.dispose()}}])}()),0),Fm=1,Nm=2,Bm={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},zm=_createClass3(function EffectShaderData(){_classCallCheck3(this,EffectShaderData),this.shaderParts=new Map([[Bm.FRAGMENT_HEAD,null],[Bm.FRAGMENT_MAIN_UV,null],[Bm.FRAGMENT_MAIN_IMAGE,null],[Bm.VERTEX_HEAD,null],[Bm.VERTEX_MAIN_SUPPORT,null]]),this.defines=new Map,this.uniforms=new Map,this.blendModes=new Map,this.extensions=new Set,this.attributes=Um,this.varyings=new Set,this.uvTransformation=!1,this.readDepth=!1,this.colorSpace=ef}),Gm=!1,jm=function(){return _createClass3(function OverrideMaterialManager(){var e=this,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;_classCallCheck3(this,OverrideMaterialManager),this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(l),this.meshCount=0,this.replaceMaterial=function(l){if(l.isMesh){var _;if(l.material.flatShading)switch(l.material.side){case Gh:_=e.materialsFlatShadedDoubleSide;break;case 1:_=e.materialsFlatShadedBackSide;break;default:_=e.materialsFlatShaded}else switch(l.material.side){case Gh:_=e.materialsDoubleSide;break;case 1:_=e.materialsBackSide;break;default:_=e.materials}e.originalMaterials.set(l,l.material),l.isSkinnedMesh?l.material=_[2]:l.isInstancedMesh?l.material=_[1]:l.material=_[0],++e.meshCount}}},[{key:"cloneMaterial",value:function(e){if(!(e instanceof Pv))return e.clone();var l=e.uniforms,_=new Map;for(var S in l){var k=l[S].value;k.isRenderTargetTexture&&(l[S].value=null,_.set(S,k))}var E,T=e.clone(),M=_createForOfIteratorHelper2(_);try{for(M.s();!(E=M.n()).done;){var R=E.value;l[R[0]].value=R[1],T.uniforms[R[0]].value=R[1]}}catch(I){M.e(I)}finally{M.f()}return T}},{key:"setMaterial",value:function(e){var l=this;if(this.disposeMaterials(),this.material=e,null!==e){for(var _=this.materials=[this.cloneMaterial(e),this.cloneMaterial(e),this.cloneMaterial(e)],S=0,k=_;S<k.length;S++){var E=k[S];E.uniforms=Object.assign({},e.uniforms),E.side=0}_[2].skinning=!0,this.materialsBackSide=_.map(function(_){var S=l.cloneMaterial(_);return S.uniforms=Object.assign({},e.uniforms),S.side=1,S}),this.materialsDoubleSide=_.map(function(_){var S=l.cloneMaterial(_);return S.uniforms=Object.assign({},e.uniforms),S.side=Gh,S}),this.materialsFlatShaded=_.map(function(_){var S=l.cloneMaterial(_);return S.uniforms=Object.assign({},e.uniforms),S.flatShading=!0,S}),this.materialsFlatShadedBackSide=_.map(function(_){var S=l.cloneMaterial(_);return S.uniforms=Object.assign({},e.uniforms),S.flatShading=!0,S.side=1,S}),this.materialsFlatShadedDoubleSide=_.map(function(_){var S=l.cloneMaterial(_);return S.uniforms=Object.assign({},e.uniforms),S.flatShading=!0,S.side=Gh,S})}}},{key:"render",value:function(e,l,_){var S=e.shadowMap.enabled;if(e.shadowMap.enabled=!1,Gm){var k=this.originalMaterials;this.meshCount=0,l.traverse(this.replaceMaterial),e.render(l,_);var E,T=_createForOfIteratorHelper2(k);try{for(T.s();!(E=T.n()).done;){var M=E.value;M[0].material=M[1]}}catch(I){T.e(I)}finally{T.f()}this.meshCount!==k.size&&k.clear()}else{var R=l.overrideMaterial;l.overrideMaterial=this.material,e.render(l,_),l.overrideMaterial=R}e.shadowMap.enabled=S}},{key:"disposeMaterials",value:function(){if(null!==this.material){var e,l=_createForOfIteratorHelper2(this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide));try{for(l.s();!(e=l.n()).done;){e.value.dispose()}}catch(_){l.e(_)}finally{l.f()}}}},{key:"dispose",value:function(){this.originalMaterials.clear(),this.disposeMaterials()}}],[{key:"workaroundEnabled",get:function(){return Gm},set:function(e){Gm=e}}])}(),Hm=-1,Vm=function(e){function Resolution(e){var l,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Hm,S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Hm,k=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return _classCallCheck3(this,Resolution),(l=_callSuper(this,Resolution)).resizable=e,l.baseSize=new df(1,1),l.preferredSize=new df(_,S),l.target=l.preferredSize,l.s=k,l.effectiveSize=new df,l.addEventListener("change",function(){return l.updateEffectiveSize()}),l.updateEffectiveSize(),l}return _inherits(Resolution,e),_createClass3(Resolution,[{key:"updateEffectiveSize",value:function(){var e=this.baseSize,l=this.preferredSize,_=this.effectiveSize,S=this.scale;l.width!==Hm?_.width=l.width:l.height!==Hm?_.width=Math.round(l.height*(e.width/Math.max(e.height,1))):_.width=Math.round(e.width*S),l.height!==Hm?_.height=l.height:l.width!==Hm?_.height=Math.round(l.width/Math.max(e.width/Math.max(e.height,1),1)):_.height=Math.round(e.height*S)}},{key:"width",get:function(){return this.effectiveSize.width},set:function(e){this.preferredWidth=e}},{key:"height",get:function(){return this.effectiveSize.height},set:function(e){this.preferredHeight=e}},{key:"getWidth",value:function(){return this.width}},{key:"getHeight",value:function(){return this.height}},{key:"scale",get:function(){return this.s},set:function(e){this.s!==e&&(this.s=e,this.preferredSize.setScalar(Hm),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}},{key:"getScale",value:function(){return this.scale}},{key:"setScale",value:function(e){this.scale=e}},{key:"baseWidth",get:function(){return this.baseSize.width},set:function(e){this.baseSize.width!==e&&(this.baseSize.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}},{key:"getBaseWidth",value:function(){return this.baseWidth}},{key:"setBaseWidth",value:function(e){this.baseWidth=e}},{key:"baseHeight",get:function(){return this.baseSize.height},set:function(e){this.baseSize.height!==e&&(this.baseSize.height=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}},{key:"getBaseHeight",value:function(){return this.baseHeight}},{key:"setBaseHeight",value:function(e){this.baseHeight=e}},{key:"setBaseSize",value:function(e,l){this.baseSize.width===e&&this.baseSize.height===l||(this.baseSize.set(e,l),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}},{key:"preferredWidth",get:function(){return this.preferredSize.width},set:function(e){this.preferredSize.width!==e&&(this.preferredSize.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}},{key:"getPreferredWidth",value:function(){return this.preferredWidth}},{key:"setPreferredWidth",value:function(e){this.preferredWidth=e}},{key:"preferredHeight",get:function(){return this.preferredSize.height},set:function(e){this.preferredSize.height!==e&&(this.preferredSize.height=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}},{key:"getPreferredHeight",value:function(){return this.preferredHeight}},{key:"setPreferredHeight",value:function(e){this.preferredHeight=e}},{key:"setPreferredSize",value:function(e,l){this.preferredSize.width===e&&this.preferredSize.height===l||(this.preferredSize.set(e,l),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}},{key:"copy",value:function(e){this.s=e.scale,this.baseSize.set(e.baseWidth,e.baseHeight),this.preferredSize.set(e.preferredWidth,e.preferredHeight),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height)}}],[{key:"AUTO_SIZE",get:function(){return Hm}}])}(uf),Wm=9,qm=23,Xm=28,Km=30,Ym=new Map([[0,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(x.rgb+y.rgb,y.a),opacity);}"],[1,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,y.a*opacity);}"],[2,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4((x.rgb+y.rgb)*0.5,y.a),opacity);}"],[3,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.xy,xHSL.z));return mix(x,vec4(z,y.a),opacity);}"],[4,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 a=x.rgb,b=y.rgb;vec3 z=mix(step(0.0,b)*(1.0-min(vec3(1.0),(1.0-a)/b)),vec3(1.0),step(1.0,a));return mix(x,vec4(z,y.a),opacity);}"],[5,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 a=x.rgb,b=y.rgb;vec3 z=step(0.0,a)*mix(min(vec3(1.0),a/max(1.0-b,1e-9)),vec3(1.0),step(1.0,b));return mix(x,vec4(z,y.a),opacity);}"],[6,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(min(x.rgb,y.rgb),y.a),opacity);}"],[7,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(abs(x.rgb-y.rgb),y.a),opacity);}"],[8,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(x.rgb/max(y.rgb,1e-12),y.a),opacity);}"],[Wm,null],[10,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4((x.rgb+y.rgb-2.0*x.rgb*y.rgb),y.a),opacity);}"],[11,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 a=min(x.rgb,1.0);vec3 b=min(y.rgb,1.0);vec3 z=mix(2.0*a*b,1.0-2.0*(1.0-a)*(1.0-b),step(0.5,b));return mix(x,vec4(z,y.a),opacity);}"],[12,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(step(1.0,x.rgb+y.rgb),y.a),opacity);}"],[13,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.x,xHSL.yz));return mix(x,vec4(z,y.a),opacity);}"],[14,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(1.0-y.rgb,y.a),opacity);}"],[15,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(y.rgb*(1.0-x.rgb),y.a),opacity);}"],[16,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(max(x.rgb,y.rgb),y.a),opacity);}"],[17,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(clamp(y.rgb+x.rgb-1.0,0.0,1.0),y.a),opacity);}"],[18,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(min(x.rgb+y.rgb,1.0),y.a),opacity);}"],[19,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(clamp(2.0*y.rgb+x.rgb-1.0,0.0,1.0),y.a),opacity);}"],[20,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.xy,yHSL.z));return mix(x,vec4(z,y.a),opacity);}"],[21,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(x.rgb*y.rgb,y.a),opacity);}"],[22,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(1.0-abs(1.0-x.rgb-y.rgb),y.a),opacity);}"],[qm,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,opacity);}"],[24,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 z=mix(2.0*y.rgb*x.rgb,1.0-2.0*(1.0-y.rgb)*(1.0-x.rgb),step(0.5,x.rgb));return mix(x,vec4(z,y.a),opacity);}"],[25,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 y2=2.0*y.rgb;vec3 z=mix(mix(y2,x.rgb,step(0.5*x.rgb,y.rgb)),max(y2-1.0,vec3(0.0)),step(x.rgb,y2-1.0));return mix(x,vec4(z,y.a),opacity);}"],[26,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 z=mix(min(x.rgb*x.rgb/max(1.0-y.rgb,1e-12),1.0),y.rgb,step(1.0,y.rgb));return mix(x,vec4(z,y.a),opacity);}"],[27,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.x,yHSL.y,xHSL.z));return mix(x,vec4(z,y.a),opacity);}"],[Xm,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(x.rgb+y.rgb-min(x.rgb*y.rgb,1.0),y.a),opacity);}"],[29,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 a=x.rgb;vec3 b=y.rgb;vec3 y2=2.0*b;vec3 w=step(0.5,b);vec3 c=a-(1.0-y2)*a*(1.0-a);vec3 d=mix(a+(y2-1.0)*(sqrt(a)-a),a+(y2-1.0)*a*((16.0*a-12.0)*a+3.0),w*(1.0-step(0.25,a)));vec3 z=mix(c,d,w);return mix(x,vec4(z,y.a),opacity);}"],[Km,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y;}"],[31,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(max(x.rgb+y.rgb-1.0,0.0),y.a),opacity);}"],[32,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 z=mix(max(1.0-min((1.0-x.rgb)/(2.0*y.rgb),1.0),0.0),min(x.rgb/(2.0*(1.0-y.rgb)),1.0),step(0.5,y.rgb));return mix(x,vec4(z,y.a),opacity);}"]]),Qm=function(e){function BlendMode(e){var l,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return _classCallCheck3(this,BlendMode),(l=_callSuper(this,BlendMode))._blendFunction=e,l.opacity=new Tg(_),l}return _inherits(BlendMode,e),_createClass3(BlendMode,[{key:"getOpacity",value:function(){return this.opacity.value}},{key:"setOpacity",value:function(e){this.opacity.value=e}},{key:"blendFunction",get:function(){return this._blendFunction},set:function(e){this._blendFunction=e,this.dispatchEvent({type:"change"})}},{key:"getBlendFunction",value:function(){return this.blendFunction}},{key:"setBlendFunction",value:function(e){this.blendFunction=e}},{key:"getShaderCode",value:function(){return Ym.get(this.blendFunction)}}])}(uf),Jm=function(e){function Effect(e,l){var _,S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},k=S.attributes,E=void 0===k?Um:k,T=S.blendFunction,M=void 0===T?qm:T,R=S.defines,I=void 0===R?new Map:R,D=S.uniforms,O=void 0===D?new Map:D,L=S.extensions,U=void 0===L?null:L,B=S.vertexShader,z=void 0===B?null:B;return _classCallCheck3(this,Effect),(_=_callSuper(this,Effect)).name=e,_.renderer=null,_.attributes=E,_.fragmentShader=l,_.vertexShader=z,_.defines=I,_.uniforms=O,_.extensions=U,_.blendMode=new Qm(M),_.blendMode.addEventListener("change",function(e){return _.setChanged()}),_._inputColorSpace=ef,_._outputColorSpace=Zd,_}return _inherits(Effect,e),_createClass3(Effect,[{key:"inputColorSpace",get:function(){return this._inputColorSpace},set:function(e){this._inputColorSpace=e,this.setChanged()}},{key:"outputColorSpace",get:function(){return this._outputColorSpace},set:function(e){this._outputColorSpace=e,this.setChanged()}},{key:"mainScene",set:function(e){}},{key:"mainCamera",set:function(e){}},{key:"getName",value:function(){return this.name}},{key:"setRenderer",value:function(e){this.renderer=e}},{key:"getDefines",value:function(){return this.defines}},{key:"getUniforms",value:function(){return this.uniforms}},{key:"getExtensions",value:function(){return this.extensions}},{key:"getBlendMode",value:function(){return this.blendMode}},{key:"getAttributes",value:function(){return this.attributes}},{key:"setAttributes",value:function(e){this.attributes=e,this.setChanged()}},{key:"getFragmentShader",value:function(){return this.fragmentShader}},{key:"setFragmentShader",value:function(e){this.fragmentShader=e,this.setChanged()}},{key:"getVertexShader",value:function(){return this.vertexShader}},{key:"setVertexShader",value:function(e){this.vertexShader=e,this.setChanged()}},{key:"setChanged",value:function(){this.dispatchEvent({type:"change"})}},{key:"setDepthTexture",value:function(e){}},{key:"update",value:function(e,l,_){}},{key:"setSize",value:function(e,l){}},{key:"initialize",value:function(e,l,_){}},{key:"dispose",value:function(){for(var e=0,l=Object.keys(this);e<l.length;e++){var _=l[e],S=this[_];(S instanceof Pf||S instanceof tv||S instanceof Mf||S instanceof Tm)&&this[_].dispose()}}}])}(uf),Zm=2,$m=3,ey=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],ty=function(e){function KawaseBlurMaterial(){var e,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Rf;return _classCallCheck3(this,KawaseBlurMaterial),(e=_callSuper(this,KawaseBlurMaterial,[{name:"KawaseBlurMaterial",uniforms:{inputBuffer:new Tg(null),texelSize:new Tg(new Rf),scale:new Tg(1),kernel:new Tg(0)},blending:0,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:"#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\nvarying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;\n#include <colorspace_fragment>\n}",vertexShader:"uniform vec4 texelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize.xy*vec2(kernel)+texelSize.zw)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}"}])).setTexelSize(l.x,l.y),e.kernelSize=Zm,e}return _inherits(KawaseBlurMaterial,e),_createClass3(KawaseBlurMaterial,[{key:"inputBuffer",set:function(e){this.uniforms.inputBuffer.value=e}},{key:"setInputBuffer",value:function(e){this.inputBuffer=e}},{key:"kernelSequence",get:function(){return ey[this.kernelSize]}},{key:"scale",get:function(){return this.uniforms.scale.value},set:function(e){this.uniforms.scale.value=e}},{key:"getScale",value:function(){return this.uniforms.scale.value}},{key:"setScale",value:function(e){this.uniforms.scale.value=e}},{key:"getKernel",value:function(){return null}},{key:"kernel",get:function(){return this.uniforms.kernel.value},set:function(e){this.uniforms.kernel.value=e}},{key:"setKernel",value:function(e){this.kernel=e}},{key:"setTexelSize",value:function(e,l){this.uniforms.texelSize.value.set(e,l,.5*e,.5*l)}},{key:"setSize",value:function(e,l){var _=1/e,S=1/l;this.uniforms.texelSize.value.set(_,S,.5*_,.5*S)}}])}(Pv),ry=function(e){function KawaseBlurPass(){var e,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_=l.kernelSize,S=void 0===_?Zm:_,k=l.resolutionScale,E=void 0===k?.5:k,T=l.width,M=void 0===T?Vm.AUTO_SIZE:T,R=l.height,I=void 0===R?Vm.AUTO_SIZE:R,D=l.resolutionX,O=void 0===D?M:D,L=l.resolutionY,U=void 0===L?I:L;_classCallCheck3(this,KawaseBlurPass),(e=_callSuper(this,KawaseBlurPass,["KawaseBlurPass"])).renderTargetA=new Pf(1,1,{depthBuffer:!1}),e.renderTargetA.texture.name="Blur.Target.A",e.renderTargetB=e.renderTargetA.clone(),e.renderTargetB.texture.name="Blur.Target.B";var B=e.resolution=new Vm(e,O,U,E);return B.addEventListener("change",function(l){return e.setSize(B.baseWidth,B.baseHeight)}),e._blurMaterial=new ty,e._blurMaterial.kernelSize=S,e.copyMaterial=new Im,e}return _inherits(KawaseBlurPass,e),_createClass3(KawaseBlurPass,[{key:"getResolution",value:function(){return this.resolution}},{key:"blurMaterial",get:function(){return this._blurMaterial},set:function(e){this._blurMaterial=e}},{key:"dithering",get:function(){return this.copyMaterial.dithering},set:function(e){this.copyMaterial.dithering=e}},{key:"kernelSize",get:function(){return this.blurMaterial.kernelSize},set:function(e){this.blurMaterial.kernelSize=e}},{key:"width",get:function(){return this.resolution.width},set:function(e){this.resolution.preferredWidth=e}},{key:"height",get:function(){return this.resolution.height},set:function(e){this.resolution.preferredHeight=e}},{key:"scale",get:function(){return this.blurMaterial.scale},set:function(e){this.blurMaterial.scale=e}},{key:"getScale",value:function(){return this.blurMaterial.scale}},{key:"setScale",value:function(e){this.blurMaterial.scale=e}},{key:"getKernelSize",value:function(){return this.kernelSize}},{key:"setKernelSize",value:function(e){this.kernelSize=e}},{key:"getResolutionScale",value:function(){return this.resolution.scale}},{key:"setResolutionScale",value:function(e){this.resolution.scale=e}},{key:"render",value:function(e,l,_,S,k){var E=this.scene,T=this.camera,M=this.renderTargetA,R=this.renderTargetB,I=this.blurMaterial,D=I.kernelSequence,O=l;this.fullscreenMaterial=I;for(var L=0,U=D.length;L<U;++L){var B=1&L?R:M;I.kernel=D[L],I.inputBuffer=O.texture,e.setRenderTarget(B),e.render(E,T),O=B}this.fullscreenMaterial=this.copyMaterial,this.copyMaterial.inputBuffer=O.texture,e.setRenderTarget(this.renderToScreen?null:_),e.render(E,T)}},{key:"setSize",value:function(e,l){var _=this.resolution;_.setBaseSize(e,l);var S=_.width,k=_.height;this.renderTargetA.setSize(S,k),this.renderTargetB.setSize(S,k),this.blurMaterial.setSize(e,l)}},{key:"initialize",value:function(e,l,_){void 0!==_&&(this.renderTargetA.texture.type=_,this.renderTargetB.texture.type=_,_!==ed?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.copyMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):null!==e&&e.outputColorSpace===$d&&(this.renderTargetA.texture.colorSpace=$d,this.renderTargetB.texture.colorSpace=$d))}}],[{key:"AUTO_SIZE",get:function(){return Vm.AUTO_SIZE}}])}(Tm),ny=function(e){function LuminanceMaterial(){var e,l=arguments.length>0&&void 0!==arguments[0]&&arguments[0],_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return _classCallCheck3(this,LuminanceMaterial),(e=_callSuper(this,LuminanceMaterial,[{name:"LuminanceMaterial",defines:{THREE_REVISION:zh.replace(/\D+/g,"")},uniforms:{inputBuffer:new Tg(null),threshold:new Tg(0),smoothing:new Tg(1),range:new Tg(null)},blending:0,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:"#include <common>\n#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\n#ifdef RANGE\nuniform vec2 range;\n#elif defined(THRESHOLD)\nuniform float threshold;uniform float smoothing;\n#endif\nvarying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);float l=luminance(texel.rgb);float mask=1.0;\n#ifdef RANGE\nfloat low=step(range.x,l);float high=step(l,range.y);mask=low*high;\n#elif defined(THRESHOLD)\nmask=smoothstep(threshold,threshold+smoothing,l);\n#endif\n#ifdef COLOR\ngl_FragColor=texel*mask;\n#else\ngl_FragColor=vec4(l*mask);\n#endif\n}",vertexShader:Rm}])).colorOutput=l,e.luminanceRange=_,e}return _inherits(LuminanceMaterial,e),_createClass3(LuminanceMaterial,[{key:"inputBuffer",set:function(e){this.uniforms.inputBuffer.value=e}},{key:"setInputBuffer",value:function(e){this.uniforms.inputBuffer.value=e}},{key:"threshold",get:function(){return this.uniforms.threshold.value},set:function(e){this.smoothing>0||e>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.threshold.value=e}},{key:"getThreshold",value:function(){return this.threshold}},{key:"setThreshold",value:function(e){this.threshold=e}},{key:"smoothing",get:function(){return this.uniforms.smoothing.value},set:function(e){this.threshold>0||e>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.smoothing.value=e}},{key:"getSmoothingFactor",value:function(){return this.smoothing}},{key:"setSmoothingFactor",value:function(e){this.smoothing=e}},{key:"useThreshold",get:function(){return this.threshold>0||this.smoothing>0},set:function(e){}},{key:"colorOutput",get:function(){return void 0!==this.defines.COLOR},set:function(e){e?this.defines.COLOR="1":delete this.defines.COLOR,this.needsUpdate=!0}},{key:"isColorOutputEnabled",value:function(e){return this.colorOutput}},{key:"setColorOutputEnabled",value:function(e){this.colorOutput=e}},{key:"useRange",get:function(){return null!==this.luminanceRange},set:function(e){this.luminanceRange=null}},{key:"luminanceRange",get:function(){return this.uniforms.range.value},set:function(e){null!==e?this.defines.RANGE="1":delete this.defines.RANGE,this.uniforms.range.value=e,this.needsUpdate=!0}},{key:"getLuminanceRange",value:function(){return this.luminanceRange}},{key:"setLuminanceRange",value:function(e){this.luminanceRange=e}}])}(Pv),iy=function(e){function LuminancePass(){var e,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_=l.renderTarget,S=l.luminanceRange,k=l.colorOutput,E=l.resolutionScale,T=void 0===E?1:E,M=l.width,R=void 0===M?Vm.AUTO_SIZE:M,I=l.height,D=void 0===I?Vm.AUTO_SIZE:I,O=l.resolutionX,L=void 0===O?R:O,U=l.resolutionY,B=void 0===U?D:U;_classCallCheck3(this,LuminancePass),(e=_callSuper(this,LuminancePass,["LuminancePass"])).fullscreenMaterial=new ny(k,S),e.needsSwap=!1,e.renderTarget=_,void 0===e.renderTarget&&(e.renderTarget=new Pf(1,1,{depthBuffer:!1}),e.renderTarget.texture.name="LuminancePass.Target");var z=e.resolution=new Vm(e,L,B,T);return z.addEventListener("change",function(l){return e.setSize(z.baseWidth,z.baseHeight)}),e}return _inherits(LuminancePass,e),_createClass3(LuminancePass,[{key:"texture",get:function(){return this.renderTarget.texture}},{key:"getTexture",value:function(){return this.renderTarget.texture}},{key:"getResolution",value:function(){return this.resolution}},{key:"render",value:function(e,l,_,S,k){this.fullscreenMaterial.inputBuffer=l.texture,e.setRenderTarget(this.renderToScreen?null:this.renderTarget),e.render(this.scene,this.camera)}},{key:"setSize",value:function(e,l){var _=this.resolution;_.setBaseSize(e,l),this.renderTarget.setSize(_.width,_.height)}},{key:"initialize",value:function(e,l,_){void 0!==_&&_!==ed&&(this.renderTarget.texture.type=_,this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}}])}(Tm),ay=function(e){function DownsamplingMaterial(){return _classCallCheck3(this,DownsamplingMaterial),_callSuper(this,DownsamplingMaterial,[{name:"DownsamplingMaterial",uniforms:{inputBuffer:new Tg(null),texelSize:new Tg(new df)},blending:0,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:"#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\n#define WEIGHT_INNER 0.125\n#define WEIGHT_OUTER 0.0555555\nvarying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;float clampToBorder(const in vec2 uv){return float(uv.s>=0.0&&uv.s<=1.0&&uv.t>=0.0&&uv.t<=1.0);}void main(){vec4 c=vec4(0.0);vec4 w=WEIGHT_INNER*vec4(clampToBorder(vUv00),clampToBorder(vUv01),clampToBorder(vUv02),clampToBorder(vUv03));c+=w.x*texture2D(inputBuffer,vUv00);c+=w.y*texture2D(inputBuffer,vUv01);c+=w.z*texture2D(inputBuffer,vUv02);c+=w.w*texture2D(inputBuffer,vUv03);w=WEIGHT_OUTER*vec4(clampToBorder(vUv04),clampToBorder(vUv05),clampToBorder(vUv06),clampToBorder(vUv07));c+=w.x*texture2D(inputBuffer,vUv04);c+=w.y*texture2D(inputBuffer,vUv05);c+=w.z*texture2D(inputBuffer,vUv06);c+=w.w*texture2D(inputBuffer,vUv07);w=WEIGHT_OUTER*vec4(clampToBorder(vUv08),clampToBorder(vUv09),clampToBorder(vUv10),clampToBorder(vUv11));c+=w.x*texture2D(inputBuffer,vUv08);c+=w.y*texture2D(inputBuffer,vUv09);c+=w.z*texture2D(inputBuffer,vUv10);c+=w.w*texture2D(inputBuffer,vUv11);c+=WEIGHT_OUTER*texture2D(inputBuffer,vUv);gl_FragColor=c;\n#include <colorspace_fragment>\n}",vertexShader:"uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;void main(){vUv=position.xy*0.5+0.5;vUv00=vUv+texelSize*vec2(-1.0,1.0);vUv01=vUv+texelSize*vec2(1.0,1.0);vUv02=vUv+texelSize*vec2(-1.0,-1.0);vUv03=vUv+texelSize*vec2(1.0,-1.0);vUv04=vUv+texelSize*vec2(-2.0,2.0);vUv05=vUv+texelSize*vec2(0.0,2.0);vUv06=vUv+texelSize*vec2(2.0,2.0);vUv07=vUv+texelSize*vec2(-2.0,0.0);vUv08=vUv+texelSize*vec2(2.0,0.0);vUv09=vUv+texelSize*vec2(-2.0,-2.0);vUv10=vUv+texelSize*vec2(0.0,-2.0);vUv11=vUv+texelSize*vec2(2.0,-2.0);gl_Position=vec4(position.xy,1.0,1.0);}"}])}return _inherits(DownsamplingMaterial,e),_createClass3(DownsamplingMaterial,[{key:"inputBuffer",set:function(e){this.uniforms.inputBuffer.value=e}},{key:"setSize",value:function(e,l){this.uniforms.texelSize.value.set(1/e,1/l)}}])}(Pv),oy=function(e){function UpsamplingMaterial(){return _classCallCheck3(this,UpsamplingMaterial),_callSuper(this,UpsamplingMaterial,[{name:"UpsamplingMaterial",uniforms:{inputBuffer:new Tg(null),supportBuffer:new Tg(null),texelSize:new Tg(new df),radius:new Tg(.85)},blending:0,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:"#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;uniform mediump sampler2D supportBuffer;\n#else\nuniform lowp sampler2D inputBuffer;uniform lowp sampler2D supportBuffer;\n#endif\nuniform float radius;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vec4 c=vec4(0.0);c+=texture2D(inputBuffer,vUv0)*0.0625;c+=texture2D(inputBuffer,vUv1)*0.125;c+=texture2D(inputBuffer,vUv2)*0.0625;c+=texture2D(inputBuffer,vUv3)*0.125;c+=texture2D(inputBuffer,vUv)*0.25;c+=texture2D(inputBuffer,vUv4)*0.125;c+=texture2D(inputBuffer,vUv5)*0.0625;c+=texture2D(inputBuffer,vUv6)*0.125;c+=texture2D(inputBuffer,vUv7)*0.0625;vec4 baseColor=texture2D(supportBuffer,vUv);gl_FragColor=mix(baseColor,c,radius);\n#include <colorspace_fragment>\n}",vertexShader:"uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,1.0);vUv1=vUv+texelSize*vec2(0.0,1.0);vUv2=vUv+texelSize*vec2(1.0,1.0);vUv3=vUv+texelSize*vec2(-1.0,0.0);vUv4=vUv+texelSize*vec2(1.0,0.0);vUv5=vUv+texelSize*vec2(-1.0,-1.0);vUv6=vUv+texelSize*vec2(0.0,-1.0);vUv7=vUv+texelSize*vec2(1.0,-1.0);gl_Position=vec4(position.xy,1.0,1.0);}"}])}return _inherits(UpsamplingMaterial,e),_createClass3(UpsamplingMaterial,[{key:"inputBuffer",set:function(e){this.uniforms.inputBuffer.value=e}},{key:"supportBuffer",set:function(e){this.uniforms.supportBuffer.value=e}},{key:"radius",get:function(){return this.uniforms.radius.value},set:function(e){this.uniforms.radius.value=e}},{key:"setSize",value:function(e,l){this.uniforms.texelSize.value.set(1/e,1/l)}}])}(Pv),sy=function(e){function MipmapBlurPass(){var e;return _classCallCheck3(this,MipmapBlurPass),(e=_callSuper(this,MipmapBlurPass,["MipmapBlurPass"])).needsSwap=!1,e.renderTarget=new Pf(1,1,{depthBuffer:!1}),e.renderTarget.texture.name="Upsampling.Mipmap0",e.downsamplingMipmaps=[],e.upsamplingMipmaps=[],e.downsamplingMaterial=new ay,e.upsamplingMaterial=new oy,e.resolution=new df,e}return _inherits(MipmapBlurPass,e),_createClass3(MipmapBlurPass,[{key:"texture",get:function(){return this.renderTarget.texture}},{key:"levels",get:function(){return this.downsamplingMipmaps.length},set:function(e){if(this.levels!==e){var l=this.renderTarget;this.dispose(),this.downsamplingMipmaps=[],this.upsamplingMipmaps=[];for(var _=0;_<e;++_){var S=l.clone();S.texture.name="Downsampling.Mipmap"+_,this.downsamplingMipmaps.push(S)}this.upsamplingMipmaps.push(l);for(var k=1,E=e-1;k<E;++k){var T=l.clone();T.texture.name="Upsampling.Mipmap"+k,this.upsamplingMipmaps.push(T)}this.setSize(this.resolution.x,this.resolution.y)}}},{key:"radius",get:function(){return this.upsamplingMaterial.radius},set:function(e){this.upsamplingMaterial.radius=e}},{key:"render",value:function(e,l,_,S,k){var E=this.scene,T=this.camera,M=this.downsamplingMaterial,R=this.upsamplingMaterial,I=this.downsamplingMipmaps,D=this.upsamplingMipmaps,O=l;this.fullscreenMaterial=M;for(var L=0,U=I.length;L<U;++L){var B=I[L];M.setSize(O.width,O.height),M.inputBuffer=O.texture,e.setRenderTarget(B),e.render(E,T),O=B}this.fullscreenMaterial=R;for(var z=D.length-1;z>=0;--z){var G=D[z];R.setSize(O.width,O.height),R.inputBuffer=O.texture,R.supportBuffer=I[z].texture,e.setRenderTarget(G),e.render(E,T),O=G}}},{key:"setSize",value:function(e,l){var _=this.resolution;_.set(e,l);for(var S=_.width,k=_.height,E=0,T=this.downsamplingMipmaps.length;E<T;++E)S=Math.round(.5*S),k=Math.round(.5*k),this.downsamplingMipmaps[E].setSize(S,k),E<this.upsamplingMipmaps.length&&this.upsamplingMipmaps[E].setSize(S,k)}},{key:"initialize",value:function(e,l,_){if(void 0!==_){var S,k=this.downsamplingMipmaps.concat(this.upsamplingMipmaps),E=_createForOfIteratorHelper2(k);try{for(E.s();!(S=E.n()).done;){S.value.texture.type=_}}catch(R){E.e(R)}finally{E.f()}if(_!==ed)this.downsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.upsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1";else if(null!==e&&e.outputColorSpace===$d){var T,M=_createForOfIteratorHelper2(k);try{for(M.s();!(T=M.n()).done;){T.value.texture.colorSpace=$d}}catch(R){M.e(R)}finally{M.f()}}}}},{key:"dispose",value:function(){_superPropGet(MipmapBlurPass,"dispose",this,3)([]);var e,l=_createForOfIteratorHelper2(this.downsamplingMipmaps.concat(this.upsamplingMipmaps));try{for(l.s();!(e=l.n()).done;){e.value.dispose()}}catch(_){l.e(_)}finally{l.f()}}}])}(Tm),uy=(I("bb",function(e){function _class2(){var e,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_=l.blendFunction,S=void 0===_?Xm:_,k=l.luminanceThreshold,E=void 0===k?1:k,T=l.luminanceSmoothing,M=void 0===T?.03:T,R=l.mipmapBlur,I=void 0===R||R,D=l.intensity,O=void 0===D?1:D,L=l.radius,U=void 0===L?.85:L,B=l.levels,z=void 0===B?8:B,G=l.kernelSize,j=void 0===G?$m:G,H=l.resolutionScale,V=void 0===H?.5:H,W=l.width,q=void 0===W?Vm.AUTO_SIZE:W,X=l.height,K=void 0===X?Vm.AUTO_SIZE:X,Y=l.resolutionX,Q=void 0===Y?q:Y,J=l.resolutionY,Z=void 0===J?K:J;_classCallCheck3(this,_class2),(e=_callSuper(this,_class2,["BloomEffect","#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D map;\n#else\nuniform lowp sampler2D map;\n#endif\nuniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec4 texel=texture2D(map,uv);outputColor=vec4(texel.rgb*intensity,max(inputColor.a,texel.a));}",{blendFunction:S,uniforms:new Map([["map",new Tg(null)],["intensity",new Tg(O)]])}])).renderTarget=new Pf(1,1,{depthBuffer:!1}),e.renderTarget.texture.name="Bloom.Target",e.blurPass=new ry({kernelSize:j}),e.luminancePass=new iy({colorOutput:!0}),e.luminanceMaterial.threshold=E,e.luminanceMaterial.smoothing=M,e.mipmapBlurPass=new sy,e.mipmapBlurPass.enabled=I,e.mipmapBlurPass.radius=U,e.mipmapBlurPass.levels=z,e.uniforms.get("map").value=I?e.mipmapBlurPass.texture:e.renderTarget.texture;var $=e.resolution=new Vm(e,Q,Z,V);return $.addEventListener("change",function(l){return e.setSize($.baseWidth,$.baseHeight)}),e}return _inherits(_class2,e),_createClass3(_class2,[{key:"texture",get:function(){return this.mipmapBlurPass.enabled?this.mipmapBlurPass.texture:this.renderTarget.texture}},{key:"getTexture",value:function(){return this.texture}},{key:"getResolution",value:function(){return this.resolution}},{key:"getBlurPass",value:function(){return this.blurPass}},{key:"getLuminancePass",value:function(){return this.luminancePass}},{key:"luminanceMaterial",get:function(){return this.luminancePass.fullscreenMaterial}},{key:"getLuminanceMaterial",value:function(){return this.luminancePass.fullscreenMaterial}},{key:"width",get:function(){return this.resolution.width},set:function(e){this.resolution.preferredWidth=e}},{key:"height",get:function(){return this.resolution.height},set:function(e){this.resolution.preferredHeight=e}},{key:"dithering",get:function(){return this.blurPass.dithering},set:function(e){this.blurPass.dithering=e}},{key:"kernelSize",get:function(){return this.blurPass.kernelSize},set:function(e){this.blurPass.kernelSize=e}},{key:"distinction",get:function(){return 1},set:function(e){}},{key:"intensity",get:function(){return this.uniforms.get("intensity").value},set:function(e){this.uniforms.get("intensity").value=e}},{key:"getIntensity",value:function(){return this.intensity}},{key:"setIntensity",value:function(e){this.intensity=e}},{key:"getResolutionScale",value:function(){return this.resolution.scale}},{key:"setResolutionScale",value:function(e){this.resolution.scale=e}},{key:"update",value:function(e,l,_){var S=this.renderTarget,k=this.luminancePass;k.enabled?(k.render(e,l),this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(e,k.renderTarget):this.blurPass.render(e,k.renderTarget,S)):this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(e,l):this.blurPass.render(e,l,S)}},{key:"setSize",value:function(e,l){var _=this.resolution;_.setBaseSize(e,l),this.renderTarget.setSize(_.width,_.height),this.blurPass.resolution.copy(_),this.luminancePass.setSize(e,l),this.mipmapBlurPass.setSize(e,l)}},{key:"initialize",value:function(e,l,_){this.blurPass.initialize(e,l,_),this.luminancePass.initialize(e,l,_),this.mipmapBlurPass.initialize(e,l,_),void 0!==_&&(this.renderTarget.texture.type=_,null!==e&&e.outputColorSpace===$d&&(this.renderTarget.texture.colorSpace=$d))}}])}(Jm)),function(e){function ShaderPass(e){var l,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"inputBuffer";return _classCallCheck3(this,ShaderPass),(l=_callSuper(this,ShaderPass,["ShaderPass"])).fullscreenMaterial=e,l.input=_,l}return _inherits(ShaderPass,e),_createClass3(ShaderPass,[{key:"setInput",value:function(e){this.input=e}},{key:"render",value:function(e,l,_,S,k){var E=this.fullscreenMaterial.uniforms;null!==l&&void 0!==E&&void 0!==E[this.input]&&(E[this.input].value=l.texture),e.setRenderTarget(this.renderToScreen?null:_),e.render(this.scene,this.camera)}},{key:"initialize",value:function(e,l,_){void 0!==_&&_!==ed&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}}])}(Tm)),ly=(I("b9",function(e){function _class3(e,l){var _,S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return _classCallCheck3(this,_class3),(_=_callSuper(this,_class3,["RenderPass",e,l])).needsSwap=!1,_.clearPass=new Om,_.overrideMaterialManager=null===S?null:new jm(S),_.ignoreBackground=!1,_.skipShadowMapUpdate=!1,_.selection=null,_}return _inherits(_class3,e),_createClass3(_class3,[{key:"mainScene",set:function(e){this.scene=e}},{key:"mainCamera",set:function(e){this.camera=e}},{key:"renderToScreen",get:function(){return _superPropGet(_class3,"renderToScreen",this,1)},set:function(e){_superPropSet(_class3,"renderToScreen",e,this,1,1),this.clearPass.renderToScreen=e}},{key:"overrideMaterial",get:function(){var e=this.overrideMaterialManager;return null!==e?e.material:null},set:function(e){var l=this.overrideMaterialManager;null!==e?null!==l?l.setMaterial(e):this.overrideMaterialManager=new jm(e):null!==l&&(l.dispose(),this.overrideMaterialManager=null)}},{key:"getOverrideMaterial",value:function(){return this.overrideMaterial}},{key:"setOverrideMaterial",value:function(e){this.overrideMaterial=e}},{key:"clear",get:function(){return this.clearPass.enabled},set:function(e){this.clearPass.enabled=e}},{key:"getSelection",value:function(){return this.selection}},{key:"setSelection",value:function(e){this.selection=e}},{key:"isBackgroundDisabled",value:function(){return this.ignoreBackground}},{key:"setBackgroundDisabled",value:function(e){this.ignoreBackground=e}},{key:"isShadowMapDisabled",value:function(){return this.skipShadowMapUpdate}},{key:"setShadowMapDisabled",value:function(e){this.skipShadowMapUpdate=e}},{key:"getClearPass",value:function(){return this.clearPass}},{key:"render",value:function(e,l,_,S,k){var E=this.scene,T=this.camera,M=this.selection,R=T.layers.mask,I=E.background,D=e.shadowMap.autoUpdate,O=this.renderToScreen?null:l;null!==M&&T.layers.set(M.getLayer()),this.skipShadowMapUpdate&&(e.shadowMap.autoUpdate=!1),(this.ignoreBackground||null!==this.clearPass.overrideClearColor)&&(E.background=null),this.clearPass.enabled&&this.clearPass.render(e,l),e.setRenderTarget(O),null!==this.overrideMaterialManager?this.overrideMaterialManager.render(e,E,T):e.render(E,T),T.layers.mask=R,E.background=I,e.shadowMap.autoUpdate=D}}])}(Tm)),2),cy=0,hy=I("bd",{LOW:0,MEDIUM:1,HIGH:2,ULTRA:3}),dy=function(e){function EdgeDetectionMaterial(){var e,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new df,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ly;return _classCallCheck3(this,EdgeDetectionMaterial),(e=_callSuper(this,EdgeDetectionMaterial,[{name:"EdgeDetectionMaterial",defines:{THREE_REVISION:zh.replace(/\D+/g,""),LOCAL_CONTRAST_ADAPTATION_FACTOR:"2.0",EDGE_THRESHOLD:"0.1",DEPTH_THRESHOLD:"0.01",PREDICATION_MODE:"0",PREDICATION_THRESHOLD:"0.01",PREDICATION_SCALE:"2.0",PREDICATION_STRENGTH:"1.0",DEPTH_PACKING:"0"},uniforms:{inputBuffer:new Tg(null),depthBuffer:new Tg(null),predicationBuffer:new Tg(null),texelSize:new Tg(l)},blending:0,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:"varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;\n#if EDGE_DETECTION_MODE != 0\nvarying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;\n#endif\n#if EDGE_DETECTION_MODE == 1\n#include <common>\n#endif\n#if EDGE_DETECTION_MODE == 0 || PREDICATION_MODE == 1\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nuniform highp sampler2D depthBuffer;\n#else\nuniform mediump sampler2D depthBuffer;\n#endif\nfloat readDepth(const in vec2 uv){\n#if DEPTH_PACKING == 3201\nreturn unpackRGBAToDepth(texture2D(depthBuffer,uv));\n#else\nreturn texture2D(depthBuffer,uv).r;\n#endif\n}vec3 gatherNeighbors(){float p=readDepth(vUv);float pLeft=readDepth(vUv0);float pTop=readDepth(vUv1);return vec3(p,pLeft,pTop);}\n#elif PREDICATION_MODE == 2\nuniform sampler2D predicationBuffer;vec3 gatherNeighbors(){float p=texture2D(predicationBuffer,vUv).r;float pLeft=texture2D(predicationBuffer,vUv0).r;float pTop=texture2D(predicationBuffer,vUv1).r;return vec3(p,pLeft,pTop);}\n#endif\n#if PREDICATION_MODE != 0\nvec2 calculatePredicatedThreshold(){vec3 neighbours=gatherNeighbors();vec2 delta=abs(neighbours.xx-neighbours.yz);vec2 edges=step(PREDICATION_THRESHOLD,delta);return PREDICATION_SCALE*EDGE_THRESHOLD*(1.0-PREDICATION_STRENGTH*edges);}\n#endif\n#if EDGE_DETECTION_MODE != 0\nuniform sampler2D inputBuffer;\n#endif\nvoid main(){\n#if EDGE_DETECTION_MODE == 0\nconst vec2 threshold=vec2(DEPTH_THRESHOLD);\n#elif PREDICATION_MODE != 0\nvec2 threshold=calculatePredicatedThreshold();\n#else\nconst vec2 threshold=vec2(EDGE_THRESHOLD);\n#endif\n#if EDGE_DETECTION_MODE == 0\nvec3 neighbors=gatherNeighbors();vec2 delta=abs(neighbors.xx-vec2(neighbors.y,neighbors.z));vec2 edges=step(threshold,delta);if(dot(edges,vec2(1.0))==0.0){discard;}gl_FragColor=vec4(edges,0.0,1.0);\n#elif EDGE_DETECTION_MODE == 1\nfloat l=luminance(texture2D(inputBuffer,vUv).rgb);float lLeft=luminance(texture2D(inputBuffer,vUv0).rgb);float lTop=luminance(texture2D(inputBuffer,vUv1).rgb);vec4 delta;delta.xy=abs(l-vec2(lLeft,lTop));vec2 edges=step(threshold,delta.xy);if(dot(edges,vec2(1.0))==0.0){discard;}float lRight=luminance(texture2D(inputBuffer,vUv2).rgb);float lBottom=luminance(texture2D(inputBuffer,vUv3).rgb);delta.zw=abs(l-vec2(lRight,lBottom));vec2 maxDelta=max(delta.xy,delta.zw);float lLeftLeft=luminance(texture2D(inputBuffer,vUv4).rgb);float lTopTop=luminance(texture2D(inputBuffer,vUv5).rgb);delta.zw=abs(vec2(lLeft,lTop)-vec2(lLeftLeft,lTopTop));maxDelta=max(maxDelta.xy,delta.zw);float finalDelta=max(maxDelta.x,maxDelta.y);edges.xy*=step(finalDelta,LOCAL_CONTRAST_ADAPTATION_FACTOR*delta.xy);gl_FragColor=vec4(edges,0.0,1.0);\n#elif EDGE_DETECTION_MODE == 2\nvec4 delta;vec3 c=texture2D(inputBuffer,vUv).rgb;vec3 cLeft=texture2D(inputBuffer,vUv0).rgb;vec3 t=abs(c-cLeft);delta.x=max(max(t.r,t.g),t.b);vec3 cTop=texture2D(inputBuffer,vUv1).rgb;t=abs(c-cTop);delta.y=max(max(t.r,t.g),t.b);vec2 edges=step(threshold,delta.xy);if(dot(edges,vec2(1.0))==0.0){discard;}vec3 cRight=texture2D(inputBuffer,vUv2).rgb;t=abs(c-cRight);delta.z=max(max(t.r,t.g),t.b);vec3 cBottom=texture2D(inputBuffer,vUv3).rgb;t=abs(c-cBottom);delta.w=max(max(t.r,t.g),t.b);vec2 maxDelta=max(delta.xy,delta.zw);vec3 cLeftLeft=texture2D(inputBuffer,vUv4).rgb;t=abs(c-cLeftLeft);delta.z=max(max(t.r,t.g),t.b);vec3 cTopTop=texture2D(inputBuffer,vUv5).rgb;t=abs(c-cTopTop);delta.w=max(max(t.r,t.g),t.b);maxDelta=max(maxDelta.xy,delta.zw);float finalDelta=max(maxDelta.x,maxDelta.y);edges*=step(finalDelta,LOCAL_CONTRAST_ADAPTATION_FACTOR*delta.xy);gl_FragColor=vec4(edges,0.0,1.0);\n#endif\n}",vertexShader:"uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;\n#if EDGE_DETECTION_MODE != 0\nvarying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;\n#endif\nvoid main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,0.0);vUv1=vUv+texelSize*vec2(0.0,-1.0);\n#if EDGE_DETECTION_MODE != 0\nvUv2=vUv+texelSize*vec2(1.0,0.0);vUv3=vUv+texelSize*vec2(0.0,1.0);vUv4=vUv+texelSize*vec2(-2.0,0.0);vUv5=vUv+texelSize*vec2(0.0,-2.0);\n#endif\ngl_Position=vec4(position.xy,1.0,1.0);}"}])).edgeDetectionMode=_,e}return _inherits(EdgeDetectionMaterial,e),_createClass3(EdgeDetectionMaterial,[{key:"depthBuffer",set:function(e){this.uniforms.depthBuffer.value=e}},{key:"depthPacking",set:function(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}},{key:"setDepthBuffer",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Jd;this.depthBuffer=e,this.depthPacking=l}},{key:"edgeDetectionMode",get:function(){return Number(this.defines.EDGE_DETECTION_MODE)},set:function(e){this.defines.EDGE_DETECTION_MODE=e.toFixed(0),this.needsUpdate=!0}},{key:"getEdgeDetectionMode",value:function(){return this.edgeDetectionMode}},{key:"setEdgeDetectionMode",value:function(e){this.edgeDetectionMode=e}},{key:"localContrastAdaptationFactor",get:function(){return Number(this.defines.LOCAL_CONTRAST_ADAPTATION_FACTOR)},set:function(e){this.defines.LOCAL_CONTRAST_ADAPTATION_FACTOR=e.toFixed("6"),this.needsUpdate=!0}},{key:"getLocalContrastAdaptationFactor",value:function(){return this.localContrastAdaptationFactor}},{key:"setLocalContrastAdaptationFactor",value:function(e){this.localContrastAdaptationFactor=e}},{key:"edgeDetectionThreshold",get:function(){return Number(this.defines.EDGE_THRESHOLD)},set:function(e){this.defines.EDGE_THRESHOLD=e.toFixed("6"),this.defines.DEPTH_THRESHOLD=(.1*e).toFixed("6"),this.needsUpdate=!0}},{key:"getEdgeDetectionThreshold",value:function(){return this.edgeDetectionThreshold}},{key:"setEdgeDetectionThreshold",value:function(e){this.edgeDetectionThreshold=e}},{key:"predicationMode",get:function(){return Number(this.defines.PREDICATION_MODE)},set:function(e){this.defines.PREDICATION_MODE=e.toFixed(0),this.needsUpdate=!0}},{key:"getPredicationMode",value:function(){return this.predicationMode}},{key:"setPredicationMode",value:function(e){this.predicationMode=e}},{key:"predicationBuffer",set:function(e){this.uniforms.predicationBuffer.value=e}},{key:"setPredicationBuffer",value:function(e){this.uniforms.predicationBuffer.value=e}},{key:"predicationThreshold",get:function(){return Number(this.defines.PREDICATION_THRESHOLD)},set:function(e){this.defines.PREDICATION_THRESHOLD=e.toFixed("6"),this.needsUpdate=!0}},{key:"getPredicationThreshold",value:function(){return this.predicationThreshold}},{key:"setPredicationThreshold",value:function(e){this.predicationThreshold=e}},{key:"predicationScale",get:function(){return Number(this.defines.PREDICATION_SCALE)},set:function(e){this.defines.PREDICATION_SCALE=e.toFixed("6"),this.needsUpdate=!0}},{key:"getPredicationScale",value:function(){return this.predicationScale}},{key:"setPredicationScale",value:function(e){this.predicationScale=e}},{key:"predicationStrength",get:function(){return Number(this.defines.PREDICATION_STRENGTH)},set:function(e){this.defines.PREDICATION_STRENGTH=e.toFixed("6"),this.needsUpdate=!0}},{key:"getPredicationStrength",value:function(){return this.predicationStrength}},{key:"setPredicationStrength",value:function(e){this.predicationStrength=e}},{key:"setSize",value:function(e,l){this.uniforms.texelSize.value.set(1/e,1/l)}}])}(Pv),fy=function(e){function SMAAWeightsMaterial(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new df,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new df;return _classCallCheck3(this,SMAAWeightsMaterial),_callSuper(this,SMAAWeightsMaterial,[{name:"SMAAWeightsMaterial",defines:{MAX_SEARCH_STEPS_INT:"16",MAX_SEARCH_STEPS_FLOAT:"16.0",MAX_SEARCH_STEPS_DIAG_INT:"8",MAX_SEARCH_STEPS_DIAG_FLOAT:"8.0",CORNER_ROUNDING:"25",CORNER_ROUNDING_NORM:"0.25",AREATEX_MAX_DISTANCE:"16.0",AREATEX_MAX_DISTANCE_DIAG:"20.0",AREATEX_PIXEL_SIZE:"(1.0 / vec2(160.0, 560.0))",AREATEX_SUBTEX_SIZE:"(1.0 / 7.0)",SEARCHTEX_SIZE:"vec2(66.0, 33.0)",SEARCHTEX_PACKED_SIZE:"vec2(64.0, 16.0)"},uniforms:{inputBuffer:new Tg(null),searchTexture:new Tg(null),areaTexture:new Tg(null),resolution:new Tg(l),texelSize:new Tg(e)},blending:0,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:"#define sampleLevelZeroOffset(t, coord, offset) texture2D(t, coord + offset * texelSize)\n#if __VERSION__ < 300\n#define round(v) floor(v + 0.5)\n#endif\n#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\nuniform lowp sampler2D areaTexture;uniform lowp sampler2D searchTexture;uniform vec2 texelSize;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixCoord;void movec(const in bvec2 c,inout vec2 variable,const in vec2 value){if(c.x){variable.x=value.x;}if(c.y){variable.y=value.y;}}void movec(const in bvec4 c,inout vec4 variable,const in vec4 value){movec(c.xy,variable.xy,value.xy);movec(c.zw,variable.zw,value.zw);}vec2 decodeDiagBilinearAccess(in vec2 e){e.r=e.r*abs(5.0*e.r-5.0*0.75);return round(e);}vec4 decodeDiagBilinearAccess(in vec4 e){e.rb=e.rb*abs(5.0*e.rb-5.0*0.75);return round(e);}vec2 searchDiag1(const in vec2 texCoord,const in vec2 dir,out vec2 e){vec4 coord=vec4(texCoord,-1.0,1.0);vec3 t=vec3(texelSize,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(coord.z<float(MAX_SEARCH_STEPS_DIAG_INT-1)&&coord.w>0.9)){break;}coord.xyz=t*vec3(dir,1.0)+coord.xyz;e=texture2D(inputBuffer,coord.xy).rg;coord.w=dot(e,vec2(0.5));}return coord.zw;}vec2 searchDiag2(const in vec2 texCoord,const in vec2 dir,out vec2 e){vec4 coord=vec4(texCoord,-1.0,1.0);coord.x+=0.25*texelSize.x;vec3 t=vec3(texelSize,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(coord.z<float(MAX_SEARCH_STEPS_DIAG_INT-1)&&coord.w>0.9)){break;}coord.xyz=t*vec3(dir,1.0)+coord.xyz;e=texture2D(inputBuffer,coord.xy).rg;e=decodeDiagBilinearAccess(e);coord.w=dot(e,vec2(0.5));}return coord.zw;}vec2 areaDiag(const in vec2 dist,const in vec2 e,const in float offset){vec2 texCoord=vec2(AREATEX_MAX_DISTANCE_DIAG,AREATEX_MAX_DISTANCE_DIAG)*e+dist;texCoord=AREATEX_PIXEL_SIZE*texCoord+0.5*AREATEX_PIXEL_SIZE;texCoord.x+=0.5;texCoord.y+=AREATEX_SUBTEX_SIZE*offset;return texture2D(areaTexture,texCoord).rg;}vec2 calculateDiagWeights(const in vec2 texCoord,const in vec2 e,const in vec4 subsampleIndices){vec2 weights=vec2(0.0);vec4 d;vec2 end;if(e.r>0.0){d.xz=searchDiag1(texCoord,vec2(-1.0,1.0),end);d.x+=float(end.y>0.9);}else{d.xz=vec2(0.0);}d.yw=searchDiag1(texCoord,vec2(1.0,-1.0),end);if(d.x+d.y>2.0){vec4 coords=vec4(-d.x+0.25,d.x,d.y,-d.y-0.25)*texelSize.xyxy+texCoord.xyxy;vec4 c;c.xy=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(-1,0)).rg;c.zw=sampleLevelZeroOffset(inputBuffer,coords.zw,vec2(1,0)).rg;c.yxwz=decodeDiagBilinearAccess(c.xyzw);vec2 cc=vec2(2.0)*c.xz+c.yw;movec(bvec2(step(0.9,d.zw)),cc,vec2(0.0));weights+=areaDiag(d.xy,cc,subsampleIndices.z);}d.xz=searchDiag2(texCoord,vec2(-1.0,-1.0),end);if(sampleLevelZeroOffset(inputBuffer,texCoord,vec2(1,0)).r>0.0){d.yw=searchDiag2(texCoord,vec2(1.0),end);d.y+=float(end.y>0.9);}else{d.yw=vec2(0.0);}if(d.x+d.y>2.0){vec4 coords=vec4(-d.x,-d.x,d.y,d.y)*texelSize.xyxy+texCoord.xyxy;vec4 c;c.x=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(-1,0)).g;c.y=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(0,-1)).r;c.zw=sampleLevelZeroOffset(inputBuffer,coords.zw,vec2(1,0)).gr;vec2 cc=vec2(2.0)*c.xz+c.yw;movec(bvec2(step(0.9,d.zw)),cc,vec2(0.0));weights+=areaDiag(d.xy,cc,subsampleIndices.w).gr;}return weights;}float searchLength(const in vec2 e,const in float offset){vec2 scale=SEARCHTEX_SIZE*vec2(0.5,-1.0);vec2 bias=SEARCHTEX_SIZE*vec2(offset,1.0);scale+=vec2(-1.0,1.0);bias+=vec2(0.5,-0.5);scale*=1.0/SEARCHTEX_PACKED_SIZE;bias*=1.0/SEARCHTEX_PACKED_SIZE;return texture2D(searchTexture,scale*e+bias).r;}float searchXLeft(in vec2 texCoord,const in float end){vec2 e=vec2(0.0,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.x>end&&e.g>0.8281&&e.r==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(-2.0,0.0)*texelSize+texCoord;}float offset=-(255.0/127.0)*searchLength(e,0.0)+3.25;return texelSize.x*offset+texCoord.x;}float searchXRight(vec2 texCoord,const in float end){vec2 e=vec2(0.0,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.x<end&&e.g>0.8281&&e.r==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(2.0,0.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e,0.5)+3.25;return-texelSize.x*offset+texCoord.x;}float searchYUp(vec2 texCoord,const in float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.y>end&&e.r>0.8281&&e.g==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=-vec2(0.0,2.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e.gr,0.0)+3.25;return texelSize.y*offset+texCoord.y;}float searchYDown(vec2 texCoord,const in float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;i++){if(!(texCoord.y<end&&e.r>0.8281&&e.g==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(0.0,2.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e.gr,0.5)+3.25;return-texelSize.y*offset+texCoord.y;}vec2 area(const in vec2 dist,const in float e1,const in float e2,const in float offset){vec2 texCoord=vec2(AREATEX_MAX_DISTANCE)*round(4.0*vec2(e1,e2))+dist;texCoord=AREATEX_PIXEL_SIZE*texCoord+0.5*AREATEX_PIXEL_SIZE;texCoord.y=AREATEX_SUBTEX_SIZE*offset+texCoord.y;return texture2D(areaTexture,texCoord).rg;}void detectHorizontalCornerPattern(inout vec2 weights,const in vec4 texCoord,const in vec2 d){\n#if !defined(DISABLE_CORNER_DETECTION)\nvec2 leftRight=step(d.xy,d.yx);vec2 rounding=(1.0-CORNER_ROUNDING_NORM)*leftRight;rounding/=leftRight.x+leftRight.y;vec2 factor=vec2(1.0);factor.x-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(0,1)).r;factor.x-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,1)).r;factor.y-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(0,-2)).r;factor.y-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,-2)).r;weights*=clamp(factor,0.0,1.0);\n#endif\n}void detectVerticalCornerPattern(inout vec2 weights,const in vec4 texCoord,const in vec2 d){\n#if !defined(DISABLE_CORNER_DETECTION)\nvec2 leftRight=step(d.xy,d.yx);vec2 rounding=(1.0-CORNER_ROUNDING_NORM)*leftRight;rounding/=leftRight.x+leftRight.y;vec2 factor=vec2(1.0);factor.x-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(1,0)).g;factor.x-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,1)).g;factor.y-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(-2,0)).g;factor.y-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(-2,1)).g;weights*=clamp(factor,0.0,1.0);\n#endif\n}void main(){vec4 weights=vec4(0.0);vec4 subsampleIndices=vec4(0.0);vec2 e=texture2D(inputBuffer,vUv).rg;if(e.g>0.0){\n#if !defined(DISABLE_DIAG_DETECTION)\nweights.rg=calculateDiagWeights(vUv,e,subsampleIndices);if(weights.r==-weights.g){\n#endif\nvec2 d;vec3 coords;coords.x=searchXLeft(vOffset[0].xy,vOffset[2].x);coords.y=vOffset[1].y;d.x=coords.x;float e1=texture2D(inputBuffer,coords.xy).r;coords.z=searchXRight(vOffset[0].zw,vOffset[2].y);d.y=coords.z;d=round(resolution.xx*d+-vPixCoord.xx);vec2 sqrtD=sqrt(abs(d));float e2=sampleLevelZeroOffset(inputBuffer,coords.zy,vec2(1,0)).r;weights.rg=area(sqrtD,e1,e2,subsampleIndices.y);coords.y=vUv.y;detectHorizontalCornerPattern(weights.rg,coords.xyzy,d);\n#if !defined(DISABLE_DIAG_DETECTION)\n}else{e.r=0.0;}\n#endif\n}if(e.r>0.0){vec2 d;vec3 coords;coords.y=searchYUp(vOffset[1].xy,vOffset[2].z);coords.x=vOffset[0].x;d.x=coords.y;float e1=texture2D(inputBuffer,coords.xy).g;coords.z=searchYDown(vOffset[1].zw,vOffset[2].w);d.y=coords.z;d=round(resolution.yy*d-vPixCoord.yy);vec2 sqrtD=sqrt(abs(d));float e2=sampleLevelZeroOffset(inputBuffer,coords.xz,vec2(0,1)).g;weights.ba=area(sqrtD,e1,e2,subsampleIndices.x);coords.x=vUv.x;detectVerticalCornerPattern(weights.ba,coords.xyxz,d);}gl_FragColor=weights;}",vertexShader:"uniform vec2 texelSize;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixCoord;void main(){vUv=position.xy*0.5+0.5;vPixCoord=vUv*resolution;vOffset[0]=vUv.xyxy+texelSize.xyxy*vec4(-0.25,-0.125,1.25,-0.125);vOffset[1]=vUv.xyxy+texelSize.xyxy*vec4(-0.125,-0.25,-0.125,1.25);vOffset[2]=vec4(vOffset[0].xz,vOffset[1].yw)+vec4(-2.0,2.0,-2.0,2.0)*texelSize.xxyy*MAX_SEARCH_STEPS_FLOAT;gl_Position=vec4(position.xy,1.0,1.0);}"}])}return _inherits(SMAAWeightsMaterial,e),_createClass3(SMAAWeightsMaterial,[{key:"inputBuffer",set:function(e){this.uniforms.inputBuffer.value=e}},{key:"setInputBuffer",value:function(e){this.uniforms.inputBuffer.value=e}},{key:"searchTexture",get:function(){return this.uniforms.searchTexture.value},set:function(e){this.uniforms.searchTexture.value=e}},{key:"areaTexture",get:function(){return this.uniforms.areaTexture.value},set:function(e){this.uniforms.areaTexture.value=e}},{key:"setLookupTextures",value:function(e,l){this.searchTexture=e,this.areaTexture=l}},{key:"orthogonalSearchSteps",get:function(){return Number(this.defines.MAX_SEARCH_STEPS_INT)},set:function(e){var l=Math.min(Math.max(e,0),112);this.defines.MAX_SEARCH_STEPS_INT=l.toFixed("0"),this.defines.MAX_SEARCH_STEPS_FLOAT=l.toFixed("1"),this.needsUpdate=!0}},{key:"setOrthogonalSearchSteps",value:function(e){this.orthogonalSearchSteps=e}},{key:"diagonalSearchSteps",get:function(){return Number(this.defines.MAX_SEARCH_STEPS_DIAG_INT)},set:function(e){var l=Math.min(Math.max(e,0),20);this.defines.MAX_SEARCH_STEPS_DIAG_INT=l.toFixed("0"),this.defines.MAX_SEARCH_STEPS_DIAG_FLOAT=l.toFixed("1"),this.needsUpdate=!0}},{key:"setDiagonalSearchSteps",value:function(e){this.diagonalSearchSteps=e}},{key:"diagonalDetection",get:function(){return void 0===this.defines.DISABLE_DIAG_DETECTION},set:function(e){e?delete this.defines.DISABLE_DIAG_DETECTION:this.defines.DISABLE_DIAG_DETECTION="1",this.needsUpdate=!0}},{key:"isDiagonalDetectionEnabled",value:function(){return this.diagonalDetection}},{key:"setDiagonalDetectionEnabled",value:function(e){this.diagonalDetection=e}},{key:"cornerRounding",get:function(){return Number(this.defines.CORNER_ROUNDING)},set:function(e){var l=Math.min(Math.max(e,0),100);this.defines.CORNER_ROUNDING=l.toFixed("4"),this.defines.CORNER_ROUNDING_NORM=(l/100).toFixed("4"),this.needsUpdate=!0}},{key:"setCornerRounding",value:function(e){this.cornerRounding=e}},{key:"cornerDetection",get:function(){return void 0===this.defines.DISABLE_CORNER_DETECTION},set:function(e){e?delete this.defines.DISABLE_CORNER_DETECTION:this.defines.DISABLE_CORNER_DETECTION="1",this.needsUpdate=!0}},{key:"isCornerRoundingEnabled",value:function(){return this.cornerDetection}},{key:"setCornerRoundingEnabled",value:function(e){this.cornerDetection=e}},{key:"setSize",value:function(e,l){var _=this.uniforms;_.texelSize.value.set(1/e,1/l),_.resolution.value.set(e,l)}}])}(Pv),py="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAQCAYAAACm53kpAAAAeElEQVRYR+2XSwqAMAxEJ168ePEqwRSKhIIiuHjJqiU0gWE+1CQdApcVAMUAuARaMGCX1MIL/Ow13++9lW2s3mW9MWvsnWc/2fvGygwPAN4E8QzAA4CXAB6AHjG4JTHYI1ey3pcx6FHnEfhLDOIBKAmUBK6/ANUDTlROXAHd9EC1AAAAAElFTkSuQmCC",vy="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAAIwCAYAAAABNmBHAAAgAElEQVR4Xuy9CbhlV1ktOvbpq09DkiIkUBI6kxASIH0DlAQiIK1wRfSJTx+i4JX7vKIigs8HXpXvqVcvrcC9agQ7IDTSSWgqCQQliDRBJKkkhDSkqVPNqVOnP+8b//rH3P+eZ+199tlznVTlvVrft7+1T7OaueZY42/m37QALKNk2wHg1pITlB17mC+Pp11W3X/LHyT32vhg48/5SOv+PnwpsHA70JoGlueB1iKApeqzvOzn44GatTB76Xzhd7suBR7+WWADgDEAwwCG/L54b/poDLrHuvvm70Z2Avhsc+PVcxscBU8F8C8ADg5+ipIjD/PlGwfgju8B924E5seARUfLsiNmqQW0IjL8+7L2NYD/7COBzfcCm+aB8SVgdAkYIRCXKyDax4EdAanL5PuNPllNvXDlAHwFgP8AcC2AhRIoDXbsYb48dl5WkVFTE3LGDcC9m4CZCWBuFFgeAZaGAYJQQCRqDHT+McJrVb8zwATUXH02MHYfMHEIGFsAxgjApQqACYQORjtd/B7Axt/z79sC0+cMPgjjlwPwVwHcA+DfAHzTxcVgWBroqMN8+cYBeM71wH0TwKExYHYUWCIAHYRLTlkCYgcIBcAgU/n3qy8GRu4HRgnAOWBkERhddPAJhGJDBxkvw7cqimr+zFM/ZLnZF64cgL8BYD+AWwB8x/dlWuWagHiYL984AJ/0RWBy1AE4AizyM1yxYAcTigW55xMbAkxEiwEdkJ/ZCQxPAiOHgBECcKEC4TBZcKkSv+mTieNcNPNC26mLNsj45QD8LQDTAO4GcJt/7iw2bfoG4WG+vAGwm9ExiEg69zpg/wgwPQLMjgALzn4E4aIzoJjQ9g4024uygkj+pyuAoX0VAIfngOH5NgCHMhAm8Sv2y3XDZeBhNIp8OzJE8OsBzAKYBHAXgDt8/4O+MVT0j4f58o0D8Pxrgf3DwMwIMEPQEYRkNwfgsuuDZLskip0No0gWMD/9HGDoADAkAC4Aw/wsAgZAgs2Z0ABI0GU6IVmKv+f28KDnHxkA/G0A8y6G73N9kOCjXnh/Ebb6OvgwX75xAF5wLTA1VIHPADgMLDj4yIA5AAm6aCUnv4oz46eeDwxNAUMzwJAz4BABSNDFTwSfg7DDKHE23MG5PqIY8A1u/dINs9dBdy8AgnGPM2NfUBrsnw7z5RsH4IXXAAcJviFgluAbygBINnSLWOAjGxJ4pgOKDV0v/OSLKp8iGXBovhLBBOCQM2ACoTOhnYrAdItYbCij5JFzRyIAqRccAnDAQUjg6UNQ7hsMXP0cRQAexss3DsCLCECCLwCQzMcPwUi2MwAScAKbfnY/YRLFQ8DHX+IAJAMSfDkAF13kLvleIjhjQQHxUVS3jjgGpKeeNzYVQEjgUS8k+PghONdhIwAP4+XXBYCHKIJbwJyDTgaIAdCBJx3Q2M8tYAHP9m4df/ylQOsQ0JqtRLCx30K1wtLBggScQOgsKBGcWHAJeOwRC0BSM1mQIKRbhh+Bj98JQP6t4U0APEyXXxcAEnxkQAFwoVUxID9kvQg+c1C7vidRbIDkc24B//hTQGumDcCWA5DgMxASdNIFBUI5pCML8v8API5zfEQx4BudgqiczviSnJhQwCP4BMCGl+wO8+U7AJi/W4O4YS6+pmK/2ciADsAOBhTIIiAJnPB7AvNjP+0AnANaYkAHX2JBAc+tYaJXOqBZv24Vc386XW5dtkHGW+4HFAJonpOe+YYQZAShgKjv3PNvPQaxVoI8zJdfFwASfPzMUwS3Kt1v0UFIlos6oDFdAGFcliMAP/ryAEAGNwQRnDOgLbdlIEwrIs6AZ/QgkMMHQF6ZAKQcJAsSYPwIeAIk9wJgoPK1gi7+PwF4GC/fOAAvIQPSs0URTPBJ/Pp3GSEGRHfBCIQ0xowBtUbcAj7ys5X4Jfu1HIAGQrIgQRXEsAFQIORDFhiDY/rMHmrU4QUgR08AkgUjCAW6CD6CkwBsAIQC4GG6fPMA3OXiNzCg2I9gNCMksmAAoemDzoimFwL48M85AKkiuQVMAAp8CYRRDAt8GQiJ67N6GJODAXAHlsGguscA2AJg1IPGYmxOpBxFWkRN9LsATgIwXnNs/v/5z/9XCf8BO3YAtxbc/46/KDt+5+ea1Yku2VUxHz/z0v24FwMGK1gWsK2OUUxHHdCBeRUB6OxHABr4ZICIBd0QWSF+XRdMTAjgCdTrG9cBNwE4F8CpDkICyYLGsuhFt6zs+gISwUen8zEAjgMw4cfx2H6O/90yAFo84Cbg4ID3/9TfLTt+5+ebnRABkODjx0SwPi5ec/FrYpmqSAxM8Dn60CsqAFI6GfhqAMiDE/gokmvEr0C4PgDkBQm40wE8zMFEUDKEVoxIMLl/KS73mE7H9d+vcKHQQcjwW0Yu9nP8m8sAmOIBuWY6wP2/4s0ezjjg8TuvaR6ABJ70vxUApGrm7EbGE+i472BAB+WHfqHS/eoAaEwY2E9+wLSXTqhI7CXgnB6LCoOJ4BiST+hTnG0HcCwAglCx3ARoZEVFXnBPp/O/A/hXACc7CPs9/i1lAOyIB+RDX+P9/+pbQjjjAMfv/PL6AFDs1wFAgs/9fgKfgdE/ZEpuiQlbwAde6QAMBgiRmsSwA9BY0JfjovGRDBMH4TlcXGhcBOc6HkF0gjPhZgchxTLZMAci/04W/B6Ab3t09EPXcPyflgFwRTwgJ2MN9/8bf5qFM67x+B/aW4XQz42FeL0YrRyikztUFw0704mf9kXgxhOAqc3AAsPyRxxQCs/PdXOFY0W1KHy3QIUGtx+6vdnx1vsB+dsTncm2AogglFgVEAlUWrOMB2RyEmMCGQ/Y7/HvKns6tfGAnJQ+r/9b76oJZ1zD8WdyQjYBh8aBhVEHjELouQ8ukQ7VRSCJAALwkr+sALhnGzDD3JAJYJHg9uhoi4bx8ytkWUtvHT/7+Zc4dw1uZ3612fH2dkQf7yxIEEockwkJQn4IQoq8unhAhmPRKKFx0uv4K8ueTs94wD7u//VX9ghn7OP4c+4G7h8HpseB+dF2AKlFLwuAIZ8jD6NPrOhAffmfA9/ZBuzZCkyRWSeqBCWyoYGQ5yQrBpDbum/ME1HoPo0XEkSD2zlfbna8q6+EUJcTCxKEtHL5EQjP6BEPyIgYAZBvYt3xHyx7OqvGA65y/7/9wVXCGVc5/sl7qxD66dEqiYgRzAqhN1A4CBNAAlDyAFI+iZ9/N3DLJuC+jcDUBmCWyUnOrmTYCMIOkNclLg0B8/RsNLg9+UvNjnd1APLmmQpFHyEBROuWACQT8nN+H/GAvY7/VNnT6SsesMf13/CpahGnZzhjj+PPmwX2MYdDIfQexWyBAwEUOQDrRDN/98p3A7dvAO6fAA5sqHJDBEAyoUVGkwEd6HR12XU4kwzfl6fCXTZzjy57vvnR513X7Hj7AyDvggAUi9EyFgiZqNxPQF6345nOWbD1HQ/Y5fpvuLa/2+82/vNHgAPDFQDnhoF5j2C2qBWCI8bw1eRw5CL5l94L3DEOTI4DB8Y9OWmsEu/zBJ3rgsaybqBob/7A4C7jtWcooRrczr+u2fH2D0AOQgAUCxKEP7aGgLy64+m6KdjWFA9Yc/03/Osa4glrjr+AupqHz1sEs0cxG0BC9HIePLoit9eNkVf9L+DuUWByDJgaq4ybGYLPAWgiXmLedUE7dwC7saL7CqfPKXi4NYdaykCD410bAHlDEsNiwZ9wAPYbkJcfz6T2gm3N8YDZ9d/wHxUA+739fPwXPrSKYGb+BuP3jAFDElFH9HIWwbzCIGkBr/or4J4RYO8oMOW6ZVcAuvi1Cgoha04BCwT5gfMKHm7NoRde2+x41w5A3hQZkADk5+cGiAeMx3+/7AENFA8Yrv/G71cAXFM4Yzj+otOAaQLQA0gZxaIIZtMDFTigKJV8H9Iq6aZ59ZXAvSPAvpEKgBTtBODcSCWCZeRYtpzrmLyeGNCAyFl1v+Hei8qeb370Rdc2O97BAMi7EgB/2QG41nhAHU9LuWAbOB7Qr//GPRUA13r7Gv9FZwIMoVcEswEwfDoimEP0shKKtIphaZQAXv1+YM+wA3DEdcvRKkGJADQQEsQuhi1Tjt95vBsh5nx2IO59SsHDrTmUOStNjndwAAqEry0IyCMICkOyiuIBNwBvPFQQT7gBuPjc9oRYAIHyOEL4vIFEYVNaOou5vCGE/tV/A0wOVcnpzI47NOri3QFIBpSeaSDUdYLOSWvYImSGgftpJDa4MWJbAGxivGUA5MAOc0Be6eVLj7/4Mk+hzCOYPYpZDBiNkLh+G/M3yFyv/ltgL3W3YQfgcFUhgRY2PwY+Z7/EhAR1SFyXCOb57r28QfQBsJQBMn5D4y0HYLPje9Cd7RIC0PM3EiMofF4gVCBp1P840ix/gyz56r+vAMjk9Gl375iB4+CzveuZdLkkEPJ8ZEfX/6R73vOjzT5Si9hucLxHAVg4PwJgRwh9CKOXK8YA4ZEqKZXSQWh5P+5AftXfA/uGKvYjCKn72cctbFrZNECka5L5CPwIPtMH3TVz17MLB5gdLgA2Nd6jACycHwLQxFEUSR5ASvARDB0h9AQb9bXIgCGk6lUfAPYTgEPAITKgg1BObk58srTJgG58WMkWMaAbQQT1nc8rHGANAJsc71EAFs4PAagQestgC1lsBJ4BMCSOK6dDUcwqqaFiQr/0QeAAAdjy+jBiQQeeMSBZT3nCPUDIa9z+/MIB1gCwyfEeBWDh/BCAeQSzgkjFfGLBBD5nxQ4DxN0wv3hVxX5TBGDwL5obxvVA5YqYL5BeMLd66YYxJpRB0gK+96LCAdYAsMnxHgVg4fwIgMrhUPKQ2C+Bz0PmBTqBMQehAbDlIjj4F80KJguSVZ0FuXpjoCOgXawLjALhbT9eOMAuAGxqvEcBWDg/l1IE05Ed0ygZnyHdz0VwCqEPIfNyx0QQvvLDFQCp+8nfZk5und8tXwIgWcHSNX0N2CJmnAl3v6RwgNnhl17T7HiPArBwfghAS7mV/hey2JS9FvM3BLpUUi1YwDRMXvkRYJoAlAh2l0dcZ04s6JUTDIjyBcrl4yDc/dLCAdYAsMnxHgVg4fxwKVwJgGEJNmWtxpQMpX9on2eRhVA+O56AjMfnP+e3Xvf3NwG4xIPTleiY55bpGh6UbafNU0l0z0p+5Jh5HqYJ6b51nP6XP8cx12XNHQVgIQB/bFPVg2OC7Q+WgVFWng/FvtWLI06uWh5oguKEcXVS/9sEAF//VGD7t4ETDgJbF4CNi8CGZWBs2fPL/H6Vwp2KEtVk4fJ+v/EIYPN9wKa5qu+IncfPwXHVZe/aOL3EbwS7xv8A1rQvnO0j8PArTgTGZ4BxFv9mIxhOCGsv+0OPYDRghcLfkWkEuq0+G00x4OtfDGz+d2DbHmDLjL8si8AYP/7CGIAiEEMTG92zXqSbH+d9R2aA0XnvO+JjthiIrOVDHHPOkBrzUQAWAPsZp3oPDpa/Xag6EVkLBK+5rAnJC3/nYk/APD704WiEAV8OTHwX2LQH2DgFbJgFNrBhjd8r79deGoEwsllgNBOzy8CdjweG9wBj08AIAci2D6HafmyAk4/Z7SJ72hGYRwFYAMDLTwOGp4FRFgD3HhzqRGQiyeurqOdG6r0Rm8IEZjzRlkiqCWoEgK8Axm4BJu4HJhyAbFhDxmbDGnZO4j0SgLGDkpibgEq66TJw/1nA0F5gdLpq+zDqFfd5LMeWqu5HNST0uJOIllg+qgMWgI+HPv0xwLA3gWHpW2sC441gCECbmKziaGrnUdMO4aHeh6MxAP4SMHI7ML4HGD8AjHvHJGNAgpDgY/ck3stipRemvVhc+uASMPUEYGh/9dIRgGx8Y+MNbR/00uVtH0wEx94j/v0oAxaA8Ed+GBieAYZZg5kADC0QWGOFzGJlcGPzl1BxNLXD8sk4xftwNAbA/wwM3wGMUmxOOQBnHXzetIYvibonmSiuYTNjriVg7glAiwBk0fNZH6+PmX9P6kfNmCXGpftJ7TgKwBIAnln14BAAYxMYm5C6RjCyCoOyr0qkD/c+HI0B8DXA8N3AyCQwesD1VQKH7EcASm1Q+y4CkN9pUKiVF5nLvy+fBbTUd8QBaH1HvNBROiZvfsNnrF4kcvPwpdsBLBeU18Nf7AB23Dp4ecHC8oBgUlJJecLS+7+WOpE3gbE+HKw+yoevCYkMGKqPJrdEKARutaFYRs1fiEZ0wP8CDN8LDO8FRqYq3W10pgKgfYLaYCzootgA6KXaTA90y374TKB1sBozy77xHFZ536utRgAmEaw6g5kUSFZwSXnA330qsOlfgHMPDlZesLA8IOjoLypPWHj/11EnCiVwkz7kAExtsGraYUWdSDX5TmsagL8KDBGA7Bd30JsW0oWivnEOQNP7yGTSBR101AlZSUtGyfgZDkCWY1HnJdcBVe6325hTvelg2CQjZNDygG/2An0j1wKnL6y9vGBheUC8prQ8YeH9X39OVQSc7Mc6fCaKvAeHdCIVf4yMYCynTpX+nb97NJmlSQb8r8DQHm9YOFUZTKOzoXGhs6AxF0HIexcLBvWBuiHN8s2ne98R3qc6L4Vyb2oBVjfm9MIFHbjDCh6kPOBbQoG+oW8CO5bWVl6wsDwgfr20PGHh/X/1iaEIuDcCTIW/1Q4rFv8OnYiW3c+W2iKwUjKbyjQNwL1uuR6sAEgDgq1brXOmV81PxhNB6DUDBSYzQJwFtz623XcktX1Q1VWKaTF/zZhVazBVYA1tX5MazsGvobwe/jQr0Ne6BTh5uf/ygoXlAfG60vKEhff/rSe1i4DnTWDUACY1guFTDqLYdCBvf6DJYSMYATBfOx1kLfj1v1axH10nQ3Sd0GUkBnTfpemtBJgseIKQAHLQcVxa2TnuMW0Aqui5es8xBIegVdVVE8VhzHnLh65WMB9An+X18K6aAn2tO4ETl6vqbKuVFywsDwhevqg8YeH93/Rk70JE90nowxZbIJjvS3WYNSGUwGHJTpPxwwcbBuBrgRYBeKACn7VtpdUu/c0NJxO9BIxcKu4TTODzbkonPLoaL0vyUQRb2y8HsL1ckfWzMeuFi40Qezqi+yiPhyt7FOjr6/gCFwgP7Xb5vssTFt7/nQRg6MGRWmDRoeyTlpgw68GRTwgZgo1gGmXAX6/8dtaylSKY/koyID9BhzML3q1gAos2AcOrZYSoq/pJp1VtODRm9Z3LS/7WjVkvXOzEtOpKyGrlAT+4SoG+VY8vBGCvy/dVnrDw/vee65NBJiAjBIVcAJQjOm+DkCZEeiGAMw6sAwDZsJrAdhFM9rPGhd4904Co5oVuCZPV6kD40Ec6+9W8dBTBsfdc3nkpvnB82fp2RPcs79dHgb51LA9ofsDV6vut5/3PnxcAmLVBiDqgevDaJLkYrpuQxzcNwN8AWgIgRbB8loEBzXDwl4cGiDGft58SCOWGedgjvOJ+bPvgRkiuA+ZjzhnQQOiFNVbloa7l/fos0LdO5QENgEXlCfs8Qbf7HyMA3QVjYihYhLENgjX9y/qwxQmRU/asfd0ZcLU2CHVGyusJQLKfVi98CS12T5f7iECkHpsMkAhCF8+nshWH2I/jXsOYO144GV/9ApAIrS3vt4YCfetQHtAA2G+/4PW4/2PPbzMgmUMi2NoeSCRxIt2/FvuxWURIWCXg357gfTjEDNIHnTRXRCpH5ugKwGl3HpMBXQc0v6WLYVm/5limj04rG762K2uYY9jBkr9+rI03NL5ZbczS/dJ+LQyoga4o77fGAn0NlwdMAOy3vl/T938KAcj121z8Bn+Y9eWQJRz8Y6kNagDh2ey5EvxjxQD8TWdAuneCCO4An1vw5vdzQMmdktwq7pLZQR+dM34+ZumAxvY1Y04uqOAJ6FsExzeto7zfAAX6GiwPaLWR1lrfr8n7f/Rl3QGzmsis+/uO71V9OFgP2gpPhgr7TGRqRUT6dyvr4aIs/pm/2zVUNbBSv6G8e5pEv0Cvec7Po7+bTtjlBRlkvAMBkDeQyvsNWKCvofKACYBrre/X1P0/oWEAnnFD1YdjhtXxR73mX10FfCHHE9pVWcGAI/S0gKsfA2y+twrFZw6Hxf/F0Pk8Ri/kpGSnMuDx5T0iACgQHioo0NdAecBUHW6QdsV2/cL7v/Cyqr5gnc42CCOcfX1VIZ/V8We9IDmTzVXwPDJiXuKXPxtDBma8+lzP4WAgKkPxCUAPE4v5GzEuMX0PYJPLhB6FJsc7MAMmkVxaYC/K9gG+F1++8AQ7Gwbgk78I7GFpXgIwFiRXOwaJZPUbiR0yCUDRk+cHf+YpwMj9HgfI8ClGPyvsSiH0WSKRuYlitLb/zHM/JOSs5C/YIC9cMQDZr/dwxgOW9gtGYUBi0wA8l304vDQvAchilFbpIBQhZ7Ejq6ZQ0/Yhil8y4j89Axie9DAsD6FX9HOK3QtROTFkviN83kG4felIY8DCeLrSeMDSfsEovAECUFsTjHD+tcB+tkFgcXKvBRir7qtFl9owmO4Xy/1G3bAFfPrZHorFNWBFwHjQAFctIghj2kBarw06If/+MM9ZqTN6DgsDojCerjQesLRfMApvoGkAWh8Ob/tgAPSKWCp8ngNQtadjmTdltvNvn3peFYhgQQgh+iUmEaUAUoXM1yRLmWuFLaE9Z+XIAWBhPF1pPGBpv2AU3kDTALzwmqo6qtVh9kJErAudABia38TC5wJgS2xIhAwBn3yhByL4EhzXfRXxYsDTJ4IvrNN2JFMxZcBzVo4cABbG05XGA5b2C0bhDTQNQLZBYH1AVsQSAAU+imI1obHyblnjG/kJk3U8BHz8xVUQAhnQIl5CyNgKAGp5LKSSCoAySh5Jj79vTagcxUaIBeRNe79g9gq+DXig4wGzy+PONfT7RWFA4noAkGXZVAhcBckJQgNgrLiaNb3paIDo1vHHX+oA9LQBi4DxJcOUPJUnTgU2NJUyROs8irGARxQAC+PpCtsFd40H/AEf0gMQkLgeACT41PiGoLOKqyrJq3K/Ya9mNyr5FusN/uPLPIeDa8Bc+w3rtyl4VFHaMZc3i9RWBM9jjzgAFsbTFbYLRmm/YBTeQNMAtD4cBKDXBTQGdAB2MGBo8SCLmEuS1AFVAJ3A/NhPt0PoCcA8bSDG76XI7aySg6JYuGfKwJHFgH0E5B3ueMCe/Y4L+xVHAOZ+9EHcEgQgwbeiEYx6jwTdz4qfu7EhEJqxGqruf/RnHIAEnxgwBM0aC8aUAYWNBRCmoIll4HTqO122QcZbrgMWxtMVtgvuOx6wa7/jwhtoGoDWh4MBJ16WN4lfr8AqI0TVV1O1fa9BbQzovkAy4Ed+NgCQUSxZCFWvCOaOFREXyUwZOPIA2GdA3uGOB6wPaOz+QPv5S+MA3OXiN9aclghW+d3IgupBF2pPqxcxGenDPxfSRh2ASiKKiVP2PaZScvAKoA0VDc6cOlIB2GdA3uGOB1zR77iwX/F6AFB9ONSOQW0frA50sILVcckWJyIDSgwPAVcJgFbYuZ3FJvAlEHbJ3IsgJLGedeBIA+AAAXmHOx6wo99xYb/i9QKg2iAIfDJEJHqj4SExbEty0gkdhB/6P9oZbBZIGiKYVb9GKaN50lRHBLOvhDxh/5EKwDUG5B3ueMB2QGM/grb7/6wHAPNGMAY+GSGUjC52VX2f2CD4+HO0gqkZfegXKgBaHkcWtS0AWii9xG1ImrLlN5XR8L8fmQD05BVrmEENmpYSP9QX+KHiqj2/82+HqqDWwnbBRfGATdzAegGwru2DpRq7Mzq2fpAf0Nq0Rl2wBXzglZ4yUAPAmDSVWDBPHQjLcgTqOZ6zUvdKHh4ruDCerox/Dnu7YqwXAC1NI/QcEQuK6WK/kdgCTGC0PYAP/KIDMBgglq+hIkrOfsaCviLSofcJgJ5AdM7kkSaCj/HqQKVIGvD4swF8bcBjmzjsaQ2H5D/6acBd9wALB4DFWWB5AVherMp4GKIYEOp7+26UF0aSfT/xYuDG7wDjrIpAERytXf2vajj7ueryQXSFl10K/ON3gIWDwCLvjfGB8Z54O+Ee4ve6513uB2R1yzsqC+twbC8HcNVhfAeaBuDP/TvwtS3A/ePAIfYFVlPq2HHTuyulZCTlhbjhETF5yxTQGgPGhoHhIWC4VSXGD3n0tLkMHXHxu+YyB+MlPwDuZs5K6FlsbCzdVO9DuKfkHM8AEkP7B8fOkwDcD+B7np42+JkGOvKdAL4E4K8P0zvQdET0b14D3DgB3D0B7B8HZka9WzrD88N6sFm+YcUjrn7E1ZDvMtF9DBgeAYaHgSGB0PNHCD4BLwLRsByAyX/ij0/dDUxuqlIG5hix7eFhvLcOVUAtyPSydAFmOQNe6EYGV/9ZESiKgIEgtbaD/gHALQC4ovY5r5KwtjOU/XfTAHzzLuCmIeDuMWDvKHBwpMoN0WQzNtAaYSs0K4ZlOSAjGG9kPjCBRwZ0ABKEBJexYAZEAU3A7Oi1BeDym4EDnjQ1TwCGWMW8MXcKks0YOyZNlQOQjcgYIUHllEzYQ0ktm+r6oz8G4F4AXwXwRd8/kO9A0wB8y65KmPxgGJgcqYJTKYpTv2CCzyddQJRDOjKivn+Deh8BF8BnwBtaCUA+YYEyAU8h+c6Az9gNHHRmrgOgmDA3jHQ+iWupCeUAvNSrA9HNwqx+muk9nJVNg/CTfrmbAPwbgK8D+PcHkIibjob5o13A3XypWsAkG1cPA9PDFQDZM1id0i1KxsWfOrKnAFXlifCFFMMRcASigOcs2MGAIfE9iWXplS6On7UbmPaUUTXQrgsVMzcRj5Folg2V5ayUA5BWYKwOxKUafnosWjcJwk+7W5F2EKvlE3xcXaNYfiCYsGkA/smuqug6hcleAnAImPbO6YwRpMgjCAVAm/yQmKTv5hNsAf/i7SyNBSl2a8Qv/4/M1yF+BZSYlNQCnnVrpbC+mToAACAASURBVJcaI7sOSEY2NpaDXLqpR+vE/OVksDgImgGgghHoYJbTWc7oJtFWc65/cg2AYvh2ALsB3AzgVv95nS/f4QdsIkT9T3cBrGtITWZfC5hqtQHInsEGQn3UDDvEDEY/ICf7SxMOrAg8T+c00JGkvHGd2DABUYZIAONzCUDppCFhSukCBsLQrFtZe/IixYQpSyEoJoqnuPWrVRAubQh83HNlZB23z7j1ywmj6CIIqUPxw2Xeu9bx2jx10wz4Z7sqTYZaDD8EIDuoE3hMVEphWg66JIp90k0sBxBcy+iPIIaT1RtEsHS/yIAqw+VSNPWQfe5tlVEk8auXgVa5BUsEJuT5uoliAbE5AGotmIAjCPnR9xDG3TQernYAUupTdBGEFMf83OkApHG+XlvTAPwfuyrgSZOhas3u6cwTsUBVn2gTwyFMi8wjHZAA1M9fYGHDULJD1m8Cpa8fRxDad+l+Ykf/3XNvd11U+qiL39SxXevSsshdDFvgbI1O2AwAtRZMZzTBRuDFjxe1Xg8QEIB8yyj5yYIUxfQIkfkIRnmHCM712JoG4FsdgHHp3ACoMH2G6jM4lWzoQarSvwQ6MSB/vporVaFkh+mCLlpVR8Z+dqDZLoDOpHSiQeAFDkBjPrlgCHgCUaFifg67H/9uYjn4Ai1vpTERTAASBaoQJBAKeNqHlL6mwPDZYAOROag/EYRkPX34MwHIvzW9rQcA+TLpI22G7EcQKlJGsYIJhC6ClUMiXfBTbFUQAej6nPS/OuAl9pOOqIc2BLzg++3VmWgIEUz82cRuCAtLIHQQm0gO52uOAb22sC3JEWgRfPpZf2sQBQIgLydPEIFGwPEj8MlF2bSbsulghLftqsCXq9HGgHysznrGgi5qzTUTFH8FLhAUn3hIJwCN0HLncw37qaF2zoYvuKNivmQIuUNc7GvWt6sHNs26twA6vhyq8NEMAHlyntFrDCcQehyaPTl+FwAbXDcmAKMRThakEk8Q8kPg8SPL0qzLBl+A9QCgR6uZGs3vfHz8TtBZvkgGQrEPBVAUg2Sij50QAOjiVKI3saADJRm7dSLYWfSFDkCem/dhZeMy9pPY5QvSDYQyUJoDIK8qMezh3wY6fSL49PcGgCAA8pScJLIgAUYQEmz8RPA17StvGoBv39W24eREiBoNQSgWNI1HBkdgxJSw1AI+dFIbgOYmkjimQ1r6XXC3rAbCHycAgytohf8vsB/r2KRaRq7zpZ+D37HMX0s3DDcCUGLYaw53MJ4YUODzusqlGCQAOQCejuxA8UULUkxIwAmMAp8Wa3qkN/R9W+sBwOhIEPjk5SLr8HeKFbTQfb77csPIMHGl/4MPbReslPhNe4+MiTpi9AFGV4nI7MfvagNQLh/pfrYnDAS8aJQ42A2w4em2cAyWQUuJVQTGWLs1uL7DG9J1RjhA+jvYk4t3KXeMqijpzrud4At9z3XtP16yGfjKZmCGooYh1tZzvv8xXPFl4PoJYC97k9FlwZWD+Azi/deMZWeP13eQCGEyoERudChIjbb3mJYwH7V0QIKuCwj/gfMj0asn2I0FXRSHXfL/iRkNgLyeVj8ccMY//J1fyxzTAXT2+xoQViKYD/1hDqLxPiYxTgSvQrphphG97tz4Slqafnj7uk1kIQDZrvWTw8B3jwEW+RLxPgSiCERdPwPR7+wCPg/gulFgfruDkOMQkFc5x84e708JAMmCuRNBXi4TIg5CGRzGiBGE/D4E/C2r2vcAYJoify62i0aJSMhB+2IHoNwu0fkcjQ85pu3ack5nIBREqneYFyWLkAXIJHESe00Cyx5QyeL6F/tyEcDcrOW2n7fX8df0mME+/vQ/PQjhoy3gzo3AISYf80MQaQx1peH9wb7v2mrtmCBkIMMejp3jIJD1MsaxaMZ8v5N/67INAsB3BAYU4JL4DSo1J15AFPAEwuQHZJzkKfUAtOHLJSOQRWndBYQvCQA01cfnNopfsaCJaD2baBn79QjSTiOEP1EcawIpkq2kegBTNgHWEpOKF8Uwq2NRFPM4AqCf46/rA2U9/uVDvurB01zvAJpiiwOl3fEeciCGF+Ij11f+QkbSfMPfIzqw57mEFZ9Dl3Ps5HXWAYByHJAJKV7N+s0cCQQhwSlfm4lGZ0KB8C/rABgZUS6ZHITBSEhCowUYAAksF7cStWREyxRwtuPpOlgw+5s9sq6OaIJIIlUgEhA1edoTgHxa9HVw5jibZNF+j/9yGQA/7pbujZ4bwv2+cWB6tFo0NzYnkxFA+cvEAo43VBoEo2e+48EMXEOmD9F6xhCE8RwZEJ80VblKvDlmzwicfqy93/o+8K8TwB2jVSgW138FrJQTXBNlnJgmrjZwanow9CBP/rL9wF0jwAGWDtFyoN9PHutnIHT05mPXz93dMGQAPniJsjiBXiTbxDZFMF9NLUPQxKR5qezz1Y6/YZDH0D6GkdAkYJIvRalAdHAMmPZoYhb6NhDWvEyf/ma737CXN7R1ZC7hUbPgcFgqt/ZZjADnM1xqEVhYBpb4CUk5UsL7jQvj///5buDrLeCOEeD+YQchYwG9VIfyg1NaZszFiCH6DkRGLze5/dgk8IMWcMCjdCiCzR8od1B8OTwvJM8JEShFut1fzMhi+eRJr6LI7hYP2M/xVLwKNoZjUTwRMAQQmYyhWGQxsSADOflZ4kukj7PhZ75bETjBpkAGahMkcrGgwhsXeCyBHBj1wmOBQwvAwqKzoFeRV8ZaerjKYAuirmPY/o9X7q5Cyr7fAvYMAftCPGAEoYlBiVtFwLjtp2U4irj7yOANbi+crHyrfCbTquJV44O0F1FrwQGIMZFqdQDyP/gGSZ8TC0ZRRsOlVzzgasd/u+zpMByLehAfCgMQCDyGZJHFCCgLZ2f8mgI5qauEcVx9e5vACTgCTwEMWr5TdIpWKJb5MvrnoocDswvAPAG4VLGg6UKeqmi4iuDz4er30oX0FP7u5moMvIf7W8B+jwlUNAzFnlZCIhvGFRCeWzrgXSSIBreXTFZSgVLHAp4UHOFuociEEsn2PJwl/XEk0dzfSojeerFg1IOo5BKAveIBex1P67lgUzgWQaJwLAKRH04i14ItgDKEtGsRnWx49b2Vkk9wUefTGrKCF7R0JxZMqxN8cmPAxWcAcxGABKEAKPA5u9lEaAbCmKMI+sDN1X3z+ro24wEZFc0VEE64ABgT180PF9ZdBcDb6JpqcPtPk+1ACbmKjJnllwyuILunEAWjZHkBsrsRUnfD0qEiC5IJfyisgMhzWhcP2O14Ro4WbASgAMQJ48SJwchmBCDFa8qpyBbSP7OvU4PQ0p2W7+LSnSJUFOrI4V7w5IoBTQQTfJ6oTSYk2mQcpGRyH2syGjIF6EM3V/fM++C1CfwUExhCsmzCaQT43lZC3e1hBpEHh36XEqrB7Scmq5dV0XZxmV8WuDFzAF9iwhow9seAGoBcGtKjqAc+1l9rLb/1igesO55ysmCrC8ei6IxRMAKTWNBi6Xw98xNTFUi0jEcmpYgRAPhddpVi9OIEPP5cYD4CcLkCooHPwaW9kV+iwWrQHT8uA1fd3F7DFvgUHUP2k8jTiogAqLoxFpDgbMj9jXSuN7i9dLIdaxzBp5XVBMIMgFEnFAPKT9qPd6A9BIGI7MfPmf4U+40HzI8nWgq2PBxL4FEkjKJixGRRFyQQPzzd1iAUzCAQas1YOmAEoFjwkecDC/PAwhKw6CxIkCXwOdVJLxTobMjBdyIgfvimNvNJ7Evf4jWtdnRYD1YNGVuG93VWuWs4Jf+mlZCCZxwP/cnJ6mXVKk2+tK8lQQVHRTGc64SDAZB3Ey3JcxyACkToJx4wHl+YwqloGDICmYmTFgMQFBET8yyYzyAG/AfWX8mCGQg0BTRoHwt9KVaPE/HQ890AIfgWK+CRAaMRYnVdxHbhdY8Wslw1V93UDsmPIj9GxgiAioRRMIJNvoti+SW/Ikd0gwAU8+XxJcbGITJPDvI6XdCFREFSknTB83xka40H1PGF9dnycCxFwygkK0bASJQSVAbAYeD98xUAe5U3jKIwBosSgNsuABYogl3/IwgFPrOIg1Xc4ZrpAsSrvruykl2ucykapkMMh4CExD5DwJfWAYAxwk4MKPAJgOIjGSEGwuCakRhemw6Yv0UUwRf7L00L9pnsNx6Qx4feY4O8pDEcixOjsoTKKpMYjSFYYjOC8Eq3Wnnr0YYS+0Tmi2HysrPGLqwASNYzBnT2Mz2QD91laxLB0gs12GAh81cf/o/OcHyJ+qj0S/zxnhUZbSyYWaL8+Rq2S29wowiWkJPan4MvgrDDGAlRe7KIywDIgR3meEDWg9HbJgApNTkXo8o0i7oVgxnEgFr8F7jEdnU5GvqfJQKQKyEOPlsNIQvyvupAGHS/Okv4qv9oh+PHxMLk8ggBCRxvAmEN+AiEzz2iQfQBeNmkh4K52hJBKOaNe/FSLobLRXCz43rQnu2yi9oMSMDxs2jo8303ERz1wsCGZECF4kd3DwEYYwJjhoNlQrgIjlYodbBPrwMAZfEmyzcIv27gs6XDzC/IR1DOgA9a6DRz4wZAsZ+LYXvQYsHoD4ziOFklna6YD3+nnU6dZ7bGDAcBUImIAmEUw/zbJ1i/scGNDJiLXmle3RhQ+l/aq57gUQCWzwwBKPeLsZ/LFrGg/ShRXAe64Ajkv30kALAjF8R11Dy3K7KRwJcsUTaqWScARou3w/INVnCH+A36n8RvM3nB5XP4oD6DATBYwGb5ajlOLOh6X8JaBKRG77+7ygGYp1bn+V25/01AzBnwQ1ypanD7KWfA1QDYC3zJIj7KgOUzc9nFbetX/r+O5biwNhyX5uSEDr5o0xsJwLp8/m4A7GaJUv/j3/5+HQFYJ3oFPPkho/hNeqBcMkcB2BAA6XrxmMBkfFAci/m0JpwzXw0TXvXtzrz+PKc/Ml/ugzM9MDqCAbz/keVjjGcQA/YLvjoguo1mRslRI6RwfsiA5nqhL5D6nscF8gfTdfxpS+/hLzvWfzMQCoB1Fq/8b3VWaPIDZqsRV64DALsZHVHs1gEvsqFAeBSApQC8pHK90Oql4UEAyvCwNeGcBXNLOPMLftgZsI75ouUr9ousp2TEyIJ/sU4AzC1e+WIFshyAHPZREVwItrrD3wGAhibTYBhxVpe/xePyrNBuWaoNp3DgFwC81O+RAepK/a5Lfe51jxr7JwA83nPXYgq1asl0yX5N48+f4VEGLATlK1vAo5YB1gBSRmsM+NFE57lcfPD5pPFWCJImtyvGgGfOAacBYO59zFglgHgPefZsXV6/gPXBYeC0RVgyJNOGYuJjPka9eHWgjL9bWzhWk0/n/wPn+k8bgFNmgYcsVflZnBRmIShtJM/m7JGibGBoOIIez9wKPP4AcNpylfbNlGfdI+9NjBjz8JVzppckZuJ+dBw4aQ44drk6j1LIY9JkPD7P4s2lwVEGLHwJnncscNIh4Nh5YMsSsHm5ndOu1BGFThJ8/K6JrZtoslST2+XHA6ftB05ZAE5crgAups5TfaL6EF+UyIif3gAcOwtsXep82eIYY9JkXpMgMp/AeZQBC2b8OduBYw8C2+aALQvARgJwGZhY7swEzbNa88IRvAVO1qkF91J36DNOBE7eD2yfB45fqphLnevzdGeBKBfL8UX5/CZgyyyweRHYsFwxYHzRNK6oetSBMDLjUQAWTPqPngpsnQK2zgKbCMAlYMMSME4ALrcnR6JYQIwsoUnjpDRstOLy7cBJB4CHUGwuAtuW2nUDVH1EFUhycSwWjGD64mZg0xywcaECoI0z5P3X5P6nWlHdgHgUgAUAfOYOYMtBYNMssHEe2LgITBCADkIzSJZXpCOnIg25uPrhgnupO/TyhwLHHwSOmwW2LVSik2pCrDsQskzNIBGIpBdGI+VfNgMb5oENCxX4yPRjPj4xaJ0+WGeEHRXBDUz2Mx4FbDoIbJypADixUAFwzAFI8KUJChMV2SUaAGc1cE/xFJef3FYRti64nkqWDrqqEhbrsm5zvZCdPCd8nHzJOLZuABRz9hTHZwPL7LnLnoNMIY2VyaKcjtZLHOAbNgNPngKe4BacfGF1pnydD+hphQ/8XV5UiEueLGnDN1tWXj/3/4cTwAUzwGPcRcFJiDpPt3FLmf5vjwE2HAQ2zPrEzDv7OQg5OSM+ScYQy5Xbo8465u/ZfLTJ7fKHAdumKxVh8wKwealSE6inEoSy2MWCdbUHIghv3AqMzwHji9VLZuDzD8cXxxWZs5c7apmW0fMBnIHKn5X7d6I5npvRz94O7LgXuGIReJSb+Xl1tzqflybwRwqf9i97BQRWomWJQ7oZVFtJoqDX/b/oGODsvcBTATB9gsfGqmzdjtVz+G+PAyamgYmZCoDjFE2anCVg1CeJwOMnTRB/DmUINVkkgia3y08BtkwDW+YqAFJFMD1VAAw6XG61R31O9/fdrcDYPDDmY0zjc1UjivBuAMx1QdMB+WAYXU8dhEU16dOSkppbcHFSrng8MHwnsGMPcN5ypURHp2xMIa7zDz2z8Gn/kVe0YomO0wEwBYKujL7v/zHA6C3AxfOVh58g5AsZxx4fZM7sf3h6BcDxWWeGBZ+cMEFiwGEHHRnDzun7ONHs/djkRgBunql0VDOSHIDU3cxSD4aEajhFXS4H4S1bgVGN0V8we7E0Fh9jVDG6Obr1LJMRwn+kOCaTEYT0dsfqZHXl/p7PrLi9wIY7gO0H2yAgCAWCWCowKrYE8nMLn/a7PQn9X7zIJPPkCcK+758y7x7guNsB6l98gZjLLYet3Ay5n0sv4R+fCYxPA2MOwLEAQLIDPyP8uBg2cRYmzFweAYilKkn+OC8/Fdh0CNhEA4nGA40kd6FES13WLO8v1qHKAfh9B+DoYjU2Ak/js/8NAIwg7OUb7LCC+WAfB4CpBJoIiTRNRmS1l13kqWh3Adv2A8cdqqp1MB+aIOSxWv6pq5D2kkIAvt8rF7BLJksN/jMqfa7v+7/Ak4B3A6ceqpasKMq5akAmlLWY37t8ZW97PDB2qALg2BxgAFwANEGcnI5JcrDZRPlkaXL4u1KJUAfAjbTQ59x6dSvdLPXAgGYshZWR6JIRaXB/NwFI8C1WwLMXzMeSwLfcXuKrA2G+wrLCDcN/IIg4ERRn0qvyySAQX6mG1XuA4fuAbTOVwktRRr2MLCoQyvEZ/UY/WwjAj3jtFJZkU79g1ghkgEBf98+0Umb/3A2M3lkBl/fOcdMok2EjkZyv8773LAfgHDDKjwNwxEUw9yailpwdxBAEYhBbAuGzG3aKkQEJwAkCkOCjlb7Y6SYyf2UwlAS+vKYnAXjfNmDEX7DEfA5CjUcsnzvbu1nDtUMmCDkRZEEyGdlAk6G6lQTSa6m0MP6HuY73AxNTlcJLZ6WOJYC5/CNxLpHMgdKIKNl69Qvu6/75AjHOiTU87gKOOViJb748BKCWrnK/maTA+58AjM0Ao7PA6Lx/xBAupoYDC9okBRAmPdBZ47lNA/DhwMRsxX7mPgl+SrmK5EaRNRslXFQ9CKB9DkADn79cZtkHFkysJ103eBbqlh97DpmTQTYgk9VNxu+xYbXKU3lhFoJPOgdFGY+lPkgQxokkgF9Xgj4AvfoFs84eX4Ke9x9fIC+tRfDxvvniif358sSir2LCj5wNjBKAc8CIi2AxxLCzIAGY9L7AhGIKgpATw4l8wToB0JjPrfTkp+SLQbHrOqm5jNyajS6VCMIpApDAWwQ4LrGgXqzIfnq5cv0vN0ZXHTInME5GBNLb1DGdOYQsI7AfGKFjlgqve8wJwG4T+fuFAFytXzCLb+VgWnH/fIGYfc46Hs7iHC8ZkPcdXx4VfVXJw8+cA4wIgM6AHSLKWZCTESfLfg7WsIyRF3ckiRQ+HACXkwHptyP4KHrpJvKVGnOhRF9eBF9wE0mUEogz2wC+WGI/vVxiQQIxAs9+rmHA6E1YFYB8DJwQMZl0OrLZ++i7sfT8zroYHLS9df4RACWKxSZvLXzG/fQLZqk2gqn2/vUCUQ9UZaM9wDaPeSPrC4A5C1KV+NITKwCS/SiCR/jRBDlLmP7nHynsxno1IPwJSyRpbiMADXzuPDYfZfBTEoAmcuVQdiaW0zwXwQsCYDYmMaDA1wG8TBSvaoR0G77EcGSET6hjOvVApfRPAUN0zjr45JzVcSqiTxD+VeGzXku/4Nr7JwDJOkxFIwt6j6+RqUrlkO4bXzp1gCAAv04AzgLDDsBhKugLFUvQUhTwCEKbnKCw14HwJ9cDgGQ9WegRgDI8XEcVEDvAl7lVlglAgi+I4CR+Zf1mLGgMmDFhBGFfDCicRJFERviSABjLS7FC0MFKMU+07wOPE0kGvaoQgGvtF9z1/iODkwn3VWoEXxres5ib9xx1wZufBAwLgAQexbAD0JiQwJOuJBA68/H3Zhk6+3CifqqwWNMKN8wjKgbk6gWJgC+FMaBb5vJVmsUbV2vCqo3cRWZcCIACoax53+ulkqNd7iqOcU1WcC9cxEm5kQBUdZ+sTnSL/jEtTWngi21jhJNJBivZBukXvOL+yYBkcOqxKjJ4AGgxzMrBVwdAMmHrZOAYF2l6y/mwV6xD17zmWo6MbRyeWtOHwxJ91IIhr6rqZS70DPPLXDVUrfBwzHKr1EUp6/h0T/6L/GcCqslt4IhoTcwdAqDSs7I60WQH6R329pHuFyuXDJmEjuOSbdB+wSvuP5bGUjmsA5XoUvcvBXKKAQnApUdXwah0b8jXR2YzJTsC0ZHB33FL+2yiX3h/1YeD1fFZGT81g/H6yqkVa9YEpqMhTADle8erHA6t7Mh6j4ZBXdBGjFyO4CSIm9wGBiBvgqxwIAJQlXIyEJLyI/i0SkAG/FbhaEr6BXfcv+5dLKhCg4z1C1HEBJ8+BODQGZXfk/quAZC6ketAZEQCTWAU8PIJt0fgwHzZvVWNaKqi7JLOmtDWFy42g1FxH/XfqGkII0C+a0tnDkfsGxQjn3VPsk7tXmuy+Xp0JhtoJosAaFcUAJUYKiYJxcqHqKAH9rPlG2cMrmCUbMX9guMLpGTcCMKDlZGhMK8IPnPIn1X5PA2AwegwEEYmDGBMjOI5whGQP3NPBT7VJlRNaKvF4t2IWHbDErtDlSk1p4lJ7/zd246tglGZryIfrFhQ7pU8WCAX0ZENG+57U14Z4YrCeLrSxXdev6TfLwrbxT7znMrfKQXfHLQCnyvmRIv0Q3430ezMmL98P393G3wqz6am1NYzzoGn+svqRmTAU2citctqAX/2EI8F9ACEmLHXLZGoFxtSl2xyK2bAYwrj6Xr12+1noL/jUTCD9vvFrn6u0v1/nvGkaoVBAQi0eummMAuXQHMWJAA7gCixG8U0gFfcXdlBKk4Z6zELgAJfZEKrxpC1xOIl/+Sk7jkcdYlSco90y9+gK6vJrRiADD0piad7RuFo3udNCgft94vCdrGXn+tujgV3QAcHLcFnroelivHkchEL8ue0uQ74S3eubAITS3IQhKkMRjBMokgWG3L//2z3VSnP4VDgQWxUEEUxAZFHL0eR3HDfm3IRbDHkBfF0zy4EIKNhSvr9goGEBdvTz/MIYQLQdVsTwRTFDj5jQmdArRDYJQNDSs961R3tPhx5NXoVgoxleHnarjohgLec3D2HI492yQNvIwvqO9fJm9zKGbAwnu6FhaP5pFuMg/b7tTbpBdvTz68cz/zI8azVj8iAHTqgmFHXDUB89R2dtaC7tUGw4kDOgFb0R2wYRDGZ8g9O8aU4XwPOczhiwGlMjqqLWiFYGu570wADFsbTvaxg8nkow7E8nM/atfKzln6/1mS4YHv6BQ4+Z0BbqHcd0NwwYbVD3+1yWhXJxPBrbq8AqE/XApSqAxiBV2MZ/54DMOZwKE00rnDUWcR5KiV/brjtSAMALIyn+/mCyeehjIYp6fdrvVELth8RAClyHXxmhPi6r1m8FM0ucgk8+y4RHC1kAK/5XgW+2hZYofafWcPq1B5AqDqEYsQ3nepR2gqhV2yiol1COkD0C+aOaoGx4aL7DQCwMJ7uVwomn4fm7VrX2u/XAlELth+5sHPtN+l/Ap6sX2dCsZ/phZkIJgv9l++1wbcq+2WFv2NXIjNKAPzuw7MUAV8DTuynFIEsQy83RgTAhiv+NgBABaQOGE/3mwWTLwAqHnaQfr9GnwUbARgDNBUlkpzQboyYCyYDYdILdf0l4NduW9kGoa4geNdazLElKoA3Prx7DofiETtC6XvE7hGEzJlpcis3Qgrj6d5UOJoYDcMglrX2+y0NPtl5UZUjkfx/Hqbecoe0OZzdF1gHQrln9Bhee4s3f3Zxm4MvAk9VSFdUIw0i+Q2PaBtISiBSSFgCYMjMW00MP7pwvvLDmwFgQTzdHxcOSGvBg/b7ZRZByWYAlOERluKM3Ra9CKWc0q73dTBhMFT4ZwIw9l5Lrpes+HjeBiGCUOKXeuBvPcKTiEIOR0f+RhDBMYi0Lhea4GTaa5NbOQAVDzhgPB1La5RssV3rIP1+7yy5OAADoAchEHBkFbKfGRpiweAPtMs5IFNokyOGk/7rAYC9OhBFwNXVY1at5tftCBHaWVS2AJdEcEinrDNC+Lumiyc1B8AB4+muLARAXTDCWvr93lR4/Z0Xt6ODFQkj8WtumEwHTKDLQejAfN3uds/dfjoQdatGLxb8jQBAYz6/boxiFgAVudzNIc2/s3xLk1szAORoB4yn+2DhaATAGJCtbpkCYq9+v4V+aBgAQ4i66XtaC85YkDog/zdZvzUgfN1N7a633Xqv6fe9msDIHfNaB6Ay2JRE1AHAEDIfI5nzZCLeN4Nbm9yaA+CA8XSsul6yqV0rJ2WQfr+splCyCYBR/HJyKX4phs0PKBZ0lqOYTpvniAiUAmAd+HKjo1cvDjHgr+3wPJQsVCymUZrPMuRsRBDG4AQCsunyJtFGHwAAIABJREFUcc0BUJlxQoH62q8ST8cggpKNAFRGwCD9fkuvbwAkyGgJE3C+Nz1P1q9/T3F1EZBxvZh50s6AEYC5yyUHXt5/Q8zI5/KrAmAIkkipkyGPYwXz1aRT8v5ZO6jJrRyAvKOvNXlLazsXs9bo/ztc29Pohgotp5J49Rcj/pzfIwGS//3OM4CNd1dpntQpFUmjEH4LYIgnyn/OLjL8FeDGhwJbNgFjI8DIEDA8BAy1PFK7FSKf43cNKrvHx+8C/vmxwMgmYHgEaA35J0StpvvzL/nP8RbLAfhyT207TChgDRiu/ZL9DsfWNABvYzbhCDBKoBAk/pEobGWTqp819hzQ1/0k0PoaMDEJbJjxVZFgDad0SaUO5LksWVj+XScDmw5UEUDJ6U4d0nVbC91S3ovfVHp5al64cgC+k7mZAP768KCA0WD3A/ieLz090CDceVmlAuhBljLgrfcAw6PAyDAwPFwBkCAbItM4a/FiNtERjBl76W9ffD2AbwJDdwFj+6syImRXrd5Y2FjIYcnzWPLEqnsfC0zsr6qBMQmfIDR/pyJ6xMhKyMrSDiKD2xja6TADTt0/AGAs1KcAUCFrOLF6tbtiRVFavT/wuMCa7MfVTlH098YBeBcwNAIMEYAUlS4uBULOmK3LCnwOPANlEIOSoF9+C4DvVoWXhvdWZVOYqWgi3vOXDUQhgieB0EElViMYJ08HxqeqnG8D4IIDkAzo51DKQQJvBKUmKACzbM4+5hUivwrgiwC4LzvjmgCh6nBcgiMTcv9Abo0D8E6g5eCjfpUA6AxoQIzgi8ALmWwC4z//DxcPPwBak8DQFDB8yJPpPZHeGCyC0KN5DFCByfh9/+OAsekKgEzCTwD047X0SCPM1IYQjCv2E/MJoGVwUUQoPboq0MdqkWVn7RtDDMahB4g+P6qhXFpjVtkDtRGA2nKjos7IyOyHFUbIrXe0FXsTuzIYfNb4O2M3ATGIYQOmPn6hG6gi3eUkQQAeAIYOAUOzALMVh2pAlESqGFBAXAYOMQVjxll03iO/yYKRAT0FQXkwZkjp1pz51LO2XAT3KtD3AIAwj4Wg05kfiuUHYlsXAJLVnP0INLM0OYFx78AzcRySeTsw2AJueI+Dj2Fne4EWKz5MA0MzDkCCkAByUWqsJzarEanzj2zXwjEGFHuGY+pYsMojzZL1G9EBexXou339IRBrC3lJGmNDuSHX+w7WC4Cm6wWxm8DngLTImgC8pBcGBuTXf/1fXnyTugnFwxTQOgi0CECyIFlsvvJfEnh0mhsYI/s5uxFYi1xZof7oOqSAawwYjRGBzYGXbtWXaCIrlvHUagX6SP/ruMVYCEbEqECXAMjfree2HgA0ESur1/0vtnNwGSsG0RsZME20/+/XWH6Mugk/yngPAGy5GDYALjiIHIgRUIrsZjM7Ax+BSx1S4pfffQVIep8dL7dMDsTGjJB+CvQxTHmdtrw4l0CovFruC2NOe975egDQsCXRK/eK634JhBK90q2C7I1i+Gt0jxF40k1cPJAB7UP2m3MGJAAFQrGei9iUTH9yBUDTHfU3B5+BOIKQ43BWtNtPcWIOzEZE8FoK9K0DCGNxLi3FqaKA9gTgeoFwPQAoI0OulWT11oEwiFz7cwbErzNxWtEYBB+VY76Vh4DWrH8IOoGQ7Ocg1CqMRLPltmxvs1/SHaP4dcAJePYyyUCRIzrTB8tE8FoL9DUMwl61kQQ87Rmy2PS2rgB0a1ci18RudEJH57OsY02y/+83/sZdBKr4FXQTApBvprGgQCg9UEAM+h9F6ugJDkC3gJPBEvRGrYoYCBX9IxEcS5K4i6cZAHIw8oXQ4mLBb35YH5d7OekadtTV1UZSjaEIPH4nQzYNwgjAHNwDuWGYpZc7lzPfX1cQur5oBorfzDf+zi0yVTuSkuxBI2Q+PhQDIUEnMLo1TBCZLufGw/ixbQa0KB8CTODjPohdY78IQmfDjmW7Yo/doAX6GqIiAtDHaYswSmeMubV81kp11L6hy2PdAcgblfslOKC1IiKRmyRxZgV/8++DS8BFrxXi5Hd/U6MeSKdqEsEKhpBRsgRMbAtuG4KU/+9ry5brzP/lPVMv1EPOQegharrVcgZUhVHFxNPcp9VFtlOWkL437C0WABWypFRGsV0sb5Hn2zYBwvUGoKl10v1knDgo0y7XA8Pfv0UACnjaK33Co9gJQAOe64FkNvtZAHQdjz9v2Nz2GSa3jYej2W3KGuZ9ixGdIVSoKT13B2s5AHkGheST6qn0erHv5AIgAAU+LVfw/wq3CEAV7clBKDDGZG9/5oVXx/oyYARczcqH5GyH8eFplTawFvAtrtXLGpNrQDGbejupB3omlIHQGc/ErzOcGSRs8zrhAbbuL1Tco/JfbLlNwHOmi2kIcs3owbdwNpYtynDQhsFcgvuG9/YapGFvYX22zZcAU0/GwA2LJ/4AmGF9mwEbBu98Y3cMF+uAGQCj2HVp3BbPuo3IlqxAy5wHAq4OfARmEBXGfNIBa0BIsG0ecwC67merHgRpZLwocrWaovuTxew/V0txJQ2DWeae3WAGbdhb2DB4+wRw7w5g8Qpv88liyGtoWHzMi4C9fAEHbBi8kwUKu2xNAdBxaGBLbJdZux1LwAGECYAEm6wyfpelJrEgFnRDxESwgyUxIUsVMwjVy5AYO0bG89Auu1/5BF38KqjBHlUAYXsteNCGwTeWNuwtk4JMkrlzGNizA1hm69g1Nix+zDOBW0aBeRZZGqBh8M4emfWNADDT+zqMjQyESdQFHfDbZECCLRgdHeCTe8CBaKJY1rDnBRCIAuGW4TYAZeFG8ZuMkGiQ1IEwGCJtHZBmy1obBsvVMnDD3jIAerti3LEBOMjGcOpa3WfD4ic9t6oveDtLfw7QMHjnH6wPAybW6yaG4+8D4HIQfvtDIVtLejpBFsVvUI7NIBHw3DUjRzL3rDVtsYPOkAScuX3coNDynT2VYJCkn+PjqvUD8hVbS8NgjphGxcANe8sAGNoVY/824BCBtIaGxRe8pLKZdpMkTvXiJ2toGHzSNHDPScAyq3er4qPyGaNc7JCRXWLT2TjwGmCOeQashq6+qSpZmp8vojQpheF58ncdZVjLnjWPHr4VWKTKxrHGUqq97qXu3jp0wPy+eEC/DYNZsZAO6IEb9pY9lNCuGPcNV830ZmkM9dmw+OKfbdcXvJMPdY0Ng0/7GnDXKcDMccBS7MwdKz8KCAKQIgY0MWGCtr4TOHAasMwOkTqf6unyuLykfd254nkb7qsw/iVg7jhgmSX31Vpd9yRHeLx+zRhjEGRbB6wDYT8NdymyubzDzCCGfpMJWfSRYfr9HP/aMgBm7YoxNQHMbQHm+ID6aFh8yS93tAvGQb7da2gYfPoXgbtPAqaPA+a3AEubgGU1RM6B060fgkRoCzj+TcD+04CFE4BldZdRc4/YxlxgjJMewSiwN1zWfsOngdljq3EmY08vm5i/7j5yIMqpvupKyGoNg9lngYosl9wY/0dZdrMzYl8Ne8sAWNOu2MA3zw/F2CoNiy99XbvftrcLriz6PhsGn3U9cM9xMODObQYWCMANwPJ49UliuW6SaqqBn/gGYP8pwPyJwNIxwDK76ahDeN6uXYCuYyABkEza4LbpY5WEWdSLxjF26/dQB0SJ6r4ByAN6NQxmkWcqrnQ00x1DEDJFjR8CcNWGvWVPp6ZdMQ6OVOCb3wAscPJ6NCy+7PerkP5Q3tBY1PrT9tEw+JwbgPu2AlNbgVkCcCOwtAFYcgAuiwWlM/XqDjMEbP9t4MB2YO54YJFMo/5gHIcALV1TRZ17FXOhPtvgtvkqf9H4kvHDlyKK4l6VzvVSBF22uwjOb7pbw+CfcwBSkyeFEHAUx/yw9JTyEbo27C17Ol3aFWNuAlgIn9QxO2tYfNlbK6MvaxeMRYquvL9rTcPgJ30TuH8LcHAzMOugX3QALo21WXBZLEHwRF1OgHS2eOgbgIPHA7PHAezNu7QFWFZ7JnXJ5rnqxHEulvlzwyVNN3+wern5Yovl7SXLGwvn4riLWO4fgMRJXcPd/+pmOymELEhRzBxJAo9gVL4kwVnbsLccgHEpWi3epocCAMeBRU5eTcPiy/6qtl0wpvhA+2gYfO7NwOQm4OBGYGaDs+5ExYDGgqP+ccAkINaVpB8GTv4d4OBxwNw2YGFrxYCmV0YxLNYheCXau7EhV3ga3Lb8g4+R45uoGLADgHWqhsBXA8K1AZADyRvuvtkBSArh+i9DsQhCOtf0UUgW/7aiYW/Z0+nRrhizoxXwFhyAi5y4rGHxU66qAFhT3rDSIVdpGHzencDejcDBDcDsBDBP1uX1CMJRwFiQIBzxieL3KIY1YW5MPOxNwLRb8gs0aghAss1GZ1O+SFHsdRPt0i/PLHu++dFb/x4mXfhcbWxhfCtYMFr/uWvKxfDaAcg7ipPCvFOVpuo3HrCjYW/ZA+rRrti6TS6MVQ+L4NPH2nx698GnXF0BsKa8Iab4dFZpGHz+JLBvApieqAA4J8CPOQuOBBAOV0CUYbIskRkAecrvAdNbXc/aDCxSpyT4CEIyTgRgneiLIp3nP6fs+a4A4N8B8/48CUC+ZGJA29fpuLmxJW+5h5kNFg2jiWHSi0r0Uv4pCoZsxw8DUfnhd4Vk0XGdGvaWPaBV2hVjdjgA0BlpkQ/K9bmn/HOVqtClvKEBqlfD4AtmgP3jDsBxB6DA7tdbcvYzJvQJkii2n4NOeMpbgJktbYPGACiF3wFoEx1ZMNe/4jnPLXu+KwD4t/5SO/iMBcXuesHylyACMBPDgzGg7opM8mEHIGdwrfGA1rC37AH10a64Yr4APvvOSdwEPOVbKxu+K2pdKRTmdI3dqkPPVgbSTBGAY8AsATjWniBdx0QxJylOFCcr6HBiw1P/CDgU3EgEIMW52M8YkLolQRddIN1AyKWiBretf9MJQN6HsaCPxe4rvgDdHOcOxDIAcmDFDXvLnk4f7Yqt63gEIB/Yoj+4p9xaAbBHeUPM8qF2aRh84QQwNQYcGgdmx4C50WqCFngNsgSvQ+Dxu4MuiawhwIAXVk1O+e/A7CZgThY1dcno1nHL2oDIyZULpBsAFTBZ9pjT0QQgn2V6ufRicS8QRgbs5ZYpEsENDejBfpoLrwAOjgIzZMBRZ0AHoUC+SOA56xJwNlEyTFw5FxBPeWvlzpnbANCdQ1eSGTRybMuydgMggVBsKmtYoC6Mt8znZxsZMLzAxoAOvsh+ydDqtXx4FIDl8L/omQ7A0QqA82S/ERdTI22mNfaTuBIIxR4BhKe+y61punQC+MytI/Zz/c9EuvyBeetLAfGZ5WOMZ9j2/gqABB1fMLsHAVBqhfTcyH5d9MByEdzs+B50Z7voGZX+NzNSsd8cwUcG5ASRKYbdHRNYwhhDIHRgGmO0gFP+HJh15jOXjnyKblVT5Cbfoq+yJOszF8P8+VnNPlICkMAzds/YLxlYznrJwIpO6egTPMqA5ZNDAB6iCCYAyYBcBqTRQ0e4630SxZyQJQIvMJ8mSeLrYe+p/GzGfnTpEIBy6US/out+K1wg+brs88rHmDOgAVCMnrEfxxMte1Mt6j7u9zzKgIXzczEBOJIB0BnCJoqgIfDEhM58SWzJEPGJe9hfVH42un/Mfxl9bgSiBySIBWnAJBDGEDAB8QWFA8wO3/a+wH4+rg4RLPYLul8tCI8CsJmJMQAOuwFC9qMI9g9Z0CxhZz65K0wfFBPqu7PEyVdWAOTHVlTcpxhXHZLz1w0ZA6EDLhkCskRf0sw4dRYC0PQ/vVSRAYPo7QCdj7GqVOSMeBSAzUzMxZcDMwLgcKX/zbv45SQlHXDIgagJc+bjZBqAWhUoH/Y+B2D0J7rFa6LYDRmzomsAaOeKqxEvbWacHQB08JkRIteSXiSBLYJOLB+X4xrzAzY7vgfd2S4RAKkDDgPzNEAIxMASSWF38WsgkuXLyXTRSRCe/DduSZMBMwe6ObTd8JBj24Aot07uDObPP9XsIzUGFPs5+JJ/M6oT4buxHv9X7BeY8KgOWDg/Z58GTC9Xq5FxTXOw9c3Cm6k5fPcjgbHbgAlvVG2tH1T3Oavoq6BlniZ+12n5u/2sDbOvasqoFg8x2Lnbcd1GdhSAhXN+7qMrAC4sA8sORJ6yHwD28z+Ft4fdv8UyqUDrDmCEBcpZ39kLS6aq9l4D2rLb/KYsFTPWdfbvh86vQu2s1K/K+zIjTsXIVQ9a59Egs4Y6sZfIA/EcSp/jEXv8BWcAhxaA+SVgSQAkGAMICcwVlNLlqTc9Gbv/HAA7MrL4+f1VlXwrUq7SvCoyGcrrWpGhuur2fNGYwM8YT67hT3s1LaZvqn5MLM0bzmHMmIFSgdFNj/mIBct63NhFZwEzDsBFgpDPeanNgATfCtGsX9TIKwNrg9tuVkhlng7TI/YArX1VkXKrEe1l2SynN1RCsFJsqnQv3UIMxhwIRjU5AGN9QUteVz3BUAvahuNgjC3HxLAND7nBp/cgONXF5wCz8xUDGgCjKPbvevlzcKUHH2ag6cnYzepYBB9Zi2FxDJdjoXJv1WDFiLJ6MKqKZUzoQFTfj2HmwTKcTpVWvcxHKm6kKgoORAEvVclPD6NdzLXpMT8IYNPcLV7yJGB2AVhYrAC4SNA5AxKM9ryDPE5fs6eeVKWGZ2M3S3MQfEyJUKV8L1ZpJXpVJ9pLilmlAxWkVJHKwIhjjD9TtVXVm1HdOy/pJiaMFRWM+bo0rWl4yM1N7oPhTJecC8wRgAttBjQWdBBGESwgSiV0Pb9DRgu0TY19N+M1mRKh8niqFx3rRDsLqjgl9yaGXT80vcL1wnE252PAZCzAHQCoiqoW3yYWFIt664fUpKaREr1NPakH6XkuOQ+YDwy4FMSwgU8GSRSz0UJx3Vx/5vFNbrs/EiLRY+v4ACITww6iJEodQKwBIyBRv9vwhKzUW6z66TUGEwhDS3ezqusAyNxnJn8xa1KRPSFts9YfFB/QDZcAm78CnDBT5U8rCqjfc3yh8Gn/hGd/MsKf1+QzYJ4891Jye13iy1cAE9cDJ+6FpYrEkidxDN3OtXR+FwBGMezoMmxJLOumAuD4J4rxJrfdH/XCoLGFVKiUbw+LAPQqWWaMMLrd6/+JycSIm85w9lOpt1j1MwAwFTiqAWEUxeYH5ENn/jInUVHeMXQ/f/jRePvCa4DhTwLHfBc4frGqqaNJzLPw6iZxV+HTplFGvZrXZT45N39+HW3TujlZv8D6fp8HRq8Dts9XIOR5YtakgBgdrrrt5Qsq8Ssd0BhQ4HMwmVitAWHAY/LbLDQNQDaTVJ8Q6W4qVB51OOqDZDPVB3TLOBepW5jmqaLbec3jGgBGMSxvvemDYkQ9GoKF1ShUCSKCqBeQrvmfVZPC1keBjXcCmw911tTJ8q5XgOLaQgA+x/OdWA2EGZ98gbjleTHdQHQN+2iwls3nK3/Zhj3VeQhovYzdxmArSwQgDRA3QiSCJUrTnjfl4KozRCSCCeYmt90EoJJbVCk/1+FiCwFZxLk4dRfLFia6x8LbYkD9v9cXtLG6+O4AYQRfrgPygVIcqyhTXcWFOJH8fh3rz7EKwnUArq8mcGwK2MCC1i7WY7Zenh56feHT/jE3yliE4TZncd636gPFCKWavGhcRx2J+cvs9MlSw0Ty3cCm+c7n0G0MExdW4BMIbTXE9UCynvyCCX+Ovm4gbByA/xisVgJPpXrzLj4EoRJjJIZrWHArS9iprK+KcefgiyB0XVKGjOmCmW9xhRVMUSyRFnNeFGEdI2q+/HFXclkp9WsAbgTG9wGj08CI64WxRk/OTDcUAvBHXSLQxcVCDMQSWbzv+1e7WVbz+k5w2tJtsbcCYV6WJY7hmAsDA7r1Sz3OgOgoM+KTOJbcjSI5yGIaNE1uuwlAAU/MF+tF5/0sIghVLdVdM2S0bSzHx2Mi+FTxXf8X925NC4BycK8QwfmgVX1LlcFiykEMcL2BndJJ7aQfijKfxLGDwAhByM7aC5U4qwPzNwufNnNuOH4VZaCPlPo2AahqFqoPVFc14ga2m+WEEL0cAz9kdPrOmMu8r1o/rTsXz7f9oswFs+jO6LAqkvC3Ggg5Fg6mwW03CUI6X12h8lyfcz3QHqr3DIl64DbqaQKc9mI87QXACD6vpJqY0EVxz2CEyCI5eMSGX2e7VtI5J4yTRyZhscrvt1nQuivOAaNLlYESwcySgiVbr37Bfd0/u31yEgg2FVaiPCeVOguqAfGov0iR0R9JABJ0bnwk9nMxw+fOh55EbgRhzozrBUA1polN9CLwok5HEEUQBjFMQB7D+j656PW+IrJ8O/bBCo4sGFdGejqiyYCx3mKe9/JtTiBvmI5OFiTisg9LtJFF7gZGDrUbHKs79+hyu5hSaUvh1foFr3r/6vZJCiXgCDwVVFJ7MVmRLsrGltuFCc68yFdACMDAflwR4QM3HPoKgIExt4gz42SuaQb8hBOE2oZmlu+KFlKR3QSssMJxDPWbbjpfLoJrxG8CYT8MKGZSVTCxYFTIb84nkCxCIPLDiby30gXFghaF4c2ReR466Uu2fvoFr3r/fKAEFxvpqMcd9yonIrkuK5LLV7MVCM+/uDJCyIC2J8a0z1iwqyESgMl15Sa33QKgmtPEBnp11mwuXgO70Ud4DHWzfgDYC3zBEOk7HlA6XKyHQzb8HgGoCSQLqsxorIy1Bxie7Wx0rFaf+wr9Xv32C+56/7HbJ5VHtRYT+GJrsehHcya57PyKAQk6+vBkBZPpjPEExlwU59awg3C24W6KBsC6tqHR+MidyVG3i3rdAnAsH2T093XT+zLr197MTA80h3SfsZP2UqpCrPQ46oF317VrpeiKXTJ9MhMLkgGdCacKG/mupV9w1/vnwyGgCDCKWzJe3lqsyzLWZWe6/kc/oKzgKH4jC7oolhdC4jiuzM0WPo+cPQ2AsX1obFCTO5Jzn566PwbReiwnfTWjI4KvDoh1juh+aT+WKSYD3i8Aql2rJk+VsVQly5kkddv2FvHT61icqO7Fr71/IkLNXOi0FQjV0046oBy6wZ922Q95ICqDEaL4XWw3COcf9Mw73DFB9AqE6wZAAS8XuzGQIDKf+oVkqxt00ttAc+YT0PJ9qRFSB8xoye5Xu1ZVeCSgCLbYLVNswoncHxoeLwCzBGjBNki/4BX3z9lXgUCyIIGmhova83cRgO5Te9yLgP3MfmsBS8xs8/U67ePQOqy9umBUruDchqo8sHSd3PMfT5ifo+ack8eFHI6QEcnT5GvdOnVdXof+ptJ+BVPWceiaRHA8Us/nkACo8mzqlqmWrbFDppT5A5UIZm7CPA2Vgm3QfsEd909kKIqB1qJAKCBG8ZstZz3xHOAAiwmpDIdng1maZQAkZzsHZ537YfQrwNyxoQ+HakrnS0h1mUA1C96TdJTmORyhC3oeqdwROi+GDhkFI6bYNrcNDEDeAkXwQizPRpmnIs3OdqZPSaRFUcbchHlgie6agq2kX7Dd/+d8lUJVXuUzk8ERmS+2vfd4uvN2VOV5rSwb0y3JhgIh9wJeN3YMQCIgR78Q+nDEVYBYZUrUpbXFnM7COSdf7N4IPvtDnT2BY/h8Chh10MXQeYGS+7GGjaQiABpuNIFiECnzdWJMIUHcazLptC7YivsF8/7FgLFMqpiQL5TuNbKfA/DC46rqqAbAwIKWK+timRUBEiNGsOQsyQm+Gpjd4n046hbT84KPuYjOmHHyp92gcgDS2OoIuVIeh/xyUkaVwyEWdLrewHE3uBUDcKIwnq40HpDXL+n3CzbaKdguel5VnFJl2awaghLQBTzteZ0cjLq2A2n0M6EPh2pC57Wg41poLzZsAZNso0Hw6eVR/J8bF9YjWGmVCpGKwQLBRCcrbiSxNLgVAxCF8XSl8YDHHFPW7xeFBRwv/rGqOKUBkODzqgdWPYAM53vTASMQu4Bx9J+69OHIF+N71F1O1gUB+AsBfFqKC+4Wi4BWX+CYgOTAU36wdMVNVKka3MoBWBhPxyiuko3xkSX9fvGMkqsDlzzHC1N6SQ4DoINOe7KelWWTheziObeKCdARApD1AdVnRH048gKUAmAEYi6Oh4DJV4VoGDWqjq4XLbO5o1jBoimEPhPJmwu9FvnTLgdgYTwd2wyXbMyRKen3i2eXXB245FlVYUpVxUpGiLtmGBlrTEhVUwV8dEkVKAq3MHJ1uzRbRx+OOgDWFX6MsXJU/36lJoEoA2AKvw8+uwTEDIBbStdOs8ddDsDCeDom7ZdszBIs6fcL9ror2C75US9IxJJsEsHdGFBil4yYuUwknofJgF4XcEUfjrz+X7fKo4EJJ//PkMORO6FrVjQMeL5kJhZMMXzLwNZCt1nzDFgYT8cQwpLt4hDON0i/X7ys5OrAJVe0S/ISgFY7j9ZvnQ7I3+lyqpYaL98CWp/N+nDkZdhi6bW8An1kP3fRTLKVWlwF6RZCH2L4zDDR0k1IqeTNb2OQSYNbOQMWxtMxeqtkY6I+ny9VEz6btfb7xc+XXB249AoXv85+tIBVgJJ6n4lf6oV+mfjdDJNMH0wAVFX90GMk1f5TxlS3Fggh92DyN0IORy5665KIfCktsl+K3VsGtpVOWOMiuDCerlSnjQ2rB+n3C+pIBdulz8wqonrNPLKgwKaC5B3s53qhXVq6oDNg6sOhqvqhEr3V2VNLBjmnSSNdrOLJ1zkAu6VPRjFcFz4fXDJ8i45hG94Gt3IGjOFYA8TTlQZ/qGH1oP1+8ZtlT1MAtHK8mQg25zOZUSCLIliWcbw8wfW5Ln04ssqnHX04euiCk6/3de66MPpuAQVZAEFkw2MKFw6a1wEL4+lSBvmAOMhD8vkOkFX77feLNw14YT/ssmc4A6oOdHBEkwXlgjH2k4Nal6wB4fIuX9LzZjAmorNeHMo5Tc0OewHwDTUh9HXxfGJsYkAbAAAgAElEQVS/uvCpoAcew6zBBrdyBlQwwoDxdLZWXLDFkHyF8xGE/fb7xR8XXByAAVC1oB18HQYIT+8uGfP75SCUs1o64he8v4j6cIQ+IqkPhxrBCHjdjBH6AblQkAeY1ondukSiELmsUPpjbyp7XuvDgAXxdNZVvWCLIfmKg6Bbhrjup98v3lVwcQLw8gqA5v9zC9jErutltg8gMxDWWMBaMVkmANWFyEV6R0uH2I1IzW7ypbkQOTP5f2ch9KsFkwp0kQlDAOmxzHpscGuGAQvi6VD4RgmAg/b7xZVlT5MATNXwqQc6KGwf2U2uGV2uzg3D4ua7fDnPwZcKgIdq9GaIBPZb0YdD7hgyIFWMXiH0eQ5vXS5HcMkc++9lz2t9GLAgns7KxxZsCkgdtN8vWD+vYDMAUpcja7lOR9eLVcIP4tcuob/3AOHCdW02VTX62ApB4Mv1v24gnPy9HiH03fJ366KYHYTHsgBBg1s5AxbG0+HLZaOp65i+ln6/YM5EwdYBwGj1cmUkE7+8THLNdAHhwrUOXtcrO/pwhF4cct2oN68BMDCfmsJM/n6PEPoYPp8bH3kCkbtjji2tJJA962YAWBBPZ0WBCrbYsFoOf9pDAiENk179fkuvf9nTXewKcBSjsn7ldonWbgQpx+26otaLIwAlfi2QQSJY3Yjy5i9dmsFM/oEDMM/Z7Uf0RiYUA7J+ToNbOQC3e0WBBm9qLad6HICG1ZK1XB5PoxnuOOIcxSXe/Of8xHV/P+FpwN47gKUpYHmuSve0pKZgCKSq5wqniWE1WZz/xouBm74KTMwBI17lVBXwtWSs+8/vL45Ff3vhpcAnvwos8d48DZX3M2hx9XIAnu0IIO0chu35AOgLL0yuG/jOmwbg028G/mNz1YWdETbm4I5BrFlov+EtD2wIo7l+Atg8D2xY7iw3V5diEqO54mnj6XdMAYcU+6gon7A3NSO2qFjlyZYDkAX6uD5Iam44YaUfVNDNxaJcLIPXcGGpfi6PnZdVD1wPspQBX/wl4OaNwN6Jqg+xwrxslcVFuYJblehkcYYZGPS3L20BxueBcS8nwg5H5kZkx6TQSbXFZcCQKadx5Cz5mPurAFxrRaa17pAR2PFC+ElSHKQ/0QjQcgCyGyM9v3SnsDBRJgL6msWCf6IfWeUJac8UFlpY8500DcCfvgb43hiwZwyYVhd2D/VSrKGAmIDnBkiafEcN9cprHgKMzgNjS1V7rRjRlceyrqif6KAkMgXIM+6tAnDl+zSL36O9+U8p9jGHQo285/2XA/AnXeNnKAorDXH/AILwbSvLEz6Ql2+cAf/3XcCdw8DkKHBwpOpFbE2wadzIdyh3jjNQirYWEwYq+/zJwMh8pf+xKNSwM6DZMmzNRRbM2K+2Ii6TlFrAWfd5V3i/F7IgT2LBF5LbIdkqxLPWvtzlAGQ3RpU3Y7AiixMxLOUB2t7pKQ8M0qCTnp8HkojJgNqaMEJesQv4AR3Iw8DB4QqAs+6SWRiqgJgY0HVDAdBA4Ba4xN7ndlSFAAjAYX4IPO5dBDMAdS2i+Jx7XTf1eEdTDfgAQnR34p/wQkRmjNAoByDT/ugFphXAmjAEn8qaPQAgZCs0lSckCNmVigEbFMsPBBE3DcBX7gLuawH7hoAD7EM8DMw48AhATrjtQwiXoqkTEwWd7LOneXNCbz6Tiq/TInb2M8ZzIFrTQbGiy92oGz7pXl/7jvdAJnb2470IbB3T77Sai+hyAP5voTqW6sKwFAc/TAdc5+3dvcsTrvPVYSK4SQb8xV3+6IaAqSHg0FDVh3iOIFTIFxtit9orL5Z/LD1Q4s+B8OnHVuXwhhdd5DoLGsgCCJ04q66X/Ju/vSaeAxDPvbdtmdtKDV90gVEPIl/xySkviOhmAEjrlzSkwj40SlQZYZ39I+8JBMx8mZryhOsKwqYB+KpdVSDFvhYwPVR9BD7uyX4SwRS59nNI+bRck/DzJ05v12M0nY8fAk8iWL5BB5qASPGRCi8EVjzv3mqpkC9ACrrwhKukB67GhpqRRowQMqCiYbj8oOoHeUWpdYIBAUj8c8WjrjyhNIJ1unzjDPjqXdUjJAAP8TMEzLYq9uOHICQALe/EwWe+QgddAqCzzD8+vgIgg0qp+5nYjaDzCgjmnCYone0klqP4JSgvvK+6LoFPoFMlkPGh+0rPWta4RHTNJJQz4M8EAGoNTPVU8opS64CC9zoAWTFChcq7lCdch6s3L4J/2QFIEBKA1P9mHIBmhPh3Ai354RyAAmWsR/PRs6vOR8Z8FMPS97yxtIlYgVB/I7jC0rIKSfLXF1EEB+BFFjQ3jCLA49OWsRTTEPzvzQEwry7VrZ5KwzAQAPssT9jw1dcHgCrORQCS/bgn+1HsCYQSveaHkzvGv1scgU/6R55Y1YIxhvOm1EZekQWl8wVDxJgwc88QiJc6AKX/meHDawX9z16M/Em7bO8Q08GBP/jEkAEVjMBoAFWXUjRA3KtNwOBXW3EkAZhrALktpC6lKtTV4OU7RHB+3kHWgv/zrnYZl2kCkF4uF8MGQGc+MqEYUCA0n1tkwxbw4ScHAHr71Q7W4++c8czwcBAmHVB/c7Bcek9b3FuwbdD/kjGWgzJjQ3thGmVA3jhfOyU+RxB6FamOFp8NrhsTgLy8Cpzm5QlVptAU+6CiNgXCaIQ0BcDYV8b0P4pi30vfIxD5+w72C9aliegW8MHzqrmh/meuFhYi0pKbs6D9fsh/n1XFMrYMbPgUByCZz6J+uEknDA9AornWFRb01WZEsACoHhOqyC7wdetT0QAK2KqOb5MCUvPyhLE0oQxzqaYNXL5xBvyVXe12vByLADjXAvgxBvSPGFGMIjCmJbEW8HfntxtQmxT0cmxp9UPAdKAZ1upA6EB7qgDo6oCUxXRtPVSpAwJpnUhuxAqWCCYK1MBExZljY5S8SYr+pxAFAuBayhNG26jw8usCQLX0SAAkwwcAEngyQizaXoziIli+Oe7/9kJvNk1LmBMe9ECO3XRB7aPeF0EYHNVPdT8gj016YBcWtBfBVYJuz7mF7VgGY/pO8f5WdQ1/7U67nIKNS7j0wIbDPFZsyNHHY7od/xdlEHj8CcC3TgCWHgGAPSxiSdt4312u/8SPAl8/Dlh4pDeZW2PD4J1c9+uyDaIDkgEJQKnTfG/N8nUAmu5HUnMW5ARbPfEuIHy/ACjRK7FL5pOR4RaxgTHofKl8r/S1ZWBnAGDKefbn3AFIPRPXB7sFiVQimKVgGdl5ooNwLQ1/1U+DQGSXQ9r5Evy1q9rZbP1lGQDZsPpzI8APHgXgod7qUx11YtBbFzC+/C+BL7SAWwhgdoLkONSLqy5oLogYft3ZI1F7EAC+phsAnekokhP4HIzml/PvthQWmPB9LJ7jxkcSr14jWj4/0wFlgJD5eoDw6fe4DzAYPHokWhHJZ3TFSkn4h7YOSOBwEtiMTv1aY0uktFYTmI2/43EMQmCuAJmUE0gmVD8EFdPpdnxhVhqzDr8F4NMtYM9Jfg98EVTeNu9Q2OFZBX7vr9vtgm/lcezczZ61ZNN8DCvilYCdPXqNDQpAlfGTKm0M6AA0PTAyoMSx64cRfPQHXsniOTI+fEWDFGp+Qb9BeySRBV2kpl0QxxGAlHDmkI56X6z+EP7UDYSdRgh/IouwIZ36lHabBE0GJ0r10Rgb/xA/tt/j/6aMAf+7R4CxzuBXWRGULwBfIrY6UNfpvLae7n0I+LO/reoLMqiVMbW38oUhkNkQIzZO7tIweGePcmWlAFTjAYHPVGwXxWoLYblEDkLuTT8MDPhXLJ4jALpaJB+ggU6xfgJknT7IKXIQXh4Y0FZCog+wxiUTwSkXUbSMV1rB/A31OXWuFpPUda/mRHKi1e6U+hA7Zq7l+A+UAfDtHg/LrptkQpZ727cRWOL9542Pa3rOvuOqagUltgtmJM08j4/PILbIDKz6w5PAHsbraTnMGdZWIwIzxIfeK0rn578J3LAVuH8CODRahV/FFQ/1IumIvXP1QudNfyNT8oVqcHviPcBd48A0g2RDuoDqHdb2SalZAdG9dnfDkAE0gXnH5ijWCDbKCq5/MRiV0QD8HgHQ63jG0hdsLGxA3x9Bw1Asli7hO3BwApgng/Gjvq01IHrXJ7q3Cz7E++YziF2rs1ZLZ+8H9jJsSoECWXj6igmR87aLgfbGq4GvbgLu2gjsHwdmCEIPSI1h+SkCRjpfUC3iNWcpoRrcnrYbuGsUOMBo7QBCxSTG/igxVcBIVGPWM1h1JYQPnyKNExGZMDIJ9b66eEBGxPDY1Y5nv+GCjfGAxD+DDpiawphABWZPjwNzNLAEIH4XCH0M7/5c93bBfI8Yk2cgVAdvdT10ifDkBWC/r9lGH51NhIsnsWHOfPmEUKT94WeAG8eAO8aAfWPAwVEHISNQlKQUglJjJExqC+H6Nq93kOpUg9szbwLuHa66QzFWkaFieXxi6hgVHOMCYGRuJ+5V4jYJIDKI9KlsAvFDq8QDrnb8NWVPh9EwdFkQ79TlSMIsN0Mi5s9MoOGno4U6f3YAvefL7Y7rvdoFLxOANSA8f7xSgWmd0kCQbmZ6mTLEnJ0UqWLhUkxlrBn6n3wWuGkYuGukCsufGq2iojnRFpafsU7MDxErJuZhYCsJosHtWTcBe1oeq+hxigJgXBrMmTBPnJKLrr+VED54ibHYvZos8sO+DNcrHrDX8YVVyglAKud0LtMjFPtNMz6QLDY7VomLJd671AEH4Xu+3g7nWq28ISvX58/hguOBg8vtFQvV/hEzxfqOevuTfpjri8vAWz8L3NYCfjBc6ZYHmBcitnFd06pxyb8W4gPlgonBqffTtdTg9pybqiVNBssyUsdUD7eGO9amnf3sXtxQipl7Wg/sD4A8AwHIyZMYky50Tp/xgN2OL8y051qw2hXzwRCEdT2nmck1RxHG+w5jeO9NFQBpR6ldMIMXlFWgVndqF2dVFsJzuOgRwMElB6DcI6rznemD0RnbwQiSRS3g7Z+tVIl7PC9kahiYZm6IizuLigliT/VoUog+p8P9l3wJ7qGEanB77k3VczroUToWLCsABud4ypaLCUoxf9i/9w9ADiICULrQRWuIB6w7nuZrwaZwLBGwClSqSyz3AhHbaRGEFGOmC44D72UVgjW2C2Z4lIF4ArjodODQcqUGqAxfcpG4mJVuVqcL5tbs2z/veV0tYK/nhTAqesYNHdO5PCJZos+WuzxHJIViuXFyJxupNLg976ZK2lizUKodilGUgzyGhokF8yw5Mf+qRkjdjfuDtwkkm7DTkNaBaQ2ox1q3eMD8+B6O3H6em8Kx1Ccx9ptWl9iYIUAAWrI3I3nHgPdOtsO5eOuxXXBdj0V1vOL/so3Cxef60tlSpYwveKf0pAu6ohfdJ8k4CUqgvr5jV6VGTBKALeCAh+VbZLTnh5gu6D44A6H8cVlkNK95O1WkBrfn31R5HSy+JCwPplAxRegE/2T+AloGncNmbQyogUQx/KwB4gHj8YWNTwRAOW0FIIIndoqNkTAxz/bd09XDGLBdMM6/pLKi5whAX60gCK2ujxzEAqGL2pQ1Jis5AJEAFHvTujYAKjRf+SEugm1d2COQLU/DAwQ44caEw8AtZzSIPgAvuKkdrWMM6M7xCMBoiBn4YpCE2NCfxWAA5MEuwvCCEICwlnhAHV+YORfDsWJGgPpMKwg1b9QpFnzHbD2BK2JGul9s8KkYW17vLALQRTCBpzXZpS4gtCXXMAkduuAy8E7PijPWprXJ5CR38ygw1fJDohh2BlRAgq2OeN7uTWc1D0AFNtmL54ESBsCaJcLkDajxj5ZXRiCIGA0waDwgjy8sk5+HY+X9ppUbJSCp6TnFCMXwny1WAFQ8rUAc2wUrRL6mXTAefWnFfnz3FpbagQKLAqAzoZjAKkkpXkNO5GCEvOMLFXOnnC4xIKOjnQGNdWSM+GqHQGd7JSsxUf+JzQLwhTdV4je1nQvr1MkPGtlf9yP2Dy+gAqZ6rQytfvdHSDxgLwBF8AmAYjHWluEDiKGMiqOVvtejXTBOuRSYJwDJAARgZAGWL9Nk+IM3SzgTydE4eec1nZHbtDaNAf1Dpd/SMx2END6kD0oXtFhBXmcY+OY6AFChnKnzl7NfdMR3qCAae2B+VVMYXASvDs3/X/zHJZcB84vuiqABEo0QPnhnwqQLyRURmZBPytnwHde0M1vN2lR6picoKULaxHDIEdHkW2iWg4/7b5zb7DSQAVd0/griV2JYojfpwRGEYsGBrOBmx/OgP5sAKANkcbFzNWTRnX/GSGImMYH/LYlk+gGvdT+bW+SWH+Ig1GqL5QeTtR2EYj5LVHfjw/ZDwL8yJ6TB7UU3VVoTjTYxYDK+Ivv7dzNAZIxpZSiU8jjKgIWTcykZkBawDBBnQdMr5QeTKI5iWCB09AmEb7+ucnOQ/aTPWn6wuzyS4u+R0Ob6CUGqJpIDA97AdqINbgRgBJ69CG4Jp6q/ckjXqB/RKla4WpkO2ODgHoynigA0JiLwaNiEt95YQKJ4FRC+7brKzRH9jZbN6iJYuSHm9I5iOAOhHNJfZkh+gxsBKPbLu3+JgaWDdojhMO5kkDWSlNTg4B6MpyIAjf3IggJgMD4MCARjFMU9QCgAykhSKnUCYHB9JB0wy5aTRUxmup4h+Q1uAmDs+hpXgFLnB6ULONOn5xACNJqxghsc3IPxVBGAiQG9aLeilWUJW1FvVXEN0TKp1C6At19TMSCBpz1dHtT/JH7N9yaxp6QkF73KBxYIr10nAMproB44qQGTj6sjUrtOFPtLeFQHLES9AdDFrq1E6M13MaxVCTNAXNFThIylLcor40zxtgDAPKuVwDMrOKw+SBTbtR2MND7sZwC7Qvm4wqHa4T/uIrhb+7n0EgbQdTijoyg+agWXT8llDsAFWr/B8qP1K7bT0pvtVwHhW6+t2C/m8svvZlawi2CKe37nhFtapkDnILRqBQA+v04AjMyn79EIkXO/DnzyCBwVweX4wxs9B4rRZgyPVFqykgDd+5JSpBU5r0vHyHz+jsc3ub0KABsZMCyQgeExKyFPVIz3lmcM6OfPAGCADYPE67Jfs6h7G0o+xvi7oyK4cLZfOgpsXwC2Lq9MwuuVERonKn4nSJrcXnQKcM7dwMMXgYcsVxkSebJgzOWPqdB1ad2f3gpsnwK2LXWeR9m3danUIV1lBSCPArBwtp+7DThuBti6UDWDmWA/DvXk8LRptfPtNUlihYZTOPCi04GH3wFsnwGOW6iAs5n3GeJJ+KLoE+9VDClQ8R6vOQHYegDYwuY3S6H/iJ8jb11ck0q9Qhoc9QMWgPBZJwFbpoFN88DGRWBiqQIgWyJY3lPozaGJ1KTEPh36zpTkJrcXPRE44S7g+Cng2DlgyyKwaclfFoIwvCwx9Zn3Q1DmIPx/2/sSaMuusszvjfXq1ZRUElJkKsBEGQyYhJCBSkUqAW1tsBdpuxEVaBzowXZqe1g90G2LotjQdmMjKqtBxQERdAWUAkUlZNBGkQRNyIAEMAkxpFKpqjfUG3t9//m/c/+737njPq9uVeqcte66b7jnnn32/s6///3v//++Tz0dmD0KzC4DM6vAFpd/0L3Gh6yTDgnvLwKzAWDGiH/ThcC2OWDrErB1pRgQisIQhAa+AED+HEEY6uNLyrRnZLSl6tSbrgLOeBQ44yiw8ziwfaV4UGbdegmA5QMTLFlqsfn7XecDW+eAmePAltXiXnkuZSBkRcm4UGXtU2uo3xsAZgz6y54JzMwDWzkgBOAqMMVBCSAUObh8QuN/CiTgcWAuyWhL1amvvBbY+VgxbW477paa7gIBqCnUrbUBiQuhAKDUot13IbBlDtiyBEyvtO5VDxvvVfxW/JkWNFrCeK8NAGsY7BsvKQC4hQCkJNaKy2LRIsg6SJ3IQSe1onKKC2CsOYMeN+0Dtj0ObDsGbFsEZmWp5S74g2Ir2uA22BScAJGA+dJFwPQ8ML0ETAUAkgDTPq9zdK/+sMWpPF19NxYwA4g3PtsHxAE4SQC6FdSgmGWRRIJLZJll8EGKjHiX1jwaN10HzD4BbD0GzC4WrsKMW2pNobZoCu6CLCDfCTqzgg6sr+wFphaAKQfgZHKvpRSYg7HN5XCL2AbAZwPrZGaj6ippXhgn0kqmU1woxnHedg5AATuWHig2FE1uVRwoxoX+Wcbg89S3AqCKPONcCi8oPtVP+9++G3j+oSK2xRBFDElUxbTS+3nvc4FpDsjxllXQoJg8FgdCQoGJJTTicLcQ6vPL6wbg9cDM4cJv27oAzFA5ky9/UOSvmg8oP86n0dICBn25JwjARWDSAUgBHN6vfdbv10AbARh8X91vDM2ss+NvAECKPVLCsHoyUgRqrlbnRwB933OBc+4DXrIC0IEmiLnE75di8HsyAcjzWUVGUi6uICMpVwwJVMXdeOk3XAxc+Hng+vV2esAYw+sWoP31r3eLcLwQBeQUrEHh4Jo2h4vDmJPuAyMLGAeEn7uqbgB+I7DlSWBGCwe31Gb9aL20kGDb/EGRxY6WTz8f2wtM8l4pgL1SgM8esHCvsuylME4nn9cfQLtldg6TZ0kUKorAfij23vAPCmqp3fcCl60XFINid1PlZrf41/dnApB6wSQjutUfIDJR8CGIQOwWEH7DywpKrWc8CFzqRLHkVYrB2jS2FQH5vkuBycXCAlIUUAAkCM2iRBA6+ARCe7DjYmQduLYTleiQ/XTTS4DpI+6nLhZW2nzVCEBaMLd+soIGqjD1ampdugiYWCpeBKA9bBJC9ActAk8LES26SqsftInLZ44dQif4Igdhym5WLrPDyuYH/7HTCNwDnPko8LXrBccjQaioe6BiKad3+QY/MGTH6rS3OBvCnQDuAIyqhiDkQ9RX+29yE3on8IwjxQPI8zkTiApGU3oVkD/4fGDieAuAdMw5MFQjEgg1DYsUku+a3uI0TGBfV7PotwHwaOEmbHEATvuDIutni6UAQoFRIFRYhfe/dhEw7tbe9Of0Si1g8HkrwRcevDajz07gIJ7n05rYyWIpb4ya/7vv8PRdFpj/LXDmkQLAnA4jCCOlTBRN/rFMAJKgkkVHpGUjySSBSFeg7/azqk8EgbSEq8UDRACLKDXSyaQ7Br//DcA4LSCtwnKhTEkQcmAIQhtM+Uaajl0uS9NatITXWzpzfcdNB4DpY+6nBgDaCtanYLN6fCj4u1ay0QIqtML/EYC61wSA9tAJeP6eWsAoDysFpg1eB0HIQRCIIkVeCqQf/05P3WCB+UPA+CPAzvmCaFWDKEuYcl1yMN+Y2dckqGTeHPEvvWDSNhOAfbefX0A6rS8CUw8X9066bFIfdqMHJID++DJgLACQumyc3gyAEYRRKFCLD1eu5ODLF6QvXedx0w3A1BwwxdAJLTXjd8seQnGrZ9bPFxLyA7WIKON63tYtCQBN/sv9QPm6BkLp0vl9t/m6ietR6fbyBA4gnXtORwRRpNnTtPpW6gWLH83lKqcOFTEnDiKtoHwy8RNFhrefyeztbnrBfbWfgttsP+kIyO32ELD1cHHvInrlvWs6TsnB7qAUlg/suFtAWkE55zYQ0QpqcALoNCXTEt7A3KoaDwGQfqoAOEUBa7fUbKctltwCajVbxvSiyvoasM0BaBKwwdKb9fN7NfcqBWGiSWykWXER0umeacUEonQgCKRfIgDFjya5yq8Wfsfs8dYgiuMxgpAg/vnMzu6mF0z6Zj5APdvPQec0TEosnvQosGOhaLuIYvnwEYSithE52F1XFAA0p5yigD4otCqygFKnpHUpLYP0OcKURYv6Mj4MNR433QhM0gL6QongawOg+6rl9CswKoSkEIxPyTsuAPigCYBmAXVfYcVf+n0SRYw6dP1YwNgHsgSajiJP429RrpWOM6cxDiJB6NINM4w7LbUGMQUwB/M9mZ3dSy+YVG0EoBiDBST5ddZ+PkCsAiIlQZDa3LVatJ0WXG2PbL98AB+4omB3oP/HgTUhmGgBfRqWf2TTrUSjExDSP/qWzQDgfAFAWyzR8rkFtDAKX75jo6nUguZxZ8NByHbvvqBQ36T1swcsBaBAGGRg40Ir+rt9WUDhQ5ZAU7Es2e9LLzglqHRxNkbeuW+oQRRls5jaMjnK0a9ecNf2R4LAwO829kQB3LTtEYQPUwzQAWgW0AGo8AQH0ljp/V17pm0KRcEifGuNOnocO1rACQbKPXhs8TtNwVr5uh+n6Zf3wDgu29g2FdMtOc8B6PdpFj08ZFrplw+ZA5FTvAQQ0/BT36FPDkRqBT9Jag7xYlQItY0f88j78sZzCcKPZlrAQfSCK9uvB4h577SCotUiEJ8opq8IQFl/PUBPEoBLxbRE62LSqG4dFB8r5bHcOtiOQSqT5T7RKzYDgJx+BUCCTxZQCwhaQc9oKcEnEBKknj5FsJ1LAPo9xoWWPWDy+6IIoqbeaO0VA+zHB0zxIQDKkn1GgtXiRxMIAx0Vn0Db+lkuFjLRCt5WEwD71Qvu2H5OfekD5FaciQay/GIbFgBXriwAyGmJADR1ck3DwTE3TQ4B0LetzBJErTYAr2BBSI3HTS8tLKBZPo/fWQDZp197Z3scjGb5BDp/L3+njMweB6B83Gj9wj3atOsPWin9WgXCFlVO/3ctf4iD8XkBkH5USlAZlNPZAQqARr5vxu1yjmH0givbX0UQKI63o0Wun/xHuR8E4VnPK5JQLd4VNttTBvK2uoiKOUf/f+GjwMNBh0NMV6J0c0NpcRv7mrYv3kh8/uHxYp+bVpwLp3R7sts2YzouSq3KGa+q7+x7Co4nazAerRKsVlV1QitF59dyyFZaYY0HMu9mWL3gtvZXMbymBIFMZ1ov2h0B+LTLisxgW+Eq5uU92iZ72ud9vvR+4JFp4NjkRh2ONi0OB1/UBCkvEYRhfuNs4OmhhiPKnFQlx6aAjMnSXJUAACAASURBVPjmz1w41nnwO4cCIBvBwZgTAOUHRq3gyDExD4zRGVYEnpm5LqmQc0M5esFt7acFl0SlHiBxuTkYxxdaihUC4QVXFu5FCUD5QtJl85sjGA0ziQxqeu/fem+hw0F2fLLQGxFlYMRvo7v1WmIVtpt1DFkXvOR7LwJ2HSkyoZmEypoVVe8p7b6qEMnidGG/Vl/L2aPOIwuA1pAIQE3DAmFa4j9f7CPaFpCHKujr5xzZesGdHqAqKz5X+FLRAl58le+jui+kTBALMcgZ73CDBkpN2/7+bfcWOhwUyCEAjQTcAVhKdjkPc2RajewKyu/n1//qJcA2uhBMRGXQOcn9U6JIOjXHQqSYOsVoQp1HNgAvz8yny80H5PVz9H6RqVd849WtXQ/zA0Ow2ayGLJ474L0G79vvbulwkJi8BGCg4S01SKqofoNvSIC+5zkhFUupV8rUTpJN06KpaBkFQm5M1HlkA3AyM5/u9Zl38zrk6f0iU6/4hmscgK5ISUtCTowyDqb7UxwsqFJW3fo/vbuIBJEZ1YRgyHwQKNi0KEl1OKTCZJdxtPDn//v8ooaDaVgqFyiTD2IKfcjZS4Fo+7g+HXOPv84jG4DIzKfLzQf8KVfI/FNKrQ6h94tfz+vOA9cGAAbrpylY2SDlVTTt+uCnV3/V3a7DQQAysJAwobZJgUXi78Qayhd812WeiOAZzEyUiAkHMeu5BF5FwZQAWLPwknkLQy9CrPMy8+lIHZFzvN3T+YbV+8X7c64OHHix74V6zIxB+RJ0wQ+UU992tYoFy3fcXcTDxQkoPsCUhFIczKVCegSg5B8A/PILN9ZwxBSxtiKiUAOi7JW0dLTustF8AGbm0/1o3vjjnSGdj+lYlGwdRO8XN+c1wABIoHk6k61yuSCJITq3jDY9Vx0BqK++uwAfX6JkI/hME0SC1EGguiQ+isqcQRLrF6/0jO2w+6FMnZhyZYsQ1W50qOHgPX1NXndtODsfgMwHzMin+0+ZN0S9YOllMzWfLwKQSS396P3iY3kNOLDPM1y065H4gOW3p4uTDkB8zWdb7FgbdDhEgJkCUDRvogTmd/vPv3BVAUBuvylNzAAYi4hisVQnEHoIqWblrxqm4Mx8ujfljT+YjsWBYgIOc0oJPsq1slCpH71fKybJOEoAuuVTRSCnYlmU6P/Z4iSJEcbLv+Yu9/1EAh7JKEXDKxq4ChUiKymRbwjgHdcUWTARgLYXHSr2LOU+BV7MVwzxwOfkOWybYAGZD5iRT0edjpxD6VhcOQ6j94tP51wdOHBdMeXa9OqWRcmWXA1XLUIUH6zyCwlAs3z+YBkfs1u+VIejJEF3ckrjI9T0y/aMA2+/tgAg08VURKT8vbKMUgAMIGzzAcOi5HknHQAz8+l+MW/829KxhtH7tTz+jIMAJPCYMULAWd6fvi+EY9ouoZBM/Kx/4LUBgFLgNC5o16FrE8JJVJgkiFhaQQBv3+dVbMrWVsC8UxFRkjjaVsW2DtRdOJ/vAyohVYK7A+bTvTdj8HlqTMcaRu/XxHkzjgNkIOWuDr8jnYYDKDutgpUhra0uAlAyCCUAK8BXcjBXgLCk/h0D/hcByDxFAdAzoFUqUBYRJTUcMWdPP7ONL6i5bLQeALJRQ+bT/W7G4AuAOXq/lsGdcRgAY+glLkYclJVTsa6ptCX3uQjAKINQstFrAZKIwWxQIhIJuovB/Nx+r2LzFCwlj8Y0evl/MYk0kieVtcvrwGUnHQCVjjVkPl3mItQsIPuElx9G79dOzDgMgGkAWlNyBJn8xKprBRC+zgEo4LWRgcdVcOCjjlNvmx84DrzNAahaFZWLygKWxUNibIhTcPD9BMLLa65bzreAMSGVoXvJ/Cgh1WUfO+XTZS5CDYDs9GH1fnOrIDcAkABTTDCCLYK0Cwi/586WcKJUiEpC8CCBYDsiiSplqUIUmOjf+o2tIiKVUJbgU5uSWl4DWwX4+PcXnrQATBNS+8yny1yEopdcay+930y5YhgAg+9n2OoUeI5TdQer+32fdhmGoOBZanBo+g1yEKU4dYgFSvqB//vZBIBt9RshkTbW8ZZZ2hUgvDL3iU3uux4LSBM0ZD7dPRnTH08VAIfV+2XAOucQAMuVcKfFSD/+IAABsEoGwYAoHZIKEEYxRIHwLS8pUuhjFVs6/ZZhIVWyxVKBBIRXnbQATBNS+8ynI4tBzkEACv+chlUVIKE/5cRGsWmlKfIzudc3APLQSlg3E2OCyVRc1kpU3DgBmKoQsWtlBcswjPu+nfTYtBL+GQdgOf16GCZW6pXlBCqWSgqJypoOAFfXXDifbwFJLvi5HAjlnUsiIe6AjOp4iQNQHRlT2PlgJCUbbc2s+v/hFwFb/q7gm6HlYpBbmTV2sscQyy/qFBj2v0/cAdz/HGD7NDA1AUyOOU+1CwWOewNjKj6/O03F1/WuugW4/XJgfBoYmwDGdH7IxB5kLPIB+I8AfNwZgga5ck2fJbEm8V9zNWPfrasbgMuPAcuseJ8Exsb9FdBhA+7gaQNKB6TfcgCYug+YJT+g89aoBDMmIMScP12uTKj13uDv8zsKig/uJ1uQOsnojm3qB5P5ACRBH3OhPuzzRN9DV88HqQLEWPJnvTy5nm/t/1s4BcuSpRZtGAu4fi+wtBVYEyccrYwn6hF8/FkJp9bKxAKVFsn/d8urgbHPA9NPOEOWl4+2cfoFHhfVrJTZPKHSj5daOtup6JyCpPx8rHWRVQ7WOlrYCMx8AHIzlxkALPD9c0VB+x/A3E/+E2fUYHXdF7KTGwdvTd0AHP9r4PgWYG0KWBdfsBdsMPfPrKKsoL9XAVLAvO2fFylCE4cKliyrDVZNcGS1CqEYhWFiAZV+XntaURdTLmpCEbpchTYLqi6NrkMCzLzt5Xc4HwyJmmkJ+Z73jQOh4NWeDUZiK1K08f0EXt7CMHVawIk7gaVpYJUA9LI1Ao8bzKX1cytoFtFfpdCIWz7rgzHgth8u0oPGDwETc8CEMySUzFaikgtlpW1Ta8JqNba7lVljSRgW+Q6ZP/57WQvj6fydBjXfAjKbgEvMLwWCvhNoipgNpnQshlS4IGFWzIk6ylWwAz93ETLxGWB5ClidLABoIOS7pmGfG+33YAG5mND0G8F4678vkiPJczNOAC4UyQm2N8w94kirFlfIAl7i402d6dbPWWAtrsjOFiuCvAJZOQE0pHTFsckHYDeCvhNgipQNxoAz8/8IPr5nbvH2jd+6AThJAE4AqwTdZKEBLDoDgU4+YVkPHIBoPwareOt/BkDexsMFAFnbzNJYm0IDnVwbt4uyur1kwL7Tp+iZM/08WT9Rc7DHUmuYTr/x+6o4ovvu9fjBbgR9JyA+omwwxvZI5ULg6ZW7y9FPf9QNwKm/CgCcKABovh8ByVy/UCtJq2f+X1yYJPGU27lIZLbuEWDsWBHesZeDz4iURLUWa1TE47LqK12fZmd3OXidFctqm92KatVs1jAEsNv6sdymaa2g8+xUL4I+Pn2beCgbLGWHI/h8G3oTr45iK86POlbBU9yKI/AcfLR+ouQwH9BfmmbLlTHboOnZ/T9+5vaf8FUaAThXsFOQ45mUcgZCWTAxe0UQ+urYMO1/37GtxQmoLCBtRSp30LrDp2SFdzYMgk/R+VNwvwR9mwQDsaspGSfJgYDYNTbp8psCQFJxEIBkQjDrxt8dXCUIY+COH5MVFPi8SOn2n/QYLZ9Gp0cxANIP5IvAkzVzxivRydnKNzBa8fddM84b6AFyAriMF2pajk9kYIeoClXmA3AQgr5NQEHMBqMVFMNaIOayNRL/vhlH3RZwmhbQQUcAasrVVGz4EtjCu/3dfb/ID3PbT7uKAZ/MhcIC0vqRTo4W0IBIEAmEtFwCYqjW03bcmdwBYeoWgetUbrR8snrloiR2drpACf+rD4D9EvTVjIJu7HBV+781X752Czj9lwUZkTEgcPoNPp5Nv4oBRhCG6dd+1DkMz1JIhR1BAHJ7zwqO3fIRRM5tmDK5CoQKsSgOeBYBKFZULTqcB9r6Ni5KYmd3WKDUA0BlhNLM8EbT1QBXBU72aI5ZjUcVOxz7WLkQ8d37vsart/uA6RcPsxNSAtAXHDYNC1AEpf9s01kKwuBwGU7HgVt/1jtD1e60fgQigSe/j5bQp+KYpGB+H62jT7P8/ZypBIC8Dhcx8eY9wF015abhmnoAyJ5WSrKeNgKO9SHxnT/LSasJBim5lRjWBEIVeROInKL1qunybRawLgASdEy74qjaNNzJCgqEEYzBGvK0297mAFSHEIB6ebKDgc8J1ksmV8t29f1en6L5v6cxIK5iK6Xne/5jCTiFcTqVn/r/tWDPWwXnEPTVgIKUHU7ljASawKefIwDpMdRxRB+wFgD+RREDJABpwSzz2c0LfxczVjkVKwaYgtBBezu3SvX08d39P5uO3QKahXMQciourZRAGKZWar/YZ1xXRPe8wQr2AUK7TvbOVTZBXx4MBECRnConUBSFEXT6mf/TK+/qmzAF/0UBOPqBZYF52HrTFCw2LH5G8UCzJEko5nZqmRnPh/uCXmpnVpDTsIPPwKApOaSA2QLDLSHf97iPx0tpISLfz7bl4iFfsUsnj+HZWEeOYDCDnDmCvZkEgedcCjxGseIhBYt3vx049HwMLRh8gA9gh2MoH9ABqKJzxf0McO7XlSAU4HzhYYFq+5D7hwBu/98OQLlIBCKnW39SlXNY+nqeiq2dkQg+gnGPb9/ZpT0lq6MV5D96gLCwgDmCwbdnCvZmCgY/dxy47xxg5SWuUjigYPHFbwA+fyGwfr2rXrMvPB+vp3L3GHCgi9JOHQCkRVPppeUBigXLFymyejYTB4YsgfA20ofRAlYB0FfAlvQqP0/TsX5PLOB5DNu471cmIwiBaRww/F01J+mz2pqChxUMZvpJlmBv3iTocsW4dzewfhkGFix+2febXDAeJO/YEILBB7pU1g8LQFo98QASVGYNQ6DZfEG3fnEqrgLhbf/HV15anbkFNCvohWSl9XPQ2XTM/2s3I4DwPIZwBEDfgitH0Ek6N6x+u/iD7T4g/YdBBYPpWHEaHlqwNw+AQa4Yj54JrJO+aQDB4pt+oCAyYvOPEIQDCgYfeF/9U3AbAMX7ItAlVtAspKZdz5SOlvA2pstxjES3wJ+92NgAGK2gwi78QoVfEhBeQACqNNP1RdoA18kKdgDhxkUI/zKIYDCnqyzB3jwAJnLFOEIW7QEEi1/1Y21ywVglCAcQDD5/Efj7M4CVrZ5AKlkhxeQUaxBI4nvFzxf8IfCVC4HV7cC6ZEX5nen3VX1vAGLZq8ysrvHY+QBwbGfI2E6JpLvdX+ksthpUvQrmX/sVDGZVUJZgb17vJHLFeGQcmCdVb5+Cxd/5xjZ6QzzMLOQBBIOfTV2Ps4HFHQ7CLQUQmUrV0rgKJMsCjsxGAqTn/hzw0EXA4tnAyg5gbTYBorKkUyLnkB9YVhTxu+kT13iccwtwdBewPAus+b2ar9xJAafqfgMQO4dh+J9+BHe5gqZZZzYok1JJUcpaR6bp93P+W/N6p0KuGIemgEWKgPQhWPxdP7NBLhiHKYHUp2DwpZ8rLOD8tmJQVplOLxAqmbRKC6EDYC7/CeCRPcCx3cDSrsISrs04CPm9ArZk55UvKAspYLqPaPdR4/H0g8DRHcDyVr/X6VabLHk2PhjpPVZY7d5xwF6CwS9y/4LbbVyQsEKIufGiKe0p2JvXOx3kinF0GjhOQY+oNRtljji9TQPf/fOV9IZY4Gq4D8Hgy/4W+Oo2YG5bUUy04vUcLCqSJVRWszJbNgxSmMau+q/Ao2cBR88EjtOqbgNWWaTkIFz3YiWrF4nAjtN0nBZrJnU+/8PA3CxwfMYB6LUra3oglL0tps6wlVha5rLiqd9AdDfB4Je6U0s/0BXTDYh80Sr2FOzNA2AXuWIszABL1JaKWq1R+nwGeM17OsoFY5XTVw/B4Cv+Djg0C8xvLYqJCECzgsxmZlq9T8e0XGUyaUizavPtxoFr/zvw2BnA0Z3A8e2FVV3x6c4sqwObckeyhiXAowUSADhD1XhceDMwx37lvU4XxVN2n3rJIocygkr/Vbs7fe+EdBLcfaXXQ3IPWIrpBB6XlnwpR76jYG9e7/SQKzarxM7qJFj8mg8UarMV9IZ4gvNDD8HgKx8HDs8A8zMFAFnPYQPDl0Co2g4fpDZLqKCxT0/7fhJ4fCdwbFvhRiwRgJruCOwUgCpeCvUjZmEFxhfk9W969kW/B8xvKQqnVgg+B6CB0MsI7P70AHgmd2n1NQ0rv7FvALIlVYK73MnQCDLThSGZoDpuP7uCeuX5n8zroB5yxThGnQ0CgyBMxY63Aq/5aBHG6EBviDlOLV0Eg1+0AByZLgbl+HRxnZXJoqqttA4ODovlJZVuSjTQFtq+NwNPbHMAzramdVpVs6wEoPtdNg37wJfvsYiJP9NFqvHY+7vAwjSwxAeNxVO8T6aNVRRRlT6hHrJ0Ovaw0WDJCKng7g86APvNB9wg2JvXO33IFWOBgn8EIf2nRLD4tbe1+AU7yAWbZeskGHwVdd2mgAUCcNKnJgLQrZ/V9/Jnn5JUYmnAE3hCmv3+t8AWQfSzyPK/POOgJgDdsgqA5nfJAvLdLV+bz0kK4RqPZ3wQWJxyAPqDVhZQyQr7gyaXI9axWCFVAGLvRUhV46PgLnUWBs0HbBPszeudPuWKsTRZAJDTo8l8ui/42juL5veQC7ZpsEow+OrZQlqVVuH4FLA8WVyDAOTAmHUQCAWQkOlsQAwDt/9/AE8SgPQpNa07+AhAA6HLXbb5Xr4IaAMfv/eGvP5NzyYA7UGjBWTWjh40v9fSyscHLtaxhJWxFVsNNAXH1khw983+DYPmA5aCvXkdNIBccemfceooAfhAAcA+6A2xLuAGucxrzgKOMexDfV9OwbS2BB/BEoqLSrBoYGgJ3E8qLcIEsP/ngCPuUy7S13L3wb6PU56/m/Xj4Ps0TKCXQA6AXuNeZY3HMz5QANAeND1kwcKXlj6wOZQ+b7R+Pi0PD0DeFAfk590CKg8qncfoFzIRVWVqfFfBhgn25vXOAHLFWCDbvPstBsJZ4LUPt+jdesgFg+qVptWq11bg2gtgfuLiRAAgQeg+oEmsOujsXb5SsAoCIN/3vx04OlNM6Yv0tdx1MKvK7/TFjVmeCD4HQQQhf159eV7/pmc/kwCcKABoeYvR0oept7SEoZQ0Tr1lPuPQFlAtO0nyAcWhpzw/FSjFzGjLx+RGvxzoSeC1hwsA9klvaFN5FAy+9mJgnhaQ0qqagglADo4c9AhCDpJPl5ZommQ8738HcGw6AJBW1VecZv0cePwOY0/wl1lAD/WUCx0mMlDLr8bjmb+Dwp3x4nkDYbD0thIO5aNtfmDi/xGEeRawxhs7Vb/q2huABQJwAlhyy2cC0xoggjAAUCWWAkksOiIY978TmOOqeqqwqAx3WGhHK06n7TDwOcAV/iipPAKjwgrZm2o8nkUA0gKmAHTrp+o9MTrEYvq44o9pZIOtgmu8mafCV72YAKT/RwAy5OPOuVlAAk9Oule6xQRTWUKlWtkU/IvAHAHti5oIwDK841ZPFtCmdr0U8PaC9hVultd4CIC8P2Ztt/m5/qC11TJXlJDGGpfGAmYODgFoCxACkLpuWh3KCgqE8gNVZK4KtxgjJAB/2X1Krao1rfN7CWZf3LSBT4uAEIyWBVpipL7GgwA0AW25GbGENBTRx3rm1M2w39mmrFVwjTd1Kn+VAZALEE5LtIDyMWUBvbLNLGHgd5H/V07BDp7r3uU+Jadgn3ptxekA5MBri0/Wp4wzBjDbCnkMWMqVpE8GJwLQqvfc0pqbkVj5aNk7gbCxgJno30cAjntowtXNaZ1suvSKNhsYTcVKmw9F5xGE+94dfEoP+JYhD/8OC8eIPUsUHokVVKB78XszbzAF4Pvd//PCKVGIpOAr78mn4DZOm8YC1jco+w6EFTDDPJqeCEBZBa5GffVbhmQ8DtZW5TYOvPhXip0GTuu22lTMLSw+aAVl9QhEWjurI/aQiLJkTMLsX9R3r/ymZ73fp1+37OU9hunXSkdl7T3QrhKCtlCM59k2i5CMMSIAGdqxEIwrmptzTsCEut5yilKoJLAcxCq3fe8tLCDBFwO+tKjyuxSCMdYEXoeDrHcHvu0tTwLzmwHA4N/Gh6zNCqqeOSxC2lb8tQSiMwbuqXIqAcjFh2JjBKGJyShQG6ygVbfJegULWBYcMR3rvb6oCRaQwFPgl1M5rR7/JtBZOIZWx/0+s4QeY5z/1/X2tFnAxPpFELaVkdLN8MWGVr4pCBsfMHN8bmTKfCjZ0Ncp456/x58zLzfw6Qf3ABd8pUgEYmqk5bGyek06IQl1bkXScnlN/u8L24Gdx1qVq91KQvrpgwaAAw9p+wnXPw1YjyWMGtDo2ASOFGMU7SIEUzdYD34vMPmXwLbHgdkFYAtlGiim6DpxJtvq9LtlVr/aWKEB8pUXAOOPAFPzwBTZ9r04vdQ9Ts4pAZ3cd+yHxgfMAOH+vcA69/9Uxijmz/AerYpdar1lNSMYzV+vWY/34I8DY58Gph8Bpo8A04vAFEFIknIHohGVR62QhFRSYjQE6qFri2z3iaPAhHNNlxKwArI0Q1IAxwfReacbC5gBPp66/5ICgLKCtqnsrKKlrFZUFPKOr7osMTtdsxzqQRZ93Q1MPARMPllohUxRqkEK6gShOP0S+dY2hlRv99y+ovRi7IiTnTvLqmg6xDPYpqAUgRgsoR7MxgJmgHD/c4E1FXu7FRRbvEgd7evXWlbPpp9EgUjiJpwe6zwOMlvpAWCMVusJYPIYMOlSDZRpoGiNxKzbdIQlXONMWJbGtw4svdgz3El47nzTRvPrrKptAJT6ZrzfintvAJgx4vsvdQvIXK5VYF3sUZxmJUvgA1FOvwF8spKyBtM1y6EepI4LqVMedbEaTp0EIKdPKh5FqYYqSxgo2jgFr13j6XXHnOiSZOeBVSvyC8qC2r05FVvVw9cAMAOA178AWPMp2LJaaekiCPXExwHw660n1oB/niGQazwOkkSepbJ/72I1x4CJ+cJ6lYI1riccrVicUuVSmIW82pkwnHHVOKbFsOozQGkFkwewnBES37ABYMaAX39ZAUCCb82nIlo+40p2gNnvsoKunxH1xGwA/LOzdQOQJPIuHzV2GBg7Cow7AI0l33XfjOsv6oVodes6ISbBsAZMX+kJxU56KY7pkmFVhOciuvTzSt05v0+ryuT/9gDrZNe4wPMsI7VJP3GcP7gUOOdvgL1rRYJ0ZI5IV3hV4/wrGYPPU3/AiRhYusy2K7mU999P+z90ObD7LuBZK0Xdkeq9NSX2+o4HLwfWlopFCC0fgciBMtAFC8CGrYXVoVjnU2G7rTXrzh4kfRzLY1kyGwBoeiGcPiXb5eAzdXWnazPCSScb4j3xfmav8Cx2p50lAMW0VXINitCogl2r9H2dcctWwQxQsn6ZTBbMNtcgdKIbiZj51VcBk38CXPxoQcfCUg8pjcYgZScw/momACnXyr4leBhs5QaBTHpf7X8dMPYJYO8XgAv9e8QJlAZZq8D4xSuANYKPJQn0AR2AHKy1MACKe9nfFI6IEqduEWoHIJ9wlsVKLekoMCa9EAegSTYQeM4TXco2SEMkAHEbBZoj4bbYtdyCVrFqGXgTSxgXYTZeHLi9AMjEQRCVUXP/n4KUaaT8vVTi+Rtg7GPAuYcAWlMCgUVkQfJ2Q12yBvPXMwHImhDWwf81imsTiLSEvHZkr+jY/p9CQRD4p8DOBwteItai05qn31FFdfLlFxYWgCDUIkRkj/TxbCEi/89jfPZ3X2VqYSJQbmUNQY3HQT7hbv2sLoerVwKQHNEEoCsm8R4MhPRjXUGzVEIKIoY7yaEYuY4dgGb5RXruoSgtSCLLarkICQ9f6QNykGjFdjsIBaI4kGlt8W+Rg5g0HJ8qAp47nihAzFpuWtPIMBZJlASILvR6fQ0DCVbJCkJOJCqnk4pGpb99tZ8MopyiKDX7WWDiwYKXiEQOehCrgKh+eJQ+EQHo1Lby/zRlyf8TIbf9XS5ftIb8I92YugH4ay2pLusorl7dAoonWtMwQSTdOFuQSLTGHyIC8kxSIQuA4hwU2WUAoO4/grBcDbsfWElSzg+JCoYDoEGM1ixSkHzgF/wG7y8sIa3J7JPAGWuFJSQIaU01iJHUiYP4e33BrPOHmG/JMaOfTZVYRhwGav87vWKPJ9/rSH4IOGO5sITqg/ggxXs4TOaBAECbeoOsgfl+DrQShFqcEIhyyt0MbMusEkx76iAZXKM8BvXiZAGlF+KaIbaadYpem4aDgpJZQz6YJABV5VcHAJZ0v4FxX6KG5UpYs0KnqjhRuagEVgPglYAl9ciHf8mdUrJh0Qx9vkDBzBywfbkYQIGwahA/kglATsHsDzKA0BATiPyZ4NEDwIeoa/uFYKKXL2f24nQoIgd9R3yQCMTFqwIAfdBWI7+yB5ZLECYLETd85YJl+2YAUNosLIel/xYlu4Jsl6bhNhD6it4WJCvA2Zc4Gxo73RcgJeOqFmGR6rcChLYACyGojmEYdj59KnZ+tIQRhH9IvWA2hiREjDeRI9Cly7fMF3EtWRFawhQIf5IJwE56wdTIYdt7tp9ys1K8JnoJvod9Wn682PNkP4hUy1ndWgstAtBDMLYN5/6PAc5DGNoF4SrZfN+4+IhT8jqwg2Cp8ThIJ5vfSWBXAVCrWN9SMxDK+skaOvhoAc8me654pmUB3f0wyt+E8FyRAGmPlOEoiSD2qgvmAKoOm52fAuiTDHSyIRxx+lI0QxxADubfF5vffMmSajrWlP7nmZ3dSy+4r/ZzAUEHnQ8R70HsXlK+PgJsW68G4XYGZj0EY2EYATCAT6tAhmE0DXcC4faapcwMgAIfLb0kuzT9Qmw5uwAAIABJREFUSi+EfeALkSrpBovbrQDnkm8wAo8/E3i+CCsZ98NCpAp8cUekZyBavI4ET/TnaAk/RQCyAXy6uNSPA0i+wMeB6ePA5HFgZq2wpNGK3FUDAHmv3fSCe7afX8CB4UNEEOolVi/3obastNwJ9cO5BOBKEQMsAcifHWzRAigWWAlCn5K2bQYAOe1KMjTIR2kRUhKVS7IrLia0v+3xwHMZMCbYNP0KfG79zAqK5DxOvyEuWu6VD5KSHy2YAEQAfpaRdl5UkuUctIpBnCIIl4psD03FtIIP1ADAlBuJM47EqqUX3LX9kSBQcuuyftK78xUkHyQ+RLqHZ3Fv1KcgLj5kAQ1s0Qo6IA1nHhNLQzA8ZxvBXuNx8DcS5UYpNnoYxsCnUIqvZo0F3wPTMa7Hv53HOJVbS/l+5bumX7d+5WLE44hxIRJB2NMCqj9ixwuE90svWCaIA6bAp959EKeWChAyA0PTOV2unGMQveCO7bfqHbcS4rJR7Ewqnw5AWhLuImg2uFQAXAVs8RGmntW4+g2hB3P79L/EJ9zGvqrxOPibiVihAOgrWQOf/EBfBcsPNBBqW9Hv6zzGqFzmoXz3B9AePgXiq6bgiv4YOB9QHS8AfpkAFMMjrWAcQA0iO9XJiQyAnos2vV7ESHOOQfWCO7Zf7F40mZFQScRKAYBaSU6vAVcTgN7xXHiUFpDTMK2dFh56912BTiDcvpkATIXzCL4g3WXTZ4jpGfjoF/oihL+fx+0yWUABLwIwtYKKIabgCzHQvi2ggBKn0McEQDaKT5cGkIOo6SuyYzEfjQB0EM5nZgAPoxe8of3sgSqCQM3jkdFLvpRvR13+7UVRuhUFSavNO6otwp88ZZ3+t4M6HLtch6OT9AG/q9cmtf//gV1JDYcnQ2zY6/YakfSrU+Pg1M45NqPt3IEtoM7WFHokyrWKkooglCMWLYjiUXMtK3g8Uzd1WL3gDe3vRRCoUEYCwGtYFxxqgA2E/jI20F5hhmQod98BHNnlxOTig1aGiDanO21yV4DygWuB8YeB6fnC9WEtiKVVKeE0ZGiXWczeJoWMIig5a9V5DA1ANoKDeDylZ9NSXxyAsiKawrQqmCv2HVf5e8aRoxfc1n7xs+khItAUvojvyWryxVcWJZksVSyZoQRA3dcAoHzax4Gj2wtu6FVKM7gMgti02jbV476oUJJs1j/AbA1mQ3Pm8eTRsoZDtR+xZKCiEKmMXTIeXHPGdhYArX8FwG4DGMEnAHIK4yvT58nWC2b73cexaZgWWaEKgU1gjNbPP7PvOYGsUSBkv3hBtmRWNzxjTk9RWktvxp6POj0vARjY9sWkFel8RWxegjIF4RjwAOnZWMPBTGjqvHmszxJOBUD3xyznL2bqROvoP3N3q84jG4C7M/PpcvMBef0cvV9k6hXv+2Yno5QfGArRbaCC0mWv2YtF3ecerNDhkNZIIsXQRv5dlTtGADJSz2gEE1EJQM//026HdIEZLC8B6A0tk0g1Ja8DuzJdphS82QBEZj5dbj7gxZN5er/IZI+67pscgE7QaDOUMyC0Wb8+gXjuR4F5J6YsaXnFhBoAGEVvUhb60jISgCQnoh/OLBgvIrL8v7DdFkEYM5dtNg97tvz5zJqzdfIBmJlPl5sP+DJP5xtW7xffnzeh7H+Z+3+RpkyWT1YxuURJYVtx6T0fCTocouQV85VkHRIGegEuEv/YKpkA/JceVmL8kv6t5/9pu62tfiPWcFQVEa0DZ9WcLJEPwMx8uvfnjT9IgZyj94t/ldeA/S9tMaGa9SNdmsIxbvVscVJ1GScoMt4UPwhAsmMZ0aXzQBsvdGRBjQz0FUpEJRAJQOq4KAnBdz+sfiPJ3bOYn8fsykyVWMfiN3BOzckS+QDMzKe7OW/88aqQzsfE5kH1fvGjeQ0wADodmVGwOeiMsUqHrGOnS4UFy9P/wAEojkEnI+IqOIJQNLgpCXhcmLAtD/D+kgQE235L93tj+YBqgTX9BiCeW/NedT4AmQ+YkU/3sbzxBymQuZhm8g1T+QbV+wWFdjKO/Te2mEFNlCb6gPF708VJ1TXHgKd91GnZpDfi1k/gM2vqU3DUnCuBmNQe3P9vw6pe229KOvB0K1k+ZS+rnrfM2AlA3JMZtah/EZKZT3drxuDz1O/yxAwu9JgJxr3lQfR+8aa8Buy/wdWQZAVl+ZzCrG3q9c/YrkmHy3IRYryAAqAkEBIlopJxNNUbER+fA/H+/+AAdP9PmS9dazicJybm7mlB8nR2dI1HvgVkOlZGPt2nM29GCamcGZjAwlQ+vvrV+8X/zGsAAUiLVPp/wd+zaTMFWw+/kAA0GQQnpCw5mDsAMIrcRB5mC/+MAffTwgfwKY2KfmCZ6ZIkUShrxXxBX4yYaV8Hzmcn13jUA8CMfDqWYeQcSkhVOl8U6uxH7xekrsg49h8oiCENgC5TUG5vKxxT8f2aRtOtcAKQ1s8soPuOVUIwpchNlEEIOyNSIrrvv3hwnckWIZPZsnbcDyzTpvg3lU8mpZQqozyfK74aj3wAKh1LgrsD5tMxiz/nkGD1sHq/YNFOxkEAcuW7oqmXlisuQOT7VV2jwi/kTgj1RkoZhBje8Z83SCAEEJZW0C3gff8tADCt4VASaWIBK0HI9q8BF5yUAMzIp8tNx5Jg9bB6v/jdDPSRns0BWIZeUitIo9IhHmhXTvzCPQddccnZ76U1V/IvC4SBCFyg26DFNg7c++Mhhb6qiCikT7WVUmr6lYn2nRKyrdZ51GMBlZIc07GUBdMjny6XCiUmpA6j94vMZbgBMFo552pu27PXAqXTyAUQcitOQjAm9xX0N9pIwIPmSCmH5QuPqER0L4kDYgp9zOUL6fYxkbZcFceyAreAF3GlV+NRDwAz8uksnT3jiILVSmpWNlhMze+k94vMZfgGAPJeHDjpCrgM01Tdry9OzvmYAzAqLVWIwEShwzbRwwSEn+MqP6bQK5tZlWyhjCCCsC19Xv7gOnBRbgp7cu/5AOyVjqVMmA75dJZ9nHF0yohWNlhMxKnS+0XmMtwAmFq4imnYbrEqNJPc+9kfd62RKh0On8qV9hXZ9askEPgAfI56ziocUgVbzGT28lEtRMoKtg7lBHtznfZNA+CQ+XQWM8k4uglWK/NLYKzS+8U9GReXD0g/Tyvh4Ne17Yb4Zbr6g6y7/aNWcoPpjKRTsJIags5IJwkEAv6en05S6GUBfRWsUExZyVZVQCQwrgN7Wfdd41GPBczIp8ODeXfTSbBa6YYxlY8/p3q/udc3C+jTbtvqt2oadnB2m4oNgMn0W0p+hYWHWbwg9yU/0Kb9EIy+5y2hiCit4UgKyTeAkN8Valk4Le/ldlONRz4AWWBRM6fdIPfHstw/G+SE5rMnVQ/kA5AkLHS0ak7V7reXfhgACaBqDtD3e/nmc5k9kA/A80JReq+U38zGVp3ObJo/BvAOD3dtwiWar9zEHsgHIGlFubqSx7+Jja36anLLcDvvgwA+NDpDfILv+qlzuXwAXuSjrkKemlO2e3U1uWUYnL8dwB/5e2apca9LNv+vsQfyAUheX4VguB+mzIsaG9ntqxhF4Xbe3QD+n7/uHLAW9wQ1tblMRQ/UA0CaHC7plXEh+q4T0OWcfhleYTSHBK0EH/mi+fcRuKQn4I6fWpeoB4AevCz3HOOm9yb3F5mBlZBNclYCj1aRfyfrbgPCTR6AzK+vD4CyglX7jpmN7HY66d1E0ctdIrEEE4wEIMlam+Pk7YF6AMj7EwAVbU82vTerCwhAXopJN9zVI+AYrOeULLZgErY2x8nZA/kAJGWr0naUWdFpy2cT+oCWjpdjLFxE5UzYIBBpEUX5nLnlvAktb76SPVAfAOUHpiAMm96bsVtCAMaKALICMyxDq6cXfycA+b/mOLl6oF4AiqBRIEzBp7/X2Af0+fi1XIioMIlAI+AIPIGPmeROWV3j1Zuvyu2B+gHoFfZiDS2lC0LiY52WUADkQoTTMH1BFSYRdHoRfKSu5v9qrizMHYPT+vx6ARhSuDcAzzmDo5ZGHT1PAKYMwQxME2jiSo/gEwBrrq+u41ZOy++oD4BaCcsXTPiSI3ey8s4KGoG8QwCMFM+0ggQhLR0BF19SXuD/ayakz7uR0/TsMcxg3SjfqWNA0hsrga/ojaq/8WPcC+YIk4Ke4CMSuB2XVht1Oj8zIfXlU8BtU8DhmYRXWdfrdF1fgr3+S8At48CD04DVjXQSDO70PTUnaJ5uOCwsIIFHSSFy1pKPWCDsZxCpw8UVgKSPxLXM937OzxxAljzcPAbcswU4Qh4V3UN8mKoeKm/bu78IfKJQa8VD48CylHQiL3O3/qg5Rf30BKACMtJXjXKQcfBSK8Dfqc3KVCwuN2VFGRnm/yKZtq4Re5ifyQQgM2A+BeB3GHaZBo5MAIue0l7Kt3cC4xhw+5eL7TuCkJk1jBtyerbUfYG5ExjZ/pqrxE5fAOrOq5SmowVIrRp1IyT2R6+fg0bgVYG4CsyZe2UsaiOGKXr4Sfp9k8CxCYAFSKyvXeY1o1BxQux91yMtfsHPutgnnyUuUvhc0ZsgUXib+nVkq6+ZKaABIHsgVZnuwD9sVo66rrR4ImdhLGSQ8zPL/JgBQxeU1ouWkO9PTgDzbgmXxrzMkatl3keivfG5x4r4IRcz5BfkO5vEZ0kgpIfBZ8yKjlL17syy0tMNcOn9dl4Fy6dLFabj1Mpvow9Ify+I4Nlo9Xt+ZqU9VdJpqZh4QDDyxUyYOYJwHDg+DhgI/WUVZl7aSEt93+GO9Ia2iuZKOfA7lhp9JpvAVy61w2mOwO5hmCgMHC1H9O24gu6UD9jP+ZmbtLRaSsei9SL4XDPbAEh/kGQ/pSUcc0lbApFWb67lQUhpVnLBsoKqqZclFMmUtrxPcwxl3X7vOCAtYLSCcugFQmqhdssH7HU+RznjiOlYXA8wqkOfkItTAom+oKygca4ES8jY+N3z7fSG4hfUtp3ihUHruVSsFy1iRvNP+1N7A5BdJACmVpAgZPhGOyCigEjlPLudn7kvFtOxuB4g6OjD8UWLRkCZFRwrLCEXJQQhp2K+37lQeBCRX1A7KPQto1prFEmSYn2mB9EAsO+kYfk8KQhZF8yjVz5gp/MztyOUjiW9bCUhEBhKRCCgSis45uQ/PhX/xfFWMgOnWu2gxB0TF/o0kEZ/kCDM1Ts+3RHYnwVUL6XhDFrAswfIB6w6P1MrTulY0sum1VICglKwCEACqvQFCUK3gHcsFQCM/ILayqP1k9JshVqrncMalOYYvgcGAyCvIwuod8YBJQmZpmGJeyRwkGw4n8jJOJQNw3idLFhMRNB0SgASTJyKoy/4ieXCeFfJBUeV2SoAclFyR0bbm1OHTUiN0/DTAwD7zQeM52dqj8VsGEkVE2jKetG7AEhQ0frJAv6RC0trC1skl+IWlNinGLbSaZg7Mc0xfA8MbgF1LQV1z08A2G8+oM7PVF9Ms2GUE0gQyp+Lwu2yagLgR9ZaYpkSypQ6a6Q2DCqzpkvietXIFdoZfuieGmcOD0DeP0HEbBhNwYPmA/L8zJQsATAKnguEqS+XTqkE4YfWWwCUFZTksYAYwZfIBeN9Tw0cjOwu8gDIZqsoSSvhEeQDiiGYFoyWiSDRypWgi69UP5sc5fIcquSCNeXqe2X9ZAHfM7Khe2pcOB+AT41+aO5iRD3QAHBEHd9ctuiBBoANEkbaAw0AR9r9zcUbADYYGGkPNAAcafc3F28A2GBgpD3QAHCk3d9cvAFgg4GR9kADwJF2f3PxBoANBkbaAw0AR9r9zcUbADYYGGkPNAAcafc3F28A2GBgpD3QAHCk3d9cfOxqYJ2au9RdPtdp/khoEOlglDYT39V1PzQFXLsMXAlgt9PCxJKPbufyf8/KHIPfBPAZABf79Xc5XQ0ZQ1Q7360NbxoHrlsDvs5ZRsgo0une06by6X1mZvtP99PNAp4F4LsBXA5gjw8EGTeqaGF4QhzQF80CX7cAvGIdeDYAfhdZ2sTKUcVrpE7nd31N5gj8e2dIo2osk7NZpMdK0Z19tv+bJ4F9K8D1ACj8yfNSikHeg+5Z969m57Y/8/ZP+dPLKZhP/rcA+AYAF7g1oRUhEMUzFMt6eSJfX78b2DkPfM0i8GIAX+uWlAMppreUUErn8p2gzTl+2flg/sDbTkvIOik+CP20//mzwAXzwDcCuNTPJeFXpEpM6QEjIHm/zTF8D7T5gATYNQCe69aAloRTGulfBESBSYNyxR5g/Bhw7hKwZwl4vk9LnM5JmsBzUyDGAX3B8G23Mz/g9BuUa/0IiutfMkj7zwKmngAuXSvOpUvAWYBtF4BTnspIj/O8zPaf7qdvWITw6eZA0JLQEhKEGgxZhUj/dz3NzSKwbR44exnYvVKcy+mM5Km0JhxInUtrGkmzCPicg3W5LMGkQiZZTm9xS9Z3+4m2o8C5c4X15pTKW2Lb+fCx7WLtjYxzqiql29Icw/dA5SqYf6RTTilg+lYCIXmICKQ4IK9wxfSJY8AZK8CuFWDnanEua9ZTAMsaCog3Dt92O/MvnRGBtGwkqKRmMEkqCaa+2k+0LQDTh4rP88UHj74kF1WaATo9QHQ7mmP4HugYhtEKj4PB6ZQ+FS0hQahpldPya1kXTOqNY8DscgG+HavAttUCvBxInitrkgL4lcO33c7spBdM3kAuSnq2nx9gQfAh4JyVwvrxwel2z3p4aMlzH6DM2z/lT+8aB+Q/OT4EEqckWQSBkGD6EQKQnDCLwBSnYgcf32fXioGUFawC4esyu7CXXnDP9tOCsyD4KLB1rmgvX7zfbu2WG/Jtme0/3U/vKxBNAMoi0KcjkATCN3HOEr3UAjDrwOP71rXixYEkeKMFlSX8ocwR6KUXTJ7AaNE2tF8WfA4Ye7Kw1mwvX/yZn+eKnvcrfzC6IK/ObP/pfnpfAGQnySoISBqUXyAASS1AK0JfagWYcRDOrAF66TxZQU7jBOEbM0egH71gcgXSFZAV54NQtj9YcNIpbONCyh8Ygi8CVospApDuB63g92W2/3Q/vW8AsqM4gLIKBBIH8bcJwMCNMX68BTqBb8s6sGWtsIA6jwDk662ZI9CvXjA5A6NVa2t/IAicnC/aGV+8T74IQPm/AmGuBc+8/VP+9IEAyLslAKMV/LgAyIUInfnjwPQqMOOgI/DstQ5Mr7UAqMF8V2YXDqoXXNl+EQQ6N9v29aKdesUpWJZbAPyPme0/3U8fGIDssDid/pUASCvCaXgJmFguAEfgEXT27gDkuwaUg/nbmSMwjF7whvbLhSDL5TwwvdRqo9oqHzACkCB8U2b7T/fThwIgO01T1IMCoAZxGRhbKoAXQUcQTjkI+a4B5e5FzjGsXvCG9gdqrLGFYrpVG/UuHzBOw2/LaXxzbh43DKeoJwlAHqLndSs4udoCoIBHQE45EPk3DuitmYOQoxdctp8+rFwIWsGFYiFFoLGNchcEQC6e+OJC5J2Z7T/dTx/aApYdJ37AyJK/DIwvFxYvWr0IwEn/H1Opco5sveDUhSAAF4HJpQJkWixp6k2n4IYfMGf0amDHev2I8+l4/UbvNw8Eozw72wJePOJ8und7EkKj9ztKGA1/7WwATo44n45pWI3e7/AAGPWZ2QBkYHCU+XTMfGGQmYIxjd7vqOE0+PXzATjifDrKtTZ6v4MP/MlyRj4AR5xPF+VaqZLJF1UzKdPV6P2eLDDr3I58AI44n07ZMARbo/d78gMubWE+AEecT8e9YOn2Uheu0fs9tUCYD8AR59MpG6bR+z21gKfW1gNAz4geRT5dTEZo9H5PPRDmAzBmRM8BJzqfLiYjSKKr0fs9dYBYDwBHmE9XtRfMsIz04aQZ1+j9npygrA+Akqs8wfl0BCCTWRq935MTYL1aVQ8Ao1zlAnAi8+kEQGZTNXq/vYb75Pt/fQAcUT5dBGCj93vyAaxXi+oDoFLyT3A+3Rcavd9eY3xS/z8fgCQX/LPR3SOzkon55jg1eyAfgD8M4NcAPD6aDmBtB1e4NMDNcer1QD4AbwbwxwDe4UvRE9wHZG1gNSXDLlwLNcep1QP5APxzzwj9IIAPnXhT5ORc5EYCA9HNcWr1QD4AmRH6FQBMTSZZH98ZmD5Bh5g1FopiNns1x6nTA/kAvAfAEwDudnI+EvQxPfkEzYfaCXRSBluQMB7YHKdGD+QDsBNBH/9+AkAobqTADGK7Inw1x8nfA/kA7EXQt8kgrGAGMfBxZ5Cv5ji5eyAfgL0I+r68uR0QmUFoBQU8vfNvzXHy9kA9AORoMw7CdGQCjoUZDwL4kv/+8OZ1gJhBIjGDgMh3vTavBc035/RAPgD7JegjODfhiMwgoqeJwNPPTaB6Ezq/hq+sB4AcXeXEP+ZhGVo9vRimIQD5v5oPAZCupgDI9wg8/qz/1Xz55usyeyAfgMMQ9GU2Op4eAchpOIJQQEz/VuPlm6/K7IH6AMjgGzdl6QtyX5jWjpQFevF3lq3xf6yhrOlIAUgQCojR8gmE+l9Nl2++JrMH6gEgR5UA5KYsc+AZmCbQCDi+IvgEQMob1XBEAHIajgBMLV+0kCdws6aGu3zqfkV9AGTwjftg3JRVVRAtHQEXX/wbAcoXP5d5CID8GoJKvqDAloKOoIz/y7x8c3pmD4zhaqwjRzCYyQg5gr2ZgsFTLweWr8XQgsXjbwLWrnNtMlKgNoLBmZAa7PTCAuYIBlMvlWQswwr2UlUw45jdDSx8HbD+Ctd+HVCwePKbgJV9aASDM8Yg59TWFDysYPBtmYK91IbNOHaPA/M7gUXKXA4hWDz79cA8+W0aweCMURj+1HYfcBjBYO54MMY3tGDv8I3nmWSHOzYOLJ0LLPGXAQWLz3oB8MQUsEa16kYwOG8whjh74yJkUMFgbsNlCfYO0epwissVY34bsHw2sEIRkAEEi/dcU0SP5qhF1ggG5w3GEGdXr4L5134Fg4kAjuDQgr1DtDqcUmZETwArZwAru4BVqsv0KVh8/o3F4v0QXZBGMDhvMIY4u3MYhv95Zh+Cu1xBcxuOU/HfeDIq5cv7FuwdotXhlCBXjOXZAnyrO4BV6in0IVh8wStLuWCsUAyvEQzOG5ABz+4eB+R/ewnu/kOP/3G/l4kJTERlljQtIot2e53/IwO2OPl4FLtcnCqAp9cahT56CBZf+LpSLhhz1N5qBIPzBmTAs/sLRHcTDKbiNHdBGGymOC/3hglEvgjAnoK9A7Y4+XgiV4zVWYDAs/etxaubYPFFP1QkLtCIP8neaASD8wZkwLP7AyC/tJNg8L/xLNBu+YBdBXsHbHEFAINcMVamgdWZAoRrfPdXm8KitLdmgYveWAq+2y7iMqfuRjA4b1AGOLt/APJLqwSD3+y5T1yI0AoSbAxMMzGV1o8/My2ro2DvAK2t+GgiV4zj4+3AIwDXtwBrVJeuECze+9aW4Dut4PxkIhYsdetGMDhvoDqcPRgA+SWp4O4veQ5Uv/mAGwR78+6rQq4Yq9PAOi2fA4/vBkKudKVU7VZw77uKvWFuZbtcMNb5v0YwOG9g+jx7cADyi6Pg7gccgIxlcA5TKhaD01yYKBmVFpBZMfx/m2Bvny3t8LGqoqTliZbVI+gMgHwnMAnCIFi897cLAAZ6QyzFzzSCwXkD1OPs4QDIL5XgLmk5JHk/SD5gKdibd38VcsVYGmuBTaAzEHLHgyCcaokB7/1IkUET5IKxwF5pBIPzBqbPs4cHIC/AaeqvPL9pmHxAE+zts6VdLCD/lcgVY3UyWD0Bj1ZwqgCggXA7sPfWAoAJvaEtZBrB4Lyx6efsPADyCtmCvf00s/NnOsgVY3m8BTRZPZuGBUACdArY+5lWDqGmYbIrLHEx0ggG5w1OH2fnA7CPizQfaXqgUw80AGywMdIeaAA40u5vLt4AsMHASHugAeBIu7+5eAPABgMj7YEGgCPt/ubiDQAbDIy0BxoAjrT7m4s3AGwwMNIeaAA40u5vLt4AsMHASHugAeBIu7+5eAPABgMj7YEGgCPt/ubiDQAbDIy0B8ZYNMbkX+ZekpuIiOQrPar+xs889HJg6jZg5jAwvVZ8B+ll9PlO5/Fc/o+ECjnHfi8zYfkvM5ulmp4qJXVqx5deD4zfAkw/CGxdAZgoHfuh131QkaI5hu8Bs4Ds8B0AWLnIRGCBsFfn87JffDMwdjOw5R5g8giwZa34jnQQUwDo99wBfJ4TM7COiNdlaj2rA/jeV/vfDeATAP4UGH8I2Lrc6gc+SHqY4oMZ74VSKM0xfA+UUzB/oBUUCKMl6zSQ/PsXqZD5KQC/A0w/DEwcAcYXgYnVwppwADuBkefnCim90FmBWXwnK87Uen53BI8sbuwqaz9p5UgnQhBS+ZN1zE8Ak0utviCwq8DI8/nx5hi+Bzb4gJzKZE1SEFZZgS9/2pWR/gTAJ4HJQ8DEMWB8ARhfBsaWCwDquwQKvvNgHXvOcYVbPFJPkw+dDxC/W1Y4tWDpw/Rlgo4lo1T4/KxTihDNpJwj3/UiMLXemprjffC7eWpzDN8DlYsQDiKtVxzEqoHkyX9HRizW+nIgaQnvAiaeBCbmC0s4tgSMu2rMePAR9X252jXklaTFU108K0MHav/nvJ6ZxVVk9OI7GR2IZoGQNc/HgbHgIwqILIVujuF7oOMqWFawCoRxkfEIB5CWgkREBCNf9wMTc8A4QciBWyoGz16rwNgaML5eWKpctYZL3N+TWLX0gvtuP0HHk2n16JDyxXmVhfU0qywbJbr5GSuXKxA/sV5Y9UYWdnjwyS3qKKgarWA69Wg6fjQOIK0HadnIjPVFB+AiME4AuiUkCFnESyCSkmAuU7Cjm15wX+2X2ifBRn9A8mKcW2UFjULVQcgVDl80u40SYh763FfvquhLCxitoBYUsoJfjXKttByMq9CKcHn4sPuCbgXNJwyWkECcz5Q376UX3LNncZyQAAADEklEQVT9fFgIJs6lBBwtn3Tt6FpIz4RWnuQxPh2XIGzm4CwQ9hWIFgBTK0gQHiIAJddKq0ELQh+KL1qUR4MvSEsoENIKrgALHNiMox+94K7tl9qnnMio8MSf6SNwGpYVjCDk/Ju7isq496fCqX0BkDeqlWwKwic1gAQSpzGREnFgREz01eALLvvq2Kfi45m6cf3qBXdsfxRbJMho8dimqOhEK8cXQRr9QVpvPoDNMXQP9A3ACELFxPh+jACkP0fLIKFCCRRqKuPUdqjlC9o07JZwKVNHeBC94DQcZO0XAAkmgotAk9QYrR9f/BvByYfMSATDVMzwTXMM3QMDAVAgVHCZ7/MaQK4QZUHiNCbBQlqUw74YCb7gcmYkelC9YFlwvVv7RRAorTuBkECU9asCID9/x9B935zYzyKkqpfiNHxcA0gLQgvBAaPVkCqm3h2AtC5m/RyEqzw/4xhGL3hD++MmslgqCbgUfLKAcRrmTlBzDN0DA1tAXUlWcDm1IOIIJAjlT/Fd05lbFQFwjdtgGcewesFt7Rc/Gx8iWjUCjGCT1YvWT1MwgUqrf3NG45tTbcu0aximWx9xENcEQHGbcYAEwtSXSqY0gnCdgeuMI0cvuGx/FUGgFhwEYrR80QckWN+X0fjm1DwAWv8RgJFilJZBznz0pQg+AZAAlVWh1GvGka0XzB0cCQi30aSGVa9AF62fLOB7MhrfnJoPwPER59Px+o3e76mL5Kwp2G57xPl0kxc3er+nLvyKtLmhfUC78RHn081ONnq/pzcAR5xPR9mRRu/31IVgvgUccT4dNaobvd/TGYAjzqejumqj93s6A3DE+XRUg2VSCjdaGr3fUw+I+VPwiPPpqJjO8J1Nw43e7ymHwHoAKMFd7QErAeEE5NNJMb3R+z3lsGcNzgfgiPPpomJ6o/d76oGwPgCOKJ8uKqY3er+nKwBHmE+noqRG7/fUA199U/AI8+kEwEbv93QHoEhZTnA+nYqSGr3fBoAtaiqBUImdm5hPJwA2er+nKwBHnE+X1gUzSbnR+z11wPj/AeCpPDD3t7rvAAAAAElFTkSuQmCC",gy=(I("bc",function(e){function _class4(){var e,l,_,S=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},k=S.blendFunction,E=void 0===k?Km:k,T=S.preset,M=void 0===T?hy.MEDIUM:T,R=S.edgeDetectionMode,I=void 0===R?ly:R,D=S.predicationMode,O=void 0===D?cy:D;_classCallCheck3(this,_class4),e=_callSuper(this,_class4,["SMAAEffect","uniform sampler2D weightMap;varying vec2 vOffset0;varying vec2 vOffset1;void movec(const in bvec2 c,inout vec2 variable,const in vec2 value){if(c.x){variable.x=value.x;}if(c.y){variable.y=value.y;}}void movec(const in bvec4 c,inout vec4 variable,const in vec4 value){movec(c.xy,variable.xy,value.xy);movec(c.zw,variable.zw,value.zw);}void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec4 a;a.x=texture2D(weightMap,vOffset0).a;a.y=texture2D(weightMap,vOffset1).g;a.wz=texture2D(weightMap,uv).rb;vec4 color=inputColor;if(dot(a,vec4(1.0))>=1e-5){bool h=max(a.x,a.z)>max(a.y,a.w);vec4 blendingOffset=vec4(0.0,a.y,0.0,a.w);vec2 blendingWeight=a.yw;movec(bvec4(h),blendingOffset,vec4(a.x,0.0,a.z,0.0));movec(bvec2(h),blendingWeight,a.xz);blendingWeight/=dot(blendingWeight,vec2(1.0));vec4 blendingCoord=blendingOffset*vec4(texelSize,-texelSize)+uv.xyxy;color=blendingWeight.x*texture2D(inputBuffer,blendingCoord.xy);color+=blendingWeight.y*texture2D(inputBuffer,blendingCoord.zw);}outputColor=color;}",{vertexShader:"varying vec2 vOffset0;varying vec2 vOffset1;void mainSupport(const in vec2 uv){vOffset0=uv+texelSize*vec2(1.0,0.0);vOffset1=uv+texelSize*vec2(0.0,1.0);}",blendFunction:E,attributes:Nm|Fm,uniforms:new Map([["weightMap",new Tg(null)]])}]),arguments.length>1&&(l=arguments[0],_=arguments[1],arguments.length>2&&(M=arguments[2]),arguments.length>3&&(I=arguments[3])),e.renderTargetEdges=new Pf(1,1,{depthBuffer:!1}),e.renderTargetEdges.texture.name="SMAA.Edges",e.renderTargetWeights=e.renderTargetEdges.clone(),e.renderTargetWeights.texture.name="SMAA.Weights",e.uniforms.get("weightMap").value=e.renderTargetWeights.texture,e.clearPass=new Om(!0,!1,!1),e.clearPass.overrideClearColor=new Zp(0),e.clearPass.overrideClearAlpha=1,e.edgeDetectionPass=new uy(new dy),e.edgeDetectionMaterial.edgeDetectionMode=I,e.edgeDetectionMaterial.predicationMode=O,e.weightsPass=new uy(new fy);var L=new kg;return L.onLoad=function(){var S=new Mf(l);S.name="SMAA.Search",S.magFilter=Yh,S.minFilter=Yh,S.generateMipmaps=!1,S.needsUpdate=!0,S.flipY=!0,e.weightsMaterial.searchTexture=S;var k=new Mf(_);k.name="SMAA.Area",k.magFilter=Jh,k.minFilter=Jh,k.generateMipmaps=!1,k.needsUpdate=!0,k.flipY=!1,e.weightsMaterial.areaTexture=k,e.dispatchEvent({type:"load"})},L.itemStart("search"),L.itemStart("area"),void 0!==l&&void 0!==_?(L.itemEnd("search"),L.itemEnd("area")):"undefined"!=typeof Image&&(l=new Image,_=new Image,l.addEventListener("load",function(){return L.itemEnd("search")}),_.addEventListener("load",function(){return L.itemEnd("area")}),l.src=py,_.src=vy),e.applyPreset(M),e}return _inherits(_class4,e),_createClass3(_class4,[{key:"edgesTexture",get:function(){return this.renderTargetEdges.texture}},{key:"getEdgesTexture",value:function(){return this.edgesTexture}},{key:"weightsTexture",get:function(){return this.renderTargetWeights.texture}},{key:"getWeightsTexture",value:function(){return this.weightsTexture}},{key:"edgeDetectionMaterial",get:function(){return this.edgeDetectionPass.fullscreenMaterial}},{key:"colorEdgesMaterial",get:function(){return this.edgeDetectionMaterial}},{key:"getEdgeDetectionMaterial",value:function(){return this.edgeDetectionMaterial}},{key:"weightsMaterial",get:function(){return this.weightsPass.fullscreenMaterial}},{key:"getWeightsMaterial",value:function(){return this.weightsMaterial}},{key:"setEdgeDetectionThreshold",value:function(e){this.edgeDetectionMaterial.edgeDetectionThreshold=e}},{key:"setOrthogonalSearchSteps",value:function(e){this.weightsMaterial.orthogonalSearchSteps=e}},{key:"applyPreset",value:function(e){var l=this.edgeDetectionMaterial,_=this.weightsMaterial;switch(e){case hy.LOW:l.edgeDetectionThreshold=.15,_.orthogonalSearchSteps=4,_.diagonalDetection=!1,_.cornerDetection=!1;break;case hy.MEDIUM:l.edgeDetectionThreshold=.1,_.orthogonalSearchSteps=8,_.diagonalDetection=!1,_.cornerDetection=!1;break;case hy.HIGH:l.edgeDetectionThreshold=.1,_.orthogonalSearchSteps=16,_.diagonalSearchSteps=8,_.cornerRounding=25,_.diagonalDetection=!0,_.cornerDetection=!0;break;case hy.ULTRA:l.edgeDetectionThreshold=.05,_.orthogonalSearchSteps=32,_.diagonalSearchSteps=16,_.cornerRounding=25,_.diagonalDetection=!0,_.cornerDetection=!0}}},{key:"setDepthTexture",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Jd;this.edgeDetectionMaterial.depthBuffer=e,this.edgeDetectionMaterial.depthPacking=l}},{key:"update",value:function(e,l,_){this.clearPass.render(e,this.renderTargetEdges),this.edgeDetectionPass.render(e,l,this.renderTargetEdges),this.weightsPass.render(e,this.renderTargetEdges,this.renderTargetWeights)}},{key:"setSize",value:function(e,l){this.edgeDetectionMaterial.setSize(e,l),this.weightsMaterial.setSize(e,l),this.renderTargetEdges.setSize(e,l),this.renderTargetWeights.setSize(e,l)}},{key:"dispose",value:function(){var e=this.weightsMaterial,l=e.searchTexture,_=e.areaTexture;null!==l&&null!==_&&(l.dispose(),_.dispose()),_superPropGet(_class4,"dispose",this,3)([])}}],[{key:"searchImageDataURL",get:function(){return py}},{key:"areaImageDataURL",get:function(){return vy}}])}(Jm)),function(e){function EffectMaterial(e,l,_,S){var k,E=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return _classCallCheck3(this,EffectMaterial),k=_callSuper(this,EffectMaterial,[{name:"EffectMaterial",defines:{THREE_REVISION:zh.replace(/\D+/g,""),DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new Tg(null),depthBuffer:new Tg(null),resolution:new Tg(new df),texelSize:new Tg(new df),cameraNear:new Tg(.3),cameraFar:new Tg(1e3),aspect:new Tg(1),time:new Tg(0)},blending:0,toneMapped:!1,depthWrite:!1,depthTest:!1,dithering:E}]),e&&k.setShaderParts(e),l&&k.setDefines(l),_&&k.setUniforms(_),k.copyCameraSettings(S),k}return _inherits(EffectMaterial,e),_createClass3(EffectMaterial,[{key:"inputBuffer",set:function(e){this.uniforms.inputBuffer.value=e}},{key:"setInputBuffer",value:function(e){this.uniforms.inputBuffer.value=e}},{key:"depthBuffer",get:function(){return this.uniforms.depthBuffer.value},set:function(e){this.uniforms.depthBuffer.value=e}},{key:"depthPacking",get:function(){return Number(this.defines.DEPTH_PACKING)},set:function(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}},{key:"setDepthBuffer",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Jd;this.depthBuffer=e,this.depthPacking=l}},{key:"setShaderData",value:function(e){this.setShaderParts(e.shaderParts),this.setDefines(e.defines),this.setUniforms(e.uniforms),this.setExtensions(e.extensions)}},{key:"setShaderParts",value:function(e){return this.fragmentShader="#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#define packFloatToRGBA(v) packDepthToRGBA(v)\n#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)\n#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\n#if DEPTH_PACKING == 3201\nuniform lowp sampler2D depthBuffer;\n#elif defined(GL_FRAGMENT_PRECISION_HIGH)\nuniform highp sampler2D depthBuffer;\n#else\nuniform mediump sampler2D depthBuffer;\n#endif\nuniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;vec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}float readDepth(const in vec2 uv){\n#if DEPTH_PACKING == 3201\nreturn unpackRGBAToDepth(texture2D(depthBuffer,uv));\n#else\nreturn texture2D(depthBuffer,uv).r;\n#endif\n}float getViewZ(const in float depth){\n#ifdef PERSPECTIVE_CAMERA\nreturn perspectiveDepthToViewZ(depth,cameraNear,cameraFar);\n#else\nreturn orthographicDepthToViewZ(depth,cameraNear,cameraFar);\n#endif\n}vec3 RGBToHCV(const in vec3 RGB){vec4 P=mix(vec4(RGB.bg,-1.0,2.0/3.0),vec4(RGB.gb,0.0,-1.0/3.0),step(RGB.b,RGB.g));vec4 Q=mix(vec4(P.xyw,RGB.r),vec4(RGB.r,P.yzx),step(P.x,RGB.r));float C=Q.x-min(Q.w,Q.y);float H=abs((Q.w-Q.y)/(6.0*C+EPSILON)+Q.z);return vec3(H,C,Q.x);}vec3 RGBToHSL(const in vec3 RGB){vec3 HCV=RGBToHCV(RGB);float L=HCV.z-HCV.y*0.5;float S=HCV.y/(1.0-abs(L*2.0-1.0)+EPSILON);return vec3(HCV.x,S,L);}vec3 HueToRGB(const in float H){float R=abs(H*6.0-3.0)-1.0;float G=2.0-abs(H*6.0-2.0);float B=2.0-abs(H*6.0-4.0);return clamp(vec3(R,G,B),0.0,1.0);}vec3 HSLToRGB(const in vec3 HSL){vec3 RGB=HueToRGB(HSL.x);float C=(1.0-abs(2.0*HSL.z-1.0))*HSL.y;return(RGB-0.5)*C+HSL.z;}FRAGMENT_HEAD void main(){FRAGMENT_MAIN_UV vec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGE color0.a=clamp(color0.a,0.0,1.0);gl_FragColor=color0;\n#ifdef ENCODE_OUTPUT\n#include <colorspace_fragment>\n#endif\n#include <dithering_fragment>\n}".replace(Bm.FRAGMENT_HEAD,e.get(Bm.FRAGMENT_HEAD)||"").replace(Bm.FRAGMENT_MAIN_UV,e.get(Bm.FRAGMENT_MAIN_UV)||"").replace(Bm.FRAGMENT_MAIN_IMAGE,e.get(Bm.FRAGMENT_MAIN_IMAGE)||""),this.vertexShader="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEAD void main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORT gl_Position=vec4(position.xy,1.0,1.0);}".replace(Bm.VERTEX_HEAD,e.get(Bm.VERTEX_HEAD)||"").replace(Bm.VERTEX_MAIN_SUPPORT,e.get(Bm.VERTEX_MAIN_SUPPORT)||""),this.needsUpdate=!0,this}},{key:"setDefines",value:function(e){var l,_=_createForOfIteratorHelper2(e.entries());try{for(_.s();!(l=_.n()).done;){var S=l.value;this.defines[S[0]]=S[1]}}catch(k){_.e(k)}finally{_.f()}return this.needsUpdate=!0,this}},{key:"setUniforms",value:function(e){var l,_=_createForOfIteratorHelper2(e.entries());try{for(_.s();!(l=_.n()).done;){var S=l.value;this.uniforms[S[0]]=S[1]}}catch(k){_.e(k)}finally{_.f()}return this}},{key:"setExtensions",value:function(e){this.extensions={};var l,_=_createForOfIteratorHelper2(e);try{for(_.s();!(l=_.n()).done;){var S=l.value;this.extensions[S]=!0}}catch(k){_.e(k)}finally{_.f()}return this}},{key:"encodeOutput",get:function(){return void 0!==this.defines.ENCODE_OUTPUT},set:function(e){this.encodeOutput!==e&&(e?this.defines.ENCODE_OUTPUT="1":delete this.defines.ENCODE_OUTPUT,this.needsUpdate=!0)}},{key:"isOutputEncodingEnabled",value:function(e){return this.encodeOutput}},{key:"setOutputEncodingEnabled",value:function(e){this.encodeOutput=e}},{key:"time",get:function(){return this.uniforms.time.value},set:function(e){this.uniforms.time.value=e}},{key:"setDeltaTime",value:function(e){this.uniforms.time.value+=e}},{key:"adoptCameraSettings",value:function(e){this.copyCameraSettings(e)}},{key:"copyCameraSettings",value:function(e){e&&(this.uniforms.cameraNear.value=e.near,this.uniforms.cameraFar.value=e.far,e instanceof Fv?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}},{key:"setSize",value:function(e,l){var _=this.uniforms;_.resolution.value.set(e,l),_.texelSize.value.set(1/e,1/l),_.aspect.value=e/l}}],[{key:"Section",get:function(){return Bm}}])}(Pv));function prefixSubstrings(e,l,_){var S,k=_createForOfIteratorHelper2(l);try{for(k.s();!(S=k.n()).done;){var E,T=S.value,M="$1"+e+T.charAt(0).toUpperCase()+T.slice(1),R=new RegExp("([^\\.])(\\b"+T+"\\b)","g"),I=_createForOfIteratorHelper2(_.entries());try{for(I.s();!(E=I.n()).done;){var D=E.value;null!==D[1]&&_.set(D[0],D[1].replace(R,M))}}catch(O){I.e(O)}finally{I.f()}}}catch(O){k.e(O)}finally{k.f()}}function integrateEffect(e,l,_){var S=l.getFragmentShader(),k=l.getVertexShader(),E=void 0!==S&&/mainImage/.test(S),T=void 0!==S&&/mainUv/.test(S);if(_.attributes|=l.getAttributes(),void 0===S)throw new Error("Missing fragment shader (".concat(l.name,")"));if(T&&0!==(_.attributes&Nm))throw new Error("Effects that transform UVs are incompatible with convolution effects (".concat(l.name,")"));if(!E&&!T)throw new Error("Could not find mainImage or mainUv function (".concat(l.name,")"));var M=/\w+\s+(\w+)\([\w\s,]*\)\s*{/g,R=_.shaderParts,I=R.get(Bm.FRAGMENT_HEAD)||"",D=R.get(Bm.FRAGMENT_MAIN_UV)||"",O=R.get(Bm.FRAGMENT_MAIN_IMAGE)||"",L=R.get(Bm.VERTEX_HEAD)||"",U=R.get(Bm.VERTEX_MAIN_SUPPORT)||"",B=new Set,z=new Set;if(T&&(D+="\t".concat(e,"MainUv(UV);\n"),_.uvTransformation=!0),null!==k&&/mainSupport/.test(k)){var G=/mainSupport *\([\w\s]*?uv\s*?\)/.test(k);U+="\t".concat(e,"MainSupport("),U+=G?"vUv);\n":");\n";var j,H=_createForOfIteratorHelper2(k.matchAll(/(?:varying\s+\w+\s+([\S\s]*?);)/g));try{for(H.s();!(j=H.n()).done;){var V,W=_createForOfIteratorHelper2(j.value[1].split(/\s*,\s*/));try{for(W.s();!(V=W.n()).done;){var q=V.value;_.varyings.add(q),B.add(q),z.add(q)}}catch(he){W.e(he)}finally{W.f()}}}catch(he){H.e(he)}finally{H.f()}var X,K=_createForOfIteratorHelper2(k.matchAll(M));try{for(K.s();!(X=K.n()).done;){var Y=X.value;z.add(Y[1])}}catch(he){K.e(he)}finally{K.f()}}var Q,J=_createForOfIteratorHelper2(S.matchAll(M));try{for(J.s();!(Q=J.n()).done;){var Z=Q.value;z.add(Z[1])}}catch(he){J.e(he)}finally{J.f()}var $,ee=_createForOfIteratorHelper2(l.defines.keys());try{for(ee.s();!($=ee.n()).done;){var te=$.value;z.add(te.replace(/\([\w\s,]*\)/g,""))}}catch(he){ee.e(he)}finally{ee.f()}var re,ne=_createForOfIteratorHelper2(l.uniforms.keys());try{for(ne.s();!(re=ne.n()).done;){var ie=re.value;z.add(ie)}}catch(he){ne.e(he)}finally{ne.f()}z.delete("while"),z.delete("for"),z.delete("if"),l.uniforms.forEach(function(l,S){return _.uniforms.set(e+S.charAt(0).toUpperCase()+S.slice(1),l)}),l.defines.forEach(function(l,S){return _.defines.set(e+S.charAt(0).toUpperCase()+S.slice(1),l)});var ae=new Map([["fragment",S],["vertex",k]]);prefixSubstrings(e,z,_.defines),prefixSubstrings(e,z,ae),S=ae.get("fragment"),k=ae.get("vertex");var oe=l.blendMode;if(_.blendModes.set(oe.blendFunction,oe),E){null!==l.inputColorSpace&&l.inputColorSpace!==_.colorSpace&&(O+=l.inputColorSpace===$d?"color0 = sRGBTransferOETF(color0);\n\t":"color0 = sRGBToLinear(color0);\n\t"),l.outputColorSpace!==Zd?_.colorSpace=l.outputColorSpace:null!==l.inputColorSpace&&(_.colorSpace=l.inputColorSpace);O+="".concat(e,"MainImage(color0, UV, "),0!==(_.attributes&Fm)&&/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/.test(S)&&(O+="depth, ",_.readDepth=!0),O+="color1);\n\t";var se=e+"BlendOpacity";_.uniforms.set(se,oe.opacity),O+="color0 = blend".concat(oe.blendFunction,"(color0, color1, ").concat(se,");\n\n\t"),I+="uniform float ".concat(se,";\n\n")}if(I+=S+"\n",null!==k&&(L+=k+"\n"),R.set(Bm.FRAGMENT_HEAD,I),R.set(Bm.FRAGMENT_MAIN_UV,D),R.set(Bm.FRAGMENT_MAIN_IMAGE,O),R.set(Bm.VERTEX_HEAD,L),R.set(Bm.VERTEX_MAIN_SUPPORT,U),null!==l.extensions){var ue,le=_createForOfIteratorHelper2(l.extensions);try{for(le.s();!(ue=le.n()).done;){var ce=ue.value;_.extensions.add(ce)}}catch(he){le.e(he)}finally{le.f()}}}I("ba",function(e){function _class5(e){var l;_classCallCheck3(this,_class5),(l=_callSuper(this,_class5,["EffectPass"])).fullscreenMaterial=new gy(null,null,null,e),l.listener=function(e){return l.handleEvent(e)},l.effects=[];for(var _=arguments.length,S=new Array(_>1?_-1:0),k=1;k<_;k++)S[k-1]=arguments[k];return l.setEffects(S),l.skipRendering=!1,l.minTime=1,l.maxTime=Number.POSITIVE_INFINITY,l.timeScale=1,l}return _inherits(_class5,e),_createClass3(_class5,[{key:"mainScene",set:function(e){var l,_=_createForOfIteratorHelper2(this.effects);try{for(_.s();!(l=_.n()).done;){l.value.mainScene=e}}catch(S){_.e(S)}finally{_.f()}}},{key:"mainCamera",set:function(e){this.fullscreenMaterial.copyCameraSettings(e);var l,_=_createForOfIteratorHelper2(this.effects);try{for(_.s();!(l=_.n()).done;){l.value.mainCamera=e}}catch(S){_.e(S)}finally{_.f()}}},{key:"encodeOutput",get:function(){return this.fullscreenMaterial.encodeOutput},set:function(e){this.fullscreenMaterial.encodeOutput=e}},{key:"dithering",get:function(){return this.fullscreenMaterial.dithering},set:function(e){var l=this.fullscreenMaterial;l.dithering=e,l.needsUpdate=!0}},{key:"setEffects",value:function(e){var l,_=_createForOfIteratorHelper2(this.effects);try{for(_.s();!(l=_.n()).done;){l.value.removeEventListener("change",this.listener)}}catch(E){_.e(E)}finally{_.f()}this.effects=e.sort(function(e,l){return l.attributes-e.attributes});var S,k=_createForOfIteratorHelper2(this.effects);try{for(k.s();!(S=k.n()).done;){S.value.addEventListener("change",this.listener)}}catch(E){k.e(E)}finally{k.f()}}},{key:"updateMaterial",value:function(){var e,l=new zm,_=0,S=_createForOfIteratorHelper2(this.effects);try{for(S.s();!(e=S.n()).done;){var k=e.value;if(k.blendMode.blendFunction===Wm)l.attributes|=k.getAttributes()&Fm;else{if(0!==(l.attributes&k.getAttributes()&Nm))throw new Error("Convolution effects cannot be merged (".concat(k.name,")"));integrateEffect("e"+_++,k,l)}}}catch(j){S.e(j)}finally{S.f()}var E,T=l.shaderParts.get(Bm.FRAGMENT_HEAD),M=l.shaderParts.get(Bm.FRAGMENT_MAIN_IMAGE),R=l.shaderParts.get(Bm.FRAGMENT_MAIN_UV),I=/\bblend\b/g,D=_createForOfIteratorHelper2(l.blendModes.values());try{for(D.s();!(E=D.n()).done;){var O=E.value;T+=O.getShaderCode().replace(I,"blend".concat(O.blendFunction))+"\n"}}catch(j){D.e(j)}finally{D.f()}0!==(l.attributes&Fm)?(l.readDepth&&(M="float depth = readDepth(UV);\n\n\t"+M),this.needsDepthTexture=null===this.getDepthTexture()):this.needsDepthTexture=!1,l.colorSpace===$d&&(M+="color0 = sRGBToLinear(color0);\n\t"),l.uvTransformation?(R="vec2 transformedUv = vUv;\n"+R,l.defines.set("UV","transformedUv")):l.defines.set("UV","vUv"),l.shaderParts.set(Bm.FRAGMENT_HEAD,T),l.shaderParts.set(Bm.FRAGMENT_MAIN_IMAGE,M),l.shaderParts.set(Bm.FRAGMENT_MAIN_UV,R);var L,U=_createForOfIteratorHelper2(l.shaderParts);try{for(U.s();!(L=U.n()).done;){var B=_slicedToArray(L.value,2),z=B[0],G=B[1];null!==G&&l.shaderParts.set(z,G.trim().replace(/^#/,"\n#"))}}catch(j){U.e(j)}finally{U.f()}this.skipRendering=0===_,this.needsSwap=!this.skipRendering,this.fullscreenMaterial.setShaderData(l)}},{key:"recompile",value:function(){this.updateMaterial()}},{key:"getDepthTexture",value:function(){return this.fullscreenMaterial.depthBuffer}},{key:"setDepthTexture",value:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Jd;this.fullscreenMaterial.depthBuffer=e,this.fullscreenMaterial.depthPacking=l;var _,S=_createForOfIteratorHelper2(this.effects);try{for(S.s();!(_=S.n()).done;){_.value.setDepthTexture(e,l)}}catch(k){S.e(k)}finally{S.f()}}},{key:"render",value:function(e,l,_,S,k){var E,T=_createForOfIteratorHelper2(this.effects);try{for(T.s();!(E=T.n()).done;){E.value.update(e,l,S)}}catch(R){T.e(R)}finally{T.f()}if(!this.skipRendering||this.renderToScreen){var M=this.fullscreenMaterial;M.inputBuffer=l.texture,M.time+=S*this.timeScale,e.setRenderTarget(this.renderToScreen?null:_),e.render(this.scene,this.camera)}}},{key:"setSize",value:function(e,l){this.fullscreenMaterial.setSize(e,l);var _,S=_createForOfIteratorHelper2(this.effects);try{for(S.s();!(_=S.n()).done;){_.value.setSize(e,l)}}catch(k){S.e(k)}finally{S.f()}}},{key:"initialize",value:function(e,l,_){this.renderer=e;var S,k=_createForOfIteratorHelper2(this.effects);try{for(k.s();!(S=k.n()).done;){S.value.initialize(e,l,_)}}catch(E){k.e(E)}finally{k.f()}this.updateMaterial(),void 0!==_&&_!==ed&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},{key:"dispose",value:function(){_superPropGet(_class5,"dispose",this,3)([]);var e,l=_createForOfIteratorHelper2(this.effects);try{for(l.s();!(e=l.n()).done;){var _=e.value;_.removeEventListener("change",this.listener),_.dispose()}}catch(S){l.e(S)}finally{l.f()}}},{key:"handleEvent",value:function(e){if("change"===e.type)this.recompile()}}])}(Tm))}}})}();
